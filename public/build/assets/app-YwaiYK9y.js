import{_ as _t,r as Y,c as h,o as f,a as e,w as l,b as t,Q as ce,d as ae,e as _,F as Q,f as V,g as O,h as k,i as de,t as i,u as a,j as K,k as Qe,l as la,T as ze,m as Do,n as Ve,p as Fe,q as J,s as Xe,v as Lt,x as S,y as oe,z as U,A as mt,B as fe,C as Be,D as ee,E as dt,G as it,N as Z,H as Uo,I as pa,J as Cl,K as Tt,L as G,M as oa,O as he,R as se,P as ke,S as Tl,U as Ao,V as jo,W as Rt,X as $t,Y as fa,Z as _a,$ as Eo,a0 as Me,a1 as Mo,a2 as No,a3 as Bo,a4 as Ct,a5 as zo,a6 as Fo,a7 as ga,a8 as Mt,a9 as ba,aa as Pa,ab as Lo,ac as Xt,ad as Oa,ae as Ho,af as Ia,ag as Ko,ah as Pl,ai as Yo,aj as Wo,ak as Qo,al as ka,am as wa,an as Jo,ao as Vt,ap as _e,aq as Pe,ar as Ue,as as Ae,at as $e,au as qe,av as H,aw as we,ax as ut,ay as je,az as Te,aA as ea,aB as xe,aC as Je,aD as Ke,aE as Le,aF as Ze,aG as Ee,aH as Ge,aI as Ne,aJ as le,aK as M,aL as ue,aM as at,aN as De,aO as Ol,aP as na,aQ as Yt,aR as Wt,aS as Qt,aT as Dt,aU as Ut,aV as et,aW as Ra,aX as sa,aY as Da,aZ as ra,a_ as Nt,a$ as Bt,b0 as ha,b1 as Jt,b2 as Go,b3 as Xo,b4 as Il,b5 as Zo,b6 as en,b7 as tn,b8 as an,b9 as Ua,ba as ln,bb as on,bc as nn,bd as sn,be as Rl,bf as tt,bg as rn,bh as Aa,bi as dn,bj as un,bk as mn,bl as cn,bm as pn,bn as fn,bo as gn,bp as ve,bq as Ht,br as nt,bs as bn,bt as vn,bu as _n,bv as Dl,bw as ta,bx as ct,by as yn,bz as kn,bA as wn,bB as vt,bC as aa,bD as Pt,bE as Ul,bF as Al,bG as hn,bH as wt,bI as gt,bJ as bt,bK as zt,bL as ia,bM as jl,bN as $n,bO as xn,bP as Sn,bQ as El,bR as Vn,bS as qn,bT as Cn,bU as It,bV as Tn,bW as Pn,bX as On,bY as In,bZ as Rn,b_ as Dn,b$ as Un,c0 as An,c1 as jn,c2 as En}from"./virtual_pwa-register-C29SgS70.js";const Mn={},Nn={class:"row"};function Bn(m,n){const d=Y("i-head"),o=Y("authenticated-layout");return f(),h(Q,null,[e(d,{title:"About"}),e(o,null,{title:l(()=>[...n[0]||(n[0]=[_("About",-1)])]),default:l(()=>[t("div",Nn,[e(ce,{class:"col q-pa-md q-ma-md",square:"",flat:"",bordered:""},{default:l(()=>[e(ae,null,{default:l(()=>[...n[1]||(n[1]=[t("div",{class:"q-mb-md text-h4"},"About",-1),t("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Autem soluta, accusamus placeat eius eligendi perferendis quisquam veritatis iste debitis laboriosam facere et aliquam quos beatae illo distinctio rerum eos! Expedita, voluptatem. Aut nihil deleniti magni fuga eius labore aliquam nulla quod ullam sunt amet eum asperiores, harum unde eligendi tempore sapiente. Placeat sed, dignissimos voluptatum perspiciatis saepe aspernatur, maxime est, ipsam quas nobis cumque sunt labore molestias? Amet in sed ullam recusandae, nostrum dicta facilis blanditiis incidunt quae commodi soluta id impedit vel fugit illo, molestias reiciendis, provident nam molestiae! Ipsam, hic. Facere aut quisquam praesentium enim illum, pariatur nam.",-1),t("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque, cum nulla. Ut eligendi tenetur aliquam cum mollitia repellat voluptas, fugiat doloremque sunt commodi enim excepturi distinctio id sapiente incidunt ipsam asperiores cupiditate, labore libero! Ad facere magni cumque perspiciatis, adipisci possimus pariatur quo nobis minus, est enim similique quaerat vel asperiores ipsam harum et, totam fugit.",-1),t("p",null,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Suscipit aspernatur maxime consectetur, consequatur excepturi facilis praesentium rem placeat sapiente, maiores doloribus modi voluptate. Unde autem dolor officiis numquam incidunt quasi aspernatur nam dolores ratione quidem recusandae, nulla qui provident molestias odit nemo praesentium quas voluptatem aliquid perferendis, iste veritatis vitae. Dolor, eligendi quidem distinctio asperiores doloremque culpa corporis quibusdam earum ex laudantium iure officia ullam nostrum maxime voluptatum laboriosam impedit labore illum. Culpa, veniam dolor odio ad eius nisi, aspernatur quia veritatis blanditiis repellat id minima deserunt beatae?",-1)])]),_:1})]),_:1})])]),_:1})],64)}const zn=_t(Mn,[["render",Bn]]),Fn=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"})),Ln={class:"q-ma-md"},Hn={key:0},Kn={__name:"Autocomplete1",setup(m){const n=V(null),d=V([]);let o=null;const s=(r,b)=>{if(r.length<2){b(()=>{d.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Qe.get(`/web-api/customers?q=${r}`).then(p=>{const u=p.data.data.map(c=>({label:`${c.code} - ${c.name}`,value:c.id,data:c}));b(()=>{d.value=u})}).catch(p=>{console.error("Gagal mengambil data pelanggan:",p),b(()=>{d.value=[]})})})};return(r,b)=>{const p=Y("guest-layout");return f(),O(p,null,{default:l(()=>[t("div",Ln,[e(de,{class:"full-width",modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=u=>n.value=u),"use-input":"",label:"Cari Pelanggan",options:d.value,onFilter:s,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),n.value?(f(),h("div",Hn," Saldo: Rp. "+i(a(K)(n.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},Yn=Object.freeze(Object.defineProperty({__proto__:null,default:Kn},Symbol.toStringTag,{value:"Module"})),Wn={style:{"margin-left":"-10px"}},da={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(m,{emit:n}){const d=m,o=n;return(s,r)=>(f(),h("div",Wn,[e(la,{class:"full-width q-pl-none","model-value":d.modelValue,disable:d.disable,label:d.label,"onUpdate:modelValue":r[0]||(r[0]=b=>o("update:modelValue",b))},null,8,["model-value","disable","label"])]))}};function ya(m){return m instanceof File||m instanceof Blob||m instanceof FileList&&m.length>0||m instanceof FormData&&Array.from(m.values()).some(n=>ya(n))||typeof m=="object"&&m!==null&&Object.values(m).some(n=>ya(n))}function Qn(m,n=null){const d=ze(m,n);let o=b=>b,s=null;const r={transform:b=>p=>(o=p,b),submit:b=>(p,u,c={})=>{d.wasSuccessful=!1,d.recentlySuccessful=!1,d.clearErrors(),clearTimeout(s),c.onBefore&&c.onBefore(),d.processing=!0,c.onStart&&c.onStart();const v=o(d.data());axios[p](u,v,{headers:{"Content-Type":ya(v)?"multipart/form-data":"application/json"},onUploadProgress:y=>{d.progress=y,c.onProgress&&c.onProgress(y)}}).then(y=>{d.processing=!1,d.progress=null,d.clearErrors(),d.wasSuccessful=!0,d.recentlySuccessful=!0,s=setTimeout(()=>d.recentlySuccessful=!1,2e3),c.onSuccess&&c.onSuccess(y.data),d.defaults(Do(d.data())),d.isDirty=!1}).catch(y=>{var g;d.processing=!1,d.progress=null,d.clearErrors(),((g=y.response)==null?void 0:g.status)===422&&Object.keys(y.response.data.errors).forEach(x=>{d.setError(x,y.response.data.errors[x][0])}),c.onError&&c.onError(y)}).finally(()=>{d.processing=!1,d.progress=null,c.onFinish&&c.onFinish()})}};return new Proxy(d,{get:(b,p,u)=>Object.keys(r).indexOf(p)<0?b[p]:r[p](u)})}const Jn={class:"column"},Gn={class:"row"},Xn={class:"flex justify-center"},Zn={__name:"Login",setup(m){let n=Qn({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const d=()=>Xe({form:n,url:route("admin.auth.login"),onSuccess:()=>{n.processing=!0,window.location.href=route("admin.dashboard")}}),o=V(!1);return(s,r)=>{const b=Y("i-head"),p=Y("guest-layout");return f(),h(Q,null,[e(b,{title:"Login"}),e(p,null,{default:l(()=>[e(Ve,{class:"row justify-center items-center"},{default:l(()=>[t("div",Jn,[t("div",Gn,[e(Fe,{class:"q-gutter-md",onSubmit:J(d,["prevent"])},{default:l(()=>[e(ce,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:l(()=>[e(ae,{class:"text-center"},{default:l(()=>[t("div",Xn,[e(Lt,{size:"80px"},{default:l(()=>[e(S,{name:"badge",color:"primary"})]),_:1})]),r[4]||(r[4]=t("h6",{class:"q-my-sm text-primary"},"Login Staff",-1))]),_:1}),e(ae,null,{default:l(()=>[e(oe,{modelValue:a(n).username,"onUpdate:modelValue":r[0]||(r[0]=u=>a(n).username=u),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!a(n).errors.username,autocomplete:"username","error-message":a(n).errors.username,disable:a(n).processing,rules:[u=>u&&u.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:l(()=>[e(S,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(oe,{modelValue:a(n).password,"onUpdate:modelValue":r[2]||(r[2]=u=>a(n).password=u),type:o.value?"text":"password",label:"Kata Sandi",error:!!a(n).errors.password,autocomplete:"current-password","error-message":a(n).errors.password,"lazy-rules":"",disable:a(n).processing,rules:[u=>u&&u.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:l(()=>[e(U,{dense:"",flat:"",round:"",onClick:r[1]||(r[1]=u=>o.value=!o.value)},{default:l(()=>[e(S,{name:o.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(da,{class:"q-mt-sm",modelValue:a(n).remember,"onUpdate:modelValue":r[3]||(r[3]=u=>a(n).remember=u),disable:a(n).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(mt,null,{default:l(()=>[e(U,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:a(n).processing,loading:a(n).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},es=Object.freeze(Object.defineProperty({__proto__:null,default:Zn},Symbol.toStringTag,{value:"Module"})),ts={class:"q-gutter-sm"},as={class:"col col-md-6 q-pa-xs"},ls={class:"detail q-mt-md"},os={key:0},ns={class:"text-bold"},ja="Tutup Sesi Kasir",ss={__name:"Close",setup(m){const n=fe(),d=ze({closing_notes:n.props.data.closing_notes,closing_balance:parseFloat(n.props.data.closing_balance)}),o=()=>Xe({form:d,url:route("admin.cashier-session.close",{id:n.props.data.id})});return(s,r)=>{const b=Y("i-head"),p=Y("authenticated-layout");return f(),h(Q,null,[e(b,{title:ja}),e(p,null,{title:l(()=>[_(i(ja))]),"left-button":l(()=>[t("div",ts,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=u=>s.$inertia.get(s.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",as,[e(Fe,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":r[1]||(r[1]=u=>a(d).id=u)},null,512),[[dt,a(d).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[t("table",ls,[t("tbody",null,[t("tr",null,[r[4]||(r[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),r[5]||(r[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.id),1)]),t("tr",null,[r[6]||(r[6]=t("td",null,"Terminal",-1)),r[7]||(r[7]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.cashier_terminal.name),1)]),t("tr",null,[r[8]||(r[8]=t("td",null,"Kasir",-1)),r[9]||(r[9]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.user.username)+" - "+i(a(n).props.data.user.name),1)]),t("tr",null,[r[10]||(r[10]=t("td",null,"Saldo Awal",-1)),r[11]||(r[11]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.opening_balance)),1)]),a(n).props.data.opening_notes?(f(),h("tr",os,[r[12]||(r[12]=t("td",null,"Catatan Buka",-1)),r[13]||(r[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.opening_notes),1)])):k("",!0),t("tr",null,[r[14]||(r[14]=t("td",null,"Total Penjualan",-1)),r[15]||(r[15]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.total_sales)),1)]),t("tr",null,[r[16]||(r[16]=t("td",null,"Total Pemasukan",-1)),r[17]||(r[17]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.total_income)),1)]),t("tr",null,[r[18]||(r[18]=t("td",null,"Total Pengeluaran",-1)),r[19]||(r[19]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.total_expense)),1)]),t("tr",null,[r[21]||(r[21]=t("td",null,"Saldo Akhir",-1)),r[22]||(r[22]=t("td",null,":",-1)),t("td",null,[t("div",ns,i(a(it)(a(n).props.data.closing_balance)),1),r[20]||(r[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(oe,{modelValue:a(d).closing_notes,"onUpdate:modelValue":r[2]||(r[2]=u=>a(d).closing_notes=u),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(d).processing,error:!!a(d).errors.closing_notes,"error-message":a(d).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:a(d).processing},null,8,["disable"]),e(U,{label:"Batal",icon:"cancel",disable:a(d).processing,onClick:r[3]||(r[3]=u=>a(Z).get(s.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},rs=Object.freeze(Object.defineProperty({__proto__:null,default:ss},Symbol.toStringTag,{value:"Module"}));let is=0;const ds=["click","keydown"],us={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${is++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ms(m,n,d,o){const s=Uo(Cl,pa);if(s===pa)return console.error("QTab/QRouteTab component needs to be child of QTabs"),pa;const{proxy:r}=Tt(),b=V(null),p=V(null),u=V(null),c=G(()=>m.disable===!0||m.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},m.ripple===!0?{}:m.ripple)),v=G(()=>s.currentModel.value===m.name),y=G(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(v.value===!0?" q-tab--active"+(s.tabProps.value.activeClass?" "+s.tabProps.value.activeClass:"")+(s.tabProps.value.activeColor?` text-${s.tabProps.value.activeColor}`:"")+(s.tabProps.value.activeBgColor?` bg-${s.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(m.icon&&m.label&&s.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(m.noCaps===!0||s.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(m.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),g=G(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(s.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(m.contentClass!==void 0?` ${m.contentClass}`:"")),x=G(()=>m.disable===!0||s.hasFocus.value===!0||v.value===!1&&s.hasActiveTab.value===!0?-1:m.tabindex||0);function j(R,N){var P;if(N!==!0&&(R==null?void 0:R.qAvoidFocus)!==!0&&((P=b.value)==null||P.focus()),m.disable!==!0){s.updateModel({name:m.name}),d("click",R);return}}function w(R){Ao(R,[13,32])?j(R,!0):jo(R)!==!0&&R.keyCode>=35&&R.keyCode<=40&&R.altKey!==!0&&R.metaKey!==!0&&s.onKbdNavigate(R.keyCode,r.$el)===!0&&Rt(R),d("keydown",R)}function D(){const R=s.tabProps.value.narrowIndicator,N=[],P=ke("div",{ref:u,class:["q-tab__indicator",s.tabProps.value.indicatorClass]});m.icon!==void 0&&N.push(ke(S,{class:"q-tab__icon",name:m.icon})),m.label!==void 0&&N.push(ke("div",{class:"q-tab__label"},m.label)),m.alert!==!1&&N.push(m.alertIcon!==void 0?ke(S,{class:"q-tab__alert-icon",color:m.alert!==!0?m.alert:void 0,name:m.alertIcon}):ke("div",{class:"q-tab__alert"+(m.alert!==!0?` text-${m.alert}`:"")})),R===!0&&N.push(P);const A=[ke("div",{class:"q-focus-helper",tabindex:-1,ref:b}),ke("div",{class:g.value},Tl(n.default,N))];return R===!1&&A.push(P),A}const C={name:G(()=>m.name),rootRef:p,tabIndicatorRef:u,routeData:o};oa(()=>{s.unregisterTab(C)}),he(()=>{s.registerTab(C)});function $(R,N){const P={ref:p,class:y.value,tabindex:x.value,role:"tab","aria-selected":v.value===!0?"true":"false","aria-disabled":m.disable===!0?"true":void 0,onClick:j,onKeydown:w,...N};return ee(ke(R,P,D()),[[se,c.value]])}return{renderTab:$,$tabs:s}}const st=$t({name:"QTab",props:us,emits:ds,setup(m,{slots:n,emit:d}){const{renderTab:o}=ms(m,n,d);return()=>o("div")}});function cs(m,n,d){const o=d===!0?["left","right"]:["top","bottom"];return`absolute-${n===!0?o[0]:o[1]}${m?` text-${m}`:""}`}const ps=["left","center","right","justify"],At=$t({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:m=>ps.includes(m)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(m,{slots:n,emit:d}){const{proxy:o}=Tt(),{$q:s}=o,{registerTick:r}=fa(),{registerTick:b}=fa(),{registerTick:p}=fa(),{registerTimeout:u,removeTimeout:c}=_a(),{registerTimeout:v,removeTimeout:y}=_a(),g=V(null),x=V(null),j=V(m.modelValue),w=V(!1),D=V(!0),C=V(!1),$=V(!1),R=[],N=V(0),P=V(!1);let A=null,E=null,B;const z=G(()=>({activeClass:m.activeClass,activeColor:m.activeColor,activeBgColor:m.activeBgColor,indicatorClass:cs(m.indicatorColor,m.switchIndicator,m.vertical),narrowIndicator:m.narrowIndicator,inlineLabel:m.inlineLabel,noCaps:m.noCaps})),q=G(()=>{const ie=N.value,ye=j.value;for(let Se=0;Se<ie;Se++)if(R[Se].name.value===ye)return!0;return!1}),W=G(()=>`q-tabs__content--align-${w.value===!0?"left":$.value===!0?"justify":m.align}`),te=G(()=>`q-tabs row no-wrap items-center q-tabs--${w.value===!0?"":"not-"}scrollable q-tabs--${m.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${m.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${m.mobileArrows===!0?"":"out"}-arrows`+(m.dense===!0?" q-tabs--dense":"")+(m.shrink===!0?" col-shrink":"")+(m.stretch===!0?" self-stretch":"")),T=G(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+W.value+(m.contentClass!==void 0?` ${m.contentClass}`:"")),I=G(()=>m.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),X=G(()=>m.vertical!==!0&&s.lang.rtl===!0),ge=G(()=>Eo===!1&&X.value===!0);Me(X,yt),Me(()=>m.modelValue,ie=>{ne({name:ie,setCurrent:!0,skipEmit:!0})}),Me(()=>m.outsideArrows,Ce);function ne({name:ie,setCurrent:ye,skipEmit:Se}){j.value!==ie&&(Se!==!0&&m["onUpdate:modelValue"]!==void 0&&d("update:modelValue",ie),(ye===!0||m["onUpdate:modelValue"]===void 0)&&(ft(j.value,ie),j.value=ie))}function Ce(){r(()=>{g.value&&Ie({width:g.value.offsetWidth,height:g.value.offsetHeight})})}function Ie(ie){if(I.value===void 0||x.value===null)return;const ye=ie[I.value.container],Se=Math.min(x.value[I.value.scroll],Array.prototype.reduce.call(x.value.children,(We,Re)=>We+(Re[I.value.content]||0),0)),Ye=ye>0&&Se>ye;w.value=Ye,Ye===!0&&b(yt),$.value=ye<parseInt(m.breakpoint,10)}function ft(ie,ye){const Se=ie!=null&&ie!==""?R.find(We=>We.name.value===ie):null,Ye=ye!=null&&ye!==""?R.find(We=>We.name.value===ye):null;if(Gt===!0)Gt=!1;else if(Se&&Ye){const We=Se.tabIndicatorRef.value,Re=Ye.tabIndicatorRef.value;A!==null&&(clearTimeout(A),A=null),We.style.transition="none",We.style.transform="none",Re.style.transition="none",Re.style.transform="none";const Oe=We.getBoundingClientRect(),lt=Re.getBoundingClientRect();Re.style.transform=m.vertical===!0?`translate3d(0,${Oe.top-lt.top}px,0) scale3d(1,${lt.height?Oe.height/lt.height:1},1)`:`translate3d(${Oe.left-lt.left}px,0,0) scale3d(${lt.width?Oe.width/lt.width:1},1,1)`,p(()=>{A=setTimeout(()=>{A=null,Re.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Re.style.transform="none"},70)})}Ye&&w.value===!0&&pt(Ye.rootRef.value)}function pt(ie){const{left:ye,width:Se,top:Ye,height:We}=x.value.getBoundingClientRect(),Re=ie.getBoundingClientRect();let Oe=m.vertical===!0?Re.top-Ye:Re.left-ye;if(Oe<0){x.value[m.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Oe),yt();return}Oe+=m.vertical===!0?Re.height-We:Re.width-Se,Oe>0&&(x.value[m.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Oe),yt())}function yt(){const ie=x.value;if(ie===null)return;const ye=ie.getBoundingClientRect(),Se=m.vertical===!0?ie.scrollTop:Math.abs(ie.scrollLeft);X.value===!0?(D.value=Math.ceil(Se+ye.width)<ie.scrollWidth-1,C.value=Se>0):(D.value=Se>0,C.value=m.vertical===!0?Math.ceil(Se+ye.height)<ie.scrollHeight:Math.ceil(Se+ye.width)<ie.scrollWidth)}function be(ie){E!==null&&clearInterval(E),E=setInterval(()=>{He(ie)===!0&&me()},5)}function F(){be(ge.value===!0?Number.MAX_SAFE_INTEGER:0)}function L(){be(ge.value===!0?0:Number.MAX_SAFE_INTEGER)}function me(){E!==null&&(clearInterval(E),E=null)}function re(ie,ye){const Se=Array.prototype.filter.call(x.value.children,lt=>lt===ye||lt.matches&&lt.matches(".q-tab.q-focusable")===!0),Ye=Se.length;if(Ye===0)return;if(ie===36)return pt(Se[0]),Se[0].focus(),!0;if(ie===35)return pt(Se[Ye-1]),Se[Ye-1].focus(),!0;const We=ie===(m.vertical===!0?38:37),Re=ie===(m.vertical===!0?40:39),Oe=We===!0?-1:Re===!0?1:void 0;if(Oe!==void 0){const lt=X.value===!0?-1:1,ht=Se.indexOf(ye)+Oe*lt;return ht>=0&&ht<Ye&&(pt(Se[ht]),Se[ht].focus({preventScroll:!0})),!0}}const pe=G(()=>ge.value===!0?{get:ie=>Math.abs(ie.scrollLeft),set:(ie,ye)=>{ie.scrollLeft=-ye}}:m.vertical===!0?{get:ie=>ie.scrollTop,set:(ie,ye)=>{ie.scrollTop=ye}}:{get:ie=>ie.scrollLeft,set:(ie,ye)=>{ie.scrollLeft=ye}});function He(ie){const ye=x.value,{get:Se,set:Ye}=pe.value;let We=!1,Re=Se(ye);const Oe=ie<Re?-1:1;return Re+=Oe*5,Re<0?(We=!0,Re=0):(Oe===-1&&Re<=ie||Oe===1&&Re>=ie)&&(We=!0,Re=ie),Ye(ye,Re),yt(),We}function ot(ie,ye){for(const Se in ie)if(ie[Se]!==ye[Se])return!1;return!0}function kt(){let ie=null,ye={matchedLen:0,queryDiff:9999,hrefLen:0};const Se=R.filter(Oe=>{var lt;return((lt=Oe.routeData)==null?void 0:lt.hasRouterLink.value)===!0}),{hash:Ye,query:We}=o.$route,Re=Object.keys(We).length;for(const Oe of Se){const lt=Oe.routeData.exact.value===!0;if(Oe.routeData[lt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:ht,query:ma,matched:Io,href:Ro}=Oe.routeData.resolvedLink.value,ca=Object.keys(ma).length;if(lt===!0){if(ht!==Ye||ca!==Re||ot(We,ma)===!1)continue;ie=Oe.name.value;break}if(ht!==""&&ht!==Ye||ca!==0&&ot(ma,We)===!1)continue;const xt={matchedLen:Io.length,queryDiff:Re-ca,hrefLen:Ro.length-ht.length};if(xt.matchedLen>ye.matchedLen){ie=Oe.name.value,ye=xt;continue}else if(xt.matchedLen!==ye.matchedLen)continue;if(xt.queryDiff<ye.queryDiff)ie=Oe.name.value,ye=xt;else if(xt.queryDiff!==ye.queryDiff)continue;xt.hrefLen>ye.hrefLen&&(ie=Oe.name.value,ye=xt)}if(ie===null&&R.some(Oe=>Oe.routeData===void 0&&Oe.name.value===j.value)===!0){Gt=!1;return}ne({name:ie,setCurrent:!0})}function ua(ie){if(c(),P.value!==!0&&g.value!==null&&ie.target&&typeof ie.target.closest=="function"){const ye=ie.target.closest(".q-tab");ye&&g.value.contains(ye)===!0&&(P.value=!0,w.value===!0&&pt(ye))}}function To(){u(()=>{P.value=!1},30)}function Ft(){qa.avoidRouteWatcher===!1?v(kt):y()}function Va(){if(B===void 0){const ie=Me(()=>o.$route.fullPath,Ft);B=()=>{ie(),B=void 0}}}function Po(ie){R.push(ie),N.value++,Ce(),ie.routeData===void 0||o.$route===void 0?v(()=>{if(w.value===!0){const ye=j.value,Se=ye!=null&&ye!==""?R.find(Ye=>Ye.name.value===ye):null;Se&&pt(Se.rootRef.value)}}):(Va(),ie.routeData.hasRouterLink.value===!0&&Ft())}function Oo(ie){R.splice(R.indexOf(ie),1),N.value--,Ce(),B!==void 0&&ie.routeData!==void 0&&(R.every(ye=>ye.routeData===void 0)===!0&&B(),Ft())}const qa={currentModel:j,tabProps:z,hasFocus:P,hasActiveTab:q,registerTab:Po,unregisterTab:Oo,verifyRouteModel:Ft,updateModel:ne,onKbdNavigate:re,avoidRouteWatcher:!1};zo(Cl,qa);function Ca(){A!==null&&clearTimeout(A),me(),B==null||B()}let Ta,Gt;return oa(Ca),Mo(()=>{Ta=B!==void 0,Ca()}),No(()=>{Ta===!0&&(Va(),Gt=!0,Ft()),Ce()}),()=>ke("div",{ref:g,class:te.value,role:"tablist",onFocusin:ua,onFocusout:To},[ke(Bo,{onResize:Ie}),ke("div",{ref:x,class:T.value,onScroll:yt},Ct(n.default)),ke(S,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(D.value===!0?"":" q-tabs__arrow--faded"),name:m.leftIcon||s.iconSet.tabs[m.vertical===!0?"up":"left"],onMousedownPassive:F,onTouchstartPassive:F,onMouseupPassive:me,onMouseleavePassive:me,onTouchendPassive:me}),ke(S,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(C.value===!0?"":" q-tabs__arrow--faded"),name:m.rightIcon||s.iconSet.tabs[m.vertical===!0?"down":"right"],onMousedownPassive:L,onTouchstartPassive:L,onMouseupPassive:me,onMouseleavePassive:me,onTouchendPassive:me})])}});function fs(m){const n=[.06,6,50];return typeof m=="string"&&m.length&&m.split(":").forEach((d,o)=>{const s=parseFloat(d);s&&(n[o]=s)}),n}const gs=Fo({name:"touch-swipe",beforeMount(m,{value:n,arg:d,modifiers:o}){if(o.mouse!==!0&&Mt.has.touch!==!0)return;const s=o.mouseCapture===!0?"Capture":"",r={handler:n,sensitivity:fs(d),direction:Pa(o),noop:Lo,mouseStart(b){Ia(b,r)&&Ko(b)&&(Xt(r,"temp",[[document,"mousemove","move",`notPassive${s}`],[document,"mouseup","end","notPassiveCapture"]]),r.start(b,!0))},touchStart(b){if(Ia(b,r)){const p=b.target;Xt(r,"temp",[[p,"touchmove","move","notPassiveCapture"],[p,"touchcancel","end","notPassiveCapture"],[p,"touchend","end","notPassiveCapture"]]),r.start(b)}},start(b,p){Mt.is.firefox===!0&&ba(m,!0);const u=Oa(b);r.event={x:u.left,y:u.top,time:Date.now(),mouse:p===!0,dir:!1}},move(b){if(r.event===void 0)return;if(r.event.dir!==!1){Rt(b);return}const p=Date.now()-r.event.time;if(p===0)return;const u=Oa(b),c=u.left-r.event.x,v=Math.abs(c),y=u.top-r.event.y,g=Math.abs(y);if(r.event.mouse!==!0){if(v<r.sensitivity[1]&&g<r.sensitivity[1]){r.end(b);return}}else if(window.getSelection().toString()!==""){r.end(b);return}else if(v<r.sensitivity[2]&&g<r.sensitivity[2])return;const x=v/p,j=g/p;r.direction.vertical===!0&&v<g&&v<100&&j>r.sensitivity[0]&&(r.event.dir=y<0?"up":"down"),r.direction.horizontal===!0&&v>g&&g<100&&x>r.sensitivity[0]&&(r.event.dir=c<0?"left":"right"),r.direction.up===!0&&v<g&&y<0&&v<100&&j>r.sensitivity[0]&&(r.event.dir="up"),r.direction.down===!0&&v<g&&y>0&&v<100&&j>r.sensitivity[0]&&(r.event.dir="down"),r.direction.left===!0&&v>g&&c<0&&g<100&&x>r.sensitivity[0]&&(r.event.dir="left"),r.direction.right===!0&&v>g&&c>0&&g<100&&x>r.sensitivity[0]&&(r.event.dir="right"),r.event.dir!==!1?(Rt(b),r.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ho(),r.styleCleanup=w=>{r.styleCleanup=void 0,document.body.classList.remove("non-selectable");const D=()=>{document.body.classList.remove("no-pointer-events--children")};w===!0?setTimeout(D,50):D()}),r.handler({evt:b,touch:r.event.mouse!==!0,mouse:r.event.mouse,direction:r.event.dir,duration:p,distance:{x:v,y:g}})):r.end(b)},end(b){var p;r.event!==void 0&&(ga(r,"temp"),Mt.is.firefox===!0&&ba(m,!1),(p=r.styleCleanup)==null||p.call(r,!0),b!==void 0&&r.event.dir!==!1&&Rt(b),r.event=void 0)}};if(m.__qtouchswipe=r,o.mouse===!0){const b=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";Xt(r,"main",[[m,"mousedown","mouseStart",`passive${b}`]])}Mt.has.touch===!0&&Xt(r,"main",[[m,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[m,"touchmove","noop","notPassiveCapture"]])},updated(m,n){const d=m.__qtouchswipe;d!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&d.end(),d.handler=n.value),d.direction=Pa(n.modifiers))},beforeUnmount(m){var d;const n=m.__qtouchswipe;n!==void 0&&(ga(n,"main"),ga(n,"temp"),Mt.is.firefox===!0&&ba(m,!1),(d=n.styleCleanup)==null||d.call(n),delete m.__qtouchswipe)}}),bs={name:{required:!0},disable:Boolean},Ea={setup(m,{slots:n}){return()=>ke("div",{class:"q-panel scroll",role:"tabpanel"},Ct(n.default))}},vs={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},_s=["update:modelValue","beforeTransition","transition"];function ys(){const{props:m,emit:n,proxy:d}=Tt(),{getCache:o}=Wo(),{registerTimeout:s}=_a();let r,b;const p=V(null),u={value:null};function c(I){const X=m.vertical===!0?"up":"left";B((d.$q.lang.rtl===!0?-1:1)*(I.direction===X?1:-1))}const v=G(()=>[[gs,c,void 0,{horizontal:m.vertical!==!0,vertical:m.vertical,mouse:!0}]]),y=G(()=>m.transitionPrev||`slide-${m.vertical===!0?"down":"right"}`),g=G(()=>m.transitionNext||`slide-${m.vertical===!0?"up":"left"}`),x=G(()=>`--q-transition-duration: ${m.transitionDuration}ms`),j=G(()=>typeof m.modelValue=="string"||typeof m.modelValue=="number"?m.modelValue:String(m.modelValue)),w=G(()=>({include:m.keepAliveInclude,exclude:m.keepAliveExclude,max:m.keepAliveMax})),D=G(()=>m.keepAliveInclude!==void 0||m.keepAliveExclude!==void 0);Me(()=>m.modelValue,(I,X)=>{const ge=N(I)===!0?P(I):-1;b!==!0&&E(ge===-1?0:ge<P(X)?-1:1),u.value!==ge&&(u.value=ge,n("beforeTransition",I,X),s(()=>{n("transition",I,X)},m.transitionDuration))});function C(){B(1)}function $(){B(-1)}function R(I){n("update:modelValue",I)}function N(I){return I!=null&&I!==""}function P(I){return r.findIndex(X=>X.props.name===I&&X.props.disable!==""&&X.props.disable!==!0)}function A(){return r.filter(I=>I.props.disable!==""&&I.props.disable!==!0)}function E(I){const X=I!==0&&m.animated===!0&&u.value!==-1?"q-transition--"+(I===-1?y.value:g.value):null;p.value!==X&&(p.value=X)}function B(I,X=u.value){let ge=X+I;for(;ge!==-1&&ge<r.length;){const ne=r[ge];if(ne!==void 0&&ne.props.disable!==""&&ne.props.disable!==!0){E(I),b=!0,n("update:modelValue",ne.props.name),setTimeout(()=>{b=!1});return}ge+=I}m.infinite===!0&&r.length!==0&&X!==-1&&X!==r.length&&B(I,I===-1?r.length:-1)}function z(){const I=P(m.modelValue);return u.value!==I&&(u.value=I),!0}function q(){const I=N(m.modelValue)===!0&&z()&&r[u.value];return m.keepAlive===!0?[ke(Qo,w.value,[ke(D.value===!0?o(j.value,()=>({...Ea,name:j.value})):Ea,{key:j.value,style:x.value},()=>I)])]:[ke("div",{class:"q-panel scroll",style:x.value,key:j.value,role:"tabpanel"},[I])]}function W(){if(r.length!==0)return m.animated===!0?[ke(Pl,{name:p.value},q)]:q()}function te(I){return r=Yo(Ct(I.default,[])).filter(X=>X.props!==null&&X.props.slot===void 0&&N(X.props.name)===!0),r.length}function T(){return r}return Object.assign(d,{next:C,previous:$,goTo:R}),{panelIndex:u,panelDirectives:v,updatePanelsList:te,updatePanelIndex:z,getPanelContent:W,getEnabledPanels:A,getPanels:T,isValidPanelName:N,keepAliveProps:w,needsUniqueKeepAliveWrapper:D,goToPanelByOffset:B,goToPanel:R,nextPanel:C,previousPanel:$}}const rt=$t({name:"QTabPanel",props:bs,setup(m,{slots:n}){return()=>ke("div",{class:"q-tab-panel",role:"tabpanel"},Ct(n.default))}}),jt=$t({name:"QTabPanels",props:{...vs,...ka},emits:_s,setup(m,{slots:n}){const d=Tt(),o=wa(m,d.proxy.$q),{updatePanelsList:s,getPanelContent:r,panelDirectives:b}=ys(),p=G(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(s(n),Jo("div",{class:p.value},r(),"pan",m.swipeable,()=>b.value))}}),ks={class:"detail"},ws={key:0},hs={key:1},$s={key:0},xs={key:0},Ss={colspan:"100%"},Vs={class:"q-my-md"},qs={key:4},Cs={colspan:"100%"},Ts={key:5},Ps={colspan:"100%"},Ml={__name:"MainInfoTab",setup(m){const n=fe();return(d,o)=>(f(),h("table",ks,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.user.username)+" - "+i(a(n).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.opening_balance)),1)]),a(n).props.data.opening_notes?(f(),h("tr",ws,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.total_expense)),1)]),a(n).props.data.is_closed?k("",!0):(f(),h("tr",hs,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.opening_balance+(a(n).props.data.total_income-a(n).props.data.total_expense))),1)])),a(n).props.data.is_closed?(f(),h(Q,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.closing_balance)),1)]),a(n).props.data.closing_notes?(f(),h("tr",$s,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),d.$can("admin.cashier-session.close")?(f(),h(Q,{key:3},[a(n).props.data.is_closed?k("",!0):(f(),h("tr",xs,[t("td",Ss,[t("div",Vs,[e(U,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=s=>d.$inertia.get(d.route("admin.cashier-session.close",{id:a(n).props.data.id})))},{default:l(()=>[...o[26]||(o[26]=[_(" Tutup Sesi Kasir ",-1)])]),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(n).props.data.created_at?(f(),h("tr",qs,[t("td",Cs," Dibuat "+i(a(Vt)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name)+" ("+i(a(_e)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(f(),h("tr",Ts,[t("td",Ps," Diperbarui "+i(a(Vt)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name)+" ("+i(a(_e)(a(n).props.data.updated_at))+") ",1)])):k("",!0)])]))}},Os=Object.freeze(Object.defineProperty({__proto__:null,default:Ml},Symbol.toStringTag,{value:"Module"})),Is={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Rs={class:"text-bold"},Ds={key:0},Us={class:"text-bold"},As={key:1},js={key:0},Es={key:0},Ms={key:1},Nl={__name:"SalesOrderTab",props:{data:Object},setup(m){const n=m,d=V([]),o=V(!0),s=Pe({...Ue(),cashier_session_id:n.data.id,status:["closed","canceled"]}),r=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{p()});const p=(v=null)=>Ae({pagination:r,filter:s,props:v,rows:d,url:route("admin.sales-order.data"),loading:o}),u=$e(),c=G(()=>u.screen.gt.sm?b:b.filter(v=>v.name==="id"));return(v,y)=>(f(),O(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":y[0]||(y[0]=g=>r.value=g),filter:s.search,loading:o.value,columns:c.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:x,filter:j})=>[t("div",Is,[t("span",null,i(x)+" "+i(j?" with term "+j:""),1)])]),body:l(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:J(x=>a(Z).get(v.route("admin.sales-order.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:g},{default:l(()=>[t("div",Rs,[e(S,{class:"inline-icon",name:"tag"}),_(" "+i(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),_(" "+i(a(_e)(g.row.datetime)),1)]),a(u).screen.lt.md?(f(),h(Q,{key:0},[g.row.customer?(f(),h("div",Ds,[e(S,{class:"inline-icon",name:"person"}),_(" "+i(g.row.customer_code)+" "+i(g.row.customer.name),1)])):k("",!0),t("div",Us,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+i(a(K)(g.row.grand_total)),1)]),g.row.notes?(f(),h("div",As,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(ut,{color:g.row.status==="closed"?"green":"red"},{default:l(()=>[_(i(v.$CONSTANTS.SALES_ORDER_STATUSES[g.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(H,{key:"customer",props:g},{default:l(()=>[g.row.customer?(f(),h("div",js,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+i(g.row.customer_code)+" - "+i(g.row.customer_name),1)]),g.row.customer_phone?(f(),h("div",Es,[e(S,{name:"phone",class:"inline-icon"}),_(" "+i(g.row.customer_phone),1)])):k("",!0),g.row.customer_address?(f(),h("div",Ms,[e(S,{name:"home_pin",class:"inline-icon"}),_(" "+i(g.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"grand_total",props:g},{default:l(()=>[t("div",null,i(a(K)(g.row.grand_total)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ns=Object.freeze(Object.defineProperty({__proto__:null,default:Nl},Symbol.toStringTag,{value:"Module"})),Bs={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zs={class:"text-bold"},Fs={class:"text-bold"},Ls={key:0},Hs={class:"q-mt-sm"},Bl={__name:"FinanceTransactionTab",props:{data:Object},setup(m){const n=m;console.log(n.data);const d=V([]),o=V(!0),s=Pe({...Ue(),user_id:n.data.user_id,from_datetime:ea(n.data.opened_at),to_datetime:n.data.closed_at?ea(n.data.closed_at):null}),r=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{p()});const p=(v=null)=>Ae({pagination:r,filter:s,props:v,rows:d,url:route("admin.finance-transaction.data"),loading:o}),u=$e(),c=G(()=>u.screen.gt.sm?b:b.filter(v=>v.name==="id"));return(v,y)=>(f(),O(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":y[0]||(y[0]=g=>r.value=g),filter:s.search,loading:o.value,columns:c.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:x,filter:j})=>[t("div",Bs,[t("span",null,i(x)+" "+i(j?" with term "+j:""),1)])]),body:l(g=>[e(qe,{props:g},{default:l(()=>[e(H,{key:"id",props:g},{default:l(()=>[t("div",zs,[e(S,{class:"inline-icon",name:"tag"}),_(" "+i(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),_(" "+i(a(_e)(g.row.datetime)),1)]),a(u).screen.lt.md?(f(),h(Q,{key:0},[t("div",Fs,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+i(a(K)(g.row.amount)),1)]),g.row.notes?(f(),h("div",Ls,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",Hs,[e(ut,{color:g.row.amount>=0?"green":"red"},{default:l(()=>[_(i(v.$CONSTANTS.FINANCE_TRANSACTION_TYPES[g.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(H,{key:"amount",props:g},{default:l(()=>[t("span",{class:xe(g.row.amount<0?"text-red":"text-green")},i(a(K)(g.row.amount)),3)]),_:2},1032,["props"]),e(H,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ks=Object.freeze(Object.defineProperty({__proto__:null,default:Bl},Symbol.toStringTag,{value:"Module"})),Ys={class:"q-gutter-sm"},Ws={class:"col col-lg-6 q-pa-xs"},Qs={class:"row"},Ma="Rincian Sesi Kasir",Js={__name:"Detail",setup(m){const n=fe(),d=G(()=>n.props.data),o=V("main");return Me(()=>n.props.tab,s=>{s&&(o.value=s)},{immediate:!0}),(s,r)=>{const b=Y("i-head"),p=Y("authenticated-layout");return f(),h(Q,null,[e(b,{title:Ma}),e(p,null,{title:l(()=>[_(i(Ma))]),"left-button":l(()=>[t("div",Ys,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=u=>s.$inertia.get(s.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Ws,[t("div",Qs,[e(ce,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:l(()=>[e(At,{modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=u=>o.value=u),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(st,{name:"main",label:"Ringkasan"}),e(st,{name:"sales",label:"Transaksi Penjualan"}),e(st,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Je),e(jt,{modelValue:o.value,"onUpdate:modelValue":r[2]||(r[2]=u=>o.value=u),animated:"",class:"q-pa-none"},{default:l(()=>[e(rt,{name:"main"},{default:l(()=>[e(Ml,{data:d.value},null,8,["data"])]),_:1}),e(rt,{name:"sales",class:"q-pa-xs"},{default:l(()=>[e(Nl,{data:d.value},null,8,["data"])]),_:1}),e(rt,{name:"finance",class:"q-pa-xs"},{default:l(()=>[e(Bl,{data:d.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Gs=Object.freeze(Object.defineProperty({__proto__:null,default:Js},Symbol.toStringTag,{value:"Module"})),Xs={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Zs={class:"q-pa-xs"},er={class:"full-width row flex-center text-grey-8 q-gutter-sm"},tr={class:"flex justify-end"},Na="Sesi Kasir",ar={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=Pe({search:"",status:"all",...Ue()}),c=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];he(()=>{x()});const g=C=>at({message:`Hapus Sesi: ${C.cashier_terminal.name} - ${C.user.username}?`,url:route("admin.cashier-session.delete",C.id),fetchItemsCallback:x,loading:s}),x=(C=null)=>{Ae({pagination:c,filter:u,props:C,rows:o,url:route("admin.cashier-session.data"),loading:s,tableRef:r})},j=()=>x(),w=C=>Z.get(route("admin.cashier-session.detail",{id:C.id})),D=G(()=>n.screen.gt.sm?v:v.filter(C=>C.name==="id"||C.name==="action"));return(C,$)=>{const R=Y("i-head"),N=Y("authenticated-layout");return f(),h(Q,null,[e(R,{title:Na}),e(N,null,Le({title:l(()=>[_(i(Na))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=P=>d.value=!d.value)},null,8,["icon"]),C.$can("admin.cashier-session.open")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=P=>a(Z).get(C.route("admin.cashier-session.open")))})):k("",!0)]),default:l(()=>[t("div",Zs,[e(Te,{class:"full-height-table",style:Ee({height:a(p)}),ref_key:"tableRef",ref:r,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:c.value,"onUpdate:pagination":$[5]||($[5]=P=>c.value=P),filter:u.search,loading:s.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:P,message:A,filter:E})=>[t("div",er,[t("span",null,i(A)+" "+i(E?" with term "+E:""),1)])]),body:l(P=>[e(qe,{props:P,class:xe(["cursor-pointer",P.row.is_closed?"":"bg-yellow-3"]),onClick:A=>w(P.row)},{default:l(()=>[e(H,{key:"id",props:P,class:"wrap-column"},{default:l(()=>[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),_(" SessionID: "+i(P.row.id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"point_of_sale"}),_(" "+i(P.row.cashier_terminal.name),1)]),t("div",null,[e(S,{class:"inline-icon",name:"person"}),_(" "+i(P.row.user.username)+" - "+i(P.row.user.name),1)])]),_:2},1032,["props"]),e(H,{key:"opening_info",props:P},{default:l(()=>[t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+i(P.row.opened_at?a(_e)(P.row.opened_at):"-"),1)]),t("div",null,[e(S,{class:"inline-icon",name:"money"}),_(" "+i(a(it)(P.row.opening_balance)),1)]),P.row.opening_notes?(f(),O(we,{key:0,text:P.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"closing_info",props:P},{default:l(()=>[t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+i(P.row.closed_at?a(_e)(P.row.closed_at):"-"),1)]),t("div",null,[e(S,{class:"inline-icon",name:"money"}),_(" "+i(a(it)(P.row.closing_balance)),1)]),P.row.closing_notes?(f(),O(we,{key:0,text:P.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"action",props:P},{default:l(()=>[t("div",tr,[C.$can("admin.cashier-session.close")||C.$can("admin.cashier-session.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[4]||($[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.cashier-session.close")?ee((f(),O(le,{key:0,disable:P.row.is_closed,clickable:"",onClick:J(A=>a(Z).get(C.route("admin.cashier-session.close",P.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"logout"})]),_:1}),e(M,null,{default:l(()=>[...$[6]||($[6]=[_("Tutup Sesi Kasir",-1)])]),_:1})]),_:1},8,["disable","onClick"])),[[se],[ue]]):k("",!0),C.$can("admin.cashier-session.delete")?ee((f(),O(le,{key:1,onClick:J(A=>g(P.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...$[7]||($[7]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Xs,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[$[2]||($[2]=P=>u.status=P),j],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":$[3]||($[3]=P=>u.search=P),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},lr=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"})),or={class:"q-gutter-sm"},nr={class:"col col-md-6 q-pa-xs"},Ba="Buka Sesi Kasir",sr={__name:"Open",setup(m){const n=fe(),d=ze({cashier_terminal_id:n.props.data.cashier_terminal_id,opening_balance:parseFloat(n.props.data.opening_balance),opening_notes:n.props.data.opening_notes}),o=[...n.props.cashier_terminals.map(r=>({value:r.id,label:r.name,balance:parseFloat(r.finance_account.balance)}))],s=()=>Xe({form:d,url:route("admin.cashier-session.open")});return Me(()=>d.cashier_terminal_id,r=>{if(r){const b=o.find(p=>p.value===r);b&&(d.opening_balance=b.balance)}else d.opening_balance=0}),(r,b)=>{const p=Y("i-head"),u=Y("authenticated-layout");return f(),h(Q,null,[e(p,{title:Ba}),e(u,null,{title:l(()=>[_(i(Ba))]),"left-button":l(()=>[t("div",or,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=c=>r.$inertia.get(r.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",nr,[e(Fe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=c=>a(d).id=c)},null,512),[[dt,a(d).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(de,{class:"custom-select",modelValue:a(d).cashier_terminal_id,"onUpdate:modelValue":b[2]||(b[2]=c=>a(d).cashier_terminal_id=c),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:a(d).errors.cashier_terminal_id,error:!!a(d).errors.cashier_terminal_id,disable:a(d).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(De,{modelValue:a(d).opening_balance,"onUpdate:modelValue":b[3]||(b[3]=c=>a(d).opening_balance=c),label:"Saldo Buka Sesi",lazyRules:"",disable:a(d).processing,error:!!a(d).errors.opening_balance,errorMessage:a(d).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),b[6]||(b[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(oe,{modelValue:a(d).opening_notes,"onUpdate:modelValue":b[4]||(b[4]=c=>a(d).opening_notes=c),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(d).processing,error:!!a(d).errors.opening_notes,"error-message":a(d).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:a(d).processing},null,8,["disable"]),e(U,{label:"Batal",icon:"cancel",disable:a(d).processing,onClick:b[5]||(b[5]=c=>a(Z).get(r.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},rr=Object.freeze(Object.defineProperty({__proto__:null,default:sr},Symbol.toStringTag,{value:"Module"})),ir={class:"detail"},dr={colspan:"3"},ur={class:"text-bold text-grey-8"},mr={key:0},cr={colspan:"100%"},pr={key:1},fr={colspan:"100%"},zl={__name:"MainInfoTab",setup(m){const n=fe();return(d,o)=>(f(),h("table",ir,[t("tbody",null,[t("tr",null,[t("td",dr,[t("div",ur,[o[1]||(o[1]=_(" Info Terminal Kasir ",-1)),e(U,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=s=>d.$inertia.get(d.route("admin.cashier-terminal.edit",{id:a(n).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(a(it)(a(n).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(n).props.data.created_at?(f(),h("tr",mr,[t("td",cr," Dibuat "+i(a(Vt)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name)+" ("+i(a(_e)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(f(),h("tr",pr,[t("td",fr," Diperbarui "+i(a(Vt)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name)+" ("+i(a(_e)(a(n).props.data.updated_at))+") ",1)])):k("",!0)])]))}},gr=Object.freeze(Object.defineProperty({__proto__:null,default:zl},Symbol.toStringTag,{value:"Module"})),br={class:"full-width row flex-center text-grey-8 q-gutter-sm"},vr={class:"text-bold"},Fl={__name:"SessionHistoryTab",setup(m){const n=fe(),d=V([]),o=V(!0),s=Pe({customer_id:n.props.data.id,...Ue()}),r=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{p()});const p=(v=null)=>Ae({pagination:r,filter:s,props:v,rows:d,url:route("admin.customer-wallet-transaction.data"),loading:o}),u=$e(),c=G(()=>u.screen.gt.sm?b:b.filter(v=>v.name==="id"));return(v,y)=>(f(),O(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":y[0]||(y[0]=g=>r.value=g),filter:s.search,loading:o.value,columns:c.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:x,filter:j})=>[t("div",br,[t("span",null,i(x)+" "+i(j?" with term "+j:""),1)])]),body:l(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:J(x=>a(Z).get(v.route("admin.customer-wallet-transaction.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:g},{default:l(()=>[t("div",vr,[e(S,{class:"inline-icon",name:"tag"}),_(" "+i(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+i(a(_e)(g.row.datetime)),1)]),a(u).screen.lt.md?(f(),h(Q,{key:0},[t("div",{class:xe(["text-bold",g.row.amount<0?"text-red":"text-green"])},[e(S,{name:"money",class:"inline-icon"}),_(" "+i(a(Ol)(g.row.amount)),1)],2),t("div",null,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(ut,{size:"xs",color:g.row.amount>0?"green":"red"},{default:l(()=>[e(S,{name:"category"}),_(" "+i(g.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(H,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"amount",props:g},{default:l(()=>[t("div",{class:xe(g.row.amount<0?"text-red-10":g.row.amount>0?"text-green-10":"")},i(a(na)(g.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},_r=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"})),yr={class:"q-gutter-sm"},kr={class:"col col-lg-6 q-pa-xs"},wr={class:"row"},za="Rincian Terminal Kasir",hr={__name:"Detail",setup(m){const n=V("main");return(d,o)=>{const s=Y("i-head"),r=Y("authenticated-layout");return f(),h(Q,null,[e(s,{title:za}),e(r,null,{title:l(()=>[_(i(za))]),"left-button":l(()=>[t("div",yr,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>d.$inertia.get(d.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",kr,[t("div",wr,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(At,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=b=>n.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(st,{name:"main",label:"Info Utama"}),e(st,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(jt,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=b=>n.value=b),animated:""},{default:l(()=>[e(rt,{name:"main"},{default:l(()=>[e(zl)]),_:1}),e(rt,{name:"session-history",class:"q-pa-xs"},{default:l(()=>[e(Fl)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},$r=Object.freeze(Object.defineProperty({__proto__:null,default:hr},Symbol.toStringTag,{value:"Module"})),xr={class:"q-gutter-sm"},Sr={class:"col col-md-6 q-pa-xs"},Vr={key:0,class:"q-my-xs text-grey-8"},qr={__name:"Editor",setup(m){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Pelanggan",o=ze({id:n.props.data.id,name:n.props.data.name,finance_account_id:n.props.data.finance_account_id??"new",location:n.props.data.location,active:!!n.props.data.active,notes:n.props.data.notes}),s=[{value:"new",label:"Buat Baru (Otomatis)"},...n.props.finance_accounts.map(b=>({value:b.id,label:b.name}))],r=()=>Xe({form:o,url:route("admin.cashier-terminal.save")});return(b,p)=>{const u=Y("i-head"),c=Y("authenticated-layout");return f(),h(Q,null,[e(u,{title:d}),e(c,null,{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",xr,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=v=>b.$inertia.get(b.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Sr,[e(Fe,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=v=>a(o).id=v)},null,512),[[dt,a(o).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(oe,{modelValue:a(o).name,"onUpdate:modelValue":p[2]||(p[2]=v=>a(o).name=v),modelModifiers:{trim:!0},label:"Nama",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[v=>v&&v.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{class:"custom-select",modelValue:a(o).finance_account_id,"onUpdate:modelValue":p[3]||(p[3]=v=>a(o).finance_account_id=v),label:"Akun Kas",options:s,"map-options":"","emit-value":"",errorMessage:a(o).errors.finance_account_id,error:!!a(o).errors.finance_account_id,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),a(o).finance_account_id==="new"?(f(),h("div",Vr,[p[8]||(p[8]=_(" Akun keuangan akan dibuat ",-1)),a(o).name?(f(),h(Q,{key:0},[_(" dengan nama Kas "+i(a(o).name),1)],64)):k("",!0)])):k("",!0),e(oe,{modelValue:a(o).location,"onUpdate:modelValue":p[4]||(p[4]=v=>a(o).location=v),modelModifiers:{trim:!0},label:"Lokasi",error:!!a(o).errors.location,disable:a(o).processing,"error-message":a(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).notes,"onUpdate:modelValue":p[5]||(p[5]=v=>a(o).notes=v),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(da,{modelValue:a(o).active,"onUpdate:modelValue":p[6]||(p[6]=v=>a(o).active=v),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(U,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:p[7]||(p[7]=v=>a(Z).get(b.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Cr=Object.freeze(Object.defineProperty({__proto__:null,default:qr},Symbol.toStringTag,{value:"Module"})),Tr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Pr={class:"q-pa-xs"},Or={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ir={class:"flex justify-end"},Fa="Terminal Kasir",Rr={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=Pe({search:"",status:"active",...Ue()}),c=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:n.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{x()});const g=C=>at({message:`Hapus Terminal Kasir ${C.name}?`,url:route("admin.cashier-terminal.delete",C.id),fetchItemsCallback:x,loading:s}),x=(C=null)=>{Ae({pagination:c,filter:u,props:C,rows:o,url:route("admin.cashier-terminal.data"),loading:s,tableRef:r})},j=()=>x(),w=C=>Z.get(route("admin.cashier-terminal.detail",{id:C.id})),D=G(()=>n.screen.gt.sm?v:v.filter(C=>C.name==="name"||C.name==="finance_account_id"||C.name==="action"));return(C,$)=>{const R=Y("i-head"),N=Y("authenticated-layout");return f(),h(Q,null,[e(R,{title:Fa}),e(N,null,Le({title:l(()=>[_(i(Fa))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=P=>d.value=!d.value)},null,8,["icon"]),C.$can("admin.cashier-terminal.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=P=>a(Z).get(C.route("admin.cashier-terminal.add")))})):k("",!0)]),default:l(()=>[t("div",Pr,[e(Te,{class:"full-height-table",style:Ee({height:a(p)}),ref_key:"tableRef",ref:r,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:c.value,"onUpdate:pagination":$[5]||($[5]=P=>c.value=P),filter:u.search,loading:s.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:P,message:A,filter:E})=>[t("div",Or,[t("span",null,i(A)+" "+i(E?" with term "+E:""),1)])]),body:l(P=>[e(qe,{props:P,class:xe([P.row.active?"":"bg-red-1","cursor-pointer"]),onClick:A=>w(P.row)},{default:l(()=>[e(H,{key:"name",props:P,class:"wrap-column"},{default:l(()=>[t("div",null,[e(S,{name:"wallet"}),_(" "+i(P.row.name),1)]),t("div",null,[e(S,{name:"home_pin"}),_(" "+i(P.row.location),1)]),a(n).screen.lt.md?(f(),O(we,{key:0,text:P.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"finance_account_id",props:P},{default:l(()=>[t("div",null,[e(S,{name:"wallet"}),_(" "+i(P.row.finance_account.name),1)]),t("div",null,[e(S,{name:"money"}),_(" "+i(a(it)(P.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(H,{key:"notes",props:P},{default:l(()=>[e(we,{text:P.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:P},{default:l(()=>[t("div",Ir,[C.$can("admin.cashier-terminal.edit")||C.$can("admin.cashier-terminal.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[4]||($[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.cashier-terminal.edit")?ee((f(),O(le,{key:0,clickable:"",onClick:J(A=>a(Z).get(C.route("admin.cashier-terminal.edit",P.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...$[6]||($[6]=[_("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),C.$can("admin.cashier-terminal.delete")?ee((f(),O(le,{key:1,onClick:J(A=>g(P.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...$[7]||($[7]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Tr,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[$[2]||($[2]=P=>u.status=P),j],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":$[3]||($[3]=P=>u.search=P),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Dr=Object.freeze(Object.defineProperty({__proto__:null,default:Rr},Symbol.toStringTag,{value:"Module"})),Ur={class:"q-gutter-sm"},Ar={class:"col col-md-6 q-pa-xs"},jr={class:"row"},Er={class:"detail"},Mr={key:0},Nr={key:1},Br={key:0},zr={key:1},Fr={colspan:"3",class:"bg-white"},La="Rincian Konfirmasi Top Up",Lr={__name:"Detail",setup(m){const n=fe();return(d,o)=>{const s=Y("i-head"),r=Y("i-link"),b=Y("my-link"),p=Y("authenticated-layout");return f(),h(Q,null,[e(s,{title:La}),e(p,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Ur,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=u=>d.$inertia.get(d.route("admin.customer-wallet-transaction-confirmation.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},i(La))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Ar,[t("div",jr,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[23]||(o[23]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",Er,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Pelanggan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+i(a(n).props.data.customer.code),1)]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+i(a(n).props.data.customer.name),1)]),a(n).props.data.customer.phone?(f(),h("div",Mr,[e(S,{name:"phone",class:"inline-icon"}),_(" "+i(a(n).props.data.customer.phone),1)])):k("",!0),a(n).props.data.customer.address?(f(),h("div",Nr,[e(S,{name:"home_pin",class:"inline-icon"}),_(" "+i(a(n).props.data.customer.address),1)])):k("",!0),t("div",null,[e(r,{href:d.route("admin.customer.detail",{id:a(n).props.data.customer_id})},{default:l(()=>[...o[5]||(o[5]=[_("Lihat Rincian Pelanggan",-1)])]),_:1},8,["href"])])])]),t("tr",null,[o[10]||(o[10]=t("td",null,"Akun Tujuan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,[e(b,{href:d.route("admin.finance-account.detail",{id:a(n).props.data.finance_account.id})},{default:l(()=>[_(i(a(n).props.data.finance_account.name),1)]),_:1},8,["href"]),o[9]||(o[9]=t("br",null,null,-1)),a(n).props.data.finance_account.type==="bank"?(f(),h(Q,{key:0},[_(" Rek "+i(a(n).props.data.finance_account.bank)+" an "+i(a(n).props.data.finance_account.holder)+" ",1),o[8]||(o[8]=t("br",null,null,-1)),_(" "+i(a(n).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[o[12]||(o[12]=t("td",null,"Jumlah",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,"Rp. "+i(a(K)(a(n).props.data.amount)),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Status",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[a(n).props.data.status]),1)]),t("tr",null,[o[16]||(o[16]=t("td",null,"Catatan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),a(n).props.data.creator?(f(),h("tr",Br,[o[18]||(o[18]=t("td",null,"Dibuat",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(f(),h("tr",zr,[o[20]||(o[20]=t("td",null,"Diperbarui",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(f(),h(Q,{key:2},[o[22]||(o[22]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Fr,[e(Yt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Ee([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Hr=Object.freeze(Object.defineProperty({__proto__:null,default:Lr},Symbol.toStringTag,{value:"Module"})),Kr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Yr={class:"q-pa-xs"},Wr={class:"flex justify-end no-wrap"},Ha="Konfirmasi Top Up Wallet",Qr={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=V(null),c=V(!1),v=Wt(),y=Qt(),g=[{label:"Semua Tahun",value:"all"},...Dt(v-2,v).reverse()],x=[{value:"all",label:"Semua Bulan"},...Ut()],j=[{value:"all",label:"Semua Status"},...et(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],w=Pe({search:"",year:v,month:y,status:"all",...Ue()}),D=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!1}),C=[{name:"datetime",label:"Tanggal",field:"datetime",align:"left",sortable:!0},{name:"finance_account_id",label:"Bank Tujuan",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",label:"Aksi",field:"action",align:"center"}];he(()=>{$()});const $=(z=null)=>{Ae({pagination:D,filter:w,props:z,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:s,tableRef:r})},R=()=>{$()},N=G(()=>n.screen.gt.sm?C:C.filter(z=>["datetime","action"].includes(z.name)));Me(()=>w.year,z=>{z===null&&(w.month=null)});const P=z=>Da({message:`Setujui konfirmasi transaksi #${z.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",z.id),fetchItemsCallback:$,loading:s,data:{id:z.id,action:"accept"}}),A=z=>Da({message:`Tolak konfirmasi transaksi #${z.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",z.id),fetchItemsCallback:$,loading:s,data:{id:z.id,action:"reject"}}),E=z=>at({message:`Hapus konfirmasi transaksi ${z.formatted_id}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",z.id),fetchItemsCallback:$,loading:s}),B=z=>{u.value=z,c.value=!0};return(z,q)=>{const W=Y("i-head"),te=Y("authenticated-layout");return f(),h(Q,null,[e(W,{title:Ha}),e(te,null,Le({title:l(()=>[_(i(Ha))]),"right-button":l(()=>[e(U,{class:"q-ml-sm",icon:d.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:q[0]||(q[0]=T=>d.value=!d.value)},null,8,["icon"])]),default:l(()=>[t("div",Yr,[e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",style:Ee({height:a(p)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":q[6]||(q[6]=T=>D.value=T),filter:w.search,loading:s.value,columns:N.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),body:l(T=>[e(qe,{props:T,class:"cursor-pointer",onClick:J(I=>a(Z).get(z.route("admin.customer-wallet-transaction-confirmation.detail",{id:T.row.id})),["stop"])},{default:l(()=>[e(H,{key:"datetime",props:T,class:"wrap-column"},{default:l(()=>[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),_(" "+i(T.row.formatted_id),1)]),t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+i(a(_e)(T.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(f(),h(Q,{key:0},[e(we,{icon:"account_balance",text:T.row.finance_account.name},null,8,["text"]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+i(T.row.customer.code)+" - "+i(T.row.customer.name),1)]),t("div",null,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+i(a(K)(T.row.amount)),1)]),T.row.notes?(f(),O(we,{key:0,icon:"notes",text:T.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Ra,{status:T.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(H,{key:"finance_account_id",props:T},{default:l(()=>[_(i(T.row.finance_account.name),1),q[8]||(q[8]=t("br",null,null,-1)),_(" "+i(T.row.finance_account.bank)+" "+i(T.row.finance_account.number)+" an. "+i(T.row.finance_account.holder),1)]),_:2},1032,["props"]),e(H,{key:"amount",props:T,style:{"text-align":"right"}},{default:l(()=>[_(i(a(K)(T.row.amount)),1)]),_:2},1032,["props"]),e(H,{key:"status",props:T,class:"text-center"},{default:l(()=>[e(Ra,{status:T.row.status},null,8,["status"])]),_:2},1032,["props"]),e(H,{key:"notes",props:T,class:"word-wrap"},{default:l(()=>[e(we,{icon:"notes",text:T.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:T,class:"text-center"},{default:l(()=>[t("div",Wr,[e(U,{icon:"image",color:"primary",dense:"",flat:"",disable:T.row.image_path===null||T.row.image_path==="",onClick:J(I=>B(T.row.image_path),["stop"])},{default:l(()=>[T.row.image_path!=null?(f(),O(sa,{key:0},{default:l(()=>[...q[9]||(q[9]=[_(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),z.$can("admin.customer-wallet-transaction-confirmation:accept")||z.$can("admin.customer-wallet-transaction-confirmation:deny")||z.$can("admin.customer-wallet-transaction-confirmation.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:q[5]||(q[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[z.$can("admin.customer-wallet-transaction-confirmation:accept")?ee((f(),O(le,{key:0,onClick:J(I=>P(T.row),["stop"]),clickable:"",disable:T.row.status!=="pending"},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"check"})]),_:1}),e(M,null,{default:l(()=>[...q[10]||(q[10]=[_("Setujui",-1)])]),_:1})]),_:1},8,["onClick","disable"])),[[se],[ue]]):k("",!0),z.$can("admin.customer-wallet-transaction-confirmation:deny")?ee((f(),O(le,{key:1,onClick:J(I=>A(T.row),["stop"]),clickable:"",disable:T.row.status!=="pending"},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"cancel"})]),_:1}),e(M,null,{default:l(()=>[...q[11]||(q[11]=[_("Tolak",-1)])]),_:1})]),_:1},8,["onClick","disable"])),[[se],[ue]]):k("",!0),e(Je),z.$can("admin.customer-wallet-transaction-confirmation.delete")?ee((f(),O(le,{key:2,onClick:J(I=>E(T.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...q[12]||(q[12]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(ra,{modelValue:c.value,"onUpdate:modelValue":q[7]||(q[7]=T=>c.value=T),imageUrl:`/${u.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Kr,[e(de,{modelValue:w.year,"onUpdate:modelValue":[q[1]||(q[1]=T=>w.year=T),R],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!=="all"?(f(),O(de,{key:0,modelValue:w.month,"onUpdate:modelValue":[q[2]||(q[2]=T=>w.month=T),R],options:x,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:w.status,"onUpdate:modelValue":[q[3]||(q[3]=T=>w.status=T),R],options:j,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":q[4]||(q[4]=T=>w.search=T),placeholder:"Cari...",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Jr=Object.freeze(Object.defineProperty({__proto__:null,default:Qr},Symbol.toStringTag,{value:"Module"}));function Ll(m,n=!1){const d=m.map(b=>({value:b.id,label:b.code+" - "+b.name})),o=n?[{value:"all",label:"Semua"},...d]:d,s=V([...o]);return{filteredCustomers:s,filterCustomersFn:(b,p)=>{p(()=>{s.value=o.filter(u=>u.label.toLowerCase().includes(b.toLowerCase()))})},customers:o}}const Gr={class:"col col-md-6 q-pa-xs"},Ka="Penyesuaian Saldo Dompet Pelanggan",Xr={__name:"Adjustment",setup(m){const n=fe(),{filteredCustomers:d,filterCustomersFn:o}=Ll(n.props.customers,!1),s=ze({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),r=()=>s.amount=s.new_wallet_balance-s.old_wallet_balance;Me(()=>s.customer_id,async u=>{if(!u){s.old_wallet_balance=0,s.new_wallet_balance=0,r();return}s.processing=!0;try{const c=await axios.get(route("admin.customer.wallet_balance",{id:u}));s.new_wallet_balance=s.old_wallet_balance=c.data.wallet_balance}catch(c){console.error("Gagal mengambil saldo:",c),s.old_wallet_balance=0,s.new_wallet_balance=0}s.processing=!1,r()});const b=G(()=>s.new_wallet_balance-s.old_wallet_balance),p=()=>Xe({form:s,url:route("admin.customer-wallet-transaction.adjustment")});return(u,c)=>{const v=Y("i-head"),y=Y("authenticated-layout");return f(),h(Q,null,[e(v,{title:Ka}),e(y,null,{title:l(()=>[_(i(Ka))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Gr,[e(Fe,{class:"row",onSubmit:J(p,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(de,{class:"custom-select",modelValue:a(s).customer_id,"onUpdate:modelValue":c[0]||(c[0]=g=>a(s).customer_id=g),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(d),"map-options":"","emit-value":"",errorMessage:a(s).errors.customer_id,onFilter:a(o),error:!!a(s).errors.customer_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(le,null,{default:l(()=>[e(M,null,{default:l(()=>[...c[6]||(c[6]=[_("Pelanggan tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(De,{modelValue:a(s).old_wallet_balance,"onUpdate:modelValue":c[1]||(c[1]=g=>a(s).old_wallet_balance=g),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.old_wallet_balance,errorMessage:a(s).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(De,{modelValue:a(s).new_wallet_balance,"onUpdate:modelValue":c[2]||(c[2]=g=>a(s).new_wallet_balance=g),label:"Saldo Seharusnya",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.new_wallet_balance,errorMessage:a(s).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(De,{modelValue:b.value,"onUpdate:modelValue":c[3]||(c[3]=g=>b.value=g),label:"Selisih",readonly:"",lazyRules:"",disable:a(s).processing},null,8,["modelValue","disable"]),e(oe,{modelValue:a(s).notes,"onUpdate:modelValue":c[4]||(c[4]=g=>a(s).notes=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.notes,"error-message":a(s).errors.notes,rules:[g=>g&&g.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:c[5]||(c[5]=g=>a(Z).get(u.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Zr=Object.freeze(Object.defineProperty({__proto__:null,default:Xr},Symbol.toStringTag,{value:"Module"})),ei={class:"q-gutter-sm"},ti={class:"col col-md-6 q-pa-xs"},ai={class:"row"},li={class:"detail"},oi={key:0},ni={key:1},si={key:0},ri={key:1},ii={colspan:"3",class:"bg-white"},Ya="Rincian Transaksi",di={__name:"Detail",setup(m){const n=fe();return(d,o)=>{const s=Y("i-head"),r=Y("i-link"),b=Y("authenticated-layout");return f(),h(Q,null,[e(s,{title:Ya}),e(b,null,{"left-button":l(()=>[t("div",ei,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=p=>d.$goBack())})])]),title:l(()=>[_(i(Ya))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ti,[t("div",ai,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",li,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Pelanggan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+i(a(n).props.data.customer.code),1)]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+i(a(n).props.data.customer.name),1)]),a(n).props.data.customer.phone?(f(),h("div",oi,[e(S,{name:"phone",class:"inline-icon"}),_(" "+i(a(n).props.data.customer.phone),1)])):k("",!0),a(n).props.data.customer.address?(f(),h("div",ni,[e(S,{name:"home_pin",class:"inline-icon"}),_(" "+i(a(n).props.data.customer.address),1)])):k("",!0),t("div",null,[e(r,{href:d.route("admin.customer.detail",{id:a(n).props.data.customer_id})},{default:l(()=>[...o[5]||(o[5]=[_("Lihat Rincian Pelanggan",-1)])]),_:1},8,["href"])])])]),t("tr",null,[o[8]||(o[8]=t("td",null,"Jenis Transaksi",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[a(n).props.data.type]),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",{class:xe(a(n).props.data.amount>0?"text-positive":"text-negative")},i(a(Nt)(a(n).props.data.amount))+"Rp. "+i(a(K)(Math.abs(a(n).props.data.amount))),3)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),a(n).props.data.creator?(f(),h("tr",si,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(f(),h("tr",ri,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(f(),h(Q,{key:2},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",ii,[e(Yt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Ee([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},ui=Object.freeze(Object.defineProperty({__proto__:null,default:di},Symbol.toStringTag,{value:"Module"})),mi={class:"q-gutter-sm"},ci={class:"col col-md-6 q-pa-xs"},pi={__name:"Editor",setup(m){var c;const n=fe(),d=(n.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:s}=Ll(n.props.customers,!1),r=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],b=n.props.finance_accounts.map(v=>({label:v.name,value:v.id})),p=ze({id:n.props.data.id,customer_id:n.props.data.customer_id,finance_account_id:n.props.data.finance_account_id,type:n.props.data.type,datetime:new Date(n.props.data.datetime),notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((c=n.props.data)==null?void 0:c.image_path)??"",image:null}),u=()=>{Jt(p,{datetime:"YYYY-MM-DD HH:mm:ss"}),Xe({form:p,url:route("admin.customer-wallet-transaction.save")})};return(v,y)=>{const g=Y("i-head"),x=Y("authenticated-layout");return f(),h(Q,null,[e(g,{title:d}),e(x,null,{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",mi,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=j=>v.$inertia.get(v.route("admin.customer-wallet-transaction.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ci,[e(Fe,{class:"row",onSubmit:J(u,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[1]||(y[1]=j=>a(p).id=j)},null,512),[[dt,a(p).id]]),e(Bt,{autofocus:"",modelValue:a(p).datetime,"onUpdate:modelValue":y[2]||(y[2]=j=>a(p).datetime=j),label:"Tanggal",error:!!a(p).errors.datetime,disable:a(p).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(de,{class:"custom-select",modelValue:a(p).customer_id,"onUpdate:modelValue":y[3]||(y[3]=j=>a(p).customer_id=j),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"","emit-value":"",errorMessage:a(p).errors.customer_id,onFilter:a(s),error:!!a(p).errors.customer_id,disable:a(p).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(le,null,{default:l(()=>[e(M,null,{default:l(()=>[...y[10]||(y[10]=[_("Pelanggan tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(de,{modelValue:a(p).type,"onUpdate:modelValue":y[4]||(y[4]=j=>a(p).type=j),label:"Jenis",options:r,"map-options":"","emit-value":"",error:!!a(p).errors.type,disable:a(p).processing,errorMessage:a(p).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{modelValue:a(p).finance_account_id,"onUpdate:modelValue":y[5]||(y[5]=j=>a(p).finance_account_id=j),label:a(p).type=="deposit"?"Kas Tujuan":"Kas Asal",options:a(b),"map-options":"","emit-value":"",error:!!a(p).errors.finance_account_id,disable:a(p).processing,errorMessage:a(p).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(De,{modelValue:a(p).amount,"onUpdate:modelValue":y[6]||(y[6]=j=>a(p).amount=j),label:"Jumlah",lazyRules:"",disable:a(p).processing,error:!!a(p).errors.amount,errorMessage:a(p).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(p).notes,"onUpdate:modelValue":y[7]||(y[7]=j=>a(p).notes=j),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(p).processing,error:!!a(p).errors.notes,"error-message":a(p).errors.notes,rules:[j=>j&&j.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ha,{modelValue:a(p).image,"onUpdate:modelValue":y[8]||(y[8]=j=>a(p).image=j),"initial-image-path":a(p).image_path,disabled:a(p).processing,error:!!a(p).errors.image||!!a(p).errors.image_path,"error-message":a(p).errors.image||a(p).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(p).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(p).processing,onClick:y[9]||(y[9]=j=>a(Z).get(v.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},fi=Object.freeze(Object.defineProperty({__proto__:null,default:pi},Symbol.toStringTag,{value:"Module"})),gi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},bi={class:"q-pa-xs"},vi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},_i={key:0},yi={class:"flex justify-end no-wrap"},Wa="Transaksi Dompet Pelanggan",ki={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=new Date().getFullYear(),c=new Date().getMonth()+1,v=[{label:"Semua Tahun",value:"all"},{label:`${u}`,value:u},...Dt(u-2,u-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Ut()],g=Pe({search:"",year:u,month:c,...Ue()}),x=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),j=[{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"action",align:"right"}];he(()=>{D()});const w=A=>at({message:`Hapus transaksi #${A.formatted_id}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",A.id),fetchItemsCallback:D,loading:s}),D=(A=null)=>{Ae({pagination:x,filter:g,props:A,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:s,tableRef:r})},C=()=>{D()},$=G(()=>n.screen.gt.sm?j:j.filter(A=>A.name==="datetime"||A.name==="action"));Me(()=>g.year,A=>{A===null&&(g.month=null)});const R=V(null),N=V(!1),P=A=>{R.value=A,N.value=!0};return(A,E)=>{const B=Y("i-head"),z=Y("authenticated-layout");return f(),h(Q,null,[e(B,{title:Wa}),e(z,null,Le({title:l(()=>[_(i(Wa))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:E[0]||(E[0]=q=>d.value=!d.value)},null,8,["icon"]),A.$can("admin.customer-wallet-transaction.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:E[1]||(E[1]=q=>a(Z).get(A.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",bi,[e(Te,{ref_key:"tableRef",ref:r,style:Ee({height:a(p)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":E[6]||(E[6]=q=>x.value=q),filter:g.search,loading:s.value,columns:$.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:D,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:q,message:W,filter:te})=>[t("div",vi,[t("span",null,i(W)+" "+i(te?" with term "+te:""),1)])]),body:l(q=>[e(qe,{props:q,class:"cursor-pointer",onClick:J(W=>a(Z).get(A.route("admin.customer-wallet-transaction.detail",{id:q.row.id})),["stop"])},{default:l(()=>[e(H,{key:"datetime",props:q,class:"wrap-column"},{default:l(()=>[t("div",null,[e(S,{name:"tag",class:"inline-icon"}),_(" "+i(q.row.formatted_id),1)]),t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+i(a(_e)(q.row.datetime)),1)]),q.row.finance_account?(f(),h("div",_i,[e(S,{name:"wallet",class:"inline-icon"}),_(" "+i(q.row.finance_account?q.row.finance_account.name:"-"),1)])):k("",!0),a(n).screen.gt.sm?k("",!0):(f(),h(Q,{key:1},[e(we,{icon:"person",text:q.row.customer.code+" - "+q.row.customer.name},null,8,["text"]),t("div",{class:xe([q.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(S,{name:"money",class:"inline-icon"}),_(" "+i(a(Nt)(q.row.amount))+"Rp. "+i(a(K)(Math.abs(q.row.amount))),1)],2),e(we,{text:q.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(ut,null,{default:l(()=>[_(i(q.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(H,{key:"customer",props:q},{default:l(()=>[e(we,{text:q.row.customer.code+" - "+q.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"notes",props:q},{default:l(()=>[e(we,{text:q.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"amount",props:q,style:{"text-align":"right"}},{default:l(()=>[_(i(a(na)(q.row.amount)),1)]),_:2},1032,["props"]),e(H,{key:"action",props:q},{default:l(()=>[t("div",yi,[e(U,{icon:"image",color:"primary",dense:"",flat:"",disable:q.row.image_path===null||q.row.image_path==="",onClick:J(W=>P(q.row.image_path),["stop"])},{default:l(()=>[q.row.image_path!=null?(f(),O(sa,{key:0},{default:l(()=>[...E[8]||(E[8]=[_(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),A.$can("admin.customer-wallet-transaction.delete")?(f(),O(U,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:E[5]||(E[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[A.$can("admin.customer-wallet-transaction.delete")?ee((f(),O(le,{key:0,onClick:J(W=>w(q.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...E[9]||(E[9]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ra,{modelValue:N.value,"onUpdate:modelValue":E[7]||(E[7]=q=>N.value=q),imageUrl:`/${R.value}`},null,8,["modelValue","imageUrl"])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",gi,[e(de,{modelValue:g.year,"onUpdate:modelValue":[E[2]||(E[2]=q=>g.year=q),C],options:v,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:g.month,"onUpdate:modelValue":[E[3]||(E[3]=q=>g.month=q),C],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:g.year===null},null,8,["modelValue","disable"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":E[4]||(E[4]=q=>g.search=q),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},wi=Object.freeze(Object.defineProperty({__proto__:null,default:ki},Symbol.toStringTag,{value:"Module"})),hi={class:"detail"},$i={colspan:"3"},xi={class:"text-bold text-grey-8"},Si={key:0},Vi={key:1},qi={class:"text-grey-8"},Ci={key:2},Ti={class:"text-grey-8"},Hl={__name:"MainInfoTab",setup(m){const n=fe();return(d,o)=>(f(),h("table",hi,[t("tbody",null,[t("tr",null,[t("td",$i,[t("div",xi,[o[1]||(o[1]=_(" Info Pelanggan ",-1)),d.$can("admin.customer.edit")?(f(),O(U,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=s=>d.$inertia.get(d.route("admin.customer.edit",{id:a(n).props.data.id})))})):k("",!0)])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Username",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.code),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Jenis",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.CUSTOMER_TYPES[a(n).props.data.type]),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Nama",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"No. Telepon",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.phone?a(n).props.data.phone:"-"),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Alamat",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.address?a(n).props.data.address:"-"),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Saldo Wallet",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,"Rp. "+i(a(K)(a(n).props.data.wallet_balance)),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Status",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[25]||(o[25]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),a(n).props.data.created_at?(f(),h("tr",Si,[o[16]||(o[16]=t("td",null,"Dibuat",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(a(Vt)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name)+" ("+i(a(_e)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(f(),h("tr",Vi,[o[18]||(o[18]=t("td",null,"Diperbarui",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,i(a(Vt)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name)+" ("+i(a(_e)(a(n).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[o[20]||(o[20]=t("td",null,"Terakhir login",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,[_(i(a(n).props.data.last_login_datetime?a(_e)(a(n).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",qi,"("+i(a(Vt)(a(n).props.data.last_login_datetime))+")",1)])]),a(n).props.data.last_activity_datetime?(f(),h("tr",Ci,[o[23]||(o[23]=t("td",null,"Aktifitas Terakhir",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,[_(i(a(_e)(a(n).props.data.last_activity_datetime))+" ",1),t("span",Ti,[_("("+i(a(Vt)(a(n).props.data.last_activity_datetime))+")",1),o[22]||(o[22]=t("br",null,null,-1)),_(i(a(n).props.data.last_activity_description),1)])])])):k("",!0)])]))}},Pi=Object.freeze(Object.defineProperty({__proto__:null,default:Hl},Symbol.toStringTag,{value:"Module"})),Oi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ii={class:"text-bold"},Kl={__name:"WalletHistoryTab",setup(m){const n=fe(),d=V([]),o=V(!0),s=Pe({customer_id:n.props.data.id,...Ue()}),r=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{p()});const p=(v=null)=>Ae({pagination:r,filter:s,props:v,rows:d,url:route("admin.customer-wallet-transaction.data"),loading:o}),u=$e(),c=G(()=>u.screen.gt.sm?b:b.filter(v=>v.name==="id"));return(v,y)=>(f(),O(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":y[0]||(y[0]=g=>r.value=g),filter:s.search,loading:o.value,columns:c.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:x,filter:j})=>[t("div",Oi,[t("span",null,i(x)+" "+i(j?" with term "+j:""),1)])]),body:l(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:J(x=>a(Z).get(v.route("admin.customer-wallet-transaction.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:g},{default:l(()=>[t("div",Ii,[e(S,{class:"inline-icon",name:"tag"}),_(" "+i(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+i(a(_e)(g.row.datetime)),1)]),a(u).screen.lt.md?(f(),h(Q,{key:0},[t("div",{class:xe(["text-bold",g.row.amount<0?"text-red":"text-green"])},[e(S,{name:"money",class:"inline-icon"}),_(" "+i(a(Ol)(g.row.amount)),1)],2),t("div",null,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(ut,{size:"xs",color:g.row.amount>0?"green":"red"},{default:l(()=>[e(S,{name:"category"}),_(" "+i(g.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(H,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"amount",props:g},{default:l(()=>[t("div",{class:xe(g.row.amount<0?"text-red-10":g.row.amount>0?"text-green-10":"")},i(a(na)(g.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ri=Object.freeze(Object.defineProperty({__proto__:null,default:Kl},Symbol.toStringTag,{value:"Module"})),Di={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ui={class:"text-bold"},Ai={class:"text-bold"},ji={key:0},Yl={__name:"OrderHistoryTab",setup(m){const n=fe(),d=V([]),o=V(!0),s=Pe({customer_id:n.props.data.id,...Ue()}),r=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{p()});const p=(v=null)=>Ae({pagination:r,filter:s,props:v,rows:d,url:route("admin.sales-order.data",{customer_id:n.props.data.id,filter:{status:["closed","canceled"]}}),loading:o}),u=$e(),c=G(()=>u.screen.gt.sm?b:b.filter(v=>v.name==="id"));return(v,y)=>(f(),O(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":y[0]||(y[0]=g=>r.value=g),filter:s.search,loading:o.value,columns:c.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:x,filter:j})=>[t("div",Di,[t("span",null,i(x)+" "+i(j?" with term "+j:""),1)])]),body:l(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:J(x=>a(Z).get(v.route("admin.sales-order.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:g},{default:l(()=>[t("div",Ui,[e(S,{class:"inline-icon",name:"tag"}),_(" "+i(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+i(a(_e)(g.row.datetime)),1)]),a(u).screen.lt.md?(f(),h(Q,{key:0},[t("div",Ai,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+i(a(K)(g.row.grand_total)),1)]),g.row.notes?(f(),h("div",ji,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(ut,{color:g.row.status=="closed"?"green":"red"},{default:l(()=>[_(i(v.$CONSTANTS.SALES_ORDER_STATUSES[g.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(H,{key:"grand_total",props:g},{default:l(()=>[t("div",null,i(a(K)(g.row.grand_total)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ei=Object.freeze(Object.defineProperty({__proto__:null,default:Yl},Symbol.toStringTag,{value:"Module"})),Mi={class:"q-gutter-sm"},Ni={class:"col col-lg-6 q-pa-xs"},Bi={class:"row"},Qa="Rincian Pelanggan",zi={__name:"Detail",setup(m){fe();const n=V("main");return $e(),(d,o)=>{const s=Y("i-head"),r=Y("authenticated-layout");return f(),h(Q,null,[e(s,{title:Qa}),e(r,null,{title:l(()=>[_(i(Qa))]),"left-button":l(()=>[t("div",Mi,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>d.$inertia.get(d.route("admin.customer.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Ni,[t("div",Bi,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(At,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=b=>n.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(st,{name:"main",label:"Info Utama"}),e(st,{name:"history",label:"Riwayat Wallet"}),e(st,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(jt,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=b=>n.value=b),animated:""},{default:l(()=>[e(rt,{name:"main"},{default:l(()=>[e(Hl)]),_:1}),e(rt,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(Kl)]),_:1}),e(rt,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(Yl)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Fi=Object.freeze(Object.defineProperty({__proto__:null,default:zi},Symbol.toStringTag,{value:"Module"})),Li={class:"q-gutter-sm"},Hi={class:"col col-md-6 q-pa-xs"},Ki={__name:"Editor",setup(m){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Pelanggan",o=ze({id:n.props.data.id,code:n.props.data.code,name:n.props.data.name,phone:n.props.data.phone,address:n.props.data.address,active:!!n.props.data.active,password:n.props.data.password,type:n.props.data.type}),s=et(window.CONSTANTS.CUSTOMER_TYPES),r=()=>Xe({form:o,url:route("admin.customer."+(n.props.data.id?"edit":"add"),{id:o.id})});return(b,p)=>{const u=Y("i-head"),c=Y("authenticated-layout");return f(),h(Q,null,[e(u,{title:d}),e(c,null,{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",Li,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=v=>b.$inertia.get(b.route("admin.customer.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Hi,[e(Fe,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=v=>a(o).id=v)},null,512),[[dt,a(o).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(oe,{modelValue:a(o).code,"onUpdate:modelValue":p[2]||(p[2]=v=>a(o).code=v),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[v=>v&&v.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).name,"onUpdate:modelValue":p[3]||(p[3]=v=>a(o).name=v),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[v=>v&&v.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{modelValue:a(o).type,"onUpdate:modelValue":p[4]||(p[4]=v=>a(o).type=v),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"","lazy-rules":"",disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(o).errors.type,"error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(oe,{modelValue:a(o).phone,"onUpdate:modelValue":p[5]||(p[5]=v=>a(o).phone=v),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:a(o).processing,error:!!a(o).errors.phone,"error-message":a(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).address,"onUpdate:modelValue":p[6]||(p[6]=v=>a(o).address=v),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{autocomplete:"","aria-autocomplete":"none",modelValue:a(o).password,"onUpdate:modelValue":p[7]||(p[7]=v=>a(o).password=v),type:"password",label:a(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:a(o).processing,error:!!a(o).errors.password,"error-message":a(o).errors.password,"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","label","disable","error","error-message"]),e(da,{modelValue:a(o).active,"onUpdate:modelValue":p[8]||(p[8]=v=>a(o).active=v),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(U,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:p[9]||(p[9]=v=>a(Z).get(b.route("admin.customer.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Yi=Object.freeze(Object.defineProperty({__proto__:null,default:Ki},Symbol.toStringTag,{value:"Module"}));function Et(m,n,d,o){const s=[];return m.forEach(r=>{o(r)===!0?s.push(r):n.push({failedPropValidation:d,file:r})}),s}function Zt(m){m!=null&&m.dataTransfer&&(m.dataTransfer.dropEffect="copy"),Rt(m)}const Wi={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Qi=["rejected"];function Ji({editable:m,dnd:n,getFileInput:d,addFilesToQueue:o}){const{props:s,emit:r,proxy:b}=Tt(),p=V(null),u=G(()=>s.accept!==void 0?s.accept.split(",").map($=>($=$.trim(),$==="*"?"*/":($.endsWith("/*")&&($=$.slice(0,$.length-1)),$.toUpperCase()))):null),c=G(()=>parseInt(s.maxFiles,10)),v=G(()=>parseInt(s.maxTotalSize,10));function y($){var R;if(m.value)if($!==Object($)&&($={target:null}),((R=$.target)==null?void 0:R.matches('input[type="file"]'))===!0)$.clientX===0&&$.clientY===0&&Go($);else{const N=d();N!==$.target&&(N==null||N.click($))}}function g($){m.value&&$&&o(null,$)}function x($,R,N,P){let A=Array.from(R||$.target.files);const E=[],B=()=>{E.length!==0&&r("rejected",E)};if(s.accept!==void 0&&u.value.indexOf("*/")===-1&&(A=Et(A,E,"accept",z=>u.value.some(q=>z.type.toUpperCase().startsWith(q)||z.name.toUpperCase().endsWith(q))),A.length===0))return B();if(s.maxFileSize!==void 0){const z=parseInt(s.maxFileSize,10);if(A=Et(A,E,"max-file-size",q=>q.size<=z),A.length===0)return B()}if(s.multiple!==!0&&A.length!==0&&(A=[A[0]]),A.forEach(z=>{z.__key=z.webkitRelativePath+z.lastModified+z.name+z.size}),P===!0){const z=N.map(q=>q.__key);A=Et(A,E,"duplicate",q=>z.includes(q.__key)===!1)}if(A.length===0)return B();if(s.maxTotalSize!==void 0){let z=P===!0?N.reduce((q,W)=>q+W.size,0):0;if(A=Et(A,E,"max-total-size",q=>(z+=q.size,z<=v.value)),A.length===0)return B()}if(typeof s.filter=="function"){const z=s.filter(A);A=Et(A,E,"filter",q=>z.includes(q))}if(s.maxFiles!==void 0){let z=P===!0?N.length:0;if(A=Et(A,E,"max-files",()=>(z++,z<=c.value)),A.length===0)return B()}if(B(),A.length!==0)return A}function j($){Zt($),n.value!==!0&&(n.value=!0)}function w($){Rt($),($.relatedTarget!==null||Mt.is.safari!==!0?$.relatedTarget!==p.value:document.elementsFromPoint($.clientX,$.clientY).includes(p.value)===!1)===!0&&(n.value=!1)}function D($){Zt($);const R=$.dataTransfer.files;R.length!==0&&o(null,R),n.value=!1}function C($){if(n.value===!0)return ke("div",{ref:p,class:`q-${$}__dnd absolute-full`,onDragenter:Zt,onDragover:Zt,onDragleave:w,onDrop:D})}return Object.assign(b,{pickFiles:y,addFiles:g}),{pickFiles:y,addFiles:g,onDragover:j,onDragleave:w,processFiles:x,getDndNode:C,maxFilesNumber:c,maxTotalSizeNumber:v}}const Wl=$t({name:"QFile",inheritAttrs:!1,props:{...Zo,...Il,...Wi,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Xo,...Qi],setup(m,{slots:n,emit:d,attrs:o}){const{proxy:s}=Tt(),r=en(),b=V(null),p=V(!1),u=tn(m),{pickFiles:c,onDragover:v,onDragleave:y,processFiles:g,getDndNode:x}=Ji({editable:r.editable,dnd:p,getFileInput:te,addFilesToQueue:T}),j=an(m),w=G(()=>Object(m.modelValue)===m.modelValue?"length"in m.modelValue?Array.from(m.modelValue):[m.modelValue]:[]),D=G(()=>Ua(w.value)),C=G(()=>w.value.map(ne=>ne.name).join(", ")),$=G(()=>ln(w.value.reduce((ne,Ce)=>ne+Ce.size,0))),R=G(()=>({totalSize:$.value,filesNumber:w.value.length,maxFiles:m.maxFiles})),N=G(()=>({tabindex:-1,type:"file",title:"",accept:m.accept,capture:m.capture,name:u.value,...o,id:r.targetUid.value,disabled:r.editable.value!==!0})),P=G(()=>"q-file q-field--auto-height"+(p.value===!0?" q-file--dnd":"")),A=G(()=>m.multiple===!0&&m.append===!0);function E(ne){const Ce=w.value.slice();Ce.splice(ne,1),z(Ce)}function B(ne){const Ce=w.value.indexOf(ne);Ce!==-1&&E(Ce)}function z(ne){d("update:modelValue",m.multiple===!0?ne:ne[0])}function q(ne){ne.keyCode===13&&sn(ne)}function W(ne){(ne.keyCode===13||ne.keyCode===32)&&c(ne)}function te(){return b.value}function T(ne,Ce){const Ie=g(ne,Ce,w.value,A.value),ft=te();ft!=null&&(ft.value=""),Ie!==void 0&&((m.multiple===!0?m.modelValue&&Ie.every(pt=>w.value.includes(pt)):m.modelValue===Ie[0])||z(A.value===!0?w.value.concat(Ie):Ie))}function I(){return[ke("input",{class:[m.inputClass,"q-file__filler"],style:m.inputStyle})]}function X(){if(n.file!==void 0)return w.value.length===0?I():w.value.map((Ce,Ie)=>n.file({index:Ie,file:Ce,ref:this}));if(n.selected!==void 0)return w.value.length===0?I():n.selected({files:w.value,ref:this});if(m.useChips===!0)return w.value.length===0?I():w.value.map((Ce,Ie)=>ke(Rl,{key:"file-"+Ie,removable:r.editable.value,dense:!0,textColor:m.color,tabindex:m.tabindex,onRemove:()=>{E(Ie)}},()=>ke("span",{class:"ellipsis",textContent:Ce.name})));const ne=m.displayValue!==void 0?m.displayValue:C.value;return ne.length!==0?[ke("div",{class:m.inputClass,style:m.inputStyle,textContent:ne})]:I()}function ge(){const ne={ref:b,...N.value,...j.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:T};return m.multiple===!0&&(ne.multiple=!0),ke("input",ne)}return Object.assign(r,{fieldClass:P,emitValue:z,hasValue:D,inputRef:b,innerValue:w,floatingLabel:G(()=>D.value===!0||Ua(m.displayValue)),computedCounter:G(()=>{if(m.counterLabel!==void 0)return m.counterLabel(R.value);const ne=m.maxFiles;return`${w.value.length}${ne!==void 0?" / "+ne:""} (${$.value})`}),getControlChild:()=>x("file"),getControl:()=>{const ne={ref:r.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:m.tabindex};return r.editable.value===!0&&Object.assign(ne,{onDragover:v,onDragleave:y,onKeydown:q,onKeyup:W}),ke("div",ne,[ge()].concat(X()))}}),Object.assign(s,{removeAtIndex:E,removeFile:B,getNativeElement:()=>b.value}),on(s,"nativeEl",()=>b.value),nn(r)}}),Kt=$t({name:"QBanner",props:{...ka,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(m,{slots:n}){const{proxy:{$q:d}}=Tt(),o=wa(m,d),s=G(()=>"q-banner row items-center"+(m.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(m.rounded===!0?" rounded-borders":"")),r=G(()=>`q-banner__actions row items-center justify-end col-${m.inlineActions===!0?"auto":"all"}`);return()=>{const b=[ke("div",{class:"q-banner__avatar col-auto row items-center self-start"},Ct(n.avatar)),ke("div",{class:"q-banner__content col text-body2"},Ct(n.default))],p=Ct(n.action);return p!==void 0&&b.push(ke("div",{class:r.value},p)),ke("div",{class:s.value+(m.inlineActions===!1&&p!==void 0?" q-banner--top-padding":""),role:"alert"},b)}}}),Gi={class:"q-gutter-sm"},Xi={class:"col col-md-6 q-pa-xs"},Ja="Import Pelanggan",Zi={__name:"Import",setup(m){const n=ze({csv_file:null}),d=()=>{n.post(route("admin.customer.import"),{onSuccess:()=>{n.reset()},onError:()=>{Be()},onFinish:()=>{n.clearErrors()}})};return(o,s)=>{const r=Y("i-head"),b=Y("authenticated-layout");return f(),h(Q,null,[e(r,{title:Ja}),e(b,{"show-drawer-button":!0},{title:l(()=>[_(i(Ja))]),"left-button":l(()=>[t("div",Gi,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=p=>o.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Xi,[e(Fe,{class:"row",onSubmit:J(d,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[s[3]||(s[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),s[4]||(s[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(Wl,{modelValue:a(n).csv_file,"onUpdate:modelValue":s[1]||(s[1]=p=>a(n).csv_file=p),accept:".csv",label:"Pilih file CSV",error:!!a(n).errors.csv_file,"error-message":a(n).errors.csv_file,disable:a(n).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(n).processing||!a(n).csv_file,loading:a(n).processing},null,8,["disable","loading"]),e(U,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:s[2]||(s[2]=p=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(f(),O(Kt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[_(i(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(f(),O(Kt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[_(i(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ed=Object.freeze(Object.defineProperty({__proto__:null,default:Zi},Symbol.toStringTag,{value:"Module"})),td={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ad={class:"q-pa-xs"},ld={class:"full-width row flex-center text-grey-8 q-gutter-sm"},od={class:"flex justify-end"},Ga="Pelanggan",nd={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=Pe({search:"",status:"active",...Ue()}),c=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"code",label:n.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Saldo (Rp)",field:"wallet_balance",align:"right"},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{x()});const g=C=>at({message:`Hapus Pelanggan ${C.name}?`,url:route("admin.customer.delete",C.id),fetchItemsCallback:x,loading:s}),x=(C=null)=>{Ae({pagination:c,filter:u,props:C,rows:o,url:route("admin.customer.data"),loading:s,tableRef:r})},j=()=>x(),w=C=>Z.get(route("admin.customer.detail",{id:C.id})),D=G(()=>n.screen.gt.sm?v:v.filter(C=>C.name==="code"||C.name==="action"));return(C,$)=>{const R=Y("i-head"),N=Y("authenticated-layout");return f(),h(Q,null,[e(R,{title:Ga}),e(N,null,Le({title:l(()=>[_(i(Ga))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=P=>d.value=!d.value)},null,8,["icon"]),C.$can("admin.customer.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=P=>a(Z).get(C.route("admin.customer.add")))})):k("",!0),C.$can("admin.customer.import")?(f(),O(U,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[3]||($[3]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.customer.import")?ee((f(),O(le,{key:0,clickable:"",onClick:$[2]||($[2]=J(P=>a(Z).get(C.route("admin.customer.import")),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"csv"})]),_:1}),e(M,null,{default:l(()=>[...$[8]||($[8]=[_("Import",-1)])]),_:1})]),_:1})),[[se],[ue]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",ad,[e(Te,{class:"full-height-table",style:Ee({height:a(p)}),ref_key:"tableRef",ref:r,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:c.value,"onUpdate:pagination":$[7]||($[7]=P=>c.value=P),filter:u.search,loading:s.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:P,message:A,filter:E})=>[t("div",ld,[t("span",null,i(A)+" "+i(E?" with term "+E:""),1)])]),body:l(P=>[e(qe,{props:P,class:xe([P.row.active?"":"bg-red-1","cursor-pointer"]),onClick:A=>w(P.row)},{default:l(()=>[e(H,{key:"code",props:P,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(f(),O(S,{key:0,name:"person"})):k("",!0),_(" "+i(P.row.code),1)]),a(n).screen.lt.md?(f(),h(Q,{key:0},[t("div",null,[a(n).screen.lt.md?(f(),O(S,{key:0,name:"person"})):k("",!0),_(" "+i(P.row.name),1)]),t("div",null,[e(S,{name:"phone"}),_(" "+i(P.row.phone),1)]),e(we,{text:P.row.address,icon:"home_pin"},null,8,["text"]),t("div",null,[e(S,{name:"wallet"}),_(" Rp. "+i(a(K)(P.row.wallet_balance)),1)])],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"name",props:P},{default:l(()=>[_(i(P.row.name),1)]),_:2},1032,["props"]),e(H,{key:"wallet_balance",props:P},{default:l(()=>[_(i(a(K)(P.row.wallet_balance)),1)]),_:2},1032,["props"]),e(H,{key:"phone",props:P},{default:l(()=>[_(i(P.row.phone),1)]),_:2},1032,["props"]),e(H,{key:"address",props:P},{default:l(()=>[e(we,{text:P.row.address},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:P},{default:l(()=>[t("div",od,[C.$can("admin.customer.add")||C.$can("admin.customer.edit")||C.$can("admin.customer.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[6]||($[6]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.customer.edit")?ee((f(),O(le,{key:0,clickable:"",onClick:J(A=>a(Z).get(C.route("admin.customer.edit",P.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...$[9]||($[9]=[_("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),C.$can("admin.customer.delete")?ee((f(),O(le,{key:1,onClick:J(A=>g(P.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...$[10]||($[10]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",td,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[$[4]||($[4]=P=>u.status=P),j],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":$[5]||($[5]=P=>u.search=P),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},sd=Object.freeze(Object.defineProperty({__proto__:null,default:nd},Symbol.toStringTag,{value:"Module"})),rd={class:"q-pb-sm"},id={class:"row q-col-gutter-sm"},dd={class:"row items-center no-wrap"},ud={class:"q-ml-md"},md={class:"text-subtitle2 text-grey-8"},cd={class:"text-h6 text-weight-bold"},Ql={__name:"ActualSummaryCard",props:{dashboardData:{type:Object,required:!0}},setup(m){const n=m,d=G(()=>[{label:"Total Pelanggan Aktif",value:n.dashboardData.summary.total_active_customer,icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Saldo Wallet",value:K(n.dashboardData.summary.total_wallet_balance),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Penjualan",value:K(n.dashboardData.summary.total_sales),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Transaksi",value:K(n.dashboardData.summary.total_transactions),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(o,s)=>(f(),h("div",rd,[s[0]||(s[0]=t("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"},"Ringkasan Statistik",-1)),t("div",id,[(f(!0),h(Q,null,tt(d.value,(r,b)=>(f(),h("div",{key:b,class:"col-12 col-md-6"},[e(ce,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:l(()=>[t("div",dd,[e(Lt,{icon:r.icon,color:r.color,"text-color":r.bgColor},null,8,["icon","color","text-color"]),t("div",ud,[t("div",md,i(r.label),1),t("div",cd,i(r.value),1)])])]),_:2},1024)]))),128))])]))}},pd=Object.freeze(Object.defineProperty({__proto__:null,default:Ql},Symbol.toStringTag,{value:"Module"})),fd={class:"row q-col-gutter-sm q-pb-sm"},gd={class:"col-md-6 col-12"},bd={class:"col-md-6 col-12"},vd={__name:"ChartCard",props:{dashboardData:{type:Object,required:!0}},setup(m){rn([dn,un,mn,cn,pn,fn,gn]);const n=m,d=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=G(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(r){let b=r[0].name+"<br/>";return r.forEach(function(p){b+=p.marker+" "+p.seriesName+": "+K(p.value)+"<br/>"}),b}},xAxis:{type:"category",data:n.dashboardData.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:r=>K(r),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:n.dashboardData.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:d[0]}}]})),s=G(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(r){return r.name+"<br/>"+r.seriesName+": "+K(r.value)+" ("+r.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:n.dashboardData.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:r=>d[r.dataIndex%d.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(r,b)=>(f(),h("div",fd,[t("div",gd,[e(ce,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[b[0]||(b[0]=t("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),e(a(Aa),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",bd,[e(ce,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[b[1]||(b[1]=t("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),e(a(Aa),{class:"chart",option:s.value,autoresize:""},null,8,["option"])]),_:1})])]))}},Jl=_t(vd,[["__scopeId","data-v-b9cdf915"]]),_d=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),yd={class:"row q-col-gutter-sm q-pb-sm"},kd={class:"col-md-6 col-12"},wd={class:"col-md-6 col-12"},Gl={__name:"TopCard",props:{dashboardData:{type:Object,required:!0}},setup(m){return(n,d)=>(f(),h("div",yd,[t("div",kd,[e(ce,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[d[0]||(d[0]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),e(Ne,{separator:""},{default:l(()=>[(f(!0),h(Q,null,tt(m.dashboardData.top_customers_sales,(o,s)=>(f(),O(le,{key:s},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(Lt,{color:"primary","text-color":"white",size:"sm"},{default:l(()=>[_(i(s+1),1)]),_:2},1024)]),_:2},1024),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[_(i(o.name),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:l(()=>[e(ve,{class:"text-primary"},{default:l(()=>[_(i(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",wd,[e(ce,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[d[1]||(d[1]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),e(Ne,{separator:""},{default:l(()=>[(f(!0),h(Q,null,tt(m.dashboardData.top_customers_topup,(o,s)=>(f(),O(le,{key:s},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(Lt,{color:"green-7","text-color":"white",size:"sm"},{default:l(()=>[_(i(s+1),1)]),_:2},1024)]),_:2},1024),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[_(i(o.name),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:l(()=>[e(ve,{class:"text-green-7"},{default:l(()=>[_(i(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]))}},hd=Object.freeze(Object.defineProperty({__proto__:null,default:Gl},Symbol.toStringTag,{value:"Module"})),$d={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},xd={class:"q-pa-xs"},Sd={class:"q-pa-none"},Xa="Dashboard",Vd={__name:"Index",setup(m){const n=fe(),d=V({summary:{total_active_customer:n.props.data.active_customer_count,total_sales:155e5,total_transactions:1250,total_wallet_balance:n.props.data.total_customer_wallet_balance,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),o=V(!1),s=V(Ue().month??"this_month"),r=V([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),b=()=>{Z.visit(route("admin.dashboard",{month:s.value}))};return(p,u)=>{const c=Y("i-head"),v=Y("authenticated-layout");return f(),h(Q,null,[e(c,{title:Xa}),e(v,null,Le({title:l(()=>[_(i(Xa))]),"right-button":l(()=>[e(U,{class:"q-ml-sm",icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:u[0]||(u[0]=y=>o.value=!o.value)},null,8,["icon"])]),default:l(()=>[t("div",xd,[t("div",Sd,[e(Ql,{dashboardData:d.value},null,8,["dashboardData"])]),e(Jl,{dashboardData:d.value},null,8,["dashboardData"]),e(Gl,{dashboardData:d.value},null,8,["dashboardData"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar"},{default:l(()=>[t("div",$d,[e(de,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:s.value,"onUpdate:modelValue":[u[1]||(u[1]=y=>s.value=y),b],options:r.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},qd=Object.freeze(Object.defineProperty({__proto__:null,default:Vd},Symbol.toStringTag,{value:"Module"})),Cd={class:"row"},Td={class:"row q-col-gutter-sm"},Pd={class:"col-sm-6 col-xs-12"},Od={class:"col-sm-6 col-xs-12"},Id={class:"col-md-3 col-sm-6 col-xs-12"},Rd={class:"col-md-3 col-sm-6 col-xs-12"},Dd={class:"col-md-3 col-sm-6 col-xs-12"},Ud={class:"col-md-3 col-sm-6 col-xs-12"};const Ad={__name:"SummaryCard",setup(m){const n=fe(),d=(o,s)=>{const b={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...s};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(b)),Z.visit(o,{data:b})};return(o,s)=>(f(),h("div",Cd,[e(ce,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:l(()=>[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",Td,[t("div",Pd,[e(le,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:s[0]||(s[0]=r=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(M,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ve,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[_(i(a(n).props.data.active_customer_count),1)]),_:1}),e(ve,null,{default:l(()=>[...s[5]||(s[5]=[_("Pelanggan Aktif",-1)])]),_:1})]),_:1})]),_:1})]),t("div",Od,[e(le,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:s[1]||(s[1]=r=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(M,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ve,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[_(i(o.$page.props.data.active_user_count),1)]),_:1}),e(ve,null,{default:l(()=>[...s[6]||(s[6]=[_("Pengguna Aktif",-1)])]),_:1})]),_:1})]),_:1})]),t("div",Id,[e(le,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ve,{class:"text-white text-weight-bold"},{default:l(()=>[_(" Rp. "+i(a(K)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(ve,null,{default:l(()=>[...s[7]||(s[7]=[_("Total Saldo Koperasi",-1)])]),_:1})]),_:1})]),_:1})]),t("div",Rd,[e(le,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ve,{class:"text-white text-weight-bold"},{default:l(()=>[_(" Rp. "+i(a(K)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(ve,null,{default:l(()=>[...s[8]||(s[8]=[_("Total Saldo Pelanggan",-1)])]),_:1})]),_:1})]),_:1})]),t("div",Dd,[e(le,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ve,{class:"text-white text-weight-bold"},{default:l(()=>[_(" Rp. "+i(a(K)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(ve,null,{default:l(()=>[...s[9]||(s[9]=[_("Total Utang Pelanggan",-1)])]),_:1})]),_:1})]),_:1})]),t("div",Ud,[e(le,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ve,{class:"text-white text-weight-bold"},{default:l(()=>[_(" Rp. "+i(a(K)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(ve,null,{default:l(()=>[...s[10]||(s[10]=[_("Total Piutang Pelanggan",-1)])]),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},jd=Object.freeze(Object.defineProperty({__proto__:null,default:Ad},Symbol.toStringTag,{value:"Module"})),Ed={class:"detail"},Xl={__name:"MainInfoTab",setup(m){const n=fe();return(d,o)=>(f(),h("table",Ed,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.FINANCE_ACCOUNT_TYPES[a(n).props.data.type]),1)]),a(n).props.data.type=="bank"?(f(),h(Q,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+i(a(K)(a(n).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},Md=Object.freeze(Object.defineProperty({__proto__:null,default:Xl},Symbol.toStringTag,{value:"Module"})),Nd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Bd={class:"flex q-gutter-sm"},zd={key:0},Zl={__name:"HistoryTab",setup(m){const n=fe(),d=$e(),o=V(null),s=V([]),r=V(!0),b=Pe({...Ue()}),p=Ke(null,117),u=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),c=[{name:"id",label:"ID",field:"id",align:"left"},{name:"datetime",label:"Waktu",field:"datetime",align:"left"},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],v=G(()=>d.screen.gt.sm?c:c.filter(g=>g.name==="id"));he(()=>{y()});const y=(g=null)=>Ae({pagination:u,filter:b,props:g,rows:s,url:route("admin.finance-transaction.data",{filter:{account_id:n.props.data.id}}),loading:r,tableRef:o});return(g,x)=>(f(),O(Te,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:Ee({height:a(p)}),color:"primary",class:"full-height-table","row-key":"id",pagination:u.value,"onUpdate:pagination":x[0]||(x[0]=j=>u.value=j),filter:b.search,loading:r.value,columns:v.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({message:j,filter:w})=>[t("div",Nd,[t("span",null,i(j)+" "+i(w?" with term "+w:""),1)])]),body:l(j=>[e(qe,{props:j},{default:l(()=>[e(H,{key:"id",props:j},{default:l(()=>[t("div",Bd,[t("div",null,[a(d).screen.lt.md?(f(),O(S,{key:0,name:"tag",class:"inline-icon"})):k("",!0),_(" "+i(j.row.formatted_id),1)])]),a(d).screen.lt.md?(f(),h(Q,{key:0},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+i(a(_e)(j.row.datetime)),1)]),j.row.creator?(f(),h("div",zd,[e(S,{name:"person",class:"inline-icon"}),_(" "+i(j.row.creator.username),1)])):k("",!0),t("div",{class:xe([j.row.amount>0?"text-green":"text-red","text-bold"])},[e(S,{class:"inline-icon",name:"money"}),_(" "+i(a(Nt)(j.row.amount))+"Rp. "+i(a(K)(Math.abs(j.row.amount))),1)],2),t("div",null,[e(ut,{color:j.row.amount>0?"green":"red"},{default:l(()=>[_(i(g.$CONSTANTS.FINANCE_TRANSACTION_TYPES[j.row.type]),1)]),_:2},1032,["color"])]),e(we,{text:j.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"datetime",props:j},{default:l(()=>[_(i(a(_e)(j.row.datetime)),1)]),_:2},1032,["props"]),e(H,{key:"type",props:j},{default:l(()=>[e(ut,{color:j.row.amount>0?"green":"red"},{default:l(()=>[_(i(g.$CONSTANTS.FINANCE_TRANSACTION_TYPES[j.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(H,{key:"amount",props:j,class:xe(j.row.amount>0?"text-green":"text-red")},{default:l(()=>[_(i(a(Nt)(j.row.amount)+a(K)(Math.abs(j.row.amount))),1)]),_:2},1032,["props","class"]),e(H,{key:"notes",props:j},{default:l(()=>[e(we,{text:j.row.notes,icon:g.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},Fd=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"})),Ld={class:"q-gutter-sm"},Hd={class:"q-gutter-sm"},Kd={class:"col q-pa-xs"},Yd={class:"row"},Za="Rincian Akun",Wd={__name:"Detail",setup(m){const n=fe(),d=V("main");return(o,s)=>{const r=Y("i-head"),b=Y("authenticated-layout");return f(),h(Q,null,[e(r,{title:Za}),e(b,null,{title:l(()=>[_(i(Za))]),"left-button":l(()=>[t("div",Ld,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=p=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":l(()=>[t("div",Hd,[o.$can("admin.finance-account.edit")?(f(),O(U,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:s[1]||(s[1]=p=>a(Z).get(o.route("admin.finance-account.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Kd,[t("div",Yd,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(At,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=p=>d.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(st,{name:"main",label:"Info Akun"}),e(st,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(jt,{modelValue:d.value,"onUpdate:modelValue":s[3]||(s[3]=p=>d.value=p),animated:""},{default:l(()=>[e(rt,{name:"main"},{default:l(()=>[e(Xl)]),_:1}),e(rt,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(Zl)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Qd=Object.freeze(Object.defineProperty({__proto__:null,default:Wd},Symbol.toStringTag,{value:"Module"})),Jd={style:{"margin-left":"-10px"}},qt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(m){return(n,d)=>(f(),h("div",Jd,[e(la,{class:"full-width q-pl-none","model-value":m.modelValue,"onUpdate:modelValue":d[0]||(d[0]=o=>n.$emit("update:modelValue",o)),disable:m.disable,label:m.label},null,8,["model-value","disable","label"])]))}},Gd={class:"q-gutter-sm"},Xd={class:"col col-md-6 q-pa-xs"},Zd={__name:"Editor",setup(m){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=ze({id:n.props.data.id,name:n.props.data.name,type:n.props.data.type,bank:n.props.data.bank,number:n.props.data.number,holder:n.props.data.holder,balance:parseFloat(n.props.data.balance),active:!!n.props.data.active,has_wallet_access:!!n.props.data.has_wallet_access,show_in_pos_payment:!!n.props.data.show_in_pos_payment,show_in_purchasing_payment:!!n.props.data.show_in_purchasing_payment,notes:n.props.data.notes}),s=et(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),r=()=>Xe({form:o,url:route("admin.finance-account.save")}),b=p=>{p==="cashier_cash"&&(o.show_in_pos_payment=!0)};return he(()=>{b(o.type)}),Me(()=>o.type,p=>{b(p)}),(p,u)=>{const c=Y("i-head"),v=Y("authenticated-layout");return f(),h(Q,null,[e(c,{title:d}),e(v,null,{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",Gd,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>p.$inertia.get(p.route("admin.finance-account.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Xd,[e(Fe,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":u[1]||(u[1]=y=>a(o).id=y)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":u[2]||(u[2]=y=>a(o).name=y),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{modelValue:a(o).type,"onUpdate:modelValue":u[3]||(u[3]=y=>a(o).type=y),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"",error:!!a(o).errors.type,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),a(o).type=="bank"?(f(),h(Q,{key:0},[e(oe,{modelValue:a(o).bank,"onUpdate:modelValue":u[4]||(u[4]=y=>a(o).bank=y),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!a(o).errors.bank,disable:a(o).processing,"error-message":a(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).number,"onUpdate:modelValue":u[5]||(u[5]=y=>a(o).number=y),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!a(o).errors.number,disable:a(o).processing,"error-message":a(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).holder,"onUpdate:modelValue":u[6]||(u[6]=y=>a(o).holder=y),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!a(o).errors.holder,disable:a(o).processing,"error-message":a(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(De,{modelValue:a(o).balance,"onUpdate:modelValue":u[7]||(u[7]=y=>a(o).balance=y),label:"Saldo",lazyRules:"",disable:a(o).processing,"allow-negative":!0,error:!!a(o).errors.balance,errorMessage:a(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(o).notes,"onUpdate:modelValue":u[8]||(u[8]=y=>a(o).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(qt,{modelValue:a(o).active,"onUpdate:modelValue":u[9]||(u[9]=y=>a(o).active=y),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),u[14]||(u[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(qt,{modelValue:a(o).show_in_pos_payment,"onUpdate:modelValue":u[10]||(u[10]=y=>a(o).show_in_pos_payment=y),disable:a(o).processing||a(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(qt,{modelValue:a(o).show_in_purchasing_payment,"onUpdate:modelValue":u[11]||(u[11]=y=>a(o).show_in_purchasing_payment=y),disable:a(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(qt,{modelValue:a(o).has_wallet_access,"onUpdate:modelValue":u[12]||(u[12]=y=>a(o).has_wallet_access=y),disable:a(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:u[13]||(u[13]=y=>a(Z).get(p.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},eu=Object.freeze(Object.defineProperty({__proto__:null,default:Zd},Symbol.toStringTag,{value:"Module"})),tu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},au={class:"q-pa-xs"},lu={class:"q-my-sm text-subtitle"},ou={class:"text-bold text-grey-8"},nu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},su={class:"text-bold text-grey-9"},ru={class:"text-grey-9"},iu={key:0},du={key:1},uu={key:0},mu={class:"flex justify-end"},el="Akun Kas",cu={__name:"Index",setup(m){const n=fe(),d=$e(),o=V(!1),s=V([]),r=V(null),b=V(null),p=Ke(b,117),u=V(!0),c=Pe({search:"",status:"active",type:"all",...Ue()}),v=n.props.totalBalance,y=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],x=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],j=[{value:"all",label:"Semua"},...et(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];he(()=>{D()});const w=N=>at({message:`Hapus Akun ${N.name}?`,url:route("admin.finance-account.delete",N.id),fetchItemsCallback:D,loading:u}),D=(N=null)=>{Ae({pagination:y,filter:c,props:N,rows:s,url:route("admin.finance-account.data"),loading:u,tableRef:r})},C=()=>D(),$=N=>Z.get(route("admin.finance-account.detail",{id:N.id})),R=G(()=>d.screen.gt.sm?g:g.filter(N=>N.name==="name"||N.name==="action"));return(N,P)=>{const A=Y("i-head"),E=Y("authenticated-layout");return f(),h(Q,null,[e(A,{title:el}),e(E,null,Le({title:l(()=>[_(i(el))]),"right-button":l(()=>[e(U,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=B=>o.value=!o.value)},null,8,["icon"]),N.$can("admin.finance-account.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=B=>a(Z).get(N.route("admin.finance-account.add")))})):k("",!0)]),default:l(()=>[t("div",au,[e(ce,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:l(()=>[t("div",lu,[P[7]||(P[7]=_(" Total Saldo Akun Aktif: ",-1)),t("span",ou,"Rp. "+i(a(K)(a(v))),1)])]),_:1}),e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",style:Ee({height:a(p)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":P[6]||(P[6]=B=>y.value=B),filter:c.search,loading:u.value,columns:R.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:D,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:B,message:z,filter:q})=>[t("div",nu,[t("span",null,i(z)+" "+i(q?" with term "+q:""),1)])]),body:l(B=>[e(qe,{props:B,class:xe([B.row.active?"":"bg-red-1","cursor-pointer"]),onClick:z=>$(B.row)},{default:l(()=>[e(H,{key:"name",props:B,class:"wrap-column"},{default:l(()=>[t("div",su,i(B.row.name),1),t("div",ru,[B.row.type=="bank"?(f(),h("div",iu,[e(S,{name:"wallet",class:"inline-icon"}),_(" Rekening "+i(B.row.bank??"-")+" "+i(B.row.number??"-")+" a.n. "+i(B.row.holder??"-"),1)])):k("",!0),B.row.notes?(f(),h("div",du,[e(S,{name:"notes"}),_(" "+i(B.row.notes),1)])):k("",!0)]),a(d).screen.lt.md?(f(),h("div",uu,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+i(a(K)(B.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"type",props:B},{default:l(()=>[_(i(N.$CONSTANTS.FINANCE_ACCOUNT_TYPES[B.row.type]),1)]),_:2},1032,["props"]),e(H,{key:"balance",props:B},{default:l(()=>[_(i(a(K)(B.row.balance)),1)]),_:2},1032,["props"]),e(H,{key:"action",props:B},{default:l(()=>[t("div",mu,[N.$can("admin.finance-account.add")||N.$can("admin.finance-account.edit")||N.$can("admin.finance-account.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[5]||(P[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.finance-account.add")?ee((f(),O(le,{key:0,clickable:"",onClick:J(z=>a(Z).get(N.route("admin.finance-account.duplicate",B.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>[...P[8]||(P[8]=[_(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),N.$can("admin.finance-account.edit")?ee((f(),O(le,{key:1,clickable:"",onClick:J(z=>a(Z).get(N.route("admin.finance-account.edit",B.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...P[9]||(P[9]=[_("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),N.$can("admin.finance-account.delete")?ee((f(),O(le,{key:2,onClick:J(z=>w(B.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...P[10]||(P[10]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",tu,[e(de,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:c.type,"onUpdate:modelValue":[P[2]||(P[2]=B=>c.type=B),C],options:j,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[P[3]||(P[3]=B=>c.status=B),C],options:x,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":P[4]||(P[4]=B=>c.search=B),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},pu=Object.freeze(Object.defineProperty({__proto__:null,default:cu},Symbol.toStringTag,{value:"Module"})),fu={class:"q-gutter-sm"},gu={class:"col col-md-6 q-pa-xs"},bu={class:"row"},vu={class:"detail"},_u={key:0},yu={key:1},ku={key:2},wu={key:3},hu={colspan:"3",class:"bg-white"},tl="Rincian Transaksi",$u={__name:"Detail",setup(m){const n=fe();return(d,o)=>{const s=Y("i-head"),r=Y("authenticated-layout");return f(),h(Q,null,[e(s,{title:tl}),e(r,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",fu,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>d.$inertia.get(d.route("admin.finance-transaction.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},i(tl))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",gu,[t("div",bu,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",vu,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.datetime)),1)]),a(n).props.data.account?(f(),h("tr",_u,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[_(i(a(n).props.data.account.name)+" ",1),a(n).props.data.account.type==="bank"?(f(),h(Q,{key:0},[_(" Rek "+i(a(n).props.data.account.bank)+" an "+i(a(n).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),_(" "+i(a(n).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),a(n).props.data.type?(f(),h("tr",yu,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.FINANCE_TRANSACTION_TYPES[a(n).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(Nt)(a(n).props.data.amount))+" Rp. "+i(a(K)(Math.abs(a(n).props.data.amount))),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),a(n).props.data.creator?(f(),h("tr",ku,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(f(),h("tr",wu,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(f(),h(Q,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",hu,[e(Yt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Ee([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},xu=Object.freeze(Object.defineProperty({__proto__:null,default:$u},Symbol.toStringTag,{value:"Module"})),Su={class:"q-gutter-sm"},Vu={class:"col col-md-6 q-pa-xs"},qu={__name:"Editor",setup(m){var p;const n=fe(),d=(n.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=n.props.accounts.map(u=>({label:u.name,value:u.id})),s=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],r=ze({id:n.props.data.id,account_id:n.props.data.account_id,to_account_id:n.props.data.to_account_id??null,type:n.props.data.type,datetime:new Date(n.props.data.datetime),notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((p=n.props.data)==null?void 0:p.image_path)??"",image:null}),b=()=>{Jt(r,{datetime:"YYYY-MM-DD HH:mm:ss"}),Xe({form:r,url:route("admin.finance-transaction.save")})};return(u,c)=>{const v=Y("i-head"),y=Y("authenticated-layout");return f(),h(Q,null,[e(v,{title:d}),e(y,null,{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",Su,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=g=>u.$inertia.get(u.route("admin.finance-transaction.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Vu,[e(Fe,{class:"row",onSubmit:J(b,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=g=>a(r).id=g)},null,512),[[dt,a(r).id]]),e(Bt,{modelValue:a(r).datetime,"onUpdate:modelValue":c[2]||(c[2]=g=>a(r).datetime=g),label:"Waktu",error:!!a(r).errors.datetime,disable:a(r).processing,errorMessage:a(r).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{autofocus:"",modelValue:a(r).type,"onUpdate:modelValue":c[3]||(c[3]=g=>a(r).type=g),label:"Jenis Transaksi",options:s,"map-options":"","emit-value":"",error:!!a(r).errors.type,disable:a(r).processing,errorMessage:a(r).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{class:"custom-select",modelValue:a(r).account_id,"onUpdate:modelValue":c[4]||(c[4]=g=>a(r).account_id=g),label:a(r).type=="transfer"?"Akun Asal":"Akun",options:a(o),"map-options":"","emit-value":"",errorMessage:a(r).errors.account_id,error:!!a(r).errors.account_id,disable:a(r).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),a(r).type=="transfer"?(f(),O(de,{key:0,class:"custom-select",modelValue:a(r).to_account_id,"onUpdate:modelValue":c[5]||(c[5]=g=>a(r).to_account_id=g),label:"Akun Tujuan",options:a(o),"map-options":"","emit-value":"",errorMessage:a(r).errors.to_account_id,error:!!a(r).errors.to_account_id,disable:a(r).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(De,{modelValue:a(r).amount,"onUpdate:modelValue":c[6]||(c[6]=g=>a(r).amount=g),label:"Jumlah",lazyRules:"",disable:a(r).processing,error:!!a(r).errors.amount,errorMessage:a(r).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(r).notes,"onUpdate:modelValue":c[7]||(c[7]=g=>a(r).notes=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(r).processing,error:!!a(r).errors.notes,"error-message":a(r).errors.notes,rules:[g=>g&&g.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ha,{modelValue:a(r).image,"onUpdate:modelValue":c[8]||(c[8]=g=>a(r).image=g),"initial-image-path":a(r).image_path,disabled:a(r).processing,error:!!a(r).errors.image||!!a(r).errors.image_path,"error-message":a(r).errors.image||a(r).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(r).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(r).processing,onClick:c[9]||(c[9]=g=>a(Z).get(u.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Cu=Object.freeze(Object.defineProperty({__proto__:null,default:qu},Symbol.toStringTag,{value:"Module"})),Tu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Pu={class:"q-pa-xs"},Ou={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Iu={class:"text-grey-8"},Ru={class:"text-bold text-grey-8"},Du={class:"flex justify-end no-wrap"},al="Transaksi Kas",Uu={__name:"Index",setup(m){const n=fe(),d=$e(),o=V(!1),s=V([]),r=V(!0),b=V(null),p=V(null),u=Ke(p),c=Wt(),v=Qt(),y=[{label:"Semua",value:"all"},...n.props.accounts.map(z=>({label:z.name,value:z.id}))],g=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...Dt(c-2,c-1).reverse()],x=[{value:"all",label:"Semua Bulan"},...Ut()],j=[{value:"all",label:"Semua"},...et(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],w=Pe({search:"",type:"all",account_id:"all",year:c,month:v,...Ue()}),D=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:d.screen.lt.md?"Item":"Kode Trx",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{R()});const $=z=>at({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${z.formatted_id}?`,url:route("admin.finance-transaction.delete",z.id),fetchItemsCallback:R,loading:r}),R=(z=null)=>{Ae({pagination:D,filter:w,props:z,rows:s,url:route("admin.finance-transaction.data"),loading:r,tableRef:b})},N=()=>{R()},P=G(()=>d.screen.gt.sm?C:C.filter(z=>z.name==="id"||z.name==="action"));Me(()=>w.year,z=>{z===null&&(w.month=null)});const A=V(null),E=V(!1),B=z=>{A.value=z,E.value=!0};return(z,q)=>{const W=Y("i-head"),te=Y("authenticated-layout");return f(),h(Q,null,[e(W,{title:al}),e(te,null,Le({title:l(()=>[_(i(al))]),"right-button":l(()=>[e(U,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:q[0]||(q[0]=T=>o.value=!o.value)},null,8,["icon"]),z.$can("admin.finance-transaction.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:q[1]||(q[1]=T=>a(Z).get(z.route("admin.finance-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",Pu,[e(Te,{ref_key:"tableRef",ref:b,style:Ee({height:a(u)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":q[8]||(q[8]=T=>D.value=T),filter:w.search,loading:r.value,columns:P.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:R,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:T,message:I,filter:X})=>[t("div",Ou,[t("span",null,i(I)+" "+i(X?" with term "+X:""),1)])]),body:l(T=>[e(qe,{props:T,class:"cursor-pointer",onClick:J(I=>a(Z).get(z.route("admin.finance-transaction.detail",{id:T.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:T},{default:l(()=>[t("div",null,[a(d).screen.lt.md?(f(),O(S,{key:0,class:"inline-icon",name:"tag"})):k("",!0),_(" "+i(T.row.formatted_id),1)]),a(d).screen.lt.md?(f(),h(Q,{key:0},[t("div",Iu,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+i(a(_e)(T.row.datetime)),1)]),t("div",Ru,[e(S,{name:"wallet",class:"inline-icon"}),_(" "+i(T.row.account.name),1)]),t("div",{class:xe(["text-bold",T.row.amount<0?"text-red":"text-green"])},[e(S,{name:"money",class:"inline-icon"}),_(" "+i(a(Nt)(T.row.amount)+"Rp."+a(K)(Math.abs(T.row.amount))),1)],2),T.row.notes?(f(),O(we,{key:0,icon:"notes",text:T.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(ut,{color:T.row.amount>0?"green":"red"},{default:l(()=>[_(i(T.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"datetime",props:T,class:"wrap-column"},{default:l(()=>[_(i(a(_e)(T.row.datetime)),1)]),_:2},1032,["props"]),e(H,{key:"account",props:T},{default:l(()=>{var I;return[_(i((I=T.row.account)==null?void 0:I.name),1)]}),_:2},1032,["props"]),e(H,{key:"type",props:T},{default:l(()=>[_(i(z.$CONSTANTS.FINANCE_TRANSACTION_TYPES[T.row.type]),1)]),_:2},1032,["props"]),e(H,{key:"amount",props:T,style:{"text-align":"right"}},{default:l(()=>[_(i(a(na)(T.row.amount)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:T,class:"wrap-column"},{default:l(()=>[_(i(T.row.notes),1)]),_:2},1032,["props"]),e(H,{key:"action",props:T},{default:l(()=>[t("div",Du,[e(U,{icon:"image",color:"primary",dense:"",flat:"",disable:T.row.image_path===null||T.row.image_path==="",onClick:J(I=>B(T.row.image_path),["stop"])},{default:l(()=>[T.row.image_path!=null?(f(),O(sa,{key:0},{default:l(()=>[...q[10]||(q[10]=[_(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),z.$can("admin.finance-transaction.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:q[7]||(q[7]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[z.$can("admin.finance-transaction.delete")?ee((f(),O(le,{key:0,onClick:J(I=>$(T.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...q[11]||(q[11]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ra,{modelValue:E.value,"onUpdate:modelValue":q[9]||(q[9]=T=>E.value=T),imageUrl:`/${A.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:l(()=>[t("div",Tu,[e(de,{modelValue:w.year,"onUpdate:modelValue":[q[2]||(q[2]=T=>w.year=T),N],options:g,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(f(),O(de,{key:0,modelValue:w.month,"onUpdate:modelValue":[q[3]||(q[3]=T=>w.month=T),N],options:x,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:w.type,"onUpdate:modelValue":[q[4]||(q[4]=T=>w.type=T),N],options:j,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:w.account_id,"onUpdate:modelValue":[q[5]||(q[5]=T=>w.account_id=T),N],label:"Akun",options:y,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":q[6]||(q[6]=T=>w.search=T),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Au=Object.freeze(Object.defineProperty({__proto__:null,default:Uu},Symbol.toStringTag,{value:"Module"})),ju={class:"q-gutter-sm"},Eu={class:"col col-md-6 q-pa-xs"},Mu={__name:"Editor",setup(m){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=ze({id:n.props.data.id,name:n.props.data.name,description:n.props.data.description}),s=()=>Xe({form:o,url:route("admin.operational-cost-category.save")});return(r,b)=>{const p=Y("i-head"),u=Y("authenticated-layout");return f(),h(Q,null,[e(p,{title:d}),e(u,null,{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",ju,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=c=>r.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Eu,[e(Fe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=c=>a(o).id=c)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":b[2]||(b[2]=c=>a(o).name=c),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[c=>c&&c.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).description,"onUpdate:modelValue":b[3]||(b[3]=c=>a(o).description=c),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:b[4]||(b[4]=c=>a(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Nu=Object.freeze(Object.defineProperty({__proto__:null,default:Mu},Symbol.toStringTag,{value:"Module"})),Bu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},zu={class:"q-pa-xs"},Fu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Lu={key:0,class:"text-grey-8"},Hu={class:"flex justify-end"},ll="Kategori Biaya Operasional",Ku={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=Pe({search:"",...Ue()}),c=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{g()});const y=j=>at({message:`Hapus Kategori Biaya ${j.name}?`,url:route("admin.operational-cost-category.delete",j.id),fetchItemsCallback:g,loading:s}),g=(j=null)=>{Ae({pagination:c,filter:u,props:j,rows:o,url:route("admin.operational-cost-category.data"),loading:s,tableRef:r})},x=G(()=>n.screen.gt.sm?v:v.filter(j=>j.name==="name"||j.name==="action"));return(j,w)=>{const D=Y("i-head"),C=Y("authenticated-layout");return f(),h(Q,null,[e(D,{title:ll}),e(C,null,Le({title:l(()=>[_(i(ll))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=$=>d.value=!d.value)},null,8,["icon"]),j.$can("admin.operational-cost-category.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=$=>a(Z).get(j.route("admin.operational-cost-category.add")))})):k("",!0)]),default:l(()=>[t("div",zu,[e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",style:Ee({height:a(p)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:c.value,"onUpdate:pagination":w[4]||(w[4]=$=>c.value=$),filter:u.search,loading:s.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:$,message:R,filter:N})=>[t("div",Fu,[t("span",null,i(R)+" "+i(N?" with term "+N:""),1)])]),body:l($=>[e(qe,{props:$},{default:l(()=>[e(H,{key:"name",props:$,class:"wrap-column"},{default:l(()=>[_(i($.row.name)+" ",1),a(n).screen.gt.sm?k("",!0):(f(),h(Q,{key:0},[$.row.description?(f(),h("div",Lu,[e(S,{name:"description"}),_(" "+i($.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(H,{key:"description",props:$,class:"wrap-column"},{default:l(()=>[_(i($.row.description),1)]),_:2},1032,["props"]),e(H,{key:"action",props:$},{default:l(()=>[t("div",Hu,[j.$can("admin.operational-cost-category.add")||j.$can("admin.operational-cost-category.edit")||j.$can("admin.operational-cost-category.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[3]||(w[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[j.$can("admin.operational-cost-category.add")?ee((f(),O(le,{key:0,clickable:"",onClick:J(R=>a(Z).get(j.route("admin.operational-cost-category.duplicate",$.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>[...w[5]||(w[5]=[_("Duplikat",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),j.$can("admin.operational-cost-category.edit")?ee((f(),O(le,{key:1,clickable:"",onClick:J(R=>a(Z).get(j.route("admin.operational-cost-category.edit",$.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...w[6]||(w[6]=[_("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),j.$can("admin.operational-cost-category.delete")?ee((f(),O(le,{key:2,onClick:J(R=>y($.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...w[7]||(w[7]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Bu,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":w[2]||(w[2]=$=>u.search=$),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Yu=Object.freeze(Object.defineProperty({__proto__:null,default:Ku},Symbol.toStringTag,{value:"Module"})),Wu={class:"q-gutter-sm"},Qu={class:"col col-md-6 q-pa-xs"},Ju={class:"row"},Gu={class:"detail"},Xu={key:0},Zu={key:1},em={key:2},tm={key:3},am={colspan:"3",class:"bg-white"},ol="Rincian Biaya Operasional",lm={__name:"Detail",setup(m){const n=fe();return(d,o)=>{const s=Y("i-head"),r=Y("authenticated-layout");return f(),h(Q,null,[e(s,{title:ol}),e(r,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Wu,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>d.$inertia.get(d.route("admin.operational-cost.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},i(ol))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Qu,[t("div",Ju,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[21]||(o[21]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",Gu,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(a(Ht)(a(n).props.data.date)),1)]),a(n).props.data.finance_account?(f(),h("tr",Xu,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[_(i(a(n).props.data.finance_account.name)+" ",1),a(n).props.data.finance_account.type==="bank"?(f(),h(Q,{key:0},[_(" Rek "+i(a(n).props.data.finance_account.bank)+" an "+i(a(n).props.data.finance_account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),_(" "+i(a(n).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),a(n).props.data.category?(f(),h("tr",Zu,[o[8]||(o[8]=t("td",null,"Kategori",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.category.name),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Deskripsi",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.description),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Jumlah",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,"Rp. "+i(a(K)(a(n).props.data.amount)),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),a(n).props.data.creator?(f(),h("tr",em,[o[16]||(o[16]=t("td",null,"Dibuat",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(f(),h("tr",tm,[o[18]||(o[18]=t("td",null,"Diperbarui",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(f(),h(Q,{key:4},[o[20]||(o[20]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",am,[e(Yt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Ee([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},om=Object.freeze(Object.defineProperty({__proto__:null,default:lm},Symbol.toStringTag,{value:"Module"})),nm={class:"row items-center justify-end"},sm={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(m,{emit:n}){const d=m,o=n,s=V(""),r=V(""),b=c=>{let v=!0;const y=d.minDate?nt.formatDate(d.minDate,"YYYY/MM/DD"):null,g=d.maxDate?nt.formatDate(d.maxDate,"YYYY/MM/DD"):null;return y&&(v=v&&nt.isBetweenDates(c,y,"2999/01/01",{inclusiveFrom:!0})),g&&(v=v&&nt.isBetweenDates(c,"1900/01/01",g,{inclusiveTo:!0})),v},p=G(()=>[c=>!!c||"Tanggal harus diisi",c=>{const v=nt.extractDate(c,d.displayFormat);if(!v)return"Format tanggal tidak valid";v.setHours(0,0,0,0);const y=d.minDate?new Date(d.minDate):null;y&&y.setHours(0,0,0,0);const g=d.maxDate?new Date(d.maxDate):null;return g&&g.setHours(0,0,0,0),y&&v<y?`Tanggal tidak boleh kurang dari ${nt.formatDate(d.minDate,d.displayFormat)}`:g&&v>g?`Tanggal tidak boleh lebih dari ${nt.formatDate(d.maxDate,d.displayFormat)}`:(o("update:modelValue",v),!0)}]);Me(()=>d.modelValue,c=>{c instanceof Date?(r.value=nt.formatDate(c,"YYYY/MM/DD"),s.value=nt.formatDate(c,d.displayFormat)):(r.value="",s.value="")},{immediate:!0});const u=c=>{const v=c!==null?new Date(c):null;o("update:modelValue",v),s.value=v?nt.formatDate(v,d.displayFormat):null};return(c,v)=>(f(),O(oe,{modelValue:s.value,"onUpdate:modelValue":v[1]||(v[1]=y=>s.value=y),label:d.label,readonly:d.readonly,disable:d.disable,error:d.error,"error-message":d.errorMessage,mask:d.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:p.value},{append:l(()=>[e(U,{icon:"event",disable:d.disable||d.readonly,flat:"",rounded:"",dense:""},{default:l(()=>[e(bn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(vn,{modelValue:r.value,"onUpdate:modelValue":[v[0]||(v[0]=y=>r.value=y),u],options:b},{default:l(()=>[t("div",nm,[ee(e(U,{label:"Close",color:"primary",flat:""},null,512),[[ue]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},$a=_t(sm,[["__scopeId","data-v-b418ccfb"]]);function eo(m,n=!1){const d=m.map(b=>({value:b.id,label:b.name})),o=n?[{value:"all",label:"Semua"},...d]:d,s=V([...o]);return{filteredCostCategories:s,filterCostCategory:(b,p)=>{const u=b.toLowerCase();p(()=>{s.value=o.filter(c=>c.label.toLowerCase().includes(u))})},costCategoryOptions:o}}const rm={class:"q-gutter-sm"},im={class:"col col-md-6 q-pa-xs"},dm={__name:"Editor",setup(m){var y;const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=eo(n.props.categories),s=n.props.finance_accounts.map(g=>({label:g.name,value:g.id})),r=V(o),b=V([...r.value]),p=ze({id:n.props.data.id,finance_account_id:n.props.data.finance_account_id??null,category_id:n.props.data.category_id??null,date:new Date(n.props.data.date),description:n.props.data.description,notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((y=n.props.data)==null?void 0:y.image_path)??null,image:null}),u=()=>{Jt(p,{date:"YYYY-MM-DD"}),Xe({form:p,url:route("admin.operational-cost.save")})},c=(g,x)=>{x(()=>{b.value=r.value.filter(j=>j.label.toLowerCase().includes(g.toLowerCase()))})},v=()=>{p.image_path=null};return(g,x)=>{const j=Y("i-head"),w=Y("authenticated-layout");return f(),h(Q,null,[e(j,{title:d}),e(w,null,{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",rm,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:x[0]||(x[0]=D=>g.$inertia.get(g.route("admin.operational-cost.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",im,[e(Fe,{class:"row",onSubmit:J(u,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":x[1]||(x[1]=D=>a(p).id=D)},null,512),[[dt,a(p).id]]),e(de,{autofocus:"",modelValue:a(p).category_id,"onUpdate:modelValue":x[2]||(x[2]=D=>a(p).category_id=D),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:b.value,"map-options":"","emit-value":"",onFilter:c,error:!!a(p).errors.category_id,disable:a(p).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(le,null,{default:l(()=>[e(M,null,{default:l(()=>[...x[10]||(x[10]=[_("Kategori tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e($a,{modelValue:a(p).date,"onUpdate:modelValue":x[3]||(x[3]=D=>a(p).date=D),label:"Tanggal",error:!!a(p).errors.date,disable:a(p).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(oe,{modelValue:a(p).description,"onUpdate:modelValue":x[4]||(x[4]=D=>a(p).description=D),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!a(p).errors.description,disable:a(p).processing,"error-message":a(p).errors.description,rules:[D=>D&&D.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(De,{modelValue:a(p).amount,"onUpdate:modelValue":x[5]||(x[5]=D=>a(p).amount=D),label:"Jumlah",lazyRules:"",disable:a(p).processing,error:!!a(p).errors.amount,errorMessage:a(p).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(de,{class:"custom-select",modelValue:a(p).finance_account_id,"onUpdate:modelValue":x[6]||(x[6]=D=>a(p).finance_account_id=D),label:"Sumber Dana",options:a(s),"map-options":"","emit-value":"",clearable:"",errorMessage:a(p).errors.finance_account_id,error:!!a(p).errors.finance_account_id,disable:a(p).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(oe,{modelValue:a(p).notes,"onUpdate:modelValue":x[7]||(x[7]=D=>a(p).notes=D),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(p).processing,error:!!a(p).errors.notes,"error-message":a(p).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ha,{modelValue:a(p).image,"onUpdate:modelValue":x[8]||(x[8]=D=>a(p).image=D),"initial-image-path":a(p).image_path,disabled:a(p).processing,error:!!a(p).errors.image||!!a(p).errors.image_path,"error-message":a(p).errors.image||a(p).errors.image_path,onImageCleared:v},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(p).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(p).processing,onClick:x[9]||(x[9]=D=>a(Z).get(g.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},um=Object.freeze(Object.defineProperty({__proto__:null,default:dm},Symbol.toStringTag,{value:"Module"})),mm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},cm={class:"q-pa-xs"},pm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},fm={key:0},gm={key:1},bm={key:0},vm={class:"flex justify-end no-wrap"},nl="Biaya Operasional",_m={__name:"Index",setup(m){const n=fe(),d=$e(),o=V(!1),s=V(null),r=V(null),b=Ke(r),p=V(null),u=V(!1),c=V([]),v=V(!0),y=new Date().getFullYear(),g=new Date().getMonth()+1,x=[{label:"Semua Tahun",value:null},{label:`${y}`,value:y},...Dt(y-2,y-1).reverse()],j=[{value:null,label:"Semua Bulan"},...Ut()],{costCategoryOptions:w}=eo(n.props.categories),D=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...w],{accountOptions:C}=_n(n.props.finance_accounts),$=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...C],R=Pe({search:"",category_id:"all",year:y,month:g,...Ue()}),N=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),P=[{name:"id",label:d.screen.lt.md?"Item":"ID",field:"id",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"account_id",label:"Akun",field:"account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{E()});const A=W=>at({message:`Hapus Biaya ${W.description}?`,url:route("admin.operational-cost.delete",W.id),fetchItemsCallback:E,loading:v}),E=(W=null)=>{Ae({pagination:N,filter:R,props:W,rows:c,url:route("admin.operational-cost.data"),loading:v,tableRef:s})},B=()=>{E()},z=G(()=>d.screen.gt.sm?P:P.filter(W=>W.name==="id"||W.name==="action"));Me(()=>R.year,W=>{W===null&&(R.month=null)});const q=W=>{p.value=W,u.value=!0};return(W,te)=>{const T=Y("i-head"),I=Y("authenticated-layout");return f(),h(Q,null,[e(T,{title:nl}),e(I,null,Le({title:l(()=>[_(i(nl))]),"right-button":l(()=>[e(U,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:te[0]||(te[0]=X=>o.value=!o.value)},null,8,["icon"]),W.$can("admin.operational-cost.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:te[1]||(te[1]=X=>a(Z).get(W.route("admin.operational-cost.add")))})):k("",!0)]),default:l(()=>[t("div",cm,[e(Te,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:N.value,"onUpdate:pagination":te[8]||(te[8]=X=>N.value=X),filter:R.search,loading:v.value,columns:z.value,rows:c.value,"rows-per-page-options":[10,25,50],style:Ee({height:a(b)}),onRequest:E,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:X,message:ge,filter:ne})=>[t("div",pm,[t("span",null,i(ge)+" "+i(ne?" with term "+ne:""),1)])]),body:l(X=>[e(qe,{props:X,class:"cursor-pointer",onClick:J(ge=>a(Z).get(W.route("admin.operational-cost.detail",{id:X.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:X,class:"wrap-column"},{default:l(()=>[a(d).screen.gt.sm?k("",!0):(f(),h(Q,{key:0},[_(" ID: ")],64)),_(" "+i(X.row.id)+" ",1),a(d).screen.gt.sm?k("",!0):(f(),h(Q,{key:1},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+i(a(Ht)(X.row.date)),1)]),X.row.finance_account?(f(),h("div",fm,[e(S,{name:"wallet",class:"inline-icon"}),_(" "+i(X.row.finance_account.name),1)])):k("",!0),X.row.category?(f(),h("div",gm,[e(S,{name:"category",class:"inline-icon"}),_(" "+i(X.row.category.name),1)])):k("",!0),e(we,{icon:"description",text:X.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+i(a(K)(X.row.amount)),1)]),e(we,{icon:"notes",text:X.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(H,{key:"date",props:X,class:"wrap-column"},{default:l(()=>[_(i(a(Ht)(X.row.date)),1)]),_:2},1032,["props"]),e(H,{key:"account_id",props:X,class:"wrap-column"},{default:l(()=>[_(i(X.row.finance_account?X.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(H,{key:"category_id",props:X},{default:l(()=>[X.row.category?(f(),h("div",bm,i(X.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"description",props:X},{default:l(()=>[e(we,{text:X.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"amount",props:X},{default:l(()=>[_(i(a(K)(X.row.amount)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:X},{default:l(()=>[e(we,{text:X.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:X},{default:l(()=>[t("div",vm,[e(U,{icon:"image",color:"primary",dense:"",flat:"",disable:X.row.image_path===null||X.row.image_path==="",onClick:J(ge=>q(X.row.image_path),["stop"])},{default:l(()=>[X.row.image_path!=null?(f(),O(sa,{key:0},{default:l(()=>[...te[10]||(te[10]=[_(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),W.$can("admin.operational-cost.add")||W.$can("admin.operational-cost.edit")||W.$can("admin.operational-cost.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:te[7]||(te[7]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[W.$can("admin.operational-cost.add")?ee((f(),O(le,{key:0,clickable:"",onClick:J(ge=>a(Z).get(W.route("admin.operational-cost.duplicate",X.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>[...te[11]||(te[11]=[_(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),W.$can("admin.operational-cost.edit")?ee((f(),O(le,{key:1,clickable:"",onClick:J(ge=>a(Z).get(W.route("admin.operational-cost.edit",X.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...te[12]||(te[12]=[_("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),W.$can("admin.operational-cost.delete")?ee((f(),O(le,{key:2,onClick:J(ge=>A(X.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...te[13]||(te[13]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(ra,{modelValue:u.value,"onUpdate:modelValue":te[9]||(te[9]=X=>u.value=X),imageUrl:`/${p.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:r},{default:l(()=>[t("div",mm,[e(de,{modelValue:R.year,"onUpdate:modelValue":[te[2]||(te[2]=X=>R.year=X),B],options:x,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:R.month,"onUpdate:modelValue":[te[3]||(te[3]=X=>R.month=X),B],options:j,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:R.year===null},null,8,["modelValue","disable"]),e(de,{modelValue:R.category_id,"onUpdate:modelValue":[te[4]||(te[4]=X=>R.category_id=X),B],options:D,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:R.finance_account_id,"onUpdate:modelValue":[te[5]||(te[5]=X=>R.finance_account_id=X),B],options:$,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:R.search,"onUpdate:modelValue":te[6]||(te[6]=X=>R.search=X),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ym=Object.freeze(Object.defineProperty({__proto__:null,default:_m},Symbol.toStringTag,{value:"Module"})),km={class:"q-gutter-sm"},wm={class:"col col-md-6 q-pa-xs"},hm={__name:"Editor",setup(m){const n=$e(),d=fe(),o=(d.props.data.id?"Edit":"Tambah")+" Kategori Produk",s=ze({id:d.props.data.id,name:d.props.data.name,description:d.props.data.description}),r=()=>Xe({form:s,url:route("admin.product-category.save")});return(b,p)=>{const u=Y("i-head"),c=Y("authenticated-layout");return f(),h(Q,null,[e(u,{title:o}),e(c,{"show-drawer-button":!a(n).screen.lt.md},Le({title:l(()=>[_(i(o))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",wm,[e(Fe,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=v=>a(s).id=v)},null,512),[[dt,a(s).id]]),e(oe,{autofocus:"",modelValue:a(s).name,"onUpdate:modelValue":p[2]||(p[2]=v=>a(s).name=v),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(s).errors.name,disable:a(s).processing,"error-message":a(s).errors.name,rules:[v=>v&&v.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(s).description,"onUpdate:modelValue":p[3]||(p[3]=v=>a(s).description=v),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.description,"error-message":a(s).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing,loading:a(s).processing},null,8,["disable","loading"]),e(U,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:p[4]||(p[4]=v=>a(s).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(n).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",km,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=v=>b.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},$m=Object.freeze(Object.defineProperty({__proto__:null,default:hm},Symbol.toStringTag,{value:"Module"})),xm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Sm={class:"q-pa-xs"},Vm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},qm={key:0,class:"text-grey-8"},Cm={class:"flex justify-end"},sl="Kategori Produk",Tm={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=Pe({search:"",...Ue()}),c=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{g()});const y=j=>at({message:`Hapus Kategori ${j.name}?`,url:route("admin.product-category.delete",j.id),fetchItemsCallback:g,loading:s}),g=(j=null)=>{Ae({pagination:c,filter:u,props:j,rows:o,url:route("admin.product-category.data"),loading:s,tableRef:r})},x=G(()=>n.screen.gt.sm?v:v.filter(j=>j.name==="name"||j.name==="action"));return(j,w)=>{const D=Y("i-head"),C=Y("authenticated-layout");return f(),h(Q,null,[e(D,{title:sl}),e(C,null,Le({title:l(()=>[_(i(sl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=$=>d.value=!d.value)},null,8,["icon"]),j.$can("admin.product-category.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=$=>a(Z).get(j.route("admin.product-category.add")))})):k("",!0)]),default:l(()=>[t("div",Sm,[e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:c.value,"onUpdate:pagination":w[4]||(w[4]=$=>c.value=$),filter:u.search,loading:s.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ee({height:a(p)}),onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:$,message:R,filter:N})=>[t("div",Vm,[t("span",null,i(R)+" "+i(N?" with term "+N:""),1)])]),body:l($=>[e(qe,{props:$},{default:l(()=>[e(H,{key:"name",props:$,class:"wrap-column"},{default:l(()=>[_(i($.row.name)+" ",1),a(n).screen.gt.sm?k("",!0):(f(),h(Q,{key:0},[$.row.description?(f(),h("div",qm,[e(S,{name:"description"}),_(" "+i($.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(H,{key:"description",props:$,class:"wrap-column"},{default:l(()=>[_(i($.row.description),1)]),_:2},1032,["props"]),e(H,{key:"action",props:$},{default:l(()=>[t("div",Cm,[j.$can("admin.product-category.add")||j.$can("admin.product-category.edit")||j.$can("admin.product-category.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[3]||(w[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[j.$can("admin.product-category.add")?ee((f(),O(le,{key:0,clickable:"",onClick:J(R=>a(Z).get(j.route("admin.product-category.duplicate",$.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>[...w[5]||(w[5]=[_("Duplikat",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),j.$can("admin.product-category.edit")?ee((f(),O(le,{key:1,clickable:"",onClick:J(R=>a(Z).get(j.route("admin.product-category.edit",$.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...w[6]||(w[6]=[_("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),j.$can("admin.product-category.delete")?ee((f(),O(le,{key:2,onClick:J(R=>y($.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...w[7]||(w[7]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",xm,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":w[2]||(w[2]=$=>u.search=$),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Pm=Object.freeze(Object.defineProperty({__proto__:null,default:Tm},Symbol.toStringTag,{value:"Module"})),Om={class:"detail"},Im={key:0},Rm={key:1},Dm={key:2},Um={class:"detail"},Am={class:"detail"},jm={key:0},Em={key:0},Mm={key:0},Nm={key:0},Bm={class:"detail"},to={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(m){const n=m;$e();const d=o=>`${o>0?K((o-n.product.cost)/o*100,2):0}%`;return(o,s)=>{const r=Y("i-link");return f(),h("div",null,[s[42]||(s[42]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",Om,[t("tbody",null,[t("tr",null,[s[0]||(s[0]=t("td",{style:{width:"120px"}},"ID",-1)),s[1]||(s[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(m.product.formatted_id),1)]),t("tr",null,[s[2]||(s[2]=t("td",null,"Nama Produk",-1)),s[3]||(s[3]=t("td",null,":",-1)),t("td",null,i(m.product.name),1)]),t("tr",null,[s[4]||(s[4]=t("td",null,"Barcode",-1)),s[5]||(s[5]=t("td",null,":",-1)),t("td",null,i(m.product.barcode),1)]),t("tr",null,[s[6]||(s[6]=t("td",null,"Jenis Produk",-1)),s[7]||(s[7]=t("td",null,":",-1)),t("td",null,i(o.$CONSTANTS.PRODUCT_TYPES[m.product.type]),1)]),t("tr",null,[s[8]||(s[8]=t("td",null,"Kategori",-1)),s[9]||(s[9]=t("td",null,":",-1)),t("td",null,i(m.product.category?m.product.category.name:"--Tidak memiliki kategori--"),1)]),o.$can("admin.product:view-supplier")?(f(),h("tr",Im,[s[10]||(s[10]=t("td",null,"Supplier",-1)),s[11]||(s[11]=t("td",null,":",-1)),t("td",null,[m.product.supplier?(f(),O(r,{key:0,href:o.route("admin.supplier.detail",{id:m.product.supplier.id})},{default:l(()=>[_(i(m.product.supplier.name),1)]),_:1},8,["href"])):(f(),h(Q,{key:1},[_(i("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[s[12]||(s[12]=t("td",null,"Status",-1)),s[13]||(s[13]=t("td",null,":",-1)),t("td",null,i(m.product.active?"Aktif":"Tidak Aktif"),1)]),m.product.created_at?(f(),h("tr",Rm,[s[15]||(s[15]=t("td",null,"Dibuat Oleh",-1)),s[16]||(s[16]=t("td",null,":",-1)),t("td",null,[m.product.creator?(f(),h(Q,{key:0},[e(r,{href:o.route("admin.user.detail",{id:m.product.creator})},{default:l(()=>[_(i(m.product.creator.username),1)]),_:1},8,["href"]),s[14]||(s[14]=_(" - ",-1))],64)):k("",!0),_(" "+i(a(_e)(m.product.created_at)),1)])])):k("",!0),m.product.updater?(f(),h("tr",Dm,[s[18]||(s[18]=t("td",null,"Diperbarui oleh",-1)),s[19]||(s[19]=t("td",null,":",-1)),t("td",null,[m.product.updater?(f(),h(Q,{key:0},[e(r,{href:o.route("admin.user.detail",{id:m.product.updater})},{default:l(()=>[_(i(m.product.updater.username),1)]),_:1},8,["href"]),s[17]||(s[17]=_(" - ",-1))],64)):k("",!0),_(" "+i(a(_e)(m.product.updated_at)),1)])])):k("",!0)])]),s[43]||(s[43]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",Um,[t("tbody",null,[t("tr",null,[s[20]||(s[20]=t("td",{style:{width:"120px"}},"Stok",-1)),s[21]||(s[21]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(K)(m.product.stock))+" "+i(m.product.uom),1)]),t("tr",null,[s[22]||(s[22]=t("td",null,"Stok Minimum",-1)),s[23]||(s[23]=t("td",null,":",-1)),t("td",null,i(a(K)(m.product.min_stock))+" "+i(m.product.uom),1)]),t("tr",null,[s[24]||(s[24]=t("td",null,"Stok Maksimum",-1)),s[25]||(s[25]=t("td",null,":",-1)),t("td",null,i(a(K)(m.product.max_stock))+" "+i(m.product.uom),1)]),t("tr",null,[s[26]||(s[26]=t("td",null,"Barcode",-1)),s[27]||(s[27]=t("td",null,":",-1)),t("td",null,i(m.product.barcode),1)])])]),s[44]||(s[44]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",Am,[t("tbody",null,[t("tr",null,[s[28]||(s[28]=t("td",null,"Opsi Harga",-1)),s[29]||(s[29]=t("td",null,":",-1)),t("td",null,i(m.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),o.$can("admin.product:view-cost")?(f(),h("tr",jm,[s[30]||(s[30]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),s[31]||(s[31]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+i(a(K)(m.product.cost)),1)])):k("",!0),t("tr",null,[s[32]||(s[32]=t("td",null,"Harga Eceran",-1)),s[33]||(s[33]=t("td",null,":",-1)),t("td",null,[_(" Rp. "+i(a(K)(m.product.price))+" ",1),o.$can("admin.product:view-cost")?(f(),h("span",Em," ("+i(d(m.product.price))+") ",1)):k("",!0)])]),t("tr",null,[s[34]||(s[34]=t("td",null,"Harga Partai",-1)),s[35]||(s[35]=t("td",null,":",-1)),t("td",null,[_(" Rp. "+i(a(K)(m.product.price_2))+" ",1),o.$can("admin.product:view-cost")?(f(),h("span",Mm," ("+i(d(m.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[s[36]||(s[36]=t("td",null,"Harga Grosir",-1)),s[37]||(s[37]=t("td",null,":",-1)),t("td",null,[_(" Rp. "+i(a(K)(m.product.price_3))+" ",1),o.$can("admin.product:view-cost")?(f(),h("span",Nm," ("+i(d(m.product.price_3))+") ",1)):k("",!0)])])])]),s[45]||(s[45]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",Bm,[t("tbody",null,[t("tr",null,[s[38]||(s[38]=t("td",{style:{width:"120px"}},"Deskirpsi",-1)),s[39]||(s[39]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(m.product.description),1)]),t("tr",null,[s[40]||(s[40]=t("td",null,"Catatan",-1)),s[41]||(s[41]=t("td",null,":",-1)),t("td",null,i(m.product.notes),1)])])])])}}},zm=Object.freeze(Object.defineProperty({__proto__:null,default:to},Symbol.toStringTag,{value:"Module"})),Fm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Lm={key:0},ao={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(m){const n=m,d=$e(),o=V([]),s=V(!0),r=Pe({...Ue()}),b=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let p=[{name:"id",label:d.screen.lt.sm?"Item":"#",field:"id",align:"left",sortable:!0},{name:"created_at",label:"Waktu",field:"created_at",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"quantity_before",label:"Qty Awal",field:"quantity_before",align:"right"},{name:"quantity_after",label:"Qty Akhir",field:"quantity_after",align:"right"},{name:"quantity",label:"Selisih",field:"quantity",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{u()});const u=(v=null)=>Ae({pagination:b,filter:r,props:v,rows:o,url:route("admin.stock-movement.data",{product_id:n.productId}),loading:s}),c=G(()=>d.screen.gt.sm?p:p.filter(v=>v.name==="id"||v.name==="quantity"));return(v,y)=>(f(),O(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:b.value,"onUpdate:pagination":y[0]||(y[0]=g=>b.value=g),filter:r.search,loading:s.value,columns:c.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:u,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:x,filter:j})=>[t("div",Fm,[t("span",null,i(x)+" "+i(j?" with term "+j:""),1)])]),body:l(g=>[e(qe,{props:g},{default:l(()=>[e(H,{key:"id",props:g},{default:l(()=>[t("div",null,[a(d).screen.lt.sm?(f(),h(Q,{key:0},[t("div",null,[e(ut,null,{default:l(()=>[_(i(v.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[g.row.ref_type]),1)]),_:2},1024)]),e(S,{class:"inline-icon",name:"tag"})],64)):k("",!0),_(" "+i(g.row.formatted_id),1)]),a(d).screen.lt.sm?(f(),h(Q,{key:0},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+i(a(_e)(g.row.created_at)),1)]),t("div",{class:xe(g.row.quantity>0?"text-positive":"text-negative")},[e(S,{class:"inline-icon",name:"compare_arrows"}),_(" "+i(a(K)(g.row.quantity_before))+" "+i(g.row.uom)+" → "+i(a(K)(g.row.quantity_after))+" "+i(g.row.uom),1)],2),e(we,{text:g.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"created_at",props:g},{default:l(()=>[_(i(a(_e)(g.row.created_at)),1)]),_:2},1032,["props"]),e(H,{key:"type",props:g},{default:l(()=>[_(i(v.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[g.row.ref_type])+" ",1),g.row.ref?(f(),h("span",Lm,i(g.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"quantity_before",props:g},{default:l(()=>[_(i(a(K)(g.row.quantity_before))+" "+i(g.row.uom),1)]),_:2},1032,["props"]),e(H,{key:"quantity_after",props:g},{default:l(()=>[_(i(a(K)(g.row.quantity_after))+" "+i(g.row.uom),1)]),_:2},1032,["props"]),e(H,{key:"quantity",props:g,class:xe(g.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[_(i(a(K)(g.row.quantity))+" "+i(g.row.uom),1)]),_:2},1032,["props","class"]),e(H,{key:"notes",props:g},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Hm=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"})),Km={class:"q-gutter-sm"},Ym={class:"q-gutter-sm"},Wm={class:"row justify-center"},Qm={class:"col col-lg-6 q-pa-xs"},Jm={class:"row"},Gm={__name:"Detail",setup(m){const n=fe(),d=`Rincian Produk #${n.props.data.id}`,o=V("main");return(s,r)=>{const b=Y("i-head"),p=Y("authenticated-layout");return f(),h(Q,null,[e(b,{title:d}),e(p,{"show-drawer-button":!0},{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",Km,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=u=>s.$goBack())})])]),"right-button":l(()=>[t("div",Ym,[s.$can("admin.product.edit")?(f(),O(U,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:r[1]||(r[1]=u=>a(Z).get(s.route("admin.product.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[t("div",Wm,[t("div",Qm,[t("div",Jm,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(At,{modelValue:o.value,"onUpdate:modelValue":r[2]||(r[2]=u=>o.value=u),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(st,{name:"main",label:"Info Utama"}),e(st,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(jt,{modelValue:o.value,"onUpdate:modelValue":r[3]||(r[3]=u=>o.value=u),animated:""},{default:l(()=>[e(rt,{name:"main"},{default:l(()=>[e(to,{product:a(n).props.data},null,8,["product"])]),_:1}),e(rt,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(ao,{"product-id":a(n).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},Xm=Object.freeze(Object.defineProperty({__proto__:null,default:Gm},Symbol.toStringTag,{value:"Module"}));function xa(m,n=!1){const d=m.map(b=>({value:b.id,label:b.name})),o=n?[{value:"all",label:"Semua"},...d]:d,s=V([...o]);return{filteredCategories:s,filterCategories:(b,p)=>{const u=b.toLowerCase();p(()=>{s.value=o.filter(c=>c.label.toLowerCase().includes(u))})},categories:o}}function Sa(m,n=!1){const d=m.map(b=>({value:b.id,label:"#"+b.id+" - "+b.name})),o=n?[{value:"all",label:"Semua"},...d]:d,s=V([...o]);return{filteredSuppliers:s,filterSupplierFn:(b,p)=>{const u=b.toLowerCase();p(()=>{s.value=o.filter(c=>c.label.toLowerCase().includes(u))})},suppliers:o}}const Zm={class:"q-gutter-sm"},ec={class:"col col-md-6 q-pa-xs"},tc={__name:"Editor",setup(m){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Produk",o=et(window.CONSTANTS.PRODUCT_TYPES),s=ze({id:n.props.data.id,category_id:n.props.data.category_id,supplier_id:n.props.data.supplier_id,type:n.props.data.type||"",name:n.props.data.name||"",barcode:n.props.data.barcode||"",description:n.props.data.description||"",stock:parseFloat(n.props.data.stock)||0,min_stock:parseFloat(n.props.data.min_stock)||0,max_stock:parseFloat(n.props.data.max_stock)||0,uom:n.props.data.uom||"",cost:parseFloat(n.props.data.cost)||0,price:parseFloat(n.props.data.price)||0,price_2:parseFloat(n.props.data.price_2)||0,price_3:parseFloat(n.props.data.price_3)||0,active:!!n.props.data.active,price_editable:!!n.props.data.price_editable,notes:n.props.data.notes||""}),r=()=>Xe({form:s,url:route("admin.product.save")}),{filteredCategories:b,filterCategories:p}=xa(n.props.categories),{filteredSuppliers:u,filterSuppliers:c}=Sa(n.props.suppliers),v=G(()=>s.price>0?(s.price-s.cost)/s.price*100:0);return(y,g)=>{const x=Y("i-head"),j=Y("authenticated-layout");return f(),h(Q,null,[e(x,{title:d}),e(j,{"show-drawer-button":!0},{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",Zm,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=w=>y.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ec,[e(Fe,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=w=>a(s).id=w)},null,512),[[dt,a(s).id]]),g[23]||(g[23]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(de,{autofocus:"",modelValue:a(s).type,"onUpdate:modelValue":g[2]||(g[2]=w=>a(s).type=w),class:"custom-select",options:a(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["modelValue","options"]),e(oe,{modelValue:a(s).name,"onUpdate:modelValue":g[3]||(g[3]=w=>a(s).name=w),modelModifiers:{trim:!0},label:"Nama Produk","lazy-rules":"",error:!!a(s).errors.name,disable:a(s).processing,"error-message":a(s).errors.name,rules:[w=>w&&w.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(s).description,"onUpdate:modelValue":g[4]||(g[4]=w=>a(s).description=w),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.description,"error-message":a(s).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(s).category_id,"onUpdate:modelValue":g[5]||(g[5]=w=>a(s).category_id=w),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:a(b),"map-options":"","emit-value":"",onFilter:a(p),"option-label":"label","option-value":"value",error:!!a(s).errors.category_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(le,null,{default:l(()=>[e(M,null,{default:l(()=>[...g[21]||(g[21]=[_("Kategori tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),y.$can("admin.product:view-supplier")?(f(),O(de,{key:0,modelValue:a(s).supplier_id,"onUpdate:modelValue":g[6]||(g[6]=w=>a(s).supplier_id=w),label:"Supplier","use-input":"","input-debounce":"300",clearable:"",options:a(u),"map-options":"","emit-value":"",onFilter:a(c),"option-label":"label","option-value":"value",error:!!a(s).errors.supplier_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(le,null,{default:l(()=>[e(M,null,{default:l(()=>[...g[22]||(g[22]=[_("Supplier tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(qt,{modelValue:a(s).active,"onUpdate:modelValue":g[7]||(g[7]=w=>a(s).active=w),disable:a(s).processing,label:"Aktif"},null,8,["modelValue","disable"]),g[24]||(g[24]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),e(oe,{modelValue:a(s).barcode,"onUpdate:modelValue":g[8]||(g[8]=w=>a(s).barcode=w),modelModifiers:{trim:!0},label:"Barcode","lazy-rules":"",error:!!a(s).errors.barcode,disable:a(s).processing,"error-message":a(s).errors.barcode,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(s).uom,"onUpdate:modelValue":g[9]||(g[9]=w=>a(s).uom=w),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!a(s).errors.uom,disable:a(s).processing,"error-message":a(s).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(De,{modelValue:a(s).stock,"onUpdate:modelValue":g[10]||(g[10]=w=>a(s).stock=w),label:"Stok",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.stock,errorMessage:a(s).errors.stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(De,{modelValue:a(s).min_stock,"onUpdate:modelValue":g[11]||(g[11]=w=>a(s).min_stock=w),label:"Stok Minimum",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.min_stock,errorMessage:a(s).errors.min_stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(De,{modelValue:a(s).max_stock,"onUpdate:modelValue":g[12]||(g[12]=w=>a(s).max_stock=w),label:"Stok Maksimum",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.max_stock,errorMessage:a(s).errors.max_stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),g[25]||(g[25]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Harga",-1)),e(qt,{modelValue:a(s).price_editable,"onUpdate:modelValue":g[13]||(g[13]=w=>a(s).price_editable=w),disable:a(s).processing,label:"Harga bisa diubah saat penjualan"},null,8,["modelValue","disable"]),y.$can("admin.product:view-cost")?(f(),O(De,{key:1,modelValue:a(s).cost,"onUpdate:modelValue":g[14]||(g[14]=w=>a(s).cost=w),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.cost,errorMessage:a(s).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),e(De,{modelValue:a(s).price,"onUpdate:modelValue":g[15]||(g[15]=w=>a(s).price=w),label:"Harga Eceran (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price,errorMessage:a(s).errors.price,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(De,{modelValue:a(s).price_2,"onUpdate:modelValue":g[16]||(g[16]=w=>a(s).price_2=w),label:"Harga Partai (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price_2,errorMessage:a(s).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(De,{modelValue:a(s).price_3,"onUpdate:modelValue":g[17]||(g[17]=w=>a(s).price_3=w),label:"Harga Grosir (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price_3,errorMessage:a(s).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),y.$can("admin.product:view-cost")?(f(),O(De,{key:2,modelValue:v.value,"onUpdate:modelValue":g[18]||(g[18]=w=>v.value=w),label:"Margin (%)",lazyRules:"",disable:a(s).processing,maxDecimals:2,"hide-bottom-space":""},null,8,["modelValue","disable"])):k("",!0),g[26]||(g[26]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Lainnya",-1)),e(oe,{modelValue:a(s).notes,"onUpdate:modelValue":g[19]||(g[19]=w=>a(s).notes=w),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.notes,"error-message":a(s).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:g[20]||(g[20]=w=>y.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ac=Object.freeze(Object.defineProperty({__proto__:null,default:tc},Symbol.toStringTag,{value:"Module"})),lc={class:"q-gutter-sm"},oc={class:"col col-md-6 q-pa-xs"},rl="Import Produk",nc={__name:"Import",setup(m){const n=ze({csv_file:null}),d=()=>{n.post(route("admin.product.import"),{onSuccess:()=>{n.reset()},onError:()=>{Be()},onFinish:()=>{n.clearErrors()}})};return(o,s)=>{const r=Y("i-head"),b=Y("authenticated-layout");return f(),h(Q,null,[e(r,{title:rl}),e(b,{"show-drawer-button":!0},{title:l(()=>[_(i(rl))]),"left-button":l(()=>[t("div",lc,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=p=>o.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",oc,[e(Fe,{class:"row",onSubmit:J(d,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[s[3]||(s[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),s[4]||(s[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(Wl,{modelValue:a(n).csv_file,"onUpdate:modelValue":s[1]||(s[1]=p=>a(n).csv_file=p),accept:".csv",label:"Pilih file CSV",error:!!a(n).errors.csv_file,"error-message":a(n).errors.csv_file,disable:a(n).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(n).processing||!a(n).csv_file,loading:a(n).processing},null,8,["disable","loading"]),e(U,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:s[2]||(s[2]=p=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(f(),O(Kt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[_(i(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(f(),O(Kt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[_(i(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},sc=Object.freeze(Object.defineProperty({__proto__:null,default:nc},Symbol.toStringTag,{value:"Module"})),rc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ic={class:"q-pa-xs"},dc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},uc={key:0},mc={key:1},cc={class:"flex justify-end"},pc={key:0},fc={key:1},gc={key:0},il="Produk",bc={__name:"Index",setup(m){const n=fe(),d=V(null),o=V(null),s=Ke(o),r=V(!1),b=[{value:"all",label:"Semua"},...et(window.CONSTANTS.PRODUCT_TYPES)],p=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],u=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],c=$e(),v=V(!1),y=V([]),g=V(!0),x=Pe({type:"all",category_id:"all",supplier_id:"all",status:"active",stock_status:"all",search:"",...Ue()}),j=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});let w=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price",label:"Harga",field:"price",align:"right"},{name:"action",align:"right"}];he(()=>{const q=new URLSearchParams(window.location.search).get("page");q&&(j.value.page=parseInt(q)),C()});const D=z=>at({message:`Hapus Produk ${z.name}?`,url:route("admin.product.delete",z.id),fetchItemsCallback:C,loading:g}),C=(z=null)=>{Ae({pagination:j,filter:x,props:z,rows:y,url:route("admin.product.data"),loading:g,tableRef:d})},$=()=>{C()},{filteredCategories:R,filterCategories:N}=xa(n.props.categories,!0),{filteredSuppliers:P,filterSupplierFn:A}=Sa(n.props.suppliers,!0),E=G(()=>{let z=[...w];return r.value||z.splice(2,1),c.screen.gt.sm?z:z.filter(q=>q.name==="name"||q.name==="action")}),B=z=>{console.log(window.location.href),Z.get(route("admin.product.detail",z.row.id))};return(z,q)=>{const W=Y("i-head"),te=Y("authenticated-layout");return f(),h(Q,null,[e(W,{title:il}),e(te,null,Le({title:l(()=>[_(i(il))]),"right-button":l(()=>[e(U,{icon:v.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:q[0]||(q[0]=T=>v.value=!v.value)},null,8,["icon"]),z.$can("admin.product.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:q[1]||(q[1]=T=>a(Z).get(z.route("admin.product.add")))})):k("",!0),z.$can("admin.product.import")||z.$can("admin.product:view-cost")?(f(),O(U,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:q[4]||(q[4]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[z.$can("admin.product.import")?ee((f(),O(le,{key:0,clickable:"",onClick:q[2]||(q[2]=T=>r.value=!r.value)},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:r.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(M,null,{default:l(()=>[_(i(r.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[se],[ue]]):k("",!0),z.$can("admin.product.import")?ee((f(),O(le,{key:1,clickable:"",onClick:q[3]||(q[3]=J(T=>a(Z).get(z.route("admin.product.import")),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"csv"})]),_:1}),e(M,null,{default:l(()=>[...q[13]||(q[13]=[_("Import",-1)])]),_:1})]),_:1})),[[se],[ue]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",ic,[e(Te,{ref_key:"tableRef",ref:d,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:j.value,"onUpdate:pagination":q[12]||(q[12]=T=>j.value=T),filter:x.search,loading:g.value,columns:E.value,rows:y.value,"rows-per-page-options":[10,25,50],style:Ee({height:a(s)}),onRequest:C,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:T,message:I,filter:X})=>[t("div",dc,[t("span",null,i(I)+" "+i(X?" with term "+X:""),1)])]),header:l(T=>[e(qe,{props:T},{default:l(()=>[e(ta,{"auto-width":""}),(f(!0),h(Q,null,tt(T.cols,I=>(f(),O(ta,{key:I.name,props:T},{default:l(()=>[_(i(I.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(T=>[e(qe,{props:T,class:xe({inactive:!T.row.active})},{default:l(()=>[e(H,{"auto-width":""},{default:l(()=>[e(U,{size:"sm",flat:"",round:"",dense:"",onClick:J(I=>T.expand=!T.expand,["prevent"]),icon:T.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(H,{key:"name",props:T,class:"wrap-column cursor-pointer",onClick:I=>B(T)},{default:l(()=>[_(i(T.row.name)+" ",1),a(c).screen.gt.sm?k("",!0):(f(),h(Q,{key:0},[T.row.type=="stocked"?(f(),h("div",uc,[e(S,{name:"cycle"}),_(" Stok: "+i(a(K)(T.row.stock))+" "+i(T.row.uom),1)])):k("",!0),r.value?(f(),h("div",mc,[e(S,{name:"money"}),_(" Modal: Rp. "+i(a(K)(T.row.cost)),1)])):k("",!0),t("div",null,[e(S,{name:"sell"}),_(" Harga: Rp. "+i(a(K)(T.row.price)),1)])],64))]),_:2},1032,["props","onClick"]),e(H,{key:"stock",props:T,class:xe(["wrap-column",{"low-stock":T.row.type=="stocked"&&(Number(T.row.stock)==0||Number(T.row.stock)<Number(T.row.min_stock)),"over-stock":T.row.type=="stocked"&&Number(T.row.max_stock)&&Number(T.row.stock)>Number(T.row.max_stock)}])},{default:l(()=>[_(i(T.row.type=="stocked"?a(K)(T.row.stock)+" "+T.row.uom:"-"),1)]),_:2},1032,["props","class"]),(f(),O(H,{key:"cost",props:T,class:"wrap-column"},{default:l(()=>[_(i(a(K)(T.row.cost)),1)]),_:2},1032,["props"])),e(H,{key:"price",props:T,class:"wrap-column"},{default:l(()=>[_(i(a(K)(T.row.price)),1)]),_:2},1032,["props"]),e(H,{key:"action",props:T},{default:l(()=>[t("div",cc,[z.$can("admin.product.add")||z.$can("admin.product.edit")||z.$can("admin.product.delete")?(f(),O(U,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:q[11]||(q[11]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"175px"}},{default:l(()=>[z.$can("admin.product.add")?ee((f(),O(le,{key:0,clickable:"",onClick:J(I=>a(Z).get(z.route("admin.product.duplicate",T.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>[...q[14]||(q[14]=[_("Duplikat",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),z.$can("admin.product.edit")?ee((f(),O(le,{key:1,clickable:"",onClick:J(I=>a(Z).get(z.route("admin.product.edit",T.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...q[15]||(q[15]=[_("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),z.$can("admin.product.delete")?ee((f(),O(le,{key:2,onClick:J(I=>D(T.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...q[16]||(q[16]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class"]),ee(e(qe,{props:T},{default:l(()=>[e(H,{colspan:"100%"},{default:l(()=>[T.row.barcode?(f(),h("div",pc,[e(S,{class:"inline-icon",name:"barcode"}),_(" Barcode: "+i(T.row.barcode),1)])):k("",!0),T.row.category_id?(f(),h("div",fc,[e(S,{name:"category",class:"inline-icon"}),_(" Kategori: "+i(T.row.category.name),1)])):k("",!0),z.$can("admin.product:view-supplier")?(f(),h(Q,{key:2},[T.row.supplier_id?(f(),h("div",gc,[e(S,{name:"local_shipping",class:"inline-icon"}),_(" Supplier: "+i(T.row.supplier.name),1)])):k("",!0)],64)):k("",!0),T.row.description?(f(),O(we,{key:3,text:T.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),T.row.notes?(f(),O(we,{key:4,text:T.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[Dl,T.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[v.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:l(()=>[t("div",rc,[e(de,{modelValue:x.type,"onUpdate:modelValue":[q[5]||(q[5]=T=>x.type=T),$],class:"custom-select col-xs-4 col-sm-2",options:b,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:x.status,"onUpdate:modelValue":[q[6]||(q[6]=T=>x.status=T),$],class:"custom-select col-xs-4 col-sm-2",options:p,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:x.stock_status,"onUpdate:modelValue":[q[7]||(q[7]=T=>x.stock_status=T),$],class:"custom-select col-xs-4 col-sm-2",options:u,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:x.category_id,"onUpdate:modelValue":[q[8]||(q[8]=T=>x.category_id=T),$],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(R),"map-options":"",dense:"","emit-value":"",onFilter:a(N),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),z.$can("admin.product:view-supplier")?(f(),O(de,{key:0,modelValue:x.supplier_id,"onUpdate:modelValue":[q[9]||(q[9]=T=>x.supplier_id=T),$],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(P),"map-options":"",dense:"","emit-value":"",onFilter:a(A),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])):k("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":q[10]||(q[10]=T=>x.search=T),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},vc=Object.freeze(Object.defineProperty({__proto__:null,default:bc},Symbol.toStringTag,{value:"Module"})),_c={class:"column"},yc={class:"bg-grey-2 q-pa-xs"},kc={class:"text-subtitle1 text-bold text-grey-10"},wc={class:"col-12 col-sm-6"},hc={class:"full-width"},$c={key:1},xc={key:0},Sc={key:1},Vc={class:"col-12 col-sm-6",align:"left"},qc={class:"full-width"};const Cc={key:1},Tc={class:"full-width",style:{"border-collapse":"collapse"}},Pc={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Oc={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ic={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Rc={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Dc={key:0},Uc={class:"col-12 col-sm-6"},Ac={class:"text-body2 text-grey-7 text-italic"},jc={class:"col-12 col-sm-6"},Ec={class:"row justify-end q-gutter-y-xs"},Mc={class:"col-12 row justify-between"},Nc={class:"text-subtitle2 text-bold"},lo={__name:"InvoiceTab",props:{data:Object},setup(m){const n=m;return(d,o)=>{const s=Y("i-link");return f(),h("div",_c,[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",yc,[t("div",kc," INVOICE #"+i(n.data.formatted_id),1)])]),_:1}),e(Je),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",wc,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",hc,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.supplier?(f(),O(s,{key:0,href:d.route("admin.customer.detail",{id:n.data.supplier_id})},{default:l(()=>[e(S,{class:"inline-icon",name:"person"}),_(" "+i(n.data.supplier_name),1)]),_:1},8,["href"])):(f(),h("div",$c,[e(S,{class:"inline-icon",name:"person"}),o[0]||(o[0]=_(" Pemasok Umum ",-1))]))])]),n.data.supplier_phone?(f(),h("tr",xc,[t("td",null,[e(S,{class:"inline-icon",name:"phone"}),_(" "+i(n.data.supplier_phone),1)])])):k("",!0),n.data.supplier_address?(f(),h("tr",Sc,[t("td",null,[e(S,{class:"inline-icon",name:"home_pin"}),_(" "+i(n.data.supplier_address),1)])])):k("",!0)])])]),t("div",Vc,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",qc,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(_e)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(d.$CONSTANTS.PURCHASE_ORDER_STATUSES[n.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[n.data.payment_status]),1)]),k("",!0),n.data.due_date?(f(),h("tr",Cc,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(Ht)(n.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Je),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",Tc,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(f(!0),h(Q,null,tt(n.data.details,r=>(f(),h("tr",{key:r.id},[t("td",Pc,[e(s,{href:d.route("admin.product.detail",{id:r.product_id})},{default:l(()=>[_(i(r.product_name),1)]),_:2},1032,["href"])]),t("td",Oc,i(r.quantity),1),t("td",null,i(r.product_uom),1),t("td",Ic,i(a(K)(r.cost)),1),t("td",Rc,i(a(K)(r.subtotal_cost)),1)]))),128)),n.data.details.length==0?(f(),h("tr",Dc,[...o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)])])]),_:1}),e(Je),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",Uc,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Ac,i(n.data.notes?n.data.notes:"-"),1)]),t("div",jc,[t("div",Ec,[t("div",Mc,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Nc,i(a(K)(n.data.grand_total)),1)])])])]),_:1})])}}},Bc=Object.freeze(Object.defineProperty({__proto__:null,default:lo},Symbol.toStringTag,{value:"Module"})),zc={key:0,class:"text-center q-mb-md text-grey-8"},Fc={class:"text-subtitle2 text-weight-medium"},Lc={class:"text-h5 text-center text-primary q-pb-md"},Hc={class:"text-center q-mt-md"},Kc={key:0,class:"text-h6 text-negative text-weight-bold"},Yc={key:1,class:"text-h6 text-green-8 text-weight-bold"},Wc={key:2,class:"text-h6 text-positive text-weight-bold"},oo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:n}){const d=m,o=n,s=fe(),r=V(!1),b=V({method:null,amount:d.total,notes:null}),p=s.props.data.supplier,u=G(()=>[...s.props.accounts.map(w=>({label:w.type=="bank"?w.name+" - "+w.number:w.name,value:w.id}))]),c=G(()=>d.total-(b.value.amount||0)),v=G(()=>b.value.method&&typeof b.value.amount=="number"&&b.value.amount>0),y=G(()=>b.value.method?(b.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),g=G(()=>v.value&&y.value===null),x=()=>{if(!g.value)return;r.value=!0;const w={total_paid:b.value.amount,payments:[{id:b.value.method,amount:b.value.amount}],notes:b.value.notes,remaining_debt:Math.max(0,d.total-(b.value.amount||0))};o("accepted",w),r.value=!1},j=()=>{b.value.amount=d.total,b.value.method=null,b.value.notes=null};return(w,D)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":D[4]||(D[4]=C=>w.$emit("update:modelValue",C)),onBeforeShow:j},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...D[5]||(D[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(p)?(f(),h("div",zc,[t("div",Fc,[_(i(a(p).name)+" ",1),D[6]||(D[6]=t("br",null,null,-1)),_(" Saldo: Rp. "+i(a(K)(a(p).balance)),1)])])):k("",!0),t("div",Lc," Total: Rp. "+i(a(K)(m.total)),1),e(a(de),{modelValue:b.value.method,"onUpdate:modelValue":D[0]||(D[0]=C=>b.value.method=C),options:u.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:r.value,rules:[C=>!!C||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(De,{modelValue:b.value.amount,"onUpdate:modelValue":D[1]||(D[1]=C=>b.value.amount=C),label:"Jumlah Uang",outlined:!0,dense:"",disable:r.value,class:"q-mb-md",error:!g.value,"error-message":y.value},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:b.value.notes,"onUpdate:modelValue":D[2]||(D[2]=C=>b.value.notes=C),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:r.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Hc,[c.value>0?(f(),h("div",Kc," Sisa Tagihan: Rp. "+i(a(K)(c.value)),1)):c.value<0?(f(),h("div",Yc," Kembalian: Rp. "+i(a(K)(Math.abs(c.value))),1)):(f(),h("div",Wc," Tagihan Terbayar "))])]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(U,{flat:"",label:"Batal",color:"grey",onClick:D[3]||(D[3]=C=>w.$emit("update:modelValue",!1))}),e(U,{label:"Bayar",color:"positive",onClick:x,disable:r.value||!g.value,loading:r.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Qc=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),Jc={class:"column"},Gc={class:"full-width",style:{"border-collapse":"collapse"}},Xc={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Zc={class:"row items-center q-gutter-x-sm"},ep={class:"text-weight-bold"},tp={class:"row items-center q-gutter-x-sm q-mt-xs"},ap={class:"text-caption text-grey-6"},lp={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},op={class:"text-caption text-grey-6"},np={class:"q-mt-xs"},sp={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},rp={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ip={key:0},dp={class:"q-pa-sm"},up={class:"text-right q-pa-sm"},mp={class:"text-right q-pa-sm"},no={__name:"PaymentTab",props:{data:Object},setup(m){const n=m,d=G(()=>n.data.grand_total-n.data.total_paid),o=$e(),s=V(!1),r=()=>{s.value=!0},b=async u=>{const c={order_id:n.data.id,payments:u.payments,notes:u.notes};o.loading.show({message:"Memproses pembayaran..."});try{const v=await Qe.post(route("admin.purchase-order.add-payment"),c);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),s.value=!1,Z.visit(route("admin.purchase-order.detail",{id:n.data.id})+"?tab=payment")}catch(v){let y="Gagal memproses pembayaran.";v.response&&v.response.data&&v.response.data.message?y=v.response.data.message:v.message&&(y=v.message),o.notify({message:y,color:"negative",icon:"error"})}finally{o.loading.hide()}},p=u=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Qe.post(route("admin.purchase-order.delete-payment",{id:u.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Z.visit(route("admin.purchase-order.detail",{id:n.data.id})+"?tab=payment")}catch(c){let v="Gagal menghapus pembayaran.";c.response&&c.response.data&&c.response.data.message?v=c.response.data.message:c.message&&(v=c.message),o.notify({message:v,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(u,c)=>(f(),h(Q,null,[t("div",Jc,[e(Je),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",Gc,[c[6]||(c[6]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(f(!0),h(Q,null,tt(n.data.payments,v=>(f(),h("tr",{key:v.id},[t("td",Xc,[t("div",Zc,[e(S,{name:"tag",size:"xs",color:"grey-7"}),t("span",ep,i(v.formatted_id),1)]),t("div",tp,[e(S,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",ap,i(a(_e)(v.created_at)),1)]),(v.type==="transfer"||v.type==="cash")&&v.account?(f(),h("div",lp,[e(S,{name:"wallet",size:"xs",color:"grey-7"}),t("span",op,i(v.account.name),1)])):k("",!0),t("div",np,[e(ut,{label:u.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[v.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",sp,i(a(K)(v.amount)),1),t("td",rp,[u.$can("admin.sales-order.delete-payment")?(f(),O(U,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>p(v)},null,8,["onClick"])):k("",!0)])]))),128)),n.data.payments.length==0?(f(),h("tr",ip,[...c[2]||(c[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",null,[t("td",dp,[u.$can("admin.sales-order.add-payment")&&d.value>0?(f(),O(U,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:c[0]||(c[0]=J(v=>r(),["stop"]))})):k("",!0)]),c[3]||(c[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",up,i(a(K)(n.data.total_paid)),1)]),t("tr",null,[c[4]||(c[4]=t("th",{class:"text-right q-pa-sm",colspan:"2"},"Sisa Tagihan",-1)),t("th",mp,i(a(K)(d.value)),1),c[5]||(c[5]=t("td",null,null,-1))])])])]),_:1})]),e(oo,{modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=v=>s.value=v),total:d.value,customer:n.data.customer,onAccepted:b},null,8,["modelValue","total","customer"])],64))}},cp=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),pp={class:"q-gutter-sm"},fp={class:"col col-lg-6 q-pa-xs",align:"center"},dl="Rincian Pembelian",gp={__name:"Detail",setup(m){const n=new URLSearchParams(window.location.search),o=fe().props.data,s=V(n.get("preview")||!1),b=V(n.get("tab")||"invoice"),p=()=>{window.print()};return(u,c)=>{const v=Y("i-head"),y=Y("authenticated-layout");return f(),h(Q,null,[e(v,{title:dl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,i(dl))])]),"left-button":l(()=>[t("div",pp,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=g=>u.$goBack())})])]),"right-button":l(()=>[e(U,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:c[1]||(c[1]=g=>p())}),s.value?k("",!0):(f(),O(U,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:c[2]||(c[2]=g=>a(Z).get(u.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Ve,{class:"row justify-center print-visible"},{default:l(()=>[t("div",fp,[e(ce,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(At,{modelValue:b.value,"onUpdate:modelValue":c[3]||(c[3]=g=>b.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(st,{name:"invoice",label:"Invoice"}),s.value?k("",!0):(f(),O(st,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Je),e(jt,{modelValue:b.value,"onUpdate:modelValue":c[4]||(c[4]=g=>b.value=g),animated:""},{default:l(()=>[e(rt,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(lo,{data:a(o)},null,8,["data"])]),_:1}),e(rt,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(no,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},bp=_t(gp,[["__scopeId","data-v-e38a4c29"]]),vp=Object.freeze(Object.defineProperty({__proto__:null,default:bp},Symbol.toStringTag,{value:"Module"})),_p={class:"text-weight-medium wrap-column"},yp={class:"text-caption text-grey-6 elipsis"},kp={class:"column items-end"},wp={class:"text-caption text-grey-6 text-italic"},so={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(m){const n=$e(),d=Ke(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(s,r)=>(f(),O(Te,{dense:"",rows:m.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ee({height:a(d)})},{header:l(b=>[e(qe,{props:b,class:"bg-grey-4"},{default:l(()=>[(f(!0),h(Q,null,tt(b.cols,p=>(f(),O(ta,{key:p.name,props:b,class:"text-weight-bold text-grey-8"},{default:l(()=>[_(i(p.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(b=>[e(qe,{props:b,class:"hover-highlight"},{default:l(()=>[e(H,{key:"name",props:b,class:"text-left"},{default:l(()=>[t("div",_p,i(b.row.product_name),1),t("div",yp,i(b.row.product_barcode),1),b.row.notes?(f(),O(we,{key:0,text:b.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"subtotal",props:b,class:"text-right"},{default:l(()=>[t("div",kp,[t("div",null,i(a(K)(b.row.subtotal_cost)),1),t("div",wp,i(a(K)(b.row.quantity))+" x Rp. "+i(a(K)(b.row.cost)),1)])]),_:2},1032,["props"]),e(H,{key:"action",props:b,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(U,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:p=>s.$emit("edit-item",b.row),disable:m.isProcessing},null,8,["onClick","disable"]),e(U,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:p=>s.$emit("remove-item",b.row),disable:m.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},hp=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"})),ro=$t({name:"QBtnToggle",props:{...Il,modelValue:{required:!0},options:{type:Array,required:!0,validator:m=>m.every(n=>("label"in n||"icon"in n||"slot"in n)&&"value"in n)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(m,{slots:n,emit:d}){const o=G(()=>m.options.find(g=>g.value===m.modelValue)!==void 0),s=G(()=>({type:"hidden",name:m.name,value:m.modelValue})),r=wn(s),b=G(()=>yn(m)),p=G(()=>({rounded:m.rounded,dense:m.dense,...b.value})),u=G(()=>m.options.map((g,x)=>{const{attrs:j,value:w,slot:D,...C}=g;return{slot:D,props:{key:x,"aria-pressed":w===m.modelValue?"true":"false",...j,...C,...p.value,disable:m.disable===!0||C.disable===!0,color:w===m.modelValue?v(C,"toggleColor"):v(C,"color"),textColor:w===m.modelValue?v(C,"toggleTextColor"):v(C,"textColor"),noCaps:v(C,"noCaps")===!0,noWrap:v(C,"noWrap")===!0,size:v(C,"size"),padding:v(C,"padding"),ripple:v(C,"ripple"),stack:v(C,"stack")===!0,stretch:v(C,"stretch")===!0,onClick($){c(w,g,$)}}}}));function c(g,x,j){m.readonly!==!0&&(m.modelValue===g?m.clearable===!0&&(d("update:modelValue",null,null),d("clear")):d("update:modelValue",g,x),d("click",j))}function v(g,x){return g[x]===void 0?m[x]:g[x]}function y(){const g=u.value.map(x=>ke(U,x.props,x.slot!==void 0?n[x.slot]:void 0));return m.name!==void 0&&m.disable!==!0&&o.value===!0&&r(g,"push"),Tl(n.default,g)}return()=>ke(kn,{class:"q-btn-toggle",...b.value,rounded:m.rounded,stretch:m.stretch,glossy:m.glossy,spread:m.spread},y)}}),$p={key:0,class:"text-center q-mb-md text-grey-8"},xp={class:"text-subtitle2 text-weight-medium"},Sp={class:"text-h5 text-center text-primary q-pb-md"},Vp={class:"q-mb-md flex flex-center"},qp={key:1},Cp={class:"col-6"},Tp={class:"col-6"},Pp={class:"row"},Op={class:"text-center q-mt-md"},Ip={key:0,class:"text-h6 text-negative text-weight-bold"},Rp={key:1,class:"text-h6 text-green-8 text-weight-bold"},Dp={key:2,class:"text-h6 text-positive text-weight-bold"},Up={key:2},Ap={class:"text-h6 text-negative text-center"},jp={key:3},io={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:n}){const d=m,o=n,s=fe(),r=V(!1),b=V("payment"),p=V(new Date),u=V(null),c=Pe([]),v=G(()=>c.every(B=>B.id&&typeof B.amount=="number"&&B.amount>0)),y=G(()=>s.props.accounts.map(B=>({label:B.name,value:B.id}))),g=G(()=>c.reduce((B,z)=>B+(z.amount||0),0)),x=G(()=>d.total-g.value),j=G(()=>{if(!d.supplier)return!0;const B=c.find(q=>q.id==="wallet");return(B?B.amount:0)<=d.supplier.balance}),w=new Date,D=nt.addToDate(new Date,{days:30}),C=G(()=>[B=>!!B||"Tanggal jatuh tempo harus diisi",B=>nt.isBetweenDates(B,w,D,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),$=G(()=>{if(b.value==="debt")return!!d.supplier&&C.value.every(W=>W(p.value)===!0);const B=c.some(W=>(W.amount||0)>0),z=c.every(W=>(W.amount||0)>=0),q=x.value<=0;return v.value&&B&&z&&q}),R=()=>{c.length<3&&c.push({id:null,amount:0})},N=B=>{if(c.length>1){const z=c.findIndex(q=>q.id===B);z!==-1&&c.splice(z,1)}},P=B=>{b.value=B,p.value=new Date,c.splice(0,c.length),B==="payment"&&y.value.length>0&&(c.splice(0,c.length,{id:y.value[0].value,amount:d.total}),vt(()=>{u.value&&u.value.length>0&&(u.value[0].focus(),u.value[0].select())}))},A=()=>{if(!$.value)return;r.value=!0;let B={total:d.total,is_debt:b.value==="debt"};if(b.value==="debt")B.due_date=nt.formatDate(p.value,"YYYY-MM-DD"),B.payments=[];else{const z=g.value,q=z>d.total?z-d.total:0,W=x.value>0?x.value:0;B.payments=c,B.remaining_debt=W,B.change=q}o("accepted",B),r.value=!1},E=()=>{if(y.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}P("payment")};return(B,z)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":z[3]||(z[3]=q=>B.$emit("update:modelValue",q)),onBeforeShow:E},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...z[4]||(z[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[m.supplier?(f(),h("div",$p,[t("div",xp,[_(" Nama: "+i(m.supplier.name),1),z[5]||(z[5]=t("br",null,null,-1)),_(" Utang / Piutang: Rp. "+i(a(K)(m.supplier.balance)),1)])])):k("",!0),t("div",Sp," Total: Rp. "+i(a(K)(m.total)),1),t("div",Vp,[e(a(ro),{modelValue:b.value,"onUpdate:modelValue":[z[0]||(z[0]=q=>b.value=q),P],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!m.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),b.value==="payment"?(f(),h("div",qp,[(f(!0),h(Q,null,tt(c,(q,W)=>(f(),h("div",{key:W,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Cp,[e(a(de),{modelValue:q.id,"onUpdate:modelValue":te=>q.id=te,options:y.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:r.value,"hide-bottom-space":"",rules:[te=>!!te||"Akun harus dipilih"],error:!q.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Tp,[e(De,{modelValue:q.amount,"onUpdate:modelValue":te=>q.amount=te,label:"Jumlah",outlined:!0,dense:"",disable:r.value,error:!j.value,"error-message":j.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:W===0?"firstPaymentInputRef":null},Le({_:2},[c.length>1?{name:"append",fn:l(()=>[e(S,{size:"xs",name:"close",class:"cursor-pointer",onClick:te=>N(W)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Pp,[e(U,{disable:!(c.length<3&&x.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:R,size:"sm"},null,8,["disable"])]),t("div",Op,[x.value>0?(f(),h("div",Ip," Sisa Tagihan: Rp. "+i(a(K)(x.value)),1)):x.value<0?(f(),h("div",Rp," Kembalian: Rp. "+i(a(K)(Math.abs(x.value))),1)):(f(),h("div",Dp," Tagihan Terbayar "))])])):b.value==="debt"&&m.supplier?(f(),h("div",Up,[e($a,{outlined:"",modelValue:p.value,"onUpdate:modelValue":z[1]||(z[1]=q=>p.value=q),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(w),"max-date":a(D),rules:C.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Ap," Total Utang: Rp. "+i(a(K)(m.total)),1)])):b.value==="debt"&&!m.supplier?(f(),h("div",jp,[...z[6]||(z[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)])])):k("",!0)]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(U,{flat:"",label:"Batal",color:"grey",onClick:z[2]||(z[2]=q=>B.$emit("update:modelValue",!1))}),e(U,{label:b.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:A,disable:r.value||!$.value,loading:r.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ep=Object.freeze(Object.defineProperty({__proto__:null,default:io},Symbol.toStringTag,{value:"Module"})),Mp={class:"row items-center no-wrap"},Np={class:"col-auto"},Bp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},uo={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1}},emits:["update:modelValue","product-selected"],setup(m,{emit:n}){const d=m,o=n,s=V(null),r=V([]),b=V(!0),p=V(-1),u=Pe({search:"",status:"active",...Ue()}),c=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price",label:"Harga (Rp)",field:"price",align:"right"}],y=G(()=>d.showCost?v:v.filter(C=>C.name!=="cost"));he(()=>{g()});const g=()=>{d.modelValue!==!1&&x()},x=(C=null)=>{b.value=!0,p.value=-1,Ae({pagination:c,filter:u,props:C,rows:r,url:route("admin.product.data"),loading:b,tableRef:s})},j=()=>{g()},w=C=>{o("product-selected",C),setTimeout(()=>{o("update:modelValue",!1)},100)},D=C=>{if(!d.modelValue)return;const $=r.value.length;$!==0&&(C.key==="ArrowDown"?(C.preventDefault(),p.value=(p.value+1)%$):C.key==="ArrowUp"?(C.preventDefault(),p.value=(p.value-1+$)%$):C.key==="Enter"&&p.value!==-1&&(C.preventDefault(),w(r.value[p.value])))};return Me(()=>d.modelValue,(C,$)=>{$===!0&&C===!1&&(u.search=""),C===!0&&x()}),(C,$)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":$[3]||($[3]=R=>C.$emit("update:modelValue",R)),maximized:C.$q.screen.lt.sm},{default:l(()=>[e(ce,{class:"column fit",tabindex:"0",onKeydown:D,ref:"cardRef"},{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",Mp,[$[4]||($[4]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",Np,[e(U,{flat:"",round:"",size:"sm",icon:"close",onClick:$[0]||($[0]=R=>C.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:xe(["q-py-sm",C.$q.screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(oe,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":[$[1]||($[1]=R=>u.search=R),j],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["class"]),e(ae,{class:xe(["q-py-xs col",C.$q.screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(Te,{ref_key:"tableRef",ref:s,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:c.value,"onUpdate:pagination":$[2]||($[2]=R=>c.value=R),filter:u.search,loading:b.value,columns:y.value,rows:r.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":l(({icon:R,message:N,filter:P})=>[t("div",Bp,[t("span",null,i(N),1)])]),body:l(R=>[e(qe,{tabindex:"0",props:R,class:xe([{inactive:!R.row.active,"selected-row":p.value===R.rowIndex},"cursor-pointer"]),onClick:N=>w(R.row),onKeydown:[aa(J(N=>w(R.row),["prevent","stop"]),["enter"]),aa(J(N=>w(R.row),["prevent"]),["space"])]},{default:l(()=>[e(H,{key:"name",props:R,class:"wrap-column"},{default:l(()=>[e(we,{text:R.row.name},null,8,["text"]),R.row.description?(f(),O(we,{key:0,text:R.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"stock",props:R,class:"wrap-column text-right"},{default:l(()=>[_(i(R.row.type=="stocked"?a(K)(R.row.stock)+" "+R.row.uom:"-"),1)]),_:2},1032,["props"]),m.showCost?(f(),O(H,{key:"cost",props:R,class:"wrap-column text-right"},{default:l(()=>[_(i(a(K)(R.row.cost)),1)]),_:2},1032,["props"])):k("",!0),e(H,{key:"price",props:R,class:"wrap-column text-right"},{default:l(()=>[_(i(a(K)(R.row.price)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},zp={class:"row items-center no-wrap"},Fp={class:"col-auto"},mo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:n,emit:d}){const o=m,s=d,r=()=>{s("save")},b=G(()=>o.item.quantity*o.item.cost),p=y=>{y.stopPropagation(),y.preventDefault()},u=y=>{o.modelValue&&(y.key==="Enter"?(r(),p(y)):y.key==="Escape"&&(s("update:modelValue",!1),p(y)))};he(()=>{window.addEventListener("keydown",u)}),Pt(()=>{window.removeEventListener("keydown",u)}),n({getCurrentItem:()=>o.item});const v=()=>{};return(y,g)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":g[6]||(g[6]=x=>y.$emit("update:modelValue",x)),onBeforeShow:v},{default:l(()=>[e(ce,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",zp,[g[7]||(g[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Fp,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=x=>y.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(oe,{modelValue:m.item.product_name,"onUpdate:modelValue":g[1]||(g[1]=x=>m.item.product_name=x),label:"Produk","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(De,{modelValue:m.item.quantity,"onUpdate:modelValue":g[2]||(g[2]=x=>m.item.quantity=x),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(De,{modelValue:m.item.cost,"onUpdate:modelValue":g[3]||(g[3]=x=>m.item.cost=x),label:"Harga","hide-bottom-space":"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(De,{modelValue:b.value,"onUpdate:modelValue":g[4]||(g[4]=x=>b.value=x),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(oe,{modelValue:m.item.notes,"onUpdate:modelValue":g[5]||(g[5]=x=>m.item.notes=x),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[ue]]),ee(e(U,{flat:"",label:"Simpan",color:"primary",onClick:r,disable:m.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Lp=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"}));function Hp(){const m=V(new Date);let n=null;const d=()=>{m.value=new Date};return he(()=>{n=setInterval(d,1e3)}),Pt(()=>{n&&clearInterval(n)}),{currentDateTime:m}}const Kp={class:"text-grey-8"},co={__name:"DigitalClock",setup(m){const{currentDateTime:n}=Hp();return(d,o)=>(f(),h("div",Kp,i(a(_e)(a(n))),1))}},Yp={key:0,class:"q-select__selected-item"},Wp={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(m,{expose:n,emit:d}){const o=V(null),s=m,r=d,b=V([]);let p=null;const u=V(s.modelValue);he(()=>{s.initialData&&(u.value=s.initialData)}),Me(u,y=>{r("update:modelValue",y),r("supplierSelected",y)}),Me(()=>s.modelValue,y=>{u.value=y}),n({focus:()=>{o.value&&o.value.focus()}});const v=(y,g)=>{if(y.length<s.minLength){g(()=>{b.value=[]});return}p&&clearTimeout(p),p=setTimeout(()=>{Qe.get(`/web-api/suppliers?q=${y}`).then(x=>{g(()=>{b.value=x.data.data})}).catch(x=>{console.error("Gagal mengambil data pemasok:",x),g(()=>{b.value=[]})})},500)};return(y,g)=>(f(),O(de,{class:xe(m.class),ref_key:"qSelectRef",ref:o,modelValue:u.value,"onUpdate:modelValue":g[0]||(g[0]=x=>u.value=x),"use-input":"","input-debounce":"0",label:m.label,options:b.value,onFilter:v,clearable:"",error:m.error,behavior:"menu","error-message":m.errorMessage,disable:m.disable,"hide-bottom-space":"",outlined:m.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(x=>[e(le,Ul(Al(x.itemProps)),{default:l(()=>[e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[_(i(x.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(x=>[x.opt?(f(),h("div",Yp,i(x.opt.name),1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Qp={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(m,{emit:n}){return(d,o)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>d.$emit("update:modelValue",s))},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])]),_:1}),e(ae,null,{default:l(()=>[...o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")])])],-1)])]),_:1}),e(mt,{align:"center"},{default:l(()=>[ee(e(U,{dense:"",label:"Tutup"},null,512),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},po=_t(Qp,[["__scopeId","data-v-459ccab7"]]),Jp=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"}));function fo(m){const n=V(!1),d=()=>{const r=m.value||document.documentElement;r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen&&r.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},s=()=>{n.value?o():d()};return hn(()=>{const r=()=>{n.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",r),document.addEventListener("webkitfullscreenchange",r),document.addEventListener("mozfullscreenchange",r),document.addEventListener("MSFullscreenChange",r),()=>{document.removeEventListener("fullscreenchange",r),document.removeEventListener("webkitfullscreenchange",r),document.removeEventListener("mozfullscreenchange",r),document.removeEventListener("MSFullscreenChange",r)}}),{isFullscreen:n,requestFullscreen:d,exitFullscreen:o,toggleFullscreen:s}}const Gp={class:"row items-center no-wrap"},Xp={class:"col text-subtite text-bold text-grey-8"},Zp={class:"col-auto"},go={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:n,emit:d}){const o=m,s=d,r=()=>{s("save")},b=c=>{c.stopPropagation(),c.preventDefault()},p=c=>{o.modelValue&&(c.key==="Enter"?(r(),b(c)):c.key==="Escape"&&(s("update:modelValue",!1),b(c)))};return he(()=>{window.addEventListener("keydown",p)}),Pt(()=>{window.removeEventListener("keydown",p)}),n({getCurrentItem:()=>o.item}),(c,v)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":v[4]||(v[4]=y=>c.$emit("update:modelValue",y))},{default:l(()=>[e(ce,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",Gp,[t("div",Xp," Edit "+i(m.data.formatted_id),1),t("div",Zp,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:v[0]||(v[0]=y=>c.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(Bt,{modelValue:m.data.datetime,"onUpdate:modelValue":v[1]||(v[1]=y=>m.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:m.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(oe,{modelValue:c.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status],"onUpdate:modelValue":v[2]||(v[2]=y=>c.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(oe,{modelValue:m.data.notes,"onUpdate:modelValue":v[3]||(v[3]=y=>m.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[ue]]),ee(e(U,{flat:"",label:"Simpan",color:"primary",onClick:r,disable:m.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ef=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"})),tf={key:0},af={style:{float:"right"}},lf={key:1},of={style:{float:"right"}},nf={key:2},sf={style:{float:"right"}},rf={key:3},df={style:{float:"right"}},uf={style:{float:"right"}},mf={class:"q-gutter-sm"},cf={class:"q-my-md"},pf={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(m,{emit:n}){const d=V(null),o=()=>{var s;(s=d.value)==null||s.focus()};return(s,r)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":r[0]||(r[0]=b=>s.$emit("update:modelValue",b)),onBeforeShow:o,persistent:""},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...r[1]||(r[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])]),_:1}),e(ae,{align:"center"},{default:l(()=>[r[22]||(r[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[r[2]||(r[2]=t("td",null,"ID",-1)),r[3]||(r[3]=t("td",null,":",-1)),t("td",null,i(m.order.formatted_id),1)]),m.customer?(f(),h("tr",tf,[r[5]||(r[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),r[6]||(r[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[_(i(m.customer.name)+" ",1),r[4]||(r[4]=t("br",null,null,-1)),_(i(m.customer.code),1)])])):k("",!0),t("tr",null,[r[8]||(r[8]=t("td",null,"Total",-1)),r[9]||(r[9]=t("td",null,":",-1)),t("td",null,[r[7]||(r[7]=_(" Rp. ",-1)),t("div",af,i(a(K)(m.payment.total)),1)])]),m.payment.cash_amount?(f(),h("tr",lf,[r[11]||(r[11]=t("td",null,"Tunai",-1)),r[12]||(r[12]=t("td",null,":",-1)),t("td",null,[r[10]||(r[10]=_(" Rp. ",-1)),t("div",of,i(a(K)(m.payment.cash_amount)),1)])])):k("",!0),m.payment.wallet_amount?(f(),h("tr",nf,[r[14]||(r[14]=t("td",null,"Wallet",-1)),r[15]||(r[15]=t("td",null,":",-1)),t("td",null,[r[13]||(r[13]=_(" Rp. ",-1)),t("div",sf,i(a(K)(m.payment.wallet_amount)),1)])])):k("",!0),m.payment.remaining_debt?(f(),h("tr",rf,[r[17]||(r[17]=t("td",null,"Piutang",-1)),r[18]||(r[18]=t("td",null,":",-1)),t("td",null,[r[16]||(r[16]=_(" Rp. ",-1)),t("span",df,i(a(K)(m.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[r[20]||(r[20]=t("td",null,"Kembalian",-1)),r[21]||(r[21]=t("td",null,":",-1)),t("td",null,[r[19]||(r[19]=_(" Rp. ",-1)),t("div",uf,i(a(K)(m.payment.change)),1)])])])])]),_:1}),e(mt,{align:"center"},{default:l(()=>[t("div",mf,[e(U,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(U,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",cf,[e(U,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},bo=_t(pf,[["__scopeId","data-v-15f5d36e"]]),ff=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),gf={class:"q-gutter-sm"},bf={class:"row items-center"},vf={class:"text-weight-bold"},_f={class:"row q-col-gutter-none full-width"},yf={class:"col-sm-6 col-12 col"},kf={class:"row full-width"},wf={class:"text-grey q-mt-xs q-ml-sm"},hf={class:"col-sm-6 col-12"},$f={class:"row q-ml-sm items-end"},xf={class:"row col grow"},Sf={class:"col-12 q-pa-sm column"},Vf={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},qf={key:0,class:"col"},Cf={class:"text-caption text-grey-6 q-mt-xs"},Tf={key:0,class:"text-caption text-grey-8 q-mt-xs"},Pf={class:"text-italic"},Of={key:1,class:"col"},If={class:"q-pa-sm q-pb-none text-grey-8"},Rf={class:"col"},Df={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Uf={class:"text-h4 text-weight-bold"},Af={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},jf={class:"col q-py-sm"},Ef={class:"q-py-sm"},Mf={__name:"Editor",setup(m){const n=$e(),d=fe(),o=V(!0),s=V(null),r=V(null),b=V(null),p=V(!1),u=V(null),c=V(null),{isFullscreen:v,toggleFullscreen:y}=fo(c),g=d.props.data.formatted_id,x=V(d.props.data.supplier),j=V(null),w=V(""),D=V(!1),C=V(!1),$=V(!1),R=V(!1),N=V(!1),P=V(!1),A=V(null),E=Pe({id:d.props.data.id,formatted_id:d.props.data.formatted_id,supplier_id:d.props.data.supplier_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),B=G(()=>E.items.reduce((be,F)=>be+F.cost*F.quantity,0)),z=()=>{var be;y(),v.value||(be=u==null?void 0:u.value)==null||be.hideDrawer()},q=be=>isNaN(be)||be<=0?(wt("Kuantitas tidak valid.","top"),!1):!0,W=be=>isNaN(be)||be<0?(wt("Harga tidak valid.","top"),!1):!0,te=be=>!be||be.length==0?(wt("Barcode tidak valid.","top"),!1):!0,T=be=>{w.value.endsWith("*")?w.value+=be.name:w.value=be.name},I=async()=>{const be=w.value.trim();if(be.length===0){$.value=!0;return}const F=be.split("*");let L=1,me="",re=null;if(F.length===1)me=F[0];else if(F.length<=3)L=parseInt(F[0]),me=F[1],F.length===3&&(re=parseFloat(F[2]));else{wt("Input tidak valid.","top");return}if(me.length===0){$.value=!0;return}!te(me)&&!q(L)&&!W(re)||(D.value=!0,await Qe.post(route("admin.purchase-order.add-item"),{order_id:E.id,product_code:me,qty:L,cost:re,merge:o.value}).then(pe=>{const He=pe.data.data.item;let ot=-1;pe.data.data.mergeItem&&(ot=E.items.findIndex(kt=>kt.id===He.id)),ot===-1?E.items.push(He):E.items[ot]=He,w.value="",re!==null&&re!==parseFloat(He.cost)&&wt("Harga tidak dapat diubah!","top")}).catch(pe=>{var He,ot;gt((ot=(He=pe.response)==null?void 0:He.data)==null?void 0:ot.message,"top"),console.error("Gagal mengambil data produk:",pe)}),D.value=!1,vt(()=>{var pe;(pe=s.value)==null||pe.focus()}))},X=be=>{A.value=Object.create(be),R.value=!0},ge=be=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${be.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{D.value=!0,Qe.post(route("admin.purchase-order.remove-item"),{id:be.id}).then(()=>{const F=E.items.findIndex(L=>L.id===be.id);F!==-1&&(E.items.splice(F,1)[0],bt("Item telah dihapus","top"))}).catch(F=>{var L,me;gt(((me=(L=F==null?void 0:F.response)==null?void 0:L.data)==null?void 0:me.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(F)}).finally(()=>{D.value=!1})})},ne=()=>{D.value=!0;const be=r.value.getCurrentItem(),F={id:be.id,qty:be.quantity,cost:be.cost};be.notes&&(F.notes=be.notes),Qe.post(route("admin.purchase-order.update-item"),F).then(L=>{const me=L.data.data,re=E.items.findIndex(pe=>pe.id===me.id);re!==-1&&(E.items[re]=me,bt("Item telah diperbarui","top"))}).catch(L=>{var me,re;gt(((re=(me=L==null?void 0:L.response)==null?void 0:me.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{D.value=!1})};he(()=>{const be=F=>{F.key==="F1"?(F.preventDefault(),p.value=!0):F.key==="F2"?(F.preventDefault(),s.value.focus()):F.key==="F3"?(F.preventDefault(),b.value.focus()):F.key==="F4"?(F.preventDefault(),o.value=!o.value):F.key==="F10"?(F.preventDefault(),C.value=!0):F.key==="F11"&&(F.preventDefault(),z())};document.addEventListener("keydown",be),Pt(()=>{document.removeEventListener("keydown",be)}),vt(()=>{var F;(F=u==null?void 0:u.value)==null||F.hideDrawer()})});const Ce=be=>{x.value=be,E.supplier_id=be==null?void 0:be.id,Ie(),vt(()=>{var F;(F=s.value)==null||F.focus()})},Ie=()=>{D.value=!0;const be={id:E.id,supplier_id:E.supplier_id,datetime:ea(E.datetime),notes:E.notes};Qe.post(route("admin.purchase-order.update"),be).then(F=>{const L=F.data.data.id;E.supplier_id=L.supplier_id}).catch(F=>{var L,me;gt(((me=(L=F==null?void 0:F.response)==null?void 0:L.data)==null?void 0:me.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(F)}).finally(()=>{D.value=!1})},ft=be=>{if(E.items.length===0){bt("Item masih kosong","top");return}const F={id:E.id,...be};D.value=!0,Qe.post(route("admin.purchase-order.close"),F).then(L=>{bt("Transaksi selesai"),Z.visit(route("admin.purchase-order.detail",{id:E.id}))}).catch(L=>{var me,re;gt((re=(me=L.response)==null?void 0:me.data)==null?void 0:re.message),console.error(L)}).finally(()=>{D.value=!1})},pt=()=>{zt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${E.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.purchase-order.cancel",{id:E.id}),{id:E.id}).then(()=>{bt("Transaksi telah dibatalkan."),Z.visit(route("admin.purchase-order.detail",{id:E.id}))}).catch(be=>{var L,me;const F=((me=(L=be.response)==null?void 0:L.data)==null?void 0:me.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:F,color:"warning",position:"bottom"}),console.error(be)})})},yt=()=>{window.open(route("admin.purchase-order.detail",{id:E.id})+"?preview=1","_blank")};return(be,F)=>{const L=Y("i-head"),me=Y("authenticated-layout");return f(),h(Q,null,[e(L,{title:a(g)},null,8,["title"]),e(me,{ref_key:"authLayoutRef",ref:u,"show-drawer-button":!0},{title:l(()=>[_(i(a(g)),1)]),"left-button":l(()=>[t("div",gf,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:F[0]||(F[0]=re=>a(Z).get(be.route("admin.purchase-order.index")))})])]),"right-button":l(()=>[t("div",bf,[a(n).screen.gt.sm?(f(),h(Q,{key:0},[t("div",vf,i(a(d).props.auth.user.username),1),F[22]||(F[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(co)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Ve,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(ce,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",_f,[t("div",yf,[t("div",kf,[e(Wp,{ref_key:"supplierAutocompleteRef",ref:b,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:x.value,"onUpdate:modelValue":F[2]||(F[2]=re=>x.value=re),label:"Pemasok",disable:D.value,onSupplierSelected:Ce,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",wf," Saldo: "+i(x.value?"Rp. "+a(K)(x.value?x.value.balance:0):"Tidak tersedia"),1)])]),t("div",hf,[e(oe,{ref_key:"userInputRef",ref:s,modelValue:w.value,"onUpdate:modelValue":F[5]||(F[5]=re=>w.value=re),onKeyup:F[6]||(F[6]=aa(J(re=>I(),["prevent"]),["enter"])),loading:D.value,disable:D.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(S,{name:"search",onClick:F[3]||(F[3]=re=>$.value=!0),class:"cursor-pointer"})]),append:l(()=>{var re;return[((re=w.value)==null?void 0:re.length)>0?(f(),O(S,{key:0,name:"send",onClick:F[4]||(F[4]=pe=>I()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",$f,[e(qt,{class:"col",modelValue:o.value,"onUpdate:modelValue":F[7]||(F[7]=re=>o.value=re),label:"Gabungkan item",disable:D.value},null,8,["modelValue","disable"])])])]),t("div",xf,[t("div",Sf,[e(so,{items:E.items,onUpdateQuantity:F[8]||(F[8]=({id:re,value:pe})=>be.updateQuantity(re,pe)),onRemoveItem:ge,onEditItem:X,"is-processing":D.value},null,8,["items","is-processing"])])]),t("div",Vf,[a(n).screen.gt.sm?(f(),h("div",qf,[t("div",Cf,i(E.items.length)+" item(s) ",1),E.notes?(f(),h("div",Tf,[F[23]||(F[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Pf,[e(we,{text:E.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(n).screen.gt.sm?(f(),h("div",Of,[t("div",If,[t("div",null,"#: "+i(E.formatted_id),1),t("div",null,i(a(_e)(E.datetime)),1)])])):k("",!0),t("div",Rf,[t("div",Df,[F[25]||(F[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Uf,[F[24]||(F[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),_(" "+i(a(K)(B.value)),1)])])])]),t("div",Af,[t("div",jf,[e(U,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:F[9]||(F[9]=re=>C.value=!0),disable:!be.$can("admin.purchase-order.close")||D.value||E.items.length===0||E.status!=="draft",loading:D.value},null,8,["disable","loading"])]),t("div",Ef,[e(U,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:F[13]||(F[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[ee((f(),O(le,{clickable:"",onClick:F[10]||(F[10]=J(re=>N.value=!0,["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...F[26]||(F[26]=[_("Edit Rincian",-1)])]),_:1})]),_:1})),[[se],[ue]]),ee((f(),O(le,{clickable:"",onClick:F[11]||(F[11]=J(re=>yt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"preview"})]),_:1}),e(M,null,{default:l(()=>[...F[27]||(F[27]=[_("Pratinjau",-1)])]),_:1})]),_:1})),[[se],[ue]]),ee((f(),O(le,{clickable:"",onClick:F[12]||(F[12]=J(re=>pt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"cancel",color:"negative"})]),_:1}),e(M,{class:"text-negative"},{default:l(()=>[...F[28]||(F[28]=[_(" Batalkan ",-1)])]),_:1})]),_:1})),[[se],[ue]]),e(Je)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(mo,{ref_key:"itemEditorRef",ref:r,modelValue:R.value,"onUpdate:modelValue":F[14]||(F[14]=re=>R.value=re),item:A.value,onSave:F[15]||(F[15]=re=>ne()),"is-processing":D.value},null,8,["modelValue","item","is-processing"]),e(io,{modelValue:C.value,"onUpdate:modelValue":F[16]||(F[16]=re=>C.value=re),onAccepted:ft,form:E,supplier:x.value,total:B.value,accounts:a(d).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(uo,{modelValue:$.value,"onUpdate:modelValue":F[17]||(F[17]=re=>$.value=re),"show-cost":!0,onProductSelected:T},null,8,["modelValue"]),e(go,{modelValue:N.value,"onUpdate:modelValue":F[18]||(F[18]=re=>N.value=re),data:E,onSave:F[19]||(F[19]=re=>Ie()),"is-processing":D.value},null,8,["modelValue","data","is-processing"]),e(po,{modelValue:p.value,"onUpdate:modelValue":F[20]||(F[20]=re=>p.value=re)},null,8,["modelValue"]),e(bo,{modelValue:P.value,"onUpdate:modelValue":F[21]||(F[21]=re=>P.value=re),order:E,supplier:x.value,total:B.value,payment:j.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},Nf=Object.freeze(Object.defineProperty({__proto__:null,default:Mf},Symbol.toStringTag,{value:"Module"})),Bf={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(m){const n=window.CONSTANTS.PURCHASE_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,s)=>(f(),O(ia,{status:m.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}},zf={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(m){const n=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,s)=>(f(),O(ia,{status:m.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}};const Ff={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Lf={class:"q-pa-xs"},Hf={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Kf={key:0},Yf={key:1},Wf={key:0},Qf={key:0},Jf={key:1},Gf={class:"flex justify-end"},ul="Pembelian",Xf={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=Wt(),c=Qt(),v=[{label:"Semua Tahun",value:"all"},{label:`${u}`,value:u},...Dt(u-2,u-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Ut()],g=[{value:"all",label:"Semua Status"},...et(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],x=[{value:"all",label:"Semua Status"},...et(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],j=[{value:"all",label:"Semua Status"},...et(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],w=Pe({search:"",year:u,month:c,status:"all",payment_status:"all",delivery_status:"all",...Ue()}),D=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{E()});const $=q=>{if(q.status=="draft"){R(q);return}N(q)},R=q=>{Z.get(route("admin.purchase-order.edit",q.id))},N=q=>{Z.get(route("admin.purchase-order.detail",q.id))},P=q=>{zt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${q.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.purchase-order.cancel",{id:q.id}),{id:q.id}).then(W=>{const te=W.data.data,T=o.value.findIndex(I=>I.id===te.id);if(T===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[T].status="canceled",n.notify({message:W.data.message,position:"bottom"})}).catch(W=>{var T,I;const te=((I=(T=W.response)==null?void 0:T.data)==null?void 0:I.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:te,color:"warning",position:"bottom"}),console.error(W)})})},A=q=>at({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${q.formatted_id}?`,url:route("admin.purchase-order.delete",q.id),fetchItemsCallback:E,loading:s}),E=(q=null)=>{Ae({pagination:D,filter:w,props:q,rows:o,url:route("admin.purchase-order.data"),loading:s,tableRef:r})},B=()=>{E()},z=G(()=>n.screen.gt.sm?C:C.filter(q=>q.name==="id"||q.name==="action"));return Me(()=>w.year,q=>{q===null&&(w.month=null)}),(q,W)=>{const te=Y("i-head"),T=Y("authenticated-layout");return f(),h(Q,null,[e(te,{title:ul}),e(T,null,Le({title:l(()=>[_(i(ul))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:W[0]||(W[0]=I=>d.value=!d.value)},null,8,["icon"]),q.$can("admin.purchase-order.edit")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:W[1]||(W[1]=I=>a(Z).get(q.route("admin.purchase-order.add")))})):k("",!0)]),default:l(()=>[t("div",Lf,[e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":W[11]||(W[11]=I=>D.value=I),filter:w.search,loading:s.value,columns:z.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ee({height:a(p)}),onRequest:E,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:I,message:X,filter:ge})=>[t("div",Hf,[t("span",null,i(X)+" "+i(ge?" with term "+ge:""),1)])]),body:l(I=>[e(qe,{props:I,class:"cursor-pointer",onClick:J(X=>$(I.row),["prevent"])},{default:l(()=>[e(H,{key:"id",props:I,class:"wrap-column"},{default:l(()=>[t("div",null,[e(S,{name:"tag"}),_(" "+i(I.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),_(i(a(_e)(I.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(f(),h(Q,{key:0},[I.row.supplier?(f(),h("div",Kf,[e(S,{name:"person",class:"inline-icon"}),e(jl,{href:q.route("admin.supplier.detail",{id:I.row.supplier.id}),onClick:W[8]||(W[8]=J(()=>{},["stop"]))},{default:l(()=>[_("  "+i(I.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+i(a(K)(I.row.grand_total)),1),I.row.notes?(f(),h("div",Yf,[e(S,{name:"notes"}),_(" "+i(I.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Bf,{status:I.row.status},null,8,["status"]),e(zf,{status:I.row.payment_status},null,8,["status"]),k("",!0)])]),_:2},1032,["props"]),e(H,{key:"supplier_id",props:I},{default:l(()=>[I.row.supplier?(f(),h("div",Wf,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+i(I.row.supplier_name),1)]),I.row.supplier_phone?(f(),h("div",Qf,[e(S,{name:"phone",class:"inline-icon"}),_(" "+i(I.row.supplier_phone),1)])):k("",!0),I.row.supplier_address?(f(),h("div",Jf,[e(S,{name:"home_pin",class:"inline-icon"}),_(" "+i(I.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"total",props:I},{default:l(()=>[_(i(a(K)(I.row.grand_total)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:I},{default:l(()=>[e(we,{text:I.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:I,onClick:W[10]||(W[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",Gf,[q.$can("admin.purchase-order.detail")||q.$can("admin.purchase-order.edit")||q.$can("admin.purchase-order.cancel")||q.$can("admin.purchase-order.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:W[9]||(W[9]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[I.row.status!="draft"&&q.$can("admin.purchase-order.detail")?ee((f(),O(le,{key:0,onClick:J(X=>N(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"visibility"})]),_:1}),e(M,null,{default:l(()=>[...W[12]||(W[12]=[_(" Lihat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),I.row.status=="draft"&&q.$can("admin.purchase-order.edit")?ee((f(),O(le,{key:1,onClick:J(X=>R(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...W[13]||(W[13]=[_(" Edit ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),I.row.status=="draft"&&q.$can("admin.purchase-order.cancel")?ee((f(),O(le,{key:2,onClick:J(X=>P(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"cancel"})]),_:1}),e(M,null,{default:l(()=>[...W[14]||(W[14]=[_(" Batalkan ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),e(Je),q.$can("admin.purchase-order.delete")?ee((f(),O(le,{key:3,onClick:J(X=>A(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...W[15]||(W[15]=[_(" Hapus ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Ff,[e(de,{modelValue:w.year,"onUpdate:modelValue":[W[2]||(W[2]=I=>w.year=I),B],options:v,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(f(),O(de,{key:0,modelValue:w.month,"onUpdate:modelValue":[W[3]||(W[3]=I=>w.month=I),B],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:w.status,"onUpdate:modelValue":[W[4]||(W[4]=I=>w.status=I),B],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:w.payment_status,"onUpdate:modelValue":[W[5]||(W[5]=I=>w.payment_status=I),B],options:x,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":W[7]||(W[7]=I=>w.search=I),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Zf=Object.freeze(Object.defineProperty({__proto__:null,default:Xf},Symbol.toStringTag,{value:"Module"})),eg={class:"column"},tg={class:"bg-grey-2 q-pa-xs"},ag={class:"text-subtitle1 text-bold text-grey-10"},lg={class:"text-caption text-grey-8"},og={class:"col-12 col-sm-6"},ng={class:"full-width"},sg={key:1},rg={key:0},ig={key:1},dg={class:"col-12 col-sm-6",align:"left"},ug={class:"full-width"};const mg={key:1},cg={class:"full-width",style:{"border-collapse":"collapse"}},pg={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},fg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},gg={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},bg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},vg={key:0},_g={class:"col-12 col-sm-6"},yg={class:"text-body2 text-grey-7 text-italic"},kg={class:"col-12 col-sm-6"},wg={class:"row justify-end q-gutter-y-xs"},hg={class:"col-12 row justify-between"},$g={class:"text-subtitle2 text-bold"},vo={__name:"InvoiceTab",props:{data:Object},setup(m){const n=m;return(d,o)=>{const s=Y("i-link");return f(),h("div",eg,[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",tg,[t("div",ag," INVOICE #"+i(n.data.formatted_id),1),t("div",lg,[_(" Kasir: "+i(n.data.cashier.username)+" - "+i(n.data.cashier.name)+" | "+i(a(_e)(n.data.datetime))+" ",1),n.data.cashier_session?(f(),h(Q,{key:0},[_(" | Session ID: "+i(n.data.cashier_session.id)+" | Terminal: "+i(n.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Je),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",og,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",ng,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.customer?(f(),O(s,{key:0,href:d.route("admin.customer.detail",{id:n.data.customer_id})},{default:l(()=>[e(S,{class:"inline-icon",name:"person"}),_(" "+i(n.data.customer_name)+" ("+i(n.data.customer_code)+") ",1)]),_:1},8,["href"])):(f(),h("div",sg,[e(S,{class:"inline-icon",name:"person"}),o[0]||(o[0]=_(" Pelanggan Umum ",-1))]))])]),n.data.customer_phone?(f(),h("tr",rg,[t("td",null,[e(S,{class:"inline-icon",name:"phone"}),_(" "+i(n.data.customer_phone),1)])])):k("",!0),n.data.customer_address?(f(),h("tr",ig,[t("td",null,[e(S,{class:"inline-icon",name:"home_pin"}),_(" "+i(n.data.customer_address),1)])])):k("",!0)])])]),t("div",dg,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",ug,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(_e)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(d.$CONSTANTS.SALES_ORDER_STATUSES[n.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[n.data.payment_status]),1)]),k("",!0),n.data.due_date?(f(),h("tr",mg,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(Ht)(n.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Je),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",cg,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(f(!0),h(Q,null,tt(n.data.details,r=>(f(),h("tr",{key:r.id},[t("td",pg,i(r.product_name),1),t("td",fg,i(a(K)(r.price)),1),t("td",gg,i(r.quantity),1),t("td",bg,i(a(K)(r.subtotal_price)),1)]))),128)),n.data.details.length==0?(f(),h("tr",vg,[...o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)])])]),_:1}),e(Je),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",_g,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",yg,i(n.data.notes?n.data.notes:"-"),1)]),t("div",kg,[t("div",wg,[t("div",hg,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",$g,i(a(K)(n.data.grand_total)),1)])])])]),_:1})])}}},xg=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),Sg={key:0,class:"text-center q-mb-md text-grey-8"},Vg={class:"text-subtitle2 text-weight-medium"},qg={class:"text-h5 text-center text-primary q-pb-md"},Cg={class:"text-center q-mt-md"},Tg={key:0,class:"text-h6 text-negative text-weight-bold"},Pg={key:1,class:"text-h6 text-green-8 text-weight-bold"},Og={key:2,class:"text-h6 text-positive text-weight-bold"},_o={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:n}){const d=m,o=n,s=fe(),r=V(!1),b=V({method:"cash",amount:d.total,notes:null}),p=s.props.data.customer,u=G(()=>[{label:"Tunai",value:"cash"},...p?[{label:"Wallet",value:"wallet"}]:[],...s.props.accounts.map(j=>({label:j.name,value:j.id}))]),c=G(()=>d.total-(b.value.amount||0)),v=G(()=>{const j=b.value.amount||0;return d.total,j<=0?"Jumlah pembayaran harus lebih dari 0.":b.value.method==="wallet"&&p&&j>p.wallet_balance?"Saldo wallet tidak mencukupi.":null}),y=G(()=>v.value===null),g=()=>{if(!y.value)return;r.value=!0;const j={total_paid:b.value.amount,payments:[{id:b.value.method,amount:b.value.amount}],notes:b.value.notes,change:Math.max(0,(b.value.amount||0)-d.total),remaining_debt:Math.max(0,d.total-(b.value.amount||0))};o("accepted",j),r.value=!1},x=()=>{b.value.amount=d.total,b.value.method="cash",b.value.notes=null};return(j,w)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":w[4]||(w[4]=D=>j.$emit("update:modelValue",D)),onBeforeShow:x},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...w[5]||(w[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(p)?(f(),h("div",Sg,[t("div",Vg,[_(i(a(p).code)+" ",1),w[6]||(w[6]=t("br",null,null,-1)),_(" "+i(a(p).name)+" ",1),w[7]||(w[7]=t("br",null,null,-1)),_(" Saldo: Rp. "+i(a(K)(a(p).wallet_balance)),1)])])):k("",!0),t("div",qg," Total: Rp. "+i(a(K)(m.total)),1),e(a(de),{modelValue:b.value.method,"onUpdate:modelValue":w[0]||(w[0]=D=>b.value.method=D),options:u.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:r.value},null,8,["modelValue","options","disable"]),e(De,{modelValue:b.value.amount,"onUpdate:modelValue":w[1]||(w[1]=D=>b.value.amount=D),label:"Jumlah Uang",outlined:!0,dense:"",disable:r.value,class:"q-mb-md",error:!y.value,"error-message":v.value},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:b.value.notes,"onUpdate:modelValue":w[2]||(w[2]=D=>b.value.notes=D),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:r.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Cg,[c.value>0?(f(),h("div",Tg," Sisa Tagihan: Rp. "+i(a(K)(c.value)),1)):c.value<0?(f(),h("div",Pg," Kembalian: Rp. "+i(a(K)(Math.abs(c.value))),1)):(f(),h("div",Og," Tagihan Terbayar "))])]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(U,{flat:"",label:"Batal",color:"grey",onClick:w[3]||(w[3]=D=>j.$emit("update:modelValue",!1))}),e(U,{label:"Bayar",color:"positive",onClick:g,disable:r.value||!y.value,loading:r.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ig=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),Rg={class:"column"},Dg={class:"full-width",style:{"border-collapse":"collapse"}},Ug={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ag={class:"row items-center q-gutter-x-sm"},jg={class:"text-weight-bold"},Eg={class:"row items-center q-gutter-x-sm q-mt-xs"},Mg={class:"text-caption text-grey-6"},Ng={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Bg={class:"text-caption text-grey-6"},zg={class:"q-mt-xs"},Fg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Lg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Hg={key:0},Kg={class:"q-pa-sm"},Yg={class:"text-right q-pa-sm"},Wg={class:"text-right q-pa-sm"},yo={__name:"PaymentTab",props:{data:Object},setup(m){const n=m,d=G(()=>n.data.grand_total-n.data.total_paid),o=$e(),s=V(!1),r=()=>{s.value=!0},b=async u=>{const c={order_id:n.data.id,payments:u.payments,notes:u.notes};o.loading.show({message:"Memproses pembayaran..."});try{const v=await Qe.post(route("admin.sales-order.add-payment"),c);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),s.value=!1,Z.visit(route("admin.sales-order.detail",{id:n.data.id})+"?tab=payment")}catch(v){let y="Gagal memproses pembayaran.";v.response&&v.response.data&&v.response.data.message?y=v.response.data.message:v.message&&(y=v.message),o.notify({message:y,color:"negative",icon:"error"})}finally{o.loading.hide()}},p=u=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Qe.post(route("admin.sales-order.delete-payment",{id:u.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Z.visit(route("admin.sales-order.detail",{id:n.data.id})+"?tab=payment")}catch(c){let v="Gagal menghapus pembayaran.";c.response&&c.response.data&&c.response.data.message?v=c.response.data.message:c.message&&(v=c.message),o.notify({message:v,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(u,c)=>(f(),h(Q,null,[t("div",Rg,[e(Je),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",Dg,[c[6]||(c[6]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(f(!0),h(Q,null,tt(n.data.payments,v=>(f(),h("tr",{key:v.id},[t("td",Ug,[t("div",Ag,[e(S,{name:"tag",size:"xs",color:"grey-7"}),t("span",jg,i(v.formatted_id),1)]),t("div",Eg,[e(S,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Mg,i(a(_e)(v.created_at)),1)]),(v.type==="transfer"||v.type==="cash")&&v.account?(f(),h("div",Ng,[e(S,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Bg,i(v.account.name),1)])):k("",!0),t("div",zg,[e(ut,{label:u.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[v.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Fg,i(a(K)(v.amount)),1),t("td",Lg,[u.$can("admin.sales-order.delete-payment")?(f(),O(U,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>p(v)},null,8,["onClick"])):k("",!0)])]))),128)),n.data.payments.length==0?(f(),h("tr",Hg,[...c[2]||(c[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",null,[t("td",Kg,[u.$can("admin.sales-order.add-payment")&&d.value>0?(f(),O(U,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:c[0]||(c[0]=J(v=>r(),["stop"]))})):k("",!0)]),c[3]||(c[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",Yg,i(a(K)(n.data.total_paid)),1)]),t("tr",null,[c[4]||(c[4]=t("th",{class:"text-right q-pa-sm",colspan:"2"},"Sisa Tagihan",-1)),t("th",Wg,i(a(K)(d.value)),1),c[5]||(c[5]=t("td",null,null,-1))])])])]),_:1})]),e(_o,{modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=v=>s.value=v),total:d.value,customer:n.data.customer,onAccepted:b},null,8,["modelValue","total","customer"])],64))}},Qg=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),Jg={class:"q-gutter-sm"},Gg={class:"col col-lg-6 q-pa-xs",align:"center"},ml="Rincian Penjualan",Xg={__name:"Detail",setup(m){const n=new URLSearchParams(window.location.search),d=fe(),o=d.props.data,s=V(n.get("preview")||!1),b=V(n.get("tab")||"invoice");he(()=>{vt(()=>{const u=n.get("print_size");u&&p(u)})});const p=u=>{window.open(route("admin.sales-order.print",{id:d.props.data.id,size:u}),"_self")};return(u,c)=>{const v=Y("i-head"),y=Y("authenticated-layout");return f(),h(Q,null,[e(v,{title:ml}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,i(ml))])]),"left-button":l(()=>[t("div",Jg,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=g=>u.$goBack())})])]),"right-button":l(()=>[e(U,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:c[1]||(c[1]=g=>p("58mm"))}),e(U,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:c[2]||(c[2]=g=>p("a4"))}),s.value?k("",!0):(f(),O(U,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:c[3]||(c[3]=g=>a(Z).get(u.route("admin.sales-order.add")))}))]),default:l(()=>[e(Ve,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Gg,[e(ce,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(At,{modelValue:b.value,"onUpdate:modelValue":c[4]||(c[4]=g=>b.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(st,{name:"invoice",label:"Invoice"}),s.value?k("",!0):(f(),O(st,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Je),e(jt,{modelValue:b.value,"onUpdate:modelValue":c[5]||(c[5]=g=>b.value=g),animated:""},{default:l(()=>[e(rt,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(vo,{data:a(o)},null,8,["data"])]),_:1}),e(rt,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(yo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Zg=Object.freeze(Object.defineProperty({__proto__:null,default:Xg},Symbol.toStringTag,{value:"Module"})),e1={class:"text-weight-medium"},t1={class:"text-caption text-grey-6 elipsis"},a1={class:"column items-end"},l1={class:"text-caption text-grey-6 text-italic"},ko={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(m){const n=$e(),d=Ke(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(s,r)=>(f(),O(Te,{dense:"",rows:m.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ee({height:a(d)})},{header:l(b=>[e(qe,{props:b,class:"bg-grey-4"},{default:l(()=>[(f(!0),h(Q,null,tt(b.cols,p=>(f(),O(ta,{key:p.name,props:b,class:"text-weight-bold text-grey-8"},{default:l(()=>[_(i(p.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(b=>[e(qe,{props:b,class:"hover-highlight"},{default:l(()=>[e(H,{key:"name",props:b,class:"text-left wrap-column"},{default:l(()=>[t("div",e1,i(b.row.product_name),1),t("div",t1,i(b.row.product_barcode),1),b.row.notes?(f(),O(we,{key:0,text:b.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"subtotal_price",props:b,class:"text-right"},{default:l(()=>[t("div",a1,[t("div",null,i(a(K)(b.row.subtotal_price)),1),t("div",l1,i(a(K)(b.row.quantity))+" x Rp. "+i(a(K)(b.row.price)),1)])]),_:2},1032,["props"]),e(H,{key:"action",props:b,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(U,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:p=>s.$emit("edit-item",b.row),disable:m.isProcessing},null,8,["onClick","disable"]),e(U,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:p=>s.$emit("remove-item",b.row),disable:m.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},o1=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),n1={key:0,class:"text-center q-mb-md text-grey-8"},s1={class:"text-subtitle2 text-weight-medium"},r1={class:"text-h5 text-center text-primary q-pb-md"},i1={class:"q-mb-md flex flex-center"},d1={key:1},u1={class:"col-6"},m1={class:"col-6"},c1={class:"row"},p1={class:"text-center q-mt-md"},f1={key:0,class:"text-h6 text-negative text-weight-bold"},g1={key:1,class:"text-h6 text-green-8 text-weight-bold"},b1={key:2,class:"text-h6 text-positive text-weight-bold"},v1={key:2},_1={class:"text-h6 text-negative text-center"},y1={key:3},wo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:n}){const d=m,o=n,s=fe(),r=V(!1),b=V("cash"),p=V(new Date),u=V(s.props.settings.after_payment_action??"print"),c=V([]),v=V([]),y=Pe([{id:"cash",amount:0}]),g=s.props.settings.default_payment_mode,x=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],j=G(()=>[{label:"Tunai",value:"cash"},...d.customer?[{label:"Wallet",value:"wallet"}]:[],...s.props.accounts.map(te=>({label:te.name,value:te.id}))]),w=G(()=>y.reduce((te,T)=>te+(T.amount||0),0)),D=G(()=>d.total-w.value),C=G(()=>{if(!d.customer)return!0;const te=y.find(I=>I.id==="wallet");return(te?te.amount:0)<=d.customer.wallet_balance}),$=new Date,R=nt.addToDate(new Date,{days:30}),N=G(()=>[te=>!!te||"Tanggal jatuh tempo harus diisi",te=>nt.isBetweenDates(te,$,R,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),P=G(()=>{if(b.value==="debt")return!!d.customer&&N.value.every(ge=>ge(p.value)===!0);const te=C.value,T=y.some(ge=>(ge.amount||0)>0),I=y.every(ge=>(ge.amount||0)>=0),X=D.value<=0;return te&&T&&I&&X}),A=()=>{if(y.length<3){const te=y.length;y.push({id:"cash",amount:0}),vt(()=>{const T=c.value[te];T&&(T.focus(),T.showPopup())})}},E=te=>{if(y.length>1){const T=y.findIndex(I=>I.id===te);T!==-1&&y.splice(T,1)}},B=(te,T="cash")=>{b.value=te,p.value=new Date,y.splice(0,y.length),te==="cash"&&(y.splice(0,y.length,{id:T,amount:d.total}),vt(()=>{v.value.length>0&&v.value[0]&&(v.value[0].focus(),v.value[0].select())}))},z=()=>{if(!P.value)return;r.value=!0;let te={total:d.total,is_debt:b.value==="debt",after_payment_action:u.value};if(b.value==="debt")te.due_date=nt.formatDate(p.value,"YYYY-MM-DD"),te.payments=[];else{const T=w.value,I=T>d.total?T-d.total:0,X=D.value>0?D.value:0;te.payments=y,te.remaining_debt=X,te.change=I}o("accepted",te),r.value=!1},q=()=>{B("cash",d.customer?g:"cash")};he(()=>{const te=T=>{d.modelValue&&T.ctrlKey&&T.key==="Enter"&&(T.preventDefault(),z())};document.addEventListener("keydown",te),Pt(()=>{document.removeEventListener("keydown",te)})});const W=(te,T)=>{vt(()=>{v.value[T]&&(v.value[T].focus(),v.value[T].select())})};return(te,T)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":T[4]||(T[4]=I=>te.$emit("update:modelValue",I)),onBeforeShow:q},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...T[5]||(T[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[m.customer?(f(),h("div",n1,[t("div",s1,[_(" Username: "+i(m.customer.code)+" ",1),T[6]||(T[6]=t("br",null,null,-1)),_(" Nama: "+i(m.customer.name),1),T[7]||(T[7]=t("br",null,null,-1)),_(" Saldo: Rp. "+i(a(K)(m.customer.wallet_balance)),1)])])):k("",!0),t("div",r1," Total: Rp. "+i(a(K)(m.total)),1),t("div",i1,[e(a(ro),{modelValue:b.value,"onUpdate:modelValue":[T[0]||(T[0]=I=>b.value=I),B],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!m.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),b.value==="cash"?(f(),h("div",d1,[(f(!0),h(Q,null,tt(y,(I,X)=>(f(),h("div",{key:X,class:"row q-col-gutter-sm q-mb-sm"},[t("div",u1,[e(a(de),{modelValue:I.id,"onUpdate:modelValue":[ge=>I.id=ge,ge=>W(ge,X)],options:j.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:r.value,"hide-bottom-space":"",ref_for:!0,ref:ge=>c.value[X]=ge},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",m1,[e(De,{modelValue:I.amount,"onUpdate:modelValue":ge=>I.amount=ge,label:"Jumlah",outlined:!0,dense:"",disable:r.value,error:I.id==="wallet"&&!C.value,"error-message":I.id==="wallet"&&!C.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:ge=>v.value[X]=ge},Le({_:2},[y.length>1?{name:"append",fn:l(()=>[e(S,{size:"xs",name:"close",class:"cursor-pointer",onClick:ge=>E(I.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",c1,[e(U,{disable:!(y.length<3&&D.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:A,size:"sm"},null,8,["disable"])]),t("div",p1,[D.value>0?(f(),h("div",f1," Sisa Tagihan: Rp. "+i(a(K)(D.value)),1)):D.value<0?(f(),h("div",g1," Kembalian: Rp. "+i(a(K)(Math.abs(D.value))),1)):(f(),h("div",b1," Tagihan Terbayar "))])])):b.value==="debt"&&m.customer?(f(),h("div",v1,[e($a,{outlined:"",modelValue:p.value,"onUpdate:modelValue":T[1]||(T[1]=I=>p.value=I),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a($),"max-date":a(R),rules:N.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",_1," Total Utang: Rp. "+i(a(K)(m.total)),1)])):b.value==="debt"&&!m.customer?(f(),h("div",y1,[...T[8]||(T[8]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)])])):k("",!0)]),_:1}),e(mt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(a(de),{modelValue:u.value,"onUpdate:modelValue":T[2]||(T[2]=I=>u.value=I),options:x,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:r.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(U,{flat:"",label:"Batal",color:"grey",onClick:T[3]||(T[3]=I=>te.$emit("update:modelValue",!1)),class:"col"}),e(U,{label:b.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:z,disable:r.value||!P.value,loading:r.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},k1=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),w1={class:"row items-center no-wrap"},h1={class:"col-auto"},ho={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:n,emit:d}){const o=m,s=d,r=()=>{s("save")},b=G(()=>o.item.quantity*o.item.price),p=v=>{v.stopPropagation(),v.preventDefault()},u=v=>{o.modelValue&&(v.key==="Enter"?(r(),s("update:modelValue",!1),p(v)):v.key==="Escape"&&(s("update:modelValue",!1),p(v)))};return he(()=>{window.addEventListener("keydown",u)}),Pt(()=>{window.removeEventListener("keydown",u)}),n({getCurrentItem:()=>o.item}),(v,y)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":y[6]||(y[6]=g=>v.$emit("update:modelValue",g))},{default:l(()=>[e(ce,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",w1,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",h1,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=g=>v.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(oe,{modelValue:m.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=g=>m.item.product_name=g),label:"Produk","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(De,{modelValue:m.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=g=>m.item.quantity=g),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(De,{modelValue:m.item.price,"onUpdate:modelValue":y[3]||(y[3]=g=>m.item.price=g),label:"Harga",readonly:!m.item.price_editable,"hide-bottom-space":"",disable:m.isProcessing},null,8,["modelValue","readonly","disable"]),e(De,{modelValue:b.value,"onUpdate:modelValue":y[4]||(y[4]=g=>b.value=g),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(oe,{modelValue:m.item.notes,"onUpdate:modelValue":y[5]||(y[5]=g=>m.item.notes=g),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[ue]]),ee(e(U,{flat:"",label:"Simpan",color:"primary",onClick:r,disable:m.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$1=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),x1={key:0,class:"q-select__selected-item"},S1={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(m,{expose:n,emit:d}){const o=V(null),s=m,r=d,b=V([]);let p=null;const u=V(s.modelValue);he(()=>{s.initialData&&(u.value=s.initialData)}),Me(u,y=>{r("update:modelValue",y),r("customerSelected",y)}),Me(()=>s.modelValue,y=>{u.value=y}),n({focus:()=>{o.value&&o.value.focus()}});const v=(y,g)=>{if(y.length<s.minLength){g(()=>{b.value=[]});return}p&&clearTimeout(p),p=setTimeout(()=>{Qe.get(`/web-api/customers?q=${y}`).then(x=>{g(()=>{b.value=x.data.data})}).catch(x=>{console.error("Gagal mengambil data pelanggan:",x),g(()=>{b.value=[]})})},500)};return(y,g)=>(f(),O(de,{class:xe(m.class),ref_key:"qSelectRef",ref:o,modelValue:u.value,"onUpdate:modelValue":g[0]||(g[0]=x=>u.value=x),"use-input":"","input-debounce":"0",label:m.label,options:b.value,onFilter:v,clearable:"",error:m.error,behavior:"menu","error-message":m.errorMessage,disable:m.disable,"hide-bottom-space":"",outlined:m.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(x=>[e(le,Ul(Al(x.itemProps)),{default:l(()=>[e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[_(i(x.opt.name),1)]),_:2},1024),e(ve,{caption:""},{default:l(()=>[e(S,{name:"person",size:"14px"}),_(" "+i(x.opt.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(x=>[x.opt?(f(),h("div",x1,i(x.opt.name)+" ("+i(x.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},V1={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(m,{emit:n}){return(d,o)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>d.$emit("update:modelValue",s))},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])]),_:1}),e(ae,null,{default:l(()=>[...o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])]),_:1}),e(mt,{align:"center"},{default:l(()=>[ee(e(U,{dense:"",label:"Tutup"},null,512),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$o=_t(V1,[["__scopeId","data-v-92052544"]]),q1=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),C1={class:"row items-center no-wrap"},T1={class:"col text-subtite text-bold text-grey-8"},P1={class:"col-auto"},xo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:n,emit:d}){const o=m,s=d,r=()=>{s("save")},b=c=>{c.stopPropagation(),c.preventDefault()},p=c=>{o.modelValue&&(c.key==="Enter"?(r(),b(c)):c.key==="Escape"&&(s("update:modelValue",!1),b(c)))};return he(()=>{window.addEventListener("keydown",p)}),Pt(()=>{window.removeEventListener("keydown",p)}),n({getCurrentItem:()=>o.item}),(c,v)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":v[4]||(v[4]=y=>c.$emit("update:modelValue",y))},{default:l(()=>[e(ce,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",C1,[t("div",T1," Edit "+i(m.data.formatted_id),1),t("div",P1,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:v[0]||(v[0]=y=>c.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(Bt,{modelValue:m.data.datetime,"onUpdate:modelValue":v[1]||(v[1]=y=>m.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:m.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(oe,{modelValue:c.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status],"onUpdate:modelValue":v[2]||(v[2]=y=>c.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(oe,{modelValue:m.data.notes,"onUpdate:modelValue":v[3]||(v[3]=y=>m.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[ue]]),ee(e(U,{flat:"",label:"Simpan",color:"primary",onClick:r,disable:m.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},O1=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),I1={key:0},R1={style:{float:"right"}},D1={key:1},U1={style:{float:"right"}},A1={key:2},j1={style:{float:"right"}},E1={key:3},M1={style:{float:"right"}},N1={style:{float:"right"}},B1={class:"q-gutter-sm"},z1={class:"q-my-md"},F1={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(m,{emit:n}){const d=V(null),o=()=>{var s;(s=d.value)==null||s.focus()};return(s,r)=>(f(),O(ct,{"model-value":m.modelValue,"onUpdate:modelValue":r[0]||(r[0]=b=>s.$emit("update:modelValue",b)),onBeforeShow:o,persistent:""},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...r[1]||(r[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])]),_:1}),e(ae,{align:"center"},{default:l(()=>[r[22]||(r[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[r[2]||(r[2]=t("td",null,"ID",-1)),r[3]||(r[3]=t("td",null,":",-1)),t("td",null,i(m.order.formatted_id),1)]),m.customer?(f(),h("tr",I1,[r[5]||(r[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),r[6]||(r[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[_(i(m.customer.name)+" ",1),r[4]||(r[4]=t("br",null,null,-1)),_(i(m.customer.code),1)])])):k("",!0),t("tr",null,[r[8]||(r[8]=t("td",null,"Total",-1)),r[9]||(r[9]=t("td",null,":",-1)),t("td",null,[r[7]||(r[7]=_(" Rp. ",-1)),t("div",R1,i(a(K)(m.payment.total)),1)])]),m.payment.cash_amount?(f(),h("tr",D1,[r[11]||(r[11]=t("td",null,"Tunai",-1)),r[12]||(r[12]=t("td",null,":",-1)),t("td",null,[r[10]||(r[10]=_(" Rp. ",-1)),t("div",U1,i(a(K)(m.payment.cash_amount)),1)])])):k("",!0),m.payment.wallet_amount?(f(),h("tr",A1,[r[14]||(r[14]=t("td",null,"Wallet",-1)),r[15]||(r[15]=t("td",null,":",-1)),t("td",null,[r[13]||(r[13]=_(" Rp. ",-1)),t("div",j1,i(a(K)(m.payment.wallet_amount)),1)])])):k("",!0),m.payment.remaining_debt?(f(),h("tr",E1,[r[17]||(r[17]=t("td",null,"Piutang",-1)),r[18]||(r[18]=t("td",null,":",-1)),t("td",null,[r[16]||(r[16]=_(" Rp. ",-1)),t("span",M1,i(a(K)(m.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[r[20]||(r[20]=t("td",null,"Kembalian",-1)),r[21]||(r[21]=t("td",null,":",-1)),t("td",null,[r[19]||(r[19]=_(" Rp. ",-1)),t("div",N1,i(a(K)(m.payment.change)),1)])])])])]),_:1}),e(mt,{align:"center"},{default:l(()=>[t("div",B1,[e(U,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(U,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",z1,[e(U,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},So=_t(F1,[["__scopeId","data-v-85a4c3ae"]]),L1=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),H1={class:"q-gutter-sm"},K1={class:"row items-center"},Y1={class:"text-weight-bold"},W1={class:"row q-col-gutter-none full-width"},Q1={class:"col-sm-6 col-12 col"},J1={class:"row full-width"},G1={class:"col-sm-6 col-12"},X1={class:"row q-ml-sm items-end"},Z1={class:"row col grow"},eb={class:"col-12 q-pa-sm column"},tb={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},ab={key:0,class:"col"},lb={class:"text-caption text-grey-6 q-mt-xs"},ob={key:0,class:"text-caption text-grey-8 q-mt-xs"},nb={class:"text-italic"},sb={key:1,class:"col"},rb={class:"q-pa-sm q-pb-none text-grey-8"},ib={class:"col"},db={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},ub={class:"text-h4 text-weight-bold"},mb={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},cb={class:"col q-py-sm"},pb={class:"q-py-sm"},fb={__name:"Editor",setup(m){const n=$e(),d=fe(),o=V(!0),s=V(null),r=V(null),b=V(null),p=V(!1),u=V(null),c=V(null),{isFullscreen:v,toggleFullscreen:y}=fo(c),g=d.props.data.formatted_id,x=V(d.props.data.customer),j=V(null),w=V(""),D=V(!1),C=V(!1),$=V(!1),R=V(!1),N=V(!1),P=V(!1),A=V(null),E=Pe({id:d.props.data.id,formatted_id:d.props.data.formatted_id,customer_id:d.props.data.customer_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),B=G(()=>E.items.reduce((F,L)=>F+L.price*L.quantity,0)),z=()=>{var F;y(),v.value||(F=u==null?void 0:u.value)==null||F.hideDrawer()},q=F=>isNaN(F)||F<=0?(wt("Kuantitas tidak valid.","top"),!1):!0,W=F=>isNaN(F)||F<0?(wt("Harga tidak valid.","top"),!1):!0,te=F=>!F||F.length==0?(wt("Barcode tidak valid.","top"),!1):!0,T=F=>{w.value.endsWith("*")?w.value+=F.name:w.value=F.name},I=async()=>{const F=w.value.trim();if(F.length===0){$.value=!0;return}const L=F.split("*");let me=1,re="",pe=null;if(L.length===1)re=L[0];else if(L.length<=3)me=parseInt(L[0]),re=L[1],L.length===3&&(pe=parseFloat(L[2]));else{wt("Input tidak valid.","top");return}if(re.length===0){$.value=!0;return}!te(re)&&!q(me)&&!W(pe)||(D.value=!0,await Qe.post(route("admin.sales-order.add-item"),{order_id:E.id,product_code:re,qty:me,price:pe,merge:o.value}).then(He=>{const ot=He.data.data.item;let kt=-1;He.data.data.mergeItem&&(kt=E.items.findIndex(ua=>ua.id===ot.id)),kt===-1?E.items.push(ot):E.items[kt]=ot,w.value="",pe!==null&&pe!==parseFloat(ot.price)&&wt("Harga tidak dapat diubah!","top")}).catch(He=>{var ot,kt;gt((kt=(ot=He.response)==null?void 0:ot.data)==null?void 0:kt.message,"top"),console.error("Gagal mengambil data produk:",He)}),D.value=!1,vt(()=>{var He;(He=s.value)==null||He.focus()}))},X=F=>{A.value=Object.create(F),R.value=!0},ge=F=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${F.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{D.value=!0,Qe.post(route("admin.sales-order.remove-item"),{id:F.id}).then(()=>{const L=E.items.findIndex(me=>me.id===F.id);L!==-1&&(E.items.splice(L,1)[0],bt("Item telah dihapus","top"))}).catch(L=>{var me,re;gt(((re=(me=L==null?void 0:L.response)==null?void 0:me.data)==null?void 0:re.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{D.value=!1})})},ne=()=>{D.value=!0;const F=r.value.getCurrentItem(),L={id:F.id,qty:F.quantity};F.price_editable&&(L.price=F.price),F.notes&&(L.notes=F.notes),Qe.post(route("admin.sales-order.update-item"),L).then(me=>{const re=me.data.data,pe=E.items.findIndex(He=>He.id===re.id);pe!==-1&&(E.items[pe]=re,bt("Item telah diperbarui","top"))}).catch(me=>{var re,pe;gt(((pe=(re=me==null?void 0:me.response)==null?void 0:re.data)==null?void 0:pe.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(me)}).finally(()=>{D.value=!1})};he(()=>{const F=L=>{C.value||p.value||R.value||$.value||N.value||(L.key==="F1"?(L.preventDefault(),p.value=!0):L.key==="F2"?(L.preventDefault(),b.value.focus()):L.key==="F3"?(L.preventDefault(),s.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),C.value=!0):L.key==="F11"&&(L.preventDefault(),z()))};document.addEventListener("keydown",F),Pt(()=>{document.removeEventListener("keydown",F)}),vt(()=>{var L;(L=u==null?void 0:u.value)==null||L.hideDrawer()})});const Ce=async F=>{x.value=F,E.customer_id=F==null?void 0:F.id,await Ie(),vt(()=>{var L;(L=s.value)==null||L.focus()})},Ie=async()=>{D.value=!0;const F={id:E.id,customer_id:E.customer_id,datetime:ea(E.datetime),notes:E.notes};await Qe.post(route("admin.sales-order.update"),F).then(L=>{const me=L.data.data.id;E.customer_id=me.customer_id}).catch(L=>{var me,re;gt(((re=(me=L==null?void 0:L.response)==null?void 0:me.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{D.value=!1})},ft=F=>{if(E.items.length===0){bt("Item masih kosong","top");return}const L={id:E.id,...F};D.value=!0,Qe.post(route("admin.sales-order.close"),L).then(me=>{bt("Transaksi selesai"),L.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:E.id,size:d.props.settings.default_print_size}),"_self"):L.after_payment_action==="detail"?Z.get(route("admin.sales-order.detail",{id:E.id})):L.after_payment_action==="new-order"&&Z.get(route("admin.sales-order.add"))}).catch(me=>{var re,pe;gt((pe=(re=me.response)==null?void 0:re.data)==null?void 0:pe.message),console.error(me)}).finally(()=>{D.value=!1})},pt=()=>{zt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${E.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.sales-order.cancel",{id:E.id}),{id:E.id}).then(()=>{bt("Transaksi telah dibatalkan."),Z.visit(route("admin.sales-order.detail",{id:E.id}))}).catch(F=>{var me,re;const L=((re=(me=F.response)==null?void 0:me.data)==null?void 0:re.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:L,color:"warning",position:"bottom"}),console.error(F)})})},yt=()=>{window.open(route("admin.sales-order.detail",{id:E.id})+"?preview=1","_blank")},be=G(()=>x.value?x.value.wallet_balance>=B.value:!0);return(F,L)=>{const me=Y("i-head"),re=Y("authenticated-layout");return f(),h(Q,null,[e(me,{title:a(g)},null,8,["title"]),e(re,{ref_key:"authLayoutRef",ref:u,"show-drawer-button":!0},{title:l(()=>[_(i(a(g)),1)]),"left-button":l(()=>[t("div",H1,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=pe=>a(Z).get(F.route("admin.sales-order.index")))})])]),"right-button":l(()=>[t("div",K1,[a(n).screen.gt.sm?(f(),h(Q,{key:0},[t("div",Y1,i(a(d).props.auth.user.username),1),L[22]||(L[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(co)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Ve,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(ce,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",W1,[t("div",Q1,[t("div",J1,[e(S1,{ref_key:"customerAutocompleteRef",ref:b,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:x.value,"onUpdate:modelValue":L[2]||(L[2]=pe=>x.value=pe),label:"Pelanggan",disable:D.value,onCustomerSelected:Ce,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",be.value?"text-green":"text-red"])}," Saldo: "+i(x.value?"Rp. "+a(K)(x.value?x.value.wallet_balance:0):"Tidak tersedia"),3)])]),t("div",G1,[e(oe,{ref_key:"userInputRef",ref:s,modelValue:w.value,"onUpdate:modelValue":L[5]||(L[5]=pe=>w.value=pe),onKeyup:L[6]||(L[6]=aa(J(pe=>I(),["prevent"]),["enter"])),loading:D.value,disable:D.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(S,{name:"search",onClick:L[3]||(L[3]=pe=>$.value=!0),class:"cursor-pointer"})]),append:l(()=>{var pe;return[((pe=w.value)==null?void 0:pe.length)>0?(f(),O(S,{key:0,name:"send",onClick:L[4]||(L[4]=He=>I()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",X1,[e(qt,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[7]||(L[7]=pe=>o.value=pe),label:"Gabungkan item",disable:D.value},null,8,["modelValue","disable"])])])]),t("div",Z1,[t("div",eb,[e(ko,{items:E.items,onUpdateQuantity:L[8]||(L[8]=({id:pe,value:He})=>F.updateQuantity(pe,He)),onRemoveItem:ge,onEditItem:X,"is-processing":D.value},null,8,["items","is-processing"])])]),t("div",tb,[a(n).screen.gt.sm?(f(),h("div",ab,[t("div",lb,i(E.items.length)+" item(s) ",1),E.notes?(f(),h("div",ob,[L[23]||(L[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",nb,[e(we,{text:E.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(n).screen.gt.sm?(f(),h("div",sb,[t("div",rb,[t("div",null,"#: "+i(E.formatted_id),1),t("div",null,i(a(_e)(E.datetime)),1)])])):k("",!0),t("div",ib,[t("div",db,[L[25]||(L[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",ub,[L[24]||(L[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),_(" "+i(a(K)(B.value)),1)])])])]),t("div",mb,[t("div",cb,[e(U,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:L[9]||(L[9]=pe=>C.value=!0),disable:!F.$can("admin.sales-order.close")||D.value||E.items.length===0||E.status!=="draft",loading:D.value},null,8,["disable","loading"])]),t("div",pb,[e(U,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[13]||(L[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[ee((f(),O(le,{clickable:"",onClick:L[10]||(L[10]=J(pe=>N.value=!0,["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...L[26]||(L[26]=[_("Edit Rincian",-1)])]),_:1})]),_:1})),[[se],[ue]]),ee((f(),O(le,{clickable:"",onClick:L[11]||(L[11]=J(pe=>yt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"preview"})]),_:1}),e(M,null,{default:l(()=>[...L[27]||(L[27]=[_("Pratinjau",-1)])]),_:1})]),_:1})),[[se],[ue]]),ee((f(),O(le,{clickable:"",onClick:L[12]||(L[12]=J(pe=>pt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"cancel",color:"negative"})]),_:1}),e(M,{class:"text-negative"},{default:l(()=>[...L[28]||(L[28]=[_(" Batalkan ",-1)])]),_:1})]),_:1})),[[se],[ue]]),e(Je)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(ho,{ref_key:"itemEditorRef",ref:r,modelValue:R.value,"onUpdate:modelValue":L[14]||(L[14]=pe=>R.value=pe),item:A.value,onSave:L[15]||(L[15]=pe=>ne()),"is-processing":D.value},null,8,["modelValue","item","is-processing"]),e(wo,{modelValue:C.value,"onUpdate:modelValue":L[16]||(L[16]=pe=>C.value=pe),onAccepted:ft,form:E,customer:x.value,total:B.value,accounts:a(d).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(uo,{modelValue:$.value,"onUpdate:modelValue":L[17]||(L[17]=pe=>$.value=pe),onProductSelected:T},null,8,["modelValue"]),e(xo,{modelValue:N.value,"onUpdate:modelValue":L[18]||(L[18]=pe=>N.value=pe),data:E,onSave:L[19]||(L[19]=pe=>Ie()),"is-processing":D.value},null,8,["modelValue","data","is-processing"]),e($o,{modelValue:p.value,"onUpdate:modelValue":L[20]||(L[20]=pe=>p.value=pe)},null,8,["modelValue"]),e(So,{modelValue:P.value,"onUpdate:modelValue":L[21]||(L[21]=pe=>P.value=pe),order:E,customer:x.value,total:B.value,payment:j.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},gb=Object.freeze(Object.defineProperty({__proto__:null,default:fb},Symbol.toStringTag,{value:"Module"})),bb={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(m){const n=window.CONSTANTS.SALES_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,s)=>(f(),O(ia,{status:m.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}},vb={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(m){const n=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,s)=>(f(),O(ia,{status:m.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}};const _b={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},yb={class:"q-pa-xs"},kb={class:"full-width row flex-center text-grey-8 q-gutter-sm"},wb={key:0},hb={key:1},$b={key:2},xb={key:3},Sb={key:0},Vb={key:1},qb={key:0},Cb={key:0},Tb={key:1},Pb={class:"flex justify-end"},cl="Penjualan",Ob={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=Wt(),c=Qt(),v=[{label:"Semua Tahun",value:"all"},{label:`${u}`,value:u},...Dt(u-2,u-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Ut()],g=[{value:"all",label:"Semua Status"},...et(window.CONSTANTS.SALES_ORDER_STATUSES)],x=[{value:"all",label:"Semua Status"},...et(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],j=[{value:"all",label:"Semua Status"},...et(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],w=Pe({search:"",year:u,month:c,status:"all",payment_status:"all",delivery_status:"all",...Ue()}),D=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{E()});const $=q=>{if(q.status=="draft"){R(q);return}N(q)},R=q=>{Z.get(route("admin.sales-order.edit",q.id))},N=q=>{Z.get(route("admin.sales-order.detail",q.id))},P=q=>{zt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${q.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.sales-order.cancel",{id:q.id}),{id:q.id}).then(W=>{const te=W.data.data,T=o.value.findIndex(I=>I.id===te.id);if(T===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[T].status="canceled",n.notify({message:W.data.message,position:"bottom"})}).catch(W=>{var T,I;const te=((I=(T=W.response)==null?void 0:T.data)==null?void 0:I.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:te,color:"warning",position:"bottom"}),console.error(W)})})},A=q=>at({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${q.formatted_id}?`,url:route("admin.sales-order.delete",q.id),fetchItemsCallback:E,loading:s}),E=(q=null)=>{Ae({pagination:D,filter:w,props:q,rows:o,url:route("admin.sales-order.data"),loading:s,tableRef:r})},B=()=>{E()},z=G(()=>n.screen.gt.sm?C:C.filter(q=>q.name==="id"||q.name==="action"));return Me(()=>w.year,q=>{q===null&&(w.month=null)}),(q,W)=>{const te=Y("i-head"),T=Y("authenticated-layout");return f(),h(Q,null,[e(te,{title:cl}),e(T,null,Le({title:l(()=>[_(i(cl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:W[0]||(W[0]=I=>d.value=!d.value)},null,8,["icon"]),q.$can("admin.sales-order.edit")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:W[1]||(W[1]=I=>a(Z).get(q.route("admin.sales-order.add")))})):k("",!0)]),default:l(()=>[t("div",yb,[e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":W[11]||(W[11]=I=>D.value=I),filter:w.search,loading:s.value,columns:z.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ee({height:a(p)}),onRequest:E,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:I,message:X,filter:ge})=>[t("div",kb,[t("span",null,i(X)+" "+i(ge?" with term "+ge:""),1)])]),body:l(I=>[e(qe,{props:I,class:"cursor-pointer",onClick:J(X=>$(I.row),["prevent"])},{default:l(()=>[e(H,{key:"id",props:I,class:"wrap-column"},{default:l(()=>{var X,ge,ne;return[t("div",null,[e(S,{name:"tag"}),_(" "+i(I.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),_(i(a(_e)(I.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(f(),h(Q,{key:0},[I.row.cashier?(f(),h("div",wb,[e(S,{name:"person",class:"inline-icon"}),_(" Kasir: "+i((X=I.row.cashier)==null?void 0:X.username),1)])):k("",!0),I.row.cashier_session?(f(),h("div",hb,[e(S,{name:"point_of_sale",class:"inline-icon"}),_(" Terminal: "+i((ne=(ge=I.row.cashier_session)==null?void 0:ge.cashier_terminal)==null?void 0:ne.name),1)])):k("",!0),I.row.customer?(f(),h("div",$b,[e(S,{name:"person",class:"inline-icon"}),e(jl,{href:q.route("admin.customer.detail",{id:I.row.customer.id}),onClick:W[8]||(W[8]=J(()=>{},["stop"]))},{default:l(()=>[_("  "+i(I.row.customer.code)+" - "+i(I.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+i(a(K)(I.row.grand_total)),1),I.row.notes?(f(),h("div",xb,[e(S,{name:"notes"}),_(" "+i(I.row.notes),1)])):k("",!0)],64)),t("div",null,[e(bb,{status:I.row.status},null,8,["status"]),e(vb,{status:I.row.payment_status},null,8,["status"]),k("",!0)])]}),_:2},1032,["props"]),e(H,{key:"cashier_id",props:I},{default:l(()=>{var X,ge,ne;return[I.row.cashier?(f(),h("div",Sb,[e(S,{name:"person",class:"inline-icon"}),_(" "+i((X=I.row.cashier)==null?void 0:X.username),1)])):k("",!0),I.row.cashier_session?(f(),h("div",Vb,[e(S,{name:"point_of_sale",class:"inline-icon"}),_(" "+i((ne=(ge=I.row.cashier_session)==null?void 0:ge.cashier_terminal)==null?void 0:ne.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(H,{key:"customer_id",props:I},{default:l(()=>[I.row.customer?(f(),h("div",qb,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+i(I.row.customer_code)+" - "+i(I.row.customer_name),1)]),I.row.customer_phone?(f(),h("div",Cb,[e(S,{name:"phone",class:"inline-icon"}),_(" "+i(I.row.customer_phone),1)])):k("",!0),I.row.customer_address?(f(),h("div",Tb,[e(S,{name:"home_pin",class:"inline-icon"}),_(" "+i(I.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"total",props:I},{default:l(()=>[_(i(a(K)(I.row.grand_total)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:I},{default:l(()=>[e(we,{text:I.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:I,onClick:W[10]||(W[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",Pb,[q.$can("admin.sales-order.detail")||q.$can("admin.sales-order.edit")||q.$can("admin.sales-order.cancel")||q.$can("admin.sales-order.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:W[9]||(W[9]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[I.row.status!="draft"&&q.$can("admin.sales-order.detail")?ee((f(),O(le,{key:0,onClick:J(X=>N(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"visibility"})]),_:1}),e(M,null,{default:l(()=>[...W[12]||(W[12]=[_(" Lihat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),I.row.status=="draft"&&q.$can("admin.sales-order.edit")?ee((f(),O(le,{key:1,onClick:J(X=>R(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...W[13]||(W[13]=[_(" Edit ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),I.row.status=="draft"&&q.$can("admin.sales-order.cancel")?ee((f(),O(le,{key:2,onClick:J(X=>P(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"cancel"})]),_:1}),e(M,null,{default:l(()=>[...W[14]||(W[14]=[_(" Batalkan ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),e(Je),q.$can("admin.sales-order.delete")?ee((f(),O(le,{key:3,onClick:J(X=>A(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...W[15]||(W[15]=[_(" Hapus ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",_b,[e(de,{modelValue:w.year,"onUpdate:modelValue":[W[2]||(W[2]=I=>w.year=I),B],options:v,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(f(),O(de,{key:0,modelValue:w.month,"onUpdate:modelValue":[W[3]||(W[3]=I=>w.month=I),B],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:w.status,"onUpdate:modelValue":[W[4]||(W[4]=I=>w.status=I),B],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:w.payment_status,"onUpdate:modelValue":[W[5]||(W[5]=I=>w.payment_status=I),B],options:x,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":W[7]||(W[7]=I=>w.search=I),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ib=Object.freeze(Object.defineProperty({__proto__:null,default:Ob},Symbol.toStringTag,{value:"Module"})),Vo={__name:"CompanyInfoForm",setup(m){const n=V(),d=fe(),o=ze({name:d.props.data.name,headline:d.props.data.headline,phone:d.props.data.phone,address:d.props.data.address,logo_path:d.props.data.logo_path,logo_image:null}),s=V(null),r=V("");he(()=>{o.logo_path&&(r.value=`/${o.logo_path}`)});function b(){s.value.click()}function p(v){const y=v.target.files[0];y&&(o.logo_image=y,r.value=URL.createObjectURL(y))}function u(){o.logo_image=null,o.logo_path=null,r.value=null,s.value.value=null}const c=()=>Xe({form:o,url:route("admin.company-profile.edit")});return(v,y)=>(f(),O(Fe,{class:"row",onSubmit:J(c,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[y[8]||(y[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),y[9]||(y[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(oe,{ref_key:"nameInputRef",ref:n,modelValue:a(o).name,"onUpdate:modelValue":y[0]||(y[0]=g=>a(o).name=g),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[g=>g&&g.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(o).headline,"onUpdate:modelValue":y[1]||(y[1]=g=>a(o).headline=g),modelModifiers:{trim:!0},label:"Headline",disable:a(o).processing,maxlength:"200","lazy-rules":"",error:!!a(o).errors.headline,"error-message":a(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).phone,"onUpdate:modelValue":y[2]||(y[2]=g=>a(o).phone=g),modelModifiers:{trim:!0},label:"No Telepon",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.phone,"error-message":a(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(o).address,"onUpdate:modelValue":y[3]||(y[3]=g=>a(o).address=g),modelModifiers:{trim:!0},label:"Alamat",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[y[7]||(y[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(U,{label:"Browse Logo",size:"sm",onClick:b,color:"secondary",icon:"add_a_photo",disable:a(o).processing},null,8,["disable"]),e(U,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:a(o).processing||!r.value,color:"red",onClick:u},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:s,accept:"image/*",style:{display:"none"},onChange:p},null,544),t("div",null,[e(Yt,{src:r.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},Le({error:l(()=>[y[4]||(y[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[r.value?void 0:{name:"default",fn:l(()=>[y[5]||(y[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),y[6]||(y[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(ae,null,{default:l(()=>[e(U,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Rb=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Db={class:"q-pa-xs"},Ub={class:"row justify-center"},Ab={class:"col col-md-6"},pl="Profil Perusahaan",jb={__name:"Edit",setup(m){return(n,d)=>{const o=Y("i-head"),s=Y("authenticated-layout");return f(),h(Q,null,[e(o,{title:pl}),e(s,null,{title:l(()=>[_(i(pl))]),default:l(()=>[t("div",Db,[t("div",Ub,[t("div",Ab,[e(Vo)])])])]),_:1})],64)}}},Eb=Object.freeze(Object.defineProperty({__proto__:null,default:jb},Symbol.toStringTag,{value:"Module"})),Mb={class:"col-xs-12 col-md-8"},Nb={class:"col-xs-12 col-sm-9"},Bb={class:"col-xs-12 col-sm-3 text-right"},fl="Pengaturan Database & Utilitas",zb={__name:"Index",setup(m){const n=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:"⚠️ **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:"⛔ **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:"❌ **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(d,o)=>{const s=Y("i-head"),r=Y("authenticated-layout");return f(),h(Q,null,[e(s,{title:fl}),e(r,null,{title:l(()=>[_(i(fl))]),default:l(()=>[e(Ve,{class:"row justify-center q-pa-xs"},{default:l(()=>[t("div",Mb,[e(ce,{square:"",flat:"",bordered:"",class:"full-width"},{default:l(()=>[e(ae,null,{default:l(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Kt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:l(()=>[e(S,{name:"warning",color:"red"})]),default:l(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=_(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. ",-1))]),_:1})]),_:1}),e(Je),e(ae,{class:"q-gutter-y-lg"},{default:l(()=>[(f(),h(Q,null,tt(n,b=>t("div",{key:b.name,class:"row items-center q-col-gutter-md"},[t("div",Nb,[e(le,{class:"q-pa-none"},{default:l(()=>[e(M,{avatar:"",class:"q-pr-md"},{default:l(()=>[e(S,{name:b.icon,color:b.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(M,{style:{"text-wrap":"initial"}},{default:l(()=>[e(ve,{class:"text-subtitle1 text-bold"},{default:l(()=>[_(i(b.name),1)]),_:2},1024),e(ve,{caption:"",class:"q-pb-sm"},{default:l(()=>[_(i(b.description),1)]),_:2},1024),e(ve,{class:"text-caption text-negative text-bold"},{default:l(()=>[_(i(b.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",Bb,[e(U,{icon:b.icon,label:b.name.split(" ")[0],color:b.color,disable:b.disable,onClick:b.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},Fb=Object.freeze(Object.defineProperty({__proto__:null,default:zb},Symbol.toStringTag,{value:"Module"})),Lb={class:"q-pa-xs"},Hb={class:"row justify-center"},Kb={class:"col col-md-6"},Yb={__name:"Edit",setup(m){const n=fe(),d=ze({foot_note:n.props.data.foot_note,default_payment_mode:n.props.data.default_payment_mode,default_print_size:n.props.data.default_print_size,after_payment_action:n.props.data.after_payment_action}),o=()=>Xe({form:d,url:route("admin.pos-settings.edit")}),s=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],r=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],b=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(p,u)=>{const c=Y("i-head"),v=Y("authenticated-layout");return f(),h(Q,null,[e(c,{title:"Pengaturan POS"}),e(v,null,{title:l(()=>[...u[4]||(u[4]=[_("Pengaturan POS",-1)])]),default:l(()=>[t("div",Lb,[t("div",Hb,[t("div",Kb,[e(Fe,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[u[5]||(u[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),u[6]||(u[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(de,{modelValue:a(d).default_payment_mode,"onUpdate:modelValue":u[0]||(u[0]=y=>a(d).default_payment_mode=y),label:"Default Pembayaran",options:s,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.default_payment_mode,"error-message":a(d).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(d).default_print_size,"onUpdate:modelValue":u[1]||(u[1]=y=>a(d).default_print_size=y),label:"Default Ukuran Cetak",options:r,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.default_print_size,"error-message":a(d).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(d).after_payment_action,"onUpdate:modelValue":u[2]||(u[2]=y=>a(d).after_payment_action=y),label:"Aksi Setelah Pembayaran",options:b,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.after_payment_action,"error-message":a(d).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(d).foot_note,"onUpdate:modelValue":u[3]||(u[3]=y=>a(d).foot_note=y),modelModifiers:{trim:!0},label:"Foot Note",disable:a(d).processing,"lazy-rules":"",error:!!a(d).errors.foot_note,"error-message":a(d).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,null,{default:l(()=>[e(U,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(d).processing,loading:a(d).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},Wb=Object.freeze(Object.defineProperty({__proto__:null,default:Yb},Symbol.toStringTag,{value:"Module"})),Qb={class:"q-gutter-sm"},Jb={class:"q-gutter-sm"},Gb={class:"col col-md-6 q-pa-xs"},Xb={class:"row"},Zb={class:"detail"},ev={style:{"text-wrap":"initial !important"}},tv={key:0,class:"text-italic text-grey-8"},av={key:0},lv={colspan:"100%",class:"q-pa-none bg-white"},ov={class:"bg-grey-3 q-ma-none",style:{overflow:"auto",width:"100%","text-wrap":"auto"}},nv={class:"text-caption text-mono"},gl="Rincian Log Aktifitas",sv={__name:"Detail",setup(m){const n=fe(),d=G(()=>{const s=n.props.data.metadata;if(!s)return"Tidak ada Metadata.";try{const r=JSON.parse(s);return JSON.stringify(r,null,2)}catch(r){return console.error("Gagal memformat JSON Metadata:",r),s}}),o=()=>at({message:`Hapus log aktifitas #${n.props.data.id}?`,url:route("admin.user-activity-log.delete",n.props.data.id),onSuccess:()=>{Z.get(route("admin.user-activity-log.index"))}});return(s,r)=>{const b=Y("i-head"),p=Y("i-link"),u=Y("authenticated-layout");return f(),h(Q,null,[e(b,{title:gl}),e(u,{"show-drawer-button":!0},{title:l(()=>[_(i(gl))]),"left-button":l(()=>[t("div",Qb,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=c=>s.$goBack())})])]),"right-button":l(()=>[t("div",Jb,[e(U,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:r[1]||(r[1]=c=>o())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Gb,[t("div",Xb,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[r[20]||(r[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Info Log Aktifitas Pengguna ",-1)),t("table",Zb,[t("tbody",null,[t("tr",null,[r[2]||(r[2]=t("td",{style:{width:"100px"}},"ID",-1)),r[3]||(r[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.id),1)]),t("tr",null,[r[4]||(r[4]=t("td",null,"Waktu",-1)),r[5]||(r[5]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.logged_at)),1)]),t("tr",null,[r[6]||(r[6]=t("td",null,"Pengguna",-1)),r[7]||(r[7]=t("td",null,":",-1)),t("td",null,[e(p,{href:s.route("admin.user.detail",{id:a(n).props.data.user_id})},{default:l(()=>[_(i(a(n).props.data.username),1)]),_:1},8,["href"])])]),t("tr",null,[r[8]||(r[8]=t("td",null,"Kategori",-1)),r[9]||(r[9]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.activity_category_label),1)]),t("tr",null,[r[10]||(r[10]=t("td",null,"Aktifitas",-1)),r[11]||(r[11]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.activity_name_label),1)]),t("tr",null,[r[12]||(r[12]=t("td",null,"Deskripsi",-1)),r[13]||(r[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.description),1)]),t("tr",null,[r[14]||(r[14]=t("td",null,"Alamat IP",-1)),r[15]||(r[15]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.ip_address),1)]),t("tr",null,[r[16]||(r[16]=t("td",null,"User Agent",-1)),r[17]||(r[17]=t("td",null,":",-1)),t("td",ev,i(a(n).props.data.user_agent),1)]),t("tr",null,[r[18]||(r[18]=t("td",null,"Meta Data",-1)),r[19]||(r[19]=t("td",null,":",-1)),t("td",null,[!a(n).props.data.metadata||Object.keys(a(n).props.data.metadata).length===0?(f(),h("div",tv," Tidak tersedia ")):k("",!0)])]),typeof a(n).props.data.metadata=="object"&&Object.keys(a(n).props.data.metadata).length>0||Array.isArray(a(n).props.data.metadata)&&a(n).props.data.metadata.length>0?(f(),h("tr",av,[t("td",lv,[t("pre",ov,[t("code",nv,i(d.value),1)])])])):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},rv=_t(sv,[["__scopeId","data-v-babd0515"]]),iv=Object.freeze(Object.defineProperty({__proto__:null,default:rv},Symbol.toStringTag,{value:"Module"}));function dv(){return{protectClick:n=>(d,o)=>{const s=window.getSelection();if(s&&!s.isCollapsed){o.stopPropagation();return}n(d,o)}}}const uv={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},mv={class:"q-pa-xs"},cv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},pv={key:0},fv={class:"flex justify-end"},bl="Log Aktifitas Pengguna",gv={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),{protectClick:u}=dv(),c=Pe({search:"",...Ue()}),v=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),y=[{name:"id",label:n.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{x()});const g=$=>at({message:`Hapus log #${$.id}?`,url:route("admin.user-activity-log.delete",$.id),fetchItemsCallback:x,loading:s}),x=($=null)=>{Ae({pagination:v,filter:c,props:$,rows:o,url:route("admin.user-activity-log.data"),loading:s,tableRef:r})},w=u($=>Z.get(route("admin.user-activity-log.detail",{id:$.id}))),D=G(()=>n.screen.gt.sm?y:y.filter($=>$.name==="id"||$.name==="action")),C=()=>{zt.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{bt("Seluruh log telah dibersihkan."),x()}).catch($=>{var N,P;const R=((P=(N=$.response)==null?void 0:N.data)==null?void 0:P.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";gt(R,"bottom"),console.error($)})})};return($,R)=>{const N=Y("i-head"),P=Y("i-link"),A=Y("authenticated-layout");return f(),h(Q,null,[e(N,{title:bl}),e(A,null,Le({title:l(()=>[_(i(bl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=E=>d.value=!d.value)},null,8,["icon"]),$.$can("admin.user-activity-log.clear")?(f(),O(U,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:C})):k("",!0)]),default:l(()=>[t("div",mv,[e(Te,{class:"full-height-table",ref_key:"tableRef",ref:r,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:v.value,"onUpdate:pagination":R[4]||(R[4]=E=>v.value=E),filter:c.search,loading:s.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ee({height:a(p)}),onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:E,message:B,filter:z})=>[t("div",cv,[t("span",null,i(B)+" "+i(z?" with term "+z:""),1)])]),body:l(E=>[e(qe,{props:E,class:"cursor-pointer",onClick:J(B=>a(w)(E.row,B),["stop"])},{default:l(()=>[e(H,{key:"id",props:E},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(f(),h(Q,{key:0},[e(S,{name:"tag",class:"inline-icon"}),R[5]||(R[5]=_(" ID Aktifitas: ",-1))],64)):k("",!0),_(" "+i(E.row.id),1)]),a(n).screen.lt.md?(f(),h("div",pv,[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+i(a(_e)(E.row.logged_at)),1)]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),e(P,{onClick:R[2]||(R[2]=J(()=>{},["stop"])),href:$.route("admin.user.detail",{id:E.row.user_id})},{default:l(()=>[_(i(E.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(S,{name:"category",class:"inline-icon"}),_(" "+i(E.row.activity_category_label)+" > "+i(E.row.activity_name_label),1)]),t("div",null,[e(S,{name:"notes",class:"inline-icon"}),_(" "+i(E.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"logged_at",props:E},{default:l(()=>[_(i(a(_e)(E.row.logged_at)),1)]),_:2},1032,["props"]),e(H,{key:"username",props:E},{default:l(()=>[e(P,{onClick:R[3]||(R[3]=J(()=>{},["stop"])),href:$.route("admin.user.detail",{id:E.row.user_id})},{default:l(()=>[_(i(E.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(H,{key:"activity_category",props:E},{default:l(()=>[_(i(E.row.activity_category_label),1)]),_:2},1032,["props"]),e(H,{key:"activity_name",props:E},{default:l(()=>[_(i(E.row.activity_name_label),1)]),_:2},1032,["props"]),e(H,{key:"description",props:E,class:"wrap-column"},{default:l(()=>[_(i(E.row.description),1)]),_:2},1032,["props"]),e(H,{key:"action",props:E},{default:l(()=>[t("div",fv,[$.$can("admin.user-role.delete")?(f(),O(U,{key:0,onClick:J(B=>g(E.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",uv,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":R[1]||(R[1]=E=>c.search=E),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},bv=Object.freeze(Object.defineProperty({__proto__:null,default:gv},Symbol.toStringTag,{value:"Module"})),qo={__name:"UpdatePasswordForm",setup(m){const n=V(!1),d=V(null),o=V(null),s=ze({current_password:"",password:"",password_confirmation:""}),r=()=>{s.clearErrors(),s.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>s.reset(),onError:()=>{s.errors.password&&(s.reset("password","password_confirmation"),d.value.focus()),s.errors.current_password&&(s.reset("current_password"),o.value.focus())}})};return(b,p)=>(f(),O(Fe,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[p[6]||(p[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),p[7]||(p[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(oe,{modelValue:a(s).current_password,"onUpdate:modelValue":p[1]||(p[1]=u=>a(s).current_password=u),type:n.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.current_password,"error-message":a(s).errors.current_password,rules:[u=>u&&u.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(U,{dense:"",flat:"",round:"",onClick:p[0]||(p[0]=u=>n.value=!n.value)},{default:l(()=>[e(S,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(oe,{modelValue:a(s).password,"onUpdate:modelValue":p[3]||(p[3]=u=>a(s).password=u),type:n.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.password,"error-message":a(s).errors.password,rules:[u=>u&&u.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(U,{dense:"",flat:"",round:"",onClick:p[2]||(p[2]=u=>n.value=!n.value)},{default:l(()=>[e(S,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(oe,{modelValue:a(s).password_confirmation,"onUpdate:modelValue":p[5]||(p[5]=u=>a(s).password_confirmation=u),type:n.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.password_confirmation,"error-message":a(s).errors.password_confirmation,rules:[u=>u&&u.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(U,{dense:"",flat:"",round:"",onClick:p[4]||(p[4]=u=>n.value=!n.value)},{default:l(()=>[e(S,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(ae,null,{default:l(()=>[e(U,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:a(s).processing,loading:a(s).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},vv=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Co={__name:"UpdateProfileInformationForm",setup(m){const d=fe().props.auth.user,o=ze({name:d.name,username:d.username,type:window.CONSTANTS.USER_TYPES[d.type]}),s=()=>Xe({form:o,url:route("admin.user-profile.update")});return(r,b)=>(f(),O(Fe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[b[3]||(b[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),b[4]||(b[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(oe,{modelValue:a(o).username,"onUpdate:modelValue":b[0]||(b[0]=p=>a(o).username=p),label:"ID Pengguna",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(oe,{modelValue:a(o).name,"onUpdate:modelValue":b[1]||(b[1]=p=>a(o).name=p),modelModifiers:{trim:!0},label:"Nama",disable:a(o).processing,error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[p=>p&&p.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(o).type,"onUpdate:modelValue":b[2]||(b[2]=p=>a(o).type=p),label:"Jenis Akun",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(ae,null,{default:l(()=>[e(U,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},_v=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),yv={class:"q-pa-xs"},kv={class:"row justify-center"},wv={class:"col col-md-6"},vl="Profil Saya",hv={__name:"Edit",setup(m){return(n,d)=>{const o=Y("i-head"),s=Y("authenticated-layout");return f(),h(Q,null,[e(o,{title:vl}),e(s,null,{title:l(()=>[_(i(vl))]),default:l(()=>[t("div",yv,[t("div",kv,[t("div",wv,[e(Co,{class:"q-mb-md"}),e(qo)])])])]),_:1})],64)}}},$v=Object.freeze(Object.defineProperty({__proto__:null,default:hv},Symbol.toStringTag,{value:"Module"})),xv={class:"q-gutter-sm"},Sv={class:"q-gutter-sm"},Vv={class:"col col-md-6 q-pa-xs"},qv={class:"row"},Cv={class:"detail"},Tv={key:0},Pv={key:1,class:"text-grey-8 text-italic"},Ov={key:2},Iv={class:"text-subtitle2 text-bold text-grey-8 q-mt-xs"},Rv={key:3,class:"text-grey-8 text-italic"},_l="Rincian Role Pengguna",Dv={__name:"Detail",setup(m){const n=fe(),d=G(()=>{const o={};return n.props.data.permissions&&n.props.data.permissions.forEach(s=>{const r=s.category;o[r]||(o[r]=[]),o[r].push(s)}),o});return(o,s)=>{const r=Y("i-head"),b=Y("i-link"),p=Y("authenticated-layout");return f(),h(Q,null,[e(r,{title:_l}),e(p,{"show-drawer-button":!0},{title:l(()=>[_(i(_l))]),"left-button":l(()=>[t("div",xv,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=u=>o.$goBack())})])]),"right-button":l(()=>[t("div",Sv,[e(U,{icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:s[1]||(s[1]=u=>a(Z).get(o.route("admin.user-role.edit",{id:a(n).props.data.id})))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Vv,[t("div",qv,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[s[7]||(s[7]=t("div",{class:"text-subtitle1 text-bold text-grey-8"},"Info Role",-1)),t("table",Cv,[t("tbody",null,[t("tr",null,[s[2]||(s[2]=t("td",{style:{width:"100px"}},"Nama Role",-1)),s[3]||(s[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[s[4]||(s[4]=t("td",null,"Deskripsi",-1)),s[5]||(s[5]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.description),1)])])]),s[8]||(s[8]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Pengguna ",-1)),a(n).props.data.users.length>0?(f(),h("div",Tv,[(f(!0),h(Q,null,tt(a(n).props.data.users,u=>(f(),h("div",null,[s[6]||(s[6]=_(" ● ",-1)),e(b,{href:o.route("admin.user.detail",{id:u.id})},{default:l(()=>[_(i(u.username)+" - "+i(u.name),1)]),_:2},1032,["href"])]))),256))])):(f(),h("div",Pv," Belum ada akun pengguna yang terdaftar. ")),s[9]||(s[9]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Hak Akses ",-1)),a(n).props.data.permissions.length>0?(f(),h("div",Ov,[(f(!0),h(Q,null,tt(d.value,(u,c)=>(f(),h("div",{key:c},[t("div",Iv,i(c),1),(f(!0),h(Q,null,tt(u,v=>(f(),h("div",{key:v.id}," ● "+i(v.label),1))),128))]))),128))])):(f(),h("div",Rv," Belum ada hak akses yang ditetapkan. "))]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Uv=Object.freeze(Object.defineProperty({__proto__:null,default:Dv},Symbol.toStringTag,{value:"Module"})),Av={class:"q-gutter-sm"},jv={class:"col col-md-6 q-pa-xs"},Ev={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},Mv={__name:"Editor",setup(m){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=ze({id:n.props.data.id,name:n.props.data.name,description:n.props.data.description,permissions:n.props.data.permissions?n.props.data.permissions.map(b=>b.id):[]}),s=()=>Xe({form:o,url:route("admin.user-role.save")}),r=G(()=>{const b={};return n.props.permissions&&n.props.permissions.forEach(p=>{const u=p.category;b[u]||(b[u]=[]),b[u].push(p)}),b});return(b,p)=>{const u=Y("i-head"),c=Y("authenticated-layout");return f(),h(Q,null,[e(u,{title:d}),e(c,{"show-drawer-button":!0},{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",Av,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=v=>b.$goBack())})])]),"right-button":l(()=>[e(U,{icon:"save",label:"Simpan",color:"primary",disable:a(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:J(s,["prevent"])},null,8,["disable"])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",jv,[e(Fe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=v=>a(o).id=v)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":p[2]||(p[2]=v=>a(o).name=v),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[v=>v&&v.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).description,"onUpdate:modelValue":p[3]||(p[3]=v=>a(o).description=v),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(f(!0),h(Q,null,tt(r.value,(v,y)=>(f(),h("div",{key:y},[t("div",Ev,i(y),1),(f(!0),h(Q,null,tt(v,g=>(f(),h("div",{key:g.id},[e(la,{class:"q-ma-none q-pa-none list-checkbox",modelValue:a(o).permissions,"onUpdate:modelValue":x=>a(o).permissions=x,val:g.id,label:g.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Nv=_t(Mv,[["__scopeId","data-v-99d8d2e9"]]),Bv=Object.freeze(Object.defineProperty({__proto__:null,default:Nv},Symbol.toStringTag,{value:"Module"})),zv={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Fv={class:"q-pa-xs"},Lv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Hv={class:"flex justify-end"},yl="Role Pengguna",Kv={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=Pe({search:"",...Ue()}),c=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:"Nama Role",field:"name",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{g()});const y=w=>at({message:`Hapus role ${w.name}?`,url:route("admin.user-role.delete",w.id),fetchItemsCallback:g,loading:s}),g=(w=null)=>{Ae({pagination:c,filter:u,props:w,rows:o,url:route("admin.user-role.data"),loading:s,tableRef:r})},x=w=>Z.get(route("admin.user-role.detail",{id:w.id})),j=G(()=>n.screen.gt.sm?v:v.filter(w=>w.name==="name"||w.name==="action"));return(w,D)=>{const C=Y("i-head"),$=Y("authenticated-layout");return f(),h(Q,null,[e(C,{title:yl}),e($,null,Le({title:l(()=>[_(i(yl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=R=>d.value=!d.value)},null,8,["icon"]),w.$can("admin.user-role.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[1]||(D[1]=R=>a(Z).get(w.route("admin.user-role.add")))})):k("",!0)]),default:l(()=>[t("div",Fv,[e(Te,{class:"full-height-table",ref_key:"tableRef",ref:r,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:c.value,"onUpdate:pagination":D[4]||(D[4]=R=>c.value=R),filter:u.search,loading:s.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ee({height:a(p)}),onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:R,message:N,filter:P})=>[t("div",Lv,[t("span",null,i(N)+" "+i(P?" with term "+P:""),1)])]),body:l(R=>[e(qe,{props:R,class:"cursor-pointer",onClick:N=>x(R.row)},{default:l(()=>[e(H,{key:"name",props:R,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(f(),O(S,{key:0,name:"person"})):k("",!0),_(" "+i(R.row.name),1)])]),_:2},1032,["props"]),e(H,{key:"action",props:R},{default:l(()=>[t("div",Hv,[w.$can("admin.user-role.add")||w.$can("admin.user-role.edit")||w.$can("admin.user-role.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[3]||(D[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[w.$can("admin.user-role.add")?ee((f(),O(le,{key:0,clickable:"",onClick:J(N=>a(Z).get(w.route("admin.user-role.duplicate",R.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>[...D[5]||(D[5]=[_(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),w.$can("admin.user-role.edit")?ee((f(),O(le,{key:1,clickable:"",onClick:J(N=>a(Z).get(w.route("admin.user-role.edit",R.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...D[6]||(D[6]=[_("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),w.$can("admin.user-role.delete")?ee((f(),O(le,{key:2,onClick:J(N=>y(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...D[7]||(D[7]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",zv,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":D[2]||(D[2]=R=>u.search=R),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Yv=Object.freeze(Object.defineProperty({__proto__:null,default:Kv},Symbol.toStringTag,{value:"Module"})),Wv={class:"q-gutter-sm"},Qv={class:"q-gutter-sm"},Jv={class:"row justify-center"},Gv={class:"col col-md-6 q-pa-xs"},Xv={class:"row"},Zv={class:"detail"},e_={key:0},t_={key:1},a_={key:2},kl="Rincian Pengguna",l_={__name:"Detail",setup(m){const n=fe();return(d,o)=>{const s=Y("i-head"),r=Y("i-link"),b=Y("authenticated-layout");return f(),h(Q,null,[e(s,{title:kl}),e(b,{"show-drawer-button":!0},{title:l(()=>[_(i(kl))]),"left-button":l(()=>[t("div",Wv,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=p=>d.$inertia.get(d.route("admin.user.index")))})])]),"right-button":l(()=>[t("div",Qv,[d.$can("admin.user.edit")&&a(n).props.data.id!=a(n).props.auth.user.id?(f(),O(U,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:o[1]||(o[1]=p=>d.$inertia.get(d.route("admin.user.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[t("div",Jv,[t("div",Gv,[t("div",Xv,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[20]||(o[20]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),t("table",Zv,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"125px"}},"ID Pengguna",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.username),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Nama Pengguna",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Jenis Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.USER_TYPES[a(n).props.data.type]),1)]),a(n).props.data.roles.length>0?(f(),h("tr",e_,[o[9]||(o[9]=t("td",null,"Peran Pengguna",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,[(f(!0),h(Q,null,tt(a(n).props.data.roles,p=>(f(),h("div",{key:p.id},[e(r,{href:d.route("admin.user-role.detail",{id:p.id})},{default:l(()=>[_(i(p.name),1)]),_:2},1032,["href"]),o[8]||(o[8]=_(", ",-1))]))),128))])])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Dibuat",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.created_at)),1)]),a(n).props.data.updated_at?(f(),h("tr",t_,[o[13]||(o[13]=t("td",null,"Diperbarui",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,i(a(_e)(a(n).props.data.updated_at)),1)])):k("",!0),t("tr",null,[o[15]||(o[15]=t("td",null,"Terakhir login",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.last_login_datetime?d.$dayjs(a(n).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),a(n).props.data.last_activity_datetime?(f(),h("tr",a_,[o[18]||(o[18]=t("td",null,"Aktifitas Terakhir",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,[_(i(d.$dayjs(a(n).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),o[17]||(o[17]=t("br",null,null,-1)),_(i(a(n).props.data.last_activity_description),1)])])):k("",!0)])])]),_:1})]),_:1})])])])]),_:1})],64)}}},o_=Object.freeze(Object.defineProperty({__proto__:null,default:l_},Symbol.toStringTag,{value:"Module"}));function n_(m){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(m)}const s_={class:"q-gutter-sm"},r_={class:"row justify-center"},i_={class:"col col-md-6 q-pa-xs"},d_={__name:"Editor",setup(m){const n=et(window.CONSTANTS.USER_TYPES),d=fe(),o=d.props.roles,s=d.props.data.id?"Edit Pengguna":"Tambah Pengguna",r=ze({id:d.props.data.id,name:d.props.data.name,username:d.props.data.username,password:"",type:d.props.data.type?d.props.data.type:n[0].value,active:!!d.props.data.active,roles:d.props.data.roles??[]}),b=()=>Xe({form:r,url:route("admin.user.save")});return(p,u)=>{const c=Y("i-head"),v=Y("authenticated-layout");return f(),h(Q,null,[e(c,{title:a(s)},null,8,["title"]),e(v,{"show-drawer-button":!0},{title:l(()=>[_(i(a(s)),1)]),"left-button":l(()=>[t("div",s_,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>p.$goBack())})])]),default:l(()=>[t("div",r_,[t("div",i_,[e(Fe,{class:"row",onSubmit:J(b,["prevent"])},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":u[1]||(u[1]=y=>a(r).id=y)},null,512),[[dt,a(r).id]]),e(oe,{modelValue:a(r).name,"onUpdate:modelValue":u[2]||(u[2]=y=>a(r).name=y),modelModifiers:{trim:!0},label:"Nama",error:!!a(r).errors.name,disable:a(r).processing,"error-message":a(r).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(r).username,"onUpdate:modelValue":u[3]||(u[3]=y=>a(r).username=y),modelModifiers:{trim:!0},type:"text",label:"ID Pengguna","lazy-rules":"",disable:a(r).processing,error:!!a(r).errors.username,"error-message":a(r).errors.username,rules:[y=>y&&y.length>0||"ID Pengguna harus diisi.",y=>a(n_)(y)||"ID Pengguna tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(r).password,"onUpdate:modelValue":u[4]||(u[4]=y=>a(r).password=y),type:"password",label:"Kata Sandi","lazy-rules":"",disable:a(r).processing,error:!!a(r).errors.password,"error-message":a(r).errors.password,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(r).type,"onUpdate:modelValue":u[5]||(u[5]=y=>a(r).type=y),label:"Jenis Akun",options:a(n),"map-options":"","emit-value":"","lazy-rules":"",disable:a(r).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(r).errors.type,"error-message":a(r).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(de,{modelValue:a(r).roles,"onUpdate:modelValue":u[6]||(u[6]=y=>a(r).roles=y),label:"Peran",options:a(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:a(r).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(r).errors.roles,"error-message":a(r).errors.roles,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(da,{modelValue:a(r).active,"onUpdate:modelValue":u[7]||(u[7]=y=>a(r).active=y),disable:a(r).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(r).processing,onClick:b},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",class:"text-black",disable:a(r).processing,onClick:u[8]||(u[8]=y=>p.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},u_=Object.freeze(Object.defineProperty({__proto__:null,default:d_},Symbol.toStringTag,{value:"Module"})),m_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},c_={class:"q-pa-xs"},p_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},f_={class:"elipsis",style:{"max-width":"200px"}},g_={class:"flex justify-end"},wl="Pengguna",b_={__name:"Index",setup(m){const n=[{value:"all",label:"Semua"},...et(window.CONSTANTS.USER_TYPES)],d=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=fe(),s=$e(),r=o.props.auth.user,b=V([]),p=V(!0),u=V(!1),c=Pe({role:"all",status:"active",search:""}),v=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),y=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];he(()=>{x()});const g=()=>x(),x=(N=null)=>Ae({pagination:v,props:N,rows:b,loading:p,filter:c,url:route("admin.user.data"),tableRef:C}),j=N=>at({url:route("admin.user.delete",N.id),message:`Hapus pengguna ${N.username}?`,fetchItemsCallback:x,loading:p}),w=G(()=>s.screen.gt.sm?y:y.filter(N=>N.name==="username"||N.name==="action")),D=N=>Z.get(route("admin.user.detail",N.id)),C=V(null),$=V(null),R=Ke($);return(N,P)=>{const A=Y("i-head"),E=Y("authenticated-layout");return f(),h(Q,null,[e(A,{title:wl}),e(E,null,Le({title:l(()=>[_(i(wl))]),"right-button":l(()=>[e(U,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=B=>u.value=!u.value)},null,8,["icon"]),N.$can("admin.user.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:P[1]||(P[1]=B=>a(Z).get(N.route("admin.user.add")))})):k("",!0)]),default:l(()=>[t("div",c_,[e(Te,{ref_key:"tableRef",ref:C,class:"full-height-table",style:Ee({height:a(R)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:v.value,"onUpdate:pagination":P[6]||(P[6]=B=>v.value=B),filter:c.search,loading:p.value,columns:w.value,rows:b.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:B,message:z,term:q})=>[t("div",p_,[t("span",null,i(z)+" "+i(q?" with term "+q:""),1)])]),body:l(B=>[e(qe,{props:B,class:xe([B.row.active?"":"bg-red-1","cursor-pointer"]),onClick:z=>D(B.row)},{default:l(()=>[e(H,{key:"username",props:B},{default:l(()=>[t("div",null,[a(s).screen.gt.sm?k("",!0):(f(),h(Q,{key:0},[e(S,{name:"person",class:"inline-icon"}),P[7]||(P[7]=_(" Username: ",-1))],64)),_(" "+i(B.row.username),1)]),a(s).screen.gt.sm?k("",!0):(f(),h(Q,{key:0},[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" Nama: "+i(B.row.name),1)]),t("div",f_,[e(S,{name:"group",class:"inline-icon"}),P[8]||(P[8]=_(" Jenis Akun: ",-1)),t("span",null,i(N.$CONSTANTS.USER_TYPES[B.row.type]),1)]),t("div",null,[e(S,{name:"group",class:"inline-icon"}),_(" Peran: "+i(B.row.roles.map(z=>z.name).join(",")),1)])],64))]),_:2},1032,["props"]),e(H,{key:"name",props:B},{default:l(()=>[_(i(B.row.name),1)]),_:2},1032,["props"]),e(H,{key:"role",props:B,align:"center"},{default:l(()=>[t("span",null,i(N.$CONSTANTS.USER_TYPES[B.row.type]),1)]),_:2},1032,["props"]),e(H,{key:"action",props:B},{default:l(()=>[t("div",g_,[N.$can("admin.user.add")||N.$can("admin.user.edit")||N.$can("admin.user.delete")?(f(),O(U,{key:0,disable:B.row.id==a(r).id||B.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[5]||(P[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.user.add")?ee((f(),O(le,{key:0,clickable:"",onClick:J(z=>a(Z).get(N.route("admin.user.duplicate",B.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>[...P[9]||(P[9]=[_(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),N.$can("admin.user.edit")?ee((f(),O(le,{key:1,clickable:"",onClick:J(z=>a(Z).get(N.route("admin.user.edit",B.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...P[10]||(P[10]=[_("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),N.$can("admin.user.delete")?ee((f(),O(le,{key:2,onClick:J(z=>j(B.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...P[11]||(P[11]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:$},{default:l(()=>[t("div",m_,[e(de,{modelValue:c.type,"onUpdate:modelValue":[P[2]||(P[2]=B=>c.type=B),g],class:"custom-select col-xs-12 col-sm-2",options:n,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(de,{modelValue:c.status,"onUpdate:modelValue":[P[3]||(P[3]=B=>c.status=B),g],class:"custom-select col-xs-12 col-sm-2",options:d,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":P[4]||(P[4]=B=>c.search=B),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},v_=Object.freeze(Object.defineProperty({__proto__:null,default:b_},Symbol.toStringTag,{value:"Module"})),__={class:"q-gutter-sm"},y_={class:"col col-lg-6 q-pa-xs"},k_={class:"row q-col-gutter-sm q-mb-md"},w_={key:0},h_={class:"text-bold"},$_={key:0},x_={class:"text-caption text-grey-8"},S_={key:1},hl="Buat Penyesuaian Stok",V_={__name:"Create",setup(m){const n=fe(),d=n.props.products,{filteredCategories:o,filterCategories:s}=xa(n.props.categories),{filteredSuppliers:r,filterSupplierFn:b}=Sa(n.props.suppliers),p=V({search:null,category_id:null,supplier_id:null}),u=V([]),c=ze({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),v=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(D,C)=>K(D)+" "+C.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],y=et(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),g=G(()=>d.filter(D=>{let C=!0;if(p.value.search){const $=p.value.search.toLowerCase();C=D.name.toLowerCase().includes($)||D.description.toLowerCase().includes($)||D.barcode&&D.barcode.toLowerCase().includes($)}return C&&p.value.category_id&&(C=D.category_id===p.value.category_id),C&&p.value.supplier_id&&(C=D.supplier_id===p.value.supplier_id),C})),x=()=>{c.product_ids=u.value.map(D=>D.id),Jt(c,{datetime:"YYYY-MM-DD HH:mm:ss"}),Xe({form:c,url:route("admin.stock-adjustment.create")})},j=$e(),w=G(()=>j.screen.gt.sm?v:v.filter(D=>D.name==="name"));return(D,C)=>{const $=Y("i-head"),R=Y("authenticated-layout");return f(),h(Q,null,[e($,{title:hl}),e(R,{"show-drawer-button":!0},{title:l(()=>[_(i(hl))]),"left-button":l(()=>[t("div",__,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:C[0]||(C[0]=N=>a(Z).get(D.route("admin.stock-adjustment.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",y_,[e(Fe,{class:"row",onSubmit:J(x,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-sm"},{default:l(()=>[C[9]||(C[9]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Bt,{modelValue:a(c).datetime,"onUpdate:modelValue":C[1]||(C[1]=N=>a(c).datetime=N),label:"Waktu",error:!!a(c).errors.datetime,disable:a(c).processing,"error-message":a(c).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(de,{modelValue:a(c).type,"onUpdate:modelValue":C[2]||(C[2]=N=>a(c).type=N),options:a(y),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(c).errors.type,disable:a(c).processing,"map-options":"","emit-value":"","error-message":a(c).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(oe,{modelValue:a(c).notes,"onUpdate:modelValue":C[3]||(C[3]=N=>a(c).notes=N),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(c).processing,error:!!a(c).errors.notes,"error-message":a(c).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,null,{default:l(()=>[C[10]||(C[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",k_,[e(oe,{modelValue:p.value.search,"onUpdate:modelValue":C[4]||(C[4]=N=>p.value.search=N),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(de,{modelValue:p.value.category_id,"onUpdate:modelValue":C[5]||(C[5]=N=>p.value.category_id=N),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"",dense:"","emit-value":"",onFilter:a(s),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(de,{modelValue:p.value.supplier_id,"onUpdate:modelValue":C[6]||(C[6]=N=>p.value.supplier_id=N),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(r),"map-options":"",dense:"","emit-value":"",onFilter:a(b),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),e(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:w.value,rows:g.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:u.value,"onUpdate:selected":C[7]||(C[7]=N=>u.value=N)},{"body-cell-name":l(N=>[e(H,{props:N},{default:l(()=>[a(j).screen.lt.md?(f(),h("div",w_,[t("div",h_,i(N.row.name),1),N.row.category?(f(),h("div",$_,i(N.row.category.name),1)):k("",!0),t("div",x_,i(a(K)(N.row.stock))+" "+i(N.row.uom),1)])):(f(),h("div",S_,i(N.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"play_arrow",type:"submit",label:"Lanjutkan",color:"primary",disable:a(c).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(c).processing,onClick:C[8]||(C[8]=N=>a(Z).get(D.route("admin.stock-adjustment.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},q_=Object.freeze(Object.defineProperty({__proto__:null,default:V_},Symbol.toStringTag,{value:"Module"})),C_={class:"q-gutter-sm"},T_={class:"row justify-center"},P_={class:"col col-lg-8 q-pa-sm"},O_={class:"row"},I_={class:"detail"},R_={key:0},D_={key:1},U_={class:"text-grey-9"},A_={__name:"Detail",setup(m){const n=fe(),d=`Rincian Penyesuaian Stok #${n.props.data.id}`,o=n.props.details,s=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:p=>K(p)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:p=>K(p)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:p=>K(p)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],r=$e(),b=G(()=>r.screen.gt.sm?s:s.filter(p=>p.name==="no"));return(p,u)=>{const c=Y("i-head"),v=Y("i-link"),y=Y("authenticated-layout");return f(),h(Q,null,[e(c,{title:d}),e(y,{"show-drawer-button":!0},{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",C_,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=g=>p.$inertia.get(p.route("admin.stock-adjustment.index")))})])]),default:l(()=>[t("div",T_,[t("div",P_,[t("div",O_,[e(ce,{square:"",flat:"",bordered:"",class:"q-card col"},{default:l(()=>[e(ae,null,{default:l(()=>[u[21]||(u[21]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",I_,[t("tbody",null,[t("tr",null,[u[1]||(u[1]=t("td",{style:{width:"120px"}},"ID",-1)),u[2]||(u[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"# "+i(a(n).props.data.id),1)]),t("tr",null,[u[3]||(u[3]=t("td",null,"Jenis",-1)),u[4]||(u[4]=t("td",null,":",-1)),t("td",null,i(p.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[a(n).props.data.type]),1)]),t("tr",null,[u[5]||(u[5]=t("td",null,"Status",-1)),u[6]||(u[6]=t("td",null,":",-1)),t("td",null,i(p.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[a(n).props.data.status]),1)]),t("tr",null,[u[7]||(u[7]=t("td",null,"Waktu",-1)),u[8]||(u[8]=t("td",null,":",-1)),t("td",null,i(p.$dayjs(a(n).props.data.datetime).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)]),a(n).props.data.created_at?(f(),h("tr",R_,[u[10]||(u[10]=t("td",null,"Dibuat Oleh",-1)),u[11]||(u[11]=t("td",null,":",-1)),t("td",null,[a(n).props.data.created_by?(f(),h(Q,{key:0},[e(v,{href:p.route("admin.user.detail",{id:a(n).props.data.created_by})},{default:l(()=>[_(i(a(n).props.data.created_by.username)+" - "+i(a(n).props.data.created_by.name),1)]),_:1},8,["href"]),u[9]||(u[9]=_(" - ",-1))],64)):k("",!0),_(" "+i(p.$dayjs(new Date(a(n).props.data.created_at)).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)])])):k("",!0),a(n).props.data.updated_at?(f(),h("tr",D_,[u[13]||(u[13]=t("td",null,"Diperbarui oleh",-1)),u[14]||(u[14]=t("td",null,":",-1)),t("td",null,[a(n).props.data.updated_by?(f(),h(Q,{key:0},[e(v,{href:p.route("admin.user.detail",{id:a(n).props.data.updated_by})},{default:l(()=>[_(i(a(n).props.data.updated_by.username)+" - "+i(a(n).props.data.updated_by.name),1)]),_:1},8,["href"]),u[12]||(u[12]=_(" - ",-1))],64)):k("",!0),_(" "+i(p.$dayjs(new Date(a(n).props.data.updated_at)).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)])])):k("",!0),t("tr",null,[u[15]||(u[15]=t("td",null,"Total Modal",-1)),u[16]||(u[16]=t("td",null,":",-1)),t("td",null,[t("div",{class:xe(a(n).props.data.total_cost<0?"text-red-10":a(n).props.data.total_cost>0?"text-green-10":"")}," Rp. "+i(a(K)(a(n).props.data.total_cost)),3)])]),t("tr",null,[u[17]||(u[17]=t("td",null,"Total Harga",-1)),u[18]||(u[18]=t("td",null,":",-1)),t("td",null,[t("div",{class:xe(a(n).props.data.total_price<0?"text-red-10":a(n).props.data.total_price>0?"text-green-10":"")}," Rp. "+i(a(K)(a(n).props.data.total_price)),3)])]),t("tr",null,[u[19]||(u[19]=t("td",null,"Catatan",-1)),u[20]||(u[20]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)])])])]),_:1}),e(ae,null,{default:l(()=>[u[26]||(u[26]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",dense:"",columns:b.value,rows:a(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":l(g=>[e(H,{props:g},{default:l(()=>[a(r).screen.lt.md?(f(),h(Q,{key:1},[t("div",U_,[t("b",null,"#"+i(g.rowIndex+1),1),_(" - "+i(g.row.product_name),1)]),t("div",null,[_(" Stok Lama: "+i(a(K)(g.row.old_quantity))+" "+i(g.row.uom),1),u[23]||(u[23]=t("br",null,null,-1)),_(" Stok Baru: "+i(a(K)(g.row.new_quantity))+" "+i(g.row.uom),1),u[24]||(u[24]=t("br",null,null,-1)),t("div",{class:xe(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},[_(" Selisih: "+i((g.row.balance>0?"+":"")+a(K)(g.row.balance))+" "+i(g.row.uom),1),u[22]||(u[22]=t("br",null,null,-1)),_(" (Rp. "+i(a(K)(g.row.subtotal_cost))+" / Rp. "+i(a(K)(g.row.subtotal_price))+") ",1)],2),u[25]||(u[25]=t("br",null,null,-1)),_(" "+i(g.row.notes),1)])],64)):(f(),h(Q,{key:0},[_(i(g.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-balance":l(g=>[e(H,{props:g},{default:l(()=>[t("div",{class:xe(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},i((g.row.balance>0?"+":"")+a(K)(g.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":l(g=>[e(H,{props:g},{default:l(()=>[t("div",{class:xe(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},i(a(K)(g.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":l(g=>[e(H,{props:g},{default:l(()=>[t("div",{class:xe(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},i(a(K)(g.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},j_=Object.freeze(Object.defineProperty({__proto__:null,default:A_},Symbol.toStringTag,{value:"Module"})),E_={class:"q-gutter-sm"},M_={class:"col col-lg-6 q-pa-xs"},N_={class:"text-bold"},B_={key:0},z_={class:"text-caption text-grey-8"},$l="Penyesuaian Stok",F_={__name:"Editor",setup(m){const n=fe(),d=ze({id:n.props.item.id,type:n.props.item.type,datetime:new Date(n.props.item.datetime),notes:n.props.item.notes,action:"save",details:[]}),o=et(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),s=n.props.details,r=c=>{const v=()=>{d.action=c,d.details=s.map(y=>({id:y.id,new_quantity:y.new_quantity})),Jt(d,{datetime:"YYYY-MM-DD HH:mm:ss"}),Xe({form:d,url:route("admin.stock-adjustment.save")})};c==="close"||c==="cancel"?zt.create({title:"Konfirmasi",message:"Aksi ini tidak dapat dibatalkan, apakah Anda yakin?",cancel:!0,persistent:!0}).onOk(()=>{v()}).onCancel(()=>{}):v()},b=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:c=>K(c)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:c=>K(c)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(c,v)=>K(v.new_quantity-v.old_quantity)}],p=$e(),u=G(()=>p.screen.gt.sm?b:b.filter(c=>c.name==="product_name"||c.name==="new_quantity"));return(c,v)=>{const y=Y("i-head"),g=Y("authenticated-layout");return f(),h(Q,null,[e(y,{title:$l}),e(g,{"show-drawer-button":!0},{title:l(()=>[_(i($l))]),"left-button":l(()=>[t("div",E_,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=x=>c.$inertia.get(c.route("admin.stock-adjustment.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",M_,[e(Fe,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[...v[8]||(v[8]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=x=>a(d).id=x)},null,512),[[dt,a(d).id]]),e(Bt,{modelValue:a(d).datetime,"onUpdate:modelValue":v[2]||(v[2]=x=>a(d).datetime=x),label:"Waktu",error:!!a(d).errors.datetime,disable:a(d).processing,"error-message":a(d).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(de,{modelValue:a(d).type,"onUpdate:modelValue":v[3]||(v[3]=x=>a(d).type=x),options:a(o),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(d).errors.type,disable:a(d).processing,"map-options":"","emit-value":"","error-message":a(d).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(oe,{modelValue:a(d).notes,"onUpdate:modelValue":v[4]||(v[4]=x=>a(d).notes=x),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(d).processing,error:!!a(d).errors.notes,"error-message":a(d).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-pa-xs"},{default:l(()=>[e(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:u.value,rows:a(s),"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":l(x=>[e(H,{props:x},{default:l(()=>[t("div",N_,i(x.row.product_name),1),a(p).screen.lt.md?(f(),h("div",B_,[t("div",z_,[_(" Tercatat: "+i(a(K)(x.row.old_quantity))+" ",1),v[9]||(v[9]=t("br",null,null,-1)),_(" Selisih: "+i(a(K)(x.row.new_quantity-x.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":l(x=>[e(H,{props:x,class:"text-center"},{default:l(()=>[e(De,{modelValue:x.row[x.col.name],"onUpdate:modelValue":j=>x.row[x.col.name]=j,modelModifiers:{number:!0},"input-class":"text-right",dense:"",style:{width:"60px"},"hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",onClick:v[5]||(v[5]=x=>r("save")),label:"Simpan",color:"primary",disable:a(d).processing},null,8,["disable"]),e(U,{icon:"done_all",onClick:v[6]||(v[6]=x=>r("close")),label:"Selesaikan",color:"green",disable:a(d).processing},null,8,["disable"]),e(U,{icon:"close",onClick:v[7]||(v[7]=x=>r("cancel")),label:"Batalkan",color:"red",disable:a(d).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},L_=Object.freeze(Object.defineProperty({__proto__:null,default:F_},Symbol.toStringTag,{value:"Module"})),H_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},K_={class:"q-pa-xs"},Y_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},W_={key:0,class:"flex q-gutter-xs"},Q_={class:"flex q-col-gutter-xs"},J_={key:0},G_={key:1},X_={class:"flex justify-end"},xl="Penyesuaian Stok",Z_={__name:"Index",setup(m){const n=V([]),d=V(!0),o=V(!1),s=V(null),r=V(null),b=Ke(r),p=Pe({search:"",status:"all",type:"all",...Ue()}),u=[{value:"all",label:"Semua"},...et(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],c=[{value:"all",label:"Semua"},...et(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],v=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),y=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];he(()=>{x()});const g=$=>at({message:`Hapus Transaksi #${$.id}?`,url:route("admin.stock-adjustment.delete",$.id),fetchItemsCallback:x,loading:d}),x=($=null)=>Ae({pagination:v,filter:p,props:$,rows:n,url:route("admin.stock-adjustment.data"),loading:d,tableRef:s}),j=()=>{x()},w=$=>{$.status=="draft"?Z.get(route("admin.stock-adjustment.editor",$.id)):Z.get(route("admin.stock-adjustment.detail",$.id))},D=$e(),C=G(()=>D.screen.gt.sm?y:y.filter($=>$.name==="id"||$.name==="action"));return($,R)=>{const N=Y("i-head"),P=Y("authenticated-layout");return f(),h(Q,null,[e(N,{title:xl}),e(P,null,Le({"right-button":l(()=>[e(U,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=A=>o.value=!o.value)},null,8,["icon"]),$.$can("admin.stock-adjustment.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=A=>a(Z).get($.route("admin.stock-adjustment.create")))})):k("",!0)]),title:l(()=>[_(i(xl))]),default:l(()=>[t("div",K_,[e(Te,{ref_key:"tableRef",ref:s,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:v.value,"onUpdate:pagination":R[6]||(R[6]=A=>v.value=A),filter:p.search,loading:d.value,columns:C.value,rows:n.value,"rows-per-page-options":[10,25,50],style:Ee({height:a(b)}),onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:A,message:E,filter:B})=>[t("div",Y_,[t("span",null,i(E)+" "+i(B?" with term "+B:""),1)])]),body:l(A=>[e(qe,{props:A,onClick:E=>w(A.row),class:"cursor-pointer"},{default:l(()=>[e(H,{key:"id",props:A},{default:l(()=>[a(D).screen.lt.md?(f(),h(Q,{key:1},[t("div",Q_,[t("div",null,"#"+i(A.row.formatted_id),1),t("div",null,[e(S,{name:"history"}),_(" "+i($.$dayjs(new Date(A.row.datetime)).format("DD/MM/YYYY HH:mm")),1)]),e(Rl,{dense:"",size:"sm",color:A.row.status==="draft"?"orange":A.row.status==="closed"?"green":A.row.status==="canceled"?"red":"",icon:A.row.status==="draft"?"emergency":A.row.status==="closed"?"check":A.row.status==="canceled"?"close":""},{default:l(()=>[_(i($.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[A.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(S,{name:"category"}),_(" "+i($.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[A.row.type]),1)]),A.row.created_by?(f(),h("div",J_,[e(S,{name:"person"}),R[7]||(R[7]=_(" Dibuat: ",-1)),t("b",null,i(A.row.created_by.username),1),e(S,{name:"history"}),_(" "+i($.$dayjs(new Date(A.row.created_at)).format("DD/MM/YYYY HH:mm")),1)])):k("",!0),A.row.updated_by?(f(),h("div",G_,[e(S,{name:"person"}),R[8]||(R[8]=_(" Diperbarui: ",-1)),t("b",null,i(A.row.updated_by.username),1),e(S,{name:"history"}),_(" "+i($.$dayjs(new Date(A.row.updated_at)).format("DD/MM/YYYY HH:mm")),1)])):k("",!0),t("div",{class:xe(A.row.total_cost<0?"text-red-10":A.row.total_cost>0?"text-green-10":"")},[e(S,{name:"money"}),_(" Rp. "+i(a(K)(A.row.total_cost))+" / Rp. "+i(a(K)(A.row.total_price)),1)],2)],64)):(f(),h("div",W_," #"+i(A.row.formatted_id),1))]),_:2},1032,["props"]),e(H,{key:"datetime",props:A},{default:l(()=>[_(i($.$dayjs(new Date(A.row.datetime)).format("DD/MM/YYYY HH:mm")),1)]),_:2},1032,["props"]),e(H,{key:"status",props:A,class:"text-center"},{default:l(()=>[_(i($.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[A.row.status]),1)]),_:2},1032,["props"]),e(H,{key:"type",props:A},{default:l(()=>[_(i($.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[A.row.type]),1)]),_:2},1032,["props"]),e(H,{key:"total_cost",props:A},{default:l(()=>[t("div",{class:xe(A.row.total_cost<0?"text-red-10":A.row.total_cost>0?"text-green-10":"")},i(a(K)(A.row.total_cost)),3)]),_:2},1032,["props"]),e(H,{key:"total_price",props:A},{default:l(()=>[t("div",{class:xe(A.row.total_price<0?"text-red-10":A.row.total_price>0?"text-green-10":"")},i(a(K)(A.row.total_price)),3)]),_:2},1032,["props"]),e(H,{key:"notes",props:A},{default:l(()=>[_(i(A.row.notes),1)]),_:2},1032,["props"]),e(H,{key:"action",props:A},{default:l(()=>[t("div",X_,[$.$can("admin.stock-adjustment.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[5]||(R[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[$.$can("admin.stock-adjustment.delete")?ee((f(),O(le,{key:0,onClick:J(E=>g(A.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...R[9]||(R[9]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:r},{default:l(()=>[t("div",H_,[e(de,{modelValue:p.status,"onUpdate:modelValue":[R[2]||(R[2]=A=>p.status=A),j],options:u,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:p.type,"onUpdate:modelValue":[R[3]||(R[3]=A=>p.type=A),j],options:c,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":R[4]||(R[4]=A=>p.search=A),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ey=Object.freeze(Object.defineProperty({__proto__:null,default:Z_},Symbol.toStringTag,{value:"Module"})),ty={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ay={class:"q-pa-xs"},ly={class:"full-width row flex-center text-grey-8 q-gutter-sm"},oy={key:0},Sl="Riwayat Stok",ny={__name:"Index",setup(m){fe();const n=V(null),d=V(null),o=Ke(d),s=Wt();Qt();const r=[{label:"Semua Tahun",value:"all"},{label:`${s}`,value:s},...Dt(s-2,s-1).reverse()],b=[{value:"all",label:"Semua Bulan"},...Ut()],p=[{value:"all",label:"Semua"},...et(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],u=$e(),c=V(!1),v=V([]),y=V(!0),g=Pe({type:"all",search:"",...Ue()}),x=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let j=[{name:"id",label:u.screen.lt.sm?"Item":"#",field:"id",align:"left",sortable:!0},{name:"created_at",label:"Waktu",field:"created_at",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Qty Awal",field:"quantity_before",align:"right"},{name:"quantity_after",label:"Qty Akhir",field:"quantity_after",align:"right"},{name:"quantity",label:"Selisih",field:"quantity",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{const R=new URLSearchParams(window.location.search).get("page");R&&(x.value.page=parseInt(R)),w()});const w=($=null)=>{Ae({pagination:x,filter:g,props:$,rows:v,url:route("admin.stock-movement.data"),loading:y,tableRef:n})},D=()=>{w()},C=G(()=>{let $=[...j];return u.screen.gt.sm?$:$.filter(R=>R.name==="id"||R.name==="quantity")});return($,R)=>{const N=Y("i-head"),P=Y("authenticated-layout");return f(),h(Q,null,[e(N,{title:Sl}),e(P,null,Le({title:l(()=>[_(i(Sl))]),"right-button":l(()=>[e(U,{icon:c.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=A=>c.value=!c.value)},null,8,["icon"])]),default:l(()=>[t("div",ay,[e(Te,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":R[5]||(R[5]=A=>x.value=A),filter:g.search,loading:y.value,columns:C.value,rows:v.value,"rows-per-page-options":[10,25,50],style:Ee({height:a(o)}),onRequest:w,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:A,message:E,filter:B})=>[t("div",ly,[t("span",null,i(E)+" "+i(B?" with term "+B:""),1)])]),body:l(A=>[e(qe,{props:A},{default:l(()=>[e(H,{key:"id",props:A},{default:l(()=>[t("div",null,[a(u).screen.lt.sm?(f(),h(Q,{key:0},[t("div",null,[e(ut,null,{default:l(()=>[_(i($.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[A.row.ref_type]),1)]),_:2},1024)]),e(S,{class:"inline-icon",name:"tag"})],64)):k("",!0),_(" "+i(A.row.formatted_id),1)]),a(u).screen.lt.sm?(f(),h(Q,{key:0},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+i(a(_e)(A.row.created_at)),1)]),t("div",null,[e(S,{name:"token",class:"inline-icon"}),_(" "+i(A.row.product.name),1)]),t("div",{class:xe(A.row.quantity>0?"text-positive":"text-negative")},[e(S,{class:"inline-icon",name:"compare_arrows"}),_(" "+i(a(K)(A.row.quantity_before))+" "+i(A.row.uom)+" → "+i(a(K)(A.row.quantity_after))+" "+i(A.row.uom),1)],2),e(we,{text:A.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"created_at",props:A},{default:l(()=>[_(i(a(_e)(A.row.created_at)),1)]),_:2},1032,["props"]),e(H,{key:"type",props:A},{default:l(()=>[_(i($.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[A.row.ref_type])+" ",1),A.row.ref?(f(),h("span",oy,i(A.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"product",props:A},{default:l(()=>[_(i(A.row.product.name),1)]),_:2},1032,["props"]),e(H,{key:"quantity_before",props:A},{default:l(()=>[_(i(a(K)(A.row.quantity_before))+" "+i(A.row.uom),1)]),_:2},1032,["props"]),e(H,{key:"quantity_after",props:A},{default:l(()=>[_(i(a(K)(A.row.quantity_after))+" "+i(A.row.uom),1)]),_:2},1032,["props"]),e(H,{key:"quantity",props:A,class:xe(A.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[_(i(a(K)(A.row.quantity))+" "+i(A.row.uom),1)]),_:2},1032,["props","class"]),e(H,{key:"notes",props:A},{default:l(()=>[e(we,{text:A.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[c.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:d},{default:l(()=>[t("div",ty,[e(de,{modelValue:g.year,"onUpdate:modelValue":[R[1]||(R[1]=A=>g.year=A),D],options:r,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),g.year!="all"?(f(),O(de,{key:0,modelValue:g.month,"onUpdate:modelValue":[R[2]||(R[2]=A=>g.month=A),D],options:b,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:g.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:g.ref_type,"onUpdate:modelValue":[R[3]||(R[3]=A=>g.ref_type=A),D],options:p,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":R[4]||(R[4]=A=>g.search=A),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},sy=Object.freeze(Object.defineProperty({__proto__:null,default:ny},Symbol.toStringTag,{value:"Module"})),ry={class:"q-gutter-sm"},iy={class:"q-gutter-sm"},dy={class:"col col-md-6 q-pa-xs"},uy={class:"row"},my={class:"detail"},Vl="Rincian Pemasok",cy={__name:"Detail",setup(m){const n=fe();return(d,o)=>{const s=Y("i-head"),r=Y("authenticated-layout");return f(),h(Q,null,[e(s,{title:Vl}),e(r,{"show-drawer-button":!0},{title:l(()=>[_(i(Vl))]),"left-button":l(()=>[t("div",ry,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>d.$goBack())})])]),"right-button":l(()=>[t("div",iy,[d.$can("admin.supplier.edit")?(f(),O(U,{key:0,icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:o[1]||(o[1]=b=>a(Z).get(d.route("admin.supplier.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",dy,[t("div",uy,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[14]||(o[14]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Info Pemasok ",-1)),t("table",my,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"70px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Telepon",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.phone),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Alamat",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.address),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"No. Rek",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.bank_account_number),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Alamat Retur",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.return_address),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)])])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},py=Object.freeze(Object.defineProperty({__proto__:null,default:cy},Symbol.toStringTag,{value:"Module"})),fy={class:"q-gutter-sm"},gy={class:"col col-md-6 q-pa-xs"},by={class:"row q-col-gutter-md"},vy={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},_y={key:2,class:"row q-col-gutter-md"},yy={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},ky={key:4,class:"row q-col-gutter-md"},wy={key:5,class:"row q-col-gutter-md"},hy={style:{"margin-left":"-10px"},class:"q-mt-md"},$y={class:"q-mt-sm"},xy={__name:"Editor",setup(m){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Pemasok",o=ze({id:n.props.data.id,name:n.props.data.name,phone_1:n.props.data.phone_1,phone_2:n.props.data.phone_2,url_1:n.props.data.url_1,url_2:n.props.data.url_2,bank_account_name_1:n.props.data.bank_account_name_1,bank_account_holder_1:n.props.data.bank_account_holder_1,bank_account_number_1:n.props.data.bank_account_number_1,bank_account_name_2:n.props.data.bank_account_name_2,bank_account_holder_2:n.props.data.bank_account_holder_2,bank_account_number_2:n.props.data.bank_account_number_2,address:n.props.data.address,return_address:n.props.data.return_address,active:!!n.props.data.active}),s=V(!0),r=()=>Xe({form:o,url:route("admin.supplier.save")});return(b,p)=>{const u=Y("i-head"),c=Y("authenticated-layout");return f(),h(Q,null,[e(u,{title:d}),e(c,{"show-drawer-button":!0},{title:l(()=>[_(i(d))]),"left-button":l(()=>[t("div",fy,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=v=>b.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",gy,[e(Fe,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=v=>a(o).id=v)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":p[2]||(p[2]=v=>a(o).name=v),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[v=>v&&v.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",by,[e(oe,{modelValue:a(o).phone_1,"onUpdate:modelValue":p[3]||(p[3]=v=>a(o).phone_1=v),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_1,"error-message":a(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),s.value?k("",!0):(f(),O(oe,{key:0,modelValue:a(o).phone_2,"onUpdate:modelValue":p[4]||(p[4]=v=>a(o).phone_2=v),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_2,"error-message":a(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(oe,{modelValue:a(o).address,"onUpdate:modelValue":p[5]||(p[5]=v=>a(o).address=v),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),s.value?k("",!0):(f(),O(oe,{key:0,modelValue:a(o).return_address,"onUpdate:modelValue":p[6]||(p[6]=v=>a(o).return_address=v),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.return_address,"error-message":a(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),s.value?k("",!0):(f(),h("div",vy," Rekening 1 ")),s.value?k("",!0):(f(),h("div",_y,[e(oe,{modelValue:a(o).bank_account_name_1,"onUpdate:modelValue":p[7]||(p[7]=v=>a(o).bank_account_name_1=v),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_1,"error-message":a(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_number_1,"onUpdate:modelValue":p[8]||(p[8]=v=>a(o).bank_account_number_1=v),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_1,"error-message":a(o).errors.bank_account_number_1,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_holder_1,"onUpdate:modelValue":p[9]||(p[9]=v=>a(o).bank_account_holder_1=v),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_1,"error-message":a(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),s.value?k("",!0):(f(),h("div",yy," Rekening 2 ")),s.value?k("",!0):(f(),h("div",ky,[e(oe,{modelValue:a(o).bank_account_name_2,"onUpdate:modelValue":p[10]||(p[10]=v=>a(o).bank_account_name_2=v),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_2,"error-message":a(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_number_2,"onUpdate:modelValue":p[11]||(p[11]=v=>a(o).bank_account_number_2=v),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_2,"error-message":a(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_holder_2,"onUpdate:modelValue":p[12]||(p[12]=v=>a(o).bank_account_holder_2=v),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_2,"error-message":a(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),s.value?k("",!0):(f(),h("div",wy,[e(oe,{modelValue:a(o).url_1,"onUpdate:modelValue":p[13]||(p[13]=v=>a(o).url_1=v),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_1,"error-message":a(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).url_2,"onUpdate:modelValue":p[14]||(p[14]=v=>a(o).url_2=v),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_2,"error-message":a(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",hy,[e(la,{class:"full-width q-pl-none",modelValue:a(o).active,"onUpdate:modelValue":p[15]||(p[15]=v=>a(o).active=v),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",$y,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:p[16]||(p[16]=J(v=>s.value=!s.value,["stop"]))},[e(S,{name:s.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),_(" "+i(s.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:p[17]||(p[17]=v=>b.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Sy=Object.freeze(Object.defineProperty({__proto__:null,default:xy},Symbol.toStringTag,{value:"Module"})),Vy={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},qy={class:"q-pa-xs"},Cy={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ty={key:0},Py={key:1},Oy={class:"flex justify-end"},ql="Pemasok",Iy={__name:"Index",setup(m){const n=$e(),d=V(!1),o=V([]),s=V(!0),r=V(null),b=V(null),p=Ke(b),u=Pe({search:"",status:"active",...Ue()}),c=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{x()});const g=C=>at({message:`Hapus pemasok ${C.name}?`,url:route("admin.supplier.delete",C.id),fetchItemsCallback:x,loading:s}),x=(C=null)=>{Ae({pagination:c,filter:u,props:C,rows:o,url:route("admin.supplier.data"),loading:s,tableRef:r})},j=()=>x(),w=C=>Z.get(route("admin.supplier.detail",{id:C.id})),D=G(()=>n.screen.gt.sm?v:v.filter(C=>C.name==="name"||C.name==="action"));return(C,$)=>{const R=Y("i-head"),N=Y("authenticated-layout");return f(),h(Q,null,[e(R,{title:ql}),e(N,null,Le({title:l(()=>[_(i(ql))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=P=>d.value=!d.value)},null,8,["icon"]),C.$can("admin.supplier.add")?(f(),O(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=P=>a(Z).get(C.route("admin.supplier.add")))})):k("",!0)]),default:l(()=>[t("div",qy,[e(Te,{class:"full-height-table",ref_key:"tableRef",ref:r,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:c.value,"onUpdate:pagination":$[5]||($[5]=P=>c.value=P),filter:u.search,loading:s.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ee({height:a(p)}),onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(je,{showing:"",color:"red"})]),"no-data":l(({icon:P,message:A,filter:E})=>[t("div",Cy,[t("span",null,i(A)+" "+i(E?" with term "+E:""),1)])]),body:l(P=>[e(qe,{props:P,class:xe([P.row.active?"":"bg-red-1","cursor-pointer"]),onClick:A=>w(P.row)},{default:l(()=>[e(H,{key:"name",props:P,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(f(),O(S,{key:0,name:"person"})):k("",!0),_(" "+i(P.row.name),1)]),a(n).screen.lt.md?(f(),h(Q,{key:0},[P.row.phone_1?(f(),h("div",Ty,[e(S,{name:"phone"}),_(" "+i(P.row.phone_1),1)])):k("",!0),P.row.address?(f(),h("div",Py,[e(S,{name:"home_pin"}),_(" "+i(P.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"phone_1",props:P},{default:l(()=>[_(i(P.row.phone_1),1)]),_:2},1032,["props"]),e(H,{key:"address",props:P},{default:l(()=>[_(i(P.row.address),1)]),_:2},1032,["props"]),e(H,{key:"action",props:P},{default:l(()=>[t("div",Oy,[C.$can("admin.supplier.add")||C.$can("admin.supplier.edit")||C.$can("admin.supplier.delete")?(f(),O(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[4]||($[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.supplier.add")?ee((f(),O(le,{key:0,clickable:"",onClick:J(A=>a(Z).get(C.route("admin.supplier.duplicate",P.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>[...$[6]||($[6]=[_(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),C.$can("admin.supplier.edit")?ee((f(),O(le,{key:1,clickable:"",onClick:J(A=>a(Z).get(C.route("admin.supplier.edit",P.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>[...$[7]||($[7]=[_("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0),C.$can("admin.supplier.delete")?ee((f(),O(le,{key:2,onClick:J(A=>g(P.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>[...$[8]||($[8]=[_("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(Ze,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Vy,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[$[2]||($[2]=P=>u.status=P),j],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":$[3]||($[3]=P=>u.search=P),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ry=Object.freeze(Object.defineProperty({__proto__:null,default:Iy},Symbol.toStringTag,{value:"Module"})),Dy=$t({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(m,{slots:n,emit:d}){let o=!1,s,r,b=null,p=null,u,c;function v(){s==null||s(),s=null,o=!1,b!==null&&(clearTimeout(b),b=null),p!==null&&(clearTimeout(p),p=null),r==null||r.removeEventListener("transitionend",u),u=null}function y(w,D,C){D!==void 0&&(w.style.height=`${D}px`),w.style.transition=`height ${m.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,s=C}function g(w,D){w.style.overflowY=null,w.style.height=null,w.style.transition=null,v(),D!==c&&d(D)}function x(w,D){let C=0;r=w,o===!0?(v(),C=w.offsetHeight===w.scrollHeight?0:void 0):(c="hide",w.style.overflowY="hidden"),y(w,C,D),b=setTimeout(()=>{b=null,w.style.height=`${w.scrollHeight}px`,u=$=>{p=null,(Object($)!==$||$.target===w)&&g(w,"show")},w.addEventListener("transitionend",u),p=setTimeout(u,m.duration*1.1)},100)}function j(w,D){let C;r=w,o===!0?v():(c="show",w.style.overflowY="hidden",C=w.scrollHeight),y(w,C,D),b=setTimeout(()=>{b=null,w.style.height=0,u=$=>{p=null,(Object($)!==$||$.target===w)&&g(w,"hide")},w.addEventListener("transitionend",u),p=setTimeout(u,m.duration*1.1)},100)}return oa(()=>{o===!0&&v()}),()=>ke(Pl,{css:!1,appear:m.appear,onEnter:x,onLeave:j},n.default)}}),Ot=$n({}),Uy=Object.keys(El),St=$t({name:"QExpansionItem",props:{...El,...Sn,...ka,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...xn,"click","afterShow","afterHide"],setup(m,{slots:n,emit:d}){const{proxy:{$q:o}}=Tt(),s=wa(m,o),r=V(m.modelValue!==null?m.modelValue:m.defaultOpened),b=V(null),p=Vn(),{show:u,hide:c,toggle:v}=qn({showing:r});let y,g;const x=G(()=>`q-expansion-item q-item-type q-expansion-item--${r.value===!0?"expanded":"collapsed"} q-expansion-item--${m.popup===!0?"popup":"standard"}`),j=G(()=>m.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:m.contentInsetLevel*56+"px"}),w=G(()=>m.disable!==!0&&(m.href!==void 0||m.to!==void 0&&m.to!==null&&m.to!=="")),D=G(()=>{const ne={};return Uy.forEach(Ce=>{ne[Ce]=m[Ce]}),ne}),C=G(()=>w.value===!0||m.expandIconToggle!==!0),$=G(()=>m.expandedIcon!==void 0&&r.value===!0?m.expandedIcon:m.expandIcon||o.iconSet.expansionItem[m.denseToggle===!0?"denseIcon":"icon"]),R=G(()=>m.disable!==!0&&(w.value===!0||m.expandIconToggle===!0)),N=G(()=>({expanded:r.value===!0,detailsId:p.value,toggle:v,show:u,hide:c})),P=G(()=>{const ne=m.toggleAriaLabel!==void 0?m.toggleAriaLabel:o.lang.label[r.value===!0?"collapse":"expand"](m.label);return{role:"button","aria-expanded":r.value===!0?"true":"false","aria-controls":p.value,"aria-label":ne}});Me(()=>m.group,ne=>{g==null||g(),ne!==void 0&&W()});function A(ne){w.value!==!0&&v(ne),d("click",ne)}function E(ne){ne.keyCode===13&&B(ne,!0)}function B(ne,Ce){var Ie;Ce!==!0&&ne.qAvoidFocus!==!0&&((Ie=b.value)==null||Ie.focus()),v(ne),Rt(ne)}function z(){d("afterShow")}function q(){d("afterHide")}function W(){y===void 0&&(y=Cn()),r.value===!0&&(Ot[m.group]=y);const ne=Me(r,Ie=>{Ie===!0?Ot[m.group]=y:Ot[m.group]===y&&delete Ot[m.group]}),Ce=Me(()=>Ot[m.group],(Ie,ft)=>{ft===y&&Ie!==void 0&&Ie!==y&&c()});g=()=>{ne(),Ce(),Ot[m.group]===y&&delete Ot[m.group],g=void 0}}function te(){const ne={class:[`q-focusable relative-position cursor-pointer${m.denseToggle===!0&&m.switchToggleSide===!0?" items-end":""}`,m.expandIconClass],side:m.switchToggleSide!==!0,avatar:m.switchToggleSide},Ce=[ke(S,{class:"q-expansion-item__toggle-icon"+(m.expandedIcon===void 0&&r.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:$.value})];return R.value===!0&&(Object.assign(ne,{tabindex:0,...P.value,onClick:B,onKeyup:E}),Ce.unshift(ke("div",{ref:b,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),ke(M,ne,()=>Ce)}function T(){let ne;return n.header!==void 0?ne=[].concat(n.header(N.value)):(ne=[ke(M,()=>[ke(ve,{lines:m.labelLines},()=>m.label||""),m.caption?ke(ve,{lines:m.captionLines,caption:!0},()=>m.caption):null])],m.icon&&ne[m.switchToggleSide===!0?"push":"unshift"](ke(M,{side:m.switchToggleSide===!0,avatar:m.switchToggleSide!==!0},()=>ke(S,{name:m.icon})))),m.disable!==!0&&m.hideExpandIcon!==!0&&ne[m.switchToggleSide===!0?"unshift":"push"](te()),ne}function I(){const ne={ref:"item",style:m.headerStyle,class:m.headerClass,dark:s.value,disable:m.disable,dense:m.dense,insetLevel:m.headerInsetLevel};return C.value===!0&&(ne.clickable=!0,ne.onClick=A,Object.assign(ne,w.value===!0?D.value:P.value)),ke(le,ne,T)}function X(){return ee(ke("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:j.value,id:p.value},Ct(n.default)),[[Dl,r.value]])}function ge(){const ne=[I(),ke(Dy,{duration:m.duration,onShow:z,onHide:q},X)];return m.expandSeparator===!0&&ne.push(ke(Je,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:s.value}),ke(Je,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:s.value})),ne}return m.group!==void 0&&W(),oa(()=>{g==null||g()}),()=>ke("div",{class:x.value},[ke("div",{class:"q-expansion-item__container relative-position"},ge())])}}),Ay={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},jy={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},Ey={class:"text-bold"},My={class:"text-grey-8 text-caption"},Ny={class:"absolute-bottom text-grey-6 q-pa-md"},va="amanah-pos.layout.left-drawer-open",By={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(m,{expose:n}){const d=$e(),o=fe(),s=V(JSON.parse(localStorage.getItem(va))),r=V(!1),b=()=>s.value=!s.value,p=()=>{s.value=!1};return Me(s,u=>{localStorage.setItem(va,u)}),he(()=>{s.value=JSON.parse(localStorage.getItem(va)),d.screen.lt.md&&(s.value=!1)}),n({hideDrawer:p}),(u,c)=>(f(),O(Un,{view:"lHh LpR lFf"},{default:l(()=>[e(Tn,null,{default:l(()=>[e(Ze,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:l(()=>[m.showDrawerButton&&!s.value?(f(),O(U,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:b},{default:l(()=>[e(S,{class:"material-symbols-outlined"},{default:l(()=>[...c[28]||(c[28]=[_("dock_to_right",-1)])]),_:1})]),_:1})):k("",!0),It(u.$slots,"left-button",{},void 0,!0),e(Pn,{style:{"font-size":"16px"}},{default:l(()=>[It(u.$slots,"title",{},()=>[_(i(u.$config.APP_NAME),1)],!0)]),_:3}),It(u.$slots,"right-button",{},void 0,!0)]),_:3}),It(u.$slots,"header",{},void 0,!0)]),_:3}),e(On,{breakpoint:768,modelValue:s.value,"onUpdate:modelValue":c[27]||(c[27]=v=>s.value=v),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:l(()=>[t("div",Ay,[t("div",jy,[e(In,{modelValue:r.value,"onUpdate:modelValue":c[2]||(c[2]=v=>r.value=v),class:xe(["profile-btn text-bold",{"profile-btn-active":r.value}]),flat:"",label:a(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:l(()=>[e(Ne,{id:"profile-btn-popup",style:{color:"#444"}},{default:l(()=>[e(le,null,{default:l(()=>[e(Lt,{style:{"margin-left":"-15px"}},{default:l(()=>[e(S,{name:"person"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[t("div",Ey,i(a(o).props.auth.user.name),1),t("div",My,[_(i(u.$CONSTANTS.USER_TYPES[a(o).props.auth.user.type])+" ",1),c[29]||(c[29]=t("br",null,null,-1)),_(" "+i(a(o).props.company.name),1)])]),_:1})]),_:1})]),_:1}),e(Je),ee((f(),O(le,{class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/profile"),onClick:c[0]||(c[0]=v=>a(Z).get(u.route("admin.profile.edit")))},{default:l(()=>[e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[e(S,{name:"manage_accounts",class:"q-mr-sm"}),c[30]||(c[30]=_(" Profil Saya",-1))]),_:1})]),_:1})]),_:1},8,["active"])),[[ue],[se]]),u.$can("admin.company-profile.edit")?ee((f(),O(le,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/company-profile"),onClick:c[1]||(c[1]=v=>a(Z).get(u.route("admin.company-profile.edit")))},{default:l(()=>[e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[e(S,{name:"home_work",class:"q-mr-sm"}),c[31]||(c[31]=_(" Profil Perusahaan",-1))]),_:1})]),_:1})]),_:1},8,["active"])),[[ue],[se]]):k("",!0),e(Je),ee((f(),O(le,{clickable:"",style:{color:"inherit"},href:u.route("admin.auth.logout")},{default:l(()=>[e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[e(S,{name:"logout",class:"q-mr-sm"}),c[32]||(c[32]=_(" Keluar",-1))]),_:1})]),_:1})]),_:1},8,["href"])),[[ue],[se]])]),_:1})]),_:1},8,["modelValue","label","class"]),s.value?(f(),O(U,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:b},{default:l(()=>[e(S,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(Rn,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:l(()=>[e(Ne,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:l(()=>[ee((f(),O(le,{clickable:"",active:u.$page.url.startsWith("/admin/dashboard"),onClick:c[3]||(c[3]=v=>a(Z).get(u.route("admin.dashboard")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"dashboard"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[33]||(c[33]=[_("Dashboard",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]),u.$can("admin.sales-order.index")||u.$can("admin.customer.index")?(f(),O(St,{key:0,icon:"storefront",label:"Penjualan","default-opened":u.$page.url.startsWith("/admin/sales-orders")||u.$page.url.startsWith("/admin/customers")},{default:l(()=>[u.$can("admin.sales-order.index")?ee((f(),O(le,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/sales-orders"),onClick:c[4]||(c[4]=v=>a(Z).get(u.route("admin.sales-order.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"shopping_cart"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[34]||(c[34]=[_("Penjualan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.customer.index")?ee((f(),O(le,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/customers"),onClick:c[5]||(c[5]=v=>a(Z).get(u.route("admin.customer.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"people"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[35]||(c[35]=[_("Pelanggan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),u.$can("admin.purchase-order.index")||u.$can("admin.supplier.index")?(f(),O(St,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":u.$page.url.startsWith("/admin/purchase-orders")||u.$page.url.startsWith("/admin/suppliers")},{default:l(()=>[u.$can("admin.purchase-order.index")?ee((f(),O(le,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/purchase-orders"),onClick:c[6]||(c[6]=v=>a(Z).get(u.route("admin.purchase-order.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"shopping_cart"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[36]||(c[36]=[_("Pembelian",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.supplier.index")?ee((f(),O(le,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/suppliers"),onClick:c[7]||(c[7]=v=>a(Z).get(u.route("admin.supplier.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"people"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[37]||(c[37]=[_("Pemasok",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),u.$can("admin.product.index")||u.$can("admin.product-category.index")||u.$can("admin.stock-adjustment.index")||u.$can("admin.stock-movement.index")?(f(),O(St,{key:2,icon:"inventory_2",label:"Inventori","default-opened":u.$page.url.startsWith("/admin/products")||u.$page.url.startsWith("/admin/product-categories")||u.$page.url.startsWith("/admin/stock-adjustments")||u.$page.url.startsWith("/admin/stock-movements")},{default:l(()=>[u.$can("admin.stock-adjustment.index")?ee((f(),O(le,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/stock-adjustments"),onClick:c[8]||(c[8]=v=>a(Z).get(u.route("admin.stock-adjustment.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"swap_vert"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[38]||(c[38]=[_("Penyesuaian Stok",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.stock-movement.index")?ee((f(),O(le,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/stock-movements"),onClick:c[9]||(c[9]=v=>a(Z).get(u.route("admin.stock-movement.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"timeline"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[39]||(c[39]=[_("Riwayat Stok",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.product.index")?ee((f(),O(le,{key:2,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/products"),onClick:c[10]||(c[10]=v=>a(Z).get(u.route("admin.product.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"box"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[40]||(c[40]=[_("Produk",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.product-category.index")?ee((f(),O(le,{key:3,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/product-categories"),onClick:c[11]||(c[11]=v=>a(Z).get(u.route("admin.product-category.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"category"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[41]||(c[41]=[_("Kategori Produk",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),u.$can("admin.cashier-session.index")||u.$can("admin.cashier-terminal.index")?(f(),O(St,{key:3,icon:"point_of_sale",label:"Kasir","default-opened":u.$page.url.startsWith("/admin/cashier-terminals")||u.$page.url.startsWith("/admin/cashier-session")},{default:l(()=>[u.$can("admin.cashier-session.index")?ee((f(),O(le,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/cashier-sessions"),onClick:c[12]||(c[12]=v=>a(Z).get(u.route("admin.cashier-session.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"tv_signin"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[42]||(c[42]=[_("Sesi Kasir",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.cashier-terminal.index")?ee((f(),O(le,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/cashier-terminals"),onClick:c[13]||(c[13]=v=>a(Z).get(u.route("admin.cashier-terminal.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"point_of_sale"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[43]||(c[43]=[_("Terminal Kasir",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),u.$can("admin.customer-wallet-transaction-confirmation.index")||u.$can("admin.customer-wallet-transaction.index")?(f(),O(St,{key:4,icon:"wallet",label:"Wallet","default-opened":u.$page.url.startsWith("/admin/customer-wallet-transactions")||u.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:l(()=>[u.$can("admin.customer-wallet-transaction-confirmation.index")?ee((f(),O(le,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:c[14]||(c[14]=v=>a(Z).get(u.route("admin.customer-wallet-transaction-confirmation.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"add_task"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[44]||(c[44]=[_("Konfirmasi Top Up",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.customer-wallet-transaction.index")?ee((f(),O(le,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:c[15]||(c[15]=v=>a(Z).get(u.route("admin.customer-wallet-transaction.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"moving"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[45]||(c[45]=[_("Transaksi",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),u.$can("admin.finance-transaction.index")||u.$can("admin.finance-account.index")?(f(),O(St,{key:5,icon:"finance",label:"Keuangan","default-opened":u.$page.url.startsWith("/admin/finance-accounts")||u.$page.url.startsWith("/admin/finance-transactions")},{default:l(()=>[u.$can("admin.finance-transaction.index")?ee((f(),O(le,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/finance-transactions"),onClick:c[16]||(c[16]=v=>a(Z).get(u.route("admin.finance-transaction.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"moving"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[46]||(c[46]=[_("Transaksi",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.finance-account.index")?ee((f(),O(le,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/finance-accounts"),onClick:c[17]||(c[17]=v=>a(Z).get(u.route("admin.finance-account.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"groups_2"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[47]||(c[47]=[_("Akun Kas",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),u.$can("admin.operational-cost.index")||u.$can("admin.operational-cost-category.index")?(f(),O(St,{key:6,icon:"paid",label:"Operasional","default-opened":u.$page.url.startsWith("/admin/operational-costs")||u.$page.url.startsWith("/admin/operational-cost-categories")},{default:l(()=>[u.$can("admin.operational-cost.index")?ee((f(),O(le,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/operational-costs"),onClick:c[18]||(c[18]=v=>a(Z).get(u.route("admin.operational-cost.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"request_quote"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[48]||(c[48]=[_("Biaya Operasional",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.operational-cost-category.index")?ee((f(),O(le,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/operational-cost-categories"),onClick:c[19]||(c[19]=v=>a(Z).get(u.route("admin.operational-cost-category.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"category"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[49]||(c[49]=[_("Kategori",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(St,{icon:"settings",label:"Pengaturan","default-opened":u.$page.url.startsWith("/admin/settings")},{default:l(()=>[u.$can("admin.pos-settings.edit")?ee((f(),O(le,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/pos"),onClick:c[20]||(c[20]=v=>a(Z).get(u.route("admin.pos-settings.edit")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"point_of_sale"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[50]||(c[50]=[_("Point of Sales",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.user.index")?ee((f(),O(le,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:c[21]||(c[21]=v=>a(Z).get(u.route("admin.user-activity-log.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"article"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[51]||(c[51]=[_("Log Aktivitas Pengguna",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.user.index")?ee((f(),O(le,{key:2,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/users"),onClick:c[22]||(c[22]=v=>a(Z).get(u.route("admin.user.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"person"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[52]||(c[52]=[_("Pengguna",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.user-role.index")?ee((f(),O(le,{key:3,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/user-roles"),onClick:c[23]||(c[23]=v=>a(Z).get(u.route("admin.user-role.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"group"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[53]||(c[53]=[_("Role Pengguna",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),ee((f(),O(le,{class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/profile"),onClick:c[24]||(c[24]=v=>a(Z).get(u.route("admin.user-profile.edit")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"manage_accounts"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[54]||(c[54]=[_("Profil Saya",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]),u.$can("admin.company-profile.edit")?ee((f(),O(le,{key:4,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/company-profile"),onClick:c[25]||(c[25]=v=>a(Z).get(u.route("admin.company-profile.edit")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"apartment"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[55]||(c[55]=[_("Profil Perusahaan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),u.$can("admin.database-settings.index")?ee((f(),O(le,{key:5,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/database"),onClick:c[26]||(c[26]=v=>a(Z).get(u.route("admin.database-settings.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"database"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[56]||(c[56]=[_("Database",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"]),ee((f(),O(le,{clickable:"",style:{color:"inherit"},href:u.route("admin.auth.logout")},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"logout"})]),_:1}),e(M,null,{default:l(()=>[e(ve,null,{default:l(()=>[...c[57]||(c[57]=[_("Logout",-1)])]),_:1})]),_:1})]),_:1},8,["href"])),[[ue],[se]]),t("div",Ny," © 2025 - "+i(u.$config.APP_NAME+" v"+u.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Dn,{class:"bg-grey-1"},{default:l(()=>[e(Ve,null,{default:l(()=>[It(u.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),It(u.$slots,"footer",{},void 0,!0)]),_:3}))}},zy=_t(By,[["__scopeId","data-v-3c9f3160"]]),Fy={__name:"GuestLayout",setup(m){return(n,d)=>(f(),O(An,null,{default:l(()=>[It(n.$slots,"default")]),_:3}))}};jn({onRegistered(m){console.log("Admin Service Worker registered:",m)}});En({layouts:{authenticated:zy,guest:Fy},pagesGlob:Object.assign({"./pages/About.vue":Fn,"./pages/_examples/Autocomplete1.vue":Yn,"./pages/auth/Login.vue":es,"./pages/cashier-session/Close.vue":rs,"./pages/cashier-session/Detail.vue":Gs,"./pages/cashier-session/Index.vue":lr,"./pages/cashier-session/Open.vue":rr,"./pages/cashier-session/detail/FinanceTransactionTab.vue":Ks,"./pages/cashier-session/detail/MainInfoTab.vue":Os,"./pages/cashier-session/detail/SalesOrderTab.vue":Ns,"./pages/cashier-terminal/Detail.vue":$r,"./pages/cashier-terminal/Editor.vue":Cr,"./pages/cashier-terminal/Index.vue":Dr,"./pages/cashier-terminal/detail/MainInfoTab.vue":gr,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":_r,"./pages/customer-wallet-transaction-confirmation/Detail.vue":Hr,"./pages/customer-wallet-transaction-confirmation/Index.vue":Jr,"./pages/customer-wallet-transaction/Adjustment.vue":Zr,"./pages/customer-wallet-transaction/Detail.vue":ui,"./pages/customer-wallet-transaction/Editor.vue":fi,"./pages/customer-wallet-transaction/Index.vue":wi,"./pages/customer/Detail.vue":Fi,"./pages/customer/Editor.vue":Yi,"./pages/customer/Import.vue":ed,"./pages/customer/Index.vue":sd,"./pages/customer/detail/MainInfoTab.vue":Pi,"./pages/customer/detail/OrderHistoryTab.vue":Ei,"./pages/customer/detail/WalletHistoryTab.vue":Ri,"./pages/dashboard/Index.vue":qd,"./pages/dashboard/cards/ActualSummaryCard.vue":pd,"./pages/dashboard/cards/ChartCard.vue":_d,"./pages/dashboard/cards/SummaryCard.vue":jd,"./pages/dashboard/cards/TopCard.vue":hd,"./pages/finance-account/Detail.vue":Qd,"./pages/finance-account/Editor.vue":eu,"./pages/finance-account/Index.vue":pu,"./pages/finance-account/detail/HistoryTab.vue":Fd,"./pages/finance-account/detail/MainInfoTab.vue":Md,"./pages/finance-transaction/Detail.vue":xu,"./pages/finance-transaction/Editor.vue":Cu,"./pages/finance-transaction/Index.vue":Au,"./pages/operational-cost-category/Editor.vue":Nu,"./pages/operational-cost-category/Index.vue":Yu,"./pages/operational-cost/Detail.vue":om,"./pages/operational-cost/Editor.vue":um,"./pages/operational-cost/Index.vue":ym,"./pages/product-category/Editor.vue":$m,"./pages/product-category/Index.vue":Pm,"./pages/product/Detail.vue":Xm,"./pages/product/Editor.vue":ac,"./pages/product/Import.vue":sc,"./pages/product/Index.vue":vc,"./pages/product/detail/MainInfoTab.vue":zm,"./pages/product/detail/StockHistoryTab.vue":Hm,"./pages/purchase-order/Detail.vue":vp,"./pages/purchase-order/Editor.vue":Nf,"./pages/purchase-order/Index.vue":Zf,"./pages/purchase-order/detail/InvoiceTab.vue":Bc,"./pages/purchase-order/detail/PaymentDialog.vue":Qc,"./pages/purchase-order/detail/PaymentTab.vue":cp,"./pages/purchase-order/editor/HelpDialog.vue":Jp,"./pages/purchase-order/editor/ItemEditorDialog.vue":Lp,"./pages/purchase-order/editor/ItemsListTable.vue":hp,"./pages/purchase-order/editor/OrderInfoDialog.vue":ef,"./pages/purchase-order/editor/PaymentDialog.vue":Ep,"./pages/purchase-order/editor/SuccessDialog.vue":ff,"./pages/sales-order/Detail.vue":Zg,"./pages/sales-order/Editor.vue":gb,"./pages/sales-order/Index.vue":Ib,"./pages/sales-order/detail/InvoiceTab.vue":xg,"./pages/sales-order/detail/PaymentDialog.vue":Ig,"./pages/sales-order/detail/PaymentTab.vue":Qg,"./pages/sales-order/editor/HelpDialog.vue":q1,"./pages/sales-order/editor/ItemEditorDialog.vue":$1,"./pages/sales-order/editor/ItemsListTable.vue":o1,"./pages/sales-order/editor/OrderInfoDialog.vue":O1,"./pages/sales-order/editor/PaymentDialog.vue":k1,"./pages/sales-order/editor/SuccessDialog.vue":L1,"./pages/settings/company-profile/Edit.vue":Eb,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":Rb,"./pages/settings/database/Index.vue":Fb,"./pages/settings/pos/Edit.vue":Wb,"./pages/settings/user-activity-log/Detail.vue":iv,"./pages/settings/user-activity-log/Index.vue":bv,"./pages/settings/user-profile/Edit.vue":$v,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":vv,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":_v,"./pages/settings/user-role/Detail.vue":Uv,"./pages/settings/user-role/Editor.vue":Bv,"./pages/settings/user-role/Index.vue":Yv,"./pages/settings/user/Detail.vue":o_,"./pages/settings/user/Editor.vue":u_,"./pages/settings/user/Index.vue":v_,"./pages/stock-adjustment/Create.vue":q_,"./pages/stock-adjustment/Detail.vue":j_,"./pages/stock-adjustment/Editor.vue":L_,"./pages/stock-adjustment/Index.vue":ey,"./pages/stock-movement/Index.vue":sy,"./pages/supplier/Detail.vue":py,"./pages/supplier/Editor.vue":Sy,"./pages/supplier/Index.vue":Ry})});
