import{_ as vt,r as J,c as h,o as c,a as e,w as l,b as t,Q as ce,d as le,e as b,F as Y,f as C,g as D,h as k,i as ie,t as i,u as a,j as K,k as Xe,l as ra,T as Me,m as No,n as Ve,p as Be,q as X,s as lt,v as Qt,x as q,y as oe,z as A,A as mt,B as be,C as je,D as te,E as ut,G as st,H as Z,I as Mo,J as ga,K as Rl,L as xt,M as G,N as ia,O as $e,R as re,P as ke,S as Dl,U as Bo,V as zo,W as Et,X as wt,Y as ba,Z as ka,$ as Fo,a0 as Ue,a1 as Lo,a2 as Ho,a3 as Ko,a4 as Tt,a5 as Yo,a6 as Wo,a7 as va,a8 as Bt,a9 as ya,aa as Da,ab as Qo,ac as ta,ad as Ia,ae as Jo,af as Aa,ag as Go,ah as Il,ai as Xo,aj as Zo,ak as en,al as ha,am as $a,an as tn,ao as qt,ap as fe,aq as Pe,ar as Re,as as De,at as xe,au as Ce,av as H,aw as we,ax as dt,ay as Ie,az as Te,aA as la,aB as he,aC as tt,aD as We,aE as Le,aF as ot,aG as ze,aH as Ye,aI as Ne,aJ as ae,aK as M,aL as me,aM as Qe,aN as Ee,aO as Xt,aP as oa,aQ as Lt,aR as Ht,aS as Pt,aT as Ot,aU as at,aV as Ua,aW as Kt,aX as da,aY as Ft,aZ as Yt,a_ as xa,a$ as Zt,b0 as zt,b1 as na,b2 as ct,b3 as an,b4 as ln,b5 as Al,b6 as on,b7 as nn,b8 as sn,b9 as rn,ba as Ea,bb as dn,bc as un,bd as mn,be as cn,bf as Ul,bg as Ke,bh as pn,bi as ja,bj as fn,bk as gn,bl as bn,bm as vn,bn as yn,bo as _n,bp as kn,bq as ye,br as Jt,bs as rt,bt as wn,bu as hn,bv as $n,bw as Gt,bx as El,by as sa,bz as xn,bA as Sn,bB as Vn,bC as $t,bD as Rt,bE as jl,bF as Nl,bG as qn,bH as kt,bI as gt,bJ as bt,bK as Nt,bL as ua,bM as Ml,bN as Cn,bO as Tn,bP as Pn,bQ as Bl,bR as On,bS as Rn,bT as Dn,bU as Ut,bV as In,bW as An,bX as Un,bY as En,bZ as jn,b_ as Nn,b$ as Mn,c0 as Bn,c1 as zn,c2 as Fn}from"./virtual_pwa-register-DRELx6Yo.js";const Ln={},Hn={class:"row"};function Kn(u,n){const d=J("i-head"),o=J("authenticated-layout");return c(),h(Y,null,[e(d,{title:"About"}),e(o,null,{title:l(()=>n[0]||(n[0]=[b("About")])),default:l(()=>[t("div",Hn,[e(ce,{class:"col q-pa-md q-ma-md",square:"",flat:"",bordered:""},{default:l(()=>[e(le,null,{default:l(()=>n[1]||(n[1]=[t("div",{class:"q-mb-md text-h4"},"About",-1),t("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Autem soluta, accusamus placeat eius eligendi perferendis quisquam veritatis iste debitis laboriosam facere et aliquam quos beatae illo distinctio rerum eos! Expedita, voluptatem. Aut nihil deleniti magni fuga eius labore aliquam nulla quod ullam sunt amet eum asperiores, harum unde eligendi tempore sapiente. Placeat sed, dignissimos voluptatum perspiciatis saepe aspernatur, maxime est, ipsam quas nobis cumque sunt labore molestias? Amet in sed ullam recusandae, nostrum dicta facilis blanditiis incidunt quae commodi soluta id impedit vel fugit illo, molestias reiciendis, provident nam molestiae! Ipsam, hic. Facere aut quisquam praesentium enim illum, pariatur nam.",-1),t("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque, cum nulla. Ut eligendi tenetur aliquam cum mollitia repellat voluptas, fugiat doloremque sunt commodi enim excepturi distinctio id sapiente incidunt ipsam asperiores cupiditate, labore libero! Ad facere magni cumque perspiciatis, adipisci possimus pariatur quo nobis minus, est enim similique quaerat vel asperiores ipsam harum et, totam fugit.",-1),t("p",null,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Suscipit aspernatur maxime consectetur, consequatur excepturi facilis praesentium rem placeat sapiente, maiores doloribus modi voluptate. Unde autem dolor officiis numquam incidunt quasi aspernatur nam dolores ratione quidem recusandae, nulla qui provident molestias odit nemo praesentium quas voluptatem aliquid perferendis, iste veritatis vitae. Dolor, eligendi quidem distinctio asperiores doloremque culpa corporis quibusdam earum ex laudantium iure officia ullam nostrum maxime voluptatum laboriosam impedit labore illum. Culpa, veniam dolor odio ad eius nisi, aspernatur quia veritatis blanditiis repellat id minima deserunt beatae?",-1)])),_:1})]),_:1})])]),_:1})],64)}const Yn=vt(Ln,[["render",Kn]]),Wn=Object.freeze(Object.defineProperty({__proto__:null,default:Yn},Symbol.toStringTag,{value:"Module"})),Qn={class:"q-ma-md"},Jn={key:0},Gn={__name:"Autocomplete1",setup(u){const n=C(null),d=C([]);let o=null;const s=(r,v)=>{if(r.length<2){v(()=>{d.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Xe.get(`/web-api/customers?q=${r}`).then(g=>{const p=g.data.data.map(m=>({label:`${m.code} - ${m.name}`,value:m.id,data:m}));v(()=>{d.value=p})}).catch(g=>{console.error("Gagal mengambil data pelanggan:",g),v(()=>{d.value=[]})})})};return(r,v)=>{const g=J("guest-layout");return c(),D(g,null,{default:l(()=>[t("div",Qn,[e(ie,{class:"full-width",modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=p=>n.value=p),"use-input":"",label:"Cari Pelanggan",options:d.value,onFilter:s,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),n.value?(c(),h("div",Jn," Saldo: Rp. "+i(a(K)(n.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},Xn=Object.freeze(Object.defineProperty({__proto__:null,default:Gn},Symbol.toStringTag,{value:"Module"})),Zn={style:{"margin-left":"-10px"}},ma={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(u,{emit:n}){const d=u,o=n;return(s,r)=>(c(),h("div",Zn,[e(ra,{class:"full-width q-pl-none","model-value":d.modelValue,disable:d.disable,label:d.label,"onUpdate:modelValue":r[0]||(r[0]=v=>o("update:modelValue",v))},null,8,["model-value","disable","label"])]))}};function wa(u){return u instanceof File||u instanceof Blob||u instanceof FileList&&u.length>0||u instanceof FormData&&Array.from(u.values()).some(n=>wa(n))||typeof u=="object"&&u!==null&&Object.values(u).some(n=>wa(n))}function es(u,n=null){const d=Me(u,n);let o=v=>v,s=null;const r={transform:v=>g=>(o=g,v),submit:v=>(g,p,m={})=>{d.wasSuccessful=!1,d.recentlySuccessful=!1,d.clearErrors(),clearTimeout(s),m.onBefore&&m.onBefore(),d.processing=!0,m.onStart&&m.onStart();const f=o(d.data());axios[g](p,f,{headers:{"Content-Type":wa(f)?"multipart/form-data":"application/json"},onUploadProgress:_=>{d.progress=_,m.onProgress&&m.onProgress(_)}}).then(_=>{d.processing=!1,d.progress=null,d.clearErrors(),d.wasSuccessful=!0,d.recentlySuccessful=!0,s=setTimeout(()=>d.recentlySuccessful=!1,2e3),m.onSuccess&&m.onSuccess(_.data),d.defaults(No(d.data())),d.isDirty=!1}).catch(_=>{var y;d.processing=!1,d.progress=null,d.clearErrors(),((y=_.response)==null?void 0:y.status)===422&&Object.keys(_.response.data.errors).forEach(x=>{d.setError(x,_.response.data.errors[x][0])}),m.onError&&m.onError(_)}).finally(()=>{d.processing=!1,d.progress=null,m.onFinish&&m.onFinish()})}};return new Proxy(d,{get:(v,g,p)=>Object.keys(r).indexOf(g)<0?v[g]:r[g](p)})}const ts={class:"column"},as={class:"row"},ls={class:"flex justify-center"},os={__name:"Login",setup(u){let n=es({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const d=()=>lt({form:n,url:route("admin.auth.login"),onSuccess:()=>{n.processing=!0,window.location.href=route("admin.dashboard")}}),o=C(!1);return(s,r)=>{const v=J("i-head"),g=J("guest-layout");return c(),h(Y,null,[e(v,{title:"Login"}),e(g,null,{default:l(()=>[e(Ve,{class:"row justify-center items-center"},{default:l(()=>[t("div",ts,[t("div",as,[e(Be,{class:"q-gutter-md",onSubmit:X(d,["prevent"])},{default:l(()=>[e(ce,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:l(()=>[e(le,{class:"text-center"},{default:l(()=>[t("div",ls,[e(Qt,{size:"80px"},{default:l(()=>[e(q,{name:"badge",color:"primary"})]),_:1})]),r[4]||(r[4]=t("h6",{class:"q-my-sm text-primary"},"Login Staff",-1))]),_:1}),e(le,null,{default:l(()=>[e(oe,{modelValue:a(n).username,"onUpdate:modelValue":r[0]||(r[0]=p=>a(n).username=p),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!a(n).errors.username,autocomplete:"username","error-message":a(n).errors.username,disable:a(n).processing,rules:[p=>p&&p.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:l(()=>[e(q,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(oe,{modelValue:a(n).password,"onUpdate:modelValue":r[2]||(r[2]=p=>a(n).password=p),type:o.value?"text":"password",label:"Kata Sandi",error:!!a(n).errors.password,autocomplete:"current-password","error-message":a(n).errors.password,"lazy-rules":"",disable:a(n).processing,rules:[p=>p&&p.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:l(()=>[e(A,{dense:"",flat:"",round:"",onClick:r[1]||(r[1]=p=>o.value=!o.value)},{default:l(()=>[e(q,{name:o.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(ma,{class:"q-mt-sm",modelValue:a(n).remember,"onUpdate:modelValue":r[3]||(r[3]=p=>a(n).remember=p),disable:a(n).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(mt,null,{default:l(()=>[e(A,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:a(n).processing,loading:a(n).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},ns=Object.freeze(Object.defineProperty({__proto__:null,default:os},Symbol.toStringTag,{value:"Module"})),ss={class:"q-gutter-sm"},rs={class:"col col-md-6 q-pa-xs"},is={class:"detail q-mt-md"},ds={key:0},us={class:"text-bold"},Na="Tutup Sesi Kasir",ms={__name:"Close",setup(u){const n=be(),d=Me({closing_notes:n.props.data.closing_notes,closing_balance:parseFloat(n.props.data.closing_balance)}),o=()=>lt({form:d,url:route("admin.cashier-session.close",{id:n.props.data.id})});return(s,r)=>{const v=J("i-head"),g=J("authenticated-layout");return c(),h(Y,null,[e(v,{title:Na}),e(g,null,{title:l(()=>[b(i(Na))]),"left-button":l(()=>[t("div",ss,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=p=>s.$inertia.get(s.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",rs,[e(Be,{class:"row",onSubmit:X(o,["prevent"]),onValidationError:a(je)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":r[1]||(r[1]=p=>a(d).id=p)},null,512),[[ut,a(d).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[t("table",is,[t("tbody",null,[t("tr",null,[r[4]||(r[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),r[5]||(r[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.id),1)]),t("tr",null,[r[6]||(r[6]=t("td",null,"Terminal",-1)),r[7]||(r[7]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.cashier_terminal.name),1)]),t("tr",null,[r[8]||(r[8]=t("td",null,"Kasir",-1)),r[9]||(r[9]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.user.username)+" - "+i(a(n).props.data.user.name),1)]),t("tr",null,[r[10]||(r[10]=t("td",null,"Saldo Awal",-1)),r[11]||(r[11]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.opening_balance)),1)]),a(n).props.data.opening_notes?(c(),h("tr",ds,[r[12]||(r[12]=t("td",null,"Catatan Buka",-1)),r[13]||(r[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.opening_notes),1)])):k("",!0),t("tr",null,[r[14]||(r[14]=t("td",null,"Total Penjualan",-1)),r[15]||(r[15]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.total_sales)),1)]),t("tr",null,[r[16]||(r[16]=t("td",null,"Total Pemasukan",-1)),r[17]||(r[17]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.total_income)),1)]),t("tr",null,[r[18]||(r[18]=t("td",null,"Total Pengeluaran",-1)),r[19]||(r[19]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.total_expense)),1)]),t("tr",null,[r[21]||(r[21]=t("td",null,"Saldo Akhir",-1)),r[22]||(r[22]=t("td",null,":",-1)),t("td",null,[t("div",us,i(a(st)(a(n).props.data.closing_balance)),1),r[20]||(r[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(oe,{modelValue:a(d).closing_notes,"onUpdate:modelValue":r[2]||(r[2]=p=>a(d).closing_notes=p),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(d).processing,error:!!a(d).errors.closing_notes,"error-message":a(d).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:a(d).processing},null,8,["disable"]),e(A,{label:"Batal",icon:"cancel",disable:a(d).processing,onClick:r[3]||(r[3]=p=>a(Z).get(s.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},cs=Object.freeze(Object.defineProperty({__proto__:null,default:ms},Symbol.toStringTag,{value:"Module"}));let ps=0;const fs=["click","keydown"],gs={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${ps++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function bs(u,n,d,o){const s=Mo(Rl,ga);if(s===ga)return console.error("QTab/QRouteTab component needs to be child of QTabs"),ga;const{proxy:r}=xt(),v=C(null),g=C(null),p=C(null),m=G(()=>u.disable===!0||u.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},u.ripple===!0?{}:u.ripple)),f=G(()=>s.currentModel.value===u.name),_=G(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(f.value===!0?" q-tab--active"+(s.tabProps.value.activeClass?" "+s.tabProps.value.activeClass:"")+(s.tabProps.value.activeColor?` text-${s.tabProps.value.activeColor}`:"")+(s.tabProps.value.activeBgColor?` bg-${s.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(u.icon&&u.label&&s.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(u.noCaps===!0||s.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(u.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),y=G(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(s.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(u.contentClass!==void 0?` ${u.contentClass}`:"")),x=G(()=>u.disable===!0||s.hasFocus.value===!0||f.value===!1&&s.hasActiveTab.value===!0?-1:u.tabindex||0);function P(B,U){if(U!==!0&&v.value!==null&&v.value.focus(),u.disable!==!0){s.updateModel({name:u.name}),d("click",B);return}}function $(B){Bo(B,[13,32])?P(B,!0):zo(B)!==!0&&B.keyCode>=35&&B.keyCode<=40&&B.altKey!==!0&&B.metaKey!==!0&&s.onKbdNavigate(B.keyCode,r.$el)===!0&&Et(B),d("keydown",B)}function j(){const B=s.tabProps.value.narrowIndicator,U=[],w=ke("div",{ref:p,class:["q-tab__indicator",s.tabProps.value.indicatorClass]});u.icon!==void 0&&U.push(ke(q,{class:"q-tab__icon",name:u.icon})),u.label!==void 0&&U.push(ke("div",{class:"q-tab__label"},u.label)),u.alert!==!1&&U.push(u.alertIcon!==void 0?ke(q,{class:"q-tab__alert-icon",color:u.alert!==!0?u.alert:void 0,name:u.alertIcon}):ke("div",{class:"q-tab__alert"+(u.alert!==!0?` text-${u.alert}`:"")})),B===!0&&U.push(w);const O=[ke("div",{class:"q-focus-helper",tabindex:-1,ref:v}),ke("div",{class:y.value},Dl(n.default,U))];return B===!1&&O.push(w),O}const N={name:G(()=>u.name),rootRef:g,tabIndicatorRef:p,routeData:o};ia(()=>{s.unregisterTab(N)}),$e(()=>{s.registerTab(N)});function V(B,U){const w={ref:g,class:_.value,tabindex:x.value,role:"tab","aria-selected":f.value===!0?"true":"false","aria-disabled":u.disable===!0?"true":void 0,onClick:P,onKeydown:$,...U};return te(ke(B,w,j()),[[re,m.value]])}return{renderTab:V,$tabs:s}}const Ze=wt({name:"QTab",props:gs,emits:fs,setup(u,{slots:n,emit:d}){const{renderTab:o}=bs(u,n,d);return()=>o("div")}});function vs(u,n,d){const o=d===!0?["left","right"]:["top","bottom"];return`absolute-${n===!0?o[0]:o[1]}${u?` text-${u}`:""}`}const ys=["left","center","right","justify"],Dt=wt({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:u=>ys.includes(u)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(u,{slots:n,emit:d}){const{proxy:o}=xt(),{$q:s}=o,{registerTick:r}=ba(),{registerTick:v}=ba(),{registerTick:g}=ba(),{registerTimeout:p,removeTimeout:m}=ka(),{registerTimeout:f,removeTimeout:_}=ka(),y=C(null),x=C(null),P=C(u.modelValue),$=C(!1),j=C(!0),N=C(!1),V=C(!1),B=[],U=C(0),w=C(!1);let O=null,T=null,z;const E=G(()=>({activeClass:u.activeClass,activeColor:u.activeColor,activeBgColor:u.activeBgColor,indicatorClass:vs(u.indicatorColor,u.switchIndicator,u.vertical),narrowIndicator:u.narrowIndicator,inlineLabel:u.inlineLabel,noCaps:u.noCaps})),S=G(()=>{const ue=U.value,_e=P.value;for(let Se=0;Se<ue;Se++)if(B[Se].name.value===_e)return!0;return!1}),F=G(()=>`q-tabs__content--align-${$.value===!0?"left":V.value===!0?"justify":u.align}`),Q=G(()=>`q-tabs row no-wrap items-center q-tabs--${$.value===!0?"":"not-"}scrollable q-tabs--${u.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${u.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${u.mobileArrows===!0?"":"out"}-arrows`+(u.dense===!0?" q-tabs--dense":"")+(u.shrink===!0?" col-shrink":"")+(u.stretch===!0?" self-stretch":"")),R=G(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+F.value+(u.contentClass!==void 0?` ${u.contentClass}`:"")),I=G(()=>u.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),ee=G(()=>u.vertical!==!0&&s.lang.rtl===!0),se=G(()=>Fo===!1&&ee.value===!0);Ue(ee,yt),Ue(()=>u.modelValue,ue=>{ne({name:ue,setCurrent:!0,skipEmit:!0})}),Ue(()=>u.outsideArrows,qe);function ne({name:ue,setCurrent:_e,skipEmit:Se}){P.value!==ue&&(Se!==!0&&u["onUpdate:modelValue"]!==void 0&&d("update:modelValue",ue),(_e===!0||u["onUpdate:modelValue"]===void 0)&&(ft(P.value,ue),P.value=ue))}function qe(){r(()=>{Fe({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function Fe(ue){if(I.value===void 0||x.value===null)return;const _e=ue[I.value.container],Se=Math.min(x.value[I.value.scroll],Array.prototype.reduce.call(x.value.children,(Ge,Ae)=>Ge+(Ae[I.value.content]||0),0)),Je=_e>0&&Se>_e;$.value=Je,Je===!0&&v(yt),V.value=_e<parseInt(u.breakpoint,10)}function ft(ue,_e){const Se=ue!=null&&ue!==""?B.find(Ge=>Ge.name.value===ue):null,Je=_e!=null&&_e!==""?B.find(Ge=>Ge.name.value===_e):null;if(ea===!0)ea=!1;else if(Se&&Je){const Ge=Se.tabIndicatorRef.value,Ae=Je.tabIndicatorRef.value;O!==null&&(clearTimeout(O),O=null),Ge.style.transition="none",Ge.style.transform="none",Ae.style.transition="none",Ae.style.transform="none";const Oe=Ge.getBoundingClientRect(),it=Ae.getBoundingClientRect();Ae.style.transform=u.vertical===!0?`translate3d(0,${Oe.top-it.top}px,0) scale3d(1,${it.height?Oe.height/it.height:1},1)`:`translate3d(${Oe.left-it.left}px,0,0) scale3d(${it.width?Oe.width/it.width:1},1,1)`,g(()=>{O=setTimeout(()=>{O=null,Ae.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Ae.style.transform="none"},70)})}Je&&$.value===!0&&pt(Je.rootRef.value)}function pt(ue){const{left:_e,width:Se,top:Je,height:Ge}=x.value.getBoundingClientRect(),Ae=ue.getBoundingClientRect();let Oe=u.vertical===!0?Ae.top-Je:Ae.left-_e;if(Oe<0){x.value[u.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Oe),yt();return}Oe+=u.vertical===!0?Ae.height-Ge:Ae.width-Se,Oe>0&&(x.value[u.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Oe),yt())}function yt(){const ue=x.value;if(ue===null)return;const _e=ue.getBoundingClientRect(),Se=u.vertical===!0?ue.scrollTop:Math.abs(ue.scrollLeft);ee.value===!0?(j.value=Math.ceil(Se+_e.width)<ue.scrollWidth-1,N.value=Se>0):(j.value=Se>0,N.value=u.vertical===!0?Math.ceil(Se+_e.height)<ue.scrollHeight:Math.ceil(Se+_e.width)<ue.scrollWidth)}function ve(ue){T!==null&&clearInterval(T),T=setInterval(()=>{He(ue)===!0&&pe()},5)}function L(){ve(se.value===!0?Number.MAX_SAFE_INTEGER:0)}function W(){ve(se.value===!0?0:Number.MAX_SAFE_INTEGER)}function pe(){T!==null&&(clearInterval(T),T=null)}function de(ue,_e){const Se=Array.prototype.filter.call(x.value.children,it=>it===_e||it.matches&&it.matches(".q-tab.q-focusable")===!0),Je=Se.length;if(Je===0)return;if(ue===36)return pt(Se[0]),Se[0].focus(),!0;if(ue===35)return pt(Se[Je-1]),Se[Je-1].focus(),!0;const Ge=ue===(u.vertical===!0?38:37),Ae=ue===(u.vertical===!0?40:39),Oe=Ge===!0?-1:Ae===!0?1:void 0;if(Oe!==void 0){const it=ee.value===!0?-1:1,ht=Se.indexOf(_e)+Oe*it;return ht>=0&&ht<Je&&(pt(Se[ht]),Se[ht].focus({preventScroll:!0})),!0}}const ge=G(()=>se.value===!0?{get:ue=>Math.abs(ue.scrollLeft),set:(ue,_e)=>{ue.scrollLeft=-_e}}:u.vertical===!0?{get:ue=>ue.scrollTop,set:(ue,_e)=>{ue.scrollTop=_e}}:{get:ue=>ue.scrollLeft,set:(ue,_e)=>{ue.scrollLeft=_e}});function He(ue){const _e=x.value,{get:Se,set:Je}=ge.value;let Ge=!1,Ae=Se(_e);const Oe=ue<Ae?-1:1;return Ae+=Oe*5,Ae<0?(Ge=!0,Ae=0):(Oe===-1&&Ae<=ue||Oe===1&&Ae>=ue)&&(Ge=!0,Ae=ue),Je(_e,Ae),yt(),Ge}function nt(ue,_e){for(const Se in ue)if(ue[Se]!==_e[Se])return!1;return!0}function _t(){let ue=null,_e={matchedLen:0,queryDiff:9999,hrefLen:0};const Se=B.filter(Oe=>Oe.routeData!==void 0&&Oe.routeData.hasRouterLink.value===!0),{hash:Je,query:Ge}=o.$route,Ae=Object.keys(Ge).length;for(const Oe of Se){const it=Oe.routeData.exact.value===!0;if(Oe.routeData[it===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:ht,query:pa,matched:Eo,href:jo}=Oe.routeData.resolvedLink.value,fa=Object.keys(pa).length;if(it===!0){if(ht!==Je||fa!==Ae||nt(Ge,pa)===!1)continue;ue=Oe.name.value;break}if(ht!==""&&ht!==Je||fa!==0&&nt(pa,Ge)===!1)continue;const St={matchedLen:Eo.length,queryDiff:Ae-fa,hrefLen:jo.length-ht.length};if(St.matchedLen>_e.matchedLen){ue=Oe.name.value,_e=St;continue}else if(St.matchedLen!==_e.matchedLen)continue;if(St.queryDiff<_e.queryDiff)ue=Oe.name.value,_e=St;else if(St.queryDiff!==_e.queryDiff)continue;St.hrefLen>_e.hrefLen&&(ue=Oe.name.value,_e=St)}if(ue===null&&B.some(Oe=>Oe.routeData===void 0&&Oe.name.value===P.value)===!0){ea=!1;return}ne({name:ue,setCurrent:!0})}function ca(ue){if(m(),w.value!==!0&&y.value!==null&&ue.target&&typeof ue.target.closest=="function"){const _e=ue.target.closest(".q-tab");_e&&y.value.contains(_e)===!0&&(w.value=!0,$.value===!0&&pt(_e))}}function Io(){p(()=>{w.value=!1},30)}function Wt(){Pa.avoidRouteWatcher===!1?f(_t):_()}function Ta(){if(z===void 0){const ue=Ue(()=>o.$route.fullPath,Wt);z=()=>{ue(),z=void 0}}}function Ao(ue){B.push(ue),U.value++,qe(),ue.routeData===void 0||o.$route===void 0?f(()=>{if($.value===!0){const _e=P.value,Se=_e!=null&&_e!==""?B.find(Je=>Je.name.value===_e):null;Se&&pt(Se.rootRef.value)}}):(Ta(),ue.routeData.hasRouterLink.value===!0&&Wt())}function Uo(ue){B.splice(B.indexOf(ue),1),U.value--,qe(),z!==void 0&&ue.routeData!==void 0&&(B.every(_e=>_e.routeData===void 0)===!0&&z(),Wt())}const Pa={currentModel:P,tabProps:E,hasFocus:w,hasActiveTab:S,registerTab:Ao,unregisterTab:Uo,verifyRouteModel:Wt,updateModel:ne,onKbdNavigate:de,avoidRouteWatcher:!1};Yo(Rl,Pa);function Oa(){O!==null&&clearTimeout(O),pe(),z!==void 0&&z()}let Ra,ea;return ia(Oa),Lo(()=>{Ra=z!==void 0,Oa()}),Ho(()=>{Ra===!0&&(Ta(),ea=!0,Wt()),qe()}),()=>ke("div",{ref:y,class:Q.value,role:"tablist",onFocusin:ca,onFocusout:Io},[ke(Ko,{onResize:Fe}),ke("div",{ref:x,class:R.value,onScroll:yt},Tt(n.default)),ke(q,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(j.value===!0?"":" q-tabs__arrow--faded"),name:u.leftIcon||s.iconSet.tabs[u.vertical===!0?"up":"left"],onMousedownPassive:L,onTouchstartPassive:L,onMouseupPassive:pe,onMouseleavePassive:pe,onTouchendPassive:pe}),ke(q,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(N.value===!0?"":" q-tabs__arrow--faded"),name:u.rightIcon||s.iconSet.tabs[u.vertical===!0?"down":"right"],onMousedownPassive:W,onTouchstartPassive:W,onMouseupPassive:pe,onMouseleavePassive:pe,onTouchendPassive:pe})])}});function _s(u){const n=[.06,6,50];return typeof u=="string"&&u.length&&u.split(":").forEach((d,o)=>{const s=parseFloat(d);s&&(n[o]=s)}),n}const ks=Wo({name:"touch-swipe",beforeMount(u,{value:n,arg:d,modifiers:o}){if(o.mouse!==!0&&Bt.has.touch!==!0)return;const s=o.mouseCapture===!0?"Capture":"",r={handler:n,sensitivity:_s(d),direction:Da(o),noop:Qo,mouseStart(v){Aa(v,r)&&Go(v)&&(ta(r,"temp",[[document,"mousemove","move",`notPassive${s}`],[document,"mouseup","end","notPassiveCapture"]]),r.start(v,!0))},touchStart(v){if(Aa(v,r)){const g=v.target;ta(r,"temp",[[g,"touchmove","move","notPassiveCapture"],[g,"touchcancel","end","notPassiveCapture"],[g,"touchend","end","notPassiveCapture"]]),r.start(v)}},start(v,g){Bt.is.firefox===!0&&ya(u,!0);const p=Ia(v);r.event={x:p.left,y:p.top,time:Date.now(),mouse:g===!0,dir:!1}},move(v){if(r.event===void 0)return;if(r.event.dir!==!1){Et(v);return}const g=Date.now()-r.event.time;if(g===0)return;const p=Ia(v),m=p.left-r.event.x,f=Math.abs(m),_=p.top-r.event.y,y=Math.abs(_);if(r.event.mouse!==!0){if(f<r.sensitivity[1]&&y<r.sensitivity[1]){r.end(v);return}}else if(window.getSelection().toString()!==""){r.end(v);return}else if(f<r.sensitivity[2]&&y<r.sensitivity[2])return;const x=f/g,P=y/g;r.direction.vertical===!0&&f<y&&f<100&&P>r.sensitivity[0]&&(r.event.dir=_<0?"up":"down"),r.direction.horizontal===!0&&f>y&&y<100&&x>r.sensitivity[0]&&(r.event.dir=m<0?"left":"right"),r.direction.up===!0&&f<y&&_<0&&f<100&&P>r.sensitivity[0]&&(r.event.dir="up"),r.direction.down===!0&&f<y&&_>0&&f<100&&P>r.sensitivity[0]&&(r.event.dir="down"),r.direction.left===!0&&f>y&&m<0&&y<100&&x>r.sensitivity[0]&&(r.event.dir="left"),r.direction.right===!0&&f>y&&m>0&&y<100&&x>r.sensitivity[0]&&(r.event.dir="right"),r.event.dir!==!1?(Et(v),r.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Jo(),r.styleCleanup=$=>{r.styleCleanup=void 0,document.body.classList.remove("non-selectable");const j=()=>{document.body.classList.remove("no-pointer-events--children")};$===!0?setTimeout(j,50):j()}),r.handler({evt:v,touch:r.event.mouse!==!0,mouse:r.event.mouse,direction:r.event.dir,duration:g,distance:{x:f,y}})):r.end(v)},end(v){r.event!==void 0&&(va(r,"temp"),Bt.is.firefox===!0&&ya(u,!1),r.styleCleanup!==void 0&&r.styleCleanup(!0),v!==void 0&&r.event.dir!==!1&&Et(v),r.event=void 0)}};if(u.__qtouchswipe=r,o.mouse===!0){const v=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ta(r,"main",[[u,"mousedown","mouseStart",`passive${v}`]])}Bt.has.touch===!0&&ta(r,"main",[[u,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[u,"touchmove","noop","notPassiveCapture"]])},updated(u,n){const d=u.__qtouchswipe;d!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&d.end(),d.handler=n.value),d.direction=Da(n.modifiers))},beforeUnmount(u){const n=u.__qtouchswipe;n!==void 0&&(va(n,"main"),va(n,"temp"),Bt.is.firefox===!0&&ya(u,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete u.__qtouchswipe)}}),ws={name:{required:!0},disable:Boolean},Ma={setup(u,{slots:n}){return()=>ke("div",{class:"q-panel scroll",role:"tabpanel"},Tt(n.default))}},hs={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},$s=["update:modelValue","beforeTransition","transition"];function xs(){const{props:u,emit:n,proxy:d}=xt(),{getCache:o}=Zo(),{registerTimeout:s}=ka();let r,v;const g=C(null),p=C(null);function m(I){const ee=u.vertical===!0?"up":"left";z((d.$q.lang.rtl===!0?-1:1)*(I.direction===ee?1:-1))}const f=G(()=>[[ks,m,void 0,{horizontal:u.vertical!==!0,vertical:u.vertical,mouse:!0}]]),_=G(()=>u.transitionPrev||`slide-${u.vertical===!0?"down":"right"}`),y=G(()=>u.transitionNext||`slide-${u.vertical===!0?"up":"left"}`),x=G(()=>`--q-transition-duration: ${u.transitionDuration}ms`),P=G(()=>typeof u.modelValue=="string"||typeof u.modelValue=="number"?u.modelValue:String(u.modelValue)),$=G(()=>({include:u.keepAliveInclude,exclude:u.keepAliveExclude,max:u.keepAliveMax})),j=G(()=>u.keepAliveInclude!==void 0||u.keepAliveExclude!==void 0);Ue(()=>u.modelValue,(I,ee)=>{const se=U(I)===!0?w(I):-1;v!==!0&&T(se===-1?0:se<w(ee)?-1:1),g.value!==se&&(g.value=se,n("beforeTransition",I,ee),s(()=>{n("transition",I,ee)},u.transitionDuration))});function N(){z(1)}function V(){z(-1)}function B(I){n("update:modelValue",I)}function U(I){return I!=null&&I!==""}function w(I){return r.findIndex(ee=>ee.props.name===I&&ee.props.disable!==""&&ee.props.disable!==!0)}function O(){return r.filter(I=>I.props.disable!==""&&I.props.disable!==!0)}function T(I){const ee=I!==0&&u.animated===!0&&g.value!==-1?"q-transition--"+(I===-1?_.value:y.value):null;p.value!==ee&&(p.value=ee)}function z(I,ee=g.value){let se=ee+I;for(;se!==-1&&se<r.length;){const ne=r[se];if(ne!==void 0&&ne.props.disable!==""&&ne.props.disable!==!0){T(I),v=!0,n("update:modelValue",ne.props.name),setTimeout(()=>{v=!1});return}se+=I}u.infinite===!0&&r.length!==0&&ee!==-1&&ee!==r.length&&z(I,I===-1?r.length:-1)}function E(){const I=w(u.modelValue);return g.value!==I&&(g.value=I),!0}function S(){const I=U(u.modelValue)===!0&&E()&&r[g.value];return u.keepAlive===!0?[ke(en,$.value,[ke(j.value===!0?o(P.value,()=>({...Ma,name:P.value})):Ma,{key:P.value,style:x.value},()=>I)])]:[ke("div",{class:"q-panel scroll",style:x.value,key:P.value,role:"tabpanel"},[I])]}function F(){if(r.length!==0)return u.animated===!0?[ke(Il,{name:p.value},S)]:S()}function Q(I){return r=Xo(Tt(I.default,[])).filter(ee=>ee.props!==null&&ee.props.slot===void 0&&U(ee.props.name)===!0),r.length}function R(){return r}return Object.assign(d,{next:N,previous:V,goTo:B}),{panelIndex:g,panelDirectives:f,updatePanelsList:Q,updatePanelIndex:E,getPanelContent:F,getEnabledPanels:O,getPanels:R,isValidPanelName:U,keepAliveProps:$,needsUniqueKeepAliveWrapper:j,goToPanelByOffset:z,goToPanel:B,nextPanel:N,previousPanel:V}}const et=wt({name:"QTabPanel",props:ws,setup(u,{slots:n}){return()=>ke("div",{class:"q-tab-panel",role:"tabpanel"},Tt(n.default))}}),It=wt({name:"QTabPanels",props:{...hs,...ha},emits:$s,setup(u,{slots:n}){const d=xt(),o=$a(u,d.proxy.$q),{updatePanelsList:s,getPanelContent:r,panelDirectives:v}=xs(),g=G(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(s(n),tn("div",{class:g.value},r(),"pan",u.swipeable,()=>v.value))}}),Ss={class:"detail"},Vs={key:0},qs={key:1},Cs={key:0},Ts={key:0},Ps={colspan:"100%"},Os={class:"q-my-md"},Rs={key:4},Ds={colspan:"100%"},Is={key:5},As={colspan:"100%"},zl={__name:"MainInfoTab",setup(u){const n=be();return(d,o)=>(c(),h("table",Ss,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.user.username)+" - "+i(a(n).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.opening_balance)),1)]),a(n).props.data.opening_notes?(c(),h("tr",Vs,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.total_expense)),1)]),a(n).props.data.is_closed?k("",!0):(c(),h("tr",qs,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.actual_balance)),1)])),a(n).props.data.is_closed?(c(),h(Y,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.closing_balance)),1)]),a(n).props.data.closing_notes?(c(),h("tr",Cs,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),d.$can("admin.cashier-session.close")?(c(),h(Y,{key:3},[a(n).props.data.is_closed?k("",!0):(c(),h("tr",Ts,[t("td",Ps,[t("div",Os,[e(A,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=s=>d.$inertia.get(d.route("admin.cashier-session.close",{id:a(n).props.data.id})))},{default:l(()=>o[26]||(o[26]=[b(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(n).props.data.created_at?(c(),h("tr",Rs,[t("td",Ds," Dibuat "+i(a(qt)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name)+" ("+i(a(fe)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(c(),h("tr",Is,[t("td",As," Diperbarui "+i(a(qt)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name)+" ("+i(a(fe)(a(n).props.data.updated_at))+") ",1)])):k("",!0)])]))}},Us=Object.freeze(Object.defineProperty({__proto__:null,default:zl},Symbol.toStringTag,{value:"Module"})),Es={class:"full-width row flex-center text-grey-8 q-gutter-sm"},js={class:"text-bold"},Ns={key:0},Ms={class:"text-bold"},Bs={key:1},zs={key:0},Fs={key:0},Ls={key:1},Fl={__name:"SalesOrderTab",props:{data:Object},setup(u){const n=u,d=C([]),o=C(!0),s=Pe({...Re(),cashier_session_id:n.data.id,status:["closed","canceled"]}),r=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{g()});const g=(f=null)=>De({pagination:r,filter:s,props:f,rows:d,url:route("admin.sales-order.data"),loading:o}),p=xe(),m=G(()=>p.screen.gt.sm?v:v.filter(f=>f.name==="id"));return(f,_)=>(c(),D(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":_[0]||(_[0]=y=>r.value=y),filter:s.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:y,message:x,filter:P})=>[t("div",Es,[t("span",null,i(x)+" "+i(P?" with term "+P:""),1)])]),body:l(y=>[e(Ce,{props:y,class:"cursor-pointer",onClick:X(x=>a(Z).get(f.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:y},{default:l(()=>[t("div",js,[e(q,{class:"inline-icon",name:"tag"}),b(" "+i(y.row.formatted_id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),b(" "+i(a(fe)(y.row.datetime)),1)]),a(p).screen.lt.md?(c(),h(Y,{key:0},[y.row.customer?(c(),h("div",Ns,[e(q,{class:"inline-icon",name:"person"}),b(" "+i(y.row.customer_code)+" "+i(y.row.customer.name),1)])):k("",!0),t("div",Ms,[e(q,{name:"money",class:"inline-icon"}),b(" Rp. "+i(a(K)(y.row.grand_total)),1)]),y.row.notes?(c(),h("div",Bs,[e(we,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(dt,{color:y.row.status==="closed"?"green":"red"},{default:l(()=>[b(i(f.$CONSTANTS.SALES_ORDER_STATUSES[y.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(H,{key:"customer",props:y},{default:l(()=>[y.row.customer?(c(),h("div",zs,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),b(" "+i(y.row.customer_code)+" - "+i(y.row.customer_name),1)]),y.row.customer_phone?(c(),h("div",Fs,[e(q,{name:"phone",class:"inline-icon"}),b(" "+i(y.row.customer_phone),1)])):k("",!0),y.row.customer_address?(c(),h("div",Ls,[e(q,{name:"home_pin",class:"inline-icon"}),b(" "+i(y.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"grand_total",props:y},{default:l(()=>[t("div",null,i(a(K)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:y,class:"wrap-column"},{default:l(()=>[e(we,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Hs=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"})),Ks={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ys={class:"text-bold"},Ws={class:"text-bold"},Qs={key:0},Js={class:"q-mt-sm"},Ll={__name:"FinanceTransactionTab",props:{data:Object},setup(u){var f;const n=u;console.log(n.data);const d=C([]),o=C(!0),s=Pe({...Re(),account_id:(f=n.data.cashier_terminal)==null?void 0:f.finance_account_id,from_datetime:la(n.data.opened_at),to_datetime:n.data.closed_at?la(n.data.closed_at):null}),r=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{g()});const g=(_=null)=>De({pagination:r,filter:s,props:_,rows:d,url:route("admin.finance-transaction.data"),loading:o}),p=xe(),m=G(()=>p.screen.gt.sm?v:v.filter(_=>_.name==="id"));return(_,y)=>(c(),D(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":y[0]||(y[0]=x=>r.value=x),filter:s.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:P,filter:$})=>[t("div",Ks,[t("span",null,i(P)+" "+i($?" with term "+$:""),1)])]),body:l(x=>[e(Ce,{props:x},{default:l(()=>[e(H,{key:"id",props:x},{default:l(()=>[t("div",Ys,[e(q,{class:"inline-icon",name:"tag"}),b(" "+i(x.row.formatted_id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),b(" "+i(a(fe)(x.row.datetime)),1)]),a(p).screen.lt.md?(c(),h(Y,{key:0},[t("div",Ws,[e(q,{name:"money",class:"inline-icon"}),b(" Rp. "+i(a(K)(x.row.amount)),1)]),x.row.notes?(c(),h("div",Qs,[e(we,{text:x.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",Js,[e(dt,{color:x.row.amount>=0?"green":"red"},{default:l(()=>[b(i(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[x.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(H,{key:"amount",props:x},{default:l(()=>[t("span",{class:he(x.row.amount<0?"text-red":"text-green")},i(a(K)(x.row.amount)),3)]),_:2},1032,["props"]),e(H,{key:"notes",props:x,class:"wrap-column"},{default:l(()=>[e(we,{text:x.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Gs=Object.freeze(Object.defineProperty({__proto__:null,default:Ll},Symbol.toStringTag,{value:"Module"})),Xs={class:"q-gutter-sm"},Zs={class:"col col-lg-6 q-pa-xs"},er={class:"row"},Ba="Rincian Sesi Kasir",tr={__name:"Detail",setup(u){const n=be(),d=G(()=>n.props.data),o=C("main");return Ue(()=>n.props.tab,s=>{s&&(o.value=s)},{immediate:!0}),(s,r)=>{const v=J("i-head"),g=J("authenticated-layout");return c(),h(Y,null,[e(v,{title:Ba}),e(g,null,{title:l(()=>[b(i(Ba))]),"left-button":l(()=>[t("div",Xs,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=p=>s.$inertia.get(s.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Zs,[t("div",er,[e(ce,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:l(()=>[e(Dt,{modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(Ze,{name:"main",label:"Ringkasan"}),e(Ze,{name:"sales",label:"Transaksi Penjualan"}),e(Ze,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(tt),e(It,{modelValue:o.value,"onUpdate:modelValue":r[2]||(r[2]=p=>o.value=p),animated:"",class:"q-pa-none"},{default:l(()=>[e(et,{name:"main"},{default:l(()=>[e(zl,{data:d.value},null,8,["data"])]),_:1}),e(et,{name:"sales",class:"q-pa-xs"},{default:l(()=>[e(Fl,{data:d.value},null,8,["data"])]),_:1}),e(et,{name:"finance",class:"q-pa-xs"},{default:l(()=>[e(Ll,{data:d.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},ar=Object.freeze(Object.defineProperty({__proto__:null,default:tr},Symbol.toStringTag,{value:"Module"})),lr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},or={class:"q-pa-xs"},nr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},sr={class:"flex justify-end"},za="Sesi Kasir",rr={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=Pe({search:"",status:"all",...Re()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];$e(()=>{x()});const y=N=>Qe({message:`Hapus Sesi: ${N.cashier_terminal.name} - ${N.user.username}?`,url:route("admin.cashier-session.delete",N.id),fetchItemsCallback:x,loading:s}),x=(N=null)=>{De({pagination:m,filter:p,props:N,rows:o,url:route("admin.cashier-session.data"),loading:s,tableRef:r})},P=()=>x(),$=N=>Z.get(route("admin.cashier-session.detail",{id:N.id})),j=G(()=>n.screen.gt.sm?f:f.filter(N=>N.name==="id"||N.name==="action"));return(N,V)=>{const B=J("i-head"),U=J("authenticated-layout");return c(),h(Y,null,[e(B,{title:za}),e(U,null,Le({title:l(()=>[b(i(za))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:V[0]||(V[0]=w=>d.value=!d.value)},null,8,["icon"]),N.$can("admin.cashier-session.open")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:V[1]||(V[1]=w=>a(Z).get(N.route("admin.cashier-session.open")))})):k("",!0)]),default:l(()=>[t("div",or,[e(Te,{class:"full-height-table",style:ze({height:a(g)}),ref_key:"tableRef",ref:r,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":V[5]||(V[5]=w=>m.value=w),filter:p.search,loading:s.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:w,message:O,filter:T})=>[t("div",nr,[t("span",null,i(O)+" "+i(T?" with term "+T:""),1)])]),body:l(w=>[e(Ce,{props:w,class:he(["cursor-pointer",w.row.is_closed?"":"bg-yellow-3"]),onClick:O=>$(w.row)},{default:l(()=>[e(H,{key:"id",props:w,class:"wrap-column"},{default:l(()=>[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),b(" SessionID: "+i(w.row.id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"point_of_sale"}),b(" "+i(w.row.cashier_terminal.name),1)]),t("div",null,[e(q,{class:"inline-icon",name:"person"}),b(" "+i(w.row.user.username)+" - "+i(w.row.user.name),1)])]),_:2},1032,["props"]),e(H,{key:"opening_info",props:w},{default:l(()=>[t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),b(" "+i(w.row.opened_at?a(fe)(w.row.opened_at):"-"),1)]),t("div",null,[e(q,{class:"inline-icon",name:"money"}),b(" "+i(a(st)(w.row.opening_balance)),1)]),w.row.opening_notes?(c(),D(we,{key:0,text:w.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"closing_info",props:w},{default:l(()=>[t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),b(" "+i(w.row.closed_at?a(fe)(w.row.closed_at):"-"),1)]),t("div",null,[e(q,{class:"inline-icon",name:"money"}),b(" "+i(a(st)(w.row.closing_balance)),1)]),w.row.closing_notes?(c(),D(we,{key:0,text:w.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"action",props:w},{default:l(()=>[t("div",sr,[N.$can("admin.cashier-session.close")||N.$can("admin.cashier-session.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:V[4]||(V[4]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.cashier-session.close")?te((c(),D(ae,{key:0,disable:w.row.is_closed,clickable:"",onClick:X(O=>a(Z).get(N.route("admin.cashier-session.close",w.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"logout"})]),_:1}),e(M,null,{default:l(()=>V[6]||(V[6]=[b("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[re],[me]]):k("",!0),N.$can("admin.cashier-session.delete")&&!w.row.is_closed?te((c(),D(ae,{key:1,onClick:X(O=>y(w.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>V[7]||(V[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",lr,[e(ie,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[V[2]||(V[2]=w=>p.status=w),P],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":V[3]||(V[3]=w=>p.search=w),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ir=Object.freeze(Object.defineProperty({__proto__:null,default:rr},Symbol.toStringTag,{value:"Module"})),dr={class:"q-gutter-sm"},ur={class:"col col-md-6 q-pa-xs"},Fa="Buka Sesi Kasir",mr={__name:"Open",setup(u){const n=be(),d=Me({cashier_terminal_id:n.props.data.cashier_terminal_id,opening_balance:parseFloat(n.props.data.opening_balance),opening_notes:n.props.data.opening_notes}),o=[...n.props.cashier_terminals.map(r=>({value:r.id,label:r.name,balance:parseFloat(r.finance_account.balance)}))],s=()=>lt({form:d,url:route("admin.cashier-session.open")});return Ue(()=>d.cashier_terminal_id,r=>{if(r){const v=o.find(g=>g.value===r);v&&(d.opening_balance=v.balance)}else d.opening_balance=0}),(r,v)=>{const g=J("i-head"),p=J("authenticated-layout");return c(),h(Y,null,[e(g,{title:Fa}),e(p,null,{title:l(()=>[b(i(Fa))]),"left-button":l(()=>[t("div",dr,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=m=>r.$inertia.get(r.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ur,[e(Be,{class:"row",onSubmit:X(s,["prevent"]),onValidationError:a(je)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=m=>a(d).id=m)},null,512),[[ut,a(d).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ie,{class:"custom-select",modelValue:a(d).cashier_terminal_id,"onUpdate:modelValue":v[2]||(v[2]=m=>a(d).cashier_terminal_id=m),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:a(d).errors.cashier_terminal_id,error:!!a(d).errors.cashier_terminal_id,disable:a(d).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Ee,{modelValue:a(d).opening_balance,"onUpdate:modelValue":v[3]||(v[3]=m=>a(d).opening_balance=m),label:"Saldo Buka Sesi",lazyRules:"",disable:a(d).processing,error:!!a(d).errors.opening_balance,errorMessage:a(d).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),v[6]||(v[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(oe,{modelValue:a(d).opening_notes,"onUpdate:modelValue":v[4]||(v[4]=m=>a(d).opening_notes=m),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(d).processing,error:!!a(d).errors.opening_notes,"error-message":a(d).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:a(d).processing},null,8,["disable"]),e(A,{label:"Batal",icon:"cancel",disable:a(d).processing,onClick:v[5]||(v[5]=m=>a(Z).get(r.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},cr=Object.freeze(Object.defineProperty({__proto__:null,default:mr},Symbol.toStringTag,{value:"Module"})),pr={class:"detail"},fr={colspan:"3"},gr={class:"text-bold text-grey-8"},br={key:0},vr={colspan:"100%"},yr={key:1},_r={colspan:"100%"},Hl={__name:"MainInfoTab",setup(u){const n=be();return(d,o)=>(c(),h("table",pr,[t("tbody",null,[t("tr",null,[t("td",fr,[t("div",gr,[o[1]||(o[1]=b(" Info Terminal Kasir ")),e(A,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=s=>d.$inertia.get(d.route("admin.cashier-terminal.edit",{id:a(n).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(a(st)(a(n).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(n).props.data.created_at?(c(),h("tr",br,[t("td",vr," Dibuat "+i(a(qt)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name)+" ("+i(a(fe)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(c(),h("tr",yr,[t("td",_r," Diperbarui "+i(a(qt)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name)+" ("+i(a(fe)(a(n).props.data.updated_at))+") ",1)])):k("",!0)])]))}},kr=Object.freeze(Object.defineProperty({__proto__:null,default:Hl},Symbol.toStringTag,{value:"Module"})),wr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Kl={__name:"SessionHistoryTab",setup(u){const n=be(),d=C([]),o=C(!0),s=Pe({cashier_terminal_id:n.props.data.id,...Re()}),r=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];$e(()=>{g()});const g=(f=null)=>De({pagination:r,filter:s,props:f,rows:d,url:route("admin.cashier-session.data"),loading:o}),p=xe(),m=G(()=>p.screen.gt.sm?v:v.filter(f=>f.name==="id"));return(f,_)=>(c(),D(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":_[0]||(_[0]=y=>r.value=y),filter:s.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:y,message:x,filter:P})=>[t("div",wr,[t("span",null,i(x)+" "+i(P?" with term "+P:""),1)])]),body:l(y=>[e(Ce,{props:y,class:"cursor-pointer",onClick:X(x=>a(Z).get(f.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:y,class:"wrap-column"},{default:l(()=>[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),b(" Session ID: "+i(y.row.id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"point_of_sale"}),b(" "+i(y.row.cashier_terminal.name),1)]),t("div",null,[e(q,{class:"inline-icon",name:"person"}),b(" "+i(y.row.user.username)+" - "+i(y.row.user.name),1)])]),_:2},1032,["props"]),e(H,{key:"opening_info",props:y},{default:l(()=>[t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),b(" "+i(y.row.opened_at?a(fe)(y.row.opened_at):"-"),1)]),t("div",null,[e(q,{class:"inline-icon",name:"money"}),b(" "+i(a(st)(y.row.opening_balance)),1)]),y.row.opening_notes?(c(),D(we,{key:0,text:y.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"closing_info",props:y},{default:l(()=>[t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),b(" "+i(y.row.closed_at?a(fe)(y.row.closed_at):"-"),1)]),t("div",null,[e(q,{class:"inline-icon",name:"money"}),b(" "+i(a(st)(y.row.closing_balance)),1)]),y.row.closing_notes?(c(),D(we,{key:0,text:y.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},hr=Object.freeze(Object.defineProperty({__proto__:null,default:Kl},Symbol.toStringTag,{value:"Module"})),$r={class:"q-gutter-sm"},xr={class:"col col-lg-6 q-pa-xs"},Sr={class:"row"},La="Rincian Terminal Kasir",Vr={__name:"Detail",setup(u){const n=C("main");return(d,o)=>{const s=J("i-head"),r=J("authenticated-layout");return c(),h(Y,null,[e(s,{title:La}),e(r,null,{title:l(()=>[b(i(La))]),"left-button":l(()=>[t("div",$r,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",xr,[t("div",Sr,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Dt,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=v=>n.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(Ze,{name:"main",label:"Info Utama"}),e(Ze,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(It,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=v=>n.value=v),animated:""},{default:l(()=>[e(et,{name:"main"},{default:l(()=>[e(Hl)]),_:1}),e(et,{name:"session-history",class:"q-pa-xs"},{default:l(()=>[e(Kl)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},qr=Object.freeze(Object.defineProperty({__proto__:null,default:Vr},Symbol.toStringTag,{value:"Module"})),Cr={class:"q-gutter-sm"},Tr={class:"col col-md-6 q-pa-xs"},Pr={key:0,class:"q-my-xs text-grey-8"},Or={__name:"Editor",setup(u){const n=be(),d=(n.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Me({id:n.props.data.id,name:n.props.data.name,finance_account_id:n.props.data.finance_account_id??"new",location:n.props.data.location,active:!!n.props.data.active,notes:n.props.data.notes}),s=[{value:"new",label:"Buat Baru (Otomatis)"},...n.props.finance_accounts.map(v=>({value:v.id,label:v.name}))],r=()=>lt({form:o,url:route("admin.cashier-terminal.save")});return(v,g)=>{const p=J("i-head"),m=J("authenticated-layout");return c(),h(Y,null,[e(p,{title:d}),e(m,null,{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",Cr,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=f=>v.$inertia.get(v.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Tr,[e(Be,{class:"row",onSubmit:X(r,["prevent"]),onValidationError:a(je)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=f=>a(o).id=f)},null,512),[[ut,a(o).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(oe,{modelValue:a(o).name,"onUpdate:modelValue":g[2]||(g[2]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{class:"custom-select",modelValue:a(o).finance_account_id,"onUpdate:modelValue":g[3]||(g[3]=f=>a(o).finance_account_id=f),label:"Akun Kas",options:s,"map-options":"","emit-value":"",errorMessage:a(o).errors.finance_account_id,error:!!a(o).errors.finance_account_id,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),a(o).finance_account_id==="new"?(c(),h("div",Pr,[g[8]||(g[8]=b(" Akun keuangan akan dibuat ")),a(o).name?(c(),h(Y,{key:0},[b(" dengan nama Kas "+i(a(o).name),1)],64)):k("",!0)])):k("",!0),e(oe,{modelValue:a(o).location,"onUpdate:modelValue":g[4]||(g[4]=f=>a(o).location=f),modelModifiers:{trim:!0},label:"Lokasi",error:!!a(o).errors.location,disable:a(o).processing,"error-message":a(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).notes,"onUpdate:modelValue":g[5]||(g[5]=f=>a(o).notes=f),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ma,{modelValue:a(o).active,"onUpdate:modelValue":g[6]||(g[6]=f=>a(o).active=f),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(A,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:g[7]||(g[7]=f=>a(Z).get(v.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Rr=Object.freeze(Object.defineProperty({__proto__:null,default:Or},Symbol.toStringTag,{value:"Module"})),Dr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ir={class:"q-pa-xs"},Ar={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ur={class:"flex justify-end"},Ha="Terminal Kasir",Er={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=Pe({search:"",status:"active",...Re()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:n.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];$e(()=>{x()});const y=N=>Qe({message:`Hapus Terminal Kasir ${N.name}?`,url:route("admin.cashier-terminal.delete",N.id),fetchItemsCallback:x,loading:s}),x=(N=null)=>{De({pagination:m,filter:p,props:N,rows:o,url:route("admin.cashier-terminal.data"),loading:s,tableRef:r})},P=()=>x(),$=N=>Z.get(route("admin.cashier-terminal.detail",{id:N.id})),j=G(()=>n.screen.gt.sm?f:f.filter(N=>N.name==="name"||N.name==="finance_account_id"||N.name==="action"));return(N,V)=>{const B=J("i-head"),U=J("authenticated-layout");return c(),h(Y,null,[e(B,{title:Ha}),e(U,null,Le({title:l(()=>[b(i(Ha))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:V[0]||(V[0]=w=>d.value=!d.value)},null,8,["icon"]),N.$can("admin.cashier-terminal.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:V[1]||(V[1]=w=>a(Z).get(N.route("admin.cashier-terminal.add")))})):k("",!0)]),default:l(()=>[t("div",Ir,[e(Te,{class:"full-height-table",style:ze({height:a(g)}),ref_key:"tableRef",ref:r,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":V[5]||(V[5]=w=>m.value=w),filter:p.search,loading:s.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:w,message:O,filter:T})=>[t("div",Ar,[t("span",null,i(O)+" "+i(T?" with term "+T:""),1)])]),body:l(w=>[e(Ce,{props:w,class:he([w.row.active?"":"bg-red-1","cursor-pointer"]),onClick:O=>$(w.row)},{default:l(()=>[e(H,{key:"name",props:w,class:"wrap-column"},{default:l(()=>[t("div",null,[e(q,{name:"wallet"}),b(" "+i(w.row.name),1)]),t("div",null,[e(q,{name:"home_pin"}),b(" "+i(w.row.location),1)]),a(n).screen.lt.md?(c(),D(we,{key:0,text:w.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"finance_account_id",props:w},{default:l(()=>[t("div",null,[e(q,{name:"wallet"}),b(" "+i(w.row.finance_account.name),1)]),t("div",null,[e(q,{name:"money"}),b(" "+i(a(st)(w.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(H,{key:"notes",props:w},{default:l(()=>[e(we,{text:w.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:w},{default:l(()=>[t("div",Ur,[N.$can("admin.cashier-terminal.edit")||N.$can("admin.cashier-terminal.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:V[4]||(V[4]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.cashier-terminal.edit")?te((c(),D(ae,{key:0,clickable:"",onClick:X(O=>a(Z).get(N.route("admin.cashier-terminal.edit",w.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>V[6]||(V[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),N.$can("admin.cashier-terminal.delete")?te((c(),D(ae,{key:1,onClick:X(O=>y(w.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>V[7]||(V[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Dr,[e(ie,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[V[2]||(V[2]=w=>p.status=w),P],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":V[3]||(V[3]=w=>p.search=w),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},jr=Object.freeze(Object.defineProperty({__proto__:null,default:Er},Symbol.toStringTag,{value:"Module"})),Nr={class:"q-gutter-sm"},Mr={class:"col col-md-6 q-pa-xs"},Br={class:"row"},zr={class:"detail"},Fr={key:0},Lr={key:1},Hr={key:0},Kr={key:1},Yr={colspan:"3",class:"bg-white"},Ka="Rincian Konfirmasi Top Up",Wr={__name:"Detail",setup(u){const n=be(),d=()=>oa({message:`Setujui konfirmasi transaksi #${n.props.data.formatted_id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",n.props.data.id),data:{id:n.props.data.id,action:"accept"},onSuccess:()=>{Z.get(route("admin.customer-wallet-transaction-confirmation.detail",n.props.data.id))}}),o=()=>oa({message:`Tolak konfirmasi transaksi #${n.props.data.formatted_id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",n.props.data.id),data:{id:n.props.data.id,action:"reject"},onSuccess:()=>{Z.get(route("admin.customer-wallet-transaction-confirmation.detail",n.props.data.id))}});return(s,r)=>{const v=J("i-head"),g=J("i-link"),p=J("my-link"),m=J("authenticated-layout");return c(),h(Y,null,[e(v,{title:Ka}),e(m,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Nr,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=f=>s.$inertia.get(s.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":l(()=>[a(n).props.data.status=="pending"&&s.$can("admin.customer-wallet-transaction-confirmation:reject")?(c(),D(A,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:r[1]||(r[1]=f=>o()),class:"q-mr-sm"})):k("",!0),a(n).props.data.status=="pending"&&s.$can("admin.customer-wallet-transaction-confirmation:accept")?(c(),D(A,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:r[2]||(r[2]=f=>d())})):k("",!0)]),title:l(()=>[t("span",{class:"text-subtitle2"},i(Ka))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Mr,[t("div",Br,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[r[25]||(r[25]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",zr,[t("tbody",null,[t("tr",null,[r[3]||(r[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),r[4]||(r[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.formatted_id),1)]),t("tr",null,[r[5]||(r[5]=t("td",null,"Waktu",-1)),r[6]||(r[6]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.datetime)),1)]),t("tr",null,[r[8]||(r[8]=t("td",null,"Pelanggan",-1)),r[9]||(r[9]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),b(" Kode: "+i(a(n).props.data.customer.code),1)]),t("div",null,[e(q,{name:"person",class:"inline-icon"}),b(" Nama: "+i(a(n).props.data.customer.name),1)]),a(n).props.data.customer.phone?(c(),h("div",Fr,[e(q,{name:"phone",class:"inline-icon"}),b(" "+i(a(n).props.data.customer.phone),1)])):k("",!0),a(n).props.data.customer.address?(c(),h("div",Lr,[e(q,{name:"home_pin",class:"inline-icon"}),b(" "+i(a(n).props.data.customer.address),1)])):k("",!0),t("div",null,[e(g,{href:s.route("admin.customer.detail",{id:a(n).props.data.customer_id})},{default:l(()=>r[7]||(r[7]=[b("Lihat Rincian Pelanggan")])),_:1},8,["href"])])])]),t("tr",null,[r[12]||(r[12]=t("td",null,"Akun Tujuan",-1)),r[13]||(r[13]=t("td",null,":",-1)),t("td",null,[e(p,{href:s.route("admin.finance-account.detail",{id:a(n).props.data.finance_account.id})},{default:l(()=>[b(i(a(n).props.data.finance_account.name),1)]),_:1},8,["href"]),r[11]||(r[11]=t("br",null,null,-1)),a(n).props.data.finance_account.type==="bank"?(c(),h(Y,{key:0},[b(" Rek "+i(a(n).props.data.finance_account.bank)+" an "+i(a(n).props.data.finance_account.holder)+" ",1),r[10]||(r[10]=t("br",null,null,-1)),b(" "+i(a(n).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[r[14]||(r[14]=t("td",null,"Jumlah",-1)),r[15]||(r[15]=t("td",null,":",-1)),t("td",null,"Rp. "+i(a(K)(a(n).props.data.amount)),1)]),t("tr",null,[r[16]||(r[16]=t("td",null,"Status",-1)),r[17]||(r[17]=t("td",null,":",-1)),t("td",null,i(s.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[a(n).props.data.status]),1)]),t("tr",null,[r[18]||(r[18]=t("td",null,"Catatan",-1)),r[19]||(r[19]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),a(n).props.data.creator?(c(),h("tr",Hr,[r[20]||(r[20]=t("td",null,"Dibuat",-1)),r[21]||(r[21]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(c(),h("tr",Kr,[r[22]||(r[22]=t("td",null,"Diperbarui",-1)),r[23]||(r[23]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(c(),h(Y,{key:2},[r[24]||(r[24]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Yr,[e(Xt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:ze([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Qr=Object.freeze(Object.defineProperty({__proto__:null,default:Wr},Symbol.toStringTag,{value:"Module"})),Jr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Gr={class:"q-pa-xs"},Xr={class:"flex justify-end no-wrap"},Ya="Konfirmasi Top Up Wallet",Zr={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=C(null),m=C(!1),f=Lt(),_=Ht(),y=[{label:"Semua Tahun",value:"all"},...Pt(f-2,f).reverse()],x=[{value:"all",label:"Semua Bulan"},...Ot()],P=[{value:"all",label:"Semua Status"},...at(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],$=Pe({search:"",year:f,month:_,status:"all",...Re()}),j=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),N=[{name:"datetime",label:"Tanggal",field:"datetime",align:"left",sortable:!0},{name:"finance_account_id",label:"Bank Tujuan",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",label:"Aksi",field:"action",align:"center"}];$e(()=>{V()});const V=(E=null)=>{De({pagination:j,filter:$,props:E,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:s,tableRef:r})},B=()=>{V()},U=G(()=>n.screen.gt.sm?N:N.filter(E=>["datetime","action"].includes(E.name)));Ue(()=>$.year,E=>{E===null&&($.month=null)});const w=E=>oa({message:`Setujui konfirmasi transaksi #${E.formatted_id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:V,loading:s,data:{id:E.id,action:"accept"}}),O=E=>oa({message:`Tolak konfirmasi transaksi #${E.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:V,loading:s,data:{id:E.id,action:"reject"}}),T=E=>Qe({message:`Hapus konfirmasi transaksi ${E.formatted_id}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",E.id),fetchItemsCallback:V,loading:s}),z=E=>{p.value=E,m.value=!0};return(E,S)=>{const F=J("i-head"),Q=J("authenticated-layout");return c(),h(Y,null,[e(F,{title:Ya}),e(Q,null,Le({title:l(()=>[b(i(Ya))]),"right-button":l(()=>[e(A,{class:"q-ml-sm",icon:d.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:S[0]||(S[0]=R=>d.value=!d.value)},null,8,["icon"])]),default:l(()=>[t("div",Gr,[e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",style:ze({height:a(g)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:j.value,"onUpdate:pagination":S[6]||(S[6]=R=>j.value=R),filter:$.search,loading:s.value,columns:U.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),body:l(R=>[e(Ce,{props:R,class:"cursor-pointer",onClick:X(I=>a(Z).get(E.route("admin.customer-wallet-transaction-confirmation.detail",{id:R.row.id})),["stop"])},{default:l(()=>[e(H,{key:"datetime",props:R,class:"wrap-column"},{default:l(()=>[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),b(" "+i(R.row.formatted_id),1)]),t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),b(" "+i(a(fe)(R.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(c(),h(Y,{key:0},[e(we,{icon:"account_balance",text:R.row.finance_account.name},null,8,["text"]),t("div",null,[e(q,{name:"person",class:"inline-icon"}),b(" "+i(R.row.customer.code)+" - "+i(R.row.customer.name),1)]),t("div",null,[e(q,{name:"money",class:"inline-icon"}),b(" Rp. "+i(a(K)(R.row.amount)),1)]),R.row.notes?(c(),D(we,{key:0,icon:"notes",text:R.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Ua,{status:R.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(H,{key:"finance_account_id",props:R},{default:l(()=>[b(i(R.row.finance_account.name),1),S[8]||(S[8]=t("br",null,null,-1)),b(" "+i(R.row.finance_account.bank)+" "+i(R.row.finance_account.number)+" an. "+i(R.row.finance_account.holder),1)]),_:2},1032,["props"]),e(H,{key:"amount",props:R,style:{"text-align":"right"}},{default:l(()=>[b(i(a(K)(R.row.amount)),1)]),_:2},1032,["props"]),e(H,{key:"status",props:R,class:"text-center"},{default:l(()=>[e(Ua,{status:R.row.status},null,8,["status"])]),_:2},1032,["props"]),e(H,{key:"notes",props:R,class:"word-wrap"},{default:l(()=>[e(we,{icon:"notes",text:R.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:R,class:"text-center"},{default:l(()=>[t("div",Xr,[e(A,{icon:"image",color:"primary",dense:"",flat:"",disable:R.row.image_path===null||R.row.image_path==="",onClick:X(I=>z(R.row.image_path),["stop"])},{default:l(()=>[R.row.image_path!=null?(c(),D(Kt,{key:0},{default:l(()=>S[9]||(S[9]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),E.$can("admin.customer-wallet-transaction-confirmation:accept")||E.$can("admin.customer-wallet-transaction-confirmation:deny")||E.$can("admin.customer-wallet-transaction-confirmation.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:S[5]||(S[5]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[E.$can("admin.customer-wallet-transaction-confirmation:accept")?te((c(),D(ae,{key:0,onClick:X(I=>w(R.row),["stop"]),clickable:"",disable:R.row.status!=="pending"},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"check"})]),_:1}),e(M,null,{default:l(()=>S[10]||(S[10]=[b("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[re],[me]]):k("",!0),E.$can("admin.customer-wallet-transaction-confirmation:deny")?te((c(),D(ae,{key:1,onClick:X(I=>O(R.row),["stop"]),clickable:"",disable:R.row.status!=="pending"},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"cancel"})]),_:1}),e(M,null,{default:l(()=>S[11]||(S[11]=[b("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[re],[me]]):k("",!0),e(tt),E.$can("admin.customer-wallet-transaction-confirmation.delete")?te((c(),D(ae,{key:2,onClick:X(I=>T(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>S[12]||(S[12]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(da,{modelValue:m.value,"onUpdate:modelValue":S[7]||(S[7]=R=>m.value=R),imageUrl:`/${p.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Jr,[e(ie,{modelValue:$.year,"onUpdate:modelValue":[S[1]||(S[1]=R=>$.year=R),B],options:y,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!=="all"?(c(),D(ie,{key:0,modelValue:$.month,"onUpdate:modelValue":[S[2]||(S[2]=R=>$.month=R),B],options:x,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(ie,{modelValue:$.status,"onUpdate:modelValue":[S[3]||(S[3]=R=>$.status=R),B],options:P,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":S[4]||(S[4]=R=>$.search=R),placeholder:"Cari...",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ei=Object.freeze(Object.defineProperty({__proto__:null,default:Zr},Symbol.toStringTag,{value:"Module"}));function Yl(u,n=!1){const d=u.map(v=>({value:v.id,label:v.name+" ("+v.code+")"})),o=n?[{value:"all",label:"Semua"},...d]:d,s=C([...o]);return{filteredCustomers:s,filterCustomersFn:(v,g)=>{g(()=>{s.value=o.filter(p=>p.label.toLowerCase().includes(v.toLowerCase()))})},customers:o}}const ti={class:"col col-md-6 q-pa-xs"},Wa="Penyesuaian Saldo Dompet Pelanggan",ai={__name:"Adjustment",setup(u){const n=be(),{filteredCustomers:d,filterCustomersFn:o}=Yl(n.props.customers,!1),s=Me({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),r=()=>s.amount=s.new_wallet_balance-s.old_wallet_balance;Ue(()=>s.customer_id,async p=>{if(!p){s.old_wallet_balance=0,s.new_wallet_balance=0,r();return}s.processing=!0;try{const m=await axios.get(route("admin.customer.wallet_balance",{id:p}));s.new_wallet_balance=s.old_wallet_balance=m.data.wallet_balance}catch(m){console.error("Gagal mengambil saldo:",m),s.old_wallet_balance=0,s.new_wallet_balance=0}s.processing=!1,r()});const v=G(()=>s.new_wallet_balance-s.old_wallet_balance),g=()=>lt({form:s,url:route("admin.customer-wallet-transaction.adjustment")});return(p,m)=>{const f=J("i-head"),_=J("authenticated-layout");return c(),h(Y,null,[e(f,{title:Wa}),e(_,null,{title:l(()=>[b(i(Wa))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ti,[e(Be,{class:"row",onSubmit:X(g,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ie,{class:"custom-select",modelValue:a(s).customer_id,"onUpdate:modelValue":m[0]||(m[0]=y=>a(s).customer_id=y),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(d),"map-options":"","emit-value":"",errorMessage:a(s).errors.customer_id,onFilter:a(o),error:!!a(s).errors.customer_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(M,null,{default:l(()=>m[6]||(m[6]=[b("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Ee,{modelValue:a(s).old_wallet_balance,"onUpdate:modelValue":m[1]||(m[1]=y=>a(s).old_wallet_balance=y),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.old_wallet_balance,errorMessage:a(s).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(s).new_wallet_balance,"onUpdate:modelValue":m[2]||(m[2]=y=>a(s).new_wallet_balance=y),label:"Saldo Seharusnya",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.new_wallet_balance,errorMessage:a(s).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:v.value,"onUpdate:modelValue":m[3]||(m[3]=y=>v.value=y),label:"Selisih",readonly:"",lazyRules:"",disable:a(s).processing},null,8,["modelValue","disable"]),e(oe,{modelValue:a(s).notes,"onUpdate:modelValue":m[4]||(m[4]=y=>a(s).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.notes,"error-message":a(s).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:m[5]||(m[5]=y=>a(Z).get(p.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},li=Object.freeze(Object.defineProperty({__proto__:null,default:ai},Symbol.toStringTag,{value:"Module"})),oi={class:"q-gutter-sm"},ni={class:"col col-md-6 q-pa-xs"},si={class:"row"},ri={class:"detail"},ii={key:0},di={key:1},ui={key:0},mi={key:1},ci={colspan:"3",class:"bg-white"},Qa="Rincian Transaksi",pi={__name:"Detail",setup(u){const n=be();return(d,o)=>{const s=J("i-head"),r=J("i-link"),v=J("authenticated-layout");return c(),h(Y,null,[e(s,{title:Qa}),e(v,null,{"left-button":l(()=>[t("div",oi,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=g=>d.$goBack())})])]),title:l(()=>[b(i(Qa))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ni,[t("div",si,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",ri,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Pelanggan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),b(" "+i(a(n).props.data.customer.code),1)]),t("div",null,[e(q,{name:"person",class:"inline-icon"}),b(" "+i(a(n).props.data.customer.name),1)]),a(n).props.data.customer.phone?(c(),h("div",ii,[e(q,{name:"phone",class:"inline-icon"}),b(" "+i(a(n).props.data.customer.phone),1)])):k("",!0),a(n).props.data.customer.address?(c(),h("div",di,[e(q,{name:"home_pin",class:"inline-icon"}),b(" "+i(a(n).props.data.customer.address),1)])):k("",!0),t("div",null,[e(r,{href:d.route("admin.customer.detail",{id:a(n).props.data.customer_id})},{default:l(()=>o[5]||(o[5]=[b("Lihat Rincian Pelanggan")])),_:1},8,["href"])])])]),t("tr",null,[o[8]||(o[8]=t("td",null,"Jenis Transaksi",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[a(n).props.data.type]),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",{class:he(a(n).props.data.amount>0?"text-positive":"text-negative")},i(a(Ft)(a(n).props.data.amount))+"Rp. "+i(a(K)(Math.abs(a(n).props.data.amount))),3)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),a(n).props.data.creator?(c(),h("tr",ui,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(c(),h("tr",mi,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(c(),h(Y,{key:2},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",ci,[e(Xt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:ze([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},fi=Object.freeze(Object.defineProperty({__proto__:null,default:pi},Symbol.toStringTag,{value:"Module"})),gi={class:"q-gutter-sm"},bi={class:"col col-md-6 q-pa-xs"},vi={__name:"Editor",setup(u){var m;const n=be(),d=(n.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:s}=Yl(n.props.customers,!1),r=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],v=n.props.finance_accounts.map(f=>({label:f.name,value:f.id})),g=Me({id:n.props.data.id,customer_id:n.props.data.customer_id,finance_account_id:n.props.data.finance_account_id,type:n.props.data.type,datetime:new Date(n.props.data.datetime),notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((m=n.props.data)==null?void 0:m.image_path)??"",image:null}),p=()=>{Zt(g,{datetime:"YYYY-MM-DD HH:mm:ss"}),lt({form:g,url:route("admin.customer-wallet-transaction.save")})};return(f,_)=>{const y=J("i-head"),x=J("authenticated-layout");return c(),h(Y,null,[e(y,{title:d}),e(x,null,{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",gi,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=P=>f.$inertia.get(f.route("admin.customer-wallet-transaction.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",bi,[e(Be,{class:"row",onSubmit:X(p,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=P=>a(g).id=P)},null,512),[[ut,a(g).id]]),e(Yt,{autofocus:"",modelValue:a(g).datetime,"onUpdate:modelValue":_[2]||(_[2]=P=>a(g).datetime=P),label:"Tanggal",error:!!a(g).errors.datetime,disable:a(g).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ie,{class:"custom-select",modelValue:a(g).customer_id,"onUpdate:modelValue":_[3]||(_[3]=P=>a(g).customer_id=P),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"","emit-value":"",errorMessage:a(g).errors.customer_id,onFilter:a(s),error:!!a(g).errors.customer_id,disable:a(g).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(M,null,{default:l(()=>_[10]||(_[10]=[b("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(ie,{modelValue:a(g).type,"onUpdate:modelValue":_[4]||(_[4]=P=>a(g).type=P),label:"Jenis",options:r,"map-options":"","emit-value":"",error:!!a(g).errors.type,disable:a(g).processing,errorMessage:a(g).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ie,{modelValue:a(g).finance_account_id,"onUpdate:modelValue":_[5]||(_[5]=P=>a(g).finance_account_id=P),label:a(g).type=="deposit"?"Kas Tujuan":"Kas Asal",options:a(v),"map-options":"","emit-value":"",error:!!a(g).errors.finance_account_id,disable:a(g).processing,errorMessage:a(g).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Ee,{modelValue:a(g).amount,"onUpdate:modelValue":_[6]||(_[6]=P=>a(g).amount=P),label:"Jumlah",lazyRules:"",disable:a(g).processing,error:!!a(g).errors.amount,errorMessage:a(g).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(g).notes,"onUpdate:modelValue":_[7]||(_[7]=P=>a(g).notes=P),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(g).processing,error:!!a(g).errors.notes,"error-message":a(g).errors.notes,rules:[P=>P&&P.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(xa,{modelValue:a(g).image,"onUpdate:modelValue":_[8]||(_[8]=P=>a(g).image=P),"initial-image-path":a(g).image_path,disabled:a(g).processing,error:!!a(g).errors.image||!!a(g).errors.image_path,"error-message":a(g).errors.image||a(g).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(g).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(g).processing,onClick:_[9]||(_[9]=P=>a(Z).get(f.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},yi=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"})),_i={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ki={class:"q-pa-xs"},wi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},hi={key:0},$i={class:"flex justify-end no-wrap"},Ja="Transaksi Dompet Pelanggan",xi={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=new Date().getFullYear(),m=new Date().getMonth()+1,f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Pt(p-2,p-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Ot()],y=Pe({search:"",year:p,month:m,...Re()}),x=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),P=[{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"action",align:"right"}];$e(()=>{j()});const $=O=>Qe({message:`Hapus transaksi #${O.formatted_id}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",O.id),fetchItemsCallback:j,loading:s}),j=(O=null)=>{De({pagination:x,filter:y,props:O,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:s,tableRef:r})},N=()=>{j()},V=G(()=>n.screen.gt.sm?P:P.filter(O=>O.name==="datetime"||O.name==="action"));Ue(()=>y.year,O=>{O===null&&(y.month=null)});const B=C(null),U=C(!1),w=O=>{B.value=O,U.value=!0};return(O,T)=>{const z=J("i-head"),E=J("authenticated-layout");return c(),h(Y,null,[e(z,{title:Ja}),e(E,null,Le({title:l(()=>[b(i(Ja))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=S=>d.value=!d.value)},null,8,["icon"]),O.$can("admin.customer-wallet-transaction.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:T[1]||(T[1]=S=>a(Z).get(O.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",ki,[e(Te,{ref_key:"tableRef",ref:r,style:ze({height:a(g)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":T[6]||(T[6]=S=>x.value=S),filter:y.search,loading:s.value,columns:V.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:j,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:F,filter:Q})=>[t("div",wi,[t("span",null,i(F)+" "+i(Q?" with term "+Q:""),1)])]),body:l(S=>[e(Ce,{props:S,class:"cursor-pointer",onClick:X(F=>a(Z).get(O.route("admin.customer-wallet-transaction.detail",{id:S.row.id})),["stop"])},{default:l(()=>[e(H,{key:"datetime",props:S,class:"wrap-column"},{default:l(()=>[t("div",null,[e(q,{name:"tag",class:"inline-icon"}),b(" "+i(S.row.formatted_id),1)]),t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),b(" "+i(a(fe)(S.row.datetime)),1)]),S.row.finance_account?(c(),h("div",hi,[e(q,{name:"wallet",class:"inline-icon"}),b(" "+i(S.row.finance_account?S.row.finance_account.name:"-"),1)])):k("",!0),a(n).screen.gt.sm?k("",!0):(c(),h(Y,{key:1},[e(we,{icon:"person",text:S.row.customer.code+" - "+S.row.customer.name},null,8,["text"]),t("div",{class:he([S.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(q,{name:"money",class:"inline-icon"}),b(" "+i(a(Ft)(S.row.amount))+"Rp. "+i(a(K)(Math.abs(S.row.amount))),1)],2),e(we,{text:S.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(dt,null,{default:l(()=>[b(i(S.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(H,{key:"customer",props:S},{default:l(()=>[e(we,{text:S.row.customer.code+" - "+S.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"notes",props:S},{default:l(()=>[e(we,{text:S.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"amount",props:S,style:{"text-align":"right"}},{default:l(()=>[b(i(a(zt)(S.row.amount)),1)]),_:2},1032,["props"]),e(H,{key:"action",props:S},{default:l(()=>[t("div",$i,[e(A,{icon:"image",color:"primary",dense:"",flat:"",disable:S.row.image_path===null||S.row.image_path==="",onClick:X(F=>w(S.row.image_path),["stop"])},{default:l(()=>[S.row.image_path!=null?(c(),D(Kt,{key:0},{default:l(()=>T[8]||(T[8]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),O.$can("admin.customer-wallet-transaction.delete")?(c(),D(A,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:T[5]||(T[5]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[O.$can("admin.customer-wallet-transaction.delete")?te((c(),D(ae,{key:0,onClick:X(F=>$(S.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>T[9]||(T[9]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(da,{modelValue:U.value,"onUpdate:modelValue":T[7]||(T[7]=S=>U.value=S),imageUrl:`/${B.value}`},null,8,["modelValue","imageUrl"])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",_i,[e(ie,{modelValue:y.year,"onUpdate:modelValue":[T[2]||(T[2]=S=>y.year=S),N],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{modelValue:y.month,"onUpdate:modelValue":[T[3]||(T[3]=S=>y.month=S),N],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:y.year===null},null,8,["modelValue","disable"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":T[4]||(T[4]=S=>y.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Si=Object.freeze(Object.defineProperty({__proto__:null,default:xi},Symbol.toStringTag,{value:"Module"})),Vi={class:"detail"},qi={key:0},Ci={key:1},Ti={class:"text-grey-8"},Pi={key:2},Oi={class:"text-grey-8"},Ri={key:0,class:"q-pt-md"},Wl={__name:"MainInfoTab",setup(u){const n=be(),d=()=>{Qe({message:`Hapus Pelanggan ${n.props.data.code}?`,url:route("admin.customer.delete",n.props.data.id),onSuccess:()=>{Z.get(route("admin.customer.index"))}})};return(o,s)=>(c(),h(Y,null,[t("table",Vi,[t("tbody",null,[s[28]||(s[28]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pelanggan")])],-1)),t("tr",null,[s[1]||(s[1]=t("td",{style:{width:"120px"}},"Kode",-1)),s[2]||(s[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.code),1)]),t("tr",null,[s[3]||(s[3]=t("td",null,"Jenis",-1)),s[4]||(s[4]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.type_label),1)]),t("tr",null,[s[5]||(s[5]=t("td",null,"Nama",-1)),s[6]||(s[6]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[s[7]||(s[7]=t("td",null,"Default Harga",-1)),s[8]||(s[8]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.default_price_type_label),1)]),t("tr",null,[s[9]||(s[9]=t("td",null,"No. Telepon",-1)),s[10]||(s[10]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.phone?a(n).props.data.phone:"-"),1)]),t("tr",null,[s[11]||(s[11]=t("td",null,"Alamat",-1)),s[12]||(s[12]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.address?a(n).props.data.address:"-"),1)]),t("tr",null,[s[13]||(s[13]=t("td",null,"Saldo Wallet",-1)),s[14]||(s[14]=t("td",null,":",-1)),t("td",null,"Rp. "+i(a(K)(a(n).props.data.wallet_balance)),1)]),t("tr",null,[s[15]||(s[15]=t("td",null,"Utang Penjualan",-1)),s[16]||(s[16]=t("td",null,":",-1)),t("td",null,"Rp. "+i(a(K)(a(n).props.data.balance)),1)]),t("tr",null,[s[17]||(s[17]=t("td",null,"Status",-1)),s[18]||(s[18]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),s[29]||(s[29]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),a(n).props.data.created_at?(c(),h("tr",qi,[s[19]||(s[19]=t("td",null,"Dibuat",-1)),s[20]||(s[20]=t("td",null,":",-1)),t("td",null,i(a(qt)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name)+" ("+i(a(fe)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(c(),h("tr",Ci,[s[21]||(s[21]=t("td",null,"Diperbarui",-1)),s[22]||(s[22]=t("td",null,":",-1)),t("td",null,i(a(qt)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name)+" ("+i(a(fe)(a(n).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[s[23]||(s[23]=t("td",null,"Terakhir login",-1)),s[24]||(s[24]=t("td",null,":",-1)),t("td",null,[b(i(a(n).props.data.last_login_datetime?a(fe)(a(n).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",Ti,"("+i(a(qt)(a(n).props.data.last_login_datetime))+")",1)])]),a(n).props.data.last_activity_datetime?(c(),h("tr",Pi,[s[26]||(s[26]=t("td",null,"Aktifitas Terakhir",-1)),s[27]||(s[27]=t("td",null,":",-1)),t("td",null,[b(i(a(fe)(a(n).props.data.last_activity_datetime))+" ",1),t("span",Oi,[b("("+i(a(qt)(a(n).props.data.last_activity_datetime))+")",1),s[25]||(s[25]=t("br",null,null,-1)),b(i(a(n).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(c(),h("div",Ri,[e(A,{icon:"delete",label:"Hapus",color:"negative",onClick:s[0]||(s[0]=r=>d())})])):k("",!0)],64))}},Di=Object.freeze(Object.defineProperty({__proto__:null,default:Wl},Symbol.toStringTag,{value:"Module"})),Ii={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ai={class:"text-bold"},Ql={__name:"WalletHistoryTab",setup(u){const n=be(),d=C([]),o=C(!0),s=Pe({customer_id:n.props.data.id,...Re()}),r=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];$e(()=>{g()});const g=(f=null)=>De({pagination:r,filter:s,props:f,rows:d,url:route("admin.customer-wallet-transaction.data"),loading:o}),p=xe(),m=G(()=>p.screen.gt.sm?v:v.filter(f=>f.name==="id"));return(f,_)=>(c(),D(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":_[0]||(_[0]=y=>r.value=y),filter:s.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:y,message:x,filter:P})=>[t("div",Ii,[t("span",null,i(x)+" "+i(P?" with term "+P:""),1)])]),body:l(y=>[e(Ce,{props:y,class:"cursor-pointer",onClick:X(x=>a(Z).get(f.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:y},{default:l(()=>[t("div",Ai,[e(q,{class:"inline-icon",name:"tag"}),b(" "+i(y.row.formatted_id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),b(" "+i(a(fe)(y.row.datetime)),1)]),a(p).screen.lt.md?(c(),h(Y,{key:0},[t("div",{class:he(["text-bold",y.row.amount<0?"text-red":"text-green"])},[e(q,{name:"money",class:"inline-icon"}),b(" "+i(a(na)(y.row.amount)),1)],2),t("div",null,[e(we,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(dt,{size:"xs",color:y.row.amount>0?"green":"red"},{default:l(()=>[e(q,{name:"category"}),b(" "+i(y.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(H,{key:"notes",props:y,class:"wrap-column"},{default:l(()=>[e(we,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"amount",props:y},{default:l(()=>[t("div",{class:he(y.row.amount<0?"text-red-10":y.row.amount>0?"text-green-10":"")},i(a(zt)(y.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ui=Object.freeze(Object.defineProperty({__proto__:null,default:Ql},Symbol.toStringTag,{value:"Module"})),Ei={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ji={class:"text-bold"},Ni={class:"text-bold"},Mi={key:0},Jl={__name:"OrderHistoryTab",setup(u){const n=be(),d=C([]),o=C(!0),s=Pe({customer_id:n.props.data.id,...Re()}),r=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{g()});const g=(f=null)=>De({pagination:r,filter:s,props:f,rows:d,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:n.props.data.id}}),loading:o}),p=xe(),m=G(()=>p.screen.gt.sm?v:v.filter(f=>f.name==="id"));return(f,_)=>(c(),D(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":_[0]||(_[0]=y=>r.value=y),filter:s.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:y,message:x,filter:P})=>[t("div",Ei,[t("span",null,i(x)+" "+i(P?" with term "+P:""),1)])]),body:l(y=>[e(Ce,{props:y,class:"cursor-pointer",onClick:X(x=>a(Z).get(f.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:y},{default:l(()=>[t("div",ji,[e(q,{class:"inline-icon",name:"tag"}),b(" "+i(y.row.formatted_id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),b(" "+i(a(fe)(y.row.datetime)),1)]),a(p).screen.lt.md?(c(),h(Y,{key:0},[t("div",Ni,[e(q,{name:"money",class:"inline-icon"}),b(" Rp. "+i(a(K)(y.row.grand_total)),1)]),y.row.notes?(c(),h("div",Mi,[e(we,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(dt,{color:y.row.status=="closed"?"green":"red"},{default:l(()=>[b(i(f.$CONSTANTS.SALES_ORDER_STATUSES[y.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(H,{key:"grand_total",props:y},{default:l(()=>[t("div",null,i(a(K)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:y,class:"wrap-column"},{default:l(()=>[e(we,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Bi=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),zi=wt({name:"QSpace",setup(){const u=ke("div",{class:"q-space"});return()=>u}}),Fi={class:"detail"},Li={key:0},Hi={key:1},Ki={__name:"SupplierDetail",props:{data:{type:Object,default:null}},setup(u){return(n,d)=>(c(),h("table",Fi,[t("tbody",null,[t("tr",null,[d[0]||(d[0]=t("td",{style:{width:"100px"}},"Nama",-1)),d[1]||(d[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(u.data.name),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"No Telepon",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,[b(i(u.data.phone_1?u.data.phone_1:"-")+" ",1),u.data.phone_2?(c(),h(Y,{key:0},[d[2]||(d[2]=t("br",null,null,-1)),b(" "+i(u.data.phone_2),1)],64)):k("",!0),u.data.phone_3?(c(),h(Y,{key:1},[d[3]||(d[3]=t("br",null,null,-1)),b(" "+i(u.data.phone_3),1)],64)):k("",!0)])]),t("tr",null,[d[6]||(d[6]=t("td",null,"Alamat",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,i(u.data.address?u.data.address:"-"),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Alamat Retur",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,i(u.data.returned_address?u.data.returned_address:"-"),1)]),u.data.bank_account_name_1||u.data.bank_account_holder_1||u.data.bank_account_number_1?(c(),h("tr",Li,[d[10]||(d[10]=t("td",null,"No Rek 1",-1)),d[11]||(d[11]=t("td",null,":",-1)),t("td",null,[b(i(u.data.bank_account_name_1)+" ",1),u.data.bank_account_holder_1?(c(),h(Y,{key:0},[b(" a.n. "+i(u.data.bank_account_holder_1),1)],64)):k("",!0),b(" "+i(u.data.bank_account_number_1),1)])])):k("",!0),u.data.bank_account_name_2||u.data.bank_account_holder_2||u.data.bank_account_number_2?(c(),h("tr",Hi,[d[12]||(d[12]=t("td",null,"No Rek 2",-1)),d[13]||(d[13]=t("td",null,":",-1)),t("td",null,[b(i(u.data.bank_account_name_2)+" ",1),u.data.bank_account_holder_2?(c(),h(Y,{key:0},[b(" a.n. "+i(u.data.bank_account_holder_2),1)],64)):k("",!0),b(" "+i(u.data.bank_account_number_2),1)])])):k("",!0),t("tr",null,[d[15]||(d[15]=t("td",null,"URL",-1)),d[16]||(d[16]=t("td",null,":",-1)),t("td",null,[b(i(!u.data.url_1&&!u.data.url_2?"-":"")+" ",1),u.data.url_1?(c(),h(Y,{key:0},[b(i(u.data.url_1),1)],64)):k("",!0),u.data.url_2?(c(),h(Y,{key:1},[d[14]||(d[14]=t("br",null,null,-1)),b(" "+i(u.data.url_2),1)],64)):k("",!0)])]),t("tr",null,[d[17]||(d[17]=t("td",null,"Status",-1)),d[18]||(d[18]=t("td",null,":",-1)),t("td",null,i(u.data.active?"Aktif":"Tidak Aktif"),1)])])]))}},Yi={class:"detail"},Wi={__name:"CustomerDetail",props:{data:{type:Object,default:null}},setup(u){return(n,d)=>(c(),h("table",Yi,[t("tbody",null,[t("tr",null,[d[0]||(d[0]=t("td",{style:{width:"100px"}},"Kode",-1)),d[1]||(d[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(u.data.code),1)]),t("tr",null,[d[2]||(d[2]=t("td",null,"Nama",-1)),d[3]||(d[3]=t("td",null,":",-1)),t("td",null,i(u.data.name),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"No Telepon",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,i(u.data.phone),1)]),t("tr",null,[d[6]||(d[6]=t("td",null,"Alamat",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,i(u.data.address),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Status",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,i(u.data.active?"Aktif":"Tidak Aktif"),1)])])]))}},Qi={class:"detail"},Ji={__name:"ProductDetail",props:{data:{type:Object,default:null}},setup(u){return(n,d)=>{var o,s;return c(),h("table",Qi,[t("tbody",null,[t("tr",null,[d[0]||(d[0]=t("td",{style:{width:"100px"}},"Kode / Nama",-1)),d[1]||(d[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(u.data.name),1)]),t("tr",null,[d[2]||(d[2]=t("td",null,"Deskripsi",-1)),d[3]||(d[3]=t("td",null,":",-1)),t("td",null,i(u.data.description),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"Barcode",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,i(u.data.barcode),1)]),t("tr",null,[d[6]||(d[6]=t("td",null,"Jenis",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,i(n.$CONSTANTS.PRODUCT_TYPES[u.data.type]),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Kategori",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,i((o=u.data.category)==null?void 0:o.name),1)]),t("tr",null,[d[10]||(d[10]=t("td",null,"Pemasok",-1)),d[11]||(d[11]=t("td",null,":",-1)),t("td",null,i((s=u.data.supplier)==null?void 0:s.name),1)]),t("tr",null,[d[12]||(d[12]=t("td",null,"Status",-1)),d[13]||(d[13]=t("td",null,":",-1)),t("td",null,i(u.data.active?"Aktif":"Tidak Aktif"),1)])])])}}},Gi={class:"text-subtitle1"},Xi={class:"text-subtitle2 text-grey-9 q-mb-md"},Zi={class:"text-weight-medium"},ed={key:0},td={key:1},ad={key:2},ld={key:3},od={class:"text-subtitle1 text-grey-6 q-mb-sm"},nd={class:"bg-white q-pa-sm rounded-borders overflow-auto text-sm border-2 border-dashed border-grey-4",style:{"white-space":"pre-wrap","word-wrap":"break-word"}},sd={__name:"DocumentVersionDataViewer",props:{selectedVersion:{type:Object,default:null},showDialog:{type:Boolean,required:!0}},emits:["update:showDialog"],setup(u,{emit:n}){const d=u,o=xe(),s=n,r=G({get:()=>d.showDialog,set:m=>s("update:showDialog",m)}),v=G(()=>{if(d.selectedVersion&&d.selectedVersion.data)try{return typeof d.selectedVersion.data=="string"?JSON.parse(d.selectedVersion.data):d.selectedVersion.data}catch(m){return console.error("Error parsing JSON data:",m),{error:"Data JSON tidak valid."}}return{}}),g=G(()=>{var m;return(m=d.selectedVersion)==null?void 0:m.document_type}),p=G(()=>JSON.stringify(v.value,null,2));return(m,f)=>(c(),D(ct,{modelValue:r.value,"onUpdate:modelValue":f[2]||(f[2]=_=>r.value=_),"transition-show":"scale","transition-hide":"scale",maximized:a(o).screen.lt.md},{default:l(()=>[e(ce,{style:{width:"600px","max-width":"95vw"}},{default:l(()=>[e(le,{class:"row items-center q-pb-md bg-grey-4"},{default:l(()=>{var _;return[t("div",Gi,[e(q,{name:"history",class:"q-mr-sm"}),b(" Detail Versi V."+i(((_=u.selectedVersion)==null?void 0:_.version)||"N/A"),1)]),e(zi),e(A,{icon:"close",flat:"",round:"",dense:"",onClick:f[0]||(f[0]=y=>r.value=!1),color:"grey"})]}),_:1}),e(le,{class:"q-pt-md scroll",style:{"max-height":"75vh"}},{default:l(()=>{var _;return[t("div",Xi,[e(q,{name:"description",class:"q-mr-xs"}),f[3]||(f[3]=b(" Catatan Perubahan: ")),t("span",Zi,i(((_=u.selectedVersion)==null?void 0:_.changelog)||"Tidak ada catatan perubahan."),1)]),g.value==="App\\Models\\Supplier"?(c(),h("div",ed,[f[4]||(f[4]=t("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Info Pemasok",-1)),e(Ki,{data:v.value},null,8,["data"])])):g.value==="App\\Models\\Customer"?(c(),h("div",td,[f[5]||(f[5]=t("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Info Pelanggan",-1)),e(Wi,{data:v.value},null,8,["data"])])):g.value==="App\\Models\\Product"?(c(),h("div",ad,[f[6]||(f[6]=t("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Info Produk",-1)),e(Ji,{data:v.value},null,8,["data"])])):(c(),h("div",ld,[t("div",od," Tipe Dokumen ("+i(g.value||"TIDAK DIKETAHUI")+") Tidak Memiliki Tampilan Kustom. ",1),f[7]||(f[7]=t("div",{class:"text-caption text-grey-7 q-mb-xs"},"Tampilan Raw JSON:",-1)),t("pre",nd,i(p.value),1)]))]}),_:1}),e(mt,{align:"right",class:"bg-grey-2"},{default:l(()=>[e(A,{flat:"",label:"Tutup",color:"primary",onClick:f[1]||(f[1]=_=>r.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"]))}},rd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},id={class:"font-bold text-lg"},dd={class:"text-grey-7"},Sa={__name:"DocumentVersionHistoryList",props:{documentId:{type:[String,Number],required:!0},documentType:{type:String,required:!0}},setup(u){const n=u,d=C(!1),o=C(null),s=xe(),r=C([]),v=C(!0),g=Pe({...Re()}),p=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let m=[{name:"version",label:"Versi",field:"version",align:"center",sortable:!0},{name:"created_at",label:"Waktu Versi",field:"created_at",align:"left",sortable:!0},{name:"creator",label:"Dibuat Oleh",field:"creator",align:"left"},{name:"changelog",label:"Log Perubahan",field:"changelog",align:"left"}];$e(()=>{f()});const f=(x=null)=>De({pagination:p,filter:g,props:x,rows:r,url:route("admin.document-version.data",{filter:{document_id:n.documentId,document_type:n.documentType}}),loading:v}),_=G(()=>s.screen.lt.sm?m.filter(x=>x.name==="version"||x.name==="created_at"||x.name==="changelog"):m),y=x=>{o.value=x,d.value=!0};return(x,P)=>(c(),h(Y,null,[e(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:p.value,"onUpdate:pagination":P[0]||(P[0]=$=>p.value=$),filter:g.search,loading:v.value,columns:_.value,rows:r.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({message:$,filter:j})=>[t("div",rd,[t("span",null,i($)+" "+i(j?" dengan istilah "+j:""),1)])]),body:l($=>[e(Ce,{props:$,onClick:X(j=>y($.row),["stop"]),class:"cursor-pointer"},{default:l(()=>[e(H,{key:"version",props:$},{default:l(()=>{var j;return[t("div",id,[e(dt,{color:"primary"},{default:l(()=>[b("V."+i($.row.version),1)]),_:2},1024)]),a(s).screen.lt.sm?(c(),h(Y,{key:0},[t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),b(" "+i(a(fe)($.row.created_at)),1)]),t("div",dd,[e(q,{name:"person",class:"inline-icon"}),b(" "+i(((j=$.row.creator)==null?void 0:j.name)||"Sistem"),1)]),e(we,{text:$.row.changelog,icon:"notes",class:"text-grey-8 q-mt-xs"},null,8,["text"])],64)):k("",!0)]}),_:2},1032,["props"]),e(H,{key:"created_at",props:$},{default:l(()=>[b(i(a(fe)($.row.created_at)),1)]),_:2},1032,["props"]),e(H,{key:"creator",props:$},{default:l(()=>{var j;return[b(i(((j=$.row.creator)==null?void 0:j.name)||"Sistem"),1)]}),_:2},1032,["props"]),e(H,{key:"changelog",props:$},{default:l(()=>[e(we,{text:$.row.changelog},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]),e(sd,{"show-dialog":d.value,"onUpdate:showDialog":P[1]||(P[1]=$=>d.value=$),"selected-version":o.value},null,8,["show-dialog","selected-version"])],64))}},ud={class:"q-gutter-sm"},md={class:"q-gutter-sm"},cd={class:"col col-lg-6 q-pa-xs"},pd={class:"row"},Ga="Rincian Pelanggan",fd={__name:"Detail",setup(u){const n=be(),d=C("main");return xe(),(o,s)=>{const r=J("i-head"),v=J("authenticated-layout");return c(),h(Y,null,[e(r,{title:Ga}),e(v,null,{title:l(()=>[b(i(Ga))]),"left-button":l(()=>[t("div",ud,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=g=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":l(()=>[t("div",md,[o.$can("admin.customer.edit")?(c(),D(A,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:s[1]||(s[1]=g=>a(Z).get(o.route("admin.customer.edit",{id:a(n).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(c(),D(A,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:s[2]||(s[2]=g=>a(Z).get(o.route("admin.customer.edit",{id:a(n).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(c(),D(A,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:s[3]||(s[3]=g=>a(Z).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",cd,[t("div",pd,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Dt,{modelValue:d.value,"onUpdate:modelValue":s[4]||(s[4]=g=>d.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(Ze,{name:"main",label:"Info Utama"}),e(Ze,{name:"history",label:"Riwayat Wallet"}),e(Ze,{name:"order-history",label:"Riwayat Order"}),e(Ze,{name:"version-history",label:"Riwayat Dokumen"})]),_:1},8,["modelValue"]),e(It,{modelValue:d.value,"onUpdate:modelValue":s[5]||(s[5]=g=>d.value=g),animated:""},{default:l(()=>[e(et,{name:"main"},{default:l(()=>[e(Wl)]),_:1}),e(et,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(Ql)]),_:1}),e(et,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(Jl)]),_:1}),e(et,{name:"version-history",class:"q-pa-xs"},{default:l(()=>[e(Sa,{"document-id":a(n).props.data.id,"document-type":"customer"},null,8,["document-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},gd=Object.freeze(Object.defineProperty({__proto__:null,default:fd},Symbol.toStringTag,{value:"Module"})),bd={class:"q-gutter-sm"},vd={class:"col col-md-6 q-pa-xs"},yd={__name:"Editor",setup(u){const n=be(),d=(n.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Me({id:n.props.data.id,code:n.props.data.code,name:n.props.data.name,default_price_type:n.props.data.default_price_type,phone:n.props.data.phone,address:n.props.data.address,active:!!n.props.data.active,password:n.props.data.id?null:"12345",type:n.props.data.type}),s=C(!n.props.data.id),r=at(window.CONSTANTS.CUSTOMER_TYPES),v=at(window.CONSTANTS.PRODUCT_PRICE_TYPES),g=()=>lt({form:o,url:route("admin.customer.save",{id:o.id})});return(p,m)=>{const f=J("i-head"),_=J("authenticated-layout");return c(),h(Y,null,[e(f,{title:d}),e(_,null,{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",bd,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>p.$goBack())})])]),"right-button":l(()=>[e(A,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(o).processing,onClick:m[1]||(m[1]=y=>g()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",vd,[e(Be,{class:"row",onSubmit:X(g,["prevent"]),onValidationError:a(je)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[2]||(m[2]=y=>a(o).id=y)},null,512),[[ut,a(o).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(oe,{modelValue:a(o).code,"onUpdate:modelValue":m[3]||(m[3]=y=>a(o).code=y),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[y=>y&&y.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).name,"onUpdate:modelValue":m[4]||(m[4]=y=>a(o).name=y),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:a(o).default_price_type,"onUpdate:modelValue":m[5]||(m[5]=y=>a(o).default_price_type=y),options:a(v),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!a(o).errors.default_price_type,"error-message":a(o).errors.default_price_type,disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(ie,{modelValue:a(o).type,"onUpdate:modelValue":m[6]||(m[6]=y=>a(o).type=y),label:"Jenis Akun",options:a(r),"map-options":"","emit-value":"","lazy-rules":"",disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(o).errors.type,"error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(oe,{modelValue:a(o).phone,"onUpdate:modelValue":m[7]||(m[7]=y=>a(o).phone=y),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:a(o).processing,error:!!a(o).errors.phone,"error-message":a(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).address,"onUpdate:modelValue":m[8]||(m[8]=y=>a(o).address=y),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{autocomplete:"off","aria-autocomplete":"none",modelValue:a(o).password,"onUpdate:modelValue":m[10]||(m[10]=y=>a(o).password=y),label:a(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:a(o).processing,error:!!a(o).errors.password,"error-message":a(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:s.value?"text":"password"},{append:l(()=>[e(A,{dense:"",flat:"",round:"",onClick:m[9]||(m[9]=y=>s.value=!s.value)},{default:l(()=>[e(q,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(ma,{modelValue:a(o).active,"onUpdate:modelValue":m[11]||(m[11]=y=>a(o).active=y),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),m[12]||(m[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},_d=Object.freeze(Object.defineProperty({__proto__:null,default:yd},Symbol.toStringTag,{value:"Module"}));function Mt(u,n,d,o){const s=[];return u.forEach(r=>{o(r)===!0?s.push(r):n.push({failedPropValidation:d,file:r})}),s}function aa(u){u&&u.dataTransfer&&(u.dataTransfer.dropEffect="copy"),Et(u)}const kd={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},wd=["rejected"];function hd({editable:u,dnd:n,getFileInput:d,addFilesToQueue:o}){const{props:s,emit:r,proxy:v}=xt(),g=C(null),p=G(()=>s.accept!==void 0?s.accept.split(",").map(V=>(V=V.trim(),V==="*"?"*/":(V.endsWith("/*")&&(V=V.slice(0,V.length-1)),V.toUpperCase()))):null),m=G(()=>parseInt(s.maxFiles,10)),f=G(()=>parseInt(s.maxTotalSize,10));function _(V){if(u.value)if(V!==Object(V)&&(V={target:null}),V.target!==null&&V.target.matches('input[type="file"]')===!0)V.clientX===0&&V.clientY===0&&an(V);else{const B=d();B&&B!==V.target&&B.click(V)}}function y(V){u.value&&V&&o(null,V)}function x(V,B,U,w){let O=Array.from(B||V.target.files);const T=[],z=()=>{T.length!==0&&r("rejected",T)};if(s.accept!==void 0&&p.value.indexOf("*/")===-1&&(O=Mt(O,T,"accept",E=>p.value.some(S=>E.type.toUpperCase().startsWith(S)||E.name.toUpperCase().endsWith(S))),O.length===0))return z();if(s.maxFileSize!==void 0){const E=parseInt(s.maxFileSize,10);if(O=Mt(O,T,"max-file-size",S=>S.size<=E),O.length===0)return z()}if(s.multiple!==!0&&O.length!==0&&(O=[O[0]]),O.forEach(E=>{E.__key=E.webkitRelativePath+E.lastModified+E.name+E.size}),w===!0){const E=U.map(S=>S.__key);O=Mt(O,T,"duplicate",S=>E.includes(S.__key)===!1)}if(O.length===0)return z();if(s.maxTotalSize!==void 0){let E=w===!0?U.reduce((S,F)=>S+F.size,0):0;if(O=Mt(O,T,"max-total-size",S=>(E+=S.size,E<=f.value)),O.length===0)return z()}if(typeof s.filter=="function"){const E=s.filter(O);O=Mt(O,T,"filter",S=>E.includes(S))}if(s.maxFiles!==void 0){let E=w===!0?U.length:0;if(O=Mt(O,T,"max-files",()=>(E++,E<=m.value)),O.length===0)return z()}if(z(),O.length!==0)return O}function P(V){aa(V),n.value!==!0&&(n.value=!0)}function $(V){Et(V),(V.relatedTarget!==null||Bt.is.safari!==!0?V.relatedTarget!==g.value:document.elementsFromPoint(V.clientX,V.clientY).includes(g.value)===!1)===!0&&(n.value=!1)}function j(V){aa(V);const B=V.dataTransfer.files;B.length!==0&&o(null,B),n.value=!1}function N(V){if(n.value===!0)return ke("div",{ref:g,class:`q-${V}__dnd absolute-full`,onDragenter:aa,onDragover:aa,onDragleave:$,onDrop:j})}return Object.assign(v,{pickFiles:_,addFiles:y}),{pickFiles:_,addFiles:y,onDragover:P,onDragleave:$,processFiles:x,getDndNode:N,maxFilesNumber:m,maxTotalSizeNumber:f}}const Gl=wt({name:"QFile",inheritAttrs:!1,props:{...on,...Al,...kd,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ln,...wd],setup(u,{slots:n,emit:d,attrs:o}){const{proxy:s}=xt(),r=nn(),v=C(null),g=C(!1),p=sn(u),{pickFiles:m,onDragover:f,onDragleave:_,processFiles:y,getDndNode:x}=hd({editable:r.editable,dnd:g,getFileInput:Q,addFilesToQueue:R}),P=rn(u),$=G(()=>Object(u.modelValue)===u.modelValue?"length"in u.modelValue?Array.from(u.modelValue):[u.modelValue]:[]),j=G(()=>Ea($.value)),N=G(()=>$.value.map(ne=>ne.name).join(", ")),V=G(()=>dn($.value.reduce((ne,qe)=>ne+qe.size,0))),B=G(()=>({totalSize:V.value,filesNumber:$.value.length,maxFiles:u.maxFiles})),U=G(()=>({tabindex:-1,type:"file",title:"",accept:u.accept,capture:u.capture,name:p.value,...o,id:r.targetUid.value,disabled:r.editable.value!==!0})),w=G(()=>"q-file q-field--auto-height"+(g.value===!0?" q-file--dnd":"")),O=G(()=>u.multiple===!0&&u.append===!0);function T(ne){const qe=$.value.slice();qe.splice(ne,1),E(qe)}function z(ne){const qe=$.value.indexOf(ne);qe!==-1&&T(qe)}function E(ne){d("update:modelValue",u.multiple===!0?ne:ne[0])}function S(ne){ne.keyCode===13&&cn(ne)}function F(ne){(ne.keyCode===13||ne.keyCode===32)&&m(ne)}function Q(){return v.value}function R(ne,qe){const Fe=y(ne,qe,$.value,O.value),ft=Q();ft!=null&&(ft.value=""),Fe!==void 0&&((u.multiple===!0?u.modelValue&&Fe.every(pt=>$.value.includes(pt)):u.modelValue===Fe[0])||E(O.value===!0?$.value.concat(Fe):Fe))}function I(){return[ke("input",{class:[u.inputClass,"q-file__filler"],style:u.inputStyle})]}function ee(){if(n.file!==void 0)return $.value.length===0?I():$.value.map((qe,Fe)=>n.file({index:Fe,file:qe,ref:this}));if(n.selected!==void 0)return $.value.length===0?I():n.selected({files:$.value,ref:this});if(u.useChips===!0)return $.value.length===0?I():$.value.map((qe,Fe)=>ke(Ul,{key:"file-"+Fe,removable:r.editable.value,dense:!0,textColor:u.color,tabindex:u.tabindex,onRemove:()=>{T(Fe)}},()=>ke("span",{class:"ellipsis",textContent:qe.name})));const ne=u.displayValue!==void 0?u.displayValue:N.value;return ne.length!==0?[ke("div",{class:u.inputClass,style:u.inputStyle,textContent:ne})]:I()}function se(){const ne={ref:v,...U.value,...P.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:R};return u.multiple===!0&&(ne.multiple=!0),ke("input",ne)}return Object.assign(r,{fieldClass:w,emitValue:E,hasValue:j,inputRef:v,innerValue:$,floatingLabel:G(()=>j.value===!0||Ea(u.displayValue)),computedCounter:G(()=>{if(u.counterLabel!==void 0)return u.counterLabel(B.value);const ne=u.maxFiles;return`${$.value.length}${ne!==void 0?" / "+ne:""} (${V.value})`}),getControlChild:()=>x("file"),getControl:()=>{const ne={ref:r.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:u.tabindex};return r.editable.value===!0&&Object.assign(ne,{onDragover:f,onDragleave:_,onKeydown:S,onKeyup:F}),ke("div",ne,[se()].concat(ee()))}}),Object.assign(s,{removeAtIndex:T,removeFile:z,getNativeElement:()=>v.value}),un(s,"nativeEl",()=>v.value),mn(r)}}),jt=wt({name:"QBanner",props:{...ha,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(u,{slots:n}){const{proxy:{$q:d}}=xt(),o=$a(u,d),s=G(()=>"q-banner row items-center"+(u.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(u.rounded===!0?" rounded-borders":"")),r=G(()=>`q-banner__actions row items-center justify-end col-${u.inlineActions===!0?"auto":"all"}`);return()=>{const v=[ke("div",{class:"q-banner__avatar col-auto row items-center self-start"},Tt(n.avatar)),ke("div",{class:"q-banner__content col text-body2"},Tt(n.default))],g=Tt(n.action);return g!==void 0&&v.push(ke("div",{class:r.value},g)),ke("div",{class:s.value+(u.inlineActions===!1&&g!==void 0?" q-banner--top-padding":""),role:"alert"},v)}}}),$d={class:"q-gutter-sm"},xd={class:"col col-md-6 q-pa-xs"},Xa="Import Pelanggan",Sd={__name:"Import",setup(u){const n=Me({csv_file:null}),d=()=>{n.post(route("admin.customer.import"),{onSuccess:()=>{n.reset()},onError:()=>{je()},onFinish:()=>{n.clearErrors()}})};return(o,s)=>{const r=J("i-head"),v=J("authenticated-layout");return c(),h(Y,null,[e(r,{title:Xa}),e(v,{"show-drawer-button":!0},{title:l(()=>[b(i(Xa))]),"left-button":l(()=>[t("div",$d,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=g=>o.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",xd,[e(Be,{class:"row",onSubmit:X(d,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[s[3]||(s[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),s[4]||(s[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(Gl,{modelValue:a(n).csv_file,"onUpdate:modelValue":s[1]||(s[1]=g=>a(n).csv_file=g),accept:".csv",label:"Pilih file CSV",error:!!a(n).errors.csv_file,"error-message":a(n).errors.csv_file,disable:a(n).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(n).processing||!a(n).csv_file,loading:a(n).processing},null,8,["disable","loading"]),e(A,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:s[2]||(s[2]=g=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(c(),D(jt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[b(i(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(c(),D(jt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[b(i(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Vd=Object.freeze(Object.defineProperty({__proto__:null,default:Sd},Symbol.toStringTag,{value:"Module"})),qd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Cd={class:"q-pa-xs"},Td={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Pd={key:0},Od={key:2},Rd={key:3},Dd={class:"flex justify-end"},Za="Pelanggan",Id={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=Pe({search:"",status:"active",...Re()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"code",label:n.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];$e(()=>{x()});const y=N=>Qe({message:`Hapus Pelanggan ${N.name}?`,url:route("admin.customer.delete",N.id),fetchItemsCallback:x,loading:s}),x=(N=null)=>{De({pagination:m,filter:p,props:N,rows:o,url:route("admin.customer.data"),loading:s,tableRef:r})},P=()=>x(),$=N=>Z.get(route("admin.customer.detail",{id:N.id})),j=G(()=>n.screen.gt.sm?f:f.filter(N=>N.name==="code"||N.name==="action"));return(N,V)=>{const B=J("i-head"),U=J("authenticated-layout");return c(),h(Y,null,[e(B,{title:Za}),e(U,null,Le({title:l(()=>[b(i(Za))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:V[0]||(V[0]=w=>d.value=!d.value)},null,8,["icon"]),N.$can("admin.customer.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:V[1]||(V[1]=w=>a(Z).get(N.route("admin.customer.add")))})):k("",!0),N.$can("admin.customer.import")?(c(),D(A,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:V[3]||(V[3]=X(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.customer.import")?te((c(),D(ae,{key:0,clickable:"",onClick:V[2]||(V[2]=X(w=>a(Z).get(N.route("admin.customer.import")),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"csv"})]),_:1}),e(M,null,{default:l(()=>V[8]||(V[8]=[b("Import")])),_:1})]),_:1})),[[re],[me]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",Cd,[e(Te,{class:"full-height-table",style:ze({height:a(g)}),ref_key:"tableRef",ref:r,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":V[7]||(V[7]=w=>m.value=w),filter:p.search,loading:s.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:w,message:O,filter:T})=>[t("div",Td,[t("span",null,i(O)+" "+i(T?" with term "+T:""),1)])]),body:l(w=>[e(Ce,{props:w,class:he([w.row.active?"":"bg-red-1","cursor-pointer"]),onClick:O=>$(w.row)},{default:l(()=>[e(H,{key:"code",props:w,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(c(),D(q,{key:0,name:"person"})):k("",!0),b(" "+i(w.row.code),1)]),a(n).screen.lt.md?(c(),h(Y,{key:0},[t("div",null,[a(n).screen.lt.md?(c(),D(q,{key:0,name:"person"})):k("",!0),b(" "+i(w.row.name),1)]),w.row.phone?(c(),h("div",Pd,[e(q,{name:"phone"}),b(" "+i(w.row.phone),1)])):k("",!0),w.row.address?(c(),D(we,{key:1,text:w.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),w.row.wallet_balance!=0?(c(),h("div",Od,[e(q,{name:"wallet"}),b(" Wallet: Rp. "+i(a(K)(w.row.wallet_balance)),1)])):k("",!0),w.row.balance!=0?(c(),h("div",Rd,[e(q,{name:"wallet"}),b(" Utang: Rp. "+i(a(K)(w.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"name",props:w},{default:l(()=>[b(i(w.row.name),1)]),_:2},1032,["props"]),e(H,{key:"wallet_balance",props:w},{default:l(()=>[b(i(a(K)(w.row.wallet_balance)),1)]),_:2},1032,["props"]),e(H,{key:"balance",props:w},{default:l(()=>[b(i(a(K)(w.row.balance)),1)]),_:2},1032,["props"]),e(H,{key:"phone",props:w},{default:l(()=>[b(i(w.row.phone),1)]),_:2},1032,["props"]),e(H,{key:"address",props:w},{default:l(()=>[e(we,{text:w.row.address},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:w},{default:l(()=>[t("div",Dd,[N.$can("admin.customer.add")||N.$can("admin.customer.edit")||N.$can("admin.customer.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:V[6]||(V[6]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.customer.add")?te((c(),D(ae,{key:0,clickable:"",onClick:X(O=>a(Z).get(N.route("admin.customer.duplicate",w.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>V[9]||(V[9]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),N.$can("admin.customer.edit")?te((c(),D(ae,{key:1,clickable:"",onClick:X(O=>a(Z).get(N.route("admin.customer.edit",w.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>V[10]||(V[10]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),N.$can("admin.customer.delete")?te((c(),D(ae,{key:2,onClick:X(O=>y(w.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>V[11]||(V[11]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",qd,[e(ie,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[V[4]||(V[4]=w=>p.status=w),P],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":V[5]||(V[5]=w=>p.search=w),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ad=Object.freeze(Object.defineProperty({__proto__:null,default:Id},Symbol.toStringTag,{value:"Module"})),Ud={class:"q-pb-sm"},Ed={class:"row q-col-gutter-sm"},jd={class:"row items-center no-wrap"},Nd={class:"q-ml-md"},Md={class:"text-subtitle2 text-grey-8"},Bd={class:"text-h6 text-weight-bold"},Xl={__name:"ActualSummaryCard",props:{dashboardData:{type:Object,required:!0}},setup(u){const n=u,d=G(()=>[{label:"Total Pelanggan Aktif",value:n.dashboardData.summary.total_active_customer,icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Saldo Wallet",value:K(n.dashboardData.summary.total_wallet_balance),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Penjualan",value:K(n.dashboardData.summary.total_sales),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Transaksi",value:K(n.dashboardData.summary.total_transactions),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(o,s)=>(c(),h("div",Ud,[s[0]||(s[0]=t("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"},"Ringkasan Statistik",-1)),t("div",Ed,[(c(!0),h(Y,null,Ke(d.value,(r,v)=>(c(),h("div",{key:v,class:"col-12 col-md-6"},[e(ce,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:l(()=>[t("div",jd,[e(Qt,{icon:r.icon,color:r.color,"text-color":r.bgColor},null,8,["icon","color","text-color"]),t("div",Nd,[t("div",Md,i(r.label),1),t("div",Bd,i(r.value),1)])])]),_:2},1024)]))),128))])]))}},zd=Object.freeze(Object.defineProperty({__proto__:null,default:Xl},Symbol.toStringTag,{value:"Module"})),Fd={class:"row q-col-gutter-sm q-pb-sm"},Ld={class:"col-md-6 col-12"},Hd={class:"col-md-6 col-12"},Kd={__name:"ChartCard",props:{dashboardData:{type:Object,required:!0}},setup(u){pn([fn,gn,bn,vn,yn,_n,kn]);const n=u,d=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=G(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(r){let v=r[0].name+"<br/>";return r.forEach(function(g){v+=g.marker+" "+g.seriesName+": "+K(g.value)+"<br/>"}),v}},xAxis:{type:"category",data:n.dashboardData.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:r=>K(r),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:n.dashboardData.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:d[0]}}]})),s=G(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(r){return r.name+"<br/>"+r.seriesName+": "+K(r.value)+" ("+r.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:n.dashboardData.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:r=>d[r.dataIndex%d.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(r,v)=>(c(),h("div",Fd,[t("div",Ld,[e(ce,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[v[0]||(v[0]=t("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),e(a(ja),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",Hd,[e(ce,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[v[1]||(v[1]=t("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),e(a(ja),{class:"chart",option:s.value,autoresize:""},null,8,["option"])]),_:1})])]))}},Zl=vt(Kd,[["__scopeId","data-v-b9cdf915"]]),Yd=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"})),Wd={class:"row q-col-gutter-sm q-pb-sm"},Qd={class:"col-md-6 col-12"},Jd={class:"col-md-6 col-12"},eo={__name:"TopCard",props:{dashboardData:{type:Object,required:!0}},setup(u){return(n,d)=>(c(),h("div",Wd,[t("div",Qd,[e(ce,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[d[0]||(d[0]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),e(Ne,{separator:""},{default:l(()=>[(c(!0),h(Y,null,Ke(u.dashboardData.top_customers_sales,(o,s)=>(c(),D(ae,{key:s},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(Qt,{color:"primary","text-color":"white",size:"sm"},{default:l(()=>[b(i(s+1),1)]),_:2},1024)]),_:2},1024),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>[b(i(o.name),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:l(()=>[e(ye,{class:"text-primary"},{default:l(()=>[b(i(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",Jd,[e(ce,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[d[1]||(d[1]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),e(Ne,{separator:""},{default:l(()=>[(c(!0),h(Y,null,Ke(u.dashboardData.top_customers_topup,(o,s)=>(c(),D(ae,{key:s},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(Qt,{color:"green-7","text-color":"white",size:"sm"},{default:l(()=>[b(i(s+1),1)]),_:2},1024)]),_:2},1024),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>[b(i(o.name),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:l(()=>[e(ye,{class:"text-green-7"},{default:l(()=>[b(i(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]))}},Gd=Object.freeze(Object.defineProperty({__proto__:null,default:eo},Symbol.toStringTag,{value:"Module"})),Xd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Zd={class:"q-pa-xs"},eu={class:"q-pa-none"},el="Dashboard",tu={__name:"Index",setup(u){const n=be(),d=C({summary:{total_active_customer:n.props.data.active_customer_count,total_sales:155e5,total_transactions:1250,total_wallet_balance:n.props.data.total_customer_wallet_balance,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),o=C(!1),s=C(Re().month??"this_month"),r=C([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),v=()=>{Z.visit(route("admin.dashboard",{month:s.value}))};return(g,p)=>{const m=J("i-head"),f=J("authenticated-layout");return c(),h(Y,null,[e(m,{title:el}),e(f,null,Le({title:l(()=>[b(i(el))]),"right-button":l(()=>[e(A,{class:"q-ml-sm",icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:p[0]||(p[0]=_=>o.value=!o.value)},null,8,["icon"])]),default:l(()=>[t("div",Zd,[t("div",eu,[e(Xl,{dashboardData:d.value},null,8,["dashboardData"])]),e(Zl,{dashboardData:d.value},null,8,["dashboardData"]),e(eo,{dashboardData:d.value},null,8,["dashboardData"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar"},{default:l(()=>[t("div",Xd,[e(ie,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:s.value,"onUpdate:modelValue":[p[1]||(p[1]=_=>s.value=_),v],options:r.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},au=Object.freeze(Object.defineProperty({__proto__:null,default:tu},Symbol.toStringTag,{value:"Module"})),lu={class:"row"},ou={class:"row q-col-gutter-sm"},nu={class:"col-sm-6 col-xs-12"},su={class:"col-sm-6 col-xs-12"},ru={class:"col-md-3 col-sm-6 col-xs-12"},iu={class:"col-md-3 col-sm-6 col-xs-12"},du={class:"col-md-3 col-sm-6 col-xs-12"},uu={class:"col-md-3 col-sm-6 col-xs-12"};const mu={__name:"SummaryCard",setup(u){const n=be(),d=(o,s)=>{const v={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...s};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(v)),Z.visit(o,{data:v})};return(o,s)=>(c(),h("div",lu,[e(ce,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:l(()=>[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",ou,[t("div",nu,[e(ae,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:s[0]||(s[0]=r=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(M,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(q,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[b(i(a(n).props.data.active_customer_count),1)]),_:1}),e(ye,null,{default:l(()=>s[5]||(s[5]=[b("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",su,[e(ae,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:s[1]||(s[1]=r=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(M,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(q,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[b(i(o.$page.props.data.active_user_count),1)]),_:1}),e(ye,null,{default:l(()=>s[6]||(s[6]=[b("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",ru,[e(ae,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(q,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-weight-bold"},{default:l(()=>[b(" Rp. "+i(a(K)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(ye,null,{default:l(()=>s[7]||(s[7]=[b("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",iu,[e(ae,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(q,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-weight-bold"},{default:l(()=>[b(" Rp. "+i(a(K)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(ye,null,{default:l(()=>s[8]||(s[8]=[b("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",du,[e(ae,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(q,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-weight-bold"},{default:l(()=>[b(" Rp. "+i(a(K)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(ye,null,{default:l(()=>s[9]||(s[9]=[b("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",uu,[e(ae,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(q,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-weight-bold"},{default:l(()=>[b(" Rp. "+i(a(K)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(ye,null,{default:l(()=>s[10]||(s[10]=[b("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},cu=Object.freeze(Object.defineProperty({__proto__:null,default:mu},Symbol.toStringTag,{value:"Module"})),pu={class:"detail"},to={__name:"MainInfoTab",setup(u){const n=be();return(d,o)=>(c(),h("table",pu,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.FINANCE_ACCOUNT_TYPES[a(n).props.data.type]),1)]),a(n).props.data.type=="bank"?(c(),h(Y,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+i(a(K)(a(n).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},fu=Object.freeze(Object.defineProperty({__proto__:null,default:to},Symbol.toStringTag,{value:"Module"})),gu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},bu={class:"flex q-gutter-sm"},vu={key:0},ao={__name:"HistoryTab",setup(u){const n=be(),d=xe(),o=C(null),s=C([]),r=C(!0),v=Pe({...Re()}),g=We(null,117),p=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),m=[{name:"id",label:"ID",field:"id",align:"left"},{name:"datetime",label:"Waktu",field:"datetime",align:"left"},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],f=G(()=>d.screen.gt.sm?m:m.filter(y=>y.name==="id"));$e(()=>{_()});const _=(y=null)=>De({pagination:p,filter:v,props:y,rows:s,url:route("admin.finance-transaction.data",{filter:{account_id:n.props.data.id}}),loading:r,tableRef:o});return(y,x)=>(c(),D(Te,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:ze({height:a(g)}),color:"primary",class:"full-height-table","row-key":"id",pagination:p.value,"onUpdate:pagination":x[0]||(x[0]=P=>p.value=P),filter:v.search,loading:r.value,columns:f.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({message:P,filter:$})=>[t("div",gu,[t("span",null,i(P)+" "+i($?" with term "+$:""),1)])]),body:l(P=>[e(Ce,{props:P},{default:l(()=>[e(H,{key:"id",props:P},{default:l(()=>[t("div",bu,[t("div",null,[a(d).screen.lt.md?(c(),D(q,{key:0,name:"tag",class:"inline-icon"})):k("",!0),b(" "+i(P.row.formatted_id),1)])]),a(d).screen.lt.md?(c(),h(Y,{key:0},[t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),b(" "+i(a(fe)(P.row.datetime)),1)]),P.row.creator?(c(),h("div",vu,[e(q,{name:"person",class:"inline-icon"}),b(" "+i(P.row.creator.username),1)])):k("",!0),t("div",{class:he([P.row.amount>0?"text-green":"text-red","text-bold"])},[e(q,{class:"inline-icon",name:"money"}),b(" "+i(a(Ft)(P.row.amount))+"Rp. "+i(a(K)(Math.abs(P.row.amount))),1)],2),t("div",null,[e(dt,{color:P.row.amount>0?"green":"red"},{default:l(()=>[b(i(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[P.row.type]),1)]),_:2},1032,["color"])]),e(we,{text:P.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"datetime",props:P},{default:l(()=>[b(i(a(fe)(P.row.datetime)),1)]),_:2},1032,["props"]),e(H,{key:"type",props:P},{default:l(()=>[e(dt,{color:P.row.amount>0?"green":"red"},{default:l(()=>[b(i(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[P.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(H,{key:"amount",props:P,class:he(P.row.amount>0?"text-green":"text-red")},{default:l(()=>[b(i(a(Ft)(P.row.amount)+a(K)(Math.abs(P.row.amount))),1)]),_:2},1032,["props","class"]),e(H,{key:"notes",props:P},{default:l(()=>[e(we,{text:P.row.notes,icon:y.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},yu=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"})),_u={class:"q-gutter-sm"},ku={class:"q-gutter-sm"},wu={class:"col q-pa-xs"},hu={class:"row"},tl="Rincian Akun",$u={__name:"Detail",setup(u){const n=be(),d=C("main");return(o,s)=>{const r=J("i-head"),v=J("authenticated-layout");return c(),h(Y,null,[e(r,{title:tl}),e(v,null,{title:l(()=>[b(i(tl))]),"left-button":l(()=>[t("div",_u,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=g=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":l(()=>[t("div",ku,[o.$can("admin.finance-account.edit")?(c(),D(A,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:s[1]||(s[1]=g=>a(Z).get(o.route("admin.finance-account.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",wu,[t("div",hu,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Dt,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=g=>d.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(Ze,{name:"main",label:"Info Akun"}),e(Ze,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(It,{modelValue:d.value,"onUpdate:modelValue":s[3]||(s[3]=g=>d.value=g),animated:""},{default:l(()=>[e(et,{name:"main"},{default:l(()=>[e(to)]),_:1}),e(et,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(ao)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},xu=Object.freeze(Object.defineProperty({__proto__:null,default:$u},Symbol.toStringTag,{value:"Module"})),Su={style:{"margin-left":"-10px"}},Ct={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u){return(n,d)=>(c(),h("div",Su,[e(ra,{class:"full-width q-pl-none","model-value":u.modelValue,"onUpdate:modelValue":d[0]||(d[0]=o=>n.$emit("update:modelValue",o)),disable:u.disable,label:u.label},null,8,["model-value","disable","label"])]))}},Vu={class:"q-gutter-sm"},qu={class:"col col-md-6 q-pa-xs"},Cu={__name:"Editor",setup(u){const n=be(),d=(n.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Me({id:n.props.data.id,name:n.props.data.name,type:n.props.data.type,bank:n.props.data.bank,number:n.props.data.number,holder:n.props.data.holder,balance:parseFloat(n.props.data.balance),active:!!n.props.data.active,has_wallet_access:!!n.props.data.has_wallet_access,show_in_pos_payment:!!n.props.data.show_in_pos_payment,show_in_purchasing_payment:!!n.props.data.show_in_purchasing_payment,notes:n.props.data.notes}),s=at(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),r=()=>lt({form:o,url:route("admin.finance-account.save")}),v=g=>{g==="cashier_cash"&&(o.show_in_pos_payment=!0)};return $e(()=>{v(o.type)}),Ue(()=>o.type,g=>{v(g)}),(g,p)=>{const m=J("i-head"),f=J("authenticated-layout");return c(),h(Y,null,[e(m,{title:d}),e(f,null,{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",Vu,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=_=>g.$inertia.get(g.route("admin.finance-account.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",qu,[e(Be,{class:"row",onSubmit:X(r,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=_=>a(o).id=_)},null,512),[[ut,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":p[2]||(p[2]=_=>a(o).name=_),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:a(o).type,"onUpdate:modelValue":p[3]||(p[3]=_=>a(o).type=_),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"",error:!!a(o).errors.type,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),a(o).type=="bank"?(c(),h(Y,{key:0},[e(oe,{modelValue:a(o).bank,"onUpdate:modelValue":p[4]||(p[4]=_=>a(o).bank=_),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!a(o).errors.bank,disable:a(o).processing,"error-message":a(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).number,"onUpdate:modelValue":p[5]||(p[5]=_=>a(o).number=_),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!a(o).errors.number,disable:a(o).processing,"error-message":a(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).holder,"onUpdate:modelValue":p[6]||(p[6]=_=>a(o).holder=_),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!a(o).errors.holder,disable:a(o).processing,"error-message":a(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Ee,{modelValue:a(o).balance,"onUpdate:modelValue":p[7]||(p[7]=_=>a(o).balance=_),label:"Saldo",lazyRules:"",disable:a(o).processing,"allow-negative":!0,error:!!a(o).errors.balance,errorMessage:a(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(o).notes,"onUpdate:modelValue":p[8]||(p[8]=_=>a(o).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Ct,{modelValue:a(o).active,"onUpdate:modelValue":p[9]||(p[9]=_=>a(o).active=_),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),p[14]||(p[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(Ct,{modelValue:a(o).show_in_pos_payment,"onUpdate:modelValue":p[10]||(p[10]=_=>a(o).show_in_pos_payment=_),disable:a(o).processing||a(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(Ct,{modelValue:a(o).show_in_purchasing_payment,"onUpdate:modelValue":p[11]||(p[11]=_=>a(o).show_in_purchasing_payment=_),disable:a(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(Ct,{modelValue:a(o).has_wallet_access,"onUpdate:modelValue":p[12]||(p[12]=_=>a(o).has_wallet_access=_),disable:a(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:p[13]||(p[13]=_=>a(Z).get(g.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Tu=Object.freeze(Object.defineProperty({__proto__:null,default:Cu},Symbol.toStringTag,{value:"Module"})),Pu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ou={class:"q-pa-xs"},Ru={class:"q-my-sm text-subtitle"},Du={class:"text-bold text-grey-8"},Iu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Au={class:"text-bold text-grey-9"},Uu={class:"text-grey-9"},Eu={key:0},ju={key:1},Nu={key:0},Mu={class:"flex justify-end"},al="Akun Kas",Bu={__name:"Index",setup(u){const n=be(),d=xe(),o=C(!1),s=C([]),r=C(null),v=C(null),g=We(v,117),p=C(!0),m=Pe({search:"",status:"active",type:"all",...Re()}),f=n.props.totalBalance,_=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),y=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],x=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],P=[{value:"all",label:"Semua"},...at(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];$e(()=>{j()});const $=U=>Qe({message:`Hapus Akun ${U.name}?`,url:route("admin.finance-account.delete",U.id),fetchItemsCallback:j,loading:p}),j=(U=null)=>{De({pagination:_,filter:m,props:U,rows:s,url:route("admin.finance-account.data"),loading:p,tableRef:r})},N=()=>j(),V=U=>Z.get(route("admin.finance-account.detail",{id:U.id})),B=G(()=>d.screen.gt.sm?y:y.filter(U=>U.name==="name"||U.name==="action"));return(U,w)=>{const O=J("i-head"),T=J("authenticated-layout");return c(),h(Y,null,[e(O,{title:al}),e(T,null,Le({title:l(()=>[b(i(al))]),"right-button":l(()=>[e(A,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=z=>o.value=!o.value)},null,8,["icon"]),U.$can("admin.finance-account.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=z=>a(Z).get(U.route("admin.finance-account.add")))})):k("",!0)]),default:l(()=>[t("div",Ou,[e(ce,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:l(()=>[t("div",Ru,[w[7]||(w[7]=b(" Total Saldo Akun Aktif: ")),t("span",Du,"Rp. "+i(a(K)(a(f))),1)])]),_:1}),e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",style:ze({height:a(g)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":w[6]||(w[6]=z=>_.value=z),filter:m.search,loading:p.value,columns:B.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:j,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:z,message:E,filter:S})=>[t("div",Iu,[t("span",null,i(E)+" "+i(S?" with term "+S:""),1)])]),body:l(z=>[e(Ce,{props:z,class:he([z.row.active?"":"bg-red-1","cursor-pointer"]),onClick:E=>V(z.row)},{default:l(()=>[e(H,{key:"name",props:z,class:"wrap-column"},{default:l(()=>[t("div",Au,i(z.row.name),1),t("div",Uu,[z.row.type=="bank"?(c(),h("div",Eu,[e(q,{name:"wallet",class:"inline-icon"}),b(" Rekening "+i(z.row.bank??"-")+" "+i(z.row.number??"-")+" a.n. "+i(z.row.holder??"-"),1)])):k("",!0),z.row.notes?(c(),h("div",ju,[e(q,{name:"notes"}),b(" "+i(z.row.notes),1)])):k("",!0)]),a(d).screen.lt.md?(c(),h("div",Nu,[e(q,{name:"money",class:"inline-icon"}),b(" Rp. "+i(a(K)(z.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"type",props:z},{default:l(()=>[b(i(U.$CONSTANTS.FINANCE_ACCOUNT_TYPES[z.row.type]),1)]),_:2},1032,["props"]),e(H,{key:"balance",props:z},{default:l(()=>[b(i(a(K)(z.row.balance)),1)]),_:2},1032,["props"]),e(H,{key:"action",props:z},{default:l(()=>[t("div",Mu,[U.$can("admin.finance-account.add")||U.$can("admin.finance-account.edit")||U.$can("admin.finance-account.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[5]||(w[5]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[U.$can("admin.finance-account.add")?te((c(),D(ae,{key:0,clickable:"",onClick:X(E=>a(Z).get(U.route("admin.finance-account.duplicate",z.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>w[8]||(w[8]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),U.$can("admin.finance-account.edit")?te((c(),D(ae,{key:1,clickable:"",onClick:X(E=>a(Z).get(U.route("admin.finance-account.edit",z.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>w[9]||(w[9]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),U.$can("admin.finance-account.delete")?te((c(),D(ae,{key:2,onClick:X(E=>$(z.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>w[10]||(w[10]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Pu,[e(ie,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.type,"onUpdate:modelValue":[w[2]||(w[2]=z=>m.type=z),N],options:P,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[w[3]||(w[3]=z=>m.status=z),N],options:x,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":w[4]||(w[4]=z=>m.search=z),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},zu=Object.freeze(Object.defineProperty({__proto__:null,default:Bu},Symbol.toStringTag,{value:"Module"})),Fu={class:"q-gutter-sm"},Lu={class:"col col-md-6 q-pa-xs"},Hu={class:"row"},Ku={class:"detail"},Yu={key:0},Wu={key:1},Qu={key:2},Ju={key:3},Gu={colspan:"3",class:"bg-white"},ll="Rincian Transaksi",Xu={__name:"Detail",setup(u){const n=be();return(d,o)=>{const s=J("i-head"),r=J("authenticated-layout");return c(),h(Y,null,[e(s,{title:ll}),e(r,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Fu,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.finance-transaction.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},i(ll))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Lu,[t("div",Hu,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",Ku,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.datetime)),1)]),a(n).props.data.account?(c(),h("tr",Yu,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[b(i(a(n).props.data.account.name)+" ",1),a(n).props.data.account.type==="bank"?(c(),h(Y,{key:0},[b(" Rek "+i(a(n).props.data.account.bank)+" an "+i(a(n).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),b(" "+i(a(n).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),a(n).props.data.type?(c(),h("tr",Wu,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.FINANCE_TRANSACTION_TYPES[a(n).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(Ft)(a(n).props.data.amount))+" Rp. "+i(a(K)(Math.abs(a(n).props.data.amount))),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),a(n).props.data.creator?(c(),h("tr",Qu,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(c(),h("tr",Ju,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(c(),h(Y,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Gu,[e(Xt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:ze([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Zu=Object.freeze(Object.defineProperty({__proto__:null,default:Xu},Symbol.toStringTag,{value:"Module"})),em={class:"q-gutter-sm"},tm={class:"col col-md-6 q-pa-xs"},am={__name:"Editor",setup(u){var g;const n=be(),d=(n.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=n.props.accounts.map(p=>({label:p.name,value:p.id})),s=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],r=Me({id:n.props.data.id,account_id:n.props.data.account_id,to_account_id:n.props.data.to_account_id??null,type:n.props.data.type,datetime:new Date(n.props.data.datetime),notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((g=n.props.data)==null?void 0:g.image_path)??"",image:null}),v=()=>{Zt(r,{datetime:"YYYY-MM-DD HH:mm:ss"}),lt({form:r,url:route("admin.finance-transaction.save")})};return(p,m)=>{const f=J("i-head"),_=J("authenticated-layout");return c(),h(Y,null,[e(f,{title:d}),e(_,null,{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",em,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>p.$inertia.get(p.route("admin.finance-transaction.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",tm,[e(Be,{class:"row",onSubmit:X(v,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[1]||(m[1]=y=>a(r).id=y)},null,512),[[ut,a(r).id]]),e(Yt,{modelValue:a(r).datetime,"onUpdate:modelValue":m[2]||(m[2]=y=>a(r).datetime=y),label:"Waktu",error:!!a(r).errors.datetime,disable:a(r).processing,errorMessage:a(r).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ie,{autofocus:"",modelValue:a(r).type,"onUpdate:modelValue":m[3]||(m[3]=y=>a(r).type=y),label:"Jenis Transaksi",options:s,"map-options":"","emit-value":"",error:!!a(r).errors.type,disable:a(r).processing,errorMessage:a(r).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ie,{class:"custom-select",modelValue:a(r).account_id,"onUpdate:modelValue":m[4]||(m[4]=y=>a(r).account_id=y),label:a(r).type=="transfer"?"Akun Asal":"Akun",options:a(o),"map-options":"","emit-value":"",errorMessage:a(r).errors.account_id,error:!!a(r).errors.account_id,disable:a(r).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),a(r).type=="transfer"?(c(),D(ie,{key:0,class:"custom-select",modelValue:a(r).to_account_id,"onUpdate:modelValue":m[5]||(m[5]=y=>a(r).to_account_id=y),label:"Akun Tujuan",options:a(o),"map-options":"","emit-value":"",errorMessage:a(r).errors.to_account_id,error:!!a(r).errors.to_account_id,disable:a(r).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Ee,{modelValue:a(r).amount,"onUpdate:modelValue":m[6]||(m[6]=y=>a(r).amount=y),label:"Jumlah",lazyRules:"",disable:a(r).processing,error:!!a(r).errors.amount,errorMessage:a(r).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(r).notes,"onUpdate:modelValue":m[7]||(m[7]=y=>a(r).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(r).processing,error:!!a(r).errors.notes,"error-message":a(r).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(xa,{modelValue:a(r).image,"onUpdate:modelValue":m[8]||(m[8]=y=>a(r).image=y),"initial-image-path":a(r).image_path,disabled:a(r).processing,error:!!a(r).errors.image||!!a(r).errors.image_path,"error-message":a(r).errors.image||a(r).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(r).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(r).processing,onClick:m[9]||(m[9]=y=>a(Z).get(p.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},lm=Object.freeze(Object.defineProperty({__proto__:null,default:am},Symbol.toStringTag,{value:"Module"})),om={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},nm={class:"q-pa-xs"},sm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},rm={class:"text-grey-8"},im={class:"text-bold text-grey-8"},dm={class:"flex justify-end no-wrap"},ol="Transaksi Kas",um={__name:"Index",setup(u){const n=be(),d=xe(),o=C(!1),s=C([]),r=C(!0),v=C(null),g=C(null),p=We(g),m=Lt(),f=Ht(),_=[{label:"Semua",value:"all"},...n.props.accounts.map(E=>({label:E.name,value:E.id}))],y=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...Pt(m-2,m-1).reverse()],x=[{value:"all",label:"Semua Bulan"},...Ot()],P=[{value:"all",label:"Semua"},...at(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],$=Pe({search:"",type:"all",account_id:"all",year:m,month:f,...Re()}),j=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),N=[{name:"id",label:d.screen.lt.md?"Item":"Kode Trx",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{B()});const V=E=>Qe({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${E.formatted_id}?`,url:route("admin.finance-transaction.delete",E.id),fetchItemsCallback:B,loading:r}),B=(E=null)=>{De({pagination:j,filter:$,props:E,rows:s,url:route("admin.finance-transaction.data"),loading:r,tableRef:v})},U=()=>{B()},w=G(()=>d.screen.gt.sm?N:N.filter(E=>E.name==="id"||E.name==="action"));Ue(()=>$.year,E=>{E===null&&($.month=null)});const O=C(null),T=C(!1),z=E=>{O.value=E,T.value=!0};return(E,S)=>{const F=J("i-head"),Q=J("authenticated-layout");return c(),h(Y,null,[e(F,{title:ol}),e(Q,null,Le({title:l(()=>[b(i(ol))]),"right-button":l(()=>[e(A,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:S[0]||(S[0]=R=>o.value=!o.value)},null,8,["icon"]),E.$can("admin.finance-transaction.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:S[1]||(S[1]=R=>a(Z).get(E.route("admin.finance-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",nm,[e(Te,{ref_key:"tableRef",ref:v,style:ze({height:a(p)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:j.value,"onUpdate:pagination":S[8]||(S[8]=R=>j.value=R),filter:$.search,loading:r.value,columns:w.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:B,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:R,message:I,filter:ee})=>[t("div",sm,[t("span",null,i(I)+" "+i(ee?" with term "+ee:""),1)])]),body:l(R=>[e(Ce,{props:R,class:"cursor-pointer",onClick:X(I=>a(Z).get(E.route("admin.finance-transaction.detail",{id:R.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:R},{default:l(()=>[t("div",null,[a(d).screen.lt.md?(c(),D(q,{key:0,class:"inline-icon",name:"tag"})):k("",!0),b(" "+i(R.row.formatted_id),1)]),a(d).screen.lt.md?(c(),h(Y,{key:0},[t("div",rm,[e(q,{class:"inline-icon",name:"calendar_clock"}),b(" "+i(a(fe)(R.row.datetime)),1)]),t("div",im,[e(q,{name:"wallet",class:"inline-icon"}),b(" "+i(R.row.account.name),1)]),t("div",{class:he(["text-bold",R.row.amount<0?"text-red":"text-green"])},[e(q,{name:"money",class:"inline-icon"}),b(" "+i(a(Ft)(R.row.amount)+"Rp."+a(K)(Math.abs(R.row.amount))),1)],2),R.row.notes?(c(),D(we,{key:0,icon:"notes",text:R.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(dt,{color:R.row.amount>0?"green":"red"},{default:l(()=>[b(i(R.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"datetime",props:R,class:"wrap-column"},{default:l(()=>[b(i(a(fe)(R.row.datetime)),1)]),_:2},1032,["props"]),e(H,{key:"account",props:R},{default:l(()=>{var I;return[b(i((I=R.row.account)==null?void 0:I.name),1)]}),_:2},1032,["props"]),e(H,{key:"type",props:R},{default:l(()=>[b(i(E.$CONSTANTS.FINANCE_TRANSACTION_TYPES[R.row.type]),1)]),_:2},1032,["props"]),e(H,{key:"amount",props:R,style:{"text-align":"right"}},{default:l(()=>[b(i(a(zt)(R.row.amount)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:R,class:"wrap-column"},{default:l(()=>[b(i(R.row.notes),1)]),_:2},1032,["props"]),e(H,{key:"action",props:R},{default:l(()=>[t("div",dm,[e(A,{icon:"image",color:"primary",dense:"",flat:"",disable:R.row.image_path===null||R.row.image_path==="",onClick:X(I=>z(R.row.image_path),["stop"])},{default:l(()=>[R.row.image_path!=null?(c(),D(Kt,{key:0},{default:l(()=>S[10]||(S[10]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),E.$can("admin.finance-transaction.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:S[7]||(S[7]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[E.$can("admin.finance-transaction.delete")?te((c(),D(ae,{key:0,onClick:X(I=>V(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>S[11]||(S[11]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(da,{modelValue:T.value,"onUpdate:modelValue":S[9]||(S[9]=R=>T.value=R),imageUrl:`/${O.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",om,[e(ie,{modelValue:$.year,"onUpdate:modelValue":[S[2]||(S[2]=R=>$.year=R),U],options:y,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!="all"?(c(),D(ie,{key:0,modelValue:$.month,"onUpdate:modelValue":[S[3]||(S[3]=R=>$.month=R),U],options:x,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(ie,{modelValue:$.type,"onUpdate:modelValue":[S[4]||(S[4]=R=>$.type=R),U],options:P,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{modelValue:$.account_id,"onUpdate:modelValue":[S[5]||(S[5]=R=>$.account_id=R),U],label:"Akun",options:_,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":S[6]||(S[6]=R=>$.search=R),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},mm=Object.freeze(Object.defineProperty({__proto__:null,default:um},Symbol.toStringTag,{value:"Module"})),cm={class:"q-gutter-sm"},pm={class:"col col-md-6 q-pa-xs"},fm={__name:"Editor",setup(u){const n=be(),d=(n.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Me({id:n.props.data.id??null,name:n.props.data.name,description:n.props.data.description}),s=()=>lt({form:o,url:route("admin.operational-cost-category.save")});return(r,v)=>{const g=J("i-head"),p=J("authenticated-layout");return c(),h(Y,null,[e(g,{title:d}),e(p,null,{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",cm,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=m=>r.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",pm,[e(Be,{class:"row",onSubmit:X(s,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=m=>a(o).id=m)},null,512),[[ut,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":v[2]||(v[2]=m=>a(o).name=m),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[m=>m&&m.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).description,"onUpdate:modelValue":v[3]||(v[3]=m=>a(o).description=m),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:v[4]||(v[4]=m=>a(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},gm=Object.freeze(Object.defineProperty({__proto__:null,default:fm},Symbol.toStringTag,{value:"Module"})),bm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},vm={class:"q-pa-xs"},ym={class:"full-width row flex-center text-grey-8 q-gutter-sm"},_m={key:0,class:"text-grey-8"},km={class:"flex justify-end"},nl="Kategori Biaya Operasional",wm={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=Pe({search:"",...Re()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];$e(()=>{y()});const _=P=>Qe({message:`Hapus Kategori Biaya ${P.name}?`,url:route("admin.operational-cost-category.delete",P.id),fetchItemsCallback:y,loading:s}),y=(P=null)=>{De({pagination:m,filter:p,props:P,rows:o,url:route("admin.operational-cost-category.data"),loading:s,tableRef:r})},x=G(()=>n.screen.gt.sm?f:f.filter(P=>P.name==="name"||P.name==="action"));return(P,$)=>{const j=J("i-head"),N=J("authenticated-layout");return c(),h(Y,null,[e(j,{title:nl}),e(N,null,Le({title:l(()=>[b(i(nl))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=V=>d.value=!d.value)},null,8,["icon"]),P.$can("admin.operational-cost-category.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=V=>a(Z).get(P.route("admin.operational-cost-category.add")))})):k("",!0)]),default:l(()=>[t("div",vm,[e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",style:ze({height:a(g)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":$[4]||($[4]=V=>m.value=V),filter:p.search,loading:s.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:B,filter:U})=>[t("div",ym,[t("span",null,i(B)+" "+i(U?" with term "+U:""),1)])]),body:l(V=>[e(Ce,{props:V},{default:l(()=>[e(H,{key:"name",props:V,class:"wrap-column"},{default:l(()=>[b(i(V.row.name)+" ",1),a(n).screen.gt.sm?k("",!0):(c(),h(Y,{key:0},[V.row.description?(c(),h("div",_m,[e(q,{name:"description"}),b(" "+i(V.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(H,{key:"description",props:V,class:"wrap-column"},{default:l(()=>[b(i(V.row.description),1)]),_:2},1032,["props"]),e(H,{key:"action",props:V},{default:l(()=>[t("div",km,[P.$can("admin.operational-cost-category.add")||P.$can("admin.operational-cost-category.edit")||P.$can("admin.operational-cost-category.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[3]||($[3]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.operational-cost-category.add")?te((c(),D(ae,{key:0,clickable:"",onClick:X(B=>a(Z).get(P.route("admin.operational-cost-category.duplicate",V.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>$[5]||($[5]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),P.$can("admin.operational-cost-category.edit")?te((c(),D(ae,{key:1,clickable:"",onClick:X(B=>a(Z).get(P.route("admin.operational-cost-category.edit",V.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>$[6]||($[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),P.$can("admin.operational-cost-category.delete")?te((c(),D(ae,{key:2,onClick:X(B=>_(V.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>$[7]||($[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",bm,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":$[2]||($[2]=V=>p.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},hm=Object.freeze(Object.defineProperty({__proto__:null,default:wm},Symbol.toStringTag,{value:"Module"})),$m={class:"q-gutter-sm"},xm={class:"col col-md-6 q-pa-xs"},Sm={class:"row"},Vm={class:"detail"},qm={key:0},Cm={key:1},Tm={key:2},Pm={key:3},Om={colspan:"3",class:"bg-white"},sl="Rincian Biaya Operasional",Rm={__name:"Detail",setup(u){const n=be();return(d,o)=>{const s=J("i-head"),r=J("authenticated-layout");return c(),h(Y,null,[e(s,{title:sl}),e(r,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",$m,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.operational-cost.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},i(sl))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",xm,[t("div",Sm,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[o[21]||(o[21]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",Vm,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(a(Jt)(a(n).props.data.date)),1)]),a(n).props.data.finance_account?(c(),h("tr",qm,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[b(i(a(n).props.data.finance_account.name)+" ",1),a(n).props.data.finance_account.type==="bank"?(c(),h(Y,{key:0},[b(" Rek "+i(a(n).props.data.finance_account.bank)+" an "+i(a(n).props.data.finance_account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),b(" "+i(a(n).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),a(n).props.data.category?(c(),h("tr",Cm,[o[8]||(o[8]=t("td",null,"Kategori",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.category.name),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Deskripsi",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.description),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Jumlah",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,"Rp. "+i(a(K)(a(n).props.data.amount)),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)]),a(n).props.data.creator?(c(),h("tr",Tm,[o[16]||(o[16]=t("td",null,"Dibuat",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.created_at))+" oleh "+i(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(c(),h("tr",Pm,[o[18]||(o[18]=t("td",null,"Diperbarui",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.updated_at))+" oleh "+i(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(c(),h(Y,{key:4},[o[20]||(o[20]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Om,[e(Xt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:ze([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Dm=Object.freeze(Object.defineProperty({__proto__:null,default:Rm},Symbol.toStringTag,{value:"Module"})),Im={class:"row items-center justify-end"},Am={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(u,{emit:n}){const d=u,o=n,s=C(""),r=C(""),v=m=>{let f=!0;const _=d.minDate?rt.formatDate(d.minDate,"YYYY/MM/DD"):null,y=d.maxDate?rt.formatDate(d.maxDate,"YYYY/MM/DD"):null;return _&&(f=f&&rt.isBetweenDates(m,_,"2999/01/01",{inclusiveFrom:!0})),y&&(f=f&&rt.isBetweenDates(m,"1900/01/01",y,{inclusiveTo:!0})),f},g=G(()=>[m=>!!m||"Tanggal harus diisi",m=>{const f=rt.extractDate(m,d.displayFormat);if(!f)return"Format tanggal tidak valid";f.setHours(0,0,0,0);const _=d.minDate?new Date(d.minDate):null;_&&_.setHours(0,0,0,0);const y=d.maxDate?new Date(d.maxDate):null;return y&&y.setHours(0,0,0,0),_&&f<_?`Tanggal tidak boleh kurang dari ${rt.formatDate(d.minDate,d.displayFormat)}`:y&&f>y?`Tanggal tidak boleh lebih dari ${rt.formatDate(d.maxDate,d.displayFormat)}`:(o("update:modelValue",f),!0)}]);Ue(()=>d.modelValue,m=>{m instanceof Date?(r.value=rt.formatDate(m,"YYYY/MM/DD"),s.value=rt.formatDate(m,d.displayFormat)):(r.value="",s.value="")},{immediate:!0});const p=m=>{const f=m!==null?new Date(m):null;o("update:modelValue",f),s.value=f?rt.formatDate(f,d.displayFormat):null};return(m,f)=>(c(),D(oe,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=_=>s.value=_),label:d.label,readonly:d.readonly,disable:d.disable,error:d.error,"error-message":d.errorMessage,mask:d.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:g.value},{append:l(()=>[e(A,{icon:"event",disable:d.disable||d.readonly,flat:"",rounded:"",dense:""},{default:l(()=>[e(wn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(hn,{modelValue:r.value,"onUpdate:modelValue":[f[0]||(f[0]=_=>r.value=_),p],options:v},{default:l(()=>[t("div",Im,[te(e(A,{label:"Close",color:"primary",flat:""},null,512),[[me]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},Va=vt(Am,[["__scopeId","data-v-b418ccfb"]]);function lo(u,n=!1){const d=u.map(v=>({value:v.id,label:v.name})),o=n?[{value:"all",label:"Semua"},...d]:d,s=C([...o]);return{filteredCostCategories:s,filterCostCategory:(v,g)=>{const p=v.toLowerCase();g(()=>{s.value=o.filter(m=>m.label.toLowerCase().includes(p))})},costCategoryOptions:o}}const Um={class:"q-gutter-sm"},Em={class:"col col-md-6 q-pa-xs"},jm={__name:"Editor",setup(u){var _;const n=be(),d=(n.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=lo(n.props.categories),s=n.props.finance_accounts.map(y=>({label:y.name,value:y.id})),r=C(o),v=C([...r.value]),g=Me({id:n.props.data.id,finance_account_id:n.props.data.finance_account_id??null,category_id:n.props.data.category_id??null,date:new Date(n.props.data.date),description:n.props.data.description,notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((_=n.props.data)==null?void 0:_.image_path)??null,image:null}),p=()=>{Zt(g,{date:"YYYY-MM-DD"}),lt({form:g,url:route("admin.operational-cost.save")})},m=(y,x)=>{x(()=>{v.value=r.value.filter(P=>P.label.toLowerCase().includes(y.toLowerCase()))})},f=()=>{g.image_path=null};return(y,x)=>{const P=J("i-head"),$=J("authenticated-layout");return c(),h(Y,null,[e(P,{title:d}),e($,null,{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",Um,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:x[0]||(x[0]=j=>y.$inertia.get(y.route("admin.operational-cost.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Em,[e(Be,{class:"row",onSubmit:X(p,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":x[1]||(x[1]=j=>a(g).id=j)},null,512),[[ut,a(g).id]]),e(ie,{autofocus:"",modelValue:a(g).category_id,"onUpdate:modelValue":x[2]||(x[2]=j=>a(g).category_id=j),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:v.value,"map-options":"","emit-value":"",onFilter:m,error:!!a(g).errors.category_id,disable:a(g).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(M,null,{default:l(()=>x[10]||(x[10]=[b("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(Va,{modelValue:a(g).date,"onUpdate:modelValue":x[3]||(x[3]=j=>a(g).date=j),label:"Tanggal",error:!!a(g).errors.date,disable:a(g).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(oe,{modelValue:a(g).description,"onUpdate:modelValue":x[4]||(x[4]=j=>a(g).description=j),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!a(g).errors.description,disable:a(g).processing,"error-message":a(g).errors.description,rules:[j=>j&&j.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Ee,{modelValue:a(g).amount,"onUpdate:modelValue":x[5]||(x[5]=j=>a(g).amount=j),label:"Jumlah",lazyRules:"",disable:a(g).processing,error:!!a(g).errors.amount,errorMessage:a(g).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ie,{class:"custom-select",modelValue:a(g).finance_account_id,"onUpdate:modelValue":x[6]||(x[6]=j=>a(g).finance_account_id=j),label:"Sumber Dana",options:a(s),"map-options":"","emit-value":"",clearable:"",errorMessage:a(g).errors.finance_account_id,error:!!a(g).errors.finance_account_id,disable:a(g).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(oe,{modelValue:a(g).notes,"onUpdate:modelValue":x[7]||(x[7]=j=>a(g).notes=j),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(g).processing,error:!!a(g).errors.notes,"error-message":a(g).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(xa,{modelValue:a(g).image,"onUpdate:modelValue":x[8]||(x[8]=j=>a(g).image=j),"initial-image-path":a(g).image_path,disabled:a(g).processing,error:!!a(g).errors.image||!!a(g).errors.image_path,"error-message":a(g).errors.image||a(g).errors.image_path,onImageCleared:f},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(g).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(g).processing,onClick:x[9]||(x[9]=j=>a(Z).get(y.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Nm=Object.freeze(Object.defineProperty({__proto__:null,default:jm},Symbol.toStringTag,{value:"Module"})),Mm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Bm={class:"q-pa-xs"},zm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Fm={key:0},Lm={key:1},Hm={key:0},Km={class:"flex justify-end no-wrap"},rl="Biaya Operasional",Ym={__name:"Index",setup(u){const n=be(),d=xe(),o=C(!1),s=C(null),r=C(null),v=We(r),g=C(null),p=C(!1),m=C([]),f=C(!0),_=new Date().getFullYear(),y=new Date().getMonth()+1,x=[{label:"Semua Tahun",value:null},{label:`${_}`,value:_},...Pt(_-2,_-1).reverse()],P=[{value:null,label:"Semua Bulan"},...Ot()],{costCategoryOptions:$}=lo(n.props.categories),j=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...$],{accountOptions:N}=$n(n.props.finance_accounts),V=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...N],B=Pe({search:"",finance_account_id:"all",category_id:"all",year:_,month:y,...Re()}),U=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),w=[{name:"id",label:d.screen.lt.md?"Item":"ID",field:"id",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"account_id",label:"Akun",field:"account_id",align:"left"},{name:"category_id",label:"Kategori",field:"category_id",align:"left"},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{T()});const O=F=>Qe({message:`Hapus Biaya ${F.description}?`,url:route("admin.operational-cost.delete",F.id),fetchItemsCallback:T,loading:f}),T=(F=null)=>{De({pagination:U,filter:B,props:F,rows:m,url:route("admin.operational-cost.data"),loading:f,tableRef:s})},z=()=>{T()},E=G(()=>d.screen.gt.sm?w:w.filter(F=>F.name==="id"||F.name==="action"));Ue(()=>B.year,F=>{F===null&&(B.month=null)});const S=F=>{g.value=F,p.value=!0};return(F,Q)=>{const R=J("i-head"),I=J("authenticated-layout");return c(),h(Y,null,[e(R,{title:rl}),e(I,null,Le({title:l(()=>[b(i(rl))]),"right-button":l(()=>[e(A,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:Q[0]||(Q[0]=ee=>o.value=!o.value)},null,8,["icon"]),F.$can("admin.operational-cost.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:Q[1]||(Q[1]=ee=>a(Z).get(F.route("admin.operational-cost.add")))})):k("",!0)]),default:l(()=>[t("div",Bm,[e(Te,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:U.value,"onUpdate:pagination":Q[8]||(Q[8]=ee=>U.value=ee),filter:B.search,loading:f.value,columns:E.value,rows:m.value,"rows-per-page-options":[10,25,50],style:ze({height:a(v)}),onRequest:T,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:ee,message:se,filter:ne})=>[t("div",zm,[t("span",null,i(se)+" "+i(ne?" with term "+ne:""),1)])]),body:l(ee=>[e(Ce,{props:ee,class:"cursor-pointer",onClick:X(se=>a(Z).get(F.route("admin.operational-cost.detail",{id:ee.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:ee,class:"wrap-column"},{default:l(()=>[a(d).screen.gt.sm?k("",!0):(c(),h(Y,{key:0},[b(" ID: ")],64)),b(" "+i(ee.row.id)+" ",1),a(d).screen.gt.sm?k("",!0):(c(),h(Y,{key:1},[t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),b(" "+i(a(Jt)(ee.row.date)),1)]),ee.row.finance_account?(c(),h("div",Fm,[e(q,{name:"wallet",class:"inline-icon"}),b(" "+i(ee.row.finance_account.name),1)])):k("",!0),ee.row.category?(c(),h("div",Lm,[e(q,{name:"category",class:"inline-icon"}),b(" "+i(ee.row.category.name),1)])):k("",!0),e(we,{icon:"description",text:ee.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(q,{name:"money",class:"inline-icon"}),b(" Rp. "+i(a(K)(ee.row.amount)),1)]),e(we,{icon:"notes",text:ee.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(H,{key:"date",props:ee,class:"wrap-column"},{default:l(()=>[b(i(a(Jt)(ee.row.date)),1)]),_:2},1032,["props"]),e(H,{key:"account_id",props:ee,class:"wrap-column"},{default:l(()=>[b(i(ee.row.finance_account?ee.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(H,{key:"category_id",props:ee},{default:l(()=>[ee.row.category?(c(),h("div",Hm,i(ee.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"description",props:ee},{default:l(()=>[e(we,{text:ee.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"amount",props:ee},{default:l(()=>[b(i(a(K)(ee.row.amount)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:ee},{default:l(()=>[e(we,{text:ee.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:ee},{default:l(()=>[t("div",Km,[e(A,{icon:"image",color:"primary",dense:"",flat:"",disable:ee.row.image_path===null||ee.row.image_path==="",onClick:X(se=>S(ee.row.image_path),["stop"])},{default:l(()=>[ee.row.image_path!=null?(c(),D(Kt,{key:0},{default:l(()=>Q[10]||(Q[10]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),F.$can("admin.operational-cost.add")||F.$can("admin.operational-cost.edit")||F.$can("admin.operational-cost.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:Q[7]||(Q[7]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[F.$can("admin.operational-cost.add")?te((c(),D(ae,{key:0,clickable:"",onClick:X(se=>a(Z).get(F.route("admin.operational-cost.duplicate",ee.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>Q[11]||(Q[11]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),F.$can("admin.operational-cost.edit")?te((c(),D(ae,{key:1,clickable:"",onClick:X(se=>a(Z).get(F.route("admin.operational-cost.edit",ee.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>Q[12]||(Q[12]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),F.$can("admin.operational-cost.delete")?te((c(),D(ae,{key:2,onClick:X(se=>O(ee.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>Q[13]||(Q[13]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(da,{modelValue:p.value,"onUpdate:modelValue":Q[9]||(Q[9]=ee=>p.value=ee),imageUrl:`/${g.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:r},{default:l(()=>[t("div",Mm,[e(ie,{modelValue:B.year,"onUpdate:modelValue":[Q[2]||(Q[2]=ee=>B.year=ee),z],options:x,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{modelValue:B.month,"onUpdate:modelValue":[Q[3]||(Q[3]=ee=>B.month=ee),z],options:P,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:B.year===null},null,8,["modelValue","disable"]),e(ie,{modelValue:B.category_id,"onUpdate:modelValue":[Q[4]||(Q[4]=ee=>B.category_id=ee),z],options:j,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{modelValue:B.finance_account_id,"onUpdate:modelValue":[Q[5]||(Q[5]=ee=>B.finance_account_id=ee),z],options:V,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:B.search,"onUpdate:modelValue":Q[6]||(Q[6]=ee=>B.search=ee),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wm=Object.freeze(Object.defineProperty({__proto__:null,default:Ym},Symbol.toStringTag,{value:"Module"})),Qm={class:"q-gutter-sm"},Jm={class:"col col-md-6 q-pa-xs"},Gm={__name:"Editor",setup(u){const n=xe(),d=be(),o=(d.props.data.id?"Edit":"Tambah")+" Kategori Produk",s=Me({id:d.props.data.id,name:d.props.data.name,description:d.props.data.description}),r=()=>lt({form:s,url:route("admin.product-category.save")});return(v,g)=>{const p=J("i-head"),m=J("authenticated-layout");return c(),h(Y,null,[e(p,{title:o}),e(m,{"show-drawer-button":!a(n).screen.lt.md},Le({title:l(()=>[b(i(o))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Jm,[e(Be,{class:"row",onSubmit:X(r,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=f=>a(s).id=f)},null,512),[[ut,a(s).id]]),e(oe,{autofocus:"",modelValue:a(s).name,"onUpdate:modelValue":g[2]||(g[2]=f=>a(s).name=f),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(s).errors.name,disable:a(s).processing,"error-message":a(s).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(s).description,"onUpdate:modelValue":g[3]||(g[3]=f=>a(s).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.description,"error-message":a(s).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing,loading:a(s).processing},null,8,["disable","loading"]),e(A,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:g[4]||(g[4]=f=>a(s).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(n).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",Qm,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=f=>v.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},Xm=Object.freeze(Object.defineProperty({__proto__:null,default:Gm},Symbol.toStringTag,{value:"Module"})),Zm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ec={class:"q-pa-xs"},tc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ac={key:0,class:"text-grey-8"},lc={class:"flex justify-end"},il="Kategori Produk",oc={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=Pe({search:"",...Re()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];$e(()=>{y()});const _=P=>Qe({message:`Hapus Kategori ${P.name}?`,url:route("admin.product-category.delete",P.id),fetchItemsCallback:y,loading:s}),y=(P=null)=>{De({pagination:m,filter:p,props:P,rows:o,url:route("admin.product-category.data"),loading:s,tableRef:r})},x=G(()=>n.screen.gt.sm?f:f.filter(P=>P.name==="name"||P.name==="action"));return(P,$)=>{const j=J("i-head"),N=J("authenticated-layout");return c(),h(Y,null,[e(j,{title:il}),e(N,null,Le({title:l(()=>[b(i(il))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=V=>d.value=!d.value)},null,8,["icon"]),P.$can("admin.product-category.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=V=>a(Z).get(P.route("admin.product-category.add")))})):k("",!0)]),default:l(()=>[t("div",ec,[e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":$[4]||($[4]=V=>m.value=V),filter:p.search,loading:s.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:a(g)}),onRequest:y,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:B,filter:U})=>[t("div",tc,[t("span",null,i(B)+" "+i(U?" with term "+U:""),1)])]),body:l(V=>[e(Ce,{props:V},{default:l(()=>[e(H,{key:"name",props:V,class:"wrap-column"},{default:l(()=>[b(i(V.row.name)+" ",1),a(n).screen.gt.sm?k("",!0):(c(),h(Y,{key:0},[V.row.description?(c(),h("div",ac,[e(q,{name:"description"}),b(" "+i(V.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(H,{key:"description",props:V,class:"wrap-column"},{default:l(()=>[b(i(V.row.description),1)]),_:2},1032,["props"]),e(H,{key:"action",props:V},{default:l(()=>[t("div",lc,[P.$can("admin.product-category.add")||P.$can("admin.product-category.edit")||P.$can("admin.product-category.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[3]||($[3]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.product-category.add")?te((c(),D(ae,{key:0,clickable:"",onClick:X(B=>a(Z).get(P.route("admin.product-category.duplicate",V.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>$[5]||($[5]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),P.$can("admin.product-category.edit")?te((c(),D(ae,{key:1,clickable:"",onClick:X(B=>a(Z).get(P.route("admin.product-category.edit",V.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>$[6]||($[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),P.$can("admin.product-category.delete")?te((c(),D(ae,{key:2,onClick:X(B=>_(V.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>$[7]||($[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Zm,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":$[2]||($[2]=V=>p.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},nc=Object.freeze(Object.defineProperty({__proto__:null,default:oc},Symbol.toStringTag,{value:"Module"})),sc={class:"detail"},rc={key:0},ic={key:1},dc={key:2},uc={class:"detail"},mc={class:"detail"},cc={key:0},pc={key:0},fc={key:0},gc={key:0},bc={class:"detail"},vc={key:0,class:"q-pt-md"},oo={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(u){const n=u;xe();const d=s=>`${s>0?K((s-n.product.cost)/s*100,2):0}%`,o=()=>{Qe({message:`Hapus Produk ${n.product.name}?`,url:route("admin.product.delete",n.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(s,r)=>{const v=J("i-link");return c(),h("div",null,[r[41]||(r[41]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",sc,[t("tbody",null,[t("tr",null,[r[1]||(r[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),r[2]||(r[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(u.product.name),1)]),t("tr",null,[r[3]||(r[3]=t("td",null,"Deskirpsi",-1)),r[4]||(r[4]=t("td",null,":",-1)),t("td",null,i(u.product.description),1)]),t("tr",null,[r[5]||(r[5]=t("td",null,"Barcode",-1)),r[6]||(r[6]=t("td",null,":",-1)),t("td",null,i(u.product.barcode),1)]),t("tr",null,[r[7]||(r[7]=t("td",null,"Jenis Produk",-1)),r[8]||(r[8]=t("td",null,":",-1)),t("td",null,i(s.$CONSTANTS.PRODUCT_TYPES[u.product.type]),1)]),t("tr",null,[r[9]||(r[9]=t("td",null,"Kategori",-1)),r[10]||(r[10]=t("td",null,":",-1)),t("td",null,i(u.product.category?u.product.category.name:"--Tidak memiliki kategori--"),1)]),s.$can("admin.product:view-supplier")?(c(),h("tr",rc,[r[11]||(r[11]=t("td",null,"Supplier",-1)),r[12]||(r[12]=t("td",null,":",-1)),t("td",null,[u.product.supplier?(c(),D(v,{key:0,href:s.route("admin.supplier.detail",{id:u.product.supplier.id})},{default:l(()=>[b(i(u.product.supplier.name),1)]),_:1},8,["href"])):(c(),h(Y,{key:1},[b(i("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[r[13]||(r[13]=t("td",null,"Status",-1)),r[14]||(r[14]=t("td",null,":",-1)),t("td",null,i(u.product.active?"Aktif":"Tidak Aktif"),1)]),u.product.created_at?(c(),h("tr",ic,[r[16]||(r[16]=t("td",null,"Dibuat Oleh",-1)),r[17]||(r[17]=t("td",null,":",-1)),t("td",null,[u.product.creator?(c(),h(Y,{key:0},[e(v,{href:s.route("admin.user.detail",{id:u.product.creator})},{default:l(()=>[b(i(u.product.creator.username),1)]),_:1},8,["href"]),r[15]||(r[15]=b(" - "))],64)):k("",!0),b(" "+i(a(fe)(u.product.created_at)),1)])])):k("",!0),u.product.updater?(c(),h("tr",dc,[r[19]||(r[19]=t("td",null,"Diperbarui oleh",-1)),r[20]||(r[20]=t("td",null,":",-1)),t("td",null,[u.product.updater?(c(),h(Y,{key:0},[e(v,{href:s.route("admin.user.detail",{id:u.product.updater})},{default:l(()=>[b(i(u.product.updater.username),1)]),_:1},8,["href"]),r[18]||(r[18]=b(" - "))],64)):k("",!0),b(" "+i(a(fe)(u.product.updated_at)),1)])])):k("",!0)])]),r[42]||(r[42]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",uc,[t("tbody",null,[t("tr",null,[r[21]||(r[21]=t("td",{style:{width:"120px"}},"Stok",-1)),r[22]||(r[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(K)(u.product.stock))+" "+i(u.product.uom),1)]),t("tr",null,[r[23]||(r[23]=t("td",null,"Stok Minimum",-1)),r[24]||(r[24]=t("td",null,":",-1)),t("td",null,i(a(K)(u.product.min_stock))+" "+i(u.product.uom),1)]),t("tr",null,[r[25]||(r[25]=t("td",null,"Stok Maksimum",-1)),r[26]||(r[26]=t("td",null,":",-1)),t("td",null,i(a(K)(u.product.max_stock))+" "+i(u.product.uom),1)]),t("tr",null,[r[27]||(r[27]=t("td",null,"Barcode",-1)),r[28]||(r[28]=t("td",null,":",-1)),t("td",null,i(u.product.barcode),1)])])]),r[43]||(r[43]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",mc,[t("tbody",null,[t("tr",null,[r[29]||(r[29]=t("td",null,"Opsi Harga",-1)),r[30]||(r[30]=t("td",null,":",-1)),t("td",null,i(u.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),s.$can("admin.product:view-cost")?(c(),h("tr",cc,[r[31]||(r[31]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),r[32]||(r[32]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+i(a(K)(u.product.cost)),1)])):k("",!0),t("tr",null,[r[33]||(r[33]=t("td",null,"Harga Eceran",-1)),r[34]||(r[34]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+i(a(K)(u.product.price_1))+" ",1),s.$can("admin.product:view-cost")?(c(),h("span",pc," ("+i(d(u.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[r[35]||(r[35]=t("td",null,"Harga Partai",-1)),r[36]||(r[36]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+i(a(K)(u.product.price_2))+" ",1),s.$can("admin.product:view-cost")?(c(),h("span",fc," ("+i(d(u.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[r[37]||(r[37]=t("td",null,"Harga Grosir",-1)),r[38]||(r[38]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+i(a(K)(u.product.price_3))+" ",1),s.$can("admin.product:view-cost")?(c(),h("span",gc," ("+i(d(u.product.price_3))+") ",1)):k("",!0)])])])]),r[44]||(r[44]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",bc,[t("tbody",null,[t("tr",null,[r[39]||(r[39]=t("td",{style:{width:"120px"}},"Catatan",-1)),r[40]||(r[40]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(u.product.notes),1)])])]),s.$can("admin.product.delete")?(c(),h("div",vc,[e(A,{icon:"delete",label:"Hapus",color:"negative",onClick:r[0]||(r[0]=g=>o())})])):k("",!0)])}}},yc=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),_c={class:"full-width row flex-center text-grey-8 q-gutter-sm"},kc={key:0},no={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(u){const n=u,d=xe(),o=C([]),s=C(!0),r=Pe({...Re()}),v=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let g=[{name:"id",label:d.screen.lt.sm?"Item":"#",field:"id",align:"left",sortable:!0},{name:"created_at",label:"Waktu",field:"created_at",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"quantity_before",label:"Qty Awal",field:"quantity_before",align:"right"},{name:"quantity_after",label:"Qty Akhir",field:"quantity_after",align:"right"},{name:"quantity",label:"Selisih",field:"quantity",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{p()});const p=(f=null)=>De({pagination:v,filter:r,props:f,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:n.productId}}),loading:s}),m=G(()=>d.screen.lt.sm?g.filter(f=>f.name==="id"||f.name==="quantity"):g);return(f,_)=>(c(),D(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:v.value,"onUpdate:pagination":_[0]||(_[0]=y=>v.value=y),filter:r.search,loading:s.value,columns:m.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:y,message:x,filter:P})=>[t("div",_c,[t("span",null,i(x)+" "+i(P?" with term "+P:""),1)])]),body:l(y=>[e(Ce,{props:y},{default:l(()=>[e(H,{key:"id",props:y},{default:l(()=>[t("div",null,[a(d).screen.lt.sm?(c(),h(Y,{key:0},[t("div",null,[e(dt,null,{default:l(()=>[b(i(f.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type]),1)]),_:2},1024)]),e(q,{class:"inline-icon",name:"tag"})],64)):k("",!0),b(" "+i(y.row.formatted_id),1)]),a(d).screen.lt.sm?(c(),h(Y,{key:0},[t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),b(" "+i(a(fe)(y.row.created_at)),1)]),t("div",{class:he(y.row.quantity>0?"text-positive":"text-negative")},[e(q,{class:"inline-icon",name:"compare_arrows"}),b(" "+i(a(K)(y.row.quantity_before))+" "+i(y.row.uom)+" → "+i(a(K)(y.row.quantity_after))+" "+i(y.row.uom),1)],2),e(we,{text:y.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"created_at",props:y},{default:l(()=>[b(i(a(fe)(y.row.created_at)),1)]),_:2},1032,["props"]),e(H,{key:"type",props:y},{default:l(()=>[b(i(f.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type])+" ",1),y.row.ref?(c(),h("span",kc,i(y.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"quantity_before",props:y},{default:l(()=>[b(i(a(K)(y.row.quantity_before))+" "+i(y.row.uom),1)]),_:2},1032,["props"]),e(H,{key:"quantity_after",props:y},{default:l(()=>[b(i(a(K)(y.row.quantity_after))+" "+i(y.row.uom),1)]),_:2},1032,["props"]),e(H,{key:"quantity",props:y,class:he(y.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[b(i(a(K)(y.row.quantity))+" "+i(y.row.uom),1)]),_:2},1032,["props","class"]),e(H,{key:"notes",props:y},{default:l(()=>[e(we,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},wc=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),hc={class:"q-gutter-sm"},$c={class:"q-gutter-sm"},xc={class:"row justify-center"},Sc={class:"col col-lg-6 q-pa-xs"},Vc={class:"row"},qc={__name:"Detail",setup(u){const n=be(),d=`Rincian Produk #${n.props.data.id}`,o=C("main");return(s,r)=>{const v=J("i-head"),g=J("authenticated-layout");return c(),h(Y,null,[e(v,{title:d}),e(g,{"show-drawer-button":!0},{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",hc,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=p=>s.$goBack())})])]),"right-button":l(()=>[t("div",$c,[s.$can("admin.product.edit")?(c(),D(A,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:r[1]||(r[1]=p=>a(Z).get(s.route("admin.product.edit",{id:a(n).props.data.id}))),title:"Edit produk"})):k("",!0),s.$can("admin.product.add")?(c(),D(A,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:r[2]||(r[2]=p=>a(Z).get(s.route("admin.product.edit",{id:a(n).props.data.id}))),title:"Duplikat produk"})):k("",!0),s.$can("admin.product.add")?(c(),D(A,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:r[3]||(r[3]=p=>a(Z).get(s.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:l(()=>[t("div",xc,[t("div",Sc,[t("div",Vc,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Dt,{modelValue:o.value,"onUpdate:modelValue":r[4]||(r[4]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(Ze,{name:"main",label:"Info Utama"}),e(Ze,{name:"history",label:"Riwayat Stok"}),e(Ze,{name:"version-history",label:"Riwayat Dokumen"})]),_:1},8,["modelValue"]),e(It,{modelValue:o.value,"onUpdate:modelValue":r[5]||(r[5]=p=>o.value=p),animated:""},{default:l(()=>[e(et,{name:"main"},{default:l(()=>[e(oo,{product:a(n).props.data},null,8,["product"])]),_:1}),e(et,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(no,{"product-id":a(n).props.data.id},null,8,["product-id"])]),_:1}),e(et,{name:"version-history",class:"q-pa-xs"},{default:l(()=>[e(Sa,{"document-id":a(n).props.data.id,"document-type":"product"},null,8,["document-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},Cc=Object.freeze(Object.defineProperty({__proto__:null,default:qc},Symbol.toStringTag,{value:"Module"}));function qa(u,n=!1){const d=u.map(v=>({value:v.id,label:v.name})),o=n?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...d]:d,s=C([...o]);return{filteredCategories:s,filterCategories:(v,g)=>{const p=v.toLowerCase();g(()=>{s.value=o.filter(m=>m.label.toLowerCase().includes(p))})},categories:o}}function Ca(u,n=!1){const d=u.map(v=>({value:v.id,label:v.name+" ("+v.code+")"})),o=n?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...d]:d,s=C([...o]);return{filteredSuppliers:s,filterSupplierFn:(v,g)=>{const p=v.toLowerCase();g(()=>{s.value=o.filter(m=>m.label.toLowerCase().includes(p))})},suppliers:o}}const Tc={class:"q-gutter-sm"},Pc={class:"col col-md-6 q-pa-xs"},Oc={class:"row q-gutter-md"},Rc={class:"row q-gutter-md"},Dc={class:"row q-gutter-md"},Ic={class:"col"},Ac={class:"col"},Uc={class:"col"},Ec={__name:"Editor",setup(u){const n=be(),d=(n.props.data.id?"Edit":"Tambah")+" Produk",o=at(window.CONSTANTS.PRODUCT_TYPES),s=Me({id:n.props.data.id,category_id:n.props.data.category_id,supplier_id:n.props.data.supplier_id,type:n.props.data.type||"",name:n.props.data.name||"",barcode:n.props.data.barcode||"",description:n.props.data.description||"",stock:parseFloat(n.props.data.stock)||0,min_stock:parseFloat(n.props.data.min_stock)||0,max_stock:parseFloat(n.props.data.max_stock)||0,uom:n.props.data.uom||"",cost:parseFloat(n.props.data.cost)||0,price_1:parseFloat(n.props.data.price_1)||0,price_2:parseFloat(n.props.data.price_2)||0,price_3:parseFloat(n.props.data.price_3)||0,active:!!n.props.data.active,price_editable:!!n.props.data.price_editable,notes:n.props.data.notes||""}),r=()=>lt({form:s,url:route("admin.product.save")}),{filteredCategories:v,filterCategories:g}=qa(n.props.categories),{filteredSuppliers:p,filterSupplierFn:m}=Ca(n.props.suppliers),f=P=>s[P]>0?(s[P]-s.cost)/s[P]*100:0,_=G(()=>f("price_1")),y=G(()=>f("price_2")),x=G(()=>f("price_3"));return(P,$)=>{const j=J("i-head"),N=J("authenticated-layout");return c(),h(Y,null,[e(j,{title:d}),e(N,{"show-drawer-button":!0},{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",Tc,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:$[0]||($[0]=V=>P.$goBack())})])]),"right-button":l(()=>[e(A,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(s).processing,onClick:$[1]||($[1]=V=>r()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Pc,[e(Be,{class:"row",onKeydown:$[20]||($[20]=Gt(X(()=>{},["prevent"]),["enter"])),onSubmit:X(r,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":$[2]||($[2]=V=>a(s).id=V)},null,512),[[ut,a(s).id]]),$[23]||($[23]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(ie,{autofocus:"",modelValue:a(s).type,"onUpdate:modelValue":$[3]||($[3]=V=>a(s).type=V),class:"custom-select",options:a(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["modelValue","options"]),e(oe,{modelValue:a(s).name,"onUpdate:modelValue":$[4]||($[4]=V=>a(s).name=V),modelModifiers:{trim:!0},label:"Nama Produk","lazy-rules":"",error:!!a(s).errors.name,disable:a(s).processing,"error-message":a(s).errors.name,rules:[V=>V&&V.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(s).description,"onUpdate:modelValue":$[5]||($[5]=V=>a(s).description=V),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.description,"error-message":a(s).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:a(s).category_id,"onUpdate:modelValue":$[6]||($[6]=V=>a(s).category_id=V),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:a(v),"map-options":"","emit-value":"",onFilter:a(g),"option-label":"label","option-value":"value",error:!!a(s).errors.category_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(M,null,{default:l(()=>$[21]||($[21]=[b("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),P.$can("admin.product:view-supplier")?(c(),D(ie,{key:0,modelValue:a(s).supplier_id,"onUpdate:modelValue":$[7]||($[7]=V=>a(s).supplier_id=V),label:"Supplier","use-input":"","input-debounce":"300",clearable:"",options:a(p),"map-options":"","emit-value":"",onFilter:a(m),"option-label":"label","option-value":"value",error:!!a(s).errors.supplier_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(M,null,{default:l(()=>$[22]||($[22]=[b("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(Ct,{modelValue:a(s).active,"onUpdate:modelValue":$[8]||($[8]=V=>a(s).active=V),disable:a(s).processing,label:"Aktif"},null,8,["modelValue","disable"]),$[24]||($[24]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",Oc,[e(oe,{modelValue:a(s).barcode,"onUpdate:modelValue":$[9]||($[9]=V=>a(s).barcode=V),modelModifiers:{trim:!0},label:"Barcode","lazy-rules":"",error:!!a(s).errors.barcode,disable:a(s).processing,"error-message":a(s).errors.barcode,"hide-bottom-space":"",class:"col"},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(s).uom,"onUpdate:modelValue":$[10]||($[10]=V=>a(s).uom=V),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!a(s).errors.uom,disable:a(s).processing,"error-message":a(s).errors.uom,"hide-bottom-space":"",class:"col"},null,8,["modelValue","error","disable","error-message"])]),t("div",Rc,[e(Ee,{modelValue:a(s).stock,"onUpdate:modelValue":$[11]||($[11]=V=>a(s).stock=V),label:"Stok",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.stock,errorMessage:a(s).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(s).min_stock,"onUpdate:modelValue":$[12]||($[12]=V=>a(s).min_stock=V),label:"Stok Min",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.min_stock,errorMessage:a(s).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(s).max_stock,"onUpdate:modelValue":$[13]||($[13]=V=>a(s).max_stock=V),label:"Stok Maks",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.max_stock,errorMessage:a(s).errors.max_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),$[25]||($[25]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Harga",-1)),e(Ct,{modelValue:a(s).price_editable,"onUpdate:modelValue":$[14]||($[14]=V=>a(s).price_editable=V),disable:a(s).processing,label:"Harga bisa diubah saat penjualan"},null,8,["modelValue","disable"]),P.$can("admin.product:view-cost")?(c(),D(Ee,{key:1,modelValue:a(s).cost,"onUpdate:modelValue":$[15]||($[15]=V=>a(s).cost=V),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.cost,errorMessage:a(s).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("div",Dc,[t("div",Ic,[e(Ee,{modelValue:a(s).price_1,"onUpdate:modelValue":$[16]||($[16]=V=>a(s).price_1=V),label:"Harga Eceran",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price_1,errorMessage:a(s).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),t("div",{class:he(["q-my-xs",_.value<0?"text-red":"text-green-7"])},i(a(zt)(_.value,2))+"% ",3)]),t("div",Ac,[e(Ee,{modelValue:a(s).price_2,"onUpdate:modelValue":$[17]||($[17]=V=>a(s).price_2=V),label:"Harga Partai",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price_2,errorMessage:a(s).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),t("div",{class:he(["q-my-xs",y.value<0?"text-red":"text-green-7"])},i(a(zt)(y.value,2))+"% ",3)]),t("div",Uc,[e(Ee,{modelValue:a(s).price_3,"onUpdate:modelValue":$[18]||($[18]=V=>a(s).price_3=V),label:"Harga Grosir",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price_3,errorMessage:a(s).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),t("div",{class:he(["q-my-xs",x.value<0?"text-red":"text-green-7"])},i(a(zt)(x.value,2))+"% ",3)])]),$[26]||($[26]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Lainnya",-1)),e(oe,{modelValue:a(s).notes,"onUpdate:modelValue":$[19]||($[19]=V=>a(s).notes=V),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.notes,"error-message":a(s).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},jc=Object.freeze(Object.defineProperty({__proto__:null,default:Ec},Symbol.toStringTag,{value:"Module"})),Nc={class:"q-gutter-sm"},Mc={class:"col col-md-6 q-pa-xs"},dl="Import Produk",Bc={__name:"Import",setup(u){const n=Me({csv_file:null}),d=()=>{n.post(route("admin.product.import"),{onSuccess:()=>{n.reset()},onError:()=>{je()},onFinish:()=>{n.clearErrors()}})};return(o,s)=>{const r=J("i-head"),v=J("authenticated-layout");return c(),h(Y,null,[e(r,{title:dl}),e(v,{"show-drawer-button":!0},{title:l(()=>[b(i(dl))]),"left-button":l(()=>[t("div",Nc,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=g=>o.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Mc,[e(Be,{class:"row",onSubmit:X(d,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[s[3]||(s[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),s[4]||(s[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(Gl,{modelValue:a(n).csv_file,"onUpdate:modelValue":s[1]||(s[1]=g=>a(n).csv_file=g),accept:".csv",label:"Pilih file CSV",error:!!a(n).errors.csv_file,"error-message":a(n).errors.csv_file,disable:a(n).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(n).processing||!a(n).csv_file,loading:a(n).processing},null,8,["disable","loading"]),e(A,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:s[2]||(s[2]=g=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(c(),D(jt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[b(i(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(c(),D(jt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[b(i(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},zc=Object.freeze(Object.defineProperty({__proto__:null,default:Bc},Symbol.toStringTag,{value:"Module"})),Fc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Lc={class:"q-pa-xs"},Hc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Kc={key:0},Yc={key:1},Wc={key:2},Qc={key:3},Jc={class:"flex justify-end"},Gc={key:0},Xc={key:1},Zc={key:0},ul="Produk",ep={__name:"Index",setup(u){const n=be(),d=C(null),o=C(null),s=We(o),r=C(!1),v=[...at(window.CONSTANTS.PRODUCT_TYPES)],g=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],p=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],m=xe(),f=C(!1),_=C([]),y=C(!0),x=Pe({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...Re()}),P=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});let $=[{name:"id",label:"ID",field:"id",align:"center",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"price_2",label:"Harga Partai",field:"price_2",align:"right"},{name:"price_3",label:"Harga Grosir",field:"price_3",align:"right"},{name:"action",align:"right"}];$e(()=>{const S=new URLSearchParams(window.location.search).get("page");S&&(P.value.page=parseInt(S)),N()});const j=E=>Qe({message:`Hapus Produk ${E.name}?`,url:route("admin.product.delete",E.id),fetchItemsCallback:N,loading:y}),N=(E=null)=>{De({pagination:P,filter:x,props:E,rows:_,url:route("admin.product.data"),loading:y,tableRef:d})},V=()=>{N()},{filteredCategories:B,filterCategories:U}=qa(n.props.categories),{filteredSuppliers:w,filterSupplierFn:O}=Ca(n.props.suppliers),T=G(()=>{let E=[...$];return r.value||E.splice(3,1),m.screen.gt.sm?E:E.filter(S=>S.name==="id"||S.name==="name"||S.name==="action")}),z=E=>{Z.get(route("admin.product.detail",E.row.id))};return(E,S)=>{const F=J("i-head"),Q=J("authenticated-layout");return c(),h(Y,null,[e(F,{title:ul}),e(Q,null,Le({title:l(()=>[b(i(ul))]),"right-button":l(()=>[e(A,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:S[0]||(S[0]=R=>f.value=!f.value)},null,8,["icon"]),E.$can("admin.product.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:S[1]||(S[1]=R=>a(Z).get(E.route("admin.product.add")))})):k("",!0),E.$can("admin.product.import")||E.$can("admin.product:view-cost")?(c(),D(A,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:S[5]||(S[5]=X(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[E.$can("admin.product.send-price-list")?te((c(),D(ae,{key:0,clickable:"",onClick:S[2]||(S[2]=X(R=>a(Z).get(E.route("admin.product.send-price-list")),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"send"})]),_:1}),e(M,null,{default:l(()=>S[14]||(S[14]=[b("Kirim Daftar Harga")])),_:1})]),_:1})),[[re],[me]]):k("",!0),E.$can("admin.product.import")?te((c(),D(ae,{key:1,clickable:"",onClick:S[3]||(S[3]=R=>r.value=!r.value)},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:r.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(M,null,{default:l(()=>[b(i(r.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[re],[me]]):k("",!0),E.$can("admin.product.import")?te((c(),D(ae,{key:2,clickable:"",onClick:S[4]||(S[4]=X(R=>a(Z).get(E.route("admin.product.import")),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"csv"})]),_:1}),e(M,null,{default:l(()=>S[15]||(S[15]=[b("Import")])),_:1})]),_:1})),[[re],[me]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",Lc,[e(Te,{ref_key:"tableRef",ref:d,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:P.value,"onUpdate:pagination":S[13]||(S[13]=R=>P.value=R),filter:x.search,loading:y.value,columns:T.value,rows:_.value,"rows-per-page-options":[10,25,50],style:ze({height:a(s)}),onRequest:N,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:R,message:I,filter:ee})=>[t("div",Hc,[t("span",null,i(I)+" "+i(ee?" with term "+ee:""),1)])]),header:l(R=>[e(Ce,{props:R},{default:l(()=>[e(sa,{"auto-width":""}),(c(!0),h(Y,null,Ke(R.cols,I=>(c(),D(sa,{key:I.name,props:R},{default:l(()=>[b(i(I.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(R=>[e(Ce,{props:R,class:he([{inactive:!R.row.active},"cursor-pointer"]),onClick:I=>z(R)},{default:l(()=>[e(H,{"auto-width":""},{default:l(()=>[e(A,{size:"sm",flat:"",round:"",dense:"",onClick:X(I=>R.expand=!R.expand,["stop"]),icon:R.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(H,null,{default:l(()=>[b(i(R.row.id),1)]),_:2},1024),e(H,{key:"name",props:R,class:"wrap-column"},{default:l(()=>[b(i(R.row.name)+" ",1),a(m).screen.gt.sm?k("",!0):(c(),h(Y,{key:0},[R.row.type=="stocked"?(c(),h("div",Kc,[e(q,{name:"cycle"}),b(" Stok: "+i(a(K)(R.row.stock))+" "+i(R.row.uom),1)])):k("",!0),r.value?(c(),h("div",Yc,[e(q,{name:"money"}),b(" Modal: Rp. "+i(a(K)(R.row.cost)),1)])):k("",!0),t("div",null,[e(q,{name:"sell"}),b(" Eceran: Rp. "+i(a(K)(R.row.price_1)),1)]),R.row.price_2!=0?(c(),h("div",Wc,[e(q,{name:"sell"}),b(" Partai: Rp. "+i(a(K)(R.row.price_2)),1)])):k("",!0),R.row.price_3!=0?(c(),h("div",Qc,[e(q,{name:"sell"}),b(" Grosir: Rp. "+i(a(K)(R.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(H,{key:"stock",props:R,class:he(["wrap-column",{"low-stock":R.row.type=="stocked"&&(Number(R.row.stock)==0||Number(R.row.stock)<Number(R.row.min_stock)),"over-stock":R.row.type=="stocked"&&Number(R.row.max_stock)&&Number(R.row.stock)>Number(R.row.max_stock)}])},{default:l(()=>[b(i(R.row.type=="stocked"?a(K)(R.row.stock)+" "+R.row.uom:"-"),1)]),_:2},1032,["props","class"]),(c(),D(H,{key:"cost",props:R,class:"wrap-column"},{default:l(()=>[b(i(a(K)(R.row.cost)),1)]),_:2},1032,["props"])),e(H,{key:"price_1",props:R,class:"wrap-column"},{default:l(()=>[b(i(a(K)(R.row.price_1)),1)]),_:2},1032,["props"]),e(H,{key:"price_2",props:R,class:"wrap-column"},{default:l(()=>[b(i(a(K)(R.row.price_2)),1)]),_:2},1032,["props"]),e(H,{key:"price_3",props:R,class:"wrap-column"},{default:l(()=>[b(i(a(K)(R.row.price_3)),1)]),_:2},1032,["props"]),e(H,{key:"action",props:R},{default:l(()=>[t("div",Jc,[E.$can("admin.product.add")||E.$can("admin.product.edit")||E.$can("admin.product.delete")?(c(),D(A,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:S[12]||(S[12]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"175px"}},{default:l(()=>[E.$can("admin.product.add")?te((c(),D(ae,{key:0,clickable:"",onClick:X(I=>a(Z).get(E.route("admin.product.duplicate",R.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>S[16]||(S[16]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),E.$can("admin.product.edit")?te((c(),D(ae,{key:1,clickable:"",onClick:X(I=>a(Z).get(E.route("admin.product.edit",R.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>S[17]||(S[17]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),E.$can("admin.product.delete")?te((c(),D(ae,{key:2,onClick:X(I=>j(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>S[18]||(S[18]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),te(e(Ce,{props:R},{default:l(()=>[e(H,{colspan:"100%"},{default:l(()=>[R.row.barcode?(c(),h("div",Gc,[e(q,{class:"inline-icon",name:"barcode"}),b(" Barcode: "+i(R.row.barcode),1)])):k("",!0),R.row.category_id?(c(),h("div",Xc,[e(q,{name:"category",class:"inline-icon"}),b(" Kategori: "+i(R.row.category.name),1)])):k("",!0),E.$can("admin.product:view-supplier")?(c(),h(Y,{key:2},[R.row.supplier_id?(c(),h("div",Zc,[e(q,{name:"local_shipping",class:"inline-icon"}),b(" Supplier: "+i(R.row.supplier.name),1)])):k("",!0)],64)):k("",!0),R.row.description?(c(),D(we,{key:3,text:R.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),R.row.notes?(c(),D(we,{key:4,text:R.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[El,R.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[f.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:l(()=>[t("div",Fc,[e(ie,{modelValue:x.type,"onUpdate:modelValue":[S[6]||(S[6]=R=>x.type=R),V],class:"custom-select col-xs-4 col-sm-2",options:v,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(ie,{modelValue:x.stock_status,"onUpdate:modelValue":[S[7]||(S[7]=R=>x.stock_status=R),V],class:"custom-select col-xs-4 col-sm-2",options:p,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{modelValue:x.status,"onUpdate:modelValue":[S[8]||(S[8]=R=>x.status=R),V],class:"custom-select col-xs-4 col-sm-2",options:g,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{modelValue:x.category_id,"onUpdate:modelValue":[S[9]||(S[9]=R=>x.category_id=R),V],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(B),"map-options":"",dense:"","emit-value":"",onFilter:a(U),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),E.$can("admin.product:view-supplier")?(c(),D(ie,{key:0,modelValue:x.supplier_id,"onUpdate:modelValue":[S[10]||(S[10]=R=>x.supplier_id=R),V],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(w),"map-options":"",dense:"","emit-value":"",onFilter:a(O),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":S[11]||(S[11]=R=>x.search=R),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},tp=Object.freeze(Object.defineProperty({__proto__:null,default:ep},Symbol.toStringTag,{value:"Module"})),ap={class:"q-gutter-sm"},lp={class:"col col-md-8 q-pa-xs"},op={class:"col-12 col-md-6"},np={class:"col-12 col-md-6"},sp={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},rp={class:"q-gutter-sm"},ml="Kirim Daftar Harga",ip={__name:"SendPriceList",setup(u){const n=be(),d=C(""),o=C(null),s=G(()=>{var O;const w=new Map;return(O=n.props.products)==null||O.forEach(T=>{w.set(T.id,T)}),w}),r=G(()=>{var O;const w=new Map;return(O=n.props.customers)==null||O.filter(T=>T.phone&&T.phone.trim()!=="").forEach(T=>{w.set(T.id,T)}),w}),v=G(()=>{var w;return((w=n.props.customers)==null?void 0:w.map(O=>({value:O.id,label:O.name})))||[]}),g=G(()=>{var w;return((w=n.props.products)==null?void 0:w.map(O=>({value:O.id,label:`${O.name}`})))||[]}),p=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],m=C(g.value),f=C(v.value),_=Me({price_types:[],products:[],customers:[]});_.transform(w=>({customers:w.customers.map(O=>O.value),message:d.value}));const y=w=>w?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(w):"Rp. 0",x=w=>{const O=p.find(T=>T.value===w);return O?O.label:w},P=()=>{if(o.value){const w=o.value.$el.querySelector("textarea");if(w){w.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(O){console.error("Gagal menyalin teks ke clipboard:",O)}}}},$=G(()=>{var O,T;if(((O=_.products)==null?void 0:O.length)===0||((T=_.price_types)==null?void 0:T.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let w=`*DAFTAR HARGA TERBARU*
`;return w+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,w+=`------------------------------

`,(_.products||[]).forEach(z=>{const E=s.value.get(z.value);E&&(w+=`*${E.name}*
`,(_.price_types||[]).forEach(S=>{const F=x(S),Q=E[S],R=E.uom||"pcs";Q!=null&&Q>0&&(w+=`- ${F}: *${y(Q)}* / ${R}
`)}),w+=`
`)}),w+=`------------------------------
`,w+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",w});Ue($,w=>{d.value=w},{immediate:!0});const j=G(()=>(_.customers||[]).map(w=>r.value.get(w.value)).filter(w=>w&&w.phone)),N=w=>{const O=d.value;let T=w.startsWith("0")?"62"+w.substring(1):w;T=T.replace(/[^0-9]/g,"");const z=encodeURIComponent(O);return`https://wa.me/${T}?text=${z}`},V=(w,O)=>{if(w===""){O(()=>{m.value=g.value});return}O(()=>{const T=w.toLowerCase();m.value=g.value.filter(z=>z.label.toLowerCase().indexOf(T)>-1)})},B=(w,O)=>{if(w===""){O(()=>{f.value=v.value});return}O(()=>{const T=w.toLowerCase();f.value=v.value.filter(z=>z.label.toLowerCase().indexOf(T)>-1)})},U=()=>{var w,O,T;if(((w=_.price_types)==null?void 0:w.length)===0||((O=_.products)==null?void 0:O.length)===0||((T=_.customers)==null?void 0:T.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}_.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{je()},onFinish:()=>{_.clearErrors()}})};return(w,O)=>{const T=J("i-head"),z=J("authenticated-layout");return c(),h(Y,null,[e(T,{title:ml}),e(z,{"show-drawer-button":!0},{title:l(()=>[b(i(ml))]),"left-button":l(()=>[t("div",ap,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:O[0]||(O[0]=E=>w.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",lp,[e(Be,{class:"row q-col-gutter-xs",onSubmit:X(U,["prevent"]),onValidationError:a(je)},{default:l(()=>[t("div",op,[e(ce,{square:"",flat:"",bordered:"",class:"col full-width"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[O[10]||(O[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),O[11]||(O[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ie,{modelValue:a(_).products,"onUpdate:modelValue":O[1]||(O[1]=E=>a(_).products=E),options:m.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(_).errors.products,"error-message":a(_).errors.products,loading:a(_).processing,"use-input":"",onFilter:V,onClear:O[2]||(O[2]=E=>a(_).products=[]),"input-debounce":"0"},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(M,{class:"text-grey"},{default:l(()=>O[8]||(O[8]=[b(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ie,{modelValue:a(_).price_types,"onUpdate:modelValue":O[3]||(O[3]=E=>a(_).price_types=E),options:p,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!a(_).errors.price_types,"error-message":a(_).errors.price_types,loading:a(_).processing,multiple:"","use-chips":"",clearable:"",onClear:O[4]||(O[4]=E=>a(_).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(ie,{modelValue:a(_).customers,"onUpdate:modelValue":O[5]||(O[5]=E=>a(_).customers=E),options:f.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(_).errors.customers,"error-message":a(_).errors.customers,loading:a(_).processing,"use-input":"",onFilter:B,onClear:O[6]||(O[6]=E=>a(_).customers=[]),"input-debounce":"0"},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(M,{class:"text-grey"},{default:l(()=>O[9]||(O[9]=[b(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>{var E,S,F;return[e(A,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:a(_).processing||((E=a(_).products)==null?void 0:E.length)===0||((S=a(_).customers)==null?void 0:S.length)===0||((F=a(_).price_types)==null?void 0:F.length)===0,loading:a(_).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",np,[e(ce,{square:"",flat:"",bordered:"",class:"col full-width"},{default:l(()=>[e(le,null,{default:l(()=>[t("div",sp,[O[12]||(O[12]=b(" Pratinjau Pesan (Teks Biasa) ")),e(A,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:P,disable:d.value.length===0},null,8,["disable"])]),e(oe,{modelValue:d.value,"onUpdate:modelValue":O[7]||(O[7]=E=>d.value=E),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),j.value.length>0?(c(),D(le,{key:0,class:"q-pt-none"},{default:l(()=>[O[14]||(O[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",rp,[(c(!0),h(Y,null,Ke(j.value,E=>(c(),D(A,{key:E.id,label:`Kirim ke ${E.name}`,href:N(E.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(a(_).products.length>0&&a(_).price_types.length>0)},{default:l(()=>[E.phone?k("",!0):(c(),D(Kt,{key:0},{default:l(()=>O[13]||(O[13]=[b(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),O[15]||(O[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},dp=Object.freeze(Object.defineProperty({__proto__:null,default:ip},Symbol.toStringTag,{value:"Module"})),up={class:"q-gutter-sm"},mp={class:"q-pa-xs"},cp={class:"col-12"},pp={class:"col-12"},fp={class:"q-gutter-xs"},cl="Kirim Daftar Harga",gp={__name:"SendPriceList2",setup(u){const n=be(),d=C(""),o=G(()=>{var w;const U=new Map;return(w=n.props.products)==null||w.forEach(O=>{U.set(O.id,O)}),U}),s=G(()=>{var w;const U=new Map;return(w=n.props.customers)==null||w.forEach(O=>{U.set(O.id,O)}),U}),r=G(()=>{var U;return((U=n.props.customers)==null?void 0:U.map(w=>({value:w.id,label:w.name})))||[]}),v=G(()=>{var U;return((U=n.props.products)==null?void 0:U.map(w=>({value:w.id,label:`${w.name} (${w.sku||w.code||"ID: "+w.id})`})))||[]}),g=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],p=C(v.value),m=C(r.value),f=Me({price_types:[],products:[],customers:[]});f.transform(U=>({...U,products:U.products.map(w=>w.value),customers:U.customers.map(w=>w.value)}));const _=U=>U?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(U):"Rp. 0",y=U=>{const w=g.find(O=>O.value===U);return w?w.label:U},x=G(()=>{if(f.products.length===0||f.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let U=`Daftar Harga Terbaru
`;return U+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,U+=`------------------------------

`,f.products.forEach(w=>{const O=o.value.get(w.value);O&&(U+=`*${O.name}*
`,f.price_types.forEach(T=>{const z=y(T),E=O[T],S=O.unit||"pcs";E!=null&&E!=0&&(U+=`- ${z}: ${_(E)} / ${S}
`)}),U+=`
`)}),U+=`------------------------------
`,U+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",U});Ue(x,U=>{d.value=U},{immediate:!0});const P=G(()=>f.customers.map(U=>s.value.get(U.value)).filter(U=>U&&U.phone_number)),$=U=>{const w=d.value;let O=U.startsWith("0")?"62"+U.substring(1):U;O=O.replace(/[^0-9]/g,"");const T=encodeURIComponent(w);return`https://wa.me/${O}?text=${T}`},j=(U,w)=>{if(U===""){w(()=>{p.value=v.value});return}w(()=>{const O=U.toLowerCase();p.value=v.value.filter(T=>T.label.toLowerCase().indexOf(O)>-1)})},N=(U,w)=>{if(U===""){w(()=>{m.value=r.value});return}w(()=>{const O=U.toLowerCase();m.value=r.value.filter(T=>T.label.toLowerCase().indexOf(O)>-1)})},V=()=>{console.log("Scrolling to first error field...")},B=()=>{if(f.price_types.length===0||f.products.length===0||f.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}f.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{V()},onFinish:()=>{f.clearErrors()}})};return(U,w)=>{const O=J("i-head"),T=J("authenticated-layout");return c(),h(Y,null,[e(O,{title:cl}),e(T,{"show-drawer-button":!0},{title:l(()=>[b(i(cl))]),"left-button":l(()=>[t("div",up,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:w[0]||(w[0]=z=>U.$goBack())})])]),default:l(()=>[t("div",mp,[e(Be,{class:"row q-col-gutter-md",onSubmit:X(B,["prevent"]),onValidationError:V},{default:l(()=>[t("div",cp,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[w[8]||(w[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),w[9]||(w[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ie,{modelValue:a(f).products,"onUpdate:modelValue":w[1]||(w[1]=z=>a(f).products=z),options:p.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(f).errors.products,"error-message":a(f).errors.products,loading:a(f).processing,"use-input":"",onFilter:j,"input-debounce":"0"},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(M,{class:"text-grey"},{default:l(()=>w[6]||(w[6]=[b(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ie,{modelValue:a(f).price_types,"onUpdate:modelValue":w[2]||(w[2]=z=>a(f).price_types=z),options:g,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!a(f).errors.price_types,"error-message":a(f).errors.price_types,loading:a(f).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(ie,{modelValue:a(f).customers,"onUpdate:modelValue":w[3]||(w[3]=z=>a(f).customers=z),options:m.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(f).errors.customers,"error-message":a(f).errors.customers,loading:a(f).processing,"use-input":"",onFilter:N,"input-debounce":"0"},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(M,{class:"text-grey"},{default:l(()=>w[7]||(w[7]=[b(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:a(f).processing||a(f).products.length===0||a(f).customers.length===0||a(f).price_types.length===0,loading:a(f).processing},null,8,["disable","loading"]),e(A,{icon:"cancel",label:"Batal",disable:a(f).processing,onClick:w[4]||(w[4]=z=>U.$goBack())},null,8,["disable"])]),_:1}),U.$page.props.flash.success?(c(),D(jt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[b(i(U.$page.props.flash.success),1)]),_:1})):k("",!0),U.$page.props.flash.error?(c(),D(jt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[b(i(U.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",pp,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[w[10]||(w[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(oe,{modelValue:d.value,"onUpdate:modelValue":w[5]||(w[5]=z=>d.value=z),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),w[11]||(w[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),P.value.length>0?(c(),D(le,{key:0},{default:l(()=>[w[13]||(w[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",fp,[(c(!0),h(Y,null,Ke(P.value,z=>(c(),D(A,{key:z.id,label:`Kirim ke ${z.label}`,href:$(z.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:l(()=>[z.phone_number?k("",!0):(c(),D(Kt,{key:0},{default:l(()=>w[12]||(w[12]=[b(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href"]))),128))]),w[14]||(w[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},bp=Object.freeze(Object.defineProperty({__proto__:null,default:gp},Symbol.toStringTag,{value:"Module"})),vp={class:"column"},yp={class:"bg-grey-2 q-pa-xs"},_p={class:"text-subtitle1 text-bold text-grey-10"},kp={class:"col-12 col-sm-6"},wp={class:"full-width"},hp={key:1},$p={key:0},xp={key:1},Sp={class:"col-12 col-sm-6",align:"left"},Vp={class:"full-width"};const qp={key:1},Cp={class:"full-width",style:{"border-collapse":"collapse"}},Tp={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Pp={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Op={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Rp={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Dp={key:0},Ip={class:"col-12 col-sm-6"},Ap={class:"text-body2 text-grey-7 text-italic"},Up={class:"col-12 col-sm-6"},Ep={class:"row justify-end q-gutter-y-xs"},jp={class:"col-12 row justify-between"},Np={class:"text-subtitle2 text-bold"},so={__name:"InvoiceTab",props:{data:Object},setup(u){const n=u;return(d,o)=>{const s=J("i-link");return c(),h("div",vp,[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",yp,[t("div",_p," INVOICE #"+i(n.data.formatted_id),1)])]),_:1}),e(tt),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",kp,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",wp,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.supplier?(c(),D(s,{key:0,href:d.route("admin.supplier.detail",{id:n.data.supplier_id})},{default:l(()=>[e(q,{class:"inline-icon",name:"person"}),b(" "+i(n.data.supplier_name),1)]),_:1},8,["href"])):(c(),h("div",hp,[e(q,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pemasok Umum "))]))])]),n.data.supplier_phone?(c(),h("tr",$p,[t("td",null,[e(q,{class:"inline-icon",name:"phone"}),b(" "+i(n.data.supplier_phone),1)])])):k("",!0),n.data.supplier_address?(c(),h("tr",xp,[t("td",null,[e(q,{class:"inline-icon",name:"home_pin"}),b(" "+i(n.data.supplier_address),1)])])):k("",!0)])])]),t("div",Sp,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",Vp,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(fe)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(d.$CONSTANTS.PURCHASE_ORDER_STATUSES[n.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[n.data.payment_status]),1)]),k("",!0),n.data.due_date?(c(),h("tr",qp,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(Jt)(n.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(tt),e(le,{class:"q-pa-sm"},{default:l(()=>[t("table",Cp,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(c(!0),h(Y,null,Ke(n.data.details,r=>(c(),h("tr",{key:r.id},[t("td",Tp,[e(s,{href:d.route("admin.product.detail",{id:r.product_id})},{default:l(()=>[b(i(r.product_name),1)]),_:2},1032,["href"])]),t("td",Pp,i(r.quantity),1),t("td",null,i(r.product_uom),1),t("td",Op,i(a(K)(r.cost)),1),t("td",Rp,i(a(K)(r.subtotal_cost)),1)]))),128)),n.data.details.length==0?(c(),h("tr",Dp,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(tt),e(le,{class:"row",align:"left"},{default:l(()=>[t("div",Ip,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Ap,i(n.data.notes?n.data.notes:"-"),1)]),t("div",Up,[t("div",Ep,[t("div",jp,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Np,i(a(K)(n.data.grand_total)),1)])])])]),_:1})])}}},Mp=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"})),Bp={key:0,class:"text-center q-mb-md text-grey-8"},zp={class:"text-subtitle2 text-weight-medium"},Fp={class:"text-h5 text-center text-primary q-pb-md"},Lp={class:"text-center q-mt-md"},Hp={key:0,class:"text-h6 text-negative text-weight-bold"},Kp={key:1,class:"text-h6 text-green-8 text-weight-bold"},Yp={key:2,class:"text-h6 text-positive text-weight-bold"},ro={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,s=be(),r=C(!1),v=C({method:null,amount:d.total,notes:null}),g=s.props.data.supplier,p=G(()=>[...s.props.accounts.map($=>({label:$.type=="bank"?$.name+" - "+$.number:$.name,value:$.id}))]),m=G(()=>d.total-(v.value.amount||0)),f=G(()=>v.value.method&&typeof v.value.amount=="number"&&v.value.amount>0),_=G(()=>v.value.method?(v.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),y=G(()=>f.value&&_.value===null),x=()=>{if(!y.value)return;r.value=!0;const $={total_paid:v.value.amount,payments:[{id:v.value.method,amount:v.value.amount}],notes:v.value.notes,remaining_debt:Math.max(0,d.total-(v.value.amount||0))};o("accepted",$),r.value=!1},P=()=>{v.value.amount=d.total,v.value.method=null,v.value.notes=null};return($,j)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":j[4]||(j[4]=N=>$.$emit("update:modelValue",N)),onBeforeShow:P},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>j[5]||(j[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[a(g)?(c(),h("div",Bp,[t("div",zp,[b(i(a(g).name)+" ",1),j[6]||(j[6]=t("br",null,null,-1)),b(" Saldo: Rp. "+i(a(K)(a(g).balance)),1)])])):k("",!0),t("div",Fp," Total: Rp. "+i(a(K)(u.total)),1),e(a(ie),{modelValue:v.value.method,"onUpdate:modelValue":j[0]||(j[0]=N=>v.value.method=N),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:r.value,rules:[N=>!!N||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Ee,{modelValue:v.value.amount,"onUpdate:modelValue":j[1]||(j[1]=N=>v.value.amount=N),label:"Jumlah Uang",outlined:!0,dense:"",disable:r.value,class:"q-mb-md",error:!y.value,"error-message":_.value},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:v.value.notes,"onUpdate:modelValue":j[2]||(j[2]=N=>v.value.notes=N),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:r.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Lp,[m.value>0?(c(),h("div",Hp," Sisa Tagihan: Rp. "+i(a(K)(m.value)),1)):m.value<0?(c(),h("div",Kp," Kembalian: Rp. "+i(a(K)(Math.abs(m.value))),1)):(c(),h("div",Yp," Tagihan Terbayar "))])]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(A,{flat:"",label:"Batal",color:"grey",onClick:j[3]||(j[3]=N=>$.$emit("update:modelValue",!1))}),e(A,{label:"Bayar",color:"positive",onClick:x,disable:r.value||!y.value,loading:r.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Wp=Object.freeze(Object.defineProperty({__proto__:null,default:ro},Symbol.toStringTag,{value:"Module"})),Qp={class:"column"},Jp={class:"row"},Gp={class:"full-width",style:{"border-collapse":"collapse"}},Xp={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Zp={class:"row items-center q-gutter-x-sm"},ef={class:"text-weight-bold"},tf={class:"row items-center q-gutter-x-sm q-mt-xs"},af={class:"text-caption text-grey-6"},lf={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},of={class:"text-caption text-grey-6"},nf={class:"q-mt-xs"},sf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},rf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},df={key:0},uf={class:"text-right q-pa-sm"},mf={class:"text-right q-pa-sm"},io={__name:"PaymentTab",props:{data:Object},setup(u){const n=u,d=G(()=>n.data.grand_total-n.data.total_paid),o=xe(),s=C(!1),r=()=>{s.value=!0},v=async p=>{const m={order_id:n.data.id,payments:p.payments,notes:p.notes};o.loading.show({message:"Memproses pembayaran..."});try{const f=await Xe.post(route("admin.purchase-order.add-payment"),m);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),s.value=!1,Z.visit(route("admin.purchase-order.detail",{id:n.data.id})+"?tab=payment")}catch(f){let _="Gagal memproses pembayaran.";f.response&&f.response.data&&f.response.data.message?_=f.response.data.message:f.message&&(_=f.message),o.notify({message:_,color:"negative",icon:"error"})}finally{o.loading.hide()}},g=p=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Xe.post(route("admin.purchase-order.delete-payment",{id:p.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Z.visit(route("admin.purchase-order.detail",{id:n.data.id})+"?tab=payment")}catch(m){let f="Gagal menghapus pembayaran.";m.response&&m.response.data&&m.response.data.message?f=m.response.data.message:m.message&&(f=m.message),o.notify({message:f,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(p,m)=>(c(),h(Y,null,[t("div",Qp,[e(tt),e(le,{class:"q-pa-sm"},{default:l(()=>[t("div",Jp,[p.$can("admin.purchase-order.add-payment")&&d.value>0?(c(),D(A,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=X(f=>r(),["stop"]))})):k("",!0)]),t("table",Gp,[m[7]||(m[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(c(!0),h(Y,null,Ke(n.data.payments,f=>(c(),h("tr",{key:f.id},[t("td",Xp,[t("div",Zp,[e(q,{name:"tag",size:"xs",color:"grey-7"}),t("span",ef,i(f.formatted_id),1)]),t("div",tf,[e(q,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",af,i(a(fe)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(c(),h("div",lf,[e(q,{name:"wallet",size:"xs",color:"grey-7"}),t("span",of,i(f.account.name),1)])):k("",!0),t("div",nf,[e(dt,{label:p.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",sf,i(a(K)(f.amount)),1),t("td",rf,[p.$can("admin.purchase-order.delete-payment")&&n.data.supplier_id?(c(),D(A,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>g(f)},null,8,["onClick"])):k("",!0)])]))),128)),n.data.payments.length==0?(c(),h("tr",df,m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",uf,i(a(K)(n.data.total_paid)),1),m[4]||(m[4]=t("th",null,null,-1))]),t("tr",null,[m[5]||(m[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Tagihan",-1)),t("th",mf,i(a(K)(d.value)),1),m[6]||(m[6]=t("td",null,null,-1))])])])]),_:1})]),e(ro,{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=f=>s.value=f),total:d.value,customer:n.data.customer,onAccepted:v},null,8,["modelValue","total","customer"])],64))}},cf=Object.freeze(Object.defineProperty({__proto__:null,default:io},Symbol.toStringTag,{value:"Module"})),pf={class:"q-gutter-sm"},ff={class:"col col-lg-6 q-pa-xs",align:"center"},pl="Rincian Pembelian",gf={__name:"Detail",setup(u){const n=new URLSearchParams(window.location.search),o=be().props.data,s=C(n.get("preview")||!1),v=C(n.get("tab")||"invoice"),g=()=>{window.print()};return(p,m)=>{const f=J("i-head"),_=J("authenticated-layout");return c(),h(Y,null,[e(f,{title:pl}),e(_,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,i(pl))])]),"left-button":l(()=>[t("div",pf,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>p.$goBack())})])]),"right-button":l(()=>[e(A,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>g())}),s.value?k("",!0):(c(),D(A,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[2]||(m[2]=y=>a(Z).get(p.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Ve,{class:"row justify-center print-visible"},{default:l(()=>[t("div",ff,[e(ce,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Dt,{modelValue:v.value,"onUpdate:modelValue":m[3]||(m[3]=y=>v.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(Ze,{name:"invoice",label:"Invoice"}),s.value?k("",!0):(c(),D(Ze,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(tt),e(It,{modelValue:v.value,"onUpdate:modelValue":m[4]||(m[4]=y=>v.value=y),animated:""},{default:l(()=>[e(et,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(so,{data:a(o)},null,8,["data"])]),_:1}),e(et,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(io,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},bf=vt(gf,[["__scopeId","data-v-ef1ae89c"]]),vf=Object.freeze(Object.defineProperty({__proto__:null,default:bf},Symbol.toStringTag,{value:"Module"})),yf={class:"text-weight-medium wrap-column"},_f={class:"text-caption text-grey-6 elipsis"},kf={class:"column items-end"},wf={class:"text-caption text-grey-6 text-italic"},uo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(u){const n=xe(),d=We(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(s,r)=>(c(),D(Te,{dense:"",rows:u.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:ze({height:a(d)})},{header:l(v=>[e(Ce,{props:v,class:"bg-grey-4"},{default:l(()=>[(c(!0),h(Y,null,Ke(v.cols,g=>(c(),D(sa,{key:g.name,props:v,class:"text-weight-bold text-grey-8"},{default:l(()=>[b(i(g.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(v=>[e(Ce,{props:v,class:"hover-highlight"},{default:l(()=>[e(H,{key:"name",props:v,class:"text-left"},{default:l(()=>[t("div",yf,i(v.row.product_name),1),t("div",_f,i(v.row.product_barcode),1),v.row.notes?(c(),D(we,{key:0,text:v.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"subtotal",props:v,class:"text-right"},{default:l(()=>[t("div",kf,[t("div",null,i(a(K)(v.row.subtotal_cost)),1),t("div",wf,i(a(K)(v.row.quantity))+" x Rp. "+i(a(K)(v.row.cost)),1)])]),_:2},1032,["props"]),e(H,{key:"action",props:v,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(A,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:g=>s.$emit("edit-item",v.row),disable:u.isProcessing},null,8,["onClick","disable"]),e(A,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:g=>s.$emit("remove-item",v.row),disable:u.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},hf=Object.freeze(Object.defineProperty({__proto__:null,default:uo},Symbol.toStringTag,{value:"Module"})),mo=wt({name:"QBtnToggle",props:{...Al,modelValue:{required:!0},options:{type:Array,required:!0,validator:u=>u.every(n=>("label"in n||"icon"in n||"slot"in n)&&"value"in n)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(u,{slots:n,emit:d}){const o=G(()=>u.options.find(y=>y.value===u.modelValue)!==void 0),s=G(()=>({type:"hidden",name:u.name,value:u.modelValue})),r=Vn(s),v=G(()=>xn(u)),g=G(()=>({rounded:u.rounded,dense:u.dense,...v.value})),p=G(()=>u.options.map((y,x)=>{const{attrs:P,value:$,slot:j,...N}=y;return{slot:j,props:{key:x,"aria-pressed":$===u.modelValue?"true":"false",...P,...N,...g.value,disable:u.disable===!0||N.disable===!0,color:$===u.modelValue?f(N,"toggleColor"):f(N,"color"),textColor:$===u.modelValue?f(N,"toggleTextColor"):f(N,"textColor"),noCaps:f(N,"noCaps")===!0,noWrap:f(N,"noWrap")===!0,size:f(N,"size"),padding:f(N,"padding"),ripple:f(N,"ripple"),stack:f(N,"stack")===!0,stretch:f(N,"stretch")===!0,onClick(V){m($,y,V)}}}}));function m(y,x,P){u.readonly!==!0&&(u.modelValue===y?u.clearable===!0&&(d("update:modelValue",null,null),d("clear")):d("update:modelValue",y,x),d("click",P))}function f(y,x){return y[x]===void 0?u[x]:y[x]}function _(){const y=p.value.map(x=>ke(A,x.props,x.slot!==void 0?n[x.slot]:void 0));return u.name!==void 0&&u.disable!==!0&&o.value===!0&&r(y,"push"),Dl(n.default,y)}return()=>ke(Sn,{class:"q-btn-toggle",...v.value,rounded:u.rounded,stretch:u.stretch,glossy:u.glossy,spread:u.spread},_)}}),$f={key:0,class:"text-center q-mb-md text-grey-8"},xf={class:"text-subtitle2 text-weight-medium"},Sf={class:"text-h5 text-center text-primary q-pb-md"},Vf={class:"q-mb-md flex flex-center"},qf={key:1},Cf={class:"col-6"},Tf={class:"col-6"},Pf={class:"row"},Of={class:"text-center q-mt-md"},Rf={key:0,class:"text-h6 text-negative text-weight-bold"},Df={key:1,class:"text-h6 text-green-8 text-weight-bold"},If={key:2,class:"text-h6 text-positive text-weight-bold"},Af={key:2},Uf={class:"text-h6 text-negative text-center"},Ef={key:3},co={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,s=be(),r=C(!1),v=C("payment"),g=C(new Date),p=C(null),m=Pe([]),f=G(()=>m.every(z=>z.id&&typeof z.amount=="number"&&z.amount>0)),_=G(()=>s.props.accounts.map(z=>({label:z.name,value:z.id}))),y=G(()=>m.reduce((z,E)=>z+(E.amount||0),0)),x=G(()=>d.total-y.value),P=G(()=>{if(!d.supplier)return!0;const z=m.find(S=>S.id==="wallet");return(z?z.amount:0)<=d.supplier.balance}),$=new Date,j=rt.addToDate(new Date,{days:30}),N=G(()=>[z=>!!z||"Tanggal jatuh tempo harus diisi",z=>rt.isBetweenDates(z,$,j,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),V=G(()=>{if(v.value==="debt")return!!d.supplier&&N.value.every(F=>F(g.value)===!0);const z=m.some(F=>(F.amount||0)>0),E=m.every(F=>(F.amount||0)>=0),S=x.value<=0;return f.value&&z&&E&&S}),B=()=>{m.length<3&&m.push({id:null,amount:0})},U=z=>{if(m.length>1){const E=m.findIndex(S=>S.id===z);E!==-1&&m.splice(E,1)}},w=z=>{v.value=z,g.value=new Date,m.splice(0,m.length),z==="payment"&&_.value.length>0&&(m.splice(0,m.length,{id:_.value[0].value,amount:d.total}),$t(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},O=()=>{if(!V.value)return;r.value=!0;let z={total:d.total,is_debt:v.value==="debt"};if(v.value==="debt")z.due_date=rt.formatDate(g.value,"YYYY-MM-DD"),z.payments=[];else{const E=y.value,S=E>d.total?E-d.total:0,F=x.value>0?x.value:0;z.payments=m,z.remaining_debt=F,z.change=S}o("accepted",z),r.value=!1},T=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}w("payment")};return(z,E)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":E[3]||(E[3]=S=>z.$emit("update:modelValue",S)),onBeforeShow:T},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>E[4]||(E[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[u.supplier?(c(),h("div",$f,[t("div",xf,[b(" Nama: "+i(u.supplier.name),1),E[5]||(E[5]=t("br",null,null,-1)),b(" Utang / Piutang: Rp. "+i(a(K)(u.supplier.balance)),1)])])):k("",!0),t("div",Sf," Total: Rp. "+i(a(K)(u.total)),1),t("div",Vf,[e(a(mo),{modelValue:v.value,"onUpdate:modelValue":[E[0]||(E[0]=S=>v.value=S),w],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!u.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),v.value==="payment"?(c(),h("div",qf,[(c(!0),h(Y,null,Ke(m,(S,F)=>(c(),h("div",{key:F,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Cf,[e(a(ie),{modelValue:S.id,"onUpdate:modelValue":Q=>S.id=Q,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:r.value,"hide-bottom-space":"",rules:[Q=>!!Q||"Akun harus dipilih"],error:!S.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Tf,[e(Ee,{modelValue:S.amount,"onUpdate:modelValue":Q=>S.amount=Q,label:"Jumlah",outlined:!0,dense:"",disable:r.value,error:!P.value,"error-message":P.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:F===0?"firstPaymentInputRef":null},Le({_:2},[m.length>1?{name:"append",fn:l(()=>[e(q,{size:"xs",name:"close",class:"cursor-pointer",onClick:Q=>U(F)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Pf,[e(A,{disable:!(m.length<3&&x.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:B,size:"sm"},null,8,["disable"])]),t("div",Of,[x.value>0?(c(),h("div",Rf," Sisa Tagihan: Rp. "+i(a(K)(x.value)),1)):x.value<0?(c(),h("div",Df," Kembalian: Rp. "+i(a(K)(Math.abs(x.value))),1)):(c(),h("div",If," Tagihan Terbayar "))])])):v.value==="debt"&&u.supplier?(c(),h("div",Af,[e(Va,{outlined:"",modelValue:g.value,"onUpdate:modelValue":E[1]||(E[1]=S=>g.value=S),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a($),"max-date":a(j),rules:N.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Uf," Total Utang: Rp. "+i(a(K)(u.total)),1)])):v.value==="debt"&&!u.supplier?(c(),h("div",Ef,E[6]||(E[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(A,{flat:"",label:"Batal",color:"grey",onClick:E[2]||(E[2]=S=>z.$emit("update:modelValue",!1))}),e(A,{label:v.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:O,disable:r.value||!V.value,loading:r.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},jf=Object.freeze(Object.defineProperty({__proto__:null,default:co},Symbol.toStringTag,{value:"Module"})),Nf={class:"row items-center no-wrap"},Mf={class:"col-auto"},Bf={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zf={key:0},po={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1}},emits:["update:modelValue","product-selected"],setup(u,{emit:n}){const d=xe(),o=u,s=n,r=C(null),v=C([]),g=C(!0),p=C(-1),m=Pe({search:"",status:"active",...Re()}),f=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:"Harga (Rp)",field:"price_1",align:"right"},{name:"price_2",label:"Harga (Rp)",field:"price_2",align:"right"},{name:"price_3",label:"Harga (Rp)",field:"price_3",align:"right"}],y=G(()=>{if(o.showCost)return _;const V=_.filter(B=>B.name!=="cost");return d.screen.gt.sm?V:V.filter(B=>B.name==="name"||B.name==="stock")});$e(()=>{x()});const x=()=>{o.modelValue!==!1&&P()},P=(V=null)=>{g.value=!0,p.value=-1,De({pagination:f,filter:m,props:V,rows:v,url:route("admin.product.data"),loading:g,tableRef:r})},$=()=>{x()},j=V=>{s("product-selected",V),setTimeout(()=>{s("update:modelValue",!1)},100)},N=V=>{if(!o.modelValue)return;const B=v.value.length;B!==0&&(V.key==="ArrowDown"?(V.preventDefault(),p.value=(p.value+1)%B):V.key==="ArrowUp"?(V.preventDefault(),p.value=(p.value-1+B)%B):V.key==="Enter"&&p.value!==-1&&(V.preventDefault(),j(v.value[p.value])))};return Ue(()=>o.modelValue,(V,B)=>{B===!0&&V===!1&&(m.search=""),V===!0&&P()}),(V,B)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":B[3]||(B[3]=U=>V.$emit("update:modelValue",U)),maximized:a(d).screen.lt.sm},{default:l(()=>[e(ce,{class:"column fit",tabindex:"0",onKeydown:N,ref:"cardRef"},{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Nf,[B[4]||(B[4]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",Mf,[e(A,{flat:"",round:"",size:"sm",icon:"close",onClick:B[0]||(B[0]=U=>V.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:he(["q-py-sm",a(d).screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(oe,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":[B[1]||(B[1]=U=>m.search=U),$],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["class"]),e(le,{class:he(["q-py-xs col",a(d).screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(Te,{ref_key:"tableRef",ref:r,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:f.value,"onUpdate:pagination":B[2]||(B[2]=U=>f.value=U),filter:m.search,loading:g.value,columns:y.value,rows:v.value,"rows-per-page-options":[10,25,50],onRequest:P,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":l(({icon:U,message:w,filter:O})=>[t("div",Bf,[t("span",null,i(w),1)])]),body:l(U=>[e(Ce,{tabindex:"0",props:U,class:he([{inactive:["stocked","raw_materials"].includes(U.row.type)&&U.row.stock==0,"selected-row":p.value===U.rowIndex},"cursor-pointer"]),onClick:w=>j(U.row),onKeydown:[Gt(X(w=>j(U.row),["prevent","stop"]),["enter"]),Gt(X(w=>j(U.row),["prevent"]),["space"])]},{default:l(()=>[e(H,{key:"name",props:U,class:"wrap-column"},{default:l(()=>[e(we,{text:U.row.name},null,8,["text"]),U.row.description?(c(),D(we,{key:0,text:U.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),a(d).screen.lt.md?(c(),h(Y,{key:1},[t("div",null," Stok: "+i(U.row.type=="stocked"?a(K)(U.row.stock)+" "+U.row.uom:"-"),1),u.showCost?(c(),h("div",zf," Modal: Rp. "+i(a(K)(U.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+i(a(K)(U.row.price_1)),1),t("div",null,"Harga 2: Rp. "+i(a(K)(U.row.price_1)),1),t("div",null,"Harga 3: Rp. "+i(a(K)(U.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"stock",props:U,class:"wrap-column text-right"},{default:l(()=>[b(i(U.row.type=="stocked"?a(K)(U.row.stock)+" "+U.row.uom:"-"),1)]),_:2},1032,["props"]),u.showCost?(c(),D(H,{key:"cost",props:U,class:"wrap-column text-right"},{default:l(()=>[b(i(a(K)(U.row.cost)),1)]),_:2},1032,["props"])):k("",!0),e(H,{key:"price_1",props:U,class:"wrap-column text-right"},{default:l(()=>[b(i(a(K)(U.row.price_1)),1)]),_:2},1032,["props"]),e(H,{key:"price_2",props:U,class:"wrap-column text-right"},{default:l(()=>[b(i(a(K)(U.row.price_2)),1)]),_:2},1032,["props"]),e(H,{key:"price_3",props:U,class:"wrap-column text-right"},{default:l(()=>[b(i(a(K)(U.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},Ff={class:"row items-center no-wrap"},Lf={class:"col-auto"},fo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,s=d,r=()=>{s("save")},v=G(()=>o.item.quantity*o.item.cost),g=_=>{_.stopPropagation(),_.preventDefault()},p=_=>{o.modelValue&&(_.key==="Enter"?(r(),g(_)):_.key==="Escape"&&(s("update:modelValue",!1),g(_)))};$e(()=>{window.addEventListener("keydown",p)}),Rt(()=>{window.removeEventListener("keydown",p)}),n({getCurrentItem:()=>o.item});const f=()=>{};return(_,y)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":y[6]||(y[6]=x=>_.$emit("update:modelValue",x)),onBeforeShow:f},{default:l(()=>[e(ce,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Ff,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Lf,[e(A,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=x=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(oe,{modelValue:u.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=x=>u.item.product_name=x),label:"Produk","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=x=>u.item.quantity=x),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.cost,"onUpdate:modelValue":y[3]||(y[3]=x=>u.item.cost=x),label:"Modal / Harga Beli","hide-bottom-space":"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:v.value,"onUpdate:modelValue":y[4]||(y[4]=x=>v.value=x),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(oe,{modelValue:u.item.notes,"onUpdate:modelValue":y[5]||(y[5]=x=>u.item.notes=x),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[te(e(A,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[me]]),te(e(A,{flat:"",label:"Simpan",color:"primary",onClick:r,disable:u.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Hf=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"}));function Kf(){const u=C(new Date);let n=null;const d=()=>{u.value=new Date};return $e(()=>{n=setInterval(d,1e3)}),Rt(()=>{n&&clearInterval(n)}),{currentDateTime:u}}const Yf={class:"text-grey-8"},go={__name:"DigitalClock",setup(u){const{currentDateTime:n}=Kf();return(d,o)=>(c(),h("div",Yf,i(a(fe)(a(n))),1))}},Wf={key:0,class:"q-select__selected-item"},Qf={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(u,{expose:n,emit:d}){const o=C(null),s=u,r=d,v=C([]);let g=null;const p=C(s.modelValue);$e(()=>{s.initialData&&(p.value=s.initialData)}),Ue(p,_=>{r("update:modelValue",_),r("supplierSelected",_)}),Ue(()=>s.modelValue,_=>{p.value=_}),n({focus:()=>{o.value&&o.value.focus()}});const f=(_,y)=>{if(_.length<s.minLength){y(()=>{v.value=[]});return}g&&clearTimeout(g),g=setTimeout(()=>{Xe.get(`/web-api/suppliers?q=${_}`).then(x=>{y(()=>{v.value=x.data.data})}).catch(x=>{console.error("Gagal mengambil data pemasok:",x),y(()=>{v.value=[]})})},100)};return(_,y)=>(c(),D(ie,{class:he(u.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=x=>p.value=x),"use-input":"","input-debounce":"0",label:u.label,options:v.value,onFilter:f,clearable:"",error:u.error,behavior:"menu","error-message":u.errorMessage,disable:u.disable,"hide-bottom-space":"",outlined:u.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(x=>[e(ae,jl(Nl(x.itemProps)),{default:l(()=>[e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>[b(i(x.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(x=>[x.opt?(c(),h("div",Wf,i(x.opt.name),1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Jf={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(u,{emit:n}){return(d,o)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>d.$emit("update:modelValue",s))},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(mt,{align:"center"},{default:l(()=>[te(e(A,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},bo=vt(Jf,[["__scopeId","data-v-a7905738"]]),Gf=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"}));function vo(u){const n=C(!1),d=()=>{const r=u.value||document.documentElement;r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen&&r.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},s=()=>{n.value?o():d()};return qn(()=>{const r=()=>{n.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",r),document.addEventListener("webkitfullscreenchange",r),document.addEventListener("mozfullscreenchange",r),document.addEventListener("MSFullscreenChange",r),()=>{document.removeEventListener("fullscreenchange",r),document.removeEventListener("webkitfullscreenchange",r),document.removeEventListener("mozfullscreenchange",r),document.removeEventListener("MSFullscreenChange",r)}}),{isFullscreen:n,requestFullscreen:d,exitFullscreen:o,toggleFullscreen:s}}const Xf={class:"row items-center no-wrap"},Zf={class:"col text-subtite text-bold text-grey-8"},eg={class:"col-auto"},yo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,s=d,r=()=>{s("save")},v=m=>{m.stopPropagation(),m.preventDefault()},g=m=>{o.modelValue&&(m.key==="Enter"?(r(),v(m)):m.key==="Escape"&&(s("update:modelValue",!1),v(m)))};return $e(()=>{window.addEventListener("keydown",g)}),Rt(()=>{window.removeEventListener("keydown",g)}),n({getCurrentItem:()=>o.item}),(m,f)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":f[4]||(f[4]=_=>m.$emit("update:modelValue",_))},{default:l(()=>[e(ce,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Xf,[t("div",Zf," Edit "+i(u.data.formatted_id),1),t("div",eg,[e(A,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(Yt,{modelValue:u.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=_=>u.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:u.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(oe,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status],"onUpdate:modelValue":f[2]||(f[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(oe,{modelValue:u.data.notes,"onUpdate:modelValue":f[3]||(f[3]=_=>u.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[te(e(A,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[me]]),te(e(A,{flat:"",label:"Simpan",color:"primary",onClick:r,disable:u.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},tg=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),ag={key:0},lg={style:{float:"right"}},og={key:1},ng={style:{float:"right"}},sg={key:2},rg={style:{float:"right"}},ig={key:3},dg={style:{float:"right"}},ug={style:{float:"right"}},mg={class:"q-gutter-sm"},cg={class:"q-my-md"},pg={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(u,{emit:n}){const d=C(null),o=()=>{var s;(s=d.value)==null||s.focus()};return(s,r)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":r[0]||(r[0]=v=>s.$emit("update:modelValue",v)),onBeforeShow:o,persistent:""},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>r[1]||(r[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:l(()=>[r[22]||(r[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[r[2]||(r[2]=t("td",null,"ID",-1)),r[3]||(r[3]=t("td",null,":",-1)),t("td",null,i(u.order.formatted_id),1)]),u.customer?(c(),h("tr",ag,[r[5]||(r[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),r[6]||(r[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(i(u.customer.name)+" ",1),r[4]||(r[4]=t("br",null,null,-1)),b(i(u.customer.code),1)])])):k("",!0),t("tr",null,[r[8]||(r[8]=t("td",null,"Total",-1)),r[9]||(r[9]=t("td",null,":",-1)),t("td",null,[r[7]||(r[7]=b(" Rp. ")),t("div",lg,i(a(K)(u.payment.total)),1)])]),u.payment.cash_amount?(c(),h("tr",og,[r[11]||(r[11]=t("td",null,"Tunai",-1)),r[12]||(r[12]=t("td",null,":",-1)),t("td",null,[r[10]||(r[10]=b(" Rp. ")),t("div",ng,i(a(K)(u.payment.cash_amount)),1)])])):k("",!0),u.payment.wallet_amount?(c(),h("tr",sg,[r[14]||(r[14]=t("td",null,"Wallet",-1)),r[15]||(r[15]=t("td",null,":",-1)),t("td",null,[r[13]||(r[13]=b(" Rp. ")),t("div",rg,i(a(K)(u.payment.wallet_amount)),1)])])):k("",!0),u.payment.remaining_debt?(c(),h("tr",ig,[r[17]||(r[17]=t("td",null,"Piutang",-1)),r[18]||(r[18]=t("td",null,":",-1)),t("td",null,[r[16]||(r[16]=b(" Rp. ")),t("span",dg,i(a(K)(u.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[r[20]||(r[20]=t("td",null,"Kembalian",-1)),r[21]||(r[21]=t("td",null,":",-1)),t("td",null,[r[19]||(r[19]=b(" Rp. ")),t("div",ug,i(a(K)(u.payment.change)),1)])])])])]),_:1}),e(mt,{align:"center"},{default:l(()=>[t("div",mg,[e(A,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(A,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",cg,[e(A,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},_o=vt(pg,[["__scopeId","data-v-15f5d36e"]]),fg=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),gg={class:"q-gutter-sm"},bg={class:"row items-center"},vg={class:"text-weight-bold"},yg={class:"row q-col-gutter-none full-width"},_g={class:"col-sm-6 col-12 col"},kg={class:"row full-width"},wg={class:"text-grey q-mt-xs q-ml-sm"},hg={class:"col-sm-6 col-12"},$g={class:"row q-ml-sm items-end"},xg={class:"row col grow"},Sg={class:"col-12 q-pa-sm column"},Vg={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},qg={key:0,class:"col"},Cg={class:"text-caption text-grey-6 q-mt-xs"},Tg={key:0,class:"text-caption text-grey-8 q-mt-xs"},Pg={class:"text-italic"},Og={key:1,class:"col"},Rg={class:"q-pa-sm q-pb-none text-grey-8"},Dg={class:"col"},Ig={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Ag={class:"text-h4 text-weight-bold"},Ug={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Eg={class:"col q-py-sm"},jg={class:"q-py-sm"},Ng={__name:"Editor",setup(u){const n=xe(),d=be(),o=C(!0),s=C(null),r=C(null),v=C(null),g=C(!1),p=C(null),m=C(null),{isFullscreen:f,toggleFullscreen:_}=vo(m),y=d.props.data.formatted_id,x=C(d.props.data.supplier),P=C(null),$=C(""),j=C(!1),N=C(!1),V=C(!1),B=C(!1),U=C(!1),w=C(!1),O=C(null),T=Pe({id:d.props.data.id,formatted_id:d.props.data.formatted_id,supplier_id:d.props.data.supplier_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),z=G(()=>T.items.reduce((ve,L)=>ve+L.cost*L.quantity,0)),E=()=>{var ve;_(),f.value||(ve=p==null?void 0:p.value)==null||ve.hideDrawer()},S=ve=>isNaN(ve)||ve<=0?(kt("Kuantitas tidak valid.","top"),!1):!0,F=ve=>isNaN(ve)||ve<0?(kt("Harga tidak valid.","top"),!1):!0,Q=ve=>!ve||ve.length==0?(kt("Barcode tidak valid.","top"),!1):!0,R=ve=>{$.value.endsWith("*")?$.value+=ve.name:$.value=ve.name},I=async()=>{const ve=$.value.trim();if(ve.length===0){V.value=!0;return}const L=ve.split("*");let W=1,pe="",de=null;if(L.length===1)pe=L[0];else if(L.length<=3)W=parseInt(L[0]),pe=L[1],L.length===3&&(de=parseFloat(L[2]));else{kt("Input tidak valid.","top");return}if(pe.length===0){V.value=!0;return}!Q(pe)&&!S(W)&&!F(de)||(j.value=!0,await Xe.post(route("admin.purchase-order.add-item"),{order_id:T.id,product_code:pe,qty:W,cost:de,merge:o.value}).then(ge=>{const He=ge.data.data.item;let nt=-1;ge.data.data.mergeItem&&(nt=T.items.findIndex(_t=>_t.id===He.id)),nt===-1?T.items.push(He):T.items[nt]=He,$.value="",de!==null&&de!==parseFloat(He.cost)&&kt("Harga tidak dapat diubah!","top")}).catch(ge=>{var He,nt;gt((nt=(He=ge.response)==null?void 0:He.data)==null?void 0:nt.message,"top"),console.error("Gagal mengambil data produk:",ge)}),j.value=!1,$t(()=>{var ge;(ge=s.value)==null||ge.focus()}))},ee=ve=>{O.value=Object.create(ve),B.value=!0},se=ve=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ve.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{j.value=!0,Xe.post(route("admin.purchase-order.remove-item"),{id:ve.id}).then(()=>{const L=T.items.findIndex(W=>W.id===ve.id);L!==-1&&(T.items.splice(L,1)[0],bt("Item telah dihapus","top"))}).catch(L=>{var W,pe;gt(((pe=(W=L==null?void 0:L.response)==null?void 0:W.data)==null?void 0:pe.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{j.value=!1})})},ne=()=>{j.value=!0;const ve=r.value.getCurrentItem(),L={id:ve.id,qty:ve.quantity,cost:ve.cost};ve.notes&&(L.notes=ve.notes),Xe.post(route("admin.purchase-order.update-item"),L).then(W=>{const pe=W.data.data,de=T.items.findIndex(ge=>ge.id===pe.id);de!==-1&&(T.items[de]=pe,bt("Item telah diperbarui","top"))}).catch(W=>{var pe,de;gt(((de=(pe=W==null?void 0:W.response)==null?void 0:pe.data)==null?void 0:de.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(W)}).finally(()=>{j.value=!1})};$e(()=>{const ve=L=>{L.key==="F1"?(L.preventDefault(),g.value=!0):L.key==="F2"?(L.preventDefault(),v.value.focus()):L.key==="F3"?(L.preventDefault(),s.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"?(L.preventDefault(),N.value=!0):L.key==="F11"?(L.preventDefault(),E()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault()};document.addEventListener("keydown",ve),Rt(()=>{document.removeEventListener("keydown",ve)}),$t(()=>{var L;(L=p==null?void 0:p.value)==null||L.hideDrawer()})});const qe=async ve=>{x.value=ve,T.supplier_id=ve==null?void 0:ve.id,await Fe(),ve!=null&&ve.id?s.value.focus():v.value.focus()},Fe=async()=>{j.value=!0;const ve={id:T.id,supplier_id:T.supplier_id,datetime:la(T.datetime),notes:T.notes};await Xe.post(route("admin.purchase-order.update"),ve).then(L=>{const W=L.data.data.id;T.supplier_id=W.supplier_id}).catch(L=>{var W,pe;gt(((pe=(W=L==null?void 0:L.response)==null?void 0:W.data)==null?void 0:pe.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{j.value=!1})},ft=ve=>{if(T.items.length===0){bt("Item masih kosong","top");return}const L={id:T.id,...ve};j.value=!0,Xe.post(route("admin.purchase-order.close"),L).then(W=>{bt("Transaksi selesai"),Z.visit(route("admin.purchase-order.detail",{id:T.id}))}).catch(W=>{var pe,de;gt((de=(pe=W.response)==null?void 0:pe.data)==null?void 0:de.message),console.error(W)}).finally(()=>{j.value=!1})},pt=()=>{Nt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${T.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Xe.post(route("admin.purchase-order.cancel",{id:T.id}),{id:T.id}).then(()=>{bt("Transaksi telah dibatalkan."),Z.visit(route("admin.purchase-order.detail",{id:T.id}))}).catch(ve=>{var W,pe;const L=((pe=(W=ve.response)==null?void 0:W.data)==null?void 0:pe.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:L,color:"warning",position:"bottom"}),console.error(ve)})})},yt=()=>{window.open(route("admin.purchase-order.detail",{id:T.id})+"?preview=1","_blank")};return(ve,L)=>{const W=J("i-head"),pe=J("authenticated-layout");return c(),h(Y,null,[e(W,{title:a(y)},null,8,["title"]),e(pe,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:l(()=>[b(i(a(y)),1)]),"left-button":l(()=>[t("div",gg,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=de=>a(Z).get(ve.route("admin.purchase-order.index")))})])]),"right-button":l(()=>[t("div",bg,[a(n).screen.gt.sm?(c(),h(Y,{key:0},[t("div",vg,i(a(d).props.auth.user.username),1),L[22]||(L[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(go)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Ve,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(ce,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",yg,[t("div",_g,[t("div",kg,[e(Qf,{ref_key:"supplierAutocompleteRef",ref:v,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:x.value,"onUpdate:modelValue":L[2]||(L[2]=de=>x.value=de),label:"Pemasok",disable:j.value,onSupplierSelected:qe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",wg," Saldo: "+i(x.value?"Rp. "+a(K)(x.value?x.value.balance:0):"Tidak tersedia"),1)])]),t("div",hg,[e(oe,{ref_key:"userInputRef",ref:s,modelValue:$.value,"onUpdate:modelValue":L[5]||(L[5]=de=>$.value=de),onKeyup:L[6]||(L[6]=Gt(X(de=>I(),["prevent"]),["enter"])),loading:j.value,disable:j.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(q,{name:"search",onClick:L[3]||(L[3]=de=>V.value=!0),class:"cursor-pointer"})]),append:l(()=>{var de;return[((de=$.value)==null?void 0:de.length)>0?(c(),D(q,{key:0,name:"send",onClick:L[4]||(L[4]=ge=>I()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",$g,[e(Ct,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[7]||(L[7]=de=>o.value=de),label:"Gabungkan item",disable:j.value},null,8,["modelValue","disable"])])])]),t("div",xg,[t("div",Sg,[e(uo,{items:T.items,onUpdateQuantity:L[8]||(L[8]=({id:de,value:ge})=>ve.updateQuantity(de,ge)),onRemoveItem:se,onEditItem:ee,"is-processing":j.value},null,8,["items","is-processing"])])]),t("div",Vg,[a(n).screen.gt.sm?(c(),h("div",qg,[t("div",Cg,i(T.items.length)+" item(s) ",1),T.notes?(c(),h("div",Tg,[L[23]||(L[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Pg,[e(we,{text:T.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(n).screen.gt.sm?(c(),h("div",Og,[t("div",Rg,[t("div",null,"#: "+i(T.formatted_id),1),t("div",null,i(a(fe)(T.datetime)),1)])])):k("",!0),t("div",Dg,[t("div",Ig,[L[25]||(L[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Ag,[L[24]||(L[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+i(a(K)(z.value)),1)])])])]),t("div",Ug,[t("div",Eg,[e(A,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:L[9]||(L[9]=de=>N.value=!0),disable:!ve.$can("admin.purchase-order.close")||j.value||T.items.length===0||T.status!=="draft",loading:j.value},null,8,["disable","loading"])]),t("div",jg,[e(A,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[13]||(L[13]=X(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[te((c(),D(ae,{clickable:"",onClick:L[10]||(L[10]=X(de=>U.value=!0,["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>L[26]||(L[26]=[b("Edit Rincian")])),_:1})]),_:1})),[[re],[me]]),te((c(),D(ae,{clickable:"",onClick:L[11]||(L[11]=X(de=>yt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"preview"})]),_:1}),e(M,null,{default:l(()=>L[27]||(L[27]=[b("Pratinjau")])),_:1})]),_:1})),[[re],[me]]),te((c(),D(ae,{clickable:"",onClick:L[12]||(L[12]=X(de=>pt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"cancel",color:"negative"})]),_:1}),e(M,{class:"text-negative"},{default:l(()=>L[28]||(L[28]=[b(" Batalkan ")])),_:1})]),_:1})),[[re],[me]]),e(tt)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(fo,{ref_key:"itemEditorRef",ref:r,modelValue:B.value,"onUpdate:modelValue":L[14]||(L[14]=de=>B.value=de),item:O.value,onSave:L[15]||(L[15]=de=>ne()),"is-processing":j.value},null,8,["modelValue","item","is-processing"]),e(co,{modelValue:N.value,"onUpdate:modelValue":L[16]||(L[16]=de=>N.value=de),onAccepted:ft,form:T,supplier:x.value,total:z.value,accounts:a(d).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(po,{modelValue:V.value,"onUpdate:modelValue":L[17]||(L[17]=de=>V.value=de),"show-cost":!0,onProductSelected:R},null,8,["modelValue"]),e(yo,{modelValue:U.value,"onUpdate:modelValue":L[18]||(L[18]=de=>U.value=de),data:T,onSave:L[19]||(L[19]=de=>Fe()),"is-processing":j.value},null,8,["modelValue","data","is-processing"]),e(bo,{modelValue:g.value,"onUpdate:modelValue":L[20]||(L[20]=de=>g.value=de)},null,8,["modelValue"]),e(_o,{modelValue:w.value,"onUpdate:modelValue":L[21]||(L[21]=de=>w.value=de),order:T,supplier:x.value,total:z.value,payment:P.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},Mg=Object.freeze(Object.defineProperty({__proto__:null,default:Ng},Symbol.toStringTag,{value:"Module"})),Bg={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.PURCHASE_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,s)=>(c(),D(ua,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}},zg={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,s)=>(c(),D(ua,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}};const Fg={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Lg={class:"q-pa-xs"},Hg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Kg={key:0},Yg={key:1},Wg={key:0},Qg={key:0},Jg={key:1},Gg={class:"flex justify-end"},fl="Pembelian",Xg={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=Lt(),m=Ht(),f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Pt(p-2,p-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Ot()],y=[{value:"all",label:"Semua Status"},...at(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],x=[{value:"all",label:"Semua Status"},...at(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],P=[{value:"all",label:"Semua Status"},...at(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],$=Pe({search:"",year:p,month:m,status:"all",payment_status:"all",delivery_status:"all",...Re()}),j=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),N=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{T()});const V=S=>{if(S.status=="draft"){B(S);return}U(S)},B=S=>{Z.get(route("admin.purchase-order.edit",S.id))},U=S=>{Z.get(route("admin.purchase-order.detail",S.id))},w=S=>{Nt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${S.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Xe.post(route("admin.purchase-order.cancel",{id:S.id}),{id:S.id}).then(F=>{const Q=F.data.data,R=o.value.findIndex(I=>I.id===Q.id);if(R===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[R].status="canceled",n.notify({message:F.data.message,position:"bottom"})}).catch(F=>{var R,I;const Q=((I=(R=F.response)==null?void 0:R.data)==null?void 0:I.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:Q,color:"warning",position:"bottom"}),console.error(F)})})},O=S=>Qe({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${S.formatted_id}?`,url:route("admin.purchase-order.delete",S.id),fetchItemsCallback:T,loading:s}),T=(S=null)=>{De({pagination:j,filter:$,props:S,rows:o,url:route("admin.purchase-order.data"),loading:s,tableRef:r})},z=()=>{T()},E=G(()=>n.screen.gt.sm?N:N.filter(S=>S.name==="id"||S.name==="action"));return Ue(()=>$.year,S=>{S===null&&($.month=null)}),(S,F)=>{const Q=J("i-head"),R=J("authenticated-layout");return c(),h(Y,null,[e(Q,{title:fl}),e(R,null,Le({title:l(()=>[b(i(fl))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:F[0]||(F[0]=I=>d.value=!d.value)},null,8,["icon"]),S.$can("admin.purchase-order.edit")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:F[1]||(F[1]=I=>a(Z).get(S.route("admin.purchase-order.add")))})):k("",!0)]),default:l(()=>[t("div",Lg,[e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:j.value,"onUpdate:pagination":F[11]||(F[11]=I=>j.value=I),filter:$.search,loading:s.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:a(g)}),onRequest:T,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:I,message:ee,filter:se})=>[t("div",Hg,[t("span",null,i(ee)+" "+i(se?" with term "+se:""),1)])]),body:l(I=>[e(Ce,{props:I,class:"cursor-pointer",onClick:X(ee=>V(I.row),["prevent"])},{default:l(()=>[e(H,{key:"id",props:I,class:"wrap-column"},{default:l(()=>[t("div",null,[e(q,{name:"tag"}),b(" "+i(I.row.formatted_id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),b(i(a(fe)(I.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(c(),h(Y,{key:0},[I.row.supplier?(c(),h("div",Kg,[e(q,{name:"person",class:"inline-icon"}),e(Ml,{href:S.route("admin.supplier.detail",{id:I.row.supplier.id}),onClick:F[8]||(F[8]=X(()=>{},["stop"]))},{default:l(()=>[b("  "+i(I.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+i(a(K)(I.row.grand_total)),1),I.row.notes?(c(),h("div",Yg,[e(q,{name:"notes"}),b(" "+i(I.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Bg,{status:I.row.status},null,8,["status"]),e(zg,{status:I.row.payment_status},null,8,["status"]),k("",!0)])]),_:2},1032,["props"]),e(H,{key:"supplier_id",props:I},{default:l(()=>[I.row.supplier?(c(),h("div",Wg,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),b(" "+i(I.row.supplier_name),1)]),I.row.supplier_phone?(c(),h("div",Qg,[e(q,{name:"phone",class:"inline-icon"}),b(" "+i(I.row.supplier_phone),1)])):k("",!0),I.row.supplier_address?(c(),h("div",Jg,[e(q,{name:"home_pin",class:"inline-icon"}),b(" "+i(I.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"total",props:I},{default:l(()=>[b(i(a(K)(I.row.grand_total)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:I},{default:l(()=>[e(we,{text:I.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:I,onClick:F[10]||(F[10]=X(()=>{},["stop"]))},{default:l(()=>[t("div",Gg,[S.$can("admin.purchase-order.detail")||S.$can("admin.purchase-order.edit")||S.$can("admin.purchase-order.cancel")||S.$can("admin.purchase-order.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:F[9]||(F[9]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[I.row.status!="draft"&&S.$can("admin.purchase-order.detail")?te((c(),D(ae,{key:0,onClick:X(ee=>U(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"visibility"})]),_:1}),e(M,null,{default:l(()=>F[12]||(F[12]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),I.row.status=="draft"&&S.$can("admin.purchase-order.edit")?te((c(),D(ae,{key:1,onClick:X(ee=>B(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>F[13]||(F[13]=[b(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),I.row.status=="draft"&&S.$can("admin.purchase-order.cancel")?te((c(),D(ae,{key:2,onClick:X(ee=>w(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"cancel"})]),_:1}),e(M,null,{default:l(()=>F[14]||(F[14]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),e(tt),S.$can("admin.purchase-order.delete")?te((c(),D(ae,{key:3,onClick:X(ee=>O(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>F[15]||(F[15]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Fg,[e(ie,{modelValue:$.year,"onUpdate:modelValue":[F[2]||(F[2]=I=>$.year=I),z],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!="all"?(c(),D(ie,{key:0,modelValue:$.month,"onUpdate:modelValue":[F[3]||(F[3]=I=>$.month=I),z],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(ie,{modelValue:$.status,"onUpdate:modelValue":[F[4]||(F[4]=I=>$.status=I),z],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{modelValue:$.payment_status,"onUpdate:modelValue":[F[5]||(F[5]=I=>$.payment_status=I),z],options:x,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":F[7]||(F[7]=I=>$.search=I),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Zg=Object.freeze(Object.defineProperty({__proto__:null,default:Xg},Symbol.toStringTag,{value:"Module"})),e1={class:"column"},t1={class:"bg-grey-2 q-pa-xs"},a1={class:"text-subtitle1 text-bold text-grey-10"},l1={class:"text-caption text-grey-8"},o1={class:"col-12 col-sm-6"},n1={class:"full-width"},s1={key:1},r1={key:0},i1={key:1},d1={class:"col-12 col-sm-6",align:"left"},u1={class:"full-width"};const m1={key:1},c1={class:"full-width",style:{"border-collapse":"collapse"}},p1={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},f1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},g1={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},b1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},v1={key:0},y1={class:"col-12 col-sm-6"},_1={class:"text-body2 text-grey-7 text-italic"},k1={class:"col-12 col-sm-6"},w1={class:"row justify-end q-gutter-y-xs"},h1={class:"col-12 row justify-between"},$1={class:"text-subtitle2 text-bold"},ko={__name:"InvoiceTab",props:{data:Object},setup(u){const n=u;return(d,o)=>{const s=J("i-link");return c(),h("div",e1,[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",t1,[t("div",a1," INVOICE #"+i(n.data.formatted_id),1),t("div",l1,[b(" Kasir: "+i(n.data.cashier.username)+" - "+i(n.data.cashier.name)+" | "+i(a(fe)(n.data.datetime))+" ",1),n.data.cashier_session?(c(),h(Y,{key:0},[b(" | Session ID: "+i(n.data.cashier_session.id)+" | Terminal: "+i(n.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(tt),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",o1,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",n1,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.customer?(c(),D(s,{key:0,href:d.route("admin.customer.detail",{id:n.data.customer_id})},{default:l(()=>[e(q,{class:"inline-icon",name:"person"}),b(" "+i(n.data.customer_name)+" ("+i(n.data.customer_code)+") ",1)]),_:1},8,["href"])):(c(),h("div",s1,[e(q,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pelanggan Umum "))]))])]),n.data.customer_phone?(c(),h("tr",r1,[t("td",null,[e(q,{class:"inline-icon",name:"phone"}),b(" "+i(n.data.customer_phone),1)])])):k("",!0),n.data.customer_address?(c(),h("tr",i1,[t("td",null,[e(q,{class:"inline-icon",name:"home_pin"}),b(" "+i(n.data.customer_address),1)])])):k("",!0)])])]),t("div",d1,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",u1,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(fe)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(d.$CONSTANTS.SALES_ORDER_STATUSES[n.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[n.data.payment_status]),1)]),k("",!0),n.data.due_date?(c(),h("tr",m1,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(Jt)(n.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(tt),e(le,{class:"q-pa-sm"},{default:l(()=>[t("table",c1,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(c(!0),h(Y,null,Ke(n.data.details,r=>(c(),h("tr",{key:r.id},[t("td",p1,i(r.product_name),1),t("td",f1,i(a(K)(r.price)),1),t("td",g1,i(r.quantity),1),t("td",b1,i(a(K)(r.subtotal_price)),1)]))),128)),n.data.details.length==0?(c(),h("tr",v1,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(tt),e(le,{class:"row",align:"left"},{default:l(()=>[t("div",y1,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",_1,i(n.data.notes?n.data.notes:"-"),1)]),t("div",k1,[t("div",w1,[t("div",h1,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",$1,i(a(K)(n.data.grand_total)),1)])])])]),_:1})])}}},x1=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),S1={key:0,class:"text-center q-mb-md text-grey-8"},V1={class:"text-subtitle2 text-weight-medium"},q1={class:"text-h5 text-center text-primary q-pb-md"},C1={class:"text-center q-mt-md"},T1={key:0,class:"text-h6 text-negative text-weight-bold"},P1={key:1,class:"text-h6 text-green-8 text-weight-bold"},O1={key:2,class:"text-h6 text-positive text-weight-bold"},wo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,s=be(),r=C(!1),v=C({method:"cash",amount:d.total,notes:null}),g=s.props.data.customer,p=G(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...g?[{label:"Wallet",value:"wallet"}]:[],...s.props.accounts.map(P=>({label:P.name,value:P.id}))]),m=G(()=>d.total-(v.value.amount||0)),f=G(()=>{const P=v.value.amount||0;return d.total,P<=0?"Jumlah pembayaran harus lebih dari 0.":v.value.method==="wallet"&&g&&P>g.wallet_balance?"Saldo wallet tidak mencukupi.":null}),_=G(()=>f.value===null),y=()=>{if(!_.value)return;r.value=!0;const P={total_paid:v.value.amount,payments:[{id:v.value.method,amount:v.value.amount}],notes:v.value.notes,change:Math.max(0,(v.value.amount||0)-d.total),remaining_debt:Math.max(0,d.total-(v.value.amount||0))};o("accepted",P),r.value=!1},x=()=>{v.value.amount=d.total,v.value.method="cash",v.value.notes=null};return(P,$)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":$[4]||($[4]=j=>P.$emit("update:modelValue",j)),onBeforeShow:x},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>$[5]||($[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[a(g)?(c(),h("div",S1,[t("div",V1,[b(i(a(g).code)+" ",1),$[6]||($[6]=t("br",null,null,-1)),b(" "+i(a(g).name)+" ",1),$[7]||($[7]=t("br",null,null,-1)),b(" Saldo: Rp. "+i(a(K)(a(g).wallet_balance)),1)])])):k("",!0),t("div",q1," Total: Rp. "+i(a(K)(u.total)),1),e(a(ie),{modelValue:v.value.method,"onUpdate:modelValue":$[0]||($[0]=j=>v.value.method=j),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:r.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:v.value.amount,"onUpdate:modelValue":$[1]||($[1]=j=>v.value.amount=j),label:"Jumlah Uang",outlined:!0,dense:"",disable:r.value,class:"q-mb-md",error:!_.value,"error-message":f.value},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:v.value.notes,"onUpdate:modelValue":$[2]||($[2]=j=>v.value.notes=j),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:r.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",C1,[m.value>0?(c(),h("div",T1," Sisa Tagihan: Rp. "+i(a(K)(m.value)),1)):m.value<0?(c(),h("div",P1," Kembalian: Rp. "+i(a(K)(Math.abs(m.value))),1)):(c(),h("div",O1," Tagihan Terbayar "))])]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(A,{flat:"",label:"Batal",color:"grey",onClick:$[3]||($[3]=j=>P.$emit("update:modelValue",!1))}),e(A,{label:"Bayar",color:"positive",onClick:y,disable:r.value||!_.value,loading:r.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},R1=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),D1={class:"column"},I1={class:"row"},A1={class:"full-width",style:{"border-collapse":"collapse"}},U1={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},E1={class:"row items-center q-gutter-x-sm"},j1={class:"text-weight-bold"},N1={class:"row items-center q-gutter-x-sm q-mt-xs"},M1={class:"text-caption text-grey-6"},B1={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},z1={class:"text-caption text-grey-6"},F1={class:"q-mt-xs"},L1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},H1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},K1={key:0},Y1={class:"text-right q-pa-sm"},W1={class:"text-right q-pa-sm"},ho={__name:"PaymentTab",props:{data:Object},setup(u){const n=u,d=G(()=>n.data.grand_total-n.data.total_paid),o=xe(),s=C(!1),r=()=>{s.value=!0},v=async p=>{const m={order_id:n.data.id,payments:p.payments,notes:p.notes};o.loading.show({message:"Memproses pembayaran..."});try{const f=await Xe.post(route("admin.sales-order.add-payment"),m);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),s.value=!1,Z.visit(route("admin.sales-order.detail",{id:n.data.id})+"?tab=payment")}catch(f){let _="Gagal memproses pembayaran.";f.response&&f.response.data&&f.response.data.message?_=f.response.data.message:f.message&&(_=f.message),o.notify({message:_,color:"negative",icon:"error"})}finally{o.loading.hide()}},g=p=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Xe.post(route("admin.sales-order.delete-payment",{id:p.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Z.visit(route("admin.sales-order.detail",{id:n.data.id})+"?tab=payment")}catch(m){let f="Gagal menghapus pembayaran.";m.response&&m.response.data&&m.response.data.message?f=m.response.data.message:m.message&&(f=m.message),o.notify({message:f,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(p,m)=>(c(),h(Y,null,[t("div",D1,[e(tt),e(le,{class:"q-pa-sm"},{default:l(()=>[t("div",I1,[p.$can("admin.sales-order.add-payment")&&d.value>0?(c(),D(A,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=X(f=>r(),["stop"]))})):k("",!0)]),t("table",A1,[m[7]||(m[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(c(!0),h(Y,null,Ke(n.data.payments,f=>(c(),h("tr",{key:f.id},[t("td",U1,[t("div",E1,[e(q,{name:"tag",size:"xs",color:"grey-7"}),t("span",j1,i(f.formatted_id),1)]),t("div",N1,[e(q,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",M1,i(a(fe)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(c(),h("div",B1,[e(q,{name:"wallet",size:"xs",color:"grey-7"}),t("span",z1,i(f.account.name),1)])):k("",!0),t("div",F1,[e(dt,{label:p.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",L1,i(a(K)(f.amount)),1),t("td",H1,[p.$can("admin.sales-order.delete-payment")&&n.data.customer_id?(c(),D(A,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>g(f)},null,8,["onClick"])):k("",!0)])]))),128)),n.data.payments.length==0?(c(),h("tr",K1,m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",Y1,i(a(K)(n.data.total_paid)),1),m[4]||(m[4]=t("th",null,null,-1))]),t("tr",null,[m[5]||(m[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Tagihan",-1)),t("th",W1,i(a(K)(d.value)),1),m[6]||(m[6]=t("td",null,null,-1))])])])]),_:1})]),e(wo,{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=f=>s.value=f),total:d.value,customer:n.data.customer,onAccepted:v},null,8,["modelValue","total","customer"])],64))}},Q1=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),J1={class:"q-gutter-sm"},G1={class:"col col-lg-6 q-pa-xs",align:"center"},gl="Rincian Penjualan",X1={__name:"Detail",setup(u){const n=new URLSearchParams(window.location.search),d=be(),o=d.props.data,s=C(n.get("preview")||!1),v=C(n.get("tab")||"invoice");$e(()=>{$t(()=>{const p=n.get("print_size");p&&g(p)})});const g=p=>{window.open(route("admin.sales-order.print",{id:d.props.data.id,size:p}),"_self")};return(p,m)=>{const f=J("i-head"),_=J("authenticated-layout");return c(),h(Y,null,[e(f,{title:gl}),e(_,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,i(gl))])]),"left-button":l(()=>[t("div",J1,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>p.$goBack())})])]),"right-button":l(()=>[e(A,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>g("58mm"))}),e(A,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=y=>g("a4"))}),s.value?k("",!0):(c(),D(A,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=y=>a(Z).get(p.route("admin.sales-order.add")))}))]),default:l(()=>[e(Ve,{class:"row justify-center print-visible"},{default:l(()=>[t("div",G1,[e(ce,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Dt,{modelValue:v.value,"onUpdate:modelValue":m[4]||(m[4]=y=>v.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(Ze,{name:"invoice",label:"Invoice"}),s.value?k("",!0):(c(),D(Ze,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(tt),e(It,{modelValue:v.value,"onUpdate:modelValue":m[5]||(m[5]=y=>v.value=y),animated:""},{default:l(()=>[e(et,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(ko,{data:a(o)},null,8,["data"])]),_:1}),e(et,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(ho,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Z1=Object.freeze(Object.defineProperty({__proto__:null,default:X1},Symbol.toStringTag,{value:"Module"})),eb={class:"text-weight-medium"},tb={class:"text-caption text-grey-6 elipsis"},ab={class:"column items-end"},lb={class:"text-caption text-grey-6 text-italic"},$o={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(u){const n=xe(),d=We(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(s,r)=>(c(),D(Te,{dense:"",rows:u.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:ze({height:a(d)})},{header:l(v=>[e(Ce,{props:v,class:"bg-grey-4"},{default:l(()=>[(c(!0),h(Y,null,Ke(v.cols,g=>(c(),D(sa,{key:g.name,props:v,class:"text-weight-bold text-grey-8"},{default:l(()=>[b(i(g.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(v=>[e(Ce,{props:v,class:"hover-highlight"},{default:l(()=>[e(H,{key:"name",props:v,class:"text-left wrap-column"},{default:l(()=>[t("div",eb,i(v.row.product_name),1),t("div",tb,i(v.row.product_barcode),1),v.row.notes?(c(),D(we,{key:0,text:v.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"subtotal_price",props:v,class:"text-right"},{default:l(()=>[t("div",ab,[t("div",null,i(a(K)(v.row.subtotal_price)),1),t("div",lb,i(a(K)(v.row.quantity))+" x Rp. "+i(a(K)(v.row.price)),1)])]),_:2},1032,["props"]),e(H,{key:"action",props:v,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(A,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:g=>s.$emit("edit-item",v.row),disable:u.isProcessing},null,8,["onClick","disable"]),e(A,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:g=>s.$emit("remove-item",v.row),disable:u.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},ob=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),nb={key:0,class:"text-center q-mb-md text-grey-8"},sb={class:"text-subtitle2 text-weight-medium"},rb={class:"text-h5 text-center text-primary q-pb-md"},ib={class:"q-mb-md flex flex-center"},db={key:1},ub={class:"col-6"},mb={class:"col-6"},cb={class:"row"},pb={class:"text-center q-mt-md"},fb={key:0,class:"text-h6 text-negative text-weight-bold"},gb={key:1,class:"text-h6 text-green-8 text-weight-bold"},bb={key:2,class:"text-h6 text-positive text-weight-bold"},vb={key:2},yb={class:"text-h6 text-negative text-center"},_b={key:3},xo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,s=be(),r=C(!1),v=C("cash"),g=C(new Date),p=C(s.props.settings.after_payment_action??"print"),m=C([]),f=C([]),_=Pe([{id:"cash",amount:0}]),y=s.props.settings.default_payment_mode,x=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],P=G(()=>[{label:"Laci Kasir",value:"cash"},...d.customer?[{label:"Wallet",value:"wallet"}]:[],...s.props.accounts.map(Q=>({label:Q.name,value:Q.id}))]),$=G(()=>_.reduce((Q,R)=>Q+(R.amount||0),0)),j=G(()=>d.total-$.value),N=G(()=>{if(!d.customer)return!0;const Q=_.find(I=>I.id==="wallet");return(Q?Q.amount:0)<=d.customer.wallet_balance}),V=new Date,B=rt.addToDate(new Date,{days:30}),U=G(()=>[Q=>!!Q||"Tanggal jatuh tempo harus diisi",Q=>rt.isBetweenDates(Q,V,B,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),w=G(()=>{if(v.value==="debt")return!!d.customer&&U.value.every(se=>se(g.value)===!0);const Q=N.value,R=_.some(se=>(se.amount||0)>0),I=_.every(se=>(se.amount||0)>=0),ee=j.value<=0;return Q&&R&&I&&ee}),O=()=>{if(_.length<3){const Q=_.length;_.push({id:"cash",amount:0}),$t(()=>{const R=m.value[Q];R&&(R.focus(),R.showPopup())})}},T=Q=>{if(_.length>1){const R=_.findIndex(I=>I.id===Q);R!==-1&&_.splice(R,1)}},z=(Q,R="cash")=>{v.value=Q,g.value=new Date,_.splice(0,_.length),Q==="cash"&&(_.splice(0,_.length,{id:R,amount:d.total}),$t(()=>{f.value.length>0&&f.value[0]&&(f.value[0].focus(),f.value[0].select())}))},E=()=>{if(!w.value)return;r.value=!0;let Q={total:d.total,is_debt:v.value==="debt",after_payment_action:p.value};if(v.value==="debt")Q.due_date=rt.formatDate(g.value,"YYYY-MM-DD"),Q.payments=[];else{const R=$.value,I=R>d.total?R-d.total:0,ee=j.value>0?j.value:0;Q.payments=_,Q.remaining_debt=ee,Q.change=I}o("accepted",Q),r.value=!1},S=()=>{z("cash",d.customer?y:"cash")};$e(()=>{const Q=R=>{d.modelValue&&R.ctrlKey&&R.key==="Enter"&&(R.preventDefault(),E())};document.addEventListener("keydown",Q),Rt(()=>{document.removeEventListener("keydown",Q)})});const F=(Q,R)=>{$t(()=>{f.value[R]&&(f.value[R].focus(),f.value[R].select())})};return(Q,R)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":R[4]||(R[4]=I=>Q.$emit("update:modelValue",I)),onBeforeShow:S},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>R[5]||(R[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[u.customer?(c(),h("div",nb,[t("div",sb,[b(" Username: "+i(u.customer.code)+" ",1),R[6]||(R[6]=t("br",null,null,-1)),b(" Nama: "+i(u.customer.name),1),R[7]||(R[7]=t("br",null,null,-1)),b(" Saldo: Rp. "+i(a(K)(u.customer.wallet_balance)),1)])])):k("",!0),t("div",rb," Total: Rp. "+i(a(K)(u.total)),1),t("div",ib,[e(a(mo),{modelValue:v.value,"onUpdate:modelValue":[R[0]||(R[0]=I=>v.value=I),z],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!u.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),v.value==="cash"?(c(),h("div",db,[(c(!0),h(Y,null,Ke(_,(I,ee)=>(c(),h("div",{key:ee,class:"row q-col-gutter-sm q-mb-sm"},[t("div",ub,[e(a(ie),{modelValue:I.id,"onUpdate:modelValue":[se=>I.id=se,se=>F(se,ee)],options:P.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:r.value,"hide-bottom-space":"",ref_for:!0,ref:se=>m.value[ee]=se},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",mb,[e(Ee,{modelValue:I.amount,"onUpdate:modelValue":se=>I.amount=se,label:"Jumlah",outlined:!0,dense:"",disable:r.value,error:I.id==="wallet"&&!N.value,"error-message":I.id==="wallet"&&!N.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:se=>f.value[ee]=se},Le({_:2},[_.length>1?{name:"append",fn:l(()=>[e(q,{size:"xs",name:"close",class:"cursor-pointer",onClick:se=>T(I.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",cb,[e(A,{disable:!(_.length<3&&j.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:O,size:"sm"},null,8,["disable"])]),t("div",pb,[j.value>0?(c(),h("div",fb," Sisa Tagihan: Rp. "+i(a(K)(j.value)),1)):j.value<0?(c(),h("div",gb," Kembalian: Rp. "+i(a(K)(Math.abs(j.value))),1)):(c(),h("div",bb," Tagihan Terbayar "))])])):v.value==="debt"&&u.customer?(c(),h("div",vb,[e(Va,{outlined:"",modelValue:g.value,"onUpdate:modelValue":R[1]||(R[1]=I=>g.value=I),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(V),"max-date":a(B),rules:U.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",yb," Total Utang: Rp. "+i(a(K)(u.total)),1)])):v.value==="debt"&&!u.customer?(c(),h("div",_b,R[8]||(R[8]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(mt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(a(ie),{modelValue:p.value,"onUpdate:modelValue":R[2]||(R[2]=I=>p.value=I),options:x,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:r.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(A,{flat:"",label:"Batal",color:"grey",onClick:R[3]||(R[3]=I=>Q.$emit("update:modelValue",!1)),class:"col"}),e(A,{label:v.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:E,disable:r.value||!w.value,loading:r.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},kb=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),wb={class:"row items-center no-wrap"},hb={class:"col-auto"},So={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,s=d,r=()=>{s("save")},v=G(()=>o.item.quantity*o.item.price),g=f=>{f.stopPropagation(),f.preventDefault()},p=f=>{o.modelValue&&(f.key==="Enter"?(r(),s("update:modelValue",!1),g(f)):f.key==="Escape"&&(s("update:modelValue",!1),g(f)))};return $e(()=>{window.addEventListener("keydown",p)}),Rt(()=>{window.removeEventListener("keydown",p)}),n({getCurrentItem:()=>o.item}),(f,_)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>f.$emit("update:modelValue",y))},{default:l(()=>[e(ce,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",wb,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",hb,[e(A,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>f.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(oe,{modelValue:u.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=y=>u.item.product_name=y),label:"Produk","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=y=>u.item.quantity=y),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.price,"onUpdate:modelValue":_[3]||(_[3]=y=>u.item.price=y),label:"Harga",readonly:!u.item.product.price_editable,"hide-bottom-space":"",disable:u.isProcessing},null,8,["modelValue","readonly","disable"]),e(Ee,{modelValue:v.value,"onUpdate:modelValue":_[4]||(_[4]=y=>v.value=y),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(oe,{modelValue:u.item.notes,"onUpdate:modelValue":_[5]||(_[5]=y=>u.item.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[te(e(A,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[me]]),te(e(A,{flat:"",label:"Simpan",color:"primary",onClick:r,disable:u.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$b=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),xb={key:0,class:"q-select__selected-item"},Sb={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(u,{expose:n,emit:d}){const o=C(null),s=u,r=d,v=C([]);let g=null;const p=C(s.modelValue);$e(()=>{s.initialData&&(p.value=s.initialData)}),Ue(p,_=>{r("update:modelValue",_),r("customerSelected",_)}),Ue(()=>s.modelValue,_=>{p.value=_}),n({focus:()=>{o.value&&o.value.focus()}});const f=(_,y)=>{if(_.length<s.minLength){y(()=>{v.value=[]});return}g&&clearTimeout(g),g=setTimeout(()=>{Xe.get(`/web-api/customers?q=${_}`).then(x=>{y(()=>{v.value=x.data.data})}).catch(x=>{console.error("Gagal mengambil data pelanggan:",x),y(()=>{v.value=[]})})},500)};return(_,y)=>(c(),D(ie,{class:he(u.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=x=>p.value=x),"use-input":"","input-debounce":"0",label:u.label,options:v.value,onFilter:f,clearable:"",error:u.error,behavior:"menu","error-message":u.errorMessage,disable:u.disable,"hide-bottom-space":"",outlined:u.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(x=>[e(ae,jl(Nl(x.itemProps)),{default:l(()=>[e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>[b(i(x.opt.name),1)]),_:2},1024),e(ye,{caption:""},{default:l(()=>[e(q,{name:"person",size:"14px"}),b(" "+i(x.opt.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(x=>[x.opt?(c(),h("div",xb,i(x.opt.name)+" ("+i(x.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Vb={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(u,{emit:n}){return(d,o)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>d.$emit("update:modelValue",s))},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(mt,{align:"center"},{default:l(()=>[te(e(A,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Vo=vt(Vb,[["__scopeId","data-v-92052544"]]),qb=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Cb={class:"row items-center no-wrap"},Tb={class:"col text-subtite text-bold text-grey-8"},Pb={class:"col-auto"},qo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,s=d,r=()=>{s("save")},v=m=>{m.stopPropagation(),m.preventDefault()},g=m=>{o.modelValue&&(m.key==="Enter"?(r(),v(m)):m.key==="Escape"&&(s("update:modelValue",!1),v(m)))};return $e(()=>{window.addEventListener("keydown",g)}),Rt(()=>{window.removeEventListener("keydown",g)}),n({getCurrentItem:()=>o.item}),(m,f)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":f[4]||(f[4]=_=>m.$emit("update:modelValue",_))},{default:l(()=>[e(ce,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Cb,[t("div",Tb," Edit "+i(u.data.formatted_id),1),t("div",Pb,[e(A,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(Yt,{modelValue:u.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=_=>u.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:u.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(oe,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status],"onUpdate:modelValue":f[2]||(f[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(oe,{modelValue:u.data.notes,"onUpdate:modelValue":f[3]||(f[3]=_=>u.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[te(e(A,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[me]]),te(e(A,{flat:"",label:"Simpan",color:"primary",onClick:r,disable:u.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ob=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Rb={key:0},Db={style:{float:"right"}},Ib={key:1},Ab={style:{float:"right"}},Ub={key:2},Eb={style:{float:"right"}},jb={key:3},Nb={style:{float:"right"}},Mb={style:{float:"right"}},Bb={class:"q-gutter-sm"},zb={class:"q-my-md"},Fb={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(u,{emit:n}){const d=C(null),o=()=>{var s;(s=d.value)==null||s.focus()};return(s,r)=>(c(),D(ct,{"model-value":u.modelValue,"onUpdate:modelValue":r[0]||(r[0]=v=>s.$emit("update:modelValue",v)),onBeforeShow:o,persistent:""},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>r[1]||(r[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:l(()=>[r[22]||(r[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[r[2]||(r[2]=t("td",null,"ID",-1)),r[3]||(r[3]=t("td",null,":",-1)),t("td",null,i(u.order.formatted_id),1)]),u.customer?(c(),h("tr",Rb,[r[5]||(r[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),r[6]||(r[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(i(u.customer.name)+" ",1),r[4]||(r[4]=t("br",null,null,-1)),b(i(u.customer.code),1)])])):k("",!0),t("tr",null,[r[8]||(r[8]=t("td",null,"Total",-1)),r[9]||(r[9]=t("td",null,":",-1)),t("td",null,[r[7]||(r[7]=b(" Rp. ")),t("div",Db,i(a(K)(u.payment.total)),1)])]),u.payment.cash_amount?(c(),h("tr",Ib,[r[11]||(r[11]=t("td",null,"Tunai",-1)),r[12]||(r[12]=t("td",null,":",-1)),t("td",null,[r[10]||(r[10]=b(" Rp. ")),t("div",Ab,i(a(K)(u.payment.cash_amount)),1)])])):k("",!0),u.payment.wallet_amount?(c(),h("tr",Ub,[r[14]||(r[14]=t("td",null,"Wallet",-1)),r[15]||(r[15]=t("td",null,":",-1)),t("td",null,[r[13]||(r[13]=b(" Rp. ")),t("div",Eb,i(a(K)(u.payment.wallet_amount)),1)])])):k("",!0),u.payment.remaining_debt?(c(),h("tr",jb,[r[17]||(r[17]=t("td",null,"Piutang",-1)),r[18]||(r[18]=t("td",null,":",-1)),t("td",null,[r[16]||(r[16]=b(" Rp. ")),t("span",Nb,i(a(K)(u.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[r[20]||(r[20]=t("td",null,"Kembalian",-1)),r[21]||(r[21]=t("td",null,":",-1)),t("td",null,[r[19]||(r[19]=b(" Rp. ")),t("div",Mb,i(a(K)(u.payment.change)),1)])])])])]),_:1}),e(mt,{align:"center"},{default:l(()=>[t("div",Bb,[e(A,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(A,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",zb,[e(A,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Co=vt(Fb,[["__scopeId","data-v-85a4c3ae"]]),Lb=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),Hb={class:"q-gutter-sm"},Kb={class:"row items-center"},Yb={class:"text-weight-bold"},Wb={class:"row q-col-gutter-none full-width"},Qb={class:"col-sm-6 col-12 col"},Jb={class:"row full-width"},Gb={key:0,class:"row"},Xb={class:"col-sm-6 col-12"},Zb={class:"row q-ml-sm items-end"},ev={class:"row col grow"},tv={class:"col-12 q-pa-sm column"},av={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},lv={key:0,class:"col"},ov={class:"text-caption text-grey-6 q-mt-xs"},nv={key:0,class:"text-caption text-grey-8 q-mt-xs"},sv={class:"text-italic"},rv={key:1,class:"col"},iv={class:"q-pa-sm q-pb-none text-grey-8"},dv={class:"col"},uv={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},mv={class:"text-h4 text-weight-bold"},cv={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},pv={class:"col q-py-sm"},fv={class:"q-py-sm"},gv={__name:"Editor",setup(u){const n=xe(),d=be(),o=C(!0),s=C(null),r=C(null),v=C(null),g=C(!1),p=C(null),m=C(null),{isFullscreen:f,toggleFullscreen:_}=vo(m),y=d.props.data.formatted_id,x=C(d.props.data.customer),P=C(null),$=C(""),j=C(!1),N=C(!1),V=C(!1),B=C(!1),U=C(!1),w=C(!1),O=C(null),T=Pe({id:d.props.data.id,formatted_id:d.props.data.formatted_id,customer_id:d.props.data.customer_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),z=G(()=>T.items.reduce((L,W)=>L+W.price*W.quantity,0)),E=()=>{var L;_(),f.value||(L=p==null?void 0:p.value)==null||L.hideDrawer()},S=L=>isNaN(L)||L<=0?(kt("Kuantitas tidak valid.","top"),!1):!0,F=L=>isNaN(L)||L<0?(kt("Harga tidak valid.","top"),!1):!0,Q=L=>!L||L.length==0?(kt("Barcode tidak valid.","top"),!1):!0,R=L=>{$.value.endsWith("*")?$.value+=L.name:$.value=L.name},I=async()=>{const L=$.value.trim();if(L.length===0){V.value=!0;return}const W=L.split("*");let pe=1,de="",ge=null;if(W.length===1)de=W[0];else if(W.length<=3)pe=parseInt(W[0]),de=W[1],W.length===3&&(ge=parseFloat(W[2]));else{kt("Input tidak valid.","top");return}if(de.length===0){V.value=!0;return}!Q(de)&&!S(pe)&&!F(ge)||(j.value=!0,await Xe.post(route("admin.sales-order.add-item"),{order_id:T.id,product_code:de,qty:pe,price:ge,merge:o.value}).then(He=>{const nt=He.data.data.item;let _t=-1;He.data.data.mergeItem&&(_t=T.items.findIndex(ca=>ca.id===nt.id)),_t===-1?T.items.push(nt):T.items[_t]=nt,$.value="",ge!==null&&ge!==parseFloat(nt.price)&&kt("Harga tidak dapat diubah!","top")}).catch(He=>{var nt,_t;gt((_t=(nt=He.response)==null?void 0:nt.data)==null?void 0:_t.message,"top"),console.error("Gagal mengambil data produk:",He)}),j.value=!1,$t(()=>{var He;(He=s.value)==null||He.focus()}))},ee=L=>{O.value=Object.create(L),B.value=!0},se=L=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${L.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{j.value=!0,Xe.post(route("admin.sales-order.remove-item"),{id:L.id}).then(()=>{const W=T.items.findIndex(pe=>pe.id===L.id);W!==-1&&(T.items.splice(W,1)[0],bt("Item telah dihapus","top"))}).catch(W=>{var pe,de;gt(((de=(pe=W==null?void 0:W.response)==null?void 0:pe.data)==null?void 0:de.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(W)}).finally(()=>{j.value=!1})})},ne=()=>{j.value=!0;const L=r.value.getCurrentItem(),W={id:L.id,qty:L.quantity};L.product.price_editable&&(W.price=L.price),L.notes&&(W.notes=L.notes),Xe.post(route("admin.sales-order.update-item"),W).then(pe=>{const de=pe.data.data,ge=T.items.findIndex(He=>He.id===de.id);ge!==-1&&(T.items[ge]=de,bt("Item telah diperbarui","top"))}).catch(pe=>{var de,ge;gt(((ge=(de=pe==null?void 0:pe.response)==null?void 0:de.data)==null?void 0:ge.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(pe)}).finally(()=>{j.value=!1})};$e(()=>{const L=W=>{N.value||g.value||B.value||V.value||U.value||(W.key==="F1"?(W.preventDefault(),g.value=!0):W.key==="F2"?(W.preventDefault(),v.value.focus()):W.key==="F3"?(W.preventDefault(),s.value.focus()):W.key==="F4"?(W.preventDefault(),o.value=!o.value):W.key==="F10"||W.ctrlKey&&W.key==="Enter"?(W.preventDefault(),N.value=!0):W.key==="F11"?(W.preventDefault(),E()):(W.key==="F5"||W.key==="F6"||W.key==="F7"||W.key==="F12")&&W.preventDefault())};document.addEventListener("keydown",L),Rt(()=>{document.removeEventListener("keydown",L)}),$t(()=>{var W;(W=p==null?void 0:p.value)==null||W.hideDrawer()})});const qe=async L=>{x.value=L,T.customer_id=L==null?void 0:L.id,await Fe(),L!=null&&L.id?s.value.focus():v.value.focus()},Fe=async()=>{j.value=!0;const L={id:T.id,customer_id:T.customer_id??null,datetime:la(T.datetime),notes:T.notes};await Xe.post(route("admin.sales-order.update"),L).then(W=>{const pe=W.data.data.id;T.customer_id=pe.customer_id}).catch(W=>{var pe,de;gt(((de=(pe=W==null?void 0:W.response)==null?void 0:pe.data)==null?void 0:de.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(W)}).finally(()=>{j.value=!1})},ft=L=>{if(T.items.length===0){bt("Item masih kosong","top");return}const W={id:T.id,...L};j.value=!0,Xe.post(route("admin.sales-order.close"),W).then(pe=>{bt("Transaksi selesai"),W.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:T.id,size:d.props.settings.default_print_size}),"_self"):W.after_payment_action==="detail"?Z.get(route("admin.sales-order.detail",{id:T.id})):W.after_payment_action==="new-order"&&Z.get(route("admin.sales-order.add"))}).catch(pe=>{var de,ge;gt((ge=(de=pe.response)==null?void 0:de.data)==null?void 0:ge.message),console.error(pe)}).finally(()=>{j.value=!1})},pt=()=>{Nt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${T.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Xe.post(route("admin.sales-order.cancel",{id:T.id}),{id:T.id}).then(()=>{bt("Transaksi telah dibatalkan."),Z.visit(route("admin.sales-order.detail",{id:T.id}))}).catch(L=>{var pe,de;const W=((de=(pe=L.response)==null?void 0:pe.data)==null?void 0:de.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:W,color:"warning",position:"bottom"}),console.error(L)})})},yt=()=>{window.open(route("admin.sales-order.detail",{id:T.id})+"?preview=1","_blank")},ve=G(()=>x.value?x.value.wallet_balance>=z.value:!0);return(L,W)=>{const pe=J("i-head"),de=J("authenticated-layout");return c(),h(Y,null,[e(pe,{title:a(y)},null,8,["title"]),e(de,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:l(()=>[b(i(a(y)),1)]),"left-button":l(()=>[t("div",Hb,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:W[0]||(W[0]=ge=>a(Z).get(L.route("admin.sales-order.index")))})])]),"right-button":l(()=>[t("div",Kb,[a(n).screen.gt.sm?(c(),h(Y,{key:0},[t("div",Yb,i(a(d).props.auth.user.username),1),W[22]||(W[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(go)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Ve,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(ce,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",Wb,[t("div",Qb,[t("div",Jb,[e(Sb,{ref_key:"customerAutocompleteRef",ref:v,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:x.value,"onUpdate:modelValue":W[2]||(W[2]=ge=>x.value=ge),label:"Pelanggan",disable:j.value,onCustomerSelected:qe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),x.value?(c(),h("div",Gb,[t("div",{class:he(["q-mt-xs q-ml-sm text-bold",ve.value?"text-green":"text-red"])}," Wallet: "+i(x.value?"Rp. "+a(K)(x.value?x.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:he(["q-mt-xs q-ml-sm text-bold",x.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+i(x.value?"Rp. "+a(K)(x.value?x.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",Xb,[e(oe,{ref_key:"userInputRef",ref:s,modelValue:$.value,"onUpdate:modelValue":W[5]||(W[5]=ge=>$.value=ge),onKeyup:W[6]||(W[6]=Gt(X(ge=>I(),["prevent"]),["enter"])),loading:j.value,disable:j.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(q,{name:"search",onClick:W[3]||(W[3]=ge=>V.value=!0),class:"cursor-pointer"})]),append:l(()=>{var ge;return[((ge=$.value)==null?void 0:ge.length)>0?(c(),D(q,{key:0,name:"send",onClick:W[4]||(W[4]=He=>I()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",Zb,[e(Ct,{class:"col",modelValue:o.value,"onUpdate:modelValue":W[7]||(W[7]=ge=>o.value=ge),label:"Gabungkan item",disable:j.value},null,8,["modelValue","disable"])])])]),t("div",ev,[t("div",tv,[e($o,{items:T.items,onUpdateQuantity:W[8]||(W[8]=({id:ge,value:He})=>L.updateQuantity(ge,He)),onRemoveItem:se,onEditItem:ee,"is-processing":j.value},null,8,["items","is-processing"])])]),t("div",av,[a(n).screen.gt.sm?(c(),h("div",lv,[t("div",ov,i(T.items.length)+" item(s) ",1),T.notes?(c(),h("div",nv,[W[23]||(W[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",sv,[e(we,{text:T.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(n).screen.gt.sm?(c(),h("div",rv,[t("div",iv,[t("div",null,"#: "+i(T.formatted_id),1),t("div",null,i(a(fe)(T.datetime)),1)])])):k("",!0),t("div",dv,[t("div",uv,[W[25]||(W[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",mv,[W[24]||(W[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+i(a(K)(z.value)),1)])])])]),t("div",cv,[t("div",pv,[e(A,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:W[9]||(W[9]=ge=>N.value=!0),disable:!L.$can("admin.sales-order.close")||j.value||T.items.length===0||T.status!=="draft",loading:j.value},null,8,["disable","loading"])]),t("div",fv,[e(A,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:W[13]||(W[13]=X(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[te((c(),D(ae,{clickable:"",onClick:W[10]||(W[10]=X(ge=>U.value=!0,["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>W[26]||(W[26]=[b("Edit Rincian")])),_:1})]),_:1})),[[re],[me]]),te((c(),D(ae,{clickable:"",onClick:W[11]||(W[11]=X(ge=>yt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"preview"})]),_:1}),e(M,null,{default:l(()=>W[27]||(W[27]=[b("Pratinjau")])),_:1})]),_:1})),[[re],[me]]),te((c(),D(ae,{clickable:"",onClick:W[12]||(W[12]=X(ge=>pt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"cancel",color:"negative"})]),_:1}),e(M,{class:"text-negative"},{default:l(()=>W[28]||(W[28]=[b(" Batalkan ")])),_:1})]),_:1})),[[re],[me]]),e(tt)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(So,{ref_key:"itemEditorRef",ref:r,modelValue:B.value,"onUpdate:modelValue":W[14]||(W[14]=ge=>B.value=ge),item:O.value,onSave:W[15]||(W[15]=ge=>ne()),"is-processing":j.value},null,8,["modelValue","item","is-processing"]),e(xo,{modelValue:N.value,"onUpdate:modelValue":W[16]||(W[16]=ge=>N.value=ge),onAccepted:ft,form:T,customer:x.value,total:z.value,accounts:a(d).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(po,{modelValue:V.value,"onUpdate:modelValue":W[17]||(W[17]=ge=>V.value=ge),onProductSelected:R},null,8,["modelValue"]),e(qo,{modelValue:U.value,"onUpdate:modelValue":W[18]||(W[18]=ge=>U.value=ge),data:T,onSave:W[19]||(W[19]=ge=>Fe()),"is-processing":j.value},null,8,["modelValue","data","is-processing"]),e(Vo,{modelValue:g.value,"onUpdate:modelValue":W[20]||(W[20]=ge=>g.value=ge)},null,8,["modelValue"]),e(Co,{modelValue:w.value,"onUpdate:modelValue":W[21]||(W[21]=ge=>w.value=ge),order:T,customer:x.value,total:z.value,payment:P.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},bv=Object.freeze(Object.defineProperty({__proto__:null,default:gv},Symbol.toStringTag,{value:"Module"})),vv={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.SALES_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,s)=>(c(),D(ua,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}},yv={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,s)=>(c(),D(ua,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}};const _v={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},kv={class:"q-pa-xs"},wv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},hv={key:0},$v={key:1},xv={key:2},Sv={key:3},Vv={key:0},qv={key:1},Cv={key:0},Tv={key:0},Pv={key:1},Ov={class:"flex justify-end"},bl="Penjualan",Rv={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=Lt(),m=Ht(),f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Pt(p-2,p-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Ot()],y=[{value:"all",label:"Semua Status"},...at(window.CONSTANTS.SALES_ORDER_STATUSES)],x=[{value:"all",label:"Semua Status"},...at(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],P=[{value:"all",label:"Semua Status"},...at(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],$=Pe({search:"",year:p,month:m,status:"all",payment_status:"all",delivery_status:"all",...Re()}),j=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),N=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{T()});const V=S=>{if(S.status=="draft"){B(S);return}U(S)},B=S=>{Z.get(route("admin.sales-order.edit",S.id))},U=S=>{Z.get(route("admin.sales-order.detail",S.id))},w=S=>{Nt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${S.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Xe.post(route("admin.sales-order.cancel",{id:S.id}),{id:S.id}).then(F=>{const Q=F.data.data,R=o.value.findIndex(I=>I.id===Q.id);if(R===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[R].status="canceled",n.notify({message:F.data.message,position:"bottom"})}).catch(F=>{var R,I;const Q=((I=(R=F.response)==null?void 0:R.data)==null?void 0:I.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:Q,color:"warning",position:"bottom"}),console.error(F)})})},O=S=>Qe({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${S.formatted_id}?`,url:route("admin.sales-order.delete",S.id),fetchItemsCallback:T,loading:s}),T=(S=null)=>{De({pagination:j,filter:$,props:S,rows:o,url:route("admin.sales-order.data"),loading:s,tableRef:r})},z=()=>{T()},E=G(()=>n.screen.gt.sm?N:N.filter(S=>S.name==="id"||S.name==="action"));return Ue(()=>$.year,S=>{S===null&&($.month=null)}),(S,F)=>{const Q=J("i-head"),R=J("authenticated-layout");return c(),h(Y,null,[e(Q,{title:bl}),e(R,null,Le({title:l(()=>[b(i(bl))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:F[0]||(F[0]=I=>d.value=!d.value)},null,8,["icon"]),S.$can("admin.sales-order.edit")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:F[1]||(F[1]=I=>a(Z).get(S.route("admin.sales-order.add")))})):k("",!0)]),default:l(()=>[t("div",kv,[e(Te,{ref_key:"tableRef",ref:r,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:j.value,"onUpdate:pagination":F[11]||(F[11]=I=>j.value=I),filter:$.search,loading:s.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:a(g)}),onRequest:T,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:I,message:ee,filter:se})=>[t("div",wv,[t("span",null,i(ee)+" "+i(se?" with term "+se:""),1)])]),body:l(I=>[e(Ce,{props:I,class:"cursor-pointer",onClick:X(ee=>V(I.row),["prevent"])},{default:l(()=>[e(H,{key:"id",props:I,class:"wrap-column"},{default:l(()=>{var ee,se,ne;return[t("div",null,[e(q,{name:"tag"}),b(" "+i(I.row.formatted_id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),b(i(a(fe)(I.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(c(),h(Y,{key:0},[I.row.cashier?(c(),h("div",hv,[e(q,{name:"person",class:"inline-icon"}),b(" Kasir: "+i((ee=I.row.cashier)==null?void 0:ee.username),1)])):k("",!0),I.row.cashier_session?(c(),h("div",$v,[e(q,{name:"point_of_sale",class:"inline-icon"}),b(" Terminal: "+i((ne=(se=I.row.cashier_session)==null?void 0:se.cashier_terminal)==null?void 0:ne.name),1)])):k("",!0),I.row.customer?(c(),h("div",xv,[e(q,{name:"person",class:"inline-icon"}),e(Ml,{href:S.route("admin.customer.detail",{id:I.row.customer.id}),onClick:F[8]||(F[8]=X(()=>{},["stop"]))},{default:l(()=>[b("  "+i(I.row.customer.code)+" - "+i(I.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+i(a(K)(I.row.grand_total)),1),I.row.notes?(c(),h("div",Sv,[e(q,{name:"notes"}),b(" "+i(I.row.notes),1)])):k("",!0)],64)),t("div",null,[e(vv,{status:I.row.status},null,8,["status"]),e(yv,{status:I.row.payment_status},null,8,["status"]),k("",!0)])]}),_:2},1032,["props"]),e(H,{key:"cashier_id",props:I},{default:l(()=>{var ee,se,ne;return[I.row.cashier?(c(),h("div",Vv,[e(q,{name:"person",class:"inline-icon"}),b(" "+i((ee=I.row.cashier)==null?void 0:ee.username),1)])):k("",!0),I.row.cashier_session?(c(),h("div",qv,[e(q,{name:"point_of_sale",class:"inline-icon"}),b(" "+i((ne=(se=I.row.cashier_session)==null?void 0:se.cashier_terminal)==null?void 0:ne.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(H,{key:"customer_id",props:I},{default:l(()=>[I.row.customer?(c(),h("div",Cv,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),b(" "+i(I.row.customer_code)+" - "+i(I.row.customer_name),1)]),I.row.customer_phone?(c(),h("div",Tv,[e(q,{name:"phone",class:"inline-icon"}),b(" "+i(I.row.customer_phone),1)])):k("",!0),I.row.customer_address?(c(),h("div",Pv,[e(q,{name:"home_pin",class:"inline-icon"}),b(" "+i(I.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"total",props:I},{default:l(()=>[b(i(a(K)(I.row.grand_total)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:I},{default:l(()=>[e(we,{text:I.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(H,{key:"action",props:I,onClick:F[10]||(F[10]=X(()=>{},["stop"]))},{default:l(()=>[t("div",Ov,[S.$can("admin.sales-order.detail")||S.$can("admin.sales-order.edit")||S.$can("admin.sales-order.cancel")||S.$can("admin.sales-order.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:F[9]||(F[9]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[I.row.status!="draft"&&S.$can("admin.sales-order.detail")?te((c(),D(ae,{key:0,onClick:X(ee=>U(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"visibility"})]),_:1}),e(M,null,{default:l(()=>F[12]||(F[12]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),I.row.status=="draft"&&S.$can("admin.sales-order.edit")?te((c(),D(ae,{key:1,onClick:X(ee=>B(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>F[13]||(F[13]=[b(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),I.row.status=="draft"&&S.$can("admin.sales-order.cancel")?te((c(),D(ae,{key:2,onClick:X(ee=>w(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"cancel"})]),_:1}),e(M,null,{default:l(()=>F[14]||(F[14]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),e(tt),S.$can("admin.sales-order.delete")?te((c(),D(ae,{key:3,onClick:X(ee=>O(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>F[15]||(F[15]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",_v,[e(ie,{modelValue:$.year,"onUpdate:modelValue":[F[2]||(F[2]=I=>$.year=I),z],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!="all"?(c(),D(ie,{key:0,modelValue:$.month,"onUpdate:modelValue":[F[3]||(F[3]=I=>$.month=I),z],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(ie,{modelValue:$.status,"onUpdate:modelValue":[F[4]||(F[4]=I=>$.status=I),z],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{modelValue:$.payment_status,"onUpdate:modelValue":[F[5]||(F[5]=I=>$.payment_status=I),z],options:x,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":F[7]||(F[7]=I=>$.search=I),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Dv=Object.freeze(Object.defineProperty({__proto__:null,default:Rv},Symbol.toStringTag,{value:"Module"})),To={__name:"CompanyInfoForm",setup(u){const n=C(),d=be(),o=Me({name:d.props.data.name,headline:d.props.data.headline,phone:d.props.data.phone,address:d.props.data.address,logo_path:d.props.data.logo_path,logo_image:null}),s=C(null),r=C("");$e(()=>{o.logo_path&&(r.value=`/${o.logo_path}`)});function v(){s.value.click()}function g(f){const _=f.target.files[0];_&&(o.logo_image=_,r.value=URL.createObjectURL(_))}function p(){o.logo_image=null,o.logo_path=null,r.value=null,s.value.value=null}const m=()=>lt({form:o,url:route("admin.company-profile.edit")});return(f,_)=>(c(),D(Be,{class:"row",onSubmit:X(m,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[_[8]||(_[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),_[9]||(_[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(oe,{ref_key:"nameInputRef",ref:n,modelValue:a(o).name,"onUpdate:modelValue":_[0]||(_[0]=y=>a(o).name=y),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[y=>y&&y.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(o).headline,"onUpdate:modelValue":_[1]||(_[1]=y=>a(o).headline=y),modelModifiers:{trim:!0},label:"Headline",disable:a(o).processing,maxlength:"200","lazy-rules":"",error:!!a(o).errors.headline,"error-message":a(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).phone,"onUpdate:modelValue":_[2]||(_[2]=y=>a(o).phone=y),modelModifiers:{trim:!0},label:"No Telepon",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.phone,"error-message":a(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(o).address,"onUpdate:modelValue":_[3]||(_[3]=y=>a(o).address=y),modelModifiers:{trim:!0},label:"Alamat",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[_[7]||(_[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(A,{label:"Browse Logo",size:"sm",onClick:v,color:"secondary",icon:"add_a_photo",disable:a(o).processing},null,8,["disable"]),e(A,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:a(o).processing||!r.value,color:"red",onClick:p},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:s,accept:"image/*",style:{display:"none"},onChange:g},null,544),t("div",null,[e(Xt,{src:r.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},Le({error:l(()=>[_[4]||(_[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[r.value?void 0:{name:"default",fn:l(()=>[_[5]||(_[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),_[6]||(_[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(le,null,{default:l(()=>[e(A,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Iv=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),Av={class:"q-pa-xs"},Uv={class:"row justify-center"},Ev={class:"col col-md-6"},vl="Profil Perusahaan",jv={__name:"Edit",setup(u){return(n,d)=>{const o=J("i-head"),s=J("authenticated-layout");return c(),h(Y,null,[e(o,{title:vl}),e(s,null,{title:l(()=>[b(i(vl))]),default:l(()=>[t("div",Av,[t("div",Uv,[t("div",Ev,[e(To)])])])]),_:1})],64)}}},Nv=Object.freeze(Object.defineProperty({__proto__:null,default:jv},Symbol.toStringTag,{value:"Module"})),Mv={class:"col-xs-12 col-md-8"},Bv={class:"col-xs-12 col-sm-9"},zv={class:"col-xs-12 col-sm-3 text-right"},yl="Pengaturan Database & Utilitas",Fv={__name:"Index",setup(u){const n=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:"⚠️ **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:"⛔ **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:"❌ **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(d,o)=>{const s=J("i-head"),r=J("authenticated-layout");return c(),h(Y,null,[e(s,{title:yl}),e(r,null,{title:l(()=>[b(i(yl))]),default:l(()=>[e(Ve,{class:"row justify-center q-pa-xs"},{default:l(()=>[t("div",Mv,[e(ce,{square:"",flat:"",bordered:"",class:"full-width"},{default:l(()=>[e(le,null,{default:l(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(jt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:l(()=>[e(q,{name:"warning",color:"red"})]),default:l(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=b(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(tt),e(le,{class:"q-gutter-y-lg"},{default:l(()=>[(c(),h(Y,null,Ke(n,v=>t("div",{key:v.name,class:"row items-center q-col-gutter-md"},[t("div",Bv,[e(ae,{class:"q-pa-none"},{default:l(()=>[e(M,{avatar:"",class:"q-pr-md"},{default:l(()=>[e(q,{name:v.icon,color:v.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(M,{style:{"text-wrap":"initial"}},{default:l(()=>[e(ye,{class:"text-subtitle1 text-bold"},{default:l(()=>[b(i(v.name),1)]),_:2},1024),e(ye,{caption:"",class:"q-pb-sm"},{default:l(()=>[b(i(v.description),1)]),_:2},1024),e(ye,{class:"text-caption text-negative text-bold"},{default:l(()=>[b(i(v.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",zv,[e(A,{icon:v.icon,label:v.name.split(" ")[0],color:v.color,disable:v.disable,onClick:v.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},Lv=Object.freeze(Object.defineProperty({__proto__:null,default:Fv},Symbol.toStringTag,{value:"Module"})),Hv={class:"q-pa-xs"},Kv={class:"row justify-center"},Yv={class:"col col-md-6"},Wv={__name:"Edit",setup(u){const n=be(),d=Me({foot_note:n.props.data.foot_note,default_payment_mode:n.props.data.default_payment_mode,default_print_size:n.props.data.default_print_size,after_payment_action:n.props.data.after_payment_action}),o=()=>lt({form:d,url:route("admin.pos-settings.edit")}),s=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],r=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],v=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(g,p)=>{const m=J("i-head"),f=J("authenticated-layout");return c(),h(Y,null,[e(m,{title:"Pengaturan POS"}),e(f,null,{title:l(()=>p[4]||(p[4]=[b("Pengaturan POS")])),default:l(()=>[t("div",Hv,[t("div",Kv,[t("div",Yv,[e(Be,{class:"row",onSubmit:X(o,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[p[5]||(p[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),p[6]||(p[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(ie,{modelValue:a(d).default_payment_mode,"onUpdate:modelValue":p[0]||(p[0]=_=>a(d).default_payment_mode=_),label:"Default Pembayaran",options:s,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.default_payment_mode,"error-message":a(d).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:a(d).default_print_size,"onUpdate:modelValue":p[1]||(p[1]=_=>a(d).default_print_size=_),label:"Default Ukuran Cetak",options:r,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.default_print_size,"error-message":a(d).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:a(d).after_payment_action,"onUpdate:modelValue":p[2]||(p[2]=_=>a(d).after_payment_action=_),label:"Aksi Setelah Pembayaran",options:v,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.after_payment_action,"error-message":a(d).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(d).foot_note,"onUpdate:modelValue":p[3]||(p[3]=_=>a(d).foot_note=_),modelModifiers:{trim:!0},label:"Foot Note",disable:a(d).processing,"lazy-rules":"",error:!!a(d).errors.foot_note,"error-message":a(d).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,null,{default:l(()=>[e(A,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(d).processing,loading:a(d).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},Qv=Object.freeze(Object.defineProperty({__proto__:null,default:Wv},Symbol.toStringTag,{value:"Module"})),Jv={class:"q-gutter-sm"},Gv={class:"q-gutter-sm"},Xv={class:"col col-md-6 q-pa-xs"},Zv={class:"row"},ey={class:"detail-item"},ty={class:"detail-value"},ay={class:"detail-item"},ly={class:"detail-value"},oy={class:"detail-item"},ny={class:"detail-value"},sy={class:"detail-item"},ry={class:"detail-value"},iy={class:"detail-item"},dy={class:"detail-value"},uy={class:"detail-item"},my={class:"detail-value"},cy={class:"detail-item"},py={class:"detail-value"},fy={class:"detail-item"},gy={class:"detail-value user-agent-value"},by={class:"q-pt-md"},vy={class:"table-wrapper-scroll"},yy={key:0,class:"table-metadata"},_y={key:0},ky={colspan:"100%"},wy={class:"text-mono json-pre-scroll"},hy={key:1},$y={class:"metadata-label",style:{width:"100px"}},xy={class:"metadata-value"},Sy={key:0,class:"text-mono json-pre-scroll"},Vy={key:2},qy={colspan:"3"},Cy={class:"table-metadata"},Ty={class:"metadata-label"},Py={class:"metadata-value"},Oy={class:"metadata-value"},Ry={key:1,class:"text-grey-8 text-italic q-pa-sm"},_l="Rincian Log Aktifitas",Dy={__name:"Detail",setup(u){const n=be(),d=()=>Qe({message:`Hapus log aktifitas #${n.props.data.id}?`,url:route("admin.user-activity-log.delete",n.props.data.id),onSuccess:()=>{Z.get(route("admin.user-activity-log.index"))}});return(o,s)=>{const r=J("i-head"),v=J("i-link"),g=J("authenticated-layout");return c(),h(Y,null,[e(r,{title:_l}),e(g,{"show-drawer-button":!0},{title:l(()=>[b(i(_l))]),"left-button":l(()=>[t("div",Jv,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=p=>o.$goBack())})])]),"right-button":l(()=>[t("div",Gv,[e(A,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:s[1]||(s[1]=p=>d())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Xv,[t("div",Zv,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"detail-group"},{default:l(()=>[s[20]||(s[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",ey,[s[2]||(s[2]=t("div",{class:"detail-label"},"ID",-1)),s[3]||(s[3]=t("div",{class:"detail-separator"},":",-1)),t("div",ty,i(a(n).props.data.id),1)]),t("div",ay,[s[4]||(s[4]=t("div",{class:"detail-label"},"Waktu",-1)),s[5]||(s[5]=t("div",{class:"detail-separator"},":",-1)),t("div",ly,i(a(fe)(a(n).props.data.logged_at)),1)]),t("div",oy,[s[6]||(s[6]=t("div",{class:"detail-label"},"Pengguna",-1)),s[7]||(s[7]=t("div",{class:"detail-separator"},":",-1)),t("div",ny,[e(v,{href:o.route("admin.user.detail",{id:a(n).props.data.user_id})},{default:l(()=>[b(i(a(n).props.data.username),1)]),_:1},8,["href"])])]),t("div",sy,[s[8]||(s[8]=t("div",{class:"detail-label"},"Kategori",-1)),s[9]||(s[9]=t("div",{class:"detail-separator"},":",-1)),t("div",ry,i(a(n).props.data.activity_category_label),1)]),t("div",iy,[s[10]||(s[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),s[11]||(s[11]=t("div",{class:"detail-separator"},":",-1)),t("div",dy,i(a(n).props.data.activity_name_label),1)]),t("div",uy,[s[12]||(s[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),s[13]||(s[13]=t("div",{class:"detail-separator"},":",-1)),t("div",my,i(a(n).props.data.description),1)]),t("div",cy,[s[14]||(s[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),s[15]||(s[15]=t("div",{class:"detail-separator"},":",-1)),t("div",py,i(a(n).props.data.ip_address),1)]),t("div",fy,[s[16]||(s[16]=t("div",{class:"detail-label"},"User Agent",-1)),s[17]||(s[17]=t("div",{class:"detail-separator"},":",-1)),t("div",gy,i(a(n).props.data.user_agent),1)]),t("div",by,[s[19]||(s[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",vy,[Object.keys(a(n).props.data.metadata).length>0?(c(),h("table",yy,[t("tbody",null,[(c(!0),h(Y,null,Ke(a(n).props.formatted_metadata,(p,m)=>(c(),h(Y,{key:m},[p.type==="plain"?(c(),h("tr",_y,[t("td",ky,[t("pre",wy,i(p.value),1)])])):k("",!0),p.type==="simple"?(c(),h("tr",hy,[t("td",$y,i(p.label),1),t("td",xy,[p.label=="Data Mentah (JSON)"?(c(),h("pre",Sy,i(p.value),1)):(c(),h(Y,{key:1},[b(i(p.value),1)],64))])])):k("",!0),p.type==="comparison"?(c(),h("tr",Vy,[t("td",qy,[t("table",Cy,[s[18]||(s[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(c(!0),h(Y,null,Ke(p.value,(f,_)=>(c(),h("tr",{class:he(f.new_value!==f.old_value?"value-changed":"")},[t("td",Ty,i(f.field),1),t("td",Py,i(f.old_value),1),t("td",Oy,i(f.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(c(),h("div",Ry," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Iy=vt(Dy,[["__scopeId","data-v-37e21f0d"]]),Ay=Object.freeze(Object.defineProperty({__proto__:null,default:Iy},Symbol.toStringTag,{value:"Module"}));function Uy(){return{protectClick:n=>(d,o)=>{const s=window.getSelection();if(s&&!s.isCollapsed){o.stopPropagation();return}n(d,o)}}}const Ey={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},jy={class:"q-pa-xs"},Ny={class:"full-width row flex-center text-grey-8 q-gutter-sm"},My={key:0},By={class:"flex justify-end"},kl="Log Aktifitas Pengguna",zy={__name:"Index",setup(u){const n=be(),d=xe(),o=C(!1),s=C([]),r=C(!0),v=C(null),g=C(null),p=We(g),{protectClick:m}=Uy(),f=Pe({user_id:"all",activity_category:"all",activity_name:"all",search:"",...Re()}),_=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),y=[{value:"all",label:"Semua"},...n.props.users.map(F=>({value:F.id,label:F.username+" - "+F.name}))],x=[{value:"all",label:"Semua"},...Object.entries(n.props.activity_categories).map(([F,Q])=>({value:F,label:Q}))],P=[{value:"all",label:"Semua"},...Object.entries(n.props.activity_names).map(([F,Q])=>({value:F,label:Q}))],$=C(x),j=C(P),N=(F,Q)=>{if(F===""){Q(()=>{$.value=x});return}Q(()=>{const R=F.toLowerCase();$.value=x.filter(I=>I.label.toLowerCase().indexOf(R)>-1)})},V=(F,Q)=>{if(F===""){Q(()=>{j.value=P});return}Q(()=>{const R=F.toLowerCase();j.value=P.filter(I=>I.label.toLowerCase().indexOf(R)>-1)})},B=[{name:"id",label:d.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];$e(()=>{w()});const U=F=>Qe({message:`Hapus log #${F.id}?`,url:route("admin.user-activity-log.delete",F.id),fetchItemsCallback:w,loading:r}),w=(F=null)=>{De({pagination:_,filter:f,props:F,rows:s,url:route("admin.user-activity-log.data"),loading:r,tableRef:v})},O=()=>w(),z=m(F=>Z.get(route("admin.user-activity-log.detail",{id:F.id}))),E=G(()=>d.screen.gt.sm?B:B.filter(F=>F.name==="id"||F.name==="action")),S=()=>{Nt.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{bt("Seluruh log telah dibersihkan."),w()}).catch(F=>{var R,I;const Q=((I=(R=F.response)==null?void 0:R.data)==null?void 0:I.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";gt(Q,"bottom"),console.error(F)})})};return(F,Q)=>{const R=J("i-head"),I=J("i-link"),ee=J("authenticated-layout");return c(),h(Y,null,[e(R,{title:kl}),e(ee,null,Le({title:l(()=>[b(i(kl))]),"right-button":l(()=>[e(A,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:Q[0]||(Q[0]=se=>o.value=!o.value)},null,8,["icon"]),F.$can("admin.user-activity-log.clear")?(c(),D(A,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:S})):k("",!0)]),default:l(()=>[t("div",jy,[e(Te,{class:"full-height-table",ref_key:"tableRef",ref:v,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":Q[7]||(Q[7]=se=>_.value=se),filter:f.search,loading:r.value,columns:E.value,rows:s.value,"rows-per-page-options":[10,25,50],style:ze({height:a(p)}),onRequest:w,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:se,message:ne,filter:qe})=>[t("div",Ny,[t("span",null,i(ne)+" "+i(qe?" with term "+qe:""),1)])]),body:l(se=>[e(Ce,{props:se,class:"cursor-pointer",onClick:X(ne=>a(z)(se.row,ne),["stop"])},{default:l(()=>[e(H,{key:"id",props:se},{default:l(()=>[t("div",null,[a(d).screen.lt.md?(c(),h(Y,{key:0},[e(q,{name:"tag",class:"inline-icon"}),Q[8]||(Q[8]=b(" ID Aktifitas: "))],64)):k("",!0),b(" "+i(se.row.id),1)]),a(d).screen.lt.md?(c(),h("div",My,[t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),b(" "+i(a(fe)(se.row.logged_at)),1)]),t("div",null,[e(q,{name:"person",class:"inline-icon"}),e(I,{onClick:Q[5]||(Q[5]=X(()=>{},["stop"])),href:F.route("admin.user.detail",{id:se.row.user_id})},{default:l(()=>[b(i(se.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(q,{name:"category",class:"inline-icon"}),b(" "+i(se.row.activity_category_label)+" > "+i(se.row.activity_name_label),1)]),t("div",null,[e(q,{name:"notes",class:"inline-icon"}),b(" "+i(se.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(H,{key:"logged_at",props:se},{default:l(()=>[b(i(a(fe)(se.row.logged_at)),1)]),_:2},1032,["props"]),e(H,{key:"username",props:se},{default:l(()=>[e(I,{onClick:Q[6]||(Q[6]=X(()=>{},["stop"])),href:F.route("admin.user.detail",{id:se.row.user_id})},{default:l(()=>[b(i(se.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(H,{key:"activity_category",props:se},{default:l(()=>[b(i(se.row.activity_category_label),1)]),_:2},1032,["props"]),e(H,{key:"activity_name",props:se},{default:l(()=>[b(i(se.row.activity_name_label),1)]),_:2},1032,["props"]),e(H,{key:"description",props:se,class:"wrap-column"},{default:l(()=>[b(i(se.row.description),1)]),_:2},1032,["props"]),e(H,{key:"action",props:se},{default:l(()=>[t("div",By,[F.$can("admin.user-role.delete")?(c(),D(A,{key:0,onClick:X(ne=>U(se.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Ey,[e(ie,{modelValue:f.user_id,"onUpdate:modelValue":[Q[1]||(Q[1]=se=>f.user_id=se),O],class:"custom-select col-xs-12 col-sm-2",options:y,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ie,{modelValue:f.activity_category,"onUpdate:modelValue":[Q[2]||(Q[2]=se=>f.activity_category=se),O],class:"custom-select col-xs-12 col-sm-2",options:$.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:N,clearable:""},null,8,["modelValue","options"]),e(ie,{modelValue:f.activity_name,"onUpdate:modelValue":[Q[3]||(Q[3]=se=>f.activity_name=se),O],class:"custom-select col-xs-12 col-sm-2",options:j.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:V},null,8,["modelValue","options"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":Q[4]||(Q[4]=se=>f.search=se),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Fy=Object.freeze(Object.defineProperty({__proto__:null,default:zy},Symbol.toStringTag,{value:"Module"})),Po={__name:"UpdatePasswordForm",setup(u){const n=C(!1),d=C(null),o=C(null),s=Me({current_password:"",password:"",password_confirmation:""}),r=()=>{s.clearErrors(),s.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>s.reset(),onError:()=>{s.errors.password&&(s.reset("password","password_confirmation"),d.value.focus()),s.errors.current_password&&(s.reset("current_password"),o.value.focus())}})};return(v,g)=>(c(),D(Be,{class:"row",onSubmit:X(r,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[g[6]||(g[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),g[7]||(g[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(oe,{modelValue:a(s).current_password,"onUpdate:modelValue":g[1]||(g[1]=p=>a(s).current_password=p),type:n.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.current_password,"error-message":a(s).errors.current_password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(A,{dense:"",flat:"",round:"",onClick:g[0]||(g[0]=p=>n.value=!n.value)},{default:l(()=>[e(q,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(oe,{modelValue:a(s).password,"onUpdate:modelValue":g[3]||(g[3]=p=>a(s).password=p),type:n.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.password,"error-message":a(s).errors.password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(A,{dense:"",flat:"",round:"",onClick:g[2]||(g[2]=p=>n.value=!n.value)},{default:l(()=>[e(q,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(oe,{modelValue:a(s).password_confirmation,"onUpdate:modelValue":g[5]||(g[5]=p=>a(s).password_confirmation=p),type:n.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.password_confirmation,"error-message":a(s).errors.password_confirmation,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(A,{dense:"",flat:"",round:"",onClick:g[4]||(g[4]=p=>n.value=!n.value)},{default:l(()=>[e(q,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(le,null,{default:l(()=>[e(A,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:a(s).processing,loading:a(s).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Ly=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Oo={__name:"UpdateProfileInformationForm",setup(u){const d=be().props.auth.user,o=Me({name:d.name,username:d.username,type:window.CONSTANTS.USER_TYPES[d.type]}),s=()=>lt({form:o,url:route("admin.user-profile.update")});return(r,v)=>(c(),D(Be,{class:"row",onSubmit:X(s,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[v[3]||(v[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),v[4]||(v[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(oe,{modelValue:a(o).username,"onUpdate:modelValue":v[0]||(v[0]=g=>a(o).username=g),label:"ID Pengguna",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(oe,{modelValue:a(o).name,"onUpdate:modelValue":v[1]||(v[1]=g=>a(o).name=g),modelModifiers:{trim:!0},label:"Nama",disable:a(o).processing,error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[g=>g&&g.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(o).type,"onUpdate:modelValue":v[2]||(v[2]=g=>a(o).type=g),label:"Jenis Akun",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(le,null,{default:l(()=>[e(A,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Hy=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),Ky={class:"q-pa-xs"},Yy={class:"row justify-center"},Wy={class:"col col-md-6"},wl="Profil Saya",Qy={__name:"Edit",setup(u){return(n,d)=>{const o=J("i-head"),s=J("authenticated-layout");return c(),h(Y,null,[e(o,{title:wl}),e(s,null,{title:l(()=>[b(i(wl))]),default:l(()=>[t("div",Ky,[t("div",Yy,[t("div",Wy,[e(Oo,{class:"q-mb-md"}),e(Po)])])])]),_:1})],64)}}},Jy=Object.freeze(Object.defineProperty({__proto__:null,default:Qy},Symbol.toStringTag,{value:"Module"})),Gy={class:"q-gutter-sm"},Xy={class:"q-gutter-sm"},Zy={class:"col col-md-6 q-pa-xs"},e_={class:"row"},t_={class:"detail"},a_={key:0},l_={key:1,class:"text-grey-8 text-italic"},o_={key:2},n_={class:"text-subtitle2 text-bold text-grey-8 q-mt-xs"},s_={key:3,class:"text-grey-8 text-italic"},hl="Rincian Role Pengguna",r_={__name:"Detail",setup(u){const n=be(),d=G(()=>{const o={};return n.props.data.permissions&&n.props.data.permissions.forEach(s=>{const r=s.category;o[r]||(o[r]=[]),o[r].push(s)}),o});return(o,s)=>{const r=J("i-head"),v=J("i-link"),g=J("authenticated-layout");return c(),h(Y,null,[e(r,{title:hl}),e(g,{"show-drawer-button":!0},{title:l(()=>[b(i(hl))]),"left-button":l(()=>[t("div",Gy,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=p=>o.$goBack())})])]),"right-button":l(()=>[t("div",Xy,[o.$can("admin.user-role.edit")?(c(),D(A,{key:0,icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:s[1]||(s[1]=p=>a(Z).get(o.route("admin.user-role.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Zy,[t("div",e_,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[s[7]||(s[7]=t("div",{class:"text-subtitle1 text-bold text-grey-8"},"Info Role",-1)),t("table",t_,[t("tbody",null,[t("tr",null,[s[2]||(s[2]=t("td",{style:{width:"100px"}},"Nama Role",-1)),s[3]||(s[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[s[4]||(s[4]=t("td",null,"Deskripsi",-1)),s[5]||(s[5]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.description),1)])])]),s[8]||(s[8]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Pengguna ",-1)),a(n).props.data.users.length>0?(c(),h("div",a_,[(c(!0),h(Y,null,Ke(a(n).props.data.users,p=>(c(),h("div",null,[s[6]||(s[6]=b(" ● ")),e(v,{href:o.route("admin.user.detail",{id:p.id})},{default:l(()=>[b(i(p.username)+" - "+i(p.name),1)]),_:2},1032,["href"])]))),256))])):(c(),h("div",l_," Belum ada akun pengguna yang terdaftar. ")),s[9]||(s[9]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Hak Akses ",-1)),a(n).props.data.permissions.length>0?(c(),h("div",o_,[(c(!0),h(Y,null,Ke(d.value,(p,m)=>(c(),h("div",{key:m},[t("div",n_,i(m),1),(c(!0),h(Y,null,Ke(p,f=>(c(),h("div",{key:f.id}," ● "+i(f.label),1))),128))]))),128))])):(c(),h("div",s_," Belum ada hak akses yang ditetapkan. "))]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},i_=Object.freeze(Object.defineProperty({__proto__:null,default:r_},Symbol.toStringTag,{value:"Module"})),d_={class:"q-gutter-sm"},u_={class:"col col-md-6 q-pa-xs"},m_={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},c_={__name:"Editor",setup(u){const n=be(),d=(n.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=Me({id:n.props.data.id??null,name:n.props.data.name,description:n.props.data.description,permissions:n.props.data.permissions?n.props.data.permissions.map(v=>v.id):[]}),s=()=>lt({form:o,url:route("admin.user-role.save")}),r=G(()=>{const v={};return n.props.permissions&&n.props.permissions.forEach(g=>{const p=g.category;v[p]||(v[p]=[]),v[p].push(g)}),v});return(v,g)=>{const p=J("i-head"),m=J("authenticated-layout");return c(),h(Y,null,[e(p,{title:d}),e(m,{"show-drawer-button":!0},{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",d_,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=f=>v.$goBack())})])]),"right-button":l(()=>[e(A,{icon:"save",label:"Simpan",color:"primary",disable:a(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:X(s,["prevent"])},null,8,["disable"])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",u_,[e(Be,{class:"row",onSubmit:X(s,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=f=>a(o).id=f)},null,512),[[ut,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":g[2]||(g[2]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).description,"onUpdate:modelValue":g[3]||(g[3]=f=>a(o).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(c(!0),h(Y,null,Ke(r.value,(f,_)=>(c(),h("div",{key:_},[t("div",m_,i(_),1),(c(!0),h(Y,null,Ke(f,y=>(c(),h("div",{key:y.id},[e(ra,{class:"q-ma-none q-pa-none list-checkbox",modelValue:a(o).permissions,"onUpdate:modelValue":x=>a(o).permissions=x,val:y.id,label:y.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},p_=vt(c_,[["__scopeId","data-v-2c2a059c"]]),f_=Object.freeze(Object.defineProperty({__proto__:null,default:p_},Symbol.toStringTag,{value:"Module"})),g_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},b_={class:"q-pa-xs"},v_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},y_={class:"flex justify-end"},$l="Role Pengguna",__={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=Pe({search:"",...Re()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Role",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];$e(()=>{y()});const _=$=>Qe({message:`Hapus role ${$.name}?`,url:route("admin.user-role.delete",$.id),fetchItemsCallback:y,loading:s}),y=($=null)=>{De({pagination:m,filter:p,props:$,rows:o,url:route("admin.user-role.data"),loading:s,tableRef:r})},x=$=>Z.get(route("admin.user-role.detail",{id:$.id})),P=G(()=>n.screen.gt.sm?f:f.filter($=>$.name==="name"||$.name==="action"));return($,j)=>{const N=J("i-head"),V=J("authenticated-layout");return c(),h(Y,null,[e(N,{title:$l}),e(V,null,Le({title:l(()=>[b(i($l))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:j[0]||(j[0]=B=>d.value=!d.value)},null,8,["icon"]),$.$can("admin.user-role.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:j[1]||(j[1]=B=>a(Z).get($.route("admin.user-role.add")))})):k("",!0)]),default:l(()=>[t("div",b_,[e(Te,{class:"full-height-table",ref_key:"tableRef",ref:r,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":j[4]||(j[4]=B=>m.value=B),filter:p.search,loading:s.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:a(g)}),onRequest:y,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:B,message:U,filter:w})=>[t("div",v_,[t("span",null,i(U)+" "+i(w?" with term "+w:""),1)])]),body:l(B=>[e(Ce,{props:B,class:"cursor-pointer",onClick:U=>x(B.row)},{default:l(()=>[e(H,{key:"name",props:B,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(c(),D(q,{key:0,name:"person"})):k("",!0),b(" "+i(B.row.name),1)])]),_:2},1032,["props"]),e(H,{key:"description",props:B,class:"wrap-column"},{default:l(()=>[b(i(B.row.description),1)]),_:2},1032,["props"]),e(H,{key:"action",props:B},{default:l(()=>[t("div",y_,[$.$can("admin.user-role.add")||$.$can("admin.user-role.edit")||$.$can("admin.user-role.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:j[3]||(j[3]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[$.$can("admin.user-role.add")?te((c(),D(ae,{key:0,clickable:"",onClick:X(U=>a(Z).get($.route("admin.user-role.duplicate",B.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>j[5]||(j[5]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),$.$can("admin.user-role.edit")?te((c(),D(ae,{key:1,clickable:"",onClick:X(U=>a(Z).get($.route("admin.user-role.edit",B.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>j[6]||(j[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),$.$can("admin.user-role.delete")?te((c(),D(ae,{key:2,onClick:X(U=>_(B.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>j[7]||(j[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",g_,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":j[2]||(j[2]=B=>p.search=B),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},k_=Object.freeze(Object.defineProperty({__proto__:null,default:__},Symbol.toStringTag,{value:"Module"})),w_={class:"q-gutter-sm"},h_={class:"q-gutter-sm"},$_={class:"row justify-center"},x_={class:"col col-md-6 q-pa-xs"},S_={class:"row"},V_={class:"detail"},q_={key:0},C_={key:0},T_={key:1},P_={key:2},xl="Rincian Pengguna",O_={__name:"Detail",setup(u){const n=be();return(d,o)=>{const s=J("i-head"),r=J("i-link"),v=J("authenticated-layout");return c(),h(Y,null,[e(s,{title:xl}),e(v,{"show-drawer-button":!0},{title:l(()=>[b(i(xl))]),"left-button":l(()=>[t("div",w_,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=g=>d.$inertia.get(d.route("admin.user.index")))})])]),"right-button":l(()=>[t("div",h_,[d.$can("admin.user.edit")&&a(n).props.data.id!=a(n).props.auth.user.id?(c(),D(A,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:o[1]||(o[1]=g=>d.$inertia.get(d.route("admin.user.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[t("div",$_,[t("div",x_,[t("div",S_,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),t("table",V_,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"125px"}},"ID Pengguna",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.username),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Nama Pengguna",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Jenis Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(d.$CONSTANTS.USER_TYPES[a(n).props.data.type]),1)]),a(n).props.data.roles.length>0?(c(),h("tr",q_,[o[8]||(o[8]=t("td",null,"Peran Pengguna",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,[(c(!0),h(Y,null,Ke(a(n).props.data.roles,(g,p)=>(c(),h("div",{key:g.id,class:"inline"},[e(r,{href:d.route("admin.user-role.detail",{id:g.id})},{default:l(()=>[b(i(g.name),1)]),_:2},1032,["href"]),p<a(n).props.data.roles.length-1?(c(),h("span",C_,", ")):k("",!0)]))),128))])])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Dibuat",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.created_at)),1)]),a(n).props.data.updated_at?(c(),h("tr",T_,[o[12]||(o[12]=t("td",null,"Diperbarui",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.updated_at)),1)])):k("",!0),t("tr",null,[o[14]||(o[14]=t("td",null,"Terakhir login",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.last_login_datetime?d.$dayjs(a(n).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),a(n).props.data.last_activity_datetime?(c(),h("tr",P_,[o[17]||(o[17]=t("td",null,"Aktifitas Terakhir",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,[b(i(d.$dayjs(a(n).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),o[16]||(o[16]=t("br",null,null,-1)),b(i(a(n).props.data.last_activity_description),1)])])):k("",!0)])])]),_:1})]),_:1})])])])]),_:1})],64)}}},R_=Object.freeze(Object.defineProperty({__proto__:null,default:O_},Symbol.toStringTag,{value:"Module"}));function D_(u){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(u)}const I_={class:"q-gutter-sm"},A_={class:"row justify-center"},U_={class:"col col-md-6 q-pa-xs"},E_={__name:"Editor",setup(u){const n=at(window.CONSTANTS.USER_TYPES),d=be(),o=d.props.roles,s=d.props.data.id?"Edit Pengguna":"Tambah Pengguna",r=d.props.data.roles,v=Array.isArray(r)?r.map(m=>m.id):[],g=Me({id:d.props.data.id,name:d.props.data.name,username:d.props.data.username,password:"",type:d.props.data.type?d.props.data.type:n[0].value,active:!!d.props.data.active,roles:v}),p=()=>lt({form:g,url:route("admin.user.save")});return(m,f)=>{const _=J("i-head"),y=J("authenticated-layout");return c(),h(Y,null,[e(_,{title:a(s)},null,8,["title"]),e(y,{"show-drawer-button":!0},{title:l(()=>[b(i(a(s)),1)]),"left-button":l(()=>[t("div",I_,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=x=>m.$goBack())})])]),default:l(()=>[t("div",A_,[t("div",U_,[e(Be,{class:"row",onSubmit:X(p,["prevent"])},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=x=>a(g).id=x)},null,512),[[ut,a(g).id]]),e(oe,{autofocus:"",modelValue:a(g).username,"onUpdate:modelValue":f[2]||(f[2]=x=>a(g).username=x),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:a(g).processing,error:!!a(g).errors.username,"error-message":a(g).errors.username,rules:[x=>x&&x.length>0||"Username harus diisi.",x=>a(D_)(x)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(g).name,"onUpdate:modelValue":f[3]||(f[3]=x=>a(g).name=x),modelModifiers:{trim:!0},label:"Nama",error:!!a(g).errors.name,disable:a(g).processing,"error-message":a(g).errors.name,rules:[x=>x&&x.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(g).password,"onUpdate:modelValue":f[4]||(f[4]=x=>a(g).password=x),type:"password",label:"Kata Sandi","lazy-rules":"",disable:a(g).processing,error:!!a(g).errors.password,"error-message":a(g).errors.password,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:a(g).type,"onUpdate:modelValue":f[5]||(f[5]=x=>a(g).type=x),label:"Jenis Akun",options:a(n),"map-options":"","emit-value":"","lazy-rules":"",disable:a(g).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(g).errors.type,"error-message":a(g).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),a(g).type=="standard_user"?(c(),D(ie,{key:0,modelValue:a(g).roles,"onUpdate:modelValue":f[6]||(f[6]=x=>a(g).roles=x),label:"Peran",options:a(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:a(g).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(g).errors.roles||!!a(g).errors["roles.0"],"error-message":a(g).errors.roles||a(g).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(ma,{modelValue:a(g).active,"onUpdate:modelValue":f[7]||(f[7]=x=>a(g).active=x),disable:a(g).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(g).processing,onClick:p},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",class:"text-black",disable:a(g).processing,onClick:f[8]||(f[8]=x=>m.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},j_=Object.freeze(Object.defineProperty({__proto__:null,default:E_},Symbol.toStringTag,{value:"Module"})),N_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},M_={class:"q-pa-xs"},B_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},z_={class:"elipsis",style:{"max-width":"200px"}},F_={class:"flex justify-end"},Sl="Pengguna",L_={__name:"Index",setup(u){const n=[{value:"all",label:"Semua"},...at(window.CONSTANTS.USER_TYPES)],d=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=be(),s=xe(),r=o.props.auth.user,v=C([]),g=C(!0),p=C(!1),m=Pe({type:"all",roles:[],status:"active",search:""}),f=o.props.roles.map(w=>({value:w.id,label:w.name})),_=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),y=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];$e(()=>{P()});const x=()=>P(),P=(w=null)=>De({pagination:_,props:w,rows:v,loading:g,filter:m,url:route("admin.user.data"),tableRef:V}),$=w=>Qe({url:route("admin.user.delete",w.id),message:`Hapus pengguna ${w.username}?`,fetchItemsCallback:P,loading:g}),j=G(()=>s.screen.gt.sm?y:y.filter(w=>w.name==="username"||w.name==="action")),N=w=>Z.get(route("admin.user.detail",w.id)),V=C(null),B=C(null),U=We(B);return(w,O)=>{const T=J("i-head"),z=J("authenticated-layout");return c(),h(Y,null,[e(T,{title:Sl}),e(z,null,Le({title:l(()=>[b(i(Sl))]),"right-button":l(()=>[e(A,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=E=>p.value=!p.value)},null,8,["icon"]),w.$can("admin.user.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:O[1]||(O[1]=E=>a(Z).get(w.route("admin.user.add")))})):k("",!0)]),default:l(()=>[t("div",M_,[e(Te,{ref_key:"tableRef",ref:V,class:"full-height-table",style:ze({height:a(U)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":O[7]||(O[7]=E=>_.value=E),filter:m.search,loading:g.value,columns:j.value,rows:v.value,"rows-per-page-options":[10,25,50],onRequest:P,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:E,message:S,term:F})=>[t("div",B_,[t("span",null,i(S)+" "+i(F?" with term "+F:""),1)])]),body:l(E=>[e(Ce,{props:E,class:he([E.row.active?"":"bg-red-1","cursor-pointer"]),onClick:S=>N(E.row)},{default:l(()=>[e(H,{key:"username",props:E},{default:l(()=>[t("div",null,[a(s).screen.gt.sm?k("",!0):(c(),h(Y,{key:0},[e(q,{name:"person",class:"inline-icon"}),O[8]||(O[8]=b(" Username: "))],64)),b(" "+i(E.row.username),1)]),a(s).screen.gt.sm?k("",!0):(c(),h(Y,{key:0},[t("div",null,[e(q,{name:"person",class:"inline-icon"}),b(" Nama: "+i(E.row.name),1)]),t("div",z_,[e(q,{name:"group",class:"inline-icon"}),O[9]||(O[9]=b(" Jenis Akun: ")),t("span",null,i(w.$CONSTANTS.USER_TYPES[E.row.type]),1)]),t("div",null,[e(q,{name:"group",class:"inline-icon"}),b(" Peran: "+i(E.row.roles.map(S=>S.name).join(",")),1)])],64))]),_:2},1032,["props"]),e(H,{key:"name",props:E},{default:l(()=>[b(i(E.row.name),1)]),_:2},1032,["props"]),e(H,{key:"role",props:E,align:"center"},{default:l(()=>[t("span",null,i(w.$CONSTANTS.USER_TYPES[E.row.type]),1)]),_:2},1032,["props"]),e(H,{key:"action",props:E},{default:l(()=>[t("div",F_,[w.$can("admin.user.add")||w.$can("admin.user.edit")||w.$can("admin.user.delete")?(c(),D(A,{key:0,disable:E.row.id==a(r).id||E.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[6]||(O[6]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[w.$can("admin.user.add")?te((c(),D(ae,{key:0,clickable:"",onClick:X(S=>a(Z).get(w.route("admin.user.duplicate",E.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>O[10]||(O[10]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),w.$can("admin.user.edit")?te((c(),D(ae,{key:1,clickable:"",onClick:X(S=>a(Z).get(w.route("admin.user.edit",E.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>O[11]||(O[11]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),w.$can("admin.user.delete")?te((c(),D(ae,{key:2,onClick:X(S=>$(E.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>O[12]||(O[12]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[p.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:B},{default:l(()=>[t("div",N_,[e(ie,{modelValue:m.type,"onUpdate:modelValue":[O[2]||(O[2]=E=>m.type=E),x],class:"custom-select col-xs-12 col-sm-2",options:n,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ie,{modelValue:m.status,"onUpdate:modelValue":[O[3]||(O[3]=E=>m.status=E),x],class:"custom-select col-xs-12 col-sm-2",options:d,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ie,{modelValue:m.roles,"onUpdate:modelValue":[O[4]||(O[4]=E=>m.roles=E),x],class:"custom-select col-xs-12 col-sm-2",options:a(f),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":O[5]||(O[5]=E=>m.search=E),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},H_=Object.freeze(Object.defineProperty({__proto__:null,default:L_},Symbol.toStringTag,{value:"Module"})),K_={class:"q-gutter-sm"},Y_={class:"col col-lg-6 q-pa-xs"},W_={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},Q_={class:"row q-col-gutter-sm q-mb-md"},J_={key:0},G_={class:"text-bold"},X_={key:0},Z_={class:"text-caption text-grey-8"},ek={key:1},Vl="Buat Penyesuaian Stok",tk={__name:"Create",setup(u){const n=be(),d=C(!1),o=n.props.products,{filteredCategories:s,filterCategories:r}=qa(n.props.categories),{filteredSuppliers:v,filterSupplierFn:g}=Ca(n.props.suppliers),p=C({search:null,category_id:null,supplier_id:null}),m=C([]),f=Me({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),_=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(N,V)=>K(N)+" "+V.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],y=at(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),x=G(()=>o.filter(N=>{let V=!0;if(d.value&&!m.value.find(B=>B.id===N.id))return!1;if(p.value.search){const B=p.value.search.toLowerCase();V=N.name.toLowerCase().includes(B)||N.description.toLowerCase().includes(B)||N.barcode&&N.barcode.toLowerCase().includes(B)}return V&&p.value.category_id&&(V=N.category_id===p.value.category_id),V&&p.value.supplier_id&&(V=N.supplier_id===p.value.supplier_id),V})),P=()=>{Nt.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{f.product_ids=m.value.map(N=>N.id),Zt(f,{datetime:"YYYY-MM-DD HH:mm:ss"}),lt({form:f,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},$=xe(),j=G(()=>$.screen.gt.sm?_:_.filter(N=>N.name==="name"));return(N,V)=>{const B=J("i-head"),U=J("authenticated-layout");return c(),h(Y,null,[e(B,{title:Vl}),e(U,{"show-drawer-button":!0},{title:l(()=>[b(i(Vl))]),"left-button":l(()=>[t("div",K_,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:V[0]||(V[0]=w=>a(Z).get(N.route("admin.stock-adjustment.index")))})])]),"right-button":l(()=>[e(A,{icon:"cancel",disable:a(f).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:V[1]||(V[1]=w=>a(Z).get(N.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(A,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:a(f).processing||m.value.length==0,class:"q-ml-sm",onClick:P},null,8,["disable"])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Y_,[e(Be,{class:"row",onSubmit:X(P,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-sm"},{default:l(()=>{var w,O,T;return[V[10]||(V[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Yt,{modelValue:a(f).datetime,"onUpdate:modelValue":V[2]||(V[2]=z=>a(f).datetime=z),label:"Waktu",error:!!a(f).errors.datetime,disable:a(f).processing,"error-message":a(f).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ie,{modelValue:a(f).type,"onUpdate:modelValue":V[3]||(V[3]=z=>a(f).type=z),options:a(y),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(f).errors.type,disable:a(f).processing,"map-options":"","emit-value":"","error-message":a(f).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(oe,{modelValue:a(f).notes,"onUpdate:modelValue":V[4]||(V[4]=z=>a(f).notes=z),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(f).processing,error:!!a(f).errors.notes,"error-message":a(f).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),m.value.length===0||(w=a(n).props.errors)!=null&&w.product_ids?(c(),h("div",W_,[m.value.length===0?(c(),h(Y,{key:0},[b(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(O=a(n).props.errors)!=null&&O.product_ids?(c(),h(Y,{key:1},[b(i((T=a(n).props.errors)==null?void 0:T.product_ids),1)],64)):k("",!0)])):k("",!0),V[11]||(V[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",Q_,[e(oe,{modelValue:p.value.search,"onUpdate:modelValue":V[5]||(V[5]=z=>p.value.search=z),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(ie,{modelValue:p.value.category_id,"onUpdate:modelValue":V[6]||(V[6]=z=>p.value.category_id=z),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(s),"map-options":"",dense:"","emit-value":"",onFilter:a(r),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(ie,{modelValue:p.value.supplier_id,"onUpdate:modelValue":V[7]||(V[7]=z=>p.value.supplier_id=z),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(v),"map-options":"",dense:"","emit-value":"",onFilter:a(g),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:V[8]||(V[8]=z=>d.value=!d.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},i(d.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:j.value,rows:x.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:m.value,"onUpdate:selected":V[9]||(V[9]=z=>m.value=z)},{"body-cell-name":l(z=>[e(H,{props:z},{default:l(()=>[a($).screen.lt.md?(c(),h("div",J_,[t("div",G_,i(z.row.name),1),z.row.category?(c(),h("div",X_,i(z.row.category.name),1)):k("",!0),t("div",Z_,i(a(K)(z.row.stock))+" "+i(z.row.uom),1)])):(c(),h("div",ek,i(z.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ak=Object.freeze(Object.defineProperty({__proto__:null,default:tk},Symbol.toStringTag,{value:"Module"})),lk={class:"q-gutter-sm"},ok={class:"q-gutter-sm"},nk={class:"row justify-center"},sk={class:"col col-lg-8 q-pa-sm"},rk={class:"row"},ik={class:"detail"},dk={key:0},uk={key:1},mk={class:"text-grey-9"},ck={__name:"Detail",setup(u){const n=be(),d=`Rincian #${n.props.data.formatted_id}`,o=n.props.details,s=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:p=>K(p)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:p=>K(p)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:p=>K(p)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],r=xe(),v=G(()=>r.screen.gt.sm?s:s.filter(p=>p.name==="no")),g=()=>{window.open(route("admin.stock-adjustment.print",{id:n.props.data.id}),"_blank")};return(p,m)=>{const f=J("i-head"),_=J("i-link"),y=J("authenticated-layout");return c(),h(Y,null,[e(f,{title:d}),e(y,{"show-drawer-button":!0},{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",lk,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=x=>p.$inertia.get(p.route("admin.stock-adjustment.index")))})])]),"right-button":l(()=>[t("div",ok,[e(A,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[1]||(m[1]=x=>g())})])]),default:l(()=>[t("div",nk,[t("div",sk,[t("div",rk,[e(ce,{square:"",flat:"",bordered:"",class:"q-card col"},{default:l(()=>[e(le,null,{default:l(()=>[m[22]||(m[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",ik,[t("tbody",null,[t("tr",null,[m[2]||(m[2]=t("td",{style:{width:"120px"}},"Kode",-1)),m[3]||(m[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+i(a(n).props.data.formatted_id),1)]),t("tr",null,[m[4]||(m[4]=t("td",null,"Jenis",-1)),m[5]||(m[5]=t("td",null,":",-1)),t("td",null,i(p.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[a(n).props.data.type]),1)]),t("tr",null,[m[6]||(m[6]=t("td",null,"Status",-1)),m[7]||(m[7]=t("td",null,":",-1)),t("td",null,i(p.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[a(n).props.data.status]),1)]),t("tr",null,[m[8]||(m[8]=t("td",null,"Waktu",-1)),m[9]||(m[9]=t("td",null,":",-1)),t("td",null,i(a(fe)(a(n).props.data.datetime)),1)]),a(n).props.data.created_at?(c(),h("tr",dk,[m[11]||(m[11]=t("td",null,"Dibuat Oleh",-1)),m[12]||(m[12]=t("td",null,":",-1)),t("td",null,[a(n).props.data.creator?(c(),h(Y,{key:0},[e(_,{href:p.route("admin.user.detail",{id:a(n).props.data.creator})},{default:l(()=>[b(i(a(n).props.data.creator.username)+" - "+i(a(n).props.data.creator.name),1)]),_:1},8,["href"]),m[10]||(m[10]=b(" - "))],64)):k("",!0),b(" "+i(a(fe)(a(n).props.data.created_at)),1)])])):k("",!0),a(n).props.data.updater?(c(),h("tr",uk,[m[14]||(m[14]=t("td",null,"Diperbarui oleh",-1)),m[15]||(m[15]=t("td",null,":",-1)),t("td",null,[a(n).props.data.updater?(c(),h(Y,{key:0},[e(_,{href:p.route("admin.user.detail",{id:a(n).props.data.updater})},{default:l(()=>[b(i(a(n).props.data.updater.username)+" - "+i(a(n).props.data.updater.name),1)]),_:1},8,["href"]),m[13]||(m[13]=b(" - "))],64)):k("",!0),b(" "+i(a(fe)(a(n).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[m[16]||(m[16]=t("td",null,"Total Modal",-1)),m[17]||(m[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:he(a(n).props.data.total_cost<0?"text-red-10":a(n).props.data.total_cost>0?"text-green-10":"")},i(a(na)(a(n).props.data.total_cost)),3)])]),t("tr",null,[m[18]||(m[18]=t("td",null,"Total Harga",-1)),m[19]||(m[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:he(a(n).props.data.total_price<0?"text-red-10":a(n).props.data.total_price>0?"text-green-10":"")},i(a(na)(a(n).props.data.total_price)),3)])]),t("tr",null,[m[20]||(m[20]=t("td",null,"Catatan",-1)),m[21]||(m[21]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.notes),1)])])])]),_:1}),e(le,null,{default:l(()=>[m[28]||(m[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Te,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:v.value,rows:a(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":l(x=>[e(H,{props:x},{default:l(()=>[a(r).screen.lt.md?(c(),h(Y,{key:1},[t("div",mk,[t("b",null,"#"+i(x.rowIndex+1),1),m[23]||(m[23]=b(" - ")),e(_,{href:p.route("admin.product.detail",{id:x.row.product_id})},{default:l(()=>[b(i(x.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[b(" Stok Lama: "+i(a(K)(x.row.old_quantity))+" "+i(x.row.uom),1),m[25]||(m[25]=t("br",null,null,-1)),b(" Stok Baru: "+i(a(K)(x.row.new_quantity))+" "+i(x.row.uom),1),m[26]||(m[26]=t("br",null,null,-1)),t("div",{class:he(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},[b(" Selisih: "+i((x.row.balance>0?"+":"")+a(K)(x.row.balance))+" "+i(x.row.uom),1),m[24]||(m[24]=t("br",null,null,-1)),b(" (Rp. "+i(a(K)(x.row.subtotal_cost))+" / Rp. "+i(a(K)(x.row.subtotal_price))+") ",1)],2),m[27]||(m[27]=t("br",null,null,-1)),b(" "+i(x.row.notes),1)])],64)):(c(),h(Y,{key:0},[b(i(x.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":l(x=>[e(H,{props:x},{default:l(()=>[e(_,{href:p.route("admin.product.detail",{id:x.row.product_id})},{default:l(()=>[b(i(x.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":l(x=>[e(H,{props:x},{default:l(()=>[t("div",{class:he(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},i((x.row.balance>0?"+":"")+a(K)(x.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":l(x=>[e(H,{props:x},{default:l(()=>[t("div",{class:he(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},i(a(K)(x.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":l(x=>[e(H,{props:x},{default:l(()=>[t("div",{class:he(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},i(a(K)(x.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},pk=Object.freeze(Object.defineProperty({__proto__:null,default:ck},Symbol.toStringTag,{value:"Module"})),fk={class:"q-gutter-sm"},gk={class:"col col-lg-6 q-pa-xs"},bk={class:"text-bold"},vk={key:0},yk={class:"text-caption text-grey-8"},ql="Penyesuaian Stok",_k={__name:"Editor",setup(u){const n=xe(),d=be(),o=Me({id:d.props.item.id,type:d.props.item.type,datetime:new Date(d.props.item.datetime),notes:d.props.item.notes,action:"save",details:[]}),s=at(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),r=C(d.props.details.map(f=>(typeof f.new_quantity=="string"&&(f.new_quantity=parseFloat(f.new_quantity)),f))),v=f=>{const _=()=>{o.action=f,o.details=r.value.map(y=>({id:y.id,new_quantity:y.new_quantity})),Zt(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),lt({form:o,url:route("admin.stock-adjustment.save")})};f==="close"||f==="cancel"?Nt.create({title:"Konfirmasi",message:f==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{_()}).onCancel(()=>{}):_()},g=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:f=>K(f)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:f=>K(f)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(f,_)=>K(_.new_quantity-_.old_quantity)}],p=G(()=>n.screen.gt.sm?g:g.filter(f=>f.name==="product_name"||f.name==="new_quantity")),m=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(f,_)=>{const y=J("i-head"),x=J("authenticated-layout");return c(),h(Y,null,[e(y,{title:ql}),e(x,{"show-drawer-button":!0},{title:l(()=>[b(i(ql))]),"left-button":l(()=>[t("div",fk,[a(n).screen.gt.sm?(c(),D(A,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=P=>f.$inertia.get(f.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":l(()=>[e(A,{icon:"save",onClick:_[1]||(_[1]=P=>v("save")),disable:a(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(A,{icon:"check",onClick:_[2]||(_[2]=P=>v("close")),disable:a(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),f.$can("admin.product.import")||f.$can("admin.product:view-cost")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:_[5]||(_[5]=X(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[te((c(),D(ae,{clickable:"",onClick:_[3]||(_[3]=P=>m())},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"print"})]),_:1}),e(M,null,{default:l(()=>_[10]||(_[10]=[b(" Cetak Kartu Stok")])),_:1})]),_:1})),[[re],[me]]),te((c(),D(ae,{clickable:"",onClick:_[4]||(_[4]=X(P=>v("cancel"),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"cancel",color:"red"})]),_:1}),e(M,{class:"text-red"},{default:l(()=>_[11]||(_[11]=[b("Batalkan")])),_:1})]),_:1})),[[re],[me]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",gk,[e(Be,{class:"row",onSubmit:X(v,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>_[12]||(_[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[6]||(_[6]=P=>a(o).id=P)},null,512),[[ut,a(o).id]]),e(Yt,{modelValue:a(o).datetime,"onUpdate:modelValue":_[7]||(_[7]=P=>a(o).datetime=P),label:"Waktu",error:!!a(o).errors.datetime,disable:a(o).processing,"error-message":a(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ie,{modelValue:a(o).type,"onUpdate:modelValue":_[8]||(_[8]=P=>a(o).type=P),options:a(s),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(o).errors.type,disable:a(o).processing,"map-options":"","emit-value":"","error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(oe,{modelValue:a(o).notes,"onUpdate:modelValue":_[9]||(_[9]=P=>a(o).notes=P),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-pa-xs"},{default:l(()=>[e(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:p.value,rows:r.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":l(P=>[e(H,{props:P},{default:l(()=>[t("div",bk,i(P.row.product_name),1),a(n).screen.lt.md?(c(),h("div",vk,[t("div",yk,[b(" Tercatat: "+i(a(K)(P.row.old_quantity))+" ",1),_[13]||(_[13]=t("br",null,null,-1)),b(" Selisih: "+i(a(K)(P.row.new_quantity-P.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":l(P=>[e(H,{props:P,class:"text-center"},{default:l(()=>[e(Ee,{modelValue:P.row[P.col.name],"onUpdate:modelValue":$=>P.row[P.col.name]=$,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},kk=Object.freeze(Object.defineProperty({__proto__:null,default:_k},Symbol.toStringTag,{value:"Module"}));function wk(){const u=xt();if(!u)throw new Error("useCan must be called within a component setup function.");return n=>u.proxy.$can(n)}const hk={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},$k={class:"q-pa-xs"},xk={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Sk={key:0,class:"flex q-gutter-xs"},Vk={class:"flex q-col-gutter-xs"},qk={key:0},Ck={key:1},Tk={key:0},Pk={class:"flex justify-end"},Cl="Penyesuaian Stok",Ok={__name:"Index",setup(u){const n=C([]),d=C(!0),o=C(!1),s=C(null),r=C(null),v=We(r),g=Lt(),p=Ht(),m=[{label:"Semua Tahun",value:"all"},{label:`${g}`,value:g},...Pt(g-2,g-1).reverse()],f=[{value:"all",label:"Semua Bulan"},...Ot()],_=Pe({search:"",year:g,month:p,status:"all",type:"all",...Re()}),y=[{value:"all",label:"Semua"},...at(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],x=[{value:"all",label:"Semua"},...at(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],P=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),$=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];$e(()=>{N()});const j=O=>Qe({message:`Hapus Penyesuaian Stok #${O.formatted_id}?`,url:route("admin.stock-adjustment.delete",O.id),fetchItemsCallback:N,loading:d}),N=(O=null)=>De({pagination:P,filter:_,props:O,rows:n,url:route("admin.stock-adjustment.data"),loading:d,tableRef:s}),V=()=>{N()},B=O=>{O.status=="draft"?Z.get(route("admin.stock-adjustment.editor",O.id)):Z.get(route("admin.stock-adjustment.detail",O.id))},U=xe(),w=G(()=>{let O=$;return wk()||(O=O.filter(T=>T.name!=="cost")),U.screen.gt.sm?O:O.filter(T=>T.name==="id"||T.name==="action")});return(O,T)=>{const z=J("i-head"),E=J("authenticated-layout");return c(),h(Y,null,[e(z,{title:Cl}),e(E,null,Le({"right-button":l(()=>[e(A,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=S=>o.value=!o.value)},null,8,["icon"]),O.$can("admin.stock-adjustment.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:T[1]||(T[1]=S=>a(Z).get(O.route("admin.stock-adjustment.create")))})):k("",!0)]),title:l(()=>[b(i(Cl))]),default:l(()=>[t("div",$k,[e(Te,{ref_key:"tableRef",ref:s,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:P.value,"onUpdate:pagination":T[8]||(T[8]=S=>P.value=S),filter:_.search,loading:d.value,columns:w.value,rows:n.value,"rows-per-page-options":[10,25,50],style:ze({height:a(v)}),onRequest:N,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:F,filter:Q})=>[t("div",xk,[t("span",null,i(F)+" "+i(Q?" with term "+Q:""),1)])]),body:l(S=>[e(Ce,{props:S,onClick:F=>B(S.row),class:"cursor-pointer"},{default:l(()=>[e(H,{key:"id",props:S},{default:l(()=>[a(U).screen.lt.md?(c(),h(Y,{key:1},[t("div",Vk,[t("div",null,"#"+i(S.row.formatted_id),1),t("div",null,[e(q,{name:"history"}),b(" "+i(a(fe)(S.row.datetime)),1)]),e(Ul,{dense:"",size:"sm",color:S.row.status==="draft"?"orange":S.row.status==="closed"?"green":S.row.status==="canceled"?"red":"",icon:S.row.status==="draft"?"emergency":S.row.status==="closed"?"check":S.row.status==="canceled"?"close":""},{default:l(()=>[b(i(O.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[S.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(q,{name:"category"}),b(" "+i(O.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[S.row.type]),1)]),S.row.created_by?(c(),h("div",qk,[e(q,{name:"person"}),T[9]||(T[9]=b(" Dibuat: ")),t("b",null,i(S.row.created_by.username),1),e(q,{name:"history"}),b(" "+i(a(fe)(S.row.created_at)),1)])):k("",!0),S.row.updated_by?(c(),h("div",Ck,[e(q,{name:"person"}),T[10]||(T[10]=b(" Diperbarui: ")),t("b",null,i(S.row.updated_by.username),1),e(q,{name:"history"}),b(" "+i(a(fe)(S.row.updated_at)),1)])):k("",!0),t("div",{class:he(S.row.total_cost<0?"text-red-10":S.row.total_cost>0?"text-green-10":"")},[e(q,{name:"money"}),O.$can("admin.product:view-cost")?(c(),h("span",Tk,"Rp. "+i(a(K)(S.row.total_cost))+" / ",1)):k("",!0),b(" Rp. "+i(a(K)(S.row.total_price)),1)],2)],64)):(c(),h("div",Sk," #"+i(S.row.formatted_id),1))]),_:2},1032,["props"]),e(H,{key:"datetime",props:S},{default:l(()=>[b(i(a(fe)(S.row.datetime)),1)]),_:2},1032,["props"]),e(H,{key:"status",props:S,class:"text-center"},{default:l(()=>[b(i(O.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[S.row.status]),1)]),_:2},1032,["props"]),e(H,{key:"type",props:S},{default:l(()=>[b(i(O.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[S.row.type]),1)]),_:2},1032,["props"]),e(H,{key:"total_cost",props:S},{default:l(()=>[O.$can("admin.product:view-cost")?(c(),h("div",{key:0,class:he(S.row.total_cost<0?"text-red-10":S.row.total_cost>0?"text-green-10":"")},i(a(K)(S.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"total_price",props:S},{default:l(()=>[t("div",{class:he(S.row.total_price<0?"text-red-10":S.row.total_price>0?"text-green-10":"")},i(a(K)(S.row.total_price)),3)]),_:2},1032,["props"]),e(H,{key:"notes",props:S},{default:l(()=>[b(i(S.row.notes),1)]),_:2},1032,["props"]),e(H,{key:"action",props:S},{default:l(()=>[t("div",Pk,[O.$can("admin.stock-adjustment.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:T[7]||(T[7]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[O.$can("admin.stock-adjustment.delete")?te((c(),D(ae,{key:0,onClick:X(F=>j(S.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>T[11]||(T[11]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:r},{default:l(()=>[t("div",hk,[e(ie,{modelValue:_.year,"onUpdate:modelValue":[T[2]||(T[2]=S=>_.year=S),V],options:m,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),_.year!="all"?(c(),D(ie,{key:0,modelValue:_.month,"onUpdate:modelValue":[T[3]||(T[3]=S=>_.month=S),V],options:f,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:_.year===null},null,8,["modelValue","disable"])):k("",!0),e(ie,{modelValue:_.status,"onUpdate:modelValue":[T[4]||(T[4]=S=>_.status=S),V],options:y,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{modelValue:_.type,"onUpdate:modelValue":[T[5]||(T[5]=S=>_.type=S),V],options:x,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":T[6]||(T[6]=S=>_.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Rk=Object.freeze(Object.defineProperty({__proto__:null,default:Ok},Symbol.toStringTag,{value:"Module"})),Dk={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ik={class:"q-pa-xs"},Ak={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Uk={key:0},Tl="Riwayat Stok",Ek={__name:"Index",setup(u){be();const n=C(null),d=C(null),o=We(d),s=Lt(),r=Ht(),v=[{label:"Semua Tahun",value:"all"},{label:`${s}`,value:s},...Pt(s-2,s-1).reverse()],g=[{value:"all",label:"Semua Bulan"},...Ot()],p=[{value:"all",label:"Semua"},...at(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],m=xe(),f=C(!1),_=C([]),y=C(!0),x=Pe({type:"all",search:"",year:s,month:r,...Re()}),P=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let $=[{name:"id",label:m.screen.lt.sm?"Item":"#",field:"id",align:"left",sortable:!0},{name:"created_at",label:"Waktu",field:"created_at",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"left"},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Qty Awal",field:"quantity_before",align:"right"},{name:"quantity_after",label:"Qty Akhir",field:"quantity_after",align:"right"},{name:"quantity",label:"Selisih",field:"quantity",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{const U=new URLSearchParams(window.location.search).get("page");U&&(P.value.page=parseInt(U)),j()});const j=(B=null)=>{De({pagination:P,filter:x,props:B,rows:_,url:route("admin.stock-movement.data"),loading:y,tableRef:n})},N=()=>{j()},V=G(()=>m.screen.lt.sm?$.filter(B=>B.name==="id"||B.name==="quantity"):$);return(B,U)=>{const w=J("i-head"),O=J("authenticated-layout");return c(),h(Y,null,[e(w,{title:Tl}),e(O,null,Le({title:l(()=>[b(i(Tl))]),"right-button":l(()=>[e(A,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=T=>f.value=!f.value)},null,8,["icon"])]),default:l(()=>[t("div",Ik,[e(Te,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:P.value,"onUpdate:pagination":U[5]||(U[5]=T=>P.value=T),filter:x.search,loading:y.value,columns:V.value,rows:_.value,"rows-per-page-options":[10,25,50],style:ze({height:a(o)}),onRequest:j,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:T,message:z,filter:E})=>[t("div",Ak,[t("span",null,i(z)+" "+i(E?" with term "+E:""),1)])]),body:l(T=>[e(Ce,{props:T},{default:l(()=>[e(H,{key:"id",props:T},{default:l(()=>[t("div",null,[a(m).screen.lt.sm?(c(),h(Y,{key:0},[t("div",null,[e(dt,null,{default:l(()=>[b(i(B.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[T.row.ref_type]),1)]),_:2},1024)]),e(q,{class:"inline-icon",name:"tag"})],64)):k("",!0),b(" "+i(T.row.formatted_id),1)]),a(m).screen.lt.sm?(c(),h(Y,{key:0},[t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),b(" "+i(a(fe)(T.row.created_at)),1)]),t("div",null,[e(q,{name:"token",class:"inline-icon"}),b(" "+i(T.row.product.name),1)]),t("div",{class:he(T.row.quantity>0?"text-positive":"text-negative")},[e(q,{class:"inline-icon",name:"compare_arrows"}),b(" "+i(a(K)(T.row.quantity_before))+" "+i(T.row.uom)+" → "+i(a(K)(T.row.quantity_after))+" "+i(T.row.uom),1)],2),e(we,{text:T.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"created_at",props:T},{default:l(()=>[b(i(a(fe)(T.row.created_at)),1)]),_:2},1032,["props"]),e(H,{key:"type",props:T},{default:l(()=>[b(i(B.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[T.row.ref_type])+" ",1),T.row.ref?(c(),h("span",Uk,i(T.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"product",props:T},{default:l(()=>[b(i(T.row.product.name),1)]),_:2},1032,["props"]),e(H,{key:"quantity_before",props:T},{default:l(()=>[b(i(a(K)(T.row.quantity_before))+" "+i(T.row.uom),1)]),_:2},1032,["props"]),e(H,{key:"quantity_after",props:T},{default:l(()=>[b(i(a(K)(T.row.quantity_after))+" "+i(T.row.uom),1)]),_:2},1032,["props"]),e(H,{key:"quantity",props:T,class:he(T.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[b(i(a(K)(T.row.quantity))+" "+i(T.row.uom),1)]),_:2},1032,["props","class"]),e(H,{key:"notes",props:T},{default:l(()=>[e(we,{text:T.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[f.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:d},{default:l(()=>[t("div",Dk,[e(ie,{modelValue:x.year,"onUpdate:modelValue":[U[1]||(U[1]=T=>x.year=T),N],options:v,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(c(),D(ie,{key:0,modelValue:x.month,"onUpdate:modelValue":[U[2]||(U[2]=T=>x.month=T),N],options:g,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ie,{modelValue:x.ref_type,"onUpdate:modelValue":[U[3]||(U[3]=T=>x.ref_type=T),N],options:p,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":U[4]||(U[4]=T=>x.search=T),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},jk=Object.freeze(Object.defineProperty({__proto__:null,default:Ek},Symbol.toStringTag,{value:"Module"})),Nk={class:"detail"},Mk={key:0},Bk={key:1},zk={key:2},Fk={key:3},Lk={key:4},Hk={key:5},Kk={key:6},Yk={key:0,class:"q-pt-md"},Ro={__name:"MainInfoTab",setup(u){const n=be(),d=()=>{Qe({message:`Hapus Pemasok ${n.props.data.name}?`,url:route("admin.supplier.delete",n.props.data.id),onSuccess:()=>{Z.get(route("admin.supplier.index"))}})};return(o,s)=>(c(),h(Y,null,[t("table",Nk,[t("tbody",null,[s[22]||(s[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[s[1]||(s[1]=t("td",{style:{width:"120px"}},"Kode",-1)),s[2]||(s[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(a(n).props.data.code),1)]),t("tr",null,[s[3]||(s[3]=t("td",null,"Nama",-1)),s[4]||(s[4]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.name),1)]),t("tr",null,[t("td",null,i(a(n).props.data.balance<0?"Utang":"Utang / Piutang"),1),s[5]||(s[5]=t("td",null,":",-1)),t("td",{class:he(a(n).props.data.balance<0?"text-red":"text-green")},i(a(na)(a(n).props.data.balance)),3)]),a(n).props.data.phone_1?(c(),h("tr",Mk,[s[6]||(s[6]=t("td",null,"No Telepon",-1)),s[7]||(s[7]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.phone_1),1)])):k("",!0),a(n).props.data.phone_2?(c(),h("tr",Bk,[s[8]||(s[8]=t("td",null,"No Telepon 2",-1)),s[9]||(s[9]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.phone_2),1)])):k("",!0),a(n).props.data.phone_3?(c(),h("tr",zk,[s[10]||(s[10]=t("td",null,"No Telepon 3",-1)),s[11]||(s[11]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.phone_3),1)])):k("",!0),a(n).props.data.address?(c(),h("tr",Fk,[s[12]||(s[12]=t("td",null,"Alamat",-1)),s[13]||(s[13]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.address),1)])):k("",!0),a(n).props.data.return_address?(c(),h("tr",Lk,[s[14]||(s[14]=t("td",null,"Alamat Retur",-1)),s[15]||(s[15]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.return_address),1)])):k("",!0),a(n).props.data.bank_account_name_1||a(n).props.data.bank_account_number_1||a(n).props.data.bank_account_holder_1?(c(),h("tr",Hk,[s[16]||(s[16]=t("td",null,"Rek 1",-1)),s[17]||(s[17]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.bank_account_name_1)+" "+i(a(n).props.data.bank_account_number_1)+" a.n. "+i(a(n).props.data.bank_account_holder_1),1)])):k("",!0),a(n).props.data.bank_account_name_2||a(n).props.data.bank_account_number_2||a(n).props.data.bank_account_holder_2?(c(),h("tr",Kk,[s[18]||(s[18]=t("td",null,"Rek 2",-1)),s[19]||(s[19]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.bank_account_name_2)+" "+i(a(n).props.data.bank_account_number_2)+" a.n. "+i(a(n).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[s[20]||(s[20]=t("td",null,"Status",-1)),s[21]||(s[21]=t("td",null,":",-1)),t("td",null,i(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(c(),h("div",Yk,[e(A,{icon:"delete",label:"Hapus",color:"negative",onClick:s[0]||(s[0]=r=>d())})])):k("",!0)],64))}},Wk=Object.freeze(Object.defineProperty({__proto__:null,default:Ro},Symbol.toStringTag,{value:"Module"})),Qk={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Jk={class:"text-bold"},Gk={class:"text-bold"},Xk={key:0},Do={__name:"OrderHistoryTab",setup(u){const n=be(),d=C([]),o=C(!0),s=Pe({customer_id:n.props.data.id,...Re()}),r=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{g()});const g=(f=null)=>De({pagination:r,filter:s,props:f,rows:d,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:n.props.data.id}}),loading:o}),p=xe(),m=G(()=>p.screen.gt.sm?v:v.filter(f=>f.name==="id"));return(f,_)=>(c(),D(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:r.value,"onUpdate:pagination":_[0]||(_[0]=y=>r.value=y),filter:s.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:y,message:x,filter:P})=>[t("div",Qk,[t("span",null,i(x)+" "+i(P?" with term "+P:""),1)])]),body:l(y=>[e(Ce,{props:y,class:"cursor-pointer",onClick:X(x=>a(Z).get(f.route("admin.purchase-order.detail",{id:y.row.id})),["stop"])},{default:l(()=>[e(H,{key:"id",props:y},{default:l(()=>[t("div",Jk,[e(q,{class:"inline-icon",name:"tag"}),b(" "+i(y.row.formatted_id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),b(" "+i(a(fe)(y.row.datetime)),1)]),a(p).screen.lt.md?(c(),h(Y,{key:0},[t("div",Gk,[e(q,{name:"money",class:"inline-icon"}),b(" Rp. "+i(a(K)(y.row.grand_total)),1)]),y.row.notes?(c(),h("div",Xk,[e(we,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(dt,{color:y.row.status=="closed"?"green":"red"},{default:l(()=>[b(i(f.$CONSTANTS.SALES_ORDER_STATUSES[y.row.status]),1)]),_:2},1032,["color"]),e(dt,{color:y.row.payment_status=="fully_paid"?"green":"red",class:"q-ml-xs"},{default:l(()=>[b(i(f.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[y.row.payment_status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(H,{key:"grand_total",props:y},{default:l(()=>[t("div",null,i(a(K)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(H,{key:"notes",props:y,class:"wrap-column"},{default:l(()=>[e(we,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Zk=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),ew={class:"q-gutter-sm"},tw={class:"q-gutter-sm"},aw={class:"col col-lg-6 q-pa-xs"},lw={class:"row"},Pl="Rincian Pemasok",ow={__name:"Detail",setup(u){const n=be(),d=C("main");return xe(),(o,s)=>{const r=J("i-head"),v=J("authenticated-layout");return c(),h(Y,null,[e(r,{title:Pl}),e(v,null,{title:l(()=>[b(i(Pl))]),"left-button":l(()=>[t("div",ew,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=g=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":l(()=>[t("div",tw,[o.$can("admin.supplier.edit")?(c(),D(A,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:s[1]||(s[1]=g=>a(Z).get(o.route("admin.supplier.edit",{id:a(n).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(c(),D(A,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:s[2]||(s[2]=g=>a(Z).get(o.route("admin.supplier.edit",{id:a(n).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(c(),D(A,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:s[3]||(s[3]=g=>a(Z).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",aw,[t("div",lw,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Dt,{modelValue:d.value,"onUpdate:modelValue":s[4]||(s[4]=g=>d.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(Ze,{name:"main",label:"Info Utama"}),e(Ze,{name:"order-history",label:"Riwayat Order"}),e(Ze,{name:"version-history",label:"Riwayat Dokumen"})]),_:1},8,["modelValue"]),e(It,{modelValue:d.value,"onUpdate:modelValue":s[5]||(s[5]=g=>d.value=g),animated:""},{default:l(()=>[e(et,{name:"main"},{default:l(()=>[e(Ro)]),_:1}),e(et,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(Do)]),_:1}),e(et,{name:"version-history",class:"q-pa-xs"},{default:l(()=>[e(Sa,{"document-id":a(n).props.data.id,"document-type":"supplier"},null,8,["document-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},nw=Object.freeze(Object.defineProperty({__proto__:null,default:ow},Symbol.toStringTag,{value:"Module"})),sw={class:"q-gutter-sm"},rw={class:"col col-md-6 q-pa-xs"},iw={class:"row q-col-gutter-md"},dw={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},uw={key:2,class:"row q-col-gutter-md"},mw={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},cw={key:4,class:"row q-col-gutter-md"},pw={key:5,class:"row q-col-gutter-md"},fw={style:{"margin-left":"-10px"},class:"q-mt-md"},gw={class:"q-mt-sm"},bw={__name:"Editor",setup(u){const n=be(),d=(n.props.data.id?"Edit":"Tambah")+" Pemasok",o=Me({id:n.props.data.id,code:n.props.data.code,name:n.props.data.name,phone_1:n.props.data.phone_1,phone_2:n.props.data.phone_2,phone_3:n.props.data.phone_3,url_1:n.props.data.url_1,url_2:n.props.data.url_2,bank_account_name_1:n.props.data.bank_account_name_1,bank_account_holder_1:n.props.data.bank_account_holder_1,bank_account_number_1:n.props.data.bank_account_number_1,bank_account_name_2:n.props.data.bank_account_name_2,bank_account_holder_2:n.props.data.bank_account_holder_2,bank_account_number_2:n.props.data.bank_account_number_2,address:n.props.data.address,return_address:n.props.data.return_address,active:!!n.props.data.active}),s=C(!0),r=()=>lt({form:o,url:route("admin.supplier.save")});return(v,g)=>{const p=J("i-head"),m=J("authenticated-layout");return c(),h(Y,null,[e(p,{title:d}),e(m,{"show-drawer-button":!0},{title:l(()=>[b(i(d))]),"left-button":l(()=>[t("div",sw,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=f=>v.$goBack())})])]),"right-button":l(()=>[e(A,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(o).processing,onClick:g[1]||(g[1]=f=>r()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",rw,[e(Be,{class:"row",onSubmit:X(r,["prevent"]),onValidationError:a(je)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[2]||(g[2]=f=>a(o).id=f)},null,512),[[ut,a(o).id]]),e(oe,{modelValue:a(o).code,"onUpdate:modelValue":g[3]||(g[3]=f=>a(o).code=f),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[f=>f&&f.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).name,"onUpdate:modelValue":g[4]||(g[4]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",iw,[e(oe,{modelValue:a(o).phone_1,"onUpdate:modelValue":g[5]||(g[5]=f=>a(o).phone_1=f),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_1,"error-message":a(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),s.value?k("",!0):(c(),D(oe,{key:0,modelValue:a(o).phone_2,"onUpdate:modelValue":g[6]||(g[6]=f=>a(o).phone_2=f),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_2,"error-message":a(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),s.value?k("",!0):(c(),D(oe,{key:1,modelValue:a(o).phone_3,"onUpdate:modelValue":g[7]||(g[7]=f=>a(o).phone_3=f),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_3,"error-message":a(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(oe,{modelValue:a(o).address,"onUpdate:modelValue":g[8]||(g[8]=f=>a(o).address=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),s.value?k("",!0):(c(),D(oe,{key:0,modelValue:a(o).return_address,"onUpdate:modelValue":g[9]||(g[9]=f=>a(o).return_address=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.return_address,"error-message":a(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),s.value?k("",!0):(c(),h("div",dw," Rekening 1 ")),s.value?k("",!0):(c(),h("div",uw,[e(oe,{modelValue:a(o).bank_account_name_1,"onUpdate:modelValue":g[10]||(g[10]=f=>a(o).bank_account_name_1=f),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_1,"error-message":a(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_number_1,"onUpdate:modelValue":g[11]||(g[11]=f=>a(o).bank_account_number_1=f),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_1,"error-message":a(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_holder_1,"onUpdate:modelValue":g[12]||(g[12]=f=>a(o).bank_account_holder_1=f),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_1,"error-message":a(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),s.value?k("",!0):(c(),h("div",mw," Rekening 2 ")),s.value?k("",!0):(c(),h("div",cw,[e(oe,{modelValue:a(o).bank_account_name_2,"onUpdate:modelValue":g[13]||(g[13]=f=>a(o).bank_account_name_2=f),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_2,"error-message":a(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_number_2,"onUpdate:modelValue":g[14]||(g[14]=f=>a(o).bank_account_number_2=f),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_2,"error-message":a(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_holder_2,"onUpdate:modelValue":g[15]||(g[15]=f=>a(o).bank_account_holder_2=f),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_2,"error-message":a(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),s.value?k("",!0):(c(),h("div",pw,[e(oe,{modelValue:a(o).url_1,"onUpdate:modelValue":g[16]||(g[16]=f=>a(o).url_1=f),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_1,"error-message":a(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).url_2,"onUpdate:modelValue":g[17]||(g[17]=f=>a(o).url_2=f),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_2,"error-message":a(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",fw,[e(ra,{class:"full-width q-pl-none",modelValue:a(o).active,"onUpdate:modelValue":g[18]||(g[18]=f=>a(o).active=f),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",gw,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:g[19]||(g[19]=X(f=>s.value=!s.value,["stop"]))},[e(q,{name:s.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),b(" "+i(s.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},vw=Object.freeze(Object.defineProperty({__proto__:null,default:bw},Symbol.toStringTag,{value:"Module"})),yw={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},_w={class:"q-pa-xs"},kw={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ww={key:0},hw={key:1},$w={class:"flex justify-end"},Ol="Pemasok",xw={__name:"Index",setup(u){const n=xe(),d=C(!1),o=C([]),s=C(!0),r=C(null),v=C(null),g=We(v),p=Pe({search:"",status:"active",...Re()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];$e(()=>{x()});const y=N=>Qe({message:`Hapus pemasok ${N.name}?`,url:route("admin.supplier.delete",N.id),fetchItemsCallback:x,loading:s}),x=(N=null)=>{De({pagination:m,filter:p,props:N,rows:o,url:route("admin.supplier.data"),loading:s,tableRef:r})},P=()=>x(),$=N=>Z.get(route("admin.supplier.detail",{id:N.id})),j=G(()=>n.screen.gt.sm?f:f.filter(N=>N.name==="code"||N.name==="action"));return(N,V)=>{const B=J("i-head"),U=J("authenticated-layout");return c(),h(Y,null,[e(B,{title:Ol}),e(U,null,Le({title:l(()=>[b(i(Ol))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:V[0]||(V[0]=w=>d.value=!d.value)},null,8,["icon"]),N.$can("admin.supplier.add")?(c(),D(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:V[1]||(V[1]=w=>a(Z).get(N.route("admin.supplier.add")))})):k("",!0)]),default:l(()=>[t("div",_w,[e(Te,{class:"full-height-table",ref_key:"tableRef",ref:r,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":V[5]||(V[5]=w=>m.value=w),filter:p.search,loading:s.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:a(g)}),onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Ie,{showing:"",color:"red"})]),"no-data":l(({icon:w,message:O,filter:T})=>[t("div",kw,[t("span",null,i(O)+" "+i(T?" with term "+T:""),1)])]),body:l(w=>[e(Ce,{props:w,class:he([w.row.active?"":"bg-red-1","cursor-pointer"]),onClick:O=>$(w.row)},{default:l(()=>[e(H,{key:"code",props:w,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(c(),D(q,{key:0,name:"person"})):k("",!0),b(" "+i(w.row.code)+" ",1),a(n).screen.lt.md?(c(),h(Y,{key:1},[b(" - "+i(w.row.name),1)],64)):k("",!0)]),a(n).screen.lt.md?(c(),h(Y,{key:0},[t("div",{class:he(w.row.balance<0?"text-negative":"text-positive")},[e(q,{name:"wallet"}),b(" "+i(a(K)(w.row.balance)),1)],2),w.row.phone_1?(c(),h("div",ww,[e(q,{name:"phone"}),b(" "+i(w.row.phone_1),1)])):k("",!0),w.row.address?(c(),h("div",hw,[e(q,{name:"home_pin"}),b(" "+i(w.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(H,{key:"name",props:w,class:"wrap-column"},{default:l(()=>[b(i(w.row.name),1)]),_:2},1032,["props"]),e(H,{key:"balance",props:w,class:"wrap-column"},{default:l(()=>[t("div",{class:he(w.row.balance<0?"text-negative":"text-positive")},i(a(K)(w.row.balance)),3)]),_:2},1032,["props"]),e(H,{key:"phone_1",props:w},{default:l(()=>[b(i(w.row.phone_1),1)]),_:2},1032,["props"]),e(H,{key:"address",props:w},{default:l(()=>[b(i(w.row.address),1)]),_:2},1032,["props"]),e(H,{key:"action",props:w},{default:l(()=>[t("div",$w,[N.$can("admin.supplier.add")||N.$can("admin.supplier.edit")||N.$can("admin.supplier.delete")?(c(),D(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:V[4]||(V[4]=X(()=>{},["stop"]))},{default:l(()=>[e(Ye,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Ne,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.supplier.add")?te((c(),D(ae,{key:0,clickable:"",onClick:X(O=>a(Z).get(N.route("admin.supplier.duplicate",w.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>V[6]||(V[6]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),N.$can("admin.supplier.edit")?te((c(),D(ae,{key:1,clickable:"",onClick:X(O=>a(Z).get(N.route("admin.supplier.edit",w.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>V[7]||(V[7]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0),N.$can("admin.supplier.delete")?te((c(),D(ae,{key:2,onClick:X(O=>y(w.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>V[8]||(V[8]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(ot,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",yw,[e(ie,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[V[2]||(V[2]=w=>p.status=w),P],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":V[3]||(V[3]=w=>p.search=w),placeholder:"Cari",clearable:""},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Sw=Object.freeze(Object.defineProperty({__proto__:null,default:xw},Symbol.toStringTag,{value:"Module"})),Vw=wt({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(u,{slots:n,emit:d}){let o=!1,s,r,v=null,g=null,p,m;function f(){s&&s(),s=null,o=!1,v!==null&&(clearTimeout(v),v=null),g!==null&&(clearTimeout(g),g=null),r!==void 0&&r.removeEventListener("transitionend",p),p=null}function _($,j,N){j!==void 0&&($.style.height=`${j}px`),$.style.transition=`height ${u.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,s=N}function y($,j){$.style.overflowY=null,$.style.height=null,$.style.transition=null,f(),j!==m&&d(j)}function x($,j){let N=0;r=$,o===!0?(f(),N=$.offsetHeight===$.scrollHeight?0:void 0):(m="hide",$.style.overflowY="hidden"),_($,N,j),v=setTimeout(()=>{v=null,$.style.height=`${$.scrollHeight}px`,p=V=>{g=null,(Object(V)!==V||V.target===$)&&y($,"show")},$.addEventListener("transitionend",p),g=setTimeout(p,u.duration*1.1)},100)}function P($,j){let N;r=$,o===!0?f():(m="show",$.style.overflowY="hidden",N=$.scrollHeight),_($,N,j),v=setTimeout(()=>{v=null,$.style.height=0,p=V=>{g=null,(Object(V)!==V||V.target===$)&&y($,"hide")},$.addEventListener("transitionend",p),g=setTimeout(p,u.duration*1.1)},100)}return ia(()=>{o===!0&&f()}),()=>ke(Il,{css:!1,appear:u.appear,onEnter:x,onLeave:P},n.default)}}),At=Cn({}),qw=Object.keys(Bl),Vt=wt({name:"QExpansionItem",props:{...Bl,...Pn,...ha,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Tn,"click","afterShow","afterHide"],setup(u,{slots:n,emit:d}){const{proxy:{$q:o}}=xt(),s=$a(u,o),r=C(u.modelValue!==null?u.modelValue:u.defaultOpened),v=C(null),g=On(),{show:p,hide:m,toggle:f}=Rn({showing:r});let _,y;const x=G(()=>`q-expansion-item q-item-type q-expansion-item--${r.value===!0?"expanded":"collapsed"} q-expansion-item--${u.popup===!0?"popup":"standard"}`),P=G(()=>u.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:u.contentInsetLevel*56+"px"}),$=G(()=>u.disable!==!0&&(u.href!==void 0||u.to!==void 0&&u.to!==null&&u.to!=="")),j=G(()=>{const ne={};return qw.forEach(qe=>{ne[qe]=u[qe]}),ne}),N=G(()=>$.value===!0||u.expandIconToggle!==!0),V=G(()=>u.expandedIcon!==void 0&&r.value===!0?u.expandedIcon:u.expandIcon||o.iconSet.expansionItem[u.denseToggle===!0?"denseIcon":"icon"]),B=G(()=>u.disable!==!0&&($.value===!0||u.expandIconToggle===!0)),U=G(()=>({expanded:r.value===!0,detailsId:g.value,toggle:f,show:p,hide:m})),w=G(()=>{const ne=u.toggleAriaLabel!==void 0?u.toggleAriaLabel:o.lang.label[r.value===!0?"collapse":"expand"](u.label);return{role:"button","aria-expanded":r.value===!0?"true":"false","aria-controls":g.value,"aria-label":ne}});Ue(()=>u.group,ne=>{y!==void 0&&y(),ne!==void 0&&F()});function O(ne){$.value!==!0&&f(ne),d("click",ne)}function T(ne){ne.keyCode===13&&z(ne,!0)}function z(ne,qe){qe!==!0&&v.value!==null&&v.value.focus(),f(ne),Et(ne)}function E(){d("afterShow")}function S(){d("afterHide")}function F(){_===void 0&&(_=Dn()),r.value===!0&&(At[u.group]=_);const ne=Ue(r,Fe=>{Fe===!0?At[u.group]=_:At[u.group]===_&&delete At[u.group]}),qe=Ue(()=>At[u.group],(Fe,ft)=>{ft===_&&Fe!==void 0&&Fe!==_&&m()});y=()=>{ne(),qe(),At[u.group]===_&&delete At[u.group],y=void 0}}function Q(){const ne={class:[`q-focusable relative-position cursor-pointer${u.denseToggle===!0&&u.switchToggleSide===!0?" items-end":""}`,u.expandIconClass],side:u.switchToggleSide!==!0,avatar:u.switchToggleSide},qe=[ke(q,{class:"q-expansion-item__toggle-icon"+(u.expandedIcon===void 0&&r.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:V.value})];return B.value===!0&&(Object.assign(ne,{tabindex:0,...w.value,onClick:z,onKeyup:T}),qe.unshift(ke("div",{ref:v,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),ke(M,ne,()=>qe)}function R(){let ne;return n.header!==void 0?ne=[].concat(n.header(U.value)):(ne=[ke(M,()=>[ke(ye,{lines:u.labelLines},()=>u.label||""),u.caption?ke(ye,{lines:u.captionLines,caption:!0},()=>u.caption):null])],u.icon&&ne[u.switchToggleSide===!0?"push":"unshift"](ke(M,{side:u.switchToggleSide===!0,avatar:u.switchToggleSide!==!0},()=>ke(q,{name:u.icon})))),u.disable!==!0&&u.hideExpandIcon!==!0&&ne[u.switchToggleSide===!0?"unshift":"push"](Q()),ne}function I(){const ne={ref:"item",style:u.headerStyle,class:u.headerClass,dark:s.value,disable:u.disable,dense:u.dense,insetLevel:u.headerInsetLevel};return N.value===!0&&(ne.clickable=!0,ne.onClick=O,Object.assign(ne,$.value===!0?j.value:w.value)),ke(ae,ne,R)}function ee(){return te(ke("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:P.value,id:g.value},Tt(n.default)),[[El,r.value]])}function se(){const ne=[I(),ke(Vw,{duration:u.duration,onShow:E,onHide:S},ee)];return u.expandSeparator===!0&&ne.push(ke(tt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:s.value}),ke(tt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:s.value})),ne}return u.group!==void 0&&F(),ia(()=>{y!==void 0&&y()}),()=>ke("div",{class:x.value},[ke("div",{class:"q-expansion-item__container relative-position"},se())])}}),Cw={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},Tw={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},Pw={class:"text-bold"},Ow={class:"text-grey-8 text-caption"},Rw={class:"absolute-bottom text-grey-6 q-pa-md"},_a="amanah-pos.layout.left-drawer-open",Dw={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(u,{expose:n}){const d=xe(),o=be(),s=C(JSON.parse(localStorage.getItem(_a))),r=C(!1),v=()=>s.value=!s.value,g=()=>{s.value=!1};return Ue(s,p=>{localStorage.setItem(_a,p)}),$e(()=>{s.value=JSON.parse(localStorage.getItem(_a)),d.screen.lt.md&&(s.value=!1)}),n({hideDrawer:g}),(p,m)=>(c(),D(Mn,{view:"lHh LpR lFf"},{default:l(()=>[e(In,null,{default:l(()=>[e(ot,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:l(()=>[u.showDrawerButton&&!s.value?(c(),D(A,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:v},{default:l(()=>[e(q,{class:"material-symbols-outlined"},{default:l(()=>m[28]||(m[28]=[b("dock_to_right")])),_:1})]),_:1})):k("",!0),Ut(p.$slots,"left-button",{},void 0,!0),e(An,{style:{"font-size":"16px"}},{default:l(()=>[Ut(p.$slots,"title",{},()=>[b(i(p.$config.APP_NAME),1)],!0)]),_:3}),Ut(p.$slots,"right-button",{},void 0,!0)]),_:3}),Ut(p.$slots,"header",{},void 0,!0)]),_:3}),e(Un,{breakpoint:768,modelValue:s.value,"onUpdate:modelValue":m[27]||(m[27]=f=>s.value=f),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:l(()=>[t("div",Cw,[t("div",Tw,[e(En,{modelValue:r.value,"onUpdate:modelValue":m[2]||(m[2]=f=>r.value=f),class:he(["profile-btn text-bold",{"profile-btn-active":r.value}]),flat:"",label:a(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:l(()=>[e(Ne,{id:"profile-btn-popup",style:{color:"#444"}},{default:l(()=>[e(ae,null,{default:l(()=>[e(Qt,{style:{"margin-left":"-15px"}},{default:l(()=>[e(q,{name:"person"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>[t("div",Pw,i(a(o).props.auth.user.name),1),t("div",Ow,[b(i(p.$CONSTANTS.USER_TYPES[a(o).props.auth.user.type])+" ",1),m[29]||(m[29]=t("br",null,null,-1)),b(" "+i(a(o).props.company.name),1)])]),_:1})]),_:1})]),_:1}),e(tt),te((c(),D(ae,{class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/profile"),onClick:m[0]||(m[0]=f=>a(Z).get(p.route("admin.profile.edit")))},{default:l(()=>[e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>[e(q,{name:"manage_accounts",class:"q-mr-sm"}),m[30]||(m[30]=b(" Profil Saya"))]),_:1})]),_:1})]),_:1},8,["active"])),[[me],[re]]),p.$can("admin.company-profile.edit")?te((c(),D(ae,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/company-profile"),onClick:m[1]||(m[1]=f=>a(Z).get(p.route("admin.company-profile.edit")))},{default:l(()=>[e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>[e(q,{name:"home_work",class:"q-mr-sm"}),m[31]||(m[31]=b(" Profil Perusahaan"))]),_:1})]),_:1})]),_:1},8,["active"])),[[me],[re]]):k("",!0),e(tt),te((c(),D(ae,{clickable:"",style:{color:"inherit"},href:p.route("admin.auth.logout")},{default:l(()=>[e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>[e(q,{name:"logout",class:"q-mr-sm"}),m[32]||(m[32]=b(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[me],[re]])]),_:1})]),_:1},8,["modelValue","label","class"]),s.value?(c(),D(A,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:v},{default:l(()=>[e(q,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(jn,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:l(()=>[e(Ne,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:l(()=>[te((c(),D(ae,{clickable:"",active:p.$page.url.startsWith("/admin/dashboard"),onClick:m[3]||(m[3]=f=>a(Z).get(p.route("admin.dashboard")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"dashboard"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[33]||(m[33]=[b("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]),p.$can("admin.sales-order.index")||p.$can("admin.customer.index")?(c(),D(Vt,{key:0,icon:"storefront",label:"Penjualan","default-opened":p.$page.url.startsWith("/admin/sales-orders")||p.$page.url.startsWith("/admin/customers")},{default:l(()=>[p.$can("admin.sales-order.index")?te((c(),D(ae,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-orders"),onClick:m[4]||(m[4]=f=>a(Z).get(p.route("admin.sales-order.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"shopping_cart"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[34]||(m[34]=[b("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.customer.index")?te((c(),D(ae,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customers"),onClick:m[5]||(m[5]=f=>a(Z).get(p.route("admin.customer.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"people"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[35]||(m[35]=[b("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.purchase-order.index")||p.$can("admin.supplier.index")?(c(),D(Vt,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":p.$page.url.startsWith("/admin/purchase-orders")||p.$page.url.startsWith("/admin/suppliers")},{default:l(()=>[p.$can("admin.purchase-order.index")?te((c(),D(ae,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-orders"),onClick:m[6]||(m[6]=f=>a(Z).get(p.route("admin.purchase-order.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"shopping_cart"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[36]||(m[36]=[b("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.supplier.index")?te((c(),D(ae,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/suppliers"),onClick:m[7]||(m[7]=f=>a(Z).get(p.route("admin.supplier.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"people"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[37]||(m[37]=[b("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.product.index")||p.$can("admin.product-category.index")||p.$can("admin.stock-adjustment.index")||p.$can("admin.stock-movement.index")?(c(),D(Vt,{key:2,icon:"inventory_2",label:"Inventori","default-opened":p.$page.url.startsWith("/admin/products")||p.$page.url.startsWith("/admin/product-categories")||p.$page.url.startsWith("/admin/stock-adjustments")||p.$page.url.startsWith("/admin/stock-movements")},{default:l(()=>[p.$can("admin.stock-adjustment.index")?te((c(),D(ae,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-adjustments"),onClick:m[8]||(m[8]=f=>a(Z).get(p.route("admin.stock-adjustment.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"swap_vert"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[38]||(m[38]=[b("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.stock-movement.index")?te((c(),D(ae,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-movements"),onClick:m[9]||(m[9]=f=>a(Z).get(p.route("admin.stock-movement.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"timeline"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[39]||(m[39]=[b("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.product.index")?te((c(),D(ae,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/products"),onClick:m[10]||(m[10]=f=>a(Z).get(p.route("admin.product.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"box"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[40]||(m[40]=[b("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.product-category.index")?te((c(),D(ae,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/product-categories"),onClick:m[11]||(m[11]=f=>a(Z).get(p.route("admin.product-category.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"category"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[41]||(m[41]=[b("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.cashier-session.index")||p.$can("admin.cashier-terminal.index")?(c(),D(Vt,{key:3,icon:"point_of_sale",label:"Kasir","default-opened":p.$page.url.startsWith("/admin/cashier-terminals")||p.$page.url.startsWith("/admin/cashier-session")},{default:l(()=>[p.$can("admin.cashier-session.index")?te((c(),D(ae,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-sessions"),onClick:m[12]||(m[12]=f=>a(Z).get(p.route("admin.cashier-session.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"tv_signin"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[42]||(m[42]=[b("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.cashier-terminal.index")?te((c(),D(ae,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-terminals"),onClick:m[13]||(m[13]=f=>a(Z).get(p.route("admin.cashier-terminal.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"point_of_sale"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[43]||(m[43]=[b("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.customer-wallet-transaction-confirmation.index")||p.$can("admin.customer-wallet-transaction.index")?(c(),D(Vt,{key:4,icon:"wallet",label:"Wallet","default-opened":p.$page.url.startsWith("/admin/customer-wallet-transactions")||p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:l(()=>[p.$can("admin.customer-wallet-transaction-confirmation.index")?te((c(),D(ae,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:m[14]||(m[14]=f=>a(Z).get(p.route("admin.customer-wallet-transaction-confirmation.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"add_task"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[44]||(m[44]=[b("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.customer-wallet-transaction.index")?te((c(),D(ae,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:m[15]||(m[15]=f=>a(Z).get(p.route("admin.customer-wallet-transaction.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"moving"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[45]||(m[45]=[b("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.finance-transaction.index")||p.$can("admin.finance-account.index")?(c(),D(Vt,{key:5,icon:"finance",label:"Keuangan","default-opened":p.$page.url.startsWith("/admin/finance-accounts")||p.$page.url.startsWith("/admin/finance-transactions")},{default:l(()=>[p.$can("admin.finance-transaction.index")?te((c(),D(ae,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-transactions"),onClick:m[16]||(m[16]=f=>a(Z).get(p.route("admin.finance-transaction.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"moving"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[46]||(m[46]=[b("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.finance-account.index")?te((c(),D(ae,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-accounts"),onClick:m[17]||(m[17]=f=>a(Z).get(p.route("admin.finance-account.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"groups_2"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[47]||(m[47]=[b("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.operational-cost.index")||p.$can("admin.operational-cost-category.index")?(c(),D(Vt,{key:6,icon:"paid",label:"Operasional","default-opened":p.$page.url.startsWith("/admin/operational-costs")||p.$page.url.startsWith("/admin/operational-cost-categories")},{default:l(()=>[p.$can("admin.operational-cost.index")?te((c(),D(ae,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-costs"),onClick:m[18]||(m[18]=f=>a(Z).get(p.route("admin.operational-cost.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"request_quote"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[48]||(m[48]=[b("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.operational-cost-category.index")?te((c(),D(ae,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-cost-categories"),onClick:m[19]||(m[19]=f=>a(Z).get(p.route("admin.operational-cost-category.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"category"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[49]||(m[49]=[b("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(Vt,{icon:"settings",label:"Pengaturan","default-opened":p.$page.url.startsWith("/admin/settings")},{default:l(()=>[p.$can("admin.user.index")?te((c(),D(ae,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/users"),onClick:m[20]||(m[20]=f=>a(Z).get(p.route("admin.user.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"person"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[50]||(m[50]=[b("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.user-role.index")?te((c(),D(ae,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-roles"),onClick:m[21]||(m[21]=f=>a(Z).get(p.route("admin.user-role.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"group"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[51]||(m[51]=[b("Role Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.pos-settings.edit")?te((c(),D(ae,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/pos"),onClick:m[22]||(m[22]=f=>a(Z).get(p.route("admin.pos-settings.edit")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"point_of_sale"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[52]||(m[52]=[b("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.company-profile.edit")?te((c(),D(ae,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/company-profile"),onClick:m[23]||(m[23]=f=>a(Z).get(p.route("admin.company-profile.edit")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"apartment"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[53]||(m[53]=[b("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.user-activity-log.index")?te((c(),D(ae,{key:4,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:m[24]||(m[24]=f=>a(Z).get(p.route("admin.user-activity-log.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"article"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[54]||(m[54]=[b("Log Aktivitas")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.database-settings.index")?te((c(),D(ae,{key:5,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/database"),onClick:m[25]||(m[25]=f=>a(Z).get(p.route("admin.database-settings.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"database"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[55]||(m[55]=[b("Database")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"]),te((c(),D(ae,{clickable:"",active:p.$page.url.startsWith("/admin/settings/profile"),onClick:m[26]||(m[26]=f=>a(Z).get(p.route("admin.user-profile.edit")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"manage_accounts"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[56]||(m[56]=[b("Profil Saya")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]),te((c(),D(ae,{clickable:"",style:{color:"inherit"},href:p.route("admin.auth.logout")},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(q,{name:"logout"})]),_:1}),e(M,null,{default:l(()=>[e(ye,null,{default:l(()=>m[57]||(m[57]=[b("Logout")])),_:1})]),_:1})]),_:1},8,["href"])),[[me],[re]]),t("div",Rw," © 2025 - "+i(p.$config.APP_NAME+" v"+p.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Nn,{class:"bg-grey-1"},{default:l(()=>[e(Ve,null,{default:l(()=>[Ut(p.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),Ut(p.$slots,"footer",{},void 0,!0)]),_:3}))}},Iw=vt(Dw,[["__scopeId","data-v-a20baed6"]]),Aw={__name:"GuestLayout",setup(u){return(n,d)=>(c(),D(Bn,null,{default:l(()=>[Ut(n.$slots,"default")]),_:3}))}};zn({onRegistered(u){console.log("Admin Service Worker registered:",u)}});Fn({layouts:{authenticated:Iw,guest:Aw},pagesGlob:Object.assign({"./pages/About.vue":Wn,"./pages/_examples/Autocomplete1.vue":Xn,"./pages/auth/Login.vue":ns,"./pages/cashier-session/Close.vue":cs,"./pages/cashier-session/Detail.vue":ar,"./pages/cashier-session/Index.vue":ir,"./pages/cashier-session/Open.vue":cr,"./pages/cashier-session/detail/FinanceTransactionTab.vue":Gs,"./pages/cashier-session/detail/MainInfoTab.vue":Us,"./pages/cashier-session/detail/SalesOrderTab.vue":Hs,"./pages/cashier-terminal/Detail.vue":qr,"./pages/cashier-terminal/Editor.vue":Rr,"./pages/cashier-terminal/Index.vue":jr,"./pages/cashier-terminal/detail/MainInfoTab.vue":kr,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":hr,"./pages/customer-wallet-transaction-confirmation/Detail.vue":Qr,"./pages/customer-wallet-transaction-confirmation/Index.vue":ei,"./pages/customer-wallet-transaction/Adjustment.vue":li,"./pages/customer-wallet-transaction/Detail.vue":fi,"./pages/customer-wallet-transaction/Editor.vue":yi,"./pages/customer-wallet-transaction/Index.vue":Si,"./pages/customer/Detail.vue":gd,"./pages/customer/Editor.vue":_d,"./pages/customer/Import.vue":Vd,"./pages/customer/Index.vue":Ad,"./pages/customer/detail/MainInfoTab.vue":Di,"./pages/customer/detail/OrderHistoryTab.vue":Bi,"./pages/customer/detail/WalletHistoryTab.vue":Ui,"./pages/dashboard/Index.vue":au,"./pages/dashboard/cards/ActualSummaryCard.vue":zd,"./pages/dashboard/cards/ChartCard.vue":Yd,"./pages/dashboard/cards/SummaryCard.vue":cu,"./pages/dashboard/cards/TopCard.vue":Gd,"./pages/finance-account/Detail.vue":xu,"./pages/finance-account/Editor.vue":Tu,"./pages/finance-account/Index.vue":zu,"./pages/finance-account/detail/HistoryTab.vue":yu,"./pages/finance-account/detail/MainInfoTab.vue":fu,"./pages/finance-transaction/Detail.vue":Zu,"./pages/finance-transaction/Editor.vue":lm,"./pages/finance-transaction/Index.vue":mm,"./pages/operational-cost-category/Editor.vue":gm,"./pages/operational-cost-category/Index.vue":hm,"./pages/operational-cost/Detail.vue":Dm,"./pages/operational-cost/Editor.vue":Nm,"./pages/operational-cost/Index.vue":Wm,"./pages/product-category/Editor.vue":Xm,"./pages/product-category/Index.vue":nc,"./pages/product/Detail.vue":Cc,"./pages/product/Editor.vue":jc,"./pages/product/Import.vue":zc,"./pages/product/Index.vue":tp,"./pages/product/SendPriceList.vue":dp,"./pages/product/SendPriceList2.vue":bp,"./pages/product/detail/MainInfoTab.vue":yc,"./pages/product/detail/StockHistoryTab.vue":wc,"./pages/purchase-order/Detail.vue":vf,"./pages/purchase-order/Editor.vue":Mg,"./pages/purchase-order/Index.vue":Zg,"./pages/purchase-order/detail/InvoiceTab.vue":Mp,"./pages/purchase-order/detail/PaymentDialog.vue":Wp,"./pages/purchase-order/detail/PaymentTab.vue":cf,"./pages/purchase-order/editor/HelpDialog.vue":Gf,"./pages/purchase-order/editor/ItemEditorDialog.vue":Hf,"./pages/purchase-order/editor/ItemsListTable.vue":hf,"./pages/purchase-order/editor/OrderInfoDialog.vue":tg,"./pages/purchase-order/editor/PaymentDialog.vue":jf,"./pages/purchase-order/editor/SuccessDialog.vue":fg,"./pages/sales-order/Detail.vue":Z1,"./pages/sales-order/Editor.vue":bv,"./pages/sales-order/Index.vue":Dv,"./pages/sales-order/detail/InvoiceTab.vue":x1,"./pages/sales-order/detail/PaymentDialog.vue":R1,"./pages/sales-order/detail/PaymentTab.vue":Q1,"./pages/sales-order/editor/HelpDialog.vue":qb,"./pages/sales-order/editor/ItemEditorDialog.vue":$b,"./pages/sales-order/editor/ItemsListTable.vue":ob,"./pages/sales-order/editor/OrderInfoDialog.vue":Ob,"./pages/sales-order/editor/PaymentDialog.vue":kb,"./pages/sales-order/editor/SuccessDialog.vue":Lb,"./pages/settings/company-profile/Edit.vue":Nv,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":Iv,"./pages/settings/database/Index.vue":Lv,"./pages/settings/pos/Edit.vue":Qv,"./pages/settings/user-activity-log/Detail.vue":Ay,"./pages/settings/user-activity-log/Index.vue":Fy,"./pages/settings/user-profile/Edit.vue":Jy,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":Ly,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":Hy,"./pages/settings/user-role/Detail.vue":i_,"./pages/settings/user-role/Editor.vue":f_,"./pages/settings/user-role/Index.vue":k_,"./pages/settings/user/Detail.vue":R_,"./pages/settings/user/Editor.vue":j_,"./pages/settings/user/Index.vue":H_,"./pages/stock-adjustment/Create.vue":ak,"./pages/stock-adjustment/Detail.vue":pk,"./pages/stock-adjustment/Editor.vue":kk,"./pages/stock-adjustment/Index.vue":Rk,"./pages/stock-movement/Index.vue":jk,"./pages/supplier/Detail.vue":nw,"./pages/supplier/Editor.vue":vw,"./pages/supplier/Index.vue":Sw,"./pages/supplier/detail/MainInfoTab.vue":Wk,"./pages/supplier/detail/OrderHistoryTab.vue":Zk})});
