import{r as T,a as X,c as I,o as u,w as l,b as t,d as e,e as h,f as k,Q as ce,t as r,u as a,g as H,h as Oe,i as na,T as Qe,j as mn,k as ge,l as Te,m as Je,n as J,p as nt,q as fe,s as le,v,x as ta,y as R,z as ne,A as D,B as at,F as G,C as We,D as te,E as yt,G as vt,H as ee,I as cn,J as xa,K as Yl,L as qt,M as Z,N as ga,O as he,R as ie,P as qe,S as Wl,U as pn,V as fn,W as Kt,X as Et,Y as Sa,Z as Pa,_ as gn,$ as Me,a0 as bn,a1 as vn,a2 as yn,a3 as Nt,a4 as _n,a5 as kn,a6 as Va,a7 as Gt,a8 as qa,a9 as Na,aa as wn,ab as ca,ac as Ba,ad as hn,ae as za,af as $n,ag as Ql,ah as xn,ai as Sn,aj as Vn,ak as Oa,al as Ia,am as qn,an as Mt,ao as ve,ap as Ie,aq as Fe,ar as Le,as as Se,at as Pe,au as W,av as $e,aw as bt,ax as Ye,ay as Ue,az as Xt,aA as Ce,aB as Ae,aC as et,aD as He,aE as st,aF as Ke,aG as Ze,aH as ze,aI as oe,aJ as F,aK as pe,aL as lt,aM as Ee,aN as sa,aO as fa,aP as zt,aQ as Ft,aR as Ct,aS as Tt,aT as tt,aU as Fa,aV as ea,aW as ba,aX as aa,aY as Lt,aZ as Ua,a_ as ra,a$ as ia,b0 as la,b1 as Cn,b2 as Tn,b3 as Jl,b4 as Pn,b5 as Rn,b6 as On,b7 as In,b8 as La,b9 as Un,ba as Dn,bb as En,bc as jn,bd as Gl,be as Be,bf as kt,bg as An,bh as Ha,bi as Mn,bj as Nn,bk as Bn,bl as zn,bm as Fn,bn as Ln,bo as Hn,bp as we,bq as oa,br as rt,bs as Kn,bt as Yn,bu as Wn,bv as Qn,bw as Jn,bx as Gn,by as Xn,bz as Zn,bA as Dt,bB as it,bC as Wt,bD as Xl,bE as Zt,bF as ot,bG as wt,bH as Zl,bI as eo,bJ as es,bK as gt,bL as pt,bM as ft,bN as $t,bO as va,bP as Bt,bQ as Ka,bR as ts,bS as as,bT as ls,bU as to,bV as os,bW as ns,bX as ss,bY as rs,bZ as is,b_ as ds,b$ as us,c0 as ms,c1 as cs,c2 as ps,c3 as fs,c4 as gs,c5 as bs}from"./virtual_pwa-register-C_YI1qvq.js";const vs={class:"q-ma-md"},ys={key:0},_s={__name:"Autocomplete1",setup(c){const s=T(null),m=T([]);let o=null;const i=(n,g)=>{if(n.length<2){g(()=>{m.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Oe.get(`/web-api/customers?q=${n}`).then(b=>{const p=b.data.data.map(d=>({label:`${d.code} - ${d.name}`,value:d.id,data:d}));g(()=>{m.value=p})}).catch(b=>{console.error("Gagal mengambil data pelanggan:",b),g(()=>{m.value=[]})})})};return(n,g)=>{const b=X("guest-layout");return u(),I(b,null,{default:l(()=>[t("div",vs,[e(ce,{class:"full-width",modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=p=>s.value=p),"use-input":"",label:"Cari Pelanggan",options:m.value,onFilter:i,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),s.value?(u(),h("div",ys," Saldo: Rp. "+r(a(H)(s.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},ks=Object.freeze(Object.defineProperty({__proto__:null,default:_s},Symbol.toStringTag,{value:"Module"})),ws={style:{"margin-left":"-10px"}},ya={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(c,{emit:s}){const m=c,o=s;return(i,n)=>(u(),h("div",ws,[e(na,{class:"full-width q-pl-none","model-value":m.modelValue,disable:m.disable,label:m.label,"onUpdate:modelValue":n[0]||(n[0]=g=>o("update:modelValue",g))},null,8,["model-value","disable","label"])]))}};function Ra(c){return c instanceof File||c instanceof Blob||c instanceof FileList&&c.length>0||c instanceof FormData&&Array.from(c.values()).some(s=>Ra(s))||typeof c=="object"&&c!==null&&Object.values(c).some(s=>Ra(s))}function hs(c,s=null){const m=Qe(c,s);let o=g=>g,i=null;const n={transform:g=>b=>(o=b,g),submit:g=>(b,p,d={})=>{m.wasSuccessful=!1,m.recentlySuccessful=!1,m.clearErrors(),clearTimeout(i),d.onBefore&&d.onBefore(),m.processing=!0,d.onStart&&d.onStart();const f=o(m.data());axios[b](p,f,{headers:{"Content-Type":Ra(f)?"multipart/form-data":"application/json"},onUploadProgress:y=>{m.progress=y,d.onProgress&&d.onProgress(y)}}).then(y=>{m.processing=!1,m.progress=null,m.clearErrors(),m.wasSuccessful=!0,m.recentlySuccessful=!0,i=setTimeout(()=>m.recentlySuccessful=!1,2e3),d.onSuccess&&d.onSuccess(y.data),m.defaults(mn(m.data())),m.isDirty=!1}).catch(y=>{var _;m.processing=!1,m.progress=null,m.clearErrors(),((_=y.response)==null?void 0:_.status)===422&&Object.keys(y.response.data.errors).forEach(q=>{m.setError(q,y.response.data.errors[q][0])}),d.onError&&d.onError(y)}).finally(()=>{m.processing=!1,m.progress=null,d.onFinish&&d.onFinish()})}};return new Proxy(m,{get:(g,b,p)=>Object.keys(n).indexOf(b)<0?g[b]:n[b](p)})}const $s={class:"column"},xs={class:"row"},Ss={class:"q-my-sm text-grey-7 text-subtitle1 text-bold"},Vs={class:"flex justify-center"},qs={__name:"Login",setup(c){let s=hs({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const m=ge();console.log(m.props.data);const o=()=>nt({form:s,url:route("admin.auth.login"),onSuccess:()=>{s.processing=!0,window.location.href=route("admin.dashboard")}}),i=T(!1);return(n,g)=>{const b=X("i-head"),p=X("guest-layout");return u(),h(G,null,[e(b,{title:"Login"}),e(p,null,{default:l(()=>[e(Te,{class:"row justify-center items-center"},{default:l(()=>[t("div",$s,[t("div",xs,[e(Je,{class:"q-gutter-md",onSubmit:J(o,["prevent"])},{default:l(()=>[e(fe,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:l(()=>[e(le,{class:"text-center"},{default:l(()=>[t("div",Ss,[v(" Login ke "+r(a(m).props.company.name)+" ",1),t("div",Vs,[e(ta,{size:"100px",class:"q-my-none"},{default:l(()=>[e(R,{name:"badge",color:"grey"})]),_:1})])]),e(ne,{modelValue:a(s).username,"onUpdate:modelValue":g[0]||(g[0]=d=>a(s).username=d),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!a(s).errors.username,autocomplete:"username","error-message":a(s).errors.username,disable:a(s).processing,rules:[d=>d&&d.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:l(()=>[e(R,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(ne,{modelValue:a(s).password,"onUpdate:modelValue":g[2]||(g[2]=d=>a(s).password=d),type:i.value?"text":"password",label:"Kata Sandi",error:!!a(s).errors.password,autocomplete:"current-password","error-message":a(s).errors.password,"lazy-rules":"",disable:a(s).processing,rules:[d=>d&&d.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:l(()=>[e(D,{dense:"",flat:"",round:"",onClick:g[1]||(g[1]=d=>i.value=!i.value)},{default:l(()=>[e(R,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(ya,{class:"q-mt-sm",modelValue:a(s).remember,"onUpdate:modelValue":g[3]||(g[3]=d=>a(s).remember=d),disable:a(s).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(at,null,{default:l(()=>[e(D,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:a(s).processing,loading:a(s).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Cs=Object.freeze(Object.defineProperty({__proto__:null,default:qs},Symbol.toStringTag,{value:"Module"})),Ts={class:"q-gutter-sm"},Ps={class:"col col-md-6 q-pa-xs"},Rs={class:"detail q-mt-md"},Os={key:0},Is={class:"text-bold"},Ya="Tutup Sesi Kasir",Us={__name:"Close",setup(c){const s=ge(),m=Qe({closing_notes:s.props.data.closing_notes,closing_balance:parseFloat(s.props.data.closing_balance)}),o=()=>nt({form:m,url:route("admin.cashier-session.close",{id:s.props.data.id})});return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return u(),h(G,null,[e(g,{title:Ya}),e(b,null,{title:l(()=>[v(r(Ya))]),"left-button":l(()=>[t("div",Ts,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ps,[e(Je,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":n[1]||(n[1]=p=>a(m).id=p)},null,512),[[yt,a(m).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[t("table",Rs,[t("tbody",null,[t("tr",null,[n[4]||(n[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),n[5]||(n[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.id),1)]),t("tr",null,[n[6]||(n[6]=t("td",null,"Terminal",-1)),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.cashier_terminal.name),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"Kasir",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.user.username)+" - "+r(a(s).props.data.user.name),1)]),t("tr",null,[n[10]||(n[10]=t("td",null,"Saldo Awal",-1)),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.opening_balance)),1)]),a(s).props.data.opening_notes?(u(),h("tr",Os,[n[12]||(n[12]=t("td",null,"Catatan Buka",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.opening_notes),1)])):k("",!0),t("tr",null,[n[14]||(n[14]=t("td",null,"Total Penjualan",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_sales)),1)]),t("tr",null,[n[16]||(n[16]=t("td",null,"Total Pemasukan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_income)),1)]),t("tr",null,[n[18]||(n[18]=t("td",null,"Total Pengeluaran",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_expense)),1)]),t("tr",null,[n[21]||(n[21]=t("td",null,"Saldo Akhir",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,[t("div",Is,r(a(vt)(a(s).props.data.closing_balance)),1),n[20]||(n[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(ne,{modelValue:a(m).closing_notes,"onUpdate:modelValue":n[2]||(n[2]=p=>a(m).closing_notes=p),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(m).processing,error:!!a(m).errors.closing_notes,"error-message":a(m).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:a(m).processing},null,8,["disable"]),e(D,{label:"Batal",icon:"cancel",disable:a(m).processing,onClick:n[3]||(n[3]=p=>a(ee).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ds=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"}));let Es=0;const js=["click","keydown"],As={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Es++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Ms(c,s,m,o){const i=cn(Yl,xa);if(i===xa)return console.error("QTab/QRouteTab component needs to be child of QTabs"),xa;const{proxy:n}=qt(),g=T(null),b=T(null),p=T(null),d=Z(()=>c.disable===!0||c.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},c.ripple===!0?{}:c.ripple)),f=Z(()=>i.currentModel.value===c.name),y=Z(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(f.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(c.icon&&c.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(c.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(c.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),_=Z(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(c.contentClass!==void 0?` ${c.contentClass}`:"")),q=Z(()=>c.disable===!0||i.hasFocus.value===!0||f.value===!1&&i.hasActiveTab.value===!0?-1:c.tabindex||0);function S(M,O){if(O!==!0&&g.value!==null&&g.value.focus(),c.disable!==!0){i.updateModel({name:c.name}),m("click",M);return}}function w(M){pn(M,[13,32])?S(M,!0):fn(M)!==!0&&M.keyCode>=35&&M.keyCode<=40&&M.altKey!==!0&&M.metaKey!==!0&&i.onKbdNavigate(M.keyCode,n.$el)===!0&&Kt(M),m("keydown",M)}function z(){const M=i.tabProps.value.narrowIndicator,O=[],B=qe("div",{ref:p,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});c.icon!==void 0&&O.push(qe(R,{class:"q-tab__icon",name:c.icon})),c.label!==void 0&&O.push(qe("div",{class:"q-tab__label"},c.label)),c.alert!==!1&&O.push(c.alertIcon!==void 0?qe(R,{class:"q-tab__alert-icon",color:c.alert!==!0?c.alert:void 0,name:c.alertIcon}):qe("div",{class:"q-tab__alert"+(c.alert!==!0?` text-${c.alert}`:"")})),M===!0&&O.push(B);const A=[qe("div",{class:"q-focus-helper",tabindex:-1,ref:g}),qe("div",{class:_.value},Wl(s.default,O))];return M===!1&&A.push(B),A}const Y={name:Z(()=>c.name),rootRef:b,tabIndicatorRef:p,routeData:o};ga(()=>{i.unregisterTab(Y)}),he(()=>{i.registerTab(Y)});function C(M,O){const B={ref:b,class:y.value,tabindex:q.value,role:"tab","aria-selected":f.value===!0?"true":"false","aria-disabled":c.disable===!0?"true":void 0,onClick:S,onKeydown:w,...O};return te(qe(M,B,z()),[[ie,d.value]])}return{renderTab:C,$tabs:i}}const dt=Et({name:"QTab",props:As,emits:js,setup(c,{slots:s,emit:m}){const{renderTab:o}=Ms(c,s,m);return()=>o("div")}});function Ns(c,s,m){const o=m===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${c?` text-${c}`:""}`}const Bs=["left","center","right","justify"],Pt=Et({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:c=>Bs.includes(c)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(c,{slots:s,emit:m}){const{proxy:o}=qt(),{$q:i}=o,{registerTick:n}=Sa(),{registerTick:g}=Sa(),{registerTick:b}=Sa(),{registerTimeout:p,removeTimeout:d}=Pa(),{registerTimeout:f,removeTimeout:y}=Pa(),_=T(null),q=T(null),S=T(c.modelValue),w=T(!1),z=T(!0),Y=T(!1),C=T(!1),M=[],O=T(0),B=T(!1);let A=null,x=null,U;const P=Z(()=>({activeClass:c.activeClass,activeColor:c.activeColor,activeBgColor:c.activeBgColor,indicatorClass:Ns(c.indicatorColor,c.switchIndicator,c.vertical),narrowIndicator:c.narrowIndicator,inlineLabel:c.inlineLabel,noCaps:c.noCaps})),$=Z(()=>{const be=O.value,xe=S.value;for(let De=0;De<be;De++)if(M[De].name.value===xe)return!0;return!1}),E=Z(()=>`q-tabs__content--align-${w.value===!0?"left":C.value===!0?"justify":c.align}`),N=Z(()=>`q-tabs row no-wrap items-center q-tabs--${w.value===!0?"":"not-"}scrollable q-tabs--${c.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${c.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${c.mobileArrows===!0?"":"out"}-arrows`+(c.dense===!0?" q-tabs--dense":"")+(c.shrink===!0?" col-shrink":"")+(c.stretch===!0?" self-stretch":"")),V=Z(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+E.value+(c.contentClass!==void 0?` ${c.contentClass}`:"")),j=Z(()=>c.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),ae=Z(()=>c.vertical!==!0&&i.lang.rtl===!0),re=Z(()=>gn===!1&&ae.value===!0);Me(ae,ye),Me(()=>c.modelValue,be=>{me({name:be,setCurrent:!0,skipEmit:!0})}),Me(()=>c.outsideArrows,Re);function me({name:be,setCurrent:xe,skipEmit:De}){S.value!==be&&(De!==!0&&c["onUpdate:modelValue"]!==void 0&&m("update:modelValue",be),(xe===!0||c["onUpdate:modelValue"]===void 0)&&(ue(S.value,be),S.value=be))}function Re(){n(()=>{Ge({width:_.value.offsetWidth,height:_.value.offsetHeight})})}function Ge(be){if(j.value===void 0||q.value===null)return;const xe=be[j.value.container],De=Math.min(q.value[j.value.scroll],Array.prototype.reduce.call(q.value.children,(ct,Xe)=>ct+(Xe[j.value.content]||0),0)),mt=xe>0&&De>xe;w.value=mt,mt===!0&&g(ye),C.value=xe<parseInt(c.breakpoint,10)}function ue(be,xe){const De=be!=null&&be!==""?M.find(ct=>ct.name.value===be):null,mt=xe!=null&&xe!==""?M.find(ct=>ct.name.value===xe):null;if(ma===!0)ma=!1;else if(De&&mt){const ct=De.tabIndicatorRef.value,Xe=mt.tabIndicatorRef.value;A!==null&&(clearTimeout(A),A=null),ct.style.transition="none",ct.style.transform="none",Xe.style.transition="none",Xe.style.transform="none";const Ne=ct.getBoundingClientRect(),_t=Xe.getBoundingClientRect();Xe.style.transform=c.vertical===!0?`translate3d(0,${Ne.top-_t.top}px,0) scale3d(1,${_t.height?Ne.height/_t.height:1},1)`:`translate3d(${Ne.left-_t.left}px,0,0) scale3d(${_t.width?Ne.width/_t.width:1},1,1)`,b(()=>{A=setTimeout(()=>{A=null,Xe.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Xe.style.transform="none"},70)})}mt&&w.value===!0&&L(mt.rootRef.value)}function L(be){const{left:xe,width:De,top:mt,height:ct}=q.value.getBoundingClientRect(),Xe=be.getBoundingClientRect();let Ne=c.vertical===!0?Xe.top-mt:Xe.left-xe;if(Ne<0){q.value[c.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Ne),ye();return}Ne+=c.vertical===!0?Xe.height-ct:Xe.width-De,Ne>0&&(q.value[c.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Ne),ye())}function ye(){const be=q.value;if(be===null)return;const xe=be.getBoundingClientRect(),De=c.vertical===!0?be.scrollTop:Math.abs(be.scrollLeft);ae.value===!0?(z.value=Math.ceil(De+xe.width)<be.scrollWidth-1,Y.value=De>0):(z.value=De>0,Y.value=c.vertical===!0?Math.ceil(De+xe.height)<be.scrollHeight:Math.ceil(De+xe.width)<be.scrollWidth)}function se(be){x!==null&&clearInterval(x),x=setInterval(()=>{je(be)===!0&&de()},5)}function K(){se(re.value===!0?Number.MAX_SAFE_INTEGER:0)}function _e(){se(re.value===!0?0:Number.MAX_SAFE_INTEGER)}function de(){x!==null&&(clearInterval(x),x=null)}function Q(be,xe){const De=Array.prototype.filter.call(q.value.children,_t=>_t===xe||_t.matches&&_t.matches(".q-tab.q-focusable")===!0),mt=De.length;if(mt===0)return;if(be===36)return L(De[0]),De[0].focus(),!0;if(be===35)return L(De[mt-1]),De[mt-1].focus(),!0;const ct=be===(c.vertical===!0?38:37),Xe=be===(c.vertical===!0?40:39),Ne=ct===!0?-1:Xe===!0?1:void 0;if(Ne!==void 0){const _t=ae.value===!0?-1:1,It=De.indexOf(xe)+Ne*_t;return It>=0&&It<mt&&(L(De[It]),De[It].focus({preventScroll:!0})),!0}}const Ve=Z(()=>re.value===!0?{get:be=>Math.abs(be.scrollLeft),set:(be,xe)=>{be.scrollLeft=-xe}}:c.vertical===!0?{get:be=>be.scrollTop,set:(be,xe)=>{be.scrollTop=xe}}:{get:be=>be.scrollLeft,set:(be,xe)=>{be.scrollLeft=xe}});function je(be){const xe=q.value,{get:De,set:mt}=Ve.value;let ct=!1,Xe=De(xe);const Ne=be<Xe?-1:1;return Xe+=Ne*5,Xe<0?(ct=!0,Xe=0):(Ne===-1&&Xe<=be||Ne===1&&Xe>=be)&&(ct=!0,Xe=be),mt(xe,Xe),ye(),ct}function ke(be,xe){for(const De in be)if(be[De]!==xe[De])return!1;return!0}function ht(){let be=null,xe={matchedLen:0,queryDiff:9999,hrefLen:0};const De=M.filter(Ne=>Ne.routeData!==void 0&&Ne.routeData.hasRouterLink.value===!0),{hash:mt,query:ct}=o.$route,Xe=Object.keys(ct).length;for(const Ne of De){const _t=Ne.routeData.exact.value===!0;if(Ne.routeData[_t===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:It,query:ha,matched:dn,href:un}=Ne.routeData.resolvedLink.value,$a=Object.keys(ha).length;if(_t===!0){if(It!==mt||$a!==Xe||ke(ct,ha)===!1)continue;be=Ne.name.value;break}if(It!==""&&It!==mt||$a!==0&&ke(ha,ct)===!1)continue;const At={matchedLen:dn.length,queryDiff:Xe-$a,hrefLen:un.length-It.length};if(At.matchedLen>xe.matchedLen){be=Ne.name.value,xe=At;continue}else if(At.matchedLen!==xe.matchedLen)continue;if(At.queryDiff<xe.queryDiff)be=Ne.name.value,xe=At;else if(At.queryDiff!==xe.queryDiff)continue;At.hrefLen>xe.hrefLen&&(be=Ne.name.value,xe=At)}if(be===null&&M.some(Ne=>Ne.routeData===void 0&&Ne.name.value===S.value)===!0){ma=!1;return}me({name:be,setCurrent:!0})}function St(be){if(d(),B.value!==!0&&_.value!==null&&be.target&&typeof be.target.closest=="function"){const xe=be.target.closest(".q-tab");xe&&_.value.contains(xe)===!0&&(B.value=!0,w.value===!0&&L(xe))}}function Ot(){p(()=>{B.value=!1},30)}function xt(){ja.avoidRouteWatcher===!1?f(ht):y()}function ua(){if(U===void 0){const be=Me(()=>o.$route.fullPath,xt);U=()=>{be(),U=void 0}}}function sn(be){M.push(be),O.value++,Re(),be.routeData===void 0||o.$route===void 0?f(()=>{if(w.value===!0){const xe=S.value,De=xe!=null&&xe!==""?M.find(mt=>mt.name.value===xe):null;De&&L(De.rootRef.value)}}):(ua(),be.routeData.hasRouterLink.value===!0&&xt())}function rn(be){M.splice(M.indexOf(be),1),O.value--,Re(),U!==void 0&&be.routeData!==void 0&&(M.every(xe=>xe.routeData===void 0)===!0&&U(),xt())}const ja={currentModel:S,tabProps:P,hasFocus:B,hasActiveTab:$,registerTab:sn,unregisterTab:rn,verifyRouteModel:xt,updateModel:me,onKbdNavigate:Q,avoidRouteWatcher:!1};_n(Yl,ja);function Aa(){A!==null&&clearTimeout(A),de(),U!==void 0&&U()}let Ma,ma;return ga(Aa),bn(()=>{Ma=U!==void 0,Aa()}),vn(()=>{Ma===!0&&(ua(),ma=!0,xt()),Re()}),()=>qe("div",{ref:_,class:N.value,role:"tablist",onFocusin:St,onFocusout:Ot},[qe(yn,{onResize:Ge}),qe("div",{ref:q,class:V.value,onScroll:ye},Nt(s.default)),qe(R,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(z.value===!0?"":" q-tabs__arrow--faded"),name:c.leftIcon||i.iconSet.tabs[c.vertical===!0?"up":"left"],onMousedownPassive:K,onTouchstartPassive:K,onMouseupPassive:de,onMouseleavePassive:de,onTouchendPassive:de}),qe(R,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(Y.value===!0?"":" q-tabs__arrow--faded"),name:c.rightIcon||i.iconSet.tabs[c.vertical===!0?"down":"right"],onMousedownPassive:_e,onTouchstartPassive:_e,onMouseupPassive:de,onMouseleavePassive:de,onTouchendPassive:de})])}});function zs(c){const s=[.06,6,50];return typeof c=="string"&&c.length&&c.split(":").forEach((m,o)=>{const i=parseFloat(m);i&&(s[o]=i)}),s}const Fs=kn({name:"touch-swipe",beforeMount(c,{value:s,arg:m,modifiers:o}){if(o.mouse!==!0&&Gt.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",n={handler:s,sensitivity:zs(m),direction:Na(o),noop:wn,mouseStart(g){za(g,n)&&$n(g)&&(ca(n,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(g,!0))},touchStart(g){if(za(g,n)){const b=g.target;ca(n,"temp",[[b,"touchmove","move","notPassiveCapture"],[b,"touchcancel","end","notPassiveCapture"],[b,"touchend","end","notPassiveCapture"]]),n.start(g)}},start(g,b){Gt.is.firefox===!0&&qa(c,!0);const p=Ba(g);n.event={x:p.left,y:p.top,time:Date.now(),mouse:b===!0,dir:!1}},move(g){if(n.event===void 0)return;if(n.event.dir!==!1){Kt(g);return}const b=Date.now()-n.event.time;if(b===0)return;const p=Ba(g),d=p.left-n.event.x,f=Math.abs(d),y=p.top-n.event.y,_=Math.abs(y);if(n.event.mouse!==!0){if(f<n.sensitivity[1]&&_<n.sensitivity[1]){n.end(g);return}}else if(window.getSelection().toString()!==""){n.end(g);return}else if(f<n.sensitivity[2]&&_<n.sensitivity[2])return;const q=f/b,S=_/b;n.direction.vertical===!0&&f<_&&f<100&&S>n.sensitivity[0]&&(n.event.dir=y<0?"up":"down"),n.direction.horizontal===!0&&f>_&&_<100&&q>n.sensitivity[0]&&(n.event.dir=d<0?"left":"right"),n.direction.up===!0&&f<_&&y<0&&f<100&&S>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&f<_&&y>0&&f<100&&S>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&f>_&&d<0&&_<100&&q>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&f>_&&d>0&&_<100&&q>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Kt(g),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),hn(),n.styleCleanup=w=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const z=()=>{document.body.classList.remove("no-pointer-events--children")};w===!0?setTimeout(z,50):z()}),n.handler({evt:g,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:b,distance:{x:f,y:_}})):n.end(g)},end(g){n.event!==void 0&&(Va(n,"temp"),Gt.is.firefox===!0&&qa(c,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),g!==void 0&&n.event.dir!==!1&&Kt(g),n.event=void 0)}};if(c.__qtouchswipe=n,o.mouse===!0){const g=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ca(n,"main",[[c,"mousedown","mouseStart",`passive${g}`]])}Gt.has.touch===!0&&ca(n,"main",[[c,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[c,"touchmove","noop","notPassiveCapture"]])},updated(c,s){const m=c.__qtouchswipe;m!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&m.end(),m.handler=s.value),m.direction=Na(s.modifiers))},beforeUnmount(c){const s=c.__qtouchswipe;s!==void 0&&(Va(s,"main"),Va(s,"temp"),Gt.is.firefox===!0&&qa(c,!1),s.styleCleanup!==void 0&&s.styleCleanup(),delete c.__qtouchswipe)}}),Ls={name:{required:!0},disable:Boolean},Wa={setup(c,{slots:s}){return()=>qe("div",{class:"q-panel scroll",role:"tabpanel"},Nt(s.default))}},Hs={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Ks=["update:modelValue","beforeTransition","transition"];function Ys(){const{props:c,emit:s,proxy:m}=qt(),{getCache:o}=Sn(),{registerTimeout:i}=Pa();let n,g;const b=T(null),p=T(null);function d(j){const ae=c.vertical===!0?"up":"left";U((m.$q.lang.rtl===!0?-1:1)*(j.direction===ae?1:-1))}const f=Z(()=>[[Fs,d,void 0,{horizontal:c.vertical!==!0,vertical:c.vertical,mouse:!0}]]),y=Z(()=>c.transitionPrev||`slide-${c.vertical===!0?"down":"right"}`),_=Z(()=>c.transitionNext||`slide-${c.vertical===!0?"up":"left"}`),q=Z(()=>`--q-transition-duration: ${c.transitionDuration}ms`),S=Z(()=>typeof c.modelValue=="string"||typeof c.modelValue=="number"?c.modelValue:String(c.modelValue)),w=Z(()=>({include:c.keepAliveInclude,exclude:c.keepAliveExclude,max:c.keepAliveMax})),z=Z(()=>c.keepAliveInclude!==void 0||c.keepAliveExclude!==void 0);Me(()=>c.modelValue,(j,ae)=>{const re=O(j)===!0?B(j):-1;g!==!0&&x(re===-1?0:re<B(ae)?-1:1),b.value!==re&&(b.value=re,s("beforeTransition",j,ae),i(()=>{s("transition",j,ae)},c.transitionDuration))});function Y(){U(1)}function C(){U(-1)}function M(j){s("update:modelValue",j)}function O(j){return j!=null&&j!==""}function B(j){return n.findIndex(ae=>ae.props.name===j&&ae.props.disable!==""&&ae.props.disable!==!0)}function A(){return n.filter(j=>j.props.disable!==""&&j.props.disable!==!0)}function x(j){const ae=j!==0&&c.animated===!0&&b.value!==-1?"q-transition--"+(j===-1?y.value:_.value):null;p.value!==ae&&(p.value=ae)}function U(j,ae=b.value){let re=ae+j;for(;re!==-1&&re<n.length;){const me=n[re];if(me!==void 0&&me.props.disable!==""&&me.props.disable!==!0){x(j),g=!0,s("update:modelValue",me.props.name),setTimeout(()=>{g=!1});return}re+=j}c.infinite===!0&&n.length!==0&&ae!==-1&&ae!==n.length&&U(j,j===-1?n.length:-1)}function P(){const j=B(c.modelValue);return b.value!==j&&(b.value=j),!0}function $(){const j=O(c.modelValue)===!0&&P()&&n[b.value];return c.keepAlive===!0?[qe(Vn,w.value,[qe(z.value===!0?o(S.value,()=>({...Wa,name:S.value})):Wa,{key:S.value,style:q.value},()=>j)])]:[qe("div",{class:"q-panel scroll",style:q.value,key:S.value,role:"tabpanel"},[j])]}function E(){if(n.length!==0)return c.animated===!0?[qe(Ql,{name:p.value},$)]:$()}function N(j){return n=xn(Nt(j.default,[])).filter(ae=>ae.props!==null&&ae.props.slot===void 0&&O(ae.props.name)===!0),n.length}function V(){return n}return Object.assign(m,{next:Y,previous:C,goTo:M}),{panelIndex:b,panelDirectives:f,updatePanelsList:N,updatePanelIndex:P,getPanelContent:E,getEnabledPanels:A,getPanels:V,isValidPanelName:O,keepAliveProps:w,needsUniqueKeepAliveWrapper:z,goToPanelByOffset:U,goToPanel:M,nextPanel:Y,previousPanel:C}}const ut=Et({name:"QTabPanel",props:Ls,setup(c,{slots:s}){return()=>qe("div",{class:"q-tab-panel",role:"tabpanel"},Nt(s.default))}}),Rt=Et({name:"QTabPanels",props:{...Hs,...Oa},emits:Ks,setup(c,{slots:s}){const m=qt(),o=Ia(c,m.proxy.$q),{updatePanelsList:i,getPanelContent:n,panelDirectives:g}=Ys(),b=Z(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(s),qn("div",{class:b.value},n(),"pan",c.swipeable,()=>g.value))}}),Ws={class:"detail"},Qs={key:0},Js={key:1},Gs={key:0},Xs={key:0},Zs={colspan:"100%"},er={class:"q-my-md"},tr={key:4},ar={colspan:"100%"},lr={key:5},or={colspan:"100%"},ao={__name:"MainInfoTab",setup(c){const s=ge();return(m,o)=>(u(),h("table",Ws,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.user.username)+" - "+r(a(s).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.opening_balance)),1)]),a(s).props.data.opening_notes?(u(),h("tr",Qs,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_expense)),1)]),a(s).props.data.is_closed?k("",!0):(u(),h("tr",Js,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.actual_balance)),1)])),a(s).props.data.is_closed?(u(),h(G,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.closing_balance)),1)]),a(s).props.data.closing_notes?(u(),h("tr",Gs,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),m.$can("admin.cashier-session.close")?(u(),h(G,{key:3},[a(s).props.data.is_closed?k("",!0):(u(),h("tr",Xs,[t("td",Zs,[t("div",er,[e(D,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=i=>m.$inertia.get(m.route("admin.cashier-session.close",{id:a(s).props.data.id})))},{default:l(()=>o[26]||(o[26]=[v(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(s).props.data.created_at?(u(),h("tr",tr,[t("td",ar," Dibuat "+r(a(Mt)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name)+" ("+r(a(ve)(a(s).props.data.created_at))+") ",1)])):k("",!0),a(s).props.data.updated_at?(u(),h("tr",lr,[t("td",or," Diperbarui "+r(a(Mt)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(ve)(a(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},nr=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"})),sr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},rr={class:"text-bold"},ir={key:0},dr={class:"text-bold"},ur={key:1},mr={key:0},cr={key:0},pr={key:1},lo={__name:"SalesOrderTab",props:{data:Object},setup(c){const s=c,m=T([]),o=T(!0),i=Ie({...Fe(),cashier_session_id:s.data.id,status:["closed","canceled"]}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(f=null)=>Le({pagination:n,filter:i,props:f,rows:m,url:route("admin.sales-order.data"),loading:o}),p=Se(),d=Z(()=>p.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,y)=>(u(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:S})=>[t("div",sr,[t("span",null,r(q)+" "+r(S?" with term "+S:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(q=>a(ee).get(f.route("admin.sales-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",rr,[e(R,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(R,{class:"inline-icon",name:"calendar_today"}),v(" "+r(a(ve)(_.row.datetime)),1)]),a(p).screen.lt.md?(u(),h(G,{key:0},[_.row.customer?(u(),h("div",ir,[e(R,{class:"inline-icon",name:"person"}),v(" "+r(_.row.customer_code)+" "+r(_.row.customer.name),1)])):k("",!0),t("div",dr,[e(R,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(H)(_.row.grand_total)),1)]),_.row.notes?(u(),h("div",ur,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(bt,{color:_.row.status==="closed"?"green":"red"},{default:l(()=>[v(r(f.$CONSTANTS.SALES_ORDER_STATUSES[_.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"customer",props:_},{default:l(()=>[_.row.customer?(u(),h("div",mr,[t("div",null,[e(R,{name:"person",class:"inline-icon"}),v(" "+r(_.row.customer_code)+" - "+r(_.row.customer_name),1)]),_.row.customer_phone?(u(),h("div",cr,[e(R,{name:"phone",class:"inline-icon"}),v(" "+r(_.row.customer_phone),1)])):k("",!0),_.row.customer_address?(u(),h("div",pr,[e(R,{name:"home_pin",class:"inline-icon"}),v(" "+r(_.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[t("div",null,r(a(H)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},fr=Object.freeze(Object.defineProperty({__proto__:null,default:lo},Symbol.toStringTag,{value:"Module"})),gr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},br={class:"text-bold"},vr={class:"text-bold"},yr={key:0},_r={class:"q-mt-sm"},oo={__name:"FinanceTransactionTab",props:{data:Object},setup(c){var f;const s=c;console.log(s.data);const m=T([]),o=T(!0),i=Ie({...Fe(),account_id:(f=s.data.cashier_terminal)==null?void 0:f.finance_account_id,from_datetime:Xt(s.data.opened_at),to_datetime:s.data.closed_at?Xt(s.data.closed_at):null}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(y=null)=>Le({pagination:n,filter:i,props:y,rows:m,url:route("admin.finance-transaction.data"),loading:o}),p=Se(),d=Z(()=>p.screen.gt.sm?g:g.filter(y=>y.name==="id"));return(y,_)=>(u(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=q=>n.value=q),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:q,message:S,filter:w})=>[t("div",gr,[t("span",null,r(S)+" "+r(w?" with term "+w:""),1)])]),body:l(q=>[e(Pe,{props:q},{default:l(()=>[e(W,{key:"id",props:q},{default:l(()=>[t("div",br,[e(R,{class:"inline-icon",name:"tag"}),v(" "+r(q.row.code),1)]),t("div",null,[e(R,{class:"inline-icon",name:"calendar_today"}),v(" "+r(a(ve)(q.row.datetime)),1)]),a(p).screen.lt.md?(u(),h(G,{key:0},[t("div",vr,[e(R,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(H)(q.row.amount)),1)]),q.row.notes?(u(),h("div",yr,[e($e,{text:q.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",_r,[e(bt,{color:q.row.amount>=0?"green":"red"},{default:l(()=>[v(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[q.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"amount",props:q},{default:l(()=>[t("span",{class:Ce(q.row.amount<0?"text-red":"text-green")},r(a(H)(q.row.amount)),3)]),_:2},1032,["props"]),e(W,{key:"notes",props:q,class:"wrap-column"},{default:l(()=>[e($e,{text:q.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},kr=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),wr={class:"q-gutter-sm"},hr={class:"col col-lg-6 q-pa-xs"},$r={class:"row"},Qa="Rincian Sesi Kasir",xr={__name:"Detail",setup(c){const s=ge(),m=Z(()=>s.props.data),o=T("main");return Me(()=>s.props.tab,i=>{i&&(o.value=i)},{immediate:!0}),(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return u(),h(G,null,[e(g,{title:Qa}),e(b,null,{title:l(()=>[v(r(Qa))]),"left-button":l(()=>[t("div",wr,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",hr,[t("div",$r,[e(fe,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:l(()=>[e(Pt,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Ringkasan"}),e(dt,{name:"sales",label:"Transaksi Penjualan"}),e(dt,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Ae),e(Rt,{modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=p=>o.value=p),animated:"",class:"q-pa-none"},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(ao,{data:m.value},null,8,["data"])]),_:1}),e(ut,{name:"sales",class:"q-pa-xs"},{default:l(()=>[e(lo,{data:m.value},null,8,["data"])]),_:1}),e(ut,{name:"finance",class:"q-pa-xs"},{default:l(()=>[e(oo,{data:m.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Sr=Object.freeze(Object.defineProperty({__proto__:null,default:xr},Symbol.toStringTag,{value:"Module"}));function jt(){return{protectClick:s=>(m,o)=>{const i=window.getSelection();if(i&&!i.isCollapsed){o.stopPropagation();return}s(m,o)}}}const Vr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},qr={class:"q-pa-xs"},Cr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Tr={class:"flex justify-end"},Ja="Sesi Kasir",Pr={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=Ie({search:"",status:"all",...Fe()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];he(()=>{q()});const _=M=>lt({message:`Hapus Sesi: ${M.cashier_terminal.name} - ${M.user.username}?`,url:route("admin.cashier-session.delete",M.id),fetchItemsCallback:q,loading:i}),q=(M=null)=>{Le({pagination:d,filter:p,props:M,rows:o,url:route("admin.cashier-session.data"),loading:i,tableRef:n})},S=()=>q(),w=M=>ee.get(route("admin.cashier-session.detail",{id:M.id})),{protectClick:z}=jt(),Y=z(w),C=Z(()=>s.screen.gt.sm?f:f.filter(M=>M.name==="id"||M.name==="action"));return(M,O)=>{const B=X("i-head"),A=X("authenticated-layout");return u(),h(G,null,[e(B,{title:Ja}),e(A,null,He({title:l(()=>[v(r(Ja))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=x=>m.value=!m.value)},null,8,["icon"]),M.$can("admin.cashier-session.open")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=x=>a(ee).get(M.route("admin.cashier-session.open")))})):k("",!0)]),default:l(()=>[t("div",qr,[e(Ue,{class:"full-height-table",style:Ke({height:a(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":O[5]||(O[5]=x=>d.value=x),filter:p.search,loading:i.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:q,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:U,filter:P})=>[t("div",Cr,[t("span",null,r(U)+" "+r(P?" with term "+P:""),1)])]),body:l(x=>[e(Pe,{props:x,class:Ce(["cursor-pointer",x.row.is_closed?"":"bg-yellow-3"]),onClick:J(U=>a(Y)(x.row,U),["stop"])},{default:l(()=>[e(W,{key:"id",props:x,class:"wrap-column"},{default:l(()=>[t("div",null,[e(R,{class:"inline-icon",name:"tag"}),v(" SessionID: "+r(x.row.id),1)]),t("div",null,[e(R,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(x.row.cashier_terminal.name),1)]),t("div",null,[e(R,{class:"inline-icon",name:"person"}),v(" "+r(x.row.user.username)+" - "+r(x.row.user.name),1)])]),_:2},1032,["props"]),e(W,{key:"opening_info",props:x},{default:l(()=>[t("div",null,[e(R,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(x.row.opened_at?a(ve)(x.row.opened_at):"-"),1)]),t("div",null,[e(R,{class:"inline-icon",name:"money"}),v(" "+r(a(vt)(x.row.opening_balance)),1)]),x.row.opening_notes?(u(),I($e,{key:0,text:x.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"closing_info",props:x},{default:l(()=>[t("div",null,[e(R,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(x.row.closed_at?a(ve)(x.row.closed_at):"-"),1)]),t("div",null,[e(R,{class:"inline-icon",name:"money"}),v(" "+r(a(vt)(x.row.closing_balance)),1)]),x.row.closing_notes?(u(),I($e,{key:0,text:x.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"action",props:x},{default:l(()=>[t("div",Tr,[M.$can("admin.cashier-session.close")||M.$can("admin.cashier-session.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[4]||(O[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[M.$can("admin.cashier-session.close")?te((u(),I(oe,{key:0,disable:x.row.is_closed,clickable:"",onClick:J(U=>a(ee).get(M.route("admin.cashier-session.close",x.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"logout"})]),_:1}),e(F,null,{default:l(()=>O[6]||(O[6]=[v("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[ie],[pe]]):k("",!0),M.$can("admin.cashier-session.delete")&&!x.row.is_closed?te((u(),I(oe,{key:1,onClick:J(U=>_(x.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>O[7]||(O[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Vr,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[O[2]||(O[2]=x=>p.status=x),S],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":O[3]||(O[3]=x=>p.search=x),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Rr=Object.freeze(Object.defineProperty({__proto__:null,default:Pr},Symbol.toStringTag,{value:"Module"})),Or={class:"q-gutter-sm"},Ir={class:"col col-md-6 q-pa-xs"},Ga="Buka Sesi Kasir",Ur={__name:"Open",setup(c){const s=ge(),m=Qe({cashier_terminal_id:s.props.data.cashier_terminal_id,opening_balance:parseFloat(s.props.data.opening_balance),opening_notes:s.props.data.opening_notes}),o=[...s.props.cashier_terminals.map(n=>({value:n.id,label:n.name,balance:parseFloat(n.finance_account.balance)}))],i=()=>nt({form:m,url:route("admin.cashier-session.open")});return Me(()=>m.cashier_terminal_id,n=>{if(n){const g=o.find(b=>b.value===n);g&&(m.opening_balance=g.balance)}else m.opening_balance=0}),(n,g)=>{const b=X("i-head"),p=X("authenticated-layout");return u(),h(G,null,[e(b,{title:Ga}),e(p,null,{title:l(()=>[v(r(Ga))]),"left-button":l(()=>[t("div",Or,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=d=>n.$inertia.get(n.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ir,[e(Je,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=d=>a(m).id=d)},null,512),[[yt,a(m).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ce,{class:"custom-select",modelValue:a(m).cashier_terminal_id,"onUpdate:modelValue":g[2]||(g[2]=d=>a(m).cashier_terminal_id=d),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:a(m).errors.cashier_terminal_id,error:!!a(m).errors.cashier_terminal_id,disable:a(m).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Ee,{modelValue:a(m).opening_balance,"onUpdate:modelValue":g[3]||(g[3]=d=>a(m).opening_balance=d),label:"Saldo Buka Sesi",lazyRules:"",disable:a(m).processing,error:!!a(m).errors.opening_balance,errorMessage:a(m).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),g[6]||(g[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(ne,{modelValue:a(m).opening_notes,"onUpdate:modelValue":g[4]||(g[4]=d=>a(m).opening_notes=d),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(m).processing,error:!!a(m).errors.opening_notes,"error-message":a(m).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:a(m).processing},null,8,["disable"]),e(D,{label:"Batal",icon:"cancel",disable:a(m).processing,onClick:g[5]||(g[5]=d=>a(ee).get(n.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Dr=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"})),Er={class:"detail"},jr={colspan:"3"},Ar={class:"text-bold text-grey-8"},Mr={key:0},Nr={colspan:"100%"},Br={key:1},zr={colspan:"100%"},no={__name:"MainInfoTab",setup(c){const s=ge();return(m,o)=>(u(),h("table",Er,[t("tbody",null,[t("tr",null,[t("td",jr,[t("div",Ar,[o[1]||(o[1]=v(" Info Terminal Kasir ")),e(D,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=i=>m.$inertia.get(m.route("admin.cashier-terminal.edit",{id:a(s).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(s).props.data.created_at?(u(),h("tr",Mr,[t("td",Nr," Dibuat "+r(a(Mt)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name)+" ("+r(a(ve)(a(s).props.data.created_at))+") ",1)])):k("",!0),a(s).props.data.updated_at?(u(),h("tr",Br,[t("td",zr," Diperbarui "+r(a(Mt)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(ve)(a(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},Fr=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),Lr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},so={__name:"SessionHistoryTab",setup(c){const s=ge(),m=T([]),o=T(!0),i=Ie({cashier_terminal_id:s.props.data.id,...Fe()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];he(()=>{b()});const b=(f=null)=>Le({pagination:n,filter:i,props:f,rows:m,url:route("admin.cashier-session.data"),loading:o}),p=Se(),d=Z(()=>p.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,y)=>(u(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:S})=>[t("div",Lr,[t("span",null,r(q)+" "+r(S?" with term "+S:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(q=>a(ee).get(f.route("admin.customer-wallet-transaction.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_,class:"wrap-column"},{default:l(()=>[t("div",null,[e(R,{class:"inline-icon",name:"tag"}),v(" Session ID: "+r(_.row.id),1)]),t("div",null,[e(R,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(_.row.cashier_terminal.name),1)]),t("div",null,[e(R,{class:"inline-icon",name:"person"}),v(" "+r(_.row.user.username)+" - "+r(_.row.user.name),1)])]),_:2},1032,["props"]),e(W,{key:"opening_info",props:_},{default:l(()=>[t("div",null,[e(R,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(_.row.opened_at?a(ve)(_.row.opened_at):"-"),1)]),t("div",null,[e(R,{class:"inline-icon",name:"money"}),v(" "+r(a(vt)(_.row.opening_balance)),1)]),_.row.opening_notes?(u(),I($e,{key:0,text:_.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"closing_info",props:_},{default:l(()=>[t("div",null,[e(R,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(_.row.closed_at?a(ve)(_.row.closed_at):"-"),1)]),t("div",null,[e(R,{class:"inline-icon",name:"money"}),v(" "+r(a(vt)(_.row.closing_balance)),1)]),_.row.closing_notes?(u(),I($e,{key:0,text:_.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Hr=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"})),Kr={class:"q-gutter-sm"},Yr={class:"col col-lg-6 q-pa-xs"},Wr={class:"row"},Xa="Rincian Terminal Kasir",Qr={__name:"Detail",setup(c){const s=T("main");return(m,o)=>{const i=X("i-head"),n=X("authenticated-layout");return u(),h(G,null,[e(i,{title:Xa}),e(n,null,{title:l(()=>[v(r(Xa))]),"left-button":l(()=>[t("div",Kr,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=g=>m.$inertia.get(m.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Yr,[t("div",Wr,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Pt,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=g=>s.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=g=>s.value=g),animated:""},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(no)]),_:1}),e(ut,{name:"session-history",class:"q-pa-xs"},{default:l(()=>[e(so)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Jr=Object.freeze(Object.defineProperty({__proto__:null,default:Qr},Symbol.toStringTag,{value:"Module"})),Gr={class:"q-gutter-sm"},Xr={class:"col col-md-6 q-pa-xs"},Zr={key:0,class:"q-my-xs text-grey-8"},ei={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Terminal",o=Qe({id:s.props.data.id,name:s.props.data.name,finance_account_id:s.props.data.finance_account_id??"new",location:s.props.data.location,active:!!s.props.data.active,notes:s.props.data.notes}),i=[{value:"new",label:"Buat Baru (Otomatis)"},...s.props.finance_accounts.map(g=>({value:g.id,label:g.name}))],n=()=>nt({form:o,url:route("admin.cashier-terminal.save")});return(g,b)=>{const p=X("i-head"),d=X("authenticated-layout");return u(),h(G,null,[e(p,{title:m}),e(d,null,{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",Gr,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$inertia.get(g.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Xr,[e(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>a(o).id=f)},null,512),[[yt,a(o).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ne,{modelValue:a(o).name,"onUpdate:modelValue":b[2]||(b[2]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{class:"custom-select",modelValue:a(o).finance_account_id,"onUpdate:modelValue":b[3]||(b[3]=f=>a(o).finance_account_id=f),label:"Akun Kas",options:i,"map-options":"","emit-value":"",errorMessage:a(o).errors.finance_account_id,error:!!a(o).errors.finance_account_id,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),a(o).finance_account_id==="new"?(u(),h("div",Zr,[b[8]||(b[8]=v(" Akun keuangan akan dibuat ")),a(o).name?(u(),h(G,{key:0},[v(" dengan nama Kas "+r(a(o).name),1)],64)):k("",!0)])):k("",!0),e(ne,{modelValue:a(o).location,"onUpdate:modelValue":b[4]||(b[4]=f=>a(o).location=f),modelModifiers:{trim:!0},label:"Lokasi",error:!!a(o).errors.location,disable:a(o).processing,"error-message":a(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(o).notes,"onUpdate:modelValue":b[5]||(b[5]=f=>a(o).notes=f),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ya,{modelValue:a(o).active,"onUpdate:modelValue":b[6]||(b[6]=f=>a(o).active=f),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(D,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:b[7]||(b[7]=f=>a(ee).get(g.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ti=Object.freeze(Object.defineProperty({__proto__:null,default:ei},Symbol.toStringTag,{value:"Module"})),ai={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},li={class:"q-pa-xs"},oi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ni={class:"flex justify-end"},Za="Terminal Kasir",si={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=Ie({search:"",status:"active",...Fe()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:s.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{q()});const _=M=>lt({message:`Hapus Terminal Kasir ${M.name}?`,url:route("admin.cashier-terminal.delete",M.id),fetchItemsCallback:q,loading:i}),q=(M=null)=>{Le({pagination:d,filter:p,props:M,rows:o,url:route("admin.cashier-terminal.data"),loading:i,tableRef:n})},S=()=>q(),w=M=>ee.get(route("admin.cashier-terminal.detail",{id:M.id})),{protectClick:z}=jt(),Y=z(w),C=Z(()=>s.screen.gt.sm?f:f.filter(M=>M.name==="name"||M.name==="finance_account_id"||M.name==="action"));return(M,O)=>{const B=X("i-head"),A=X("authenticated-layout");return u(),h(G,null,[e(B,{title:Za}),e(A,null,He({title:l(()=>[v(r(Za))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=x=>m.value=!m.value)},null,8,["icon"]),M.$can("admin.cashier-terminal.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=x=>a(ee).get(M.route("admin.cashier-terminal.add")))})):k("",!0)]),default:l(()=>[t("div",li,[e(Ue,{class:"full-height-table",style:Ke({height:a(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":O[5]||(O[5]=x=>d.value=x),filter:p.search,loading:i.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:q,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:U,filter:P})=>[t("div",oi,[t("span",null,r(U)+" "+r(P?" with term "+P:""),1)])]),body:l(x=>[e(Pe,{props:x,class:Ce([x.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(U=>a(Y)(x.row,U),["stop"])},{default:l(()=>[e(W,{key:"name",props:x,class:"wrap-column"},{default:l(()=>[t("div",null,[e(R,{name:"wallet"}),v(" "+r(x.row.name),1)]),t("div",null,[e(R,{name:"home_pin"}),v(" "+r(x.row.location),1)]),a(s).screen.lt.md?(u(),I($e,{key:0,text:x.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:x},{default:l(()=>[t("div",null,[e(R,{name:"wallet"}),v(" "+r(x.row.finance_account.name),1)]),t("div",null,[e(R,{name:"money"}),v(" "+r(a(vt)(x.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(W,{key:"notes",props:x},{default:l(()=>[e($e,{text:x.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:x},{default:l(()=>[t("div",ni,[M.$can("admin.cashier-terminal.edit")||M.$can("admin.cashier-terminal.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[4]||(O[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[M.$can("admin.cashier-terminal.edit")?te((u(),I(oe,{key:0,clickable:"",onClick:J(U=>a(ee).get(M.route("admin.cashier-terminal.edit",x.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>O[6]||(O[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),M.$can("admin.cashier-terminal.delete")?te((u(),I(oe,{key:1,onClick:J(U=>_(x.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>O[7]||(O[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",ai,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[O[2]||(O[2]=x=>p.status=x),S],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":O[3]||(O[3]=x=>p.search=x),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ri=Object.freeze(Object.defineProperty({__proto__:null,default:si},Symbol.toStringTag,{value:"Module"})),ii={class:"q-gutter-sm"},di={class:"col col-md-6 q-pa-xs"},ui={class:"row"},mi={class:"detail"},ci={key:0},pi={key:1},fi={key:0},gi={key:1},bi={colspan:"3",class:"bg-white"},el="Rincian Konfirmasi Top Up",vi={__name:"Detail",setup(c){const s=ge(),m=()=>fa({message:`Setujui konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"accept"},onSuccess:()=>{ee.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}}),o=()=>fa({message:`Tolak konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"reject"},onSuccess:()=>{ee.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}});return(i,n)=>{const g=X("i-head"),b=X("i-link"),p=X("my-link"),d=X("authenticated-layout");return u(),h(G,null,[e(g,{title:el}),e(d,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",ii,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>i.$inertia.get(i.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":l(()=>[a(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:reject")?(u(),I(D,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:n[1]||(n[1]=f=>o()),class:"q-mr-sm"})):k("",!0),a(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:accept")?(u(),I(D,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:n[2]||(n[2]=f=>m())})):k("",!0)]),title:l(()=>[t("span",{class:"text-subtitle2"},r(el))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",di,[t("div",ui,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[n[24]||(n[24]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",mi,[t("tbody",null,[t("tr",null,[n[3]||(n[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),n[4]||(n[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Waktu",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.datetime)),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Pelanggan",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(R,{name:"person",class:"inline-icon"}),e(b,{href:i.route("admin.customer.detail",{id:a(s).props.data.customer_id})},{default:l(()=>[v(r(a(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(R,{name:"person",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.name),1)]),a(s).props.data.customer.phone?(u(),h("div",ci,[e(R,{name:"phone",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.phone),1)])):k("",!0),a(s).props.data.customer.address?(u(),h("div",pi,[e(R,{name:"home_pin",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[n[11]||(n[11]=t("td",null,"Akun Tujuan",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[e(p,{href:i.route("admin.finance-account.detail",{id:a(s).props.data.finance_account.id})},{default:l(()=>[v(r(a(s).props.data.finance_account.name),1)]),_:1},8,["href"]),n[10]||(n[10]=t("br",null,null,-1)),a(s).props.data.finance_account.type==="bank"?(u(),h(G,{key:0},[v(" Rek "+r(a(s).props.data.finance_account.bank)+" an "+r(a(s).props.data.finance_account.holder)+" ",1),n[9]||(n[9]=t("br",null,null,-1)),v(" "+r(a(s).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[n[13]||(n[13]=t("td",null,"Jumlah",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(H)(a(s).props.data.amount)),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"Status",-1)),n[16]||(n[16]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[a(s).props.data.status]),1)]),t("tr",null,[n[17]||(n[17]=t("td",null,"Catatan",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(u(),h("tr",fi,[n[19]||(n[19]=t("td",null,"Dibuat",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(u(),h("tr",gi,[n[21]||(n[21]=t("td",null,"Diperbarui",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(u(),h(G,{key:2},[n[23]||(n[23]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",bi,[e(sa,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:Ke([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},yi=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"})),_i={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ki={class:"q-pa-xs"},wi={key:0},hi={class:"flex justify-end no-wrap"},tl="Konfirmasi Top Up Wallet",$i={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=T(null),d=T(!1),f=zt(),y=Ft(),_=[{label:"Semua Tahun",value:"all"},...Ct(f-2,f).reverse()],q=[{value:"all",label:"Semua Bulan"},...Tt()],S=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],w=Ie({search:"",year:f,month:y,status:"all",...Fe()}),z=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",field:"action",align:"center"}];he(()=>{C()});const C=(P=null)=>{Le({pagination:z,filter:w,props:P,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:i,tableRef:n})},M=()=>{C()},O=Z(()=>s.screen.gt.sm?Y:Y.filter(P=>["code","action"].includes(P.name)));Me(()=>w.year,P=>{P===null&&(w.month=null)});const B=P=>fa({message:`Setujui konfirmasi transaksi #${P.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:C,loading:i,data:{id:P.id,action:"accept"}}),A=P=>fa({message:`Tolak konfirmasi transaksi #${P.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:C,loading:i,data:{id:P.id,action:"reject"}}),x=P=>lt({message:`Hapus konfirmasi transaksi ${P.code}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",P.id),fetchItemsCallback:C,loading:i}),U=P=>{p.value=P,d.value=!0};return(P,$)=>{const E=X("i-head"),N=X("authenticated-layout");return u(),h(G,null,[e(E,{title:tl}),e(N,null,He({title:l(()=>[v(r(tl))]),"right-button":l(()=>[e(D,{class:"q-ml-sm",icon:m.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:$[0]||($[0]=V=>m.value=!m.value)},null,8,["icon"])]),default:l(()=>[t("div",ki,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Ke({height:a(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:z.value,"onUpdate:pagination":$[6]||($[6]=V=>z.value=V),filter:w.search,loading:i.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:C,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),body:l(V=>[e(Pe,{props:V,class:"cursor-pointer",onClick:J(j=>a(ee).get(P.route("admin.customer-wallet-transaction-confirmation.detail",{id:V.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:V,class:"wrap-column"},{default:l(()=>[t("div",null,[e(R,{class:"inline-icon",name:"tag"}),v(" "+r(V.row.code),1)]),a(s).screen.gt.sm?k("",!0):(u(),h("div",wi,[e(R,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)(V.row.datetime)),1)])),a(s).screen.gt.sm?k("",!0):(u(),h(G,{key:1},[e($e,{icon:"account_balance",text:V.row.finance_account.name},null,8,["text"]),t("div",null,[e(R,{name:"person",class:"inline-icon"}),v(" "+r(V.row.customer.code)+" - "+r(V.row.customer.name),1)]),t("div",null,[e(R,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(H)(V.row.amount)),1)]),V.row.notes?(u(),I($e,{key:0,icon:"notes",text:V.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Fa,{status:V.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(W,{key:"datetime",props:V,class:"wrap-column"},{default:l(()=>[v(r(a(ve)(V.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"customer_id",props:V},{default:l(()=>[e($e,{text:V.row.customer.code+" - "+V.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:V},{default:l(()=>[v(r(V.row.finance_account.name),1),$[8]||($[8]=t("br",null,null,-1)),v(" "+r(V.row.finance_account.bank)+" "+r(V.row.finance_account.number)+" an. "+r(V.row.finance_account.holder),1)]),_:2},1032,["props"]),e(W,{key:"amount",props:V,style:{"text-align":"right"}},{default:l(()=>[v(r(a(H)(V.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"status",props:V,class:"text-center"},{default:l(()=>[e(Fa,{status:V.row.status},null,8,["status"])]),_:2},1032,["props"]),e(W,{key:"notes",props:V,class:"word-wrap"},{default:l(()=>[e($e,{icon:"notes",text:V.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:V,class:"text-center"},{default:l(()=>[t("div",hi,[e(D,{icon:"image",color:"primary",dense:"",flat:"",disable:V.row.image_path===null||V.row.image_path==="",onClick:J(j=>U(V.row.image_path),["stop"])},{default:l(()=>[V.row.image_path!=null?(u(),I(ea,{key:0},{default:l(()=>$[9]||($[9]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.customer-wallet-transaction-confirmation:accept")||P.$can("admin.customer-wallet-transaction-confirmation:deny")||P.$can("admin.customer-wallet-transaction-confirmation.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.customer-wallet-transaction-confirmation:accept")?te((u(),I(oe,{key:0,onClick:J(j=>B(V.row),["stop"]),clickable:"",disable:V.row.status!=="pending"},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"check"})]),_:1}),e(F,null,{default:l(()=>$[10]||($[10]=[v("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[ie],[pe]]):k("",!0),P.$can("admin.customer-wallet-transaction-confirmation:deny")?te((u(),I(oe,{key:1,onClick:J(j=>A(V.row),["stop"]),clickable:"",disable:V.row.status!=="pending"},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"cancel"})]),_:1}),e(F,null,{default:l(()=>$[11]||($[11]=[v("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[ie],[pe]]):k("",!0),e(Ae),P.$can("admin.customer-wallet-transaction-confirmation.delete")?te((u(),I(oe,{key:2,onClick:J(j=>x(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>$[12]||($[12]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(ba,{modelValue:d.value,"onUpdate:modelValue":$[7]||($[7]=V=>d.value=V),imageUrl:`/${p.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",_i,[e(ce,{modelValue:w.year,"onUpdate:modelValue":[$[1]||($[1]=V=>w.year=V),M],options:_,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!=="all"?(u(),I(ce,{key:0,modelValue:w.month,"onUpdate:modelValue":[$[2]||($[2]=V=>w.month=V),M],options:q,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:w.status,"onUpdate:modelValue":[$[3]||($[3]=V=>w.status=V),M],options:S,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":$[4]||($[4]=V=>w.search=V),placeholder:"Cari...",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},xi=Object.freeze(Object.defineProperty({__proto__:null,default:$i},Symbol.toStringTag,{value:"Module"}));function ro(c,s=!1){const m=c.map(g=>({value:g.id,label:g.name+" ("+g.code+")"})),o=s?[{value:"all",label:"Semua"},...m]:m,i=T([...o]);return{filteredCustomers:i,filterCustomersFn:(g,b)=>{b(()=>{i.value=o.filter(p=>p.label.toLowerCase().includes(g.toLowerCase()))})},customers:o}}const Si={class:"col col-md-6 q-pa-xs"},al="Penyesuaian Saldo Dompet Pelanggan",Vi={__name:"Adjustment",setup(c){const s=ge(),{filteredCustomers:m,filterCustomersFn:o}=ro(s.props.customers,!1),i=Qe({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),n=()=>i.amount=i.new_wallet_balance-i.old_wallet_balance;Me(()=>i.customer_id,async p=>{if(!p){i.old_wallet_balance=0,i.new_wallet_balance=0,n();return}i.processing=!0;try{const d=await axios.get(route("admin.customer.wallet_balance",{id:p}));i.new_wallet_balance=i.old_wallet_balance=d.data.wallet_balance}catch(d){console.error("Gagal mengambil saldo:",d),i.old_wallet_balance=0,i.new_wallet_balance=0}i.processing=!1,n()});const g=Z(()=>i.new_wallet_balance-i.old_wallet_balance),b=()=>nt({form:i,url:route("admin.customer-wallet-transaction.adjustment")});return(p,d)=>{const f=X("i-head"),y=X("authenticated-layout");return u(),h(G,null,[e(f,{title:al}),e(y,null,{title:l(()=>[v(r(al))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Si,[e(Je,{class:"row",onSubmit:J(b,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ce,{class:"custom-select",modelValue:a(i).customer_id,"onUpdate:modelValue":d[0]||(d[0]=_=>a(i).customer_id=_),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(m),"map-options":"","emit-value":"",errorMessage:a(i).errors.customer_id,onFilter:a(o),error:!!a(i).errors.customer_id,disable:a(i).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,null,{default:l(()=>d[6]||(d[6]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Ee,{modelValue:a(i).old_wallet_balance,"onUpdate:modelValue":d[1]||(d[1]=_=>a(i).old_wallet_balance=_),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.old_wallet_balance,errorMessage:a(i).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(i).new_wallet_balance,"onUpdate:modelValue":d[2]||(d[2]=_=>a(i).new_wallet_balance=_),label:"Saldo Seharusnya",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.new_wallet_balance,errorMessage:a(i).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":d[3]||(d[3]=_=>g.value=_),label:"Selisih",readonly:"",lazyRules:"",disable:a(i).processing},null,8,["modelValue","disable"]),e(ne,{modelValue:a(i).notes,"onUpdate:modelValue":d[4]||(d[4]=_=>a(i).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.notes,"error-message":a(i).errors.notes,rules:[_=>_&&_.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:d[5]||(d[5]=_=>a(ee).get(p.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},qi=Object.freeze(Object.defineProperty({__proto__:null,default:Vi},Symbol.toStringTag,{value:"Module"})),Ci={class:"q-gutter-sm"},Ti={class:"col col-md-6 q-pa-xs"},Pi={class:"row"},Ri={class:"detail"},Oi={key:0},Ii={key:1},Ui={key:0},Di={key:1},Ei={colspan:"3",class:"bg-white"},ll="Rincian Transaksi",ji={__name:"Detail",setup(c){const s=ge();return(m,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return u(),h(G,null,[e(i,{title:ll}),e(g,null,{"left-button":l(()=>[t("div",Ci,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.$goBack())})])]),title:l(()=>[v(r(ll))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ti,[t("div",Pi,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[o[18]||(o[18]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",Ri,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.datetime)),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Pelanggan",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(R,{name:"person",class:"inline-icon"}),e(n,{href:m.route("admin.customer.detail",{id:a(s).props.data.customer_id})},{default:l(()=>[v(""+r(a(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(R,{name:"person",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.name),1)]),a(s).props.data.customer.phone?(u(),h("div",Oi,[e(R,{name:"phone",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.phone),1)])):k("",!0),a(s).props.data.customer.address?(u(),h("div",Ii,[e(R,{name:"home_pin",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[a(s).props.data.type]),1)]),t("tr",null,[o[9]||(o[9]=t("td",null,"Jumlah",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",{class:Ce(a(s).props.data.amount>0?"text-positive":"text-negative")},r(a(aa)(a(s).props.data.amount))+"Rp. "+r(a(H)(Math.abs(a(s).props.data.amount))),3)]),t("tr",null,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(u(),h("tr",Ui,[o[13]||(o[13]=t("td",null,"Dibuat",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(u(),h("tr",Di,[o[15]||(o[15]=t("td",null,"Diperbarui",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(u(),h(G,{key:2},[o[17]||(o[17]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Ei,[e(sa,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:Ke([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Ai=Object.freeze(Object.defineProperty({__proto__:null,default:ji},Symbol.toStringTag,{value:"Module"})),Mi={class:"q-gutter-sm"},Ni={class:"col col-md-6 q-pa-xs"},Bi={__name:"Editor",setup(c){var d;const s=ge(),m=(s.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:i}=ro(s.props.customers,!1),n=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],g=s.props.finance_accounts.map(f=>({label:f.name,value:f.id})),b=Qe({id:s.props.data.id,customer_id:s.props.data.customer_id,finance_account_id:s.props.data.finance_account_id,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((d=s.props.data)==null?void 0:d.image_path)??"",image:null}),p=()=>{ra(b,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:b,url:route("admin.customer-wallet-transaction.save")})};return(f,y)=>{const _=X("i-head"),q=X("authenticated-layout");return u(),h(G,null,[e(_,{title:m}),e(q,null,{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",Mi,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=S=>f.$inertia.get(f.route("admin.customer-wallet-transaction.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ni,[e(Je,{class:"row",onSubmit:J(p,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[1]||(y[1]=S=>a(b).id=S)},null,512),[[yt,a(b).id]]),e(Lt,{autofocus:"",modelValue:a(b).datetime,"onUpdate:modelValue":y[2]||(y[2]=S=>a(b).datetime=S),label:"Tanggal",error:!!a(b).errors.datetime,disable:a(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ce,{class:"custom-select",modelValue:a(b).customer_id,"onUpdate:modelValue":y[3]||(y[3]=S=>a(b).customer_id=S),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"","emit-value":"",errorMessage:a(b).errors.customer_id,onFilter:a(i),error:!!a(b).errors.customer_id,disable:a(b).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,null,{default:l(()=>y[10]||(y[10]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(ce,{modelValue:a(b).type,"onUpdate:modelValue":y[4]||(y[4]=S=>a(b).type=S),label:"Jenis",options:n,"map-options":"","emit-value":"",error:!!a(b).errors.type,disable:a(b).processing,errorMessage:a(b).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{modelValue:a(b).finance_account_id,"onUpdate:modelValue":y[5]||(y[5]=S=>a(b).finance_account_id=S),label:a(b).type=="deposit"?"Kas Tujuan":"Kas Asal",options:a(g),"map-options":"","emit-value":"",error:!!a(b).errors.finance_account_id,disable:a(b).processing,errorMessage:a(b).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Ee,{modelValue:a(b).amount,"onUpdate:modelValue":y[6]||(y[6]=S=>a(b).amount=S),label:"Jumlah",lazyRules:"",disable:a(b).processing,error:!!a(b).errors.amount,errorMessage:a(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ne,{modelValue:a(b).notes,"onUpdate:modelValue":y[7]||(y[7]=S=>a(b).notes=S),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(b).processing,error:!!a(b).errors.notes,"error-message":a(b).errors.notes,rules:[S=>S&&S.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Ua,{modelValue:a(b).image,"onUpdate:modelValue":y[8]||(y[8]=S=>a(b).image=S),"initial-image-path":a(b).image_path,disabled:a(b).processing,error:!!a(b).errors.image||!!a(b).errors.image_path,"error-message":a(b).errors.image||a(b).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(b).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(b).processing,onClick:y[9]||(y[9]=S=>a(ee).get(f.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},zi=Object.freeze(Object.defineProperty({__proto__:null,default:Bi},Symbol.toStringTag,{value:"Module"})),Fi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Li={class:"q-pa-xs"},Hi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ki={key:0},Yi={key:0},Wi={class:"flex justify-end no-wrap"},ol="Transaksi Dompet Pelanggan",Qi={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=new Date().getFullYear(),d=new Date().getMonth()+1,f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Ct(p-2,p-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Tt()],_=Ie({search:"",year:p,month:d,...Fe()}),q=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),S=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{z()});const w=A=>lt({message:`Hapus transaksi #${A.code}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",A.id),fetchItemsCallback:z,loading:i}),z=(A=null)=>{Le({pagination:q,filter:_,props:A,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:i,tableRef:n})},Y=()=>{z()},C=Z(()=>s.screen.gt.sm?S:S.filter(A=>A.name==="code"||A.name==="action"));Me(()=>_.year,A=>{A===null&&(_.month=null)});const M=T(null),O=T(!1),B=A=>{M.value=A,O.value=!0};return(A,x)=>{const U=X("i-head"),P=X("authenticated-layout");return u(),h(G,null,[e(U,{title:ol}),e(P,null,He({title:l(()=>[v(r(ol))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=$=>m.value=!m.value)},null,8,["icon"]),A.$can("admin.customer-wallet-transaction.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=$=>a(ee).get(A.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",Li,[e(Ue,{ref_key:"tableRef",ref:n,style:Ke({height:a(b)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:q.value,"onUpdate:pagination":x[6]||(x[6]=$=>q.value=$),filter:_.search,loading:i.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:z,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:$,message:E,filter:N})=>[t("div",Hi,[t("span",null,r(E)+" "+r(N?" with term "+N:""),1)])]),body:l($=>[e(Pe,{props:$,class:"cursor-pointer",onClick:J(E=>a(ee).get(A.route("admin.customer-wallet-transaction.detail",{id:$.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:$,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.gt.sm?k("",!0):(u(),I(R,{key:0,name:"tag",class:"inline-icon"})),v(" "+r($.row.code),1)]),a(s).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[t("div",null,[e(R,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)($.row.datetime)),1)]),$.row.finance_account?(u(),h("div",Ki,[e(R,{name:"wallet",class:"inline-icon"}),v(" "+r($.row.finance_account?$.row.finance_account.name:"-"),1)])):k("",!0),e($e,{icon:"person",text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"]),t("div",{class:Ce([$.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(R,{name:"money",class:"inline-icon"}),v(" "+r(a(aa)($.row.amount))+"Rp. "+r(a(H)(Math.abs($.row.amount))),1)],2),e($e,{text:$.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(bt,null,{default:l(()=>[v(r($.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(W,{key:"datetime",props:$},{default:l(()=>[v(r(a(ve)($.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"customer_id",props:$},{default:l(()=>[e($e,{text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:$},{default:l(()=>[$.row.finance_account?(u(),h("div",Yi,r($.row.finance_account?$.row.finance_account.name:"-"),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"amount",props:$,style:{"text-align":"right"}},{default:l(()=>[v(r(a(ia)($.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:$},{default:l(()=>[e($e,{text:$.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:$},{default:l(()=>[t("div",Wi,[e(D,{icon:"image",color:"primary",dense:"",flat:"",disable:$.row.image_path===null||$.row.image_path==="",onClick:J(E=>B($.row.image_path),["stop"])},{default:l(()=>[$.row.image_path!=null?(u(),I(ea,{key:0},{default:l(()=>x[8]||(x[8]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),A.$can("admin.customer-wallet-transaction.delete")?(u(),I(D,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:x[5]||(x[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[A.$can("admin.customer-wallet-transaction.delete")?te((u(),I(oe,{key:0,onClick:J(E=>w($.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>x[9]||(x[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ba,{modelValue:O.value,"onUpdate:modelValue":x[7]||(x[7]=$=>O.value=$),imageUrl:`/${M.value}`},null,8,["modelValue","imageUrl"])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Fi,[e(ce,{modelValue:_.year,"onUpdate:modelValue":[x[2]||(x[2]=$=>_.year=$),Y],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:_.month,"onUpdate:modelValue":[x[3]||(x[3]=$=>_.month=$),Y],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:_.year===null},null,8,["modelValue","disable"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":x[4]||(x[4]=$=>_.search=$),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ji=Object.freeze(Object.defineProperty({__proto__:null,default:Qi},Symbol.toStringTag,{value:"Module"})),Gi={class:"detail"},Xi={key:0},Zi={key:1},ed={class:"text-grey-8"},td={key:2},ad={class:"text-grey-8"},ld={key:0,class:"q-pt-md"},io={__name:"MainInfoTab",setup(c){const s=ge(),m=()=>{lt({message:`Hapus Pelanggan ${s.props.data.code}?`,url:route("admin.customer.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.customer.index"))}})};return(o,i)=>(u(),h(G,null,[t("table",Gi,[t("tbody",null,[i[28]||(i[28]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pelanggan")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Jenis",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.type_label),1)]),t("tr",null,[i[5]||(i[5]=t("td",null,"Nama",-1)),i[6]||(i[6]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[i[7]||(i[7]=t("td",null,"Default Harga",-1)),i[8]||(i[8]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.default_price_type_label),1)]),t("tr",null,[i[9]||(i[9]=t("td",null,"No. Telepon",-1)),i[10]||(i[10]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone?a(s).props.data.phone:"-"),1)]),t("tr",null,[i[11]||(i[11]=t("td",null,"Alamat",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.address?a(s).props.data.address:"-"),1)]),t("tr",null,[i[13]||(i[13]=t("td",null,"Saldo Wallet",-1)),i[14]||(i[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(H)(a(s).props.data.wallet_balance)),1)]),t("tr",null,[i[15]||(i[15]=t("td",null,"Utang Penjualan",-1)),i[16]||(i[16]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(H)(a(s).props.data.balance)),1)]),t("tr",null,[i[17]||(i[17]=t("td",null,"Status",-1)),i[18]||(i[18]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),i[29]||(i[29]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),a(s).props.data.created_at?(u(),h("tr",Xi,[i[19]||(i[19]=t("td",null,"Dibuat",-1)),i[20]||(i[20]=t("td",null,":",-1)),t("td",null,r(a(Mt)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name)+" ("+r(a(ve)(a(s).props.data.created_at))+") ",1)])):k("",!0),a(s).props.data.updated_at?(u(),h("tr",Zi,[i[21]||(i[21]=t("td",null,"Diperbarui",-1)),i[22]||(i[22]=t("td",null,":",-1)),t("td",null,r(a(Mt)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(ve)(a(s).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[i[23]||(i[23]=t("td",null,"Terakhir login",-1)),i[24]||(i[24]=t("td",null,":",-1)),t("td",null,[v(r(a(s).props.data.last_login_datetime?a(ve)(a(s).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",ed,"("+r(a(Mt)(a(s).props.data.last_login_datetime))+")",1)])]),a(s).props.data.last_activity_datetime?(u(),h("tr",td,[i[26]||(i[26]=t("td",null,"Aktifitas Terakhir",-1)),i[27]||(i[27]=t("td",null,":",-1)),t("td",null,[v(r(a(ve)(a(s).props.data.last_activity_datetime))+" ",1),t("span",ad,[v("("+r(a(Mt)(a(s).props.data.last_activity_datetime))+")",1),i[25]||(i[25]=t("br",null,null,-1)),v(r(a(s).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(u(),h("div",ld,[e(D,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>m())})])):k("",!0)],64))}},od=Object.freeze(Object.defineProperty({__proto__:null,default:io},Symbol.toStringTag,{value:"Module"})),nd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},sd={class:"text-bold"},uo={__name:"WalletHistoryTab",setup(c){const s=ge(),m=T([]),o=T(!0),i=Ie({customer_id:s.props.data.id,...Fe()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{b()});const b=(f=null)=>Le({pagination:n,filter:i,props:f,rows:m,url:route("admin.customer-wallet-transaction.data"),loading:o}),p=Se(),d=Z(()=>p.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,y)=>(u(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:S})=>[t("div",nd,[t("span",null,r(q)+" "+r(S?" with term "+S:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(q=>a(ee).get(f.route("admin.customer-wallet-transaction.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",sd,[e(R,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(R,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(ve)(_.row.datetime)),1)]),a(p).screen.lt.md?(u(),h(G,{key:0},[t("div",{class:Ce(["text-bold",_.row.amount<0?"text-red":"text-green"])},[e(R,{name:"money",class:"inline-icon"}),v(" "+r(a(la)(_.row.amount)),1)],2),t("div",null,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(bt,{size:"xs",color:_.row.amount>0?"green":"red"},{default:l(()=>[e(R,{name:"category"}),v(" "+r(_.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"amount",props:_},{default:l(()=>[t("div",{class:Ce(_.row.amount<0?"text-red-10":_.row.amount>0?"text-green-10":"")},r(a(ia)(_.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},rd=Object.freeze(Object.defineProperty({__proto__:null,default:uo},Symbol.toStringTag,{value:"Module"})),id={class:"full-width row flex-center text-grey-8 q-gutter-sm"},dd={class:"text-bold"},ud={class:"text-bold"},md={key:0},mo={__name:"OrderHistoryTab",setup(c){const s=ge(),m=T([]),o=T(!0),i=Ie({customer_id:s.props.data.id,...Fe()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(f=null)=>Le({pagination:n,filter:i,props:f,rows:m,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:s.props.data.id}}),loading:o}),p=Se(),d=Z(()=>p.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,y)=>(u(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:S})=>[t("div",id,[t("span",null,r(q)+" "+r(S?" with term "+S:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(q=>a(ee).get(f.route("admin.sales-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",dd,[e(R,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(R,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(ve)(_.row.datetime)),1)]),a(p).screen.lt.md?(u(),h(G,{key:0},[t("div",ud,[e(R,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(H)(_.row.grand_total)),1)]),_.row.notes?(u(),h("div",md,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(bt,{color:_.row.status=="closed"?"green":"red"},{default:l(()=>[v(r(_.row.status_label),1)]),_:2},1032,["color"]),e(bt,{class:"q-ml-xs",color:_.row.payment_status=="fully_paid"?"green":"red"},{default:l(()=>[v(r(_.row.payment_status_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[t("div",null,r(a(H)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},cd=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"})),pd={class:"q-gutter-sm"},fd={class:"q-gutter-sm"},gd={class:"col col-lg-6 q-pa-xs"},bd={class:"row"},nl="Rincian Pelanggan",vd={__name:"Detail",setup(c){const s=ge(),m=T("main");return Se(),(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return u(),h(G,null,[e(n,{title:nl}),e(g,null,{title:l(()=>[v(r(nl))]),"left-button":l(()=>[t("div",pd,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":l(()=>[t("div",fd,[o.$can("admin.customer.edit")?(u(),I(D,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>a(ee).get(o.route("admin.customer.edit",{id:a(s).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(u(),I(D,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>a(ee).get(o.route("admin.customer.edit",{id:a(s).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(u(),I(D,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>a(ee).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",gd,[t("div",bd,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Pt,{modelValue:m.value,"onUpdate:modelValue":i[4]||(i[4]=b=>m.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"history",label:"Riwayat Wallet"}),e(dt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:m.value,"onUpdate:modelValue":i[5]||(i[5]=b=>m.value=b),animated:""},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(io)]),_:1}),e(ut,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(uo)]),_:1}),e(ut,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(mo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},yd=Object.freeze(Object.defineProperty({__proto__:null,default:vd},Symbol.toStringTag,{value:"Module"})),_d={class:"q-gutter-sm"},kd={class:"col col-md-6 q-pa-xs"},wd={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,default_price_type:s.props.data.default_price_type,phone:s.props.data.phone,address:s.props.data.address,active:!!s.props.data.active,password:s.props.data.id?null:"12345",type:s.props.data.type}),i=T(!s.props.data.id),n=tt(window.CONSTANTS.CUSTOMER_TYPES),g=tt(window.CONSTANTS.PRODUCT_PRICE_TYPES),b=()=>nt({form:o,url:route("admin.customer.save",{id:o.id})});return(p,d)=>{const f=X("i-head"),y=X("authenticated-layout");return u(),h(G,null,[e(f,{title:m}),e(y,null,{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",_d,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=_=>p.$goBack())})])]),"right-button":l(()=>[e(D,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(o).processing,onClick:d[1]||(d[1]=_=>b()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",kd,[e(Je,{class:"row",onSubmit:J(b,["prevent"]),onValidationError:a(We)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":d[2]||(d[2]=_=>a(o).id=_)},null,512),[[yt,a(o).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ne,{modelValue:a(o).code,"onUpdate:modelValue":d[3]||(d[3]=_=>a(o).code=_),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[_=>_&&_.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).name,"onUpdate:modelValue":d[4]||(d[4]=_=>a(o).name=_),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:a(o).default_price_type,"onUpdate:modelValue":d[5]||(d[5]=_=>a(o).default_price_type=_),options:a(g),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!a(o).errors.default_price_type,"error-message":a(o).errors.default_price_type,disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":d[6]||(d[6]=_=>a(o).type=_),label:"Jenis Akun",options:a(n),"map-options":"","emit-value":"","lazy-rules":"",disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(o).errors.type,"error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(ne,{modelValue:a(o).phone,"onUpdate:modelValue":d[7]||(d[7]=_=>a(o).phone=_),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:a(o).processing,error:!!a(o).errors.phone,"error-message":a(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).address,"onUpdate:modelValue":d[8]||(d[8]=_=>a(o).address=_),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{autocomplete:"off","aria-autocomplete":"none",modelValue:a(o).password,"onUpdate:modelValue":d[10]||(d[10]=_=>a(o).password=_),label:a(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:a(o).processing,error:!!a(o).errors.password,"error-message":a(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:i.value?"text":"password"},{append:l(()=>[e(D,{dense:"",flat:"",round:"",onClick:d[9]||(d[9]=_=>i.value=!i.value)},{default:l(()=>[e(R,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(ya,{modelValue:a(o).active,"onUpdate:modelValue":d[11]||(d[11]=_=>a(o).active=_),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),d[12]||(d[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},hd=Object.freeze(Object.defineProperty({__proto__:null,default:wd},Symbol.toStringTag,{value:"Module"}));function Jt(c,s,m,o){const i=[];return c.forEach(n=>{o(n)===!0?i.push(n):s.push({failedPropValidation:m,file:n})}),i}function pa(c){c&&c.dataTransfer&&(c.dataTransfer.dropEffect="copy"),Kt(c)}const $d={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},xd=["rejected"];function Sd({editable:c,dnd:s,getFileInput:m,addFilesToQueue:o}){const{props:i,emit:n,proxy:g}=qt(),b=T(null),p=Z(()=>i.accept!==void 0?i.accept.split(",").map(C=>(C=C.trim(),C==="*"?"*/":(C.endsWith("/*")&&(C=C.slice(0,C.length-1)),C.toUpperCase()))):null),d=Z(()=>parseInt(i.maxFiles,10)),f=Z(()=>parseInt(i.maxTotalSize,10));function y(C){if(c.value)if(C!==Object(C)&&(C={target:null}),C.target!==null&&C.target.matches('input[type="file"]')===!0)C.clientX===0&&C.clientY===0&&Cn(C);else{const M=m();M&&M!==C.target&&M.click(C)}}function _(C){c.value&&C&&o(null,C)}function q(C,M,O,B){let A=Array.from(M||C.target.files);const x=[],U=()=>{x.length!==0&&n("rejected",x)};if(i.accept!==void 0&&p.value.indexOf("*/")===-1&&(A=Jt(A,x,"accept",P=>p.value.some($=>P.type.toUpperCase().startsWith($)||P.name.toUpperCase().endsWith($))),A.length===0))return U();if(i.maxFileSize!==void 0){const P=parseInt(i.maxFileSize,10);if(A=Jt(A,x,"max-file-size",$=>$.size<=P),A.length===0)return U()}if(i.multiple!==!0&&A.length!==0&&(A=[A[0]]),A.forEach(P=>{P.__key=P.webkitRelativePath+P.lastModified+P.name+P.size}),B===!0){const P=O.map($=>$.__key);A=Jt(A,x,"duplicate",$=>P.includes($.__key)===!1)}if(A.length===0)return U();if(i.maxTotalSize!==void 0){let P=B===!0?O.reduce(($,E)=>$+E.size,0):0;if(A=Jt(A,x,"max-total-size",$=>(P+=$.size,P<=f.value)),A.length===0)return U()}if(typeof i.filter=="function"){const P=i.filter(A);A=Jt(A,x,"filter",$=>P.includes($))}if(i.maxFiles!==void 0){let P=B===!0?O.length:0;if(A=Jt(A,x,"max-files",()=>(P++,P<=d.value)),A.length===0)return U()}if(U(),A.length!==0)return A}function S(C){pa(C),s.value!==!0&&(s.value=!0)}function w(C){Kt(C),(C.relatedTarget!==null||Gt.is.safari!==!0?C.relatedTarget!==b.value:document.elementsFromPoint(C.clientX,C.clientY).includes(b.value)===!1)===!0&&(s.value=!1)}function z(C){pa(C);const M=C.dataTransfer.files;M.length!==0&&o(null,M),s.value=!1}function Y(C){if(s.value===!0)return qe("div",{ref:b,class:`q-${C}__dnd absolute-full`,onDragenter:pa,onDragover:pa,onDragleave:w,onDrop:z})}return Object.assign(g,{pickFiles:y,addFiles:_}),{pickFiles:y,addFiles:_,onDragover:S,onDragleave:w,processFiles:q,getDndNode:Y,maxFilesNumber:d,maxTotalSizeNumber:f}}const co=Et({name:"QFile",inheritAttrs:!1,props:{...Pn,...Jl,...$d,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Tn,...xd],setup(c,{slots:s,emit:m,attrs:o}){const{proxy:i}=qt(),n=Rn(),g=T(null),b=T(!1),p=On(c),{pickFiles:d,onDragover:f,onDragleave:y,processFiles:_,getDndNode:q}=Sd({editable:n.editable,dnd:b,getFileInput:N,addFilesToQueue:V}),S=In(c),w=Z(()=>Object(c.modelValue)===c.modelValue?"length"in c.modelValue?Array.from(c.modelValue):[c.modelValue]:[]),z=Z(()=>La(w.value)),Y=Z(()=>w.value.map(me=>me.name).join(", ")),C=Z(()=>Un(w.value.reduce((me,Re)=>me+Re.size,0))),M=Z(()=>({totalSize:C.value,filesNumber:w.value.length,maxFiles:c.maxFiles})),O=Z(()=>({tabindex:-1,type:"file",title:"",accept:c.accept,capture:c.capture,name:p.value,...o,id:n.targetUid.value,disabled:n.editable.value!==!0})),B=Z(()=>"q-file q-field--auto-height"+(b.value===!0?" q-file--dnd":"")),A=Z(()=>c.multiple===!0&&c.append===!0);function x(me){const Re=w.value.slice();Re.splice(me,1),P(Re)}function U(me){const Re=w.value.indexOf(me);Re!==-1&&x(Re)}function P(me){m("update:modelValue",c.multiple===!0?me:me[0])}function $(me){me.keyCode===13&&jn(me)}function E(me){(me.keyCode===13||me.keyCode===32)&&d(me)}function N(){return g.value}function V(me,Re){const Ge=_(me,Re,w.value,A.value),ue=N();ue!=null&&(ue.value=""),Ge!==void 0&&((c.multiple===!0?c.modelValue&&Ge.every(L=>w.value.includes(L)):c.modelValue===Ge[0])||P(A.value===!0?w.value.concat(Ge):Ge))}function j(){return[qe("input",{class:[c.inputClass,"q-file__filler"],style:c.inputStyle})]}function ae(){if(s.file!==void 0)return w.value.length===0?j():w.value.map((Re,Ge)=>s.file({index:Ge,file:Re,ref:this}));if(s.selected!==void 0)return w.value.length===0?j():s.selected({files:w.value,ref:this});if(c.useChips===!0)return w.value.length===0?j():w.value.map((Re,Ge)=>qe(Gl,{key:"file-"+Ge,removable:n.editable.value,dense:!0,textColor:c.color,tabindex:c.tabindex,onRemove:()=>{x(Ge)}},()=>qe("span",{class:"ellipsis",textContent:Re.name})));const me=c.displayValue!==void 0?c.displayValue:Y.value;return me.length!==0?[qe("div",{class:c.inputClass,style:c.inputStyle,textContent:me})]:j()}function re(){const me={ref:g,...O.value,...S.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:V};return c.multiple===!0&&(me.multiple=!0),qe("input",me)}return Object.assign(n,{fieldClass:B,emitValue:P,hasValue:z,inputRef:g,innerValue:w,floatingLabel:Z(()=>z.value===!0||La(c.displayValue)),computedCounter:Z(()=>{if(c.counterLabel!==void 0)return c.counterLabel(M.value);const me=c.maxFiles;return`${w.value.length}${me!==void 0?" / "+me:""} (${C.value})`}),getControlChild:()=>q("file"),getControl:()=>{const me={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:c.tabindex};return n.editable.value===!0&&Object.assign(me,{onDragover:f,onDragleave:y,onKeydown:$,onKeyup:E}),qe("div",me,[re()].concat(ae()))}}),Object.assign(i,{removeAtIndex:x,removeFile:U,getNativeElement:()=>g.value}),Dn(i,"nativeEl",()=>g.value),En(n)}}),Qt=Et({name:"QBanner",props:{...Oa,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(c,{slots:s}){const{proxy:{$q:m}}=qt(),o=Ia(c,m),i=Z(()=>"q-banner row items-center"+(c.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(c.rounded===!0?" rounded-borders":"")),n=Z(()=>`q-banner__actions row items-center justify-end col-${c.inlineActions===!0?"auto":"all"}`);return()=>{const g=[qe("div",{class:"q-banner__avatar col-auto row items-center self-start"},Nt(s.avatar)),qe("div",{class:"q-banner__content col text-body2"},Nt(s.default))],b=Nt(s.action);return b!==void 0&&g.push(qe("div",{class:n.value},b)),qe("div",{class:i.value+(c.inlineActions===!1&&b!==void 0?" q-banner--top-padding":""),role:"alert"},g)}}}),Vd={class:"q-gutter-sm"},qd={class:"col col-md-6 q-pa-xs"},sl="Import Pelanggan",Cd={__name:"Import",setup(c){const s=Qe({csv_file:null}),m=()=>{s.post(route("admin.customer.import"),{onSuccess:()=>{s.reset()},onError:()=>{We()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return u(),h(G,null,[e(n,{title:sl}),e(g,{"show-drawer-button":!0},{title:l(()=>[v(r(sl))]),"left-button":l(()=>[t("div",Vd,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",qd,[e(Je,{class:"row",onSubmit:J(m,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(co,{modelValue:a(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>a(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!a(s).errors.csv_file,"error-message":a(s).errors.csv_file,disable:a(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(s).processing||!a(s).csv_file,loading:a(s).processing},null,8,["disable","loading"]),e(D,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:i[2]||(i[2]=b=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(u(),I(Qt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(u(),I(Qt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Td=Object.freeze(Object.defineProperty({__proto__:null,default:Cd},Symbol.toStringTag,{value:"Module"})),Pd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Rd={class:"q-pa-xs"},Od={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Id={key:0},Ud={key:2},Dd={key:3},Ed={class:"flex justify-end"},rl="Pelanggan",jd={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=Ie({search:"",status:"active",...Fe()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"code",label:s.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{q()});const _=M=>lt({message:`Hapus Pelanggan ${M.name}?`,url:route("admin.customer.delete",M.id),fetchItemsCallback:q,loading:i}),q=(M=null)=>{Le({pagination:d,filter:p,props:M,rows:o,url:route("admin.customer.data"),loading:i,tableRef:n})},S=()=>q(),w=M=>ee.get(route("admin.customer.detail",{id:M.id})),{protectClick:z}=jt(),Y=z(w),C=Z(()=>s.screen.gt.sm?f:f.filter(M=>M.name==="code"||M.name==="action"));return(M,O)=>{const B=X("i-head"),A=X("authenticated-layout");return u(),h(G,null,[e(B,{title:rl}),e(A,null,He({title:l(()=>[v(r(rl))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=x=>m.value=!m.value)},null,8,["icon"]),M.$can("admin.customer.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=x=>a(ee).get(M.route("admin.customer.add")))})):k("",!0),M.$can("admin.customer.import")?(u(),I(D,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[3]||(O[3]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[M.$can("admin.customer.import")?te((u(),I(oe,{key:0,clickable:"",onClick:O[2]||(O[2]=J(x=>a(ee).get(M.route("admin.customer.import")),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"csv"})]),_:1}),e(F,null,{default:l(()=>O[8]||(O[8]=[v("Import")])),_:1})]),_:1})),[[ie],[pe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",Rd,[e(Ue,{class:"full-height-table",style:Ke({height:a(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":O[7]||(O[7]=x=>d.value=x),filter:p.search,loading:i.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:q,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:U,filter:P})=>[t("div",Od,[t("span",null,r(U)+" "+r(P?" with term "+P:""),1)])]),body:l(x=>[e(Pe,{props:x,class:Ce([x.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(U=>a(Y)(x.row,U),["stop"])},{default:l(()=>[e(W,{key:"code",props:x,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.lt.md?(u(),I(R,{key:0,name:"person"})):k("",!0),v(" "+r(x.row.code),1)]),a(s).screen.lt.md?(u(),h(G,{key:0},[t("div",null,[a(s).screen.lt.md?(u(),I(R,{key:0,name:"person"})):k("",!0),v(" "+r(x.row.name),1)]),x.row.phone?(u(),h("div",Id,[e(R,{name:"phone"}),v(" "+r(x.row.phone),1)])):k("",!0),x.row.address?(u(),I($e,{key:1,text:x.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),x.row.wallet_balance!=0?(u(),h("div",Ud,[e(R,{name:"wallet"}),v(" Wallet: Rp. "+r(a(H)(x.row.wallet_balance)),1)])):k("",!0),x.row.balance!=0?(u(),h("div",Dd,[e(R,{name:"wallet"}),v(" Utang: Rp. "+r(a(H)(x.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"name",props:x},{default:l(()=>[v(r(x.row.name),1)]),_:2},1032,["props"]),e(W,{key:"wallet_balance",props:x},{default:l(()=>[v(r(a(H)(x.row.wallet_balance)),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:x},{default:l(()=>[v(r(a(H)(x.row.balance)),1)]),_:2},1032,["props"]),e(W,{key:"phone",props:x},{default:l(()=>[v(r(x.row.phone),1)]),_:2},1032,["props"]),e(W,{key:"address",props:x},{default:l(()=>[e($e,{text:x.row.address},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:x},{default:l(()=>[t("div",Ed,[M.$can("admin.customer.add")||M.$can("admin.customer.edit")||M.$can("admin.customer.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[6]||(O[6]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[M.$can("admin.customer.add")?te((u(),I(oe,{key:0,clickable:"",onClick:J(U=>a(ee).get(M.route("admin.customer.duplicate",x.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>O[9]||(O[9]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),M.$can("admin.customer.edit")?te((u(),I(oe,{key:1,clickable:"",onClick:J(U=>a(ee).get(M.route("admin.customer.edit",x.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>O[10]||(O[10]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),M.$can("admin.customer.delete")?te((u(),I(oe,{key:2,onClick:J(U=>_(x.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>O[11]||(O[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Pd,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[O[4]||(O[4]=x=>p.status=x),S],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":O[5]||(O[5]=x=>p.search=x),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ad=Object.freeze(Object.defineProperty({__proto__:null,default:jd},Symbol.toStringTag,{value:"Module"})),Md={class:"q-pb-sm"},Nd={class:"row q-col-gutter-sm"},Bd={class:"row items-center no-wrap"},zd={class:"q-ml-md"},Fd={class:"text-subtitle2 text-grey-8"},Ld={class:"text-h6 text-weight-bold"},po={__name:"ActualSummaryCard",props:{dashboardData:{type:Object,required:!0}},setup(c){const s=c,m=Z(()=>[{label:"Total Pelanggan Aktif",value:s.dashboardData.summary.total_active_customer,icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Saldo Wallet",value:H(s.dashboardData.summary.total_wallet_balance),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Penjualan",value:H(s.dashboardData.summary.total_sales),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Transaksi",value:H(s.dashboardData.summary.total_transactions),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(o,i)=>(u(),h("div",Md,[i[0]||(i[0]=t("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"},"Ringkasan Statistik",-1)),t("div",Nd,[(u(!0),h(G,null,Be(m.value,(n,g)=>(u(),h("div",{key:g,class:"col-12 col-md-6"},[e(fe,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:l(()=>[t("div",Bd,[e(ta,{icon:n.icon,color:n.color,"text-color":n.bgColor},null,8,["icon","color","text-color"]),t("div",zd,[t("div",Fd,r(n.label),1),t("div",Ld,r(n.value),1)])])]),_:2},1024)]))),128))])]))}},Hd=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"})),Kd={class:"row q-col-gutter-sm q-pb-sm"},Yd={class:"col-md-6 col-12"},Wd={class:"col-md-6 col-12"},Qd={__name:"ChartCard",props:{dashboardData:{type:Object,required:!0}},setup(c){An([Mn,Nn,Bn,zn,Fn,Ln,Hn]);const s=c,m=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=Z(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(n){let g=n[0].name+"<br/>";return n.forEach(function(b){g+=b.marker+" "+b.seriesName+": "+H(b.value)+"<br/>"}),g}},xAxis:{type:"category",data:s.dashboardData.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:n=>H(n),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:s.dashboardData.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:m[0]}}]})),i=Z(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(n){return n.name+"<br/>"+n.seriesName+": "+H(n.value)+" ("+n.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:s.dashboardData.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:n=>m[n.dataIndex%m.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(n,g)=>(u(),h("div",Kd,[t("div",Yd,[e(fe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[g[0]||(g[0]=t("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),e(a(Ha),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",Wd,[e(fe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[g[1]||(g[1]=t("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),e(a(Ha),{class:"chart",option:i.value,autoresize:""},null,8,["option"])]),_:1})])]))}},fo=kt(Qd,[["__scopeId","data-v-b9cdf915"]]),Jd=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"})),Gd={class:"row q-col-gutter-sm q-pb-sm"},Xd={class:"col-md-6 col-12"},Zd={class:"col-md-6 col-12"},go={__name:"TopCard",props:{dashboardData:{type:Object,required:!0}},setup(c){return(s,m)=>(u(),h("div",Gd,[t("div",Xd,[e(fe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[m[0]||(m[0]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),e(ze,{separator:""},{default:l(()=>[(u(!0),h(G,null,Be(c.dashboardData.top_customers_sales,(o,i)=>(u(),I(oe,{key:i},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(ta,{color:"primary","text-color":"white",size:"sm"},{default:l(()=>[v(r(i+1),1)]),_:2},1024)]),_:2},1024),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[v(r(o.name),1)]),_:2},1024)]),_:2},1024),e(F,{side:""},{default:l(()=>[e(we,{class:"text-primary"},{default:l(()=>[v(r(a(H)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",Zd,[e(fe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[m[1]||(m[1]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),e(ze,{separator:""},{default:l(()=>[(u(!0),h(G,null,Be(c.dashboardData.top_customers_topup,(o,i)=>(u(),I(oe,{key:i},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(ta,{color:"green-7","text-color":"white",size:"sm"},{default:l(()=>[v(r(i+1),1)]),_:2},1024)]),_:2},1024),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[v(r(o.name),1)]),_:2},1024)]),_:2},1024),e(F,{side:""},{default:l(()=>[e(we,{class:"text-green-7"},{default:l(()=>[v(r(a(H)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]))}},eu=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"})),tu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},au={class:"q-pa-xs"},lu={class:"q-pa-none"},il="Dashboard",ou={__name:"Index",setup(c){const s=ge(),m=T({summary:{total_active_customer:s.props.data.active_customer_count,total_sales:155e5,total_transactions:1250,total_wallet_balance:s.props.data.total_customer_wallet_balance,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),o=T(!1),i=T(Fe().month??"this_month"),n=T([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),g=()=>{ee.visit(route("admin.dashboard",{month:i.value}))};return(b,p)=>{const d=X("i-head"),f=X("authenticated-layout");return u(),h(G,null,[e(d,{title:il}),e(f,null,He({title:l(()=>[v(r(il))]),"right-button":l(()=>[e(D,{class:"q-ml-sm",icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:p[0]||(p[0]=y=>o.value=!o.value)},null,8,["icon"])]),default:l(()=>[t("div",au,[t("div",lu,[e(po,{dashboardData:m.value},null,8,["dashboardData"])]),e(fo,{dashboardData:m.value},null,8,["dashboardData"]),e(go,{dashboardData:m.value},null,8,["dashboardData"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar"},{default:l(()=>[t("div",tu,[e(ce,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:i.value,"onUpdate:modelValue":[p[1]||(p[1]=y=>i.value=y),g],options:n.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},nu=Object.freeze(Object.defineProperty({__proto__:null,default:ou},Symbol.toStringTag,{value:"Module"})),su={class:"row"},ru={class:"row q-col-gutter-sm"},iu={class:"col-sm-6 col-xs-12"},du={class:"col-sm-6 col-xs-12"},uu={class:"col-md-3 col-sm-6 col-xs-12"},mu={class:"col-md-3 col-sm-6 col-xs-12"},cu={class:"col-md-3 col-sm-6 col-xs-12"},pu={class:"col-md-3 col-sm-6 col-xs-12"};const fu={__name:"SummaryCard",setup(c){const s=ge(),m=(o,i)=>{const g={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...i};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(g)),ee.visit(o,{data:g})};return(o,i)=>(u(),h("div",su,[e(fe,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:l(()=>[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",ru,[t("div",iu,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[0]||(i[0]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(F,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(R,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[v(r(a(s).props.data.active_customer_count),1)]),_:1}),e(we,null,{default:l(()=>i[5]||(i[5]=[v("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",du,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[1]||(i[1]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(F,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(R,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[v(r(o.$page.props.data.active_user_count),1)]),_:1}),e(we,null,{default:l(()=>i[6]||(i[6]=[v("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",uu,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(F,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(R,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(H)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(we,null,{default:l(()=>i[7]||(i[7]=[v("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",mu,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(F,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(R,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(H)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(we,null,{default:l(()=>i[8]||(i[8]=[v("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",cu,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(F,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(R,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(H)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(we,null,{default:l(()=>i[9]||(i[9]=[v("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",pu,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(F,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(R,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(H)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(we,null,{default:l(()=>i[10]||(i[10]=[v("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},gu=Object.freeze(Object.defineProperty({__proto__:null,default:fu},Symbol.toStringTag,{value:"Module"})),bu={class:"detail"},bo={__name:"MainInfoTab",setup(c){const s=ge();return(m,o)=>(u(),h("table",bu,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.FINANCE_ACCOUNT_TYPES[a(s).props.data.type]),1)]),a(s).props.data.type=="bank"?(u(),h(G,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(H)(a(s).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},vu=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),yu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},_u={class:"flex q-gutter-sm"},ku={key:0},vo={__name:"HistoryTab",setup(c){const s=ge(),m=Se(),o=T(null),i=T([]),n=T(!0),g=Ie({...Fe()}),b=et(null,117),p=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),d=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],f=Z(()=>m.screen.gt.sm?d:d.filter(_=>_.name==="id"));he(()=>{y()});const y=(_=null)=>Le({pagination:p,filter:g,props:_,rows:i,url:route("admin.finance-transaction.data",{filter:{account_id:s.props.data.id}}),loading:n,tableRef:o});return(_,q)=>(u(),I(Ue,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:Ke({height:a(b)}),color:"primary",class:"full-height-table","row-key":"id",pagination:p.value,"onUpdate:pagination":q[0]||(q[0]=S=>p.value=S),filter:g.search,loading:n.value,columns:f.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({message:S,filter:w})=>[t("div",yu,[t("span",null,r(S)+" "+r(w?" with term "+w:""),1)])]),body:l(S=>[e(Pe,{props:S},{default:l(()=>[e(W,{key:"code",props:S},{default:l(()=>[t("div",_u,[t("div",null,[a(m).screen.lt.md?(u(),I(R,{key:0,name:"tag",class:"inline-icon"})):k("",!0),v(" "+r(S.row.code),1)])]),a(m).screen.lt.md?(u(),h(G,{key:0},[t("div",null,[e(R,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)(S.row.datetime)),1)]),S.row.creator?(u(),h("div",ku,[e(R,{name:"person",class:"inline-icon"}),v(" "+r(S.row.creator.username),1)])):k("",!0),t("div",{class:Ce([S.row.amount>0?"text-green":"text-red","text-bold"])},[e(R,{class:"inline-icon",name:"money"}),v(" "+r(a(aa)(S.row.amount))+"Rp. "+r(a(H)(Math.abs(S.row.amount))),1)],2),t("div",null,[e(bt,{color:S.row.amount>0?"green":"red"},{default:l(()=>[v(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["color"])]),e($e,{text:S.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"datetime",props:S},{default:l(()=>[v(r(a(ve)(S.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"type",props:S},{default:l(()=>[e(bt,{color:S.row.amount>0?"green":"red"},{default:l(()=>[v(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(W,{key:"amount",props:S,class:Ce(S.row.amount>0?"text-green":"text-red")},{default:l(()=>[v(r(a(aa)(S.row.amount)+a(H)(Math.abs(S.row.amount))),1)]),_:2},1032,["props","class"]),e(W,{key:"notes",props:S},{default:l(()=>[e($e,{text:S.row.notes,icon:_.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},wu=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),hu={class:"q-gutter-sm"},$u={class:"q-gutter-sm"},xu={class:"col q-pa-xs"},Su={class:"row"},dl="Rincian Akun",Vu={__name:"Detail",setup(c){const s=ge(),m=T("main");return(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return u(),h(G,null,[e(n,{title:dl}),e(g,null,{title:l(()=>[v(r(dl))]),"left-button":l(()=>[t("div",hu,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":l(()=>[t("div",$u,[o.$can("admin.finance-account.edit")?(u(),I(D,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>a(ee).get(o.route("admin.finance-account.edit",{id:a(s).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",xu,[t("div",Su,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Pt,{modelValue:m.value,"onUpdate:modelValue":i[2]||(i[2]=b=>m.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Info Akun"}),e(dt,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:m.value,"onUpdate:modelValue":i[3]||(i[3]=b=>m.value=b),animated:""},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(bo)]),_:1}),e(ut,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(vo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},qu=Object.freeze(Object.defineProperty({__proto__:null,default:Vu},Symbol.toStringTag,{value:"Module"})),Cu={style:{"margin-left":"-10px"}},Vt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c){return(s,m)=>(u(),h("div",Cu,[e(na,{class:"full-width q-pl-none","model-value":c.modelValue,"onUpdate:modelValue":m[0]||(m[0]=o=>s.$emit("update:modelValue",o)),disable:c.disable,label:c.label},null,8,["model-value","disable","label"])]))}},Tu={class:"q-gutter-sm"},Pu={class:"col col-md-6 q-pa-xs"},Ru={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Qe({id:s.props.data.id,name:s.props.data.name,type:s.props.data.type,bank:s.props.data.bank,number:s.props.data.number,holder:s.props.data.holder,balance:parseFloat(s.props.data.balance),active:!!s.props.data.active,has_wallet_access:!!s.props.data.has_wallet_access,show_in_pos_payment:!!s.props.data.show_in_pos_payment,show_in_purchasing_payment:!!s.props.data.show_in_purchasing_payment,notes:s.props.data.notes}),i=tt(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),n=()=>nt({form:o,url:route("admin.finance-account.save")}),g=b=>{b==="cashier_cash"&&(o.show_in_pos_payment=!0)};return he(()=>{g(o.type)}),Me(()=>o.type,b=>{g(b)}),(b,p)=>{const d=X("i-head"),f=X("authenticated-layout");return u(),h(G,null,[e(d,{title:m}),e(f,null,{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",Tu,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=y=>b.$inertia.get(b.route("admin.finance-account.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Pu,[e(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=y=>a(o).id=y)},null,512),[[yt,a(o).id]]),e(ne,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":p[2]||(p[2]=y=>a(o).name=y),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":p[3]||(p[3]=y=>a(o).type=y),label:"Jenis Akun",options:a(i),"map-options":"","emit-value":"",error:!!a(o).errors.type,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),a(o).type=="bank"?(u(),h(G,{key:0},[e(ne,{modelValue:a(o).bank,"onUpdate:modelValue":p[4]||(p[4]=y=>a(o).bank=y),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!a(o).errors.bank,disable:a(o).processing,"error-message":a(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(o).number,"onUpdate:modelValue":p[5]||(p[5]=y=>a(o).number=y),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!a(o).errors.number,disable:a(o).processing,"error-message":a(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(o).holder,"onUpdate:modelValue":p[6]||(p[6]=y=>a(o).holder=y),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!a(o).errors.holder,disable:a(o).processing,"error-message":a(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Ee,{modelValue:a(o).balance,"onUpdate:modelValue":p[7]||(p[7]=y=>a(o).balance=y),label:"Saldo",lazyRules:"",disable:a(o).processing,"allow-negative":!0,error:!!a(o).errors.balance,errorMessage:a(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ne,{modelValue:a(o).notes,"onUpdate:modelValue":p[8]||(p[8]=y=>a(o).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Vt,{modelValue:a(o).active,"onUpdate:modelValue":p[9]||(p[9]=y=>a(o).active=y),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),p[14]||(p[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(Vt,{modelValue:a(o).show_in_pos_payment,"onUpdate:modelValue":p[10]||(p[10]=y=>a(o).show_in_pos_payment=y),disable:a(o).processing||a(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(Vt,{modelValue:a(o).show_in_purchasing_payment,"onUpdate:modelValue":p[11]||(p[11]=y=>a(o).show_in_purchasing_payment=y),disable:a(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(Vt,{modelValue:a(o).has_wallet_access,"onUpdate:modelValue":p[12]||(p[12]=y=>a(o).has_wallet_access=y),disable:a(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:p[13]||(p[13]=y=>a(ee).get(b.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ou=Object.freeze(Object.defineProperty({__proto__:null,default:Ru},Symbol.toStringTag,{value:"Module"})),Iu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Uu={class:"q-pa-xs"},Du={class:"q-my-sm text-subtitle"},Eu={class:"text-bold text-grey-8"},ju={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Au={class:"text-bold text-grey-9"},Mu={class:"text-grey-9"},Nu={key:0},Bu={key:1},zu={key:0},Fu={class:"flex justify-end"},ul="Akun Kas",Lu={__name:"Index",setup(c){const s=ge(),m=Se(),o=T(!1),i=T([]),n=T(null),g=T(null),b=et(g,117),p=T(!0),d=Ie({search:"",status:"active",type:"all",...Fe()}),f=s.props.totalBalance,y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],q=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],S=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];he(()=>{z()});const w=A=>lt({message:`Hapus Akun ${A.name}?`,url:route("admin.finance-account.delete",A.id),fetchItemsCallback:z,loading:p}),z=(A=null)=>{Le({pagination:y,filter:d,props:A,rows:i,url:route("admin.finance-account.data"),loading:p,tableRef:n})},Y=()=>z(),C=A=>ee.get(route("admin.finance-account.detail",{id:A.id})),{protectClick:M}=jt(),O=M(C),B=Z(()=>m.screen.gt.sm?_:_.filter(A=>A.name==="name"||A.name==="action"));return(A,x)=>{const U=X("i-head"),P=X("authenticated-layout");return u(),h(G,null,[e(U,{title:ul}),e(P,null,He({title:l(()=>[v(r(ul))]),"right-button":l(()=>[e(D,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=$=>o.value=!o.value)},null,8,["icon"]),A.$can("admin.finance-account.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=$=>a(ee).get(A.route("admin.finance-account.add")))})):k("",!0)]),default:l(()=>[t("div",Uu,[e(fe,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:l(()=>[t("div",Du,[x[7]||(x[7]=v(" Total Saldo Akun Aktif: ")),t("span",Eu,"Rp. "+r(a(H)(a(f))),1)])]),_:1}),e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Ke({height:a(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":x[6]||(x[6]=$=>y.value=$),filter:d.search,loading:p.value,columns:B.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:z,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:$,message:E,filter:N})=>[t("div",ju,[t("span",null,r(E)+" "+r(N?" with term "+N:""),1)])]),body:l($=>[e(Pe,{props:$,class:Ce([$.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(E=>a(O)($.row,E),["stop"])},{default:l(()=>[e(W,{key:"name",props:$,class:"wrap-column"},{default:l(()=>[t("div",Au,r($.row.name),1),t("div",Mu,[$.row.type=="bank"?(u(),h("div",Nu,[e(R,{name:"wallet",class:"inline-icon"}),v(" Rekening "+r($.row.bank??"-")+" "+r($.row.number??"-")+" a.n. "+r($.row.holder??"-"),1)])):k("",!0),$.row.notes?(u(),h("div",Bu,[e(R,{name:"notes"}),v(" "+r($.row.notes),1)])):k("",!0)]),a(m).screen.lt.md?(u(),h("div",zu,[e(R,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(H)($.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"type",props:$},{default:l(()=>[v(r(A.$CONSTANTS.FINANCE_ACCOUNT_TYPES[$.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:$},{default:l(()=>[v(r(a(H)($.row.balance)),1)]),_:2},1032,["props"]),e(W,{key:"action",props:$},{default:l(()=>[t("div",Fu,[A.$can("admin.finance-account.add")||A.$can("admin.finance-account.edit")||A.$can("admin.finance-account.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[5]||(x[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[A.$can("admin.finance-account.add")?te((u(),I(oe,{key:0,clickable:"",onClick:J(E=>a(ee).get(A.route("admin.finance-account.duplicate",$.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>x[8]||(x[8]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),A.$can("admin.finance-account.edit")?te((u(),I(oe,{key:1,clickable:"",onClick:J(E=>a(ee).get(A.route("admin.finance-account.edit",$.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>x[9]||(x[9]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),A.$can("admin.finance-account.delete")?te((u(),I(oe,{key:2,onClick:J(E=>w($.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>x[10]||(x[10]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Iu,[e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:d.type,"onUpdate:modelValue":[x[2]||(x[2]=$=>d.type=$),Y],options:S,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:d.status,"onUpdate:modelValue":[x[3]||(x[3]=$=>d.status=$),Y],options:q,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:d.search,"onUpdate:modelValue":x[4]||(x[4]=$=>d.search=$),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Hu=Object.freeze(Object.defineProperty({__proto__:null,default:Lu},Symbol.toStringTag,{value:"Module"})),Ku={class:"q-gutter-sm"},Yu={class:"col col-md-6 q-pa-xs"},Wu={class:"row"},Qu={class:"detail"},Ju={key:0},Gu={key:1},Xu={key:2},Zu={key:3},em={colspan:"3",class:"bg-white"},ml="Rincian Transaksi",tm={__name:"Detail",setup(c){const s=ge();return(m,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return u(),h(G,null,[e(i,{title:ml}),e(g,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Ku,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.$inertia.get(m.route("admin.finance-transaction.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(ml))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Yu,[t("div",Wu,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",Qu,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.datetime)),1)]),a(s).props.data.account?(u(),h("tr",Ju,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[e(n,{href:m.route("admin.finance-account.detail",a(s).props.data.account.id)},{default:l(()=>[v(r(a(s).props.data.account.name),1)]),_:1},8,["href"]),a(s).props.data.account.type==="bank"?(u(),h(G,{key:0},[v(" Rek "+r(a(s).props.data.account.bank)+" an "+r(a(s).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),v(" "+r(a(s).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),a(s).props.data.type?(u(),h("tr",Gu,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.FINANCE_TRANSACTION_TYPES[a(s).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(la)(a(s).props.data.amount)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(u(),h("tr",Xu,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(u(),h("tr",Zu,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(u(),h(G,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",em,[e(sa,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:Ke([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},am=Object.freeze(Object.defineProperty({__proto__:null,default:tm},Symbol.toStringTag,{value:"Module"})),lm={class:"q-gutter-sm"},om={class:"col col-md-6 q-pa-xs"},nm={__name:"Editor",setup(c){var b;const s=ge(),m=(s.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=s.props.accounts.map(p=>({label:p.name,value:p.id})),i=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],n=Qe({id:s.props.data.id,account_id:s.props.data.account_id,to_account_id:s.props.data.to_account_id??null,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((b=s.props.data)==null?void 0:b.image_path)??"",image:null}),g=()=>{ra(n,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:n,url:route("admin.finance-transaction.save")})};return(p,d)=>{const f=X("i-head"),y=X("authenticated-layout");return u(),h(G,null,[e(f,{title:m}),e(y,null,{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",lm,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=_=>p.$inertia.get(p.route("admin.finance-transaction.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",om,[e(Je,{class:"row",onSubmit:J(g,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":d[1]||(d[1]=_=>a(n).id=_)},null,512),[[yt,a(n).id]]),e(Lt,{modelValue:a(n).datetime,"onUpdate:modelValue":d[2]||(d[2]=_=>a(n).datetime=_),label:"Waktu",error:!!a(n).errors.datetime,disable:a(n).processing,errorMessage:a(n).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{autofocus:"",modelValue:a(n).type,"onUpdate:modelValue":d[3]||(d[3]=_=>a(n).type=_),label:"Jenis Transaksi",options:i,"map-options":"","emit-value":"",error:!!a(n).errors.type,disable:a(n).processing,errorMessage:a(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{class:"custom-select",modelValue:a(n).account_id,"onUpdate:modelValue":d[4]||(d[4]=_=>a(n).account_id=_),label:a(n).type=="transfer"?"Akun Asal":"Akun",options:a(o),"map-options":"","emit-value":"",errorMessage:a(n).errors.account_id,error:!!a(n).errors.account_id,disable:a(n).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),a(n).type=="transfer"?(u(),I(ce,{key:0,class:"custom-select",modelValue:a(n).to_account_id,"onUpdate:modelValue":d[5]||(d[5]=_=>a(n).to_account_id=_),label:"Akun Tujuan",options:a(o),"map-options":"","emit-value":"",errorMessage:a(n).errors.to_account_id,error:!!a(n).errors.to_account_id,disable:a(n).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Ee,{modelValue:a(n).amount,"onUpdate:modelValue":d[6]||(d[6]=_=>a(n).amount=_),label:"Jumlah",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.amount,errorMessage:a(n).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ne,{modelValue:a(n).notes,"onUpdate:modelValue":d[7]||(d[7]=_=>a(n).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(n).processing,error:!!a(n).errors.notes,"error-message":a(n).errors.notes,rules:[_=>_&&_.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Ua,{modelValue:a(n).image,"onUpdate:modelValue":d[8]||(d[8]=_=>a(n).image=_),"initial-image-path":a(n).image_path,disabled:a(n).processing,error:!!a(n).errors.image||!!a(n).errors.image_path,"error-message":a(n).errors.image||a(n).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(n).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:d[9]||(d[9]=_=>a(ee).get(p.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},sm=Object.freeze(Object.defineProperty({__proto__:null,default:nm},Symbol.toStringTag,{value:"Module"})),rm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},im={class:"q-pa-xs"},dm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},um={class:"text-grey-8"},mm={class:"text-bold text-grey-8"},cm={class:"flex justify-end no-wrap"},cl="Transaksi Kas",pm={__name:"Index",setup(c){const s=ge(),m=Se(),o=T(!1),i=T([]),n=T(!0),g=T(null),b=T(null),p=et(b),d=zt(),f=Ft(),y=[{label:"Semua",value:"all"},...s.props.accounts.map(P=>({label:P.name,value:P.id}))],_=[{label:"Semua Tahun",value:"all"},{label:`${d}`,value:d},...Ct(d-2,d-1).reverse()],q=[{value:"all",label:"Semua Bulan"},...Tt()],S=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],w=Ie({search:"",type:"all",account_id:"all",year:d,month:f,...Fe()}),z=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"id",label:m.screen.lt.md?"Item":"Kode",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{M()});const C=P=>lt({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${P.code}?`,url:route("admin.finance-transaction.delete",P.id),fetchItemsCallback:M,loading:n}),M=(P=null)=>{Le({pagination:z,filter:w,props:P,rows:i,url:route("admin.finance-transaction.data"),loading:n,tableRef:g})},O=()=>{M()},B=Z(()=>m.screen.gt.sm?Y:Y.filter(P=>P.name==="id"||P.name==="action"));Me(()=>w.year,P=>{P===null&&(w.month=null)});const A=T(null),x=T(!1),U=P=>{A.value=P,x.value=!0};return(P,$)=>{const E=X("i-head"),N=X("authenticated-layout");return u(),h(G,null,[e(E,{title:cl}),e(N,null,He({title:l(()=>[v(r(cl))]),"right-button":l(()=>[e(D,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=V=>o.value=!o.value)},null,8,["icon"]),P.$can("admin.finance-transaction.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=V=>a(ee).get(P.route("admin.finance-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",im,[e(Ue,{ref_key:"tableRef",ref:g,style:Ke({height:a(p)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:z.value,"onUpdate:pagination":$[8]||($[8]=V=>z.value=V),filter:w.search,loading:n.value,columns:B.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:M,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:j,filter:ae})=>[t("div",dm,[t("span",null,r(j)+" "+r(ae?" with term "+ae:""),1)])]),body:l(V=>[e(Pe,{props:V,class:"cursor-pointer",onClick:J(j=>a(ee).get(P.route("admin.finance-transaction.detail",{id:V.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:V},{default:l(()=>[t("div",null,[a(m).screen.lt.md?(u(),I(R,{key:0,class:"inline-icon",name:"tag"})):k("",!0),v(" "+r(V.row.code),1)]),a(m).screen.lt.md?(u(),h(G,{key:0},[t("div",um,[e(R,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(ve)(V.row.datetime)),1)]),t("div",mm,[e(R,{name:"wallet",class:"inline-icon"}),v(" "+r(V.row.account.name),1)]),t("div",{class:Ce(["text-bold",V.row.amount<0?"text-red":"text-green"])},[e(R,{name:"money",class:"inline-icon"}),v(" "+r(a(aa)(V.row.amount)+"Rp."+a(H)(Math.abs(V.row.amount))),1)],2),V.row.notes?(u(),I($e,{key:0,icon:"notes",text:V.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(bt,{color:V.row.amount>0?"green":"red"},{default:l(()=>[v(r(V.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"datetime",props:V,class:"wrap-column"},{default:l(()=>[v(r(a(ve)(V.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"account",props:V},{default:l(()=>{var j;return[v(r((j=V.row.account)==null?void 0:j.name),1)]}),_:2},1032,["props"]),e(W,{key:"type",props:V},{default:l(()=>[v(r(P.$CONSTANTS.FINANCE_TRANSACTION_TYPES[V.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"amount",props:V,style:{"text-align":"right"}},{default:l(()=>[v(r(a(ia)(V.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:V,class:"wrap-column"},{default:l(()=>[v(r(V.row.notes),1)]),_:2},1032,["props"]),e(W,{key:"action",props:V},{default:l(()=>[t("div",cm,[e(D,{icon:"image",color:"primary",dense:"",flat:"",disable:V.row.image_path===null||V.row.image_path==="",onClick:J(j=>U(V.row.image_path),["stop"])},{default:l(()=>[V.row.image_path!=null?(u(),I(ea,{key:0},{default:l(()=>$[10]||($[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.finance-transaction.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[7]||($[7]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.finance-transaction.delete")?te((u(),I(oe,{key:0,onClick:J(j=>C(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>$[11]||($[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ba,{modelValue:x.value,"onUpdate:modelValue":$[9]||($[9]=V=>x.value=V),imageUrl:`/${A.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",rm,[e(ce,{modelValue:w.year,"onUpdate:modelValue":[$[2]||($[2]=V=>w.year=V),O],options:_,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(u(),I(ce,{key:0,modelValue:w.month,"onUpdate:modelValue":[$[3]||($[3]=V=>w.month=V),O],options:q,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:w.type,"onUpdate:modelValue":[$[4]||($[4]=V=>w.type=V),O],options:S,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:w.account_id,"onUpdate:modelValue":[$[5]||($[5]=V=>w.account_id=V),O],label:"Akun",options:y,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":$[6]||($[6]=V=>w.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fm=Object.freeze(Object.defineProperty({__proto__:null,default:pm},Symbol.toStringTag,{value:"Module"})),gm={class:"q-gutter-sm"},bm={class:"col col-md-6 q-pa-xs"},vm={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description}),i=()=>nt({form:o,url:route("admin.operational-cost-category.save")});return(n,g)=>{const b=X("i-head"),p=X("authenticated-layout");return u(),h(G,null,[e(b,{title:m}),e(p,null,{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",gm,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=d=>n.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",bm,[e(Je,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=d=>a(o).id=d)},null,512),[[yt,a(o).id]]),e(ne,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":g[2]||(g[2]=d=>a(o).name=d),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[d=>d&&d.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).description,"onUpdate:modelValue":g[3]||(g[3]=d=>a(o).description=d),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:g[4]||(g[4]=d=>a(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ym=Object.freeze(Object.defineProperty({__proto__:null,default:vm},Symbol.toStringTag,{value:"Module"})),_m={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},km={class:"q-pa-xs"},wm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},hm={key:0,class:"text-grey-8"},$m={class:"flex justify-end"},pl="Kategori Biaya Operasional",xm={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=Ie({search:"",...Fe()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{_()});const y=S=>lt({message:`Hapus Kategori Biaya ${S.name}?`,url:route("admin.operational-cost-category.delete",S.id),fetchItemsCallback:_,loading:i}),_=(S=null)=>{Le({pagination:d,filter:p,props:S,rows:o,url:route("admin.operational-cost-category.data"),loading:i,tableRef:n})},q=Z(()=>s.screen.gt.sm?f:f.filter(S=>S.name==="name"||S.name==="action"));return(S,w)=>{const z=X("i-head"),Y=X("authenticated-layout");return u(),h(G,null,[e(z,{title:pl}),e(Y,null,He({title:l(()=>[v(r(pl))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=C=>m.value=!m.value)},null,8,["icon"]),S.$can("admin.operational-cost-category.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=C=>a(ee).get(S.route("admin.operational-cost-category.add")))})):k("",!0)]),default:l(()=>[t("div",km,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Ke({height:a(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":w[4]||(w[4]=C=>d.value=C),filter:p.search,loading:i.value,columns:q.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:C,message:M,filter:O})=>[t("div",wm,[t("span",null,r(M)+" "+r(O?" with term "+O:""),1)])]),body:l(C=>[e(Pe,{props:C},{default:l(()=>[e(W,{key:"name",props:C,class:"wrap-column"},{default:l(()=>[v(r(C.row.name)+" ",1),a(s).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[C.row.description?(u(),h("div",hm,[e(R,{name:"description"}),v(" "+r(C.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"description",props:C,class:"wrap-column"},{default:l(()=>[v(r(C.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:C},{default:l(()=>[t("div",$m,[S.$can("admin.operational-cost-category.add")||S.$can("admin.operational-cost-category.edit")||S.$can("admin.operational-cost-category.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[3]||(w[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[S.$can("admin.operational-cost-category.add")?te((u(),I(oe,{key:0,clickable:"",onClick:J(M=>a(ee).get(S.route("admin.operational-cost-category.duplicate",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>w[5]||(w[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.$can("admin.operational-cost-category.edit")?te((u(),I(oe,{key:1,clickable:"",onClick:J(M=>a(ee).get(S.route("admin.operational-cost-category.edit",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>w[6]||(w[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.$can("admin.operational-cost-category.delete")?te((u(),I(oe,{key:2,onClick:J(M=>y(C.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>w[7]||(w[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",_m,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":w[2]||(w[2]=C=>p.search=C),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Sm=Object.freeze(Object.defineProperty({__proto__:null,default:xm},Symbol.toStringTag,{value:"Module"})),Vm={class:"q-gutter-sm"},qm={class:"col col-md-6 q-pa-xs"},Cm={class:"row"},Tm={class:"detail"},Pm={key:0},Rm={key:1},Om={key:2},Im={key:3},Um={colspan:"3",class:"bg-white"},fl="Rincian Biaya Operasional",Dm={__name:"Detail",setup(c){const s=ge();return(m,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return u(),h(G,null,[e(i,{title:fl}),e(g,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Vm,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.$inertia.get(m.route("admin.operational-cost.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(fl))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",qm,[t("div",Cm,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[o[22]||(o[22]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",Tm,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(oa)(a(s).props.data.date)),1)]),a(s).props.data.finance_account?(u(),h("tr",Pm,[o[7]||(o[7]=t("td",null,"Akun",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,[e(n,{href:m.route("admin.finance-account.detail",a(s).props.data.finance_account.id)},{default:l(()=>[v(r(a(s).props.data.finance_account.name),1)]),_:1},8,["href"]),a(s).props.data.finance_account.type==="bank"?(u(),h(G,{key:0},[o[5]||(o[5]=t("br",null,null,-1)),v(" Rek "+r(a(s).props.data.finance_account.bank)+" an "+r(a(s).props.data.finance_account.holder)+" ",1),o[6]||(o[6]=t("br",null,null,-1)),v(" "+r(a(s).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),a(s).props.data.category?(u(),h("tr",Rm,[o[9]||(o[9]=t("td",null,"Kategori",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.category.name),1)])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Deskripsi",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.description),1)]),t("tr",null,[o[13]||(o[13]=t("td",null,"Jumlah",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(H)(a(s).props.data.amount)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Catatan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(u(),h("tr",Om,[o[17]||(o[17]=t("td",null,"Dibuat",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(u(),h("tr",Im,[o[19]||(o[19]=t("td",null,"Diperbarui",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(u(),h(G,{key:4},[o[21]||(o[21]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Um,[e(sa,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:Ke([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Em=Object.freeze(Object.defineProperty({__proto__:null,default:Dm},Symbol.toStringTag,{value:"Module"})),jm={class:"row items-center justify-end"},Am={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(c,{emit:s}){const m=c,o=s,i=T(""),n=T(""),g=d=>{let f=!0;const y=m.minDate?rt.formatDate(m.minDate,"YYYY/MM/DD"):null,_=m.maxDate?rt.formatDate(m.maxDate,"YYYY/MM/DD"):null;return y&&(f=f&&rt.isBetweenDates(d,y,"2999/01/01",{inclusiveFrom:!0})),_&&(f=f&&rt.isBetweenDates(d,"1900/01/01",_,{inclusiveTo:!0})),f},b=Z(()=>[d=>!!d||"Tanggal harus diisi",d=>{const f=rt.extractDate(d,m.displayFormat);if(!f)return"Format tanggal tidak valid";f.setHours(0,0,0,0);const y=m.minDate?new Date(m.minDate):null;y&&y.setHours(0,0,0,0);const _=m.maxDate?new Date(m.maxDate):null;return _&&_.setHours(0,0,0,0),y&&f<y?`Tanggal tidak boleh kurang dari ${rt.formatDate(m.minDate,m.displayFormat)}`:_&&f>_?`Tanggal tidak boleh lebih dari ${rt.formatDate(m.maxDate,m.displayFormat)}`:(o("update:modelValue",f),!0)}]);Me(()=>m.modelValue,d=>{d instanceof Date?(n.value=rt.formatDate(d,"YYYY/MM/DD"),i.value=rt.formatDate(d,m.displayFormat)):(n.value="",i.value="")},{immediate:!0});const p=d=>{const f=d!==null?new Date(d):null;o("update:modelValue",f),i.value=f?rt.formatDate(f,m.displayFormat):null};return(d,f)=>(u(),I(ne,{modelValue:i.value,"onUpdate:modelValue":f[1]||(f[1]=y=>i.value=y),label:m.label,readonly:m.readonly,disable:m.disable,error:m.error,"error-message":m.errorMessage,mask:m.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:b.value},{append:l(()=>[e(D,{icon:"event",disable:m.disable||m.readonly,flat:"",rounded:"",dense:""},{default:l(()=>[e(Kn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Yn,{modelValue:n.value,"onUpdate:modelValue":[f[0]||(f[0]=y=>n.value=y),p],options:g},{default:l(()=>[t("div",jm,[te(e(D,{label:"Close",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},da=kt(Am,[["__scopeId","data-v-b418ccfb"]]);function yo(c,s=!1){const m=c.map(g=>({value:g.id,label:g.name})),o=s?[{value:"all",label:"Semua"},...m]:m,i=T([...o]);return{filteredCostCategories:i,filterCostCategory:(g,b)=>{const p=g.toLowerCase();b(()=>{i.value=o.filter(d=>d.label.toLowerCase().includes(p))})},costCategoryOptions:o}}const Mm={class:"q-gutter-sm"},Nm={class:"col col-md-6 q-pa-xs"},Bm={__name:"Editor",setup(c){var y;const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=yo(s.props.categories),i=s.props.finance_accounts.map(_=>({label:_.name,value:_.id})),n=T(o),g=T([...n.value]),b=Qe({id:s.props.data.id,finance_account_id:s.props.data.finance_account_id??null,category_id:s.props.data.category_id??null,date:new Date(s.props.data.date),description:s.props.data.description,notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((y=s.props.data)==null?void 0:y.image_path)??null,image:null}),p=()=>{ra(b,{date:"YYYY-MM-DD"}),nt({form:b,url:route("admin.operational-cost.save")})},d=(_,q)=>{q(()=>{g.value=n.value.filter(S=>S.label.toLowerCase().includes(_.toLowerCase()))})},f=()=>{b.image_path=null};return(_,q)=>{const S=X("i-head"),w=X("authenticated-layout");return u(),h(G,null,[e(S,{title:m}),e(w,null,{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",Mm,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:q[0]||(q[0]=z=>_.$inertia.get(_.route("admin.operational-cost.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Nm,[e(Je,{class:"row",onSubmit:J(p,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":q[1]||(q[1]=z=>a(b).id=z)},null,512),[[yt,a(b).id]]),e(ce,{autofocus:"",modelValue:a(b).category_id,"onUpdate:modelValue":q[2]||(q[2]=z=>a(b).category_id=z),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:g.value,"map-options":"","emit-value":"",onFilter:d,error:!!a(b).errors.category_id,disable:a(b).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,null,{default:l(()=>q[10]||(q[10]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(da,{modelValue:a(b).date,"onUpdate:modelValue":q[3]||(q[3]=z=>a(b).date=z),label:"Tanggal",error:!!a(b).errors.date,disable:a(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ne,{modelValue:a(b).description,"onUpdate:modelValue":q[4]||(q[4]=z=>a(b).description=z),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!a(b).errors.description,disable:a(b).processing,"error-message":a(b).errors.description,rules:[z=>z&&z.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Ee,{modelValue:a(b).amount,"onUpdate:modelValue":q[5]||(q[5]=z=>a(b).amount=z),label:"Jumlah",lazyRules:"",disable:a(b).processing,error:!!a(b).errors.amount,errorMessage:a(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ce,{class:"custom-select",modelValue:a(b).finance_account_id,"onUpdate:modelValue":q[6]||(q[6]=z=>a(b).finance_account_id=z),label:"Sumber Dana",options:a(i),"map-options":"","emit-value":"",clearable:"",errorMessage:a(b).errors.finance_account_id,error:!!a(b).errors.finance_account_id,disable:a(b).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(ne,{modelValue:a(b).notes,"onUpdate:modelValue":q[7]||(q[7]=z=>a(b).notes=z),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(b).processing,error:!!a(b).errors.notes,"error-message":a(b).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Ua,{modelValue:a(b).image,"onUpdate:modelValue":q[8]||(q[8]=z=>a(b).image=z),"initial-image-path":a(b).image_path,disabled:a(b).processing,error:!!a(b).errors.image||!!a(b).errors.image_path,"error-message":a(b).errors.image||a(b).errors.image_path,onImageCleared:f},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(b).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(b).processing,onClick:q[9]||(q[9]=z=>a(ee).get(_.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},zm=Object.freeze(Object.defineProperty({__proto__:null,default:Bm},Symbol.toStringTag,{value:"Module"})),Fm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Lm={class:"q-pa-xs"},Hm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Km={key:0},Ym={key:1},Wm={key:0},Qm={class:"flex justify-end no-wrap"},gl="Biaya Operasional",Jm={__name:"Index",setup(c){const s=ge(),m=Se(),o=T(!1),i=T(null),n=T(null),g=et(n),b=T(null),p=T(!1),d=T([]),f=T(!0),y=new Date().getFullYear(),_=new Date().getMonth()+1,q=[{label:"Semua Tahun",value:null},{label:`${y}`,value:y},...Ct(y-2,y-1).reverse()],S=[{value:null,label:"Semua Bulan"},...Tt()],{costCategoryOptions:w}=yo(s.props.categories),z=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...w],{accountOptions:Y}=Wn(s.props.finance_accounts),C=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...Y],M=Ie({search:"",finance_account_id:"all",category_id:"all",year:y,month:_,...Fe()}),O=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),B=[{name:"code",label:m.screen.lt.md?"Item":"Kode",field:"code",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{x()});const A=E=>lt({message:`Hapus Biaya ${E.code}?`,url:route("admin.operational-cost.delete",E.id),fetchItemsCallback:x,loading:f}),x=(E=null)=>{Le({pagination:O,filter:M,props:E,rows:d,url:route("admin.operational-cost.data"),loading:f,tableRef:i})},U=()=>{x()},P=Z(()=>m.screen.gt.sm?B:B.filter(E=>E.name==="code"||E.name==="action"));Me(()=>M.year,E=>{E===null&&(M.month=null)});const $=E=>{b.value=E,p.value=!0};return(E,N)=>{const V=X("i-head"),j=X("authenticated-layout");return u(),h(G,null,[e(V,{title:gl}),e(j,null,He({title:l(()=>[v(r(gl))]),"right-button":l(()=>[e(D,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:N[0]||(N[0]=ae=>o.value=!o.value)},null,8,["icon"]),E.$can("admin.operational-cost.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:N[1]||(N[1]=ae=>a(ee).get(E.route("admin.operational-cost.add")))})):k("",!0)]),default:l(()=>[t("div",Lm,[e(Ue,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:O.value,"onUpdate:pagination":N[8]||(N[8]=ae=>O.value=ae),filter:M.search,loading:f.value,columns:P.value,rows:d.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(g)}),onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:ae,message:re,filter:me})=>[t("div",Hm,[t("span",null,r(re)+" "+r(me?" with term "+me:""),1)])]),body:l(ae=>[e(Pe,{props:ae,class:"cursor-pointer",onClick:J(re=>a(ee).get(E.route("admin.operational-cost.detail",{id:ae.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:ae,class:"wrap-column"},{default:l(()=>[a(m).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[v(" Kode: ")],64)),v(" "+r(ae.row.code)+" ",1),a(m).screen.gt.sm?k("",!0):(u(),h(G,{key:1},[t("div",null,[e(R,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(oa)(ae.row.date)),1)]),ae.row.finance_account?(u(),h("div",Km,[e(R,{name:"wallet",class:"inline-icon"}),v(" "+r(ae.row.finance_account.name),1)])):k("",!0),ae.row.category?(u(),h("div",Ym,[e(R,{name:"category",class:"inline-icon"}),v(" "+r(ae.row.category.name),1)])):k("",!0),e($e,{icon:"description",text:ae.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(R,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(H)(ae.row.amount)),1)]),e($e,{icon:"notes",text:ae.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(W,{key:"date",props:ae,class:"wrap-column"},{default:l(()=>[v(r(a(oa)(ae.row.date)),1)]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:ae,class:"wrap-column"},{default:l(()=>[v(r(ae.row.finance_account?ae.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(W,{key:"category_id",props:ae},{default:l(()=>[ae.row.category?(u(),h("div",Wm,r(ae.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"description",props:ae},{default:l(()=>[e($e,{text:ae.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"amount",props:ae},{default:l(()=>[v(r(a(H)(ae.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:ae},{default:l(()=>[e($e,{text:ae.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:ae},{default:l(()=>[t("div",Qm,[e(D,{icon:"image",color:"primary",dense:"",flat:"",disable:ae.row.image_path===null||ae.row.image_path==="",onClick:J(re=>$(ae.row.image_path),["stop"])},{default:l(()=>[ae.row.image_path!=null?(u(),I(ea,{key:0},{default:l(()=>N[10]||(N[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),E.$can("admin.operational-cost.add")||E.$can("admin.operational-cost.edit")||E.$can("admin.operational-cost.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:N[7]||(N[7]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[E.$can("admin.operational-cost.add")?te((u(),I(oe,{key:0,clickable:"",onClick:J(re=>a(ee).get(E.route("admin.operational-cost.duplicate",ae.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>N[11]||(N[11]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),E.$can("admin.operational-cost.edit")?te((u(),I(oe,{key:1,clickable:"",onClick:J(re=>a(ee).get(E.route("admin.operational-cost.edit",ae.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>N[12]||(N[12]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),E.$can("admin.operational-cost.delete")?te((u(),I(oe,{key:2,onClick:J(re=>A(ae.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>N[13]||(N[13]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(ba,{modelValue:p.value,"onUpdate:modelValue":N[9]||(N[9]=ae=>p.value=ae),imageUrl:`/${b.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:l(()=>[t("div",Fm,[e(ce,{modelValue:M.year,"onUpdate:modelValue":[N[2]||(N[2]=ae=>M.year=ae),U],options:q,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:M.month,"onUpdate:modelValue":[N[3]||(N[3]=ae=>M.month=ae),U],options:S,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:M.year===null},null,8,["modelValue","disable"]),e(ce,{modelValue:M.category_id,"onUpdate:modelValue":[N[4]||(N[4]=ae=>M.category_id=ae),U],options:z,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:M.finance_account_id,"onUpdate:modelValue":[N[5]||(N[5]=ae=>M.finance_account_id=ae),U],options:C,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:M.search,"onUpdate:modelValue":N[6]||(N[6]=ae=>M.search=ae),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Gm=Object.freeze(Object.defineProperty({__proto__:null,default:Jm},Symbol.toStringTag,{value:"Module"})),Xm={class:"q-gutter-sm"},Zm={class:"col col-md-6 q-pa-xs"},ec={__name:"Editor",setup(c){const s=Se(),m=ge(),o=(m.props.data.id?"Edit":"Tambah")+" Kategori Produk",i=Qe({id:m.props.data.id,name:m.props.data.name,description:m.props.data.description}),n=()=>nt({form:i,url:route("admin.product-category.save")});return(g,b)=>{const p=X("i-head"),d=X("authenticated-layout");return u(),h(G,null,[e(p,{title:o}),e(d,{"show-drawer-button":!a(s).screen.lt.md},He({title:l(()=>[v(r(o))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Zm,[e(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>a(i).id=f)},null,512),[[yt,a(i).id]]),e(ne,{autofocus:"",modelValue:a(i).name,"onUpdate:modelValue":b[2]||(b[2]=f=>a(i).name=f),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(i).errors.name,disable:a(i).processing,"error-message":a(i).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(i).description,"onUpdate:modelValue":b[3]||(b[3]=f=>a(i).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.description,"error-message":a(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"]),e(D,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:b[4]||(b[4]=f=>a(i).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(s).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",Xm,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},tc=Object.freeze(Object.defineProperty({__proto__:null,default:ec},Symbol.toStringTag,{value:"Module"})),ac={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},lc={class:"q-pa-xs"},oc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},nc={key:0,class:"text-grey-8"},sc={class:"flex justify-end"},bl="Kategori Produk",rc={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=Ie({search:"",...Fe()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{_()});const y=S=>lt({message:`Hapus Kategori ${S.name}?`,url:route("admin.product-category.delete",S.id),fetchItemsCallback:_,loading:i}),_=(S=null)=>{Le({pagination:d,filter:p,props:S,rows:o,url:route("admin.product-category.data"),loading:i,tableRef:n})},q=Z(()=>s.screen.gt.sm?f:f.filter(S=>S.name==="name"||S.name==="action"));return(S,w)=>{const z=X("i-head"),Y=X("authenticated-layout");return u(),h(G,null,[e(z,{title:bl}),e(Y,null,He({title:l(()=>[v(r(bl))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=C=>m.value=!m.value)},null,8,["icon"]),S.$can("admin.product-category.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=C=>a(ee).get(S.route("admin.product-category.add")))})):k("",!0)]),default:l(()=>[t("div",lc,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":w[4]||(w[4]=C=>d.value=C),filter:p.search,loading:i.value,columns:q.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:C,message:M,filter:O})=>[t("div",oc,[t("span",null,r(M)+" "+r(O?" with term "+O:""),1)])]),body:l(C=>[e(Pe,{props:C},{default:l(()=>[e(W,{key:"name",props:C,class:"wrap-column"},{default:l(()=>[v(r(C.row.name)+" ",1),a(s).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[C.row.description?(u(),h("div",nc,[e(R,{name:"description"}),v(" "+r(C.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"description",props:C,class:"wrap-column"},{default:l(()=>[v(r(C.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:C},{default:l(()=>[t("div",sc,[S.$can("admin.product-category.add")||S.$can("admin.product-category.edit")||S.$can("admin.product-category.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[3]||(w[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[S.$can("admin.product-category.add")?te((u(),I(oe,{key:0,clickable:"",onClick:J(M=>a(ee).get(S.route("admin.product-category.duplicate",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>w[5]||(w[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.$can("admin.product-category.edit")?te((u(),I(oe,{key:1,clickable:"",onClick:J(M=>a(ee).get(S.route("admin.product-category.edit",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>w[6]||(w[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.$can("admin.product-category.delete")?te((u(),I(oe,{key:2,onClick:J(M=>y(C.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>w[7]||(w[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",ac,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":w[2]||(w[2]=C=>p.search=C),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ic=Object.freeze(Object.defineProperty({__proto__:null,default:rc},Symbol.toStringTag,{value:"Module"})),dc={class:"detail"},uc={key:0},mc={key:1},cc={key:2},pc={class:"detail"},fc={class:"detail"},gc={key:0},bc={key:0},vc={key:0},yc={key:0},_c={class:"detail"},kc={key:0,class:"q-pt-md"},_o={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(c){const s=c;Se();const m=i=>`${i>0?H((i-s.product.cost)/s.product.cost*100,2):0}%`,o=()=>{lt({message:`Hapus Produk ${s.product.name}?`,url:route("admin.product.delete",s.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(i,n)=>{const g=X("i-link");return u(),h("div",null,[n[41]||(n[41]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",dc,[t("tbody",null,[t("tr",null,[n[1]||(n[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),n[2]||(n[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(c.product.name),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"Deskirpsi",-1)),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,r(c.product.description),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Barcode",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(c.product.barcode),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Jenis Produk",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.PRODUCT_TYPES[c.product.type]),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Kategori",-1)),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,r(c.product.category?c.product.category.name:"--Tidak memiliki kategori--"),1)]),i.$can("admin.product:view-supplier")?(u(),h("tr",uc,[n[11]||(n[11]=t("td",null,"Supplier",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[c.product.supplier?(u(),I(g,{key:0,href:i.route("admin.supplier.detail",{id:c.product.supplier.id})},{default:l(()=>[v(r(c.product.supplier.name),1)]),_:1},8,["href"])):(u(),h(G,{key:1},[v(r("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[n[13]||(n[13]=t("td",null,"Status",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,r(c.product.active?"Aktif":"Tidak Aktif"),1)]),c.product.created_at?(u(),h("tr",mc,[n[16]||(n[16]=t("td",null,"Dibuat Oleh",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[c.product.creator?(u(),h(G,{key:0},[e(g,{href:i.route("admin.user.detail",{id:c.product.creator})},{default:l(()=>[v(r(c.product.creator.username),1)]),_:1},8,["href"]),n[15]||(n[15]=v(" - "))],64)):k("",!0),v(" "+r(a(ve)(c.product.created_at)),1)])])):k("",!0),c.product.updater?(u(),h("tr",cc,[n[19]||(n[19]=t("td",null,"Diperbarui oleh",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,[c.product.updater?(u(),h(G,{key:0},[e(g,{href:i.route("admin.user.detail",{id:c.product.updater})},{default:l(()=>[v(r(c.product.updater.username),1)]),_:1},8,["href"]),n[18]||(n[18]=v(" - "))],64)):k("",!0),v(" "+r(a(ve)(c.product.updated_at)),1)])])):k("",!0)])]),n[42]||(n[42]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",pc,[t("tbody",null,[t("tr",null,[n[21]||(n[21]=t("td",{style:{width:"120px"}},"Stok",-1)),n[22]||(n[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(H)(c.product.stock))+" "+r(c.product.uom),1)]),t("tr",null,[n[23]||(n[23]=t("td",null,"Stok Minimum",-1)),n[24]||(n[24]=t("td",null,":",-1)),t("td",null,r(a(H)(c.product.min_stock))+" "+r(c.product.uom),1)]),t("tr",null,[n[25]||(n[25]=t("td",null,"Stok Maksimum",-1)),n[26]||(n[26]=t("td",null,":",-1)),t("td",null,r(a(H)(c.product.max_stock))+" "+r(c.product.uom),1)]),t("tr",null,[n[27]||(n[27]=t("td",null,"Barcode",-1)),n[28]||(n[28]=t("td",null,":",-1)),t("td",null,r(c.product.barcode),1)])])]),n[43]||(n[43]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",fc,[t("tbody",null,[t("tr",null,[n[29]||(n[29]=t("td",null,"Opsi Harga",-1)),n[30]||(n[30]=t("td",null,":",-1)),t("td",null,r(c.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),i.$can("admin.product:view-cost")?(u(),h("tr",gc,[n[31]||(n[31]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),n[32]||(n[32]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(a(H)(c.product.cost)),1)])):k("",!0),t("tr",null,[n[33]||(n[33]=t("td",null,"Harga Eceran",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(a(H)(c.product.price_1))+" ",1),i.$can("admin.product:view-cost")?(u(),h("span",bc," ("+r(m(c.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[n[35]||(n[35]=t("td",null,"Harga Partai",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(a(H)(c.product.price_2))+" ",1),i.$can("admin.product:view-cost")?(u(),h("span",vc," ("+r(m(c.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[n[37]||(n[37]=t("td",null,"Harga Grosir",-1)),n[38]||(n[38]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(a(H)(c.product.price_3))+" ",1),i.$can("admin.product:view-cost")?(u(),h("span",yc," ("+r(m(c.product.price_3))+") ",1)):k("",!0)])])])]),n[44]||(n[44]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",_c,[t("tbody",null,[t("tr",null,[n[39]||(n[39]=t("td",{style:{width:"120px"}},"Catatan",-1)),n[40]||(n[40]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(c.product.notes),1)])])]),i.$can("admin.product.delete")?(u(),h("div",kc,[e(D,{icon:"delete",label:"Hapus",color:"negative",onClick:n[0]||(n[0]=b=>o())})])):k("",!0)])}}},wc=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),hc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},$c={key:0},ko={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(c){const s=c,m=Se(),o=T([]),i=T(!0),n=Ie({...Fe()}),g=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let b=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"quantity_before",label:"Stok Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Stok Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{p()});const p=(f=null)=>Le({pagination:g,filter:n,props:f,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:s.productId}}),loading:i}),d=Z(()=>m.screen.lt.sm?b.filter(f=>f.name==="id"||f.name==="quantity"):b);return(f,y)=>(u(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:g.value,"onUpdate:pagination":y[0]||(y[0]=_=>g.value=_),filter:n.search,loading:i.value,columns:d.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:S})=>[t("div",hc,[t("span",null,r(q)+" "+r(S?" with term "+S:""),1)])]),body:l(_=>[e(Pe,{props:_},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",null,[e(R,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(R,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)(_.row.created_at)),1)]),t("div",null,[e(bt,null,{default:l(()=>[v(r(f.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[_.row.ref_type]),1)]),_:2},1024)]),a(m).screen.lt.sm?(u(),h(G,{key:0},[t("div",{class:Ce(_.row.quantity>0?"text-positive":"text-negative")},[e(R,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(a(H)(_.row.quantity_before))+" "+r(_.row.uom)+"  "+r(a(H)(_.row.quantity_after))+" "+r(_.row.uom),1)],2),e($e,{text:_.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"created_at",props:_},{default:l(()=>[v(r(a(ve)(_.row.created_at)),1)]),_:2},1032,["props"]),e(W,{key:"type",props:_},{default:l(()=>[v(r(f.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[_.row.ref_type])+" ",1),_.row.ref?(u(),h("span",$c,r(_.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"quantity_before",props:_},{default:l(()=>[v(r(a(H)(_.row.quantity_before)),1)]),_:2},1032,["props"]),e(W,{key:"quantity",props:_,class:Ce(_.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[v(r(a(ia)(_.row.quantity))+" ",1),a(m).screen.lt.sm?(u(),h(G,{key:0},[v(r(_.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(W,{key:"quantity_after",props:_},{default:l(()=>[v(r(a(H)(_.row.quantity_after)),1)]),_:2},1032,["props"]),e(W,{key:"uom",props:_},{default:l(()=>[v(r(_.row.uom),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},xc=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),Sc={class:"q-gutter-sm"},Vc={class:"q-gutter-sm"},qc={class:"row justify-center"},Cc={class:"col col-lg-6 q-pa-xs"},Tc={class:"row"},Pc={__name:"Detail",setup(c){const s=ge(),m=`Rincian Produk #${s.props.data.id}`,o=T("main");return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return u(),h(G,null,[e(g,{title:m}),e(b,{"show-drawer-button":!0},{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",Sc,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$goBack())})])]),"right-button":l(()=>[t("div",Vc,[i.$can("admin.product.edit")?(u(),I(D,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[1]||(n[1]=p=>a(ee).get(i.route("admin.product.edit",{id:a(s).props.data.id}))),title:"Edit produk"})):k("",!0),i.$can("admin.product.add")?(u(),I(D,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[2]||(n[2]=p=>a(ee).get(i.route("admin.product.duplicate",{id:a(s).props.data.id}))),title:"Duplikat produk"})):k("",!0),i.$can("admin.product.add")?(u(),I(D,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:n[3]||(n[3]=p=>a(ee).get(i.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:l(()=>[t("div",qc,[t("div",Cc,[t("div",Tc,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Pt,{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=p=>o.value=p),animated:""},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(_o,{product:a(s).props.data},null,8,["product"])]),_:1}),e(ut,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(ko,{"product-id":a(s).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},Rc=Object.freeze(Object.defineProperty({__proto__:null,default:Pc},Symbol.toStringTag,{value:"Module"})),Yt=Et({name:"QBtnToggle",props:{...Jl,modelValue:{required:!0},options:{type:Array,required:!0,validator:c=>c.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(c,{slots:s,emit:m}){const o=Z(()=>c.options.find(_=>_.value===c.modelValue)!==void 0),i=Z(()=>({type:"hidden",name:c.name,value:c.modelValue})),n=Gn(i),g=Z(()=>Qn(c)),b=Z(()=>({rounded:c.rounded,dense:c.dense,...g.value})),p=Z(()=>c.options.map((_,q)=>{const{attrs:S,value:w,slot:z,...Y}=_;return{slot:z,props:{key:q,"aria-pressed":w===c.modelValue?"true":"false",...S,...Y,...b.value,disable:c.disable===!0||Y.disable===!0,color:w===c.modelValue?f(Y,"toggleColor"):f(Y,"color"),textColor:w===c.modelValue?f(Y,"toggleTextColor"):f(Y,"textColor"),noCaps:f(Y,"noCaps")===!0,noWrap:f(Y,"noWrap")===!0,size:f(Y,"size"),padding:f(Y,"padding"),ripple:f(Y,"ripple"),stack:f(Y,"stack")===!0,stretch:f(Y,"stretch")===!0,onClick(C){d(w,_,C)}}}}));function d(_,q,S){c.readonly!==!0&&(c.modelValue===_?c.clearable===!0&&(m("update:modelValue",null,null),m("clear")):m("update:modelValue",_,q),m("click",S))}function f(_,q){return _[q]===void 0?c[q]:_[q]}function y(){const _=p.value.map(q=>qe(D,q.props,q.slot!==void 0?s[q.slot]:void 0));return c.name!==void 0&&c.disable!==!0&&o.value===!0&&n(_,"push"),Wl(s.default,_)}return()=>qe(Jn,{class:"q-btn-toggle",...g.value,rounded:c.rounded,stretch:c.stretch,glossy:c.glossy,spread:c.spread},y)}});function Da(c,s=!1){const m=c.map(g=>({value:g.id,label:g.name})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...m]:m,i=T([...o]);return{filteredCategories:i,filterCategories:(g,b)=>{const p=g.toLowerCase();b(()=>{i.value=o.filter(d=>d.label.toLowerCase().includes(p))})},categories:o}}function Ea(c,s=!1){const m=c.map(g=>({value:g.id,label:g.name+" ("+g.code+")"})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...m]:m,i=T([...o]);return{filteredSuppliers:i,filterSupplierFn:(g,b)=>{const p=g.toLowerCase();b(()=>{i.value=o.filter(d=>d.label.toLowerCase().includes(p))})},suppliers:o}}const Ca=Xn({__name:"PercentInput",props:{modelValue:{type:[Number,null],required:!1,default:0},label:{type:[String,void 0],required:!1,default:void 0},locale:{type:String,default:"id-ID"},outlined:{type:Boolean,default:!1},allowNegative:{type:Boolean,default:!1},maxDecimals:{type:Number,default:0},lazyRules:{type:[Boolean,String],default:!1},disable:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(c,{expose:s,emit:m}){const o=T(null),i=Zn(),n=T(!1);s({focus:()=>{o.value&&o.value.focus()},select:()=>{var C;if((C=o.value)!=null&&C.$el){const M=o.value.$el.querySelector("input");M==null||M.select()}}});const g=c,b=m,p=T(""),d=C=>{const O=new Intl.NumberFormat(C).format(123456789e-2),B=O.includes(",")?",":".",A=O.replace(/\d/g,"").replace(B,"").charAt(0);return{decimalSeparator:B,thousandSeparator:A}},{decimalSeparator:f,thousandSeparator:y}=d(g.locale),_=C=>{if(C==null||isNaN(C)){if(g.maxDecimals>0)return"";C=0}return new Intl.NumberFormat(g.locale,{minimumFractionDigits:g.maxDecimals,maximumFractionDigits:g.maxDecimals}).format(C)};Me(()=>g.modelValue,C=>{n.value||(p.value=_(C))},{immediate:!0});const q=C=>{const M=C.replace(/[^0-9.,-]+/g,"").replace(new RegExp(`\\${y}`,"g"),"").replace(new RegExp(`\\${f}`,"g"),".");if(M===""||M==="-")return null;const O=parseFloat(M);return isNaN(O)?null:parseFloat(O.toFixed(g.maxDecimals))},S=()=>{n.value=!0,q(p.value),it(()=>{var C;(C=o.value)==null||C.select()})},w=C=>{p.value=C},z=()=>{n.value=!1;const C=q(p.value);b("update:modelValue",C),p.value=_(C)},Y=C=>{const M=["Backspace","Delete","Tab","ArrowLeft","ArrowRight","Home","End","Shift"];C.ctrlKey||C.metaKey||C.key>="0"&&C.key<="9"||(C.key===f||C.key===y)&&!p.value.includes(f)||g.allowNegative&&C.key==="-"&&C.target.selectionStart===0||M.includes(C.key)||C.preventDefault()};return(C,M)=>(u(),I(a(ne),{ref_key:"qInputRef",ref:o,"model-value":p.value,label:g.label,outlined:g.outlined,"onUpdate:modelValue":w,onBlur:z,onFocus:S,onKeydown:Y,"lazy-rules":g.lazyRules,disable:g.disable,error:g.error,rules:g.rules,"error-message":g.errorMessage},He({_:2},[a(i).prepend?{name:"prepend",fn:l(()=>[Dt(C.$slots,"prepend")]),key:"0"}:void 0,a(i).append?{name:"append",fn:l(()=>[Dt(C.$slots,"append")]),key:"1"}:void 0]),1032,["model-value","label","outlined","lazy-rules","disable","error","rules","error-message"]))}}),Oc={class:"q-gutter-sm"},Ic={class:"col col-md-6 q-pa-xs"},Uc={class:"row q-gutter-md"},Dc={class:"row q-gutter-md"},Ec={class:"q-mt-md full-width"},jc={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Produk",o=tt(window.CONSTANTS.PRODUCT_TYPES),i=T(!1),n=Qe({id:s.props.data.id,category_id:s.props.data.category_id,supplier_id:s.props.data.supplier_id,type:s.props.data.type||"",name:s.props.data.name||"",description:s.props.data.description||"",stock:parseFloat(s.props.data.stock)||0,min_stock:parseFloat(s.props.data.min_stock)||0,max_stock:parseFloat(s.props.data.max_stock)||0,uom:s.props.data.uom||"",barcode:s.props.data.barcode||"",cost:parseFloat(s.props.data.cost)||0,price_1:parseFloat(s.props.data.price_1)||0,price_2:parseFloat(s.props.data.price_2)||0,price_3:parseFloat(s.props.data.price_3)||0,price_1_markup:parseFloat(s.props.data.price_1_markup),price_2_markup:parseFloat(s.props.data.price_2_markup),price_3_markup:parseFloat(s.props.data.price_3_markup),price_1_option:s.props.data.price_1_option??"price",price_2_option:s.props.data.price_2_option??"price",price_3_option:s.props.data.price_3_option??"price",active:!!s.props.data.active,price_editable:!!s.props.data.price_editable,notes:s.props.data.notes||""}),g=()=>nt({form:n,url:route("admin.product.save")}),{filteredCategories:b,filterCategories:p}=Da(s.props.categories),{filteredSuppliers:d,filterSupplierFn:f}=Ea(s.props.suppliers),y=(S,w)=>(S=parseFloat(S)||0,w=parseFloat(w)||0,w<=0?S>0?100:0:(S-w)/w*100),_=(S,w)=>{S=parseFloat(S)||0,w=parseFloat(w)||0;const z=S*(1+w/100);return Math.round(z)};Me(()=>n.cost,S=>{i.value||(i.value=!0,n.price_1_option=="markup"?n.price_1=_(S,n.price_1_markup):n.price_1_markup=y(n.price_1,S),n.price_2_option=="markup"?n.price_2=_(S,n.price_2_markup):n.price_2_markup=y(n.price_2,S),n.price_3_option=="markup"?n.price_3=_(S,n.price_3_markup):n.price_3_markup=y(n.price_3,S),i.value=!1)},{immediate:!1});const q=S=>{const w=`price_${S}`,z=`price_${S}_markup`,Y=`price_${S}_option`;Me(()=>n[w],C=>{if(n[Y]=="markup"||i.value)return;i.value=!0;const M=y(C,n.cost);n[z]=parseFloat(M.toFixed(2)),i.value=!1},{deep:!1}),Me(()=>n[z],C=>{n[Y]!="price"&&(i.value||(i.value=!0,n[w]=_(n.cost,C),i.value=!1))},{deep:!1})};for(let S=1;S<=3;S++)q(S);return he(()=>{for(let S=1;S<=3;S++)n[`price_${S}_markup`]=y(n[`price_${S}`],n.cost)}),(S,w)=>{const z=X("i-head"),Y=X("authenticated-layout");return u(),h(G,null,[e(z,{title:m}),e(Y,{"show-drawer-button":!0},{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",Oc,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:w[0]||(w[0]=C=>S.$goBack())})])]),"right-button":l(()=>[e(D,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(n).processing,onClick:w[1]||(w[1]=C=>g()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ic,[e(Je,{class:"row",onKeydown:w[26]||(w[26]=Wt(J(()=>{},["prevent"]),["enter"])),onSubmit:J(g,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":w[2]||(w[2]=C=>a(n).id=C)},null,512),[[yt,a(n).id]]),w[33]||(w[33]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(ce,{disabled:!!a(n).id,autofocus:"",modelValue:a(n).type,"onUpdate:modelValue":w[3]||(w[3]=C=>a(n).type=C),class:"custom-select",options:a(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["disabled","modelValue","options"]),w[34]||(w[34]=t("div",{class:"text-warning text-italic"}," Mengganti tipe setelah produk digunakan dapat mempengaruhi stok ",-1)),e(ne,{modelValue:a(n).name,"onUpdate:modelValue":w[4]||(w[4]=C=>a(n).name=C),modelModifiers:{trim:!0},label:"Nama Produk","lazy-rules":"",error:!!a(n).errors.name,disable:a(n).processing,"error-message":a(n).errors.name,rules:[C=>C&&C.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),w[35]||(w[35]=t("div",{class:"text-warning text-italic"}," Mengganti kode/nama setelah produk digunakan dapat mempengaruhi konsistensi data. ",-1)),e(ce,{modelValue:a(n).category_id,"onUpdate:modelValue":w[5]||(w[5]=C=>a(n).category_id=C),label:"Kategori (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:a(b),"map-options":"","emit-value":"",onFilter:a(p),"option-label":"label","option-value":"value",error:!!a(n).errors.category_id,disable:a(n).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,null,{default:l(()=>w[27]||(w[27]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),S.$can("admin.product:view-supplier")?(u(),I(ce,{key:0,modelValue:a(n).supplier_id,"onUpdate:modelValue":w[6]||(w[6]=C=>a(n).supplier_id=C),label:"Supplier Default (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:a(d),"map-options":"","emit-value":"",onFilter:a(f),"option-label":"label","option-value":"value",error:!!a(n).errors.supplier_id,disable:a(n).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,null,{default:l(()=>w[28]||(w[28]=[v("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(ne,{modelValue:a(n).description,"onUpdate:modelValue":w[7]||(w[7]=C=>a(n).description=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi (Opsional)","lazy-rules":"",disable:a(n).processing,error:!!a(n).errors.description,"error-message":a(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Vt,{class:"q-mt-md",modelValue:a(n).active,"onUpdate:modelValue":w[8]||(w[8]=C=>a(n).active=C),disable:a(n).processing,label:"Produk Aktif (Ditampilkan)"},null,8,["modelValue","disable"]),w[36]||(w[36]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",Uc,[e(ne,{modelValue:a(n).uom,"onUpdate:modelValue":w[9]||(w[9]=C=>a(n).uom=C),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!a(n).errors.uom,disable:a(n).processing,"error-message":a(n).errors.uom,"hide-bottom-space":"",class:"col"},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(n).barcode,"onUpdate:modelValue":w[10]||(w[10]=C=>a(n).barcode=C),modelModifiers:{trim:!0},label:"Barcode","lazy-rules":"",error:!!a(n).errors.barcode,disable:a(n).processing,"error-message":a(n).errors.barcode,"hide-bottom-space":"",class:"col"},null,8,["modelValue","error","disable","error-message"])]),t("div",Dc,[e(Ee,{modelValue:a(n).stock,"onUpdate:modelValue":w[11]||(w[11]=C=>a(n).stock=C),label:"Stok Aktual",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.stock,errorMessage:a(n).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(n).min_stock,"onUpdate:modelValue":w[12]||(w[12]=C=>a(n).min_stock=C),label:"Stok Min",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.min_stock,errorMessage:a(n).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(n).max_stock,"onUpdate:modelValue":w[13]||(w[13]=C=>a(n).max_stock=C),label:"Stok Maks",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.max_stock,errorMessage:a(n).errors.max_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),w[37]||(w[37]=t("div",{class:"text-subtitle1 q-pt-lg"},"Harga & Modal",-1)),S.$can("admin.product:view-cost")?(u(),I(Ee,{key:1,modelValue:a(n).cost,"onUpdate:modelValue":w[14]||(w[14]=C=>a(n).cost=C),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.cost,errorMessage:a(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("table",Ec,[w[32]||(w[32]=t("thead",{class:"text-grey-6"},[t("tr",null,[t("th",{style:{width:"25%"}},"Harga"),t("th",{style:{width:"25%"}},"Markup (%)"),t("th"),t("th",{style:{width:"25%"}},"Harga Jual (Rp)")])],-1)),t("tbody",null,[t("tr",null,[w[29]||(w[29]=t("td",{class:"no-wrap"},"Harga Eceran",-1)),t("td",null,[e(Ca,{class:"col-3",filled:"",dense:"",modelValue:a(n).price_1_markup,"onUpdate:modelValue":w[15]||(w[15]=C=>a(n).price_1_markup=C),lazyRules:"",readonly:a(n).price_1_option!="markup",disable:a(n).processing,error:!!a(n).errors.price_1_markup,errorMessage:a(n).errors.price_1_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Yt,{modelValue:a(n).price_1_option,"onUpdate:modelValue":w[16]||(w[16]=C=>a(n).price_1_option=C),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:a(n).price_1,"onUpdate:modelValue":w[17]||(w[17]=C=>a(n).price_1=C),lazyRules:"",disable:a(n).processing,readonly:a(n).price_1_option=="markup",error:!!a(n).errors.price_1,errorMessage:a(n).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])]),t("tr",null,[w[30]||(w[30]=t("td",{class:"no-wrap"},"Harga Partai",-1)),t("td",null,[e(Ca,{class:"col-3",filled:"",dense:"",modelValue:a(n).price_2_markup,"onUpdate:modelValue":w[18]||(w[18]=C=>a(n).price_2_markup=C),lazyRules:"",readonly:a(n).price_2_option!="markup",disable:a(n).processing,error:!!a(n).errors.price_2_markup,errorMessage:a(n).errors.price_2_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Yt,{modelValue:a(n).price_2_option,"onUpdate:modelValue":w[19]||(w[19]=C=>a(n).price_2_option=C),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:a(n).price_2,"onUpdate:modelValue":w[20]||(w[20]=C=>a(n).price_2=C),lazyRules:"",readonly:a(n).price_2_option=="markup",disable:a(n).processing,error:!!a(n).errors.price_2,errorMessage:a(n).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","readonly","disable","error","errorMessage"])])]),t("tr",null,[w[31]||(w[31]=t("td",{class:"no-wrap"},"Harga Grosir",-1)),t("td",null,[e(Ca,{class:"col-3",filled:"",dense:"",modelValue:a(n).price_3_markup,"onUpdate:modelValue":w[21]||(w[21]=C=>a(n).price_3_markup=C),lazyRules:"",disable:a(n).processing,readonly:a(n).price_3_option!="markup",error:!!a(n).errors.price_3_markup,errorMessage:a(n).errors.price_3_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","disable","readonly","error","errorMessage"])]),t("td",null,[e(Yt,{modelValue:a(n).price_3_option,"onUpdate:modelValue":w[22]||(w[22]=C=>a(n).price_3_option=C),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:a(n).price_3,"onUpdate:modelValue":w[23]||(w[23]=C=>a(n).price_3=C),lazyRules:"",disable:a(n).processing,readonly:a(n).price_3_option=="markup",error:!!a(n).errors.price_3,errorMessage:a(n).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])])])]),e(Vt,{class:"q-mt-sm",modelValue:a(n).price_editable,"onUpdate:modelValue":w[24]||(w[24]=C=>a(n).price_editable=C),disable:a(n).processing,label:"Harga dapat diubah saat penjualan"},null,8,["modelValue","disable"]),e(ne,{modelValue:a(n).notes,"onUpdate:modelValue":w[25]||(w[25]=C=>a(n).notes=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(n).processing,error:!!a(n).errors.notes,"error-message":a(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ac=Object.freeze(Object.defineProperty({__proto__:null,default:jc},Symbol.toStringTag,{value:"Module"})),Mc={class:"q-gutter-sm"},Nc={class:"col col-md-6 q-pa-xs"},vl="Import Produk",Bc={__name:"Import",setup(c){const s=Qe({csv_file:null}),m=()=>{s.post(route("admin.product.import"),{onSuccess:()=>{s.reset()},onError:()=>{We()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return u(),h(G,null,[e(n,{title:vl}),e(g,{"show-drawer-button":!0},{title:l(()=>[v(r(vl))]),"left-button":l(()=>[t("div",Mc,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Nc,[e(Je,{class:"row",onSubmit:J(m,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(co,{modelValue:a(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>a(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!a(s).errors.csv_file,"error-message":a(s).errors.csv_file,disable:a(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(s).processing||!a(s).csv_file,loading:a(s).processing},null,8,["disable","loading"]),e(D,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:i[2]||(i[2]=b=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(u(),I(Qt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(u(),I(Qt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},zc=Object.freeze(Object.defineProperty({__proto__:null,default:Bc},Symbol.toStringTag,{value:"Module"})),Fc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Lc={class:"q-pa-xs"},Hc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Kc={key:0},Yc={key:1},Wc={key:2},Qc={key:3},Jc={class:"flex justify-end"},Gc={key:0},Xc={key:1},Zc={key:0},yl="Produk",ep={__name:"Index",setup(c){const s=ge(),m=T(null),o=T(null),i=et(o),n=T(!1),g=[...tt(window.CONSTANTS.PRODUCT_TYPES)],b=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],p=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],d=Se(),f=T(!1),y=T([]),_=T(!0),q=Ie({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...Fe()}),S=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});let w=[{name:"id",label:"ID",field:"id",align:"center",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"price_2",label:"Harga Partai",field:"price_2",align:"right"},{name:"price_3",label:"Harga Grosir",field:"price_3",align:"right"},{name:"action",align:"right"}];he(()=>{const $=new URLSearchParams(window.location.search).get("page");$&&(S.value.page=parseInt($)),Y()});const z=P=>lt({message:`Hapus Produk ${P.name}?`,url:route("admin.product.delete",P.id),fetchItemsCallback:Y,loading:_}),Y=(P=null)=>{Le({pagination:S,filter:q,props:P,rows:y,url:route("admin.product.data"),loading:_,tableRef:m})},C=()=>{Y()},{filteredCategories:M,filterCategories:O}=Da(s.props.categories),{filteredSuppliers:B,filterSupplierFn:A}=Ea(s.props.suppliers),x=Z(()=>{let P=[...w];return n.value||P.splice(3,1),d.screen.gt.sm?P:P.filter($=>$.name==="id"||$.name==="name"||$.name==="action")}),U=P=>{ee.get(route("admin.product.detail",P.row.id))};return(P,$)=>{const E=X("i-head"),N=X("authenticated-layout");return u(),h(G,null,[e(E,{title:yl}),e(N,null,He({title:l(()=>[v(r(yl))]),"right-button":l(()=>[e(D,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=V=>f.value=!f.value)},null,8,["icon"]),P.$can("admin.product.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=V=>a(ee).get(P.route("admin.product.add")))})):k("",!0),P.$can("admin.product.import")||P.$can("admin.product:view-cost")?(u(),I(D,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.product.send-price-list")?te((u(),I(oe,{key:0,clickable:"",onClick:$[2]||($[2]=J(V=>a(ee).get(P.route("admin.product.send-price-list")),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"send"})]),_:1}),e(F,null,{default:l(()=>$[14]||($[14]=[v("Kirim Daftar Harga")])),_:1})]),_:1})),[[ie],[pe]]):k("",!0),P.$can("admin.product.import")?te((u(),I(oe,{key:1,clickable:"",onClick:$[3]||($[3]=V=>n.value=!n.value)},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:n.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(F,null,{default:l(()=>[v(r(n.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[ie],[pe]]):k("",!0),P.$can("admin.product.import")?te((u(),I(oe,{key:2,clickable:"",onClick:$[4]||($[4]=J(V=>a(ee).get(P.route("admin.product.import")),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"csv"})]),_:1}),e(F,null,{default:l(()=>$[15]||($[15]=[v("Import")])),_:1})]),_:1})),[[ie],[pe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",Lc,[e(Ue,{ref_key:"tableRef",ref:m,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:S.value,"onUpdate:pagination":$[13]||($[13]=V=>S.value=V),filter:q.search,loading:_.value,columns:x.value,rows:y.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(i)}),onRequest:Y,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:j,filter:ae})=>[t("div",Hc,[t("span",null,r(j)+" "+r(ae?" with term "+ae:""),1)])]),header:l(V=>[e(Pe,{props:V},{default:l(()=>[e(Zt,{"auto-width":""}),(u(!0),h(G,null,Be(V.cols,j=>(u(),I(Zt,{key:j.name,props:V},{default:l(()=>[v(r(j.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(V=>[e(Pe,{props:V,class:Ce([{inactive:!V.row.active},"cursor-pointer"]),onClick:j=>U(V)},{default:l(()=>[e(W,{"auto-width":""},{default:l(()=>[e(D,{size:"sm",flat:"",round:"",dense:"",onClick:J(j=>V.expand=!V.expand,["stop"]),icon:V.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(W,null,{default:l(()=>[v(r(V.row.id),1)]),_:2},1024),e(W,{key:"name",props:V,class:"wrap-column"},{default:l(()=>[v(r(V.row.name)+" ",1),a(d).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[V.row.type=="stocked"?(u(),h("div",Kc,[e(R,{name:"cycle"}),v(" Stok: "+r(a(H)(V.row.stock))+" "+r(V.row.uom),1)])):k("",!0),n.value?(u(),h("div",Yc,[e(R,{name:"money"}),v(" Modal: Rp. "+r(a(H)(V.row.cost)),1)])):k("",!0),t("div",null,[e(R,{name:"sell"}),v(" Eceran: Rp. "+r(a(H)(V.row.price_1)),1)]),V.row.price_2!=0?(u(),h("div",Wc,[e(R,{name:"sell"}),v(" Partai: Rp. "+r(a(H)(V.row.price_2)),1)])):k("",!0),V.row.price_3!=0?(u(),h("div",Qc,[e(R,{name:"sell"}),v(" Grosir: Rp. "+r(a(H)(V.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"stock",props:V,class:Ce(["wrap-column",{"low-stock":V.row.type=="stocked"&&(Number(V.row.stock)==0||Number(V.row.stock)<Number(V.row.min_stock)),"over-stock":V.row.type=="stocked"&&Number(V.row.max_stock)&&Number(V.row.stock)>Number(V.row.max_stock)}])},{default:l(()=>[v(r(V.row.type=="stocked"?a(H)(V.row.stock)+" "+V.row.uom:"-"),1)]),_:2},1032,["props","class"]),(u(),I(W,{key:"cost",props:V,class:"wrap-column"},{default:l(()=>[v(r(a(H)(V.row.cost)),1)]),_:2},1032,["props"])),e(W,{key:"price_1",props:V,class:"wrap-column"},{default:l(()=>[v(r(a(H)(V.row.price_1)),1)]),_:2},1032,["props"]),e(W,{key:"price_2",props:V,class:"wrap-column"},{default:l(()=>[v(r(a(H)(V.row.price_2)),1)]),_:2},1032,["props"]),e(W,{key:"price_3",props:V,class:"wrap-column"},{default:l(()=>[v(r(a(H)(V.row.price_3)),1)]),_:2},1032,["props"]),e(W,{key:"action",props:V},{default:l(()=>[t("div",Jc,[P.$can("admin.product.add")||P.$can("admin.product.edit")||P.$can("admin.product.delete")?(u(),I(D,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:$[12]||($[12]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"175px"}},{default:l(()=>[P.$can("admin.product.add")?te((u(),I(oe,{key:0,clickable:"",onClick:J(j=>a(ee).get(P.route("admin.product.duplicate",V.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>$[16]||($[16]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),P.$can("admin.product.edit")?te((u(),I(oe,{key:1,clickable:"",onClick:J(j=>a(ee).get(P.route("admin.product.edit",V.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>$[17]||($[17]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),P.$can("admin.product.delete")?te((u(),I(oe,{key:2,onClick:J(j=>z(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>$[18]||($[18]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),te(e(Pe,{props:V},{default:l(()=>[e(W,{colspan:"100%"},{default:l(()=>[V.row.barcode?(u(),h("div",Gc,[e(R,{class:"inline-icon",name:"barcode"}),v(" Barcode: "+r(V.row.barcode),1)])):k("",!0),V.row.category_id?(u(),h("div",Xc,[e(R,{name:"category",class:"inline-icon"}),v(" Kategori: "+r(V.row.category.name),1)])):k("",!0),P.$can("admin.product:view-supplier")?(u(),h(G,{key:2},[V.row.supplier_id?(u(),h("div",Zc,[e(R,{name:"local_shipping",class:"inline-icon"}),v(" Supplier: "+r(V.row.supplier.name),1)])):k("",!0)],64)):k("",!0),V.row.description?(u(),I($e,{key:3,text:V.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),V.row.notes?(u(),I($e,{key:4,text:V.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[Xl,V.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[f.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:l(()=>[t("div",Fc,[e(ce,{modelValue:q.type,"onUpdate:modelValue":[$[6]||($[6]=V=>q.type=V),C],class:"custom-select col-xs-4 col-sm-2",options:g,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(ce,{modelValue:q.stock_status,"onUpdate:modelValue":[$[7]||($[7]=V=>q.stock_status=V),C],class:"custom-select col-xs-4 col-sm-2",options:p,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:q.status,"onUpdate:modelValue":[$[8]||($[8]=V=>q.status=V),C],class:"custom-select col-xs-4 col-sm-2",options:b,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:q.category_id,"onUpdate:modelValue":[$[9]||($[9]=V=>q.category_id=V),C],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(M),"map-options":"",dense:"","emit-value":"",onFilter:a(O),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),P.$can("admin.product:view-supplier")?(u(),I(ce,{key:0,modelValue:q.supplier_id,"onUpdate:modelValue":[$[10]||($[10]=V=>q.supplier_id=V),C],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(B),"map-options":"",dense:"","emit-value":"",onFilter:a(A),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:q.search,"onUpdate:modelValue":$[11]||($[11]=V=>q.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},tp=Object.freeze(Object.defineProperty({__proto__:null,default:ep},Symbol.toStringTag,{value:"Module"})),ap={class:"q-gutter-sm"},lp={class:"col col-md-8 q-pa-xs"},op={class:"col-12 col-md-6"},np={class:"col-12 col-md-6"},sp={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},rp={class:"q-gutter-sm"},_l="Kirim Daftar Harga",ip={__name:"SendPriceList",setup(c){const s=ge(),m=T(""),o=T(null),i=Z(()=>{var A;const B=new Map;return(A=s.props.products)==null||A.forEach(x=>{B.set(x.id,x)}),B}),n=Z(()=>{var A;const B=new Map;return(A=s.props.customers)==null||A.filter(x=>x.phone&&x.phone.trim()!=="").forEach(x=>{B.set(x.id,x)}),B}),g=Z(()=>{var B;return((B=s.props.customers)==null?void 0:B.map(A=>({value:A.id,label:A.name})))||[]}),b=Z(()=>{var B;return((B=s.props.products)==null?void 0:B.map(A=>({value:A.id,label:`${A.name}`})))||[]}),p=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],d=T(b.value),f=T(g.value),y=Qe({price_types:[],products:[],customers:[]});y.transform(B=>({customers:B.customers.map(A=>A.value),message:m.value}));const _=B=>B?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(B):"Rp. 0",q=B=>{const A=p.find(x=>x.value===B);return A?A.label:B},S=()=>{if(o.value){const B=o.value.$el.querySelector("textarea");if(B){B.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(A){console.error("Gagal menyalin teks ke clipboard:",A)}}}},w=Z(()=>{var A,x;if(((A=y.products)==null?void 0:A.length)===0||((x=y.price_types)==null?void 0:x.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let B=`*DAFTAR HARGA TERBARU*
`;return B+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,B+=`------------------------------

`,(y.products||[]).forEach(U=>{const P=i.value.get(U.value);P&&(B+=`*${P.name}*
`,(y.price_types||[]).forEach($=>{const E=q($),N=P[$],V=P.uom||"pcs";N!=null&&N>0&&(B+=`- ${E}: *${_(N)}* / ${V}
`)}),B+=`
`)}),B+=`------------------------------
`,B+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",B});Me(w,B=>{m.value=B},{immediate:!0});const z=Z(()=>(y.customers||[]).map(B=>n.value.get(B.value)).filter(B=>B&&B.phone)),Y=B=>{const A=m.value;let x=B.startsWith("0")?"62"+B.substring(1):B;x=x.replace(/[^0-9]/g,"");const U=encodeURIComponent(A);return`https://wa.me/${x}?text=${U}`},C=(B,A)=>{if(B===""){A(()=>{d.value=b.value});return}A(()=>{const x=B.toLowerCase();d.value=b.value.filter(U=>U.label.toLowerCase().indexOf(x)>-1)})},M=(B,A)=>{if(B===""){A(()=>{f.value=g.value});return}A(()=>{const x=B.toLowerCase();f.value=g.value.filter(U=>U.label.toLowerCase().indexOf(x)>-1)})},O=()=>{var B,A,x;if(((B=y.price_types)==null?void 0:B.length)===0||((A=y.products)==null?void 0:A.length)===0||((x=y.customers)==null?void 0:x.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}y.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{We()},onFinish:()=>{y.clearErrors()}})};return(B,A)=>{const x=X("i-head"),U=X("authenticated-layout");return u(),h(G,null,[e(x,{title:_l}),e(U,{"show-drawer-button":!0},{title:l(()=>[v(r(_l))]),"left-button":l(()=>[t("div",ap,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:A[0]||(A[0]=P=>B.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",lp,[e(Je,{class:"row q-col-gutter-xs",onSubmit:J(O,["prevent"]),onValidationError:a(We)},{default:l(()=>[t("div",op,[e(fe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[A[10]||(A[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),A[11]||(A[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:a(y).products,"onUpdate:modelValue":A[1]||(A[1]=P=>a(y).products=P),options:d.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.products,"error-message":a(y).errors.products,loading:a(y).processing,"use-input":"",onFilter:C,onClear:A[2]||(A[2]=P=>a(y).products=[]),"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,{class:"text-grey"},{default:l(()=>A[8]||(A[8]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:a(y).price_types,"onUpdate:modelValue":A[3]||(A[3]=P=>a(y).price_types=P),options:p,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.price_types,"error-message":a(y).errors.price_types,loading:a(y).processing,multiple:"","use-chips":"",clearable:"",onClear:A[4]||(A[4]=P=>a(y).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:a(y).customers,"onUpdate:modelValue":A[5]||(A[5]=P=>a(y).customers=P),options:f.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.customers,"error-message":a(y).errors.customers,loading:a(y).processing,"use-input":"",onFilter:M,onClear:A[6]||(A[6]=P=>a(y).customers=[]),"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,{class:"text-grey"},{default:l(()=>A[9]||(A[9]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>{var P,$,E;return[e(D,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:a(y).processing||((P=a(y).products)==null?void 0:P.length)===0||(($=a(y).customers)==null?void 0:$.length)===0||((E=a(y).price_types)==null?void 0:E.length)===0,loading:a(y).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",np,[e(fe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:l(()=>[e(le,null,{default:l(()=>[t("div",sp,[A[12]||(A[12]=v(" Pratinjau Pesan (Teks Biasa) ")),e(D,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:S,disable:m.value.length===0},null,8,["disable"])]),e(ne,{modelValue:m.value,"onUpdate:modelValue":A[7]||(A[7]=P=>m.value=P),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),z.value.length>0?(u(),I(le,{key:0,class:"q-pt-none"},{default:l(()=>[A[14]||(A[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",rp,[(u(!0),h(G,null,Be(z.value,P=>(u(),I(D,{key:P.id,label:`Kirim ke ${P.name}`,href:Y(P.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(a(y).products.length>0&&a(y).price_types.length>0)},{default:l(()=>[P.phone?k("",!0):(u(),I(ea,{key:0},{default:l(()=>A[13]||(A[13]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),A[15]||(A[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},dp=Object.freeze(Object.defineProperty({__proto__:null,default:ip},Symbol.toStringTag,{value:"Module"})),up={class:"q-gutter-sm"},mp={class:"q-pa-xs"},cp={class:"col-12"},pp={class:"col-12"},fp={class:"q-gutter-xs"},kl="Kirim Daftar Harga",gp={__name:"SendPriceList2",setup(c){const s=ge(),m=T(""),o=Z(()=>{var B;const O=new Map;return(B=s.props.products)==null||B.forEach(A=>{O.set(A.id,A)}),O}),i=Z(()=>{var B;const O=new Map;return(B=s.props.customers)==null||B.forEach(A=>{O.set(A.id,A)}),O}),n=Z(()=>{var O;return((O=s.props.customers)==null?void 0:O.map(B=>({value:B.id,label:B.name})))||[]}),g=Z(()=>{var O;return((O=s.props.products)==null?void 0:O.map(B=>({value:B.id,label:`${B.name} (${B.sku||B.code||"ID: "+B.id})`})))||[]}),b=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],p=T(g.value),d=T(n.value),f=Qe({price_types:[],products:[],customers:[]});f.transform(O=>({...O,products:O.products.map(B=>B.value),customers:O.customers.map(B=>B.value)}));const y=O=>O?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(O):"Rp. 0",_=O=>{const B=b.find(A=>A.value===O);return B?B.label:O},q=Z(()=>{if(f.products.length===0||f.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let O=`Daftar Harga Terbaru
`;return O+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,O+=`------------------------------

`,f.products.forEach(B=>{const A=o.value.get(B.value);A&&(O+=`*${A.name}*
`,f.price_types.forEach(x=>{const U=_(x),P=A[x],$=A.unit||"pcs";P!=null&&P!=0&&(O+=`- ${U}: ${y(P)} / ${$}
`)}),O+=`
`)}),O+=`------------------------------
`,O+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",O});Me(q,O=>{m.value=O},{immediate:!0});const S=Z(()=>f.customers.map(O=>i.value.get(O.value)).filter(O=>O&&O.phone_number)),w=O=>{const B=m.value;let A=O.startsWith("0")?"62"+O.substring(1):O;A=A.replace(/[^0-9]/g,"");const x=encodeURIComponent(B);return`https://wa.me/${A}?text=${x}`},z=(O,B)=>{if(O===""){B(()=>{p.value=g.value});return}B(()=>{const A=O.toLowerCase();p.value=g.value.filter(x=>x.label.toLowerCase().indexOf(A)>-1)})},Y=(O,B)=>{if(O===""){B(()=>{d.value=n.value});return}B(()=>{const A=O.toLowerCase();d.value=n.value.filter(x=>x.label.toLowerCase().indexOf(A)>-1)})},C=()=>{console.log("Scrolling to first error field...")},M=()=>{if(f.price_types.length===0||f.products.length===0||f.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}f.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{C()},onFinish:()=>{f.clearErrors()}})};return(O,B)=>{const A=X("i-head"),x=X("authenticated-layout");return u(),h(G,null,[e(A,{title:kl}),e(x,{"show-drawer-button":!0},{title:l(()=>[v(r(kl))]),"left-button":l(()=>[t("div",up,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:B[0]||(B[0]=U=>O.$goBack())})])]),default:l(()=>[t("div",mp,[e(Je,{class:"row q-col-gutter-md",onSubmit:J(M,["prevent"]),onValidationError:C},{default:l(()=>[t("div",cp,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[B[8]||(B[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),B[9]||(B[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:a(f).products,"onUpdate:modelValue":B[1]||(B[1]=U=>a(f).products=U),options:p.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(f).errors.products,"error-message":a(f).errors.products,loading:a(f).processing,"use-input":"",onFilter:z,"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,{class:"text-grey"},{default:l(()=>B[6]||(B[6]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:a(f).price_types,"onUpdate:modelValue":B[2]||(B[2]=U=>a(f).price_types=U),options:b,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!a(f).errors.price_types,"error-message":a(f).errors.price_types,loading:a(f).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:a(f).customers,"onUpdate:modelValue":B[3]||(B[3]=U=>a(f).customers=U),options:d.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(f).errors.customers,"error-message":a(f).errors.customers,loading:a(f).processing,"use-input":"",onFilter:Y,"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,{class:"text-grey"},{default:l(()=>B[7]||(B[7]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:a(f).processing||a(f).products.length===0||a(f).customers.length===0||a(f).price_types.length===0,loading:a(f).processing},null,8,["disable","loading"]),e(D,{icon:"cancel",label:"Batal",disable:a(f).processing,onClick:B[4]||(B[4]=U=>O.$goBack())},null,8,["disable"])]),_:1}),O.$page.props.flash.success?(u(),I(Qt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[v(r(O.$page.props.flash.success),1)]),_:1})):k("",!0),O.$page.props.flash.error?(u(),I(Qt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[v(r(O.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",pp,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[B[10]||(B[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(ne,{modelValue:m.value,"onUpdate:modelValue":B[5]||(B[5]=U=>m.value=U),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),B[11]||(B[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),S.value.length>0?(u(),I(le,{key:0},{default:l(()=>[B[13]||(B[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",fp,[(u(!0),h(G,null,Be(S.value,U=>(u(),I(D,{key:U.id,label:`Kirim ke ${U.label}`,href:w(U.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:l(()=>[U.phone_number?k("",!0):(u(),I(ea,{key:0},{default:l(()=>B[12]||(B[12]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href"]))),128))]),B[14]||(B[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},bp=Object.freeze(Object.defineProperty({__proto__:null,default:gp},Symbol.toStringTag,{value:"Module"})),vp={class:"q-gutter-sm"},yp={class:"col col-md-6 q-pa-xs"},wl="Tambah Retur Pembelian",_p={__name:"Create",setup(c){const s=ge(),m=Qe({code:s.props.data.code}),o=()=>nt({form:m,url:route("admin.purchase-order-return.add")});return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return u(),h(G,null,[e(g,{title:wl}),e(b,null,{title:l(()=>[v(r(wl))]),"left-button":l(()=>[t("div",vp,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.finance-account.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",yp,[e(Je,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ne,{autofocus:"",modelValue:a(m).code,"onUpdate:modelValue":n[1]||(n[1]=p=>a(m).code=p),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!a(m).errors.code,disable:a(m).processing,"error-message":a(m).errors.code,rules:[p=>p&&p.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:a(m).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(m).processing,onClick:n[2]||(n[2]=p=>a(ee).get(i.route("admin.purchase-order-return.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},kp=Object.freeze(Object.defineProperty({__proto__:null,default:_p},Symbol.toStringTag,{value:"Module"})),wp={class:"column"},hp={class:"bg-grey-2 q-pa-xs"},$p={class:"text-subtitle1 text-bold text-grey-10"},xp={class:"text-caption text-grey-8"},Sp={class:"col-12 col-sm-6"},Vp={class:"full-width"},qp={key:1},Cp={key:0},Tp={key:1},Pp={class:"col-12 col-sm-6",align:"left"},Rp={class:"full-width"},Op={class:"full-width",style:{"border-collapse":"collapse"}},Ip={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Up={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Dp={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ep={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},jp={key:0},Ap={class:"col-12 col-sm-6"},Mp={class:"text-body2 text-grey-7 text-italic"},Np={class:"col-12 col-sm-6"},Bp={class:"row justify-end q-gutter-y-xs"},zp={class:"col-12 row justify-between"},Fp={class:"text-subtitle2 text-bold"},wo={__name:"MainInfoTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=X("i-link");return u(),h("div",wp,[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",hp,[t("div",$p," RETUR #"+r(s.data.code),1),t("div",xp,r(a(ve)(s.data.datetime)),1)])]),_:1}),e(Ae),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",Sp,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",Vp,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(u(),I(i,{key:0,href:m.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:l(()=>{var n;return[e(R,{class:"inline-icon",name:"person"}),v(" "+r(s.data.supplier_name)+" ("+r((n=s.data.supplier)==null?void 0:n.code)+") ",1)]}),_:1},8,["href"])):(u(),h("div",qp,[e(R,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(u(),h("tr",Cp,[t("td",null,[e(R,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(u(),h("tr",Tp,[t("td",null,[e(R,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",Pp,[o[8]||(o[8]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Rp,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("table",Op,[o[10]||(o[10]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(u(!0),h(G,null,Be(s.data.details,n=>(u(),h("tr",{key:n.id},[t("td",Ip,[e(i,{href:m.route("admin.product.detail",n.product_id)},{default:l(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",Up,r(a(H)(n.price)),1),t("td",Dp,r(n.quantity),1),t("td",Ep,r(a(H)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(u(),h("tr",jp,o[9]||(o[9]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(le,{class:"row",align:"left"},{default:l(()=>[t("div",Ap,[o[11]||(o[11]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Mp,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Np,[t("div",Bp,[t("div",zp,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Fp,r(a(H)(s.data.grand_total)),1)])])])]),_:1})])}}},Lp=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),Hp={key:0,class:"text-center q-mb-md text-grey-8"},Kp={class:"text-subtitle2 text-weight-medium"},Yp={class:"text-h5 text-center text-primary q-pb-md"},Wp={class:"text-center q-mt-md"},Qp={key:0,class:"text-h6 text-negative text-weight-bold"},Jp={key:1,class:"text-h6 text-positive text-weight-bold"},ho={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=T(!1),g=T({method:"transfer",amount:m.total,notes:null}),b=i.props.data.supplier,p=Z(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(S=>({label:S.name,value:S.id}))]),d=Z(()=>m.total-(g.value.amount||0)),f=Z(()=>{const S=g.value.amount||0;return S<=0?"Jumlah pembayaran harus lebih dari 0.":S>m.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),y=Z(()=>f.value===null),_=()=>{if(!y.value)return;n.value=!0;const S={id:g.value.method,amount:g.value.amount,notes:g.value.notes};o("accepted",S),n.value=!1},q=()=>{g.value.amount=m.total,g.value.method="cash",g.value.notes=null};return(S,w)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":w[4]||(w[4]=z=>S.$emit("update:modelValue",z)),onBeforeShow:q},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>w[5]||(w[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[a(b)?(u(),h("div",Hp,[t("div",Kp,[v(r(a(b).code)+" ",1),w[6]||(w[6]=t("br",null,null,-1)),v(" "+r(a(b).name)+" ",1),w[7]||(w[7]=t("br",null,null,-1))])])):k("",!0),t("div",Yp," Total: Rp. "+r(a(H)(c.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":w[0]||(w[0]=z=>g.value.method=z),options:p.value,label:"Kas Tujuan",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":w[1]||(w[1]=z=>g.value.amount=z),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":f.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":w[2]||(w[2]=z=>g.value.notes=z),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Wp,[d.value>0?(u(),h("div",Qp," Sisa Refund: Rp. "+r(a(H)(d.value)),1)):(u(),h("div",Jp," Refund Lunas "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:w[3]||(w[3]=z=>S.$emit("update:modelValue",!1))}),e(D,{label:"Bayar",color:"positive",onClick:_,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Gp=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),Xp={class:"column"},Zp={class:"row"},ef={class:"full-width",style:{"border-collapse":"collapse"}},tf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},af={class:"row items-center q-gutter-x-sm"},lf={class:"text-weight-bold"},of={class:"row items-center q-gutter-x-sm q-mt-xs"},nf={class:"text-caption text-grey-6"},sf={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},rf={class:"text-caption text-grey-6"},df={class:"q-mt-xs"},uf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},mf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},cf={key:0},pf={class:"text-right q-pa-sm"},ff={class:"text-right q-pa-sm"},$o={__name:"RefundTab",props:{data:Object},setup(c){const s=c,m=Se(),o=T(!1),i=()=>{o.value=!0},n=Z(()=>s.data.grand_total-s.data.total_refunded),g=async p=>{const d={order_id:s.data.id,...p};m.loading.show({message:"Memproses pembayaran..."});try{const f=await Oe.post(route("admin.purchase-order-return.add-refund"),d);m.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(f){let y="Gagal memproses refund.";f.response&&f.response.data&&f.response.data.message?y=f.response.data.message:f.message&&(y=f.message),m.notify({message:y,color:"negative",icon:"error"})}finally{m.loading.hide()}},b=p=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.purchase-order-return.delete-refund",{id:p.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(d){let f="Gagal menghapus refund pembayaran.";d.response&&d.response.data&&d.response.data.message?f=d.response.data.message:d.message&&(f=d.message),m.notify({message:f,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(p,d)=>(u(),h(G,null,[t("div",Xp,[e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("div",Zp,[p.$can("admin.purchase-order-return.add-refund")&&s.data.remaining_refund>0?(u(),I(D,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:d[0]||(d[0]=J(f=>i(),["stop"]))})):k("",!0)]),t("table",ef,[d[7]||(d[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(u(!0),h(G,null,Be(s.data.refunds,f=>(u(),h("tr",{key:f.id},[t("td",tf,[t("div",af,[e(R,{name:"tag",size:"xs",color:"grey-7"}),t("span",lf,r(f.code),1)]),t("div",of,[e(R,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",nf,r(a(ve)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(u(),h("div",sf,[e(R,{name:"wallet",size:"xs",color:"grey-7"}),t("span",rf,r(f.account.name),1)])):k("",!0),t("div",df,[e(bt,{label:p.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",uf,r(a(H)(f.amount)),1),t("td",mf,[p.$can("admin.purchase-order-return.delete-refund")?(u(),I(D,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(f)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(u(),h("tr",cf,d[2]||(d[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[d[3]||(d[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Direfund",-1)),t("th",pf,r(a(H)(s.data.total_refunded)),1),d[4]||(d[4]=t("th",null,null,-1))]),t("tr",null,[d[5]||(d[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Refund",-1)),t("th",ff,r(a(H)(s.data.remaining_refund)),1),d[6]||(d[6]=t("td",null,null,-1))])])])]),_:1})]),e(ho,{modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=f=>o.value=f),total:n.value,supplier:s.data.supplier,onAccepted:g},null,8,["modelValue","total","supplier"])],64))}},gf=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),bf={class:"q-gutter-sm"},vf={class:"col col-lg-6 q-pa-xs",align:"center"},hl="Retur Pembelian",yf={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=ge(),o=m.props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"main-info");he(()=>{it(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.purchase-order-return.print",{id:m.props.data.id,size:p}),"_self")};return(p,d)=>{const f=X("i-head"),y=X("authenticated-layout");return u(),h(G,null,[e(f,{title:hl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(hl))])]),"left-button":l(()=>[t("div",bf,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=_=>p.$goBack())})])]),"right-button":l(()=>[e(D,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:d[1]||(d[1]=_=>b("58mm"))}),e(D,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:d[2]||(d[2]=_=>b("a4"))}),i.value?k("",!0):(u(),I(D,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:d[3]||(d[3]=_=>a(ee).get(p.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",vf,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Pt,{modelValue:g.value,"onUpdate:modelValue":d[4]||(d[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(u(),I(dt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Rt,{modelValue:g.value,"onUpdate:modelValue":d[5]||(d[5]=_=>g.value=_),animated:""},{default:l(()=>[e(ut,{name:"main-info",class:"q-pa-none"},{default:l(()=>[e(wo,{data:a(o)},null,8,["data"])]),_:1}),e(ut,{name:"refund",class:"q-pa-none"},{default:l(()=>[e($o,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},_f=Object.freeze(Object.defineProperty({__proto__:null,default:yf},Symbol.toStringTag,{value:"Module"})),kf={class:"text-weight-medium wrap-column"},wf={class:"text-caption text-grey-6 elipsis"},hf={class:"column items-end"},$f={class:"text-caption text-grey-6 text-italic"},xo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=Se(),m=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(u(),I(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ke({height:a(m)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(u(!0),h(G,null,Be(g.cols,b=>(u(),I(Zt,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left"},{default:l(()=>[t("div",kf,r(g.row.product_name),1),t("div",wf,r(g.row.product_barcode),1),g.row.notes?(u(),I($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal",props:g,class:"text-right"},{default:l(()=>[t("div",hf,[t("div",null,r(a(H)(g.row.subtotal_cost)),1),t("div",$f,r(a(H)(g.row.quantity))+" x Rp. "+r(a(H)(g.row.cost)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(D,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(D,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},xf=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),Sf={class:"row items-center no-wrap"},Vf={class:"col-auto"},So={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},g=Z(()=>o.item.quantity*o.item.cost),b=y=>{y.stopPropagation(),y.preventDefault()},p=y=>{o.modelValue&&(y.key==="Enter"?(n(),b(y)):y.key==="Escape"&&(i("update:modelValue",!1),b(y)))};he(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item});const f=()=>{};return(y,_)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":_[6]||(_[6]=q=>y.$emit("update:modelValue",q)),onBeforeShow:f},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Sf,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Vf,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=q=>y.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:c.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=q=>c.item.product_name=q),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=q=>c.item.quantity=q),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.cost,"onUpdate:modelValue":_[3]||(_[3]=q=>c.item.cost=q),label:"Modal / Harga Beli","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=q=>g.value=q),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:c.item.notes,"onUpdate:modelValue":_[5]||(_[5]=q=>c.item.notes=q),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(D,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),te(e(D,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},qf=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"}));function Cf(){const c=T(new Date);let s=null;const m=()=>{c.value=new Date};return he(()=>{s=setInterval(m,1e3)}),wt(()=>{s&&clearInterval(s)}),{currentDateTime:c}}const Tf={class:"text-grey-8"},_a={__name:"DigitalClock",setup(c){const{currentDateTime:s}=Cf();return(m,o)=>(u(),h("div",Tf,r(a(ve)(a(s))),1))}},Pf={key:0,class:"q-select__selected-item"},Vo={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(c,{expose:s,emit:m}){const o=T(null),i=c,n=m,g=T([]);let b=null;const p=T(i.modelValue);he(()=>{i.initialData&&(p.value=i.initialData)}),Me(p,y=>{n("update:modelValue",y),n("supplierSelected",y)}),Me(()=>i.modelValue,y=>{p.value=y}),s({focus:()=>{o.value&&o.value.focus()}});const f=(y,_)=>{if(y.length<i.minLength){_(()=>{g.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Oe.get(`/web-api/suppliers?q=${y}`).then(q=>{_(()=>{g.value=q.data.data})}).catch(q=>{console.error("Gagal mengambil data pemasok:",q),_(()=>{g.value=[]})})},100)};return(y,_)=>(u(),I(ce,{class:Ce(c.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=q=>p.value=q),"use-input":"","input-debounce":"0",label:c.label,options:g.value,onFilter:f,clearable:"",error:c.error,behavior:"menu","error-message":c.errorMessage,disable:c.disable,"hide-bottom-space":"",outlined:c.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(q=>[e(oe,Zl(eo(q.itemProps)),{default:l(()=>[e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[v(r(q.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(q=>[q.opt?(u(),h("div",Pf,r(q.opt.name),1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Rf={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[te(e(D,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},qo=kt(Rf,[["__scopeId","data-v-abc5074e"]]),Of=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"}));function ka(c){const s=T(!1),m=()=>{const n=c.value||document.documentElement;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},i=()=>{s.value?o():m()};return es(()=>{const n=()=>{s.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("mozfullscreenchange",n),document.removeEventListener("MSFullscreenChange",n)}}),{isFullscreen:s,requestFullscreen:m,exitFullscreen:o,toggleFullscreen:i}}const If={class:"row items-center no-wrap"},Uf={class:"col text-subtite text-bold text-grey-8"},Df={class:"col-auto"},Co={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},g=d=>{d.stopPropagation(),d.preventDefault()},b=d=>{o.modelValue&&(d.key==="Enter"?(n(),g(d)):d.key==="Escape"&&(i("update:modelValue",!1),g(d)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(d,f)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":f[4]||(f[4]=y=>d.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",If,[t("div",Uf," Edit "+r(c.data.code),1),t("div",Df,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=y=>d.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(Lt,{modelValue:c.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=y=>c.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":f[2]||(f[2]=y=>d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:c.data.notes,"onUpdate:modelValue":f[3]||(f[3]=y=>c.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(D,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),te(e(D,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ef=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),jf={class:"row items-center no-wrap"},Af={class:"col-auto"},Mf={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Nf={key:0},wa={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1},priceType:{type:String,require:!1,default:"price_1"}},emits:["update:modelValue","product-selected"],setup(c,{emit:s}){const m=Se(),o=c,i=T(!1),n=T(o.showCost),g=s,b=T(null),p=T([]),d=T(!0),f=T(-1),y=Ie({search:"",status:"active",...Fe()}),_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});[...tt(window.CONSTANTS.PRODUCT_PRICE_TYPES)];const q=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_1.replace("Harga ","H "),field:"price_1",align:"right"},{name:"price_2",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_2.replace("Harga ","H "),field:"price_2",align:"right"},{name:"price_3",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_3.replace("Harga ","H "),field:"price_3",align:"right"}],S=Z(()=>{if(i.value)return q;const B=q.filter(A=>A.name!=="cost");return m.screen.gt.sm?B:B.filter(A=>A.name==="name"||A.name==="stock")});he(()=>{z()});const w=()=>{if(b.value&&f.value!==-1){const B=(_.value.page-1)*_.value.rowsPerPage,A=f.value-B;it(()=>{if(A>=0&&A<p.value.length&&b.value.scrollTo){const x=b.value.$el.querySelector(".selected-row");x&&x.scrollIntoView({behavior:"smooth",block:"nearest"})}})}},z=()=>{o.modelValue!==!1&&Y()},Y=(B=null)=>{d.value=!0;const A=f.value;Le({pagination:_,filter:y,props:B,rows:p,url:route("admin.product.data"),loading:d,tableRef:b,onSuccess:()=>{p.value.length>0?((A===0||A===-1)&&(f.value=0),it(()=>{w()})):f.value=-1}})},C=()=>{z()},M=B=>{g("product-selected",B),setTimeout(()=>{g("update:modelValue",!1)},100)},O=B=>{if(!o.modelValue){alert("none");return}const A=p.value.length;if(A===0)return;const x=(_.value.page-1)*_.value.rowsPerPage,U=x+A-1;if(B.key==="ArrowDown")B.preventDefault(),f.value<U?(f.value=f.value+1,w()):f.value===U&&O({key:"ArrowRight",preventDefault:()=>{}});else if(B.key==="ArrowUp")B.preventDefault(),f.value>x?(f.value=f.value-1,w()):f.value===x&&x>0&&O({key:"ArrowLeft",preventDefault:()=>{}});else if(B.key==="Enter"&&f.value!==-1){B.preventDefault(),B.preventDefault();const P=(_.value.page-1)*_.value.rowsPerPage,$=f.value-P;$>=0&&$<A?M(p.value[$]):console.warn("Kesalahan: selectedIndex global di luar batas halaman saat ini.")}else if(f.value!==-1){if(B.key==="ArrowRight"){B.preventDefault();const P=_.value.page+1;P<=Math.ceil(_.value.rowsNumber/_.value.rowsPerPage)&&(_.value.page=P,f.value=(P-1)*_.value.rowsPerPage,b.value.requestServerInteraction())}else if(B.key==="ArrowLeft"){B.preventDefault();const P=_.value.page-1;P>=1&&(_.value.page=P,f.value=(P-1)*_.value.rowsPerPage,b.value.requestServerInteraction())}}};return Me(()=>o.modelValue,(B,A)=>{A===!0&&B===!1&&(y.search=""),B===!0&&Y()}),(B,A)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":A[4]||(A[4]=x=>B.$emit("update:modelValue",x)),maximized:a(m).screen.lt.sm},{default:l(()=>[e(fe,{class:"column fit",tabindex:"0",onKeydown:O,ref:"cardRef"},{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",jf,[A[5]||(A[5]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",Af,[e(D,{flat:"",round:"",size:"sm",icon:"close",onClick:A[0]||(A[0]=x=>B.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:Ce(["q-py-sm",a(m).screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(ne,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":[A[1]||(A[1]=x=>y.search=x),C],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"]),n.value?(u(),I(na,{key:0,modelValue:i.value,"onUpdate:modelValue":A[2]||(A[2]=x=>i.value=x),label:"Tampilkan Modal",style:{"margin-left":"-10px"}},null,8,["modelValue"])):k("",!0)]),_:1},8,["class"]),e(le,{class:Ce(["q-py-xs col",a(m).screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(Ue,{ref_key:"tableRef",ref:b,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":A[3]||(A[3]=x=>_.value=x),filter:y.search,loading:d.value,columns:S.value,rows:p.value,"rows-per-page-options":[10,25,50],onRequest:Y,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":l(({icon:x,message:U,filter:P})=>[t("div",Mf,[t("span",null,r(U),1)])]),body:l(x=>[e(Pe,{tabindex:"0",props:x,class:Ce([{inactive:["stocked","raw_materials"].includes(x.row.type)&&x.row.stock==0,"selected-row":f.value===x.rowIndex},"cursor-pointer"]),onClick:U=>M(x.row),onKeydown:[Wt(J(U=>M(x.row),["prevent","stop"]),["enter"]),Wt(J(U=>M(x.row),["prevent"]),["space"])]},{default:l(()=>[e(W,{key:"name",props:x,class:"wrap-column"},{default:l(()=>[e($e,{text:x.row.name},null,8,["text"]),x.row.description?(u(),I($e,{key:0,text:x.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),a(m).screen.lt.md?(u(),h(G,{key:1},[t("div",null," Stok: "+r(x.row.type=="stocked"?a(H)(x.row.stock)+" "+x.row.uom:"-"),1),i.value?(u(),h("div",Nf," Modal: Rp. "+r(a(H)(x.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+r(a(H)(x.row.price_1)),1),t("div",null,"Harga 2: Rp. "+r(a(H)(x.row.price_1)),1),t("div",null,"Harga 3: Rp. "+r(a(H)(x.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"stock",props:x,class:"text-right"},{default:l(()=>[v(r(x.row.type=="stocked"?a(H)(x.row.stock)+" "+x.row.uom:"-"),1)]),_:2},1032,["props"]),e(W,{key:"cost",props:x,class:"wrap-column text-right"},{default:l(()=>[v(r(a(H)(x.row.cost)),1)]),_:2},1032,["props"]),e(W,{key:"price_1",props:x,class:"wrap-column text-right"},{default:l(()=>[v(r(a(H)(x.row.price_1)),1)]),_:2},1032,["props"]),e(W,{key:"price_2",props:x,class:"wrap-column text-right"},{default:l(()=>[v(r(a(H)(x.row.price_2)),1)]),_:2},1032,["props"]),e(W,{key:"price_3",props:x,class:"wrap-column text-right"},{default:l(()=>[v(r(a(H)(x.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},Bf={class:"q-gutter-sm"},zf={class:"row items-center"},Ff={class:"text-weight-bold"},Lf={class:"row q-col-gutter-none full-width"},Hf={class:"col-sm-6 col-12 col"},Kf={class:"row full-width"},Yf={key:0,class:"row"},Wf={class:"col-sm-6 col-12"},Qf={class:"row q-ml-sm items-end"},Jf={class:"row col grow"},Gf={class:"col-12 q-pa-sm column"},Xf={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},Zf={key:0,class:"col"},eg={class:"text-caption text-grey-6 q-mt-xs"},tg={key:0,class:"text-caption text-grey-8 q-mt-xs"},ag={class:"text-italic"},lg={key:1,class:"col"},og={class:"q-pa-sm q-pb-none text-grey-8"},ng={class:"col"},sg={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},rg={class:"text-h4 text-weight-bold"},ig={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},dg={class:"col q-py-sm"},ug={class:"q-py-sm"},mg={__name:"Editor",setup(c){const s=Se(),m=ge(),o=T(!0),i=T(null),n=T(null),g=T(null),b=T(!1),p=T(null),d=T(null),{isFullscreen:f,toggleFullscreen:y}=ka(d),_="Retur #"+m.props.data.code,q=T(m.props.data.supplier),S=T(""),w=T(!1),z=T(!1),Y=T(!1),C=T(!1),M=T(null),O=Ie({id:m.props.data.id,code:m.props.data.code,supplier_id:m.props.data.supplier_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),B=Z(()=>O.items.reduce((ue,L)=>ue+L.cost*L.quantity,0)),A=()=>{var ue;y(),f.value||(ue=p==null?void 0:p.value)==null||ue.hideDrawer()},x=ue=>isNaN(ue)||ue<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,U=ue=>isNaN(ue)||ue<0?(gt("Harga tidak valid.","top"),!1):!0,P=ue=>!ue||ue.length==0?(gt("Barcode tidak valid.","top"),!1):!0,$=ue=>{S.value.endsWith("*")?S.value+=ue.name:S.value=ue.name},E=async()=>{const ue=S.value.trim();if(ue.length===0){z.value=!0;return}const L=ue.split("*");let ye=1,se="",K=null;if(L.length===1)se=L[0];else if(L.length<=3)ye=parseInt(L[0]),se=L[1],L.length===3&&(K=parseFloat(L[2]));else{gt("Input tidak valid.","top");return}if(se.length===0){z.value=!0;return}!P(se)&&!x(ye)&&!U(K)||(w.value=!0,await Oe.post(route("admin.purchase-order-return.add-item"),{order_id:O.id,product_code:se,qty:ye,price:K,merge:o.value}).then(_e=>{const de=_e.data.data.item;let Q=-1;_e.data.data.mergeItem&&(Q=O.items.findIndex(Ve=>Ve.id===de.id)),Q===-1?O.items.push(de):O.items[Q]=de,S.value="",K!==null&&K!==parseFloat(de.price)&&gt("Harga tidak dapat diubah!","top")}).catch(_e=>{var de,Q;pt((Q=(de=_e.response)==null?void 0:de.data)==null?void 0:Q.message,"top"),console.error("Gagal mengambil data produk:",_e)}),w.value=!1,it(()=>{var _e;(_e=i.value)==null||_e.focus()}))},N=ue=>{M.value=Object.create(ue),Y.value=!0},V=ue=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ue.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{w.value=!0,Oe.post(route("admin.purchase-order-return.remove-item"),{id:ue.id}).then(()=>{const L=O.items.findIndex(ye=>ye.id===ue.id);L!==-1&&(O.items.splice(L,1)[0],ft("Item telah dihapus","top"))}).catch(L=>{var ye,se;pt(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{w.value=!1})})},j=()=>{w.value=!0;const ue=n.value.getCurrentItem(),L={id:ue.id,qty:ue.quantity,cost:ue.cost};ue.notes&&(L.notes=ue.notes),Oe.post(route("admin.purchase-order-return.update-item"),L).then(ye=>{const se=ye.data.data,K=O.items.findIndex(_e=>_e.id===se.id);K!==-1&&(O.items[K]=se,ft("Item telah diperbarui","top")),Y.value=!1}).catch(ye=>{var se,K;pt(((K=(se=ye==null?void 0:ye.response)==null?void 0:se.data)==null?void 0:K.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ye)}).finally(()=>{w.value=!1})};he(()=>{const ue=L=>{b.value||Y.value||z.value||C.value||(L.key==="F1"?(L.preventDefault(),b.value=!0):L.key==="F2"?(L.preventDefault(),g.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),re()):L.key==="F11"?(L.preventDefault(),A()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault())};document.addEventListener("keydown",ue),wt(()=>{document.removeEventListener("keydown",ue)}),it(()=>{var L;(L=p==null?void 0:p.value)==null||L.hideDrawer()})});const ae=async()=>{w.value=!0;const ue={id:O.id,supplier_id:O.supplier_id??null,datetime:Xt(O.datetime),notes:O.notes};await Oe.post(route("admin.purchase-order-return.update"),ue).then(L=>{const ye=L.data.data.id;O.supplier_id=ye.supplier_id}).catch(L=>{var ye,se;pt(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{w.value=!1})},re=ue=>{if(O.items.length===0){ft("Item masih kosong","top");return}$t.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{w.value=!0,Oe.post(route("admin.purchase-order-return.close",{id:O.id})).then(L=>{ft("Transaksi selesai"),ee.get(route("admin.purchase-order-return.detail",{id:O.id}))}).catch(L=>{var ye,se;pt((se=(ye=L.response)==null?void 0:ye.data)==null?void 0:se.message),console.error(L)}).finally(()=>{w.value=!1})})},me=()=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order-return.cancel",{id:O.id}),{id:O.id}).then(()=>{ft("Transaksi telah dibatalkan."),ee.visit(route("admin.purchase-order-return.detail",{id:O.id}))}).catch(ue=>{var ye,se;const L=((se=(ye=ue.response)==null?void 0:ye.data)==null?void 0:se.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(ue)})})},Re=()=>{window.open(route("admin.purchase-order-return.detail",{id:O.id})+"?preview=1","_blank")},Ge=Z(()=>q.value?q.value.wallet_balance>=B.value:!0);return(ue,L)=>{const ye=X("i-head"),se=X("authenticated-layout");return u(),h(G,null,[e(ye,{title:_}),e(se,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:l(()=>[v(r(_))]),"left-button":l(()=>[t("div",Bf,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=K=>a(ee).get(ue.route("admin.purchase-order-return.index")))})])]),"right-button":l(()=>[t("div",zf,[a(s).screen.gt.sm?(u(),h(G,{key:0},[t("div",Ff,r(a(m).props.auth.user.username),1),L[20]||(L[20]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(_a)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",Lf,[t("div",Hf,[t("div",Kf,[e(Vo,{ref_key:"supplierAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:q.value,"onUpdate:modelValue":L[2]||(L[2]=K=>q.value=K),label:"Pemasok",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),q.value?(u(),h("div",Yf,[t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",Ge.value?"text-green":"text-red"])}," Wallet: "+r(q.value?"Rp. "+a(H)(q.value?q.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",q.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(q.value?"Rp. "+a(H)(q.value?q.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",Wf,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:S.value,"onUpdate:modelValue":L[5]||(L[5]=K=>S.value=K),onKeyup:L[6]||(L[6]=Wt(J(K=>E(),["prevent"]),["enter"])),loading:w.value,disable:w.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(R,{name:"search",onClick:L[3]||(L[3]=K=>z.value=!0),class:"cursor-pointer"})]),append:l(()=>{var K;return[((K=S.value)==null?void 0:K.length)>0?(u(),I(R,{key:0,name:"send",onClick:L[4]||(L[4]=_e=>E()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",Qf,[e(Vt,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[7]||(L[7]=K=>o.value=K),label:"Gabungkan item",disable:w.value},null,8,["modelValue","disable"])])])]),t("div",Jf,[t("div",Gf,[e(xo,{items:O.items,onUpdateQuantity:L[8]||(L[8]=({id:K,value:_e})=>ue.updateQuantity(K,_e)),onRemoveItem:V,onEditItem:N,"is-processing":w.value},null,8,["items","is-processing"])])]),t("div",Xf,[a(s).screen.gt.sm?(u(),h("div",Zf,[t("div",eg,r(O.items.length)+" item(s) ",1),O.notes?(u(),h("div",tg,[L[21]||(L[21]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",ag,[e($e,{text:O.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(u(),h("div",lg,[t("div",og,[t("div",null,"Return #: "+r(O.code),1),t("div",null,"Order #: "+r(a(m).props.data.purchase_order.code),1),t("div",null,r(a(ve)(O.datetime)),1)])])):k("",!0),t("div",ng,[t("div",sg,[L[23]||(L[23]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",rg,[L[22]||(L[22]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(H)(B.value)),1)])])])]),t("div",ig,[t("div",dg,[e(D,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:L[9]||(L[9]=K=>re()),disable:!ue.$can("admin.purchase-order-return.close")||w.value||O.items.length===0||O.status!=="draft",loading:w.value},null,8,["disable","loading"])]),t("div",ug,[e(D,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[13]||(L[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[te((u(),I(oe,{clickable:"",onClick:L[10]||(L[10]=J(K=>C.value=!0,["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>L[24]||(L[24]=[v("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),te((u(),I(oe,{clickable:"",onClick:L[11]||(L[11]=J(K=>Re(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"preview"})]),_:1}),e(F,null,{default:l(()=>L[25]||(L[25]=[v("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),te((u(),I(oe,{clickable:"",onClick:L[12]||(L[12]=J(K=>me(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:l(()=>L[26]||(L[26]=[v(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(So,{ref_key:"itemEditorRef",ref:n,modelValue:Y.value,"onUpdate:modelValue":L[14]||(L[14]=K=>Y.value=K),item:M.value,onSave:L[15]||(L[15]=K=>j()),"is-processing":w.value},null,8,["modelValue","item","is-processing"]),e(wa,{modelValue:z.value,"onUpdate:modelValue":L[16]||(L[16]=K=>z.value=K),onProductSelected:$},null,8,["modelValue"]),e(Co,{modelValue:C.value,"onUpdate:modelValue":L[17]||(L[17]=K=>C.value=K),data:O,onSave:L[18]||(L[18]=K=>ae()),"is-processing":w.value},null,8,["modelValue","data","is-processing"]),e(qo,{modelValue:b.value,"onUpdate:modelValue":L[19]||(L[19]=K=>b.value=K)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},cg=Object.freeze(Object.defineProperty({__proto__:null,default:mg},Symbol.toStringTag,{value:"Module"})),pg={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},fg={class:"q-pa-xs"},gg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},bg={key:0},vg={key:1},yg={key:2},_g={key:3},kg={key:0},wg={key:0},hg={key:1},$g={class:"flex justify-end"},$l="Retur Pembelian",xg={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=zt(),d=Ft(),f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Ct(p-2,p-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Tt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES)],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES)],S=Ie({search:"",year:p,month:d,status:"all",refund_status:"all",...Fe()}),w=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),z=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{A()});const Y=P=>{if(P.status=="draft"){C(P);return}M(P)},C=P=>{ee.get(route("admin.purchase-order-return.edit",P.id))},M=P=>{ee.get(route("admin.purchase-order-return.detail",P.id))},O=P=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order-return.cancel",{id:P.id}),{id:P.id}).then($=>{const E=$.data.data,N=o.value.findIndex(V=>V.id===E.id);if(N===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[N].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var N,V;const E=((V=(N=$.response)==null?void 0:N.data)==null?void 0:V.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:E,color:"warning",position:"bottom"}),console.error($)})})},B=P=>lt({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.purchase-order-return.delete",P.id),fetchItemsCallback:A,loading:i}),A=(P=null)=>{Le({pagination:w,filter:S,props:P,rows:o,url:route("admin.purchase-order-return.data"),loading:i,tableRef:n})},x=()=>{A()},U=Z(()=>s.screen.gt.sm?z:z.filter(P=>P.name==="code"||P.name==="action"));return Me(()=>S.year,P=>{P===null&&(S.month=null)}),(P,$)=>{const E=X("i-head"),N=X("authenticated-layout");return u(),h(G,null,[e(E,{title:$l}),e(N,null,He({title:l(()=>[v(r($l))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=V=>m.value=!m.value)},null,8,["icon"]),P.$can("admin.purchase-order-return.edit")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=V=>a(ee).get(P.route("admin.purchase-order-return.add")))})):k("",!0)]),default:l(()=>[t("div",fg,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:w.value,"onUpdate:pagination":$[10]||($[10]=V=>w.value=V),filter:S.search,loading:i.value,columns:U.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:A,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:j,filter:ae})=>[t("div",gg,[t("span",null,r(j)+" "+r(ae?" with term "+ae:""),1)])]),body:l(V=>[e(Pe,{props:V,class:"cursor-pointer",onClick:J(j=>Y(V.row),["prevent"])},{default:l(()=>[e(W,{key:"code",props:V,class:"wrap-column"},{default:l(()=>{var j,ae,re;return[t("div",null,[e(R,{name:"tag"}),v(" "+r(V.row.code),1)]),t("div",null,[e(R,{class:"inline-icon",name:"calendar_today"}),v(r(a(ve)(V.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[V.row.cashier?(u(),h("div",bg,[e(R,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((j=V.row.cashier)==null?void 0:j.username),1)])):k("",!0),V.row.cashier_session?(u(),h("div",vg,[e(R,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((re=(ae=V.row.cashier_session)==null?void 0:ae.cashier_terminal)==null?void 0:re.name),1)])):k("",!0),V.row.supplier?(u(),h("div",yg,[e(R,{name:"person",class:"inline-icon"}),e(va,{href:P.route("admin.supplier.detail",{id:V.row.supplier.id}),onClick:$[7]||($[7]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(V.row.supplier.code)+" - "+r(V.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(H)(V.row.grand_total)),1),V.row.notes?(u(),h("div",_g,[e(R,{name:"notes"}),v(" "+r(V.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Bt,{status:V.row.status,statuses:P.$CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Bt,{status:V.row.refund_status,statuses:P.$CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(W,{key:"supplier_id",props:V},{default:l(()=>[V.row.supplier?(u(),h("div",kg,[t("div",null,[e(R,{name:"person",class:"inline-icon"}),v(" "+r(V.row.supplier_code)+" - "+r(V.row.supplier_name),1)]),V.row.supplier_phone?(u(),h("div",wg,[e(R,{name:"phone",class:"inline-icon"}),v(" "+r(V.row.supplier_phone),1)])):k("",!0),V.row.supplier_address?(u(),h("div",hg,[e(R,{name:"home_pin",class:"inline-icon"}),v(" "+r(V.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:V},{default:l(()=>[v(r(a(H)(V.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:V},{default:l(()=>[e($e,{text:V.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:V,onClick:$[9]||($[9]=J(()=>{},["stop"]))},{default:l(()=>[t("div",$g,[P.$can("admin.purchase-order-return.detail")||P.$can("admin.purchase-order-return.edit")||P.$can("admin.purchase-order-return.cancel")||P.$can("admin.purchase-order-return.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[V.row.status!="draft"&&P.$can("admin.purchase-order-return.detail")?te((u(),I(oe,{key:0,onClick:J(j=>M(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"visibility"})]),_:1}),e(F,null,{default:l(()=>$[11]||($[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),V.row.status=="draft"&&P.$can("admin.purchase-order-return.edit")?te((u(),I(oe,{key:1,onClick:J(j=>C(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>$[12]||($[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),V.row.status=="draft"&&P.$can("admin.purchase-order-return.cancel")?te((u(),I(oe,{key:2,onClick:J(j=>O(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"cancel"})]),_:1}),e(F,null,{default:l(()=>$[13]||($[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),P.$can("admin.purchase-order-return.delete")?te((u(),I(oe,{key:3,onClick:J(j=>B(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>$[14]||($[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",pg,[e(ce,{modelValue:S.year,"onUpdate:modelValue":[$[2]||($[2]=V=>S.year=V),x],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),S.year!="all"?(u(),I(ce,{key:0,modelValue:S.month,"onUpdate:modelValue":[$[3]||($[3]=V=>S.month=V),x],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:S.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:S.status,"onUpdate:modelValue":[$[4]||($[4]=V=>S.status=V),x],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:S.refund_status,"onUpdate:modelValue":[$[5]||($[5]=V=>S.refund_status=V),x],options:q,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:S.search,"onUpdate:modelValue":$[6]||($[6]=V=>S.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Sg=Object.freeze(Object.defineProperty({__proto__:null,default:xg},Symbol.toStringTag,{value:"Module"})),Vg={key:0,class:"text-center q-mb-md text-grey-8"},qg={class:"text-subtitle2 text-weight-medium"},Cg={class:"text-h5 text-center text-primary q-pb-md"},Tg={class:"q-mb-md flex flex-center"},Pg={key:1},Rg={class:"col-6"},Og={class:"col-6"},Ig={class:"row"},Ug={class:"text-center q-mt-md"},Dg={key:0,class:"text-h6 text-negative text-weight-bold"},Eg={key:1,class:"text-h6 text-green-8 text-weight-bold"},jg={key:2,class:"text-h6 text-positive text-weight-bold"},Ag={key:2},Mg={class:"text-h6 text-negative text-center"},Ng={key:3},Bg={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=T(!1),g=T("payment"),b=T(new Date),p=T(null),d=Ie([]),f=Z(()=>d.every(U=>U.id&&typeof U.amount=="number"&&U.amount>0)),y=Z(()=>i.props.accounts.map(U=>({label:U.name,value:U.id}))),_=Z(()=>d.reduce((U,P)=>U+(P.amount||0),0)),q=Z(()=>m.total-_.value),S=Z(()=>{if(!m.supplier)return!0;const U=d.find($=>$.id==="wallet");return(U?U.amount:0)<=m.supplier.balance}),w=new Date,z=rt.addToDate(new Date,{days:30}),Y=Z(()=>[U=>!!U||"Tanggal jatuh tempo harus diisi",U=>rt.isBetweenDates(U,w,z,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),C=Z(()=>{if(g.value==="debt")return!!m.supplier&&Y.value.every(E=>E(b.value)===!0);const U=d.some(E=>(E.amount||0)>0),P=d.every(E=>(E.amount||0)>=0),$=q.value<=0;return f.value&&U&&P&&$}),M=()=>{d.length<3&&d.push({id:null,amount:0})},O=U=>{if(d.length>1){const P=d.findIndex($=>$.id===U);P!==-1&&d.splice(P,1)}},B=U=>{g.value=U,b.value=new Date,d.splice(0,d.length),U==="payment"&&y.value.length>0&&(d.splice(0,d.length,{id:y.value[0].value,amount:m.total}),it(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},A=()=>{if(!C.value)return;n.value=!0;let U={total:m.total,is_debt:g.value==="debt"};if(g.value==="debt")U.due_date=rt.formatDate(b.value,"YYYY-MM-DD"),U.payments=[];else{const P=_.value,$=P>m.total?P-m.total:0,E=q.value>0?q.value:0;U.payments=d,U.remaining_debt=E,U.change=$}o("accepted",U),n.value=!1},x=()=>{if(y.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}B("payment")};return(U,P)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":P[3]||(P[3]=$=>U.$emit("update:modelValue",$)),onBeforeShow:x},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[c.supplier?(u(),h("div",Vg,[t("div",qg,[v(" Nama: "+r(c.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(a(H)(c.supplier.balance)),1)])])):k("",!0),t("div",Cg," Total: Rp. "+r(a(H)(c.total)),1),t("div",Tg,[e(a(Yt),{modelValue:g.value,"onUpdate:modelValue":[P[0]||(P[0]=$=>g.value=$),B],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="payment"?(u(),h("div",Pg,[(u(!0),h(G,null,Be(d,($,E)=>(u(),h("div",{key:E,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Rg,[e(a(ce),{modelValue:$.id,"onUpdate:modelValue":N=>$.id=N,options:y.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[N=>!!N||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Og,[e(Ee,{modelValue:$.amount,"onUpdate:modelValue":N=>$.amount=N,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!S.value,"error-message":S.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:E===0?"firstPaymentInputRef":null},He({_:2},[d.length>1?{name:"append",fn:l(()=>[e(R,{size:"xs",name:"close",class:"cursor-pointer",onClick:N=>O(E)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Ig,[e(D,{disable:!(d.length<3&&q.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:M,size:"sm"},null,8,["disable"])]),t("div",Ug,[q.value>0?(u(),h("div",Dg," Sisa Tagihan: Rp. "+r(a(H)(q.value)),1)):q.value<0?(u(),h("div",Eg," Kembalian: Rp. "+r(a(H)(Math.abs(q.value))),1)):(u(),h("div",jg," Tagihan Terbayar "))])])):g.value==="debt"&&c.supplier?(u(),h("div",Ag,[e(da,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=$=>b.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(w),"max-date":a(z),rules:Y.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Mg," Total Utang: Rp. "+r(a(H)(c.total)),1)])):g.value==="debt"&&!c.supplier?(u(),h("div",Ng,P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=$=>U.$emit("update:modelValue",!1))}),e(D,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:A,disable:n.value||!C.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},zg=Object.freeze(Object.defineProperty({__proto__:null,default:Bg},Symbol.toStringTag,{value:"Module"})),Fg={key:0},Lg={style:{float:"right"}},Hg={key:1},Kg={style:{float:"right"}},Yg={key:2},Wg={style:{float:"right"}},Qg={key:3},Jg={style:{float:"right"}},Gg={style:{float:"right"}},Xg={class:"q-gutter-sm"},Zg={class:"q-my-md"},e1={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(u(),h("tr",Fg,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Lg,r(a(H)(c.payment.total)),1)])]),c.payment.cash_amount?(u(),h("tr",Hg,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",Kg,r(a(H)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(u(),h("tr",Yg,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",Wg,r(a(H)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(u(),h("tr",Qg,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Jg,r(a(H)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Gg,r(a(H)(c.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",Xg,[e(D,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(D,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Zg,[e(D,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},t1=kt(e1,[["__scopeId","data-v-f0591c00"]]),a1=Object.freeze(Object.defineProperty({__proto__:null,default:t1},Symbol.toStringTag,{value:"Module"})),l1={class:"column"},o1={class:"bg-grey-2 q-pa-xs"},n1={class:"text-subtitle1 text-bold text-grey-10"},s1={class:"col-12 col-sm-6"},r1={class:"full-width"},i1={key:1},d1={key:0},u1={key:1},m1={class:"col-12 col-sm-6",align:"left"},c1={class:"full-width"};const p1={key:1},f1={class:"full-width",style:{"border-collapse":"collapse"}},g1={class:"q-pa-sm"},b1={class:"text-right q-pa-sm"},v1={class:"text-right q-pa-sm"},y1={class:"text-right q-pa-sm"},_1={key:0},k1={class:"col-12 col-sm-6"},w1={class:"text-body2 text-grey-7 text-italic"},h1={class:"col-12 col-sm-6"},$1={class:"row justify-end q-gutter-y-xs"},x1={class:"col-12 row justify-between"},S1={class:"text-subtitle2 text-bold"},To={__name:"InvoiceTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=X("i-link");return u(),h("div",l1,[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",o1,[t("div",n1," INVOICE #"+r(s.data.code),1)])]),_:1}),e(Ae),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",s1,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",r1,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(u(),I(i,{key:0,href:m.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:l(()=>[e(R,{class:"inline-icon",name:"person"}),v(" "+r(s.data.supplier_name),1)]),_:1},8,["href"])):(u(),h("div",i1,[e(R,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(u(),h("tr",d1,[t("td",null,[e(R,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(u(),h("tr",u1,[t("td",null,[e(R,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",m1,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",c1,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.$CONSTANTS.PURCHASE_ORDER_STATUSES[s.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)]),k("",!0),s.data.due_date?(u(),h("tr",p1,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(oa)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("table",f1,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(u(!0),h(G,null,Be(s.data.details,n=>(u(),h("tr",{key:n.id},[t("td",g1,[e(i,{href:m.route("admin.product.detail",{id:n.product_id})},{default:l(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",b1,r(n.quantity),1),t("td",null,r(n.product_uom),1),t("td",v1,r(a(H)(n.cost)),1),t("td",y1,r(a(H)(n.subtotal_cost)),1)]))),128)),s.data.details.length==0?(u(),h("tr",_1,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(le,{class:"row",align:"left"},{default:l(()=>[t("div",k1,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",w1,r(s.data.notes?s.data.notes:"-"),1)]),t("div",h1,[t("div",$1,[t("div",x1,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",S1,r(a(H)(s.data.grand_total)),1)])])])]),_:1})])}}},V1=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),q1={key:0,class:"text-center q-mb-md text-grey-8"},C1={class:"text-subtitle2 text-weight-medium"},T1={class:"text-h5 text-center text-primary q-pb-md"},P1={class:"text-center q-mt-md"},R1={key:0,class:"text-h6 text-negative text-weight-bold"},O1={key:1,class:"text-h6 text-green-8 text-weight-bold"},I1={key:2,class:"text-h6 text-positive text-weight-bold"},Po={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=T(!1),g=T({method:null,amount:m.total,notes:null}),b=i.props.data.supplier,p=Z(()=>[...i.props.accounts.map(w=>({label:w.type=="bank"?w.name+" - "+w.number:w.name,value:w.id}))]),d=Z(()=>m.total-(g.value.amount||0)),f=Z(()=>g.value.method&&typeof g.value.amount=="number"&&g.value.amount>0),y=Z(()=>g.value.method?(g.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),_=Z(()=>f.value&&y.value===null),q=()=>{if(!_.value)return;n.value=!0;const w={total_paid:g.value.amount,payments:[{id:g.value.method,amount:g.value.amount}],notes:g.value.notes,remaining_debt:Math.max(0,m.total-(g.value.amount||0))};o("accepted",w),n.value=!1},S=()=>{g.value.amount=m.total,g.value.method=null,g.value.notes=null};return(w,z)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":z[4]||(z[4]=Y=>w.$emit("update:modelValue",Y)),onBeforeShow:S},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>z[5]||(z[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[a(b)?(u(),h("div",q1,[t("div",C1,[v(r(a(b).name)+" ",1),z[6]||(z[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(H)(a(b).balance)),1)])])):k("",!0),t("div",T1," Total: Rp. "+r(a(H)(c.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":z[0]||(z[0]=Y=>g.value.method=Y),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value,rules:[Y=>!!Y||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":z[1]||(z[1]=Y=>g.value.amount=Y),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":y.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":z[2]||(z[2]=Y=>g.value.notes=Y),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",P1,[d.value>0?(u(),h("div",R1," Sisa Tagihan: Rp. "+r(a(H)(d.value)),1)):d.value<0?(u(),h("div",O1," Kembalian: Rp. "+r(a(H)(Math.abs(d.value))),1)):(u(),h("div",I1," Tagihan Terbayar "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:z[3]||(z[3]=Y=>w.$emit("update:modelValue",!1))}),e(D,{label:"Bayar",color:"positive",onClick:q,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},U1=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),D1={class:"column"},E1={class:"row"},j1={class:"full-width",style:{"border-collapse":"collapse"}},A1={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},M1={class:"row items-center q-gutter-x-sm"},N1={class:"text-weight-bold"},B1={class:"row items-center q-gutter-x-sm q-mt-xs"},z1={class:"text-caption text-grey-6"},F1={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},L1={class:"text-caption text-grey-6"},H1={class:"q-mt-xs"},K1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Y1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},W1={key:0},Q1={class:"text-right q-pa-sm"},J1={class:"text-right q-pa-sm"},Ro={__name:"PaymentTab",props:{data:Object},setup(c){const s=c,m=Z(()=>s.data.grand_total-s.data.total_paid),o=Se(),i=T(!1),n=()=>{i.value=!0},g=async p=>{const d={order_id:s.data.id,payments:p.payments,notes:p.notes};o.loading.show({message:"Memproses pembayaran..."});try{const f=await Oe.post(route("admin.purchase-order.add-payment"),d);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),i.value=!1,ee.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(f){let y="Gagal memproses pembayaran.";f.response&&f.response.data&&f.response.data.message?y=f.response.data.message:f.message&&(y=f.message),o.notify({message:y,color:"negative",icon:"error"})}finally{o.loading.hide()}},b=p=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.purchase-order.delete-payment",{id:p.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(d){let f="Gagal menghapus pembayaran.";d.response&&d.response.data&&d.response.data.message?f=d.response.data.message:d.message&&(f=d.message),o.notify({message:f,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(p,d)=>(u(),h(G,null,[t("div",D1,[e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("div",E1,[p.$can("admin.purchase-order.add-payment")&&m.value>0?(u(),I(D,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:d[0]||(d[0]=J(f=>n(),["stop"]))})):k("",!0)]),t("table",j1,[d[7]||(d[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(u(!0),h(G,null,Be(s.data.payments,f=>(u(),h("tr",{key:f.id},[t("td",A1,[t("div",M1,[e(R,{name:"tag",size:"xs",color:"grey-7"}),t("span",N1,r(f.code),1)]),t("div",B1,[e(R,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",z1,r(a(ve)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(u(),h("div",F1,[e(R,{name:"wallet",size:"xs",color:"grey-7"}),t("span",L1,r(f.account.name),1)])):k("",!0),t("div",H1,[e(bt,{label:p.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",K1,r(a(H)(f.amount)),1),t("td",Y1,[p.$can("admin.purchase-order.delete-payment")&&s.data.supplier_id?(u(),I(D,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(f)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(u(),h("tr",W1,d[2]||(d[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[d[3]||(d[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",Q1,r(a(H)(s.data.total_paid)),1),d[4]||(d[4]=t("th",null,null,-1))]),t("tr",null,[d[5]||(d[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Tagihan",-1)),t("th",J1,r(a(H)(m.value)),1),d[6]||(d[6]=t("td",null,null,-1))])])])]),_:1})]),e(Po,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=f=>i.value=f),total:m.value,customer:s.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},G1=Object.freeze(Object.defineProperty({__proto__:null,default:Ro},Symbol.toStringTag,{value:"Module"})),X1={class:"q-gutter-sm"},Z1={class:"col col-lg-6 q-pa-xs",align:"center"},xl="Rincian Pembelian",eb={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),o=ge().props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"invoice"),b=()=>{window.print()};return(p,d)=>{const f=X("i-head"),y=X("authenticated-layout");return u(),h(G,null,[e(f,{title:xl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(xl))])]),"left-button":l(()=>[t("div",X1,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=_=>p.$goBack())})])]),"right-button":l(()=>[e(D,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:d[1]||(d[1]=_=>b())}),i.value?k("",!0):(u(),I(D,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:d[2]||(d[2]=_=>a(ee).get(p.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Z1,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Pt,{modelValue:g.value,"onUpdate:modelValue":d[3]||(d[3]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(u(),I(dt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Rt,{modelValue:g.value,"onUpdate:modelValue":d[4]||(d[4]=_=>g.value=_),animated:""},{default:l(()=>[e(ut,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(To,{data:a(o)},null,8,["data"])]),_:1}),e(ut,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(Ro,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},tb=kt(eb,[["__scopeId","data-v-ef1ae89c"]]),ab=Object.freeze(Object.defineProperty({__proto__:null,default:tb},Symbol.toStringTag,{value:"Module"})),lb={class:"text-weight-medium wrap-column"},ob={class:"text-caption text-grey-6 elipsis"},nb={class:"column items-end"},sb={class:"text-caption text-grey-6 text-italic"},Oo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=Se(),m=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(u(),I(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ke({height:a(m)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(u(!0),h(G,null,Be(g.cols,b=>(u(),I(Zt,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left"},{default:l(()=>[t("div",lb,r(g.row.product_name),1),t("div",ob,r(g.row.product_barcode),1),g.row.notes?(u(),I($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal",props:g,class:"text-right"},{default:l(()=>[t("div",nb,[t("div",null,r(a(H)(g.row.subtotal_cost)),1),t("div",sb,r(a(H)(g.row.quantity))+" x Rp. "+r(a(H)(g.row.cost)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(D,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(D,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},rb=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),ib={key:0,class:"text-center q-mb-md text-grey-8"},db={class:"text-subtitle2 text-weight-medium"},ub={class:"text-h5 text-center text-primary q-pb-md"},mb={class:"q-mb-md flex flex-center"},cb={key:1},pb={class:"col-6"},fb={class:"col-6"},gb={class:"row"},bb={class:"text-center q-mt-md"},vb={key:0,class:"text-h6 text-negative text-weight-bold"},yb={key:1,class:"text-h6 text-green-8 text-weight-bold"},_b={key:2,class:"text-h6 text-positive text-weight-bold"},kb={key:2},wb={class:"text-h6 text-negative text-center"},hb={key:3},Io={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=T(!1),g=T("payment"),b=T(new Date),p=T(null),d=Ie([]),f=Z(()=>d.every(U=>U.id&&typeof U.amount=="number"&&U.amount>0)),y=Z(()=>i.props.accounts.map(U=>({label:U.name,value:U.id}))),_=Z(()=>d.reduce((U,P)=>U+(P.amount||0),0)),q=Z(()=>m.total-_.value),S=Z(()=>{if(!m.supplier)return!0;const U=d.find($=>$.id==="wallet");return(U?U.amount:0)<=m.supplier.balance}),w=new Date,z=rt.addToDate(new Date,{days:30}),Y=Z(()=>[U=>!!U||"Tanggal jatuh tempo harus diisi",U=>rt.isBetweenDates(U,w,z,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),C=Z(()=>{if(g.value==="debt")return!!m.supplier&&Y.value.every(E=>E(b.value)===!0);const U=d.some(E=>(E.amount||0)>0),P=d.every(E=>(E.amount||0)>=0),$=q.value<=0;return f.value&&U&&P&&$}),M=()=>{d.length<3&&d.push({id:null,amount:0})},O=U=>{if(d.length>1){const P=d.findIndex($=>$.id===U);P!==-1&&d.splice(P,1)}},B=U=>{g.value=U,b.value=new Date,d.splice(0,d.length),U==="payment"&&y.value.length>0&&(d.splice(0,d.length,{id:y.value[0].value,amount:m.total}),it(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},A=()=>{if(!C.value)return;n.value=!0;let U={total:m.total,is_debt:g.value==="debt"};if(g.value==="debt")U.due_date=rt.formatDate(b.value,"YYYY-MM-DD"),U.payments=[];else{const P=_.value,$=P>m.total?P-m.total:0,E=q.value>0?q.value:0;U.payments=d,U.remaining_debt=E,U.change=$}o("accepted",U),n.value=!1},x=()=>{if(y.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}B("payment")};return(U,P)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":P[3]||(P[3]=$=>U.$emit("update:modelValue",$)),onBeforeShow:x},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[c.supplier?(u(),h("div",ib,[t("div",db,[v(" Nama: "+r(c.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(a(H)(c.supplier.balance)),1)])])):k("",!0),t("div",ub," Total: Rp. "+r(a(H)(c.total)),1),t("div",mb,[e(a(Yt),{modelValue:g.value,"onUpdate:modelValue":[P[0]||(P[0]=$=>g.value=$),B],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="payment"?(u(),h("div",cb,[(u(!0),h(G,null,Be(d,($,E)=>(u(),h("div",{key:E,class:"row q-col-gutter-sm q-mb-sm"},[t("div",pb,[e(a(ce),{modelValue:$.id,"onUpdate:modelValue":N=>$.id=N,options:y.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[N=>!!N||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",fb,[e(Ee,{modelValue:$.amount,"onUpdate:modelValue":N=>$.amount=N,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!S.value,"error-message":S.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:E===0?"firstPaymentInputRef":null},He({_:2},[d.length>1?{name:"append",fn:l(()=>[e(R,{size:"xs",name:"close",class:"cursor-pointer",onClick:N=>O(E)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",gb,[e(D,{disable:!(d.length<3&&q.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:M,size:"sm"},null,8,["disable"])]),t("div",bb,[q.value>0?(u(),h("div",vb," Sisa Tagihan: Rp. "+r(a(H)(q.value)),1)):q.value<0?(u(),h("div",yb," Kembalian: Rp. "+r(a(H)(Math.abs(q.value))),1)):(u(),h("div",_b," Tagihan Terbayar "))])])):g.value==="debt"&&c.supplier?(u(),h("div",kb,[e(da,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=$=>b.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(w),"max-date":a(z),rules:Y.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",wb," Total Utang: Rp. "+r(a(H)(c.total)),1)])):g.value==="debt"&&!c.supplier?(u(),h("div",hb,P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=$=>U.$emit("update:modelValue",!1))}),e(D,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:A,disable:n.value||!C.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$b=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"})),xb={class:"row items-center no-wrap"},Sb={class:"col-auto"},Uo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},g=Z(()=>o.item.quantity*o.item.cost),b=y=>{y.stopPropagation(),y.preventDefault()},p=y=>{o.modelValue&&(y.key==="Enter"?(n(),b(y)):y.key==="Escape"&&(i("update:modelValue",!1),b(y)))};he(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item});const f=()=>{};return(y,_)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":_[6]||(_[6]=q=>y.$emit("update:modelValue",q)),onBeforeShow:f},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",xb,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Sb,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=q=>y.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:c.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=q=>c.item.product_name=q),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=q=>c.item.quantity=q),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.cost,"onUpdate:modelValue":_[3]||(_[3]=q=>c.item.cost=q),label:"Modal / Harga Beli","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=q=>g.value=q),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:c.item.notes,"onUpdate:modelValue":_[5]||(_[5]=q=>c.item.notes=q),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(D,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),te(e(D,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Vb=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),qb={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[te(e(D,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Do=kt(qb,[["__scopeId","data-v-a7905738"]]),Cb=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),Tb={class:"row items-center no-wrap"},Pb={class:"col text-subtite text-bold text-grey-8"},Rb={class:"col-auto"},Eo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},g=d=>{d.stopPropagation(),d.preventDefault()},b=d=>{o.modelValue&&(d.key==="Enter"?(n(),g(d)):d.key==="Escape"&&(i("update:modelValue",!1),g(d)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(d,f)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":f[4]||(f[4]=y=>d.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Tb,[t("div",Pb," Edit "+r(c.data.code),1),t("div",Rb,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=y=>d.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(Lt,{modelValue:c.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=y=>c.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":f[2]||(f[2]=y=>d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:c.data.notes,"onUpdate:modelValue":f[3]||(f[3]=y=>c.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(D,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),te(e(D,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ob=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Ib={key:0},Ub={style:{float:"right"}},Db={key:1},Eb={style:{float:"right"}},jb={key:2},Ab={style:{float:"right"}},Mb={key:3},Nb={style:{float:"right"}},Bb={style:{float:"right"}},zb={class:"q-gutter-sm"},Fb={class:"q-my-md"},Lb={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(u(),h("tr",Ib,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Ub,r(a(H)(c.payment.total)),1)])]),c.payment.cash_amount?(u(),h("tr",Db,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",Eb,r(a(H)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(u(),h("tr",jb,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",Ab,r(a(H)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(u(),h("tr",Mb,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Nb,r(a(H)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Bb,r(a(H)(c.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",zb,[e(D,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(D,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Fb,[e(D,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},jo=kt(Lb,[["__scopeId","data-v-31d340fd"]]),Hb=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),Kb={class:"q-gutter-sm"},Yb={class:"row items-center"},Wb={class:"text-weight-bold"},Qb={class:"row q-col-gutter-none full-width"},Jb={class:"col-sm-6 col-12 col"},Gb={class:"row full-width"},Xb={class:"text-grey q-mt-xs q-ml-sm"},Zb={class:"col-sm-6 col-12"},ev={class:"row q-ml-sm items-end"},tv={class:"row col grow"},av={class:"col-12 q-pa-sm column"},lv={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},ov={key:0,class:"col"},nv={class:"text-caption text-grey-6 q-mt-xs"},sv={key:0,class:"text-caption text-grey-8 q-mt-xs"},rv={class:"text-italic"},iv={key:1,class:"col"},dv={class:"q-pa-sm q-pb-none text-grey-8"},uv={class:"col"},mv={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},cv={class:"text-h4 text-weight-bold"},pv={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},fv={class:"col q-py-sm"},gv={class:"q-py-sm"},bv={__name:"Editor",setup(c){const s=Se(),m=ge(),o=T(!0),i=T(null),n=T(null),g=T(null),b=T(!1),p=T(null),d=T(null),{isFullscreen:f,toggleFullscreen:y}=ka(d),_=m.props.data.code,q=T(m.props.data.supplier),S=T(null),w=T(""),z=T(!1),Y=T(!1),C=T(!1),M=T(!1),O=T(!1),B=T(!1),A=T(null),x=Ie({id:m.props.data.id,code:m.props.data.code,supplier_id:m.props.data.supplier_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),U=Z(()=>x.items.reduce((se,K)=>se+K.cost*K.quantity,0)),P=()=>{var se;y(),f.value||(se=p==null?void 0:p.value)==null||se.hideDrawer()},$=se=>isNaN(se)||se<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,E=se=>isNaN(se)||se<0?(gt("Harga tidak valid.","top"),!1):!0,N=se=>!se||se.length==0?(gt("Barcode tidak valid.","top"),!1):!0,V=se=>{w.value.endsWith("*")?w.value+=se.name:w.value=se.name},j=async()=>{const se=w.value.trim();if(se.length===0){C.value=!0;return}const K=se.split("*");let _e=1,de="",Q=null;if(K.length===1)de=K[0];else if(K.length<=3)_e=parseInt(K[0]),de=K[1],K.length===3&&(Q=parseFloat(K[2]));else{gt("Input tidak valid.","top");return}if(de.length===0){C.value=!0;return}!N(de)&&!$(_e)&&!E(Q)||(z.value=!0,await Oe.post(route("admin.purchase-order.add-item"),{order_id:x.id,product_code:de,qty:_e,cost:Q,merge:o.value}).then(Ve=>{const je=Ve.data.data.item;let ke=-1;Ve.data.data.mergeItem&&(ke=x.items.findIndex(ht=>ht.id===je.id)),ke===-1?x.items.push(je):x.items[ke]=je,w.value="",Q!==null&&Q!==parseFloat(je.cost)&&gt("Harga tidak dapat diubah!","top")}).catch(Ve=>{var je,ke;pt((ke=(je=Ve.response)==null?void 0:je.data)==null?void 0:ke.message,"top"),console.error("Gagal mengambil data produk:",Ve)}),z.value=!1,it(()=>{var Ve;(Ve=i.value)==null||Ve.focus()}))},ae=se=>{A.value=Object.create(se),M.value=!0},re=se=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${se.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{z.value=!0,Oe.post(route("admin.purchase-order.remove-item"),{id:se.id}).then(()=>{const K=x.items.findIndex(_e=>_e.id===se.id);K!==-1&&(x.items.splice(K,1)[0],ft("Item telah dihapus","top"))}).catch(K=>{var _e,de;pt(((de=(_e=K==null?void 0:K.response)==null?void 0:_e.data)==null?void 0:de.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(K)}).finally(()=>{z.value=!1})})},me=()=>{z.value=!0;const se=n.value.getCurrentItem(),K={id:se.id,qty:se.quantity,cost:se.cost};se.notes&&(K.notes=se.notes),Oe.post(route("admin.purchase-order.update-item"),K).then(_e=>{const de=_e.data.data,Q=x.items.findIndex(Ve=>Ve.id===de.id);Q!==-1&&(x.items[Q]=de,ft("Item telah diperbarui","top"))}).catch(_e=>{var de,Q;pt(((Q=(de=_e==null?void 0:_e.response)==null?void 0:de.data)==null?void 0:Q.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(_e)}).finally(()=>{z.value=!1})};he(()=>{const se=K=>{K.key==="F1"?(K.preventDefault(),b.value=!0):K.key==="F2"?(K.preventDefault(),g.value.focus()):K.key==="F3"?(K.preventDefault(),i.value.focus()):K.key==="F4"?(K.preventDefault(),o.value=!o.value):K.key==="F10"?(K.preventDefault(),Y.value=!0):K.key==="F11"?(K.preventDefault(),P()):(K.key==="F5"||K.key==="F6"||K.key==="F7"||K.key==="F12")&&K.preventDefault()};document.addEventListener("keydown",se),wt(()=>{document.removeEventListener("keydown",se)}),it(()=>{var K;(K=p==null?void 0:p.value)==null||K.hideDrawer()})});const Re=async se=>{q.value=se,x.supplier_id=se==null?void 0:se.id,await Ge(),se!=null&&se.id?i.value.focus():g.value.focus()},Ge=async()=>{z.value=!0;const se={id:x.id,supplier_id:x.supplier_id,datetime:Xt(x.datetime),notes:x.notes};await Oe.post(route("admin.purchase-order.update"),se).then(K=>{const _e=K.data.data.id;x.supplier_id=_e.supplier_id}).catch(K=>{var _e,de;pt(((de=(_e=K==null?void 0:K.response)==null?void 0:_e.data)==null?void 0:de.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(K)}).finally(()=>{z.value=!1})},ue=se=>{if(x.items.length===0){ft("Item masih kosong","top");return}const K={id:x.id,...se};z.value=!0,Oe.post(route("admin.purchase-order.close"),K).then(_e=>{ft("Transaksi selesai"),ee.visit(route("admin.purchase-order.detail",{id:x.id}))}).catch(_e=>{var de,Q;pt((Q=(de=_e.response)==null?void 0:de.data)==null?void 0:Q.message),console.error(_e)}).finally(()=>{z.value=!1})},L=()=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${x.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order.cancel",{id:x.id}),{id:x.id}).then(()=>{ft("Transaksi telah dibatalkan."),ee.visit(route("admin.purchase-order.detail",{id:x.id}))}).catch(se=>{var _e,de;const K=((de=(_e=se.response)==null?void 0:_e.data)==null?void 0:de.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:K,color:"warning",position:"bottom"}),console.error(se)})})},ye=()=>{window.open(route("admin.purchase-order.detail",{id:x.id})+"?preview=1","_blank")};return(se,K)=>{const _e=X("i-head"),de=X("authenticated-layout");return u(),h(G,null,[e(_e,{title:a(_)},null,8,["title"]),e(de,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:l(()=>[v(r(a(_)),1)]),"left-button":l(()=>[t("div",Kb,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:K[0]||(K[0]=Q=>a(ee).get(se.route("admin.purchase-order.index")))})])]),"right-button":l(()=>[t("div",Yb,[a(s).screen.gt.sm?(u(),h(G,{key:0},[t("div",Wb,r(a(m).props.auth.user.username),1),K[22]||(K[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(_a)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",Qb,[t("div",Jb,[t("div",Gb,[e(Vo,{ref_key:"supplierAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:q.value,"onUpdate:modelValue":K[2]||(K[2]=Q=>q.value=Q),label:"Pemasok",disable:z.value,onSupplierSelected:Re,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",Xb," Saldo: "+r(q.value?"Rp. "+a(H)(q.value?q.value.balance:0):"Tidak tersedia"),1)])]),t("div",Zb,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:w.value,"onUpdate:modelValue":K[5]||(K[5]=Q=>w.value=Q),onKeyup:K[6]||(K[6]=Wt(J(Q=>j(),["prevent"]),["enter"])),loading:z.value,disable:z.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(R,{name:"search",onClick:K[3]||(K[3]=Q=>C.value=!0),class:"cursor-pointer"})]),append:l(()=>{var Q;return[((Q=w.value)==null?void 0:Q.length)>0?(u(),I(R,{key:0,name:"send",onClick:K[4]||(K[4]=Ve=>j()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",ev,[e(Vt,{class:"col",modelValue:o.value,"onUpdate:modelValue":K[7]||(K[7]=Q=>o.value=Q),label:"Gabungkan item",disable:z.value},null,8,["modelValue","disable"])])])]),t("div",tv,[t("div",av,[e(Oo,{items:x.items,onUpdateQuantity:K[8]||(K[8]=({id:Q,value:Ve})=>se.updateQuantity(Q,Ve)),onRemoveItem:re,onEditItem:ae,"is-processing":z.value},null,8,["items","is-processing"])])]),t("div",lv,[a(s).screen.gt.sm?(u(),h("div",ov,[t("div",nv,r(x.items.length)+" item(s) ",1),x.notes?(u(),h("div",sv,[K[23]||(K[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",rv,[e($e,{text:x.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(u(),h("div",iv,[t("div",dv,[t("div",null,"#: "+r(x.code),1),t("div",null,r(a(ve)(x.datetime)),1)])])):k("",!0),t("div",uv,[t("div",mv,[K[25]||(K[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",cv,[K[24]||(K[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(H)(U.value)),1)])])])]),t("div",pv,[t("div",fv,[e(D,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:K[9]||(K[9]=Q=>Y.value=!0),disable:!se.$can("admin.purchase-order.close")||z.value||x.items.length===0||x.status!=="draft",loading:z.value},null,8,["disable","loading"])]),t("div",gv,[e(D,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:K[13]||(K[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[te((u(),I(oe,{clickable:"",onClick:K[10]||(K[10]=J(Q=>O.value=!0,["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>K[26]||(K[26]=[v("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),te((u(),I(oe,{clickable:"",onClick:K[11]||(K[11]=J(Q=>ye(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"preview"})]),_:1}),e(F,null,{default:l(()=>K[27]||(K[27]=[v("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),te((u(),I(oe,{clickable:"",onClick:K[12]||(K[12]=J(Q=>L(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:l(()=>K[28]||(K[28]=[v(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Uo,{ref_key:"itemEditorRef",ref:n,modelValue:M.value,"onUpdate:modelValue":K[14]||(K[14]=Q=>M.value=Q),item:A.value,onSave:K[15]||(K[15]=Q=>me()),"is-processing":z.value},null,8,["modelValue","item","is-processing"]),e(Io,{modelValue:Y.value,"onUpdate:modelValue":K[16]||(K[16]=Q=>Y.value=Q),onAccepted:ue,form:x,supplier:q.value,total:U.value,accounts:a(m).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(wa,{modelValue:C.value,"onUpdate:modelValue":K[17]||(K[17]=Q=>C.value=Q),"show-cost":!0,onProductSelected:V},null,8,["modelValue"]),e(Eo,{modelValue:O.value,"onUpdate:modelValue":K[18]||(K[18]=Q=>O.value=Q),data:x,onSave:K[19]||(K[19]=Q=>Ge()),"is-processing":z.value},null,8,["modelValue","data","is-processing"]),e(Do,{modelValue:b.value,"onUpdate:modelValue":K[20]||(K[20]=Q=>b.value=Q)},null,8,["modelValue"]),e(jo,{modelValue:B.value,"onUpdate:modelValue":K[21]||(K[21]=Q=>B.value=Q),order:x,supplier:q.value,total:U.value,payment:S.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},vv=Object.freeze(Object.defineProperty({__proto__:null,default:bv},Symbol.toStringTag,{value:"Module"})),yv={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.PURCHASE_ORDER_STATUSES,m={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(u(),I(Bt,{status:c.status,statuses:a(s),colors:m},null,8,["status","statuses"]))}},_v={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,m={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(u(),I(Bt,{status:c.status,statuses:a(s),colors:m},null,8,["status","statuses"]))}};const kv={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},wv={class:"q-pa-xs"},hv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},$v={key:0},xv={key:1},Sv={key:2},Vv={key:0},qv={key:0},Cv={key:1},Tv={key:0},Pv={class:"flex justify-end"},Sl="Pembelian",Rv={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=zt(),d=Ft(),f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Ct(p-2,p-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Tt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],S=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],w=Ie({search:"",year:p,month:d,status:"all",payment_status:"all",delivery_status:"all",...Fe()}),z=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{x()});const C=$=>{if($.status=="draft"){M($);return}O($)},M=$=>{ee.get(route("admin.purchase-order.edit",$.id))},O=$=>{ee.get(route("admin.purchase-order.detail",$.id))},B=$=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order.cancel",{id:$.id}),{id:$.id}).then(E=>{const N=E.data.data,V=o.value.findIndex(j=>j.id===N.id);if(V===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[V].status="canceled",s.notify({message:E.data.message,position:"bottom"})}).catch(E=>{var V,j;const N=((j=(V=E.response)==null?void 0:V.data)==null?void 0:j.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:N,color:"warning",position:"bottom"}),console.error(E)})})},A=$=>lt({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.purchase-order.delete",$.id),fetchItemsCallback:x,loading:i}),x=($=null)=>{Le({pagination:z,filter:w,props:$,rows:o,url:route("admin.purchase-order.data"),loading:i,tableRef:n})},U=()=>{x()},P=Z(()=>s.screen.gt.sm?Y:Y.filter($=>$.name==="id"||$.name==="action"));return Me(()=>w.year,$=>{$===null&&(w.month=null)}),($,E)=>{const N=X("i-head"),V=X("authenticated-layout");return u(),h(G,null,[e(N,{title:Sl}),e(V,null,He({title:l(()=>[v(r(Sl))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:E[0]||(E[0]=j=>m.value=!m.value)},null,8,["icon"]),$.$can("admin.purchase-order.edit")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:E[1]||(E[1]=j=>a(ee).get($.route("admin.purchase-order.add")))})):k("",!0)]),default:l(()=>[t("div",wv,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:z.value,"onUpdate:pagination":E[11]||(E[11]=j=>z.value=j),filter:w.search,loading:i.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:j,message:ae,filter:re})=>[t("div",hv,[t("span",null,r(ae)+" "+r(re?" with term "+re:""),1)])]),body:l(j=>[e(Pe,{props:j,class:"cursor-pointer",onClick:J(ae=>C(j.row),["prevent"])},{default:l(()=>[e(W,{key:"id",props:j,class:"wrap-column"},{default:l(()=>[t("div",null,[e(R,{name:"tag"}),v(" "+r(j.row.code),1)]),t("div",null,[e(R,{class:"inline-icon",name:"calendar_today"}),v(r(a(ve)(j.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[j.row.supplier?(u(),h("div",$v,[e(R,{name:"person",class:"inline-icon"}),e(va,{href:$.route("admin.supplier.detail",{id:j.row.supplier.id}),onClick:E[8]||(E[8]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(j.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Total: Rp. "+r(a(H)(j.row.grand_total)),1),j.row.remaining_debt>0?(u(),h("div",xv," Sisa Utang: Rp. "+r(a(H)(j.row.remaining_debt)),1)):k("",!0),j.row.notes?(u(),h("div",Sv,[e(R,{name:"notes"}),v(" "+r(j.row.notes),1)])):k("",!0)],64)),t("div",null,[e(yv,{status:j.row.status},null,8,["status"]),e(_v,{status:j.row.payment_status},null,8,["status"]),k("",!0)])]),_:2},1032,["props"]),e(W,{key:"supplier_id",props:j},{default:l(()=>[j.row.supplier?(u(),h("div",Vv,[t("div",null,[e(R,{name:"person",class:"inline-icon"}),v(" "+r(j.row.supplier_name),1)]),j.row.supplier_phone?(u(),h("div",qv,[e(R,{name:"phone",class:"inline-icon"}),v(" "+r(j.row.supplier_phone),1)])):k("",!0),j.row.supplier_address?(u(),h("div",Cv,[e(R,{name:"home_pin",class:"inline-icon"}),v(" "+r(j.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:j},{default:l(()=>[v(r(a(H)(j.row.grand_total))+" ",1),j.row.remaining_debt>0?(u(),h("div",Tv," Sisa Utang: Rp. "+r(a(H)(j.row.remaining_debt)),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"notes",props:j},{default:l(()=>[e($e,{text:j.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:j,onClick:E[10]||(E[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",Pv,[$.$can("admin.purchase-order.detail")||$.$can("admin.purchase-order.edit")||$.$can("admin.purchase-order.cancel")||$.$can("admin.purchase-order.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:E[9]||(E[9]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[j.row.status!="draft"&&$.$can("admin.purchase-order.detail")?te((u(),I(oe,{key:0,onClick:J(ae=>O(j.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"visibility"})]),_:1}),e(F,null,{default:l(()=>E[12]||(E[12]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),j.row.status=="draft"&&$.$can("admin.purchase-order.edit")?te((u(),I(oe,{key:1,onClick:J(ae=>M(j.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>E[13]||(E[13]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),j.row.status=="draft"&&$.$can("admin.purchase-order.cancel")?te((u(),I(oe,{key:2,onClick:J(ae=>B(j.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"cancel"})]),_:1}),e(F,null,{default:l(()=>E[14]||(E[14]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),$.$can("admin.purchase-order.delete")?te((u(),I(oe,{key:3,onClick:J(ae=>A(j.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>E[15]||(E[15]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",kv,[e(ce,{modelValue:w.year,"onUpdate:modelValue":[E[2]||(E[2]=j=>w.year=j),U],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(u(),I(ce,{key:0,modelValue:w.month,"onUpdate:modelValue":[E[3]||(E[3]=j=>w.month=j),U],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:w.status,"onUpdate:modelValue":[E[4]||(E[4]=j=>w.status=j),U],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:w.payment_status,"onUpdate:modelValue":[E[5]||(E[5]=j=>w.payment_status=j),U],options:q,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":E[7]||(E[7]=j=>w.search=j),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ov=Object.freeze(Object.defineProperty({__proto__:null,default:Rv},Symbol.toStringTag,{value:"Module"})),Iv={class:"q-gutter-sm"},Uv={class:"col col-md-6 q-pa-xs"},Vl="Tambah Retur Penjualan",Dv={__name:"Create",setup(c){const s=ge(),m=Qe({code:s.props.data.code}),o=()=>nt({form:m,url:route("admin.sales-order-return.add")});return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return u(),h(G,null,[e(g,{title:Vl}),e(b,null,{title:l(()=>[v(r(Vl))]),"left-button":l(()=>[t("div",Iv,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.sales-order-return.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Uv,[e(Je,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ne,{autofocus:"",modelValue:a(m).code,"onUpdate:modelValue":n[1]||(n[1]=p=>a(m).code=p),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!a(m).errors.code,disable:a(m).processing,"error-message":a(m).errors.code,rules:[p=>p&&p.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:a(m).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(m).processing,onClick:n[2]||(n[2]=p=>a(ee).get(i.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ev=Object.freeze(Object.defineProperty({__proto__:null,default:Dv},Symbol.toStringTag,{value:"Module"})),jv={class:"column"},Av={class:"bg-grey-2 q-pa-xs"},Mv={class:"text-subtitle1 text-bold text-grey-10"},Nv={class:"text-caption text-grey-8"},Bv={class:"col-12 col-sm-6"},zv={class:"full-width"},Fv={key:1},Lv={key:0},Hv={key:1},Kv={class:"col-12 col-sm-6",align:"left"},Yv={class:"full-width"},Wv={class:"full-width",style:{"border-collapse":"collapse"}},Qv={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Jv={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Gv={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Xv={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Zv={key:0},ey={class:"col-12 col-sm-6"},ty={class:"text-body2 text-grey-7 text-italic"},ay={class:"col-12 col-sm-6"},ly={class:"row justify-end q-gutter-y-xs"},oy={class:"col-12 row justify-between"},ny={class:"text-subtitle2 text-bold"},Ao={__name:"MainInfoTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=X("i-link");return u(),h("div",jv,[e(le,{class:"q-pa-none"},{default:l(()=>{var n,g;return[t("div",Av,[t("div",Mv," RETUR #"+r(s.data.code),1),t("div",Nv,[v(" Kasir: "+r((n=s.data.cashier)==null?void 0:n.username)+" - "+r((g=s.data.cashier)==null?void 0:g.name)+" | "+r(a(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(u(),h(G,{key:0},[v(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]}),_:1}),e(Ae),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",Bv,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",zv,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(u(),I(i,{key:0,href:m.route("admin.customer.detail",{id:s.data.customer_id})},{default:l(()=>[e(R,{class:"inline-icon",name:"person"}),v(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(u(),h("div",Fv,[e(R,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(u(),h("tr",Lv,[t("td",null,[e(R,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(u(),h("tr",Hv,[t("td",null,[e(R,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",Kv,[o[8]||(o[8]=t("div",{class:"text-subtitle2 text-bold text-grey-8"}," Info Retur Penjualan ",-1)),t("table",Yv,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("table",Wv,[o[10]||(o[10]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(u(!0),h(G,null,Be(s.data.details,n=>(u(),h("tr",{key:n.id},[t("td",Qv,[e(i,{href:m.route("admin.product.detail",n.product_id)},{default:l(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",Jv,r(a(H)(n.price)),1),t("td",Gv,r(n.quantity),1),t("td",Xv,r(a(H)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(u(),h("tr",Zv,o[9]||(o[9]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(le,{class:"row",align:"left"},{default:l(()=>[t("div",ey,[o[11]||(o[11]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",ty,r(s.data.notes?s.data.notes:"-"),1)]),t("div",ay,[t("div",ly,[t("div",oy,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",ny,r(a(H)(s.data.grand_total)),1)])])])]),_:1})])}}},sy=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),ry={key:0,class:"text-center q-mb-md text-grey-8"},iy={class:"text-subtitle2 text-weight-medium"},dy={class:"text-h5 text-center text-primary q-pb-md"},uy={class:"text-center q-mt-md"},my={key:0,class:"text-h6 text-negative text-weight-bold"},cy={key:1,class:"text-h6 text-positive text-weight-bold"},Mo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=T(!1),g=T({method:"cash",amount:m.total,notes:null}),b=i.props.data.customer,p=Z(()=>[...b?[{label:"Refund ke Wallet",value:"wallet"}]:[],{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(S=>({label:S.name,value:S.id}))]),d=Z(()=>m.total-(g.value.amount||0)),f=Z(()=>{const S=g.value.amount||0;return S<=0?"Jumlah pembayaran harus lebih dari 0.":S>m.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),y=Z(()=>f.value===null),_=()=>{if(!y.value)return;n.value=!0;const S={id:g.value.method,amount:g.value.amount,notes:g.value.notes};o("accepted",S),n.value=!1},q=()=>{g.value.amount=m.total,g.value.method="cash",g.value.notes=null};return(S,w)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":w[4]||(w[4]=z=>S.$emit("update:modelValue",z)),onBeforeShow:q},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>w[5]||(w[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[a(b)?(u(),h("div",ry,[t("div",iy,[v(r(a(b).code)+" ",1),w[6]||(w[6]=t("br",null,null,-1)),v(" "+r(a(b).name)+" ",1),w[7]||(w[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(H)(a(b).wallet_balance)),1)])])):k("",!0),t("div",dy," Total: Rp. "+r(a(H)(c.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":w[0]||(w[0]=z=>g.value.method=z),options:p.value,label:g.value.method=="wallet"?"Tujuan":"Sumber Dana",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","label","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":w[1]||(w[1]=z=>g.value.amount=z),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":f.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":w[2]||(w[2]=z=>g.value.notes=z),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",uy,[d.value>0?(u(),h("div",my," Sisa Refund: Rp. "+r(a(H)(d.value)),1)):(u(),h("div",cy," Refund Lunas "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:w[3]||(w[3]=z=>S.$emit("update:modelValue",!1))}),e(D,{label:"Bayar",color:"positive",onClick:_,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},py=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),fy={class:"column"},gy={class:"row"},by={class:"full-width",style:{"border-collapse":"collapse"}},vy={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},yy={class:"row items-center q-gutter-x-sm"},_y={class:"text-weight-bold"},ky={class:"row items-center q-gutter-x-sm q-mt-xs"},wy={class:"text-caption text-grey-6"},hy={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},$y={class:"text-caption text-grey-6"},xy={class:"q-mt-xs"},Sy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Vy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},qy={key:0},Cy={class:"text-right q-pa-sm"},Ty={class:"text-right q-pa-sm"},No={__name:"RefundTab",props:{data:Object},setup(c){const s=c;console.log(s.data);const m=Se(),o=T(!1),i=()=>{o.value=!0},n=Z(()=>s.data.grand_total-s.data.total_refunded),g=async p=>{const d={order_id:s.data.id,...p};m.loading.show({message:"Memproses pembayaran..."});try{const f=await Oe.post(route("admin.sales-order-return.add-refund"),d);m.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(f){let y="Gagal memproses refund.";f.response&&f.response.data&&f.response.data.message?y=f.response.data.message:f.message&&(y=f.message),m.notify({message:y,color:"negative",icon:"error"})}finally{m.loading.hide()}},b=p=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.sales-order-return.delete-refund",{id:p.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(d){let f="Gagal menghapus refund pembayaran.";d.response&&d.response.data&&d.response.data.message?f=d.response.data.message:d.message&&(f=d.message),m.notify({message:f,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(p,d)=>(u(),h(G,null,[t("div",fy,[e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("div",gy,[p.$can("admin.sales-order-return.add-refund")&&s.data.remaining_refund>0?(u(),I(D,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:d[0]||(d[0]=J(f=>i(),["stop"]))})):k("",!0)]),t("table",by,[d[7]||(d[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(u(!0),h(G,null,Be(s.data.refunds,f=>(u(),h("tr",{key:f.id},[t("td",vy,[t("div",yy,[e(R,{name:"tag",size:"xs",color:"grey-7"}),t("span",_y,r(f.code),1)]),t("div",ky,[e(R,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",wy,r(a(ve)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(u(),h("div",hy,[e(R,{name:"wallet",size:"xs",color:"grey-7"}),t("span",$y,r(f.account.name),1)])):k("",!0),t("div",xy,[e(bt,{label:p.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Sy,r(a(H)(f.amount)),1),t("td",Vy,[p.$can("admin.sales-order-return.delete-refund")?(u(),I(D,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(f)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(u(),h("tr",qy,d[2]||(d[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[d[3]||(d[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Direfund",-1)),t("th",Cy,r(a(H)(s.data.total_refunded)),1),d[4]||(d[4]=t("th",null,null,-1))]),t("tr",null,[d[5]||(d[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Refund",-1)),t("th",Ty,r(a(H)(s.data.remaining_refund)),1),d[6]||(d[6]=t("td",null,null,-1))])])])]),_:1})]),e(Mo,{modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=f=>o.value=f),total:n.value,customer:s.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},Py=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"})),Ry={class:"q-gutter-sm"},Oy={class:"col col-lg-6 q-pa-xs",align:"center"},ql="Retur Penjualan",Iy={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=ge(),o=m.props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"main-info");he(()=>{it(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.sales-order-return.print",{id:m.props.data.id,size:p}),"_self")};return(p,d)=>{const f=X("i-head"),y=X("authenticated-layout");return u(),h(G,null,[e(f,{title:ql}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(ql))])]),"left-button":l(()=>[t("div",Ry,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=_=>p.$goBack())})])]),"right-button":l(()=>[e(D,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:d[1]||(d[1]=_=>b("58mm"))}),e(D,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:d[2]||(d[2]=_=>b("a4"))}),i.value?k("",!0):(u(),I(D,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:d[3]||(d[3]=_=>a(ee).get(p.route("admin.sales-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Oy,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Pt,{modelValue:g.value,"onUpdate:modelValue":d[4]||(d[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(u(),I(dt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Rt,{modelValue:g.value,"onUpdate:modelValue":d[5]||(d[5]=_=>g.value=_),animated:""},{default:l(()=>[e(ut,{name:"main-info",class:"q-pa-none"},{default:l(()=>[e(Ao,{data:a(o)},null,8,["data"])]),_:1}),e(ut,{name:"refund",class:"q-pa-none"},{default:l(()=>[e(No,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Uy=Object.freeze(Object.defineProperty({__proto__:null,default:Iy},Symbol.toStringTag,{value:"Module"})),Dy={class:"text-weight-medium"},Ey={class:"text-caption text-grey-6 elipsis"},jy={class:"column items-end"},Ay={class:"text-caption text-grey-6 text-italic"},Bo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=Se(),m=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(u(),I(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ke({height:a(m)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(u(!0),h(G,null,Be(g.cols,b=>(u(),I(Zt,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left wrap-column"},{default:l(()=>[t("div",Dy,r(g.row.product_name),1),t("div",Ey,r(g.row.product_barcode),1),g.row.notes?(u(),I($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal_price",props:g,class:"text-right"},{default:l(()=>[t("div",jy,[t("div",null,r(a(H)(g.row.subtotal_price)),1),t("div",Ay,r(a(H)(g.row.quantity))+" x Rp. "+r(a(H)(g.row.price)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(D,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(D,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},My=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"})),Ny={class:"row items-center no-wrap"},By={class:"col-auto"},zo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},g=Z(()=>o.item.quantity*o.item.price),b=f=>{f.stopPropagation(),f.preventDefault()},p=f=>{o.modelValue&&(f.key==="Enter"?(n(),i("update:modelValue",!1),b(f)):f.key==="Escape"&&(i("update:modelValue",!1),b(f)))};return he(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item}),(f,y)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":y[6]||(y[6]=_=>f.$emit("update:modelValue",_))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Ny,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",By,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=_=>f.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:c.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=_=>c.item.product_name=_),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=_=>c.item.quantity=_),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.price,"onUpdate:modelValue":y[3]||(y[3]=_=>c.item.price=_),label:"Harga","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":y[4]||(y[4]=_=>g.value=_),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:c.item.notes,"onUpdate:modelValue":y[5]||(y[5]=_=>c.item.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(D,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),e(D,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},zy=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),Fy={key:0,class:"q-select__selected-item"},Fo={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(c,{expose:s,emit:m}){const o=T(null),i=c,n=m,g=T([]);let b=null;const p=T(i.modelValue);he(()=>{i.initialData&&(p.value=i.initialData)}),Me(p,y=>{n("update:modelValue",y),n("customerSelected",y)}),Me(()=>i.modelValue,y=>{p.value=y}),s({focus:()=>{o.value&&o.value.focus()}});const f=(y,_)=>{if(y.length<i.minLength){_(()=>{g.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Oe.get(`/web-api/customers?q=${y}`).then(q=>{_(()=>{g.value=q.data.data})}).catch(q=>{console.error("Gagal mengambil data pelanggan:",q),_(()=>{g.value=[]})})},500)};return(y,_)=>(u(),I(ce,{class:Ce(c.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=q=>p.value=q),"use-input":"","input-debounce":"0",label:c.label,options:g.value,onFilter:f,clearable:"",error:c.error,behavior:"menu","error-message":c.errorMessage,disable:c.disable,"hide-bottom-space":"",outlined:c.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(q=>[e(oe,Zl(eo(q.itemProps)),{default:l(()=>[e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[v(r(q.opt.name),1)]),_:2},1024),e(we,{caption:""},{default:l(()=>[e(R,{name:"person",size:"14px"}),v(" "+r(q.opt.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(q=>[q.opt?(u(),h("div",Fy,r(q.opt.name)+" ("+r(q.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Ly={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[te(e(D,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Lo=kt(Ly,[["__scopeId","data-v-22783525"]]),Hy=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),Ky={class:"row items-center no-wrap"},Yy={class:"col text-subtite text-bold text-grey-8"},Wy={class:"col-auto"},Ho={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},g=d=>{d.stopPropagation(),d.preventDefault()},b=d=>{o.modelValue&&(d.key==="Enter"?(n(),g(d)):d.key==="Escape"&&(i("update:modelValue",!1),g(d)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(d,f)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":f[4]||(f[4]=y=>d.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Ky,[t("div",Yy," Edit "+r(c.data.code),1),t("div",Wy,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=y=>d.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(Lt,{modelValue:c.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=y=>c.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":f[2]||(f[2]=y=>d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:c.data.notes,"onUpdate:modelValue":f[3]||(f[3]=y=>c.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(D,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),te(e(D,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Qy=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),Jy={class:"q-gutter-sm"},Gy={class:"row items-center"},Xy={class:"text-weight-bold"},Zy={class:"row q-col-gutter-none full-width"},e_={class:"col-sm-6 col-12 col"},t_={class:"row full-width"},a_={key:0,class:"row"},l_={class:"col-sm-6 col-12"},o_={class:"row q-ml-sm items-end"},n_={class:"row col grow"},s_={class:"col-12 q-pa-sm column"},r_={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},i_={key:0,class:"col"},d_={class:"text-caption text-grey-6 q-mt-xs"},u_={key:0,class:"text-caption text-grey-8 q-mt-xs"},m_={class:"text-italic"},c_={key:1,class:"col"},p_={class:"q-pa-sm q-pb-none text-grey-8"},f_={class:"col"},g_={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},b_={class:"text-h4 text-weight-bold"},v_={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},y_={class:"col q-py-sm"},__={class:"q-py-sm"},k_={__name:"Editor",setup(c){const s=Se(),m=ge(),o=T(!0),i=T(null),n=T(null),g=T(null),b=T(!1),p=T(null),d=T(null),{isFullscreen:f,toggleFullscreen:y}=ka(d),_="Retur #"+m.props.data.code,q=T(m.props.data.customer),S=T(""),w=T(!1),z=T(!1),Y=T(!1),C=T(!1),M=T(null),O=Ie({id:m.props.data.id,code:m.props.data.code,customer_id:m.props.data.customer_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),B=Z(()=>O.items.reduce((ue,L)=>ue+L.price*L.quantity,0)),A=()=>{var ue;y(),f.value||(ue=p==null?void 0:p.value)==null||ue.hideDrawer()},x=ue=>isNaN(ue)||ue<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,U=ue=>isNaN(ue)||ue<0?(gt("Harga tidak valid.","top"),!1):!0,P=ue=>!ue||ue.length==0?(gt("Barcode tidak valid.","top"),!1):!0,$=ue=>{S.value.endsWith("*")?S.value+=ue.name:S.value=ue.name},E=async()=>{const ue=S.value.trim();if(ue.length===0){z.value=!0;return}const L=ue.split("*");let ye=1,se="",K=null;if(L.length===1)se=L[0];else if(L.length<=3)ye=parseInt(L[0]),se=L[1],L.length===3&&(K=parseFloat(L[2]));else{gt("Input tidak valid.","top");return}if(se.length===0){z.value=!0;return}!P(se)&&!x(ye)&&!U(K)||(w.value=!0,await Oe.post(route("admin.sales-order-return.add-item"),{order_id:O.id,product_code:se,qty:ye,price:K,merge:o.value}).then(_e=>{const de=_e.data.data.item;let Q=-1;_e.data.data.mergeItem&&(Q=O.items.findIndex(Ve=>Ve.id===de.id)),Q===-1?O.items.push(de):O.items[Q]=de,S.value="",K!==null&&K!==parseFloat(de.price)&&gt("Harga tidak dapat diubah!","top")}).catch(_e=>{var de,Q;pt((Q=(de=_e.response)==null?void 0:de.data)==null?void 0:Q.message,"top"),console.error("Gagal mengambil data produk:",_e)}),w.value=!1,it(()=>{var _e;(_e=i.value)==null||_e.focus()}))},N=ue=>{M.value=Object.create(ue),Y.value=!0},V=ue=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ue.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{w.value=!0,Oe.post(route("admin.sales-order-return.remove-item"),{id:ue.id}).then(()=>{const L=O.items.findIndex(ye=>ye.id===ue.id);L!==-1&&(O.items.splice(L,1)[0],ft("Item telah dihapus","top"))}).catch(L=>{var ye,se;pt(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{w.value=!1})})},j=()=>{w.value=!0;const ue=n.value.getCurrentItem(),L={id:ue.id,qty:ue.quantity,price:ue.price};ue.notes&&(L.notes=ue.notes),Oe.post(route("admin.sales-order-return.update-item"),L).then(ye=>{const se=ye.data.data,K=O.items.findIndex(_e=>_e.id===se.id);K!==-1&&(O.items[K]=se,ft("Item telah diperbarui","top")),Y.value=!1}).catch(ye=>{var se,K;pt(((K=(se=ye==null?void 0:ye.response)==null?void 0:se.data)==null?void 0:K.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ye)}).finally(()=>{w.value=!1})};he(()=>{const ue=L=>{b.value||Y.value||z.value||C.value||(L.key==="F1"?(L.preventDefault(),b.value=!0):L.key==="F2"?(L.preventDefault(),g.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),re()):L.key==="F11"?(L.preventDefault(),A()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault())};document.addEventListener("keydown",ue),wt(()=>{document.removeEventListener("keydown",ue)}),it(()=>{var L;(L=p==null?void 0:p.value)==null||L.hideDrawer()})});const ae=async()=>{w.value=!0;const ue={id:O.id,customer_id:O.customer_id??null,datetime:Xt(O.datetime),notes:O.notes};await Oe.post(route("admin.sales-order-return.update"),ue).then(L=>{const ye=L.data.data.id;O.customer_id=ye.customer_id}).catch(L=>{var ye,se;pt(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{w.value=!1})},re=ue=>{if(O.items.length===0){ft("Item masih kosong","top");return}$t.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{w.value=!0,Oe.post(route("admin.sales-order-return.close",{id:O.id})).then(L=>{ft("Transaksi selesai"),ee.get(route("admin.sales-order-return.detail",{id:O.id}))}).catch(L=>{var ye,se;pt((se=(ye=L.response)==null?void 0:ye.data)==null?void 0:se.message),console.error(L)}).finally(()=>{w.value=!1})})},me=()=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order-return.cancel",{id:O.id}),{id:O.id}).then(()=>{ft("Transaksi telah dibatalkan."),ee.visit(route("admin.sales-order-return.detail",{id:O.id}))}).catch(ue=>{var ye,se;const L=((se=(ye=ue.response)==null?void 0:ye.data)==null?void 0:se.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(ue)})})},Re=()=>{window.open(route("admin.sales-order-return.detail",{id:O.id})+"?preview=1","_blank")},Ge=Z(()=>q.value?q.value.wallet_balance>=B.value:!0);return(ue,L)=>{const ye=X("i-head"),se=X("authenticated-layout");return u(),h(G,null,[e(ye,{title:_}),e(se,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:l(()=>[v(r(_))]),"left-button":l(()=>[t("div",Jy,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=K=>a(ee).get(ue.route("admin.sales-order-return.index")))})])]),"right-button":l(()=>[t("div",Gy,[a(s).screen.gt.sm?(u(),h(G,{key:0},[t("div",Xy,r(a(m).props.auth.user.username),1),L[20]||(L[20]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(_a)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",Zy,[t("div",e_,[t("div",t_,[e(Fo,{ref_key:"customerAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:q.value,"onUpdate:modelValue":L[2]||(L[2]=K=>q.value=K),label:"Pelanggan",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),q.value?(u(),h("div",a_,[t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",Ge.value?"text-green":"text-red"])}," Wallet: "+r(q.value?"Rp. "+a(H)(q.value?q.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",q.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(q.value?"Rp. "+a(H)(q.value?q.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",l_,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:S.value,"onUpdate:modelValue":L[5]||(L[5]=K=>S.value=K),onKeyup:L[6]||(L[6]=Wt(J(K=>E(),["prevent"]),["enter"])),loading:w.value,disable:w.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(R,{name:"search",onClick:L[3]||(L[3]=K=>z.value=!0),class:"cursor-pointer"})]),append:l(()=>{var K;return[((K=S.value)==null?void 0:K.length)>0?(u(),I(R,{key:0,name:"send",onClick:L[4]||(L[4]=_e=>E()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",o_,[e(Vt,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[7]||(L[7]=K=>o.value=K),label:"Gabungkan item",disable:w.value},null,8,["modelValue","disable"])])])]),t("div",n_,[t("div",s_,[e(Bo,{items:O.items,onUpdateQuantity:L[8]||(L[8]=({id:K,value:_e})=>ue.updateQuantity(K,_e)),onRemoveItem:V,onEditItem:N,"is-processing":w.value},null,8,["items","is-processing"])])]),t("div",r_,[a(s).screen.gt.sm?(u(),h("div",i_,[t("div",d_,r(O.items.length)+" item(s) ",1),O.notes?(u(),h("div",u_,[L[21]||(L[21]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",m_,[e($e,{text:O.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(u(),h("div",c_,[t("div",p_,[t("div",null,"Return #: "+r(O.code),1),t("div",null,"Order #: "+r(a(m).props.data.sales_order.code),1),t("div",null,r(a(ve)(O.datetime)),1)])])):k("",!0),t("div",f_,[t("div",g_,[L[23]||(L[23]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",b_,[L[22]||(L[22]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(H)(B.value)),1)])])])]),t("div",v_,[t("div",y_,[e(D,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:L[9]||(L[9]=K=>re()),disable:!ue.$can("admin.sales-order-return.close")||w.value||O.items.length===0||O.status!=="draft",loading:w.value},null,8,["disable","loading"])]),t("div",__,[e(D,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[13]||(L[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[te((u(),I(oe,{clickable:"",onClick:L[10]||(L[10]=J(K=>C.value=!0,["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>L[24]||(L[24]=[v("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),te((u(),I(oe,{clickable:"",onClick:L[11]||(L[11]=J(K=>Re(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"preview"})]),_:1}),e(F,null,{default:l(()=>L[25]||(L[25]=[v("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),te((u(),I(oe,{clickable:"",onClick:L[12]||(L[12]=J(K=>me(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:l(()=>L[26]||(L[26]=[v(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(zo,{ref_key:"itemEditorRef",ref:n,modelValue:Y.value,"onUpdate:modelValue":L[14]||(L[14]=K=>Y.value=K),item:M.value,onSave:L[15]||(L[15]=K=>j()),"is-processing":w.value},null,8,["modelValue","item","is-processing"]),e(wa,{modelValue:z.value,"onUpdate:modelValue":L[16]||(L[16]=K=>z.value=K),onProductSelected:$},null,8,["modelValue"]),e(Ho,{modelValue:C.value,"onUpdate:modelValue":L[17]||(L[17]=K=>C.value=K),data:O,onSave:L[18]||(L[18]=K=>ae()),"is-processing":w.value},null,8,["modelValue","data","is-processing"]),e(Lo,{modelValue:b.value,"onUpdate:modelValue":L[19]||(L[19]=K=>b.value=K)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},w_=Object.freeze(Object.defineProperty({__proto__:null,default:k_},Symbol.toStringTag,{value:"Module"})),h_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},$_={class:"q-pa-xs"},x_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},S_={key:0},V_={key:1},q_={key:2},C_={key:3},T_={key:0},P_={key:1},R_={key:0},O_={key:0},I_={key:1},U_={class:"flex justify-end"},Cl="Retur Penjualan",D_={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=zt(),d=Ft(),f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Ct(p-2,p-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Tt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_RETURN_STATUSES)],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES)],S=Ie({search:"",year:p,month:d,status:"all",refund_status:"all",...Fe()}),w=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),z=[{name:"code",label:"Info Order",field:"code",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{A()});const Y=P=>{if(P.status=="draft"){C(P);return}M(P)},C=P=>{ee.get(route("admin.sales-order-return.edit",P.id))},M=P=>{ee.get(route("admin.sales-order-return.detail",P.id))},O=P=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order-return.cancel",{id:P.id}),{id:P.id}).then($=>{const E=$.data.data,N=o.value.findIndex(V=>V.id===E.id);if(N===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[N].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var N,V;const E=((V=(N=$.response)==null?void 0:N.data)==null?void 0:V.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:E,color:"warning",position:"bottom"}),console.error($)})})},B=P=>lt({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.sales-order-return.delete",P.id),fetchItemsCallback:A,loading:i}),A=(P=null)=>{Le({pagination:w,filter:S,props:P,rows:o,url:route("admin.sales-order-return.data"),loading:i,tableRef:n})},x=()=>{A()},U=Z(()=>s.screen.gt.sm?z:z.filter(P=>P.name==="code"||P.name==="action"));return Me(()=>S.year,P=>{P===null&&(S.month=null)}),(P,$)=>{const E=X("i-head"),N=X("authenticated-layout");return u(),h(G,null,[e(E,{title:Cl}),e(N,null,He({title:l(()=>[v(r(Cl))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=V=>m.value=!m.value)},null,8,["icon"]),P.$can("admin.sales-order-return.edit")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=V=>a(ee).get(P.route("admin.sales-order-return.add")))})):k("",!0)]),default:l(()=>[t("div",$_,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:w.value,"onUpdate:pagination":$[10]||($[10]=V=>w.value=V),filter:S.search,loading:i.value,columns:U.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:A,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:j,filter:ae})=>[t("div",x_,[t("span",null,r(j)+" "+r(ae?" with term "+ae:""),1)])]),body:l(V=>[e(Pe,{props:V,class:"cursor-pointer",onClick:J(j=>Y(V.row),["prevent"])},{default:l(()=>[e(W,{key:"code",props:V,class:"wrap-column"},{default:l(()=>{var j,ae,re;return[t("div",null,[e(R,{name:"tag"}),v(" "+r(V.row.code),1)]),t("div",null,[e(R,{class:"inline-icon",name:"calendar_today"}),v(r(a(ve)(V.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[V.row.cashier?(u(),h("div",S_,[e(R,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((j=V.row.cashier)==null?void 0:j.username),1)])):k("",!0),V.row.cashier_session?(u(),h("div",V_,[e(R,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((re=(ae=V.row.cashier_session)==null?void 0:ae.cashier_terminal)==null?void 0:re.name),1)])):k("",!0),V.row.customer?(u(),h("div",q_,[e(R,{name:"person",class:"inline-icon"}),e(va,{href:P.route("admin.customer.detail",{id:V.row.customer.id}),onClick:$[7]||($[7]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(V.row.customer.code)+" - "+r(V.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(H)(V.row.grand_total)),1),V.row.notes?(u(),h("div",C_,[e(R,{name:"notes"}),v(" "+r(V.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Bt,{status:V.row.status,statuses:P.$CONSTANTS.SALES_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Bt,{status:V.row.refund_status,statuses:P.$CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(W,{key:"cashier_id",props:V},{default:l(()=>{var j,ae,re;return[V.row.cashier?(u(),h("div",T_,[e(R,{name:"person",class:"inline-icon"}),v(" "+r((j=V.row.cashier)==null?void 0:j.username),1)])):k("",!0),V.row.cashier_session?(u(),h("div",P_,[e(R,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((re=(ae=V.row.cashier_session)==null?void 0:ae.cashier_terminal)==null?void 0:re.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(W,{key:"customer_id",props:V},{default:l(()=>[V.row.customer?(u(),h("div",R_,[t("div",null,[e(R,{name:"person",class:"inline-icon"}),v(" "+r(V.row.customer_code)+" - "+r(V.row.customer_name),1)]),V.row.customer_phone?(u(),h("div",O_,[e(R,{name:"phone",class:"inline-icon"}),v(" "+r(V.row.customer_phone),1)])):k("",!0),V.row.customer_address?(u(),h("div",I_,[e(R,{name:"home_pin",class:"inline-icon"}),v(" "+r(V.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:V},{default:l(()=>[v(r(a(H)(V.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:V},{default:l(()=>[e($e,{text:V.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:V,onClick:$[9]||($[9]=J(()=>{},["stop"]))},{default:l(()=>[t("div",U_,[P.$can("admin.sales-order-return.detail")||P.$can("admin.sales-order-return.edit")||P.$can("admin.sales-order-return.cancel")||P.$can("admin.sales-order-return.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[V.row.status!="draft"&&P.$can("admin.sales-order-return.detail")?te((u(),I(oe,{key:0,onClick:J(j=>M(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"visibility"})]),_:1}),e(F,null,{default:l(()=>$[11]||($[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),V.row.status=="draft"&&P.$can("admin.sales-order-return.edit")?te((u(),I(oe,{key:1,onClick:J(j=>C(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>$[12]||($[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),V.row.status=="draft"&&P.$can("admin.sales-order-return.cancel")?te((u(),I(oe,{key:2,onClick:J(j=>O(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"cancel"})]),_:1}),e(F,null,{default:l(()=>$[13]||($[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),P.$can("admin.sales-order-return.delete")?te((u(),I(oe,{key:3,onClick:J(j=>B(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>$[14]||($[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",h_,[e(ce,{modelValue:S.year,"onUpdate:modelValue":[$[2]||($[2]=V=>S.year=V),x],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),S.year!="all"?(u(),I(ce,{key:0,modelValue:S.month,"onUpdate:modelValue":[$[3]||($[3]=V=>S.month=V),x],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:S.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:S.status,"onUpdate:modelValue":[$[4]||($[4]=V=>S.status=V),x],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:S.refund_status,"onUpdate:modelValue":[$[5]||($[5]=V=>S.refund_status=V),x],options:q,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:S.search,"onUpdate:modelValue":$[6]||($[6]=V=>S.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},E_=Object.freeze(Object.defineProperty({__proto__:null,default:D_},Symbol.toStringTag,{value:"Module"})),j_={key:0,class:"text-center q-mb-md text-grey-8"},A_={class:"text-subtitle2 text-weight-medium"},M_={class:"text-h5 text-center text-primary q-pb-md"},N_={class:"q-mb-md flex flex-center"},B_={key:1},z_={class:"col-6"},F_={class:"col-6"},L_={class:"row"},H_={class:"text-center q-mt-md"},K_={key:0,class:"text-h6 text-negative text-weight-bold"},Y_={key:1,class:"text-h6 text-green-8 text-weight-bold"},W_={key:2,class:"text-h6 text-positive text-weight-bold"},Q_={key:2},J_={class:"text-h6 text-negative text-center"},G_={key:3},X_={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=T(!1),g=T("cash"),b=T(new Date),p=T([]),d=T([]),f=Ie([{id:"cash",amount:0}]),y=i.props.settings.default_payment_mode,_=Z(()=>[{label:"Laci Kasir",value:"cash"},...m.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map($=>({label:$.name,value:$.id}))]),q=Z(()=>f.reduce(($,E)=>$+(E.amount||0),0)),S=Z(()=>m.total-q.value),w=Z(()=>{if(!m.customer)return!0;const $=f.find(N=>N.id==="wallet");return($?$.amount:0)<=m.customer.wallet_balance}),z=new Date,Y=rt.addToDate(new Date,{days:30}),C=Z(()=>[$=>!!$||"Tanggal jatuh tempo harus diisi",$=>rt.isBetweenDates($,z,Y,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),M=Z(()=>{if(g.value==="debt")return!!m.customer&&C.value.every(j=>j(b.value)===!0);const $=w.value,E=f.some(j=>(j.amount||0)>0),N=f.every(j=>(j.amount||0)>=0),V=S.value<=0;return $&&E&&N&&V}),O=()=>{if(f.length<3){const $=f.length;f.push({id:"cash",amount:0}),it(()=>{const E=p.value[$];E&&(E.focus(),E.showPopup())})}},B=$=>{if(f.length>1){const E=f.findIndex(N=>N.id===$);E!==-1&&f.splice(E,1)}},A=($,E="cash")=>{g.value=$,b.value=new Date,f.splice(0,f.length),$==="cash"&&(f.splice(0,f.length,{id:E,amount:m.total}),it(()=>{d.value.length>0&&d.value[0]&&(d.value[0].focus(),d.value[0].select())}))},x=()=>{if(!M.value)return;n.value=!0;let $={total:m.total,is_debt:g.value==="debt"};if(g.value==="debt")$.due_date=rt.formatDate(b.value,"YYYY-MM-DD"),$.payments=[];else{const E=q.value,N=E>m.total?E-m.total:0,V=S.value>0?S.value:0;$.payments=f,$.remaining_debt=V,$.change=N}o("accepted",$),n.value=!1},U=()=>{A("cash",m.customer?y:"cash")};he(()=>{const $=E=>{m.modelValue&&E.ctrlKey&&E.key==="Enter"&&(E.preventDefault(),x())};document.addEventListener("keydown",$),wt(()=>{document.removeEventListener("keydown",$)})});const P=($,E)=>{it(()=>{d.value[E]&&(d.value[E].focus(),d.value[E].select())})};return($,E)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":E[3]||(E[3]=N=>$.$emit("update:modelValue",N)),onBeforeShow:U},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>E[4]||(E[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[c.customer?(u(),h("div",j_,[t("div",A_,[v(" Username: "+r(c.customer.code)+" ",1),E[5]||(E[5]=t("br",null,null,-1)),v(" Nama: "+r(c.customer.name),1),E[6]||(E[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(H)(c.customer.wallet_balance)),1)])])):k("",!0),t("div",M_," Total: Rp. "+r(a(H)(c.total)),1),t("div",N_,[e(a(Yt),{modelValue:g.value,"onUpdate:modelValue":[E[0]||(E[0]=N=>g.value=N),A],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="cash"?(u(),h("div",B_,[(u(!0),h(G,null,Be(f,(N,V)=>(u(),h("div",{key:V,class:"row q-col-gutter-sm q-mb-sm"},[t("div",z_,[e(a(ce),{modelValue:N.id,"onUpdate:modelValue":[j=>N.id=j,j=>P(j,V)],options:_.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:j=>p.value[V]=j},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",F_,[e(Ee,{modelValue:N.amount,"onUpdate:modelValue":j=>N.amount=j,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:N.id==="wallet"&&!w.value,"error-message":N.id==="wallet"&&!w.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:j=>d.value[V]=j},He({_:2},[f.length>1?{name:"append",fn:l(()=>[e(R,{size:"xs",name:"close",class:"cursor-pointer",onClick:j=>B(N.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",L_,[e(D,{disable:!(f.length<3&&S.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:O,size:"sm"},null,8,["disable"])]),t("div",H_,[S.value>0?(u(),h("div",K_," Sisa Tagihan: Rp. "+r(a(H)(S.value)),1)):S.value<0?(u(),h("div",Y_," Kembalian: Rp. "+r(a(H)(Math.abs(S.value))),1)):(u(),h("div",W_," Tagihan Terbayar "))])])):g.value==="debt"&&c.customer?(u(),h("div",Q_,[e(da,{outlined:"",modelValue:b.value,"onUpdate:modelValue":E[1]||(E[1]=N=>b.value=N),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(z),"max-date":a(Y),rules:C.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",J_," Total Utang: Rp. "+r(a(H)(c.total)),1)])):g.value==="debt"&&!c.customer?(u(),h("div",G_,E[7]||(E[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:E[2]||(E[2]=N=>$.$emit("update:modelValue",!1)),class:"col"}),e(D,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:x,disable:n.value||!M.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Z_=Object.freeze(Object.defineProperty({__proto__:null,default:X_},Symbol.toStringTag,{value:"Module"})),ek={key:0},tk={style:{float:"right"}},ak={key:1},lk={style:{float:"right"}},ok={key:2},nk={style:{float:"right"}},sk={key:3},rk={style:{float:"right"}},ik={style:{float:"right"}},dk={class:"q-gutter-sm"},uk={class:"q-my-md"},mk={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(u(),h("tr",ek,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",tk,r(a(H)(c.payment.total)),1)])]),c.payment.cash_amount?(u(),h("tr",ak,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",lk,r(a(H)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(u(),h("tr",ok,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",nk,r(a(H)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(u(),h("tr",sk,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",rk,r(a(H)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",ik,r(a(H)(c.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",dk,[e(D,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(D,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",uk,[e(D,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ck=kt(mk,[["__scopeId","data-v-a3bb29e0"]]),pk=Object.freeze(Object.defineProperty({__proto__:null,default:ck},Symbol.toStringTag,{value:"Module"})),fk={class:"column"},gk={class:"bg-grey-2 q-pa-xs"},bk={class:"text-subtitle1 text-bold text-grey-10"},vk={class:"text-caption text-grey-8"},yk={class:"col-12 col-sm-6"},_k={class:"full-width"},kk={key:1},wk={key:0},hk={key:1},$k={class:"col-12 col-sm-6",align:"left"},xk={class:"full-width"};const Sk={key:1},Vk={class:"full-width",style:{"border-collapse":"collapse"}},qk={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ck={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Tk={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Pk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Rk={key:0},Ok={class:"col-12 col-sm-6"},Ik={class:"text-body2 text-grey-7 text-italic"},Uk={class:"col-12 col-sm-6"},Dk={class:"row justify-end q-gutter-y-xs"},Ek={class:"col-12 row justify-between"},jk={class:"text-subtitle2 text-bold"},Ak={class:"row justify-end q-gutter-y-xs"},Mk={class:"col-12 row justify-between"},Nk={class:"text-subtitle2 text-bold"},Bk={class:"row justify-end q-gutter-y-xs"},zk={class:"col-12 row justify-between"},Fk={class:"text-subtitle2 text-bold"},Ko={__name:"InvoiceTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=X("i-link"),n=X("tempate");return u(),h("div",fk,[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",gk,[t("div",bk," INVOICE #"+r(s.data.code),1),t("div",vk,[v(" Kasir: "+r(s.data.cashier.username)+" - "+r(s.data.cashier.name)+" | "+r(a(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(u(),h(G,{key:0},[v(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Ae),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",yk,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",_k,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(u(),I(i,{key:0,href:m.route("admin.customer.detail",{id:s.data.customer_id})},{default:l(()=>[e(R,{class:"inline-icon",name:"person"}),v(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(u(),h("div",kk,[e(R,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(u(),h("tr",wk,[t("td",null,[e(R,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(u(),h("tr",hk,[t("td",null,[e(R,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",$k,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",xk,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.$CONSTANTS.SALES_ORDER_STATUSES[s.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)]),k("",!0),s.data.due_date?(u(),h("tr",Sk,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(oa)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("table",Vk,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(u(!0),h(G,null,Be(s.data.details,g=>(u(),h("tr",{key:g.id},[t("td",qk,[e(i,{href:m.route("admin.product.detail",g.product_id)},{default:l(()=>[v(r(g.product_name),1)]),_:2},1032,["href"])]),t("td",Ck,r(a(H)(g.price)),1),t("td",Tk,r(g.quantity),1),t("td",Pk,r(a(H)(g.subtotal_price)),1)]))),128)),s.data.details.length==0?(u(),h("tr",Rk,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(le,{class:"row",align:"left"},{default:l(()=>[t("div",Ok,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Ik,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Uk,[s.data.change>0?(u(),I(n,{key:0},{default:l(()=>[t("div",Dk,[t("div",Ek,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Jumlah Bayar",-1)),t("div",jk,r(a(H)(parseInt(s.data.total_paid)+parseInt(s.data.change))),1)])]),t("div",Ak,[t("div",Mk,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Kembalian",-1)),t("div",Nk,r(a(H)(s.data.change)),1)])])]),_:1})):k("",!0),t("div",Bk,[t("div",zk,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Fk,r(a(H)(s.data.grand_total)),1)])])])]),_:1})])}}},Lk=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),Hk={key:0,class:"text-center q-mb-md text-grey-8"},Kk={class:"text-subtitle2 text-weight-medium"},Yk={class:"text-h5 text-center text-primary q-pb-md"},Wk={class:"text-center q-mt-md"},Qk={key:0,class:"text-h6 text-negative text-weight-bold"},Jk={key:1,class:"text-h6 text-green-8 text-weight-bold"},Gk={key:2,class:"text-h6 text-positive text-weight-bold"},Yo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=T(!1),g=T({method:"cash",amount:m.total,notes:null}),b=i.props.data.customer,p=Z(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...b?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(S=>({label:S.name,value:S.id}))]),d=Z(()=>m.total-(g.value.amount||0)),f=Z(()=>{const S=g.value.amount||0;return m.total,S<=0?"Jumlah pembayaran harus lebih dari 0.":g.value.method==="wallet"&&b&&S>b.wallet_balance?"Saldo wallet tidak mencukupi.":null}),y=Z(()=>f.value===null),_=()=>{if(!y.value)return;n.value=!0;const S={total_paid:g.value.amount,payments:[{id:g.value.method,amount:g.value.amount}],notes:g.value.notes,change:Math.max(0,(g.value.amount||0)-m.total),remaining_debt:Math.max(0,m.total-(g.value.amount||0))};o("accepted",S),n.value=!1},q=()=>{g.value.amount=m.total,g.value.method="cash",g.value.notes=null};return(S,w)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":w[4]||(w[4]=z=>S.$emit("update:modelValue",z)),onBeforeShow:q},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>w[5]||(w[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[a(b)?(u(),h("div",Hk,[t("div",Kk,[v(r(a(b).code)+" ",1),w[6]||(w[6]=t("br",null,null,-1)),v(" "+r(a(b).name)+" ",1),w[7]||(w[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(H)(a(b).wallet_balance)),1)])])):k("",!0),t("div",Yk," Total: Rp. "+r(a(H)(c.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":w[0]||(w[0]=z=>g.value.method=z),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":w[1]||(w[1]=z=>g.value.amount=z),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":f.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":w[2]||(w[2]=z=>g.value.notes=z),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Wk,[d.value>0?(u(),h("div",Qk," Sisa Tagihan: Rp. "+r(a(H)(d.value)),1)):d.value<0?(u(),h("div",Jk," Kembalian: Rp. "+r(a(H)(Math.abs(d.value))),1)):(u(),h("div",Gk," Tagihan Terbayar "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:w[3]||(w[3]=z=>S.$emit("update:modelValue",!1))}),e(D,{label:"Bayar",color:"positive",onClick:_,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Xk=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),Zk={class:"column"},ew={class:"row"},tw={class:"full-width",style:{"border-collapse":"collapse"}},aw={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},lw={class:"row items-center q-gutter-x-sm"},ow={class:"text-weight-bold"},nw={class:"row items-center q-gutter-x-sm q-mt-xs"},sw={class:"text-caption text-grey-6"},rw={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},iw={class:"text-caption text-grey-6"},dw={class:"q-mt-xs"},uw={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},mw={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},cw={key:0},pw={class:"text-right q-pa-sm"},fw={class:"text-right q-pa-sm"},Wo={__name:"PaymentTab",props:{data:Object},setup(c){const s=c,m=Z(()=>s.data.remaining_debt),o=Se(),i=T(!1),n=()=>{i.value=!0},g=async p=>{const d={order_id:s.data.id,payments:p.payments,notes:p.notes};o.loading.show({message:"Memproses pembayaran..."});try{const f=await Oe.post(route("admin.sales-order.add-payment"),d);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),i.value=!1,ee.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(f){let y="Gagal memproses pembayaran.";f.response&&f.response.data&&f.response.data.message?y=f.response.data.message:f.message&&(y=f.message),o.notify({message:y,color:"negative",icon:"error"})}finally{o.loading.hide()}},b=p=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.sales-order.delete-payment",{id:p.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(d){let f="Gagal menghapus pembayaran.";d.response&&d.response.data&&d.response.data.message?f=d.response.data.message:d.message&&(f=d.message),o.notify({message:f,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(p,d)=>(u(),h(G,null,[t("div",Zk,[e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("div",ew,[p.$can("admin.sales-order.add-payment")&&m.value>0?(u(),I(D,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:d[0]||(d[0]=J(f=>n(),["stop"]))})):k("",!0)]),t("table",tw,[d[7]||(d[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(u(!0),h(G,null,Be(s.data.payments,f=>(u(),h("tr",{key:f.id},[t("td",aw,[t("div",lw,[e(R,{name:"tag",size:"xs",color:"grey-7"}),t("span",ow,r(f.code),1)]),t("div",nw,[e(R,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",sw,r(a(ve)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(u(),h("div",rw,[e(R,{name:"wallet",size:"xs",color:"grey-7"}),t("span",iw,r(f.account.name),1)])):k("",!0),t("div",dw,[e(bt,{label:p.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",uw,r(a(H)(f.amount)),1),t("td",mw,[p.$can("admin.sales-order.delete-payment")&&s.data.customer_id?(u(),I(D,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(f)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(u(),h("tr",cw,d[2]||(d[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[d[3]||(d[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",pw,r(a(H)(s.data.total_paid)),1),d[4]||(d[4]=t("th",null,null,-1))]),t("tr",null,[d[5]||(d[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Tagihan",-1)),t("th",fw,r(a(H)(m.value)),1),d[6]||(d[6]=t("td",null,null,-1))])])])]),_:1})]),e(Yo,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=f=>i.value=f),total:m.value,customer:s.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},gw=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),bw={class:"q-gutter-sm"},vw={class:"col col-lg-6 q-pa-xs",align:"center"},Tl="Rincian Penjualan",yw={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=ge(),o=m.props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"invoice");he(()=>{it(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.sales-order.print",{id:m.props.data.id,size:p}),"_self")};return(p,d)=>{const f=X("i-head"),y=X("authenticated-layout");return u(),h(G,null,[e(f,{title:Tl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Tl))])]),"left-button":l(()=>[t("div",bw,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=_=>p.$goBack())})])]),"right-button":l(()=>[e(D,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:d[1]||(d[1]=_=>b("58mm"))}),e(D,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:d[2]||(d[2]=_=>b("a4"))}),i.value?k("",!0):(u(),I(D,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:d[3]||(d[3]=_=>a(ee).get(p.route("admin.sales-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",vw,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Pt,{modelValue:g.value,"onUpdate:modelValue":d[4]||(d[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(u(),I(dt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Rt,{modelValue:g.value,"onUpdate:modelValue":d[5]||(d[5]=_=>g.value=_),animated:""},{default:l(()=>[e(ut,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(Ko,{data:a(o)},null,8,["data"])]),_:1}),e(ut,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(Wo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},_w=Object.freeze(Object.defineProperty({__proto__:null,default:yw},Symbol.toStringTag,{value:"Module"})),kw={class:"text-weight-medium"},ww={class:"text-caption text-grey-6 elipsis"},hw={class:"column items-end"},$w={class:"text-caption text-grey-6 text-italic"},Qo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=Se(),m=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(u(),I(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ke({height:a(m)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(u(!0),h(G,null,Be(g.cols,b=>(u(),I(Zt,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left wrap-column"},{default:l(()=>[t("div",kw,r(g.row.product_name),1),t("div",ww,r(g.row.product_barcode),1),g.row.notes?(u(),I($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal_price",props:g,class:"text-right"},{default:l(()=>[t("div",hw,[t("div",null,r(a(H)(g.row.subtotal_price)),1),t("div",$w,r(a(H)(g.row.quantity))+" "+r(g.row.product_uom)+" x Rp. "+r(a(H)(g.row.price)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(D,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(D,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},xw=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),Sw={key:0,class:"text-center q-mb-md text-grey-8"},Vw={class:"text-subtitle2 text-weight-medium"},qw={class:"text-h5 text-center text-primary q-pb-md"},Cw={class:"q-mb-md flex flex-center"},Tw={key:1},Pw={class:"col-6"},Rw={class:"col-6"},Ow={class:"row"},Iw={class:"text-center q-mt-md"},Uw={key:0,class:"text-h6 text-negative text-weight-bold"},Dw={key:1,class:"text-h6 text-green-8 text-weight-bold"},Ew={key:2,class:"text-h6 text-positive text-weight-bold"},jw={key:2},Aw={class:"text-h6 text-negative text-center"},Mw={key:3},Jo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=T(!1),g=T("cash"),b=T(new Date),p=T(i.props.settings.after_payment_action??"print"),d=T([]),f=T([]),y=Ie([{id:"cash",amount:0}]),_=i.props.settings.default_payment_mode,q=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],S=Z(()=>[{label:"Laci Kasir",value:"cash"},...m.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(N=>({label:N.name,value:N.id}))]),w=Z(()=>y.reduce((N,V)=>N+(V.amount||0),0)),z=Z(()=>m.total-w.value),Y=Z(()=>{if(!m.customer)return!0;const N=y.find(j=>j.id==="wallet");return(N?N.amount:0)<=m.customer.wallet_balance}),C=new Date,M=rt.addToDate(new Date,{days:30}),O=Z(()=>[N=>!!N||"Tanggal jatuh tempo harus diisi",N=>rt.isBetweenDates(N,C,M,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),B=Z(()=>{if(g.value==="debt")return!!m.customer&&O.value.every(re=>re(b.value)===!0);const N=Y.value,V=y.some(re=>(re.amount||0)>0),j=y.every(re=>(re.amount||0)>=0),ae=z.value<=0;return N&&V&&j&&ae}),A=()=>{if(y.length<3){const N=y.length;y.push({id:"cash",amount:0}),it(()=>{const V=d.value[N];V&&(V.focus(),V.showPopup())})}},x=N=>{if(y.length>1){const V=y.findIndex(j=>j.id===N);V!==-1&&y.splice(V,1)}},U=(N,V="cash")=>{g.value=N,b.value=new Date,y.splice(0,y.length),N==="cash"&&(y.splice(0,y.length,{id:V,amount:m.total}),it(()=>{f.value.length>0&&f.value[0]&&(f.value[0].focus(),f.value[0].select())}))},P=()=>{if(!B.value)return;n.value=!0;let N={total:m.total,is_debt:g.value==="debt",after_payment_action:p.value};if(g.value==="debt")N.due_date=rt.formatDate(b.value,"YYYY-MM-DD"),N.payments=[];else{const V=w.value,j=V>m.total?V-m.total:0,ae=z.value>0?z.value:0;N.payments=y,N.remaining_debt=ae,N.change=j}o("accepted",N),n.value=!1},$=()=>{U("cash",m.customer?_:"cash")};he(()=>{const N=V=>{m.modelValue&&V.ctrlKey&&V.key==="Enter"&&(V.preventDefault(),P())};document.addEventListener("keydown",N),wt(()=>{document.removeEventListener("keydown",N)})});const E=(N,V)=>{it(()=>{f.value[V]&&(f.value[V].focus(),f.value[V].select())})};return(N,V)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":V[4]||(V[4]=j=>N.$emit("update:modelValue",j)),onBeforeShow:$},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>V[5]||(V[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[c.customer?(u(),h("div",Sw,[t("div",Vw,[v(" Username: "+r(c.customer.code)+" ",1),V[6]||(V[6]=t("br",null,null,-1)),v(" Nama: "+r(c.customer.name),1),V[7]||(V[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(H)(c.customer.wallet_balance)),1)])])):k("",!0),t("div",qw," Total: Rp. "+r(a(H)(c.total)),1),t("div",Cw,[e(a(Yt),{modelValue:g.value,"onUpdate:modelValue":[V[0]||(V[0]=j=>g.value=j),U],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="cash"?(u(),h("div",Tw,[(u(!0),h(G,null,Be(y,(j,ae)=>(u(),h("div",{key:ae,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Pw,[e(a(ce),{modelValue:j.id,"onUpdate:modelValue":[re=>j.id=re,re=>E(re,ae)],options:S.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:re=>d.value[ae]=re},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",Rw,[e(Ee,{modelValue:j.amount,"onUpdate:modelValue":re=>j.amount=re,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:j.id==="wallet"&&!Y.value,"error-message":j.id==="wallet"&&!Y.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:re=>f.value[ae]=re},He({_:2},[y.length>1?{name:"append",fn:l(()=>[e(R,{size:"xs",name:"close",class:"cursor-pointer",onClick:re=>x(j.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Ow,[e(D,{disable:!(y.length<3&&z.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:A,size:"sm"},null,8,["disable"])]),t("div",Iw,[z.value>0?(u(),h("div",Uw," Sisa Tagihan: Rp. "+r(a(H)(z.value)),1)):z.value<0?(u(),h("div",Dw," Kembalian: Rp. "+r(a(H)(Math.abs(z.value))),1)):(u(),h("div",Ew," Tagihan Terbayar "))])])):g.value==="debt"&&c.customer?(u(),h("div",jw,[e(da,{outlined:"",modelValue:b.value,"onUpdate:modelValue":V[1]||(V[1]=j=>b.value=j),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(C),"max-date":a(M),rules:O.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Aw," Total Utang: Rp. "+r(a(H)(c.total)),1)])):g.value==="debt"&&!c.customer?(u(),h("div",Mw,V[8]||(V[8]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(a(ce),{modelValue:p.value,"onUpdate:modelValue":V[2]||(V[2]=j=>p.value=j),options:q,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:n.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(D,{flat:"",label:"Batal",color:"grey",onClick:V[3]||(V[3]=j=>N.$emit("update:modelValue",!1)),class:"col"}),e(D,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:P,disable:n.value||!B.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Nw=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),Bw={class:"row items-center no-wrap"},zw={class:"col-auto"},Go={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},g=Z(()=>o.item.quantity*o.item.price),b=f=>{f.stopPropagation(),f.preventDefault()},p=f=>{o.modelValue&&(f.key==="Enter"?(n(),i("update:modelValue",!1),b(f)):f.key==="Escape"&&(i("update:modelValue",!1),b(f)))};return he(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item}),(f,y)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":y[6]||(y[6]=_=>f.$emit("update:modelValue",_))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Bw,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",zw,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=_=>f.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:c.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=_=>c.item.product_name=_),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=_=>c.item.quantity=_),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.price,"onUpdate:modelValue":y[3]||(y[3]=_=>c.item.price=_),label:"Harga",readonly:!c.item.product.price_editable,"hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","readonly","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":y[4]||(y[4]=_=>g.value=_),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:c.item.notes,"onUpdate:modelValue":y[5]||(y[5]=_=>c.item.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(D,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),te(e(D,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Fw=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"})),Lw={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[te(e(D,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Xo=kt(Lw,[["__scopeId","data-v-92052544"]]),Hw=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),Kw={class:"row items-center no-wrap"},Yw={class:"col text-subtite text-bold text-grey-8"},Ww={class:"col-auto"},Zo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},g=d=>{d.stopPropagation(),d.preventDefault()},b=d=>{o.modelValue&&(d.key==="Enter"?(n(),g(d)):d.key==="Escape"&&(i("update:modelValue",!1),g(d)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(d,f)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":f[4]||(f[4]=y=>d.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Kw,[t("div",Yw," Edit "+r(c.data.code),1),t("div",Ww,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=y=>d.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(Lt,{modelValue:c.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=y=>c.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":f[2]||(f[2]=y=>d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:c.data.notes,"onUpdate:modelValue":f[3]||(f[3]=y=>c.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(D,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),te(e(D,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Qw=Object.freeze(Object.defineProperty({__proto__:null,default:Zo},Symbol.toStringTag,{value:"Module"})),Jw={key:0},Gw={style:{float:"right"}},Xw={key:1},Zw={style:{float:"right"}},e0={key:2},t0={style:{float:"right"}},a0={key:3},l0={style:{float:"right"}},o0={style:{float:"right"}},n0={class:"q-gutter-sm"},s0={class:"q-my-md"},r0={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(u(),I(ot,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(u(),h("tr",Jw,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Gw,r(a(H)(c.payment.total)),1)])]),c.payment.cash_amount?(u(),h("tr",Xw,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",Zw,r(a(H)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(u(),h("tr",e0,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",t0,r(a(H)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(u(),h("tr",a0,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",l0,r(a(H)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",o0,r(a(H)(c.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",n0,[e(D,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(D,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",s0,[e(D,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},en=kt(r0,[["__scopeId","data-v-794fd35f"]]),i0=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),d0={class:"q-gutter-sm"},u0={class:"row items-center"},m0={class:"text-weight-bold"},c0={class:"text-weight-bold"},p0={class:"row q-col-gutter-none full-width"},f0={class:"col-sm-6 col-12 col"},g0={class:"row full-width"},b0={key:0,class:"row"},v0={class:"col-sm-6 col-12"},y0={class:"row q-ml-sm items-end"},_0={class:"row col grow"},k0={class:"col-12 q-pa-sm column"},w0={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},h0={key:0,class:"col"},$0={class:"text-caption text-grey-6 q-mt-xs"},x0={key:0,class:"text-caption text-grey-8 q-mt-xs"},S0={class:"text-italic"},V0={key:1,class:"col"},q0={class:"q-pa-sm q-pb-none text-grey-8"},C0={class:"col"},T0={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},P0={class:"text-h4 text-weight-bold"},R0={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},O0={class:"col q-py-sm"},I0={class:"q-py-sm"},U0={__name:"Editor",setup(c){const s=Se(),m=ge(),o=T(!0),i=T(null),n=T(null),g=T(null),b=T(!1),p=T(null),d=T(null),{isFullscreen:f,toggleFullscreen:y}=ka(d),_=m.props.data.code,q=T(m.props.data.customer),S=T(null),w=T(""),z=T(!1),Y=T(!1),C=T(!1),M=T(!1),O=T(!1),B=T(!1),A=T(null),x=T("price_1"),U=Ie({id:m.props.data.id,code:m.props.data.code,customer_id:m.props.data.customer_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),P=Z(()=>U.items.reduce((de,Q)=>de+Q.price*Q.quantity,0)),$=()=>{var de;y(),f.value||(de=p==null?void 0:p.value)==null||de.hideDrawer()},E=de=>isNaN(de)||de<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,N=de=>isNaN(de)||de<0?(gt("Harga tidak valid.","top"),!1):!0,V=de=>!de||de.length==0?(gt("Barcode tidak valid.","top"),!1):!0,j=de=>{var Q;(Q=w.value)!=null&&Q.endsWith("*")?w.value+=de.name:w.value=de.name},ae=async()=>{var ht;const de=(ht=w.value)==null?void 0:ht.trim();if(de.length===0){C.value=!0;return}const Q=de.split("*");let Ve=1,je="",ke=null;if(Q.length===1)je=Q[0];else if(Q.length<=3)Ve=parseInt(Q[0]),je=Q[1],Q.length===3&&(ke=parseFloat(Q[2]));else{gt("Input tidak valid.","top");return}if(je.length===0){C.value=!0;return}!V(je)&&!E(Ve)&&!N(ke)||(z.value=!0,await Oe.post(route("admin.sales-order.add-item"),{order_id:U.id,product_code:je,qty:Ve,price:ke,merge:o.value}).then(St=>{const Ot=St.data.data.item;let xt=-1;St.data.data.mergeItem&&(xt=U.items.findIndex(ua=>ua.id===Ot.id)),xt===-1?U.items.push(Ot):U.items[xt]=Ot,w.value="",ke!==null&&ke!==parseFloat(Ot.price)&&gt("Harga tidak dapat diubah!","top")}).catch(St=>{var Ot,xt;pt((xt=(Ot=St.response)==null?void 0:Ot.data)==null?void 0:xt.message,"top"),console.error("Gagal mengambil data produk:",St)}),z.value=!1,it(()=>{var St;(St=i.value)==null||St.focus()}))},re=de=>{A.value=Object.create(de),M.value=!0},me=de=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${de.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{z.value=!0,Oe.post(route("admin.sales-order.remove-item"),{id:de.id}).then(()=>{const Q=U.items.findIndex(Ve=>Ve.id===de.id);Q!==-1&&(U.items.splice(Q,1)[0],ft("Item telah dihapus","top"))}).catch(Q=>{var Ve,je;pt(((je=(Ve=Q==null?void 0:Q.response)==null?void 0:Ve.data)==null?void 0:je.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(Q)}).finally(()=>{z.value=!1})})},Re=()=>{z.value=!0;const de=n.value.getCurrentItem(),Q={id:de.id,qty:de.quantity};de.product.price_editable&&(Q.price=de.price),de.notes&&(Q.notes=de.notes),Oe.post(route("admin.sales-order.update-item"),Q).then(Ve=>{const je=Ve.data.data,ke=U.items.findIndex(ht=>ht.id===je.id);ke!==-1&&(U.items[ke]=je,ft("Item telah diperbarui","top"))}).catch(Ve=>{var je,ke;pt(((ke=(je=Ve==null?void 0:Ve.response)==null?void 0:je.data)==null?void 0:ke.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Ve)}).finally(()=>{z.value=!1})};he(()=>{const de=Q=>{Y.value||b.value||M.value||C.value||O.value||(Q.key==="F1"?(Q.preventDefault(),b.value=!0):Q.key==="F2"?(Q.preventDefault(),g.value.focus()):Q.key==="F3"?(Q.preventDefault(),i.value.focus()):Q.key==="F4"?(Q.preventDefault(),o.value=!o.value):Q.key==="F10"||Q.ctrlKey&&Q.key==="Enter"?(Q.preventDefault(),_e.value&&(Y.value=!0)):Q.key==="F11"?(Q.preventDefault(),$()):(Q.key==="F5"||Q.key==="F6"||Q.key==="F7"||Q.key==="F12")&&Q.preventDefault())};document.addEventListener("keydown",de),wt(()=>{document.removeEventListener("keydown",de)}),it(()=>{var Q;(Q=p==null?void 0:p.value)==null||Q.hideDrawer()})});const Ge=async de=>{q.value=de,U.customer_id=de==null?void 0:de.id,await ue(),de!=null&&de.id?(x.value=q.value.default_price_type??"price_1",i.value.focus()):(x.value="price_1",g.value.focus())},ue=async()=>{z.value=!0;const de={id:U.id,customer_id:U.customer_id??null,datetime:Xt(U.datetime),notes:U.notes};await Oe.post(route("admin.sales-order.update"),de).then(Q=>{const Ve=Q.data.data.id;U.customer_id=Ve.customer_id}).catch(Q=>{var Ve,je;pt(((je=(Ve=Q==null?void 0:Q.response)==null?void 0:Ve.data)==null?void 0:je.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Q)}).finally(()=>{z.value=!1})},L=de=>{if(U.items.length===0){ft("Item masih kosong","top");return}const Q={id:U.id,...de};z.value=!0,Oe.post(route("admin.sales-order.close"),Q).then(Ve=>{ft("Transaksi selesai"),Q.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:U.id,size:m.props.settings.default_print_size}),"_self"):Q.after_payment_action==="detail"?ee.get(route("admin.sales-order.detail",{id:U.id})):Q.after_payment_action==="new-order"&&ee.get(route("admin.sales-order.add"))}).catch(Ve=>{var je,ke;pt((ke=(je=Ve.response)==null?void 0:je.data)==null?void 0:ke.message),console.error(Ve)}).finally(()=>{z.value=!1})},ye=()=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${U.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order.cancel",{id:U.id}),{id:U.id}).then(()=>{ft("Transaksi telah dibatalkan."),ee.visit(route("admin.sales-order.detail",{id:U.id}))}).catch(de=>{var Ve,je;const Q=((je=(Ve=de.response)==null?void 0:Ve.data)==null?void 0:je.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:Q,color:"warning",position:"bottom"}),console.error(de)})})},se=()=>{window.open(route("admin.sales-order.detail",{id:U.id})+"?preview=1","_blank")},K=Z(()=>q.value?q.value.wallet_balance>=P.value:!0),_e=Z(()=>qt().appContext.config.globalProperties.$can("admin.sales-order.close")&&!z.value&&U.items.length!==0&&U.status==="draft");return(de,Q)=>{const Ve=X("i-head"),je=X("authenticated-layout");return u(),h(G,null,[e(Ve,{title:a(_)},null,8,["title"]),e(je,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:l(()=>[v(r(a(_)),1)]),"left-button":l(()=>[t("div",d0,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:Q[0]||(Q[0]=ke=>a(ee).get(de.route("admin.sales-order.index")))})])]),"right-button":l(()=>{var ke,ht;return[t("div",u0,[a(s).screen.gt.sm?(u(),h(G,{key:0},[t("div",m0,r(a(m).props.auth.user.username),1),Q[22]||(Q[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",c0,r((ht=(ke=a(m).props.data.cashier_session)==null?void 0:ke.cashier_terminal)==null?void 0:ht.name),1),Q[23]||(Q[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(_a)])],64)):k("",!0),k("",!0)])]}),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",p0,[t("div",f0,[t("div",g0,[e(Fo,{ref_key:"customerAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:q.value,"onUpdate:modelValue":Q[2]||(Q[2]=ke=>q.value=ke),label:"Pelanggan",disable:z.value,onCustomerSelected:Ge,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),q.value?(u(),h("div",b0,[t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",K.value?"text-green":"text-red"])}," Wallet: "+r(q.value?"Rp. "+a(H)(q.value?q.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",q.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(q.value?"Rp. "+a(H)(q.value?q.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",v0,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:w.value,"onUpdate:modelValue":Q[5]||(Q[5]=ke=>w.value=ke),onKeyup:Q[6]||(Q[6]=Wt(J(ke=>ae(),["prevent"]),["enter"])),loading:z.value,disable:z.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(R,{name:"search",onClick:Q[3]||(Q[3]=ke=>C.value=!0),class:"cursor-pointer"})]),append:l(()=>{var ke;return[((ke=w.value)==null?void 0:ke.length)>0?(u(),I(R,{key:0,name:"send",onClick:Q[4]||(Q[4]=ht=>ae()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",y0,[e(Vt,{class:"col",modelValue:o.value,"onUpdate:modelValue":Q[7]||(Q[7]=ke=>o.value=ke),label:"Gabungkan item",disable:z.value},null,8,["modelValue","disable"])])])]),t("div",_0,[t("div",k0,[e(Qo,{items:U.items,onUpdateQuantity:Q[8]||(Q[8]=({id:ke,value:ht})=>de.updateQuantity(ke,ht)),onRemoveItem:me,onEditItem:re,"is-processing":z.value},null,8,["items","is-processing"])])]),t("div",w0,[a(s).screen.gt.sm?(u(),h("div",h0,[t("div",$0,r(U.items.length)+" item(s) ",1),U.notes?(u(),h("div",x0,[Q[24]||(Q[24]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",S0,[e($e,{text:U.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(u(),h("div",V0,[t("div",q0,[t("div",null,"#: "+r(U.code),1),t("div",null,r(a(ve)(U.datetime)),1)])])):k("",!0),t("div",C0,[t("div",T0,[Q[26]||(Q[26]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",P0,[Q[25]||(Q[25]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(H)(P.value)),1)])])])]),t("div",R0,[t("div",O0,[e(D,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:Q[9]||(Q[9]=ke=>Y.value=!0),disable:!_e.value,loading:z.value},null,8,["disable","loading"])]),t("div",I0,[e(D,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:Q[13]||(Q[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[te((u(),I(oe,{clickable:"",onClick:Q[10]||(Q[10]=J(ke=>O.value=!0,["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>Q[27]||(Q[27]=[v("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),te((u(),I(oe,{clickable:"",onClick:Q[11]||(Q[11]=J(ke=>se(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"preview"})]),_:1}),e(F,null,{default:l(()=>Q[28]||(Q[28]=[v("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),te((u(),I(oe,{clickable:"",onClick:Q[12]||(Q[12]=J(ke=>ye(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:l(()=>Q[29]||(Q[29]=[v(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Go,{ref_key:"itemEditorRef",ref:n,modelValue:M.value,"onUpdate:modelValue":Q[14]||(Q[14]=ke=>M.value=ke),item:A.value,onSave:Q[15]||(Q[15]=ke=>Re()),"is-processing":z.value},null,8,["modelValue","item","is-processing"]),e(Jo,{modelValue:Y.value,"onUpdate:modelValue":Q[16]||(Q[16]=ke=>Y.value=ke),onAccepted:L,form:U,customer:q.value,total:P.value,accounts:a(m).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(wa,{modelValue:C.value,"onUpdate:modelValue":Q[17]||(Q[17]=ke=>C.value=ke),onProductSelected:j,priceType:x.value,"show-cost":de.$can("admin.product:view-cost")},null,8,["modelValue","priceType","show-cost"]),e(Zo,{modelValue:O.value,"onUpdate:modelValue":Q[18]||(Q[18]=ke=>O.value=ke),data:U,onSave:Q[19]||(Q[19]=ke=>ue()),"is-processing":z.value},null,8,["modelValue","data","is-processing"]),e(Xo,{modelValue:b.value,"onUpdate:modelValue":Q[20]||(Q[20]=ke=>b.value=ke)},null,8,["modelValue"]),e(en,{modelValue:B.value,"onUpdate:modelValue":Q[21]||(Q[21]=ke=>B.value=ke),order:U,customer:q.value,total:P.value,payment:S.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},D0=Object.freeze(Object.defineProperty({__proto__:null,default:U0},Symbol.toStringTag,{value:"Module"})),E0={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.SALES_ORDER_STATUSES,m={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(u(),I(Bt,{status:c.status,statuses:a(s),colors:m},null,8,["status","statuses"]))}},j0={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,m={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(u(),I(Bt,{status:c.status,statuses:a(s),colors:m},null,8,["status","statuses"]))}};const A0={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},M0={class:"q-pa-xs"},N0={class:"full-width row flex-center text-grey-8 q-gutter-sm"},B0={key:0},z0={key:1},F0={key:2},L0={key:3},H0={key:0},K0={key:1},Y0={key:0},W0={key:0},Q0={key:1},J0={class:"flex justify-end"},Pl="Penjualan",G0={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=zt(),d=Ft(),f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Ct(p-2,p-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Tt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_STATUSES)],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],S=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],w=Ie({search:"",year:p,month:d,status:"all",payment_status:"all",delivery_status:"all",...Fe()}),z=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{x()});const C=$=>{if($.status=="draft"){M($);return}O($)},M=$=>{ee.get(route("admin.sales-order.edit",$.id))},O=$=>{ee.get(route("admin.sales-order.detail",$.id))},B=$=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order.cancel",{id:$.id}),{id:$.id}).then(E=>{const N=E.data.data,V=o.value.findIndex(j=>j.id===N.id);if(V===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[V].status="canceled",s.notify({message:E.data.message,position:"bottom"})}).catch(E=>{var V,j;const N=((j=(V=E.response)==null?void 0:V.data)==null?void 0:j.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:N,color:"warning",position:"bottom"}),console.error(E)})})},A=$=>lt({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.sales-order.delete",$.id),fetchItemsCallback:x,loading:i}),x=($=null)=>{Le({pagination:z,filter:w,props:$,rows:o,url:route("admin.sales-order.data"),loading:i,tableRef:n})},U=()=>{x()},P=Z(()=>s.screen.gt.sm?Y:Y.filter($=>$.name==="id"||$.name==="action"));return Me(()=>w.year,$=>{$===null&&(w.month=null)}),($,E)=>{const N=X("i-head"),V=X("authenticated-layout");return u(),h(G,null,[e(N,{title:Pl}),e(V,null,He({title:l(()=>[v(r(Pl))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:E[0]||(E[0]=j=>m.value=!m.value)},null,8,["icon"]),$.$can("admin.sales-order.edit")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:E[1]||(E[1]=j=>a(ee).get($.route("admin.sales-order.add")))})):k("",!0)]),default:l(()=>[t("div",M0,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:z.value,"onUpdate:pagination":E[11]||(E[11]=j=>z.value=j),filter:w.search,loading:i.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:j,message:ae,filter:re})=>[t("div",N0,[t("span",null,r(ae)+" "+r(re?" with term "+re:""),1)])]),body:l(j=>[e(Pe,{props:j,class:"cursor-pointer",onClick:J(ae=>C(j.row),["prevent"])},{default:l(()=>[e(W,{key:"id",props:j,class:"wrap-column"},{default:l(()=>{var ae,re,me;return[t("div",null,[e(R,{name:"tag"}),v(" "+r(j.row.code),1)]),t("div",null,[e(R,{class:"inline-icon",name:"calendar_today"}),v(r(a(ve)(j.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[j.row.cashier?(u(),h("div",B0,[e(R,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((ae=j.row.cashier)==null?void 0:ae.username),1)])):k("",!0),j.row.cashier_session?(u(),h("div",z0,[e(R,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((me=(re=j.row.cashier_session)==null?void 0:re.cashier_terminal)==null?void 0:me.name),1)])):k("",!0),j.row.customer?(u(),h("div",F0,[e(R,{name:"person",class:"inline-icon"}),e(va,{href:$.route("admin.customer.detail",{id:j.row.customer.id}),onClick:E[8]||(E[8]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(j.row.customer.code)+" - "+r(j.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(H)(j.row.grand_total)),1),j.row.notes?(u(),h("div",L0,[e(R,{name:"notes"}),v(" "+r(j.row.notes),1)])):k("",!0)],64)),t("div",null,[e(E0,{status:j.row.status},null,8,["status"]),e(j0,{status:j.row.payment_status},null,8,["status"]),k("",!0)])]}),_:2},1032,["props"]),e(W,{key:"cashier_id",props:j},{default:l(()=>{var ae,re,me;return[j.row.cashier?(u(),h("div",H0,[e(R,{name:"person",class:"inline-icon"}),v(" "+r((ae=j.row.cashier)==null?void 0:ae.username),1)])):k("",!0),j.row.cashier_session?(u(),h("div",K0,[e(R,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((me=(re=j.row.cashier_session)==null?void 0:re.cashier_terminal)==null?void 0:me.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(W,{key:"customer_id",props:j},{default:l(()=>[j.row.customer?(u(),h("div",Y0,[t("div",null,[e(R,{name:"person",class:"inline-icon"}),v(" "+r(j.row.customer_code)+" - "+r(j.row.customer_name),1)]),j.row.customer_phone?(u(),h("div",W0,[e(R,{name:"phone",class:"inline-icon"}),v(" "+r(j.row.customer_phone),1)])):k("",!0),j.row.customer_address?(u(),h("div",Q0,[e(R,{name:"home_pin",class:"inline-icon"}),v(" "+r(j.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:j},{default:l(()=>[v(r(a(H)(j.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:j},{default:l(()=>[e($e,{text:j.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:j,onClick:E[10]||(E[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",J0,[$.$can("admin.sales-order.detail")||$.$can("admin.sales-order.edit")||$.$can("admin.sales-order.cancel")||$.$can("admin.sales-order.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:E[9]||(E[9]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[j.row.status!="draft"&&$.$can("admin.sales-order.detail")?te((u(),I(oe,{key:0,onClick:J(ae=>O(j.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"visibility"})]),_:1}),e(F,null,{default:l(()=>E[12]||(E[12]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),j.row.status=="draft"&&$.$can("admin.sales-order.edit")?te((u(),I(oe,{key:1,onClick:J(ae=>M(j.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>E[13]||(E[13]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),j.row.status=="draft"&&$.$can("admin.sales-order.cancel")?te((u(),I(oe,{key:2,onClick:J(ae=>B(j.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"cancel"})]),_:1}),e(F,null,{default:l(()=>E[14]||(E[14]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),$.$can("admin.sales-order.delete")?te((u(),I(oe,{key:3,onClick:J(ae=>A(j.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>E[15]||(E[15]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",A0,[e(ce,{modelValue:w.year,"onUpdate:modelValue":[E[2]||(E[2]=j=>w.year=j),U],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(u(),I(ce,{key:0,modelValue:w.month,"onUpdate:modelValue":[E[3]||(E[3]=j=>w.month=j),U],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:w.status,"onUpdate:modelValue":[E[4]||(E[4]=j=>w.status=j),U],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:w.payment_status,"onUpdate:modelValue":[E[5]||(E[5]=j=>w.payment_status=j),U],options:q,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":E[7]||(E[7]=j=>w.search=j),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},X0=Object.freeze(Object.defineProperty({__proto__:null,default:G0},Symbol.toStringTag,{value:"Module"})),Z0={},e2={class:"row"},t2={class:"q-mb-md text-h6"};function a2(c,s){const m=X("i-head"),o=X("authenticated-layout");return u(),h(G,null,[e(m,{title:"Informasi Sistem"}),e(o,null,{title:l(()=>s[0]||(s[0]=[v("Informasi Sistem")])),default:l(()=>[t("div",e2,[e(fe,{class:"col q-ma-xs",square:"",flat:"",bordered:""},{default:l(()=>[e(le,null,{default:l(()=>[t("div",t2,"Tentang "+r(c.$config.APP_NAME),1),v(" Versi : "+r(c.$config.APP_VERSION_STR),1),s[1]||(s[1]=t("br",null,null,-1)),s[2]||(s[2]=v(" Dikembangkan oleh Shiftech Indonesia")),s[3]||(s[3]=t("br",null,null,-1)),s[4]||(s[4]=v(" CV. Shift Karya Teknologi "))]),_:1})]),_:1})])]),_:1})],64)}const l2=kt(Z0,[["render",a2]]),o2=Object.freeze(Object.defineProperty({__proto__:null,default:l2},Symbol.toStringTag,{value:"Module"})),tn={__name:"CompanyInfoForm",setup(c){const s=T(),m=ge(),o=Qe({name:m.props.data.name,headline:m.props.data.headline,phone:m.props.data.phone,address:m.props.data.address,logo_path:m.props.data.logo_path,logo_image:null}),i=T(null),n=T("");he(()=>{o.logo_path&&(n.value=`/${o.logo_path}`)});function g(){i.value.click()}function b(f){const y=f.target.files[0];y&&(o.logo_image=y,n.value=URL.createObjectURL(y))}function p(){o.logo_image=null,o.logo_path=null,n.value=null,i.value.value=null}const d=()=>nt({form:o,url:route("admin.company-profile.edit")});return(f,y)=>(u(),I(Je,{class:"row",onSubmit:J(d,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[y[8]||(y[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),y[9]||(y[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(ne,{ref_key:"nameInputRef",ref:s,modelValue:a(o).name,"onUpdate:modelValue":y[0]||(y[0]=_=>a(o).name=_),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[_=>_&&_.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ne,{modelValue:a(o).headline,"onUpdate:modelValue":y[1]||(y[1]=_=>a(o).headline=_),modelModifiers:{trim:!0},label:"Headline",disable:a(o).processing,maxlength:"200","lazy-rules":"",error:!!a(o).errors.headline,"error-message":a(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).phone,"onUpdate:modelValue":y[2]||(y[2]=_=>a(o).phone=_),modelModifiers:{trim:!0},label:"No Telepon",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.phone,"error-message":a(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(o).address,"onUpdate:modelValue":y[3]||(y[3]=_=>a(o).address=_),modelModifiers:{trim:!0},label:"Alamat",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[y[7]||(y[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(D,{label:"Browse Logo",size:"sm",onClick:g,color:"secondary",icon:"add_a_photo",disable:a(o).processing},null,8,["disable"]),e(D,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:a(o).processing||!n.value,color:"red",onClick:p},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*",style:{display:"none"},onChange:b},null,544),t("div",null,[e(sa,{src:n.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},He({error:l(()=>[y[4]||(y[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[n.value?void 0:{name:"default",fn:l(()=>[y[5]||(y[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),y[6]||(y[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(le,null,{default:l(()=>[e(D,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},n2=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),s2={class:"q-pa-xs"},r2={class:"row justify-center"},i2={class:"col col-md-6"},Rl="Profil Perusahaan",d2={__name:"Edit",setup(c){return(s,m)=>{const o=X("i-head"),i=X("authenticated-layout");return u(),h(G,null,[e(o,{title:Rl}),e(i,null,{title:l(()=>[v(r(Rl))]),default:l(()=>[t("div",s2,[t("div",r2,[t("div",i2,[e(tn)])])])]),_:1})],64)}}},u2=Object.freeze(Object.defineProperty({__proto__:null,default:d2},Symbol.toStringTag,{value:"Module"})),m2={class:"col-xs-12 col-md-8"},c2={class:"col-xs-12 col-sm-9"},p2={class:"col-xs-12 col-sm-3 text-right"},Ol="Pengaturan Database & Utilitas",f2={__name:"Index",setup(c){const s=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:" **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:" **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:" **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(m,o)=>{const i=X("i-head"),n=X("authenticated-layout");return u(),h(G,null,[e(i,{title:Ol}),e(n,null,{title:l(()=>[v(r(Ol))]),default:l(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:l(()=>[t("div",m2,[e(fe,{square:"",flat:"",bordered:"",class:"full-width"},{default:l(()=>[e(le,null,{default:l(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Qt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:l(()=>[e(R,{name:"warning",color:"red"})]),default:l(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=v(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(Ae),e(le,{class:"q-gutter-y-lg"},{default:l(()=>[(u(),h(G,null,Be(s,g=>t("div",{key:g.name,class:"row items-center q-col-gutter-md"},[t("div",c2,[e(oe,{class:"q-pa-none"},{default:l(()=>[e(F,{avatar:"",class:"q-pr-md"},{default:l(()=>[e(R,{name:g.icon,color:g.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(F,{style:{"text-wrap":"initial"}},{default:l(()=>[e(we,{class:"text-subtitle1 text-bold"},{default:l(()=>[v(r(g.name),1)]),_:2},1024),e(we,{caption:"",class:"q-pb-sm"},{default:l(()=>[v(r(g.description),1)]),_:2},1024),e(we,{class:"text-caption text-negative text-bold"},{default:l(()=>[v(r(g.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",p2,[e(D,{icon:g.icon,label:g.name.split(" ")[0],color:g.color,disable:g.disable,onClick:g.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},g2=Object.freeze(Object.defineProperty({__proto__:null,default:f2},Symbol.toStringTag,{value:"Module"})),b2={class:"q-pa-xs"},v2={class:"row justify-center"},y2={class:"col col-md-6"},_2={__name:"Edit",setup(c){const s=ge(),m=Qe({foot_note:s.props.data.foot_note,default_payment_mode:s.props.data.default_payment_mode,default_print_size:s.props.data.default_print_size,after_payment_action:s.props.data.after_payment_action}),o=()=>nt({form:m,url:route("admin.pos-settings.edit")}),i=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],n=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],g=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(b,p)=>{const d=X("i-head"),f=X("authenticated-layout");return u(),h(G,null,[e(d,{title:"Pengaturan POS"}),e(f,null,{title:l(()=>p[4]||(p[4]=[v("Pengaturan POS")])),default:l(()=>[t("div",b2,[t("div",v2,[t("div",y2,[e(Je,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[p[5]||(p[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),p[6]||(p[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(ce,{modelValue:a(m).default_payment_mode,"onUpdate:modelValue":p[0]||(p[0]=y=>a(m).default_payment_mode=y),label:"Default Pembayaran",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:a(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(m).errors.default_payment_mode,"error-message":a(m).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(m).default_print_size,"onUpdate:modelValue":p[1]||(p[1]=y=>a(m).default_print_size=y),label:"Default Ukuran Cetak",options:n,"map-options":"","emit-value":"","lazy-rules":"",disable:a(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(m).errors.default_print_size,"error-message":a(m).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(m).after_payment_action,"onUpdate:modelValue":p[2]||(p[2]=y=>a(m).after_payment_action=y),label:"Aksi Setelah Pembayaran",options:g,"map-options":"","emit-value":"","lazy-rules":"",disable:a(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(m).errors.after_payment_action,"error-message":a(m).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(m).foot_note,"onUpdate:modelValue":p[3]||(p[3]=y=>a(m).foot_note=y),modelModifiers:{trim:!0},label:"Foot Note",disable:a(m).processing,"lazy-rules":"",error:!!a(m).errors.foot_note,"error-message":a(m).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,null,{default:l(()=>[e(D,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(m).processing,loading:a(m).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},k2=Object.freeze(Object.defineProperty({__proto__:null,default:_2},Symbol.toStringTag,{value:"Module"})),w2={class:"q-gutter-sm"},h2={class:"q-gutter-sm"},$2={class:"col col-md-6 q-pa-xs"},x2={class:"row"},S2={class:"detail-item"},V2={class:"detail-value"},q2={class:"detail-item"},C2={class:"detail-value"},T2={class:"detail-item"},P2={class:"detail-value"},R2={class:"detail-item"},O2={class:"detail-value"},I2={class:"detail-item"},U2={class:"detail-value"},D2={class:"detail-item"},E2={class:"detail-value"},j2={class:"detail-item"},A2={class:"detail-value"},M2={class:"detail-item"},N2={class:"detail-value user-agent-value"},B2={class:"q-pt-md"},z2={class:"table-wrapper-scroll"},F2={key:0,class:"table-metadata"},L2={key:0},H2={colspan:"100%"},K2={class:"text-mono json-pre-scroll"},Y2={key:1},W2={class:"metadata-label",style:{width:"100px"}},Q2={class:"metadata-value"},J2={key:0,class:"text-mono json-pre-scroll"},G2={key:2},X2={colspan:"3"},Z2={class:"table-metadata"},eh={class:"metadata-label"},th={class:"metadata-value"},ah={class:"metadata-value"},lh={key:1,class:"text-grey-8 text-italic q-pa-sm"},Il="Rincian Log Aktifitas",oh={__name:"Detail",setup(c){const s=ge(),m=()=>lt({message:`Hapus log aktifitas #${s.props.data.id}?`,url:route("admin.user-activity-log.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.user-activity-log.index"))}});return(o,i)=>{const n=X("i-head"),g=X("i-link"),b=X("authenticated-layout");return u(),h(G,null,[e(n,{title:Il}),e(b,{"show-drawer-button":!0},{title:l(()=>[v(r(Il))]),"left-button":l(()=>[t("div",w2,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=p=>o.$goBack())})])]),"right-button":l(()=>[t("div",h2,[e(D,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=p=>m())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",$2,[t("div",x2,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"detail-group"},{default:l(()=>[i[20]||(i[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",S2,[i[2]||(i[2]=t("div",{class:"detail-label"},"ID",-1)),i[3]||(i[3]=t("div",{class:"detail-separator"},":",-1)),t("div",V2,r(a(s).props.data.id),1)]),t("div",q2,[i[4]||(i[4]=t("div",{class:"detail-label"},"Waktu",-1)),i[5]||(i[5]=t("div",{class:"detail-separator"},":",-1)),t("div",C2,r(a(ve)(a(s).props.data.logged_at)),1)]),t("div",T2,[i[6]||(i[6]=t("div",{class:"detail-label"},"Pengguna",-1)),i[7]||(i[7]=t("div",{class:"detail-separator"},":",-1)),t("div",P2,[e(g,{href:o.route("admin.user.detail",{id:a(s).props.data.user_id})},{default:l(()=>[v(r(a(s).props.data.username),1)]),_:1},8,["href"])])]),t("div",R2,[i[8]||(i[8]=t("div",{class:"detail-label"},"Kategori",-1)),i[9]||(i[9]=t("div",{class:"detail-separator"},":",-1)),t("div",O2,r(a(s).props.data.activity_category_label),1)]),t("div",I2,[i[10]||(i[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),i[11]||(i[11]=t("div",{class:"detail-separator"},":",-1)),t("div",U2,r(a(s).props.data.activity_name_label),1)]),t("div",D2,[i[12]||(i[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),i[13]||(i[13]=t("div",{class:"detail-separator"},":",-1)),t("div",E2,r(a(s).props.data.description),1)]),t("div",j2,[i[14]||(i[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),i[15]||(i[15]=t("div",{class:"detail-separator"},":",-1)),t("div",A2,r(a(s).props.data.ip_address),1)]),t("div",M2,[i[16]||(i[16]=t("div",{class:"detail-label"},"User Agent",-1)),i[17]||(i[17]=t("div",{class:"detail-separator"},":",-1)),t("div",N2,r(a(s).props.data.user_agent),1)]),t("div",B2,[i[19]||(i[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",z2,[Object.keys(a(s).props.data.metadata).length>0?(u(),h("table",F2,[t("tbody",null,[(u(!0),h(G,null,Be(a(s).props.formatted_metadata,(p,d)=>(u(),h(G,{key:d},[p.type==="plain"?(u(),h("tr",L2,[t("td",H2,[t("pre",K2,r(p.value),1)])])):k("",!0),p.type==="simple"?(u(),h("tr",Y2,[t("td",W2,r(p.label),1),t("td",Q2,[p.label=="Data Mentah (JSON)"?(u(),h("pre",J2,r(p.value),1)):(u(),h(G,{key:1},[v(r(p.value),1)],64))])])):k("",!0),p.type==="comparison"?(u(),h("tr",G2,[t("td",X2,[t("table",Z2,[i[18]||(i[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(u(!0),h(G,null,Be(p.value,(f,y)=>(u(),h("tr",{class:Ce(f.new_value!==f.old_value?"value-changed":"")},[t("td",eh,r(f.field),1),t("td",th,r(f.old_value),1),t("td",ah,r(f.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(u(),h("div",lh," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},nh=kt(oh,[["__scopeId","data-v-37e21f0d"]]),sh=Object.freeze(Object.defineProperty({__proto__:null,default:nh},Symbol.toStringTag,{value:"Module"})),rh={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ih={class:"q-pa-xs"},dh={class:"full-width row flex-center text-grey-8 q-gutter-sm"},uh={key:0},mh={class:"flex justify-end"},Ul="Log Aktifitas Pengguna",ch={__name:"Index",setup(c){const s=ge(),m=Se(),o=T(!1),i=T([]),n=T(!0),g=T(null),b=T(null),p=et(b),{protectClick:d}=jt(),f=Ie({user_id:"all",activity_category:"all",activity_name:"all",search:"",...Fe()}),y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),_=[{value:"all",label:"Semua"},...s.props.users.map(E=>({value:E.id,label:E.username+" - "+E.name}))],q=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_categories).map(([E,N])=>({value:E,label:N}))],S=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_names).map(([E,N])=>({value:E,label:N}))],w=T(q),z=T(S),Y=(E,N)=>{if(E===""){N(()=>{w.value=q});return}N(()=>{const V=E.toLowerCase();w.value=q.filter(j=>j.label.toLowerCase().indexOf(V)>-1)})},C=(E,N)=>{if(E===""){N(()=>{z.value=S});return}N(()=>{const V=E.toLowerCase();z.value=S.filter(j=>j.label.toLowerCase().indexOf(V)>-1)})},M=[{name:"id",label:m.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{B()});const O=E=>lt({message:`Hapus log #${E.id}?`,url:route("admin.user-activity-log.delete",E.id),fetchItemsCallback:B,loading:n}),B=(E=null)=>{Le({pagination:y,filter:f,props:E,rows:i,url:route("admin.user-activity-log.data"),loading:n,tableRef:g})},A=()=>B(),U=d(E=>ee.get(route("admin.user-activity-log.detail",{id:E.id}))),P=Z(()=>m.screen.gt.sm?M:M.filter(E=>E.name==="id"||E.name==="action")),$=()=>{$t.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{ft("Seluruh log telah dibersihkan."),B()}).catch(E=>{var V,j;const N=((j=(V=E.response)==null?void 0:V.data)==null?void 0:j.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";pt(N,"bottom"),console.error(E)})})};return(E,N)=>{const V=X("i-head"),j=X("i-link"),ae=X("authenticated-layout");return u(),h(G,null,[e(V,{title:Ul}),e(ae,null,He({title:l(()=>[v(r(Ul))]),"right-button":l(()=>[e(D,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:N[0]||(N[0]=re=>o.value=!o.value)},null,8,["icon"]),E.$can("admin.user-activity-log.clear")?(u(),I(D,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:$})):k("",!0)]),default:l(()=>[t("div",ih,[e(Ue,{class:"full-height-table",ref_key:"tableRef",ref:g,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":N[7]||(N[7]=re=>y.value=re),filter:f.search,loading:n.value,columns:P.value,rows:i.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(p)}),onRequest:B,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:re,message:me,filter:Re})=>[t("div",dh,[t("span",null,r(me)+" "+r(Re?" with term "+Re:""),1)])]),body:l(re=>[e(Pe,{props:re,class:"cursor-pointer",onClick:J(me=>a(U)(re.row,me),["stop"])},{default:l(()=>[e(W,{key:"id",props:re},{default:l(()=>[t("div",null,[a(m).screen.lt.md?(u(),h(G,{key:0},[e(R,{name:"tag",class:"inline-icon"}),N[8]||(N[8]=v(" ID Aktifitas: "))],64)):k("",!0),v(" "+r(re.row.id),1)]),a(m).screen.lt.md?(u(),h("div",uh,[t("div",null,[e(R,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)(re.row.logged_at)),1)]),t("div",null,[e(R,{name:"person",class:"inline-icon"}),e(j,{onClick:N[5]||(N[5]=J(()=>{},["stop"])),href:E.route("admin.user.detail",{id:re.row.user_id})},{default:l(()=>[v(r(re.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(R,{name:"category",class:"inline-icon"}),v(" "+r(re.row.activity_category_label)+" > "+r(re.row.activity_name_label),1)]),t("div",null,[e(R,{name:"notes",class:"inline-icon"}),v(" "+r(re.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"logged_at",props:re},{default:l(()=>[v(r(a(ve)(re.row.logged_at)),1)]),_:2},1032,["props"]),e(W,{key:"username",props:re},{default:l(()=>[e(j,{onClick:N[6]||(N[6]=J(()=>{},["stop"])),href:E.route("admin.user.detail",{id:re.row.user_id})},{default:l(()=>[v(r(re.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(W,{key:"activity_category",props:re},{default:l(()=>[v(r(re.row.activity_category_label),1)]),_:2},1032,["props"]),e(W,{key:"activity_name",props:re},{default:l(()=>[v(r(re.row.activity_name_label),1)]),_:2},1032,["props"]),e(W,{key:"description",props:re,class:"wrap-column"},{default:l(()=>[v(r(re.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:re},{default:l(()=>[t("div",mh,[E.$can("admin.user-role.delete")?(u(),I(D,{key:0,onClick:J(me=>O(re.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",rh,[e(ce,{modelValue:f.user_id,"onUpdate:modelValue":[N[1]||(N[1]=re=>f.user_id=re),A],class:"custom-select col-xs-12 col-sm-2",options:_,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:f.activity_category,"onUpdate:modelValue":[N[2]||(N[2]=re=>f.activity_category=re),A],class:"custom-select col-xs-12 col-sm-2",options:w.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:Y,clearable:""},null,8,["modelValue","options"]),e(ce,{modelValue:f.activity_name,"onUpdate:modelValue":[N[3]||(N[3]=re=>f.activity_name=re),A],class:"custom-select col-xs-12 col-sm-2",options:z.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:C},null,8,["modelValue","options"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":N[4]||(N[4]=re=>f.search=re),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ph=Object.freeze(Object.defineProperty({__proto__:null,default:ch},Symbol.toStringTag,{value:"Module"})),an={__name:"UpdatePasswordForm",setup(c){const s=T(!1),m=T(null),o=T(null),i=Qe({current_password:"",password:"",password_confirmation:""}),n=()=>{i.clearErrors(),i.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>i.reset(),onError:()=>{i.errors.password&&(i.reset("password","password_confirmation"),m.value.focus()),i.errors.current_password&&(i.reset("current_password"),o.value.focus())}})};return(g,b)=>(u(),I(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[b[6]||(b[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),b[7]||(b[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(ne,{modelValue:a(i).current_password,"onUpdate:modelValue":b[1]||(b[1]=p=>a(i).current_password=p),type:s.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.current_password,"error-message":a(i).errors.current_password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(D,{dense:"",flat:"",round:"",onClick:b[0]||(b[0]=p=>s.value=!s.value)},{default:l(()=>[e(R,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(ne,{modelValue:a(i).password,"onUpdate:modelValue":b[3]||(b[3]=p=>a(i).password=p),type:s.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.password,"error-message":a(i).errors.password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(D,{dense:"",flat:"",round:"",onClick:b[2]||(b[2]=p=>s.value=!s.value)},{default:l(()=>[e(R,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(ne,{modelValue:a(i).password_confirmation,"onUpdate:modelValue":b[5]||(b[5]=p=>a(i).password_confirmation=p),type:s.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.password_confirmation,"error-message":a(i).errors.password_confirmation,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(D,{dense:"",flat:"",round:"",onClick:b[4]||(b[4]=p=>s.value=!s.value)},{default:l(()=>[e(R,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(le,null,{default:l(()=>[e(D,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},fh=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),ln={__name:"UpdateProfileInformationForm",setup(c){const m=ge().props.auth.user,o=Qe({name:m.name,username:m.username,type:window.CONSTANTS.USER_TYPES[m.type]}),i=()=>nt({form:o,url:route("admin.user-profile.update")});return(n,g)=>(u(),I(Je,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[g[3]||(g[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),g[4]||(g[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(ne,{modelValue:a(o).username,"onUpdate:modelValue":g[0]||(g[0]=b=>a(o).username=b),label:"ID Pengguna",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(ne,{modelValue:a(o).name,"onUpdate:modelValue":g[1]||(g[1]=b=>a(o).name=b),modelModifiers:{trim:!0},label:"Nama",disable:a(o).processing,error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[b=>b&&b.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ne,{modelValue:a(o).type,"onUpdate:modelValue":g[2]||(g[2]=b=>a(o).type=b),label:"Jenis Akun",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(le,null,{default:l(()=>[e(D,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},gh=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),bh={class:"q-pa-xs"},vh={class:"row justify-center"},yh={class:"col col-md-6"},Dl="Pengaturan Pribadi",_h={__name:"Edit",setup(c){return(s,m)=>{const o=X("i-head"),i=X("authenticated-layout");return u(),h(G,null,[e(o,{title:Dl}),e(i,null,{title:l(()=>[v(r(Dl))]),default:l(()=>[t("div",bh,[t("div",vh,[t("div",yh,[e(ln,{class:"q-mb-md"}),e(an)])])])]),_:1})],64)}}},kh=Object.freeze(Object.defineProperty({__proto__:null,default:_h},Symbol.toStringTag,{value:"Module"})),wh={class:"q-gutter-sm"},hh={class:"q-gutter-sm"},$h={class:"col col-md-6 q-pa-xs"},xh={class:"row"},Sh={class:"detail"},Vh={key:0},qh={key:1,class:"text-grey-8 text-italic"},Ch={key:2},Th={class:"text-subtitle2 text-bold text-grey-8 q-mt-xs"},Ph={key:3,class:"text-grey-8 text-italic"},El="Rincian Role Pengguna",Rh={__name:"Detail",setup(c){const s=ge(),m=Z(()=>{const o={};return s.props.data.permissions&&s.props.data.permissions.forEach(i=>{const n=i.category;o[n]||(o[n]=[]),o[n].push(i)}),o});return(o,i)=>{const n=X("i-head"),g=X("i-link"),b=X("authenticated-layout");return u(),h(G,null,[e(n,{title:El}),e(b,{"show-drawer-button":!0},{title:l(()=>[v(r(El))]),"left-button":l(()=>[t("div",wh,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=p=>o.$goBack())})])]),"right-button":l(()=>[t("div",hh,[o.$can("admin.user-role.edit")?(u(),I(D,{key:0,icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=p=>a(ee).get(o.route("admin.user-role.edit",{id:a(s).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",$h,[t("div",xh,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[i[7]||(i[7]=t("div",{class:"text-subtitle1 text-bold text-grey-8"},"Info Role",-1)),t("table",Sh,[t("tbody",null,[t("tr",null,[i[2]||(i[2]=t("td",{style:{width:"100px"}},"Nama Role",-1)),i[3]||(i[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[i[4]||(i[4]=t("td",null,"Deskripsi",-1)),i[5]||(i[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.description),1)])])]),i[8]||(i[8]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Pengguna ",-1)),a(s).props.data.users.length>0?(u(),h("div",Vh,[(u(!0),h(G,null,Be(a(s).props.data.users,p=>(u(),h("div",null,[i[6]||(i[6]=v("  ")),e(g,{href:o.route("admin.user.detail",{id:p.id})},{default:l(()=>[v(r(p.username)+" - "+r(p.name),1)]),_:2},1032,["href"])]))),256))])):(u(),h("div",qh," Belum ada akun pengguna yang terdaftar. ")),i[9]||(i[9]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Hak Akses ",-1)),a(s).props.data.permissions.length>0?(u(),h("div",Ch,[(u(!0),h(G,null,Be(m.value,(p,d)=>(u(),h("div",{key:d},[t("div",Th,r(d),1),(u(!0),h(G,null,Be(p,f=>(u(),h("div",{key:f.id},"  "+r(f.label),1))),128))]))),128))])):(u(),h("div",Ph," Belum ada hak akses yang ditetapkan. "))]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Oh=Object.freeze(Object.defineProperty({__proto__:null,default:Rh},Symbol.toStringTag,{value:"Module"})),Ih={class:"q-gutter-sm"},Uh={class:"col col-md-6 q-pa-xs"},Dh={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},Eh={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description,permissions:s.props.data.permissions?s.props.data.permissions.map(g=>g.id):[]}),i=()=>nt({form:o,url:route("admin.user-role.save")}),n=Z(()=>{const g={};return s.props.permissions&&s.props.permissions.forEach(b=>{const p=b.category;g[p]||(g[p]=[]),g[p].push(b)}),g});return(g,b)=>{const p=X("i-head"),d=X("authenticated-layout");return u(),h(G,null,[e(p,{title:m}),e(d,{"show-drawer-button":!0},{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",Ih,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),"right-button":l(()=>[e(D,{icon:"save",label:"Simpan",color:"primary",disable:a(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:J(i,["prevent"])},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Uh,[e(Je,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>a(o).id=f)},null,512),[[yt,a(o).id]]),e(ne,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":b[2]||(b[2]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).description,"onUpdate:modelValue":b[3]||(b[3]=f=>a(o).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(u(!0),h(G,null,Be(n.value,(f,y)=>(u(),h("div",{key:y},[t("div",Dh,r(y),1),(u(!0),h(G,null,Be(f,_=>(u(),h("div",{key:_.id},[e(na,{class:"q-ma-none q-pa-none list-checkbox",modelValue:a(o).permissions,"onUpdate:modelValue":q=>a(o).permissions=q,val:_.id,label:_.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},jh=kt(Eh,[["__scopeId","data-v-2c2a059c"]]),Ah=Object.freeze(Object.defineProperty({__proto__:null,default:jh},Symbol.toStringTag,{value:"Module"})),Mh={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Nh={class:"q-pa-xs"},Bh={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zh={class:"flex justify-end"},jl="Role Pengguna",Fh={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=Ie({search:"",...Fe()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Role",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{_()});const y=Y=>lt({message:`Hapus role ${Y.name}?`,url:route("admin.user-role.delete",Y.id),fetchItemsCallback:_,loading:i}),_=(Y=null)=>{Le({pagination:d,filter:p,props:Y,rows:o,url:route("admin.user-role.data"),loading:i,tableRef:n})},q=Y=>ee.get(route("admin.user-role.detail",{id:Y.id})),{protectClick:S}=jt(),w=S(q),z=Z(()=>s.screen.gt.sm?f:f.filter(Y=>Y.name==="name"||Y.name==="action"));return(Y,C)=>{const M=X("i-head"),O=X("authenticated-layout");return u(),h(G,null,[e(M,{title:jl}),e(O,null,He({title:l(()=>[v(r(jl))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:C[0]||(C[0]=B=>m.value=!m.value)},null,8,["icon"]),Y.$can("admin.user-role.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:C[1]||(C[1]=B=>a(ee).get(Y.route("admin.user-role.add")))})):k("",!0)]),default:l(()=>[t("div",Nh,[e(Ue,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":C[4]||(C[4]=B=>d.value=B),filter:p.search,loading:i.value,columns:z.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:B,message:A,filter:x})=>[t("div",Bh,[t("span",null,r(A)+" "+r(x?" with term "+x:""),1)])]),body:l(B=>[e(Pe,{props:B,class:"cursor-pointer",onClick:J(A=>a(w)(B.row,A),["stop"])},{default:l(()=>[e(W,{key:"name",props:B,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.lt.md?(u(),I(R,{key:0,name:"person"})):k("",!0),v(" "+r(B.row.name),1)])]),_:2},1032,["props"]),e(W,{key:"description",props:B,class:"wrap-column"},{default:l(()=>[v(r(B.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:B},{default:l(()=>[t("div",zh,[Y.$can("admin.user-role.add")||Y.$can("admin.user-role.edit")||Y.$can("admin.user-role.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:C[3]||(C[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[Y.$can("admin.user-role.add")?te((u(),I(oe,{key:0,clickable:"",onClick:J(A=>a(ee).get(Y.route("admin.user-role.duplicate",B.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>C[5]||(C[5]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),Y.$can("admin.user-role.edit")?te((u(),I(oe,{key:1,clickable:"",onClick:J(A=>a(ee).get(Y.route("admin.user-role.edit",B.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>C[6]||(C[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),Y.$can("admin.user-role.delete")?te((u(),I(oe,{key:2,onClick:J(A=>y(B.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>C[7]||(C[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Mh,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":C[2]||(C[2]=B=>p.search=B),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Lh=Object.freeze(Object.defineProperty({__proto__:null,default:Fh},Symbol.toStringTag,{value:"Module"})),Hh={class:"q-gutter-sm"},Kh={class:"q-gutter-sm"},Yh={class:"row justify-center"},Wh={class:"col col-md-6 q-pa-xs"},Qh={class:"row"},Jh={class:"detail"},Gh={key:0},Xh={key:0},Zh={key:1},e$={key:2},Al="Rincian Pengguna",t$={__name:"Detail",setup(c){const s=ge();return(m,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return u(),h(G,null,[e(i,{title:Al}),e(g,{"show-drawer-button":!0},{title:l(()=>[v(r(Al))]),"left-button":l(()=>[t("div",Hh,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.$inertia.get(m.route("admin.user.index")))})])]),"right-button":l(()=>[t("div",Kh,[m.$can("admin.user.edit")&&a(s).props.data.id!=a(s).props.auth.user.id?(u(),I(D,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:o[1]||(o[1]=b=>m.$inertia.get(m.route("admin.user.edit",{id:a(s).props.data.id})))})):k("",!0)])]),default:l(()=>[t("div",Yh,[t("div",Wh,[t("div",Qh,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>{var b,p;return[o[21]||(o[21]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),t("table",Jh,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"125px"}},"ID Pengguna",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.username),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Nama Pengguna",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Jenis Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.USER_TYPES[a(s).props.data.type]),1)]),a(s).props.data.roles.length>0?(u(),h("tr",Gh,[o[8]||(o[8]=t("td",null,"Peran Pengguna",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,[(u(!0),h(G,null,Be(a(s).props.data.roles,(d,f)=>(u(),h("div",{key:d.id,class:"inline"},[e(n,{href:m.route("admin.user-role.detail",{id:d.id})},{default:l(()=>[v(r(d.name),1)]),_:2},1032,["href"]),f<a(s).props.data.roles.length-1?(u(),h("span",Xh,", ")):k("",!0)]))),128))])])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Status",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Dibuat",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.created_at))+" oleh "+r(((b=a(s).props.data.creator)==null?void 0:b.name)??"Sistem")+" ("+r(((p=a(s).props.data.creator)==null?void 0:p.username)??"system")+") ",1)]),a(s).props.data.updated_at?(u(),h("tr",Zh,[o[14]||(o[14]=t("td",null,"Diperbarui",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,[v(r(a(ve)(a(s).props.data.updated_at))+" ",1),a(s).props.data.updater?(u(),h(G,{key:0},[v(" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(s).props.data.updater.username)+") ",1)],64)):k("",!0)])])):k("",!0),t("tr",null,[o[16]||(o[16]=t("td",null,"Terakhir login",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.last_login_datetime?m.$dayjs(a(s).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),a(s).props.data.last_activity_datetime?(u(),h("tr",e$,[o[19]||(o[19]=t("td",null,"Aktifitas Terakhir",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,[v(r(m.$dayjs(a(s).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),o[18]||(o[18]=t("br",null,null,-1)),v(r(a(s).props.data.last_activity_description),1)])])):k("",!0)])])]}),_:1})]),_:1})])])])]),_:1})],64)}}},a$=Object.freeze(Object.defineProperty({__proto__:null,default:t$},Symbol.toStringTag,{value:"Module"}));function l$(c){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(c)}const o$={class:"q-gutter-sm"},n$={class:"row justify-center"},s$={class:"col col-md-6 q-pa-xs"},r$={__name:"Editor",setup(c){const s=tt(window.CONSTANTS.USER_TYPES),m=ge(),o=m.props.roles,i=m.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=T(!m.props.data.id),g=m.props.data.roles,b=Array.isArray(g)?g.map(f=>f.id):[],p=Qe({id:m.props.data.id,name:m.props.data.name,username:m.props.data.username,password:m.props.data.id?null:"12345",type:m.props.data.type?m.props.data.type:s[0].value,active:!!m.props.data.active,roles:b}),d=()=>nt({form:p,url:route("admin.user.save")});return(f,y)=>{const _=X("i-head"),q=X("authenticated-layout");return u(),h(G,null,[e(_,{title:a(i)},null,8,["title"]),e(q,{"show-drawer-button":!0},{title:l(()=>[v(r(a(i)),1)]),"left-button":l(()=>[t("div",o$,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=S=>f.$goBack())})])]),default:l(()=>[t("div",n$,[t("div",s$,[e(Je,{class:"row",onSubmit:J(d,["prevent"])},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[1]||(y[1]=S=>a(p).id=S)},null,512),[[yt,a(p).id]]),e(ne,{autofocus:"",modelValue:a(p).username,"onUpdate:modelValue":y[2]||(y[2]=S=>a(p).username=S),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:a(p).processing,error:!!a(p).errors.username,"error-message":a(p).errors.username,rules:[S=>S&&S.length>0||"Username harus diisi.",S=>a(l$)(S)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ne,{modelValue:a(p).name,"onUpdate:modelValue":y[3]||(y[3]=S=>a(p).name=S),modelModifiers:{trim:!0},label:"Nama",error:!!a(p).errors.name,disable:a(p).processing,"error-message":a(p).errors.name,rules:[S=>S&&S.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(p).password,"onUpdate:modelValue":y[5]||(y[5]=S=>a(p).password=S),label:"Kata Sandi","lazy-rules":"",disable:a(p).processing,error:!!a(p).errors.password,"error-message":a(p).errors.password,"hide-bottom-space":"",type:n.value?"text":"password"},{append:l(()=>[e(D,{dense:"",flat:"",round:"",onClick:y[4]||(y[4]=S=>n.value=!n.value)},{default:l(()=>[e(R,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","disable","error","error-message","type"]),e(ce,{modelValue:a(p).type,"onUpdate:modelValue":y[6]||(y[6]=S=>a(p).type=S),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"","lazy-rules":"",disable:a(p).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(p).errors.type,"error-message":a(p).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),a(p).type=="standard_user"?(u(),I(ce,{key:0,modelValue:a(p).roles,"onUpdate:modelValue":y[7]||(y[7]=S=>a(p).roles=S),label:"Peran",options:a(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:a(p).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(p).errors.roles||!!a(p).errors["roles.0"],"error-message":a(p).errors.roles||a(p).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(ya,{modelValue:a(p).active,"onUpdate:modelValue":y[8]||(y[8]=S=>a(p).active=S),disable:a(p).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(p).processing,onClick:d},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",class:"text-black",disable:a(p).processing,onClick:y[9]||(y[9]=S=>f.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},i$=Object.freeze(Object.defineProperty({__proto__:null,default:r$},Symbol.toStringTag,{value:"Module"})),d$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},u$={class:"q-pa-xs"},m$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},c$={class:"elipsis",style:{"max-width":"200px"}},p$={class:"flex justify-end"},Ml="Pengguna",f$={__name:"Index",setup(c){const s=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.USER_TYPES)],m=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=ge(),i=Se(),n=o.props.auth.user,g=T([]),b=T(!0),p=T(!1),d=Ie({type:"all",roles:[],status:"active",search:""}),f=o.props.roles.map(x=>({value:x.id,label:x.name})),y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),_=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];he(()=>{S()});const q=()=>S(),S=(x=null)=>Le({pagination:y,props:x,rows:g,loading:b,filter:d,url:route("admin.user.data"),tableRef:O}),w=x=>lt({url:route("admin.user.delete",x.id),message:`Hapus pengguna ${x.username}?`,fetchItemsCallback:S,loading:b}),z=Z(()=>i.screen.gt.sm?_:_.filter(x=>x.name==="username"||x.name==="action")),Y=x=>ee.get(route("admin.user.detail",x.id)),{protectClick:C}=jt(),M=C(Y),O=T(null),B=T(null),A=et(B);return(x,U)=>{const P=X("i-head"),$=X("authenticated-layout");return u(),h(G,null,[e(P,{title:Ml}),e($,null,He({title:l(()=>[v(r(Ml))]),"right-button":l(()=>[e(D,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=E=>p.value=!p.value)},null,8,["icon"]),x.$can("admin.user.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:U[1]||(U[1]=E=>a(ee).get(x.route("admin.user.add")))})):k("",!0)]),default:l(()=>[t("div",u$,[e(Ue,{ref_key:"tableRef",ref:O,class:"full-height-table",style:Ke({height:a(A)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":U[7]||(U[7]=E=>y.value=E),filter:d.search,loading:b.value,columns:z.value,rows:g.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:E,message:N,term:V})=>[t("div",m$,[t("span",null,r(N)+" "+r(V?" with term "+V:""),1)])]),body:l(E=>[e(Pe,{props:E,class:Ce([E.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(N=>a(M)(E.row,N),["stop"])},{default:l(()=>[e(W,{key:"username",props:E},{default:l(()=>[t("div",null,[a(i).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[e(R,{name:"person",class:"inline-icon"}),U[8]||(U[8]=v(" Username: "))],64)),v(" "+r(E.row.username),1)]),a(i).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[t("div",null,[e(R,{name:"person",class:"inline-icon"}),v(" Nama: "+r(E.row.name),1)]),t("div",c$,[e(R,{name:"group",class:"inline-icon"}),U[9]||(U[9]=v(" Jenis Akun: ")),t("span",null,r(x.$CONSTANTS.USER_TYPES[E.row.type]),1)]),t("div",null,[e(R,{name:"group",class:"inline-icon"}),v(" Peran: "+r(E.row.roles.map(N=>N.name).join(",")),1)])],64))]),_:2},1032,["props"]),e(W,{key:"name",props:E},{default:l(()=>[v(r(E.row.name),1)]),_:2},1032,["props"]),e(W,{key:"role",props:E,align:"center"},{default:l(()=>[t("span",null,r(x.$CONSTANTS.USER_TYPES[E.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"action",props:E},{default:l(()=>[t("div",p$,[x.$can("admin.user.add")||x.$can("admin.user.edit")||x.$can("admin.user.delete")?(u(),I(D,{key:0,disable:E.row.id==a(n).id||E.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:U[6]||(U[6]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[x.$can("admin.user.add")?te((u(),I(oe,{key:0,clickable:"",onClick:J(N=>a(ee).get(x.route("admin.user.duplicate",E.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>U[10]||(U[10]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),x.$can("admin.user.edit")?te((u(),I(oe,{key:1,clickable:"",onClick:J(N=>a(ee).get(x.route("admin.user.edit",E.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>U[11]||(U[11]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),x.$can("admin.user.delete")?te((u(),I(oe,{key:2,onClick:J(N=>w(E.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>U[12]||(U[12]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[p.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:B},{default:l(()=>[t("div",d$,[e(ce,{modelValue:d.type,"onUpdate:modelValue":[U[2]||(U[2]=E=>d.type=E),q],class:"custom-select col-xs-12 col-sm-2",options:s,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:d.status,"onUpdate:modelValue":[U[3]||(U[3]=E=>d.status=E),q],class:"custom-select col-xs-12 col-sm-2",options:m,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:d.roles,"onUpdate:modelValue":[U[4]||(U[4]=E=>d.roles=E),q],class:"custom-select col-xs-12 col-sm-2",options:a(f),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:d.search,"onUpdate:modelValue":U[5]||(U[5]=E=>d.search=E),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},g$=Object.freeze(Object.defineProperty({__proto__:null,default:f$},Symbol.toStringTag,{value:"Module"})),b$={class:"q-gutter-sm"},v$={class:"col col-lg-6 q-pa-xs"},y$={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},_$={class:"row q-col-gutter-sm q-mb-md"},k$={key:0},w$={class:"text-bold"},h$={key:0},$$={class:"text-caption text-grey-8"},x$={key:1},Nl="Buat Penyesuaian Stok",S$={__name:"Create",setup(c){const s=ge(),m=T(!1),o=s.props.products,{filteredCategories:i,filterCategories:n}=Da(s.props.categories),{filteredSuppliers:g,filterSupplierFn:b}=Ea(s.props.suppliers),p=T({search:null,category_id:null,supplier_id:null}),d=T([]),f=Qe({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),y=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(Y,C)=>H(Y)+" "+C.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],_=tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),q=Z(()=>o.filter(Y=>{let C=!0;if(m.value&&!d.value.find(M=>M.id===Y.id))return!1;if(p.value.search){const M=p.value.search.toLowerCase();C=Y.name.toLowerCase().includes(M)||Y.description.toLowerCase().includes(M)||Y.barcode&&Y.barcode.toLowerCase().includes(M)}return C&&p.value.category_id&&(C=Y.category_id===p.value.category_id),C&&p.value.supplier_id&&(C=Y.supplier_id===p.value.supplier_id),C})),S=()=>{$t.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{f.product_ids=d.value.map(Y=>Y.id),ra(f,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:f,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},w=Se(),z=Z(()=>w.screen.gt.sm?y:y.filter(Y=>Y.name==="name"));return(Y,C)=>{const M=X("i-head"),O=X("authenticated-layout");return u(),h(G,null,[e(M,{title:Nl}),e(O,{"show-drawer-button":!0},{title:l(()=>[v(r(Nl))]),"left-button":l(()=>[t("div",b$,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:C[0]||(C[0]=B=>a(ee).get(Y.route("admin.stock-adjustment.index")))})])]),"right-button":l(()=>[e(D,{icon:"cancel",disable:a(f).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:C[1]||(C[1]=B=>a(ee).get(Y.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(D,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:a(f).processing||d.value.length==0,class:"q-ml-sm",onClick:S},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",v$,[e(Je,{class:"row",onSubmit:J(S,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-sm"},{default:l(()=>{var B,A,x;return[C[10]||(C[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Lt,{modelValue:a(f).datetime,"onUpdate:modelValue":C[2]||(C[2]=U=>a(f).datetime=U),label:"Waktu",error:!!a(f).errors.datetime,disable:a(f).processing,"error-message":a(f).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:a(f).type,"onUpdate:modelValue":C[3]||(C[3]=U=>a(f).type=U),options:a(_),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(f).errors.type,disable:a(f).processing,"map-options":"","emit-value":"","error-message":a(f).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(ne,{modelValue:a(f).notes,"onUpdate:modelValue":C[4]||(C[4]=U=>a(f).notes=U),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(f).processing,error:!!a(f).errors.notes,"error-message":a(f).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),d.value.length===0||(B=a(s).props.errors)!=null&&B.product_ids?(u(),h("div",y$,[d.value.length===0?(u(),h(G,{key:0},[v(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(A=a(s).props.errors)!=null&&A.product_ids?(u(),h(G,{key:1},[v(r((x=a(s).props.errors)==null?void 0:x.product_ids),1)],64)):k("",!0)])):k("",!0),C[11]||(C[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",_$,[e(ne,{modelValue:p.value.search,"onUpdate:modelValue":C[5]||(C[5]=U=>p.value.search=U),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(ce,{modelValue:p.value.category_id,"onUpdate:modelValue":C[6]||(C[6]=U=>p.value.category_id=U),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(i),"map-options":"",dense:"","emit-value":"",onFilter:a(n),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(ce,{modelValue:p.value.supplier_id,"onUpdate:modelValue":C[7]||(C[7]=U=>p.value.supplier_id=U),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(g),"map-options":"",dense:"","emit-value":"",onFilter:a(b),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:C[8]||(C[8]=U=>m.value=!m.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},r(m.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:z.value,rows:q.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:d.value,"onUpdate:selected":C[9]||(C[9]=U=>d.value=U)},{"body-cell-name":l(U=>[e(W,{props:U},{default:l(()=>[a(w).screen.lt.md?(u(),h("div",k$,[t("div",w$,r(U.row.name),1),U.row.category?(u(),h("div",h$,r(U.row.category.name),1)):k("",!0),t("div",$$,r(a(H)(U.row.stock))+" "+r(U.row.uom),1)])):(u(),h("div",x$,r(U.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},V$=Object.freeze(Object.defineProperty({__proto__:null,default:S$},Symbol.toStringTag,{value:"Module"})),q$={class:"q-gutter-sm"},C$={class:"q-gutter-sm"},T$={class:"row justify-center"},P$={class:"col col-lg-8 q-pa-sm"},R$={class:"row"},O$={class:"detail"},I$={key:0},U$={key:1},D$={class:"text-grey-9"},E$={__name:"Detail",setup(c){const s=ge(),m=`Rincian #${s.props.data.code}`,o=s.props.details,i=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:p=>H(p)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:p=>H(p)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:p=>H(p)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],n=Se(),g=Z(()=>n.screen.gt.sm?i:i.filter(p=>p.name==="no")),b=()=>{window.open(route("admin.stock-adjustment.print",{id:s.props.data.id}),"_blank")};return(p,d)=>{const f=X("i-head"),y=X("i-link"),_=X("authenticated-layout");return u(),h(G,null,[e(f,{title:m}),e(_,{"show-drawer-button":!0},{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",q$,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=q=>p.$inertia.get(p.route("admin.stock-adjustment.index")))})])]),"right-button":l(()=>[t("div",C$,[e(D,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[1]||(d[1]=q=>b())})])]),default:l(()=>[t("div",T$,[t("div",P$,[t("div",R$,[e(fe,{square:"",flat:"",bordered:"",class:"q-card col"},{default:l(()=>[e(le,null,{default:l(()=>[d[22]||(d[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",O$,[t("tbody",null,[t("tr",null,[d[2]||(d[2]=t("td",{style:{width:"120px"}},"Kode",-1)),d[3]||(d[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+r(a(s).props.data.code),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"Jenis",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,r(p.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[a(s).props.data.type]),1)]),t("tr",null,[d[6]||(d[6]=t("td",null,"Status",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,r(p.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[a(s).props.data.status]),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Waktu",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.datetime)),1)]),a(s).props.data.created_at?(u(),h("tr",I$,[d[11]||(d[11]=t("td",null,"Dibuat Oleh",-1)),d[12]||(d[12]=t("td",null,":",-1)),t("td",null,[a(s).props.data.creator?(u(),h(G,{key:0},[e(y,{href:p.route("admin.user.detail",{id:a(s).props.data.creator})},{default:l(()=>[v(r(a(s).props.data.creator.username)+" - "+r(a(s).props.data.creator.name),1)]),_:1},8,["href"]),d[10]||(d[10]=v(" - "))],64)):k("",!0),v(" "+r(a(ve)(a(s).props.data.created_at)),1)])])):k("",!0),a(s).props.data.updater?(u(),h("tr",U$,[d[14]||(d[14]=t("td",null,"Diperbarui oleh",-1)),d[15]||(d[15]=t("td",null,":",-1)),t("td",null,[a(s).props.data.updater?(u(),h(G,{key:0},[e(y,{href:p.route("admin.user.detail",{id:a(s).props.data.updater})},{default:l(()=>[v(r(a(s).props.data.updater.username)+" - "+r(a(s).props.data.updater.name),1)]),_:1},8,["href"]),d[13]||(d[13]=v(" - "))],64)):k("",!0),v(" "+r(a(ve)(a(s).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[d[16]||(d[16]=t("td",null,"Total Modal",-1)),d[17]||(d[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:Ce(a(s).props.data.total_cost<0?"text-red-10":a(s).props.data.total_cost>0?"text-green-10":"")},r(a(la)(a(s).props.data.total_cost)),3)])]),t("tr",null,[d[18]||(d[18]=t("td",null,"Total Harga",-1)),d[19]||(d[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:Ce(a(s).props.data.total_price<0?"text-red-10":a(s).props.data.total_price>0?"text-green-10":"")},r(a(la)(a(s).props.data.total_price)),3)])]),t("tr",null,[d[20]||(d[20]=t("td",null,"Catatan",-1)),d[21]||(d[21]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)])])])]),_:1}),e(le,null,{default:l(()=>[d[28]||(d[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Ue,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:g.value,rows:a(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":l(q=>[e(W,{props:q},{default:l(()=>[a(n).screen.lt.md?(u(),h(G,{key:1},[t("div",D$,[t("b",null,"#"+r(q.rowIndex+1),1),d[23]||(d[23]=v(" - ")),e(y,{href:p.route("admin.product.detail",{id:q.row.product_id})},{default:l(()=>[v(r(q.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[v(" Stok Lama: "+r(a(H)(q.row.old_quantity))+" "+r(q.row.uom),1),d[25]||(d[25]=t("br",null,null,-1)),v(" Stok Baru: "+r(a(H)(q.row.new_quantity))+" "+r(q.row.uom),1),d[26]||(d[26]=t("br",null,null,-1)),t("div",{class:Ce(q.row.balance<0?"text-red-10":q.row.balance>0?"text-green-10":"")},[v(" Selisih: "+r((q.row.balance>0?"+":"")+a(H)(q.row.balance))+" "+r(q.row.uom),1),d[24]||(d[24]=t("br",null,null,-1)),v(" (Rp. "+r(a(H)(q.row.subtotal_cost))+" / Rp. "+r(a(H)(q.row.subtotal_price))+") ",1)],2),d[27]||(d[27]=t("br",null,null,-1)),v(" "+r(q.row.notes),1)])],64)):(u(),h(G,{key:0},[v(r(q.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":l(q=>[e(W,{props:q},{default:l(()=>[e(y,{href:p.route("admin.product.detail",{id:q.row.product_id})},{default:l(()=>[v(r(q.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":l(q=>[e(W,{props:q},{default:l(()=>[t("div",{class:Ce(q.row.balance<0?"text-red-10":q.row.balance>0?"text-green-10":"")},r((q.row.balance>0?"+":"")+a(H)(q.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":l(q=>[e(W,{props:q},{default:l(()=>[t("div",{class:Ce(q.row.balance<0?"text-red-10":q.row.balance>0?"text-green-10":"")},r(a(H)(q.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":l(q=>[e(W,{props:q},{default:l(()=>[t("div",{class:Ce(q.row.balance<0?"text-red-10":q.row.balance>0?"text-green-10":"")},r(a(H)(q.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},j$=Object.freeze(Object.defineProperty({__proto__:null,default:E$},Symbol.toStringTag,{value:"Module"})),A$={class:"q-gutter-sm"},M$={class:"col col-lg-6 q-pa-xs"},N$={class:"text-bold"},B$={key:0},z$={class:"text-caption text-grey-8"},Bl="Penyesuaian Stok",F$={__name:"Editor",setup(c){const s=Se(),m=ge(),o=Qe({id:m.props.item.id,type:m.props.item.type,datetime:new Date(m.props.item.datetime),notes:m.props.item.notes,action:"save",details:[]}),i=tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),n=T(m.props.details.map(f=>(typeof f.new_quantity=="string"&&(f.new_quantity=parseFloat(f.new_quantity)),f))),g=f=>{const y=()=>{o.action=f,o.details=n.value.map(_=>({id:_.id,new_quantity:_.new_quantity})),ra(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:o,url:route("admin.stock-adjustment.save")})};f==="close"||f==="cancel"?$t.create({title:"Konfirmasi",message:f==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{y()}).onCancel(()=>{}):y()},b=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:f=>H(f)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:f=>H(f)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(f,y)=>H(y.new_quantity-y.old_quantity)}],p=Z(()=>s.screen.gt.sm?b:b.filter(f=>f.name==="product_name"||f.name==="new_quantity")),d=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(f,y)=>{const _=X("i-head"),q=X("authenticated-layout");return u(),h(G,null,[e(_,{title:Bl}),e(q,{"show-drawer-button":!0},{title:l(()=>[v(r(Bl))]),"left-button":l(()=>[t("div",A$,[a(s).screen.gt.sm?(u(),I(D,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=S=>f.$inertia.get(f.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":l(()=>[e(D,{icon:"save",onClick:y[1]||(y[1]=S=>g("save")),disable:a(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(D,{icon:"check",onClick:y[2]||(y[2]=S=>g("close")),disable:a(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),f.$can("admin.product.import")||f.$can("admin.product:view-cost")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:y[5]||(y[5]=J(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[te((u(),I(oe,{clickable:"",onClick:y[3]||(y[3]=S=>d())},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"print"})]),_:1}),e(F,null,{default:l(()=>y[10]||(y[10]=[v(" Cetak Kartu Stok")])),_:1})]),_:1})),[[ie],[pe]]),te((u(),I(oe,{clickable:"",onClick:y[4]||(y[4]=J(S=>g("cancel"),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"cancel",color:"red"})]),_:1}),e(F,{class:"text-red"},{default:l(()=>y[11]||(y[11]=[v("Batalkan")])),_:1})]),_:1})),[[ie],[pe]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",M$,[e(Je,{class:"row",onSubmit:J(g,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>y[12]||(y[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[6]||(y[6]=S=>a(o).id=S)},null,512),[[yt,a(o).id]]),e(Lt,{modelValue:a(o).datetime,"onUpdate:modelValue":y[7]||(y[7]=S=>a(o).datetime=S),label:"Waktu",error:!!a(o).errors.datetime,disable:a(o).processing,"error-message":a(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":y[8]||(y[8]=S=>a(o).type=S),options:a(i),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(o).errors.type,disable:a(o).processing,"map-options":"","emit-value":"","error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(ne,{modelValue:a(o).notes,"onUpdate:modelValue":y[9]||(y[9]=S=>a(o).notes=S),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-pa-xs"},{default:l(()=>[e(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:p.value,rows:n.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":l(S=>[e(W,{props:S},{default:l(()=>[t("div",N$,r(S.row.product_name),1),a(s).screen.lt.md?(u(),h("div",B$,[t("div",z$,[v(" Tercatat: "+r(a(H)(S.row.old_quantity))+" ",1),y[13]||(y[13]=t("br",null,null,-1)),v(" Selisih: "+r(a(H)(S.row.new_quantity-S.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":l(S=>[e(W,{props:S,class:"text-center"},{default:l(()=>[e(Ee,{modelValue:S.row[S.col.name],"onUpdate:modelValue":w=>S.row[S.col.name]=w,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},L$=Object.freeze(Object.defineProperty({__proto__:null,default:F$},Symbol.toStringTag,{value:"Module"}));function H$(){const c=qt();if(!c)throw new Error("useCan must be called within a component setup function.");return s=>c.proxy.$can(s)}const K$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Y$={class:"q-pa-xs"},W$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Q$={key:0,class:"flex q-gutter-xs"},J$={class:"flex q-col-gutter-xs"},G$={key:0},X$={key:1},Z$={key:0},ex={class:"flex justify-end"},zl="Penyesuaian Stok",tx={__name:"Index",setup(c){const s=T([]),m=T(!0),o=T(!1),i=T(null),n=T(null),g=et(n),b=zt(),p=Ft(),d=[{label:"Semua Tahun",value:"all"},{label:`${b}`,value:b},...Ct(b-2,b-1).reverse()],f=[{value:"all",label:"Semua Bulan"},...Tt()],y=Ie({search:"",year:b,month:p,status:"all",type:"all",...Fe()}),_=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],q=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],S=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),w=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];he(()=>{Y()});const z=U=>lt({message:`Hapus Penyesuaian Stok #${U.code}?`,url:route("admin.stock-adjustment.delete",U.id),fetchItemsCallback:Y,loading:m}),Y=(U=null)=>Le({pagination:S,filter:y,props:U,rows:s,url:route("admin.stock-adjustment.data"),loading:m,tableRef:i}),C=()=>{Y()},M=U=>{U.status=="draft"?ee.get(route("admin.stock-adjustment.editor",U.id)):ee.get(route("admin.stock-adjustment.detail",U.id))},{protectClick:O}=jt(),B=O(M),A=Se(),x=Z(()=>{let U=w;return H$()||(U=U.filter(P=>P.name!=="cost")),A.screen.gt.sm?U:U.filter(P=>P.name==="id"||P.name==="action")});return(U,P)=>{const $=X("i-head"),E=X("authenticated-layout");return u(),h(G,null,[e($,{title:zl}),e(E,null,He({"right-button":l(()=>[e(D,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=N=>o.value=!o.value)},null,8,["icon"]),U.$can("admin.stock-adjustment.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=N=>a(ee).get(U.route("admin.stock-adjustment.create")))})):k("",!0)]),title:l(()=>[v(r(zl))]),default:l(()=>[t("div",Y$,[e(Ue,{ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:S.value,"onUpdate:pagination":P[8]||(P[8]=N=>S.value=N),filter:y.search,loading:m.value,columns:x.value,rows:s.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(g)}),onRequest:Y,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:N,message:V,filter:j})=>[t("div",W$,[t("span",null,r(V)+" "+r(j?" with term "+j:""),1)])]),body:l(N=>[e(Pe,{props:N,onClick:J(V=>a(B)(N.row,V),["stop"]),class:"cursor-pointer"},{default:l(()=>[e(W,{key:"id",props:N},{default:l(()=>[a(A).screen.lt.md?(u(),h(G,{key:1},[t("div",J$,[t("div",null,"#"+r(N.row.code),1),t("div",null,[e(R,{name:"history"}),v(" "+r(a(ve)(N.row.datetime)),1)]),e(Gl,{dense:"",size:"sm",color:N.row.status==="draft"?"orange":N.row.status==="closed"?"green":N.row.status==="canceled"?"red":"",icon:N.row.status==="draft"?"emergency":N.row.status==="closed"?"check":N.row.status==="canceled"?"close":""},{default:l(()=>[v(r(U.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[N.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(R,{name:"category"}),v(" "+r(U.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[N.row.type]),1)]),N.row.created_by?(u(),h("div",G$,[e(R,{name:"person"}),P[9]||(P[9]=v(" Dibuat: ")),t("b",null,r(N.row.created_by.username),1),e(R,{name:"history"}),v(" "+r(a(ve)(N.row.created_at)),1)])):k("",!0),N.row.updated_by?(u(),h("div",X$,[e(R,{name:"person"}),P[10]||(P[10]=v(" Diperbarui: ")),t("b",null,r(N.row.updated_by.username),1),e(R,{name:"history"}),v(" "+r(a(ve)(N.row.updated_at)),1)])):k("",!0),t("div",{class:Ce(N.row.total_cost<0?"text-red-10":N.row.total_cost>0?"text-green-10":"")},[e(R,{name:"money"}),U.$can("admin.product:view-cost")?(u(),h("span",Z$,"Rp. "+r(a(H)(N.row.total_cost))+" / ",1)):k("",!0),v(" Rp. "+r(a(H)(N.row.total_price)),1)],2)],64)):(u(),h("div",Q$,"#"+r(N.row.code),1))]),_:2},1032,["props"]),e(W,{key:"datetime",props:N},{default:l(()=>[v(r(a(ve)(N.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"status",props:N,class:"text-center"},{default:l(()=>[v(r(U.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[N.row.status]),1)]),_:2},1032,["props"]),e(W,{key:"type",props:N},{default:l(()=>[v(r(U.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[N.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"total_cost",props:N},{default:l(()=>[U.$can("admin.product:view-cost")?(u(),h("div",{key:0,class:Ce(N.row.total_cost<0?"text-red-10":N.row.total_cost>0?"text-green-10":"")},r(a(H)(N.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total_price",props:N},{default:l(()=>[t("div",{class:Ce(N.row.total_price<0?"text-red-10":N.row.total_price>0?"text-green-10":"")},r(a(H)(N.row.total_price)),3)]),_:2},1032,["props"]),e(W,{key:"notes",props:N},{default:l(()=>[v(r(N.row.notes),1)]),_:2},1032,["props"]),e(W,{key:"action",props:N},{default:l(()=>[t("div",ex,[U.$can("admin.stock-adjustment.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[7]||(P[7]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[U.$can("admin.stock-adjustment.delete")?te((u(),I(oe,{key:0,onClick:J(V=>z(N.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>P[11]||(P[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:l(()=>[t("div",K$,[e(ce,{modelValue:y.year,"onUpdate:modelValue":[P[2]||(P[2]=N=>y.year=N),C],options:d,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),y.year!="all"?(u(),I(ce,{key:0,modelValue:y.month,"onUpdate:modelValue":[P[3]||(P[3]=N=>y.month=N),C],options:f,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:y.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:y.status,"onUpdate:modelValue":[P[4]||(P[4]=N=>y.status=N),C],options:_,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:y.type,"onUpdate:modelValue":[P[5]||(P[5]=N=>y.type=N),C],options:q,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":P[6]||(P[6]=N=>y.search=N),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ax=Object.freeze(Object.defineProperty({__proto__:null,default:tx},Symbol.toStringTag,{value:"Module"})),lx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ox={class:"q-pa-xs"},nx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Fl="Riwayat Stok",sx={__name:"Index",setup(c){ge();const s=T(null),m=T(null),o=et(m),i=zt(),n=Ft(),g=[{label:"Semua Tahun",value:"all"},{label:`${i}`,value:i},...Ct(i-2,i-1).reverse()],b=[{value:"all",label:"Semua Bulan"},...Tt()],p=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],d=Se(),f=T(!1),y=T([]),_=T(!0),q=Ie({type:"all",search:"",year:i,month:n,...Fe()}),S=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let w=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{const O=new URLSearchParams(window.location.search).get("page");O&&(S.value.page=parseInt(O)),z()});const z=(M=null)=>{Le({pagination:S,filter:q,props:M,rows:y,url:route("admin.stock-movement.data"),loading:_,tableRef:s})},Y=()=>{z()},C=Z(()=>d.screen.lt.sm?w.filter(M=>M.name==="id"||M.name==="quantity"):w);return(M,O)=>{const B=X("i-head"),A=X("authenticated-layout");return u(),h(G,null,[e(B,{title:Fl}),e(A,null,He({title:l(()=>[v(r(Fl))]),"right-button":l(()=>[e(D,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=x=>f.value=!f.value)},null,8,["icon"])]),default:l(()=>[t("div",ox,[e(Ue,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:S.value,"onUpdate:pagination":O[5]||(O[5]=x=>S.value=x),filter:q.search,loading:_.value,columns:C.value,rows:y.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(o)}),onRequest:z,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:U,filter:P})=>[t("div",nx,[t("span",null,r(U)+" "+r(P?" with term "+P:""),1)])]),body:l(x=>[e(Pe,{props:x},{default:l(()=>[e(W,{key:"id",props:x},{default:l(()=>[t("div",null,[e(R,{class:"inline-icon",name:"tag"}),v(" "+r(x.row.code),1)]),t("div",null,[e(R,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)(x.row.created_at)),1)]),t("div",null,[e(bt,null,{default:l(()=>[v(r(M.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[x.row.ref_type]),1)]),_:2},1024)]),a(d).screen.lt.sm?(u(),h(G,{key:0},[t("div",null,[e(R,{name:"token",class:"inline-icon"}),v(" "+r(x.row.product.name),1)]),t("div",{class:Ce(x.row.quantity>0?"text-positive":"text-negative")},[e(R,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(a(H)(x.row.quantity_before))+" "+r(x.row.uom)+"  "+r(a(H)(x.row.quantity_after))+" "+r(x.row.uom),1)],2),e($e,{text:x.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"product",props:x},{default:l(()=>[v(r(x.row.product.name),1)]),_:2},1032,["props"]),e(W,{key:"quantity_before",props:x},{default:l(()=>[v(r(a(H)(x.row.quantity_before)),1)]),_:2},1032,["props"]),e(W,{key:"quantity",props:x,class:Ce(x.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[v(r(a(ia)(x.row.quantity))+" ",1),a(d).screen.lt.sm?(u(),h(G,{key:0},[v(r(x.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(W,{key:"quantity_after",props:x},{default:l(()=>[v(r(a(H)(x.row.quantity_after)),1)]),_:2},1032,["props"]),e(W,{key:"uom",props:x},{default:l(()=>[v(r(x.row.uom),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:x},{default:l(()=>[e($e,{text:x.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[f.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:m},{default:l(()=>[t("div",lx,[e(ce,{modelValue:q.year,"onUpdate:modelValue":[O[1]||(O[1]=x=>q.year=x),Y],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),q.year!="all"?(u(),I(ce,{key:0,modelValue:q.month,"onUpdate:modelValue":[O[2]||(O[2]=x=>q.month=x),Y],options:b,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:q.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:q.ref_type,"onUpdate:modelValue":[O[3]||(O[3]=x=>q.ref_type=x),Y],options:p,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:q.search,"onUpdate:modelValue":O[4]||(O[4]=x=>q.search=x),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},rx=Object.freeze(Object.defineProperty({__proto__:null,default:sx},Symbol.toStringTag,{value:"Module"})),ix={class:"detail"},dx={key:0},ux={key:1},mx={key:2},cx={key:3},px={key:4},fx={key:5},gx={key:6},bx={key:0,class:"q-pt-md"},on={__name:"MainInfoTab",setup(c){const s=ge(),m=()=>{lt({message:`Hapus Pemasok ${s.props.data.name}?`,url:route("admin.supplier.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.supplier.index"))}})};return(o,i)=>(u(),h(G,null,[t("table",ix,[t("tbody",null,[i[22]||(i[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Nama",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[t("td",null,r(a(s).props.data.balance<0?"Utang":"Utang / Piutang"),1),i[5]||(i[5]=t("td",null,":",-1)),t("td",{class:Ce(a(s).props.data.balance<0?"text-red":"text-green")},r(a(la)(a(s).props.data.balance)),3)]),a(s).props.data.phone_1?(u(),h("tr",dx,[i[6]||(i[6]=t("td",null,"No Telepon",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone_1),1)])):k("",!0),a(s).props.data.phone_2?(u(),h("tr",ux,[i[8]||(i[8]=t("td",null,"No Telepon 2",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone_2),1)])):k("",!0),a(s).props.data.phone_3?(u(),h("tr",mx,[i[10]||(i[10]=t("td",null,"No Telepon 3",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone_3),1)])):k("",!0),a(s).props.data.address?(u(),h("tr",cx,[i[12]||(i[12]=t("td",null,"Alamat",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.address),1)])):k("",!0),a(s).props.data.return_address?(u(),h("tr",px,[i[14]||(i[14]=t("td",null,"Alamat Retur",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.return_address),1)])):k("",!0),a(s).props.data.bank_account_name_1||a(s).props.data.bank_account_number_1||a(s).props.data.bank_account_holder_1?(u(),h("tr",fx,[i[16]||(i[16]=t("td",null,"Rek 1",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.bank_account_name_1)+" "+r(a(s).props.data.bank_account_number_1)+" a.n. "+r(a(s).props.data.bank_account_holder_1),1)])):k("",!0),a(s).props.data.bank_account_name_2||a(s).props.data.bank_account_number_2||a(s).props.data.bank_account_holder_2?(u(),h("tr",gx,[i[18]||(i[18]=t("td",null,"Rek 2",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.bank_account_name_2)+" "+r(a(s).props.data.bank_account_number_2)+" a.n. "+r(a(s).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Status",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(u(),h("div",bx,[e(D,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>m())})])):k("",!0)],64))}},vx=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"})),yx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},_x={class:"text-bold"},kx={class:"text-bold"},wx={key:0},nn={__name:"OrderHistoryTab",setup(c){const s=ge(),m=T([]),o=T(!0),i=Ie({customer_id:s.props.data.id,...Fe()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(f=null)=>Le({pagination:n,filter:i,props:f,rows:m,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:s.props.data.id}}),loading:o}),p=Se(),d=Z(()=>p.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,y)=>(u(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:S})=>[t("div",yx,[t("span",null,r(q)+" "+r(S?" with term "+S:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(q=>a(ee).get(f.route("admin.purchase-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",_x,[e(R,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(R,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(ve)(_.row.datetime)),1)]),a(p).screen.lt.md?(u(),h(G,{key:0},[t("div",kx,[e(R,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(H)(_.row.grand_total)),1)]),_.row.notes?(u(),h("div",wx,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(bt,{color:_.row.status=="closed"?"green":"red"},{default:l(()=>[v(r(f.$CONSTANTS.SALES_ORDER_STATUSES[_.row.status]),1)]),_:2},1032,["color"]),e(bt,{color:_.row.payment_status=="fully_paid"?"green":"red",class:"q-ml-xs"},{default:l(()=>[v(r(f.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[_.row.payment_status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[t("div",null,r(a(H)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},hx=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),$x={class:"q-gutter-sm"},xx={class:"q-gutter-sm"},Sx={class:"col col-lg-6 q-pa-xs"},Vx={class:"row"},Ll="Rincian Pemasok",qx={__name:"Detail",setup(c){const s=ge(),m=T("main");return Se(),(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return u(),h(G,null,[e(n,{title:Ll}),e(g,null,{title:l(()=>[v(r(Ll))]),"left-button":l(()=>[t("div",$x,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":l(()=>[t("div",xx,[o.$can("admin.supplier.edit")?(u(),I(D,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>a(ee).get(o.route("admin.supplier.edit",{id:a(s).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(u(),I(D,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>a(ee).get(o.route("admin.supplier.edit",{id:a(s).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(u(),I(D,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>a(ee).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Sx,[t("div",Vx,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Pt,{modelValue:m.value,"onUpdate:modelValue":i[4]||(i[4]=b=>m.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:m.value,"onUpdate:modelValue":i[5]||(i[5]=b=>m.value=b),animated:""},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(on)]),_:1}),e(ut,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(nn)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Cx=Object.freeze(Object.defineProperty({__proto__:null,default:qx},Symbol.toStringTag,{value:"Module"})),Tx={class:"q-gutter-sm"},Px={class:"col col-md-6 q-pa-xs"},Rx={class:"row q-col-gutter-md"},Ox={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},Ix={key:2,class:"row q-col-gutter-md"},Ux={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},Dx={key:4,class:"row q-col-gutter-md"},Ex={key:5,class:"row q-col-gutter-md"},jx={style:{"margin-left":"-10px"},class:"q-mt-md"},Ax={class:"q-mt-sm"},Mx={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Pemasok",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,phone_1:s.props.data.phone_1,phone_2:s.props.data.phone_2,phone_3:s.props.data.phone_3,url_1:s.props.data.url_1,url_2:s.props.data.url_2,bank_account_name_1:s.props.data.bank_account_name_1,bank_account_holder_1:s.props.data.bank_account_holder_1,bank_account_number_1:s.props.data.bank_account_number_1,bank_account_name_2:s.props.data.bank_account_name_2,bank_account_holder_2:s.props.data.bank_account_holder_2,bank_account_number_2:s.props.data.bank_account_number_2,address:s.props.data.address,return_address:s.props.data.return_address,active:!!s.props.data.active}),i=T(!0),n=()=>nt({form:o,url:route("admin.supplier.save")});return(g,b)=>{const p=X("i-head"),d=X("authenticated-layout");return u(),h(G,null,[e(p,{title:m}),e(d,{"show-drawer-button":!0},{title:l(()=>[v(r(m))]),"left-button":l(()=>[t("div",Tx,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),"right-button":l(()=>[e(D,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(o).processing,onClick:b[1]||(b[1]=f=>n()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Px,[e(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[2]||(b[2]=f=>a(o).id=f)},null,512),[[yt,a(o).id]]),e(ne,{modelValue:a(o).code,"onUpdate:modelValue":b[3]||(b[3]=f=>a(o).code=f),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[f=>f&&f.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).name,"onUpdate:modelValue":b[4]||(b[4]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",Rx,[e(ne,{modelValue:a(o).phone_1,"onUpdate:modelValue":b[5]||(b[5]=f=>a(o).phone_1=f),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_1,"error-message":a(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(u(),I(ne,{key:0,modelValue:a(o).phone_2,"onUpdate:modelValue":b[6]||(b[6]=f=>a(o).phone_2=f),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_2,"error-message":a(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(u(),I(ne,{key:1,modelValue:a(o).phone_3,"onUpdate:modelValue":b[7]||(b[7]=f=>a(o).phone_3=f),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_3,"error-message":a(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(ne,{modelValue:a(o).address,"onUpdate:modelValue":b[8]||(b[8]=f=>a(o).address=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(u(),I(ne,{key:0,modelValue:a(o).return_address,"onUpdate:modelValue":b[9]||(b[9]=f=>a(o).return_address=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.return_address,"error-message":a(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(u(),h("div",Ox," Rekening 1 ")),i.value?k("",!0):(u(),h("div",Ix,[e(ne,{modelValue:a(o).bank_account_name_1,"onUpdate:modelValue":b[10]||(b[10]=f=>a(o).bank_account_name_1=f),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_1,"error-message":a(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_number_1,"onUpdate:modelValue":b[11]||(b[11]=f=>a(o).bank_account_number_1=f),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_1,"error-message":a(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_holder_1,"onUpdate:modelValue":b[12]||(b[12]=f=>a(o).bank_account_holder_1=f),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_1,"error-message":a(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(u(),h("div",Ux," Rekening 2 ")),i.value?k("",!0):(u(),h("div",Dx,[e(ne,{modelValue:a(o).bank_account_name_2,"onUpdate:modelValue":b[13]||(b[13]=f=>a(o).bank_account_name_2=f),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_2,"error-message":a(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_number_2,"onUpdate:modelValue":b[14]||(b[14]=f=>a(o).bank_account_number_2=f),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_2,"error-message":a(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_holder_2,"onUpdate:modelValue":b[15]||(b[15]=f=>a(o).bank_account_holder_2=f),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_2,"error-message":a(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(u(),h("div",Ex,[e(ne,{modelValue:a(o).url_1,"onUpdate:modelValue":b[16]||(b[16]=f=>a(o).url_1=f),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_1,"error-message":a(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).url_2,"onUpdate:modelValue":b[17]||(b[17]=f=>a(o).url_2=f),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_2,"error-message":a(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",jx,[e(na,{class:"full-width q-pl-none",modelValue:a(o).active,"onUpdate:modelValue":b[18]||(b[18]=f=>a(o).active=f),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",Ax,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:b[19]||(b[19]=J(f=>i.value=!i.value,["stop"]))},[e(R,{name:i.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),v(" "+r(i.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Nx=Object.freeze(Object.defineProperty({__proto__:null,default:Mx},Symbol.toStringTag,{value:"Module"})),Bx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},zx={class:"q-pa-xs"},Fx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Lx={key:0},Hx={key:1},Kx={class:"flex justify-end"},Hl="Pemasok",Yx={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=Ie({search:"",status:"active",...Fe()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{q()});const _=M=>lt({message:`Hapus pemasok ${M.name}?`,url:route("admin.supplier.delete",M.id),fetchItemsCallback:q,loading:i}),q=(M=null)=>{Le({pagination:d,filter:p,props:M,rows:o,url:route("admin.supplier.data"),loading:i,tableRef:n})},S=()=>q(),w=M=>ee.get(route("admin.supplier.detail",{id:M.id})),{protectClick:z}=jt(),Y=z(w),C=Z(()=>s.screen.gt.sm?f:f.filter(M=>M.name==="code"||M.name==="action"));return(M,O)=>{const B=X("i-head"),A=X("authenticated-layout");return u(),h(G,null,[e(B,{title:Hl}),e(A,null,He({title:l(()=>[v(r(Hl))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=x=>m.value=!m.value)},null,8,["icon"]),M.$can("admin.supplier.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=x=>a(ee).get(M.route("admin.supplier.add")))})):k("",!0)]),default:l(()=>[t("div",zx,[e(Ue,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":O[5]||(O[5]=x=>d.value=x),filter:p.search,loading:i.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:q,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:U,filter:P})=>[t("div",Fx,[t("span",null,r(U)+" "+r(P?" with term "+P:""),1)])]),body:l(x=>[e(Pe,{props:x,class:Ce([x.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(U=>a(Y)(x.row,U),["stop"])},{default:l(()=>[e(W,{key:"code",props:x,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.lt.md?(u(),I(R,{key:0,name:"person"})):k("",!0),v(" "+r(x.row.code)+" ",1),a(s).screen.lt.md?(u(),h(G,{key:1},[v(" - "+r(x.row.name),1)],64)):k("",!0)]),a(s).screen.lt.md?(u(),h(G,{key:0},[t("div",{class:Ce(x.row.balance<0?"text-negative":"text-positive")},[e(R,{name:"wallet"}),v(" "+r(a(H)(x.row.balance)),1)],2),x.row.phone_1?(u(),h("div",Lx,[e(R,{name:"phone"}),v(" "+r(x.row.phone_1),1)])):k("",!0),x.row.address?(u(),h("div",Hx,[e(R,{name:"home_pin"}),v(" "+r(x.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"name",props:x,class:"wrap-column"},{default:l(()=>[v(r(x.row.name),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:x,class:"wrap-column"},{default:l(()=>[t("div",{class:Ce(x.row.balance<0?"text-negative":"text-positive")},r(a(H)(x.row.balance)),3)]),_:2},1032,["props"]),e(W,{key:"phone_1",props:x},{default:l(()=>[v(r(x.row.phone_1),1)]),_:2},1032,["props"]),e(W,{key:"address",props:x},{default:l(()=>[v(r(x.row.address),1)]),_:2},1032,["props"]),e(W,{key:"action",props:x},{default:l(()=>[t("div",Kx,[M.$can("admin.supplier.add")||M.$can("admin.supplier.edit")||M.$can("admin.supplier.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[4]||(O[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[M.$can("admin.supplier.add")?te((u(),I(oe,{key:0,clickable:"",onClick:J(U=>a(ee).get(M.route("admin.supplier.duplicate",x.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>O[6]||(O[6]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),M.$can("admin.supplier.edit")?te((u(),I(oe,{key:1,clickable:"",onClick:J(U=>a(ee).get(M.route("admin.supplier.edit",x.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>O[7]||(O[7]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),M.$can("admin.supplier.delete")?te((u(),I(oe,{key:2,onClick:J(U=>_(x.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>O[8]||(O[8]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Bx,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[O[2]||(O[2]=x=>p.status=x),S],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":O[3]||(O[3]=x=>p.search=x),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wx=Object.freeze(Object.defineProperty({__proto__:null,default:Yx},Symbol.toStringTag,{value:"Module"})),Qx={class:"q-gutter-sm"},Jx={class:"col col-md-6 q-pa-xs"},Gx={class:"q-pt-md"},Xx={key:0,class:"text-caption text-negative"},Zx={class:"q-pt-md"},eS={key:0,class:"text-caption text-negative"},tS={__name:"Editor",setup(c){const s=Se(),m=ge(),o=(m.props.data.id?"Edit":"Tambah")+" Skema Pajak",i=Qe({id:m.props.data.id,name:m.props.data.name,rate_percentage:m.props.data.rate_percentage??0,tax_authority:m.props.data.tax_authority,is_inclusive:m.props.data.is_inclusive??!1,active:m.props.data.active??!0,description:m.props.data.description}),n=()=>nt({form:i,url:route("admin.tax-scheme.save")});return(g,b)=>{const p=X("i-head"),d=X("authenticated-layout");return u(),h(G,null,[e(p,{title:o}),e(d,{"show-drawer-button":!a(s).screen.lt.md},He({title:l(()=>[v(r(o))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Jx,[e(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>a(i).id=f)},null,512),[[yt,a(i).id]]),e(ne,{autofocus:"",modelValue:a(i).name,"onUpdate:modelValue":b[2]||(b[2]=f=>a(i).name=f),modelModifiers:{trim:!0},label:"Nama Skema Pajak","lazy-rules":"",error:!!a(i).errors.name,disable:a(i).processing,"error-message":a(i).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(i).rate_percentage,"onUpdate:modelValue":b[3]||(b[3]=f=>a(i).rate_percentage=f),modelModifiers:{number:!0},label:"Tarif Persentase (%)",type:"number",suffix:"%",rules:[f=>f>=0||"Persentase tidak boleh negatif."],error:!!a(i).errors.rate_percentage,disable:a(i).processing,"error-message":a(i).errors.rate_percentage,"hide-bottom-space":""},null,8,["modelValue","rules","error","disable","error-message"]),e(ne,{modelValue:a(i).tax_authority,"onUpdate:modelValue":b[4]||(b[4]=f=>a(i).tax_authority=f),modelModifiers:{trim:!0},label:"Otoritas Pajak (Opsional)",hint:"Contoh: DJP, Pemerintah Daerah",error:!!a(i).errors.tax_authority,disable:a(i).processing,"error-message":a(i).errors.tax_authority,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(i).description,"onUpdate:modelValue":b[5]||(b[5]=f=>a(i).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.description,"error-message":a(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",Gx,[e(Ka,{modelValue:a(i).is_inclusive,"onUpdate:modelValue":b[6]||(b[6]=f=>a(i).is_inclusive=f),disable:a(i).processing,label:a(i).is_inclusive?"Harga Jual SUDAH termasuk Pajak":"Harga Jual BELUM termasuk Pajak",color:"primary"},null,8,["modelValue","disable","label"]),a(i).errors.is_inclusive?(u(),h("div",Xx,r(a(i).errors.is_inclusive),1)):k("",!0)]),t("div",Zx,[e(Ka,{modelValue:a(i).active,"onUpdate:modelValue":b[7]||(b[7]=f=>a(i).active=f),disable:a(i).processing,label:a(i).active?"Skema Aktif":"Skema Non-Aktif",color:"primary"},null,8,["modelValue","disable","label"]),a(i).errors.active?(u(),h("div",eS,r(a(i).errors.active),1)):k("",!0)])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"]),e(D,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:b[8]||(b[8]=f=>g.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(s).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",Qx,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},aS=Object.freeze(Object.defineProperty({__proto__:null,default:tS},Symbol.toStringTag,{value:"Module"})),lS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},oS={class:"q-pa-xs"},nS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},sS={class:"text-weight-bold"},rS={class:"text-grey-8"},iS={class:"text-weight-medium"},dS={class:"text-weight-medium text-uppercase"},uS={key:0,class:"text-grey-8"},mS={key:1,class:"text-grey-8"},cS={class:"flex justify-end"},Kl="Skema Pajak",pS={__name:"Index",setup(c){const s=Se(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=et(g),p=Ie({search:"",...Fe()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"rate_percentage",label:"Tarif",field:"rate_percentage",align:"right",sortable:!0,format:S=>`${S}%`},{name:"is_inclusive",label:"Tipe Harga",field:"is_inclusive",align:"center",format:S=>S?"INCLUSIVE":"EXCLUSIVE",sortable:!0},{name:"tax_authority",label:"Otoritas",field:"tax_authority",align:"left",sortable:!0},{name:"active",label:"Status",field:"active",align:"center",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{_()});const y=S=>lt({message:`Hapus Skema Pajak ${S.name}?`,url:route("admin.tax-scheme.delete",S.id),fetchItemsCallback:_,loading:i}),_=(S=null)=>{Le({pagination:d,filter:p,props:S,rows:o,url:route("admin.tax-scheme.data"),loading:i,tableRef:n})},q=Z(()=>s.screen.gt.sm?f:f.filter(S=>S.name==="name"||S.name==="action"));return(S,w)=>{const z=X("i-head"),Y=X("authenticated-layout");return u(),h(G,null,[e(z,{title:Kl}),e(Y,null,He({title:l(()=>[v(r(Kl))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=C=>m.value=!m.value)},null,8,["icon"]),S.$can("admin.tax-scheme.add")?(u(),I(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=C=>a(ee).get(S.route("admin.tax-scheme.add")))})):k("",!0)]),default:l(()=>[t("div",oS,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":w[4]||(w[4]=C=>d.value=C),filter:p.search,loading:i.value,columns:q.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:C,message:M,filter:O})=>[t("div",nS,[t("span",null,r(M)+" "+r(O?" with term "+O:""),1)])]),body:l(C=>[e(Pe,{props:C},{default:l(()=>[e(W,{key:"name",props:C,class:"wrap-column"},{default:l(()=>[t("div",sS,r(C.row.name),1),a(s).screen.gt.sm?k("",!0):(u(),h(G,{key:0},[t("div",rS,[w[5]||(w[5]=v(" Tarif: ")),t("span",iS,r(C.row.rate_percentage)+"%",1)]),t("div",null,[w[6]||(w[6]=v(" Tipe: ")),t("span",dS,r(C.row.is_inclusive?"Inclusive":"Exclusive"),1)]),C.row.tax_authority?(u(),h("div",uS,[e(R,{name:"account_balance",size:"xs"}),v(" Otoritas: "+r(C.row.tax_authority),1)])):k("",!0),C.row.description?(u(),h("div",mS,[e(R,{name:"description",size:"xs"}),v(" "+r(C.row.description),1)])):k("",!0),e(bt,{color:C.row.active?"positive":"negative"},{default:l(()=>[v(r(C.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])],64))]),_:2},1032,["props"]),e(W,{key:"rate_percentage",props:C,class:"text-right text-weight-bold"},{default:l(()=>[v(r(C.row.rate_percentage)+"% ",1)]),_:2},1032,["props"]),e(W,{key:"is_inclusive",props:C,class:"text-center"},{default:l(()=>[e(bt,{color:C.row.is_inclusive?"green-7":"deep-orange-7","text-color":"white"},{default:l(()=>[v(r(C.row.is_inclusive?"INCLUSIVE":"EXCLUSIVE"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(W,{key:"tax_authority",props:C,class:"wrap-column"},{default:l(()=>[v(r(C.row.tax_authority),1)]),_:2},1032,["props"]),e(W,{key:"active",props:C,class:"text-center"},{default:l(()=>[e(bt,{color:C.row.active?"positive":"negative"},{default:l(()=>[v(r(C.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(W,{key:"description",props:C,class:"wrap-column"},{default:l(()=>[v(r(C.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:C},{default:l(()=>[t("div",cS,[S.$can("admin.tax-scheme.add")||S.$can("admin.tax-scheme.edit")||S.$can("admin.tax-scheme.delete")?(u(),I(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[3]||(w[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[S.$can("admin.tax-scheme.add")?te((u(),I(oe,{key:0,clickable:"",onClick:J(M=>a(ee).get(S.route("admin.tax-scheme.duplicate",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>w[7]||(w[7]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.$can("admin.tax-scheme.edit")?te((u(),I(oe,{key:1,clickable:"",onClick:J(M=>a(ee).get(S.route("admin.tax-scheme.edit",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>w[8]||(w[8]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.$can("admin.tax-scheme.delete")?te((u(),I(oe,{key:2,onClick:J(M=>y(C.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>w[9]||(w[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",lS,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":w[2]||(w[2]=C=>p.search=C),placeholder:"Cari",clearable:""},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fS=Object.freeze(Object.defineProperty({__proto__:null,default:pS},Symbol.toStringTag,{value:"Module"})),gS=Et({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(c,{slots:s,emit:m}){let o=!1,i,n,g=null,b=null,p,d;function f(){i&&i(),i=null,o=!1,g!==null&&(clearTimeout(g),g=null),b!==null&&(clearTimeout(b),b=null),n!==void 0&&n.removeEventListener("transitionend",p),p=null}function y(w,z,Y){z!==void 0&&(w.style.height=`${z}px`),w.style.transition=`height ${c.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,i=Y}function _(w,z){w.style.overflowY=null,w.style.height=null,w.style.transition=null,f(),z!==d&&m(z)}function q(w,z){let Y=0;n=w,o===!0?(f(),Y=w.offsetHeight===w.scrollHeight?0:void 0):(d="hide",w.style.overflowY="hidden"),y(w,Y,z),g=setTimeout(()=>{g=null,w.style.height=`${w.scrollHeight}px`,p=C=>{b=null,(Object(C)!==C||C.target===w)&&_(w,"show")},w.addEventListener("transitionend",p),b=setTimeout(p,c.duration*1.1)},100)}function S(w,z){let Y;n=w,o===!0?f():(d="show",w.style.overflowY="hidden",Y=w.scrollHeight),y(w,Y,z),g=setTimeout(()=>{g=null,w.style.height=0,p=C=>{b=null,(Object(C)!==C||C.target===w)&&_(w,"hide")},w.addEventListener("transitionend",p),b=setTimeout(p,c.duration*1.1)},100)}return ga(()=>{o===!0&&f()}),()=>qe(Ql,{css:!1,appear:c.appear,onEnter:q,onLeave:S},s.default)}}),Ht=ts({}),bS=Object.keys(to),Ut=Et({name:"QExpansionItem",props:{...to,...ls,...Oa,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...as,"click","afterShow","afterHide"],setup(c,{slots:s,emit:m}){const{proxy:{$q:o}}=qt(),i=Ia(c,o),n=T(c.modelValue!==null?c.modelValue:c.defaultOpened),g=T(null),b=os(),{show:p,hide:d,toggle:f}=ns({showing:n});let y,_;const q=Z(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${c.popup===!0?"popup":"standard"}`),S=Z(()=>c.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:c.contentInsetLevel*56+"px"}),w=Z(()=>c.disable!==!0&&(c.href!==void 0||c.to!==void 0&&c.to!==null&&c.to!=="")),z=Z(()=>{const me={};return bS.forEach(Re=>{me[Re]=c[Re]}),me}),Y=Z(()=>w.value===!0||c.expandIconToggle!==!0),C=Z(()=>c.expandedIcon!==void 0&&n.value===!0?c.expandedIcon:c.expandIcon||o.iconSet.expansionItem[c.denseToggle===!0?"denseIcon":"icon"]),M=Z(()=>c.disable!==!0&&(w.value===!0||c.expandIconToggle===!0)),O=Z(()=>({expanded:n.value===!0,detailsId:b.value,toggle:f,show:p,hide:d})),B=Z(()=>{const me=c.toggleAriaLabel!==void 0?c.toggleAriaLabel:o.lang.label[n.value===!0?"collapse":"expand"](c.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":b.value,"aria-label":me}});Me(()=>c.group,me=>{_!==void 0&&_(),me!==void 0&&E()});function A(me){w.value!==!0&&f(me),m("click",me)}function x(me){me.keyCode===13&&U(me,!0)}function U(me,Re){Re!==!0&&g.value!==null&&g.value.focus(),f(me),Kt(me)}function P(){m("afterShow")}function $(){m("afterHide")}function E(){y===void 0&&(y=ss()),n.value===!0&&(Ht[c.group]=y);const me=Me(n,Ge=>{Ge===!0?Ht[c.group]=y:Ht[c.group]===y&&delete Ht[c.group]}),Re=Me(()=>Ht[c.group],(Ge,ue)=>{ue===y&&Ge!==void 0&&Ge!==y&&d()});_=()=>{me(),Re(),Ht[c.group]===y&&delete Ht[c.group],_=void 0}}function N(){const me={class:[`q-focusable relative-position cursor-pointer${c.denseToggle===!0&&c.switchToggleSide===!0?" items-end":""}`,c.expandIconClass],side:c.switchToggleSide!==!0,avatar:c.switchToggleSide},Re=[qe(R,{class:"q-expansion-item__toggle-icon"+(c.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:C.value})];return M.value===!0&&(Object.assign(me,{tabindex:0,...B.value,onClick:U,onKeyup:x}),Re.unshift(qe("div",{ref:g,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),qe(F,me,()=>Re)}function V(){let me;return s.header!==void 0?me=[].concat(s.header(O.value)):(me=[qe(F,()=>[qe(we,{lines:c.labelLines},()=>c.label||""),c.caption?qe(we,{lines:c.captionLines,caption:!0},()=>c.caption):null])],c.icon&&me[c.switchToggleSide===!0?"push":"unshift"](qe(F,{side:c.switchToggleSide===!0,avatar:c.switchToggleSide!==!0},()=>qe(R,{name:c.icon})))),c.disable!==!0&&c.hideExpandIcon!==!0&&me[c.switchToggleSide===!0?"unshift":"push"](N()),me}function j(){const me={ref:"item",style:c.headerStyle,class:c.headerClass,dark:i.value,disable:c.disable,dense:c.dense,insetLevel:c.headerInsetLevel};return Y.value===!0&&(me.clickable=!0,me.onClick=A,Object.assign(me,w.value===!0?z.value:B.value)),qe(oe,me,V)}function ae(){return te(qe("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:S.value,id:b.value},Nt(s.default)),[[Xl,n.value]])}function re(){const me=[j(),qe(gS,{duration:c.duration,onShow:P,onHide:$},ae)];return c.expandSeparator===!0&&me.push(qe(Ae,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),qe(Ae,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),me}return c.group!==void 0&&E(),ga(()=>{_!==void 0&&_()}),()=>qe("div",{class:q.value},[qe("div",{class:"q-expansion-item__container relative-position"},re())])}}),vS={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},yS={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},_S={class:"text-bold"},kS={class:"text-grey-8 text-caption"},wS={class:"absolute-bottom text-grey-6 q-pa-md"},Ta="amanah-pos.layout.left-drawer-open",hS={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(c,{expose:s}){const m=Se(),o=ge(),i=T(JSON.parse(localStorage.getItem(Ta))),n=T(!1),g=()=>i.value=!i.value,b=()=>{i.value=!1};return Me(i,p=>{localStorage.setItem(Ta,p)}),he(()=>{i.value=JSON.parse(localStorage.getItem(Ta)),m.screen.lt.md&&(i.value=!1)}),s({hideDrawer:b}),(p,d)=>(u(),I(ps,{view:"lHh LpR lFf"},{default:l(()=>[e(rs,null,{default:l(()=>[e(st,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:l(()=>[c.showDrawerButton&&!i.value?(u(),I(D,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:g},{default:l(()=>[e(R,{class:"material-symbols-outlined"},{default:l(()=>d[32]||(d[32]=[v("dock_to_right")])),_:1})]),_:1})):k("",!0),Dt(p.$slots,"left-button",{},void 0,!0),e(is,{style:{"font-size":"16px"}},{default:l(()=>[Dt(p.$slots,"title",{},()=>[v(r(p.$config.APP_NAME),1)],!0)]),_:3}),Dt(p.$slots,"right-button",{},void 0,!0)]),_:3}),Dt(p.$slots,"header",{},void 0,!0)]),_:3}),e(ds,{breakpoint:768,modelValue:i.value,"onUpdate:modelValue":d[31]||(d[31]=f=>i.value=f),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:l(()=>[t("div",vS,[t("div",yS,[e(us,{modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=f=>n.value=f),class:Ce(["profile-btn text-bold",{"profile-btn-active":n.value}]),flat:"",label:a(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:l(()=>[e(ze,{id:"profile-btn-popup",style:{color:"#444"}},{default:l(()=>[e(oe,null,{default:l(()=>[e(ta,{style:{"margin-left":"-15px"}},{default:l(()=>[e(R,{name:"person"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[t("div",_S,r(a(o).props.auth.user.name),1),t("div",kS,[v(r(p.$CONSTANTS.USER_TYPES[a(o).props.auth.user.type])+" ",1),d[33]||(d[33]=t("br",null,null,-1)),v(" "+r(a(o).props.company.name),1)])]),_:1})]),_:1})]),_:1}),e(Ae),te((u(),I(oe,{class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/profile"),onClick:d[0]||(d[0]=f=>a(ee).get(p.route("admin.user-profile.edit")))},{default:l(()=>[e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[e(R,{name:"manage_accounts",class:"q-mr-sm"}),d[34]||(d[34]=v(" Pengaturan Pribadi"))]),_:1})]),_:1})]),_:1},8,["active"])),[[pe],[ie]]),te((u(),I(oe,{clickable:"",style:{color:"inherit"},href:p.route("admin.auth.logout")},{default:l(()=>[e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[e(R,{name:"logout",class:"q-mr-sm"}),d[35]||(d[35]=v(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[pe],[ie]])]),_:1})]),_:1},8,["modelValue","label","class"]),i.value?(u(),I(D,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:g},{default:l(()=>[e(R,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(ms,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:l(()=>[e(ze,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:l(()=>[te((u(),I(oe,{clickable:"",active:p.$page.url.startsWith("/admin/dashboard"),onClick:d[2]||(d[2]=f=>a(ee).get(p.route("admin.dashboard")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"dashboard"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[36]||(d[36]=[v("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]),e(Ut,{icon:"shortcut",label:"Buat Baru"},{default:l(()=>[p.$can("admin.sales-order.add")?te((u(),I(oe,{key:0,class:"subnav",clickable:"",onClick:d[3]||(d[3]=f=>a(ee).get(p.route("admin.sales-order.add")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"add_shopping_cart"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[37]||(d[37]=[v("Penjualan")])),_:1})]),_:1})]),_:1})),[[ie]]):k("",!0),p.$can("admin.customer.add")?te((u(),I(oe,{key:1,class:"subnav",clickable:"",onClick:d[4]||(d[4]=f=>a(ee).get(p.route("admin.customer.add")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"group_add"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[38]||(d[38]=[v("Pelanggan")])),_:1})]),_:1})]),_:1})),[[ie]]):k("",!0)]),_:1}),p.$can("admin.sales-order.index")||p.$can("admin.customer.index")||p.$can("admin.sales-order-return.index")?(u(),I(Ut,{key:0,icon:"storefront",label:"Penjualan","default-opened":p.$page.url.startsWith("/admin/sales-orders")||p.$page.url.startsWith("/admin/sales-order-returns")||p.$page.url.startsWith("/admin/customers")},{default:l(()=>[p.$can("admin.sales-order.index")?te((u(),I(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-orders"),onClick:d[5]||(d[5]=f=>a(ee).get(p.route("admin.sales-order.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"add_shopping_cart"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[39]||(d[39]=[v("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.sales-order-return.index")?te((u(),I(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-order-returns"),onClick:d[6]||(d[6]=f=>a(ee).get(p.route("admin.sales-order-return.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"remove_shopping_cart"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[40]||(d[40]=[v("Retur Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.customer.index")?te((u(),I(oe,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customers"),onClick:d[7]||(d[7]=f=>a(ee).get(p.route("admin.customer.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"people"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[41]||(d[41]=[v("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.purchase-order.index")||p.$can("admin.supplier.index")||p.$can("admin.purchase-order-return.index")?(u(),I(Ut,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":p.$page.url.startsWith("/admin/purchase-orders")||p.$page.url.startsWith("/admin/purchase-order-returns")||p.$page.url.startsWith("/admin/suppliers")},{default:l(()=>[p.$can("admin.purchase-order.index")?te((u(),I(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-orders"),onClick:d[8]||(d[8]=f=>a(ee).get(p.route("admin.purchase-order.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"add_shopping_cart"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[42]||(d[42]=[v("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.purchase-order-return.index")?te((u(),I(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-order-returns"),onClick:d[9]||(d[9]=f=>a(ee).get(p.route("admin.purchase-order-return.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"remove_shopping_cart"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[43]||(d[43]=[v("Retur Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.supplier.index")?te((u(),I(oe,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/suppliers"),onClick:d[10]||(d[10]=f=>a(ee).get(p.route("admin.supplier.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"people"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[44]||(d[44]=[v("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.product.index")||p.$can("admin.product-category.index")||p.$can("admin.stock-adjustment.index")||p.$can("admin.stock-movement.index")?(u(),I(Ut,{key:2,icon:"inventory_2",label:"Inventori","default-opened":p.$page.url.startsWith("/admin/products")||p.$page.url.startsWith("/admin/product-categories")||p.$page.url.startsWith("/admin/stock-adjustments")||p.$page.url.startsWith("/admin/stock-movements")},{default:l(()=>[p.$can("admin.stock-adjustment.index")?te((u(),I(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-adjustments"),onClick:d[11]||(d[11]=f=>a(ee).get(p.route("admin.stock-adjustment.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"swap_vert"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[45]||(d[45]=[v("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.stock-movement.index")?te((u(),I(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-movements"),onClick:d[12]||(d[12]=f=>a(ee).get(p.route("admin.stock-movement.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"timeline"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[46]||(d[46]=[v("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.product.index")?te((u(),I(oe,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/products"),onClick:d[13]||(d[13]=f=>a(ee).get(p.route("admin.product.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"box"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[47]||(d[47]=[v("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.product-category.index")?te((u(),I(oe,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/product-categories"),onClick:d[14]||(d[14]=f=>a(ee).get(p.route("admin.product-category.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"category"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[48]||(d[48]=[v("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.cashier-session.index")||p.$can("admin.cashier-terminal.index")?(u(),I(Ut,{key:3,icon:"point_of_sale",label:"Kasir","default-opened":p.$page.url.startsWith("/admin/cashier-terminals")||p.$page.url.startsWith("/admin/cashier-session")},{default:l(()=>[p.$can("admin.cashier-session.index")?te((u(),I(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-sessions"),onClick:d[15]||(d[15]=f=>a(ee).get(p.route("admin.cashier-session.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"tv_signin"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[49]||(d[49]=[v("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.cashier-terminal.index")?te((u(),I(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-terminals"),onClick:d[16]||(d[16]=f=>a(ee).get(p.route("admin.cashier-terminal.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"point_of_sale"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[50]||(d[50]=[v("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.customer-wallet-transaction-confirmation.index")||p.$can("admin.customer-wallet-transaction.index")?(u(),I(Ut,{key:4,icon:"wallet",label:"Wallet","default-opened":p.$page.url.startsWith("/admin/customer-wallet-transactions")||p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:l(()=>[p.$can("admin.customer-wallet-transaction-confirmation.index")?te((u(),I(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:d[17]||(d[17]=f=>a(ee).get(p.route("admin.customer-wallet-transaction-confirmation.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"add_task"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[51]||(d[51]=[v("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.customer-wallet-transaction.index")?te((u(),I(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:d[18]||(d[18]=f=>a(ee).get(p.route("admin.customer-wallet-transaction.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"moving"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[52]||(d[52]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.finance-transaction.index")||p.$can("admin.finance-account.index")?(u(),I(Ut,{key:5,icon:"finance",label:"Keuangan","default-opened":p.$page.url.startsWith("/admin/finance-accounts")||p.$page.url.startsWith("/admin/finance-transactions")},{default:l(()=>[p.$can("admin.finance-transaction.index")?te((u(),I(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-transactions"),onClick:d[19]||(d[19]=f=>a(ee).get(p.route("admin.finance-transaction.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"moving"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[53]||(d[53]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.finance-account.index")?te((u(),I(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-accounts"),onClick:d[20]||(d[20]=f=>a(ee).get(p.route("admin.finance-account.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"groups_2"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[54]||(d[54]=[v("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.operational-cost.index")||p.$can("admin.operational-cost-category.index")?(u(),I(Ut,{key:6,icon:"paid",label:"Operasional","default-opened":p.$page.url.startsWith("/admin/operational-costs")||p.$page.url.startsWith("/admin/operational-cost-categories")},{default:l(()=>[p.$can("admin.operational-cost.index")?te((u(),I(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-costs"),onClick:d[21]||(d[21]=f=>a(ee).get(p.route("admin.operational-cost.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"request_quote"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[55]||(d[55]=[v("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.operational-cost-category.index")?te((u(),I(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-cost-categories"),onClick:d[22]||(d[22]=f=>a(ee).get(p.route("admin.operational-cost-category.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"category"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[56]||(d[56]=[v("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(Ut,{icon:"settings",label:"Pengaturan","default-opened":p.$page.url.startsWith("/admin/settings")},{default:l(()=>[p.$can("admin.user.index")?te((u(),I(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/users"),onClick:d[23]||(d[23]=f=>a(ee).get(p.route("admin.user.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"person"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[57]||(d[57]=[v("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.user-role.index")?te((u(),I(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-roles"),onClick:d[24]||(d[24]=f=>a(ee).get(p.route("admin.user-role.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"group"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[58]||(d[58]=[v("Role Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.tax-scheme.index")?te((u(),I(oe,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/tax-schemes"),onClick:d[25]||(d[25]=f=>a(ee).get(p.route("admin.tax-scheme.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"credit_card_gear"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[59]||(d[59]=[v("Skema Pajak")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.pos-settings.edit")?te((u(),I(oe,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/pos"),onClick:d[26]||(d[26]=f=>a(ee).get(p.route("admin.pos-settings.edit")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"point_of_sale"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[60]||(d[60]=[v("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.company-profile.edit")?te((u(),I(oe,{key:4,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/company-profile"),onClick:d[27]||(d[27]=f=>a(ee).get(p.route("admin.company-profile.edit")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"apartment"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[61]||(d[61]=[v("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.user-activity-log.index")?te((u(),I(oe,{key:5,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:d[28]||(d[28]=f=>a(ee).get(p.route("admin.user-activity-log.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"article"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[62]||(d[62]=[v("Log Aktivitas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.database-settings.index")?te((u(),I(oe,{key:6,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/database"),onClick:d[29]||(d[29]=f=>a(ee).get(p.route("admin.database-settings.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"database"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[63]||(d[63]=[v("Database")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),te((u(),I(oe,{class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/system-information"),onClick:d[30]||(d[30]=f=>a(ee).get(p.route("admin.settings.system-information")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(R,{name:"info"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>d[64]||(d[64]=[v("Informasi Sistem")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]])]),_:1},8,["default-opened"]),t("div",wS,"  2025 - "+r(p.$config.APP_NAME+" v"+p.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(cs,{class:"bg-grey-1"},{default:l(()=>[e(Te,null,{default:l(()=>[Dt(p.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),Dt(p.$slots,"footer",{},void 0,!0)]),_:3}))}},$S=kt(hS,[["__scopeId","data-v-b836bcbf"]]),xS={__name:"GuestLayout",setup(c){return(s,m)=>(u(),I(fs,null,{default:l(()=>[Dt(s.$slots,"default")]),_:3}))}};gs({onRegistered(c){console.log("Admin Service Worker registered:",c)}});bs({layouts:{authenticated:$S,guest:xS},pagesGlob:Object.assign({"./pages/_examples/Autocomplete1.vue":ks,"./pages/auth/Login.vue":Cs,"./pages/cashier-session/Close.vue":Ds,"./pages/cashier-session/Detail.vue":Sr,"./pages/cashier-session/Index.vue":Rr,"./pages/cashier-session/Open.vue":Dr,"./pages/cashier-session/detail/FinanceTransactionTab.vue":kr,"./pages/cashier-session/detail/MainInfoTab.vue":nr,"./pages/cashier-session/detail/SalesOrderTab.vue":fr,"./pages/cashier-terminal/Detail.vue":Jr,"./pages/cashier-terminal/Editor.vue":ti,"./pages/cashier-terminal/Index.vue":ri,"./pages/cashier-terminal/detail/MainInfoTab.vue":Fr,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":Hr,"./pages/customer-wallet-transaction-confirmation/Detail.vue":yi,"./pages/customer-wallet-transaction-confirmation/Index.vue":xi,"./pages/customer-wallet-transaction/Adjustment.vue":qi,"./pages/customer-wallet-transaction/Detail.vue":Ai,"./pages/customer-wallet-transaction/Editor.vue":zi,"./pages/customer-wallet-transaction/Index.vue":Ji,"./pages/customer/Detail.vue":yd,"./pages/customer/Editor.vue":hd,"./pages/customer/Import.vue":Td,"./pages/customer/Index.vue":Ad,"./pages/customer/detail/MainInfoTab.vue":od,"./pages/customer/detail/OrderHistoryTab.vue":cd,"./pages/customer/detail/WalletHistoryTab.vue":rd,"./pages/dashboard/Index.vue":nu,"./pages/dashboard/cards/ActualSummaryCard.vue":Hd,"./pages/dashboard/cards/ChartCard.vue":Jd,"./pages/dashboard/cards/SummaryCard.vue":gu,"./pages/dashboard/cards/TopCard.vue":eu,"./pages/finance-account/Detail.vue":qu,"./pages/finance-account/Editor.vue":Ou,"./pages/finance-account/Index.vue":Hu,"./pages/finance-account/detail/HistoryTab.vue":wu,"./pages/finance-account/detail/MainInfoTab.vue":vu,"./pages/finance-transaction/Detail.vue":am,"./pages/finance-transaction/Editor.vue":sm,"./pages/finance-transaction/Index.vue":fm,"./pages/operational-cost-category/Editor.vue":ym,"./pages/operational-cost-category/Index.vue":Sm,"./pages/operational-cost/Detail.vue":Em,"./pages/operational-cost/Editor.vue":zm,"./pages/operational-cost/Index.vue":Gm,"./pages/product-category/Editor.vue":tc,"./pages/product-category/Index.vue":ic,"./pages/product/Detail.vue":Rc,"./pages/product/Editor.vue":Ac,"./pages/product/Import.vue":zc,"./pages/product/Index.vue":tp,"./pages/product/SendPriceList.vue":dp,"./pages/product/SendPriceList2.vue":bp,"./pages/product/detail/MainInfoTab.vue":wc,"./pages/product/detail/StockHistoryTab.vue":xc,"./pages/purchase-order-return/Create.vue":kp,"./pages/purchase-order-return/Detail.vue":_f,"./pages/purchase-order-return/Editor.vue":cg,"./pages/purchase-order-return/Index.vue":Sg,"./pages/purchase-order-return/detail/MainInfoTab.vue":Lp,"./pages/purchase-order-return/detail/PaymentDialog.vue":Gp,"./pages/purchase-order-return/detail/RefundTab.vue":gf,"./pages/purchase-order-return/editor/HelpDialog.vue":Of,"./pages/purchase-order-return/editor/ItemEditorDialog.vue":qf,"./pages/purchase-order-return/editor/ItemsListTable.vue":xf,"./pages/purchase-order-return/editor/OrderInfoDialog.vue":Ef,"./pages/purchase-order-return/editor/PaymentDialog.vue":zg,"./pages/purchase-order-return/editor/SuccessDialog.vue":a1,"./pages/purchase-order/Detail.vue":ab,"./pages/purchase-order/Editor.vue":vv,"./pages/purchase-order/Index.vue":Ov,"./pages/purchase-order/detail/InvoiceTab.vue":V1,"./pages/purchase-order/detail/PaymentDialog.vue":U1,"./pages/purchase-order/detail/PaymentTab.vue":G1,"./pages/purchase-order/editor/HelpDialog.vue":Cb,"./pages/purchase-order/editor/ItemEditorDialog.vue":Vb,"./pages/purchase-order/editor/ItemsListTable.vue":rb,"./pages/purchase-order/editor/OrderInfoDialog.vue":Ob,"./pages/purchase-order/editor/PaymentDialog.vue":$b,"./pages/purchase-order/editor/SuccessDialog.vue":Hb,"./pages/sales-order-return/Create.vue":Ev,"./pages/sales-order-return/Detail.vue":Uy,"./pages/sales-order-return/Editor.vue":w_,"./pages/sales-order-return/Index.vue":E_,"./pages/sales-order-return/detail/MainInfoTab.vue":sy,"./pages/sales-order-return/detail/PaymentDialog.vue":py,"./pages/sales-order-return/detail/RefundTab.vue":Py,"./pages/sales-order-return/editor/HelpDialog.vue":Hy,"./pages/sales-order-return/editor/ItemEditorDialog.vue":zy,"./pages/sales-order-return/editor/ItemsListTable.vue":My,"./pages/sales-order-return/editor/OrderInfoDialog.vue":Qy,"./pages/sales-order-return/editor/PaymentDialog.vue":Z_,"./pages/sales-order-return/editor/SuccessDialog.vue":pk,"./pages/sales-order/Detail.vue":_w,"./pages/sales-order/Editor.vue":D0,"./pages/sales-order/Index.vue":X0,"./pages/sales-order/detail/InvoiceTab.vue":Lk,"./pages/sales-order/detail/PaymentDialog.vue":Xk,"./pages/sales-order/detail/PaymentTab.vue":gw,"./pages/sales-order/editor/HelpDialog.vue":Hw,"./pages/sales-order/editor/ItemEditorDialog.vue":Fw,"./pages/sales-order/editor/ItemsListTable.vue":xw,"./pages/sales-order/editor/OrderInfoDialog.vue":Qw,"./pages/sales-order/editor/PaymentDialog.vue":Nw,"./pages/sales-order/editor/SuccessDialog.vue":i0,"./pages/settings/SystemInformation.vue":o2,"./pages/settings/company-profile/Edit.vue":u2,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":n2,"./pages/settings/database/Index.vue":g2,"./pages/settings/pos/Edit.vue":k2,"./pages/settings/user-activity-log/Detail.vue":sh,"./pages/settings/user-activity-log/Index.vue":ph,"./pages/settings/user-profile/Edit.vue":kh,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":fh,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":gh,"./pages/settings/user-role/Detail.vue":Oh,"./pages/settings/user-role/Editor.vue":Ah,"./pages/settings/user-role/Index.vue":Lh,"./pages/settings/user/Detail.vue":a$,"./pages/settings/user/Editor.vue":i$,"./pages/settings/user/Index.vue":g$,"./pages/stock-adjustment/Create.vue":V$,"./pages/stock-adjustment/Detail.vue":j$,"./pages/stock-adjustment/Editor.vue":L$,"./pages/stock-adjustment/Index.vue":ax,"./pages/stock-movement/Index.vue":rx,"./pages/supplier/Detail.vue":Cx,"./pages/supplier/Editor.vue":Nx,"./pages/supplier/Index.vue":Wx,"./pages/supplier/detail/MainInfoTab.vue":vx,"./pages/supplier/detail/OrderHistoryTab.vue":hx,"./pages/tax-scheme/Editor.vue":aS,"./pages/tax-scheme/Index.vue":fS})});
