import{r as P,a as Q,c as U,o as d,w as a,b as t,d as e,e as w,f as k,Q as ue,t as i,u as l,g as K,h as Ue,i as ua,T as Je,j as Vn,k as be,l as Te,m as Ge,n as J,p as nt,q as pe,s as te,v,x as ta,y as C,z as ie,A as E,B as tt,F as H,C as Qe,D as le,E as yt,G as vt,H as W,I as qn,J as Ra,K as ro,L as Rt,M as X,N as na,O as xe,R as re,P as Ce,S as io,U as Cn,V as Tn,W as Yt,X as jt,Y as Oa,Z as Ea,_ as Pn,$ as Be,a0 as Rn,a1 as On,a2 as In,a3 as Bt,a4 as Un,a5 as Dn,a6 as Ia,a7 as Zt,a8 as Ua,a9 as Ja,aa as jn,ab as ga,ac as Ga,ad as En,ae as Xa,af as An,ag as uo,ah as Mn,ai as Nn,aj as Bn,ak as Na,al as Ba,am as zn,an as Nt,ao as _e,ap as je,aq as Ke,ar as He,as as he,at as Oe,au as Y,av as Se,aw as st,ax as Ye,ay as Ae,az as aa,aA as qe,aB as Pe,aC as at,aD as Fe,aE as Xe,aF as We,aG as et,aH as Ee,aI as ne,aJ as B,aK as fe,aL as ot,aM as Ne,aN as ma,aO as va,aP as Ft,aQ as Lt,aR as Ot,aS as It,aT as ze,aU as Za,aV as Pt,aW as _a,aX as ra,aY as Kt,aZ as za,a_ as ca,a$ as $t,b0 as Fn,b1 as ia,b2 as Ln,b3 as Kn,b4 as mo,b5 as Hn,b6 as Wn,b7 as Yn,b8 as Qn,b9 as el,ba as Jn,bb as Gn,bc as Xn,bd as Zn,be as la,bf as De,bg as _t,bh as es,bi as tl,bj as ts,bk as as,bl as ls,bm as os,bn as ns,bo as ss,bp as rs,bq as ve,br as sa,bs as da,bt as dt,bu as is,bv as ds,bw as us,bx as ms,by as cs,bz as ps,bA as Fa,bB as fs,bC as Vt,bD as ft,bE as La,bF as Aa,bG as co,bH as lt,bI as Jt,bJ as po,bK as oa,bL as wt,bM as fo,bN as gs,bO as gt,bP as ct,bQ as pt,bR as xt,bS as ya,bT as zt,bU as bs,bV as vs,bW as _s,bX as go,bY as ys,bZ as ks,b_ as ws,b$ as al,c0 as hs,c1 as $s,c2 as xs,c3 as Ss,c4 as Vs,c5 as qs,c6 as Cs,c7 as Ts,c8 as Ps}from"./virtual_pwa-register-CHriFkR0.js";const Rs={class:"q-ma-md"},Os={key:0},Is={__name:"Autocomplete1",setup(c){const s=P(null),u=P([]);let o=null;const r=(n,f)=>{if(n.length<2){f(()=>{u.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Ue.get(`/web-api/customers?q=${n}`).then(b=>{const p=b.data.data.map(m=>({label:`${m.code} - ${m.name}`,value:m.id,data:m}));f(()=>{u.value=p})}).catch(b=>{console.error("Gagal mengambil data pelanggan:",b),f(()=>{u.value=[]})})})};return(n,f)=>{const b=Q("guest-layout");return d(),U(b,null,{default:a(()=>[t("div",Rs,[e(ue,{class:"full-width",modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=p=>s.value=p),"use-input":"",label:"Cari Pelanggan",options:u.value,onFilter:r,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),s.value?(d(),w("div",Os," Saldo: Rp. "+i(l(K)(s.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},Us=Object.freeze(Object.defineProperty({__proto__:null,default:Is},Symbol.toStringTag,{value:"Module"})),Ds={style:{"margin-left":"-10px"}},ka={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(c,{emit:s}){const u=c,o=s;return(r,n)=>(d(),w("div",Ds,[e(ua,{class:"full-width q-pl-none","model-value":u.modelValue,disable:u.disable,label:u.label,"onUpdate:modelValue":n[0]||(n[0]=f=>o("update:modelValue",f))},null,8,["model-value","disable","label"])]))}};function Ma(c){return c instanceof File||c instanceof Blob||c instanceof FileList&&c.length>0||c instanceof FormData&&Array.from(c.values()).some(s=>Ma(s))||typeof c=="object"&&c!==null&&Object.values(c).some(s=>Ma(s))}function js(c,s=null){const u=Je(c,s);let o=f=>f,r=null;const n={transform:f=>b=>(o=b,f),submit:f=>(b,p,m={})=>{u.wasSuccessful=!1,u.recentlySuccessful=!1,u.clearErrors(),clearTimeout(r),m.onBefore&&m.onBefore(),u.processing=!0,m.onStart&&m.onStart();const g=o(u.data());axios[b](p,g,{headers:{"Content-Type":Ma(g)?"multipart/form-data":"application/json"},onUploadProgress:_=>{u.progress=_,m.onProgress&&m.onProgress(_)}}).then(_=>{u.processing=!1,u.progress=null,u.clearErrors(),u.wasSuccessful=!0,u.recentlySuccessful=!0,r=setTimeout(()=>u.recentlySuccessful=!1,2e3),m.onSuccess&&m.onSuccess(_.data),u.defaults(Vn(u.data())),u.isDirty=!1}).catch(_=>{var y;u.processing=!1,u.progress=null,u.clearErrors(),((y=_.response)==null?void 0:y.status)===422&&Object.keys(_.response.data.errors).forEach(S=>{u.setError(S,_.response.data.errors[S][0])}),m.onError&&m.onError(_)}).finally(()=>{u.processing=!1,u.progress=null,m.onFinish&&m.onFinish()})}};return new Proxy(u,{get:(f,b,p)=>Object.keys(n).indexOf(b)<0?f[b]:n[b](p)})}const Es={class:"column"},As={class:"row"},Ms={class:"q-my-sm text-grey-7 text-subtitle1 text-bold"},Ns={class:"flex justify-center"},Bs={__name:"Login",setup(c){let s=js({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const u=be();console.log(u.props.data);const o=()=>nt({form:s,url:route("admin.auth.login"),onSuccess:()=>{s.processing=!0,window.location.href=route("admin.dashboard")}}),r=P(!1);return(n,f)=>{const b=Q("i-head"),p=Q("guest-layout");return d(),w(H,null,[e(b,{title:"Login"}),e(p,null,{default:a(()=>[e(Te,{class:"row justify-center items-center"},{default:a(()=>[t("div",Es,[t("div",As,[e(Ge,{class:"q-gutter-md",onSubmit:J(o,["prevent"])},{default:a(()=>[e(pe,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:a(()=>[e(te,{class:"text-center"},{default:a(()=>[t("div",Ms,[v(" Login ke "+i(l(u).props.company.name)+" ",1),t("div",Ns,[e(ta,{size:"100px",class:"q-my-none"},{default:a(()=>[e(C,{name:"badge",color:"grey"})]),_:1})])]),e(ie,{modelValue:l(s).username,"onUpdate:modelValue":f[0]||(f[0]=m=>l(s).username=m),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!l(s).errors.username,autocomplete:"username","error-message":l(s).errors.username,disable:l(s).processing,rules:[m=>m&&m.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:a(()=>[e(C,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(ie,{modelValue:l(s).password,"onUpdate:modelValue":f[2]||(f[2]=m=>l(s).password=m),type:r.value?"text":"password",label:"Kata Sandi",error:!!l(s).errors.password,autocomplete:"current-password","error-message":l(s).errors.password,"lazy-rules":"",disable:l(s).processing,rules:[m=>m&&m.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:f[1]||(f[1]=m=>r.value=!r.value)},{default:a(()=>[e(C,{name:r.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(ka,{class:"q-mt-sm",modelValue:l(s).remember,"onUpdate:modelValue":f[3]||(f[3]=m=>l(s).remember=m),disable:l(s).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(tt,null,{default:a(()=>[e(E,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:l(s).processing,loading:l(s).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},zs=Object.freeze(Object.defineProperty({__proto__:null,default:Bs},Symbol.toStringTag,{value:"Module"})),Fs={class:"q-gutter-sm"},Ls={class:"col col-md-6 q-pa-xs"},Ks={class:"detail q-mt-md"},Hs={key:0},Ws={class:"text-bold"},ll="Tutup Sesi Kasir",Ys={__name:"Close",setup(c){const s=be(),u=Je({closing_notes:s.props.data.closing_notes,closing_balance:parseFloat(s.props.data.closing_balance)}),o=()=>nt({form:u,url:route("admin.cashier-session.close",{id:s.props.data.id})});return(r,n)=>{const f=Q("i-head"),b=Q("authenticated-layout");return d(),w(H,null,[e(f,{title:ll}),e(b,null,{title:a(()=>[v(i(ll))]),"left-button":a(()=>[t("div",Fs,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>r.$inertia.get(r.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ls,[e(Ge,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":n[1]||(n[1]=p=>l(u).id=p)},null,512),[[yt,l(u).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[t("table",Ks,[t("tbody",null,[t("tr",null,[n[4]||(n[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),n[5]||(n[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(s).props.data.id),1)]),t("tr",null,[n[6]||(n[6]=t("td",null,"Terminal",-1)),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"Kasir",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.user.username)+" - "+i(l(s).props.data.user.name),1)]),t("tr",null,[n[10]||(n[10]=t("td",null,"Saldo Awal",-1)),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.opening_balance)),1)]),l(s).props.data.opening_notes?(d(),w("tr",Hs,[n[12]||(n[12]=t("td",null,"Catatan Buka",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.opening_notes),1)])):k("",!0),t("tr",null,[n[14]||(n[14]=t("td",null,"Total Penjualan",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.total_sales)),1)]),t("tr",null,[n[16]||(n[16]=t("td",null,"Total Pemasukan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.total_income)),1)]),t("tr",null,[n[18]||(n[18]=t("td",null,"Total Pengeluaran",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.total_expense)),1)]),t("tr",null,[n[21]||(n[21]=t("td",null,"Saldo Akhir",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,[t("div",Ws,i(l(vt)(l(s).props.data.closing_balance)),1),n[20]||(n[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(ie,{modelValue:l(u).closing_notes,"onUpdate:modelValue":n[2]||(n[2]=p=>l(u).closing_notes=p),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(u).processing,error:!!l(u).errors.closing_notes,"error-message":l(u).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:l(u).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(u).processing,onClick:n[3]||(n[3]=p=>l(W).get(r.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Qs=Object.freeze(Object.defineProperty({__proto__:null,default:Ys},Symbol.toStringTag,{value:"Module"}));let Js=0;const Gs=["click","keydown"],Xs={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Js++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Zs(c,s,u,o){const r=qn(ro,Ra);if(r===Ra)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ra;const{proxy:n}=Rt(),f=P(null),b=P(null),p=P(null),m=X(()=>c.disable===!0||c.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},c.ripple===!0?{}:c.ripple)),g=X(()=>r.currentModel.value===c.name),_=X(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(g.value===!0?" q-tab--active"+(r.tabProps.value.activeClass?" "+r.tabProps.value.activeClass:"")+(r.tabProps.value.activeColor?` text-${r.tabProps.value.activeColor}`:"")+(r.tabProps.value.activeBgColor?` bg-${r.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(c.icon&&c.label&&r.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(c.noCaps===!0||r.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(c.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),y=X(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(r.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(c.contentClass!==void 0?` ${c.contentClass}`:"")),S=X(()=>c.disable===!0||r.hasFocus.value===!0||g.value===!1&&r.hasActiveTab.value===!0?-1:c.tabindex||0);function V(R,I){if(I!==!0&&f.value!==null&&f.value.focus(),c.disable!==!0){r.updateModel({name:c.name}),u("click",R);return}}function x(R){Cn(R,[13,32])?V(R,!0):Tn(R)!==!0&&R.keyCode>=35&&R.keyCode<=40&&R.altKey!==!0&&R.metaKey!==!0&&r.onKbdNavigate(R.keyCode,n.$el)===!0&&Yt(R),u("keydown",R)}function D(){const R=r.tabProps.value.narrowIndicator,I=[],N=Ce("div",{ref:p,class:["q-tab__indicator",r.tabProps.value.indicatorClass]});c.icon!==void 0&&I.push(Ce(C,{class:"q-tab__icon",name:c.icon})),c.label!==void 0&&I.push(Ce("div",{class:"q-tab__label"},c.label)),c.alert!==!1&&I.push(c.alertIcon!==void 0?Ce(C,{class:"q-tab__alert-icon",color:c.alert!==!0?c.alert:void 0,name:c.alertIcon}):Ce("div",{class:"q-tab__alert"+(c.alert!==!0?` text-${c.alert}`:"")})),R===!0&&I.push(N);const M=[Ce("div",{class:"q-focus-helper",tabindex:-1,ref:f}),Ce("div",{class:y.value},io(s.default,I))];return R===!1&&M.push(N),M}const L={name:X(()=>c.name),rootRef:b,tabIndicatorRef:p,routeData:o};na(()=>{r.unregisterTab(L)}),xe(()=>{r.registerTab(L)});function T(R,I){const N={ref:b,class:_.value,tabindex:S.value,role:"tab","aria-selected":g.value===!0?"true":"false","aria-disabled":c.disable===!0?"true":void 0,onClick:V,onKeydown:x,...I};return le(Ce(R,N,D()),[[re,m.value]])}return{renderTab:T,$tabs:r}}const rt=jt({name:"QTab",props:Xs,emits:Gs,setup(c,{slots:s,emit:u}){const{renderTab:o}=Zs(c,s,u);return()=>o("div")}});function er(c,s,u){const o=u===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${c?` text-${c}`:""}`}const tr=["left","center","right","justify"],qt=jt({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:c=>tr.includes(c)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(c,{slots:s,emit:u}){const{proxy:o}=Rt(),{$q:r}=o,{registerTick:n}=Oa(),{registerTick:f}=Oa(),{registerTick:b}=Oa(),{registerTimeout:p,removeTimeout:m}=Ea(),{registerTimeout:g,removeTimeout:_}=Ea(),y=P(null),S=P(null),V=P(c.modelValue),x=P(!1),D=P(!0),L=P(!1),T=P(!1),R=[],I=P(0),N=P(!1);let M=null,h=null,j;const O=X(()=>({activeClass:c.activeClass,activeColor:c.activeColor,activeBgColor:c.activeBgColor,indicatorClass:er(c.indicatorColor,c.switchIndicator,c.vertical),narrowIndicator:c.narrowIndicator,inlineLabel:c.inlineLabel,noCaps:c.noCaps})),$=X(()=>{const ye=I.value,Ve=V.value;for(let Me=0;Me<ye;Me++)if(R[Me].name.value===Ve)return!0;return!1}),A=X(()=>`q-tabs__content--align-${x.value===!0?"left":T.value===!0?"justify":c.align}`),F=X(()=>`q-tabs row no-wrap items-center q-tabs--${x.value===!0?"":"not-"}scrollable q-tabs--${c.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${c.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${c.mobileArrows===!0?"":"out"}-arrows`+(c.dense===!0?" q-tabs--dense":"")+(c.shrink===!0?" col-shrink":"")+(c.stretch===!0?" self-stretch":"")),q=X(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+A.value+(c.contentClass!==void 0?` ${c.contentClass}`:"")),z=X(()=>c.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),oe=X(()=>c.vertical!==!0&&r.lang.rtl===!0),ce=X(()=>Pn===!1&&oe.value===!0);Be(oe,we),Be(()=>c.modelValue,ye=>{de({name:ye,setCurrent:!0,skipEmit:!0})}),Be(()=>c.outsideArrows,Ie);function de({name:ye,setCurrent:Ve,skipEmit:Me}){V.value!==ye&&(Me!==!0&&c["onUpdate:modelValue"]!==void 0&&u("update:modelValue",ye),(Ve===!0||c["onUpdate:modelValue"]===void 0)&&(Z(V.value,ye),V.value=ye))}function Ie(){n(()=>{ke({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function ke(ye){if(z.value===void 0||S.value===null)return;const Ve=ye[z.value.container],Me=Math.min(S.value[z.value.scroll],Array.prototype.reduce.call(S.value.children,(mt,Ze)=>mt+(Ze[z.value.content]||0),0)),ut=Ve>0&&Me>Ve;x.value=ut,ut===!0&&f(we),T.value=Ve<parseInt(c.breakpoint,10)}function Z(ye,Ve){const Me=ye!=null&&ye!==""?R.find(mt=>mt.name.value===ye):null,ut=Ve!=null&&Ve!==""?R.find(mt=>mt.name.value===Ve):null;if(fa===!0)fa=!1;else if(Me&&ut){const mt=Me.tabIndicatorRef.value,Ze=ut.tabIndicatorRef.value;M!==null&&(clearTimeout(M),M=null),mt.style.transition="none",mt.style.transform="none",Ze.style.transition="none",Ze.style.transform="none";const Le=mt.getBoundingClientRect(),kt=Ze.getBoundingClientRect();Ze.style.transform=c.vertical===!0?`translate3d(0,${Le.top-kt.top}px,0) scale3d(1,${kt.height?Le.height/kt.height:1},1)`:`translate3d(${Le.left-kt.left}px,0,0) scale3d(${kt.width?Le.width/kt.width:1},1,1)`,b(()=>{M=setTimeout(()=>{M=null,Ze.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Ze.style.transform="none"},70)})}ut&&x.value===!0&&ae(ut.rootRef.value)}function ae(ye){const{left:Ve,width:Me,top:ut,height:mt}=S.value.getBoundingClientRect(),Ze=ye.getBoundingClientRect();let Le=c.vertical===!0?Ze.top-ut:Ze.left-Ve;if(Le<0){S.value[c.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Le),we();return}Le+=c.vertical===!0?Ze.height-mt:Ze.width-Me,Le>0&&(S.value[c.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Le),we())}function we(){const ye=S.value;if(ye===null)return;const Ve=ye.getBoundingClientRect(),Me=c.vertical===!0?ye.scrollTop:Math.abs(ye.scrollLeft);oe.value===!0?(D.value=Math.ceil(Me+Ve.width)<ye.scrollWidth-1,L.value=Me>0):(D.value=Me>0,L.value=c.vertical===!0?Math.ceil(Me+Ve.height)<ye.scrollHeight:Math.ceil(Me+Ve.width)<ye.scrollWidth)}function se(ye){h!==null&&clearInterval(h),h=setInterval(()=>{$e(ye)===!0&&ee()},5)}function G(){se(ce.value===!0?Number.MAX_SAFE_INTEGER:0)}function me(){se(ce.value===!0?0:Number.MAX_SAFE_INTEGER)}function ee(){h!==null&&(clearInterval(h),h=null)}function ge(ye,Ve){const Me=Array.prototype.filter.call(S.value.children,kt=>kt===Ve||kt.matches&&kt.matches(".q-tab.q-focusable")===!0),ut=Me.length;if(ut===0)return;if(ye===36)return ae(Me[0]),Me[0].focus(),!0;if(ye===35)return ae(Me[ut-1]),Me[ut-1].focus(),!0;const mt=ye===(c.vertical===!0?38:37),Ze=ye===(c.vertical===!0?40:39),Le=mt===!0?-1:Ze===!0?1:void 0;if(Le!==void 0){const kt=oe.value===!0?-1:1,Dt=Me.indexOf(Ve)+Le*kt;return Dt>=0&&Dt<ut&&(ae(Me[Dt]),Me[Dt].focus({preventScroll:!0})),!0}}const Re=X(()=>ce.value===!0?{get:ye=>Math.abs(ye.scrollLeft),set:(ye,Ve)=>{ye.scrollLeft=-Ve}}:c.vertical===!0?{get:ye=>ye.scrollTop,set:(ye,Ve)=>{ye.scrollTop=Ve}}:{get:ye=>ye.scrollLeft,set:(ye,Ve)=>{ye.scrollLeft=Ve}});function $e(ye){const Ve=S.value,{get:Me,set:ut}=Re.value;let mt=!1,Ze=Me(Ve);const Le=ye<Ze?-1:1;return Ze+=Le*5,Ze<0?(mt=!0,Ze=0):(Le===-1&&Ze<=ye||Le===1&&Ze>=ye)&&(mt=!0,Ze=ye),ut(Ve,Ze),we(),mt}function bt(ye,Ve){for(const Me in ye)if(ye[Me]!==Ve[Me])return!1;return!0}function ht(){let ye=null,Ve={matchedLen:0,queryDiff:9999,hrefLen:0};const Me=R.filter(Le=>Le.routeData!==void 0&&Le.routeData.hasRouterLink.value===!0),{hash:ut,query:mt}=o.$route,Ze=Object.keys(mt).length;for(const Le of Me){const kt=Le.routeData.exact.value===!0;if(Le.routeData[kt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Dt,query:Ta,matched:xn,href:Sn}=Le.routeData.resolvedLink.value,Pa=Object.keys(Ta).length;if(kt===!0){if(Dt!==ut||Pa!==Ze||bt(mt,Ta)===!1)continue;ye=Le.name.value;break}if(Dt!==""&&Dt!==ut||Pa!==0&&bt(Ta,mt)===!1)continue;const Mt={matchedLen:xn.length,queryDiff:Ze-Pa,hrefLen:Sn.length-Dt.length};if(Mt.matchedLen>Ve.matchedLen){ye=Le.name.value,Ve=Mt;continue}else if(Mt.matchedLen!==Ve.matchedLen)continue;if(Mt.queryDiff<Ve.queryDiff)ye=Le.name.value,Ve=Mt;else if(Mt.queryDiff!==Ve.queryDiff)continue;Mt.hrefLen>Ve.hrefLen&&(ye=Le.name.value,Ve=Mt)}if(ye===null&&R.some(Le=>Le.routeData===void 0&&Le.name.value===V.value)===!0){fa=!1;return}de({name:ye,setCurrent:!0})}function Ut(ye){if(m(),N.value!==!0&&y.value!==null&&ye.target&&typeof ye.target.closest=="function"){const Ve=ye.target.closest(".q-tab");Ve&&y.value.contains(Ve)===!0&&(N.value=!0,x.value===!0&&ae(Ve))}}function At(){p(()=>{N.value=!1},30)}function Ht(){Wa.avoidRouteWatcher===!1?g(ht):_()}function Ha(){if(j===void 0){const ye=Be(()=>o.$route.fullPath,Ht);j=()=>{ye(),j=void 0}}}function hn(ye){R.push(ye),I.value++,Ie(),ye.routeData===void 0||o.$route===void 0?g(()=>{if(x.value===!0){const Ve=V.value,Me=Ve!=null&&Ve!==""?R.find(ut=>ut.name.value===Ve):null;Me&&ae(Me.rootRef.value)}}):(Ha(),ye.routeData.hasRouterLink.value===!0&&Ht())}function $n(ye){R.splice(R.indexOf(ye),1),I.value--,Ie(),j!==void 0&&ye.routeData!==void 0&&(R.every(Ve=>Ve.routeData===void 0)===!0&&j(),Ht())}const Wa={currentModel:V,tabProps:O,hasFocus:N,hasActiveTab:$,registerTab:hn,unregisterTab:$n,verifyRouteModel:Ht,updateModel:de,onKbdNavigate:ge,avoidRouteWatcher:!1};Un(ro,Wa);function Ya(){M!==null&&clearTimeout(M),ee(),j!==void 0&&j()}let Qa,fa;return na(Ya),Rn(()=>{Qa=j!==void 0,Ya()}),On(()=>{Qa===!0&&(Ha(),fa=!0,Ht()),Ie()}),()=>Ce("div",{ref:y,class:F.value,role:"tablist",onFocusin:Ut,onFocusout:At},[Ce(In,{onResize:ke}),Ce("div",{ref:S,class:q.value,onScroll:we},Bt(s.default)),Ce(C,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(D.value===!0?"":" q-tabs__arrow--faded"),name:c.leftIcon||r.iconSet.tabs[c.vertical===!0?"up":"left"],onMousedownPassive:G,onTouchstartPassive:G,onMouseupPassive:ee,onMouseleavePassive:ee,onTouchendPassive:ee}),Ce(C,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(L.value===!0?"":" q-tabs__arrow--faded"),name:c.rightIcon||r.iconSet.tabs[c.vertical===!0?"down":"right"],onMousedownPassive:me,onTouchstartPassive:me,onMouseupPassive:ee,onMouseleavePassive:ee,onTouchendPassive:ee})])}});function ar(c){const s=[.06,6,50];return typeof c=="string"&&c.length&&c.split(":").forEach((u,o)=>{const r=parseFloat(u);r&&(s[o]=r)}),s}const lr=Dn({name:"touch-swipe",beforeMount(c,{value:s,arg:u,modifiers:o}){if(o.mouse!==!0&&Zt.has.touch!==!0)return;const r=o.mouseCapture===!0?"Capture":"",n={handler:s,sensitivity:ar(u),direction:Ja(o),noop:jn,mouseStart(f){Xa(f,n)&&An(f)&&(ga(n,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(f,!0))},touchStart(f){if(Xa(f,n)){const b=f.target;ga(n,"temp",[[b,"touchmove","move","notPassiveCapture"],[b,"touchcancel","end","notPassiveCapture"],[b,"touchend","end","notPassiveCapture"]]),n.start(f)}},start(f,b){Zt.is.firefox===!0&&Ua(c,!0);const p=Ga(f);n.event={x:p.left,y:p.top,time:Date.now(),mouse:b===!0,dir:!1}},move(f){if(n.event===void 0)return;if(n.event.dir!==!1){Yt(f);return}const b=Date.now()-n.event.time;if(b===0)return;const p=Ga(f),m=p.left-n.event.x,g=Math.abs(m),_=p.top-n.event.y,y=Math.abs(_);if(n.event.mouse!==!0){if(g<n.sensitivity[1]&&y<n.sensitivity[1]){n.end(f);return}}else if(window.getSelection().toString()!==""){n.end(f);return}else if(g<n.sensitivity[2]&&y<n.sensitivity[2])return;const S=g/b,V=y/b;n.direction.vertical===!0&&g<y&&g<100&&V>n.sensitivity[0]&&(n.event.dir=_<0?"up":"down"),n.direction.horizontal===!0&&g>y&&y<100&&S>n.sensitivity[0]&&(n.event.dir=m<0?"left":"right"),n.direction.up===!0&&g<y&&_<0&&g<100&&V>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&g<y&&_>0&&g<100&&V>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&g>y&&m<0&&y<100&&S>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&g>y&&m>0&&y<100&&S>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Yt(f),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),En(),n.styleCleanup=x=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const D=()=>{document.body.classList.remove("no-pointer-events--children")};x===!0?setTimeout(D,50):D()}),n.handler({evt:f,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:b,distance:{x:g,y}})):n.end(f)},end(f){n.event!==void 0&&(Ia(n,"temp"),Zt.is.firefox===!0&&Ua(c,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),f!==void 0&&n.event.dir!==!1&&Yt(f),n.event=void 0)}};if(c.__qtouchswipe=n,o.mouse===!0){const f=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ga(n,"main",[[c,"mousedown","mouseStart",`passive${f}`]])}Zt.has.touch===!0&&ga(n,"main",[[c,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[c,"touchmove","noop","notPassiveCapture"]])},updated(c,s){const u=c.__qtouchswipe;u!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&u.end(),u.handler=s.value),u.direction=Ja(s.modifiers))},beforeUnmount(c){const s=c.__qtouchswipe;s!==void 0&&(Ia(s,"main"),Ia(s,"temp"),Zt.is.firefox===!0&&Ua(c,!1),s.styleCleanup!==void 0&&s.styleCleanup(),delete c.__qtouchswipe)}}),or={name:{required:!0},disable:Boolean},ol={setup(c,{slots:s}){return()=>Ce("div",{class:"q-panel scroll",role:"tabpanel"},Bt(s.default))}},nr={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},sr=["update:modelValue","beforeTransition","transition"];function rr(){const{props:c,emit:s,proxy:u}=Rt(),{getCache:o}=Nn(),{registerTimeout:r}=Ea();let n,f;const b=P(null),p=P(null);function m(z){const oe=c.vertical===!0?"up":"left";j((u.$q.lang.rtl===!0?-1:1)*(z.direction===oe?1:-1))}const g=X(()=>[[lr,m,void 0,{horizontal:c.vertical!==!0,vertical:c.vertical,mouse:!0}]]),_=X(()=>c.transitionPrev||`slide-${c.vertical===!0?"down":"right"}`),y=X(()=>c.transitionNext||`slide-${c.vertical===!0?"up":"left"}`),S=X(()=>`--q-transition-duration: ${c.transitionDuration}ms`),V=X(()=>typeof c.modelValue=="string"||typeof c.modelValue=="number"?c.modelValue:String(c.modelValue)),x=X(()=>({include:c.keepAliveInclude,exclude:c.keepAliveExclude,max:c.keepAliveMax})),D=X(()=>c.keepAliveInclude!==void 0||c.keepAliveExclude!==void 0);Be(()=>c.modelValue,(z,oe)=>{const ce=I(z)===!0?N(z):-1;f!==!0&&h(ce===-1?0:ce<N(oe)?-1:1),b.value!==ce&&(b.value=ce,s("beforeTransition",z,oe),r(()=>{s("transition",z,oe)},c.transitionDuration))});function L(){j(1)}function T(){j(-1)}function R(z){s("update:modelValue",z)}function I(z){return z!=null&&z!==""}function N(z){return n.findIndex(oe=>oe.props.name===z&&oe.props.disable!==""&&oe.props.disable!==!0)}function M(){return n.filter(z=>z.props.disable!==""&&z.props.disable!==!0)}function h(z){const oe=z!==0&&c.animated===!0&&b.value!==-1?"q-transition--"+(z===-1?_.value:y.value):null;p.value!==oe&&(p.value=oe)}function j(z,oe=b.value){let ce=oe+z;for(;ce!==-1&&ce<n.length;){const de=n[ce];if(de!==void 0&&de.props.disable!==""&&de.props.disable!==!0){h(z),f=!0,s("update:modelValue",de.props.name),setTimeout(()=>{f=!1});return}ce+=z}c.infinite===!0&&n.length!==0&&oe!==-1&&oe!==n.length&&j(z,z===-1?n.length:-1)}function O(){const z=N(c.modelValue);return b.value!==z&&(b.value=z),!0}function $(){const z=I(c.modelValue)===!0&&O()&&n[b.value];return c.keepAlive===!0?[Ce(Bn,x.value,[Ce(D.value===!0?o(V.value,()=>({...ol,name:V.value})):ol,{key:V.value,style:S.value},()=>z)])]:[Ce("div",{class:"q-panel scroll",style:S.value,key:V.value,role:"tabpanel"},[z])]}function A(){if(n.length!==0)return c.animated===!0?[Ce(uo,{name:p.value},$)]:$()}function F(z){return n=Mn(Bt(z.default,[])).filter(oe=>oe.props!==null&&oe.props.slot===void 0&&I(oe.props.name)===!0),n.length}function q(){return n}return Object.assign(u,{next:L,previous:T,goTo:R}),{panelIndex:b,panelDirectives:g,updatePanelsList:F,updatePanelIndex:O,getPanelContent:A,getEnabledPanels:M,getPanels:q,isValidPanelName:I,keepAliveProps:x,needsUniqueKeepAliveWrapper:D,goToPanelByOffset:j,goToPanel:R,nextPanel:L,previousPanel:T}}const it=jt({name:"QTabPanel",props:or,setup(c,{slots:s}){return()=>Ce("div",{class:"q-tab-panel",role:"tabpanel"},Bt(s.default))}}),Ct=jt({name:"QTabPanels",props:{...nr,...Na},emits:sr,setup(c,{slots:s}){const u=Rt(),o=Ba(c,u.proxy.$q),{updatePanelsList:r,getPanelContent:n,panelDirectives:f}=rr(),b=X(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(s),zn("div",{class:b.value},n(),"pan",c.swipeable,()=>f.value))}}),ir={class:"detail"},dr={key:0},ur={key:1},mr={key:0},cr={key:0},pr={colspan:"100%"},fr={class:"q-my-md"},gr={key:4},br={colspan:"100%"},vr={key:5},_r={colspan:"100%"},bo={__name:"MainInfoTab",setup(c){const s=be();return(u,o)=>(d(),w("table",ir,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(s).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.user.username)+" - "+i(l(s).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.opening_balance)),1)]),l(s).props.data.opening_notes?(d(),w("tr",dr,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.total_expense)),1)]),l(s).props.data.is_closed?k("",!0):(d(),w("tr",ur,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.actual_balance)),1)])),l(s).props.data.is_closed?(d(),w(H,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.closing_balance)),1)]),l(s).props.data.closing_notes?(d(),w("tr",mr,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),u.$can("admin.cashier-session.close")?(d(),w(H,{key:3},[l(s).props.data.is_closed?k("",!0):(d(),w("tr",cr,[t("td",pr,[t("div",fr,[e(E,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=r=>u.$inertia.get(u.route("admin.cashier-session.close",{id:l(s).props.data.id})))},{default:a(()=>o[26]||(o[26]=[v(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),l(s).props.data.created_at?(d(),w("tr",gr,[t("td",br," Dibuat "+i(l(Nt)(l(s).props.data.created_at))+" oleh "+i(l(s).props.data.creator.name)+" ("+i(l(_e)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",vr,[t("td",_r," Diperbarui "+i(l(Nt)(l(s).props.data.updated_at))+" oleh "+i(l(s).props.data.updater.name)+" ("+i(l(_e)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},yr=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),kr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},wr={class:"text-bold"},hr={key:0},$r={class:"text-bold"},xr={key:1},Sr={key:0},Vr={key:0},qr={key:1},vo={__name:"SalesOrderTab",props:{data:Object},setup(c){const s=c,u=P([]),o=P(!0),r=je({...Ke(),cashier_session_id:s.data.id,status:["closed","canceled"]}),n=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{b()});const b=(g=null)=>He({pagination:n,filter:r,props:g,rows:u,url:route("admin.sales-order.data"),loading:o}),p=he(),m=X(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),U(Ae,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:r.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",kr,[t("span",null,i(S)+" "+i(V?" with term "+V:""),1)])]),body:a(y=>[e(Oe,{props:y,class:"cursor-pointer",onClick:J(S=>l(W).get(g.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",wr,[e(C,{class:"inline-icon",name:"tag"}),v(" "+i(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(" "+i(l(_e)(y.row.datetime)),1)]),l(p).screen.lt.md?(d(),w(H,{key:0},[y.row.customer?(d(),w("div",hr,[e(C,{class:"inline-icon",name:"person"}),v(" "+i(y.row.customer_code)+" "+i(y.row.customer.name),1)])):k("",!0),t("div",$r,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+i(l(K)(y.row.grand_total)),1)]),y.row.notes?(d(),w("div",xr,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(st,{color:y.row.status==="closed"?"green":"red"},{default:a(()=>[v(i(g.$CONSTANTS.SALES_ORDER_STATUSES[y.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"customer",props:y},{default:a(()=>[y.row.customer?(d(),w("div",Sr,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+i(y.row.customer_code)+" - "+i(y.row.customer_name),1)]),y.row.customer_phone?(d(),w("div",Vr,[e(C,{name:"phone",class:"inline-icon"}),v(" "+i(y.row.customer_phone),1)])):k("",!0),y.row.customer_address?(d(),w("div",qr,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+i(y.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:y},{default:a(()=>[t("div",null,i(l(K)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Cr=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),Tr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Pr={class:"text-bold"},Rr={class:"text-bold"},Or={key:0},Ir={class:"q-mt-sm"},_o={__name:"FinanceTransactionTab",props:{data:Object},setup(c){var g;const s=c;console.log(s.data);const u=P([]),o=P(!0),r=je({...Ke(),account_id:(g=s.data.cashier_terminal)==null?void 0:g.finance_account_id,from_datetime:aa(s.data.opened_at),to_datetime:s.data.closed_at?aa(s.data.closed_at):null}),n=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{b()});const b=(_=null)=>He({pagination:n,filter:r,props:_,rows:u,url:route("admin.finance-transaction.data"),loading:o}),p=he(),m=X(()=>p.screen.gt.sm?f:f.filter(_=>_.name==="id"));return(_,y)=>(d(),U(Ae,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=S=>n.value=S),filter:r.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:S,message:V,filter:x})=>[t("div",Tr,[t("span",null,i(V)+" "+i(x?" with term "+x:""),1)])]),body:a(S=>[e(Oe,{props:S},{default:a(()=>[e(Y,{key:"id",props:S},{default:a(()=>[t("div",Pr,[e(C,{class:"inline-icon",name:"tag"}),v(" "+i(S.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(" "+i(l(_e)(S.row.datetime)),1)]),l(p).screen.lt.md?(d(),w(H,{key:0},[t("div",Rr,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+i(l(K)(S.row.amount)),1)]),S.row.notes?(d(),w("div",Or,[e(Se,{text:S.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",Ir,[e(st,{color:S.row.amount>=0?"green":"red"},{default:a(()=>[v(i(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"amount",props:S},{default:a(()=>[t("span",{class:qe(S.row.amount<0?"text-red":"text-green")},i(l(K)(S.row.amount)),3)]),_:2},1032,["props"]),e(Y,{key:"notes",props:S,class:"wrap-column"},{default:a(()=>[e(Se,{text:S.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ur=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),Dr={class:"q-gutter-sm"},jr={class:"col col-lg-6 q-pa-xs"},Er={class:"row"},nl="Rincian Sesi Kasir",Ar={__name:"Detail",setup(c){const s=be(),u=X(()=>s.props.data),o=P("main");return Be(()=>s.props.tab,r=>{r&&(o.value=r)},{immediate:!0}),(r,n)=>{const f=Q("i-head"),b=Q("authenticated-layout");return d(),w(H,null,[e(f,{title:nl}),e(b,null,{title:a(()=>[v(i(nl))]),"left-button":a(()=>[t("div",Dr,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>r.$inertia.get(r.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",jr,[t("div",Er,[e(pe,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:a(()=>[e(qt,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(rt,{name:"main",label:"Ringkasan"}),e(rt,{name:"sales",label:"Transaksi Penjualan"}),e(rt,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Pe),e(Ct,{modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=p=>o.value=p),animated:"",class:"q-pa-none"},{default:a(()=>[e(it,{name:"main"},{default:a(()=>[e(bo,{data:u.value},null,8,["data"])]),_:1}),e(it,{name:"sales",class:"q-pa-xs"},{default:a(()=>[e(vo,{data:u.value},null,8,["data"])]),_:1}),e(it,{name:"finance",class:"q-pa-xs"},{default:a(()=>[e(_o,{data:u.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Mr=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"}));function Et(){return{protectClick:s=>(u,o)=>{const r=window.getSelection();if(r&&!r.isCollapsed){o.stopPropagation();return}s(u,o)}}}const Nr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Br={class:"q-pa-xs"},zr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Fr={class:"row items-center q-gutter-x-sm"},Lr={class:"avatar"},Kr={class:"col"},Hr={class:"row items-center no-wrap"},Wr={class:"row items-center no-wrap"},Yr={class:"row items-center q-gutter-x-sm"},Qr={class:"avatar"},Jr={class:"col"},Gr={class:"row items-center no-wrap"},Xr={class:"flex justify-end"},sl="Sesi Kasir",Zr={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=je({search:"",status:"all",...Ke()}),m=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];xe(()=>{S()});const y=R=>ot({message:`Hapus Sesi: ${R.cashier_terminal.name} - ${R.user.username}?`,url:route("admin.cashier-session.delete",R.id),fetchItemsCallback:S,loading:r}),S=(R=null)=>{He({pagination:m,filter:p,props:R,rows:o,url:route("admin.cashier-session.data"),loading:r,tableRef:n})},V=()=>S(),x=R=>W.get(route("admin.cashier-session.detail",{id:R.id})),{protectClick:D}=Et(),L=D(x),T=X(()=>s.screen.gt.sm?g:g.filter(R=>R.name==="id"||R.name==="action"));return(R,I)=>{const N=Q("i-head"),M=Q("authenticated-layout");return d(),w(H,null,[e(N,{title:sl}),e(M,null,Fe({title:a(()=>[v(i(sl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=h=>u.value=!u.value)},null,8,["icon"]),R.$can("admin.cashier-session.open")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=h=>l(W).get(R.route("admin.cashier-session.open")))})):k("",!0)]),default:a(()=>[t("div",Br,[e(Ae,{class:"full-height-table",style:We({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":I[5]||(I[5]=h=>m.value=h),filter:p.search,loading:r.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:O})=>[t("div",zr,[t("span",null,i(j)+" "+i(O?" with term "+O:""),1)])]),body:a(h=>[e(Oe,{props:h,class:qe(["cursor-pointer",h.row.is_closed?"":"bg-yellow-3"]),onClick:J(j=>l(L)(h.row,j),["stop"])},{default:a(()=>[e(Y,{key:"id",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" ID: "+i(h.row.id),1)]),t("div",null,[e(C,{class:"inline-icon",name:"point_of_sale"}),v(" "+i(h.row.cashier_terminal.name),1)]),t("div",null,[e(C,{class:"inline-icon",name:"person"}),v(" "+i(h.row.user.username)+" - "+i(h.row.user.name),1)]),l(s).screen.lt.md?(d(),w(H,{key:0},[e(Pe),t("div",Fr,[t("div",Lr,[e(C,{name:"login",size:"25px",color:"grey-8"})]),t("div",Kr,[t("div",Hr,[e(C,{name:"calendar_clock",size:"xs",class:"q-mr-xs"}),t("span",null,i(h.row.opened_at?l(_e)(h.row.opened_at):"-"),1)]),t("div",Wr,[e(C,{name:"money",size:"xs",class:"q-mr-xs"}),t("span",null,i(l(vt)(h.row.opening_balance)),1)])])]),h.row.is_closed?(d(),w(H,{key:0},[e(Pe),t("div",Yr,[t("div",Qr,[e(C,{name:"logout",size:"25px",color:"grey-8"})]),t("div",Jr,[t("div",Gr,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+i(h.row.closed_at?l(_e)(h.row.closed_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+i(l(vt)(h.row.closing_balance)),1)])])])],64)):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"opening_info",props:h},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+i(h.row.opened_at?l(_e)(h.row.opened_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+i(l(vt)(h.row.opening_balance)),1)]),h.row.opening_notes?(d(),U(Se,{key:0,text:h.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"closing_info",props:h},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+i(h.row.closed_at?l(_e)(h.row.closed_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+i(l(vt)(h.row.closing_balance)),1)]),h.row.closing_notes?(d(),U(Se,{key:0,text:h.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"action",props:h},{default:a(()=>[t("div",Xr,[R.$can("admin.cashier-session.close")||R.$can("admin.cashier-session.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[4]||(I[4]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[R.$can("admin.cashier-session.close")?le((d(),U(ne,{key:0,disable:h.row.is_closed,clickable:"",onClick:J(j=>l(W).get(R.route("admin.cashier-session.close",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"logout"})]),_:1}),e(B,null,{default:a(()=>I[6]||(I[6]=[v("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[re],[fe]]):k("",!0),R.$can("admin.cashier-session.delete")&&!h.row.is_closed?le((d(),U(ne,{key:1,onClick:J(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>I[7]||(I[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Nr,[e(ue,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[2]||(I[2]=h=>p.status=h),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[3]||(I[3]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ei=Object.freeze(Object.defineProperty({__proto__:null,default:Zr},Symbol.toStringTag,{value:"Module"})),ti={class:"q-gutter-sm"},ai={class:"col col-md-6 q-pa-xs"},rl="Buka Sesi Kasir",li={__name:"Open",setup(c){const s=be(),u=Je({cashier_terminal_id:s.props.data.cashier_terminal_id,opening_balance:parseFloat(s.props.data.opening_balance),opening_notes:s.props.data.opening_notes}),o=[...s.props.cashier_terminals.map(n=>({value:n.id,label:n.name,balance:parseFloat(n.finance_account.balance)}))],r=()=>nt({form:u,url:route("admin.cashier-session.open")});return Be(()=>u.cashier_terminal_id,n=>{if(n){const f=o.find(b=>b.value===n);f&&(u.opening_balance=f.balance)}else u.opening_balance=0}),(n,f)=>{const b=Q("i-head"),p=Q("authenticated-layout");return d(),w(H,null,[e(b,{title:rl}),e(p,null,{title:a(()=>[v(i(rl))]),"left-button":a(()=>[t("div",ti,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=m=>n.$inertia.get(n.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",ai,[e(Ge,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=m=>l(u).id=m)},null,512),[[yt,l(u).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(ue,{class:"custom-select",modelValue:l(u).cashier_terminal_id,"onUpdate:modelValue":f[2]||(f[2]=m=>l(u).cashier_terminal_id=m),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:l(u).errors.cashier_terminal_id,error:!!l(u).errors.cashier_terminal_id,disable:l(u).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Ne,{modelValue:l(u).opening_balance,"onUpdate:modelValue":f[3]||(f[3]=m=>l(u).opening_balance=m),label:"Saldo Buka Sesi",lazyRules:"",disable:l(u).processing,error:!!l(u).errors.opening_balance,errorMessage:l(u).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),f[6]||(f[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(ie,{modelValue:l(u).opening_notes,"onUpdate:modelValue":f[4]||(f[4]=m=>l(u).opening_notes=m),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(u).processing,error:!!l(u).errors.opening_notes,"error-message":l(u).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:l(u).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(u).processing,onClick:f[5]||(f[5]=m=>l(W).get(n.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},oi=Object.freeze(Object.defineProperty({__proto__:null,default:li},Symbol.toStringTag,{value:"Module"})),ni={class:"detail"},si={colspan:"3"},ri={class:"text-bold text-grey-8"},ii={key:0},di={colspan:"100%"},ui={key:1},mi={colspan:"100%"},yo={__name:"MainInfoTab",setup(c){const s=be();return(u,o)=>(d(),w("table",ni,[t("tbody",null,[t("tr",null,[t("td",si,[t("div",ri,[o[1]||(o[1]=v(" Info Terminal Kasir ")),e(E,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=r=>u.$inertia.get(u.route("admin.cashier-terminal.edit",{id:l(s).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(s).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(l(vt)(l(s).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),l(s).props.data.created_at?(d(),w("tr",ii,[t("td",di," Dibuat "+i(l(Nt)(l(s).props.data.created_at))+" oleh "+i(l(s).props.data.creator.name)+" ("+i(l(_e)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",ui,[t("td",mi," Diperbarui "+i(l(Nt)(l(s).props.data.updated_at))+" oleh "+i(l(s).props.data.updater.name)+" ("+i(l(_e)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},ci=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),pi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ko={__name:"SessionHistoryTab",setup(c){const s=be(),u=P([]),o=P(!0),r=je({cashier_terminal_id:s.props.data.id,...Ke()}),n=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];xe(()=>{b()});const b=(g=null)=>He({pagination:n,filter:r,props:g,rows:u,url:route("admin.cashier-session.data"),loading:o}),p=he(),m=X(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),U(Ae,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:r.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",pi,[t("span",null,i(S)+" "+i(V?" with term "+V:""),1)])]),body:a(y=>[e(Oe,{props:y,class:"cursor-pointer",onClick:J(S=>l(W).get(g.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" Session ID: "+i(y.row.id),1)]),t("div",null,[e(C,{class:"inline-icon",name:"point_of_sale"}),v(" "+i(y.row.cashier_terminal.name),1)]),t("div",null,[e(C,{class:"inline-icon",name:"person"}),v(" "+i(y.row.user.username)+" - "+i(y.row.user.name),1)])]),_:2},1032,["props"]),e(Y,{key:"opening_info",props:y},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+i(y.row.opened_at?l(_e)(y.row.opened_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+i(l(vt)(y.row.opening_balance)),1)]),y.row.opening_notes?(d(),U(Se,{key:0,text:y.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"closing_info",props:y},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+i(y.row.closed_at?l(_e)(y.row.closed_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+i(l(vt)(y.row.closing_balance)),1)]),y.row.closing_notes?(d(),U(Se,{key:0,text:y.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},fi=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),gi={class:"q-gutter-sm"},bi={class:"col col-lg-6 q-pa-xs"},vi={class:"row"},il="Rincian Terminal Kasir",_i={__name:"Detail",setup(c){const s=P("main");return(u,o)=>{const r=Q("i-head"),n=Q("authenticated-layout");return d(),w(H,null,[e(r,{title:il}),e(n,null,{title:a(()=>[v(i(il))]),"left-button":a(()=>[t("div",gi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=f=>u.$inertia.get(u.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",bi,[t("div",vi,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(qt,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=f=>s.value=f),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(rt,{name:"main",label:"Info Utama"}),e(rt,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(Ct,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=f=>s.value=f),animated:""},{default:a(()=>[e(it,{name:"main"},{default:a(()=>[e(yo)]),_:1}),e(it,{name:"session-history",class:"q-pa-xs"},{default:a(()=>[e(ko)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},yi=Object.freeze(Object.defineProperty({__proto__:null,default:_i},Symbol.toStringTag,{value:"Module"})),ki={class:"q-gutter-sm"},wi={class:"col col-md-6 q-pa-xs"},hi={key:0,class:"q-my-xs text-grey-8"},$i={__name:"Editor",setup(c){const s=be(),u=(s.props.data.id?"Edit":"Tambah")+" Terminal",o=Je({id:s.props.data.id,name:s.props.data.name,finance_account_id:s.props.data.finance_account_id??"new",location:s.props.data.location,active:!!s.props.data.active,notes:s.props.data.notes}),r=[{value:"new",label:"Buat Baru (Otomatis)"},...s.props.finance_accounts.map(f=>({value:f.id,label:f.name}))],n=()=>nt({form:o,url:route("admin.cashier-terminal.save")});return(f,b)=>{const p=Q("i-head"),m=Q("authenticated-layout");return d(),w(H,null,[e(p,{title:u}),e(m,null,{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",ki,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>f.$inertia.get(f.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",wi,[e(Ge,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(o).id=g)},null,512),[[yt,l(o).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(ie,{modelValue:l(o).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ue,{class:"custom-select",modelValue:l(o).finance_account_id,"onUpdate:modelValue":b[3]||(b[3]=g=>l(o).finance_account_id=g),label:"Akun Kas",options:r,"map-options":"","emit-value":"",errorMessage:l(o).errors.finance_account_id,error:!!l(o).errors.finance_account_id,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),l(o).finance_account_id==="new"?(d(),w("div",hi,[b[8]||(b[8]=v(" Akun keuangan akan dibuat ")),l(o).name?(d(),w(H,{key:0},[v(" dengan nama Kas "+i(l(o).name),1)],64)):k("",!0)])):k("",!0),e(ie,{modelValue:l(o).location,"onUpdate:modelValue":b[4]||(b[4]=g=>l(o).location=g),modelModifiers:{trim:!0},label:"Lokasi",error:!!l(o).errors.location,disable:l(o).processing,"error-message":l(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ie,{modelValue:l(o).notes,"onUpdate:modelValue":b[5]||(b[5]=g=>l(o).notes=g),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ka,{modelValue:l(o).active,"onUpdate:modelValue":b[6]||(b[6]=g=>l(o).active=g),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(o).processing,onClick:b[7]||(b[7]=g=>l(W).get(f.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},xi=Object.freeze(Object.defineProperty({__proto__:null,default:$i},Symbol.toStringTag,{value:"Module"})),Si={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Vi={class:"q-pa-xs"},qi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ci={class:"flex justify-end"},dl="Terminal Kasir",Ti={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=je({search:"",status:"active",...Ke()}),m=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:s.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];xe(()=>{S()});const y=R=>ot({message:`Hapus Terminal Kasir ${R.name}?`,url:route("admin.cashier-terminal.delete",R.id),fetchItemsCallback:S,loading:r}),S=(R=null)=>{He({pagination:m,filter:p,props:R,rows:o,url:route("admin.cashier-terminal.data"),loading:r,tableRef:n})},V=()=>S(),x=R=>W.get(route("admin.cashier-terminal.detail",{id:R.id})),{protectClick:D}=Et(),L=D(x),T=X(()=>s.screen.gt.sm?g:g.filter(R=>R.name==="name"||R.name==="finance_account_id"||R.name==="action"));return(R,I)=>{const N=Q("i-head"),M=Q("authenticated-layout");return d(),w(H,null,[e(N,{title:dl}),e(M,null,Fe({title:a(()=>[v(i(dl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=h=>u.value=!u.value)},null,8,["icon"]),R.$can("admin.cashier-terminal.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=h=>l(W).get(R.route("admin.cashier-terminal.add")))})):k("",!0)]),default:a(()=>[t("div",Vi,[e(Ae,{class:"full-height-table",style:We({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":I[5]||(I[5]=h=>m.value=h),filter:p.search,loading:r.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:O})=>[t("div",qi,[t("span",null,i(j)+" "+i(O?" with term "+O:""),1)])]),body:a(h=>[e(Oe,{props:h,class:qe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(j=>l(L)(h.row,j),["stop"])},{default:a(()=>[e(Y,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{name:"wallet"}),v(" "+i(h.row.name),1)]),t("div",null,[e(C,{name:"home_pin"}),v(" "+i(h.row.location),1)]),l(s).screen.lt.md?(d(),U(Se,{key:0,text:h.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:h},{default:a(()=>[t("div",null,[e(C,{name:"wallet"}),v(" "+i(h.row.finance_account.name),1)]),t("div",null,[e(C,{name:"money"}),v(" "+i(l(vt)(h.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(Y,{key:"notes",props:h},{default:a(()=>[e(Se,{text:h.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:h},{default:a(()=>[t("div",Ci,[R.$can("admin.cashier-terminal.edit")||R.$can("admin.cashier-terminal.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[4]||(I[4]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[R.$can("admin.cashier-terminal.edit")?le((d(),U(ne,{key:0,clickable:"",onClick:J(j=>l(W).get(R.route("admin.cashier-terminal.edit",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>I[6]||(I[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),R.$can("admin.cashier-terminal.delete")?le((d(),U(ne,{key:1,onClick:J(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>I[7]||(I[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Si,[e(ue,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[2]||(I[2]=h=>p.status=h),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[3]||(I[3]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Pi=Object.freeze(Object.defineProperty({__proto__:null,default:Ti},Symbol.toStringTag,{value:"Module"})),Ri={class:"q-gutter-sm"},Oi={class:"col col-md-6 q-pa-xs"},Ii={class:"row"},Ui={class:"detail"},Di={key:0},ji={key:1},Ei={key:0},Ai={key:1},Mi={colspan:"3",class:"bg-white"},ul="Rincian Konfirmasi Top Up",Ni={__name:"Detail",setup(c){const s=be(),u=()=>va({message:`Setujui konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"accept"},onSuccess:()=>{W.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}}),o=()=>va({message:`Tolak konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"reject"},onSuccess:()=>{W.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}});return(r,n)=>{const f=Q("i-head"),b=Q("i-link"),p=Q("my-link"),m=Q("authenticated-layout");return d(),w(H,null,[e(f,{title:ul}),e(m,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Ri,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=g=>r.$inertia.get(r.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":a(()=>[l(s).props.data.status=="pending"&&r.$can("admin.customer-wallet-transaction-confirmation:reject")?(d(),U(E,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:n[1]||(n[1]=g=>o()),class:"q-mr-sm"})):k("",!0),l(s).props.data.status=="pending"&&r.$can("admin.customer-wallet-transaction-confirmation:accept")?(d(),U(E,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:n[2]||(n[2]=g=>u())})):k("",!0)]),title:a(()=>[t("span",{class:"text-subtitle2"},i(ul))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Oi,[t("div",Ii,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[n[24]||(n[24]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",Ui,[t("tbody",null,[t("tr",null,[n[3]||(n[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),n[4]||(n[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(s).props.data.code),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Waktu",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.datetime)),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Pelanggan",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),e(b,{href:r.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[v(i(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+i(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(d(),w("div",Di,[e(C,{name:"phone",class:"inline-icon"}),v(" "+i(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(d(),w("div",ji,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+i(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[n[11]||(n[11]=t("td",null,"Akun Tujuan",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[e(p,{href:r.route("admin.finance-account.detail",{id:l(s).props.data.finance_account.id})},{default:a(()=>[v(i(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),n[10]||(n[10]=t("br",null,null,-1)),l(s).props.data.finance_account.type==="bank"?(d(),w(H,{key:0},[v(" Rek "+i(l(s).props.data.finance_account.bank)+" an "+i(l(s).props.data.finance_account.holder)+" ",1),n[9]||(n[9]=t("br",null,null,-1)),v(" "+i(l(s).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[n[13]||(n[13]=t("td",null,"Jumlah",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,"Rp. "+i(l(K)(l(s).props.data.amount)),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"Status",-1)),n[16]||(n[16]=t("td",null,":",-1)),t("td",null,i(r.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[n[17]||(n[17]=t("td",null,"Catatan",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",Ei,[n[19]||(n[19]=t("td",null,"Dibuat",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.created_at))+" oleh "+i(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",Ai,[n[21]||(n[21]=t("td",null,"Diperbarui",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.updated_at))+" oleh "+i(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(H,{key:2},[n[23]||(n[23]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Mi,[e(ma,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:We([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Bi=Object.freeze(Object.defineProperty({__proto__:null,default:Ni},Symbol.toStringTag,{value:"Module"})),zi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Fi={class:"q-pa-xs"},Li={key:0},Ki={class:"flex justify-end no-wrap"},ml="Konfirmasi Top Up Wallet",Hi={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=P(null),m=P(!1),g=Ft(),_=Lt(),y=[{label:"Semua Tahun",value:"all"},...Ot(g-2,g).reverse()],S=[{value:"all",label:"Semua Bulan"},...It()],V=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],x=je({search:"",year:g,month:_,status:"all",...Ke()}),D=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),L=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",field:"action",align:"center"}];xe(()=>{T()});const T=(O=null)=>{He({pagination:D,filter:x,props:O,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:r,tableRef:n})},R=()=>{T()},I=X(()=>s.screen.gt.sm?L:L.filter(O=>["code","action"].includes(O.name)));Be(()=>x.year,O=>{O===null&&(x.month=null)});const N=O=>va({message:`Setujui konfirmasi transaksi #${O.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:T,loading:r,data:{id:O.id,action:"accept"}}),M=O=>va({message:`Tolak konfirmasi transaksi #${O.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:T,loading:r,data:{id:O.id,action:"reject"}}),h=O=>ot({message:`Hapus konfirmasi transaksi ${O.code}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",O.id),fetchItemsCallback:T,loading:r}),j=O=>{p.value=O,m.value=!0};return(O,$)=>{const A=Q("i-head"),F=Q("authenticated-layout");return d(),w(H,null,[e(A,{title:ml}),e(F,null,Fe({title:a(()=>[v(i(ml))]),"right-button":a(()=>[e(E,{class:"q-ml-sm",icon:u.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:$[0]||($[0]=q=>u.value=!u.value)},null,8,["icon"])]),default:a(()=>[t("div",Fi,[e(Ae,{ref_key:"tableRef",ref:n,class:"full-height-table",style:We({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":$[6]||($[6]=q=>D.value=q),filter:x.search,loading:r.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:T,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),body:a(q=>[e(Oe,{props:q,class:"cursor-pointer",onClick:J(z=>l(W).get(O.route("admin.customer-wallet-transaction-confirmation.detail",{id:q.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"code",props:q,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" "+i(q.row.code),1)]),l(s).screen.gt.sm?k("",!0):(d(),w("div",Li,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+i(l(_e)(q.row.datetime)),1)])),l(s).screen.gt.sm?k("",!0):(d(),w(H,{key:1},[e(Se,{icon:"account_balance",text:q.row.finance_account.name},null,8,["text"]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+i(q.row.customer.code)+" - "+i(q.row.customer.name),1)]),t("div",null,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+i(l(K)(q.row.amount)),1)]),q.row.notes?(d(),U(Se,{key:0,icon:"notes",text:q.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Za,{status:q.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(Y,{key:"datetime",props:q,class:"wrap-column"},{default:a(()=>[v(i(l(_e)(q.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"customer_id",props:q},{default:a(()=>[e(Se,{text:q.row.customer.code+" - "+q.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:q},{default:a(()=>[v(i(q.row.finance_account.name),1),$[8]||($[8]=t("br",null,null,-1)),v(" "+i(q.row.finance_account.bank)+" "+i(q.row.finance_account.number)+" an. "+i(q.row.finance_account.holder),1)]),_:2},1032,["props"]),e(Y,{key:"amount",props:q,style:{"text-align":"right"}},{default:a(()=>[v(i(l(K)(q.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"status",props:q,class:"text-center"},{default:a(()=>[e(Za,{status:q.row.status},null,8,["status"])]),_:2},1032,["props"]),e(Y,{key:"notes",props:q,class:"word-wrap"},{default:a(()=>[e(Se,{icon:"notes",text:q.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:q,class:"text-center"},{default:a(()=>[t("div",Ki,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:q.row.image_path===null||q.row.image_path==="",onClick:J(z=>j(q.row.image_path),["stop"])},{default:a(()=>[q.row.image_path!=null?(d(),U(Pt,{key:0},{default:a(()=>$[9]||($[9]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),O.$can("admin.customer-wallet-transaction-confirmation:accept")||O.$can("admin.customer-wallet-transaction-confirmation:deny")||O.$can("admin.customer-wallet-transaction-confirmation.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[O.$can("admin.customer-wallet-transaction-confirmation:accept")?le((d(),U(ne,{key:0,onClick:J(z=>N(q.row),["stop"]),clickable:"",disable:q.row.status!=="pending"},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"check"})]),_:1}),e(B,null,{default:a(()=>$[10]||($[10]=[v("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[re],[fe]]):k("",!0),O.$can("admin.customer-wallet-transaction-confirmation:deny")?le((d(),U(ne,{key:1,onClick:J(z=>M(q.row),["stop"]),clickable:"",disable:q.row.status!=="pending"},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(B,null,{default:a(()=>$[11]||($[11]=[v("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[re],[fe]]):k("",!0),e(Pe),O.$can("admin.customer-wallet-transaction-confirmation.delete")?le((d(),U(ne,{key:2,onClick:J(z=>h(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>$[12]||($[12]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(_a,{modelValue:m.value,"onUpdate:modelValue":$[7]||($[7]=q=>m.value=q),imageUrl:`/${p.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",zi,[e(ue,{modelValue:x.year,"onUpdate:modelValue":[$[1]||($[1]=q=>x.year=q),R],options:y,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!=="all"?(d(),U(ue,{key:0,modelValue:x.month,"onUpdate:modelValue":[$[2]||($[2]=q=>x.month=q),R],options:S,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ue,{modelValue:x.status,"onUpdate:modelValue":[$[3]||($[3]=q=>x.status=q),R],options:V,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":$[4]||($[4]=q=>x.search=q),placeholder:"Cari...",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wi=Object.freeze(Object.defineProperty({__proto__:null,default:Hi},Symbol.toStringTag,{value:"Module"}));function wo(c,s=!1){const u=c.map(f=>({value:f.id,label:f.name+" ("+f.code+")"})),o=s?[{value:"all",label:"Semua"},...u]:u,r=P([...o]);return{filteredCustomers:r,filterCustomersFn:(f,b)=>{b(()=>{r.value=o.filter(p=>p.label.toLowerCase().includes(f.toLowerCase()))})},customers:o}}const Yi={class:"col col-md-6 q-pa-xs"},cl="Penyesuaian Saldo Dompet Pelanggan",Qi={__name:"Adjustment",setup(c){const s=be(),{filteredCustomers:u,filterCustomersFn:o}=wo(s.props.customers,!1),r=Je({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),n=()=>r.amount=r.new_wallet_balance-r.old_wallet_balance;Be(()=>r.customer_id,async p=>{if(!p){r.old_wallet_balance=0,r.new_wallet_balance=0,n();return}r.processing=!0;try{const m=await axios.get(route("admin.customer.wallet_balance",{id:p}));r.new_wallet_balance=r.old_wallet_balance=m.data.wallet_balance}catch(m){console.error("Gagal mengambil saldo:",m),r.old_wallet_balance=0,r.new_wallet_balance=0}r.processing=!1,n()});const f=X(()=>r.new_wallet_balance-r.old_wallet_balance),b=()=>nt({form:r,url:route("admin.customer-wallet-transaction.adjustment")});return(p,m)=>{const g=Q("i-head"),_=Q("authenticated-layout");return d(),w(H,null,[e(g,{title:cl}),e(_,null,{title:a(()=>[v(i(cl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Yi,[e(Ge,{class:"row",onSubmit:J(b,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(ue,{class:"custom-select",modelValue:l(r).customer_id,"onUpdate:modelValue":m[0]||(m[0]=y=>l(r).customer_id=y),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(u),"map-options":"","emit-value":"",errorMessage:l(r).errors.customer_id,onFilter:l(o),error:!!l(r).errors.customer_id,disable:l(r).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ne,null,{default:a(()=>[e(B,null,{default:a(()=>m[6]||(m[6]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Ne,{modelValue:l(r).old_wallet_balance,"onUpdate:modelValue":m[1]||(m[1]=y=>l(r).old_wallet_balance=y),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:l(r).processing,error:!!l(r).errors.old_wallet_balance,errorMessage:l(r).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ne,{modelValue:l(r).new_wallet_balance,"onUpdate:modelValue":m[2]||(m[2]=y=>l(r).new_wallet_balance=y),label:"Saldo Seharusnya",lazyRules:"",disable:l(r).processing,error:!!l(r).errors.new_wallet_balance,errorMessage:l(r).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ne,{modelValue:f.value,"onUpdate:modelValue":m[3]||(m[3]=y=>f.value=y),label:"Selisih",readonly:"",lazyRules:"",disable:l(r).processing},null,8,["modelValue","disable"]),e(ie,{modelValue:l(r).notes,"onUpdate:modelValue":m[4]||(m[4]=y=>l(r).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(r).processing,error:!!l(r).errors.notes,"error-message":l(r).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(r).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(r).processing,onClick:m[5]||(m[5]=y=>l(W).get(p.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ji=Object.freeze(Object.defineProperty({__proto__:null,default:Qi},Symbol.toStringTag,{value:"Module"})),Gi={class:"q-gutter-sm"},Xi={class:"col col-md-6 q-pa-xs"},Zi={class:"row"},ed={class:"detail"},td={key:0},ad={key:1},ld={key:0},od={key:1},nd={colspan:"3",class:"bg-white"},pl="Rincian Transaksi",sd={__name:"Detail",setup(c){const s=be();return(u,o)=>{const r=Q("i-head"),n=Q("i-link"),f=Q("authenticated-layout");return d(),w(H,null,[e(r,{title:pl}),e(f,null,{"left-button":a(()=>[t("div",Gi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.router.get(u.route("admin.customer-wallet-transaction.index")))})])]),title:a(()=>[v(i(pl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Xi,[t("div",Zi,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[18]||(o[18]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",ed,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.datetime)),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Pelanggan",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),e(n,{href:u.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[v(""+i(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+i(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(d(),w("div",td,[e(C,{name:"phone",class:"inline-icon"}),v(" "+i(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(d(),w("div",ad,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+i(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,i(u.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[l(s).props.data.type]),1)]),t("tr",null,[o[9]||(o[9]=t("td",null,"Jumlah",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",{class:qe(l(s).props.data.amount>0?"text-positive":"text-negative")},i(l(ra)(l(s).props.data.amount))+"Rp. "+i(l(K)(Math.abs(l(s).props.data.amount))),3)]),t("tr",null,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",ld,[o[13]||(o[13]=t("td",null,"Dibuat",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.created_at))+" oleh "+i(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",od,[o[15]||(o[15]=t("td",null,"Diperbarui",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.updated_at))+" oleh "+i(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(H,{key:2},[o[17]||(o[17]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",nd,[e(ma,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:We([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},rd=Object.freeze(Object.defineProperty({__proto__:null,default:sd},Symbol.toStringTag,{value:"Module"})),id={class:"q-gutter-sm"},dd={class:"col col-md-6 q-pa-xs"},ud={__name:"Editor",setup(c){var m;const s=be(),u=(s.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:r}=wo(s.props.customers,!1),n=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],f=s.props.finance_accounts.map(g=>({label:g.name,value:g.id})),b=Je({id:s.props.data.id,customer_id:s.props.data.customer_id,finance_account_id:s.props.data.finance_account_id,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((m=s.props.data)==null?void 0:m.image_path)??"",image:null}),p=()=>{ca(b,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:b,url:route("admin.customer-wallet-transaction.save")})};return(g,_)=>{const y=Q("i-head"),S=Q("authenticated-layout");return d(),w(H,null,[e(y,{title:u}),e(S,null,{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",id,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=V=>g.$inertia.get(g.route("admin.customer-wallet-transaction.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",dd,[e(Ge,{class:"row",onSubmit:J(p,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=V=>l(b).id=V)},null,512),[[yt,l(b).id]]),e(Kt,{autofocus:"",modelValue:l(b).datetime,"onUpdate:modelValue":_[2]||(_[2]=V=>l(b).datetime=V),label:"Tanggal",error:!!l(b).errors.datetime,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ue,{class:"custom-select",modelValue:l(b).customer_id,"onUpdate:modelValue":_[3]||(_[3]=V=>l(b).customer_id=V),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(o),"map-options":"","emit-value":"",errorMessage:l(b).errors.customer_id,onFilter:l(r),error:!!l(b).errors.customer_id,disable:l(b).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ne,null,{default:a(()=>[e(B,null,{default:a(()=>_[10]||(_[10]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(ue,{modelValue:l(b).type,"onUpdate:modelValue":_[4]||(_[4]=V=>l(b).type=V),label:"Jenis",options:n,"map-options":"","emit-value":"",error:!!l(b).errors.type,disable:l(b).processing,errorMessage:l(b).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ue,{modelValue:l(b).finance_account_id,"onUpdate:modelValue":_[5]||(_[5]=V=>l(b).finance_account_id=V),label:l(b).type=="deposit"?"Kas Tujuan":"Kas Asal",options:l(f),"map-options":"","emit-value":"",error:!!l(b).errors.finance_account_id,disable:l(b).processing,errorMessage:l(b).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Ne,{modelValue:l(b).amount,"onUpdate:modelValue":_[6]||(_[6]=V=>l(b).amount=V),label:"Jumlah",lazyRules:"",disable:l(b).processing,error:!!l(b).errors.amount,errorMessage:l(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ie,{modelValue:l(b).notes,"onUpdate:modelValue":_[7]||(_[7]=V=>l(b).notes=V),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(b).processing,error:!!l(b).errors.notes,"error-message":l(b).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(za,{modelValue:l(b).image,"onUpdate:modelValue":_[8]||(_[8]=V=>l(b).image=V),"initial-image-path":l(b).image_path,disabled:l(b).processing,error:!!l(b).errors.image||!!l(b).errors.image_path,"error-message":l(b).errors.image||l(b).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(b).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(b).processing,onClick:_[9]||(_[9]=V=>l(W).get(g.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},md=Object.freeze(Object.defineProperty({__proto__:null,default:ud},Symbol.toStringTag,{value:"Module"})),cd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},pd={class:"q-pa-xs"},fd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},gd={key:0},bd={key:0},vd={class:"flex justify-end no-wrap"},fl="Transaksi Dompet Pelanggan",_d={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=new Date().getFullYear(),m=new Date().getMonth()+1,g=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Ot(p-2,p-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...It()],y=je({search:"",year:p,month:m,...Ke()}),S=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),V=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{D()});const x=M=>ot({message:`Hapus transaksi #${M.code}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",M.id),fetchItemsCallback:D,loading:r}),D=(M=null)=>{He({pagination:S,filter:y,props:M,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:r,tableRef:n})},L=()=>{D()},T=X(()=>s.screen.gt.sm?V:V.filter(M=>M.name==="code"||M.name==="action"));Be(()=>y.year,M=>{M===null&&(y.month=null)});const R=P(null),I=P(!1),N=M=>{R.value=M,I.value=!0};return(M,h)=>{const j=Q("i-head"),O=Q("authenticated-layout");return d(),w(H,null,[e(j,{title:fl}),e(O,null,Fe({title:a(()=>[v(i(fl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=$=>u.value=!u.value)},null,8,["icon"]),M.$can("admin.customer-wallet-transaction.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=$=>l(W).get(M.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",pd,[e(Ae,{ref_key:"tableRef",ref:n,style:We({height:l(b)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:S.value,"onUpdate:pagination":h[6]||(h[6]=$=>S.value=$),filter:y.search,loading:r.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:D,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:A,filter:F})=>[t("div",fd,[t("span",null,i(A)+" "+i(F?" with term "+F:""),1)])]),body:a($=>[e(Oe,{props:$,class:"cursor-pointer",onClick:J(A=>l(W).get(M.route("admin.customer-wallet-transaction.detail",{id:$.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"code",props:$,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.gt.sm?k("",!0):(d(),U(C,{key:0,name:"tag",class:"inline-icon"})),v(" "+i($.row.code),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+i(l(_e)($.row.datetime)),1)]),$.row.finance_account?(d(),w("div",gd,[e(C,{name:"wallet",class:"inline-icon"}),v(" "+i($.row.finance_account?$.row.finance_account.name:"-"),1)])):k("",!0),e(Se,{icon:"person",text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"]),t("div",{class:qe([$.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(C,{name:"money",class:"inline-icon"}),v(" "+i(l(ra)($.row.amount))+"Rp. "+i(l(K)(Math.abs($.row.amount))),1)],2),e(Se,{text:$.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(st,null,{default:a(()=>[v(i($.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(Y,{key:"datetime",props:$},{default:a(()=>[v(i(l(_e)($.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"customer_id",props:$},{default:a(()=>[e(Se,{text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:$},{default:a(()=>[$.row.finance_account?(d(),w("div",bd,i($.row.finance_account?$.row.finance_account.name:"-"),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"amount",props:$,style:{"text-align":"right"}},{default:a(()=>[v(i(l($t)($.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:$},{default:a(()=>[e(Se,{text:$.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:$},{default:a(()=>[t("div",vd,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:$.row.image_path===null||$.row.image_path==="",onClick:J(A=>N($.row.image_path),["stop"])},{default:a(()=>[$.row.image_path!=null?(d(),U(Pt,{key:0},{default:a(()=>h[8]||(h[8]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),M.$can("admin.customer-wallet-transaction.delete")?(d(),U(E,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:h[5]||(h[5]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[M.$can("admin.customer-wallet-transaction.delete")?le((d(),U(ne,{key:0,onClick:J(A=>x($.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>h[9]||(h[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(_a,{modelValue:I.value,"onUpdate:modelValue":h[7]||(h[7]=$=>I.value=$),imageUrl:`/${R.value}`},null,8,["modelValue","imageUrl"])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",cd,[e(ue,{modelValue:y.year,"onUpdate:modelValue":[h[2]||(h[2]=$=>y.year=$),L],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ue,{modelValue:y.month,"onUpdate:modelValue":[h[3]||(h[3]=$=>y.month=$),L],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:y.year===null},null,8,["modelValue","disable"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":h[4]||(h[4]=$=>y.search=$),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},yd=Object.freeze(Object.defineProperty({__proto__:null,default:_d},Symbol.toStringTag,{value:"Module"})),kd=["href"],wd={key:1},ea={__name:"WaLink",props:{phone:{type:String,required:!0},message:{type:String,default:""},display_text:{type:String,default:""}},setup(c){const s=c,u=X(()=>Fn(s.phone,s.message)),o=X(()=>s.display_text?s.display_text:s.phone&&u.value!=="#"?s.phone:"-"),r=X(()=>s.phone&&u.value!=="#");return(n,f)=>r.value?(d(),w("a",{key:0,href:u.value,target:"_blank",rel:"noopener noreferrer"},[v(i(o.value)+" ",1),e(l(C),{name:"open_in_new",size:"xs",class:"q-ml-xs"})],8,kd)):(d(),w("span",wd,i(o.value),1))}},hd={class:"detail"},$d={key:0},xd={key:1},Sd={class:"text-grey-8"},Vd={key:2},qd={class:"text-grey-8"},Cd={key:0,class:"q-pt-md"},ho={__name:"MainInfoTab",setup(c){const s=be(),u=()=>{ot({message:`Hapus Pelanggan ${s.props.data.code}?`,url:route("admin.customer.delete",s.props.data.id),onSuccess:()=>{W.get(route("admin.customer.index"))}})};return(o,r)=>(d(),w(H,null,[t("table",hd,[t("tbody",null,[r[28]||(r[28]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pelanggan")])],-1)),t("tr",null,[r[1]||(r[1]=t("td",{style:{width:"120px"}},"Kode",-1)),r[2]||(r[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(s).props.data.code),1)]),t("tr",null,[r[3]||(r[3]=t("td",null,"Jenis",-1)),r[4]||(r[4]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.type_label),1)]),t("tr",null,[r[5]||(r[5]=t("td",null,"Nama",-1)),r[6]||(r[6]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.name),1)]),t("tr",null,[r[7]||(r[7]=t("td",null,"Default Harga",-1)),r[8]||(r[8]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.default_price_type_label),1)]),t("tr",null,[r[9]||(r[9]=t("td",null,"No. Telepon",-1)),r[10]||(r[10]=t("td",null,":",-1)),t("td",null,[e(ea,{phone:l(s).props.data.phone},null,8,["phone"])])]),t("tr",null,[r[11]||(r[11]=t("td",null,"Alamat",-1)),r[12]||(r[12]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.address?l(s).props.data.address:"-"),1)]),t("tr",null,[r[13]||(r[13]=t("td",null,"Saldo Wallet",-1)),r[14]||(r[14]=t("td",null,":",-1)),t("td",null," Rp. "+i(l($t)(l(s).props.data.wallet_balance)),1)]),t("tr",null,[r[15]||(r[15]=t("td",null,"Saldo Utang / Piutang",-1)),r[16]||(r[16]=t("td",null,":",-1)),t("td",null,"Rp. "+i(l($t)(l(s).props.data.balance)),1)]),t("tr",null,[r[17]||(r[17]=t("td",null,"Status",-1)),r[18]||(r[18]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),r[29]||(r[29]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),l(s).props.data.created_at?(d(),w("tr",$d,[r[19]||(r[19]=t("td",null,"Dibuat",-1)),r[20]||(r[20]=t("td",null,":",-1)),t("td",null,i(l(Nt)(l(s).props.data.created_at))+" oleh "+i(l(s).props.data.creator.name)+" ("+i(l(_e)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",xd,[r[21]||(r[21]=t("td",null,"Diperbarui",-1)),r[22]||(r[22]=t("td",null,":",-1)),t("td",null,i(l(Nt)(l(s).props.data.updated_at))+" oleh "+i(l(s).props.data.updater.name)+" ("+i(l(_e)(l(s).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[r[23]||(r[23]=t("td",null,"Terakhir login",-1)),r[24]||(r[24]=t("td",null,":",-1)),t("td",null,[v(i(l(s).props.data.last_login_datetime?l(_e)(l(s).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",Sd,"("+i(l(Nt)(l(s).props.data.last_login_datetime))+")",1)])]),l(s).props.data.last_activity_datetime?(d(),w("tr",Vd,[r[26]||(r[26]=t("td",null,"Aktifitas Terakhir",-1)),r[27]||(r[27]=t("td",null,":",-1)),t("td",null,[v(i(l(_e)(l(s).props.data.last_activity_datetime))+" ",1),t("span",qd,[v("("+i(l(Nt)(l(s).props.data.last_activity_datetime))+")",1),r[25]||(r[25]=t("br",null,null,-1)),v(i(l(s).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(d(),w("div",Cd,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:r[0]||(r[0]=n=>u())})])):k("",!0)],64))}},Td=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),Pd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Rd={class:"text-bold"},$o={__name:"WalletHistoryTab",setup(c){const s=be(),u=P([]),o=P(!0),r=je({customer_id:s.props.data.id,...Ke()}),n=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];xe(()=>{b()});const b=(g=null)=>He({pagination:n,filter:r,props:g,rows:u,url:route("admin.customer-wallet-transaction.data"),loading:o}),p=he(),m=X(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),U(Ae,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:r.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",Pd,[t("span",null,i(S)+" "+i(V?" with term "+V:""),1)])]),body:a(y=>[e(Oe,{props:y,class:"cursor-pointer",onClick:J(S=>l(W).get(g.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",Rd,[e(C,{class:"inline-icon",name:"tag"}),v(" "+i(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+i(l(_e)(y.row.datetime)),1)]),l(p).screen.lt.md?(d(),w(H,{key:0},[t("div",{class:qe(["text-bold",y.row.amount<0?"text-red":"text-green"])},[e(C,{name:"money",class:"inline-icon"}),v(" "+i(l(ia)(y.row.amount)),1)],2),t("div",null,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(st,{size:"xs",color:y.row.amount>0?"green":"red"},{default:a(()=>[e(C,{name:"category"}),v(" "+i(y.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:y},{default:a(()=>[t("div",{class:qe(y.row.amount<0?"text-red-10":y.row.amount>0?"text-green-10":"")},i(l($t)(y.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Od=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),Id={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ud={class:"text-bold"},Dd={key:0},jd={key:1},xo={__name:"OrderHistoryTab",setup(c){const s=be(),u=P([]),o=P(!0),r=je({customer_id:s.props.data.id,...Ke()}),n=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{b()});const b=(g=null)=>He({pagination:n,filter:r,props:g,rows:u,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:s.props.data.id}}),loading:o}),p=he(),m=X(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),U(Ae,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:r.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",Id,[t("span",null,i(S)+" "+i(V?" with term "+V:""),1)])]),body:a(y=>[e(Oe,{props:y,class:"cursor-pointer",onClick:J(S=>l(W).get(g.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",Ud,[e(C,{class:"inline-icon",name:"tag"}),v(" "+i(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+i(l(_e)(y.row.datetime)),1)]),l(p).screen.lt.md?(d(),w(H,{key:0},[t("div",null,[e(C,{name:"money",class:"inline-icon"}),v(" Total: Rp. "+i(l(K)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(d(),w("div",Dd,[e(C,{name:"money",class:"inline-icon"}),v(" Sisa Utang Rp. "+i(l(K)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(d(),w("div",jd,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(st,{color:y.row.status=="closed"?"green":"red"},{default:a(()=>[v(i(y.row.status_label),1)]),_:2},1032,["color"]),e(st,{class:"q-ml-xs",color:y.row.payment_status=="fully_paid"?"green":"red"},{default:a(()=>[v(i(y.row.payment_status_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:y},{default:a(()=>[v(i(l(K)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"remaining_debt",props:y},{default:a(()=>[v(i(l(K)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ed=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),Ad={class:"q-gutter-sm"},Md={class:"q-gutter-sm"},Nd={class:"col col-lg-6 q-pa-xs"},Bd={class:"row"},gl="Rincian Pelanggan",zd={__name:"Detail",setup(c){const s=be(),u=P("main");return he(),(o,r)=>{const n=Q("i-head"),f=Q("authenticated-layout");return d(),w(H,null,[e(n,{title:gl}),e(f,null,{title:a(()=>[v(i(gl))]),"left-button":a(()=>[t("div",Ad,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=b=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":a(()=>[t("div",Md,[o.$can("admin.customer.edit")?(d(),U(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:r[1]||(r[1]=b=>l(W).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),U(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:r[2]||(r[2]=b=>l(W).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),U(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:r[3]||(r[3]=b=>l(W).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Nd,[t("div",Bd,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(qt,{modelValue:u.value,"onUpdate:modelValue":r[4]||(r[4]=b=>u.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(rt,{name:"main",label:"Info Utama"}),e(rt,{name:"history",label:"Riwayat Wallet"}),e(rt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Ct,{modelValue:u.value,"onUpdate:modelValue":r[5]||(r[5]=b=>u.value=b),animated:""},{default:a(()=>[e(it,{name:"main"},{default:a(()=>[e(ho)]),_:1}),e(it,{name:"history",class:"q-pa-xs"},{default:a(()=>[e($o)]),_:1}),e(it,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(xo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Fd=Object.freeze(Object.defineProperty({__proto__:null,default:zd},Symbol.toStringTag,{value:"Module"})),Ld={class:"q-gutter-sm"},Kd={class:"col col-md-6 q-pa-xs"},Hd={__name:"Editor",setup(c){const s=be(),u=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Je({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,default_price_type:s.props.data.default_price_type,phone:s.props.data.phone,address:s.props.data.address,active:!!s.props.data.active,password:s.props.data.id?null:"12345",type:s.props.data.type}),r=P(!s.props.data.id),n=ze(window.CONSTANTS.CUSTOMER_TYPES),f=ze(window.CONSTANTS.PRODUCT_PRICE_TYPES),b=()=>nt({form:o,url:route("admin.customer.save",{id:o.id})});return(p,m)=>{const g=Q("i-head"),_=Q("authenticated-layout");return d(),w(H,null,[e(g,{title:u}),e(_,null,{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",Ld,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>l(W).get(p.route("admin.customer.index")))})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:m[1]||(m[1]=y=>b()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Kd,[e(Ge,{class:"row",onSubmit:J(b,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[2]||(m[2]=y=>l(o).id=y)},null,512),[[yt,l(o).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(ie,{modelValue:l(o).code,"onUpdate:modelValue":m[3]||(m[3]=y=>l(o).code=y),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[y=>y&&y.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(o).name,"onUpdate:modelValue":m[4]||(m[4]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ue,{modelValue:l(o).default_price_type,"onUpdate:modelValue":m[5]||(m[5]=y=>l(o).default_price_type=y),options:l(f),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!l(o).errors.default_price_type,"error-message":l(o).errors.default_price_type,disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(ue,{modelValue:l(o).type,"onUpdate:modelValue":m[6]||(m[6]=y=>l(o).type=y),label:"Jenis Akun",options:l(n),"map-options":"","emit-value":"","lazy-rules":"",disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(o).errors.type,"error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(ie,{modelValue:l(o).phone,"onUpdate:modelValue":m[7]||(m[7]=y=>l(o).phone=y),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:l(o).processing,error:!!l(o).errors.phone,"error-message":l(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).address,"onUpdate:modelValue":m[8]||(m[8]=y=>l(o).address=y),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{autocomplete:"off","aria-autocomplete":"none",modelValue:l(o).password,"onUpdate:modelValue":m[10]||(m[10]=y=>l(o).password=y),label:l(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:l(o).processing,error:!!l(o).errors.password,"error-message":l(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:r.value?"text":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:m[9]||(m[9]=y=>r.value=!r.value)},{default:a(()=>[e(C,{name:r.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(ka,{modelValue:l(o).active,"onUpdate:modelValue":m[11]||(m[11]=y=>l(o).active=y),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),m[12]||(m[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Wd=Object.freeze(Object.defineProperty({__proto__:null,default:Hd},Symbol.toStringTag,{value:"Module"}));function Xt(c,s,u,o){const r=[];return c.forEach(n=>{o(n)===!0?r.push(n):s.push({failedPropValidation:u,file:n})}),r}function ba(c){c&&c.dataTransfer&&(c.dataTransfer.dropEffect="copy"),Yt(c)}const Yd={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Qd=["rejected"];function Jd({editable:c,dnd:s,getFileInput:u,addFilesToQueue:o}){const{props:r,emit:n,proxy:f}=Rt(),b=P(null),p=X(()=>r.accept!==void 0?r.accept.split(",").map(T=>(T=T.trim(),T==="*"?"*/":(T.endsWith("/*")&&(T=T.slice(0,T.length-1)),T.toUpperCase()))):null),m=X(()=>parseInt(r.maxFiles,10)),g=X(()=>parseInt(r.maxTotalSize,10));function _(T){if(c.value)if(T!==Object(T)&&(T={target:null}),T.target!==null&&T.target.matches('input[type="file"]')===!0)T.clientX===0&&T.clientY===0&&Ln(T);else{const R=u();R&&R!==T.target&&R.click(T)}}function y(T){c.value&&T&&o(null,T)}function S(T,R,I,N){let M=Array.from(R||T.target.files);const h=[],j=()=>{h.length!==0&&n("rejected",h)};if(r.accept!==void 0&&p.value.indexOf("*/")===-1&&(M=Xt(M,h,"accept",O=>p.value.some($=>O.type.toUpperCase().startsWith($)||O.name.toUpperCase().endsWith($))),M.length===0))return j();if(r.maxFileSize!==void 0){const O=parseInt(r.maxFileSize,10);if(M=Xt(M,h,"max-file-size",$=>$.size<=O),M.length===0)return j()}if(r.multiple!==!0&&M.length!==0&&(M=[M[0]]),M.forEach(O=>{O.__key=O.webkitRelativePath+O.lastModified+O.name+O.size}),N===!0){const O=I.map($=>$.__key);M=Xt(M,h,"duplicate",$=>O.includes($.__key)===!1)}if(M.length===0)return j();if(r.maxTotalSize!==void 0){let O=N===!0?I.reduce(($,A)=>$+A.size,0):0;if(M=Xt(M,h,"max-total-size",$=>(O+=$.size,O<=g.value)),M.length===0)return j()}if(typeof r.filter=="function"){const O=r.filter(M);M=Xt(M,h,"filter",$=>O.includes($))}if(r.maxFiles!==void 0){let O=N===!0?I.length:0;if(M=Xt(M,h,"max-files",()=>(O++,O<=m.value)),M.length===0)return j()}if(j(),M.length!==0)return M}function V(T){ba(T),s.value!==!0&&(s.value=!0)}function x(T){Yt(T),(T.relatedTarget!==null||Zt.is.safari!==!0?T.relatedTarget!==b.value:document.elementsFromPoint(T.clientX,T.clientY).includes(b.value)===!1)===!0&&(s.value=!1)}function D(T){ba(T);const R=T.dataTransfer.files;R.length!==0&&o(null,R),s.value=!1}function L(T){if(s.value===!0)return Ce("div",{ref:b,class:`q-${T}__dnd absolute-full`,onDragenter:ba,onDragover:ba,onDragleave:x,onDrop:D})}return Object.assign(f,{pickFiles:_,addFiles:y}),{pickFiles:_,addFiles:y,onDragover:V,onDragleave:x,processFiles:S,getDndNode:L,maxFilesNumber:m,maxTotalSizeNumber:g}}const So=jt({name:"QFile",inheritAttrs:!1,props:{...Hn,...mo,...Yd,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Kn,...Qd],setup(c,{slots:s,emit:u,attrs:o}){const{proxy:r}=Rt(),n=Wn(),f=P(null),b=P(!1),p=Yn(c),{pickFiles:m,onDragover:g,onDragleave:_,processFiles:y,getDndNode:S}=Jd({editable:n.editable,dnd:b,getFileInput:F,addFilesToQueue:q}),V=Qn(c),x=X(()=>Object(c.modelValue)===c.modelValue?"length"in c.modelValue?Array.from(c.modelValue):[c.modelValue]:[]),D=X(()=>el(x.value)),L=X(()=>x.value.map(de=>de.name).join(", ")),T=X(()=>Jn(x.value.reduce((de,Ie)=>de+Ie.size,0))),R=X(()=>({totalSize:T.value,filesNumber:x.value.length,maxFiles:c.maxFiles})),I=X(()=>({tabindex:-1,type:"file",title:"",accept:c.accept,capture:c.capture,name:p.value,...o,id:n.targetUid.value,disabled:n.editable.value!==!0})),N=X(()=>"q-file q-field--auto-height"+(b.value===!0?" q-file--dnd":"")),M=X(()=>c.multiple===!0&&c.append===!0);function h(de){const Ie=x.value.slice();Ie.splice(de,1),O(Ie)}function j(de){const Ie=x.value.indexOf(de);Ie!==-1&&h(Ie)}function O(de){u("update:modelValue",c.multiple===!0?de:de[0])}function $(de){de.keyCode===13&&Zn(de)}function A(de){(de.keyCode===13||de.keyCode===32)&&m(de)}function F(){return f.value}function q(de,Ie){const ke=y(de,Ie,x.value,M.value),Z=F();Z!=null&&(Z.value=""),ke!==void 0&&((c.multiple===!0?c.modelValue&&ke.every(ae=>x.value.includes(ae)):c.modelValue===ke[0])||O(M.value===!0?x.value.concat(ke):ke))}function z(){return[Ce("input",{class:[c.inputClass,"q-file__filler"],style:c.inputStyle})]}function oe(){if(s.file!==void 0)return x.value.length===0?z():x.value.map((Ie,ke)=>s.file({index:ke,file:Ie,ref:this}));if(s.selected!==void 0)return x.value.length===0?z():s.selected({files:x.value,ref:this});if(c.useChips===!0)return x.value.length===0?z():x.value.map((Ie,ke)=>Ce(la,{key:"file-"+ke,removable:n.editable.value,dense:!0,textColor:c.color,tabindex:c.tabindex,onRemove:()=>{h(ke)}},()=>Ce("span",{class:"ellipsis",textContent:Ie.name})));const de=c.displayValue!==void 0?c.displayValue:L.value;return de.length!==0?[Ce("div",{class:c.inputClass,style:c.inputStyle,textContent:de})]:z()}function ce(){const de={ref:f,...I.value,...V.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:q};return c.multiple===!0&&(de.multiple=!0),Ce("input",de)}return Object.assign(n,{fieldClass:N,emitValue:O,hasValue:D,inputRef:f,innerValue:x,floatingLabel:X(()=>D.value===!0||el(c.displayValue)),computedCounter:X(()=>{if(c.counterLabel!==void 0)return c.counterLabel(R.value);const de=c.maxFiles;return`${x.value.length}${de!==void 0?" / "+de:""} (${T.value})`}),getControlChild:()=>S("file"),getControl:()=>{const de={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:c.tabindex};return n.editable.value===!0&&Object.assign(de,{onDragover:g,onDragleave:_,onKeydown:$,onKeyup:A}),Ce("div",de,[ce()].concat(oe()))}}),Object.assign(r,{removeAtIndex:h,removeFile:j,getNativeElement:()=>f.value}),Gn(r,"nativeEl",()=>f.value),Xn(n)}}),Gt=jt({name:"QBanner",props:{...Na,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(c,{slots:s}){const{proxy:{$q:u}}=Rt(),o=Ba(c,u),r=X(()=>"q-banner row items-center"+(c.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(c.rounded===!0?" rounded-borders":"")),n=X(()=>`q-banner__actions row items-center justify-end col-${c.inlineActions===!0?"auto":"all"}`);return()=>{const f=[Ce("div",{class:"q-banner__avatar col-auto row items-center self-start"},Bt(s.avatar)),Ce("div",{class:"q-banner__content col text-body2"},Bt(s.default))],b=Bt(s.action);return b!==void 0&&f.push(Ce("div",{class:n.value},b)),Ce("div",{class:r.value+(c.inlineActions===!1&&b!==void 0?" q-banner--top-padding":""),role:"alert"},f)}}}),Gd={class:"q-gutter-sm"},Xd={class:"col col-md-6 q-pa-xs"},bl="Import Pelanggan",Zd={__name:"Import",setup(c){const s=Je({csv_file:null}),u=()=>{s.post(route("admin.customer.import"),{onSuccess:()=>{s.reset()},onError:()=>{Qe()},onFinish:()=>{s.clearErrors()}})};return(o,r)=>{const n=Q("i-head"),f=Q("authenticated-layout");return d(),w(H,null,[e(n,{title:bl}),e(f,{"show-drawer-button":!0},{title:a(()=>[v(i(bl))]),"left-button":a(()=>[t("div",Gd,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=b=>l(W).get(o.route("admin.customer.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Xd,[e(Ge,{class:"row",onSubmit:J(u,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[r[3]||(r[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),r[4]||(r[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(So,{modelValue:l(s).csv_file,"onUpdate:modelValue":r[1]||(r[1]=b=>l(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:r[2]||(r[2]=b=>l(W).get(o.route("admin.customer.index")))},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),U(Gt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(i(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),U(Gt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(i(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},eu=Object.freeze(Object.defineProperty({__proto__:null,default:Zd},Symbol.toStringTag,{value:"Module"})),tu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},au={class:"q-pa-xs"},lu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ou={key:0},nu={key:2},su={key:3},ru={class:"flex justify-end"},vl="Pelanggan",iu={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=je({search:"",status:"active",...Ke()}),m=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"code",label:s.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];xe(()=>{S()});const y=R=>ot({message:`Hapus Pelanggan ${R.name}?`,url:route("admin.customer.delete",R.id),fetchItemsCallback:S,loading:r}),S=(R=null)=>{He({pagination:m,filter:p,props:R,rows:o,url:route("admin.customer.data"),loading:r,tableRef:n})},V=()=>S(),x=R=>W.get(route("admin.customer.detail",{id:R.id})),{protectClick:D}=Et(),L=D(x),T=X(()=>s.screen.gt.sm?g:g.filter(R=>R.name==="code"||R.name==="action"));return(R,I)=>{const N=Q("i-head"),M=Q("authenticated-layout");return d(),w(H,null,[e(N,{title:vl}),e(M,null,Fe({title:a(()=>[v(i(vl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=h=>u.value=!u.value)},null,8,["icon"]),R.$can("admin.customer.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=h=>l(W).get(R.route("admin.customer.add")))})):k("",!0),R.$can("admin.customer.import")?(d(),U(E,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[3]||(I[3]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[R.$can("admin.customer.import")?le((d(),U(ne,{key:0,clickable:"",onClick:I[2]||(I[2]=J(h=>l(W).get(R.route("admin.customer.import")),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"csv"})]),_:1}),e(B,null,{default:a(()=>I[8]||(I[8]=[v("Import")])),_:1})]),_:1})),[[re],[fe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",au,[e(Ae,{class:"full-height-table",style:We({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":I[7]||(I[7]=h=>m.value=h),filter:p.search,loading:r.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:O})=>[t("div",lu,[t("span",null,i(j)+" "+i(O?" with term "+O:""),1)])]),body:a(h=>[e(Oe,{props:h,class:qe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(j=>l(L)(h.row,j),["stop"])},{default:a(()=>[e(Y,{key:"code",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),U(C,{key:0,name:"person"})):k("",!0),v(" "+i(h.row.code),1)]),l(s).screen.lt.md?(d(),w(H,{key:0},[t("div",null,[l(s).screen.lt.md?(d(),U(C,{key:0,name:"person"})):k("",!0),v(" "+i(h.row.name),1)]),h.row.phone?(d(),w("div",ou,[e(C,{name:"phone"}),v(" "+i(h.row.phone),1)])):k("",!0),h.row.address?(d(),U(Se,{key:1,text:h.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),h.row.wallet_balance!=0?(d(),w("div",nu,[e(C,{name:"wallet"}),v(" Wallet: Rp. "+i(l(K)(h.row.wallet_balance)),1)])):k("",!0),h.row.balance!=0?(d(),w("div",su,[e(C,{name:"wallet"}),v(" Utang: Rp. "+i(l(K)(h.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"name",props:h},{default:a(()=>[v(i(h.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"wallet_balance",props:h},{default:a(()=>[v(i(l(K)(h.row.wallet_balance)),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:h},{default:a(()=>[v(i(l(K)(h.row.balance)),1)]),_:2},1032,["props"]),e(Y,{key:"phone",props:h},{default:a(()=>[v(i(h.row.phone),1)]),_:2},1032,["props"]),e(Y,{key:"address",props:h},{default:a(()=>[e(Se,{text:h.row.address},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:h},{default:a(()=>[t("div",ru,[R.$can("admin.customer.add")||R.$can("admin.customer.edit")||R.$can("admin.customer.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[6]||(I[6]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[R.$can("admin.customer.add")?le((d(),U(ne,{key:0,clickable:"",onClick:J(j=>l(W).get(R.route("admin.customer.duplicate",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>I[9]||(I[9]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),R.$can("admin.customer.edit")?le((d(),U(ne,{key:1,clickable:"",onClick:J(j=>l(W).get(R.route("admin.customer.edit",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>I[10]||(I[10]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),R.$can("admin.customer.delete")?le((d(),U(ne,{key:2,onClick:J(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>I[11]||(I[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",tu,[e(ue,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[4]||(I[4]=h=>p.status=h),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[5]||(I[5]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},du=Object.freeze(Object.defineProperty({__proto__:null,default:iu},Symbol.toStringTag,{value:"Module"})),uu={class:"q-pb-sm"},mu={class:"row q-col-gutter-sm"},cu={class:"row items-center no-wrap"},pu={class:"q-ml-md"},fu={class:"text-subtitle2 text-grey-8"},gu={class:"text-h6 text-weight-bold"},bu={class:"q-my-sm"},vu={class:"row q-col-gutter-sm"},_u={class:"row items-center no-wrap"},yu={class:"q-ml-md"},ku={class:"text-subtitle2 text-grey-8"},wu={class:"text-h6 text-weight-bold"},Vo={__name:"ActualSummaryCard",setup(c){const s=be(),u=X(()=>[{label:"Pelanggan Aktif",value:s.props.data.total_active_customer,icon:"person_add",color:"blue-7",bgColor:"#e3f2fd"},{label:"Saldo Wallet / Deposit",value:K(s.props.data.total_customer_wallet_balance),icon:"savings",color:"green-7",bgColor:"#e8f5e9"},{label:"Saldo Utang / Piutang",value:K(s.props.data.total_customer_balance),icon:"account_balance",color:"red-8",bgColor:"#ffebee"},{label:"Supplier Aktif",value:s.props.data.total_active_supplier,icon:"local_shipping",color:"indigo-7",bgColor:"#e8eaf6"},{label:"Saldo Wallet / Deposit",value:K(s.props.data.total_supplier_wallet_balance),icon:"account_balance_wallet",color:"cyan-7",bgColor:"#e0f7fa"},{label:"Saldo Utang / Piutang",value:K(s.props.data.total_supplier_balance),icon:"credit_card",color:"red-8",bgColor:"#ffebee"}]),o=X(()=>[{label:"Total Transaksi",value:K(s.props.data.total_sales_count),icon:"shopping_basket",color:"purple-8",bgColor:"#f3e5f5"},{label:"Total Penjualan",value:K(s.props.data.total_sales),icon:"trending_up",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Laba",value:K(s.props.data.total_sales_profit),icon:"attach_money",color:"teal-6",bgColor:"#e0f2f1"}]);return(r,n)=>(d(),w("div",uu,[t("div",null,[t("div",mu,[(d(!0),w(H,null,De(u.value,(f,b)=>(d(),w("div",{key:b,class:"col-12 col-md-4"},[e(pe,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",cu,[e(ta,{icon:f.icon,color:f.color,"text-color":f.bgColor},null,8,["icon","color","text-color"]),t("div",pu,[t("div",fu,i(f.label),1),t("div",gu,i(f.value),1)])])]),_:2},1024)]))),128))])]),t("div",bu,[t("div",vu,[(d(!0),w(H,null,De(o.value,(f,b)=>(d(),w("div",{key:b,class:"col-12 col-md-4"},[e(pe,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",_u,[e(ta,{icon:f.icon,color:f.color,"text-color":f.bgColor},null,8,["icon","color","text-color"]),t("div",yu,[t("div",ku,i(f.label),1),t("div",wu,i(f.value),1)])])]),_:2},1024)]))),128))])])]))}},hu=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),$u={class:"row q-col-gutter-sm q-pb-sm"},xu={class:"col-md-6 col-12"},Su={class:"col-md-6 col-12"},Vu={__name:"ChartCard",setup(c){es([ts,as,ls,os,ns,ss,rs]);const s=be(),u=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=X(()=>({title:{left:"center"},tooltip:{trigger:"axis",formatter:function(n){let f=n[0].name+"<br/>";return n.forEach(function(b){f+=b.marker+" "+b.seriesName+": "+K(b.value)+"<br/>"}),f}},xAxis:{type:"category",data:s.props.data.chart_data_1.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:n=>K(n),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:s.props.data.chart_data_1.data,itemStyle:{borderRadius:[5,5,0,0],color:u[0]}}]})),r=X(()=>({title:{left:"center"},tooltip:{show:!1},legend:{show:!1},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:s.props.data.revenue_by_category,label:{show:!0,position:"outside",formatter:n=>{const f=K(n.value);return`${n.percent}% - ${n.name}
Rp. ${f}
`},fontSize:12,fontWeight:"bold",color:"#616161"},labelLine:{show:!0,length:10,length2:10},itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:n=>u[n.dataIndex%u.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(n,f)=>(d(),w("div",$u,[t("div",xu,[e(pe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[f[0]||(f[0]=t("div",{class:"text-subtitle1 q-pb-sm"},"Penjualan",-1)),e(l(tl),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",Su,[e(pe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[f[1]||(f[1]=t("div",{class:"text-subtitle1 q-pb-sm"},"Distribusi Omzet",-1)),e(l(tl),{class:"chart",option:r.value,autoresize:""},null,8,["option"])]),_:1})])]))}},qo=_t(Vu,[["__scopeId","data-v-aac9117e"]]),qu=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Cu={class:"row q-col-gutter-sm q-pb-sm"},Tu={class:"col-md-6 col-12"},Pu={key:1,class:"text-grey text-italic"},Ru={class:"col-md-6 col-12"},Ou={key:1,class:"text-grey text-italic"},Co={__name:"TopCard",setup(c){const s=be();return(u,o)=>{const r=Q("my-link");return d(),w("div",Cu,[t("div",Tu,[e(pe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[o[0]||(o[0]=t("div",{class:"text-subtitle1 q-mb-sm"},"Top 5 Transaksi Pelanggan",-1)),l(s).props.data.top_customers_revenue.length>0?(d(),U(Ee,{key:0},{default:a(()=>[(d(!0),w(H,null,De(l(s).props.data.top_customers_revenue,(n,f)=>(d(),U(ne,{key:f},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(ta,{color:"purple-"+(9-f),"text-color":"white",size:"sm"},{default:a(()=>[v(i(f+1),1)]),_:2},1032,["color"])]),_:2},1024),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>[e(r,{href:u.route("admin.customer.detail",{id:n.customer_id}),class:"text-purple"},{default:a(()=>[v(i(n.customer_name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:a(()=>[e(ve,{class:"text-purple"},{default:a(()=>[v(i(l(K)(n.total_revenue)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),w("div",Pu,"Data tidak tersedia"))]),_:1})]),t("div",Ru,[e(pe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[o[1]||(o[1]=t("div",{class:"text-subtitle1 q-mb-sm"},"Top 5 Saldo Wallet Pelanggan",-1)),l(s).props.data.top_customers_wallet.length>0?(d(),U(Ee,{key:0},{default:a(()=>[(d(!0),w(H,null,De(l(s).props.data.top_customers_wallet,(n,f)=>(d(),U(ne,{key:f},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(ta,{color:"orange-"+(9-f),"text-color":"white",size:"sm"},{default:a(()=>[v(i(f+1),1)]),_:2},1032,["color"])]),_:2},1024),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>[e(r,{href:u.route("admin.customer.detail",{id:n.id}),class:"text-orange-9"},{default:a(()=>[v(i(n.name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:a(()=>[e(ve,{class:"text-orange-9"},{default:a(()=>[v(i(l(K)(n.wallet_balance)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),w("div",Ou,"Data tidak tersedia"))]),_:1})])])}}},Iu=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),Uu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Du={class:"q-pa-xs"},ju={class:"q-pa-none"},_l="Dashboard",Eu={__name:"Index",setup(c){be();const s=P({top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}]}),u=P(!0),o=P(Ke().period??"this_month"),r=P([{value:"today",label:"Hari Ini"},{value:"yesterday",label:"Kemarin"},{value:"this_week",label:"Minggu Ini"},{value:"last_week",label:"Minggu Lalu"},{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"Bulan Lalu"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"},{value:"this_year",label:"Tahun Ini"},{value:"prev_year",label:"Tahun Lalu"}]),n=()=>{W.visit(route("admin.dashboard",{period:o.value}))},f=X(()=>!(o.value=="today"||o.value=="yesterday"));return(b,p)=>{const m=Q("i-head"),g=Q("authenticated-layout");return d(),w(H,null,[e(m,{title:_l}),e(g,null,Fe({title:a(()=>[v(i(_l))]),"right-button":a(()=>[e(E,{class:"q-ml-sm",icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:p[0]||(p[0]=_=>u.value=!u.value)},null,8,["icon"])]),default:a(()=>[t("div",Du,[t("div",ju,[e(Vo,{dashboardData:s.value},null,8,["dashboardData"])]),f.value?(d(),w(H,{key:0},[e(qo,{dashboardData:s.value},null,8,["dashboardData"]),e(Co,{dashboardData:s.value},null,8,["dashboardData"])],64)):k("",!0)])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar"},{default:a(()=>[t("div",Uu,[e(ue,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:o.value,"onUpdate:modelValue":[p[1]||(p[1]=_=>o.value=_),n],options:r.value,label:"Periode",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},Au=Object.freeze(Object.defineProperty({__proto__:null,default:Eu},Symbol.toStringTag,{value:"Module"})),Mu={class:"row"},Nu={class:"row q-col-gutter-sm"},Bu={class:"col-sm-6 col-xs-12"},zu={class:"col-sm-6 col-xs-12"},Fu={class:"col-md-3 col-sm-6 col-xs-12"},Lu={class:"col-md-3 col-sm-6 col-xs-12"},Ku={class:"col-md-3 col-sm-6 col-xs-12"},Hu={class:"col-md-3 col-sm-6 col-xs-12"};const Wu={__name:"SummaryCard",setup(c){const s=be(),u=(o,r)=>{const f={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...r};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(f)),W.visit(o,{data:f})};return(o,r)=>(d(),w("div",Mu,[e(pe,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:a(()=>[e(te,{class:"q-pa-none"},{default:a(()=>[t("div",Nu,[t("div",Bu,[e(ne,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:r[0]||(r[0]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(B,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ve,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[v(i(l(s).props.data.active_customer_count),1)]),_:1}),e(ve,null,{default:a(()=>r[5]||(r[5]=[v("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",zu,[e(ne,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:r[1]||(r[1]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(B,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ve,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[v(i(o.$page.props.data.active_user_count),1)]),_:1}),e(ve,null,{default:a(()=>r[6]||(r[6]=[v("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",Fu,[e(ne,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(B,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ve,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+i(l(K)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(ve,null,{default:a(()=>r[7]||(r[7]=[v("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",Lu,[e(ne,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(B,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ve,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+i(l(K)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(ve,null,{default:a(()=>r[8]||(r[8]=[v("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",Ku,[e(ne,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(B,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ve,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+i(l(K)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(ve,null,{default:a(()=>r[9]||(r[9]=[v("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",Hu,[e(ne,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(B,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ve,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+i(l(K)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(ve,null,{default:a(()=>r[10]||(r[10]=[v("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},Yu=Object.freeze(Object.defineProperty({__proto__:null,default:Wu},Symbol.toStringTag,{value:"Module"})),Qu={class:"detail"},To={__name:"MainInfoTab",setup(c){const s=be();return(u,o)=>(d(),w("table",Qu,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(s).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,i(u.$CONSTANTS.FINANCE_ACCOUNT_TYPES[l(s).props.data.type]),1)]),l(s).props.data.type=="bank"?(d(),w(H,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+i(l(K)(l(s).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},Ju=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),Gu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Xu={class:"flex q-gutter-sm"},Zu={key:0},Po={__name:"HistoryTab",setup(c){const s=be(),u=he(),o=P(null),r=P([]),n=P(!0),f=je({...Ke()}),b=at(null,117),p=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),m=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],g=X(()=>u.screen.gt.sm?m:m.filter(y=>y.name==="code"));xe(()=>{_()});const _=(y=null)=>He({pagination:p,filter:f,props:y,rows:r,url:route("admin.finance-transaction.data",{filter:{account_id:s.props.data.id}}),loading:n,tableRef:o});return(y,S)=>(d(),U(Ae,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:We({height:l(b)}),color:"primary",class:"full-height-table","row-key":"id",pagination:p.value,"onUpdate:pagination":S[0]||(S[0]=V=>p.value=V),filter:f.search,loading:n.value,columns:g.value,rows:r.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({message:V,filter:x})=>[t("div",Gu,[t("span",null,i(V)+" "+i(x?" with term "+x:""),1)])]),body:a(V=>[e(Oe,{props:V},{default:a(()=>[e(Y,{key:"code",props:V},{default:a(()=>[t("div",Xu,[t("div",null,[l(u).screen.lt.md?(d(),U(C,{key:0,name:"tag",class:"inline-icon"})):k("",!0),v(" "+i(V.row.code),1)])]),l(u).screen.lt.md?(d(),w(H,{key:0},[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+i(l(_e)(V.row.datetime)),1)]),V.row.creator?(d(),w("div",Zu,[e(C,{name:"person",class:"inline-icon"}),v(" "+i(V.row.creator.username),1)])):k("",!0),t("div",{class:qe([V.row.amount>0?"text-green":"text-red","text-bold"])},[e(C,{class:"inline-icon",name:"money"}),v(" "+i(l(ra)(V.row.amount))+"Rp. "+i(l(K)(Math.abs(V.row.amount))),1)],2),t("div",null,[e(st,{color:V.row.amount>0?"green":"red"},{default:a(()=>[v(i(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[V.row.type]),1)]),_:2},1032,["color"])]),e(Se,{text:V.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"datetime",props:V},{default:a(()=>[v(i(l(_e)(V.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:V},{default:a(()=>[e(st,{color:V.row.amount>0?"green":"red"},{default:a(()=>[v(i(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[V.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:V,class:qe(V.row.amount>0?"text-green":"text-red")},{default:a(()=>[v(i(l(ra)(V.row.amount)+l(K)(Math.abs(V.row.amount))),1)]),_:2},1032,["props","class"]),e(Y,{key:"notes",props:V},{default:a(()=>[e(Se,{text:V.row.notes,icon:y.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},em=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),tm={class:"q-gutter-sm"},am={class:"q-gutter-sm"},lm={class:"col q-pa-xs"},om={class:"row"},yl="Rincian Akun",nm={__name:"Detail",setup(c){const s=be(),u=P("main");return(o,r)=>{const n=Q("i-head"),f=Q("authenticated-layout");return d(),w(H,null,[e(n,{title:yl}),e(f,null,{title:a(()=>[v(i(yl))]),"left-button":a(()=>[t("div",tm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=b=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":a(()=>[t("div",am,[o.$can("admin.finance-account.edit")?(d(),U(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:r[1]||(r[1]=b=>l(W).get(o.route("admin.finance-account.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",lm,[t("div",om,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(qt,{modelValue:u.value,"onUpdate:modelValue":r[2]||(r[2]=b=>u.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(rt,{name:"main",label:"Info Akun"}),e(rt,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(Ct,{modelValue:u.value,"onUpdate:modelValue":r[3]||(r[3]=b=>u.value=b),animated:""},{default:a(()=>[e(it,{name:"main"},{default:a(()=>[e(To)]),_:1}),e(it,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Po)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},sm=Object.freeze(Object.defineProperty({__proto__:null,default:nm},Symbol.toStringTag,{value:"Module"})),rm={style:{"margin-left":"-10px"}},Tt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c){return(s,u)=>(d(),w("div",rm,[e(ua,{class:"full-width q-pl-none","model-value":c.modelValue,"onUpdate:modelValue":u[0]||(u[0]=o=>s.$emit("update:modelValue",o)),disable:c.disable,label:c.label},null,8,["model-value","disable","label"])]))}},im={class:"q-gutter-sm"},dm={class:"col col-md-6 q-pa-xs"},um={__name:"Editor",setup(c){const s=be(),u=(s.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Je({id:s.props.data.id,name:s.props.data.name,type:s.props.data.type,bank:s.props.data.bank,number:s.props.data.number,holder:s.props.data.holder,balance:parseFloat(s.props.data.balance),active:!!s.props.data.active,has_wallet_access:!!s.props.data.has_wallet_access,show_in_pos_payment:!!s.props.data.show_in_pos_payment,show_in_purchasing_payment:!!s.props.data.show_in_purchasing_payment,notes:s.props.data.notes}),r=ze(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),n=()=>nt({form:o,url:route("admin.finance-account.save")}),f=b=>{b==="cashier_cash"&&(o.show_in_pos_payment=!0)};return xe(()=>{f(o.type)}),Be(()=>o.type,b=>{f(b)}),(b,p)=>{const m=Q("i-head"),g=Q("authenticated-layout");return d(),w(H,null,[e(m,{title:u}),e(g,null,{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",im,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=_=>b.$inertia.get(b.route("admin.finance-account.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",dm,[e(Ge,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=_=>l(o).id=_)},null,512),[[yt,l(o).id]]),e(ie,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":p[2]||(p[2]=_=>l(o).name=_),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ue,{modelValue:l(o).type,"onUpdate:modelValue":p[3]||(p[3]=_=>l(o).type=_),label:"Jenis Akun",options:l(r),"map-options":"","emit-value":"",error:!!l(o).errors.type,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),l(o).type=="bank"?(d(),w(H,{key:0},[e(ie,{modelValue:l(o).bank,"onUpdate:modelValue":p[4]||(p[4]=_=>l(o).bank=_),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!l(o).errors.bank,disable:l(o).processing,"error-message":l(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ie,{modelValue:l(o).number,"onUpdate:modelValue":p[5]||(p[5]=_=>l(o).number=_),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!l(o).errors.number,disable:l(o).processing,"error-message":l(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ie,{modelValue:l(o).holder,"onUpdate:modelValue":p[6]||(p[6]=_=>l(o).holder=_),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!l(o).errors.holder,disable:l(o).processing,"error-message":l(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Ne,{modelValue:l(o).balance,"onUpdate:modelValue":p[7]||(p[7]=_=>l(o).balance=_),label:"Saldo",lazyRules:"",disable:l(o).processing,"allow-negative":!0,error:!!l(o).errors.balance,errorMessage:l(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ie,{modelValue:l(o).notes,"onUpdate:modelValue":p[8]||(p[8]=_=>l(o).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Tt,{modelValue:l(o).active,"onUpdate:modelValue":p[9]||(p[9]=_=>l(o).active=_),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),p[14]||(p[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(Tt,{modelValue:l(o).show_in_pos_payment,"onUpdate:modelValue":p[10]||(p[10]=_=>l(o).show_in_pos_payment=_),disable:l(o).processing||l(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(Tt,{modelValue:l(o).show_in_purchasing_payment,"onUpdate:modelValue":p[11]||(p[11]=_=>l(o).show_in_purchasing_payment=_),disable:l(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(Tt,{modelValue:l(o).has_wallet_access,"onUpdate:modelValue":p[12]||(p[12]=_=>l(o).has_wallet_access=_),disable:l(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:p[13]||(p[13]=_=>l(W).get(b.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},mm=Object.freeze(Object.defineProperty({__proto__:null,default:um},Symbol.toStringTag,{value:"Module"})),cm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},pm={class:"q-pa-xs"},fm={class:"q-my-sm text-subtitle"},gm={class:"text-bold text-grey-8"},bm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},vm={class:"text-bold text-grey-9"},_m={class:"text-grey-9"},ym={key:0},km={key:1},wm={key:0},hm={class:"flex justify-end"},kl="Akun Kas",$m={__name:"Index",setup(c){const s=be(),u=he(),o=P(!1),r=P([]),n=P(null),f=P(null),b=at(f,117),p=P(!0),m=je({search:"",status:"active",type:"all",...Ke()}),g=s.props.totalBalance,_=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),y=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],S=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],V=[{value:"all",label:"Semua"},...ze(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];xe(()=>{D()});const x=M=>ot({message:`Hapus Akun ${M.name}?`,url:route("admin.finance-account.delete",M.id),fetchItemsCallback:D,loading:p}),D=(M=null)=>{He({pagination:_,filter:m,props:M,rows:r,url:route("admin.finance-account.data"),loading:p,tableRef:n})},L=()=>D(),T=M=>W.get(route("admin.finance-account.detail",{id:M.id})),{protectClick:R}=Et(),I=R(T),N=X(()=>u.screen.gt.sm?y:y.filter(M=>M.name==="name"||M.name==="action"));return(M,h)=>{const j=Q("i-head"),O=Q("authenticated-layout");return d(),w(H,null,[e(j,{title:kl}),e(O,null,Fe({title:a(()=>[v(i(kl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=$=>o.value=!o.value)},null,8,["icon"]),M.$can("admin.finance-account.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=$=>l(W).get(M.route("admin.finance-account.add")))})):k("",!0)]),default:a(()=>[t("div",pm,[e(pe,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:a(()=>[t("div",fm,[h[7]||(h[7]=v(" Total Saldo Akun Aktif: ")),t("span",gm,"Rp. "+i(l(K)(l(g))),1)])]),_:1}),e(Ae,{ref_key:"tableRef",ref:n,class:"full-height-table",style:We({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":h[6]||(h[6]=$=>_.value=$),filter:m.search,loading:p.value,columns:N.value,rows:r.value,"rows-per-page-options":[10,25,50],onRequest:D,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:A,filter:F})=>[t("div",bm,[t("span",null,i(A)+" "+i(F?" with term "+F:""),1)])]),body:a($=>[e(Oe,{props:$,class:qe([$.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(A=>l(I)($.row,A),["stop"])},{default:a(()=>[e(Y,{key:"name",props:$,class:"wrap-column"},{default:a(()=>[t("div",vm,i($.row.name),1),t("div",_m,[$.row.type=="bank"?(d(),w("div",ym,[e(C,{name:"wallet",class:"inline-icon"}),v(" Rekening "+i($.row.bank??"-")+" "+i($.row.number??"-")+" a.n. "+i($.row.holder??"-"),1)])):k("",!0),$.row.notes?(d(),w("div",km,[e(C,{name:"notes"}),v(" "+i($.row.notes),1)])):k("",!0)]),l(u).screen.lt.md?(d(),w("div",wm,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+i(l(K)($.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"type",props:$},{default:a(()=>[v(i(M.$CONSTANTS.FINANCE_ACCOUNT_TYPES[$.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:$},{default:a(()=>[v(i(l(K)($.row.balance)),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:$},{default:a(()=>[t("div",hm,[M.$can("admin.finance-account.add")||M.$can("admin.finance-account.edit")||M.$can("admin.finance-account.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[5]||(h[5]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[M.$can("admin.finance-account.add")?le((d(),U(ne,{key:0,clickable:"",onClick:J(A=>l(W).get(M.route("admin.finance-account.duplicate",$.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>h[8]||(h[8]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),M.$can("admin.finance-account.edit")?le((d(),U(ne,{key:1,clickable:"",onClick:J(A=>l(W).get(M.route("admin.finance-account.edit",$.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>h[9]||(h[9]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),M.$can("admin.finance-account.delete")?le((d(),U(ne,{key:2,onClick:J(A=>x($.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>h[10]||(h[10]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",cm,[e(ue,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.type,"onUpdate:modelValue":[h[2]||(h[2]=$=>m.type=$),L],options:V,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ue,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[h[3]||(h[3]=$=>m.status=$),L],options:S,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":h[4]||(h[4]=$=>m.search=$),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},xm=Object.freeze(Object.defineProperty({__proto__:null,default:$m},Symbol.toStringTag,{value:"Module"})),Sm={class:"q-gutter-sm"},Vm={class:"col col-md-6 q-pa-xs"},qm={class:"row"},Cm={class:"detail"},Tm={key:0},Pm={key:1},Rm={key:2},Om={key:3},Im={colspan:"3",class:"bg-white"},wl="Rincian Transaksi",Um={__name:"Detail",setup(c){const s=be();return(u,o)=>{const r=Q("i-head"),n=Q("i-link"),f=Q("authenticated-layout");return d(),w(H,null,[e(r,{title:wl}),e(f,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Sm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.finance-transaction.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},i(wl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Vm,[t("div",qm,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",Cm,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.datetime)),1)]),l(s).props.data.account?(d(),w("tr",Tm,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[e(n,{href:u.route("admin.finance-account.detail",l(s).props.data.account.id)},{default:a(()=>[v(i(l(s).props.data.account.name),1)]),_:1},8,["href"]),l(s).props.data.account.type==="bank"?(d(),w(H,{key:0},[v(" Rek "+i(l(s).props.data.account.bank)+" an "+i(l(s).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),v(" "+i(l(s).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.type?(d(),w("tr",Pm,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(u.$CONSTANTS.FINANCE_TRANSACTION_TYPES[l(s).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(l(ia)(l(s).props.data.amount)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",Rm,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.created_at))+" oleh "+i(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",Om,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.updated_at))+" oleh "+i(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(H,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Im,[e(ma,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:We([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Dm=Object.freeze(Object.defineProperty({__proto__:null,default:Um},Symbol.toStringTag,{value:"Module"})),jm={class:"q-gutter-sm"},Em={class:"col col-md-6 q-pa-xs"},Am={__name:"Editor",setup(c){var b;const s=be(),u=(s.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=s.props.accounts.map(p=>({label:p.name,value:p.id})),r=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],n=Je({id:s.props.data.id,account_id:s.props.data.account_id,to_account_id:s.props.data.to_account_id??null,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((b=s.props.data)==null?void 0:b.image_path)??"",image:null}),f=()=>{ca(n,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:n,url:route("admin.finance-transaction.save")})};return(p,m)=>{const g=Q("i-head"),_=Q("authenticated-layout");return d(),w(H,null,[e(g,{title:u}),e(_,null,{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",jm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>p.$inertia.get(p.route("admin.finance-transaction.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Em,[e(Ge,{class:"row",onSubmit:J(f,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[1]||(m[1]=y=>l(n).id=y)},null,512),[[yt,l(n).id]]),e(Kt,{modelValue:l(n).datetime,"onUpdate:modelValue":m[2]||(m[2]=y=>l(n).datetime=y),label:"Waktu",error:!!l(n).errors.datetime,disable:l(n).processing,errorMessage:l(n).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ue,{autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":m[3]||(m[3]=y=>l(n).type=y),label:"Jenis Transaksi",options:r,"map-options":"","emit-value":"",error:!!l(n).errors.type,disable:l(n).processing,errorMessage:l(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ue,{class:"custom-select",modelValue:l(n).account_id,"onUpdate:modelValue":m[4]||(m[4]=y=>l(n).account_id=y),label:l(n).type=="transfer"?"Akun Asal":"Akun",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.account_id,error:!!l(n).errors.account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),l(n).type=="transfer"?(d(),U(ue,{key:0,class:"custom-select",modelValue:l(n).to_account_id,"onUpdate:modelValue":m[5]||(m[5]=y=>l(n).to_account_id=y),label:"Akun Tujuan",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.to_account_id,error:!!l(n).errors.to_account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Ne,{modelValue:l(n).amount,"onUpdate:modelValue":m[6]||(m[6]=y=>l(n).amount=y),label:"Jumlah",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.amount,errorMessage:l(n).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ie,{modelValue:l(n).notes,"onUpdate:modelValue":m[7]||(m[7]=y=>l(n).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(za,{modelValue:l(n).image,"onUpdate:modelValue":m[8]||(m[8]=y=>l(n).image=y),"initial-image-path":l(n).image_path,disabled:l(n).processing,error:!!l(n).errors.image||!!l(n).errors.image_path,"error-message":l(n).errors.image||l(n).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(n).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(n).processing,onClick:m[9]||(m[9]=y=>l(W).get(p.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Mm=Object.freeze(Object.defineProperty({__proto__:null,default:Am},Symbol.toStringTag,{value:"Module"})),Nm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Bm={class:"q-pa-xs"},zm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Fm={class:"text-grey-8"},Lm={class:"text-bold text-grey-8"},Km={class:"flex justify-end no-wrap"},hl="Transaksi Kas",Hm={__name:"Index",setup(c){const s=be(),u=he(),o=P(!1),r=P([]),n=P(!0),f=P(null),b=P(null),p=at(b),m=Ft(),g=Lt(),_=[{label:"Semua",value:"all"},...s.props.accounts.map(O=>({label:O.name,value:O.id}))],y=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...Ot(m-2,m-1).reverse()],S=[{value:"all",label:"Semua Bulan"},...It()],V=[{value:"all",label:"Semua"},...ze(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],x=je({search:"",type:"all",account_id:"all",year:m,month:g,...Ke()}),D=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),L=[{name:"id",label:u.screen.lt.md?"Item":"Kode",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{R()});const T=O=>ot({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${O.code}?`,url:route("admin.finance-transaction.delete",O.id),fetchItemsCallback:R,loading:n}),R=(O=null)=>{He({pagination:D,filter:x,props:O,rows:r,url:route("admin.finance-transaction.data"),loading:n,tableRef:f})},I=()=>{R()},N=X(()=>u.screen.gt.sm?L:L.filter(O=>O.name==="id"||O.name==="action"));Be(()=>x.year,O=>{O===null&&(x.month=null)});const M=P(null),h=P(!1),j=O=>{M.value=O,h.value=!0};return(O,$)=>{const A=Q("i-head"),F=Q("authenticated-layout");return d(),w(H,null,[e(A,{title:hl}),e(F,null,Fe({title:a(()=>[v(i(hl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=q=>o.value=!o.value)},null,8,["icon"]),O.$can("admin.finance-transaction.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=q=>l(W).get(O.route("admin.finance-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",Bm,[e(Ae,{ref_key:"tableRef",ref:f,style:We({height:l(p)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":$[8]||($[8]=q=>D.value=q),filter:x.search,loading:n.value,columns:N.value,rows:r.value,"rows-per-page-options":[10,25,50],onRequest:R,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:z,filter:oe})=>[t("div",zm,[t("span",null,i(z)+" "+i(oe?" with term "+oe:""),1)])]),body:a(q=>[e(Oe,{props:q,class:"cursor-pointer",onClick:J(z=>l(W).get(O.route("admin.finance-transaction.detail",{id:q.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:q},{default:a(()=>[t("div",null,[l(u).screen.lt.md?(d(),U(C,{key:0,class:"inline-icon",name:"tag"})):k("",!0),v(" "+i(q.row.code),1)]),l(u).screen.lt.md?(d(),w(H,{key:0},[t("div",Fm,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+i(l(_e)(q.row.datetime)),1)]),t("div",Lm,[e(C,{name:"wallet",class:"inline-icon"}),v(" "+i(q.row.account.name),1)]),t("div",{class:qe(["text-bold",q.row.amount<0?"text-red":"text-green"])},[e(C,{name:"money",class:"inline-icon"}),v(" "+i(l(ra)(q.row.amount)+"Rp."+l(K)(Math.abs(q.row.amount))),1)],2),q.row.notes?(d(),U(Se,{key:0,icon:"notes",text:q.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(st,{color:q.row.amount>0?"green":"red"},{default:a(()=>[v(i(q.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"datetime",props:q,class:"wrap-column"},{default:a(()=>[v(i(l(_e)(q.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"account",props:q},{default:a(()=>{var z;return[v(i((z=q.row.account)==null?void 0:z.name),1)]}),_:2},1032,["props"]),e(Y,{key:"type",props:q},{default:a(()=>[v(i(O.$CONSTANTS.FINANCE_TRANSACTION_TYPES[q.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"amount",props:q,style:{"text-align":"right"}},{default:a(()=>[v(i(l($t)(q.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:q,class:"wrap-column"},{default:a(()=>[v(i(q.row.notes),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:q},{default:a(()=>[t("div",Km,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:q.row.image_path===null||q.row.image_path==="",onClick:J(z=>j(q.row.image_path),["stop"])},{default:a(()=>[q.row.image_path!=null?(d(),U(Pt,{key:0},{default:a(()=>$[10]||($[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),O.$can("admin.finance-transaction.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[7]||($[7]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[O.$can("admin.finance-transaction.delete")?le((d(),U(ne,{key:0,onClick:J(z=>T(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>$[11]||($[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(_a,{modelValue:h.value,"onUpdate:modelValue":$[9]||($[9]=q=>h.value=q),imageUrl:`/${M.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:a(()=>[t("div",Nm,[e(ue,{modelValue:x.year,"onUpdate:modelValue":[$[2]||($[2]=q=>x.year=q),I],options:y,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(d(),U(ue,{key:0,modelValue:x.month,"onUpdate:modelValue":[$[3]||($[3]=q=>x.month=q),I],options:S,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ue,{modelValue:x.type,"onUpdate:modelValue":[$[4]||($[4]=q=>x.type=q),I],options:V,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ue,{modelValue:x.account_id,"onUpdate:modelValue":[$[5]||($[5]=q=>x.account_id=q),I],label:"Akun",options:_,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":$[6]||($[6]=q=>x.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wm=Object.freeze(Object.defineProperty({__proto__:null,default:Hm},Symbol.toStringTag,{value:"Module"})),Ym={class:"q-pa-sm animated-background-container"},Qm={class:"text-h6 q-mb-lg"},Jm={class:"row q-col-gutter-md q-mb-md"},Gm={class:"col-xs-12 col-md-4"},Xm={class:"col-xs-12 col-md-4"},Zm={class:"col-xs-12 col-md-4"},ec={class:"row"},tc={class:"text-subtitle1 text-bold text-grey-9 q-mb-xs q-ml-md"},$l="Beranda",ac={__name:"Index",setup(c){const s=be(),u={reports:[{group:"Pembelian",items:[{label:"Laporan Pembelian 1",route:"admin.report.index"},{label:"Laporan Pembelian 2",route:"admin.report.index"}]},{group:"Penjualan",items:[{label:"Laporan Penjualan 1",route:"admin.report.index"},{label:"Laporan Penjualan 2",route:"admin.report.index"}]},{group:"Keuangan",items:[{label:"Laporan Keuangan 1",route:"admin.report.index"},{label:"Laporan Keuangan 2",route:"admin.report.index"}]}]};return(o,r)=>{const n=Q("i-head"),f=Q("authenticated-layout");return d(),w(H,null,[e(n,{title:$l}),e(f,null,{title:a(()=>[v(i($l))]),"right-button":a(()=>r[9]||(r[9]=[])),default:a(()=>[t("div",Ym,[t("div",Qm,[v(" Selamat datang, "+i(l(s).props.auth.user.name)+". ",1),e(C,{name:"waving_hand",class:"waving-hand"})]),t("div",Jm,[t("div",Gm,[e(pe,{class:"full-height full-width",flat:""},{default:a(()=>[e(Xe,{class:"bg-deep-purple-2 text-grey-10"},{default:a(()=>[e(sa,null,{default:a(()=>[e(C,{name:"local_shipping",class:"q-mr-md"}),r[10]||(r[10]=v("Pembelian"))]),_:1})]),_:1}),e(Ee,null,{default:a(()=>[le((d(),U(ne,{clickable:"",onClick:r[0]||(r[0]=b=>l(W).get(o.route("admin.purchase-order.index")))},{default:a(()=>[e(B,null,{default:a(()=>r[11]||(r[11]=[v("Pembelian")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[re]]),e(Pe),le((d(),U(ne,{clickable:"",onClick:r[1]||(r[1]=b=>l(W).get(o.route("admin.supplier.index")))},{default:a(()=>[e(B,null,{default:a(()=>r[12]||(r[12]=[v("Supplier")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[re]])]),_:1})]),_:1})]),t("div",Xm,[e(pe,{class:"full-height full-width",flat:""},{default:a(()=>[e(Xe,{class:"bg-light-blue-2 text-grey-10"},{default:a(()=>[e(sa,null,{default:a(()=>[e(C,{name:"inventory_2",class:"q-mr-md"}),r[13]||(r[13]=v("Inventori"))]),_:1})]),_:1}),e(Ee,null,{default:a(()=>[le((d(),U(ne,{clickable:"",onClick:r[2]||(r[2]=b=>l(W).get(o.route("admin.product.index")))},{default:a(()=>[e(B,null,{default:a(()=>r[14]||(r[14]=[v("Produk")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[re]]),e(Pe),le((d(),U(ne,{clickable:"",onClick:r[3]||(r[3]=b=>l(W).get(o.route("admin.stock-adjustment.index")))},{default:a(()=>[e(B,null,{default:a(()=>r[15]||(r[15]=[v("Penyesuaian Stok")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[re]]),le((d(),U(ne,{clickable:"",onClick:r[4]||(r[4]=b=>l(W).get(o.route("admin.stock-movement.index")))},{default:a(()=>[e(B,null,{default:a(()=>r[16]||(r[16]=[v("Riwayat Stok")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[re]])]),_:1})]),_:1})]),t("div",Zm,[e(pe,{class:"full-height full-width",flat:""},{default:a(()=>[e(Xe,{class:"bg-green-3 text-grey-10"},{default:a(()=>[e(sa,null,{default:a(()=>[e(C,{name:"storefront",class:"q-mr-md"}),r[17]||(r[17]=v("Penjualan"))]),_:1})]),_:1}),e(Ee,null,{default:a(()=>[le((d(),U(ne,{clickable:"",onClick:r[5]||(r[5]=b=>l(W).get(o.route("admin.sales-order.index")))},{default:a(()=>[e(B,null,{default:a(()=>r[18]||(r[18]=[v("Penjualan")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[re]]),e(Pe),le((d(),U(ne,{clickable:"",onClick:r[6]||(r[6]=b=>l(W).get(o.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(B,null,{default:a(()=>r[19]||(r[19]=[v("Konfirmasi Topup Wallet")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[re]]),le((d(),U(ne,{clickable:"",onClick:r[7]||(r[7]=b=>l(W).get(o.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(B,null,{default:a(()=>r[20]||(r[20]=[v("Transaksi Wallet")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[re]]),e(Pe),le((d(),U(ne,{clickable:"",onClick:r[8]||(r[8]=b=>l(W).get(o.route("admin.customer.index")))},{default:a(()=>[e(B,null,{default:a(()=>r[21]||(r[21]=[v("Pelanggan")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[re]])]),_:1})]),_:1})])]),e(pe,{class:"bg-orange-3 text-grey-10 full-width",flat:""},{default:a(()=>[e(Xe,null,{default:a(()=>[e(sa,null,{default:a(()=>[e(C,{name:"analytics",class:"q-mr-sm"}),r[22]||(r[22]=v(" Laporan"))]),_:1})]),_:1})]),_:1}),e(pe,{flat:"",class:"q-pa-md bg-grey-1 full-width"},{default:a(()=>[t("div",ec,[(d(!0),w(H,null,De(u.reports,b=>(d(),w("div",{key:b.group,class:"col-xs-12 col-sm-4 q-mb-md"},[t("div",tc,i(b.group),1),e(Ee,null,{default:a(()=>[(d(!0),w(H,null,De(b.items,p=>le((d(),U(ne,{key:p,clickable:"",onClick:m=>l(W).get(o.route(p.route))},{default:a(()=>[e(B,null,{default:a(()=>[v(i(p.label),1)]),_:2},1024),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"])),[[re]])),128))]),_:2},1024)]))),128))])]),_:1})])]),_:1})],64)}}},lc=_t(ac,[["__scopeId","data-v-8a5e0c68"]]),oc=Object.freeze(Object.defineProperty({__proto__:null,default:lc},Symbol.toStringTag,{value:"Module"})),nc={class:"q-gutter-sm"},sc={class:"col col-md-6 q-pa-xs"},rc={__name:"Editor",setup(c){const s=be(),u=(s.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Je({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description}),r=()=>nt({form:o,url:route("admin.operational-cost-category.save")});return(n,f)=>{const b=Q("i-head"),p=Q("authenticated-layout");return d(),w(H,null,[e(b,{title:u}),e(p,null,{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",nc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=m=>l(W).get(n.route("admin.operational-cost-category.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",sc,[e(Ge,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=m=>l(o).id=m)},null,512),[[yt,l(o).id]]),e(ie,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":f[2]||(f[2]=m=>l(o).name=m),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[m=>m&&m.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(o).description,"onUpdate:modelValue":f[3]||(f[3]=m=>l(o).description=m),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:f[4]||(f[4]=m=>l(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ic=Object.freeze(Object.defineProperty({__proto__:null,default:rc},Symbol.toStringTag,{value:"Module"})),dc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},uc={class:"q-pa-xs"},mc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},cc={key:0,class:"text-grey-8"},pc={class:"flex justify-end"},xl="Kategori Biaya Operasional",fc={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=je({search:"",...Ke()}),m=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];xe(()=>{y()});const _=V=>ot({message:`Hapus Kategori Biaya ${V.name}?`,url:route("admin.operational-cost-category.delete",V.id),fetchItemsCallback:y,loading:r}),y=(V=null)=>{He({pagination:m,filter:p,props:V,rows:o,url:route("admin.operational-cost-category.data"),loading:r,tableRef:n})},S=X(()=>s.screen.gt.sm?g:g.filter(V=>V.name==="name"||V.name==="action"));return(V,x)=>{const D=Q("i-head"),L=Q("authenticated-layout");return d(),w(H,null,[e(D,{title:xl}),e(L,null,Fe({title:a(()=>[v(i(xl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=T=>u.value=!u.value)},null,8,["icon"]),V.$can("admin.operational-cost-category.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=T=>l(W).get(V.route("admin.operational-cost-category.add")))})):k("",!0)]),default:a(()=>[t("div",uc,[e(Ae,{ref_key:"tableRef",ref:n,class:"full-height-table",style:We({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":x[4]||(x[4]=T=>m.value=T),filter:p.search,loading:r.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:T,message:R,filter:I})=>[t("div",mc,[t("span",null,i(R)+" "+i(I?" with term "+I:""),1)])]),body:a(T=>[e(Oe,{props:T},{default:a(()=>[e(Y,{key:"name",props:T,class:"wrap-column"},{default:a(()=>[v(i(T.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[T.row.description?(d(),w("div",cc,[e(C,{name:"description"}),v(" "+i(T.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"description",props:T,class:"wrap-column"},{default:a(()=>[v(i(T.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:T},{default:a(()=>[t("div",pc,[V.$can("admin.operational-cost-category.add")||V.$can("admin.operational-cost-category.edit")||V.$can("admin.operational-cost-category.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[V.$can("admin.operational-cost-category.add")?le((d(),U(ne,{key:0,clickable:"",onClick:J(R=>l(W).get(V.route("admin.operational-cost-category.duplicate",T.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>x[5]||(x[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),V.$can("admin.operational-cost-category.edit")?le((d(),U(ne,{key:1,clickable:"",onClick:J(R=>l(W).get(V.route("admin.operational-cost-category.edit",T.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>x[6]||(x[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),V.$can("admin.operational-cost-category.delete")?le((d(),U(ne,{key:2,onClick:J(R=>_(T.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>x[7]||(x[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",dc,[e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":x[2]||(x[2]=T=>p.search=T),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},gc=Object.freeze(Object.defineProperty({__proto__:null,default:fc},Symbol.toStringTag,{value:"Module"})),bc={class:"q-gutter-sm"},vc={class:"col col-md-6 q-pa-xs"},_c={class:"row"},yc={class:"detail"},kc={key:0},wc={key:1},hc={key:2},$c={key:3},xc={colspan:"3",class:"bg-white"},Sl="Rincian Biaya Operasional",Sc={__name:"Detail",setup(c){const s=be();return(u,o)=>{const r=Q("i-head"),n=Q("i-link"),f=Q("authenticated-layout");return d(),w(H,null,[e(r,{title:Sl}),e(f,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",bc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.operational-cost.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},i(Sl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",vc,[t("div",_c,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[22]||(o[22]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",yc,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,i(l(da)(l(s).props.data.date)),1)]),l(s).props.data.finance_account?(d(),w("tr",kc,[o[7]||(o[7]=t("td",null,"Akun",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,[e(n,{href:u.route("admin.finance-account.detail",l(s).props.data.finance_account.id)},{default:a(()=>[v(i(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),l(s).props.data.finance_account.type==="bank"?(d(),w(H,{key:0},[o[5]||(o[5]=t("br",null,null,-1)),v(" Rek "+i(l(s).props.data.finance_account.bank)+" an "+i(l(s).props.data.finance_account.holder)+" ",1),o[6]||(o[6]=t("br",null,null,-1)),v(" "+i(l(s).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.category?(d(),w("tr",wc,[o[9]||(o[9]=t("td",null,"Kategori",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.category.name),1)])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Deskripsi",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.description),1)]),t("tr",null,[o[13]||(o[13]=t("td",null,"Jumlah",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,"Rp. "+i(l(K)(l(s).props.data.amount)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Catatan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",hc,[o[17]||(o[17]=t("td",null,"Dibuat",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.created_at))+" oleh "+i(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",$c,[o[19]||(o[19]=t("td",null,"Diperbarui",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.updated_at))+" oleh "+i(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(H,{key:4},[o[21]||(o[21]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",xc,[e(ma,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:We([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Vc=Object.freeze(Object.defineProperty({__proto__:null,default:Sc},Symbol.toStringTag,{value:"Module"})),qc={class:"row items-center justify-end"},Cc={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(c,{emit:s}){const u=c,o=s,r=P(""),n=P(""),f=m=>{let g=!0;const _=u.minDate?dt.formatDate(u.minDate,"YYYY/MM/DD"):null,y=u.maxDate?dt.formatDate(u.maxDate,"YYYY/MM/DD"):null;return _&&(g=g&&dt.isBetweenDates(m,_,"2999/01/01",{inclusiveFrom:!0})),y&&(g=g&&dt.isBetweenDates(m,"1900/01/01",y,{inclusiveTo:!0})),g},b=X(()=>[m=>!!m||"Tanggal harus diisi",m=>{const g=dt.extractDate(m,u.displayFormat);if(!g)return"Format tanggal tidak valid";g.setHours(0,0,0,0);const _=u.minDate?new Date(u.minDate):null;_&&_.setHours(0,0,0,0);const y=u.maxDate?new Date(u.maxDate):null;return y&&y.setHours(0,0,0,0),_&&g<_?`Tanggal tidak boleh kurang dari ${dt.formatDate(u.minDate,u.displayFormat)}`:y&&g>y?`Tanggal tidak boleh lebih dari ${dt.formatDate(u.maxDate,u.displayFormat)}`:(o("update:modelValue",g),!0)}]);Be(()=>u.modelValue,m=>{m instanceof Date?(n.value=dt.formatDate(m,"YYYY/MM/DD"),r.value=dt.formatDate(m,u.displayFormat)):(n.value="",r.value="")},{immediate:!0});const p=m=>{const g=m!==null?new Date(m):null;o("update:modelValue",g),r.value=g?dt.formatDate(g,u.displayFormat):null};return(m,g)=>(d(),U(ie,{modelValue:r.value,"onUpdate:modelValue":g[1]||(g[1]=_=>r.value=_),label:u.label,readonly:u.readonly,disable:u.disable,error:u.error,"error-message":u.errorMessage,mask:u.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:b.value},{append:a(()=>[e(E,{icon:"event",disable:u.disable||u.readonly,flat:"",rounded:"",dense:""},{default:a(()=>[e(is,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(ds,{modelValue:n.value,"onUpdate:modelValue":[g[0]||(g[0]=_=>n.value=_),p],options:f},{default:a(()=>[t("div",qc,[le(e(E,{label:"Close",color:"primary",flat:""},null,512),[[fe]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},pa=_t(Cc,[["__scopeId","data-v-b418ccfb"]]);function Ro(c,s=!1){const u=c.map(f=>({value:f.id,label:f.name})),o=s?[{value:"all",label:"Semua"},...u]:u,r=P([...o]);return{filteredCostCategories:r,filterCostCategory:(f,b)=>{const p=f.toLowerCase();b(()=>{r.value=o.filter(m=>m.label.toLowerCase().includes(p))})},costCategoryOptions:o}}const Tc={class:"q-gutter-sm"},Pc={class:"col col-md-6 q-pa-xs"},Rc={__name:"Editor",setup(c){var _;const s=be(),u=(s.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=Ro(s.props.categories),r=s.props.finance_accounts.map(y=>({label:y.name,value:y.id})),n=P(o),f=P([...n.value]),b=Je({id:s.props.data.id,finance_account_id:s.props.data.finance_account_id??null,category_id:s.props.data.category_id??null,date:new Date(s.props.data.date),description:s.props.data.description,notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((_=s.props.data)==null?void 0:_.image_path)??null,image:null}),p=()=>{ca(b,{date:"YYYY-MM-DD"}),nt({form:b,url:route("admin.operational-cost.save")})},m=(y,S)=>{S(()=>{f.value=n.value.filter(V=>V.label.toLowerCase().includes(y.toLowerCase()))})},g=()=>{b.image_path=null};return(y,S)=>{const V=Q("i-head"),x=Q("authenticated-layout");return d(),w(H,null,[e(V,{title:u}),e(x,null,{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",Tc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:S[0]||(S[0]=D=>y.$inertia.get(y.route("admin.operational-cost.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Pc,[e(Ge,{class:"row",onSubmit:J(p,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":S[1]||(S[1]=D=>l(b).id=D)},null,512),[[yt,l(b).id]]),e(ue,{autofocus:"",modelValue:l(b).category_id,"onUpdate:modelValue":S[2]||(S[2]=D=>l(b).category_id=D),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:f.value,"map-options":"","emit-value":"",onFilter:m,error:!!l(b).errors.category_id,disable:l(b).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ne,null,{default:a(()=>[e(B,null,{default:a(()=>S[10]||(S[10]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(pa,{modelValue:l(b).date,"onUpdate:modelValue":S[3]||(S[3]=D=>l(b).date=D),label:"Tanggal",error:!!l(b).errors.date,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ie,{modelValue:l(b).description,"onUpdate:modelValue":S[4]||(S[4]=D=>l(b).description=D),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!l(b).errors.description,disable:l(b).processing,"error-message":l(b).errors.description,rules:[D=>D&&D.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Ne,{modelValue:l(b).amount,"onUpdate:modelValue":S[5]||(S[5]=D=>l(b).amount=D),label:"Jumlah",lazyRules:"",disable:l(b).processing,error:!!l(b).errors.amount,errorMessage:l(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ue,{class:"custom-select",modelValue:l(b).finance_account_id,"onUpdate:modelValue":S[6]||(S[6]=D=>l(b).finance_account_id=D),label:"Sumber Dana",options:l(r),"map-options":"","emit-value":"",clearable:"",errorMessage:l(b).errors.finance_account_id,error:!!l(b).errors.finance_account_id,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(ie,{modelValue:l(b).notes,"onUpdate:modelValue":S[7]||(S[7]=D=>l(b).notes=D),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(b).processing,error:!!l(b).errors.notes,"error-message":l(b).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(za,{modelValue:l(b).image,"onUpdate:modelValue":S[8]||(S[8]=D=>l(b).image=D),"initial-image-path":l(b).image_path,disabled:l(b).processing,error:!!l(b).errors.image||!!l(b).errors.image_path,"error-message":l(b).errors.image||l(b).errors.image_path,onImageCleared:g},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(b).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(b).processing,onClick:S[9]||(S[9]=D=>l(W).get(y.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Oc=Object.freeze(Object.defineProperty({__proto__:null,default:Rc},Symbol.toStringTag,{value:"Module"})),Ic={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Uc={class:"q-pa-xs"},Dc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},jc={key:0},Ec={key:1},Ac={key:0},Mc={class:"flex justify-end no-wrap"},Vl="Biaya Operasional",Nc={__name:"Index",setup(c){const s=be(),u=he(),o=P(!1),r=P(null),n=P(null),f=at(n),b=P(null),p=P(!1),m=P([]),g=P(!0),_=new Date().getFullYear(),y=new Date().getMonth()+1,S=[{label:"Semua Tahun",value:null},{label:`${_}`,value:_},...Ot(_-2,_-1).reverse()],V=[{value:null,label:"Semua Bulan"},...It()],{costCategoryOptions:x}=Ro(s.props.categories),D=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...x],{accountOptions:L}=us(s.props.finance_accounts),T=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...L],R=je({search:"",finance_account_id:"all",category_id:"all",year:_,month:y,...Ke()}),I=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),N=[{name:"code",label:u.screen.lt.md?"Item":"Kode",field:"code",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{h()});const M=A=>ot({message:`Hapus Biaya ${A.code}?`,url:route("admin.operational-cost.delete",A.id),fetchItemsCallback:h,loading:g}),h=(A=null)=>{He({pagination:I,filter:R,props:A,rows:m,url:route("admin.operational-cost.data"),loading:g,tableRef:r})},j=()=>{h()},O=X(()=>u.screen.gt.sm?N:N.filter(A=>A.name==="code"||A.name==="action"));Be(()=>R.year,A=>{A===null&&(R.month=null)});const $=A=>{b.value=A,p.value=!0};return(A,F)=>{const q=Q("i-head"),z=Q("authenticated-layout");return d(),w(H,null,[e(q,{title:Vl}),e(z,null,Fe({title:a(()=>[v(i(Vl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:F[0]||(F[0]=oe=>o.value=!o.value)},null,8,["icon"]),A.$can("admin.operational-cost.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:F[1]||(F[1]=oe=>l(W).get(A.route("admin.operational-cost.add")))})):k("",!0)]),default:a(()=>[t("div",Uc,[e(Ae,{ref_key:"tableRef",ref:r,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:I.value,"onUpdate:pagination":F[8]||(F[8]=oe=>I.value=oe),filter:R.search,loading:g.value,columns:O.value,rows:m.value,"rows-per-page-options":[10,25,50],style:We({height:l(f)}),onRequest:h,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:oe,message:ce,filter:de})=>[t("div",Dc,[t("span",null,i(ce)+" "+i(de?" with term "+de:""),1)])]),body:a(oe=>[e(Oe,{props:oe,class:"cursor-pointer",onClick:J(ce=>l(W).get(A.route("admin.operational-cost.detail",{id:oe.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"code",props:oe,class:"wrap-column"},{default:a(()=>[l(u).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[v(" Kode: ")],64)),v(" "+i(oe.row.code)+" ",1),l(u).screen.gt.sm?k("",!0):(d(),w(H,{key:1},[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+i(l(da)(oe.row.date)),1)]),oe.row.finance_account?(d(),w("div",jc,[e(C,{name:"wallet",class:"inline-icon"}),v(" "+i(oe.row.finance_account.name),1)])):k("",!0),oe.row.category?(d(),w("div",Ec,[e(C,{name:"category",class:"inline-icon"}),v(" "+i(oe.row.category.name),1)])):k("",!0),e(Se,{icon:"description",text:oe.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+i(l(K)(oe.row.amount)),1)]),e(Se,{icon:"notes",text:oe.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(Y,{key:"date",props:oe,class:"wrap-column"},{default:a(()=>[v(i(l(da)(oe.row.date)),1)]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:oe,class:"wrap-column"},{default:a(()=>[v(i(oe.row.finance_account?oe.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(Y,{key:"category_id",props:oe},{default:a(()=>[oe.row.category?(d(),w("div",Ac,i(oe.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"description",props:oe},{default:a(()=>[e(Se,{text:oe.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:oe},{default:a(()=>[v(i(l(K)(oe.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:oe},{default:a(()=>[e(Se,{text:oe.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:oe},{default:a(()=>[t("div",Mc,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:oe.row.image_path===null||oe.row.image_path==="",onClick:J(ce=>$(oe.row.image_path),["stop"])},{default:a(()=>[oe.row.image_path!=null?(d(),U(Pt,{key:0},{default:a(()=>F[10]||(F[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),A.$can("admin.operational-cost.add")||A.$can("admin.operational-cost.edit")||A.$can("admin.operational-cost.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:F[7]||(F[7]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[A.$can("admin.operational-cost.add")?le((d(),U(ne,{key:0,clickable:"",onClick:J(ce=>l(W).get(A.route("admin.operational-cost.duplicate",oe.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>F[11]||(F[11]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),A.$can("admin.operational-cost.edit")?le((d(),U(ne,{key:1,clickable:"",onClick:J(ce=>l(W).get(A.route("admin.operational-cost.edit",oe.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>F[12]||(F[12]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),A.$can("admin.operational-cost.delete")?le((d(),U(ne,{key:2,onClick:J(ce=>M(oe.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>F[13]||(F[13]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(_a,{modelValue:p.value,"onUpdate:modelValue":F[9]||(F[9]=oe=>p.value=oe),imageUrl:`/${b.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",Ic,[e(ue,{modelValue:R.year,"onUpdate:modelValue":[F[2]||(F[2]=oe=>R.year=oe),j],options:S,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ue,{modelValue:R.month,"onUpdate:modelValue":[F[3]||(F[3]=oe=>R.month=oe),j],options:V,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:R.year===null},null,8,["modelValue","disable"]),e(ue,{modelValue:R.category_id,"onUpdate:modelValue":[F[4]||(F[4]=oe=>R.category_id=oe),j],options:D,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ue,{modelValue:R.finance_account_id,"onUpdate:modelValue":[F[5]||(F[5]=oe=>R.finance_account_id=oe),j],options:T,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:R.search,"onUpdate:modelValue":F[6]||(F[6]=oe=>R.search=oe),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Bc=Object.freeze(Object.defineProperty({__proto__:null,default:Nc},Symbol.toStringTag,{value:"Module"})),zc={class:"q-gutter-sm"},Fc={class:"col col-md-6 q-pa-xs"},Lc={__name:"Editor",setup(c){const s=he(),u=be(),o=(u.props.data.id?"Edit":"Tambah")+" Kategori Produk",r=Je({id:u.props.data.id,name:u.props.data.name,description:u.props.data.description}),n=()=>nt({form:r,url:route("admin.product-category.save")});return(f,b)=>{const p=Q("i-head"),m=Q("authenticated-layout");return d(),w(H,null,[e(p,{title:o}),e(m,{"show-drawer-button":!l(s).screen.lt.md},Fe({title:a(()=>[v(i(o))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Fc,[e(Ge,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(r).id=g)},null,512),[[yt,l(r).id]]),e(ie,{autofocus:"",modelValue:l(r).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(r).name=g),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(r).errors.name,disable:l(r).processing,"error-message":l(r).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(r).description,"onUpdate:modelValue":b[3]||(b[3]=g=>l(r).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(r).processing,error:!!l(r).errors.description,"error-message":l(r).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(r).processing,loading:l(r).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(r).processing,onClick:b[4]||(b[4]=g=>l(r).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",zc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>l(W).get(f.route("admin.product-category.index")))})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},Kc=Object.freeze(Object.defineProperty({__proto__:null,default:Lc},Symbol.toStringTag,{value:"Module"})),Hc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Wc={class:"q-pa-xs"},Yc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Qc={key:0,class:"text-grey-8"},Jc={class:"flex justify-end"},ql="Kategori Produk",Gc={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=je({search:"",...Ke()}),m=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];xe(()=>{y()});const _=V=>ot({message:`Hapus Kategori ${V.name}?`,url:route("admin.product-category.delete",V.id),fetchItemsCallback:y,loading:r}),y=(V=null)=>{He({pagination:m,filter:p,props:V,rows:o,url:route("admin.product-category.data"),loading:r,tableRef:n})},S=X(()=>s.screen.gt.sm?g:g.filter(V=>V.name==="name"||V.name==="action"));return(V,x)=>{const D=Q("i-head"),L=Q("authenticated-layout");return d(),w(H,null,[e(D,{title:ql}),e(L,null,Fe({title:a(()=>[v(i(ql))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=T=>u.value=!u.value)},null,8,["icon"]),V.$can("admin.product-category.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=T=>l(W).get(V.route("admin.product-category.add")))})):k("",!0)]),default:a(()=>[t("div",Wc,[e(Ae,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":x[4]||(x[4]=T=>m.value=T),filter:p.search,loading:r.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],style:We({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:T,message:R,filter:I})=>[t("div",Yc,[t("span",null,i(R)+" "+i(I?" with term "+I:""),1)])]),body:a(T=>[e(Oe,{props:T},{default:a(()=>[e(Y,{key:"name",props:T,class:"wrap-column"},{default:a(()=>[v(i(T.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[T.row.description?(d(),w("div",Qc,[e(C,{name:"description"}),v(" "+i(T.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"description",props:T,class:"wrap-column"},{default:a(()=>[v(i(T.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:T},{default:a(()=>[t("div",Jc,[V.$can("admin.product-category.add")||V.$can("admin.product-category.edit")||V.$can("admin.product-category.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[V.$can("admin.product-category.add")?le((d(),U(ne,{key:0,clickable:"",onClick:J(R=>l(W).get(V.route("admin.product-category.duplicate",T.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>x[5]||(x[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),V.$can("admin.product-category.edit")?le((d(),U(ne,{key:1,clickable:"",onClick:J(R=>l(W).get(V.route("admin.product-category.edit",T.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>x[6]||(x[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),V.$can("admin.product-category.delete")?le((d(),U(ne,{key:2,onClick:J(R=>_(T.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>x[7]||(x[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Hc,[e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":x[2]||(x[2]=T=>p.search=T),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Xc=Object.freeze(Object.defineProperty({__proto__:null,default:Gc},Symbol.toStringTag,{value:"Module"})),Zc={class:"detail"},ep={key:0},tp={key:1},ap={key:2},lp={class:"detail"},op={class:"detail"},np={key:0},sp={key:0},rp={key:0},ip={key:0},dp={class:"detail"},up={key:0,class:"q-pt-md"},Oo={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(c){const s=c;he();const u=r=>`${r>0?K((r-s.product.cost)/s.product.cost*100,2):0}%`,o=()=>{ot({message:`Hapus Produk ${s.product.name}?`,url:route("admin.product.delete",s.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(r,n)=>{const f=Q("i-link");return d(),w("div",null,[n[39]||(n[39]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",Zc,[t("tbody",null,[t("tr",null,[n[1]||(n[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),n[2]||(n[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(c.product.name),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"Deskirpsi",-1)),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,i(c.product.description),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Barcode",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,i(c.product.barcode),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Jenis Produk",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,i(r.$CONSTANTS.PRODUCT_TYPES[c.product.type]),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Kategori",-1)),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,i(c.product.category?c.product.category.name:"--Tidak memiliki kategori--"),1)]),r.$can("admin.product:view-supplier")?(d(),w("tr",ep,[n[11]||(n[11]=t("td",null,"Supplier",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[c.product.supplier?(d(),U(f,{key:0,href:r.route("admin.supplier.detail",{id:c.product.supplier.id})},{default:a(()=>[v(i(c.product.supplier.name),1)]),_:1},8,["href"])):(d(),w(H,{key:1},[v(i("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[n[13]||(n[13]=t("td",null,"Status",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,i(c.product.active?"Aktif":"Tidak Aktif"),1)]),c.product.created_at?(d(),w("tr",tp,[n[16]||(n[16]=t("td",null,"Dibuat Oleh",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[c.product.creator?(d(),w(H,{key:0},[e(f,{href:r.route("admin.user.detail",{id:c.product.creator})},{default:a(()=>[v(i(c.product.creator.username),1)]),_:1},8,["href"]),n[15]||(n[15]=v(" - "))],64)):k("",!0),v(" "+i(l(_e)(c.product.created_at)),1)])])):k("",!0),c.product.updater?(d(),w("tr",ap,[n[19]||(n[19]=t("td",null,"Diperbarui oleh",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,[c.product.updater?(d(),w(H,{key:0},[e(f,{href:r.route("admin.user.detail",{id:c.product.updater})},{default:a(()=>[v(i(c.product.updater.username),1)]),_:1},8,["href"]),n[18]||(n[18]=v(" - "))],64)):k("",!0),v(" "+i(l(_e)(c.product.updated_at)),1)])])):k("",!0)])]),n[40]||(n[40]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",lp,[t("tbody",null,[t("tr",null,[n[21]||(n[21]=t("td",{style:{width:"120px"}},"Stok",-1)),n[22]||(n[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(K)(c.product.stock))+" "+i(c.product.uom),1)]),t("tr",null,[n[23]||(n[23]=t("td",null,"Stok Minimum",-1)),n[24]||(n[24]=t("td",null,":",-1)),t("td",null,i(l(K)(c.product.min_stock))+" "+i(c.product.uom),1)]),t("tr",null,[n[25]||(n[25]=t("td",null,"Barcode",-1)),n[26]||(n[26]=t("td",null,":",-1)),t("td",null,i(c.product.barcode),1)])])]),n[41]||(n[41]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",op,[t("tbody",null,[t("tr",null,[n[27]||(n[27]=t("td",null,"Opsi Harga",-1)),n[28]||(n[28]=t("td",null,":",-1)),t("td",null,i(c.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),r.$can("admin.product:view-cost")?(d(),w("tr",np,[n[29]||(n[29]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),n[30]||(n[30]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+i(l(K)(c.product.cost)),1)])):k("",!0),t("tr",null,[n[31]||(n[31]=t("td",null,"Harga Eceran",-1)),n[32]||(n[32]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+i(l(K)(c.product.price_1))+" ",1),r.$can("admin.product:view-cost")?(d(),w("span",sp," ("+i(u(c.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[n[33]||(n[33]=t("td",null,"Harga Partai",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+i(l(K)(c.product.price_2))+" ",1),r.$can("admin.product:view-cost")?(d(),w("span",rp," ("+i(u(c.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[n[35]||(n[35]=t("td",null,"Harga Grosir",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+i(l(K)(c.product.price_3))+" ",1),r.$can("admin.product:view-cost")?(d(),w("span",ip," ("+i(u(c.product.price_3))+") ",1)):k("",!0)])])])]),n[42]||(n[42]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",dp,[t("tbody",null,[t("tr",null,[n[37]||(n[37]=t("td",{style:{width:"120px"}},"Catatan",-1)),n[38]||(n[38]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(c.product.notes),1)])])]),r.$can("admin.product.delete")?(d(),w("div",up,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:n[0]||(n[0]=b=>o())})])):k("",!0)])}}},mp=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),cp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},pp={key:0},Io={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(c){const s=c,u=he(),o=P([]),r=P(!0),n=je({...Ke()}),f=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let b=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"quantity_before",label:"Stok Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Stok Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{p()});const p=(g=null)=>He({pagination:f,filter:n,props:g,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:s.productId}}),loading:r}),m=X(()=>u.screen.lt.sm?b.filter(g=>g.name==="id"||g.name==="quantity"):b);return(g,_)=>(d(),U(Ae,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:f.value,"onUpdate:pagination":_[0]||(_[0]=y=>f.value=y),filter:n.search,loading:r.value,columns:m.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",cp,[t("span",null,i(S)+" "+i(V?" with term "+V:""),1)])]),body:a(y=>[e(Oe,{props:y},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" "+i(y.row.code),1)]),t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+i(l(_e)(y.row.created_at)),1)]),t("div",null,[e(st,null,{default:a(()=>[v(i(g.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type]),1)]),_:2},1024)]),l(u).screen.lt.sm?(d(),w(H,{key:0},[t("div",{class:qe(y.row.quantity>0?"text-positive":"text-negative")},[e(C,{class:"inline-icon",name:"compare_arrows"}),v(" "+i(l(K)(y.row.quantity_before))+" "+i(y.row.uom)+"  "+i(l(K)(y.row.quantity_after))+" "+i(y.row.uom),1)],2),e(Se,{text:y.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"created_at",props:y},{default:a(()=>[v(i(l(_e)(y.row.created_at)),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:y},{default:a(()=>[v(i(g.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type])+" ",1),y.row.ref?(d(),w("span",pp,i(y.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"quantity_before",props:y},{default:a(()=>[v(i(l(K)(y.row.quantity_before)),1)]),_:2},1032,["props"]),e(Y,{key:"quantity",props:y,class:qe(y.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[v(i(l($t)(y.row.quantity))+" ",1),l(u).screen.lt.sm?(d(),w(H,{key:0},[v(i(y.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Y,{key:"quantity_after",props:y},{default:a(()=>[v(i(l(K)(y.row.quantity_after)),1)]),_:2},1032,["props"]),e(Y,{key:"uom",props:y},{default:a(()=>[v(i(y.row.uom),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},fp=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"})),gp={class:"q-gutter-sm"},bp={class:"q-gutter-sm"},vp={class:"row justify-center"},_p={class:"col col-lg-6 q-pa-xs"},yp={class:"row"},kp={__name:"Detail",setup(c){const s=be(),u=`Rincian Produk #${s.props.data.id}`,o=P("main");return(r,n)=>{const f=Q("i-head"),b=Q("authenticated-layout");return d(),w(H,null,[e(f,{title:u}),e(b,{"show-drawer-button":!0},{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",gp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>l(W).get(r.route("admin.product.index")))})])]),"right-button":a(()=>[t("div",bp,[r.$can("admin.product.edit")?(d(),U(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[1]||(n[1]=p=>l(W).get(r.route("admin.product.edit",{id:l(s).props.data.id}))),title:"Edit produk"})):k("",!0),r.$can("admin.product.add")?(d(),U(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[2]||(n[2]=p=>l(W).get(r.route("admin.product.duplicate",{id:l(s).props.data.id}))),title:"Duplikat produk"})):k("",!0),r.$can("admin.product.add")?(d(),U(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:n[3]||(n[3]=p=>l(W).get(r.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:a(()=>[t("div",vp,[t("div",_p,[t("div",yp,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(qt,{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(rt,{name:"main",label:"Info Utama"}),e(rt,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(Ct,{modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=p=>o.value=p),animated:""},{default:a(()=>[e(it,{name:"main"},{default:a(()=>[e(Oo,{product:l(s).props.data},null,8,["product"])]),_:1}),e(it,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Io,{"product-id":l(s).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},wp=Object.freeze(Object.defineProperty({__proto__:null,default:kp},Symbol.toStringTag,{value:"Module"})),Qt=jt({name:"QBtnToggle",props:{...mo,modelValue:{required:!0},options:{type:Array,required:!0,validator:c=>c.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(c,{slots:s,emit:u}){const o=X(()=>c.options.find(y=>y.value===c.modelValue)!==void 0),r=X(()=>({type:"hidden",name:c.name,value:c.modelValue})),n=ps(r),f=X(()=>ms(c)),b=X(()=>({rounded:c.rounded,dense:c.dense,...f.value})),p=X(()=>c.options.map((y,S)=>{const{attrs:V,value:x,slot:D,...L}=y;return{slot:D,props:{key:S,"aria-pressed":x===c.modelValue?"true":"false",...V,...L,...b.value,disable:c.disable===!0||L.disable===!0,color:x===c.modelValue?g(L,"toggleColor"):g(L,"color"),textColor:x===c.modelValue?g(L,"toggleTextColor"):g(L,"textColor"),noCaps:g(L,"noCaps")===!0,noWrap:g(L,"noWrap")===!0,size:g(L,"size"),padding:g(L,"padding"),ripple:g(L,"ripple"),stack:g(L,"stack")===!0,stretch:g(L,"stretch")===!0,onClick(T){m(x,y,T)}}}}));function m(y,S,V){c.readonly!==!0&&(c.modelValue===y?c.clearable===!0&&(u("update:modelValue",null,null),u("clear")):u("update:modelValue",y,S),u("click",V))}function g(y,S){return y[S]===void 0?c[S]:y[S]}function _(){const y=p.value.map(S=>Ce(E,S.props,S.slot!==void 0?s[S.slot]:void 0));return c.name!==void 0&&c.disable!==!0&&o.value===!0&&n(y,"push"),io(s.default,y)}return()=>Ce(cs,{class:"q-btn-toggle",...f.value,rounded:c.rounded,stretch:c.stretch,glossy:c.glossy,spread:c.spread},_)}});function wa(c,s=!1){const u=c.map(f=>({value:f.id,label:f.name})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...u]:u,r=P([...o]);return{filteredCategories:r,filterCategories:(f,b)=>{const p=f.toLowerCase();b(()=>{r.value=o.filter(m=>m.label.toLowerCase().includes(p))})},categories:o}}function ha(c,s=!1){const u=c.map(f=>({value:f.id,label:f.name+" ("+f.code+")"})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...u]:u,r=P([...o]);return{filteredSuppliers:r,filterSupplierFn:(f,b)=>{const p=f.toLowerCase();b(()=>{r.value=o.filter(m=>m.label.toLowerCase().includes(p))})},suppliers:o}}const Da=Fa({__name:"PercentInput",props:{modelValue:{type:[Number,null],required:!1,default:0},label:{type:[String,void 0],required:!1,default:void 0},locale:{type:String,default:"id-ID"},outlined:{type:Boolean,default:!1},allowNegative:{type:Boolean,default:!1},maxDecimals:{type:Number,default:0},lazyRules:{type:[Boolean,String],default:!1},disable:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(c,{expose:s,emit:u}){const o=P(null),r=fs(),n=P(!1);s({focus:()=>{o.value&&o.value.focus()},select:()=>{var T;if((T=o.value)!=null&&T.$el){const R=o.value.$el.querySelector("input");R==null||R.select()}}});const f=c,b=u,p=P(""),m=T=>{const I=new Intl.NumberFormat(T).format(123456789e-2),N=I.includes(",")?",":".",M=I.replace(/\d/g,"").replace(N,"").charAt(0);return{decimalSeparator:N,thousandSeparator:M}},{decimalSeparator:g,thousandSeparator:_}=m(f.locale),y=T=>{if(T==null||isNaN(T)){if(f.maxDecimals>0)return"";T=0}return new Intl.NumberFormat(f.locale,{minimumFractionDigits:f.maxDecimals,maximumFractionDigits:f.maxDecimals}).format(T)};Be(()=>f.modelValue,T=>{n.value||(p.value=y(T))},{immediate:!0});const S=T=>{const R=T.replace(/[^0-9.,-]+/g,"").replace(new RegExp(`\\${_}`,"g"),"").replace(new RegExp(`\\${g}`,"g"),".");if(R===""||R==="-")return null;const I=parseFloat(R);return isNaN(I)?null:parseFloat(I.toFixed(f.maxDecimals))},V=()=>{n.value=!0,S(p.value),ft(()=>{var T;(T=o.value)==null||T.select()})},x=T=>{p.value=T},D=()=>{n.value=!1;const T=S(p.value);b("update:modelValue",T),p.value=y(T)},L=T=>{const R=["Backspace","Delete","Tab","ArrowLeft","ArrowRight","Home","End","Shift"];T.ctrlKey||T.metaKey||T.key>="0"&&T.key<="9"||(T.key===g||T.key===_)&&!p.value.includes(g)||f.allowNegative&&T.key==="-"&&T.target.selectionStart===0||R.includes(T.key)||T.preventDefault()};return(T,R)=>(d(),U(l(ie),{ref_key:"qInputRef",ref:o,"model-value":p.value,label:f.label,outlined:f.outlined,"onUpdate:modelValue":x,onBlur:D,onFocus:V,onKeydown:L,"lazy-rules":f.lazyRules,disable:f.disable,error:f.error,rules:f.rules,"error-message":f.errorMessage},Fe({_:2},[l(r).prepend?{name:"prepend",fn:a(()=>[Vt(T.$slots,"prepend")]),key:"0"}:void 0,l(r).append?{name:"append",fn:a(()=>[Vt(T.$slots,"append")]),key:"1"}:void 0]),1032,["model-value","label","outlined","lazy-rules","disable","error","rules","error-message"]))}}),hp=Fa({__name:"BarcodeInput",props:{modelValue:{}},emits:["update:modelValue","scan-success"],setup(c,{emit:s}){const u=c,o=s,r=he(),n=P(u.modelValue);Be(()=>u.modelValue,L=>{L!==n.value&&(n.value=L)});const f=L=>{n.value=L,o("update:modelValue",L)},b=P(null),p=P(!1),m=P(!1);let g=null,_=null,y=null;xe(async()=>{if("BarcodeDetector"in window){p.value=!0;try{const L=await window.BarcodeDetector.getSupportedFormats();_=new BarcodeDetector({formats:L})}catch(L){console.warn("BarcodeDetector init error:",L),p.value=!1}}}),na(()=>x());function S(){if(!p.value){r.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}m.value?x():V()}async function V(){if(_)try{m.value=!0,g=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),b.value&&(b.value.srcObject=g),await new Promise(L=>setTimeout(L,300)),D()}catch(L){m.value=!1,r.notify({type:"negative",message:`Gagal akses kamera: ${L.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function x(){m.value=!1,y&&cancelAnimationFrame(y),g&&(g.getTracks().forEach(L=>L.stop()),g=null)}async function D(){var L;if(!(!b.value||!_||!m.value)){try{const T=await _.detect(b.value);if(T.length>0){const R=T[0].rawValue;n.value=R,o("update:modelValue",R),o("scan-success",R),(L=navigator.vibrate)==null||L.call(navigator,100),r.notify({type:"positive",message:`Barcode terdeteksi: ${R}`,timeout:1e3}),x();return}}catch(T){console.warn("Detection error:",T)}y=requestAnimationFrame(D)}}return(L,T)=>(d(),w("div",null,[e(ie,Aa(L.$attrs,{"model-value":n.value,"onUpdate:modelValue":f,disable:m.value||L.$attrs.disable,loading:m.value||L.$attrs.loading}),Fe({append:a(()=>[p.value&&!m.value&&!n.value?(d(),U(C,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:S},{default:a(()=>[e(Pt,null,{default:a(()=>T[1]||(T[1]=[v("Scan Barcode")])),_:1})]),_:1})):m.value?(d(),U(co,{key:1,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0)]),_:2},[De(L.$slots,(R,I)=>({name:I,fn:a(N=>[I!=="append"?Vt(L.$slots,I,La(Aa({key:0},N)),void 0,!0):k("",!0)])}))]),1040,["model-value","disable","loading"]),e(lt,{modelValue:m.value,"onUpdate:modelValue":T[0]||(T[0]=R=>m.value=R),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(pe,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(te,{class:"text-center q-pb-none"},{default:a(()=>T[2]||(T[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(te,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:b,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(tt,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(E,{label:"Batal Scan",color:"negative",icon:"close",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),$p=_t(hp,[["__scopeId","data-v-38d5a1a0"]]),xp={class:"q-gutter-sm"},Sp={class:"col col-md-6 q-pa-xs"},Vp={class:"row q-gutter-md"},qp={class:"col"},Cp={class:"col"},Tp={class:"row q-gutter-md"},Pp={class:"q-mt-md full-width"},Rp={__name:"Editor",setup(c){const s=be(),u=(s.props.data.id?"Edit":"Tambah")+" Produk",o=ze(window.CONSTANTS.PRODUCT_TYPES),r=P(!1),n=Je({id:s.props.data.id,category_id:s.props.data.category_id,supplier_id:s.props.data.supplier_id,type:s.props.data.type||"",name:s.props.data.name||"",description:s.props.data.description||"",stock:parseFloat(s.props.data.stock)||0,min_stock:parseFloat(s.props.data.min_stock)||0,max_stock:parseFloat(s.props.data.max_stock)||0,uom:s.props.data.uom||"",barcode:s.props.data.barcode||"",cost:parseFloat(s.props.data.cost)||0,price_1:parseFloat(s.props.data.price_1)||0,price_2:parseFloat(s.props.data.price_2)||0,price_3:parseFloat(s.props.data.price_3)||0,price_1_markup:parseFloat(s.props.data.price_1_markup),price_2_markup:parseFloat(s.props.data.price_2_markup),price_3_markup:parseFloat(s.props.data.price_3_markup),price_1_option:s.props.data.price_1_option??"price",price_2_option:s.props.data.price_2_option??"price",price_3_option:s.props.data.price_3_option??"price",active:!!s.props.data.active,price_editable:!!s.props.data.price_editable,notes:s.props.data.notes||""}),f=()=>nt({form:n,url:route("admin.product.save")});function b(x){return s.props.data.id&&s.props.data.supplier&&(x.some(L=>L.id===s.props.data.supplier_id)||x.unshift(s.props.data.supplier)),x}const{filteredCategories:p,filterCategories:m}=wa(s.props.categories),{filteredSuppliers:g,filterSupplierFn:_}=ha(b(s.props.suppliers)),y=(x,D)=>(x=parseFloat(x)||0,D=parseFloat(D)||0,D<=0?x>0?100:0:(x-D)/D*100),S=(x,D)=>{x=parseFloat(x)||0,D=parseFloat(D)||0;const L=x*(1+D/100);return Math.round(L)};Be(()=>n.cost,x=>{r.value||(r.value=!0,n.price_1_option=="markup"?n.price_1=S(x,n.price_1_markup):n.price_1_markup=y(n.price_1,x),n.price_2_option=="markup"?n.price_2=S(x,n.price_2_markup):n.price_2_markup=y(n.price_2,x),n.price_3_option=="markup"?n.price_3=S(x,n.price_3_markup):n.price_3_markup=y(n.price_3,x),r.value=!1)},{immediate:!1});const V=x=>{const D=`price_${x}`,L=`price_${x}_markup`,T=`price_${x}_option`;Be(()=>n[D],R=>{if(n[T]=="markup"||r.value)return;r.value=!0;const I=y(R,n.cost);n[L]=parseFloat(I.toFixed(2)),r.value=!1},{deep:!1}),Be(()=>n[L],R=>{n[T]!="price"&&(r.value||(r.value=!0,n[D]=S(n.cost,R),r.value=!1))},{deep:!1})};for(let x=1;x<=3;x++)V(x);return xe(()=>{for(let x=1;x<=3;x++)n[`price_${x}_markup`]=y(n[`price_${x}`],n.cost)}),(x,D)=>{const L=Q("i-head"),T=Q("authenticated-layout");return d(),w(H,null,[e(L,{title:u}),e(T,{"show-drawer-button":!0},{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",xp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:D[0]||(D[0]=R=>l(W).get(x.route("admin.product.index")))})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(n).processing,onClick:D[1]||(D[1]=R=>f()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Sp,[e(Ge,{class:"row",onKeydown:D[25]||(D[25]=Jt(J(()=>{},["prevent"]),["enter"])),onSubmit:J(f,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":D[2]||(D[2]=R=>l(n).id=R)},null,512),[[yt,l(n).id]]),D[32]||(D[32]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(ue,{disabled:!!l(n).id,autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":D[3]||(D[3]=R=>l(n).type=R),class:"custom-select",options:l(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["disabled","modelValue","options"]),e(ie,{modelValue:l(n).name,"onUpdate:modelValue":D[4]||(D[4]=R=>l(n).name=R),modelModifiers:{trim:!0},label:"Kode / Nama Produk","lazy-rules":"",error:!!l(n).errors.name,disable:l(n).processing,"error-message":l(n).errors.name,rules:[R=>R&&R.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(n).description,"onUpdate:modelValue":D[5]||(D[5]=R=>l(n).description=R),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi (Opsional)","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.description,"error-message":l(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ue,{modelValue:l(n).category_id,"onUpdate:modelValue":D[6]||(D[6]=R=>l(n).category_id=R),label:"Kategori (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(p),"map-options":"","emit-value":"",onFilter:l(m),"option-label":"label","option-value":"value",error:!!l(n).errors.category_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ne,null,{default:a(()=>[e(B,null,{default:a(()=>D[26]||(D[26]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),x.$can("admin.product:view-supplier")?(d(),U(ue,{key:0,modelValue:l(n).supplier_id,"onUpdate:modelValue":D[7]||(D[7]=R=>l(n).supplier_id=R),label:"Supplier Default (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(g),"map-options":"","emit-value":"",onFilter:l(_),"option-label":"label","option-value":"value",error:!!l(n).errors.supplier_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ne,null,{default:a(()=>[e(B,null,{default:a(()=>D[27]||(D[27]=[v("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(Tt,{class:"q-mt-md",modelValue:l(n).active,"onUpdate:modelValue":D[8]||(D[8]=R=>l(n).active=R),disable:l(n).processing,label:"Produk Aktif (Ditampilkan)"},null,8,["modelValue","disable"]),D[33]||(D[33]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",Vp,[t("div",qp,[e(ie,{modelValue:l(n).uom,"onUpdate:modelValue":D[9]||(D[9]=R=>l(n).uom=R),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!l(n).errors.uom,disable:l(n).processing,"error-message":l(n).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])]),t("div",Cp,[e($p,{modelValue:l(n).barcode,"onUpdate:modelValue":D[10]||(D[10]=R=>l(n).barcode=R),modelModifiers:{trim:!0},label:"Barcode"},null,8,["modelValue"])])]),t("div",Tp,[e(Ne,{modelValue:l(n).stock,"onUpdate:modelValue":D[11]||(D[11]=R=>l(n).stock=R),label:"Stok Aktual",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.stock,errorMessage:l(n).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ne,{modelValue:l(n).min_stock,"onUpdate:modelValue":D[12]||(D[12]=R=>l(n).min_stock=R),label:"Stok Minimum",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.min_stock,errorMessage:l(n).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),D[34]||(D[34]=t("div",{class:"text-subtitle1 q-pt-lg"},"Harga & Modal",-1)),x.$can("admin.product:view-cost")?(d(),U(Ne,{key:1,modelValue:l(n).cost,"onUpdate:modelValue":D[13]||(D[13]=R=>l(n).cost=R),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.cost,errorMessage:l(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("table",Pp,[D[31]||(D[31]=t("thead",{class:"text-grey-6"},[t("tr",null,[t("th",{style:{width:"25%"}},"Harga"),t("th",{style:{width:"25%"}},"Markup (%)"),t("th"),t("th",{style:{width:"25%"}},"Harga Jual (Rp)")])],-1)),t("tbody",null,[t("tr",null,[D[28]||(D[28]=t("td",{class:"no-wrap"},"Harga Eceran",-1)),t("td",null,[e(Da,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_1_markup,"onUpdate:modelValue":D[14]||(D[14]=R=>l(n).price_1_markup=R),lazyRules:"",readonly:l(n).price_1_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_1_markup,errorMessage:l(n).errors.price_1_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Qt,{modelValue:l(n).price_1_option,"onUpdate:modelValue":D[15]||(D[15]=R=>l(n).price_1_option=R),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ne,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_1,"onUpdate:modelValue":D[16]||(D[16]=R=>l(n).price_1=R),lazyRules:"",disable:l(n).processing,readonly:l(n).price_1_option=="markup",error:!!l(n).errors.price_1,errorMessage:l(n).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])]),t("tr",null,[D[29]||(D[29]=t("td",{class:"no-wrap"},"Harga Partai",-1)),t("td",null,[e(Da,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_2_markup,"onUpdate:modelValue":D[17]||(D[17]=R=>l(n).price_2_markup=R),lazyRules:"",readonly:l(n).price_2_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_2_markup,errorMessage:l(n).errors.price_2_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Qt,{modelValue:l(n).price_2_option,"onUpdate:modelValue":D[18]||(D[18]=R=>l(n).price_2_option=R),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ne,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_2,"onUpdate:modelValue":D[19]||(D[19]=R=>l(n).price_2=R),lazyRules:"",readonly:l(n).price_2_option=="markup",disable:l(n).processing,error:!!l(n).errors.price_2,errorMessage:l(n).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","readonly","disable","error","errorMessage"])])]),t("tr",null,[D[30]||(D[30]=t("td",{class:"no-wrap"},"Harga Grosir",-1)),t("td",null,[e(Da,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_3_markup,"onUpdate:modelValue":D[20]||(D[20]=R=>l(n).price_3_markup=R),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option!="markup",error:!!l(n).errors.price_3_markup,errorMessage:l(n).errors.price_3_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","disable","readonly","error","errorMessage"])]),t("td",null,[e(Qt,{modelValue:l(n).price_3_option,"onUpdate:modelValue":D[21]||(D[21]=R=>l(n).price_3_option=R),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ne,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_3,"onUpdate:modelValue":D[22]||(D[22]=R=>l(n).price_3=R),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option=="markup",error:!!l(n).errors.price_3,errorMessage:l(n).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])])])]),e(Tt,{class:"q-mt-sm",modelValue:l(n).price_editable,"onUpdate:modelValue":D[23]||(D[23]=R=>l(n).price_editable=R),disable:l(n).processing,label:"Harga dapat diubah saat penjualan"},null,8,["modelValue","disable"]),e(ie,{modelValue:l(n).notes,"onUpdate:modelValue":D[24]||(D[24]=R=>l(n).notes=R),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Op=Object.freeze(Object.defineProperty({__proto__:null,default:Rp},Symbol.toStringTag,{value:"Module"})),Ip={class:"q-gutter-sm"},Up={class:"col col-md-6 q-pa-xs"},Cl="Import Produk",Dp={__name:"Import",setup(c){const s=Je({csv_file:null}),u=()=>{s.post(route("admin.product.import"),{onSuccess:()=>{s.reset()},onError:()=>{Qe()},onFinish:()=>{s.clearErrors()}})};return(o,r)=>{const n=Q("i-head"),f=Q("authenticated-layout");return d(),w(H,null,[e(n,{title:Cl}),e(f,{"show-drawer-button":!0},{title:a(()=>[v(i(Cl))]),"left-button":a(()=>[t("div",Ip,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=b=>l(W).get(o.route("admin.product.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Up,[e(Ge,{class:"row",onSubmit:J(u,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[r[3]||(r[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),r[4]||(r[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(So,{modelValue:l(s).csv_file,"onUpdate:modelValue":r[1]||(r[1]=b=>l(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:r[2]||(r[2]=b=>l(W).get(o.route("admin.product.index")))},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),U(Gt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(i(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),U(Gt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(i(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},jp=Object.freeze(Object.defineProperty({__proto__:null,default:Dp},Symbol.toStringTag,{value:"Module"})),Ep={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ap={class:"q-pa-xs"},Mp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Np={key:0},Bp={key:1},zp={key:2},Fp={key:3},Lp={class:"flex justify-end"},Kp={key:0},Hp={key:1},Wp={key:0},Tl="Produk",Yp={__name:"Index",setup(c){const s=be(),u=P(null),o=P(null),r=at(o),n=P(!1),f=[...ze(window.CONSTANTS.PRODUCT_TYPES)],b=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],p=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],m=he(),g=P(!1),_=P([]),y=P(!0),S=je({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...Ke()}),V=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let x=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"action",align:"right"}];xe(()=>{const $=new URLSearchParams(window.location.search).get("page");$&&(V.value.page=parseInt($)),L()});const D=O=>ot({message:`Hapus Produk ${O.name}?`,url:route("admin.product.delete",O.id),fetchItemsCallback:L,loading:y}),L=(O=null)=>{He({pagination:V,filter:S,props:O,rows:_,url:route("admin.product.data"),loading:y,tableRef:u})},T=()=>{L()},{filteredCategories:R,filterCategories:I}=wa(s.props.categories),{filteredSuppliers:N,filterSupplierFn:M}=ha(s.props.suppliers),h=X(()=>{let O=[...x];return n.value||O.splice(2,1),m.screen.gt.sm?O:O.filter($=>$.name==="name"||$.name==="action")}),j=O=>{W.get(route("admin.product.detail",O.row.id))};return(O,$)=>{const A=Q("i-head"),F=Q("authenticated-layout");return d(),w(H,null,[e(A,{title:Tl}),e(F,null,Fe({title:a(()=>[v(i(Tl))]),"right-button":a(()=>[e(E,{icon:g.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=q=>g.value=!g.value)},null,8,["icon"]),O.$can("admin.product.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=q=>l(W).get(O.route("admin.product.add")))})):k("",!0),O.$can("admin.product.import")||O.$can("admin.product:view-cost")?(d(),U(E,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[O.$can("admin.product.send-price-list")?le((d(),U(ne,{key:0,clickable:"",onClick:$[2]||($[2]=J(q=>l(W).get(O.route("admin.product.send-price-list")),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"send"})]),_:1}),e(B,null,{default:a(()=>$[14]||($[14]=[v("Kirim Daftar Harga")])),_:1})]),_:1})),[[re],[fe]]):k("",!0),O.$can("admin.product.import")?le((d(),U(ne,{key:1,clickable:"",onClick:$[3]||($[3]=q=>n.value=!n.value)},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:n.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(B,null,{default:a(()=>[v(i(n.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[re],[fe]]):k("",!0),O.$can("admin.product.import")?le((d(),U(ne,{key:2,clickable:"",onClick:$[4]||($[4]=J(q=>l(W).get(O.route("admin.product.import")),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"csv"})]),_:1}),e(B,null,{default:a(()=>$[15]||($[15]=[v("Import")])),_:1})]),_:1})),[[re],[fe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",Ap,[e(Ae,{ref_key:"tableRef",ref:u,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":$[13]||($[13]=q=>V.value=q),filter:S.search,loading:y.value,columns:h.value,rows:_.value,"rows-per-page-options":[10,25,50],style:We({height:l(r)}),onRequest:L,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:z,filter:oe})=>[t("div",Mp,[t("span",null,i(z)+" "+i(oe?" with term "+oe:""),1)])]),header:a(q=>[e(Oe,{props:q},{default:a(()=>[e(oa,{"auto-width":""}),(d(!0),w(H,null,De(q.cols,z=>(d(),U(oa,{key:z.name,props:q},{default:a(()=>[v(i(z.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(q=>[e(Oe,{props:q,class:qe([{inactive:!q.row.active},"cursor-pointer"]),onClick:z=>j(q)},{default:a(()=>[e(Y,{"auto-width":""},{default:a(()=>[e(E,{size:"sm",flat:"",round:"",dense:"",onClick:J(z=>q.expand=!q.expand,["stop"]),icon:q.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(Y,{key:"name",props:q,class:"wrap-column"},{default:a(()=>[v(i(q.row.name)+" ",1),l(m).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[q.row.type=="stocked"?(d(),w("div",Np,[e(C,{name:"cycle"}),v(" Stok: "+i(l(K)(q.row.stock))+" "+i(q.row.uom),1)])):k("",!0),n.value?(d(),w("div",Bp,[e(C,{name:"money"}),v(" Modal: Rp. "+i(l(K)(q.row.cost)),1)])):k("",!0),t("div",null,[e(C,{name:"sell"}),v(" Eceran: Rp. "+i(l(K)(q.row.price_1)),1)]),q.row.price_2!=0?(d(),w("div",zp,[e(C,{name:"sell"}),v(" Partai: Rp. "+i(l(K)(q.row.price_2)),1)])):k("",!0),q.row.price_3!=0?(d(),w("div",Fp,[e(C,{name:"sell"}),v(" Grosir: Rp. "+i(l(K)(q.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"stock",props:q,class:qe(["wrap-column",{"low-stock":q.row.type=="stocked"&&(Number(q.row.stock)==0||Number(q.row.stock)<Number(q.row.min_stock)),"over-stock":q.row.type=="stocked"&&Number(q.row.max_stock)&&Number(q.row.stock)>Number(q.row.max_stock)}])},{default:a(()=>[v(i(q.row.type=="stocked"?l(K)(q.row.stock)+" "+q.row.uom:"-"),1)]),_:2},1032,["props","class"]),(d(),U(Y,{key:"cost",props:q,class:"wrap-column"},{default:a(()=>[v(i(l(K)(q.row.cost)),1)]),_:2},1032,["props"])),e(Y,{key:"price_1",props:q,class:"wrap-column"},{default:a(()=>[v(i(l(K)(q.row.price_1)),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:q},{default:a(()=>[t("div",Lp,[O.$can("admin.product.add")||O.$can("admin.product.edit")||O.$can("admin.product.delete")?(d(),U(E,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:$[12]||($[12]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"175px"}},{default:a(()=>[O.$can("admin.product.add")?le((d(),U(ne,{key:0,clickable:"",onClick:J(z=>l(W).get(O.route("admin.product.duplicate",q.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>$[16]||($[16]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),O.$can("admin.product.edit")?le((d(),U(ne,{key:1,clickable:"",onClick:J(z=>l(W).get(O.route("admin.product.edit",q.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>$[17]||($[17]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),O.$can("admin.product.delete")?le((d(),U(ne,{key:2,onClick:J(z=>D(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>$[18]||($[18]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),le(e(Oe,{props:q},{default:a(()=>[e(Y,{colspan:"100%"},{default:a(()=>[q.row.barcode?(d(),w("div",Kp,[e(C,{class:"inline-icon",name:"barcode"}),v(" Barcode: "+i(q.row.barcode),1)])):k("",!0),q.row.category_id?(d(),w("div",Hp,[e(C,{name:"category",class:"inline-icon"}),v(" Kategori: "+i(q.row.category.name),1)])):k("",!0),O.$can("admin.product:view-supplier")?(d(),w(H,{key:2},[q.row.supplier_id?(d(),w("div",Wp,[e(C,{name:"local_shipping",class:"inline-icon"}),v(" Supplier: "+i(q.row.supplier.name),1)])):k("",!0)],64)):k("",!0),q.row.description?(d(),U(Se,{key:3,text:q.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),q.row.notes?(d(),U(Se,{key:4,text:q.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[po,q.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[g.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:a(()=>[t("div",Ep,[e(ue,{modelValue:S.type,"onUpdate:modelValue":[$[6]||($[6]=q=>S.type=q),T],class:"custom-select col-xs-4 col-sm-2",options:f,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(ue,{modelValue:S.stock_status,"onUpdate:modelValue":[$[7]||($[7]=q=>S.stock_status=q),T],class:"custom-select col-xs-4 col-sm-2",options:p,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ue,{modelValue:S.status,"onUpdate:modelValue":[$[8]||($[8]=q=>S.status=q),T],class:"custom-select col-xs-4 col-sm-2",options:b,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ue,{modelValue:S.category_id,"onUpdate:modelValue":[$[9]||($[9]=q=>S.category_id=q),T],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(R),"map-options":"",dense:"","emit-value":"",onFilter:l(I),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),O.$can("admin.product:view-supplier")?(d(),U(ue,{key:0,modelValue:S.supplier_id,"onUpdate:modelValue":[$[10]||($[10]=q=>S.supplier_id=q),T],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(N),"map-options":"",dense:"","emit-value":"",onFilter:l(M),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:S.search,"onUpdate:modelValue":$[11]||($[11]=q=>S.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Qp=Object.freeze(Object.defineProperty({__proto__:null,default:Yp},Symbol.toStringTag,{value:"Module"})),Jp={class:"q-gutter-sm"},Gp={class:"col col-md-8 q-pa-xs"},Xp={class:"col-12 col-md-6"},Zp={class:"col-12 col-md-6"},ef={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},tf={class:"q-gutter-sm"},Pl="Kirim Daftar Harga",af={__name:"SendPriceList",setup(c){const s=be(),u=P(""),o=P(null),r=X(()=>{var M;const N=new Map;return(M=s.props.products)==null||M.forEach(h=>{N.set(h.id,h)}),N}),n=X(()=>{var M;const N=new Map;return(M=s.props.customers)==null||M.filter(h=>h.phone&&h.phone.trim()!=="").forEach(h=>{N.set(h.id,h)}),N}),f=X(()=>{var N;return((N=s.props.customers)==null?void 0:N.map(M=>({value:M.id,label:M.name})))||[]}),b=X(()=>{var N;return((N=s.props.products)==null?void 0:N.map(M=>({value:M.id,label:`${M.name}`})))||[]}),p=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],m=P(b.value),g=P(f.value),_=Je({price_types:[],products:[],customers:[]});_.transform(N=>({customers:N.customers.map(M=>M.value),message:u.value}));const y=N=>N?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(N):"Rp. 0",S=N=>{const M=p.find(h=>h.value===N);return M?M.label:N},V=()=>{if(o.value){const N=o.value.$el.querySelector("textarea");if(N){N.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(M){console.error("Gagal menyalin teks ke clipboard:",M)}}}},x=X(()=>{var M,h;if(((M=_.products)==null?void 0:M.length)===0||((h=_.price_types)==null?void 0:h.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let N=`*DAFTAR HARGA TERBARU*
`;return N+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,N+=`------------------------------

`,(_.products||[]).forEach(j=>{const O=r.value.get(j.value);O&&(N+=`*${O.name}*
`,(_.price_types||[]).forEach($=>{const A=S($),F=O[$],q=O.uom||"pcs";F!=null&&F>0&&(N+=`- ${A}: *${y(F)}* / ${q}
`)}),N+=`
`)}),N+=`------------------------------
`,N+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",N});Be(x,N=>{u.value=N},{immediate:!0});const D=X(()=>(_.customers||[]).map(N=>n.value.get(N.value)).filter(N=>N&&N.phone)),L=N=>{const M=u.value;let h=N.startsWith("0")?"62"+N.substring(1):N;h=h.replace(/[^0-9]/g,"");const j=encodeURIComponent(M);return`https://wa.me/${h}?text=${j}`},T=(N,M)=>{if(N===""){M(()=>{m.value=b.value});return}M(()=>{const h=N.toLowerCase();m.value=b.value.filter(j=>j.label.toLowerCase().indexOf(h)>-1)})},R=(N,M)=>{if(N===""){M(()=>{g.value=f.value});return}M(()=>{const h=N.toLowerCase();g.value=f.value.filter(j=>j.label.toLowerCase().indexOf(h)>-1)})},I=()=>{var N,M,h;if(((N=_.price_types)==null?void 0:N.length)===0||((M=_.products)==null?void 0:M.length)===0||((h=_.customers)==null?void 0:h.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}_.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{Qe()},onFinish:()=>{_.clearErrors()}})};return(N,M)=>{const h=Q("i-head"),j=Q("authenticated-layout");return d(),w(H,null,[e(h,{title:Pl}),e(j,{"show-drawer-button":!0},{title:a(()=>[v(i(Pl))]),"left-button":a(()=>[t("div",Jp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:M[0]||(M[0]=O=>l(W).get(N.route("admin.product.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Gp,[e(Ge,{class:"row q-col-gutter-xs",onSubmit:J(I,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[t("div",Xp,[e(pe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[M[10]||(M[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),M[11]||(M[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ue,{modelValue:l(_).products,"onUpdate:modelValue":M[1]||(M[1]=O=>l(_).products=O),options:m.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.products,"error-message":l(_).errors.products,loading:l(_).processing,"use-input":"",onFilter:T,onClear:M[2]||(M[2]=O=>l(_).products=[]),"input-debounce":"0"},{"no-option":a(()=>[e(ne,null,{default:a(()=>[e(B,{class:"text-grey"},{default:a(()=>M[8]||(M[8]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ue,{modelValue:l(_).price_types,"onUpdate:modelValue":M[3]||(M[3]=O=>l(_).price_types=O),options:p,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.price_types,"error-message":l(_).errors.price_types,loading:l(_).processing,multiple:"","use-chips":"",clearable:"",onClear:M[4]||(M[4]=O=>l(_).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(ue,{modelValue:l(_).customers,"onUpdate:modelValue":M[5]||(M[5]=O=>l(_).customers=O),options:g.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.customers,"error-message":l(_).errors.customers,loading:l(_).processing,"use-input":"",onFilter:R,onClear:M[6]||(M[6]=O=>l(_).customers=[]),"input-debounce":"0"},{"no-option":a(()=>[e(ne,null,{default:a(()=>[e(B,{class:"text-grey"},{default:a(()=>M[9]||(M[9]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>{var O,$,A;return[e(E,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:l(_).processing||((O=l(_).products)==null?void 0:O.length)===0||(($=l(_).customers)==null?void 0:$.length)===0||((A=l(_).price_types)==null?void 0:A.length)===0,loading:l(_).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",Zp,[e(pe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(te,null,{default:a(()=>[t("div",ef,[M[12]||(M[12]=v(" Pratinjau Pesan (Teks Biasa) ")),e(E,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:V,disable:u.value.length===0},null,8,["disable"])]),e(ie,{modelValue:u.value,"onUpdate:modelValue":M[7]||(M[7]=O=>u.value=O),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),D.value.length>0?(d(),U(te,{key:0,class:"q-pt-none"},{default:a(()=>[M[14]||(M[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",tf,[(d(!0),w(H,null,De(D.value,O=>(d(),U(E,{key:O.id,label:`Kirim ke ${O.name}`,href:L(O.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(l(_).products.length>0&&l(_).price_types.length>0)},{default:a(()=>[O.phone?k("",!0):(d(),U(Pt,{key:0},{default:a(()=>M[13]||(M[13]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),M[15]||(M[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},lf=Object.freeze(Object.defineProperty({__proto__:null,default:af},Symbol.toStringTag,{value:"Module"})),of={class:"q-gutter-sm"},nf={class:"q-pa-xs"},sf={class:"col-12"},rf={class:"col-12"},df={class:"q-gutter-xs"},Rl="Kirim Daftar Harga",uf={__name:"SendPriceList2",setup(c){const s=be(),u=P(""),o=X(()=>{var N;const I=new Map;return(N=s.props.products)==null||N.forEach(M=>{I.set(M.id,M)}),I}),r=X(()=>{var N;const I=new Map;return(N=s.props.customers)==null||N.forEach(M=>{I.set(M.id,M)}),I}),n=X(()=>{var I;return((I=s.props.customers)==null?void 0:I.map(N=>({value:N.id,label:N.name})))||[]}),f=X(()=>{var I;return((I=s.props.products)==null?void 0:I.map(N=>({value:N.id,label:`${N.name} (${N.sku||N.code||"ID: "+N.id})`})))||[]}),b=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],p=P(f.value),m=P(n.value),g=Je({price_types:[],products:[],customers:[]});g.transform(I=>({...I,products:I.products.map(N=>N.value),customers:I.customers.map(N=>N.value)}));const _=I=>I?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(I):"Rp. 0",y=I=>{const N=b.find(M=>M.value===I);return N?N.label:I},S=X(()=>{if(g.products.length===0||g.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let I=`Daftar Harga Terbaru
`;return I+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,I+=`------------------------------

`,g.products.forEach(N=>{const M=o.value.get(N.value);M&&(I+=`*${M.name}*
`,g.price_types.forEach(h=>{const j=y(h),O=M[h],$=M.unit||"pcs";O!=null&&O!=0&&(I+=`- ${j}: ${_(O)} / ${$}
`)}),I+=`
`)}),I+=`------------------------------
`,I+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",I});Be(S,I=>{u.value=I},{immediate:!0});const V=X(()=>g.customers.map(I=>r.value.get(I.value)).filter(I=>I&&I.phone_number)),x=I=>{const N=u.value;let M=I.startsWith("0")?"62"+I.substring(1):I;M=M.replace(/[^0-9]/g,"");const h=encodeURIComponent(N);return`https://wa.me/${M}?text=${h}`},D=(I,N)=>{if(I===""){N(()=>{p.value=f.value});return}N(()=>{const M=I.toLowerCase();p.value=f.value.filter(h=>h.label.toLowerCase().indexOf(M)>-1)})},L=(I,N)=>{if(I===""){N(()=>{m.value=n.value});return}N(()=>{const M=I.toLowerCase();m.value=n.value.filter(h=>h.label.toLowerCase().indexOf(M)>-1)})},T=()=>{console.log("Scrolling to first error field...")},R=()=>{if(g.price_types.length===0||g.products.length===0||g.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}g.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{T()},onFinish:()=>{g.clearErrors()}})};return(I,N)=>{const M=Q("i-head"),h=Q("authenticated-layout");return d(),w(H,null,[e(M,{title:Rl}),e(h,{"show-drawer-button":!0},{title:a(()=>[v(i(Rl))]),"left-button":a(()=>[t("div",of,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:N[0]||(N[0]=j=>I.router.get(I.route("admin.product.index")))})])]),default:a(()=>[t("div",nf,[e(Ge,{class:"row q-col-gutter-md",onSubmit:J(R,["prevent"]),onValidationError:T},{default:a(()=>[t("div",sf,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[N[8]||(N[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),N[9]||(N[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ue,{modelValue:l(g).products,"onUpdate:modelValue":N[1]||(N[1]=j=>l(g).products=j),options:p.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.products,"error-message":l(g).errors.products,loading:l(g).processing,"use-input":"",onFilter:D,"input-debounce":"0"},{"no-option":a(()=>[e(ne,null,{default:a(()=>[e(B,{class:"text-grey"},{default:a(()=>N[6]||(N[6]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ue,{modelValue:l(g).price_types,"onUpdate:modelValue":N[2]||(N[2]=j=>l(g).price_types=j),options:b,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.price_types,"error-message":l(g).errors.price_types,loading:l(g).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(ue,{modelValue:l(g).customers,"onUpdate:modelValue":N[3]||(N[3]=j=>l(g).customers=j),options:m.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.customers,"error-message":l(g).errors.customers,loading:l(g).processing,"use-input":"",onFilter:L,"input-debounce":"0"},{"no-option":a(()=>[e(ne,null,{default:a(()=>[e(B,{class:"text-grey"},{default:a(()=>N[7]||(N[7]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:l(g).processing||l(g).products.length===0||l(g).customers.length===0||l(g).price_types.length===0,loading:l(g).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(g).processing,onClick:N[4]||(N[4]=j=>I.router.get(I.route("admin.product.index")))},null,8,["disable"])]),_:1}),I.$page.props.flash.success?(d(),U(Gt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(i(I.$page.props.flash.success),1)]),_:1})):k("",!0),I.$page.props.flash.error?(d(),U(Gt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(i(I.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",rf,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[N[10]||(N[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(ie,{modelValue:u.value,"onUpdate:modelValue":N[5]||(N[5]=j=>u.value=j),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),N[11]||(N[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),V.value.length>0?(d(),U(te,{key:0},{default:a(()=>[N[13]||(N[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",df,[(d(!0),w(H,null,De(V.value,j=>(d(),U(E,{key:j.id,label:`Kirim ke ${j.label}`,href:x(j.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:a(()=>[j.phone_number?k("",!0):(d(),U(Pt,{key:0},{default:a(()=>N[12]||(N[12]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href"]))),128))]),N[14]||(N[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},mf=Object.freeze(Object.defineProperty({__proto__:null,default:uf},Symbol.toStringTag,{value:"Module"})),cf={class:"q-gutter-sm"},pf={class:"col col-md-6 q-pa-xs"},Ol="Tambah Retur Pembelian",ff={__name:"Create",setup(c){const s=be(),u=Je({code:s.props.data.code}),o=()=>nt({form:u,url:route("admin.purchase-order-return.add")});return(r,n)=>{const f=Q("i-head"),b=Q("authenticated-layout");return d(),w(H,null,[e(f,{title:Ol}),e(b,null,{title:a(()=>[v(i(Ol))]),"left-button":a(()=>[t("div",cf,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>r.$inertia.get(r.route("admin.finance-account.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",pf,[e(Ge,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(ie,{autofocus:"",modelValue:l(u).code,"onUpdate:modelValue":n[1]||(n[1]=p=>l(u).code=p),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(u).errors.code,disable:l(u).processing,"error-message":l(u).errors.code,rules:[p=>p&&p.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(u).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(u).processing,onClick:n[2]||(n[2]=p=>l(W).get(r.route("admin.purchase-order-return.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},gf=Object.freeze(Object.defineProperty({__proto__:null,default:ff},Symbol.toStringTag,{value:"Module"})),bf={class:"column"},vf={class:"bg-grey-2 q-pa-xs"},_f={class:"text-subtitle1 text-bold text-grey-10"},yf={class:"text-caption text-grey-8"},kf={class:"col-12 col-sm-6"},wf={class:"full-width"},hf={key:1},$f={key:0},xf={key:1},Sf={class:"col-12 col-sm-6",align:"left"},Vf={class:"full-width"},qf={class:"full-width",style:{"border-collapse":"collapse"}},Cf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Tf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Pf={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Rf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Of={key:0},If={class:"col-12 col-sm-6"},Uf={class:"text-body2 text-grey-7 text-italic"},Df={class:"col-12 col-sm-6"},jf={class:"row justify-end q-gutter-y-xs"},Ef={class:"col-12 row justify-between"},Af={class:"text-subtitle2 text-bold"},Mf={class:"row justify-end q-gutter-y-xs"},Nf={class:"col-12 row justify-between"},Bf={class:"text-subtitle2 text-bold"},Uo={__name:"MainInfoTab",props:{data:Object},setup(c){const s=c;return(u,o)=>{const r=Q("i-link"),n=Q("my-link");return d(),w("div",bf,[e(te,{class:"q-pa-none"},{default:a(()=>[t("div",vf,[t("div",_f," RETUR #"+i(s.data.code),1),t("div",yf,i(l(_e)(s.data.datetime)),1)])]),_:1}),e(Pe),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",kf,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",wf,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),U(r,{key:0,href:u.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>{var f;return[e(C,{class:"inline-icon",name:"person"}),v(" "+i(s.data.supplier_name)+" ("+i((f=s.data.supplier)==null?void 0:f.code)+") ",1)]}),_:1},8,["href"])):(d(),w("div",hf,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(d(),w("tr",$f,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),v(" "+i(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(d(),w("tr",xf,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),v(" "+i(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",Sf,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Vf,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:u.route("admin.purchase-order.detail",{id:s.data.purchase_order_id})},{default:a(()=>[v(i(s.data.purchase_order_id?s.data.purchase_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(_e)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(s.data.refund_status_label),1)])])])])]),_:1}),e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("table",qf,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(H,null,De(s.data.details,f=>(d(),w("tr",{key:f.id},[t("td",Cf,[e(r,{href:u.route("admin.product.detail",f.product_id)},{default:a(()=>[v(i(f.product_name),1)]),_:2},1032,["href"])]),t("td",Tf,i(l(K)(f.cost)),1),t("td",Pf,i(f.quantity),1),t("td",Rf,i(l(K)(f.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),w("tr",Of,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(te,{class:"row",align:"left"},{default:a(()=>[t("div",If,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Uf,i(s.data.notes?s.data.notes:"-"),1)]),t("div",Df,[t("div",jf,[t("div",Ef,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Af,i(l(K)(s.data.grand_total)),1)])]),t("div",Mf,[t("div",Nf,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",Bf,i(l(K)(s.data.total_refunded)),1)])])])]),_:1})])}}},zf=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),Ff={key:0,class:"text-center q-mb-md text-grey-8"},Lf={class:"text-subtitle2 text-weight-medium"},Kf={class:"text-h5 text-center text-primary q-pb-md"},Hf={class:"text-center q-mt-md"},Wf={key:0,class:"text-h6 text-negative text-weight-bold"},Yf={key:1,class:"text-h6 text-positive text-weight-bold"},Do={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,r=be(),n=P(!1),f=P({method:"transfer",amount:u.total,notes:null}),b=r.props.data.supplier,p=X(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...r.props.accounts.map(V=>({label:V.name,value:V.id}))]),m=X(()=>u.remaining_refund),g=X(()=>{const V=f.value.amount||0;return V<=0?"Jumlah pembayaran harus lebih dari 0.":V>u.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=X(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const V={id:f.value.method,amount:f.value.amount,notes:f.value.notes};o("accepted",V),n.value=!1},S=()=>{f.value.amount=u.total,f.value.method="cash",f.value.notes=null};return(V,x)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":x[4]||(x[4]=D=>V.$emit("update:modelValue",D)),onBeforeShow:S},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>x[5]||(x[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",Ff,[t("div",Lf,[v(i(l(b).code)+" ",1),x[6]||(x[6]=t("br",null,null,-1)),v(" "+i(l(b).name)+" ",1),x[7]||(x[7]=t("br",null,null,-1))])])):k("",!0),t("div",Kf," Total: Rp. "+i(l(K)(c.total)),1),e(l(ue),{modelValue:f.value.method,"onUpdate:modelValue":x[0]||(x[0]=D=>f.value.method=D),options:p.value,label:"Kas Tujuan",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Ne,{modelValue:f.value.amount,"onUpdate:modelValue":x[1]||(x[1]=D=>f.value.amount=D),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:f.value.notes,"onUpdate:modelValue":x[2]||(x[2]=D=>f.value.notes=D),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Hf,[m.value>0?(d(),w("div",Wf," Sisa Refund: Rp. "+i(l(K)(m.value)),1)):(d(),w("div",Yf," Refund Lunas "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:x[3]||(x[3]=D=>V.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Qf=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),Jf={class:"column"},Gf={class:"row"},Xf={class:"full-width",style:{"border-collapse":"collapse"}},Zf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},eg={class:"row items-center q-gutter-x-sm"},tg={class:"text-weight-bold"},ag={class:"row items-center q-gutter-x-sm q-mt-xs"},lg={class:"text-caption text-grey-6"},og={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},ng={class:"q-mt-xs"},sg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},rg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ig={key:0},dg={class:"text-right q-pa-sm"},jo={__name:"RefundTab",props:{data:Object},setup(c){const s=c,u=he(),o=P(!1),r=()=>{o.value=!0},n=X(()=>s.data.remaining_refund),f=async p=>{const m={order_id:s.data.id,...p};u.loading.show({message:"Memproses pembayaran..."});try{const g=await Ue.post(route("admin.purchase-order-return.add-refund"),m);u.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,W.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(g){let _="Gagal memproses refund.";g.response&&g.response.data&&g.response.data.message?_=g.response.data.message:g.message&&(_=g.message),u.notify({message:_,color:"negative",icon:"error"})}finally{u.loading.hide()}},b=p=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Ue.post(route("admin.purchase-order-return.delete-refund",{id:p.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),W.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(m){let g="Gagal menghapus refund pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(p,m)=>{const g=Q("my-link");return d(),w(H,null,[t("div",Jf,[e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("div",Gf,[p.$can("admin.purchase-order-return.add-refund")?(d(),U(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=J(_=>r(),["stop"]))})):k("",!0)]),t("table",Xf,[m[5]||(m[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(H,null,De(s.data.payments,_=>(d(),w("tr",{key:_.id},[t("td",Zf,[t("div",eg,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",tg,i(_.code),1)]),t("div",ag,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",lg,i(l(_e)(_.created_at)),1)]),(_.type==="transfer"||_.type==="cash")&&_.account?(d(),w("div",og,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),e(g,{href:p.route("admin.finance-account.detail",_.account.id),target:"_blank"},{default:a(()=>[v(i(_.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",ng,[e(st,{label:p.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[_.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",sg,i(l(K)(_.amount)),1),t("td",rg,[p.$can("admin.purchase-order-return.delete-refund")?(d(),U(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(_)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",ig,m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund (Rp.)",-1)),t("th",dg,i(l(K)(s.data.total_refunded)),1),m[4]||(m[4]=t("th",null,null,-1))])])])]),_:1})]),e(Do,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=_=>o.value=_),total:n.value,supplier:s.data.supplier,onAccepted:f},null,8,["modelValue","total","supplier"])],64)}}},ug=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),mg={class:"q-gutter-sm"},cg={class:"col col-lg-6 q-pa-xs",align:"center"},Il="Retur Pembelian",pg={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),u=be(),o=u.props.data,r=P(s.get("preview")||!1),f=P(s.get("tab")||"main-info");xe(()=>{ft(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.purchase-order-return.print",{id:u.props.data.id,size:p}),"_self")};return(p,m)=>{const g=Q("i-head"),_=Q("authenticated-layout");return d(),w(H,null,[e(g,{title:Il}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,i(Il))])]),"left-button":a(()=>[t("div",mg,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>l(W).get(p.route("admin.purchase-order-return.index")))})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=y=>b("a4"))}),r.value?k("",!0):(d(),U(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=y=>l(W).get(p.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",cg,[e(pe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(qt,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(rt,{name:"main-info",label:"Info Retur"}),r.value?k("",!0):(d(),U(rt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Ct,{modelValue:f.value,"onUpdate:modelValue":m[5]||(m[5]=y=>f.value=y),animated:""},{default:a(()=>[e(it,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(Uo,{data:l(o)},null,8,["data"])]),_:1}),e(it,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(jo,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},fg=Object.freeze(Object.defineProperty({__proto__:null,default:pg},Symbol.toStringTag,{value:"Module"})),gg={class:"text-weight-medium wrap-column"},bg={class:"text-caption text-grey-6 elipsis"},vg={class:"column items-end"},_g={class:"text-caption text-grey-6 text-italic"},Eo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=he(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(r,n)=>(d(),U(Ae,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:We({height:l(u)})},{header:a(f=>[e(Oe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(H,null,De(f.cols,b=>(d(),U(oa,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(i(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Oe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:f,class:"text-left"},{default:a(()=>[t("div",gg,i(f.row.product_name),1),t("div",bg,i(f.row.product_barcode),1),f.row.notes?(d(),U(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal",props:f,class:"text-right"},{default:a(()=>[t("div",vg,[t("div",null,i(l(K)(f.row.subtotal_cost)),1),t("div",_g,i(l(K)(f.row.quantity))+" x Rp. "+i(l(K)(f.row.cost)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>r.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>r.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},yg=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),kg={class:"row items-center no-wrap"},wg={class:"col-auto"},Ao={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,r=u,n=()=>{r("save")},f=X(()=>o.item.quantity*o.item.cost),b=_=>{_.stopPropagation(),_.preventDefault()},p=_=>{o.modelValue&&(_.key==="Enter"?(n(),b(_)):_.key==="Escape"&&(r("update:modelValue",!1),b(_)))};xe(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item});const g=()=>{};return(_,y)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":y[6]||(y[6]=S=>_.$emit("update:modelValue",S)),onBeforeShow:g},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",kg,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",wg,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=S=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(ie,{modelValue:c.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=S=>c.item.product_name=S),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ne,{modelValue:c.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=S=>c.item.quantity=S),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Ne,{modelValue:c.item.cost,"onUpdate:modelValue":y[3]||(y[3]=S=>c.item.cost=S),label:"Modal / Harga Beli (Rp)","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ne,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=S=>f.value=S),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ie,{modelValue:c.item.notes,"onUpdate:modelValue":y[5]||(y[5]=S=>c.item.notes=S),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[le(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[fe]]),e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},hg=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"}));function $g(){const c=P(new Date);let s=null;const u=()=>{c.value=new Date};return xe(()=>{s=setInterval(u,1e3)}),wt(()=>{s&&clearInterval(s)}),{currentDateTime:c}}const xg={class:"text-grey-8"},$a={__name:"DigitalClock",setup(c){const{currentDateTime:s}=$g();return(u,o)=>(d(),w("div",xg,i(l(_e)(l(s))),1))}},Sg={key:0,class:"q-select__selected-item"},Mo={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(c,{expose:s,emit:u}){const o=P(null),r=c,n=u,f=P([]);let b=null;const p=P(r.modelValue);xe(()=>{r.initialData&&(p.value=r.initialData)}),Be(p,_=>{n("update:modelValue",_),n("supplierSelected",_)}),Be(()=>r.modelValue,_=>{p.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const g=(_,y)=>{if(_.length<r.minLength){y(()=>{f.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Ue.get(`/web-api/suppliers?q=${_}`).then(S=>{y(()=>{f.value=S.data.data})}).catch(S=>{console.error("Gagal mengambil data pemasok:",S),y(()=>{f.value=[]})})},100)};return(_,y)=>(d(),U(ue,{class:qe(c.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=S=>p.value=S),"use-input":"","input-debounce":"500",label:c.label,options:f.value,onFilter:g,clearable:"",error:c.error,behavior:"menu","error-message":c.errorMessage,disable:c.disable,"hide-bottom-space":"",outlined:c.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a(S=>[e(ne,La(fo(S.itemProps)),{default:a(()=>[e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>[v(i(S.opt.name)+" ("+i(S.opt.code)+")",1)]),_:2},1024),S.opt.phone_1?(d(),U(ve,{key:0,class:"text-grey-8 q-ml-sm q-mt-xs"},{default:a(()=>[e(C,{name:"phone",class:"inline-icon"}),v(i(S.opt.phone_1),1)]),_:2},1024)):k("",!0),S.opt.address?(d(),U(ve,{key:1,class:"text-grey-8 q-ml-sm"},{default:a(()=>[e(C,{name:"home_pin",class:"inline-icon"}),v(i(S.opt.address),1)]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1040)]),"selected-item":a(S=>[S.opt?(d(),w("div",Sg,i(S.opt.name)+" ("+i(S.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Vg={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(u,o)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=r=>u.$emit("update:modelValue",r))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[le(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},No=_t(Vg,[["__scopeId","data-v-abc5074e"]]),qg=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"}));function xa(c){const s=P(!1),u=()=>{const n=c.value||document.documentElement;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},r=()=>{s.value?o():u()};return gs(()=>{const n=()=>{s.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("mozfullscreenchange",n),document.removeEventListener("MSFullscreenChange",n)}}),{isFullscreen:s,requestFullscreen:u,exitFullscreen:o,toggleFullscreen:r}}const Cg={class:"row items-center no-wrap"},Tg={class:"col text-subtite text-bold text-grey-8"},Pg={class:"col-auto"},Bo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,r=u,n=()=>{r("save")},f=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(r("update:modelValue",!1),f(m)))};return xe(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",Cg,[t("div",Tg," Edit "+i(c.data.code),1),t("div",Pg,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(Kt,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(ie,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ie,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[le(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[fe]]),le(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Rg=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"})),Og={class:"row items-center no-wrap"},Ig={class:"col-auto"},Ug={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Dg={key:0},Sa={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1},priceType:{type:String,require:!1,default:"price_1"}},emits:["update:modelValue","product-selected"],setup(c,{emit:s}){const u=he(),o=c,r=P(!1),n=P(o.showCost),f=s,b=P(null),p=P([]),m=P(!0),g=P(-1),_=je({search:"",status:"active",...Ke()}),y=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});[...ze(window.CONSTANTS.PRODUCT_PRICE_TYPES)];const S=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_1.replace("Harga ","H "),field:"price_1",align:"right"},{name:"price_2",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_2.replace("Harga ","H "),field:"price_2",align:"right"},{name:"price_3",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_3.replace("Harga ","H "),field:"price_3",align:"right"}],V=X(()=>{if(r.value)return S;const N=S.filter(M=>M.name!=="cost");return u.screen.gt.sm?N:N.filter(M=>M.name==="name"||M.name==="stock")});xe(()=>{D()});const x=()=>{if(b.value&&g.value!==-1){const N=(y.value.page-1)*y.value.rowsPerPage,M=g.value-N;ft(()=>{if(M>=0&&M<p.value.length&&b.value.scrollTo){const h=b.value.$el.querySelector(".selected-row");h&&h.scrollIntoView({behavior:"smooth",block:"nearest"})}})}},D=()=>{o.modelValue!==!1&&L()},L=(N=null)=>{m.value=!0;const M=g.value;He({pagination:y,filter:_,props:N,rows:p,url:route("admin.product.data"),loading:m,tableRef:b,onSuccess:()=>{p.value.length>0?((M===0||M===-1)&&(g.value=0),ft(()=>{x()})):g.value=-1}})},T=()=>{D()},R=N=>{f("product-selected",N),setTimeout(()=>{f("update:modelValue",!1)},100)},I=N=>{if(!o.modelValue){alert("none");return}const M=p.value.length;if(M===0)return;const h=(y.value.page-1)*y.value.rowsPerPage,j=h+M-1;if(N.key==="ArrowDown")N.preventDefault(),g.value<j?(g.value=g.value+1,x()):g.value===j&&I({key:"ArrowRight",preventDefault:()=>{}});else if(N.key==="ArrowUp")N.preventDefault(),g.value>h?(g.value=g.value-1,x()):g.value===h&&h>0&&I({key:"ArrowLeft",preventDefault:()=>{}});else if(N.key==="Enter"&&g.value!==-1){N.preventDefault(),N.preventDefault();const O=(y.value.page-1)*y.value.rowsPerPage,$=g.value-O;$>=0&&$<M?R(p.value[$]):console.warn("Kesalahan: selectedIndex global di luar batas halaman saat ini.")}else if(g.value!==-1){if(N.key==="ArrowRight"){N.preventDefault();const O=y.value.page+1;O<=Math.ceil(y.value.rowsNumber/y.value.rowsPerPage)&&(y.value.page=O,g.value=(O-1)*y.value.rowsPerPage,b.value.requestServerInteraction())}else if(N.key==="ArrowLeft"){N.preventDefault();const O=y.value.page-1;O>=1&&(y.value.page=O,g.value=(O-1)*y.value.rowsPerPage,b.value.requestServerInteraction())}}};return Be(()=>o.modelValue,(N,M)=>{M===!0&&N===!1&&(_.search=""),N===!0&&L()}),(N,M)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":M[4]||(M[4]=h=>N.$emit("update:modelValue",h)),maximized:l(u).screen.lt.sm},{default:a(()=>[e(pe,{class:"column fit",tabindex:"0",onKeydown:I,ref:"cardRef"},{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",Og,[M[5]||(M[5]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",Ig,[e(E,{flat:"",round:"",size:"sm",icon:"close",onClick:M[0]||(M[0]=h=>N.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:qe(["q-py-sm",l(u).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(ie,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":[M[1]||(M[1]=h=>_.search=h),T],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"]),n.value?(d(),U(ua,{key:0,modelValue:r.value,"onUpdate:modelValue":M[2]||(M[2]=h=>r.value=h),label:"Tampilkan Modal",style:{"margin-left":"-10px"}},null,8,["modelValue"])):k("",!0)]),_:1},8,["class"]),e(te,{class:qe(["q-py-xs col",l(u).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(Ae,{ref_key:"tableRef",ref:b,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":M[3]||(M[3]=h=>y.value=h),filter:_.search,loading:m.value,columns:V.value,rows:p.value,"rows-per-page-options":[10,25,50],onRequest:L,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":a(({icon:h,message:j,filter:O})=>[t("div",Ug,[t("span",null,i(j),1)])]),body:a(h=>[e(Oe,{tabindex:"0",props:h,class:qe([{inactive:["stocked","raw_materials"].includes(h.row.type)&&h.row.stock<=0,"selected-row":g.value===h.rowIndex},"cursor-pointer"]),onClick:j=>R(h.row),onKeydown:[Jt(J(j=>R(h.row),["prevent","stop"]),["enter"]),Jt(J(j=>R(h.row),["prevent"]),["space"])]},{default:a(()=>[e(Y,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[e(Se,{text:h.row.name},null,8,["text"]),h.row.description?(d(),U(Se,{key:0,text:h.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),l(u).screen.lt.md?(d(),w(H,{key:1},[t("div",null," Stok: "+i(h.row.type=="stocked"?l(K)(h.row.stock)+" "+h.row.uom:"-"),1),r.value?(d(),w("div",Dg," Modal: Rp. "+i(l(K)(h.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+i(l(K)(h.row.price_1)),1),t("div",null,"Harga 2: Rp. "+i(l(K)(h.row.price_1)),1),t("div",null,"Harga 3: Rp. "+i(l(K)(h.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"stock",props:h,class:"text-right"},{default:a(()=>[v(i(h.row.type=="stocked"?l(K)(h.row.stock)+" "+h.row.uom:"-"),1)]),_:2},1032,["props"]),e(Y,{key:"cost",props:h,class:"wrap-column text-right"},{default:a(()=>[v(i(l(K)(h.row.cost)),1)]),_:2},1032,["props"]),e(Y,{key:"price_1",props:h,class:"wrap-column text-right"},{default:a(()=>[v(i(l(K)(h.row.price_1)),1)]),_:2},1032,["props"]),e(Y,{key:"price_2",props:h,class:"wrap-column text-right"},{default:a(()=>[v(i(l(K)(h.row.price_2)),1)]),_:2},1032,["props"]),e(Y,{key:"price_3",props:h,class:"wrap-column text-right"},{default:a(()=>[v(i(l(K)(h.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},jg=Fa({__name:"BarcodeInputEditor",props:{modelValue:{}},emits:["update:modelValue","scan-success","send","search"],setup(c,{expose:s,emit:u}){const o=P(null);s({focus:()=>{o.value&&o.value.focus()},qInput:o});const n=c,f=u,b=he(),p=P(n.modelValue);Be(()=>n.modelValue,h=>{h!==p.value&&(p.value=h)});const m=h=>{p.value=h,f("update:modelValue",h)},g=P(null),_=P(!1),y=P(!1);let S=null,V=null,x=null;xe(async()=>{if("BarcodeDetector"in window){_.value=!0;try{const h=await window.BarcodeDetector.getSupportedFormats();V=new BarcodeDetector({formats:h})}catch(h){console.warn("BarcodeDetector init error:",h),_.value=!1}}}),na(()=>T());function D(){if(!_.value){b.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}y.value?T():L()}async function L(){if(V)try{y.value=!0,S=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),g.value&&(g.value.srcObject=S),await new Promise(h=>setTimeout(h,300)),N()}catch(h){y.value=!1,b.notify({type:"negative",message:`Gagal akses kamera: ${h.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function T(){y.value=!1,x&&cancelAnimationFrame(x),S&&(S.getTracks().forEach(h=>h.stop()),S=null)}async function R(){f("search")}async function I(){f("send")}async function N(){var h;if(!(!g.value||!V||!y.value)){try{const j=await V.detect(g.value);if(j.length>0){const O=j[0].rawValue;p.value+=O,f("update:modelValue",p.value),f("scan-success",p.value),(h=navigator.vibrate)==null||h.call(navigator,100),b.notify({type:"positive",message:`Barcode terdeteksi: ${p.value}`,timeout:1e3}),T();return}}catch(j){console.warn("Detection error:",j)}x=requestAnimationFrame(N)}}const M=X(()=>{var h;return _.value&&!y.value&&!p.value?!0:(h=p.value)!=null&&h.endsWith("*")?_.value:!1});return(h,j)=>(d(),w("div",null,[e(ie,Aa({ref_key:"qInputInternalRef",ref:o},h.$attrs,{"model-value":p.value,"onUpdate:modelValue":m,disable:y.value||h.$attrs.disable,loading:y.value||h.$attrs.loading,clearable:p.value&&!p.value.endsWith("*")}),{prepend:a(()=>[e(C,{name:"search",onClick:R,class:"cursor-pointer"})]),append:a(()=>[M.value?(d(),U(C,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:D},{default:a(()=>[e(Pt,null,{default:a(()=>j[1]||(j[1]=[v("Scan Barcode")])),_:1})]),_:1})):k("",!0),M.value?y.value?(d(),U(co,{key:2,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0):(d(),U(C,{key:1,name:"send",onClick:I,class:"cursor-pointer q-ml-md"}))]),_:1},16,["model-value","disable","loading","clearable"]),e(lt,{modelValue:y.value,"onUpdate:modelValue":j[0]||(j[0]=O=>y.value=O),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(pe,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(te,{class:"text-center q-pb-none"},{default:a(()=>j[2]||(j[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(te,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:g,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(tt,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(E,{label:"Batal Scan",color:"negative",icon:"close",onClick:T})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Va=_t(jg,[["__scopeId","data-v-f929c752"]]),Eg={class:"row text-grey-9 q-pt-sm"},Ag={key:0,class:"q-ml-sm"},Mg={key:1,class:"q-ml-sm"},Ng={key:2,class:"q-ml-sm text-grey-9"},Bg={class:"row text-grey-9"},zg={key:1,class:"q-ml-sm"},Fg={key:0},qa={__name:"PartyInfo",props:{party:{type:Object,required:!0},isValidWalletBalance:{type:Boolean,default:!0}},setup(c){const s=o=>o==null?"text-grey-9":o>0?"text-red":"text-green",u=o=>o==null?"Rp. 0":`Rp. ${K(o)}`;return(o,r)=>(d(),w("div",null,[t("div",Eg,[c.party.phone?(d(),w("div",Ag,[e(C,{name:"phone",class:"inline-icon"}),v(" "+i(c.party.phone),1)])):k("",!0),c.party.phone_1?(d(),w("div",Mg,[e(C,{name:"phone",class:"inline-icon"}),v(" "+i(c.party.phone_1),1)])):k("",!0),c.party.address?(d(),w("div",Ng,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+i(c.party.address),1)])):k("",!0)]),t("div",Bg,[c.party.wallet_balance?(d(),w("div",{key:0,class:qe(["q-ml-sm",s(c.party.wallet_balance)])},[e(C,{name:"wallet",class:"inline-icon"}),v(" "+i(u(c.party.wallet_balance)),1)],2)):k("",!0),c.party.balance&&c.party.balance!=0?(d(),w("div",zg,[c.party.wallet_balance?(d(),w("span",Fg,"")):k("",!0),r[0]||(r[0]=v("  ")),t("span",{class:qe(s(c.party.balance))},[e(C,{name:"balance",class:"inline-icon"}),v(" "+i(u(c.party.balance)),1)],2)])):k("",!0)])]))}},Lg={class:"q-gutter-sm"},Kg={class:"row items-center"},Hg={class:"text-weight-bold"},Wg={class:"row q-col-gutter-none full-width"},Yg={class:"col-sm-6 col-12 col"},Qg={class:"row full-width q-pa-sm"},Jg={class:"col-sm-6 col-12"},Gg={class:"row q-ml-sm items-end"},Xg={class:"row col grow"},Zg={class:"col-12 q-px-sm column"},e1={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},t1={key:0,class:"col"},a1={class:"text-caption text-grey-6 q-mt-xs"},l1={key:0,class:"text-caption text-grey-8 q-mt-xs"},o1={class:"text-italic"},n1={key:1,class:"col"},s1={class:"text-grey-8"},r1={class:"col"},i1={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},d1={class:"text-h4 text-weight-bold"},u1={class:"row q-px-sm q-col-gutter-sm q-py-xs"},m1={class:"col"},c1={__name:"Editor",setup(c){const s=he(),u=be(),o=P(!0),r=P(null),n=P(null),f=P(null),b=P(!1),p=P(null),m=P(null),{isFullscreen:g,toggleFullscreen:_}=xa(m),y="Retur #"+u.props.data.code,S=P(u.props.data.supplier),V=P(""),x=P(!1),D=P(!1),L=P(!1),T=P(!1),R=P(null),I=je({id:u.props.data.id,code:u.props.data.code,supplier_id:u.props.data.supplier_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),N=X(()=>I.items.reduce((ke,Z)=>ke+Z.cost*Z.quantity,0)),M=()=>{var ke;_(),g.value||(ke=p==null?void 0:p.value)==null||ke.hideDrawer()},h=ke=>isNaN(ke)||ke<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,j=ke=>isNaN(ke)||ke<0?(gt("Harga tidak valid.","top"),!1):!0,O=ke=>!ke||ke.length==0?(gt("Barcode tidak valid.","top"),!1):!0,$=ke=>{var Z;(Z=V.value)!=null&&Z.endsWith("*")?V.value+=ke.name:V.value=ke.name},A=async()=>{if(x.value)return;const ke=V.value.trim();if(ke.length===0){D.value=!0;return}const Z=ke.split("*");let ae=1,we="",se=null;if(Z.length===1)we=Z[0];else if(Z.length<=3)ae=parseInt(Z[0]),we=Z[1],Z.length===3&&(se=parseFloat(Z[2]));else{gt("Input tidak valid.","top");return}if(we.length===0){D.value=!0;return}!O(we)&&!h(ae)&&!j(se)||(x.value=!0,await Ue.post(route("admin.purchase-order-return.add-item"),{order_id:I.id,product_code:we,qty:ae,price:se,merge:o.value}).then(G=>{const me=G.data.data.item;let ee=-1;G.data.data.mergeItem&&(ee=I.items.findIndex(ge=>ge.id===me.id)),ee===-1?I.items.push(me):I.items[ee]=me,V.value="",se!==null&&se!==parseFloat(me.price)&&gt("Harga tidak dapat diubah!","top")}).catch(G=>{var me,ee;ct((ee=(me=G.response)==null?void 0:me.data)==null?void 0:ee.message,"top"),console.error("Gagal mengambil data produk:",G)}),x.value=!1,ft(()=>{var G;(G=r.value)==null||G.focus()}))},F=ke=>{R.value=Object.create(ke),L.value=!0},q=ke=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ke.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{x.value=!0,Ue.post(route("admin.purchase-order-return.remove-item"),{id:ke.id}).then(()=>{const Z=I.items.findIndex(ae=>ae.id===ke.id);Z!==-1&&(I.items.splice(Z,1)[0],pt("Item telah dihapus","top"))}).catch(Z=>{var ae,we;ct(((we=(ae=Z==null?void 0:Z.response)==null?void 0:ae.data)==null?void 0:we.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(Z)}).finally(()=>{x.value=!1})})},z=()=>{x.value=!0;const ke=n.value.getCurrentItem(),Z={id:ke.id,qty:ke.quantity,cost:ke.cost};ke.notes&&(Z.notes=ke.notes),Ue.post(route("admin.purchase-order-return.update-item"),Z).then(ae=>{const we=ae.data.data,se=I.items.findIndex(G=>G.id===we.id);se!==-1&&(I.items[se]=we,pt("Item telah diperbarui","top")),L.value=!1}).catch(ae=>{var we,se;ct(((se=(we=ae==null?void 0:ae.response)==null?void 0:we.data)==null?void 0:se.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ae)}).finally(()=>{x.value=!1})};xe(()=>{const ke=Z=>{b.value||L.value||D.value||T.value||(Z.key==="F1"?(Z.preventDefault(),b.value=!0):Z.key==="F2"?(Z.preventDefault(),f.value.focus()):Z.key==="F3"?(Z.preventDefault(),r.value.focus()):Z.key==="F4"?(Z.preventDefault(),o.value=!o.value):Z.key==="F10"||Z.ctrlKey&&Z.key==="Enter"?(Z.preventDefault(),ce()):Z.key==="F11"?(Z.preventDefault(),M()):(Z.key==="F5"||Z.key==="F6"||Z.key==="F7"||Z.key==="F12")&&Z.preventDefault())};document.addEventListener("keydown",ke),wt(()=>{document.removeEventListener("keydown",ke)}),ft(()=>{var Z;(Z=p==null?void 0:p.value)==null||Z.hideDrawer()})});const oe=async()=>{x.value=!0;const ke={id:I.id,supplier_id:I.supplier_id??null,datetime:aa(I.datetime),notes:I.notes};await Ue.post(route("admin.purchase-order-return.update"),ke).then(Z=>{const ae=Z.data.data.id;I.supplier_id=ae.supplier_id}).catch(Z=>{var ae,we;ct(((we=(ae=Z==null?void 0:Z.response)==null?void 0:ae.data)==null?void 0:we.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Z)}).finally(()=>{x.value=!1})},ce=ke=>{if(I.items.length===0){pt("Item masih kosong","top");return}xt.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{x.value=!0,Ue.post(route("admin.purchase-order-return.close",{id:I.id})).then(Z=>{pt("Transaksi selesai"),W.get(route("admin.purchase-order-return.detail",{id:I.id}))}).catch(Z=>{var ae,we;ct((we=(ae=Z.response)==null?void 0:ae.data)==null?void 0:we.message),console.error(Z)}).finally(()=>{x.value=!1})})},de=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.purchase-order-return.cancel",{id:I.id}),{id:I.id}).then(()=>{pt("Transaksi telah dibatalkan."),W.visit(route("admin.purchase-order-return.detail",{id:I.id}))}).catch(ke=>{var ae,we;const Z=((we=(ae=ke.response)==null?void 0:ae.data)==null?void 0:we.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:Z,color:"warning",position:"bottom"}),console.error(ke)})})},Ie=()=>{window.open(route("admin.purchase-order-return.detail",{id:I.id})+"?preview=1","_blank")};return X(()=>S.value?S.value.wallet_balance>=N.value:!0),(ke,Z)=>{const ae=Q("i-head"),we=Q("authenticated-layout");return d(),w(H,null,[e(ae,{title:y}),e(we,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[v(i(y))]),"left-button":a(()=>[t("div",Lg,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:Z[0]||(Z[0]=se=>l(W).get(ke.route("admin.purchase-order-return.index")))})])]),"right-button":a(()=>[t("div",Kg,[l(s).screen.gt.sm?(d(),w(H,{key:0},[t("div",Hg,i(l(u).props.auth.user.username),1),Z[21]||(Z[21]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e($a)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",Wg,[t("div",Yg,[t("div",Qg,[e(Mo,{ref_key:"supplierAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:S.value,"onUpdate:modelValue":Z[2]||(Z[2]=se=>S.value=se),label:"Pemasok",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),S.value?(d(),U(qa,{key:0,party:S.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",Jg,[e(Va,{ref_key:"userInputRef",ref:r,modelValue:V.value,"onUpdate:modelValue":Z[3]||(Z[3]=se=>V.value=se),onKeyup:Z[4]||(Z[4]=Jt(J(se=>A(),["prevent"]),["enter"])),onScanSuccess:Z[5]||(Z[5]=se=>A()),onSend:Z[6]||(Z[6]=se=>A()),onSearch:Z[7]||(Z[7]=se=>D.value=!0),loading:x.value,disable:x.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",Gg,[e(Tt,{class:"col",modelValue:o.value,"onUpdate:modelValue":Z[8]||(Z[8]=se=>o.value=se),label:"Gabungkan item",disable:x.value},null,8,["modelValue","disable"])])])]),t("div",Xg,[t("div",Zg,[e(Eo,{items:I.items,onUpdateQuantity:Z[9]||(Z[9]=({id:se,value:G})=>ke.updateQuantity(se,G)),onRemoveItem:q,onEditItem:F,"is-processing":x.value},null,8,["items","is-processing"])])]),t("div",e1,[l(s).screen.gt.sm?(d(),w("div",t1,[t("div",a1,i(I.items.length)+" item(s) ",1),I.notes?(d(),w("div",l1,[Z[22]||(Z[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",o1,[e(Se,{text:I.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",n1,[t("div",s1,[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(i(l(u).props.data.purchase_order.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(i(l(_e)(I.datetime)),1)])])])):k("",!0),t("div",r1,[t("div",i1,[Z[24]||(Z[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",d1,[Z[23]||(Z[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+i(l(K)(N.value)),1)])])])]),t("div",u1,[t("div",m1,[e(E,{class:"full-width",label:"Selesai",color:"primary",icon:"payment",onClick:Z[10]||(Z[10]=se=>ce()),disable:!ke.$can("admin.purchase-order-return.close")||x.value||I.items.length===0||I.status!=="draft",loading:x.value},null,8,["disable","loading"])]),t("div",null,[e(E,{icon:"more_vert",color:"grey",onClick:Z[14]||(Z[14]=J(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[le((d(),U(ne,{clickable:"",onClick:Z[11]||(Z[11]=J(se=>T.value=!0,["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>Z[25]||(Z[25]=[v("Edit Rincian")])),_:1})]),_:1})),[[re],[fe]]),le((d(),U(ne,{clickable:"",onClick:Z[12]||(Z[12]=J(se=>Ie(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(B,null,{default:a(()=>Z[26]||(Z[26]=[v("Pratinjau")])),_:1})]),_:1})),[[re],[fe]]),le((d(),U(ne,{clickable:"",onClick:Z[13]||(Z[13]=J(se=>de(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(B,{class:"text-negative"},{default:a(()=>Z[27]||(Z[27]=[v(" Batalkan ")])),_:1})]),_:1})),[[re],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Ao,{ref_key:"itemEditorRef",ref:n,modelValue:L.value,"onUpdate:modelValue":Z[15]||(Z[15]=se=>L.value=se),item:R.value,onSave:Z[16]||(Z[16]=se=>z()),"is-processing":x.value},null,8,["modelValue","item","is-processing"]),e(Sa,{modelValue:D.value,"onUpdate:modelValue":Z[17]||(Z[17]=se=>D.value=se),onProductSelected:$},null,8,["modelValue"]),e(Bo,{modelValue:T.value,"onUpdate:modelValue":Z[18]||(Z[18]=se=>T.value=se),data:I,onSave:Z[19]||(Z[19]=se=>oe()),"is-processing":x.value},null,8,["modelValue","data","is-processing"]),e(No,{modelValue:b.value,"onUpdate:modelValue":Z[20]||(Z[20]=se=>b.value=se)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},p1=Object.freeze(Object.defineProperty({__proto__:null,default:c1},Symbol.toStringTag,{value:"Module"})),f1={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},g1={class:"q-pa-xs"},b1={class:"full-width row flex-center text-grey-8 q-gutter-sm"},v1={key:0},_1={key:1},y1={key:2},k1={key:3},w1={key:0},h1={key:0},$1={key:1},x1={class:"flex justify-end"},Ul="Retur Pembelian",S1={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=Ft(),m=Lt(),g=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Ot(p-2,p-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...It()],y=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES)],S=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES)],V=je({search:"",year:p,month:m,status:"all",refund_status:"all",...Ke()}),x=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),D=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{M()});const L=O=>{if(O.status=="draft"){T(O);return}R(O)},T=O=>{W.get(route("admin.purchase-order-return.edit",O.id))},R=O=>{W.get(route("admin.purchase-order-return.detail",O.id))},I=O=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.purchase-order-return.cancel",{id:O.id}),{id:O.id}).then($=>{const A=$.data.data,F=o.value.findIndex(q=>q.id===A.id);if(F===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[F].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var F,q;const A=((q=(F=$.response)==null?void 0:F.data)==null?void 0:q.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:A,color:"warning",position:"bottom"}),console.error($)})})},N=O=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${O.code}?`,url:route("admin.purchase-order-return.delete",O.id),fetchItemsCallback:M,loading:r}),M=(O=null)=>{He({pagination:x,filter:V,props:O,rows:o,url:route("admin.purchase-order-return.data"),loading:r,tableRef:n})},h=()=>{M()},j=X(()=>s.screen.gt.sm?D:D.filter(O=>O.name==="code"||O.name==="action"));return Be(()=>V.year,O=>{O===null&&(V.month=null)}),(O,$)=>{const A=Q("i-head"),F=Q("authenticated-layout");return d(),w(H,null,[e(A,{title:Ul}),e(F,null,Fe({title:a(()=>[v(i(Ul))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=q=>u.value=!u.value)},null,8,["icon"]),O.$can("admin.purchase-order-return.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=q=>l(W).get(O.route("admin.purchase-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",g1,[e(Ae,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":$[10]||($[10]=q=>x.value=q),filter:V.search,loading:r.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:We({height:l(b)}),onRequest:M,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:z,filter:oe})=>[t("div",b1,[t("span",null,i(z)+" "+i(oe?" with term "+oe:""),1)])]),body:a(q=>[e(Oe,{props:q,class:"cursor-pointer",onClick:J(z=>L(q.row),["prevent"])},{default:a(()=>[e(Y,{key:"code",props:q,class:"wrap-column"},{default:a(()=>{var z,oe,ce;return[t("div",null,[e(C,{name:"tag"}),v(" "+i(q.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(i(l(_e)(q.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[q.row.cashier?(d(),w("div",v1,[e(C,{name:"person",class:"inline-icon"}),v(" Kasir: "+i((z=q.row.cashier)==null?void 0:z.username),1)])):k("",!0),q.row.cashier_session?(d(),w("div",_1,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+i((ce=(oe=q.row.cashier_session)==null?void 0:oe.cashier_terminal)==null?void 0:ce.name),1)])):k("",!0),q.row.supplier?(d(),w("div",y1,[e(C,{name:"person",class:"inline-icon"}),e(ya,{href:O.route("admin.supplier.detail",{id:q.row.supplier.id}),onClick:$[7]||($[7]=J(()=>{},["stop"]))},{default:a(()=>[v(" "+i(q.row.supplier.code)+" - "+i(q.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+i(l(K)(q.row.grand_total)),1),q.row.notes?(d(),w("div",k1,[e(C,{name:"notes"}),v(" "+i(q.row.notes),1)])):k("",!0)],64)),t("div",null,[e(zt,{status:q.row.status,statuses:O.$CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(zt,{status:q.row.refund_status,statuses:O.$CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"red",partially_refunded:"orange",fully_refunded:"green",no_refund:"black"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Y,{key:"supplier_id",props:q},{default:a(()=>[q.row.supplier?(d(),w("div",w1,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+i(q.row.supplier_code)+" - "+i(q.row.supplier_name),1)]),q.row.supplier_phone?(d(),w("div",h1,[e(C,{name:"phone",class:"inline-icon"}),v(" "+i(q.row.supplier_phone),1)])):k("",!0),q.row.supplier_address?(d(),w("div",$1,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+i(q.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total",props:q},{default:a(()=>[v(i(l(K)(q.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:q},{default:a(()=>[e(Se,{text:q.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:q,onClick:$[9]||($[9]=J(()=>{},["stop"]))},{default:a(()=>[t("div",x1,[O.$can("admin.purchase-order-return.detail")||O.$can("admin.purchase-order-return.edit")||O.$can("admin.purchase-order-return.cancel")||O.$can("admin.purchase-order-return.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[q.row.status!="draft"&&O.$can("admin.purchase-order-return.detail")?le((d(),U(ne,{key:0,onClick:J(z=>R(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(B,null,{default:a(()=>$[11]||($[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),q.row.status=="draft"&&O.$can("admin.purchase-order-return.edit")?le((d(),U(ne,{key:1,onClick:J(z=>T(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>$[12]||($[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),q.row.status=="draft"&&O.$can("admin.purchase-order-return.cancel")?le((d(),U(ne,{key:2,onClick:J(z=>I(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(B,null,{default:a(()=>$[13]||($[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),e(Pe),O.$can("admin.purchase-order-return.delete")?le((d(),U(ne,{key:3,onClick:J(z=>N(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>$[14]||($[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",f1,[e(ue,{modelValue:V.year,"onUpdate:modelValue":[$[2]||($[2]=q=>V.year=q),h],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),V.year!="all"?(d(),U(ue,{key:0,modelValue:V.month,"onUpdate:modelValue":[$[3]||($[3]=q=>V.month=q),h],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:V.year===null},null,8,["modelValue","disable"])):k("",!0),e(ue,{modelValue:V.status,"onUpdate:modelValue":[$[4]||($[4]=q=>V.status=q),h],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ue,{modelValue:V.refund_status,"onUpdate:modelValue":[$[5]||($[5]=q=>V.refund_status=q),h],options:S,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:V.search,"onUpdate:modelValue":$[6]||($[6]=q=>V.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},V1=Object.freeze(Object.defineProperty({__proto__:null,default:S1},Symbol.toStringTag,{value:"Module"})),q1={key:0,class:"text-center q-mb-md text-grey-8"},C1={class:"text-subtitle2 text-weight-medium"},T1={class:"text-h5 text-center text-primary q-pb-md"},P1={class:"q-mb-md flex flex-center"},R1={key:1},O1={class:"col-6"},I1={class:"col-6"},U1={class:"row"},D1={class:"text-center q-mt-md"},j1={key:0,class:"text-h6 text-negative text-weight-bold"},E1={key:1,class:"text-h6 text-green-8 text-weight-bold"},A1={key:2,class:"text-h6 text-positive text-weight-bold"},M1={key:2},N1={class:"text-h6 text-negative text-center"},B1={key:3},z1={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,r=be(),n=P(!1),f=P("payment"),b=P(new Date),p=P(null),m=je([]),g=X(()=>m.every(j=>j.id&&typeof j.amount=="number"&&j.amount>0)),_=X(()=>r.props.accounts.map(j=>({label:j.name,value:j.id}))),y=X(()=>m.reduce((j,O)=>j+(O.amount||0),0)),S=X(()=>u.total-y.value),V=X(()=>{if(!u.supplier)return!0;const j=m.find($=>$.id==="wallet");return(j?j.amount:0)<=u.supplier.balance}),x=new Date,D=dt.addToDate(new Date,{days:30}),L=X(()=>[j=>!!j||"Tanggal jatuh tempo harus diisi",j=>dt.isBetweenDates(j,x,D,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),T=X(()=>{if(f.value==="debt")return!!u.supplier&&L.value.every(A=>A(b.value)===!0);const j=m.some(A=>(A.amount||0)>0),O=m.every(A=>(A.amount||0)>=0),$=S.value<=0;return g.value&&j&&O&&$}),R=()=>{m.length<3&&m.push({id:null,amount:0})},I=j=>{if(m.length>1){const O=m.findIndex($=>$.id===j);O!==-1&&m.splice(O,1)}},N=j=>{f.value=j,b.value=new Date,m.splice(0,m.length),j==="payment"&&_.value.length>0&&(m.splice(0,m.length,{id:_.value[0].value,amount:u.total}),ft(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},M=()=>{if(!T.value)return;n.value=!0;let j={total:u.total,is_debt:f.value==="debt"};if(f.value==="debt")j.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),j.payments=[];else{const O=y.value,$=O>u.total?O-u.total:0,A=S.value>0?S.value:0;j.payments=m,j.remaining_debt=A,j.change=$}o("accepted",j),n.value=!1},h=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}N("payment")};return(j,O)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":O[3]||(O[3]=$=>j.$emit("update:modelValue",$)),onBeforeShow:h},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>O[4]||(O[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[c.supplier?(d(),w("div",q1,[t("div",C1,[v(" Nama: "+i(c.supplier.name),1),O[5]||(O[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+i(l(K)(c.supplier.balance)),1)])])):k("",!0),t("div",T1," Total: Rp. "+i(l(K)(c.total)),1),t("div",P1,[e(l(Qt),{modelValue:f.value,"onUpdate:modelValue":[O[0]||(O[0]=$=>f.value=$),N],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="payment"?(d(),w("div",R1,[(d(!0),w(H,null,De(m,($,A)=>(d(),w("div",{key:A,class:"row q-col-gutter-sm q-mb-sm"},[t("div",O1,[e(l(ue),{modelValue:$.id,"onUpdate:modelValue":F=>$.id=F,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[F=>!!F||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",I1,[e(Ne,{modelValue:$.amount,"onUpdate:modelValue":F=>$.amount=F,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!V.value,"error-message":V.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:A===0?"firstPaymentInputRef":null},Fe({_:2},[m.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:F=>I(A)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",U1,[e(E,{disable:!(m.length<3&&S.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:R,size:"sm"},null,8,["disable"])]),t("div",D1,[S.value>0?(d(),w("div",j1," Sisa Tagihan: Rp. "+i(l(K)(S.value)),1)):S.value<0?(d(),w("div",E1," Kembalian: Rp. "+i(l(K)(Math.abs(S.value))),1)):(d(),w("div",A1," Tagihan Terbayar "))])])):f.value==="debt"&&c.supplier?(d(),w("div",M1,[e(pa,{outlined:"",modelValue:b.value,"onUpdate:modelValue":O[1]||(O[1]=$=>b.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(x),"max-date":l(D),rules:L.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",N1," Total Utang: Rp. "+i(l(K)(c.total)),1)])):f.value==="debt"&&!c.supplier?(d(),w("div",B1,O[6]||(O[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:O[2]||(O[2]=$=>j.$emit("update:modelValue",!1))}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:M,disable:n.value||!T.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},F1=Object.freeze(Object.defineProperty({__proto__:null,default:z1},Symbol.toStringTag,{value:"Module"})),L1={key:0},K1={style:{float:"right"}},H1={key:1},W1={style:{float:"right"}},Y1={key:2},Q1={style:{float:"right"}},J1={key:3},G1={style:{float:"right"}},X1={style:{float:"right"}},Z1={class:"q-gutter-sm"},eb={class:"q-my-md"},tb={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const u=P(null),o=()=>{var r;(r=u.value)==null||r.focus()};return(r,n)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>r.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,i(c.order.code),1)]),c.customer?(d(),w("tr",L1,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(i(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(i(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",K1,i(l(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",H1,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",W1,i(l(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",Y1,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",Q1,i(l(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",J1,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",G1,i(l(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",X1,i(l(K)(c.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",Z1,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",eb,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ab=_t(tb,[["__scopeId","data-v-f0591c00"]]),lb=Object.freeze(Object.defineProperty({__proto__:null,default:ab},Symbol.toStringTag,{value:"Module"})),ob={class:"column"},nb={class:"bg-grey-2 q-pa-xs"},sb={class:"text-subtitle1 text-bold text-grey-10"},rb={class:"col-12 col-sm-6"},ib={class:"full-width"},db={key:0},ub={key:1},mb={key:0},cb={key:1},pb={class:"col-12 col-sm-6",align:"left"},fb={class:"full-width"},gb={key:0};const bb={key:2},vb={class:"full-width",style:{"border-collapse":"collapse"}},_b={class:"q-pa-sm"},yb={class:"text-right q-pa-sm"},kb={class:"text-right q-pa-sm"},wb={class:"text-right q-pa-sm"},hb={key:0},$b={class:"col-12 col-sm-6"},xb={class:"text-body2 text-grey-7 text-italic"},Sb={class:"col-12 col-sm-6"},Vb={class:"row justify-end q-gutter-y-xs"},qb={class:"col-12 row justify-between"},Cb={class:"text-subtitle2 text-bold"},Tb={key:0,class:"row justify-end q-gutter-y-xs"},Pb={class:"col-12 row justify-between"},Rb={class:"text-subtitle2 text-bold"},Ob={key:1,class:"row justify-end q-gutter-y-xs"},Ib={class:"col-12 row justify-between"},Ub={class:"text-subtitle2 text-bold"},Db={key:2,class:"row justify-end q-gutter-y-xs"},jb={class:"col-12 row justify-between"},Eb={class:"text-subtitle2 text-bold"},zo={__name:"InvoiceTab",props:{data:Object},setup(c){const s=c;return(u,o)=>{const r=Q("i-link");return d(),w("div",ob,[e(te,{class:"q-pa-none"},{default:a(()=>[t("div",nb,[t("div",sb," Pembelian #"+i(s.data.code),1)])]),_:1}),e(Pe),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",rb,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Supplier",-1)),t("table",ib,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),w("div",db,[e(C,{class:"inline-icon",name:"person"}),e(r,{href:u.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>[v(i(s.data.supplier_name),1)]),_:1},8,["href"])])):(d(),w("div",ub,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(d(),w("tr",mb,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),e(ea,{phone:s.data.supplier_phone},null,8,["phone"])])])):k("",!0),s.data.supplier_address?(d(),w("tr",cb,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),(d(),w(H,{key:0},[v(i(s.data.supplier_address),1)],64))])])):k("",!0)])])]),t("div",pb,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",fb,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(_e)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(u.$CONSTANTS.PURCHASE_ORDER_STATUSES[s.data.status]),1)]),s.data.status=="closed"?(d(),w("tr",gb,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(u.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)])):k("",!0),k("",!0),s.data.due_date?(d(),w("tr",bb,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(l(da)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("table",vb,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(H,null,De(s.data.details,n=>(d(),w("tr",{key:n.id},[t("td",_b,[e(r,{href:u.route("admin.product.detail",{id:n.product_id})},{default:a(()=>[v(i(n.product_name),1)]),_:2},1032,["href"])]),t("td",yb,i(n.quantity),1),t("td",null,i(n.product_uom),1),t("td",kb,i(l(K)(n.cost)),1),t("td",wb,i(l(K)(n.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),w("tr",hb,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(te,{class:"row",align:"left"},{default:a(()=>[t("div",$b,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",xb,i(s.data.notes?s.data.notes:"-"),1)]),t("div",Sb,[t("div",Vb,[t("div",qb,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Cb,i(l(K)(s.data.grand_total)),1)])]),s.data.status=="closed"&&s.data.total_return?(d(),w("div",Tb,[t("div",Pb,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",Rb,i(l(K)(s.data.total_return)),1)])])):k("",!0),s.data.status=="closed"&&s.data.total_paid?(d(),w("div",Ob,[t("div",Ib,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Dibayar (Rp)",-1)),t("div",Ub,i(l(K)(s.data.total_paid)),1)])])):k("",!0),s.data.status=="closed"&&s.data.balance!=0?(d(),w("div",Db,[t("div",jb,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",Eb,i(l($t)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},Ab=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),Mb={key:0,class:"text-center q-mb-md text-grey-8"},Nb={class:"text-subtitle2 text-weight-medium"},Bb={class:"text-h5 text-center text-primary q-pb-md"},zb={class:"text-center q-mt-md"},Fb={key:0,class:"text-h6 text-negative text-weight-bold"},Lb={key:1,class:"text-h6 text-green-8 text-weight-bold"},Kb={key:2,class:"text-h6 text-positive text-weight-bold"},Fo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,r=be(),n=P(!1),f=P({method:null,amount:u.total,notes:null}),b=r.props.data.supplier,p=X(()=>[...r.props.accounts.map(x=>({label:x.type=="bank"?x.name+" - "+x.number:x.name,value:x.id}))]),m=X(()=>u.total-(f.value.amount||0)),g=X(()=>f.value.method&&typeof f.value.amount=="number"&&f.value.amount>0),_=X(()=>f.value.method?(f.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),y=X(()=>g.value&&_.value===null),S=()=>{if(!y.value)return;n.value=!0;const x={total_paid:f.value.amount,payments:[{id:f.value.method,amount:f.value.amount}],notes:f.value.notes,remaining_debt:Math.max(0,u.total-(f.value.amount||0))};o("accepted",x),n.value=!1},V=()=>{f.value.amount=u.total,f.value.method=null,f.value.notes=null};return(x,D)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":D[4]||(D[4]=L=>x.$emit("update:modelValue",L)),onBeforeShow:V},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>D[5]||(D[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",Mb,[t("div",Nb,[v(i(l(b).name)+" ",1),D[6]||(D[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+i(l(K)(l(b).balance)),1)])])):k("",!0),t("div",Bb," Total: Rp. "+i(l(K)(c.total)),1),e(l(ue),{modelValue:f.value.method,"onUpdate:modelValue":D[0]||(D[0]=L=>f.value.method=L),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value,rules:[L=>!!L||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Ne,{modelValue:f.value.amount,"onUpdate:modelValue":D[1]||(D[1]=L=>f.value.amount=L),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":_.value},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:f.value.notes,"onUpdate:modelValue":D[2]||(D[2]=L=>f.value.notes=L),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",zb,[m.value>0?(d(),w("div",Fb," Sisa Tagihan: Rp. "+i(l(K)(m.value)),1)):m.value<0?(d(),w("div",Lb," Kembalian: Rp. "+i(l(K)(Math.abs(m.value))),1)):(d(),w("div",Kb," Tagihan Terbayar "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:D[3]||(D[3]=L=>x.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:S,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Hb=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),Wb={class:"column"},Yb={class:"row"},Qb={class:"full-width",style:{"border-collapse":"collapse"}},Jb={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Gb={class:"row items-center q-gutter-x-sm"},Xb={class:"text-weight-bold"},Zb={class:"row items-center q-gutter-x-sm q-mt-xs"},ev={class:"text-caption text-grey-6"},tv={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},av={class:"q-mt-xs"},lv={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ov={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},nv={key:0},sv={class:"text-right q-pa-sm"},Lo={__name:"PaymentTab",props:{data:Object},setup(c){const s=c,u=he(),o=P(!1),r=()=>{o.value=!0},n=async b=>{const p={order_id:s.data.id,payments:b.payments,notes:b.notes};u.loading.show({message:"Memproses pembayaran..."});try{const m=await Ue.post(route("admin.purchase-order.add-payment"),p);u.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,W.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(m){let g="Gagal memproses pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}},f=b=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Ue.post(route("admin.purchase-order.delete-payment",{id:b.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),W.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(p){let m="Gagal menghapus pembayaran.";p.response&&p.response.data&&p.response.data.message?m=p.response.data.message:p.message&&(m=p.message),u.notify({message:m,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(b,p)=>{const m=Q("i-link");return d(),w(H,null,[t("div",Wb,[e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("div",Yb,[b.$can("admin.purchase-order.add-payment")?(d(),U(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:p[0]||(p[0]=J(g=>r(),["stop"]))})):k("",!0)]),t("table",Qb,[p[5]||(p[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(H,null,De(s.data.payments,g=>(d(),w("tr",{key:g.id},[t("td",Jb,[t("div",Gb,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",Xb,i(g.code),1)]),t("div",Zb,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",ev,i(l(_e)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),w("div",tv,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),e(m,{class:"text-caption",href:b.route("admin.finance-account.detail",{id:g.account.id})},{default:a(()=>[v(i(g.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",av,[e(st,{label:b.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(st,{label:g.amount<0?"Pembayaran":"Refund",color:g.amount<0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",lv,i(l($t)(g.amount)),1),t("td",ov,[b.$can("admin.purchase-order.delete-payment")&&s.data.supplier_id&&g.amount<0?(d(),U(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",nv,p[2]||(p[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[p[3]||(p[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",sv,i(l($t)(s.data.balance)),1),p[4]||(p[4]=t("td",null,null,-1))])])])]),_:1})]),e(Fo,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=g=>o.value=g),total:b.remainingPayment,customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},rv=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),iv={class:"q-gutter-sm"},dv={class:"col col-lg-6 q-pa-xs",align:"center"},Dl="Rincian Pembelian",uv={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),u=be(),o=u.props.data,r=P(s.get("preview")||!1),f=P(s.get("tab")||"invoice"),b=()=>{window.print()};return(p,m)=>{const g=Q("i-head"),_=Q("authenticated-layout");return d(),w(H,null,[e(g,{title:Dl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,i(Dl))])]),"left-button":a(()=>[t("div",iv,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>r.value?l(W).get(p.route("admin.purchase-order.edit",l(u).props.data.id)):l(W).get(p.route("admin.purchase-order.index")))})])]),"right-button":a(()=>[e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>b())}),r.value?k("",!0):(d(),U(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[2]||(m[2]=y=>l(W).get(p.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",dv,[e(pe,{square:"",flat:"",bordered:"",class:qe(["full-width",r.value?"draft-label":f.value!="invoice"?"":l(u).props.data.payment_status=="fully_paid"?"paid-label":"unpaid-label"]),style:{"max-width":"1024px"}},{default:a(()=>[e(qt,{modelValue:f.value,"onUpdate:modelValue":m[3]||(m[3]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(rt,{name:"invoice",label:"Rincian"}),r.value?k("",!0):(d(),U(rt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Ct,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),animated:""},{default:a(()=>[e(it,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(zo,{data:l(o)},null,8,["data"])]),_:1}),e(it,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(Lo,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])])]),_:1})]),_:1})],64)}}},mv=Object.freeze(Object.defineProperty({__proto__:null,default:uv},Symbol.toStringTag,{value:"Module"})),cv={class:"text-weight-medium wrap-column"},pv={class:"text-caption text-grey-6 elipsis"},fv={class:"column items-end"},gv={class:"text-caption text-grey-6 text-italic"},Ko={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=he(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(r,n)=>(d(),U(Ae,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:We({height:l(u)})},{header:a(f=>[e(Oe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(H,null,De(f.cols,b=>(d(),U(oa,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(i(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Oe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:f,class:"text-left"},{default:a(()=>[t("div",cv,i(f.row.product_name),1),t("div",pv,i(f.row.product_barcode),1),f.row.notes?(d(),U(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal",props:f,class:"text-right"},{default:a(()=>[t("div",fv,[t("div",null,i(l(K)(f.row.subtotal_cost)),1),t("div",gv,i(l(K)(f.row.quantity))+" x Rp. "+i(l(K)(f.row.cost)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>r.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>r.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},bv=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),vv={key:0,class:"text-center q-mb-md text-grey-8"},_v={class:"text-subtitle2 text-weight-medium"},yv={class:"text-h5 text-center text-primary q-pb-md"},kv={class:"q-mb-md flex flex-center"},wv={key:1},hv={class:"col-6"},$v={class:"col-6"},xv={class:"row"},Sv={class:"text-center q-mt-md"},Vv={key:0,class:"text-h6 text-negative text-weight-bold"},qv={key:1,class:"text-h6 text-green-8 text-weight-bold"},Cv={key:2,class:"text-h6 text-positive text-weight-bold"},Tv={key:2},Pv={class:"text-h6 text-negative text-center"},Rv={key:3},Ho={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,r=be(),n=P(!1),f=P("payment"),b=P(new Date),p=P(null),m=je([]),g=X(()=>m.every(j=>j.id&&typeof j.amount=="number"&&j.amount>0)),_=X(()=>r.props.accounts.map(j=>({label:j.name,value:j.id}))),y=X(()=>m.reduce((j,O)=>j+(O.amount||0),0)),S=X(()=>u.total-y.value),V=X(()=>{if(!u.supplier)return!0;const j=m.find(O=>O.id==="wallet");return j?j.amount<=u.supplier.balance:!0}),x=new Date,D=dt.addToDate(new Date,{days:30}),L=X(()=>[j=>!!j||"Tanggal jatuh tempo harus diisi",j=>dt.isBetweenDates(j,x,D,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),T=X(()=>{if(f.value==="debt")return!!u.supplier&&L.value.every(A=>A(b.value)===!0);const j=m.some(A=>(A.amount||0)>0),O=m.every(A=>(A.amount||0)>=0),$=S.value<=0;return g.value&&j&&O&&$}),R=()=>{m.length<3&&m.push({id:null,amount:0})},I=j=>{if(m.length>1){const O=m.findIndex($=>$.id===j);O!==-1&&m.splice(O,1)}},N=j=>{f.value=j,b.value=new Date,m.splice(0,m.length),j==="payment"&&_.value.length>0&&(m.splice(0,m.length,{id:_.value[0].value,amount:u.total}),ft(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},M=()=>{if(!T.value)return;n.value=!0;let j={total:u.total,is_debt:f.value==="debt"};if(f.value==="debt")j.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),j.payments=[];else{const O=y.value,$=O>u.total?O-u.total:0,A=S.value>0?S.value:0;j.payments=m,j.remaining_debt=A,j.change=$}o("accepted",j),n.value=!1},h=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}N("payment")};return(j,O)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":O[3]||(O[3]=$=>j.$emit("update:modelValue",$)),onBeforeShow:h},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>O[4]||(O[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[c.supplier?(d(),w("div",vv,[t("div",_v,[v(" Nama: "+i(c.supplier.name),1),O[5]||(O[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+i(l(K)(c.supplier.balance)),1)])])):k("",!0),t("div",yv," Total: Rp. "+i(l(K)(c.total)),1),t("div",kv,[e(l(Qt),{modelValue:f.value,"onUpdate:modelValue":[O[0]||(O[0]=$=>f.value=$),N],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="payment"?(d(),w("div",wv,[(d(!0),w(H,null,De(m,($,A)=>(d(),w("div",{key:A,class:"row q-col-gutter-sm q-mb-sm"},[t("div",hv,[e(l(ue),{modelValue:$.id,"onUpdate:modelValue":F=>$.id=F,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[F=>!!F||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",$v,[e(Ne,{modelValue:$.amount,"onUpdate:modelValue":F=>$.amount=F,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!V.value,"error-message":V.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:A===0?"firstPaymentInputRef":null},Fe({_:2},[m.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:F=>I(A)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",xv,[e(E,{disable:!(m.length<3&&S.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:R,size:"sm"},null,8,["disable"])]),t("div",Sv,[S.value>0?(d(),w("div",Vv," Sisa Tagihan: Rp. "+i(l(K)(S.value)),1)):S.value<0?(d(),w("div",qv," Kembalian: Rp. "+i(l(K)(Math.abs(S.value))),1)):(d(),w("div",Cv," Tagihan Terbayar "))])])):f.value==="debt"&&c.supplier?(d(),w("div",Tv,[e(pa,{outlined:"",modelValue:b.value,"onUpdate:modelValue":O[1]||(O[1]=$=>b.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(x),"max-date":l(D),rules:L.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Pv," Total Utang: Rp. "+i(l(K)(c.total)),1)])):f.value==="debt"&&!c.supplier?(d(),w("div",Rv,O[6]||(O[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:O[2]||(O[2]=$=>j.$emit("update:modelValue",!1))}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:M,disable:n.value||!T.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ov=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),Iv={class:"row items-center no-wrap"},Uv={class:"col-auto"},Wo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,r=u,n=()=>{r("save")},f=X(()=>o.item.quantity*o.item.cost),b=_=>{_.stopPropagation(),_.preventDefault()},p=_=>{o.modelValue&&(_.key==="Enter"?(n(),b(_)):_.key==="Escape"&&(r("update:modelValue",!1),b(_)))};xe(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item});const g=()=>{};return(_,y)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":y[6]||(y[6]=S=>_.$emit("update:modelValue",S)),onBeforeShow:g},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",Iv,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Uv,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=S=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(ie,{modelValue:c.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=S=>c.item.product_name=S),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ne,{modelValue:c.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=S=>c.item.quantity=S),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Ne,{modelValue:c.item.cost,"onUpdate:modelValue":y[3]||(y[3]=S=>c.item.cost=S),label:"Modal / Harga Beli","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ne,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=S=>f.value=S),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ie,{modelValue:c.item.notes,"onUpdate:modelValue":y[5]||(y[5]=S=>c.item.notes=S),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[le(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[fe]]),le(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Dv=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),jv={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(u,o)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=r=>u.$emit("update:modelValue",r))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[le(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Yo=_t(jv,[["__scopeId","data-v-a7905738"]]),Ev=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),Av={class:"row items-center no-wrap"},Mv={class:"col text-subtite text-bold text-grey-8"},Nv={class:"col-auto"},Qo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,r=u,n=()=>{r("save")},f=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(r("update:modelValue",!1),f(m)))};return xe(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",Av,[t("div",Mv," Edit "+i(c.data.code),1),t("div",Nv,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(Kt,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(ie,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ie,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[le(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[fe]]),le(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Bv=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),zv={key:0},Fv={style:{float:"right"}},Lv={key:1},Kv={style:{float:"right"}},Hv={key:2},Wv={style:{float:"right"}},Yv={key:3},Qv={style:{float:"right"}},Jv={style:{float:"right"}},Gv={class:"q-gutter-sm"},Xv={class:"q-my-md"},Zv={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const u=P(null),o=()=>{var r;(r=u.value)==null||r.focus()};return(r,n)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>r.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,i(c.order.code),1)]),c.customer?(d(),w("tr",zv,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(i(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(i(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Fv,i(l(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",Lv,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",Kv,i(l(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",Hv,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",Wv,i(l(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",Yv,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Qv,i(l(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Jv,i(l(K)(c.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",Gv,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Xv,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Jo=_t(Zv,[["__scopeId","data-v-31d340fd"]]),e_=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),t_={class:"q-gutter-sm"},a_={class:"row items-center"},l_={class:"text-weight-bold"},o_={class:"row q-col-gutter-none full-width"},n_={class:"col-sm-6 col-12 col q-pa-sm"},s_={class:"row full-width"},r_={class:"col-sm-6 col-12 q-pa-sm"},i_={class:"row q-ml-sm items-end"},d_={class:"row col grow"},u_={class:"col-12 q-px-sm column"},m_={class:"row items-start q-col-gutter-none q-px-sm"},c_={key:0,class:"col"},p_={class:"text-caption text-grey-6 q-mt-xs"},f_={key:0,class:"text-caption text-grey-8 q-mt-xs"},g_={class:"text-italic"},b_={key:1,class:"col"},v_={class:"text-grey-8"},__={class:"col"},y_={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},k_={class:"text-h4 text-weight-bold"},w_={class:"row q-px-sm q-col-gutter-sm q-py-xs"},h_={class:"col"},$_={__name:"Editor",setup(c){const s=he(),u=be(),o=P(!0),r=P(null),n=P(null),f=P(null),b=P(!1),p=P(null),m=P(null),{isFullscreen:g,toggleFullscreen:_}=xa(m),y=u.props.data.code,S=P(u.props.data.supplier),V=P(null),x=P(""),D=P(!1),L=P(!1),T=P(!1),R=P(!1),I=P(!1),N=P(!1),M=P(null),h=je({id:u.props.data.id,code:u.props.data.code,supplier_id:u.props.data.supplier_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),j=X(()=>h.items.reduce((se,G)=>se+G.cost*G.quantity,0)),O=()=>{var se;_(),g.value||(se=p==null?void 0:p.value)==null||se.hideDrawer()},$=se=>isNaN(se)||se<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,A=se=>isNaN(se)||se<0?(gt("Harga tidak valid.","top"),!1):!0,F=se=>!se||se.length==0?(gt("Barcode tidak valid.","top"),!1):!0,q=se=>{var G;(G=x.value)!=null&&G.endsWith("*")?x.value+=se.name:x.value=se.name},z=async()=>{if(D.value)return;const se=x.value.trim();if(se.length===0){T.value=!0;return}const G=se.split("*");let me=1,ee="",ge=null;if(G.length===1)ee=G[0];else if(G.length<=3)me=parseInt(G[0]),ee=G[1],G.length===3&&(ge=parseFloat(G[2]));else{gt("Input tidak valid.","top");return}if(ee.length===0){T.value=!0;return}!F(ee)&&!$(me)&&!A(ge)||(D.value=!0,await Ue.post(route("admin.purchase-order.add-item"),{order_id:h.id,product_code:ee,qty:me,cost:ge,merge:o.value}).then(Re=>{const $e=Re.data.data.item;let bt=-1;Re.data.data.mergeItem&&(bt=h.items.findIndex(ht=>ht.id===$e.id)),bt===-1?h.items.push($e):h.items[bt]=$e,x.value="",ge!==null&&ge!==parseFloat($e.cost)&&gt("Harga tidak dapat diubah!","top")}).catch(Re=>{var $e,bt;ct((bt=($e=Re.response)==null?void 0:$e.data)==null?void 0:bt.message,"top"),console.error("Gagal mengambil data produk:",Re)}),D.value=!1,ft(()=>{var Re;(Re=r.value)==null||Re.focus()}))},oe=se=>{M.value=Object.create(se),R.value=!0},ce=se=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${se.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{D.value=!0,Ue.post(route("admin.purchase-order.remove-item"),{id:se.id}).then(()=>{const G=h.items.findIndex(me=>me.id===se.id);G!==-1&&(h.items.splice(G,1)[0],pt("Item telah dihapus","top"))}).catch(G=>{var me,ee;ct(((ee=(me=G==null?void 0:G.response)==null?void 0:me.data)==null?void 0:ee.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(G)}).finally(()=>{D.value=!1})})},de=()=>{D.value=!0;const se=n.value.getCurrentItem(),G={id:se.id,qty:se.quantity,cost:se.cost};se.notes&&(G.notes=se.notes),Ue.post(route("admin.purchase-order.update-item"),G).then(me=>{const ee=me.data.data,ge=h.items.findIndex(Re=>Re.id===ee.id);ge!==-1&&(h.items[ge]=ee,pt("Item telah diperbarui","top"))}).catch(me=>{var ee,ge;ct(((ge=(ee=me==null?void 0:me.response)==null?void 0:ee.data)==null?void 0:ge.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(me)}).finally(()=>{D.value=!1})};xe(()=>{const se=G=>{var me;G.key==="F1"?(G.preventDefault(),b.value=!0):G.key==="F2"?(G.preventDefault(),f.value.focus()):G.key==="F3"?(G.preventDefault(),(me=r.value)==null||me.focus()):G.key==="F4"?(G.preventDefault(),o.value=!o.value):G.key==="F10"?(G.preventDefault(),L.value=!0):G.key==="F11"?(G.preventDefault(),O()):(G.key==="F5"||G.key==="F6"||G.key==="F7"||G.key==="F12")&&G.preventDefault()};document.addEventListener("keydown",se),wt(()=>{document.removeEventListener("keydown",se)}),ft(()=>{var G;(G=p==null?void 0:p.value)==null||G.hideDrawer()})});const Ie=async se=>{var G;S.value=se,h.supplier_id=se==null?void 0:se.id,await ke(),se!=null&&se.id?(G=r.value)==null||G.focus():f.value.focus()},ke=async()=>{D.value=!0;const se={id:h.id,supplier_id:h.supplier_id,datetime:aa(h.datetime),notes:h.notes};await Ue.post(route("admin.purchase-order.update"),se).then(G=>{const me=G.data.data.id;h.supplier_id=me.supplier_id}).catch(G=>{var me,ee;ct(((ee=(me=G==null?void 0:G.response)==null?void 0:me.data)==null?void 0:ee.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(G)}).finally(()=>{D.value=!1})},Z=se=>{if(h.items.length===0){pt("Item masih kosong","top");return}const G={id:h.id,...se};D.value=!0,Ue.post(route("admin.purchase-order.close"),G).then(me=>{pt("Transaksi selesai"),W.visit(route("admin.purchase-order.detail",{id:h.id}))}).catch(me=>{var ee,ge;ct((ge=(ee=me.response)==null?void 0:ee.data)==null?void 0:ge.message),console.error(me)}).finally(()=>{D.value=!1})},ae=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${h.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.purchase-order.cancel",{id:h.id}),{id:h.id}).then(()=>{pt("Transaksi telah dibatalkan."),W.visit(route("admin.purchase-order.detail",{id:h.id}))}).catch(se=>{var me,ee;const G=((ee=(me=se.response)==null?void 0:me.data)==null?void 0:ee.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:G,color:"warning",position:"bottom"}),console.error(se)})})},we=()=>{window.open(route("admin.purchase-order.detail",{id:h.id})+"?preview=1","_blank")};return(se,G)=>{const me=Q("i-head"),ee=Q("authenticated-layout");return d(),w(H,null,[e(me,{title:l(y)},null,8,["title"]),e(ee,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[v(i(l(y)),1)]),"left-button":a(()=>[t("div",t_,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:G[0]||(G[0]=ge=>l(W).get(se.route("admin.purchase-order.index")))})])]),"right-button":a(()=>[t("div",a_,[l(s).screen.gt.sm?(d(),w(H,{key:0},[t("div",l_,i(l(u).props.auth.user.username),1),G[23]||(G[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e($a)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",o_,[t("div",n_,[t("div",s_,[e(Mo,{ref_key:"supplierAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:S.value,"onUpdate:modelValue":G[2]||(G[2]=ge=>S.value=ge),label:"Pemasok",disable:D.value,onSupplierSelected:Ie,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),S.value?(d(),U(qa,{key:0,party:S.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",r_,[e(Va,{ref_key:"userInputRef",ref:r,modelValue:x.value,"onUpdate:modelValue":G[3]||(G[3]=ge=>x.value=ge),onKeyup:G[4]||(G[4]=Jt(J(ge=>z(),["prevent"]),["enter"])),onScanSuccess:G[5]||(G[5]=ge=>z()),onSend:G[6]||(G[6]=ge=>z()),onSearch:G[7]||(G[7]=ge=>T.value=!0),loading:D.value,disable:D.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",i_,[e(Tt,{class:"col",modelValue:o.value,"onUpdate:modelValue":G[8]||(G[8]=ge=>o.value=ge),label:"Gabungkan item",disable:D.value},null,8,["modelValue","disable"])])])]),t("div",d_,[t("div",u_,[e(Ko,{items:h.items,onUpdateQuantity:G[9]||(G[9]=({id:ge,value:Re})=>se.updateQuantity(ge,Re)),onRemoveItem:ce,onEditItem:oe,"is-processing":D.value},null,8,["items","is-processing"])])]),t("div",m_,[l(s).screen.gt.sm?(d(),w("div",c_,[t("div",p_,i(h.items.length)+" item(s) ",1),h.notes?(d(),w("div",f_,[G[24]||(G[24]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",g_,[e(Se,{text:h.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",b_,[t("div",v_,[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(i(h.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(i(l(_e)(h.datetime)),1)])])])):k("",!0),t("div",__,[t("div",y_,[G[26]||(G[26]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",k_,[G[25]||(G[25]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+i(l(K)(j.value)),1)])])])]),t("div",w_,[t("div",h_,[e(E,{class:"full-width",label:"Bayar",color:"primary",icon:"payment",onClick:G[10]||(G[10]=ge=>L.value=!0),disable:!se.$can("admin.purchase-order.close")||D.value||h.items.length===0||h.status!=="draft",loading:D.value},null,8,["disable","loading"])]),t("div",null,[e(E,{icon:"more_vert",color:"grey",onClick:G[14]||(G[14]=J(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[le((d(),U(ne,{clickable:"",onClick:G[11]||(G[11]=J(ge=>I.value=!0,["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>G[27]||(G[27]=[v("Edit Rincian")])),_:1})]),_:1})),[[re],[fe]]),le((d(),U(ne,{clickable:"",onClick:G[12]||(G[12]=J(ge=>we(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(B,null,{default:a(()=>G[28]||(G[28]=[v("Pratinjau")])),_:1})]),_:1})),[[re],[fe]]),le((d(),U(ne,{clickable:"",onClick:G[13]||(G[13]=J(ge=>ae(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(B,{class:"text-negative"},{default:a(()=>G[29]||(G[29]=[v(" Batalkan ")])),_:1})]),_:1})),[[re],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Wo,{ref_key:"itemEditorRef",ref:n,modelValue:R.value,"onUpdate:modelValue":G[15]||(G[15]=ge=>R.value=ge),item:M.value,onSave:G[16]||(G[16]=ge=>de()),"is-processing":D.value},null,8,["modelValue","item","is-processing"]),e(Ho,{modelValue:L.value,"onUpdate:modelValue":G[17]||(G[17]=ge=>L.value=ge),onAccepted:Z,form:h,supplier:S.value,total:j.value,accounts:l(u).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(Sa,{modelValue:T.value,"onUpdate:modelValue":G[18]||(G[18]=ge=>T.value=ge),"show-cost":!0,onProductSelected:q},null,8,["modelValue"]),e(Qo,{modelValue:I.value,"onUpdate:modelValue":G[19]||(G[19]=ge=>I.value=ge),data:h,onSave:G[20]||(G[20]=ge=>ke()),"is-processing":D.value},null,8,["modelValue","data","is-processing"]),e(Yo,{modelValue:b.value,"onUpdate:modelValue":G[21]||(G[21]=ge=>b.value=ge)},null,8,["modelValue"]),e(Jo,{modelValue:N.value,"onUpdate:modelValue":G[22]||(G[22]=ge=>N.value=ge),order:h,supplier:S.value,total:j.value,payment:V.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},x_=Object.freeze(Object.defineProperty({__proto__:null,default:$_},Symbol.toStringTag,{value:"Module"})),Go={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.PURCHASE_ORDER_STATUSES,u={draft:"orange",closed:"green",canceled:"red"};return(o,r)=>(d(),U(zt,{status:c.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}},Xo={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,u={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,r)=>(d(),U(zt,{status:c.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}};const S_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},V_={class:"q-pa-xs"},q_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},C_={key:0},T_={key:1},P_={key:2},R_={key:0},O_={key:0},I_={key:1},U_={class:"flex justify-end"},jl="Pembelian",D_={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=Ft(),m=Lt(),g=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Ot(p-2,p-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...It()],y=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],S=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],V=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],x=je({search:"",year:p,month:m,status:"all",payment_status:"all",delivery_status:"all",...Ke()}),D=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),L=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp.)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{h()});const T=$=>{if($.status=="draft"){R($);return}I($)},R=$=>{W.get(route("admin.purchase-order.edit",$.id))},I=$=>{W.get(route("admin.purchase-order.detail",$.id))},N=$=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.purchase-order.cancel",{id:$.id}),{id:$.id}).then(A=>{const F=A.data.data,q=o.value.findIndex(z=>z.id===F.id);if(q===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[q].status="canceled",s.notify({message:A.data.message,position:"bottom"})}).catch(A=>{var q,z;const F=((z=(q=A.response)==null?void 0:q.data)==null?void 0:z.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:F,color:"warning",position:"bottom"}),console.error(A)})})},M=$=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.purchase-order.delete",$.id),fetchItemsCallback:h,loading:r}),h=($=null)=>{He({pagination:D,filter:x,props:$,rows:o,url:route("admin.purchase-order.data"),loading:r,tableRef:n})},j=()=>{h()},O=X(()=>s.screen.gt.sm?L:L.filter($=>$.name==="id"||$.name==="action"));return Be(()=>x.year,$=>{$===null&&(x.month=null)}),($,A)=>{const F=Q("i-head"),q=Q("authenticated-layout");return d(),w(H,null,[e(F,{title:jl}),e(q,null,Fe({title:a(()=>[v(i(jl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=z=>u.value=!u.value)},null,8,["icon"]),$.$can("admin.purchase-order.edit")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:A[1]||(A[1]=z=>l(W).get($.route("admin.purchase-order.add")))})):k("",!0)]),default:a(()=>[t("div",V_,[e(Ae,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":A[11]||(A[11]=z=>D.value=z),filter:x.search,loading:r.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],style:We({height:l(b)}),onRequest:h,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:z,message:oe,filter:ce})=>[t("div",q_,[t("span",null,i(oe)+" "+i(ce?" with term "+ce:""),1)])]),body:a(z=>[e(Oe,{props:z,class:"cursor-pointer",onClick:J(oe=>T(z.row),["prevent"])},{default:a(()=>[e(Y,{key:"id",props:z,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{name:"tag"}),v(" "+i(z.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(i(l(_e)(z.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[z.row.supplier?(d(),w("div",C_,[e(C,{name:"person",class:"inline-icon"}),e(ya,{href:$.route("admin.supplier.detail",{id:z.row.supplier.id}),onClick:A[8]||(A[8]=J(()=>{},["stop"]))},{default:a(()=>[v(" "+i(z.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Total: Rp. "+i(l(K)(z.row.grand_total)),1),z.row.balance!=0?(d(),w("div",T_," Saldo: Rp. "+i(l($t)(z.row.balance)),1)):k("",!0),z.row.notes?(d(),w("div",P_,[e(C,{name:"notes"}),v(" "+i(z.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Go,{status:z.row.status},null,8,["status"]),z.row.status=="closed"?(d(),w(H,{key:0},[e(Xo,{status:z.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]),_:2},1032,["props"]),e(Y,{key:"supplier_id",props:z},{default:a(()=>[z.row.supplier?(d(),w("div",R_,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+i(z.row.supplier_name),1)]),z.row.supplier_phone?(d(),w("div",O_,[e(C,{name:"phone",class:"inline-icon"}),v(" "+i(z.row.supplier_phone),1)])):k("",!0),z.row.supplier_address?(d(),w("div",I_,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+i(z.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:z},{default:a(()=>[v(i(l(K)(z.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:z},{default:a(()=>[v(i(l($t)(z.row.balance)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:z},{default:a(()=>[e(Se,{text:z.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:z,onClick:A[10]||(A[10]=J(()=>{},["stop"]))},{default:a(()=>[t("div",U_,[$.$can("admin.purchase-order.detail")||$.$can("admin.purchase-order.edit")||$.$can("admin.purchase-order.cancel")||$.$can("admin.purchase-order.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:A[9]||(A[9]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[z.row.status!="draft"&&$.$can("admin.purchase-order.detail")?le((d(),U(ne,{key:0,onClick:J(oe=>I(z.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(B,null,{default:a(()=>A[12]||(A[12]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),z.row.status=="draft"&&$.$can("admin.purchase-order.edit")?le((d(),U(ne,{key:1,onClick:J(oe=>R(z.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>A[13]||(A[13]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),z.row.status=="draft"&&$.$can("admin.purchase-order.cancel")?le((d(),U(ne,{key:2,onClick:J(oe=>N(z.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(B,null,{default:a(()=>A[14]||(A[14]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),e(Pe),$.$can("admin.purchase-order.delete")?le((d(),U(ne,{key:3,onClick:J(oe=>M(z.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>A[15]||(A[15]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",S_,[e(ue,{modelValue:x.year,"onUpdate:modelValue":[A[2]||(A[2]=z=>x.year=z),j],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(d(),U(ue,{key:0,modelValue:x.month,"onUpdate:modelValue":[A[3]||(A[3]=z=>x.month=z),j],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ue,{modelValue:x.status,"onUpdate:modelValue":[A[4]||(A[4]=z=>x.status=z),j],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ue,{modelValue:x.payment_status,"onUpdate:modelValue":[A[5]||(A[5]=z=>x.payment_status=z),j],options:S,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":A[7]||(A[7]=z=>x.search=z),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},j_=Object.freeze(Object.defineProperty({__proto__:null,default:D_},Symbol.toStringTag,{value:"Module"})),E_={class:"q-pa-xs"},A_={class:"row items-center full-width"},M_={class:"col text-left text-bold text-grey-9"},N_={key:1,class:"q-pa-md"},B_={class:"text-h6 text-primary q-mb-md"},z_="Laporan",F_={__name:"Index",setup(c){const s=he(),u=P("sales"),o=X(()=>s.screen.lt.md),r={sales:{label:"Penjualan",icon:"o_payments",reports:[{title:"Keuntungan Penjualan",subtitle:"Daftar penjualan berikut laba kotor",icon:"analytics",route:"admin.report.sales-order.gross-profit"},{title:"Pelanggan",subtitle:"Daftar pelanggan",icon:"o_groups",route:"admin.report.customer.index"}]},purchasing:{label:"Pembelian",icon:"o_shopping_cart",reports:[{title:"Rincian Pembelian",subtitle:"Daftar rincian pembelian",icon:"o_receipt_long",route:"admin.report.purchase-order.detail"},{title:"Supplier",subtitle:"Daftar supplier",icon:"o_groups",route:"admin.report.supplier.index"}]},inventory:{label:"Inventori",icon:"inventory",reports:[{title:"Produk",subtitle:"Daftar produk",icon:"inventory",route:"admin.report.product.index"}]}},n=[{id:"sales",...r.sales},{id:"purchasing",...r.purchasing},{id:"inventory",...r.inventory}];return(f,b)=>{const p=Q("i-head"),m=Q("authenticated-layout");return d(),w(H,null,[e(p,{title:z_}),e(m,null,{default:a(()=>[t("div",E_,[e(pe,{flat:"",bordered:"",class:"report-container full-width"},{default:a(()=>[e(qt,{modelValue:u.value,"onUpdate:modelValue":b[0]||(b[0]=g=>u.value=g),dense:"",class:"text-grey-7",align:"left",vertical:!o.value,"switch-indicator":o.value,"inline-label":o.value,"mobile-arrows":o.value,breakpoint:0},{default:a(()=>[(d(),w(H,null,De(n,g=>e(rt,{key:g.id,name:g.id,class:qe({"bg-blue-2":u.value===g.id&&!o.value,"q-py-md":!o.value,"q-py-sm":o.value}),"content-class":"full-width",style:{"min-height":"50px"}},{default:a(()=>[t("div",A_,[o.value?k("",!0):(d(),U(C,{key:0,name:g.icon,class:"q-mr-md"},null,8,["name"])),t("div",M_,i(g.label),1),g.count&&!o.value?(d(),U(st,{key:1,color:"grey-5","text-color":"dark",rounded:"",label:g.count,class:"q-ml-sm"},null,8,["label"])):k("",!0)])]),_:2},1032,["name","class"])),64))]),_:1},8,["modelValue","vertical","switch-indicator","inline-label","mobile-arrows"]),e(Pe,{vertical:!o.value},null,8,["vertical"]),e(Ct,{modelValue:u.value,"onUpdate:modelValue":b[1]||(b[1]=g=>u.value=g),animated:"",class:"q-pa-none"},{default:a(()=>[(d(),w(H,null,De(n,g=>e(it,{key:g.id,name:g.id,class:"q-pa-none"},{default:a(()=>[e(Ee,{separator:""},{default:a(()=>[g.reports&&g.reports.length>0?(d(!0),w(H,{key:0},De(g.reports,(_,y)=>le((d(),U(ne,{key:y,clickable:"",class:"q-py-md",onClick:J(S=>l(W).get(f.route(_.route)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:_.icon,size:"28px",color:"grey"},null,8,["name"])]),_:2},1024),e(B,null,{default:a(()=>[e(ve,{class:"text-weight-bold text-dark"},{default:a(()=>[v(i(_.title),1)]),_:2},1024),e(ve,{caption:""},{default:a(()=>[v(i(_.subtitle),1)]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right",color:"grey"})]),_:1})]),_:2},1032,["onClick"])),[[re]])),128)):(d(),w("div",N_,[t("div",B_," Laporan "+i(g.label),1),b[2]||(b[2]=t("p",null," Saat ini tidak ada daftar laporan spesifik yang ditampilkan di kategori ini. ",-1))]))]),_:2},1024)]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})])]),_:1})],64)}}},L_=_t(F_,[["__scopeId","data-v-3674349c"]]),K_=Object.freeze(Object.defineProperty({__proto__:null,default:L_},Symbol.toStringTag,{value:"Module"})),H_={class:"col col-md-8"},W_={class:"q-col-gutter-sm row"},Y_={class:"col-xs-12 col-md-7"},Q_={class:"text-subtitle2 text-bold text-grey-8"},J_={class:"text-subtitle2 text-bold text-grey-8"},G_={class:"text-subtitle2 text-bold text-grey-8"},X_={key:0,class:"row q-mt-md"},Z_={class:"text-subtitle2 text-bold text-grey-8"},ey={class:"col-xs-12 col-md-5"},ty={class:"q-my-sm"},ay={class:"q-my-sm"},ly={class:"q-my-sm"},Ca={__name:"ReportGeneratorLayout",props:{primaryColumns:{type:Array,required:!0},optionalColumns:{type:Array,default:()=>[]},initialColumns:{type:Array,required:!0},initialFilter:{type:Object,default:()=>({})},initialSortOptions:{type:Array,default:()=>[]}},emits:["submit"],setup(c,{expose:s,emit:u}){const o=he(),r=c,n=X(()=>[...r.primaryColumns,...r.optionalColumns]),f=X(()=>r.primaryColumns.map(L=>L.value)),b=[{value:"auto",label:"Otomatis"},{value:"portrait",label:"Potret"},{value:"landscape",label:"Lansekap"}],p=()=>({columns:r.initialColumns,filter:JSON.parse(JSON.stringify(r.initialFilter)),sortOptions:JSON.parse(JSON.stringify(r.initialSortOptions)),orientation:"auto"}),m=P(p()),g=()=>{m.value=p(),o.notify({message:"Opsi laporan direset ke nilai awal.",timeout:1500})},_=({index:L,value:T})=>{if(f.value.includes(T)){const M=r.primaryColumns.find(h=>h.value===T);return o.notify({type:"negative",message:`Kolom (${M.label}) tidak boleh dihapus.`,timeout:2e3}),!1}const R=m.value.sortOptions.length;m.value.sortOptions=m.value.sortOptions.filter(M=>M.column!==T);const I=m.value.sortOptions.length;return R-I>0&&m.value.sortOptions.length===0&&V(),!0},y=L=>{if(m.value.columns.length===0){o.notify({type:"negative",message:"Kolom belum dipilih.",timeout:2e3});return}S("submit",{format:L,form:m.value})},S=u,V=()=>{const T=m.value.sortOptions.length,R=m.value.columns.length;if(T>=3){o.notify({type:"warning",message:"Maksimal hanya 3 opsi pengurutan yang diperbolehkan.",timeout:2e3});return}if(T>=R){o.notify({type:"warning",message:`Jumlah opsi pengurutan tidak boleh melebihi jumlah kolom yang dipilih (${R}).`,timeout:2500});return}const I=m.value.sortOptions.map(M=>M.column),N=n.value.find(M=>!I.includes(M.value));N?m.value.sortOptions.push({column:N.value,order:"asc"}):o.notify({type:"warning",message:"Tidak ada kolom unik yang tersedia untuk pengurutan.",timeout:2500})},x=L=>{m.value.sortOptions.splice(L,1)},D=X(()=>L=>{const T=m.value.sortOptions.slice(0,L).map(R=>R.column);return T.push(...m.value.sortOptions.slice(L+1).map(R=>R.column)),n.value.filter(R=>{var N;const I=(N=m.value.sortOptions[L])==null?void 0:N.column;return R.value===I||!T.includes(R.value)})});return s({form:m,submit:y,reset:g,columnOptions:n}),(L,T)=>(d(),U(Te,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",H_,[t("div",W_,[t("div",Y_,[e(pe,{square:"",flat:"",bordered:"",class:"full-width q-mb-sm"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",Q_,[e(C,{name:"data_table",size:"xs",class:"q-mr-sm"}),T[6]||(T[6]=v(" Kolom "))])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(ue,{label:"Pilih Kolom",modelValue:m.value.columns,"onUpdate:modelValue":T[0]||(T[0]=R=>m.value.columns=R),options:n.value,"map-options":"","emit-value":"",multiple:"",clearable:"","use-chips":"",onRemove:_,onClear:T[1]||(T[1]=R=>m.value.columns=f.value.slice()),rules:[R=>R&&R.length>0||"Pilih minimal satu kolom"],"hide-bottom-space":""},{"selected-item":a(R=>[e(la,{removable:!f.value.includes(R.opt.value),onRemove:I=>_(R.opt)&&R.removeAtIndex(R.index),dense:""},{default:a(()=>[v(i(R.opt.label),1)]),_:2},1032,["removable","onRemove"])]),_:1},8,["modelValue","options","rules"])])]),_:1})]),_:1}),e(pe,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",J_,[e(C,{name:"filter_alt",size:"xs",class:"q-mr-sm"}),T[7]||(T[7]=v(" Filter "))])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[Vt(L.$slots,"filter",{form:m.value})]),_:3})]),_:3}),e(pe,{square:"",flat:"",bordered:"",class:"full-width q-mt-sm"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",G_,[e(C,{name:"sort",size:"xs",class:"q-mr-sm"}),T[8]||(T[8]=v(" Urutkan "))])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[(d(!0),w(H,null,De(m.value.sortOptions,(R,I)=>(d(),w("div",{key:I,class:"row q-col-gutter-sm q-mb-sm items-center"},[e(ue,{modelValue:R.column,"onUpdate:modelValue":N=>R.column=N,class:"col-grow",style:{"min-width":"150px"},options:D.value(I),"map-options":"",dense:"","emit-value":"",label:I+1+" - Urut berdasarkan"},null,8,["modelValue","onUpdate:modelValue","options","label"]),e(E,{icon:R.order==="asc"?"arrow_upward":"arrow_downward",color:"grey-8",flat:"",round:"",dense:"",onClick:N=>R.order=R.order==="asc"?"desc":"asc",class:"q-ml-sm",size:"sm"},{default:a(()=>[e(Pt,null,{default:a(()=>[v(" Urutkan: "+i(R.order==="asc"?"Terkecil ke Terbesar":"Terbesar ke Terkecil"),1)]),_:2},1024)]),_:2},1032,["icon","onClick"]),m.value.sortOptions.length>1?(d(),U(E,{key:0,icon:"delete",color:"red",flat:"",round:"",dense:"",onClick:N=>x(I),class:"q-ml-xs",size:"sm"},{default:a(()=>[e(Pt,null,{default:a(()=>T[9]||(T[9]=[v("Hapus Opsi Urutan")])),_:1})]),_:2},1032,["onClick"])):k("",!0)]))),128)),m.value.sortOptions.length<3&&m.value.sortOptions.length<m.value.columns.length?(d(),w("div",X_,[e(E,{label:"Tambah Opsi Pengurutan",icon:"add",color:"blue-grey",flat:"",dense:"",size:"sm",onClick:V})])):k("",!0)]),_:1})]),_:1}),e(pe,{square:"",flat:"",bordered:"",class:"full-width q-mt-sm"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",Z_,[e(C,{name:"rotate_right",size:"xs",class:"q-mr-sm"}),T[10]||(T[10]=v(" Halaman "))])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(ue,{label:"Orientasi",modelValue:m.value.orientation,"onUpdate:modelValue":T[2]||(T[2]=R=>m.value.orientation=R),options:b,"map-options":"","emit-value":""},null,8,["modelValue"])])]),_:1})]),_:1})]),t("div",ey,[e(pe,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(te,{class:"q-py-sm q-px-md"},{default:a(()=>[t("div",ty,[e(E,{label:"Cetak",class:"full-width",color:"primary",icon:"print",onClick:T[3]||(T[3]=R=>y("html"))})]),t("div",ay,[e(E,{label:"Unduh PDF",class:"full-width",color:"red",icon:"picture_as_pdf",onClick:T[4]||(T[4]=R=>y("pdf"))})]),t("div",ly,[e(E,{label:"Reset",class:"full-width",color:"grey",icon:"refresh",onClick:T[5]||(T[5]=R=>g())})])]),_:1})]),_:1})])])])]),_:3}))}},oy=Object.freeze(Object.defineProperty({__proto__:null,default:Ca},Symbol.toStringTag,{value:"Module"})),Ka={__name:"BackButton",props:{route:{type:String,default:"",required:!0}},setup(c){const s=c;return(u,o)=>(d(),U(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=r=>u.$inertia.get(s.route))}))}},ny={class:"q-gutter-sm"},El="Laporan Pelanggan",sy={__name:"Index",setup(c){const s=he(),u=be(),o=ze(u.props.primary_columns),r=ze(u.props.optional_columns),n=u.props.initial_columns;console.log(u.props);const f=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],b=[{value:"all",label:"Semua"},{value:"general",label:"Umum"},{value:"staff",label:"Staff"},{value:"category_1",label:"Kategori 1"},{value:"category_2",label:"Kategori 2"},{value:"category_3",label:"Kategori 3"}],p=[{value:"all",label:"Semua"},{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],m={status:"active",type:"all",default_price_type:"all"},g=[{column:"code",order:"asc"}],_=P(null),y=({format:S,form:V})=>{const x={...V,format:S};try{const D=route("admin.report.customer.generate",x);window.open(D,"_blank"),S!=="html"&&s.notify({type:"positive",message:`Laporan ${S.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(D){s.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",D)}};return(S,V)=>{const x=Q("i-head"),D=Q("authenticated-layout");return d(),w(H,null,[e(x,{title:El}),e(D,null,{title:a(()=>[v(i(El))]),"left-button":a(()=>[t("div",ny,[e(Ka,{route:S.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>V[0]||(V[0]=[])),default:a(()=>[e(Ca,{ref_key:"reportGeneratorRef",ref:_,primaryColumns:l(o),optionalColumns:l(r),initialColumns:l(n),initialFilter:m,initialSortOptions:g,onSubmit:y},{filter:a(({form:L})=>[e(ue,{label:"Status",modelValue:L.filter.status,"onUpdate:modelValue":T=>L.filter.status=T,options:f,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ue,{label:"Level Harga",modelValue:L.filter.default_price_type,"onUpdate:modelValue":T=>L.filter.default_price_type=T,options:p,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ue,{label:"Jenis Akun",modelValue:L.filter.type,"onUpdate:modelValue":T=>L.filter.type=T,options:b,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["primaryColumns","optionalColumns","initialColumns"])]),_:1})],64)}}},ry=Object.freeze(Object.defineProperty({__proto__:null,default:sy},Symbol.toStringTag,{value:"Module"})),iy={class:"q-gutter-sm"},Al="Laporan Produk",dy={__name:"Index",setup(c){const s=he(),u=be();console.log(u.props.errors);const o=ze(u.props.primary_columns),r=ze(u.props.optional_columns),n=u.props.initial_columns,{filteredCategories:f,filterCategories:b}=wa(u.props.categories),{filteredSuppliers:p,filterSupplierFn:m}=ha(u.props.suppliers),g=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],_=ze(window.CONSTANTS.PRODUCT_TYPES),y={status:"active",types:[],categories:[],suppliers:[]},S=[{column:"name",order:"asc"}],V=P(null),x=({format:D,form:L})=>{const T={...L,format:D};try{const R=route("admin.report.product.generate",T);window.open(R,"_blank"),D!=="html"&&s.notify({type:"positive",message:`Laporan ${D.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(R){s.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",R)}};return(D,L)=>{const T=Q("i-head"),R=Q("authenticated-layout");return d(),w(H,null,[e(T,{title:Al}),e(R,null,{title:a(()=>[v(i(Al))]),"left-button":a(()=>[t("div",iy,[e(Ka,{route:D.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>L[0]||(L[0]=[])),default:a(()=>[e(Ca,{ref_key:"reportGeneratorRef",ref:V,primaryColumns:l(o),optionalColumns:l(r),initialColumns:l(n),initialFilter:y,initialSortOptions:S,onSubmit:x},{filter:a(({form:I})=>[e(ue,{label:"Status",modelValue:I.filter.status,"onUpdate:modelValue":N=>I.filter.status=N,options:g,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ue,{label:"Jenis",modelValue:I.filter.types,"onUpdate:modelValue":N=>I.filter.types=N,options:l(_),"map-options":"","emit-value":"",multiple:"","use-chips":"",clearable:""},null,8,["modelValue","onUpdate:modelValue","options"]),e(ue,{label:"Kategori",modelValue:I.filter.categories,"onUpdate:modelValue":N=>I.filter.categories=N,options:l(f),onFilter:l(b),"map-options":"","emit-value":"","use-input":"",clearable:"",multiple:"","use-chips":""},null,8,["modelValue","onUpdate:modelValue","options","onFilter"]),e(ue,{label:"Supplier",modelValue:I.filter.suppliers,"onUpdate:modelValue":N=>I.filter.suppliers=N,options:l(p),onFilter:l(m),"map-options":"","emit-value":"","use-input":"",clearable:"",multiple:"","use-chips":""},null,8,["modelValue","onUpdate:modelValue","options","onFilter"])]),_:1},8,["primaryColumns","optionalColumns","initialColumns"])]),_:1})],64)}}},uy=Object.freeze(Object.defineProperty({__proto__:null,default:dy},Symbol.toStringTag,{value:"Module"})),my={class:"q-gutter-sm"},Ml="Laporan Supplier",cy={__name:"Index",setup(c){const s=he(),u=be(),o=ze(u.props.primary_columns),r=ze(u.props.optional_columns),n=u.props.initial_columns,f=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],b={status:"active"},p=[{column:"code",order:"asc"}],m=P(null),g=({format:_,form:y})=>{const S={...y,format:_};try{const V=route("admin.report.supplier.generate",S);window.open(V,"_blank"),_!=="html"&&s.notify({type:"positive",message:`Laporan ${_.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(V){s.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",V)}};return(_,y)=>{const S=Q("i-head"),V=Q("authenticated-layout");return d(),w(H,null,[e(S,{title:Ml}),e(V,null,{title:a(()=>[v(i(Ml))]),"left-button":a(()=>[t("div",my,[e(Ka,{route:_.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>y[0]||(y[0]=[])),default:a(()=>[e(Ca,{ref_key:"reportGeneratorRef",ref:m,primaryColumns:l(o),optionalColumns:l(r),initialColumns:l(n),initialFilter:b,initialSortOptions:p,onSubmit:g},{filter:a(({form:x})=>[e(ue,{label:"Status",modelValue:x.filter.status,"onUpdate:modelValue":D=>x.filter.status=D,options:f,"map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["primaryColumns","optionalColumns","initialColumns"])]),_:1})],64)}}},py=Object.freeze(Object.defineProperty({__proto__:null,default:cy},Symbol.toStringTag,{value:"Module"})),fy={class:"q-gutter-sm"},gy={class:"col col-md-6 q-pa-xs"},Nl="Tambah Retur Penjualan",by={__name:"Create",setup(c){const s=be(),u=Je({code:s.props.data.code}),o=()=>nt({form:u,url:route("admin.sales-order-return.add")});return(r,n)=>{const f=Q("i-head"),b=Q("authenticated-layout");return d(),w(H,null,[e(f,{title:Nl}),e(b,null,{title:a(()=>[v(i(Nl))]),"left-button":a(()=>[t("div",fy,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>r.$inertia.get(r.route("admin.sales-order-return.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",gy,[e(Ge,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(ie,{autofocus:"",modelValue:l(u).code,"onUpdate:modelValue":n[1]||(n[1]=p=>l(u).code=p),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(u).errors.code,disable:l(u).processing,"error-message":l(u).errors.code,rules:[p=>p&&p.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(u).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(u).processing,onClick:n[2]||(n[2]=p=>l(W).get(r.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},vy=Object.freeze(Object.defineProperty({__proto__:null,default:by},Symbol.toStringTag,{value:"Module"})),_y={class:"column"},yy={class:"bg-grey-2 q-pa-xs"},ky={class:"text-subtitle1 text-bold text-grey-10"},wy={class:"text-caption text-grey-8"},hy={class:"col-12 col-sm-6"},$y={class:"full-width"},xy={key:1},Sy={key:0},Vy={key:1},qy={class:"col-12 col-sm-6",align:"left"},Cy={class:"full-width"},Ty={class:"full-width",style:{"border-collapse":"collapse"}},Py={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ry={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Oy={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Iy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Uy={key:0},Dy={class:"col-12 col-sm-6"},jy={class:"text-body2 text-grey-7 text-italic"},Ey={class:"col-12 col-sm-6"},Ay={class:"row justify-end q-gutter-y-xs"},My={class:"col-12 row justify-between"},Ny={class:"text-subtitle2 text-bold"},By={class:"row justify-end q-gutter-y-xs"},zy={class:"col-12 row justify-between"},Fy={class:"text-subtitle2 text-bold"},Ly={class:"row justify-end q-gutter-y-xs"},Ky={class:"col-12 row justify-between"},Hy={class:"text-subtitle2 text-bold"},Zo={__name:"MainInfoTab",props:{data:Object},setup(c){const s=c;return(u,o)=>{const r=Q("i-link"),n=Q("my-link");return d(),w("div",_y,[e(te,{class:"q-pa-none"},{default:a(()=>{var f,b;return[t("div",yy,[t("div",ky," RETUR #"+i(s.data.code),1),t("div",wy,[v(" Kasir: "+i((f=s.data.cashier)==null?void 0:f.username)+" - "+i((b=s.data.cashier)==null?void 0:b.name)+" | "+i(l(_e)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),w(H,{key:0},[v(" | Session ID: "+i(s.data.cashier_session.id)+" | Terminal: "+i(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]}),_:1}),e(Pe),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",hy,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",$y,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),U(r,{key:0,href:u.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[e(C,{class:"inline-icon",name:"person"}),v(" "+i(s.data.customer_name)+" ("+i(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(d(),w("div",xy,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(d(),w("tr",Sy,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),v(" "+i(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(d(),w("tr",Vy,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),v(" "+i(s.data.customer_address),1)])])):k("",!0)])])]),t("div",qy,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Cy,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:u.route("admin.sales-order.detail",{id:s.data.sales_order_id})},{default:a(()=>[v(i(s.data.sales_order_id?s.data.sales_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(_e)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,i(s.data.refund_status_label),1)])])])])]),_:1}),e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("table",Ty,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(H,null,De(s.data.details,f=>(d(),w("tr",{key:f.id},[t("td",Py,[e(r,{href:u.route("admin.product.detail",f.product_id)},{default:a(()=>[v(i(f.product_name),1)]),_:2},1032,["href"])]),t("td",Ry,i(l(K)(f.price)),1),t("td",Oy,i(f.quantity),1),t("td",Iy,i(l(K)(f.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),w("tr",Uy,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(te,{class:"row",align:"left"},{default:a(()=>[t("div",Dy,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",jy,i(s.data.notes?s.data.notes:"-"),1)]),t("div",Ey,[t("div",Ay,[t("div",My,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Ny,i(l(K)(s.data.grand_total)),1)])]),t("div",By,[t("div",zy,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",Fy,i(l(K)(parseFloat(-s.data.total_refunded))),1)])]),t("div",Ly,[t("div",Ky,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",Hy,i(l(K)(s.data.remaining_refund)),1)])])])]),_:1})])}}},Wy=Object.freeze(Object.defineProperty({__proto__:null,default:Zo},Symbol.toStringTag,{value:"Module"})),Yy={key:0,class:"text-center q-mb-md text-grey-8"},Qy={class:"text-subtitle2 text-weight-medium"},Jy={class:"text-h5 text-center text-primary q-pb-md"},Gy={class:"text-center q-mt-md"},Xy={key:0,class:"text-h6 text-negative text-weight-bold"},Zy={key:1,class:"text-h6 text-positive text-weight-bold"},en={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,r=be(),n=P(!1),f=P({method:"cash",amount:u.total,notes:null}),b=r.props.data.customer,p=X(()=>[...b?[{label:"Refund ke Wallet",value:"wallet"}]:[],{label:"Tunai (Laci Kasir)",value:"cash"},...r.props.accounts.map(V=>({label:V.name,value:V.id}))]),m=X(()=>u.total-(f.value.amount||0)),g=X(()=>{const V=f.value.amount||0;return V<=0?"Jumlah pembayaran harus lebih dari 0.":V>u.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=X(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const V={id:f.value.method,amount:f.value.amount,notes:f.value.notes};o("accepted",V),n.value=!1},S=()=>{f.value.amount=u.total,f.value.method="cash",f.value.notes=null};return(V,x)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":x[4]||(x[4]=D=>V.$emit("update:modelValue",D)),onBeforeShow:S},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>x[5]||(x[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",Yy,[t("div",Qy,[v(i(l(b).code)+" ",1),x[6]||(x[6]=t("br",null,null,-1)),v(" "+i(l(b).name)+" ",1),x[7]||(x[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+i(l(K)(l(b).wallet_balance)),1)])])):k("",!0),t("div",Jy," Total: Rp. "+i(l(K)(c.total)),1),e(l(ue),{modelValue:f.value.method,"onUpdate:modelValue":x[0]||(x[0]=D=>f.value.method=D),options:p.value,label:f.value.method=="wallet"?"Tujuan":"Sumber Dana",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","label","disable"]),e(Ne,{modelValue:f.value.amount,"onUpdate:modelValue":x[1]||(x[1]=D=>f.value.amount=D),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:f.value.notes,"onUpdate:modelValue":x[2]||(x[2]=D=>f.value.notes=D),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Gy,[m.value>0?(d(),w("div",Xy," Sisa Refund: Rp. "+i(l(K)(m.value)),1)):(d(),w("div",Zy," Refund Lunas "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:x[3]||(x[3]=D=>V.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ek=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),tk={class:"column"},ak={class:"row"},lk={class:"full-width",style:{"border-collapse":"collapse"}},ok={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},nk={class:"row items-center q-gutter-x-sm"},sk={class:"text-weight-bold"},rk={class:"row items-center q-gutter-x-sm q-mt-xs"},ik={class:"text-caption text-grey-6"},dk={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},uk={class:"text-caption text-grey-6"},mk={class:"q-mt-xs"},ck={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},pk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},fk={key:0},gk={class:"text-right q-pa-sm"},tn={__name:"RefundTab",props:{data:Object},setup(c){const s=c,u=he(),o=P(!1),r=()=>{o.value=!0},n=X(()=>s.data.remaining_refund),f=async p=>{const m={order_id:s.data.id,...p};u.loading.show({message:"Memproses pembayaran..."});try{const g=await Ue.post(route("admin.sales-order-return.add-refund"),m);u.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,W.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(g){let _="Gagal memproses refund.";g.response&&g.response.data&&g.response.data.message?_=g.response.data.message:g.message&&(_=g.message),u.notify({message:_,color:"negative",icon:"error"})}finally{u.loading.hide()}},b=p=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Ue.post(route("admin.sales-order-return.delete-refund",{id:p.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),W.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(m){let g="Gagal menghapus refund pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(p,m)=>(d(),w(H,null,[t("div",tk,[e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("div",ak,[p.$can("admin.sales-order-return.add-refund")?(d(),U(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=J(g=>r(),["stop"]))})):k("",!0)]),t("table",lk,[m[5]||(m[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(H,null,De(s.data.refunds,g=>(d(),w("tr",{key:g.id},[t("td",ok,[t("div",nk,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",sk,i(g.code),1)]),t("div",rk,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",ik,i(l(_e)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),w("div",dk,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),t("span",uk,i(g.account.name),1)])):k("",!0),t("div",mk,[e(st,{label:p.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",ck,i(l(K)(g.amount)),1),t("td",pk,[p.$can("admin.sales-order-return.delete-refund")?(d(),U(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>b(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(d(),w("tr",fk,m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund",-1)),t("th",gk,i(l(K)(parseFloat(-s.data.total_refunded))),1),m[4]||(m[4]=t("th",null,null,-1))])])])]),_:1})]),e(en,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=g=>o.value=g),total:n.value,customer:s.data.customer,onAccepted:f},null,8,["modelValue","total","customer"])],64))}},bk=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),vk={class:"q-gutter-sm"},_k={class:"col col-lg-6 q-pa-xs",align:"center"},Bl="Retur Penjualan",yk={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),u=be(),o=u.props.data,r=P(s.get("preview")||!1),f=P(s.get("tab")||"main-info");xe(()=>{ft(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.sales-order-return.print",{id:u.props.data.id,size:p}),"_self")};return(p,m)=>{const g=Q("i-head"),_=Q("authenticated-layout");return d(),w(H,null,[e(g,{title:Bl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,i(Bl))])]),"left-button":a(()=>[t("div",vk,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>l(W).get(p.route("admin.sales-order-return.index")))})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=y=>b("a4"))}),r.value?k("",!0):(d(),U(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=y=>l(W).get(p.route("admin.sales-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",_k,[e(pe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(qt,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(rt,{name:"main-info",label:"Info Retur"}),r.value?k("",!0):(d(),U(rt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Ct,{modelValue:f.value,"onUpdate:modelValue":m[5]||(m[5]=y=>f.value=y),animated:""},{default:a(()=>[e(it,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(Zo,{data:l(o)},null,8,["data"])]),_:1}),e(it,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(tn,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},kk=Object.freeze(Object.defineProperty({__proto__:null,default:yk},Symbol.toStringTag,{value:"Module"})),wk={class:"text-weight-medium"},hk={class:"text-caption text-grey-6 elipsis"},$k={class:"column items-end"},xk={class:"text-caption text-grey-6 text-italic"},an={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=he(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(r,n)=>(d(),U(Ae,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:We({height:l(u)})},{header:a(f=>[e(Oe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(H,null,De(f.cols,b=>(d(),U(oa,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(i(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Oe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:f,class:"text-left wrap-column"},{default:a(()=>[t("div",wk,i(f.row.product_name),1),t("div",hk,i(f.row.product_barcode),1),f.row.notes?(d(),U(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal_price",props:f,class:"text-right"},{default:a(()=>[t("div",$k,[t("div",null,i(l(K)(f.row.subtotal_price)),1),t("div",xk,i(l(K)(f.row.quantity))+" x Rp. "+i(l(K)(f.row.price)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>r.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>r.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Sk=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),Vk={class:"row items-center no-wrap"},qk={class:"col-auto"},ln={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,r=u,n=()=>{r("save")},f=X(()=>o.item.quantity*o.item.price),b=g=>{g.stopPropagation(),g.preventDefault()},p=g=>{o.modelValue&&(g.key==="Enter"?(n(),r("update:modelValue",!1),b(g)):g.key==="Escape"&&(r("update:modelValue",!1),b(g)))};return xe(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item}),(g,_)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>g.$emit("update:modelValue",y))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",Vk,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",qk,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>g.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(ie,{modelValue:c.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=y=>c.item.product_name=y),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ne,{modelValue:c.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=y=>c.item.quantity=y),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Ne,{modelValue:c.item.price,"onUpdate:modelValue":_[3]||(_[3]=y=>c.item.price=y),label:"Harga","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ne,{modelValue:f.value,"onUpdate:modelValue":_[4]||(_[4]=y=>f.value=y),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ie,{modelValue:c.item.notes,"onUpdate:modelValue":_[5]||(_[5]=y=>c.item.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[le(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[fe]]),e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ck=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),Tk={key:0,class:"q-select__selected-item"},on={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(c,{expose:s,emit:u}){const o=P(null),r=c,n=u,f=P([]);let b=null;const p=P(r.modelValue);xe(()=>{r.initialData&&(p.value=r.initialData)}),Be(p,_=>{n("update:modelValue",_),n("customerSelected",_)}),Be(()=>r.modelValue,_=>{p.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const g=(_,y)=>{if(_.length<r.minLength){y(()=>{f.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Ue.get(`/web-api/customers?q=${_}`).then(S=>{y(()=>{f.value=S.data.data})}).catch(S=>{console.error("Gagal mengambil data pelanggan:",S),y(()=>{f.value=[]})})},100)};return(_,y)=>(d(),U(ue,{class:qe(c.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=S=>p.value=S),"use-input":"","input-debounce":"500",label:c.label,options:f.value,onFilter:g,clearable:"",error:c.error,behavior:"menu","error-message":c.errorMessage,disable:c.disable,"hide-bottom-space":"",outlined:c.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a(S=>[e(ne,La(fo(S.itemProps)),{default:a(()=>[e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>[v(i(S.opt.name)+" ("+i(S.opt.code)+")",1)]),_:2},1024),S.opt.phone?(d(),U(ve,{key:0,class:"text-grey-8 q-ml-sm q-mt-xs"},{default:a(()=>[e(C,{name:"phone",class:"inline-icon"}),v(i(S.opt.phone),1)]),_:2},1024)):k("",!0),S.opt.address?(d(),U(ve,{key:1,class:"text-grey-8 q-ml-sm"},{default:a(()=>[e(C,{name:"home_pin",class:"inline-icon"}),v(i(S.opt.address),1)]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1040)]),"selected-item":a(S=>[S.opt?(d(),w("div",Tk,i(S.opt.name)+" ("+i(S.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Pk={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(u,o)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=r=>u.$emit("update:modelValue",r))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[le(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},nn=_t(Pk,[["__scopeId","data-v-22783525"]]),Rk=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),Ok={class:"row items-center no-wrap"},Ik={class:"col text-subtite text-bold text-grey-8"},Uk={class:"col-auto"},sn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,r=u,n=()=>{r("save")},f=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(r("update:modelValue",!1),f(m)))};return xe(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",Ok,[t("div",Ik," Edit "+i(c.data.code),1),t("div",Uk,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(Kt,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(ie,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ie,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[le(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[fe]]),le(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Dk=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"})),jk={class:"q-gutter-sm"},Ek={class:"row items-center"},Ak={class:"text-weight-bold"},Mk={class:"row q-col-gutter-none full-width"},Nk={class:"col-sm-6 col-12 col q-pa-sm"},Bk={class:"row full-width"},zk={class:"col-sm-6 col-12"},Fk={class:"row q-ml-sm items-end"},Lk={class:"row col grow"},Kk={class:"col-12 q-px-sm column"},Hk={class:"row items-start q-col-gutter-none q-px-sm"},Wk={key:0,class:"col"},Yk={class:"text-caption text-grey-6 q-mt-xs"},Qk={key:0,class:"text-caption text-grey-8 q-mt-xs"},Jk={class:"text-italic"},Gk={key:1,class:"col"},Xk={class:"text-grey-8"},Zk={class:"col"},ew={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},tw={class:"text-h4 text-weight-bold"},aw={class:"row q-col-gutter-xs q-py-xs q-px-sm"},lw={class:"col"},ow={__name:"Editor",setup(c){const s=he(),u=be(),o=P(!0),r=P(null),n=P(null),f=P(null),b=P(!1),p=P(null),m=P(null),{isFullscreen:g,toggleFullscreen:_}=xa(m),y="Retur #"+u.props.data.code,S=P(u.props.data.customer),V=P(""),x=P(!1),D=P(!1),L=P(!1),T=P(!1),R=P(null),I=je({id:u.props.data.id,code:u.props.data.code,customer_id:u.props.data.customer_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),N=X(()=>I.items.reduce((Z,ae)=>Z+ae.price*ae.quantity,0)),M=()=>{var Z;_(),g.value||(Z=p==null?void 0:p.value)==null||Z.hideDrawer()},h=Z=>isNaN(Z)||Z<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,j=Z=>isNaN(Z)||Z<0?(gt("Harga tidak valid.","top"),!1):!0,O=Z=>!Z||Z.length==0?(gt("Barcode tidak valid.","top"),!1):!0,$=Z=>{var ae;(ae=V.value)!=null&&ae.endsWith("*")?V.value+=Z.name:V.value=Z.name},A=async()=>{if(x.value)return;const Z=V.value.trim();if(Z.length===0){D.value=!0;return}const ae=Z.split("*");let we=1,se="",G=null;if(ae.length===1)se=ae[0];else if(ae.length<=3)we=parseInt(ae[0]),se=ae[1],ae.length===3&&(G=parseFloat(ae[2]));else{gt("Input tidak valid.","top");return}if(se.length===0){D.value=!0;return}!O(se)&&!h(we)&&!j(G)||(x.value=!0,await Ue.post(route("admin.sales-order-return.add-item"),{order_id:I.id,product_code:se,qty:we,price:G,merge:o.value}).then(me=>{const ee=me.data.data.item;let ge=-1;me.data.data.mergeItem&&(ge=I.items.findIndex(Re=>Re.id===ee.id)),ge===-1?I.items.push(ee):I.items[ge]=ee,V.value="",G!==null&&G!==parseFloat(ee.price)&&gt("Harga tidak dapat diubah!","top")}).catch(me=>{var ee,ge;ct((ge=(ee=me.response)==null?void 0:ee.data)==null?void 0:ge.message,"top"),console.error("Gagal mengambil data produk:",me)}),x.value=!1,ft(()=>{var me;(me=r.value)==null||me.focus()}))},F=Z=>{R.value=Object.create(Z),L.value=!0},q=Z=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${Z.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{x.value=!0,Ue.post(route("admin.sales-order-return.remove-item"),{id:Z.id}).then(()=>{const ae=I.items.findIndex(we=>we.id===Z.id);ae!==-1&&(I.items.splice(ae,1)[0],pt("Item telah dihapus","top"))}).catch(ae=>{var we,se;ct(((se=(we=ae==null?void 0:ae.response)==null?void 0:we.data)==null?void 0:se.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(ae)}).finally(()=>{x.value=!1})})},z=()=>{x.value=!0;const Z=n.value.getCurrentItem(),ae={id:Z.id,qty:Z.quantity,price:Z.price};Z.notes&&(ae.notes=Z.notes),Ue.post(route("admin.sales-order-return.update-item"),ae).then(we=>{const se=we.data.data,G=I.items.findIndex(me=>me.id===se.id);G!==-1&&(I.items[G]=se,pt("Item telah diperbarui","top")),L.value=!1}).catch(we=>{var se,G;ct(((G=(se=we==null?void 0:we.response)==null?void 0:se.data)==null?void 0:G.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(we)}).finally(()=>{x.value=!1})};xe(()=>{const Z=ae=>{b.value||L.value||D.value||T.value||(ae.key==="F1"?(ae.preventDefault(),b.value=!0):ae.key==="F2"?(ae.preventDefault(),f.value.focus()):ae.key==="F3"?(ae.preventDefault(),r.value.focus()):ae.key==="F4"?(ae.preventDefault(),o.value=!o.value):ae.key==="F10"||ae.ctrlKey&&ae.key==="Enter"?(ae.preventDefault(),ce()):ae.key==="F11"?(ae.preventDefault(),M()):(ae.key==="F5"||ae.key==="F6"||ae.key==="F7"||ae.key==="F12")&&ae.preventDefault())};document.addEventListener("keydown",Z),wt(()=>{document.removeEventListener("keydown",Z)}),ft(()=>{var ae;(ae=p==null?void 0:p.value)==null||ae.hideDrawer()})});const oe=async()=>{x.value=!0;const Z={id:I.id,customer_id:I.customer_id??null,datetime:aa(I.datetime),notes:I.notes};await Ue.post(route("admin.sales-order-return.update"),Z).then(ae=>{const we=ae.data.data.id;I.customer_id=we.customer_id}).catch(ae=>{var we,se;ct(((se=(we=ae==null?void 0:ae.response)==null?void 0:we.data)==null?void 0:se.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ae)}).finally(()=>{x.value=!1})},ce=Z=>{if(I.items.length===0){pt("Item masih kosong","top");return}xt.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{x.value=!0,Ue.post(route("admin.sales-order-return.close",{id:I.id})).then(ae=>{pt("Transaksi selesai"),W.get(route("admin.sales-order-return.detail",{id:I.id}))}).catch(ae=>{var we,se;ct((se=(we=ae.response)==null?void 0:we.data)==null?void 0:se.message),console.error(ae)}).finally(()=>{x.value=!1})})},de=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.sales-order-return.cancel",{id:I.id}),{id:I.id}).then(()=>{pt("Transaksi telah dibatalkan."),W.visit(route("admin.sales-order-return.detail",{id:I.id}))}).catch(Z=>{var we,se;const ae=((se=(we=Z.response)==null?void 0:we.data)==null?void 0:se.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:ae,color:"warning",position:"bottom"}),console.error(Z)})})},Ie=()=>{window.open(route("admin.sales-order-return.detail",{id:I.id})+"?preview=1","_blank")},ke=X(()=>S.value?S.value.wallet_balance>=N.value:!0);return(Z,ae)=>{const we=Q("i-head"),se=Q("authenticated-layout");return d(),w(H,null,[e(we,{title:y}),e(se,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[v(i(y))]),"left-button":a(()=>[t("div",jk,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:ae[0]||(ae[0]=G=>l(W).get(Z.route("admin.sales-order-return.index")))})])]),"right-button":a(()=>[t("div",Ek,[l(s).screen.gt.sm?(d(),w(H,{key:0},[t("div",Ak,i(l(u).props.auth.user.username),1),ae[21]||(ae[21]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e($a)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",Mk,[t("div",Nk,[t("div",Bk,[e(on,{ref_key:"customerAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:S.value,"onUpdate:modelValue":ae[2]||(ae[2]=G=>S.value=G),label:"Pelanggan",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),S.value?(d(),U(qa,{key:0,party:S.value,"is-valid-wallet-balance":ke.value},null,8,["party","is-valid-wallet-balance"])):k("",!0)])]),t("div",zk,[e(Va,{ref_key:"userInputRef",ref:r,modelValue:V.value,"onUpdate:modelValue":ae[3]||(ae[3]=G=>V.value=G),onKeyup:ae[4]||(ae[4]=Jt(J(G=>A(),["prevent"]),["enter"])),onScanSuccess:ae[5]||(ae[5]=G=>A()),onSend:ae[6]||(ae[6]=G=>A()),onSearch:ae[7]||(ae[7]=G=>D.value=!0),loading:x.value,disable:x.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",Fk,[e(Tt,{class:"col",modelValue:o.value,"onUpdate:modelValue":ae[8]||(ae[8]=G=>o.value=G),label:"Gabungkan item",disable:x.value},null,8,["modelValue","disable"])])])]),t("div",Lk,[t("div",Kk,[e(an,{items:I.items,onUpdateQuantity:ae[9]||(ae[9]=({id:G,value:me})=>Z.updateQuantity(G,me)),onRemoveItem:q,onEditItem:F,"is-processing":x.value},null,8,["items","is-processing"])])]),t("div",Hk,[l(s).screen.gt.sm?(d(),w("div",Wk,[t("div",Yk,i(I.items.length)+" item(s) ",1),I.notes?(d(),w("div",Qk,[ae[22]||(ae[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Jk,[e(Se,{text:I.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",Gk,[t("div",Xk,[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(i(l(u).props.data.sales_order.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(i(l(_e)(I.datetime)),1)])])])):k("",!0),t("div",Zk,[t("div",ew,[ae[24]||(ae[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",tw,[ae[23]||(ae[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+i(l(K)(N.value)),1)])])])]),t("div",aw,[t("div",lw,[e(E,{class:"full-width",label:"Selesai",color:"primary",icon:"payment",onClick:ae[10]||(ae[10]=G=>ce()),disable:!Z.$can("admin.sales-order-return.close")||x.value||I.items.length===0||I.status!=="draft",loading:x.value},null,8,["disable","loading"])]),t("div",null,[e(E,{icon:"more_vert",color:"grey",onClick:ae[14]||(ae[14]=J(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[le((d(),U(ne,{clickable:"",onClick:ae[11]||(ae[11]=J(G=>T.value=!0,["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>ae[25]||(ae[25]=[v("Edit Rincian")])),_:1})]),_:1})),[[re],[fe]]),le((d(),U(ne,{clickable:"",onClick:ae[12]||(ae[12]=J(G=>Ie(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(B,null,{default:a(()=>ae[26]||(ae[26]=[v("Pratinjau")])),_:1})]),_:1})),[[re],[fe]]),le((d(),U(ne,{clickable:"",onClick:ae[13]||(ae[13]=J(G=>de(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(B,{class:"text-negative"},{default:a(()=>ae[27]||(ae[27]=[v(" Batalkan ")])),_:1})]),_:1})),[[re],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(ln,{ref_key:"itemEditorRef",ref:n,modelValue:L.value,"onUpdate:modelValue":ae[15]||(ae[15]=G=>L.value=G),item:R.value,onSave:ae[16]||(ae[16]=G=>z()),"is-processing":x.value},null,8,["modelValue","item","is-processing"]),e(Sa,{modelValue:D.value,"onUpdate:modelValue":ae[17]||(ae[17]=G=>D.value=G),onProductSelected:$},null,8,["modelValue"]),e(sn,{modelValue:T.value,"onUpdate:modelValue":ae[18]||(ae[18]=G=>T.value=G),data:I,onSave:ae[19]||(ae[19]=G=>oe()),"is-processing":x.value},null,8,["modelValue","data","is-processing"]),e(nn,{modelValue:b.value,"onUpdate:modelValue":ae[20]||(ae[20]=G=>b.value=G)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},nw=Object.freeze(Object.defineProperty({__proto__:null,default:ow},Symbol.toStringTag,{value:"Module"})),sw={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},rw={class:"q-pa-xs"},iw={class:"full-width row flex-center text-grey-8 q-gutter-sm"},dw={key:0},uw={key:1},mw={key:2},cw={key:3},pw={key:0},fw={key:1},gw={key:0},bw={key:0},vw={key:1},_w={class:"flex justify-end"},zl="Retur Penjualan",yw={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=Ft(),m=Lt(),g=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Ot(p-2,p-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...It()],y=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.SALES_ORDER_RETURN_STATUSES)],S=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES)],V=je({search:"",year:p,month:m,status:"all",refund_status:"all",...Ke()}),x=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),D=[{name:"code",label:"Info Order",field:"code",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{M()});const L=O=>{if(O.status=="draft"){T(O);return}R(O)},T=O=>{W.get(route("admin.sales-order-return.edit",O.id))},R=O=>{W.get(route("admin.sales-order-return.detail",O.id))},I=O=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.sales-order-return.cancel",{id:O.id}),{id:O.id}).then($=>{const A=$.data.data,F=o.value.findIndex(q=>q.id===A.id);if(F===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[F].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var F,q;const A=((q=(F=$.response)==null?void 0:F.data)==null?void 0:q.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:A,color:"warning",position:"bottom"}),console.error($)})})},N=O=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${O.code}?`,url:route("admin.sales-order-return.delete",O.id),fetchItemsCallback:M,loading:r}),M=(O=null)=>{He({pagination:x,filter:V,props:O,rows:o,url:route("admin.sales-order-return.data"),loading:r,tableRef:n})},h=()=>{M()},j=X(()=>s.screen.gt.sm?D:D.filter(O=>O.name==="code"||O.name==="action"));return Be(()=>V.year,O=>{O===null&&(V.month=null)}),(O,$)=>{const A=Q("i-head"),F=Q("authenticated-layout");return d(),w(H,null,[e(A,{title:zl}),e(F,null,Fe({title:a(()=>[v(i(zl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=q=>u.value=!u.value)},null,8,["icon"]),O.$can("admin.sales-order-return.edit")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=q=>l(W).get(O.route("admin.sales-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",rw,[e(Ae,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":$[10]||($[10]=q=>x.value=q),filter:V.search,loading:r.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:We({height:l(b)}),onRequest:M,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:z,filter:oe})=>[t("div",iw,[t("span",null,i(z)+" "+i(oe?" with term "+oe:""),1)])]),body:a(q=>[e(Oe,{props:q,class:"cursor-pointer",onClick:J(z=>L(q.row),["prevent"])},{default:a(()=>[e(Y,{key:"code",props:q,class:"wrap-column"},{default:a(()=>{var z,oe,ce;return[t("div",null,[e(C,{name:"tag"}),v(" "+i(q.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(i(l(_e)(q.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[q.row.cashier?(d(),w("div",dw,[e(C,{name:"person",class:"inline-icon"}),v(" Kasir: "+i((z=q.row.cashier)==null?void 0:z.username),1)])):k("",!0),q.row.cashier_session?(d(),w("div",uw,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+i((ce=(oe=q.row.cashier_session)==null?void 0:oe.cashier_terminal)==null?void 0:ce.name),1)])):k("",!0),q.row.customer?(d(),w("div",mw,[e(C,{name:"person",class:"inline-icon"}),e(ya,{href:O.route("admin.customer.detail",{id:q.row.customer.id}),onClick:$[7]||($[7]=J(()=>{},["stop"]))},{default:a(()=>[v(" "+i(q.row.customer.code)+" - "+i(q.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+i(l(K)(q.row.grand_total)),1),q.row.notes?(d(),w("div",cw,[e(C,{name:"notes"}),v(" "+i(q.row.notes),1)])):k("",!0)],64)),t("div",null,[e(zt,{status:q.row.status,statuses:O.$CONSTANTS.SALES_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(zt,{status:q.row.refund_status,statuses:O.$CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Y,{key:"cashier_id",props:q},{default:a(()=>{var z,oe,ce;return[q.row.cashier?(d(),w("div",pw,[e(C,{name:"person",class:"inline-icon"}),v(" "+i((z=q.row.cashier)==null?void 0:z.username),1)])):k("",!0),q.row.cashier_session?(d(),w("div",fw,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" "+i((ce=(oe=q.row.cashier_session)==null?void 0:oe.cashier_terminal)==null?void 0:ce.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Y,{key:"customer_id",props:q},{default:a(()=>[q.row.customer?(d(),w("div",gw,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+i(q.row.customer_code)+" - "+i(q.row.customer_name),1)]),q.row.customer_phone?(d(),w("div",bw,[e(C,{name:"phone",class:"inline-icon"}),v(" "+i(q.row.customer_phone),1)])):k("",!0),q.row.customer_address?(d(),w("div",vw,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+i(q.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total",props:q},{default:a(()=>[v(i(l(K)(q.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:q},{default:a(()=>[e(Se,{text:q.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:q,onClick:$[9]||($[9]=J(()=>{},["stop"]))},{default:a(()=>[t("div",_w,[O.$can("admin.sales-order-return.detail")||O.$can("admin.sales-order-return.edit")||O.$can("admin.sales-order-return.cancel")||O.$can("admin.sales-order-return.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[q.row.status!="draft"&&O.$can("admin.sales-order-return.detail")?le((d(),U(ne,{key:0,onClick:J(z=>R(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(B,null,{default:a(()=>$[11]||($[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),q.row.status=="draft"&&O.$can("admin.sales-order-return.edit")?le((d(),U(ne,{key:1,onClick:J(z=>T(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>$[12]||($[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),q.row.status=="draft"&&O.$can("admin.sales-order-return.cancel")?le((d(),U(ne,{key:2,onClick:J(z=>I(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(B,null,{default:a(()=>$[13]||($[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),e(Pe),O.$can("admin.sales-order-return.delete")?le((d(),U(ne,{key:3,onClick:J(z=>N(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>$[14]||($[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",sw,[e(ue,{modelValue:V.year,"onUpdate:modelValue":[$[2]||($[2]=q=>V.year=q),h],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),V.year!="all"?(d(),U(ue,{key:0,modelValue:V.month,"onUpdate:modelValue":[$[3]||($[3]=q=>V.month=q),h],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:V.year===null},null,8,["modelValue","disable"])):k("",!0),e(ue,{modelValue:V.status,"onUpdate:modelValue":[$[4]||($[4]=q=>V.status=q),h],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ue,{modelValue:V.refund_status,"onUpdate:modelValue":[$[5]||($[5]=q=>V.refund_status=q),h],options:S,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:V.search,"onUpdate:modelValue":$[6]||($[6]=q=>V.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},kw=Object.freeze(Object.defineProperty({__proto__:null,default:yw},Symbol.toStringTag,{value:"Module"})),ww={key:0,class:"text-center q-mb-md text-grey-8"},hw={class:"text-subtitle2 text-weight-medium"},$w={class:"text-h5 text-center text-primary q-pb-md"},xw={class:"q-mb-md flex flex-center"},Sw={key:1},Vw={class:"col-6"},qw={class:"col-6"},Cw={class:"row"},Tw={class:"text-center q-mt-md"},Pw={key:0,class:"text-h6 text-negative text-weight-bold"},Rw={key:1,class:"text-h6 text-green-8 text-weight-bold"},Ow={key:2,class:"text-h6 text-positive text-weight-bold"},Iw={key:2},Uw={class:"text-h6 text-negative text-center"},Dw={key:3},jw={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,r=be(),n=P(!1),f=P("cash"),b=P(new Date),p=P([]),m=P([]),g=je([{id:"cash",amount:0}]),_=r.props.settings.default_payment_mode,y=X(()=>[{label:"Laci Kasir",value:"cash"},...u.customer?[{label:"Wallet",value:"wallet"}]:[],...r.props.accounts.map($=>({label:$.name,value:$.id}))]),S=X(()=>g.reduce(($,A)=>$+(A.amount||0),0)),V=X(()=>u.total-S.value),x=X(()=>{if(!u.customer)return!0;const $=g.find(F=>F.id==="wallet");return($?$.amount:0)<=u.customer.wallet_balance}),D=new Date,L=dt.addToDate(new Date,{days:30}),T=X(()=>[$=>!!$||"Tanggal jatuh tempo harus diisi",$=>dt.isBetweenDates($,D,L,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),R=X(()=>{if(f.value==="debt")return!!u.customer&&T.value.every(z=>z(b.value)===!0);const $=x.value,A=g.some(z=>(z.amount||0)>0),F=g.every(z=>(z.amount||0)>=0),q=V.value<=0;return $&&A&&F&&q}),I=()=>{if(g.length<3){const $=g.length;g.push({id:"cash",amount:0}),ft(()=>{const A=p.value[$];A&&(A.focus(),A.showPopup())})}},N=$=>{if(g.length>1){const A=g.findIndex(F=>F.id===$);A!==-1&&g.splice(A,1)}},M=($,A="cash")=>{f.value=$,b.value=new Date,g.splice(0,g.length),$==="cash"&&(g.splice(0,g.length,{id:A,amount:u.total}),ft(()=>{m.value.length>0&&m.value[0]&&(m.value[0].focus(),m.value[0].select())}))},h=()=>{if(!R.value)return;n.value=!0;let $={total:u.total,is_debt:f.value==="debt"};if(f.value==="debt")$.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),$.payments=[];else{const A=S.value,F=A>u.total?A-u.total:0,q=V.value>0?V.value:0;$.payments=g,$.remaining_debt=q,$.change=F}o("accepted",$),n.value=!1},j=()=>{M("cash",u.customer?_:"cash")};xe(()=>{const $=A=>{u.modelValue&&A.ctrlKey&&A.key==="Enter"&&(A.preventDefault(),h())};document.addEventListener("keydown",$),wt(()=>{document.removeEventListener("keydown",$)})});const O=($,A)=>{ft(()=>{m.value[A]&&(m.value[A].focus(),m.value[A].select())})};return($,A)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":A[3]||(A[3]=F=>$.$emit("update:modelValue",F)),onBeforeShow:j},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>A[4]||(A[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[c.customer?(d(),w("div",ww,[t("div",hw,[v(" Username: "+i(c.customer.code)+" ",1),A[5]||(A[5]=t("br",null,null,-1)),v(" Nama: "+i(c.customer.name),1),A[6]||(A[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+i(l(K)(c.customer.wallet_balance)),1)])])):k("",!0),t("div",$w," Total: Rp. "+i(l(K)(c.total)),1),t("div",xw,[e(l(Qt),{modelValue:f.value,"onUpdate:modelValue":[A[0]||(A[0]=F=>f.value=F),M],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="cash"?(d(),w("div",Sw,[(d(!0),w(H,null,De(g,(F,q)=>(d(),w("div",{key:q,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Vw,[e(l(ue),{modelValue:F.id,"onUpdate:modelValue":[z=>F.id=z,z=>O(z,q)],options:y.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:z=>p.value[q]=z},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",qw,[e(Ne,{modelValue:F.amount,"onUpdate:modelValue":z=>F.amount=z,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:F.id==="wallet"&&!x.value,"error-message":F.id==="wallet"&&!x.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:z=>m.value[q]=z},Fe({_:2},[g.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:z=>N(F.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Cw,[e(E,{disable:!(g.length<3&&V.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:I,size:"sm"},null,8,["disable"])]),t("div",Tw,[V.value>0?(d(),w("div",Pw," Sisa Tagihan: Rp. "+i(l(K)(V.value)),1)):V.value<0?(d(),w("div",Rw," Kembalian: Rp. "+i(l(K)(Math.abs(V.value))),1)):(d(),w("div",Ow," Tagihan Terbayar "))])])):f.value==="debt"&&c.customer?(d(),w("div",Iw,[e(pa,{outlined:"",modelValue:b.value,"onUpdate:modelValue":A[1]||(A[1]=F=>b.value=F),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(D),"max-date":l(L),rules:T.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Uw," Total Utang: Rp. "+i(l(K)(c.total)),1)])):f.value==="debt"&&!c.customer?(d(),w("div",Dw,A[7]||(A[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:A[2]||(A[2]=F=>$.$emit("update:modelValue",!1)),class:"col"}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:h,disable:n.value||!R.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ew=Object.freeze(Object.defineProperty({__proto__:null,default:jw},Symbol.toStringTag,{value:"Module"})),Aw={key:0},Mw={style:{float:"right"}},Nw={key:1},Bw={style:{float:"right"}},zw={key:2},Fw={style:{float:"right"}},Lw={key:3},Kw={style:{float:"right"}},Hw={style:{float:"right"}},Ww={class:"q-gutter-sm"},Yw={class:"q-my-md"},Qw={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const u=P(null),o=()=>{var r;(r=u.value)==null||r.focus()};return(r,n)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>r.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,i(c.order.code),1)]),c.customer?(d(),w("tr",Aw,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(i(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(i(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Mw,i(l(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",Nw,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",Bw,i(l(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",zw,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",Fw,i(l(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",Lw,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Kw,i(l(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Hw,i(l(K)(c.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",Ww,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Yw,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Jw=_t(Qw,[["__scopeId","data-v-a3bb29e0"]]),Gw=Object.freeze(Object.defineProperty({__proto__:null,default:Jw},Symbol.toStringTag,{value:"Module"})),Xw={class:"column"},Zw={class:"bg-grey-2 q-pa-xs"},e0={class:"text-subtitle1 text-bold text-grey-10"},t0={class:"text-caption text-grey-8"},a0={class:"col-12 col-sm-6"},l0={class:"full-width"},o0={key:1},n0={key:0},s0={key:1},r0={class:"col-12 col-sm-6",align:"left"},i0={class:"full-width"},d0={key:0};const u0={key:2},m0={class:"full-width",style:{"border-collapse":"collapse"}},c0={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},p0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},f0={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},g0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},b0={key:0},v0={class:"col-12 col-sm-6"},_0={class:"text-body2 text-grey-7 text-italic"},y0={class:"col-12 col-sm-6"},k0={class:"row justify-end q-gutter-y-xs"},w0={class:"col-12 row justify-between"},h0={class:"text-subtitle2 text-bold"},$0={key:0,class:"row justify-end q-gutter-y-xs"},x0={class:"col-12 row justify-between"},S0={class:"text-subtitle2 text-bold"},V0={class:"row justify-end q-gutter-y-xs"},q0={class:"col-12 row justify-between"},C0={class:"text-subtitle2 text-bold"},T0={key:1,class:"row justify-end q-gutter-y-xs"},P0={class:"col-12 row justify-between"},R0={class:"text-subtitle2 text-bold"},O0={key:2,class:"row justify-end q-gutter-y-xs"},I0={class:"col-12 row justify-between"},U0={class:"text-subtitle2 text-bold"},rn={__name:"InvoiceTab",props:{data:Object},setup(c){const s=c;return(u,o)=>{const r=Q("i-link");return d(),w("div",Xw,[e(te,{class:"q-pa-none"},{default:a(()=>[t("div",Zw,[t("div",e0," INVOICE #"+i(s.data.code),1),t("div",t0,[v(" Kasir: "+i(s.data.cashier.username)+" - "+i(s.data.cashier.name)+" | "+i(l(_e)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),w(H,{key:0},[v(" | Session ID: "+i(s.data.cashier_session.id)+" | Terminal: "+i(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Pe),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",a0,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",l0,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),w(H,{key:0},[e(C,{class:"inline-icon",name:"person"}),e(r,{href:u.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[v(i(s.data.customer_name)+" ("+i(s.data.customer_code)+") ",1)]),_:1},8,["href"])],64)):(d(),w("div",o0,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(d(),w("tr",n0,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),e(ea,{phone:s.data.customer_phone},null,8,["phone"])])])):k("",!0),s.data.customer_address?(d(),w("tr",s0,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),(d(),w(H,{key:0},[v(i(s.data.customer_address),1)],64))])])):k("",!0)])])]),t("div",r0,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",i0,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(_e)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(u.$CONSTANTS.SALES_ORDER_STATUSES[s.data.status]),1)]),s.data.status=="closed"?(d(),w("tr",d0,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,i(u.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)])):k("",!0),k("",!0),s.data.due_date?(d(),w("tr",u0,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,i(l(da)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("table",m0,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(H,null,De(s.data.details,n=>(d(),w("tr",{key:n.id},[t("td",c0,[e(r,{href:u.route("admin.product.detail",n.product_id)},{default:a(()=>[v(i(n.product_name),1)]),_:2},1032,["href"])]),t("td",p0,i(l(K)(n.price)),1),t("td",f0,i(n.quantity),1),t("td",g0,i(l(K)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),w("tr",b0,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(te,{class:"row",align:"left"},{default:a(()=>[t("div",v0,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",_0,i(s.data.notes?s.data.notes:"-"),1)]),t("div",y0,[s.data.status=="closed"&&s.data.change>0?(d(),w(H,{key:0},[t("div",k0,[t("div",w0,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Jumlah Bayar",-1)),t("div",h0,i(l(K)(parseInt(s.data.total_paid)+parseInt(s.data.change))),1)])]),s.data.status=="closed"?(d(),w("div",$0,[t("div",x0,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Kembalian",-1)),t("div",S0,i(l(K)(s.data.change)),1)])])):k("",!0)],64)):k("",!0),t("div",V0,[t("div",q0,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",C0,i(l(K)(s.data.grand_total)),1)])]),s.data.status=="closed"&&s.data.total_return!=0?(d(),w("div",T0,[t("div",P0,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",R0,i(l(K)(s.data.total_return)),1)])])):k("",!0),s.data.status=="closed"&&s.data.balance!=0?(d(),w("div",O0,[t("div",I0,[o[20]||(o[20]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",U0,i(l($t)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},D0=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"})),j0={key:0,class:"text-center q-mb-md text-grey-8"},E0={class:"text-subtitle2 text-weight-medium"},A0={class:"text-h5 text-center text-primary q-pb-md"},M0={class:"text-center q-mt-md"},N0={key:0,class:"text-h6 text-negative text-weight-bold"},B0={key:1,class:"text-h6 text-green-8 text-weight-bold"},z0={key:2,class:"text-h6 text-positive text-weight-bold"},dn={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,r=be(),n=P(!1),f=P({method:"cash",amount:u.total,notes:null}),b=r.props.data.customer,p=X(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...b?[{label:"Wallet",value:"wallet"}]:[],...r.props.accounts.map(V=>({label:V.name,value:V.id}))]),m=X(()=>u.total-(f.value.amount||0)),g=X(()=>{const V=f.value.amount||0;return u.total,V<=0?"Jumlah pembayaran harus lebih dari 0.":f.value.method==="wallet"&&b&&V>b.wallet_balance?"Saldo wallet tidak mencukupi.":null}),_=X(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const V={total_paid:f.value.amount,payments:[{id:f.value.method,amount:f.value.amount}],notes:f.value.notes,change:Math.max(0,(f.value.amount||0)-u.total),remaining_debt:Math.max(0,u.total-(f.value.amount||0))};o("accepted",V),n.value=!1},S=()=>{f.value.amount=u.total,f.value.method="cash",f.value.notes=null};return(V,x)=>{const D=Q("my-link");return d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":x[4]||(x[4]=L=>V.$emit("update:modelValue",L)),onBeforeShow:S},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>x[5]||(x[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",j0,[t("div",E0,[t("div",null,[e(D,{href:V.route("admin.customer.detail",{id:l(b).id}),target:"_blank"},{default:a(()=>[v(i(l(b).code)+" - "+i(l(b).name),1)]),_:1},8,["href"])]),t("div",{class:qe(l(b).wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+i(l(K)(l(b).wallet_balance)),3),t("div",{class:qe(l(b).balance>0?"text-green":"text-red")},i(l(b).balance>0?"Piutang":"Utang")+": "+i(l(K)(l(b).balance)),3)])])):k("",!0),t("div",A0," Total: Rp. "+i(l(K)(c.total)),1),e(l(ue),{modelValue:f.value.method,"onUpdate:modelValue":x[0]||(x[0]=L=>f.value.method=L),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Ne,{modelValue:f.value.amount,"onUpdate:modelValue":x[1]||(x[1]=L=>f.value.amount=L),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:f.value.notes,"onUpdate:modelValue":x[2]||(x[2]=L=>f.value.notes=L),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",M0,[m.value>0?(d(),w("div",N0," Sisa Tagihan: Rp. "+i(l(K)(m.value)),1)):m.value<0?(d(),w("div",B0," Kembalian: Rp. "+i(l(K)(Math.abs(m.value))),1)):(d(),w("div",z0," Tagihan Terbayar "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:x[3]||(x[3]=L=>V.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},F0=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"})),L0={class:"column"},K0={class:"row"},H0={class:"full-width",style:{"border-collapse":"collapse"}},W0={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Y0={class:"row items-center q-gutter-x-sm"},Q0={class:"text-weight-bold"},J0={class:"row items-center q-gutter-x-sm q-mt-xs"},G0={class:"text-caption text-grey-6"},X0={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Z0={class:"q-mt-xs"},e2={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},t2={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},a2={key:0},l2={class:"text-right q-pa-sm"},un={__name:"PaymentTab",props:{data:Object},setup(c){const s=c,u=he(),o=P(!1),r=()=>{o.value=!0},n=async b=>{const p={order_id:s.data.id,payments:b.payments,notes:b.notes};u.loading.show({message:"Memproses pembayaran..."});try{const m=await Ue.post(route("admin.sales-order.add-payment"),p);u.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,W.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(m){let g="Gagal memproses pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}},f=b=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Ue.post(route("admin.sales-order.delete-payment",{id:b.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),W.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(p){let m="Gagal menghapus pembayaran.";p.response&&p.response.data&&p.response.data.message?m=p.response.data.message:p.message&&(m=p.message),u.notify({message:m,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(b,p)=>{const m=Q("my-link");return d(),w(H,null,[t("div",L0,[e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("div",K0,[b.$can("admin.sales-order.add-payment")?(d(),U(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:p[0]||(p[0]=J(g=>r(),["stop"]))})):k("",!0)]),t("table",H0,[p[5]||(p[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(H,null,De(s.data.payments,g=>(d(),w("tr",{key:g.id},[t("td",W0,[t("div",Y0,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",Q0,i(g.code),1)]),t("div",J0,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",G0,i(l(_e)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),w("div",X0,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),e(m,{href:b.route("admin.finance-account.detail",{id:g.account.id})},{default:a(()=>[v(i(g.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",Z0,[e(st,{label:b.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(st,{label:g.amount>0?"Pembayaran":"Refund",color:g.amount>0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",e2,i(l(K)(g.amount)),1),t("td",t2,[b.$can("admin.sales-order.delete-payment")&&s.data.customer_id&&g.amount>0?(d(),U(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",a2,p[2]||(p[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[p[3]||(p[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",l2,i(l(K)(s.data.balance)),1),p[4]||(p[4]=t("td",null,null,-1))])])])]),_:1})]),e(dn,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=g=>o.value=g),total:Math.abs(s.data.balance),customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},o2=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"})),n2={class:"q-gutter-sm"},s2={class:"col col-lg-6 q-pa-xs",align:"center"},Fl="Rincian Penjualan",r2={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),u=be(),o=u.props.data,r=P(s.get("preview")||!1),f=P(s.get("tab")||"invoice");xe(()=>{ft(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.sales-order.print",{id:u.props.data.id,size:p}),"_self")};return(p,m)=>{const g=Q("i-head"),_=Q("authenticated-layout");return d(),w(H,null,[e(g,{title:Fl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,i(Fl))])]),"left-button":a(()=>[t("div",n2,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>r.value?l(W).get(p.route("admin.sales-order.edit",l(u).props.data.id)):l(W).get(p.route("admin.sales-order.index")))})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=y=>b("a4"))}),r.value?k("",!0):(d(),U(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=y=>l(W).get(p.route("admin.sales-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",s2,[e(pe,{square:"",flat:"",bordered:"",class:qe(["full-width",r.value?"draft-label":f.value!="invoice"?"":l(u).props.data.payment_status=="fully_paid"?"paid-label":"unpaid-label"]),style:{"max-width":"1024px"}},{default:a(()=>[e(qt,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(rt,{name:"invoice",label:"Invoice"}),r.value?k("",!0):(d(),U(rt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Ct,{modelValue:f.value,"onUpdate:modelValue":m[5]||(m[5]=y=>f.value=y),animated:""},{default:a(()=>[e(it,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(rn,{data:l(o)},null,8,["data"])]),_:1}),e(it,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(un,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])])]),_:1})]),_:1})],64)}}},i2=Object.freeze(Object.defineProperty({__proto__:null,default:r2},Symbol.toStringTag,{value:"Module"})),d2={class:"text-weight-medium"},u2={class:"text-caption text-grey-6 elipsis"},m2={class:"column items-end"},c2={class:"text-caption text-grey-6 text-italic"},mn={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=he(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(r,n)=>(d(),U(Ae,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:We({height:l(u)})},{header:a(f=>[e(Oe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(H,null,De(f.cols,b=>(d(),U(oa,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(i(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Oe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:f,class:"text-left wrap-column"},{default:a(()=>[t("div",d2,i(f.row.product_name),1),t("div",u2,i(f.row.product_barcode),1),f.row.notes?(d(),U(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal_price",props:f,class:"text-right"},{default:a(()=>[t("div",m2,[t("div",null,i(l(K)(f.row.subtotal_price)),1),t("div",c2,i(l(K)(f.row.quantity))+" "+i(f.row.product_uom)+" x Rp. "+i(l(K)(f.row.price)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>r.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>r.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},p2=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),f2={key:0,class:"text-center q-mb-md text-grey-8"},g2={class:"text-subtitle2 text-weight-medium"},b2={class:"text-h5 text-center text-primary q-pb-md"},v2={class:"q-mb-md flex flex-center"},_2={key:1},y2={class:"col-6"},k2={class:"col-6"},w2={class:"row"},h2={class:"text-center q-mt-md"},$2={key:0,class:"text-h6 text-negative text-weight-bold"},x2={key:1,class:"text-h6 text-green-8 text-weight-bold"},S2={key:2,class:"text-h6 text-positive text-weight-bold"},V2={key:2},q2={class:"text-h6 text-negative text-center"},C2={key:3},cn={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,r=be(),n=P(!1),f=P("cash"),b=P(new Date),p=P(r.props.settings.after_payment_action??"print"),m=P([]),g=P([]),_=je([{id:"cash",amount:0}]),y=r.props.settings.default_payment_mode,S=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],V=X(()=>[{label:"Laci Kasir",value:"cash"},...u.customer?[{label:"Wallet",value:"wallet"}]:[],...r.props.accounts.map(F=>({label:F.name,value:F.id}))]),x=X(()=>_.reduce((F,q)=>F+(q.amount||0),0)),D=X(()=>u.total-x.value),L=X(()=>{if(!u.customer)return!0;const F=_.find(z=>z.id==="wallet");return(F?F.amount:0)<=u.customer.wallet_balance}),T=new Date,R=dt.addToDate(new Date,{days:30}),I=X(()=>[F=>!!F||"Tanggal jatuh tempo harus diisi",F=>dt.isBetweenDates(F,T,R,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),N=X(()=>{if(f.value==="debt")return!!u.customer&&I.value.every(ce=>ce(b.value)===!0);const F=L.value,q=_.some(ce=>(ce.amount||0)>0),z=_.every(ce=>(ce.amount||0)>=0),oe=D.value<=0;return F&&q&&z&&oe}),M=()=>{if(_.length<3){const F=_.length;_.push({id:"cash",amount:0}),ft(()=>{const q=m.value[F];q&&(q.focus(),q.showPopup())})}},h=F=>{if(_.length>1){const q=_.findIndex(z=>z.id===F);q!==-1&&_.splice(q,1)}},j=(F,q="cash")=>{f.value=F,b.value=new Date,_.splice(0,_.length),F==="cash"&&(_.splice(0,_.length,{id:q,amount:u.total}),ft(()=>{g.value.length>0&&g.value[0]&&(g.value[0].focus(),g.value[0].select())}))},O=()=>{if(!N.value)return;n.value=!0;let F={total:u.total,is_debt:f.value==="debt",after_payment_action:p.value};if(f.value==="debt")F.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),F.payments=[];else{const q=x.value,z=q>u.total?q-u.total:0,oe=D.value>0?D.value:0;F.payments=_,F.remaining_debt=oe,F.change=z}o("accepted",F),n.value=!1},$=()=>{j("cash",u.customer?y:"cash")};xe(()=>{const F=q=>{u.modelValue&&q.ctrlKey&&q.key==="Enter"&&(q.preventDefault(),O())};document.addEventListener("keydown",F),wt(()=>{document.removeEventListener("keydown",F)})});const A=(F,q)=>{ft(()=>{g.value[q]&&(g.value[q].focus(),g.value[q].select())})};return(F,q)=>{const z=Q("my-link");return d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":q[4]||(q[4]=oe=>F.$emit("update:modelValue",oe)),onBeforeShow:$},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>q[5]||(q[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[c.customer?(d(),w("div",f2,[t("div",g2,[t("div",null,[e(z,{href:F.route("admin.customer.detail",{id:c.customer.id}),target:"_blank"},{default:a(()=>[v(i(c.customer.code)+" - "+i(c.customer.name),1)]),_:1},8,["href"])]),t("div",{class:qe(c.customer.wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+i(l(K)(c.customer.wallet_balance)),3),t("div",{class:qe(c.customer.balance>0?"text-green":"text-red")},i(c.customer.balance>0?"Piutang":"Utang")+": "+i(l(K)(c.customer.balance)),3)])])):k("",!0),t("div",b2," Total: Rp. "+i(l(K)(c.total)),1),t("div",v2,[e(l(Qt),{modelValue:f.value,"onUpdate:modelValue":[q[0]||(q[0]=oe=>f.value=oe),j],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="cash"?(d(),w("div",_2,[(d(!0),w(H,null,De(_,(oe,ce)=>(d(),w("div",{key:ce,class:"row q-col-gutter-sm q-mb-sm"},[t("div",y2,[e(l(ue),{modelValue:oe.id,"onUpdate:modelValue":[de=>oe.id=de,de=>A(de,ce)],options:V.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:de=>m.value[ce]=de},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",k2,[e(Ne,{modelValue:oe.amount,"onUpdate:modelValue":de=>oe.amount=de,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:oe.id==="wallet"&&!L.value,"error-message":oe.id==="wallet"&&!L.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:de=>g.value[ce]=de},Fe({_:2},[_.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:de=>h(oe.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",w2,[e(E,{disable:!(_.length<3&&D.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:M,size:"sm"},null,8,["disable"])]),t("div",h2,[D.value>0?(d(),w("div",$2," Sisa Tagihan: Rp. "+i(l(K)(D.value)),1)):D.value<0?(d(),w("div",x2," Kembalian: Rp. "+i(l(K)(Math.abs(D.value))),1)):(d(),w("div",S2," Tagihan Terbayar "))])])):f.value==="debt"&&c.customer?(d(),w("div",V2,[e(pa,{outlined:"",modelValue:b.value,"onUpdate:modelValue":q[1]||(q[1]=oe=>b.value=oe),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(T),"max-date":l(R),rules:I.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",q2," Total Utang: Rp. "+i(l(K)(c.total)),1)])):f.value==="debt"&&!c.customer?(d(),w("div",C2,q[6]||(q[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(l(ue),{modelValue:p.value,"onUpdate:modelValue":q[2]||(q[2]=oe=>p.value=oe),options:S,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:n.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(E,{flat:"",label:"Batal",color:"grey",onClick:q[3]||(q[3]=oe=>F.$emit("update:modelValue",!1)),class:"col"}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:O,disable:n.value||!N.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},T2=Object.freeze(Object.defineProperty({__proto__:null,default:cn},Symbol.toStringTag,{value:"Module"})),P2={class:"row items-center no-wrap"},R2={class:"col-auto"},pn={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,r=u,n=()=>{r("save")},f=X(()=>o.item.quantity*o.item.price),b=g=>{g.stopPropagation(),g.preventDefault()},p=g=>{o.modelValue&&(g.key==="Enter"?(n(),r("update:modelValue",!1),b(g)):g.key==="Escape"&&(r("update:modelValue",!1),b(g)))};return xe(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item}),(g,_)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>g.$emit("update:modelValue",y))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",P2,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",R2,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>g.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>{var y;return[e(ie,{modelValue:c.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=S=>c.item.product_name=S),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ne,{modelValue:c.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=S=>c.item.quantity=S),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Ne,{modelValue:c.item.price,"onUpdate:modelValue":_[3]||(_[3]=S=>c.item.price=S),label:"Harga (Rp)",readonly:!((y=c.item.product)!=null&&y.price_editable),"hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","readonly","disable"]),e(Ne,{modelValue:f.value,"onUpdate:modelValue":_[4]||(_[4]=S=>f.value=S),label:"Subtotal (Rp)","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ie,{modelValue:c.item.notes,"onUpdate:modelValue":_[5]||(_[5]=S=>c.item.notes=S),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]}),_:1}),e(tt,{align:"right"},{default:a(()=>[le(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[fe]]),le(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},O2=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),I2={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(u,o)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=r=>u.$emit("update:modelValue",r))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[le(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},fn=_t(I2,[["__scopeId","data-v-92052544"]]),U2=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"})),D2={class:"row items-center no-wrap"},j2={class:"col text-subtite text-bold text-grey-8"},E2={class:"col-auto"},gn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,r=u,n=()=>{r("save")},f=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(r("update:modelValue",!1),f(m)))};return xe(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",D2,[t("div",j2," Edit "+i(c.data.code),1),t("div",E2,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(Kt,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(ie,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ie,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[le(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[fe]]),le(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},A2=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),M2={key:0},N2={style:{float:"right"}},B2={key:1},z2={style:{float:"right"}},F2={key:2},L2={style:{float:"right"}},K2={key:3},H2={style:{float:"right"}},W2={style:{float:"right"}},Y2={class:"q-gutter-sm"},Q2={class:"q-my-md"},J2={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const u=P(null),o=()=>{var r;(r=u.value)==null||r.focus()};return(r,n)=>(d(),U(lt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>r.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,i(c.order.code),1)]),c.customer?(d(),w("tr",M2,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(i(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(i(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",N2,i(l(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",B2,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",z2,i(l(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",F2,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",L2,i(l(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",K2,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",H2,i(l(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",W2,i(l(K)(c.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",Y2,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Q2,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},bn=_t(J2,[["__scopeId","data-v-794fd35f"]]),G2=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"})),X2={class:"q-gutter-sm"},Z2={class:"row items-center"},eh={class:"text-weight-bold"},th={class:"text-weight-bold"},ah={class:"row q-col-gutter-none full-width"},lh={class:"col-sm-6 col-12 col q-pa-sm"},oh={class:"row full-width"},nh={class:"col-sm-6 col-12"},sh={class:"row q-ml-sm items-end"},rh={class:"row col grow"},ih={class:"col-12 q-px-sm column"},dh={class:"row items-start q-col-gutter-none q-px-sm"},uh={key:0,class:"col"},mh={class:"text-caption text-grey-6"},ch={key:0,class:"text-caption text-grey-8 q-mt-xs"},ph={class:"text-italic"},fh={key:1,class:"col"},gh={class:"text-grey-8"},bh={class:"col"},vh={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},_h={class:"text-h4 text-weight-bold"},yh={class:"row q-col-gutter-sm q-py-xs q-px-sm"},kh={class:"col"},wh={__name:"Editor",setup(c){const s=he(),u=be(),o=P(!0),r=P(null),n=P(null),f=P(null),b=P(!1),p=P(null),m=P(null),{isFullscreen:g,toggleFullscreen:_}=xa(m),y=u.props.data.code,S=P(u.props.data.customer),V=P(null),x=P(""),D=P(!1),L=P(!1),T=P(!1),R=P(!1),I=P(!1),N=P(!1),M=P(null),h=P("price_1"),j=je({id:u.props.data.id,code:u.props.data.code,customer_id:u.props.data.customer_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),O=X(()=>j.items.reduce((me,ee)=>me+ee.price*ee.quantity,0)),$=()=>{_()},A=me=>isNaN(me)||me<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,F=me=>isNaN(me)||me<0?(gt("Harga tidak valid.","top"),!1):!0,q=me=>!me||me.length==0?(gt("Barcode tidak valid.","top"),!1):!0,z=me=>{var ee;(ee=x.value)!=null&&ee.endsWith("*")?x.value+=me.name:x.value=me.name},oe=async()=>{var bt;if(D.value)return;const me=(bt=x.value)==null?void 0:bt.trim();if(me.length===0){T.value=!0;return}const ee=me.split("*");let ge=1,Re="",$e=null;if(ee.length===1)Re=ee[0];else if(ee.length<=3)ge=parseInt(ee[0]),Re=ee[1],ee.length===3&&($e=parseFloat(ee[2]));else{gt("Input tidak valid.","top");return}if(Re.length===0){T.value=!0;return}!q(Re)&&!A(ge)&&!F($e)||(D.value=!0,await Ue.post(route("admin.sales-order.add-item"),{order_id:j.id,product_code:Re,qty:ge,price:$e,merge:o.value}).then(ht=>{const Ut=ht.data.data.item;let At=-1;ht.data.data.mergeItem&&(At=j.items.findIndex(Ht=>Ht.id===Ut.id)),At===-1?j.items.push(Ut):j.items[At]=Ut,x.value="",$e!==null&&$e!==parseFloat(Ut.price)&&gt("Harga tidak dapat diubah!","top")}).catch(ht=>{var Ut,At;ct((At=(Ut=ht.response)==null?void 0:Ut.data)==null?void 0:At.message,"top"),console.error("Gagal mengambil data produk:",ht)}),D.value=!1,ft(()=>{var ht;(ht=r.value)==null||ht.focus()}))},ce=me=>{M.value=Object.create(me),R.value=!0},de=me=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${me.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{D.value=!0,Ue.post(route("admin.sales-order.remove-item"),{id:me.id}).then(()=>{const ee=j.items.findIndex(ge=>ge.id===me.id);ee!==-1&&(j.items.splice(ee,1)[0],pt("Item telah dihapus","top"))}).catch(ee=>{var ge,Re;ct(((Re=(ge=ee==null?void 0:ee.response)==null?void 0:ge.data)==null?void 0:Re.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(ee)}).finally(()=>{D.value=!1})})},Ie=()=>{D.value=!0;const me=n.value.getCurrentItem(),ee={id:me.id,qty:me.quantity};me.product.price_editable&&(ee.price=me.price),me.notes&&(ee.notes=me.notes),Ue.post(route("admin.sales-order.update-item"),ee).then(ge=>{const Re=ge.data.data,$e=j.items.findIndex(bt=>bt.id===Re.id);$e!==-1&&(j.items[$e]=Re,pt("Item telah diperbarui","top"))}).catch(ge=>{var Re,$e;ct((($e=(Re=ge==null?void 0:ge.response)==null?void 0:Re.data)==null?void 0:$e.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ge)}).finally(()=>{D.value=!1})};xe(()=>{const me=ee=>{L.value||b.value||R.value||T.value||I.value||(ee.key==="F1"?(ee.preventDefault(),b.value=!0):ee.key==="F2"?(ee.preventDefault(),f.value.focus()):ee.key==="F3"?(ee.preventDefault(),r.value.focus()):ee.key==="F4"?(ee.preventDefault(),o.value=!o.value):ee.key==="F10"||ee.ctrlKey&&ee.key==="Enter"?(ee.preventDefault(),G.value&&(L.value=!0)):ee.key==="F11"?(ee.preventDefault(),$()):(ee.key==="F5"||ee.key==="F6"||ee.key==="F7"||ee.key==="F12")&&ee.preventDefault())};document.addEventListener("keydown",me),wt(()=>{document.removeEventListener("keydown",me)})});const ke=async me=>{S.value=me,j.customer_id=me==null?void 0:me.id,await Z(),me!=null&&me.id?(h.value=S.value.default_price_type??"price_1",r.value.focus()):(h.value="price_1",f.value.focus())},Z=async()=>{D.value=!0;const me={id:j.id,customer_id:j.customer_id??null,datetime:aa(j.datetime),notes:j.notes};await Ue.post(route("admin.sales-order.update"),me).then(ee=>{const ge=ee.data.data.id;j.customer_id=ge.customer_id}).catch(ee=>{var ge,Re;ct(((Re=(ge=ee==null?void 0:ee.response)==null?void 0:ge.data)==null?void 0:Re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ee)}).finally(()=>{D.value=!1})},ae=me=>{if(j.items.length===0){pt("Item masih kosong","top");return}const ee={id:j.id,...me};D.value=!0,Ue.post(route("admin.sales-order.close"),ee).then(ge=>{pt("Transaksi selesai"),ee.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:j.id,size:u.props.settings.default_print_size}),"_self"):ee.after_payment_action==="detail"?W.get(route("admin.sales-order.detail",{id:j.id})):ee.after_payment_action==="new-order"&&W.get(route("admin.sales-order.add"))}).catch(ge=>{var Re,$e;ct(($e=(Re=ge.response)==null?void 0:Re.data)==null?void 0:$e.message),console.error(ge)}).finally(()=>{D.value=!1})},we=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${j.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.sales-order.cancel",{id:j.id}),{id:j.id}).then(()=>{pt("Transaksi telah dibatalkan."),W.visit(route("admin.sales-order.detail",{id:j.id}))}).catch(me=>{var ge,Re;const ee=((Re=(ge=me.response)==null?void 0:ge.data)==null?void 0:Re.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:ee,color:"warning",position:"bottom"}),console.error(me)})})},se=()=>{window.open(route("admin.sales-order.detail",{id:j.id})+"?preview=1","_blank")};X(()=>S.value?S.value.wallet_balance>=O.value:!0);const G=X(()=>Rt().appContext.config.globalProperties.$can("admin.sales-order.close")&&!D.value&&j.items.length!==0&&j.status==="draft");return(me,ee)=>{const ge=Q("i-head"),Re=Q("authenticated-layout");return d(),w(H,null,[e(ge,{title:l(y)},null,8,["title"]),e(Re,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[v(i(l(y)),1)]),"left-button":a(()=>[t("div",X2,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:ee[0]||(ee[0]=$e=>l(W).get(me.route("admin.sales-order.index")))})])]),"right-button":a(()=>{var $e,bt;return[t("div",Z2,[l(s).screen.gt.sm?(d(),w(H,{key:0},[t("div",eh,i(l(u).props.auth.user.username),1),ee[23]||(ee[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",th,i((bt=($e=l(u).props.data.cashier_session)==null?void 0:$e.cashier_terminal)==null?void 0:bt.name),1),ee[24]||(ee[24]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e($a)])],64)):k("",!0),k("",!0)])]}),default:a(()=>[e(Te,{class:"bg-grey-2 column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",ah,[t("div",lh,[t("div",oh,[e(on,{ref_key:"customerAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:S.value,"onUpdate:modelValue":ee[2]||(ee[2]=$e=>S.value=$e),label:"Pemasok",disable:D.value,onCustomerSelected:ke,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),S.value?(d(),U(qa,{key:0,party:S.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",nh,[e(Va,{ref_key:"userInputRef",ref:r,modelValue:x.value,"onUpdate:modelValue":ee[3]||(ee[3]=$e=>x.value=$e),onKeyup:ee[4]||(ee[4]=Jt(J($e=>oe(),["prevent"]),["enter"])),onScanSuccess:ee[5]||(ee[5]=$e=>oe()),onSend:ee[6]||(ee[6]=$e=>oe()),onSearch:ee[7]||(ee[7]=$e=>T.value=!0),loading:D.value,disable:D.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",sh,[e(Tt,{class:"col",modelValue:o.value,"onUpdate:modelValue":ee[8]||(ee[8]=$e=>o.value=$e),label:"Gabungkan item",disable:D.value},null,8,["modelValue","disable"])])])]),t("div",rh,[t("div",ih,[e(mn,{items:j.items,onUpdateQuantity:ee[9]||(ee[9]=({id:$e,value:bt})=>me.updateQuantity($e,bt)),onRemoveItem:de,onEditItem:ce,"is-processing":D.value},null,8,["items","is-processing"])])]),t("div",dh,[l(s).screen.gt.sm?(d(),w("div",uh,[t("div",mh,i(j.items.length)+" item(s) ",1),j.notes?(d(),w("div",ch,[ee[25]||(ee[25]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",ph,[e(Se,{text:j.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",fh,[t("div",gh,[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(i(j.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(i(l(_e)(j.datetime)),1)])])])):k("",!0),t("div",bh,[t("div",vh,[ee[27]||(ee[27]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",_h,[ee[26]||(ee[26]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+i(l(K)(O.value)),1)])])])]),t("div",yh,[t("div",kh,[e(E,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:ee[10]||(ee[10]=$e=>L.value=!0),disable:!G.value,loading:D.value},null,8,["disable","loading"])]),t("div",null,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:ee[14]||(ee[14]=J(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[le((d(),U(ne,{clickable:"",onClick:ee[11]||(ee[11]=J($e=>I.value=!0,["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>ee[28]||(ee[28]=[v("Edit Rincian")])),_:1})]),_:1})),[[re],[fe]]),le((d(),U(ne,{clickable:"",onClick:ee[12]||(ee[12]=J($e=>se(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(B,null,{default:a(()=>ee[29]||(ee[29]=[v("Pratinjau")])),_:1})]),_:1})),[[re],[fe]]),le((d(),U(ne,{clickable:"",onClick:ee[13]||(ee[13]=J($e=>we(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(B,{class:"text-negative"},{default:a(()=>ee[30]||(ee[30]=[v(" Batalkan ")])),_:1})]),_:1})),[[re],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(pn,{ref_key:"itemEditorRef",ref:n,modelValue:R.value,"onUpdate:modelValue":ee[15]||(ee[15]=$e=>R.value=$e),item:M.value,onSave:ee[16]||(ee[16]=$e=>Ie()),"is-processing":D.value},null,8,["modelValue","item","is-processing"]),e(cn,{modelValue:L.value,"onUpdate:modelValue":ee[17]||(ee[17]=$e=>L.value=$e),onAccepted:ae,form:j,customer:S.value,total:O.value,accounts:l(u).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(Sa,{modelValue:T.value,"onUpdate:modelValue":ee[18]||(ee[18]=$e=>T.value=$e),onProductSelected:z,priceType:h.value,"show-cost":me.$can("admin.product:view-cost")},null,8,["modelValue","priceType","show-cost"]),e(gn,{modelValue:I.value,"onUpdate:modelValue":ee[19]||(ee[19]=$e=>I.value=$e),data:j,onSave:ee[20]||(ee[20]=$e=>Z()),"is-processing":D.value},null,8,["modelValue","data","is-processing"]),e(fn,{modelValue:b.value,"onUpdate:modelValue":ee[21]||(ee[21]=$e=>b.value=$e)},null,8,["modelValue"]),e(bn,{modelValue:N.value,"onUpdate:modelValue":ee[22]||(ee[22]=$e=>N.value=$e),order:j,customer:S.value,total:O.value,payment:V.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},hh=Object.freeze(Object.defineProperty({__proto__:null,default:wh},Symbol.toStringTag,{value:"Module"})),$h={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.SALES_ORDER_STATUSES,u={draft:"orange",closed:"green",canceled:"red"};return(o,r)=>(d(),U(zt,{status:c.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}},xh={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,u={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,r)=>(d(),U(zt,{status:c.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}};const Sh={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Vh={class:"q-pa-xs"},qh={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ch={key:0},Th={key:1},Ph={key:2},Rh={key:4},Oh={key:0},Ih={key:1},Uh={key:0},Dh={key:0},jh={key:1},Eh={class:"flex justify-end"},Ll="Penjualan",Ah={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=Ft(),m=Lt(),g=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Ot(p-2,p-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...It()],y=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.SALES_ORDER_STATUSES)],S=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],V=[{value:"all",label:"Semua Status"},...ze(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],x=je({search:"",year:p,month:m,status:"all",payment_status:"all",delivery_status:"all",...Ke()}),D=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),L=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{h()});const T=$=>{if($.status=="draft"){R($);return}I($)},R=$=>{W.get(route("admin.sales-order.edit",$.id))},I=$=>{W.get(route("admin.sales-order.detail",$.id))},N=$=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.sales-order.cancel",{id:$.id}),{id:$.id}).then(A=>{const F=A.data.data,q=o.value.findIndex(z=>z.id===F.id);if(q===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[q].status="canceled",s.notify({message:A.data.message,position:"bottom"})}).catch(A=>{var q,z;const F=((z=(q=A.response)==null?void 0:q.data)==null?void 0:z.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:F,color:"warning",position:"bottom"}),console.error(A)})})},M=$=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.sales-order.delete",$.id),fetchItemsCallback:h,loading:r}),h=($=null)=>{He({pagination:D,filter:x,props:$,rows:o,url:route("admin.sales-order.data"),loading:r,tableRef:n})},j=()=>{h()},O=X(()=>s.screen.gt.sm?L:L.filter($=>$.name==="id"||$.name==="action"));return Be(()=>x.year,$=>{$===null&&(x.month=null)}),($,A)=>{const F=Q("i-head"),q=Q("authenticated-layout");return d(),w(H,null,[e(F,{title:Ll}),e(q,null,Fe({title:a(()=>[v(i(Ll))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=z=>u.value=!u.value)},null,8,["icon"]),$.$can("admin.sales-order.edit")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:A[1]||(A[1]=z=>l(W).get($.route("admin.sales-order.add")))})):k("",!0)]),default:a(()=>[t("div",Vh,[e(Ae,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":A[11]||(A[11]=z=>D.value=z),filter:x.search,loading:r.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],style:We({height:l(b)}),onRequest:h,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:z,message:oe,filter:ce})=>[t("div",qh,[t("span",null,i(oe)+" "+i(ce?" with term "+ce:""),1)])]),body:a(z=>[e(Oe,{props:z,class:"cursor-pointer",onClick:J(oe=>T(z.row),["prevent"])},{default:a(()=>[e(Y,{key:"id",props:z,class:"wrap-column"},{default:a(()=>{var oe,ce,de;return[t("div",null,[e(C,{name:"tag"}),v(" "+i(z.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(i(l(_e)(z.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[z.row.cashier?(d(),w("div",Ch,[e(C,{name:"person",class:"inline-icon"}),v(" Kasir: "+i((oe=z.row.cashier)==null?void 0:oe.username),1)])):k("",!0),z.row.cashier_session?(d(),w("div",Th,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+i((de=(ce=z.row.cashier_session)==null?void 0:ce.cashier_terminal)==null?void 0:de.name),1)])):k("",!0),z.row.customer?(d(),w("div",Ph,[e(C,{name:"person",class:"inline-icon"}),A[12]||(A[12]=v(" Pelanggan: ")),e(ya,{href:$.route("admin.customer.detail",{id:z.row.customer.id}),onClick:A[8]||(A[8]=J(()=>{},["stop"]))},{default:a(()=>[v(" "+i(z.row.customer.code)+" - "+i(z.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,[e(C,{name:"wallet",class:"inline-icon"}),v(" Total: Rp. "+i(l(K)(z.row.grand_total)),1)]),z.row.balance!=0?(d(),w("div",{key:3,class:qe(z.row.balance>0?"text-green":"text-red")},[e(C,{name:"balance",class:"inline-icon"}),v(" "+i(z.row.balance>0?"Piutang":"Utang")+": Rp. "+i(l(K)(z.row.balance)),1)],2)):k("",!0),z.row.notes?(d(),w("div",Rh,[e(C,{name:"notes"}),v(" "+i(z.row.notes),1)])):k("",!0)],64)),t("div",null,[e($h,{status:z.row.status},null,8,["status"]),z.row.status=="closed"?(d(),w(H,{key:0},[e(xh,{status:z.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]}),_:2},1032,["props"]),e(Y,{key:"cashier_id",props:z},{default:a(()=>{var oe,ce,de;return[z.row.cashier?(d(),w("div",Oh,[e(C,{name:"person",class:"inline-icon"}),v(" "+i((oe=z.row.cashier)==null?void 0:oe.username),1)])):k("",!0),z.row.cashier_session?(d(),w("div",Ih,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" "+i((de=(ce=z.row.cashier_session)==null?void 0:ce.cashier_terminal)==null?void 0:de.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Y,{key:"customer_id",props:z},{default:a(()=>[z.row.customer?(d(),w("div",Uh,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+i(z.row.customer_code)+" - "+i(z.row.customer_name),1)]),z.row.customer_phone?(d(),w("div",Dh,[e(C,{name:"phone",class:"inline-icon"}),v(" "+i(z.row.customer_phone),1)])):k("",!0),z.row.customer_address?(d(),w("div",jh,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+i(z.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:z},{default:a(()=>[v(i(l(K)(z.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:z,class:qe(z.row.balance>0?"text-green":"text-red")},{default:a(()=>[v(i(l(K)(z.row.balance)),1)]),_:2},1032,["props","class"]),e(Y,{key:"notes",props:z},{default:a(()=>[e(Se,{text:z.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:z,onClick:A[10]||(A[10]=J(()=>{},["stop"]))},{default:a(()=>[t("div",Eh,[$.$can("admin.sales-order.detail")||$.$can("admin.sales-order.edit")||$.$can("admin.sales-order.cancel")||$.$can("admin.sales-order.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:A[9]||(A[9]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[z.row.status!="draft"&&$.$can("admin.sales-order.detail")?le((d(),U(ne,{key:0,onClick:J(oe=>I(z.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(B,null,{default:a(()=>A[13]||(A[13]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),z.row.status=="draft"&&$.$can("admin.sales-order.edit")?le((d(),U(ne,{key:1,onClick:J(oe=>R(z.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>A[14]||(A[14]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),z.row.status=="draft"&&$.$can("admin.sales-order.cancel")?le((d(),U(ne,{key:2,onClick:J(oe=>N(z.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(B,null,{default:a(()=>A[15]||(A[15]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),e(Pe),$.$can("admin.sales-order.delete")?le((d(),U(ne,{key:3,onClick:J(oe=>M(z.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>A[16]||(A[16]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Sh,[e(ue,{modelValue:x.year,"onUpdate:modelValue":[A[2]||(A[2]=z=>x.year=z),j],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(d(),U(ue,{key:0,modelValue:x.month,"onUpdate:modelValue":[A[3]||(A[3]=z=>x.month=z),j],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ue,{modelValue:x.status,"onUpdate:modelValue":[A[4]||(A[4]=z=>x.status=z),j],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ue,{modelValue:x.payment_status,"onUpdate:modelValue":[A[5]||(A[5]=z=>x.payment_status=z),j],options:S,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":A[7]||(A[7]=z=>x.search=z),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Mh=Object.freeze(Object.defineProperty({__proto__:null,default:Ah},Symbol.toStringTag,{value:"Module"})),Nh={},Bh={class:"row"},zh={class:"q-mb-md text-h6"};function Fh(c,s){const u=Q("i-head"),o=Q("authenticated-layout");return d(),w(H,null,[e(u,{title:"Informasi Sistem"}),e(o,null,{title:a(()=>s[0]||(s[0]=[v("Informasi Sistem")])),default:a(()=>[t("div",Bh,[e(pe,{class:"col q-ma-xs",square:"",flat:"",bordered:""},{default:a(()=>[e(te,null,{default:a(()=>[t("div",zh,"Tentang "+i(c.$config.APP_NAME),1),v(" Versi : "+i(c.$config.APP_VERSION_STR),1),s[1]||(s[1]=t("br",null,null,-1)),s[2]||(s[2]=v(" Dikembangkan oleh Shiftech Indonesia")),s[3]||(s[3]=t("br",null,null,-1)),s[4]||(s[4]=v(" CV. Shift Karya Teknologi "))]),_:1})]),_:1})])]),_:1})],64)}const Lh=_t(Nh,[["render",Fh]]),Kh=Object.freeze(Object.defineProperty({__proto__:null,default:Lh},Symbol.toStringTag,{value:"Module"})),vn={__name:"CompanyInfoForm",setup(c){const s=P(),u=be(),o=Je({name:u.props.data.name,headline:u.props.data.headline,phone:u.props.data.phone,address:u.props.data.address,logo_path:u.props.data.logo_path,logo_image:null}),r=P(null),n=P("");xe(()=>{o.logo_path&&(n.value=`/${o.logo_path}`)});function f(){r.value.click()}function b(g){const _=g.target.files[0];_&&(o.logo_image=_,n.value=URL.createObjectURL(_))}function p(){o.logo_image=null,o.logo_path=null,n.value=null,r.value.value=null}const m=()=>nt({form:o,url:route("admin.company-profile.edit")});return(g,_)=>(d(),U(Ge,{class:"row",onSubmit:J(m,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[_[8]||(_[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),_[9]||(_[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(ie,{ref_key:"nameInputRef",ref:s,modelValue:l(o).name,"onUpdate:modelValue":_[0]||(_[0]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ie,{modelValue:l(o).headline,"onUpdate:modelValue":_[1]||(_[1]=y=>l(o).headline=y),modelModifiers:{trim:!0},label:"Headline",disable:l(o).processing,maxlength:"200","lazy-rules":"",error:!!l(o).errors.headline,"error-message":l(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).phone,"onUpdate:modelValue":_[2]||(_[2]=y=>l(o).phone=y),modelModifiers:{trim:!0},label:"No Telepon",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.phone,"error-message":l(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(o).address,"onUpdate:modelValue":_[3]||(_[3]=y=>l(o).address=y),modelModifiers:{trim:!0},label:"Alamat",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[_[7]||(_[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(E,{label:"Browse Logo",size:"sm",onClick:f,color:"secondary",icon:"add_a_photo",disable:l(o).processing},null,8,["disable"]),e(E,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:l(o).processing||!n.value,color:"red",onClick:p},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:r,accept:"image/*",style:{display:"none"},onChange:b},null,544),t("div",null,[e(ma,{src:n.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},Fe({error:a(()=>[_[4]||(_[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[n.value?void 0:{name:"default",fn:a(()=>[_[5]||(_[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),_[6]||(_[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(te,null,{default:a(()=>[e(E,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Hh=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"})),Wh={class:"q-pa-xs"},Yh={class:"row justify-center"},Qh={class:"col col-md-6"},Kl="Profil Perusahaan",Jh={__name:"Edit",setup(c){return(s,u)=>{const o=Q("i-head"),r=Q("authenticated-layout");return d(),w(H,null,[e(o,{title:Kl}),e(r,null,{title:a(()=>[v(i(Kl))]),default:a(()=>[t("div",Wh,[t("div",Yh,[t("div",Qh,[e(vn)])])])]),_:1})],64)}}},Gh=Object.freeze(Object.defineProperty({__proto__:null,default:Jh},Symbol.toStringTag,{value:"Module"})),Xh={class:"col-xs-12 col-md-8"},Zh={class:"col-xs-12 col-sm-9"},e$={class:"col-xs-12 col-sm-3 text-right"},Hl="Pengaturan Database & Utilitas",t$={__name:"Index",setup(c){const s=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:" **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:" **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:" **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(u,o)=>{const r=Q("i-head"),n=Q("authenticated-layout");return d(),w(H,null,[e(r,{title:Hl}),e(n,null,{title:a(()=>[v(i(Hl))]),default:a(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",Xh,[e(pe,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(te,null,{default:a(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Gt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:a(()=>[e(C,{name:"warning",color:"red"})]),default:a(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=v(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(Pe),e(te,{class:"q-gutter-y-lg"},{default:a(()=>[(d(),w(H,null,De(s,f=>t("div",{key:f.name,class:"row items-center q-col-gutter-md"},[t("div",Zh,[e(ne,{class:"q-pa-none"},{default:a(()=>[e(B,{avatar:"",class:"q-pr-md"},{default:a(()=>[e(C,{name:f.icon,color:f.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(B,{style:{"text-wrap":"initial"}},{default:a(()=>[e(ve,{class:"text-subtitle1 text-bold"},{default:a(()=>[v(i(f.name),1)]),_:2},1024),e(ve,{caption:"",class:"q-pb-sm"},{default:a(()=>[v(i(f.description),1)]),_:2},1024),e(ve,{class:"text-caption text-negative text-bold"},{default:a(()=>[v(i(f.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",e$,[e(E,{icon:f.icon,label:f.name.split(" ")[0],color:f.color,disable:f.disable,onClick:f.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},a$=Object.freeze(Object.defineProperty({__proto__:null,default:t$},Symbol.toStringTag,{value:"Module"})),l$={class:"q-pa-xs"},o$={class:"row justify-center"},n$={class:"col col-md-6"},s$={__name:"Edit",setup(c){const s=be(),u=Je({foot_note:s.props.data.foot_note,default_payment_mode:s.props.data.default_payment_mode,default_print_size:s.props.data.default_print_size,after_payment_action:s.props.data.after_payment_action}),o=()=>nt({form:u,url:route("admin.pos-settings.edit")}),r=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],n=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],f=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(b,p)=>{const m=Q("i-head"),g=Q("authenticated-layout");return d(),w(H,null,[e(m,{title:"Pengaturan POS"}),e(g,null,{title:a(()=>p[4]||(p[4]=[v("Pengaturan POS")])),default:a(()=>[t("div",l$,[t("div",o$,[t("div",n$,[e(Ge,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[p[5]||(p[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),p[6]||(p[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(ue,{modelValue:l(u).default_payment_mode,"onUpdate:modelValue":p[0]||(p[0]=_=>l(u).default_payment_mode=_),label:"Default Pembayaran",options:r,"map-options":"","emit-value":"","lazy-rules":"",disable:l(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(u).errors.default_payment_mode,"error-message":l(u).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ue,{modelValue:l(u).default_print_size,"onUpdate:modelValue":p[1]||(p[1]=_=>l(u).default_print_size=_),label:"Default Ukuran Cetak",options:n,"map-options":"","emit-value":"","lazy-rules":"",disable:l(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(u).errors.default_print_size,"error-message":l(u).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ue,{modelValue:l(u).after_payment_action,"onUpdate:modelValue":p[2]||(p[2]=_=>l(u).after_payment_action=_),label:"Aksi Setelah Pembayaran",options:f,"map-options":"","emit-value":"","lazy-rules":"",disable:l(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(u).errors.after_payment_action,"error-message":l(u).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(u).foot_note,"onUpdate:modelValue":p[3]||(p[3]=_=>l(u).foot_note=_),modelModifiers:{trim:!0},label:"Foot Note",disable:l(u).processing,"lazy-rules":"",error:!!l(u).errors.foot_note,"error-message":l(u).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,null,{default:a(()=>[e(E,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(u).processing,loading:l(u).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},r$=Object.freeze(Object.defineProperty({__proto__:null,default:s$},Symbol.toStringTag,{value:"Module"})),i$={class:"q-gutter-sm"},d$={class:"q-gutter-sm"},u$={class:"col col-md-6 q-pa-xs"},m$={class:"row"},c$={class:"detail-item"},p$={class:"detail-value"},f$={class:"detail-item"},g$={class:"detail-value"},b$={class:"detail-item"},v$={class:"detail-value"},_$={class:"detail-item"},y$={class:"detail-value"},k$={class:"detail-item"},w$={class:"detail-value"},h$={class:"detail-item"},$$={class:"detail-value"},x$={class:"detail-item"},S$={class:"detail-value"},V$={class:"detail-item"},q$={class:"detail-value user-agent-value"},C$={class:"q-pt-md"},T$={class:"table-wrapper-scroll"},P$={key:0,class:"table-metadata"},R$={key:0},O$={colspan:"100%"},I$={class:"text-mono json-pre-scroll"},U$={key:1},D$={class:"metadata-label",style:{width:"100px"}},j$={class:"metadata-value"},E$={key:0,class:"text-mono json-pre-scroll"},A$={key:2},M$={colspan:"3"},N$={class:"table-metadata"},B$={class:"metadata-label"},z$={class:"metadata-value"},F$={class:"metadata-value"},L$={key:1,class:"text-grey-8 text-italic q-pa-sm"},Wl="Rincian Log Aktifitas",K$={__name:"Detail",setup(c){const s=be(),u=()=>ot({message:`Hapus log aktifitas #${s.props.data.id}?`,url:route("admin.user-activity-log.delete",s.props.data.id),onSuccess:()=>{W.get(route("admin.user-activity-log.index"))}});return(o,r)=>{const n=Q("i-head"),f=Q("i-link"),b=Q("authenticated-layout");return d(),w(H,null,[e(n,{title:Wl}),e(b,{"show-drawer-button":!0},{title:a(()=>[v(i(Wl))]),"left-button":a(()=>[t("div",i$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=p=>l(W).get(o.route("admin.user-activity-log.index")))})])]),"right-button":a(()=>[t("div",d$,[e(E,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:r[1]||(r[1]=p=>u())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",u$,[t("div",m$,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"detail-group"},{default:a(()=>[r[20]||(r[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",c$,[r[2]||(r[2]=t("div",{class:"detail-label"},"ID",-1)),r[3]||(r[3]=t("div",{class:"detail-separator"},":",-1)),t("div",p$,i(l(s).props.data.id),1)]),t("div",f$,[r[4]||(r[4]=t("div",{class:"detail-label"},"Waktu",-1)),r[5]||(r[5]=t("div",{class:"detail-separator"},":",-1)),t("div",g$,i(l(_e)(l(s).props.data.logged_at)),1)]),t("div",b$,[r[6]||(r[6]=t("div",{class:"detail-label"},"Pengguna",-1)),r[7]||(r[7]=t("div",{class:"detail-separator"},":",-1)),t("div",v$,[e(f,{href:o.route("admin.user.detail",{id:l(s).props.data.user_id})},{default:a(()=>[v(i(l(s).props.data.username),1)]),_:1},8,["href"])])]),t("div",_$,[r[8]||(r[8]=t("div",{class:"detail-label"},"Kategori",-1)),r[9]||(r[9]=t("div",{class:"detail-separator"},":",-1)),t("div",y$,i(l(s).props.data.activity_category_label),1)]),t("div",k$,[r[10]||(r[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),r[11]||(r[11]=t("div",{class:"detail-separator"},":",-1)),t("div",w$,i(l(s).props.data.activity_name_label),1)]),t("div",h$,[r[12]||(r[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),r[13]||(r[13]=t("div",{class:"detail-separator"},":",-1)),t("div",$$,i(l(s).props.data.description),1)]),t("div",x$,[r[14]||(r[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),r[15]||(r[15]=t("div",{class:"detail-separator"},":",-1)),t("div",S$,i(l(s).props.data.ip_address),1)]),t("div",V$,[r[16]||(r[16]=t("div",{class:"detail-label"},"User Agent",-1)),r[17]||(r[17]=t("div",{class:"detail-separator"},":",-1)),t("div",q$,i(l(s).props.data.user_agent),1)]),t("div",C$,[r[19]||(r[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",T$,[Object.keys(l(s).props.data.metadata).length>0?(d(),w("table",P$,[t("tbody",null,[(d(!0),w(H,null,De(l(s).props.formatted_metadata,(p,m)=>(d(),w(H,{key:m},[p.type==="plain"?(d(),w("tr",R$,[t("td",O$,[t("pre",I$,i(p.value),1)])])):k("",!0),p.type==="simple"?(d(),w("tr",U$,[t("td",D$,i(p.label),1),t("td",j$,[p.label=="Data Mentah (JSON)"?(d(),w("pre",E$,i(p.value),1)):(d(),w(H,{key:1},[v(i(p.value),1)],64))])])):k("",!0),p.type==="comparison"?(d(),w("tr",A$,[t("td",M$,[t("table",N$,[r[18]||(r[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(d(!0),w(H,null,De(p.value,(g,_)=>(d(),w("tr",{class:qe(g.new_value!==g.old_value?"value-changed":"")},[t("td",B$,i(g.field),1),t("td",z$,i(g.old_value),1),t("td",F$,i(g.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(d(),w("div",L$," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},H$=_t(K$,[["__scopeId","data-v-a10644eb"]]),W$=Object.freeze(Object.defineProperty({__proto__:null,default:H$},Symbol.toStringTag,{value:"Module"})),Y$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Q$={class:"q-pa-xs"},J$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},G$={key:0},X$={class:"flex justify-end"},Yl="Log Aktifitas Pengguna",Z$={__name:"Index",setup(c){const s=be(),u=he(),o=P(!1),r=P([]),n=P(!0),f=P(null),b=P(null),p=at(b),{protectClick:m}=Et(),g=je({user_id:"all",activity_category:"all",activity_name:"all",search:"",...Ke()}),_=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),y=[{value:"all",label:"Semua"},...s.props.users.map(A=>({value:A.id,label:A.username+" - "+A.name}))],S=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_categories).map(([A,F])=>({value:A,label:F}))],V=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_names).map(([A,F])=>({value:A,label:F}))],x=P(S),D=P(V),L=(A,F)=>{if(A===""){F(()=>{x.value=S});return}F(()=>{const q=A.toLowerCase();x.value=S.filter(z=>z.label.toLowerCase().indexOf(q)>-1)})},T=(A,F)=>{if(A===""){F(()=>{D.value=V});return}F(()=>{const q=A.toLowerCase();D.value=V.filter(z=>z.label.toLowerCase().indexOf(q)>-1)})},R=[{name:"id",label:u.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];xe(()=>{N()});const I=A=>ot({message:`Hapus log #${A.id}?`,url:route("admin.user-activity-log.delete",A.id),fetchItemsCallback:N,loading:n}),N=(A=null)=>{He({pagination:_,filter:g,props:A,rows:r,url:route("admin.user-activity-log.data"),loading:n,tableRef:f})},M=()=>N(),j=m(A=>W.get(route("admin.user-activity-log.detail",{id:A.id}))),O=X(()=>u.screen.gt.sm?R:R.filter(A=>A.name==="id"||A.name==="action")),$=()=>{xt.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{pt("Seluruh log telah dibersihkan."),N()}).catch(A=>{var q,z;const F=((z=(q=A.response)==null?void 0:q.data)==null?void 0:z.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";ct(F,"bottom"),console.error(A)})})};return(A,F)=>{const q=Q("i-head"),z=Q("i-link"),oe=Q("authenticated-layout");return d(),w(H,null,[e(q,{title:Yl}),e(oe,null,Fe({title:a(()=>[v(i(Yl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:F[0]||(F[0]=ce=>o.value=!o.value)},null,8,["icon"]),A.$can("admin.user-activity-log.clear")?(d(),U(E,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:$})):k("",!0)]),default:a(()=>[t("div",Q$,[e(Ae,{class:"full-height-table",ref_key:"tableRef",ref:f,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":F[7]||(F[7]=ce=>_.value=ce),filter:g.search,loading:n.value,columns:O.value,rows:r.value,"rows-per-page-options":[10,25,50],style:We({height:l(p)}),onRequest:N,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:ce,message:de,filter:Ie})=>[t("div",J$,[t("span",null,i(de)+" "+i(Ie?" with term "+Ie:""),1)])]),body:a(ce=>[e(Oe,{props:ce,class:"cursor-pointer",onClick:J(de=>l(j)(ce.row,de),["stop"])},{default:a(()=>[e(Y,{key:"id",props:ce},{default:a(()=>[t("div",null,[l(u).screen.lt.md?(d(),w(H,{key:0},[e(C,{name:"tag",class:"inline-icon"}),F[8]||(F[8]=v(" ID Aktifitas: "))],64)):k("",!0),v(" "+i(ce.row.id),1)]),l(u).screen.lt.md?(d(),w("div",G$,[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+i(l(_e)(ce.row.logged_at)),1)]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),e(z,{onClick:F[5]||(F[5]=J(()=>{},["stop"])),href:A.route("admin.user.detail",{id:ce.row.user_id})},{default:a(()=>[v(i(ce.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(C,{name:"category",class:"inline-icon"}),v(" "+i(ce.row.activity_category_label)+" > "+i(ce.row.activity_name_label),1)]),t("div",null,[e(C,{name:"notes",class:"inline-icon"}),v(" "+i(ce.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"logged_at",props:ce},{default:a(()=>[v(i(l(_e)(ce.row.logged_at)),1)]),_:2},1032,["props"]),e(Y,{key:"username",props:ce},{default:a(()=>[e(z,{onClick:F[6]||(F[6]=J(()=>{},["stop"])),href:A.route("admin.user.detail",{id:ce.row.user_id})},{default:a(()=>[v(i(ce.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(Y,{key:"activity_category",props:ce},{default:a(()=>[v(i(ce.row.activity_category_label),1)]),_:2},1032,["props"]),e(Y,{key:"activity_name",props:ce},{default:a(()=>[v(i(ce.row.activity_name_label),1)]),_:2},1032,["props"]),e(Y,{key:"description",props:ce,class:"wrap-column"},{default:a(()=>[v(i(ce.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:ce},{default:a(()=>[t("div",X$,[A.$can("admin.user-role.delete")?(d(),U(E,{key:0,onClick:J(de=>I(ce.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:a(()=>[t("div",Y$,[e(ue,{modelValue:g.user_id,"onUpdate:modelValue":[F[1]||(F[1]=ce=>g.user_id=ce),M],class:"custom-select col-xs-12 col-sm-2",options:y,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ue,{modelValue:g.activity_category,"onUpdate:modelValue":[F[2]||(F[2]=ce=>g.activity_category=ce),M],class:"custom-select col-xs-12 col-sm-2",options:x.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:L,clearable:""},null,8,["modelValue","options"]),e(ue,{modelValue:g.activity_name,"onUpdate:modelValue":[F[3]||(F[3]=ce=>g.activity_name=ce),M],class:"custom-select col-xs-12 col-sm-2",options:D.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:T},null,8,["modelValue","options"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":F[4]||(F[4]=ce=>g.search=ce),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ex=Object.freeze(Object.defineProperty({__proto__:null,default:Z$},Symbol.toStringTag,{value:"Module"})),_n={__name:"UpdatePasswordForm",setup(c){const s=P(!1),u=P(null),o=P(null),r=Je({current_password:"",password:"",password_confirmation:""}),n=()=>{r.clearErrors(),r.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>r.reset(),onError:()=>{r.errors.password&&(r.reset("password","password_confirmation"),u.value.focus()),r.errors.current_password&&(r.reset("current_password"),o.value.focus())}})};return(f,b)=>(d(),U(Ge,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[b[6]||(b[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),b[7]||(b[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(ie,{modelValue:l(r).current_password,"onUpdate:modelValue":b[1]||(b[1]=p=>l(r).current_password=p),type:s.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:l(r).processing,error:!!l(r).errors.current_password,"error-message":l(r).errors.current_password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[0]||(b[0]=p=>s.value=!s.value)},{default:a(()=>[e(C,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(ie,{modelValue:l(r).password,"onUpdate:modelValue":b[3]||(b[3]=p=>l(r).password=p),type:s.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:l(r).processing,error:!!l(r).errors.password,"error-message":l(r).errors.password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[2]||(b[2]=p=>s.value=!s.value)},{default:a(()=>[e(C,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(ie,{modelValue:l(r).password_confirmation,"onUpdate:modelValue":b[5]||(b[5]=p=>l(r).password_confirmation=p),type:s.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:l(r).processing,error:!!l(r).errors.password_confirmation,"error-message":l(r).errors.password_confirmation,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[4]||(b[4]=p=>s.value=!s.value)},{default:a(()=>[e(C,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(te,null,{default:a(()=>[e(E,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:l(r).processing,loading:l(r).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},tx=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"})),yn={__name:"UpdateProfileInformationForm",setup(c){const u=be().props.auth.user,o=Je({name:u.name,username:u.username,type:window.CONSTANTS.USER_TYPES[u.type]}),r=()=>nt({form:o,url:route("admin.user-profile.update")});return(n,f)=>(d(),U(Ge,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[f[3]||(f[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),f[4]||(f[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(ie,{modelValue:l(o).username,"onUpdate:modelValue":f[0]||(f[0]=b=>l(o).username=b),label:"ID Pengguna",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(ie,{modelValue:l(o).name,"onUpdate:modelValue":f[1]||(f[1]=b=>l(o).name=b),modelModifiers:{trim:!0},label:"Nama",disable:l(o).processing,error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[b=>b&&b.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ie,{modelValue:l(o).type,"onUpdate:modelValue":f[2]||(f[2]=b=>l(o).type=b),label:"Jenis Akun",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(te,null,{default:a(()=>[e(E,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},ax=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"})),lx={class:"q-pa-xs"},ox={class:"row justify-center"},nx={class:"col col-md-6"},Ql="Pengaturan Pribadi",sx={__name:"Edit",setup(c){return(s,u)=>{const o=Q("i-head"),r=Q("authenticated-layout");return d(),w(H,null,[e(o,{title:Ql}),e(r,null,{title:a(()=>[v(i(Ql))]),default:a(()=>[t("div",lx,[t("div",ox,[t("div",nx,[e(yn,{class:"q-mb-md"}),e(_n)])])])]),_:1})],64)}}},rx=Object.freeze(Object.defineProperty({__proto__:null,default:sx},Symbol.toStringTag,{value:"Module"})),ix=jt({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(c,{slots:s,emit:u}){let o=!1,r,n,f=null,b=null,p,m;function g(){r&&r(),r=null,o=!1,f!==null&&(clearTimeout(f),f=null),b!==null&&(clearTimeout(b),b=null),n!==void 0&&n.removeEventListener("transitionend",p),p=null}function _(x,D,L){D!==void 0&&(x.style.height=`${D}px`),x.style.transition=`height ${c.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,r=L}function y(x,D){x.style.overflowY=null,x.style.height=null,x.style.transition=null,g(),D!==m&&u(D)}function S(x,D){let L=0;n=x,o===!0?(g(),L=x.offsetHeight===x.scrollHeight?0:void 0):(m="hide",x.style.overflowY="hidden"),_(x,L,D),f=setTimeout(()=>{f=null,x.style.height=`${x.scrollHeight}px`,p=T=>{b=null,(Object(T)!==T||T.target===x)&&y(x,"show")},x.addEventListener("transitionend",p),b=setTimeout(p,c.duration*1.1)},100)}function V(x,D){let L;n=x,o===!0?g():(m="show",x.style.overflowY="hidden",L=x.scrollHeight),_(x,L,D),f=setTimeout(()=>{f=null,x.style.height=0,p=T=>{b=null,(Object(T)!==T||T.target===x)&&y(x,"hide")},x.addEventListener("transitionend",p),b=setTimeout(p,c.duration*1.1)},100)}return na(()=>{o===!0&&g()}),()=>Ce(uo,{css:!1,appear:c.appear,onEnter:S,onLeave:V},s.default)}}),Wt=bs({}),dx=Object.keys(go),St=jt({name:"QExpansionItem",props:{...go,..._s,...Na,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...vs,"click","afterShow","afterHide"],setup(c,{slots:s,emit:u}){const{proxy:{$q:o}}=Rt(),r=Ba(c,o),n=P(c.modelValue!==null?c.modelValue:c.defaultOpened),f=P(null),b=ys(),{show:p,hide:m,toggle:g}=ks({showing:n});let _,y;const S=X(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${c.popup===!0?"popup":"standard"}`),V=X(()=>c.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:c.contentInsetLevel*56+"px"}),x=X(()=>c.disable!==!0&&(c.href!==void 0||c.to!==void 0&&c.to!==null&&c.to!=="")),D=X(()=>{const de={};return dx.forEach(Ie=>{de[Ie]=c[Ie]}),de}),L=X(()=>x.value===!0||c.expandIconToggle!==!0),T=X(()=>c.expandedIcon!==void 0&&n.value===!0?c.expandedIcon:c.expandIcon||o.iconSet.expansionItem[c.denseToggle===!0?"denseIcon":"icon"]),R=X(()=>c.disable!==!0&&(x.value===!0||c.expandIconToggle===!0)),I=X(()=>({expanded:n.value===!0,detailsId:b.value,toggle:g,show:p,hide:m})),N=X(()=>{const de=c.toggleAriaLabel!==void 0?c.toggleAriaLabel:o.lang.label[n.value===!0?"collapse":"expand"](c.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":b.value,"aria-label":de}});Be(()=>c.group,de=>{y!==void 0&&y(),de!==void 0&&A()});function M(de){x.value!==!0&&g(de),u("click",de)}function h(de){de.keyCode===13&&j(de,!0)}function j(de,Ie){Ie!==!0&&f.value!==null&&f.value.focus(),g(de),Yt(de)}function O(){u("afterShow")}function $(){u("afterHide")}function A(){_===void 0&&(_=ws()),n.value===!0&&(Wt[c.group]=_);const de=Be(n,ke=>{ke===!0?Wt[c.group]=_:Wt[c.group]===_&&delete Wt[c.group]}),Ie=Be(()=>Wt[c.group],(ke,Z)=>{Z===_&&ke!==void 0&&ke!==_&&m()});y=()=>{de(),Ie(),Wt[c.group]===_&&delete Wt[c.group],y=void 0}}function F(){const de={class:[`q-focusable relative-position cursor-pointer${c.denseToggle===!0&&c.switchToggleSide===!0?" items-end":""}`,c.expandIconClass],side:c.switchToggleSide!==!0,avatar:c.switchToggleSide},Ie=[Ce(C,{class:"q-expansion-item__toggle-icon"+(c.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:T.value})];return R.value===!0&&(Object.assign(de,{tabindex:0,...N.value,onClick:j,onKeyup:h}),Ie.unshift(Ce("div",{ref:f,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),Ce(B,de,()=>Ie)}function q(){let de;return s.header!==void 0?de=[].concat(s.header(I.value)):(de=[Ce(B,()=>[Ce(ve,{lines:c.labelLines},()=>c.label||""),c.caption?Ce(ve,{lines:c.captionLines,caption:!0},()=>c.caption):null])],c.icon&&de[c.switchToggleSide===!0?"push":"unshift"](Ce(B,{side:c.switchToggleSide===!0,avatar:c.switchToggleSide!==!0},()=>Ce(C,{name:c.icon})))),c.disable!==!0&&c.hideExpandIcon!==!0&&de[c.switchToggleSide===!0?"unshift":"push"](F()),de}function z(){const de={ref:"item",style:c.headerStyle,class:c.headerClass,dark:r.value,disable:c.disable,dense:c.dense,insetLevel:c.headerInsetLevel};return L.value===!0&&(de.clickable=!0,de.onClick=M,Object.assign(de,x.value===!0?D.value:N.value)),Ce(ne,de,q)}function oe(){return le(Ce("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:V.value,id:b.value},Bt(s.default)),[[po,n.value]])}function ce(){const de=[z(),Ce(ix,{duration:c.duration,onShow:O,onHide:$},oe)];return c.expandSeparator===!0&&de.push(Ce(Pe,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:r.value}),Ce(Pe,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:r.value})),de}return c.group!==void 0&&A(),na(()=>{y!==void 0&&y()}),()=>Ce("div",{class:S.value},[Ce("div",{class:"q-expansion-item__container relative-position"},ce())])}}),ux={class:"q-gutter-sm"},mx={class:"col col-md-8"},cx={class:"q-col-gutter-xs row"},px={class:"col-xs-12 col-md-5"},fx={class:"row items-center"},gx={class:"text-subtite1 text-bold q-mb-sm"},bx={class:"text-body2"},vx={class:"text-subtitle2 text-bold text-grey-8 q-my-sm"},_x={key:0,class:"q-gutter-xs"},yx={key:1,class:"text-grey-8 text-italic"},kx={class:"col-xs-12 col-md-7"},wx={class:"row items-center"},Jl="Rincian Peran Pengguna",hx={__name:"Detail",setup(c){const s=be(),u=X(()=>{const o={};return s.props.data.permissions&&s.props.data.permissions.forEach(r=>{const f=r.category.replace("Manajemen ","");o[f]||(o[f]=[]),o[f].push(r)}),o});return(o,r)=>{const n=Q("i-head"),f=Q("i-link"),b=Q("authenticated-layout");return d(),w(H,null,[e(n,{title:Jl}),e(b,null,{title:a(()=>[v(i(Jl))]),"left-button":a(()=>[t("div",ux,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=p=>l(W).get(o.route("admin.user-role.index")))})])]),"right-button":a(()=>r[1]||(r[1]=[])),default:a(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",mx,[t("div",cx,[t("div",px,[e(pe,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",fx,[e(C,{name:"assignment_ind",size:"sm",color:"grey-8",class:"q-mr-sm"}),r[2]||(r[2]=t("div",{class:"text-subtite1 text-bold text-grey-8"}," Info Peran ",-1))])]),_:1}),e(te,null,{default:a(()=>[t("div",gx,i(l(s).props.data.name),1),r[4]||(r[4]=t("div",{class:"text-subtitle2 text-grey-7"},"Deskripsi:",-1)),t("div",bx,i(l(s).props.data.description||"Tidak ada deskripsi."),1),t("div",vx,[e(C,{name:"group",class:"q-mr-xs"}),r[3]||(r[3]=v(" Pengguna Terdaftar "))]),l(s).props.data.users.length>0?(d(),w("div",_x,[(d(!0),w(H,null,De(l(s).props.data.users,p=>(d(),U(f,{key:p.id,href:o.route("admin.user.detail",{id:p.id}),style:{"text-decoration":"none"}},{default:a(()=>[e(la,{clickable:"","text-color":"primary",color:"grey-3"},{default:a(()=>[v(i(p.username),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])):(d(),w("div",yx," Belum ada akun pengguna yang terdaftar. "))]),_:1})]),_:1})]),t("div",kx,[e(pe,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(te,{class:"bg-grey-3 q-py-sm"},{default:a(()=>[t("div",wx,[e(C,{name:"security",size:"sm",color:"grey-8",class:"q-mr-sm"}),r[5]||(r[5]=t("div",{class:"text-subtite1 text-grey-8 text-bold"}," Daftar Hak Akses ",-1))])]),_:1}),l(s).props.data.permissions.length>0?(d(),U(te,{key:0,class:"q-pa-none"},{default:a(()=>[e(Ee,{bordered:"",separator:""},{default:a(()=>[(d(!0),w(H,null,De(u.value,(p,m)=>(d(),U(St,{key:m,label:m,"header-class":"text-bold bg-grey-1 text-grey-7","default-opened":""},{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",null,[(d(!0),w(H,null,De(p,g=>(d(),U(la,{key:g.id,color:"grey-2","text-color":"grey-9",size:"sm"},{default:a(()=>[v(i(g.label),1)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})):(d(),U(te,{key:1},{default:a(()=>r[6]||(r[6]=[t("div",{class:"text-grey-7 text-italic"}," Belum ada hak akses yang ditetapkan. ",-1)])),_:1}))]),_:1})])])])]),_:1})]),_:1})],64)}}},$x=_t(hx,[["__scopeId","data-v-7dee658a"]]),xx=Object.freeze(Object.defineProperty({__proto__:null,default:$x},Symbol.toStringTag,{value:"Module"})),Sx={class:"q-gutter-sm"},Vx={class:"col col-md-6 q-pa-xs"},qx={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},Cx={__name:"Editor",setup(c){const s=be(),u=(s.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=Je({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description,permissions:s.props.data.permissions?s.props.data.permissions.map(f=>f.id):[]}),r=()=>nt({form:o,url:route("admin.user-role.save")}),n=X(()=>{const f={};return s.props.permissions&&s.props.permissions.forEach(b=>{const p=b.category;f[p]||(f[p]=[]),f[p].push(b)}),f});return(f,b)=>{const p=Q("i-head"),m=Q("authenticated-layout");return d(),w(H,null,[e(p,{title:u}),e(m,null,{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",Sx,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>l(W).get(f.route("admin.user-role.index")))})])]),"right-button":a(()=>[e(E,{icon:"save",label:"Simpan",color:"primary",disable:l(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:J(r,["prevent"])},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Vx,[e(Ge,{class:"row",onSubmit:J(r,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(o).id=g)},null,512),[[yt,l(o).id]]),e(ie,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(o).description,"onUpdate:modelValue":b[3]||(b[3]=g=>l(o).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(d(!0),w(H,null,De(n.value,(g,_)=>(d(),w("div",{key:_},[t("div",qx,i(_),1),(d(!0),w(H,null,De(g,y=>(d(),w("div",{key:y.id},[e(ua,{class:"q-ma-none q-pa-none list-checkbox",modelValue:l(o).permissions,"onUpdate:modelValue":S=>l(o).permissions=S,val:y.id,label:y.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Tx=_t(Cx,[["__scopeId","data-v-8b35322b"]]),Px=Object.freeze(Object.defineProperty({__proto__:null,default:Tx},Symbol.toStringTag,{value:"Module"})),Rx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ox={class:"q-pa-xs"},Ix={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ux={class:"flex justify-end"},Gl="Peran Pengguna",Dx={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=je({search:"",...Ke()}),m=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Peran",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];xe(()=>{y()});const _=L=>ot({message:`Hapus role ${L.name}?`,url:route("admin.user-role.delete",L.id),fetchItemsCallback:y,loading:r}),y=(L=null)=>{He({pagination:m,filter:p,props:L,rows:o,url:route("admin.user-role.data"),loading:r,tableRef:n})},S=L=>W.get(route("admin.user-role.detail",{id:L.id})),{protectClick:V}=Et(),x=V(S),D=X(()=>s.screen.gt.sm?g:g.filter(L=>L.name==="name"||L.name==="action"));return(L,T)=>{const R=Q("i-head"),I=Q("authenticated-layout");return d(),w(H,null,[e(R,{title:Gl}),e(I,null,Fe({title:a(()=>[v(i(Gl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=N=>u.value=!u.value)},null,8,["icon"]),L.$can("admin.user-role.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:T[1]||(T[1]=N=>l(W).get(L.route("admin.user-role.add")))})):k("",!0)]),default:a(()=>[t("div",Ox,[e(Ae,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":T[4]||(T[4]=N=>m.value=N),filter:p.search,loading:r.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],style:We({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:N,message:M,filter:h})=>[t("div",Ix,[t("span",null,i(M)+" "+i(h?" with term "+h:""),1)])]),body:a(N=>[e(Oe,{props:N,class:"cursor-pointer",onClick:J(M=>l(x)(N.row,M),["stop"])},{default:a(()=>[e(Y,{key:"name",props:N,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),U(C,{key:0,name:"person"})):k("",!0),v(" "+i(N.row.name),1)])]),_:2},1032,["props"]),e(Y,{key:"description",props:N,class:"wrap-column"},{default:a(()=>[v(i(N.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:N},{default:a(()=>[t("div",Ux,[L.$can("admin.user-role.add")||L.$can("admin.user-role.edit")||L.$can("admin.user-role.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:T[3]||(T[3]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[L.$can("admin.user-role.add")?le((d(),U(ne,{key:0,clickable:"",onClick:J(M=>l(W).get(L.route("admin.user-role.duplicate",N.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>T[5]||(T[5]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),L.$can("admin.user-role.edit")?le((d(),U(ne,{key:1,clickable:"",onClick:J(M=>l(W).get(L.route("admin.user-role.edit",N.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>T[6]||(T[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),L.$can("admin.user-role.delete")?le((d(),U(ne,{key:2,onClick:J(M=>_(N.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>T[7]||(T[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Rx,[e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":T[2]||(T[2]=N=>p.search=N),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},jx=Object.freeze(Object.defineProperty({__proto__:null,default:Dx},Symbol.toStringTag,{value:"Module"})),Ex={class:"q-gutter-sm"},Ax={class:"q-gutter-sm"},Mx={class:"row justify-center"},Nx={class:"col col-md-6 q-pa-xs"},Bx={class:"row"},zx={class:"row items-center justify-between"},Fx={class:"text-subtitle1 text-bold text-grey-9"},Lx={class:"q-gutter-xs"},Kx={class:"text-bold"},Hx={class:"text-bold"},Xl="Rincian Pengguna",Wx={__name:"Detail",setup(c){const s=be(),u=X(()=>s.props.data),o=X(()=>u.value.active?"positive":"negative"),r=X(()=>u.value.active?"Aktif":"Tidak Aktif");return(n,f)=>{const b=Q("i-head"),p=Q("i-link"),m=Q("authenticated-layout");return d(),w(H,null,[e(b,{title:Xl}),e(m,{"show-drawer-button":!0},{title:a(()=>[v(i(Xl))]),"left-button":a(()=>[t("div",Ex,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=g=>n.$inertia.get(n.route("admin.user.index")))})])]),"right-button":a(()=>[t("div",Ax,[n.$can("admin.user.edit")&&l(s).props.data.id!=l(s).props.auth.user.id?(d(),U(E,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:f[1]||(f[1]=g=>n.$inertia.get(n.route("admin.user.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[t("div",Mx,[t("div",Nx,[t("div",Bx,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",zx,[t("div",Fx,[e(C,{name:"person",class:"q-mr-xs",size:"sm"}),f[2]||(f[2]=v(" Profil Pengguna "))]),e(st,{color:o.value,label:r.value,class:"q-pa-xs"},null,8,["color","label"])])]),_:1}),e(Ee,null,{default:a(()=>[e(ne,{class:"bg-white"},{default:a(()=>[e(B,null,{default:a(()=>[e(ve,{caption:""},{default:a(()=>f[3]||(f[3]=[v("Nama Pengguna")])),_:1}),e(ve,{class:"text-subtitle1 text-bold"},{default:a(()=>[v(i(u.value.name),1)]),_:1})]),_:1})]),_:1}),e(ne,null,{default:a(()=>[e(B,null,{default:a(()=>[e(ve,{caption:""},{default:a(()=>f[4]||(f[4]=[v("ID Pengguna")])),_:1}),e(ve,null,{default:a(()=>[v(i(u.value.username),1)]),_:1})]),_:1})]),_:1}),e(ne,null,{default:a(()=>[e(B,null,{default:a(()=>[e(ve,{caption:""},{default:a(()=>f[5]||(f[5]=[v("Jenis Akun")])),_:1}),e(ve,null,{default:a(()=>[v(i(n.$CONSTANTS.USER_TYPES[u.value.type]),1)]),_:1})]),_:1})]),_:1}),u.value.roles.length>0?(d(),U(ne,{key:0},{default:a(()=>[e(B,null,{default:a(()=>[e(ve,{caption:""},{default:a(()=>f[6]||(f[6]=[v("Peran Pengguna")])),_:1}),e(ve,null,{default:a(()=>[t("div",Lx,[(d(!0),w(H,null,De(u.value.roles,g=>(d(),U(p,{key:g.id,href:n.route("admin.user-role.detail",{id:g.id}),style:{"text-decoration":"none"}},{default:a(()=>[e(la,{clickable:"",color:"indigo-1","text-color":"indigo-10",icon:"military_tech",size:"sm"},{default:a(()=>[v(i(g.name),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])]),_:1})]),_:1})]),_:1})):k("",!0),e(ne,null,{default:a(()=>[e(B,null,{default:a(()=>[e(ve,{caption:""},{default:a(()=>f[7]||(f[7]=[v("Dibuat")])),_:1}),e(ve,null,{default:a(()=>{var g,_;return[v(i(l(_e)(u.value.created_at))+" oleh ",1),t("span",Kx,i(((g=u.value.creator)==null?void 0:g.name)??"Sistem")+" ("+i(((_=u.value.creator)==null?void 0:_.username)??"system")+")",1)]}),_:1})]),_:1})]),_:1}),u.value.updated_at?(d(),U(ne,{key:1},{default:a(()=>[e(B,null,{default:a(()=>[e(ve,{caption:""},{default:a(()=>f[8]||(f[8]=[v("Diperbarui")])),_:1}),e(ve,null,{default:a(()=>[v(i(l(_e)(u.value.updated_at))+" ",1),u.value.updater?(d(),w(H,{key:0},[f[9]||(f[9]=v(" oleh ")),t("span",Hx,i(u.value.updater.name)+" ("+i(u.value.updater.username)+")",1)],64)):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0),e(ne,null,{default:a(()=>[e(B,null,{default:a(()=>[e(ve,{caption:""},{default:a(()=>f[10]||(f[10]=[v("Terakhir Login")])),_:1}),e(ve,{class:"text-bold"},{default:a(()=>[v(i(u.value.last_login_datetime?n.$dayjs(u.value.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),_:1})]),_:1})]),_:1}),u.value.last_activity_datetime?(d(),U(ne,{key:2,class:"q-mb-md"},{default:a(()=>[e(B,null,{default:a(()=>[e(ve,{caption:""},{default:a(()=>f[11]||(f[11]=[v("Aktifitas Terakhir")])),_:1}),e(ve,{class:"text-bold"},{default:a(()=>[v(i(n.$dayjs(u.value.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" "+i(u.value.last_activity_description),1)]),_:1})]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})])])])]),_:1})],64)}}},Yx=Object.freeze(Object.defineProperty({__proto__:null,default:Wx},Symbol.toStringTag,{value:"Module"}));function Qx(c){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(c)}const Jx={class:"q-gutter-sm"},Gx={class:"row justify-center"},Xx={class:"col col-md-6 q-pa-xs"},Zx={__name:"Editor",setup(c){const s=ze(window.CONSTANTS.USER_TYPES),u=be(),o=u.props.roles,r=u.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=P(!u.props.data.id),f=u.props.data.roles,b=Array.isArray(f)?f.map(g=>g.id):[],p=Je({id:u.props.data.id,name:u.props.data.name,username:u.props.data.username,password:u.props.data.id?null:"12345",type:u.props.data.type?u.props.data.type:s[0].value,active:!!u.props.data.active,roles:b}),m=()=>nt({form:p,url:route("admin.user.save")});return(g,_)=>{const y=Q("i-head"),S=Q("authenticated-layout");return d(),w(H,null,[e(y,{title:l(r)},null,8,["title"]),e(S,{"show-drawer-button":!0},{title:a(()=>[v(i(l(r)),1)]),"left-button":a(()=>[t("div",Jx,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=V=>l(W).get(g.route("admin.user.index")))})])]),default:a(()=>[t("div",Gx,[t("div",Xx,[e(Ge,{class:"row",onSubmit:J(m,["prevent"])},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=V=>l(p).id=V)},null,512),[[yt,l(p).id]]),e(ie,{autofocus:"",modelValue:l(p).username,"onUpdate:modelValue":_[2]||(_[2]=V=>l(p).username=V),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:l(p).processing,error:!!l(p).errors.username,"error-message":l(p).errors.username,rules:[V=>V&&V.length>0||"Username harus diisi.",V=>l(Qx)(V)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ie,{modelValue:l(p).name,"onUpdate:modelValue":_[3]||(_[3]=V=>l(p).name=V),modelModifiers:{trim:!0},label:"Nama",error:!!l(p).errors.name,disable:l(p).processing,"error-message":l(p).errors.name,rules:[V=>V&&V.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(p).password,"onUpdate:modelValue":_[5]||(_[5]=V=>l(p).password=V),label:"Kata Sandi","lazy-rules":"",disable:l(p).processing,error:!!l(p).errors.password,"error-message":l(p).errors.password,"hide-bottom-space":"",type:n.value?"text":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:_[4]||(_[4]=V=>n.value=!n.value)},{default:a(()=>[e(C,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","disable","error","error-message","type"]),e(ue,{modelValue:l(p).type,"onUpdate:modelValue":_[6]||(_[6]=V=>l(p).type=V),label:"Jenis Akun",options:l(s),"map-options":"","emit-value":"","lazy-rules":"",disable:l(p).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(p).errors.type,"error-message":l(p).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),l(p).type=="standard_user"?(d(),U(ue,{key:0,modelValue:l(p).roles,"onUpdate:modelValue":_[7]||(_[7]=V=>l(p).roles=V),label:"Peran",options:l(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:l(p).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(p).errors.roles||!!l(p).errors["roles.0"],"error-message":l(p).errors.roles||l(p).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(ka,{modelValue:l(p).active,"onUpdate:modelValue":_[8]||(_[8]=V=>l(p).active=V),disable:l(p).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(p).processing,onClick:m},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",class:"text-black",disable:l(p).processing,onClick:_[9]||(_[9]=V=>l(W).get(g.route("admin.user.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},eS=Object.freeze(Object.defineProperty({__proto__:null,default:Zx},Symbol.toStringTag,{value:"Module"})),tS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},aS={class:"q-pa-xs"},lS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},oS={key:0},nS={class:"flex justify-end"},Zl="Pengguna",sS={__name:"Index",setup(c){const s=[{value:"all",label:"Semua"},...ze(window.CONSTANTS.USER_TYPES)],u=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=be(),r=he(),n=o.props.auth.user,f=P([]),b=P(!0),p=P(!1),m=je({type:"all",roles:[],status:"active",search:""}),g=o.props.roles.map(h=>({value:h.id,label:h.name})),_=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),y=[{name:"username",label:r.screen.gt.sm?"ID Pengguna":"Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];xe(()=>{V()});const S=()=>V(),V=(h=null)=>He({pagination:_,props:h,rows:f,loading:b,filter:m,url:route("admin.user.data"),tableRef:I}),x=h=>ot({url:route("admin.user.delete",h.id),message:`Hapus pengguna ${h.username}?`,fetchItemsCallback:V,loading:b}),D=X(()=>r.screen.gt.sm?y:y.filter(h=>h.name==="username"||h.name==="action")),L=h=>W.get(route("admin.user.detail",h.id)),{protectClick:T}=Et(),R=T(L),I=P(null),N=P(null),M=at(N);return(h,j)=>{const O=Q("i-head"),$=Q("authenticated-layout");return d(),w(H,null,[e(O,{title:Zl}),e($,null,Fe({title:a(()=>[v(i(Zl))]),"right-button":a(()=>[e(E,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:j[0]||(j[0]=A=>p.value=!p.value)},null,8,["icon"]),h.$can("admin.user.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:j[1]||(j[1]=A=>l(W).get(h.route("admin.user.add")))})):k("",!0)]),default:a(()=>[t("div",aS,[e(Ae,{ref_key:"tableRef",ref:I,class:"full-height-table",style:We({height:l(M)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":j[7]||(j[7]=A=>_.value=A),filter:m.search,loading:b.value,columns:D.value,rows:f.value,"rows-per-page-options":[10,25,50],onRequest:V,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:A,message:F,term:q})=>[t("div",lS,[t("span",null,i(F)+" "+i(q?" with term "+q:""),1)])]),body:a(A=>[e(Oe,{props:A,class:qe([A.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(F=>l(R)(A.row,F),["stop"])},{default:a(()=>[e(Y,{key:"username",props:A},{default:a(()=>[t("div",null,[l(r).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[],64)),v(" "+i(A.row.username),1)]),l(r).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[t("div",null,i(A.row.name),1),e(st,{color:A.row.type=="super_user"?"red":"primary"},{default:a(()=>[v(i(h.$CONSTANTS.USER_TYPES[A.row.type]),1)]),_:2},1032,["color"]),A.row.roles.length>0?(d(),w("div",oS,i(A.row.roles.map(F=>F.name).join(",")),1)):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"name",props:A},{default:a(()=>[v(i(A.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"role",props:A,align:"center"},{default:a(()=>[t("span",null,i(h.$CONSTANTS.USER_TYPES[A.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:A},{default:a(()=>[t("div",nS,[h.$can("admin.user.add")||h.$can("admin.user.edit")||h.$can("admin.user.delete")?(d(),U(E,{key:0,disable:A.row.id==l(n).id||A.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:j[6]||(j[6]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[h.$can("admin.user.add")?le((d(),U(ne,{key:0,clickable:"",onClick:J(F=>l(W).get(h.route("admin.user.duplicate",A.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>j[8]||(j[8]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),h.$can("admin.user.edit")?le((d(),U(ne,{key:1,clickable:"",onClick:J(F=>l(W).get(h.route("admin.user.edit",A.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>j[9]||(j[9]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),h.$can("admin.user.delete")?le((d(),U(ne,{key:2,onClick:J(F=>x(A.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>j[10]||(j[10]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[p.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:N},{default:a(()=>[t("div",tS,[e(ue,{modelValue:m.type,"onUpdate:modelValue":[j[2]||(j[2]=A=>m.type=A),S],class:"custom-select col-xs-12 col-sm-2",options:s,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ue,{modelValue:m.status,"onUpdate:modelValue":[j[3]||(j[3]=A=>m.status=A),S],class:"custom-select col-xs-12 col-sm-2",options:u,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ue,{modelValue:m.roles,"onUpdate:modelValue":[j[4]||(j[4]=A=>m.roles=A),S],class:"custom-select col-xs-12 col-sm-2",options:l(g),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":j[5]||(j[5]=A=>m.search=A),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},rS=Object.freeze(Object.defineProperty({__proto__:null,default:sS},Symbol.toStringTag,{value:"Module"})),iS={class:"q-gutter-sm"},dS={class:"col col-lg-6 q-pa-xs"},uS={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},mS={class:"row q-col-gutter-sm q-mb-md"},cS={key:0},pS={class:"text-bold"},fS={key:0},gS={class:"text-caption text-grey-8"},bS={key:1},eo="Buat Penyesuaian Stok",vS={__name:"Create",setup(c){const s=be(),u=P(!1),o=s.props.products,{filteredCategories:r,filterCategories:n}=wa(s.props.categories),{filteredSuppliers:f,filterSupplierFn:b}=ha(s.props.suppliers),p=P({search:null,category_id:null,supplier_id:null}),m=P([]),g=Je({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),_=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(L,T)=>K(L)+" "+T.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],y=ze(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),S=X(()=>o.filter(L=>{let T=!0;if(u.value&&!m.value.find(R=>R.id===L.id))return!1;if(p.value.search){const R=p.value.search.toLowerCase();T=L.name.toLowerCase().includes(R)||L.description.toLowerCase().includes(R)||L.barcode&&L.barcode.toLowerCase().includes(R)}return T&&p.value.category_id&&(T=L.category_id===p.value.category_id),T&&p.value.supplier_id&&(T=L.supplier_id===p.value.supplier_id),T})),V=()=>{xt.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{g.product_ids=m.value.map(L=>L.id),ca(g,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:g,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},x=he(),D=X(()=>x.screen.gt.sm?_:_.filter(L=>L.name==="name"));return(L,T)=>{const R=Q("i-head"),I=Q("authenticated-layout");return d(),w(H,null,[e(R,{title:eo}),e(I,{"show-drawer-button":!0},{title:a(()=>[v(i(eo))]),"left-button":a(()=>[t("div",iS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:T[0]||(T[0]=N=>l(W).get(L.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[e(E,{icon:"cancel",disable:l(g).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:T[1]||(T[1]=N=>l(W).get(L.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(E,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:l(g).processing||m.value.length==0,class:"q-ml-sm",onClick:V},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",dS,[e(Ge,{class:"row",onSubmit:J(V,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-sm"},{default:a(()=>{var N,M,h;return[T[10]||(T[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Kt,{modelValue:l(g).datetime,"onUpdate:modelValue":T[2]||(T[2]=j=>l(g).datetime=j),label:"Waktu",error:!!l(g).errors.datetime,disable:l(g).processing,"error-message":l(g).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ue,{modelValue:l(g).type,"onUpdate:modelValue":T[3]||(T[3]=j=>l(g).type=j),options:l(y),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(g).errors.type,disable:l(g).processing,"map-options":"","emit-value":"","error-message":l(g).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(ie,{modelValue:l(g).notes,"onUpdate:modelValue":T[4]||(T[4]=j=>l(g).notes=j),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(g).processing,error:!!l(g).errors.notes,"error-message":l(g).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),m.value.length===0||(N=l(s).props.errors)!=null&&N.product_ids?(d(),w("div",uS,[m.value.length===0?(d(),w(H,{key:0},[v(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(M=l(s).props.errors)!=null&&M.product_ids?(d(),w(H,{key:1},[v(i((h=l(s).props.errors)==null?void 0:h.product_ids),1)],64)):k("",!0)])):k("",!0),T[11]||(T[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",mS,[e(ie,{modelValue:p.value.search,"onUpdate:modelValue":T[5]||(T[5]=j=>p.value.search=j),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(ue,{modelValue:p.value.category_id,"onUpdate:modelValue":T[6]||(T[6]=j=>p.value.category_id=j),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(r),"map-options":"",dense:"","emit-value":"",onFilter:l(n),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(ue,{modelValue:p.value.supplier_id,"onUpdate:modelValue":T[7]||(T[7]=j=>p.value.supplier_id=j),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(f),"map-options":"",dense:"","emit-value":"",onFilter:l(b),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:T[8]||(T[8]=j=>u.value=!u.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},i(u.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(Ae,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:D.value,rows:S.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:m.value,"onUpdate:selected":T[9]||(T[9]=j=>m.value=j)},{"body-cell-name":a(j=>[e(Y,{props:j},{default:a(()=>[l(x).screen.lt.md?(d(),w("div",cS,[t("div",pS,i(j.row.name),1),j.row.category?(d(),w("div",fS,i(j.row.category.name),1)):k("",!0),t("div",gS,i(l(K)(j.row.stock))+" "+i(j.row.uom),1)])):(d(),w("div",bS,i(j.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},_S=Object.freeze(Object.defineProperty({__proto__:null,default:vS},Symbol.toStringTag,{value:"Module"})),yS={class:"q-gutter-sm"},kS={class:"q-gutter-sm"},wS={class:"row justify-center"},hS={class:"col col-lg-8 q-pa-sm"},$S={class:"row"},xS={class:"detail"},SS={key:0},VS={key:1},qS={class:"text-grey-9"},CS={__name:"Detail",setup(c){const s=be(),u=`Rincian #${s.props.data.code}`,o=s.props.details,r=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:p=>K(p)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:p=>K(p)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:p=>K(p)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],n=he(),f=X(()=>n.screen.gt.sm?r:r.filter(p=>p.name==="no")),b=()=>{window.open(route("admin.stock-adjustment.print",{id:s.props.data.id}),"_blank")};return(p,m)=>{const g=Q("i-head"),_=Q("i-link"),y=Q("authenticated-layout");return d(),w(H,null,[e(g,{title:u}),e(y,{"show-drawer-button":!0},{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",yS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=S=>p.$inertia.get(p.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[t("div",kS,[e(E,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[1]||(m[1]=S=>b())})])]),default:a(()=>[t("div",wS,[t("div",hS,[t("div",$S,[e(pe,{square:"",flat:"",bordered:"",class:"q-card col"},{default:a(()=>[e(te,null,{default:a(()=>[m[22]||(m[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",xS,[t("tbody",null,[t("tr",null,[m[2]||(m[2]=t("td",{style:{width:"120px"}},"Kode",-1)),m[3]||(m[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+i(l(s).props.data.code),1)]),t("tr",null,[m[4]||(m[4]=t("td",null,"Jenis",-1)),m[5]||(m[5]=t("td",null,":",-1)),t("td",null,i(p.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[l(s).props.data.type]),1)]),t("tr",null,[m[6]||(m[6]=t("td",null,"Status",-1)),m[7]||(m[7]=t("td",null,":",-1)),t("td",null,i(p.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[m[8]||(m[8]=t("td",null,"Waktu",-1)),m[9]||(m[9]=t("td",null,":",-1)),t("td",null,i(l(_e)(l(s).props.data.datetime)),1)]),l(s).props.data.created_at?(d(),w("tr",SS,[m[11]||(m[11]=t("td",null,"Dibuat Oleh",-1)),m[12]||(m[12]=t("td",null,":",-1)),t("td",null,[l(s).props.data.creator?(d(),w(H,{key:0},[e(_,{href:p.route("admin.user.detail",{id:l(s).props.data.creator})},{default:a(()=>[v(i(l(s).props.data.creator.username)+" - "+i(l(s).props.data.creator.name),1)]),_:1},8,["href"]),m[10]||(m[10]=v(" - "))],64)):k("",!0),v(" "+i(l(_e)(l(s).props.data.created_at)),1)])])):k("",!0),l(s).props.data.updater?(d(),w("tr",VS,[m[14]||(m[14]=t("td",null,"Diperbarui oleh",-1)),m[15]||(m[15]=t("td",null,":",-1)),t("td",null,[l(s).props.data.updater?(d(),w(H,{key:0},[e(_,{href:p.route("admin.user.detail",{id:l(s).props.data.updater})},{default:a(()=>[v(i(l(s).props.data.updater.username)+" - "+i(l(s).props.data.updater.name),1)]),_:1},8,["href"]),m[13]||(m[13]=v(" - "))],64)):k("",!0),v(" "+i(l(_e)(l(s).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[m[16]||(m[16]=t("td",null,"Total Modal",-1)),m[17]||(m[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:qe(l(s).props.data.total_cost<0?"text-red-10":l(s).props.data.total_cost>0?"text-green-10":"")},i(l(ia)(l(s).props.data.total_cost)),3)])]),t("tr",null,[m[18]||(m[18]=t("td",null,"Total Harga",-1)),m[19]||(m[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:qe(l(s).props.data.total_price<0?"text-red-10":l(s).props.data.total_price>0?"text-green-10":"")},i(l(ia)(l(s).props.data.total_price)),3)])]),t("tr",null,[m[20]||(m[20]=t("td",null,"Catatan",-1)),m[21]||(m[21]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.notes),1)])])])]),_:1}),e(te,null,{default:a(()=>[m[28]||(m[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Ae,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:f.value,rows:l(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":a(S=>[e(Y,{props:S},{default:a(()=>[l(n).screen.lt.md?(d(),w(H,{key:1},[t("div",qS,[t("b",null,"#"+i(S.rowIndex+1),1),m[23]||(m[23]=v(" - ")),e(_,{href:p.route("admin.product.detail",{id:S.row.product_id})},{default:a(()=>[v(i(S.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[v(" Stok Lama: "+i(l(K)(S.row.old_quantity))+" "+i(S.row.uom),1),m[25]||(m[25]=t("br",null,null,-1)),v(" Stok Baru: "+i(l(K)(S.row.new_quantity))+" "+i(S.row.uom),1),m[26]||(m[26]=t("br",null,null,-1)),t("div",{class:qe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},[v(" Selisih: "+i((S.row.balance>0?"+":"")+l(K)(S.row.balance))+" "+i(S.row.uom),1),m[24]||(m[24]=t("br",null,null,-1)),v(" (Rp. "+i(l(K)(S.row.subtotal_cost))+" / Rp. "+i(l(K)(S.row.subtotal_price))+") ",1)],2),m[27]||(m[27]=t("br",null,null,-1)),v(" "+i(S.row.notes),1)])],64)):(d(),w(H,{key:0},[v(i(S.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":a(S=>[e(Y,{props:S},{default:a(()=>[e(_,{href:p.route("admin.product.detail",{id:S.row.product_id})},{default:a(()=>[v(i(S.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":a(S=>[e(Y,{props:S},{default:a(()=>[t("div",{class:qe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},i((S.row.balance>0?"+":"")+l(K)(S.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":a(S=>[e(Y,{props:S},{default:a(()=>[t("div",{class:qe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},i(l(K)(S.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":a(S=>[e(Y,{props:S},{default:a(()=>[t("div",{class:qe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},i(l(K)(S.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},TS=Object.freeze(Object.defineProperty({__proto__:null,default:CS},Symbol.toStringTag,{value:"Module"})),PS={class:"q-gutter-sm"},RS={class:"col col-lg-6 q-pa-xs"},OS={class:"text-bold"},IS={key:0},US={class:"text-caption text-grey-8"},to="Penyesuaian Stok",DS={__name:"Editor",setup(c){const s=he(),u=be(),o=Je({id:u.props.item.id,type:u.props.item.type,datetime:new Date(u.props.item.datetime),notes:u.props.item.notes,action:"save",details:[]}),r=ze(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),n=P(u.props.details.map(g=>(typeof g.new_quantity=="string"&&(g.new_quantity=parseFloat(g.new_quantity)),g))),f=g=>{const _=()=>{o.action=g,o.details=n.value.map(y=>({id:y.id,new_quantity:y.new_quantity})),ca(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:o,url:route("admin.stock-adjustment.save")})};g==="close"||g==="cancel"?xt.create({title:"Konfirmasi",message:g==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{_()}).onCancel(()=>{}):_()},b=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:g=>K(g)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:g=>K(g)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(g,_)=>K(_.new_quantity-_.old_quantity)}],p=X(()=>s.screen.gt.sm?b:b.filter(g=>g.name==="product_name"||g.name==="new_quantity")),m=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(g,_)=>{const y=Q("i-head"),S=Q("authenticated-layout");return d(),w(H,null,[e(y,{title:to}),e(S,{"show-drawer-button":!0},{title:a(()=>[v(i(to))]),"left-button":a(()=>[t("div",PS,[l(s).screen.gt.sm?(d(),U(E,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=V=>g.$inertia.get(g.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":a(()=>[e(E,{icon:"save",onClick:_[1]||(_[1]=V=>f("save")),disable:l(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(E,{icon:"check",onClick:_[2]||(_[2]=V=>f("close")),disable:l(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),g.$can("admin.product.import")||g.$can("admin.product:view-cost")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:_[5]||(_[5]=J(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[le((d(),U(ne,{clickable:"",onClick:_[3]||(_[3]=V=>m())},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"print"})]),_:1}),e(B,null,{default:a(()=>_[10]||(_[10]=[v(" Cetak Kartu Stok")])),_:1})]),_:1})),[[re],[fe]]),le((d(),U(ne,{clickable:"",onClick:_[4]||(_[4]=J(V=>f("cancel"),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"red"})]),_:1}),e(B,{class:"text-red"},{default:a(()=>_[11]||(_[11]=[v("Batalkan")])),_:1})]),_:1})),[[re],[fe]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",RS,[e(Ge,{class:"row",onSubmit:J(f,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>_[12]||(_[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[6]||(_[6]=V=>l(o).id=V)},null,512),[[yt,l(o).id]]),e(Kt,{modelValue:l(o).datetime,"onUpdate:modelValue":_[7]||(_[7]=V=>l(o).datetime=V),label:"Waktu",error:!!l(o).errors.datetime,disable:l(o).processing,"error-message":l(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ue,{modelValue:l(o).type,"onUpdate:modelValue":_[8]||(_[8]=V=>l(o).type=V),options:l(r),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(o).errors.type,disable:l(o).processing,"map-options":"","emit-value":"","error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(ie,{modelValue:l(o).notes,"onUpdate:modelValue":_[9]||(_[9]=V=>l(o).notes=V),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-pa-xs"},{default:a(()=>[e(Ae,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:p.value,rows:n.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":a(V=>[e(Y,{props:V},{default:a(()=>[t("div",OS,i(V.row.product_name),1),l(s).screen.lt.md?(d(),w("div",IS,[t("div",US,[v(" Tercatat: "+i(l(K)(V.row.old_quantity))+" ",1),_[13]||(_[13]=t("br",null,null,-1)),v(" Selisih: "+i(l(K)(V.row.new_quantity-V.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":a(V=>[e(Y,{props:V,class:"text-center"},{default:a(()=>[e(Ne,{modelValue:V.row[V.col.name],"onUpdate:modelValue":x=>V.row[V.col.name]=x,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},jS=Object.freeze(Object.defineProperty({__proto__:null,default:DS},Symbol.toStringTag,{value:"Module"}));function ES(){const c=Rt();if(!c)throw new Error("useCan must be called within a component setup function.");return s=>c.proxy.$can(s)}const AS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},MS={class:"q-pa-xs"},NS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},BS={key:0,class:"flex q-gutter-xs"},zS={class:"flex q-col-gutter-xs"},FS={key:0},LS={key:1},KS={key:0},HS={class:"flex justify-end"},ao="Penyesuaian Stok",WS={__name:"Index",setup(c){const s=P([]),u=P(!0),o=P(!1),r=P(null),n=P(null),f=at(n),b=Ft(),p=Lt(),m=[{label:"Semua Tahun",value:"all"},{label:`${b}`,value:b},...Ot(b-2,b-1).reverse()],g=[{value:"all",label:"Semua Bulan"},...It()],_=je({search:"",year:b,month:p,status:"all",type:"all",...Ke()}),y=[{value:"all",label:"Semua"},...ze(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],S=[{value:"all",label:"Semua"},...ze(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],V=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),x=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];xe(()=>{L()});const D=j=>ot({message:`Hapus Penyesuaian Stok #${j.code}?`,url:route("admin.stock-adjustment.delete",j.id),fetchItemsCallback:L,loading:u}),L=(j=null)=>He({pagination:V,filter:_,props:j,rows:s,url:route("admin.stock-adjustment.data"),loading:u,tableRef:r}),T=()=>{L()},R=j=>{j.status=="draft"?W.get(route("admin.stock-adjustment.editor",j.id)):W.get(route("admin.stock-adjustment.detail",j.id))},{protectClick:I}=Et(),N=I(R),M=he(),h=X(()=>{let j=x;return ES()||(j=j.filter(O=>O.name!=="cost")),M.screen.gt.sm?j:j.filter(O=>O.name==="id"||O.name==="action")});return(j,O)=>{const $=Q("i-head"),A=Q("authenticated-layout");return d(),w(H,null,[e($,{title:ao}),e(A,null,Fe({"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=F=>o.value=!o.value)},null,8,["icon"]),j.$can("admin.stock-adjustment.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=F=>l(W).get(j.route("admin.stock-adjustment.create")))})):k("",!0)]),title:a(()=>[v(i(ao))]),default:a(()=>[t("div",MS,[e(Ae,{ref_key:"tableRef",ref:r,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:V.value,"onUpdate:pagination":O[8]||(O[8]=F=>V.value=F),filter:_.search,loading:u.value,columns:h.value,rows:s.value,"rows-per-page-options":[10,25,50],style:We({height:l(f)}),onRequest:L,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:F,message:q,filter:z})=>[t("div",NS,[t("span",null,i(q)+" "+i(z?" with term "+z:""),1)])]),body:a(F=>[e(Oe,{props:F,onClick:J(q=>l(N)(F.row,q),["stop"]),class:"cursor-pointer"},{default:a(()=>[e(Y,{key:"id",props:F},{default:a(()=>[l(M).screen.lt.md?(d(),w(H,{key:1},[t("div",zS,[t("div",null,"#"+i(F.row.code),1),t("div",null,[e(C,{name:"history"}),v(" "+i(l(_e)(F.row.datetime)),1)]),e(la,{dense:"",size:"sm",color:F.row.status==="draft"?"orange":F.row.status==="closed"?"green":F.row.status==="canceled"?"red":"",icon:F.row.status==="draft"?"emergency":F.row.status==="closed"?"check":F.row.status==="canceled"?"close":""},{default:a(()=>[v(i(j.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[F.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(C,{name:"category"}),v(" "+i(j.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[F.row.type]),1)]),F.row.created_by?(d(),w("div",FS,[e(C,{name:"person"}),O[9]||(O[9]=v(" Dibuat: ")),t("b",null,i(F.row.created_by.username),1),e(C,{name:"history"}),v(" "+i(l(_e)(F.row.created_at)),1)])):k("",!0),F.row.updated_by?(d(),w("div",LS,[e(C,{name:"person"}),O[10]||(O[10]=v(" Diperbarui: ")),t("b",null,i(F.row.updated_by.username),1),e(C,{name:"history"}),v(" "+i(l(_e)(F.row.updated_at)),1)])):k("",!0),t("div",{class:qe(F.row.total_cost<0?"text-red-10":F.row.total_cost>0?"text-green-10":"")},[e(C,{name:"money"}),j.$can("admin.product:view-cost")?(d(),w("span",KS,"Rp. "+i(l(K)(F.row.total_cost))+" / ",1)):k("",!0),v(" Rp. "+i(l(K)(F.row.total_price)),1)],2)],64)):(d(),w("div",BS,"#"+i(F.row.code),1))]),_:2},1032,["props"]),e(Y,{key:"datetime",props:F},{default:a(()=>[v(i(l(_e)(F.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"status",props:F,class:"text-center"},{default:a(()=>[v(i(j.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[F.row.status]),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:F},{default:a(()=>[v(i(j.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[F.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"total_cost",props:F},{default:a(()=>[j.$can("admin.product:view-cost")?(d(),w("div",{key:0,class:qe(F.row.total_cost<0?"text-red-10":F.row.total_cost>0?"text-green-10":"")},i(l(K)(F.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total_price",props:F},{default:a(()=>[t("div",{class:qe(F.row.total_price<0?"text-red-10":F.row.total_price>0?"text-green-10":"")},i(l(K)(F.row.total_price)),3)]),_:2},1032,["props"]),e(Y,{key:"notes",props:F},{default:a(()=>[v(i(F.row.notes),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:F},{default:a(()=>[t("div",HS,[j.$can("admin.stock-adjustment.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[7]||(O[7]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[j.$can("admin.stock-adjustment.delete")?le((d(),U(ne,{key:0,onClick:J(q=>D(F.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>O[11]||(O[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",AS,[e(ue,{modelValue:_.year,"onUpdate:modelValue":[O[2]||(O[2]=F=>_.year=F),T],options:m,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),_.year!="all"?(d(),U(ue,{key:0,modelValue:_.month,"onUpdate:modelValue":[O[3]||(O[3]=F=>_.month=F),T],options:g,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:_.year===null},null,8,["modelValue","disable"])):k("",!0),e(ue,{modelValue:_.status,"onUpdate:modelValue":[O[4]||(O[4]=F=>_.status=F),T],options:y,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(ue,{modelValue:_.type,"onUpdate:modelValue":[O[5]||(O[5]=F=>_.type=F),T],options:S,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":O[6]||(O[6]=F=>_.search=F),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},YS=Object.freeze(Object.defineProperty({__proto__:null,default:WS},Symbol.toStringTag,{value:"Module"})),QS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},JS={class:"q-pa-xs"},GS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},lo="Riwayat Stok",XS={__name:"Index",setup(c){be();const s=P(null),u=P(null),o=at(u),r=Ft(),n=Lt(),f=[{label:"Semua Tahun",value:"all"},{label:`${r}`,value:r},...Ot(r-2,r-1).reverse()],b=[{value:"all",label:"Semua Bulan"},...It()],p=[{value:"all",label:"Semua"},...ze(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],m=he(),g=P(!1),_=P([]),y=P(!0),S=je({type:"all",search:"",year:r,month:n,...Ke()}),V=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let x=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{const I=new URLSearchParams(window.location.search).get("page");I&&(V.value.page=parseInt(I)),D()});const D=(R=null)=>{He({pagination:V,filter:S,props:R,rows:_,url:route("admin.stock-movement.data"),loading:y,tableRef:s})},L=()=>{D()},T=X(()=>m.screen.lt.sm?x.filter(R=>R.name==="id"||R.name==="quantity"):x);return(R,I)=>{const N=Q("i-head"),M=Q("authenticated-layout");return d(),w(H,null,[e(N,{title:lo}),e(M,null,Fe({title:a(()=>[v(i(lo))]),"right-button":a(()=>[e(E,{icon:g.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=h=>g.value=!g.value)},null,8,["icon"])]),default:a(()=>[t("div",JS,[e(Ae,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":I[5]||(I[5]=h=>V.value=h),filter:S.search,loading:y.value,columns:T.value,rows:_.value,"rows-per-page-options":[10,25,50],style:We({height:l(o)}),onRequest:D,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:O})=>[t("div",GS,[t("span",null,i(j)+" "+i(O?" with term "+O:""),1)])]),body:a(h=>[e(Oe,{props:h},{default:a(()=>[e(Y,{key:"id",props:h},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" "+i(h.row.code),1)]),t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+i(l(_e)(h.row.created_at)),1)]),t("div",null,[e(st,null,{default:a(()=>[v(i(R.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[h.row.ref_type]),1)]),_:2},1024)]),l(m).screen.lt.sm?(d(),w(H,{key:0},[t("div",null,[e(C,{name:"token",class:"inline-icon"}),v(" "+i(h.row.product.name),1)]),t("div",{class:qe(h.row.quantity>0?"text-positive":"text-negative")},[e(C,{class:"inline-icon",name:"compare_arrows"}),v(" "+i(l(K)(h.row.quantity_before))+" "+i(h.row.uom)+"  "+i(l(K)(h.row.quantity_after))+" "+i(h.row.uom),1)],2),e(Se,{text:h.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"product",props:h},{default:a(()=>[v(i(h.row.product.name),1)]),_:2},1032,["props"]),e(Y,{key:"quantity_before",props:h},{default:a(()=>[v(i(l(K)(h.row.quantity_before)),1)]),_:2},1032,["props"]),e(Y,{key:"quantity",props:h,class:qe(h.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[v(i(l($t)(h.row.quantity))+" ",1),l(m).screen.lt.sm?(d(),w(H,{key:0},[v(i(h.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Y,{key:"quantity_after",props:h},{default:a(()=>[v(i(l(K)(h.row.quantity_after)),1)]),_:2},1032,["props"]),e(Y,{key:"uom",props:h},{default:a(()=>[v(i(h.row.uom),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:h},{default:a(()=>[e(Se,{text:h.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[g.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:u},{default:a(()=>[t("div",QS,[e(ue,{modelValue:S.year,"onUpdate:modelValue":[I[1]||(I[1]=h=>S.year=h),L],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),S.year!="all"?(d(),U(ue,{key:0,modelValue:S.month,"onUpdate:modelValue":[I[2]||(I[2]=h=>S.month=h),L],options:b,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:S.year===null},null,8,["modelValue","disable"])):k("",!0),e(ue,{modelValue:S.ref_type,"onUpdate:modelValue":[I[3]||(I[3]=h=>S.ref_type=h),L],options:p,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:S.search,"onUpdate:modelValue":I[4]||(I[4]=h=>S.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ZS=Object.freeze(Object.defineProperty({__proto__:null,default:XS},Symbol.toStringTag,{value:"Module"})),eV={class:"detail"},tV={key:0},aV={key:1},lV={key:2},oV={key:3},nV={key:4},sV={key:5},rV={key:6},iV={key:0,class:"q-pt-md"},kn={__name:"MainInfoTab",setup(c){const s=be(),u=()=>{ot({message:`Hapus Pemasok ${s.props.data.name}?`,url:route("admin.supplier.delete",s.props.data.id),onSuccess:()=>{W.get(route("admin.supplier.index"))}})};return(o,r)=>(d(),w(H,null,[t("table",eV,[t("tbody",null,[r[22]||(r[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[r[1]||(r[1]=t("td",{style:{width:"120px"}},"Kode",-1)),r[2]||(r[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,i(l(s).props.data.code),1)]),t("tr",null,[r[3]||(r[3]=t("td",null,"Nama",-1)),r[4]||(r[4]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.name),1)]),t("tr",null,[t("td",null,i(l(s).props.data.balance<0?"Utang":"Utang / Piutang"),1),r[5]||(r[5]=t("td",null,":",-1)),t("td",{class:qe(l(s).props.data.balance<0?"text-red":"text-green")},i(l(ia)(l(s).props.data.balance)),3)]),l(s).props.data.phone_1?(d(),w("tr",tV,[r[6]||(r[6]=t("td",null,"No Telepon",-1)),r[7]||(r[7]=t("td",null,":",-1)),t("td",null,[e(ea,{phone:l(s).props.data.phone_1},null,8,["phone"])])])):k("",!0),l(s).props.data.phone_2?(d(),w("tr",aV,[r[8]||(r[8]=t("td",null,"No Telepon 2",-1)),r[9]||(r[9]=t("td",null,":",-1)),t("td",null,[e(ea,{phone:l(s).props.data.phone_2},null,8,["phone"])])])):k("",!0),l(s).props.data.phone_3?(d(),w("tr",lV,[r[10]||(r[10]=t("td",null,"No Telepon 3",-1)),r[11]||(r[11]=t("td",null,":",-1)),t("td",null,[e(ea,{phone:l(s).props.data.phone_3},null,8,["phone"])])])):k("",!0),l(s).props.data.address?(d(),w("tr",oV,[r[12]||(r[12]=t("td",null,"Alamat",-1)),r[13]||(r[13]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.address),1)])):k("",!0),l(s).props.data.return_address?(d(),w("tr",nV,[r[14]||(r[14]=t("td",null,"Alamat Retur",-1)),r[15]||(r[15]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.return_address),1)])):k("",!0),l(s).props.data.bank_account_name_1||l(s).props.data.bank_account_number_1||l(s).props.data.bank_account_holder_1?(d(),w("tr",sV,[r[16]||(r[16]=t("td",null,"Rek 1",-1)),r[17]||(r[17]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.bank_account_name_1)+" "+i(l(s).props.data.bank_account_number_1)+" a.n. "+i(l(s).props.data.bank_account_holder_1),1)])):k("",!0),l(s).props.data.bank_account_name_2||l(s).props.data.bank_account_number_2||l(s).props.data.bank_account_holder_2?(d(),w("tr",rV,[r[18]||(r[18]=t("td",null,"Rek 2",-1)),r[19]||(r[19]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.bank_account_name_2)+" "+i(l(s).props.data.bank_account_number_2)+" a.n. "+i(l(s).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[r[20]||(r[20]=t("td",null,"Status",-1)),r[21]||(r[21]=t("td",null,":",-1)),t("td",null,i(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(d(),w("div",iV,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:r[0]||(r[0]=n=>u())})])):k("",!0)],64))}},dV=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"})),uV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},mV={class:"text-bold"},cV={class:"text-bold"},pV={key:0,class:"text-bold"},fV={key:1},wn={__name:"OrderHistoryTab",setup(c){const s=be(),u=P([]),o=P(!0),r=je({customer_id:s.props.data.id,...Ke()}),n=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp.)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{b()});const b=(g=null)=>He({pagination:n,filter:r,props:g,rows:u,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:s.props.data.id}}),loading:o}),p=he(),m=X(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),U(Ae,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:r.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",uV,[t("span",null,i(S)+" "+i(V?" with term "+V:""),1)])]),body:a(y=>[e(Oe,{props:y,class:"cursor-pointer",onClick:J(S=>l(W).get(g.route("admin.purchase-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",mV,[e(C,{class:"inline-icon",name:"tag"}),v(" "+i(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+i(l(_e)(y.row.datetime)),1)]),l(p).screen.lt.md?(d(),w(H,{key:0},[t("div",cV,[e(C,{name:"money",class:"inline-icon"}),v(" Total: Rp. "+i(l(K)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(d(),w("div",pV,[e(C,{name:"money",class:"inline-icon"}),v(" Sisa Utang: Rp. "+i(l(K)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(d(),w("div",fV,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(Go,{status:y.row.status},null,8,["status"]),e(Xo,{status:y.row.payment_status},null,8,["status"])])]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:y},{default:a(()=>[v(i(l(K)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"remaining_debt",props:y},{default:a(()=>[v(i(l(K)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},gV=Object.freeze(Object.defineProperty({__proto__:null,default:wn},Symbol.toStringTag,{value:"Module"})),bV={class:"q-gutter-sm"},vV={class:"q-gutter-sm"},_V={class:"col col-lg-6 q-pa-xs"},yV={class:"row"},oo="Rincian Pemasok",kV={__name:"Detail",setup(c){const s=be(),u=P("main");return he(),(o,r)=>{const n=Q("i-head"),f=Q("authenticated-layout");return d(),w(H,null,[e(n,{title:oo}),e(f,null,{title:a(()=>[v(i(oo))]),"left-button":a(()=>[t("div",bV,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:r[0]||(r[0]=b=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":a(()=>[t("div",vV,[o.$can("admin.supplier.edit")?(d(),U(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:r[1]||(r[1]=b=>l(W).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),U(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:r[2]||(r[2]=b=>l(W).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),U(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:r[3]||(r[3]=b=>l(W).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",_V,[t("div",yV,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(qt,{modelValue:u.value,"onUpdate:modelValue":r[4]||(r[4]=b=>u.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(rt,{name:"main",label:"Info Utama"}),e(rt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Ct,{modelValue:u.value,"onUpdate:modelValue":r[5]||(r[5]=b=>u.value=b),animated:""},{default:a(()=>[e(it,{name:"main"},{default:a(()=>[e(kn)]),_:1}),e(it,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(wn)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},wV=Object.freeze(Object.defineProperty({__proto__:null,default:kV},Symbol.toStringTag,{value:"Module"})),hV={class:"q-gutter-sm"},$V={class:"col col-md-6 q-pa-xs"},xV={class:"row q-col-gutter-md"},SV={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},VV={key:2,class:"row q-col-gutter-md"},qV={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},CV={key:4,class:"row q-col-gutter-md"},TV={key:5,class:"row q-col-gutter-md"},PV={style:{"margin-left":"-10px"},class:"q-mt-md"},RV={class:"q-mt-sm"},OV={__name:"Editor",setup(c){const s=be(),u=(s.props.data.id?"Edit":"Tambah")+" Pemasok",o=Je({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,phone_1:s.props.data.phone_1,phone_2:s.props.data.phone_2,phone_3:s.props.data.phone_3,url_1:s.props.data.url_1,url_2:s.props.data.url_2,bank_account_name_1:s.props.data.bank_account_name_1,bank_account_holder_1:s.props.data.bank_account_holder_1,bank_account_number_1:s.props.data.bank_account_number_1,bank_account_name_2:s.props.data.bank_account_name_2,bank_account_holder_2:s.props.data.bank_account_holder_2,bank_account_number_2:s.props.data.bank_account_number_2,address:s.props.data.address,return_address:s.props.data.return_address,active:!!s.props.data.active}),r=P(!0),n=()=>nt({form:o,url:route("admin.supplier.save")});return(f,b)=>{const p=Q("i-head"),m=Q("authenticated-layout");return d(),w(H,null,[e(p,{title:u}),e(m,{"show-drawer-button":!0},{title:a(()=>[v(i(u))]),"left-button":a(()=>[t("div",hV,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>l(W).get(f.route("admin.supplier.index")))})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:b[1]||(b[1]=g=>n()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",$V,[e(Ge,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[2]||(b[2]=g=>l(o).id=g)},null,512),[[yt,l(o).id]]),e(ie,{modelValue:l(o).code,"onUpdate:modelValue":b[3]||(b[3]=g=>l(o).code=g),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[g=>g&&g.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(o).name,"onUpdate:modelValue":b[4]||(b[4]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",xV,[e(ie,{modelValue:l(o).phone_1,"onUpdate:modelValue":b[5]||(b[5]=g=>l(o).phone_1=g),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_1,"error-message":l(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),r.value?k("",!0):(d(),U(ie,{key:0,modelValue:l(o).phone_2,"onUpdate:modelValue":b[6]||(b[6]=g=>l(o).phone_2=g),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_2,"error-message":l(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),r.value?k("",!0):(d(),U(ie,{key:1,modelValue:l(o).phone_3,"onUpdate:modelValue":b[7]||(b[7]=g=>l(o).phone_3=g),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_3,"error-message":l(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(ie,{modelValue:l(o).address,"onUpdate:modelValue":b[8]||(b[8]=g=>l(o).address=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),r.value?k("",!0):(d(),U(ie,{key:0,modelValue:l(o).return_address,"onUpdate:modelValue":b[9]||(b[9]=g=>l(o).return_address=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.return_address,"error-message":l(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),r.value?k("",!0):(d(),w("div",SV," Rekening 1 ")),r.value?k("",!0):(d(),w("div",VV,[e(ie,{modelValue:l(o).bank_account_name_1,"onUpdate:modelValue":b[10]||(b[10]=g=>l(o).bank_account_name_1=g),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_1,"error-message":l(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).bank_account_number_1,"onUpdate:modelValue":b[11]||(b[11]=g=>l(o).bank_account_number_1=g),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_1,"error-message":l(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).bank_account_holder_1,"onUpdate:modelValue":b[12]||(b[12]=g=>l(o).bank_account_holder_1=g),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_1,"error-message":l(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),r.value?k("",!0):(d(),w("div",qV," Rekening 2 ")),r.value?k("",!0):(d(),w("div",CV,[e(ie,{modelValue:l(o).bank_account_name_2,"onUpdate:modelValue":b[13]||(b[13]=g=>l(o).bank_account_name_2=g),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_2,"error-message":l(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).bank_account_number_2,"onUpdate:modelValue":b[14]||(b[14]=g=>l(o).bank_account_number_2=g),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_2,"error-message":l(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).bank_account_holder_2,"onUpdate:modelValue":b[15]||(b[15]=g=>l(o).bank_account_holder_2=g),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_2,"error-message":l(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),r.value?k("",!0):(d(),w("div",TV,[e(ie,{modelValue:l(o).url_1,"onUpdate:modelValue":b[16]||(b[16]=g=>l(o).url_1=g),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_1,"error-message":l(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).url_2,"onUpdate:modelValue":b[17]||(b[17]=g=>l(o).url_2=g),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_2,"error-message":l(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",PV,[e(ua,{class:"full-width q-pl-none",modelValue:l(o).active,"onUpdate:modelValue":b[18]||(b[18]=g=>l(o).active=g),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",RV,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:b[19]||(b[19]=J(g=>r.value=!r.value,["stop"]))},[e(C,{name:r.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),v(" "+i(r.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},IV=Object.freeze(Object.defineProperty({__proto__:null,default:OV},Symbol.toStringTag,{value:"Module"})),UV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},DV={class:"q-pa-xs"},jV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},EV={key:0},AV={key:1},MV={class:"flex justify-end"},no="Pemasok",NV={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=je({search:"",status:"active",...Ke()}),m=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];xe(()=>{S()});const y=R=>ot({message:`Hapus pemasok ${R.name}?`,url:route("admin.supplier.delete",R.id),fetchItemsCallback:S,loading:r}),S=(R=null)=>{He({pagination:m,filter:p,props:R,rows:o,url:route("admin.supplier.data"),loading:r,tableRef:n})},V=()=>S(),x=R=>W.get(route("admin.supplier.detail",{id:R.id})),{protectClick:D}=Et(),L=D(x),T=X(()=>s.screen.gt.sm?g:g.filter(R=>R.name==="code"||R.name==="action"));return(R,I)=>{const N=Q("i-head"),M=Q("authenticated-layout");return d(),w(H,null,[e(N,{title:no}),e(M,null,Fe({title:a(()=>[v(i(no))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=h=>u.value=!u.value)},null,8,["icon"]),R.$can("admin.supplier.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=h=>l(W).get(R.route("admin.supplier.add")))})):k("",!0)]),default:a(()=>[t("div",DV,[e(Ae,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":I[5]||(I[5]=h=>m.value=h),filter:p.search,loading:r.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],style:We({height:l(b)}),onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:O})=>[t("div",jV,[t("span",null,i(j)+" "+i(O?" with term "+O:""),1)])]),body:a(h=>[e(Oe,{props:h,class:qe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(j=>l(L)(h.row,j),["stop"])},{default:a(()=>[e(Y,{key:"code",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),U(C,{key:0,name:"person"})):k("",!0),v(" "+i(h.row.code)+" ",1),l(s).screen.lt.md?(d(),w(H,{key:1},[v(" - "+i(h.row.name),1)],64)):k("",!0)]),l(s).screen.lt.md?(d(),w(H,{key:0},[t("div",{class:qe(h.row.balance<0?"text-negative":"text-positive")},[e(C,{name:"wallet"}),v(" "+i(l(K)(h.row.balance)),1)],2),h.row.phone_1?(d(),w("div",EV,[e(C,{name:"phone"}),v(" "+i(h.row.phone_1),1)])):k("",!0),h.row.address?(d(),w("div",AV,[e(C,{name:"home_pin"}),v(" "+i(h.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[v(i(h.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:h,class:"wrap-column"},{default:a(()=>[t("div",{class:qe(h.row.balance<0?"text-negative":"text-positive")},i(l(K)(h.row.balance)),3)]),_:2},1032,["props"]),e(Y,{key:"phone_1",props:h},{default:a(()=>[v(i(h.row.phone_1),1)]),_:2},1032,["props"]),e(Y,{key:"address",props:h},{default:a(()=>[v(i(h.row.address),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:h},{default:a(()=>[t("div",MV,[R.$can("admin.supplier.add")||R.$can("admin.supplier.edit")||R.$can("admin.supplier.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[4]||(I[4]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[R.$can("admin.supplier.add")?le((d(),U(ne,{key:0,clickable:"",onClick:J(j=>l(W).get(R.route("admin.supplier.duplicate",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>I[6]||(I[6]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),R.$can("admin.supplier.edit")?le((d(),U(ne,{key:1,clickable:"",onClick:J(j=>l(W).get(R.route("admin.supplier.edit",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>I[7]||(I[7]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),R.$can("admin.supplier.delete")?le((d(),U(ne,{key:2,onClick:J(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>I[8]||(I[8]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",UV,[e(ue,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[2]||(I[2]=h=>p.status=h),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[3]||(I[3]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},BV=Object.freeze(Object.defineProperty({__proto__:null,default:NV},Symbol.toStringTag,{value:"Module"})),zV={class:"q-gutter-sm"},FV={class:"col col-md-6 q-pa-xs"},LV={class:"q-pt-md"},KV={key:0,class:"text-caption text-negative"},HV={class:"q-pt-md"},WV={key:0,class:"text-caption text-negative"},YV={__name:"Editor",setup(c){const s=he(),u=be(),o=(u.props.data.id?"Edit":"Tambah")+" Skema Pajak",r=Je({id:u.props.data.id,name:u.props.data.name,rate_percentage:u.props.data.rate_percentage??0,tax_authority:u.props.data.tax_authority,is_inclusive:u.props.data.is_inclusive??!1,active:u.props.data.active??!0,description:u.props.data.description}),n=()=>nt({form:r,url:route("admin.tax-scheme.save")});return(f,b)=>{const p=Q("i-head"),m=Q("authenticated-layout");return d(),w(H,null,[e(p,{title:o}),e(m,{"show-drawer-button":!l(s).screen.lt.md},Fe({title:a(()=>[v(i(o))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",FV,[e(Ge,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(r).id=g)},null,512),[[yt,l(r).id]]),e(ie,{autofocus:"",modelValue:l(r).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(r).name=g),modelModifiers:{trim:!0},label:"Nama Skema Pajak","lazy-rules":"",error:!!l(r).errors.name,disable:l(r).processing,"error-message":l(r).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(r).rate_percentage,"onUpdate:modelValue":b[3]||(b[3]=g=>l(r).rate_percentage=g),modelModifiers:{number:!0},label:"Tarif Persentase (%)",type:"number",suffix:"%",rules:[g=>g>=0||"Persentase tidak boleh negatif."],error:!!l(r).errors.rate_percentage,disable:l(r).processing,"error-message":l(r).errors.rate_percentage,"hide-bottom-space":""},null,8,["modelValue","rules","error","disable","error-message"]),e(ie,{modelValue:l(r).tax_authority,"onUpdate:modelValue":b[4]||(b[4]=g=>l(r).tax_authority=g),modelModifiers:{trim:!0},label:"Otoritas Pajak (Opsional)",hint:"Contoh: DJP, Pemerintah Daerah",error:!!l(r).errors.tax_authority,disable:l(r).processing,"error-message":l(r).errors.tax_authority,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ie,{modelValue:l(r).description,"onUpdate:modelValue":b[5]||(b[5]=g=>l(r).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(r).processing,error:!!l(r).errors.description,"error-message":l(r).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",LV,[e(al,{modelValue:l(r).is_inclusive,"onUpdate:modelValue":b[6]||(b[6]=g=>l(r).is_inclusive=g),disable:l(r).processing,label:l(r).is_inclusive?"Harga Jual SUDAH termasuk Pajak":"Harga Jual BELUM termasuk Pajak",color:"primary"},null,8,["modelValue","disable","label"]),l(r).errors.is_inclusive?(d(),w("div",KV,i(l(r).errors.is_inclusive),1)):k("",!0)]),t("div",HV,[e(al,{modelValue:l(r).active,"onUpdate:modelValue":b[7]||(b[7]=g=>l(r).active=g),disable:l(r).processing,label:l(r).active?"Skema Aktif":"Skema Non-Aktif",color:"primary"},null,8,["modelValue","disable","label"]),l(r).errors.active?(d(),w("div",WV,i(l(r).errors.active),1)):k("",!0)])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(r).processing,loading:l(r).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(r).processing,onClick:b[8]||(b[8]=g=>l(W).get(f.route("admin.tax-scheme.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",zV,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>l(W).get(f.route("admin.tax-scheme.index")))})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},QV=Object.freeze(Object.defineProperty({__proto__:null,default:YV},Symbol.toStringTag,{value:"Module"})),JV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},GV={class:"q-pa-xs"},XV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ZV={class:"text-weight-bold"},eq={class:"text-grey-8"},tq={class:"text-weight-medium"},aq={class:"text-weight-medium text-uppercase"},lq={key:0,class:"text-grey-8"},oq={key:1,class:"text-grey-8"},nq={class:"flex justify-end"},so="Skema Pajak",sq={__name:"Index",setup(c){const s=he(),u=P(!1),o=P([]),r=P(!0),n=P(null),f=P(null),b=at(f),p=je({search:"",...Ke()}),m=P({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"rate_percentage",label:"Tarif",field:"rate_percentage",align:"right",sortable:!0,format:V=>`${V}%`},{name:"is_inclusive",label:"Tipe Harga",field:"is_inclusive",align:"center",format:V=>V?"INCLUSIVE":"EXCLUSIVE",sortable:!0},{name:"tax_authority",label:"Otoritas",field:"tax_authority",align:"left",sortable:!0},{name:"active",label:"Status",field:"active",align:"center",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left"},{name:"action",align:"right"}];xe(()=>{y()});const _=V=>ot({message:`Hapus Skema Pajak ${V.name}?`,url:route("admin.tax-scheme.delete",V.id),fetchItemsCallback:y,loading:r}),y=(V=null)=>{He({pagination:m,filter:p,props:V,rows:o,url:route("admin.tax-scheme.data"),loading:r,tableRef:n})},S=X(()=>s.screen.gt.sm?g:g.filter(V=>V.name==="name"||V.name==="action"));return(V,x)=>{const D=Q("i-head"),L=Q("authenticated-layout");return d(),w(H,null,[e(D,{title:so}),e(L,null,Fe({title:a(()=>[v(i(so))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=T=>u.value=!u.value)},null,8,["icon"]),V.$can("admin.tax-scheme.add")?(d(),U(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=T=>l(W).get(V.route("admin.tax-scheme.add")))})):k("",!0)]),default:a(()=>[t("div",GV,[e(Ae,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":x[4]||(x[4]=T=>m.value=T),filter:p.search,loading:r.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],style:We({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":a(({icon:T,message:R,filter:I})=>[t("div",XV,[t("span",null,i(R)+" "+i(I?" with term "+I:""),1)])]),body:a(T=>[e(Oe,{props:T},{default:a(()=>[e(Y,{key:"name",props:T,class:"wrap-column"},{default:a(()=>[t("div",ZV,i(T.row.name),1),l(s).screen.gt.sm?k("",!0):(d(),w(H,{key:0},[t("div",eq,[x[5]||(x[5]=v(" Tarif: ")),t("span",tq,i(T.row.rate_percentage)+"%",1)]),t("div",null,[x[6]||(x[6]=v(" Tipe: ")),t("span",aq,i(T.row.is_inclusive?"Inclusive":"Exclusive"),1)]),T.row.tax_authority?(d(),w("div",lq,[e(C,{name:"account_balance",size:"xs"}),v(" Otoritas: "+i(T.row.tax_authority),1)])):k("",!0),T.row.description?(d(),w("div",oq,[e(C,{name:"description",size:"xs"}),v(" "+i(T.row.description),1)])):k("",!0),e(st,{color:T.row.active?"positive":"negative"},{default:a(()=>[v(i(T.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])],64))]),_:2},1032,["props"]),e(Y,{key:"rate_percentage",props:T,class:"text-right text-weight-bold"},{default:a(()=>[v(i(T.row.rate_percentage)+"% ",1)]),_:2},1032,["props"]),e(Y,{key:"is_inclusive",props:T,class:"text-center"},{default:a(()=>[e(st,{color:T.row.is_inclusive?"green-7":"deep-orange-7","text-color":"white"},{default:a(()=>[v(i(T.row.is_inclusive?"INCLUSIVE":"EXCLUSIVE"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Y,{key:"tax_authority",props:T,class:"wrap-column"},{default:a(()=>[v(i(T.row.tax_authority),1)]),_:2},1032,["props"]),e(Y,{key:"active",props:T,class:"text-center"},{default:a(()=>[e(st,{color:T.row.active?"positive":"negative"},{default:a(()=>[v(i(T.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Y,{key:"description",props:T,class:"wrap-column"},{default:a(()=>[v(i(T.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:T},{default:a(()=>[t("div",nq,[V.$can("admin.tax-scheme.add")||V.$can("admin.tax-scheme.edit")||V.$can("admin.tax-scheme.delete")?(d(),U(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=J(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[V.$can("admin.tax-scheme.add")?le((d(),U(ne,{key:0,clickable:"",onClick:J(R=>l(W).get(V.route("admin.tax-scheme.duplicate",T.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>x[7]||(x[7]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),V.$can("admin.tax-scheme.edit")?le((d(),U(ne,{key:1,clickable:"",onClick:J(R=>l(W).get(V.route("admin.tax-scheme.edit",T.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>x[8]||(x[8]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0),V.$can("admin.tax-scheme.delete")?le((d(),U(ne,{key:2,onClick:J(R=>_(T.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>x[9]||(x[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[re],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",JV,[e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":x[2]||(x[2]=T=>p.search=T),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},rq=Object.freeze(Object.defineProperty({__proto__:null,default:sq},Symbol.toStringTag,{value:"Module"})),iq={key:1,class:"q-ml-sm"},dq={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},uq={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},mq={class:"absolute-bottom text-grey-6 q-pa-md"},ja="amanah-pos.layout.left-drawer-open",cq={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(c,{expose:s}){const u=he(),o=be(),r=P(JSON.parse(localStorage.getItem(ja))),n=P(!1),f=()=>r.value=!r.value,b=()=>{r.value=!1};return Be(r,p=>{localStorage.setItem(ja,p)}),xe(()=>{r.value=JSON.parse(localStorage.getItem(ja)),u.screen.lt.md&&(r.value=!1)}),s({hideDrawer:b}),(p,m)=>{const g=Q("my-link");return d(),U(qs,{view:"lHh LpR lFf"},{default:a(()=>[e(hs,null,{default:a(()=>[e(Xe,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:a(()=>[c.showDrawerButton&&!r.value?(d(),U(E,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:f},{default:a(()=>[e(C,{class:"material-symbols-outlined"},{default:a(()=>m[36]||(m[36]=[v("dock_to_right")])),_:1})]),_:1})):k("",!0),l(u).screen.gt.sm?(d(),w("div",iq,[Vt(p.$slots,"left-button",{},void 0,!0)])):k("",!0),e(sa,{style:{"font-size":"16px"}},{default:a(()=>[Vt(p.$slots,"title",{},()=>[v(i(p.$config.APP_NAME),1)],!0)]),_:3}),Vt(p.$slots,"right-button",{},void 0,!0)]),_:3}),Vt(p.$slots,"header",{},void 0,!0)]),_:3}),e($s,{breakpoint:768,modelValue:r.value,"onUpdate:modelValue":m[35]||(m[35]=_=>r.value=_),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:a(()=>[t("div",dq,[t("div",uq,[e(xs,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=_=>n.value=_),class:qe(["profile-btn text-bold",{"profile-btn-active":n.value}]),flat:"",label:l(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:a(()=>[e(Ee,{id:"profile-btn-popup",style:{color:"#444"}},{default:a(()=>[e(ne,null,{default:a(()=>[e(ta,{style:{"margin-left":"-15px"}},{default:a(()=>[e(C,{name:"person"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>[e(g,{class:"text-bold text-grey-9",href:p.route("admin.user-profile.edit")},{default:a(()=>[v(i(l(o).props.auth.user.name),1)]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}),e(Pe),le((d(),U(ne,{clickable:"",style:{color:"inherit"},href:p.route("admin.auth.logout")},{default:a(()=>[e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>[e(C,{name:"logout",class:"q-mr-sm"}),m[37]||(m[37]=v(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[fe],[re]])]),_:1})]),_:1},8,["modelValue","label","class"]),r.value?(d(),U(E,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:f},{default:a(()=>[e(C,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(Ss,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:a(()=>[e(Ee,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:a(()=>[le((d(),U(ne,{clickable:"",active:p.$page.url.startsWith("/admin/home"),onClick:m[1]||(m[1]=_=>l(W).get(p.route("admin.home")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"home"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[38]||(m[38]=[v("Beranda")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]),p.$can("admin.dashboard")?le((d(),U(ne,{key:0,clickable:"",active:p.$page.url.startsWith("/admin/dashboard"),onClick:m[2]||(m[2]=_=>l(W).get(p.route("admin.dashboard")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"dashboard"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[39]||(m[39]=[v("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),e(St,{icon:"o_fast_forward",label:"Pintasan"},{default:a(()=>[p.$can("admin.sales-order.add")?le((d(),U(ne,{key:0,class:"subnav show-icon",clickable:"",onClick:m[3]||(m[3]=_=>l(W).get(p.route("admin.sales-order.add")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"add_shopping_cart"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[40]||(m[40]=[v("Penjualan Baru ")])),_:1})]),_:1})]),_:1})),[[re]]):k("",!0),p.$can("admin.purchase-order.add")?le((d(),U(ne,{key:1,class:"subnav show-icon",clickable:"",onClick:m[4]||(m[4]=_=>l(W).get(p.route("admin.purchase-order.add")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"o_shopping_basket"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[41]||(m[41]=[v("Pembelian Baru ")])),_:1})]),_:1})]),_:1})),[[re]]):k("",!0),e(Pe),p.$can("admin.customer.add")?le((d(),U(ne,{key:2,class:"subnav show-icon",clickable:"",onClick:m[5]||(m[5]=_=>l(W).get(p.route("admin.customer.add")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"person_add_alt"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[42]||(m[42]=[v("Pelanggan Baru ")])),_:1})]),_:1})]),_:1})),[[re]]):k("",!0),p.$can("admin.supplier.add")?le((d(),U(ne,{key:3,class:"subnav show-icon",clickable:"",onClick:m[6]||(m[6]=_=>l(W).get(p.route("admin.supplier.add")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"o_business_center"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[43]||(m[43]=[v("Pemasok Baru ")])),_:1})]),_:1})]),_:1})),[[re]]):k("",!0),e(Pe),p.$can("admin.product.add")?le((d(),U(ne,{key:4,class:"subnav show-icon",clickable:"",onClick:m[7]||(m[7]=_=>l(W).get(p.route("admin.product.add")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"o_inventory_2"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[44]||(m[44]=[v("Produk Baru ")])),_:1})]),_:1})]),_:1})),[[re]]):k("",!0)]),_:1}),p.$can("admin.sales-order.index")||p.$can("admin.customer.index")||p.$can("admin.sales-order-return.index")?(d(),U(St,{key:1,icon:"storefront",label:"Penjualan","default-opened":p.$page.url.startsWith("/admin/sales-orders")||p.$page.url.startsWith("/admin/sales-order-returns")||p.$page.url.startsWith("/admin/customers")||p.$page.url.startsWith("/admin/customer-wallet-transactions")||p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[p.$can("admin.sales-order.index")?le((d(),U(ne,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-orders"),onClick:m[8]||(m[8]=_=>l(W).get(p.route("admin.sales-order.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"add_shopping_cart"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[45]||(m[45]=[v("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.sales-order-return.index")?le((d(),U(ne,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-order-returns"),onClick:m[9]||(m[9]=_=>l(W).get(p.route("admin.sales-order-return.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"remove_shopping_cart"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[46]||(m[46]=[v("Retur Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.customer.index")?le((d(),U(ne,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customers"),onClick:m[10]||(m[10]=_=>l(W).get(p.route("admin.customer.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"people"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[47]||(m[47]=[v("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.customer-wallet-transaction-confirmation.index")||p.$can("admin.customer-wallet-transaction.index")?(d(),U(St,{key:3,class:"subnav",icon:"wallet",label:"Wallet","default-opened":p.$page.url.startsWith("/admin/customer-wallet-transactions")||p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[p.$can("admin.customer-wallet-transaction-confirmation.index")?le((d(),U(ne,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:m[11]||(m[11]=_=>l(W).get(p.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"add_task"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[48]||(m[48]=[v("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.customer-wallet-transaction.index")?le((d(),U(ne,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:m[12]||(m[12]=_=>l(W).get(p.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"moving"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[49]||(m[49]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.purchase-order.index")||p.$can("admin.supplier.index")||p.$can("admin.purchase-order-return.index")?(d(),U(St,{key:2,icon:"local_shipping",label:"Pembelian","default-opened":p.$page.url.startsWith("/admin/purchase-orders")||p.$page.url.startsWith("/admin/purchase-order-returns")||p.$page.url.startsWith("/admin/suppliers")},{default:a(()=>[p.$can("admin.purchase-order.index")?le((d(),U(ne,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-orders"),onClick:m[13]||(m[13]=_=>l(W).get(p.route("admin.purchase-order.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"add_shopping_cart"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[50]||(m[50]=[v("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.purchase-order-return.index")?le((d(),U(ne,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-order-returns"),onClick:m[14]||(m[14]=_=>l(W).get(p.route("admin.purchase-order-return.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"remove_shopping_cart"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[51]||(m[51]=[v("Retur Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.supplier.index")?le((d(),U(ne,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/suppliers"),onClick:m[15]||(m[15]=_=>l(W).get(p.route("admin.supplier.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"people"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[52]||(m[52]=[v("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.product.index")||p.$can("admin.product-category.index")||p.$can("admin.stock-adjustment.index")||p.$can("admin.stock-movement.index")?(d(),U(St,{key:3,icon:"inventory_2",label:"Inventori","default-opened":p.$page.url.startsWith("/admin/products")||p.$page.url.startsWith("/admin/product-categories")||p.$page.url.startsWith("/admin/stock-adjustments")||p.$page.url.startsWith("/admin/stock-movements")},{default:a(()=>[p.$can("admin.stock-adjustment.index")?le((d(),U(ne,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-adjustments"),onClick:m[16]||(m[16]=_=>l(W).get(p.route("admin.stock-adjustment.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"swap_vert"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[53]||(m[53]=[v("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.stock-movement.index")?le((d(),U(ne,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-movements"),onClick:m[17]||(m[17]=_=>l(W).get(p.route("admin.stock-movement.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"timeline"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[54]||(m[54]=[v("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.product.index")?le((d(),U(ne,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/products"),onClick:m[18]||(m[18]=_=>l(W).get(p.route("admin.product.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"box"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[55]||(m[55]=[v("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.product-category.index")?le((d(),U(ne,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/product-categories"),onClick:m[19]||(m[19]=_=>l(W).get(p.route("admin.product-category.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"category"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[56]||(m[56]=[v("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(St,{icon:"business_center",label:"Back Office","default-opened":p.$page.url.startsWith("/admin/cashier-terminals")||p.$page.url.startsWith("/admin/cashier-sessions")||p.$page.url.startsWith("/admin/finance-accounts")||p.$page.url.startsWith("/admin/finance-transactions")||p.$page.url.startsWith("/admin/operational-costs")||p.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[p.$can("admin.cashier-session.index")||p.$can("admin.cashier-terminal.index")||p.$can("admin.finance-account.index")||p.$can("admin.finance-transaction.index")||p.$can("admin.operational-cost.index")||p.$can("admin.operational-cost-category.index")?(d(),U(St,{key:0,class:"subnav show-icon",icon:"point_of_sale",label:"Kasir","default-opened":p.$page.url.startsWith("/admin/cashier-terminals")||p.$page.url.startsWith("/admin/cashier-session")},{default:a(()=>[p.$can("admin.cashier-session.index")?le((d(),U(ne,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-sessions"),onClick:m[20]||(m[20]=_=>l(W).get(p.route("admin.cashier-session.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"tv_signin"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[57]||(m[57]=[v("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.cashier-terminal.index")?le((d(),U(ne,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-terminals"),onClick:m[21]||(m[21]=_=>l(W).get(p.route("admin.cashier-terminal.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"point_of_sale"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[58]||(m[58]=[v("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.finance-transaction.index")||p.$can("admin.finance-account.index")?(d(),U(St,{key:1,class:"subnav show-icon",icon:"finance",label:"Keuangan","default-opened":p.$page.url.startsWith("/admin/finance-accounts")||p.$page.url.startsWith("/admin/finance-transactions")},{default:a(()=>[p.$can("admin.finance-transaction.index")?le((d(),U(ne,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-transactions"),onClick:m[22]||(m[22]=_=>l(W).get(p.route("admin.finance-transaction.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"moving"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[59]||(m[59]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.finance-account.index")?le((d(),U(ne,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-accounts"),onClick:m[23]||(m[23]=_=>l(W).get(p.route("admin.finance-account.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"groups_2"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[60]||(m[60]=[v("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.operational-cost.index")||p.$can("admin.operational-cost-category.index")?(d(),U(St,{key:2,class:"subnav show-icon",icon:"paid",label:"Operasional","default-opened":p.$page.url.startsWith("/admin/operational-costs")||p.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[p.$can("admin.operational-cost.index")?le((d(),U(ne,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-costs"),onClick:m[24]||(m[24]=_=>l(W).get(p.route("admin.operational-cost.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"request_quote"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[61]||(m[61]=[v("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.operational-cost-category.index")?le((d(),U(ne,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-cost-categories"),onClick:m[25]||(m[25]=_=>l(W).get(p.route("admin.operational-cost-category.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"category"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[62]||(m[62]=[v("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"]),p.$can("admin.report.index")?le((d(),U(ne,{key:4,clickable:"",active:p.$page.url.startsWith("/admin/reports"),onClick:m[26]||(m[26]=_=>l(W).get(p.route("admin.report.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"analytics"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[63]||(m[63]=[v("Laporan")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),e(St,{icon:"settings",label:"Pengaturan","default-opened":p.$page.url.startsWith("/admin/settings")},{default:a(()=>[p.$can("admin.user.index")?le((d(),U(ne,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/users"),onClick:m[27]||(m[27]=_=>l(W).get(p.route("admin.user.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"person"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[64]||(m[64]=[v("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.user-role.index")?le((d(),U(ne,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-roles"),onClick:m[28]||(m[28]=_=>l(W).get(p.route("admin.user-role.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"group"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[65]||(m[65]=[v("Peran Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),k("",!0),p.$can("admin.pos-settings.edit")?le((d(),U(ne,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/pos"),onClick:m[30]||(m[30]=_=>l(W).get(p.route("admin.pos-settings.edit")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"point_of_sale"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[67]||(m[67]=[v("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.company-profile.edit")?le((d(),U(ne,{key:4,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/company-profile"),onClick:m[31]||(m[31]=_=>l(W).get(p.route("admin.company-profile.edit")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"apartment"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[68]||(m[68]=[v("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),p.$can("admin.user-activity-log.index")?le((d(),U(ne,{key:5,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:m[32]||(m[32]=_=>l(W).get(p.route("admin.user-activity-log.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"article"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[69]||(m[69]=[v("Log Aktivitas")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]]):k("",!0),k("",!0),le((d(),U(ne,{class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/system-information"),onClick:m[34]||(m[34]=_=>l(W).get(p.route("admin.settings.system-information")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"info"})]),_:1}),e(B,null,{default:a(()=>[e(ve,null,{default:a(()=>m[71]||(m[71]=[v("Informasi Sistem")])),_:1})]),_:1})]),_:1},8,["active"])),[[re]])]),_:1},8,["default-opened"]),t("div",mq,"  2025 - "+i(p.$config.APP_NAME+" v"+p.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Vs,{class:"bg-grey-1"},{default:a(()=>[e(Te,null,{default:a(()=>[Vt(p.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),Vt(p.$slots,"footer",{},void 0,!0)]),_:3})}}},pq=_t(cq,[["__scopeId","data-v-d7eb3a70"]]),fq={__name:"GuestLayout",setup(c){return(s,u)=>(d(),U(Cs,null,{default:a(()=>[Vt(s.$slots,"default")]),_:3}))}};Ts({onRegistered(c){console.log("Admin Service Worker registered:",c)}});Ps({layouts:{authenticated:pq,guest:fq},pagesGlob:Object.assign({"./pages/_examples/Autocomplete1.vue":Us,"./pages/auth/Login.vue":zs,"./pages/cashier-session/Close.vue":Qs,"./pages/cashier-session/Detail.vue":Mr,"./pages/cashier-session/Index.vue":ei,"./pages/cashier-session/Open.vue":oi,"./pages/cashier-session/detail/FinanceTransactionTab.vue":Ur,"./pages/cashier-session/detail/MainInfoTab.vue":yr,"./pages/cashier-session/detail/SalesOrderTab.vue":Cr,"./pages/cashier-terminal/Detail.vue":yi,"./pages/cashier-terminal/Editor.vue":xi,"./pages/cashier-terminal/Index.vue":Pi,"./pages/cashier-terminal/detail/MainInfoTab.vue":ci,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":fi,"./pages/customer-wallet-transaction-confirmation/Detail.vue":Bi,"./pages/customer-wallet-transaction-confirmation/Index.vue":Wi,"./pages/customer-wallet-transaction/Adjustment.vue":Ji,"./pages/customer-wallet-transaction/Detail.vue":rd,"./pages/customer-wallet-transaction/Editor.vue":md,"./pages/customer-wallet-transaction/Index.vue":yd,"./pages/customer/Detail.vue":Fd,"./pages/customer/Editor.vue":Wd,"./pages/customer/Import.vue":eu,"./pages/customer/Index.vue":du,"./pages/customer/detail/MainInfoTab.vue":Td,"./pages/customer/detail/OrderHistoryTab.vue":Ed,"./pages/customer/detail/WalletHistoryTab.vue":Od,"./pages/dashboard/Index.vue":Au,"./pages/dashboard/cards/ActualSummaryCard.vue":hu,"./pages/dashboard/cards/ChartCard.vue":qu,"./pages/dashboard/cards/SummaryCard.vue":Yu,"./pages/dashboard/cards/TopCard.vue":Iu,"./pages/finance-account/Detail.vue":sm,"./pages/finance-account/Editor.vue":mm,"./pages/finance-account/Index.vue":xm,"./pages/finance-account/detail/HistoryTab.vue":em,"./pages/finance-account/detail/MainInfoTab.vue":Ju,"./pages/finance-transaction/Detail.vue":Dm,"./pages/finance-transaction/Editor.vue":Mm,"./pages/finance-transaction/Index.vue":Wm,"./pages/home/Index.vue":oc,"./pages/operational-cost-category/Editor.vue":ic,"./pages/operational-cost-category/Index.vue":gc,"./pages/operational-cost/Detail.vue":Vc,"./pages/operational-cost/Editor.vue":Oc,"./pages/operational-cost/Index.vue":Bc,"./pages/product-category/Editor.vue":Kc,"./pages/product-category/Index.vue":Xc,"./pages/product/Detail.vue":wp,"./pages/product/Editor.vue":Op,"./pages/product/Import.vue":jp,"./pages/product/Index.vue":Qp,"./pages/product/SendPriceList.vue":lf,"./pages/product/SendPriceList2.vue":mf,"./pages/product/detail/MainInfoTab.vue":mp,"./pages/product/detail/StockHistoryTab.vue":fp,"./pages/purchase-order-return/Create.vue":gf,"./pages/purchase-order-return/Detail.vue":fg,"./pages/purchase-order-return/Editor.vue":p1,"./pages/purchase-order-return/Index.vue":V1,"./pages/purchase-order-return/detail/MainInfoTab.vue":zf,"./pages/purchase-order-return/detail/PaymentDialog.vue":Qf,"./pages/purchase-order-return/detail/RefundTab.vue":ug,"./pages/purchase-order-return/editor/HelpDialog.vue":qg,"./pages/purchase-order-return/editor/ItemEditorDialog.vue":hg,"./pages/purchase-order-return/editor/ItemsListTable.vue":yg,"./pages/purchase-order-return/editor/OrderInfoDialog.vue":Rg,"./pages/purchase-order-return/editor/PaymentDialog.vue":F1,"./pages/purchase-order-return/editor/SuccessDialog.vue":lb,"./pages/purchase-order/Detail.vue":mv,"./pages/purchase-order/Editor.vue":x_,"./pages/purchase-order/Index.vue":j_,"./pages/purchase-order/detail/InvoiceTab.vue":Ab,"./pages/purchase-order/detail/PaymentDialog.vue":Hb,"./pages/purchase-order/detail/PaymentTab.vue":rv,"./pages/purchase-order/editor/HelpDialog.vue":Ev,"./pages/purchase-order/editor/ItemEditorDialog.vue":Dv,"./pages/purchase-order/editor/ItemsListTable.vue":bv,"./pages/purchase-order/editor/OrderInfoDialog.vue":Bv,"./pages/purchase-order/editor/PaymentDialog.vue":Ov,"./pages/purchase-order/editor/SuccessDialog.vue":e_,"./pages/report/Index.vue":K_,"./pages/reports/ReportGeneratorLayout.vue":oy,"./pages/reports/customer/Index.vue":ry,"./pages/reports/product/Index.vue":uy,"./pages/reports/supplier/Index.vue":py,"./pages/sales-order-return/Create.vue":vy,"./pages/sales-order-return/Detail.vue":kk,"./pages/sales-order-return/Editor.vue":nw,"./pages/sales-order-return/Index.vue":kw,"./pages/sales-order-return/detail/MainInfoTab.vue":Wy,"./pages/sales-order-return/detail/PaymentDialog.vue":ek,"./pages/sales-order-return/detail/RefundTab.vue":bk,"./pages/sales-order-return/editor/HelpDialog.vue":Rk,"./pages/sales-order-return/editor/ItemEditorDialog.vue":Ck,"./pages/sales-order-return/editor/ItemsListTable.vue":Sk,"./pages/sales-order-return/editor/OrderInfoDialog.vue":Dk,"./pages/sales-order-return/editor/PaymentDialog.vue":Ew,"./pages/sales-order-return/editor/SuccessDialog.vue":Gw,"./pages/sales-order/Detail.vue":i2,"./pages/sales-order/Editor.vue":hh,"./pages/sales-order/Index.vue":Mh,"./pages/sales-order/detail/InvoiceTab.vue":D0,"./pages/sales-order/detail/PaymentDialog.vue":F0,"./pages/sales-order/detail/PaymentTab.vue":o2,"./pages/sales-order/editor/HelpDialog.vue":U2,"./pages/sales-order/editor/ItemEditorDialog.vue":O2,"./pages/sales-order/editor/ItemsListTable.vue":p2,"./pages/sales-order/editor/OrderInfoDialog.vue":A2,"./pages/sales-order/editor/PaymentDialog.vue":T2,"./pages/sales-order/editor/SuccessDialog.vue":G2,"./pages/settings/SystemInformation.vue":Kh,"./pages/settings/company-profile/Edit.vue":Gh,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":Hh,"./pages/settings/database/Index.vue":a$,"./pages/settings/pos/Edit.vue":r$,"./pages/settings/user-activity-log/Detail.vue":W$,"./pages/settings/user-activity-log/Index.vue":ex,"./pages/settings/user-profile/Edit.vue":rx,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":tx,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":ax,"./pages/settings/user-role/Detail.vue":xx,"./pages/settings/user-role/Editor.vue":Px,"./pages/settings/user-role/Index.vue":jx,"./pages/settings/user/Detail.vue":Yx,"./pages/settings/user/Editor.vue":eS,"./pages/settings/user/Index.vue":rS,"./pages/stock-adjustment/Create.vue":_S,"./pages/stock-adjustment/Detail.vue":TS,"./pages/stock-adjustment/Editor.vue":jS,"./pages/stock-adjustment/Index.vue":YS,"./pages/stock-movement/Index.vue":ZS,"./pages/supplier/Detail.vue":wV,"./pages/supplier/Editor.vue":IV,"./pages/supplier/Index.vue":BV,"./pages/supplier/detail/MainInfoTab.vue":dV,"./pages/supplier/detail/OrderHistoryTab.vue":gV,"./pages/tax-scheme/Editor.vue":QV,"./pages/tax-scheme/Index.vue":rq})});
