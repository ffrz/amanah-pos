import{_ as wt,r as Q,c as h,o as p,a as e,w as l,b as t,Q as pe,d as te,e as y,F as W,f as q,g as P,h as k,i as de,t as r,u as a,j as L,k as Qe,l as la,T as Le,m as Ro,n as Ve,p as ze,q as J,s as Je,v as Ft,x as V,y as oe,z as D,A as mt,B as fe,C as Be,D as ee,E as dt,G as it,H as X,I as Do,J as pa,K as Vl,L as Tt,M as G,N as oa,O as he,R as ne,P as _e,S as ql,U as Uo,V as Ao,W as It,X as $t,Y as fa,Z as ya,$ as jo,a0 as Ae,a1 as Eo,a2 as Mo,a3 as No,a4 as Ct,a5 as Bo,a6 as zo,a7 as ga,a8 as Mt,a9 as ba,aa as Pa,ab as Fo,ac as Gt,ad as Oa,ae as Lo,af as Ia,ag as Ho,ah as Cl,ai as Ko,aj as Yo,ak as Qo,al as ka,am as wa,an as Wo,ao as Vt,ap as ve,aq as Oe,ar as De,as as Ue,at as xe,au as Ce,av as Y,aw as ke,ax as ut,ay as Ee,az as Pe,aA as Zt,aB as $e,aC as Xe,aD as Ge,aE as He,aF as et,aG as Me,aH as We,aI as je,aJ as ae,aK as N,aL as ue,aM as lt,aN as Re,aO as Tl,aP as na,aQ as Ht,aR as Kt,aS as Yt,aT as Rt,aU as Dt,aV as Ze,aW as Ra,aX as sa,aY as Da,aZ as ra,a_ as Nt,a$ as Bt,b0 as ha,b1 as Qt,b2 as Jo,b3 as Go,b4 as Pl,b5 as Xo,b6 as Zo,b7 as en,b8 as tn,b9 as Ua,ba as an,bb as ln,bc as on,bd as nn,be as Ol,bf as tt,bg as sn,bh as Aa,bi as rn,bj as dn,bk as un,bl as mn,bm as cn,bn as pn,bo as fn,bp as ye,bq as Lt,br as ot,bs as gn,bt as bn,bu as vn,bv as Il,bw as ea,bx as ct,by as yn,bz as _n,bA as kn,bB as kt,bC as ta,bD as Ut,bE as Rl,bF as Dl,bG as wn,bH as vt,bI as yt,bJ as _t,bK as Wt,bL as ia,bM as Ul,bN as hn,bO as $n,bP as xn,bQ as Al,bR as Sn,bS as Vn,bT as qn,bU as Ot,bV as Cn,bW as Tn,bX as Pn,bY as On,bZ as In,b_ as Rn,b$ as Dn,c0 as Un,c1 as An}from"./BaseGuestLayout-Bpy6VPPc.js";const jn={},En={class:"row"};function Mn(d,n){const u=Q("i-head"),o=Q("authenticated-layout");return p(),h(W,null,[e(u,{title:"About"}),e(o,null,{title:l(()=>n[0]||(n[0]=[y("About")])),default:l(()=>[t("div",En,[e(pe,{class:"col q-pa-md q-ma-md",square:"",flat:"",bordered:""},{default:l(()=>[e(te,null,{default:l(()=>n[1]||(n[1]=[t("div",{class:"q-mb-md text-h4"},"About",-1),t("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Autem soluta, accusamus placeat eius eligendi perferendis quisquam veritatis iste debitis laboriosam facere et aliquam quos beatae illo distinctio rerum eos! Expedita, voluptatem. Aut nihil deleniti magni fuga eius labore aliquam nulla quod ullam sunt amet eum asperiores, harum unde eligendi tempore sapiente. Placeat sed, dignissimos voluptatum perspiciatis saepe aspernatur, maxime est, ipsam quas nobis cumque sunt labore molestias? Amet in sed ullam recusandae, nostrum dicta facilis blanditiis incidunt quae commodi soluta id impedit vel fugit illo, molestias reiciendis, provident nam molestiae! Ipsam, hic. Facere aut quisquam praesentium enim illum, pariatur nam.",-1),t("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque, cum nulla. Ut eligendi tenetur aliquam cum mollitia repellat voluptas, fugiat doloremque sunt commodi enim excepturi distinctio id sapiente incidunt ipsam asperiores cupiditate, labore libero! Ad facere magni cumque perspiciatis, adipisci possimus pariatur quo nobis minus, est enim similique quaerat vel asperiores ipsam harum et, totam fugit.",-1),t("p",null,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Suscipit aspernatur maxime consectetur, consequatur excepturi facilis praesentium rem placeat sapiente, maiores doloribus modi voluptate. Unde autem dolor officiis numquam incidunt quasi aspernatur nam dolores ratione quidem recusandae, nulla qui provident molestias odit nemo praesentium quas voluptatem aliquid perferendis, iste veritatis vitae. Dolor, eligendi quidem distinctio asperiores doloremque culpa corporis quibusdam earum ex laudantium iure officia ullam nostrum maxime voluptatum laboriosam impedit labore illum. Culpa, veniam dolor odio ad eius nisi, aspernatur quia veritatis blanditiis repellat id minima deserunt beatae?",-1)])),_:1})]),_:1})])]),_:1})],64)}const Nn=wt(jn,[["render",Mn]]),Bn=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"})),zn={class:"q-ma-md"},Fn={key:0},Ln={__name:"Autocomplete1",setup(d){const n=q(null),u=q([]);let o=null;const s=(i,b)=>{if(i.length<2){b(()=>{u.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Qe.get(`/web-api/customers?q=${i}`).then(f=>{const m=f.data.data.map(c=>({label:`${c.code} - ${c.name}`,value:c.id,data:c}));b(()=>{u.value=m})}).catch(f=>{console.error("Gagal mengambil data pelanggan:",f),b(()=>{u.value=[]})})})};return(i,b)=>{const f=Q("guest-layout");return p(),P(f,null,{default:l(()=>[t("div",zn,[e(de,{class:"full-width",modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=m=>n.value=m),"use-input":"",label:"Cari Pelanggan",options:u.value,onFilter:s,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),n.value?(p(),h("div",Fn," Saldo: Rp. "+r(a(L)(n.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},Hn=Object.freeze(Object.defineProperty({__proto__:null,default:Ln},Symbol.toStringTag,{value:"Module"})),Kn={style:{"margin-left":"-10px"}},da={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(d,{emit:n}){const u=d,o=n;return(s,i)=>(p(),h("div",Kn,[e(la,{class:"full-width q-pl-none","model-value":u.modelValue,disable:u.disable,label:u.label,"onUpdate:modelValue":i[0]||(i[0]=b=>o("update:modelValue",b))},null,8,["model-value","disable","label"])]))}};function _a(d){return d instanceof File||d instanceof Blob||d instanceof FileList&&d.length>0||d instanceof FormData&&Array.from(d.values()).some(n=>_a(n))||typeof d=="object"&&d!==null&&Object.values(d).some(n=>_a(n))}function jl(d,n=null){const u=Le(d,n);let o=b=>b,s=null;const i={transform:b=>f=>(o=f,b),submit:b=>(f,m,c={})=>{u.wasSuccessful=!1,u.recentlySuccessful=!1,u.clearErrors(),clearTimeout(s),c.onBefore&&c.onBefore(),u.processing=!0,c.onStart&&c.onStart();const v=o(u.data());axios[f](m,v,{headers:{"Content-Type":_a(v)?"multipart/form-data":"application/json"},onUploadProgress:_=>{u.progress=_,c.onProgress&&c.onProgress(_)}}).then(_=>{u.processing=!1,u.progress=null,u.clearErrors(),u.wasSuccessful=!0,u.recentlySuccessful=!0,s=setTimeout(()=>u.recentlySuccessful=!1,2e3),c.onSuccess&&c.onSuccess(_.data),u.defaults(Ro(u.data())),u.isDirty=!1}).catch(_=>{var g;u.processing=!1,u.progress=null,u.clearErrors(),((g=_.response)==null?void 0:g.status)===422&&Object.keys(_.response.data.errors).forEach(S=>{u.setError(S,_.response.data.errors[S][0])}),c.onError&&c.onError(_)}).finally(()=>{u.processing=!1,u.progress=null,c.onFinish&&c.onFinish()})}};return new Proxy(u,{get:(b,f,m)=>Object.keys(i).indexOf(f)<0?b[f]:i[f](m)})}const Yn={class:"column"},Qn={class:"row"},Wn={class:"flex justify-center"},Jn={__name:"Login",setup(d){let n=jl({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const u=()=>Je({form:n,url:route("admin.auth.login"),onSuccess:()=>{n.processing=!0,window.location.href=route("admin.dashboard")}}),o=q(!1);return(s,i)=>{const b=Q("i-head"),f=Q("guest-layout");return p(),h(W,null,[e(b,{title:"Login"}),e(f,null,{default:l(()=>[e(Ve,{class:"row justify-center items-center"},{default:l(()=>[t("div",Yn,[t("div",Qn,[e(ze,{class:"q-gutter-md",onSubmit:J(u,["prevent"])},{default:l(()=>[e(pe,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:l(()=>[e(te,{class:"text-center"},{default:l(()=>[t("div",Wn,[e(Ft,{size:"80px"},{default:l(()=>[e(V,{name:"badge",color:"primary"})]),_:1})]),i[4]||(i[4]=t("h6",{class:"q-my-sm text-primary"},"Login Staff",-1))]),_:1}),e(te,null,{default:l(()=>[e(oe,{modelValue:a(n).username,"onUpdate:modelValue":i[0]||(i[0]=m=>a(n).username=m),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!a(n).errors.username,autocomplete:"username","error-message":a(n).errors.username,disable:a(n).processing,rules:[m=>m&&m.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:l(()=>[e(V,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(oe,{modelValue:a(n).password,"onUpdate:modelValue":i[2]||(i[2]=m=>a(n).password=m),type:o.value?"text":"password",label:"Kata Sandi",error:!!a(n).errors.password,autocomplete:"current-password","error-message":a(n).errors.password,"lazy-rules":"",disable:a(n).processing,rules:[m=>m&&m.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:l(()=>[e(D,{dense:"",flat:"",round:"",onClick:i[1]||(i[1]=m=>o.value=!o.value)},{default:l(()=>[e(V,{name:o.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(da,{class:"q-mt-sm",modelValue:a(n).remember,"onUpdate:modelValue":i[3]||(i[3]=m=>a(n).remember=m),disable:a(n).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(mt,null,{default:l(()=>[e(D,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:a(n).processing,loading:a(n).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Gn=Object.freeze(Object.defineProperty({__proto__:null,default:Jn},Symbol.toStringTag,{value:"Module"})),Xn={class:"q-gutter-sm"},Zn={class:"col col-md-6 q-pa-xs"},es={class:"detail q-mt-md"},ts={key:0},as={class:"text-bold"},ja="Tutup Sesi Kasir",ls={__name:"Close",setup(d){const n=fe(),u=Le({closing_notes:n.props.data.closing_notes,closing_balance:parseFloat(n.props.data.closing_balance)}),o=()=>Je({form:u,url:route("admin.cashier-session.close",{id:n.props.data.id})});return(s,i)=>{const b=Q("i-head"),f=Q("authenticated-layout");return p(),h(W,null,[e(b,{title:ja}),e(f,null,{title:l(()=>[y(r(ja))]),"left-button":l(()=>[t("div",Xn,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=m=>s.$inertia.get(s.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Zn,[e(ze,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":i[1]||(i[1]=m=>a(u).id=m)},null,512),[[dt,a(u).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[t("table",es,[t("tbody",null,[t("tr",null,[i[4]||(i[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),i[5]||(i[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.id),1)]),t("tr",null,[i[6]||(i[6]=t("td",null,"Terminal",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.cashier_terminal.name),1)]),t("tr",null,[i[8]||(i[8]=t("td",null,"Kasir",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.user.username)+" - "+r(a(n).props.data.user.name),1)]),t("tr",null,[i[10]||(i[10]=t("td",null,"Saldo Awal",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.opening_balance)),1)]),a(n).props.data.opening_notes?(p(),h("tr",ts,[i[12]||(i[12]=t("td",null,"Catatan Buka",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.opening_notes),1)])):k("",!0),t("tr",null,[i[14]||(i[14]=t("td",null,"Total Penjualan",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_sales)),1)]),t("tr",null,[i[16]||(i[16]=t("td",null,"Total Pemasukan",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_income)),1)]),t("tr",null,[i[18]||(i[18]=t("td",null,"Total Pengeluaran",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_expense)),1)]),t("tr",null,[i[21]||(i[21]=t("td",null,"Saldo Akhir",-1)),i[22]||(i[22]=t("td",null,":",-1)),t("td",null,[t("div",as,r(a(it)(a(n).props.data.closing_balance)),1),i[20]||(i[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(oe,{modelValue:a(u).closing_notes,"onUpdate:modelValue":i[2]||(i[2]=m=>a(u).closing_notes=m),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(u).processing,error:!!a(u).errors.closing_notes,"error-message":a(u).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:a(u).processing},null,8,["disable"]),e(D,{label:"Batal",icon:"cancel",disable:a(u).processing,onClick:i[3]||(i[3]=m=>a(X).get(s.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},os=Object.freeze(Object.defineProperty({__proto__:null,default:ls},Symbol.toStringTag,{value:"Module"}));let ns=0;const ss=["click","keydown"],rs={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${ns++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function is(d,n,u,o){const s=Do(Vl,pa);if(s===pa)return console.error("QTab/QRouteTab component needs to be child of QTabs"),pa;const{proxy:i}=Tt(),b=q(null),f=q(null),m=q(null),c=G(()=>d.disable===!0||d.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},d.ripple===!0?{}:d.ripple)),v=G(()=>s.currentModel.value===d.name),_=G(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(v.value===!0?" q-tab--active"+(s.tabProps.value.activeClass?" "+s.tabProps.value.activeClass:"")+(s.tabProps.value.activeColor?` text-${s.tabProps.value.activeColor}`:"")+(s.tabProps.value.activeBgColor?` bg-${s.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(d.icon&&d.label&&s.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(d.noCaps===!0||s.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(d.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),g=G(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(s.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(d.contentClass!==void 0?` ${d.contentClass}`:"")),S=G(()=>d.disable===!0||s.hasFocus.value===!0||v.value===!1&&s.hasActiveTab.value===!0?-1:d.tabindex||0);function O(U,F){if(F!==!0&&b.value!==null&&b.value.focus(),d.disable!==!0){s.updateModel({name:d.name}),u("click",U);return}}function w(U){Uo(U,[13,32])?O(U,!0):Ao(U)!==!0&&U.keyCode>=35&&U.keyCode<=40&&U.altKey!==!0&&U.metaKey!==!0&&s.onKbdNavigate(U.keyCode,i.$el)===!0&&It(U),u("keydown",U)}function I(){const U=s.tabProps.value.narrowIndicator,F=[],T=_e("div",{ref:m,class:["q-tab__indicator",s.tabProps.value.indicatorClass]});d.icon!==void 0&&F.push(_e(V,{class:"q-tab__icon",name:d.icon})),d.label!==void 0&&F.push(_e("div",{class:"q-tab__label"},d.label)),d.alert!==!1&&F.push(d.alertIcon!==void 0?_e(V,{class:"q-tab__alert-icon",color:d.alert!==!0?d.alert:void 0,name:d.alertIcon}):_e("div",{class:"q-tab__alert"+(d.alert!==!0?` text-${d.alert}`:"")})),U===!0&&F.push(T);const R=[_e("div",{class:"q-focus-helper",tabindex:-1,ref:b}),_e("div",{class:g.value},ql(n.default,F))];return U===!1&&R.push(T),R}const C={name:G(()=>d.name),rootRef:f,tabIndicatorRef:m,routeData:o};oa(()=>{s.unregisterTab(C)}),he(()=>{s.registerTab(C)});function x(U,F){const T={ref:f,class:_.value,tabindex:S.value,role:"tab","aria-selected":v.value===!0?"true":"false","aria-disabled":d.disable===!0?"true":void 0,onClick:O,onKeydown:w,...F};return ee(_e(U,T,I()),[[ne,c.value]])}return{renderTab:x,$tabs:s}}const nt=$t({name:"QTab",props:rs,emits:ss,setup(d,{slots:n,emit:u}){const{renderTab:o}=is(d,n,u);return()=>o("div")}});function ds(d,n,u){const o=u===!0?["left","right"]:["top","bottom"];return`absolute-${n===!0?o[0]:o[1]}${d?` text-${d}`:""}`}const us=["left","center","right","justify"],At=$t({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:d=>us.includes(d)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(d,{slots:n,emit:u}){const{proxy:o}=Tt(),{$q:s}=o,{registerTick:i}=fa(),{registerTick:b}=fa(),{registerTick:f}=fa(),{registerTimeout:m,removeTimeout:c}=ya(),{registerTimeout:v,removeTimeout:_}=ya(),g=q(null),S=q(null),O=q(d.modelValue),w=q(!1),I=q(!0),C=q(!1),x=q(!1),U=[],F=q(0),T=q(!1);let R=null,B=null,M;const E=G(()=>({activeClass:d.activeClass,activeColor:d.activeColor,activeBgColor:d.activeBgColor,indicatorClass:ds(d.indicatorColor,d.switchIndicator,d.vertical),narrowIndicator:d.narrowIndicator,inlineLabel:d.inlineLabel,noCaps:d.noCaps})),$=G(()=>{const ie=F.value,be=O.value;for(let Se=0;Se<ie;Se++)if(U[Se].name.value===be)return!0;return!1}),K=G(()=>`q-tabs__content--align-${w.value===!0?"left":x.value===!0?"justify":d.align}`),se=G(()=>`q-tabs row no-wrap items-center q-tabs--${w.value===!0?"":"not-"}scrollable q-tabs--${d.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${d.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${d.mobileArrows===!0?"":"out"}-arrows`+(d.dense===!0?" q-tabs--dense":"")+(d.shrink===!0?" col-shrink":"")+(d.stretch===!0?" self-stretch":"")),j=G(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+K.value+(d.contentClass!==void 0?` ${d.contentClass}`:"")),A=G(()=>d.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),Z=G(()=>d.vertical!==!0&&s.lang.rtl===!0),we=G(()=>jo===!1&&Z.value===!0);Ae(Z,gt),Ae(()=>d.modelValue,ie=>{le({name:ie,setCurrent:!0,skipEmit:!0})}),Ae(()=>d.outsideArrows,qe);function le({name:ie,setCurrent:be,skipEmit:Se}){O.value!==ie&&(Se!==!0&&d["onUpdate:modelValue"]!==void 0&&u("update:modelValue",ie),(be===!0||d["onUpdate:modelValue"]===void 0)&&(ft(O.value,ie),O.value=ie))}function qe(){i(()=>{Ne({width:g.value.offsetWidth,height:g.value.offsetHeight})})}function Ne(ie){if(A.value===void 0||S.value===null)return;const be=ie[A.value.container],Se=Math.min(S.value[A.value.scroll],Array.prototype.reduce.call(S.value.children,(Ye,Ie)=>Ye+(Ie[A.value.content]||0),0)),Ke=be>0&&Se>be;w.value=Ke,Ke===!0&&b(gt),x.value=be<parseInt(d.breakpoint,10)}function ft(ie,be){const Se=ie!=null&&ie!==""?U.find(Ye=>Ye.name.value===ie):null,Ke=be!=null&&be!==""?U.find(Ye=>Ye.name.value===be):null;if(Jt===!0)Jt=!1;else if(Se&&Ke){const Ye=Se.tabIndicatorRef.value,Ie=Ke.tabIndicatorRef.value;R!==null&&(clearTimeout(R),R=null),Ye.style.transition="none",Ye.style.transform="none",Ie.style.transition="none",Ie.style.transform="none";const Te=Ye.getBoundingClientRect(),rt=Ie.getBoundingClientRect();Ie.style.transform=d.vertical===!0?`translate3d(0,${Te.top-rt.top}px,0) scale3d(1,${rt.height?Te.height/rt.height:1},1)`:`translate3d(${Te.left-rt.left}px,0,0) scale3d(${rt.width?Te.width/rt.width:1},1,1)`,f(()=>{R=setTimeout(()=>{R=null,Ie.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Ie.style.transform="none"},70)})}Ke&&w.value===!0&&pt(Ke.rootRef.value)}function pt(ie){const{left:be,width:Se,top:Ke,height:Ye}=S.value.getBoundingClientRect(),Ie=ie.getBoundingClientRect();let Te=d.vertical===!0?Ie.top-Ke:Ie.left-be;if(Te<0){S.value[d.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Te),gt();return}Te+=d.vertical===!0?Ie.height-Ye:Ie.width-Se,Te>0&&(S.value[d.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Te),gt())}function gt(){const ie=S.value;if(ie===null)return;const be=ie.getBoundingClientRect(),Se=d.vertical===!0?ie.scrollTop:Math.abs(ie.scrollLeft);Z.value===!0?(I.value=Math.ceil(Se+be.width)<ie.scrollWidth-1,C.value=Se>0):(I.value=Se>0,C.value=d.vertical===!0?Math.ceil(Se+be.height)<ie.scrollHeight:Math.ceil(Se+be.width)<ie.scrollWidth)}function ge(ie){B!==null&&clearInterval(B),B=setInterval(()=>{Fe(ie)===!0&&me()},5)}function z(){ge(we.value===!0?Number.MAX_SAFE_INTEGER:0)}function H(){ge(we.value===!0?0:Number.MAX_SAFE_INTEGER)}function me(){B!==null&&(clearInterval(B),B=null)}function re(ie,be){const Se=Array.prototype.filter.call(S.value.children,rt=>rt===be||rt.matches&&rt.matches(".q-tab.q-focusable")===!0),Ke=Se.length;if(Ke===0)return;if(ie===36)return pt(Se[0]),Se[0].focus(),!0;if(ie===35)return pt(Se[Ke-1]),Se[Ke-1].focus(),!0;const Ye=ie===(d.vertical===!0?38:37),Ie=ie===(d.vertical===!0?40:39),Te=Ye===!0?-1:Ie===!0?1:void 0;if(Te!==void 0){const rt=Z.value===!0?-1:1,ht=Se.indexOf(be)+Te*rt;return ht>=0&&ht<Ke&&(pt(Se[ht]),Se[ht].focus({preventScroll:!0})),!0}}const ce=G(()=>we.value===!0?{get:ie=>Math.abs(ie.scrollLeft),set:(ie,be)=>{ie.scrollLeft=-be}}:d.vertical===!0?{get:ie=>ie.scrollTop,set:(ie,be)=>{ie.scrollTop=be}}:{get:ie=>ie.scrollLeft,set:(ie,be)=>{ie.scrollLeft=be}});function Fe(ie){const be=S.value,{get:Se,set:Ke}=ce.value;let Ye=!1,Ie=Se(be);const Te=ie<Ie?-1:1;return Ie+=Te*5,Ie<0?(Ye=!0,Ie=0):(Te===-1&&Ie<=ie||Te===1&&Ie>=ie)&&(Ye=!0,Ie=ie),Ke(be,Ie),gt(),Ye}function at(ie,be){for(const Se in ie)if(ie[Se]!==be[Se])return!1;return!0}function bt(){let ie=null,be={matchedLen:0,queryDiff:9999,hrefLen:0};const Se=U.filter(Te=>Te.routeData!==void 0&&Te.routeData.hasRouterLink.value===!0),{hash:Ke,query:Ye}=o.$route,Ie=Object.keys(Ye).length;for(const Te of Se){const rt=Te.routeData.exact.value===!0;if(Te.routeData[rt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:ht,query:ma,matched:Oo,href:Io}=Te.routeData.resolvedLink.value,ca=Object.keys(ma).length;if(rt===!0){if(ht!==Ke||ca!==Ie||at(Ye,ma)===!1)continue;ie=Te.name.value;break}if(ht!==""&&ht!==Ke||ca!==0&&at(ma,Ye)===!1)continue;const xt={matchedLen:Oo.length,queryDiff:Ie-ca,hrefLen:Io.length-ht.length};if(xt.matchedLen>be.matchedLen){ie=Te.name.value,be=xt;continue}else if(xt.matchedLen!==be.matchedLen)continue;if(xt.queryDiff<be.queryDiff)ie=Te.name.value,be=xt;else if(xt.queryDiff!==be.queryDiff)continue;xt.hrefLen>be.hrefLen&&(ie=Te.name.value,be=xt)}if(ie===null&&U.some(Te=>Te.routeData===void 0&&Te.name.value===O.value)===!0){Jt=!1;return}le({name:ie,setCurrent:!0})}function ua(ie){if(c(),T.value!==!0&&g.value!==null&&ie.target&&typeof ie.target.closest=="function"){const be=ie.target.closest(".q-tab");be&&g.value.contains(be)===!0&&(T.value=!0,w.value===!0&&pt(be))}}function Co(){m(()=>{T.value=!1},30)}function zt(){qa.avoidRouteWatcher===!1?v(bt):_()}function Va(){if(M===void 0){const ie=Ae(()=>o.$route.fullPath,zt);M=()=>{ie(),M=void 0}}}function To(ie){U.push(ie),F.value++,qe(),ie.routeData===void 0||o.$route===void 0?v(()=>{if(w.value===!0){const be=O.value,Se=be!=null&&be!==""?U.find(Ke=>Ke.name.value===be):null;Se&&pt(Se.rootRef.value)}}):(Va(),ie.routeData.hasRouterLink.value===!0&&zt())}function Po(ie){U.splice(U.indexOf(ie),1),F.value--,qe(),M!==void 0&&ie.routeData!==void 0&&(U.every(be=>be.routeData===void 0)===!0&&M(),zt())}const qa={currentModel:O,tabProps:E,hasFocus:T,hasActiveTab:$,registerTab:To,unregisterTab:Po,verifyRouteModel:zt,updateModel:le,onKbdNavigate:re,avoidRouteWatcher:!1};Bo(Vl,qa);function Ca(){R!==null&&clearTimeout(R),me(),M!==void 0&&M()}let Ta,Jt;return oa(Ca),Eo(()=>{Ta=M!==void 0,Ca()}),Mo(()=>{Ta===!0&&(Va(),Jt=!0,zt()),qe()}),()=>_e("div",{ref:g,class:se.value,role:"tablist",onFocusin:ua,onFocusout:Co},[_e(No,{onResize:Ne}),_e("div",{ref:S,class:j.value,onScroll:gt},Ct(n.default)),_e(V,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(I.value===!0?"":" q-tabs__arrow--faded"),name:d.leftIcon||s.iconSet.tabs[d.vertical===!0?"up":"left"],onMousedownPassive:z,onTouchstartPassive:z,onMouseupPassive:me,onMouseleavePassive:me,onTouchendPassive:me}),_e(V,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(C.value===!0?"":" q-tabs__arrow--faded"),name:d.rightIcon||s.iconSet.tabs[d.vertical===!0?"down":"right"],onMousedownPassive:H,onTouchstartPassive:H,onMouseupPassive:me,onMouseleavePassive:me,onTouchendPassive:me})])}});function ms(d){const n=[.06,6,50];return typeof d=="string"&&d.length&&d.split(":").forEach((u,o)=>{const s=parseFloat(u);s&&(n[o]=s)}),n}const cs=zo({name:"touch-swipe",beforeMount(d,{value:n,arg:u,modifiers:o}){if(o.mouse!==!0&&Mt.has.touch!==!0)return;const s=o.mouseCapture===!0?"Capture":"",i={handler:n,sensitivity:ms(u),direction:Pa(o),noop:Fo,mouseStart(b){Ia(b,i)&&Ho(b)&&(Gt(i,"temp",[[document,"mousemove","move",`notPassive${s}`],[document,"mouseup","end","notPassiveCapture"]]),i.start(b,!0))},touchStart(b){if(Ia(b,i)){const f=b.target;Gt(i,"temp",[[f,"touchmove","move","notPassiveCapture"],[f,"touchcancel","end","notPassiveCapture"],[f,"touchend","end","notPassiveCapture"]]),i.start(b)}},start(b,f){Mt.is.firefox===!0&&ba(d,!0);const m=Oa(b);i.event={x:m.left,y:m.top,time:Date.now(),mouse:f===!0,dir:!1}},move(b){if(i.event===void 0)return;if(i.event.dir!==!1){It(b);return}const f=Date.now()-i.event.time;if(f===0)return;const m=Oa(b),c=m.left-i.event.x,v=Math.abs(c),_=m.top-i.event.y,g=Math.abs(_);if(i.event.mouse!==!0){if(v<i.sensitivity[1]&&g<i.sensitivity[1]){i.end(b);return}}else if(window.getSelection().toString()!==""){i.end(b);return}else if(v<i.sensitivity[2]&&g<i.sensitivity[2])return;const S=v/f,O=g/f;i.direction.vertical===!0&&v<g&&v<100&&O>i.sensitivity[0]&&(i.event.dir=_<0?"up":"down"),i.direction.horizontal===!0&&v>g&&g<100&&S>i.sensitivity[0]&&(i.event.dir=c<0?"left":"right"),i.direction.up===!0&&v<g&&_<0&&v<100&&O>i.sensitivity[0]&&(i.event.dir="up"),i.direction.down===!0&&v<g&&_>0&&v<100&&O>i.sensitivity[0]&&(i.event.dir="down"),i.direction.left===!0&&v>g&&c<0&&g<100&&S>i.sensitivity[0]&&(i.event.dir="left"),i.direction.right===!0&&v>g&&c>0&&g<100&&S>i.sensitivity[0]&&(i.event.dir="right"),i.event.dir!==!1?(It(b),i.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Lo(),i.styleCleanup=w=>{i.styleCleanup=void 0,document.body.classList.remove("non-selectable");const I=()=>{document.body.classList.remove("no-pointer-events--children")};w===!0?setTimeout(I,50):I()}),i.handler({evt:b,touch:i.event.mouse!==!0,mouse:i.event.mouse,direction:i.event.dir,duration:f,distance:{x:v,y:g}})):i.end(b)},end(b){i.event!==void 0&&(ga(i,"temp"),Mt.is.firefox===!0&&ba(d,!1),i.styleCleanup!==void 0&&i.styleCleanup(!0),b!==void 0&&i.event.dir!==!1&&It(b),i.event=void 0)}};if(d.__qtouchswipe=i,o.mouse===!0){const b=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";Gt(i,"main",[[d,"mousedown","mouseStart",`passive${b}`]])}Mt.has.touch===!0&&Gt(i,"main",[[d,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[d,"touchmove","noop","notPassiveCapture"]])},updated(d,n){const u=d.__qtouchswipe;u!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&u.end(),u.handler=n.value),u.direction=Pa(n.modifiers))},beforeUnmount(d){const n=d.__qtouchswipe;n!==void 0&&(ga(n,"main"),ga(n,"temp"),Mt.is.firefox===!0&&ba(d,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete d.__qtouchswipe)}}),ps={name:{required:!0},disable:Boolean},Ea={setup(d,{slots:n}){return()=>_e("div",{class:"q-panel scroll",role:"tabpanel"},Ct(n.default))}},fs={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},gs=["update:modelValue","beforeTransition","transition"];function bs(){const{props:d,emit:n,proxy:u}=Tt(),{getCache:o}=Yo(),{registerTimeout:s}=ya();let i,b;const f=q(null),m=q(null);function c(A){const Z=d.vertical===!0?"up":"left";M((u.$q.lang.rtl===!0?-1:1)*(A.direction===Z?1:-1))}const v=G(()=>[[cs,c,void 0,{horizontal:d.vertical!==!0,vertical:d.vertical,mouse:!0}]]),_=G(()=>d.transitionPrev||`slide-${d.vertical===!0?"down":"right"}`),g=G(()=>d.transitionNext||`slide-${d.vertical===!0?"up":"left"}`),S=G(()=>`--q-transition-duration: ${d.transitionDuration}ms`),O=G(()=>typeof d.modelValue=="string"||typeof d.modelValue=="number"?d.modelValue:String(d.modelValue)),w=G(()=>({include:d.keepAliveInclude,exclude:d.keepAliveExclude,max:d.keepAliveMax})),I=G(()=>d.keepAliveInclude!==void 0||d.keepAliveExclude!==void 0);Ae(()=>d.modelValue,(A,Z)=>{const we=F(A)===!0?T(A):-1;b!==!0&&B(we===-1?0:we<T(Z)?-1:1),f.value!==we&&(f.value=we,n("beforeTransition",A,Z),s(()=>{n("transition",A,Z)},d.transitionDuration))});function C(){M(1)}function x(){M(-1)}function U(A){n("update:modelValue",A)}function F(A){return A!=null&&A!==""}function T(A){return i.findIndex(Z=>Z.props.name===A&&Z.props.disable!==""&&Z.props.disable!==!0)}function R(){return i.filter(A=>A.props.disable!==""&&A.props.disable!==!0)}function B(A){const Z=A!==0&&d.animated===!0&&f.value!==-1?"q-transition--"+(A===-1?_.value:g.value):null;m.value!==Z&&(m.value=Z)}function M(A,Z=f.value){let we=Z+A;for(;we!==-1&&we<i.length;){const le=i[we];if(le!==void 0&&le.props.disable!==""&&le.props.disable!==!0){B(A),b=!0,n("update:modelValue",le.props.name),setTimeout(()=>{b=!1});return}we+=A}d.infinite===!0&&i.length!==0&&Z!==-1&&Z!==i.length&&M(A,A===-1?i.length:-1)}function E(){const A=T(d.modelValue);return f.value!==A&&(f.value=A),!0}function $(){const A=F(d.modelValue)===!0&&E()&&i[f.value];return d.keepAlive===!0?[_e(Qo,w.value,[_e(I.value===!0?o(O.value,()=>({...Ea,name:O.value})):Ea,{key:O.value,style:S.value},()=>A)])]:[_e("div",{class:"q-panel scroll",style:S.value,key:O.value,role:"tabpanel"},[A])]}function K(){if(i.length!==0)return d.animated===!0?[_e(Cl,{name:m.value},$)]:$()}function se(A){return i=Ko(Ct(A.default,[])).filter(Z=>Z.props!==null&&Z.props.slot===void 0&&F(Z.props.name)===!0),i.length}function j(){return i}return Object.assign(u,{next:C,previous:x,goTo:U}),{panelIndex:f,panelDirectives:v,updatePanelsList:se,updatePanelIndex:E,getPanelContent:K,getEnabledPanels:R,getPanels:j,isValidPanelName:F,keepAliveProps:w,needsUniqueKeepAliveWrapper:I,goToPanelByOffset:M,goToPanel:U,nextPanel:C,previousPanel:x}}const st=$t({name:"QTabPanel",props:ps,setup(d,{slots:n}){return()=>_e("div",{class:"q-tab-panel",role:"tabpanel"},Ct(n.default))}}),jt=$t({name:"QTabPanels",props:{...fs,...ka},emits:gs,setup(d,{slots:n}){const u=Tt(),o=wa(d,u.proxy.$q),{updatePanelsList:s,getPanelContent:i,panelDirectives:b}=bs(),f=G(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(s(n),Wo("div",{class:f.value},i(),"pan",d.swipeable,()=>b.value))}}),vs={class:"detail"},ys={key:0},_s={key:1},ks={key:0},ws={key:0},hs={colspan:"100%"},$s={class:"q-my-md"},xs={key:4},Ss={colspan:"100%"},Vs={key:5},qs={colspan:"100%"},El={__name:"MainInfoTab",setup(d){const n=fe();return(u,o)=>(p(),h("table",vs,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.user.username)+" - "+r(a(n).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.opening_balance)),1)]),a(n).props.data.opening_notes?(p(),h("tr",ys,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_expense)),1)]),a(n).props.data.is_closed?k("",!0):(p(),h("tr",_s,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.opening_balance+(a(n).props.data.total_income-a(n).props.data.total_expense))),1)])),a(n).props.data.is_closed?(p(),h(W,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.closing_balance)),1)]),a(n).props.data.closing_notes?(p(),h("tr",ks,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),u.$can("admin.cashier-session.close")?(p(),h(W,{key:3},[a(n).props.data.is_closed?k("",!0):(p(),h("tr",ws,[t("td",hs,[t("div",$s,[e(D,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=s=>u.$inertia.get(u.route("admin.cashier-session.close",{id:a(n).props.data.id})))},{default:l(()=>o[26]||(o[26]=[y(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(n).props.data.created_at?(p(),h("tr",xs,[t("td",Ss," Dibuat "+r(a(Vt)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name)+" ("+r(a(ve)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(p(),h("tr",Vs,[t("td",qs," Diperbarui "+r(a(Vt)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name)+" ("+r(a(ve)(a(n).props.data.updated_at))+") ",1)])):k("",!0)])]))}},Cs=Object.freeze(Object.defineProperty({__proto__:null,default:El},Symbol.toStringTag,{value:"Module"})),Ts={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ps={class:"text-bold"},Os={key:0},Is={class:"text-bold"},Rs={key:1},Ds={key:0},Us={key:0},As={key:1},Ml={__name:"SalesOrderTab",props:{data:Object},setup(d){const n=d,u=q([]),o=q(!0),s=Oe({...De(),cashier_session_id:n.data.id,status:["closed","canceled"]}),i=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{f()});const f=(v=null)=>Ue({pagination:i,filter:s,props:v,rows:u,url:route("admin.sales-order.data"),loading:o}),m=xe(),c=G(()=>m.screen.gt.sm?b:b.filter(v=>v.name==="id"));return(v,_)=>(p(),P(Pe,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:i.value,"onUpdate:pagination":_[0]||(_[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:c.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:S,filter:O})=>[t("div",Ts,[t("span",null,r(S)+" "+r(O?" with term "+O:""),1)])]),body:l(g=>[e(Ce,{props:g,class:"cursor-pointer",onClick:J(S=>a(X).get(v.route("admin.sales-order.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(Y,{key:"id",props:g},{default:l(()=>[t("div",Ps,[e(V,{class:"inline-icon",name:"tag"}),y(" "+r(g.row.formatted_id),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),y(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),h(W,{key:0},[g.row.customer?(p(),h("div",Os,[e(V,{class:"inline-icon",name:"person"}),y(" "+r(g.row.customer_code)+" "+r(g.row.customer.name),1)])):k("",!0),t("div",Is,[e(V,{name:"money",class:"inline-icon"}),y(" Rp. "+r(a(L)(g.row.grand_total)),1)]),g.row.notes?(p(),h("div",Rs,[e(ke,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(ut,{color:g.row.status==="closed"?"green":"red"},{default:l(()=>[y(r(v.$CONSTANTS.SALES_ORDER_STATUSES[g.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"customer",props:g},{default:l(()=>[g.row.customer?(p(),h("div",Ds,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),y(" "+r(g.row.customer_code)+" - "+r(g.row.customer_name),1)]),g.row.customer_phone?(p(),h("div",Us,[e(V,{name:"phone",class:"inline-icon"}),y(" "+r(g.row.customer_phone),1)])):k("",!0),g.row.customer_address?(p(),h("div",As,[e(V,{name:"home_pin",class:"inline-icon"}),y(" "+r(g.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:g},{default:l(()=>[t("div",null,r(a(L)(g.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(ke,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},js=Object.freeze(Object.defineProperty({__proto__:null,default:Ml},Symbol.toStringTag,{value:"Module"})),Es={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ms={class:"text-bold"},Ns={class:"text-bold"},Bs={key:0},zs={class:"q-mt-sm"},Nl={__name:"FinanceTransactionTab",props:{data:Object},setup(d){const n=d;console.log(n.data);const u=q([]),o=q(!0),s=Oe({...De(),user_id:n.data.user_id,from_datetime:Zt(n.data.opened_at),to_datetime:n.data.closed_at?Zt(n.data.closed_at):null}),i=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{f()});const f=(v=null)=>Ue({pagination:i,filter:s,props:v,rows:u,url:route("admin.finance-transaction.data"),loading:o}),m=xe(),c=G(()=>m.screen.gt.sm?b:b.filter(v=>v.name==="id"));return(v,_)=>(p(),P(Pe,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:i.value,"onUpdate:pagination":_[0]||(_[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:c.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:S,filter:O})=>[t("div",Es,[t("span",null,r(S)+" "+r(O?" with term "+O:""),1)])]),body:l(g=>[e(Ce,{props:g},{default:l(()=>[e(Y,{key:"id",props:g},{default:l(()=>[t("div",Ms,[e(V,{class:"inline-icon",name:"tag"}),y(" "+r(g.row.formatted_id),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),y(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),h(W,{key:0},[t("div",Ns,[e(V,{name:"money",class:"inline-icon"}),y(" Rp. "+r(a(L)(g.row.amount)),1)]),g.row.notes?(p(),h("div",Bs,[e(ke,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",zs,[e(ut,{color:g.row.amount>=0?"green":"red"},{default:l(()=>[y(r(v.$CONSTANTS.FINANCE_TRANSACTION_TYPES[g.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"amount",props:g},{default:l(()=>[t("span",{class:$e(g.row.amount<0?"text-red":"text-green")},r(a(L)(g.row.amount)),3)]),_:2},1032,["props"]),e(Y,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(ke,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Fs=Object.freeze(Object.defineProperty({__proto__:null,default:Nl},Symbol.toStringTag,{value:"Module"})),Ls={class:"q-gutter-sm"},Hs={class:"col col-lg-6 q-pa-xs"},Ks={class:"row"},Ma="Rincian Sesi Kasir",Ys={__name:"Detail",setup(d){const n=fe(),u=G(()=>n.props.data),o=q("main");return Ae(()=>n.props.tab,s=>{s&&(o.value=s)},{immediate:!0}),(s,i)=>{const b=Q("i-head"),f=Q("authenticated-layout");return p(),h(W,null,[e(b,{title:Ma}),e(f,null,{title:l(()=>[y(r(Ma))]),"left-button":l(()=>[t("div",Ls,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=m=>s.$inertia.get(s.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Hs,[t("div",Ks,[e(pe,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:l(()=>[e(At,{modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=m=>o.value=m),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(nt,{name:"main",label:"Ringkasan"}),e(nt,{name:"sales",label:"Transaksi Penjualan"}),e(nt,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Xe),e(jt,{modelValue:o.value,"onUpdate:modelValue":i[2]||(i[2]=m=>o.value=m),animated:"",class:"q-pa-none"},{default:l(()=>[e(st,{name:"main"},{default:l(()=>[e(El,{data:u.value},null,8,["data"])]),_:1}),e(st,{name:"sales",class:"q-pa-xs"},{default:l(()=>[e(Ml,{data:u.value},null,8,["data"])]),_:1}),e(st,{name:"finance",class:"q-pa-xs"},{default:l(()=>[e(Nl,{data:u.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Qs=Object.freeze(Object.defineProperty({__proto__:null,default:Ys},Symbol.toStringTag,{value:"Module"})),Ws={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Js={class:"q-pa-xs"},Gs={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Xs={class:"flex justify-end"},Na="Sesi Kasir",Zs={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=Oe({search:"",status:"all",...De()}),c=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];he(()=>{S()});const g=C=>lt({message:`Hapus Sesi: ${C.cashier_terminal.name} - ${C.user.username}?`,url:route("admin.cashier-session.delete",C.id),fetchItemsCallback:S,loading:s}),S=(C=null)=>{Ue({pagination:c,filter:m,props:C,rows:o,url:route("admin.cashier-session.data"),loading:s,tableRef:i})},O=()=>S(),w=C=>X.get(route("admin.cashier-session.detail",{id:C.id})),I=G(()=>n.screen.gt.sm?v:v.filter(C=>C.name==="id"||C.name==="action"));return(C,x)=>{const U=Q("i-head"),F=Q("authenticated-layout");return p(),h(W,null,[e(U,{title:Na}),e(F,null,He({title:l(()=>[y(r(Na))]),"right-button":l(()=>[e(D,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=T=>u.value=!u.value)},null,8,["icon"]),C.$can("admin.cashier-session.open")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=T=>a(X).get(C.route("admin.cashier-session.open")))})):k("",!0)]),default:l(()=>[t("div",Js,[e(Pe,{class:"full-height-table",style:Me({height:a(f)}),ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":x[5]||(x[5]=T=>c.value=T),filter:m.search,loading:s.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:T,message:R,filter:B})=>[t("div",Gs,[t("span",null,r(R)+" "+r(B?" with term "+B:""),1)])]),body:l(T=>[e(Ce,{props:T,class:$e(["cursor-pointer",T.row.is_closed?"":"bg-yellow-3"]),onClick:R=>w(T.row)},{default:l(()=>[e(Y,{key:"id",props:T,class:"wrap-column"},{default:l(()=>[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),y(" SessionID: "+r(T.row.id),1)]),t("div",null,[e(V,{class:"inline-icon",name:"point_of_sale"}),y(" "+r(T.row.cashier_terminal.name),1)]),t("div",null,[e(V,{class:"inline-icon",name:"person"}),y(" "+r(T.row.user.username)+" - "+r(T.row.user.name),1)])]),_:2},1032,["props"]),e(Y,{key:"opening_info",props:T},{default:l(()=>[t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),y(" "+r(T.row.opened_at?a(ve)(T.row.opened_at):"-"),1)]),t("div",null,[e(V,{class:"inline-icon",name:"money"}),y(" "+r(a(it)(T.row.opening_balance)),1)]),T.row.opening_notes?(p(),P(ke,{key:0,text:T.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"closing_info",props:T},{default:l(()=>[t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),y(" "+r(T.row.closed_at?a(ve)(T.row.closed_at):"-"),1)]),t("div",null,[e(V,{class:"inline-icon",name:"money"}),y(" "+r(a(it)(T.row.closing_balance)),1)]),T.row.closing_notes?(p(),P(ke,{key:0,text:T.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"action",props:T},{default:l(()=>[t("div",Xs,[C.$can("admin.cashier-session.close")||C.$can("admin.cashier-session.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[4]||(x[4]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.cashier-session.close")?ee((p(),P(ae,{key:0,disable:T.row.is_closed,clickable:"",onClick:J(R=>a(X).get(C.route("admin.cashier-session.close",T.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"logout"})]),_:1}),e(N,null,{default:l(()=>x[6]||(x[6]=[y("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[ne],[ue]]):k("",!0),C.$can("admin.cashier-session.delete")?ee((p(),P(ae,{key:1,onClick:J(R=>g(T.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>x[7]||(x[7]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Ws,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[x[2]||(x[2]=T=>m.status=T),O],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":x[3]||(x[3]=T=>m.search=T),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},er=Object.freeze(Object.defineProperty({__proto__:null,default:Zs},Symbol.toStringTag,{value:"Module"})),tr={class:"q-gutter-sm"},ar={class:"col col-md-6 q-pa-xs"},Ba="Buka Sesi Kasir",lr={__name:"Open",setup(d){const n=fe(),u=Le({cashier_terminal_id:n.props.data.cashier_terminal_id,opening_balance:parseFloat(n.props.data.opening_balance),opening_notes:n.props.data.opening_notes}),o=[...n.props.cashier_terminals.map(i=>({value:i.id,label:i.name,balance:parseFloat(i.finance_account.balance)}))],s=()=>Je({form:u,url:route("admin.cashier-session.open")});return Ae(()=>u.cashier_terminal_id,i=>{if(i){const b=o.find(f=>f.value===i);b&&(u.opening_balance=b.balance)}else u.opening_balance=0}),(i,b)=>{const f=Q("i-head"),m=Q("authenticated-layout");return p(),h(W,null,[e(f,{title:Ba}),e(m,null,{title:l(()=>[y(r(Ba))]),"left-button":l(()=>[t("div",tr,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=c=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ar,[e(ze,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=c=>a(u).id=c)},null,512),[[dt,a(u).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[e(de,{class:"custom-select",modelValue:a(u).cashier_terminal_id,"onUpdate:modelValue":b[2]||(b[2]=c=>a(u).cashier_terminal_id=c),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:a(u).errors.cashier_terminal_id,error:!!a(u).errors.cashier_terminal_id,disable:a(u).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Re,{modelValue:a(u).opening_balance,"onUpdate:modelValue":b[3]||(b[3]=c=>a(u).opening_balance=c),label:"Saldo Buka Sesi",lazyRules:"",disable:a(u).processing,error:!!a(u).errors.opening_balance,errorMessage:a(u).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),b[6]||(b[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(oe,{modelValue:a(u).opening_notes,"onUpdate:modelValue":b[4]||(b[4]=c=>a(u).opening_notes=c),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(u).processing,error:!!a(u).errors.opening_notes,"error-message":a(u).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:a(u).processing},null,8,["disable"]),e(D,{label:"Batal",icon:"cancel",disable:a(u).processing,onClick:b[5]||(b[5]=c=>a(X).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},or=Object.freeze(Object.defineProperty({__proto__:null,default:lr},Symbol.toStringTag,{value:"Module"})),nr={class:"detail"},sr={colspan:"3"},rr={class:"text-bold text-grey-8"},ir={key:0},dr={colspan:"100%"},ur={key:1},mr={colspan:"100%"},Bl={__name:"MainInfoTab",setup(d){const n=fe();return(u,o)=>(p(),h("table",nr,[t("tbody",null,[t("tr",null,[t("td",sr,[t("div",rr,[o[1]||(o[1]=y(" Info Terminal Kasir ")),e(D,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=s=>u.$inertia.get(u.route("admin.cashier-terminal.edit",{id:a(n).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(n).props.data.created_at?(p(),h("tr",ir,[t("td",dr," Dibuat "+r(a(Vt)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name)+" ("+r(a(ve)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(p(),h("tr",ur,[t("td",mr," Diperbarui "+r(a(Vt)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name)+" ("+r(a(ve)(a(n).props.data.updated_at))+") ",1)])):k("",!0)])]))}},cr=Object.freeze(Object.defineProperty({__proto__:null,default:Bl},Symbol.toStringTag,{value:"Module"})),pr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},fr={class:"text-bold"},zl={__name:"SessionHistoryTab",setup(d){const n=fe(),u=q([]),o=q(!0),s=Oe({customer_id:n.props.data.id,...De()}),i=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{f()});const f=(v=null)=>Ue({pagination:i,filter:s,props:v,rows:u,url:route("admin.customer-wallet-transaction.data"),loading:o}),m=xe(),c=G(()=>m.screen.gt.sm?b:b.filter(v=>v.name==="id"));return(v,_)=>(p(),P(Pe,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:i.value,"onUpdate:pagination":_[0]||(_[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:c.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:S,filter:O})=>[t("div",pr,[t("span",null,r(S)+" "+r(O?" with term "+O:""),1)])]),body:l(g=>[e(Ce,{props:g,class:"cursor-pointer",onClick:J(S=>a(X).get(v.route("admin.customer-wallet-transaction.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(Y,{key:"id",props:g},{default:l(()=>[t("div",fr,[e(V,{class:"inline-icon",name:"tag"}),y(" "+r(g.row.formatted_id),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),y(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),h(W,{key:0},[t("div",{class:$e(["text-bold",g.row.amount<0?"text-red":"text-green"])},[e(V,{name:"money",class:"inline-icon"}),y(" "+r(a(Tl)(g.row.amount)),1)],2),t("div",null,[e(ke,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(ut,{size:"xs",color:g.row.amount>0?"green":"red"},{default:l(()=>[e(V,{name:"category"}),y(" "+r(g.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(ke,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:g},{default:l(()=>[t("div",{class:$e(g.row.amount<0?"text-red-10":g.row.amount>0?"text-green-10":"")},r(a(na)(g.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},gr=Object.freeze(Object.defineProperty({__proto__:null,default:zl},Symbol.toStringTag,{value:"Module"})),br={class:"q-gutter-sm"},vr={class:"col col-lg-6 q-pa-xs"},yr={class:"row"},za="Rincian Terminal Kasir",_r={__name:"Detail",setup(d){const n=q("main");return(u,o)=>{const s=Q("i-head"),i=Q("authenticated-layout");return p(),h(W,null,[e(s,{title:za}),e(i,null,{title:l(()=>[y(r(za))]),"left-button":l(()=>[t("div",br,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",vr,[t("div",yr,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(At,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=b=>n.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(nt,{name:"main",label:"Info Utama"}),e(nt,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(jt,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=b=>n.value=b),animated:""},{default:l(()=>[e(st,{name:"main"},{default:l(()=>[e(Bl)]),_:1}),e(st,{name:"session-history",class:"q-pa-xs"},{default:l(()=>[e(zl)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},kr=Object.freeze(Object.defineProperty({__proto__:null,default:_r},Symbol.toStringTag,{value:"Module"})),wr={class:"q-gutter-sm"},hr={class:"col col-md-6 q-pa-xs"},$r={key:0,class:"q-my-xs text-grey-8"},xr={__name:"Editor",setup(d){const n=fe(),u=(n.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Le({id:n.props.data.id,name:n.props.data.name,finance_account_id:n.props.data.finance_account_id??"new",location:n.props.data.location,active:!!n.props.data.active,notes:n.props.data.notes}),s=[{value:"new",label:"Buat Baru (Otomatis)"},...n.props.finance_accounts.map(b=>({value:b.id,label:b.name}))],i=()=>Je({form:o,url:route("admin.cashier-terminal.save")});return(b,f)=>{const m=Q("i-head"),c=Q("authenticated-layout");return p(),h(W,null,[e(m,{title:u}),e(c,null,{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",wr,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=v=>b.$inertia.get(b.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",hr,[e(ze,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=v=>a(o).id=v)},null,512),[[dt,a(o).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[e(oe,{modelValue:a(o).name,"onUpdate:modelValue":f[2]||(f[2]=v=>a(o).name=v),modelModifiers:{trim:!0},label:"Nama",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[v=>v&&v.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{class:"custom-select",modelValue:a(o).finance_account_id,"onUpdate:modelValue":f[3]||(f[3]=v=>a(o).finance_account_id=v),label:"Akun Kas",options:s,"map-options":"","emit-value":"",errorMessage:a(o).errors.finance_account_id,error:!!a(o).errors.finance_account_id,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),a(o).finance_account_id==="new"?(p(),h("div",$r,[f[8]||(f[8]=y(" Akun keuangan akan dibuat ")),a(o).name?(p(),h(W,{key:0},[y(" dengan nama Kas "+r(a(o).name),1)],64)):k("",!0)])):k("",!0),e(oe,{modelValue:a(o).location,"onUpdate:modelValue":f[4]||(f[4]=v=>a(o).location=v),modelModifiers:{trim:!0},label:"Lokasi",error:!!a(o).errors.location,disable:a(o).processing,"error-message":a(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).notes,"onUpdate:modelValue":f[5]||(f[5]=v=>a(o).notes=v),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(da,{modelValue:a(o).active,"onUpdate:modelValue":f[6]||(f[6]=v=>a(o).active=v),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(D,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:f[7]||(f[7]=v=>a(X).get(b.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Sr=Object.freeze(Object.defineProperty({__proto__:null,default:xr},Symbol.toStringTag,{value:"Module"})),Vr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},qr={class:"q-pa-xs"},Cr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Tr={class:"flex justify-end"},Fa="Terminal Kasir",Pr={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=Oe({search:"",status:"active",...De()}),c=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:n.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{S()});const g=C=>lt({message:`Hapus Terminal Kasir ${C.name}?`,url:route("admin.cashier-terminal.delete",C.id),fetchItemsCallback:S,loading:s}),S=(C=null)=>{Ue({pagination:c,filter:m,props:C,rows:o,url:route("admin.cashier-terminal.data"),loading:s,tableRef:i})},O=()=>S(),w=C=>X.get(route("admin.cashier-terminal.detail",{id:C.id})),I=G(()=>n.screen.gt.sm?v:v.filter(C=>C.name==="name"||C.name==="finance_account_id"||C.name==="action"));return(C,x)=>{const U=Q("i-head"),F=Q("authenticated-layout");return p(),h(W,null,[e(U,{title:Fa}),e(F,null,He({title:l(()=>[y(r(Fa))]),"right-button":l(()=>[e(D,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=T=>u.value=!u.value)},null,8,["icon"]),C.$can("admin.cashier-terminal.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=T=>a(X).get(C.route("admin.cashier-terminal.add")))})):k("",!0)]),default:l(()=>[t("div",qr,[e(Pe,{class:"full-height-table",style:Me({height:a(f)}),ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":x[5]||(x[5]=T=>c.value=T),filter:m.search,loading:s.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:T,message:R,filter:B})=>[t("div",Cr,[t("span",null,r(R)+" "+r(B?" with term "+B:""),1)])]),body:l(T=>[e(Ce,{props:T,class:$e([T.row.active?"":"bg-red-1","cursor-pointer"]),onClick:R=>w(T.row)},{default:l(()=>[e(Y,{key:"name",props:T,class:"wrap-column"},{default:l(()=>[t("div",null,[e(V,{name:"wallet"}),y(" "+r(T.row.name),1)]),t("div",null,[e(V,{name:"home_pin"}),y(" "+r(T.row.location),1)]),a(n).screen.lt.md?(p(),P(ke,{key:0,text:T.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:T},{default:l(()=>[t("div",null,[e(V,{name:"wallet"}),y(" "+r(T.row.finance_account.name),1)]),t("div",null,[e(V,{name:"money"}),y(" "+r(a(it)(T.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(Y,{key:"notes",props:T},{default:l(()=>[e(ke,{text:T.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:T},{default:l(()=>[t("div",Tr,[C.$can("admin.cashier-terminal.edit")||C.$can("admin.cashier-terminal.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[4]||(x[4]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.cashier-terminal.edit")?ee((p(),P(ae,{key:0,clickable:"",onClick:J(R=>a(X).get(C.route("admin.cashier-terminal.edit",T.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>x[6]||(x[6]=[y("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),C.$can("admin.cashier-terminal.delete")?ee((p(),P(ae,{key:1,onClick:J(R=>g(T.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>x[7]||(x[7]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Vr,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[x[2]||(x[2]=T=>m.status=T),O],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":x[3]||(x[3]=T=>m.search=T),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Or=Object.freeze(Object.defineProperty({__proto__:null,default:Pr},Symbol.toStringTag,{value:"Module"})),Fl={__name:"CompanyInfoForm",setup(d){const n=q(),u=fe(),o=Le({name:u.props.data.name,headline:u.props.data.headline,phone:u.props.data.phone,address:u.props.data.address,logo_path:u.props.data.logo_path,logo_image:null}),s=q(null),i=q("");he(()=>{o.logo_path&&(i.value=`/${o.logo_path}`)});function b(){s.value.click()}function f(v){const _=v.target.files[0];_&&(o.logo_image=_,i.value=URL.createObjectURL(_))}function m(){o.logo_image=null,o.logo_path=null,i.value=null,s.value.value=null}const c=()=>Je({form:o,url:route("admin.company-profile.edit")});return(v,_)=>(p(),P(ze,{class:"row",onSubmit:J(c,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[_[8]||(_[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),_[9]||(_[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(oe,{ref_key:"nameInputRef",ref:n,modelValue:a(o).name,"onUpdate:modelValue":_[0]||(_[0]=g=>a(o).name=g),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[g=>g&&g.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(o).headline,"onUpdate:modelValue":_[1]||(_[1]=g=>a(o).headline=g),modelModifiers:{trim:!0},label:"Headline",disable:a(o).processing,maxlength:"200","lazy-rules":"",error:!!a(o).errors.headline,"error-message":a(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).phone,"onUpdate:modelValue":_[2]||(_[2]=g=>a(o).phone=g),modelModifiers:{trim:!0},label:"No Telepon",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.phone,"error-message":a(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(o).address,"onUpdate:modelValue":_[3]||(_[3]=g=>a(o).address=g),modelModifiers:{trim:!0},label:"Alamat",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[_[7]||(_[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(D,{label:"Browse Logo",size:"sm",onClick:b,color:"secondary",icon:"add_a_photo",disable:a(o).processing},null,8,["disable"]),e(D,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:a(o).processing||!i.value,color:"red",onClick:m},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:s,accept:"image/*",style:{display:"none"},onChange:f},null,544),t("div",null,[e(Ht,{src:i.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},He({error:l(()=>[_[4]||(_[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[i.value?void 0:{name:"default",fn:l(()=>[_[5]||(_[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),_[6]||(_[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(te,null,{default:l(()=>[e(D,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Ir=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"})),Rr={class:"q-pa-xs"},Dr={class:"row justify-center"},Ur={class:"col col-md-6"},La="Profil Perusahaan",Ar={__name:"Edit",setup(d){return(n,u)=>{const o=Q("i-head"),s=Q("authenticated-layout");return p(),h(W,null,[e(o,{title:La}),e(s,null,{title:l(()=>[y(r(La))]),default:l(()=>[t("div",Rr,[t("div",Dr,[t("div",Ur,[e(Fl)])])])]),_:1})],64)}}},jr=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"})),Er={class:"q-gutter-sm"},Mr={class:"col col-md-6 q-pa-xs"},Nr={class:"row"},Br={class:"detail"},zr={key:0},Fr={key:1},Lr={key:0},Hr={key:1},Kr={colspan:"3",class:"bg-white"},Ha="Rincian Konfirmasi Top Up",Yr={__name:"Detail",setup(d){const n=fe();return(u,o)=>{const s=Q("i-head"),i=Q("i-link"),b=Q("my-link"),f=Q("authenticated-layout");return p(),h(W,null,[e(s,{title:Ha}),e(f,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Er,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=m=>u.$inertia.get(u.route("admin.customer-wallet-transaction-confirmation.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(Ha))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Mr,[t("div",Nr,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[o[23]||(o[23]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",Br,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Pelanggan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),y(" "+r(a(n).props.data.customer.code),1)]),t("div",null,[e(V,{name:"person",class:"inline-icon"}),y(" "+r(a(n).props.data.customer.name),1)]),a(n).props.data.customer.phone?(p(),h("div",zr,[e(V,{name:"phone",class:"inline-icon"}),y(" "+r(a(n).props.data.customer.phone),1)])):k("",!0),a(n).props.data.customer.address?(p(),h("div",Fr,[e(V,{name:"home_pin",class:"inline-icon"}),y(" "+r(a(n).props.data.customer.address),1)])):k("",!0),t("div",null,[e(i,{href:u.route("admin.customer.detail",{id:a(n).props.data.customer_id})},{default:l(()=>o[5]||(o[5]=[y("Lihat Rincian Pelanggan")])),_:1},8,["href"])])])]),t("tr",null,[o[10]||(o[10]=t("td",null,"Akun Tujuan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,[e(b,{href:u.route("admin.finance-account.detail",{id:a(n).props.data.finance_account.id})},{default:l(()=>[y(r(a(n).props.data.finance_account.name),1)]),_:1},8,["href"]),o[9]||(o[9]=t("br",null,null,-1)),a(n).props.data.finance_account.type==="bank"?(p(),h(W,{key:0},[y(" Rek "+r(a(n).props.data.finance_account.bank)+" an "+r(a(n).props.data.finance_account.holder)+" ",1),o[8]||(o[8]=t("br",null,null,-1)),y(" "+r(a(n).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[o[12]||(o[12]=t("td",null,"Jumlah",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(L)(a(n).props.data.amount)),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Status",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[a(n).props.data.status]),1)]),t("tr",null,[o[16]||(o[16]=t("td",null,"Catatan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(p(),h("tr",Lr,[o[18]||(o[18]=t("td",null,"Dibuat",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(p(),h("tr",Hr,[o[20]||(o[20]=t("td",null,"Diperbarui",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(p(),h(W,{key:2},[o[22]||(o[22]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Kr,[e(Ht,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Me([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Qr=Object.freeze(Object.defineProperty({__proto__:null,default:Yr},Symbol.toStringTag,{value:"Module"})),Wr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Jr={class:"q-pa-xs"},Gr={class:"flex justify-end no-wrap"},Ka="Konfirmasi Top Up Wallet",Xr={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=q(null),c=q(!1),v=Kt(),_=Yt(),g=[{label:"Semua Tahun",value:"all"},...Rt(v-2,v).reverse()],S=[{value:"all",label:"Semua Bulan"},...Dt()],O=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],w=Oe({search:"",year:v,month:_,status:"all",...De()}),I=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!1}),C=[{name:"datetime",label:"Tanggal",field:"datetime",align:"left",sortable:!0},{name:"finance_account_id",label:"Bank Tujuan",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",label:"Aksi",field:"action",align:"center"}];he(()=>{x()});const x=(E=null)=>{Ue({pagination:I,filter:w,props:E,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:s,tableRef:i})},U=()=>{x()},F=G(()=>n.screen.gt.sm?C:C.filter(E=>["datetime","action"].includes(E.name)));Ae(()=>w.year,E=>{E===null&&(w.month=null)});const T=E=>Da({message:`Setujui konfirmasi transaksi #${E.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",E.id),fetchItemsCallback:x,loading:s,data:{id:E.id,action:"accept"}}),R=E=>Da({message:`Tolak konfirmasi transaksi #${E.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",E.id),fetchItemsCallback:x,loading:s,data:{id:E.id,action:"reject"}}),B=E=>lt({message:`Hapus konfirmasi transaksi ${E.formatted_id}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",E.id),fetchItemsCallback:x,loading:s}),M=E=>{m.value=E,c.value=!0};return(E,$)=>{const K=Q("i-head"),se=Q("authenticated-layout");return p(),h(W,null,[e(K,{title:Ka}),e(se,null,He({title:l(()=>[y(r(Ka))]),"right-button":l(()=>[e(D,{class:"q-ml-sm",icon:u.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:$[0]||($[0]=j=>u.value=!u.value)},null,8,["icon"])]),default:l(()=>[t("div",Jr,[e(Pe,{ref_key:"tableRef",ref:i,class:"full-height-table",style:Me({height:a(f)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:I.value,"onUpdate:pagination":$[6]||($[6]=j=>I.value=j),filter:w.search,loading:s.value,columns:F.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),body:l(j=>[e(Ce,{props:j,class:"cursor-pointer",onClick:J(A=>a(X).get(E.route("admin.customer-wallet-transaction-confirmation.detail",{id:j.row.id})),["stop"])},{default:l(()=>[e(Y,{key:"datetime",props:j,class:"wrap-column"},{default:l(()=>[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),y(" "+r(j.row.formatted_id),1)]),t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),y(" "+r(a(ve)(j.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(p(),h(W,{key:0},[e(ke,{icon:"account_balance",text:j.row.finance_account.name},null,8,["text"]),t("div",null,[e(V,{name:"person",class:"inline-icon"}),y(" "+r(j.row.customer.code)+" - "+r(j.row.customer.name),1)]),t("div",null,[e(V,{name:"money",class:"inline-icon"}),y(" Rp. "+r(a(L)(j.row.amount)),1)]),j.row.notes?(p(),P(ke,{key:0,icon:"notes",text:j.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Ra,{status:j.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:j},{default:l(()=>[y(r(j.row.finance_account.name),1),$[8]||($[8]=t("br",null,null,-1)),y(" "+r(j.row.finance_account.bank)+" "+r(j.row.finance_account.number)+" an. "+r(j.row.finance_account.holder),1)]),_:2},1032,["props"]),e(Y,{key:"amount",props:j,style:{"text-align":"right"}},{default:l(()=>[y(r(a(L)(j.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"status",props:j,class:"text-center"},{default:l(()=>[e(Ra,{status:j.row.status},null,8,["status"])]),_:2},1032,["props"]),e(Y,{key:"notes",props:j,class:"word-wrap"},{default:l(()=>[e(ke,{icon:"notes",text:j.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:j,class:"text-center"},{default:l(()=>[t("div",Gr,[e(D,{icon:"image",color:"primary",dense:"",flat:"",disable:j.row.image_path===null||j.row.image_path==="",onClick:J(A=>M(j.row.image_path),["stop"])},{default:l(()=>[j.row.image_path!=null?(p(),P(sa,{key:0},{default:l(()=>$[9]||($[9]=[y(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),E.$can("admin.customer-wallet-transaction-confirmation:accept")||E.$can("admin.customer-wallet-transaction-confirmation:deny")||E.$can("admin.customer-wallet-transaction-confirmation.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[E.$can("admin.customer-wallet-transaction-confirmation:accept")?ee((p(),P(ae,{key:0,onClick:J(A=>T(j.row),["stop"]),clickable:"",disable:j.row.status!=="pending"},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"check"})]),_:1}),e(N,null,{default:l(()=>$[10]||($[10]=[y("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[ne],[ue]]):k("",!0),E.$can("admin.customer-wallet-transaction-confirmation:deny")?ee((p(),P(ae,{key:1,onClick:J(A=>R(j.row),["stop"]),clickable:"",disable:j.row.status!=="pending"},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"cancel"})]),_:1}),e(N,null,{default:l(()=>$[11]||($[11]=[y("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[ne],[ue]]):k("",!0),e(Xe),E.$can("admin.customer-wallet-transaction-confirmation.delete")?ee((p(),P(ae,{key:2,onClick:J(A=>B(j.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>$[12]||($[12]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(ra,{modelValue:c.value,"onUpdate:modelValue":$[7]||($[7]=j=>c.value=j),imageUrl:`/${m.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Wr,[e(de,{modelValue:w.year,"onUpdate:modelValue":[$[1]||($[1]=j=>w.year=j),U],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!=="all"?(p(),P(de,{key:0,modelValue:w.month,"onUpdate:modelValue":[$[2]||($[2]=j=>w.month=j),U],options:S,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:w.status,"onUpdate:modelValue":[$[3]||($[3]=j=>w.status=j),U],options:O,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":$[4]||($[4]=j=>w.search=j),placeholder:"Cari...",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Zr=Object.freeze(Object.defineProperty({__proto__:null,default:Xr},Symbol.toStringTag,{value:"Module"}));function Ll(d,n=!1){const u=d.map(b=>({value:b.id,label:b.code+" - "+b.name})),o=n?[{value:"all",label:"Semua"},...u]:u,s=q([...o]);return{filteredCustomers:s,filterCustomersFn:(b,f)=>{f(()=>{s.value=o.filter(m=>m.label.toLowerCase().includes(b.toLowerCase()))})},customers:o}}const ei={class:"col col-md-6 q-pa-xs"},Ya="Penyesuaian Saldo Dompet Pelanggan",ti={__name:"Adjustment",setup(d){const n=fe(),{filteredCustomers:u,filterCustomersFn:o}=Ll(n.props.customers,!1),s=Le({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),i=()=>s.amount=s.new_wallet_balance-s.old_wallet_balance;Ae(()=>s.customer_id,async m=>{if(!m){s.old_wallet_balance=0,s.new_wallet_balance=0,i();return}s.processing=!0;try{const c=await axios.get(route("admin.customer.wallet_balance",{id:m}));s.new_wallet_balance=s.old_wallet_balance=c.data.wallet_balance}catch(c){console.error("Gagal mengambil saldo:",c),s.old_wallet_balance=0,s.new_wallet_balance=0}s.processing=!1,i()});const b=G(()=>s.new_wallet_balance-s.old_wallet_balance),f=()=>Je({form:s,url:route("admin.customer-wallet-transaction.adjustment")});return(m,c)=>{const v=Q("i-head"),_=Q("authenticated-layout");return p(),h(W,null,[e(v,{title:Ya}),e(_,null,{title:l(()=>[y(r(Ya))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ei,[e(ze,{class:"row",onSubmit:J(f,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[e(de,{class:"custom-select",modelValue:a(s).customer_id,"onUpdate:modelValue":c[0]||(c[0]=g=>a(s).customer_id=g),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(u),"map-options":"","emit-value":"",errorMessage:a(s).errors.customer_id,onFilter:a(o),error:!!a(s).errors.customer_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(N,null,{default:l(()=>c[6]||(c[6]=[y("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Re,{modelValue:a(s).old_wallet_balance,"onUpdate:modelValue":c[1]||(c[1]=g=>a(s).old_wallet_balance=g),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.old_wallet_balance,errorMessage:a(s).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Re,{modelValue:a(s).new_wallet_balance,"onUpdate:modelValue":c[2]||(c[2]=g=>a(s).new_wallet_balance=g),label:"Saldo Seharusnya",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.new_wallet_balance,errorMessage:a(s).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Re,{modelValue:b.value,"onUpdate:modelValue":c[3]||(c[3]=g=>b.value=g),label:"Selisih",readonly:"",lazyRules:"",disable:a(s).processing},null,8,["modelValue","disable"]),e(oe,{modelValue:a(s).notes,"onUpdate:modelValue":c[4]||(c[4]=g=>a(s).notes=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.notes,"error-message":a(s).errors.notes,rules:[g=>g&&g.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:c[5]||(c[5]=g=>a(X).get(m.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ai=Object.freeze(Object.defineProperty({__proto__:null,default:ti},Symbol.toStringTag,{value:"Module"})),li={class:"q-gutter-sm"},oi={class:"col col-md-6 q-pa-xs"},ni={class:"row"},si={class:"detail"},ri={key:0},ii={key:1},di={key:0},ui={key:1},mi={colspan:"3",class:"bg-white"},Qa="Rincian Transaksi",ci={__name:"Detail",setup(d){const n=fe();return(u,o)=>{const s=Q("i-head"),i=Q("i-link"),b=Q("authenticated-layout");return p(),h(W,null,[e(s,{title:Qa}),e(b,null,{"left-button":l(()=>[t("div",li,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=f=>u.$goBack())})])]),title:l(()=>[y(r(Qa))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",oi,[t("div",ni,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",si,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Pelanggan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),y(" "+r(a(n).props.data.customer.code),1)]),t("div",null,[e(V,{name:"person",class:"inline-icon"}),y(" "+r(a(n).props.data.customer.name),1)]),a(n).props.data.customer.phone?(p(),h("div",ri,[e(V,{name:"phone",class:"inline-icon"}),y(" "+r(a(n).props.data.customer.phone),1)])):k("",!0),a(n).props.data.customer.address?(p(),h("div",ii,[e(V,{name:"home_pin",class:"inline-icon"}),y(" "+r(a(n).props.data.customer.address),1)])):k("",!0),t("div",null,[e(i,{href:u.route("admin.customer.detail",{id:a(n).props.data.customer_id})},{default:l(()=>o[5]||(o[5]=[y("Lihat Rincian Pelanggan")])),_:1},8,["href"])])])]),t("tr",null,[o[8]||(o[8]=t("td",null,"Jenis Transaksi",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[a(n).props.data.type]),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",{class:$e(a(n).props.data.amount>0?"text-positive":"text-negative")},r(a(Nt)(a(n).props.data.amount))+"Rp. "+r(a(L)(Math.abs(a(n).props.data.amount))),3)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(p(),h("tr",di,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(p(),h("tr",ui,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(p(),h(W,{key:2},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",mi,[e(Ht,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Me([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},pi=Object.freeze(Object.defineProperty({__proto__:null,default:ci},Symbol.toStringTag,{value:"Module"})),fi={class:"q-gutter-sm"},gi={class:"col col-md-6 q-pa-xs"},bi={__name:"Editor",setup(d){var c;const n=fe(),u=(n.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:s}=Ll(n.props.customers,!1),i=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],b=n.props.finance_accounts.map(v=>({label:v.name,value:v.id})),f=Le({id:n.props.data.id,customer_id:n.props.data.customer_id,finance_account_id:n.props.data.finance_account_id,type:n.props.data.type,datetime:new Date(n.props.data.datetime),notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((c=n.props.data)==null?void 0:c.image_path)??"",image:null}),m=()=>{Qt(f,{datetime:"YYYY-MM-DD HH:mm:ss"}),Je({form:f,url:route("admin.customer-wallet-transaction.save")})};return(v,_)=>{const g=Q("i-head"),S=Q("authenticated-layout");return p(),h(W,null,[e(g,{title:u}),e(S,null,{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",fi,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=O=>v.$inertia.get(v.route("admin.customer-wallet-transaction.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",gi,[e(ze,{class:"row",onSubmit:J(m,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=O=>a(f).id=O)},null,512),[[dt,a(f).id]]),e(Bt,{autofocus:"",modelValue:a(f).datetime,"onUpdate:modelValue":_[2]||(_[2]=O=>a(f).datetime=O),label:"Tanggal",error:!!a(f).errors.datetime,disable:a(f).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(de,{class:"custom-select",modelValue:a(f).customer_id,"onUpdate:modelValue":_[3]||(_[3]=O=>a(f).customer_id=O),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"","emit-value":"",errorMessage:a(f).errors.customer_id,onFilter:a(s),error:!!a(f).errors.customer_id,disable:a(f).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(N,null,{default:l(()=>_[10]||(_[10]=[y("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(de,{modelValue:a(f).type,"onUpdate:modelValue":_[4]||(_[4]=O=>a(f).type=O),label:"Jenis",options:i,"map-options":"","emit-value":"",error:!!a(f).errors.type,disable:a(f).processing,errorMessage:a(f).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{modelValue:a(f).finance_account_id,"onUpdate:modelValue":_[5]||(_[5]=O=>a(f).finance_account_id=O),label:a(f).type=="deposit"?"Kas Tujuan":"Kas Asal",options:a(b),"map-options":"","emit-value":"",error:!!a(f).errors.finance_account_id,disable:a(f).processing,errorMessage:a(f).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Re,{modelValue:a(f).amount,"onUpdate:modelValue":_[6]||(_[6]=O=>a(f).amount=O),label:"Jumlah",lazyRules:"",disable:a(f).processing,error:!!a(f).errors.amount,errorMessage:a(f).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(f).notes,"onUpdate:modelValue":_[7]||(_[7]=O=>a(f).notes=O),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(f).processing,error:!!a(f).errors.notes,"error-message":a(f).errors.notes,rules:[O=>O&&O.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ha,{modelValue:a(f).image,"onUpdate:modelValue":_[8]||(_[8]=O=>a(f).image=O),"initial-image-path":a(f).image_path,disabled:a(f).processing,error:!!a(f).errors.image||!!a(f).errors.image_path,"error-message":a(f).errors.image||a(f).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(f).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(f).processing,onClick:_[9]||(_[9]=O=>a(X).get(v.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},vi=Object.freeze(Object.defineProperty({__proto__:null,default:bi},Symbol.toStringTag,{value:"Module"})),yi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},_i={class:"q-pa-xs"},ki={class:"full-width row flex-center text-grey-8 q-gutter-sm"},wi={key:0},hi={class:"flex justify-end no-wrap"},Wa="Transaksi Dompet Pelanggan",$i={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=new Date().getFullYear(),c=new Date().getMonth()+1,v=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...Rt(m-2,m-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Dt()],g=Oe({search:"",year:m,month:c,...De()}),S=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),O=[{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"action",align:"right"}];he(()=>{I()});const w=R=>lt({message:`Hapus transaksi #${R.formatted_id}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",R.id),fetchItemsCallback:I,loading:s}),I=(R=null)=>{Ue({pagination:S,filter:g,props:R,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:s,tableRef:i})},C=()=>{I()},x=G(()=>n.screen.gt.sm?O:O.filter(R=>R.name==="datetime"||R.name==="action"));Ae(()=>g.year,R=>{R===null&&(g.month=null)});const U=q(null),F=q(!1),T=R=>{U.value=R,F.value=!0};return(R,B)=>{const M=Q("i-head"),E=Q("authenticated-layout");return p(),h(W,null,[e(M,{title:Wa}),e(E,null,He({title:l(()=>[y(r(Wa))]),"right-button":l(()=>[e(D,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:B[0]||(B[0]=$=>u.value=!u.value)},null,8,["icon"]),R.$can("admin.customer-wallet-transaction.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:B[1]||(B[1]=$=>a(X).get(R.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",_i,[e(Pe,{ref_key:"tableRef",ref:i,style:Me({height:a(f)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:S.value,"onUpdate:pagination":B[6]||(B[6]=$=>S.value=$),filter:g.search,loading:s.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:I,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:$,message:K,filter:se})=>[t("div",ki,[t("span",null,r(K)+" "+r(se?" with term "+se:""),1)])]),body:l($=>[e(Ce,{props:$,class:"cursor-pointer",onClick:J(K=>a(X).get(R.route("admin.customer-wallet-transaction.detail",{id:$.row.id})),["stop"])},{default:l(()=>[e(Y,{key:"datetime",props:$,class:"wrap-column"},{default:l(()=>[t("div",null,[e(V,{name:"tag",class:"inline-icon"}),y(" "+r($.row.formatted_id),1)]),t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),y(" "+r(a(ve)($.row.datetime)),1)]),$.row.finance_account?(p(),h("div",wi,[e(V,{name:"wallet",class:"inline-icon"}),y(" "+r($.row.finance_account?$.row.finance_account.name:"-"),1)])):k("",!0),a(n).screen.gt.sm?k("",!0):(p(),h(W,{key:1},[e(ke,{icon:"person",text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"]),t("div",{class:$e([$.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(V,{name:"money",class:"inline-icon"}),y(" "+r(a(Nt)($.row.amount))+"Rp. "+r(a(L)(Math.abs($.row.amount))),1)],2),e(ke,{text:$.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(ut,null,{default:l(()=>[y(r($.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(Y,{key:"customer",props:$},{default:l(()=>[e(ke,{text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"notes",props:$},{default:l(()=>[e(ke,{text:$.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:$,style:{"text-align":"right"}},{default:l(()=>[y(r(a(na)($.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:$},{default:l(()=>[t("div",hi,[e(D,{icon:"image",color:"primary",dense:"",flat:"",disable:$.row.image_path===null||$.row.image_path==="",onClick:J(K=>T($.row.image_path),["stop"])},{default:l(()=>[$.row.image_path!=null?(p(),P(sa,{key:0},{default:l(()=>B[8]||(B[8]=[y(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),R.$can("admin.customer-wallet-transaction.delete")?(p(),P(D,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:B[5]||(B[5]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[R.$can("admin.customer-wallet-transaction.delete")?ee((p(),P(ae,{key:0,onClick:J(K=>w($.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>B[9]||(B[9]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ra,{modelValue:F.value,"onUpdate:modelValue":B[7]||(B[7]=$=>F.value=$),imageUrl:`/${U.value}`},null,8,["modelValue","imageUrl"])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",yi,[e(de,{modelValue:g.year,"onUpdate:modelValue":[B[2]||(B[2]=$=>g.year=$),C],options:v,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:g.month,"onUpdate:modelValue":[B[3]||(B[3]=$=>g.month=$),C],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:g.year===null},null,8,["modelValue","disable"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":B[4]||(B[4]=$=>g.search=$),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},xi=Object.freeze(Object.defineProperty({__proto__:null,default:$i},Symbol.toStringTag,{value:"Module"})),Si={class:"detail"},Vi={colspan:"3"},qi={class:"text-bold text-grey-8"},Ci={key:0},Ti={key:1},Pi={class:"text-grey-8"},Oi={key:2},Ii={class:"text-grey-8"},Hl={__name:"MainInfoTab",setup(d){const n=fe();return(u,o)=>(p(),h("table",Si,[t("tbody",null,[t("tr",null,[t("td",Vi,[t("div",qi,[o[1]||(o[1]=y(" Info Pelanggan ")),u.$can("admin.customer.edit")?(p(),P(D,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=s=>u.$inertia.get(u.route("admin.customer.edit",{id:a(n).props.data.id})))})):k("",!0)])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Username",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.code),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Jenis",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.CUSTOMER_TYPES[a(n).props.data.type]),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Nama",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"No. Telepon",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.phone?a(n).props.data.phone:"-"),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Alamat",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.address?a(n).props.data.address:"-"),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Saldo Wallet",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(L)(a(n).props.data.wallet_balance)),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Status",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[25]||(o[25]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),a(n).props.data.created_at?(p(),h("tr",Ci,[o[16]||(o[16]=t("td",null,"Dibuat",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(Vt)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name)+" ("+r(a(ve)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(p(),h("tr",Ti,[o[18]||(o[18]=t("td",null,"Diperbarui",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(Vt)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name)+" ("+r(a(ve)(a(n).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[o[20]||(o[20]=t("td",null,"Terakhir login",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,[y(r(a(n).props.data.last_login_datetime?a(ve)(a(n).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",Pi,"("+r(a(Vt)(a(n).props.data.last_login_datetime))+")",1)])]),a(n).props.data.last_activity_datetime?(p(),h("tr",Oi,[o[23]||(o[23]=t("td",null,"Aktifitas Terakhir",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,[y(r(a(ve)(a(n).props.data.last_activity_datetime))+" ",1),t("span",Ii,[y("("+r(a(Vt)(a(n).props.data.last_activity_datetime))+")",1),o[22]||(o[22]=t("br",null,null,-1)),y(r(a(n).props.data.last_activity_description),1)])])])):k("",!0)])]))}},Ri=Object.freeze(Object.defineProperty({__proto__:null,default:Hl},Symbol.toStringTag,{value:"Module"})),Di={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ui={class:"text-bold"},Kl={__name:"WalletHistoryTab",setup(d){const n=fe(),u=q([]),o=q(!0),s=Oe({customer_id:n.props.data.id,...De()}),i=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{f()});const f=(v=null)=>Ue({pagination:i,filter:s,props:v,rows:u,url:route("admin.customer-wallet-transaction.data"),loading:o}),m=xe(),c=G(()=>m.screen.gt.sm?b:b.filter(v=>v.name==="id"));return(v,_)=>(p(),P(Pe,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:i.value,"onUpdate:pagination":_[0]||(_[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:c.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:S,filter:O})=>[t("div",Di,[t("span",null,r(S)+" "+r(O?" with term "+O:""),1)])]),body:l(g=>[e(Ce,{props:g,class:"cursor-pointer",onClick:J(S=>a(X).get(v.route("admin.customer-wallet-transaction.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(Y,{key:"id",props:g},{default:l(()=>[t("div",Ui,[e(V,{class:"inline-icon",name:"tag"}),y(" "+r(g.row.formatted_id),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),y(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),h(W,{key:0},[t("div",{class:$e(["text-bold",g.row.amount<0?"text-red":"text-green"])},[e(V,{name:"money",class:"inline-icon"}),y(" "+r(a(Tl)(g.row.amount)),1)],2),t("div",null,[e(ke,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(ut,{size:"xs",color:g.row.amount>0?"green":"red"},{default:l(()=>[e(V,{name:"category"}),y(" "+r(g.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(ke,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:g},{default:l(()=>[t("div",{class:$e(g.row.amount<0?"text-red-10":g.row.amount>0?"text-green-10":"")},r(a(na)(g.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ai=Object.freeze(Object.defineProperty({__proto__:null,default:Kl},Symbol.toStringTag,{value:"Module"})),ji={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ei={class:"text-bold"},Mi={class:"text-bold"},Ni={key:0},Yl={__name:"OrderHistoryTab",setup(d){const n=fe(),u=q([]),o=q(!0),s=Oe({customer_id:n.props.data.id,...De()}),i=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{f()});const f=(v=null)=>Ue({pagination:i,filter:s,props:v,rows:u,url:route("admin.sales-order.data",{customer_id:n.props.data.id,filter:{status:["closed","canceled"]}}),loading:o}),m=xe(),c=G(()=>m.screen.gt.sm?b:b.filter(v=>v.name==="id"));return(v,_)=>(p(),P(Pe,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:i.value,"onUpdate:pagination":_[0]||(_[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:c.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:S,filter:O})=>[t("div",ji,[t("span",null,r(S)+" "+r(O?" with term "+O:""),1)])]),body:l(g=>[e(Ce,{props:g,class:"cursor-pointer",onClick:J(S=>a(X).get(v.route("admin.sales-order.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(Y,{key:"id",props:g},{default:l(()=>[t("div",Ei,[e(V,{class:"inline-icon",name:"tag"}),y(" "+r(g.row.formatted_id),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),y(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),h(W,{key:0},[t("div",Mi,[e(V,{name:"money",class:"inline-icon"}),y(" Rp. "+r(a(L)(g.row.grand_total)),1)]),g.row.notes?(p(),h("div",Ni,[e(ke,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(ut,{color:g.row.status=="closed"?"green":"red"},{default:l(()=>[y(r(v.$CONSTANTS.SALES_ORDER_STATUSES[g.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:g},{default:l(()=>[t("div",null,r(a(L)(g.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(ke,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Bi=Object.freeze(Object.defineProperty({__proto__:null,default:Yl},Symbol.toStringTag,{value:"Module"})),zi={class:"q-gutter-sm"},Fi={class:"col col-lg-6 q-pa-xs"},Li={class:"row"},Ja="Rincian Pelanggan",Hi={__name:"Detail",setup(d){fe();const n=q("main");return xe(),(u,o)=>{const s=Q("i-head"),i=Q("authenticated-layout");return p(),h(W,null,[e(s,{title:Ja}),e(i,null,{title:l(()=>[y(r(Ja))]),"left-button":l(()=>[t("div",zi,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.customer.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Fi,[t("div",Li,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(At,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=b=>n.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(nt,{name:"main",label:"Info Utama"}),e(nt,{name:"history",label:"Riwayat Wallet"}),e(nt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(jt,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=b=>n.value=b),animated:""},{default:l(()=>[e(st,{name:"main"},{default:l(()=>[e(Hl)]),_:1}),e(st,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(Kl)]),_:1}),e(st,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(Yl)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Ki=Object.freeze(Object.defineProperty({__proto__:null,default:Hi},Symbol.toStringTag,{value:"Module"})),Yi={class:"q-gutter-sm"},Qi={class:"col col-md-6 q-pa-xs"},Wi={__name:"Editor",setup(d){const n=fe(),u=(n.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Le({id:n.props.data.id,code:n.props.data.code,name:n.props.data.name,phone:n.props.data.phone,address:n.props.data.address,active:!!n.props.data.active,password:n.props.data.password,type:n.props.data.type}),s=Ze(window.CONSTANTS.CUSTOMER_TYPES),i=()=>Je({form:o,url:route("admin.customer."+(n.props.data.id?"edit":"add"),{id:o.id})});return(b,f)=>{const m=Q("i-head"),c=Q("authenticated-layout");return p(),h(W,null,[e(m,{title:u}),e(c,null,{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",Yi,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=v=>b.$inertia.get(b.route("admin.customer.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Qi,[e(ze,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=v=>a(o).id=v)},null,512),[[dt,a(o).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[e(oe,{modelValue:a(o).code,"onUpdate:modelValue":f[2]||(f[2]=v=>a(o).code=v),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[v=>v&&v.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).name,"onUpdate:modelValue":f[3]||(f[3]=v=>a(o).name=v),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[v=>v&&v.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{modelValue:a(o).type,"onUpdate:modelValue":f[4]||(f[4]=v=>a(o).type=v),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"","lazy-rules":"",disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(o).errors.type,"error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(oe,{modelValue:a(o).phone,"onUpdate:modelValue":f[5]||(f[5]=v=>a(o).phone=v),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:a(o).processing,error:!!a(o).errors.phone,"error-message":a(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).address,"onUpdate:modelValue":f[6]||(f[6]=v=>a(o).address=v),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{autocomplete:"","aria-autocomplete":"none",modelValue:a(o).password,"onUpdate:modelValue":f[7]||(f[7]=v=>a(o).password=v),type:"password",label:a(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:a(o).processing,error:!!a(o).errors.password,"error-message":a(o).errors.password,"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","label","disable","error","error-message"]),e(da,{modelValue:a(o).active,"onUpdate:modelValue":f[8]||(f[8]=v=>a(o).active=v),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(D,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:f[9]||(f[9]=v=>a(X).get(b.route("admin.customer.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ji=Object.freeze(Object.defineProperty({__proto__:null,default:Wi},Symbol.toStringTag,{value:"Module"}));function Et(d,n,u,o){const s=[];return d.forEach(i=>{o(i)===!0?s.push(i):n.push({failedPropValidation:u,file:i})}),s}function Xt(d){d&&d.dataTransfer&&(d.dataTransfer.dropEffect="copy"),It(d)}const Gi={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Xi=["rejected"];function Zi({editable:d,dnd:n,getFileInput:u,addFilesToQueue:o}){const{props:s,emit:i,proxy:b}=Tt(),f=q(null),m=G(()=>s.accept!==void 0?s.accept.split(",").map(x=>(x=x.trim(),x==="*"?"*/":(x.endsWith("/*")&&(x=x.slice(0,x.length-1)),x.toUpperCase()))):null),c=G(()=>parseInt(s.maxFiles,10)),v=G(()=>parseInt(s.maxTotalSize,10));function _(x){if(d.value)if(x!==Object(x)&&(x={target:null}),x.target!==null&&x.target.matches('input[type="file"]')===!0)x.clientX===0&&x.clientY===0&&Jo(x);else{const U=u();U&&U!==x.target&&U.click(x)}}function g(x){d.value&&x&&o(null,x)}function S(x,U,F,T){let R=Array.from(U||x.target.files);const B=[],M=()=>{B.length!==0&&i("rejected",B)};if(s.accept!==void 0&&m.value.indexOf("*/")===-1&&(R=Et(R,B,"accept",E=>m.value.some($=>E.type.toUpperCase().startsWith($)||E.name.toUpperCase().endsWith($))),R.length===0))return M();if(s.maxFileSize!==void 0){const E=parseInt(s.maxFileSize,10);if(R=Et(R,B,"max-file-size",$=>$.size<=E),R.length===0)return M()}if(s.multiple!==!0&&R.length!==0&&(R=[R[0]]),R.forEach(E=>{E.__key=E.webkitRelativePath+E.lastModified+E.name+E.size}),T===!0){const E=F.map($=>$.__key);R=Et(R,B,"duplicate",$=>E.includes($.__key)===!1)}if(R.length===0)return M();if(s.maxTotalSize!==void 0){let E=T===!0?F.reduce(($,K)=>$+K.size,0):0;if(R=Et(R,B,"max-total-size",$=>(E+=$.size,E<=v.value)),R.length===0)return M()}if(typeof s.filter=="function"){const E=s.filter(R);R=Et(R,B,"filter",$=>E.includes($))}if(s.maxFiles!==void 0){let E=T===!0?F.length:0;if(R=Et(R,B,"max-files",()=>(E++,E<=c.value)),R.length===0)return M()}if(M(),R.length!==0)return R}function O(x){Xt(x),n.value!==!0&&(n.value=!0)}function w(x){It(x),(x.relatedTarget!==null||Mt.is.safari!==!0?x.relatedTarget!==f.value:document.elementsFromPoint(x.clientX,x.clientY).includes(f.value)===!1)===!0&&(n.value=!1)}function I(x){Xt(x);const U=x.dataTransfer.files;U.length!==0&&o(null,U),n.value=!1}function C(x){if(n.value===!0)return _e("div",{ref:f,class:`q-${x}__dnd absolute-full`,onDragenter:Xt,onDragover:Xt,onDragleave:w,onDrop:I})}return Object.assign(b,{pickFiles:_,addFiles:g}),{pickFiles:_,addFiles:g,onDragover:O,onDragleave:w,processFiles:S,getDndNode:C,maxFilesNumber:c,maxTotalSizeNumber:v}}const Ql=$t({name:"QFile",inheritAttrs:!1,props:{...Xo,...Pl,...Gi,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Go,...Xi],setup(d,{slots:n,emit:u,attrs:o}){const{proxy:s}=Tt(),i=Zo(),b=q(null),f=q(!1),m=en(d),{pickFiles:c,onDragover:v,onDragleave:_,processFiles:g,getDndNode:S}=Zi({editable:i.editable,dnd:f,getFileInput:se,addFilesToQueue:j}),O=tn(d),w=G(()=>Object(d.modelValue)===d.modelValue?"length"in d.modelValue?Array.from(d.modelValue):[d.modelValue]:[]),I=G(()=>Ua(w.value)),C=G(()=>w.value.map(le=>le.name).join(", ")),x=G(()=>an(w.value.reduce((le,qe)=>le+qe.size,0))),U=G(()=>({totalSize:x.value,filesNumber:w.value.length,maxFiles:d.maxFiles})),F=G(()=>({tabindex:-1,type:"file",title:"",accept:d.accept,capture:d.capture,name:m.value,...o,id:i.targetUid.value,disabled:i.editable.value!==!0})),T=G(()=>"q-file q-field--auto-height"+(f.value===!0?" q-file--dnd":"")),R=G(()=>d.multiple===!0&&d.append===!0);function B(le){const qe=w.value.slice();qe.splice(le,1),E(qe)}function M(le){const qe=w.value.indexOf(le);qe!==-1&&B(qe)}function E(le){u("update:modelValue",d.multiple===!0?le:le[0])}function $(le){le.keyCode===13&&nn(le)}function K(le){(le.keyCode===13||le.keyCode===32)&&c(le)}function se(){return b.value}function j(le,qe){const Ne=g(le,qe,w.value,R.value),ft=se();ft!=null&&(ft.value=""),Ne!==void 0&&((d.multiple===!0?d.modelValue&&Ne.every(pt=>w.value.includes(pt)):d.modelValue===Ne[0])||E(R.value===!0?w.value.concat(Ne):Ne))}function A(){return[_e("input",{class:[d.inputClass,"q-file__filler"],style:d.inputStyle})]}function Z(){if(n.file!==void 0)return w.value.length===0?A():w.value.map((qe,Ne)=>n.file({index:Ne,file:qe,ref:this}));if(n.selected!==void 0)return w.value.length===0?A():n.selected({files:w.value,ref:this});if(d.useChips===!0)return w.value.length===0?A():w.value.map((qe,Ne)=>_e(Ol,{key:"file-"+Ne,removable:i.editable.value,dense:!0,textColor:d.color,tabindex:d.tabindex,onRemove:()=>{B(Ne)}},()=>_e("span",{class:"ellipsis",textContent:qe.name})));const le=d.displayValue!==void 0?d.displayValue:C.value;return le.length!==0?[_e("div",{class:d.inputClass,style:d.inputStyle,textContent:le})]:A()}function we(){const le={ref:b,...F.value,...O.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:j};return d.multiple===!0&&(le.multiple=!0),_e("input",le)}return Object.assign(i,{fieldClass:T,emitValue:E,hasValue:I,inputRef:b,innerValue:w,floatingLabel:G(()=>I.value===!0||Ua(d.displayValue)),computedCounter:G(()=>{if(d.counterLabel!==void 0)return d.counterLabel(U.value);const le=d.maxFiles;return`${w.value.length}${le!==void 0?" / "+le:""} (${x.value})`}),getControlChild:()=>S("file"),getControl:()=>{const le={ref:i.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:d.tabindex};return i.editable.value===!0&&Object.assign(le,{onDragover:v,onDragleave:_,onKeydown:$,onKeyup:K}),_e("div",le,[we()].concat(Z()))}}),Object.assign(s,{removeAtIndex:B,removeFile:M,getNativeElement:()=>b.value}),ln(s,"nativeEl",()=>b.value),on(i)}}),aa=$t({name:"QBanner",props:{...ka,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(d,{slots:n}){const{proxy:{$q:u}}=Tt(),o=wa(d,u),s=G(()=>"q-banner row items-center"+(d.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(d.rounded===!0?" rounded-borders":"")),i=G(()=>`q-banner__actions row items-center justify-end col-${d.inlineActions===!0?"auto":"all"}`);return()=>{const b=[_e("div",{class:"q-banner__avatar col-auto row items-center self-start"},Ct(n.avatar)),_e("div",{class:"q-banner__content col text-body2"},Ct(n.default))],f=Ct(n.action);return f!==void 0&&b.push(_e("div",{class:i.value},f)),_e("div",{class:s.value+(d.inlineActions===!1&&f!==void 0?" q-banner--top-padding":""),role:"alert"},b)}}}),ed={class:"q-gutter-sm"},td={class:"col col-md-6 q-pa-xs"},Ga="Import Pelanggan",ad={__name:"Import",setup(d){const n=Le({csv_file:null}),u=()=>{n.post(route("admin.customer.import"),{onSuccess:()=>{n.reset()},onError:()=>{Be()},onFinish:()=>{n.clearErrors()}})};return(o,s)=>{const i=Q("i-head"),b=Q("authenticated-layout");return p(),h(W,null,[e(i,{title:Ga}),e(b,{"show-drawer-button":!0},{title:l(()=>[y(r(Ga))]),"left-button":l(()=>[t("div",ed,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=f=>o.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",td,[e(ze,{class:"row",onSubmit:J(u,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[s[3]||(s[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),s[4]||(s[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(Ql,{modelValue:a(n).csv_file,"onUpdate:modelValue":s[1]||(s[1]=f=>a(n).csv_file=f),accept:".csv",label:"Pilih file CSV",error:!!a(n).errors.csv_file,"error-message":a(n).errors.csv_file,disable:a(n).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(n).processing||!a(n).csv_file,loading:a(n).processing},null,8,["disable","loading"]),e(D,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:s[2]||(s[2]=f=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(p(),P(aa,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[y(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(p(),P(aa,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[y(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ld=Object.freeze(Object.defineProperty({__proto__:null,default:ad},Symbol.toStringTag,{value:"Module"})),od={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},nd={class:"q-pa-xs"},sd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},rd={class:"flex justify-end"},Xa="Pelanggan",id={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=Oe({search:"",status:"active",...De()}),c=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"code",label:n.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Saldo (Rp)",field:"wallet_balance",align:"right"},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{S()});const g=C=>lt({message:`Hapus Pelanggan ${C.name}?`,url:route("admin.customer.delete",C.id),fetchItemsCallback:S,loading:s}),S=(C=null)=>{Ue({pagination:c,filter:m,props:C,rows:o,url:route("admin.customer.data"),loading:s,tableRef:i})},O=()=>S(),w=C=>X.get(route("admin.customer.detail",{id:C.id})),I=G(()=>n.screen.gt.sm?v:v.filter(C=>C.name==="code"||C.name==="action"));return(C,x)=>{const U=Q("i-head"),F=Q("authenticated-layout");return p(),h(W,null,[e(U,{title:Xa}),e(F,null,He({title:l(()=>[y(r(Xa))]),"right-button":l(()=>[e(D,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=T=>u.value=!u.value)},null,8,["icon"]),C.$can("admin.customer.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=T=>a(X).get(C.route("admin.customer.add")))})):k("",!0),C.$can("admin.customer.import")?(p(),P(D,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.customer.import")?ee((p(),P(ae,{key:0,clickable:"",onClick:x[2]||(x[2]=J(T=>a(X).get(C.route("admin.customer.import")),["stop"]))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"csv"})]),_:1}),e(N,null,{default:l(()=>x[8]||(x[8]=[y("Import")])),_:1})]),_:1})),[[ne],[ue]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",nd,[e(Pe,{class:"full-height-table",style:Me({height:a(f)}),ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":x[7]||(x[7]=T=>c.value=T),filter:m.search,loading:s.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:T,message:R,filter:B})=>[t("div",sd,[t("span",null,r(R)+" "+r(B?" with term "+B:""),1)])]),body:l(T=>[e(Ce,{props:T,class:$e([T.row.active?"":"bg-red-1","cursor-pointer"]),onClick:R=>w(T.row)},{default:l(()=>[e(Y,{key:"code",props:T,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(p(),P(V,{key:0,name:"person"})):k("",!0),y(" "+r(T.row.code),1)]),a(n).screen.lt.md?(p(),h(W,{key:0},[t("div",null,[a(n).screen.lt.md?(p(),P(V,{key:0,name:"person"})):k("",!0),y(" "+r(T.row.name),1)]),t("div",null,[e(V,{name:"phone"}),y(" "+r(T.row.phone),1)]),e(ke,{text:T.row.address,icon:"home_pin"},null,8,["text"]),t("div",null,[e(V,{name:"wallet"}),y(" Rp. "+r(a(L)(T.row.wallet_balance)),1)])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"name",props:T},{default:l(()=>[y(r(T.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"wallet_balance",props:T},{default:l(()=>[y(r(a(L)(T.row.wallet_balance)),1)]),_:2},1032,["props"]),e(Y,{key:"phone",props:T},{default:l(()=>[y(r(T.row.phone),1)]),_:2},1032,["props"]),e(Y,{key:"address",props:T},{default:l(()=>[e(ke,{text:T.row.address},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:T},{default:l(()=>[t("div",rd,[C.$can("admin.customer.add")||C.$can("admin.customer.edit")||C.$can("admin.customer.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[6]||(x[6]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.customer.edit")?ee((p(),P(ae,{key:0,clickable:"",onClick:J(R=>a(X).get(C.route("admin.customer.edit",T.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>x[9]||(x[9]=[y("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),C.$can("admin.customer.delete")?ee((p(),P(ae,{key:1,onClick:J(R=>g(T.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>x[10]||(x[10]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",od,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[x[4]||(x[4]=T=>m.status=T),O],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":x[5]||(x[5]=T=>m.search=T),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},dd=Object.freeze(Object.defineProperty({__proto__:null,default:id},Symbol.toStringTag,{value:"Module"})),ud={class:"q-pb-sm"},md={class:"row q-col-gutter-sm"},cd={class:"row items-center no-wrap"},pd={class:"q-ml-md"},fd={class:"text-subtitle2 text-grey-8"},gd={class:"text-h6 text-weight-bold"},Wl={__name:"ActualSummaryCard",props:{dashboardData:{type:Object,required:!0}},setup(d){const n=d,u=G(()=>[{label:"Total Pelanggan Aktif",value:n.dashboardData.summary.total_active_customer,icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Saldo Wallet",value:L(n.dashboardData.summary.total_wallet_balance),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Penjualan",value:L(n.dashboardData.summary.total_sales),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Transaksi",value:L(n.dashboardData.summary.total_transactions),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(o,s)=>(p(),h("div",ud,[s[0]||(s[0]=t("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"},"Ringkasan Statistik",-1)),t("div",md,[(p(!0),h(W,null,tt(u.value,(i,b)=>(p(),h("div",{key:b,class:"col-12 col-md-6"},[e(pe,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:l(()=>[t("div",cd,[e(Ft,{icon:i.icon,color:i.color,"text-color":i.bgColor},null,8,["icon","color","text-color"]),t("div",pd,[t("div",fd,r(i.label),1),t("div",gd,r(i.value),1)])])]),_:2},1024)]))),128))])]))}},bd=Object.freeze(Object.defineProperty({__proto__:null,default:Wl},Symbol.toStringTag,{value:"Module"})),vd={class:"row q-col-gutter-sm q-pb-sm"},yd={class:"col-md-6 col-12"},_d={class:"col-md-6 col-12"},kd={__name:"ChartCard",props:{dashboardData:{type:Object,required:!0}},setup(d){sn([rn,dn,un,mn,cn,pn,fn]);const n=d,u=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=G(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(i){let b=i[0].name+"<br/>";return i.forEach(function(f){b+=f.marker+" "+f.seriesName+": "+L(f.value)+"<br/>"}),b}},xAxis:{type:"category",data:n.dashboardData.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:i=>L(i),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:n.dashboardData.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:u[0]}}]})),s=G(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(i){return i.name+"<br/>"+i.seriesName+": "+L(i.value)+" ("+i.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:n.dashboardData.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:i=>u[i.dataIndex%u.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(i,b)=>(p(),h("div",vd,[t("div",yd,[e(pe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[b[0]||(b[0]=t("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),e(a(Aa),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",_d,[e(pe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[b[1]||(b[1]=t("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),e(a(Aa),{class:"chart",option:s.value,autoresize:""},null,8,["option"])]),_:1})])]))}},Jl=wt(kd,[["__scopeId","data-v-b9cdf915"]]),wd=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),hd={class:"row q-col-gutter-sm q-pb-sm"},$d={class:"col-md-6 col-12"},xd={class:"col-md-6 col-12"},Gl={__name:"TopCard",props:{dashboardData:{type:Object,required:!0}},setup(d){return(n,u)=>(p(),h("div",hd,[t("div",$d,[e(pe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[u[0]||(u[0]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),e(je,{separator:""},{default:l(()=>[(p(!0),h(W,null,tt(d.dashboardData.top_customers_sales,(o,s)=>(p(),P(ae,{key:s},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(Ft,{color:"primary","text-color":"white",size:"sm"},{default:l(()=>[y(r(s+1),1)]),_:2},1024)]),_:2},1024),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>[y(r(o.name),1)]),_:2},1024)]),_:2},1024),e(N,{side:""},{default:l(()=>[e(ye,{class:"text-primary"},{default:l(()=>[y(r(a(L)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",xd,[e(pe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[u[1]||(u[1]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),e(je,{separator:""},{default:l(()=>[(p(!0),h(W,null,tt(d.dashboardData.top_customers_topup,(o,s)=>(p(),P(ae,{key:s},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(Ft,{color:"green-7","text-color":"white",size:"sm"},{default:l(()=>[y(r(s+1),1)]),_:2},1024)]),_:2},1024),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>[y(r(o.name),1)]),_:2},1024)]),_:2},1024),e(N,{side:""},{default:l(()=>[e(ye,{class:"text-green-7"},{default:l(()=>[y(r(a(L)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]))}},Sd=Object.freeze(Object.defineProperty({__proto__:null,default:Gl},Symbol.toStringTag,{value:"Module"})),Vd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},qd={class:"q-pa-xs"},Cd={class:"q-pa-none"},Za="Dashboard",Td={__name:"Index",setup(d){const n=fe(),u=q({summary:{total_active_customer:n.props.data.active_customer_count,total_sales:155e5,total_transactions:1250,total_wallet_balance:n.props.data.total_customer_wallet_balance,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),o=q(!1),s=q(De().month??"this_month"),i=q([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),b=()=>{X.visit(route("admin.dashboard",{month:s.value}))};return(f,m)=>{const c=Q("i-head"),v=Q("authenticated-layout");return p(),h(W,null,[e(c,{title:Za}),e(v,null,He({title:l(()=>[y(r(Za))]),"right-button":l(()=>[e(D,{class:"q-ml-sm",icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:m[0]||(m[0]=_=>o.value=!o.value)},null,8,["icon"])]),default:l(()=>[t("div",qd,[t("div",Cd,[e(Wl,{dashboardData:u.value},null,8,["dashboardData"])]),e(Jl,{dashboardData:u.value},null,8,["dashboardData"]),e(Gl,{dashboardData:u.value},null,8,["dashboardData"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar"},{default:l(()=>[t("div",Vd,[e(de,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:s.value,"onUpdate:modelValue":[m[1]||(m[1]=_=>s.value=_),b],options:i.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},Pd=Object.freeze(Object.defineProperty({__proto__:null,default:Td},Symbol.toStringTag,{value:"Module"})),Od={class:"row"},Id={class:"row q-col-gutter-sm"},Rd={class:"col-sm-6 col-xs-12"},Dd={class:"col-sm-6 col-xs-12"},Ud={class:"col-md-3 col-sm-6 col-xs-12"},Ad={class:"col-md-3 col-sm-6 col-xs-12"},jd={class:"col-md-3 col-sm-6 col-xs-12"},Ed={class:"col-md-3 col-sm-6 col-xs-12"};const Md={__name:"SummaryCard",setup(d){const n=fe(),u=(o,s)=>{const b={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...s};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(b)),X.visit(o,{data:b})};return(o,s)=>(p(),h("div",Od,[e(pe,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:l(()=>[e(te,{class:"q-pa-none"},{default:l(()=>[t("div",Id,[t("div",Rd,[e(ae,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:s[0]||(s[0]=i=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(N,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(V,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[y(r(a(n).props.data.active_customer_count),1)]),_:1}),e(ye,null,{default:l(()=>s[5]||(s[5]=[y("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",Dd,[e(ae,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:s[1]||(s[1]=i=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(N,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(V,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[y(r(o.$page.props.data.active_user_count),1)]),_:1}),e(ye,null,{default:l(()=>s[6]||(s[6]=[y("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",Ud,[e(ae,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(N,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-weight-bold"},{default:l(()=>[y(" Rp. "+r(a(L)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(ye,null,{default:l(()=>s[7]||(s[7]=[y("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",Ad,[e(ae,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(N,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-weight-bold"},{default:l(()=>[y(" Rp. "+r(a(L)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(ye,null,{default:l(()=>s[8]||(s[8]=[y("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",jd,[e(ae,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(N,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-weight-bold"},{default:l(()=>[y(" Rp. "+r(a(L)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(ye,null,{default:l(()=>s[9]||(s[9]=[y("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",Ed,[e(ae,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(N,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(ye,{class:"text-white text-weight-bold"},{default:l(()=>[y(" Rp. "+r(a(L)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(ye,null,{default:l(()=>s[10]||(s[10]=[y("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},Nd=Object.freeze(Object.defineProperty({__proto__:null,default:Md},Symbol.toStringTag,{value:"Module"})),Bd={class:"detail"},Xl={__name:"MainInfoTab",setup(d){const n=fe();return(u,o)=>(p(),h("table",Bd,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.FINANCE_ACCOUNT_TYPES[a(n).props.data.type]),1)]),a(n).props.data.type=="bank"?(p(),h(W,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(L)(a(n).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},zd=Object.freeze(Object.defineProperty({__proto__:null,default:Xl},Symbol.toStringTag,{value:"Module"})),Fd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ld={class:"flex q-gutter-sm"},Hd={key:0},Zl={__name:"HistoryTab",setup(d){const n=fe(),u=xe(),o=q(null),s=q([]),i=q(!0),b=Oe({...De()}),f=Ge(null,117),m=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),c=[{name:"id",label:"ID",field:"id",align:"left"},{name:"datetime",label:"Waktu",field:"datetime",align:"left"},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],v=G(()=>u.screen.gt.sm?c:c.filter(g=>g.name==="id"));he(()=>{_()});const _=(g=null)=>Ue({pagination:m,filter:b,props:g,rows:s,url:route("admin.finance-transaction.data",{filter:{account_id:n.props.data.id}}),loading:i,tableRef:o});return(g,S)=>(p(),P(Pe,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:Me({height:a(f)}),color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",pagination:m.value,"onUpdate:pagination":S[0]||(S[0]=O=>m.value=O),filter:b.search,loading:i.value,columns:v.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({message:O,filter:w})=>[t("div",Fd,[t("span",null,r(O)+" "+r(w?" with term "+w:""),1)])]),body:l(O=>[e(Ce,{props:O},{default:l(()=>[e(Y,{key:"id",props:O},{default:l(()=>[t("div",Ld,[t("div",null,[a(u).screen.lt.md?(p(),P(V,{key:0,name:"tag",class:"inline-icon"})):k("",!0),y(" "+r(O.row.formatted_id),1)])]),a(u).screen.lt.md?(p(),h(W,{key:0},[t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),y(" "+r(a(ve)(O.row.datetime)),1)]),O.row.creator?(p(),h("div",Hd,[e(V,{name:"person",class:"inline-icon"}),y(" "+r(O.row.creator.username),1)])):k("",!0),t("div",{class:$e([O.row.amount>0?"text-green":"text-red","text-bold"])},[e(V,{class:"inline-icon",name:"money"}),y(" "+r(a(Nt)(O.row.amount))+"Rp. "+r(a(L)(Math.abs(O.row.amount))),1)],2),t("div",null,[e(ut,{color:O.row.amount>0?"green":"red"},{default:l(()=>[y(r(g.$CONSTANTS.FINANCE_TRANSACTION_TYPES[O.row.type]),1)]),_:2},1032,["color"])]),e(ke,{text:O.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"datetime",props:O},{default:l(()=>[y(r(a(ve)(O.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:O},{default:l(()=>[e(ut,{color:O.row.amount>0?"green":"red"},{default:l(()=>[y(r(g.$CONSTANTS.FINANCE_TRANSACTION_TYPES[O.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:O,class:$e(O.row.amount>0?"text-green":"text-red")},{default:l(()=>[y(r(a(Nt)(O.row.amount)+a(L)(Math.abs(O.row.amount))),1)]),_:2},1032,["props","class"]),e(Y,{key:"notes",props:O},{default:l(()=>[e(ke,{text:O.row.notes,icon:g.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},Kd=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"})),Yd={class:"q-gutter-sm"},Qd={class:"q-gutter-sm"},Wd={class:"col q-pa-xs"},Jd={class:"row"},el="Rincian Akun",Gd={__name:"Detail",setup(d){const n=fe(),u=q("main");return(o,s)=>{const i=Q("i-head"),b=Q("authenticated-layout");return p(),h(W,null,[e(i,{title:el}),e(b,null,{title:l(()=>[y(r(el))]),"left-button":l(()=>[t("div",Yd,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=f=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":l(()=>[t("div",Qd,[o.$can("admin.finance-account.edit")?(p(),P(D,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:s[1]||(s[1]=f=>a(X).get(o.route("admin.finance-account.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Wd,[t("div",Jd,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(At,{modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=f=>u.value=f),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(nt,{name:"main",label:"Info Akun"}),e(nt,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(jt,{modelValue:u.value,"onUpdate:modelValue":s[3]||(s[3]=f=>u.value=f),animated:""},{default:l(()=>[e(st,{name:"main"},{default:l(()=>[e(Xl)]),_:1}),e(st,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(Zl)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Xd=Object.freeze(Object.defineProperty({__proto__:null,default:Gd},Symbol.toStringTag,{value:"Module"})),Zd={style:{"margin-left":"-10px"}},qt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(d){return(n,u)=>(p(),h("div",Zd,[e(la,{class:"full-width q-pl-none","model-value":d.modelValue,"onUpdate:modelValue":u[0]||(u[0]=o=>n.$emit("update:modelValue",o)),disable:d.disable,label:d.label},null,8,["model-value","disable","label"])]))}},eu={class:"q-gutter-sm"},tu={class:"col col-md-6 q-pa-xs"},au={__name:"Editor",setup(d){const n=fe(),u=(n.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Le({id:n.props.data.id,name:n.props.data.name,type:n.props.data.type,bank:n.props.data.bank,number:n.props.data.number,holder:n.props.data.holder,balance:parseFloat(n.props.data.balance),active:!!n.props.data.active,has_wallet_access:!!n.props.data.has_wallet_access,show_in_pos_payment:!!n.props.data.show_in_pos_payment,show_in_purchasing_payment:!!n.props.data.show_in_purchasing_payment,notes:n.props.data.notes}),s=Ze(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),i=()=>Je({form:o,url:route("admin.finance-account.save")}),b=f=>{f==="cashier_cash"&&(o.show_in_pos_payment=!0)};return he(()=>{b(o.type)}),Ae(()=>o.type,f=>{b(f)}),(f,m)=>{const c=Q("i-head"),v=Q("authenticated-layout");return p(),h(W,null,[e(c,{title:u}),e(v,null,{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",eu,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>f.$inertia.get(f.route("admin.finance-account.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",tu,[e(ze,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[1]||(m[1]=_=>a(o).id=_)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":m[2]||(m[2]=_=>a(o).name=_),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{modelValue:a(o).type,"onUpdate:modelValue":m[3]||(m[3]=_=>a(o).type=_),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"",error:!!a(o).errors.type,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),a(o).type=="bank"?(p(),h(W,{key:0},[e(oe,{modelValue:a(o).bank,"onUpdate:modelValue":m[4]||(m[4]=_=>a(o).bank=_),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!a(o).errors.bank,disable:a(o).processing,"error-message":a(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).number,"onUpdate:modelValue":m[5]||(m[5]=_=>a(o).number=_),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!a(o).errors.number,disable:a(o).processing,"error-message":a(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).holder,"onUpdate:modelValue":m[6]||(m[6]=_=>a(o).holder=_),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!a(o).errors.holder,disable:a(o).processing,"error-message":a(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Re,{modelValue:a(o).balance,"onUpdate:modelValue":m[7]||(m[7]=_=>a(o).balance=_),label:"Saldo",lazyRules:"",disable:a(o).processing,"allow-negative":!0,error:!!a(o).errors.balance,errorMessage:a(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(o).notes,"onUpdate:modelValue":m[8]||(m[8]=_=>a(o).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(qt,{modelValue:a(o).active,"onUpdate:modelValue":m[9]||(m[9]=_=>a(o).active=_),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),m[14]||(m[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(qt,{modelValue:a(o).show_in_pos_payment,"onUpdate:modelValue":m[10]||(m[10]=_=>a(o).show_in_pos_payment=_),disable:a(o).processing||a(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(qt,{modelValue:a(o).show_in_purchasing_payment,"onUpdate:modelValue":m[11]||(m[11]=_=>a(o).show_in_purchasing_payment=_),disable:a(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(qt,{modelValue:a(o).has_wallet_access,"onUpdate:modelValue":m[12]||(m[12]=_=>a(o).has_wallet_access=_),disable:a(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:m[13]||(m[13]=_=>a(X).get(f.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},lu=Object.freeze(Object.defineProperty({__proto__:null,default:au},Symbol.toStringTag,{value:"Module"})),ou={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},nu={class:"q-pa-xs"},su={class:"q-my-sm text-subtitle"},ru={class:"text-bold text-grey-8"},iu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},du={class:"text-bold text-grey-9"},uu={class:"text-grey-9"},mu={key:0},cu={key:1},pu={key:0},fu={class:"flex justify-end"},tl="Akun Kas",gu={__name:"Index",setup(d){const n=fe(),u=xe(),o=q(!1),s=q([]),i=q(null),b=q(null),f=Ge(b,117),m=q(!0),c=Oe({search:"",status:"active",type:"all",...De()}),v=n.props.totalBalance,_=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],S=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],O=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];he(()=>{I()});const w=F=>lt({message:`Hapus Akun ${F.name}?`,url:route("admin.finance-account.delete",F.id),fetchItemsCallback:I,loading:m}),I=(F=null)=>{Ue({pagination:_,filter:c,props:F,rows:s,url:route("admin.finance-account.data"),loading:m,tableRef:i})},C=()=>I(),x=F=>X.get(route("admin.finance-account.detail",{id:F.id})),U=G(()=>u.screen.gt.sm?g:g.filter(F=>F.name==="name"||F.name==="action"));return(F,T)=>{const R=Q("i-head"),B=Q("authenticated-layout");return p(),h(W,null,[e(R,{title:tl}),e(B,null,He({title:l(()=>[y(r(tl))]),"right-button":l(()=>[e(D,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=M=>o.value=!o.value)},null,8,["icon"]),F.$can("admin.finance-account.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:T[1]||(T[1]=M=>a(X).get(F.route("admin.finance-account.add")))})):k("",!0)]),default:l(()=>[t("div",nu,[e(pe,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:l(()=>[t("div",su,[T[7]||(T[7]=y(" Total Saldo Akun Aktif: ")),t("span",ru,"Rp. "+r(a(L)(a(v))),1)])]),_:1}),e(Pe,{ref_key:"tableRef",ref:i,class:"full-height-table",style:Me({height:a(f)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":T[6]||(T[6]=M=>_.value=M),filter:c.search,loading:m.value,columns:U.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:I,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:M,message:E,filter:$})=>[t("div",iu,[t("span",null,r(E)+" "+r($?" with term "+$:""),1)])]),body:l(M=>[e(Ce,{props:M,class:$e([M.row.active?"":"bg-red-1","cursor-pointer"]),onClick:E=>x(M.row)},{default:l(()=>[e(Y,{key:"name",props:M,class:"wrap-column"},{default:l(()=>[t("div",du,r(M.row.name),1),t("div",uu,[M.row.type=="bank"?(p(),h("div",mu,[e(V,{name:"wallet",class:"inline-icon"}),y(" Rekening "+r(M.row.bank??"-")+" "+r(M.row.number??"-")+" a.n. "+r(M.row.holder??"-"),1)])):k("",!0),M.row.notes?(p(),h("div",cu,[e(V,{name:"notes"}),y(" "+r(M.row.notes),1)])):k("",!0)]),a(u).screen.lt.md?(p(),h("div",pu,[e(V,{name:"money",class:"inline-icon"}),y(" Rp. "+r(a(L)(M.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"type",props:M},{default:l(()=>[y(r(F.$CONSTANTS.FINANCE_ACCOUNT_TYPES[M.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:M},{default:l(()=>[y(r(a(L)(M.row.balance)),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:M},{default:l(()=>[t("div",fu,[F.$can("admin.finance-account.add")||F.$can("admin.finance-account.edit")||F.$can("admin.finance-account.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:T[5]||(T[5]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[F.$can("admin.finance-account.add")?ee((p(),P(ae,{key:0,clickable:"",onClick:J(E=>a(X).get(F.route("admin.finance-account.duplicate",M.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"file_copy"})]),_:1}),e(N,null,{default:l(()=>T[8]||(T[8]=[y(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),F.$can("admin.finance-account.edit")?ee((p(),P(ae,{key:1,clickable:"",onClick:J(E=>a(X).get(F.route("admin.finance-account.edit",M.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>T[9]||(T[9]=[y("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),F.$can("admin.finance-account.delete")?ee((p(),P(ae,{key:2,onClick:J(E=>w(M.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>T[10]||(T[10]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",ou,[e(de,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:c.type,"onUpdate:modelValue":[T[2]||(T[2]=M=>c.type=M),C],options:O,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[T[3]||(T[3]=M=>c.status=M),C],options:S,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":T[4]||(T[4]=M=>c.search=M),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},bu=Object.freeze(Object.defineProperty({__proto__:null,default:gu},Symbol.toStringTag,{value:"Module"})),vu={class:"q-gutter-sm"},yu={class:"col col-md-6 q-pa-xs"},_u={class:"row"},ku={class:"detail"},wu={key:0},hu={key:1},$u={key:2},xu={key:3},Su={colspan:"3",class:"bg-white"},al="Rincian Transaksi",Vu={__name:"Detail",setup(d){const n=fe();return(u,o)=>{const s=Q("i-head"),i=Q("authenticated-layout");return p(),h(W,null,[e(s,{title:al}),e(i,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",vu,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.finance-transaction.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(al))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",yu,[t("div",_u,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",ku,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.datetime)),1)]),a(n).props.data.account?(p(),h("tr",wu,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[y(r(a(n).props.data.account.name)+" ",1),a(n).props.data.account.type==="bank"?(p(),h(W,{key:0},[y(" Rek "+r(a(n).props.data.account.bank)+" an "+r(a(n).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),y(" "+r(a(n).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),a(n).props.data.type?(p(),h("tr",hu,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.FINANCE_TRANSACTION_TYPES[a(n).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(Nt)(a(n).props.data.amount))+" Rp. "+r(a(L)(Math.abs(a(n).props.data.amount))),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(p(),h("tr",$u,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(p(),h("tr",xu,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(p(),h(W,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Su,[e(Ht,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Me([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},qu=Object.freeze(Object.defineProperty({__proto__:null,default:Vu},Symbol.toStringTag,{value:"Module"})),Cu={class:"q-gutter-sm"},Tu={class:"col col-md-6 q-pa-xs"},Pu={__name:"Editor",setup(d){var f;const n=fe(),u=(n.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=n.props.accounts.map(m=>({label:m.name,value:m.id})),s=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],i=Le({id:n.props.data.id,account_id:n.props.data.account_id,to_account_id:n.props.data.to_account_id??null,type:n.props.data.type,datetime:new Date(n.props.data.datetime),notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((f=n.props.data)==null?void 0:f.image_path)??"",image:null}),b=()=>{Qt(i,{datetime:"YYYY-MM-DD HH:mm:ss"}),Je({form:i,url:route("admin.finance-transaction.save")})};return(m,c)=>{const v=Q("i-head"),_=Q("authenticated-layout");return p(),h(W,null,[e(v,{title:u}),e(_,null,{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",Cu,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=g=>m.$inertia.get(m.route("admin.finance-transaction.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Tu,[e(ze,{class:"row",onSubmit:J(b,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=g=>a(i).id=g)},null,512),[[dt,a(i).id]]),e(Bt,{modelValue:a(i).datetime,"onUpdate:modelValue":c[2]||(c[2]=g=>a(i).datetime=g),label:"Waktu",error:!!a(i).errors.datetime,disable:a(i).processing,errorMessage:a(i).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{autofocus:"",modelValue:a(i).type,"onUpdate:modelValue":c[3]||(c[3]=g=>a(i).type=g),label:"Jenis Transaksi",options:s,"map-options":"","emit-value":"",error:!!a(i).errors.type,disable:a(i).processing,errorMessage:a(i).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{class:"custom-select",modelValue:a(i).account_id,"onUpdate:modelValue":c[4]||(c[4]=g=>a(i).account_id=g),label:a(i).type=="transfer"?"Akun Asal":"Akun",options:a(o),"map-options":"","emit-value":"",errorMessage:a(i).errors.account_id,error:!!a(i).errors.account_id,disable:a(i).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),a(i).type=="transfer"?(p(),P(de,{key:0,class:"custom-select",modelValue:a(i).to_account_id,"onUpdate:modelValue":c[5]||(c[5]=g=>a(i).to_account_id=g),label:"Akun Tujuan",options:a(o),"map-options":"","emit-value":"",errorMessage:a(i).errors.to_account_id,error:!!a(i).errors.to_account_id,disable:a(i).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Re,{modelValue:a(i).amount,"onUpdate:modelValue":c[6]||(c[6]=g=>a(i).amount=g),label:"Jumlah",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.amount,errorMessage:a(i).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(i).notes,"onUpdate:modelValue":c[7]||(c[7]=g=>a(i).notes=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.notes,"error-message":a(i).errors.notes,rules:[g=>g&&g.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ha,{modelValue:a(i).image,"onUpdate:modelValue":c[8]||(c[8]=g=>a(i).image=g),"initial-image-path":a(i).image_path,disabled:a(i).processing,error:!!a(i).errors.image||!!a(i).errors.image_path,"error-message":a(i).errors.image||a(i).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:c[9]||(c[9]=g=>a(X).get(m.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ou=Object.freeze(Object.defineProperty({__proto__:null,default:Pu},Symbol.toStringTag,{value:"Module"})),Iu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ru={class:"q-pa-xs"},Du={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Uu={class:"text-grey-8"},Au={class:"text-bold text-grey-8"},ju={class:"flex justify-end no-wrap"},ll="Transaksi Kas",Eu={__name:"Index",setup(d){const n=fe(),u=xe(),o=q(!1),s=q([]),i=q(!0),b=q(null),f=q(null),m=Ge(f),c=Kt(),v=Yt(),_=[{label:"Semua",value:"all"},...n.props.accounts.map(E=>({label:E.name,value:E.id}))],g=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...Rt(c-2,c-1).reverse()],S=[{value:"all",label:"Semua Bulan"},...Dt()],O=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],w=Oe({search:"",type:"all",account_id:"all",year:c,month:v,...De()}),I=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:u.screen.lt.md?"Item":"Kode Trx",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{U()});const x=E=>lt({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${E.formatted_id}?`,url:route("admin.finance-transaction.delete",E.id),fetchItemsCallback:U,loading:i}),U=(E=null)=>{Ue({pagination:I,filter:w,props:E,rows:s,url:route("admin.finance-transaction.data"),loading:i,tableRef:b})},F=()=>{U()},T=G(()=>u.screen.gt.sm?C:C.filter(E=>E.name==="id"||E.name==="action"));Ae(()=>w.year,E=>{E===null&&(w.month=null)});const R=q(null),B=q(!1),M=E=>{R.value=E,B.value=!0};return(E,$)=>{const K=Q("i-head"),se=Q("authenticated-layout");return p(),h(W,null,[e(K,{title:ll}),e(se,null,He({title:l(()=>[y(r(ll))]),"right-button":l(()=>[e(D,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=j=>o.value=!o.value)},null,8,["icon"]),E.$can("admin.finance-transaction.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=j=>a(X).get(E.route("admin.finance-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",Ru,[e(Pe,{ref_key:"tableRef",ref:b,style:Me({height:a(m)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:I.value,"onUpdate:pagination":$[8]||($[8]=j=>I.value=j),filter:w.search,loading:i.value,columns:T.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:U,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:j,message:A,filter:Z})=>[t("div",Du,[t("span",null,r(A)+" "+r(Z?" with term "+Z:""),1)])]),body:l(j=>[e(Ce,{props:j,class:"cursor-pointer",onClick:J(A=>a(X).get(E.route("admin.finance-transaction.detail",{id:j.row.id})),["stop"])},{default:l(()=>[e(Y,{key:"id",props:j},{default:l(()=>[t("div",null,[a(u).screen.lt.md?(p(),P(V,{key:0,class:"inline-icon",name:"tag"})):k("",!0),y(" "+r(j.row.formatted_id),1)]),a(u).screen.lt.md?(p(),h(W,{key:0},[t("div",Uu,[e(V,{class:"inline-icon",name:"calendar_clock"}),y(" "+r(a(ve)(j.row.datetime)),1)]),t("div",Au,[e(V,{name:"wallet",class:"inline-icon"}),y(" "+r(j.row.account.name),1)]),t("div",{class:$e(["text-bold",j.row.amount<0?"text-red":"text-green"])},[e(V,{name:"money",class:"inline-icon"}),y(" "+r(a(Nt)(j.row.amount)+"Rp."+a(L)(Math.abs(j.row.amount))),1)],2),j.row.notes?(p(),P(ke,{key:0,icon:"notes",text:j.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(ut,{color:j.row.amount>0?"green":"red"},{default:l(()=>[y(r(j.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"datetime",props:j,class:"wrap-column"},{default:l(()=>[y(r(a(ve)(j.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"account",props:j},{default:l(()=>{var A;return[y(r((A=j.row.account)==null?void 0:A.name),1)]}),_:2},1032,["props"]),e(Y,{key:"type",props:j},{default:l(()=>[y(r(E.$CONSTANTS.FINANCE_TRANSACTION_TYPES[j.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"amount",props:j,style:{"text-align":"right"}},{default:l(()=>[y(r(a(na)(j.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:j,class:"wrap-column"},{default:l(()=>[y(r(j.row.notes),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:j},{default:l(()=>[t("div",ju,[e(D,{icon:"image",color:"primary",dense:"",flat:"",disable:j.row.image_path===null||j.row.image_path==="",onClick:J(A=>M(j.row.image_path),["stop"])},{default:l(()=>[j.row.image_path!=null?(p(),P(sa,{key:0},{default:l(()=>$[10]||($[10]=[y(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),E.$can("admin.finance-transaction.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[7]||($[7]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[E.$can("admin.finance-transaction.delete")?ee((p(),P(ae,{key:0,onClick:J(A=>x(j.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>$[11]||($[11]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ra,{modelValue:B.value,"onUpdate:modelValue":$[9]||($[9]=j=>B.value=j),imageUrl:`/${R.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:l(()=>[t("div",Iu,[e(de,{modelValue:w.year,"onUpdate:modelValue":[$[2]||($[2]=j=>w.year=j),F],options:g,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(p(),P(de,{key:0,modelValue:w.month,"onUpdate:modelValue":[$[3]||($[3]=j=>w.month=j),F],options:S,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:w.type,"onUpdate:modelValue":[$[4]||($[4]=j=>w.type=j),F],options:O,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:w.account_id,"onUpdate:modelValue":[$[5]||($[5]=j=>w.account_id=j),F],label:"Akun",options:_,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":$[6]||($[6]=j=>w.search=j),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Mu=Object.freeze(Object.defineProperty({__proto__:null,default:Eu},Symbol.toStringTag,{value:"Module"})),Nu={class:"q-gutter-sm"},Bu={class:"col col-md-6 q-pa-xs"},zu={__name:"Editor",setup(d){const n=fe(),u=(n.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Le({id:n.props.data.id,name:n.props.data.name,description:n.props.data.description}),s=()=>Je({form:o,url:route("admin.operational-cost-category.save")});return(i,b)=>{const f=Q("i-head"),m=Q("authenticated-layout");return p(),h(W,null,[e(f,{title:u}),e(m,null,{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",Nu,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=c=>i.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Bu,[e(ze,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=c=>a(o).id=c)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":b[2]||(b[2]=c=>a(o).name=c),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[c=>c&&c.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).description,"onUpdate:modelValue":b[3]||(b[3]=c=>a(o).description=c),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:b[4]||(b[4]=c=>a(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Fu=Object.freeze(Object.defineProperty({__proto__:null,default:zu},Symbol.toStringTag,{value:"Module"})),Lu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Hu={class:"q-pa-xs"},Ku={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Yu={key:0,class:"text-grey-8"},Qu={class:"flex justify-end"},ol="Kategori Biaya Operasional",Wu={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=Oe({search:"",...De()}),c=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{g()});const _=O=>lt({message:`Hapus Kategori Biaya ${O.name}?`,url:route("admin.operational-cost-category.delete",O.id),fetchItemsCallback:g,loading:s}),g=(O=null)=>{Ue({pagination:c,filter:m,props:O,rows:o,url:route("admin.operational-cost-category.data"),loading:s,tableRef:i})},S=G(()=>n.screen.gt.sm?v:v.filter(O=>O.name==="name"||O.name==="action"));return(O,w)=>{const I=Q("i-head"),C=Q("authenticated-layout");return p(),h(W,null,[e(I,{title:ol}),e(C,null,He({title:l(()=>[y(r(ol))]),"right-button":l(()=>[e(D,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=x=>u.value=!u.value)},null,8,["icon"]),O.$can("admin.operational-cost-category.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=x=>a(X).get(O.route("admin.operational-cost-category.add")))})):k("",!0)]),default:l(()=>[t("div",Hu,[e(Pe,{ref_key:"tableRef",ref:i,class:"full-height-table",style:Me({height:a(f)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":w[4]||(w[4]=x=>c.value=x),filter:m.search,loading:s.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:U,filter:F})=>[t("div",Ku,[t("span",null,r(U)+" "+r(F?" with term "+F:""),1)])]),body:l(x=>[e(Ce,{props:x},{default:l(()=>[e(Y,{key:"name",props:x,class:"wrap-column"},{default:l(()=>[y(r(x.row.name)+" ",1),a(n).screen.gt.sm?k("",!0):(p(),h(W,{key:0},[x.row.description?(p(),h("div",Yu,[e(V,{name:"description"}),y(" "+r(x.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"description",props:x,class:"wrap-column"},{default:l(()=>[y(r(x.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:x},{default:l(()=>[t("div",Qu,[O.$can("admin.operational-cost-category.add")||O.$can("admin.operational-cost-category.edit")||O.$can("admin.operational-cost-category.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[3]||(w[3]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[O.$can("admin.operational-cost-category.add")?ee((p(),P(ae,{key:0,clickable:"",onClick:J(U=>a(X).get(O.route("admin.operational-cost-category.duplicate",x.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"file_copy"})]),_:1}),e(N,null,{default:l(()=>w[5]||(w[5]=[y("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),O.$can("admin.operational-cost-category.edit")?ee((p(),P(ae,{key:1,clickable:"",onClick:J(U=>a(X).get(O.route("admin.operational-cost-category.edit",x.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>w[6]||(w[6]=[y("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),O.$can("admin.operational-cost-category.delete")?ee((p(),P(ae,{key:2,onClick:J(U=>_(x.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>w[7]||(w[7]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Lu,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":w[2]||(w[2]=x=>m.search=x),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ju=Object.freeze(Object.defineProperty({__proto__:null,default:Wu},Symbol.toStringTag,{value:"Module"})),Gu={class:"q-gutter-sm"},Xu={class:"col col-md-6 q-pa-xs"},Zu={class:"row"},em={class:"detail"},tm={key:0},am={key:1},lm={key:2},om={key:3},nm={colspan:"3",class:"bg-white"},nl="Rincian Biaya Operasional",sm={__name:"Detail",setup(d){const n=fe();return(u,o)=>{const s=Q("i-head"),i=Q("authenticated-layout");return p(),h(W,null,[e(s,{title:nl}),e(i,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Gu,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.operational-cost.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(nl))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Xu,[t("div",Zu,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[o[21]||(o[21]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",em,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(Lt)(a(n).props.data.date)),1)]),a(n).props.data.finance_account?(p(),h("tr",tm,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[y(r(a(n).props.data.finance_account.name)+" ",1),a(n).props.data.finance_account.type==="bank"?(p(),h(W,{key:0},[y(" Rek "+r(a(n).props.data.finance_account.bank)+" an "+r(a(n).props.data.finance_account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),y(" "+r(a(n).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),a(n).props.data.category?(p(),h("tr",am,[o[8]||(o[8]=t("td",null,"Kategori",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.category.name),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Deskripsi",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.description),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Jumlah",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(L)(a(n).props.data.amount)),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(p(),h("tr",lm,[o[16]||(o[16]=t("td",null,"Dibuat",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(p(),h("tr",om,[o[18]||(o[18]=t("td",null,"Diperbarui",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(p(),h(W,{key:4},[o[20]||(o[20]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",nm,[e(Ht,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Me([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},rm=Object.freeze(Object.defineProperty({__proto__:null,default:sm},Symbol.toStringTag,{value:"Module"})),im={class:"row items-center justify-end"},dm={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(d,{emit:n}){const u=d,o=n,s=q(""),i=q(""),b=c=>{let v=!0;const _=u.minDate?ot.formatDate(u.minDate,"YYYY/MM/DD"):null,g=u.maxDate?ot.formatDate(u.maxDate,"YYYY/MM/DD"):null;return _&&(v=v&&ot.isBetweenDates(c,_,"2999/01/01",{inclusiveFrom:!0})),g&&(v=v&&ot.isBetweenDates(c,"1900/01/01",g,{inclusiveTo:!0})),v},f=G(()=>[c=>!!c||"Tanggal harus diisi",c=>{const v=ot.extractDate(c,u.displayFormat);if(!v)return"Format tanggal tidak valid";v.setHours(0,0,0,0);const _=u.minDate?new Date(u.minDate):null;_&&_.setHours(0,0,0,0);const g=u.maxDate?new Date(u.maxDate):null;return g&&g.setHours(0,0,0,0),_&&v<_?`Tanggal tidak boleh kurang dari ${ot.formatDate(u.minDate,u.displayFormat)}`:g&&v>g?`Tanggal tidak boleh lebih dari ${ot.formatDate(u.maxDate,u.displayFormat)}`:(o("update:modelValue",v),!0)}]);Ae(()=>u.modelValue,c=>{c instanceof Date?(i.value=ot.formatDate(c,"YYYY/MM/DD"),s.value=ot.formatDate(c,u.displayFormat)):(i.value="",s.value="")},{immediate:!0});const m=c=>{const v=c!==null?new Date(c):null;o("update:modelValue",v),s.value=v?ot.formatDate(v,u.displayFormat):null};return(c,v)=>(p(),P(oe,{modelValue:s.value,"onUpdate:modelValue":v[1]||(v[1]=_=>s.value=_),label:u.label,readonly:u.readonly,disable:u.disable,error:u.error,"error-message":u.errorMessage,mask:u.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:f.value},{append:l(()=>[e(V,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(gn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(bn,{modelValue:i.value,"onUpdate:modelValue":[v[0]||(v[0]=_=>i.value=_),m],options:b},{default:l(()=>[t("div",im,[ee(e(D,{label:"Close",color:"primary",flat:""},null,512),[[ue]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},$a=wt(dm,[["__scopeId","data-v-38faf9a9"]]);function eo(d,n=!1){const u=d.map(b=>({value:b.id,label:b.name})),o=n?[{value:"all",label:"Semua"},...u]:u,s=q([...o]);return{filteredCostCategories:s,filterCostCategory:(b,f)=>{const m=b.toLowerCase();f(()=>{s.value=o.filter(c=>c.label.toLowerCase().includes(m))})},costCategoryOptions:o}}const um={class:"q-gutter-sm"},mm={class:"col col-md-6 q-pa-xs"},cm={__name:"Editor",setup(d){var _;const n=fe(),u=(n.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=eo(n.props.categories),s=n.props.finance_accounts.map(g=>({label:g.name,value:g.id})),i=q(o),b=q([...i.value]),f=Le({id:n.props.data.id,finance_account_id:n.props.data.finance_account_id??null,category_id:n.props.data.category_id??null,date:new Date(n.props.data.date),description:n.props.data.description,notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((_=n.props.data)==null?void 0:_.image_path)??null,image:null}),m=()=>{Qt(f,{date:"YYYY-MM-DD"}),Je({form:f,url:route("admin.operational-cost.save")})},c=(g,S)=>{S(()=>{b.value=i.value.filter(O=>O.label.toLowerCase().includes(g.toLowerCase()))})},v=()=>{f.image_path=null};return(g,S)=>{const O=Q("i-head"),w=Q("authenticated-layout");return p(),h(W,null,[e(O,{title:u}),e(w,null,{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",um,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:S[0]||(S[0]=I=>g.$inertia.get(g.route("admin.operational-cost.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",mm,[e(ze,{class:"row",onSubmit:J(m,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":S[1]||(S[1]=I=>a(f).id=I)},null,512),[[dt,a(f).id]]),e(de,{autofocus:"",modelValue:a(f).category_id,"onUpdate:modelValue":S[2]||(S[2]=I=>a(f).category_id=I),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:b.value,"map-options":"","emit-value":"",onFilter:c,error:!!a(f).errors.category_id,disable:a(f).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(N,null,{default:l(()=>S[10]||(S[10]=[y("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e($a,{modelValue:a(f).date,"onUpdate:modelValue":S[3]||(S[3]=I=>a(f).date=I),label:"Tanggal",error:!!a(f).errors.date,disable:a(f).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(oe,{modelValue:a(f).description,"onUpdate:modelValue":S[4]||(S[4]=I=>a(f).description=I),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!a(f).errors.description,disable:a(f).processing,"error-message":a(f).errors.description,rules:[I=>I&&I.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Re,{modelValue:a(f).amount,"onUpdate:modelValue":S[5]||(S[5]=I=>a(f).amount=I),label:"Jumlah",lazyRules:"",disable:a(f).processing,error:!!a(f).errors.amount,errorMessage:a(f).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(de,{class:"custom-select",modelValue:a(f).finance_account_id,"onUpdate:modelValue":S[6]||(S[6]=I=>a(f).finance_account_id=I),label:"Sumber Dana",options:a(s),"map-options":"","emit-value":"",clearable:"",errorMessage:a(f).errors.finance_account_id,error:!!a(f).errors.finance_account_id,disable:a(f).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(oe,{modelValue:a(f).notes,"onUpdate:modelValue":S[7]||(S[7]=I=>a(f).notes=I),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(f).processing,error:!!a(f).errors.notes,"error-message":a(f).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ha,{modelValue:a(f).image,"onUpdate:modelValue":S[8]||(S[8]=I=>a(f).image=I),"initial-image-path":a(f).image_path,disabled:a(f).processing,error:!!a(f).errors.image||!!a(f).errors.image_path,"error-message":a(f).errors.image||a(f).errors.image_path,onImageCleared:v},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(f).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(f).processing,onClick:S[9]||(S[9]=I=>a(X).get(g.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},pm=Object.freeze(Object.defineProperty({__proto__:null,default:cm},Symbol.toStringTag,{value:"Module"})),fm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},gm={class:"q-pa-xs"},bm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},vm={key:0},ym={key:1},_m={key:0},km={class:"flex justify-end no-wrap"},sl="Biaya Operasional",wm={__name:"Index",setup(d){const n=fe(),u=xe(),o=q(!1),s=q(null),i=q(null),b=Ge(i),f=q(null),m=q(!1),c=q([]),v=q(!0),_=new Date().getFullYear(),g=new Date().getMonth()+1,S=[{label:"Semua Tahun",value:null},{label:`${_}`,value:_},...Rt(_-2,_-1).reverse()],O=[{value:null,label:"Semua Bulan"},...Dt()],{costCategoryOptions:w}=eo(n.props.categories),I=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...w],{accountOptions:C}=vn(n.props.finance_accounts),x=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...C],U=Oe({search:"",category_id:"all",year:_,month:g,...De()}),F=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),T=[{name:"id",label:u.screen.lt.md?"Item":"ID",field:"id",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"account_id",label:"Akun",field:"account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{B()});const R=K=>lt({message:`Hapus Biaya ${K.description}?`,url:route("admin.operational-cost.delete",K.id),fetchItemsCallback:B,loading:v}),B=(K=null)=>{Ue({pagination:F,filter:U,props:K,rows:c,url:route("admin.operational-cost.data"),loading:v,tableRef:s})},M=()=>{B()},E=G(()=>u.screen.gt.sm?T:T.filter(K=>K.name==="id"||K.name==="action"));Ae(()=>U.year,K=>{K===null&&(U.month=null)});const $=K=>{f.value=K,m.value=!0};return(K,se)=>{const j=Q("i-head"),A=Q("authenticated-layout");return p(),h(W,null,[e(j,{title:sl}),e(A,null,He({title:l(()=>[y(r(sl))]),"right-button":l(()=>[e(D,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:se[0]||(se[0]=Z=>o.value=!o.value)},null,8,["icon"]),K.$can("admin.operational-cost.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:se[1]||(se[1]=Z=>a(X).get(K.route("admin.operational-cost.add")))})):k("",!0)]),default:l(()=>[t("div",gm,[e(Pe,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:F.value,"onUpdate:pagination":se[8]||(se[8]=Z=>F.value=Z),filter:U.search,loading:v.value,columns:E.value,rows:c.value,"rows-per-page-options":[10,25,50],style:Me({height:a(b)}),onRequest:B,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:Z,message:we,filter:le})=>[t("div",bm,[t("span",null,r(we)+" "+r(le?" with term "+le:""),1)])]),body:l(Z=>[e(Ce,{props:Z,class:"cursor-pointer",onClick:J(we=>a(X).get(K.route("admin.operational-cost.detail",{id:Z.row.id})),["stop"])},{default:l(()=>[e(Y,{key:"id",props:Z,class:"wrap-column"},{default:l(()=>[a(u).screen.gt.sm?k("",!0):(p(),h(W,{key:0},[y(" ID: ")],64)),y(" "+r(Z.row.id)+" ",1),a(u).screen.gt.sm?k("",!0):(p(),h(W,{key:1},[t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),y(" "+r(a(Lt)(Z.row.date)),1)]),Z.row.finance_account?(p(),h("div",vm,[e(V,{name:"wallet",class:"inline-icon"}),y(" "+r(Z.row.finance_account.name),1)])):k("",!0),Z.row.category?(p(),h("div",ym,[e(V,{name:"category",class:"inline-icon"}),y(" "+r(Z.row.category.name),1)])):k("",!0),e(ke,{icon:"description",text:Z.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(V,{name:"money",class:"inline-icon"}),y(" Rp. "+r(a(L)(Z.row.amount)),1)]),e(ke,{icon:"notes",text:Z.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(Y,{key:"date",props:Z,class:"wrap-column"},{default:l(()=>[y(r(a(Lt)(Z.row.date)),1)]),_:2},1032,["props"]),e(Y,{key:"account_id",props:Z,class:"wrap-column"},{default:l(()=>[y(r(Z.row.finance_account?Z.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(Y,{key:"category_id",props:Z},{default:l(()=>[Z.row.category?(p(),h("div",_m,r(Z.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"description",props:Z},{default:l(()=>[e(ke,{text:Z.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:Z},{default:l(()=>[y(r(a(L)(Z.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:Z},{default:l(()=>[e(ke,{text:Z.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:Z},{default:l(()=>[t("div",km,[e(D,{icon:"image",color:"primary",dense:"",flat:"",disable:Z.row.image_path===null||Z.row.image_path==="",onClick:J(we=>$(Z.row.image_path),["stop"])},{default:l(()=>[Z.row.image_path!=null?(p(),P(sa,{key:0},{default:l(()=>se[10]||(se[10]=[y(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),K.$can("admin.operational-cost.add")||K.$can("admin.operational-cost.edit")||K.$can("admin.operational-cost.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:se[7]||(se[7]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[K.$can("admin.operational-cost.add")?ee((p(),P(ae,{key:0,clickable:"",onClick:J(we=>a(X).get(K.route("admin.operational-cost.duplicate",Z.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"file_copy"})]),_:1}),e(N,null,{default:l(()=>se[11]||(se[11]=[y(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),K.$can("admin.operational-cost.edit")?ee((p(),P(ae,{key:1,clickable:"",onClick:J(we=>a(X).get(K.route("admin.operational-cost.edit",Z.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>se[12]||(se[12]=[y("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),K.$can("admin.operational-cost.delete")?ee((p(),P(ae,{key:2,onClick:J(we=>R(Z.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>se[13]||(se[13]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(ra,{modelValue:m.value,"onUpdate:modelValue":se[9]||(se[9]=Z=>m.value=Z),imageUrl:`/${f.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:i},{default:l(()=>[t("div",fm,[e(de,{modelValue:U.year,"onUpdate:modelValue":[se[2]||(se[2]=Z=>U.year=Z),M],options:S,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:U.month,"onUpdate:modelValue":[se[3]||(se[3]=Z=>U.month=Z),M],options:O,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:U.year===null},null,8,["modelValue","disable"]),e(de,{modelValue:U.category_id,"onUpdate:modelValue":[se[4]||(se[4]=Z=>U.category_id=Z),M],options:I,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:U.finance_account_id,"onUpdate:modelValue":[se[5]||(se[5]=Z=>U.finance_account_id=Z),M],options:x,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:U.search,"onUpdate:modelValue":se[6]||(se[6]=Z=>U.search=Z),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},hm=Object.freeze(Object.defineProperty({__proto__:null,default:wm},Symbol.toStringTag,{value:"Module"})),$m={class:"q-gutter-sm"},xm={class:"col col-md-6 q-pa-xs"},Sm={__name:"Editor",setup(d){const n=xe(),u=fe(),o=(u.props.data.id?"Edit":"Tambah")+" Kategori Produk",s=Le({id:u.props.data.id,name:u.props.data.name,description:u.props.data.description}),i=()=>Je({form:s,url:route("admin.product-category.save")});return(b,f)=>{const m=Q("i-head"),c=Q("authenticated-layout");return p(),h(W,null,[e(m,{title:o}),e(c,{"show-drawer-button":!a(n).screen.lt.md},He({title:l(()=>[y(r(o))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",xm,[e(ze,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=v=>a(s).id=v)},null,512),[[dt,a(s).id]]),e(oe,{autofocus:"",modelValue:a(s).name,"onUpdate:modelValue":f[2]||(f[2]=v=>a(s).name=v),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(s).errors.name,disable:a(s).processing,"error-message":a(s).errors.name,rules:[v=>v&&v.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(s).description,"onUpdate:modelValue":f[3]||(f[3]=v=>a(s).description=v),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.description,"error-message":a(s).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing,loading:a(s).processing},null,8,["disable","loading"]),e(D,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:f[4]||(f[4]=v=>a(s).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(n).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",$m,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=v=>b.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},Vm=Object.freeze(Object.defineProperty({__proto__:null,default:Sm},Symbol.toStringTag,{value:"Module"})),qm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Cm={class:"q-pa-xs"},Tm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Pm={key:0,class:"text-grey-8"},Om={class:"flex justify-end"},rl="Kategori Produk",Im={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=Oe({search:"",...De()}),c=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{g()});const _=O=>lt({message:`Hapus Kategori ${O.name}?`,url:route("admin.product-category.delete",O.id),fetchItemsCallback:g,loading:s}),g=(O=null)=>{Ue({pagination:c,filter:m,props:O,rows:o,url:route("admin.product-category.data"),loading:s,tableRef:i})},S=G(()=>n.screen.gt.sm?v:v.filter(O=>O.name==="name"||O.name==="action"));return(O,w)=>{const I=Q("i-head"),C=Q("authenticated-layout");return p(),h(W,null,[e(I,{title:rl}),e(C,null,He({title:l(()=>[y(r(rl))]),"right-button":l(()=>[e(D,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=x=>u.value=!u.value)},null,8,["icon"]),O.$can("admin.product-category.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=x=>a(X).get(O.route("admin.product-category.add")))})):k("",!0)]),default:l(()=>[t("div",Cm,[e(Pe,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":w[4]||(w[4]=x=>c.value=x),filter:m.search,loading:s.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Me({height:a(f)}),onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:U,filter:F})=>[t("div",Tm,[t("span",null,r(U)+" "+r(F?" with term "+F:""),1)])]),body:l(x=>[e(Ce,{props:x},{default:l(()=>[e(Y,{key:"name",props:x,class:"wrap-column"},{default:l(()=>[y(r(x.row.name)+" ",1),a(n).screen.gt.sm?k("",!0):(p(),h(W,{key:0},[x.row.description?(p(),h("div",Pm,[e(V,{name:"description"}),y(" "+r(x.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"description",props:x,class:"wrap-column"},{default:l(()=>[y(r(x.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:x},{default:l(()=>[t("div",Om,[O.$can("admin.product-category.add")||O.$can("admin.product-category.edit")||O.$can("admin.product-category.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[3]||(w[3]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[O.$can("admin.product-category.add")?ee((p(),P(ae,{key:0,clickable:"",onClick:J(U=>a(X).get(O.route("admin.product-category.duplicate",x.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"file_copy"})]),_:1}),e(N,null,{default:l(()=>w[5]||(w[5]=[y("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),O.$can("admin.product-category.edit")?ee((p(),P(ae,{key:1,clickable:"",onClick:J(U=>a(X).get(O.route("admin.product-category.edit",x.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>w[6]||(w[6]=[y("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),O.$can("admin.product-category.delete")?ee((p(),P(ae,{key:2,onClick:J(U=>_(x.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>w[7]||(w[7]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",qm,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":w[2]||(w[2]=x=>m.search=x),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Rm=Object.freeze(Object.defineProperty({__proto__:null,default:Im},Symbol.toStringTag,{value:"Module"})),Dm={class:"detail"},Um={key:0},Am={key:1},jm={key:2},Em={class:"detail"},Mm={class:"detail"},Nm={key:0},Bm={key:0},zm={key:0},Fm={key:0},Lm={class:"detail"},to={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(d){const n=d;xe();const u=o=>`${o>0?L((o-n.product.cost)/o*100,2):0}%`;return(o,s)=>{const i=Q("i-link");return p(),h("div",null,[s[42]||(s[42]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",Dm,[t("tbody",null,[t("tr",null,[s[0]||(s[0]=t("td",{style:{width:"120px"}},"ID",-1)),s[1]||(s[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(d.product.formatted_id),1)]),t("tr",null,[s[2]||(s[2]=t("td",null,"Nama Produk",-1)),s[3]||(s[3]=t("td",null,":",-1)),t("td",null,r(d.product.name),1)]),t("tr",null,[s[4]||(s[4]=t("td",null,"Barcode",-1)),s[5]||(s[5]=t("td",null,":",-1)),t("td",null,r(d.product.barcode),1)]),t("tr",null,[s[6]||(s[6]=t("td",null,"Jenis Produk",-1)),s[7]||(s[7]=t("td",null,":",-1)),t("td",null,r(o.$CONSTANTS.PRODUCT_TYPES[d.product.type]),1)]),t("tr",null,[s[8]||(s[8]=t("td",null,"Kategori",-1)),s[9]||(s[9]=t("td",null,":",-1)),t("td",null,r(d.product.category?d.product.category.name:"--Tidak memiliki kategori--"),1)]),o.$can("admin.product:view-supplier")?(p(),h("tr",Um,[s[10]||(s[10]=t("td",null,"Supplier",-1)),s[11]||(s[11]=t("td",null,":",-1)),t("td",null,[d.product.supplier?(p(),P(i,{key:0,href:o.route("admin.supplier.detail",{id:d.product.supplier.id})},{default:l(()=>[y(r(d.product.supplier.name),1)]),_:1},8,["href"])):(p(),h(W,{key:1},[y(r("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[s[12]||(s[12]=t("td",null,"Status",-1)),s[13]||(s[13]=t("td",null,":",-1)),t("td",null,r(d.product.active?"Aktif":"Tidak Aktif"),1)]),d.product.created_at?(p(),h("tr",Am,[s[15]||(s[15]=t("td",null,"Dibuat Oleh",-1)),s[16]||(s[16]=t("td",null,":",-1)),t("td",null,[d.product.creator?(p(),h(W,{key:0},[e(i,{href:o.route("admin.user.detail",{id:d.product.creator})},{default:l(()=>[y(r(d.product.creator.username),1)]),_:1},8,["href"]),s[14]||(s[14]=y(" - "))],64)):k("",!0),y(" "+r(a(ve)(d.product.created_at)),1)])])):k("",!0),d.product.updater?(p(),h("tr",jm,[s[18]||(s[18]=t("td",null,"Diperbarui oleh",-1)),s[19]||(s[19]=t("td",null,":",-1)),t("td",null,[d.product.updater?(p(),h(W,{key:0},[e(i,{href:o.route("admin.user.detail",{id:d.product.updater})},{default:l(()=>[y(r(d.product.updater.username),1)]),_:1},8,["href"]),s[17]||(s[17]=y(" - "))],64)):k("",!0),y(" "+r(a(ve)(d.product.updated_at)),1)])])):k("",!0)])]),s[43]||(s[43]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",Em,[t("tbody",null,[t("tr",null,[s[20]||(s[20]=t("td",{style:{width:"120px"}},"Stok",-1)),s[21]||(s[21]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(L)(d.product.stock))+" "+r(d.product.uom),1)]),t("tr",null,[s[22]||(s[22]=t("td",null,"Stok Minimum",-1)),s[23]||(s[23]=t("td",null,":",-1)),t("td",null,r(a(L)(d.product.min_stock))+" "+r(d.product.uom),1)]),t("tr",null,[s[24]||(s[24]=t("td",null,"Stok Maksimum",-1)),s[25]||(s[25]=t("td",null,":",-1)),t("td",null,r(a(L)(d.product.max_stock))+" "+r(d.product.uom),1)]),t("tr",null,[s[26]||(s[26]=t("td",null,"Barcode",-1)),s[27]||(s[27]=t("td",null,":",-1)),t("td",null,r(d.product.barcode),1)])])]),s[44]||(s[44]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",Mm,[t("tbody",null,[t("tr",null,[s[28]||(s[28]=t("td",null,"Opsi Harga",-1)),s[29]||(s[29]=t("td",null,":",-1)),t("td",null,r(d.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),o.$can("admin.product:view-cost")?(p(),h("tr",Nm,[s[30]||(s[30]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),s[31]||(s[31]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(a(L)(d.product.cost)),1)])):k("",!0),t("tr",null,[s[32]||(s[32]=t("td",null,"Harga Eceran",-1)),s[33]||(s[33]=t("td",null,":",-1)),t("td",null,[y(" Rp. "+r(a(L)(d.product.price))+" ",1),o.$can("admin.product:view-cost")?(p(),h("span",Bm," ("+r(u(d.product.price))+") ",1)):k("",!0)])]),t("tr",null,[s[34]||(s[34]=t("td",null,"Harga Partai",-1)),s[35]||(s[35]=t("td",null,":",-1)),t("td",null,[y(" Rp. "+r(a(L)(d.product.price_2))+" ",1),o.$can("admin.product:view-cost")?(p(),h("span",zm," ("+r(u(d.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[s[36]||(s[36]=t("td",null,"Harga Grosir",-1)),s[37]||(s[37]=t("td",null,":",-1)),t("td",null,[y(" Rp. "+r(a(L)(d.product.price_3))+" ",1),o.$can("admin.product:view-cost")?(p(),h("span",Fm," ("+r(u(d.product.price_3))+") ",1)):k("",!0)])])])]),s[45]||(s[45]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",Lm,[t("tbody",null,[t("tr",null,[s[38]||(s[38]=t("td",{style:{width:"120px"}},"Deskirpsi",-1)),s[39]||(s[39]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(d.product.description),1)]),t("tr",null,[s[40]||(s[40]=t("td",null,"Catatan",-1)),s[41]||(s[41]=t("td",null,":",-1)),t("td",null,r(d.product.notes),1)])])])])}}},Hm=Object.freeze(Object.defineProperty({__proto__:null,default:to},Symbol.toStringTag,{value:"Module"})),Km={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ym={key:0},ao={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(d){const n=d,u=xe(),o=q([]),s=q(!0),i=Oe({...De()}),b=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let f=[{name:"id",label:u.screen.lt.sm?"Item":"#",field:"id",align:"left",sortable:!0},{name:"created_at",label:"Waktu",field:"created_at",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"quantity_before",label:"Qty Awal",field:"quantity_before",align:"right"},{name:"quantity_after",label:"Qty Akhir",field:"quantity_after",align:"right"},{name:"quantity",label:"Selisih",field:"quantity",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{m()});const m=(v=null)=>Ue({pagination:b,filter:i,props:v,rows:o,url:route("admin.stock-movement.data",{product_id:n.productId}),loading:s}),c=G(()=>u.screen.gt.sm?f:f.filter(v=>v.name==="id"||v.name==="quantity"));return(v,_)=>(p(),P(Pe,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:b.value,"onUpdate:pagination":_[0]||(_[0]=g=>b.value=g),filter:i.search,loading:s.value,columns:c.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:m,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:S,filter:O})=>[t("div",Km,[t("span",null,r(S)+" "+r(O?" with term "+O:""),1)])]),body:l(g=>[e(Ce,{props:g},{default:l(()=>[e(Y,{key:"id",props:g},{default:l(()=>[t("div",null,[a(u).screen.lt.sm?(p(),h(W,{key:0},[t("div",null,[e(ut,null,{default:l(()=>[y(r(v.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[g.row.ref_type]),1)]),_:2},1024)]),e(V,{class:"inline-icon",name:"tag"})],64)):k("",!0),y(" "+r(g.row.formatted_id),1)]),a(u).screen.lt.sm?(p(),h(W,{key:0},[t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),y(" "+r(a(ve)(g.row.created_at)),1)]),t("div",{class:$e(g.row.quantity>0?"text-positive":"text-negative")},[e(V,{class:"inline-icon",name:"compare_arrows"}),y(" "+r(a(L)(g.row.quantity_before))+" "+r(g.row.uom)+" → "+r(a(L)(g.row.quantity_after))+" "+r(g.row.uom),1)],2),e(ke,{text:g.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"created_at",props:g},{default:l(()=>[y(r(a(ve)(g.row.created_at)),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:g},{default:l(()=>[y(r(v.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[g.row.ref_type])+" ",1),g.row.ref?(p(),h("span",Ym,r(g.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"quantity_before",props:g},{default:l(()=>[y(r(a(L)(g.row.quantity_before))+" "+r(g.row.uom),1)]),_:2},1032,["props"]),e(Y,{key:"quantity_after",props:g},{default:l(()=>[y(r(a(L)(g.row.quantity_after))+" "+r(g.row.uom),1)]),_:2},1032,["props"]),e(Y,{key:"quantity",props:g,class:$e(g.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[y(r(a(L)(g.row.quantity))+" "+r(g.row.uom),1)]),_:2},1032,["props","class"]),e(Y,{key:"notes",props:g},{default:l(()=>[e(ke,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Qm=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"})),Wm={class:"q-gutter-sm"},Jm={class:"q-gutter-sm"},Gm={class:"row justify-center"},Xm={class:"col col-lg-6 q-pa-xs"},Zm={class:"row"},ec={__name:"Detail",setup(d){const n=fe(),u=`Rincian Produk #${n.props.data.id}`,o=q("main");return(s,i)=>{const b=Q("i-head"),f=Q("authenticated-layout");return p(),h(W,null,[e(b,{title:u}),e(f,{"show-drawer-button":!0},{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",Wm,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=m=>s.$goBack())})])]),"right-button":l(()=>[t("div",Jm,[s.$can("admin.product.edit")?(p(),P(D,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=m=>a(X).get(s.route("admin.product.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[t("div",Gm,[t("div",Xm,[t("div",Zm,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(At,{modelValue:o.value,"onUpdate:modelValue":i[2]||(i[2]=m=>o.value=m),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(nt,{name:"main",label:"Info Utama"}),e(nt,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(jt,{modelValue:o.value,"onUpdate:modelValue":i[3]||(i[3]=m=>o.value=m),animated:""},{default:l(()=>[e(st,{name:"main"},{default:l(()=>[e(to,{product:a(n).props.data},null,8,["product"])]),_:1}),e(st,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(ao,{"product-id":a(n).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},tc=Object.freeze(Object.defineProperty({__proto__:null,default:ec},Symbol.toStringTag,{value:"Module"}));function xa(d,n=!1){const u=d.map(b=>({value:b.id,label:b.name})),o=n?[{value:"all",label:"Semua"},...u]:u,s=q([...o]);return{filteredCategories:s,filterCategories:(b,f)=>{const m=b.toLowerCase();f(()=>{s.value=o.filter(c=>c.label.toLowerCase().includes(m))})},categories:o}}function Sa(d,n=!1){const u=d.map(b=>({value:b.id,label:"#"+b.id+" - "+b.name})),o=n?[{value:"all",label:"Semua"},...u]:u,s=q([...o]);return{filteredSuppliers:s,filterSupplierFn:(b,f)=>{const m=b.toLowerCase();f(()=>{s.value=o.filter(c=>c.label.toLowerCase().includes(m))})},suppliers:o}}const ac={class:"q-gutter-sm"},lc={class:"col col-md-6 q-pa-xs"},oc={__name:"Editor",setup(d){const n=fe(),u=(n.props.data.id?"Edit":"Tambah")+" Produk",o=Ze(window.CONSTANTS.PRODUCT_TYPES),s=Le({id:n.props.data.id,category_id:n.props.data.category_id,supplier_id:n.props.data.supplier_id,type:n.props.data.type||"",name:n.props.data.name||"",barcode:n.props.data.barcode||"",description:n.props.data.description||"",stock:parseFloat(n.props.data.stock)||0,min_stock:parseFloat(n.props.data.min_stock)||0,max_stock:parseFloat(n.props.data.max_stock)||0,uom:n.props.data.uom||"",cost:parseFloat(n.props.data.cost)||0,price:parseFloat(n.props.data.price)||0,price_2:parseFloat(n.props.data.price_2)||0,price_3:parseFloat(n.props.data.price_3)||0,active:!!n.props.data.active,price_editable:!!n.props.data.price_editable,notes:n.props.data.notes||""}),i=()=>Je({form:s,url:route("admin.product.save")}),{filteredCategories:b,filterCategories:f}=xa(n.props.categories),{filteredSuppliers:m,filterSuppliers:c}=Sa(n.props.suppliers),v=G(()=>s.price>0?(s.price-s.cost)/s.price*100:0);return(_,g)=>{const S=Q("i-head"),O=Q("authenticated-layout");return p(),h(W,null,[e(S,{title:u}),e(O,{"show-drawer-button":!0},{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",ac,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=w=>_.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",lc,[e(ze,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=w=>a(s).id=w)},null,512),[[dt,a(s).id]]),g[23]||(g[23]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(de,{autofocus:"",modelValue:a(s).type,"onUpdate:modelValue":g[2]||(g[2]=w=>a(s).type=w),class:"custom-select",options:a(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["modelValue","options"]),e(oe,{modelValue:a(s).name,"onUpdate:modelValue":g[3]||(g[3]=w=>a(s).name=w),modelModifiers:{trim:!0},label:"Nama Produk","lazy-rules":"",error:!!a(s).errors.name,disable:a(s).processing,"error-message":a(s).errors.name,rules:[w=>w&&w.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(s).description,"onUpdate:modelValue":g[4]||(g[4]=w=>a(s).description=w),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.description,"error-message":a(s).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(s).category_id,"onUpdate:modelValue":g[5]||(g[5]=w=>a(s).category_id=w),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:a(b),"map-options":"","emit-value":"",onFilter:a(f),"option-label":"label","option-value":"value",error:!!a(s).errors.category_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(N,null,{default:l(()=>g[21]||(g[21]=[y("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),_.$can("admin.product:view-supplier")?(p(),P(de,{key:0,modelValue:a(s).supplier_id,"onUpdate:modelValue":g[6]||(g[6]=w=>a(s).supplier_id=w),label:"Supplier","use-input":"","input-debounce":"300",clearable:"",options:a(m),"map-options":"","emit-value":"",onFilter:a(c),"option-label":"label","option-value":"value",error:!!a(s).errors.supplier_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(ae,null,{default:l(()=>[e(N,null,{default:l(()=>g[22]||(g[22]=[y("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(qt,{modelValue:a(s).active,"onUpdate:modelValue":g[7]||(g[7]=w=>a(s).active=w),disable:a(s).processing,label:"Aktif"},null,8,["modelValue","disable"]),g[24]||(g[24]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),e(oe,{modelValue:a(s).barcode,"onUpdate:modelValue":g[8]||(g[8]=w=>a(s).barcode=w),modelModifiers:{trim:!0},label:"Barcode","lazy-rules":"",error:!!a(s).errors.barcode,disable:a(s).processing,"error-message":a(s).errors.barcode,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(s).uom,"onUpdate:modelValue":g[9]||(g[9]=w=>a(s).uom=w),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!a(s).errors.uom,disable:a(s).processing,"error-message":a(s).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(Re,{modelValue:a(s).stock,"onUpdate:modelValue":g[10]||(g[10]=w=>a(s).stock=w),label:"Stok",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.stock,errorMessage:a(s).errors.stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Re,{modelValue:a(s).min_stock,"onUpdate:modelValue":g[11]||(g[11]=w=>a(s).min_stock=w),label:"Stok Minimum",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.min_stock,errorMessage:a(s).errors.min_stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Re,{modelValue:a(s).max_stock,"onUpdate:modelValue":g[12]||(g[12]=w=>a(s).max_stock=w),label:"Stok Maksimum",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.max_stock,errorMessage:a(s).errors.max_stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),g[25]||(g[25]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Harga",-1)),e(qt,{modelValue:a(s).price_editable,"onUpdate:modelValue":g[13]||(g[13]=w=>a(s).price_editable=w),disable:a(s).processing,label:"Harga bisa diubah saat penjualan"},null,8,["modelValue","disable"]),_.$can("admin.product:view-cost")?(p(),P(Re,{key:1,modelValue:a(s).cost,"onUpdate:modelValue":g[14]||(g[14]=w=>a(s).cost=w),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.cost,errorMessage:a(s).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),e(Re,{modelValue:a(s).price,"onUpdate:modelValue":g[15]||(g[15]=w=>a(s).price=w),label:"Harga Eceran (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price,errorMessage:a(s).errors.price,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Re,{modelValue:a(s).price_2,"onUpdate:modelValue":g[16]||(g[16]=w=>a(s).price_2=w),label:"Harga Partai (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price_2,errorMessage:a(s).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Re,{modelValue:a(s).price_3,"onUpdate:modelValue":g[17]||(g[17]=w=>a(s).price_3=w),label:"Harga Grosir (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price_3,errorMessage:a(s).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),_.$can("admin.product:view-cost")?(p(),P(Re,{key:2,modelValue:v.value,"onUpdate:modelValue":g[18]||(g[18]=w=>v.value=w),label:"Margin (%)",lazyRules:"",disable:a(s).processing,maxDecimals:2,"hide-bottom-space":""},null,8,["modelValue","disable"])):k("",!0),g[26]||(g[26]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Lainnya",-1)),e(oe,{modelValue:a(s).notes,"onUpdate:modelValue":g[19]||(g[19]=w=>a(s).notes=w),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.notes,"error-message":a(s).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:g[20]||(g[20]=w=>_.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},nc=Object.freeze(Object.defineProperty({__proto__:null,default:oc},Symbol.toStringTag,{value:"Module"})),sc={class:"q-gutter-sm"},rc={class:"col col-md-6 q-pa-xs"},il="Import Produk",ic={__name:"Import",setup(d){const n=Le({csv_file:null}),u=()=>{n.post(route("admin.product.import"),{onSuccess:()=>{n.reset()},onError:()=>{Be()},onFinish:()=>{n.clearErrors()}})};return(o,s)=>{const i=Q("i-head"),b=Q("authenticated-layout");return p(),h(W,null,[e(i,{title:il}),e(b,{"show-drawer-button":!0},{title:l(()=>[y(r(il))]),"left-button":l(()=>[t("div",sc,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=f=>o.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",rc,[e(ze,{class:"row",onSubmit:J(u,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[s[3]||(s[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),s[4]||(s[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(Ql,{modelValue:a(n).csv_file,"onUpdate:modelValue":s[1]||(s[1]=f=>a(n).csv_file=f),accept:".csv",label:"Pilih file CSV",error:!!a(n).errors.csv_file,"error-message":a(n).errors.csv_file,disable:a(n).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(n).processing||!a(n).csv_file,loading:a(n).processing},null,8,["disable","loading"]),e(D,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:s[2]||(s[2]=f=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(p(),P(aa,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[y(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(p(),P(aa,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[y(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},dc=Object.freeze(Object.defineProperty({__proto__:null,default:ic},Symbol.toStringTag,{value:"Module"})),uc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},mc={class:"q-pa-xs"},cc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},pc={key:0},fc={key:1},gc={class:"flex justify-end"},bc={key:0},vc={key:1},yc={key:0},dl="Produk",_c={__name:"Index",setup(d){const n=fe(),u=q(null),o=q(null),s=Ge(o),i=q(!1),b=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.PRODUCT_TYPES)],f=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],m=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],c=xe(),v=q(!1),_=q([]),g=q(!0),S=Oe({type:"all",category_id:"all",supplier_id:"all",status:"active",stock_status:"all",search:"",...De()}),O=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});let w=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price",label:"Harga",field:"price",align:"right"},{name:"action",align:"right"}];he(()=>{const $=new URLSearchParams(window.location.search).get("page");$&&(O.value.page=parseInt($)),C()});const I=E=>lt({message:`Hapus Produk ${E.name}?`,url:route("admin.product.delete",E.id),fetchItemsCallback:C,loading:g}),C=(E=null)=>{Ue({pagination:O,filter:S,props:E,rows:_,url:route("admin.product.data"),loading:g,tableRef:u})},x=()=>{C()},{filteredCategories:U,filterCategories:F}=xa(n.props.categories,!0),{filteredSuppliers:T,filterSupplierFn:R}=Sa(n.props.suppliers,!0),B=G(()=>{let E=[...w];return i.value||E.splice(2,1),c.screen.gt.sm?E:E.filter($=>$.name==="name"||$.name==="action")}),M=E=>{console.log(window.location.href),X.get(route("admin.product.detail",E.row.id))};return(E,$)=>{const K=Q("i-head"),se=Q("authenticated-layout");return p(),h(W,null,[e(K,{title:dl}),e(se,null,He({title:l(()=>[y(r(dl))]),"right-button":l(()=>[e(D,{icon:v.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=j=>v.value=!v.value)},null,8,["icon"]),E.$can("admin.product.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=j=>a(X).get(E.route("admin.product.add")))})):k("",!0),E.$can("admin.product.import")||E.$can("admin.product:view-cost")?(p(),P(D,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[4]||($[4]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[E.$can("admin.product.import")?ee((p(),P(ae,{key:0,clickable:"",onClick:$[2]||($[2]=j=>i.value=!i.value)},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:i.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(N,null,{default:l(()=>[y(r(i.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[ne],[ue]]):k("",!0),E.$can("admin.product.import")?ee((p(),P(ae,{key:1,clickable:"",onClick:$[3]||($[3]=J(j=>a(X).get(E.route("admin.product.import")),["stop"]))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"csv"})]),_:1}),e(N,null,{default:l(()=>$[13]||($[13]=[y("Import")])),_:1})]),_:1})),[[ne],[ue]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",mc,[e(Pe,{ref_key:"tableRef",ref:u,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:O.value,"onUpdate:pagination":$[12]||($[12]=j=>O.value=j),filter:S.search,loading:g.value,columns:B.value,rows:_.value,"rows-per-page-options":[10,25,50],style:Me({height:a(s)}),onRequest:C,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:j,message:A,filter:Z})=>[t("div",cc,[t("span",null,r(A)+" "+r(Z?" with term "+Z:""),1)])]),header:l(j=>[e(Ce,{props:j},{default:l(()=>[e(ea,{"auto-width":""}),(p(!0),h(W,null,tt(j.cols,A=>(p(),P(ea,{key:A.name,props:j},{default:l(()=>[y(r(A.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(j=>[e(Ce,{props:j,class:$e({inactive:!j.row.active})},{default:l(()=>[e(Y,{"auto-width":""},{default:l(()=>[e(D,{size:"sm",flat:"",round:"",dense:"",onClick:J(A=>j.expand=!j.expand,["prevent"]),icon:j.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(Y,{key:"name",props:j,class:"wrap-column cursor-pointer",onClick:A=>M(j)},{default:l(()=>[y(r(j.row.name)+" ",1),a(c).screen.gt.sm?k("",!0):(p(),h(W,{key:0},[j.row.type=="stocked"?(p(),h("div",pc,[e(V,{name:"cycle"}),y(" Stok: "+r(a(L)(j.row.stock))+" "+r(j.row.uom),1)])):k("",!0),i.value?(p(),h("div",fc,[e(V,{name:"money"}),y(" Modal: Rp. "+r(a(L)(j.row.cost)),1)])):k("",!0),t("div",null,[e(V,{name:"sell"}),y(" Harga: Rp. "+r(a(L)(j.row.price)),1)])],64))]),_:2},1032,["props","onClick"]),e(Y,{key:"stock",props:j,class:$e(["wrap-column",{"low-stock":j.row.type=="stocked"&&(Number(j.row.stock)==0||Number(j.row.stock)<Number(j.row.min_stock)),"over-stock":j.row.type=="stocked"&&Number(j.row.max_stock)&&Number(j.row.stock)>Number(j.row.max_stock)}])},{default:l(()=>[y(r(j.row.type=="stocked"?a(L)(j.row.stock)+" "+j.row.uom:"-"),1)]),_:2},1032,["props","class"]),(p(),P(Y,{key:"cost",props:j,class:"wrap-column"},{default:l(()=>[y(r(a(L)(j.row.cost)),1)]),_:2},1032,["props"])),e(Y,{key:"price",props:j,class:"wrap-column"},{default:l(()=>[y(r(a(L)(j.row.price)),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:j},{default:l(()=>[t("div",gc,[E.$can("admin.product.add")||E.$can("admin.product.edit")||E.$can("admin.product.delete")?(p(),P(D,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:$[11]||($[11]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"175px"}},{default:l(()=>[E.$can("admin.product.add")?ee((p(),P(ae,{key:0,clickable:"",onClick:J(A=>a(X).get(E.route("admin.product.duplicate",j.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"file_copy"})]),_:1}),e(N,null,{default:l(()=>$[14]||($[14]=[y("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),E.$can("admin.product.edit")?ee((p(),P(ae,{key:1,clickable:"",onClick:J(A=>a(X).get(E.route("admin.product.edit",j.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>$[15]||($[15]=[y("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),E.$can("admin.product.delete")?ee((p(),P(ae,{key:2,onClick:J(A=>I(j.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>$[16]||($[16]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class"]),ee(e(Ce,{props:j},{default:l(()=>[e(Y,{colspan:"100%"},{default:l(()=>[j.row.barcode?(p(),h("div",bc,[e(V,{class:"inline-icon",name:"barcode"}),y(" Barcode: "+r(j.row.barcode),1)])):k("",!0),j.row.category_id?(p(),h("div",vc,[e(V,{name:"category",class:"inline-icon"}),y(" Kategori: "+r(j.row.category.name),1)])):k("",!0),E.$can("admin.product:view-supplier")?(p(),h(W,{key:2},[j.row.supplier_id?(p(),h("div",yc,[e(V,{name:"local_shipping",class:"inline-icon"}),y(" Supplier: "+r(j.row.supplier.name),1)])):k("",!0)],64)):k("",!0),j.row.description?(p(),P(ke,{key:3,text:j.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),j.row.notes?(p(),P(ke,{key:4,text:j.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[Il,j.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[v.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:l(()=>[t("div",uc,[e(de,{modelValue:S.type,"onUpdate:modelValue":[$[5]||($[5]=j=>S.type=j),x],class:"custom-select col-xs-4 col-sm-2",options:b,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:S.status,"onUpdate:modelValue":[$[6]||($[6]=j=>S.status=j),x],class:"custom-select col-xs-4 col-sm-2",options:f,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:S.stock_status,"onUpdate:modelValue":[$[7]||($[7]=j=>S.stock_status=j),x],class:"custom-select col-xs-4 col-sm-2",options:m,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:S.category_id,"onUpdate:modelValue":[$[8]||($[8]=j=>S.category_id=j),x],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(U),"map-options":"",dense:"","emit-value":"",onFilter:a(F),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),E.$can("admin.product:view-supplier")?(p(),P(de,{key:0,modelValue:S.supplier_id,"onUpdate:modelValue":[$[9]||($[9]=j=>S.supplier_id=j),x],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(T),"map-options":"",dense:"","emit-value":"",onFilter:a(R),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])):k("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:S.search,"onUpdate:modelValue":$[10]||($[10]=j=>S.search=j),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},kc=Object.freeze(Object.defineProperty({__proto__:null,default:_c},Symbol.toStringTag,{value:"Module"})),wc={class:"column"},hc={class:"bg-grey-2 q-pa-xs"},$c={class:"text-subtitle1 text-bold text-grey-10"},xc={class:"col-12 col-sm-6"},Sc={class:"full-width"},Vc={key:1},qc={key:0},Cc={key:1},Tc={class:"col-12 col-sm-6",align:"left"},Pc={class:"full-width"};const Oc={key:1},Ic={class:"full-width",style:{"border-collapse":"collapse"}},Rc={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Dc={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Uc={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ac={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},jc={key:0},Ec={class:"col-12 col-sm-6"},Mc={class:"text-body2 text-grey-7 text-italic"},Nc={class:"col-12 col-sm-6"},Bc={class:"row justify-end q-gutter-y-xs"},zc={class:"col-12 row justify-between"},Fc={class:"text-subtitle2 text-bold"},lo={__name:"InvoiceTab",props:{data:Object},setup(d){const n=d;return(u,o)=>{const s=Q("i-link");return p(),h("div",wc,[e(te,{class:"q-pa-none"},{default:l(()=>[t("div",hc,[t("div",$c," INVOICE #"+r(n.data.formatted_id),1)])]),_:1}),e(Xe),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",xc,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",Sc,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.supplier?(p(),P(s,{key:0,href:u.route("admin.customer.detail",{id:n.data.supplier_id})},{default:l(()=>[e(V,{class:"inline-icon",name:"person"}),y(" "+r(n.data.supplier_name),1)]),_:1},8,["href"])):(p(),h("div",Vc,[e(V,{class:"inline-icon",name:"person"}),o[0]||(o[0]=y(" Pemasok Umum "))]))])]),n.data.supplier_phone?(p(),h("tr",qc,[t("td",null,[e(V,{class:"inline-icon",name:"phone"}),y(" "+r(n.data.supplier_phone),1)])])):k("",!0),n.data.supplier_address?(p(),h("tr",Cc,[t("td",null,[e(V,{class:"inline-icon",name:"home_pin"}),y(" "+r(n.data.supplier_address),1)])])):k("",!0)])])]),t("div",Tc,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",Pc,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.$CONSTANTS.PURCHASE_ORDER_STATUSES[n.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[n.data.payment_status]),1)]),k("",!0),n.data.due_date?(p(),h("tr",Oc,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(Lt)(n.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Xe),e(te,{class:"q-pa-sm"},{default:l(()=>[t("table",Ic,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(p(!0),h(W,null,tt(n.data.details,i=>(p(),h("tr",{key:i.id},[t("td",Rc,[e(s,{href:u.route("admin.product.detail",{id:i.product_id})},{default:l(()=>[y(r(i.product_name),1)]),_:2},1032,["href"])]),t("td",Dc,r(i.quantity),1),t("td",null,r(i.product_uom),1),t("td",Uc,r(a(L)(i.cost)),1),t("td",Ac,r(a(L)(i.subtotal_cost)),1)]))),128)),n.data.details.length==0?(p(),h("tr",jc,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Xe),e(te,{class:"row",align:"left"},{default:l(()=>[t("div",Ec,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Mc,r(n.data.notes?n.data.notes:"-"),1)]),t("div",Nc,[t("div",Bc,[t("div",zc,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Fc,r(a(L)(n.data.grand_total)),1)])])])]),_:1})])}}},Lc=Object.freeze(Object.defineProperty({__proto__:null,default:lo},Symbol.toStringTag,{value:"Module"})),Hc={key:0,class:"text-center q-mb-md text-grey-8"},Kc={class:"text-subtitle2 text-weight-medium"},Yc={class:"text-h5 text-center text-primary q-pb-md"},Qc={class:"text-center q-mt-md"},Wc={key:0,class:"text-h6 text-negative text-weight-bold"},Jc={key:1,class:"text-h6 text-green-8 text-weight-bold"},Gc={key:2,class:"text-h6 text-positive text-weight-bold"},oo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(d,{emit:n}){const u=d,o=n,s=fe(),i=q(!1),b=q({method:null,amount:u.total,notes:null}),f=s.props.data.supplier,m=G(()=>[...s.props.accounts.map(w=>({label:w.type=="bank"?w.name+" - "+w.number:w.name,value:w.id}))]),c=G(()=>u.total-(b.value.amount||0)),v=G(()=>b.value.method&&typeof b.value.amount=="number"&&b.value.amount>0),_=G(()=>b.value.method?(b.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),g=G(()=>v.value&&_.value===null),S=()=>{if(!g.value)return;i.value=!0;const w={total_paid:b.value.amount,payments:[{id:b.value.method,amount:b.value.amount}],notes:b.value.notes,remaining_debt:Math.max(0,u.total-(b.value.amount||0))};o("accepted",w),i.value=!1},O=()=>{b.value.amount=u.total,b.value.method=null,b.value.notes=null};return(w,I)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":I[4]||(I[4]=C=>w.$emit("update:modelValue",C)),onBeforeShow:O},{default:l(()=>[e(pe,{style:{"min-width":"300px"}},{default:l(()=>[e(te,null,{default:l(()=>I[5]||(I[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:l(()=>[a(f)?(p(),h("div",Hc,[t("div",Kc,[y(r(a(f).name)+" ",1),I[6]||(I[6]=t("br",null,null,-1)),y(" Saldo: Rp. "+r(a(L)(a(f).balance)),1)])])):k("",!0),t("div",Yc," Total: Rp. "+r(a(L)(d.total)),1),e(a(de),{modelValue:b.value.method,"onUpdate:modelValue":I[0]||(I[0]=C=>b.value.method=C),options:m.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:i.value,rules:[C=>!!C||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Re,{modelValue:b.value.amount,"onUpdate:modelValue":I[1]||(I[1]=C=>b.value.amount=C),label:"Jumlah Uang",outlined:!0,dense:"",disable:i.value,class:"q-mb-md",error:!g.value,"error-message":_.value},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:b.value.notes,"onUpdate:modelValue":I[2]||(I[2]=C=>b.value.notes=C),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:i.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Qc,[c.value>0?(p(),h("div",Wc," Sisa Tagihan: Rp. "+r(a(L)(c.value)),1)):c.value<0?(p(),h("div",Jc," Kembalian: Rp. "+r(a(L)(Math.abs(c.value))),1)):(p(),h("div",Gc," Tagihan Terbayar "))])]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:I[3]||(I[3]=C=>w.$emit("update:modelValue",!1))}),e(D,{label:"Bayar",color:"positive",onClick:S,disable:i.value||!g.value,loading:i.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Xc=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),Zc={class:"column"},ep={class:"full-width",style:{"border-collapse":"collapse"}},tp={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ap={class:"row items-center q-gutter-x-sm"},lp={class:"text-weight-bold"},op={class:"row items-center q-gutter-x-sm q-mt-xs"},np={class:"text-caption text-grey-6"},sp={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},rp={class:"text-caption text-grey-6"},ip={class:"q-mt-xs"},dp={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},up={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},mp={key:0},cp={class:"q-pa-sm"},pp={class:"text-right q-pa-sm"},fp={class:"text-right q-pa-sm"},no={__name:"PaymentTab",props:{data:Object},setup(d){const n=d,u=G(()=>n.data.grand_total-n.data.total_paid),o=xe(),s=q(!1),i=()=>{s.value=!0},b=async m=>{const c={order_id:n.data.id,payments:m.payments,notes:m.notes};o.loading.show({message:"Memproses pembayaran..."});try{const v=await Qe.post(route("admin.purchase-order.add-payment"),c);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),s.value=!1,X.visit(route("admin.purchase-order.detail",{id:n.data.id})+"?tab=payment")}catch(v){let _="Gagal memproses pembayaran.";v.response&&v.response.data&&v.response.data.message?_=v.response.data.message:v.message&&(_=v.message),o.notify({message:_,color:"negative",icon:"error"})}finally{o.loading.hide()}},f=m=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Qe.post(route("admin.purchase-order.delete-payment",{id:m.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),X.visit(route("admin.purchase-order.detail",{id:n.data.id})+"?tab=payment")}catch(c){let v="Gagal menghapus pembayaran.";c.response&&c.response.data&&c.response.data.message?v=c.response.data.message:c.message&&(v=c.message),o.notify({message:v,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(m,c)=>(p(),h(W,null,[t("div",Zc,[e(Xe),e(te,{class:"q-pa-sm"},{default:l(()=>[t("table",ep,[c[6]||(c[6]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(p(!0),h(W,null,tt(n.data.payments,v=>(p(),h("tr",{key:v.id},[t("td",tp,[t("div",ap,[e(V,{name:"tag",size:"xs",color:"grey-7"}),t("span",lp,r(v.formatted_id),1)]),t("div",op,[e(V,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",np,r(a(ve)(v.created_at)),1)]),(v.type==="transfer"||v.type==="cash")&&v.account?(p(),h("div",sp,[e(V,{name:"wallet",size:"xs",color:"grey-7"}),t("span",rp,r(v.account.name),1)])):k("",!0),t("div",ip,[e(ut,{label:m.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[v.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",dp,r(a(L)(v.amount)),1),t("td",up,[m.$can("admin.sales-order.delete-payment")?(p(),P(D,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(v)},null,8,["onClick"])):k("",!0)])]))),128)),n.data.payments.length==0?(p(),h("tr",mp,c[2]||(c[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[t("td",cp,[m.$can("admin.sales-order.add-payment")&&u.value>0?(p(),P(D,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:c[0]||(c[0]=J(v=>i(),["stop"]))})):k("",!0)]),c[3]||(c[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",pp,r(a(L)(n.data.total_paid)),1)]),t("tr",null,[c[4]||(c[4]=t("th",{class:"text-right q-pa-sm",colspan:"2"},"Sisa Tagihan",-1)),t("th",fp,r(a(L)(u.value)),1),c[5]||(c[5]=t("td",null,null,-1))])])])]),_:1})]),e(oo,{modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=v=>s.value=v),total:u.value,customer:n.data.customer,onAccepted:b},null,8,["modelValue","total","customer"])],64))}},gp=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),bp={class:"q-gutter-sm"},vp={class:"col col-lg-6 q-pa-xs",align:"center"},ul="Rincian Pembelian",yp={__name:"Detail",setup(d){const n=new URLSearchParams(window.location.search),o=fe().props.data,s=q(n.get("preview")||!1),b=q(n.get("tab")||"invoice"),f=()=>{window.print()};return(m,c)=>{const v=Q("i-head"),_=Q("authenticated-layout");return p(),h(W,null,[e(v,{title:ul}),e(_,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(ul))])]),"left-button":l(()=>[t("div",bp,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=g=>m.$goBack())})])]),"right-button":l(()=>[e(D,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:c[1]||(c[1]=g=>f())}),s.value?k("",!0):(p(),P(D,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:c[2]||(c[2]=g=>a(X).get(m.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Ve,{class:"row justify-center print-visible"},{default:l(()=>[t("div",vp,[e(pe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(At,{modelValue:b.value,"onUpdate:modelValue":c[3]||(c[3]=g=>b.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(nt,{name:"invoice",label:"Invoice"}),s.value?k("",!0):(p(),P(nt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Xe),e(jt,{modelValue:b.value,"onUpdate:modelValue":c[4]||(c[4]=g=>b.value=g),animated:""},{default:l(()=>[e(st,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(lo,{data:a(o)},null,8,["data"])]),_:1}),e(st,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(no,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},_p=wt(yp,[["__scopeId","data-v-ef1ae89c"]]),kp=Object.freeze(Object.defineProperty({__proto__:null,default:_p},Symbol.toStringTag,{value:"Module"})),wp={class:"text-weight-medium"},hp={class:"text-caption text-grey-6"},$p={class:"column items-end"},xp={class:"text-caption text-grey-6 text-italic"},so={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(d){const n=xe(),u=Ge(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(s,i)=>(p(),P(Pe,{dense:"",rows:d.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,style:Me({height:a(u)})},{header:l(b=>[e(Ce,{props:b,class:"bg-grey-4"},{default:l(()=>[(p(!0),h(W,null,tt(b.cols,f=>(p(),P(ea,{key:f.name,props:b,class:"text-weight-bold text-grey-8"},{default:l(()=>[y(r(f.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(b=>[e(Ce,{props:b,class:"hover-highlight"},{default:l(()=>[e(Y,{key:"name",props:b,class:"text-left"},{default:l(()=>[t("div",wp,r(b.row.product_name),1),t("div",hp,r(b.row.product_barcode),1),b.row.notes?(p(),P(ke,{key:0,text:b.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal",props:b,class:"text-right"},{default:l(()=>[t("div",$p,[t("div",null,r(a(L)(b.row.subtotal_cost)),1),t("div",xp,r(a(L)(b.row.quantity))+" x Rp. "+r(a(L)(b.row.cost)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:b,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(D,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:f=>s.$emit("edit-item",b.row),disable:d.isProcessing},null,8,["onClick","disable"]),e(D,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:f=>s.$emit("remove-item",b.row),disable:d.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Sp=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"})),ro=$t({name:"QBtnToggle",props:{...Pl,modelValue:{required:!0},options:{type:Array,required:!0,validator:d=>d.every(n=>("label"in n||"icon"in n||"slot"in n)&&"value"in n)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(d,{slots:n,emit:u}){const o=G(()=>d.options.find(g=>g.value===d.modelValue)!==void 0),s=G(()=>({type:"hidden",name:d.name,value:d.modelValue})),i=kn(s),b=G(()=>yn(d)),f=G(()=>({rounded:d.rounded,dense:d.dense,...b.value})),m=G(()=>d.options.map((g,S)=>{const{attrs:O,value:w,slot:I,...C}=g;return{slot:I,props:{key:S,"aria-pressed":w===d.modelValue?"true":"false",...O,...C,...f.value,disable:d.disable===!0||C.disable===!0,color:w===d.modelValue?v(C,"toggleColor"):v(C,"color"),textColor:w===d.modelValue?v(C,"toggleTextColor"):v(C,"textColor"),noCaps:v(C,"noCaps")===!0,noWrap:v(C,"noWrap")===!0,size:v(C,"size"),padding:v(C,"padding"),ripple:v(C,"ripple"),stack:v(C,"stack")===!0,stretch:v(C,"stretch")===!0,onClick(x){c(w,g,x)}}}}));function c(g,S,O){d.readonly!==!0&&(d.modelValue===g?d.clearable===!0&&(u("update:modelValue",null,null),u("clear")):u("update:modelValue",g,S),u("click",O))}function v(g,S){return g[S]===void 0?d[S]:g[S]}function _(){const g=m.value.map(S=>_e(D,S.props,S.slot!==void 0?n[S.slot]:void 0));return d.name!==void 0&&d.disable!==!0&&o.value===!0&&i(g,"push"),ql(n.default,g)}return()=>_e(_n,{class:"q-btn-toggle",...b.value,rounded:d.rounded,stretch:d.stretch,glossy:d.glossy,spread:d.spread},_)}}),Vp={key:0,class:"text-center q-mb-md text-grey-8"},qp={class:"text-subtitle2 text-weight-medium"},Cp={class:"text-h5 text-center text-primary q-pb-md"},Tp={class:"q-mb-md flex flex-center"},Pp={key:1},Op={class:"col-6"},Ip={class:"col-6"},Rp={class:"row"},Dp={class:"text-center q-mt-md"},Up={key:0,class:"text-h6 text-negative text-weight-bold"},Ap={key:1,class:"text-h6 text-green-8 text-weight-bold"},jp={key:2,class:"text-h6 text-positive text-weight-bold"},Ep={key:2},Mp={class:"text-h6 text-negative text-center"},Np={key:3},io={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(d,{emit:n}){const u=d,o=n,s=fe(),i=q(!1),b=q("payment"),f=q(new Date),m=q(null),c=Oe([]),v=G(()=>c.every(M=>M.id&&typeof M.amount=="number"&&M.amount>0)),_=G(()=>s.props.accounts.map(M=>({label:M.name,value:M.id}))),g=G(()=>c.reduce((M,E)=>M+(E.amount||0),0)),S=G(()=>u.total-g.value),O=G(()=>{if(!u.supplier)return!0;const M=c.find($=>$.id==="wallet");return(M?M.amount:0)<=u.supplier.balance}),w=new Date,I=ot.addToDate(new Date,{days:30}),C=G(()=>[M=>!!M||"Tanggal jatuh tempo harus diisi",M=>ot.isBetweenDates(M,w,I,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),x=G(()=>{if(b.value==="debt")return!!u.supplier&&C.value.every(K=>K(f.value)===!0);const M=c.some(K=>(K.amount||0)>0),E=c.every(K=>(K.amount||0)>=0),$=S.value<=0;return v.value&&M&&E&&$}),U=()=>{c.length<3&&c.push({id:null,amount:0})},F=M=>{if(c.length>1){const E=c.findIndex($=>$.id===M);E!==-1&&c.splice(E,1)}},T=M=>{b.value=M,f.value=new Date,c.splice(0,c.length),M==="payment"&&_.value.length>0&&(c.splice(0,c.length,{id:_.value[0].value,amount:u.total}),kt(()=>{m.value&&m.value.length>0&&(m.value[0].focus(),m.value[0].select())}))},R=()=>{if(!x.value)return;i.value=!0;let M={total:u.total,is_debt:b.value==="debt"};if(b.value==="debt")M.due_date=ot.formatDate(f.value,"YYYY-MM-DD"),M.payments=[];else{const E=g.value,$=E>u.total?E-u.total:0,K=S.value>0?S.value:0;M.payments=c,M.remaining_debt=K,M.change=$}o("accepted",M),i.value=!1},B=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}T("payment")};return(M,E)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":E[3]||(E[3]=$=>M.$emit("update:modelValue",$)),onBeforeShow:B},{default:l(()=>[e(pe,{style:{"min-width":"300px"}},{default:l(()=>[e(te,null,{default:l(()=>E[4]||(E[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:l(()=>[d.supplier?(p(),h("div",Vp,[t("div",qp,[y(" Nama: "+r(d.supplier.name),1),E[5]||(E[5]=t("br",null,null,-1)),y(" Utang / Piutang: Rp. "+r(a(L)(d.supplier.balance)),1)])])):k("",!0),t("div",Cp," Total: Rp. "+r(a(L)(d.total)),1),t("div",Tp,[e(a(ro),{modelValue:b.value,"onUpdate:modelValue":[E[0]||(E[0]=$=>b.value=$),T],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!d.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),b.value==="payment"?(p(),h("div",Pp,[(p(!0),h(W,null,tt(c,($,K)=>(p(),h("div",{key:K,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Op,[e(a(de),{modelValue:$.id,"onUpdate:modelValue":se=>$.id=se,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:i.value,"hide-bottom-space":"",rules:[se=>!!se||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Ip,[e(Re,{modelValue:$.amount,"onUpdate:modelValue":se=>$.amount=se,label:"Jumlah",outlined:!0,dense:"",disable:i.value,error:!O.value,"error-message":O.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:K===0?"firstPaymentInputRef":null},He({_:2},[c.length>1?{name:"append",fn:l(()=>[e(V,{size:"xs",name:"close",class:"cursor-pointer",onClick:se=>F(K)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Rp,[e(D,{disable:!(c.length<3&&S.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:U,size:"sm"},null,8,["disable"])]),t("div",Dp,[S.value>0?(p(),h("div",Up," Sisa Tagihan: Rp. "+r(a(L)(S.value)),1)):S.value<0?(p(),h("div",Ap," Kembalian: Rp. "+r(a(L)(Math.abs(S.value))),1)):(p(),h("div",jp," Tagihan Terbayar "))])])):b.value==="debt"&&d.supplier?(p(),h("div",Ep,[e($a,{outlined:"",modelValue:f.value,"onUpdate:modelValue":E[1]||(E[1]=$=>f.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(w),"max-date":a(I),rules:C.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Mp," Total Utang: Rp. "+r(a(L)(d.total)),1)])):b.value==="debt"&&!d.supplier?(p(),h("div",Np,E[6]||(E[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:E[2]||(E[2]=$=>M.$emit("update:modelValue",!1))}),e(D,{label:b.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:R,disable:i.value||!x.value,loading:i.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Bp=Object.freeze(Object.defineProperty({__proto__:null,default:io},Symbol.toStringTag,{value:"Module"})),zp={class:"row items-center no-wrap"},Fp={class:"col-auto"},Lp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},uo={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1}},emits:["update:modelValue","product-selected"],setup(d,{emit:n}){const u=d,o=n,s=q(null),i=q([]),b=q(!0),f=q(-1),m=Oe({search:"",status:"active",...De()}),c=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price",label:"Harga (Rp)",field:"price",align:"right"}],_=G(()=>u.showCost?v:v.filter(C=>C.name!=="cost"));he(()=>{g()});const g=()=>{u.modelValue!==!1&&S()},S=(C=null)=>{b.value=!0,f.value=-1,Ue({pagination:c,filter:m,props:C,rows:i,url:route("admin.product.data"),loading:b,tableRef:s})},O=()=>{g()},w=C=>{o("product-selected",C),setTimeout(()=>{o("update:modelValue",!1)},100)},I=C=>{const x=i.value.length;x!==0&&(C.key==="ArrowDown"?(C.preventDefault(),f.value=(f.value+1)%x):C.key==="ArrowUp"?(C.preventDefault(),f.value=(f.value-1+x)%x):C.key==="Enter"&&f.value!==-1&&(C.preventDefault(),w(i.value[f.value])))};return Ae(()=>u.modelValue,(C,x)=>{x===!0&&C===!1&&(m.search=""),C===!0&&S()}),(C,x)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":x[3]||(x[3]=U=>C.$emit("update:modelValue",U)),maximized:C.$q.screen.lt.sm},{default:l(()=>[e(pe,{class:"column fit",tabindex:"0",onKeydown:I,ref:"cardRef"},{default:l(()=>[e(te,{class:"q-py-sm"},{default:l(()=>[t("div",zp,[x[4]||(x[4]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",Fp,[e(D,{flat:"",round:"",size:"sm",icon:"close",onClick:x[0]||(x[0]=U=>C.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:$e(["q-py-sm",C.$q.screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(oe,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":[x[1]||(x[1]=U=>m.search=U),O],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["class"]),e(te,{class:$e(["q-py-xs col",C.$q.screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(Pe,{ref_key:"tableRef",ref:s,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:c.value,"onUpdate:pagination":x[2]||(x[2]=U=>c.value=U),filter:m.search,loading:b.value,columns:_.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","virtual-scroll":!0,"rows-per-page-label":null},{"no-data":l(({icon:U,message:F,filter:T})=>[t("div",Lp,[t("span",null,r(F),1)])]),body:l(U=>[e(Ce,{tabindex:"0",props:U,class:$e([{inactive:!U.row.active,"selected-row":f.value===U.rowIndex},"cursor-pointer"]),onClick:F=>w(U.row),onKeydown:[ta(J(F=>w(U.row),["prevent","stop"]),["enter"]),ta(J(F=>w(U.row),["prevent"]),["space"])]},{default:l(()=>[e(Y,{key:"name",props:U,class:"wrap-column"},{default:l(()=>[e(ke,{text:U.row.name},null,8,["text"]),U.row.description?(p(),P(ke,{key:0,text:U.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"stock",props:U,class:"wrap-column text-right"},{default:l(()=>[y(r(U.row.type=="stocked"?a(L)(U.row.stock)+" "+U.row.uom:"-"),1)]),_:2},1032,["props"]),d.showCost?(p(),P(Y,{key:"cost",props:U,class:"wrap-column text-right"},{default:l(()=>[y(r(a(L)(U.row.cost)),1)]),_:2},1032,["props"])):k("",!0),e(Y,{key:"price",props:U,class:"wrap-column text-right"},{default:l(()=>[y(r(a(L)(U.row.price)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},Hp={class:"row items-center no-wrap"},Kp={class:"col-auto"},mo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(d,{expose:n,emit:u}){const o=d,s=u,i=()=>{s("save")},b=G(()=>o.item.quantity*o.item.cost),f=v=>{v.stopPropagation(),v.preventDefault()},m=v=>{o.modelValue&&(v.key==="Enter"?(i(),f(v)):v.key==="Escape"&&(s("update:modelValue",!1),f(v)))};return he(()=>{window.addEventListener("keydown",m)}),Ut(()=>{window.removeEventListener("keydown",m)}),n({getCurrentItem:()=>o.item}),(v,_)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":_[6]||(_[6]=g=>v.$emit("update:modelValue",g))},{default:l(()=>[e(pe,null,{default:l(()=>[e(te,{class:"q-py-sm"},{default:l(()=>[t("div",Hp,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Kp,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=g=>v.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:l(()=>[e(oe,{modelValue:d.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=g=>d.item.product_name=g),label:"Produk","hide-bottom-space":"",readonly:"",disable:d.isProcessing},null,8,["modelValue","disable"]),e(Re,{modelValue:d.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=g=>d.item.quantity=g),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:d.isProcessing},null,8,["modelValue","disable"]),e(Re,{modelValue:d.item.cost,"onUpdate:modelValue":_[3]||(_[3]=g=>d.item.cost=g),label:"Harga","hide-bottom-space":"",disable:d.isProcessing},null,8,["modelValue","disable"]),e(Re,{modelValue:b.value,"onUpdate:modelValue":_[4]||(_[4]=g=>b.value=g),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(oe,{modelValue:d.item.notes,"onUpdate:modelValue":_[5]||(_[5]=g=>d.item.notes=g),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(D,{flat:"",label:"Batal",color:"primary",disable:d.isProcessing},null,8,["disable"]),[[ue]]),ee(e(D,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:d.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Yp=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"}));function Qp(){const d=q(new Date);let n=null;const u=()=>{d.value=new Date};return he(()=>{n=setInterval(u,1e3)}),Ut(()=>{n&&clearInterval(n)}),{currentDateTime:d}}const Wp={class:"text-grey-8"},co={__name:"DigitalClock",setup(d){const{currentDateTime:n}=Qp();return(u,o)=>(p(),h("div",Wp,r(a(ve)(a(n))),1))}},Jp={key:0,class:"q-select__selected-item"},Gp={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(d,{expose:n,emit:u}){const o=q(null),s=d,i=u,b=q([]);let f=null;const m=q(s.modelValue);he(()=>{s.initialData&&(m.value=s.initialData)}),Ae(m,_=>{i("update:modelValue",_),i("supplierSelected",_)}),Ae(()=>s.modelValue,_=>{m.value=_}),n({focus:()=>{o.value&&o.value.focus()}});const v=(_,g)=>{if(_.length<s.minLength){g(()=>{b.value=[]});return}f&&clearTimeout(f),f=setTimeout(()=>{Qe.get(`/web-api/suppliers?q=${_}`).then(S=>{g(()=>{b.value=S.data.data})}).catch(S=>{console.error("Gagal mengambil data pemasok:",S),g(()=>{b.value=[]})})},500)};return(_,g)=>(p(),P(de,{class:$e(d.class),ref_key:"qSelectRef",ref:o,modelValue:m.value,"onUpdate:modelValue":g[0]||(g[0]=S=>m.value=S),"use-input":"","input-debounce":"0",label:d.label,options:b.value,onFilter:v,clearable:"",error:d.error,behavior:"menu","error-message":d.errorMessage,disable:d.disable,"hide-bottom-space":"",outlined:d.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(S=>[e(ae,Rl(Dl(S.itemProps)),{default:l(()=>[e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>[y(r(S.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(S=>[S.opt?(p(),h("div",Jp,r(S.opt.name),1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Xp={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(d,{emit:n}){return(u,o)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>u.$emit("update:modelValue",s))},{default:l(()=>[e(pe,{style:{"min-width":"300px"}},{default:l(()=>[e(te,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")])])],-1)])),_:1}),e(mt,{align:"center"},{default:l(()=>[ee(e(D,{dense:"",label:"Tutup"},null,512),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},po=wt(Xp,[["__scopeId","data-v-459ccab7"]]),Zp=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"}));function fo(d){const n=q(!1),u=()=>{const i=d.value||document.documentElement;i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},s=()=>{n.value?o():u()};return wn(()=>{const i=()=>{n.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",i),document.addEventListener("webkitfullscreenchange",i),document.addEventListener("mozfullscreenchange",i),document.addEventListener("MSFullscreenChange",i),()=>{document.removeEventListener("fullscreenchange",i),document.removeEventListener("webkitfullscreenchange",i),document.removeEventListener("mozfullscreenchange",i),document.removeEventListener("MSFullscreenChange",i)}}),{isFullscreen:n,requestFullscreen:u,exitFullscreen:o,toggleFullscreen:s}}const ef={class:"row items-center no-wrap"},tf={class:"col text-subtite text-bold text-grey-8"},af={class:"col-auto"},go={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(d,{expose:n,emit:u}){const o=d,s=u,i=()=>{s("save")},b=c=>{c.stopPropagation(),c.preventDefault()},f=c=>{o.modelValue&&(c.key==="Enter"?(i(),b(c)):c.key==="Escape"&&(s("update:modelValue",!1),b(c)))};return he(()=>{window.addEventListener("keydown",f)}),Ut(()=>{window.removeEventListener("keydown",f)}),n({getCurrentItem:()=>o.item}),(c,v)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":v[4]||(v[4]=_=>c.$emit("update:modelValue",_))},{default:l(()=>[e(pe,null,{default:l(()=>[e(te,{class:"q-py-sm"},{default:l(()=>[t("div",ef,[t("div",tf," Edit "+r(d.data.formatted_id),1),t("div",af,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:v[0]||(v[0]=_=>c.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:l(()=>[e(Bt,{modelValue:d.data.datetime,"onUpdate:modelValue":v[1]||(v[1]=_=>d.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:d.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(oe,{modelValue:c.$CONSTANTS.SALES_ORDER_STATUSES[d.data.status],"onUpdate:modelValue":v[2]||(v[2]=_=>c.$CONSTANTS.SALES_ORDER_STATUSES[d.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:d.isProcessing},null,8,["modelValue","disable"]),e(oe,{modelValue:d.data.notes,"onUpdate:modelValue":v[3]||(v[3]=_=>d.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(D,{flat:"",label:"Batal",color:"primary",disable:d.isProcessing},null,8,["disable"]),[[ue]]),ee(e(D,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:d.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},lf=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"})),of={key:0},nf={style:{float:"right"}},sf={key:1},rf={style:{float:"right"}},df={key:2},uf={style:{float:"right"}},mf={key:3},cf={style:{float:"right"}},pf={style:{float:"right"}},ff={class:"q-gutter-sm"},gf={class:"q-my-md"},bf={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(d,{emit:n}){const u=q(null),o=()=>{var s;(s=u.value)==null||s.focus()};return(s,i)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":i[0]||(i[0]=b=>s.$emit("update:modelValue",b)),onBeforeShow:o,persistent:""},{default:l(()=>[e(pe,{style:{"min-width":"300px"}},{default:l(()=>[e(te,{class:"q-py-none q-pt-md"},{default:l(()=>i[1]||(i[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:l(()=>[i[22]||(i[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[i[2]||(i[2]=t("td",null,"ID",-1)),i[3]||(i[3]=t("td",null,":",-1)),t("td",null,r(d.order.formatted_id),1)]),d.customer?(p(),h("tr",of,[i[5]||(i[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),i[6]||(i[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[y(r(d.customer.name)+" ",1),i[4]||(i[4]=t("br",null,null,-1)),y(r(d.customer.code),1)])])):k("",!0),t("tr",null,[i[8]||(i[8]=t("td",null,"Total",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,[i[7]||(i[7]=y(" Rp. ")),t("div",nf,r(a(L)(d.payment.total)),1)])]),d.payment.cash_amount?(p(),h("tr",sf,[i[11]||(i[11]=t("td",null,"Tunai",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,[i[10]||(i[10]=y(" Rp. ")),t("div",rf,r(a(L)(d.payment.cash_amount)),1)])])):k("",!0),d.payment.wallet_amount?(p(),h("tr",df,[i[14]||(i[14]=t("td",null,"Wallet",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,[i[13]||(i[13]=y(" Rp. ")),t("div",uf,r(a(L)(d.payment.wallet_amount)),1)])])):k("",!0),d.payment.remaining_debt?(p(),h("tr",mf,[i[17]||(i[17]=t("td",null,"Piutang",-1)),i[18]||(i[18]=t("td",null,":",-1)),t("td",null,[i[16]||(i[16]=y(" Rp. ")),t("span",cf,r(a(L)(d.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Kembalian",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,[i[19]||(i[19]=y(" Rp. ")),t("div",pf,r(a(L)(d.payment.change)),1)])])])])]),_:1}),e(mt,{align:"center"},{default:l(()=>[t("div",ff,[e(D,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(D,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",gf,[e(D,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},bo=wt(bf,[["__scopeId","data-v-15f5d36e"]]),vf=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),yf={class:"q-gutter-sm"},_f={class:"row items-center"},kf={class:"text-weight-bold"},wf={class:"row q-col-gutter-none full-width"},hf={class:"col-sm-6 col-12 col"},$f={class:"row full-width"},xf={class:"text-grey q-mt-xs q-ml-sm"},Sf={class:"col-sm-6 col-12"},Vf={class:"row q-ml-sm items-end"},qf={class:"row col grow"},Cf={class:"col-12 q-pa-sm column"},Tf={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},Pf={key:0,class:"col"},Of={class:"text-caption text-grey-6 q-mt-xs"},If={key:0,class:"text-caption text-grey-8 q-mt-xs"},Rf={class:"text-italic"},Df={key:1,class:"col"},Uf={class:"q-pa-sm q-pb-none text-grey-8"},Af={class:"col"},jf={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Ef={class:"text-h4 text-weight-bold"},Mf={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Nf={class:"col q-py-sm"},Bf={class:"q-py-sm"},zf={__name:"Editor",setup(d){const n=xe(),u=fe(),o=q(!0),s=q(null),i=q(null),b=q(null),f=q(!1),m=q(null),c=q(null),{isFullscreen:v,toggleFullscreen:_}=fo(c),g=u.props.data.formatted_id,S=q(u.props.data.supplier),O=q(null),w=q(""),I=q(!1),C=q(!1),x=q(!1),U=q(!1),F=q(!1),T=q(!1),R=q(null),B=Oe({id:u.props.data.id,formatted_id:u.props.data.formatted_id,supplier_id:u.props.data.supplier_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),M=G(()=>B.items.reduce((ge,z)=>ge+z.cost*z.quantity,0)),E=()=>{var ge;_(),v.value||(ge=m==null?void 0:m.value)==null||ge.hideDrawer()},$=ge=>isNaN(ge)||ge<=0?(vt("Kuantitas tidak valid.","top"),!1):!0,K=ge=>isNaN(ge)||ge<0?(vt("Harga tidak valid.","top"),!1):!0,se=ge=>!ge||ge.length==0?(vt("Barcode tidak valid.","top"),!1):!0,j=ge=>{w.value.endsWith("*")?w.value+=ge.name:w.value=ge.name},A=async()=>{const ge=w.value.trim();if(ge.length===0){x.value=!0;return}const z=ge.split("*");let H=1,me="",re=null;if(z.length===1)me=z[0];else if(z.length<=3)H=parseInt(z[0]),me=z[1],z.length===3&&(re=parseFloat(z[2]));else{vt("Input tidak valid.","top");return}if(me.length===0){x.value=!0;return}!se(me)&&!$(H)&&!K(re)||(I.value=!0,await Qe.post(route("admin.purchase-order.add-item"),{order_id:B.id,product_code:me,qty:H,cost:re,merge:o.value}).then(ce=>{const Fe=ce.data.data.item;let at=-1;ce.data.data.mergeItem&&(at=B.items.findIndex(bt=>bt.id===Fe.id)),at===-1?B.items.push(Fe):B.items[at]=Fe,w.value="",re!==null&&re!==parseFloat(Fe.cost)&&vt("Harga tidak dapat diubah!","top")}).catch(ce=>{var Fe,at;yt((at=(Fe=ce.response)==null?void 0:Fe.data)==null?void 0:at.message,"top"),console.error("Gagal mengambil data produk:",ce)}),I.value=!1,kt(()=>{var ce;(ce=s.value)==null||ce.focus()}))},Z=ge=>{R.value=Object.create(ge),U.value=!0},we=ge=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ge.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{I.value=!0,Qe.post(route("admin.purchase-order.remove-item"),{id:ge.id}).then(()=>{const z=B.items.findIndex(H=>H.id===ge.id);z!==-1&&(B.items.splice(z,1)[0],_t("Item telah dihapus","top"))}).catch(z=>{var H,me;yt(((me=(H=z==null?void 0:z.response)==null?void 0:H.data)==null?void 0:me.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(z)}).finally(()=>{I.value=!1})})},le=()=>{I.value=!0;const ge=i.value.getCurrentItem(),z={id:ge.id,qty:ge.quantity,cost:ge.cost};ge.notes&&(z.notes=ge.notes),Qe.post(route("admin.purchase-order.update-item"),z).then(H=>{const me=H.data.data,re=B.items.findIndex(ce=>ce.id===me.id);re!==-1&&(B.items[re]=me,_t("Item telah diperbarui","top"))}).catch(H=>{var me,re;yt(((re=(me=H==null?void 0:H.response)==null?void 0:me.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(H)}).finally(()=>{I.value=!1})};he(()=>{const ge=z=>{z.key==="F1"?(z.preventDefault(),f.value=!0):z.key==="F2"?(z.preventDefault(),s.value.focus()):z.key==="F3"?(z.preventDefault(),b.value.focus()):z.key==="F4"?(z.preventDefault(),o.value=!o.value):z.key==="F10"?(z.preventDefault(),C.value=!0):z.key==="F11"&&(z.preventDefault(),E())};document.addEventListener("keydown",ge),Ut(()=>{document.removeEventListener("keydown",ge)}),kt(()=>{var z;(z=m==null?void 0:m.value)==null||z.hideDrawer()})});const qe=ge=>{S.value=ge,B.supplier_id=ge==null?void 0:ge.id,Ne(),kt(()=>{var z;(z=s.value)==null||z.focus()})},Ne=()=>{I.value=!0;const ge={id:B.id,supplier_id:B.supplier_id,datetime:Zt(B.datetime),notes:B.notes};Qe.post(route("admin.purchase-order.update"),ge).then(z=>{const H=z.data.data.id;B.supplier_id=H.supplier_id}).catch(z=>{var H,me;yt(((me=(H=z==null?void 0:z.response)==null?void 0:H.data)==null?void 0:me.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(z)}).finally(()=>{I.value=!1})},ft=ge=>{if(B.items.length===0){_t("Item masih kosong","top");return}const z={id:B.id,...ge};I.value=!0,Qe.post(route("admin.purchase-order.close"),z).then(H=>{_t("Transaksi selesai"),X.visit(route("admin.purchase-order.detail",{id:B.id}))}).catch(H=>{var me,re;yt((re=(me=H.response)==null?void 0:me.data)==null?void 0:re.message),console.error(H)}).finally(()=>{I.value=!1})},pt=()=>{Wt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${B.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.purchase-order.cancel",{id:B.id}),{id:B.id}).then(()=>{_t("Transaksi telah dibatalkan."),X.visit(route("admin.purchase-order.detail",{id:B.id}))}).catch(ge=>{var H,me;const z=((me=(H=ge.response)==null?void 0:H.data)==null?void 0:me.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:z,color:"warning",position:"bottom"}),console.error(ge)})})},gt=()=>{window.open(route("admin.purchase-order.detail",{id:B.id})+"?preview=1","_blank")};return(ge,z)=>{const H=Q("i-head"),me=Q("authenticated-layout");return p(),h(W,null,[e(H,{title:a(g)},null,8,["title"]),e(me,{ref_key:"authLayoutRef",ref:m,"show-drawer-button":!0},{title:l(()=>[y(r(a(g)),1)]),"left-button":l(()=>[t("div",yf,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:z[0]||(z[0]=re=>a(X).get(ge.route("admin.purchase-order.index")))})])]),"right-button":l(()=>[t("div",_f,[a(n).screen.gt.sm?(p(),h(W,{key:0},[t("div",kf,r(a(u).props.auth.user.username),1),z[22]||(z[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(co)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Ve,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(pe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",wf,[t("div",hf,[t("div",$f,[e(Gp,{ref_key:"supplierAutocompleteRef",ref:b,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:S.value,"onUpdate:modelValue":z[2]||(z[2]=re=>S.value=re),label:"Pemasok",disable:I.value,onSupplierSelected:qe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",xf," Saldo: "+r(S.value?"Rp. "+a(L)(S.value?S.value.balance:0):"Tidak tersedia"),1)])]),t("div",Sf,[e(oe,{ref_key:"userInputRef",ref:s,modelValue:w.value,"onUpdate:modelValue":z[5]||(z[5]=re=>w.value=re),onKeyup:z[6]||(z[6]=ta(J(re=>A(),["prevent"]),["enter"])),loading:I.value,disable:I.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(V,{name:"search",onClick:z[3]||(z[3]=re=>x.value=!0),class:"cursor-pointer"})]),append:l(()=>{var re;return[((re=w.value)==null?void 0:re.length)>0?(p(),P(V,{key:0,name:"send",onClick:z[4]||(z[4]=ce=>A()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",Vf,[e(qt,{class:"col",modelValue:o.value,"onUpdate:modelValue":z[7]||(z[7]=re=>o.value=re),label:"Gabungkan item",disable:I.value},null,8,["modelValue","disable"])])])]),t("div",qf,[t("div",Cf,[e(so,{items:B.items,onUpdateQuantity:z[8]||(z[8]=({id:re,value:ce})=>ge.updateQuantity(re,ce)),onRemoveItem:we,onEditItem:Z,"is-processing":I.value},null,8,["items","is-processing"])])]),t("div",Tf,[a(n).screen.gt.sm?(p(),h("div",Pf,[t("div",Of,r(B.items.length)+" item(s) ",1),B.notes?(p(),h("div",If,[z[23]||(z[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Rf,[e(ke,{text:B.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(n).screen.gt.sm?(p(),h("div",Df,[t("div",Uf,[t("div",null,"#: "+r(B.formatted_id),1),t("div",null,r(a(ve)(B.datetime)),1)])])):k("",!0),t("div",Af,[t("div",jf,[z[25]||(z[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Ef,[z[24]||(z[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),y(" "+r(a(L)(M.value)),1)])])])]),t("div",Mf,[t("div",Nf,[e(D,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:z[9]||(z[9]=re=>C.value=!0),disable:!ge.$can("admin.purchase-order.close")||I.value||B.items.length===0||B.status!=="draft",loading:I.value},null,8,["disable","loading"])]),t("div",Bf,[e(D,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:z[13]||(z[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[ee((p(),P(ae,{clickable:"",onClick:z[10]||(z[10]=J(re=>F.value=!0,["stop"]))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>z[26]||(z[26]=[y("Edit Rincian")])),_:1})]),_:1})),[[ne],[ue]]),ee((p(),P(ae,{clickable:"",onClick:z[11]||(z[11]=J(re=>gt(),["stop"]))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"preview"})]),_:1}),e(N,null,{default:l(()=>z[27]||(z[27]=[y("Pratinjau")])),_:1})]),_:1})),[[ne],[ue]]),ee((p(),P(ae,{clickable:"",onClick:z[12]||(z[12]=J(re=>pt(),["stop"]))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"cancel",color:"negative"})]),_:1}),e(N,{class:"text-negative"},{default:l(()=>z[28]||(z[28]=[y(" Batalkan ")])),_:1})]),_:1})),[[ne],[ue]]),e(Xe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(mo,{ref_key:"itemEditorRef",ref:i,modelValue:U.value,"onUpdate:modelValue":z[14]||(z[14]=re=>U.value=re),item:R.value,onSave:z[15]||(z[15]=re=>le()),"is-processing":I.value},null,8,["modelValue","item","is-processing"]),e(io,{modelValue:C.value,"onUpdate:modelValue":z[16]||(z[16]=re=>C.value=re),onAccepted:ft,form:B,supplier:S.value,total:M.value,accounts:a(u).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(uo,{modelValue:x.value,"onUpdate:modelValue":z[17]||(z[17]=re=>x.value=re),"show-cost":!0,onProductSelected:j},null,8,["modelValue"]),e(go,{modelValue:F.value,"onUpdate:modelValue":z[18]||(z[18]=re=>F.value=re),data:B,onSave:z[19]||(z[19]=re=>Ne()),"is-processing":I.value},null,8,["modelValue","data","is-processing"]),e(po,{modelValue:f.value,"onUpdate:modelValue":z[20]||(z[20]=re=>f.value=re)},null,8,["modelValue"]),e(bo,{modelValue:T.value,"onUpdate:modelValue":z[21]||(z[21]=re=>T.value=re),order:B,supplier:S.value,total:M.value,payment:O.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},Ff=Object.freeze(Object.defineProperty({__proto__:null,default:zf},Symbol.toStringTag,{value:"Module"})),Lf={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(d){const n=window.CONSTANTS.PURCHASE_ORDER_STATUSES,u={draft:"orange",closed:"green",canceled:"red"};return(o,s)=>(p(),P(ia,{status:d.status,statuses:a(n),colors:u},null,8,["status","statuses"]))}},Hf={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(d){const n=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,u={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,s)=>(p(),P(ia,{status:d.status,statuses:a(n),colors:u},null,8,["status","statuses"]))}};const Kf={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Yf={class:"q-pa-xs"},Qf={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Wf={key:0},Jf={key:1},Gf={key:0},Xf={key:0},Zf={key:1},eg={class:"flex justify-end"},ml="Pembelian",tg={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=Kt(),c=Yt(),v=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...Rt(m-2,m-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Dt()],g=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],S=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],O=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],w=Oe({search:"",year:m,month:c,status:"all",payment_status:"all",delivery_status:"all",...De()}),I=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{B()});const x=$=>{if($.status=="draft"){U($);return}F($)},U=$=>{X.get(route("admin.purchase-order.edit",$.id))},F=$=>{X.get(route("admin.purchase-order.detail",$.id))},T=$=>{Wt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.purchase-order.cancel",{id:$.id}),{id:$.id}).then(K=>{const se=K.data.data,j=o.value.findIndex(A=>A.id===se.id);if(j===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[j].status="canceled",n.notify({message:K.data.message,position:"bottom"})}).catch(K=>{var j,A;const se=((A=(j=K.response)==null?void 0:j.data)==null?void 0:A.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:se,color:"warning",position:"bottom"}),console.error(K)})})},R=$=>lt({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.formatted_id}?`,url:route("admin.purchase-order.delete",$.id),fetchItemsCallback:B,loading:s}),B=($=null)=>{Ue({pagination:I,filter:w,props:$,rows:o,url:route("admin.purchase-order.data"),loading:s,tableRef:i})},M=()=>{B()},E=G(()=>n.screen.gt.sm?C:C.filter($=>$.name==="id"||$.name==="action"));return Ae(()=>w.year,$=>{$===null&&(w.month=null)}),($,K)=>{const se=Q("i-head"),j=Q("authenticated-layout");return p(),h(W,null,[e(se,{title:ml}),e(j,null,He({title:l(()=>[y(r(ml))]),"right-button":l(()=>[e(D,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:K[0]||(K[0]=A=>u.value=!u.value)},null,8,["icon"]),$.$can("admin.purchase-order.edit")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:K[1]||(K[1]=A=>a(X).get($.route("admin.purchase-order.add")))})):k("",!0)]),default:l(()=>[t("div",Yf,[e(Pe,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:I.value,"onUpdate:pagination":K[11]||(K[11]=A=>I.value=A),filter:w.search,loading:s.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Me({height:a(f)}),onRequest:B,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:A,message:Z,filter:we})=>[t("div",Qf,[t("span",null,r(Z)+" "+r(we?" with term "+we:""),1)])]),body:l(A=>[e(Ce,{props:A,class:"cursor-pointer",onClick:J(Z=>x(A.row),["prevent"])},{default:l(()=>[e(Y,{key:"id",props:A,class:"wrap-column"},{default:l(()=>[t("div",null,[e(V,{name:"tag"}),y(" "+r(A.row.formatted_id),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),y(r(a(ve)(A.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(p(),h(W,{key:0},[A.row.supplier?(p(),h("div",Wf,[e(V,{name:"person",class:"inline-icon"}),e(Ul,{href:$.route("admin.supplier.detail",{id:A.row.supplier.id}),onClick:K[8]||(K[8]=J(()=>{},["stop"]))},{default:l(()=>[y("  "+r(A.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(L)(A.row.grand_total)),1),A.row.notes?(p(),h("div",Jf,[e(V,{name:"notes"}),y(" "+r(A.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Lf,{status:A.row.status},null,8,["status"]),e(Hf,{status:A.row.payment_status},null,8,["status"]),k("",!0)])]),_:2},1032,["props"]),e(Y,{key:"supplier_id",props:A},{default:l(()=>[A.row.supplier?(p(),h("div",Gf,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),y(" "+r(A.row.supplier_name),1)]),A.row.supplier_phone?(p(),h("div",Xf,[e(V,{name:"phone",class:"inline-icon"}),y(" "+r(A.row.supplier_phone),1)])):k("",!0),A.row.supplier_address?(p(),h("div",Zf,[e(V,{name:"home_pin",class:"inline-icon"}),y(" "+r(A.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total",props:A},{default:l(()=>[y(r(a(L)(A.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:A},{default:l(()=>[e(ke,{text:A.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:A,onClick:K[10]||(K[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",eg,[$.$can("admin.purchase-order.detail")||$.$can("admin.purchase-order.edit")||$.$can("admin.purchase-order.cancel")||$.$can("admin.purchase-order.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:K[9]||(K[9]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[A.row.status!="draft"&&$.$can("admin.purchase-order.detail")?ee((p(),P(ae,{key:0,onClick:J(Z=>F(A.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"visibility"})]),_:1}),e(N,null,{default:l(()=>K[12]||(K[12]=[y(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),A.row.status=="draft"&&$.$can("admin.purchase-order.edit")?ee((p(),P(ae,{key:1,onClick:J(Z=>U(A.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>K[13]||(K[13]=[y(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),A.row.status=="draft"&&$.$can("admin.purchase-order.cancel")?ee((p(),P(ae,{key:2,onClick:J(Z=>T(A.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"cancel"})]),_:1}),e(N,null,{default:l(()=>K[14]||(K[14]=[y(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),e(Xe),$.$can("admin.purchase-order.delete")?ee((p(),P(ae,{key:3,onClick:J(Z=>R(A.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>K[15]||(K[15]=[y(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Kf,[e(de,{modelValue:w.year,"onUpdate:modelValue":[K[2]||(K[2]=A=>w.year=A),M],options:v,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(p(),P(de,{key:0,modelValue:w.month,"onUpdate:modelValue":[K[3]||(K[3]=A=>w.month=A),M],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:w.status,"onUpdate:modelValue":[K[4]||(K[4]=A=>w.status=A),M],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:w.payment_status,"onUpdate:modelValue":[K[5]||(K[5]=A=>w.payment_status=A),M],options:S,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":K[7]||(K[7]=A=>w.search=A),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ag=Object.freeze(Object.defineProperty({__proto__:null,default:tg},Symbol.toStringTag,{value:"Module"})),lg={class:"column"},og={class:"bg-grey-2 q-pa-xs"},ng={class:"text-subtitle1 text-bold text-grey-10"},sg={class:"text-caption text-grey-8"},rg={class:"col-12 col-sm-6"},ig={class:"full-width"},dg={key:1},ug={key:0},mg={key:1},cg={class:"col-12 col-sm-6",align:"left"},pg={class:"full-width"};const fg={key:1},gg={class:"full-width",style:{"border-collapse":"collapse"}},bg={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},vg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},yg={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},_g={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},kg={key:0},wg={class:"col-12 col-sm-6"},hg={class:"text-body2 text-grey-7 text-italic"},$g={class:"col-12 col-sm-6"},xg={class:"row justify-end q-gutter-y-xs"},Sg={class:"col-12 row justify-between"},Vg={class:"text-subtitle2 text-bold"},vo={__name:"InvoiceTab",props:{data:Object},setup(d){const n=d;return(u,o)=>{const s=Q("i-link");return p(),h("div",lg,[e(te,{class:"q-pa-none"},{default:l(()=>[t("div",og,[t("div",ng," INVOICE #"+r(n.data.formatted_id),1),t("div",sg,[y(" Kasir: "+r(n.data.cashier.username)+" - "+r(n.data.cashier.name)+" | "+r(a(ve)(n.data.datetime))+" ",1),n.data.cashier_session?(p(),h(W,{key:0},[y(" | Session ID: "+r(n.data.cashier_session.id)+" | Terminal: "+r(n.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Xe),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",rg,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",ig,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.customer?(p(),P(s,{key:0,href:u.route("admin.customer.detail",{id:n.data.customer_id})},{default:l(()=>[e(V,{class:"inline-icon",name:"person"}),y(" "+r(n.data.customer_name)+" ("+r(n.data.customer_code)+") ",1)]),_:1},8,["href"])):(p(),h("div",dg,[e(V,{class:"inline-icon",name:"person"}),o[0]||(o[0]=y(" Pelanggan Umum "))]))])]),n.data.customer_phone?(p(),h("tr",ug,[t("td",null,[e(V,{class:"inline-icon",name:"phone"}),y(" "+r(n.data.customer_phone),1)])])):k("",!0),n.data.customer_address?(p(),h("tr",mg,[t("td",null,[e(V,{class:"inline-icon",name:"home_pin"}),y(" "+r(n.data.customer_address),1)])])):k("",!0)])])]),t("div",cg,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",pg,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.$CONSTANTS.SALES_ORDER_STATUSES[n.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[n.data.payment_status]),1)]),k("",!0),n.data.due_date?(p(),h("tr",fg,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(Lt)(n.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Xe),e(te,{class:"q-pa-sm"},{default:l(()=>[t("table",gg,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(p(!0),h(W,null,tt(n.data.details,i=>(p(),h("tr",{key:i.id},[t("td",bg,r(i.product_name),1),t("td",vg,r(a(L)(i.price)),1),t("td",yg,r(i.quantity),1),t("td",_g,r(a(L)(i.subtotal_price)),1)]))),128)),n.data.details.length==0?(p(),h("tr",kg,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Xe),e(te,{class:"row",align:"left"},{default:l(()=>[t("div",wg,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",hg,r(n.data.notes?n.data.notes:"-"),1)]),t("div",$g,[t("div",xg,[t("div",Sg,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Vg,r(a(L)(n.data.grand_total)),1)])])])]),_:1})])}}},qg=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),Cg={key:0,class:"text-center q-mb-md text-grey-8"},Tg={class:"text-subtitle2 text-weight-medium"},Pg={class:"text-h5 text-center text-primary q-pb-md"},Og={class:"text-center q-mt-md"},Ig={key:0,class:"text-h6 text-negative text-weight-bold"},Rg={key:1,class:"text-h6 text-green-8 text-weight-bold"},Dg={key:2,class:"text-h6 text-positive text-weight-bold"},yo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(d,{emit:n}){const u=d,o=n,s=fe(),i=q(!1),b=q({method:"cash",amount:u.total,notes:null}),f=s.props.data.customer,m=G(()=>[{label:"Tunai",value:"cash"},...f?[{label:"Wallet",value:"wallet"}]:[],...s.props.accounts.map(O=>({label:O.name,value:O.id}))]),c=G(()=>u.total-(b.value.amount||0)),v=G(()=>{const O=b.value.amount||0;return u.total,O<=0?"Jumlah pembayaran harus lebih dari 0.":b.value.method==="wallet"&&f&&O>f.wallet_balance?"Saldo wallet tidak mencukupi.":null}),_=G(()=>v.value===null),g=()=>{if(!_.value)return;i.value=!0;const O={total_paid:b.value.amount,payments:[{id:b.value.method,amount:b.value.amount}],notes:b.value.notes,change:Math.max(0,(b.value.amount||0)-u.total),remaining_debt:Math.max(0,u.total-(b.value.amount||0))};o("accepted",O),i.value=!1},S=()=>{b.value.amount=u.total,b.value.method="cash",b.value.notes=null};return(O,w)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":w[4]||(w[4]=I=>O.$emit("update:modelValue",I)),onBeforeShow:S},{default:l(()=>[e(pe,{style:{"min-width":"300px"}},{default:l(()=>[e(te,null,{default:l(()=>w[5]||(w[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:l(()=>[a(f)?(p(),h("div",Cg,[t("div",Tg,[y(r(a(f).code)+" ",1),w[6]||(w[6]=t("br",null,null,-1)),y(" "+r(a(f).name)+" ",1),w[7]||(w[7]=t("br",null,null,-1)),y(" Saldo: Rp. "+r(a(L)(a(f).wallet_balance)),1)])])):k("",!0),t("div",Pg," Total: Rp. "+r(a(L)(d.total)),1),e(a(de),{modelValue:b.value.method,"onUpdate:modelValue":w[0]||(w[0]=I=>b.value.method=I),options:m.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:i.value},null,8,["modelValue","options","disable"]),e(Re,{modelValue:b.value.amount,"onUpdate:modelValue":w[1]||(w[1]=I=>b.value.amount=I),label:"Jumlah Uang",outlined:!0,dense:"",disable:i.value,class:"q-mb-md",error:!_.value,"error-message":v.value},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:b.value.notes,"onUpdate:modelValue":w[2]||(w[2]=I=>b.value.notes=I),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:i.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Og,[c.value>0?(p(),h("div",Ig," Sisa Tagihan: Rp. "+r(a(L)(c.value)),1)):c.value<0?(p(),h("div",Rg," Kembalian: Rp. "+r(a(L)(Math.abs(c.value))),1)):(p(),h("div",Dg," Tagihan Terbayar "))])]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:w[3]||(w[3]=I=>O.$emit("update:modelValue",!1))}),e(D,{label:"Bayar",color:"positive",onClick:g,disable:i.value||!_.value,loading:i.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ug=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),Ag={class:"column"},jg={class:"full-width",style:{"border-collapse":"collapse"}},Eg={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Mg={class:"row items-center q-gutter-x-sm"},Ng={class:"text-weight-bold"},Bg={class:"row items-center q-gutter-x-sm q-mt-xs"},zg={class:"text-caption text-grey-6"},Fg={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Lg={class:"text-caption text-grey-6"},Hg={class:"q-mt-xs"},Kg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Yg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Qg={key:0},Wg={class:"q-pa-sm"},Jg={class:"text-right q-pa-sm"},Gg={class:"text-right q-pa-sm"},_o={__name:"PaymentTab",props:{data:Object},setup(d){const n=d,u=G(()=>n.data.grand_total-n.data.total_paid),o=xe(),s=q(!1),i=()=>{s.value=!0},b=async m=>{const c={order_id:n.data.id,payments:m.payments,notes:m.notes};o.loading.show({message:"Memproses pembayaran..."});try{const v=await Qe.post(route("admin.sales-order.add-payment"),c);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),s.value=!1,X.visit(route("admin.sales-order.detail",{id:n.data.id})+"?tab=payment")}catch(v){let _="Gagal memproses pembayaran.";v.response&&v.response.data&&v.response.data.message?_=v.response.data.message:v.message&&(_=v.message),o.notify({message:_,color:"negative",icon:"error"})}finally{o.loading.hide()}},f=m=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Qe.post(route("admin.sales-order.delete-payment",{id:m.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),X.visit(route("admin.sales-order.detail",{id:n.data.id})+"?tab=payment")}catch(c){let v="Gagal menghapus pembayaran.";c.response&&c.response.data&&c.response.data.message?v=c.response.data.message:c.message&&(v=c.message),o.notify({message:v,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(m,c)=>(p(),h(W,null,[t("div",Ag,[e(Xe),e(te,{class:"q-pa-sm"},{default:l(()=>[t("table",jg,[c[6]||(c[6]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(p(!0),h(W,null,tt(n.data.payments,v=>(p(),h("tr",{key:v.id},[t("td",Eg,[t("div",Mg,[e(V,{name:"tag",size:"xs",color:"grey-7"}),t("span",Ng,r(v.formatted_id),1)]),t("div",Bg,[e(V,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",zg,r(a(ve)(v.created_at)),1)]),(v.type==="transfer"||v.type==="cash")&&v.account?(p(),h("div",Fg,[e(V,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Lg,r(v.account.name),1)])):k("",!0),t("div",Hg,[e(ut,{label:m.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[v.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Kg,r(a(L)(v.amount)),1),t("td",Yg,[m.$can("admin.sales-order.delete-payment")?(p(),P(D,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(v)},null,8,["onClick"])):k("",!0)])]))),128)),n.data.payments.length==0?(p(),h("tr",Qg,c[2]||(c[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[t("td",Wg,[m.$can("admin.sales-order.add-payment")&&u.value>0?(p(),P(D,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:c[0]||(c[0]=J(v=>i(),["stop"]))})):k("",!0)]),c[3]||(c[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",Jg,r(a(L)(n.data.total_paid)),1)]),t("tr",null,[c[4]||(c[4]=t("th",{class:"text-right q-pa-sm",colspan:"2"},"Sisa Tagihan",-1)),t("th",Gg,r(a(L)(u.value)),1),c[5]||(c[5]=t("td",null,null,-1))])])])]),_:1})]),e(yo,{modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=v=>s.value=v),total:u.value,customer:n.data.customer,onAccepted:b},null,8,["modelValue","total","customer"])],64))}},Xg=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),Zg={class:"q-gutter-sm"},eb={class:"col col-lg-6 q-pa-xs",align:"center"},cl="Rincian Penjualan",tb={__name:"Detail",setup(d){const n=new URLSearchParams(window.location.search),u=fe(),o=u.props.data,s=q(n.get("preview")||!1),b=q(n.get("tab")||"invoice");he(()=>{kt(()=>{const m=n.get("print_size");m&&f(m)})});const f=m=>{window.open(route("admin.sales-order.print",{id:u.props.data.id,size:m}),"_self")};return(m,c)=>{const v=Q("i-head"),_=Q("authenticated-layout");return p(),h(W,null,[e(v,{title:cl}),e(_,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(cl))])]),"left-button":l(()=>[t("div",Zg,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=g=>m.$goBack())})])]),"right-button":l(()=>[e(D,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:c[1]||(c[1]=g=>f("58mm"))}),e(D,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:c[2]||(c[2]=g=>f("a4"))}),s.value?k("",!0):(p(),P(D,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:c[3]||(c[3]=g=>a(X).get(m.route("admin.sales-order.add")))}))]),default:l(()=>[e(Ve,{class:"row justify-center print-visible"},{default:l(()=>[t("div",eb,[e(pe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(At,{modelValue:b.value,"onUpdate:modelValue":c[4]||(c[4]=g=>b.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(nt,{name:"invoice",label:"Invoice"}),s.value?k("",!0):(p(),P(nt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Xe),e(jt,{modelValue:b.value,"onUpdate:modelValue":c[5]||(c[5]=g=>b.value=g),animated:""},{default:l(()=>[e(st,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(vo,{data:a(o)},null,8,["data"])]),_:1}),e(st,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(_o,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},ab=Object.freeze(Object.defineProperty({__proto__:null,default:tb},Symbol.toStringTag,{value:"Module"})),lb={class:"text-weight-medium"},ob={class:"text-caption text-grey-6"},nb={class:"column items-end"},sb={class:"text-caption text-grey-6 text-italic"},ko={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(d){const n=xe(),u=Ge(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(s,i)=>(p(),P(Pe,{dense:"",rows:d.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,style:Me({height:a(u)})},{header:l(b=>[e(Ce,{props:b,class:"bg-grey-4"},{default:l(()=>[(p(!0),h(W,null,tt(b.cols,f=>(p(),P(ea,{key:f.name,props:b,class:"text-weight-bold text-grey-8"},{default:l(()=>[y(r(f.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(b=>[e(Ce,{props:b,class:"hover-highlight"},{default:l(()=>[e(Y,{key:"name",props:b,class:"text-left"},{default:l(()=>[t("div",lb,r(b.row.product_name),1),t("div",ob,r(b.row.product_barcode),1),b.row.notes?(p(),P(ke,{key:0,text:b.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal_price",props:b,class:"text-right"},{default:l(()=>[t("div",nb,[t("div",null,r(a(L)(b.row.subtotal_price)),1),t("div",sb,r(a(L)(b.row.quantity))+" x Rp. "+r(a(L)(b.row.price)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:b,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(D,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:f=>s.$emit("edit-item",b.row),disable:d.isProcessing},null,8,["onClick","disable"]),e(D,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:f=>s.$emit("remove-item",b.row),disable:d.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},rb=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),ib={key:0,class:"text-center q-mb-md text-grey-8"},db={class:"text-subtitle2 text-weight-medium"},ub={class:"text-h5 text-center text-primary q-pb-md"},mb={class:"q-mb-md flex flex-center"},cb={key:1},pb={class:"col-6"},fb={class:"col-6"},gb={class:"row"},bb={class:"text-center q-mt-md"},vb={key:0,class:"text-h6 text-negative text-weight-bold"},yb={key:1,class:"text-h6 text-green-8 text-weight-bold"},_b={key:2,class:"text-h6 text-positive text-weight-bold"},kb={key:2},wb={class:"text-h6 text-negative text-center"},hb={key:3},wo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(d,{emit:n}){const u=d,o=n,s=fe(),i=q(!1),b=q("cash"),f=q(new Date),m=q(null),c=Oe([{id:"cash",amount:0}]),v=s.props.settings.default_payment_mode,_=G(()=>[{label:"Tunai",value:"cash"},...u.customer?[{label:"Wallet",value:"wallet"}]:[],...s.props.accounts.map(M=>({label:M.name,value:M.id}))]),g=G(()=>c.reduce((M,E)=>M+(E.amount||0),0)),S=G(()=>u.total-g.value),O=G(()=>{if(!u.customer)return!0;const M=c.find($=>$.id==="wallet");return(M?M.amount:0)<=u.customer.wallet_balance}),w=new Date,I=ot.addToDate(new Date,{days:30}),C=G(()=>[M=>!!M||"Tanggal jatuh tempo harus diisi",M=>ot.isBetweenDates(M,w,I,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),x=G(()=>{if(b.value==="debt")return!!u.customer&&C.value.every(se=>se(f.value)===!0);const M=O.value,E=c.some(se=>(se.amount||0)>0),$=c.every(se=>(se.amount||0)>=0),K=S.value<=0;return M&&E&&$&&K}),U=()=>{c.length<3&&c.push({id:"cash",amount:0})},F=M=>{if(c.length>1){const E=c.findIndex($=>$.id===M);E!==-1&&c.splice(E,1)}},T=(M,E="cash")=>{b.value=M,f.value=new Date,c.splice(0,c.length),M==="cash"&&(c.splice(0,c.length,{id:E,amount:u.total}),kt(()=>{m.value&&m.value.length>0&&(m.value[0].focus(),m.value[0].select())}))},R=()=>{if(!x.value)return;i.value=!0;let M={total:u.total,is_debt:b.value==="debt"};if(b.value==="debt")M.due_date=ot.formatDate(f.value,"YYYY-MM-DD"),M.payments=[];else{const E=g.value,$=E>u.total?E-u.total:0,K=S.value>0?S.value:0;M.payments=c,M.remaining_debt=K,M.change=$}o("accepted",M),i.value=!1},B=()=>{T("cash",u.customer?v:"cash"),kt(()=>{})};return(M,E)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":E[3]||(E[3]=$=>M.$emit("update:modelValue",$)),onBeforeShow:B},{default:l(()=>[e(pe,{style:{"min-width":"300px"}},{default:l(()=>[e(te,null,{default:l(()=>E[4]||(E[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:l(()=>[d.customer?(p(),h("div",ib,[t("div",db,[y(" Username: "+r(d.customer.code)+" ",1),E[5]||(E[5]=t("br",null,null,-1)),y(" Nama: "+r(d.customer.name),1),E[6]||(E[6]=t("br",null,null,-1)),y(" Saldo: Rp. "+r(a(L)(d.customer.wallet_balance)),1)])])):k("",!0),t("div",ub," Total: Rp. "+r(a(L)(d.total)),1),t("div",mb,[e(a(ro),{modelValue:b.value,"onUpdate:modelValue":[E[0]||(E[0]=$=>b.value=$),T],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!d.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),b.value==="cash"?(p(),h("div",cb,[(p(!0),h(W,null,tt(c,($,K)=>(p(),h("div",{key:$.id,class:"row q-col-gutter-sm q-mb-sm"},[t("div",pb,[e(a(de),{modelValue:$.id,"onUpdate:modelValue":se=>$.id=se,options:_.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:i.value,"hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",fb,[e(Re,{modelValue:$.amount,"onUpdate:modelValue":se=>$.amount=se,label:"Jumlah",outlined:!0,dense:"",disable:i.value,error:$.id==="wallet"&&!O.value,"error-message":$.id==="wallet"&&!O.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:K===0?"firstPaymentInputRef":null},He({_:2},[c.length>1?{name:"append",fn:l(()=>[e(V,{size:"xs",name:"close",class:"cursor-pointer",onClick:se=>F($.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",gb,[e(D,{disable:!(c.length<3&&S.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:U,size:"sm"},null,8,["disable"])]),t("div",bb,[S.value>0?(p(),h("div",vb," Sisa Tagihan: Rp. "+r(a(L)(S.value)),1)):S.value<0?(p(),h("div",yb," Kembalian: Rp. "+r(a(L)(Math.abs(S.value))),1)):(p(),h("div",_b," Tagihan Terbayar "))])])):b.value==="debt"&&d.customer?(p(),h("div",kb,[e($a,{outlined:"",modelValue:f.value,"onUpdate:modelValue":E[1]||(E[1]=$=>f.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(w),"max-date":a(I),rules:C.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",wb," Total Utang: Rp. "+r(a(L)(d.total)),1)])):b.value==="debt"&&!d.customer?(p(),h("div",hb,E[7]||(E[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(D,{flat:"",label:"Batal",color:"grey",onClick:E[2]||(E[2]=$=>M.$emit("update:modelValue",!1))}),e(D,{label:b.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:R,disable:i.value||!x.value,loading:i.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$b=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),xb={class:"row items-center no-wrap"},Sb={class:"col-auto"},ho={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(d,{expose:n,emit:u}){const o=d,s=u,i=()=>{s("save")},b=G(()=>o.item.quantity*o.item.price),f=v=>{v.stopPropagation(),v.preventDefault()},m=v=>{o.modelValue&&(v.key==="Enter"?(i(),f(v)):v.key==="Escape"&&(s("update:modelValue",!1),f(v)))};return he(()=>{window.addEventListener("keydown",m)}),Ut(()=>{window.removeEventListener("keydown",m)}),n({getCurrentItem:()=>o.item}),(v,_)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":_[6]||(_[6]=g=>v.$emit("update:modelValue",g))},{default:l(()=>[e(pe,null,{default:l(()=>[e(te,{class:"q-py-sm"},{default:l(()=>[t("div",xb,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Sb,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=g=>v.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:l(()=>[e(oe,{modelValue:d.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=g=>d.item.product_name=g),label:"Produk","hide-bottom-space":"",readonly:"",disable:d.isProcessing},null,8,["modelValue","disable"]),e(Re,{modelValue:d.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=g=>d.item.quantity=g),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:d.isProcessing},null,8,["modelValue","disable"]),e(Re,{modelValue:d.item.price,"onUpdate:modelValue":_[3]||(_[3]=g=>d.item.price=g),label:"Harga",readonly:!d.item.price_editable,"hide-bottom-space":"",disable:d.isProcessing},null,8,["modelValue","readonly","disable"]),e(Re,{modelValue:b.value,"onUpdate:modelValue":_[4]||(_[4]=g=>b.value=g),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(oe,{modelValue:d.item.notes,"onUpdate:modelValue":_[5]||(_[5]=g=>d.item.notes=g),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(D,{flat:"",label:"Batal",color:"primary",disable:d.isProcessing},null,8,["disable"]),[[ue]]),ee(e(D,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:d.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Vb=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),qb={key:0,class:"q-select__selected-item"},Cb={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(d,{expose:n,emit:u}){const o=q(null),s=d,i=u,b=q([]);let f=null;const m=q(s.modelValue);he(()=>{s.initialData&&(m.value=s.initialData)}),Ae(m,_=>{i("update:modelValue",_),i("customerSelected",_)}),Ae(()=>s.modelValue,_=>{m.value=_}),n({focus:()=>{o.value&&o.value.focus()}});const v=(_,g)=>{if(_.length<s.minLength){g(()=>{b.value=[]});return}f&&clearTimeout(f),f=setTimeout(()=>{Qe.get(`/web-api/customers?q=${_}`).then(S=>{g(()=>{b.value=S.data.data})}).catch(S=>{console.error("Gagal mengambil data pelanggan:",S),g(()=>{b.value=[]})})},500)};return(_,g)=>(p(),P(de,{class:$e(d.class),ref_key:"qSelectRef",ref:o,modelValue:m.value,"onUpdate:modelValue":g[0]||(g[0]=S=>m.value=S),"use-input":"","input-debounce":"0",label:d.label,options:b.value,onFilter:v,clearable:"",error:d.error,behavior:"menu","error-message":d.errorMessage,disable:d.disable,"hide-bottom-space":"",outlined:d.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(S=>[e(ae,Rl(Dl(S.itemProps)),{default:l(()=>[e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>[y(r(S.opt.name),1)]),_:2},1024),e(ye,{caption:""},{default:l(()=>[e(V,{name:"person",size:"14px"}),y(" "+r(S.opt.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(S=>[S.opt?(p(),h("div",qb,r(S.opt.name)+" ("+r(S.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Tb={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(d,{emit:n}){return(u,o)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>u.$emit("update:modelValue",s))},{default:l(()=>[e(pe,{style:{"min-width":"300px"}},{default:l(()=>[e(te,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")])])],-1)])),_:1}),e(mt,{align:"center"},{default:l(()=>[ee(e(D,{dense:"",label:"Tutup"},null,512),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$o=wt(Tb,[["__scopeId","data-v-ed1bbfe5"]]),Pb=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),Ob={class:"row items-center no-wrap"},Ib={class:"col text-subtite text-bold text-grey-8"},Rb={class:"col-auto"},xo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(d,{expose:n,emit:u}){const o=d,s=u,i=()=>{s("save")},b=c=>{c.stopPropagation(),c.preventDefault()},f=c=>{o.modelValue&&(c.key==="Enter"?(i(),b(c)):c.key==="Escape"&&(s("update:modelValue",!1),b(c)))};return he(()=>{window.addEventListener("keydown",f)}),Ut(()=>{window.removeEventListener("keydown",f)}),n({getCurrentItem:()=>o.item}),(c,v)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":v[4]||(v[4]=_=>c.$emit("update:modelValue",_))},{default:l(()=>[e(pe,null,{default:l(()=>[e(te,{class:"q-py-sm"},{default:l(()=>[t("div",Ob,[t("div",Ib," Edit "+r(d.data.formatted_id),1),t("div",Rb,[e(D,{flat:"",size:"sm",round:"",icon:"close",onClick:v[0]||(v[0]=_=>c.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:l(()=>[e(Bt,{modelValue:d.data.datetime,"onUpdate:modelValue":v[1]||(v[1]=_=>d.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:d.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(oe,{modelValue:c.$CONSTANTS.SALES_ORDER_STATUSES[d.data.status],"onUpdate:modelValue":v[2]||(v[2]=_=>c.$CONSTANTS.SALES_ORDER_STATUSES[d.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:d.isProcessing},null,8,["modelValue","disable"]),e(oe,{modelValue:d.data.notes,"onUpdate:modelValue":v[3]||(v[3]=_=>d.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(D,{flat:"",label:"Batal",color:"primary",disable:d.isProcessing},null,8,["disable"]),[[ue]]),ee(e(D,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:d.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Db=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),Ub={key:0},Ab={style:{float:"right"}},jb={key:1},Eb={style:{float:"right"}},Mb={key:2},Nb={style:{float:"right"}},Bb={key:3},zb={style:{float:"right"}},Fb={style:{float:"right"}},Lb={class:"q-gutter-sm"},Hb={class:"q-my-md"},Kb={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(d,{emit:n}){const u=q(null),o=()=>{var s;(s=u.value)==null||s.focus()};return(s,i)=>(p(),P(ct,{"model-value":d.modelValue,"onUpdate:modelValue":i[0]||(i[0]=b=>s.$emit("update:modelValue",b)),onBeforeShow:o,persistent:""},{default:l(()=>[e(pe,{style:{"min-width":"300px"}},{default:l(()=>[e(te,{class:"q-py-none q-pt-md"},{default:l(()=>i[1]||(i[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:l(()=>[i[22]||(i[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[i[2]||(i[2]=t("td",null,"ID",-1)),i[3]||(i[3]=t("td",null,":",-1)),t("td",null,r(d.order.formatted_id),1)]),d.customer?(p(),h("tr",Ub,[i[5]||(i[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),i[6]||(i[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[y(r(d.customer.name)+" ",1),i[4]||(i[4]=t("br",null,null,-1)),y(r(d.customer.code),1)])])):k("",!0),t("tr",null,[i[8]||(i[8]=t("td",null,"Total",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,[i[7]||(i[7]=y(" Rp. ")),t("div",Ab,r(a(L)(d.payment.total)),1)])]),d.payment.cash_amount?(p(),h("tr",jb,[i[11]||(i[11]=t("td",null,"Tunai",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,[i[10]||(i[10]=y(" Rp. ")),t("div",Eb,r(a(L)(d.payment.cash_amount)),1)])])):k("",!0),d.payment.wallet_amount?(p(),h("tr",Mb,[i[14]||(i[14]=t("td",null,"Wallet",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,[i[13]||(i[13]=y(" Rp. ")),t("div",Nb,r(a(L)(d.payment.wallet_amount)),1)])])):k("",!0),d.payment.remaining_debt?(p(),h("tr",Bb,[i[17]||(i[17]=t("td",null,"Piutang",-1)),i[18]||(i[18]=t("td",null,":",-1)),t("td",null,[i[16]||(i[16]=y(" Rp. ")),t("span",zb,r(a(L)(d.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Kembalian",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,[i[19]||(i[19]=y(" Rp. ")),t("div",Fb,r(a(L)(d.payment.change)),1)])])])])]),_:1}),e(mt,{align:"center"},{default:l(()=>[t("div",Lb,[e(D,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(D,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Hb,[e(D,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},So=wt(Kb,[["__scopeId","data-v-85a4c3ae"]]),Yb=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),Qb={class:"q-gutter-sm"},Wb={class:"row items-center"},Jb={class:"text-weight-bold"},Gb={class:"row q-col-gutter-none full-width"},Xb={class:"col-sm-6 col-12 col"},Zb={class:"row full-width"},e1={class:"col-sm-6 col-12"},t1={class:"row q-ml-sm items-end"},a1={class:"row col grow"},l1={class:"col-12 q-pa-sm column"},o1={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},n1={key:0,class:"col"},s1={class:"text-caption text-grey-6 q-mt-xs"},r1={key:0,class:"text-caption text-grey-8 q-mt-xs"},i1={class:"text-italic"},d1={key:1,class:"col"},u1={class:"q-pa-sm q-pb-none text-grey-8"},m1={class:"col"},c1={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},p1={class:"text-h4 text-weight-bold"},f1={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},g1={class:"col q-py-sm"},b1={class:"q-py-sm"},v1={__name:"Editor",setup(d){const n=xe(),u=fe(),o=q(!0),s=q(null),i=q(null),b=q(null),f=q(!1),m=q(null),c=q(null),{isFullscreen:v,toggleFullscreen:_}=fo(c),g=u.props.data.formatted_id,S=q(u.props.data.customer),O=q(null),w=q(""),I=q(!1),C=q(!1),x=q(!1),U=q(!1),F=q(!1),T=q(!1),R=q(null),B=Oe({id:u.props.data.id,formatted_id:u.props.data.formatted_id,customer_id:u.props.data.customer_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),M=G(()=>B.items.reduce((z,H)=>z+H.price*H.quantity,0)),E=()=>{var z;_(),v.value||(z=m==null?void 0:m.value)==null||z.hideDrawer()},$=z=>isNaN(z)||z<=0?(vt("Kuantitas tidak valid.","top"),!1):!0,K=z=>isNaN(z)||z<0?(vt("Harga tidak valid.","top"),!1):!0,se=z=>!z||z.length==0?(vt("Barcode tidak valid.","top"),!1):!0,j=z=>{w.value.endsWith("*")?w.value+=z.name:w.value=z.name},A=async()=>{const z=w.value.trim();if(z.length===0){x.value=!0;return}const H=z.split("*");let me=1,re="",ce=null;if(H.length===1)re=H[0];else if(H.length<=3)me=parseInt(H[0]),re=H[1],H.length===3&&(ce=parseFloat(H[2]));else{vt("Input tidak valid.","top");return}if(re.length===0){x.value=!0;return}!se(re)&&!$(me)&&!K(ce)||(I.value=!0,await Qe.post(route("admin.sales-order.add-item"),{order_id:B.id,product_code:re,qty:me,price:ce,merge:o.value}).then(Fe=>{const at=Fe.data.data.item;let bt=-1;Fe.data.data.mergeItem&&(bt=B.items.findIndex(ua=>ua.id===at.id)),bt===-1?B.items.push(at):B.items[bt]=at,w.value="",ce!==null&&ce!==parseFloat(at.price)&&vt("Harga tidak dapat diubah!","top")}).catch(Fe=>{var at,bt;yt((bt=(at=Fe.response)==null?void 0:at.data)==null?void 0:bt.message,"top"),console.error("Gagal mengambil data produk:",Fe)}),I.value=!1,kt(()=>{var Fe;(Fe=s.value)==null||Fe.focus()}))},Z=z=>{R.value=Object.create(z),U.value=!0},we=z=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${z.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{I.value=!0,Qe.post(route("admin.sales-order.remove-item"),{id:z.id}).then(()=>{const H=B.items.findIndex(me=>me.id===z.id);H!==-1&&(B.items.splice(H,1)[0],_t("Item telah dihapus","top"))}).catch(H=>{var me,re;yt(((re=(me=H==null?void 0:H.response)==null?void 0:me.data)==null?void 0:re.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(H)}).finally(()=>{I.value=!1})})},le=()=>{I.value=!0;const z=i.value.getCurrentItem(),H={id:z.id,qty:z.quantity};z.price_editable&&(H.price=z.price),z.notes&&(H.notes=z.notes),Qe.post(route("admin.sales-order.update-item"),H).then(me=>{const re=me.data.data,ce=B.items.findIndex(Fe=>Fe.id===re.id);ce!==-1&&(B.items[ce]=re,_t("Item telah diperbarui","top"))}).catch(me=>{var re,ce;yt(((ce=(re=me==null?void 0:me.response)==null?void 0:re.data)==null?void 0:ce.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(me)}).finally(()=>{I.value=!1})};he(()=>{const z=H=>{H.key==="F1"?(H.preventDefault(),f.value=!0):H.key==="F2"?(H.preventDefault(),s.value.focus()):H.key==="F3"?(H.preventDefault(),b.value.focus()):H.key==="F4"?(H.preventDefault(),o.value=!o.value):H.key==="F10"?(H.preventDefault(),C.value=!0):H.key==="F11"&&(H.preventDefault(),E())};document.addEventListener("keydown",z),Ut(()=>{document.removeEventListener("keydown",z)}),kt(()=>{var H;(H=m==null?void 0:m.value)==null||H.hideDrawer()})});const qe=z=>{S.value=z,B.customer_id=z==null?void 0:z.id,Ne(),kt(()=>{var H;(H=s.value)==null||H.focus()})},Ne=()=>{I.value=!0;const z={id:B.id,customer_id:B.customer_id,datetime:Zt(B.datetime),notes:B.notes};Qe.post(route("admin.sales-order.update"),z).then(H=>{const me=H.data.data.id;B.customer_id=me.customer_id}).catch(H=>{var me,re;yt(((re=(me=H==null?void 0:H.response)==null?void 0:me.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(H)}).finally(()=>{I.value=!1})},ft=z=>{if(B.items.length===0){_t("Item masih kosong","top");return}const H={id:B.id,...z};I.value=!0,Qe.post(route("admin.sales-order.close"),H).then(me=>{_t("Transaksi selesai"),window.open(route("admin.sales-order.print",{id:B.id,size:u.props.settings.default_print_size}),"_self")}).catch(me=>{var re,ce;yt((ce=(re=me.response)==null?void 0:re.data)==null?void 0:ce.message),console.error(me)}).finally(()=>{I.value=!1})},pt=()=>{Wt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${B.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.sales-order.cancel",{id:B.id}),{id:B.id}).then(()=>{_t("Transaksi telah dibatalkan."),X.visit(route("admin.sales-order.detail",{id:B.id}))}).catch(z=>{var me,re;const H=((re=(me=z.response)==null?void 0:me.data)==null?void 0:re.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:H,color:"warning",position:"bottom"}),console.error(z)})})},gt=()=>{window.open(route("admin.sales-order.detail",{id:B.id})+"?preview=1","_blank")},ge=G(()=>S.value?S.value.wallet_balance>=M.value:!0);return(z,H)=>{const me=Q("i-head"),re=Q("authenticated-layout");return p(),h(W,null,[e(me,{title:a(g)},null,8,["title"]),e(re,{ref_key:"authLayoutRef",ref:m,"show-drawer-button":!0},{title:l(()=>[y(r(a(g)),1)]),"left-button":l(()=>[t("div",Qb,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:H[0]||(H[0]=ce=>a(X).get(z.route("admin.sales-order.index")))})])]),"right-button":l(()=>[t("div",Wb,[a(n).screen.gt.sm?(p(),h(W,{key:0},[t("div",Jb,r(a(u).props.auth.user.username),1),H[22]||(H[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(co)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Ve,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(pe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",Gb,[t("div",Xb,[t("div",Zb,[e(Cb,{ref_key:"customerAutocompleteRef",ref:b,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:S.value,"onUpdate:modelValue":H[2]||(H[2]=ce=>S.value=ce),label:"Pelanggan",disable:I.value,onCustomerSelected:qe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",{class:$e(["q-mt-xs q-ml-sm text-bold",ge.value?"text-green":"text-red"])}," Saldo: "+r(S.value?"Rp. "+a(L)(S.value?S.value.wallet_balance:0):"Tidak tersedia"),3)])]),t("div",e1,[e(oe,{ref_key:"userInputRef",ref:s,modelValue:w.value,"onUpdate:modelValue":H[5]||(H[5]=ce=>w.value=ce),onKeyup:H[6]||(H[6]=ta(J(ce=>A(),["prevent"]),["enter"])),loading:I.value,disable:I.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(V,{name:"search",onClick:H[3]||(H[3]=ce=>x.value=!0),class:"cursor-pointer"})]),append:l(()=>{var ce;return[((ce=w.value)==null?void 0:ce.length)>0?(p(),P(V,{key:0,name:"send",onClick:H[4]||(H[4]=Fe=>A()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",t1,[e(qt,{class:"col",modelValue:o.value,"onUpdate:modelValue":H[7]||(H[7]=ce=>o.value=ce),label:"Gabungkan item",disable:I.value},null,8,["modelValue","disable"])])])]),t("div",a1,[t("div",l1,[e(ko,{items:B.items,onUpdateQuantity:H[8]||(H[8]=({id:ce,value:Fe})=>z.updateQuantity(ce,Fe)),onRemoveItem:we,onEditItem:Z,"is-processing":I.value},null,8,["items","is-processing"])])]),t("div",o1,[a(n).screen.gt.sm?(p(),h("div",n1,[t("div",s1,r(B.items.length)+" item(s) ",1),B.notes?(p(),h("div",r1,[H[23]||(H[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",i1,[e(ke,{text:B.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(n).screen.gt.sm?(p(),h("div",d1,[t("div",u1,[t("div",null,"#: "+r(B.formatted_id),1),t("div",null,r(a(ve)(B.datetime)),1)])])):k("",!0),t("div",m1,[t("div",c1,[H[25]||(H[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",p1,[H[24]||(H[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),y(" "+r(a(L)(M.value)),1)])])])]),t("div",f1,[t("div",g1,[e(D,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:H[9]||(H[9]=ce=>C.value=!0),disable:!z.$can("admin.sales-order.close")||I.value||B.items.length===0||B.status!=="draft",loading:I.value},null,8,["disable","loading"])]),t("div",b1,[e(D,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:H[13]||(H[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[ee((p(),P(ae,{clickable:"",onClick:H[10]||(H[10]=J(ce=>F.value=!0,["stop"]))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>H[26]||(H[26]=[y("Edit Rincian")])),_:1})]),_:1})),[[ne],[ue]]),ee((p(),P(ae,{clickable:"",onClick:H[11]||(H[11]=J(ce=>gt(),["stop"]))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"preview"})]),_:1}),e(N,null,{default:l(()=>H[27]||(H[27]=[y("Pratinjau")])),_:1})]),_:1})),[[ne],[ue]]),ee((p(),P(ae,{clickable:"",onClick:H[12]||(H[12]=J(ce=>pt(),["stop"]))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"cancel",color:"negative"})]),_:1}),e(N,{class:"text-negative"},{default:l(()=>H[28]||(H[28]=[y(" Batalkan ")])),_:1})]),_:1})),[[ne],[ue]]),e(Xe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(ho,{ref_key:"itemEditorRef",ref:i,modelValue:U.value,"onUpdate:modelValue":H[14]||(H[14]=ce=>U.value=ce),item:R.value,onSave:H[15]||(H[15]=ce=>le()),"is-processing":I.value},null,8,["modelValue","item","is-processing"]),e(wo,{modelValue:C.value,"onUpdate:modelValue":H[16]||(H[16]=ce=>C.value=ce),onAccepted:ft,form:B,customer:S.value,total:M.value,accounts:a(u).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(uo,{modelValue:x.value,"onUpdate:modelValue":H[17]||(H[17]=ce=>x.value=ce),onProductSelected:j},null,8,["modelValue"]),e(xo,{modelValue:F.value,"onUpdate:modelValue":H[18]||(H[18]=ce=>F.value=ce),data:B,onSave:H[19]||(H[19]=ce=>Ne()),"is-processing":I.value},null,8,["modelValue","data","is-processing"]),e($o,{modelValue:f.value,"onUpdate:modelValue":H[20]||(H[20]=ce=>f.value=ce)},null,8,["modelValue"]),e(So,{modelValue:T.value,"onUpdate:modelValue":H[21]||(H[21]=ce=>T.value=ce),order:B,customer:S.value,total:M.value,payment:O.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},y1=Object.freeze(Object.defineProperty({__proto__:null,default:v1},Symbol.toStringTag,{value:"Module"})),_1={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(d){const n=window.CONSTANTS.SALES_ORDER_STATUSES,u={draft:"orange",closed:"green",canceled:"red"};return(o,s)=>(p(),P(ia,{status:d.status,statuses:a(n),colors:u},null,8,["status","statuses"]))}},k1={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(d){const n=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,u={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,s)=>(p(),P(ia,{status:d.status,statuses:a(n),colors:u},null,8,["status","statuses"]))}};const w1={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},h1={class:"q-pa-xs"},$1={class:"full-width row flex-center text-grey-8 q-gutter-sm"},x1={key:0},S1={key:1},V1={key:2},q1={key:3},C1={key:0},T1={key:1},P1={key:0},O1={key:0},I1={key:1},R1={class:"flex justify-end"},pl="Penjualan",D1={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=Kt(),c=Yt(),v=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...Rt(m-2,m-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Dt()],g=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.SALES_ORDER_STATUSES)],S=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],O=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],w=Oe({search:"",year:m,month:c,status:"all",payment_status:"all",delivery_status:"all",...De()}),I=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{B()});const x=$=>{if($.status=="draft"){U($);return}F($)},U=$=>{X.get(route("admin.sales-order.edit",$.id))},F=$=>{X.get(route("admin.sales-order.detail",$.id))},T=$=>{Wt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.sales-order.cancel",{id:$.id}),{id:$.id}).then(K=>{const se=K.data.data,j=o.value.findIndex(A=>A.id===se.id);if(j===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[j].status="canceled",n.notify({message:K.data.message,position:"bottom"})}).catch(K=>{var j,A;const se=((A=(j=K.response)==null?void 0:j.data)==null?void 0:A.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:se,color:"warning",position:"bottom"}),console.error(K)})})},R=$=>lt({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.formatted_id}?`,url:route("admin.sales-order.delete",$.id),fetchItemsCallback:B,loading:s}),B=($=null)=>{Ue({pagination:I,filter:w,props:$,rows:o,url:route("admin.sales-order.data"),loading:s,tableRef:i})},M=()=>{B()},E=G(()=>n.screen.gt.sm?C:C.filter($=>$.name==="id"||$.name==="action"));return Ae(()=>w.year,$=>{$===null&&(w.month=null)}),($,K)=>{const se=Q("i-head"),j=Q("authenticated-layout");return p(),h(W,null,[e(se,{title:pl}),e(j,null,He({title:l(()=>[y(r(pl))]),"right-button":l(()=>[e(D,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:K[0]||(K[0]=A=>u.value=!u.value)},null,8,["icon"]),$.$can("admin.sales-order.edit")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:K[1]||(K[1]=A=>a(X).get($.route("admin.sales-order.add")))})):k("",!0)]),default:l(()=>[t("div",h1,[e(Pe,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:I.value,"onUpdate:pagination":K[11]||(K[11]=A=>I.value=A),filter:w.search,loading:s.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Me({height:a(f)}),onRequest:B,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:A,message:Z,filter:we})=>[t("div",$1,[t("span",null,r(Z)+" "+r(we?" with term "+we:""),1)])]),body:l(A=>[e(Ce,{props:A,class:"cursor-pointer",onClick:J(Z=>x(A.row),["prevent"])},{default:l(()=>[e(Y,{key:"id",props:A,class:"wrap-column"},{default:l(()=>{var Z,we,le;return[t("div",null,[e(V,{name:"tag"}),y(" "+r(A.row.formatted_id),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),y(r(a(ve)(A.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(p(),h(W,{key:0},[A.row.cashier?(p(),h("div",x1,[e(V,{name:"person",class:"inline-icon"}),y(" Kasir: "+r((Z=A.row.cashier)==null?void 0:Z.username),1)])):k("",!0),A.row.cashier_session?(p(),h("div",S1,[e(V,{name:"point_of_sale",class:"inline-icon"}),y(" Terminal: "+r((le=(we=A.row.cashier_session)==null?void 0:we.cashier_terminal)==null?void 0:le.name),1)])):k("",!0),A.row.customer?(p(),h("div",V1,[e(V,{name:"person",class:"inline-icon"}),e(Ul,{href:$.route("admin.customer.detail",{id:A.row.customer.id}),onClick:K[8]||(K[8]=J(()=>{},["stop"]))},{default:l(()=>[y("  "+r(A.row.customer.code)+" - "+r(A.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(L)(A.row.grand_total)),1),A.row.notes?(p(),h("div",q1,[e(V,{name:"notes"}),y(" "+r(A.row.notes),1)])):k("",!0)],64)),t("div",null,[e(_1,{status:A.row.status},null,8,["status"]),e(k1,{status:A.row.payment_status},null,8,["status"]),k("",!0)])]}),_:2},1032,["props"]),e(Y,{key:"cashier_id",props:A},{default:l(()=>{var Z,we,le;return[A.row.cashier?(p(),h("div",C1,[e(V,{name:"person",class:"inline-icon"}),y(" "+r((Z=A.row.cashier)==null?void 0:Z.username),1)])):k("",!0),A.row.cashier_session?(p(),h("div",T1,[e(V,{name:"point_of_sale",class:"inline-icon"}),y(" "+r((le=(we=A.row.cashier_session)==null?void 0:we.cashier_terminal)==null?void 0:le.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Y,{key:"customer_id",props:A},{default:l(()=>[A.row.customer?(p(),h("div",P1,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),y(" "+r(A.row.customer_code)+" - "+r(A.row.customer_name),1)]),A.row.customer_phone?(p(),h("div",O1,[e(V,{name:"phone",class:"inline-icon"}),y(" "+r(A.row.customer_phone),1)])):k("",!0),A.row.customer_address?(p(),h("div",I1,[e(V,{name:"home_pin",class:"inline-icon"}),y(" "+r(A.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total",props:A},{default:l(()=>[y(r(a(L)(A.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:A},{default:l(()=>[e(ke,{text:A.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:A,onClick:K[10]||(K[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",R1,[$.$can("admin.sales-order.detail")||$.$can("admin.sales-order.edit")||$.$can("admin.sales-order.cancel")||$.$can("admin.sales-order.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:K[9]||(K[9]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[A.row.status!="draft"&&$.$can("admin.sales-order.detail")?ee((p(),P(ae,{key:0,onClick:J(Z=>F(A.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"visibility"})]),_:1}),e(N,null,{default:l(()=>K[12]||(K[12]=[y(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),A.row.status=="draft"&&$.$can("admin.sales-order.edit")?ee((p(),P(ae,{key:1,onClick:J(Z=>U(A.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>K[13]||(K[13]=[y(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),A.row.status=="draft"&&$.$can("admin.sales-order.cancel")?ee((p(),P(ae,{key:2,onClick:J(Z=>T(A.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"cancel"})]),_:1}),e(N,null,{default:l(()=>K[14]||(K[14]=[y(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),e(Xe),$.$can("admin.sales-order.delete")?ee((p(),P(ae,{key:3,onClick:J(Z=>R(A.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>K[15]||(K[15]=[y(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",w1,[e(de,{modelValue:w.year,"onUpdate:modelValue":[K[2]||(K[2]=A=>w.year=A),M],options:v,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(p(),P(de,{key:0,modelValue:w.month,"onUpdate:modelValue":[K[3]||(K[3]=A=>w.month=A),M],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:w.status,"onUpdate:modelValue":[K[4]||(K[4]=A=>w.status=A),M],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:w.payment_status,"onUpdate:modelValue":[K[5]||(K[5]=A=>w.payment_status=A),M],options:S,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":K[7]||(K[7]=A=>w.search=A),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},U1=Object.freeze(Object.defineProperty({__proto__:null,default:D1},Symbol.toStringTag,{value:"Module"})),A1={class:"col-xs-12 col-md-8"},j1={class:"col-xs-12 col-sm-9"},E1={class:"col-xs-12 col-sm-3 text-right"},fl="Pengaturan Database & Utilitas",M1={__name:"Index",setup(d){fe();const n=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktivitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem")},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup")},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:"⚠️ **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore")},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:"⛔ **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional")},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:"❌ **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total")}];return(u,o)=>{const s=Q("i-head"),i=Q("authenticated-layout");return p(),h(W,null,[e(s,{title:fl}),e(i,null,{title:l(()=>[y(r(fl))]),default:l(()=>[e(QPage,{class:"row justify-center q-pa-xs"},{default:l(()=>[t("div",A1,[e(QCard,{square:"",flat:"",bordered:"",class:"full-width"},{default:l(()=>[e(QCardSection,null,{default:l(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(QBanner,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:l(()=>[e(QIcon,{name:"warning",color:"red"})]),default:l(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=y(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(QSeparator),e(QCardSection,{class:"q-gutter-y-lg"},{default:l(()=>[(p(),h(W,null,tt(n,b=>t("div",{key:b.name,class:"row items-center q-col-gutter-md"},[t("div",j1,[e(QItem,{class:"q-pa-none"},{default:l(()=>[e(QItemSection,{avatar:"",class:"q-pr-md"},{default:l(()=>[e(QIcon,{name:b.icon,color:b.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(QItemSection,{style:{"text-wrap":"initial"}},{default:l(()=>[e(QItemLabel,{class:"text-subtitle1 text-bold"},{default:l(()=>[y(r(b.name),1)]),_:2},1024),e(QItemLabel,{caption:"",class:"q-pb-sm"},{default:l(()=>[y(r(b.description),1)]),_:2},1024),e(QItemLabel,{class:"text-caption text-negative text-bold"},{default:l(()=>[y(r(b.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",E1,[e(QBtn,{icon:b.icon,label:b.name.split(" ")[0],color:b.color,onClick:b.action,class:"full-width"},null,8,["icon","label","color","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},N1=Object.freeze(Object.defineProperty({__proto__:null,default:M1},Symbol.toStringTag,{value:"Module"})),B1={class:"q-pa-xs"},z1={class:"row justify-center"},F1={class:"col col-md-6"},L1={__name:"Edit",setup(d){const n=fe(),u=Le({foot_note:n.props.data.foot_note,default_payment_mode:n.props.data.default_payment_mode,default_print_size:n.props.data.default_print_size}),o=()=>Je({form:u,url:route("admin.pos-settings.edit")}),s=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],i=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}];return(b,f)=>{const m=Q("i-head"),c=Q("authenticated-layout");return p(),h(W,null,[e(m,{title:"Pengaturan POS"}),e(c,null,{title:l(()=>f[3]||(f[3]=[y("Pengaturan POS")])),default:l(()=>[t("div",B1,[t("div",z1,[t("div",F1,[e(ze,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[f[4]||(f[4]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),f[5]||(f[5]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(de,{modelValue:a(u).default_payment_mode,"onUpdate:modelValue":f[0]||(f[0]=v=>a(u).default_payment_mode=v),label:"Default Pembayaran",options:s,"map-options":"","emit-value":"","lazy-rules":"",disable:a(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(u).errors.default_payment_mode,"error-message":a(u).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(u).default_print_size,"onUpdate:modelValue":f[1]||(f[1]=v=>a(u).default_print_size=v),label:"Default Ukuran Cetak",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:a(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(u).errors.default_print_size,"error-message":a(u).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(u).foot_note,"onUpdate:modelValue":f[2]||(f[2]=v=>a(u).foot_note=v),modelModifiers:{trim:!0},label:"Foot Note",disable:a(u).processing,"lazy-rules":"",error:!!a(u).errors.foot_note,"error-message":a(u).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,null,{default:l(()=>[e(D,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(u).processing,loading:a(u).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},H1=Object.freeze(Object.defineProperty({__proto__:null,default:L1},Symbol.toStringTag,{value:"Module"})),K1={class:"q-gutter-sm"},Y1={class:"col col-lg-6 q-pa-xs"},Q1={class:"row q-col-gutter-sm q-mb-md"},W1={key:0},J1={class:"text-bold"},G1={key:0},X1={class:"text-caption text-grey-8"},Z1={key:1},gl="Buat Penyesuaian Stok",ev={__name:"Create",setup(d){const n=fe(),u=n.props.products,{filteredCategories:o,filterCategories:s}=xa(n.props.categories),{filteredSuppliers:i,filterSupplierFn:b}=Sa(n.props.suppliers),f=q({search:null,category_id:null,supplier_id:null}),m=q([]),c=Le({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),v=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(I,C)=>L(I)+" "+C.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],_=Ze(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),g=G(()=>u.filter(I=>{let C=!0;if(f.value.search){const x=f.value.search.toLowerCase();C=I.name.toLowerCase().includes(x)||I.description.toLowerCase().includes(x)||I.barcode&&I.barcode.toLowerCase().includes(x)}return C&&f.value.category_id&&(C=I.category_id===f.value.category_id),C&&f.value.supplier_id&&(C=I.supplier_id===f.value.supplier_id),C})),S=()=>{c.product_ids=m.value.map(I=>I.id),Qt(c,{datetime:"YYYY-MM-DD HH:mm:ss"}),Je({form:c,url:route("admin.stock-adjustment.create")})},O=xe(),w=G(()=>O.screen.gt.sm?v:v.filter(I=>I.name==="name"));return(I,C)=>{const x=Q("i-head"),U=Q("authenticated-layout");return p(),h(W,null,[e(x,{title:gl}),e(U,{"show-drawer-button":!0},{title:l(()=>[y(r(gl))]),"left-button":l(()=>[t("div",K1,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:C[0]||(C[0]=F=>a(X).get(I.route("admin.stock-adjustment.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Y1,[e(ze,{class:"row",onSubmit:J(S,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-sm"},{default:l(()=>[C[9]||(C[9]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Bt,{modelValue:a(c).datetime,"onUpdate:modelValue":C[1]||(C[1]=F=>a(c).datetime=F),label:"Waktu",error:!!a(c).errors.datetime,disable:a(c).processing,"error-message":a(c).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(de,{modelValue:a(c).type,"onUpdate:modelValue":C[2]||(C[2]=F=>a(c).type=F),options:a(_),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(c).errors.type,disable:a(c).processing,"map-options":"","emit-value":"","error-message":a(c).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(oe,{modelValue:a(c).notes,"onUpdate:modelValue":C[3]||(C[3]=F=>a(c).notes=F),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(c).processing,error:!!a(c).errors.notes,"error-message":a(c).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,null,{default:l(()=>[C[10]||(C[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",Q1,[e(oe,{modelValue:f.value.search,"onUpdate:modelValue":C[4]||(C[4]=F=>f.value.search=F),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(de,{modelValue:f.value.category_id,"onUpdate:modelValue":C[5]||(C[5]=F=>f.value.category_id=F),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"",dense:"","emit-value":"",onFilter:a(s),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(de,{modelValue:f.value.supplier_id,"onUpdate:modelValue":C[6]||(C[6]=F=>f.value.supplier_id=F),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(i),"map-options":"",dense:"","emit-value":"",onFilter:a(b),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),e(Pe,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",columns:w.value,rows:g.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:m.value,"onUpdate:selected":C[7]||(C[7]=F=>m.value=F)},{"body-cell-name":l(F=>[e(Y,{props:F},{default:l(()=>[a(O).screen.lt.md?(p(),h("div",W1,[t("div",J1,r(F.row.name),1),F.row.category?(p(),h("div",G1,r(F.row.category.name),1)):k("",!0),t("div",X1,r(a(L)(F.row.stock))+" "+r(F.row.uom),1)])):(p(),h("div",Z1,r(F.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"play_arrow",type:"submit",label:"Lanjutkan",color:"primary",disable:a(c).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(c).processing,onClick:C[8]||(C[8]=F=>a(X).get(I.route("admin.stock-adjustment.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},tv=Object.freeze(Object.defineProperty({__proto__:null,default:ev},Symbol.toStringTag,{value:"Module"})),av={class:"q-gutter-sm"},lv={class:"row justify-center"},ov={class:"col col-lg-8 q-pa-sm"},nv={class:"row"},sv={class:"detail"},rv={key:0},iv={key:1},dv={class:"text-grey-9"},uv={__name:"Detail",setup(d){const n=fe(),u=`Rincian Penyesuaian Stok #${n.props.data.id}`,o=n.props.details,s=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:f=>L(f)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:f=>L(f)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:f=>L(f)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],i=xe(),b=G(()=>i.screen.gt.sm?s:s.filter(f=>f.name==="no"));return(f,m)=>{const c=Q("i-head"),v=Q("i-link"),_=Q("authenticated-layout");return p(),h(W,null,[e(c,{title:u}),e(_,{"show-drawer-button":!0},{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",av,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=g=>f.$inertia.get(f.route("admin.stock-adjustment.index")))})])]),default:l(()=>[t("div",lv,[t("div",ov,[t("div",nv,[e(pe,{square:"",flat:"",bordered:"",class:"q-card col"},{default:l(()=>[e(te,null,{default:l(()=>[m[21]||(m[21]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",sv,[t("tbody",null,[t("tr",null,[m[1]||(m[1]=t("td",{style:{width:"120px"}},"ID",-1)),m[2]||(m[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"# "+r(a(n).props.data.id),1)]),t("tr",null,[m[3]||(m[3]=t("td",null,"Jenis",-1)),m[4]||(m[4]=t("td",null,":",-1)),t("td",null,r(f.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[a(n).props.data.type]),1)]),t("tr",null,[m[5]||(m[5]=t("td",null,"Status",-1)),m[6]||(m[6]=t("td",null,":",-1)),t("td",null,r(f.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[a(n).props.data.status]),1)]),t("tr",null,[m[7]||(m[7]=t("td",null,"Waktu",-1)),m[8]||(m[8]=t("td",null,":",-1)),t("td",null,r(f.$dayjs(a(n).props.data.datetime).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)]),a(n).props.data.created_at?(p(),h("tr",rv,[m[10]||(m[10]=t("td",null,"Dibuat Oleh",-1)),m[11]||(m[11]=t("td",null,":",-1)),t("td",null,[a(n).props.data.created_by?(p(),h(W,{key:0},[e(v,{href:f.route("admin.user.detail",{id:a(n).props.data.created_by})},{default:l(()=>[y(r(a(n).props.data.created_by.username)+" - "+r(a(n).props.data.created_by.name),1)]),_:1},8,["href"]),m[9]||(m[9]=y(" - "))],64)):k("",!0),y(" "+r(f.$dayjs(new Date(a(n).props.data.created_at)).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)])])):k("",!0),a(n).props.data.updated_at?(p(),h("tr",iv,[m[13]||(m[13]=t("td",null,"Diperbarui oleh",-1)),m[14]||(m[14]=t("td",null,":",-1)),t("td",null,[a(n).props.data.updated_by?(p(),h(W,{key:0},[e(v,{href:f.route("admin.user.detail",{id:a(n).props.data.updated_by})},{default:l(()=>[y(r(a(n).props.data.updated_by.username)+" - "+r(a(n).props.data.updated_by.name),1)]),_:1},8,["href"]),m[12]||(m[12]=y(" - "))],64)):k("",!0),y(" "+r(f.$dayjs(new Date(a(n).props.data.updated_at)).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)])])):k("",!0),t("tr",null,[m[15]||(m[15]=t("td",null,"Total Modal",-1)),m[16]||(m[16]=t("td",null,":",-1)),t("td",null,[t("div",{class:$e(a(n).props.data.total_cost<0?"text-red-10":a(n).props.data.total_cost>0?"text-green-10":"")}," Rp. "+r(a(L)(a(n).props.data.total_cost)),3)])]),t("tr",null,[m[17]||(m[17]=t("td",null,"Total Harga",-1)),m[18]||(m[18]=t("td",null,":",-1)),t("td",null,[t("div",{class:$e(a(n).props.data.total_price<0?"text-red-10":a(n).props.data.total_price>0?"text-green-10":"")}," Rp. "+r(a(L)(a(n).props.data.total_price)),3)])]),t("tr",null,[m[19]||(m[19]=t("td",null,"Catatan",-1)),m[20]||(m[20]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)])])])]),_:1}),e(te,null,{default:l(()=>[m[26]||(m[26]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Pe,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",dense:"",columns:b.value,rows:a(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":l(g=>[e(Y,{props:g},{default:l(()=>[a(i).screen.lt.md?(p(),h(W,{key:1},[t("div",dv,[t("b",null,"#"+r(g.rowIndex+1),1),y(" - "+r(g.row.product_name),1)]),t("div",null,[y(" Stok Lama: "+r(a(L)(g.row.old_quantity))+" "+r(g.row.uom),1),m[23]||(m[23]=t("br",null,null,-1)),y(" Stok Baru: "+r(a(L)(g.row.new_quantity))+" "+r(g.row.uom),1),m[24]||(m[24]=t("br",null,null,-1)),t("div",{class:$e(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},[y(" Selisih: "+r((g.row.balance>0?"+":"")+a(L)(g.row.balance))+" "+r(g.row.uom),1),m[22]||(m[22]=t("br",null,null,-1)),y(" (Rp. "+r(a(L)(g.row.subtotal_cost))+" / Rp. "+r(a(L)(g.row.subtotal_price))+") ",1)],2),m[25]||(m[25]=t("br",null,null,-1)),y(" "+r(g.row.notes),1)])],64)):(p(),h(W,{key:0},[y(r(g.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-balance":l(g=>[e(Y,{props:g},{default:l(()=>[t("div",{class:$e(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},r((g.row.balance>0?"+":"")+a(L)(g.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":l(g=>[e(Y,{props:g},{default:l(()=>[t("div",{class:$e(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},r(a(L)(g.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":l(g=>[e(Y,{props:g},{default:l(()=>[t("div",{class:$e(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},r(a(L)(g.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},mv=Object.freeze(Object.defineProperty({__proto__:null,default:uv},Symbol.toStringTag,{value:"Module"})),cv={class:"q-gutter-sm"},pv={class:"col col-lg-6 q-pa-xs"},fv={class:"text-bold"},gv={key:0},bv={class:"text-caption text-grey-8"},bl="Penyesuaian Stok",vv={__name:"Editor",setup(d){const n=fe(),u=Le({id:n.props.item.id,type:n.props.item.type,datetime:new Date(n.props.item.datetime),notes:n.props.item.notes,action:"save",details:[]}),o=Ze(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),s=n.props.details,i=c=>{const v=()=>{u.action=c,u.details=s.map(_=>({id:_.id,new_quantity:_.new_quantity})),Qt(u,{datetime:"YYYY-MM-DD HH:mm:ss"}),Je({form:u,url:route("admin.stock-adjustment.save")})};c==="close"||c==="cancel"?Wt.create({title:"Konfirmasi",message:"Aksi ini tidak dapat dibatalkan, apakah Anda yakin?",cancel:!0,persistent:!0}).onOk(()=>{v()}).onCancel(()=>{}):v()},b=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:c=>L(c)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:c=>L(c)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(c,v)=>L(v.new_quantity-v.old_quantity)}],f=xe(),m=G(()=>f.screen.gt.sm?b:b.filter(c=>c.name==="product_name"||c.name==="new_quantity"));return(c,v)=>{const _=Q("i-head"),g=Q("authenticated-layout");return p(),h(W,null,[e(_,{title:bl}),e(g,{"show-drawer-button":!0},{title:l(()=>[y(r(bl))]),"left-button":l(()=>[t("div",cv,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=S=>c.$inertia.get(c.route("admin.stock-adjustment.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",pv,[e(ze,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>v[8]||(v[8]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=S=>a(u).id=S)},null,512),[[dt,a(u).id]]),e(Bt,{modelValue:a(u).datetime,"onUpdate:modelValue":v[2]||(v[2]=S=>a(u).datetime=S),label:"Waktu",error:!!a(u).errors.datetime,disable:a(u).processing,"error-message":a(u).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(de,{modelValue:a(u).type,"onUpdate:modelValue":v[3]||(v[3]=S=>a(u).type=S),options:a(o),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(u).errors.type,disable:a(u).processing,"map-options":"","emit-value":"","error-message":a(u).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(oe,{modelValue:a(u).notes,"onUpdate:modelValue":v[4]||(v[4]=S=>a(u).notes=S),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(u).processing,error:!!a(u).errors.notes,"error-message":a(u).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-pa-xs"},{default:l(()=>[e(Pe,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",columns:m.value,rows:a(s),"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":l(S=>[e(Y,{props:S},{default:l(()=>[t("div",fv,r(S.row.product_name),1),a(f).screen.lt.md?(p(),h("div",gv,[t("div",bv,[y(" Tercatat: "+r(a(L)(S.row.old_quantity))+" ",1),v[9]||(v[9]=t("br",null,null,-1)),y(" Selisih: "+r(a(L)(S.row.new_quantity-S.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":l(S=>[e(Y,{props:S,class:"text-center"},{default:l(()=>[e(Re,{modelValue:S.row[S.col.name],"onUpdate:modelValue":O=>S.row[S.col.name]=O,modelModifiers:{number:!0},"input-class":"text-right",dense:"",style:{width:"60px"},"hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",onClick:v[5]||(v[5]=S=>i("save")),label:"Simpan",color:"primary",disable:a(u).processing},null,8,["disable"]),e(D,{icon:"done_all",onClick:v[6]||(v[6]=S=>i("close")),label:"Selesaikan",color:"green",disable:a(u).processing},null,8,["disable"]),e(D,{icon:"close",onClick:v[7]||(v[7]=S=>i("cancel")),label:"Batalkan",color:"red",disable:a(u).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},yv=Object.freeze(Object.defineProperty({__proto__:null,default:vv},Symbol.toStringTag,{value:"Module"})),_v={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},kv={class:"q-pa-xs"},wv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},hv={key:0,class:"flex q-gutter-xs"},$v={class:"flex q-col-gutter-xs"},xv={key:0},Sv={key:1},Vv={class:"flex justify-end"},vl="Penyesuaian Stok",qv={__name:"Index",setup(d){const n=q([]),u=q(!0),o=q(!1),s=q(null),i=q(null),b=Ge(i),f=Oe({search:"",status:"all",type:"all",...De()}),m=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],c=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],v=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),_=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];he(()=>{S()});const g=x=>lt({message:`Hapus Transaksi #${x.id}?`,url:route("admin.stock-adjustment.delete",x.id),fetchItemsCallback:S,loading:u}),S=(x=null)=>Ue({pagination:v,filter:f,props:x,rows:n,url:route("admin.stock-adjustment.data"),loading:u,tableRef:s}),O=()=>{S()},w=x=>{x.status=="draft"?X.get(route("admin.stock-adjustment.editor",x.id)):X.get(route("admin.stock-adjustment.detail",x.id))},I=xe(),C=G(()=>I.screen.gt.sm?_:_.filter(x=>x.name==="id"||x.name==="action"));return(x,U)=>{const F=Q("i-head"),T=Q("authenticated-layout");return p(),h(W,null,[e(F,{title:vl}),e(T,null,He({"right-button":l(()=>[e(D,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=R=>o.value=!o.value)},null,8,["icon"]),x.$can("admin.stock-adjustment.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:U[1]||(U[1]=R=>a(X).get(x.route("admin.stock-adjustment.create")))})):k("",!0)]),title:l(()=>[y(r(vl))]),default:l(()=>[t("div",kv,[e(Pe,{ref_key:"tableRef",ref:s,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id","virtual-scroll":"",pagination:v.value,"onUpdate:pagination":U[6]||(U[6]=R=>v.value=R),filter:f.search,loading:u.value,columns:C.value,rows:n.value,"rows-per-page-options":[10,25,50],style:Me({height:a(b)}),onRequest:S,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:R,message:B,filter:M})=>[t("div",wv,[t("span",null,r(B)+" "+r(M?" with term "+M:""),1)])]),body:l(R=>[e(Ce,{props:R,onClick:B=>w(R.row),class:"cursor-pointer"},{default:l(()=>[e(Y,{key:"id",props:R},{default:l(()=>[a(I).screen.lt.md?(p(),h(W,{key:1},[t("div",$v,[t("div",null,"#"+r(R.row.formatted_id),1),t("div",null,[e(V,{name:"history"}),y(" "+r(x.$dayjs(new Date(R.row.datetime)).format("DD/MM/YYYY HH:mm")),1)]),e(Ol,{dense:"",size:"sm",color:R.row.status==="draft"?"orange":R.row.status==="closed"?"green":R.row.status==="canceled"?"red":"",icon:R.row.status==="draft"?"emergency":R.row.status==="closed"?"check":R.row.status==="canceled"?"close":""},{default:l(()=>[y(r(x.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[R.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(V,{name:"category"}),y(" "+r(x.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[R.row.type]),1)]),R.row.created_by?(p(),h("div",xv,[e(V,{name:"person"}),U[7]||(U[7]=y(" Dibuat: ")),t("b",null,r(R.row.created_by.username),1),e(V,{name:"history"}),y(" "+r(x.$dayjs(new Date(R.row.created_at)).format("DD/MM/YYYY HH:mm")),1)])):k("",!0),R.row.updated_by?(p(),h("div",Sv,[e(V,{name:"person"}),U[8]||(U[8]=y(" Diperbarui: ")),t("b",null,r(R.row.updated_by.username),1),e(V,{name:"history"}),y(" "+r(x.$dayjs(new Date(R.row.updated_at)).format("DD/MM/YYYY HH:mm")),1)])):k("",!0),t("div",{class:$e(R.row.total_cost<0?"text-red-10":R.row.total_cost>0?"text-green-10":"")},[e(V,{name:"money"}),y(" Rp. "+r(a(L)(R.row.total_cost))+" / Rp. "+r(a(L)(R.row.total_price)),1)],2)],64)):(p(),h("div",hv," #"+r(R.row.formatted_id),1))]),_:2},1032,["props"]),e(Y,{key:"datetime",props:R},{default:l(()=>[y(r(x.$dayjs(new Date(R.row.datetime)).format("DD/MM/YYYY HH:mm")),1)]),_:2},1032,["props"]),e(Y,{key:"status",props:R,class:"text-center"},{default:l(()=>[y(r(x.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[R.row.status]),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:R},{default:l(()=>[y(r(x.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[R.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"total_cost",props:R},{default:l(()=>[t("div",{class:$e(R.row.total_cost<0?"text-red-10":R.row.total_cost>0?"text-green-10":"")},r(a(L)(R.row.total_cost)),3)]),_:2},1032,["props"]),e(Y,{key:"total_price",props:R},{default:l(()=>[t("div",{class:$e(R.row.total_price<0?"text-red-10":R.row.total_price>0?"text-green-10":"")},r(a(L)(R.row.total_price)),3)]),_:2},1032,["props"]),e(Y,{key:"notes",props:R},{default:l(()=>[y(r(R.row.notes),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:R},{default:l(()=>[t("div",Vv,[x.$can("admin.stock-adjustment.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:U[5]||(U[5]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[x.$can("admin.stock-adjustment.delete")?ee((p(),P(ae,{key:0,onClick:J(B=>g(R.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>U[9]||(U[9]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:i},{default:l(()=>[t("div",_v,[e(de,{modelValue:f.status,"onUpdate:modelValue":[U[2]||(U[2]=R=>f.status=R),O],options:m,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:f.type,"onUpdate:modelValue":[U[3]||(U[3]=R=>f.type=R),O],options:c,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":U[4]||(U[4]=R=>f.search=R),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Cv=Object.freeze(Object.defineProperty({__proto__:null,default:qv},Symbol.toStringTag,{value:"Module"})),Tv={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Pv={class:"q-pa-xs"},Ov={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Iv={key:0},yl="Riwayat Stok",Rv={__name:"Index",setup(d){fe();const n=q(null),u=q(null),o=Ge(u),s=Kt();Yt();const i=[{label:"Semua Tahun",value:"all"},{label:`${s}`,value:s},...Rt(s-2,s-1).reverse()],b=[{value:"all",label:"Semua Bulan"},...Dt()],f=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],m=xe(),c=q(!1),v=q([]),_=q(!0),g=Oe({type:"all",search:"",...De()}),S=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let O=[{name:"id",label:m.screen.lt.sm?"Item":"#",field:"id",align:"left",sortable:!0},{name:"created_at",label:"Waktu",field:"created_at",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Qty Awal",field:"quantity_before",align:"right"},{name:"quantity_after",label:"Qty Akhir",field:"quantity_after",align:"right"},{name:"quantity",label:"Selisih",field:"quantity",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{const U=new URLSearchParams(window.location.search).get("page");U&&(S.value.page=parseInt(U)),w()});const w=(x=null)=>{Ue({pagination:S,filter:g,props:x,rows:v,url:route("admin.stock-movement.data"),loading:_,tableRef:n})},I=()=>{w()},C=G(()=>{let x=[...O];return m.screen.gt.sm?x:x.filter(U=>U.name==="id"||U.name==="quantity")});return(x,U)=>{const F=Q("i-head"),T=Q("authenticated-layout");return p(),h(W,null,[e(F,{title:yl}),e(T,null,He({title:l(()=>[y(r(yl))]),"right-button":l(()=>[e(D,{icon:c.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=R=>c.value=!c.value)},null,8,["icon"])]),default:l(()=>[t("div",Pv,[e(Pe,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:S.value,"onUpdate:pagination":U[5]||(U[5]=R=>S.value=R),filter:g.search,loading:_.value,columns:C.value,rows:v.value,"rows-per-page-options":[10,25,50],style:Me({height:a(o)}),onRequest:w,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:R,message:B,filter:M})=>[t("div",Ov,[t("span",null,r(B)+" "+r(M?" with term "+M:""),1)])]),body:l(R=>[e(Ce,{props:R},{default:l(()=>[e(Y,{key:"id",props:R},{default:l(()=>[t("div",null,[a(m).screen.lt.sm?(p(),h(W,{key:0},[t("div",null,[e(ut,null,{default:l(()=>[y(r(x.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[R.row.ref_type]),1)]),_:2},1024)]),e(V,{class:"inline-icon",name:"tag"})],64)):k("",!0),y(" "+r(R.row.formatted_id),1)]),a(m).screen.lt.sm?(p(),h(W,{key:0},[t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),y(" "+r(a(ve)(R.row.created_at)),1)]),t("div",null,[e(V,{name:"token",class:"inline-icon"}),y(" "+r(R.row.product.name),1)]),t("div",{class:$e(R.row.quantity>0?"text-positive":"text-negative")},[e(V,{class:"inline-icon",name:"compare_arrows"}),y(" "+r(a(L)(R.row.quantity_before))+" "+r(R.row.uom)+" → "+r(a(L)(R.row.quantity_after))+" "+r(R.row.uom),1)],2),e(ke,{text:R.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"created_at",props:R},{default:l(()=>[y(r(a(ve)(R.row.created_at)),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:R},{default:l(()=>[y(r(x.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[R.row.ref_type])+" ",1),R.row.ref?(p(),h("span",Iv,r(R.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"product",props:R},{default:l(()=>[y(r(R.row.product.name),1)]),_:2},1032,["props"]),e(Y,{key:"quantity_before",props:R},{default:l(()=>[y(r(a(L)(R.row.quantity_before))+" "+r(R.row.uom),1)]),_:2},1032,["props"]),e(Y,{key:"quantity_after",props:R},{default:l(()=>[y(r(a(L)(R.row.quantity_after))+" "+r(R.row.uom),1)]),_:2},1032,["props"]),e(Y,{key:"quantity",props:R,class:$e(R.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[y(r(a(L)(R.row.quantity))+" "+r(R.row.uom),1)]),_:2},1032,["props","class"]),e(Y,{key:"notes",props:R},{default:l(()=>[e(ke,{text:R.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[c.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:u},{default:l(()=>[t("div",Tv,[e(de,{modelValue:g.year,"onUpdate:modelValue":[U[1]||(U[1]=R=>g.year=R),I],options:i,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),g.year!="all"?(p(),P(de,{key:0,modelValue:g.month,"onUpdate:modelValue":[U[2]||(U[2]=R=>g.month=R),I],options:b,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:g.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:g.ref_type,"onUpdate:modelValue":[U[3]||(U[3]=R=>g.ref_type=R),I],options:f,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":U[4]||(U[4]=R=>g.search=R),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Dv=Object.freeze(Object.defineProperty({__proto__:null,default:Rv},Symbol.toStringTag,{value:"Module"})),Uv={class:"q-gutter-sm"},Av={class:"q-gutter-sm"},jv={class:"col col-md-6 q-pa-xs"},Ev={class:"row"},Mv={class:"detail"},_l="Rincian Pemasok",Nv={__name:"Detail",setup(d){const n=fe();return(u,o)=>{const s=Q("i-head"),i=Q("authenticated-layout");return p(),h(W,null,[e(s,{title:_l}),e(i,{"show-drawer-button":!0},{title:l(()=>[y(r(_l))]),"left-button":l(()=>[t("div",Uv,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$goBack())})])]),"right-button":l(()=>[t("div",Av,[u.$can("admin.supplier.edit")?(p(),P(D,{key:0,icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:o[1]||(o[1]=b=>a(X).get(u.route("admin.supplier.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",jv,[t("div",Ev,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[o[14]||(o[14]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Info Pemasok ",-1)),t("table",Mv,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"70px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Telepon",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.phone),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Alamat",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.address),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"No. Rek",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.bank_account_number),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Alamat Retur",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.return_address),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)])])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Bv=Object.freeze(Object.defineProperty({__proto__:null,default:Nv},Symbol.toStringTag,{value:"Module"})),zv={class:"q-gutter-sm"},Fv={class:"col col-md-6 q-pa-xs"},Lv={style:{"margin-left":"-10px"}},Hv={__name:"Editor",setup(d){const n=fe(),u=(n.props.data.id?"Edit":"Tambah")+" Pemasok",o=jl({id:n.props.data.id,name:n.props.data.name,phone:n.props.data.phone,address:n.props.data.address,bank_account_number:n.props.data.bank_account_number,return_address:n.props.data.return_address,active:!!n.props.data.active}),s=()=>Je({form:o,url:route("admin.supplier.save")});return(i,b)=>{const f=Q("i-head"),m=Q("authenticated-layout");return p(),h(W,null,[e(f,{title:u}),e(m,{"show-drawer-button":!0},{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",zv,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=c=>i.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Fv,[e(ze,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>b[9]||(b[9]=[t("div",{class:"text-subtitle1"},"Info Supplier",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=c=>a(o).id=c)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":b[2]||(b[2]=c=>a(o).name=c),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[c=>c&&c.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).phone,"onUpdate:modelValue":b[3]||(b[3]=c=>a(o).phone=c),modelModifiers:{trim:!0},type:"text",label:"No HP","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone,"error-message":a(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).address,"onUpdate:modelValue":b[4]||(b[4]=c=>a(o).address=c),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Alamat","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_number,"onUpdate:modelValue":b[5]||(b[5]=c=>a(o).bank_account_number=c),modelModifiers:{trim:!0},type:"text",label:"No Rek","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number,"error-message":a(o).errors.bank_account_number,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).return_address,"onUpdate:modelValue":b[6]||(b[6]=c=>a(o).return_address=c),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Alamat Return","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.return_address,"error-message":a(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",Lv,[e(la,{class:"full-width q-pl-none",modelValue:a(o).active,"onUpdate:modelValue":b[7]||(b[7]=c=>a(o).active=c),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"])])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:b[8]||(b[8]=c=>i.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Kv=Object.freeze(Object.defineProperty({__proto__:null,default:Hv},Symbol.toStringTag,{value:"Module"})),Yv={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Qv={class:"q-pa-xs"},Wv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Jv={class:"flex justify-end"},kl="Pemasok",Gv={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=Oe({search:"",status:"active",...De()}),c=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left",sortable:!0},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!0},{name:"bank_account_number",label:"No Rek",field:"bank_account_number",align:"left",sortable:!0},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{S()});const g=C=>lt({message:`Hapus pemasok ${C.name}?`,url:route("admin.supplier.delete",C.id),fetchItemsCallback:S,loading:s}),S=(C=null)=>{Ue({pagination:c,filter:m,props:C,rows:o,url:route("admin.supplier.data"),loading:s,tableRef:i})},O=()=>S(),w=C=>X.get(route("admin.supplier.detail",{id:C.id})),I=G(()=>n.screen.gt.sm?v:v.filter(C=>C.name==="name"||C.name==="action"));return(C,x)=>{const U=Q("i-head"),F=Q("authenticated-layout");return p(),h(W,null,[e(U,{title:kl}),e(F,null,He({title:l(()=>[y(r(kl))]),"right-button":l(()=>[e(D,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=T=>u.value=!u.value)},null,8,["icon"]),C.$can("admin.supplier.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=T=>a(X).get(C.route("admin.supplier.add")))})):k("",!0)]),default:l(()=>[t("div",Qv,[e(Pe,{class:"full-height-table",ref_key:"tableRef",ref:i,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":x[5]||(x[5]=T=>c.value=T),filter:m.search,loading:s.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Me({height:a(f)}),onRequest:S,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:T,message:R,filter:B})=>[t("div",Wv,[t("span",null,r(R)+" "+r(B?" with term "+B:""),1)])]),body:l(T=>[e(Ce,{props:T,class:$e([T.row.active?"":"bg-red-1","cursor-pointer"]),onClick:R=>w(T.row)},{default:l(()=>[e(Y,{key:"name",props:T,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(p(),P(V,{key:0,name:"person"})):k("",!0),y(" "+r(T.row.name),1)]),a(n).screen.lt.md?(p(),h(W,{key:0},[t("div",null,[e(V,{name:"phone"}),y(" "+r(T.row.phone),1)]),t("div",null,[e(V,{name:"credit_card"}),y(" "+r(T.row.bank_account_number),1)]),t("div",null,[e(V,{name:"home_pin"}),y(" "+r(T.row.address),1)])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"phone",props:T},{default:l(()=>[y(r(T.row.phone),1)]),_:2},1032,["props"]),e(Y,{key:"address",props:T},{default:l(()=>[y(r(T.row.address),1)]),_:2},1032,["props"]),e(Y,{key:"bank_account_number",props:T},{default:l(()=>[y(r(T.row.bank_account_number),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:T},{default:l(()=>[t("div",Jv,[C.$can("admin.supplier.add")||C.$can("admin.supplier.edit")||C.$can("admin.supplier.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[4]||(x[4]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.supplier.add")?ee((p(),P(ae,{key:0,clickable:"",onClick:J(R=>a(X).get(C.route("admin.supplier.duplicate",T.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"file_copy"})]),_:1}),e(N,null,{default:l(()=>x[6]||(x[6]=[y(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),C.$can("admin.supplier.edit")?ee((p(),P(ae,{key:1,clickable:"",onClick:J(R=>a(X).get(C.route("admin.supplier.edit",T.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>x[7]||(x[7]=[y("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),C.$can("admin.supplier.delete")?ee((p(),P(ae,{key:2,onClick:J(R=>g(T.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>x[8]||(x[8]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Yv,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[x[2]||(x[2]=T=>m.status=T),O],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":x[3]||(x[3]=T=>m.search=T),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Xv=Object.freeze(Object.defineProperty({__proto__:null,default:Gv},Symbol.toStringTag,{value:"Module"})),Vo={__name:"UpdatePasswordForm",setup(d){const n=q(!1),u=q(null),o=q(null),s=Le({current_password:"",password:"",password_confirmation:""}),i=()=>{s.clearErrors(),s.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>s.reset(),onError:()=>{s.errors.password&&(s.reset("password","password_confirmation"),u.value.focus()),s.errors.current_password&&(s.reset("current_password"),o.value.focus())}})};return(b,f)=>(p(),P(ze,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[f[6]||(f[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),f[7]||(f[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(oe,{modelValue:a(s).current_password,"onUpdate:modelValue":f[1]||(f[1]=m=>a(s).current_password=m),type:n.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.current_password,"error-message":a(s).errors.current_password,rules:[m=>m&&m.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(D,{dense:"",flat:"",round:"",onClick:f[0]||(f[0]=m=>n.value=!n.value)},{default:l(()=>[e(V,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(oe,{modelValue:a(s).password,"onUpdate:modelValue":f[3]||(f[3]=m=>a(s).password=m),type:n.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.password,"error-message":a(s).errors.password,rules:[m=>m&&m.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(D,{dense:"",flat:"",round:"",onClick:f[2]||(f[2]=m=>n.value=!n.value)},{default:l(()=>[e(V,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(oe,{modelValue:a(s).password_confirmation,"onUpdate:modelValue":f[5]||(f[5]=m=>a(s).password_confirmation=m),type:n.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.password_confirmation,"error-message":a(s).errors.password_confirmation,rules:[m=>m&&m.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(D,{dense:"",flat:"",round:"",onClick:f[4]||(f[4]=m=>n.value=!n.value)},{default:l(()=>[e(V,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(te,null,{default:l(()=>[e(D,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:a(s).processing,loading:a(s).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Zv=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),qo={__name:"UpdateProfileInformationForm",setup(d){const u=fe().props.auth.user,o=Le({name:u.name,username:u.username,type:window.CONSTANTS.USER_TYPES[u.type]}),s=()=>Je({form:o,url:route("admin.user-profile.update")});return(i,b)=>(p(),P(ze,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[b[3]||(b[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),b[4]||(b[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(oe,{modelValue:a(o).username,"onUpdate:modelValue":b[0]||(b[0]=f=>a(o).username=f),label:"ID Pengguna",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(oe,{modelValue:a(o).name,"onUpdate:modelValue":b[1]||(b[1]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama",disable:a(o).processing,error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(o).type,"onUpdate:modelValue":b[2]||(b[2]=f=>a(o).type=f),label:"Jenis Akun",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(te,null,{default:l(()=>[e(D,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},ey=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),ty={class:"q-pa-xs"},ay={class:"row justify-center"},ly={class:"col col-md-6"},wl="Profil Saya",oy={__name:"Edit",setup(d){return(n,u)=>{const o=Q("i-head"),s=Q("authenticated-layout");return p(),h(W,null,[e(o,{title:wl}),e(s,null,{title:l(()=>[y(r(wl))]),default:l(()=>[t("div",ty,[t("div",ay,[t("div",ly,[e(qo,{class:"q-mb-md"}),e(Vo)])])])]),_:1})],64)}}},ny=Object.freeze(Object.defineProperty({__proto__:null,default:oy},Symbol.toStringTag,{value:"Module"})),sy={class:"q-gutter-sm"},ry={class:"q-gutter-sm"},iy={class:"col col-md-6 q-pa-xs"},dy={class:"row"},uy={class:"detail"},my={key:0},cy={key:1,class:"text-grey-8 text-italic"},py={key:2},fy={class:"text-subtitle2 text-bold text-grey-8 q-mt-xs"},gy={key:3,class:"text-grey-8 text-italic"},hl="Rincian Role Pengguna",by={__name:"Detail",setup(d){const n=fe(),u=G(()=>{const o={};return n.props.data.permissions&&n.props.data.permissions.forEach(s=>{const i=s.category;o[i]||(o[i]=[]),o[i].push(s)}),o});return(o,s)=>{const i=Q("i-head"),b=Q("authenticated-layout");return p(),h(W,null,[e(i,{title:hl}),e(b,{"show-drawer-button":!0},{title:l(()=>[y(r(hl))]),"left-button":l(()=>[t("div",sy,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=f=>o.$goBack())})])]),"right-button":l(()=>[t("div",ry,[e(D,{icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:s[1]||(s[1]=f=>a(X).get(o.route("admin.user-role.edit",{id:a(n).props.data.id})))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",iy,[t("div",dy,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[s[6]||(s[6]=t("div",{class:"text-subtitle1 text-bold text-grey-8"},"Info Role",-1)),t("table",uy,[t("tbody",null,[t("tr",null,[s[2]||(s[2]=t("td",{style:{width:"100px"}},"Nama Role",-1)),s[3]||(s[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[s[4]||(s[4]=t("td",null,"Deskripsi",-1)),s[5]||(s[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.description),1)])])]),s[7]||(s[7]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Pengguna ",-1)),a(n).props.data.users.length>0?(p(),h("div",my,[(p(!0),h(W,null,tt(a(n).props.data.users,f=>(p(),h("div",null," ● "+r(f.username)+" - "+r(f.name),1))),256))])):(p(),h("div",cy," Belum ada akun pengguna yang terdaftar. ")),s[8]||(s[8]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Hak Akses ",-1)),a(n).props.data.permissions.length>0?(p(),h("div",py,[(p(!0),h(W,null,tt(u.value,(f,m)=>(p(),h("div",{key:m},[t("div",fy,r(m),1),(p(!0),h(W,null,tt(f,c=>(p(),h("div",{key:c.id}," ● "+r(c.label),1))),128))]))),128))])):(p(),h("div",gy," Belum ada hak akses yang ditetapkan. "))]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},vy=Object.freeze(Object.defineProperty({__proto__:null,default:by},Symbol.toStringTag,{value:"Module"})),yy={class:"q-gutter-sm"},_y={class:"col col-md-6 q-pa-xs"},ky={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},wy={__name:"Editor",setup(d){const n=fe(),u=(n.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=Le({id:n.props.data.id,name:n.props.data.name,description:n.props.data.description,permissions:n.props.data.permissions?n.props.data.permissions.map(b=>b.id):[]}),s=()=>Je({form:o,url:route("admin.user-role.save")}),i=G(()=>{const b={};return n.props.permissions&&n.props.permissions.forEach(f=>{const m=f.category;b[m]||(b[m]=[]),b[m].push(f)}),b});return(b,f)=>{const m=Q("i-head"),c=Q("authenticated-layout");return p(),h(W,null,[e(m,{title:u}),e(c,{"show-drawer-button":!0},{title:l(()=>[y(r(u))]),"left-button":l(()=>[t("div",yy,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=v=>b.$goBack())})])]),"right-button":l(()=>[e(D,{icon:"save",label:"Simpan",color:"primary",disable:a(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:J(s,["prevent"])},null,8,["disable"])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",_y,[e(ze,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=v=>a(o).id=v)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":f[2]||(f[2]=v=>a(o).name=v),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[v=>v&&v.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).description,"onUpdate:modelValue":f[3]||(f[3]=v=>a(o).description=v),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(p(!0),h(W,null,tt(i.value,(v,_)=>(p(),h("div",{key:_},[t("div",ky,r(_),1),(p(!0),h(W,null,tt(v,g=>(p(),h("div",{key:g.id},[e(la,{class:"q-ma-none q-pa-none list-checkbox",modelValue:a(o).permissions,"onUpdate:modelValue":S=>a(o).permissions=S,val:g.id,label:g.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},hy=wt(wy,[["__scopeId","data-v-c97e395c"]]),$y=Object.freeze(Object.defineProperty({__proto__:null,default:hy},Symbol.toStringTag,{value:"Module"})),xy={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Sy={class:"q-pa-xs"},Vy={class:"full-width row flex-center text-grey-8 q-gutter-sm"},qy={class:"flex justify-end"},$l="Role Pengguna",Cy={__name:"Index",setup(d){const n=xe(),u=q(!1),o=q([]),s=q(!0),i=q(null),b=q(null),f=Ge(b),m=Oe({search:"",...De()}),c=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),v=[{name:"name",label:"Nama Role",field:"name",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{g()});const _=w=>lt({message:`Hapus role ${w.name}?`,url:route("admin.user-role.delete",w.id),fetchItemsCallback:g,loading:s}),g=(w=null)=>{Ue({pagination:c,filter:m,props:w,rows:o,url:route("admin.user-role.data"),loading:s,tableRef:i})},S=w=>X.get(route("admin.user-role.detail",{id:w.id})),O=G(()=>n.screen.gt.sm?v:v.filter(w=>w.name==="name"||w.name==="action"));return(w,I)=>{const C=Q("i-head"),x=Q("authenticated-layout");return p(),h(W,null,[e(C,{title:$l}),e(x,null,He({title:l(()=>[y(r($l))]),"right-button":l(()=>[e(D,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=U=>u.value=!u.value)},null,8,["icon"]),w.$can("admin.user-role.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=U=>a(X).get(w.route("admin.user-role.add")))})):k("",!0)]),default:l(()=>[t("div",Sy,[e(Pe,{class:"full-height-table",ref_key:"tableRef",ref:i,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":I[4]||(I[4]=U=>c.value=U),filter:m.search,loading:s.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Me({height:a(f)}),onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:U,message:F,filter:T})=>[t("div",Vy,[t("span",null,r(F)+" "+r(T?" with term "+T:""),1)])]),body:l(U=>[e(Ce,{props:U,class:"cursor-pointer",onClick:F=>S(U.row)},{default:l(()=>[e(Y,{key:"name",props:U,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(p(),P(V,{key:0,name:"person"})):k("",!0),y(" "+r(U.row.name),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:U},{default:l(()=>[t("div",qy,[w.$can("admin.user-role.add")||w.$can("admin.user-role.edit")||w.$can("admin.user-role.delete")?(p(),P(D,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[3]||(I[3]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[w.$can("admin.user-role.add")?ee((p(),P(ae,{key:0,clickable:"",onClick:J(F=>a(X).get(w.route("admin.user-role.duplicate",U.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"file_copy"})]),_:1}),e(N,null,{default:l(()=>I[5]||(I[5]=[y(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),w.$can("admin.user-role.edit")?ee((p(),P(ae,{key:1,clickable:"",onClick:J(F=>a(X).get(w.route("admin.user-role.edit",U.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>I[6]||(I[6]=[y("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),w.$can("admin.user-role.delete")?ee((p(),P(ae,{key:2,onClick:J(F=>_(U.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>I[7]||(I[7]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",xy,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":I[2]||(I[2]=U=>m.search=U),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ty=Object.freeze(Object.defineProperty({__proto__:null,default:Cy},Symbol.toStringTag,{value:"Module"})),Py={class:"q-gutter-sm"},Oy={class:"q-gutter-sm"},Iy={class:"row justify-center"},Ry={class:"col col-md-6 q-pa-xs"},Dy={class:"row"},Uy={class:"detail"},Ay={key:0},jy={key:1},Ey={key:2},xl="Rincian Pengguna",My={__name:"Detail",setup(d){const n=fe();return(u,o)=>{const s=Q("i-head"),i=Q("authenticated-layout");return p(),h(W,null,[e(s,{title:xl}),e(i,{"show-drawer-button":!0},{title:l(()=>[y(r(xl))]),"left-button":l(()=>[t("div",Py,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.user.index")))})])]),"right-button":l(()=>[t("div",Oy,[u.$can("admin.user.edit")&&a(n).props.data.id!=a(n).props.auth.user.id?(p(),P(D,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:o[1]||(o[1]=b=>u.$inertia.get(u.route("admin.user.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[t("div",Iy,[t("div",Ry,[t("div",Dy,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),t("table",Uy,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"125px"}},"ID Pengguna",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.username),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Nama Pengguna",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Jenis Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.USER_TYPES[a(n).props.data.type]),1)]),a(n).props.data.roles.length>0?(p(),h("tr",Ay,[o[8]||(o[8]=t("td",null,"Peran",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.roles.map(b=>b.name).join(",")),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Dibuat",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.created_at)),1)]),a(n).props.data.updated_at?(p(),h("tr",jy,[o[12]||(o[12]=t("td",null,"Diperbarui",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.updated_at)),1)])):k("",!0),t("tr",null,[o[14]||(o[14]=t("td",null,"Terakhir login",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.last_login_datetime?u.$dayjs(a(n).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),a(n).props.data.last_activity_datetime?(p(),h("tr",Ey,[o[17]||(o[17]=t("td",null,"Aktifitas Terakhir",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,[y(r(u.$dayjs(a(n).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),o[16]||(o[16]=t("br",null,null,-1)),y(r(a(n).props.data.last_activity_description),1)])])):k("",!0)])])]),_:1})]),_:1})])])])]),_:1})],64)}}},Ny=Object.freeze(Object.defineProperty({__proto__:null,default:My},Symbol.toStringTag,{value:"Module"}));function By(d){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(d)}const zy={class:"q-gutter-sm"},Fy={class:"row justify-center"},Ly={class:"col col-md-6 q-pa-xs"},Hy={__name:"Editor",setup(d){const n=Ze(window.CONSTANTS.USER_TYPES),u=fe(),o=u.props.roles,s=u.props.data.id?"Edit Pengguna":"Tambah Pengguna",i=Le({id:u.props.data.id,name:u.props.data.name,username:u.props.data.username,password:"",type:u.props.data.type?u.props.data.type:n[0].value,active:!!u.props.data.active,roles:u.props.data.roles??[]}),b=()=>Je({form:i,url:route("admin.user.save")});return(f,m)=>{const c=Q("i-head"),v=Q("authenticated-layout");return p(),h(W,null,[e(c,{title:a(s)},null,8,["title"]),e(v,{"show-drawer-button":!0},{title:l(()=>[y(r(a(s)),1)]),"left-button":l(()=>[t("div",zy,[e(D,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>f.$goBack())})])]),default:l(()=>[t("div",Fy,[t("div",Ly,[e(ze,{class:"row",onSubmit:J(b,["prevent"])},{default:l(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(te,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[1]||(m[1]=_=>a(i).id=_)},null,512),[[dt,a(i).id]]),e(oe,{modelValue:a(i).name,"onUpdate:modelValue":m[2]||(m[2]=_=>a(i).name=_),modelModifiers:{trim:!0},label:"Nama",error:!!a(i).errors.name,disable:a(i).processing,"error-message":a(i).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(i).username,"onUpdate:modelValue":m[3]||(m[3]=_=>a(i).username=_),modelModifiers:{trim:!0},type:"text",label:"ID Pengguna","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.username,"error-message":a(i).errors.username,rules:[_=>_&&_.length>0||"ID Pengguna harus diisi.",_=>a(By)(_)||"ID Pengguna tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(i).password,"onUpdate:modelValue":m[4]||(m[4]=_=>a(i).password=_),type:"password",label:"Kata Sandi","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.password,"error-message":a(i).errors.password,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(i).type,"onUpdate:modelValue":m[5]||(m[5]=_=>a(i).type=_),label:"Jenis Akun",options:a(n),"map-options":"","emit-value":"","lazy-rules":"",disable:a(i).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(i).errors.type,"error-message":a(i).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(de,{modelValue:a(i).roles,"onUpdate:modelValue":m[6]||(m[6]=_=>a(i).roles=_),label:"Peran",options:a(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:a(i).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(i).errors.roles,"error-message":a(i).errors.roles,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(da,{modelValue:a(i).active,"onUpdate:modelValue":m[7]||(m[7]=_=>a(i).active=_),disable:a(i).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:l(()=>[e(D,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing,onClick:b},null,8,["disable"]),e(D,{icon:"cancel",label:"Batal",class:"text-black",disable:a(i).processing,onClick:m[8]||(m[8]=_=>f.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},Ky=Object.freeze(Object.defineProperty({__proto__:null,default:Hy},Symbol.toStringTag,{value:"Module"})),Yy={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Qy={class:"q-pa-xs"},Wy={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Jy={class:"elipsis",style:{"max-width":"200px"}},Gy={class:"flex justify-end"},Sl="Pengguna",Xy={__name:"Index",setup(d){const n=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.USER_TYPES)],u=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=fe(),s=xe(),i=o.props.auth.user,b=q([]),f=q(!0),m=q(!1),c=Oe({role:"all",status:"active",search:""}),v=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),_=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];he(()=>{S()});const g=()=>S(),S=(F=null)=>Ue({pagination:v,props:F,rows:b,loading:f,filter:c,url:route("admin.user.data"),tableRef:C}),O=F=>lt({url:route("admin.user.delete",F.id),message:`Hapus pengguna ${F.username}?`,fetchItemsCallback:S,loading:f}),w=G(()=>s.screen.gt.sm?_:_.filter(F=>F.name==="username"||F.name==="action")),I=F=>X.get(route("admin.user.detail",F.id)),C=q(null),x=q(null),U=Ge(x);return(F,T)=>{const R=Q("i-head"),B=Q("authenticated-layout");return p(),h(W,null,[e(R,{title:Sl}),e(B,null,He({title:l(()=>[y(r(Sl))]),"right-button":l(()=>[e(D,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=M=>m.value=!m.value)},null,8,["icon"]),F.$can("admin.user.add")?(p(),P(D,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:T[1]||(T[1]=M=>a(X).get(F.route("admin.user.add")))})):k("",!0)]),default:l(()=>[t("div",Qy,[e(Pe,{ref_key:"tableRef",ref:C,class:"full-height-table",style:Me({height:a(U)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:v.value,"onUpdate:pagination":T[6]||(T[6]=M=>v.value=M),filter:c.search,loading:f.value,columns:w.value,rows:b.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:l(()=>[e(Ee,{showing:"",color:"red"})]),"no-data":l(({icon:M,message:E,term:$})=>[t("div",Wy,[t("span",null,r(E)+" "+r($?" with term "+$:""),1)])]),body:l(M=>[e(Ce,{props:M,class:$e([M.row.active?"":"bg-red-1","cursor-pointer"]),onClick:E=>I(M.row)},{default:l(()=>[e(Y,{key:"username",props:M},{default:l(()=>[t("div",null,[a(s).screen.gt.sm?k("",!0):(p(),h(W,{key:0},[e(V,{name:"person",class:"inline-icon"}),T[7]||(T[7]=y(" Username: "))],64)),y(" "+r(M.row.username),1)]),a(s).screen.gt.sm?k("",!0):(p(),h(W,{key:0},[t("div",null,[e(V,{name:"person",class:"inline-icon"}),y(" Nama: "+r(M.row.name),1)]),t("div",Jy,[e(V,{name:"group",class:"inline-icon"}),T[8]||(T[8]=y(" Jenis Akun: ")),t("span",null,r(F.$CONSTANTS.USER_TYPES[M.row.type]),1)]),t("div",null,[e(V,{name:"group",class:"inline-icon"}),y(" Peran: "+r(M.row.roles.map(E=>E.name).join(",")),1)])],64))]),_:2},1032,["props"]),e(Y,{key:"name",props:M},{default:l(()=>[y(r(M.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"role",props:M,align:"center"},{default:l(()=>[t("span",null,r(F.$CONSTANTS.USER_TYPES[M.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:M},{default:l(()=>[t("div",Gy,[F.$can("admin.user.add")||F.$can("admin.user.edit")||F.$can("admin.user.delete")?(p(),P(D,{key:0,disable:M.row.id==a(i).id||M.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:T[5]||(T[5]=J(()=>{},["stop"]))},{default:l(()=>[e(We,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(je,{style:{width:"200px"}},{default:l(()=>[F.$can("admin.user.add")?ee((p(),P(ae,{key:0,clickable:"",onClick:J(E=>a(X).get(F.route("admin.user.duplicate",M.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"file_copy"})]),_:1}),e(N,null,{default:l(()=>T[9]||(T[9]=[y(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),F.$can("admin.user.edit")?ee((p(),P(ae,{key:1,clickable:"",onClick:J(E=>a(X).get(F.route("admin.user.edit",M.row.id)),["stop"])},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"edit"})]),_:1}),e(N,null,{default:l(()=>T[10]||(T[10]=[y("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0),F.$can("admin.user.delete")?ee((p(),P(ae,{key:2,onClick:J(E=>O(M.row),["stop"]),clickable:""},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"delete_forever"})]),_:1}),e(N,null,{default:l(()=>T[11]||(T[11]=[y("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[ue]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:x},{default:l(()=>[t("div",Yy,[e(de,{modelValue:c.type,"onUpdate:modelValue":[T[2]||(T[2]=M=>c.type=M),g],class:"custom-select col-xs-12 col-sm-2",options:n,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(de,{modelValue:c.status,"onUpdate:modelValue":[T[3]||(T[3]=M=>c.status=M),g],class:"custom-select col-xs-12 col-sm-2",options:u,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":T[4]||(T[4]=M=>c.search=M),placeholder:"Cari",clearable:""},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Zy=Object.freeze(Object.defineProperty({__proto__:null,default:Xy},Symbol.toStringTag,{value:"Module"})),e_=$t({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(d,{slots:n,emit:u}){let o=!1,s,i,b=null,f=null,m,c;function v(){s&&s(),s=null,o=!1,b!==null&&(clearTimeout(b),b=null),f!==null&&(clearTimeout(f),f=null),i!==void 0&&i.removeEventListener("transitionend",m),m=null}function _(w,I,C){I!==void 0&&(w.style.height=`${I}px`),w.style.transition=`height ${d.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,s=C}function g(w,I){w.style.overflowY=null,w.style.height=null,w.style.transition=null,v(),I!==c&&u(I)}function S(w,I){let C=0;i=w,o===!0?(v(),C=w.offsetHeight===w.scrollHeight?0:void 0):(c="hide",w.style.overflowY="hidden"),_(w,C,I),b=setTimeout(()=>{b=null,w.style.height=`${w.scrollHeight}px`,m=x=>{f=null,(Object(x)!==x||x.target===w)&&g(w,"show")},w.addEventListener("transitionend",m),f=setTimeout(m,d.duration*1.1)},100)}function O(w,I){let C;i=w,o===!0?v():(c="show",w.style.overflowY="hidden",C=w.scrollHeight),_(w,C,I),b=setTimeout(()=>{b=null,w.style.height=0,m=x=>{f=null,(Object(x)!==x||x.target===w)&&g(w,"hide")},w.addEventListener("transitionend",m),f=setTimeout(m,d.duration*1.1)},100)}return oa(()=>{o===!0&&v()}),()=>_e(Cl,{css:!1,appear:d.appear,onEnter:S,onLeave:O},n.default)}}),Pt=hn({}),t_=Object.keys(Al),St=$t({name:"QExpansionItem",props:{...Al,...xn,...ka,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...$n,"click","afterShow","afterHide"],setup(d,{slots:n,emit:u}){const{proxy:{$q:o}}=Tt(),s=wa(d,o),i=q(d.modelValue!==null?d.modelValue:d.defaultOpened),b=q(null),f=Sn(),{show:m,hide:c,toggle:v}=Vn({showing:i});let _,g;const S=G(()=>`q-expansion-item q-item-type q-expansion-item--${i.value===!0?"expanded":"collapsed"} q-expansion-item--${d.popup===!0?"popup":"standard"}`),O=G(()=>d.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:d.contentInsetLevel*56+"px"}),w=G(()=>d.disable!==!0&&(d.href!==void 0||d.to!==void 0&&d.to!==null&&d.to!=="")),I=G(()=>{const le={};return t_.forEach(qe=>{le[qe]=d[qe]}),le}),C=G(()=>w.value===!0||d.expandIconToggle!==!0),x=G(()=>d.expandedIcon!==void 0&&i.value===!0?d.expandedIcon:d.expandIcon||o.iconSet.expansionItem[d.denseToggle===!0?"denseIcon":"icon"]),U=G(()=>d.disable!==!0&&(w.value===!0||d.expandIconToggle===!0)),F=G(()=>({expanded:i.value===!0,detailsId:f.value,toggle:v,show:m,hide:c})),T=G(()=>{const le=d.toggleAriaLabel!==void 0?d.toggleAriaLabel:o.lang.label[i.value===!0?"collapse":"expand"](d.label);return{role:"button","aria-expanded":i.value===!0?"true":"false","aria-controls":f.value,"aria-label":le}});Ae(()=>d.group,le=>{g!==void 0&&g(),le!==void 0&&K()});function R(le){w.value!==!0&&v(le),u("click",le)}function B(le){le.keyCode===13&&M(le,!0)}function M(le,qe){qe!==!0&&b.value!==null&&b.value.focus(),v(le),It(le)}function E(){u("afterShow")}function $(){u("afterHide")}function K(){_===void 0&&(_=qn()),i.value===!0&&(Pt[d.group]=_);const le=Ae(i,Ne=>{Ne===!0?Pt[d.group]=_:Pt[d.group]===_&&delete Pt[d.group]}),qe=Ae(()=>Pt[d.group],(Ne,ft)=>{ft===_&&Ne!==void 0&&Ne!==_&&c()});g=()=>{le(),qe(),Pt[d.group]===_&&delete Pt[d.group],g=void 0}}function se(){const le={class:[`q-focusable relative-position cursor-pointer${d.denseToggle===!0&&d.switchToggleSide===!0?" items-end":""}`,d.expandIconClass],side:d.switchToggleSide!==!0,avatar:d.switchToggleSide},qe=[_e(V,{class:"q-expansion-item__toggle-icon"+(d.expandedIcon===void 0&&i.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:x.value})];return U.value===!0&&(Object.assign(le,{tabindex:0,...T.value,onClick:M,onKeyup:B}),qe.unshift(_e("div",{ref:b,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),_e(N,le,()=>qe)}function j(){let le;return n.header!==void 0?le=[].concat(n.header(F.value)):(le=[_e(N,()=>[_e(ye,{lines:d.labelLines},()=>d.label||""),d.caption?_e(ye,{lines:d.captionLines,caption:!0},()=>d.caption):null])],d.icon&&le[d.switchToggleSide===!0?"push":"unshift"](_e(N,{side:d.switchToggleSide===!0,avatar:d.switchToggleSide!==!0},()=>_e(V,{name:d.icon})))),d.disable!==!0&&d.hideExpandIcon!==!0&&le[d.switchToggleSide===!0?"unshift":"push"](se()),le}function A(){const le={ref:"item",style:d.headerStyle,class:d.headerClass,dark:s.value,disable:d.disable,dense:d.dense,insetLevel:d.headerInsetLevel};return C.value===!0&&(le.clickable=!0,le.onClick=R,Object.assign(le,w.value===!0?I.value:T.value)),_e(ae,le,j)}function Z(){return ee(_e("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:O.value,id:f.value},Ct(n.default)),[[Il,i.value]])}function we(){const le=[A(),_e(e_,{duration:d.duration,onShow:E,onHide:$},Z)];return d.expandSeparator===!0&&le.push(_e(Xe,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:s.value}),_e(Xe,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:s.value})),le}return d.group!==void 0&&K(),oa(()=>{g!==void 0&&g()}),()=>_e("div",{class:S.value},[_e("div",{class:"q-expansion-item__container relative-position"},we())])}}),a_={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},l_={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},o_={class:"text-bold"},n_={class:"text-grey-8 text-caption"},s_={class:"absolute-bottom text-grey-6 q-pa-md"},va="amanah-pos.layout.left-drawer-open",r_={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(d,{expose:n}){const u=xe(),o=fe(),s=q(JSON.parse(localStorage.getItem(va))),i=q(!1),b=()=>s.value=!s.value,f=()=>{s.value=!1};return Ae(s,m=>{localStorage.setItem(va,m)}),he(()=>{s.value=JSON.parse(localStorage.getItem(va)),u.screen.lt.md&&(s.value=!1)}),n({hideDrawer:f}),(m,c)=>(p(),P(Dn,{view:"lHh LpR lFf"},{default:l(()=>[e(Cn,null,{default:l(()=>[e(et,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:l(()=>[d.showDrawerButton&&!s.value?(p(),P(D,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:b},{default:l(()=>[e(V,{class:"material-symbols-outlined"},{default:l(()=>c[27]||(c[27]=[y("dock_to_right")])),_:1})]),_:1})):k("",!0),Ot(m.$slots,"left-button",{},void 0,!0),e(Tn,{style:{"font-size":"16px"}},{default:l(()=>[Ot(m.$slots,"title",{},()=>[y(r(m.$config.APP_NAME),1)],!0)]),_:3}),Ot(m.$slots,"right-button",{},void 0,!0)]),_:3}),Ot(m.$slots,"header",{},void 0,!0)]),_:3}),e(Pn,{breakpoint:768,modelValue:s.value,"onUpdate:modelValue":c[26]||(c[26]=v=>s.value=v),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:l(()=>[t("div",a_,[t("div",l_,[e(On,{modelValue:i.value,"onUpdate:modelValue":c[2]||(c[2]=v=>i.value=v),class:$e(["profile-btn text-bold",{"profile-btn-active":i.value}]),flat:"",label:a(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:l(()=>[e(je,{id:"profile-btn-popup",style:{color:"#444"}},{default:l(()=>[e(ae,null,{default:l(()=>[e(Ft,{style:{"margin-left":"-15px"}},{default:l(()=>[e(V,{name:"person"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>[t("div",o_,r(a(o).props.auth.user.name),1),t("div",n_,[y(r(m.$CONSTANTS.USER_TYPES[a(o).props.auth.user.type])+" ",1),c[28]||(c[28]=t("br",null,null,-1)),y(" "+r(a(o).props.company.name),1)])]),_:1})]),_:1})]),_:1}),e(Xe),ee((p(),P(ae,{class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/profile"),onClick:c[0]||(c[0]=v=>a(X).get(m.route("admin.profile.edit")))},{default:l(()=>[e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>[e(V,{name:"manage_accounts",class:"q-mr-sm"}),c[29]||(c[29]=y(" Profil Saya"))]),_:1})]),_:1})]),_:1},8,["active"])),[[ue],[ne]]),m.$can("admin.company-profile.edit")?ee((p(),P(ae,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/company-profile"),onClick:c[1]||(c[1]=v=>a(X).get(m.route("admin.company-profile.edit")))},{default:l(()=>[e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>[e(V,{name:"home_work",class:"q-mr-sm"}),c[30]||(c[30]=y(" Profil Perusahaan"))]),_:1})]),_:1})]),_:1},8,["active"])),[[ue],[ne]]):k("",!0),e(Xe),ee((p(),P(ae,{clickable:"",style:{color:"inherit"},href:m.route("admin.auth.logout")},{default:l(()=>[e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>[e(V,{name:"logout",class:"q-mr-sm"}),c[31]||(c[31]=y(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[ue],[ne]])]),_:1})]),_:1},8,["modelValue","label","class"]),s.value?(p(),P(D,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:b},{default:l(()=>[e(V,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(In,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:l(()=>[e(je,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:l(()=>[ee((p(),P(ae,{clickable:"",active:m.$page.url.startsWith("/admin/dashboard"),onClick:c[3]||(c[3]=v=>a(X).get(m.route("admin.dashboard")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"dashboard"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[32]||(c[32]=[y("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]),m.$can("admin.sales-order.index")||m.$can("admin.customer.index")?(p(),P(St,{key:0,icon:"storefront",label:"Penjualan","default-opened":m.$page.url.startsWith("/admin/sales-orders")||m.$page.url.startsWith("/admin/customers")},{default:l(()=>[m.$can("admin.sales-order.index")?ee((p(),P(ae,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/sales-orders"),onClick:c[4]||(c[4]=v=>a(X).get(m.route("admin.sales-order.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"shopping_cart"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[33]||(c[33]=[y("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.customer.index")?ee((p(),P(ae,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/customers"),onClick:c[5]||(c[5]=v=>a(X).get(m.route("admin.customer.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"people"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[34]||(c[34]=[y("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),m.$can("admin.purchase-order.index")||m.$can("admin.supplier.index")?(p(),P(St,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":m.$page.url.startsWith("/admin/purchase-orders")||m.$page.url.startsWith("/admin/suppliers")},{default:l(()=>[m.$can("admin.purchase-order.index")?ee((p(),P(ae,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/purchase-orders"),onClick:c[6]||(c[6]=v=>a(X).get(m.route("admin.purchase-order.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"shopping_cart"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[35]||(c[35]=[y("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.supplier.index")?ee((p(),P(ae,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/suppliers"),onClick:c[7]||(c[7]=v=>a(X).get(m.route("admin.supplier.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"people"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[36]||(c[36]=[y("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),m.$can("admin.product.index")||m.$can("admin.product-category.index")||m.$can("admin.stock-adjustment.index")||m.$can("admin.stock-movement.index")?(p(),P(St,{key:2,icon:"inventory_2",label:"Inventori","default-opened":m.$page.url.startsWith("/admin/products")||m.$page.url.startsWith("/admin/product-categories")||m.$page.url.startsWith("/admin/stock-adjustments")||m.$page.url.startsWith("/admin/stock-movements")},{default:l(()=>[m.$can("admin.stock-adjustment.index")?ee((p(),P(ae,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/stock-adjustments"),onClick:c[8]||(c[8]=v=>a(X).get(m.route("admin.stock-adjustment.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"swap_vert"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[37]||(c[37]=[y("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.stock-movement.index")?ee((p(),P(ae,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/stock-movements"),onClick:c[9]||(c[9]=v=>a(X).get(m.route("admin.stock-movement.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"timeline"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[38]||(c[38]=[y("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.product.index")?ee((p(),P(ae,{key:2,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/products"),onClick:c[10]||(c[10]=v=>a(X).get(m.route("admin.product.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"box"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[39]||(c[39]=[y("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.product-category.index")?ee((p(),P(ae,{key:3,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/product-categories"),onClick:c[11]||(c[11]=v=>a(X).get(m.route("admin.product-category.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"category"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[40]||(c[40]=[y("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),m.$can("admin.cashier-session.index")||m.$can("admin.cashier-terminal.index")?(p(),P(St,{key:3,icon:"point_of_sale",label:"Kasir","default-opened":m.$page.url.startsWith("/admin/cashier-terminals")||m.$page.url.startsWith("/admin/cashier-session")},{default:l(()=>[m.$can("admin.cashier-session.index")?ee((p(),P(ae,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/cashier-sessions"),onClick:c[12]||(c[12]=v=>a(X).get(m.route("admin.cashier-session.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"tv_signin"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[41]||(c[41]=[y("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.cashier-terminal.index")?ee((p(),P(ae,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/cashier-terminals"),onClick:c[13]||(c[13]=v=>a(X).get(m.route("admin.cashier-terminal.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"point_of_sale"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[42]||(c[42]=[y("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),m.$can("admin.customer-wallet-transaction-confirmation.index")||m.$can("admin.customer-wallet-transaction.index")?(p(),P(St,{key:4,icon:"wallet",label:"Wallet","default-opened":m.$page.url.startsWith("/admin/customer-wallet-transactions")||m.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:l(()=>[m.$can("admin.customer-wallet-transaction-confirmation.index")?ee((p(),P(ae,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:c[14]||(c[14]=v=>a(X).get(m.route("admin.customer-wallet-transaction-confirmation.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"add_task"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[43]||(c[43]=[y("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.customer-wallet-transaction.index")?ee((p(),P(ae,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:c[15]||(c[15]=v=>a(X).get(m.route("admin.customer-wallet-transaction.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"moving"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[44]||(c[44]=[y("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),m.$can("admin.finance-transaction.index")||m.$can("admin.finance-account.index")?(p(),P(St,{key:5,icon:"finance",label:"Keuangan","default-opened":m.$page.url.startsWith("/admin/finance-accounts")||m.$page.url.startsWith("/admin/finance-transactions")},{default:l(()=>[m.$can("admin.finance-transaction.index")?ee((p(),P(ae,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/finance-transactions"),onClick:c[16]||(c[16]=v=>a(X).get(m.route("admin.finance-transaction.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"moving"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[45]||(c[45]=[y("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.finance-account.index")?ee((p(),P(ae,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/finance-accounts"),onClick:c[17]||(c[17]=v=>a(X).get(m.route("admin.finance-account.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"groups_2"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[46]||(c[46]=[y("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),m.$can("admin.operational-cost.index")||m.$can("admin.operational-cost-category.index")?(p(),P(St,{key:6,icon:"paid",label:"Operasional","default-opened":m.$page.url.startsWith("/admin/operational-costs")||m.$page.url.startsWith("/admin/operational-cost-categories")},{default:l(()=>[m.$can("admin.operational-cost.index")?ee((p(),P(ae,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/operational-costs"),onClick:c[18]||(c[18]=v=>a(X).get(m.route("admin.operational-cost.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"request_quote"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[47]||(c[47]=[y("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.operational-cost-category.index")?ee((p(),P(ae,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/operational-cost-categories"),onClick:c[19]||(c[19]=v=>a(X).get(m.route("admin.operational-cost-category.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"category"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[48]||(c[48]=[y("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(St,{icon:"settings",label:"Pengaturan","default-opened":m.$page.url.startsWith("/admin/settings")},{default:l(()=>[m.$can("admin.pos-settings.edit")?ee((p(),P(ae,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/pos"),onClick:c[20]||(c[20]=v=>a(X).get(m.route("admin.pos-settings.edit")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"point_of_sale"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[49]||(c[49]=[y("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.database-settings.index")?ee((p(),P(ae,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/database"),onClick:c[21]||(c[21]=v=>a(X).get(m.route("admin.database-settings.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"database"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[50]||(c[50]=[y("Database")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.user.index")?ee((p(),P(ae,{key:2,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/users"),onClick:c[22]||(c[22]=v=>a(X).get(m.route("admin.user.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"person"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[51]||(c[51]=[y("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),m.$can("admin.user-role.index")?ee((p(),P(ae,{key:3,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/user-roles"),onClick:c[23]||(c[23]=v=>a(X).get(m.route("admin.user-role.index")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"group"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[52]||(c[52]=[y("Role Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),ee((p(),P(ae,{class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/profile"),onClick:c[24]||(c[24]=v=>a(X).get(m.route("admin.user-profile.edit")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"manage_accounts"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[53]||(c[53]=[y("Profil Saya")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]),m.$can("admin.company-profile.edit")?ee((p(),P(ae,{key:4,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/company-profile"),onClick:c[25]||(c[25]=v=>a(X).get(m.route("admin.company-profile.edit")))},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"apartment"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[54]||(c[54]=[y("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"]),ee((p(),P(ae,{clickable:"",style:{color:"inherit"},href:m.route("admin.auth.logout")},{default:l(()=>[e(N,{avatar:""},{default:l(()=>[e(V,{name:"logout"})]),_:1}),e(N,null,{default:l(()=>[e(ye,null,{default:l(()=>c[55]||(c[55]=[y("Logout")])),_:1})]),_:1})]),_:1},8,["href"])),[[ue],[ne]]),t("div",s_," © 2025 - "+r(m.$config.APP_NAME+" v"+m.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Rn,{class:"bg-grey-1"},{default:l(()=>[e(Ve,null,{default:l(()=>[Ot(m.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),Ot(m.$slots,"footer",{},void 0,!0)]),_:3}))}},i_=wt(r_,[["__scopeId","data-v-d4481082"]]),d_={__name:"GuestLayout",setup(d){return(n,u)=>(p(),P(Un,null,{default:l(()=>[Ot(n.$slots,"default")]),_:3}))}};An({layouts:{authenticated:i_,guest:d_},pagesGlob:Object.assign({"./pages/About.vue":Bn,"./pages/_examples/Autocomplete1.vue":Hn,"./pages/auth/Login.vue":Gn,"./pages/cashier-session/Close.vue":os,"./pages/cashier-session/Detail.vue":Qs,"./pages/cashier-session/Index.vue":er,"./pages/cashier-session/Open.vue":or,"./pages/cashier-session/detail/FinanceTransactionTab.vue":Fs,"./pages/cashier-session/detail/MainInfoTab.vue":Cs,"./pages/cashier-session/detail/SalesOrderTab.vue":js,"./pages/cashier-terminal/Detail.vue":kr,"./pages/cashier-terminal/Editor.vue":Sr,"./pages/cashier-terminal/Index.vue":Or,"./pages/cashier-terminal/detail/MainInfoTab.vue":cr,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":gr,"./pages/company-profile/Edit.vue":jr,"./pages/company-profile/partials/CompanyInfoForm.vue":Ir,"./pages/customer-wallet-transaction-confirmation/Detail.vue":Qr,"./pages/customer-wallet-transaction-confirmation/Index.vue":Zr,"./pages/customer-wallet-transaction/Adjustment.vue":ai,"./pages/customer-wallet-transaction/Detail.vue":pi,"./pages/customer-wallet-transaction/Editor.vue":vi,"./pages/customer-wallet-transaction/Index.vue":xi,"./pages/customer/Detail.vue":Ki,"./pages/customer/Editor.vue":Ji,"./pages/customer/Import.vue":ld,"./pages/customer/Index.vue":dd,"./pages/customer/detail/MainInfoTab.vue":Ri,"./pages/customer/detail/OrderHistoryTab.vue":Bi,"./pages/customer/detail/WalletHistoryTab.vue":Ai,"./pages/dashboard/Index.vue":Pd,"./pages/dashboard/cards/ActualSummaryCard.vue":bd,"./pages/dashboard/cards/ChartCard.vue":wd,"./pages/dashboard/cards/SummaryCard.vue":Nd,"./pages/dashboard/cards/TopCard.vue":Sd,"./pages/finance-account/Detail.vue":Xd,"./pages/finance-account/Editor.vue":lu,"./pages/finance-account/Index.vue":bu,"./pages/finance-account/detail/HistoryTab.vue":Kd,"./pages/finance-account/detail/MainInfoTab.vue":zd,"./pages/finance-transaction/Detail.vue":qu,"./pages/finance-transaction/Editor.vue":Ou,"./pages/finance-transaction/Index.vue":Mu,"./pages/operational-cost-category/Editor.vue":Fu,"./pages/operational-cost-category/Index.vue":Ju,"./pages/operational-cost/Detail.vue":rm,"./pages/operational-cost/Editor.vue":pm,"./pages/operational-cost/Index.vue":hm,"./pages/product-category/Editor.vue":Vm,"./pages/product-category/Index.vue":Rm,"./pages/product/Detail.vue":tc,"./pages/product/Editor.vue":nc,"./pages/product/Import.vue":dc,"./pages/product/Index.vue":kc,"./pages/product/detail/MainInfoTab.vue":Hm,"./pages/product/detail/StockHistoryTab.vue":Qm,"./pages/purchase-order/Detail.vue":kp,"./pages/purchase-order/Editor.vue":Ff,"./pages/purchase-order/Index.vue":ag,"./pages/purchase-order/detail/InvoiceTab.vue":Lc,"./pages/purchase-order/detail/PaymentDialog.vue":Xc,"./pages/purchase-order/detail/PaymentTab.vue":gp,"./pages/purchase-order/editor/HelpDialog.vue":Zp,"./pages/purchase-order/editor/ItemEditorDialog.vue":Yp,"./pages/purchase-order/editor/ItemsListTable.vue":Sp,"./pages/purchase-order/editor/OrderInfoDialog.vue":lf,"./pages/purchase-order/editor/PaymentDialog.vue":Bp,"./pages/purchase-order/editor/SuccessDialog.vue":vf,"./pages/sales-order/Detail.vue":ab,"./pages/sales-order/Editor.vue":y1,"./pages/sales-order/Index.vue":U1,"./pages/sales-order/detail/InvoiceTab.vue":qg,"./pages/sales-order/detail/PaymentDialog.vue":Ug,"./pages/sales-order/detail/PaymentTab.vue":Xg,"./pages/sales-order/editor/HelpDialog.vue":Pb,"./pages/sales-order/editor/ItemEditorDialog.vue":Vb,"./pages/sales-order/editor/ItemsListTable.vue":rb,"./pages/sales-order/editor/OrderInfoDialog.vue":Db,"./pages/sales-order/editor/PaymentDialog.vue":$b,"./pages/sales-order/editor/SuccessDialog.vue":Yb,"./pages/settings/database/Index.vue":N1,"./pages/settings/pos/Edit.vue":H1,"./pages/stock-adjustment/Create.vue":tv,"./pages/stock-adjustment/Detail.vue":mv,"./pages/stock-adjustment/Editor.vue":yv,"./pages/stock-adjustment/Index.vue":Cv,"./pages/stock-movement/Index.vue":Dv,"./pages/supplier/Detail.vue":Bv,"./pages/supplier/Editor.vue":Kv,"./pages/supplier/Index.vue":Xv,"./pages/user-profile/Edit.vue":ny,"./pages/user-profile/partials/UpdatePasswordForm.vue":Zv,"./pages/user-profile/partials/UpdateProfileInformationForm.vue":ey,"./pages/user-role/Detail.vue":vy,"./pages/user-role/Editor.vue":$y,"./pages/user-role/Index.vue":Ty,"./pages/user/Detail.vue":Ny,"./pages/user/Editor.vue":Ky,"./pages/user/Index.vue":Zy})});
