import{_ as _t,r as W,c as w,o as p,a as e,w as l,b as t,Q as ce,d as ae,e as _,F as Y,f as V,g as O,h as y,i as de,t as r,u as a,j as K,k as Qe,l as la,T as ze,m as Ao,n as Ve,p as Fe,q as J,s as Ze,v as Lt,x as S,y as oe,z as A,A as mt,B as fe,C as Be,D as ee,E as dt,G as it,H as Z,I as jo,J as pa,K as Cl,L as Tt,M as G,N as oa,O as he,R as se,P as ke,S as Tl,U as Eo,V as Mo,W as Ut,X as $t,Y as fa,Z as _a,$ as No,a0 as Ee,a1 as Bo,a2 as zo,a3 as Fo,a4 as Ct,a5 as Lo,a6 as Ho,a7 as ga,a8 as Mt,a9 as ba,aa as Pa,ab as Ko,ac as Xt,ad as Oa,ae as Yo,af as Ra,ag as Wo,ah as Pl,ai as Qo,aj as Jo,ak as Go,al as ka,am as wa,an as Xo,ao as Vt,ap as ve,aq as Pe,ar as Re,as as Ie,at as $e,au as qe,av as L,aw as we,ax as ut,ay as Ae,az as Ce,aA as ea,aB as xe,aC as Je,aD as Ke,aE as Le,aF as et,aG as je,aH as Xe,aI as Me,aJ as le,aK as M,aL as ue,aM as at,aN as Ue,aO as Ol,aP as na,aQ as Yt,aR as Wt,aS as Qt,aT as At,aU as jt,aV as tt,aW as Ia,aX as sa,aY as Da,aZ as ra,a_ as Nt,a$ as Bt,b0 as ha,b1 as Jt,b2 as Zo,b3 as en,b4 as Rl,b5 as tn,b6 as an,b7 as ln,b8 as on,b9 as Ua,ba as nn,bb as sn,bc as rn,bd as dn,be as Il,bf as Ge,bg as un,bh as Aa,bi as mn,bj as cn,bk as pn,bl as fn,bm as gn,bn,bo as vn,bp as _e,bq as Ht,br as st,bs as _n,bt as yn,bu as kn,bv as Dl,bw as ta,bx as ct,by as wn,bz as hn,bA as $n,bB as vt,bC as aa,bD as Pt,bE as Ul,bF as Al,bG as xn,bH as wt,bI as gt,bJ as bt,bK as zt,bL as ia,bM as jl,bN as Sn,bO as Vn,bP as qn,bQ as El,bR as Cn,bS as Tn,bT as Pn,bU as Dt,bV as On,bW as Rn,bX as In,bY as Dn,bZ as Un,b_ as An,b$ as jn,c0 as En,c1 as Mn,c2 as Nn}from"./virtual_pwa-register-D-yP4BSk.js";const Bn={},zn={class:"row"};function Fn(u,n){const d=W("i-head"),o=W("authenticated-layout");return p(),w(Y,null,[e(d,{title:"About"}),e(o,null,{title:l(()=>n[0]||(n[0]=[_("About")])),default:l(()=>[t("div",zn,[e(ce,{class:"col q-pa-md q-ma-md",square:"",flat:"",bordered:""},{default:l(()=>[e(ae,null,{default:l(()=>n[1]||(n[1]=[t("div",{class:"q-mb-md text-h4"},"About",-1),t("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Autem soluta, accusamus placeat eius eligendi perferendis quisquam veritatis iste debitis laboriosam facere et aliquam quos beatae illo distinctio rerum eos! Expedita, voluptatem. Aut nihil deleniti magni fuga eius labore aliquam nulla quod ullam sunt amet eum asperiores, harum unde eligendi tempore sapiente. Placeat sed, dignissimos voluptatum perspiciatis saepe aspernatur, maxime est, ipsam quas nobis cumque sunt labore molestias? Amet in sed ullam recusandae, nostrum dicta facilis blanditiis incidunt quae commodi soluta id impedit vel fugit illo, molestias reiciendis, provident nam molestiae! Ipsam, hic. Facere aut quisquam praesentium enim illum, pariatur nam.",-1),t("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque, cum nulla. Ut eligendi tenetur aliquam cum mollitia repellat voluptas, fugiat doloremque sunt commodi enim excepturi distinctio id sapiente incidunt ipsam asperiores cupiditate, labore libero! Ad facere magni cumque perspiciatis, adipisci possimus pariatur quo nobis minus, est enim similique quaerat vel asperiores ipsam harum et, totam fugit.",-1),t("p",null,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Suscipit aspernatur maxime consectetur, consequatur excepturi facilis praesentium rem placeat sapiente, maiores doloribus modi voluptate. Unde autem dolor officiis numquam incidunt quasi aspernatur nam dolores ratione quidem recusandae, nulla qui provident molestias odit nemo praesentium quas voluptatem aliquid perferendis, iste veritatis vitae. Dolor, eligendi quidem distinctio asperiores doloremque culpa corporis quibusdam earum ex laudantium iure officia ullam nostrum maxime voluptatum laboriosam impedit labore illum. Culpa, veniam dolor odio ad eius nisi, aspernatur quia veritatis blanditiis repellat id minima deserunt beatae?",-1)])),_:1})]),_:1})])]),_:1})],64)}const Ln=_t(Bn,[["render",Fn]]),Hn=Object.freeze(Object.defineProperty({__proto__:null,default:Ln},Symbol.toStringTag,{value:"Module"})),Kn={class:"q-ma-md"},Yn={key:0},Wn={__name:"Autocomplete1",setup(u){const n=V(null),d=V([]);let o=null;const s=(i,v)=>{if(i.length<2){v(()=>{d.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Qe.get(`/web-api/customers?q=${i}`).then(c=>{const m=c.data.data.map(f=>({label:`${f.code} - ${f.name}`,value:f.id,data:f}));v(()=>{d.value=m})}).catch(c=>{console.error("Gagal mengambil data pelanggan:",c),v(()=>{d.value=[]})})})};return(i,v)=>{const c=W("guest-layout");return p(),O(c,null,{default:l(()=>[t("div",Kn,[e(de,{class:"full-width",modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=m=>n.value=m),"use-input":"",label:"Cari Pelanggan",options:d.value,onFilter:s,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),n.value?(p(),w("div",Yn," Saldo: Rp. "+r(a(K)(n.value.data.wallet_balance)),1)):y("",!0)])]),_:1})}}},Qn=Object.freeze(Object.defineProperty({__proto__:null,default:Wn},Symbol.toStringTag,{value:"Module"})),Jn={style:{"margin-left":"-10px"}},da={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(u,{emit:n}){const d=u,o=n;return(s,i)=>(p(),w("div",Jn,[e(la,{class:"full-width q-pl-none","model-value":d.modelValue,disable:d.disable,label:d.label,"onUpdate:modelValue":i[0]||(i[0]=v=>o("update:modelValue",v))},null,8,["model-value","disable","label"])]))}};function ya(u){return u instanceof File||u instanceof Blob||u instanceof FileList&&u.length>0||u instanceof FormData&&Array.from(u.values()).some(n=>ya(n))||typeof u=="object"&&u!==null&&Object.values(u).some(n=>ya(n))}function Gn(u,n=null){const d=ze(u,n);let o=v=>v,s=null;const i={transform:v=>c=>(o=c,v),submit:v=>(c,m,f={})=>{d.wasSuccessful=!1,d.recentlySuccessful=!1,d.clearErrors(),clearTimeout(s),f.onBefore&&f.onBefore(),d.processing=!0,f.onStart&&f.onStart();const b=o(d.data());axios[c](m,b,{headers:{"Content-Type":ya(b)?"multipart/form-data":"application/json"},onUploadProgress:k=>{d.progress=k,f.onProgress&&f.onProgress(k)}}).then(k=>{d.processing=!1,d.progress=null,d.clearErrors(),d.wasSuccessful=!0,d.recentlySuccessful=!0,s=setTimeout(()=>d.recentlySuccessful=!1,2e3),f.onSuccess&&f.onSuccess(k.data),d.defaults(Ao(d.data())),d.isDirty=!1}).catch(k=>{var g;d.processing=!1,d.progress=null,d.clearErrors(),((g=k.response)==null?void 0:g.status)===422&&Object.keys(k.response.data.errors).forEach($=>{d.setError($,k.response.data.errors[$][0])}),f.onError&&f.onError(k)}).finally(()=>{d.processing=!1,d.progress=null,f.onFinish&&f.onFinish()})}};return new Proxy(d,{get:(v,c,m)=>Object.keys(i).indexOf(c)<0?v[c]:i[c](m)})}const Xn={class:"column"},Zn={class:"row"},es={class:"flex justify-center"},ts={__name:"Login",setup(u){let n=Gn({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const d=()=>Ze({form:n,url:route("admin.auth.login"),onSuccess:()=>{n.processing=!0,window.location.href=route("admin.dashboard")}}),o=V(!1);return(s,i)=>{const v=W("i-head"),c=W("guest-layout");return p(),w(Y,null,[e(v,{title:"Login"}),e(c,null,{default:l(()=>[e(Ve,{class:"row justify-center items-center"},{default:l(()=>[t("div",Xn,[t("div",Zn,[e(Fe,{class:"q-gutter-md",onSubmit:J(d,["prevent"])},{default:l(()=>[e(ce,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:l(()=>[e(ae,{class:"text-center"},{default:l(()=>[t("div",es,[e(Lt,{size:"80px"},{default:l(()=>[e(S,{name:"badge",color:"primary"})]),_:1})]),i[4]||(i[4]=t("h6",{class:"q-my-sm text-primary"},"Login Staff",-1))]),_:1}),e(ae,null,{default:l(()=>[e(oe,{modelValue:a(n).username,"onUpdate:modelValue":i[0]||(i[0]=m=>a(n).username=m),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!a(n).errors.username,autocomplete:"username","error-message":a(n).errors.username,disable:a(n).processing,rules:[m=>m&&m.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:l(()=>[e(S,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(oe,{modelValue:a(n).password,"onUpdate:modelValue":i[2]||(i[2]=m=>a(n).password=m),type:o.value?"text":"password",label:"Kata Sandi",error:!!a(n).errors.password,autocomplete:"current-password","error-message":a(n).errors.password,"lazy-rules":"",disable:a(n).processing,rules:[m=>m&&m.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:l(()=>[e(A,{dense:"",flat:"",round:"",onClick:i[1]||(i[1]=m=>o.value=!o.value)},{default:l(()=>[e(S,{name:o.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(da,{class:"q-mt-sm",modelValue:a(n).remember,"onUpdate:modelValue":i[3]||(i[3]=m=>a(n).remember=m),disable:a(n).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(mt,null,{default:l(()=>[e(A,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:a(n).processing,loading:a(n).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},as=Object.freeze(Object.defineProperty({__proto__:null,default:ts},Symbol.toStringTag,{value:"Module"})),ls={class:"q-gutter-sm"},os={class:"col col-md-6 q-pa-xs"},ns={class:"detail q-mt-md"},ss={key:0},rs={class:"text-bold"},ja="Tutup Sesi Kasir",is={__name:"Close",setup(u){const n=fe(),d=ze({closing_notes:n.props.data.closing_notes,closing_balance:parseFloat(n.props.data.closing_balance)}),o=()=>Ze({form:d,url:route("admin.cashier-session.close",{id:n.props.data.id})});return(s,i)=>{const v=W("i-head"),c=W("authenticated-layout");return p(),w(Y,null,[e(v,{title:ja}),e(c,null,{title:l(()=>[_(r(ja))]),"left-button":l(()=>[t("div",ls,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=m=>s.$inertia.get(s.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",os,[e(Fe,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":i[1]||(i[1]=m=>a(d).id=m)},null,512),[[dt,a(d).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[t("table",ns,[t("tbody",null,[t("tr",null,[i[4]||(i[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),i[5]||(i[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.id),1)]),t("tr",null,[i[6]||(i[6]=t("td",null,"Terminal",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.cashier_terminal.name),1)]),t("tr",null,[i[8]||(i[8]=t("td",null,"Kasir",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.user.username)+" - "+r(a(n).props.data.user.name),1)]),t("tr",null,[i[10]||(i[10]=t("td",null,"Saldo Awal",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.opening_balance)),1)]),a(n).props.data.opening_notes?(p(),w("tr",ss,[i[12]||(i[12]=t("td",null,"Catatan Buka",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.opening_notes),1)])):y("",!0),t("tr",null,[i[14]||(i[14]=t("td",null,"Total Penjualan",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_sales)),1)]),t("tr",null,[i[16]||(i[16]=t("td",null,"Total Pemasukan",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_income)),1)]),t("tr",null,[i[18]||(i[18]=t("td",null,"Total Pengeluaran",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_expense)),1)]),t("tr",null,[i[21]||(i[21]=t("td",null,"Saldo Akhir",-1)),i[22]||(i[22]=t("td",null,":",-1)),t("td",null,[t("div",rs,r(a(it)(a(n).props.data.closing_balance)),1),i[20]||(i[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(oe,{modelValue:a(d).closing_notes,"onUpdate:modelValue":i[2]||(i[2]=m=>a(d).closing_notes=m),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(d).processing,error:!!a(d).errors.closing_notes,"error-message":a(d).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:a(d).processing},null,8,["disable"]),e(A,{label:"Batal",icon:"cancel",disable:a(d).processing,onClick:i[3]||(i[3]=m=>a(Z).get(s.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ds=Object.freeze(Object.defineProperty({__proto__:null,default:is},Symbol.toStringTag,{value:"Module"}));let us=0;const ms=["click","keydown"],cs={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${us++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ps(u,n,d,o){const s=jo(Cl,pa);if(s===pa)return console.error("QTab/QRouteTab component needs to be child of QTabs"),pa;const{proxy:i}=Tt(),v=V(null),c=V(null),m=V(null),f=G(()=>u.disable===!0||u.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},u.ripple===!0?{}:u.ripple)),b=G(()=>s.currentModel.value===u.name),k=G(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(b.value===!0?" q-tab--active"+(s.tabProps.value.activeClass?" "+s.tabProps.value.activeClass:"")+(s.tabProps.value.activeColor?` text-${s.tabProps.value.activeColor}`:"")+(s.tabProps.value.activeBgColor?` bg-${s.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(u.icon&&u.label&&s.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(u.noCaps===!0||s.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(u.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),g=G(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(s.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(u.contentClass!==void 0?` ${u.contentClass}`:"")),$=G(()=>u.disable===!0||s.hasFocus.value===!0||b.value===!1&&s.hasActiveTab.value===!0?-1:u.tabindex||0);function U(I,z){if(z!==!0&&v.value!==null&&v.value.focus(),u.disable!==!0){s.updateModel({name:u.name}),d("click",I);return}}function h(I){Eo(I,[13,32])?U(I,!0):Mo(I)!==!0&&I.keyCode>=35&&I.keyCode<=40&&I.altKey!==!0&&I.metaKey!==!0&&s.onKbdNavigate(I.keyCode,i.$el)===!0&&Ut(I),d("keydown",I)}function D(){const I=s.tabProps.value.narrowIndicator,z=[],P=ke("div",{ref:m,class:["q-tab__indicator",s.tabProps.value.indicatorClass]});u.icon!==void 0&&z.push(ke(S,{class:"q-tab__icon",name:u.icon})),u.label!==void 0&&z.push(ke("div",{class:"q-tab__label"},u.label)),u.alert!==!1&&z.push(u.alertIcon!==void 0?ke(S,{class:"q-tab__alert-icon",color:u.alert!==!0?u.alert:void 0,name:u.alertIcon}):ke("div",{class:"q-tab__alert"+(u.alert!==!0?` text-${u.alert}`:"")})),I===!0&&z.push(P);const j=[ke("div",{class:"q-focus-helper",tabindex:-1,ref:v}),ke("div",{class:g.value},Tl(n.default,z))];return I===!1&&j.push(P),j}const C={name:G(()=>u.name),rootRef:c,tabIndicatorRef:m,routeData:o};oa(()=>{s.unregisterTab(C)}),he(()=>{s.registerTab(C)});function x(I,z){const P={ref:c,class:k.value,tabindex:$.value,role:"tab","aria-selected":b.value===!0?"true":"false","aria-disabled":u.disable===!0?"true":void 0,onClick:U,onKeydown:h,...z};return ee(ke(I,P,D()),[[se,f.value]])}return{renderTab:x,$tabs:s}}const lt=$t({name:"QTab",props:cs,emits:ms,setup(u,{slots:n,emit:d}){const{renderTab:o}=ps(u,n,d);return()=>o("div")}});function fs(u,n,d){const o=d===!0?["left","right"]:["top","bottom"];return`absolute-${n===!0?o[0]:o[1]}${u?` text-${u}`:""}`}const gs=["left","center","right","justify"],Ot=$t({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:u=>gs.includes(u)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(u,{slots:n,emit:d}){const{proxy:o}=Tt(),{$q:s}=o,{registerTick:i}=fa(),{registerTick:v}=fa(),{registerTick:c}=fa(),{registerTimeout:m,removeTimeout:f}=_a(),{registerTimeout:b,removeTimeout:k}=_a(),g=V(null),$=V(null),U=V(u.modelValue),h=V(!1),D=V(!0),C=V(!1),x=V(!1),I=[],z=V(0),P=V(!1);let j=null,E=null,B;const N=G(()=>({activeClass:u.activeClass,activeColor:u.activeColor,activeBgColor:u.activeBgColor,indicatorClass:fs(u.indicatorColor,u.switchIndicator,u.vertical),narrowIndicator:u.narrowIndicator,inlineLabel:u.inlineLabel,noCaps:u.noCaps})),q=G(()=>{const ie=z.value,ye=U.value;for(let Se=0;Se<ie;Se++)if(I[Se].name.value===ye)return!0;return!1}),Q=G(()=>`q-tabs__content--align-${h.value===!0?"left":x.value===!0?"justify":u.align}`),te=G(()=>`q-tabs row no-wrap items-center q-tabs--${h.value===!0?"":"not-"}scrollable q-tabs--${u.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${u.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${u.mobileArrows===!0?"":"out"}-arrows`+(u.dense===!0?" q-tabs--dense":"")+(u.shrink===!0?" col-shrink":"")+(u.stretch===!0?" self-stretch":"")),T=G(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Q.value+(u.contentClass!==void 0?` ${u.contentClass}`:"")),R=G(()=>u.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),X=G(()=>u.vertical!==!0&&s.lang.rtl===!0),ge=G(()=>No===!1&&X.value===!0);Ee(X,yt),Ee(()=>u.modelValue,ie=>{ne({name:ie,setCurrent:!0,skipEmit:!0})}),Ee(()=>u.outsideArrows,Te);function ne({name:ie,setCurrent:ye,skipEmit:Se}){U.value!==ie&&(Se!==!0&&u["onUpdate:modelValue"]!==void 0&&d("update:modelValue",ie),(ye===!0||u["onUpdate:modelValue"]===void 0)&&(ft(U.value,ie),U.value=ie))}function Te(){i(()=>{Ne({width:g.value.offsetWidth,height:g.value.offsetHeight})})}function Ne(ie){if(R.value===void 0||$.value===null)return;const ye=ie[R.value.container],Se=Math.min($.value[R.value.scroll],Array.prototype.reduce.call($.value.children,(We,De)=>We+(De[R.value.content]||0),0)),Ye=ye>0&&Se>ye;h.value=Ye,Ye===!0&&v(yt),x.value=ye<parseInt(u.breakpoint,10)}function ft(ie,ye){const Se=ie!=null&&ie!==""?I.find(We=>We.name.value===ie):null,Ye=ye!=null&&ye!==""?I.find(We=>We.name.value===ye):null;if(Gt===!0)Gt=!1;else if(Se&&Ye){const We=Se.tabIndicatorRef.value,De=Ye.tabIndicatorRef.value;j!==null&&(clearTimeout(j),j=null),We.style.transition="none",We.style.transform="none",De.style.transition="none",De.style.transform="none";const Oe=We.getBoundingClientRect(),rt=De.getBoundingClientRect();De.style.transform=u.vertical===!0?`translate3d(0,${Oe.top-rt.top}px,0) scale3d(1,${rt.height?Oe.height/rt.height:1},1)`:`translate3d(${Oe.left-rt.left}px,0,0) scale3d(${rt.width?Oe.width/rt.width:1},1,1)`,c(()=>{j=setTimeout(()=>{j=null,De.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",De.style.transform="none"},70)})}Ye&&h.value===!0&&pt(Ye.rootRef.value)}function pt(ie){const{left:ye,width:Se,top:Ye,height:We}=$.value.getBoundingClientRect(),De=ie.getBoundingClientRect();let Oe=u.vertical===!0?De.top-Ye:De.left-ye;if(Oe<0){$.value[u.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Oe),yt();return}Oe+=u.vertical===!0?De.height-We:De.width-Se,Oe>0&&($.value[u.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Oe),yt())}function yt(){const ie=$.value;if(ie===null)return;const ye=ie.getBoundingClientRect(),Se=u.vertical===!0?ie.scrollTop:Math.abs(ie.scrollLeft);X.value===!0?(D.value=Math.ceil(Se+ye.width)<ie.scrollWidth-1,C.value=Se>0):(D.value=Se>0,C.value=u.vertical===!0?Math.ceil(Se+ye.height)<ie.scrollHeight:Math.ceil(Se+ye.width)<ie.scrollWidth)}function be(ie){E!==null&&clearInterval(E),E=setInterval(()=>{He(ie)===!0&&me()},5)}function F(){be(ge.value===!0?Number.MAX_SAFE_INTEGER:0)}function H(){be(ge.value===!0?0:Number.MAX_SAFE_INTEGER)}function me(){E!==null&&(clearInterval(E),E=null)}function re(ie,ye){const Se=Array.prototype.filter.call($.value.children,rt=>rt===ye||rt.matches&&rt.matches(".q-tab.q-focusable")===!0),Ye=Se.length;if(Ye===0)return;if(ie===36)return pt(Se[0]),Se[0].focus(),!0;if(ie===35)return pt(Se[Ye-1]),Se[Ye-1].focus(),!0;const We=ie===(u.vertical===!0?38:37),De=ie===(u.vertical===!0?40:39),Oe=We===!0?-1:De===!0?1:void 0;if(Oe!==void 0){const rt=X.value===!0?-1:1,ht=Se.indexOf(ye)+Oe*rt;return ht>=0&&ht<Ye&&(pt(Se[ht]),Se[ht].focus({preventScroll:!0})),!0}}const pe=G(()=>ge.value===!0?{get:ie=>Math.abs(ie.scrollLeft),set:(ie,ye)=>{ie.scrollLeft=-ye}}:u.vertical===!0?{get:ie=>ie.scrollTop,set:(ie,ye)=>{ie.scrollTop=ye}}:{get:ie=>ie.scrollLeft,set:(ie,ye)=>{ie.scrollLeft=ye}});function He(ie){const ye=$.value,{get:Se,set:Ye}=pe.value;let We=!1,De=Se(ye);const Oe=ie<De?-1:1;return De+=Oe*5,De<0?(We=!0,De=0):(Oe===-1&&De<=ie||Oe===1&&De>=ie)&&(We=!0,De=ie),Ye(ye,De),yt(),We}function nt(ie,ye){for(const Se in ie)if(ie[Se]!==ye[Se])return!1;return!0}function kt(){let ie=null,ye={matchedLen:0,queryDiff:9999,hrefLen:0};const Se=I.filter(Oe=>Oe.routeData!==void 0&&Oe.routeData.hasRouterLink.value===!0),{hash:Ye,query:We}=o.$route,De=Object.keys(We).length;for(const Oe of Se){const rt=Oe.routeData.exact.value===!0;if(Oe.routeData[rt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:ht,query:ma,matched:Do,href:Uo}=Oe.routeData.resolvedLink.value,ca=Object.keys(ma).length;if(rt===!0){if(ht!==Ye||ca!==De||nt(We,ma)===!1)continue;ie=Oe.name.value;break}if(ht!==""&&ht!==Ye||ca!==0&&nt(ma,We)===!1)continue;const xt={matchedLen:Do.length,queryDiff:De-ca,hrefLen:Uo.length-ht.length};if(xt.matchedLen>ye.matchedLen){ie=Oe.name.value,ye=xt;continue}else if(xt.matchedLen!==ye.matchedLen)continue;if(xt.queryDiff<ye.queryDiff)ie=Oe.name.value,ye=xt;else if(xt.queryDiff!==ye.queryDiff)continue;xt.hrefLen>ye.hrefLen&&(ie=Oe.name.value,ye=xt)}if(ie===null&&I.some(Oe=>Oe.routeData===void 0&&Oe.name.value===U.value)===!0){Gt=!1;return}ne({name:ie,setCurrent:!0})}function ua(ie){if(f(),P.value!==!0&&g.value!==null&&ie.target&&typeof ie.target.closest=="function"){const ye=ie.target.closest(".q-tab");ye&&g.value.contains(ye)===!0&&(P.value=!0,h.value===!0&&pt(ye))}}function Oo(){m(()=>{P.value=!1},30)}function Ft(){qa.avoidRouteWatcher===!1?b(kt):k()}function Va(){if(B===void 0){const ie=Ee(()=>o.$route.fullPath,Ft);B=()=>{ie(),B=void 0}}}function Ro(ie){I.push(ie),z.value++,Te(),ie.routeData===void 0||o.$route===void 0?b(()=>{if(h.value===!0){const ye=U.value,Se=ye!=null&&ye!==""?I.find(Ye=>Ye.name.value===ye):null;Se&&pt(Se.rootRef.value)}}):(Va(),ie.routeData.hasRouterLink.value===!0&&Ft())}function Io(ie){I.splice(I.indexOf(ie),1),z.value--,Te(),B!==void 0&&ie.routeData!==void 0&&(I.every(ye=>ye.routeData===void 0)===!0&&B(),Ft())}const qa={currentModel:U,tabProps:N,hasFocus:P,hasActiveTab:q,registerTab:Ro,unregisterTab:Io,verifyRouteModel:Ft,updateModel:ne,onKbdNavigate:re,avoidRouteWatcher:!1};Lo(Cl,qa);function Ca(){j!==null&&clearTimeout(j),me(),B!==void 0&&B()}let Ta,Gt;return oa(Ca),Bo(()=>{Ta=B!==void 0,Ca()}),zo(()=>{Ta===!0&&(Va(),Gt=!0,Ft()),Te()}),()=>ke("div",{ref:g,class:te.value,role:"tablist",onFocusin:ua,onFocusout:Oo},[ke(Fo,{onResize:Ne}),ke("div",{ref:$,class:T.value,onScroll:yt},Ct(n.default)),ke(S,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(D.value===!0?"":" q-tabs__arrow--faded"),name:u.leftIcon||s.iconSet.tabs[u.vertical===!0?"up":"left"],onMousedownPassive:F,onTouchstartPassive:F,onMouseupPassive:me,onMouseleavePassive:me,onTouchendPassive:me}),ke(S,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(C.value===!0?"":" q-tabs__arrow--faded"),name:u.rightIcon||s.iconSet.tabs[u.vertical===!0?"down":"right"],onMousedownPassive:H,onTouchstartPassive:H,onMouseupPassive:me,onMouseleavePassive:me,onTouchendPassive:me})])}});function bs(u){const n=[.06,6,50];return typeof u=="string"&&u.length&&u.split(":").forEach((d,o)=>{const s=parseFloat(d);s&&(n[o]=s)}),n}const vs=Ho({name:"touch-swipe",beforeMount(u,{value:n,arg:d,modifiers:o}){if(o.mouse!==!0&&Mt.has.touch!==!0)return;const s=o.mouseCapture===!0?"Capture":"",i={handler:n,sensitivity:bs(d),direction:Pa(o),noop:Ko,mouseStart(v){Ra(v,i)&&Wo(v)&&(Xt(i,"temp",[[document,"mousemove","move",`notPassive${s}`],[document,"mouseup","end","notPassiveCapture"]]),i.start(v,!0))},touchStart(v){if(Ra(v,i)){const c=v.target;Xt(i,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","notPassiveCapture"],[c,"touchend","end","notPassiveCapture"]]),i.start(v)}},start(v,c){Mt.is.firefox===!0&&ba(u,!0);const m=Oa(v);i.event={x:m.left,y:m.top,time:Date.now(),mouse:c===!0,dir:!1}},move(v){if(i.event===void 0)return;if(i.event.dir!==!1){Ut(v);return}const c=Date.now()-i.event.time;if(c===0)return;const m=Oa(v),f=m.left-i.event.x,b=Math.abs(f),k=m.top-i.event.y,g=Math.abs(k);if(i.event.mouse!==!0){if(b<i.sensitivity[1]&&g<i.sensitivity[1]){i.end(v);return}}else if(window.getSelection().toString()!==""){i.end(v);return}else if(b<i.sensitivity[2]&&g<i.sensitivity[2])return;const $=b/c,U=g/c;i.direction.vertical===!0&&b<g&&b<100&&U>i.sensitivity[0]&&(i.event.dir=k<0?"up":"down"),i.direction.horizontal===!0&&b>g&&g<100&&$>i.sensitivity[0]&&(i.event.dir=f<0?"left":"right"),i.direction.up===!0&&b<g&&k<0&&b<100&&U>i.sensitivity[0]&&(i.event.dir="up"),i.direction.down===!0&&b<g&&k>0&&b<100&&U>i.sensitivity[0]&&(i.event.dir="down"),i.direction.left===!0&&b>g&&f<0&&g<100&&$>i.sensitivity[0]&&(i.event.dir="left"),i.direction.right===!0&&b>g&&f>0&&g<100&&$>i.sensitivity[0]&&(i.event.dir="right"),i.event.dir!==!1?(Ut(v),i.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Yo(),i.styleCleanup=h=>{i.styleCleanup=void 0,document.body.classList.remove("non-selectable");const D=()=>{document.body.classList.remove("no-pointer-events--children")};h===!0?setTimeout(D,50):D()}),i.handler({evt:v,touch:i.event.mouse!==!0,mouse:i.event.mouse,direction:i.event.dir,duration:c,distance:{x:b,y:g}})):i.end(v)},end(v){i.event!==void 0&&(ga(i,"temp"),Mt.is.firefox===!0&&ba(u,!1),i.styleCleanup!==void 0&&i.styleCleanup(!0),v!==void 0&&i.event.dir!==!1&&Ut(v),i.event=void 0)}};if(u.__qtouchswipe=i,o.mouse===!0){const v=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";Xt(i,"main",[[u,"mousedown","mouseStart",`passive${v}`]])}Mt.has.touch===!0&&Xt(i,"main",[[u,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[u,"touchmove","noop","notPassiveCapture"]])},updated(u,n){const d=u.__qtouchswipe;d!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&d.end(),d.handler=n.value),d.direction=Pa(n.modifiers))},beforeUnmount(u){const n=u.__qtouchswipe;n!==void 0&&(ga(n,"main"),ga(n,"temp"),Mt.is.firefox===!0&&ba(u,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete u.__qtouchswipe)}}),_s={name:{required:!0},disable:Boolean},Ea={setup(u,{slots:n}){return()=>ke("div",{class:"q-panel scroll",role:"tabpanel"},Ct(n.default))}},ys={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},ks=["update:modelValue","beforeTransition","transition"];function ws(){const{props:u,emit:n,proxy:d}=Tt(),{getCache:o}=Jo(),{registerTimeout:s}=_a();let i,v;const c=V(null),m=V(null);function f(R){const X=u.vertical===!0?"up":"left";B((d.$q.lang.rtl===!0?-1:1)*(R.direction===X?1:-1))}const b=G(()=>[[vs,f,void 0,{horizontal:u.vertical!==!0,vertical:u.vertical,mouse:!0}]]),k=G(()=>u.transitionPrev||`slide-${u.vertical===!0?"down":"right"}`),g=G(()=>u.transitionNext||`slide-${u.vertical===!0?"up":"left"}`),$=G(()=>`--q-transition-duration: ${u.transitionDuration}ms`),U=G(()=>typeof u.modelValue=="string"||typeof u.modelValue=="number"?u.modelValue:String(u.modelValue)),h=G(()=>({include:u.keepAliveInclude,exclude:u.keepAliveExclude,max:u.keepAliveMax})),D=G(()=>u.keepAliveInclude!==void 0||u.keepAliveExclude!==void 0);Ee(()=>u.modelValue,(R,X)=>{const ge=z(R)===!0?P(R):-1;v!==!0&&E(ge===-1?0:ge<P(X)?-1:1),c.value!==ge&&(c.value=ge,n("beforeTransition",R,X),s(()=>{n("transition",R,X)},u.transitionDuration))});function C(){B(1)}function x(){B(-1)}function I(R){n("update:modelValue",R)}function z(R){return R!=null&&R!==""}function P(R){return i.findIndex(X=>X.props.name===R&&X.props.disable!==""&&X.props.disable!==!0)}function j(){return i.filter(R=>R.props.disable!==""&&R.props.disable!==!0)}function E(R){const X=R!==0&&u.animated===!0&&c.value!==-1?"q-transition--"+(R===-1?k.value:g.value):null;m.value!==X&&(m.value=X)}function B(R,X=c.value){let ge=X+R;for(;ge!==-1&&ge<i.length;){const ne=i[ge];if(ne!==void 0&&ne.props.disable!==""&&ne.props.disable!==!0){E(R),v=!0,n("update:modelValue",ne.props.name),setTimeout(()=>{v=!1});return}ge+=R}u.infinite===!0&&i.length!==0&&X!==-1&&X!==i.length&&B(R,R===-1?i.length:-1)}function N(){const R=P(u.modelValue);return c.value!==R&&(c.value=R),!0}function q(){const R=z(u.modelValue)===!0&&N()&&i[c.value];return u.keepAlive===!0?[ke(Go,h.value,[ke(D.value===!0?o(U.value,()=>({...Ea,name:U.value})):Ea,{key:U.value,style:$.value},()=>R)])]:[ke("div",{class:"q-panel scroll",style:$.value,key:U.value,role:"tabpanel"},[R])]}function Q(){if(i.length!==0)return u.animated===!0?[ke(Pl,{name:m.value},q)]:q()}function te(R){return i=Qo(Ct(R.default,[])).filter(X=>X.props!==null&&X.props.slot===void 0&&z(X.props.name)===!0),i.length}function T(){return i}return Object.assign(d,{next:C,previous:x,goTo:I}),{panelIndex:c,panelDirectives:b,updatePanelsList:te,updatePanelIndex:N,getPanelContent:Q,getEnabledPanels:j,getPanels:T,isValidPanelName:z,keepAliveProps:h,needsUniqueKeepAliveWrapper:D,goToPanelByOffset:B,goToPanel:I,nextPanel:C,previousPanel:x}}const ot=$t({name:"QTabPanel",props:_s,setup(u,{slots:n}){return()=>ke("div",{class:"q-tab-panel",role:"tabpanel"},Ct(n.default))}}),Rt=$t({name:"QTabPanels",props:{...ys,...ka},emits:ks,setup(u,{slots:n}){const d=Tt(),o=wa(u,d.proxy.$q),{updatePanelsList:s,getPanelContent:i,panelDirectives:v}=ws(),c=G(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(s(n),Xo("div",{class:c.value},i(),"pan",u.swipeable,()=>v.value))}}),hs={class:"detail"},$s={key:0},xs={key:1},Ss={key:0},Vs={key:0},qs={colspan:"100%"},Cs={class:"q-my-md"},Ts={key:4},Ps={colspan:"100%"},Os={key:5},Rs={colspan:"100%"},Ml={__name:"MainInfoTab",setup(u){const n=fe();return(d,o)=>(p(),w("table",hs,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.user.username)+" - "+r(a(n).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.opening_balance)),1)]),a(n).props.data.opening_notes?(p(),w("tr",$s,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.opening_notes),1)])):y("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.total_expense)),1)]),a(n).props.data.is_closed?y("",!0):(p(),w("tr",xs,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.opening_balance+(a(n).props.data.total_income-a(n).props.data.total_expense))),1)])),a(n).props.data.is_closed?(p(),w(Y,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.closing_balance)),1)]),a(n).props.data.closing_notes?(p(),w("tr",Ss,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.closing_notes),1)])):y("",!0)],64)):y("",!0),d.$can("admin.cashier-session.close")?(p(),w(Y,{key:3},[a(n).props.data.is_closed?y("",!0):(p(),w("tr",Vs,[t("td",qs,[t("div",Cs,[e(A,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=s=>d.$inertia.get(d.route("admin.cashier-session.close",{id:a(n).props.data.id})))},{default:l(()=>o[26]||(o[26]=[_(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):y("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(n).props.data.created_at?(p(),w("tr",Ts,[t("td",Ps," Dibuat "+r(a(Vt)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name)+" ("+r(a(ve)(a(n).props.data.created_at))+") ",1)])):y("",!0),a(n).props.data.updated_at?(p(),w("tr",Os,[t("td",Rs," Diperbarui "+r(a(Vt)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name)+" ("+r(a(ve)(a(n).props.data.updated_at))+") ",1)])):y("",!0)])]))}},Is=Object.freeze(Object.defineProperty({__proto__:null,default:Ml},Symbol.toStringTag,{value:"Module"})),Ds={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Us={class:"text-bold"},As={key:0},js={class:"text-bold"},Es={key:1},Ms={key:0},Ns={key:0},Bs={key:1},Nl={__name:"SalesOrderTab",props:{data:Object},setup(u){const n=u,d=V([]),o=V(!0),s=Pe({...Re(),cashier_session_id:n.data.id,status:["closed","canceled"]}),i=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{c()});const c=(b=null)=>Ie({pagination:i,filter:s,props:b,rows:d,url:route("admin.sales-order.data"),loading:o}),m=$e(),f=G(()=>m.screen.gt.sm?v:v.filter(b=>b.name==="id"));return(b,k)=>(p(),O(Ce,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:i.value,"onUpdate:pagination":k[0]||(k[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:f.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:c,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:$,filter:U})=>[t("div",Ds,[t("span",null,r($)+" "+r(U?" with term "+U:""),1)])]),body:l(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:J($=>a(Z).get(b.route("admin.sales-order.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(L,{key:"id",props:g},{default:l(()=>[t("div",Us,[e(S,{class:"inline-icon",name:"tag"}),_(" "+r(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),_(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),w(Y,{key:0},[g.row.customer?(p(),w("div",As,[e(S,{class:"inline-icon",name:"person"}),_(" "+r(g.row.customer_code)+" "+r(g.row.customer.name),1)])):y("",!0),t("div",js,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+r(a(K)(g.row.grand_total)),1)]),g.row.notes?(p(),w("div",Es,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):y("",!0)],64)):y("",!0),t("div",null,[e(ut,{color:g.row.status==="closed"?"green":"red"},{default:l(()=>[_(r(b.$CONSTANTS.SALES_ORDER_STATUSES[g.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(L,{key:"customer",props:g},{default:l(()=>[g.row.customer?(p(),w("div",Ms,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+r(g.row.customer_code)+" - "+r(g.row.customer_name),1)]),g.row.customer_phone?(p(),w("div",Ns,[e(S,{name:"phone",class:"inline-icon"}),_(" "+r(g.row.customer_phone),1)])):y("",!0),g.row.customer_address?(p(),w("div",Bs,[e(S,{name:"home_pin",class:"inline-icon"}),_(" "+r(g.row.customer_address),1)])):y("",!0)])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"grand_total",props:g},{default:l(()=>[t("div",null,r(a(K)(g.row.grand_total)),1)]),_:2},1032,["props"]),e(L,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},zs=Object.freeze(Object.defineProperty({__proto__:null,default:Nl},Symbol.toStringTag,{value:"Module"})),Fs={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ls={class:"text-bold"},Hs={class:"text-bold"},Ks={key:0},Ys={class:"q-mt-sm"},Bl={__name:"FinanceTransactionTab",props:{data:Object},setup(u){const n=u;console.log(n.data);const d=V([]),o=V(!0),s=Pe({...Re(),user_id:n.data.user_id,from_datetime:ea(n.data.opened_at),to_datetime:n.data.closed_at?ea(n.data.closed_at):null}),i=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{c()});const c=(b=null)=>Ie({pagination:i,filter:s,props:b,rows:d,url:route("admin.finance-transaction.data"),loading:o}),m=$e(),f=G(()=>m.screen.gt.sm?v:v.filter(b=>b.name==="id"));return(b,k)=>(p(),O(Ce,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:i.value,"onUpdate:pagination":k[0]||(k[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:f.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:c,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:$,filter:U})=>[t("div",Fs,[t("span",null,r($)+" "+r(U?" with term "+U:""),1)])]),body:l(g=>[e(qe,{props:g},{default:l(()=>[e(L,{key:"id",props:g},{default:l(()=>[t("div",Ls,[e(S,{class:"inline-icon",name:"tag"}),_(" "+r(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),_(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),w(Y,{key:0},[t("div",Hs,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+r(a(K)(g.row.amount)),1)]),g.row.notes?(p(),w("div",Ks,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):y("",!0)],64)):y("",!0),t("div",Ys,[e(ut,{color:g.row.amount>=0?"green":"red"},{default:l(()=>[_(r(b.$CONSTANTS.FINANCE_TRANSACTION_TYPES[g.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(L,{key:"amount",props:g},{default:l(()=>[t("span",{class:xe(g.row.amount<0?"text-red":"text-green")},r(a(K)(g.row.amount)),3)]),_:2},1032,["props"]),e(L,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ws=Object.freeze(Object.defineProperty({__proto__:null,default:Bl},Symbol.toStringTag,{value:"Module"})),Qs={class:"q-gutter-sm"},Js={class:"col col-lg-6 q-pa-xs"},Gs={class:"row"},Ma="Rincian Sesi Kasir",Xs={__name:"Detail",setup(u){const n=fe(),d=G(()=>n.props.data),o=V("main");return Ee(()=>n.props.tab,s=>{s&&(o.value=s)},{immediate:!0}),(s,i)=>{const v=W("i-head"),c=W("authenticated-layout");return p(),w(Y,null,[e(v,{title:Ma}),e(c,null,{title:l(()=>[_(r(Ma))]),"left-button":l(()=>[t("div",Qs,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=m=>s.$inertia.get(s.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Js,[t("div",Gs,[e(ce,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:l(()=>[e(Ot,{modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=m=>o.value=m),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(lt,{name:"main",label:"Ringkasan"}),e(lt,{name:"sales",label:"Transaksi Penjualan"}),e(lt,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Je),e(Rt,{modelValue:o.value,"onUpdate:modelValue":i[2]||(i[2]=m=>o.value=m),animated:"",class:"q-pa-none"},{default:l(()=>[e(ot,{name:"main"},{default:l(()=>[e(Ml,{data:d.value},null,8,["data"])]),_:1}),e(ot,{name:"sales",class:"q-pa-xs"},{default:l(()=>[e(Nl,{data:d.value},null,8,["data"])]),_:1}),e(ot,{name:"finance",class:"q-pa-xs"},{default:l(()=>[e(Bl,{data:d.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Zs=Object.freeze(Object.defineProperty({__proto__:null,default:Xs},Symbol.toStringTag,{value:"Module"})),er={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},tr={class:"q-pa-xs"},ar={class:"full-width row flex-center text-grey-8 q-gutter-sm"},lr={class:"flex justify-end"},Na="Sesi Kasir",or={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=Pe({search:"",status:"all",...Re()}),f=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),b=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],k=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];he(()=>{$()});const g=C=>at({message:`Hapus Sesi: ${C.cashier_terminal.name} - ${C.user.username}?`,url:route("admin.cashier-session.delete",C.id),fetchItemsCallback:$,loading:s}),$=(C=null)=>{Ie({pagination:f,filter:m,props:C,rows:o,url:route("admin.cashier-session.data"),loading:s,tableRef:i})},U=()=>$(),h=C=>Z.get(route("admin.cashier-session.detail",{id:C.id})),D=G(()=>n.screen.gt.sm?b:b.filter(C=>C.name==="id"||C.name==="action"));return(C,x)=>{const I=W("i-head"),z=W("authenticated-layout");return p(),w(Y,null,[e(I,{title:Na}),e(z,null,Le({title:l(()=>[_(r(Na))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=P=>d.value=!d.value)},null,8,["icon"]),C.$can("admin.cashier-session.open")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=P=>a(Z).get(C.route("admin.cashier-session.open")))})):y("",!0)]),default:l(()=>[t("div",tr,[e(Ce,{class:"full-height-table",style:je({height:a(c)}),ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:f.value,"onUpdate:pagination":x[5]||(x[5]=P=>f.value=P),filter:m.search,loading:s.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:P,message:j,filter:E})=>[t("div",ar,[t("span",null,r(j)+" "+r(E?" with term "+E:""),1)])]),body:l(P=>[e(qe,{props:P,class:xe(["cursor-pointer",P.row.is_closed?"":"bg-yellow-3"]),onClick:j=>h(P.row)},{default:l(()=>[e(L,{key:"id",props:P,class:"wrap-column"},{default:l(()=>[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),_(" SessionID: "+r(P.row.id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"point_of_sale"}),_(" "+r(P.row.cashier_terminal.name),1)]),t("div",null,[e(S,{class:"inline-icon",name:"person"}),_(" "+r(P.row.user.username)+" - "+r(P.row.user.name),1)])]),_:2},1032,["props"]),e(L,{key:"opening_info",props:P},{default:l(()=>[t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+r(P.row.opened_at?a(ve)(P.row.opened_at):"-"),1)]),t("div",null,[e(S,{class:"inline-icon",name:"money"}),_(" "+r(a(it)(P.row.opening_balance)),1)]),P.row.opening_notes?(p(),O(we,{key:0,text:P.row.opening_notes,icon:"notes"},null,8,["text"])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"closing_info",props:P},{default:l(()=>[t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+r(P.row.closed_at?a(ve)(P.row.closed_at):"-"),1)]),t("div",null,[e(S,{class:"inline-icon",name:"money"}),_(" "+r(a(it)(P.row.closing_balance)),1)]),P.row.closing_notes?(p(),O(we,{key:0,text:P.row.closing_notes,icon:"notes"},null,8,["text"])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"action",props:P},{default:l(()=>[t("div",lr,[C.$can("admin.cashier-session.close")||C.$can("admin.cashier-session.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[4]||(x[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.cashier-session.close")?ee((p(),O(le,{key:0,disable:P.row.is_closed,clickable:"",onClick:J(j=>a(Z).get(C.route("admin.cashier-session.close",P.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"logout"})]),_:1}),e(M,null,{default:l(()=>x[6]||(x[6]=[_("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[se],[ue]]):y("",!0),C.$can("admin.cashier-session.delete")?ee((p(),O(le,{key:1,onClick:J(j=>g(P.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>x[7]||(x[7]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",er,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[x[2]||(x[2]=P=>m.status=P),U],options:k,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":x[3]||(x[3]=P=>m.search=P),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},nr=Object.freeze(Object.defineProperty({__proto__:null,default:or},Symbol.toStringTag,{value:"Module"})),sr={class:"q-gutter-sm"},rr={class:"col col-md-6 q-pa-xs"},Ba="Buka Sesi Kasir",ir={__name:"Open",setup(u){const n=fe(),d=ze({cashier_terminal_id:n.props.data.cashier_terminal_id,opening_balance:parseFloat(n.props.data.opening_balance),opening_notes:n.props.data.opening_notes}),o=[...n.props.cashier_terminals.map(i=>({value:i.id,label:i.name,balance:parseFloat(i.finance_account.balance)}))],s=()=>Ze({form:d,url:route("admin.cashier-session.open")});return Ee(()=>d.cashier_terminal_id,i=>{if(i){const v=o.find(c=>c.value===i);v&&(d.opening_balance=v.balance)}else d.opening_balance=0}),(i,v)=>{const c=W("i-head"),m=W("authenticated-layout");return p(),w(Y,null,[e(c,{title:Ba}),e(m,null,{title:l(()=>[_(r(Ba))]),"left-button":l(()=>[t("div",sr,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=f=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",rr,[e(Fe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=f=>a(d).id=f)},null,512),[[dt,a(d).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(de,{class:"custom-select",modelValue:a(d).cashier_terminal_id,"onUpdate:modelValue":v[2]||(v[2]=f=>a(d).cashier_terminal_id=f),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:a(d).errors.cashier_terminal_id,error:!!a(d).errors.cashier_terminal_id,disable:a(d).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Ue,{modelValue:a(d).opening_balance,"onUpdate:modelValue":v[3]||(v[3]=f=>a(d).opening_balance=f),label:"Saldo Buka Sesi",lazyRules:"",disable:a(d).processing,error:!!a(d).errors.opening_balance,errorMessage:a(d).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),v[6]||(v[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(oe,{modelValue:a(d).opening_notes,"onUpdate:modelValue":v[4]||(v[4]=f=>a(d).opening_notes=f),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(d).processing,error:!!a(d).errors.opening_notes,"error-message":a(d).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:a(d).processing},null,8,["disable"]),e(A,{label:"Batal",icon:"cancel",disable:a(d).processing,onClick:v[5]||(v[5]=f=>a(Z).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},dr=Object.freeze(Object.defineProperty({__proto__:null,default:ir},Symbol.toStringTag,{value:"Module"})),ur={class:"detail"},mr={colspan:"3"},cr={class:"text-bold text-grey-8"},pr={key:0},fr={colspan:"100%"},gr={key:1},br={colspan:"100%"},zl={__name:"MainInfoTab",setup(u){const n=fe();return(d,o)=>(p(),w("table",ur,[t("tbody",null,[t("tr",null,[t("td",mr,[t("div",cr,[o[1]||(o[1]=_(" Info Terminal Kasir ")),e(A,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=s=>d.$inertia.get(d.route("admin.cashier-terminal.edit",{id:a(n).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(it)(a(n).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(n).props.data.created_at?(p(),w("tr",pr,[t("td",fr," Dibuat "+r(a(Vt)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name)+" ("+r(a(ve)(a(n).props.data.created_at))+") ",1)])):y("",!0),a(n).props.data.updated_at?(p(),w("tr",gr,[t("td",br," Diperbarui "+r(a(Vt)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name)+" ("+r(a(ve)(a(n).props.data.updated_at))+") ",1)])):y("",!0)])]))}},vr=Object.freeze(Object.defineProperty({__proto__:null,default:zl},Symbol.toStringTag,{value:"Module"})),_r={class:"full-width row flex-center text-grey-8 q-gutter-sm"},yr={class:"text-bold"},Fl={__name:"SessionHistoryTab",setup(u){const n=fe(),d=V([]),o=V(!0),s=Pe({customer_id:n.props.data.id,...Re()}),i=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{c()});const c=(b=null)=>Ie({pagination:i,filter:s,props:b,rows:d,url:route("admin.customer-wallet-transaction.data"),loading:o}),m=$e(),f=G(()=>m.screen.gt.sm?v:v.filter(b=>b.name==="id"));return(b,k)=>(p(),O(Ce,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:i.value,"onUpdate:pagination":k[0]||(k[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:f.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:c,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:$,filter:U})=>[t("div",_r,[t("span",null,r($)+" "+r(U?" with term "+U:""),1)])]),body:l(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:J($=>a(Z).get(b.route("admin.customer-wallet-transaction.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(L,{key:"id",props:g},{default:l(()=>[t("div",yr,[e(S,{class:"inline-icon",name:"tag"}),_(" "+r(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),w(Y,{key:0},[t("div",{class:xe(["text-bold",g.row.amount<0?"text-red":"text-green"])},[e(S,{name:"money",class:"inline-icon"}),_(" "+r(a(Ol)(g.row.amount)),1)],2),t("div",null,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):y("",!0),t("div",null,[e(ut,{size:"xs",color:g.row.amount>0?"green":"red"},{default:l(()=>[e(S,{name:"category"}),_(" "+r(g.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(L,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"amount",props:g},{default:l(()=>[t("div",{class:xe(g.row.amount<0?"text-red-10":g.row.amount>0?"text-green-10":"")},r(a(na)(g.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},kr=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"})),wr={class:"q-gutter-sm"},hr={class:"col col-lg-6 q-pa-xs"},$r={class:"row"},za="Rincian Terminal Kasir",xr={__name:"Detail",setup(u){const n=V("main");return(d,o)=>{const s=W("i-head"),i=W("authenticated-layout");return p(),w(Y,null,[e(s,{title:za}),e(i,null,{title:l(()=>[_(r(za))]),"left-button":l(()=>[t("div",wr,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",hr,[t("div",$r,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ot,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=v=>n.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(lt,{name:"main",label:"Info Utama"}),e(lt,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=v=>n.value=v),animated:""},{default:l(()=>[e(ot,{name:"main"},{default:l(()=>[e(zl)]),_:1}),e(ot,{name:"session-history",class:"q-pa-xs"},{default:l(()=>[e(Fl)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Sr=Object.freeze(Object.defineProperty({__proto__:null,default:xr},Symbol.toStringTag,{value:"Module"})),Vr={class:"q-gutter-sm"},qr={class:"col col-md-6 q-pa-xs"},Cr={key:0,class:"q-my-xs text-grey-8"},Tr={__name:"Editor",setup(u){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Pelanggan",o=ze({id:n.props.data.id,name:n.props.data.name,finance_account_id:n.props.data.finance_account_id??"new",location:n.props.data.location,active:!!n.props.data.active,notes:n.props.data.notes}),s=[{value:"new",label:"Buat Baru (Otomatis)"},...n.props.finance_accounts.map(v=>({value:v.id,label:v.name}))],i=()=>Ze({form:o,url:route("admin.cashier-terminal.save")});return(v,c)=>{const m=W("i-head"),f=W("authenticated-layout");return p(),w(Y,null,[e(m,{title:d}),e(f,null,{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",Vr,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=b=>v.$inertia.get(v.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",qr,[e(Fe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=b=>a(o).id=b)},null,512),[[dt,a(o).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(oe,{modelValue:a(o).name,"onUpdate:modelValue":c[2]||(c[2]=b=>a(o).name=b),modelModifiers:{trim:!0},label:"Nama",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[b=>b&&b.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{class:"custom-select",modelValue:a(o).finance_account_id,"onUpdate:modelValue":c[3]||(c[3]=b=>a(o).finance_account_id=b),label:"Akun Kas",options:s,"map-options":"","emit-value":"",errorMessage:a(o).errors.finance_account_id,error:!!a(o).errors.finance_account_id,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),a(o).finance_account_id==="new"?(p(),w("div",Cr,[c[8]||(c[8]=_(" Akun keuangan akan dibuat ")),a(o).name?(p(),w(Y,{key:0},[_(" dengan nama Kas "+r(a(o).name),1)],64)):y("",!0)])):y("",!0),e(oe,{modelValue:a(o).location,"onUpdate:modelValue":c[4]||(c[4]=b=>a(o).location=b),modelModifiers:{trim:!0},label:"Lokasi",error:!!a(o).errors.location,disable:a(o).processing,"error-message":a(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).notes,"onUpdate:modelValue":c[5]||(c[5]=b=>a(o).notes=b),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(da,{modelValue:a(o).active,"onUpdate:modelValue":c[6]||(c[6]=b=>a(o).active=b),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(A,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:c[7]||(c[7]=b=>a(Z).get(v.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Pr=Object.freeze(Object.defineProperty({__proto__:null,default:Tr},Symbol.toStringTag,{value:"Module"})),Or={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Rr={class:"q-pa-xs"},Ir={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Dr={class:"flex justify-end"},Fa="Terminal Kasir",Ur={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=Pe({search:"",status:"active",...Re()}),f=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),b=[{name:"name",label:n.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],k=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{$()});const g=C=>at({message:`Hapus Terminal Kasir ${C.name}?`,url:route("admin.cashier-terminal.delete",C.id),fetchItemsCallback:$,loading:s}),$=(C=null)=>{Ie({pagination:f,filter:m,props:C,rows:o,url:route("admin.cashier-terminal.data"),loading:s,tableRef:i})},U=()=>$(),h=C=>Z.get(route("admin.cashier-terminal.detail",{id:C.id})),D=G(()=>n.screen.gt.sm?b:b.filter(C=>C.name==="name"||C.name==="finance_account_id"||C.name==="action"));return(C,x)=>{const I=W("i-head"),z=W("authenticated-layout");return p(),w(Y,null,[e(I,{title:Fa}),e(z,null,Le({title:l(()=>[_(r(Fa))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=P=>d.value=!d.value)},null,8,["icon"]),C.$can("admin.cashier-terminal.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=P=>a(Z).get(C.route("admin.cashier-terminal.add")))})):y("",!0)]),default:l(()=>[t("div",Rr,[e(Ce,{class:"full-height-table",style:je({height:a(c)}),ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:f.value,"onUpdate:pagination":x[5]||(x[5]=P=>f.value=P),filter:m.search,loading:s.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:P,message:j,filter:E})=>[t("div",Ir,[t("span",null,r(j)+" "+r(E?" with term "+E:""),1)])]),body:l(P=>[e(qe,{props:P,class:xe([P.row.active?"":"bg-red-1","cursor-pointer"]),onClick:j=>h(P.row)},{default:l(()=>[e(L,{key:"name",props:P,class:"wrap-column"},{default:l(()=>[t("div",null,[e(S,{name:"wallet"}),_(" "+r(P.row.name),1)]),t("div",null,[e(S,{name:"home_pin"}),_(" "+r(P.row.location),1)]),a(n).screen.lt.md?(p(),O(we,{key:0,text:P.row.notes,icon:"notes"},null,8,["text"])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"finance_account_id",props:P},{default:l(()=>[t("div",null,[e(S,{name:"wallet"}),_(" "+r(P.row.finance_account.name),1)]),t("div",null,[e(S,{name:"money"}),_(" "+r(a(it)(P.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(L,{key:"notes",props:P},{default:l(()=>[e(we,{text:P.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"action",props:P},{default:l(()=>[t("div",Dr,[C.$can("admin.cashier-terminal.edit")||C.$can("admin.cashier-terminal.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[4]||(x[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.cashier-terminal.edit")?ee((p(),O(le,{key:0,clickable:"",onClick:J(j=>a(Z).get(C.route("admin.cashier-terminal.edit",P.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>x[6]||(x[6]=[_("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),C.$can("admin.cashier-terminal.delete")?ee((p(),O(le,{key:1,onClick:J(j=>g(P.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>x[7]||(x[7]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Or,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[x[2]||(x[2]=P=>m.status=P),U],options:k,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":x[3]||(x[3]=P=>m.search=P),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ar=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"})),jr={class:"q-gutter-sm"},Er={class:"col col-md-6 q-pa-xs"},Mr={class:"row"},Nr={class:"detail"},Br={key:0},zr={key:1},Fr={key:0},Lr={key:1},Hr={colspan:"3",class:"bg-white"},La="Rincian Konfirmasi Top Up",Kr={__name:"Detail",setup(u){const n=fe();return(d,o)=>{const s=W("i-head"),i=W("i-link"),v=W("my-link"),c=W("authenticated-layout");return p(),w(Y,null,[e(s,{title:La}),e(c,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",jr,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=m=>d.$inertia.get(d.route("admin.customer-wallet-transaction-confirmation.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(La))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Er,[t("div",Mr,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[23]||(o[23]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",Nr,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Pelanggan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+r(a(n).props.data.customer.code),1)]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+r(a(n).props.data.customer.name),1)]),a(n).props.data.customer.phone?(p(),w("div",Br,[e(S,{name:"phone",class:"inline-icon"}),_(" "+r(a(n).props.data.customer.phone),1)])):y("",!0),a(n).props.data.customer.address?(p(),w("div",zr,[e(S,{name:"home_pin",class:"inline-icon"}),_(" "+r(a(n).props.data.customer.address),1)])):y("",!0),t("div",null,[e(i,{href:d.route("admin.customer.detail",{id:a(n).props.data.customer_id})},{default:l(()=>o[5]||(o[5]=[_("Lihat Rincian Pelanggan")])),_:1},8,["href"])])])]),t("tr",null,[o[10]||(o[10]=t("td",null,"Akun Tujuan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,[e(v,{href:d.route("admin.finance-account.detail",{id:a(n).props.data.finance_account.id})},{default:l(()=>[_(r(a(n).props.data.finance_account.name),1)]),_:1},8,["href"]),o[9]||(o[9]=t("br",null,null,-1)),a(n).props.data.finance_account.type==="bank"?(p(),w(Y,{key:0},[_(" Rek "+r(a(n).props.data.finance_account.bank)+" an "+r(a(n).props.data.finance_account.holder)+" ",1),o[8]||(o[8]=t("br",null,null,-1)),_(" "+r(a(n).props.data.finance_account.number),1)],64)):y("",!0)])]),t("tr",null,[o[12]||(o[12]=t("td",null,"Jumlah",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(n).props.data.amount)),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Status",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[a(n).props.data.status]),1)]),t("tr",null,[o[16]||(o[16]=t("td",null,"Catatan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(p(),w("tr",Fr,[o[18]||(o[18]=t("td",null,"Dibuat",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):y("",!0),a(n).props.data.updater?(p(),w("tr",Lr,[o[20]||(o[20]=t("td",null,"Diperbarui",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):y("",!0),a(n).props.data.image_path?(p(),w(Y,{key:2},[o[22]||(o[22]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Hr,[e(Yt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:je([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):y("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Yr=Object.freeze(Object.defineProperty({__proto__:null,default:Kr},Symbol.toStringTag,{value:"Module"})),Wr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Qr={class:"q-pa-xs"},Jr={class:"flex justify-end no-wrap"},Ha="Konfirmasi Top Up Wallet",Gr={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=V(null),f=V(!1),b=Wt(),k=Qt(),g=[{label:"Semua Tahun",value:"all"},...At(b-2,b).reverse()],$=[{value:"all",label:"Semua Bulan"},...jt()],U=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],h=Pe({search:"",year:b,month:k,status:"all",...Re()}),D=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!1}),C=[{name:"datetime",label:"Tanggal",field:"datetime",align:"left",sortable:!0},{name:"finance_account_id",label:"Bank Tujuan",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",label:"Aksi",field:"action",align:"center"}];he(()=>{x()});const x=(N=null)=>{Ie({pagination:D,filter:h,props:N,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:s,tableRef:i})},I=()=>{x()},z=G(()=>n.screen.gt.sm?C:C.filter(N=>["datetime","action"].includes(N.name)));Ee(()=>h.year,N=>{N===null&&(h.month=null)});const P=N=>Da({message:`Setujui konfirmasi transaksi #${N.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",N.id),fetchItemsCallback:x,loading:s,data:{id:N.id,action:"accept"}}),j=N=>Da({message:`Tolak konfirmasi transaksi #${N.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",N.id),fetchItemsCallback:x,loading:s,data:{id:N.id,action:"reject"}}),E=N=>at({message:`Hapus konfirmasi transaksi ${N.formatted_id}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",N.id),fetchItemsCallback:x,loading:s}),B=N=>{m.value=N,f.value=!0};return(N,q)=>{const Q=W("i-head"),te=W("authenticated-layout");return p(),w(Y,null,[e(Q,{title:Ha}),e(te,null,Le({title:l(()=>[_(r(Ha))]),"right-button":l(()=>[e(A,{class:"q-ml-sm",icon:d.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:q[0]||(q[0]=T=>d.value=!d.value)},null,8,["icon"])]),default:l(()=>[t("div",Qr,[e(Ce,{ref_key:"tableRef",ref:i,class:"full-height-table",style:je({height:a(c)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":q[6]||(q[6]=T=>D.value=T),filter:h.search,loading:s.value,columns:z.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),body:l(T=>[e(qe,{props:T,class:"cursor-pointer",onClick:J(R=>a(Z).get(N.route("admin.customer-wallet-transaction-confirmation.detail",{id:T.row.id})),["stop"])},{default:l(()=>[e(L,{key:"datetime",props:T,class:"wrap-column"},{default:l(()=>[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),_(" "+r(T.row.formatted_id),1)]),t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+r(a(ve)(T.row.datetime)),1)]),a(n).screen.gt.sm?y("",!0):(p(),w(Y,{key:0},[e(we,{icon:"account_balance",text:T.row.finance_account.name},null,8,["text"]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+r(T.row.customer.code)+" - "+r(T.row.customer.name),1)]),t("div",null,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+r(a(K)(T.row.amount)),1)]),T.row.notes?(p(),O(we,{key:0,icon:"notes",text:T.row.notes},null,8,["text"])):y("",!0),t("div",null,[e(Ia,{status:T.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(L,{key:"finance_account_id",props:T},{default:l(()=>[_(r(T.row.finance_account.name),1),q[8]||(q[8]=t("br",null,null,-1)),_(" "+r(T.row.finance_account.bank)+" "+r(T.row.finance_account.number)+" an. "+r(T.row.finance_account.holder),1)]),_:2},1032,["props"]),e(L,{key:"amount",props:T,style:{"text-align":"right"}},{default:l(()=>[_(r(a(K)(T.row.amount)),1)]),_:2},1032,["props"]),e(L,{key:"status",props:T,class:"text-center"},{default:l(()=>[e(Ia,{status:T.row.status},null,8,["status"])]),_:2},1032,["props"]),e(L,{key:"notes",props:T,class:"word-wrap"},{default:l(()=>[e(we,{icon:"notes",text:T.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"action",props:T,class:"text-center"},{default:l(()=>[t("div",Jr,[e(A,{icon:"image",color:"primary",dense:"",flat:"",disable:T.row.image_path===null||T.row.image_path==="",onClick:J(R=>B(T.row.image_path),["stop"])},{default:l(()=>[T.row.image_path!=null?(p(),O(sa,{key:0},{default:l(()=>q[9]||(q[9]=[_(" Lihat Bukti ")])),_:1})):y("",!0)]),_:2},1032,["disable","onClick"]),N.$can("admin.customer-wallet-transaction-confirmation:accept")||N.$can("admin.customer-wallet-transaction-confirmation:deny")||N.$can("admin.customer-wallet-transaction-confirmation.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:q[5]||(q[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.customer-wallet-transaction-confirmation:accept")?ee((p(),O(le,{key:0,onClick:J(R=>P(T.row),["stop"]),clickable:"",disable:T.row.status!=="pending"},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"check"})]),_:1}),e(M,null,{default:l(()=>q[10]||(q[10]=[_("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[se],[ue]]):y("",!0),N.$can("admin.customer-wallet-transaction-confirmation:deny")?ee((p(),O(le,{key:1,onClick:J(R=>j(T.row),["stop"]),clickable:"",disable:T.row.status!=="pending"},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"cancel"})]),_:1}),e(M,null,{default:l(()=>q[11]||(q[11]=[_("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[se],[ue]]):y("",!0),e(Je),N.$can("admin.customer-wallet-transaction-confirmation.delete")?ee((p(),O(le,{key:2,onClick:J(R=>E(T.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>q[12]||(q[12]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(ra,{modelValue:f.value,"onUpdate:modelValue":q[7]||(q[7]=T=>f.value=T),imageUrl:`/${m.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Wr,[e(de,{modelValue:h.year,"onUpdate:modelValue":[q[1]||(q[1]=T=>h.year=T),I],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h.year!=="all"?(p(),O(de,{key:0,modelValue:h.month,"onUpdate:modelValue":[q[2]||(q[2]=T=>h.month=T),I],options:$,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:h.year===null},null,8,["modelValue","disable"])):y("",!0),e(de,{modelValue:h.status,"onUpdate:modelValue":[q[3]||(q[3]=T=>h.status=T),I],options:U,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:h.search,"onUpdate:modelValue":q[4]||(q[4]=T=>h.search=T),placeholder:"Cari...",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Xr=Object.freeze(Object.defineProperty({__proto__:null,default:Gr},Symbol.toStringTag,{value:"Module"}));function Ll(u,n=!1){const d=u.map(v=>({value:v.id,label:v.code+" - "+v.name})),o=n?[{value:"all",label:"Semua"},...d]:d,s=V([...o]);return{filteredCustomers:s,filterCustomersFn:(v,c)=>{c(()=>{s.value=o.filter(m=>m.label.toLowerCase().includes(v.toLowerCase()))})},customers:o}}const Zr={class:"col col-md-6 q-pa-xs"},Ka="Penyesuaian Saldo Dompet Pelanggan",ei={__name:"Adjustment",setup(u){const n=fe(),{filteredCustomers:d,filterCustomersFn:o}=Ll(n.props.customers,!1),s=ze({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),i=()=>s.amount=s.new_wallet_balance-s.old_wallet_balance;Ee(()=>s.customer_id,async m=>{if(!m){s.old_wallet_balance=0,s.new_wallet_balance=0,i();return}s.processing=!0;try{const f=await axios.get(route("admin.customer.wallet_balance",{id:m}));s.new_wallet_balance=s.old_wallet_balance=f.data.wallet_balance}catch(f){console.error("Gagal mengambil saldo:",f),s.old_wallet_balance=0,s.new_wallet_balance=0}s.processing=!1,i()});const v=G(()=>s.new_wallet_balance-s.old_wallet_balance),c=()=>Ze({form:s,url:route("admin.customer-wallet-transaction.adjustment")});return(m,f)=>{const b=W("i-head"),k=W("authenticated-layout");return p(),w(Y,null,[e(b,{title:Ka}),e(k,null,{title:l(()=>[_(r(Ka))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Zr,[e(Fe,{class:"row",onSubmit:J(c,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(de,{class:"custom-select",modelValue:a(s).customer_id,"onUpdate:modelValue":f[0]||(f[0]=g=>a(s).customer_id=g),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(d),"map-options":"","emit-value":"",errorMessage:a(s).errors.customer_id,onFilter:a(o),error:!!a(s).errors.customer_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(le,null,{default:l(()=>[e(M,null,{default:l(()=>f[6]||(f[6]=[_("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Ue,{modelValue:a(s).old_wallet_balance,"onUpdate:modelValue":f[1]||(f[1]=g=>a(s).old_wallet_balance=g),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.old_wallet_balance,errorMessage:a(s).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ue,{modelValue:a(s).new_wallet_balance,"onUpdate:modelValue":f[2]||(f[2]=g=>a(s).new_wallet_balance=g),label:"Saldo Seharusnya",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.new_wallet_balance,errorMessage:a(s).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ue,{modelValue:v.value,"onUpdate:modelValue":f[3]||(f[3]=g=>v.value=g),label:"Selisih",readonly:"",lazyRules:"",disable:a(s).processing},null,8,["modelValue","disable"]),e(oe,{modelValue:a(s).notes,"onUpdate:modelValue":f[4]||(f[4]=g=>a(s).notes=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.notes,"error-message":a(s).errors.notes,rules:[g=>g&&g.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:f[5]||(f[5]=g=>a(Z).get(m.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ti=Object.freeze(Object.defineProperty({__proto__:null,default:ei},Symbol.toStringTag,{value:"Module"})),ai={class:"q-gutter-sm"},li={class:"col col-md-6 q-pa-xs"},oi={class:"row"},ni={class:"detail"},si={key:0},ri={key:1},ii={key:0},di={key:1},ui={colspan:"3",class:"bg-white"},Ya="Rincian Transaksi",mi={__name:"Detail",setup(u){const n=fe();return(d,o)=>{const s=W("i-head"),i=W("i-link"),v=W("authenticated-layout");return p(),w(Y,null,[e(s,{title:Ya}),e(v,null,{"left-button":l(()=>[t("div",ai,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=c=>d.$goBack())})])]),title:l(()=>[_(r(Ya))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",li,[t("div",oi,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",ni,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Pelanggan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+r(a(n).props.data.customer.code),1)]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+r(a(n).props.data.customer.name),1)]),a(n).props.data.customer.phone?(p(),w("div",si,[e(S,{name:"phone",class:"inline-icon"}),_(" "+r(a(n).props.data.customer.phone),1)])):y("",!0),a(n).props.data.customer.address?(p(),w("div",ri,[e(S,{name:"home_pin",class:"inline-icon"}),_(" "+r(a(n).props.data.customer.address),1)])):y("",!0),t("div",null,[e(i,{href:d.route("admin.customer.detail",{id:a(n).props.data.customer_id})},{default:l(()=>o[5]||(o[5]=[_("Lihat Rincian Pelanggan")])),_:1},8,["href"])])])]),t("tr",null,[o[8]||(o[8]=t("td",null,"Jenis Transaksi",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[a(n).props.data.type]),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",{class:xe(a(n).props.data.amount>0?"text-positive":"text-negative")},r(a(Nt)(a(n).props.data.amount))+"Rp. "+r(a(K)(Math.abs(a(n).props.data.amount))),3)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(p(),w("tr",ii,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):y("",!0),a(n).props.data.updater?(p(),w("tr",di,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):y("",!0),a(n).props.data.image_path?(p(),w(Y,{key:2},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",ui,[e(Yt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:je([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):y("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},ci=Object.freeze(Object.defineProperty({__proto__:null,default:mi},Symbol.toStringTag,{value:"Module"})),pi={class:"q-gutter-sm"},fi={class:"col col-md-6 q-pa-xs"},gi={__name:"Editor",setup(u){var f;const n=fe(),d=(n.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:s}=Ll(n.props.customers,!1),i=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],v=n.props.finance_accounts.map(b=>({label:b.name,value:b.id})),c=ze({id:n.props.data.id,customer_id:n.props.data.customer_id,finance_account_id:n.props.data.finance_account_id,type:n.props.data.type,datetime:new Date(n.props.data.datetime),notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((f=n.props.data)==null?void 0:f.image_path)??"",image:null}),m=()=>{Jt(c,{datetime:"YYYY-MM-DD HH:mm:ss"}),Ze({form:c,url:route("admin.customer-wallet-transaction.save")})};return(b,k)=>{const g=W("i-head"),$=W("authenticated-layout");return p(),w(Y,null,[e(g,{title:d}),e($,null,{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",pi,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:k[0]||(k[0]=U=>b.$inertia.get(b.route("admin.customer-wallet-transaction.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",fi,[e(Fe,{class:"row",onSubmit:J(m,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":k[1]||(k[1]=U=>a(c).id=U)},null,512),[[dt,a(c).id]]),e(Bt,{autofocus:"",modelValue:a(c).datetime,"onUpdate:modelValue":k[2]||(k[2]=U=>a(c).datetime=U),label:"Tanggal",error:!!a(c).errors.datetime,disable:a(c).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(de,{class:"custom-select",modelValue:a(c).customer_id,"onUpdate:modelValue":k[3]||(k[3]=U=>a(c).customer_id=U),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"","emit-value":"",errorMessage:a(c).errors.customer_id,onFilter:a(s),error:!!a(c).errors.customer_id,disable:a(c).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(le,null,{default:l(()=>[e(M,null,{default:l(()=>k[10]||(k[10]=[_("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(de,{modelValue:a(c).type,"onUpdate:modelValue":k[4]||(k[4]=U=>a(c).type=U),label:"Jenis",options:i,"map-options":"","emit-value":"",error:!!a(c).errors.type,disable:a(c).processing,errorMessage:a(c).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{modelValue:a(c).finance_account_id,"onUpdate:modelValue":k[5]||(k[5]=U=>a(c).finance_account_id=U),label:a(c).type=="deposit"?"Kas Tujuan":"Kas Asal",options:a(v),"map-options":"","emit-value":"",error:!!a(c).errors.finance_account_id,disable:a(c).processing,errorMessage:a(c).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Ue,{modelValue:a(c).amount,"onUpdate:modelValue":k[6]||(k[6]=U=>a(c).amount=U),label:"Jumlah",lazyRules:"",disable:a(c).processing,error:!!a(c).errors.amount,errorMessage:a(c).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(c).notes,"onUpdate:modelValue":k[7]||(k[7]=U=>a(c).notes=U),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(c).processing,error:!!a(c).errors.notes,"error-message":a(c).errors.notes,rules:[U=>U&&U.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ha,{modelValue:a(c).image,"onUpdate:modelValue":k[8]||(k[8]=U=>a(c).image=U),"initial-image-path":a(c).image_path,disabled:a(c).processing,error:!!a(c).errors.image||!!a(c).errors.image_path,"error-message":a(c).errors.image||a(c).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(c).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(c).processing,onClick:k[9]||(k[9]=U=>a(Z).get(b.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},bi=Object.freeze(Object.defineProperty({__proto__:null,default:gi},Symbol.toStringTag,{value:"Module"})),vi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},_i={class:"q-pa-xs"},yi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ki={key:0},wi={class:"flex justify-end no-wrap"},Wa="Transaksi Dompet Pelanggan",hi={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=new Date().getFullYear(),f=new Date().getMonth()+1,b=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...At(m-2,m-1).reverse()],k=[{value:"all",label:"Semua Bulan"},...jt()],g=Pe({search:"",year:m,month:f,...Re()}),$=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),U=[{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"action",align:"right"}];he(()=>{D()});const h=j=>at({message:`Hapus transaksi #${j.formatted_id}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",j.id),fetchItemsCallback:D,loading:s}),D=(j=null)=>{Ie({pagination:$,filter:g,props:j,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:s,tableRef:i})},C=()=>{D()},x=G(()=>n.screen.gt.sm?U:U.filter(j=>j.name==="datetime"||j.name==="action"));Ee(()=>g.year,j=>{j===null&&(g.month=null)});const I=V(null),z=V(!1),P=j=>{I.value=j,z.value=!0};return(j,E)=>{const B=W("i-head"),N=W("authenticated-layout");return p(),w(Y,null,[e(B,{title:Wa}),e(N,null,Le({title:l(()=>[_(r(Wa))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:E[0]||(E[0]=q=>d.value=!d.value)},null,8,["icon"]),j.$can("admin.customer-wallet-transaction.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:E[1]||(E[1]=q=>a(Z).get(j.route("admin.customer-wallet-transaction.add")))})):y("",!0)]),default:l(()=>[t("div",_i,[e(Ce,{ref_key:"tableRef",ref:i,style:je({height:a(c)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:$.value,"onUpdate:pagination":E[6]||(E[6]=q=>$.value=q),filter:g.search,loading:s.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:D,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:q,message:Q,filter:te})=>[t("div",yi,[t("span",null,r(Q)+" "+r(te?" with term "+te:""),1)])]),body:l(q=>[e(qe,{props:q,class:"cursor-pointer",onClick:J(Q=>a(Z).get(j.route("admin.customer-wallet-transaction.detail",{id:q.row.id})),["stop"])},{default:l(()=>[e(L,{key:"datetime",props:q,class:"wrap-column"},{default:l(()=>[t("div",null,[e(S,{name:"tag",class:"inline-icon"}),_(" "+r(q.row.formatted_id),1)]),t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+r(a(ve)(q.row.datetime)),1)]),q.row.finance_account?(p(),w("div",ki,[e(S,{name:"wallet",class:"inline-icon"}),_(" "+r(q.row.finance_account?q.row.finance_account.name:"-"),1)])):y("",!0),a(n).screen.gt.sm?y("",!0):(p(),w(Y,{key:1},[e(we,{icon:"person",text:q.row.customer.code+" - "+q.row.customer.name},null,8,["text"]),t("div",{class:xe([q.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(S,{name:"money",class:"inline-icon"}),_(" "+r(a(Nt)(q.row.amount))+"Rp. "+r(a(K)(Math.abs(q.row.amount))),1)],2),e(we,{text:q.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(ut,null,{default:l(()=>[_(r(q.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(L,{key:"customer",props:q},{default:l(()=>[e(we,{text:q.row.customer.code+" - "+q.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"notes",props:q},{default:l(()=>[e(we,{text:q.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"amount",props:q,style:{"text-align":"right"}},{default:l(()=>[_(r(a(na)(q.row.amount)),1)]),_:2},1032,["props"]),e(L,{key:"action",props:q},{default:l(()=>[t("div",wi,[e(A,{icon:"image",color:"primary",dense:"",flat:"",disable:q.row.image_path===null||q.row.image_path==="",onClick:J(Q=>P(q.row.image_path),["stop"])},{default:l(()=>[q.row.image_path!=null?(p(),O(sa,{key:0},{default:l(()=>E[8]||(E[8]=[_(" Lihat Bukti ")])),_:1})):y("",!0)]),_:2},1032,["disable","onClick"]),j.$can("admin.customer-wallet-transaction.delete")?(p(),O(A,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:E[5]||(E[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[j.$can("admin.customer-wallet-transaction.delete")?ee((p(),O(le,{key:0,onClick:J(Q=>h(q.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>E[9]||(E[9]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ra,{modelValue:z.value,"onUpdate:modelValue":E[7]||(E[7]=q=>z.value=q),imageUrl:`/${I.value}`},null,8,["modelValue","imageUrl"])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",vi,[e(de,{modelValue:g.year,"onUpdate:modelValue":[E[2]||(E[2]=q=>g.year=q),C],options:b,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:g.month,"onUpdate:modelValue":[E[3]||(E[3]=q=>g.month=q),C],options:k,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:g.year===null},null,8,["modelValue","disable"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":E[4]||(E[4]=q=>g.search=q),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},$i=Object.freeze(Object.defineProperty({__proto__:null,default:hi},Symbol.toStringTag,{value:"Module"})),xi={class:"detail"},Si={colspan:"3"},Vi={class:"text-bold text-grey-8"},qi={key:0},Ci={key:1},Ti={class:"text-grey-8"},Pi={key:2},Oi={class:"text-grey-8"},Hl={__name:"MainInfoTab",setup(u){const n=fe();return(d,o)=>(p(),w("table",xi,[t("tbody",null,[t("tr",null,[t("td",Si,[t("div",Vi,[o[1]||(o[1]=_(" Info Pelanggan ")),d.$can("admin.customer.edit")?(p(),O(A,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=s=>d.$inertia.get(d.route("admin.customer.edit",{id:a(n).props.data.id})))})):y("",!0)])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Username",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.code),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Jenis",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.CUSTOMER_TYPES[a(n).props.data.type]),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Nama",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"No. Telepon",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.phone?a(n).props.data.phone:"-"),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Alamat",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.address?a(n).props.data.address:"-"),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Saldo Wallet",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(n).props.data.wallet_balance)),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Status",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[25]||(o[25]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),a(n).props.data.created_at?(p(),w("tr",qi,[o[16]||(o[16]=t("td",null,"Dibuat",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(Vt)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name)+" ("+r(a(ve)(a(n).props.data.created_at))+") ",1)])):y("",!0),a(n).props.data.updated_at?(p(),w("tr",Ci,[o[18]||(o[18]=t("td",null,"Diperbarui",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(Vt)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name)+" ("+r(a(ve)(a(n).props.data.updated_at))+") ",1)])):y("",!0),t("tr",null,[o[20]||(o[20]=t("td",null,"Terakhir login",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,[_(r(a(n).props.data.last_login_datetime?a(ve)(a(n).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",Ti,"("+r(a(Vt)(a(n).props.data.last_login_datetime))+")",1)])]),a(n).props.data.last_activity_datetime?(p(),w("tr",Pi,[o[23]||(o[23]=t("td",null,"Aktifitas Terakhir",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,[_(r(a(ve)(a(n).props.data.last_activity_datetime))+" ",1),t("span",Oi,[_("("+r(a(Vt)(a(n).props.data.last_activity_datetime))+")",1),o[22]||(o[22]=t("br",null,null,-1)),_(r(a(n).props.data.last_activity_description),1)])])])):y("",!0)])]))}},Ri=Object.freeze(Object.defineProperty({__proto__:null,default:Hl},Symbol.toStringTag,{value:"Module"})),Ii={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Di={class:"text-bold"},Kl={__name:"WalletHistoryTab",setup(u){const n=fe(),d=V([]),o=V(!0),s=Pe({customer_id:n.props.data.id,...Re()}),i=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{c()});const c=(b=null)=>Ie({pagination:i,filter:s,props:b,rows:d,url:route("admin.customer-wallet-transaction.data"),loading:o}),m=$e(),f=G(()=>m.screen.gt.sm?v:v.filter(b=>b.name==="id"));return(b,k)=>(p(),O(Ce,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:i.value,"onUpdate:pagination":k[0]||(k[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:f.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:c,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:$,filter:U})=>[t("div",Ii,[t("span",null,r($)+" "+r(U?" with term "+U:""),1)])]),body:l(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:J($=>a(Z).get(b.route("admin.customer-wallet-transaction.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(L,{key:"id",props:g},{default:l(()=>[t("div",Di,[e(S,{class:"inline-icon",name:"tag"}),_(" "+r(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),w(Y,{key:0},[t("div",{class:xe(["text-bold",g.row.amount<0?"text-red":"text-green"])},[e(S,{name:"money",class:"inline-icon"}),_(" "+r(a(Ol)(g.row.amount)),1)],2),t("div",null,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):y("",!0),t("div",null,[e(ut,{size:"xs",color:g.row.amount>0?"green":"red"},{default:l(()=>[e(S,{name:"category"}),_(" "+r(g.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(L,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"amount",props:g},{default:l(()=>[t("div",{class:xe(g.row.amount<0?"text-red-10":g.row.amount>0?"text-green-10":"")},r(a(na)(g.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ui=Object.freeze(Object.defineProperty({__proto__:null,default:Kl},Symbol.toStringTag,{value:"Module"})),Ai={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ji={class:"text-bold"},Ei={class:"text-bold"},Mi={key:0},Yl={__name:"OrderHistoryTab",setup(u){const n=fe(),d=V([]),o=V(!0),s=Pe({customer_id:n.props.data.id,...Re()}),i=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{c()});const c=(b=null)=>Ie({pagination:i,filter:s,props:b,rows:d,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:n.props.data.id}}),loading:o}),m=$e(),f=G(()=>m.screen.gt.sm?v:v.filter(b=>b.name==="id"));return(b,k)=>(p(),O(Ce,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:i.value,"onUpdate:pagination":k[0]||(k[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:f.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:c,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:$,filter:U})=>[t("div",Ai,[t("span",null,r($)+" "+r(U?" with term "+U:""),1)])]),body:l(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:J($=>a(Z).get(b.route("admin.sales-order.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(L,{key:"id",props:g},{default:l(()=>[t("div",ji,[e(S,{class:"inline-icon",name:"tag"}),_(" "+r(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),w(Y,{key:0},[t("div",Ei,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+r(a(K)(g.row.grand_total)),1)]),g.row.notes?(p(),w("div",Mi,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):y("",!0)],64)):y("",!0),t("div",null,[e(ut,{color:g.row.status=="closed"?"green":"red"},{default:l(()=>[_(r(b.$CONSTANTS.SALES_ORDER_STATUSES[g.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(L,{key:"grand_total",props:g},{default:l(()=>[t("div",null,r(a(K)(g.row.grand_total)),1)]),_:2},1032,["props"]),e(L,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ni=Object.freeze(Object.defineProperty({__proto__:null,default:Yl},Symbol.toStringTag,{value:"Module"})),Bi={class:"q-gutter-sm"},zi={class:"col col-lg-6 q-pa-xs"},Fi={class:"row"},Qa="Rincian Pelanggan",Li={__name:"Detail",setup(u){fe();const n=V("main");return $e(),(d,o)=>{const s=W("i-head"),i=W("authenticated-layout");return p(),w(Y,null,[e(s,{title:Qa}),e(i,null,{title:l(()=>[_(r(Qa))]),"left-button":l(()=>[t("div",Bi,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.customer.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",zi,[t("div",Fi,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ot,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=v=>n.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(lt,{name:"main",label:"Info Utama"}),e(lt,{name:"history",label:"Riwayat Wallet"}),e(lt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=v=>n.value=v),animated:""},{default:l(()=>[e(ot,{name:"main"},{default:l(()=>[e(Hl)]),_:1}),e(ot,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(Kl)]),_:1}),e(ot,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(Yl)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Hi=Object.freeze(Object.defineProperty({__proto__:null,default:Li},Symbol.toStringTag,{value:"Module"})),Ki={class:"q-gutter-sm"},Yi={class:"col col-md-6 q-pa-xs"},Wi={__name:"Editor",setup(u){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Pelanggan",o=ze({id:n.props.data.id,code:n.props.data.code,name:n.props.data.name,phone:n.props.data.phone,address:n.props.data.address,active:!!n.props.data.active,password:n.props.data.password,type:n.props.data.type}),s=tt(window.CONSTANTS.CUSTOMER_TYPES),i=()=>Ze({form:o,url:route("admin.customer."+(n.props.data.id?"edit":"add"),{id:o.id})});return(v,c)=>{const m=W("i-head"),f=W("authenticated-layout");return p(),w(Y,null,[e(m,{title:d}),e(f,null,{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",Ki,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=b=>v.$inertia.get(v.route("admin.customer.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Yi,[e(Fe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=b=>a(o).id=b)},null,512),[[dt,a(o).id]]),e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(oe,{modelValue:a(o).code,"onUpdate:modelValue":c[2]||(c[2]=b=>a(o).code=b),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[b=>b&&b.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).name,"onUpdate:modelValue":c[3]||(c[3]=b=>a(o).name=b),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[b=>b&&b.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{modelValue:a(o).type,"onUpdate:modelValue":c[4]||(c[4]=b=>a(o).type=b),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"","lazy-rules":"",disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(o).errors.type,"error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(oe,{modelValue:a(o).phone,"onUpdate:modelValue":c[5]||(c[5]=b=>a(o).phone=b),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:a(o).processing,error:!!a(o).errors.phone,"error-message":a(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).address,"onUpdate:modelValue":c[6]||(c[6]=b=>a(o).address=b),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{autocomplete:"","aria-autocomplete":"none",modelValue:a(o).password,"onUpdate:modelValue":c[7]||(c[7]=b=>a(o).password=b),type:"password",label:a(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:a(o).processing,error:!!a(o).errors.password,"error-message":a(o).errors.password,"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","label","disable","error","error-message"]),e(da,{modelValue:a(o).active,"onUpdate:modelValue":c[8]||(c[8]=b=>a(o).active=b),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(A,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:c[9]||(c[9]=b=>a(Z).get(v.route("admin.customer.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Qi=Object.freeze(Object.defineProperty({__proto__:null,default:Wi},Symbol.toStringTag,{value:"Module"}));function Et(u,n,d,o){const s=[];return u.forEach(i=>{o(i)===!0?s.push(i):n.push({failedPropValidation:d,file:i})}),s}function Zt(u){u&&u.dataTransfer&&(u.dataTransfer.dropEffect="copy"),Ut(u)}const Ji={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Gi=["rejected"];function Xi({editable:u,dnd:n,getFileInput:d,addFilesToQueue:o}){const{props:s,emit:i,proxy:v}=Tt(),c=V(null),m=G(()=>s.accept!==void 0?s.accept.split(",").map(x=>(x=x.trim(),x==="*"?"*/":(x.endsWith("/*")&&(x=x.slice(0,x.length-1)),x.toUpperCase()))):null),f=G(()=>parseInt(s.maxFiles,10)),b=G(()=>parseInt(s.maxTotalSize,10));function k(x){if(u.value)if(x!==Object(x)&&(x={target:null}),x.target!==null&&x.target.matches('input[type="file"]')===!0)x.clientX===0&&x.clientY===0&&Zo(x);else{const I=d();I&&I!==x.target&&I.click(x)}}function g(x){u.value&&x&&o(null,x)}function $(x,I,z,P){let j=Array.from(I||x.target.files);const E=[],B=()=>{E.length!==0&&i("rejected",E)};if(s.accept!==void 0&&m.value.indexOf("*/")===-1&&(j=Et(j,E,"accept",N=>m.value.some(q=>N.type.toUpperCase().startsWith(q)||N.name.toUpperCase().endsWith(q))),j.length===0))return B();if(s.maxFileSize!==void 0){const N=parseInt(s.maxFileSize,10);if(j=Et(j,E,"max-file-size",q=>q.size<=N),j.length===0)return B()}if(s.multiple!==!0&&j.length!==0&&(j=[j[0]]),j.forEach(N=>{N.__key=N.webkitRelativePath+N.lastModified+N.name+N.size}),P===!0){const N=z.map(q=>q.__key);j=Et(j,E,"duplicate",q=>N.includes(q.__key)===!1)}if(j.length===0)return B();if(s.maxTotalSize!==void 0){let N=P===!0?z.reduce((q,Q)=>q+Q.size,0):0;if(j=Et(j,E,"max-total-size",q=>(N+=q.size,N<=b.value)),j.length===0)return B()}if(typeof s.filter=="function"){const N=s.filter(j);j=Et(j,E,"filter",q=>N.includes(q))}if(s.maxFiles!==void 0){let N=P===!0?z.length:0;if(j=Et(j,E,"max-files",()=>(N++,N<=f.value)),j.length===0)return B()}if(B(),j.length!==0)return j}function U(x){Zt(x),n.value!==!0&&(n.value=!0)}function h(x){Ut(x),(x.relatedTarget!==null||Mt.is.safari!==!0?x.relatedTarget!==c.value:document.elementsFromPoint(x.clientX,x.clientY).includes(c.value)===!1)===!0&&(n.value=!1)}function D(x){Zt(x);const I=x.dataTransfer.files;I.length!==0&&o(null,I),n.value=!1}function C(x){if(n.value===!0)return ke("div",{ref:c,class:`q-${x}__dnd absolute-full`,onDragenter:Zt,onDragover:Zt,onDragleave:h,onDrop:D})}return Object.assign(v,{pickFiles:k,addFiles:g}),{pickFiles:k,addFiles:g,onDragover:U,onDragleave:h,processFiles:$,getDndNode:C,maxFilesNumber:f,maxTotalSizeNumber:b}}const Wl=$t({name:"QFile",inheritAttrs:!1,props:{...tn,...Rl,...Ji,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...en,...Gi],setup(u,{slots:n,emit:d,attrs:o}){const{proxy:s}=Tt(),i=an(),v=V(null),c=V(!1),m=ln(u),{pickFiles:f,onDragover:b,onDragleave:k,processFiles:g,getDndNode:$}=Xi({editable:i.editable,dnd:c,getFileInput:te,addFilesToQueue:T}),U=on(u),h=G(()=>Object(u.modelValue)===u.modelValue?"length"in u.modelValue?Array.from(u.modelValue):[u.modelValue]:[]),D=G(()=>Ua(h.value)),C=G(()=>h.value.map(ne=>ne.name).join(", ")),x=G(()=>nn(h.value.reduce((ne,Te)=>ne+Te.size,0))),I=G(()=>({totalSize:x.value,filesNumber:h.value.length,maxFiles:u.maxFiles})),z=G(()=>({tabindex:-1,type:"file",title:"",accept:u.accept,capture:u.capture,name:m.value,...o,id:i.targetUid.value,disabled:i.editable.value!==!0})),P=G(()=>"q-file q-field--auto-height"+(c.value===!0?" q-file--dnd":"")),j=G(()=>u.multiple===!0&&u.append===!0);function E(ne){const Te=h.value.slice();Te.splice(ne,1),N(Te)}function B(ne){const Te=h.value.indexOf(ne);Te!==-1&&E(Te)}function N(ne){d("update:modelValue",u.multiple===!0?ne:ne[0])}function q(ne){ne.keyCode===13&&dn(ne)}function Q(ne){(ne.keyCode===13||ne.keyCode===32)&&f(ne)}function te(){return v.value}function T(ne,Te){const Ne=g(ne,Te,h.value,j.value),ft=te();ft!=null&&(ft.value=""),Ne!==void 0&&((u.multiple===!0?u.modelValue&&Ne.every(pt=>h.value.includes(pt)):u.modelValue===Ne[0])||N(j.value===!0?h.value.concat(Ne):Ne))}function R(){return[ke("input",{class:[u.inputClass,"q-file__filler"],style:u.inputStyle})]}function X(){if(n.file!==void 0)return h.value.length===0?R():h.value.map((Te,Ne)=>n.file({index:Ne,file:Te,ref:this}));if(n.selected!==void 0)return h.value.length===0?R():n.selected({files:h.value,ref:this});if(u.useChips===!0)return h.value.length===0?R():h.value.map((Te,Ne)=>ke(Il,{key:"file-"+Ne,removable:i.editable.value,dense:!0,textColor:u.color,tabindex:u.tabindex,onRemove:()=>{E(Ne)}},()=>ke("span",{class:"ellipsis",textContent:Te.name})));const ne=u.displayValue!==void 0?u.displayValue:C.value;return ne.length!==0?[ke("div",{class:u.inputClass,style:u.inputStyle,textContent:ne})]:R()}function ge(){const ne={ref:v,...z.value,...U.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:T};return u.multiple===!0&&(ne.multiple=!0),ke("input",ne)}return Object.assign(i,{fieldClass:P,emitValue:N,hasValue:D,inputRef:v,innerValue:h,floatingLabel:G(()=>D.value===!0||Ua(u.displayValue)),computedCounter:G(()=>{if(u.counterLabel!==void 0)return u.counterLabel(I.value);const ne=u.maxFiles;return`${h.value.length}${ne!==void 0?" / "+ne:""} (${x.value})`}),getControlChild:()=>$("file"),getControl:()=>{const ne={ref:i.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:u.tabindex};return i.editable.value===!0&&Object.assign(ne,{onDragover:b,onDragleave:k,onKeydown:q,onKeyup:Q}),ke("div",ne,[ge()].concat(X()))}}),Object.assign(s,{removeAtIndex:E,removeFile:B,getNativeElement:()=>v.value}),sn(s,"nativeEl",()=>v.value),rn(i)}}),Kt=$t({name:"QBanner",props:{...ka,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(u,{slots:n}){const{proxy:{$q:d}}=Tt(),o=wa(u,d),s=G(()=>"q-banner row items-center"+(u.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(u.rounded===!0?" rounded-borders":"")),i=G(()=>`q-banner__actions row items-center justify-end col-${u.inlineActions===!0?"auto":"all"}`);return()=>{const v=[ke("div",{class:"q-banner__avatar col-auto row items-center self-start"},Ct(n.avatar)),ke("div",{class:"q-banner__content col text-body2"},Ct(n.default))],c=Ct(n.action);return c!==void 0&&v.push(ke("div",{class:i.value},c)),ke("div",{class:s.value+(u.inlineActions===!1&&c!==void 0?" q-banner--top-padding":""),role:"alert"},v)}}}),Zi={class:"q-gutter-sm"},ed={class:"col col-md-6 q-pa-xs"},Ja="Import Pelanggan",td={__name:"Import",setup(u){const n=ze({csv_file:null}),d=()=>{n.post(route("admin.customer.import"),{onSuccess:()=>{n.reset()},onError:()=>{Be()},onFinish:()=>{n.clearErrors()}})};return(o,s)=>{const i=W("i-head"),v=W("authenticated-layout");return p(),w(Y,null,[e(i,{title:Ja}),e(v,{"show-drawer-button":!0},{title:l(()=>[_(r(Ja))]),"left-button":l(()=>[t("div",Zi,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=c=>o.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ed,[e(Fe,{class:"row",onSubmit:J(d,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[s[3]||(s[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),s[4]||(s[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(Wl,{modelValue:a(n).csv_file,"onUpdate:modelValue":s[1]||(s[1]=c=>a(n).csv_file=c),accept:".csv",label:"Pilih file CSV",error:!!a(n).errors.csv_file,"error-message":a(n).errors.csv_file,disable:a(n).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(n).processing||!a(n).csv_file,loading:a(n).processing},null,8,["disable","loading"]),e(A,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:s[2]||(s[2]=c=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(p(),O(Kt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[_(r(o.$page.props.flash.success),1)]),_:1})):y("",!0),o.$page.props.flash.error?(p(),O(Kt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[_(r(o.$page.props.flash.error),1)]),_:1})):y("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ad=Object.freeze(Object.defineProperty({__proto__:null,default:td},Symbol.toStringTag,{value:"Module"})),ld={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},od={class:"q-pa-xs"},nd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},sd={class:"flex justify-end"},Ga="Pelanggan",rd={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=Pe({search:"",status:"active",...Re()}),f=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),b=[{name:"code",label:n.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Saldo (Rp)",field:"wallet_balance",align:"right"},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],k=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{$()});const g=C=>at({message:`Hapus Pelanggan ${C.name}?`,url:route("admin.customer.delete",C.id),fetchItemsCallback:$,loading:s}),$=(C=null)=>{Ie({pagination:f,filter:m,props:C,rows:o,url:route("admin.customer.data"),loading:s,tableRef:i})},U=()=>$(),h=C=>Z.get(route("admin.customer.detail",{id:C.id})),D=G(()=>n.screen.gt.sm?b:b.filter(C=>C.name==="code"||C.name==="action"));return(C,x)=>{const I=W("i-head"),z=W("authenticated-layout");return p(),w(Y,null,[e(I,{title:Ga}),e(z,null,Le({title:l(()=>[_(r(Ga))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=P=>d.value=!d.value)},null,8,["icon"]),C.$can("admin.customer.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=P=>a(Z).get(C.route("admin.customer.add")))})):y("",!0),C.$can("admin.customer.import")?(p(),O(A,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.customer.import")?ee((p(),O(le,{key:0,clickable:"",onClick:x[2]||(x[2]=J(P=>a(Z).get(C.route("admin.customer.import")),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"csv"})]),_:1}),e(M,null,{default:l(()=>x[8]||(x[8]=[_("Import")])),_:1})]),_:1})),[[se],[ue]]):y("",!0)]),_:1})]),_:1})]),_:1})):y("",!0)]),default:l(()=>[t("div",od,[e(Ce,{class:"full-height-table",style:je({height:a(c)}),ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:f.value,"onUpdate:pagination":x[7]||(x[7]=P=>f.value=P),filter:m.search,loading:s.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:P,message:j,filter:E})=>[t("div",nd,[t("span",null,r(j)+" "+r(E?" with term "+E:""),1)])]),body:l(P=>[e(qe,{props:P,class:xe([P.row.active?"":"bg-red-1","cursor-pointer"]),onClick:j=>h(P.row)},{default:l(()=>[e(L,{key:"code",props:P,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(p(),O(S,{key:0,name:"person"})):y("",!0),_(" "+r(P.row.code),1)]),a(n).screen.lt.md?(p(),w(Y,{key:0},[t("div",null,[a(n).screen.lt.md?(p(),O(S,{key:0,name:"person"})):y("",!0),_(" "+r(P.row.name),1)]),t("div",null,[e(S,{name:"phone"}),_(" "+r(P.row.phone),1)]),e(we,{text:P.row.address,icon:"home_pin"},null,8,["text"]),t("div",null,[e(S,{name:"wallet"}),_(" Rp. "+r(a(K)(P.row.wallet_balance)),1)])],64)):y("",!0)]),_:2},1032,["props"]),e(L,{key:"name",props:P},{default:l(()=>[_(r(P.row.name),1)]),_:2},1032,["props"]),e(L,{key:"wallet_balance",props:P},{default:l(()=>[_(r(a(K)(P.row.wallet_balance)),1)]),_:2},1032,["props"]),e(L,{key:"phone",props:P},{default:l(()=>[_(r(P.row.phone),1)]),_:2},1032,["props"]),e(L,{key:"address",props:P},{default:l(()=>[e(we,{text:P.row.address},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"action",props:P},{default:l(()=>[t("div",sd,[C.$can("admin.customer.add")||C.$can("admin.customer.edit")||C.$can("admin.customer.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[6]||(x[6]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.customer.edit")?ee((p(),O(le,{key:0,clickable:"",onClick:J(j=>a(Z).get(C.route("admin.customer.edit",P.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>x[9]||(x[9]=[_("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),C.$can("admin.customer.delete")?ee((p(),O(le,{key:1,onClick:J(j=>g(P.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>x[10]||(x[10]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",ld,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[x[4]||(x[4]=P=>m.status=P),U],options:k,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":x[5]||(x[5]=P=>m.search=P),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},id=Object.freeze(Object.defineProperty({__proto__:null,default:rd},Symbol.toStringTag,{value:"Module"})),dd={class:"q-pb-sm"},ud={class:"row q-col-gutter-sm"},md={class:"row items-center no-wrap"},cd={class:"q-ml-md"},pd={class:"text-subtitle2 text-grey-8"},fd={class:"text-h6 text-weight-bold"},Ql={__name:"ActualSummaryCard",props:{dashboardData:{type:Object,required:!0}},setup(u){const n=u,d=G(()=>[{label:"Total Pelanggan Aktif",value:n.dashboardData.summary.total_active_customer,icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Saldo Wallet",value:K(n.dashboardData.summary.total_wallet_balance),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Penjualan",value:K(n.dashboardData.summary.total_sales),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Transaksi",value:K(n.dashboardData.summary.total_transactions),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(o,s)=>(p(),w("div",dd,[s[0]||(s[0]=t("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"},"Ringkasan Statistik",-1)),t("div",ud,[(p(!0),w(Y,null,Ge(d.value,(i,v)=>(p(),w("div",{key:v,class:"col-12 col-md-6"},[e(ce,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:l(()=>[t("div",md,[e(Lt,{icon:i.icon,color:i.color,"text-color":i.bgColor},null,8,["icon","color","text-color"]),t("div",cd,[t("div",pd,r(i.label),1),t("div",fd,r(i.value),1)])])]),_:2},1024)]))),128))])]))}},gd=Object.freeze(Object.defineProperty({__proto__:null,default:Ql},Symbol.toStringTag,{value:"Module"})),bd={class:"row q-col-gutter-sm q-pb-sm"},vd={class:"col-md-6 col-12"},_d={class:"col-md-6 col-12"},yd={__name:"ChartCard",props:{dashboardData:{type:Object,required:!0}},setup(u){un([mn,cn,pn,fn,gn,bn,vn]);const n=u,d=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=G(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(i){let v=i[0].name+"<br/>";return i.forEach(function(c){v+=c.marker+" "+c.seriesName+": "+K(c.value)+"<br/>"}),v}},xAxis:{type:"category",data:n.dashboardData.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:i=>K(i),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:n.dashboardData.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:d[0]}}]})),s=G(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(i){return i.name+"<br/>"+i.seriesName+": "+K(i.value)+" ("+i.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:n.dashboardData.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:i=>d[i.dataIndex%d.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(i,v)=>(p(),w("div",bd,[t("div",vd,[e(ce,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[v[0]||(v[0]=t("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),e(a(Aa),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",_d,[e(ce,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[v[1]||(v[1]=t("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),e(a(Aa),{class:"chart",option:s.value,autoresize:""},null,8,["option"])]),_:1})])]))}},Jl=_t(yd,[["__scopeId","data-v-b9cdf915"]]),kd=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),wd={class:"row q-col-gutter-sm q-pb-sm"},hd={class:"col-md-6 col-12"},$d={class:"col-md-6 col-12"},Gl={__name:"TopCard",props:{dashboardData:{type:Object,required:!0}},setup(u){return(n,d)=>(p(),w("div",wd,[t("div",hd,[e(ce,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[d[0]||(d[0]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),e(Me,{separator:""},{default:l(()=>[(p(!0),w(Y,null,Ge(u.dashboardData.top_customers_sales,(o,s)=>(p(),O(le,{key:s},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(Lt,{color:"primary","text-color":"white",size:"sm"},{default:l(()=>[_(r(s+1),1)]),_:2},1024)]),_:2},1024),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>[_(r(o.name),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:l(()=>[e(_e,{class:"text-primary"},{default:l(()=>[_(r(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",$d,[e(ce,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[d[1]||(d[1]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),e(Me,{separator:""},{default:l(()=>[(p(!0),w(Y,null,Ge(u.dashboardData.top_customers_topup,(o,s)=>(p(),O(le,{key:s},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(Lt,{color:"green-7","text-color":"white",size:"sm"},{default:l(()=>[_(r(s+1),1)]),_:2},1024)]),_:2},1024),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>[_(r(o.name),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:l(()=>[e(_e,{class:"text-green-7"},{default:l(()=>[_(r(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]))}},xd=Object.freeze(Object.defineProperty({__proto__:null,default:Gl},Symbol.toStringTag,{value:"Module"})),Sd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Vd={class:"q-pa-xs"},qd={class:"q-pa-none"},Xa="Dashboard",Cd={__name:"Index",setup(u){const n=fe(),d=V({summary:{total_active_customer:n.props.data.active_customer_count,total_sales:155e5,total_transactions:1250,total_wallet_balance:n.props.data.total_customer_wallet_balance,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),o=V(!1),s=V(Re().month??"this_month"),i=V([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),v=()=>{Z.visit(route("admin.dashboard",{month:s.value}))};return(c,m)=>{const f=W("i-head"),b=W("authenticated-layout");return p(),w(Y,null,[e(f,{title:Xa}),e(b,null,Le({title:l(()=>[_(r(Xa))]),"right-button":l(()=>[e(A,{class:"q-ml-sm",icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:m[0]||(m[0]=k=>o.value=!o.value)},null,8,["icon"])]),default:l(()=>[t("div",Vd,[t("div",qd,[e(Ql,{dashboardData:d.value},null,8,["dashboardData"])]),e(Jl,{dashboardData:d.value},null,8,["dashboardData"]),e(Gl,{dashboardData:d.value},null,8,["dashboardData"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar"},{default:l(()=>[t("div",Sd,[e(de,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:s.value,"onUpdate:modelValue":[m[1]||(m[1]=k=>s.value=k),v],options:i.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},Td=Object.freeze(Object.defineProperty({__proto__:null,default:Cd},Symbol.toStringTag,{value:"Module"})),Pd={class:"row"},Od={class:"row q-col-gutter-sm"},Rd={class:"col-sm-6 col-xs-12"},Id={class:"col-sm-6 col-xs-12"},Dd={class:"col-md-3 col-sm-6 col-xs-12"},Ud={class:"col-md-3 col-sm-6 col-xs-12"},Ad={class:"col-md-3 col-sm-6 col-xs-12"},jd={class:"col-md-3 col-sm-6 col-xs-12"};const Ed={__name:"SummaryCard",setup(u){const n=fe(),d=(o,s)=>{const v={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...s};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(v)),Z.visit(o,{data:v})};return(o,s)=>(p(),w("div",Pd,[e(ce,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:l(()=>[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",Od,[t("div",Rd,[e(le,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:s[0]||(s[0]=i=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(M,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(_e,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[_(r(a(n).props.data.active_customer_count),1)]),_:1}),e(_e,null,{default:l(()=>s[5]||(s[5]=[_("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",Id,[e(le,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:s[1]||(s[1]=i=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(M,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(_e,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[_(r(o.$page.props.data.active_user_count),1)]),_:1}),e(_e,null,{default:l(()=>s[6]||(s[6]=[_("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",Dd,[e(le,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(_e,{class:"text-white text-weight-bold"},{default:l(()=>[_(" Rp. "+r(a(K)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(_e,null,{default:l(()=>s[7]||(s[7]=[_("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",Ud,[e(le,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(_e,{class:"text-white text-weight-bold"},{default:l(()=>[_(" Rp. "+r(a(K)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(_e,null,{default:l(()=>s[8]||(s[8]=[_("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",Ad,[e(le,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(_e,{class:"text-white text-weight-bold"},{default:l(()=>[_(" Rp. "+r(a(K)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(_e,null,{default:l(()=>s[9]||(s[9]=[_("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",jd,[e(le,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(M,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(_e,{class:"text-white text-weight-bold"},{default:l(()=>[_(" Rp. "+r(a(K)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(_e,null,{default:l(()=>s[10]||(s[10]=[_("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),y("",!0),y("",!0),y("",!0)])]),_:1})]),_:1})]))}},Md=Object.freeze(Object.defineProperty({__proto__:null,default:Ed},Symbol.toStringTag,{value:"Module"})),Nd={class:"detail"},Xl={__name:"MainInfoTab",setup(u){const n=fe();return(d,o)=>(p(),w("table",Nd,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.FINANCE_ACCOUNT_TYPES[a(n).props.data.type]),1)]),a(n).props.data.type=="bank"?(p(),w(Y,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.holder),1)])],64)):y("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(n).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},Bd=Object.freeze(Object.defineProperty({__proto__:null,default:Xl},Symbol.toStringTag,{value:"Module"})),zd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Fd={class:"flex q-gutter-sm"},Ld={key:0},Zl={__name:"HistoryTab",setup(u){const n=fe(),d=$e(),o=V(null),s=V([]),i=V(!0),v=Pe({...Re()}),c=Ke(null,117),m=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left"},{name:"datetime",label:"Waktu",field:"datetime",align:"left"},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],b=G(()=>d.screen.gt.sm?f:f.filter(g=>g.name==="id"));he(()=>{k()});const k=(g=null)=>Ie({pagination:m,filter:v,props:g,rows:s,url:route("admin.finance-transaction.data",{filter:{account_id:n.props.data.id}}),loading:i,tableRef:o});return(g,$)=>(p(),O(Ce,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:je({height:a(c)}),color:"primary",class:"full-height-table","row-key":"id",pagination:m.value,"onUpdate:pagination":$[0]||($[0]=U=>m.value=U),filter:v.search,loading:i.value,columns:b.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:k,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({message:U,filter:h})=>[t("div",zd,[t("span",null,r(U)+" "+r(h?" with term "+h:""),1)])]),body:l(U=>[e(qe,{props:U},{default:l(()=>[e(L,{key:"id",props:U},{default:l(()=>[t("div",Fd,[t("div",null,[a(d).screen.lt.md?(p(),O(S,{key:0,name:"tag",class:"inline-icon"})):y("",!0),_(" "+r(U.row.formatted_id),1)])]),a(d).screen.lt.md?(p(),w(Y,{key:0},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+r(a(ve)(U.row.datetime)),1)]),U.row.creator?(p(),w("div",Ld,[e(S,{name:"person",class:"inline-icon"}),_(" "+r(U.row.creator.username),1)])):y("",!0),t("div",{class:xe([U.row.amount>0?"text-green":"text-red","text-bold"])},[e(S,{class:"inline-icon",name:"money"}),_(" "+r(a(Nt)(U.row.amount))+"Rp. "+r(a(K)(Math.abs(U.row.amount))),1)],2),t("div",null,[e(ut,{color:U.row.amount>0?"green":"red"},{default:l(()=>[_(r(g.$CONSTANTS.FINANCE_TRANSACTION_TYPES[U.row.type]),1)]),_:2},1032,["color"])]),e(we,{text:U.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):y("",!0)]),_:2},1032,["props"]),e(L,{key:"datetime",props:U},{default:l(()=>[_(r(a(ve)(U.row.datetime)),1)]),_:2},1032,["props"]),e(L,{key:"type",props:U},{default:l(()=>[e(ut,{color:U.row.amount>0?"green":"red"},{default:l(()=>[_(r(g.$CONSTANTS.FINANCE_TRANSACTION_TYPES[U.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(L,{key:"amount",props:U,class:xe(U.row.amount>0?"text-green":"text-red")},{default:l(()=>[_(r(a(Nt)(U.row.amount)+a(K)(Math.abs(U.row.amount))),1)]),_:2},1032,["props","class"]),e(L,{key:"notes",props:U},{default:l(()=>[e(we,{text:U.row.notes,icon:g.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},Hd=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"})),Kd={class:"q-gutter-sm"},Yd={class:"q-gutter-sm"},Wd={class:"col q-pa-xs"},Qd={class:"row"},Za="Rincian Akun",Jd={__name:"Detail",setup(u){const n=fe(),d=V("main");return(o,s)=>{const i=W("i-head"),v=W("authenticated-layout");return p(),w(Y,null,[e(i,{title:Za}),e(v,null,{title:l(()=>[_(r(Za))]),"left-button":l(()=>[t("div",Kd,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=c=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":l(()=>[t("div",Yd,[o.$can("admin.finance-account.edit")?(p(),O(A,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:s[1]||(s[1]=c=>a(Z).get(o.route("admin.finance-account.edit",{id:a(n).props.data.id})))})):y("",!0)])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Wd,[t("div",Qd,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ot,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=c=>d.value=c),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(lt,{name:"main",label:"Info Akun"}),e(lt,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:d.value,"onUpdate:modelValue":s[3]||(s[3]=c=>d.value=c),animated:""},{default:l(()=>[e(ot,{name:"main"},{default:l(()=>[e(Xl)]),_:1}),e(ot,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(Zl)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Gd=Object.freeze(Object.defineProperty({__proto__:null,default:Jd},Symbol.toStringTag,{value:"Module"})),Xd={style:{"margin-left":"-10px"}},qt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u){return(n,d)=>(p(),w("div",Xd,[e(la,{class:"full-width q-pl-none","model-value":u.modelValue,"onUpdate:modelValue":d[0]||(d[0]=o=>n.$emit("update:modelValue",o)),disable:u.disable,label:u.label},null,8,["model-value","disable","label"])]))}},Zd={class:"q-gutter-sm"},eu={class:"col col-md-6 q-pa-xs"},tu={__name:"Editor",setup(u){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=ze({id:n.props.data.id,name:n.props.data.name,type:n.props.data.type,bank:n.props.data.bank,number:n.props.data.number,holder:n.props.data.holder,balance:parseFloat(n.props.data.balance),active:!!n.props.data.active,has_wallet_access:!!n.props.data.has_wallet_access,show_in_pos_payment:!!n.props.data.show_in_pos_payment,show_in_purchasing_payment:!!n.props.data.show_in_purchasing_payment,notes:n.props.data.notes}),s=tt(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),i=()=>Ze({form:o,url:route("admin.finance-account.save")}),v=c=>{c==="cashier_cash"&&(o.show_in_pos_payment=!0)};return he(()=>{v(o.type)}),Ee(()=>o.type,c=>{v(c)}),(c,m)=>{const f=W("i-head"),b=W("authenticated-layout");return p(),w(Y,null,[e(f,{title:d}),e(b,null,{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",Zd,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=k=>c.$inertia.get(c.route("admin.finance-account.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",eu,[e(Fe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[1]||(m[1]=k=>a(o).id=k)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":m[2]||(m[2]=k=>a(o).name=k),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[k=>k&&k.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{modelValue:a(o).type,"onUpdate:modelValue":m[3]||(m[3]=k=>a(o).type=k),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"",error:!!a(o).errors.type,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),a(o).type=="bank"?(p(),w(Y,{key:0},[e(oe,{modelValue:a(o).bank,"onUpdate:modelValue":m[4]||(m[4]=k=>a(o).bank=k),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!a(o).errors.bank,disable:a(o).processing,"error-message":a(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).number,"onUpdate:modelValue":m[5]||(m[5]=k=>a(o).number=k),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!a(o).errors.number,disable:a(o).processing,"error-message":a(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(o).holder,"onUpdate:modelValue":m[6]||(m[6]=k=>a(o).holder=k),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!a(o).errors.holder,disable:a(o).processing,"error-message":a(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):y("",!0),e(Ue,{modelValue:a(o).balance,"onUpdate:modelValue":m[7]||(m[7]=k=>a(o).balance=k),label:"Saldo",lazyRules:"",disable:a(o).processing,"allow-negative":!0,error:!!a(o).errors.balance,errorMessage:a(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(o).notes,"onUpdate:modelValue":m[8]||(m[8]=k=>a(o).notes=k),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(qt,{modelValue:a(o).active,"onUpdate:modelValue":m[9]||(m[9]=k=>a(o).active=k),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),m[14]||(m[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(qt,{modelValue:a(o).show_in_pos_payment,"onUpdate:modelValue":m[10]||(m[10]=k=>a(o).show_in_pos_payment=k),disable:a(o).processing||a(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(qt,{modelValue:a(o).show_in_purchasing_payment,"onUpdate:modelValue":m[11]||(m[11]=k=>a(o).show_in_purchasing_payment=k),disable:a(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(qt,{modelValue:a(o).has_wallet_access,"onUpdate:modelValue":m[12]||(m[12]=k=>a(o).has_wallet_access=k),disable:a(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:m[13]||(m[13]=k=>a(Z).get(c.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},au=Object.freeze(Object.defineProperty({__proto__:null,default:tu},Symbol.toStringTag,{value:"Module"})),lu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ou={class:"q-pa-xs"},nu={class:"q-my-sm text-subtitle"},su={class:"text-bold text-grey-8"},ru={class:"full-width row flex-center text-grey-8 q-gutter-sm"},iu={class:"text-bold text-grey-9"},du={class:"text-grey-9"},uu={key:0},mu={key:1},cu={key:0},pu={class:"flex justify-end"},el="Akun Kas",fu={__name:"Index",setup(u){const n=fe(),d=$e(),o=V(!1),s=V([]),i=V(null),v=V(null),c=Ke(v,117),m=V(!0),f=Pe({search:"",status:"active",type:"all",...Re()}),b=n.props.totalBalance,k=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],$=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],U=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];he(()=>{D()});const h=z=>at({message:`Hapus Akun ${z.name}?`,url:route("admin.finance-account.delete",z.id),fetchItemsCallback:D,loading:m}),D=(z=null)=>{Ie({pagination:k,filter:f,props:z,rows:s,url:route("admin.finance-account.data"),loading:m,tableRef:i})},C=()=>D(),x=z=>Z.get(route("admin.finance-account.detail",{id:z.id})),I=G(()=>d.screen.gt.sm?g:g.filter(z=>z.name==="name"||z.name==="action"));return(z,P)=>{const j=W("i-head"),E=W("authenticated-layout");return p(),w(Y,null,[e(j,{title:el}),e(E,null,Le({title:l(()=>[_(r(el))]),"right-button":l(()=>[e(A,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=B=>o.value=!o.value)},null,8,["icon"]),z.$can("admin.finance-account.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=B=>a(Z).get(z.route("admin.finance-account.add")))})):y("",!0)]),default:l(()=>[t("div",ou,[e(ce,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:l(()=>[t("div",nu,[P[7]||(P[7]=_(" Total Saldo Akun Aktif: ")),t("span",su,"Rp. "+r(a(K)(a(b))),1)])]),_:1}),e(Ce,{ref_key:"tableRef",ref:i,class:"full-height-table",style:je({height:a(c)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:k.value,"onUpdate:pagination":P[6]||(P[6]=B=>k.value=B),filter:f.search,loading:m.value,columns:I.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:D,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:B,message:N,filter:q})=>[t("div",ru,[t("span",null,r(N)+" "+r(q?" with term "+q:""),1)])]),body:l(B=>[e(qe,{props:B,class:xe([B.row.active?"":"bg-red-1","cursor-pointer"]),onClick:N=>x(B.row)},{default:l(()=>[e(L,{key:"name",props:B,class:"wrap-column"},{default:l(()=>[t("div",iu,r(B.row.name),1),t("div",du,[B.row.type=="bank"?(p(),w("div",uu,[e(S,{name:"wallet",class:"inline-icon"}),_(" Rekening "+r(B.row.bank??"-")+" "+r(B.row.number??"-")+" a.n. "+r(B.row.holder??"-"),1)])):y("",!0),B.row.notes?(p(),w("div",mu,[e(S,{name:"notes"}),_(" "+r(B.row.notes),1)])):y("",!0)]),a(d).screen.lt.md?(p(),w("div",cu,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+r(a(K)(B.row.balance)),1)])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"type",props:B},{default:l(()=>[_(r(z.$CONSTANTS.FINANCE_ACCOUNT_TYPES[B.row.type]),1)]),_:2},1032,["props"]),e(L,{key:"balance",props:B},{default:l(()=>[_(r(a(K)(B.row.balance)),1)]),_:2},1032,["props"]),e(L,{key:"action",props:B},{default:l(()=>[t("div",pu,[z.$can("admin.finance-account.add")||z.$can("admin.finance-account.edit")||z.$can("admin.finance-account.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[5]||(P[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[z.$can("admin.finance-account.add")?ee((p(),O(le,{key:0,clickable:"",onClick:J(N=>a(Z).get(z.route("admin.finance-account.duplicate",B.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>P[8]||(P[8]=[_(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),z.$can("admin.finance-account.edit")?ee((p(),O(le,{key:1,clickable:"",onClick:J(N=>a(Z).get(z.route("admin.finance-account.edit",B.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>P[9]||(P[9]=[_("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),z.$can("admin.finance-account.delete")?ee((p(),O(le,{key:2,onClick:J(N=>h(B.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>P[10]||(P[10]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",lu,[e(de,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:f.type,"onUpdate:modelValue":[P[2]||(P[2]=B=>f.type=B),C],options:U,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:f.status,"onUpdate:modelValue":[P[3]||(P[3]=B=>f.status=B),C],options:$,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":P[4]||(P[4]=B=>f.search=B),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},gu=Object.freeze(Object.defineProperty({__proto__:null,default:fu},Symbol.toStringTag,{value:"Module"})),bu={class:"q-gutter-sm"},vu={class:"col col-md-6 q-pa-xs"},_u={class:"row"},yu={class:"detail"},ku={key:0},wu={key:1},hu={key:2},$u={key:3},xu={colspan:"3",class:"bg-white"},tl="Rincian Transaksi",Su={__name:"Detail",setup(u){const n=fe();return(d,o)=>{const s=W("i-head"),i=W("authenticated-layout");return p(),w(Y,null,[e(s,{title:tl}),e(i,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",bu,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.finance-transaction.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(tl))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",vu,[t("div",_u,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",yu,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.formatted_id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.datetime)),1)]),a(n).props.data.account?(p(),w("tr",ku,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[_(r(a(n).props.data.account.name)+" ",1),a(n).props.data.account.type==="bank"?(p(),w(Y,{key:0},[_(" Rek "+r(a(n).props.data.account.bank)+" an "+r(a(n).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),_(" "+r(a(n).props.data.account.number),1)],64)):y("",!0)])])):y("",!0),a(n).props.data.type?(p(),w("tr",wu,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.FINANCE_TRANSACTION_TYPES[a(n).props.data.type]),1)])):y("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(Nt)(a(n).props.data.amount))+" Rp. "+r(a(K)(Math.abs(a(n).props.data.amount))),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(p(),w("tr",hu,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):y("",!0),a(n).props.data.updater?(p(),w("tr",$u,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):y("",!0),a(n).props.data.image_path?(p(),w(Y,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",xu,[e(Yt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:je([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):y("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Vu=Object.freeze(Object.defineProperty({__proto__:null,default:Su},Symbol.toStringTag,{value:"Module"})),qu={class:"q-gutter-sm"},Cu={class:"col col-md-6 q-pa-xs"},Tu={__name:"Editor",setup(u){var c;const n=fe(),d=(n.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=n.props.accounts.map(m=>({label:m.name,value:m.id})),s=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],i=ze({id:n.props.data.id,account_id:n.props.data.account_id,to_account_id:n.props.data.to_account_id??null,type:n.props.data.type,datetime:new Date(n.props.data.datetime),notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((c=n.props.data)==null?void 0:c.image_path)??"",image:null}),v=()=>{Jt(i,{datetime:"YYYY-MM-DD HH:mm:ss"}),Ze({form:i,url:route("admin.finance-transaction.save")})};return(m,f)=>{const b=W("i-head"),k=W("authenticated-layout");return p(),w(Y,null,[e(b,{title:d}),e(k,null,{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",qu,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=g=>m.$inertia.get(m.route("admin.finance-transaction.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Cu,[e(Fe,{class:"row",onSubmit:J(v,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=g=>a(i).id=g)},null,512),[[dt,a(i).id]]),e(Bt,{modelValue:a(i).datetime,"onUpdate:modelValue":f[2]||(f[2]=g=>a(i).datetime=g),label:"Waktu",error:!!a(i).errors.datetime,disable:a(i).processing,errorMessage:a(i).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{autofocus:"",modelValue:a(i).type,"onUpdate:modelValue":f[3]||(f[3]=g=>a(i).type=g),label:"Jenis Transaksi",options:s,"map-options":"","emit-value":"",error:!!a(i).errors.type,disable:a(i).processing,errorMessage:a(i).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{class:"custom-select",modelValue:a(i).account_id,"onUpdate:modelValue":f[4]||(f[4]=g=>a(i).account_id=g),label:a(i).type=="transfer"?"Akun Asal":"Akun",options:a(o),"map-options":"","emit-value":"",errorMessage:a(i).errors.account_id,error:!!a(i).errors.account_id,disable:a(i).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),a(i).type=="transfer"?(p(),O(de,{key:0,class:"custom-select",modelValue:a(i).to_account_id,"onUpdate:modelValue":f[5]||(f[5]=g=>a(i).to_account_id=g),label:"Akun Tujuan",options:a(o),"map-options":"","emit-value":"",errorMessage:a(i).errors.to_account_id,error:!!a(i).errors.to_account_id,disable:a(i).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):y("",!0),e(Ue,{modelValue:a(i).amount,"onUpdate:modelValue":f[6]||(f[6]=g=>a(i).amount=g),label:"Jumlah",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.amount,errorMessage:a(i).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(oe,{modelValue:a(i).notes,"onUpdate:modelValue":f[7]||(f[7]=g=>a(i).notes=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.notes,"error-message":a(i).errors.notes,rules:[g=>g&&g.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ha,{modelValue:a(i).image,"onUpdate:modelValue":f[8]||(f[8]=g=>a(i).image=g),"initial-image-path":a(i).image_path,disabled:a(i).processing,error:!!a(i).errors.image||!!a(i).errors.image_path,"error-message":a(i).errors.image||a(i).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:f[9]||(f[9]=g=>a(Z).get(m.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Pu=Object.freeze(Object.defineProperty({__proto__:null,default:Tu},Symbol.toStringTag,{value:"Module"})),Ou={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ru={class:"q-pa-xs"},Iu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Du={class:"text-grey-8"},Uu={class:"text-bold text-grey-8"},Au={class:"flex justify-end no-wrap"},al="Transaksi Kas",ju={__name:"Index",setup(u){const n=fe(),d=$e(),o=V(!1),s=V([]),i=V(!0),v=V(null),c=V(null),m=Ke(c),f=Wt(),b=Qt(),k=[{label:"Semua",value:"all"},...n.props.accounts.map(N=>({label:N.name,value:N.id}))],g=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...At(f-2,f-1).reverse()],$=[{value:"all",label:"Semua Bulan"},...jt()],U=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],h=Pe({search:"",type:"all",account_id:"all",year:f,month:b,...Re()}),D=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:d.screen.lt.md?"Item":"Kode Trx",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{I()});const x=N=>at({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${N.formatted_id}?`,url:route("admin.finance-transaction.delete",N.id),fetchItemsCallback:I,loading:i}),I=(N=null)=>{Ie({pagination:D,filter:h,props:N,rows:s,url:route("admin.finance-transaction.data"),loading:i,tableRef:v})},z=()=>{I()},P=G(()=>d.screen.gt.sm?C:C.filter(N=>N.name==="id"||N.name==="action"));Ee(()=>h.year,N=>{N===null&&(h.month=null)});const j=V(null),E=V(!1),B=N=>{j.value=N,E.value=!0};return(N,q)=>{const Q=W("i-head"),te=W("authenticated-layout");return p(),w(Y,null,[e(Q,{title:al}),e(te,null,Le({title:l(()=>[_(r(al))]),"right-button":l(()=>[e(A,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:q[0]||(q[0]=T=>o.value=!o.value)},null,8,["icon"]),N.$can("admin.finance-transaction.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:q[1]||(q[1]=T=>a(Z).get(N.route("admin.finance-transaction.add")))})):y("",!0)]),default:l(()=>[t("div",Ru,[e(Ce,{ref_key:"tableRef",ref:v,style:je({height:a(m)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":q[8]||(q[8]=T=>D.value=T),filter:h.search,loading:i.value,columns:P.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:I,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:T,message:R,filter:X})=>[t("div",Iu,[t("span",null,r(R)+" "+r(X?" with term "+X:""),1)])]),body:l(T=>[e(qe,{props:T,class:"cursor-pointer",onClick:J(R=>a(Z).get(N.route("admin.finance-transaction.detail",{id:T.row.id})),["stop"])},{default:l(()=>[e(L,{key:"id",props:T},{default:l(()=>[t("div",null,[a(d).screen.lt.md?(p(),O(S,{key:0,class:"inline-icon",name:"tag"})):y("",!0),_(" "+r(T.row.formatted_id),1)]),a(d).screen.lt.md?(p(),w(Y,{key:0},[t("div",Du,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+r(a(ve)(T.row.datetime)),1)]),t("div",Uu,[e(S,{name:"wallet",class:"inline-icon"}),_(" "+r(T.row.account.name),1)]),t("div",{class:xe(["text-bold",T.row.amount<0?"text-red":"text-green"])},[e(S,{name:"money",class:"inline-icon"}),_(" "+r(a(Nt)(T.row.amount)+"Rp."+a(K)(Math.abs(T.row.amount))),1)],2),T.row.notes?(p(),O(we,{key:0,icon:"notes",text:T.row.notes,class:"text-grey-8"},null,8,["text"])):y("",!0),e(ut,{color:T.row.amount>0?"green":"red"},{default:l(()=>[_(r(T.row.type_label),1)]),_:2},1032,["color"])],64)):y("",!0)]),_:2},1032,["props"]),e(L,{key:"datetime",props:T,class:"wrap-column"},{default:l(()=>[_(r(a(ve)(T.row.datetime)),1)]),_:2},1032,["props"]),e(L,{key:"account",props:T},{default:l(()=>{var R;return[_(r((R=T.row.account)==null?void 0:R.name),1)]}),_:2},1032,["props"]),e(L,{key:"type",props:T},{default:l(()=>[_(r(N.$CONSTANTS.FINANCE_TRANSACTION_TYPES[T.row.type]),1)]),_:2},1032,["props"]),e(L,{key:"amount",props:T,style:{"text-align":"right"}},{default:l(()=>[_(r(a(na)(T.row.amount)),1)]),_:2},1032,["props"]),e(L,{key:"notes",props:T,class:"wrap-column"},{default:l(()=>[_(r(T.row.notes),1)]),_:2},1032,["props"]),e(L,{key:"action",props:T},{default:l(()=>[t("div",Au,[e(A,{icon:"image",color:"primary",dense:"",flat:"",disable:T.row.image_path===null||T.row.image_path==="",onClick:J(R=>B(T.row.image_path),["stop"])},{default:l(()=>[T.row.image_path!=null?(p(),O(sa,{key:0},{default:l(()=>q[10]||(q[10]=[_(" Lihat Bukti ")])),_:1})):y("",!0)]),_:2},1032,["disable","onClick"]),N.$can("admin.finance-transaction.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:q[7]||(q[7]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.finance-transaction.delete")?ee((p(),O(le,{key:0,onClick:J(R=>x(T.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>q[11]||(q[11]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ra,{modelValue:E.value,"onUpdate:modelValue":q[9]||(q[9]=T=>E.value=T),imageUrl:`/${j.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:c},{default:l(()=>[t("div",Ou,[e(de,{modelValue:h.year,"onUpdate:modelValue":[q[2]||(q[2]=T=>h.year=T),z],options:g,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h.year!="all"?(p(),O(de,{key:0,modelValue:h.month,"onUpdate:modelValue":[q[3]||(q[3]=T=>h.month=T),z],options:$,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:h.year===null},null,8,["modelValue","disable"])):y("",!0),e(de,{modelValue:h.type,"onUpdate:modelValue":[q[4]||(q[4]=T=>h.type=T),z],options:U,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:h.account_id,"onUpdate:modelValue":[q[5]||(q[5]=T=>h.account_id=T),z],label:"Akun",options:k,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:h.search,"onUpdate:modelValue":q[6]||(q[6]=T=>h.search=T),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Eu=Object.freeze(Object.defineProperty({__proto__:null,default:ju},Symbol.toStringTag,{value:"Module"})),Mu={class:"q-gutter-sm"},Nu={class:"col col-md-6 q-pa-xs"},Bu={__name:"Editor",setup(u){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=ze({id:n.props.data.id??null,name:n.props.data.name,description:n.props.data.description}),s=()=>Ze({form:o,url:route("admin.operational-cost-category.save")});return(i,v)=>{const c=W("i-head"),m=W("authenticated-layout");return p(),w(Y,null,[e(c,{title:d}),e(m,null,{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",Mu,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=f=>i.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Nu,[e(Fe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=f=>a(o).id=f)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":v[2]||(v[2]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).description,"onUpdate:modelValue":v[3]||(v[3]=f=>a(o).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:v[4]||(v[4]=f=>a(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},zu=Object.freeze(Object.defineProperty({__proto__:null,default:Bu},Symbol.toStringTag,{value:"Module"})),Fu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Lu={class:"q-pa-xs"},Hu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ku={key:0,class:"text-grey-8"},Yu={class:"flex justify-end"},ll="Kategori Biaya Operasional",Wu={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=Pe({search:"",...Re()}),f=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),b=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{g()});const k=U=>at({message:`Hapus Kategori Biaya ${U.name}?`,url:route("admin.operational-cost-category.delete",U.id),fetchItemsCallback:g,loading:s}),g=(U=null)=>{Ie({pagination:f,filter:m,props:U,rows:o,url:route("admin.operational-cost-category.data"),loading:s,tableRef:i})},$=G(()=>n.screen.gt.sm?b:b.filter(U=>U.name==="name"||U.name==="action"));return(U,h)=>{const D=W("i-head"),C=W("authenticated-layout");return p(),w(Y,null,[e(D,{title:ll}),e(C,null,Le({title:l(()=>[_(r(ll))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=x=>d.value=!d.value)},null,8,["icon"]),U.$can("admin.operational-cost-category.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=x=>a(Z).get(U.route("admin.operational-cost-category.add")))})):y("",!0)]),default:l(()=>[t("div",Lu,[e(Ce,{ref_key:"tableRef",ref:i,class:"full-height-table",style:je({height:a(c)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:f.value,"onUpdate:pagination":h[4]||(h[4]=x=>f.value=x),filter:m.search,loading:s.value,columns:$.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:I,filter:z})=>[t("div",Hu,[t("span",null,r(I)+" "+r(z?" with term "+z:""),1)])]),body:l(x=>[e(qe,{props:x},{default:l(()=>[e(L,{key:"name",props:x,class:"wrap-column"},{default:l(()=>[_(r(x.row.name)+" ",1),a(n).screen.gt.sm?y("",!0):(p(),w(Y,{key:0},[x.row.description?(p(),w("div",Ku,[e(S,{name:"description"}),_(" "+r(x.row.description),1)])):y("",!0)],64))]),_:2},1032,["props"]),e(L,{key:"description",props:x,class:"wrap-column"},{default:l(()=>[_(r(x.row.description),1)]),_:2},1032,["props"]),e(L,{key:"action",props:x},{default:l(()=>[t("div",Yu,[U.$can("admin.operational-cost-category.add")||U.$can("admin.operational-cost-category.edit")||U.$can("admin.operational-cost-category.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[3]||(h[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[U.$can("admin.operational-cost-category.add")?ee((p(),O(le,{key:0,clickable:"",onClick:J(I=>a(Z).get(U.route("admin.operational-cost-category.duplicate",x.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>h[5]||(h[5]=[_("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),U.$can("admin.operational-cost-category.edit")?ee((p(),O(le,{key:1,clickable:"",onClick:J(I=>a(Z).get(U.route("admin.operational-cost-category.edit",x.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>h[6]||(h[6]=[_("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),U.$can("admin.operational-cost-category.delete")?ee((p(),O(le,{key:2,onClick:J(I=>k(x.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>h[7]||(h[7]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Fu,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":h[2]||(h[2]=x=>m.search=x),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Qu=Object.freeze(Object.defineProperty({__proto__:null,default:Wu},Symbol.toStringTag,{value:"Module"})),Ju={class:"q-gutter-sm"},Gu={class:"col col-md-6 q-pa-xs"},Xu={class:"row"},Zu={class:"detail"},em={key:0},tm={key:1},am={key:2},lm={key:3},om={colspan:"3",class:"bg-white"},ol="Rincian Biaya Operasional",nm={__name:"Detail",setup(u){const n=fe();return(d,o)=>{const s=W("i-head"),i=W("authenticated-layout");return p(),w(Y,null,[e(s,{title:ol}),e(i,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Ju,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.operational-cost.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(ol))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Gu,[t("div",Xu,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[21]||(o[21]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",Zu,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(Ht)(a(n).props.data.date)),1)]),a(n).props.data.finance_account?(p(),w("tr",em,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[_(r(a(n).props.data.finance_account.name)+" ",1),a(n).props.data.finance_account.type==="bank"?(p(),w(Y,{key:0},[_(" Rek "+r(a(n).props.data.finance_account.bank)+" an "+r(a(n).props.data.finance_account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),_(" "+r(a(n).props.data.finance_account.number),1)],64)):y("",!0)])])):y("",!0),a(n).props.data.category?(p(),w("tr",tm,[o[8]||(o[8]=t("td",null,"Kategori",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.category.name),1)])):y("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Deskripsi",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.description),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Jumlah",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(n).props.data.amount)),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(p(),w("tr",am,[o[16]||(o[16]=t("td",null,"Dibuat",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):y("",!0),a(n).props.data.updater?(p(),w("tr",lm,[o[18]||(o[18]=t("td",null,"Diperbarui",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):y("",!0),a(n).props.data.image_path?(p(),w(Y,{key:4},[o[20]||(o[20]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",om,[e(Yt,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:je([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):y("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},sm=Object.freeze(Object.defineProperty({__proto__:null,default:nm},Symbol.toStringTag,{value:"Module"})),rm={class:"row items-center justify-end"},im={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(u,{emit:n}){const d=u,o=n,s=V(""),i=V(""),v=f=>{let b=!0;const k=d.minDate?st.formatDate(d.minDate,"YYYY/MM/DD"):null,g=d.maxDate?st.formatDate(d.maxDate,"YYYY/MM/DD"):null;return k&&(b=b&&st.isBetweenDates(f,k,"2999/01/01",{inclusiveFrom:!0})),g&&(b=b&&st.isBetweenDates(f,"1900/01/01",g,{inclusiveTo:!0})),b},c=G(()=>[f=>!!f||"Tanggal harus diisi",f=>{const b=st.extractDate(f,d.displayFormat);if(!b)return"Format tanggal tidak valid";b.setHours(0,0,0,0);const k=d.minDate?new Date(d.minDate):null;k&&k.setHours(0,0,0,0);const g=d.maxDate?new Date(d.maxDate):null;return g&&g.setHours(0,0,0,0),k&&b<k?`Tanggal tidak boleh kurang dari ${st.formatDate(d.minDate,d.displayFormat)}`:g&&b>g?`Tanggal tidak boleh lebih dari ${st.formatDate(d.maxDate,d.displayFormat)}`:(o("update:modelValue",b),!0)}]);Ee(()=>d.modelValue,f=>{f instanceof Date?(i.value=st.formatDate(f,"YYYY/MM/DD"),s.value=st.formatDate(f,d.displayFormat)):(i.value="",s.value="")},{immediate:!0});const m=f=>{const b=f!==null?new Date(f):null;o("update:modelValue",b),s.value=b?st.formatDate(b,d.displayFormat):null};return(f,b)=>(p(),O(oe,{modelValue:s.value,"onUpdate:modelValue":b[1]||(b[1]=k=>s.value=k),label:d.label,readonly:d.readonly,disable:d.disable,error:d.error,"error-message":d.errorMessage,mask:d.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:c.value},{append:l(()=>[e(A,{icon:"event",disable:d.disable||d.readonly,flat:"",rounded:"",dense:""},{default:l(()=>[e(_n,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(yn,{modelValue:i.value,"onUpdate:modelValue":[b[0]||(b[0]=k=>i.value=k),m],options:v},{default:l(()=>[t("div",rm,[ee(e(A,{label:"Close",color:"primary",flat:""},null,512),[[ue]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},$a=_t(im,[["__scopeId","data-v-b418ccfb"]]);function eo(u,n=!1){const d=u.map(v=>({value:v.id,label:v.name})),o=n?[{value:"all",label:"Semua"},...d]:d,s=V([...o]);return{filteredCostCategories:s,filterCostCategory:(v,c)=>{const m=v.toLowerCase();c(()=>{s.value=o.filter(f=>f.label.toLowerCase().includes(m))})},costCategoryOptions:o}}const dm={class:"q-gutter-sm"},um={class:"col col-md-6 q-pa-xs"},mm={__name:"Editor",setup(u){var k;const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=eo(n.props.categories),s=n.props.finance_accounts.map(g=>({label:g.name,value:g.id})),i=V(o),v=V([...i.value]),c=ze({id:n.props.data.id,finance_account_id:n.props.data.finance_account_id??null,category_id:n.props.data.category_id??null,date:new Date(n.props.data.date),description:n.props.data.description,notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((k=n.props.data)==null?void 0:k.image_path)??null,image:null}),m=()=>{Jt(c,{date:"YYYY-MM-DD"}),Ze({form:c,url:route("admin.operational-cost.save")})},f=(g,$)=>{$(()=>{v.value=i.value.filter(U=>U.label.toLowerCase().includes(g.toLowerCase()))})},b=()=>{c.image_path=null};return(g,$)=>{const U=W("i-head"),h=W("authenticated-layout");return p(),w(Y,null,[e(U,{title:d}),e(h,null,{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",dm,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:$[0]||($[0]=D=>g.$inertia.get(g.route("admin.operational-cost.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",um,[e(Fe,{class:"row",onSubmit:J(m,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":$[1]||($[1]=D=>a(c).id=D)},null,512),[[dt,a(c).id]]),e(de,{autofocus:"",modelValue:a(c).category_id,"onUpdate:modelValue":$[2]||($[2]=D=>a(c).category_id=D),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:v.value,"map-options":"","emit-value":"",onFilter:f,error:!!a(c).errors.category_id,disable:a(c).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(le,null,{default:l(()=>[e(M,null,{default:l(()=>$[10]||($[10]=[_("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e($a,{modelValue:a(c).date,"onUpdate:modelValue":$[3]||($[3]=D=>a(c).date=D),label:"Tanggal",error:!!a(c).errors.date,disable:a(c).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(oe,{modelValue:a(c).description,"onUpdate:modelValue":$[4]||($[4]=D=>a(c).description=D),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!a(c).errors.description,disable:a(c).processing,"error-message":a(c).errors.description,rules:[D=>D&&D.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Ue,{modelValue:a(c).amount,"onUpdate:modelValue":$[5]||($[5]=D=>a(c).amount=D),label:"Jumlah",lazyRules:"",disable:a(c).processing,error:!!a(c).errors.amount,errorMessage:a(c).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(de,{class:"custom-select",modelValue:a(c).finance_account_id,"onUpdate:modelValue":$[6]||($[6]=D=>a(c).finance_account_id=D),label:"Sumber Dana",options:a(s),"map-options":"","emit-value":"",clearable:"",errorMessage:a(c).errors.finance_account_id,error:!!a(c).errors.finance_account_id,disable:a(c).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(oe,{modelValue:a(c).notes,"onUpdate:modelValue":$[7]||($[7]=D=>a(c).notes=D),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(c).processing,error:!!a(c).errors.notes,"error-message":a(c).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ha,{modelValue:a(c).image,"onUpdate:modelValue":$[8]||($[8]=D=>a(c).image=D),"initial-image-path":a(c).image_path,disabled:a(c).processing,error:!!a(c).errors.image||!!a(c).errors.image_path,"error-message":a(c).errors.image||a(c).errors.image_path,onImageCleared:b},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(c).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(c).processing,onClick:$[9]||($[9]=D=>a(Z).get(g.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},cm=Object.freeze(Object.defineProperty({__proto__:null,default:mm},Symbol.toStringTag,{value:"Module"})),pm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},fm={class:"q-pa-xs"},gm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},bm={key:0},vm={key:1},_m={key:0},ym={class:"flex justify-end no-wrap"},nl="Biaya Operasional",km={__name:"Index",setup(u){const n=fe(),d=$e(),o=V(!1),s=V(null),i=V(null),v=Ke(i),c=V(null),m=V(!1),f=V([]),b=V(!0),k=new Date().getFullYear(),g=new Date().getMonth()+1,$=[{label:"Semua Tahun",value:null},{label:`${k}`,value:k},...At(k-2,k-1).reverse()],U=[{value:null,label:"Semua Bulan"},...jt()],{costCategoryOptions:h}=eo(n.props.categories),D=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...h],{accountOptions:C}=kn(n.props.finance_accounts),x=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...C],I=Pe({search:"",finance_account_id:"all",category_id:"all",year:k,month:g,...Re()}),z=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),P=[{name:"id",label:d.screen.lt.md?"Item":"ID",field:"id",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"account_id",label:"Akun",field:"account_id",align:"left"},{name:"category_id",label:"Kategori",field:"category_id",align:"left"},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{E()});const j=Q=>at({message:`Hapus Biaya ${Q.description}?`,url:route("admin.operational-cost.delete",Q.id),fetchItemsCallback:E,loading:b}),E=(Q=null)=>{Ie({pagination:z,filter:I,props:Q,rows:f,url:route("admin.operational-cost.data"),loading:b,tableRef:s})},B=()=>{E()},N=G(()=>d.screen.gt.sm?P:P.filter(Q=>Q.name==="id"||Q.name==="action"));Ee(()=>I.year,Q=>{Q===null&&(I.month=null)});const q=Q=>{c.value=Q,m.value=!0};return(Q,te)=>{const T=W("i-head"),R=W("authenticated-layout");return p(),w(Y,null,[e(T,{title:nl}),e(R,null,Le({title:l(()=>[_(r(nl))]),"right-button":l(()=>[e(A,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:te[0]||(te[0]=X=>o.value=!o.value)},null,8,["icon"]),Q.$can("admin.operational-cost.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:te[1]||(te[1]=X=>a(Z).get(Q.route("admin.operational-cost.add")))})):y("",!0)]),default:l(()=>[t("div",fm,[e(Ce,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:z.value,"onUpdate:pagination":te[8]||(te[8]=X=>z.value=X),filter:I.search,loading:b.value,columns:N.value,rows:f.value,"rows-per-page-options":[10,25,50],style:je({height:a(v)}),onRequest:E,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:X,message:ge,filter:ne})=>[t("div",gm,[t("span",null,r(ge)+" "+r(ne?" with term "+ne:""),1)])]),body:l(X=>[e(qe,{props:X,class:"cursor-pointer",onClick:J(ge=>a(Z).get(Q.route("admin.operational-cost.detail",{id:X.row.id})),["stop"])},{default:l(()=>[e(L,{key:"id",props:X,class:"wrap-column"},{default:l(()=>[a(d).screen.gt.sm?y("",!0):(p(),w(Y,{key:0},[_(" ID: ")],64)),_(" "+r(X.row.id)+" ",1),a(d).screen.gt.sm?y("",!0):(p(),w(Y,{key:1},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+r(a(Ht)(X.row.date)),1)]),X.row.finance_account?(p(),w("div",bm,[e(S,{name:"wallet",class:"inline-icon"}),_(" "+r(X.row.finance_account.name),1)])):y("",!0),X.row.category?(p(),w("div",vm,[e(S,{name:"category",class:"inline-icon"}),_(" "+r(X.row.category.name),1)])):y("",!0),e(we,{icon:"description",text:X.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+r(a(K)(X.row.amount)),1)]),e(we,{icon:"notes",text:X.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(L,{key:"date",props:X,class:"wrap-column"},{default:l(()=>[_(r(a(Ht)(X.row.date)),1)]),_:2},1032,["props"]),e(L,{key:"account_id",props:X,class:"wrap-column"},{default:l(()=>[_(r(X.row.finance_account?X.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(L,{key:"category_id",props:X},{default:l(()=>[X.row.category?(p(),w("div",_m,r(X.row.category.name),1)):y("",!0)]),_:2},1032,["props"]),e(L,{key:"description",props:X},{default:l(()=>[e(we,{text:X.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"amount",props:X},{default:l(()=>[_(r(a(K)(X.row.amount)),1)]),_:2},1032,["props"]),e(L,{key:"notes",props:X},{default:l(()=>[e(we,{text:X.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"action",props:X},{default:l(()=>[t("div",ym,[e(A,{icon:"image",color:"primary",dense:"",flat:"",disable:X.row.image_path===null||X.row.image_path==="",onClick:J(ge=>q(X.row.image_path),["stop"])},{default:l(()=>[X.row.image_path!=null?(p(),O(sa,{key:0},{default:l(()=>te[10]||(te[10]=[_(" Lihat Bukti ")])),_:1})):y("",!0)]),_:2},1032,["disable","onClick"]),Q.$can("admin.operational-cost.add")||Q.$can("admin.operational-cost.edit")||Q.$can("admin.operational-cost.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:te[7]||(te[7]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[Q.$can("admin.operational-cost.add")?ee((p(),O(le,{key:0,clickable:"",onClick:J(ge=>a(Z).get(Q.route("admin.operational-cost.duplicate",X.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>te[11]||(te[11]=[_(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),Q.$can("admin.operational-cost.edit")?ee((p(),O(le,{key:1,clickable:"",onClick:J(ge=>a(Z).get(Q.route("admin.operational-cost.edit",X.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>te[12]||(te[12]=[_("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),Q.$can("admin.operational-cost.delete")?ee((p(),O(le,{key:2,onClick:J(ge=>j(X.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>te[13]||(te[13]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(ra,{modelValue:m.value,"onUpdate:modelValue":te[9]||(te[9]=X=>m.value=X),imageUrl:`/${c.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:i},{default:l(()=>[t("div",pm,[e(de,{modelValue:I.year,"onUpdate:modelValue":[te[2]||(te[2]=X=>I.year=X),B],options:$,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:I.month,"onUpdate:modelValue":[te[3]||(te[3]=X=>I.month=X),B],options:U,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:I.year===null},null,8,["modelValue","disable"]),e(de,{modelValue:I.category_id,"onUpdate:modelValue":[te[4]||(te[4]=X=>I.category_id=X),B],options:D,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:I.finance_account_id,"onUpdate:modelValue":[te[5]||(te[5]=X=>I.finance_account_id=X),B],options:x,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:I.search,"onUpdate:modelValue":te[6]||(te[6]=X=>I.search=X),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},wm=Object.freeze(Object.defineProperty({__proto__:null,default:km},Symbol.toStringTag,{value:"Module"})),hm={class:"q-gutter-sm"},$m={class:"col col-md-6 q-pa-xs"},xm={__name:"Editor",setup(u){const n=$e(),d=fe(),o=(d.props.data.id?"Edit":"Tambah")+" Kategori Produk",s=ze({id:d.props.data.id,name:d.props.data.name,description:d.props.data.description}),i=()=>Ze({form:s,url:route("admin.product-category.save")});return(v,c)=>{const m=W("i-head"),f=W("authenticated-layout");return p(),w(Y,null,[e(m,{title:o}),e(f,{"show-drawer-button":!a(n).screen.lt.md},Le({title:l(()=>[_(r(o))]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",$m,[e(Fe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=b=>a(s).id=b)},null,512),[[dt,a(s).id]]),e(oe,{autofocus:"",modelValue:a(s).name,"onUpdate:modelValue":c[2]||(c[2]=b=>a(s).name=b),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(s).errors.name,disable:a(s).processing,"error-message":a(s).errors.name,rules:[b=>b&&b.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(s).description,"onUpdate:modelValue":c[3]||(c[3]=b=>a(s).description=b),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.description,"error-message":a(s).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing,loading:a(s).processing},null,8,["disable","loading"]),e(A,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:c[4]||(c[4]=b=>a(s).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(n).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",hm,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=b=>v.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},Sm=Object.freeze(Object.defineProperty({__proto__:null,default:xm},Symbol.toStringTag,{value:"Module"})),Vm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},qm={class:"q-pa-xs"},Cm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Tm={key:0,class:"text-grey-8"},Pm={class:"flex justify-end"},sl="Kategori Produk",Om={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=Pe({search:"",...Re()}),f=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),b=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{g()});const k=U=>at({message:`Hapus Kategori ${U.name}?`,url:route("admin.product-category.delete",U.id),fetchItemsCallback:g,loading:s}),g=(U=null)=>{Ie({pagination:f,filter:m,props:U,rows:o,url:route("admin.product-category.data"),loading:s,tableRef:i})},$=G(()=>n.screen.gt.sm?b:b.filter(U=>U.name==="name"||U.name==="action"));return(U,h)=>{const D=W("i-head"),C=W("authenticated-layout");return p(),w(Y,null,[e(D,{title:sl}),e(C,null,Le({title:l(()=>[_(r(sl))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=x=>d.value=!d.value)},null,8,["icon"]),U.$can("admin.product-category.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=x=>a(Z).get(U.route("admin.product-category.add")))})):y("",!0)]),default:l(()=>[t("div",qm,[e(Ce,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:f.value,"onUpdate:pagination":h[4]||(h[4]=x=>f.value=x),filter:m.search,loading:s.value,columns:$.value,rows:o.value,"rows-per-page-options":[10,25,50],style:je({height:a(c)}),onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:I,filter:z})=>[t("div",Cm,[t("span",null,r(I)+" "+r(z?" with term "+z:""),1)])]),body:l(x=>[e(qe,{props:x},{default:l(()=>[e(L,{key:"name",props:x,class:"wrap-column"},{default:l(()=>[_(r(x.row.name)+" ",1),a(n).screen.gt.sm?y("",!0):(p(),w(Y,{key:0},[x.row.description?(p(),w("div",Tm,[e(S,{name:"description"}),_(" "+r(x.row.description),1)])):y("",!0)],64))]),_:2},1032,["props"]),e(L,{key:"description",props:x,class:"wrap-column"},{default:l(()=>[_(r(x.row.description),1)]),_:2},1032,["props"]),e(L,{key:"action",props:x},{default:l(()=>[t("div",Pm,[U.$can("admin.product-category.add")||U.$can("admin.product-category.edit")||U.$can("admin.product-category.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[3]||(h[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[U.$can("admin.product-category.add")?ee((p(),O(le,{key:0,clickable:"",onClick:J(I=>a(Z).get(U.route("admin.product-category.duplicate",x.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>h[5]||(h[5]=[_("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),U.$can("admin.product-category.edit")?ee((p(),O(le,{key:1,clickable:"",onClick:J(I=>a(Z).get(U.route("admin.product-category.edit",x.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>h[6]||(h[6]=[_("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),U.$can("admin.product-category.delete")?ee((p(),O(le,{key:2,onClick:J(I=>k(x.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>h[7]||(h[7]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Vm,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":h[2]||(h[2]=x=>m.search=x),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Rm=Object.freeze(Object.defineProperty({__proto__:null,default:Om},Symbol.toStringTag,{value:"Module"})),Im={class:"detail"},Dm={key:0},Um={key:1},Am={key:2},jm={class:"detail"},Em={class:"detail"},Mm={key:0},Nm={key:0},Bm={key:0},zm={key:0},Fm={class:"detail"},to={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(u){const n=u;$e();const d=o=>`${o>0?K((o-n.product.cost)/o*100,2):0}%`;return(o,s)=>{const i=W("i-link");return p(),w("div",null,[s[42]||(s[42]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",Im,[t("tbody",null,[t("tr",null,[s[0]||(s[0]=t("td",{style:{width:"120px"}},"ID",-1)),s[1]||(s[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.product.formatted_id),1)]),t("tr",null,[s[2]||(s[2]=t("td",null,"Nama Produk",-1)),s[3]||(s[3]=t("td",null,":",-1)),t("td",null,r(u.product.name),1)]),t("tr",null,[s[4]||(s[4]=t("td",null,"Barcode",-1)),s[5]||(s[5]=t("td",null,":",-1)),t("td",null,r(u.product.barcode),1)]),t("tr",null,[s[6]||(s[6]=t("td",null,"Jenis Produk",-1)),s[7]||(s[7]=t("td",null,":",-1)),t("td",null,r(o.$CONSTANTS.PRODUCT_TYPES[u.product.type]),1)]),t("tr",null,[s[8]||(s[8]=t("td",null,"Kategori",-1)),s[9]||(s[9]=t("td",null,":",-1)),t("td",null,r(u.product.category?u.product.category.name:"--Tidak memiliki kategori--"),1)]),o.$can("admin.product:view-supplier")?(p(),w("tr",Dm,[s[10]||(s[10]=t("td",null,"Supplier",-1)),s[11]||(s[11]=t("td",null,":",-1)),t("td",null,[u.product.supplier?(p(),O(i,{key:0,href:o.route("admin.supplier.detail",{id:u.product.supplier.id})},{default:l(()=>[_(r(u.product.supplier.name),1)]),_:1},8,["href"])):(p(),w(Y,{key:1},[_(r("--Tidak memiliki supplier--"))],64))])])):y("",!0),t("tr",null,[s[12]||(s[12]=t("td",null,"Status",-1)),s[13]||(s[13]=t("td",null,":",-1)),t("td",null,r(u.product.active?"Aktif":"Tidak Aktif"),1)]),u.product.created_at?(p(),w("tr",Um,[s[15]||(s[15]=t("td",null,"Dibuat Oleh",-1)),s[16]||(s[16]=t("td",null,":",-1)),t("td",null,[u.product.creator?(p(),w(Y,{key:0},[e(i,{href:o.route("admin.user.detail",{id:u.product.creator})},{default:l(()=>[_(r(u.product.creator.username),1)]),_:1},8,["href"]),s[14]||(s[14]=_(" - "))],64)):y("",!0),_(" "+r(a(ve)(u.product.created_at)),1)])])):y("",!0),u.product.updater?(p(),w("tr",Am,[s[18]||(s[18]=t("td",null,"Diperbarui oleh",-1)),s[19]||(s[19]=t("td",null,":",-1)),t("td",null,[u.product.updater?(p(),w(Y,{key:0},[e(i,{href:o.route("admin.user.detail",{id:u.product.updater})},{default:l(()=>[_(r(u.product.updater.username),1)]),_:1},8,["href"]),s[17]||(s[17]=_(" - "))],64)):y("",!0),_(" "+r(a(ve)(u.product.updated_at)),1)])])):y("",!0)])]),s[43]||(s[43]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",jm,[t("tbody",null,[t("tr",null,[s[20]||(s[20]=t("td",{style:{width:"120px"}},"Stok",-1)),s[21]||(s[21]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(K)(u.product.stock))+" "+r(u.product.uom),1)]),t("tr",null,[s[22]||(s[22]=t("td",null,"Stok Minimum",-1)),s[23]||(s[23]=t("td",null,":",-1)),t("td",null,r(a(K)(u.product.min_stock))+" "+r(u.product.uom),1)]),t("tr",null,[s[24]||(s[24]=t("td",null,"Stok Maksimum",-1)),s[25]||(s[25]=t("td",null,":",-1)),t("td",null,r(a(K)(u.product.max_stock))+" "+r(u.product.uom),1)]),t("tr",null,[s[26]||(s[26]=t("td",null,"Barcode",-1)),s[27]||(s[27]=t("td",null,":",-1)),t("td",null,r(u.product.barcode),1)])])]),s[44]||(s[44]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",Em,[t("tbody",null,[t("tr",null,[s[28]||(s[28]=t("td",null,"Opsi Harga",-1)),s[29]||(s[29]=t("td",null,":",-1)),t("td",null,r(u.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),o.$can("admin.product:view-cost")?(p(),w("tr",Mm,[s[30]||(s[30]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),s[31]||(s[31]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(a(K)(u.product.cost)),1)])):y("",!0),t("tr",null,[s[32]||(s[32]=t("td",null,"Harga Eceran",-1)),s[33]||(s[33]=t("td",null,":",-1)),t("td",null,[_(" Rp. "+r(a(K)(u.product.price))+" ",1),o.$can("admin.product:view-cost")?(p(),w("span",Nm," ("+r(d(u.product.price))+") ",1)):y("",!0)])]),t("tr",null,[s[34]||(s[34]=t("td",null,"Harga Partai",-1)),s[35]||(s[35]=t("td",null,":",-1)),t("td",null,[_(" Rp. "+r(a(K)(u.product.price_2))+" ",1),o.$can("admin.product:view-cost")?(p(),w("span",Bm," ("+r(d(u.product.price_2))+") ",1)):y("",!0)])]),t("tr",null,[s[36]||(s[36]=t("td",null,"Harga Grosir",-1)),s[37]||(s[37]=t("td",null,":",-1)),t("td",null,[_(" Rp. "+r(a(K)(u.product.price_3))+" ",1),o.$can("admin.product:view-cost")?(p(),w("span",zm," ("+r(d(u.product.price_3))+") ",1)):y("",!0)])])])]),s[45]||(s[45]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",Fm,[t("tbody",null,[t("tr",null,[s[38]||(s[38]=t("td",{style:{width:"120px"}},"Deskirpsi",-1)),s[39]||(s[39]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.product.description),1)]),t("tr",null,[s[40]||(s[40]=t("td",null,"Catatan",-1)),s[41]||(s[41]=t("td",null,":",-1)),t("td",null,r(u.product.notes),1)])])])])}}},Lm=Object.freeze(Object.defineProperty({__proto__:null,default:to},Symbol.toStringTag,{value:"Module"})),Hm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Km={key:0},ao={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(u){const n=u,d=$e(),o=V([]),s=V(!0),i=Pe({...Re()}),v=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let c=[{name:"id",label:d.screen.lt.sm?"Item":"#",field:"id",align:"left",sortable:!0},{name:"created_at",label:"Waktu",field:"created_at",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"quantity_before",label:"Qty Awal",field:"quantity_before",align:"right"},{name:"quantity_after",label:"Qty Akhir",field:"quantity_after",align:"right"},{name:"quantity",label:"Selisih",field:"quantity",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{m()});const m=(b=null)=>Ie({pagination:v,filter:i,props:b,rows:o,url:route("admin.stock-movement.data",{product_id:n.productId}),loading:s}),f=G(()=>d.screen.gt.sm?c:c.filter(b=>b.name==="id"||b.name==="quantity"));return(b,k)=>(p(),O(Ce,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:v.value,"onUpdate:pagination":k[0]||(k[0]=g=>v.value=g),filter:i.search,loading:s.value,columns:f.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:m,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:$,filter:U})=>[t("div",Hm,[t("span",null,r($)+" "+r(U?" with term "+U:""),1)])]),body:l(g=>[e(qe,{props:g},{default:l(()=>[e(L,{key:"id",props:g},{default:l(()=>[t("div",null,[a(d).screen.lt.sm?(p(),w(Y,{key:0},[t("div",null,[e(ut,null,{default:l(()=>[_(r(b.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[g.row.ref_type]),1)]),_:2},1024)]),e(S,{class:"inline-icon",name:"tag"})],64)):y("",!0),_(" "+r(g.row.formatted_id),1)]),a(d).screen.lt.sm?(p(),w(Y,{key:0},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+r(a(ve)(g.row.created_at)),1)]),t("div",{class:xe(g.row.quantity>0?"text-positive":"text-negative")},[e(S,{class:"inline-icon",name:"compare_arrows"}),_(" "+r(a(K)(g.row.quantity_before))+" "+r(g.row.uom)+" → "+r(a(K)(g.row.quantity_after))+" "+r(g.row.uom),1)],2),e(we,{text:g.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):y("",!0)]),_:2},1032,["props"]),e(L,{key:"created_at",props:g},{default:l(()=>[_(r(a(ve)(g.row.created_at)),1)]),_:2},1032,["props"]),e(L,{key:"type",props:g},{default:l(()=>[_(r(b.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[g.row.ref_type])+" ",1),g.row.ref?(p(),w("span",Km,r(g.row.ref),1)):y("",!0)]),_:2},1032,["props"]),e(L,{key:"quantity_before",props:g},{default:l(()=>[_(r(a(K)(g.row.quantity_before))+" "+r(g.row.uom),1)]),_:2},1032,["props"]),e(L,{key:"quantity_after",props:g},{default:l(()=>[_(r(a(K)(g.row.quantity_after))+" "+r(g.row.uom),1)]),_:2},1032,["props"]),e(L,{key:"quantity",props:g,class:xe(g.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[_(r(a(K)(g.row.quantity))+" "+r(g.row.uom),1)]),_:2},1032,["props","class"]),e(L,{key:"notes",props:g},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ym=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"})),Wm={class:"q-gutter-sm"},Qm={class:"q-gutter-sm"},Jm={class:"row justify-center"},Gm={class:"col col-lg-6 q-pa-xs"},Xm={class:"row"},Zm={__name:"Detail",setup(u){const n=fe(),d=`Rincian Produk #${n.props.data.id}`,o=V("main");return(s,i)=>{const v=W("i-head"),c=W("authenticated-layout");return p(),w(Y,null,[e(v,{title:d}),e(c,{"show-drawer-button":!0},{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",Wm,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=m=>s.$goBack())})])]),"right-button":l(()=>[t("div",Qm,[s.$can("admin.product.edit")?(p(),O(A,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=m=>a(Z).get(s.route("admin.product.edit",{id:a(n).props.data.id})))})):y("",!0)])]),default:l(()=>[t("div",Jm,[t("div",Gm,[t("div",Xm,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ot,{modelValue:o.value,"onUpdate:modelValue":i[2]||(i[2]=m=>o.value=m),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(lt,{name:"main",label:"Info Utama"}),e(lt,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:o.value,"onUpdate:modelValue":i[3]||(i[3]=m=>o.value=m),animated:""},{default:l(()=>[e(ot,{name:"main"},{default:l(()=>[e(to,{product:a(n).props.data},null,8,["product"])]),_:1}),e(ot,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(ao,{"product-id":a(n).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},ec=Object.freeze(Object.defineProperty({__proto__:null,default:Zm},Symbol.toStringTag,{value:"Module"}));function xa(u,n=!1){const d=u.map(v=>({value:v.id,label:v.name})),o=n?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...d]:d,s=V([...o]);return{filteredCategories:s,filterCategories:(v,c)=>{const m=v.toLowerCase();c(()=>{s.value=o.filter(f=>f.label.toLowerCase().includes(m))})},categories:o}}function Sa(u,n=!1){const d=u.map(v=>({value:v.id,label:"#"+v.id+" - "+v.name})),o=n?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...d]:d,s=V([...o]);return{filteredSuppliers:s,filterSupplierFn:(v,c)=>{const m=v.toLowerCase();c(()=>{s.value=o.filter(f=>f.label.toLowerCase().includes(m))})},suppliers:o}}const tc={class:"q-gutter-sm"},ac={class:"col col-md-6 q-pa-xs"},lc={__name:"Editor",setup(u){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Produk",o=tt(window.CONSTANTS.PRODUCT_TYPES),s=ze({id:n.props.data.id,category_id:n.props.data.category_id,supplier_id:n.props.data.supplier_id,type:n.props.data.type||"",name:n.props.data.name||"",barcode:n.props.data.barcode||"",description:n.props.data.description||"",stock:parseFloat(n.props.data.stock)||0,min_stock:parseFloat(n.props.data.min_stock)||0,max_stock:parseFloat(n.props.data.max_stock)||0,uom:n.props.data.uom||"",cost:parseFloat(n.props.data.cost)||0,price:parseFloat(n.props.data.price)||0,price_2:parseFloat(n.props.data.price_2)||0,price_3:parseFloat(n.props.data.price_3)||0,active:!!n.props.data.active,price_editable:!!n.props.data.price_editable,notes:n.props.data.notes||""}),i=()=>Ze({form:s,url:route("admin.product.save")}),{filteredCategories:v,filterCategories:c}=xa(n.props.categories),{filteredSuppliers:m,filterSuppliers:f}=Sa(n.props.suppliers),b=G(()=>s.price>0?(s.price-s.cost)/s.price*100:0);return(k,g)=>{const $=W("i-head"),U=W("authenticated-layout");return p(),w(Y,null,[e($,{title:d}),e(U,{"show-drawer-button":!0},{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",tc,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=h=>k.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ac,[e(Fe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=h=>a(s).id=h)},null,512),[[dt,a(s).id]]),g[23]||(g[23]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(de,{autofocus:"",modelValue:a(s).type,"onUpdate:modelValue":g[2]||(g[2]=h=>a(s).type=h),class:"custom-select",options:a(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["modelValue","options"]),e(oe,{modelValue:a(s).name,"onUpdate:modelValue":g[3]||(g[3]=h=>a(s).name=h),modelModifiers:{trim:!0},label:"Nama Produk","lazy-rules":"",error:!!a(s).errors.name,disable:a(s).processing,"error-message":a(s).errors.name,rules:[h=>h&&h.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(s).description,"onUpdate:modelValue":g[4]||(g[4]=h=>a(s).description=h),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.description,"error-message":a(s).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(s).category_id,"onUpdate:modelValue":g[5]||(g[5]=h=>a(s).category_id=h),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:a(v),"map-options":"","emit-value":"",onFilter:a(c),"option-label":"label","option-value":"value",error:!!a(s).errors.category_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(le,null,{default:l(()=>[e(M,null,{default:l(()=>g[21]||(g[21]=[_("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),k.$can("admin.product:view-supplier")?(p(),O(de,{key:0,modelValue:a(s).supplier_id,"onUpdate:modelValue":g[6]||(g[6]=h=>a(s).supplier_id=h),label:"Supplier","use-input":"","input-debounce":"300",clearable:"",options:a(m),"map-options":"","emit-value":"",onFilter:a(f),"option-label":"label","option-value":"value",error:!!a(s).errors.supplier_id,disable:a(s).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(le,null,{default:l(()=>[e(M,null,{default:l(()=>g[22]||(g[22]=[_("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):y("",!0),e(qt,{modelValue:a(s).active,"onUpdate:modelValue":g[7]||(g[7]=h=>a(s).active=h),disable:a(s).processing,label:"Aktif"},null,8,["modelValue","disable"]),g[24]||(g[24]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),e(oe,{modelValue:a(s).barcode,"onUpdate:modelValue":g[8]||(g[8]=h=>a(s).barcode=h),modelModifiers:{trim:!0},label:"Barcode","lazy-rules":"",error:!!a(s).errors.barcode,disable:a(s).processing,"error-message":a(s).errors.barcode,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(oe,{modelValue:a(s).uom,"onUpdate:modelValue":g[9]||(g[9]=h=>a(s).uom=h),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!a(s).errors.uom,disable:a(s).processing,"error-message":a(s).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(Ue,{modelValue:a(s).stock,"onUpdate:modelValue":g[10]||(g[10]=h=>a(s).stock=h),label:"Stok",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.stock,errorMessage:a(s).errors.stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Ue,{modelValue:a(s).min_stock,"onUpdate:modelValue":g[11]||(g[11]=h=>a(s).min_stock=h),label:"Stok Minimum",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.min_stock,errorMessage:a(s).errors.min_stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Ue,{modelValue:a(s).max_stock,"onUpdate:modelValue":g[12]||(g[12]=h=>a(s).max_stock=h),label:"Stok Maksimum",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.max_stock,errorMessage:a(s).errors.max_stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),g[25]||(g[25]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Harga",-1)),e(qt,{modelValue:a(s).price_editable,"onUpdate:modelValue":g[13]||(g[13]=h=>a(s).price_editable=h),disable:a(s).processing,label:"Harga bisa diubah saat penjualan"},null,8,["modelValue","disable"]),k.$can("admin.product:view-cost")?(p(),O(Ue,{key:1,modelValue:a(s).cost,"onUpdate:modelValue":g[14]||(g[14]=h=>a(s).cost=h),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.cost,errorMessage:a(s).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):y("",!0),e(Ue,{modelValue:a(s).price,"onUpdate:modelValue":g[15]||(g[15]=h=>a(s).price=h),label:"Harga Eceran (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price,errorMessage:a(s).errors.price,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Ue,{modelValue:a(s).price_2,"onUpdate:modelValue":g[16]||(g[16]=h=>a(s).price_2=h),label:"Harga Partai (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price_2,errorMessage:a(s).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Ue,{modelValue:a(s).price_3,"onUpdate:modelValue":g[17]||(g[17]=h=>a(s).price_3=h),label:"Harga Grosir (Rp)",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.price_3,errorMessage:a(s).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),k.$can("admin.product:view-cost")?(p(),O(Ue,{key:2,modelValue:b.value,"onUpdate:modelValue":g[18]||(g[18]=h=>b.value=h),label:"Margin (%)",lazyRules:"",disable:a(s).processing,maxDecimals:2,"hide-bottom-space":""},null,8,["modelValue","disable"])):y("",!0),g[26]||(g[26]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Lainnya",-1)),e(oe,{modelValue:a(s).notes,"onUpdate:modelValue":g[19]||(g[19]=h=>a(s).notes=h),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.notes,"error-message":a(s).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:g[20]||(g[20]=h=>k.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},oc=Object.freeze(Object.defineProperty({__proto__:null,default:lc},Symbol.toStringTag,{value:"Module"})),nc={class:"q-gutter-sm"},sc={class:"col col-md-6 q-pa-xs"},rl="Import Produk",rc={__name:"Import",setup(u){const n=ze({csv_file:null}),d=()=>{n.post(route("admin.product.import"),{onSuccess:()=>{n.reset()},onError:()=>{Be()},onFinish:()=>{n.clearErrors()}})};return(o,s)=>{const i=W("i-head"),v=W("authenticated-layout");return p(),w(Y,null,[e(i,{title:rl}),e(v,{"show-drawer-button":!0},{title:l(()=>[_(r(rl))]),"left-button":l(()=>[t("div",nc,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=c=>o.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",sc,[e(Fe,{class:"row",onSubmit:J(d,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[s[3]||(s[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),s[4]||(s[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(Wl,{modelValue:a(n).csv_file,"onUpdate:modelValue":s[1]||(s[1]=c=>a(n).csv_file=c),accept:".csv",label:"Pilih file CSV",error:!!a(n).errors.csv_file,"error-message":a(n).errors.csv_file,disable:a(n).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(n).processing||!a(n).csv_file,loading:a(n).processing},null,8,["disable","loading"]),e(A,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:s[2]||(s[2]=c=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(p(),O(Kt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[_(r(o.$page.props.flash.success),1)]),_:1})):y("",!0),o.$page.props.flash.error?(p(),O(Kt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[_(r(o.$page.props.flash.error),1)]),_:1})):y("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ic=Object.freeze(Object.defineProperty({__proto__:null,default:rc},Symbol.toStringTag,{value:"Module"})),dc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},uc={class:"q-pa-xs"},mc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},cc={key:0},pc={key:1},fc={class:"flex justify-end"},gc={key:0},bc={key:1},vc={key:0},il="Produk",_c={__name:"Index",setup(u){const n=fe(),d=V(null),o=V(null),s=Ke(o),i=V(!1),v=[...tt(window.CONSTANTS.PRODUCT_TYPES)],c=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],m=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],f=$e(),b=V(!1),k=V([]),g=V(!0),$=Pe({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...Re()}),U=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});let h=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price",label:"Harga",field:"price",align:"right"},{name:"action",align:"right"}];he(()=>{const q=new URLSearchParams(window.location.search).get("page");q&&(U.value.page=parseInt(q)),C()});const D=N=>at({message:`Hapus Produk ${N.name}?`,url:route("admin.product.delete",N.id),fetchItemsCallback:C,loading:g}),C=(N=null)=>{Ie({pagination:U,filter:$,props:N,rows:k,url:route("admin.product.data"),loading:g,tableRef:d})},x=()=>{C()},{filteredCategories:I,filterCategories:z}=xa(n.props.categories),{filteredSuppliers:P,filterSupplierFn:j}=Sa(n.props.suppliers),E=G(()=>{let N=[...h];return i.value||N.splice(2,1),f.screen.gt.sm?N:N.filter(q=>q.name==="name"||q.name==="action")}),B=N=>{Z.get(route("admin.product.detail",N.row.id))};return(N,q)=>{const Q=W("i-head"),te=W("authenticated-layout");return p(),w(Y,null,[e(Q,{title:il}),e(te,null,Le({title:l(()=>[_(r(il))]),"right-button":l(()=>[e(A,{icon:b.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:q[0]||(q[0]=T=>b.value=!b.value)},null,8,["icon"]),N.$can("admin.product.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:q[1]||(q[1]=T=>a(Z).get(N.route("admin.product.add")))})):y("",!0),N.$can("admin.product.import")||N.$can("admin.product:view-cost")?(p(),O(A,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:q[4]||(q[4]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.product.import")?ee((p(),O(le,{key:0,clickable:"",onClick:q[2]||(q[2]=T=>i.value=!i.value)},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:i.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(M,null,{default:l(()=>[_(r(i.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[se],[ue]]):y("",!0),N.$can("admin.product.import")?ee((p(),O(le,{key:1,clickable:"",onClick:q[3]||(q[3]=J(T=>a(Z).get(N.route("admin.product.import")),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"csv"})]),_:1}),e(M,null,{default:l(()=>q[13]||(q[13]=[_("Import")])),_:1})]),_:1})),[[se],[ue]]):y("",!0)]),_:1})]),_:1})]),_:1})):y("",!0)]),default:l(()=>[t("div",uc,[e(Ce,{ref_key:"tableRef",ref:d,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:U.value,"onUpdate:pagination":q[12]||(q[12]=T=>U.value=T),filter:$.search,loading:g.value,columns:E.value,rows:k.value,"rows-per-page-options":[10,25,50],style:je({height:a(s)}),onRequest:C,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:T,message:R,filter:X})=>[t("div",mc,[t("span",null,r(R)+" "+r(X?" with term "+X:""),1)])]),header:l(T=>[e(qe,{props:T},{default:l(()=>[e(ta,{"auto-width":""}),(p(!0),w(Y,null,Ge(T.cols,R=>(p(),O(ta,{key:R.name,props:T},{default:l(()=>[_(r(R.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(T=>[e(qe,{props:T,class:xe({inactive:!T.row.active})},{default:l(()=>[e(L,{"auto-width":""},{default:l(()=>[e(A,{size:"sm",flat:"",round:"",dense:"",onClick:J(R=>T.expand=!T.expand,["prevent"]),icon:T.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(L,{key:"name",props:T,class:"wrap-column cursor-pointer",onClick:R=>B(T)},{default:l(()=>[_(r(T.row.name)+" ",1),a(f).screen.gt.sm?y("",!0):(p(),w(Y,{key:0},[T.row.type=="stocked"?(p(),w("div",cc,[e(S,{name:"cycle"}),_(" Stok: "+r(a(K)(T.row.stock))+" "+r(T.row.uom),1)])):y("",!0),i.value?(p(),w("div",pc,[e(S,{name:"money"}),_(" Modal: Rp. "+r(a(K)(T.row.cost)),1)])):y("",!0),t("div",null,[e(S,{name:"sell"}),_(" Harga: Rp. "+r(a(K)(T.row.price)),1)])],64))]),_:2},1032,["props","onClick"]),e(L,{key:"stock",props:T,class:xe(["wrap-column",{"low-stock":T.row.type=="stocked"&&(Number(T.row.stock)==0||Number(T.row.stock)<Number(T.row.min_stock)),"over-stock":T.row.type=="stocked"&&Number(T.row.max_stock)&&Number(T.row.stock)>Number(T.row.max_stock)}])},{default:l(()=>[_(r(T.row.type=="stocked"?a(K)(T.row.stock)+" "+T.row.uom:"-"),1)]),_:2},1032,["props","class"]),(p(),O(L,{key:"cost",props:T,class:"wrap-column"},{default:l(()=>[_(r(a(K)(T.row.cost)),1)]),_:2},1032,["props"])),e(L,{key:"price",props:T,class:"wrap-column"},{default:l(()=>[_(r(a(K)(T.row.price)),1)]),_:2},1032,["props"]),e(L,{key:"action",props:T},{default:l(()=>[t("div",fc,[N.$can("admin.product.add")||N.$can("admin.product.edit")||N.$can("admin.product.delete")?(p(),O(A,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:q[11]||(q[11]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"175px"}},{default:l(()=>[N.$can("admin.product.add")?ee((p(),O(le,{key:0,clickable:"",onClick:J(R=>a(Z).get(N.route("admin.product.duplicate",T.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>q[14]||(q[14]=[_("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),N.$can("admin.product.edit")?ee((p(),O(le,{key:1,clickable:"",onClick:J(R=>a(Z).get(N.route("admin.product.edit",T.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>q[15]||(q[15]=[_("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),N.$can("admin.product.delete")?ee((p(),O(le,{key:2,onClick:J(R=>D(T.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>q[16]||(q[16]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class"]),ee(e(qe,{props:T},{default:l(()=>[e(L,{colspan:"100%"},{default:l(()=>[T.row.barcode?(p(),w("div",gc,[e(S,{class:"inline-icon",name:"barcode"}),_(" Barcode: "+r(T.row.barcode),1)])):y("",!0),T.row.category_id?(p(),w("div",bc,[e(S,{name:"category",class:"inline-icon"}),_(" Kategori: "+r(T.row.category.name),1)])):y("",!0),N.$can("admin.product:view-supplier")?(p(),w(Y,{key:2},[T.row.supplier_id?(p(),w("div",vc,[e(S,{name:"local_shipping",class:"inline-icon"}),_(" Supplier: "+r(T.row.supplier.name),1)])):y("",!0)],64)):y("",!0),T.row.description?(p(),O(we,{key:3,text:T.row.description,icon:"notes","max-length":200},null,8,["text"])):y("",!0),T.row.notes?(p(),O(we,{key:4,text:T.row.notes,icon:"notes","max-length":200},null,8,["text"])):y("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[Dl,T.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[b.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:l(()=>[t("div",dc,[e(de,{modelValue:$.type,"onUpdate:modelValue":[q[5]||(q[5]=T=>$.type=T),x],class:"custom-select col-xs-4 col-sm-2",options:v,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(de,{modelValue:$.stock_status,"onUpdate:modelValue":[q[6]||(q[6]=T=>$.stock_status=T),x],class:"custom-select col-xs-4 col-sm-2",options:m,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:$.status,"onUpdate:modelValue":[q[7]||(q[7]=T=>$.status=T),x],class:"custom-select col-xs-4 col-sm-2",options:c,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:$.category_id,"onUpdate:modelValue":[q[8]||(q[8]=T=>$.category_id=T),x],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(I),"map-options":"",dense:"","emit-value":"",onFilter:a(z),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),N.$can("admin.product:view-supplier")?(p(),O(de,{key:0,modelValue:$.supplier_id,"onUpdate:modelValue":[q[9]||(q[9]=T=>$.supplier_id=T),x],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(P),"map-options":"",dense:"","emit-value":"",onFilter:a(j),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):y("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":q[10]||(q[10]=T=>$.search=T),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},yc=Object.freeze(Object.defineProperty({__proto__:null,default:_c},Symbol.toStringTag,{value:"Module"})),kc={class:"column"},wc={class:"bg-grey-2 q-pa-xs"},hc={class:"text-subtitle1 text-bold text-grey-10"},$c={class:"col-12 col-sm-6"},xc={class:"full-width"},Sc={key:1},Vc={key:0},qc={key:1},Cc={class:"col-12 col-sm-6",align:"left"},Tc={class:"full-width"};const Pc={key:1},Oc={class:"full-width",style:{"border-collapse":"collapse"}},Rc={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ic={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Dc={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Uc={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ac={key:0},jc={class:"col-12 col-sm-6"},Ec={class:"text-body2 text-grey-7 text-italic"},Mc={class:"col-12 col-sm-6"},Nc={class:"row justify-end q-gutter-y-xs"},Bc={class:"col-12 row justify-between"},zc={class:"text-subtitle2 text-bold"},lo={__name:"InvoiceTab",props:{data:Object},setup(u){const n=u;return(d,o)=>{const s=W("i-link");return p(),w("div",kc,[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",wc,[t("div",hc," INVOICE #"+r(n.data.formatted_id),1)])]),_:1}),e(Je),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",$c,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",xc,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.supplier?(p(),O(s,{key:0,href:d.route("admin.supplier.detail",{id:n.data.supplier_id})},{default:l(()=>[e(S,{class:"inline-icon",name:"person"}),_(" "+r(n.data.supplier_name),1)]),_:1},8,["href"])):(p(),w("div",Sc,[e(S,{class:"inline-icon",name:"person"}),o[0]||(o[0]=_(" Pemasok Umum "))]))])]),n.data.supplier_phone?(p(),w("tr",Vc,[t("td",null,[e(S,{class:"inline-icon",name:"phone"}),_(" "+r(n.data.supplier_phone),1)])])):y("",!0),n.data.supplier_address?(p(),w("tr",qc,[t("td",null,[e(S,{class:"inline-icon",name:"home_pin"}),_(" "+r(n.data.supplier_address),1)])])):y("",!0)])])]),t("div",Cc,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",Tc,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(d.$CONSTANTS.PURCHASE_ORDER_STATUSES[n.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[n.data.payment_status]),1)]),y("",!0),n.data.due_date?(p(),w("tr",Pc,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(Ht)(n.data.due_date)),1)])):y("",!0)])])])]),_:1}),e(Je),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",Oc,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(p(!0),w(Y,null,Ge(n.data.details,i=>(p(),w("tr",{key:i.id},[t("td",Rc,[e(s,{href:d.route("admin.product.detail",{id:i.product_id})},{default:l(()=>[_(r(i.product_name),1)]),_:2},1032,["href"])]),t("td",Ic,r(i.quantity),1),t("td",null,r(i.product_uom),1),t("td",Dc,r(a(K)(i.cost)),1),t("td",Uc,r(a(K)(i.subtotal_cost)),1)]))),128)),n.data.details.length==0?(p(),w("tr",Ac,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):y("",!0)])])]),_:1}),e(Je),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",jc,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Ec,r(n.data.notes?n.data.notes:"-"),1)]),t("div",Mc,[t("div",Nc,[t("div",Bc,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",zc,r(a(K)(n.data.grand_total)),1)])])])]),_:1})])}}},Fc=Object.freeze(Object.defineProperty({__proto__:null,default:lo},Symbol.toStringTag,{value:"Module"})),Lc={key:0,class:"text-center q-mb-md text-grey-8"},Hc={class:"text-subtitle2 text-weight-medium"},Kc={class:"text-h5 text-center text-primary q-pb-md"},Yc={class:"text-center q-mt-md"},Wc={key:0,class:"text-h6 text-negative text-weight-bold"},Qc={key:1,class:"text-h6 text-green-8 text-weight-bold"},Jc={key:2,class:"text-h6 text-positive text-weight-bold"},oo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,s=fe(),i=V(!1),v=V({method:null,amount:d.total,notes:null}),c=s.props.data.supplier,m=G(()=>[...s.props.accounts.map(h=>({label:h.type=="bank"?h.name+" - "+h.number:h.name,value:h.id}))]),f=G(()=>d.total-(v.value.amount||0)),b=G(()=>v.value.method&&typeof v.value.amount=="number"&&v.value.amount>0),k=G(()=>v.value.method?(v.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),g=G(()=>b.value&&k.value===null),$=()=>{if(!g.value)return;i.value=!0;const h={total_paid:v.value.amount,payments:[{id:v.value.method,amount:v.value.amount}],notes:v.value.notes,remaining_debt:Math.max(0,d.total-(v.value.amount||0))};o("accepted",h),i.value=!1},U=()=>{v.value.amount=d.total,v.value.method=null,v.value.notes=null};return(h,D)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":D[4]||(D[4]=C=>h.$emit("update:modelValue",C)),onBeforeShow:U},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>D[5]||(D[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(c)?(p(),w("div",Lc,[t("div",Hc,[_(r(a(c).name)+" ",1),D[6]||(D[6]=t("br",null,null,-1)),_(" Saldo: Rp. "+r(a(K)(a(c).balance)),1)])])):y("",!0),t("div",Kc," Total: Rp. "+r(a(K)(u.total)),1),e(a(de),{modelValue:v.value.method,"onUpdate:modelValue":D[0]||(D[0]=C=>v.value.method=C),options:m.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:i.value,rules:[C=>!!C||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Ue,{modelValue:v.value.amount,"onUpdate:modelValue":D[1]||(D[1]=C=>v.value.amount=C),label:"Jumlah Uang",outlined:!0,dense:"",disable:i.value,class:"q-mb-md",error:!g.value,"error-message":k.value},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:v.value.notes,"onUpdate:modelValue":D[2]||(D[2]=C=>v.value.notes=C),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:i.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Yc,[f.value>0?(p(),w("div",Wc," Sisa Tagihan: Rp. "+r(a(K)(f.value)),1)):f.value<0?(p(),w("div",Qc," Kembalian: Rp. "+r(a(K)(Math.abs(f.value))),1)):(p(),w("div",Jc," Tagihan Terbayar "))])]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(A,{flat:"",label:"Batal",color:"grey",onClick:D[3]||(D[3]=C=>h.$emit("update:modelValue",!1))}),e(A,{label:"Bayar",color:"positive",onClick:$,disable:i.value||!g.value,loading:i.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Gc=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),Xc={class:"column"},Zc={class:"full-width",style:{"border-collapse":"collapse"}},ep={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},tp={class:"row items-center q-gutter-x-sm"},ap={class:"text-weight-bold"},lp={class:"row items-center q-gutter-x-sm q-mt-xs"},op={class:"text-caption text-grey-6"},np={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},sp={class:"text-caption text-grey-6"},rp={class:"q-mt-xs"},ip={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},dp={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},up={key:0},mp={class:"q-pa-sm"},cp={class:"text-right q-pa-sm"},pp={class:"text-right q-pa-sm"},no={__name:"PaymentTab",props:{data:Object},setup(u){const n=u,d=G(()=>n.data.grand_total-n.data.total_paid),o=$e(),s=V(!1),i=()=>{s.value=!0},v=async m=>{const f={order_id:n.data.id,payments:m.payments,notes:m.notes};o.loading.show({message:"Memproses pembayaran..."});try{const b=await Qe.post(route("admin.purchase-order.add-payment"),f);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),s.value=!1,Z.visit(route("admin.purchase-order.detail",{id:n.data.id})+"?tab=payment")}catch(b){let k="Gagal memproses pembayaran.";b.response&&b.response.data&&b.response.data.message?k=b.response.data.message:b.message&&(k=b.message),o.notify({message:k,color:"negative",icon:"error"})}finally{o.loading.hide()}},c=m=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Qe.post(route("admin.purchase-order.delete-payment",{id:m.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Z.visit(route("admin.purchase-order.detail",{id:n.data.id})+"?tab=payment")}catch(f){let b="Gagal menghapus pembayaran.";f.response&&f.response.data&&f.response.data.message?b=f.response.data.message:f.message&&(b=f.message),o.notify({message:b,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(m,f)=>(p(),w(Y,null,[t("div",Xc,[e(Je),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",Zc,[f[6]||(f[6]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(p(!0),w(Y,null,Ge(n.data.payments,b=>(p(),w("tr",{key:b.id},[t("td",ep,[t("div",tp,[e(S,{name:"tag",size:"xs",color:"grey-7"}),t("span",ap,r(b.formatted_id),1)]),t("div",lp,[e(S,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",op,r(a(ve)(b.created_at)),1)]),(b.type==="transfer"||b.type==="cash")&&b.account?(p(),w("div",np,[e(S,{name:"wallet",size:"xs",color:"grey-7"}),t("span",sp,r(b.account.name),1)])):y("",!0),t("div",rp,[e(ut,{label:m.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[b.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",ip,r(a(K)(b.amount)),1),t("td",dp,[m.$can("admin.sales-order.delete-payment")?(p(),O(A,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:k=>c(b)},null,8,["onClick"])):y("",!0)])]))),128)),n.data.payments.length==0?(p(),w("tr",up,f[2]||(f[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):y("",!0)]),t("tfoot",null,[t("tr",null,[t("td",mp,[m.$can("admin.sales-order.add-payment")&&d.value>0?(p(),O(A,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:f[0]||(f[0]=J(b=>i(),["stop"]))})):y("",!0)]),f[3]||(f[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",cp,r(a(K)(n.data.total_paid)),1)]),t("tr",null,[f[4]||(f[4]=t("th",{class:"text-right q-pa-sm",colspan:"2"},"Sisa Tagihan",-1)),t("th",pp,r(a(K)(d.value)),1),f[5]||(f[5]=t("td",null,null,-1))])])])]),_:1})]),e(oo,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=b=>s.value=b),total:d.value,customer:n.data.customer,onAccepted:v},null,8,["modelValue","total","customer"])],64))}},fp=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),gp={class:"q-gutter-sm"},bp={class:"col col-lg-6 q-pa-xs",align:"center"},dl="Rincian Pembelian",vp={__name:"Detail",setup(u){const n=new URLSearchParams(window.location.search),o=fe().props.data,s=V(n.get("preview")||!1),v=V(n.get("tab")||"invoice"),c=()=>{window.print()};return(m,f)=>{const b=W("i-head"),k=W("authenticated-layout");return p(),w(Y,null,[e(b,{title:dl}),e(k,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(dl))])]),"left-button":l(()=>[t("div",gp,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=g=>m.$goBack())})])]),"right-button":l(()=>[e(A,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:f[1]||(f[1]=g=>c())}),s.value?y("",!0):(p(),O(A,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:f[2]||(f[2]=g=>a(Z).get(m.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Ve,{class:"row justify-center print-visible"},{default:l(()=>[t("div",bp,[e(ce,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Ot,{modelValue:v.value,"onUpdate:modelValue":f[3]||(f[3]=g=>v.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(lt,{name:"invoice",label:"Invoice"}),s.value?y("",!0):(p(),O(lt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Je),e(Rt,{modelValue:v.value,"onUpdate:modelValue":f[4]||(f[4]=g=>v.value=g),animated:""},{default:l(()=>[e(ot,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(lo,{data:a(o)},null,8,["data"])]),_:1}),e(ot,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(no,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},_p=_t(vp,[["__scopeId","data-v-ef1ae89c"]]),yp=Object.freeze(Object.defineProperty({__proto__:null,default:_p},Symbol.toStringTag,{value:"Module"})),kp={class:"text-weight-medium wrap-column"},wp={class:"text-caption text-grey-6 elipsis"},hp={class:"column items-end"},$p={class:"text-caption text-grey-6 text-italic"},so={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(u){const n=$e(),d=Ke(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(s,i)=>(p(),O(Ce,{dense:"",rows:u.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:je({height:a(d)})},{header:l(v=>[e(qe,{props:v,class:"bg-grey-4"},{default:l(()=>[(p(!0),w(Y,null,Ge(v.cols,c=>(p(),O(ta,{key:c.name,props:v,class:"text-weight-bold text-grey-8"},{default:l(()=>[_(r(c.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(v=>[e(qe,{props:v,class:"hover-highlight"},{default:l(()=>[e(L,{key:"name",props:v,class:"text-left"},{default:l(()=>[t("div",kp,r(v.row.product_name),1),t("div",wp,r(v.row.product_barcode),1),v.row.notes?(p(),O(we,{key:0,text:v.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"subtotal",props:v,class:"text-right"},{default:l(()=>[t("div",hp,[t("div",null,r(a(K)(v.row.subtotal_cost)),1),t("div",$p,r(a(K)(v.row.quantity))+" x Rp. "+r(a(K)(v.row.cost)),1)])]),_:2},1032,["props"]),e(L,{key:"action",props:v,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(A,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:c=>s.$emit("edit-item",v.row),disable:u.isProcessing},null,8,["onClick","disable"]),e(A,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:c=>s.$emit("remove-item",v.row),disable:u.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},xp=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"})),ro=$t({name:"QBtnToggle",props:{...Rl,modelValue:{required:!0},options:{type:Array,required:!0,validator:u=>u.every(n=>("label"in n||"icon"in n||"slot"in n)&&"value"in n)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(u,{slots:n,emit:d}){const o=G(()=>u.options.find(g=>g.value===u.modelValue)!==void 0),s=G(()=>({type:"hidden",name:u.name,value:u.modelValue})),i=$n(s),v=G(()=>wn(u)),c=G(()=>({rounded:u.rounded,dense:u.dense,...v.value})),m=G(()=>u.options.map((g,$)=>{const{attrs:U,value:h,slot:D,...C}=g;return{slot:D,props:{key:$,"aria-pressed":h===u.modelValue?"true":"false",...U,...C,...c.value,disable:u.disable===!0||C.disable===!0,color:h===u.modelValue?b(C,"toggleColor"):b(C,"color"),textColor:h===u.modelValue?b(C,"toggleTextColor"):b(C,"textColor"),noCaps:b(C,"noCaps")===!0,noWrap:b(C,"noWrap")===!0,size:b(C,"size"),padding:b(C,"padding"),ripple:b(C,"ripple"),stack:b(C,"stack")===!0,stretch:b(C,"stretch")===!0,onClick(x){f(h,g,x)}}}}));function f(g,$,U){u.readonly!==!0&&(u.modelValue===g?u.clearable===!0&&(d("update:modelValue",null,null),d("clear")):d("update:modelValue",g,$),d("click",U))}function b(g,$){return g[$]===void 0?u[$]:g[$]}function k(){const g=m.value.map($=>ke(A,$.props,$.slot!==void 0?n[$.slot]:void 0));return u.name!==void 0&&u.disable!==!0&&o.value===!0&&i(g,"push"),Tl(n.default,g)}return()=>ke(hn,{class:"q-btn-toggle",...v.value,rounded:u.rounded,stretch:u.stretch,glossy:u.glossy,spread:u.spread},k)}}),Sp={key:0,class:"text-center q-mb-md text-grey-8"},Vp={class:"text-subtitle2 text-weight-medium"},qp={class:"text-h5 text-center text-primary q-pb-md"},Cp={class:"q-mb-md flex flex-center"},Tp={key:1},Pp={class:"col-6"},Op={class:"col-6"},Rp={class:"row"},Ip={class:"text-center q-mt-md"},Dp={key:0,class:"text-h6 text-negative text-weight-bold"},Up={key:1,class:"text-h6 text-green-8 text-weight-bold"},Ap={key:2,class:"text-h6 text-positive text-weight-bold"},jp={key:2},Ep={class:"text-h6 text-negative text-center"},Mp={key:3},io={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,s=fe(),i=V(!1),v=V("payment"),c=V(new Date),m=V(null),f=Pe([]),b=G(()=>f.every(B=>B.id&&typeof B.amount=="number"&&B.amount>0)),k=G(()=>s.props.accounts.map(B=>({label:B.name,value:B.id}))),g=G(()=>f.reduce((B,N)=>B+(N.amount||0),0)),$=G(()=>d.total-g.value),U=G(()=>{if(!d.supplier)return!0;const B=f.find(q=>q.id==="wallet");return(B?B.amount:0)<=d.supplier.balance}),h=new Date,D=st.addToDate(new Date,{days:30}),C=G(()=>[B=>!!B||"Tanggal jatuh tempo harus diisi",B=>st.isBetweenDates(B,h,D,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),x=G(()=>{if(v.value==="debt")return!!d.supplier&&C.value.every(Q=>Q(c.value)===!0);const B=f.some(Q=>(Q.amount||0)>0),N=f.every(Q=>(Q.amount||0)>=0),q=$.value<=0;return b.value&&B&&N&&q}),I=()=>{f.length<3&&f.push({id:null,amount:0})},z=B=>{if(f.length>1){const N=f.findIndex(q=>q.id===B);N!==-1&&f.splice(N,1)}},P=B=>{v.value=B,c.value=new Date,f.splice(0,f.length),B==="payment"&&k.value.length>0&&(f.splice(0,f.length,{id:k.value[0].value,amount:d.total}),vt(()=>{m.value&&m.value.length>0&&(m.value[0].focus(),m.value[0].select())}))},j=()=>{if(!x.value)return;i.value=!0;let B={total:d.total,is_debt:v.value==="debt"};if(v.value==="debt")B.due_date=st.formatDate(c.value,"YYYY-MM-DD"),B.payments=[];else{const N=g.value,q=N>d.total?N-d.total:0,Q=$.value>0?$.value:0;B.payments=f,B.remaining_debt=Q,B.change=q}o("accepted",B),i.value=!1},E=()=>{if(k.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}P("payment")};return(B,N)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":N[3]||(N[3]=q=>B.$emit("update:modelValue",q)),onBeforeShow:E},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>N[4]||(N[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[u.supplier?(p(),w("div",Sp,[t("div",Vp,[_(" Nama: "+r(u.supplier.name),1),N[5]||(N[5]=t("br",null,null,-1)),_(" Utang / Piutang: Rp. "+r(a(K)(u.supplier.balance)),1)])])):y("",!0),t("div",qp," Total: Rp. "+r(a(K)(u.total)),1),t("div",Cp,[e(a(ro),{modelValue:v.value,"onUpdate:modelValue":[N[0]||(N[0]=q=>v.value=q),P],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!u.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),v.value==="payment"?(p(),w("div",Tp,[(p(!0),w(Y,null,Ge(f,(q,Q)=>(p(),w("div",{key:Q,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Pp,[e(a(de),{modelValue:q.id,"onUpdate:modelValue":te=>q.id=te,options:k.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:i.value,"hide-bottom-space":"",rules:[te=>!!te||"Akun harus dipilih"],error:!q.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Op,[e(Ue,{modelValue:q.amount,"onUpdate:modelValue":te=>q.amount=te,label:"Jumlah",outlined:!0,dense:"",disable:i.value,error:!U.value,"error-message":U.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:Q===0?"firstPaymentInputRef":null},Le({_:2},[f.length>1?{name:"append",fn:l(()=>[e(S,{size:"xs",name:"close",class:"cursor-pointer",onClick:te=>z(Q)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Rp,[e(A,{disable:!(f.length<3&&$.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:I,size:"sm"},null,8,["disable"])]),t("div",Ip,[$.value>0?(p(),w("div",Dp," Sisa Tagihan: Rp. "+r(a(K)($.value)),1)):$.value<0?(p(),w("div",Up," Kembalian: Rp. "+r(a(K)(Math.abs($.value))),1)):(p(),w("div",Ap," Tagihan Terbayar "))])])):v.value==="debt"&&u.supplier?(p(),w("div",jp,[e($a,{outlined:"",modelValue:c.value,"onUpdate:modelValue":N[1]||(N[1]=q=>c.value=q),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(h),"max-date":a(D),rules:C.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Ep," Total Utang: Rp. "+r(a(K)(u.total)),1)])):v.value==="debt"&&!u.supplier?(p(),w("div",Mp,N[6]||(N[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):y("",!0)]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(A,{flat:"",label:"Batal",color:"grey",onClick:N[2]||(N[2]=q=>B.$emit("update:modelValue",!1))}),e(A,{label:v.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:j,disable:i.value||!x.value,loading:i.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Np=Object.freeze(Object.defineProperty({__proto__:null,default:io},Symbol.toStringTag,{value:"Module"})),Bp={class:"row items-center no-wrap"},zp={class:"col-auto"},Fp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},uo={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1}},emits:["update:modelValue","product-selected"],setup(u,{emit:n}){const d=u,o=n,s=V(null),i=V([]),v=V(!0),c=V(-1),m=Pe({search:"",status:"active",...Re()}),f=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),b=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price",label:"Harga (Rp)",field:"price",align:"right"}],k=G(()=>d.showCost?b:b.filter(C=>C.name!=="cost"));he(()=>{g()});const g=()=>{d.modelValue!==!1&&$()},$=(C=null)=>{v.value=!0,c.value=-1,Ie({pagination:f,filter:m,props:C,rows:i,url:route("admin.product.data"),loading:v,tableRef:s})},U=()=>{g()},h=C=>{o("product-selected",C),setTimeout(()=>{o("update:modelValue",!1)},100)},D=C=>{if(!d.modelValue)return;const x=i.value.length;x!==0&&(C.key==="ArrowDown"?(C.preventDefault(),c.value=(c.value+1)%x):C.key==="ArrowUp"?(C.preventDefault(),c.value=(c.value-1+x)%x):C.key==="Enter"&&c.value!==-1&&(C.preventDefault(),h(i.value[c.value])))};return Ee(()=>d.modelValue,(C,x)=>{x===!0&&C===!1&&(m.search=""),C===!0&&$()}),(C,x)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":x[3]||(x[3]=I=>C.$emit("update:modelValue",I)),maximized:C.$q.screen.lt.sm},{default:l(()=>[e(ce,{class:"column fit",tabindex:"0",onKeydown:D,ref:"cardRef"},{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",Bp,[x[4]||(x[4]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",zp,[e(A,{flat:"",round:"",size:"sm",icon:"close",onClick:x[0]||(x[0]=I=>C.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:xe(["q-py-sm",C.$q.screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(oe,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":[x[1]||(x[1]=I=>m.search=I),U],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["class"]),e(ae,{class:xe(["q-py-xs col",C.$q.screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(Ce,{ref_key:"tableRef",ref:s,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:f.value,"onUpdate:pagination":x[2]||(x[2]=I=>f.value=I),filter:m.search,loading:v.value,columns:k.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":l(({icon:I,message:z,filter:P})=>[t("div",Fp,[t("span",null,r(z),1)])]),body:l(I=>[e(qe,{tabindex:"0",props:I,class:xe([{inactive:!I.row.active,"selected-row":c.value===I.rowIndex},"cursor-pointer"]),onClick:z=>h(I.row),onKeydown:[aa(J(z=>h(I.row),["prevent","stop"]),["enter"]),aa(J(z=>h(I.row),["prevent"]),["space"])]},{default:l(()=>[e(L,{key:"name",props:I,class:"wrap-column"},{default:l(()=>[e(we,{text:I.row.name},null,8,["text"]),I.row.description?(p(),O(we,{key:0,text:I.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"stock",props:I,class:"wrap-column text-right"},{default:l(()=>[_(r(I.row.type=="stocked"?a(K)(I.row.stock)+" "+I.row.uom:"-"),1)]),_:2},1032,["props"]),u.showCost?(p(),O(L,{key:"cost",props:I,class:"wrap-column text-right"},{default:l(()=>[_(r(a(K)(I.row.cost)),1)]),_:2},1032,["props"])):y("",!0),e(L,{key:"price",props:I,class:"wrap-column text-right"},{default:l(()=>[_(r(a(K)(I.row.price)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},Lp={class:"row items-center no-wrap"},Hp={class:"col-auto"},mo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,s=d,i=()=>{s("save")},v=G(()=>o.item.quantity*o.item.cost),c=k=>{k.stopPropagation(),k.preventDefault()},m=k=>{o.modelValue&&(k.key==="Enter"?(i(),c(k)):k.key==="Escape"&&(s("update:modelValue",!1),c(k)))};he(()=>{window.addEventListener("keydown",m)}),Pt(()=>{window.removeEventListener("keydown",m)}),n({getCurrentItem:()=>o.item});const b=()=>{};return(k,g)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":g[6]||(g[6]=$=>k.$emit("update:modelValue",$)),onBeforeShow:b},{default:l(()=>[e(ce,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",Lp,[g[7]||(g[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Hp,[e(A,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=$=>k.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(oe,{modelValue:u.item.product_name,"onUpdate:modelValue":g[1]||(g[1]=$=>u.item.product_name=$),label:"Produk","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ue,{modelValue:u.item.quantity,"onUpdate:modelValue":g[2]||(g[2]=$=>u.item.quantity=$),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ue,{modelValue:u.item.cost,"onUpdate:modelValue":g[3]||(g[3]=$=>u.item.cost=$),label:"Harga","hide-bottom-space":"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ue,{modelValue:v.value,"onUpdate:modelValue":g[4]||(g[4]=$=>v.value=$),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(oe,{modelValue:u.item.notes,"onUpdate:modelValue":g[5]||(g[5]=$=>u.item.notes=$),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(A,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[ue]]),ee(e(A,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:u.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Kp=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"}));function Yp(){const u=V(new Date);let n=null;const d=()=>{u.value=new Date};return he(()=>{n=setInterval(d,1e3)}),Pt(()=>{n&&clearInterval(n)}),{currentDateTime:u}}const Wp={class:"text-grey-8"},co={__name:"DigitalClock",setup(u){const{currentDateTime:n}=Yp();return(d,o)=>(p(),w("div",Wp,r(a(ve)(a(n))),1))}},Qp={key:0,class:"q-select__selected-item"},Jp={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(u,{expose:n,emit:d}){const o=V(null),s=u,i=d,v=V([]);let c=null;const m=V(s.modelValue);he(()=>{s.initialData&&(m.value=s.initialData)}),Ee(m,k=>{i("update:modelValue",k),i("supplierSelected",k)}),Ee(()=>s.modelValue,k=>{m.value=k}),n({focus:()=>{o.value&&o.value.focus()}});const b=(k,g)=>{if(k.length<s.minLength){g(()=>{v.value=[]});return}c&&clearTimeout(c),c=setTimeout(()=>{Qe.get(`/web-api/suppliers?q=${k}`).then($=>{g(()=>{v.value=$.data.data})}).catch($=>{console.error("Gagal mengambil data pemasok:",$),g(()=>{v.value=[]})})},500)};return(k,g)=>(p(),O(de,{class:xe(u.class),ref_key:"qSelectRef",ref:o,modelValue:m.value,"onUpdate:modelValue":g[0]||(g[0]=$=>m.value=$),"use-input":"","input-debounce":"0",label:u.label,options:v.value,onFilter:b,clearable:"",error:u.error,behavior:"menu","error-message":u.errorMessage,disable:u.disable,"hide-bottom-space":"",outlined:u.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l($=>[e(le,Ul(Al($.itemProps)),{default:l(()=>[e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>[_(r($.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l($=>[$.opt?(p(),w("div",Qp,r($.opt.name),1)):y("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Gp={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(u,{emit:n}){return(d,o)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>d.$emit("update:modelValue",s))},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ae,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")])])],-1)])),_:1}),e(mt,{align:"center"},{default:l(()=>[ee(e(A,{dense:"",label:"Tutup"},null,512),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},po=_t(Gp,[["__scopeId","data-v-459ccab7"]]),Xp=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"}));function fo(u){const n=V(!1),d=()=>{const i=u.value||document.documentElement;i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},s=()=>{n.value?o():d()};return xn(()=>{const i=()=>{n.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",i),document.addEventListener("webkitfullscreenchange",i),document.addEventListener("mozfullscreenchange",i),document.addEventListener("MSFullscreenChange",i),()=>{document.removeEventListener("fullscreenchange",i),document.removeEventListener("webkitfullscreenchange",i),document.removeEventListener("mozfullscreenchange",i),document.removeEventListener("MSFullscreenChange",i)}}),{isFullscreen:n,requestFullscreen:d,exitFullscreen:o,toggleFullscreen:s}}const Zp={class:"row items-center no-wrap"},ef={class:"col text-subtite text-bold text-grey-8"},tf={class:"col-auto"},go={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,s=d,i=()=>{s("save")},v=f=>{f.stopPropagation(),f.preventDefault()},c=f=>{o.modelValue&&(f.key==="Enter"?(i(),v(f)):f.key==="Escape"&&(s("update:modelValue",!1),v(f)))};return he(()=>{window.addEventListener("keydown",c)}),Pt(()=>{window.removeEventListener("keydown",c)}),n({getCurrentItem:()=>o.item}),(f,b)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":b[4]||(b[4]=k=>f.$emit("update:modelValue",k))},{default:l(()=>[e(ce,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",Zp,[t("div",ef," Edit "+r(u.data.formatted_id),1),t("div",tf,[e(A,{flat:"",size:"sm",round:"",icon:"close",onClick:b[0]||(b[0]=k=>f.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(Bt,{modelValue:u.data.datetime,"onUpdate:modelValue":b[1]||(b[1]=k=>u.data.datetime=k),label:"Waktu","hide-bottom-space":"",disable:u.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(oe,{modelValue:f.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status],"onUpdate:modelValue":b[2]||(b[2]=k=>f.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status]=k),label:"Status","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(oe,{modelValue:u.data.notes,"onUpdate:modelValue":b[3]||(b[3]=k=>u.data.notes=k),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(A,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[ue]]),ee(e(A,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:u.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},af=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"})),lf={key:0},of={style:{float:"right"}},nf={key:1},sf={style:{float:"right"}},rf={key:2},df={style:{float:"right"}},uf={key:3},mf={style:{float:"right"}},cf={style:{float:"right"}},pf={class:"q-gutter-sm"},ff={class:"q-my-md"},gf={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(u,{emit:n}){const d=V(null),o=()=>{var s;(s=d.value)==null||s.focus()};return(s,i)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":i[0]||(i[0]=v=>s.$emit("update:modelValue",v)),onBeforeShow:o,persistent:""},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>i[1]||(i[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ae,{align:"center"},{default:l(()=>[i[22]||(i[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[i[2]||(i[2]=t("td",null,"ID",-1)),i[3]||(i[3]=t("td",null,":",-1)),t("td",null,r(u.order.formatted_id),1)]),u.customer?(p(),w("tr",lf,[i[5]||(i[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),i[6]||(i[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[_(r(u.customer.name)+" ",1),i[4]||(i[4]=t("br",null,null,-1)),_(r(u.customer.code),1)])])):y("",!0),t("tr",null,[i[8]||(i[8]=t("td",null,"Total",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,[i[7]||(i[7]=_(" Rp. ")),t("div",of,r(a(K)(u.payment.total)),1)])]),u.payment.cash_amount?(p(),w("tr",nf,[i[11]||(i[11]=t("td",null,"Tunai",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,[i[10]||(i[10]=_(" Rp. ")),t("div",sf,r(a(K)(u.payment.cash_amount)),1)])])):y("",!0),u.payment.wallet_amount?(p(),w("tr",rf,[i[14]||(i[14]=t("td",null,"Wallet",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,[i[13]||(i[13]=_(" Rp. ")),t("div",df,r(a(K)(u.payment.wallet_amount)),1)])])):y("",!0),u.payment.remaining_debt?(p(),w("tr",uf,[i[17]||(i[17]=t("td",null,"Piutang",-1)),i[18]||(i[18]=t("td",null,":",-1)),t("td",null,[i[16]||(i[16]=_(" Rp. ")),t("span",mf,r(a(K)(u.payment.remaining_debt)),1)])])):y("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Kembalian",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,[i[19]||(i[19]=_(" Rp. ")),t("div",cf,r(a(K)(u.payment.change)),1)])])])])]),_:1}),e(mt,{align:"center"},{default:l(()=>[t("div",pf,[e(A,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(A,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",ff,[e(A,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},bo=_t(gf,[["__scopeId","data-v-15f5d36e"]]),bf=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),vf={class:"q-gutter-sm"},_f={class:"row items-center"},yf={class:"text-weight-bold"},kf={class:"row q-col-gutter-none full-width"},wf={class:"col-sm-6 col-12 col"},hf={class:"row full-width"},$f={class:"text-grey q-mt-xs q-ml-sm"},xf={class:"col-sm-6 col-12"},Sf={class:"row q-ml-sm items-end"},Vf={class:"row col grow"},qf={class:"col-12 q-pa-sm column"},Cf={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},Tf={key:0,class:"col"},Pf={class:"text-caption text-grey-6 q-mt-xs"},Of={key:0,class:"text-caption text-grey-8 q-mt-xs"},Rf={class:"text-italic"},If={key:1,class:"col"},Df={class:"q-pa-sm q-pb-none text-grey-8"},Uf={class:"col"},Af={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},jf={class:"text-h4 text-weight-bold"},Ef={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Mf={class:"col q-py-sm"},Nf={class:"q-py-sm"},Bf={__name:"Editor",setup(u){const n=$e(),d=fe(),o=V(!0),s=V(null),i=V(null),v=V(null),c=V(!1),m=V(null),f=V(null),{isFullscreen:b,toggleFullscreen:k}=fo(f),g=d.props.data.formatted_id,$=V(d.props.data.supplier),U=V(null),h=V(""),D=V(!1),C=V(!1),x=V(!1),I=V(!1),z=V(!1),P=V(!1),j=V(null),E=Pe({id:d.props.data.id,formatted_id:d.props.data.formatted_id,supplier_id:d.props.data.supplier_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),B=G(()=>E.items.reduce((be,F)=>be+F.cost*F.quantity,0)),N=()=>{var be;k(),b.value||(be=m==null?void 0:m.value)==null||be.hideDrawer()},q=be=>isNaN(be)||be<=0?(wt("Kuantitas tidak valid.","top"),!1):!0,Q=be=>isNaN(be)||be<0?(wt("Harga tidak valid.","top"),!1):!0,te=be=>!be||be.length==0?(wt("Barcode tidak valid.","top"),!1):!0,T=be=>{h.value.endsWith("*")?h.value+=be.name:h.value=be.name},R=async()=>{const be=h.value.trim();if(be.length===0){x.value=!0;return}const F=be.split("*");let H=1,me="",re=null;if(F.length===1)me=F[0];else if(F.length<=3)H=parseInt(F[0]),me=F[1],F.length===3&&(re=parseFloat(F[2]));else{wt("Input tidak valid.","top");return}if(me.length===0){x.value=!0;return}!te(me)&&!q(H)&&!Q(re)||(D.value=!0,await Qe.post(route("admin.purchase-order.add-item"),{order_id:E.id,product_code:me,qty:H,cost:re,merge:o.value}).then(pe=>{const He=pe.data.data.item;let nt=-1;pe.data.data.mergeItem&&(nt=E.items.findIndex(kt=>kt.id===He.id)),nt===-1?E.items.push(He):E.items[nt]=He,h.value="",re!==null&&re!==parseFloat(He.cost)&&wt("Harga tidak dapat diubah!","top")}).catch(pe=>{var He,nt;gt((nt=(He=pe.response)==null?void 0:He.data)==null?void 0:nt.message,"top"),console.error("Gagal mengambil data produk:",pe)}),D.value=!1,vt(()=>{var pe;(pe=s.value)==null||pe.focus()}))},X=be=>{j.value=Object.create(be),I.value=!0},ge=be=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${be.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{D.value=!0,Qe.post(route("admin.purchase-order.remove-item"),{id:be.id}).then(()=>{const F=E.items.findIndex(H=>H.id===be.id);F!==-1&&(E.items.splice(F,1)[0],bt("Item telah dihapus","top"))}).catch(F=>{var H,me;gt(((me=(H=F==null?void 0:F.response)==null?void 0:H.data)==null?void 0:me.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(F)}).finally(()=>{D.value=!1})})},ne=()=>{D.value=!0;const be=i.value.getCurrentItem(),F={id:be.id,qty:be.quantity,cost:be.cost};be.notes&&(F.notes=be.notes),Qe.post(route("admin.purchase-order.update-item"),F).then(H=>{const me=H.data.data,re=E.items.findIndex(pe=>pe.id===me.id);re!==-1&&(E.items[re]=me,bt("Item telah diperbarui","top"))}).catch(H=>{var me,re;gt(((re=(me=H==null?void 0:H.response)==null?void 0:me.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(H)}).finally(()=>{D.value=!1})};he(()=>{const be=F=>{F.key==="F1"?(F.preventDefault(),c.value=!0):F.key==="F2"?(F.preventDefault(),s.value.focus()):F.key==="F3"?(F.preventDefault(),v.value.focus()):F.key==="F4"?(F.preventDefault(),o.value=!o.value):F.key==="F10"?(F.preventDefault(),C.value=!0):F.key==="F11"&&(F.preventDefault(),N())};document.addEventListener("keydown",be),Pt(()=>{document.removeEventListener("keydown",be)}),vt(()=>{var F;(F=m==null?void 0:m.value)==null||F.hideDrawer()})});const Te=be=>{$.value=be,E.supplier_id=be==null?void 0:be.id,Ne(),vt(()=>{var F;(F=s.value)==null||F.focus()})},Ne=()=>{D.value=!0;const be={id:E.id,supplier_id:E.supplier_id,datetime:ea(E.datetime),notes:E.notes};Qe.post(route("admin.purchase-order.update"),be).then(F=>{const H=F.data.data.id;E.supplier_id=H.supplier_id}).catch(F=>{var H,me;gt(((me=(H=F==null?void 0:F.response)==null?void 0:H.data)==null?void 0:me.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(F)}).finally(()=>{D.value=!1})},ft=be=>{if(E.items.length===0){bt("Item masih kosong","top");return}const F={id:E.id,...be};D.value=!0,Qe.post(route("admin.purchase-order.close"),F).then(H=>{bt("Transaksi selesai"),Z.visit(route("admin.purchase-order.detail",{id:E.id}))}).catch(H=>{var me,re;gt((re=(me=H.response)==null?void 0:me.data)==null?void 0:re.message),console.error(H)}).finally(()=>{D.value=!1})},pt=()=>{zt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${E.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.purchase-order.cancel",{id:E.id}),{id:E.id}).then(()=>{bt("Transaksi telah dibatalkan."),Z.visit(route("admin.purchase-order.detail",{id:E.id}))}).catch(be=>{var H,me;const F=((me=(H=be.response)==null?void 0:H.data)==null?void 0:me.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:F,color:"warning",position:"bottom"}),console.error(be)})})},yt=()=>{window.open(route("admin.purchase-order.detail",{id:E.id})+"?preview=1","_blank")};return(be,F)=>{const H=W("i-head"),me=W("authenticated-layout");return p(),w(Y,null,[e(H,{title:a(g)},null,8,["title"]),e(me,{ref_key:"authLayoutRef",ref:m,"show-drawer-button":!0},{title:l(()=>[_(r(a(g)),1)]),"left-button":l(()=>[t("div",vf,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:F[0]||(F[0]=re=>a(Z).get(be.route("admin.purchase-order.index")))})])]),"right-button":l(()=>[t("div",_f,[a(n).screen.gt.sm?(p(),w(Y,{key:0},[t("div",yf,r(a(d).props.auth.user.username),1),F[22]||(F[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(co)])],64)):y("",!0),y("",!0)])]),default:l(()=>[e(Ve,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(ce,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",kf,[t("div",wf,[t("div",hf,[e(Jp,{ref_key:"supplierAutocompleteRef",ref:v,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:$.value,"onUpdate:modelValue":F[2]||(F[2]=re=>$.value=re),label:"Pemasok",disable:D.value,onSupplierSelected:Te,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",$f," Saldo: "+r($.value?"Rp. "+a(K)($.value?$.value.balance:0):"Tidak tersedia"),1)])]),t("div",xf,[e(oe,{ref_key:"userInputRef",ref:s,modelValue:h.value,"onUpdate:modelValue":F[5]||(F[5]=re=>h.value=re),onKeyup:F[6]||(F[6]=aa(J(re=>R(),["prevent"]),["enter"])),loading:D.value,disable:D.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(S,{name:"search",onClick:F[3]||(F[3]=re=>x.value=!0),class:"cursor-pointer"})]),append:l(()=>{var re;return[((re=h.value)==null?void 0:re.length)>0?(p(),O(S,{key:0,name:"send",onClick:F[4]||(F[4]=pe=>R()),class:"cursor-pointer q-ml-md"})):y("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",Sf,[e(qt,{class:"col",modelValue:o.value,"onUpdate:modelValue":F[7]||(F[7]=re=>o.value=re),label:"Gabungkan item",disable:D.value},null,8,["modelValue","disable"])])])]),t("div",Vf,[t("div",qf,[e(so,{items:E.items,onUpdateQuantity:F[8]||(F[8]=({id:re,value:pe})=>be.updateQuantity(re,pe)),onRemoveItem:ge,onEditItem:X,"is-processing":D.value},null,8,["items","is-processing"])])]),t("div",Cf,[a(n).screen.gt.sm?(p(),w("div",Tf,[t("div",Pf,r(E.items.length)+" item(s) ",1),E.notes?(p(),w("div",Of,[F[23]||(F[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Rf,[e(we,{text:E.notes},null,8,["text"])])])):y("",!0)])):y("",!0),a(n).screen.gt.sm?(p(),w("div",If,[t("div",Df,[t("div",null,"#: "+r(E.formatted_id),1),t("div",null,r(a(ve)(E.datetime)),1)])])):y("",!0),t("div",Uf,[t("div",Af,[F[25]||(F[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",jf,[F[24]||(F[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),_(" "+r(a(K)(B.value)),1)])])])]),t("div",Ef,[t("div",Mf,[e(A,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:F[9]||(F[9]=re=>C.value=!0),disable:!be.$can("admin.purchase-order.close")||D.value||E.items.length===0||E.status!=="draft",loading:D.value},null,8,["disable","loading"])]),t("div",Nf,[e(A,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:F[13]||(F[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[ee((p(),O(le,{clickable:"",onClick:F[10]||(F[10]=J(re=>z.value=!0,["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>F[26]||(F[26]=[_("Edit Rincian")])),_:1})]),_:1})),[[se],[ue]]),ee((p(),O(le,{clickable:"",onClick:F[11]||(F[11]=J(re=>yt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"preview"})]),_:1}),e(M,null,{default:l(()=>F[27]||(F[27]=[_("Pratinjau")])),_:1})]),_:1})),[[se],[ue]]),ee((p(),O(le,{clickable:"",onClick:F[12]||(F[12]=J(re=>pt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"cancel",color:"negative"})]),_:1}),e(M,{class:"text-negative"},{default:l(()=>F[28]||(F[28]=[_(" Batalkan ")])),_:1})]),_:1})),[[se],[ue]]),e(Je)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(mo,{ref_key:"itemEditorRef",ref:i,modelValue:I.value,"onUpdate:modelValue":F[14]||(F[14]=re=>I.value=re),item:j.value,onSave:F[15]||(F[15]=re=>ne()),"is-processing":D.value},null,8,["modelValue","item","is-processing"]),e(io,{modelValue:C.value,"onUpdate:modelValue":F[16]||(F[16]=re=>C.value=re),onAccepted:ft,form:E,supplier:$.value,total:B.value,accounts:a(d).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(uo,{modelValue:x.value,"onUpdate:modelValue":F[17]||(F[17]=re=>x.value=re),"show-cost":!0,onProductSelected:T},null,8,["modelValue"]),e(go,{modelValue:z.value,"onUpdate:modelValue":F[18]||(F[18]=re=>z.value=re),data:E,onSave:F[19]||(F[19]=re=>Ne()),"is-processing":D.value},null,8,["modelValue","data","is-processing"]),e(po,{modelValue:c.value,"onUpdate:modelValue":F[20]||(F[20]=re=>c.value=re)},null,8,["modelValue"]),e(bo,{modelValue:P.value,"onUpdate:modelValue":F[21]||(F[21]=re=>P.value=re),order:E,supplier:$.value,total:B.value,payment:U.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},zf=Object.freeze(Object.defineProperty({__proto__:null,default:Bf},Symbol.toStringTag,{value:"Module"})),Ff={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.PURCHASE_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,s)=>(p(),O(ia,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}},Lf={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,s)=>(p(),O(ia,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}};const Hf={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Kf={class:"q-pa-xs"},Yf={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Wf={key:0},Qf={key:1},Jf={key:0},Gf={key:0},Xf={key:1},Zf={class:"flex justify-end"},ul="Pembelian",eg={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=Wt(),f=Qt(),b=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...At(m-2,m-1).reverse()],k=[{value:"all",label:"Semua Bulan"},...jt()],g=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],$=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],U=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],h=Pe({search:"",year:m,month:f,status:"all",payment_status:"all",delivery_status:"all",...Re()}),D=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{E()});const x=q=>{if(q.status=="draft"){I(q);return}z(q)},I=q=>{Z.get(route("admin.purchase-order.edit",q.id))},z=q=>{Z.get(route("admin.purchase-order.detail",q.id))},P=q=>{zt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${q.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.purchase-order.cancel",{id:q.id}),{id:q.id}).then(Q=>{const te=Q.data.data,T=o.value.findIndex(R=>R.id===te.id);if(T===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[T].status="canceled",n.notify({message:Q.data.message,position:"bottom"})}).catch(Q=>{var T,R;const te=((R=(T=Q.response)==null?void 0:T.data)==null?void 0:R.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:te,color:"warning",position:"bottom"}),console.error(Q)})})},j=q=>at({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${q.formatted_id}?`,url:route("admin.purchase-order.delete",q.id),fetchItemsCallback:E,loading:s}),E=(q=null)=>{Ie({pagination:D,filter:h,props:q,rows:o,url:route("admin.purchase-order.data"),loading:s,tableRef:i})},B=()=>{E()},N=G(()=>n.screen.gt.sm?C:C.filter(q=>q.name==="id"||q.name==="action"));return Ee(()=>h.year,q=>{q===null&&(h.month=null)}),(q,Q)=>{const te=W("i-head"),T=W("authenticated-layout");return p(),w(Y,null,[e(te,{title:ul}),e(T,null,Le({title:l(()=>[_(r(ul))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:Q[0]||(Q[0]=R=>d.value=!d.value)},null,8,["icon"]),q.$can("admin.purchase-order.edit")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:Q[1]||(Q[1]=R=>a(Z).get(q.route("admin.purchase-order.add")))})):y("",!0)]),default:l(()=>[t("div",Kf,[e(Ce,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":Q[11]||(Q[11]=R=>D.value=R),filter:h.search,loading:s.value,columns:N.value,rows:o.value,"rows-per-page-options":[10,25,50],style:je({height:a(c)}),onRequest:E,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:R,message:X,filter:ge})=>[t("div",Yf,[t("span",null,r(X)+" "+r(ge?" with term "+ge:""),1)])]),body:l(R=>[e(qe,{props:R,class:"cursor-pointer",onClick:J(X=>x(R.row),["prevent"])},{default:l(()=>[e(L,{key:"id",props:R,class:"wrap-column"},{default:l(()=>[t("div",null,[e(S,{name:"tag"}),_(" "+r(R.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),_(r(a(ve)(R.row.datetime)),1)]),a(n).screen.gt.sm?y("",!0):(p(),w(Y,{key:0},[R.row.supplier?(p(),w("div",Wf,[e(S,{name:"person",class:"inline-icon"}),e(jl,{href:q.route("admin.supplier.detail",{id:R.row.supplier.id}),onClick:Q[8]||(Q[8]=J(()=>{},["stop"]))},{default:l(()=>[_("  "+r(R.row.supplier.name),1)]),_:2},1032,["href"])])):y("",!0),t("div",null,"Rp. "+r(a(K)(R.row.grand_total)),1),R.row.notes?(p(),w("div",Qf,[e(S,{name:"notes"}),_(" "+r(R.row.notes),1)])):y("",!0)],64)),t("div",null,[e(Ff,{status:R.row.status},null,8,["status"]),e(Lf,{status:R.row.payment_status},null,8,["status"]),y("",!0)])]),_:2},1032,["props"]),e(L,{key:"supplier_id",props:R},{default:l(()=>[R.row.supplier?(p(),w("div",Jf,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+r(R.row.supplier_name),1)]),R.row.supplier_phone?(p(),w("div",Gf,[e(S,{name:"phone",class:"inline-icon"}),_(" "+r(R.row.supplier_phone),1)])):y("",!0),R.row.supplier_address?(p(),w("div",Xf,[e(S,{name:"home_pin",class:"inline-icon"}),_(" "+r(R.row.supplier_address),1)])):y("",!0)])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"total",props:R},{default:l(()=>[_(r(a(K)(R.row.grand_total)),1)]),_:2},1032,["props"]),e(L,{key:"notes",props:R},{default:l(()=>[e(we,{text:R.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"action",props:R,onClick:Q[10]||(Q[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",Zf,[q.$can("admin.purchase-order.detail")||q.$can("admin.purchase-order.edit")||q.$can("admin.purchase-order.cancel")||q.$can("admin.purchase-order.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:Q[9]||(Q[9]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[R.row.status!="draft"&&q.$can("admin.purchase-order.detail")?ee((p(),O(le,{key:0,onClick:J(X=>z(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"visibility"})]),_:1}),e(M,null,{default:l(()=>Q[12]||(Q[12]=[_(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),R.row.status=="draft"&&q.$can("admin.purchase-order.edit")?ee((p(),O(le,{key:1,onClick:J(X=>I(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>Q[13]||(Q[13]=[_(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),R.row.status=="draft"&&q.$can("admin.purchase-order.cancel")?ee((p(),O(le,{key:2,onClick:J(X=>P(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"cancel"})]),_:1}),e(M,null,{default:l(()=>Q[14]||(Q[14]=[_(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),e(Je),q.$can("admin.purchase-order.delete")?ee((p(),O(le,{key:3,onClick:J(X=>j(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>Q[15]||(Q[15]=[_(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Hf,[e(de,{modelValue:h.year,"onUpdate:modelValue":[Q[2]||(Q[2]=R=>h.year=R),B],options:b,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h.year!="all"?(p(),O(de,{key:0,modelValue:h.month,"onUpdate:modelValue":[Q[3]||(Q[3]=R=>h.month=R),B],options:k,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:h.year===null},null,8,["modelValue","disable"])):y("",!0),e(de,{modelValue:h.status,"onUpdate:modelValue":[Q[4]||(Q[4]=R=>h.status=R),B],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:h.payment_status,"onUpdate:modelValue":[Q[5]||(Q[5]=R=>h.payment_status=R),B],options:$,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),y("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:h.search,"onUpdate:modelValue":Q[7]||(Q[7]=R=>h.search=R),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},tg=Object.freeze(Object.defineProperty({__proto__:null,default:eg},Symbol.toStringTag,{value:"Module"})),ag={class:"column"},lg={class:"bg-grey-2 q-pa-xs"},og={class:"text-subtitle1 text-bold text-grey-10"},ng={class:"text-caption text-grey-8"},sg={class:"col-12 col-sm-6"},rg={class:"full-width"},ig={key:1},dg={key:0},ug={key:1},mg={class:"col-12 col-sm-6",align:"left"},cg={class:"full-width"};const pg={key:1},fg={class:"full-width",style:{"border-collapse":"collapse"}},gg={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},bg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},vg={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},_g={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},yg={key:0},kg={class:"col-12 col-sm-6"},wg={class:"text-body2 text-grey-7 text-italic"},hg={class:"col-12 col-sm-6"},$g={class:"row justify-end q-gutter-y-xs"},xg={class:"col-12 row justify-between"},Sg={class:"text-subtitle2 text-bold"},vo={__name:"InvoiceTab",props:{data:Object},setup(u){const n=u;return(d,o)=>{const s=W("i-link");return p(),w("div",ag,[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",lg,[t("div",og," INVOICE #"+r(n.data.formatted_id),1),t("div",ng,[_(" Kasir: "+r(n.data.cashier.username)+" - "+r(n.data.cashier.name)+" | "+r(a(ve)(n.data.datetime))+" ",1),n.data.cashier_session?(p(),w(Y,{key:0},[_(" | Session ID: "+r(n.data.cashier_session.id)+" | Terminal: "+r(n.data.cashier_session.cashier_terminal.name),1)],64)):y("",!0)])])]),_:1}),e(Je),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",sg,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",rg,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.customer?(p(),O(s,{key:0,href:d.route("admin.customer.detail",{id:n.data.customer_id})},{default:l(()=>[e(S,{class:"inline-icon",name:"person"}),_(" "+r(n.data.customer_name)+" ("+r(n.data.customer_code)+") ",1)]),_:1},8,["href"])):(p(),w("div",ig,[e(S,{class:"inline-icon",name:"person"}),o[0]||(o[0]=_(" Pelanggan Umum "))]))])]),n.data.customer_phone?(p(),w("tr",dg,[t("td",null,[e(S,{class:"inline-icon",name:"phone"}),_(" "+r(n.data.customer_phone),1)])])):y("",!0),n.data.customer_address?(p(),w("tr",ug,[t("td",null,[e(S,{class:"inline-icon",name:"home_pin"}),_(" "+r(n.data.customer_address),1)])])):y("",!0)])])]),t("div",mg,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",cg,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(d.$CONSTANTS.SALES_ORDER_STATUSES[n.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[n.data.payment_status]),1)]),y("",!0),n.data.due_date?(p(),w("tr",pg,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(Ht)(n.data.due_date)),1)])):y("",!0)])])])]),_:1}),e(Je),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",fg,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(p(!0),w(Y,null,Ge(n.data.details,i=>(p(),w("tr",{key:i.id},[t("td",gg,r(i.product_name),1),t("td",bg,r(a(K)(i.price)),1),t("td",vg,r(i.quantity),1),t("td",_g,r(a(K)(i.subtotal_price)),1)]))),128)),n.data.details.length==0?(p(),w("tr",yg,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):y("",!0)])])]),_:1}),e(Je),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",kg,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",wg,r(n.data.notes?n.data.notes:"-"),1)]),t("div",hg,[t("div",$g,[t("div",xg,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Sg,r(a(K)(n.data.grand_total)),1)])])])]),_:1})])}}},Vg=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),qg={key:0,class:"text-center q-mb-md text-grey-8"},Cg={class:"text-subtitle2 text-weight-medium"},Tg={class:"text-h5 text-center text-primary q-pb-md"},Pg={class:"text-center q-mt-md"},Og={key:0,class:"text-h6 text-negative text-weight-bold"},Rg={key:1,class:"text-h6 text-green-8 text-weight-bold"},Ig={key:2,class:"text-h6 text-positive text-weight-bold"},_o={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,s=fe(),i=V(!1),v=V({method:"cash",amount:d.total,notes:null}),c=s.props.data.customer,m=G(()=>[{label:"Tunai",value:"cash"},...c?[{label:"Wallet",value:"wallet"}]:[],...s.props.accounts.map(U=>({label:U.name,value:U.id}))]),f=G(()=>d.total-(v.value.amount||0)),b=G(()=>{const U=v.value.amount||0;return d.total,U<=0?"Jumlah pembayaran harus lebih dari 0.":v.value.method==="wallet"&&c&&U>c.wallet_balance?"Saldo wallet tidak mencukupi.":null}),k=G(()=>b.value===null),g=()=>{if(!k.value)return;i.value=!0;const U={total_paid:v.value.amount,payments:[{id:v.value.method,amount:v.value.amount}],notes:v.value.notes,change:Math.max(0,(v.value.amount||0)-d.total),remaining_debt:Math.max(0,d.total-(v.value.amount||0))};o("accepted",U),i.value=!1},$=()=>{v.value.amount=d.total,v.value.method="cash",v.value.notes=null};return(U,h)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":h[4]||(h[4]=D=>U.$emit("update:modelValue",D)),onBeforeShow:$},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>h[5]||(h[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(c)?(p(),w("div",qg,[t("div",Cg,[_(r(a(c).code)+" ",1),h[6]||(h[6]=t("br",null,null,-1)),_(" "+r(a(c).name)+" ",1),h[7]||(h[7]=t("br",null,null,-1)),_(" Saldo: Rp. "+r(a(K)(a(c).wallet_balance)),1)])])):y("",!0),t("div",Tg," Total: Rp. "+r(a(K)(u.total)),1),e(a(de),{modelValue:v.value.method,"onUpdate:modelValue":h[0]||(h[0]=D=>v.value.method=D),options:m.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:i.value},null,8,["modelValue","options","disable"]),e(Ue,{modelValue:v.value.amount,"onUpdate:modelValue":h[1]||(h[1]=D=>v.value.amount=D),label:"Jumlah Uang",outlined:!0,dense:"",disable:i.value,class:"q-mb-md",error:!k.value,"error-message":b.value},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:v.value.notes,"onUpdate:modelValue":h[2]||(h[2]=D=>v.value.notes=D),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:i.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Pg,[f.value>0?(p(),w("div",Og," Sisa Tagihan: Rp. "+r(a(K)(f.value)),1)):f.value<0?(p(),w("div",Rg," Kembalian: Rp. "+r(a(K)(Math.abs(f.value))),1)):(p(),w("div",Ig," Tagihan Terbayar "))])]),_:1}),e(mt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(A,{flat:"",label:"Batal",color:"grey",onClick:h[3]||(h[3]=D=>U.$emit("update:modelValue",!1))}),e(A,{label:"Bayar",color:"positive",onClick:g,disable:i.value||!k.value,loading:i.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Dg=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),Ug={class:"column"},Ag={class:"full-width",style:{"border-collapse":"collapse"}},jg={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Eg={class:"row items-center q-gutter-x-sm"},Mg={class:"text-weight-bold"},Ng={class:"row items-center q-gutter-x-sm q-mt-xs"},Bg={class:"text-caption text-grey-6"},zg={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Fg={class:"text-caption text-grey-6"},Lg={class:"q-mt-xs"},Hg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Kg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Yg={key:0},Wg={class:"q-pa-sm"},Qg={class:"text-right q-pa-sm"},Jg={class:"text-right q-pa-sm"},yo={__name:"PaymentTab",props:{data:Object},setup(u){const n=u,d=G(()=>n.data.grand_total-n.data.total_paid),o=$e(),s=V(!1),i=()=>{s.value=!0},v=async m=>{const f={order_id:n.data.id,payments:m.payments,notes:m.notes};o.loading.show({message:"Memproses pembayaran..."});try{const b=await Qe.post(route("admin.sales-order.add-payment"),f);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),s.value=!1,Z.visit(route("admin.sales-order.detail",{id:n.data.id})+"?tab=payment")}catch(b){let k="Gagal memproses pembayaran.";b.response&&b.response.data&&b.response.data.message?k=b.response.data.message:b.message&&(k=b.message),o.notify({message:k,color:"negative",icon:"error"})}finally{o.loading.hide()}},c=m=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Qe.post(route("admin.sales-order.delete-payment",{id:m.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Z.visit(route("admin.sales-order.detail",{id:n.data.id})+"?tab=payment")}catch(f){let b="Gagal menghapus pembayaran.";f.response&&f.response.data&&f.response.data.message?b=f.response.data.message:f.message&&(b=f.message),o.notify({message:b,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(m,f)=>(p(),w(Y,null,[t("div",Ug,[e(Je),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",Ag,[f[6]||(f[6]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(p(!0),w(Y,null,Ge(n.data.payments,b=>(p(),w("tr",{key:b.id},[t("td",jg,[t("div",Eg,[e(S,{name:"tag",size:"xs",color:"grey-7"}),t("span",Mg,r(b.formatted_id),1)]),t("div",Ng,[e(S,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Bg,r(a(ve)(b.created_at)),1)]),(b.type==="transfer"||b.type==="cash")&&b.account?(p(),w("div",zg,[e(S,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Fg,r(b.account.name),1)])):y("",!0),t("div",Lg,[e(ut,{label:m.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[b.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Hg,r(a(K)(b.amount)),1),t("td",Kg,[m.$can("admin.sales-order.delete-payment")?(p(),O(A,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:k=>c(b)},null,8,["onClick"])):y("",!0)])]))),128)),n.data.payments.length==0?(p(),w("tr",Yg,f[2]||(f[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):y("",!0)]),t("tfoot",null,[t("tr",null,[t("td",Wg,[m.$can("admin.sales-order.add-payment")&&d.value>0?(p(),O(A,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:f[0]||(f[0]=J(b=>i(),["stop"]))})):y("",!0)]),f[3]||(f[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",Qg,r(a(K)(n.data.total_paid)),1)]),t("tr",null,[f[4]||(f[4]=t("th",{class:"text-right q-pa-sm",colspan:"2"},"Sisa Tagihan",-1)),t("th",Jg,r(a(K)(d.value)),1),f[5]||(f[5]=t("td",null,null,-1))])])])]),_:1})]),e(_o,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=b=>s.value=b),total:d.value,customer:n.data.customer,onAccepted:v},null,8,["modelValue","total","customer"])],64))}},Gg=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),Xg={class:"q-gutter-sm"},Zg={class:"col col-lg-6 q-pa-xs",align:"center"},ml="Rincian Penjualan",e1={__name:"Detail",setup(u){const n=new URLSearchParams(window.location.search),d=fe(),o=d.props.data,s=V(n.get("preview")||!1),v=V(n.get("tab")||"invoice");he(()=>{vt(()=>{const m=n.get("print_size");m&&c(m)})});const c=m=>{window.open(route("admin.sales-order.print",{id:d.props.data.id,size:m}),"_self")};return(m,f)=>{const b=W("i-head"),k=W("authenticated-layout");return p(),w(Y,null,[e(b,{title:ml}),e(k,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(ml))])]),"left-button":l(()=>[t("div",Xg,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=g=>m.$goBack())})])]),"right-button":l(()=>[e(A,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:f[1]||(f[1]=g=>c("58mm"))}),e(A,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:f[2]||(f[2]=g=>c("a4"))}),s.value?y("",!0):(p(),O(A,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:f[3]||(f[3]=g=>a(Z).get(m.route("admin.sales-order.add")))}))]),default:l(()=>[e(Ve,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Zg,[e(ce,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Ot,{modelValue:v.value,"onUpdate:modelValue":f[4]||(f[4]=g=>v.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(lt,{name:"invoice",label:"Invoice"}),s.value?y("",!0):(p(),O(lt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Je),e(Rt,{modelValue:v.value,"onUpdate:modelValue":f[5]||(f[5]=g=>v.value=g),animated:""},{default:l(()=>[e(ot,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(vo,{data:a(o)},null,8,["data"])]),_:1}),e(ot,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(yo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},t1=Object.freeze(Object.defineProperty({__proto__:null,default:e1},Symbol.toStringTag,{value:"Module"})),a1={class:"text-weight-medium"},l1={class:"text-caption text-grey-6 elipsis"},o1={class:"column items-end"},n1={class:"text-caption text-grey-6 text-italic"},ko={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(u){const n=$e(),d=Ke(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(s,i)=>(p(),O(Ce,{dense:"",rows:u.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:je({height:a(d)})},{header:l(v=>[e(qe,{props:v,class:"bg-grey-4"},{default:l(()=>[(p(!0),w(Y,null,Ge(v.cols,c=>(p(),O(ta,{key:c.name,props:v,class:"text-weight-bold text-grey-8"},{default:l(()=>[_(r(c.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(v=>[e(qe,{props:v,class:"hover-highlight"},{default:l(()=>[e(L,{key:"name",props:v,class:"text-left wrap-column"},{default:l(()=>[t("div",a1,r(v.row.product_name),1),t("div",l1,r(v.row.product_barcode),1),v.row.notes?(p(),O(we,{key:0,text:v.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"subtotal_price",props:v,class:"text-right"},{default:l(()=>[t("div",o1,[t("div",null,r(a(K)(v.row.subtotal_price)),1),t("div",n1,r(a(K)(v.row.quantity))+" x Rp. "+r(a(K)(v.row.price)),1)])]),_:2},1032,["props"]),e(L,{key:"action",props:v,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(A,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:c=>s.$emit("edit-item",v.row),disable:u.isProcessing},null,8,["onClick","disable"]),e(A,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:c=>s.$emit("remove-item",v.row),disable:u.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},s1=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),r1={key:0,class:"text-center q-mb-md text-grey-8"},i1={class:"text-subtitle2 text-weight-medium"},d1={class:"text-h5 text-center text-primary q-pb-md"},u1={class:"q-mb-md flex flex-center"},m1={key:1},c1={class:"col-6"},p1={class:"col-6"},f1={class:"row"},g1={class:"text-center q-mt-md"},b1={key:0,class:"text-h6 text-negative text-weight-bold"},v1={key:1,class:"text-h6 text-green-8 text-weight-bold"},_1={key:2,class:"text-h6 text-positive text-weight-bold"},y1={key:2},k1={class:"text-h6 text-negative text-center"},w1={key:3},wo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,s=fe(),i=V(!1),v=V("cash"),c=V(new Date),m=V(s.props.settings.after_payment_action??"print"),f=V([]),b=V([]),k=Pe([{id:"cash",amount:0}]),g=s.props.settings.default_payment_mode,$=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],U=G(()=>[{label:"Tunai",value:"cash"},...d.customer?[{label:"Wallet",value:"wallet"}]:[],...s.props.accounts.map(te=>({label:te.name,value:te.id}))]),h=G(()=>k.reduce((te,T)=>te+(T.amount||0),0)),D=G(()=>d.total-h.value),C=G(()=>{if(!d.customer)return!0;const te=k.find(R=>R.id==="wallet");return(te?te.amount:0)<=d.customer.wallet_balance}),x=new Date,I=st.addToDate(new Date,{days:30}),z=G(()=>[te=>!!te||"Tanggal jatuh tempo harus diisi",te=>st.isBetweenDates(te,x,I,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),P=G(()=>{if(v.value==="debt")return!!d.customer&&z.value.every(ge=>ge(c.value)===!0);const te=C.value,T=k.some(ge=>(ge.amount||0)>0),R=k.every(ge=>(ge.amount||0)>=0),X=D.value<=0;return te&&T&&R&&X}),j=()=>{if(k.length<3){const te=k.length;k.push({id:"cash",amount:0}),vt(()=>{const T=f.value[te];T&&(T.focus(),T.showPopup())})}},E=te=>{if(k.length>1){const T=k.findIndex(R=>R.id===te);T!==-1&&k.splice(T,1)}},B=(te,T="cash")=>{v.value=te,c.value=new Date,k.splice(0,k.length),te==="cash"&&(k.splice(0,k.length,{id:T,amount:d.total}),vt(()=>{b.value.length>0&&b.value[0]&&(b.value[0].focus(),b.value[0].select())}))},N=()=>{if(!P.value)return;i.value=!0;let te={total:d.total,is_debt:v.value==="debt",after_payment_action:m.value};if(v.value==="debt")te.due_date=st.formatDate(c.value,"YYYY-MM-DD"),te.payments=[];else{const T=h.value,R=T>d.total?T-d.total:0,X=D.value>0?D.value:0;te.payments=k,te.remaining_debt=X,te.change=R}o("accepted",te),i.value=!1},q=()=>{B("cash",d.customer?g:"cash")};he(()=>{const te=T=>{d.modelValue&&T.ctrlKey&&T.key==="Enter"&&(T.preventDefault(),N())};document.addEventListener("keydown",te),Pt(()=>{document.removeEventListener("keydown",te)})});const Q=(te,T)=>{vt(()=>{b.value[T]&&(b.value[T].focus(),b.value[T].select())})};return(te,T)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":T[4]||(T[4]=R=>te.$emit("update:modelValue",R)),onBeforeShow:q},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>T[5]||(T[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[u.customer?(p(),w("div",r1,[t("div",i1,[_(" Username: "+r(u.customer.code)+" ",1),T[6]||(T[6]=t("br",null,null,-1)),_(" Nama: "+r(u.customer.name),1),T[7]||(T[7]=t("br",null,null,-1)),_(" Saldo: Rp. "+r(a(K)(u.customer.wallet_balance)),1)])])):y("",!0),t("div",d1," Total: Rp. "+r(a(K)(u.total)),1),t("div",u1,[e(a(ro),{modelValue:v.value,"onUpdate:modelValue":[T[0]||(T[0]=R=>v.value=R),B],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!u.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),v.value==="cash"?(p(),w("div",m1,[(p(!0),w(Y,null,Ge(k,(R,X)=>(p(),w("div",{key:X,class:"row q-col-gutter-sm q-mb-sm"},[t("div",c1,[e(a(de),{modelValue:R.id,"onUpdate:modelValue":[ge=>R.id=ge,ge=>Q(ge,X)],options:U.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:i.value,"hide-bottom-space":"",ref_for:!0,ref:ge=>f.value[X]=ge},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",p1,[e(Ue,{modelValue:R.amount,"onUpdate:modelValue":ge=>R.amount=ge,label:"Jumlah",outlined:!0,dense:"",disable:i.value,error:R.id==="wallet"&&!C.value,"error-message":R.id==="wallet"&&!C.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:ge=>b.value[X]=ge},Le({_:2},[k.length>1?{name:"append",fn:l(()=>[e(S,{size:"xs",name:"close",class:"cursor-pointer",onClick:ge=>E(R.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",f1,[e(A,{disable:!(k.length<3&&D.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:j,size:"sm"},null,8,["disable"])]),t("div",g1,[D.value>0?(p(),w("div",b1," Sisa Tagihan: Rp. "+r(a(K)(D.value)),1)):D.value<0?(p(),w("div",v1," Kembalian: Rp. "+r(a(K)(Math.abs(D.value))),1)):(p(),w("div",_1," Tagihan Terbayar "))])])):v.value==="debt"&&u.customer?(p(),w("div",y1,[e($a,{outlined:"",modelValue:c.value,"onUpdate:modelValue":T[1]||(T[1]=R=>c.value=R),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(x),"max-date":a(I),rules:z.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",k1," Total Utang: Rp. "+r(a(K)(u.total)),1)])):v.value==="debt"&&!u.customer?(p(),w("div",w1,T[8]||(T[8]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):y("",!0)]),_:1}),e(mt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(a(de),{modelValue:m.value,"onUpdate:modelValue":T[2]||(T[2]=R=>m.value=R),options:$,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:i.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(A,{flat:"",label:"Batal",color:"grey",onClick:T[3]||(T[3]=R=>te.$emit("update:modelValue",!1)),class:"col"}),e(A,{label:v.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:N,disable:i.value||!P.value,loading:i.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},h1=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),$1={class:"row items-center no-wrap"},x1={class:"col-auto"},ho={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,s=d,i=()=>{s("save")},v=G(()=>o.item.quantity*o.item.price),c=b=>{b.stopPropagation(),b.preventDefault()},m=b=>{o.modelValue&&(b.key==="Enter"?(i(),s("update:modelValue",!1),c(b)):b.key==="Escape"&&(s("update:modelValue",!1),c(b)))};return he(()=>{window.addEventListener("keydown",m)}),Pt(()=>{window.removeEventListener("keydown",m)}),n({getCurrentItem:()=>o.item}),(b,k)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":k[6]||(k[6]=g=>b.$emit("update:modelValue",g))},{default:l(()=>[e(ce,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",$1,[k[7]||(k[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",x1,[e(A,{flat:"",size:"sm",round:"",icon:"close",onClick:k[0]||(k[0]=g=>b.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(oe,{modelValue:u.item.product_name,"onUpdate:modelValue":k[1]||(k[1]=g=>u.item.product_name=g),label:"Produk","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ue,{modelValue:u.item.quantity,"onUpdate:modelValue":k[2]||(k[2]=g=>u.item.quantity=g),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ue,{modelValue:u.item.price,"onUpdate:modelValue":k[3]||(k[3]=g=>u.item.price=g),label:"Harga",readonly:!u.item.price_editable,"hide-bottom-space":"",disable:u.isProcessing},null,8,["modelValue","readonly","disable"]),e(Ue,{modelValue:v.value,"onUpdate:modelValue":k[4]||(k[4]=g=>v.value=g),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(oe,{modelValue:u.item.notes,"onUpdate:modelValue":k[5]||(k[5]=g=>u.item.notes=g),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(A,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[ue]]),ee(e(A,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:u.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},S1=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),V1={key:0,class:"q-select__selected-item"},q1={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(u,{expose:n,emit:d}){const o=V(null),s=u,i=d,v=V([]);let c=null;const m=V(s.modelValue);he(()=>{s.initialData&&(m.value=s.initialData)}),Ee(m,k=>{i("update:modelValue",k),i("customerSelected",k)}),Ee(()=>s.modelValue,k=>{m.value=k}),n({focus:()=>{o.value&&o.value.focus()}});const b=(k,g)=>{if(k.length<s.minLength){g(()=>{v.value=[]});return}c&&clearTimeout(c),c=setTimeout(()=>{Qe.get(`/web-api/customers?q=${k}`).then($=>{g(()=>{v.value=$.data.data})}).catch($=>{console.error("Gagal mengambil data pelanggan:",$),g(()=>{v.value=[]})})},500)};return(k,g)=>(p(),O(de,{class:xe(u.class),ref_key:"qSelectRef",ref:o,modelValue:m.value,"onUpdate:modelValue":g[0]||(g[0]=$=>m.value=$),"use-input":"","input-debounce":"0",label:u.label,options:v.value,onFilter:b,clearable:"",error:u.error,behavior:"menu","error-message":u.errorMessage,disable:u.disable,"hide-bottom-space":"",outlined:u.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l($=>[e(le,Ul(Al($.itemProps)),{default:l(()=>[e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>[_(r($.opt.name),1)]),_:2},1024),e(_e,{caption:""},{default:l(()=>[e(S,{name:"person",size:"14px"}),_(" "+r($.opt.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l($=>[$.opt?(p(),w("div",V1,r($.opt.name)+" ("+r($.opt.code)+") ",1)):y("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},C1={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(u,{emit:n}){return(d,o)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>d.$emit("update:modelValue",s))},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ae,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(mt,{align:"center"},{default:l(()=>[ee(e(A,{dense:"",label:"Tutup"},null,512),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$o=_t(C1,[["__scopeId","data-v-92052544"]]),T1=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),P1={class:"row items-center no-wrap"},O1={class:"col text-subtite text-bold text-grey-8"},R1={class:"col-auto"},xo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,s=d,i=()=>{s("save")},v=f=>{f.stopPropagation(),f.preventDefault()},c=f=>{o.modelValue&&(f.key==="Enter"?(i(),v(f)):f.key==="Escape"&&(s("update:modelValue",!1),v(f)))};return he(()=>{window.addEventListener("keydown",c)}),Pt(()=>{window.removeEventListener("keydown",c)}),n({getCurrentItem:()=>o.item}),(f,b)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":b[4]||(b[4]=k=>f.$emit("update:modelValue",k))},{default:l(()=>[e(ce,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",P1,[t("div",O1," Edit "+r(u.data.formatted_id),1),t("div",R1,[e(A,{flat:"",size:"sm",round:"",icon:"close",onClick:b[0]||(b[0]=k=>f.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(Bt,{modelValue:u.data.datetime,"onUpdate:modelValue":b[1]||(b[1]=k=>u.data.datetime=k),label:"Waktu","hide-bottom-space":"",disable:u.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(oe,{modelValue:f.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status],"onUpdate:modelValue":b[2]||(b[2]=k=>f.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status]=k),label:"Status","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(oe,{modelValue:u.data.notes,"onUpdate:modelValue":b[3]||(b[3]=k=>u.data.notes=k),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(mt,{align:"right"},{default:l(()=>[ee(e(A,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[ue]]),ee(e(A,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:u.isProcessing},null,8,["disable"]),[[ue]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},I1=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),D1={key:0},U1={style:{float:"right"}},A1={key:1},j1={style:{float:"right"}},E1={key:2},M1={style:{float:"right"}},N1={key:3},B1={style:{float:"right"}},z1={style:{float:"right"}},F1={class:"q-gutter-sm"},L1={class:"q-my-md"},H1={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(u,{emit:n}){const d=V(null),o=()=>{var s;(s=d.value)==null||s.focus()};return(s,i)=>(p(),O(ct,{"model-value":u.modelValue,"onUpdate:modelValue":i[0]||(i[0]=v=>s.$emit("update:modelValue",v)),onBeforeShow:o,persistent:""},{default:l(()=>[e(ce,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>i[1]||(i[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ae,{align:"center"},{default:l(()=>[i[22]||(i[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[i[2]||(i[2]=t("td",null,"ID",-1)),i[3]||(i[3]=t("td",null,":",-1)),t("td",null,r(u.order.formatted_id),1)]),u.customer?(p(),w("tr",D1,[i[5]||(i[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),i[6]||(i[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[_(r(u.customer.name)+" ",1),i[4]||(i[4]=t("br",null,null,-1)),_(r(u.customer.code),1)])])):y("",!0),t("tr",null,[i[8]||(i[8]=t("td",null,"Total",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,[i[7]||(i[7]=_(" Rp. ")),t("div",U1,r(a(K)(u.payment.total)),1)])]),u.payment.cash_amount?(p(),w("tr",A1,[i[11]||(i[11]=t("td",null,"Tunai",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,[i[10]||(i[10]=_(" Rp. ")),t("div",j1,r(a(K)(u.payment.cash_amount)),1)])])):y("",!0),u.payment.wallet_amount?(p(),w("tr",E1,[i[14]||(i[14]=t("td",null,"Wallet",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,[i[13]||(i[13]=_(" Rp. ")),t("div",M1,r(a(K)(u.payment.wallet_amount)),1)])])):y("",!0),u.payment.remaining_debt?(p(),w("tr",N1,[i[17]||(i[17]=t("td",null,"Piutang",-1)),i[18]||(i[18]=t("td",null,":",-1)),t("td",null,[i[16]||(i[16]=_(" Rp. ")),t("span",B1,r(a(K)(u.payment.remaining_debt)),1)])])):y("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Kembalian",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,[i[19]||(i[19]=_(" Rp. ")),t("div",z1,r(a(K)(u.payment.change)),1)])])])])]),_:1}),e(mt,{align:"center"},{default:l(()=>[t("div",F1,[e(A,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(A,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",L1,[e(A,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},So=_t(H1,[["__scopeId","data-v-85a4c3ae"]]),K1=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),Y1={class:"q-gutter-sm"},W1={class:"row items-center"},Q1={class:"text-weight-bold"},J1={class:"row q-col-gutter-none full-width"},G1={class:"col-sm-6 col-12 col"},X1={class:"row full-width"},Z1={class:"col-sm-6 col-12"},eb={class:"row q-ml-sm items-end"},tb={class:"row col grow"},ab={class:"col-12 q-pa-sm column"},lb={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},ob={key:0,class:"col"},nb={class:"text-caption text-grey-6 q-mt-xs"},sb={key:0,class:"text-caption text-grey-8 q-mt-xs"},rb={class:"text-italic"},ib={key:1,class:"col"},db={class:"q-pa-sm q-pb-none text-grey-8"},ub={class:"col"},mb={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},cb={class:"text-h4 text-weight-bold"},pb={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},fb={class:"col q-py-sm"},gb={class:"q-py-sm"},bb={__name:"Editor",setup(u){const n=$e(),d=fe(),o=V(!0),s=V(null),i=V(null),v=V(null),c=V(!1),m=V(null),f=V(null),{isFullscreen:b,toggleFullscreen:k}=fo(f),g=d.props.data.formatted_id,$=V(d.props.data.customer),U=V(null),h=V(""),D=V(!1),C=V(!1),x=V(!1),I=V(!1),z=V(!1),P=V(!1),j=V(null),E=Pe({id:d.props.data.id,formatted_id:d.props.data.formatted_id,customer_id:d.props.data.customer_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),B=G(()=>E.items.reduce((F,H)=>F+H.price*H.quantity,0)),N=()=>{var F;k(),b.value||(F=m==null?void 0:m.value)==null||F.hideDrawer()},q=F=>isNaN(F)||F<=0?(wt("Kuantitas tidak valid.","top"),!1):!0,Q=F=>isNaN(F)||F<0?(wt("Harga tidak valid.","top"),!1):!0,te=F=>!F||F.length==0?(wt("Barcode tidak valid.","top"),!1):!0,T=F=>{h.value.endsWith("*")?h.value+=F.name:h.value=F.name},R=async()=>{const F=h.value.trim();if(F.length===0){x.value=!0;return}const H=F.split("*");let me=1,re="",pe=null;if(H.length===1)re=H[0];else if(H.length<=3)me=parseInt(H[0]),re=H[1],H.length===3&&(pe=parseFloat(H[2]));else{wt("Input tidak valid.","top");return}if(re.length===0){x.value=!0;return}!te(re)&&!q(me)&&!Q(pe)||(D.value=!0,await Qe.post(route("admin.sales-order.add-item"),{order_id:E.id,product_code:re,qty:me,price:pe,merge:o.value}).then(He=>{const nt=He.data.data.item;let kt=-1;He.data.data.mergeItem&&(kt=E.items.findIndex(ua=>ua.id===nt.id)),kt===-1?E.items.push(nt):E.items[kt]=nt,h.value="",pe!==null&&pe!==parseFloat(nt.price)&&wt("Harga tidak dapat diubah!","top")}).catch(He=>{var nt,kt;gt((kt=(nt=He.response)==null?void 0:nt.data)==null?void 0:kt.message,"top"),console.error("Gagal mengambil data produk:",He)}),D.value=!1,vt(()=>{var He;(He=s.value)==null||He.focus()}))},X=F=>{j.value=Object.create(F),I.value=!0},ge=F=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${F.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{D.value=!0,Qe.post(route("admin.sales-order.remove-item"),{id:F.id}).then(()=>{const H=E.items.findIndex(me=>me.id===F.id);H!==-1&&(E.items.splice(H,1)[0],bt("Item telah dihapus","top"))}).catch(H=>{var me,re;gt(((re=(me=H==null?void 0:H.response)==null?void 0:me.data)==null?void 0:re.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(H)}).finally(()=>{D.value=!1})})},ne=()=>{D.value=!0;const F=i.value.getCurrentItem(),H={id:F.id,qty:F.quantity};F.price_editable&&(H.price=F.price),F.notes&&(H.notes=F.notes),Qe.post(route("admin.sales-order.update-item"),H).then(me=>{const re=me.data.data,pe=E.items.findIndex(He=>He.id===re.id);pe!==-1&&(E.items[pe]=re,bt("Item telah diperbarui","top"))}).catch(me=>{var re,pe;gt(((pe=(re=me==null?void 0:me.response)==null?void 0:re.data)==null?void 0:pe.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(me)}).finally(()=>{D.value=!1})};he(()=>{const F=H=>{C.value||c.value||I.value||x.value||z.value||(H.key==="F1"?(H.preventDefault(),c.value=!0):H.key==="F2"?(H.preventDefault(),v.value.focus()):H.key==="F3"?(H.preventDefault(),s.value.focus()):H.key==="F4"?(H.preventDefault(),o.value=!o.value):H.key==="F10"||H.ctrlKey&&H.key==="Enter"?(H.preventDefault(),C.value=!0):H.key==="F11"&&(H.preventDefault(),N()))};document.addEventListener("keydown",F),Pt(()=>{document.removeEventListener("keydown",F)}),vt(()=>{var H;(H=m==null?void 0:m.value)==null||H.hideDrawer()})});const Te=async F=>{$.value=F,E.customer_id=F==null?void 0:F.id,await Ne(),vt(()=>{var H;(H=s.value)==null||H.focus()})},Ne=async()=>{D.value=!0;const F={id:E.id,customer_id:E.customer_id,datetime:ea(E.datetime),notes:E.notes};await Qe.post(route("admin.sales-order.update"),F).then(H=>{const me=H.data.data.id;E.customer_id=me.customer_id}).catch(H=>{var me,re;gt(((re=(me=H==null?void 0:H.response)==null?void 0:me.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(H)}).finally(()=>{D.value=!1})},ft=F=>{if(E.items.length===0){bt("Item masih kosong","top");return}const H={id:E.id,...F};D.value=!0,Qe.post(route("admin.sales-order.close"),H).then(me=>{bt("Transaksi selesai"),H.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:E.id,size:d.props.settings.default_print_size}),"_self"):H.after_payment_action==="detail"?Z.get(route("admin.sales-order.detail",{id:E.id})):H.after_payment_action==="new-order"&&Z.get(route("admin.sales-order.add"))}).catch(me=>{var re,pe;gt((pe=(re=me.response)==null?void 0:re.data)==null?void 0:pe.message),console.error(me)}).finally(()=>{D.value=!1})},pt=()=>{zt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${E.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.sales-order.cancel",{id:E.id}),{id:E.id}).then(()=>{bt("Transaksi telah dibatalkan."),Z.visit(route("admin.sales-order.detail",{id:E.id}))}).catch(F=>{var me,re;const H=((re=(me=F.response)==null?void 0:me.data)==null?void 0:re.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:H,color:"warning",position:"bottom"}),console.error(F)})})},yt=()=>{window.open(route("admin.sales-order.detail",{id:E.id})+"?preview=1","_blank")},be=G(()=>$.value?$.value.wallet_balance>=B.value:!0);return(F,H)=>{const me=W("i-head"),re=W("authenticated-layout");return p(),w(Y,null,[e(me,{title:a(g)},null,8,["title"]),e(re,{ref_key:"authLayoutRef",ref:m,"show-drawer-button":!0},{title:l(()=>[_(r(a(g)),1)]),"left-button":l(()=>[t("div",Y1,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:H[0]||(H[0]=pe=>a(Z).get(F.route("admin.sales-order.index")))})])]),"right-button":l(()=>[t("div",W1,[a(n).screen.gt.sm?(p(),w(Y,{key:0},[t("div",Q1,r(a(d).props.auth.user.username),1),H[22]||(H[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(co)])],64)):y("",!0),y("",!0)])]),default:l(()=>[e(Ve,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(ce,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",J1,[t("div",G1,[t("div",X1,[e(q1,{ref_key:"customerAutocompleteRef",ref:v,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:$.value,"onUpdate:modelValue":H[2]||(H[2]=pe=>$.value=pe),label:"Pelanggan",disable:D.value,onCustomerSelected:Te,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",be.value?"text-green":"text-red"])}," Saldo: "+r($.value?"Rp. "+a(K)($.value?$.value.wallet_balance:0):"Tidak tersedia"),3)])]),t("div",Z1,[e(oe,{ref_key:"userInputRef",ref:s,modelValue:h.value,"onUpdate:modelValue":H[5]||(H[5]=pe=>h.value=pe),onKeyup:H[6]||(H[6]=aa(J(pe=>R(),["prevent"]),["enter"])),loading:D.value,disable:D.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(S,{name:"search",onClick:H[3]||(H[3]=pe=>x.value=!0),class:"cursor-pointer"})]),append:l(()=>{var pe;return[((pe=h.value)==null?void 0:pe.length)>0?(p(),O(S,{key:0,name:"send",onClick:H[4]||(H[4]=He=>R()),class:"cursor-pointer q-ml-md"})):y("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",eb,[e(qt,{class:"col",modelValue:o.value,"onUpdate:modelValue":H[7]||(H[7]=pe=>o.value=pe),label:"Gabungkan item",disable:D.value},null,8,["modelValue","disable"])])])]),t("div",tb,[t("div",ab,[e(ko,{items:E.items,onUpdateQuantity:H[8]||(H[8]=({id:pe,value:He})=>F.updateQuantity(pe,He)),onRemoveItem:ge,onEditItem:X,"is-processing":D.value},null,8,["items","is-processing"])])]),t("div",lb,[a(n).screen.gt.sm?(p(),w("div",ob,[t("div",nb,r(E.items.length)+" item(s) ",1),E.notes?(p(),w("div",sb,[H[23]||(H[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",rb,[e(we,{text:E.notes},null,8,["text"])])])):y("",!0)])):y("",!0),a(n).screen.gt.sm?(p(),w("div",ib,[t("div",db,[t("div",null,"#: "+r(E.formatted_id),1),t("div",null,r(a(ve)(E.datetime)),1)])])):y("",!0),t("div",ub,[t("div",mb,[H[25]||(H[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",cb,[H[24]||(H[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),_(" "+r(a(K)(B.value)),1)])])])]),t("div",pb,[t("div",fb,[e(A,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:H[9]||(H[9]=pe=>C.value=!0),disable:!F.$can("admin.sales-order.close")||D.value||E.items.length===0||E.status!=="draft",loading:D.value},null,8,["disable","loading"])]),t("div",gb,[e(A,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:H[13]||(H[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[ee((p(),O(le,{clickable:"",onClick:H[10]||(H[10]=J(pe=>z.value=!0,["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>H[26]||(H[26]=[_("Edit Rincian")])),_:1})]),_:1})),[[se],[ue]]),ee((p(),O(le,{clickable:"",onClick:H[11]||(H[11]=J(pe=>yt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"preview"})]),_:1}),e(M,null,{default:l(()=>H[27]||(H[27]=[_("Pratinjau")])),_:1})]),_:1})),[[se],[ue]]),ee((p(),O(le,{clickable:"",onClick:H[12]||(H[12]=J(pe=>pt(),["stop"]))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"cancel",color:"negative"})]),_:1}),e(M,{class:"text-negative"},{default:l(()=>H[28]||(H[28]=[_(" Batalkan ")])),_:1})]),_:1})),[[se],[ue]]),e(Je)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(ho,{ref_key:"itemEditorRef",ref:i,modelValue:I.value,"onUpdate:modelValue":H[14]||(H[14]=pe=>I.value=pe),item:j.value,onSave:H[15]||(H[15]=pe=>ne()),"is-processing":D.value},null,8,["modelValue","item","is-processing"]),e(wo,{modelValue:C.value,"onUpdate:modelValue":H[16]||(H[16]=pe=>C.value=pe),onAccepted:ft,form:E,customer:$.value,total:B.value,accounts:a(d).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(uo,{modelValue:x.value,"onUpdate:modelValue":H[17]||(H[17]=pe=>x.value=pe),onProductSelected:T},null,8,["modelValue"]),e(xo,{modelValue:z.value,"onUpdate:modelValue":H[18]||(H[18]=pe=>z.value=pe),data:E,onSave:H[19]||(H[19]=pe=>Ne()),"is-processing":D.value},null,8,["modelValue","data","is-processing"]),e($o,{modelValue:c.value,"onUpdate:modelValue":H[20]||(H[20]=pe=>c.value=pe)},null,8,["modelValue"]),e(So,{modelValue:P.value,"onUpdate:modelValue":H[21]||(H[21]=pe=>P.value=pe),order:E,customer:$.value,total:B.value,payment:U.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},vb=Object.freeze(Object.defineProperty({__proto__:null,default:bb},Symbol.toStringTag,{value:"Module"})),_b={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.SALES_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,s)=>(p(),O(ia,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}},yb={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,s)=>(p(),O(ia,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}};const kb={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},wb={class:"q-pa-xs"},hb={class:"full-width row flex-center text-grey-8 q-gutter-sm"},$b={key:0},xb={key:1},Sb={key:2},Vb={key:3},qb={key:0},Cb={key:1},Tb={key:0},Pb={key:0},Ob={key:1},Rb={class:"flex justify-end"},cl="Penjualan",Ib={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=Wt(),f=Qt(),b=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...At(m-2,m-1).reverse()],k=[{value:"all",label:"Semua Bulan"},...jt()],g=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_STATUSES)],$=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],U=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],h=Pe({search:"",year:m,month:f,status:"all",payment_status:"all",delivery_status:"all",...Re()}),D=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{E()});const x=q=>{if(q.status=="draft"){I(q);return}z(q)},I=q=>{Z.get(route("admin.sales-order.edit",q.id))},z=q=>{Z.get(route("admin.sales-order.detail",q.id))},P=q=>{zt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${q.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Qe.post(route("admin.sales-order.cancel",{id:q.id}),{id:q.id}).then(Q=>{const te=Q.data.data,T=o.value.findIndex(R=>R.id===te.id);if(T===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[T].status="canceled",n.notify({message:Q.data.message,position:"bottom"})}).catch(Q=>{var T,R;const te=((R=(T=Q.response)==null?void 0:T.data)==null?void 0:R.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:te,color:"warning",position:"bottom"}),console.error(Q)})})},j=q=>at({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${q.formatted_id}?`,url:route("admin.sales-order.delete",q.id),fetchItemsCallback:E,loading:s}),E=(q=null)=>{Ie({pagination:D,filter:h,props:q,rows:o,url:route("admin.sales-order.data"),loading:s,tableRef:i})},B=()=>{E()},N=G(()=>n.screen.gt.sm?C:C.filter(q=>q.name==="id"||q.name==="action"));return Ee(()=>h.year,q=>{q===null&&(h.month=null)}),(q,Q)=>{const te=W("i-head"),T=W("authenticated-layout");return p(),w(Y,null,[e(te,{title:cl}),e(T,null,Le({title:l(()=>[_(r(cl))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:Q[0]||(Q[0]=R=>d.value=!d.value)},null,8,["icon"]),q.$can("admin.sales-order.edit")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:Q[1]||(Q[1]=R=>a(Z).get(q.route("admin.sales-order.add")))})):y("",!0)]),default:l(()=>[t("div",wb,[e(Ce,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":Q[11]||(Q[11]=R=>D.value=R),filter:h.search,loading:s.value,columns:N.value,rows:o.value,"rows-per-page-options":[10,25,50],style:je({height:a(c)}),onRequest:E,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:R,message:X,filter:ge})=>[t("div",hb,[t("span",null,r(X)+" "+r(ge?" with term "+ge:""),1)])]),body:l(R=>[e(qe,{props:R,class:"cursor-pointer",onClick:J(X=>x(R.row),["prevent"])},{default:l(()=>[e(L,{key:"id",props:R,class:"wrap-column"},{default:l(()=>{var X,ge,ne;return[t("div",null,[e(S,{name:"tag"}),_(" "+r(R.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),_(r(a(ve)(R.row.datetime)),1)]),a(n).screen.gt.sm?y("",!0):(p(),w(Y,{key:0},[R.row.cashier?(p(),w("div",$b,[e(S,{name:"person",class:"inline-icon"}),_(" Kasir: "+r((X=R.row.cashier)==null?void 0:X.username),1)])):y("",!0),R.row.cashier_session?(p(),w("div",xb,[e(S,{name:"point_of_sale",class:"inline-icon"}),_(" Terminal: "+r((ne=(ge=R.row.cashier_session)==null?void 0:ge.cashier_terminal)==null?void 0:ne.name),1)])):y("",!0),R.row.customer?(p(),w("div",Sb,[e(S,{name:"person",class:"inline-icon"}),e(jl,{href:q.route("admin.customer.detail",{id:R.row.customer.id}),onClick:Q[8]||(Q[8]=J(()=>{},["stop"]))},{default:l(()=>[_("  "+r(R.row.customer.code)+" - "+r(R.row.customer.name),1)]),_:2},1032,["href"])])):y("",!0),t("div",null,"Rp. "+r(a(K)(R.row.grand_total)),1),R.row.notes?(p(),w("div",Vb,[e(S,{name:"notes"}),_(" "+r(R.row.notes),1)])):y("",!0)],64)),t("div",null,[e(_b,{status:R.row.status},null,8,["status"]),e(yb,{status:R.row.payment_status},null,8,["status"]),y("",!0)])]}),_:2},1032,["props"]),e(L,{key:"cashier_id",props:R},{default:l(()=>{var X,ge,ne;return[R.row.cashier?(p(),w("div",qb,[e(S,{name:"person",class:"inline-icon"}),_(" "+r((X=R.row.cashier)==null?void 0:X.username),1)])):y("",!0),R.row.cashier_session?(p(),w("div",Cb,[e(S,{name:"point_of_sale",class:"inline-icon"}),_(" "+r((ne=(ge=R.row.cashier_session)==null?void 0:ge.cashier_terminal)==null?void 0:ne.name),1)])):y("",!0)]}),_:2},1032,["props"]),e(L,{key:"customer_id",props:R},{default:l(()=>[R.row.customer?(p(),w("div",Tb,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" "+r(R.row.customer_code)+" - "+r(R.row.customer_name),1)]),R.row.customer_phone?(p(),w("div",Pb,[e(S,{name:"phone",class:"inline-icon"}),_(" "+r(R.row.customer_phone),1)])):y("",!0),R.row.customer_address?(p(),w("div",Ob,[e(S,{name:"home_pin",class:"inline-icon"}),_(" "+r(R.row.customer_address),1)])):y("",!0)])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"total",props:R},{default:l(()=>[_(r(a(K)(R.row.grand_total)),1)]),_:2},1032,["props"]),e(L,{key:"notes",props:R},{default:l(()=>[e(we,{text:R.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(L,{key:"action",props:R,onClick:Q[10]||(Q[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",Rb,[q.$can("admin.sales-order.detail")||q.$can("admin.sales-order.edit")||q.$can("admin.sales-order.cancel")||q.$can("admin.sales-order.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:Q[9]||(Q[9]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[R.row.status!="draft"&&q.$can("admin.sales-order.detail")?ee((p(),O(le,{key:0,onClick:J(X=>z(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"visibility"})]),_:1}),e(M,null,{default:l(()=>Q[12]||(Q[12]=[_(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),R.row.status=="draft"&&q.$can("admin.sales-order.edit")?ee((p(),O(le,{key:1,onClick:J(X=>I(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>Q[13]||(Q[13]=[_(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),R.row.status=="draft"&&q.$can("admin.sales-order.cancel")?ee((p(),O(le,{key:2,onClick:J(X=>P(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"cancel"})]),_:1}),e(M,null,{default:l(()=>Q[14]||(Q[14]=[_(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),e(Je),q.$can("admin.sales-order.delete")?ee((p(),O(le,{key:3,onClick:J(X=>j(R.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>Q[15]||(Q[15]=[_(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",kb,[e(de,{modelValue:h.year,"onUpdate:modelValue":[Q[2]||(Q[2]=R=>h.year=R),B],options:b,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h.year!="all"?(p(),O(de,{key:0,modelValue:h.month,"onUpdate:modelValue":[Q[3]||(Q[3]=R=>h.month=R),B],options:k,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:h.year===null},null,8,["modelValue","disable"])):y("",!0),e(de,{modelValue:h.status,"onUpdate:modelValue":[Q[4]||(Q[4]=R=>h.status=R),B],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:h.payment_status,"onUpdate:modelValue":[Q[5]||(Q[5]=R=>h.payment_status=R),B],options:$,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),y("",!0),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:h.search,"onUpdate:modelValue":Q[7]||(Q[7]=R=>h.search=R),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Db=Object.freeze(Object.defineProperty({__proto__:null,default:Ib},Symbol.toStringTag,{value:"Module"})),Vo={__name:"CompanyInfoForm",setup(u){const n=V(),d=fe(),o=ze({name:d.props.data.name,headline:d.props.data.headline,phone:d.props.data.phone,address:d.props.data.address,logo_path:d.props.data.logo_path,logo_image:null}),s=V(null),i=V("");he(()=>{o.logo_path&&(i.value=`/${o.logo_path}`)});function v(){s.value.click()}function c(b){const k=b.target.files[0];k&&(o.logo_image=k,i.value=URL.createObjectURL(k))}function m(){o.logo_image=null,o.logo_path=null,i.value=null,s.value.value=null}const f=()=>Ze({form:o,url:route("admin.company-profile.edit")});return(b,k)=>(p(),O(Fe,{class:"row",onSubmit:J(f,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[k[8]||(k[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),k[9]||(k[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(oe,{ref_key:"nameInputRef",ref:n,modelValue:a(o).name,"onUpdate:modelValue":k[0]||(k[0]=g=>a(o).name=g),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[g=>g&&g.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(o).headline,"onUpdate:modelValue":k[1]||(k[1]=g=>a(o).headline=g),modelModifiers:{trim:!0},label:"Headline",disable:a(o).processing,maxlength:"200","lazy-rules":"",error:!!a(o).errors.headline,"error-message":a(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).phone,"onUpdate:modelValue":k[2]||(k[2]=g=>a(o).phone=g),modelModifiers:{trim:!0},label:"No Telepon",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.phone,"error-message":a(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(o).address,"onUpdate:modelValue":k[3]||(k[3]=g=>a(o).address=g),modelModifiers:{trim:!0},label:"Alamat",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[k[7]||(k[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(A,{label:"Browse Logo",size:"sm",onClick:v,color:"secondary",icon:"add_a_photo",disable:a(o).processing},null,8,["disable"]),e(A,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:a(o).processing||!i.value,color:"red",onClick:m},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:s,accept:"image/*",style:{display:"none"},onChange:c},null,544),t("div",null,[e(Yt,{src:i.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},Le({error:l(()=>[k[4]||(k[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[i.value?void 0:{name:"default",fn:l(()=>[k[5]||(k[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),k[6]||(k[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(ae,null,{default:l(()=>[e(A,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Ub=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Ab={class:"q-pa-xs"},jb={class:"row justify-center"},Eb={class:"col col-md-6"},pl="Profil Perusahaan",Mb={__name:"Edit",setup(u){return(n,d)=>{const o=W("i-head"),s=W("authenticated-layout");return p(),w(Y,null,[e(o,{title:pl}),e(s,null,{title:l(()=>[_(r(pl))]),default:l(()=>[t("div",Ab,[t("div",jb,[t("div",Eb,[e(Vo)])])])]),_:1})],64)}}},Nb=Object.freeze(Object.defineProperty({__proto__:null,default:Mb},Symbol.toStringTag,{value:"Module"})),Bb={class:"col-xs-12 col-md-8"},zb={class:"col-xs-12 col-sm-9"},Fb={class:"col-xs-12 col-sm-3 text-right"},fl="Pengaturan Database & Utilitas",Lb={__name:"Index",setup(u){const n=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:"⚠️ **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:"⛔ **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:"❌ **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(d,o)=>{const s=W("i-head"),i=W("authenticated-layout");return p(),w(Y,null,[e(s,{title:fl}),e(i,null,{title:l(()=>[_(r(fl))]),default:l(()=>[e(Ve,{class:"row justify-center q-pa-xs"},{default:l(()=>[t("div",Bb,[e(ce,{square:"",flat:"",bordered:"",class:"full-width"},{default:l(()=>[e(ae,null,{default:l(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Kt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:l(()=>[e(S,{name:"warning",color:"red"})]),default:l(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=_(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(Je),e(ae,{class:"q-gutter-y-lg"},{default:l(()=>[(p(),w(Y,null,Ge(n,v=>t("div",{key:v.name,class:"row items-center q-col-gutter-md"},[t("div",zb,[e(le,{class:"q-pa-none"},{default:l(()=>[e(M,{avatar:"",class:"q-pr-md"},{default:l(()=>[e(S,{name:v.icon,color:v.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(M,{style:{"text-wrap":"initial"}},{default:l(()=>[e(_e,{class:"text-subtitle1 text-bold"},{default:l(()=>[_(r(v.name),1)]),_:2},1024),e(_e,{caption:"",class:"q-pb-sm"},{default:l(()=>[_(r(v.description),1)]),_:2},1024),e(_e,{class:"text-caption text-negative text-bold"},{default:l(()=>[_(r(v.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",Fb,[e(A,{icon:v.icon,label:v.name.split(" ")[0],color:v.color,disable:v.disable,onClick:v.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},Hb=Object.freeze(Object.defineProperty({__proto__:null,default:Lb},Symbol.toStringTag,{value:"Module"})),Kb={class:"q-pa-xs"},Yb={class:"row justify-center"},Wb={class:"col col-md-6"},Qb={__name:"Edit",setup(u){const n=fe(),d=ze({foot_note:n.props.data.foot_note,default_payment_mode:n.props.data.default_payment_mode,default_print_size:n.props.data.default_print_size,after_payment_action:n.props.data.after_payment_action}),o=()=>Ze({form:d,url:route("admin.pos-settings.edit")}),s=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],i=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],v=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(c,m)=>{const f=W("i-head"),b=W("authenticated-layout");return p(),w(Y,null,[e(f,{title:"Pengaturan POS"}),e(b,null,{title:l(()=>m[4]||(m[4]=[_("Pengaturan POS")])),default:l(()=>[t("div",Kb,[t("div",Yb,[t("div",Wb,[e(Fe,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[m[5]||(m[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),m[6]||(m[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(de,{modelValue:a(d).default_payment_mode,"onUpdate:modelValue":m[0]||(m[0]=k=>a(d).default_payment_mode=k),label:"Default Pembayaran",options:s,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.default_payment_mode,"error-message":a(d).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(d).default_print_size,"onUpdate:modelValue":m[1]||(m[1]=k=>a(d).default_print_size=k),label:"Default Ukuran Cetak",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.default_print_size,"error-message":a(d).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(d).after_payment_action,"onUpdate:modelValue":m[2]||(m[2]=k=>a(d).after_payment_action=k),label:"Aksi Setelah Pembayaran",options:v,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.after_payment_action,"error-message":a(d).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(d).foot_note,"onUpdate:modelValue":m[3]||(m[3]=k=>a(d).foot_note=k),modelModifiers:{trim:!0},label:"Foot Note",disable:a(d).processing,"lazy-rules":"",error:!!a(d).errors.foot_note,"error-message":a(d).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,null,{default:l(()=>[e(A,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(d).processing,loading:a(d).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},Jb=Object.freeze(Object.defineProperty({__proto__:null,default:Qb},Symbol.toStringTag,{value:"Module"})),Gb={class:"q-gutter-sm"},Xb={class:"q-gutter-sm"},Zb={class:"col col-md-6 q-pa-xs"},ev={class:"row"},tv={class:"detail-item"},av={class:"detail-value"},lv={class:"detail-item"},ov={class:"detail-value"},nv={class:"detail-item"},sv={class:"detail-value"},rv={class:"detail-item"},iv={class:"detail-value"},dv={class:"detail-item"},uv={class:"detail-value"},mv={class:"detail-item"},cv={class:"detail-value"},pv={class:"detail-item"},fv={class:"detail-value"},gv={class:"detail-item"},bv={class:"detail-value user-agent-value"},vv={class:"q-pt-md"},_v={class:"table-wrapper-scroll"},yv={key:0,class:"table-metadata"},kv={key:0},wv={colspan:"100%"},hv={class:"text-mono json-pre-scroll"},$v={key:1},xv={class:"metadata-label"},Sv={class:"metadata-value"},Vv={key:0,class:"text-mono json-pre-scroll"},qv={key:2},Cv={colspan:"3"},Tv={class:"table-metadata"},Pv={class:"metadata-label"},Ov={class:"metadata-value"},Rv={class:"metadata-value"},Iv={key:1,class:"text-grey-8 text-italic q-pa-sm"},gl="Rincian Log Aktifitas",Dv={__name:"Detail",setup(u){const n=fe(),d=()=>at({message:`Hapus log aktifitas #${n.props.data.id}?`,url:route("admin.user-activity-log.delete",n.props.data.id),onSuccess:()=>{Z.get(route("admin.user-activity-log.index"))}});return(o,s)=>{const i=W("i-head"),v=W("i-link"),c=W("authenticated-layout");return p(),w(Y,null,[e(i,{title:gl}),e(c,{"show-drawer-button":!0},{title:l(()=>[_(r(gl))]),"left-button":l(()=>[t("div",Gb,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=m=>o.$goBack())})])]),"right-button":l(()=>[t("div",Xb,[e(A,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:s[1]||(s[1]=m=>d())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Zb,[t("div",ev,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"detail-group"},{default:l(()=>[s[20]||(s[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",tv,[s[2]||(s[2]=t("div",{class:"detail-label"},"ID",-1)),s[3]||(s[3]=t("div",{class:"detail-separator"},":",-1)),t("div",av,r(a(n).props.data.id),1)]),t("div",lv,[s[4]||(s[4]=t("div",{class:"detail-label"},"Waktu",-1)),s[5]||(s[5]=t("div",{class:"detail-separator"},":",-1)),t("div",ov,r(a(ve)(a(n).props.data.logged_at)),1)]),t("div",nv,[s[6]||(s[6]=t("div",{class:"detail-label"},"Pengguna",-1)),s[7]||(s[7]=t("div",{class:"detail-separator"},":",-1)),t("div",sv,[e(v,{href:o.route("admin.user.detail",{id:a(n).props.data.user_id})},{default:l(()=>[_(r(a(n).props.data.username),1)]),_:1},8,["href"])])]),t("div",rv,[s[8]||(s[8]=t("div",{class:"detail-label"},"Kategori",-1)),s[9]||(s[9]=t("div",{class:"detail-separator"},":",-1)),t("div",iv,r(a(n).props.data.activity_category_label),1)]),t("div",dv,[s[10]||(s[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),s[11]||(s[11]=t("div",{class:"detail-separator"},":",-1)),t("div",uv,r(a(n).props.data.activity_name_label),1)]),t("div",mv,[s[12]||(s[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),s[13]||(s[13]=t("div",{class:"detail-separator"},":",-1)),t("div",cv,r(a(n).props.data.description),1)]),t("div",pv,[s[14]||(s[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),s[15]||(s[15]=t("div",{class:"detail-separator"},":",-1)),t("div",fv,r(a(n).props.data.ip_address),1)]),t("div",gv,[s[16]||(s[16]=t("div",{class:"detail-label"},"User Agent",-1)),s[17]||(s[17]=t("div",{class:"detail-separator"},":",-1)),t("div",bv,r(a(n).props.data.user_agent),1)]),t("div",vv,[s[19]||(s[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",_v,[Object.keys(a(n).props.data.metadata).length>0?(p(),w("table",yv,[t("tbody",null,[(p(!0),w(Y,null,Ge(a(n).props.formatted_metadata,(m,f)=>(p(),w(Y,{key:f},[m.type==="plain"?(p(),w("tr",kv,[t("td",wv,[t("pre",hv,r(m.value),1)])])):y("",!0),m.type==="simple"?(p(),w("tr",$v,[t("td",xv,r(m.label),1),t("td",Sv,[m.label=="Data Mentah (JSON)"?(p(),w("pre",Vv,r(m.value),1)):(p(),w(Y,{key:1},[_(r(m.value),1)],64))])])):y("",!0),m.type==="comparison"?(p(),w("tr",qv,[t("td",Cv,[t("table",Tv,[s[18]||(s[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header"},"Bidang"),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(p(!0),w(Y,null,Ge(m.value,(b,k)=>(p(),w("tr",{class:xe(b.new_value!==b.old_value?"value-changed":"")},[t("td",Pv,r(b.field),1),t("td",Ov,r(b.old_value),1),t("td",Rv,r(b.new_value),1)],2))),256))])])])])):y("",!0)],64))),128))])])):(p(),w("div",Iv," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Uv=_t(Dv,[["__scopeId","data-v-d5544ac7"]]),Av=Object.freeze(Object.defineProperty({__proto__:null,default:Uv},Symbol.toStringTag,{value:"Module"}));function jv(){return{protectClick:n=>(d,o)=>{const s=window.getSelection();if(s&&!s.isCollapsed){o.stopPropagation();return}n(d,o)}}}const Ev={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Mv={class:"q-pa-xs"},Nv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Bv={key:0},zv={class:"flex justify-end"},bl="Log Aktifitas Pengguna",Fv={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),{protectClick:m}=jv(),f=Pe({search:"",...Re()}),b=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),k=[{name:"id",label:n.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{$()});const g=x=>at({message:`Hapus log #${x.id}?`,url:route("admin.user-activity-log.delete",x.id),fetchItemsCallback:$,loading:s}),$=(x=null)=>{Ie({pagination:b,filter:f,props:x,rows:o,url:route("admin.user-activity-log.data"),loading:s,tableRef:i})},h=m(x=>Z.get(route("admin.user-activity-log.detail",{id:x.id}))),D=G(()=>n.screen.gt.sm?k:k.filter(x=>x.name==="id"||x.name==="action")),C=()=>{zt.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{bt("Seluruh log telah dibersihkan."),$()}).catch(x=>{var z,P;const I=((P=(z=x.response)==null?void 0:z.data)==null?void 0:P.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";gt(I,"bottom"),console.error(x)})})};return(x,I)=>{const z=W("i-head"),P=W("i-link"),j=W("authenticated-layout");return p(),w(Y,null,[e(z,{title:bl}),e(j,null,Le({title:l(()=>[_(r(bl))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=E=>d.value=!d.value)},null,8,["icon"]),x.$can("admin.user-activity-log.clear")?(p(),O(A,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:C})):y("",!0)]),default:l(()=>[t("div",Mv,[e(Ce,{class:"full-height-table",ref_key:"tableRef",ref:i,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:b.value,"onUpdate:pagination":I[4]||(I[4]=E=>b.value=E),filter:f.search,loading:s.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],style:je({height:a(c)}),onRequest:$,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:E,message:B,filter:N})=>[t("div",Nv,[t("span",null,r(B)+" "+r(N?" with term "+N:""),1)])]),body:l(E=>[e(qe,{props:E,class:"cursor-pointer",onClick:J(B=>a(h)(E.row,B),["stop"])},{default:l(()=>[e(L,{key:"id",props:E},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(p(),w(Y,{key:0},[e(S,{name:"tag",class:"inline-icon"}),I[5]||(I[5]=_(" ID Aktifitas: "))],64)):y("",!0),_(" "+r(E.row.id),1)]),a(n).screen.lt.md?(p(),w("div",Bv,[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+r(a(ve)(E.row.logged_at)),1)]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),e(P,{onClick:I[2]||(I[2]=J(()=>{},["stop"])),href:x.route("admin.user.detail",{id:E.row.user_id})},{default:l(()=>[_(r(E.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(S,{name:"category",class:"inline-icon"}),_(" "+r(E.row.activity_category_label)+" > "+r(E.row.activity_name_label),1)]),t("div",null,[e(S,{name:"notes",class:"inline-icon"}),_(" "+r(E.row.description),1)])])):y("",!0)]),_:2},1032,["props"]),e(L,{key:"logged_at",props:E},{default:l(()=>[_(r(a(ve)(E.row.logged_at)),1)]),_:2},1032,["props"]),e(L,{key:"username",props:E},{default:l(()=>[e(P,{onClick:I[3]||(I[3]=J(()=>{},["stop"])),href:x.route("admin.user.detail",{id:E.row.user_id})},{default:l(()=>[_(r(E.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(L,{key:"activity_category",props:E},{default:l(()=>[_(r(E.row.activity_category_label),1)]),_:2},1032,["props"]),e(L,{key:"activity_name",props:E},{default:l(()=>[_(r(E.row.activity_name_label),1)]),_:2},1032,["props"]),e(L,{key:"description",props:E,class:"wrap-column"},{default:l(()=>[_(r(E.row.description),1)]),_:2},1032,["props"]),e(L,{key:"action",props:E},{default:l(()=>[t("div",zv,[x.$can("admin.user-role.delete")?(p(),O(A,{key:0,onClick:J(B=>g(E.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Ev,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":I[1]||(I[1]=E=>f.search=E),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Lv=Object.freeze(Object.defineProperty({__proto__:null,default:Fv},Symbol.toStringTag,{value:"Module"})),qo={__name:"UpdatePasswordForm",setup(u){const n=V(!1),d=V(null),o=V(null),s=ze({current_password:"",password:"",password_confirmation:""}),i=()=>{s.clearErrors(),s.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>s.reset(),onError:()=>{s.errors.password&&(s.reset("password","password_confirmation"),d.value.focus()),s.errors.current_password&&(s.reset("current_password"),o.value.focus())}})};return(v,c)=>(p(),O(Fe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[c[6]||(c[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),c[7]||(c[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(oe,{modelValue:a(s).current_password,"onUpdate:modelValue":c[1]||(c[1]=m=>a(s).current_password=m),type:n.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.current_password,"error-message":a(s).errors.current_password,rules:[m=>m&&m.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(A,{dense:"",flat:"",round:"",onClick:c[0]||(c[0]=m=>n.value=!n.value)},{default:l(()=>[e(S,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(oe,{modelValue:a(s).password,"onUpdate:modelValue":c[3]||(c[3]=m=>a(s).password=m),type:n.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.password,"error-message":a(s).errors.password,rules:[m=>m&&m.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(A,{dense:"",flat:"",round:"",onClick:c[2]||(c[2]=m=>n.value=!n.value)},{default:l(()=>[e(S,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(oe,{modelValue:a(s).password_confirmation,"onUpdate:modelValue":c[5]||(c[5]=m=>a(s).password_confirmation=m),type:n.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:a(s).processing,error:!!a(s).errors.password_confirmation,"error-message":a(s).errors.password_confirmation,rules:[m=>m&&m.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(A,{dense:"",flat:"",round:"",onClick:c[4]||(c[4]=m=>n.value=!n.value)},{default:l(()=>[e(S,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(ae,null,{default:l(()=>[e(A,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:a(s).processing,loading:a(s).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Hv=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Co={__name:"UpdateProfileInformationForm",setup(u){const d=fe().props.auth.user,o=ze({name:d.name,username:d.username,type:window.CONSTANTS.USER_TYPES[d.type]}),s=()=>Ze({form:o,url:route("admin.user-profile.update")});return(i,v)=>(p(),O(Fe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[v[3]||(v[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),v[4]||(v[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(oe,{modelValue:a(o).username,"onUpdate:modelValue":v[0]||(v[0]=c=>a(o).username=c),label:"ID Pengguna",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(oe,{modelValue:a(o).name,"onUpdate:modelValue":v[1]||(v[1]=c=>a(o).name=c),modelModifiers:{trim:!0},label:"Nama",disable:a(o).processing,error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[c=>c&&c.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(o).type,"onUpdate:modelValue":v[2]||(v[2]=c=>a(o).type=c),label:"Jenis Akun",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(ae,null,{default:l(()=>[e(A,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Kv=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),Yv={class:"q-pa-xs"},Wv={class:"row justify-center"},Qv={class:"col col-md-6"},vl="Profil Saya",Jv={__name:"Edit",setup(u){return(n,d)=>{const o=W("i-head"),s=W("authenticated-layout");return p(),w(Y,null,[e(o,{title:vl}),e(s,null,{title:l(()=>[_(r(vl))]),default:l(()=>[t("div",Yv,[t("div",Wv,[t("div",Qv,[e(Co,{class:"q-mb-md"}),e(qo)])])])]),_:1})],64)}}},Gv=Object.freeze(Object.defineProperty({__proto__:null,default:Jv},Symbol.toStringTag,{value:"Module"})),Xv={class:"q-gutter-sm"},Zv={class:"q-gutter-sm"},e_={class:"col col-md-6 q-pa-xs"},t_={class:"row"},a_={class:"detail"},l_={key:0},o_={key:1,class:"text-grey-8 text-italic"},n_={key:2},s_={class:"text-subtitle2 text-bold text-grey-8 q-mt-xs"},r_={key:3,class:"text-grey-8 text-italic"},_l="Rincian Role Pengguna",i_={__name:"Detail",setup(u){const n=fe(),d=G(()=>{const o={};return n.props.data.permissions&&n.props.data.permissions.forEach(s=>{const i=s.category;o[i]||(o[i]=[]),o[i].push(s)}),o});return(o,s)=>{const i=W("i-head"),v=W("i-link"),c=W("authenticated-layout");return p(),w(Y,null,[e(i,{title:_l}),e(c,{"show-drawer-button":!0},{title:l(()=>[_(r(_l))]),"left-button":l(()=>[t("div",Xv,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=m=>o.$goBack())})])]),"right-button":l(()=>[t("div",Zv,[e(A,{icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:s[1]||(s[1]=m=>a(Z).get(o.route("admin.user-role.edit",{id:a(n).props.data.id})))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",e_,[t("div",t_,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[s[7]||(s[7]=t("div",{class:"text-subtitle1 text-bold text-grey-8"},"Info Role",-1)),t("table",a_,[t("tbody",null,[t("tr",null,[s[2]||(s[2]=t("td",{style:{width:"100px"}},"Nama Role",-1)),s[3]||(s[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[s[4]||(s[4]=t("td",null,"Deskripsi",-1)),s[5]||(s[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.description),1)])])]),s[8]||(s[8]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Pengguna ",-1)),a(n).props.data.users.length>0?(p(),w("div",l_,[(p(!0),w(Y,null,Ge(a(n).props.data.users,m=>(p(),w("div",null,[s[6]||(s[6]=_(" ● ")),e(v,{href:o.route("admin.user.detail",{id:m.id})},{default:l(()=>[_(r(m.username)+" - "+r(m.name),1)]),_:2},1032,["href"])]))),256))])):(p(),w("div",o_," Belum ada akun pengguna yang terdaftar. ")),s[9]||(s[9]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Hak Akses ",-1)),a(n).props.data.permissions.length>0?(p(),w("div",n_,[(p(!0),w(Y,null,Ge(d.value,(m,f)=>(p(),w("div",{key:f},[t("div",s_,r(f),1),(p(!0),w(Y,null,Ge(m,b=>(p(),w("div",{key:b.id}," ● "+r(b.label),1))),128))]))),128))])):(p(),w("div",r_," Belum ada hak akses yang ditetapkan. "))]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},d_=Object.freeze(Object.defineProperty({__proto__:null,default:i_},Symbol.toStringTag,{value:"Module"})),u_={class:"q-gutter-sm"},m_={class:"col col-md-6 q-pa-xs"},c_={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},p_={__name:"Editor",setup(u){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=ze({id:n.props.data.id??null,name:n.props.data.name,description:n.props.data.description,permissions:n.props.data.permissions?n.props.data.permissions.map(v=>v.id):[]}),s=()=>Ze({form:o,url:route("admin.user-role.save")}),i=G(()=>{const v={};return n.props.permissions&&n.props.permissions.forEach(c=>{const m=c.category;v[m]||(v[m]=[]),v[m].push(c)}),v});return(v,c)=>{const m=W("i-head"),f=W("authenticated-layout");return p(),w(Y,null,[e(m,{title:d}),e(f,{"show-drawer-button":!0},{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",u_,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=b=>v.$goBack())})])]),"right-button":l(()=>[e(A,{icon:"save",label:"Simpan",color:"primary",disable:a(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:J(s,["prevent"])},null,8,["disable"])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",m_,[e(Fe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=b=>a(o).id=b)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":c[2]||(c[2]=b=>a(o).name=b),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[b=>b&&b.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(o).description,"onUpdate:modelValue":c[3]||(c[3]=b=>a(o).description=b),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(p(!0),w(Y,null,Ge(i.value,(b,k)=>(p(),w("div",{key:k},[t("div",c_,r(k),1),(p(!0),w(Y,null,Ge(b,g=>(p(),w("div",{key:g.id},[e(la,{class:"q-ma-none q-pa-none list-checkbox",modelValue:a(o).permissions,"onUpdate:modelValue":$=>a(o).permissions=$,val:g.id,label:g.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},f_=_t(p_,[["__scopeId","data-v-2c2a059c"]]),g_=Object.freeze(Object.defineProperty({__proto__:null,default:f_},Symbol.toStringTag,{value:"Module"})),b_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},v_={class:"q-pa-xs"},__={class:"full-width row flex-center text-grey-8 q-gutter-sm"},y_={class:"flex justify-end"},yl="Role Pengguna",k_={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=Pe({search:"",...Re()}),f=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),b=[{name:"name",label:"Nama Role",field:"name",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{g()});const k=h=>at({message:`Hapus role ${h.name}?`,url:route("admin.user-role.delete",h.id),fetchItemsCallback:g,loading:s}),g=(h=null)=>{Ie({pagination:f,filter:m,props:h,rows:o,url:route("admin.user-role.data"),loading:s,tableRef:i})},$=h=>Z.get(route("admin.user-role.detail",{id:h.id})),U=G(()=>n.screen.gt.sm?b:b.filter(h=>h.name==="name"||h.name==="action"));return(h,D)=>{const C=W("i-head"),x=W("authenticated-layout");return p(),w(Y,null,[e(C,{title:yl}),e(x,null,Le({title:l(()=>[_(r(yl))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=I=>d.value=!d.value)},null,8,["icon"]),h.$can("admin.user-role.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[1]||(D[1]=I=>a(Z).get(h.route("admin.user-role.add")))})):y("",!0)]),default:l(()=>[t("div",v_,[e(Ce,{class:"full-height-table",ref_key:"tableRef",ref:i,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:f.value,"onUpdate:pagination":D[4]||(D[4]=I=>f.value=I),filter:m.search,loading:s.value,columns:U.value,rows:o.value,"rows-per-page-options":[10,25,50],style:je({height:a(c)}),onRequest:g,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:I,message:z,filter:P})=>[t("div",__,[t("span",null,r(z)+" "+r(P?" with term "+P:""),1)])]),body:l(I=>[e(qe,{props:I,class:"cursor-pointer",onClick:z=>$(I.row)},{default:l(()=>[e(L,{key:"name",props:I,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(p(),O(S,{key:0,name:"person"})):y("",!0),_(" "+r(I.row.name),1)])]),_:2},1032,["props"]),e(L,{key:"action",props:I},{default:l(()=>[t("div",y_,[h.$can("admin.user-role.add")||h.$can("admin.user-role.edit")||h.$can("admin.user-role.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[3]||(D[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[h.$can("admin.user-role.add")?ee((p(),O(le,{key:0,clickable:"",onClick:J(z=>a(Z).get(h.route("admin.user-role.duplicate",I.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>D[5]||(D[5]=[_(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),h.$can("admin.user-role.edit")?ee((p(),O(le,{key:1,clickable:"",onClick:J(z=>a(Z).get(h.route("admin.user-role.edit",I.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>D[6]||(D[6]=[_("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),h.$can("admin.user-role.delete")?ee((p(),O(le,{key:2,onClick:J(z=>k(I.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>D[7]||(D[7]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",b_,[e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":D[2]||(D[2]=I=>m.search=I),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},w_=Object.freeze(Object.defineProperty({__proto__:null,default:k_},Symbol.toStringTag,{value:"Module"})),h_={class:"q-gutter-sm"},$_={class:"q-gutter-sm"},x_={class:"row justify-center"},S_={class:"col col-md-6 q-pa-xs"},V_={class:"row"},q_={class:"detail"},C_={key:0},T_={key:0},P_={key:1},O_={key:2},kl="Rincian Pengguna",R_={__name:"Detail",setup(u){const n=fe();return(d,o)=>{const s=W("i-head"),i=W("i-link"),v=W("authenticated-layout");return p(),w(Y,null,[e(s,{title:kl}),e(v,{"show-drawer-button":!0},{title:l(()=>[_(r(kl))]),"left-button":l(()=>[t("div",h_,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=c=>d.$inertia.get(d.route("admin.user.index")))})])]),"right-button":l(()=>[t("div",$_,[d.$can("admin.user.edit")&&a(n).props.data.id!=a(n).props.auth.user.id?(p(),O(A,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:o[1]||(o[1]=c=>d.$inertia.get(d.route("admin.user.edit",{id:a(n).props.data.id})))})):y("",!0)])]),default:l(()=>[t("div",x_,[t("div",S_,[t("div",V_,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),t("table",q_,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"125px"}},"ID Pengguna",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.username),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Nama Pengguna",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Jenis Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.USER_TYPES[a(n).props.data.type]),1)]),a(n).props.data.roles.length>0?(p(),w("tr",C_,[o[8]||(o[8]=t("td",null,"Peran Pengguna",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,[(p(!0),w(Y,null,Ge(a(n).props.data.roles,(c,m)=>(p(),w("div",{key:c.id,class:"inline"},[e(i,{href:d.route("admin.user-role.detail",{id:c.id})},{default:l(()=>[_(r(c.name),1)]),_:2},1032,["href"]),m<a(n).props.data.roles.length-1?(p(),w("span",T_,", ")):y("",!0)]))),128))])])):y("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Dibuat",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.created_at)),1)]),a(n).props.data.updated_at?(p(),w("tr",P_,[o[12]||(o[12]=t("td",null,"Diperbarui",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(n).props.data.updated_at)),1)])):y("",!0),t("tr",null,[o[14]||(o[14]=t("td",null,"Terakhir login",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.last_login_datetime?d.$dayjs(a(n).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),a(n).props.data.last_activity_datetime?(p(),w("tr",O_,[o[17]||(o[17]=t("td",null,"Aktifitas Terakhir",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,[_(r(d.$dayjs(a(n).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),o[16]||(o[16]=t("br",null,null,-1)),_(r(a(n).props.data.last_activity_description),1)])])):y("",!0)])])]),_:1})]),_:1})])])])]),_:1})],64)}}},I_=Object.freeze(Object.defineProperty({__proto__:null,default:R_},Symbol.toStringTag,{value:"Module"}));function D_(u){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(u)}const U_={class:"q-gutter-sm"},A_={class:"row justify-center"},j_={class:"col col-md-6 q-pa-xs"},E_={__name:"Editor",setup(u){const n=tt(window.CONSTANTS.USER_TYPES),d=fe(),o=d.props.roles,s=d.props.data.id?"Edit Pengguna":"Tambah Pengguna",i=d.props.data.roles,v=Array.isArray(i)?i.map(f=>f.id):[],c=ze({id:d.props.data.id,name:d.props.data.name,username:d.props.data.username,password:"",type:d.props.data.type?d.props.data.type:n[0].value,active:!!d.props.data.active,roles:v}),m=()=>Ze({form:c,url:route("admin.user.save")});return(f,b)=>{const k=W("i-head"),g=W("authenticated-layout");return p(),w(Y,null,[e(k,{title:a(s)},null,8,["title"]),e(g,{"show-drawer-button":!0},{title:l(()=>[_(r(a(s)),1)]),"left-button":l(()=>[t("div",U_,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=$=>f.$goBack())})])]),default:l(()=>[t("div",A_,[t("div",j_,[e(Fe,{class:"row",onSubmit:J(m,["prevent"])},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=$=>a(c).id=$)},null,512),[[dt,a(c).id]]),e(oe,{autofocus:"",modelValue:a(c).username,"onUpdate:modelValue":b[2]||(b[2]=$=>a(c).username=$),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:a(c).processing,error:!!a(c).errors.username,"error-message":a(c).errors.username,rules:[$=>$&&$.length>0||"Username harus diisi.",$=>a(D_)($)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(oe,{modelValue:a(c).name,"onUpdate:modelValue":b[3]||(b[3]=$=>a(c).name=$),modelModifiers:{trim:!0},label:"Nama",error:!!a(c).errors.name,disable:a(c).processing,"error-message":a(c).errors.name,rules:[$=>$&&$.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(oe,{modelValue:a(c).password,"onUpdate:modelValue":b[4]||(b[4]=$=>a(c).password=$),type:"password",label:"Kata Sandi","lazy-rules":"",disable:a(c).processing,error:!!a(c).errors.password,"error-message":a(c).errors.password,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:a(c).type,"onUpdate:modelValue":b[5]||(b[5]=$=>a(c).type=$),label:"Jenis Akun",options:a(n),"map-options":"","emit-value":"","lazy-rules":"",disable:a(c).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(c).errors.type,"error-message":a(c).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),a(c).type=="standard_user"?(p(),O(de,{key:0,modelValue:a(c).roles,"onUpdate:modelValue":b[6]||(b[6]=$=>a(c).roles=$),label:"Peran",options:a(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:a(c).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(c).errors.roles||!!a(c).errors["roles.0"],"error-message":a(c).errors.roles||a(c).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):y("",!0),e(da,{modelValue:a(c).active,"onUpdate:modelValue":b[7]||(b[7]=$=>a(c).active=$),disable:a(c).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(c).processing,onClick:m},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",class:"text-black",disable:a(c).processing,onClick:b[8]||(b[8]=$=>f.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},M_=Object.freeze(Object.defineProperty({__proto__:null,default:E_},Symbol.toStringTag,{value:"Module"})),N_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},B_={class:"q-pa-xs"},z_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},F_={class:"elipsis",style:{"max-width":"200px"}},L_={class:"flex justify-end"},wl="Pengguna",H_={__name:"Index",setup(u){const n=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.USER_TYPES)],d=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=fe(),s=$e(),i=o.props.auth.user,v=V([]),c=V(!0),m=V(!1),f=Pe({role:"all",status:"active",search:""}),b=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),k=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];he(()=>{$()});const g=()=>$(),$=(z=null)=>Ie({pagination:b,props:z,rows:v,loading:c,filter:f,url:route("admin.user.data"),tableRef:C}),U=z=>at({url:route("admin.user.delete",z.id),message:`Hapus pengguna ${z.username}?`,fetchItemsCallback:$,loading:c}),h=G(()=>s.screen.gt.sm?k:k.filter(z=>z.name==="username"||z.name==="action")),D=z=>Z.get(route("admin.user.detail",z.id)),C=V(null),x=V(null),I=Ke(x);return(z,P)=>{const j=W("i-head"),E=W("authenticated-layout");return p(),w(Y,null,[e(j,{title:wl}),e(E,null,Le({title:l(()=>[_(r(wl))]),"right-button":l(()=>[e(A,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=B=>m.value=!m.value)},null,8,["icon"]),z.$can("admin.user.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:P[1]||(P[1]=B=>a(Z).get(z.route("admin.user.add")))})):y("",!0)]),default:l(()=>[t("div",B_,[e(Ce,{ref_key:"tableRef",ref:C,class:"full-height-table",style:je({height:a(I)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:b.value,"onUpdate:pagination":P[6]||(P[6]=B=>b.value=B),filter:f.search,loading:c.value,columns:h.value,rows:v.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:B,message:N,term:q})=>[t("div",z_,[t("span",null,r(N)+" "+r(q?" with term "+q:""),1)])]),body:l(B=>[e(qe,{props:B,class:xe([B.row.active?"":"bg-red-1","cursor-pointer"]),onClick:N=>D(B.row)},{default:l(()=>[e(L,{key:"username",props:B},{default:l(()=>[t("div",null,[a(s).screen.gt.sm?y("",!0):(p(),w(Y,{key:0},[e(S,{name:"person",class:"inline-icon"}),P[7]||(P[7]=_(" Username: "))],64)),_(" "+r(B.row.username),1)]),a(s).screen.gt.sm?y("",!0):(p(),w(Y,{key:0},[t("div",null,[e(S,{name:"person",class:"inline-icon"}),_(" Nama: "+r(B.row.name),1)]),t("div",F_,[e(S,{name:"group",class:"inline-icon"}),P[8]||(P[8]=_(" Jenis Akun: ")),t("span",null,r(z.$CONSTANTS.USER_TYPES[B.row.type]),1)]),t("div",null,[e(S,{name:"group",class:"inline-icon"}),_(" Peran: "+r(B.row.roles.map(N=>N.name).join(",")),1)])],64))]),_:2},1032,["props"]),e(L,{key:"name",props:B},{default:l(()=>[_(r(B.row.name),1)]),_:2},1032,["props"]),e(L,{key:"role",props:B,align:"center"},{default:l(()=>[t("span",null,r(z.$CONSTANTS.USER_TYPES[B.row.type]),1)]),_:2},1032,["props"]),e(L,{key:"action",props:B},{default:l(()=>[t("div",L_,[z.$can("admin.user.add")||z.$can("admin.user.edit")||z.$can("admin.user.delete")?(p(),O(A,{key:0,disable:B.row.id==a(i).id||B.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[5]||(P[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[z.$can("admin.user.add")?ee((p(),O(le,{key:0,clickable:"",onClick:J(N=>a(Z).get(z.route("admin.user.duplicate",B.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>P[9]||(P[9]=[_(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),z.$can("admin.user.edit")?ee((p(),O(le,{key:1,clickable:"",onClick:J(N=>a(Z).get(z.route("admin.user.edit",B.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>P[10]||(P[10]=[_("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),z.$can("admin.user.delete")?ee((p(),O(le,{key:2,onClick:J(N=>U(B.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>P[11]||(P[11]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:x},{default:l(()=>[t("div",N_,[e(de,{modelValue:f.type,"onUpdate:modelValue":[P[2]||(P[2]=B=>f.type=B),g],class:"custom-select col-xs-12 col-sm-2",options:n,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(de,{modelValue:f.status,"onUpdate:modelValue":[P[3]||(P[3]=B=>f.status=B),g],class:"custom-select col-xs-12 col-sm-2",options:d,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":P[4]||(P[4]=B=>f.search=B),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},K_=Object.freeze(Object.defineProperty({__proto__:null,default:H_},Symbol.toStringTag,{value:"Module"})),Y_={class:"q-gutter-sm"},W_={class:"col col-lg-6 q-pa-xs"},Q_={class:"row q-col-gutter-sm q-mb-md"},J_={key:0},G_={class:"text-bold"},X_={key:0},Z_={class:"text-caption text-grey-8"},ey={key:1},hl="Buat Penyesuaian Stok",ty={__name:"Create",setup(u){const n=fe(),d=n.props.products,{filteredCategories:o,filterCategories:s}=xa(n.props.categories),{filteredSuppliers:i,filterSupplierFn:v}=Sa(n.props.suppliers),c=V({search:null,category_id:null,supplier_id:null}),m=V([]),f=ze({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),b=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(D,C)=>K(D)+" "+C.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],k=tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),g=G(()=>d.filter(D=>{let C=!0;if(c.value.search){const x=c.value.search.toLowerCase();C=D.name.toLowerCase().includes(x)||D.description.toLowerCase().includes(x)||D.barcode&&D.barcode.toLowerCase().includes(x)}return C&&c.value.category_id&&(C=D.category_id===c.value.category_id),C&&c.value.supplier_id&&(C=D.supplier_id===c.value.supplier_id),C})),$=()=>{f.product_ids=m.value.map(D=>D.id),Jt(f,{datetime:"YYYY-MM-DD HH:mm:ss"}),Ze({form:f,url:route("admin.stock-adjustment.create")})},U=$e(),h=G(()=>U.screen.gt.sm?b:b.filter(D=>D.name==="name"));return(D,C)=>{const x=W("i-head"),I=W("authenticated-layout");return p(),w(Y,null,[e(x,{title:hl}),e(I,{"show-drawer-button":!0},{title:l(()=>[_(r(hl))]),"left-button":l(()=>[t("div",Y_,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:C[0]||(C[0]=z=>a(Z).get(D.route("admin.stock-adjustment.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",W_,[e(Fe,{class:"row",onSubmit:J($,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-sm"},{default:l(()=>[C[9]||(C[9]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Bt,{modelValue:a(f).datetime,"onUpdate:modelValue":C[1]||(C[1]=z=>a(f).datetime=z),label:"Waktu",error:!!a(f).errors.datetime,disable:a(f).processing,"error-message":a(f).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(de,{modelValue:a(f).type,"onUpdate:modelValue":C[2]||(C[2]=z=>a(f).type=z),options:a(k),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(f).errors.type,disable:a(f).processing,"map-options":"","emit-value":"","error-message":a(f).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(oe,{modelValue:a(f).notes,"onUpdate:modelValue":C[3]||(C[3]=z=>a(f).notes=z),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(f).processing,error:!!a(f).errors.notes,"error-message":a(f).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,null,{default:l(()=>[C[10]||(C[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",Q_,[e(oe,{modelValue:c.value.search,"onUpdate:modelValue":C[4]||(C[4]=z=>c.value.search=z),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(de,{modelValue:c.value.category_id,"onUpdate:modelValue":C[5]||(C[5]=z=>c.value.category_id=z),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"",dense:"","emit-value":"",onFilter:a(s),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(de,{modelValue:c.value.supplier_id,"onUpdate:modelValue":C[6]||(C[6]=z=>c.value.supplier_id=z),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(i),"map-options":"",dense:"","emit-value":"",onFilter:a(v),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),e(Ce,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:h.value,rows:g.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:m.value,"onUpdate:selected":C[7]||(C[7]=z=>m.value=z)},{"body-cell-name":l(z=>[e(L,{props:z},{default:l(()=>[a(U).screen.lt.md?(p(),w("div",J_,[t("div",G_,r(z.row.name),1),z.row.category?(p(),w("div",X_,r(z.row.category.name),1)):y("",!0),t("div",Z_,r(a(K)(z.row.stock))+" "+r(z.row.uom),1)])):(p(),w("div",ey,r(z.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"play_arrow",type:"submit",label:"Lanjutkan",color:"primary",disable:a(f).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(f).processing,onClick:C[8]||(C[8]=z=>a(Z).get(D.route("admin.stock-adjustment.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ay=Object.freeze(Object.defineProperty({__proto__:null,default:ty},Symbol.toStringTag,{value:"Module"})),ly={class:"q-gutter-sm"},oy={class:"row justify-center"},ny={class:"col col-lg-8 q-pa-sm"},sy={class:"row"},ry={class:"detail"},iy={key:0},dy={key:1},uy={class:"text-grey-9"},my={__name:"Detail",setup(u){const n=fe(),d=`Rincian Penyesuaian Stok #${n.props.data.id}`,o=n.props.details,s=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:c=>K(c)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:c=>K(c)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:c=>K(c)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],i=$e(),v=G(()=>i.screen.gt.sm?s:s.filter(c=>c.name==="no"));return(c,m)=>{const f=W("i-head"),b=W("i-link"),k=W("authenticated-layout");return p(),w(Y,null,[e(f,{title:d}),e(k,{"show-drawer-button":!0},{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",ly,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=g=>c.$inertia.get(c.route("admin.stock-adjustment.index")))})])]),default:l(()=>[t("div",oy,[t("div",ny,[t("div",sy,[e(ce,{square:"",flat:"",bordered:"",class:"q-card col"},{default:l(()=>[e(ae,null,{default:l(()=>[m[21]||(m[21]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",ry,[t("tbody",null,[t("tr",null,[m[1]||(m[1]=t("td",{style:{width:"120px"}},"ID",-1)),m[2]||(m[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"# "+r(a(n).props.data.id),1)]),t("tr",null,[m[3]||(m[3]=t("td",null,"Jenis",-1)),m[4]||(m[4]=t("td",null,":",-1)),t("td",null,r(c.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[a(n).props.data.type]),1)]),t("tr",null,[m[5]||(m[5]=t("td",null,"Status",-1)),m[6]||(m[6]=t("td",null,":",-1)),t("td",null,r(c.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[a(n).props.data.status]),1)]),t("tr",null,[m[7]||(m[7]=t("td",null,"Waktu",-1)),m[8]||(m[8]=t("td",null,":",-1)),t("td",null,r(c.$dayjs(a(n).props.data.datetime).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)]),a(n).props.data.created_at?(p(),w("tr",iy,[m[10]||(m[10]=t("td",null,"Dibuat Oleh",-1)),m[11]||(m[11]=t("td",null,":",-1)),t("td",null,[a(n).props.data.created_by?(p(),w(Y,{key:0},[e(b,{href:c.route("admin.user.detail",{id:a(n).props.data.created_by})},{default:l(()=>[_(r(a(n).props.data.created_by.username)+" - "+r(a(n).props.data.created_by.name),1)]),_:1},8,["href"]),m[9]||(m[9]=_(" - "))],64)):y("",!0),_(" "+r(c.$dayjs(new Date(a(n).props.data.created_at)).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)])])):y("",!0),a(n).props.data.updated_at?(p(),w("tr",dy,[m[13]||(m[13]=t("td",null,"Diperbarui oleh",-1)),m[14]||(m[14]=t("td",null,":",-1)),t("td",null,[a(n).props.data.updated_by?(p(),w(Y,{key:0},[e(b,{href:c.route("admin.user.detail",{id:a(n).props.data.updated_by})},{default:l(()=>[_(r(a(n).props.data.updated_by.username)+" - "+r(a(n).props.data.updated_by.name),1)]),_:1},8,["href"]),m[12]||(m[12]=_(" - "))],64)):y("",!0),_(" "+r(c.$dayjs(new Date(a(n).props.data.updated_at)).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)])])):y("",!0),t("tr",null,[m[15]||(m[15]=t("td",null,"Total Modal",-1)),m[16]||(m[16]=t("td",null,":",-1)),t("td",null,[t("div",{class:xe(a(n).props.data.total_cost<0?"text-red-10":a(n).props.data.total_cost>0?"text-green-10":"")}," Rp. "+r(a(K)(a(n).props.data.total_cost)),3)])]),t("tr",null,[m[17]||(m[17]=t("td",null,"Total Harga",-1)),m[18]||(m[18]=t("td",null,":",-1)),t("td",null,[t("div",{class:xe(a(n).props.data.total_price<0?"text-red-10":a(n).props.data.total_price>0?"text-green-10":"")}," Rp. "+r(a(K)(a(n).props.data.total_price)),3)])]),t("tr",null,[m[19]||(m[19]=t("td",null,"Catatan",-1)),m[20]||(m[20]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)])])])]),_:1}),e(ae,null,{default:l(()=>[m[26]||(m[26]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Ce,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",dense:"",columns:v.value,rows:a(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":l(g=>[e(L,{props:g},{default:l(()=>[a(i).screen.lt.md?(p(),w(Y,{key:1},[t("div",uy,[t("b",null,"#"+r(g.rowIndex+1),1),_(" - "+r(g.row.product_name),1)]),t("div",null,[_(" Stok Lama: "+r(a(K)(g.row.old_quantity))+" "+r(g.row.uom),1),m[23]||(m[23]=t("br",null,null,-1)),_(" Stok Baru: "+r(a(K)(g.row.new_quantity))+" "+r(g.row.uom),1),m[24]||(m[24]=t("br",null,null,-1)),t("div",{class:xe(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},[_(" Selisih: "+r((g.row.balance>0?"+":"")+a(K)(g.row.balance))+" "+r(g.row.uom),1),m[22]||(m[22]=t("br",null,null,-1)),_(" (Rp. "+r(a(K)(g.row.subtotal_cost))+" / Rp. "+r(a(K)(g.row.subtotal_price))+") ",1)],2),m[25]||(m[25]=t("br",null,null,-1)),_(" "+r(g.row.notes),1)])],64)):(p(),w(Y,{key:0},[_(r(g.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-balance":l(g=>[e(L,{props:g},{default:l(()=>[t("div",{class:xe(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},r((g.row.balance>0?"+":"")+a(K)(g.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":l(g=>[e(L,{props:g},{default:l(()=>[t("div",{class:xe(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},r(a(K)(g.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":l(g=>[e(L,{props:g},{default:l(()=>[t("div",{class:xe(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},r(a(K)(g.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},cy=Object.freeze(Object.defineProperty({__proto__:null,default:my},Symbol.toStringTag,{value:"Module"})),py={class:"q-gutter-sm"},fy={class:"col col-lg-6 q-pa-xs"},gy={class:"text-bold"},by={key:0},vy={class:"text-caption text-grey-8"},$l="Penyesuaian Stok",_y={__name:"Editor",setup(u){const n=fe(),d=ze({id:n.props.item.id,type:n.props.item.type,datetime:new Date(n.props.item.datetime),notes:n.props.item.notes,action:"save",details:[]}),o=tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),s=n.props.details,i=f=>{const b=()=>{d.action=f,d.details=s.map(k=>({id:k.id,new_quantity:k.new_quantity})),Jt(d,{datetime:"YYYY-MM-DD HH:mm:ss"}),Ze({form:d,url:route("admin.stock-adjustment.save")})};f==="close"||f==="cancel"?zt.create({title:"Konfirmasi",message:"Aksi ini tidak dapat dibatalkan, apakah Anda yakin?",cancel:!0,persistent:!0}).onOk(()=>{b()}).onCancel(()=>{}):b()},v=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:f=>K(f)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:f=>K(f)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(f,b)=>K(b.new_quantity-b.old_quantity)}],c=$e(),m=G(()=>c.screen.gt.sm?v:v.filter(f=>f.name==="product_name"||f.name==="new_quantity"));return(f,b)=>{const k=W("i-head"),g=W("authenticated-layout");return p(),w(Y,null,[e(k,{title:$l}),e(g,{"show-drawer-button":!0},{title:l(()=>[_(r($l))]),"left-button":l(()=>[t("div",py,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=$=>f.$inertia.get(f.route("admin.stock-adjustment.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",fy,[e(Fe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>b[8]||(b[8]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=$=>a(d).id=$)},null,512),[[dt,a(d).id]]),e(Bt,{modelValue:a(d).datetime,"onUpdate:modelValue":b[2]||(b[2]=$=>a(d).datetime=$),label:"Waktu",error:!!a(d).errors.datetime,disable:a(d).processing,"error-message":a(d).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(de,{modelValue:a(d).type,"onUpdate:modelValue":b[3]||(b[3]=$=>a(d).type=$),options:a(o),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(d).errors.type,disable:a(d).processing,"map-options":"","emit-value":"","error-message":a(d).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(oe,{modelValue:a(d).notes,"onUpdate:modelValue":b[4]||(b[4]=$=>a(d).notes=$),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(d).processing,error:!!a(d).errors.notes,"error-message":a(d).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-pa-xs"},{default:l(()=>[e(Ce,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:m.value,rows:a(s),"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":l($=>[e(L,{props:$},{default:l(()=>[t("div",gy,r($.row.product_name),1),a(c).screen.lt.md?(p(),w("div",by,[t("div",vy,[_(" Tercatat: "+r(a(K)($.row.old_quantity))+" ",1),b[9]||(b[9]=t("br",null,null,-1)),_(" Selisih: "+r(a(K)($.row.new_quantity-$.row.old_quantity)),1)])])):y("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":l($=>[e(L,{props:$,class:"text-center"},{default:l(()=>[e(Ue,{modelValue:$.row[$.col.name],"onUpdate:modelValue":U=>$.row[$.col.name]=U,modelModifiers:{number:!0},"input-class":"text-right",dense:"",style:{width:"60px"},"hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",onClick:b[5]||(b[5]=$=>i("save")),label:"Simpan",color:"primary",disable:a(d).processing},null,8,["disable"]),e(A,{icon:"done_all",onClick:b[6]||(b[6]=$=>i("close")),label:"Selesaikan",color:"green",disable:a(d).processing},null,8,["disable"]),e(A,{icon:"close",onClick:b[7]||(b[7]=$=>i("cancel")),label:"Batalkan",color:"red",disable:a(d).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},yy=Object.freeze(Object.defineProperty({__proto__:null,default:_y},Symbol.toStringTag,{value:"Module"})),ky={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},wy={class:"q-pa-xs"},hy={class:"full-width row flex-center text-grey-8 q-gutter-sm"},$y={key:0,class:"flex q-gutter-xs"},xy={class:"flex q-col-gutter-xs"},Sy={key:0},Vy={key:1},qy={class:"flex justify-end"},xl="Penyesuaian Stok",Cy={__name:"Index",setup(u){const n=V([]),d=V(!0),o=V(!1),s=V(null),i=V(null),v=Ke(i),c=Pe({search:"",status:"all",type:"all",...Re()}),m=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],f=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],b=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),k=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];he(()=>{$()});const g=x=>at({message:`Hapus Transaksi #${x.id}?`,url:route("admin.stock-adjustment.delete",x.id),fetchItemsCallback:$,loading:d}),$=(x=null)=>Ie({pagination:b,filter:c,props:x,rows:n,url:route("admin.stock-adjustment.data"),loading:d,tableRef:s}),U=()=>{$()},h=x=>{x.status=="draft"?Z.get(route("admin.stock-adjustment.editor",x.id)):Z.get(route("admin.stock-adjustment.detail",x.id))},D=$e(),C=G(()=>D.screen.gt.sm?k:k.filter(x=>x.name==="id"||x.name==="action"));return(x,I)=>{const z=W("i-head"),P=W("authenticated-layout");return p(),w(Y,null,[e(z,{title:xl}),e(P,null,Le({"right-button":l(()=>[e(A,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=j=>o.value=!o.value)},null,8,["icon"]),x.$can("admin.stock-adjustment.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=j=>a(Z).get(x.route("admin.stock-adjustment.create")))})):y("",!0)]),title:l(()=>[_(r(xl))]),default:l(()=>[t("div",wy,[e(Ce,{ref_key:"tableRef",ref:s,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:b.value,"onUpdate:pagination":I[6]||(I[6]=j=>b.value=j),filter:c.search,loading:d.value,columns:C.value,rows:n.value,"rows-per-page-options":[10,25,50],style:je({height:a(v)}),onRequest:$,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:j,message:E,filter:B})=>[t("div",hy,[t("span",null,r(E)+" "+r(B?" with term "+B:""),1)])]),body:l(j=>[e(qe,{props:j,onClick:E=>h(j.row),class:"cursor-pointer"},{default:l(()=>[e(L,{key:"id",props:j},{default:l(()=>[a(D).screen.lt.md?(p(),w(Y,{key:1},[t("div",xy,[t("div",null,"#"+r(j.row.formatted_id),1),t("div",null,[e(S,{name:"history"}),_(" "+r(x.$dayjs(new Date(j.row.datetime)).format("DD/MM/YYYY HH:mm")),1)]),e(Il,{dense:"",size:"sm",color:j.row.status==="draft"?"orange":j.row.status==="closed"?"green":j.row.status==="canceled"?"red":"",icon:j.row.status==="draft"?"emergency":j.row.status==="closed"?"check":j.row.status==="canceled"?"close":""},{default:l(()=>[_(r(x.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[j.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(S,{name:"category"}),_(" "+r(x.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[j.row.type]),1)]),j.row.created_by?(p(),w("div",Sy,[e(S,{name:"person"}),I[7]||(I[7]=_(" Dibuat: ")),t("b",null,r(j.row.created_by.username),1),e(S,{name:"history"}),_(" "+r(x.$dayjs(new Date(j.row.created_at)).format("DD/MM/YYYY HH:mm")),1)])):y("",!0),j.row.updated_by?(p(),w("div",Vy,[e(S,{name:"person"}),I[8]||(I[8]=_(" Diperbarui: ")),t("b",null,r(j.row.updated_by.username),1),e(S,{name:"history"}),_(" "+r(x.$dayjs(new Date(j.row.updated_at)).format("DD/MM/YYYY HH:mm")),1)])):y("",!0),t("div",{class:xe(j.row.total_cost<0?"text-red-10":j.row.total_cost>0?"text-green-10":"")},[e(S,{name:"money"}),_(" Rp. "+r(a(K)(j.row.total_cost))+" / Rp. "+r(a(K)(j.row.total_price)),1)],2)],64)):(p(),w("div",$y," #"+r(j.row.formatted_id),1))]),_:2},1032,["props"]),e(L,{key:"datetime",props:j},{default:l(()=>[_(r(x.$dayjs(new Date(j.row.datetime)).format("DD/MM/YYYY HH:mm")),1)]),_:2},1032,["props"]),e(L,{key:"status",props:j,class:"text-center"},{default:l(()=>[_(r(x.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[j.row.status]),1)]),_:2},1032,["props"]),e(L,{key:"type",props:j},{default:l(()=>[_(r(x.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[j.row.type]),1)]),_:2},1032,["props"]),e(L,{key:"total_cost",props:j},{default:l(()=>[t("div",{class:xe(j.row.total_cost<0?"text-red-10":j.row.total_cost>0?"text-green-10":"")},r(a(K)(j.row.total_cost)),3)]),_:2},1032,["props"]),e(L,{key:"total_price",props:j},{default:l(()=>[t("div",{class:xe(j.row.total_price<0?"text-red-10":j.row.total_price>0?"text-green-10":"")},r(a(K)(j.row.total_price)),3)]),_:2},1032,["props"]),e(L,{key:"notes",props:j},{default:l(()=>[_(r(j.row.notes),1)]),_:2},1032,["props"]),e(L,{key:"action",props:j},{default:l(()=>[t("div",qy,[x.$can("admin.stock-adjustment.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[5]||(I[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[x.$can("admin.stock-adjustment.delete")?ee((p(),O(le,{key:0,onClick:J(E=>g(j.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>I[9]||(I[9]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:i},{default:l(()=>[t("div",ky,[e(de,{modelValue:c.status,"onUpdate:modelValue":[I[2]||(I[2]=j=>c.status=j),U],options:m,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:c.type,"onUpdate:modelValue":[I[3]||(I[3]=j=>c.type=j),U],options:f,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":I[4]||(I[4]=j=>c.search=j),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ty=Object.freeze(Object.defineProperty({__proto__:null,default:Cy},Symbol.toStringTag,{value:"Module"})),Py={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Oy={class:"q-pa-xs"},Ry={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Iy={key:0},Sl="Riwayat Stok",Dy={__name:"Index",setup(u){fe();const n=V(null),d=V(null),o=Ke(d),s=Wt();Qt();const i=[{label:"Semua Tahun",value:"all"},{label:`${s}`,value:s},...At(s-2,s-1).reverse()],v=[{value:"all",label:"Semua Bulan"},...jt()],c=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],m=$e(),f=V(!1),b=V([]),k=V(!0),g=Pe({type:"all",search:"",...Re()}),$=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let U=[{name:"id",label:m.screen.lt.sm?"Item":"#",field:"id",align:"left",sortable:!0},{name:"created_at",label:"Waktu",field:"created_at",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Qty Awal",field:"quantity_before",align:"right"},{name:"quantity_after",label:"Qty Akhir",field:"quantity_after",align:"right"},{name:"quantity",label:"Selisih",field:"quantity",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{const I=new URLSearchParams(window.location.search).get("page");I&&($.value.page=parseInt(I)),h()});const h=(x=null)=>{Ie({pagination:$,filter:g,props:x,rows:b,url:route("admin.stock-movement.data"),loading:k,tableRef:n})},D=()=>{h()},C=G(()=>{let x=[...U];return m.screen.gt.sm?x:x.filter(I=>I.name==="id"||I.name==="quantity")});return(x,I)=>{const z=W("i-head"),P=W("authenticated-layout");return p(),w(Y,null,[e(z,{title:Sl}),e(P,null,Le({title:l(()=>[_(r(Sl))]),"right-button":l(()=>[e(A,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=j=>f.value=!f.value)},null,8,["icon"])]),default:l(()=>[t("div",Oy,[e(Ce,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:$.value,"onUpdate:pagination":I[5]||(I[5]=j=>$.value=j),filter:g.search,loading:k.value,columns:C.value,rows:b.value,"rows-per-page-options":[10,25,50],style:je({height:a(o)}),onRequest:h,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:j,message:E,filter:B})=>[t("div",Ry,[t("span",null,r(E)+" "+r(B?" with term "+B:""),1)])]),body:l(j=>[e(qe,{props:j},{default:l(()=>[e(L,{key:"id",props:j},{default:l(()=>[t("div",null,[a(m).screen.lt.sm?(p(),w(Y,{key:0},[t("div",null,[e(ut,null,{default:l(()=>[_(r(x.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[j.row.ref_type]),1)]),_:2},1024)]),e(S,{class:"inline-icon",name:"tag"})],64)):y("",!0),_(" "+r(j.row.formatted_id),1)]),a(m).screen.lt.sm?(p(),w(Y,{key:0},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),_(" "+r(a(ve)(j.row.created_at)),1)]),t("div",null,[e(S,{name:"token",class:"inline-icon"}),_(" "+r(j.row.product.name),1)]),t("div",{class:xe(j.row.quantity>0?"text-positive":"text-negative")},[e(S,{class:"inline-icon",name:"compare_arrows"}),_(" "+r(a(K)(j.row.quantity_before))+" "+r(j.row.uom)+" → "+r(a(K)(j.row.quantity_after))+" "+r(j.row.uom),1)],2),e(we,{text:j.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):y("",!0)]),_:2},1032,["props"]),e(L,{key:"created_at",props:j},{default:l(()=>[_(r(a(ve)(j.row.created_at)),1)]),_:2},1032,["props"]),e(L,{key:"type",props:j},{default:l(()=>[_(r(x.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[j.row.ref_type])+" ",1),j.row.ref?(p(),w("span",Iy,r(j.row.ref),1)):y("",!0)]),_:2},1032,["props"]),e(L,{key:"product",props:j},{default:l(()=>[_(r(j.row.product.name),1)]),_:2},1032,["props"]),e(L,{key:"quantity_before",props:j},{default:l(()=>[_(r(a(K)(j.row.quantity_before))+" "+r(j.row.uom),1)]),_:2},1032,["props"]),e(L,{key:"quantity_after",props:j},{default:l(()=>[_(r(a(K)(j.row.quantity_after))+" "+r(j.row.uom),1)]),_:2},1032,["props"]),e(L,{key:"quantity",props:j,class:xe(j.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[_(r(a(K)(j.row.quantity))+" "+r(j.row.uom),1)]),_:2},1032,["props","class"]),e(L,{key:"notes",props:j},{default:l(()=>[e(we,{text:j.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[f.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:d},{default:l(()=>[t("div",Py,[e(de,{modelValue:g.year,"onUpdate:modelValue":[I[1]||(I[1]=j=>g.year=j),D],options:i,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),g.year!="all"?(p(),O(de,{key:0,modelValue:g.month,"onUpdate:modelValue":[I[2]||(I[2]=j=>g.month=j),D],options:v,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:g.year===null},null,8,["modelValue","disable"])):y("",!0),e(de,{modelValue:g.ref_type,"onUpdate:modelValue":[I[3]||(I[3]=j=>g.ref_type=j),D],options:c,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":I[4]||(I[4]=j=>g.search=j),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Uy=Object.freeze(Object.defineProperty({__proto__:null,default:Dy},Symbol.toStringTag,{value:"Module"})),Ay={class:"detail"},jy={colspan:"3"},Ey={class:"text-bold text-grey-8"},My={key:0},Ny={key:1},By={key:2},zy={key:3},Fy={key:4},Ly={key:5},Hy={key:6},To={__name:"MainInfoTab",setup(u){const n=fe();return(d,o)=>(p(),w("table",Ay,[t("tbody",null,[t("tr",null,[t("td",jy,[t("div",Ey,[o[1]||(o[1]=_(" Info Pemasok ")),d.$can("admin.supplier.edit")?(p(),O(A,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=s=>d.$inertia.get(d.route("admin.supplier.edit",{id:a(n).props.data.id})))})):y("",!0)])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),a(n).props.data.phone_1?(p(),w("tr",My,[o[4]||(o[4]=t("td",null,"No Telepon",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.phone_1),1)])):y("",!0),a(n).props.data.phone_2?(p(),w("tr",Ny,[o[6]||(o[6]=t("td",null,"No Telepon 2",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.phone_2),1)])):y("",!0),a(n).props.data.phone_3?(p(),w("tr",By,[o[8]||(o[8]=t("td",null,"No Telepon 3",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.phone_3),1)])):y("",!0),a(n).props.data.address?(p(),w("tr",zy,[o[10]||(o[10]=t("td",null,"Alamat",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.address),1)])):y("",!0),a(n).props.data.return_address?(p(),w("tr",Fy,[o[12]||(o[12]=t("td",null,"Alamat Retur",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.return_address),1)])):y("",!0),a(n).props.data.bank_account_name_1||a(n).props.data.bank_account_number_1||a(n).props.data.bank_account_holder_1?(p(),w("tr",Ly,[o[14]||(o[14]=t("td",null,"Rek 1",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.bank_account_name_1)+" "+r(a(n).props.data.bank_account_number_1)+" a.n. "+r(a(n).props.data.bank_account_holder_1),1)])):y("",!0),a(n).props.data.bank_account_name_2||a(n).props.data.bank_account_number_2||a(n).props.data.bank_account_holder_2?(p(),w("tr",Hy,[o[16]||(o[16]=t("td",null,"Rek 2",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.bank_account_name_2)+" "+r(a(n).props.data.bank_account_number_2)+" a.n. "+r(a(n).props.data.bank_account_holder_2),1)])):y("",!0),t("tr",null,[o[18]||(o[18]=t("td",null,"Status",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)])])]))}},Ky=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),Yy={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Wy={class:"text-bold"},Qy={class:"text-bold"},Jy={key:0},Po={__name:"OrderHistoryTab",setup(u){const n=fe(),d=V([]),o=V(!0),s=Pe({customer_id:n.props.data.id,...Re()}),i=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),v=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{c()});const c=(b=null)=>Ie({pagination:i,filter:s,props:b,rows:d,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:n.props.data.id}}),loading:o}),m=$e(),f=G(()=>m.screen.gt.sm?v:v.filter(b=>b.name==="id"));return(b,k)=>(p(),O(Ce,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:i.value,"onUpdate:pagination":k[0]||(k[0]=g=>i.value=g),filter:s.search,loading:o.value,columns:f.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:c,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:g,message:$,filter:U})=>[t("div",Yy,[t("span",null,r($)+" "+r(U?" with term "+U:""),1)])]),body:l(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:J($=>a(Z).get(b.route("admin.purchase-order.detail",{id:g.row.id})),["stop"])},{default:l(()=>[e(L,{key:"id",props:g},{default:l(()=>[t("div",Wy,[e(S,{class:"inline-icon",name:"tag"}),_(" "+r(g.row.formatted_id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),_(" "+r(a(ve)(g.row.datetime)),1)]),a(m).screen.lt.md?(p(),w(Y,{key:0},[t("div",Qy,[e(S,{name:"money",class:"inline-icon"}),_(" Rp. "+r(a(K)(g.row.grand_total)),1)]),g.row.notes?(p(),w("div",Jy,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):y("",!0)],64)):y("",!0),t("div",null,[e(ut,{color:g.row.status=="closed"?"green":"red"},{default:l(()=>[_(r(b.$CONSTANTS.SALES_ORDER_STATUSES[g.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(L,{key:"grand_total",props:g},{default:l(()=>[t("div",null,r(a(K)(g.row.grand_total)),1)]),_:2},1032,["props"]),e(L,{key:"notes",props:g,class:"wrap-column"},{default:l(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Gy=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Xy={class:"q-gutter-sm"},Zy={class:"col col-lg-6 q-pa-xs"},ek={class:"row"},Vl="Rincian Pemasok",tk={__name:"Detail",setup(u){fe();const n=V("main");return $e(),(d,o)=>{const s=W("i-head"),i=W("authenticated-layout");return p(),w(Y,null,[e(s,{title:Vl}),e(i,null,{title:l(()=>[_(r(Vl))]),"left-button":l(()=>[t("div",Xy,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.customer.index")))})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",Zy,[t("div",ek,[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ot,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=v=>n.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(lt,{name:"main",label:"Info Utama"}),e(lt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=v=>n.value=v),animated:""},{default:l(()=>[e(ot,{name:"main"},{default:l(()=>[e(To)]),_:1}),e(ot,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(Po)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},ak=Object.freeze(Object.defineProperty({__proto__:null,default:tk},Symbol.toStringTag,{value:"Module"})),lk={class:"q-gutter-sm"},ok={class:"col col-md-6 q-pa-xs"},nk={class:"row q-col-gutter-md"},sk={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},rk={key:2,class:"row q-col-gutter-md"},ik={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},dk={key:4,class:"row q-col-gutter-md"},uk={key:5,class:"row q-col-gutter-md"},mk={style:{"margin-left":"-10px"},class:"q-mt-md"},ck={class:"q-mt-sm"},pk={__name:"Editor",setup(u){const n=fe(),d=(n.props.data.id?"Edit":"Tambah")+" Pemasok",o=ze({id:n.props.data.id,name:n.props.data.name,phone_1:n.props.data.phone_1,phone_2:n.props.data.phone_2,url_1:n.props.data.url_1,url_2:n.props.data.url_2,bank_account_name_1:n.props.data.bank_account_name_1,bank_account_holder_1:n.props.data.bank_account_holder_1,bank_account_number_1:n.props.data.bank_account_number_1,bank_account_name_2:n.props.data.bank_account_name_2,bank_account_holder_2:n.props.data.bank_account_holder_2,bank_account_number_2:n.props.data.bank_account_number_2,address:n.props.data.address,return_address:n.props.data.return_address,active:!!n.props.data.active}),s=V(!0),i=()=>Ze({form:o,url:route("admin.supplier.save")});return(v,c)=>{const m=W("i-head"),f=W("authenticated-layout");return p(),w(Y,null,[e(m,{title:d}),e(f,{"show-drawer-button":!0},{title:l(()=>[_(r(d))]),"left-button":l(()=>[t("div",lk,[e(A,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=b=>v.$goBack())})])]),default:l(()=>[e(Ve,{class:"row justify-center"},{default:l(()=>[t("div",ok,[e(Fe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Be)},{default:l(()=>[e(ce,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[ee(t("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=b=>a(o).id=b)},null,512),[[dt,a(o).id]]),e(oe,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":c[2]||(c[2]=b=>a(o).name=b),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[b=>b&&b.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",nk,[e(oe,{modelValue:a(o).phone_1,"onUpdate:modelValue":c[3]||(c[3]=b=>a(o).phone_1=b),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_1,"error-message":a(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),s.value?y("",!0):(p(),O(oe,{key:0,modelValue:a(o).phone_2,"onUpdate:modelValue":c[4]||(c[4]=b=>a(o).phone_2=b),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_2,"error-message":a(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(oe,{modelValue:a(o).address,"onUpdate:modelValue":c[5]||(c[5]=b=>a(o).address=b),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),s.value?y("",!0):(p(),O(oe,{key:0,modelValue:a(o).return_address,"onUpdate:modelValue":c[6]||(c[6]=b=>a(o).return_address=b),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.return_address,"error-message":a(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),s.value?y("",!0):(p(),w("div",sk," Rekening 1 ")),s.value?y("",!0):(p(),w("div",rk,[e(oe,{modelValue:a(o).bank_account_name_1,"onUpdate:modelValue":c[7]||(c[7]=b=>a(o).bank_account_name_1=b),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_1,"error-message":a(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_number_1,"onUpdate:modelValue":c[8]||(c[8]=b=>a(o).bank_account_number_1=b),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_1,"error-message":a(o).errors.bank_account_number_1,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_holder_1,"onUpdate:modelValue":c[9]||(c[9]=b=>a(o).bank_account_holder_1=b),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_1,"error-message":a(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),s.value?y("",!0):(p(),w("div",ik," Rekening 2 ")),s.value?y("",!0):(p(),w("div",dk,[e(oe,{modelValue:a(o).bank_account_name_2,"onUpdate:modelValue":c[10]||(c[10]=b=>a(o).bank_account_name_2=b),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_2,"error-message":a(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_number_2,"onUpdate:modelValue":c[11]||(c[11]=b=>a(o).bank_account_number_2=b),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_2,"error-message":a(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).bank_account_holder_2,"onUpdate:modelValue":c[12]||(c[12]=b=>a(o).bank_account_holder_2=b),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_2,"error-message":a(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),s.value?y("",!0):(p(),w("div",uk,[e(oe,{modelValue:a(o).url_1,"onUpdate:modelValue":c[13]||(c[13]=b=>a(o).url_1=b),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_1,"error-message":a(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(oe,{modelValue:a(o).url_2,"onUpdate:modelValue":c[14]||(c[14]=b=>a(o).url_2=b),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_2,"error-message":a(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",mk,[e(la,{class:"full-width q-pl-none",modelValue:a(o).active,"onUpdate:modelValue":c[15]||(c[15]=b=>a(o).active=b),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",ck,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:c[16]||(c[16]=J(b=>s.value=!s.value,["stop"]))},[e(S,{name:s.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),_(" "+r(s.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(A,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(A,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:c[17]||(c[17]=b=>v.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},fk=Object.freeze(Object.defineProperty({__proto__:null,default:pk},Symbol.toStringTag,{value:"Module"})),gk={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},bk={class:"q-pa-xs"},vk={class:"full-width row flex-center text-grey-8 q-gutter-sm"},_k={key:0},yk={key:1},kk={class:"flex justify-end"},ql="Pemasok",wk={__name:"Index",setup(u){const n=$e(),d=V(!1),o=V([]),s=V(!0),i=V(null),v=V(null),c=Ke(v),m=Pe({search:"",status:"active",...Re()}),f=V({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),b=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],k=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{$()});const g=C=>at({message:`Hapus pemasok ${C.name}?`,url:route("admin.supplier.delete",C.id),fetchItemsCallback:$,loading:s}),$=(C=null)=>{Ie({pagination:f,filter:m,props:C,rows:o,url:route("admin.supplier.data"),loading:s,tableRef:i})},U=()=>$(),h=C=>Z.get(route("admin.supplier.detail",{id:C.id})),D=G(()=>n.screen.gt.sm?b:b.filter(C=>C.name==="name"||C.name==="action"));return(C,x)=>{const I=W("i-head"),z=W("authenticated-layout");return p(),w(Y,null,[e(I,{title:ql}),e(z,null,Le({title:l(()=>[_(r(ql))]),"right-button":l(()=>[e(A,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=P=>d.value=!d.value)},null,8,["icon"]),C.$can("admin.supplier.add")?(p(),O(A,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=P=>a(Z).get(C.route("admin.supplier.add")))})):y("",!0)]),default:l(()=>[t("div",bk,[e(Ce,{class:"full-height-table",ref_key:"tableRef",ref:i,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:f.value,"onUpdate:pagination":x[5]||(x[5]=P=>f.value=P),filter:m.search,loading:s.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],style:je({height:a(c)}),onRequest:$,"binary-state-sort":""},{loading:l(()=>[e(Ae,{showing:"",color:"red"})]),"no-data":l(({icon:P,message:j,filter:E})=>[t("div",vk,[t("span",null,r(j)+" "+r(E?" with term "+E:""),1)])]),body:l(P=>[e(qe,{props:P,class:xe([P.row.active?"":"bg-red-1","cursor-pointer"]),onClick:j=>h(P.row)},{default:l(()=>[e(L,{key:"name",props:P,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(p(),O(S,{key:0,name:"person"})):y("",!0),_(" "+r(P.row.name),1)]),a(n).screen.lt.md?(p(),w(Y,{key:0},[P.row.phone_1?(p(),w("div",_k,[e(S,{name:"phone"}),_(" "+r(P.row.phone_1),1)])):y("",!0),P.row.address?(p(),w("div",yk,[e(S,{name:"home_pin"}),_(" "+r(P.row.address),1)])):y("",!0)],64)):y("",!0)]),_:2},1032,["props"]),e(L,{key:"phone_1",props:P},{default:l(()=>[_(r(P.row.phone_1),1)]),_:2},1032,["props"]),e(L,{key:"address",props:P},{default:l(()=>[_(r(P.row.address),1)]),_:2},1032,["props"]),e(L,{key:"action",props:P},{default:l(()=>[t("div",kk,[C.$can("admin.supplier.add")||C.$can("admin.supplier.edit")||C.$can("admin.supplier.delete")?(p(),O(A,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[4]||(x[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Xe,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Me,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.supplier.add")?ee((p(),O(le,{key:0,clickable:"",onClick:J(j=>a(Z).get(C.route("admin.supplier.duplicate",P.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"file_copy"})]),_:1}),e(M,null,{default:l(()=>x[6]||(x[6]=[_(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),C.$can("admin.supplier.edit")?ee((p(),O(le,{key:1,clickable:"",onClick:J(j=>a(Z).get(C.route("admin.supplier.edit",P.row.id)),["stop"])},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"edit"})]),_:1}),e(M,null,{default:l(()=>x[7]||(x[7]=[_("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0),C.$can("admin.supplier.delete")?ee((p(),O(le,{key:2,onClick:J(j=>g(P.row),["stop"]),clickable:""},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"delete_forever"})]),_:1}),e(M,null,{default:l(()=>x[8]||(x[8]=[_("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[ue]]):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):y("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(et,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",gk,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[x[2]||(x[2]=P=>m.status=P),U],options:k,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(oe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":x[3]||(x[3]=P=>m.search=P),placeholder:"Cari",clearable:""},{append:l(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},hk=Object.freeze(Object.defineProperty({__proto__:null,default:wk},Symbol.toStringTag,{value:"Module"})),$k=$t({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(u,{slots:n,emit:d}){let o=!1,s,i,v=null,c=null,m,f;function b(){s&&s(),s=null,o=!1,v!==null&&(clearTimeout(v),v=null),c!==null&&(clearTimeout(c),c=null),i!==void 0&&i.removeEventListener("transitionend",m),m=null}function k(h,D,C){D!==void 0&&(h.style.height=`${D}px`),h.style.transition=`height ${u.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,s=C}function g(h,D){h.style.overflowY=null,h.style.height=null,h.style.transition=null,b(),D!==f&&d(D)}function $(h,D){let C=0;i=h,o===!0?(b(),C=h.offsetHeight===h.scrollHeight?0:void 0):(f="hide",h.style.overflowY="hidden"),k(h,C,D),v=setTimeout(()=>{v=null,h.style.height=`${h.scrollHeight}px`,m=x=>{c=null,(Object(x)!==x||x.target===h)&&g(h,"show")},h.addEventListener("transitionend",m),c=setTimeout(m,u.duration*1.1)},100)}function U(h,D){let C;i=h,o===!0?b():(f="show",h.style.overflowY="hidden",C=h.scrollHeight),k(h,C,D),v=setTimeout(()=>{v=null,h.style.height=0,m=x=>{c=null,(Object(x)!==x||x.target===h)&&g(h,"hide")},h.addEventListener("transitionend",m),c=setTimeout(m,u.duration*1.1)},100)}return oa(()=>{o===!0&&b()}),()=>ke(Pl,{css:!1,appear:u.appear,onEnter:$,onLeave:U},n.default)}}),It=Sn({}),xk=Object.keys(El),St=$t({name:"QExpansionItem",props:{...El,...qn,...ka,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Vn,"click","afterShow","afterHide"],setup(u,{slots:n,emit:d}){const{proxy:{$q:o}}=Tt(),s=wa(u,o),i=V(u.modelValue!==null?u.modelValue:u.defaultOpened),v=V(null),c=Cn(),{show:m,hide:f,toggle:b}=Tn({showing:i});let k,g;const $=G(()=>`q-expansion-item q-item-type q-expansion-item--${i.value===!0?"expanded":"collapsed"} q-expansion-item--${u.popup===!0?"popup":"standard"}`),U=G(()=>u.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:u.contentInsetLevel*56+"px"}),h=G(()=>u.disable!==!0&&(u.href!==void 0||u.to!==void 0&&u.to!==null&&u.to!=="")),D=G(()=>{const ne={};return xk.forEach(Te=>{ne[Te]=u[Te]}),ne}),C=G(()=>h.value===!0||u.expandIconToggle!==!0),x=G(()=>u.expandedIcon!==void 0&&i.value===!0?u.expandedIcon:u.expandIcon||o.iconSet.expansionItem[u.denseToggle===!0?"denseIcon":"icon"]),I=G(()=>u.disable!==!0&&(h.value===!0||u.expandIconToggle===!0)),z=G(()=>({expanded:i.value===!0,detailsId:c.value,toggle:b,show:m,hide:f})),P=G(()=>{const ne=u.toggleAriaLabel!==void 0?u.toggleAriaLabel:o.lang.label[i.value===!0?"collapse":"expand"](u.label);return{role:"button","aria-expanded":i.value===!0?"true":"false","aria-controls":c.value,"aria-label":ne}});Ee(()=>u.group,ne=>{g!==void 0&&g(),ne!==void 0&&Q()});function j(ne){h.value!==!0&&b(ne),d("click",ne)}function E(ne){ne.keyCode===13&&B(ne,!0)}function B(ne,Te){Te!==!0&&v.value!==null&&v.value.focus(),b(ne),Ut(ne)}function N(){d("afterShow")}function q(){d("afterHide")}function Q(){k===void 0&&(k=Pn()),i.value===!0&&(It[u.group]=k);const ne=Ee(i,Ne=>{Ne===!0?It[u.group]=k:It[u.group]===k&&delete It[u.group]}),Te=Ee(()=>It[u.group],(Ne,ft)=>{ft===k&&Ne!==void 0&&Ne!==k&&f()});g=()=>{ne(),Te(),It[u.group]===k&&delete It[u.group],g=void 0}}function te(){const ne={class:[`q-focusable relative-position cursor-pointer${u.denseToggle===!0&&u.switchToggleSide===!0?" items-end":""}`,u.expandIconClass],side:u.switchToggleSide!==!0,avatar:u.switchToggleSide},Te=[ke(S,{class:"q-expansion-item__toggle-icon"+(u.expandedIcon===void 0&&i.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:x.value})];return I.value===!0&&(Object.assign(ne,{tabindex:0,...P.value,onClick:B,onKeyup:E}),Te.unshift(ke("div",{ref:v,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),ke(M,ne,()=>Te)}function T(){let ne;return n.header!==void 0?ne=[].concat(n.header(z.value)):(ne=[ke(M,()=>[ke(_e,{lines:u.labelLines},()=>u.label||""),u.caption?ke(_e,{lines:u.captionLines,caption:!0},()=>u.caption):null])],u.icon&&ne[u.switchToggleSide===!0?"push":"unshift"](ke(M,{side:u.switchToggleSide===!0,avatar:u.switchToggleSide!==!0},()=>ke(S,{name:u.icon})))),u.disable!==!0&&u.hideExpandIcon!==!0&&ne[u.switchToggleSide===!0?"unshift":"push"](te()),ne}function R(){const ne={ref:"item",style:u.headerStyle,class:u.headerClass,dark:s.value,disable:u.disable,dense:u.dense,insetLevel:u.headerInsetLevel};return C.value===!0&&(ne.clickable=!0,ne.onClick=j,Object.assign(ne,h.value===!0?D.value:P.value)),ke(le,ne,T)}function X(){return ee(ke("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:U.value,id:c.value},Ct(n.default)),[[Dl,i.value]])}function ge(){const ne=[R(),ke($k,{duration:u.duration,onShow:N,onHide:q},X)];return u.expandSeparator===!0&&ne.push(ke(Je,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:s.value}),ke(Je,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:s.value})),ne}return u.group!==void 0&&Q(),oa(()=>{g!==void 0&&g()}),()=>ke("div",{class:$.value},[ke("div",{class:"q-expansion-item__container relative-position"},ge())])}}),Sk={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},Vk={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},qk={class:"text-bold"},Ck={class:"text-grey-8 text-caption"},Tk={class:"absolute-bottom text-grey-6 q-pa-md"},va="amanah-pos.layout.left-drawer-open",Pk={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(u,{expose:n}){const d=$e(),o=fe(),s=V(JSON.parse(localStorage.getItem(va))),i=V(!1),v=()=>s.value=!s.value,c=()=>{s.value=!1};return Ee(s,m=>{localStorage.setItem(va,m)}),he(()=>{s.value=JSON.parse(localStorage.getItem(va)),d.screen.lt.md&&(s.value=!1)}),n({hideDrawer:c}),(m,f)=>(p(),O(jn,{view:"lHh LpR lFf"},{default:l(()=>[e(On,null,{default:l(()=>[e(et,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:l(()=>[u.showDrawerButton&&!s.value?(p(),O(A,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:v},{default:l(()=>[e(S,{class:"material-symbols-outlined"},{default:l(()=>f[28]||(f[28]=[_("dock_to_right")])),_:1})]),_:1})):y("",!0),Dt(m.$slots,"left-button",{},void 0,!0),e(Rn,{style:{"font-size":"16px"}},{default:l(()=>[Dt(m.$slots,"title",{},()=>[_(r(m.$config.APP_NAME),1)],!0)]),_:3}),Dt(m.$slots,"right-button",{},void 0,!0)]),_:3}),Dt(m.$slots,"header",{},void 0,!0)]),_:3}),e(In,{breakpoint:768,modelValue:s.value,"onUpdate:modelValue":f[27]||(f[27]=b=>s.value=b),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:l(()=>[t("div",Sk,[t("div",Vk,[e(Dn,{modelValue:i.value,"onUpdate:modelValue":f[2]||(f[2]=b=>i.value=b),class:xe(["profile-btn text-bold",{"profile-btn-active":i.value}]),flat:"",label:a(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:l(()=>[e(Me,{id:"profile-btn-popup",style:{color:"#444"}},{default:l(()=>[e(le,null,{default:l(()=>[e(Lt,{style:{"margin-left":"-15px"}},{default:l(()=>[e(S,{name:"person"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>[t("div",qk,r(a(o).props.auth.user.name),1),t("div",Ck,[_(r(m.$CONSTANTS.USER_TYPES[a(o).props.auth.user.type])+" ",1),f[29]||(f[29]=t("br",null,null,-1)),_(" "+r(a(o).props.company.name),1)])]),_:1})]),_:1})]),_:1}),e(Je),ee((p(),O(le,{class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/profile"),onClick:f[0]||(f[0]=b=>a(Z).get(m.route("admin.profile.edit")))},{default:l(()=>[e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>[e(S,{name:"manage_accounts",class:"q-mr-sm"}),f[30]||(f[30]=_(" Profil Saya"))]),_:1})]),_:1})]),_:1},8,["active"])),[[ue],[se]]),m.$can("admin.company-profile.edit")?ee((p(),O(le,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/company-profile"),onClick:f[1]||(f[1]=b=>a(Z).get(m.route("admin.company-profile.edit")))},{default:l(()=>[e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>[e(S,{name:"home_work",class:"q-mr-sm"}),f[31]||(f[31]=_(" Profil Perusahaan"))]),_:1})]),_:1})]),_:1},8,["active"])),[[ue],[se]]):y("",!0),e(Je),ee((p(),O(le,{clickable:"",style:{color:"inherit"},href:m.route("admin.auth.logout")},{default:l(()=>[e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>[e(S,{name:"logout",class:"q-mr-sm"}),f[32]||(f[32]=_(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[ue],[se]])]),_:1})]),_:1},8,["modelValue","label","class"]),s.value?(p(),O(A,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:v},{default:l(()=>[e(S,{name:"dock_to_right"})]),_:1})):y("",!0)])]),e(Un,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:l(()=>[e(Me,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:l(()=>[ee((p(),O(le,{clickable:"",active:m.$page.url.startsWith("/admin/dashboard"),onClick:f[3]||(f[3]=b=>a(Z).get(m.route("admin.dashboard")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"dashboard"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[33]||(f[33]=[_("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]),m.$can("admin.sales-order.index")||m.$can("admin.customer.index")?(p(),O(St,{key:0,icon:"storefront",label:"Penjualan","default-opened":m.$page.url.startsWith("/admin/sales-orders")||m.$page.url.startsWith("/admin/customers")},{default:l(()=>[m.$can("admin.sales-order.index")?ee((p(),O(le,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/sales-orders"),onClick:f[4]||(f[4]=b=>a(Z).get(m.route("admin.sales-order.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"shopping_cart"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[34]||(f[34]=[_("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.customer.index")?ee((p(),O(le,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/customers"),onClick:f[5]||(f[5]=b=>a(Z).get(m.route("admin.customer.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"people"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[35]||(f[35]=[_("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0)]),_:1},8,["default-opened"])):y("",!0),m.$can("admin.purchase-order.index")||m.$can("admin.supplier.index")?(p(),O(St,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":m.$page.url.startsWith("/admin/purchase-orders")||m.$page.url.startsWith("/admin/suppliers")},{default:l(()=>[m.$can("admin.purchase-order.index")?ee((p(),O(le,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/purchase-orders"),onClick:f[6]||(f[6]=b=>a(Z).get(m.route("admin.purchase-order.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"shopping_cart"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[36]||(f[36]=[_("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.supplier.index")?ee((p(),O(le,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/suppliers"),onClick:f[7]||(f[7]=b=>a(Z).get(m.route("admin.supplier.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"people"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[37]||(f[37]=[_("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0)]),_:1},8,["default-opened"])):y("",!0),m.$can("admin.product.index")||m.$can("admin.product-category.index")||m.$can("admin.stock-adjustment.index")||m.$can("admin.stock-movement.index")?(p(),O(St,{key:2,icon:"inventory_2",label:"Inventori","default-opened":m.$page.url.startsWith("/admin/products")||m.$page.url.startsWith("/admin/product-categories")||m.$page.url.startsWith("/admin/stock-adjustments")||m.$page.url.startsWith("/admin/stock-movements")},{default:l(()=>[m.$can("admin.stock-adjustment.index")?ee((p(),O(le,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/stock-adjustments"),onClick:f[8]||(f[8]=b=>a(Z).get(m.route("admin.stock-adjustment.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"swap_vert"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[38]||(f[38]=[_("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.stock-movement.index")?ee((p(),O(le,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/stock-movements"),onClick:f[9]||(f[9]=b=>a(Z).get(m.route("admin.stock-movement.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"timeline"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[39]||(f[39]=[_("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.product.index")?ee((p(),O(le,{key:2,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/products"),onClick:f[10]||(f[10]=b=>a(Z).get(m.route("admin.product.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"box"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[40]||(f[40]=[_("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.product-category.index")?ee((p(),O(le,{key:3,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/product-categories"),onClick:f[11]||(f[11]=b=>a(Z).get(m.route("admin.product-category.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"category"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[41]||(f[41]=[_("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0)]),_:1},8,["default-opened"])):y("",!0),m.$can("admin.cashier-session.index")||m.$can("admin.cashier-terminal.index")?(p(),O(St,{key:3,icon:"point_of_sale",label:"Kasir","default-opened":m.$page.url.startsWith("/admin/cashier-terminals")||m.$page.url.startsWith("/admin/cashier-session")},{default:l(()=>[m.$can("admin.cashier-session.index")?ee((p(),O(le,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/cashier-sessions"),onClick:f[12]||(f[12]=b=>a(Z).get(m.route("admin.cashier-session.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"tv_signin"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[42]||(f[42]=[_("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.cashier-terminal.index")?ee((p(),O(le,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/cashier-terminals"),onClick:f[13]||(f[13]=b=>a(Z).get(m.route("admin.cashier-terminal.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"point_of_sale"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[43]||(f[43]=[_("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0)]),_:1},8,["default-opened"])):y("",!0),m.$can("admin.customer-wallet-transaction-confirmation.index")||m.$can("admin.customer-wallet-transaction.index")?(p(),O(St,{key:4,icon:"wallet",label:"Wallet","default-opened":m.$page.url.startsWith("/admin/customer-wallet-transactions")||m.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:l(()=>[m.$can("admin.customer-wallet-transaction-confirmation.index")?ee((p(),O(le,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:f[14]||(f[14]=b=>a(Z).get(m.route("admin.customer-wallet-transaction-confirmation.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"add_task"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[44]||(f[44]=[_("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.customer-wallet-transaction.index")?ee((p(),O(le,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:f[15]||(f[15]=b=>a(Z).get(m.route("admin.customer-wallet-transaction.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"moving"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[45]||(f[45]=[_("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0)]),_:1},8,["default-opened"])):y("",!0),m.$can("admin.finance-transaction.index")||m.$can("admin.finance-account.index")?(p(),O(St,{key:5,icon:"finance",label:"Keuangan","default-opened":m.$page.url.startsWith("/admin/finance-accounts")||m.$page.url.startsWith("/admin/finance-transactions")},{default:l(()=>[m.$can("admin.finance-transaction.index")?ee((p(),O(le,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/finance-transactions"),onClick:f[16]||(f[16]=b=>a(Z).get(m.route("admin.finance-transaction.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"moving"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[46]||(f[46]=[_("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.finance-account.index")?ee((p(),O(le,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/finance-accounts"),onClick:f[17]||(f[17]=b=>a(Z).get(m.route("admin.finance-account.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"groups_2"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[47]||(f[47]=[_("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0)]),_:1},8,["default-opened"])):y("",!0),m.$can("admin.operational-cost.index")||m.$can("admin.operational-cost-category.index")?(p(),O(St,{key:6,icon:"paid",label:"Operasional","default-opened":m.$page.url.startsWith("/admin/operational-costs")||m.$page.url.startsWith("/admin/operational-cost-categories")},{default:l(()=>[m.$can("admin.operational-cost.index")?ee((p(),O(le,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/operational-costs"),onClick:f[18]||(f[18]=b=>a(Z).get(m.route("admin.operational-cost.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"request_quote"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[48]||(f[48]=[_("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.operational-cost-category.index")?ee((p(),O(le,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/operational-cost-categories"),onClick:f[19]||(f[19]=b=>a(Z).get(m.route("admin.operational-cost-category.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"category"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[49]||(f[49]=[_("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0)]),_:1},8,["default-opened"])):y("",!0),e(St,{icon:"settings",label:"Pengaturan","default-opened":m.$page.url.startsWith("/admin/settings")},{default:l(()=>[m.$can("admin.user.index")?ee((p(),O(le,{key:0,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/users"),onClick:f[20]||(f[20]=b=>a(Z).get(m.route("admin.user.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"person"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[50]||(f[50]=[_("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.user-role.index")?ee((p(),O(le,{key:1,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/user-roles"),onClick:f[21]||(f[21]=b=>a(Z).get(m.route("admin.user-role.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"group"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[51]||(f[51]=[_("Role Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.pos-settings.edit")?ee((p(),O(le,{key:2,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/pos"),onClick:f[22]||(f[22]=b=>a(Z).get(m.route("admin.pos-settings.edit")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"point_of_sale"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[52]||(f[52]=[_("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.company-profile.edit")?ee((p(),O(le,{key:3,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/company-profile"),onClick:f[23]||(f[23]=b=>a(Z).get(m.route("admin.company-profile.edit")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"apartment"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[53]||(f[53]=[_("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.user.index")?ee((p(),O(le,{key:4,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:f[24]||(f[24]=b=>a(Z).get(m.route("admin.user-activity-log.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"article"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[54]||(f[54]=[_("Log Aktivitas")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0),m.$can("admin.database-settings.index")?ee((p(),O(le,{key:5,class:"subnav",clickable:"",active:m.$page.url.startsWith("/admin/settings/database"),onClick:f[25]||(f[25]=b=>a(Z).get(m.route("admin.database-settings.index")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"database"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[55]||(f[55]=[_("Database")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):y("",!0)]),_:1},8,["default-opened"]),ee((p(),O(le,{clickable:"",active:m.$page.url.startsWith("/admin/settings/profile"),onClick:f[26]||(f[26]=b=>a(Z).get(m.route("admin.user-profile.edit")))},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"manage_accounts"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[56]||(f[56]=[_("Profil Saya")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]),ee((p(),O(le,{clickable:"",style:{color:"inherit"},href:m.route("admin.auth.logout")},{default:l(()=>[e(M,{avatar:""},{default:l(()=>[e(S,{name:"logout"})]),_:1}),e(M,null,{default:l(()=>[e(_e,null,{default:l(()=>f[57]||(f[57]=[_("Logout")])),_:1})]),_:1})]),_:1},8,["href"])),[[ue],[se]]),t("div",Tk," © 2025 - "+r(m.$config.APP_NAME+" v"+m.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(An,{class:"bg-grey-1"},{default:l(()=>[e(Ve,null,{default:l(()=>[Dt(m.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),Dt(m.$slots,"footer",{},void 0,!0)]),_:3}))}},Ok=_t(Pk,[["__scopeId","data-v-7ce8908e"]]),Rk={__name:"GuestLayout",setup(u){return(n,d)=>(p(),O(En,null,{default:l(()=>[Dt(n.$slots,"default")]),_:3}))}};Mn({onRegistered(u){console.log("Admin Service Worker registered:",u)}});Nn({layouts:{authenticated:Ok,guest:Rk},pagesGlob:Object.assign({"./pages/About.vue":Hn,"./pages/_examples/Autocomplete1.vue":Qn,"./pages/auth/Login.vue":as,"./pages/cashier-session/Close.vue":ds,"./pages/cashier-session/Detail.vue":Zs,"./pages/cashier-session/Index.vue":nr,"./pages/cashier-session/Open.vue":dr,"./pages/cashier-session/detail/FinanceTransactionTab.vue":Ws,"./pages/cashier-session/detail/MainInfoTab.vue":Is,"./pages/cashier-session/detail/SalesOrderTab.vue":zs,"./pages/cashier-terminal/Detail.vue":Sr,"./pages/cashier-terminal/Editor.vue":Pr,"./pages/cashier-terminal/Index.vue":Ar,"./pages/cashier-terminal/detail/MainInfoTab.vue":vr,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":kr,"./pages/customer-wallet-transaction-confirmation/Detail.vue":Yr,"./pages/customer-wallet-transaction-confirmation/Index.vue":Xr,"./pages/customer-wallet-transaction/Adjustment.vue":ti,"./pages/customer-wallet-transaction/Detail.vue":ci,"./pages/customer-wallet-transaction/Editor.vue":bi,"./pages/customer-wallet-transaction/Index.vue":$i,"./pages/customer/Detail.vue":Hi,"./pages/customer/Editor.vue":Qi,"./pages/customer/Import.vue":ad,"./pages/customer/Index.vue":id,"./pages/customer/detail/MainInfoTab.vue":Ri,"./pages/customer/detail/OrderHistoryTab.vue":Ni,"./pages/customer/detail/WalletHistoryTab.vue":Ui,"./pages/dashboard/Index.vue":Td,"./pages/dashboard/cards/ActualSummaryCard.vue":gd,"./pages/dashboard/cards/ChartCard.vue":kd,"./pages/dashboard/cards/SummaryCard.vue":Md,"./pages/dashboard/cards/TopCard.vue":xd,"./pages/finance-account/Detail.vue":Gd,"./pages/finance-account/Editor.vue":au,"./pages/finance-account/Index.vue":gu,"./pages/finance-account/detail/HistoryTab.vue":Hd,"./pages/finance-account/detail/MainInfoTab.vue":Bd,"./pages/finance-transaction/Detail.vue":Vu,"./pages/finance-transaction/Editor.vue":Pu,"./pages/finance-transaction/Index.vue":Eu,"./pages/operational-cost-category/Editor.vue":zu,"./pages/operational-cost-category/Index.vue":Qu,"./pages/operational-cost/Detail.vue":sm,"./pages/operational-cost/Editor.vue":cm,"./pages/operational-cost/Index.vue":wm,"./pages/product-category/Editor.vue":Sm,"./pages/product-category/Index.vue":Rm,"./pages/product/Detail.vue":ec,"./pages/product/Editor.vue":oc,"./pages/product/Import.vue":ic,"./pages/product/Index.vue":yc,"./pages/product/detail/MainInfoTab.vue":Lm,"./pages/product/detail/StockHistoryTab.vue":Ym,"./pages/purchase-order/Detail.vue":yp,"./pages/purchase-order/Editor.vue":zf,"./pages/purchase-order/Index.vue":tg,"./pages/purchase-order/detail/InvoiceTab.vue":Fc,"./pages/purchase-order/detail/PaymentDialog.vue":Gc,"./pages/purchase-order/detail/PaymentTab.vue":fp,"./pages/purchase-order/editor/HelpDialog.vue":Xp,"./pages/purchase-order/editor/ItemEditorDialog.vue":Kp,"./pages/purchase-order/editor/ItemsListTable.vue":xp,"./pages/purchase-order/editor/OrderInfoDialog.vue":af,"./pages/purchase-order/editor/PaymentDialog.vue":Np,"./pages/purchase-order/editor/SuccessDialog.vue":bf,"./pages/sales-order/Detail.vue":t1,"./pages/sales-order/Editor.vue":vb,"./pages/sales-order/Index.vue":Db,"./pages/sales-order/detail/InvoiceTab.vue":Vg,"./pages/sales-order/detail/PaymentDialog.vue":Dg,"./pages/sales-order/detail/PaymentTab.vue":Gg,"./pages/sales-order/editor/HelpDialog.vue":T1,"./pages/sales-order/editor/ItemEditorDialog.vue":S1,"./pages/sales-order/editor/ItemsListTable.vue":s1,"./pages/sales-order/editor/OrderInfoDialog.vue":I1,"./pages/sales-order/editor/PaymentDialog.vue":h1,"./pages/sales-order/editor/SuccessDialog.vue":K1,"./pages/settings/company-profile/Edit.vue":Nb,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":Ub,"./pages/settings/database/Index.vue":Hb,"./pages/settings/pos/Edit.vue":Jb,"./pages/settings/user-activity-log/Detail.vue":Av,"./pages/settings/user-activity-log/Index.vue":Lv,"./pages/settings/user-profile/Edit.vue":Gv,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":Hv,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":Kv,"./pages/settings/user-role/Detail.vue":d_,"./pages/settings/user-role/Editor.vue":g_,"./pages/settings/user-role/Index.vue":w_,"./pages/settings/user/Detail.vue":I_,"./pages/settings/user/Editor.vue":M_,"./pages/settings/user/Index.vue":K_,"./pages/stock-adjustment/Create.vue":ay,"./pages/stock-adjustment/Detail.vue":cy,"./pages/stock-adjustment/Editor.vue":yy,"./pages/stock-adjustment/Index.vue":Ty,"./pages/stock-movement/Index.vue":Uy,"./pages/supplier/Detail.vue":ak,"./pages/supplier/Editor.vue":fk,"./pages/supplier/Index.vue":hk,"./pages/supplier/detail/MainInfoTab.vue":Ky,"./pages/supplier/detail/OrderHistoryTab.vue":Gy})});
