import{_ as _t,r as Z,c as w,o as c,a as e,w as l,b as t,Q as ge,d as ae,e as v,F as Q,f as q,g as O,h as k,i as ce,t as r,u as a,j as K,k as Oe,l as oa,T as We,m as dn,n as ve,p as Te,q as Qe,s as J,v as rt,x as ea,y as T,z as se,A as I,B as tt,C as Ye,D as le,E as kt,G as yt,N as ee,H as un,I as $a,J as Kl,K as Rt,L as X,M as ca,O as $e,R as ue,P as Ve,S as Hl,U as mn,V as cn,W as Kt,X as St,Y as xa,Z as Ca,$ as pn,a0 as He,a1 as fn,a2 as gn,a3 as bn,a4 as At,a5 as vn,a6 as yn,a7 as Sa,a8 as Qt,a9 as Va,aa as Ma,ab as _n,ac as da,ad as Ba,ae as kn,af as za,ag as wn,ah as Yl,ai as hn,aj as $n,ak as xn,al as Pa,am as Ra,an as Sn,ao as Et,ap as be,aq as De,ar as Ne,as as Me,at as Se,au as Pe,av as W,aw as he,ax as vt,ay as Le,az as Ie,aA as Jt,aB as qe,aC as Ae,aD as at,aE as Je,aF as it,aG as Ke,aH as et,aI as Fe,aJ as oe,aK as L,aL as pe,aM as st,aN as Ee,aO as na,aP as ma,aQ as Mt,aR as Bt,aS as Vt,aT as qt,aU as Ze,aV as Fa,aW as Xt,aX as pa,aY as ta,aZ as zt,a_ as Oa,a$ as sa,b0 as jt,b1 as aa,b2 as lt,b3 as Vn,b4 as qn,b5 as Wl,b6 as Cn,b7 as Tn,b8 as Pn,b9 as Rn,ba as La,bb as On,bc as Dn,bd as In,be as Un,bf as Ql,bg as je,bh as En,bi as Ka,bj as An,bk as jn,bl as Nn,bm as Mn,bn as Bn,bo as zn,bp as Fn,bq as we,br as la,bs as dt,bt as Ln,bu as Kn,bv as Hn,bw as Ht,bx as Jl,by as Gt,bz as gt,bA as wt,bB as Gl,bC as Xl,bD as Yn,bE as ft,bF as ct,bG as pt,bH as ht,bI as fa,bJ as Nt,bK as Wn,bL as Qn,bM as Jn,bN as Gn,bO as Xn,bP as Zn,bQ as Zl,bR as es,bS as ts,bT as as,bU as Lt,bV as ls,bW as os,bX as ns,bY as ss,bZ as rs,b_ as is,b$ as ds,c0 as us,c1 as ms,c2 as cs}from"./virtual_pwa-register-DbbebSOy.js";const ps={},fs={class:"row"};function gs(u,n){const d=Z("i-head"),o=Z("authenticated-layout");return c(),w(Q,null,[e(d,{title:"About"}),e(o,null,{title:l(()=>[...n[0]||(n[0]=[v("About",-1)])]),default:l(()=>[t("div",fs,[e(ge,{class:"col q-pa-md q-ma-md",square:"",flat:"",bordered:""},{default:l(()=>[e(ae,null,{default:l(()=>[...n[1]||(n[1]=[t("div",{class:"q-mb-md text-h4"},"About",-1),t("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Autem soluta, accusamus placeat eius eligendi perferendis quisquam veritatis iste debitis laboriosam facere et aliquam quos beatae illo distinctio rerum eos! Expedita, voluptatem. Aut nihil deleniti magni fuga eius labore aliquam nulla quod ullam sunt amet eum asperiores, harum unde eligendi tempore sapiente. Placeat sed, dignissimos voluptatum perspiciatis saepe aspernatur, maxime est, ipsam quas nobis cumque sunt labore molestias? Amet in sed ullam recusandae, nostrum dicta facilis blanditiis incidunt quae commodi soluta id impedit vel fugit illo, molestias reiciendis, provident nam molestiae! Ipsam, hic. Facere aut quisquam praesentium enim illum, pariatur nam.",-1),t("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque, cum nulla. Ut eligendi tenetur aliquam cum mollitia repellat voluptas, fugiat doloremque sunt commodi enim excepturi distinctio id sapiente incidunt ipsam asperiores cupiditate, labore libero! Ad facere magni cumque perspiciatis, adipisci possimus pariatur quo nobis minus, est enim similique quaerat vel asperiores ipsam harum et, totam fugit.",-1),t("p",null,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Suscipit aspernatur maxime consectetur, consequatur excepturi facilis praesentium rem placeat sapiente, maiores doloribus modi voluptate. Unde autem dolor officiis numquam incidunt quasi aspernatur nam dolores ratione quidem recusandae, nulla qui provident molestias odit nemo praesentium quas voluptatem aliquid perferendis, iste veritatis vitae. Dolor, eligendi quidem distinctio asperiores doloremque culpa corporis quibusdam earum ex laudantium iure officia ullam nostrum maxime voluptatum laboriosam impedit labore illum. Culpa, veniam dolor odio ad eius nisi, aspernatur quia veritatis blanditiis repellat id minima deserunt beatae?",-1)])]),_:1})]),_:1})])]),_:1})],64)}const bs=_t(ps,[["render",gs]]),vs=Object.freeze(Object.defineProperty({__proto__:null,default:bs},Symbol.toStringTag,{value:"Module"})),ys={class:"q-ma-md"},_s={key:0},ks={__name:"Autocomplete1",setup(u){const n=q(null),d=q([]);let o=null;const i=(s,g)=>{if(s.length<2){g(()=>{d.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Oe.get(`/web-api/customers?q=${s}`).then(b=>{const f=b.data.data.map(m=>({label:`${m.code} - ${m.name}`,value:m.id,data:m}));g(()=>{d.value=f})}).catch(b=>{console.error("Gagal mengambil data pelanggan:",b),g(()=>{d.value=[]})})})};return(s,g)=>{const b=Z("guest-layout");return c(),O(b,null,{default:l(()=>[t("div",ys,[e(ce,{class:"full-width",modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=f=>n.value=f),"use-input":"",label:"Cari Pelanggan",options:d.value,onFilter:i,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),n.value?(c(),w("div",_s," Saldo: Rp. "+r(a(K)(n.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},ws=Object.freeze(Object.defineProperty({__proto__:null,default:ks},Symbol.toStringTag,{value:"Module"})),hs={style:{"margin-left":"-10px"}},ga={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(u,{emit:n}){const d=u,o=n;return(i,s)=>(c(),w("div",hs,[e(oa,{class:"full-width q-pl-none","model-value":d.modelValue,disable:d.disable,label:d.label,"onUpdate:modelValue":s[0]||(s[0]=g=>o("update:modelValue",g))},null,8,["model-value","disable","label"])]))}};function Ta(u){return u instanceof File||u instanceof Blob||u instanceof FileList&&u.length>0||u instanceof FormData&&Array.from(u.values()).some(n=>Ta(n))||typeof u=="object"&&u!==null&&Object.values(u).some(n=>Ta(n))}function $s(u,n=null){const d=We(u,n);let o=g=>g,i=null;const s={transform:g=>b=>(o=b,g),submit:g=>(b,f,m={})=>{d.wasSuccessful=!1,d.recentlySuccessful=!1,d.clearErrors(),clearTimeout(i),m.onBefore&&m.onBefore(),d.processing=!0,m.onStart&&m.onStart();const p=o(d.data());axios[b](f,p,{headers:{"Content-Type":Ta(p)?"multipart/form-data":"application/json"},onUploadProgress:y=>{d.progress=y,m.onProgress&&m.onProgress(y)}}).then(y=>{d.processing=!1,d.progress=null,d.clearErrors(),d.wasSuccessful=!0,d.recentlySuccessful=!0,i=setTimeout(()=>d.recentlySuccessful=!1,2e3),m.onSuccess&&m.onSuccess(y.data),d.defaults(dn(d.data())),d.isDirty=!1}).catch(y=>{var _;d.processing=!1,d.progress=null,d.clearErrors(),((_=y.response)==null?void 0:_.status)===422&&Object.keys(y.response.data.errors).forEach(x=>{d.setError(x,y.response.data.errors[x][0])}),m.onError&&m.onError(y)}).finally(()=>{d.processing=!1,d.progress=null,m.onFinish&&m.onFinish()})}};return new Proxy(d,{get:(g,b,f)=>Object.keys(s).indexOf(b)<0?g[b]:s[b](f)})}const xs={class:"column"},Ss={class:"row"},Vs={class:"q-my-sm text-grey-7 text-subtitle1 text-bold"},qs={class:"flex justify-center"},Cs={__name:"Login",setup(u){let n=$s({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const d=ve();console.log(d.props.data);const o=()=>rt({form:n,url:route("admin.auth.login"),onSuccess:()=>{n.processing=!0,window.location.href=route("admin.dashboard")}}),i=q(!1);return(s,g)=>{const b=Z("i-head"),f=Z("guest-layout");return c(),w(Q,null,[e(b,{title:"Login"}),e(f,null,{default:l(()=>[e(Te,{class:"row justify-center items-center"},{default:l(()=>[t("div",xs,[t("div",Ss,[e(Qe,{class:"q-gutter-md",onSubmit:J(o,["prevent"])},{default:l(()=>[e(ge,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:l(()=>[e(ae,{class:"text-center"},{default:l(()=>[t("div",Vs,[v(" Login ke "+r(a(d).props.company.name)+" ",1),t("div",qs,[e(ea,{size:"100px",class:"q-my-none"},{default:l(()=>[e(T,{name:"badge",color:"grey"})]),_:1})])]),e(se,{modelValue:a(n).username,"onUpdate:modelValue":g[0]||(g[0]=m=>a(n).username=m),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!a(n).errors.username,autocomplete:"username","error-message":a(n).errors.username,disable:a(n).processing,rules:[m=>m&&m.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:l(()=>[e(T,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(se,{modelValue:a(n).password,"onUpdate:modelValue":g[2]||(g[2]=m=>a(n).password=m),type:i.value?"text":"password",label:"Kata Sandi",error:!!a(n).errors.password,autocomplete:"current-password","error-message":a(n).errors.password,"lazy-rules":"",disable:a(n).processing,rules:[m=>m&&m.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:l(()=>[e(I,{dense:"",flat:"",round:"",onClick:g[1]||(g[1]=m=>i.value=!i.value)},{default:l(()=>[e(T,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(ga,{class:"q-mt-sm",modelValue:a(n).remember,"onUpdate:modelValue":g[3]||(g[3]=m=>a(n).remember=m),disable:a(n).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(tt,null,{default:l(()=>[e(I,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:a(n).processing,loading:a(n).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Ts=Object.freeze(Object.defineProperty({__proto__:null,default:Cs},Symbol.toStringTag,{value:"Module"})),Ps={class:"q-gutter-sm"},Rs={class:"col col-md-6 q-pa-xs"},Os={class:"detail q-mt-md"},Ds={key:0},Is={class:"text-bold"},Ha="Tutup Sesi Kasir",Us={__name:"Close",setup(u){const n=ve(),d=We({closing_notes:n.props.data.closing_notes,closing_balance:parseFloat(n.props.data.closing_balance)}),o=()=>rt({form:d,url:route("admin.cashier-session.close",{id:n.props.data.id})});return(i,s)=>{const g=Z("i-head"),b=Z("authenticated-layout");return c(),w(Q,null,[e(g,{title:Ha}),e(b,null,{title:l(()=>[v(r(Ha))]),"left-button":l(()=>[t("div",Ps,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=f=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Rs,[e(Qe,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":s[1]||(s[1]=f=>a(d).id=f)},null,512),[[kt,a(d).id]]),e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[t("table",Os,[t("tbody",null,[t("tr",null,[s[4]||(s[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),s[5]||(s[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.id),1)]),t("tr",null,[s[6]||(s[6]=t("td",null,"Terminal",-1)),s[7]||(s[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.cashier_terminal.name),1)]),t("tr",null,[s[8]||(s[8]=t("td",null,"Kasir",-1)),s[9]||(s[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.user.username)+" - "+r(a(n).props.data.user.name),1)]),t("tr",null,[s[10]||(s[10]=t("td",null,"Saldo Awal",-1)),s[11]||(s[11]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.opening_balance)),1)]),a(n).props.data.opening_notes?(c(),w("tr",Ds,[s[12]||(s[12]=t("td",null,"Catatan Buka",-1)),s[13]||(s[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.opening_notes),1)])):k("",!0),t("tr",null,[s[14]||(s[14]=t("td",null,"Total Penjualan",-1)),s[15]||(s[15]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.total_sales)),1)]),t("tr",null,[s[16]||(s[16]=t("td",null,"Total Pemasukan",-1)),s[17]||(s[17]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.total_income)),1)]),t("tr",null,[s[18]||(s[18]=t("td",null,"Total Pengeluaran",-1)),s[19]||(s[19]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.total_expense)),1)]),t("tr",null,[s[21]||(s[21]=t("td",null,"Saldo Akhir",-1)),s[22]||(s[22]=t("td",null,":",-1)),t("td",null,[t("div",Is,r(a(yt)(a(n).props.data.closing_balance)),1),s[20]||(s[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(se,{modelValue:a(d).closing_notes,"onUpdate:modelValue":s[2]||(s[2]=f=>a(d).closing_notes=f),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(d).processing,error:!!a(d).errors.closing_notes,"error-message":a(d).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:a(d).processing},null,8,["disable"]),e(I,{label:"Batal",icon:"cancel",disable:a(d).processing,onClick:s[3]||(s[3]=f=>a(ee).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Es=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"}));let As=0;const js=["click","keydown"],Ns={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${As++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Ms(u,n,d,o){const i=un(Kl,$a);if(i===$a)return console.error("QTab/QRouteTab component needs to be child of QTabs"),$a;const{proxy:s}=Rt(),g=q(null),b=q(null),f=q(null),m=X(()=>u.disable===!0||u.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},u.ripple===!0?{}:u.ripple)),p=X(()=>i.currentModel.value===u.name),y=X(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(p.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(u.icon&&u.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(u.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(u.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),_=X(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(u.contentClass!==void 0?` ${u.contentClass}`:"")),x=X(()=>u.disable===!0||i.hasFocus.value===!0||p.value===!1&&i.hasActiveTab.value===!0?-1:u.tabindex||0);function C(z,R){var M;if(R!==!0&&(z==null?void 0:z.qAvoidFocus)!==!0&&((M=g.value)==null||M.focus()),u.disable!==!0){i.updateModel({name:u.name}),d("click",z);return}}function $(z){mn(z,[13,32])?C(z,!0):cn(z)!==!0&&z.keyCode>=35&&z.keyCode<=40&&z.altKey!==!0&&z.metaKey!==!0&&i.onKbdNavigate(z.keyCode,s.$el)===!0&&Kt(z),d("keydown",z)}function B(){const z=i.tabProps.value.narrowIndicator,R=[],M=Ve("div",{ref:f,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});u.icon!==void 0&&R.push(Ve(T,{class:"q-tab__icon",name:u.icon})),u.label!==void 0&&R.push(Ve("div",{class:"q-tab__label"},u.label)),u.alert!==!1&&R.push(u.alertIcon!==void 0?Ve(T,{class:"q-tab__alert-icon",color:u.alert!==!0?u.alert:void 0,name:u.alertIcon}):Ve("div",{class:"q-tab__alert"+(u.alert!==!0?` text-${u.alert}`:"")})),z===!0&&R.push(M);const A=[Ve("div",{class:"q-focus-helper",tabindex:-1,ref:g}),Ve("div",{class:_.value},Hl(n.default,R))];return z===!1&&A.push(M),A}const Y={name:X(()=>u.name),rootRef:b,tabIndicatorRef:f,routeData:o};ca(()=>{i.unregisterTab(Y)}),$e(()=>{i.registerTab(Y)});function E(z,R){const M={ref:b,class:y.value,tabindex:x.value,role:"tab","aria-selected":p.value===!0?"true":"false","aria-disabled":u.disable===!0?"true":void 0,onClick:C,onKeydown:$,...R};return le(Ve(z,M,B()),[[ue,m.value]])}return{renderTab:E,$tabs:i}}const ot=St({name:"QTab",props:Ns,emits:js,setup(u,{slots:n,emit:d}){const{renderTab:o}=Ms(u,n,d);return()=>o("div")}});function Bs(u,n,d){const o=d===!0?["left","right"]:["top","bottom"];return`absolute-${n===!0?o[0]:o[1]}${u?` text-${u}`:""}`}const zs=["left","center","right","justify"],Ct=St({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:u=>zs.includes(u)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(u,{slots:n,emit:d}){const{proxy:o}=Rt(),{$q:i}=o,{registerTick:s}=xa(),{registerTick:g}=xa(),{registerTick:b}=xa(),{registerTimeout:f,removeTimeout:m}=Ca(),{registerTimeout:p,removeTimeout:y}=Ca(),_=q(null),x=q(null),C=q(u.modelValue),$=q(!1),B=q(!0),Y=q(!1),E=q(!1),z=[],R=q(0),M=q(!1);let A=null,V=null,D;const P=X(()=>({activeClass:u.activeClass,activeColor:u.activeColor,activeBgColor:u.activeBgColor,indicatorClass:Bs(u.indicatorColor,u.switchIndicator,u.vertical),narrowIndicator:u.narrowIndicator,inlineLabel:u.inlineLabel,noCaps:u.noCaps})),h=X(()=>{const ye=R.value,xe=C.value;for(let Ue=0;Ue<ye;Ue++)if(z[Ue].name.value===xe)return!0;return!1}),U=X(()=>`q-tabs__content--align-${$.value===!0?"left":E.value===!0?"justify":u.align}`),N=X(()=>`q-tabs row no-wrap items-center q-tabs--${$.value===!0?"":"not-"}scrollable q-tabs--${u.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${u.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${u.mobileArrows===!0?"":"out"}-arrows`+(u.dense===!0?" q-tabs--dense":"")+(u.shrink===!0?" col-shrink":"")+(u.stretch===!0?" self-stretch":"")),S=X(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+U.value+(u.contentClass!==void 0?` ${u.contentClass}`:"")),j=X(()=>u.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),te=X(()=>u.vertical!==!0&&i.lang.rtl===!0),ie=X(()=>pn===!1&&te.value===!0);He(te,_e),He(()=>u.modelValue,ye=>{me({name:ye,setCurrent:!0,skipEmit:!0})}),He(()=>u.outsideArrows,Re);function me({name:ye,setCurrent:xe,skipEmit:Ue}){C.value!==ye&&(Ue!==!0&&u["onUpdate:modelValue"]!==void 0&&d("update:modelValue",ye),(xe===!0||u["onUpdate:modelValue"]===void 0)&&(de(C.value,ye),C.value=ye))}function Re(){s(()=>{_.value&&Be({width:_.value.offsetWidth,height:_.value.offsetHeight})})}function Be(ye){if(j.value===void 0||x.value===null)return;const xe=ye[j.value.container],Ue=Math.min(x.value[j.value.scroll],Array.prototype.reduce.call(x.value.children,(mt,Ge)=>mt+(Ge[j.value.content]||0),0)),ut=xe>0&&Ue>xe;$.value=ut,ut===!0&&g(_e),E.value=xe<parseInt(u.breakpoint,10)}function de(ye,xe){const Ue=ye!=null&&ye!==""?z.find(mt=>mt.name.value===ye):null,ut=xe!=null&&xe!==""?z.find(mt=>mt.name.value===xe):null;if(ia===!0)ia=!1;else if(Ue&&ut){const mt=Ue.tabIndicatorRef.value,Ge=ut.tabIndicatorRef.value;A!==null&&(clearTimeout(A),A=null),mt.style.transition="none",mt.style.transform="none",Ge.style.transition="none",Ge.style.transform="none";const ze=mt.getBoundingClientRect(),bt=Ge.getBoundingClientRect();Ge.style.transform=u.vertical===!0?`translate3d(0,${ze.top-bt.top}px,0) scale3d(1,${bt.height?ze.height/bt.height:1},1)`:`translate3d(${ze.left-bt.left}px,0,0) scale3d(${bt.width?ze.width/bt.width:1},1,1)`,b(()=>{A=setTimeout(()=>{A=null,Ge.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Ge.style.transform="none"},70)})}ut&&$.value===!0&&F(ut.rootRef.value)}function F(ye){const{left:xe,width:Ue,top:ut,height:mt}=x.value.getBoundingClientRect(),Ge=ye.getBoundingClientRect();let ze=u.vertical===!0?Ge.top-ut:Ge.left-xe;if(ze<0){x.value[u.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ze),_e();return}ze+=u.vertical===!0?Ge.height-mt:Ge.width-Ue,ze>0&&(x.value[u.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ze),_e())}function _e(){const ye=x.value;if(ye===null)return;const xe=ye.getBoundingClientRect(),Ue=u.vertical===!0?ye.scrollTop:Math.abs(ye.scrollLeft);te.value===!0?(B.value=Math.ceil(Ue+xe.width)<ye.scrollWidth-1,Y.value=Ue>0):(B.value=Ue>0,Y.value=u.vertical===!0?Math.ceil(Ue+xe.height)<ye.scrollHeight:Math.ceil(Ue+xe.width)<ye.scrollWidth)}function re(ye){V!==null&&clearInterval(V),V=setInterval(()=>{ke(ye)===!0&&G()},5)}function H(){re(ie.value===!0?Number.MAX_SAFE_INTEGER:0)}function ne(){re(ie.value===!0?0:Number.MAX_SAFE_INTEGER)}function G(){V!==null&&(clearInterval(V),V=null)}function fe(ye,xe){const Ue=Array.prototype.filter.call(x.value.children,bt=>bt===xe||bt.matches&&bt.matches(".q-tab.q-focusable")===!0),ut=Ue.length;if(ut===0)return;if(ye===36)return F(Ue[0]),Ue[0].focus(),!0;if(ye===35)return F(Ue[ut-1]),Ue[ut-1].focus(),!0;const mt=ye===(u.vertical===!0?38:37),Ge=ye===(u.vertical===!0?40:39),ze=mt===!0?-1:Ge===!0?1:void 0;if(ze!==void 0){const bt=te.value===!0?-1:1,Pt=Ue.indexOf(xe)+ze*bt;return Pt>=0&&Pt<ut&&(F(Ue[Pt]),Ue[Pt].focus({preventScroll:!0})),!0}}const Ce=X(()=>ie.value===!0?{get:ye=>Math.abs(ye.scrollLeft),set:(ye,xe)=>{ye.scrollLeft=-xe}}:u.vertical===!0?{get:ye=>ye.scrollTop,set:(ye,xe)=>{ye.scrollTop=xe}}:{get:ye=>ye.scrollLeft,set:(ye,xe)=>{ye.scrollLeft=xe}});function ke(ye){const xe=x.value,{get:Ue,set:ut}=Ce.value;let mt=!1,Ge=Ue(xe);const ze=ye<Ge?-1:1;return Ge+=ze*5,Ge<0?(mt=!0,Ge=0):(ze===-1&&Ge<=ye||ze===1&&Ge>=ye)&&(mt=!0,Ge=ye),ut(xe,Ge),_e(),mt}function Xe(ye,xe){for(const Ue in ye)if(ye[Ue]!==xe[Ue])return!1;return!0}function $t(){let ye=null,xe={matchedLen:0,queryDiff:9999,hrefLen:0};const Ue=z.filter(ze=>{var bt;return((bt=ze.routeData)==null?void 0:bt.hasRouterLink.value)===!0}),{hash:ut,query:mt}=o.$route,Ge=Object.keys(mt).length;for(const ze of Ue){const bt=ze.routeData.exact.value===!0;if(ze.routeData[bt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Pt,query:wa,matched:sn,href:rn}=ze.routeData.resolvedLink.value,ha=Object.keys(wa).length;if(bt===!0){if(Pt!==ut||ha!==Ge||Xe(mt,wa)===!1)continue;ye=ze.name.value;break}if(Pt!==""&&Pt!==ut||ha!==0&&Xe(wa,mt)===!1)continue;const It={matchedLen:sn.length,queryDiff:Ge-ha,hrefLen:rn.length-Pt.length};if(It.matchedLen>xe.matchedLen){ye=ze.name.value,xe=It;continue}else if(It.matchedLen!==xe.matchedLen)continue;if(It.queryDiff<xe.queryDiff)ye=ze.name.value,xe=It;else if(It.queryDiff!==xe.queryDiff)continue;It.hrefLen>xe.hrefLen&&(ye=ze.name.value,xe=It)}if(ye===null&&z.some(ze=>ze.routeData===void 0&&ze.name.value===C.value)===!0){ia=!1;return}me({name:ye,setCurrent:!0})}function Dt(ye){if(m(),M.value!==!0&&_.value!==null&&ye.target&&typeof ye.target.closest=="function"){const xe=ye.target.closest(".q-tab");xe&&_.value.contains(xe)===!0&&(M.value=!0,$.value===!0&&F(xe))}}function ka(){f(()=>{M.value=!1},30)}function Zt(){Aa.avoidRouteWatcher===!1?p($t):y()}function Ea(){if(D===void 0){const ye=He(()=>o.$route.fullPath,Zt);D=()=>{ye(),D=void 0}}}function on(ye){z.push(ye),R.value++,Re(),ye.routeData===void 0||o.$route===void 0?p(()=>{if($.value===!0){const xe=C.value,Ue=xe!=null&&xe!==""?z.find(ut=>ut.name.value===xe):null;Ue&&F(Ue.rootRef.value)}}):(Ea(),ye.routeData.hasRouterLink.value===!0&&Zt())}function nn(ye){z.splice(z.indexOf(ye),1),R.value--,Re(),D!==void 0&&ye.routeData!==void 0&&(z.every(xe=>xe.routeData===void 0)===!0&&D(),Zt())}const Aa={currentModel:C,tabProps:P,hasFocus:M,hasActiveTab:h,registerTab:on,unregisterTab:nn,verifyRouteModel:Zt,updateModel:me,onKbdNavigate:fe,avoidRouteWatcher:!1};vn(Kl,Aa);function ja(){A!==null&&clearTimeout(A),G(),D==null||D()}let Na,ia;return ca(ja),fn(()=>{Na=D!==void 0,ja()}),gn(()=>{Na===!0&&(Ea(),ia=!0,Zt()),Re()}),()=>Ve("div",{ref:_,class:N.value,role:"tablist",onFocusin:Dt,onFocusout:ka},[Ve(bn,{onResize:Be}),Ve("div",{ref:x,class:S.value,onScroll:_e},At(n.default)),Ve(T,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(B.value===!0?"":" q-tabs__arrow--faded"),name:u.leftIcon||i.iconSet.tabs[u.vertical===!0?"up":"left"],onMousedownPassive:H,onTouchstartPassive:H,onMouseupPassive:G,onMouseleavePassive:G,onTouchendPassive:G}),Ve(T,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(Y.value===!0?"":" q-tabs__arrow--faded"),name:u.rightIcon||i.iconSet.tabs[u.vertical===!0?"down":"right"],onMousedownPassive:ne,onTouchstartPassive:ne,onMouseupPassive:G,onMouseleavePassive:G,onTouchendPassive:G})])}});function Fs(u){const n=[.06,6,50];return typeof u=="string"&&u.length&&u.split(":").forEach((d,o)=>{const i=parseFloat(d);i&&(n[o]=i)}),n}const Ls=yn({name:"touch-swipe",beforeMount(u,{value:n,arg:d,modifiers:o}){if(o.mouse!==!0&&Qt.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",s={handler:n,sensitivity:Fs(d),direction:Ma(o),noop:_n,mouseStart(g){za(g,s)&&wn(g)&&(da(s,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),s.start(g,!0))},touchStart(g){if(za(g,s)){const b=g.target;da(s,"temp",[[b,"touchmove","move","notPassiveCapture"],[b,"touchcancel","end","notPassiveCapture"],[b,"touchend","end","notPassiveCapture"]]),s.start(g)}},start(g,b){Qt.is.firefox===!0&&Va(u,!0);const f=Ba(g);s.event={x:f.left,y:f.top,time:Date.now(),mouse:b===!0,dir:!1}},move(g){if(s.event===void 0)return;if(s.event.dir!==!1){Kt(g);return}const b=Date.now()-s.event.time;if(b===0)return;const f=Ba(g),m=f.left-s.event.x,p=Math.abs(m),y=f.top-s.event.y,_=Math.abs(y);if(s.event.mouse!==!0){if(p<s.sensitivity[1]&&_<s.sensitivity[1]){s.end(g);return}}else if(window.getSelection().toString()!==""){s.end(g);return}else if(p<s.sensitivity[2]&&_<s.sensitivity[2])return;const x=p/b,C=_/b;s.direction.vertical===!0&&p<_&&p<100&&C>s.sensitivity[0]&&(s.event.dir=y<0?"up":"down"),s.direction.horizontal===!0&&p>_&&_<100&&x>s.sensitivity[0]&&(s.event.dir=m<0?"left":"right"),s.direction.up===!0&&p<_&&y<0&&p<100&&C>s.sensitivity[0]&&(s.event.dir="up"),s.direction.down===!0&&p<_&&y>0&&p<100&&C>s.sensitivity[0]&&(s.event.dir="down"),s.direction.left===!0&&p>_&&m<0&&_<100&&x>s.sensitivity[0]&&(s.event.dir="left"),s.direction.right===!0&&p>_&&m>0&&_<100&&x>s.sensitivity[0]&&(s.event.dir="right"),s.event.dir!==!1?(Kt(g),s.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),kn(),s.styleCleanup=$=>{s.styleCleanup=void 0,document.body.classList.remove("non-selectable");const B=()=>{document.body.classList.remove("no-pointer-events--children")};$===!0?setTimeout(B,50):B()}),s.handler({evt:g,touch:s.event.mouse!==!0,mouse:s.event.mouse,direction:s.event.dir,duration:b,distance:{x:p,y:_}})):s.end(g)},end(g){var b;s.event!==void 0&&(Sa(s,"temp"),Qt.is.firefox===!0&&Va(u,!1),(b=s.styleCleanup)==null||b.call(s,!0),g!==void 0&&s.event.dir!==!1&&Kt(g),s.event=void 0)}};if(u.__qtouchswipe=s,o.mouse===!0){const g=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";da(s,"main",[[u,"mousedown","mouseStart",`passive${g}`]])}Qt.has.touch===!0&&da(s,"main",[[u,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[u,"touchmove","noop","notPassiveCapture"]])},updated(u,n){const d=u.__qtouchswipe;d!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&d.end(),d.handler=n.value),d.direction=Ma(n.modifiers))},beforeUnmount(u){var d;const n=u.__qtouchswipe;n!==void 0&&(Sa(n,"main"),Sa(n,"temp"),Qt.is.firefox===!0&&Va(u,!1),(d=n.styleCleanup)==null||d.call(n),delete u.__qtouchswipe)}}),Ks={name:{required:!0},disable:Boolean},Ya={setup(u,{slots:n}){return()=>Ve("div",{class:"q-panel scroll",role:"tabpanel"},At(n.default))}},Hs={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Ys=["update:modelValue","beforeTransition","transition"];function Ws(){const{props:u,emit:n,proxy:d}=Rt(),{getCache:o}=$n(),{registerTimeout:i}=Ca();let s,g;const b=q(null),f={value:null};function m(j){const te=u.vertical===!0?"up":"left";D((d.$q.lang.rtl===!0?-1:1)*(j.direction===te?1:-1))}const p=X(()=>[[Ls,m,void 0,{horizontal:u.vertical!==!0,vertical:u.vertical,mouse:!0}]]),y=X(()=>u.transitionPrev||`slide-${u.vertical===!0?"down":"right"}`),_=X(()=>u.transitionNext||`slide-${u.vertical===!0?"up":"left"}`),x=X(()=>`--q-transition-duration: ${u.transitionDuration}ms`),C=X(()=>typeof u.modelValue=="string"||typeof u.modelValue=="number"?u.modelValue:String(u.modelValue)),$=X(()=>({include:u.keepAliveInclude,exclude:u.keepAliveExclude,max:u.keepAliveMax})),B=X(()=>u.keepAliveInclude!==void 0||u.keepAliveExclude!==void 0);He(()=>u.modelValue,(j,te)=>{const ie=R(j)===!0?M(j):-1;g!==!0&&V(ie===-1?0:ie<M(te)?-1:1),f.value!==ie&&(f.value=ie,n("beforeTransition",j,te),i(()=>{n("transition",j,te)},u.transitionDuration))});function Y(){D(1)}function E(){D(-1)}function z(j){n("update:modelValue",j)}function R(j){return j!=null&&j!==""}function M(j){return s.findIndex(te=>te.props.name===j&&te.props.disable!==""&&te.props.disable!==!0)}function A(){return s.filter(j=>j.props.disable!==""&&j.props.disable!==!0)}function V(j){const te=j!==0&&u.animated===!0&&f.value!==-1?"q-transition--"+(j===-1?y.value:_.value):null;b.value!==te&&(b.value=te)}function D(j,te=f.value){let ie=te+j;for(;ie!==-1&&ie<s.length;){const me=s[ie];if(me!==void 0&&me.props.disable!==""&&me.props.disable!==!0){V(j),g=!0,n("update:modelValue",me.props.name),setTimeout(()=>{g=!1});return}ie+=j}u.infinite===!0&&s.length!==0&&te!==-1&&te!==s.length&&D(j,j===-1?s.length:-1)}function P(){const j=M(u.modelValue);return f.value!==j&&(f.value=j),!0}function h(){const j=R(u.modelValue)===!0&&P()&&s[f.value];return u.keepAlive===!0?[Ve(xn,$.value,[Ve(B.value===!0?o(C.value,()=>({...Ya,name:C.value})):Ya,{key:C.value,style:x.value},()=>j)])]:[Ve("div",{class:"q-panel scroll",style:x.value,key:C.value,role:"tabpanel"},[j])]}function U(){if(s.length!==0)return u.animated===!0?[Ve(Yl,{name:b.value},h)]:h()}function N(j){return s=hn(At(j.default,[])).filter(te=>te.props!==null&&te.props.slot===void 0&&R(te.props.name)===!0),s.length}function S(){return s}return Object.assign(d,{next:Y,previous:E,goTo:z}),{panelIndex:f,panelDirectives:p,updatePanelsList:N,updatePanelIndex:P,getPanelContent:U,getEnabledPanels:A,getPanels:S,isValidPanelName:R,keepAliveProps:$,needsUniqueKeepAliveWrapper:B,goToPanelByOffset:D,goToPanel:z,nextPanel:Y,previousPanel:E}}const nt=St({name:"QTabPanel",props:Ks,setup(u,{slots:n}){return()=>Ve("div",{class:"q-tab-panel",role:"tabpanel"},At(n.default))}}),Tt=St({name:"QTabPanels",props:{...Hs,...Pa},emits:Ys,setup(u,{slots:n}){const d=Rt(),o=Ra(u,d.proxy.$q),{updatePanelsList:i,getPanelContent:s,panelDirectives:g}=Ws(),b=X(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(n),Sn("div",{class:b.value},s(),"pan",u.swipeable,()=>g.value))}}),Qs={class:"detail"},Js={key:0},Gs={key:1},Xs={key:0},Zs={key:0},er={colspan:"100%"},tr={class:"q-my-md"},ar={key:4},lr={colspan:"100%"},or={key:5},nr={colspan:"100%"},eo={__name:"MainInfoTab",setup(u){const n=ve();return(d,o)=>(c(),w("table",Qs,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.user.username)+" - "+r(a(n).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.opening_balance)),1)]),a(n).props.data.opening_notes?(c(),w("tr",Js,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.total_expense)),1)]),a(n).props.data.is_closed?k("",!0):(c(),w("tr",Gs,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.actual_balance)),1)])),a(n).props.data.is_closed?(c(),w(Q,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.closing_balance)),1)]),a(n).props.data.closing_notes?(c(),w("tr",Xs,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),d.$can("admin.cashier-session.close")?(c(),w(Q,{key:3},[a(n).props.data.is_closed?k("",!0):(c(),w("tr",Zs,[t("td",er,[t("div",tr,[e(I,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=i=>d.$inertia.get(d.route("admin.cashier-session.close",{id:a(n).props.data.id})))},{default:l(()=>[...o[26]||(o[26]=[v(" Tutup Sesi Kasir ",-1)])]),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(n).props.data.created_at?(c(),w("tr",ar,[t("td",lr," Dibuat "+r(a(Et)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name)+" ("+r(a(be)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(c(),w("tr",or,[t("td",nr," Diperbarui "+r(a(Et)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name)+" ("+r(a(be)(a(n).props.data.updated_at))+") ",1)])):k("",!0)])]))}},sr=Object.freeze(Object.defineProperty({__proto__:null,default:eo},Symbol.toStringTag,{value:"Module"})),rr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ir={class:"text-bold"},dr={key:0},ur={class:"text-bold"},mr={key:1},cr={key:0},pr={key:0},fr={key:1},to={__name:"SalesOrderTab",props:{data:Object},setup(u){const n=u,d=q([]),o=q(!0),i=De({...Ne(),cashier_session_id:n.data.id,status:["closed","canceled"]}),s=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{b()});const b=(p=null)=>Me({pagination:s,filter:i,props:p,rows:d,url:route("admin.sales-order.data"),loading:o}),f=Se(),m=X(()=>f.screen.gt.sm?g:g.filter(p=>p.name==="id"));return(p,y)=>(c(),O(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:s.value,"onUpdate:pagination":y[0]||(y[0]=_=>s.value=_),filter:i.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:x,filter:C})=>[t("div",rr,[t("span",null,r(x)+" "+r(C?" with term "+C:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(x=>a(ee).get(p.route("admin.sales-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",ir,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(" "+r(a(be)(_.row.datetime)),1)]),a(f).screen.lt.md?(c(),w(Q,{key:0},[_.row.customer?(c(),w("div",dr,[e(T,{class:"inline-icon",name:"person"}),v(" "+r(_.row.customer_code)+" "+r(_.row.customer.name),1)])):k("",!0),t("div",ur,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(_.row.grand_total)),1)]),_.row.notes?(c(),w("div",mr,[e(he,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(vt,{color:_.row.status==="closed"?"green":"red"},{default:l(()=>[v(r(p.$CONSTANTS.SALES_ORDER_STATUSES[_.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"customer",props:_},{default:l(()=>[_.row.customer?(c(),w("div",cr,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(_.row.customer_code)+" - "+r(_.row.customer_name),1)]),_.row.customer_phone?(c(),w("div",pr,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(_.row.customer_phone),1)])):k("",!0),_.row.customer_address?(c(),w("div",fr,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(_.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[t("div",null,r(a(K)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e(he,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},gr=Object.freeze(Object.defineProperty({__proto__:null,default:to},Symbol.toStringTag,{value:"Module"})),br={class:"full-width row flex-center text-grey-8 q-gutter-sm"},vr={class:"text-bold"},yr={class:"text-bold"},_r={key:0},kr={class:"q-mt-sm"},ao={__name:"FinanceTransactionTab",props:{data:Object},setup(u){var p;const n=u;console.log(n.data);const d=q([]),o=q(!0),i=De({...Ne(),account_id:(p=n.data.cashier_terminal)==null?void 0:p.finance_account_id,from_datetime:Jt(n.data.opened_at),to_datetime:n.data.closed_at?Jt(n.data.closed_at):null}),s=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{b()});const b=(y=null)=>Me({pagination:s,filter:i,props:y,rows:d,url:route("admin.finance-transaction.data"),loading:o}),f=Se(),m=X(()=>f.screen.gt.sm?g:g.filter(y=>y.name==="id"));return(y,_)=>(c(),O(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:s.value,"onUpdate:pagination":_[0]||(_[0]=x=>s.value=x),filter:i.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:x,message:C,filter:$})=>[t("div",br,[t("span",null,r(C)+" "+r($?" with term "+$:""),1)])]),body:l(x=>[e(Pe,{props:x},{default:l(()=>[e(W,{key:"id",props:x},{default:l(()=>[t("div",vr,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(x.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(" "+r(a(be)(x.row.datetime)),1)]),a(f).screen.lt.md?(c(),w(Q,{key:0},[t("div",yr,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(x.row.amount)),1)]),x.row.notes?(c(),w("div",_r,[e(he,{text:x.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",kr,[e(vt,{color:x.row.amount>=0?"green":"red"},{default:l(()=>[v(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[x.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"amount",props:x},{default:l(()=>[t("span",{class:qe(x.row.amount<0?"text-red":"text-green")},r(a(K)(x.row.amount)),3)]),_:2},1032,["props"]),e(W,{key:"notes",props:x,class:"wrap-column"},{default:l(()=>[e(he,{text:x.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},wr=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"})),hr={class:"q-gutter-sm"},$r={class:"col col-lg-6 q-pa-xs"},xr={class:"row"},Wa="Rincian Sesi Kasir",Sr={__name:"Detail",setup(u){const n=ve(),d=X(()=>n.props.data),o=q("main");return He(()=>n.props.tab,i=>{i&&(o.value=i)},{immediate:!0}),(i,s)=>{const g=Z("i-head"),b=Z("authenticated-layout");return c(),w(Q,null,[e(g,{title:Wa}),e(b,null,{title:l(()=>[v(r(Wa))]),"left-button":l(()=>[t("div",hr,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=f=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",$r,[t("div",xr,[e(ge,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:l(()=>[e(Ct,{modelValue:o.value,"onUpdate:modelValue":s[1]||(s[1]=f=>o.value=f),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Ringkasan"}),e(ot,{name:"sales",label:"Transaksi Penjualan"}),e(ot,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Ae),e(Tt,{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=f=>o.value=f),animated:"",class:"q-pa-none"},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(eo,{data:d.value},null,8,["data"])]),_:1}),e(nt,{name:"sales",class:"q-pa-xs"},{default:l(()=>[e(to,{data:d.value},null,8,["data"])]),_:1}),e(nt,{name:"finance",class:"q-pa-xs"},{default:l(()=>[e(ao,{data:d.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Vr=Object.freeze(Object.defineProperty({__proto__:null,default:Sr},Symbol.toStringTag,{value:"Module"}));function Ot(){return{protectClick:n=>(d,o)=>{const i=window.getSelection();if(i&&!i.isCollapsed){o.stopPropagation();return}n(d,o)}}}const qr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Cr={class:"q-pa-xs"},Tr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Pr={class:"flex justify-end"},Qa="Sesi Kasir",Rr={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=De({search:"",status:"all",...Ne()}),m=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),p=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];$e(()=>{x()});const _=z=>st({message:`Hapus Sesi: ${z.cashier_terminal.name} - ${z.user.username}?`,url:route("admin.cashier-session.delete",z.id),fetchItemsCallback:x,loading:i}),x=(z=null)=>{Me({pagination:m,filter:f,props:z,rows:o,url:route("admin.cashier-session.data"),loading:i,tableRef:s})},C=()=>x(),$=z=>ee.get(route("admin.cashier-session.detail",{id:z.id})),{protectClick:B}=Ot(),Y=B($),E=X(()=>n.screen.gt.sm?p:p.filter(z=>z.name==="id"||z.name==="action"));return(z,R)=>{const M=Z("i-head"),A=Z("authenticated-layout");return c(),w(Q,null,[e(M,{title:Qa}),e(A,null,Je({title:l(()=>[v(r(Qa))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=V=>d.value=!d.value)},null,8,["icon"]),z.$can("admin.cashier-session.open")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=V=>a(ee).get(z.route("admin.cashier-session.open")))})):k("",!0)]),default:l(()=>[t("div",Cr,[e(Ie,{class:"full-height-table",style:Ke({height:a(b)}),ref_key:"tableRef",ref:s,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":R[5]||(R[5]=V=>m.value=V),filter:f.search,loading:i.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:D,filter:P})=>[t("div",Tr,[t("span",null,r(D)+" "+r(P?" with term "+P:""),1)])]),body:l(V=>[e(Pe,{props:V,class:qe(["cursor-pointer",V.row.is_closed?"":"bg-yellow-3"]),onClick:J(D=>a(Y)(V.row,D),["stop"])},{default:l(()=>[e(W,{key:"id",props:V,class:"wrap-column"},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"tag"}),v(" SessionID: "+r(V.row.id),1)]),t("div",null,[e(T,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(V.row.cashier_terminal.name),1)]),t("div",null,[e(T,{class:"inline-icon",name:"person"}),v(" "+r(V.row.user.username)+" - "+r(V.row.user.name),1)])]),_:2},1032,["props"]),e(W,{key:"opening_info",props:V},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(V.row.opened_at?a(be)(V.row.opened_at):"-"),1)]),t("div",null,[e(T,{class:"inline-icon",name:"money"}),v(" "+r(a(yt)(V.row.opening_balance)),1)]),V.row.opening_notes?(c(),O(he,{key:0,text:V.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"closing_info",props:V},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(V.row.closed_at?a(be)(V.row.closed_at):"-"),1)]),t("div",null,[e(T,{class:"inline-icon",name:"money"}),v(" "+r(a(yt)(V.row.closing_balance)),1)]),V.row.closing_notes?(c(),O(he,{key:0,text:V.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"action",props:V},{default:l(()=>[t("div",Pr,[z.$can("admin.cashier-session.close")||z.$can("admin.cashier-session.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[4]||(R[4]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[z.$can("admin.cashier-session.close")?le((c(),O(oe,{key:0,disable:V.row.is_closed,clickable:"",onClick:J(D=>a(ee).get(z.route("admin.cashier-session.close",V.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"logout"})]),_:1}),e(L,null,{default:l(()=>[...R[6]||(R[6]=[v("Tutup Sesi Kasir",-1)])]),_:1})]),_:1},8,["disable","onClick"])),[[ue],[pe]]):k("",!0),z.$can("admin.cashier-session.delete")&&!V.row.is_closed?le((c(),O(oe,{key:1,onClick:J(D=>_(V.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...R[7]||(R[7]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",qr,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:f.status,"onUpdate:modelValue":[R[2]||(R[2]=V=>f.status=V),C],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":R[3]||(R[3]=V=>f.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Or=Object.freeze(Object.defineProperty({__proto__:null,default:Rr},Symbol.toStringTag,{value:"Module"})),Dr={class:"q-gutter-sm"},Ir={class:"col col-md-6 q-pa-xs"},Ja="Buka Sesi Kasir",Ur={__name:"Open",setup(u){const n=ve(),d=We({cashier_terminal_id:n.props.data.cashier_terminal_id,opening_balance:parseFloat(n.props.data.opening_balance),opening_notes:n.props.data.opening_notes}),o=[...n.props.cashier_terminals.map(s=>({value:s.id,label:s.name,balance:parseFloat(s.finance_account.balance)}))],i=()=>rt({form:d,url:route("admin.cashier-session.open")});return He(()=>d.cashier_terminal_id,s=>{if(s){const g=o.find(b=>b.value===s);g&&(d.opening_balance=g.balance)}else d.opening_balance=0}),(s,g)=>{const b=Z("i-head"),f=Z("authenticated-layout");return c(),w(Q,null,[e(b,{title:Ja}),e(f,null,{title:l(()=>[v(r(Ja))]),"left-button":l(()=>[t("div",Dr,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=m=>s.$inertia.get(s.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ir,[e(Qe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=m=>a(d).id=m)},null,512),[[kt,a(d).id]]),e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(ce,{class:"custom-select",modelValue:a(d).cashier_terminal_id,"onUpdate:modelValue":g[2]||(g[2]=m=>a(d).cashier_terminal_id=m),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:a(d).errors.cashier_terminal_id,error:!!a(d).errors.cashier_terminal_id,disable:a(d).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Ee,{modelValue:a(d).opening_balance,"onUpdate:modelValue":g[3]||(g[3]=m=>a(d).opening_balance=m),label:"Saldo Buka Sesi",lazyRules:"",disable:a(d).processing,error:!!a(d).errors.opening_balance,errorMessage:a(d).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),g[6]||(g[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(se,{modelValue:a(d).opening_notes,"onUpdate:modelValue":g[4]||(g[4]=m=>a(d).opening_notes=m),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(d).processing,error:!!a(d).errors.opening_notes,"error-message":a(d).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:a(d).processing},null,8,["disable"]),e(I,{label:"Batal",icon:"cancel",disable:a(d).processing,onClick:g[5]||(g[5]=m=>a(ee).get(s.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Er=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"})),Ar={class:"detail"},jr={colspan:"3"},Nr={class:"text-bold text-grey-8"},Mr={key:0},Br={colspan:"100%"},zr={key:1},Fr={colspan:"100%"},lo={__name:"MainInfoTab",setup(u){const n=ve();return(d,o)=>(c(),w("table",Ar,[t("tbody",null,[t("tr",null,[t("td",jr,[t("div",Nr,[o[1]||(o[1]=v(" Info Terminal Kasir ",-1)),e(I,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=i=>d.$inertia.get(d.route("admin.cashier-terminal.edit",{id:a(n).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(n).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(n).props.data.created_at?(c(),w("tr",Mr,[t("td",Br," Dibuat "+r(a(Et)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name)+" ("+r(a(be)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(c(),w("tr",zr,[t("td",Fr," Diperbarui "+r(a(Et)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name)+" ("+r(a(be)(a(n).props.data.updated_at))+") ",1)])):k("",!0)])]))}},Lr=Object.freeze(Object.defineProperty({__proto__:null,default:lo},Symbol.toStringTag,{value:"Module"})),Kr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},oo={__name:"SessionHistoryTab",setup(u){const n=ve(),d=q([]),o=q(!0),i=De({cashier_terminal_id:n.props.data.id,...Ne()}),s=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];$e(()=>{b()});const b=(p=null)=>Me({pagination:s,filter:i,props:p,rows:d,url:route("admin.cashier-session.data"),loading:o}),f=Se(),m=X(()=>f.screen.gt.sm?g:g.filter(p=>p.name==="id"));return(p,y)=>(c(),O(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:s.value,"onUpdate:pagination":y[0]||(y[0]=_=>s.value=_),filter:i.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:x,filter:C})=>[t("div",Kr,[t("span",null,r(x)+" "+r(C?" with term "+C:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(x=>a(ee).get(p.route("admin.customer-wallet-transaction.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_,class:"wrap-column"},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"tag"}),v(" Session ID: "+r(_.row.id),1)]),t("div",null,[e(T,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(_.row.cashier_terminal.name),1)]),t("div",null,[e(T,{class:"inline-icon",name:"person"}),v(" "+r(_.row.user.username)+" - "+r(_.row.user.name),1)])]),_:2},1032,["props"]),e(W,{key:"opening_info",props:_},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(_.row.opened_at?a(be)(_.row.opened_at):"-"),1)]),t("div",null,[e(T,{class:"inline-icon",name:"money"}),v(" "+r(a(yt)(_.row.opening_balance)),1)]),_.row.opening_notes?(c(),O(he,{key:0,text:_.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"closing_info",props:_},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(_.row.closed_at?a(be)(_.row.closed_at):"-"),1)]),t("div",null,[e(T,{class:"inline-icon",name:"money"}),v(" "+r(a(yt)(_.row.closing_balance)),1)]),_.row.closing_notes?(c(),O(he,{key:0,text:_.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Hr=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),Yr={class:"q-gutter-sm"},Wr={class:"col col-lg-6 q-pa-xs"},Qr={class:"row"},Ga="Rincian Terminal Kasir",Jr={__name:"Detail",setup(u){const n=q("main");return(d,o)=>{const i=Z("i-head"),s=Z("authenticated-layout");return c(),w(Q,null,[e(i,{title:Ga}),e(s,null,{title:l(()=>[v(r(Ga))]),"left-button":l(()=>[t("div",Yr,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=g=>d.$inertia.get(d.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Wr,[t("div",Qr,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ct,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=g=>n.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Info Utama"}),e(ot,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=g=>n.value=g),animated:""},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(lo)]),_:1}),e(nt,{name:"session-history",class:"q-pa-xs"},{default:l(()=>[e(oo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Gr=Object.freeze(Object.defineProperty({__proto__:null,default:Jr},Symbol.toStringTag,{value:"Module"})),Xr={class:"q-gutter-sm"},Zr={class:"col col-md-6 q-pa-xs"},ei={key:0,class:"q-my-xs text-grey-8"},ti={__name:"Editor",setup(u){const n=ve(),d=(n.props.data.id?"Edit":"Tambah")+" Pelanggan",o=We({id:n.props.data.id,name:n.props.data.name,finance_account_id:n.props.data.finance_account_id??"new",location:n.props.data.location,active:!!n.props.data.active,notes:n.props.data.notes}),i=[{value:"new",label:"Buat Baru (Otomatis)"},...n.props.finance_accounts.map(g=>({value:g.id,label:g.name}))],s=()=>rt({form:o,url:route("admin.cashier-terminal.save")});return(g,b)=>{const f=Z("i-head"),m=Z("authenticated-layout");return c(),w(Q,null,[e(f,{title:d}),e(m,null,{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",Xr,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=p=>g.$inertia.get(g.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Zr,[e(Qe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=p=>a(o).id=p)},null,512),[[kt,a(o).id]]),e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(se,{modelValue:a(o).name,"onUpdate:modelValue":b[2]||(b[2]=p=>a(o).name=p),modelModifiers:{trim:!0},label:"Nama",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[p=>p&&p.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{class:"custom-select",modelValue:a(o).finance_account_id,"onUpdate:modelValue":b[3]||(b[3]=p=>a(o).finance_account_id=p),label:"Akun Kas",options:i,"map-options":"","emit-value":"",errorMessage:a(o).errors.finance_account_id,error:!!a(o).errors.finance_account_id,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),a(o).finance_account_id==="new"?(c(),w("div",ei,[b[8]||(b[8]=v(" Akun keuangan akan dibuat ",-1)),a(o).name?(c(),w(Q,{key:0},[v(" dengan nama Kas "+r(a(o).name),1)],64)):k("",!0)])):k("",!0),e(se,{modelValue:a(o).location,"onUpdate:modelValue":b[4]||(b[4]=p=>a(o).location=p),modelModifiers:{trim:!0},label:"Lokasi",error:!!a(o).errors.location,disable:a(o).processing,"error-message":a(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:a(o).notes,"onUpdate:modelValue":b[5]||(b[5]=p=>a(o).notes=p),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ga,{modelValue:a(o).active,"onUpdate:modelValue":b[6]||(b[6]=p=>a(o).active=p),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(I,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:b[7]||(b[7]=p=>a(ee).get(g.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ai=Object.freeze(Object.defineProperty({__proto__:null,default:ti},Symbol.toStringTag,{value:"Module"})),li={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},oi={class:"q-pa-xs"},ni={class:"full-width row flex-center text-grey-8 q-gutter-sm"},si={class:"flex justify-end"},Xa="Terminal Kasir",ri={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=De({search:"",status:"active",...Ne()}),m=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"name",label:n.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];$e(()=>{x()});const _=z=>st({message:`Hapus Terminal Kasir ${z.name}?`,url:route("admin.cashier-terminal.delete",z.id),fetchItemsCallback:x,loading:i}),x=(z=null)=>{Me({pagination:m,filter:f,props:z,rows:o,url:route("admin.cashier-terminal.data"),loading:i,tableRef:s})},C=()=>x(),$=z=>ee.get(route("admin.cashier-terminal.detail",{id:z.id})),{protectClick:B}=Ot(),Y=B($),E=X(()=>n.screen.gt.sm?p:p.filter(z=>z.name==="name"||z.name==="finance_account_id"||z.name==="action"));return(z,R)=>{const M=Z("i-head"),A=Z("authenticated-layout");return c(),w(Q,null,[e(M,{title:Xa}),e(A,null,Je({title:l(()=>[v(r(Xa))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=V=>d.value=!d.value)},null,8,["icon"]),z.$can("admin.cashier-terminal.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=V=>a(ee).get(z.route("admin.cashier-terminal.add")))})):k("",!0)]),default:l(()=>[t("div",oi,[e(Ie,{class:"full-height-table",style:Ke({height:a(b)}),ref_key:"tableRef",ref:s,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":R[5]||(R[5]=V=>m.value=V),filter:f.search,loading:i.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:D,filter:P})=>[t("div",ni,[t("span",null,r(D)+" "+r(P?" with term "+P:""),1)])]),body:l(V=>[e(Pe,{props:V,class:qe([V.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(D=>a(Y)(V.row,D),["stop"])},{default:l(()=>[e(W,{key:"name",props:V,class:"wrap-column"},{default:l(()=>[t("div",null,[e(T,{name:"wallet"}),v(" "+r(V.row.name),1)]),t("div",null,[e(T,{name:"home_pin"}),v(" "+r(V.row.location),1)]),a(n).screen.lt.md?(c(),O(he,{key:0,text:V.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:V},{default:l(()=>[t("div",null,[e(T,{name:"wallet"}),v(" "+r(V.row.finance_account.name),1)]),t("div",null,[e(T,{name:"money"}),v(" "+r(a(yt)(V.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(W,{key:"notes",props:V},{default:l(()=>[e(he,{text:V.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:V},{default:l(()=>[t("div",si,[z.$can("admin.cashier-terminal.edit")||z.$can("admin.cashier-terminal.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[4]||(R[4]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[z.$can("admin.cashier-terminal.edit")?le((c(),O(oe,{key:0,clickable:"",onClick:J(D=>a(ee).get(z.route("admin.cashier-terminal.edit",V.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...R[6]||(R[6]=[v("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),z.$can("admin.cashier-terminal.delete")?le((c(),O(oe,{key:1,onClick:J(D=>_(V.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...R[7]||(R[7]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",li,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:f.status,"onUpdate:modelValue":[R[2]||(R[2]=V=>f.status=V),C],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":R[3]||(R[3]=V=>f.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ii=Object.freeze(Object.defineProperty({__proto__:null,default:ri},Symbol.toStringTag,{value:"Module"})),di={class:"q-gutter-sm"},ui={class:"col col-md-6 q-pa-xs"},mi={class:"row"},ci={class:"detail"},pi={key:0},fi={key:1},gi={key:0},bi={key:1},vi={colspan:"3",class:"bg-white"},Za="Rincian Konfirmasi Top Up",yi={__name:"Detail",setup(u){const n=ve(),d=()=>ma({message:`Setujui konfirmasi transaksi #${n.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",n.props.data.id),data:{id:n.props.data.id,action:"accept"},onSuccess:()=>{ee.get(route("admin.customer-wallet-transaction-confirmation.detail",n.props.data.id))}}),o=()=>ma({message:`Tolak konfirmasi transaksi #${n.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",n.props.data.id),data:{id:n.props.data.id,action:"reject"},onSuccess:()=>{ee.get(route("admin.customer-wallet-transaction-confirmation.detail",n.props.data.id))}});return(i,s)=>{const g=Z("i-head"),b=Z("i-link"),f=Z("my-link"),m=Z("authenticated-layout");return c(),w(Q,null,[e(g,{title:Za}),e(m,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",di,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=p=>i.$inertia.get(i.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":l(()=>[a(n).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:reject")?(c(),O(I,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:s[1]||(s[1]=p=>o()),class:"q-mr-sm"})):k("",!0),a(n).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:accept")?(c(),O(I,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:s[2]||(s[2]=p=>d())})):k("",!0)]),title:l(()=>[t("span",{class:"text-subtitle2"},r(Za))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",ui,[t("div",mi,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[s[24]||(s[24]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",ci,[t("tbody",null,[t("tr",null,[s[3]||(s[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),s[4]||(s[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.code),1)]),t("tr",null,[s[5]||(s[5]=t("td",null,"Waktu",-1)),s[6]||(s[6]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.datetime)),1)]),t("tr",null,[s[7]||(s[7]=t("td",null,"Pelanggan",-1)),s[8]||(s[8]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),e(b,{href:i.route("admin.customer.detail",{id:a(n).props.data.customer_id})},{default:l(()=>[v(r(a(n).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(a(n).props.data.customer.name),1)]),a(n).props.data.customer.phone?(c(),w("div",pi,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(a(n).props.data.customer.phone),1)])):k("",!0),a(n).props.data.customer.address?(c(),w("div",fi,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(a(n).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[s[11]||(s[11]=t("td",null,"Akun Tujuan",-1)),s[12]||(s[12]=t("td",null,":",-1)),t("td",null,[e(f,{href:i.route("admin.finance-account.detail",{id:a(n).props.data.finance_account.id})},{default:l(()=>[v(r(a(n).props.data.finance_account.name),1)]),_:1},8,["href"]),s[10]||(s[10]=t("br",null,null,-1)),a(n).props.data.finance_account.type==="bank"?(c(),w(Q,{key:0},[v(" Rek "+r(a(n).props.data.finance_account.bank)+" an "+r(a(n).props.data.finance_account.holder)+" ",1),s[9]||(s[9]=t("br",null,null,-1)),v(" "+r(a(n).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[s[13]||(s[13]=t("td",null,"Jumlah",-1)),s[14]||(s[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(n).props.data.amount)),1)]),t("tr",null,[s[15]||(s[15]=t("td",null,"Status",-1)),s[16]||(s[16]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[a(n).props.data.status]),1)]),t("tr",null,[s[17]||(s[17]=t("td",null,"Catatan",-1)),s[18]||(s[18]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(c(),w("tr",gi,[s[19]||(s[19]=t("td",null,"Dibuat",-1)),s[20]||(s[20]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(c(),w("tr",bi,[s[21]||(s[21]=t("td",null,"Diperbarui",-1)),s[22]||(s[22]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(c(),w(Q,{key:2},[s[23]||(s[23]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",vi,[e(na,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Ke([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},_i=Object.freeze(Object.defineProperty({__proto__:null,default:yi},Symbol.toStringTag,{value:"Module"})),ki={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},wi={class:"q-pa-xs"},hi={key:0},$i={class:"flex justify-end no-wrap"},el="Konfirmasi Top Up Wallet",xi={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=q(null),m=q(!1),p=Mt(),y=Bt(),_=[{label:"Semua Tahun",value:"all"},...Vt(p-2,p).reverse()],x=[{value:"all",label:"Semua Bulan"},...qt()],C=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],$=De({search:"",year:p,month:y,status:"all",...Ne()}),B=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",field:"action",align:"center"}];$e(()=>{E()});const E=(P=null)=>{Me({pagination:B,filter:$,props:P,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:i,tableRef:s})},z=()=>{E()},R=X(()=>n.screen.gt.sm?Y:Y.filter(P=>["code","action"].includes(P.name)));He(()=>$.year,P=>{P===null&&($.month=null)});const M=P=>ma({message:`Setujui konfirmasi transaksi #${P.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:E,loading:i,data:{id:P.id,action:"accept"}}),A=P=>ma({message:`Tolak konfirmasi transaksi #${P.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:E,loading:i,data:{id:P.id,action:"reject"}}),V=P=>st({message:`Hapus konfirmasi transaksi ${P.code}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",P.id),fetchItemsCallback:E,loading:i}),D=P=>{f.value=P,m.value=!0};return(P,h)=>{const U=Z("i-head"),N=Z("authenticated-layout");return c(),w(Q,null,[e(U,{title:el}),e(N,null,Je({title:l(()=>[v(r(el))]),"right-button":l(()=>[e(I,{class:"q-ml-sm",icon:d.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:h[0]||(h[0]=S=>d.value=!d.value)},null,8,["icon"])]),default:l(()=>[t("div",wi,[e(Ie,{ref_key:"tableRef",ref:s,class:"full-height-table",style:Ke({height:a(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:B.value,"onUpdate:pagination":h[6]||(h[6]=S=>B.value=S),filter:$.search,loading:i.value,columns:R.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:E,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:J(j=>a(ee).get(P.route("admin.customer-wallet-transaction-confirmation.detail",{id:S.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:S,class:"wrap-column"},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(S.row.code),1)]),a(n).screen.gt.sm?k("",!0):(c(),w("div",hi,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(be)(S.row.datetime)),1)])),a(n).screen.gt.sm?k("",!0):(c(),w(Q,{key:1},[e(he,{icon:"account_balance",text:S.row.finance_account.name},null,8,["text"]),t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(S.row.customer.code)+" - "+r(S.row.customer.name),1)]),t("div",null,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(S.row.amount)),1)]),S.row.notes?(c(),O(he,{key:0,icon:"notes",text:S.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Fa,{status:S.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(W,{key:"datetime",props:S,class:"wrap-column"},{default:l(()=>[v(r(a(be)(S.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"customer_id",props:S},{default:l(()=>[e(he,{text:S.row.customer.code+" - "+S.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:S},{default:l(()=>[v(r(S.row.finance_account.name),1),h[8]||(h[8]=t("br",null,null,-1)),v(" "+r(S.row.finance_account.bank)+" "+r(S.row.finance_account.number)+" an. "+r(S.row.finance_account.holder),1)]),_:2},1032,["props"]),e(W,{key:"amount",props:S,style:{"text-align":"right"}},{default:l(()=>[v(r(a(K)(S.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"status",props:S,class:"text-center"},{default:l(()=>[e(Fa,{status:S.row.status},null,8,["status"])]),_:2},1032,["props"]),e(W,{key:"notes",props:S,class:"word-wrap"},{default:l(()=>[e(he,{icon:"notes",text:S.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:S,class:"text-center"},{default:l(()=>[t("div",$i,[e(I,{icon:"image",color:"primary",dense:"",flat:"",disable:S.row.image_path===null||S.row.image_path==="",onClick:J(j=>D(S.row.image_path),["stop"])},{default:l(()=>[S.row.image_path!=null?(c(),O(Xt,{key:0},{default:l(()=>[...h[9]||(h[9]=[v(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.customer-wallet-transaction-confirmation:accept")||P.$can("admin.customer-wallet-transaction-confirmation:deny")||P.$can("admin.customer-wallet-transaction-confirmation.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[5]||(h[5]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.customer-wallet-transaction-confirmation:accept")?le((c(),O(oe,{key:0,onClick:J(j=>M(S.row),["stop"]),clickable:"",disable:S.row.status!=="pending"},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"check"})]),_:1}),e(L,null,{default:l(()=>[...h[10]||(h[10]=[v("Setujui",-1)])]),_:1})]),_:1},8,["onClick","disable"])),[[ue],[pe]]):k("",!0),P.$can("admin.customer-wallet-transaction-confirmation:deny")?le((c(),O(oe,{key:1,onClick:J(j=>A(S.row),["stop"]),clickable:"",disable:S.row.status!=="pending"},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"cancel"})]),_:1}),e(L,null,{default:l(()=>[...h[11]||(h[11]=[v("Tolak",-1)])]),_:1})]),_:1},8,["onClick","disable"])),[[ue],[pe]]):k("",!0),e(Ae),P.$can("admin.customer-wallet-transaction-confirmation.delete")?le((c(),O(oe,{key:2,onClick:J(j=>V(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...h[12]||(h[12]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(pa,{modelValue:m.value,"onUpdate:modelValue":h[7]||(h[7]=S=>m.value=S),imageUrl:`/${f.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",ki,[e(ce,{modelValue:$.year,"onUpdate:modelValue":[h[1]||(h[1]=S=>$.year=S),z],options:_,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!=="all"?(c(),O(ce,{key:0,modelValue:$.month,"onUpdate:modelValue":[h[2]||(h[2]=S=>$.month=S),z],options:x,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:$.status,"onUpdate:modelValue":[h[3]||(h[3]=S=>$.status=S),z],options:C,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":h[4]||(h[4]=S=>$.search=S),placeholder:"Cari...",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Si=Object.freeze(Object.defineProperty({__proto__:null,default:xi},Symbol.toStringTag,{value:"Module"}));function no(u,n=!1){const d=u.map(g=>({value:g.id,label:g.name+" ("+g.code+")"})),o=n?[{value:"all",label:"Semua"},...d]:d,i=q([...o]);return{filteredCustomers:i,filterCustomersFn:(g,b)=>{b(()=>{i.value=o.filter(f=>f.label.toLowerCase().includes(g.toLowerCase()))})},customers:o}}const Vi={class:"col col-md-6 q-pa-xs"},tl="Penyesuaian Saldo Dompet Pelanggan",qi={__name:"Adjustment",setup(u){const n=ve(),{filteredCustomers:d,filterCustomersFn:o}=no(n.props.customers,!1),i=We({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),s=()=>i.amount=i.new_wallet_balance-i.old_wallet_balance;He(()=>i.customer_id,async f=>{if(!f){i.old_wallet_balance=0,i.new_wallet_balance=0,s();return}i.processing=!0;try{const m=await axios.get(route("admin.customer.wallet_balance",{id:f}));i.new_wallet_balance=i.old_wallet_balance=m.data.wallet_balance}catch(m){console.error("Gagal mengambil saldo:",m),i.old_wallet_balance=0,i.new_wallet_balance=0}i.processing=!1,s()});const g=X(()=>i.new_wallet_balance-i.old_wallet_balance),b=()=>rt({form:i,url:route("admin.customer-wallet-transaction.adjustment")});return(f,m)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),w(Q,null,[e(p,{title:tl}),e(y,null,{title:l(()=>[v(r(tl))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Vi,[e(Qe,{class:"row",onSubmit:J(b,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(ce,{class:"custom-select",modelValue:a(i).customer_id,"onUpdate:modelValue":m[0]||(m[0]=_=>a(i).customer_id=_),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(d),"map-options":"","emit-value":"",errorMessage:a(i).errors.customer_id,onFilter:a(o),error:!!a(i).errors.customer_id,disable:a(i).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(L,null,{default:l(()=>[...m[6]||(m[6]=[v("Pelanggan tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Ee,{modelValue:a(i).old_wallet_balance,"onUpdate:modelValue":m[1]||(m[1]=_=>a(i).old_wallet_balance=_),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.old_wallet_balance,errorMessage:a(i).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(i).new_wallet_balance,"onUpdate:modelValue":m[2]||(m[2]=_=>a(i).new_wallet_balance=_),label:"Saldo Seharusnya",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.new_wallet_balance,errorMessage:a(i).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":m[3]||(m[3]=_=>g.value=_),label:"Selisih",readonly:"",lazyRules:"",disable:a(i).processing},null,8,["modelValue","disable"]),e(se,{modelValue:a(i).notes,"onUpdate:modelValue":m[4]||(m[4]=_=>a(i).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.notes,"error-message":a(i).errors.notes,rules:[_=>_&&_.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing},null,8,["disable"]),e(I,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:m[5]||(m[5]=_=>a(ee).get(f.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ci=Object.freeze(Object.defineProperty({__proto__:null,default:qi},Symbol.toStringTag,{value:"Module"})),Ti={class:"q-gutter-sm"},Pi={class:"col col-md-6 q-pa-xs"},Ri={class:"row"},Oi={class:"detail"},Di={key:0},Ii={key:1},Ui={key:0},Ei={key:1},Ai={colspan:"3",class:"bg-white"},al="Rincian Transaksi",ji={__name:"Detail",setup(u){const n=ve();return(d,o)=>{const i=Z("i-head"),s=Z("i-link"),g=Z("authenticated-layout");return c(),w(Q,null,[e(i,{title:al}),e(g,null,{"left-button":l(()=>[t("div",Ti,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>d.$goBack())})])]),title:l(()=>[v(r(al))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Pi,[t("div",Ri,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[18]||(o[18]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",Oi,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.datetime)),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Pelanggan",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),e(s,{href:d.route("admin.customer.detail",{id:a(n).props.data.customer_id})},{default:l(()=>[v(""+r(a(n).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(a(n).props.data.customer.name),1)]),a(n).props.data.customer.phone?(c(),w("div",Di,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(a(n).props.data.customer.phone),1)])):k("",!0),a(n).props.data.customer.address?(c(),w("div",Ii,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(a(n).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[a(n).props.data.type]),1)]),t("tr",null,[o[9]||(o[9]=t("td",null,"Jumlah",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",{class:qe(a(n).props.data.amount>0?"text-positive":"text-negative")},r(a(ta)(a(n).props.data.amount))+"Rp. "+r(a(K)(Math.abs(a(n).props.data.amount))),3)]),t("tr",null,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(c(),w("tr",Ui,[o[13]||(o[13]=t("td",null,"Dibuat",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(c(),w("tr",Ei,[o[15]||(o[15]=t("td",null,"Diperbarui",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(c(),w(Q,{key:2},[o[17]||(o[17]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Ai,[e(na,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Ke([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Ni=Object.freeze(Object.defineProperty({__proto__:null,default:ji},Symbol.toStringTag,{value:"Module"})),Mi={class:"q-gutter-sm"},Bi={class:"col col-md-6 q-pa-xs"},zi={__name:"Editor",setup(u){var m;const n=ve(),d=(n.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:i}=no(n.props.customers,!1),s=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],g=n.props.finance_accounts.map(p=>({label:p.name,value:p.id})),b=We({id:n.props.data.id,customer_id:n.props.data.customer_id,finance_account_id:n.props.data.finance_account_id,type:n.props.data.type,datetime:new Date(n.props.data.datetime),notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((m=n.props.data)==null?void 0:m.image_path)??"",image:null}),f=()=>{sa(b,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:b,url:route("admin.customer-wallet-transaction.save")})};return(p,y)=>{const _=Z("i-head"),x=Z("authenticated-layout");return c(),w(Q,null,[e(_,{title:d}),e(x,null,{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",Mi,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=C=>p.$inertia.get(p.route("admin.customer-wallet-transaction.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Bi,[e(Qe,{class:"row",onSubmit:J(f,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[1]||(y[1]=C=>a(b).id=C)},null,512),[[kt,a(b).id]]),e(zt,{autofocus:"",modelValue:a(b).datetime,"onUpdate:modelValue":y[2]||(y[2]=C=>a(b).datetime=C),label:"Tanggal",error:!!a(b).errors.datetime,disable:a(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ce,{class:"custom-select",modelValue:a(b).customer_id,"onUpdate:modelValue":y[3]||(y[3]=C=>a(b).customer_id=C),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"","emit-value":"",errorMessage:a(b).errors.customer_id,onFilter:a(i),error:!!a(b).errors.customer_id,disable:a(b).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(L,null,{default:l(()=>[...y[10]||(y[10]=[v("Pelanggan tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(ce,{modelValue:a(b).type,"onUpdate:modelValue":y[4]||(y[4]=C=>a(b).type=C),label:"Jenis",options:s,"map-options":"","emit-value":"",error:!!a(b).errors.type,disable:a(b).processing,errorMessage:a(b).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{modelValue:a(b).finance_account_id,"onUpdate:modelValue":y[5]||(y[5]=C=>a(b).finance_account_id=C),label:a(b).type=="deposit"?"Kas Tujuan":"Kas Asal",options:a(g),"map-options":"","emit-value":"",error:!!a(b).errors.finance_account_id,disable:a(b).processing,errorMessage:a(b).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Ee,{modelValue:a(b).amount,"onUpdate:modelValue":y[6]||(y[6]=C=>a(b).amount=C),label:"Jumlah",lazyRules:"",disable:a(b).processing,error:!!a(b).errors.amount,errorMessage:a(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(se,{modelValue:a(b).notes,"onUpdate:modelValue":y[7]||(y[7]=C=>a(b).notes=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(b).processing,error:!!a(b).errors.notes,"error-message":a(b).errors.notes,rules:[C=>C&&C.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Oa,{modelValue:a(b).image,"onUpdate:modelValue":y[8]||(y[8]=C=>a(b).image=C),"initial-image-path":a(b).image_path,disabled:a(b).processing,error:!!a(b).errors.image||!!a(b).errors.image_path,"error-message":a(b).errors.image||a(b).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(b).processing},null,8,["disable"]),e(I,{icon:"cancel",label:"Batal",disable:a(b).processing,onClick:y[9]||(y[9]=C=>a(ee).get(p.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Fi=Object.freeze(Object.defineProperty({__proto__:null,default:zi},Symbol.toStringTag,{value:"Module"})),Li={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ki={class:"q-pa-xs"},Hi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Yi={key:0},Wi={key:0},Qi={class:"flex justify-end no-wrap"},ll="Transaksi Dompet Pelanggan",Ji={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=new Date().getFullYear(),m=new Date().getMonth()+1,p=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...Vt(f-2,f-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...qt()],_=De({search:"",year:f,month:m,...Ne()}),x=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),C=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{B()});const $=A=>st({message:`Hapus transaksi #${A.code}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",A.id),fetchItemsCallback:B,loading:i}),B=(A=null)=>{Me({pagination:x,filter:_,props:A,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:i,tableRef:s})},Y=()=>{B()},E=X(()=>n.screen.gt.sm?C:C.filter(A=>A.name==="code"||A.name==="action"));He(()=>_.year,A=>{A===null&&(_.month=null)});const z=q(null),R=q(!1),M=A=>{z.value=A,R.value=!0};return(A,V)=>{const D=Z("i-head"),P=Z("authenticated-layout");return c(),w(Q,null,[e(D,{title:ll}),e(P,null,Je({title:l(()=>[v(r(ll))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:V[0]||(V[0]=h=>d.value=!d.value)},null,8,["icon"]),A.$can("admin.customer-wallet-transaction.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:V[1]||(V[1]=h=>a(ee).get(A.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",Ki,[e(Ie,{ref_key:"tableRef",ref:s,style:Ke({height:a(b)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":V[6]||(V[6]=h=>x.value=h),filter:_.search,loading:i.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:B,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:h,message:U,filter:N})=>[t("div",Hi,[t("span",null,r(U)+" "+r(N?" with term "+N:""),1)])]),body:l(h=>[e(Pe,{props:h,class:"cursor-pointer",onClick:J(U=>a(ee).get(A.route("admin.customer-wallet-transaction.detail",{id:h.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:h,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.gt.sm?k("",!0):(c(),O(T,{key:0,name:"tag",class:"inline-icon"})),v(" "+r(h.row.code),1)]),a(n).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(be)(h.row.datetime)),1)]),h.row.finance_account?(c(),w("div",Yi,[e(T,{name:"wallet",class:"inline-icon"}),v(" "+r(h.row.finance_account?h.row.finance_account.name:"-"),1)])):k("",!0),e(he,{icon:"person",text:h.row.customer.code+" - "+h.row.customer.name},null,8,["text"]),t("div",{class:qe([h.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(T,{name:"money",class:"inline-icon"}),v(" "+r(a(ta)(h.row.amount))+"Rp. "+r(a(K)(Math.abs(h.row.amount))),1)],2),e(he,{text:h.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(vt,null,{default:l(()=>[v(r(h.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(W,{key:"datetime",props:h},{default:l(()=>[v(r(a(be)(h.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"customer_id",props:h},{default:l(()=>[e(he,{text:h.row.customer.code+" - "+h.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:h},{default:l(()=>[h.row.finance_account?(c(),w("div",Wi,r(h.row.finance_account?h.row.finance_account.name:"-"),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"amount",props:h,style:{"text-align":"right"}},{default:l(()=>[v(r(a(jt)(h.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:h},{default:l(()=>[e(he,{text:h.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:h},{default:l(()=>[t("div",Qi,[e(I,{icon:"image",color:"primary",dense:"",flat:"",disable:h.row.image_path===null||h.row.image_path==="",onClick:J(U=>M(h.row.image_path),["stop"])},{default:l(()=>[h.row.image_path!=null?(c(),O(Xt,{key:0},{default:l(()=>[...V[8]||(V[8]=[v(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),A.$can("admin.customer-wallet-transaction.delete")?(c(),O(I,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:V[5]||(V[5]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[A.$can("admin.customer-wallet-transaction.delete")?le((c(),O(oe,{key:0,onClick:J(U=>$(h.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...V[9]||(V[9]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(pa,{modelValue:R.value,"onUpdate:modelValue":V[7]||(V[7]=h=>R.value=h),imageUrl:`/${z.value}`},null,8,["modelValue","imageUrl"])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Li,[e(ce,{modelValue:_.year,"onUpdate:modelValue":[V[2]||(V[2]=h=>_.year=h),Y],options:p,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:_.month,"onUpdate:modelValue":[V[3]||(V[3]=h=>_.month=h),Y],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:_.year===null},null,8,["modelValue","disable"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":V[4]||(V[4]=h=>_.search=h),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Gi=Object.freeze(Object.defineProperty({__proto__:null,default:Ji},Symbol.toStringTag,{value:"Module"})),Xi={class:"detail"},Zi={key:0},ed={key:1},td={class:"text-grey-8"},ad={key:2},ld={class:"text-grey-8"},od={key:0,class:"q-pt-md"},so={__name:"MainInfoTab",setup(u){const n=ve(),d=()=>{st({message:`Hapus Pelanggan ${n.props.data.code}?`,url:route("admin.customer.delete",n.props.data.id),onSuccess:()=>{ee.get(route("admin.customer.index"))}})};return(o,i)=>(c(),w(Q,null,[t("table",Xi,[t("tbody",null,[i[28]||(i[28]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pelanggan")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Jenis",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.type_label),1)]),t("tr",null,[i[5]||(i[5]=t("td",null,"Nama",-1)),i[6]||(i[6]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[i[7]||(i[7]=t("td",null,"Default Harga",-1)),i[8]||(i[8]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.default_price_type_label),1)]),t("tr",null,[i[9]||(i[9]=t("td",null,"No. Telepon",-1)),i[10]||(i[10]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.phone?a(n).props.data.phone:"-"),1)]),t("tr",null,[i[11]||(i[11]=t("td",null,"Alamat",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.address?a(n).props.data.address:"-"),1)]),t("tr",null,[i[13]||(i[13]=t("td",null,"Saldo Wallet",-1)),i[14]||(i[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(n).props.data.wallet_balance)),1)]),t("tr",null,[i[15]||(i[15]=t("td",null,"Utang Penjualan",-1)),i[16]||(i[16]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(n).props.data.balance)),1)]),t("tr",null,[i[17]||(i[17]=t("td",null,"Status",-1)),i[18]||(i[18]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),i[29]||(i[29]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),a(n).props.data.created_at?(c(),w("tr",Zi,[i[19]||(i[19]=t("td",null,"Dibuat",-1)),i[20]||(i[20]=t("td",null,":",-1)),t("td",null,r(a(Et)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name)+" ("+r(a(be)(a(n).props.data.created_at))+") ",1)])):k("",!0),a(n).props.data.updated_at?(c(),w("tr",ed,[i[21]||(i[21]=t("td",null,"Diperbarui",-1)),i[22]||(i[22]=t("td",null,":",-1)),t("td",null,r(a(Et)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name)+" ("+r(a(be)(a(n).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[i[23]||(i[23]=t("td",null,"Terakhir login",-1)),i[24]||(i[24]=t("td",null,":",-1)),t("td",null,[v(r(a(n).props.data.last_login_datetime?a(be)(a(n).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",td,"("+r(a(Et)(a(n).props.data.last_login_datetime))+")",1)])]),a(n).props.data.last_activity_datetime?(c(),w("tr",ad,[i[26]||(i[26]=t("td",null,"Aktifitas Terakhir",-1)),i[27]||(i[27]=t("td",null,":",-1)),t("td",null,[v(r(a(be)(a(n).props.data.last_activity_datetime))+" ",1),t("span",ld,[v("("+r(a(Et)(a(n).props.data.last_activity_datetime))+")",1),i[25]||(i[25]=t("br",null,null,-1)),v(r(a(n).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(c(),w("div",od,[e(I,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=s=>d())})])):k("",!0)],64))}},nd=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"})),sd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},rd={class:"text-bold"},ro={__name:"WalletHistoryTab",setup(u){const n=ve(),d=q([]),o=q(!0),i=De({customer_id:n.props.data.id,...Ne()}),s=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];$e(()=>{b()});const b=(p=null)=>Me({pagination:s,filter:i,props:p,rows:d,url:route("admin.customer-wallet-transaction.data"),loading:o}),f=Se(),m=X(()=>f.screen.gt.sm?g:g.filter(p=>p.name==="id"));return(p,y)=>(c(),O(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:s.value,"onUpdate:pagination":y[0]||(y[0]=_=>s.value=_),filter:i.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:x,filter:C})=>[t("div",sd,[t("span",null,r(x)+" "+r(C?" with term "+C:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(x=>a(ee).get(p.route("admin.customer-wallet-transaction.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",rd,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(be)(_.row.datetime)),1)]),a(f).screen.lt.md?(c(),w(Q,{key:0},[t("div",{class:qe(["text-bold",_.row.amount<0?"text-red":"text-green"])},[e(T,{name:"money",class:"inline-icon"}),v(" "+r(a(aa)(_.row.amount)),1)],2),t("div",null,[e(he,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(vt,{size:"xs",color:_.row.amount>0?"green":"red"},{default:l(()=>[e(T,{name:"category"}),v(" "+r(_.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e(he,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"amount",props:_},{default:l(()=>[t("div",{class:qe(_.row.amount<0?"text-red-10":_.row.amount>0?"text-green-10":"")},r(a(jt)(_.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},id=Object.freeze(Object.defineProperty({__proto__:null,default:ro},Symbol.toStringTag,{value:"Module"})),dd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ud={class:"text-bold"},md={class:"text-bold"},cd={key:0},io={__name:"OrderHistoryTab",setup(u){const n=ve(),d=q([]),o=q(!0),i=De({customer_id:n.props.data.id,...Ne()}),s=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{b()});const b=(p=null)=>Me({pagination:s,filter:i,props:p,rows:d,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:n.props.data.id}}),loading:o}),f=Se(),m=X(()=>f.screen.gt.sm?g:g.filter(p=>p.name==="id"));return(p,y)=>(c(),O(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:s.value,"onUpdate:pagination":y[0]||(y[0]=_=>s.value=_),filter:i.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:x,filter:C})=>[t("div",dd,[t("span",null,r(x)+" "+r(C?" with term "+C:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(x=>a(ee).get(p.route("admin.sales-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",ud,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(be)(_.row.datetime)),1)]),a(f).screen.lt.md?(c(),w(Q,{key:0},[t("div",md,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(_.row.grand_total)),1)]),_.row.notes?(c(),w("div",cd,[e(he,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(vt,{color:_.row.status=="closed"?"green":"red"},{default:l(()=>[v(r(_.row.status_label),1)]),_:2},1032,["color"]),e(vt,{class:"q-ml-xs",color:_.row.payment_status=="fully_paid"?"green":"red"},{default:l(()=>[v(r(_.row.payment_status_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[t("div",null,r(a(K)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e(he,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},pd=Object.freeze(Object.defineProperty({__proto__:null,default:io},Symbol.toStringTag,{value:"Module"})),fd=St({name:"QSpace",setup(){const u=Ve("div",{class:"q-space"});return()=>u}}),gd={class:"detail"},bd={key:0},vd={key:1},yd={__name:"SupplierDetail",props:{data:{type:Object,default:null}},setup(u){return(n,d)=>(c(),w("table",gd,[t("tbody",null,[t("tr",null,[d[0]||(d[0]=t("td",{style:{width:"100px"}},"Nama",-1)),d[1]||(d[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.data.name),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"No Telepon",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,[v(r(u.data.phone_1?u.data.phone_1:"-")+" ",1),u.data.phone_2?(c(),w(Q,{key:0},[d[2]||(d[2]=t("br",null,null,-1)),v(" "+r(u.data.phone_2),1)],64)):k("",!0),u.data.phone_3?(c(),w(Q,{key:1},[d[3]||(d[3]=t("br",null,null,-1)),v(" "+r(u.data.phone_3),1)],64)):k("",!0)])]),t("tr",null,[d[6]||(d[6]=t("td",null,"Alamat",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,r(u.data.address?u.data.address:"-"),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Alamat Retur",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,r(u.data.returned_address?u.data.returned_address:"-"),1)]),u.data.bank_account_name_1||u.data.bank_account_holder_1||u.data.bank_account_number_1?(c(),w("tr",bd,[d[10]||(d[10]=t("td",null,"No Rek 1",-1)),d[11]||(d[11]=t("td",null,":",-1)),t("td",null,[v(r(u.data.bank_account_name_1)+" ",1),u.data.bank_account_holder_1?(c(),w(Q,{key:0},[v(" a.n. "+r(u.data.bank_account_holder_1),1)],64)):k("",!0),v(" "+r(u.data.bank_account_number_1),1)])])):k("",!0),u.data.bank_account_name_2||u.data.bank_account_holder_2||u.data.bank_account_number_2?(c(),w("tr",vd,[d[12]||(d[12]=t("td",null,"No Rek 2",-1)),d[13]||(d[13]=t("td",null,":",-1)),t("td",null,[v(r(u.data.bank_account_name_2)+" ",1),u.data.bank_account_holder_2?(c(),w(Q,{key:0},[v(" a.n. "+r(u.data.bank_account_holder_2),1)],64)):k("",!0),v(" "+r(u.data.bank_account_number_2),1)])])):k("",!0),t("tr",null,[d[15]||(d[15]=t("td",null,"URL",-1)),d[16]||(d[16]=t("td",null,":",-1)),t("td",null,[v(r(!u.data.url_1&&!u.data.url_2?"-":"")+" ",1),u.data.url_1?(c(),w(Q,{key:0},[v(r(u.data.url_1),1)],64)):k("",!0),u.data.url_2?(c(),w(Q,{key:1},[d[14]||(d[14]=t("br",null,null,-1)),v(" "+r(u.data.url_2),1)],64)):k("",!0)])]),t("tr",null,[d[17]||(d[17]=t("td",null,"Status",-1)),d[18]||(d[18]=t("td",null,":",-1)),t("td",null,r(u.data.active?"Aktif":"Tidak Aktif"),1)])])]))}},_d={class:"detail"},kd={__name:"CustomerDetail",props:{data:{type:Object,default:null}},setup(u){return(n,d)=>(c(),w("table",_d,[t("tbody",null,[t("tr",null,[d[0]||(d[0]=t("td",{style:{width:"100px"}},"Kode",-1)),d[1]||(d[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.data.code),1)]),t("tr",null,[d[2]||(d[2]=t("td",null,"Nama",-1)),d[3]||(d[3]=t("td",null,":",-1)),t("td",null,r(u.data.name),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"No Telepon",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,r(u.data.phone),1)]),t("tr",null,[d[6]||(d[6]=t("td",null,"Alamat",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,r(u.data.address),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Status",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,r(u.data.active?"Aktif":"Tidak Aktif"),1)])])]))}},wd={class:"detail"},hd={__name:"ProductDetail",props:{data:{type:Object,default:null}},setup(u){return(n,d)=>{var o,i;return c(),w("table",wd,[t("tbody",null,[t("tr",null,[d[0]||(d[0]=t("td",{style:{width:"100px"}},"Kode / Nama",-1)),d[1]||(d[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.data.name),1)]),t("tr",null,[d[2]||(d[2]=t("td",null,"Deskripsi",-1)),d[3]||(d[3]=t("td",null,":",-1)),t("td",null,r(u.data.description),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"Barcode",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,r(u.data.barcode),1)]),t("tr",null,[d[6]||(d[6]=t("td",null,"Jenis",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,r(n.$CONSTANTS.PRODUCT_TYPES[u.data.type]),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Kategori",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,r((o=u.data.category)==null?void 0:o.name),1)]),t("tr",null,[d[10]||(d[10]=t("td",null,"Pemasok",-1)),d[11]||(d[11]=t("td",null,":",-1)),t("td",null,r((i=u.data.supplier)==null?void 0:i.name),1)]),t("tr",null,[d[12]||(d[12]=t("td",null,"Status",-1)),d[13]||(d[13]=t("td",null,":",-1)),t("td",null,r(u.data.active?"Aktif":"Tidak Aktif"),1)])])])}}},$d={class:"text-subtitle1"},xd={class:"text-subtitle2 text-grey-9 q-mb-md"},Sd={class:"text-weight-medium"},Vd={key:0},qd={key:1},Cd={key:2},Td={key:3},Pd={class:"text-subtitle1 text-grey-6 q-mb-sm"},Rd={class:"bg-white q-pa-sm rounded-borders overflow-auto text-sm border-2 border-dashed border-grey-4",style:{"white-space":"pre-wrap","word-wrap":"break-word"}},Od={__name:"DocumentVersionDataViewer",props:{selectedVersion:{type:Object,default:null},showDialog:{type:Boolean,required:!0}},emits:["update:showDialog"],setup(u,{emit:n}){const d=u,o=Se(),i=n,s=X({get:()=>d.showDialog,set:m=>i("update:showDialog",m)}),g=X(()=>{if(d.selectedVersion&&d.selectedVersion.data)try{return typeof d.selectedVersion.data=="string"?JSON.parse(d.selectedVersion.data):d.selectedVersion.data}catch(m){return console.error("Error parsing JSON data:",m),{error:"Data JSON tidak valid."}}return{}}),b=X(()=>{var m;return(m=d.selectedVersion)==null?void 0:m.document_type}),f=X(()=>JSON.stringify(g.value,null,2));return(m,p)=>(c(),O(lt,{modelValue:s.value,"onUpdate:modelValue":p[2]||(p[2]=y=>s.value=y),"transition-show":"scale","transition-hide":"scale",maximized:a(o).screen.lt.md},{default:l(()=>[e(ge,{style:{width:"600px","max-width":"95vw"}},{default:l(()=>[e(ae,{class:"row items-center q-pb-md bg-grey-4"},{default:l(()=>{var y;return[t("div",$d,[e(T,{name:"history",class:"q-mr-sm"}),v(" Detail Versi V."+r(((y=u.selectedVersion)==null?void 0:y.version)||"N/A"),1)]),e(fd),e(I,{icon:"close",flat:"",round:"",dense:"",onClick:p[0]||(p[0]=_=>s.value=!1),color:"grey"})]}),_:1}),e(ae,{class:"q-pt-md scroll",style:{"max-height":"75vh"}},{default:l(()=>{var y;return[t("div",xd,[e(T,{name:"description",class:"q-mr-xs"}),p[3]||(p[3]=v(" Catatan Perubahan: ",-1)),t("span",Sd,r(((y=u.selectedVersion)==null?void 0:y.changelog)||"Tidak ada catatan perubahan."),1)]),b.value==="App\\Models\\Supplier"?(c(),w("div",Vd,[p[4]||(p[4]=t("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Info Pemasok",-1)),e(yd,{data:g.value},null,8,["data"])])):b.value==="App\\Models\\Customer"?(c(),w("div",qd,[p[5]||(p[5]=t("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Info Pelanggan",-1)),e(kd,{data:g.value},null,8,["data"])])):b.value==="App\\Models\\Product"?(c(),w("div",Cd,[p[6]||(p[6]=t("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Info Produk",-1)),e(hd,{data:g.value},null,8,["data"])])):(c(),w("div",Td,[t("div",Pd," Tipe Dokumen ("+r(b.value||"TIDAK DIKETAHUI")+") Tidak Memiliki Tampilan Kustom. ",1),p[7]||(p[7]=t("div",{class:"text-caption text-grey-7 q-mb-xs"},"Tampilan Raw JSON:",-1)),t("pre",Rd,r(f.value),1)]))]}),_:1}),e(tt,{align:"right",class:"bg-grey-2"},{default:l(()=>[e(I,{flat:"",label:"Tutup",color:"primary",onClick:p[1]||(p[1]=y=>s.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"]))}},Dd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Id={class:"font-bold text-lg"},Ud={class:"text-grey-7"},Da={__name:"DocumentVersionHistoryList",props:{documentId:{type:[String,Number],required:!0},documentType:{type:String,required:!0}},setup(u){const n=u,d=q(!1),o=q(null),i=Se(),s=q([]),g=q(!0),b=De({...Ne()}),f=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let m=[{name:"version",label:"Versi",field:"version",align:"center",sortable:!0},{name:"created_at",label:"Waktu Versi",field:"created_at",align:"left",sortable:!0},{name:"creator",label:"Dibuat Oleh",field:"creator",align:"left"},{name:"changelog",label:"Log Perubahan",field:"changelog",align:"left"}];$e(()=>{p()});const p=(x=null)=>Me({pagination:f,filter:b,props:x,rows:s,url:route("admin.document-version.data",{filter:{document_id:n.documentId,document_type:n.documentType}}),loading:g}),y=X(()=>i.screen.lt.sm?m.filter(x=>x.name==="version"||x.name==="created_at"||x.name==="changelog"):m),_=x=>{o.value=x,d.value=!0};return(x,C)=>(c(),w(Q,null,[e(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:f.value,"onUpdate:pagination":C[0]||(C[0]=$=>f.value=$),filter:b.search,loading:g.value,columns:y.value,rows:s.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({message:$,filter:B})=>[t("div",Dd,[t("span",null,r($)+" "+r(B?" dengan istilah "+B:""),1)])]),body:l($=>[e(Pe,{props:$,onClick:J(B=>_($.row),["stop"]),class:"cursor-pointer"},{default:l(()=>[e(W,{key:"version",props:$},{default:l(()=>{var B;return[t("div",Id,[e(vt,{color:"primary"},{default:l(()=>[v("V."+r($.row.version),1)]),_:2},1024)]),a(i).screen.lt.sm?(c(),w(Q,{key:0},[t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(be)($.row.created_at)),1)]),t("div",Ud,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(((B=$.row.creator)==null?void 0:B.name)||"Sistem"),1)]),e(he,{text:$.row.changelog,icon:"notes",class:"text-grey-8 q-mt-xs"},null,8,["text"])],64)):k("",!0)]}),_:2},1032,["props"]),e(W,{key:"created_at",props:$},{default:l(()=>[v(r(a(be)($.row.created_at)),1)]),_:2},1032,["props"]),e(W,{key:"creator",props:$},{default:l(()=>{var B;return[v(r(((B=$.row.creator)==null?void 0:B.name)||"Sistem"),1)]}),_:2},1032,["props"]),e(W,{key:"changelog",props:$},{default:l(()=>[e(he,{text:$.row.changelog},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]),e(Od,{"show-dialog":d.value,"onUpdate:showDialog":C[1]||(C[1]=$=>d.value=$),"selected-version":o.value},null,8,["show-dialog","selected-version"])],64))}},Ed={class:"q-gutter-sm"},Ad={class:"q-gutter-sm"},jd={class:"col col-lg-6 q-pa-xs"},Nd={class:"row"},ol="Rincian Pelanggan",Md={__name:"Detail",setup(u){const n=ve(),d=q("main");return Se(),(o,i)=>{const s=Z("i-head"),g=Z("authenticated-layout");return c(),w(Q,null,[e(s,{title:ol}),e(g,null,{title:l(()=>[v(r(ol))]),"left-button":l(()=>[t("div",Ed,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":l(()=>[t("div",Ad,[o.$can("admin.customer.edit")?(c(),O(I,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>a(ee).get(o.route("admin.customer.edit",{id:a(n).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(c(),O(I,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>a(ee).get(o.route("admin.customer.edit",{id:a(n).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(c(),O(I,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>a(ee).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",jd,[t("div",Nd,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ct,{modelValue:d.value,"onUpdate:modelValue":i[4]||(i[4]=b=>d.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Info Utama"}),e(ot,{name:"history",label:"Riwayat Wallet"}),e(ot,{name:"order-history",label:"Riwayat Order"}),e(ot,{name:"version-history",label:"Riwayat Dokumen"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:d.value,"onUpdate:modelValue":i[5]||(i[5]=b=>d.value=b),animated:""},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(so)]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(ro)]),_:1}),e(nt,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(io)]),_:1}),e(nt,{name:"version-history",class:"q-pa-xs"},{default:l(()=>[e(Da,{"document-id":a(n).props.data.id,"document-type":"customer"},null,8,["document-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Bd=Object.freeze(Object.defineProperty({__proto__:null,default:Md},Symbol.toStringTag,{value:"Module"})),zd={class:"q-gutter-sm"},Fd={class:"col col-md-6 q-pa-xs"},Ld={__name:"Editor",setup(u){const n=ve(),d=(n.props.data.id?"Edit":"Tambah")+" Pelanggan",o=We({id:n.props.data.id,code:n.props.data.code,name:n.props.data.name,default_price_type:n.props.data.default_price_type,phone:n.props.data.phone,address:n.props.data.address,active:!!n.props.data.active,password:n.props.data.id?null:"12345",type:n.props.data.type}),i=q(!n.props.data.id),s=Ze(window.CONSTANTS.CUSTOMER_TYPES),g=Ze(window.CONSTANTS.PRODUCT_PRICE_TYPES),b=()=>rt({form:o,url:route("admin.customer.save",{id:o.id})});return(f,m)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),w(Q,null,[e(p,{title:d}),e(y,null,{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",zd,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>f.$goBack())})])]),"right-button":l(()=>[e(I,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(o).processing,onClick:m[1]||(m[1]=_=>b()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Fd,[e(Qe,{class:"row",onSubmit:J(b,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[2]||(m[2]=_=>a(o).id=_)},null,512),[[kt,a(o).id]]),e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(se,{modelValue:a(o).code,"onUpdate:modelValue":m[3]||(m[3]=_=>a(o).code=_),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[_=>_&&_.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:a(o).name,"onUpdate:modelValue":m[4]||(m[4]=_=>a(o).name=_),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:a(o).default_price_type,"onUpdate:modelValue":m[5]||(m[5]=_=>a(o).default_price_type=_),options:a(g),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!a(o).errors.default_price_type,"error-message":a(o).errors.default_price_type,disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":m[6]||(m[6]=_=>a(o).type=_),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"","lazy-rules":"",disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(o).errors.type,"error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(se,{modelValue:a(o).phone,"onUpdate:modelValue":m[7]||(m[7]=_=>a(o).phone=_),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:a(o).processing,error:!!a(o).errors.phone,"error-message":a(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:a(o).address,"onUpdate:modelValue":m[8]||(m[8]=_=>a(o).address=_),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{autocomplete:"off","aria-autocomplete":"none",modelValue:a(o).password,"onUpdate:modelValue":m[10]||(m[10]=_=>a(o).password=_),label:a(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:a(o).processing,error:!!a(o).errors.password,"error-message":a(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:i.value?"text":"password"},{append:l(()=>[e(I,{dense:"",flat:"",round:"",onClick:m[9]||(m[9]=_=>i.value=!i.value)},{default:l(()=>[e(T,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(ga,{modelValue:a(o).active,"onUpdate:modelValue":m[11]||(m[11]=_=>a(o).active=_),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),m[12]||(m[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Kd=Object.freeze(Object.defineProperty({__proto__:null,default:Ld},Symbol.toStringTag,{value:"Module"}));function Wt(u,n,d,o){const i=[];return u.forEach(s=>{o(s)===!0?i.push(s):n.push({failedPropValidation:d,file:s})}),i}function ua(u){u!=null&&u.dataTransfer&&(u.dataTransfer.dropEffect="copy"),Kt(u)}const Hd={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Yd=["rejected"];function Wd({editable:u,dnd:n,getFileInput:d,addFilesToQueue:o}){const{props:i,emit:s,proxy:g}=Rt(),b=q(null),f=X(()=>i.accept!==void 0?i.accept.split(",").map(E=>(E=E.trim(),E==="*"?"*/":(E.endsWith("/*")&&(E=E.slice(0,E.length-1)),E.toUpperCase()))):null),m=X(()=>parseInt(i.maxFiles,10)),p=X(()=>parseInt(i.maxTotalSize,10));function y(E){var z;if(u.value)if(E!==Object(E)&&(E={target:null}),((z=E.target)==null?void 0:z.matches('input[type="file"]'))===!0)E.clientX===0&&E.clientY===0&&Vn(E);else{const R=d();R!==E.target&&(R==null||R.click(E))}}function _(E){u.value&&E&&o(null,E)}function x(E,z,R,M){let A=Array.from(z||E.target.files);const V=[],D=()=>{V.length!==0&&s("rejected",V)};if(i.accept!==void 0&&f.value.indexOf("*/")===-1&&(A=Wt(A,V,"accept",P=>f.value.some(h=>P.type.toUpperCase().startsWith(h)||P.name.toUpperCase().endsWith(h))),A.length===0))return D();if(i.maxFileSize!==void 0){const P=parseInt(i.maxFileSize,10);if(A=Wt(A,V,"max-file-size",h=>h.size<=P),A.length===0)return D()}if(i.multiple!==!0&&A.length!==0&&(A=[A[0]]),A.forEach(P=>{P.__key=P.webkitRelativePath+P.lastModified+P.name+P.size}),M===!0){const P=R.map(h=>h.__key);A=Wt(A,V,"duplicate",h=>P.includes(h.__key)===!1)}if(A.length===0)return D();if(i.maxTotalSize!==void 0){let P=M===!0?R.reduce((h,U)=>h+U.size,0):0;if(A=Wt(A,V,"max-total-size",h=>(P+=h.size,P<=p.value)),A.length===0)return D()}if(typeof i.filter=="function"){const P=i.filter(A);A=Wt(A,V,"filter",h=>P.includes(h))}if(i.maxFiles!==void 0){let P=M===!0?R.length:0;if(A=Wt(A,V,"max-files",()=>(P++,P<=m.value)),A.length===0)return D()}if(D(),A.length!==0)return A}function C(E){ua(E),n.value!==!0&&(n.value=!0)}function $(E){Kt(E),(E.relatedTarget!==null||Qt.is.safari!==!0?E.relatedTarget!==b.value:document.elementsFromPoint(E.clientX,E.clientY).includes(b.value)===!1)===!0&&(n.value=!1)}function B(E){ua(E);const z=E.dataTransfer.files;z.length!==0&&o(null,z),n.value=!1}function Y(E){if(n.value===!0)return Ve("div",{ref:b,class:`q-${E}__dnd absolute-full`,onDragenter:ua,onDragover:ua,onDragleave:$,onDrop:B})}return Object.assign(g,{pickFiles:y,addFiles:_}),{pickFiles:y,addFiles:_,onDragover:C,onDragleave:$,processFiles:x,getDndNode:Y,maxFilesNumber:m,maxTotalSizeNumber:p}}const uo=St({name:"QFile",inheritAttrs:!1,props:{...Cn,...Wl,...Hd,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...qn,...Yd],setup(u,{slots:n,emit:d,attrs:o}){const{proxy:i}=Rt(),s=Tn(),g=q(null),b=q(!1),f=Pn(u),{pickFiles:m,onDragover:p,onDragleave:y,processFiles:_,getDndNode:x}=Wd({editable:s.editable,dnd:b,getFileInput:N,addFilesToQueue:S}),C=Rn(u),$=X(()=>Object(u.modelValue)===u.modelValue?"length"in u.modelValue?Array.from(u.modelValue):[u.modelValue]:[]),B=X(()=>La($.value)),Y=X(()=>$.value.map(me=>me.name).join(", ")),E=X(()=>On($.value.reduce((me,Re)=>me+Re.size,0))),z=X(()=>({totalSize:E.value,filesNumber:$.value.length,maxFiles:u.maxFiles})),R=X(()=>({tabindex:-1,type:"file",title:"",accept:u.accept,capture:u.capture,name:f.value,...o,id:s.targetUid.value,disabled:s.editable.value!==!0})),M=X(()=>"q-file q-field--auto-height"+(b.value===!0?" q-file--dnd":"")),A=X(()=>u.multiple===!0&&u.append===!0);function V(me){const Re=$.value.slice();Re.splice(me,1),P(Re)}function D(me){const Re=$.value.indexOf(me);Re!==-1&&V(Re)}function P(me){d("update:modelValue",u.multiple===!0?me:me[0])}function h(me){me.keyCode===13&&Un(me)}function U(me){(me.keyCode===13||me.keyCode===32)&&m(me)}function N(){return g.value}function S(me,Re){const Be=_(me,Re,$.value,A.value),de=N();de!=null&&(de.value=""),Be!==void 0&&((u.multiple===!0?u.modelValue&&Be.every(F=>$.value.includes(F)):u.modelValue===Be[0])||P(A.value===!0?$.value.concat(Be):Be))}function j(){return[Ve("input",{class:[u.inputClass,"q-file__filler"],style:u.inputStyle})]}function te(){if(n.file!==void 0)return $.value.length===0?j():$.value.map((Re,Be)=>n.file({index:Be,file:Re,ref:this}));if(n.selected!==void 0)return $.value.length===0?j():n.selected({files:$.value,ref:this});if(u.useChips===!0)return $.value.length===0?j():$.value.map((Re,Be)=>Ve(Ql,{key:"file-"+Be,removable:s.editable.value,dense:!0,textColor:u.color,tabindex:u.tabindex,onRemove:()=>{V(Be)}},()=>Ve("span",{class:"ellipsis",textContent:Re.name})));const me=u.displayValue!==void 0?u.displayValue:Y.value;return me.length!==0?[Ve("div",{class:u.inputClass,style:u.inputStyle,textContent:me})]:j()}function ie(){const me={ref:g,...R.value,...C.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:S};return u.multiple===!0&&(me.multiple=!0),Ve("input",me)}return Object.assign(s,{fieldClass:M,emitValue:P,hasValue:B,inputRef:g,innerValue:$,floatingLabel:X(()=>B.value===!0||La(u.displayValue)),computedCounter:X(()=>{if(u.counterLabel!==void 0)return u.counterLabel(z.value);const me=u.maxFiles;return`${$.value.length}${me!==void 0?" / "+me:""} (${E.value})`}),getControlChild:()=>x("file"),getControl:()=>{const me={ref:s.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:u.tabindex};return s.editable.value===!0&&Object.assign(me,{onDragover:p,onDragleave:y,onKeydown:h,onKeyup:U}),Ve("div",me,[ie()].concat(te()))}}),Object.assign(i,{removeAtIndex:V,removeFile:D,getNativeElement:()=>g.value}),Dn(i,"nativeEl",()=>g.value),In(s)}}),Yt=St({name:"QBanner",props:{...Pa,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(u,{slots:n}){const{proxy:{$q:d}}=Rt(),o=Ra(u,d),i=X(()=>"q-banner row items-center"+(u.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(u.rounded===!0?" rounded-borders":"")),s=X(()=>`q-banner__actions row items-center justify-end col-${u.inlineActions===!0?"auto":"all"}`);return()=>{const g=[Ve("div",{class:"q-banner__avatar col-auto row items-center self-start"},At(n.avatar)),Ve("div",{class:"q-banner__content col text-body2"},At(n.default))],b=At(n.action);return b!==void 0&&g.push(Ve("div",{class:s.value},b)),Ve("div",{class:i.value+(u.inlineActions===!1&&b!==void 0?" q-banner--top-padding":""),role:"alert"},g)}}}),Qd={class:"q-gutter-sm"},Jd={class:"col col-md-6 q-pa-xs"},nl="Import Pelanggan",Gd={__name:"Import",setup(u){const n=We({csv_file:null}),d=()=>{n.post(route("admin.customer.import"),{onSuccess:()=>{n.reset()},onError:()=>{Ye()},onFinish:()=>{n.clearErrors()}})};return(o,i)=>{const s=Z("i-head"),g=Z("authenticated-layout");return c(),w(Q,null,[e(s,{title:nl}),e(g,{"show-drawer-button":!0},{title:l(()=>[v(r(nl))]),"left-button":l(()=>[t("div",Qd,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Jd,[e(Qe,{class:"row",onSubmit:J(d,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(uo,{modelValue:a(n).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>a(n).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!a(n).errors.csv_file,"error-message":a(n).errors.csv_file,disable:a(n).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(n).processing||!a(n).csv_file,loading:a(n).processing},null,8,["disable","loading"]),e(I,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:i[2]||(i[2]=b=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(c(),O(Yt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(c(),O(Yt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Xd=Object.freeze(Object.defineProperty({__proto__:null,default:Gd},Symbol.toStringTag,{value:"Module"})),Zd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},eu={class:"q-pa-xs"},tu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},au={key:0},lu={key:2},ou={key:3},nu={class:"flex justify-end"},sl="Pelanggan",su={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=De({search:"",status:"active",...Ne()}),m=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"code",label:n.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];$e(()=>{x()});const _=z=>st({message:`Hapus Pelanggan ${z.name}?`,url:route("admin.customer.delete",z.id),fetchItemsCallback:x,loading:i}),x=(z=null)=>{Me({pagination:m,filter:f,props:z,rows:o,url:route("admin.customer.data"),loading:i,tableRef:s})},C=()=>x(),$=z=>ee.get(route("admin.customer.detail",{id:z.id})),{protectClick:B}=Ot(),Y=B($),E=X(()=>n.screen.gt.sm?p:p.filter(z=>z.name==="code"||z.name==="action"));return(z,R)=>{const M=Z("i-head"),A=Z("authenticated-layout");return c(),w(Q,null,[e(M,{title:sl}),e(A,null,Je({title:l(()=>[v(r(sl))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=V=>d.value=!d.value)},null,8,["icon"]),z.$can("admin.customer.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=V=>a(ee).get(z.route("admin.customer.add")))})):k("",!0),z.$can("admin.customer.import")?(c(),O(I,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[3]||(R[3]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[z.$can("admin.customer.import")?le((c(),O(oe,{key:0,clickable:"",onClick:R[2]||(R[2]=J(V=>a(ee).get(z.route("admin.customer.import")),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"csv"})]),_:1}),e(L,null,{default:l(()=>[...R[8]||(R[8]=[v("Import",-1)])]),_:1})]),_:1})),[[ue],[pe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",eu,[e(Ie,{class:"full-height-table",style:Ke({height:a(b)}),ref_key:"tableRef",ref:s,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":R[7]||(R[7]=V=>m.value=V),filter:f.search,loading:i.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:D,filter:P})=>[t("div",tu,[t("span",null,r(D)+" "+r(P?" with term "+P:""),1)])]),body:l(V=>[e(Pe,{props:V,class:qe([V.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(D=>a(Y)(V.row,D),["stop"])},{default:l(()=>[e(W,{key:"code",props:V,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(c(),O(T,{key:0,name:"person"})):k("",!0),v(" "+r(V.row.code),1)]),a(n).screen.lt.md?(c(),w(Q,{key:0},[t("div",null,[a(n).screen.lt.md?(c(),O(T,{key:0,name:"person"})):k("",!0),v(" "+r(V.row.name),1)]),V.row.phone?(c(),w("div",au,[e(T,{name:"phone"}),v(" "+r(V.row.phone),1)])):k("",!0),V.row.address?(c(),O(he,{key:1,text:V.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),V.row.wallet_balance!=0?(c(),w("div",lu,[e(T,{name:"wallet"}),v(" Wallet: Rp. "+r(a(K)(V.row.wallet_balance)),1)])):k("",!0),V.row.balance!=0?(c(),w("div",ou,[e(T,{name:"wallet"}),v(" Utang: Rp. "+r(a(K)(V.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"name",props:V},{default:l(()=>[v(r(V.row.name),1)]),_:2},1032,["props"]),e(W,{key:"wallet_balance",props:V},{default:l(()=>[v(r(a(K)(V.row.wallet_balance)),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:V},{default:l(()=>[v(r(a(K)(V.row.balance)),1)]),_:2},1032,["props"]),e(W,{key:"phone",props:V},{default:l(()=>[v(r(V.row.phone),1)]),_:2},1032,["props"]),e(W,{key:"address",props:V},{default:l(()=>[e(he,{text:V.row.address},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:V},{default:l(()=>[t("div",nu,[z.$can("admin.customer.add")||z.$can("admin.customer.edit")||z.$can("admin.customer.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[6]||(R[6]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[z.$can("admin.customer.add")?le((c(),O(oe,{key:0,clickable:"",onClick:J(D=>a(ee).get(z.route("admin.customer.duplicate",V.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(L,null,{default:l(()=>[...R[9]||(R[9]=[v(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),z.$can("admin.customer.edit")?le((c(),O(oe,{key:1,clickable:"",onClick:J(D=>a(ee).get(z.route("admin.customer.edit",V.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...R[10]||(R[10]=[v("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),z.$can("admin.customer.delete")?le((c(),O(oe,{key:2,onClick:J(D=>_(V.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...R[11]||(R[11]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Zd,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:f.status,"onUpdate:modelValue":[R[4]||(R[4]=V=>f.status=V),C],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":R[5]||(R[5]=V=>f.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ru=Object.freeze(Object.defineProperty({__proto__:null,default:su},Symbol.toStringTag,{value:"Module"})),iu={class:"q-pb-sm"},du={class:"row q-col-gutter-sm"},uu={class:"row items-center no-wrap"},mu={class:"q-ml-md"},cu={class:"text-subtitle2 text-grey-8"},pu={class:"text-h6 text-weight-bold"},mo={__name:"ActualSummaryCard",props:{dashboardData:{type:Object,required:!0}},setup(u){const n=u,d=X(()=>[{label:"Total Pelanggan Aktif",value:n.dashboardData.summary.total_active_customer,icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Saldo Wallet",value:K(n.dashboardData.summary.total_wallet_balance),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Penjualan",value:K(n.dashboardData.summary.total_sales),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Transaksi",value:K(n.dashboardData.summary.total_transactions),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(o,i)=>(c(),w("div",iu,[i[0]||(i[0]=t("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"},"Ringkasan Statistik",-1)),t("div",du,[(c(!0),w(Q,null,je(d.value,(s,g)=>(c(),w("div",{key:g,class:"col-12 col-md-6"},[e(ge,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:l(()=>[t("div",uu,[e(ea,{icon:s.icon,color:s.color,"text-color":s.bgColor},null,8,["icon","color","text-color"]),t("div",mu,[t("div",cu,r(s.label),1),t("div",pu,r(s.value),1)])])]),_:2},1024)]))),128))])]))}},fu=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"})),gu={class:"row q-col-gutter-sm q-pb-sm"},bu={class:"col-md-6 col-12"},vu={class:"col-md-6 col-12"},yu={__name:"ChartCard",props:{dashboardData:{type:Object,required:!0}},setup(u){En([An,jn,Nn,Mn,Bn,zn,Fn]);const n=u,d=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=X(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(s){let g=s[0].name+"<br/>";return s.forEach(function(b){g+=b.marker+" "+b.seriesName+": "+K(b.value)+"<br/>"}),g}},xAxis:{type:"category",data:n.dashboardData.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:s=>K(s),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:n.dashboardData.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:d[0]}}]})),i=X(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(s){return s.name+"<br/>"+s.seriesName+": "+K(s.value)+" ("+s.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:n.dashboardData.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:s=>d[s.dataIndex%d.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(s,g)=>(c(),w("div",gu,[t("div",bu,[e(ge,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[g[0]||(g[0]=t("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),e(a(Ka),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",vu,[e(ge,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[g[1]||(g[1]=t("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),e(a(Ka),{class:"chart",option:i.value,autoresize:""},null,8,["option"])]),_:1})])]))}},co=_t(yu,[["__scopeId","data-v-b9cdf915"]]),_u=Object.freeze(Object.defineProperty({__proto__:null,default:co},Symbol.toStringTag,{value:"Module"})),ku={class:"row q-col-gutter-sm q-pb-sm"},wu={class:"col-md-6 col-12"},hu={class:"col-md-6 col-12"},po={__name:"TopCard",props:{dashboardData:{type:Object,required:!0}},setup(u){return(n,d)=>(c(),w("div",ku,[t("div",wu,[e(ge,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[d[0]||(d[0]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),e(Fe,{separator:""},{default:l(()=>[(c(!0),w(Q,null,je(u.dashboardData.top_customers_sales,(o,i)=>(c(),O(oe,{key:i},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(ea,{color:"primary","text-color":"white",size:"sm"},{default:l(()=>[v(r(i+1),1)]),_:2},1024)]),_:2},1024),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[v(r(o.name),1)]),_:2},1024)]),_:2},1024),e(L,{side:""},{default:l(()=>[e(we,{class:"text-primary"},{default:l(()=>[v(r(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",hu,[e(ge,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[d[1]||(d[1]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),e(Fe,{separator:""},{default:l(()=>[(c(!0),w(Q,null,je(u.dashboardData.top_customers_topup,(o,i)=>(c(),O(oe,{key:i},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(ea,{color:"green-7","text-color":"white",size:"sm"},{default:l(()=>[v(r(i+1),1)]),_:2},1024)]),_:2},1024),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[v(r(o.name),1)]),_:2},1024)]),_:2},1024),e(L,{side:""},{default:l(()=>[e(we,{class:"text-green-7"},{default:l(()=>[v(r(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]))}},$u=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"})),xu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Su={class:"q-pa-xs"},Vu={class:"q-pa-none"},rl="Dashboard",qu={__name:"Index",setup(u){const n=ve(),d=q({summary:{total_active_customer:n.props.data.active_customer_count,total_sales:155e5,total_transactions:1250,total_wallet_balance:n.props.data.total_customer_wallet_balance,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),o=q(!1),i=q(Ne().month??"this_month"),s=q([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),g=()=>{ee.visit(route("admin.dashboard",{month:i.value}))};return(b,f)=>{const m=Z("i-head"),p=Z("authenticated-layout");return c(),w(Q,null,[e(m,{title:rl}),e(p,null,Je({title:l(()=>[v(r(rl))]),"right-button":l(()=>[e(I,{class:"q-ml-sm",icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:f[0]||(f[0]=y=>o.value=!o.value)},null,8,["icon"])]),default:l(()=>[t("div",Su,[t("div",Vu,[e(mo,{dashboardData:d.value},null,8,["dashboardData"])]),e(co,{dashboardData:d.value},null,8,["dashboardData"]),e(po,{dashboardData:d.value},null,8,["dashboardData"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar"},{default:l(()=>[t("div",xu,[e(ce,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:i.value,"onUpdate:modelValue":[f[1]||(f[1]=y=>i.value=y),g],options:s.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},Cu=Object.freeze(Object.defineProperty({__proto__:null,default:qu},Symbol.toStringTag,{value:"Module"})),Tu={class:"row"},Pu={class:"row q-col-gutter-sm"},Ru={class:"col-sm-6 col-xs-12"},Ou={class:"col-sm-6 col-xs-12"},Du={class:"col-md-3 col-sm-6 col-xs-12"},Iu={class:"col-md-3 col-sm-6 col-xs-12"},Uu={class:"col-md-3 col-sm-6 col-xs-12"},Eu={class:"col-md-3 col-sm-6 col-xs-12"};const Au={__name:"SummaryCard",setup(u){const n=ve(),d=(o,i)=>{const g={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...i};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(g)),ee.visit(o,{data:g})};return(o,i)=>(c(),w("div",Tu,[e(ge,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:l(()=>[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",Pu,[t("div",Ru,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[0]||(i[0]=s=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(L,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(L,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[v(r(a(n).props.data.active_customer_count),1)]),_:1}),e(we,null,{default:l(()=>[...i[5]||(i[5]=[v("Pelanggan Aktif",-1)])]),_:1})]),_:1})]),_:1})]),t("div",Ou,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[1]||(i[1]=s=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(L,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(L,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[v(r(o.$page.props.data.active_user_count),1)]),_:1}),e(we,null,{default:l(()=>[...i[6]||(i[6]=[v("Pengguna Aktif",-1)])]),_:1})]),_:1})]),_:1})]),t("div",Du,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(L,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(L,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(K)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(we,null,{default:l(()=>[...i[7]||(i[7]=[v("Total Saldo Koperasi",-1)])]),_:1})]),_:1})]),_:1})]),t("div",Iu,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(L,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(L,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(K)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(we,null,{default:l(()=>[...i[8]||(i[8]=[v("Total Saldo Pelanggan",-1)])]),_:1})]),_:1})]),_:1})]),t("div",Uu,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(L,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(L,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(K)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(we,null,{default:l(()=>[...i[9]||(i[9]=[v("Total Utang Pelanggan",-1)])]),_:1})]),_:1})]),_:1})]),t("div",Eu,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(L,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(L,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(K)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(we,null,{default:l(()=>[...i[10]||(i[10]=[v("Total Piutang Pelanggan",-1)])]),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},ju=Object.freeze(Object.defineProperty({__proto__:null,default:Au},Symbol.toStringTag,{value:"Module"})),Nu={class:"detail"},fo={__name:"MainInfoTab",setup(u){const n=ve();return(d,o)=>(c(),w("table",Nu,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.FINANCE_ACCOUNT_TYPES[a(n).props.data.type]),1)]),a(n).props.data.type=="bank"?(c(),w(Q,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(n).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},Mu=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"})),Bu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zu={class:"flex q-gutter-sm"},Fu={key:0},go={__name:"HistoryTab",setup(u){const n=ve(),d=Se(),o=q(null),i=q([]),s=q(!0),g=De({...Ne()}),b=at(null,117),f=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),m=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],p=X(()=>d.screen.gt.sm?m:m.filter(_=>_.name==="id"));$e(()=>{y()});const y=(_=null)=>Me({pagination:f,filter:g,props:_,rows:i,url:route("admin.finance-transaction.data",{filter:{account_id:n.props.data.id}}),loading:s,tableRef:o});return(_,x)=>(c(),O(Ie,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:Ke({height:a(b)}),color:"primary",class:"full-height-table","row-key":"id",pagination:f.value,"onUpdate:pagination":x[0]||(x[0]=C=>f.value=C),filter:g.search,loading:s.value,columns:p.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({message:C,filter:$})=>[t("div",Bu,[t("span",null,r(C)+" "+r($?" with term "+$:""),1)])]),body:l(C=>[e(Pe,{props:C},{default:l(()=>[e(W,{key:"code",props:C},{default:l(()=>[t("div",zu,[t("div",null,[a(d).screen.lt.md?(c(),O(T,{key:0,name:"tag",class:"inline-icon"})):k("",!0),v(" "+r(C.row.code),1)])]),a(d).screen.lt.md?(c(),w(Q,{key:0},[t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(be)(C.row.datetime)),1)]),C.row.creator?(c(),w("div",Fu,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(C.row.creator.username),1)])):k("",!0),t("div",{class:qe([C.row.amount>0?"text-green":"text-red","text-bold"])},[e(T,{class:"inline-icon",name:"money"}),v(" "+r(a(ta)(C.row.amount))+"Rp. "+r(a(K)(Math.abs(C.row.amount))),1)],2),t("div",null,[e(vt,{color:C.row.amount>0?"green":"red"},{default:l(()=>[v(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[C.row.type]),1)]),_:2},1032,["color"])]),e(he,{text:C.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"datetime",props:C},{default:l(()=>[v(r(a(be)(C.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"type",props:C},{default:l(()=>[e(vt,{color:C.row.amount>0?"green":"red"},{default:l(()=>[v(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[C.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(W,{key:"amount",props:C,class:qe(C.row.amount>0?"text-green":"text-red")},{default:l(()=>[v(r(a(ta)(C.row.amount)+a(K)(Math.abs(C.row.amount))),1)]),_:2},1032,["props","class"]),e(W,{key:"notes",props:C},{default:l(()=>[e(he,{text:C.row.notes,icon:_.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},Lu=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"})),Ku={class:"q-gutter-sm"},Hu={class:"q-gutter-sm"},Yu={class:"col q-pa-xs"},Wu={class:"row"},il="Rincian Akun",Qu={__name:"Detail",setup(u){const n=ve(),d=q("main");return(o,i)=>{const s=Z("i-head"),g=Z("authenticated-layout");return c(),w(Q,null,[e(s,{title:il}),e(g,null,{title:l(()=>[v(r(il))]),"left-button":l(()=>[t("div",Ku,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":l(()=>[t("div",Hu,[o.$can("admin.finance-account.edit")?(c(),O(I,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>a(ee).get(o.route("admin.finance-account.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Yu,[t("div",Wu,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ct,{modelValue:d.value,"onUpdate:modelValue":i[2]||(i[2]=b=>d.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Info Akun"}),e(ot,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:d.value,"onUpdate:modelValue":i[3]||(i[3]=b=>d.value=b),animated:""},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(fo)]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(go)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Ju=Object.freeze(Object.defineProperty({__proto__:null,default:Qu},Symbol.toStringTag,{value:"Module"})),Gu={style:{"margin-left":"-10px"}},xt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u){return(n,d)=>(c(),w("div",Gu,[e(oa,{class:"full-width q-pl-none","model-value":u.modelValue,"onUpdate:modelValue":d[0]||(d[0]=o=>n.$emit("update:modelValue",o)),disable:u.disable,label:u.label},null,8,["model-value","disable","label"])]))}},Xu={class:"q-gutter-sm"},Zu={class:"col col-md-6 q-pa-xs"},em={__name:"Editor",setup(u){const n=ve(),d=(n.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=We({id:n.props.data.id,name:n.props.data.name,type:n.props.data.type,bank:n.props.data.bank,number:n.props.data.number,holder:n.props.data.holder,balance:parseFloat(n.props.data.balance),active:!!n.props.data.active,has_wallet_access:!!n.props.data.has_wallet_access,show_in_pos_payment:!!n.props.data.show_in_pos_payment,show_in_purchasing_payment:!!n.props.data.show_in_purchasing_payment,notes:n.props.data.notes}),i=Ze(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),s=()=>rt({form:o,url:route("admin.finance-account.save")}),g=b=>{b==="cashier_cash"&&(o.show_in_pos_payment=!0)};return $e(()=>{g(o.type)}),He(()=>o.type,b=>{g(b)}),(b,f)=>{const m=Z("i-head"),p=Z("authenticated-layout");return c(),w(Q,null,[e(m,{title:d}),e(p,null,{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",Xu,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=y=>b.$inertia.get(b.route("admin.finance-account.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Zu,[e(Qe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=y=>a(o).id=y)},null,512),[[kt,a(o).id]]),e(se,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":f[2]||(f[2]=y=>a(o).name=y),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":f[3]||(f[3]=y=>a(o).type=y),label:"Jenis Akun",options:a(i),"map-options":"","emit-value":"",error:!!a(o).errors.type,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),a(o).type=="bank"?(c(),w(Q,{key:0},[e(se,{modelValue:a(o).bank,"onUpdate:modelValue":f[4]||(f[4]=y=>a(o).bank=y),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!a(o).errors.bank,disable:a(o).processing,"error-message":a(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:a(o).number,"onUpdate:modelValue":f[5]||(f[5]=y=>a(o).number=y),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!a(o).errors.number,disable:a(o).processing,"error-message":a(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:a(o).holder,"onUpdate:modelValue":f[6]||(f[6]=y=>a(o).holder=y),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!a(o).errors.holder,disable:a(o).processing,"error-message":a(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Ee,{modelValue:a(o).balance,"onUpdate:modelValue":f[7]||(f[7]=y=>a(o).balance=y),label:"Saldo",lazyRules:"",disable:a(o).processing,"allow-negative":!0,error:!!a(o).errors.balance,errorMessage:a(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(se,{modelValue:a(o).notes,"onUpdate:modelValue":f[8]||(f[8]=y=>a(o).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(xt,{modelValue:a(o).active,"onUpdate:modelValue":f[9]||(f[9]=y=>a(o).active=y),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),f[14]||(f[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(xt,{modelValue:a(o).show_in_pos_payment,"onUpdate:modelValue":f[10]||(f[10]=y=>a(o).show_in_pos_payment=y),disable:a(o).processing||a(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(xt,{modelValue:a(o).show_in_purchasing_payment,"onUpdate:modelValue":f[11]||(f[11]=y=>a(o).show_in_purchasing_payment=y),disable:a(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(xt,{modelValue:a(o).has_wallet_access,"onUpdate:modelValue":f[12]||(f[12]=y=>a(o).has_wallet_access=y),disable:a(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(I,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:f[13]||(f[13]=y=>a(ee).get(b.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},tm=Object.freeze(Object.defineProperty({__proto__:null,default:em},Symbol.toStringTag,{value:"Module"})),am={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},lm={class:"q-pa-xs"},om={class:"q-my-sm text-subtitle"},nm={class:"text-bold text-grey-8"},sm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},rm={class:"text-bold text-grey-9"},im={class:"text-grey-9"},dm={key:0},um={key:1},mm={key:0},cm={class:"flex justify-end"},dl="Akun Kas",pm={__name:"Index",setup(u){const n=ve(),d=Se(),o=q(!1),i=q([]),s=q(null),g=q(null),b=at(g,117),f=q(!0),m=De({search:"",status:"active",type:"all",...Ne()}),p=n.props.totalBalance,y=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],x=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],C=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];$e(()=>{B()});const $=A=>st({message:`Hapus Akun ${A.name}?`,url:route("admin.finance-account.delete",A.id),fetchItemsCallback:B,loading:f}),B=(A=null)=>{Me({pagination:y,filter:m,props:A,rows:i,url:route("admin.finance-account.data"),loading:f,tableRef:s})},Y=()=>B(),E=A=>ee.get(route("admin.finance-account.detail",{id:A.id})),{protectClick:z}=Ot(),R=z(E),M=X(()=>d.screen.gt.sm?_:_.filter(A=>A.name==="name"||A.name==="action"));return(A,V)=>{const D=Z("i-head"),P=Z("authenticated-layout");return c(),w(Q,null,[e(D,{title:dl}),e(P,null,Je({title:l(()=>[v(r(dl))]),"right-button":l(()=>[e(I,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:V[0]||(V[0]=h=>o.value=!o.value)},null,8,["icon"]),A.$can("admin.finance-account.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:V[1]||(V[1]=h=>a(ee).get(A.route("admin.finance-account.add")))})):k("",!0)]),default:l(()=>[t("div",lm,[e(ge,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:l(()=>[t("div",om,[V[7]||(V[7]=v(" Total Saldo Akun Aktif: ",-1)),t("span",nm,"Rp. "+r(a(K)(a(p))),1)])]),_:1}),e(Ie,{ref_key:"tableRef",ref:s,class:"full-height-table",style:Ke({height:a(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":V[6]||(V[6]=h=>y.value=h),filter:m.search,loading:f.value,columns:M.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:B,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:h,message:U,filter:N})=>[t("div",sm,[t("span",null,r(U)+" "+r(N?" with term "+N:""),1)])]),body:l(h=>[e(Pe,{props:h,class:qe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(U=>a(R)(h.row,U),["stop"])},{default:l(()=>[e(W,{key:"name",props:h,class:"wrap-column"},{default:l(()=>[t("div",rm,r(h.row.name),1),t("div",im,[h.row.type=="bank"?(c(),w("div",dm,[e(T,{name:"wallet",class:"inline-icon"}),v(" Rekening "+r(h.row.bank??"-")+" "+r(h.row.number??"-")+" a.n. "+r(h.row.holder??"-"),1)])):k("",!0),h.row.notes?(c(),w("div",um,[e(T,{name:"notes"}),v(" "+r(h.row.notes),1)])):k("",!0)]),a(d).screen.lt.md?(c(),w("div",mm,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(h.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"type",props:h},{default:l(()=>[v(r(A.$CONSTANTS.FINANCE_ACCOUNT_TYPES[h.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:h},{default:l(()=>[v(r(a(K)(h.row.balance)),1)]),_:2},1032,["props"]),e(W,{key:"action",props:h},{default:l(()=>[t("div",cm,[A.$can("admin.finance-account.add")||A.$can("admin.finance-account.edit")||A.$can("admin.finance-account.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:V[5]||(V[5]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[A.$can("admin.finance-account.add")?le((c(),O(oe,{key:0,clickable:"",onClick:J(U=>a(ee).get(A.route("admin.finance-account.duplicate",h.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(L,null,{default:l(()=>[...V[8]||(V[8]=[v(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),A.$can("admin.finance-account.edit")?le((c(),O(oe,{key:1,clickable:"",onClick:J(U=>a(ee).get(A.route("admin.finance-account.edit",h.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...V[9]||(V[9]=[v("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),A.$can("admin.finance-account.delete")?le((c(),O(oe,{key:2,onClick:J(U=>$(h.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...V[10]||(V[10]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",am,[e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.type,"onUpdate:modelValue":[V[2]||(V[2]=h=>m.type=h),Y],options:C,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[V[3]||(V[3]=h=>m.status=h),Y],options:x,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":V[4]||(V[4]=h=>m.search=h),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fm=Object.freeze(Object.defineProperty({__proto__:null,default:pm},Symbol.toStringTag,{value:"Module"})),gm={class:"q-gutter-sm"},bm={class:"col col-md-6 q-pa-xs"},vm={class:"row"},ym={class:"detail"},_m={key:0},km={key:1},wm={key:2},hm={key:3},$m={colspan:"3",class:"bg-white"},ul="Rincian Transaksi",xm={__name:"Detail",setup(u){const n=ve();return(d,o)=>{const i=Z("i-head"),s=Z("i-link"),g=Z("authenticated-layout");return c(),w(Q,null,[e(i,{title:ul}),e(g,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",gm,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>d.$inertia.get(d.route("admin.finance-transaction.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(ul))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",bm,[t("div",vm,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",ym,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.datetime)),1)]),a(n).props.data.account?(c(),w("tr",_m,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[e(s,{href:d.route("admin.finance-account.detail",a(n).props.data.account.id)},{default:l(()=>[v(r(a(n).props.data.account.name),1)]),_:1},8,["href"]),a(n).props.data.account.type==="bank"?(c(),w(Q,{key:0},[v(" Rek "+r(a(n).props.data.account.bank)+" an "+r(a(n).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),v(" "+r(a(n).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),a(n).props.data.type?(c(),w("tr",km,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.FINANCE_TRANSACTION_TYPES[a(n).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(aa)(a(n).props.data.amount)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(c(),w("tr",wm,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(c(),w("tr",hm,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(c(),w(Q,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",$m,[e(na,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Ke([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Sm=Object.freeze(Object.defineProperty({__proto__:null,default:xm},Symbol.toStringTag,{value:"Module"})),Vm={class:"q-gutter-sm"},qm={class:"col col-md-6 q-pa-xs"},Cm={__name:"Editor",setup(u){var b;const n=ve(),d=(n.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=n.props.accounts.map(f=>({label:f.name,value:f.id})),i=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],s=We({id:n.props.data.id,account_id:n.props.data.account_id,to_account_id:n.props.data.to_account_id??null,type:n.props.data.type,datetime:new Date(n.props.data.datetime),notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((b=n.props.data)==null?void 0:b.image_path)??"",image:null}),g=()=>{sa(s,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:s,url:route("admin.finance-transaction.save")})};return(f,m)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),w(Q,null,[e(p,{title:d}),e(y,null,{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",Vm,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>f.$inertia.get(f.route("admin.finance-transaction.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",qm,[e(Qe,{class:"row",onSubmit:J(g,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[1]||(m[1]=_=>a(s).id=_)},null,512),[[kt,a(s).id]]),e(zt,{modelValue:a(s).datetime,"onUpdate:modelValue":m[2]||(m[2]=_=>a(s).datetime=_),label:"Waktu",error:!!a(s).errors.datetime,disable:a(s).processing,errorMessage:a(s).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{autofocus:"",modelValue:a(s).type,"onUpdate:modelValue":m[3]||(m[3]=_=>a(s).type=_),label:"Jenis Transaksi",options:i,"map-options":"","emit-value":"",error:!!a(s).errors.type,disable:a(s).processing,errorMessage:a(s).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{class:"custom-select",modelValue:a(s).account_id,"onUpdate:modelValue":m[4]||(m[4]=_=>a(s).account_id=_),label:a(s).type=="transfer"?"Akun Asal":"Akun",options:a(o),"map-options":"","emit-value":"",errorMessage:a(s).errors.account_id,error:!!a(s).errors.account_id,disable:a(s).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),a(s).type=="transfer"?(c(),O(ce,{key:0,class:"custom-select",modelValue:a(s).to_account_id,"onUpdate:modelValue":m[5]||(m[5]=_=>a(s).to_account_id=_),label:"Akun Tujuan",options:a(o),"map-options":"","emit-value":"",errorMessage:a(s).errors.to_account_id,error:!!a(s).errors.to_account_id,disable:a(s).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Ee,{modelValue:a(s).amount,"onUpdate:modelValue":m[6]||(m[6]=_=>a(s).amount=_),label:"Jumlah",lazyRules:"",disable:a(s).processing,error:!!a(s).errors.amount,errorMessage:a(s).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(se,{modelValue:a(s).notes,"onUpdate:modelValue":m[7]||(m[7]=_=>a(s).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(s).processing,error:!!a(s).errors.notes,"error-message":a(s).errors.notes,rules:[_=>_&&_.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Oa,{modelValue:a(s).image,"onUpdate:modelValue":m[8]||(m[8]=_=>a(s).image=_),"initial-image-path":a(s).image_path,disabled:a(s).processing,error:!!a(s).errors.image||!!a(s).errors.image_path,"error-message":a(s).errors.image||a(s).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(s).processing},null,8,["disable"]),e(I,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:m[9]||(m[9]=_=>a(ee).get(f.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Tm=Object.freeze(Object.defineProperty({__proto__:null,default:Cm},Symbol.toStringTag,{value:"Module"})),Pm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Rm={class:"q-pa-xs"},Om={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Dm={class:"text-grey-8"},Im={class:"text-bold text-grey-8"},Um={class:"flex justify-end no-wrap"},ml="Transaksi Kas",Em={__name:"Index",setup(u){const n=ve(),d=Se(),o=q(!1),i=q([]),s=q(!0),g=q(null),b=q(null),f=at(b),m=Mt(),p=Bt(),y=[{label:"Semua",value:"all"},...n.props.accounts.map(P=>({label:P.name,value:P.id}))],_=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...Vt(m-2,m-1).reverse()],x=[{value:"all",label:"Semua Bulan"},...qt()],C=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],$=De({search:"",type:"all",account_id:"all",year:m,month:p,...Ne()}),B=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"id",label:d.screen.lt.md?"Item":"Kode",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{z()});const E=P=>st({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${P.code}?`,url:route("admin.finance-transaction.delete",P.id),fetchItemsCallback:z,loading:s}),z=(P=null)=>{Me({pagination:B,filter:$,props:P,rows:i,url:route("admin.finance-transaction.data"),loading:s,tableRef:g})},R=()=>{z()},M=X(()=>d.screen.gt.sm?Y:Y.filter(P=>P.name==="id"||P.name==="action"));He(()=>$.year,P=>{P===null&&($.month=null)});const A=q(null),V=q(!1),D=P=>{A.value=P,V.value=!0};return(P,h)=>{const U=Z("i-head"),N=Z("authenticated-layout");return c(),w(Q,null,[e(U,{title:ml}),e(N,null,Je({title:l(()=>[v(r(ml))]),"right-button":l(()=>[e(I,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=S=>o.value=!o.value)},null,8,["icon"]),P.$can("admin.finance-transaction.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=S=>a(ee).get(P.route("admin.finance-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",Rm,[e(Ie,{ref_key:"tableRef",ref:g,style:Ke({height:a(f)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:B.value,"onUpdate:pagination":h[8]||(h[8]=S=>B.value=S),filter:$.search,loading:s.value,columns:M.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:z,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:j,filter:te})=>[t("div",Om,[t("span",null,r(j)+" "+r(te?" with term "+te:""),1)])]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:J(j=>a(ee).get(P.route("admin.finance-transaction.detail",{id:S.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:S},{default:l(()=>[t("div",null,[a(d).screen.lt.md?(c(),O(T,{key:0,class:"inline-icon",name:"tag"})):k("",!0),v(" "+r(S.row.code),1)]),a(d).screen.lt.md?(c(),w(Q,{key:0},[t("div",Dm,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(be)(S.row.datetime)),1)]),t("div",Im,[e(T,{name:"wallet",class:"inline-icon"}),v(" "+r(S.row.account.name),1)]),t("div",{class:qe(["text-bold",S.row.amount<0?"text-red":"text-green"])},[e(T,{name:"money",class:"inline-icon"}),v(" "+r(a(ta)(S.row.amount)+"Rp."+a(K)(Math.abs(S.row.amount))),1)],2),S.row.notes?(c(),O(he,{key:0,icon:"notes",text:S.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(vt,{color:S.row.amount>0?"green":"red"},{default:l(()=>[v(r(S.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"datetime",props:S,class:"wrap-column"},{default:l(()=>[v(r(a(be)(S.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"account",props:S},{default:l(()=>{var j;return[v(r((j=S.row.account)==null?void 0:j.name),1)]}),_:2},1032,["props"]),e(W,{key:"type",props:S},{default:l(()=>[v(r(P.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"amount",props:S,style:{"text-align":"right"}},{default:l(()=>[v(r(a(jt)(S.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:S,class:"wrap-column"},{default:l(()=>[v(r(S.row.notes),1)]),_:2},1032,["props"]),e(W,{key:"action",props:S},{default:l(()=>[t("div",Um,[e(I,{icon:"image",color:"primary",dense:"",flat:"",disable:S.row.image_path===null||S.row.image_path==="",onClick:J(j=>D(S.row.image_path),["stop"])},{default:l(()=>[S.row.image_path!=null?(c(),O(Xt,{key:0},{default:l(()=>[...h[10]||(h[10]=[v(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.finance-transaction.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[7]||(h[7]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.finance-transaction.delete")?le((c(),O(oe,{key:0,onClick:J(j=>E(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...h[11]||(h[11]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(pa,{modelValue:V.value,"onUpdate:modelValue":h[9]||(h[9]=S=>V.value=S),imageUrl:`/${A.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Pm,[e(ce,{modelValue:$.year,"onUpdate:modelValue":[h[2]||(h[2]=S=>$.year=S),R],options:_,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!="all"?(c(),O(ce,{key:0,modelValue:$.month,"onUpdate:modelValue":[h[3]||(h[3]=S=>$.month=S),R],options:x,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:$.type,"onUpdate:modelValue":[h[4]||(h[4]=S=>$.type=S),R],options:C,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:$.account_id,"onUpdate:modelValue":[h[5]||(h[5]=S=>$.account_id=S),R],label:"Akun",options:y,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":h[6]||(h[6]=S=>$.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Am=Object.freeze(Object.defineProperty({__proto__:null,default:Em},Symbol.toStringTag,{value:"Module"})),jm={class:"q-gutter-sm"},Nm={class:"col col-md-6 q-pa-xs"},Mm={__name:"Editor",setup(u){const n=ve(),d=(n.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=We({id:n.props.data.id??null,name:n.props.data.name,description:n.props.data.description}),i=()=>rt({form:o,url:route("admin.operational-cost-category.save")});return(s,g)=>{const b=Z("i-head"),f=Z("authenticated-layout");return c(),w(Q,null,[e(b,{title:d}),e(f,null,{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",jm,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=m=>s.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Nm,[e(Qe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=m=>a(o).id=m)},null,512),[[kt,a(o).id]]),e(se,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":g[2]||(g[2]=m=>a(o).name=m),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[m=>m&&m.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:a(o).description,"onUpdate:modelValue":g[3]||(g[3]=m=>a(o).description=m),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(I,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:g[4]||(g[4]=m=>a(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Bm=Object.freeze(Object.defineProperty({__proto__:null,default:Mm},Symbol.toStringTag,{value:"Module"})),zm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Fm={class:"q-pa-xs"},Lm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Km={key:0,class:"text-grey-8"},Hm={class:"flex justify-end"},cl="Kategori Biaya Operasional",Ym={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=De({search:"",...Ne()}),m=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];$e(()=>{_()});const y=C=>st({message:`Hapus Kategori Biaya ${C.name}?`,url:route("admin.operational-cost-category.delete",C.id),fetchItemsCallback:_,loading:i}),_=(C=null)=>{Me({pagination:m,filter:f,props:C,rows:o,url:route("admin.operational-cost-category.data"),loading:i,tableRef:s})},x=X(()=>n.screen.gt.sm?p:p.filter(C=>C.name==="name"||C.name==="action"));return(C,$)=>{const B=Z("i-head"),Y=Z("authenticated-layout");return c(),w(Q,null,[e(B,{title:cl}),e(Y,null,Je({title:l(()=>[v(r(cl))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=E=>d.value=!d.value)},null,8,["icon"]),C.$can("admin.operational-cost-category.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=E=>a(ee).get(C.route("admin.operational-cost-category.add")))})):k("",!0)]),default:l(()=>[t("div",Fm,[e(Ie,{ref_key:"tableRef",ref:s,class:"full-height-table",style:Ke({height:a(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":$[4]||($[4]=E=>m.value=E),filter:f.search,loading:i.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:E,message:z,filter:R})=>[t("div",Lm,[t("span",null,r(z)+" "+r(R?" with term "+R:""),1)])]),body:l(E=>[e(Pe,{props:E},{default:l(()=>[e(W,{key:"name",props:E,class:"wrap-column"},{default:l(()=>[v(r(E.row.name)+" ",1),a(n).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[E.row.description?(c(),w("div",Km,[e(T,{name:"description"}),v(" "+r(E.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"description",props:E,class:"wrap-column"},{default:l(()=>[v(r(E.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:E},{default:l(()=>[t("div",Hm,[C.$can("admin.operational-cost-category.add")||C.$can("admin.operational-cost-category.edit")||C.$can("admin.operational-cost-category.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[3]||($[3]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.operational-cost-category.add")?le((c(),O(oe,{key:0,clickable:"",onClick:J(z=>a(ee).get(C.route("admin.operational-cost-category.duplicate",E.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(L,null,{default:l(()=>[...$[5]||($[5]=[v("Duplikat",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),C.$can("admin.operational-cost-category.edit")?le((c(),O(oe,{key:1,clickable:"",onClick:J(z=>a(ee).get(C.route("admin.operational-cost-category.edit",E.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...$[6]||($[6]=[v("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),C.$can("admin.operational-cost-category.delete")?le((c(),O(oe,{key:2,onClick:J(z=>y(E.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...$[7]||($[7]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",zm,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":$[2]||($[2]=E=>f.search=E),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wm=Object.freeze(Object.defineProperty({__proto__:null,default:Ym},Symbol.toStringTag,{value:"Module"})),Qm={class:"q-gutter-sm"},Jm={class:"col col-md-6 q-pa-xs"},Gm={class:"row"},Xm={class:"detail"},Zm={key:0},ec={key:1},tc={key:2},ac={key:3},lc={colspan:"3",class:"bg-white"},pl="Rincian Biaya Operasional",oc={__name:"Detail",setup(u){const n=ve();return(d,o)=>{const i=Z("i-head"),s=Z("i-link"),g=Z("authenticated-layout");return c(),w(Q,null,[e(i,{title:pl}),e(g,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Qm,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>d.$inertia.get(d.route("admin.operational-cost.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(pl))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Jm,[t("div",Gm,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[22]||(o[22]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",Xm,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(la)(a(n).props.data.date)),1)]),a(n).props.data.finance_account?(c(),w("tr",Zm,[o[7]||(o[7]=t("td",null,"Akun",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,[e(s,{href:d.route("admin.finance-account.detail",a(n).props.data.finance_account.id)},{default:l(()=>[v(r(a(n).props.data.finance_account.name),1)]),_:1},8,["href"]),a(n).props.data.finance_account.type==="bank"?(c(),w(Q,{key:0},[o[5]||(o[5]=t("br",null,null,-1)),v(" Rek "+r(a(n).props.data.finance_account.bank)+" an "+r(a(n).props.data.finance_account.holder)+" ",1),o[6]||(o[6]=t("br",null,null,-1)),v(" "+r(a(n).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),a(n).props.data.category?(c(),w("tr",ec,[o[9]||(o[9]=t("td",null,"Kategori",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.category.name),1)])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Deskripsi",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.description),1)]),t("tr",null,[o[13]||(o[13]=t("td",null,"Jumlah",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(n).props.data.amount)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Catatan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)]),a(n).props.data.creator?(c(),w("tr",tc,[o[17]||(o[17]=t("td",null,"Dibuat",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.created_at))+" oleh "+r(a(n).props.data.creator.name),1)])):k("",!0),a(n).props.data.updater?(c(),w("tr",ac,[o[19]||(o[19]=t("td",null,"Diperbarui",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.updated_at))+" oleh "+r(a(n).props.data.updater.name),1)])):k("",!0),a(n).props.data.image_path?(c(),w(Q,{key:4},[o[21]||(o[21]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",lc,[e(na,{src:`/${a(n).props.data.image_path}`,class:"q-mt-none",style:Ke([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},nc=Object.freeze(Object.defineProperty({__proto__:null,default:oc},Symbol.toStringTag,{value:"Module"})),sc={class:"row items-center justify-end"},rc={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(u,{emit:n}){const d=u,o=n,i=q(""),s=q(""),g=m=>{let p=!0;const y=d.minDate?dt.formatDate(d.minDate,"YYYY/MM/DD"):null,_=d.maxDate?dt.formatDate(d.maxDate,"YYYY/MM/DD"):null;return y&&(p=p&&dt.isBetweenDates(m,y,"2999/01/01",{inclusiveFrom:!0})),_&&(p=p&&dt.isBetweenDates(m,"1900/01/01",_,{inclusiveTo:!0})),p},b=X(()=>[m=>!!m||"Tanggal harus diisi",m=>{const p=dt.extractDate(m,d.displayFormat);if(!p)return"Format tanggal tidak valid";p.setHours(0,0,0,0);const y=d.minDate?new Date(d.minDate):null;y&&y.setHours(0,0,0,0);const _=d.maxDate?new Date(d.maxDate):null;return _&&_.setHours(0,0,0,0),y&&p<y?`Tanggal tidak boleh kurang dari ${dt.formatDate(d.minDate,d.displayFormat)}`:_&&p>_?`Tanggal tidak boleh lebih dari ${dt.formatDate(d.maxDate,d.displayFormat)}`:(o("update:modelValue",p),!0)}]);He(()=>d.modelValue,m=>{m instanceof Date?(s.value=dt.formatDate(m,"YYYY/MM/DD"),i.value=dt.formatDate(m,d.displayFormat)):(s.value="",i.value="")},{immediate:!0});const f=m=>{const p=m!==null?new Date(m):null;o("update:modelValue",p),i.value=p?dt.formatDate(p,d.displayFormat):null};return(m,p)=>(c(),O(se,{modelValue:i.value,"onUpdate:modelValue":p[1]||(p[1]=y=>i.value=y),label:d.label,readonly:d.readonly,disable:d.disable,error:d.error,"error-message":d.errorMessage,mask:d.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:b.value},{append:l(()=>[e(I,{icon:"event",disable:d.disable||d.readonly,flat:"",rounded:"",dense:""},{default:l(()=>[e(Ln,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Kn,{modelValue:s.value,"onUpdate:modelValue":[p[0]||(p[0]=y=>s.value=y),f],options:g},{default:l(()=>[t("div",sc,[le(e(I,{label:"Close",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},ra=_t(rc,[["__scopeId","data-v-b418ccfb"]]);function bo(u,n=!1){const d=u.map(g=>({value:g.id,label:g.name})),o=n?[{value:"all",label:"Semua"},...d]:d,i=q([...o]);return{filteredCostCategories:i,filterCostCategory:(g,b)=>{const f=g.toLowerCase();b(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(f))})},costCategoryOptions:o}}const ic={class:"q-gutter-sm"},dc={class:"col col-md-6 q-pa-xs"},uc={__name:"Editor",setup(u){var y;const n=ve(),d=(n.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=bo(n.props.categories),i=n.props.finance_accounts.map(_=>({label:_.name,value:_.id})),s=q(o),g=q([...s.value]),b=We({id:n.props.data.id,finance_account_id:n.props.data.finance_account_id??null,category_id:n.props.data.category_id??null,date:new Date(n.props.data.date),description:n.props.data.description,notes:n.props.data.notes,amount:parseFloat(n.props.data.amount),image_path:((y=n.props.data)==null?void 0:y.image_path)??null,image:null}),f=()=>{sa(b,{date:"YYYY-MM-DD"}),rt({form:b,url:route("admin.operational-cost.save")})},m=(_,x)=>{x(()=>{g.value=s.value.filter(C=>C.label.toLowerCase().includes(_.toLowerCase()))})},p=()=>{b.image_path=null};return(_,x)=>{const C=Z("i-head"),$=Z("authenticated-layout");return c(),w(Q,null,[e(C,{title:d}),e($,null,{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",ic,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:x[0]||(x[0]=B=>_.$inertia.get(_.route("admin.operational-cost.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",dc,[e(Qe,{class:"row",onSubmit:J(f,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":x[1]||(x[1]=B=>a(b).id=B)},null,512),[[kt,a(b).id]]),e(ce,{autofocus:"",modelValue:a(b).category_id,"onUpdate:modelValue":x[2]||(x[2]=B=>a(b).category_id=B),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:g.value,"map-options":"","emit-value":"",onFilter:m,error:!!a(b).errors.category_id,disable:a(b).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(L,null,{default:l(()=>[...x[10]||(x[10]=[v("Kategori tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(ra,{modelValue:a(b).date,"onUpdate:modelValue":x[3]||(x[3]=B=>a(b).date=B),label:"Tanggal",error:!!a(b).errors.date,disable:a(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(se,{modelValue:a(b).description,"onUpdate:modelValue":x[4]||(x[4]=B=>a(b).description=B),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!a(b).errors.description,disable:a(b).processing,"error-message":a(b).errors.description,rules:[B=>B&&B.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Ee,{modelValue:a(b).amount,"onUpdate:modelValue":x[5]||(x[5]=B=>a(b).amount=B),label:"Jumlah",lazyRules:"",disable:a(b).processing,error:!!a(b).errors.amount,errorMessage:a(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ce,{class:"custom-select",modelValue:a(b).finance_account_id,"onUpdate:modelValue":x[6]||(x[6]=B=>a(b).finance_account_id=B),label:"Sumber Dana",options:a(i),"map-options":"","emit-value":"",clearable:"",errorMessage:a(b).errors.finance_account_id,error:!!a(b).errors.finance_account_id,disable:a(b).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(se,{modelValue:a(b).notes,"onUpdate:modelValue":x[7]||(x[7]=B=>a(b).notes=B),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(b).processing,error:!!a(b).errors.notes,"error-message":a(b).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Oa,{modelValue:a(b).image,"onUpdate:modelValue":x[8]||(x[8]=B=>a(b).image=B),"initial-image-path":a(b).image_path,disabled:a(b).processing,error:!!a(b).errors.image||!!a(b).errors.image_path,"error-message":a(b).errors.image||a(b).errors.image_path,onImageCleared:p},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(b).processing},null,8,["disable"]),e(I,{icon:"cancel",label:"Batal",disable:a(b).processing,onClick:x[9]||(x[9]=B=>a(ee).get(_.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},mc=Object.freeze(Object.defineProperty({__proto__:null,default:uc},Symbol.toStringTag,{value:"Module"})),cc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},pc={class:"q-pa-xs"},fc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},gc={key:0},bc={key:1},vc={key:0},yc={class:"flex justify-end no-wrap"},fl="Biaya Operasional",_c={__name:"Index",setup(u){const n=ve(),d=Se(),o=q(!1),i=q(null),s=q(null),g=at(s),b=q(null),f=q(!1),m=q([]),p=q(!0),y=new Date().getFullYear(),_=new Date().getMonth()+1,x=[{label:"Semua Tahun",value:null},{label:`${y}`,value:y},...Vt(y-2,y-1).reverse()],C=[{value:null,label:"Semua Bulan"},...qt()],{costCategoryOptions:$}=bo(n.props.categories),B=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...$],{accountOptions:Y}=Hn(n.props.finance_accounts),E=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...Y],z=De({search:"",finance_account_id:"all",category_id:"all",year:y,month:_,...Ne()}),R=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),M=[{name:"code",label:d.screen.lt.md?"Item":"Kode",field:"code",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{V()});const A=U=>st({message:`Hapus Biaya ${U.code}?`,url:route("admin.operational-cost.delete",U.id),fetchItemsCallback:V,loading:p}),V=(U=null)=>{Me({pagination:R,filter:z,props:U,rows:m,url:route("admin.operational-cost.data"),loading:p,tableRef:i})},D=()=>{V()},P=X(()=>d.screen.gt.sm?M:M.filter(U=>U.name==="id"||U.name==="action"));He(()=>z.year,U=>{U===null&&(z.month=null)});const h=U=>{b.value=U,f.value=!0};return(U,N)=>{const S=Z("i-head"),j=Z("authenticated-layout");return c(),w(Q,null,[e(S,{title:fl}),e(j,null,Je({title:l(()=>[v(r(fl))]),"right-button":l(()=>[e(I,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:N[0]||(N[0]=te=>o.value=!o.value)},null,8,["icon"]),U.$can("admin.operational-cost.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:N[1]||(N[1]=te=>a(ee).get(U.route("admin.operational-cost.add")))})):k("",!0)]),default:l(()=>[t("div",pc,[e(Ie,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:R.value,"onUpdate:pagination":N[8]||(N[8]=te=>R.value=te),filter:z.search,loading:p.value,columns:P.value,rows:m.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(g)}),onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:te,message:ie,filter:me})=>[t("div",fc,[t("span",null,r(ie)+" "+r(me?" with term "+me:""),1)])]),body:l(te=>[e(Pe,{props:te,class:"cursor-pointer",onClick:J(ie=>a(ee).get(U.route("admin.operational-cost.detail",{id:te.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:te,class:"wrap-column"},{default:l(()=>[a(d).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[v(" Kode: ")],64)),v(" "+r(te.row.code)+" ",1),a(d).screen.gt.sm?k("",!0):(c(),w(Q,{key:1},[t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(la)(te.row.date)),1)]),te.row.finance_account?(c(),w("div",gc,[e(T,{name:"wallet",class:"inline-icon"}),v(" "+r(te.row.finance_account.name),1)])):k("",!0),te.row.category?(c(),w("div",bc,[e(T,{name:"category",class:"inline-icon"}),v(" "+r(te.row.category.name),1)])):k("",!0),e(he,{icon:"description",text:te.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(te.row.amount)),1)]),e(he,{icon:"notes",text:te.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(W,{key:"date",props:te,class:"wrap-column"},{default:l(()=>[v(r(a(la)(te.row.date)),1)]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:te,class:"wrap-column"},{default:l(()=>[v(r(te.row.finance_account?te.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(W,{key:"category_id",props:te},{default:l(()=>[te.row.category?(c(),w("div",vc,r(te.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"description",props:te},{default:l(()=>[e(he,{text:te.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"amount",props:te},{default:l(()=>[v(r(a(K)(te.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:te},{default:l(()=>[e(he,{text:te.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:te},{default:l(()=>[t("div",yc,[e(I,{icon:"image",color:"primary",dense:"",flat:"",disable:te.row.image_path===null||te.row.image_path==="",onClick:J(ie=>h(te.row.image_path),["stop"])},{default:l(()=>[te.row.image_path!=null?(c(),O(Xt,{key:0},{default:l(()=>[...N[10]||(N[10]=[v(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),U.$can("admin.operational-cost.add")||U.$can("admin.operational-cost.edit")||U.$can("admin.operational-cost.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:N[7]||(N[7]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[U.$can("admin.operational-cost.add")?le((c(),O(oe,{key:0,clickable:"",onClick:J(ie=>a(ee).get(U.route("admin.operational-cost.duplicate",te.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(L,null,{default:l(()=>[...N[11]||(N[11]=[v(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),U.$can("admin.operational-cost.edit")?le((c(),O(oe,{key:1,clickable:"",onClick:J(ie=>a(ee).get(U.route("admin.operational-cost.edit",te.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...N[12]||(N[12]=[v("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),U.$can("admin.operational-cost.delete")?le((c(),O(oe,{key:2,onClick:J(ie=>A(te.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...N[13]||(N[13]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(pa,{modelValue:f.value,"onUpdate:modelValue":N[9]||(N[9]=te=>f.value=te),imageUrl:`/${b.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:s},{default:l(()=>[t("div",cc,[e(ce,{modelValue:z.year,"onUpdate:modelValue":[N[2]||(N[2]=te=>z.year=te),D],options:x,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:z.month,"onUpdate:modelValue":[N[3]||(N[3]=te=>z.month=te),D],options:C,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:z.year===null},null,8,["modelValue","disable"]),e(ce,{modelValue:z.category_id,"onUpdate:modelValue":[N[4]||(N[4]=te=>z.category_id=te),D],options:B,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:z.finance_account_id,"onUpdate:modelValue":[N[5]||(N[5]=te=>z.finance_account_id=te),D],options:E,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:z.search,"onUpdate:modelValue":N[6]||(N[6]=te=>z.search=te),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},kc=Object.freeze(Object.defineProperty({__proto__:null,default:_c},Symbol.toStringTag,{value:"Module"})),wc={class:"q-gutter-sm"},hc={class:"col col-md-6 q-pa-xs"},$c={__name:"Editor",setup(u){const n=Se(),d=ve(),o=(d.props.data.id?"Edit":"Tambah")+" Kategori Produk",i=We({id:d.props.data.id,name:d.props.data.name,description:d.props.data.description}),s=()=>rt({form:i,url:route("admin.product-category.save")});return(g,b)=>{const f=Z("i-head"),m=Z("authenticated-layout");return c(),w(Q,null,[e(f,{title:o}),e(m,{"show-drawer-button":!a(n).screen.lt.md},Je({title:l(()=>[v(r(o))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",hc,[e(Qe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=p=>a(i).id=p)},null,512),[[kt,a(i).id]]),e(se,{autofocus:"",modelValue:a(i).name,"onUpdate:modelValue":b[2]||(b[2]=p=>a(i).name=p),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(i).errors.name,disable:a(i).processing,"error-message":a(i).errors.name,rules:[p=>p&&p.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:a(i).description,"onUpdate:modelValue":b[3]||(b[3]=p=>a(i).description=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.description,"error-message":a(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"]),e(I,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:b[4]||(b[4]=p=>a(i).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(n).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",wc,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=p=>g.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},xc=Object.freeze(Object.defineProperty({__proto__:null,default:$c},Symbol.toStringTag,{value:"Module"})),Sc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Vc={class:"q-pa-xs"},qc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Cc={key:0,class:"text-grey-8"},Tc={class:"flex justify-end"},gl="Kategori Produk",Pc={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=De({search:"",...Ne()}),m=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];$e(()=>{_()});const y=C=>st({message:`Hapus Kategori ${C.name}?`,url:route("admin.product-category.delete",C.id),fetchItemsCallback:_,loading:i}),_=(C=null)=>{Me({pagination:m,filter:f,props:C,rows:o,url:route("admin.product-category.data"),loading:i,tableRef:s})},x=X(()=>n.screen.gt.sm?p:p.filter(C=>C.name==="name"||C.name==="action"));return(C,$)=>{const B=Z("i-head"),Y=Z("authenticated-layout");return c(),w(Q,null,[e(B,{title:gl}),e(Y,null,Je({title:l(()=>[v(r(gl))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=E=>d.value=!d.value)},null,8,["icon"]),C.$can("admin.product-category.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=E=>a(ee).get(C.route("admin.product-category.add")))})):k("",!0)]),default:l(()=>[t("div",Vc,[e(Ie,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":$[4]||($[4]=E=>m.value=E),filter:f.search,loading:i.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:E,message:z,filter:R})=>[t("div",qc,[t("span",null,r(z)+" "+r(R?" with term "+R:""),1)])]),body:l(E=>[e(Pe,{props:E},{default:l(()=>[e(W,{key:"name",props:E,class:"wrap-column"},{default:l(()=>[v(r(E.row.name)+" ",1),a(n).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[E.row.description?(c(),w("div",Cc,[e(T,{name:"description"}),v(" "+r(E.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"description",props:E,class:"wrap-column"},{default:l(()=>[v(r(E.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:E},{default:l(()=>[t("div",Tc,[C.$can("admin.product-category.add")||C.$can("admin.product-category.edit")||C.$can("admin.product-category.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[3]||($[3]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[C.$can("admin.product-category.add")?le((c(),O(oe,{key:0,clickable:"",onClick:J(z=>a(ee).get(C.route("admin.product-category.duplicate",E.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(L,null,{default:l(()=>[...$[5]||($[5]=[v("Duplikat",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),C.$can("admin.product-category.edit")?le((c(),O(oe,{key:1,clickable:"",onClick:J(z=>a(ee).get(C.route("admin.product-category.edit",E.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...$[6]||($[6]=[v("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),C.$can("admin.product-category.delete")?le((c(),O(oe,{key:2,onClick:J(z=>y(E.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...$[7]||($[7]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Sc,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":$[2]||($[2]=E=>f.search=E),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Rc=Object.freeze(Object.defineProperty({__proto__:null,default:Pc},Symbol.toStringTag,{value:"Module"})),Oc={class:"detail"},Dc={key:0},Ic={key:1},Uc={key:2},Ec={class:"detail"},Ac={class:"detail"},jc={key:0},Nc={key:0},Mc={key:0},Bc={key:0},zc={class:"detail"},Fc={key:0,class:"q-pt-md"},vo={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(u){const n=u;Se();const d=i=>`${i>0?K((i-n.product.cost)/i*100,2):0}%`,o=()=>{st({message:`Hapus Produk ${n.product.name}?`,url:route("admin.product.delete",n.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(i,s)=>{const g=Z("i-link");return c(),w("div",null,[s[41]||(s[41]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",Oc,[t("tbody",null,[t("tr",null,[s[1]||(s[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),s[2]||(s[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.product.name),1)]),t("tr",null,[s[3]||(s[3]=t("td",null,"Deskirpsi",-1)),s[4]||(s[4]=t("td",null,":",-1)),t("td",null,r(u.product.description),1)]),t("tr",null,[s[5]||(s[5]=t("td",null,"Barcode",-1)),s[6]||(s[6]=t("td",null,":",-1)),t("td",null,r(u.product.barcode),1)]),t("tr",null,[s[7]||(s[7]=t("td",null,"Jenis Produk",-1)),s[8]||(s[8]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.PRODUCT_TYPES[u.product.type]),1)]),t("tr",null,[s[9]||(s[9]=t("td",null,"Kategori",-1)),s[10]||(s[10]=t("td",null,":",-1)),t("td",null,r(u.product.category?u.product.category.name:"--Tidak memiliki kategori--"),1)]),i.$can("admin.product:view-supplier")?(c(),w("tr",Dc,[s[11]||(s[11]=t("td",null,"Supplier",-1)),s[12]||(s[12]=t("td",null,":",-1)),t("td",null,[u.product.supplier?(c(),O(g,{key:0,href:i.route("admin.supplier.detail",{id:u.product.supplier.id})},{default:l(()=>[v(r(u.product.supplier.name),1)]),_:1},8,["href"])):(c(),w(Q,{key:1},[v(r("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[s[13]||(s[13]=t("td",null,"Status",-1)),s[14]||(s[14]=t("td",null,":",-1)),t("td",null,r(u.product.active?"Aktif":"Tidak Aktif"),1)]),u.product.created_at?(c(),w("tr",Ic,[s[16]||(s[16]=t("td",null,"Dibuat Oleh",-1)),s[17]||(s[17]=t("td",null,":",-1)),t("td",null,[u.product.creator?(c(),w(Q,{key:0},[e(g,{href:i.route("admin.user.detail",{id:u.product.creator})},{default:l(()=>[v(r(u.product.creator.username),1)]),_:1},8,["href"]),s[15]||(s[15]=v(" - ",-1))],64)):k("",!0),v(" "+r(a(be)(u.product.created_at)),1)])])):k("",!0),u.product.updater?(c(),w("tr",Uc,[s[19]||(s[19]=t("td",null,"Diperbarui oleh",-1)),s[20]||(s[20]=t("td",null,":",-1)),t("td",null,[u.product.updater?(c(),w(Q,{key:0},[e(g,{href:i.route("admin.user.detail",{id:u.product.updater})},{default:l(()=>[v(r(u.product.updater.username),1)]),_:1},8,["href"]),s[18]||(s[18]=v(" - ",-1))],64)):k("",!0),v(" "+r(a(be)(u.product.updated_at)),1)])])):k("",!0)])]),s[42]||(s[42]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",Ec,[t("tbody",null,[t("tr",null,[s[21]||(s[21]=t("td",{style:{width:"120px"}},"Stok",-1)),s[22]||(s[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(K)(u.product.stock))+" "+r(u.product.uom),1)]),t("tr",null,[s[23]||(s[23]=t("td",null,"Stok Minimum",-1)),s[24]||(s[24]=t("td",null,":",-1)),t("td",null,r(a(K)(u.product.min_stock))+" "+r(u.product.uom),1)]),t("tr",null,[s[25]||(s[25]=t("td",null,"Stok Maksimum",-1)),s[26]||(s[26]=t("td",null,":",-1)),t("td",null,r(a(K)(u.product.max_stock))+" "+r(u.product.uom),1)]),t("tr",null,[s[27]||(s[27]=t("td",null,"Barcode",-1)),s[28]||(s[28]=t("td",null,":",-1)),t("td",null,r(u.product.barcode),1)])])]),s[43]||(s[43]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",Ac,[t("tbody",null,[t("tr",null,[s[29]||(s[29]=t("td",null,"Opsi Harga",-1)),s[30]||(s[30]=t("td",null,":",-1)),t("td",null,r(u.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),i.$can("admin.product:view-cost")?(c(),w("tr",jc,[s[31]||(s[31]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),s[32]||(s[32]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(a(K)(u.product.cost)),1)])):k("",!0),t("tr",null,[s[33]||(s[33]=t("td",null,"Harga Eceran",-1)),s[34]||(s[34]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(a(K)(u.product.price_1))+" ",1),i.$can("admin.product:view-cost")?(c(),w("span",Nc," ("+r(d(u.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[s[35]||(s[35]=t("td",null,"Harga Partai",-1)),s[36]||(s[36]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(a(K)(u.product.price_2))+" ",1),i.$can("admin.product:view-cost")?(c(),w("span",Mc," ("+r(d(u.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[s[37]||(s[37]=t("td",null,"Harga Grosir",-1)),s[38]||(s[38]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(a(K)(u.product.price_3))+" ",1),i.$can("admin.product:view-cost")?(c(),w("span",Bc," ("+r(d(u.product.price_3))+") ",1)):k("",!0)])])])]),s[44]||(s[44]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",zc,[t("tbody",null,[t("tr",null,[s[39]||(s[39]=t("td",{style:{width:"120px"}},"Catatan",-1)),s[40]||(s[40]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.product.notes),1)])])]),i.$can("admin.product.delete")?(c(),w("div",Fc,[e(I,{icon:"delete",label:"Hapus",color:"negative",onClick:s[0]||(s[0]=b=>o())})])):k("",!0)])}}},Lc=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),Kc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Hc={key:0},yo={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(u){const n=u,d=Se(),o=q([]),i=q(!0),s=De({...Ne()}),g=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let b=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"quantity_before",label:"Stok Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Stok Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{f()});const f=(p=null)=>Me({pagination:g,filter:s,props:p,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:n.productId}}),loading:i}),m=X(()=>d.screen.lt.sm?b.filter(p=>p.name==="id"||p.name==="quantity"):b);return(p,y)=>(c(),O(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:g.value,"onUpdate:pagination":y[0]||(y[0]=_=>g.value=_),filter:s.search,loading:i.value,columns:m.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:x,filter:C})=>[t("div",Kc,[t("span",null,r(x)+" "+r(C?" with term "+C:""),1)])]),body:l(_=>[e(Pe,{props:_},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(be)(_.row.created_at)),1)]),t("div",null,[e(vt,null,{default:l(()=>[v(r(p.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[_.row.ref_type]),1)]),_:2},1024)]),a(d).screen.lt.sm?(c(),w(Q,{key:0},[t("div",{class:qe(_.row.quantity>0?"text-positive":"text-negative")},[e(T,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(a(K)(_.row.quantity_before))+" "+r(_.row.uom)+"  "+r(a(K)(_.row.quantity_after))+" "+r(_.row.uom),1)],2),e(he,{text:_.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"created_at",props:_},{default:l(()=>[v(r(a(be)(_.row.created_at)),1)]),_:2},1032,["props"]),e(W,{key:"type",props:_},{default:l(()=>[v(r(p.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[_.row.ref_type])+" ",1),_.row.ref?(c(),w("span",Hc,r(_.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"quantity_before",props:_},{default:l(()=>[v(r(a(K)(_.row.quantity_before)),1)]),_:2},1032,["props"]),e(W,{key:"quantity",props:_,class:qe(_.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[v(r(a(jt)(_.row.quantity))+" ",1),a(d).screen.lt.sm?(c(),w(Q,{key:0},[v(r(_.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(W,{key:"quantity_after",props:_},{default:l(()=>[v(r(a(K)(_.row.quantity_after)),1)]),_:2},1032,["props"]),e(W,{key:"uom",props:_},{default:l(()=>[v(r(_.row.uom),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_},{default:l(()=>[e(he,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Yc=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),Wc={class:"q-gutter-sm"},Qc={class:"q-gutter-sm"},Jc={class:"row justify-center"},Gc={class:"col col-lg-6 q-pa-xs"},Xc={class:"row"},Zc={__name:"Detail",setup(u){const n=ve(),d=`Rincian Produk #${n.props.data.id}`,o=q("main");return(i,s)=>{const g=Z("i-head"),b=Z("authenticated-layout");return c(),w(Q,null,[e(g,{title:d}),e(b,{"show-drawer-button":!0},{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",Wc,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=f=>i.$goBack())})])]),"right-button":l(()=>[t("div",Qc,[i.$can("admin.product.edit")?(c(),O(I,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:s[1]||(s[1]=f=>a(ee).get(i.route("admin.product.edit",{id:a(n).props.data.id}))),title:"Edit produk"})):k("",!0),i.$can("admin.product.add")?(c(),O(I,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:s[2]||(s[2]=f=>a(ee).get(i.route("admin.product.duplicate",{id:a(n).props.data.id}))),title:"Duplikat produk"})):k("",!0),i.$can("admin.product.add")?(c(),O(I,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:s[3]||(s[3]=f=>a(ee).get(i.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:l(()=>[t("div",Jc,[t("div",Gc,[t("div",Xc,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ct,{modelValue:o.value,"onUpdate:modelValue":s[4]||(s[4]=f=>o.value=f),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Info Utama"}),e(ot,{name:"history",label:"Riwayat Stok"}),e(ot,{name:"version-history",label:"Riwayat Dokumen"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:o.value,"onUpdate:modelValue":s[5]||(s[5]=f=>o.value=f),animated:""},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(vo,{product:a(n).props.data},null,8,["product"])]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(yo,{"product-id":a(n).props.data.id},null,8,["product-id"])]),_:1}),e(nt,{name:"version-history",class:"q-pa-xs"},{default:l(()=>[e(Da,{"document-id":a(n).props.data.id,"document-type":"product"},null,8,["document-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},ep=Object.freeze(Object.defineProperty({__proto__:null,default:Zc},Symbol.toStringTag,{value:"Module"}));function Ia(u,n=!1){const d=u.map(g=>({value:g.id,label:g.name})),o=n?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...d]:d,i=q([...o]);return{filteredCategories:i,filterCategories:(g,b)=>{const f=g.toLowerCase();b(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(f))})},categories:o}}function Ua(u,n=!1){const d=u.map(g=>({value:g.id,label:g.name+" ("+g.code+")"})),o=n?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...d]:d,i=q([...o]);return{filteredSuppliers:i,filterSupplierFn:(g,b)=>{const f=g.toLowerCase();b(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(f))})},suppliers:o}}const tp={class:"q-gutter-sm"},ap={class:"col col-md-6 q-pa-xs"},lp={class:"row q-gutter-md"},op={class:"row q-gutter-md"},np={class:"row q-gutter-md"},sp={class:"col"},rp={class:"col"},ip={class:"col"},dp={__name:"Editor",setup(u){const n=ve(),d=(n.props.data.id?"Edit":"Tambah")+" Produk",o=Ze(window.CONSTANTS.PRODUCT_TYPES),i=We({id:n.props.data.id,category_id:n.props.data.category_id,supplier_id:n.props.data.supplier_id,type:n.props.data.type||"",name:n.props.data.name||"",barcode:n.props.data.barcode||"",description:n.props.data.description||"",stock:parseFloat(n.props.data.stock)||0,min_stock:parseFloat(n.props.data.min_stock)||0,max_stock:parseFloat(n.props.data.max_stock)||0,uom:n.props.data.uom||"",cost:parseFloat(n.props.data.cost)||0,price_1:parseFloat(n.props.data.price_1)||0,price_2:parseFloat(n.props.data.price_2)||0,price_3:parseFloat(n.props.data.price_3)||0,active:!!n.props.data.active,price_editable:!!n.props.data.price_editable,notes:n.props.data.notes||""}),s=()=>rt({form:i,url:route("admin.product.save")}),{filteredCategories:g,filterCategories:b}=Ia(n.props.categories),{filteredSuppliers:f,filterSupplierFn:m}=Ua(n.props.suppliers),p=C=>i[C]>0?(i[C]-i.cost)/i[C]*100:0,y=X(()=>p("price_1")),_=X(()=>p("price_2")),x=X(()=>p("price_3"));return(C,$)=>{const B=Z("i-head"),Y=Z("authenticated-layout");return c(),w(Q,null,[e(B,{title:d}),e(Y,{"show-drawer-button":!0},{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",tp,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:$[0]||($[0]=E=>C.$goBack())})])]),"right-button":l(()=>[e(I,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(i).processing,onClick:$[1]||($[1]=E=>s()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",ap,[e(Qe,{class:"row",onKeydown:$[20]||($[20]=Ht(J(()=>{},["prevent"]),["enter"])),onSubmit:J(s,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":$[2]||($[2]=E=>a(i).id=E)},null,512),[[kt,a(i).id]]),$[23]||($[23]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(ce,{autofocus:"",modelValue:a(i).type,"onUpdate:modelValue":$[3]||($[3]=E=>a(i).type=E),class:"custom-select",options:a(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["modelValue","options"]),e(se,{modelValue:a(i).name,"onUpdate:modelValue":$[4]||($[4]=E=>a(i).name=E),modelModifiers:{trim:!0},label:"Nama Produk","lazy-rules":"",error:!!a(i).errors.name,disable:a(i).processing,"error-message":a(i).errors.name,rules:[E=>E&&E.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:a(i).description,"onUpdate:modelValue":$[5]||($[5]=E=>a(i).description=E),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.description,"error-message":a(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(i).category_id,"onUpdate:modelValue":$[6]||($[6]=E=>a(i).category_id=E),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:a(g),"map-options":"","emit-value":"",onFilter:a(b),"option-label":"label","option-value":"value",error:!!a(i).errors.category_id,disable:a(i).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(L,null,{default:l(()=>[...$[21]||($[21]=[v("Kategori tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),C.$can("admin.product:view-supplier")?(c(),O(ce,{key:0,modelValue:a(i).supplier_id,"onUpdate:modelValue":$[7]||($[7]=E=>a(i).supplier_id=E),label:"Supplier","use-input":"","input-debounce":"300",clearable:"",options:a(f),"map-options":"","emit-value":"",onFilter:a(m),"option-label":"label","option-value":"value",error:!!a(i).errors.supplier_id,disable:a(i).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(L,null,{default:l(()=>[...$[22]||($[22]=[v("Supplier tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(xt,{modelValue:a(i).active,"onUpdate:modelValue":$[8]||($[8]=E=>a(i).active=E),disable:a(i).processing,label:"Aktif"},null,8,["modelValue","disable"]),$[24]||($[24]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",lp,[e(se,{modelValue:a(i).barcode,"onUpdate:modelValue":$[9]||($[9]=E=>a(i).barcode=E),modelModifiers:{trim:!0},label:"Barcode","lazy-rules":"",error:!!a(i).errors.barcode,disable:a(i).processing,"error-message":a(i).errors.barcode,"hide-bottom-space":"",class:"col"},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:a(i).uom,"onUpdate:modelValue":$[10]||($[10]=E=>a(i).uom=E),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!a(i).errors.uom,disable:a(i).processing,"error-message":a(i).errors.uom,"hide-bottom-space":"",class:"col"},null,8,["modelValue","error","disable","error-message"])]),t("div",op,[e(Ee,{modelValue:a(i).stock,"onUpdate:modelValue":$[11]||($[11]=E=>a(i).stock=E),label:"Stok",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.stock,errorMessage:a(i).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(i).min_stock,"onUpdate:modelValue":$[12]||($[12]=E=>a(i).min_stock=E),label:"Stok Min",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.min_stock,errorMessage:a(i).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(i).max_stock,"onUpdate:modelValue":$[13]||($[13]=E=>a(i).max_stock=E),label:"Stok Maks",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.max_stock,errorMessage:a(i).errors.max_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),$[25]||($[25]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Harga",-1)),e(xt,{modelValue:a(i).price_editable,"onUpdate:modelValue":$[14]||($[14]=E=>a(i).price_editable=E),disable:a(i).processing,label:"Harga bisa diubah saat penjualan"},null,8,["modelValue","disable"]),C.$can("admin.product:view-cost")?(c(),O(Ee,{key:1,modelValue:a(i).cost,"onUpdate:modelValue":$[15]||($[15]=E=>a(i).cost=E),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.cost,errorMessage:a(i).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("div",np,[t("div",sp,[e(Ee,{modelValue:a(i).price_1,"onUpdate:modelValue":$[16]||($[16]=E=>a(i).price_1=E),label:"Harga Eceran",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.price_1,errorMessage:a(i).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),t("div",{class:qe(["q-my-xs",y.value<0?"text-red":"text-green-7"])},r(a(jt)(y.value,2))+"% ",3)]),t("div",rp,[e(Ee,{modelValue:a(i).price_2,"onUpdate:modelValue":$[17]||($[17]=E=>a(i).price_2=E),label:"Harga Partai",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.price_2,errorMessage:a(i).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),t("div",{class:qe(["q-my-xs",_.value<0?"text-red":"text-green-7"])},r(a(jt)(_.value,2))+"% ",3)]),t("div",ip,[e(Ee,{modelValue:a(i).price_3,"onUpdate:modelValue":$[18]||($[18]=E=>a(i).price_3=E),label:"Harga Grosir",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.price_3,errorMessage:a(i).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),t("div",{class:qe(["q-my-xs",x.value<0?"text-red":"text-green-7"])},r(a(jt)(x.value,2))+"% ",3)])]),$[26]||($[26]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Lainnya",-1)),e(se,{modelValue:a(i).notes,"onUpdate:modelValue":$[19]||($[19]=E=>a(i).notes=E),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.notes,"error-message":a(i).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},up=Object.freeze(Object.defineProperty({__proto__:null,default:dp},Symbol.toStringTag,{value:"Module"})),mp={class:"q-gutter-sm"},cp={class:"col col-md-6 q-pa-xs"},bl="Import Produk",pp={__name:"Import",setup(u){const n=We({csv_file:null}),d=()=>{n.post(route("admin.product.import"),{onSuccess:()=>{n.reset()},onError:()=>{Ye()},onFinish:()=>{n.clearErrors()}})};return(o,i)=>{const s=Z("i-head"),g=Z("authenticated-layout");return c(),w(Q,null,[e(s,{title:bl}),e(g,{"show-drawer-button":!0},{title:l(()=>[v(r(bl))]),"left-button":l(()=>[t("div",mp,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",cp,[e(Qe,{class:"row",onSubmit:J(d,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(uo,{modelValue:a(n).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>a(n).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!a(n).errors.csv_file,"error-message":a(n).errors.csv_file,disable:a(n).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(n).processing||!a(n).csv_file,loading:a(n).processing},null,8,["disable","loading"]),e(I,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:i[2]||(i[2]=b=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(c(),O(Yt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(c(),O(Yt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},fp=Object.freeze(Object.defineProperty({__proto__:null,default:pp},Symbol.toStringTag,{value:"Module"})),gp={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},bp={class:"q-pa-xs"},vp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},yp={key:0},_p={key:1},kp={key:2},wp={key:3},hp={class:"flex justify-end"},$p={key:0},xp={key:1},Sp={key:0},vl="Produk",Vp={__name:"Index",setup(u){const n=ve(),d=q(null),o=q(null),i=at(o),s=q(!1),g=[...Ze(window.CONSTANTS.PRODUCT_TYPES)],b=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],f=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],m=Se(),p=q(!1),y=q([]),_=q(!0),x=De({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...Ne()}),C=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});let $=[{name:"id",label:"ID",field:"id",align:"center",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"price_2",label:"Harga Partai",field:"price_2",align:"right"},{name:"price_3",label:"Harga Grosir",field:"price_3",align:"right"},{name:"action",align:"right"}];$e(()=>{const h=new URLSearchParams(window.location.search).get("page");h&&(C.value.page=parseInt(h)),Y()});const B=P=>st({message:`Hapus Produk ${P.name}?`,url:route("admin.product.delete",P.id),fetchItemsCallback:Y,loading:_}),Y=(P=null)=>{Me({pagination:C,filter:x,props:P,rows:y,url:route("admin.product.data"),loading:_,tableRef:d})},E=()=>{Y()},{filteredCategories:z,filterCategories:R}=Ia(n.props.categories),{filteredSuppliers:M,filterSupplierFn:A}=Ua(n.props.suppliers),V=X(()=>{let P=[...$];return s.value||P.splice(3,1),m.screen.gt.sm?P:P.filter(h=>h.name==="id"||h.name==="name"||h.name==="action")}),D=P=>{ee.get(route("admin.product.detail",P.row.id))};return(P,h)=>{const U=Z("i-head"),N=Z("authenticated-layout");return c(),w(Q,null,[e(U,{title:vl}),e(N,null,Je({title:l(()=>[v(r(vl))]),"right-button":l(()=>[e(I,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=S=>p.value=!p.value)},null,8,["icon"]),P.$can("admin.product.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=S=>a(ee).get(P.route("admin.product.add")))})):k("",!0),P.$can("admin.product.import")||P.$can("admin.product:view-cost")?(c(),O(I,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[5]||(h[5]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.product.send-price-list")?le((c(),O(oe,{key:0,clickable:"",onClick:h[2]||(h[2]=J(S=>a(ee).get(P.route("admin.product.send-price-list")),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"send"})]),_:1}),e(L,null,{default:l(()=>[...h[14]||(h[14]=[v("Kirim Daftar Harga",-1)])]),_:1})]),_:1})),[[ue],[pe]]):k("",!0),P.$can("admin.product.import")?le((c(),O(oe,{key:1,clickable:"",onClick:h[3]||(h[3]=S=>s.value=!s.value)},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:s.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(L,null,{default:l(()=>[v(r(s.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[ue],[pe]]):k("",!0),P.$can("admin.product.import")?le((c(),O(oe,{key:2,clickable:"",onClick:h[4]||(h[4]=J(S=>a(ee).get(P.route("admin.product.import")),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"csv"})]),_:1}),e(L,null,{default:l(()=>[...h[15]||(h[15]=[v("Import",-1)])]),_:1})]),_:1})),[[ue],[pe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",bp,[e(Ie,{ref_key:"tableRef",ref:d,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:C.value,"onUpdate:pagination":h[13]||(h[13]=S=>C.value=S),filter:x.search,loading:_.value,columns:V.value,rows:y.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(i)}),onRequest:Y,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:j,filter:te})=>[t("div",vp,[t("span",null,r(j)+" "+r(te?" with term "+te:""),1)])]),header:l(S=>[e(Pe,{props:S},{default:l(()=>[e(Gt,{"auto-width":""}),(c(!0),w(Q,null,je(S.cols,j=>(c(),O(Gt,{key:j.name,props:S},{default:l(()=>[v(r(j.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(S=>[e(Pe,{props:S,class:qe([{inactive:!S.row.active},"cursor-pointer"]),onClick:j=>D(S)},{default:l(()=>[e(W,{"auto-width":""},{default:l(()=>[e(I,{size:"sm",flat:"",round:"",dense:"",onClick:J(j=>S.expand=!S.expand,["stop"]),icon:S.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(W,null,{default:l(()=>[v(r(S.row.id),1)]),_:2},1024),e(W,{key:"name",props:S,class:"wrap-column"},{default:l(()=>[v(r(S.row.name)+" ",1),a(m).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[S.row.type=="stocked"?(c(),w("div",yp,[e(T,{name:"cycle"}),v(" Stok: "+r(a(K)(S.row.stock))+" "+r(S.row.uom),1)])):k("",!0),s.value?(c(),w("div",_p,[e(T,{name:"money"}),v(" Modal: Rp. "+r(a(K)(S.row.cost)),1)])):k("",!0),t("div",null,[e(T,{name:"sell"}),v(" Eceran: Rp. "+r(a(K)(S.row.price_1)),1)]),S.row.price_2!=0?(c(),w("div",kp,[e(T,{name:"sell"}),v(" Partai: Rp. "+r(a(K)(S.row.price_2)),1)])):k("",!0),S.row.price_3!=0?(c(),w("div",wp,[e(T,{name:"sell"}),v(" Grosir: Rp. "+r(a(K)(S.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"stock",props:S,class:qe(["wrap-column",{"low-stock":S.row.type=="stocked"&&(Number(S.row.stock)==0||Number(S.row.stock)<Number(S.row.min_stock)),"over-stock":S.row.type=="stocked"&&Number(S.row.max_stock)&&Number(S.row.stock)>Number(S.row.max_stock)}])},{default:l(()=>[v(r(S.row.type=="stocked"?a(K)(S.row.stock)+" "+S.row.uom:"-"),1)]),_:2},1032,["props","class"]),(c(),O(W,{key:"cost",props:S,class:"wrap-column"},{default:l(()=>[v(r(a(K)(S.row.cost)),1)]),_:2},1032,["props"])),e(W,{key:"price_1",props:S,class:"wrap-column"},{default:l(()=>[v(r(a(K)(S.row.price_1)),1)]),_:2},1032,["props"]),e(W,{key:"price_2",props:S,class:"wrap-column"},{default:l(()=>[v(r(a(K)(S.row.price_2)),1)]),_:2},1032,["props"]),e(W,{key:"price_3",props:S,class:"wrap-column"},{default:l(()=>[v(r(a(K)(S.row.price_3)),1)]),_:2},1032,["props"]),e(W,{key:"action",props:S},{default:l(()=>[t("div",hp,[P.$can("admin.product.add")||P.$can("admin.product.edit")||P.$can("admin.product.delete")?(c(),O(I,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:h[12]||(h[12]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"175px"}},{default:l(()=>[P.$can("admin.product.add")?le((c(),O(oe,{key:0,clickable:"",onClick:J(j=>a(ee).get(P.route("admin.product.duplicate",S.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(L,null,{default:l(()=>[...h[16]||(h[16]=[v("Duplikat",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),P.$can("admin.product.edit")?le((c(),O(oe,{key:1,clickable:"",onClick:J(j=>a(ee).get(P.route("admin.product.edit",S.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...h[17]||(h[17]=[v("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),P.$can("admin.product.delete")?le((c(),O(oe,{key:2,onClick:J(j=>B(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...h[18]||(h[18]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),le(e(Pe,{props:S},{default:l(()=>[e(W,{colspan:"100%"},{default:l(()=>[S.row.barcode?(c(),w("div",$p,[e(T,{class:"inline-icon",name:"barcode"}),v(" Barcode: "+r(S.row.barcode),1)])):k("",!0),S.row.category_id?(c(),w("div",xp,[e(T,{name:"category",class:"inline-icon"}),v(" Kategori: "+r(S.row.category.name),1)])):k("",!0),P.$can("admin.product:view-supplier")?(c(),w(Q,{key:2},[S.row.supplier_id?(c(),w("div",Sp,[e(T,{name:"local_shipping",class:"inline-icon"}),v(" Supplier: "+r(S.row.supplier.name),1)])):k("",!0)],64)):k("",!0),S.row.description?(c(),O(he,{key:3,text:S.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),S.row.notes?(c(),O(he,{key:4,text:S.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[Jl,S.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[p.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:l(()=>[t("div",gp,[e(ce,{modelValue:x.type,"onUpdate:modelValue":[h[6]||(h[6]=S=>x.type=S),E],class:"custom-select col-xs-4 col-sm-2",options:g,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(ce,{modelValue:x.stock_status,"onUpdate:modelValue":[h[7]||(h[7]=S=>x.stock_status=S),E],class:"custom-select col-xs-4 col-sm-2",options:f,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:x.status,"onUpdate:modelValue":[h[8]||(h[8]=S=>x.status=S),E],class:"custom-select col-xs-4 col-sm-2",options:b,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:x.category_id,"onUpdate:modelValue":[h[9]||(h[9]=S=>x.category_id=S),E],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(z),"map-options":"",dense:"","emit-value":"",onFilter:a(R),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),P.$can("admin.product:view-supplier")?(c(),O(ce,{key:0,modelValue:x.supplier_id,"onUpdate:modelValue":[h[10]||(h[10]=S=>x.supplier_id=S),E],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(M),"map-options":"",dense:"","emit-value":"",onFilter:a(A),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":h[11]||(h[11]=S=>x.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},qp=Object.freeze(Object.defineProperty({__proto__:null,default:Vp},Symbol.toStringTag,{value:"Module"})),Cp={class:"q-gutter-sm"},Tp={class:"col col-md-8 q-pa-xs"},Pp={class:"col-12 col-md-6"},Rp={class:"col-12 col-md-6"},Op={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},Dp={class:"q-gutter-sm"},yl="Kirim Daftar Harga",Ip={__name:"SendPriceList",setup(u){const n=ve(),d=q(""),o=q(null),i=X(()=>{var A;const M=new Map;return(A=n.props.products)==null||A.forEach(V=>{M.set(V.id,V)}),M}),s=X(()=>{var A;const M=new Map;return(A=n.props.customers)==null||A.filter(V=>V.phone&&V.phone.trim()!=="").forEach(V=>{M.set(V.id,V)}),M}),g=X(()=>{var M;return((M=n.props.customers)==null?void 0:M.map(A=>({value:A.id,label:A.name})))||[]}),b=X(()=>{var M;return((M=n.props.products)==null?void 0:M.map(A=>({value:A.id,label:`${A.name}`})))||[]}),f=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],m=q(b.value),p=q(g.value),y=We({price_types:[],products:[],customers:[]});y.transform(M=>({customers:M.customers.map(A=>A.value),message:d.value}));const _=M=>M?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(M):"Rp. 0",x=M=>{const A=f.find(V=>V.value===M);return A?A.label:M},C=()=>{if(o.value){const M=o.value.$el.querySelector("textarea");if(M){M.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(A){console.error("Gagal menyalin teks ke clipboard:",A)}}}},$=X(()=>{var A,V;if(((A=y.products)==null?void 0:A.length)===0||((V=y.price_types)==null?void 0:V.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let M=`*DAFTAR HARGA TERBARU*
`;return M+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,M+=`------------------------------

`,(y.products||[]).forEach(D=>{const P=i.value.get(D.value);P&&(M+=`*${P.name}*
`,(y.price_types||[]).forEach(h=>{const U=x(h),N=P[h],S=P.uom||"pcs";N!=null&&N>0&&(M+=`- ${U}: *${_(N)}* / ${S}
`)}),M+=`
`)}),M+=`------------------------------
`,M+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",M});He($,M=>{d.value=M},{immediate:!0});const B=X(()=>(y.customers||[]).map(M=>s.value.get(M.value)).filter(M=>M&&M.phone)),Y=M=>{const A=d.value;let V=M.startsWith("0")?"62"+M.substring(1):M;V=V.replace(/[^0-9]/g,"");const D=encodeURIComponent(A);return`https://wa.me/${V}?text=${D}`},E=(M,A)=>{if(M===""){A(()=>{m.value=b.value});return}A(()=>{const V=M.toLowerCase();m.value=b.value.filter(D=>D.label.toLowerCase().indexOf(V)>-1)})},z=(M,A)=>{if(M===""){A(()=>{p.value=g.value});return}A(()=>{const V=M.toLowerCase();p.value=g.value.filter(D=>D.label.toLowerCase().indexOf(V)>-1)})},R=()=>{var M,A,V;if(((M=y.price_types)==null?void 0:M.length)===0||((A=y.products)==null?void 0:A.length)===0||((V=y.customers)==null?void 0:V.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}y.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{Ye()},onFinish:()=>{y.clearErrors()}})};return(M,A)=>{const V=Z("i-head"),D=Z("authenticated-layout");return c(),w(Q,null,[e(V,{title:yl}),e(D,{"show-drawer-button":!0},{title:l(()=>[v(r(yl))]),"left-button":l(()=>[t("div",Cp,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:A[0]||(A[0]=P=>M.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Tp,[e(Qe,{class:"row q-col-gutter-xs",onSubmit:J(R,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[t("div",Pp,[e(ge,{square:"",flat:"",bordered:"",class:"col full-width"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[A[10]||(A[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),A[11]||(A[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:a(y).products,"onUpdate:modelValue":A[1]||(A[1]=P=>a(y).products=P),options:m.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.products,"error-message":a(y).errors.products,loading:a(y).processing,"use-input":"",onFilter:E,onClear:A[2]||(A[2]=P=>a(y).products=[]),"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(L,{class:"text-grey"},{default:l(()=>[...A[8]||(A[8]=[v(" Tidak ada produk ditemukan ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:a(y).price_types,"onUpdate:modelValue":A[3]||(A[3]=P=>a(y).price_types=P),options:f,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.price_types,"error-message":a(y).errors.price_types,loading:a(y).processing,multiple:"","use-chips":"",clearable:"",onClear:A[4]||(A[4]=P=>a(y).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:a(y).customers,"onUpdate:modelValue":A[5]||(A[5]=P=>a(y).customers=P),options:p.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.customers,"error-message":a(y).errors.customers,loading:a(y).processing,"use-input":"",onFilter:z,onClear:A[6]||(A[6]=P=>a(y).customers=[]),"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(L,{class:"text-grey"},{default:l(()=>[...A[9]||(A[9]=[v(" Tidak ada pelanggan ditemukan ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>{var P,h,U;return[e(I,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:a(y).processing||((P=a(y).products)==null?void 0:P.length)===0||((h=a(y).customers)==null?void 0:h.length)===0||((U=a(y).price_types)==null?void 0:U.length)===0,loading:a(y).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",Rp,[e(ge,{square:"",flat:"",bordered:"",class:"col full-width"},{default:l(()=>[e(ae,null,{default:l(()=>[t("div",Op,[A[12]||(A[12]=v(" Pratinjau Pesan (Teks Biasa) ",-1)),e(I,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:C,disable:d.value.length===0},null,8,["disable"])]),e(se,{modelValue:d.value,"onUpdate:modelValue":A[7]||(A[7]=P=>d.value=P),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),B.value.length>0?(c(),O(ae,{key:0,class:"q-pt-none"},{default:l(()=>[A[14]||(A[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",Dp,[(c(!0),w(Q,null,je(B.value,P=>(c(),O(I,{key:P.id,label:`Kirim ke ${P.name}`,href:Y(P.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(a(y).products.length>0&&a(y).price_types.length>0)},{default:l(()=>[P.phone?k("",!0):(c(),O(Xt,{key:0},{default:l(()=>[...A[13]||(A[13]=[v(" Nomor telepon tidak tersedia ",-1)])]),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),A[15]||(A[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Up=Object.freeze(Object.defineProperty({__proto__:null,default:Ip},Symbol.toStringTag,{value:"Module"})),Ep={class:"q-gutter-sm"},Ap={class:"q-pa-xs"},jp={class:"col-12"},Np={class:"col-12"},Mp={class:"q-gutter-xs"},_l="Kirim Daftar Harga",Bp={__name:"SendPriceList2",setup(u){const n=ve(),d=q(""),o=X(()=>{var M;const R=new Map;return(M=n.props.products)==null||M.forEach(A=>{R.set(A.id,A)}),R}),i=X(()=>{var M;const R=new Map;return(M=n.props.customers)==null||M.forEach(A=>{R.set(A.id,A)}),R}),s=X(()=>{var R;return((R=n.props.customers)==null?void 0:R.map(M=>({value:M.id,label:M.name})))||[]}),g=X(()=>{var R;return((R=n.props.products)==null?void 0:R.map(M=>({value:M.id,label:`${M.name} (${M.sku||M.code||"ID: "+M.id})`})))||[]}),b=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],f=q(g.value),m=q(s.value),p=We({price_types:[],products:[],customers:[]});p.transform(R=>({...R,products:R.products.map(M=>M.value),customers:R.customers.map(M=>M.value)}));const y=R=>R?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(R):"Rp. 0",_=R=>{const M=b.find(A=>A.value===R);return M?M.label:R},x=X(()=>{if(p.products.length===0||p.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let R=`Daftar Harga Terbaru
`;return R+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,R+=`------------------------------

`,p.products.forEach(M=>{const A=o.value.get(M.value);A&&(R+=`*${A.name}*
`,p.price_types.forEach(V=>{const D=_(V),P=A[V],h=A.unit||"pcs";P!=null&&P!=0&&(R+=`- ${D}: ${y(P)} / ${h}
`)}),R+=`
`)}),R+=`------------------------------
`,R+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",R});He(x,R=>{d.value=R},{immediate:!0});const C=X(()=>p.customers.map(R=>i.value.get(R.value)).filter(R=>R&&R.phone_number)),$=R=>{const M=d.value;let A=R.startsWith("0")?"62"+R.substring(1):R;A=A.replace(/[^0-9]/g,"");const V=encodeURIComponent(M);return`https://wa.me/${A}?text=${V}`},B=(R,M)=>{if(R===""){M(()=>{f.value=g.value});return}M(()=>{const A=R.toLowerCase();f.value=g.value.filter(V=>V.label.toLowerCase().indexOf(A)>-1)})},Y=(R,M)=>{if(R===""){M(()=>{m.value=s.value});return}M(()=>{const A=R.toLowerCase();m.value=s.value.filter(V=>V.label.toLowerCase().indexOf(A)>-1)})},E=()=>{console.log("Scrolling to first error field...")},z=()=>{if(p.price_types.length===0||p.products.length===0||p.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}p.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{E()},onFinish:()=>{p.clearErrors()}})};return(R,M)=>{const A=Z("i-head"),V=Z("authenticated-layout");return c(),w(Q,null,[e(A,{title:_l}),e(V,{"show-drawer-button":!0},{title:l(()=>[v(r(_l))]),"left-button":l(()=>[t("div",Ep,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:M[0]||(M[0]=D=>R.$goBack())})])]),default:l(()=>[t("div",Ap,[e(Qe,{class:"row q-col-gutter-md",onSubmit:J(z,["prevent"]),onValidationError:E},{default:l(()=>[t("div",jp,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[M[8]||(M[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),M[9]||(M[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:a(p).products,"onUpdate:modelValue":M[1]||(M[1]=D=>a(p).products=D),options:f.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(p).errors.products,"error-message":a(p).errors.products,loading:a(p).processing,"use-input":"",onFilter:B,"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(L,{class:"text-grey"},{default:l(()=>[...M[6]||(M[6]=[v(" Tidak ada produk ditemukan ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:a(p).price_types,"onUpdate:modelValue":M[2]||(M[2]=D=>a(p).price_types=D),options:b,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!a(p).errors.price_types,"error-message":a(p).errors.price_types,loading:a(p).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:a(p).customers,"onUpdate:modelValue":M[3]||(M[3]=D=>a(p).customers=D),options:m.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(p).errors.customers,"error-message":a(p).errors.customers,loading:a(p).processing,"use-input":"",onFilter:Y,"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(L,{class:"text-grey"},{default:l(()=>[...M[7]||(M[7]=[v(" Tidak ada pelanggan ditemukan ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:a(p).processing||a(p).products.length===0||a(p).customers.length===0||a(p).price_types.length===0,loading:a(p).processing},null,8,["disable","loading"]),e(I,{icon:"cancel",label:"Batal",disable:a(p).processing,onClick:M[4]||(M[4]=D=>R.$goBack())},null,8,["disable"])]),_:1}),R.$page.props.flash.success?(c(),O(Yt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[v(r(R.$page.props.flash.success),1)]),_:1})):k("",!0),R.$page.props.flash.error?(c(),O(Yt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[v(r(R.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",Np,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[M[10]||(M[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(se,{modelValue:d.value,"onUpdate:modelValue":M[5]||(M[5]=D=>d.value=D),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),M[11]||(M[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),C.value.length>0?(c(),O(ae,{key:0},{default:l(()=>[M[13]||(M[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",Mp,[(c(!0),w(Q,null,je(C.value,D=>(c(),O(I,{key:D.id,label:`Kirim ke ${D.label}`,href:$(D.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:l(()=>[D.phone_number?k("",!0):(c(),O(Xt,{key:0},{default:l(()=>[...M[12]||(M[12]=[v(" Nomor telepon tidak tersedia ",-1)])]),_:1}))]),_:2},1032,["label","href"]))),128))]),M[14]||(M[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},zp=Object.freeze(Object.defineProperty({__proto__:null,default:Bp},Symbol.toStringTag,{value:"Module"})),Fp={class:"q-gutter-sm"},Lp={class:"col col-md-6 q-pa-xs"},kl="Tambah Retur Pembelian",Kp={__name:"Create",setup(u){const n=ve(),d=We({code:n.props.data.code}),o=()=>rt({form:d,url:route("admin.purchase-order-return.add")});return(i,s)=>{const g=Z("i-head"),b=Z("authenticated-layout");return c(),w(Q,null,[e(g,{title:kl}),e(b,null,{title:l(()=>[v(r(kl))]),"left-button":l(()=>[t("div",Fp,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=f=>i.$inertia.get(i.route("admin.finance-account.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Lp,[e(Qe,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(se,{autofocus:"",modelValue:a(d).code,"onUpdate:modelValue":s[1]||(s[1]=f=>a(d).code=f),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!a(d).errors.code,disable:a(d).processing,"error-message":a(d).errors.code,rules:[f=>f&&f.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:a(d).processing},null,8,["disable"]),e(I,{icon:"cancel",label:"Batal",disable:a(d).processing,onClick:s[2]||(s[2]=f=>a(ee).get(i.route("admin.purchase-order-return.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Hp=Object.freeze(Object.defineProperty({__proto__:null,default:Kp},Symbol.toStringTag,{value:"Module"})),Yp={class:"column"},Wp={class:"bg-grey-2 q-pa-xs"},Qp={class:"text-subtitle1 text-bold text-grey-10"},Jp={class:"text-caption text-grey-8"},Gp={class:"col-12 col-sm-6"},Xp={class:"full-width"},Zp={key:1},ef={key:0},tf={key:1},af={class:"col-12 col-sm-6",align:"left"},lf={class:"full-width"},of={class:"full-width",style:{"border-collapse":"collapse"}},nf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},sf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},rf={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},df={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},uf={key:0},mf={class:"col-12 col-sm-6"},cf={class:"text-body2 text-grey-7 text-italic"},pf={class:"col-12 col-sm-6"},ff={class:"row justify-end q-gutter-y-xs"},gf={class:"col-12 row justify-between"},bf={class:"text-subtitle2 text-bold"},_o={__name:"MainInfoTab",props:{data:Object},setup(u){const n=u;return(d,o)=>{const i=Z("i-link");return c(),w("div",Yp,[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",Wp,[t("div",Qp," RETUR #"+r(n.data.code),1),t("div",Jp,r(a(be)(n.data.datetime)),1)])]),_:1}),e(Ae),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",Gp,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",Xp,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.supplier?(c(),O(i,{key:0,href:d.route("admin.supplier.detail",{id:n.data.supplier_id})},{default:l(()=>[e(T,{class:"inline-icon",name:"person"}),v(" "+r(n.data.supplier_name)+" ("+r(n.data.supplier_code)+") ",1)]),_:1},8,["href"])):(c(),w("div",Zp,[e(T,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum ",-1))]))])]),n.data.supplier_phone?(c(),w("tr",ef,[t("td",null,[e(T,{class:"inline-icon",name:"phone"}),v(" "+r(n.data.supplier_phone),1)])])):k("",!0),n.data.supplier_address?(c(),w("tr",tf,[t("td",null,[e(T,{class:"inline-icon",name:"home_pin"}),v(" "+r(n.data.supplier_address),1)])])):k("",!0)])])]),t("div",af,[o[8]||(o[8]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",lf,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(be)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(n.data.status_label),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(n.data.refund_status_label),1)])])])])]),_:1}),e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",of,[o[10]||(o[10]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(c(!0),w(Q,null,je(n.data.details,s=>(c(),w("tr",{key:s.id},[t("td",nf,[e(i,{href:d.route("admin.product.detail",s.product_id)},{default:l(()=>[v(r(s.product_name),1)]),_:2},1032,["href"])]),t("td",sf,r(a(K)(s.price)),1),t("td",rf,r(s.quantity),1),t("td",df,r(a(K)(s.subtotal_price)),1)]))),128)),n.data.details.length==0?(c(),w("tr",uf,[...o[9]||(o[9]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)])])]),_:1}),e(Ae),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",mf,[o[11]||(o[11]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",cf,r(n.data.notes?n.data.notes:"-"),1)]),t("div",pf,[t("div",ff,[t("div",gf,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",bf,r(a(K)(n.data.grand_total)),1)])])])]),_:1})])}}},vf=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),yf={key:0,class:"text-center q-mb-md text-grey-8"},_f={class:"text-subtitle2 text-weight-medium"},kf={class:"text-h5 text-center text-primary q-pb-md"},wf={class:"text-center q-mt-md"},hf={key:0,class:"text-h6 text-negative text-weight-bold"},$f={key:1,class:"text-h6 text-positive text-weight-bold"},ko={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,i=ve(),s=q(!1),g=q({method:"transfer",amount:d.total,notes:null}),b=i.props.data.supplier,f=X(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(C=>({label:C.name,value:C.id}))]),m=X(()=>d.total-(g.value.amount||0)),p=X(()=>{const C=g.value.amount||0;return C<=0?"Jumlah pembayaran harus lebih dari 0.":C>d.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),y=X(()=>p.value===null),_=()=>{if(!y.value)return;s.value=!0;const C={id:g.value.method,amount:g.value.amount,notes:g.value.notes};o("accepted",C),s.value=!1},x=()=>{g.value.amount=d.total,g.value.method="cash",g.value.notes=null};return(C,$)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":$[4]||($[4]=B=>C.$emit("update:modelValue",B)),onBeforeShow:x},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...$[5]||($[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(b)?(c(),w("div",yf,[t("div",_f,[v(r(a(b).code)+" ",1),$[6]||($[6]=t("br",null,null,-1)),v(" "+r(a(b).name)+" ",1),$[7]||($[7]=t("br",null,null,-1))])])):k("",!0),t("div",kf," Total: Rp. "+r(a(K)(u.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":$[0]||($[0]=B=>g.value.method=B),options:f.value,label:"Kas Tujuan",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:s.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":$[1]||($[1]=B=>g.value.amount=B),label:"Jumlah Uang",outlined:!0,dense:"",disable:s.value,class:"q-mb-md",error:!y.value,"error-message":p.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:g.value.notes,"onUpdate:modelValue":$[2]||($[2]=B=>g.value.notes=B),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:s.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",wf,[m.value>0?(c(),w("div",hf," Sisa Refund: Rp. "+r(a(K)(m.value)),1)):(c(),w("div",$f," Refund Lunas "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(I,{flat:"",label:"Batal",color:"grey",onClick:$[3]||($[3]=B=>C.$emit("update:modelValue",!1))}),e(I,{label:"Bayar",color:"positive",onClick:_,disable:s.value||!y.value,loading:s.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},xf=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),Sf={class:"column"},Vf={class:"row"},qf={class:"full-width",style:{"border-collapse":"collapse"}},Cf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Tf={class:"row items-center q-gutter-x-sm"},Pf={class:"text-weight-bold"},Rf={class:"row items-center q-gutter-x-sm q-mt-xs"},Of={class:"text-caption text-grey-6"},Df={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},If={class:"text-caption text-grey-6"},Uf={class:"q-mt-xs"},Ef={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Af={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},jf={key:0},Nf={class:"text-right q-pa-sm"},Mf={class:"text-right q-pa-sm"},wo={__name:"RefundTab",props:{data:Object},setup(u){const n=u,d=Se(),o=q(!1),i=()=>{o.value=!0},s=X(()=>n.data.grand_total-n.data.total_refunded),g=async f=>{const m={order_id:n.data.id,...f};d.loading.show({message:"Memproses pembayaran..."});try{const p=await Oe.post(route("admin.purchase-order-return.add-refund"),m);d.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.purchase-order-return.detail",{id:n.data.id})+"?tab=refund")}catch(p){let y="Gagal memproses refund.";p.response&&p.response.data&&p.response.data.message?y=p.response.data.message:p.message&&(y=p.message),d.notify({message:y,color:"negative",icon:"error"})}finally{d.loading.hide()}},b=f=>{d.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{d.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.purchase-order-return.delete-refund",{id:f.id})),d.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.purchase-order-return.detail",{id:n.data.id})+"?tab=refund")}catch(m){let p="Gagal menghapus refund pembayaran.";m.response&&m.response.data&&m.response.data.message?p=m.response.data.message:m.message&&(p=m.message),d.notify({message:p,color:"negative",icon:"error"})}finally{d.loading.hide()}})};return(f,m)=>(c(),w(Q,null,[t("div",Sf,[e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("div",Vf,[f.$can("admin.purchase-order-return.add-refund")&&n.data.remaining_refund>0?(c(),O(I,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=J(p=>i(),["stop"]))})):k("",!0)]),t("table",qf,[m[7]||(m[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(c(!0),w(Q,null,je(n.data.refunds,p=>(c(),w("tr",{key:p.id},[t("td",Cf,[t("div",Tf,[e(T,{name:"tag",size:"xs",color:"grey-7"}),t("span",Pf,r(p.code),1)]),t("div",Rf,[e(T,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Of,r(a(be)(p.created_at)),1)]),(p.type==="transfer"||p.type==="cash")&&p.account?(c(),w("div",Df,[e(T,{name:"wallet",size:"xs",color:"grey-7"}),t("span",If,r(p.account.name),1)])):k("",!0),t("div",Uf,[e(vt,{label:f.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[p.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Ef,r(a(K)(p.amount)),1),t("td",Af,[f.$can("admin.purchase-order-return.delete-refund")?(c(),O(I,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(p)},null,8,["onClick"])):k("",!0)])]))),128)),n.data.refunds.length==0?(c(),w("tr",jf,[...m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Direfund",-1)),t("th",Nf,r(a(K)(n.data.total_refunded)),1),m[4]||(m[4]=t("th",null,null,-1))]),t("tr",null,[m[5]||(m[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Refund",-1)),t("th",Mf,r(a(K)(n.data.remaining_refund)),1),m[6]||(m[6]=t("td",null,null,-1))])])])]),_:1})]),e(ko,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=p=>o.value=p),total:s.value,supplier:n.data.supplier,onAccepted:g},null,8,["modelValue","total","supplier"])],64))}},Bf=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),zf={class:"q-gutter-sm"},Ff={class:"col col-lg-6 q-pa-xs",align:"center"},wl="Retur Pembelian",Lf={__name:"Detail",setup(u){const n=new URLSearchParams(window.location.search),d=ve(),o=d.props.data,i=q(n.get("preview")||!1),g=q(n.get("tab")||"main-info");$e(()=>{gt(()=>{const f=n.get("print_size");f&&b(f)})});const b=f=>{window.open(route("admin.purchase-order-return.print",{id:d.props.data.id,size:f}),"_self")};return(f,m)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),w(Q,null,[e(p,{title:wl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(wl))])]),"left-button":l(()=>[t("div",zf,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>f.$goBack())})])]),"right-button":l(()=>[e(I,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=_=>b("58mm"))}),e(I,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=_=>b("a4"))}),i.value?k("",!0):(c(),O(I,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=_=>a(ee).get(f.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Ff,[e(ge,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Ct,{modelValue:g.value,"onUpdate:modelValue":m[4]||(m[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(c(),O(ot,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Tt,{modelValue:g.value,"onUpdate:modelValue":m[5]||(m[5]=_=>g.value=_),animated:""},{default:l(()=>[e(nt,{name:"main-info",class:"q-pa-none"},{default:l(()=>[e(_o,{data:a(o)},null,8,["data"])]),_:1}),e(nt,{name:"refund",class:"q-pa-none"},{default:l(()=>[e(wo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Kf=Object.freeze(Object.defineProperty({__proto__:null,default:Lf},Symbol.toStringTag,{value:"Module"})),Hf={class:"text-weight-medium wrap-column"},Yf={class:"text-caption text-grey-6 elipsis"},Wf={class:"column items-end"},Qf={class:"text-caption text-grey-6 text-italic"},ho={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(u){const n=Se(),d=at(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,s)=>(c(),O(Ie,{dense:"",rows:u.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ke({height:a(d)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(c(!0),w(Q,null,je(g.cols,b=>(c(),O(Gt,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left"},{default:l(()=>[t("div",Hf,r(g.row.product_name),1),t("div",Yf,r(g.row.product_barcode),1),g.row.notes?(c(),O(he,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal",props:g,class:"text-right"},{default:l(()=>[t("div",Wf,[t("div",null,r(a(K)(g.row.subtotal_cost)),1),t("div",Qf,r(a(K)(g.row.quantity))+" x Rp. "+r(a(K)(g.row.cost)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(I,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:u.isProcessing},null,8,["onClick","disable"]),e(I,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:u.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Jf=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),Gf={class:"row items-center no-wrap"},Xf={class:"col-auto"},$o={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,i=d,s=()=>{i("save")},g=X(()=>o.item.quantity*o.item.cost),b=y=>{y.stopPropagation(),y.preventDefault()},f=y=>{o.modelValue&&(y.key==="Enter"?(s(),b(y)):y.key==="Escape"&&(i("update:modelValue",!1),b(y)))};$e(()=>{window.addEventListener("keydown",f)}),wt(()=>{window.removeEventListener("keydown",f)}),n({getCurrentItem:()=>o.item});const p=()=>{};return(y,_)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":_[6]||(_[6]=x=>y.$emit("update:modelValue",x)),onBeforeShow:p},{default:l(()=>[e(ge,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",Gf,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Xf,[e(I,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=x=>y.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(se,{modelValue:u.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=x=>u.item.product_name=x),label:"Produk","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=x=>u.item.quantity=x),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.cost,"onUpdate:modelValue":_[3]||(_[3]=x=>u.item.cost=x),label:"Modal / Harga Beli","hide-bottom-space":"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=x=>g.value=x),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:u.item.notes,"onUpdate:modelValue":_[5]||(_[5]=x=>u.item.notes=x),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:l(()=>[le(e(I,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[pe]]),le(e(I,{flat:"",label:"Simpan",color:"primary",onClick:s,disable:u.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Zf=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"}));function eg(){const u=q(new Date);let n=null;const d=()=>{u.value=new Date};return $e(()=>{n=setInterval(d,1e3)}),wt(()=>{n&&clearInterval(n)}),{currentDateTime:u}}const tg={class:"text-grey-8"},ba={__name:"DigitalClock",setup(u){const{currentDateTime:n}=eg();return(d,o)=>(c(),w("div",tg,r(a(be)(a(n))),1))}},ag={key:0,class:"q-select__selected-item"},xo={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(u,{expose:n,emit:d}){const o=q(null),i=u,s=d,g=q([]);let b=null;const f=q(i.modelValue);$e(()=>{i.initialData&&(f.value=i.initialData)}),He(f,y=>{s("update:modelValue",y),s("supplierSelected",y)}),He(()=>i.modelValue,y=>{f.value=y}),n({focus:()=>{o.value&&o.value.focus()}});const p=(y,_)=>{if(y.length<i.minLength){_(()=>{g.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Oe.get(`/web-api/suppliers?q=${y}`).then(x=>{_(()=>{g.value=x.data.data})}).catch(x=>{console.error("Gagal mengambil data pemasok:",x),_(()=>{g.value=[]})})},100)};return(y,_)=>(c(),O(ce,{class:qe(u.class),ref_key:"qSelectRef",ref:o,modelValue:f.value,"onUpdate:modelValue":_[0]||(_[0]=x=>f.value=x),"use-input":"","input-debounce":"0",label:u.label,options:g.value,onFilter:p,clearable:"",error:u.error,behavior:"menu","error-message":u.errorMessage,disable:u.disable,"hide-bottom-space":"",outlined:u.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(x=>[e(oe,Gl(Xl(x.itemProps)),{default:l(()=>[e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[v(r(x.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(x=>[x.opt?(c(),w("div",ag,r(x.opt.name),1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},lg={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(u,{emit:n}){return(d,o)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>d.$emit("update:modelValue",i))},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])]),_:1}),e(ae,null,{default:l(()=>[...o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])]),_:1}),e(tt,{align:"center"},{default:l(()=>[le(e(I,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},So=_t(lg,[["__scopeId","data-v-abc5074e"]]),og=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"}));function va(u){const n=q(!1),d=()=>{const s=u.value||document.documentElement;s.requestFullscreen?s.requestFullscreen():s.webkitRequestFullscreen?s.webkitRequestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.msRequestFullscreen&&s.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},i=()=>{n.value?o():d()};return Yn(()=>{const s=()=>{n.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",s),document.addEventListener("webkitfullscreenchange",s),document.addEventListener("mozfullscreenchange",s),document.addEventListener("MSFullscreenChange",s),()=>{document.removeEventListener("fullscreenchange",s),document.removeEventListener("webkitfullscreenchange",s),document.removeEventListener("mozfullscreenchange",s),document.removeEventListener("MSFullscreenChange",s)}}),{isFullscreen:n,requestFullscreen:d,exitFullscreen:o,toggleFullscreen:i}}const ng={class:"row items-center no-wrap"},sg={class:"col text-subtite text-bold text-grey-8"},rg={class:"col-auto"},Vo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,i=d,s=()=>{i("save")},g=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(s(),g(m)):m.key==="Escape"&&(i("update:modelValue",!1),g(m)))};return $e(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),n({getCurrentItem:()=>o.item}),(m,p)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":p[4]||(p[4]=y=>m.$emit("update:modelValue",y))},{default:l(()=>[e(ge,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",ng,[t("div",sg," Edit "+r(u.data.code),1),t("div",rg,[e(I,{flat:"",size:"sm",round:"",icon:"close",onClick:p[0]||(p[0]=y=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(zt,{modelValue:u.data.datetime,"onUpdate:modelValue":p[1]||(p[1]=y=>u.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:u.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status],"onUpdate:modelValue":p[2]||(p[2]=y=>m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:u.data.notes,"onUpdate:modelValue":p[3]||(p[3]=y=>u.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:l(()=>[le(e(I,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[pe]]),le(e(I,{flat:"",label:"Simpan",color:"primary",onClick:s,disable:u.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ig=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),dg={class:"row items-center no-wrap"},ug={class:"col-auto"},mg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},cg={key:0},ya={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1},priceType:{type:String,require:!1,default:"price_1"}},emits:["update:modelValue","product-selected"],setup(u,{emit:n}){const d=Se(),o=u,i=q(!1),s=q(o.showCost),g=n,b=q(null),f=q([]),m=q(!0),p=q(-1),y=De({search:"",status:"active",...Ne()}),_=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});[...Ze(window.CONSTANTS.PRODUCT_PRICE_TYPES)];const x=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_1.replace("Harga ","H "),field:"price_1",align:"right"},{name:"price_2",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_2.replace("Harga ","H "),field:"price_2",align:"right"},{name:"price_3",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_3.replace("Harga ","H "),field:"price_3",align:"right"}],C=X(()=>{if(i.value)return x;const R=x.filter(M=>M.name!=="cost");return d.screen.gt.sm?R:R.filter(M=>M.name==="name"||M.name==="stock")});$e(()=>{$()});const $=()=>{o.modelValue!==!1&&B()},B=(R=null)=>{m.value=!0,p.value=-1,Me({pagination:_,filter:y,props:R,rows:f,url:route("admin.product.data"),loading:m,tableRef:b})},Y=()=>{$()},E=R=>{g("product-selected",R),setTimeout(()=>{g("update:modelValue",!1)},100)},z=R=>{if(!o.modelValue)return;const M=f.value.length;M!==0&&(R.key==="ArrowDown"?(R.preventDefault(),p.value=(p.value+1)%M):R.key==="ArrowUp"?(R.preventDefault(),p.value=(p.value-1+M)%M):R.key==="Enter"&&p.value!==-1&&(R.preventDefault(),E(f.value[p.value])))};return He(()=>o.modelValue,(R,M)=>{M===!0&&R===!1&&(y.search=""),R===!0&&B()}),(R,M)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":M[4]||(M[4]=A=>R.$emit("update:modelValue",A)),maximized:a(d).screen.lt.sm},{default:l(()=>[e(ge,{class:"column fit",tabindex:"0",onKeydown:z,ref:"cardRef"},{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",dg,[M[5]||(M[5]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",ug,[e(I,{flat:"",round:"",size:"sm",icon:"close",onClick:M[0]||(M[0]=A=>R.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:qe(["q-py-sm",a(d).screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(se,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":[M[1]||(M[1]=A=>y.search=A),Y],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"]),s.value?(c(),O(oa,{key:0,modelValue:i.value,"onUpdate:modelValue":M[2]||(M[2]=A=>i.value=A),label:"Tampilkan Modal",style:{"margin-left":"-10px"}},null,8,["modelValue"])):k("",!0)]),_:1},8,["class"]),e(ae,{class:qe(["q-py-xs col",a(d).screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(Ie,{ref_key:"tableRef",ref:b,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":M[3]||(M[3]=A=>_.value=A),filter:y.search,loading:m.value,columns:C.value,rows:f.value,"rows-per-page-options":[10,25,50],onRequest:B,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":l(({icon:A,message:V,filter:D})=>[t("div",mg,[t("span",null,r(V),1)])]),body:l(A=>[e(Pe,{tabindex:"0",props:A,class:qe([{inactive:["stocked","raw_materials"].includes(A.row.type)&&A.row.stock==0,"selected-row":p.value===A.rowIndex},"cursor-pointer"]),onClick:V=>E(A.row),onKeydown:[Ht(J(V=>E(A.row),["prevent","stop"]),["enter"]),Ht(J(V=>E(A.row),["prevent"]),["space"])]},{default:l(()=>[e(W,{key:"name",props:A,class:"wrap-column"},{default:l(()=>[e(he,{text:A.row.name},null,8,["text"]),A.row.description?(c(),O(he,{key:0,text:A.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),a(d).screen.lt.md?(c(),w(Q,{key:1},[t("div",null," Stok: "+r(A.row.type=="stocked"?a(K)(A.row.stock)+" "+A.row.uom:"-"),1),i.value?(c(),w("div",cg," Modal: Rp. "+r(a(K)(A.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+r(a(K)(A.row.price_1)),1),t("div",null,"Harga 2: Rp. "+r(a(K)(A.row.price_1)),1),t("div",null,"Harga 3: Rp. "+r(a(K)(A.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"stock",props:A,class:"text-right"},{default:l(()=>[v(r(A.row.type=="stocked"?a(K)(A.row.stock)+" "+A.row.uom:"-"),1)]),_:2},1032,["props"]),e(W,{key:"cost",props:A,class:"wrap-column text-right"},{default:l(()=>[v(r(a(K)(A.row.cost)),1)]),_:2},1032,["props"]),e(W,{key:"price_1",props:A,class:"wrap-column text-right"},{default:l(()=>[v(r(a(K)(A.row.price_1)),1)]),_:2},1032,["props"]),e(W,{key:"price_2",props:A,class:"wrap-column text-right"},{default:l(()=>[v(r(a(K)(A.row.price_2)),1)]),_:2},1032,["props"]),e(W,{key:"price_3",props:A,class:"wrap-column text-right"},{default:l(()=>[v(r(a(K)(A.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},pg={class:"q-gutter-sm"},fg={class:"row items-center"},gg={class:"text-weight-bold"},bg={class:"row q-col-gutter-none full-width"},vg={class:"col-sm-6 col-12 col"},yg={class:"row full-width"},_g={key:0,class:"row"},kg={class:"col-sm-6 col-12"},wg={class:"row q-ml-sm items-end"},hg={class:"row col grow"},$g={class:"col-12 q-pa-sm column"},xg={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},Sg={key:0,class:"col"},Vg={class:"text-caption text-grey-6 q-mt-xs"},qg={key:0,class:"text-caption text-grey-8 q-mt-xs"},Cg={class:"text-italic"},Tg={key:1,class:"col"},Pg={class:"q-pa-sm q-pb-none text-grey-8"},Rg={class:"col"},Og={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Dg={class:"text-h4 text-weight-bold"},Ig={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Ug={class:"col q-py-sm"},Eg={class:"q-py-sm"},Ag={__name:"Editor",setup(u){const n=Se(),d=ve(),o=q(!0),i=q(null),s=q(null),g=q(null),b=q(!1),f=q(null),m=q(null),{isFullscreen:p,toggleFullscreen:y}=va(m),_="Retur #"+d.props.data.code,x=q(d.props.data.supplier),C=q(""),$=q(!1),B=q(!1),Y=q(!1),E=q(!1),z=q(null),R=De({id:d.props.data.id,code:d.props.data.code,supplier_id:d.props.data.supplier_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),M=X(()=>R.items.reduce((de,F)=>de+F.price*F.quantity,0)),A=()=>{var de;y(),p.value||(de=f==null?void 0:f.value)==null||de.hideDrawer()},V=de=>isNaN(de)||de<=0?(ft("Kuantitas tidak valid.","top"),!1):!0,D=de=>isNaN(de)||de<0?(ft("Harga tidak valid.","top"),!1):!0,P=de=>!de||de.length==0?(ft("Barcode tidak valid.","top"),!1):!0,h=de=>{C.value.endsWith("*")?C.value+=de.name:C.value=de.name},U=async()=>{const de=C.value.trim();if(de.length===0){B.value=!0;return}const F=de.split("*");let _e=1,re="",H=null;if(F.length===1)re=F[0];else if(F.length<=3)_e=parseInt(F[0]),re=F[1],F.length===3&&(H=parseFloat(F[2]));else{ft("Input tidak valid.","top");return}if(re.length===0){B.value=!0;return}!P(re)&&!V(_e)&&!D(H)||($.value=!0,await Oe.post(route("admin.purchase-order-return.add-item"),{order_id:R.id,product_code:re,qty:_e,price:H,merge:o.value}).then(ne=>{const G=ne.data.data.item;let fe=-1;ne.data.data.mergeItem&&(fe=R.items.findIndex(Ce=>Ce.id===G.id)),fe===-1?R.items.push(G):R.items[fe]=G,C.value="",H!==null&&H!==parseFloat(G.price)&&ft("Harga tidak dapat diubah!","top")}).catch(ne=>{var G,fe;ct((fe=(G=ne.response)==null?void 0:G.data)==null?void 0:fe.message,"top"),console.error("Gagal mengambil data produk:",ne)}),$.value=!1,gt(()=>{var ne;(ne=i.value)==null||ne.focus()}))},N=de=>{z.value=Object.create(de),Y.value=!0},S=de=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${de.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{$.value=!0,Oe.post(route("admin.purchase-order-return.remove-item"),{id:de.id}).then(()=>{const F=R.items.findIndex(_e=>_e.id===de.id);F!==-1&&(R.items.splice(F,1)[0],pt("Item telah dihapus","top"))}).catch(F=>{var _e,re;ct(((re=(_e=F==null?void 0:F.response)==null?void 0:_e.data)==null?void 0:re.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(F)}).finally(()=>{$.value=!1})})},j=()=>{$.value=!0;const de=s.value.getCurrentItem(),F={id:de.id,qty:de.quantity,cost:de.cost};de.notes&&(F.notes=de.notes),Oe.post(route("admin.purchase-order-return.update-item"),F).then(_e=>{const re=_e.data.data,H=R.items.findIndex(ne=>ne.id===re.id);H!==-1&&(R.items[H]=re,pt("Item telah diperbarui","top")),Y.value=!1}).catch(_e=>{var re,H;ct(((H=(re=_e==null?void 0:_e.response)==null?void 0:re.data)==null?void 0:H.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(_e)}).finally(()=>{$.value=!1})};$e(()=>{const de=F=>{b.value||Y.value||B.value||E.value||(F.key==="F1"?(F.preventDefault(),b.value=!0):F.key==="F2"?(F.preventDefault(),g.value.focus()):F.key==="F3"?(F.preventDefault(),i.value.focus()):F.key==="F4"?(F.preventDefault(),o.value=!o.value):F.key==="F10"||F.ctrlKey&&F.key==="Enter"?(F.preventDefault(),ie()):F.key==="F11"?(F.preventDefault(),A()):(F.key==="F5"||F.key==="F6"||F.key==="F7"||F.key==="F12")&&F.preventDefault())};document.addEventListener("keydown",de),wt(()=>{document.removeEventListener("keydown",de)}),gt(()=>{var F;(F=f==null?void 0:f.value)==null||F.hideDrawer()})});const te=async()=>{$.value=!0;const de={id:R.id,supplier_id:R.supplier_id??null,datetime:Jt(R.datetime),notes:R.notes};await Oe.post(route("admin.purchase-order-return.update"),de).then(F=>{const _e=F.data.data.id;R.supplier_id=_e.supplier_id}).catch(F=>{var _e,re;ct(((re=(_e=F==null?void 0:F.response)==null?void 0:_e.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(F)}).finally(()=>{$.value=!1})},ie=de=>{if(R.items.length===0){pt("Item masih kosong","top");return}ht.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${R.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{$.value=!0,Oe.post(route("admin.purchase-order-return.close",{id:R.id})).then(F=>{pt("Transaksi selesai"),ee.get(route("admin.purchase-order-return.detail",{id:R.id}))}).catch(F=>{var _e,re;ct((re=(_e=F.response)==null?void 0:_e.data)==null?void 0:re.message),console.error(F)}).finally(()=>{$.value=!1})})},me=()=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${R.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order-return.cancel",{id:R.id}),{id:R.id}).then(()=>{pt("Transaksi telah dibatalkan."),ee.visit(route("admin.purchase-order-return.detail",{id:R.id}))}).catch(de=>{var _e,re;const F=((re=(_e=de.response)==null?void 0:_e.data)==null?void 0:re.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:F,color:"warning",position:"bottom"}),console.error(de)})})},Re=()=>{window.open(route("admin.purchase-order-return.detail",{id:R.id})+"?preview=1","_blank")},Be=X(()=>x.value?x.value.wallet_balance>=M.value:!0);return(de,F)=>{const _e=Z("i-head"),re=Z("authenticated-layout");return c(),w(Q,null,[e(_e,{title:_}),e(re,{ref_key:"authLayoutRef",ref:f,"show-drawer-button":!0},{title:l(()=>[v(r(_))]),"left-button":l(()=>[t("div",pg,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:F[0]||(F[0]=H=>a(ee).get(de.route("admin.purchase-order-return.index")))})])]),"right-button":l(()=>[t("div",fg,[a(n).screen.gt.sm?(c(),w(Q,{key:0},[t("div",gg,r(a(d).props.auth.user.username),1),F[20]||(F[20]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ba)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(ge,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",bg,[t("div",vg,[t("div",yg,[e(xo,{ref_key:"supplierAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:x.value,"onUpdate:modelValue":F[2]||(F[2]=H=>x.value=H),label:"Pemasok",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),x.value?(c(),w("div",_g,[t("div",{class:qe(["q-mt-xs q-ml-sm text-bold",Be.value?"text-green":"text-red"])}," Wallet: "+r(x.value?"Rp. "+a(K)(x.value?x.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:qe(["q-mt-xs q-ml-sm text-bold",x.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(x.value?"Rp. "+a(K)(x.value?x.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",kg,[e(se,{ref_key:"userInputRef",ref:i,modelValue:C.value,"onUpdate:modelValue":F[5]||(F[5]=H=>C.value=H),onKeyup:F[6]||(F[6]=Ht(J(H=>U(),["prevent"]),["enter"])),loading:$.value,disable:$.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(T,{name:"search",onClick:F[3]||(F[3]=H=>B.value=!0),class:"cursor-pointer"})]),append:l(()=>{var H;return[((H=C.value)==null?void 0:H.length)>0?(c(),O(T,{key:0,name:"send",onClick:F[4]||(F[4]=ne=>U()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",wg,[e(xt,{class:"col",modelValue:o.value,"onUpdate:modelValue":F[7]||(F[7]=H=>o.value=H),label:"Gabungkan item",disable:$.value},null,8,["modelValue","disable"])])])]),t("div",hg,[t("div",$g,[e(ho,{items:R.items,onUpdateQuantity:F[8]||(F[8]=({id:H,value:ne})=>de.updateQuantity(H,ne)),onRemoveItem:S,onEditItem:N,"is-processing":$.value},null,8,["items","is-processing"])])]),t("div",xg,[a(n).screen.gt.sm?(c(),w("div",Sg,[t("div",Vg,r(R.items.length)+" item(s) ",1),R.notes?(c(),w("div",qg,[F[21]||(F[21]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Cg,[e(he,{text:R.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(n).screen.gt.sm?(c(),w("div",Tg,[t("div",Pg,[t("div",null,"Return #: "+r(R.code),1),t("div",null,"Order #: "+r(a(d).props.data.purchase_order.code),1),t("div",null,r(a(be)(R.datetime)),1)])])):k("",!0),t("div",Rg,[t("div",Og,[F[23]||(F[23]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Dg,[F[22]||(F[22]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(K)(M.value)),1)])])])]),t("div",Ig,[t("div",Ug,[e(I,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:F[9]||(F[9]=H=>ie()),disable:!de.$can("admin.purchase-order-return.close")||$.value||R.items.length===0||R.status!=="draft",loading:$.value},null,8,["disable","loading"])]),t("div",Eg,[e(I,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:F[13]||(F[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[le((c(),O(oe,{clickable:"",onClick:F[10]||(F[10]=J(H=>E.value=!0,["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...F[24]||(F[24]=[v("Edit Rincian",-1)])]),_:1})]),_:1})),[[ue],[pe]]),le((c(),O(oe,{clickable:"",onClick:F[11]||(F[11]=J(H=>Re(),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"preview"})]),_:1}),e(L,null,{default:l(()=>[...F[25]||(F[25]=[v("Pratinjau",-1)])]),_:1})]),_:1})),[[ue],[pe]]),le((c(),O(oe,{clickable:"",onClick:F[12]||(F[12]=J(H=>me(),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"cancel",color:"negative"})]),_:1}),e(L,{class:"text-negative"},{default:l(()=>[...F[26]||(F[26]=[v(" Batalkan ",-1)])]),_:1})]),_:1})),[[ue],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e($o,{ref_key:"itemEditorRef",ref:s,modelValue:Y.value,"onUpdate:modelValue":F[14]||(F[14]=H=>Y.value=H),item:z.value,onSave:F[15]||(F[15]=H=>j()),"is-processing":$.value},null,8,["modelValue","item","is-processing"]),e(ya,{modelValue:B.value,"onUpdate:modelValue":F[16]||(F[16]=H=>B.value=H),onProductSelected:h},null,8,["modelValue"]),e(Vo,{modelValue:E.value,"onUpdate:modelValue":F[17]||(F[17]=H=>E.value=H),data:R,onSave:F[18]||(F[18]=H=>te()),"is-processing":$.value},null,8,["modelValue","data","is-processing"]),e(So,{modelValue:b.value,"onUpdate:modelValue":F[19]||(F[19]=H=>b.value=H)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},jg=Object.freeze(Object.defineProperty({__proto__:null,default:Ag},Symbol.toStringTag,{value:"Module"})),Ng={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Mg={class:"q-pa-xs"},Bg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zg={key:0},Fg={key:1},Lg={key:2},Kg={key:3},Hg={key:0},Yg={key:0},Wg={key:1},Qg={class:"flex justify-end"},hl="Retur Pembelian",Jg={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=Mt(),m=Bt(),p=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...Vt(f-2,f-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...qt()],_=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES)],x=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES)],C=De({search:"",year:f,month:m,status:"all",refund_status:"all",...Ne()}),$=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),B=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{A()});const Y=P=>{if(P.status=="draft"){E(P);return}z(P)},E=P=>{ee.get(route("admin.purchase-order-return.edit",P.id))},z=P=>{ee.get(route("admin.purchase-order-return.detail",P.id))},R=P=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order-return.cancel",{id:P.id}),{id:P.id}).then(h=>{const U=h.data.data,N=o.value.findIndex(S=>S.id===U.id);if(N===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[N].status="canceled",n.notify({message:h.data.message,position:"bottom"})}).catch(h=>{var N,S;const U=((S=(N=h.response)==null?void 0:N.data)==null?void 0:S.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:U,color:"warning",position:"bottom"}),console.error(h)})})},M=P=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.purchase-order-return.delete",P.id),fetchItemsCallback:A,loading:i}),A=(P=null)=>{Me({pagination:$,filter:C,props:P,rows:o,url:route("admin.purchase-order-return.data"),loading:i,tableRef:s})},V=()=>{A()},D=X(()=>n.screen.gt.sm?B:B.filter(P=>P.name==="id"||P.name==="action"));return He(()=>C.year,P=>{P===null&&(C.month=null)}),(P,h)=>{const U=Z("i-head"),N=Z("authenticated-layout");return c(),w(Q,null,[e(U,{title:hl}),e(N,null,Je({title:l(()=>[v(r(hl))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=S=>d.value=!d.value)},null,8,["icon"]),P.$can("admin.purchase-order-return.edit")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=S=>a(ee).get(P.route("admin.purchase-order-return.add")))})):k("",!0)]),default:l(()=>[t("div",Mg,[e(Ie,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:$.value,"onUpdate:pagination":h[10]||(h[10]=S=>$.value=S),filter:C.search,loading:i.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:A,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:j,filter:te})=>[t("div",Bg,[t("span",null,r(j)+" "+r(te?" with term "+te:""),1)])]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:J(j=>Y(S.row),["prevent"])},{default:l(()=>[e(W,{key:"code",props:S,class:"wrap-column"},{default:l(()=>{var j,te,ie;return[t("div",null,[e(T,{name:"tag"}),v(" "+r(S.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(r(a(be)(S.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[S.row.cashier?(c(),w("div",zg,[e(T,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((j=S.row.cashier)==null?void 0:j.username),1)])):k("",!0),S.row.cashier_session?(c(),w("div",Fg,[e(T,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((ie=(te=S.row.cashier_session)==null?void 0:te.cashier_terminal)==null?void 0:ie.name),1)])):k("",!0),S.row.supplier?(c(),w("div",Lg,[e(T,{name:"person",class:"inline-icon"}),e(fa,{href:P.route("admin.supplier.detail",{id:S.row.supplier.id}),onClick:h[7]||(h[7]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(S.row.supplier.code)+" - "+r(S.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(K)(S.row.grand_total)),1),S.row.notes?(c(),w("div",Kg,[e(T,{name:"notes"}),v(" "+r(S.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Nt,{status:S.row.status,statuses:P.$CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Nt,{status:S.row.refund_status,statuses:P.$CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(W,{key:"supplier_id",props:S},{default:l(()=>[S.row.supplier?(c(),w("div",Hg,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(S.row.supplier_code)+" - "+r(S.row.supplier_name),1)]),S.row.supplier_phone?(c(),w("div",Yg,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(S.row.supplier_phone),1)])):k("",!0),S.row.supplier_address?(c(),w("div",Wg,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(S.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:S},{default:l(()=>[v(r(a(K)(S.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:S},{default:l(()=>[e(he,{text:S.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:S,onClick:h[9]||(h[9]=J(()=>{},["stop"]))},{default:l(()=>[t("div",Qg,[P.$can("admin.purchase-order-return.detail")||P.$can("admin.purchase-order-return.edit")||P.$can("admin.purchase-order-return.cancel")||P.$can("admin.purchase-order-return.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[8]||(h[8]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[S.row.status!="draft"&&P.$can("admin.purchase-order-return.detail")?le((c(),O(oe,{key:0,onClick:J(j=>z(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"visibility"})]),_:1}),e(L,null,{default:l(()=>[...h[11]||(h[11]=[v(" Lihat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),S.row.status=="draft"&&P.$can("admin.purchase-order-return.edit")?le((c(),O(oe,{key:1,onClick:J(j=>E(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...h[12]||(h[12]=[v(" Edit ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),S.row.status=="draft"&&P.$can("admin.purchase-order-return.cancel")?le((c(),O(oe,{key:2,onClick:J(j=>R(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"cancel"})]),_:1}),e(L,null,{default:l(()=>[...h[13]||(h[13]=[v(" Batalkan ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),e(Ae),P.$can("admin.purchase-order-return.delete")?le((c(),O(oe,{key:3,onClick:J(j=>M(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...h[14]||(h[14]=[v(" Hapus ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Ng,[e(ce,{modelValue:C.year,"onUpdate:modelValue":[h[2]||(h[2]=S=>C.year=S),V],options:p,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),C.year!="all"?(c(),O(ce,{key:0,modelValue:C.month,"onUpdate:modelValue":[h[3]||(h[3]=S=>C.month=S),V],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:C.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:C.status,"onUpdate:modelValue":[h[4]||(h[4]=S=>C.status=S),V],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:C.refund_status,"onUpdate:modelValue":[h[5]||(h[5]=S=>C.refund_status=S),V],options:x,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:C.search,"onUpdate:modelValue":h[6]||(h[6]=S=>C.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Gg=Object.freeze(Object.defineProperty({__proto__:null,default:Jg},Symbol.toStringTag,{value:"Module"})),_a=St({name:"QBtnToggle",props:{...Wl,modelValue:{required:!0},options:{type:Array,required:!0,validator:u=>u.every(n=>("label"in n||"icon"in n||"slot"in n)&&"value"in n)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(u,{slots:n,emit:d}){const o=X(()=>u.options.find(_=>_.value===u.modelValue)!==void 0),i=X(()=>({type:"hidden",name:u.name,value:u.modelValue})),s=Jn(i),g=X(()=>Wn(u)),b=X(()=>({rounded:u.rounded,dense:u.dense,...g.value})),f=X(()=>u.options.map((_,x)=>{const{attrs:C,value:$,slot:B,...Y}=_;return{slot:B,props:{key:x,"aria-pressed":$===u.modelValue?"true":"false",...C,...Y,...b.value,disable:u.disable===!0||Y.disable===!0,color:$===u.modelValue?p(Y,"toggleColor"):p(Y,"color"),textColor:$===u.modelValue?p(Y,"toggleTextColor"):p(Y,"textColor"),noCaps:p(Y,"noCaps")===!0,noWrap:p(Y,"noWrap")===!0,size:p(Y,"size"),padding:p(Y,"padding"),ripple:p(Y,"ripple"),stack:p(Y,"stack")===!0,stretch:p(Y,"stretch")===!0,onClick(E){m($,_,E)}}}}));function m(_,x,C){u.readonly!==!0&&(u.modelValue===_?u.clearable===!0&&(d("update:modelValue",null,null),d("clear")):d("update:modelValue",_,x),d("click",C))}function p(_,x){return _[x]===void 0?u[x]:_[x]}function y(){const _=f.value.map(x=>Ve(I,x.props,x.slot!==void 0?n[x.slot]:void 0));return u.name!==void 0&&u.disable!==!0&&o.value===!0&&s(_,"push"),Hl(n.default,_)}return()=>Ve(Qn,{class:"q-btn-toggle",...g.value,rounded:u.rounded,stretch:u.stretch,glossy:u.glossy,spread:u.spread},y)}}),Xg={key:0,class:"text-center q-mb-md text-grey-8"},Zg={class:"text-subtitle2 text-weight-medium"},e1={class:"text-h5 text-center text-primary q-pb-md"},t1={class:"q-mb-md flex flex-center"},a1={key:1},l1={class:"col-6"},o1={class:"col-6"},n1={class:"row"},s1={class:"text-center q-mt-md"},r1={key:0,class:"text-h6 text-negative text-weight-bold"},i1={key:1,class:"text-h6 text-green-8 text-weight-bold"},d1={key:2,class:"text-h6 text-positive text-weight-bold"},u1={key:2},m1={class:"text-h6 text-negative text-center"},c1={key:3},p1={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,i=ve(),s=q(!1),g=q("payment"),b=q(new Date),f=q(null),m=De([]),p=X(()=>m.every(D=>D.id&&typeof D.amount=="number"&&D.amount>0)),y=X(()=>i.props.accounts.map(D=>({label:D.name,value:D.id}))),_=X(()=>m.reduce((D,P)=>D+(P.amount||0),0)),x=X(()=>d.total-_.value),C=X(()=>{if(!d.supplier)return!0;const D=m.find(h=>h.id==="wallet");return(D?D.amount:0)<=d.supplier.balance}),$=new Date,B=dt.addToDate(new Date,{days:30}),Y=X(()=>[D=>!!D||"Tanggal jatuh tempo harus diisi",D=>dt.isBetweenDates(D,$,B,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),E=X(()=>{if(g.value==="debt")return!!d.supplier&&Y.value.every(U=>U(b.value)===!0);const D=m.some(U=>(U.amount||0)>0),P=m.every(U=>(U.amount||0)>=0),h=x.value<=0;return p.value&&D&&P&&h}),z=()=>{m.length<3&&m.push({id:null,amount:0})},R=D=>{if(m.length>1){const P=m.findIndex(h=>h.id===D);P!==-1&&m.splice(P,1)}},M=D=>{g.value=D,b.value=new Date,m.splice(0,m.length),D==="payment"&&y.value.length>0&&(m.splice(0,m.length,{id:y.value[0].value,amount:d.total}),gt(()=>{f.value&&f.value.length>0&&(f.value[0].focus(),f.value[0].select())}))},A=()=>{if(!E.value)return;s.value=!0;let D={total:d.total,is_debt:g.value==="debt"};if(g.value==="debt")D.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),D.payments=[];else{const P=_.value,h=P>d.total?P-d.total:0,U=x.value>0?x.value:0;D.payments=m,D.remaining_debt=U,D.change=h}o("accepted",D),s.value=!1},V=()=>{if(y.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}M("payment")};return(D,P)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":P[3]||(P[3]=h=>D.$emit("update:modelValue",h)),onBeforeShow:V},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[u.supplier?(c(),w("div",Xg,[t("div",Zg,[v(" Nama: "+r(u.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(a(K)(u.supplier.balance)),1)])])):k("",!0),t("div",e1," Total: Rp. "+r(a(K)(u.total)),1),t("div",t1,[e(a(_a),{modelValue:g.value,"onUpdate:modelValue":[P[0]||(P[0]=h=>g.value=h),M],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!u.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="payment"?(c(),w("div",a1,[(c(!0),w(Q,null,je(m,(h,U)=>(c(),w("div",{key:U,class:"row q-col-gutter-sm q-mb-sm"},[t("div",l1,[e(a(ce),{modelValue:h.id,"onUpdate:modelValue":N=>h.id=N,options:y.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:s.value,"hide-bottom-space":"",rules:[N=>!!N||"Akun harus dipilih"],error:!h.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",o1,[e(Ee,{modelValue:h.amount,"onUpdate:modelValue":N=>h.amount=N,label:"Jumlah",outlined:!0,dense:"",disable:s.value,error:!C.value,"error-message":C.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:U===0?"firstPaymentInputRef":null},Je({_:2},[m.length>1?{name:"append",fn:l(()=>[e(T,{size:"xs",name:"close",class:"cursor-pointer",onClick:N=>R(U)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",n1,[e(I,{disable:!(m.length<3&&x.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:z,size:"sm"},null,8,["disable"])]),t("div",s1,[x.value>0?(c(),w("div",r1," Sisa Tagihan: Rp. "+r(a(K)(x.value)),1)):x.value<0?(c(),w("div",i1," Kembalian: Rp. "+r(a(K)(Math.abs(x.value))),1)):(c(),w("div",d1," Tagihan Terbayar "))])])):g.value==="debt"&&u.supplier?(c(),w("div",u1,[e(ra,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=h=>b.value=h),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a($),"max-date":a(B),rules:Y.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",m1," Total Utang: Rp. "+r(a(K)(u.total)),1)])):g.value==="debt"&&!u.supplier?(c(),w("div",c1,[...P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)])])):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(I,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=h=>D.$emit("update:modelValue",!1))}),e(I,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:A,disable:s.value||!E.value,loading:s.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},f1=Object.freeze(Object.defineProperty({__proto__:null,default:p1},Symbol.toStringTag,{value:"Module"})),g1={key:0},b1={style:{float:"right"}},v1={key:1},y1={style:{float:"right"}},_1={key:2},k1={style:{float:"right"}},w1={key:3},h1={style:{float:"right"}},$1={style:{float:"right"}},x1={class:"q-gutter-sm"},S1={class:"q-my-md"},V1={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(u,{emit:n}){const d=q(null),o=()=>{var i;(i=d.value)==null||i.focus()};return(i,s)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":s[0]||(s[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...s[1]||(s[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])]),_:1}),e(ae,{align:"center"},{default:l(()=>[s[22]||(s[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[s[2]||(s[2]=t("td",null,"ID",-1)),s[3]||(s[3]=t("td",null,":",-1)),t("td",null,r(u.order.code),1)]),u.customer?(c(),w("tr",g1,[s[5]||(s[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),s[6]||(s[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(u.customer.name)+" ",1),s[4]||(s[4]=t("br",null,null,-1)),v(r(u.customer.code),1)])])):k("",!0),t("tr",null,[s[8]||(s[8]=t("td",null,"Total",-1)),s[9]||(s[9]=t("td",null,":",-1)),t("td",null,[s[7]||(s[7]=v(" Rp. ",-1)),t("div",b1,r(a(K)(u.payment.total)),1)])]),u.payment.cash_amount?(c(),w("tr",v1,[s[11]||(s[11]=t("td",null,"Tunai",-1)),s[12]||(s[12]=t("td",null,":",-1)),t("td",null,[s[10]||(s[10]=v(" Rp. ",-1)),t("div",y1,r(a(K)(u.payment.cash_amount)),1)])])):k("",!0),u.payment.wallet_amount?(c(),w("tr",_1,[s[14]||(s[14]=t("td",null,"Wallet",-1)),s[15]||(s[15]=t("td",null,":",-1)),t("td",null,[s[13]||(s[13]=v(" Rp. ",-1)),t("div",k1,r(a(K)(u.payment.wallet_amount)),1)])])):k("",!0),u.payment.remaining_debt?(c(),w("tr",w1,[s[17]||(s[17]=t("td",null,"Piutang",-1)),s[18]||(s[18]=t("td",null,":",-1)),t("td",null,[s[16]||(s[16]=v(" Rp. ",-1)),t("span",h1,r(a(K)(u.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[s[20]||(s[20]=t("td",null,"Kembalian",-1)),s[21]||(s[21]=t("td",null,":",-1)),t("td",null,[s[19]||(s[19]=v(" Rp. ",-1)),t("div",$1,r(a(K)(u.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:l(()=>[t("div",x1,[e(I,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(I,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",S1,[e(I,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},q1=_t(V1,[["__scopeId","data-v-f0591c00"]]),C1=Object.freeze(Object.defineProperty({__proto__:null,default:q1},Symbol.toStringTag,{value:"Module"})),T1={class:"column"},P1={class:"bg-grey-2 q-pa-xs"},R1={class:"text-subtitle1 text-bold text-grey-10"},O1={class:"col-12 col-sm-6"},D1={class:"full-width"},I1={key:1},U1={key:0},E1={key:1},A1={class:"col-12 col-sm-6",align:"left"},j1={class:"full-width"};const N1={key:1},M1={class:"full-width",style:{"border-collapse":"collapse"}},B1={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},z1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},F1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},L1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},K1={key:0},H1={class:"col-12 col-sm-6"},Y1={class:"text-body2 text-grey-7 text-italic"},W1={class:"col-12 col-sm-6"},Q1={class:"row justify-end q-gutter-y-xs"},J1={class:"col-12 row justify-between"},G1={class:"text-subtitle2 text-bold"},qo={__name:"InvoiceTab",props:{data:Object},setup(u){const n=u;return(d,o)=>{const i=Z("i-link");return c(),w("div",T1,[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",P1,[t("div",R1," INVOICE #"+r(n.data.code),1)])]),_:1}),e(Ae),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",O1,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",D1,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.supplier?(c(),O(i,{key:0,href:d.route("admin.supplier.detail",{id:n.data.supplier_id})},{default:l(()=>[e(T,{class:"inline-icon",name:"person"}),v(" "+r(n.data.supplier_name),1)]),_:1},8,["href"])):(c(),w("div",I1,[e(T,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum ",-1))]))])]),n.data.supplier_phone?(c(),w("tr",U1,[t("td",null,[e(T,{class:"inline-icon",name:"phone"}),v(" "+r(n.data.supplier_phone),1)])])):k("",!0),n.data.supplier_address?(c(),w("tr",E1,[t("td",null,[e(T,{class:"inline-icon",name:"home_pin"}),v(" "+r(n.data.supplier_address),1)])])):k("",!0)])])]),t("div",A1,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",j1,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(be)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(d.$CONSTANTS.PURCHASE_ORDER_STATUSES[n.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[n.data.payment_status]),1)]),k("",!0),n.data.due_date?(c(),w("tr",N1,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(la)(n.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",M1,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(c(!0),w(Q,null,je(n.data.details,s=>(c(),w("tr",{key:s.id},[t("td",B1,[e(i,{href:d.route("admin.product.detail",{id:s.product_id})},{default:l(()=>[v(r(s.product_name),1)]),_:2},1032,["href"])]),t("td",z1,r(s.quantity),1),t("td",null,r(s.product_uom),1),t("td",F1,r(a(K)(s.cost)),1),t("td",L1,r(a(K)(s.subtotal_cost)),1)]))),128)),n.data.details.length==0?(c(),w("tr",K1,[...o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)])])]),_:1}),e(Ae),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",H1,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Y1,r(n.data.notes?n.data.notes:"-"),1)]),t("div",W1,[t("div",Q1,[t("div",J1,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",G1,r(a(K)(n.data.grand_total)),1)])])])]),_:1})])}}},X1=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Z1={key:0,class:"text-center q-mb-md text-grey-8"},eb={class:"text-subtitle2 text-weight-medium"},tb={class:"text-h5 text-center text-primary q-pb-md"},ab={class:"text-center q-mt-md"},lb={key:0,class:"text-h6 text-negative text-weight-bold"},ob={key:1,class:"text-h6 text-green-8 text-weight-bold"},nb={key:2,class:"text-h6 text-positive text-weight-bold"},Co={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,i=ve(),s=q(!1),g=q({method:null,amount:d.total,notes:null}),b=i.props.data.supplier,f=X(()=>[...i.props.accounts.map($=>({label:$.type=="bank"?$.name+" - "+$.number:$.name,value:$.id}))]),m=X(()=>d.total-(g.value.amount||0)),p=X(()=>g.value.method&&typeof g.value.amount=="number"&&g.value.amount>0),y=X(()=>g.value.method?(g.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),_=X(()=>p.value&&y.value===null),x=()=>{if(!_.value)return;s.value=!0;const $={total_paid:g.value.amount,payments:[{id:g.value.method,amount:g.value.amount}],notes:g.value.notes,remaining_debt:Math.max(0,d.total-(g.value.amount||0))};o("accepted",$),s.value=!1},C=()=>{g.value.amount=d.total,g.value.method=null,g.value.notes=null};return($,B)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":B[4]||(B[4]=Y=>$.$emit("update:modelValue",Y)),onBeforeShow:C},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...B[5]||(B[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(b)?(c(),w("div",Z1,[t("div",eb,[v(r(a(b).name)+" ",1),B[6]||(B[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(K)(a(b).balance)),1)])])):k("",!0),t("div",tb," Total: Rp. "+r(a(K)(u.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":B[0]||(B[0]=Y=>g.value.method=Y),options:f.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:s.value,rules:[Y=>!!Y||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":B[1]||(B[1]=Y=>g.value.amount=Y),label:"Jumlah Uang",outlined:!0,dense:"",disable:s.value,class:"q-mb-md",error:!_.value,"error-message":y.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:g.value.notes,"onUpdate:modelValue":B[2]||(B[2]=Y=>g.value.notes=Y),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:s.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",ab,[m.value>0?(c(),w("div",lb," Sisa Tagihan: Rp. "+r(a(K)(m.value)),1)):m.value<0?(c(),w("div",ob," Kembalian: Rp. "+r(a(K)(Math.abs(m.value))),1)):(c(),w("div",nb," Tagihan Terbayar "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(I,{flat:"",label:"Batal",color:"grey",onClick:B[3]||(B[3]=Y=>$.$emit("update:modelValue",!1))}),e(I,{label:"Bayar",color:"positive",onClick:x,disable:s.value||!_.value,loading:s.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},sb=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),rb={class:"column"},ib={class:"row"},db={class:"full-width",style:{"border-collapse":"collapse"}},ub={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},mb={class:"row items-center q-gutter-x-sm"},cb={class:"text-weight-bold"},pb={class:"row items-center q-gutter-x-sm q-mt-xs"},fb={class:"text-caption text-grey-6"},gb={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},bb={class:"text-caption text-grey-6"},vb={class:"q-mt-xs"},yb={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},_b={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},kb={key:0},wb={class:"text-right q-pa-sm"},hb={class:"text-right q-pa-sm"},To={__name:"PaymentTab",props:{data:Object},setup(u){const n=u,d=X(()=>n.data.grand_total-n.data.total_paid),o=Se(),i=q(!1),s=()=>{i.value=!0},g=async f=>{const m={order_id:n.data.id,payments:f.payments,notes:f.notes};o.loading.show({message:"Memproses pembayaran..."});try{const p=await Oe.post(route("admin.purchase-order.add-payment"),m);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),i.value=!1,ee.visit(route("admin.purchase-order.detail",{id:n.data.id})+"?tab=payment")}catch(p){let y="Gagal memproses pembayaran.";p.response&&p.response.data&&p.response.data.message?y=p.response.data.message:p.message&&(y=p.message),o.notify({message:y,color:"negative",icon:"error"})}finally{o.loading.hide()}},b=f=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.purchase-order.delete-payment",{id:f.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.purchase-order.detail",{id:n.data.id})+"?tab=payment")}catch(m){let p="Gagal menghapus pembayaran.";m.response&&m.response.data&&m.response.data.message?p=m.response.data.message:m.message&&(p=m.message),o.notify({message:p,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(f,m)=>(c(),w(Q,null,[t("div",rb,[e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("div",ib,[f.$can("admin.purchase-order.add-payment")&&d.value>0?(c(),O(I,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=J(p=>s(),["stop"]))})):k("",!0)]),t("table",db,[m[7]||(m[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(c(!0),w(Q,null,je(n.data.payments,p=>(c(),w("tr",{key:p.id},[t("td",ub,[t("div",mb,[e(T,{name:"tag",size:"xs",color:"grey-7"}),t("span",cb,r(p.code),1)]),t("div",pb,[e(T,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",fb,r(a(be)(p.created_at)),1)]),(p.type==="transfer"||p.type==="cash")&&p.account?(c(),w("div",gb,[e(T,{name:"wallet",size:"xs",color:"grey-7"}),t("span",bb,r(p.account.name),1)])):k("",!0),t("div",vb,[e(vt,{label:f.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[p.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",yb,r(a(K)(p.amount)),1),t("td",_b,[f.$can("admin.purchase-order.delete-payment")&&n.data.supplier_id?(c(),O(I,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(p)},null,8,["onClick"])):k("",!0)])]))),128)),n.data.payments.length==0?(c(),w("tr",kb,[...m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",wb,r(a(K)(n.data.total_paid)),1),m[4]||(m[4]=t("th",null,null,-1))]),t("tr",null,[m[5]||(m[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Tagihan",-1)),t("th",hb,r(a(K)(d.value)),1),m[6]||(m[6]=t("td",null,null,-1))])])])]),_:1})]),e(Co,{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=p=>i.value=p),total:d.value,customer:n.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},$b=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),xb={class:"q-gutter-sm"},Sb={class:"col col-lg-6 q-pa-xs",align:"center"},$l="Rincian Pembelian",Vb={__name:"Detail",setup(u){const n=new URLSearchParams(window.location.search),o=ve().props.data,i=q(n.get("preview")||!1),g=q(n.get("tab")||"invoice"),b=()=>{window.print()};return(f,m)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),w(Q,null,[e(p,{title:$l}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r($l))])]),"left-button":l(()=>[t("div",xb,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>f.$goBack())})])]),"right-button":l(()=>[e(I,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=_=>b())}),i.value?k("",!0):(c(),O(I,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[2]||(m[2]=_=>a(ee).get(f.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Sb,[e(ge,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Ct,{modelValue:g.value,"onUpdate:modelValue":m[3]||(m[3]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(c(),O(ot,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Tt,{modelValue:g.value,"onUpdate:modelValue":m[4]||(m[4]=_=>g.value=_),animated:""},{default:l(()=>[e(nt,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(qo,{data:a(o)},null,8,["data"])]),_:1}),e(nt,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(To,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},qb=_t(Vb,[["__scopeId","data-v-e38a4c29"]]),Cb=Object.freeze(Object.defineProperty({__proto__:null,default:qb},Symbol.toStringTag,{value:"Module"})),Tb={class:"text-weight-medium wrap-column"},Pb={class:"text-caption text-grey-6 elipsis"},Rb={class:"column items-end"},Ob={class:"text-caption text-grey-6 text-italic"},Po={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(u){const n=Se(),d=at(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,s)=>(c(),O(Ie,{dense:"",rows:u.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ke({height:a(d)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(c(!0),w(Q,null,je(g.cols,b=>(c(),O(Gt,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left"},{default:l(()=>[t("div",Tb,r(g.row.product_name),1),t("div",Pb,r(g.row.product_barcode),1),g.row.notes?(c(),O(he,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal",props:g,class:"text-right"},{default:l(()=>[t("div",Rb,[t("div",null,r(a(K)(g.row.subtotal_cost)),1),t("div",Ob,r(a(K)(g.row.quantity))+" x Rp. "+r(a(K)(g.row.cost)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(I,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:u.isProcessing},null,8,["onClick","disable"]),e(I,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:u.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Db=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Ib={key:0,class:"text-center q-mb-md text-grey-8"},Ub={class:"text-subtitle2 text-weight-medium"},Eb={class:"text-h5 text-center text-primary q-pb-md"},Ab={class:"q-mb-md flex flex-center"},jb={key:1},Nb={class:"col-6"},Mb={class:"col-6"},Bb={class:"row"},zb={class:"text-center q-mt-md"},Fb={key:0,class:"text-h6 text-negative text-weight-bold"},Lb={key:1,class:"text-h6 text-green-8 text-weight-bold"},Kb={key:2,class:"text-h6 text-positive text-weight-bold"},Hb={key:2},Yb={class:"text-h6 text-negative text-center"},Wb={key:3},Ro={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,i=ve(),s=q(!1),g=q("payment"),b=q(new Date),f=q(null),m=De([]),p=X(()=>m.every(D=>D.id&&typeof D.amount=="number"&&D.amount>0)),y=X(()=>i.props.accounts.map(D=>({label:D.name,value:D.id}))),_=X(()=>m.reduce((D,P)=>D+(P.amount||0),0)),x=X(()=>d.total-_.value),C=X(()=>{if(!d.supplier)return!0;const D=m.find(h=>h.id==="wallet");return(D?D.amount:0)<=d.supplier.balance}),$=new Date,B=dt.addToDate(new Date,{days:30}),Y=X(()=>[D=>!!D||"Tanggal jatuh tempo harus diisi",D=>dt.isBetweenDates(D,$,B,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),E=X(()=>{if(g.value==="debt")return!!d.supplier&&Y.value.every(U=>U(b.value)===!0);const D=m.some(U=>(U.amount||0)>0),P=m.every(U=>(U.amount||0)>=0),h=x.value<=0;return p.value&&D&&P&&h}),z=()=>{m.length<3&&m.push({id:null,amount:0})},R=D=>{if(m.length>1){const P=m.findIndex(h=>h.id===D);P!==-1&&m.splice(P,1)}},M=D=>{g.value=D,b.value=new Date,m.splice(0,m.length),D==="payment"&&y.value.length>0&&(m.splice(0,m.length,{id:y.value[0].value,amount:d.total}),gt(()=>{f.value&&f.value.length>0&&(f.value[0].focus(),f.value[0].select())}))},A=()=>{if(!E.value)return;s.value=!0;let D={total:d.total,is_debt:g.value==="debt"};if(g.value==="debt")D.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),D.payments=[];else{const P=_.value,h=P>d.total?P-d.total:0,U=x.value>0?x.value:0;D.payments=m,D.remaining_debt=U,D.change=h}o("accepted",D),s.value=!1},V=()=>{if(y.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}M("payment")};return(D,P)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":P[3]||(P[3]=h=>D.$emit("update:modelValue",h)),onBeforeShow:V},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[u.supplier?(c(),w("div",Ib,[t("div",Ub,[v(" Nama: "+r(u.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(a(K)(u.supplier.balance)),1)])])):k("",!0),t("div",Eb," Total: Rp. "+r(a(K)(u.total)),1),t("div",Ab,[e(a(_a),{modelValue:g.value,"onUpdate:modelValue":[P[0]||(P[0]=h=>g.value=h),M],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!u.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="payment"?(c(),w("div",jb,[(c(!0),w(Q,null,je(m,(h,U)=>(c(),w("div",{key:U,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Nb,[e(a(ce),{modelValue:h.id,"onUpdate:modelValue":N=>h.id=N,options:y.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:s.value,"hide-bottom-space":"",rules:[N=>!!N||"Akun harus dipilih"],error:!h.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Mb,[e(Ee,{modelValue:h.amount,"onUpdate:modelValue":N=>h.amount=N,label:"Jumlah",outlined:!0,dense:"",disable:s.value,error:!C.value,"error-message":C.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:U===0?"firstPaymentInputRef":null},Je({_:2},[m.length>1?{name:"append",fn:l(()=>[e(T,{size:"xs",name:"close",class:"cursor-pointer",onClick:N=>R(U)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Bb,[e(I,{disable:!(m.length<3&&x.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:z,size:"sm"},null,8,["disable"])]),t("div",zb,[x.value>0?(c(),w("div",Fb," Sisa Tagihan: Rp. "+r(a(K)(x.value)),1)):x.value<0?(c(),w("div",Lb," Kembalian: Rp. "+r(a(K)(Math.abs(x.value))),1)):(c(),w("div",Kb," Tagihan Terbayar "))])])):g.value==="debt"&&u.supplier?(c(),w("div",Hb,[e(ra,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=h=>b.value=h),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a($),"max-date":a(B),rules:Y.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Yb," Total Utang: Rp. "+r(a(K)(u.total)),1)])):g.value==="debt"&&!u.supplier?(c(),w("div",Wb,[...P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)])])):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(I,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=h=>D.$emit("update:modelValue",!1))}),e(I,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:A,disable:s.value||!E.value,loading:s.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Qb=Object.freeze(Object.defineProperty({__proto__:null,default:Ro},Symbol.toStringTag,{value:"Module"})),Jb={class:"row items-center no-wrap"},Gb={class:"col-auto"},Oo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,i=d,s=()=>{i("save")},g=X(()=>o.item.quantity*o.item.cost),b=y=>{y.stopPropagation(),y.preventDefault()},f=y=>{o.modelValue&&(y.key==="Enter"?(s(),b(y)):y.key==="Escape"&&(i("update:modelValue",!1),b(y)))};$e(()=>{window.addEventListener("keydown",f)}),wt(()=>{window.removeEventListener("keydown",f)}),n({getCurrentItem:()=>o.item});const p=()=>{};return(y,_)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":_[6]||(_[6]=x=>y.$emit("update:modelValue",x)),onBeforeShow:p},{default:l(()=>[e(ge,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",Jb,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Gb,[e(I,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=x=>y.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(se,{modelValue:u.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=x=>u.item.product_name=x),label:"Produk","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=x=>u.item.quantity=x),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.cost,"onUpdate:modelValue":_[3]||(_[3]=x=>u.item.cost=x),label:"Modal / Harga Beli","hide-bottom-space":"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=x=>g.value=x),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:u.item.notes,"onUpdate:modelValue":_[5]||(_[5]=x=>u.item.notes=x),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:l(()=>[le(e(I,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[pe]]),le(e(I,{flat:"",label:"Simpan",color:"primary",onClick:s,disable:u.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Xb=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),Zb={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(u,{emit:n}){return(d,o)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>d.$emit("update:modelValue",i))},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])]),_:1}),e(ae,null,{default:l(()=>[...o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])]),_:1}),e(tt,{align:"center"},{default:l(()=>[le(e(I,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Do=_t(Zb,[["__scopeId","data-v-a7905738"]]),ev=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),tv={class:"row items-center no-wrap"},av={class:"col text-subtite text-bold text-grey-8"},lv={class:"col-auto"},Io={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,i=d,s=()=>{i("save")},g=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(s(),g(m)):m.key==="Escape"&&(i("update:modelValue",!1),g(m)))};return $e(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),n({getCurrentItem:()=>o.item}),(m,p)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":p[4]||(p[4]=y=>m.$emit("update:modelValue",y))},{default:l(()=>[e(ge,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",tv,[t("div",av," Edit "+r(u.data.code),1),t("div",lv,[e(I,{flat:"",size:"sm",round:"",icon:"close",onClick:p[0]||(p[0]=y=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(zt,{modelValue:u.data.datetime,"onUpdate:modelValue":p[1]||(p[1]=y=>u.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:u.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status],"onUpdate:modelValue":p[2]||(p[2]=y=>m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:u.data.notes,"onUpdate:modelValue":p[3]||(p[3]=y=>u.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:l(()=>[le(e(I,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[pe]]),le(e(I,{flat:"",label:"Simpan",color:"primary",onClick:s,disable:u.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ov=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"})),nv={key:0},sv={style:{float:"right"}},rv={key:1},iv={style:{float:"right"}},dv={key:2},uv={style:{float:"right"}},mv={key:3},cv={style:{float:"right"}},pv={style:{float:"right"}},fv={class:"q-gutter-sm"},gv={class:"q-my-md"},bv={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(u,{emit:n}){const d=q(null),o=()=>{var i;(i=d.value)==null||i.focus()};return(i,s)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":s[0]||(s[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...s[1]||(s[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])]),_:1}),e(ae,{align:"center"},{default:l(()=>[s[22]||(s[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[s[2]||(s[2]=t("td",null,"ID",-1)),s[3]||(s[3]=t("td",null,":",-1)),t("td",null,r(u.order.code),1)]),u.customer?(c(),w("tr",nv,[s[5]||(s[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),s[6]||(s[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(u.customer.name)+" ",1),s[4]||(s[4]=t("br",null,null,-1)),v(r(u.customer.code),1)])])):k("",!0),t("tr",null,[s[8]||(s[8]=t("td",null,"Total",-1)),s[9]||(s[9]=t("td",null,":",-1)),t("td",null,[s[7]||(s[7]=v(" Rp. ",-1)),t("div",sv,r(a(K)(u.payment.total)),1)])]),u.payment.cash_amount?(c(),w("tr",rv,[s[11]||(s[11]=t("td",null,"Tunai",-1)),s[12]||(s[12]=t("td",null,":",-1)),t("td",null,[s[10]||(s[10]=v(" Rp. ",-1)),t("div",iv,r(a(K)(u.payment.cash_amount)),1)])])):k("",!0),u.payment.wallet_amount?(c(),w("tr",dv,[s[14]||(s[14]=t("td",null,"Wallet",-1)),s[15]||(s[15]=t("td",null,":",-1)),t("td",null,[s[13]||(s[13]=v(" Rp. ",-1)),t("div",uv,r(a(K)(u.payment.wallet_amount)),1)])])):k("",!0),u.payment.remaining_debt?(c(),w("tr",mv,[s[17]||(s[17]=t("td",null,"Piutang",-1)),s[18]||(s[18]=t("td",null,":",-1)),t("td",null,[s[16]||(s[16]=v(" Rp. ",-1)),t("span",cv,r(a(K)(u.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[s[20]||(s[20]=t("td",null,"Kembalian",-1)),s[21]||(s[21]=t("td",null,":",-1)),t("td",null,[s[19]||(s[19]=v(" Rp. ",-1)),t("div",pv,r(a(K)(u.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:l(()=>[t("div",fv,[e(I,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(I,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",gv,[e(I,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Uo=_t(bv,[["__scopeId","data-v-31d340fd"]]),vv=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),yv={class:"q-gutter-sm"},_v={class:"row items-center"},kv={class:"text-weight-bold"},wv={class:"row q-col-gutter-none full-width"},hv={class:"col-sm-6 col-12 col"},$v={class:"row full-width"},xv={class:"text-grey q-mt-xs q-ml-sm"},Sv={class:"col-sm-6 col-12"},Vv={class:"row q-ml-sm items-end"},qv={class:"row col grow"},Cv={class:"col-12 q-pa-sm column"},Tv={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},Pv={key:0,class:"col"},Rv={class:"text-caption text-grey-6 q-mt-xs"},Ov={key:0,class:"text-caption text-grey-8 q-mt-xs"},Dv={class:"text-italic"},Iv={key:1,class:"col"},Uv={class:"q-pa-sm q-pb-none text-grey-8"},Ev={class:"col"},Av={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},jv={class:"text-h4 text-weight-bold"},Nv={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Mv={class:"col q-py-sm"},Bv={class:"q-py-sm"},zv={__name:"Editor",setup(u){const n=Se(),d=ve(),o=q(!0),i=q(null),s=q(null),g=q(null),b=q(!1),f=q(null),m=q(null),{isFullscreen:p,toggleFullscreen:y}=va(m),_=d.props.data.code,x=q(d.props.data.supplier),C=q(null),$=q(""),B=q(!1),Y=q(!1),E=q(!1),z=q(!1),R=q(!1),M=q(!1),A=q(null),V=De({id:d.props.data.id,code:d.props.data.code,supplier_id:d.props.data.supplier_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),D=X(()=>V.items.reduce((re,H)=>re+H.cost*H.quantity,0)),P=()=>{var re;y(),p.value||(re=f==null?void 0:f.value)==null||re.hideDrawer()},h=re=>isNaN(re)||re<=0?(ft("Kuantitas tidak valid.","top"),!1):!0,U=re=>isNaN(re)||re<0?(ft("Harga tidak valid.","top"),!1):!0,N=re=>!re||re.length==0?(ft("Barcode tidak valid.","top"),!1):!0,S=re=>{$.value.endsWith("*")?$.value+=re.name:$.value=re.name},j=async()=>{const re=$.value.trim();if(re.length===0){E.value=!0;return}const H=re.split("*");let ne=1,G="",fe=null;if(H.length===1)G=H[0];else if(H.length<=3)ne=parseInt(H[0]),G=H[1],H.length===3&&(fe=parseFloat(H[2]));else{ft("Input tidak valid.","top");return}if(G.length===0){E.value=!0;return}!N(G)&&!h(ne)&&!U(fe)||(B.value=!0,await Oe.post(route("admin.purchase-order.add-item"),{order_id:V.id,product_code:G,qty:ne,cost:fe,merge:o.value}).then(Ce=>{const ke=Ce.data.data.item;let Xe=-1;Ce.data.data.mergeItem&&(Xe=V.items.findIndex($t=>$t.id===ke.id)),Xe===-1?V.items.push(ke):V.items[Xe]=ke,$.value="",fe!==null&&fe!==parseFloat(ke.cost)&&ft("Harga tidak dapat diubah!","top")}).catch(Ce=>{var ke,Xe;ct((Xe=(ke=Ce.response)==null?void 0:ke.data)==null?void 0:Xe.message,"top"),console.error("Gagal mengambil data produk:",Ce)}),B.value=!1,gt(()=>{var Ce;(Ce=i.value)==null||Ce.focus()}))},te=re=>{A.value=Object.create(re),z.value=!0},ie=re=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${re.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{B.value=!0,Oe.post(route("admin.purchase-order.remove-item"),{id:re.id}).then(()=>{const H=V.items.findIndex(ne=>ne.id===re.id);H!==-1&&(V.items.splice(H,1)[0],pt("Item telah dihapus","top"))}).catch(H=>{var ne,G;ct(((G=(ne=H==null?void 0:H.response)==null?void 0:ne.data)==null?void 0:G.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(H)}).finally(()=>{B.value=!1})})},me=()=>{B.value=!0;const re=s.value.getCurrentItem(),H={id:re.id,qty:re.quantity,cost:re.cost};re.notes&&(H.notes=re.notes),Oe.post(route("admin.purchase-order.update-item"),H).then(ne=>{const G=ne.data.data,fe=V.items.findIndex(Ce=>Ce.id===G.id);fe!==-1&&(V.items[fe]=G,pt("Item telah diperbarui","top"))}).catch(ne=>{var G,fe;ct(((fe=(G=ne==null?void 0:ne.response)==null?void 0:G.data)==null?void 0:fe.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ne)}).finally(()=>{B.value=!1})};$e(()=>{const re=H=>{H.key==="F1"?(H.preventDefault(),b.value=!0):H.key==="F2"?(H.preventDefault(),g.value.focus()):H.key==="F3"?(H.preventDefault(),i.value.focus()):H.key==="F4"?(H.preventDefault(),o.value=!o.value):H.key==="F10"?(H.preventDefault(),Y.value=!0):H.key==="F11"?(H.preventDefault(),P()):(H.key==="F5"||H.key==="F6"||H.key==="F7"||H.key==="F12")&&H.preventDefault()};document.addEventListener("keydown",re),wt(()=>{document.removeEventListener("keydown",re)}),gt(()=>{var H;(H=f==null?void 0:f.value)==null||H.hideDrawer()})});const Re=async re=>{x.value=re,V.supplier_id=re==null?void 0:re.id,await Be(),re!=null&&re.id?i.value.focus():g.value.focus()},Be=async()=>{B.value=!0;const re={id:V.id,supplier_id:V.supplier_id,datetime:Jt(V.datetime),notes:V.notes};await Oe.post(route("admin.purchase-order.update"),re).then(H=>{const ne=H.data.data.id;V.supplier_id=ne.supplier_id}).catch(H=>{var ne,G;ct(((G=(ne=H==null?void 0:H.response)==null?void 0:ne.data)==null?void 0:G.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(H)}).finally(()=>{B.value=!1})},de=re=>{if(V.items.length===0){pt("Item masih kosong","top");return}const H={id:V.id,...re};B.value=!0,Oe.post(route("admin.purchase-order.close"),H).then(ne=>{pt("Transaksi selesai"),ee.visit(route("admin.purchase-order.detail",{id:V.id}))}).catch(ne=>{var G,fe;ct((fe=(G=ne.response)==null?void 0:G.data)==null?void 0:fe.message),console.error(ne)}).finally(()=>{B.value=!1})},F=()=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${V.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order.cancel",{id:V.id}),{id:V.id}).then(()=>{pt("Transaksi telah dibatalkan."),ee.visit(route("admin.purchase-order.detail",{id:V.id}))}).catch(re=>{var ne,G;const H=((G=(ne=re.response)==null?void 0:ne.data)==null?void 0:G.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:H,color:"warning",position:"bottom"}),console.error(re)})})},_e=()=>{window.open(route("admin.purchase-order.detail",{id:V.id})+"?preview=1","_blank")};return(re,H)=>{const ne=Z("i-head"),G=Z("authenticated-layout");return c(),w(Q,null,[e(ne,{title:a(_)},null,8,["title"]),e(G,{ref_key:"authLayoutRef",ref:f,"show-drawer-button":!0},{title:l(()=>[v(r(a(_)),1)]),"left-button":l(()=>[t("div",yv,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:H[0]||(H[0]=fe=>a(ee).get(re.route("admin.purchase-order.index")))})])]),"right-button":l(()=>[t("div",_v,[a(n).screen.gt.sm?(c(),w(Q,{key:0},[t("div",kv,r(a(d).props.auth.user.username),1),H[22]||(H[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ba)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(ge,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",wv,[t("div",hv,[t("div",$v,[e(xo,{ref_key:"supplierAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:x.value,"onUpdate:modelValue":H[2]||(H[2]=fe=>x.value=fe),label:"Pemasok",disable:B.value,onSupplierSelected:Re,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",xv," Saldo: "+r(x.value?"Rp. "+a(K)(x.value?x.value.balance:0):"Tidak tersedia"),1)])]),t("div",Sv,[e(se,{ref_key:"userInputRef",ref:i,modelValue:$.value,"onUpdate:modelValue":H[5]||(H[5]=fe=>$.value=fe),onKeyup:H[6]||(H[6]=Ht(J(fe=>j(),["prevent"]),["enter"])),loading:B.value,disable:B.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(T,{name:"search",onClick:H[3]||(H[3]=fe=>E.value=!0),class:"cursor-pointer"})]),append:l(()=>{var fe;return[((fe=$.value)==null?void 0:fe.length)>0?(c(),O(T,{key:0,name:"send",onClick:H[4]||(H[4]=Ce=>j()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",Vv,[e(xt,{class:"col",modelValue:o.value,"onUpdate:modelValue":H[7]||(H[7]=fe=>o.value=fe),label:"Gabungkan item",disable:B.value},null,8,["modelValue","disable"])])])]),t("div",qv,[t("div",Cv,[e(Po,{items:V.items,onUpdateQuantity:H[8]||(H[8]=({id:fe,value:Ce})=>re.updateQuantity(fe,Ce)),onRemoveItem:ie,onEditItem:te,"is-processing":B.value},null,8,["items","is-processing"])])]),t("div",Tv,[a(n).screen.gt.sm?(c(),w("div",Pv,[t("div",Rv,r(V.items.length)+" item(s) ",1),V.notes?(c(),w("div",Ov,[H[23]||(H[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Dv,[e(he,{text:V.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(n).screen.gt.sm?(c(),w("div",Iv,[t("div",Uv,[t("div",null,"#: "+r(V.code),1),t("div",null,r(a(be)(V.datetime)),1)])])):k("",!0),t("div",Ev,[t("div",Av,[H[25]||(H[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",jv,[H[24]||(H[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(K)(D.value)),1)])])])]),t("div",Nv,[t("div",Mv,[e(I,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:H[9]||(H[9]=fe=>Y.value=!0),disable:!re.$can("admin.purchase-order.close")||B.value||V.items.length===0||V.status!=="draft",loading:B.value},null,8,["disable","loading"])]),t("div",Bv,[e(I,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:H[13]||(H[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[le((c(),O(oe,{clickable:"",onClick:H[10]||(H[10]=J(fe=>R.value=!0,["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...H[26]||(H[26]=[v("Edit Rincian",-1)])]),_:1})]),_:1})),[[ue],[pe]]),le((c(),O(oe,{clickable:"",onClick:H[11]||(H[11]=J(fe=>_e(),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"preview"})]),_:1}),e(L,null,{default:l(()=>[...H[27]||(H[27]=[v("Pratinjau",-1)])]),_:1})]),_:1})),[[ue],[pe]]),le((c(),O(oe,{clickable:"",onClick:H[12]||(H[12]=J(fe=>F(),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"cancel",color:"negative"})]),_:1}),e(L,{class:"text-negative"},{default:l(()=>[...H[28]||(H[28]=[v(" Batalkan ",-1)])]),_:1})]),_:1})),[[ue],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Oo,{ref_key:"itemEditorRef",ref:s,modelValue:z.value,"onUpdate:modelValue":H[14]||(H[14]=fe=>z.value=fe),item:A.value,onSave:H[15]||(H[15]=fe=>me()),"is-processing":B.value},null,8,["modelValue","item","is-processing"]),e(Ro,{modelValue:Y.value,"onUpdate:modelValue":H[16]||(H[16]=fe=>Y.value=fe),onAccepted:de,form:V,supplier:x.value,total:D.value,accounts:a(d).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(ya,{modelValue:E.value,"onUpdate:modelValue":H[17]||(H[17]=fe=>E.value=fe),"show-cost":!0,onProductSelected:S},null,8,["modelValue"]),e(Io,{modelValue:R.value,"onUpdate:modelValue":H[18]||(H[18]=fe=>R.value=fe),data:V,onSave:H[19]||(H[19]=fe=>Be()),"is-processing":B.value},null,8,["modelValue","data","is-processing"]),e(Do,{modelValue:b.value,"onUpdate:modelValue":H[20]||(H[20]=fe=>b.value=fe)},null,8,["modelValue"]),e(Uo,{modelValue:M.value,"onUpdate:modelValue":H[21]||(H[21]=fe=>M.value=fe),order:V,supplier:x.value,total:D.value,payment:C.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},Fv=Object.freeze(Object.defineProperty({__proto__:null,default:zv},Symbol.toStringTag,{value:"Module"})),Lv={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.PURCHASE_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(c(),O(Nt,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}},Kv={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(c(),O(Nt,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}};const Hv={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Yv={class:"q-pa-xs"},Wv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Qv={key:0},Jv={key:1},Gv={key:0},Xv={key:0},Zv={key:1},ey={class:"flex justify-end"},xl="Pembelian",ty={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=Mt(),m=Bt(),p=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...Vt(f-2,f-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...qt()],_=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],x=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],C=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],$=De({search:"",year:f,month:m,status:"all",payment_status:"all",delivery_status:"all",...Ne()}),B=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{V()});const E=h=>{if(h.status=="draft"){z(h);return}R(h)},z=h=>{ee.get(route("admin.purchase-order.edit",h.id))},R=h=>{ee.get(route("admin.purchase-order.detail",h.id))},M=h=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${h.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order.cancel",{id:h.id}),{id:h.id}).then(U=>{const N=U.data.data,S=o.value.findIndex(j=>j.id===N.id);if(S===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[S].status="canceled",n.notify({message:U.data.message,position:"bottom"})}).catch(U=>{var S,j;const N=((j=(S=U.response)==null?void 0:S.data)==null?void 0:j.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:N,color:"warning",position:"bottom"}),console.error(U)})})},A=h=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${h.code}?`,url:route("admin.purchase-order.delete",h.id),fetchItemsCallback:V,loading:i}),V=(h=null)=>{Me({pagination:B,filter:$,props:h,rows:o,url:route("admin.purchase-order.data"),loading:i,tableRef:s})},D=()=>{V()},P=X(()=>n.screen.gt.sm?Y:Y.filter(h=>h.name==="id"||h.name==="action"));return He(()=>$.year,h=>{h===null&&($.month=null)}),(h,U)=>{const N=Z("i-head"),S=Z("authenticated-layout");return c(),w(Q,null,[e(N,{title:xl}),e(S,null,Je({title:l(()=>[v(r(xl))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=j=>d.value=!d.value)},null,8,["icon"]),h.$can("admin.purchase-order.edit")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:U[1]||(U[1]=j=>a(ee).get(h.route("admin.purchase-order.add")))})):k("",!0)]),default:l(()=>[t("div",Yv,[e(Ie,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:B.value,"onUpdate:pagination":U[11]||(U[11]=j=>B.value=j),filter:$.search,loading:i.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:j,message:te,filter:ie})=>[t("div",Wv,[t("span",null,r(te)+" "+r(ie?" with term "+ie:""),1)])]),body:l(j=>[e(Pe,{props:j,class:"cursor-pointer",onClick:J(te=>E(j.row),["prevent"])},{default:l(()=>[e(W,{key:"id",props:j,class:"wrap-column"},{default:l(()=>[t("div",null,[e(T,{name:"tag"}),v(" "+r(j.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(r(a(be)(j.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[j.row.supplier?(c(),w("div",Qv,[e(T,{name:"person",class:"inline-icon"}),e(fa,{href:h.route("admin.supplier.detail",{id:j.row.supplier.id}),onClick:U[8]||(U[8]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(j.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(K)(j.row.grand_total)),1),j.row.notes?(c(),w("div",Jv,[e(T,{name:"notes"}),v(" "+r(j.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Lv,{status:j.row.status},null,8,["status"]),e(Kv,{status:j.row.payment_status},null,8,["status"]),k("",!0)])]),_:2},1032,["props"]),e(W,{key:"supplier_id",props:j},{default:l(()=>[j.row.supplier?(c(),w("div",Gv,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(j.row.supplier_name),1)]),j.row.supplier_phone?(c(),w("div",Xv,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(j.row.supplier_phone),1)])):k("",!0),j.row.supplier_address?(c(),w("div",Zv,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(j.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:j},{default:l(()=>[v(r(a(K)(j.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:j},{default:l(()=>[e(he,{text:j.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:j,onClick:U[10]||(U[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",ey,[h.$can("admin.purchase-order.detail")||h.$can("admin.purchase-order.edit")||h.$can("admin.purchase-order.cancel")||h.$can("admin.purchase-order.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:U[9]||(U[9]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[j.row.status!="draft"&&h.$can("admin.purchase-order.detail")?le((c(),O(oe,{key:0,onClick:J(te=>R(j.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"visibility"})]),_:1}),e(L,null,{default:l(()=>[...U[12]||(U[12]=[v(" Lihat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),j.row.status=="draft"&&h.$can("admin.purchase-order.edit")?le((c(),O(oe,{key:1,onClick:J(te=>z(j.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...U[13]||(U[13]=[v(" Edit ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),j.row.status=="draft"&&h.$can("admin.purchase-order.cancel")?le((c(),O(oe,{key:2,onClick:J(te=>M(j.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"cancel"})]),_:1}),e(L,null,{default:l(()=>[...U[14]||(U[14]=[v(" Batalkan ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),e(Ae),h.$can("admin.purchase-order.delete")?le((c(),O(oe,{key:3,onClick:J(te=>A(j.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...U[15]||(U[15]=[v(" Hapus ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Hv,[e(ce,{modelValue:$.year,"onUpdate:modelValue":[U[2]||(U[2]=j=>$.year=j),D],options:p,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!="all"?(c(),O(ce,{key:0,modelValue:$.month,"onUpdate:modelValue":[U[3]||(U[3]=j=>$.month=j),D],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:$.status,"onUpdate:modelValue":[U[4]||(U[4]=j=>$.status=j),D],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:$.payment_status,"onUpdate:modelValue":[U[5]||(U[5]=j=>$.payment_status=j),D],options:x,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":U[7]||(U[7]=j=>$.search=j),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ay=Object.freeze(Object.defineProperty({__proto__:null,default:ty},Symbol.toStringTag,{value:"Module"})),ly={class:"q-gutter-sm"},oy={class:"col col-md-6 q-pa-xs"},Sl="Tambah Retur Penjualan",ny={__name:"Create",setup(u){const n=ve(),d=We({code:n.props.data.code}),o=()=>rt({form:d,url:route("admin.sales-order-return.add")});return(i,s)=>{const g=Z("i-head"),b=Z("authenticated-layout");return c(),w(Q,null,[e(g,{title:Sl}),e(b,null,{title:l(()=>[v(r(Sl))]),"left-button":l(()=>[t("div",ly,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=f=>i.$inertia.get(i.route("admin.sales-order-return.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",oy,[e(Qe,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(se,{autofocus:"",modelValue:a(d).code,"onUpdate:modelValue":s[1]||(s[1]=f=>a(d).code=f),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!a(d).errors.code,disable:a(d).processing,"error-message":a(d).errors.code,rules:[f=>f&&f.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:a(d).processing},null,8,["disable"]),e(I,{icon:"cancel",label:"Batal",disable:a(d).processing,onClick:s[2]||(s[2]=f=>a(ee).get(i.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},sy=Object.freeze(Object.defineProperty({__proto__:null,default:ny},Symbol.toStringTag,{value:"Module"})),ry={class:"column"},iy={class:"bg-grey-2 q-pa-xs"},dy={class:"text-subtitle1 text-bold text-grey-10"},uy={class:"text-caption text-grey-8"},my={class:"col-12 col-sm-6"},cy={class:"full-width"},py={key:1},fy={key:0},gy={key:1},by={class:"col-12 col-sm-6",align:"left"},vy={class:"full-width"},yy={class:"full-width",style:{"border-collapse":"collapse"}},_y={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ky={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},wy={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},hy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},$y={key:0},xy={class:"col-12 col-sm-6"},Sy={class:"text-body2 text-grey-7 text-italic"},Vy={class:"col-12 col-sm-6"},qy={class:"row justify-end q-gutter-y-xs"},Cy={class:"col-12 row justify-between"},Ty={class:"text-subtitle2 text-bold"},Eo={__name:"MainInfoTab",props:{data:Object},setup(u){const n=u;return(d,o)=>{const i=Z("i-link");return c(),w("div",ry,[e(ae,{class:"q-pa-none"},{default:l(()=>{var s,g;return[t("div",iy,[t("div",dy," RETUR #"+r(n.data.code),1),t("div",uy,[v(" Kasir: "+r((s=n.data.cashier)==null?void 0:s.username)+" - "+r((g=n.data.cashier)==null?void 0:g.name)+" | "+r(a(be)(n.data.datetime))+" ",1),n.data.cashier_session?(c(),w(Q,{key:0},[v(" | Session ID: "+r(n.data.cashier_session.id)+" | Terminal: "+r(n.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]}),_:1}),e(Ae),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",my,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",cy,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.customer?(c(),O(i,{key:0,href:d.route("admin.customer.detail",{id:n.data.customer_id})},{default:l(()=>[e(T,{class:"inline-icon",name:"person"}),v(" "+r(n.data.customer_name)+" ("+r(n.data.customer_code)+") ",1)]),_:1},8,["href"])):(c(),w("div",py,[e(T,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum ",-1))]))])]),n.data.customer_phone?(c(),w("tr",fy,[t("td",null,[e(T,{class:"inline-icon",name:"phone"}),v(" "+r(n.data.customer_phone),1)])])):k("",!0),n.data.customer_address?(c(),w("tr",gy,[t("td",null,[e(T,{class:"inline-icon",name:"home_pin"}),v(" "+r(n.data.customer_address),1)])])):k("",!0)])])]),t("div",by,[o[8]||(o[8]=t("div",{class:"text-subtitle2 text-bold text-grey-8"}," Info Retur Penjualan ",-1)),t("table",vy,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(be)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(n.data.status_label),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(n.data.refund_status_label),1)])])])])]),_:1}),e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",yy,[o[10]||(o[10]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(c(!0),w(Q,null,je(n.data.details,s=>(c(),w("tr",{key:s.id},[t("td",_y,[e(i,{href:d.route("admin.product.detail",s.product_id)},{default:l(()=>[v(r(s.product_name),1)]),_:2},1032,["href"])]),t("td",ky,r(a(K)(s.price)),1),t("td",wy,r(s.quantity),1),t("td",hy,r(a(K)(s.subtotal_price)),1)]))),128)),n.data.details.length==0?(c(),w("tr",$y,[...o[9]||(o[9]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)])])]),_:1}),e(Ae),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",xy,[o[11]||(o[11]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Sy,r(n.data.notes?n.data.notes:"-"),1)]),t("div",Vy,[t("div",qy,[t("div",Cy,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Ty,r(a(K)(n.data.grand_total)),1)])])])]),_:1})])}}},Py=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Ry={key:0,class:"text-center q-mb-md text-grey-8"},Oy={class:"text-subtitle2 text-weight-medium"},Dy={class:"text-h5 text-center text-primary q-pb-md"},Iy={class:"text-center q-mt-md"},Uy={key:0,class:"text-h6 text-negative text-weight-bold"},Ey={key:1,class:"text-h6 text-positive text-weight-bold"},Ao={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,i=ve(),s=q(!1),g=q({method:"cash",amount:d.total,notes:null}),b=i.props.data.customer,f=X(()=>[...b?[{label:"Refund ke Wallet",value:"wallet"}]:[],{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(C=>({label:C.name,value:C.id}))]),m=X(()=>d.total-(g.value.amount||0)),p=X(()=>{const C=g.value.amount||0;return C<=0?"Jumlah pembayaran harus lebih dari 0.":C>d.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),y=X(()=>p.value===null),_=()=>{if(!y.value)return;s.value=!0;const C={id:g.value.method,amount:g.value.amount,notes:g.value.notes};o("accepted",C),s.value=!1},x=()=>{g.value.amount=d.total,g.value.method="cash",g.value.notes=null};return(C,$)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":$[4]||($[4]=B=>C.$emit("update:modelValue",B)),onBeforeShow:x},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...$[5]||($[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(b)?(c(),w("div",Ry,[t("div",Oy,[v(r(a(b).code)+" ",1),$[6]||($[6]=t("br",null,null,-1)),v(" "+r(a(b).name)+" ",1),$[7]||($[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(K)(a(b).wallet_balance)),1)])])):k("",!0),t("div",Dy," Total: Rp. "+r(a(K)(u.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":$[0]||($[0]=B=>g.value.method=B),options:f.value,label:g.value.method=="wallet"?"Tujuan":"Sumber Dana",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:s.value},null,8,["modelValue","options","label","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":$[1]||($[1]=B=>g.value.amount=B),label:"Jumlah Uang",outlined:!0,dense:"",disable:s.value,class:"q-mb-md",error:!y.value,"error-message":p.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:g.value.notes,"onUpdate:modelValue":$[2]||($[2]=B=>g.value.notes=B),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:s.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Iy,[m.value>0?(c(),w("div",Uy," Sisa Refund: Rp. "+r(a(K)(m.value)),1)):(c(),w("div",Ey," Refund Lunas "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(I,{flat:"",label:"Batal",color:"grey",onClick:$[3]||($[3]=B=>C.$emit("update:modelValue",!1))}),e(I,{label:"Bayar",color:"positive",onClick:_,disable:s.value||!y.value,loading:s.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ay=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),jy={class:"column"},Ny={class:"row"},My={class:"full-width",style:{"border-collapse":"collapse"}},By={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},zy={class:"row items-center q-gutter-x-sm"},Fy={class:"text-weight-bold"},Ly={class:"row items-center q-gutter-x-sm q-mt-xs"},Ky={class:"text-caption text-grey-6"},Hy={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Yy={class:"text-caption text-grey-6"},Wy={class:"q-mt-xs"},Qy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Jy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Gy={key:0},Xy={class:"text-right q-pa-sm"},Zy={class:"text-right q-pa-sm"},jo={__name:"RefundTab",props:{data:Object},setup(u){const n=u;console.log(n.data);const d=Se(),o=q(!1),i=()=>{o.value=!0},s=X(()=>n.data.grand_total-n.data.total_refunded),g=async f=>{const m={order_id:n.data.id,...f};d.loading.show({message:"Memproses pembayaran..."});try{const p=await Oe.post(route("admin.sales-order-return.add-refund"),m);d.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.sales-order-return.detail",{id:n.data.id})+"?tab=refund")}catch(p){let y="Gagal memproses refund.";p.response&&p.response.data&&p.response.data.message?y=p.response.data.message:p.message&&(y=p.message),d.notify({message:y,color:"negative",icon:"error"})}finally{d.loading.hide()}},b=f=>{d.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{d.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.sales-order-return.delete-refund",{id:f.id})),d.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.sales-order-return.detail",{id:n.data.id})+"?tab=refund")}catch(m){let p="Gagal menghapus refund pembayaran.";m.response&&m.response.data&&m.response.data.message?p=m.response.data.message:m.message&&(p=m.message),d.notify({message:p,color:"negative",icon:"error"})}finally{d.loading.hide()}})};return(f,m)=>(c(),w(Q,null,[t("div",jy,[e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("div",Ny,[f.$can("admin.sales-order-return.add-refund")&&n.data.remaining_refund>0?(c(),O(I,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=J(p=>i(),["stop"]))})):k("",!0)]),t("table",My,[m[7]||(m[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(c(!0),w(Q,null,je(n.data.refunds,p=>(c(),w("tr",{key:p.id},[t("td",By,[t("div",zy,[e(T,{name:"tag",size:"xs",color:"grey-7"}),t("span",Fy,r(p.code),1)]),t("div",Ly,[e(T,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Ky,r(a(be)(p.created_at)),1)]),(p.type==="transfer"||p.type==="cash")&&p.account?(c(),w("div",Hy,[e(T,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Yy,r(p.account.name),1)])):k("",!0),t("div",Wy,[e(vt,{label:f.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[p.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Qy,r(a(K)(p.amount)),1),t("td",Jy,[f.$can("admin.sales-order-return.delete-refund")?(c(),O(I,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(p)},null,8,["onClick"])):k("",!0)])]))),128)),n.data.refunds.length==0?(c(),w("tr",Gy,[...m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Direfund",-1)),t("th",Xy,r(a(K)(n.data.total_refunded)),1),m[4]||(m[4]=t("th",null,null,-1))]),t("tr",null,[m[5]||(m[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Refund",-1)),t("th",Zy,r(a(K)(n.data.remaining_refund)),1),m[6]||(m[6]=t("td",null,null,-1))])])])]),_:1})]),e(Ao,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=p=>o.value=p),total:s.value,customer:n.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},e_=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),t_={class:"q-gutter-sm"},a_={class:"col col-lg-6 q-pa-xs",align:"center"},Vl="Retur Penjualan",l_={__name:"Detail",setup(u){const n=new URLSearchParams(window.location.search),d=ve(),o=d.props.data,i=q(n.get("preview")||!1),g=q(n.get("tab")||"main-info");$e(()=>{gt(()=>{const f=n.get("print_size");f&&b(f)})});const b=f=>{window.open(route("admin.sales-order-return.print",{id:d.props.data.id,size:f}),"_self")};return(f,m)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),w(Q,null,[e(p,{title:Vl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Vl))])]),"left-button":l(()=>[t("div",t_,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>f.$goBack())})])]),"right-button":l(()=>[e(I,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=_=>b("58mm"))}),e(I,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=_=>b("a4"))}),i.value?k("",!0):(c(),O(I,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=_=>a(ee).get(f.route("admin.sales-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",a_,[e(ge,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Ct,{modelValue:g.value,"onUpdate:modelValue":m[4]||(m[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(c(),O(ot,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Tt,{modelValue:g.value,"onUpdate:modelValue":m[5]||(m[5]=_=>g.value=_),animated:""},{default:l(()=>[e(nt,{name:"main-info",class:"q-pa-none"},{default:l(()=>[e(Eo,{data:a(o)},null,8,["data"])]),_:1}),e(nt,{name:"refund",class:"q-pa-none"},{default:l(()=>[e(jo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},o_=Object.freeze(Object.defineProperty({__proto__:null,default:l_},Symbol.toStringTag,{value:"Module"})),n_={class:"text-weight-medium"},s_={class:"text-caption text-grey-6 elipsis"},r_={class:"column items-end"},i_={class:"text-caption text-grey-6 text-italic"},No={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(u){const n=Se(),d=at(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,s)=>(c(),O(Ie,{dense:"",rows:u.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ke({height:a(d)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(c(!0),w(Q,null,je(g.cols,b=>(c(),O(Gt,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left wrap-column"},{default:l(()=>[t("div",n_,r(g.row.product_name),1),t("div",s_,r(g.row.product_barcode),1),g.row.notes?(c(),O(he,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal_price",props:g,class:"text-right"},{default:l(()=>[t("div",r_,[t("div",null,r(a(K)(g.row.subtotal_price)),1),t("div",i_,r(a(K)(g.row.quantity))+" x Rp. "+r(a(K)(g.row.price)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(I,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:u.isProcessing},null,8,["onClick","disable"]),e(I,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:u.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},d_=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"})),u_={class:"row items-center no-wrap"},m_={class:"col-auto"},Mo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,i=d,s=()=>{i("save")},g=X(()=>o.item.quantity*o.item.price),b=p=>{p.stopPropagation(),p.preventDefault()},f=p=>{o.modelValue&&(p.key==="Enter"?(s(),i("update:modelValue",!1),b(p)):p.key==="Escape"&&(i("update:modelValue",!1),b(p)))};return $e(()=>{window.addEventListener("keydown",f)}),wt(()=>{window.removeEventListener("keydown",f)}),n({getCurrentItem:()=>o.item}),(p,y)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":y[6]||(y[6]=_=>p.$emit("update:modelValue",_))},{default:l(()=>[e(ge,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",u_,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",m_,[e(I,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=_=>p.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(se,{modelValue:u.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=_=>u.item.product_name=_),label:"Produk","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=_=>u.item.quantity=_),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.price,"onUpdate:modelValue":y[3]||(y[3]=_=>u.item.price=_),label:"Harga","hide-bottom-space":"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":y[4]||(y[4]=_=>g.value=_),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:u.item.notes,"onUpdate:modelValue":y[5]||(y[5]=_=>u.item.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:l(()=>[le(e(I,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[pe]]),e(I,{flat:"",label:"Simpan",color:"primary",onClick:s,disable:u.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},c_=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),p_={key:0,class:"q-select__selected-item"},Bo={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(u,{expose:n,emit:d}){const o=q(null),i=u,s=d,g=q([]);let b=null;const f=q(i.modelValue);$e(()=>{i.initialData&&(f.value=i.initialData)}),He(f,y=>{s("update:modelValue",y),s("customerSelected",y)}),He(()=>i.modelValue,y=>{f.value=y}),n({focus:()=>{o.value&&o.value.focus()}});const p=(y,_)=>{if(y.length<i.minLength){_(()=>{g.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Oe.get(`/web-api/customers?q=${y}`).then(x=>{_(()=>{g.value=x.data.data})}).catch(x=>{console.error("Gagal mengambil data pelanggan:",x),_(()=>{g.value=[]})})},500)};return(y,_)=>(c(),O(ce,{class:qe(u.class),ref_key:"qSelectRef",ref:o,modelValue:f.value,"onUpdate:modelValue":_[0]||(_[0]=x=>f.value=x),"use-input":"","input-debounce":"0",label:u.label,options:g.value,onFilter:p,clearable:"",error:u.error,behavior:"menu","error-message":u.errorMessage,disable:u.disable,"hide-bottom-space":"",outlined:u.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(x=>[e(oe,Gl(Xl(x.itemProps)),{default:l(()=>[e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[v(r(x.opt.name),1)]),_:2},1024),e(we,{caption:""},{default:l(()=>[e(T,{name:"person",size:"14px"}),v(" "+r(x.opt.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(x=>[x.opt?(c(),w("div",p_,r(x.opt.name)+" ("+r(x.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},f_={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(u,{emit:n}){return(d,o)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>d.$emit("update:modelValue",i))},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])]),_:1}),e(ae,null,{default:l(()=>[...o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])]),_:1}),e(tt,{align:"center"},{default:l(()=>[le(e(I,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},zo=_t(f_,[["__scopeId","data-v-22783525"]]),g_=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),b_={class:"row items-center no-wrap"},v_={class:"col text-subtite text-bold text-grey-8"},y_={class:"col-auto"},Fo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,i=d,s=()=>{i("save")},g=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(s(),g(m)):m.key==="Escape"&&(i("update:modelValue",!1),g(m)))};return $e(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),n({getCurrentItem:()=>o.item}),(m,p)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":p[4]||(p[4]=y=>m.$emit("update:modelValue",y))},{default:l(()=>[e(ge,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",b_,[t("div",v_," Edit "+r(u.data.code),1),t("div",y_,[e(I,{flat:"",size:"sm",round:"",icon:"close",onClick:p[0]||(p[0]=y=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(zt,{modelValue:u.data.datetime,"onUpdate:modelValue":p[1]||(p[1]=y=>u.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:u.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status],"onUpdate:modelValue":p[2]||(p[2]=y=>m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:u.data.notes,"onUpdate:modelValue":p[3]||(p[3]=y=>u.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:l(()=>[le(e(I,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[pe]]),le(e(I,{flat:"",label:"Simpan",color:"primary",onClick:s,disable:u.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},__=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),k_={class:"q-gutter-sm"},w_={class:"row items-center"},h_={class:"text-weight-bold"},$_={class:"row q-col-gutter-none full-width"},x_={class:"col-sm-6 col-12 col"},S_={class:"row full-width"},V_={key:0,class:"row"},q_={class:"col-sm-6 col-12"},C_={class:"row q-ml-sm items-end"},T_={class:"row col grow"},P_={class:"col-12 q-pa-sm column"},R_={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},O_={key:0,class:"col"},D_={class:"text-caption text-grey-6 q-mt-xs"},I_={key:0,class:"text-caption text-grey-8 q-mt-xs"},U_={class:"text-italic"},E_={key:1,class:"col"},A_={class:"q-pa-sm q-pb-none text-grey-8"},j_={class:"col"},N_={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},M_={class:"text-h4 text-weight-bold"},B_={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},z_={class:"col q-py-sm"},F_={class:"q-py-sm"},L_={__name:"Editor",setup(u){const n=Se(),d=ve(),o=q(!0),i=q(null),s=q(null),g=q(null),b=q(!1),f=q(null),m=q(null),{isFullscreen:p,toggleFullscreen:y}=va(m),_="Retur #"+d.props.data.code,x=q(d.props.data.customer),C=q(""),$=q(!1),B=q(!1),Y=q(!1),E=q(!1),z=q(null),R=De({id:d.props.data.id,code:d.props.data.code,customer_id:d.props.data.customer_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),M=X(()=>R.items.reduce((de,F)=>de+F.price*F.quantity,0)),A=()=>{var de;y(),p.value||(de=f==null?void 0:f.value)==null||de.hideDrawer()},V=de=>isNaN(de)||de<=0?(ft("Kuantitas tidak valid.","top"),!1):!0,D=de=>isNaN(de)||de<0?(ft("Harga tidak valid.","top"),!1):!0,P=de=>!de||de.length==0?(ft("Barcode tidak valid.","top"),!1):!0,h=de=>{C.value.endsWith("*")?C.value+=de.name:C.value=de.name},U=async()=>{const de=C.value.trim();if(de.length===0){B.value=!0;return}const F=de.split("*");let _e=1,re="",H=null;if(F.length===1)re=F[0];else if(F.length<=3)_e=parseInt(F[0]),re=F[1],F.length===3&&(H=parseFloat(F[2]));else{ft("Input tidak valid.","top");return}if(re.length===0){B.value=!0;return}!P(re)&&!V(_e)&&!D(H)||($.value=!0,await Oe.post(route("admin.sales-order-return.add-item"),{order_id:R.id,product_code:re,qty:_e,price:H,merge:o.value}).then(ne=>{const G=ne.data.data.item;let fe=-1;ne.data.data.mergeItem&&(fe=R.items.findIndex(Ce=>Ce.id===G.id)),fe===-1?R.items.push(G):R.items[fe]=G,C.value="",H!==null&&H!==parseFloat(G.price)&&ft("Harga tidak dapat diubah!","top")}).catch(ne=>{var G,fe;ct((fe=(G=ne.response)==null?void 0:G.data)==null?void 0:fe.message,"top"),console.error("Gagal mengambil data produk:",ne)}),$.value=!1,gt(()=>{var ne;(ne=i.value)==null||ne.focus()}))},N=de=>{z.value=Object.create(de),Y.value=!0},S=de=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${de.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{$.value=!0,Oe.post(route("admin.sales-order-return.remove-item"),{id:de.id}).then(()=>{const F=R.items.findIndex(_e=>_e.id===de.id);F!==-1&&(R.items.splice(F,1)[0],pt("Item telah dihapus","top"))}).catch(F=>{var _e,re;ct(((re=(_e=F==null?void 0:F.response)==null?void 0:_e.data)==null?void 0:re.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(F)}).finally(()=>{$.value=!1})})},j=()=>{$.value=!0;const de=s.value.getCurrentItem(),F={id:de.id,qty:de.quantity,price:de.price};de.notes&&(F.notes=de.notes),Oe.post(route("admin.sales-order-return.update-item"),F).then(_e=>{const re=_e.data.data,H=R.items.findIndex(ne=>ne.id===re.id);H!==-1&&(R.items[H]=re,pt("Item telah diperbarui","top")),Y.value=!1}).catch(_e=>{var re,H;ct(((H=(re=_e==null?void 0:_e.response)==null?void 0:re.data)==null?void 0:H.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(_e)}).finally(()=>{$.value=!1})};$e(()=>{const de=F=>{b.value||Y.value||B.value||E.value||(F.key==="F1"?(F.preventDefault(),b.value=!0):F.key==="F2"?(F.preventDefault(),g.value.focus()):F.key==="F3"?(F.preventDefault(),i.value.focus()):F.key==="F4"?(F.preventDefault(),o.value=!o.value):F.key==="F10"||F.ctrlKey&&F.key==="Enter"?(F.preventDefault(),ie()):F.key==="F11"?(F.preventDefault(),A()):(F.key==="F5"||F.key==="F6"||F.key==="F7"||F.key==="F12")&&F.preventDefault())};document.addEventListener("keydown",de),wt(()=>{document.removeEventListener("keydown",de)}),gt(()=>{var F;(F=f==null?void 0:f.value)==null||F.hideDrawer()})});const te=async()=>{$.value=!0;const de={id:R.id,customer_id:R.customer_id??null,datetime:Jt(R.datetime),notes:R.notes};await Oe.post(route("admin.sales-order-return.update"),de).then(F=>{const _e=F.data.data.id;R.customer_id=_e.customer_id}).catch(F=>{var _e,re;ct(((re=(_e=F==null?void 0:F.response)==null?void 0:_e.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(F)}).finally(()=>{$.value=!1})},ie=de=>{if(R.items.length===0){pt("Item masih kosong","top");return}ht.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${R.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{$.value=!0,Oe.post(route("admin.sales-order-return.close",{id:R.id})).then(F=>{pt("Transaksi selesai"),ee.get(route("admin.sales-order-return.detail",{id:R.id}))}).catch(F=>{var _e,re;ct((re=(_e=F.response)==null?void 0:_e.data)==null?void 0:re.message),console.error(F)}).finally(()=>{$.value=!1})})},me=()=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${R.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order-return.cancel",{id:R.id}),{id:R.id}).then(()=>{pt("Transaksi telah dibatalkan."),ee.visit(route("admin.sales-order-return.detail",{id:R.id}))}).catch(de=>{var _e,re;const F=((re=(_e=de.response)==null?void 0:_e.data)==null?void 0:re.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:F,color:"warning",position:"bottom"}),console.error(de)})})},Re=()=>{window.open(route("admin.sales-order-return.detail",{id:R.id})+"?preview=1","_blank")},Be=X(()=>x.value?x.value.wallet_balance>=M.value:!0);return(de,F)=>{const _e=Z("i-head"),re=Z("authenticated-layout");return c(),w(Q,null,[e(_e,{title:_}),e(re,{ref_key:"authLayoutRef",ref:f,"show-drawer-button":!0},{title:l(()=>[v(r(_))]),"left-button":l(()=>[t("div",k_,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:F[0]||(F[0]=H=>a(ee).get(de.route("admin.sales-order-return.index")))})])]),"right-button":l(()=>[t("div",w_,[a(n).screen.gt.sm?(c(),w(Q,{key:0},[t("div",h_,r(a(d).props.auth.user.username),1),F[20]||(F[20]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ba)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(ge,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",$_,[t("div",x_,[t("div",S_,[e(Bo,{ref_key:"customerAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:x.value,"onUpdate:modelValue":F[2]||(F[2]=H=>x.value=H),label:"Pelanggan",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),x.value?(c(),w("div",V_,[t("div",{class:qe(["q-mt-xs q-ml-sm text-bold",Be.value?"text-green":"text-red"])}," Wallet: "+r(x.value?"Rp. "+a(K)(x.value?x.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:qe(["q-mt-xs q-ml-sm text-bold",x.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(x.value?"Rp. "+a(K)(x.value?x.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",q_,[e(se,{ref_key:"userInputRef",ref:i,modelValue:C.value,"onUpdate:modelValue":F[5]||(F[5]=H=>C.value=H),onKeyup:F[6]||(F[6]=Ht(J(H=>U(),["prevent"]),["enter"])),loading:$.value,disable:$.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(T,{name:"search",onClick:F[3]||(F[3]=H=>B.value=!0),class:"cursor-pointer"})]),append:l(()=>{var H;return[((H=C.value)==null?void 0:H.length)>0?(c(),O(T,{key:0,name:"send",onClick:F[4]||(F[4]=ne=>U()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",C_,[e(xt,{class:"col",modelValue:o.value,"onUpdate:modelValue":F[7]||(F[7]=H=>o.value=H),label:"Gabungkan item",disable:$.value},null,8,["modelValue","disable"])])])]),t("div",T_,[t("div",P_,[e(No,{items:R.items,onUpdateQuantity:F[8]||(F[8]=({id:H,value:ne})=>de.updateQuantity(H,ne)),onRemoveItem:S,onEditItem:N,"is-processing":$.value},null,8,["items","is-processing"])])]),t("div",R_,[a(n).screen.gt.sm?(c(),w("div",O_,[t("div",D_,r(R.items.length)+" item(s) ",1),R.notes?(c(),w("div",I_,[F[21]||(F[21]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",U_,[e(he,{text:R.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(n).screen.gt.sm?(c(),w("div",E_,[t("div",A_,[t("div",null,"Return #: "+r(R.code),1),t("div",null,"Order #: "+r(a(d).props.data.sales_order.code),1),t("div",null,r(a(be)(R.datetime)),1)])])):k("",!0),t("div",j_,[t("div",N_,[F[23]||(F[23]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",M_,[F[22]||(F[22]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(K)(M.value)),1)])])])]),t("div",B_,[t("div",z_,[e(I,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:F[9]||(F[9]=H=>ie()),disable:!de.$can("admin.sales-order-return.close")||$.value||R.items.length===0||R.status!=="draft",loading:$.value},null,8,["disable","loading"])]),t("div",F_,[e(I,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:F[13]||(F[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[le((c(),O(oe,{clickable:"",onClick:F[10]||(F[10]=J(H=>E.value=!0,["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...F[24]||(F[24]=[v("Edit Rincian",-1)])]),_:1})]),_:1})),[[ue],[pe]]),le((c(),O(oe,{clickable:"",onClick:F[11]||(F[11]=J(H=>Re(),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"preview"})]),_:1}),e(L,null,{default:l(()=>[...F[25]||(F[25]=[v("Pratinjau",-1)])]),_:1})]),_:1})),[[ue],[pe]]),le((c(),O(oe,{clickable:"",onClick:F[12]||(F[12]=J(H=>me(),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"cancel",color:"negative"})]),_:1}),e(L,{class:"text-negative"},{default:l(()=>[...F[26]||(F[26]=[v(" Batalkan ",-1)])]),_:1})]),_:1})),[[ue],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Mo,{ref_key:"itemEditorRef",ref:s,modelValue:Y.value,"onUpdate:modelValue":F[14]||(F[14]=H=>Y.value=H),item:z.value,onSave:F[15]||(F[15]=H=>j()),"is-processing":$.value},null,8,["modelValue","item","is-processing"]),e(ya,{modelValue:B.value,"onUpdate:modelValue":F[16]||(F[16]=H=>B.value=H),onProductSelected:h},null,8,["modelValue"]),e(Fo,{modelValue:E.value,"onUpdate:modelValue":F[17]||(F[17]=H=>E.value=H),data:R,onSave:F[18]||(F[18]=H=>te()),"is-processing":$.value},null,8,["modelValue","data","is-processing"]),e(zo,{modelValue:b.value,"onUpdate:modelValue":F[19]||(F[19]=H=>b.value=H)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},K_=Object.freeze(Object.defineProperty({__proto__:null,default:L_},Symbol.toStringTag,{value:"Module"})),H_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Y_={class:"q-pa-xs"},W_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Q_={key:0},J_={key:1},G_={key:2},X_={key:3},Z_={key:0},ek={key:1},tk={key:0},ak={key:0},lk={key:1},ok={class:"flex justify-end"},ql="Retur Penjualan",nk={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=Mt(),m=Bt(),p=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...Vt(f-2,f-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...qt()],_=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.SALES_ORDER_RETURN_STATUSES)],x=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES)],C=De({search:"",year:f,month:m,status:"all",refund_status:"all",...Ne()}),$=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),B=[{name:"code",label:"Info Order",field:"code",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{A()});const Y=P=>{if(P.status=="draft"){E(P);return}z(P)},E=P=>{ee.get(route("admin.sales-order-return.edit",P.id))},z=P=>{ee.get(route("admin.sales-order-return.detail",P.id))},R=P=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order-return.cancel",{id:P.id}),{id:P.id}).then(h=>{const U=h.data.data,N=o.value.findIndex(S=>S.id===U.id);if(N===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[N].status="canceled",n.notify({message:h.data.message,position:"bottom"})}).catch(h=>{var N,S;const U=((S=(N=h.response)==null?void 0:N.data)==null?void 0:S.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:U,color:"warning",position:"bottom"}),console.error(h)})})},M=P=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.sales-order-return.delete",P.id),fetchItemsCallback:A,loading:i}),A=(P=null)=>{Me({pagination:$,filter:C,props:P,rows:o,url:route("admin.sales-order-return.data"),loading:i,tableRef:s})},V=()=>{A()},D=X(()=>n.screen.gt.sm?B:B.filter(P=>P.name==="id"||P.name==="action"));return He(()=>C.year,P=>{P===null&&(C.month=null)}),(P,h)=>{const U=Z("i-head"),N=Z("authenticated-layout");return c(),w(Q,null,[e(U,{title:ql}),e(N,null,Je({title:l(()=>[v(r(ql))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=S=>d.value=!d.value)},null,8,["icon"]),P.$can("admin.sales-order-return.edit")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=S=>a(ee).get(P.route("admin.sales-order-return.add")))})):k("",!0)]),default:l(()=>[t("div",Y_,[e(Ie,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:$.value,"onUpdate:pagination":h[10]||(h[10]=S=>$.value=S),filter:C.search,loading:i.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:A,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:j,filter:te})=>[t("div",W_,[t("span",null,r(j)+" "+r(te?" with term "+te:""),1)])]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:J(j=>Y(S.row),["prevent"])},{default:l(()=>[e(W,{key:"code",props:S,class:"wrap-column"},{default:l(()=>{var j,te,ie;return[t("div",null,[e(T,{name:"tag"}),v(" "+r(S.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(r(a(be)(S.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[S.row.cashier?(c(),w("div",Q_,[e(T,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((j=S.row.cashier)==null?void 0:j.username),1)])):k("",!0),S.row.cashier_session?(c(),w("div",J_,[e(T,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((ie=(te=S.row.cashier_session)==null?void 0:te.cashier_terminal)==null?void 0:ie.name),1)])):k("",!0),S.row.customer?(c(),w("div",G_,[e(T,{name:"person",class:"inline-icon"}),e(fa,{href:P.route("admin.customer.detail",{id:S.row.customer.id}),onClick:h[7]||(h[7]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(S.row.customer.code)+" - "+r(S.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(K)(S.row.grand_total)),1),S.row.notes?(c(),w("div",X_,[e(T,{name:"notes"}),v(" "+r(S.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Nt,{status:S.row.status,statuses:P.$CONSTANTS.SALES_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Nt,{status:S.row.refund_status,statuses:P.$CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(W,{key:"cashier_id",props:S},{default:l(()=>{var j,te,ie;return[S.row.cashier?(c(),w("div",Z_,[e(T,{name:"person",class:"inline-icon"}),v(" "+r((j=S.row.cashier)==null?void 0:j.username),1)])):k("",!0),S.row.cashier_session?(c(),w("div",ek,[e(T,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((ie=(te=S.row.cashier_session)==null?void 0:te.cashier_terminal)==null?void 0:ie.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(W,{key:"customer_id",props:S},{default:l(()=>[S.row.customer?(c(),w("div",tk,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(S.row.customer_code)+" - "+r(S.row.customer_name),1)]),S.row.customer_phone?(c(),w("div",ak,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(S.row.customer_phone),1)])):k("",!0),S.row.customer_address?(c(),w("div",lk,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(S.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:S},{default:l(()=>[v(r(a(K)(S.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:S},{default:l(()=>[e(he,{text:S.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:S,onClick:h[9]||(h[9]=J(()=>{},["stop"]))},{default:l(()=>[t("div",ok,[P.$can("admin.sales-order-return.detail")||P.$can("admin.sales-order-return.edit")||P.$can("admin.sales-order-return.cancel")||P.$can("admin.sales-order-return.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[8]||(h[8]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[S.row.status!="draft"&&P.$can("admin.sales-order-return.detail")?le((c(),O(oe,{key:0,onClick:J(j=>z(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"visibility"})]),_:1}),e(L,null,{default:l(()=>[...h[11]||(h[11]=[v(" Lihat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),S.row.status=="draft"&&P.$can("admin.sales-order-return.edit")?le((c(),O(oe,{key:1,onClick:J(j=>E(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...h[12]||(h[12]=[v(" Edit ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),S.row.status=="draft"&&P.$can("admin.sales-order-return.cancel")?le((c(),O(oe,{key:2,onClick:J(j=>R(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"cancel"})]),_:1}),e(L,null,{default:l(()=>[...h[13]||(h[13]=[v(" Batalkan ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),e(Ae),P.$can("admin.sales-order-return.delete")?le((c(),O(oe,{key:3,onClick:J(j=>M(S.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...h[14]||(h[14]=[v(" Hapus ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",H_,[e(ce,{modelValue:C.year,"onUpdate:modelValue":[h[2]||(h[2]=S=>C.year=S),V],options:p,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),C.year!="all"?(c(),O(ce,{key:0,modelValue:C.month,"onUpdate:modelValue":[h[3]||(h[3]=S=>C.month=S),V],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:C.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:C.status,"onUpdate:modelValue":[h[4]||(h[4]=S=>C.status=S),V],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:C.refund_status,"onUpdate:modelValue":[h[5]||(h[5]=S=>C.refund_status=S),V],options:x,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:C.search,"onUpdate:modelValue":h[6]||(h[6]=S=>C.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},sk=Object.freeze(Object.defineProperty({__proto__:null,default:nk},Symbol.toStringTag,{value:"Module"})),rk={key:0,class:"text-center q-mb-md text-grey-8"},ik={class:"text-subtitle2 text-weight-medium"},dk={class:"text-h5 text-center text-primary q-pb-md"},uk={class:"q-mb-md flex flex-center"},mk={key:1},ck={class:"col-6"},pk={class:"col-6"},fk={class:"row"},gk={class:"text-center q-mt-md"},bk={key:0,class:"text-h6 text-negative text-weight-bold"},vk={key:1,class:"text-h6 text-green-8 text-weight-bold"},yk={key:2,class:"text-h6 text-positive text-weight-bold"},_k={key:2},kk={class:"text-h6 text-negative text-center"},wk={key:3},hk={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,i=ve(),s=q(!1),g=q("cash"),b=q(new Date),f=q([]),m=q([]),p=De([{id:"cash",amount:0}]),y=i.props.settings.default_payment_mode,_=X(()=>[{label:"Laci Kasir",value:"cash"},...d.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(h=>({label:h.name,value:h.id}))]),x=X(()=>p.reduce((h,U)=>h+(U.amount||0),0)),C=X(()=>d.total-x.value),$=X(()=>{if(!d.customer)return!0;const h=p.find(N=>N.id==="wallet");return(h?h.amount:0)<=d.customer.wallet_balance}),B=new Date,Y=dt.addToDate(new Date,{days:30}),E=X(()=>[h=>!!h||"Tanggal jatuh tempo harus diisi",h=>dt.isBetweenDates(h,B,Y,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),z=X(()=>{if(g.value==="debt")return!!d.customer&&E.value.every(j=>j(b.value)===!0);const h=$.value,U=p.some(j=>(j.amount||0)>0),N=p.every(j=>(j.amount||0)>=0),S=C.value<=0;return h&&U&&N&&S}),R=()=>{if(p.length<3){const h=p.length;p.push({id:"cash",amount:0}),gt(()=>{const U=f.value[h];U&&(U.focus(),U.showPopup())})}},M=h=>{if(p.length>1){const U=p.findIndex(N=>N.id===h);U!==-1&&p.splice(U,1)}},A=(h,U="cash")=>{g.value=h,b.value=new Date,p.splice(0,p.length),h==="cash"&&(p.splice(0,p.length,{id:U,amount:d.total}),gt(()=>{m.value.length>0&&m.value[0]&&(m.value[0].focus(),m.value[0].select())}))},V=()=>{if(!z.value)return;s.value=!0;let h={total:d.total,is_debt:g.value==="debt"};if(g.value==="debt")h.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),h.payments=[];else{const U=x.value,N=U>d.total?U-d.total:0,S=C.value>0?C.value:0;h.payments=p,h.remaining_debt=S,h.change=N}o("accepted",h),s.value=!1},D=()=>{A("cash",d.customer?y:"cash")};$e(()=>{const h=U=>{d.modelValue&&U.ctrlKey&&U.key==="Enter"&&(U.preventDefault(),V())};document.addEventListener("keydown",h),wt(()=>{document.removeEventListener("keydown",h)})});const P=(h,U)=>{gt(()=>{m.value[U]&&(m.value[U].focus(),m.value[U].select())})};return(h,U)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":U[3]||(U[3]=N=>h.$emit("update:modelValue",N)),onBeforeShow:D},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...U[4]||(U[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[u.customer?(c(),w("div",rk,[t("div",ik,[v(" Username: "+r(u.customer.code)+" ",1),U[5]||(U[5]=t("br",null,null,-1)),v(" Nama: "+r(u.customer.name),1),U[6]||(U[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(K)(u.customer.wallet_balance)),1)])])):k("",!0),t("div",dk," Total: Rp. "+r(a(K)(u.total)),1),t("div",uk,[e(a(_a),{modelValue:g.value,"onUpdate:modelValue":[U[0]||(U[0]=N=>g.value=N),A],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!u.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="cash"?(c(),w("div",mk,[(c(!0),w(Q,null,je(p,(N,S)=>(c(),w("div",{key:S,class:"row q-col-gutter-sm q-mb-sm"},[t("div",ck,[e(a(ce),{modelValue:N.id,"onUpdate:modelValue":[j=>N.id=j,j=>P(j,S)],options:_.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:s.value,"hide-bottom-space":"",ref_for:!0,ref:j=>f.value[S]=j},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",pk,[e(Ee,{modelValue:N.amount,"onUpdate:modelValue":j=>N.amount=j,label:"Jumlah",outlined:!0,dense:"",disable:s.value,error:N.id==="wallet"&&!$.value,"error-message":N.id==="wallet"&&!$.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:j=>m.value[S]=j},Je({_:2},[p.length>1?{name:"append",fn:l(()=>[e(T,{size:"xs",name:"close",class:"cursor-pointer",onClick:j=>M(N.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",fk,[e(I,{disable:!(p.length<3&&C.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:R,size:"sm"},null,8,["disable"])]),t("div",gk,[C.value>0?(c(),w("div",bk," Sisa Tagihan: Rp. "+r(a(K)(C.value)),1)):C.value<0?(c(),w("div",vk," Kembalian: Rp. "+r(a(K)(Math.abs(C.value))),1)):(c(),w("div",yk," Tagihan Terbayar "))])])):g.value==="debt"&&u.customer?(c(),w("div",_k,[e(ra,{outlined:"",modelValue:b.value,"onUpdate:modelValue":U[1]||(U[1]=N=>b.value=N),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(B),"max-date":a(Y),rules:E.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",kk," Total Utang: Rp. "+r(a(K)(u.total)),1)])):g.value==="debt"&&!u.customer?(c(),w("div",wk,[...U[7]||(U[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)])])):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(I,{flat:"",label:"Batal",color:"grey",onClick:U[2]||(U[2]=N=>h.$emit("update:modelValue",!1)),class:"col"}),e(I,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:V,disable:s.value||!z.value,loading:s.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$k=Object.freeze(Object.defineProperty({__proto__:null,default:hk},Symbol.toStringTag,{value:"Module"})),xk={key:0},Sk={style:{float:"right"}},Vk={key:1},qk={style:{float:"right"}},Ck={key:2},Tk={style:{float:"right"}},Pk={key:3},Rk={style:{float:"right"}},Ok={style:{float:"right"}},Dk={class:"q-gutter-sm"},Ik={class:"q-my-md"},Uk={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(u,{emit:n}){const d=q(null),o=()=>{var i;(i=d.value)==null||i.focus()};return(i,s)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":s[0]||(s[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...s[1]||(s[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])]),_:1}),e(ae,{align:"center"},{default:l(()=>[s[22]||(s[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[s[2]||(s[2]=t("td",null,"ID",-1)),s[3]||(s[3]=t("td",null,":",-1)),t("td",null,r(u.order.code),1)]),u.customer?(c(),w("tr",xk,[s[5]||(s[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),s[6]||(s[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(u.customer.name)+" ",1),s[4]||(s[4]=t("br",null,null,-1)),v(r(u.customer.code),1)])])):k("",!0),t("tr",null,[s[8]||(s[8]=t("td",null,"Total",-1)),s[9]||(s[9]=t("td",null,":",-1)),t("td",null,[s[7]||(s[7]=v(" Rp. ",-1)),t("div",Sk,r(a(K)(u.payment.total)),1)])]),u.payment.cash_amount?(c(),w("tr",Vk,[s[11]||(s[11]=t("td",null,"Tunai",-1)),s[12]||(s[12]=t("td",null,":",-1)),t("td",null,[s[10]||(s[10]=v(" Rp. ",-1)),t("div",qk,r(a(K)(u.payment.cash_amount)),1)])])):k("",!0),u.payment.wallet_amount?(c(),w("tr",Ck,[s[14]||(s[14]=t("td",null,"Wallet",-1)),s[15]||(s[15]=t("td",null,":",-1)),t("td",null,[s[13]||(s[13]=v(" Rp. ",-1)),t("div",Tk,r(a(K)(u.payment.wallet_amount)),1)])])):k("",!0),u.payment.remaining_debt?(c(),w("tr",Pk,[s[17]||(s[17]=t("td",null,"Piutang",-1)),s[18]||(s[18]=t("td",null,":",-1)),t("td",null,[s[16]||(s[16]=v(" Rp. ",-1)),t("span",Rk,r(a(K)(u.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[s[20]||(s[20]=t("td",null,"Kembalian",-1)),s[21]||(s[21]=t("td",null,":",-1)),t("td",null,[s[19]||(s[19]=v(" Rp. ",-1)),t("div",Ok,r(a(K)(u.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:l(()=>[t("div",Dk,[e(I,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(I,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Ik,[e(I,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ek=_t(Uk,[["__scopeId","data-v-a3bb29e0"]]),Ak=Object.freeze(Object.defineProperty({__proto__:null,default:Ek},Symbol.toStringTag,{value:"Module"})),jk={class:"column"},Nk={class:"bg-grey-2 q-pa-xs"},Mk={class:"text-subtitle1 text-bold text-grey-10"},Bk={class:"text-caption text-grey-8"},zk={class:"col-12 col-sm-6"},Fk={class:"full-width"},Lk={key:1},Kk={key:0},Hk={key:1},Yk={class:"col-12 col-sm-6",align:"left"},Wk={class:"full-width"};const Qk={key:1},Jk={class:"full-width",style:{"border-collapse":"collapse"}},Gk={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Xk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Zk={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ew={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},tw={key:0},aw={class:"col-12 col-sm-6"},lw={class:"text-body2 text-grey-7 text-italic"},ow={class:"col-12 col-sm-6"},nw={class:"row justify-end q-gutter-y-xs"},sw={class:"col-12 row justify-between"},rw={class:"text-subtitle2 text-bold"},Lo={__name:"InvoiceTab",props:{data:Object},setup(u){const n=u;return(d,o)=>{const i=Z("i-link");return c(),w("div",jk,[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",Nk,[t("div",Mk," INVOICE #"+r(n.data.code),1),t("div",Bk,[v(" Kasir: "+r(n.data.cashier.username)+" - "+r(n.data.cashier.name)+" | "+r(a(be)(n.data.datetime))+" ",1),n.data.cashier_session?(c(),w(Q,{key:0},[v(" | Session ID: "+r(n.data.cashier_session.id)+" | Terminal: "+r(n.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Ae),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",zk,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",Fk,[t("tbody",null,[t("tr",null,[t("td",null,[n.data.customer?(c(),O(i,{key:0,href:d.route("admin.customer.detail",{id:n.data.customer_id})},{default:l(()=>[e(T,{class:"inline-icon",name:"person"}),v(" "+r(n.data.customer_name)+" ("+r(n.data.customer_code)+") ",1)]),_:1},8,["href"])):(c(),w("div",Lk,[e(T,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum ",-1))]))])]),n.data.customer_phone?(c(),w("tr",Kk,[t("td",null,[e(T,{class:"inline-icon",name:"phone"}),v(" "+r(n.data.customer_phone),1)])])):k("",!0),n.data.customer_address?(c(),w("tr",Hk,[t("td",null,[e(T,{class:"inline-icon",name:"home_pin"}),v(" "+r(n.data.customer_address),1)])])):k("",!0)])])]),t("div",Yk,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",Wk,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(be)(n.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(d.$CONSTANTS.SALES_ORDER_STATUSES[n.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[n.data.payment_status]),1)]),k("",!0),n.data.due_date?(c(),w("tr",Qk,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(la)(n.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",Jk,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(c(!0),w(Q,null,je(n.data.details,s=>(c(),w("tr",{key:s.id},[t("td",Gk,[e(i,{href:d.route("admin.product.detail",s.product_id)},{default:l(()=>[v(r(s.product_name),1)]),_:2},1032,["href"])]),t("td",Xk,r(a(K)(s.price)),1),t("td",Zk,r(s.quantity),1),t("td",ew,r(a(K)(s.subtotal_price)),1)]))),128)),n.data.details.length==0?(c(),w("tr",tw,[...o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)])])]),_:1}),e(Ae),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",aw,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",lw,r(n.data.notes?n.data.notes:"-"),1)]),t("div",ow,[t("div",nw,[t("div",sw,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",rw,r(a(K)(n.data.grand_total)),1)])])])]),_:1})])}}},iw=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),dw={key:0,class:"text-center q-mb-md text-grey-8"},uw={class:"text-subtitle2 text-weight-medium"},mw={class:"text-h5 text-center text-primary q-pb-md"},cw={class:"text-center q-mt-md"},pw={key:0,class:"text-h6 text-negative text-weight-bold"},fw={key:1,class:"text-h6 text-green-8 text-weight-bold"},gw={key:2,class:"text-h6 text-positive text-weight-bold"},Ko={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,i=ve(),s=q(!1),g=q({method:"cash",amount:d.total,notes:null}),b=i.props.data.customer,f=X(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...b?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(C=>({label:C.name,value:C.id}))]),m=X(()=>d.total-(g.value.amount||0)),p=X(()=>{const C=g.value.amount||0;return d.total,C<=0?"Jumlah pembayaran harus lebih dari 0.":g.value.method==="wallet"&&b&&C>b.wallet_balance?"Saldo wallet tidak mencukupi.":null}),y=X(()=>p.value===null),_=()=>{if(!y.value)return;s.value=!0;const C={total_paid:g.value.amount,payments:[{id:g.value.method,amount:g.value.amount}],notes:g.value.notes,change:Math.max(0,(g.value.amount||0)-d.total),remaining_debt:Math.max(0,d.total-(g.value.amount||0))};o("accepted",C),s.value=!1},x=()=>{g.value.amount=d.total,g.value.method="cash",g.value.notes=null};return(C,$)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":$[4]||($[4]=B=>C.$emit("update:modelValue",B)),onBeforeShow:x},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...$[5]||($[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(b)?(c(),w("div",dw,[t("div",uw,[v(r(a(b).code)+" ",1),$[6]||($[6]=t("br",null,null,-1)),v(" "+r(a(b).name)+" ",1),$[7]||($[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(K)(a(b).wallet_balance)),1)])])):k("",!0),t("div",mw," Total: Rp. "+r(a(K)(u.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":$[0]||($[0]=B=>g.value.method=B),options:f.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:s.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":$[1]||($[1]=B=>g.value.amount=B),label:"Jumlah Uang",outlined:!0,dense:"",disable:s.value,class:"q-mb-md",error:!y.value,"error-message":p.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:g.value.notes,"onUpdate:modelValue":$[2]||($[2]=B=>g.value.notes=B),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:s.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",cw,[m.value>0?(c(),w("div",pw," Sisa Tagihan: Rp. "+r(a(K)(m.value)),1)):m.value<0?(c(),w("div",fw," Kembalian: Rp. "+r(a(K)(Math.abs(m.value))),1)):(c(),w("div",gw," Tagihan Terbayar "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(I,{flat:"",label:"Batal",color:"grey",onClick:$[3]||($[3]=B=>C.$emit("update:modelValue",!1))}),e(I,{label:"Bayar",color:"positive",onClick:_,disable:s.value||!y.value,loading:s.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},bw=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),vw={class:"column"},yw={class:"row"},_w={class:"full-width",style:{"border-collapse":"collapse"}},kw={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ww={class:"row items-center q-gutter-x-sm"},hw={class:"text-weight-bold"},$w={class:"row items-center q-gutter-x-sm q-mt-xs"},xw={class:"text-caption text-grey-6"},Sw={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Vw={class:"text-caption text-grey-6"},qw={class:"q-mt-xs"},Cw={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Tw={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Pw={key:0},Rw={class:"text-right q-pa-sm"},Ow={class:"text-right q-pa-sm"},Ho={__name:"PaymentTab",props:{data:Object},setup(u){const n=u,d=X(()=>n.data.grand_total-n.data.total_paid),o=Se(),i=q(!1),s=()=>{i.value=!0},g=async f=>{const m={order_id:n.data.id,payments:f.payments,notes:f.notes};o.loading.show({message:"Memproses pembayaran..."});try{const p=await Oe.post(route("admin.sales-order.add-payment"),m);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),i.value=!1,ee.visit(route("admin.sales-order.detail",{id:n.data.id})+"?tab=payment")}catch(p){let y="Gagal memproses pembayaran.";p.response&&p.response.data&&p.response.data.message?y=p.response.data.message:p.message&&(y=p.message),o.notify({message:y,color:"negative",icon:"error"})}finally{o.loading.hide()}},b=f=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.sales-order.delete-payment",{id:f.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.sales-order.detail",{id:n.data.id})+"?tab=payment")}catch(m){let p="Gagal menghapus pembayaran.";m.response&&m.response.data&&m.response.data.message?p=m.response.data.message:m.message&&(p=m.message),o.notify({message:p,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(f,m)=>(c(),w(Q,null,[t("div",vw,[e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("div",yw,[f.$can("admin.sales-order.add-payment")&&d.value>0?(c(),O(I,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=J(p=>s(),["stop"]))})):k("",!0)]),t("table",_w,[m[7]||(m[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(c(!0),w(Q,null,je(n.data.payments,p=>(c(),w("tr",{key:p.id},[t("td",kw,[t("div",ww,[e(T,{name:"tag",size:"xs",color:"grey-7"}),t("span",hw,r(p.code),1)]),t("div",$w,[e(T,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",xw,r(a(be)(p.created_at)),1)]),(p.type==="transfer"||p.type==="cash")&&p.account?(c(),w("div",Sw,[e(T,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Vw,r(p.account.name),1)])):k("",!0),t("div",qw,[e(vt,{label:f.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[p.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Cw,r(a(K)(p.amount)),1),t("td",Tw,[f.$can("admin.sales-order.delete-payment")&&n.data.customer_id?(c(),O(I,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(p)},null,8,["onClick"])):k("",!0)])]))),128)),n.data.payments.length==0?(c(),w("tr",Pw,[...m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",Rw,r(a(K)(n.data.total_paid)),1),m[4]||(m[4]=t("th",null,null,-1))]),t("tr",null,[m[5]||(m[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Tagihan",-1)),t("th",Ow,r(a(K)(d.value)),1),m[6]||(m[6]=t("td",null,null,-1))])])])]),_:1})]),e(Ko,{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=p=>i.value=p),total:d.value,customer:n.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},Dw=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),Iw={class:"q-gutter-sm"},Uw={class:"col col-lg-6 q-pa-xs",align:"center"},Cl="Rincian Penjualan",Ew={__name:"Detail",setup(u){const n=new URLSearchParams(window.location.search),d=ve(),o=d.props.data,i=q(n.get("preview")||!1),g=q(n.get("tab")||"invoice");$e(()=>{gt(()=>{const f=n.get("print_size");f&&b(f)})});const b=f=>{window.open(route("admin.sales-order.print",{id:d.props.data.id,size:f}),"_self")};return(f,m)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),w(Q,null,[e(p,{title:Cl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Cl))])]),"left-button":l(()=>[t("div",Iw,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>f.$goBack())})])]),"right-button":l(()=>[e(I,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=_=>b("58mm"))}),e(I,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=_=>b("a4"))}),i.value?k("",!0):(c(),O(I,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=_=>a(ee).get(f.route("admin.sales-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Uw,[e(ge,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Ct,{modelValue:g.value,"onUpdate:modelValue":m[4]||(m[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(c(),O(ot,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Tt,{modelValue:g.value,"onUpdate:modelValue":m[5]||(m[5]=_=>g.value=_),animated:""},{default:l(()=>[e(nt,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(Lo,{data:a(o)},null,8,["data"])]),_:1}),e(nt,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(Ho,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Aw=Object.freeze(Object.defineProperty({__proto__:null,default:Ew},Symbol.toStringTag,{value:"Module"})),jw={class:"text-weight-medium"},Nw={class:"text-caption text-grey-6 elipsis"},Mw={class:"column items-end"},Bw={class:"text-caption text-grey-6 text-italic"},Yo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(u){const n=Se(),d=at(null,n.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,s)=>(c(),O(Ie,{dense:"",rows:u.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ke({height:a(d)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(c(!0),w(Q,null,je(g.cols,b=>(c(),O(Gt,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left wrap-column"},{default:l(()=>[t("div",jw,r(g.row.product_name),1),t("div",Nw,r(g.row.product_barcode),1),g.row.notes?(c(),O(he,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal_price",props:g,class:"text-right"},{default:l(()=>[t("div",Mw,[t("div",null,r(a(K)(g.row.subtotal_price)),1),t("div",Bw,r(a(K)(g.row.quantity))+" "+r(g.row.product_uom)+" x Rp. "+r(a(K)(g.row.price)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(I,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:u.isProcessing},null,8,["onClick","disable"]),e(I,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:u.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},zw=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),Fw={key:0,class:"text-center q-mb-md text-grey-8"},Lw={class:"text-subtitle2 text-weight-medium"},Kw={class:"text-h5 text-center text-primary q-pb-md"},Hw={class:"q-mb-md flex flex-center"},Yw={key:1},Ww={class:"col-6"},Qw={class:"col-6"},Jw={class:"row"},Gw={class:"text-center q-mt-md"},Xw={key:0,class:"text-h6 text-negative text-weight-bold"},Zw={key:1,class:"text-h6 text-green-8 text-weight-bold"},e0={key:2,class:"text-h6 text-positive text-weight-bold"},t0={key:2},a0={class:"text-h6 text-negative text-center"},l0={key:3},Wo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(u,{emit:n}){const d=u,o=n,i=ve(),s=q(!1),g=q("cash"),b=q(new Date),f=q(i.props.settings.after_payment_action??"print"),m=q([]),p=q([]),y=De([{id:"cash",amount:0}]),_=i.props.settings.default_payment_mode,x=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],C=X(()=>[{label:"Laci Kasir",value:"cash"},...d.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(N=>({label:N.name,value:N.id}))]),$=X(()=>y.reduce((N,S)=>N+(S.amount||0),0)),B=X(()=>d.total-$.value),Y=X(()=>{if(!d.customer)return!0;const N=y.find(j=>j.id==="wallet");return(N?N.amount:0)<=d.customer.wallet_balance}),E=new Date,z=dt.addToDate(new Date,{days:30}),R=X(()=>[N=>!!N||"Tanggal jatuh tempo harus diisi",N=>dt.isBetweenDates(N,E,z,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),M=X(()=>{if(g.value==="debt")return!!d.customer&&R.value.every(ie=>ie(b.value)===!0);const N=Y.value,S=y.some(ie=>(ie.amount||0)>0),j=y.every(ie=>(ie.amount||0)>=0),te=B.value<=0;return N&&S&&j&&te}),A=()=>{if(y.length<3){const N=y.length;y.push({id:"cash",amount:0}),gt(()=>{const S=m.value[N];S&&(S.focus(),S.showPopup())})}},V=N=>{if(y.length>1){const S=y.findIndex(j=>j.id===N);S!==-1&&y.splice(S,1)}},D=(N,S="cash")=>{g.value=N,b.value=new Date,y.splice(0,y.length),N==="cash"&&(y.splice(0,y.length,{id:S,amount:d.total}),gt(()=>{p.value.length>0&&p.value[0]&&(p.value[0].focus(),p.value[0].select())}))},P=()=>{if(!M.value)return;s.value=!0;let N={total:d.total,is_debt:g.value==="debt",after_payment_action:f.value};if(g.value==="debt")N.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),N.payments=[];else{const S=$.value,j=S>d.total?S-d.total:0,te=B.value>0?B.value:0;N.payments=y,N.remaining_debt=te,N.change=j}o("accepted",N),s.value=!1},h=()=>{D("cash",d.customer?_:"cash")};$e(()=>{const N=S=>{d.modelValue&&S.ctrlKey&&S.key==="Enter"&&(S.preventDefault(),P())};document.addEventListener("keydown",N),wt(()=>{document.removeEventListener("keydown",N)})});const U=(N,S)=>{gt(()=>{p.value[S]&&(p.value[S].focus(),p.value[S].select())})};return(N,S)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":S[4]||(S[4]=j=>N.$emit("update:modelValue",j)),onBeforeShow:h},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>[...S[5]||(S[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[u.customer?(c(),w("div",Fw,[t("div",Lw,[v(" Username: "+r(u.customer.code)+" ",1),S[6]||(S[6]=t("br",null,null,-1)),v(" Nama: "+r(u.customer.name),1),S[7]||(S[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(K)(u.customer.wallet_balance)),1)])])):k("",!0),t("div",Kw," Total: Rp. "+r(a(K)(u.total)),1),t("div",Hw,[e(a(_a),{modelValue:g.value,"onUpdate:modelValue":[S[0]||(S[0]=j=>g.value=j),D],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!u.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="cash"?(c(),w("div",Yw,[(c(!0),w(Q,null,je(y,(j,te)=>(c(),w("div",{key:te,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Ww,[e(a(ce),{modelValue:j.id,"onUpdate:modelValue":[ie=>j.id=ie,ie=>U(ie,te)],options:C.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:s.value,"hide-bottom-space":"",ref_for:!0,ref:ie=>m.value[te]=ie},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",Qw,[e(Ee,{modelValue:j.amount,"onUpdate:modelValue":ie=>j.amount=ie,label:"Jumlah",outlined:!0,dense:"",disable:s.value,error:j.id==="wallet"&&!Y.value,"error-message":j.id==="wallet"&&!Y.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:ie=>p.value[te]=ie},Je({_:2},[y.length>1?{name:"append",fn:l(()=>[e(T,{size:"xs",name:"close",class:"cursor-pointer",onClick:ie=>V(j.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Jw,[e(I,{disable:!(y.length<3&&B.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:A,size:"sm"},null,8,["disable"])]),t("div",Gw,[B.value>0?(c(),w("div",Xw," Sisa Tagihan: Rp. "+r(a(K)(B.value)),1)):B.value<0?(c(),w("div",Zw," Kembalian: Rp. "+r(a(K)(Math.abs(B.value))),1)):(c(),w("div",e0," Tagihan Terbayar "))])])):g.value==="debt"&&u.customer?(c(),w("div",t0,[e(ra,{outlined:"",modelValue:b.value,"onUpdate:modelValue":S[1]||(S[1]=j=>b.value=j),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(E),"max-date":a(z),rules:R.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",a0," Total Utang: Rp. "+r(a(K)(u.total)),1)])):g.value==="debt"&&!u.customer?(c(),w("div",l0,[...S[8]||(S[8]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)])])):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(a(ce),{modelValue:f.value,"onUpdate:modelValue":S[2]||(S[2]=j=>f.value=j),options:x,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:s.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(I,{flat:"",label:"Batal",color:"grey",onClick:S[3]||(S[3]=j=>N.$emit("update:modelValue",!1)),class:"col"}),e(I,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:P,disable:s.value||!M.value,loading:s.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},o0=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),n0={class:"row items-center no-wrap"},s0={class:"col-auto"},Qo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,i=d,s=()=>{i("save")},g=X(()=>o.item.quantity*o.item.price),b=p=>{p.stopPropagation(),p.preventDefault()},f=p=>{o.modelValue&&(p.key==="Enter"?(s(),i("update:modelValue",!1),b(p)):p.key==="Escape"&&(i("update:modelValue",!1),b(p)))};return $e(()=>{window.addEventListener("keydown",f)}),wt(()=>{window.removeEventListener("keydown",f)}),n({getCurrentItem:()=>o.item}),(p,y)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":y[6]||(y[6]=_=>p.$emit("update:modelValue",_))},{default:l(()=>[e(ge,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",n0,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",s0,[e(I,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=_=>p.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(se,{modelValue:u.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=_=>u.item.product_name=_),label:"Produk","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=_=>u.item.quantity=_),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:u.item.price,"onUpdate:modelValue":y[3]||(y[3]=_=>u.item.price=_),label:"Harga",readonly:!u.item.product.price_editable,"hide-bottom-space":"",disable:u.isProcessing},null,8,["modelValue","readonly","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":y[4]||(y[4]=_=>g.value=_),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:u.item.notes,"onUpdate:modelValue":y[5]||(y[5]=_=>u.item.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:l(()=>[le(e(I,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[pe]]),le(e(I,{flat:"",label:"Simpan",color:"primary",onClick:s,disable:u.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},r0=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),i0={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(u,{emit:n}){return(d,o)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>d.$emit("update:modelValue",i))},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])]),_:1}),e(ae,null,{default:l(()=>[...o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])]),_:1}),e(tt,{align:"center"},{default:l(()=>[le(e(I,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Jo=_t(i0,[["__scopeId","data-v-92052544"]]),d0=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),u0={class:"row items-center no-wrap"},m0={class:"col text-subtite text-bold text-grey-8"},c0={class:"col-auto"},Go={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(u,{expose:n,emit:d}){const o=u,i=d,s=()=>{i("save")},g=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(s(),g(m)):m.key==="Escape"&&(i("update:modelValue",!1),g(m)))};return $e(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),n({getCurrentItem:()=>o.item}),(m,p)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":p[4]||(p[4]=y=>m.$emit("update:modelValue",y))},{default:l(()=>[e(ge,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",u0,[t("div",m0," Edit "+r(u.data.code),1),t("div",c0,[e(I,{flat:"",size:"sm",round:"",icon:"close",onClick:p[0]||(p[0]=y=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(zt,{modelValue:u.data.datetime,"onUpdate:modelValue":p[1]||(p[1]=y=>u.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:u.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status],"onUpdate:modelValue":p[2]||(p[2]=y=>m.$CONSTANTS.SALES_ORDER_STATUSES[u.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:u.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:u.data.notes,"onUpdate:modelValue":p[3]||(p[3]=y=>u.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:l(()=>[le(e(I,{flat:"",label:"Batal",color:"primary",disable:u.isProcessing},null,8,["disable"]),[[pe]]),le(e(I,{flat:"",label:"Simpan",color:"primary",onClick:s,disable:u.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},p0=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"})),f0={key:0},g0={style:{float:"right"}},b0={key:1},v0={style:{float:"right"}},y0={key:2},_0={style:{float:"right"}},k0={key:3},w0={style:{float:"right"}},h0={style:{float:"right"}},$0={class:"q-gutter-sm"},x0={class:"q-my-md"},S0={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(u,{emit:n}){const d=q(null),o=()=>{var i;(i=d.value)==null||i.focus()};return(i,s)=>(c(),O(lt,{"model-value":u.modelValue,"onUpdate:modelValue":s[0]||(s[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(ge,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>[...s[1]||(s[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])]),_:1}),e(ae,{align:"center"},{default:l(()=>[s[22]||(s[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[s[2]||(s[2]=t("td",null,"ID",-1)),s[3]||(s[3]=t("td",null,":",-1)),t("td",null,r(u.order.code),1)]),u.customer?(c(),w("tr",f0,[s[5]||(s[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),s[6]||(s[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(u.customer.name)+" ",1),s[4]||(s[4]=t("br",null,null,-1)),v(r(u.customer.code),1)])])):k("",!0),t("tr",null,[s[8]||(s[8]=t("td",null,"Total",-1)),s[9]||(s[9]=t("td",null,":",-1)),t("td",null,[s[7]||(s[7]=v(" Rp. ",-1)),t("div",g0,r(a(K)(u.payment.total)),1)])]),u.payment.cash_amount?(c(),w("tr",b0,[s[11]||(s[11]=t("td",null,"Tunai",-1)),s[12]||(s[12]=t("td",null,":",-1)),t("td",null,[s[10]||(s[10]=v(" Rp. ",-1)),t("div",v0,r(a(K)(u.payment.cash_amount)),1)])])):k("",!0),u.payment.wallet_amount?(c(),w("tr",y0,[s[14]||(s[14]=t("td",null,"Wallet",-1)),s[15]||(s[15]=t("td",null,":",-1)),t("td",null,[s[13]||(s[13]=v(" Rp. ",-1)),t("div",_0,r(a(K)(u.payment.wallet_amount)),1)])])):k("",!0),u.payment.remaining_debt?(c(),w("tr",k0,[s[17]||(s[17]=t("td",null,"Piutang",-1)),s[18]||(s[18]=t("td",null,":",-1)),t("td",null,[s[16]||(s[16]=v(" Rp. ",-1)),t("span",w0,r(a(K)(u.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[s[20]||(s[20]=t("td",null,"Kembalian",-1)),s[21]||(s[21]=t("td",null,":",-1)),t("td",null,[s[19]||(s[19]=v(" Rp. ",-1)),t("div",h0,r(a(K)(u.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:l(()=>[t("div",$0,[e(I,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(I,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",x0,[e(I,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Xo=_t(S0,[["__scopeId","data-v-794fd35f"]]),V0=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),q0={class:"q-gutter-sm"},C0={class:"row items-center"},T0={class:"text-weight-bold"},P0={class:"text-weight-bold"},R0={class:"row q-col-gutter-none full-width"},O0={class:"col-sm-6 col-12 col"},D0={class:"row full-width"},I0={key:0,class:"row"},U0={class:"col-sm-6 col-12"},E0={class:"row q-ml-sm items-end"},A0={class:"row col grow"},j0={class:"col-12 q-pa-sm column"},N0={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},M0={key:0,class:"col"},B0={class:"text-caption text-grey-6 q-mt-xs"},z0={key:0,class:"text-caption text-grey-8 q-mt-xs"},F0={class:"text-italic"},L0={key:1,class:"col"},K0={class:"q-pa-sm q-pb-none text-grey-8"},H0={class:"col"},Y0={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},W0={class:"text-h4 text-weight-bold"},Q0={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},J0={class:"col q-py-sm"},G0={class:"q-py-sm"},X0={__name:"Editor",setup(u){const n=Se(),d=ve(),o=q(!0),i=q(null),s=q(null),g=q(null),b=q(!1),f=q(null),m=q(null),{isFullscreen:p,toggleFullscreen:y}=va(m),_=d.props.data.code,x=q(d.props.data.customer),C=q(null),$=q(""),B=q(!1),Y=q(!1),E=q(!1),z=q(!1),R=q(!1),M=q(!1),A=q(null),V=q("price_1"),D=De({id:d.props.data.id,code:d.props.data.code,customer_id:d.props.data.customer_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),P=X(()=>D.items.reduce((ne,G)=>ne+G.price*G.quantity,0)),h=()=>{var ne;y(),p.value||(ne=f==null?void 0:f.value)==null||ne.hideDrawer()},U=ne=>isNaN(ne)||ne<=0?(ft("Kuantitas tidak valid.","top"),!1):!0,N=ne=>isNaN(ne)||ne<0?(ft("Harga tidak valid.","top"),!1):!0,S=ne=>!ne||ne.length==0?(ft("Barcode tidak valid.","top"),!1):!0,j=ne=>{var G;(G=$.value)!=null&&G.endsWith("*")?$.value+=ne.name:$.value=ne.name},te=async()=>{const ne=$.value.trim();if(ne.length===0){E.value=!0;return}const G=ne.split("*");let fe=1,Ce="",ke=null;if(G.length===1)Ce=G[0];else if(G.length<=3)fe=parseInt(G[0]),Ce=G[1],G.length===3&&(ke=parseFloat(G[2]));else{ft("Input tidak valid.","top");return}if(Ce.length===0){E.value=!0;return}!S(Ce)&&!U(fe)&&!N(ke)||(B.value=!0,await Oe.post(route("admin.sales-order.add-item"),{order_id:D.id,product_code:Ce,qty:fe,price:ke,merge:o.value}).then(Xe=>{const $t=Xe.data.data.item;let Dt=-1;Xe.data.data.mergeItem&&(Dt=D.items.findIndex(ka=>ka.id===$t.id)),Dt===-1?D.items.push($t):D.items[Dt]=$t,$.value="",ke!==null&&ke!==parseFloat($t.price)&&ft("Harga tidak dapat diubah!","top")}).catch(Xe=>{var $t,Dt;ct((Dt=($t=Xe.response)==null?void 0:$t.data)==null?void 0:Dt.message,"top"),console.error("Gagal mengambil data produk:",Xe)}),B.value=!1,gt(()=>{var Xe;(Xe=i.value)==null||Xe.focus()}))},ie=ne=>{A.value=Object.create(ne),z.value=!0},me=ne=>{n.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ne.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{B.value=!0,Oe.post(route("admin.sales-order.remove-item"),{id:ne.id}).then(()=>{const G=D.items.findIndex(fe=>fe.id===ne.id);G!==-1&&(D.items.splice(G,1)[0],pt("Item telah dihapus","top"))}).catch(G=>{var fe,Ce;ct(((Ce=(fe=G==null?void 0:G.response)==null?void 0:fe.data)==null?void 0:Ce.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(G)}).finally(()=>{B.value=!1})})},Re=()=>{B.value=!0;const ne=s.value.getCurrentItem(),G={id:ne.id,qty:ne.quantity};ne.product.price_editable&&(G.price=ne.price),ne.notes&&(G.notes=ne.notes),Oe.post(route("admin.sales-order.update-item"),G).then(fe=>{const Ce=fe.data.data,ke=D.items.findIndex(Xe=>Xe.id===Ce.id);ke!==-1&&(D.items[ke]=Ce,pt("Item telah diperbarui","top"))}).catch(fe=>{var Ce,ke;ct(((ke=(Ce=fe==null?void 0:fe.response)==null?void 0:Ce.data)==null?void 0:ke.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(fe)}).finally(()=>{B.value=!1})};$e(()=>{const ne=G=>{Y.value||b.value||z.value||E.value||R.value||(G.key==="F1"?(G.preventDefault(),b.value=!0):G.key==="F2"?(G.preventDefault(),g.value.focus()):G.key==="F3"?(G.preventDefault(),i.value.focus()):G.key==="F4"?(G.preventDefault(),o.value=!o.value):G.key==="F10"||G.ctrlKey&&G.key==="Enter"?(G.preventDefault(),Y.value=!0):G.key==="F11"?(G.preventDefault(),h()):(G.key==="F5"||G.key==="F6"||G.key==="F7"||G.key==="F12")&&G.preventDefault())};document.addEventListener("keydown",ne),wt(()=>{document.removeEventListener("keydown",ne)}),gt(()=>{var G;(G=f==null?void 0:f.value)==null||G.hideDrawer()})});const Be=async ne=>{x.value=ne,D.customer_id=ne==null?void 0:ne.id,await de(),ne!=null&&ne.id?(V.value=x.value.default_price_type??"price_1",i.value.focus()):(V.value="price_1",g.value.focus())},de=async()=>{B.value=!0;const ne={id:D.id,customer_id:D.customer_id??null,datetime:Jt(D.datetime),notes:D.notes};await Oe.post(route("admin.sales-order.update"),ne).then(G=>{const fe=G.data.data.id;D.customer_id=fe.customer_id}).catch(G=>{var fe,Ce;ct(((Ce=(fe=G==null?void 0:G.response)==null?void 0:fe.data)==null?void 0:Ce.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(G)}).finally(()=>{B.value=!1})},F=ne=>{if(D.items.length===0){pt("Item masih kosong","top");return}const G={id:D.id,...ne};B.value=!0,Oe.post(route("admin.sales-order.close"),G).then(fe=>{pt("Transaksi selesai"),G.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:D.id,size:d.props.settings.default_print_size}),"_self"):G.after_payment_action==="detail"?ee.get(route("admin.sales-order.detail",{id:D.id})):G.after_payment_action==="new-order"&&ee.get(route("admin.sales-order.add"))}).catch(fe=>{var Ce,ke;ct((ke=(Ce=fe.response)==null?void 0:Ce.data)==null?void 0:ke.message),console.error(fe)}).finally(()=>{B.value=!1})},_e=()=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${D.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order.cancel",{id:D.id}),{id:D.id}).then(()=>{pt("Transaksi telah dibatalkan."),ee.visit(route("admin.sales-order.detail",{id:D.id}))}).catch(ne=>{var fe,Ce;const G=((Ce=(fe=ne.response)==null?void 0:fe.data)==null?void 0:Ce.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:G,color:"warning",position:"bottom"}),console.error(ne)})})},re=()=>{window.open(route("admin.sales-order.detail",{id:D.id})+"?preview=1","_blank")},H=X(()=>x.value?x.value.wallet_balance>=P.value:!0);return(ne,G)=>{const fe=Z("i-head"),Ce=Z("authenticated-layout");return c(),w(Q,null,[e(fe,{title:a(_)},null,8,["title"]),e(Ce,{ref_key:"authLayoutRef",ref:f,"show-drawer-button":!0},{title:l(()=>[v(r(a(_)),1)]),"left-button":l(()=>[t("div",q0,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:G[0]||(G[0]=ke=>a(ee).get(ne.route("admin.sales-order.index")))})])]),"right-button":l(()=>{var ke,Xe;return[t("div",C0,[a(n).screen.gt.sm?(c(),w(Q,{key:0},[t("div",T0,r(a(d).props.auth.user.username),1),G[22]||(G[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",P0,r((Xe=(ke=a(d).props.data.cashier_session)==null?void 0:ke.cashier_terminal)==null?void 0:Xe.name),1),G[23]||(G[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ba)])],64)):k("",!0),k("",!0)])]}),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(ge,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",R0,[t("div",O0,[t("div",D0,[e(Bo,{ref_key:"customerAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:x.value,"onUpdate:modelValue":G[2]||(G[2]=ke=>x.value=ke),label:"Pelanggan",disable:B.value,onCustomerSelected:Be,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),x.value?(c(),w("div",I0,[t("div",{class:qe(["q-mt-xs q-ml-sm text-bold",H.value?"text-green":"text-red"])}," Wallet: "+r(x.value?"Rp. "+a(K)(x.value?x.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:qe(["q-mt-xs q-ml-sm text-bold",x.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(x.value?"Rp. "+a(K)(x.value?x.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",U0,[e(se,{ref_key:"userInputRef",ref:i,modelValue:$.value,"onUpdate:modelValue":G[5]||(G[5]=ke=>$.value=ke),onKeyup:G[6]||(G[6]=Ht(J(ke=>te(),["prevent"]),["enter"])),loading:B.value,disable:B.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(T,{name:"search",onClick:G[3]||(G[3]=ke=>E.value=!0),class:"cursor-pointer"})]),append:l(()=>{var ke;return[((ke=$.value)==null?void 0:ke.length)>0?(c(),O(T,{key:0,name:"send",onClick:G[4]||(G[4]=Xe=>te()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",E0,[e(xt,{class:"col",modelValue:o.value,"onUpdate:modelValue":G[7]||(G[7]=ke=>o.value=ke),label:"Gabungkan item",disable:B.value},null,8,["modelValue","disable"])])])]),t("div",A0,[t("div",j0,[e(Yo,{items:D.items,onUpdateQuantity:G[8]||(G[8]=({id:ke,value:Xe})=>ne.updateQuantity(ke,Xe)),onRemoveItem:me,onEditItem:ie,"is-processing":B.value},null,8,["items","is-processing"])])]),t("div",N0,[a(n).screen.gt.sm?(c(),w("div",M0,[t("div",B0,r(D.items.length)+" item(s) ",1),D.notes?(c(),w("div",z0,[G[24]||(G[24]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",F0,[e(he,{text:D.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(n).screen.gt.sm?(c(),w("div",L0,[t("div",K0,[t("div",null,"#: "+r(D.code),1),t("div",null,r(a(be)(D.datetime)),1)])])):k("",!0),t("div",H0,[t("div",Y0,[G[26]||(G[26]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",W0,[G[25]||(G[25]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(K)(P.value)),1)])])])]),t("div",Q0,[t("div",J0,[e(I,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:G[9]||(G[9]=ke=>Y.value=!0),disable:!ne.$can("admin.sales-order.close")||B.value||D.items.length===0||D.status!=="draft",loading:B.value},null,8,["disable","loading"])]),t("div",G0,[e(I,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:G[13]||(G[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[le((c(),O(oe,{clickable:"",onClick:G[10]||(G[10]=J(ke=>R.value=!0,["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...G[27]||(G[27]=[v("Edit Rincian",-1)])]),_:1})]),_:1})),[[ue],[pe]]),le((c(),O(oe,{clickable:"",onClick:G[11]||(G[11]=J(ke=>re(),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"preview"})]),_:1}),e(L,null,{default:l(()=>[...G[28]||(G[28]=[v("Pratinjau",-1)])]),_:1})]),_:1})),[[ue],[pe]]),le((c(),O(oe,{clickable:"",onClick:G[12]||(G[12]=J(ke=>_e(),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"cancel",color:"negative"})]),_:1}),e(L,{class:"text-negative"},{default:l(()=>[...G[29]||(G[29]=[v(" Batalkan ",-1)])]),_:1})]),_:1})),[[ue],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Qo,{ref_key:"itemEditorRef",ref:s,modelValue:z.value,"onUpdate:modelValue":G[14]||(G[14]=ke=>z.value=ke),item:A.value,onSave:G[15]||(G[15]=ke=>Re()),"is-processing":B.value},null,8,["modelValue","item","is-processing"]),e(Wo,{modelValue:Y.value,"onUpdate:modelValue":G[16]||(G[16]=ke=>Y.value=ke),onAccepted:F,form:D,customer:x.value,total:P.value,accounts:a(d).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(ya,{modelValue:E.value,"onUpdate:modelValue":G[17]||(G[17]=ke=>E.value=ke),onProductSelected:j,priceType:V.value,"show-cost":ne.$can("admin.product:view-cost")},null,8,["modelValue","priceType","show-cost"]),e(Go,{modelValue:R.value,"onUpdate:modelValue":G[18]||(G[18]=ke=>R.value=ke),data:D,onSave:G[19]||(G[19]=ke=>de()),"is-processing":B.value},null,8,["modelValue","data","is-processing"]),e(Jo,{modelValue:b.value,"onUpdate:modelValue":G[20]||(G[20]=ke=>b.value=ke)},null,8,["modelValue"]),e(Xo,{modelValue:M.value,"onUpdate:modelValue":G[21]||(G[21]=ke=>M.value=ke),order:D,customer:x.value,total:P.value,payment:C.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},Z0=Object.freeze(Object.defineProperty({__proto__:null,default:X0},Symbol.toStringTag,{value:"Module"})),e2={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.SALES_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(c(),O(Nt,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}},t2={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(u){const n=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(c(),O(Nt,{status:u.status,statuses:a(n),colors:d},null,8,["status","statuses"]))}};const a2={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},l2={class:"q-pa-xs"},o2={class:"full-width row flex-center text-grey-8 q-gutter-sm"},n2={key:0},s2={key:1},r2={key:2},i2={key:3},d2={key:0},u2={key:1},m2={key:0},c2={key:0},p2={key:1},f2={class:"flex justify-end"},Tl="Penjualan",g2={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=Mt(),m=Bt(),p=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...Vt(f-2,f-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...qt()],_=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.SALES_ORDER_STATUSES)],x=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],C=[{value:"all",label:"Semua Status"},...Ze(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],$=De({search:"",year:f,month:m,status:"all",payment_status:"all",delivery_status:"all",...Ne()}),B=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{V()});const E=h=>{if(h.status=="draft"){z(h);return}R(h)},z=h=>{ee.get(route("admin.sales-order.edit",h.id))},R=h=>{ee.get(route("admin.sales-order.detail",h.id))},M=h=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${h.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order.cancel",{id:h.id}),{id:h.id}).then(U=>{const N=U.data.data,S=o.value.findIndex(j=>j.id===N.id);if(S===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[S].status="canceled",n.notify({message:U.data.message,position:"bottom"})}).catch(U=>{var S,j;const N=((j=(S=U.response)==null?void 0:S.data)==null?void 0:j.message)||"Terjadi kesalahan saat membatalkan transaksi.";n.notify({message:N,color:"warning",position:"bottom"}),console.error(U)})})},A=h=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${h.code}?`,url:route("admin.sales-order.delete",h.id),fetchItemsCallback:V,loading:i}),V=(h=null)=>{Me({pagination:B,filter:$,props:h,rows:o,url:route("admin.sales-order.data"),loading:i,tableRef:s})},D=()=>{V()},P=X(()=>n.screen.gt.sm?Y:Y.filter(h=>h.name==="id"||h.name==="action"));return He(()=>$.year,h=>{h===null&&($.month=null)}),(h,U)=>{const N=Z("i-head"),S=Z("authenticated-layout");return c(),w(Q,null,[e(N,{title:Tl}),e(S,null,Je({title:l(()=>[v(r(Tl))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=j=>d.value=!d.value)},null,8,["icon"]),h.$can("admin.sales-order.edit")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:U[1]||(U[1]=j=>a(ee).get(h.route("admin.sales-order.add")))})):k("",!0)]),default:l(()=>[t("div",l2,[e(Ie,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:B.value,"onUpdate:pagination":U[11]||(U[11]=j=>B.value=j),filter:$.search,loading:i.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:j,message:te,filter:ie})=>[t("div",o2,[t("span",null,r(te)+" "+r(ie?" with term "+ie:""),1)])]),body:l(j=>[e(Pe,{props:j,class:"cursor-pointer",onClick:J(te=>E(j.row),["prevent"])},{default:l(()=>[e(W,{key:"id",props:j,class:"wrap-column"},{default:l(()=>{var te,ie,me;return[t("div",null,[e(T,{name:"tag"}),v(" "+r(j.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(r(a(be)(j.row.datetime)),1)]),a(n).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[j.row.cashier?(c(),w("div",n2,[e(T,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((te=j.row.cashier)==null?void 0:te.username),1)])):k("",!0),j.row.cashier_session?(c(),w("div",s2,[e(T,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((me=(ie=j.row.cashier_session)==null?void 0:ie.cashier_terminal)==null?void 0:me.name),1)])):k("",!0),j.row.customer?(c(),w("div",r2,[e(T,{name:"person",class:"inline-icon"}),e(fa,{href:h.route("admin.customer.detail",{id:j.row.customer.id}),onClick:U[8]||(U[8]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(j.row.customer.code)+" - "+r(j.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(K)(j.row.grand_total)),1),j.row.notes?(c(),w("div",i2,[e(T,{name:"notes"}),v(" "+r(j.row.notes),1)])):k("",!0)],64)),t("div",null,[e(e2,{status:j.row.status},null,8,["status"]),e(t2,{status:j.row.payment_status},null,8,["status"]),k("",!0)])]}),_:2},1032,["props"]),e(W,{key:"cashier_id",props:j},{default:l(()=>{var te,ie,me;return[j.row.cashier?(c(),w("div",d2,[e(T,{name:"person",class:"inline-icon"}),v(" "+r((te=j.row.cashier)==null?void 0:te.username),1)])):k("",!0),j.row.cashier_session?(c(),w("div",u2,[e(T,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((me=(ie=j.row.cashier_session)==null?void 0:ie.cashier_terminal)==null?void 0:me.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(W,{key:"customer_id",props:j},{default:l(()=>[j.row.customer?(c(),w("div",m2,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(j.row.customer_code)+" - "+r(j.row.customer_name),1)]),j.row.customer_phone?(c(),w("div",c2,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(j.row.customer_phone),1)])):k("",!0),j.row.customer_address?(c(),w("div",p2,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(j.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:j},{default:l(()=>[v(r(a(K)(j.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:j},{default:l(()=>[e(he,{text:j.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:j,onClick:U[10]||(U[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",f2,[h.$can("admin.sales-order.detail")||h.$can("admin.sales-order.edit")||h.$can("admin.sales-order.cancel")||h.$can("admin.sales-order.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:U[9]||(U[9]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[j.row.status!="draft"&&h.$can("admin.sales-order.detail")?le((c(),O(oe,{key:0,onClick:J(te=>R(j.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"visibility"})]),_:1}),e(L,null,{default:l(()=>[...U[12]||(U[12]=[v(" Lihat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),j.row.status=="draft"&&h.$can("admin.sales-order.edit")?le((c(),O(oe,{key:1,onClick:J(te=>z(j.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...U[13]||(U[13]=[v(" Edit ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),j.row.status=="draft"&&h.$can("admin.sales-order.cancel")?le((c(),O(oe,{key:2,onClick:J(te=>M(j.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"cancel"})]),_:1}),e(L,null,{default:l(()=>[...U[14]||(U[14]=[v(" Batalkan ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),e(Ae),h.$can("admin.sales-order.delete")?le((c(),O(oe,{key:3,onClick:J(te=>A(j.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...U[15]||(U[15]=[v(" Hapus ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",a2,[e(ce,{modelValue:$.year,"onUpdate:modelValue":[U[2]||(U[2]=j=>$.year=j),D],options:p,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!="all"?(c(),O(ce,{key:0,modelValue:$.month,"onUpdate:modelValue":[U[3]||(U[3]=j=>$.month=j),D],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:$.status,"onUpdate:modelValue":[U[4]||(U[4]=j=>$.status=j),D],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:$.payment_status,"onUpdate:modelValue":[U[5]||(U[5]=j=>$.payment_status=j),D],options:x,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":U[7]||(U[7]=j=>$.search=j),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},b2=Object.freeze(Object.defineProperty({__proto__:null,default:g2},Symbol.toStringTag,{value:"Module"})),Zo={__name:"CompanyInfoForm",setup(u){const n=q(),d=ve(),o=We({name:d.props.data.name,headline:d.props.data.headline,phone:d.props.data.phone,address:d.props.data.address,logo_path:d.props.data.logo_path,logo_image:null}),i=q(null),s=q("");$e(()=>{o.logo_path&&(s.value=`/${o.logo_path}`)});function g(){i.value.click()}function b(p){const y=p.target.files[0];y&&(o.logo_image=y,s.value=URL.createObjectURL(y))}function f(){o.logo_image=null,o.logo_path=null,s.value=null,i.value.value=null}const m=()=>rt({form:o,url:route("admin.company-profile.edit")});return(p,y)=>(c(),O(Qe,{class:"row",onSubmit:J(m,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[y[8]||(y[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),y[9]||(y[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(se,{ref_key:"nameInputRef",ref:n,modelValue:a(o).name,"onUpdate:modelValue":y[0]||(y[0]=_=>a(o).name=_),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[_=>_&&_.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(se,{modelValue:a(o).headline,"onUpdate:modelValue":y[1]||(y[1]=_=>a(o).headline=_),modelModifiers:{trim:!0},label:"Headline",disable:a(o).processing,maxlength:"200","lazy-rules":"",error:!!a(o).errors.headline,"error-message":a(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:a(o).phone,"onUpdate:modelValue":y[2]||(y[2]=_=>a(o).phone=_),modelModifiers:{trim:!0},label:"No Telepon",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.phone,"error-message":a(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(o).address,"onUpdate:modelValue":y[3]||(y[3]=_=>a(o).address=_),modelModifiers:{trim:!0},label:"Alamat",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[y[7]||(y[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(I,{label:"Browse Logo",size:"sm",onClick:g,color:"secondary",icon:"add_a_photo",disable:a(o).processing},null,8,["disable"]),e(I,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:a(o).processing||!s.value,color:"red",onClick:f},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*",style:{display:"none"},onChange:b},null,544),t("div",null,[e(na,{src:s.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},Je({error:l(()=>[y[4]||(y[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[s.value?void 0:{name:"default",fn:l(()=>[y[5]||(y[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),y[6]||(y[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(ae,null,{default:l(()=>[e(I,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},v2=Object.freeze(Object.defineProperty({__proto__:null,default:Zo},Symbol.toStringTag,{value:"Module"})),y2={class:"q-pa-xs"},_2={class:"row justify-center"},k2={class:"col col-md-6"},Pl="Profil Perusahaan",w2={__name:"Edit",setup(u){return(n,d)=>{const o=Z("i-head"),i=Z("authenticated-layout");return c(),w(Q,null,[e(o,{title:Pl}),e(i,null,{title:l(()=>[v(r(Pl))]),default:l(()=>[t("div",y2,[t("div",_2,[t("div",k2,[e(Zo)])])])]),_:1})],64)}}},h2=Object.freeze(Object.defineProperty({__proto__:null,default:w2},Symbol.toStringTag,{value:"Module"})),$2={class:"col-xs-12 col-md-8"},x2={class:"col-xs-12 col-sm-9"},S2={class:"col-xs-12 col-sm-3 text-right"},Rl="Pengaturan Database & Utilitas",V2={__name:"Index",setup(u){const n=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:" **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:" **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:" **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(d,o)=>{const i=Z("i-head"),s=Z("authenticated-layout");return c(),w(Q,null,[e(i,{title:Rl}),e(s,null,{title:l(()=>[v(r(Rl))]),default:l(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:l(()=>[t("div",$2,[e(ge,{square:"",flat:"",bordered:"",class:"full-width"},{default:l(()=>[e(ae,null,{default:l(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Yt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:l(()=>[e(T,{name:"warning",color:"red"})]),default:l(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=v(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. ",-1))]),_:1})]),_:1}),e(Ae),e(ae,{class:"q-gutter-y-lg"},{default:l(()=>[(c(),w(Q,null,je(n,g=>t("div",{key:g.name,class:"row items-center q-col-gutter-md"},[t("div",x2,[e(oe,{class:"q-pa-none"},{default:l(()=>[e(L,{avatar:"",class:"q-pr-md"},{default:l(()=>[e(T,{name:g.icon,color:g.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(L,{style:{"text-wrap":"initial"}},{default:l(()=>[e(we,{class:"text-subtitle1 text-bold"},{default:l(()=>[v(r(g.name),1)]),_:2},1024),e(we,{caption:"",class:"q-pb-sm"},{default:l(()=>[v(r(g.description),1)]),_:2},1024),e(we,{class:"text-caption text-negative text-bold"},{default:l(()=>[v(r(g.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",S2,[e(I,{icon:g.icon,label:g.name.split(" ")[0],color:g.color,disable:g.disable,onClick:g.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},q2=Object.freeze(Object.defineProperty({__proto__:null,default:V2},Symbol.toStringTag,{value:"Module"})),C2={class:"q-pa-xs"},T2={class:"row justify-center"},P2={class:"col col-md-6"},R2={__name:"Edit",setup(u){const n=ve(),d=We({foot_note:n.props.data.foot_note,default_payment_mode:n.props.data.default_payment_mode,default_print_size:n.props.data.default_print_size,after_payment_action:n.props.data.after_payment_action}),o=()=>rt({form:d,url:route("admin.pos-settings.edit")}),i=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],s=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],g=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(b,f)=>{const m=Z("i-head"),p=Z("authenticated-layout");return c(),w(Q,null,[e(m,{title:"Pengaturan POS"}),e(p,null,{title:l(()=>[...f[4]||(f[4]=[v("Pengaturan POS",-1)])]),default:l(()=>[t("div",C2,[t("div",T2,[t("div",P2,[e(Qe,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[f[5]||(f[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),f[6]||(f[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(ce,{modelValue:a(d).default_payment_mode,"onUpdate:modelValue":f[0]||(f[0]=y=>a(d).default_payment_mode=y),label:"Default Pembayaran",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.default_payment_mode,"error-message":a(d).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(d).default_print_size,"onUpdate:modelValue":f[1]||(f[1]=y=>a(d).default_print_size=y),label:"Default Ukuran Cetak",options:s,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.default_print_size,"error-message":a(d).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(d).after_payment_action,"onUpdate:modelValue":f[2]||(f[2]=y=>a(d).after_payment_action=y),label:"Aksi Setelah Pembayaran",options:g,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.after_payment_action,"error-message":a(d).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(d).foot_note,"onUpdate:modelValue":f[3]||(f[3]=y=>a(d).foot_note=y),modelModifiers:{trim:!0},label:"Foot Note",disable:a(d).processing,"lazy-rules":"",error:!!a(d).errors.foot_note,"error-message":a(d).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,null,{default:l(()=>[e(I,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(d).processing,loading:a(d).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},O2=Object.freeze(Object.defineProperty({__proto__:null,default:R2},Symbol.toStringTag,{value:"Module"})),D2={class:"q-gutter-sm"},I2={class:"q-gutter-sm"},U2={class:"col col-md-6 q-pa-xs"},E2={class:"row"},A2={class:"detail-item"},j2={class:"detail-value"},N2={class:"detail-item"},M2={class:"detail-value"},B2={class:"detail-item"},z2={class:"detail-value"},F2={class:"detail-item"},L2={class:"detail-value"},K2={class:"detail-item"},H2={class:"detail-value"},Y2={class:"detail-item"},W2={class:"detail-value"},Q2={class:"detail-item"},J2={class:"detail-value"},G2={class:"detail-item"},X2={class:"detail-value user-agent-value"},Z2={class:"q-pt-md"},eh={class:"table-wrapper-scroll"},th={key:0,class:"table-metadata"},ah={key:0},lh={colspan:"100%"},oh={class:"text-mono json-pre-scroll"},nh={key:1},sh={class:"metadata-label",style:{width:"100px"}},rh={class:"metadata-value"},ih={key:0,class:"text-mono json-pre-scroll"},dh={key:2},uh={colspan:"3"},mh={class:"table-metadata"},ch={class:"metadata-label"},ph={class:"metadata-value"},fh={class:"metadata-value"},gh={key:1,class:"text-grey-8 text-italic q-pa-sm"},Ol="Rincian Log Aktifitas",bh={__name:"Detail",setup(u){const n=ve(),d=()=>st({message:`Hapus log aktifitas #${n.props.data.id}?`,url:route("admin.user-activity-log.delete",n.props.data.id),onSuccess:()=>{ee.get(route("admin.user-activity-log.index"))}});return(o,i)=>{const s=Z("i-head"),g=Z("i-link"),b=Z("authenticated-layout");return c(),w(Q,null,[e(s,{title:Ol}),e(b,{"show-drawer-button":!0},{title:l(()=>[v(r(Ol))]),"left-button":l(()=>[t("div",D2,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=f=>o.$goBack())})])]),"right-button":l(()=>[t("div",I2,[e(I,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=f=>d())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",U2,[t("div",E2,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"detail-group"},{default:l(()=>[i[20]||(i[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",A2,[i[2]||(i[2]=t("div",{class:"detail-label"},"ID",-1)),i[3]||(i[3]=t("div",{class:"detail-separator"},":",-1)),t("div",j2,r(a(n).props.data.id),1)]),t("div",N2,[i[4]||(i[4]=t("div",{class:"detail-label"},"Waktu",-1)),i[5]||(i[5]=t("div",{class:"detail-separator"},":",-1)),t("div",M2,r(a(be)(a(n).props.data.logged_at)),1)]),t("div",B2,[i[6]||(i[6]=t("div",{class:"detail-label"},"Pengguna",-1)),i[7]||(i[7]=t("div",{class:"detail-separator"},":",-1)),t("div",z2,[e(g,{href:o.route("admin.user.detail",{id:a(n).props.data.user_id})},{default:l(()=>[v(r(a(n).props.data.username),1)]),_:1},8,["href"])])]),t("div",F2,[i[8]||(i[8]=t("div",{class:"detail-label"},"Kategori",-1)),i[9]||(i[9]=t("div",{class:"detail-separator"},":",-1)),t("div",L2,r(a(n).props.data.activity_category_label),1)]),t("div",K2,[i[10]||(i[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),i[11]||(i[11]=t("div",{class:"detail-separator"},":",-1)),t("div",H2,r(a(n).props.data.activity_name_label),1)]),t("div",Y2,[i[12]||(i[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),i[13]||(i[13]=t("div",{class:"detail-separator"},":",-1)),t("div",W2,r(a(n).props.data.description),1)]),t("div",Q2,[i[14]||(i[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),i[15]||(i[15]=t("div",{class:"detail-separator"},":",-1)),t("div",J2,r(a(n).props.data.ip_address),1)]),t("div",G2,[i[16]||(i[16]=t("div",{class:"detail-label"},"User Agent",-1)),i[17]||(i[17]=t("div",{class:"detail-separator"},":",-1)),t("div",X2,r(a(n).props.data.user_agent),1)]),t("div",Z2,[i[19]||(i[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",eh,[Object.keys(a(n).props.data.metadata).length>0?(c(),w("table",th,[t("tbody",null,[(c(!0),w(Q,null,je(a(n).props.formatted_metadata,(f,m)=>(c(),w(Q,{key:m},[f.type==="plain"?(c(),w("tr",ah,[t("td",lh,[t("pre",oh,r(f.value),1)])])):k("",!0),f.type==="simple"?(c(),w("tr",nh,[t("td",sh,r(f.label),1),t("td",rh,[f.label=="Data Mentah (JSON)"?(c(),w("pre",ih,r(f.value),1)):(c(),w(Q,{key:1},[v(r(f.value),1)],64))])])):k("",!0),f.type==="comparison"?(c(),w("tr",dh,[t("td",uh,[t("table",mh,[i[18]||(i[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(c(!0),w(Q,null,je(f.value,(p,y)=>(c(),w("tr",{class:qe(p.new_value!==p.old_value?"value-changed":"")},[t("td",ch,r(p.field),1),t("td",ph,r(p.old_value),1),t("td",fh,r(p.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(c(),w("div",gh," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},vh=_t(bh,[["__scopeId","data-v-37e21f0d"]]),yh=Object.freeze(Object.defineProperty({__proto__:null,default:vh},Symbol.toStringTag,{value:"Module"})),_h={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},kh={class:"q-pa-xs"},wh={class:"full-width row flex-center text-grey-8 q-gutter-sm"},hh={key:0},$h={class:"flex justify-end"},Dl="Log Aktifitas Pengguna",xh={__name:"Index",setup(u){const n=ve(),d=Se(),o=q(!1),i=q([]),s=q(!0),g=q(null),b=q(null),f=at(b),{protectClick:m}=Ot(),p=De({user_id:"all",activity_category:"all",activity_name:"all",search:"",...Ne()}),y=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),_=[{value:"all",label:"Semua"},...n.props.users.map(U=>({value:U.id,label:U.username+" - "+U.name}))],x=[{value:"all",label:"Semua"},...Object.entries(n.props.activity_categories).map(([U,N])=>({value:U,label:N}))],C=[{value:"all",label:"Semua"},...Object.entries(n.props.activity_names).map(([U,N])=>({value:U,label:N}))],$=q(x),B=q(C),Y=(U,N)=>{if(U===""){N(()=>{$.value=x});return}N(()=>{const S=U.toLowerCase();$.value=x.filter(j=>j.label.toLowerCase().indexOf(S)>-1)})},E=(U,N)=>{if(U===""){N(()=>{B.value=C});return}N(()=>{const S=U.toLowerCase();B.value=C.filter(j=>j.label.toLowerCase().indexOf(S)>-1)})},z=[{name:"id",label:d.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];$e(()=>{M()});const R=U=>st({message:`Hapus log #${U.id}?`,url:route("admin.user-activity-log.delete",U.id),fetchItemsCallback:M,loading:s}),M=(U=null)=>{Me({pagination:y,filter:p,props:U,rows:i,url:route("admin.user-activity-log.data"),loading:s,tableRef:g})},A=()=>M(),D=m(U=>ee.get(route("admin.user-activity-log.detail",{id:U.id}))),P=X(()=>d.screen.gt.sm?z:z.filter(U=>U.name==="id"||U.name==="action")),h=()=>{ht.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{pt("Seluruh log telah dibersihkan."),M()}).catch(U=>{var S,j;const N=((j=(S=U.response)==null?void 0:S.data)==null?void 0:j.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";ct(N,"bottom"),console.error(U)})})};return(U,N)=>{const S=Z("i-head"),j=Z("i-link"),te=Z("authenticated-layout");return c(),w(Q,null,[e(S,{title:Dl}),e(te,null,Je({title:l(()=>[v(r(Dl))]),"right-button":l(()=>[e(I,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:N[0]||(N[0]=ie=>o.value=!o.value)},null,8,["icon"]),U.$can("admin.user-activity-log.clear")?(c(),O(I,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:h})):k("",!0)]),default:l(()=>[t("div",kh,[e(Ie,{class:"full-height-table",ref_key:"tableRef",ref:g,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":N[7]||(N[7]=ie=>y.value=ie),filter:p.search,loading:s.value,columns:P.value,rows:i.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(f)}),onRequest:M,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:ie,message:me,filter:Re})=>[t("div",wh,[t("span",null,r(me)+" "+r(Re?" with term "+Re:""),1)])]),body:l(ie=>[e(Pe,{props:ie,class:"cursor-pointer",onClick:J(me=>a(D)(ie.row,me),["stop"])},{default:l(()=>[e(W,{key:"id",props:ie},{default:l(()=>[t("div",null,[a(d).screen.lt.md?(c(),w(Q,{key:0},[e(T,{name:"tag",class:"inline-icon"}),N[8]||(N[8]=v(" ID Aktifitas: ",-1))],64)):k("",!0),v(" "+r(ie.row.id),1)]),a(d).screen.lt.md?(c(),w("div",hh,[t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(be)(ie.row.logged_at)),1)]),t("div",null,[e(T,{name:"person",class:"inline-icon"}),e(j,{onClick:N[5]||(N[5]=J(()=>{},["stop"])),href:U.route("admin.user.detail",{id:ie.row.user_id})},{default:l(()=>[v(r(ie.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(T,{name:"category",class:"inline-icon"}),v(" "+r(ie.row.activity_category_label)+" > "+r(ie.row.activity_name_label),1)]),t("div",null,[e(T,{name:"notes",class:"inline-icon"}),v(" "+r(ie.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"logged_at",props:ie},{default:l(()=>[v(r(a(be)(ie.row.logged_at)),1)]),_:2},1032,["props"]),e(W,{key:"username",props:ie},{default:l(()=>[e(j,{onClick:N[6]||(N[6]=J(()=>{},["stop"])),href:U.route("admin.user.detail",{id:ie.row.user_id})},{default:l(()=>[v(r(ie.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(W,{key:"activity_category",props:ie},{default:l(()=>[v(r(ie.row.activity_category_label),1)]),_:2},1032,["props"]),e(W,{key:"activity_name",props:ie},{default:l(()=>[v(r(ie.row.activity_name_label),1)]),_:2},1032,["props"]),e(W,{key:"description",props:ie,class:"wrap-column"},{default:l(()=>[v(r(ie.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:ie},{default:l(()=>[t("div",$h,[U.$can("admin.user-role.delete")?(c(),O(I,{key:0,onClick:J(me=>R(ie.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",_h,[e(ce,{modelValue:p.user_id,"onUpdate:modelValue":[N[1]||(N[1]=ie=>p.user_id=ie),A],class:"custom-select col-xs-12 col-sm-2",options:_,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:p.activity_category,"onUpdate:modelValue":[N[2]||(N[2]=ie=>p.activity_category=ie),A],class:"custom-select col-xs-12 col-sm-2",options:$.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:Y,clearable:""},null,8,["modelValue","options"]),e(ce,{modelValue:p.activity_name,"onUpdate:modelValue":[N[3]||(N[3]=ie=>p.activity_name=ie),A],class:"custom-select col-xs-12 col-sm-2",options:B.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:E},null,8,["modelValue","options"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":N[4]||(N[4]=ie=>p.search=ie),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Sh=Object.freeze(Object.defineProperty({__proto__:null,default:xh},Symbol.toStringTag,{value:"Module"})),en={__name:"UpdatePasswordForm",setup(u){const n=q(!1),d=q(null),o=q(null),i=We({current_password:"",password:"",password_confirmation:""}),s=()=>{i.clearErrors(),i.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>i.reset(),onError:()=>{i.errors.password&&(i.reset("password","password_confirmation"),d.value.focus()),i.errors.current_password&&(i.reset("current_password"),o.value.focus())}})};return(g,b)=>(c(),O(Qe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[b[6]||(b[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),b[7]||(b[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(se,{modelValue:a(i).current_password,"onUpdate:modelValue":b[1]||(b[1]=f=>a(i).current_password=f),type:n.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.current_password,"error-message":a(i).errors.current_password,rules:[f=>f&&f.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(I,{dense:"",flat:"",round:"",onClick:b[0]||(b[0]=f=>n.value=!n.value)},{default:l(()=>[e(T,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(se,{modelValue:a(i).password,"onUpdate:modelValue":b[3]||(b[3]=f=>a(i).password=f),type:n.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.password,"error-message":a(i).errors.password,rules:[f=>f&&f.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(I,{dense:"",flat:"",round:"",onClick:b[2]||(b[2]=f=>n.value=!n.value)},{default:l(()=>[e(T,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(se,{modelValue:a(i).password_confirmation,"onUpdate:modelValue":b[5]||(b[5]=f=>a(i).password_confirmation=f),type:n.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.password_confirmation,"error-message":a(i).errors.password_confirmation,rules:[f=>f&&f.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(I,{dense:"",flat:"",round:"",onClick:b[4]||(b[4]=f=>n.value=!n.value)},{default:l(()=>[e(T,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(ae,null,{default:l(()=>[e(I,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Vh=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),tn={__name:"UpdateProfileInformationForm",setup(u){const d=ve().props.auth.user,o=We({name:d.name,username:d.username,type:window.CONSTANTS.USER_TYPES[d.type]}),i=()=>rt({form:o,url:route("admin.user-profile.update")});return(s,g)=>(c(),O(Qe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[g[3]||(g[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),g[4]||(g[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(se,{modelValue:a(o).username,"onUpdate:modelValue":g[0]||(g[0]=b=>a(o).username=b),label:"ID Pengguna",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(se,{modelValue:a(o).name,"onUpdate:modelValue":g[1]||(g[1]=b=>a(o).name=b),modelModifiers:{trim:!0},label:"Nama",disable:a(o).processing,error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[b=>b&&b.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(se,{modelValue:a(o).type,"onUpdate:modelValue":g[2]||(g[2]=b=>a(o).type=b),label:"Jenis Akun",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(ae,null,{default:l(()=>[e(I,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},qh=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),Ch={class:"q-pa-xs"},Th={class:"row justify-center"},Ph={class:"col col-md-6"},Il="Profil Saya",Rh={__name:"Edit",setup(u){return(n,d)=>{const o=Z("i-head"),i=Z("authenticated-layout");return c(),w(Q,null,[e(o,{title:Il}),e(i,null,{title:l(()=>[v(r(Il))]),default:l(()=>[t("div",Ch,[t("div",Th,[t("div",Ph,[e(tn,{class:"q-mb-md"}),e(en)])])])]),_:1})],64)}}},Oh=Object.freeze(Object.defineProperty({__proto__:null,default:Rh},Symbol.toStringTag,{value:"Module"})),Dh={class:"q-gutter-sm"},Ih={class:"q-gutter-sm"},Uh={class:"col col-md-6 q-pa-xs"},Eh={class:"row"},Ah={class:"detail"},jh={key:0},Nh={key:1,class:"text-grey-8 text-italic"},Mh={key:2},Bh={class:"text-subtitle2 text-bold text-grey-8 q-mt-xs"},zh={key:3,class:"text-grey-8 text-italic"},Ul="Rincian Role Pengguna",Fh={__name:"Detail",setup(u){const n=ve(),d=X(()=>{const o={};return n.props.data.permissions&&n.props.data.permissions.forEach(i=>{const s=i.category;o[s]||(o[s]=[]),o[s].push(i)}),o});return(o,i)=>{const s=Z("i-head"),g=Z("i-link"),b=Z("authenticated-layout");return c(),w(Q,null,[e(s,{title:Ul}),e(b,{"show-drawer-button":!0},{title:l(()=>[v(r(Ul))]),"left-button":l(()=>[t("div",Dh,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=f=>o.$goBack())})])]),"right-button":l(()=>[t("div",Ih,[o.$can("admin.user-role.edit")?(c(),O(I,{key:0,icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=f=>a(ee).get(o.route("admin.user-role.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Uh,[t("div",Eh,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[i[7]||(i[7]=t("div",{class:"text-subtitle1 text-bold text-grey-8"},"Info Role",-1)),t("table",Ah,[t("tbody",null,[t("tr",null,[i[2]||(i[2]=t("td",{style:{width:"100px"}},"Nama Role",-1)),i[3]||(i[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[i[4]||(i[4]=t("td",null,"Deskripsi",-1)),i[5]||(i[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.description),1)])])]),i[8]||(i[8]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Pengguna ",-1)),a(n).props.data.users.length>0?(c(),w("div",jh,[(c(!0),w(Q,null,je(a(n).props.data.users,f=>(c(),w("div",null,[i[6]||(i[6]=v("  ",-1)),e(g,{href:o.route("admin.user.detail",{id:f.id})},{default:l(()=>[v(r(f.username)+" - "+r(f.name),1)]),_:2},1032,["href"])]))),256))])):(c(),w("div",Nh," Belum ada akun pengguna yang terdaftar. ")),i[9]||(i[9]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Hak Akses ",-1)),a(n).props.data.permissions.length>0?(c(),w("div",Mh,[(c(!0),w(Q,null,je(d.value,(f,m)=>(c(),w("div",{key:m},[t("div",Bh,r(m),1),(c(!0),w(Q,null,je(f,p=>(c(),w("div",{key:p.id},"  "+r(p.label),1))),128))]))),128))])):(c(),w("div",zh," Belum ada hak akses yang ditetapkan. "))]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Lh=Object.freeze(Object.defineProperty({__proto__:null,default:Fh},Symbol.toStringTag,{value:"Module"})),Kh={class:"q-gutter-sm"},Hh={class:"col col-md-6 q-pa-xs"},Yh={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},Wh={__name:"Editor",setup(u){const n=ve(),d=(n.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=We({id:n.props.data.id??null,name:n.props.data.name,description:n.props.data.description,permissions:n.props.data.permissions?n.props.data.permissions.map(g=>g.id):[]}),i=()=>rt({form:o,url:route("admin.user-role.save")}),s=X(()=>{const g={};return n.props.permissions&&n.props.permissions.forEach(b=>{const f=b.category;g[f]||(g[f]=[]),g[f].push(b)}),g});return(g,b)=>{const f=Z("i-head"),m=Z("authenticated-layout");return c(),w(Q,null,[e(f,{title:d}),e(m,{"show-drawer-button":!0},{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",Kh,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=p=>g.$goBack())})])]),"right-button":l(()=>[e(I,{icon:"save",label:"Simpan",color:"primary",disable:a(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:J(i,["prevent"])},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Hh,[e(Qe,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=p=>a(o).id=p)},null,512),[[kt,a(o).id]]),e(se,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":b[2]||(b[2]=p=>a(o).name=p),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[p=>p&&p.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:a(o).description,"onUpdate:modelValue":b[3]||(b[3]=p=>a(o).description=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(c(!0),w(Q,null,je(s.value,(p,y)=>(c(),w("div",{key:y},[t("div",Yh,r(y),1),(c(!0),w(Q,null,je(p,_=>(c(),w("div",{key:_.id},[e(oa,{class:"q-ma-none q-pa-none list-checkbox",modelValue:a(o).permissions,"onUpdate:modelValue":x=>a(o).permissions=x,val:_.id,label:_.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Qh=_t(Wh,[["__scopeId","data-v-2c2a059c"]]),Jh=Object.freeze(Object.defineProperty({__proto__:null,default:Qh},Symbol.toStringTag,{value:"Module"})),Gh={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Xh={class:"q-pa-xs"},Zh={class:"full-width row flex-center text-grey-8 q-gutter-sm"},e$={class:"flex justify-end"},El="Role Pengguna",t$={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=De({search:"",...Ne()}),m=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"name",label:"Nama Role",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];$e(()=>{_()});const y=Y=>st({message:`Hapus role ${Y.name}?`,url:route("admin.user-role.delete",Y.id),fetchItemsCallback:_,loading:i}),_=(Y=null)=>{Me({pagination:m,filter:f,props:Y,rows:o,url:route("admin.user-role.data"),loading:i,tableRef:s})},x=Y=>ee.get(route("admin.user-role.detail",{id:Y.id})),{protectClick:C}=Ot(),$=C(x),B=X(()=>n.screen.gt.sm?p:p.filter(Y=>Y.name==="name"||Y.name==="action"));return(Y,E)=>{const z=Z("i-head"),R=Z("authenticated-layout");return c(),w(Q,null,[e(z,{title:El}),e(R,null,Je({title:l(()=>[v(r(El))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:E[0]||(E[0]=M=>d.value=!d.value)},null,8,["icon"]),Y.$can("admin.user-role.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:E[1]||(E[1]=M=>a(ee).get(Y.route("admin.user-role.add")))})):k("",!0)]),default:l(()=>[t("div",Xh,[e(Ie,{class:"full-height-table",ref_key:"tableRef",ref:s,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":E[4]||(E[4]=M=>m.value=M),filter:f.search,loading:i.value,columns:B.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:M,message:A,filter:V})=>[t("div",Zh,[t("span",null,r(A)+" "+r(V?" with term "+V:""),1)])]),body:l(M=>[e(Pe,{props:M,class:"cursor-pointer",onClick:J(A=>a($)(M.row,A),["stop"])},{default:l(()=>[e(W,{key:"name",props:M,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(c(),O(T,{key:0,name:"person"})):k("",!0),v(" "+r(M.row.name),1)])]),_:2},1032,["props"]),e(W,{key:"description",props:M,class:"wrap-column"},{default:l(()=>[v(r(M.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:M},{default:l(()=>[t("div",e$,[Y.$can("admin.user-role.add")||Y.$can("admin.user-role.edit")||Y.$can("admin.user-role.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:E[3]||(E[3]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[Y.$can("admin.user-role.add")?le((c(),O(oe,{key:0,clickable:"",onClick:J(A=>a(ee).get(Y.route("admin.user-role.duplicate",M.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(L,null,{default:l(()=>[...E[5]||(E[5]=[v(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),Y.$can("admin.user-role.edit")?le((c(),O(oe,{key:1,clickable:"",onClick:J(A=>a(ee).get(Y.route("admin.user-role.edit",M.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...E[6]||(E[6]=[v("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),Y.$can("admin.user-role.delete")?le((c(),O(oe,{key:2,onClick:J(A=>y(M.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...E[7]||(E[7]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Gh,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":E[2]||(E[2]=M=>f.search=M),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},a$=Object.freeze(Object.defineProperty({__proto__:null,default:t$},Symbol.toStringTag,{value:"Module"})),l$={class:"q-gutter-sm"},o$={class:"q-gutter-sm"},n$={class:"row justify-center"},s$={class:"col col-md-6 q-pa-xs"},r$={class:"row"},i$={class:"detail"},d$={key:0},u$={key:0},m$={key:1},c$={key:2},Al="Rincian Pengguna",p$={__name:"Detail",setup(u){const n=ve();return(d,o)=>{const i=Z("i-head"),s=Z("i-link"),g=Z("authenticated-layout");return c(),w(Q,null,[e(i,{title:Al}),e(g,{"show-drawer-button":!0},{title:l(()=>[v(r(Al))]),"left-button":l(()=>[t("div",l$,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>d.$inertia.get(d.route("admin.user.index")))})])]),"right-button":l(()=>[t("div",o$,[d.$can("admin.user.edit")&&a(n).props.data.id!=a(n).props.auth.user.id?(c(),O(I,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:o[1]||(o[1]=b=>d.$inertia.get(d.route("admin.user.edit",{id:a(n).props.data.id})))})):k("",!0)])]),default:l(()=>[t("div",n$,[t("div",s$,[t("div",r$,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>{var b,f;return[o[21]||(o[21]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),t("table",i$,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"125px"}},"ID Pengguna",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.username),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Nama Pengguna",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Jenis Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.USER_TYPES[a(n).props.data.type]),1)]),a(n).props.data.roles.length>0?(c(),w("tr",d$,[o[8]||(o[8]=t("td",null,"Peran Pengguna",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,[(c(!0),w(Q,null,je(a(n).props.data.roles,(m,p)=>(c(),w("div",{key:m.id,class:"inline"},[e(s,{href:d.route("admin.user-role.detail",{id:m.id})},{default:l(()=>[v(r(m.name),1)]),_:2},1032,["href"]),p<a(n).props.data.roles.length-1?(c(),w("span",u$,", ")):k("",!0)]))),128))])])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Status",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Dibuat",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.created_at))+" oleh "+r(((b=a(n).props.data.creator)==null?void 0:b.name)??"Sistem")+" ("+r(((f=a(n).props.data.creator)==null?void 0:f.username)??"system")+") ",1)]),a(n).props.data.updated_at?(c(),w("tr",m$,[o[14]||(o[14]=t("td",null,"Diperbarui",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,[v(r(a(be)(a(n).props.data.updated_at))+" ",1),a(n).props.data.updater?(c(),w(Q,{key:0},[v(" oleh "+r(a(n).props.data.updater.name)+" ("+r(a(n).props.data.updater.username)+") ",1)],64)):k("",!0)])])):k("",!0),t("tr",null,[o[16]||(o[16]=t("td",null,"Terakhir login",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.last_login_datetime?d.$dayjs(a(n).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),a(n).props.data.last_activity_datetime?(c(),w("tr",c$,[o[19]||(o[19]=t("td",null,"Aktifitas Terakhir",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,[v(r(d.$dayjs(a(n).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),o[18]||(o[18]=t("br",null,null,-1)),v(r(a(n).props.data.last_activity_description),1)])])):k("",!0)])])]}),_:1})]),_:1})])])])]),_:1})],64)}}},f$=Object.freeze(Object.defineProperty({__proto__:null,default:p$},Symbol.toStringTag,{value:"Module"}));function g$(u){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(u)}const b$={class:"q-gutter-sm"},v$={class:"row justify-center"},y$={class:"col col-md-6 q-pa-xs"},_$={__name:"Editor",setup(u){const n=Ze(window.CONSTANTS.USER_TYPES),d=ve(),o=d.props.roles,i=d.props.data.id?"Edit Pengguna":"Tambah Pengguna",s=d.props.data.roles,g=Array.isArray(s)?s.map(m=>m.id):[],b=We({id:d.props.data.id,name:d.props.data.name,username:d.props.data.username,password:"",type:d.props.data.type?d.props.data.type:n[0].value,active:!!d.props.data.active,roles:g}),f=()=>rt({form:b,url:route("admin.user.save")});return(m,p)=>{const y=Z("i-head"),_=Z("authenticated-layout");return c(),w(Q,null,[e(y,{title:a(i)},null,8,["title"]),e(_,{"show-drawer-button":!0},{title:l(()=>[v(r(a(i)),1)]),"left-button":l(()=>[t("div",b$,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=x=>m.$goBack())})])]),default:l(()=>[t("div",v$,[t("div",y$,[e(Qe,{class:"row",onSubmit:J(f,["prevent"])},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=x=>a(b).id=x)},null,512),[[kt,a(b).id]]),e(se,{autofocus:"",modelValue:a(b).username,"onUpdate:modelValue":p[2]||(p[2]=x=>a(b).username=x),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:a(b).processing,error:!!a(b).errors.username,"error-message":a(b).errors.username,rules:[x=>x&&x.length>0||"Username harus diisi.",x=>a(g$)(x)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(se,{modelValue:a(b).name,"onUpdate:modelValue":p[3]||(p[3]=x=>a(b).name=x),modelModifiers:{trim:!0},label:"Nama",error:!!a(b).errors.name,disable:a(b).processing,"error-message":a(b).errors.name,rules:[x=>x&&x.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:a(b).password,"onUpdate:modelValue":p[4]||(p[4]=x=>a(b).password=x),type:"password",label:"Kata Sandi","lazy-rules":"",disable:a(b).processing,error:!!a(b).errors.password,"error-message":a(b).errors.password,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(b).type,"onUpdate:modelValue":p[5]||(p[5]=x=>a(b).type=x),label:"Jenis Akun",options:a(n),"map-options":"","emit-value":"","lazy-rules":"",disable:a(b).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(b).errors.type,"error-message":a(b).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),a(b).type=="standard_user"?(c(),O(ce,{key:0,modelValue:a(b).roles,"onUpdate:modelValue":p[6]||(p[6]=x=>a(b).roles=x),label:"Peran",options:a(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:a(b).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(b).errors.roles||!!a(b).errors["roles.0"],"error-message":a(b).errors.roles||a(b).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(ga,{modelValue:a(b).active,"onUpdate:modelValue":p[7]||(p[7]=x=>a(b).active=x),disable:a(b).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(I,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(b).processing,onClick:f},null,8,["disable"]),e(I,{icon:"cancel",label:"Batal",class:"text-black",disable:a(b).processing,onClick:p[8]||(p[8]=x=>m.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},k$=Object.freeze(Object.defineProperty({__proto__:null,default:_$},Symbol.toStringTag,{value:"Module"})),w$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},h$={class:"q-pa-xs"},$$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},x$={class:"elipsis",style:{"max-width":"200px"}},S$={class:"flex justify-end"},jl="Pengguna",V$={__name:"Index",setup(u){const n=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.USER_TYPES)],d=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=ve(),i=Se(),s=o.props.auth.user,g=q([]),b=q(!0),f=q(!1),m=De({type:"all",roles:[],status:"active",search:""}),p=o.props.roles.map(V=>({value:V.id,label:V.name})),y=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),_=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];$e(()=>{C()});const x=()=>C(),C=(V=null)=>Me({pagination:y,props:V,rows:g,loading:b,filter:m,url:route("admin.user.data"),tableRef:R}),$=V=>st({url:route("admin.user.delete",V.id),message:`Hapus pengguna ${V.username}?`,fetchItemsCallback:C,loading:b}),B=X(()=>i.screen.gt.sm?_:_.filter(V=>V.name==="username"||V.name==="action")),Y=V=>ee.get(route("admin.user.detail",V.id)),{protectClick:E}=Ot(),z=E(Y),R=q(null),M=q(null),A=at(M);return(V,D)=>{const P=Z("i-head"),h=Z("authenticated-layout");return c(),w(Q,null,[e(P,{title:jl}),e(h,null,Je({title:l(()=>[v(r(jl))]),"right-button":l(()=>[e(I,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=U=>f.value=!f.value)},null,8,["icon"]),V.$can("admin.user.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:D[1]||(D[1]=U=>a(ee).get(V.route("admin.user.add")))})):k("",!0)]),default:l(()=>[t("div",h$,[e(Ie,{ref_key:"tableRef",ref:R,class:"full-height-table",style:Ke({height:a(A)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":D[7]||(D[7]=U=>y.value=U),filter:m.search,loading:b.value,columns:B.value,rows:g.value,"rows-per-page-options":[10,25,50],onRequest:C,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:U,message:N,term:S})=>[t("div",$$,[t("span",null,r(N)+" "+r(S?" with term "+S:""),1)])]),body:l(U=>[e(Pe,{props:U,class:qe([U.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(N=>a(z)(U.row,N),["stop"])},{default:l(()=>[e(W,{key:"username",props:U},{default:l(()=>[t("div",null,[a(i).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[e(T,{name:"person",class:"inline-icon"}),D[8]||(D[8]=v(" Username: ",-1))],64)),v(" "+r(U.row.username),1)]),a(i).screen.gt.sm?k("",!0):(c(),w(Q,{key:0},[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" Nama: "+r(U.row.name),1)]),t("div",x$,[e(T,{name:"group",class:"inline-icon"}),D[9]||(D[9]=v(" Jenis Akun: ",-1)),t("span",null,r(V.$CONSTANTS.USER_TYPES[U.row.type]),1)]),t("div",null,[e(T,{name:"group",class:"inline-icon"}),v(" Peran: "+r(U.row.roles.map(N=>N.name).join(",")),1)])],64))]),_:2},1032,["props"]),e(W,{key:"name",props:U},{default:l(()=>[v(r(U.row.name),1)]),_:2},1032,["props"]),e(W,{key:"role",props:U,align:"center"},{default:l(()=>[t("span",null,r(V.$CONSTANTS.USER_TYPES[U.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"action",props:U},{default:l(()=>[t("div",S$,[V.$can("admin.user.add")||V.$can("admin.user.edit")||V.$can("admin.user.delete")?(c(),O(I,{key:0,disable:U.row.id==a(s).id||U.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[6]||(D[6]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[V.$can("admin.user.add")?le((c(),O(oe,{key:0,clickable:"",onClick:J(N=>a(ee).get(V.route("admin.user.duplicate",U.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(L,null,{default:l(()=>[...D[10]||(D[10]=[v(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),V.$can("admin.user.edit")?le((c(),O(oe,{key:1,clickable:"",onClick:J(N=>a(ee).get(V.route("admin.user.edit",U.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...D[11]||(D[11]=[v("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),V.$can("admin.user.delete")?le((c(),O(oe,{key:2,onClick:J(N=>$(U.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...D[12]||(D[12]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[f.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:M},{default:l(()=>[t("div",w$,[e(ce,{modelValue:m.type,"onUpdate:modelValue":[D[2]||(D[2]=U=>m.type=U),x],class:"custom-select col-xs-12 col-sm-2",options:n,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:m.status,"onUpdate:modelValue":[D[3]||(D[3]=U=>m.status=U),x],class:"custom-select col-xs-12 col-sm-2",options:d,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:m.roles,"onUpdate:modelValue":[D[4]||(D[4]=U=>m.roles=U),x],class:"custom-select col-xs-12 col-sm-2",options:a(p),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":D[5]||(D[5]=U=>m.search=U),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},q$=Object.freeze(Object.defineProperty({__proto__:null,default:V$},Symbol.toStringTag,{value:"Module"})),C$={class:"q-gutter-sm"},T$={class:"col col-lg-6 q-pa-xs"},P$={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},R$={class:"row q-col-gutter-sm q-mb-md"},O$={key:0},D$={class:"text-bold"},I$={key:0},U$={class:"text-caption text-grey-8"},E$={key:1},Nl="Buat Penyesuaian Stok",A$={__name:"Create",setup(u){const n=ve(),d=q(!1),o=n.props.products,{filteredCategories:i,filterCategories:s}=Ia(n.props.categories),{filteredSuppliers:g,filterSupplierFn:b}=Ua(n.props.suppliers),f=q({search:null,category_id:null,supplier_id:null}),m=q([]),p=We({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),y=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(Y,E)=>K(Y)+" "+E.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],_=Ze(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),x=X(()=>o.filter(Y=>{let E=!0;if(d.value&&!m.value.find(z=>z.id===Y.id))return!1;if(f.value.search){const z=f.value.search.toLowerCase();E=Y.name.toLowerCase().includes(z)||Y.description.toLowerCase().includes(z)||Y.barcode&&Y.barcode.toLowerCase().includes(z)}return E&&f.value.category_id&&(E=Y.category_id===f.value.category_id),E&&f.value.supplier_id&&(E=Y.supplier_id===f.value.supplier_id),E})),C=()=>{ht.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{p.product_ids=m.value.map(Y=>Y.id),sa(p,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:p,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},$=Se(),B=X(()=>$.screen.gt.sm?y:y.filter(Y=>Y.name==="name"));return(Y,E)=>{const z=Z("i-head"),R=Z("authenticated-layout");return c(),w(Q,null,[e(z,{title:Nl}),e(R,{"show-drawer-button":!0},{title:l(()=>[v(r(Nl))]),"left-button":l(()=>[t("div",C$,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:E[0]||(E[0]=M=>a(ee).get(Y.route("admin.stock-adjustment.index")))})])]),"right-button":l(()=>[e(I,{icon:"cancel",disable:a(p).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:E[1]||(E[1]=M=>a(ee).get(Y.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(I,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:a(p).processing||m.value.length==0,class:"q-ml-sm",onClick:C},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",T$,[e(Qe,{class:"row",onSubmit:J(C,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-sm"},{default:l(()=>{var M,A,V;return[E[10]||(E[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(zt,{modelValue:a(p).datetime,"onUpdate:modelValue":E[2]||(E[2]=D=>a(p).datetime=D),label:"Waktu",error:!!a(p).errors.datetime,disable:a(p).processing,"error-message":a(p).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:a(p).type,"onUpdate:modelValue":E[3]||(E[3]=D=>a(p).type=D),options:a(_),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(p).errors.type,disable:a(p).processing,"map-options":"","emit-value":"","error-message":a(p).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(se,{modelValue:a(p).notes,"onUpdate:modelValue":E[4]||(E[4]=D=>a(p).notes=D),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(p).processing,error:!!a(p).errors.notes,"error-message":a(p).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),m.value.length===0||(M=a(n).props.errors)!=null&&M.product_ids?(c(),w("div",P$,[m.value.length===0?(c(),w(Q,{key:0},[v(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(A=a(n).props.errors)!=null&&A.product_ids?(c(),w(Q,{key:1},[v(r((V=a(n).props.errors)==null?void 0:V.product_ids),1)],64)):k("",!0)])):k("",!0),E[11]||(E[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",R$,[e(se,{modelValue:f.value.search,"onUpdate:modelValue":E[5]||(E[5]=D=>f.value.search=D),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(ce,{modelValue:f.value.category_id,"onUpdate:modelValue":E[6]||(E[6]=D=>f.value.category_id=D),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(i),"map-options":"",dense:"","emit-value":"",onFilter:a(s),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(ce,{modelValue:f.value.supplier_id,"onUpdate:modelValue":E[7]||(E[7]=D=>f.value.supplier_id=D),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(g),"map-options":"",dense:"","emit-value":"",onFilter:a(b),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:E[8]||(E[8]=D=>d.value=!d.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},r(d.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:B.value,rows:x.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:m.value,"onUpdate:selected":E[9]||(E[9]=D=>m.value=D)},{"body-cell-name":l(D=>[e(W,{props:D},{default:l(()=>[a($).screen.lt.md?(c(),w("div",O$,[t("div",D$,r(D.row.name),1),D.row.category?(c(),w("div",I$,r(D.row.category.name),1)):k("",!0),t("div",U$,r(a(K)(D.row.stock))+" "+r(D.row.uom),1)])):(c(),w("div",E$,r(D.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},j$=Object.freeze(Object.defineProperty({__proto__:null,default:A$},Symbol.toStringTag,{value:"Module"})),N$={class:"q-gutter-sm"},M$={class:"q-gutter-sm"},B$={class:"row justify-center"},z$={class:"col col-lg-8 q-pa-sm"},F$={class:"row"},L$={class:"detail"},K$={key:0},H$={key:1},Y$={class:"text-grey-9"},W$={__name:"Detail",setup(u){const n=ve(),d=`Rincian #${n.props.data.code}`,o=n.props.details,i=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:f=>K(f)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:f=>K(f)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:f=>K(f)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],s=Se(),g=X(()=>s.screen.gt.sm?i:i.filter(f=>f.name==="no")),b=()=>{window.open(route("admin.stock-adjustment.print",{id:n.props.data.id}),"_blank")};return(f,m)=>{const p=Z("i-head"),y=Z("i-link"),_=Z("authenticated-layout");return c(),w(Q,null,[e(p,{title:d}),e(_,{"show-drawer-button":!0},{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",N$,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=x=>f.$inertia.get(f.route("admin.stock-adjustment.index")))})])]),"right-button":l(()=>[t("div",M$,[e(I,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[1]||(m[1]=x=>b())})])]),default:l(()=>[t("div",B$,[t("div",z$,[t("div",F$,[e(ge,{square:"",flat:"",bordered:"",class:"q-card col"},{default:l(()=>[e(ae,null,{default:l(()=>[m[22]||(m[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",L$,[t("tbody",null,[t("tr",null,[m[2]||(m[2]=t("td",{style:{width:"120px"}},"Kode",-1)),m[3]||(m[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+r(a(n).props.data.code),1)]),t("tr",null,[m[4]||(m[4]=t("td",null,"Jenis",-1)),m[5]||(m[5]=t("td",null,":",-1)),t("td",null,r(f.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[a(n).props.data.type]),1)]),t("tr",null,[m[6]||(m[6]=t("td",null,"Status",-1)),m[7]||(m[7]=t("td",null,":",-1)),t("td",null,r(f.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[a(n).props.data.status]),1)]),t("tr",null,[m[8]||(m[8]=t("td",null,"Waktu",-1)),m[9]||(m[9]=t("td",null,":",-1)),t("td",null,r(a(be)(a(n).props.data.datetime)),1)]),a(n).props.data.created_at?(c(),w("tr",K$,[m[11]||(m[11]=t("td",null,"Dibuat Oleh",-1)),m[12]||(m[12]=t("td",null,":",-1)),t("td",null,[a(n).props.data.creator?(c(),w(Q,{key:0},[e(y,{href:f.route("admin.user.detail",{id:a(n).props.data.creator})},{default:l(()=>[v(r(a(n).props.data.creator.username)+" - "+r(a(n).props.data.creator.name),1)]),_:1},8,["href"]),m[10]||(m[10]=v(" - ",-1))],64)):k("",!0),v(" "+r(a(be)(a(n).props.data.created_at)),1)])])):k("",!0),a(n).props.data.updater?(c(),w("tr",H$,[m[14]||(m[14]=t("td",null,"Diperbarui oleh",-1)),m[15]||(m[15]=t("td",null,":",-1)),t("td",null,[a(n).props.data.updater?(c(),w(Q,{key:0},[e(y,{href:f.route("admin.user.detail",{id:a(n).props.data.updater})},{default:l(()=>[v(r(a(n).props.data.updater.username)+" - "+r(a(n).props.data.updater.name),1)]),_:1},8,["href"]),m[13]||(m[13]=v(" - ",-1))],64)):k("",!0),v(" "+r(a(be)(a(n).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[m[16]||(m[16]=t("td",null,"Total Modal",-1)),m[17]||(m[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:qe(a(n).props.data.total_cost<0?"text-red-10":a(n).props.data.total_cost>0?"text-green-10":"")},r(a(aa)(a(n).props.data.total_cost)),3)])]),t("tr",null,[m[18]||(m[18]=t("td",null,"Total Harga",-1)),m[19]||(m[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:qe(a(n).props.data.total_price<0?"text-red-10":a(n).props.data.total_price>0?"text-green-10":"")},r(a(aa)(a(n).props.data.total_price)),3)])]),t("tr",null,[m[20]||(m[20]=t("td",null,"Catatan",-1)),m[21]||(m[21]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.notes),1)])])])]),_:1}),e(ae,null,{default:l(()=>[m[28]||(m[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Ie,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:g.value,rows:a(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":l(x=>[e(W,{props:x},{default:l(()=>[a(s).screen.lt.md?(c(),w(Q,{key:1},[t("div",Y$,[t("b",null,"#"+r(x.rowIndex+1),1),m[23]||(m[23]=v(" - ",-1)),e(y,{href:f.route("admin.product.detail",{id:x.row.product_id})},{default:l(()=>[v(r(x.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[v(" Stok Lama: "+r(a(K)(x.row.old_quantity))+" "+r(x.row.uom),1),m[25]||(m[25]=t("br",null,null,-1)),v(" Stok Baru: "+r(a(K)(x.row.new_quantity))+" "+r(x.row.uom),1),m[26]||(m[26]=t("br",null,null,-1)),t("div",{class:qe(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},[v(" Selisih: "+r((x.row.balance>0?"+":"")+a(K)(x.row.balance))+" "+r(x.row.uom),1),m[24]||(m[24]=t("br",null,null,-1)),v(" (Rp. "+r(a(K)(x.row.subtotal_cost))+" / Rp. "+r(a(K)(x.row.subtotal_price))+") ",1)],2),m[27]||(m[27]=t("br",null,null,-1)),v(" "+r(x.row.notes),1)])],64)):(c(),w(Q,{key:0},[v(r(x.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":l(x=>[e(W,{props:x},{default:l(()=>[e(y,{href:f.route("admin.product.detail",{id:x.row.product_id})},{default:l(()=>[v(r(x.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":l(x=>[e(W,{props:x},{default:l(()=>[t("div",{class:qe(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},r((x.row.balance>0?"+":"")+a(K)(x.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":l(x=>[e(W,{props:x},{default:l(()=>[t("div",{class:qe(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},r(a(K)(x.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":l(x=>[e(W,{props:x},{default:l(()=>[t("div",{class:qe(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},r(a(K)(x.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},Q$=Object.freeze(Object.defineProperty({__proto__:null,default:W$},Symbol.toStringTag,{value:"Module"})),J$={class:"q-gutter-sm"},G$={class:"col col-lg-6 q-pa-xs"},X$={class:"text-bold"},Z$={key:0},ex={class:"text-caption text-grey-8"},Ml="Penyesuaian Stok",tx={__name:"Editor",setup(u){const n=Se(),d=ve(),o=We({id:d.props.item.id,type:d.props.item.type,datetime:new Date(d.props.item.datetime),notes:d.props.item.notes,action:"save",details:[]}),i=Ze(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),s=q(d.props.details.map(p=>(typeof p.new_quantity=="string"&&(p.new_quantity=parseFloat(p.new_quantity)),p))),g=p=>{const y=()=>{o.action=p,o.details=s.value.map(_=>({id:_.id,new_quantity:_.new_quantity})),sa(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:o,url:route("admin.stock-adjustment.save")})};p==="close"||p==="cancel"?ht.create({title:"Konfirmasi",message:p==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{y()}).onCancel(()=>{}):y()},b=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:p=>K(p)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:p=>K(p)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(p,y)=>K(y.new_quantity-y.old_quantity)}],f=X(()=>n.screen.gt.sm?b:b.filter(p=>p.name==="product_name"||p.name==="new_quantity")),m=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(p,y)=>{const _=Z("i-head"),x=Z("authenticated-layout");return c(),w(Q,null,[e(_,{title:Ml}),e(x,{"show-drawer-button":!0},{title:l(()=>[v(r(Ml))]),"left-button":l(()=>[t("div",J$,[a(n).screen.gt.sm?(c(),O(I,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=C=>p.$inertia.get(p.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":l(()=>[e(I,{icon:"save",onClick:y[1]||(y[1]=C=>g("save")),disable:a(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(I,{icon:"check",onClick:y[2]||(y[2]=C=>g("close")),disable:a(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),p.$can("admin.product.import")||p.$can("admin.product:view-cost")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:y[5]||(y[5]=J(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[le((c(),O(oe,{clickable:"",onClick:y[3]||(y[3]=C=>m())},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"print"})]),_:1}),e(L,null,{default:l(()=>[...y[10]||(y[10]=[v(" Cetak Kartu Stok",-1)])]),_:1})]),_:1})),[[ue],[pe]]),le((c(),O(oe,{clickable:"",onClick:y[4]||(y[4]=J(C=>g("cancel"),["stop"]))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"cancel",color:"red"})]),_:1}),e(L,{class:"text-red"},{default:l(()=>[...y[11]||(y[11]=[v("Batalkan",-1)])]),_:1})]),_:1})),[[ue],[pe]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",G$,[e(Qe,{class:"row",onSubmit:J(g,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[...y[12]||(y[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[6]||(y[6]=C=>a(o).id=C)},null,512),[[kt,a(o).id]]),e(zt,{modelValue:a(o).datetime,"onUpdate:modelValue":y[7]||(y[7]=C=>a(o).datetime=C),label:"Waktu",error:!!a(o).errors.datetime,disable:a(o).processing,"error-message":a(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":y[8]||(y[8]=C=>a(o).type=C),options:a(i),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(o).errors.type,disable:a(o).processing,"map-options":"","emit-value":"","error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(se,{modelValue:a(o).notes,"onUpdate:modelValue":y[9]||(y[9]=C=>a(o).notes=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-pa-xs"},{default:l(()=>[e(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:f.value,rows:s.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":l(C=>[e(W,{props:C},{default:l(()=>[t("div",X$,r(C.row.product_name),1),a(n).screen.lt.md?(c(),w("div",Z$,[t("div",ex,[v(" Tercatat: "+r(a(K)(C.row.old_quantity))+" ",1),y[13]||(y[13]=t("br",null,null,-1)),v(" Selisih: "+r(a(K)(C.row.new_quantity-C.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":l(C=>[e(W,{props:C,class:"text-center"},{default:l(()=>[e(Ee,{modelValue:C.row[C.col.name],"onUpdate:modelValue":$=>C.row[C.col.name]=$,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ax=Object.freeze(Object.defineProperty({__proto__:null,default:tx},Symbol.toStringTag,{value:"Module"}));function lx(){const u=Rt();if(!u)throw new Error("useCan must be called within a component setup function.");return n=>u.proxy.$can(n)}const ox={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},nx={class:"q-pa-xs"},sx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},rx={key:0,class:"flex q-gutter-xs"},ix={class:"flex q-col-gutter-xs"},dx={key:0},ux={key:1},mx={key:0},cx={class:"flex justify-end"},Bl="Penyesuaian Stok",px={__name:"Index",setup(u){const n=q([]),d=q(!0),o=q(!1),i=q(null),s=q(null),g=at(s),b=Mt(),f=Bt(),m=[{label:"Semua Tahun",value:"all"},{label:`${b}`,value:b},...Vt(b-2,b-1).reverse()],p=[{value:"all",label:"Semua Bulan"},...qt()],y=De({search:"",year:b,month:f,status:"all",type:"all",...Ne()}),_=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],x=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],C=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),$=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];$e(()=>{Y()});const B=D=>st({message:`Hapus Penyesuaian Stok #${D.code}?`,url:route("admin.stock-adjustment.delete",D.id),fetchItemsCallback:Y,loading:d}),Y=(D=null)=>Me({pagination:C,filter:y,props:D,rows:n,url:route("admin.stock-adjustment.data"),loading:d,tableRef:i}),E=()=>{Y()},z=D=>{D.status=="draft"?ee.get(route("admin.stock-adjustment.editor",D.id)):ee.get(route("admin.stock-adjustment.detail",D.id))},{protectClick:R}=Ot(),M=R(z),A=Se(),V=X(()=>{let D=$;return lx()||(D=D.filter(P=>P.name!=="cost")),A.screen.gt.sm?D:D.filter(P=>P.name==="id"||P.name==="action")});return(D,P)=>{const h=Z("i-head"),U=Z("authenticated-layout");return c(),w(Q,null,[e(h,{title:Bl}),e(U,null,Je({"right-button":l(()=>[e(I,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=N=>o.value=!o.value)},null,8,["icon"]),D.$can("admin.stock-adjustment.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=N=>a(ee).get(D.route("admin.stock-adjustment.create")))})):k("",!0)]),title:l(()=>[v(r(Bl))]),default:l(()=>[t("div",nx,[e(Ie,{ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:C.value,"onUpdate:pagination":P[8]||(P[8]=N=>C.value=N),filter:y.search,loading:d.value,columns:V.value,rows:n.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(g)}),onRequest:Y,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:N,message:S,filter:j})=>[t("div",sx,[t("span",null,r(S)+" "+r(j?" with term "+j:""),1)])]),body:l(N=>[e(Pe,{props:N,onClick:J(S=>a(M)(N.row,S),["stop"]),class:"cursor-pointer"},{default:l(()=>[e(W,{key:"id",props:N},{default:l(()=>[a(A).screen.lt.md?(c(),w(Q,{key:1},[t("div",ix,[t("div",null,"#"+r(N.row.code),1),t("div",null,[e(T,{name:"history"}),v(" "+r(a(be)(N.row.datetime)),1)]),e(Ql,{dense:"",size:"sm",color:N.row.status==="draft"?"orange":N.row.status==="closed"?"green":N.row.status==="canceled"?"red":"",icon:N.row.status==="draft"?"emergency":N.row.status==="closed"?"check":N.row.status==="canceled"?"close":""},{default:l(()=>[v(r(D.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[N.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(T,{name:"category"}),v(" "+r(D.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[N.row.type]),1)]),N.row.created_by?(c(),w("div",dx,[e(T,{name:"person"}),P[9]||(P[9]=v(" Dibuat: ",-1)),t("b",null,r(N.row.created_by.username),1),e(T,{name:"history"}),v(" "+r(a(be)(N.row.created_at)),1)])):k("",!0),N.row.updated_by?(c(),w("div",ux,[e(T,{name:"person"}),P[10]||(P[10]=v(" Diperbarui: ",-1)),t("b",null,r(N.row.updated_by.username),1),e(T,{name:"history"}),v(" "+r(a(be)(N.row.updated_at)),1)])):k("",!0),t("div",{class:qe(N.row.total_cost<0?"text-red-10":N.row.total_cost>0?"text-green-10":"")},[e(T,{name:"money"}),D.$can("admin.product:view-cost")?(c(),w("span",mx,"Rp. "+r(a(K)(N.row.total_cost))+" / ",1)):k("",!0),v(" Rp. "+r(a(K)(N.row.total_price)),1)],2)],64)):(c(),w("div",rx,"#"+r(N.row.code),1))]),_:2},1032,["props"]),e(W,{key:"datetime",props:N},{default:l(()=>[v(r(a(be)(N.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"status",props:N,class:"text-center"},{default:l(()=>[v(r(D.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[N.row.status]),1)]),_:2},1032,["props"]),e(W,{key:"type",props:N},{default:l(()=>[v(r(D.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[N.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"total_cost",props:N},{default:l(()=>[D.$can("admin.product:view-cost")?(c(),w("div",{key:0,class:qe(N.row.total_cost<0?"text-red-10":N.row.total_cost>0?"text-green-10":"")},r(a(K)(N.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total_price",props:N},{default:l(()=>[t("div",{class:qe(N.row.total_price<0?"text-red-10":N.row.total_price>0?"text-green-10":"")},r(a(K)(N.row.total_price)),3)]),_:2},1032,["props"]),e(W,{key:"notes",props:N},{default:l(()=>[v(r(N.row.notes),1)]),_:2},1032,["props"]),e(W,{key:"action",props:N},{default:l(()=>[t("div",cx,[D.$can("admin.stock-adjustment.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[7]||(P[7]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[D.$can("admin.stock-adjustment.delete")?le((c(),O(oe,{key:0,onClick:J(S=>B(N.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...P[11]||(P[11]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:s},{default:l(()=>[t("div",ox,[e(ce,{modelValue:y.year,"onUpdate:modelValue":[P[2]||(P[2]=N=>y.year=N),E],options:m,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),y.year!="all"?(c(),O(ce,{key:0,modelValue:y.month,"onUpdate:modelValue":[P[3]||(P[3]=N=>y.month=N),E],options:p,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:y.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:y.status,"onUpdate:modelValue":[P[4]||(P[4]=N=>y.status=N),E],options:_,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:y.type,"onUpdate:modelValue":[P[5]||(P[5]=N=>y.type=N),E],options:x,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":P[6]||(P[6]=N=>y.search=N),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fx=Object.freeze(Object.defineProperty({__proto__:null,default:px},Symbol.toStringTag,{value:"Module"})),gx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},bx={class:"q-pa-xs"},vx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zl="Riwayat Stok",yx={__name:"Index",setup(u){ve();const n=q(null),d=q(null),o=at(d),i=Mt(),s=Bt(),g=[{label:"Semua Tahun",value:"all"},{label:`${i}`,value:i},...Vt(i-2,i-1).reverse()],b=[{value:"all",label:"Semua Bulan"},...qt()],f=[{value:"all",label:"Semua"},...Ze(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],m=Se(),p=q(!1),y=q([]),_=q(!0),x=De({type:"all",search:"",year:i,month:s,...Ne()}),C=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let $=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{const R=new URLSearchParams(window.location.search).get("page");R&&(C.value.page=parseInt(R)),B()});const B=(z=null)=>{Me({pagination:C,filter:x,props:z,rows:y,url:route("admin.stock-movement.data"),loading:_,tableRef:n})},Y=()=>{B()},E=X(()=>m.screen.lt.sm?$.filter(z=>z.name==="id"||z.name==="quantity"):$);return(z,R)=>{const M=Z("i-head"),A=Z("authenticated-layout");return c(),w(Q,null,[e(M,{title:zl}),e(A,null,Je({title:l(()=>[v(r(zl))]),"right-button":l(()=>[e(I,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=V=>p.value=!p.value)},null,8,["icon"])]),default:l(()=>[t("div",bx,[e(Ie,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:C.value,"onUpdate:pagination":R[5]||(R[5]=V=>C.value=V),filter:x.search,loading:_.value,columns:E.value,rows:y.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(o)}),onRequest:B,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:D,filter:P})=>[t("div",vx,[t("span",null,r(D)+" "+r(P?" with term "+P:""),1)])]),body:l(V=>[e(Pe,{props:V},{default:l(()=>[e(W,{key:"id",props:V},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(V.row.code),1)]),t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(be)(V.row.created_at)),1)]),t("div",null,[e(vt,null,{default:l(()=>[v(r(z.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[V.row.ref_type]),1)]),_:2},1024)]),a(m).screen.lt.sm?(c(),w(Q,{key:0},[t("div",null,[e(T,{name:"token",class:"inline-icon"}),v(" "+r(V.row.product.name),1)]),t("div",{class:qe(V.row.quantity>0?"text-positive":"text-negative")},[e(T,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(a(K)(V.row.quantity_before))+" "+r(V.row.uom)+"  "+r(a(K)(V.row.quantity_after))+" "+r(V.row.uom),1)],2),e(he,{text:V.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"product",props:V},{default:l(()=>[v(r(V.row.product.name),1)]),_:2},1032,["props"]),e(W,{key:"quantity_before",props:V},{default:l(()=>[v(r(a(K)(V.row.quantity_before)),1)]),_:2},1032,["props"]),e(W,{key:"quantity",props:V,class:qe(V.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[v(r(a(jt)(V.row.quantity))+" ",1),a(m).screen.lt.sm?(c(),w(Q,{key:0},[v(r(V.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(W,{key:"quantity_after",props:V},{default:l(()=>[v(r(a(K)(V.row.quantity_after)),1)]),_:2},1032,["props"]),e(W,{key:"uom",props:V},{default:l(()=>[v(r(V.row.uom),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:V},{default:l(()=>[e(he,{text:V.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[p.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:d},{default:l(()=>[t("div",gx,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[R[1]||(R[1]=V=>x.year=V),Y],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(c(),O(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[R[2]||(R[2]=V=>x.month=V),Y],options:b,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.ref_type,"onUpdate:modelValue":[R[3]||(R[3]=V=>x.ref_type=V),Y],options:f,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":R[4]||(R[4]=V=>x.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},_x=Object.freeze(Object.defineProperty({__proto__:null,default:yx},Symbol.toStringTag,{value:"Module"})),kx={class:"detail"},wx={key:0},hx={key:1},$x={key:2},xx={key:3},Sx={key:4},Vx={key:5},qx={key:6},Cx={key:0,class:"q-pt-md"},an={__name:"MainInfoTab",setup(u){const n=ve(),d=()=>{st({message:`Hapus Pemasok ${n.props.data.name}?`,url:route("admin.supplier.delete",n.props.data.id),onSuccess:()=>{ee.get(route("admin.supplier.index"))}})};return(o,i)=>(c(),w(Q,null,[t("table",kx,[t("tbody",null,[i[22]||(i[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(n).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Nama",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.name),1)]),t("tr",null,[t("td",null,r(a(n).props.data.balance<0?"Utang":"Utang / Piutang"),1),i[5]||(i[5]=t("td",null,":",-1)),t("td",{class:qe(a(n).props.data.balance<0?"text-red":"text-green")},r(a(aa)(a(n).props.data.balance)),3)]),a(n).props.data.phone_1?(c(),w("tr",wx,[i[6]||(i[6]=t("td",null,"No Telepon",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.phone_1),1)])):k("",!0),a(n).props.data.phone_2?(c(),w("tr",hx,[i[8]||(i[8]=t("td",null,"No Telepon 2",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.phone_2),1)])):k("",!0),a(n).props.data.phone_3?(c(),w("tr",$x,[i[10]||(i[10]=t("td",null,"No Telepon 3",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.phone_3),1)])):k("",!0),a(n).props.data.address?(c(),w("tr",xx,[i[12]||(i[12]=t("td",null,"Alamat",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.address),1)])):k("",!0),a(n).props.data.return_address?(c(),w("tr",Sx,[i[14]||(i[14]=t("td",null,"Alamat Retur",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.return_address),1)])):k("",!0),a(n).props.data.bank_account_name_1||a(n).props.data.bank_account_number_1||a(n).props.data.bank_account_holder_1?(c(),w("tr",Vx,[i[16]||(i[16]=t("td",null,"Rek 1",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.bank_account_name_1)+" "+r(a(n).props.data.bank_account_number_1)+" a.n. "+r(a(n).props.data.bank_account_holder_1),1)])):k("",!0),a(n).props.data.bank_account_name_2||a(n).props.data.bank_account_number_2||a(n).props.data.bank_account_holder_2?(c(),w("tr",qx,[i[18]||(i[18]=t("td",null,"Rek 2",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.bank_account_name_2)+" "+r(a(n).props.data.bank_account_number_2)+" a.n. "+r(a(n).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Status",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(a(n).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(c(),w("div",Cx,[e(I,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=s=>d())})])):k("",!0)],64))}},Tx=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),Px={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Rx={class:"text-bold"},Ox={class:"text-bold"},Dx={key:0},ln={__name:"OrderHistoryTab",setup(u){const n=ve(),d=q([]),o=q(!0),i=De({customer_id:n.props.data.id,...Ne()}),s=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{b()});const b=(p=null)=>Me({pagination:s,filter:i,props:p,rows:d,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:n.props.data.id}}),loading:o}),f=Se(),m=X(()=>f.screen.gt.sm?g:g.filter(p=>p.name==="id"));return(p,y)=>(c(),O(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:s.value,"onUpdate:pagination":y[0]||(y[0]=_=>s.value=_),filter:i.search,loading:o.value,columns:m.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:x,filter:C})=>[t("div",Px,[t("span",null,r(x)+" "+r(C?" with term "+C:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(x=>a(ee).get(p.route("admin.purchase-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",Rx,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(be)(_.row.datetime)),1)]),a(f).screen.lt.md?(c(),w(Q,{key:0},[t("div",Ox,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(_.row.grand_total)),1)]),_.row.notes?(c(),w("div",Dx,[e(he,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(vt,{color:_.row.status=="closed"?"green":"red"},{default:l(()=>[v(r(p.$CONSTANTS.SALES_ORDER_STATUSES[_.row.status]),1)]),_:2},1032,["color"]),e(vt,{color:_.row.payment_status=="fully_paid"?"green":"red",class:"q-ml-xs"},{default:l(()=>[v(r(p.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[_.row.payment_status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[t("div",null,r(a(K)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e(he,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ix=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),Ux={class:"q-gutter-sm"},Ex={class:"q-gutter-sm"},Ax={class:"col col-lg-6 q-pa-xs"},jx={class:"row"},Fl="Rincian Pemasok",Nx={__name:"Detail",setup(u){const n=ve(),d=q("main");return Se(),(o,i)=>{const s=Z("i-head"),g=Z("authenticated-layout");return c(),w(Q,null,[e(s,{title:Fl}),e(g,null,{title:l(()=>[v(r(Fl))]),"left-button":l(()=>[t("div",Ux,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":l(()=>[t("div",Ex,[o.$can("admin.supplier.edit")?(c(),O(I,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>a(ee).get(o.route("admin.supplier.edit",{id:a(n).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(c(),O(I,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>a(ee).get(o.route("admin.supplier.edit",{id:a(n).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(c(),O(I,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>a(ee).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ax,[t("div",jx,[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ct,{modelValue:d.value,"onUpdate:modelValue":i[4]||(i[4]=b=>d.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Info Utama"}),e(ot,{name:"order-history",label:"Riwayat Order"}),e(ot,{name:"version-history",label:"Riwayat Dokumen"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:d.value,"onUpdate:modelValue":i[5]||(i[5]=b=>d.value=b),animated:""},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(an)]),_:1}),e(nt,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(ln)]),_:1}),e(nt,{name:"version-history",class:"q-pa-xs"},{default:l(()=>[e(Da,{"document-id":a(n).props.data.id,"document-type":"supplier"},null,8,["document-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Mx=Object.freeze(Object.defineProperty({__proto__:null,default:Nx},Symbol.toStringTag,{value:"Module"})),Bx={class:"q-gutter-sm"},zx={class:"col col-md-6 q-pa-xs"},Fx={class:"row q-col-gutter-md"},Lx={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},Kx={key:2,class:"row q-col-gutter-md"},Hx={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},Yx={key:4,class:"row q-col-gutter-md"},Wx={key:5,class:"row q-col-gutter-md"},Qx={style:{"margin-left":"-10px"},class:"q-mt-md"},Jx={class:"q-mt-sm"},Gx={__name:"Editor",setup(u){const n=ve(),d=(n.props.data.id?"Edit":"Tambah")+" Pemasok",o=We({id:n.props.data.id,code:n.props.data.code,name:n.props.data.name,phone_1:n.props.data.phone_1,phone_2:n.props.data.phone_2,phone_3:n.props.data.phone_3,url_1:n.props.data.url_1,url_2:n.props.data.url_2,bank_account_name_1:n.props.data.bank_account_name_1,bank_account_holder_1:n.props.data.bank_account_holder_1,bank_account_number_1:n.props.data.bank_account_number_1,bank_account_name_2:n.props.data.bank_account_name_2,bank_account_holder_2:n.props.data.bank_account_holder_2,bank_account_number_2:n.props.data.bank_account_number_2,address:n.props.data.address,return_address:n.props.data.return_address,active:!!n.props.data.active}),i=q(!0),s=()=>rt({form:o,url:route("admin.supplier.save")});return(g,b)=>{const f=Z("i-head"),m=Z("authenticated-layout");return c(),w(Q,null,[e(f,{title:d}),e(m,{"show-drawer-button":!0},{title:l(()=>[v(r(d))]),"left-button":l(()=>[t("div",Bx,[e(I,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=p=>g.$goBack())})])]),"right-button":l(()=>[e(I,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(o).processing,onClick:b[1]||(b[1]=p=>s()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",zx,[e(Qe,{class:"row",onSubmit:J(s,["prevent"]),onValidationError:a(Ye)},{default:l(()=>[e(ge,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[le(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[2]||(b[2]=p=>a(o).id=p)},null,512),[[kt,a(o).id]]),e(se,{modelValue:a(o).code,"onUpdate:modelValue":b[3]||(b[3]=p=>a(o).code=p),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[p=>p&&p.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:a(o).name,"onUpdate:modelValue":b[4]||(b[4]=p=>a(o).name=p),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[p=>p&&p.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",Fx,[e(se,{modelValue:a(o).phone_1,"onUpdate:modelValue":b[5]||(b[5]=p=>a(o).phone_1=p),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_1,"error-message":a(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(c(),O(se,{key:0,modelValue:a(o).phone_2,"onUpdate:modelValue":b[6]||(b[6]=p=>a(o).phone_2=p),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_2,"error-message":a(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(c(),O(se,{key:1,modelValue:a(o).phone_3,"onUpdate:modelValue":b[7]||(b[7]=p=>a(o).phone_3=p),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_3,"error-message":a(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(se,{modelValue:a(o).address,"onUpdate:modelValue":b[8]||(b[8]=p=>a(o).address=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(c(),O(se,{key:0,modelValue:a(o).return_address,"onUpdate:modelValue":b[9]||(b[9]=p=>a(o).return_address=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.return_address,"error-message":a(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(c(),w("div",Lx," Rekening 1 ")),i.value?k("",!0):(c(),w("div",Kx,[e(se,{modelValue:a(o).bank_account_name_1,"onUpdate:modelValue":b[10]||(b[10]=p=>a(o).bank_account_name_1=p),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_1,"error-message":a(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:a(o).bank_account_number_1,"onUpdate:modelValue":b[11]||(b[11]=p=>a(o).bank_account_number_1=p),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_1,"error-message":a(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:a(o).bank_account_holder_1,"onUpdate:modelValue":b[12]||(b[12]=p=>a(o).bank_account_holder_1=p),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_1,"error-message":a(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(c(),w("div",Hx," Rekening 2 ")),i.value?k("",!0):(c(),w("div",Yx,[e(se,{modelValue:a(o).bank_account_name_2,"onUpdate:modelValue":b[13]||(b[13]=p=>a(o).bank_account_name_2=p),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_2,"error-message":a(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:a(o).bank_account_number_2,"onUpdate:modelValue":b[14]||(b[14]=p=>a(o).bank_account_number_2=p),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_2,"error-message":a(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:a(o).bank_account_holder_2,"onUpdate:modelValue":b[15]||(b[15]=p=>a(o).bank_account_holder_2=p),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_2,"error-message":a(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(c(),w("div",Wx,[e(se,{modelValue:a(o).url_1,"onUpdate:modelValue":b[16]||(b[16]=p=>a(o).url_1=p),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_1,"error-message":a(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:a(o).url_2,"onUpdate:modelValue":b[17]||(b[17]=p=>a(o).url_2=p),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_2,"error-message":a(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",Qx,[e(oa,{class:"full-width q-pl-none",modelValue:a(o).active,"onUpdate:modelValue":b[18]||(b[18]=p=>a(o).active=p),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",Jx,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:b[19]||(b[19]=J(p=>i.value=!i.value,["stop"]))},[e(T,{name:i.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),v(" "+r(i.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Xx=Object.freeze(Object.defineProperty({__proto__:null,default:Gx},Symbol.toStringTag,{value:"Module"})),Zx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},eS={class:"q-pa-xs"},tS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},aS={key:0},lS={key:1},oS={class:"flex justify-end"},Ll="Pemasok",nS={__name:"Index",setup(u){const n=Se(),d=q(!1),o=q([]),i=q(!0),s=q(null),g=q(null),b=at(g),f=De({search:"",status:"active",...Ne()}),m=q({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),p=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];$e(()=>{x()});const _=z=>st({message:`Hapus pemasok ${z.name}?`,url:route("admin.supplier.delete",z.id),fetchItemsCallback:x,loading:i}),x=(z=null)=>{Me({pagination:m,filter:f,props:z,rows:o,url:route("admin.supplier.data"),loading:i,tableRef:s})},C=()=>x(),$=z=>ee.get(route("admin.supplier.detail",{id:z.id})),{protectClick:B}=Ot(),Y=B($),E=X(()=>n.screen.gt.sm?p:p.filter(z=>z.name==="code"||z.name==="action"));return(z,R)=>{const M=Z("i-head"),A=Z("authenticated-layout");return c(),w(Q,null,[e(M,{title:Ll}),e(A,null,Je({title:l(()=>[v(r(Ll))]),"right-button":l(()=>[e(I,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=V=>d.value=!d.value)},null,8,["icon"]),z.$can("admin.supplier.add")?(c(),O(I,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=V=>a(ee).get(z.route("admin.supplier.add")))})):k("",!0)]),default:l(()=>[t("div",eS,[e(Ie,{class:"full-height-table",ref_key:"tableRef",ref:s,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":R[5]||(R[5]=V=>m.value=V),filter:f.search,loading:i.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ke({height:a(b)}),onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Le,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:D,filter:P})=>[t("div",tS,[t("span",null,r(D)+" "+r(P?" with term "+P:""),1)])]),body:l(V=>[e(Pe,{props:V,class:qe([V.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(D=>a(Y)(V.row,D),["stop"])},{default:l(()=>[e(W,{key:"code",props:V,class:"wrap-column"},{default:l(()=>[t("div",null,[a(n).screen.lt.md?(c(),O(T,{key:0,name:"person"})):k("",!0),v(" "+r(V.row.code)+" ",1),a(n).screen.lt.md?(c(),w(Q,{key:1},[v(" - "+r(V.row.name),1)],64)):k("",!0)]),a(n).screen.lt.md?(c(),w(Q,{key:0},[t("div",{class:qe(V.row.balance<0?"text-negative":"text-positive")},[e(T,{name:"wallet"}),v(" "+r(a(K)(V.row.balance)),1)],2),V.row.phone_1?(c(),w("div",aS,[e(T,{name:"phone"}),v(" "+r(V.row.phone_1),1)])):k("",!0),V.row.address?(c(),w("div",lS,[e(T,{name:"home_pin"}),v(" "+r(V.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"name",props:V,class:"wrap-column"},{default:l(()=>[v(r(V.row.name),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:V,class:"wrap-column"},{default:l(()=>[t("div",{class:qe(V.row.balance<0?"text-negative":"text-positive")},r(a(K)(V.row.balance)),3)]),_:2},1032,["props"]),e(W,{key:"phone_1",props:V},{default:l(()=>[v(r(V.row.phone_1),1)]),_:2},1032,["props"]),e(W,{key:"address",props:V},{default:l(()=>[v(r(V.row.address),1)]),_:2},1032,["props"]),e(W,{key:"action",props:V},{default:l(()=>[t("div",oS,[z.$can("admin.supplier.add")||z.$can("admin.supplier.edit")||z.$can("admin.supplier.delete")?(c(),O(I,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[4]||(R[4]=J(()=>{},["stop"]))},{default:l(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Fe,{style:{width:"200px"}},{default:l(()=>[z.$can("admin.supplier.add")?le((c(),O(oe,{key:0,clickable:"",onClick:J(D=>a(ee).get(z.route("admin.supplier.duplicate",V.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(L,null,{default:l(()=>[...R[6]||(R[6]=[v(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),z.$can("admin.supplier.edit")?le((c(),O(oe,{key:1,clickable:"",onClick:J(D=>a(ee).get(z.route("admin.supplier.edit",V.row.id)),["stop"])},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(L,null,{default:l(()=>[...R[7]||(R[7]=[v("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0),z.$can("admin.supplier.delete")?le((c(),O(oe,{key:2,onClick:J(D=>_(V.row),["stop"]),clickable:""},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(L,null,{default:l(()=>[...R[8]||(R[8]=[v("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[ue],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Zx,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:f.status,"onUpdate:modelValue":[R[2]||(R[2]=V=>f.status=V),C],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":R[3]||(R[3]=V=>f.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},sS=Object.freeze(Object.defineProperty({__proto__:null,default:nS},Symbol.toStringTag,{value:"Module"})),rS=St({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(u,{slots:n,emit:d}){let o=!1,i,s,g=null,b=null,f,m;function p(){i==null||i(),i=null,o=!1,g!==null&&(clearTimeout(g),g=null),b!==null&&(clearTimeout(b),b=null),s==null||s.removeEventListener("transitionend",f),f=null}function y($,B,Y){B!==void 0&&($.style.height=`${B}px`),$.style.transition=`height ${u.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,i=Y}function _($,B){$.style.overflowY=null,$.style.height=null,$.style.transition=null,p(),B!==m&&d(B)}function x($,B){let Y=0;s=$,o===!0?(p(),Y=$.offsetHeight===$.scrollHeight?0:void 0):(m="hide",$.style.overflowY="hidden"),y($,Y,B),g=setTimeout(()=>{g=null,$.style.height=`${$.scrollHeight}px`,f=E=>{b=null,(Object(E)!==E||E.target===$)&&_($,"show")},$.addEventListener("transitionend",f),b=setTimeout(f,u.duration*1.1)},100)}function C($,B){let Y;s=$,o===!0?p():(m="show",$.style.overflowY="hidden",Y=$.scrollHeight),y($,Y,B),g=setTimeout(()=>{g=null,$.style.height=0,f=E=>{b=null,(Object(E)!==E||E.target===$)&&_($,"hide")},$.addEventListener("transitionend",f),b=setTimeout(f,u.duration*1.1)},100)}return ca(()=>{o===!0&&p()}),()=>Ve(Yl,{css:!1,appear:u.appear,onEnter:x,onLeave:C},n.default)}}),Ft=Gn({}),iS=Object.keys(Zl),Ut=St({name:"QExpansionItem",props:{...Zl,...Zn,...Pa,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Xn,"click","afterShow","afterHide"],setup(u,{slots:n,emit:d}){const{proxy:{$q:o}}=Rt(),i=Ra(u,o),s=q(u.modelValue!==null?u.modelValue:u.defaultOpened),g=q(null),b=es(),{show:f,hide:m,toggle:p}=ts({showing:s});let y,_;const x=X(()=>`q-expansion-item q-item-type q-expansion-item--${s.value===!0?"expanded":"collapsed"} q-expansion-item--${u.popup===!0?"popup":"standard"}`),C=X(()=>u.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:u.contentInsetLevel*56+"px"}),$=X(()=>u.disable!==!0&&(u.href!==void 0||u.to!==void 0&&u.to!==null&&u.to!=="")),B=X(()=>{const me={};return iS.forEach(Re=>{me[Re]=u[Re]}),me}),Y=X(()=>$.value===!0||u.expandIconToggle!==!0),E=X(()=>u.expandedIcon!==void 0&&s.value===!0?u.expandedIcon:u.expandIcon||o.iconSet.expansionItem[u.denseToggle===!0?"denseIcon":"icon"]),z=X(()=>u.disable!==!0&&($.value===!0||u.expandIconToggle===!0)),R=X(()=>({expanded:s.value===!0,detailsId:b.value,toggle:p,show:f,hide:m})),M=X(()=>{const me=u.toggleAriaLabel!==void 0?u.toggleAriaLabel:o.lang.label[s.value===!0?"collapse":"expand"](u.label);return{role:"button","aria-expanded":s.value===!0?"true":"false","aria-controls":b.value,"aria-label":me}});He(()=>u.group,me=>{_==null||_(),me!==void 0&&U()});function A(me){$.value!==!0&&p(me),d("click",me)}function V(me){me.keyCode===13&&D(me,!0)}function D(me,Re){var Be;Re!==!0&&me.qAvoidFocus!==!0&&((Be=g.value)==null||Be.focus()),p(me),Kt(me)}function P(){d("afterShow")}function h(){d("afterHide")}function U(){y===void 0&&(y=as()),s.value===!0&&(Ft[u.group]=y);const me=He(s,Be=>{Be===!0?Ft[u.group]=y:Ft[u.group]===y&&delete Ft[u.group]}),Re=He(()=>Ft[u.group],(Be,de)=>{de===y&&Be!==void 0&&Be!==y&&m()});_=()=>{me(),Re(),Ft[u.group]===y&&delete Ft[u.group],_=void 0}}function N(){const me={class:[`q-focusable relative-position cursor-pointer${u.denseToggle===!0&&u.switchToggleSide===!0?" items-end":""}`,u.expandIconClass],side:u.switchToggleSide!==!0,avatar:u.switchToggleSide},Re=[Ve(T,{class:"q-expansion-item__toggle-icon"+(u.expandedIcon===void 0&&s.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:E.value})];return z.value===!0&&(Object.assign(me,{tabindex:0,...M.value,onClick:D,onKeyup:V}),Re.unshift(Ve("div",{ref:g,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),Ve(L,me,()=>Re)}function S(){let me;return n.header!==void 0?me=[].concat(n.header(R.value)):(me=[Ve(L,()=>[Ve(we,{lines:u.labelLines},()=>u.label||""),u.caption?Ve(we,{lines:u.captionLines,caption:!0},()=>u.caption):null])],u.icon&&me[u.switchToggleSide===!0?"push":"unshift"](Ve(L,{side:u.switchToggleSide===!0,avatar:u.switchToggleSide!==!0},()=>Ve(T,{name:u.icon})))),u.disable!==!0&&u.hideExpandIcon!==!0&&me[u.switchToggleSide===!0?"unshift":"push"](N()),me}function j(){const me={ref:"item",style:u.headerStyle,class:u.headerClass,dark:i.value,disable:u.disable,dense:u.dense,insetLevel:u.headerInsetLevel};return Y.value===!0&&(me.clickable=!0,me.onClick=A,Object.assign(me,$.value===!0?B.value:M.value)),Ve(oe,me,S)}function te(){return le(Ve("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:C.value,id:b.value},At(n.default)),[[Jl,s.value]])}function ie(){const me=[j(),Ve(rS,{duration:u.duration,onShow:P,onHide:h},te)];return u.expandSeparator===!0&&me.push(Ve(Ae,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),Ve(Ae,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),me}return u.group!==void 0&&U(),ca(()=>{_==null||_()}),()=>Ve("div",{class:x.value},[Ve("div",{class:"q-expansion-item__container relative-position"},ie())])}}),dS={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},uS={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},mS={class:"text-bold"},cS={class:"text-grey-8 text-caption"},pS={class:"absolute-bottom text-grey-6 q-pa-md"},qa="amanah-pos.layout.left-drawer-open",fS={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(u,{expose:n}){const d=Se(),o=ve(),i=q(JSON.parse(localStorage.getItem(qa))),s=q(!1),g=()=>i.value=!i.value,b=()=>{i.value=!1};return He(i,f=>{localStorage.setItem(qa,f)}),$e(()=>{i.value=JSON.parse(localStorage.getItem(qa)),d.screen.lt.md&&(i.value=!1)}),n({hideDrawer:b}),(f,m)=>(c(),O(ds,{view:"lHh LpR lFf"},{default:l(()=>[e(ls,null,{default:l(()=>[e(it,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:l(()=>[u.showDrawerButton&&!i.value?(c(),O(I,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:g},{default:l(()=>[e(T,{class:"material-symbols-outlined"},{default:l(()=>[...m[30]||(m[30]=[v("dock_to_right",-1)])]),_:1})]),_:1})):k("",!0),Lt(f.$slots,"left-button",{},void 0,!0),e(os,{style:{"font-size":"16px"}},{default:l(()=>[Lt(f.$slots,"title",{},()=>[v(r(f.$config.APP_NAME),1)],!0)]),_:3}),Lt(f.$slots,"right-button",{},void 0,!0)]),_:3}),Lt(f.$slots,"header",{},void 0,!0)]),_:3}),e(ns,{breakpoint:768,modelValue:i.value,"onUpdate:modelValue":m[29]||(m[29]=p=>i.value=p),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:l(()=>[t("div",dS,[t("div",uS,[e(ss,{modelValue:s.value,"onUpdate:modelValue":m[2]||(m[2]=p=>s.value=p),class:qe(["profile-btn text-bold",{"profile-btn-active":s.value}]),flat:"",label:a(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:l(()=>[e(Fe,{id:"profile-btn-popup",style:{color:"#444"}},{default:l(()=>[e(oe,null,{default:l(()=>[e(ea,{style:{"margin-left":"-15px"}},{default:l(()=>[e(T,{name:"person"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[t("div",mS,r(a(o).props.auth.user.name),1),t("div",cS,[v(r(f.$CONSTANTS.USER_TYPES[a(o).props.auth.user.type])+" ",1),m[31]||(m[31]=t("br",null,null,-1)),v(" "+r(a(o).props.company.name),1)])]),_:1})]),_:1})]),_:1}),e(Ae),le((c(),O(oe,{class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/profile"),onClick:m[0]||(m[0]=p=>a(ee).get(f.route("admin.profile.edit")))},{default:l(()=>[e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[e(T,{name:"manage_accounts",class:"q-mr-sm"}),m[32]||(m[32]=v(" Profil Saya",-1))]),_:1})]),_:1})]),_:1},8,["active"])),[[pe],[ue]]),f.$can("admin.company-profile.edit")?le((c(),O(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/company-profile"),onClick:m[1]||(m[1]=p=>a(ee).get(f.route("admin.company-profile.edit")))},{default:l(()=>[e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[e(T,{name:"home_work",class:"q-mr-sm"}),m[33]||(m[33]=v(" Profil Perusahaan",-1))]),_:1})]),_:1})]),_:1},8,["active"])),[[pe],[ue]]):k("",!0),e(Ae),le((c(),O(oe,{clickable:"",style:{color:"inherit"},href:f.route("admin.auth.logout")},{default:l(()=>[e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[e(T,{name:"logout",class:"q-mr-sm"}),m[34]||(m[34]=v(" Keluar",-1))]),_:1})]),_:1})]),_:1},8,["href"])),[[pe],[ue]])]),_:1})]),_:1},8,["modelValue","label","class"]),i.value?(c(),O(I,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:g},{default:l(()=>[e(T,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(rs,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:l(()=>[e(Fe,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:l(()=>[le((c(),O(oe,{clickable:"",active:f.$page.url.startsWith("/admin/dashboard"),onClick:m[3]||(m[3]=p=>a(ee).get(f.route("admin.dashboard")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"dashboard"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[35]||(m[35]=[v("Dashboard",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]),f.$can("admin.sales-order.index")||f.$can("admin.customer.index")||f.$can("admin.sales-order-return.index")?(c(),O(Ut,{key:0,icon:"storefront",label:"Penjualan","default-opened":f.$page.url.startsWith("/admin/sales-orders")||f.$page.url.startsWith("/admin/sales-order-returns")||f.$page.url.startsWith("/admin/customers")},{default:l(()=>[f.$can("admin.sales-order.index")?le((c(),O(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/sales-orders"),onClick:m[4]||(m[4]=p=>a(ee).get(f.route("admin.sales-order.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"add_shopping_cart"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[36]||(m[36]=[v("Penjualan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.sales-order-return.index")?le((c(),O(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/sales-order-returns"),onClick:m[5]||(m[5]=p=>a(ee).get(f.route("admin.sales-order-return.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"remove_shopping_cart"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[37]||(m[37]=[v("Retur Penjualan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.customer.index")?le((c(),O(oe,{key:2,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/customers"),onClick:m[6]||(m[6]=p=>a(ee).get(f.route("admin.customer.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"people"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[38]||(m[38]=[v("Pelanggan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.purchase-order.index")||f.$can("admin.supplier.index")||f.$can("admin.purchase-order-return.index")?(c(),O(Ut,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":f.$page.url.startsWith("/admin/purchase-orders")||f.$page.url.startsWith("/admin/purchase-order-returns")||f.$page.url.startsWith("/admin/suppliers")},{default:l(()=>[f.$can("admin.purchase-order.index")?le((c(),O(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/purchase-orders"),onClick:m[7]||(m[7]=p=>a(ee).get(f.route("admin.purchase-order.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"add_shopping_cart"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[39]||(m[39]=[v("Pembelian",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.purchase-order-return.index")?le((c(),O(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/purchase-order-returns"),onClick:m[8]||(m[8]=p=>a(ee).get(f.route("admin.purchase-order-return.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"remove_shopping_cart"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[40]||(m[40]=[v("Retur Pembelian",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.supplier.index")?le((c(),O(oe,{key:2,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/suppliers"),onClick:m[9]||(m[9]=p=>a(ee).get(f.route("admin.supplier.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"people"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[41]||(m[41]=[v("Pemasok",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.product.index")||f.$can("admin.product-category.index")||f.$can("admin.stock-adjustment.index")||f.$can("admin.stock-movement.index")?(c(),O(Ut,{key:2,icon:"inventory_2",label:"Inventori","default-opened":f.$page.url.startsWith("/admin/products")||f.$page.url.startsWith("/admin/product-categories")||f.$page.url.startsWith("/admin/stock-adjustments")||f.$page.url.startsWith("/admin/stock-movements")},{default:l(()=>[f.$can("admin.stock-adjustment.index")?le((c(),O(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/stock-adjustments"),onClick:m[10]||(m[10]=p=>a(ee).get(f.route("admin.stock-adjustment.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"swap_vert"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[42]||(m[42]=[v("Penyesuaian Stok",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.stock-movement.index")?le((c(),O(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/stock-movements"),onClick:m[11]||(m[11]=p=>a(ee).get(f.route("admin.stock-movement.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"timeline"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[43]||(m[43]=[v("Riwayat Stok",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.product.index")?le((c(),O(oe,{key:2,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/products"),onClick:m[12]||(m[12]=p=>a(ee).get(f.route("admin.product.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"box"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[44]||(m[44]=[v("Produk",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.product-category.index")?le((c(),O(oe,{key:3,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/product-categories"),onClick:m[13]||(m[13]=p=>a(ee).get(f.route("admin.product-category.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"category"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[45]||(m[45]=[v("Kategori Produk",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.cashier-session.index")||f.$can("admin.cashier-terminal.index")?(c(),O(Ut,{key:3,icon:"point_of_sale",label:"Kasir","default-opened":f.$page.url.startsWith("/admin/cashier-terminals")||f.$page.url.startsWith("/admin/cashier-session")},{default:l(()=>[f.$can("admin.cashier-session.index")?le((c(),O(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/cashier-sessions"),onClick:m[14]||(m[14]=p=>a(ee).get(f.route("admin.cashier-session.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"tv_signin"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[46]||(m[46]=[v("Sesi Kasir",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.cashier-terminal.index")?le((c(),O(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/cashier-terminals"),onClick:m[15]||(m[15]=p=>a(ee).get(f.route("admin.cashier-terminal.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"point_of_sale"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[47]||(m[47]=[v("Terminal Kasir",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.customer-wallet-transaction-confirmation.index")||f.$can("admin.customer-wallet-transaction.index")?(c(),O(Ut,{key:4,icon:"wallet",label:"Wallet","default-opened":f.$page.url.startsWith("/admin/customer-wallet-transactions")||f.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:l(()=>[f.$can("admin.customer-wallet-transaction-confirmation.index")?le((c(),O(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:m[16]||(m[16]=p=>a(ee).get(f.route("admin.customer-wallet-transaction-confirmation.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"add_task"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[48]||(m[48]=[v("Konfirmasi Top Up",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.customer-wallet-transaction.index")?le((c(),O(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:m[17]||(m[17]=p=>a(ee).get(f.route("admin.customer-wallet-transaction.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"moving"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[49]||(m[49]=[v("Transaksi",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.finance-transaction.index")||f.$can("admin.finance-account.index")?(c(),O(Ut,{key:5,icon:"finance",label:"Keuangan","default-opened":f.$page.url.startsWith("/admin/finance-accounts")||f.$page.url.startsWith("/admin/finance-transactions")},{default:l(()=>[f.$can("admin.finance-transaction.index")?le((c(),O(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/finance-transactions"),onClick:m[18]||(m[18]=p=>a(ee).get(f.route("admin.finance-transaction.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"moving"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[50]||(m[50]=[v("Transaksi",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.finance-account.index")?le((c(),O(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/finance-accounts"),onClick:m[19]||(m[19]=p=>a(ee).get(f.route("admin.finance-account.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"groups_2"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[51]||(m[51]=[v("Akun Kas",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.operational-cost.index")||f.$can("admin.operational-cost-category.index")?(c(),O(Ut,{key:6,icon:"paid",label:"Operasional","default-opened":f.$page.url.startsWith("/admin/operational-costs")||f.$page.url.startsWith("/admin/operational-cost-categories")},{default:l(()=>[f.$can("admin.operational-cost.index")?le((c(),O(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/operational-costs"),onClick:m[20]||(m[20]=p=>a(ee).get(f.route("admin.operational-cost.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"request_quote"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[52]||(m[52]=[v("Biaya Operasional",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.operational-cost-category.index")?le((c(),O(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/operational-cost-categories"),onClick:m[21]||(m[21]=p=>a(ee).get(f.route("admin.operational-cost-category.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"category"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[53]||(m[53]=[v("Kategori",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(Ut,{icon:"settings",label:"Pengaturan","default-opened":f.$page.url.startsWith("/admin/settings")},{default:l(()=>[f.$can("admin.user.index")?le((c(),O(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/users"),onClick:m[22]||(m[22]=p=>a(ee).get(f.route("admin.user.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"person"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[54]||(m[54]=[v("Pengguna",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.user-role.index")?le((c(),O(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/user-roles"),onClick:m[23]||(m[23]=p=>a(ee).get(f.route("admin.user-role.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"group"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[55]||(m[55]=[v("Role Pengguna",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.pos-settings.edit")?le((c(),O(oe,{key:2,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/pos"),onClick:m[24]||(m[24]=p=>a(ee).get(f.route("admin.pos-settings.edit")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"point_of_sale"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[56]||(m[56]=[v("Point of Sales",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.company-profile.edit")?le((c(),O(oe,{key:3,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/company-profile"),onClick:m[25]||(m[25]=p=>a(ee).get(f.route("admin.company-profile.edit")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"apartment"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[57]||(m[57]=[v("Profil Perusahaan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.user-activity-log.index")?le((c(),O(oe,{key:4,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:m[26]||(m[26]=p=>a(ee).get(f.route("admin.user-activity-log.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"article"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[58]||(m[58]=[v("Log Aktivitas",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0),f.$can("admin.database-settings.index")?le((c(),O(oe,{key:5,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/database"),onClick:m[27]||(m[27]=p=>a(ee).get(f.route("admin.database-settings.index")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"database"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[59]||(m[59]=[v("Database",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]):k("",!0)]),_:1},8,["default-opened"]),le((c(),O(oe,{clickable:"",active:f.$page.url.startsWith("/admin/settings/profile"),onClick:m[28]||(m[28]=p=>a(ee).get(f.route("admin.user-profile.edit")))},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"manage_accounts"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[60]||(m[60]=[v("Profil Saya",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[ue]]),le((c(),O(oe,{clickable:"",style:{color:"inherit"},href:f.route("admin.auth.logout")},{default:l(()=>[e(L,{avatar:""},{default:l(()=>[e(T,{name:"logout"})]),_:1}),e(L,null,{default:l(()=>[e(we,null,{default:l(()=>[...m[61]||(m[61]=[v("Logout",-1)])]),_:1})]),_:1})]),_:1},8,["href"])),[[pe],[ue]]),t("div",pS,"  2025 - "+r(f.$config.APP_NAME+" v"+f.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(is,{class:"bg-grey-1"},{default:l(()=>[e(Te,null,{default:l(()=>[Lt(f.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),Lt(f.$slots,"footer",{},void 0,!0)]),_:3}))}},gS=_t(fS,[["__scopeId","data-v-fc47da40"]]),bS={__name:"GuestLayout",setup(u){return(n,d)=>(c(),O(us,null,{default:l(()=>[Lt(n.$slots,"default")]),_:3}))}};ms({onRegistered(u){console.log("Admin Service Worker registered:",u)}});cs({layouts:{authenticated:gS,guest:bS},pagesGlob:Object.assign({"./pages/About.vue":vs,"./pages/_examples/Autocomplete1.vue":ws,"./pages/auth/Login.vue":Ts,"./pages/cashier-session/Close.vue":Es,"./pages/cashier-session/Detail.vue":Vr,"./pages/cashier-session/Index.vue":Or,"./pages/cashier-session/Open.vue":Er,"./pages/cashier-session/detail/FinanceTransactionTab.vue":wr,"./pages/cashier-session/detail/MainInfoTab.vue":sr,"./pages/cashier-session/detail/SalesOrderTab.vue":gr,"./pages/cashier-terminal/Detail.vue":Gr,"./pages/cashier-terminal/Editor.vue":ai,"./pages/cashier-terminal/Index.vue":ii,"./pages/cashier-terminal/detail/MainInfoTab.vue":Lr,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":Hr,"./pages/customer-wallet-transaction-confirmation/Detail.vue":_i,"./pages/customer-wallet-transaction-confirmation/Index.vue":Si,"./pages/customer-wallet-transaction/Adjustment.vue":Ci,"./pages/customer-wallet-transaction/Detail.vue":Ni,"./pages/customer-wallet-transaction/Editor.vue":Fi,"./pages/customer-wallet-transaction/Index.vue":Gi,"./pages/customer/Detail.vue":Bd,"./pages/customer/Editor.vue":Kd,"./pages/customer/Import.vue":Xd,"./pages/customer/Index.vue":ru,"./pages/customer/detail/MainInfoTab.vue":nd,"./pages/customer/detail/OrderHistoryTab.vue":pd,"./pages/customer/detail/WalletHistoryTab.vue":id,"./pages/dashboard/Index.vue":Cu,"./pages/dashboard/cards/ActualSummaryCard.vue":fu,"./pages/dashboard/cards/ChartCard.vue":_u,"./pages/dashboard/cards/SummaryCard.vue":ju,"./pages/dashboard/cards/TopCard.vue":$u,"./pages/finance-account/Detail.vue":Ju,"./pages/finance-account/Editor.vue":tm,"./pages/finance-account/Index.vue":fm,"./pages/finance-account/detail/HistoryTab.vue":Lu,"./pages/finance-account/detail/MainInfoTab.vue":Mu,"./pages/finance-transaction/Detail.vue":Sm,"./pages/finance-transaction/Editor.vue":Tm,"./pages/finance-transaction/Index.vue":Am,"./pages/operational-cost-category/Editor.vue":Bm,"./pages/operational-cost-category/Index.vue":Wm,"./pages/operational-cost/Detail.vue":nc,"./pages/operational-cost/Editor.vue":mc,"./pages/operational-cost/Index.vue":kc,"./pages/product-category/Editor.vue":xc,"./pages/product-category/Index.vue":Rc,"./pages/product/Detail.vue":ep,"./pages/product/Editor.vue":up,"./pages/product/Import.vue":fp,"./pages/product/Index.vue":qp,"./pages/product/SendPriceList.vue":Up,"./pages/product/SendPriceList2.vue":zp,"./pages/product/detail/MainInfoTab.vue":Lc,"./pages/product/detail/StockHistoryTab.vue":Yc,"./pages/purchase-order-return/Create.vue":Hp,"./pages/purchase-order-return/Detail.vue":Kf,"./pages/purchase-order-return/Editor.vue":jg,"./pages/purchase-order-return/Index.vue":Gg,"./pages/purchase-order-return/detail/MainInfoTab.vue":vf,"./pages/purchase-order-return/detail/PaymentDialog.vue":xf,"./pages/purchase-order-return/detail/RefundTab.vue":Bf,"./pages/purchase-order-return/editor/HelpDialog.vue":og,"./pages/purchase-order-return/editor/ItemEditorDialog.vue":Zf,"./pages/purchase-order-return/editor/ItemsListTable.vue":Jf,"./pages/purchase-order-return/editor/OrderInfoDialog.vue":ig,"./pages/purchase-order-return/editor/PaymentDialog.vue":f1,"./pages/purchase-order-return/editor/SuccessDialog.vue":C1,"./pages/purchase-order/Detail.vue":Cb,"./pages/purchase-order/Editor.vue":Fv,"./pages/purchase-order/Index.vue":ay,"./pages/purchase-order/detail/InvoiceTab.vue":X1,"./pages/purchase-order/detail/PaymentDialog.vue":sb,"./pages/purchase-order/detail/PaymentTab.vue":$b,"./pages/purchase-order/editor/HelpDialog.vue":ev,"./pages/purchase-order/editor/ItemEditorDialog.vue":Xb,"./pages/purchase-order/editor/ItemsListTable.vue":Db,"./pages/purchase-order/editor/OrderInfoDialog.vue":ov,"./pages/purchase-order/editor/PaymentDialog.vue":Qb,"./pages/purchase-order/editor/SuccessDialog.vue":vv,"./pages/sales-order-return/Create.vue":sy,"./pages/sales-order-return/Detail.vue":o_,"./pages/sales-order-return/Editor.vue":K_,"./pages/sales-order-return/Index.vue":sk,"./pages/sales-order-return/detail/MainInfoTab.vue":Py,"./pages/sales-order-return/detail/PaymentDialog.vue":Ay,"./pages/sales-order-return/detail/RefundTab.vue":e_,"./pages/sales-order-return/editor/HelpDialog.vue":g_,"./pages/sales-order-return/editor/ItemEditorDialog.vue":c_,"./pages/sales-order-return/editor/ItemsListTable.vue":d_,"./pages/sales-order-return/editor/OrderInfoDialog.vue":__,"./pages/sales-order-return/editor/PaymentDialog.vue":$k,"./pages/sales-order-return/editor/SuccessDialog.vue":Ak,"./pages/sales-order/Detail.vue":Aw,"./pages/sales-order/Editor.vue":Z0,"./pages/sales-order/Index.vue":b2,"./pages/sales-order/detail/InvoiceTab.vue":iw,"./pages/sales-order/detail/PaymentDialog.vue":bw,"./pages/sales-order/detail/PaymentTab.vue":Dw,"./pages/sales-order/editor/HelpDialog.vue":d0,"./pages/sales-order/editor/ItemEditorDialog.vue":r0,"./pages/sales-order/editor/ItemsListTable.vue":zw,"./pages/sales-order/editor/OrderInfoDialog.vue":p0,"./pages/sales-order/editor/PaymentDialog.vue":o0,"./pages/sales-order/editor/SuccessDialog.vue":V0,"./pages/settings/company-profile/Edit.vue":h2,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":v2,"./pages/settings/database/Index.vue":q2,"./pages/settings/pos/Edit.vue":O2,"./pages/settings/user-activity-log/Detail.vue":yh,"./pages/settings/user-activity-log/Index.vue":Sh,"./pages/settings/user-profile/Edit.vue":Oh,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":Vh,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":qh,"./pages/settings/user-role/Detail.vue":Lh,"./pages/settings/user-role/Editor.vue":Jh,"./pages/settings/user-role/Index.vue":a$,"./pages/settings/user/Detail.vue":f$,"./pages/settings/user/Editor.vue":k$,"./pages/settings/user/Index.vue":q$,"./pages/stock-adjustment/Create.vue":j$,"./pages/stock-adjustment/Detail.vue":Q$,"./pages/stock-adjustment/Editor.vue":ax,"./pages/stock-adjustment/Index.vue":fx,"./pages/stock-movement/Index.vue":_x,"./pages/supplier/Detail.vue":Mx,"./pages/supplier/Editor.vue":Xx,"./pages/supplier/Index.vue":sS,"./pages/supplier/detail/MainInfoTab.vue":Tx,"./pages/supplier/detail/OrderHistoryTab.vue":Ix})});
