import{r as T,a as Z,c as D,o as c,w as l,b as t,d as e,e as h,f as k,Q as ce,t as r,u as a,g as K,h as De,i as na,T as Qe,j as cn,k as be,l as Te,m as Je,n as G,p as rt,q as fe,s as ae,v as b,x as ta,y as P,z as ne,A as U,B as at,F as J,C as We,D as te,E as _t,G as yt,H as ee,I as pn,J as $a,K as Wl,L as Vt,M as X,N as fa,O as he,R as ie,P as qe,S as Ql,U as fn,V as gn,W as Ht,X as qt,Y as xa,Z as Ta,_ as bn,$ as Ne,a0 as vn,a1 as yn,a2 as _n,a3 as Nt,a4 as kn,a5 as wn,a6 as Sa,a7 as Gt,a8 as Va,a9 as Ba,aa as hn,ab as ma,ac as za,ad as $n,ae as Fa,af as xn,ag as Jl,ah as Sn,ai as Vn,aj as qn,ak as Ra,al as Oa,am as Cn,an as At,ao as ge,ap as Re,aq as Me,ar as Be,as as xe,at as Pe,au as W,av as $e,aw as ft,ax as Ke,ay as Ie,az as Xt,aA as Ce,aB as Ae,aC as et,aD as He,aE as it,aF as Ye,aG as Ze,aH as Le,aI as oe,aJ as F,aK as pe,aL as st,aM as Ee,aN as sa,aO as pa,aP as Bt,aQ as zt,aR as Ct,aS as Tt,aT as tt,aU as La,aV as ea,aW as ga,aX as aa,aY as Ft,aZ as Da,a_ as ra,a$ as ia,b0 as la,b1 as lt,b2 as Tn,b3 as Pn,b4 as Gl,b5 as Rn,b6 as On,b7 as Dn,b8 as In,b9 as Ka,ba as Un,bb as En,bc as jn,bd as An,be as Xl,bf as Fe,bg as wt,bh as Nn,bi as Ha,bj as Mn,bk as Bn,bl as zn,bm as Fn,bn as Ln,bo as Kn,bp as Hn,bq as we,br as oa,bs as dt,bt as Yn,bu as Wn,bv as Qn,bw as Jn,bx as Gn,by as Xn,bz as Zn,bA as es,bB as It,bC as vt,bD as Wt,bE as Zl,bF as Zt,bG as ht,bH as eo,bI as to,bJ as ts,bK as bt,bL as ct,bM as pt,bN as $t,bO as ba,bP as Mt,bQ as Ya,bR as as,bS as ls,bT as os,bU as ao,bV as ns,bW as ss,bX as rs,bY as is,bZ as ds,b_ as us,b$ as ms,c0 as cs,c1 as ps,c2 as fs,c3 as gs,c4 as bs,c5 as vs}from"./virtual_pwa-register-B-C8pf70.js";const ys={class:"q-ma-md"},_s={key:0},ks={__name:"Autocomplete1",setup(m){const s=T(null),d=T([]);let o=null;const i=(n,g)=>{if(n.length<2){g(()=>{d.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{De.get(`/web-api/customers?q=${n}`).then(v=>{const f=v.data.data.map(u=>({label:`${u.code} - ${u.name}`,value:u.id,data:u}));g(()=>{d.value=f})}).catch(v=>{console.error("Gagal mengambil data pelanggan:",v),g(()=>{d.value=[]})})})};return(n,g)=>{const v=Z("guest-layout");return c(),D(v,null,{default:l(()=>[t("div",ys,[e(ce,{class:"full-width",modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=f=>s.value=f),"use-input":"",label:"Cari Pelanggan",options:d.value,onFilter:i,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),s.value?(c(),h("div",_s," Saldo: Rp. "+r(a(K)(s.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},ws=Object.freeze(Object.defineProperty({__proto__:null,default:ks},Symbol.toStringTag,{value:"Module"})),hs={style:{"margin-left":"-10px"}},va={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(m,{emit:s}){const d=m,o=s;return(i,n)=>(c(),h("div",hs,[e(na,{class:"full-width q-pl-none","model-value":d.modelValue,disable:d.disable,label:d.label,"onUpdate:modelValue":n[0]||(n[0]=g=>o("update:modelValue",g))},null,8,["model-value","disable","label"])]))}};function Pa(m){return m instanceof File||m instanceof Blob||m instanceof FileList&&m.length>0||m instanceof FormData&&Array.from(m.values()).some(s=>Pa(s))||typeof m=="object"&&m!==null&&Object.values(m).some(s=>Pa(s))}function $s(m,s=null){const d=Qe(m,s);let o=g=>g,i=null;const n={transform:g=>v=>(o=v,g),submit:g=>(v,f,u={})=>{d.wasSuccessful=!1,d.recentlySuccessful=!1,d.clearErrors(),clearTimeout(i),u.onBefore&&u.onBefore(),d.processing=!0,u.onStart&&u.onStart();const p=o(d.data());axios[v](f,p,{headers:{"Content-Type":Pa(p)?"multipart/form-data":"application/json"},onUploadProgress:y=>{d.progress=y,u.onProgress&&u.onProgress(y)}}).then(y=>{d.processing=!1,d.progress=null,d.clearErrors(),d.wasSuccessful=!0,d.recentlySuccessful=!0,i=setTimeout(()=>d.recentlySuccessful=!1,2e3),u.onSuccess&&u.onSuccess(y.data),d.defaults(cn(d.data())),d.isDirty=!1}).catch(y=>{var _;d.processing=!1,d.progress=null,d.clearErrors(),((_=y.response)==null?void 0:_.status)===422&&Object.keys(y.response.data.errors).forEach(q=>{d.setError(q,y.response.data.errors[q][0])}),u.onError&&u.onError(y)}).finally(()=>{d.processing=!1,d.progress=null,u.onFinish&&u.onFinish()})}};return new Proxy(d,{get:(g,v,f)=>Object.keys(n).indexOf(v)<0?g[v]:n[v](f)})}const xs={class:"column"},Ss={class:"row"},Vs={class:"q-my-sm text-grey-7 text-subtitle1 text-bold"},qs={class:"flex justify-center"},Cs={__name:"Login",setup(m){let s=$s({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const d=be();console.log(d.props.data);const o=()=>rt({form:s,url:route("admin.auth.login"),onSuccess:()=>{s.processing=!0,window.location.href=route("admin.dashboard")}}),i=T(!1);return(n,g)=>{const v=Z("i-head"),f=Z("guest-layout");return c(),h(J,null,[e(v,{title:"Login"}),e(f,null,{default:l(()=>[e(Te,{class:"row justify-center items-center"},{default:l(()=>[t("div",xs,[t("div",Ss,[e(Je,{class:"q-gutter-md",onSubmit:G(o,["prevent"])},{default:l(()=>[e(fe,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:l(()=>[e(ae,{class:"text-center"},{default:l(()=>[t("div",Vs,[b(" Login ke "+r(a(d).props.company.name)+" ",1),t("div",qs,[e(ta,{size:"100px",class:"q-my-none"},{default:l(()=>[e(P,{name:"badge",color:"grey"})]),_:1})])]),e(ne,{modelValue:a(s).username,"onUpdate:modelValue":g[0]||(g[0]=u=>a(s).username=u),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!a(s).errors.username,autocomplete:"username","error-message":a(s).errors.username,disable:a(s).processing,rules:[u=>u&&u.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:l(()=>[e(P,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(ne,{modelValue:a(s).password,"onUpdate:modelValue":g[2]||(g[2]=u=>a(s).password=u),type:i.value?"text":"password",label:"Kata Sandi",error:!!a(s).errors.password,autocomplete:"current-password","error-message":a(s).errors.password,"lazy-rules":"",disable:a(s).processing,rules:[u=>u&&u.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:l(()=>[e(U,{dense:"",flat:"",round:"",onClick:g[1]||(g[1]=u=>i.value=!i.value)},{default:l(()=>[e(P,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(va,{class:"q-mt-sm",modelValue:a(s).remember,"onUpdate:modelValue":g[3]||(g[3]=u=>a(s).remember=u),disable:a(s).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(at,null,{default:l(()=>[e(U,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:a(s).processing,loading:a(s).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Ts=Object.freeze(Object.defineProperty({__proto__:null,default:Cs},Symbol.toStringTag,{value:"Module"})),Ps={class:"q-gutter-sm"},Rs={class:"col col-md-6 q-pa-xs"},Os={class:"detail q-mt-md"},Ds={key:0},Is={class:"text-bold"},Wa="Tutup Sesi Kasir",Us={__name:"Close",setup(m){const s=be(),d=Qe({closing_notes:s.props.data.closing_notes,closing_balance:parseFloat(s.props.data.closing_balance)}),o=()=>rt({form:d,url:route("admin.cashier-session.close",{id:s.props.data.id})});return(i,n)=>{const g=Z("i-head"),v=Z("authenticated-layout");return c(),h(J,null,[e(g,{title:Wa}),e(v,null,{title:l(()=>[b(r(Wa))]),"left-button":l(()=>[t("div",Ps,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Rs,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":n[1]||(n[1]=f=>a(d).id=f)},null,512),[[_t,a(d).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[t("table",Os,[t("tbody",null,[t("tr",null,[n[4]||(n[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),n[5]||(n[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.id),1)]),t("tr",null,[n[6]||(n[6]=t("td",null,"Terminal",-1)),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.cashier_terminal.name),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"Kasir",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.user.username)+" - "+r(a(s).props.data.user.name),1)]),t("tr",null,[n[10]||(n[10]=t("td",null,"Saldo Awal",-1)),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.opening_balance)),1)]),a(s).props.data.opening_notes?(c(),h("tr",Ds,[n[12]||(n[12]=t("td",null,"Catatan Buka",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.opening_notes),1)])):k("",!0),t("tr",null,[n[14]||(n[14]=t("td",null,"Total Penjualan",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.total_sales)),1)]),t("tr",null,[n[16]||(n[16]=t("td",null,"Total Pemasukan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.total_income)),1)]),t("tr",null,[n[18]||(n[18]=t("td",null,"Total Pengeluaran",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.total_expense)),1)]),t("tr",null,[n[21]||(n[21]=t("td",null,"Saldo Akhir",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,[t("div",Is,r(a(yt)(a(s).props.data.closing_balance)),1),n[20]||(n[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(ne,{modelValue:a(d).closing_notes,"onUpdate:modelValue":n[2]||(n[2]=f=>a(d).closing_notes=f),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(d).processing,error:!!a(d).errors.closing_notes,"error-message":a(d).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:a(d).processing},null,8,["disable"]),e(U,{label:"Batal",icon:"cancel",disable:a(d).processing,onClick:n[3]||(n[3]=f=>a(ee).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Es=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"}));let js=0;const As=["click","keydown"],Ns={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${js++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Ms(m,s,d,o){const i=pn(Wl,$a);if(i===$a)return console.error("QTab/QRouteTab component needs to be child of QTabs"),$a;const{proxy:n}=Vt(),g=T(null),v=T(null),f=T(null),u=X(()=>m.disable===!0||m.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},m.ripple===!0?{}:m.ripple)),p=X(()=>i.currentModel.value===m.name),y=X(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(p.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(m.icon&&m.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(m.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(m.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),_=X(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(m.contentClass!==void 0?` ${m.contentClass}`:"")),q=X(()=>m.disable===!0||i.hasFocus.value===!0||p.value===!1&&i.hasActiveTab.value===!0?-1:m.tabindex||0);function x(B,O){if(O!==!0&&g.value!==null&&g.value.focus(),m.disable!==!0){i.updateModel({name:m.name}),d("click",B);return}}function w(B){fn(B,[13,32])?x(B,!0):gn(B)!==!0&&B.keyCode>=35&&B.keyCode<=40&&B.altKey!==!0&&B.metaKey!==!0&&i.onKbdNavigate(B.keyCode,n.$el)===!0&&Ht(B),d("keydown",B)}function M(){const B=i.tabProps.value.narrowIndicator,O=[],z=qe("div",{ref:f,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});m.icon!==void 0&&O.push(qe(P,{class:"q-tab__icon",name:m.icon})),m.label!==void 0&&O.push(qe("div",{class:"q-tab__label"},m.label)),m.alert!==!1&&O.push(m.alertIcon!==void 0?qe(P,{class:"q-tab__alert-icon",color:m.alert!==!0?m.alert:void 0,name:m.alertIcon}):qe("div",{class:"q-tab__alert"+(m.alert!==!0?` text-${m.alert}`:"")})),B===!0&&O.push(z);const j=[qe("div",{class:"q-focus-helper",tabindex:-1,ref:g}),qe("div",{class:_.value},Ql(s.default,O))];return B===!1&&j.push(z),j}const Y={name:X(()=>m.name),rootRef:v,tabIndicatorRef:f,routeData:o};fa(()=>{i.unregisterTab(Y)}),he(()=>{i.registerTab(Y)});function C(B,O){const z={ref:v,class:y.value,tabindex:q.value,role:"tab","aria-selected":p.value===!0?"true":"false","aria-disabled":m.disable===!0?"true":void 0,onClick:x,onKeydown:w,...O};return te(qe(B,z,M()),[[ie,u.value]])}return{renderTab:C,$tabs:i}}const ot=qt({name:"QTab",props:Ns,emits:As,setup(m,{slots:s,emit:d}){const{renderTab:o}=Ms(m,s,d);return()=>o("div")}});function Bs(m,s,d){const o=d===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${m?` text-${m}`:""}`}const zs=["left","center","right","justify"],Pt=qt({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:m=>zs.includes(m)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(m,{slots:s,emit:d}){const{proxy:o}=Vt(),{$q:i}=o,{registerTick:n}=xa(),{registerTick:g}=xa(),{registerTick:v}=xa(),{registerTimeout:f,removeTimeout:u}=Ta(),{registerTimeout:p,removeTimeout:y}=Ta(),_=T(null),q=T(null),x=T(m.modelValue),w=T(!1),M=T(!0),Y=T(!1),C=T(!1),B=[],O=T(0),z=T(!1);let j=null,V=null,I;const R=X(()=>({activeClass:m.activeClass,activeColor:m.activeColor,activeBgColor:m.activeBgColor,indicatorClass:Bs(m.indicatorColor,m.switchIndicator,m.vertical),narrowIndicator:m.narrowIndicator,inlineLabel:m.inlineLabel,noCaps:m.noCaps})),$=X(()=>{const ve=O.value,Se=x.value;for(let Ue=0;Ue<ve;Ue++)if(B[Ue].name.value===Se)return!0;return!1}),E=X(()=>`q-tabs__content--align-${w.value===!0?"left":C.value===!0?"justify":m.align}`),N=X(()=>`q-tabs row no-wrap items-center q-tabs--${w.value===!0?"":"not-"}scrollable q-tabs--${m.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${m.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${m.mobileArrows===!0?"":"out"}-arrows`+(m.dense===!0?" q-tabs--dense":"")+(m.shrink===!0?" col-shrink":"")+(m.stretch===!0?" self-stretch":"")),S=X(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+E.value+(m.contentClass!==void 0?` ${m.contentClass}`:"")),A=X(()=>m.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),le=X(()=>m.vertical!==!0&&i.lang.rtl===!0),re=X(()=>bn===!1&&le.value===!0);Ne(le,ye),Ne(()=>m.modelValue,ve=>{me({name:ve,setCurrent:!0,skipEmit:!0})}),Ne(()=>m.outsideArrows,Oe);function me({name:ve,setCurrent:Se,skipEmit:Ue}){x.value!==ve&&(Ue!==!0&&m["onUpdate:modelValue"]!==void 0&&d("update:modelValue",ve),(Se===!0||m["onUpdate:modelValue"]===void 0)&&(ue(x.value,ve),x.value=ve))}function Oe(){n(()=>{Ge({width:_.value.offsetWidth,height:_.value.offsetHeight})})}function Ge(ve){if(A.value===void 0||q.value===null)return;const Se=ve[A.value.container],Ue=Math.min(q.value[A.value.scroll],Array.prototype.reduce.call(q.value.children,(mt,Xe)=>mt+(Xe[A.value.content]||0),0)),ut=Se>0&&Ue>Se;w.value=ut,ut===!0&&g(ye),C.value=Se<parseInt(m.breakpoint,10)}function ue(ve,Se){const Ue=ve!=null&&ve!==""?B.find(mt=>mt.name.value===ve):null,ut=Se!=null&&Se!==""?B.find(mt=>mt.name.value===Se):null;if(ua===!0)ua=!1;else if(Ue&&ut){const mt=Ue.tabIndicatorRef.value,Xe=ut.tabIndicatorRef.value;j!==null&&(clearTimeout(j),j=null),mt.style.transition="none",mt.style.transform="none",Xe.style.transition="none",Xe.style.transform="none";const ze=mt.getBoundingClientRect(),kt=Xe.getBoundingClientRect();Xe.style.transform=m.vertical===!0?`translate3d(0,${ze.top-kt.top}px,0) scale3d(1,${kt.height?ze.height/kt.height:1},1)`:`translate3d(${ze.left-kt.left}px,0,0) scale3d(${kt.width?ze.width/kt.width:1},1,1)`,v(()=>{j=setTimeout(()=>{j=null,Xe.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Xe.style.transform="none"},70)})}ut&&w.value===!0&&L(ut.rootRef.value)}function L(ve){const{left:Se,width:Ue,top:ut,height:mt}=q.value.getBoundingClientRect(),Xe=ve.getBoundingClientRect();let ze=m.vertical===!0?Xe.top-ut:Xe.left-Se;if(ze<0){q.value[m.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ze),ye();return}ze+=m.vertical===!0?Xe.height-mt:Xe.width-Ue,ze>0&&(q.value[m.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ze),ye())}function ye(){const ve=q.value;if(ve===null)return;const Se=ve.getBoundingClientRect(),Ue=m.vertical===!0?ve.scrollTop:Math.abs(ve.scrollLeft);le.value===!0?(M.value=Math.ceil(Ue+Se.width)<ve.scrollWidth-1,Y.value=Ue>0):(M.value=Ue>0,Y.value=m.vertical===!0?Math.ceil(Ue+Se.height)<ve.scrollHeight:Math.ceil(Ue+Se.width)<ve.scrollWidth)}function se(ve){V!==null&&clearInterval(V),V=setInterval(()=>{je(ve)===!0&&de()},5)}function H(){se(re.value===!0?Number.MAX_SAFE_INTEGER:0)}function _e(){se(re.value===!0?0:Number.MAX_SAFE_INTEGER)}function de(){V!==null&&(clearInterval(V),V=null)}function Q(ve,Se){const Ue=Array.prototype.filter.call(q.value.children,kt=>kt===Se||kt.matches&&kt.matches(".q-tab.q-focusable")===!0),ut=Ue.length;if(ut===0)return;if(ve===36)return L(Ue[0]),Ue[0].focus(),!0;if(ve===35)return L(Ue[ut-1]),Ue[ut-1].focus(),!0;const mt=ve===(m.vertical===!0?38:37),Xe=ve===(m.vertical===!0?40:39),ze=mt===!0?-1:Xe===!0?1:void 0;if(ze!==void 0){const kt=le.value===!0?-1:1,Ot=Ue.indexOf(Se)+ze*kt;return Ot>=0&&Ot<ut&&(L(Ue[Ot]),Ue[Ot].focus({preventScroll:!0})),!0}}const Ve=X(()=>re.value===!0?{get:ve=>Math.abs(ve.scrollLeft),set:(ve,Se)=>{ve.scrollLeft=-Se}}:m.vertical===!0?{get:ve=>ve.scrollTop,set:(ve,Se)=>{ve.scrollTop=Se}}:{get:ve=>ve.scrollLeft,set:(ve,Se)=>{ve.scrollLeft=Se}});function je(ve){const Se=q.value,{get:Ue,set:ut}=Ve.value;let mt=!1,Xe=Ue(Se);const ze=ve<Xe?-1:1;return Xe+=ze*5,Xe<0?(mt=!0,Xe=0):(ze===-1&&Xe<=ve||ze===1&&Xe>=ve)&&(mt=!0,Xe=ve),ut(Se,Xe),ye(),mt}function ke(ve,Se){for(const Ue in ve)if(ve[Ue]!==Se[Ue])return!1;return!0}function gt(){let ve=null,Se={matchedLen:0,queryDiff:9999,hrefLen:0};const Ue=B.filter(ze=>ze.routeData!==void 0&&ze.routeData.hasRouterLink.value===!0),{hash:ut,query:mt}=o.$route,Xe=Object.keys(mt).length;for(const ze of Ue){const kt=ze.routeData.exact.value===!0;if(ze.routeData[kt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ot,query:wa,matched:un,href:mn}=ze.routeData.resolvedLink.value,ha=Object.keys(wa).length;if(kt===!0){if(Ot!==ut||ha!==Xe||ke(mt,wa)===!1)continue;ve=ze.name.value;break}if(Ot!==""&&Ot!==ut||ha!==0&&ke(wa,mt)===!1)continue;const jt={matchedLen:un.length,queryDiff:Xe-ha,hrefLen:mn.length-Ot.length};if(jt.matchedLen>Se.matchedLen){ve=ze.name.value,Se=jt;continue}else if(jt.matchedLen!==Se.matchedLen)continue;if(jt.queryDiff<Se.queryDiff)ve=ze.name.value,Se=jt;else if(jt.queryDiff!==Se.queryDiff)continue;jt.hrefLen>Se.hrefLen&&(ve=ze.name.value,Se=jt)}if(ve===null&&B.some(ze=>ze.routeData===void 0&&ze.name.value===x.value)===!0){ua=!1;return}me({name:ve,setCurrent:!0})}function xt(ve){if(u(),z.value!==!0&&_.value!==null&&ve.target&&typeof ve.target.closest=="function"){const Se=ve.target.closest(".q-tab");Se&&_.value.contains(Se)===!0&&(z.value=!0,w.value===!0&&L(Se))}}function Et(){f(()=>{z.value=!1},30)}function Lt(){Aa.avoidRouteWatcher===!1?p(gt):y()}function ja(){if(I===void 0){const ve=Ne(()=>o.$route.fullPath,Lt);I=()=>{ve(),I=void 0}}}function rn(ve){B.push(ve),O.value++,Oe(),ve.routeData===void 0||o.$route===void 0?p(()=>{if(w.value===!0){const Se=x.value,Ue=Se!=null&&Se!==""?B.find(ut=>ut.name.value===Se):null;Ue&&L(Ue.rootRef.value)}}):(ja(),ve.routeData.hasRouterLink.value===!0&&Lt())}function dn(ve){B.splice(B.indexOf(ve),1),O.value--,Oe(),I!==void 0&&ve.routeData!==void 0&&(B.every(Se=>Se.routeData===void 0)===!0&&I(),Lt())}const Aa={currentModel:x,tabProps:R,hasFocus:z,hasActiveTab:$,registerTab:rn,unregisterTab:dn,verifyRouteModel:Lt,updateModel:me,onKbdNavigate:Q,avoidRouteWatcher:!1};kn(Wl,Aa);function Na(){j!==null&&clearTimeout(j),de(),I!==void 0&&I()}let Ma,ua;return fa(Na),vn(()=>{Ma=I!==void 0,Na()}),yn(()=>{Ma===!0&&(ja(),ua=!0,Lt()),Oe()}),()=>qe("div",{ref:_,class:N.value,role:"tablist",onFocusin:xt,onFocusout:Et},[qe(_n,{onResize:Ge}),qe("div",{ref:q,class:S.value,onScroll:ye},Nt(s.default)),qe(P,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(M.value===!0?"":" q-tabs__arrow--faded"),name:m.leftIcon||i.iconSet.tabs[m.vertical===!0?"up":"left"],onMousedownPassive:H,onTouchstartPassive:H,onMouseupPassive:de,onMouseleavePassive:de,onTouchendPassive:de}),qe(P,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(Y.value===!0?"":" q-tabs__arrow--faded"),name:m.rightIcon||i.iconSet.tabs[m.vertical===!0?"down":"right"],onMousedownPassive:_e,onTouchstartPassive:_e,onMouseupPassive:de,onMouseleavePassive:de,onTouchendPassive:de})])}});function Fs(m){const s=[.06,6,50];return typeof m=="string"&&m.length&&m.split(":").forEach((d,o)=>{const i=parseFloat(d);i&&(s[o]=i)}),s}const Ls=wn({name:"touch-swipe",beforeMount(m,{value:s,arg:d,modifiers:o}){if(o.mouse!==!0&&Gt.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",n={handler:s,sensitivity:Fs(d),direction:Ba(o),noop:hn,mouseStart(g){Fa(g,n)&&xn(g)&&(ma(n,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(g,!0))},touchStart(g){if(Fa(g,n)){const v=g.target;ma(n,"temp",[[v,"touchmove","move","notPassiveCapture"],[v,"touchcancel","end","notPassiveCapture"],[v,"touchend","end","notPassiveCapture"]]),n.start(g)}},start(g,v){Gt.is.firefox===!0&&Va(m,!0);const f=za(g);n.event={x:f.left,y:f.top,time:Date.now(),mouse:v===!0,dir:!1}},move(g){if(n.event===void 0)return;if(n.event.dir!==!1){Ht(g);return}const v=Date.now()-n.event.time;if(v===0)return;const f=za(g),u=f.left-n.event.x,p=Math.abs(u),y=f.top-n.event.y,_=Math.abs(y);if(n.event.mouse!==!0){if(p<n.sensitivity[1]&&_<n.sensitivity[1]){n.end(g);return}}else if(window.getSelection().toString()!==""){n.end(g);return}else if(p<n.sensitivity[2]&&_<n.sensitivity[2])return;const q=p/v,x=_/v;n.direction.vertical===!0&&p<_&&p<100&&x>n.sensitivity[0]&&(n.event.dir=y<0?"up":"down"),n.direction.horizontal===!0&&p>_&&_<100&&q>n.sensitivity[0]&&(n.event.dir=u<0?"left":"right"),n.direction.up===!0&&p<_&&y<0&&p<100&&x>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&p<_&&y>0&&p<100&&x>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&p>_&&u<0&&_<100&&q>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&p>_&&u>0&&_<100&&q>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Ht(g),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),$n(),n.styleCleanup=w=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const M=()=>{document.body.classList.remove("no-pointer-events--children")};w===!0?setTimeout(M,50):M()}),n.handler({evt:g,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:v,distance:{x:p,y:_}})):n.end(g)},end(g){n.event!==void 0&&(Sa(n,"temp"),Gt.is.firefox===!0&&Va(m,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),g!==void 0&&n.event.dir!==!1&&Ht(g),n.event=void 0)}};if(m.__qtouchswipe=n,o.mouse===!0){const g=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ma(n,"main",[[m,"mousedown","mouseStart",`passive${g}`]])}Gt.has.touch===!0&&ma(n,"main",[[m,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[m,"touchmove","noop","notPassiveCapture"]])},updated(m,s){const d=m.__qtouchswipe;d!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&d.end(),d.handler=s.value),d.direction=Ba(s.modifiers))},beforeUnmount(m){const s=m.__qtouchswipe;s!==void 0&&(Sa(s,"main"),Sa(s,"temp"),Gt.is.firefox===!0&&Va(m,!1),s.styleCleanup!==void 0&&s.styleCleanup(),delete m.__qtouchswipe)}}),Ks={name:{required:!0},disable:Boolean},Qa={setup(m,{slots:s}){return()=>qe("div",{class:"q-panel scroll",role:"tabpanel"},Nt(s.default))}},Hs={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Ys=["update:modelValue","beforeTransition","transition"];function Ws(){const{props:m,emit:s,proxy:d}=Vt(),{getCache:o}=Vn(),{registerTimeout:i}=Ta();let n,g;const v=T(null),f=T(null);function u(A){const le=m.vertical===!0?"up":"left";I((d.$q.lang.rtl===!0?-1:1)*(A.direction===le?1:-1))}const p=X(()=>[[Ls,u,void 0,{horizontal:m.vertical!==!0,vertical:m.vertical,mouse:!0}]]),y=X(()=>m.transitionPrev||`slide-${m.vertical===!0?"down":"right"}`),_=X(()=>m.transitionNext||`slide-${m.vertical===!0?"up":"left"}`),q=X(()=>`--q-transition-duration: ${m.transitionDuration}ms`),x=X(()=>typeof m.modelValue=="string"||typeof m.modelValue=="number"?m.modelValue:String(m.modelValue)),w=X(()=>({include:m.keepAliveInclude,exclude:m.keepAliveExclude,max:m.keepAliveMax})),M=X(()=>m.keepAliveInclude!==void 0||m.keepAliveExclude!==void 0);Ne(()=>m.modelValue,(A,le)=>{const re=O(A)===!0?z(A):-1;g!==!0&&V(re===-1?0:re<z(le)?-1:1),v.value!==re&&(v.value=re,s("beforeTransition",A,le),i(()=>{s("transition",A,le)},m.transitionDuration))});function Y(){I(1)}function C(){I(-1)}function B(A){s("update:modelValue",A)}function O(A){return A!=null&&A!==""}function z(A){return n.findIndex(le=>le.props.name===A&&le.props.disable!==""&&le.props.disable!==!0)}function j(){return n.filter(A=>A.props.disable!==""&&A.props.disable!==!0)}function V(A){const le=A!==0&&m.animated===!0&&v.value!==-1?"q-transition--"+(A===-1?y.value:_.value):null;f.value!==le&&(f.value=le)}function I(A,le=v.value){let re=le+A;for(;re!==-1&&re<n.length;){const me=n[re];if(me!==void 0&&me.props.disable!==""&&me.props.disable!==!0){V(A),g=!0,s("update:modelValue",me.props.name),setTimeout(()=>{g=!1});return}re+=A}m.infinite===!0&&n.length!==0&&le!==-1&&le!==n.length&&I(A,A===-1?n.length:-1)}function R(){const A=z(m.modelValue);return v.value!==A&&(v.value=A),!0}function $(){const A=O(m.modelValue)===!0&&R()&&n[v.value];return m.keepAlive===!0?[qe(qn,w.value,[qe(M.value===!0?o(x.value,()=>({...Qa,name:x.value})):Qa,{key:x.value,style:q.value},()=>A)])]:[qe("div",{class:"q-panel scroll",style:q.value,key:x.value,role:"tabpanel"},[A])]}function E(){if(n.length!==0)return m.animated===!0?[qe(Jl,{name:f.value},$)]:$()}function N(A){return n=Sn(Nt(A.default,[])).filter(le=>le.props!==null&&le.props.slot===void 0&&O(le.props.name)===!0),n.length}function S(){return n}return Object.assign(d,{next:Y,previous:C,goTo:B}),{panelIndex:v,panelDirectives:p,updatePanelsList:N,updatePanelIndex:R,getPanelContent:E,getEnabledPanels:j,getPanels:S,isValidPanelName:O,keepAliveProps:w,needsUniqueKeepAliveWrapper:M,goToPanelByOffset:I,goToPanel:B,nextPanel:Y,previousPanel:C}}const nt=qt({name:"QTabPanel",props:Ks,setup(m,{slots:s}){return()=>qe("div",{class:"q-tab-panel",role:"tabpanel"},Nt(s.default))}}),Rt=qt({name:"QTabPanels",props:{...Hs,...Ra},emits:Ys,setup(m,{slots:s}){const d=Vt(),o=Oa(m,d.proxy.$q),{updatePanelsList:i,getPanelContent:n,panelDirectives:g}=Ws(),v=X(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(s),Cn("div",{class:v.value},n(),"pan",m.swipeable,()=>g.value))}}),Qs={class:"detail"},Js={key:0},Gs={key:1},Xs={key:0},Zs={key:0},er={colspan:"100%"},tr={class:"q-my-md"},ar={key:4},lr={colspan:"100%"},or={key:5},nr={colspan:"100%"},lo={__name:"MainInfoTab",setup(m){const s=be();return(d,o)=>(c(),h("table",Qs,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.user.username)+" - "+r(a(s).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.opening_balance)),1)]),a(s).props.data.opening_notes?(c(),h("tr",Js,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.total_expense)),1)]),a(s).props.data.is_closed?k("",!0):(c(),h("tr",Gs,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.actual_balance)),1)])),a(s).props.data.is_closed?(c(),h(J,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.closing_balance)),1)]),a(s).props.data.closing_notes?(c(),h("tr",Xs,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),d.$can("admin.cashier-session.close")?(c(),h(J,{key:3},[a(s).props.data.is_closed?k("",!0):(c(),h("tr",Zs,[t("td",er,[t("div",tr,[e(U,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=i=>d.$inertia.get(d.route("admin.cashier-session.close",{id:a(s).props.data.id})))},{default:l(()=>o[26]||(o[26]=[b(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(s).props.data.created_at?(c(),h("tr",ar,[t("td",lr," Dibuat "+r(a(At)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name)+" ("+r(a(ge)(a(s).props.data.created_at))+") ",1)])):k("",!0),a(s).props.data.updated_at?(c(),h("tr",or,[t("td",nr," Diperbarui "+r(a(At)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(ge)(a(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},sr=Object.freeze(Object.defineProperty({__proto__:null,default:lo},Symbol.toStringTag,{value:"Module"})),rr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ir={class:"text-bold"},dr={key:0},ur={class:"text-bold"},mr={key:1},cr={key:0},pr={key:0},fr={key:1},oo={__name:"SalesOrderTab",props:{data:Object},setup(m){const s=m,d=T([]),o=T(!0),i=Re({...Me(),cashier_session_id:s.data.id,status:["closed","canceled"]}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{v()});const v=(p=null)=>Be({pagination:n,filter:i,props:p,rows:d,url:route("admin.sales-order.data"),loading:o}),f=xe(),u=X(()=>f.screen.gt.sm?g:g.filter(p=>p.name==="id"));return(p,y)=>(c(),D(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:u.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:x})=>[t("div",rr,[t("span",null,r(q)+" "+r(x?" with term "+x:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:G(q=>a(ee).get(p.route("admin.sales-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",ir,[e(P,{class:"inline-icon",name:"tag"}),b(" "+r(_.row.code),1)]),t("div",null,[e(P,{class:"inline-icon",name:"calendar_today"}),b(" "+r(a(ge)(_.row.datetime)),1)]),a(f).screen.lt.md?(c(),h(J,{key:0},[_.row.customer?(c(),h("div",dr,[e(P,{class:"inline-icon",name:"person"}),b(" "+r(_.row.customer_code)+" "+r(_.row.customer.name),1)])):k("",!0),t("div",ur,[e(P,{name:"money",class:"inline-icon"}),b(" Rp. "+r(a(K)(_.row.grand_total)),1)]),_.row.notes?(c(),h("div",mr,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(ft,{color:_.row.status==="closed"?"green":"red"},{default:l(()=>[b(r(p.$CONSTANTS.SALES_ORDER_STATUSES[_.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"customer",props:_},{default:l(()=>[_.row.customer?(c(),h("div",cr,[t("div",null,[e(P,{name:"person",class:"inline-icon"}),b(" "+r(_.row.customer_code)+" - "+r(_.row.customer_name),1)]),_.row.customer_phone?(c(),h("div",pr,[e(P,{name:"phone",class:"inline-icon"}),b(" "+r(_.row.customer_phone),1)])):k("",!0),_.row.customer_address?(c(),h("div",fr,[e(P,{name:"home_pin",class:"inline-icon"}),b(" "+r(_.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[t("div",null,r(a(K)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},gr=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),br={class:"full-width row flex-center text-grey-8 q-gutter-sm"},vr={class:"text-bold"},yr={class:"text-bold"},_r={key:0},kr={class:"q-mt-sm"},no={__name:"FinanceTransactionTab",props:{data:Object},setup(m){var p;const s=m;console.log(s.data);const d=T([]),o=T(!0),i=Re({...Me(),account_id:(p=s.data.cashier_terminal)==null?void 0:p.finance_account_id,from_datetime:Xt(s.data.opened_at),to_datetime:s.data.closed_at?Xt(s.data.closed_at):null}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{v()});const v=(y=null)=>Be({pagination:n,filter:i,props:y,rows:d,url:route("admin.finance-transaction.data"),loading:o}),f=xe(),u=X(()=>f.screen.gt.sm?g:g.filter(y=>y.name==="id"));return(y,_)=>(c(),D(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=q=>n.value=q),filter:i.search,loading:o.value,columns:u.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:q,message:x,filter:w})=>[t("div",br,[t("span",null,r(x)+" "+r(w?" with term "+w:""),1)])]),body:l(q=>[e(Pe,{props:q},{default:l(()=>[e(W,{key:"id",props:q},{default:l(()=>[t("div",vr,[e(P,{class:"inline-icon",name:"tag"}),b(" "+r(q.row.code),1)]),t("div",null,[e(P,{class:"inline-icon",name:"calendar_today"}),b(" "+r(a(ge)(q.row.datetime)),1)]),a(f).screen.lt.md?(c(),h(J,{key:0},[t("div",yr,[e(P,{name:"money",class:"inline-icon"}),b(" Rp. "+r(a(K)(q.row.amount)),1)]),q.row.notes?(c(),h("div",_r,[e($e,{text:q.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",kr,[e(ft,{color:q.row.amount>=0?"green":"red"},{default:l(()=>[b(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[q.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"amount",props:q},{default:l(()=>[t("span",{class:Ce(q.row.amount<0?"text-red":"text-green")},r(a(K)(q.row.amount)),3)]),_:2},1032,["props"]),e(W,{key:"notes",props:q,class:"wrap-column"},{default:l(()=>[e($e,{text:q.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},wr=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),hr={class:"q-gutter-sm"},$r={class:"col col-lg-6 q-pa-xs"},xr={class:"row"},Ja="Rincian Sesi Kasir",Sr={__name:"Detail",setup(m){const s=be(),d=X(()=>s.props.data),o=T("main");return Ne(()=>s.props.tab,i=>{i&&(o.value=i)},{immediate:!0}),(i,n)=>{const g=Z("i-head"),v=Z("authenticated-layout");return c(),h(J,null,[e(g,{title:Ja}),e(v,null,{title:l(()=>[b(r(Ja))]),"left-button":l(()=>[t("div",hr,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",$r,[t("div",xr,[e(fe,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:l(()=>[e(Pt,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=f=>o.value=f),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Ringkasan"}),e(ot,{name:"sales",label:"Transaksi Penjualan"}),e(ot,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Ae),e(Rt,{modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=f=>o.value=f),animated:"",class:"q-pa-none"},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(lo,{data:d.value},null,8,["data"])]),_:1}),e(nt,{name:"sales",class:"q-pa-xs"},{default:l(()=>[e(oo,{data:d.value},null,8,["data"])]),_:1}),e(nt,{name:"finance",class:"q-pa-xs"},{default:l(()=>[e(no,{data:d.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Vr=Object.freeze(Object.defineProperty({__proto__:null,default:Sr},Symbol.toStringTag,{value:"Module"}));function Ut(){return{protectClick:s=>(d,o)=>{const i=window.getSelection();if(i&&!i.isCollapsed){o.stopPropagation();return}s(d,o)}}}const qr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Cr={class:"q-pa-xs"},Tr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Pr={class:"flex justify-end"},Ga="Sesi Kasir",Rr={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Re({search:"",status:"all",...Me()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),p=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];he(()=>{q()});const _=B=>st({message:`Hapus Sesi: ${B.cashier_terminal.name} - ${B.user.username}?`,url:route("admin.cashier-session.delete",B.id),fetchItemsCallback:q,loading:i}),q=(B=null)=>{Be({pagination:u,filter:f,props:B,rows:o,url:route("admin.cashier-session.data"),loading:i,tableRef:n})},x=()=>q(),w=B=>ee.get(route("admin.cashier-session.detail",{id:B.id})),{protectClick:M}=Ut(),Y=M(w),C=X(()=>s.screen.gt.sm?p:p.filter(B=>B.name==="id"||B.name==="action"));return(B,O)=>{const z=Z("i-head"),j=Z("authenticated-layout");return c(),h(J,null,[e(z,{title:Ga}),e(j,null,He({title:l(()=>[b(r(Ga))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=V=>d.value=!d.value)},null,8,["icon"]),B.$can("admin.cashier-session.open")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=V=>a(ee).get(B.route("admin.cashier-session.open")))})):k("",!0)]),default:l(()=>[t("div",Cr,[e(Ie,{class:"full-height-table",style:Ye({height:a(v)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":O[5]||(O[5]=V=>u.value=V),filter:f.search,loading:i.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:q,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:I,filter:R})=>[t("div",Tr,[t("span",null,r(I)+" "+r(R?" with term "+R:""),1)])]),body:l(V=>[e(Pe,{props:V,class:Ce(["cursor-pointer",V.row.is_closed?"":"bg-yellow-3"]),onClick:G(I=>a(Y)(V.row,I),["stop"])},{default:l(()=>[e(W,{key:"id",props:V,class:"wrap-column"},{default:l(()=>[t("div",null,[e(P,{class:"inline-icon",name:"tag"}),b(" SessionID: "+r(V.row.id),1)]),t("div",null,[e(P,{class:"inline-icon",name:"point_of_sale"}),b(" "+r(V.row.cashier_terminal.name),1)]),t("div",null,[e(P,{class:"inline-icon",name:"person"}),b(" "+r(V.row.user.username)+" - "+r(V.row.user.name),1)])]),_:2},1032,["props"]),e(W,{key:"opening_info",props:V},{default:l(()=>[t("div",null,[e(P,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(V.row.opened_at?a(ge)(V.row.opened_at):"-"),1)]),t("div",null,[e(P,{class:"inline-icon",name:"money"}),b(" "+r(a(yt)(V.row.opening_balance)),1)]),V.row.opening_notes?(c(),D($e,{key:0,text:V.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"closing_info",props:V},{default:l(()=>[t("div",null,[e(P,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(V.row.closed_at?a(ge)(V.row.closed_at):"-"),1)]),t("div",null,[e(P,{class:"inline-icon",name:"money"}),b(" "+r(a(yt)(V.row.closing_balance)),1)]),V.row.closing_notes?(c(),D($e,{key:0,text:V.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"action",props:V},{default:l(()=>[t("div",Pr,[B.$can("admin.cashier-session.close")||B.$can("admin.cashier-session.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[4]||(O[4]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[B.$can("admin.cashier-session.close")?te((c(),D(oe,{key:0,disable:V.row.is_closed,clickable:"",onClick:G(I=>a(ee).get(B.route("admin.cashier-session.close",V.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"logout"})]),_:1}),e(F,null,{default:l(()=>O[6]||(O[6]=[b("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[ie],[pe]]):k("",!0),B.$can("admin.cashier-session.delete")&&!V.row.is_closed?te((c(),D(oe,{key:1,onClick:G(I=>_(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>O[7]||(O[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",qr,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:f.status,"onUpdate:modelValue":[O[2]||(O[2]=V=>f.status=V),x],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":O[3]||(O[3]=V=>f.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Or=Object.freeze(Object.defineProperty({__proto__:null,default:Rr},Symbol.toStringTag,{value:"Module"})),Dr={class:"q-gutter-sm"},Ir={class:"col col-md-6 q-pa-xs"},Xa="Buka Sesi Kasir",Ur={__name:"Open",setup(m){const s=be(),d=Qe({cashier_terminal_id:s.props.data.cashier_terminal_id,opening_balance:parseFloat(s.props.data.opening_balance),opening_notes:s.props.data.opening_notes}),o=[...s.props.cashier_terminals.map(n=>({value:n.id,label:n.name,balance:parseFloat(n.finance_account.balance)}))],i=()=>rt({form:d,url:route("admin.cashier-session.open")});return Ne(()=>d.cashier_terminal_id,n=>{if(n){const g=o.find(v=>v.value===n);g&&(d.opening_balance=g.balance)}else d.opening_balance=0}),(n,g)=>{const v=Z("i-head"),f=Z("authenticated-layout");return c(),h(J,null,[e(v,{title:Xa}),e(f,null,{title:l(()=>[b(r(Xa))]),"left-button":l(()=>[t("div",Dr,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=u=>n.$inertia.get(n.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ir,[e(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=u=>a(d).id=u)},null,512),[[_t,a(d).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(ce,{class:"custom-select",modelValue:a(d).cashier_terminal_id,"onUpdate:modelValue":g[2]||(g[2]=u=>a(d).cashier_terminal_id=u),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:a(d).errors.cashier_terminal_id,error:!!a(d).errors.cashier_terminal_id,disable:a(d).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Ee,{modelValue:a(d).opening_balance,"onUpdate:modelValue":g[3]||(g[3]=u=>a(d).opening_balance=u),label:"Saldo Buka Sesi",lazyRules:"",disable:a(d).processing,error:!!a(d).errors.opening_balance,errorMessage:a(d).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),g[6]||(g[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(ne,{modelValue:a(d).opening_notes,"onUpdate:modelValue":g[4]||(g[4]=u=>a(d).opening_notes=u),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(d).processing,error:!!a(d).errors.opening_notes,"error-message":a(d).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:a(d).processing},null,8,["disable"]),e(U,{label:"Batal",icon:"cancel",disable:a(d).processing,onClick:g[5]||(g[5]=u=>a(ee).get(n.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Er=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"})),jr={class:"detail"},Ar={colspan:"3"},Nr={class:"text-bold text-grey-8"},Mr={key:0},Br={colspan:"100%"},zr={key:1},Fr={colspan:"100%"},so={__name:"MainInfoTab",setup(m){const s=be();return(d,o)=>(c(),h("table",jr,[t("tbody",null,[t("tr",null,[t("td",Ar,[t("div",Nr,[o[1]||(o[1]=b(" Info Terminal Kasir ")),e(U,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=i=>d.$inertia.get(d.route("admin.cashier-terminal.edit",{id:a(s).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(yt)(a(s).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(s).props.data.created_at?(c(),h("tr",Mr,[t("td",Br," Dibuat "+r(a(At)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name)+" ("+r(a(ge)(a(s).props.data.created_at))+") ",1)])):k("",!0),a(s).props.data.updated_at?(c(),h("tr",zr,[t("td",Fr," Diperbarui "+r(a(At)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(ge)(a(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},Lr=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"})),Kr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ro={__name:"SessionHistoryTab",setup(m){const s=be(),d=T([]),o=T(!0),i=Re({cashier_terminal_id:s.props.data.id,...Me()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];he(()=>{v()});const v=(p=null)=>Be({pagination:n,filter:i,props:p,rows:d,url:route("admin.cashier-session.data"),loading:o}),f=xe(),u=X(()=>f.screen.gt.sm?g:g.filter(p=>p.name==="id"));return(p,y)=>(c(),D(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:u.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:x})=>[t("div",Kr,[t("span",null,r(q)+" "+r(x?" with term "+x:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:G(q=>a(ee).get(p.route("admin.customer-wallet-transaction.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_,class:"wrap-column"},{default:l(()=>[t("div",null,[e(P,{class:"inline-icon",name:"tag"}),b(" Session ID: "+r(_.row.id),1)]),t("div",null,[e(P,{class:"inline-icon",name:"point_of_sale"}),b(" "+r(_.row.cashier_terminal.name),1)]),t("div",null,[e(P,{class:"inline-icon",name:"person"}),b(" "+r(_.row.user.username)+" - "+r(_.row.user.name),1)])]),_:2},1032,["props"]),e(W,{key:"opening_info",props:_},{default:l(()=>[t("div",null,[e(P,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(_.row.opened_at?a(ge)(_.row.opened_at):"-"),1)]),t("div",null,[e(P,{class:"inline-icon",name:"money"}),b(" "+r(a(yt)(_.row.opening_balance)),1)]),_.row.opening_notes?(c(),D($e,{key:0,text:_.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"closing_info",props:_},{default:l(()=>[t("div",null,[e(P,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(_.row.closed_at?a(ge)(_.row.closed_at):"-"),1)]),t("div",null,[e(P,{class:"inline-icon",name:"money"}),b(" "+r(a(yt)(_.row.closing_balance)),1)]),_.row.closing_notes?(c(),D($e,{key:0,text:_.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Hr=Object.freeze(Object.defineProperty({__proto__:null,default:ro},Symbol.toStringTag,{value:"Module"})),Yr={class:"q-gutter-sm"},Wr={class:"col col-lg-6 q-pa-xs"},Qr={class:"row"},Za="Rincian Terminal Kasir",Jr={__name:"Detail",setup(m){const s=T("main");return(d,o)=>{const i=Z("i-head"),n=Z("authenticated-layout");return c(),h(J,null,[e(i,{title:Za}),e(n,null,{title:l(()=>[b(r(Za))]),"left-button":l(()=>[t("div",Yr,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=g=>d.$inertia.get(d.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Wr,[t("div",Qr,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Pt,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=g=>s.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Info Utama"}),e(ot,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=g=>s.value=g),animated:""},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(so)]),_:1}),e(nt,{name:"session-history",class:"q-pa-xs"},{default:l(()=>[e(ro)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Gr=Object.freeze(Object.defineProperty({__proto__:null,default:Jr},Symbol.toStringTag,{value:"Module"})),Xr={class:"q-gutter-sm"},Zr={class:"col col-md-6 q-pa-xs"},ei={key:0,class:"q-my-xs text-grey-8"},ti={__name:"Editor",setup(m){const s=be(),d=(s.props.data.id?"Edit":"Tambah")+" Terminal",o=Qe({id:s.props.data.id,name:s.props.data.name,finance_account_id:s.props.data.finance_account_id??"new",location:s.props.data.location,active:!!s.props.data.active,notes:s.props.data.notes}),i=[{value:"new",label:"Buat Baru (Otomatis)"},...s.props.finance_accounts.map(g=>({value:g.id,label:g.name}))],n=()=>rt({form:o,url:route("admin.cashier-terminal.save")});return(g,v)=>{const f=Z("i-head"),u=Z("authenticated-layout");return c(),h(J,null,[e(f,{title:d}),e(u,null,{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",Xr,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=p=>g.$inertia.get(g.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Zr,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=p=>a(o).id=p)},null,512),[[_t,a(o).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(ne,{modelValue:a(o).name,"onUpdate:modelValue":v[2]||(v[2]=p=>a(o).name=p),modelModifiers:{trim:!0},label:"Nama",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[p=>p&&p.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{class:"custom-select",modelValue:a(o).finance_account_id,"onUpdate:modelValue":v[3]||(v[3]=p=>a(o).finance_account_id=p),label:"Akun Kas",options:i,"map-options":"","emit-value":"",errorMessage:a(o).errors.finance_account_id,error:!!a(o).errors.finance_account_id,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),a(o).finance_account_id==="new"?(c(),h("div",ei,[v[8]||(v[8]=b(" Akun keuangan akan dibuat ")),a(o).name?(c(),h(J,{key:0},[b(" dengan nama Kas "+r(a(o).name),1)],64)):k("",!0)])):k("",!0),e(ne,{modelValue:a(o).location,"onUpdate:modelValue":v[4]||(v[4]=p=>a(o).location=p),modelModifiers:{trim:!0},label:"Lokasi",error:!!a(o).errors.location,disable:a(o).processing,"error-message":a(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(o).notes,"onUpdate:modelValue":v[5]||(v[5]=p=>a(o).notes=p),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(va,{modelValue:a(o).active,"onUpdate:modelValue":v[6]||(v[6]=p=>a(o).active=p),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(U,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:v[7]||(v[7]=p=>a(ee).get(g.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ai=Object.freeze(Object.defineProperty({__proto__:null,default:ti},Symbol.toStringTag,{value:"Module"})),li={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},oi={class:"q-pa-xs"},ni={class:"full-width row flex-center text-grey-8 q-gutter-sm"},si={class:"flex justify-end"},el="Terminal Kasir",ri={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Re({search:"",status:"active",...Me()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"name",label:s.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{q()});const _=B=>st({message:`Hapus Terminal Kasir ${B.name}?`,url:route("admin.cashier-terminal.delete",B.id),fetchItemsCallback:q,loading:i}),q=(B=null)=>{Be({pagination:u,filter:f,props:B,rows:o,url:route("admin.cashier-terminal.data"),loading:i,tableRef:n})},x=()=>q(),w=B=>ee.get(route("admin.cashier-terminal.detail",{id:B.id})),{protectClick:M}=Ut(),Y=M(w),C=X(()=>s.screen.gt.sm?p:p.filter(B=>B.name==="name"||B.name==="finance_account_id"||B.name==="action"));return(B,O)=>{const z=Z("i-head"),j=Z("authenticated-layout");return c(),h(J,null,[e(z,{title:el}),e(j,null,He({title:l(()=>[b(r(el))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=V=>d.value=!d.value)},null,8,["icon"]),B.$can("admin.cashier-terminal.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=V=>a(ee).get(B.route("admin.cashier-terminal.add")))})):k("",!0)]),default:l(()=>[t("div",oi,[e(Ie,{class:"full-height-table",style:Ye({height:a(v)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":O[5]||(O[5]=V=>u.value=V),filter:f.search,loading:i.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:q,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:I,filter:R})=>[t("div",ni,[t("span",null,r(I)+" "+r(R?" with term "+R:""),1)])]),body:l(V=>[e(Pe,{props:V,class:Ce([V.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(I=>a(Y)(V.row,I),["stop"])},{default:l(()=>[e(W,{key:"name",props:V,class:"wrap-column"},{default:l(()=>[t("div",null,[e(P,{name:"wallet"}),b(" "+r(V.row.name),1)]),t("div",null,[e(P,{name:"home_pin"}),b(" "+r(V.row.location),1)]),a(s).screen.lt.md?(c(),D($e,{key:0,text:V.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:V},{default:l(()=>[t("div",null,[e(P,{name:"wallet"}),b(" "+r(V.row.finance_account.name),1)]),t("div",null,[e(P,{name:"money"}),b(" "+r(a(yt)(V.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(W,{key:"notes",props:V},{default:l(()=>[e($e,{text:V.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:V},{default:l(()=>[t("div",si,[B.$can("admin.cashier-terminal.edit")||B.$can("admin.cashier-terminal.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[4]||(O[4]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[B.$can("admin.cashier-terminal.edit")?te((c(),D(oe,{key:0,clickable:"",onClick:G(I=>a(ee).get(B.route("admin.cashier-terminal.edit",V.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>O[6]||(O[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),B.$can("admin.cashier-terminal.delete")?te((c(),D(oe,{key:1,onClick:G(I=>_(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>O[7]||(O[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",li,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:f.status,"onUpdate:modelValue":[O[2]||(O[2]=V=>f.status=V),x],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":O[3]||(O[3]=V=>f.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ii=Object.freeze(Object.defineProperty({__proto__:null,default:ri},Symbol.toStringTag,{value:"Module"})),di={class:"q-gutter-sm"},ui={class:"col col-md-6 q-pa-xs"},mi={class:"row"},ci={class:"detail"},pi={key:0},fi={key:1},gi={key:0},bi={key:1},vi={colspan:"3",class:"bg-white"},tl="Rincian Konfirmasi Top Up",yi={__name:"Detail",setup(m){const s=be(),d=()=>pa({message:`Setujui konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"accept"},onSuccess:()=>{ee.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}}),o=()=>pa({message:`Tolak konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"reject"},onSuccess:()=>{ee.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}});return(i,n)=>{const g=Z("i-head"),v=Z("i-link"),f=Z("my-link"),u=Z("authenticated-layout");return c(),h(J,null,[e(g,{title:tl}),e(u,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",di,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":l(()=>[a(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:reject")?(c(),D(U,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:n[1]||(n[1]=p=>o()),class:"q-mr-sm"})):k("",!0),a(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:accept")?(c(),D(U,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:n[2]||(n[2]=p=>d())})):k("",!0)]),title:l(()=>[t("span",{class:"text-subtitle2"},r(tl))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",ui,[t("div",mi,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[n[24]||(n[24]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",ci,[t("tbody",null,[t("tr",null,[n[3]||(n[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),n[4]||(n[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Waktu",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.datetime)),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Pelanggan",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(P,{name:"person",class:"inline-icon"}),e(v,{href:i.route("admin.customer.detail",{id:a(s).props.data.customer_id})},{default:l(()=>[b(r(a(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(P,{name:"person",class:"inline-icon"}),b(" "+r(a(s).props.data.customer.name),1)]),a(s).props.data.customer.phone?(c(),h("div",pi,[e(P,{name:"phone",class:"inline-icon"}),b(" "+r(a(s).props.data.customer.phone),1)])):k("",!0),a(s).props.data.customer.address?(c(),h("div",fi,[e(P,{name:"home_pin",class:"inline-icon"}),b(" "+r(a(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[n[11]||(n[11]=t("td",null,"Akun Tujuan",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[e(f,{href:i.route("admin.finance-account.detail",{id:a(s).props.data.finance_account.id})},{default:l(()=>[b(r(a(s).props.data.finance_account.name),1)]),_:1},8,["href"]),n[10]||(n[10]=t("br",null,null,-1)),a(s).props.data.finance_account.type==="bank"?(c(),h(J,{key:0},[b(" Rek "+r(a(s).props.data.finance_account.bank)+" an "+r(a(s).props.data.finance_account.holder)+" ",1),n[9]||(n[9]=t("br",null,null,-1)),b(" "+r(a(s).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[n[13]||(n[13]=t("td",null,"Jumlah",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(s).props.data.amount)),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"Status",-1)),n[16]||(n[16]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[a(s).props.data.status]),1)]),t("tr",null,[n[17]||(n[17]=t("td",null,"Catatan",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(c(),h("tr",gi,[n[19]||(n[19]=t("td",null,"Dibuat",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(c(),h("tr",bi,[n[21]||(n[21]=t("td",null,"Diperbarui",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(c(),h(J,{key:2},[n[23]||(n[23]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",vi,[e(sa,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:Ye([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},_i=Object.freeze(Object.defineProperty({__proto__:null,default:yi},Symbol.toStringTag,{value:"Module"})),ki={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},wi={class:"q-pa-xs"},hi={key:0},$i={class:"flex justify-end no-wrap"},al="Konfirmasi Top Up Wallet",xi={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=T(null),u=T(!1),p=Bt(),y=zt(),_=[{label:"Semua Tahun",value:"all"},...Ct(p-2,p).reverse()],q=[{value:"all",label:"Semua Bulan"},...Tt()],x=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],w=Re({search:"",year:p,month:y,status:"all",...Me()}),M=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",field:"action",align:"center"}];he(()=>{C()});const C=(R=null)=>{Be({pagination:M,filter:w,props:R,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:i,tableRef:n})},B=()=>{C()},O=X(()=>s.screen.gt.sm?Y:Y.filter(R=>["code","action"].includes(R.name)));Ne(()=>w.year,R=>{R===null&&(w.month=null)});const z=R=>pa({message:`Setujui konfirmasi transaksi #${R.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:C,loading:i,data:{id:R.id,action:"accept"}}),j=R=>pa({message:`Tolak konfirmasi transaksi #${R.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:C,loading:i,data:{id:R.id,action:"reject"}}),V=R=>st({message:`Hapus konfirmasi transaksi ${R.code}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",R.id),fetchItemsCallback:C,loading:i}),I=R=>{f.value=R,u.value=!0};return(R,$)=>{const E=Z("i-head"),N=Z("authenticated-layout");return c(),h(J,null,[e(E,{title:al}),e(N,null,He({title:l(()=>[b(r(al))]),"right-button":l(()=>[e(U,{class:"q-ml-sm",icon:d.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:$[0]||($[0]=S=>d.value=!d.value)},null,8,["icon"])]),default:l(()=>[t("div",wi,[e(Ie,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Ye({height:a(v)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:M.value,"onUpdate:pagination":$[6]||($[6]=S=>M.value=S),filter:w.search,loading:i.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:C,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:G(A=>a(ee).get(R.route("admin.customer-wallet-transaction-confirmation.detail",{id:S.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:S,class:"wrap-column"},{default:l(()=>[t("div",null,[e(P,{class:"inline-icon",name:"tag"}),b(" "+r(S.row.code),1)]),a(s).screen.gt.sm?k("",!0):(c(),h("div",hi,[e(P,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(a(ge)(S.row.datetime)),1)])),a(s).screen.gt.sm?k("",!0):(c(),h(J,{key:1},[e($e,{icon:"account_balance",text:S.row.finance_account.name},null,8,["text"]),t("div",null,[e(P,{name:"person",class:"inline-icon"}),b(" "+r(S.row.customer.code)+" - "+r(S.row.customer.name),1)]),t("div",null,[e(P,{name:"money",class:"inline-icon"}),b(" Rp. "+r(a(K)(S.row.amount)),1)]),S.row.notes?(c(),D($e,{key:0,icon:"notes",text:S.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(La,{status:S.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(W,{key:"datetime",props:S,class:"wrap-column"},{default:l(()=>[b(r(a(ge)(S.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"customer_id",props:S},{default:l(()=>[e($e,{text:S.row.customer.code+" - "+S.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:S},{default:l(()=>[b(r(S.row.finance_account.name),1),$[8]||($[8]=t("br",null,null,-1)),b(" "+r(S.row.finance_account.bank)+" "+r(S.row.finance_account.number)+" an. "+r(S.row.finance_account.holder),1)]),_:2},1032,["props"]),e(W,{key:"amount",props:S,style:{"text-align":"right"}},{default:l(()=>[b(r(a(K)(S.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"status",props:S,class:"text-center"},{default:l(()=>[e(La,{status:S.row.status},null,8,["status"])]),_:2},1032,["props"]),e(W,{key:"notes",props:S,class:"word-wrap"},{default:l(()=>[e($e,{icon:"notes",text:S.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:S,class:"text-center"},{default:l(()=>[t("div",$i,[e(U,{icon:"image",color:"primary",dense:"",flat:"",disable:S.row.image_path===null||S.row.image_path==="",onClick:G(A=>I(S.row.image_path),["stop"])},{default:l(()=>[S.row.image_path!=null?(c(),D(ea,{key:0},{default:l(()=>$[9]||($[9]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),R.$can("admin.customer-wallet-transaction-confirmation:accept")||R.$can("admin.customer-wallet-transaction-confirmation:deny")||R.$can("admin.customer-wallet-transaction-confirmation.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[R.$can("admin.customer-wallet-transaction-confirmation:accept")?te((c(),D(oe,{key:0,onClick:G(A=>z(S.row),["stop"]),clickable:"",disable:S.row.status!=="pending"},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"check"})]),_:1}),e(F,null,{default:l(()=>$[10]||($[10]=[b("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[ie],[pe]]):k("",!0),R.$can("admin.customer-wallet-transaction-confirmation:deny")?te((c(),D(oe,{key:1,onClick:G(A=>j(S.row),["stop"]),clickable:"",disable:S.row.status!=="pending"},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"cancel"})]),_:1}),e(F,null,{default:l(()=>$[11]||($[11]=[b("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[ie],[pe]]):k("",!0),e(Ae),R.$can("admin.customer-wallet-transaction-confirmation.delete")?te((c(),D(oe,{key:2,onClick:G(A=>V(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>$[12]||($[12]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(ga,{modelValue:u.value,"onUpdate:modelValue":$[7]||($[7]=S=>u.value=S),imageUrl:`/${f.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",ki,[e(ce,{modelValue:w.year,"onUpdate:modelValue":[$[1]||($[1]=S=>w.year=S),B],options:_,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!=="all"?(c(),D(ce,{key:0,modelValue:w.month,"onUpdate:modelValue":[$[2]||($[2]=S=>w.month=S),B],options:q,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:w.status,"onUpdate:modelValue":[$[3]||($[3]=S=>w.status=S),B],options:x,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":$[4]||($[4]=S=>w.search=S),placeholder:"Cari...",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Si=Object.freeze(Object.defineProperty({__proto__:null,default:xi},Symbol.toStringTag,{value:"Module"}));function io(m,s=!1){const d=m.map(g=>({value:g.id,label:g.name+" ("+g.code+")"})),o=s?[{value:"all",label:"Semua"},...d]:d,i=T([...o]);return{filteredCustomers:i,filterCustomersFn:(g,v)=>{v(()=>{i.value=o.filter(f=>f.label.toLowerCase().includes(g.toLowerCase()))})},customers:o}}const Vi={class:"col col-md-6 q-pa-xs"},ll="Penyesuaian Saldo Dompet Pelanggan",qi={__name:"Adjustment",setup(m){const s=be(),{filteredCustomers:d,filterCustomersFn:o}=io(s.props.customers,!1),i=Qe({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),n=()=>i.amount=i.new_wallet_balance-i.old_wallet_balance;Ne(()=>i.customer_id,async f=>{if(!f){i.old_wallet_balance=0,i.new_wallet_balance=0,n();return}i.processing=!0;try{const u=await axios.get(route("admin.customer.wallet_balance",{id:f}));i.new_wallet_balance=i.old_wallet_balance=u.data.wallet_balance}catch(u){console.error("Gagal mengambil saldo:",u),i.old_wallet_balance=0,i.new_wallet_balance=0}i.processing=!1,n()});const g=X(()=>i.new_wallet_balance-i.old_wallet_balance),v=()=>rt({form:i,url:route("admin.customer-wallet-transaction.adjustment")});return(f,u)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),h(J,null,[e(p,{title:ll}),e(y,null,{title:l(()=>[b(r(ll))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Vi,[e(Je,{class:"row",onSubmit:G(v,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(ce,{class:"custom-select",modelValue:a(i).customer_id,"onUpdate:modelValue":u[0]||(u[0]=_=>a(i).customer_id=_),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(d),"map-options":"","emit-value":"",errorMessage:a(i).errors.customer_id,onFilter:a(o),error:!!a(i).errors.customer_id,disable:a(i).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,null,{default:l(()=>u[6]||(u[6]=[b("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Ee,{modelValue:a(i).old_wallet_balance,"onUpdate:modelValue":u[1]||(u[1]=_=>a(i).old_wallet_balance=_),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.old_wallet_balance,errorMessage:a(i).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(i).new_wallet_balance,"onUpdate:modelValue":u[2]||(u[2]=_=>a(i).new_wallet_balance=_),label:"Saldo Seharusnya",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.new_wallet_balance,errorMessage:a(i).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":u[3]||(u[3]=_=>g.value=_),label:"Selisih",readonly:"",lazyRules:"",disable:a(i).processing},null,8,["modelValue","disable"]),e(ne,{modelValue:a(i).notes,"onUpdate:modelValue":u[4]||(u[4]=_=>a(i).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.notes,"error-message":a(i).errors.notes,rules:[_=>_&&_.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:u[5]||(u[5]=_=>a(ee).get(f.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ci=Object.freeze(Object.defineProperty({__proto__:null,default:qi},Symbol.toStringTag,{value:"Module"})),Ti={class:"q-gutter-sm"},Pi={class:"col col-md-6 q-pa-xs"},Ri={class:"row"},Oi={class:"detail"},Di={key:0},Ii={key:1},Ui={key:0},Ei={key:1},ji={colspan:"3",class:"bg-white"},ol="Rincian Transaksi",Ai={__name:"Detail",setup(m){const s=be();return(d,o)=>{const i=Z("i-head"),n=Z("i-link"),g=Z("authenticated-layout");return c(),h(J,null,[e(i,{title:ol}),e(g,null,{"left-button":l(()=>[t("div",Ti,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$goBack())})])]),title:l(()=>[b(r(ol))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Pi,[t("div",Ri,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[18]||(o[18]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",Oi,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.datetime)),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Pelanggan",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(P,{name:"person",class:"inline-icon"}),e(n,{href:d.route("admin.customer.detail",{id:a(s).props.data.customer_id})},{default:l(()=>[b(""+r(a(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(P,{name:"person",class:"inline-icon"}),b(" "+r(a(s).props.data.customer.name),1)]),a(s).props.data.customer.phone?(c(),h("div",Di,[e(P,{name:"phone",class:"inline-icon"}),b(" "+r(a(s).props.data.customer.phone),1)])):k("",!0),a(s).props.data.customer.address?(c(),h("div",Ii,[e(P,{name:"home_pin",class:"inline-icon"}),b(" "+r(a(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[a(s).props.data.type]),1)]),t("tr",null,[o[9]||(o[9]=t("td",null,"Jumlah",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",{class:Ce(a(s).props.data.amount>0?"text-positive":"text-negative")},r(a(aa)(a(s).props.data.amount))+"Rp. "+r(a(K)(Math.abs(a(s).props.data.amount))),3)]),t("tr",null,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(c(),h("tr",Ui,[o[13]||(o[13]=t("td",null,"Dibuat",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(c(),h("tr",Ei,[o[15]||(o[15]=t("td",null,"Diperbarui",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(c(),h(J,{key:2},[o[17]||(o[17]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",ji,[e(sa,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:Ye([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Ni=Object.freeze(Object.defineProperty({__proto__:null,default:Ai},Symbol.toStringTag,{value:"Module"})),Mi={class:"q-gutter-sm"},Bi={class:"col col-md-6 q-pa-xs"},zi={__name:"Editor",setup(m){var u;const s=be(),d=(s.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:i}=io(s.props.customers,!1),n=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],g=s.props.finance_accounts.map(p=>({label:p.name,value:p.id})),v=Qe({id:s.props.data.id,customer_id:s.props.data.customer_id,finance_account_id:s.props.data.finance_account_id,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((u=s.props.data)==null?void 0:u.image_path)??"",image:null}),f=()=>{ra(v,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:v,url:route("admin.customer-wallet-transaction.save")})};return(p,y)=>{const _=Z("i-head"),q=Z("authenticated-layout");return c(),h(J,null,[e(_,{title:d}),e(q,null,{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",Mi,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=x=>p.$inertia.get(p.route("admin.customer-wallet-transaction.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Bi,[e(Je,{class:"row",onSubmit:G(f,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[1]||(y[1]=x=>a(v).id=x)},null,512),[[_t,a(v).id]]),e(Ft,{autofocus:"",modelValue:a(v).datetime,"onUpdate:modelValue":y[2]||(y[2]=x=>a(v).datetime=x),label:"Tanggal",error:!!a(v).errors.datetime,disable:a(v).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ce,{class:"custom-select",modelValue:a(v).customer_id,"onUpdate:modelValue":y[3]||(y[3]=x=>a(v).customer_id=x),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"","emit-value":"",errorMessage:a(v).errors.customer_id,onFilter:a(i),error:!!a(v).errors.customer_id,disable:a(v).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,null,{default:l(()=>y[10]||(y[10]=[b("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(ce,{modelValue:a(v).type,"onUpdate:modelValue":y[4]||(y[4]=x=>a(v).type=x),label:"Jenis",options:n,"map-options":"","emit-value":"",error:!!a(v).errors.type,disable:a(v).processing,errorMessage:a(v).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{modelValue:a(v).finance_account_id,"onUpdate:modelValue":y[5]||(y[5]=x=>a(v).finance_account_id=x),label:a(v).type=="deposit"?"Kas Tujuan":"Kas Asal",options:a(g),"map-options":"","emit-value":"",error:!!a(v).errors.finance_account_id,disable:a(v).processing,errorMessage:a(v).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Ee,{modelValue:a(v).amount,"onUpdate:modelValue":y[6]||(y[6]=x=>a(v).amount=x),label:"Jumlah",lazyRules:"",disable:a(v).processing,error:!!a(v).errors.amount,errorMessage:a(v).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ne,{modelValue:a(v).notes,"onUpdate:modelValue":y[7]||(y[7]=x=>a(v).notes=x),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(v).processing,error:!!a(v).errors.notes,"error-message":a(v).errors.notes,rules:[x=>x&&x.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Da,{modelValue:a(v).image,"onUpdate:modelValue":y[8]||(y[8]=x=>a(v).image=x),"initial-image-path":a(v).image_path,disabled:a(v).processing,error:!!a(v).errors.image||!!a(v).errors.image_path,"error-message":a(v).errors.image||a(v).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(v).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(v).processing,onClick:y[9]||(y[9]=x=>a(ee).get(p.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Fi=Object.freeze(Object.defineProperty({__proto__:null,default:zi},Symbol.toStringTag,{value:"Module"})),Li={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ki={class:"q-pa-xs"},Hi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Yi={key:0},Wi={key:0},Qi={class:"flex justify-end no-wrap"},nl="Transaksi Dompet Pelanggan",Ji={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=new Date().getFullYear(),u=new Date().getMonth()+1,p=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...Ct(f-2,f-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Tt()],_=Re({search:"",year:f,month:u,...Me()}),q=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),x=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{M()});const w=j=>st({message:`Hapus transaksi #${j.code}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",j.id),fetchItemsCallback:M,loading:i}),M=(j=null)=>{Be({pagination:q,filter:_,props:j,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:i,tableRef:n})},Y=()=>{M()},C=X(()=>s.screen.gt.sm?x:x.filter(j=>j.name==="code"||j.name==="action"));Ne(()=>_.year,j=>{j===null&&(_.month=null)});const B=T(null),O=T(!1),z=j=>{B.value=j,O.value=!0};return(j,V)=>{const I=Z("i-head"),R=Z("authenticated-layout");return c(),h(J,null,[e(I,{title:nl}),e(R,null,He({title:l(()=>[b(r(nl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:V[0]||(V[0]=$=>d.value=!d.value)},null,8,["icon"]),j.$can("admin.customer-wallet-transaction.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:V[1]||(V[1]=$=>a(ee).get(j.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",Ki,[e(Ie,{ref_key:"tableRef",ref:n,style:Ye({height:a(v)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:q.value,"onUpdate:pagination":V[6]||(V[6]=$=>q.value=$),filter:_.search,loading:i.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:M,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:$,message:E,filter:N})=>[t("div",Hi,[t("span",null,r(E)+" "+r(N?" with term "+N:""),1)])]),body:l($=>[e(Pe,{props:$,class:"cursor-pointer",onClick:G(E=>a(ee).get(j.route("admin.customer-wallet-transaction.detail",{id:$.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:$,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.gt.sm?k("",!0):(c(),D(P,{key:0,name:"tag",class:"inline-icon"})),b(" "+r($.row.code),1)]),a(s).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[t("div",null,[e(P,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(a(ge)($.row.datetime)),1)]),$.row.finance_account?(c(),h("div",Yi,[e(P,{name:"wallet",class:"inline-icon"}),b(" "+r($.row.finance_account?$.row.finance_account.name:"-"),1)])):k("",!0),e($e,{icon:"person",text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"]),t("div",{class:Ce([$.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(P,{name:"money",class:"inline-icon"}),b(" "+r(a(aa)($.row.amount))+"Rp. "+r(a(K)(Math.abs($.row.amount))),1)],2),e($e,{text:$.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(ft,null,{default:l(()=>[b(r($.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(W,{key:"datetime",props:$},{default:l(()=>[b(r(a(ge)($.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"customer_id",props:$},{default:l(()=>[e($e,{text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:$},{default:l(()=>[$.row.finance_account?(c(),h("div",Wi,r($.row.finance_account?$.row.finance_account.name:"-"),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"amount",props:$,style:{"text-align":"right"}},{default:l(()=>[b(r(a(ia)($.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:$},{default:l(()=>[e($e,{text:$.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:$},{default:l(()=>[t("div",Qi,[e(U,{icon:"image",color:"primary",dense:"",flat:"",disable:$.row.image_path===null||$.row.image_path==="",onClick:G(E=>z($.row.image_path),["stop"])},{default:l(()=>[$.row.image_path!=null?(c(),D(ea,{key:0},{default:l(()=>V[8]||(V[8]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),j.$can("admin.customer-wallet-transaction.delete")?(c(),D(U,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:V[5]||(V[5]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[j.$can("admin.customer-wallet-transaction.delete")?te((c(),D(oe,{key:0,onClick:G(E=>w($.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>V[9]||(V[9]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ga,{modelValue:O.value,"onUpdate:modelValue":V[7]||(V[7]=$=>O.value=$),imageUrl:`/${B.value}`},null,8,["modelValue","imageUrl"])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Li,[e(ce,{modelValue:_.year,"onUpdate:modelValue":[V[2]||(V[2]=$=>_.year=$),Y],options:p,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:_.month,"onUpdate:modelValue":[V[3]||(V[3]=$=>_.month=$),Y],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:_.year===null},null,8,["modelValue","disable"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":V[4]||(V[4]=$=>_.search=$),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Gi=Object.freeze(Object.defineProperty({__proto__:null,default:Ji},Symbol.toStringTag,{value:"Module"})),Xi={class:"detail"},Zi={key:0},ed={key:1},td={class:"text-grey-8"},ad={key:2},ld={class:"text-grey-8"},od={key:0,class:"q-pt-md"},uo={__name:"MainInfoTab",setup(m){const s=be(),d=()=>{st({message:`Hapus Pelanggan ${s.props.data.code}?`,url:route("admin.customer.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.customer.index"))}})};return(o,i)=>(c(),h(J,null,[t("table",Xi,[t("tbody",null,[i[28]||(i[28]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pelanggan")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Jenis",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.type_label),1)]),t("tr",null,[i[5]||(i[5]=t("td",null,"Nama",-1)),i[6]||(i[6]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[i[7]||(i[7]=t("td",null,"Default Harga",-1)),i[8]||(i[8]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.default_price_type_label),1)]),t("tr",null,[i[9]||(i[9]=t("td",null,"No. Telepon",-1)),i[10]||(i[10]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone?a(s).props.data.phone:"-"),1)]),t("tr",null,[i[11]||(i[11]=t("td",null,"Alamat",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.address?a(s).props.data.address:"-"),1)]),t("tr",null,[i[13]||(i[13]=t("td",null,"Saldo Wallet",-1)),i[14]||(i[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(s).props.data.wallet_balance)),1)]),t("tr",null,[i[15]||(i[15]=t("td",null,"Utang Penjualan",-1)),i[16]||(i[16]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(s).props.data.balance)),1)]),t("tr",null,[i[17]||(i[17]=t("td",null,"Status",-1)),i[18]||(i[18]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),i[29]||(i[29]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),a(s).props.data.created_at?(c(),h("tr",Zi,[i[19]||(i[19]=t("td",null,"Dibuat",-1)),i[20]||(i[20]=t("td",null,":",-1)),t("td",null,r(a(At)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name)+" ("+r(a(ge)(a(s).props.data.created_at))+") ",1)])):k("",!0),a(s).props.data.updated_at?(c(),h("tr",ed,[i[21]||(i[21]=t("td",null,"Diperbarui",-1)),i[22]||(i[22]=t("td",null,":",-1)),t("td",null,r(a(At)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(ge)(a(s).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[i[23]||(i[23]=t("td",null,"Terakhir login",-1)),i[24]||(i[24]=t("td",null,":",-1)),t("td",null,[b(r(a(s).props.data.last_login_datetime?a(ge)(a(s).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",td,"("+r(a(At)(a(s).props.data.last_login_datetime))+")",1)])]),a(s).props.data.last_activity_datetime?(c(),h("tr",ad,[i[26]||(i[26]=t("td",null,"Aktifitas Terakhir",-1)),i[27]||(i[27]=t("td",null,":",-1)),t("td",null,[b(r(a(ge)(a(s).props.data.last_activity_datetime))+" ",1),t("span",ld,[b("("+r(a(At)(a(s).props.data.last_activity_datetime))+")",1),i[25]||(i[25]=t("br",null,null,-1)),b(r(a(s).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(c(),h("div",od,[e(U,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>d())})])):k("",!0)],64))}},nd=Object.freeze(Object.defineProperty({__proto__:null,default:uo},Symbol.toStringTag,{value:"Module"})),sd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},rd={class:"text-bold"},mo={__name:"WalletHistoryTab",setup(m){const s=be(),d=T([]),o=T(!0),i=Re({customer_id:s.props.data.id,...Me()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{v()});const v=(p=null)=>Be({pagination:n,filter:i,props:p,rows:d,url:route("admin.customer-wallet-transaction.data"),loading:o}),f=xe(),u=X(()=>f.screen.gt.sm?g:g.filter(p=>p.name==="id"));return(p,y)=>(c(),D(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:u.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:x})=>[t("div",sd,[t("span",null,r(q)+" "+r(x?" with term "+x:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:G(q=>a(ee).get(p.route("admin.customer-wallet-transaction.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",rd,[e(P,{class:"inline-icon",name:"tag"}),b(" "+r(_.row.code),1)]),t("div",null,[e(P,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(a(ge)(_.row.datetime)),1)]),a(f).screen.lt.md?(c(),h(J,{key:0},[t("div",{class:Ce(["text-bold",_.row.amount<0?"text-red":"text-green"])},[e(P,{name:"money",class:"inline-icon"}),b(" "+r(a(la)(_.row.amount)),1)],2),t("div",null,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(ft,{size:"xs",color:_.row.amount>0?"green":"red"},{default:l(()=>[e(P,{name:"category"}),b(" "+r(_.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"amount",props:_},{default:l(()=>[t("div",{class:Ce(_.row.amount<0?"text-red-10":_.row.amount>0?"text-green-10":"")},r(a(ia)(_.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},id=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"})),dd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ud={class:"text-bold"},md={class:"text-bold"},cd={key:0},co={__name:"OrderHistoryTab",setup(m){const s=be(),d=T([]),o=T(!0),i=Re({customer_id:s.props.data.id,...Me()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{v()});const v=(p=null)=>Be({pagination:n,filter:i,props:p,rows:d,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:s.props.data.id}}),loading:o}),f=xe(),u=X(()=>f.screen.gt.sm?g:g.filter(p=>p.name==="id"));return(p,y)=>(c(),D(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:u.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:x})=>[t("div",dd,[t("span",null,r(q)+" "+r(x?" with term "+x:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:G(q=>a(ee).get(p.route("admin.sales-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",ud,[e(P,{class:"inline-icon",name:"tag"}),b(" "+r(_.row.code),1)]),t("div",null,[e(P,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(a(ge)(_.row.datetime)),1)]),a(f).screen.lt.md?(c(),h(J,{key:0},[t("div",md,[e(P,{name:"money",class:"inline-icon"}),b(" Rp. "+r(a(K)(_.row.grand_total)),1)]),_.row.notes?(c(),h("div",cd,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(ft,{color:_.row.status=="closed"?"green":"red"},{default:l(()=>[b(r(_.row.status_label),1)]),_:2},1032,["color"]),e(ft,{class:"q-ml-xs",color:_.row.payment_status=="fully_paid"?"green":"red"},{default:l(()=>[b(r(_.row.payment_status_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[t("div",null,r(a(K)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},pd=Object.freeze(Object.defineProperty({__proto__:null,default:co},Symbol.toStringTag,{value:"Module"})),fd=qt({name:"QSpace",setup(){const m=qe("div",{class:"q-space"});return()=>m}}),gd={class:"detail"},bd={key:0},vd={key:1},yd={__name:"SupplierDetail",props:{data:{type:Object,default:null}},setup(m){return(s,d)=>(c(),h("table",gd,[t("tbody",null,[t("tr",null,[d[0]||(d[0]=t("td",{style:{width:"100px"}},"Nama",-1)),d[1]||(d[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.data.name),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"No Telepon",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,[b(r(m.data.phone_1?m.data.phone_1:"-")+" ",1),m.data.phone_2?(c(),h(J,{key:0},[d[2]||(d[2]=t("br",null,null,-1)),b(" "+r(m.data.phone_2),1)],64)):k("",!0),m.data.phone_3?(c(),h(J,{key:1},[d[3]||(d[3]=t("br",null,null,-1)),b(" "+r(m.data.phone_3),1)],64)):k("",!0)])]),t("tr",null,[d[6]||(d[6]=t("td",null,"Alamat",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,r(m.data.address?m.data.address:"-"),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Alamat Retur",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,r(m.data.returned_address?m.data.returned_address:"-"),1)]),m.data.bank_account_name_1||m.data.bank_account_holder_1||m.data.bank_account_number_1?(c(),h("tr",bd,[d[10]||(d[10]=t("td",null,"No Rek 1",-1)),d[11]||(d[11]=t("td",null,":",-1)),t("td",null,[b(r(m.data.bank_account_name_1)+" ",1),m.data.bank_account_holder_1?(c(),h(J,{key:0},[b(" a.n. "+r(m.data.bank_account_holder_1),1)],64)):k("",!0),b(" "+r(m.data.bank_account_number_1),1)])])):k("",!0),m.data.bank_account_name_2||m.data.bank_account_holder_2||m.data.bank_account_number_2?(c(),h("tr",vd,[d[12]||(d[12]=t("td",null,"No Rek 2",-1)),d[13]||(d[13]=t("td",null,":",-1)),t("td",null,[b(r(m.data.bank_account_name_2)+" ",1),m.data.bank_account_holder_2?(c(),h(J,{key:0},[b(" a.n. "+r(m.data.bank_account_holder_2),1)],64)):k("",!0),b(" "+r(m.data.bank_account_number_2),1)])])):k("",!0),t("tr",null,[d[15]||(d[15]=t("td",null,"URL",-1)),d[16]||(d[16]=t("td",null,":",-1)),t("td",null,[b(r(!m.data.url_1&&!m.data.url_2?"-":"")+" ",1),m.data.url_1?(c(),h(J,{key:0},[b(r(m.data.url_1),1)],64)):k("",!0),m.data.url_2?(c(),h(J,{key:1},[d[14]||(d[14]=t("br",null,null,-1)),b(" "+r(m.data.url_2),1)],64)):k("",!0)])]),t("tr",null,[d[17]||(d[17]=t("td",null,"Status",-1)),d[18]||(d[18]=t("td",null,":",-1)),t("td",null,r(m.data.active?"Aktif":"Tidak Aktif"),1)])])]))}},_d={class:"detail"},kd={__name:"CustomerDetail",props:{data:{type:Object,default:null}},setup(m){return(s,d)=>(c(),h("table",_d,[t("tbody",null,[t("tr",null,[d[0]||(d[0]=t("td",{style:{width:"100px"}},"Kode",-1)),d[1]||(d[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.data.code),1)]),t("tr",null,[d[2]||(d[2]=t("td",null,"Nama",-1)),d[3]||(d[3]=t("td",null,":",-1)),t("td",null,r(m.data.name),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"No Telepon",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,r(m.data.phone),1)]),t("tr",null,[d[6]||(d[6]=t("td",null,"Alamat",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,r(m.data.address),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Status",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,r(m.data.active?"Aktif":"Tidak Aktif"),1)])])]))}},wd={class:"detail"},hd={__name:"ProductDetail",props:{data:{type:Object,default:null}},setup(m){return(s,d)=>{var o,i;return c(),h("table",wd,[t("tbody",null,[t("tr",null,[d[0]||(d[0]=t("td",{style:{width:"100px"}},"Kode / Nama",-1)),d[1]||(d[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.data.name),1)]),t("tr",null,[d[2]||(d[2]=t("td",null,"Deskripsi",-1)),d[3]||(d[3]=t("td",null,":",-1)),t("td",null,r(m.data.description),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"Barcode",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,r(m.data.barcode),1)]),t("tr",null,[d[6]||(d[6]=t("td",null,"Jenis",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,r(s.$CONSTANTS.PRODUCT_TYPES[m.data.type]),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Kategori",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,r((o=m.data.category)==null?void 0:o.name),1)]),t("tr",null,[d[10]||(d[10]=t("td",null,"Pemasok",-1)),d[11]||(d[11]=t("td",null,":",-1)),t("td",null,r((i=m.data.supplier)==null?void 0:i.name),1)]),t("tr",null,[d[12]||(d[12]=t("td",null,"Status",-1)),d[13]||(d[13]=t("td",null,":",-1)),t("td",null,r(m.data.active?"Aktif":"Tidak Aktif"),1)])])])}}},$d={class:"text-subtitle1"},xd={class:"text-subtitle2 text-grey-9 q-mb-md"},Sd={class:"text-weight-medium"},Vd={key:0},qd={key:1},Cd={key:2},Td={key:3},Pd={class:"text-subtitle1 text-grey-6 q-mb-sm"},Rd={class:"bg-white q-pa-sm rounded-borders overflow-auto text-sm border-2 border-dashed border-grey-4",style:{"white-space":"pre-wrap","word-wrap":"break-word"}},Od={__name:"DocumentVersionDataViewer",props:{selectedVersion:{type:Object,default:null},showDialog:{type:Boolean,required:!0}},emits:["update:showDialog"],setup(m,{emit:s}){const d=m,o=xe(),i=s,n=X({get:()=>d.showDialog,set:u=>i("update:showDialog",u)}),g=X(()=>{if(d.selectedVersion&&d.selectedVersion.data)try{return typeof d.selectedVersion.data=="string"?JSON.parse(d.selectedVersion.data):d.selectedVersion.data}catch(u){return console.error("Error parsing JSON data:",u),{error:"Data JSON tidak valid."}}return{}}),v=X(()=>{var u;return(u=d.selectedVersion)==null?void 0:u.document_type}),f=X(()=>JSON.stringify(g.value,null,2));return(u,p)=>(c(),D(lt,{modelValue:n.value,"onUpdate:modelValue":p[2]||(p[2]=y=>n.value=y),"transition-show":"scale","transition-hide":"scale",maximized:a(o).screen.lt.md},{default:l(()=>[e(fe,{style:{width:"600px","max-width":"95vw"}},{default:l(()=>[e(ae,{class:"row items-center q-pb-md bg-grey-4"},{default:l(()=>{var y;return[t("div",$d,[e(P,{name:"history",class:"q-mr-sm"}),b(" Detail Versi V."+r(((y=m.selectedVersion)==null?void 0:y.version)||"N/A"),1)]),e(fd),e(U,{icon:"close",flat:"",round:"",dense:"",onClick:p[0]||(p[0]=_=>n.value=!1),color:"grey"})]}),_:1}),e(ae,{class:"q-pt-md scroll",style:{"max-height":"75vh"}},{default:l(()=>{var y;return[t("div",xd,[e(P,{name:"description",class:"q-mr-xs"}),p[3]||(p[3]=b(" Catatan Perubahan: ")),t("span",Sd,r(((y=m.selectedVersion)==null?void 0:y.changelog)||"Tidak ada catatan perubahan."),1)]),v.value==="App\\Models\\Supplier"?(c(),h("div",Vd,[p[4]||(p[4]=t("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Info Pemasok",-1)),e(yd,{data:g.value},null,8,["data"])])):v.value==="App\\Models\\Customer"?(c(),h("div",qd,[p[5]||(p[5]=t("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Info Pelanggan",-1)),e(kd,{data:g.value},null,8,["data"])])):v.value==="App\\Models\\Product"?(c(),h("div",Cd,[p[6]||(p[6]=t("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Info Produk",-1)),e(hd,{data:g.value},null,8,["data"])])):(c(),h("div",Td,[t("div",Pd," Tipe Dokumen ("+r(v.value||"TIDAK DIKETAHUI")+") Tidak Memiliki Tampilan Kustom. ",1),p[7]||(p[7]=t("div",{class:"text-caption text-grey-7 q-mb-xs"},"Tampilan Raw JSON:",-1)),t("pre",Rd,r(f.value),1)]))]}),_:1}),e(at,{align:"right",class:"bg-grey-2"},{default:l(()=>[e(U,{flat:"",label:"Tutup",color:"primary",onClick:p[1]||(p[1]=y=>n.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"]))}},Dd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Id={class:"font-bold text-lg"},Ud={class:"text-grey-7"},Ia={__name:"DocumentVersionHistoryList",props:{documentId:{type:[String,Number],required:!0},documentType:{type:String,required:!0}},setup(m){const s=m,d=T(!1),o=T(null),i=xe(),n=T([]),g=T(!0),v=Re({...Me()}),f=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let u=[{name:"version",label:"Versi",field:"version",align:"center",sortable:!0},{name:"created_at",label:"Waktu Versi",field:"created_at",align:"left",sortable:!0},{name:"creator",label:"Dibuat Oleh",field:"creator",align:"left"},{name:"changelog",label:"Log Perubahan",field:"changelog",align:"left"}];he(()=>{p()});const p=(q=null)=>Be({pagination:f,filter:v,props:q,rows:n,url:route("admin.document-version.data",{filter:{document_id:s.documentId,document_type:s.documentType}}),loading:g}),y=X(()=>i.screen.lt.sm?u.filter(q=>q.name==="version"||q.name==="created_at"||q.name==="changelog"):u),_=q=>{o.value=q,d.value=!0};return(q,x)=>(c(),h(J,null,[e(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:f.value,"onUpdate:pagination":x[0]||(x[0]=w=>f.value=w),filter:v.search,loading:g.value,columns:y.value,rows:n.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({message:w,filter:M})=>[t("div",Dd,[t("span",null,r(w)+" "+r(M?" dengan istilah "+M:""),1)])]),body:l(w=>[e(Pe,{props:w,onClick:G(M=>_(w.row),["stop"]),class:"cursor-pointer"},{default:l(()=>[e(W,{key:"version",props:w},{default:l(()=>{var M;return[t("div",Id,[e(ft,{color:"primary"},{default:l(()=>[b("V."+r(w.row.version),1)]),_:2},1024)]),a(i).screen.lt.sm?(c(),h(J,{key:0},[t("div",null,[e(P,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(a(ge)(w.row.created_at)),1)]),t("div",Ud,[e(P,{name:"person",class:"inline-icon"}),b(" "+r(((M=w.row.creator)==null?void 0:M.name)||"Sistem"),1)]),e($e,{text:w.row.changelog,icon:"notes",class:"text-grey-8 q-mt-xs"},null,8,["text"])],64)):k("",!0)]}),_:2},1032,["props"]),e(W,{key:"created_at",props:w},{default:l(()=>[b(r(a(ge)(w.row.created_at)),1)]),_:2},1032,["props"]),e(W,{key:"creator",props:w},{default:l(()=>{var M;return[b(r(((M=w.row.creator)==null?void 0:M.name)||"Sistem"),1)]}),_:2},1032,["props"]),e(W,{key:"changelog",props:w},{default:l(()=>[e($e,{text:w.row.changelog},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]),e(Od,{"show-dialog":d.value,"onUpdate:showDialog":x[1]||(x[1]=w=>d.value=w),"selected-version":o.value},null,8,["show-dialog","selected-version"])],64))}},Ed={class:"q-gutter-sm"},jd={class:"q-gutter-sm"},Ad={class:"col col-lg-6 q-pa-xs"},Nd={class:"row"},sl="Rincian Pelanggan",Md={__name:"Detail",setup(m){const s=be(),d=T("main");return xe(),(o,i)=>{const n=Z("i-head"),g=Z("authenticated-layout");return c(),h(J,null,[e(n,{title:sl}),e(g,null,{title:l(()=>[b(r(sl))]),"left-button":l(()=>[t("div",Ed,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":l(()=>[t("div",jd,[o.$can("admin.customer.edit")?(c(),D(U,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=v=>a(ee).get(o.route("admin.customer.edit",{id:a(s).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(c(),D(U,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=v=>a(ee).get(o.route("admin.customer.edit",{id:a(s).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(c(),D(U,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=v=>a(ee).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ad,[t("div",Nd,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Pt,{modelValue:d.value,"onUpdate:modelValue":i[4]||(i[4]=v=>d.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Info Utama"}),e(ot,{name:"history",label:"Riwayat Wallet"}),e(ot,{name:"order-history",label:"Riwayat Order"}),e(ot,{name:"version-history",label:"Riwayat Dokumen"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:d.value,"onUpdate:modelValue":i[5]||(i[5]=v=>d.value=v),animated:""},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(uo)]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(mo)]),_:1}),e(nt,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(co)]),_:1}),e(nt,{name:"version-history",class:"q-pa-xs"},{default:l(()=>[e(Ia,{"document-id":a(s).props.data.id,"document-type":"customer"},null,8,["document-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Bd=Object.freeze(Object.defineProperty({__proto__:null,default:Md},Symbol.toStringTag,{value:"Module"})),zd={class:"q-gutter-sm"},Fd={class:"col col-md-6 q-pa-xs"},Ld={__name:"Editor",setup(m){const s=be(),d=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,default_price_type:s.props.data.default_price_type,phone:s.props.data.phone,address:s.props.data.address,active:!!s.props.data.active,password:s.props.data.id?null:"12345",type:s.props.data.type}),i=T(!s.props.data.id),n=tt(window.CONSTANTS.CUSTOMER_TYPES),g=tt(window.CONSTANTS.PRODUCT_PRICE_TYPES),v=()=>rt({form:o,url:route("admin.customer.save",{id:o.id})});return(f,u)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),h(J,null,[e(p,{title:d}),e(y,null,{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",zd,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=_=>f.$goBack())})])]),"right-button":l(()=>[e(U,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(o).processing,onClick:u[1]||(u[1]=_=>v()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Fd,[e(Je,{class:"row",onSubmit:G(v,["prevent"]),onValidationError:a(We)},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":u[2]||(u[2]=_=>a(o).id=_)},null,512),[[_t,a(o).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(ne,{modelValue:a(o).code,"onUpdate:modelValue":u[3]||(u[3]=_=>a(o).code=_),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[_=>_&&_.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).name,"onUpdate:modelValue":u[4]||(u[4]=_=>a(o).name=_),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:a(o).default_price_type,"onUpdate:modelValue":u[5]||(u[5]=_=>a(o).default_price_type=_),options:a(g),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!a(o).errors.default_price_type,"error-message":a(o).errors.default_price_type,disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":u[6]||(u[6]=_=>a(o).type=_),label:"Jenis Akun",options:a(n),"map-options":"","emit-value":"","lazy-rules":"",disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(o).errors.type,"error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(ne,{modelValue:a(o).phone,"onUpdate:modelValue":u[7]||(u[7]=_=>a(o).phone=_),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:a(o).processing,error:!!a(o).errors.phone,"error-message":a(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).address,"onUpdate:modelValue":u[8]||(u[8]=_=>a(o).address=_),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{autocomplete:"off","aria-autocomplete":"none",modelValue:a(o).password,"onUpdate:modelValue":u[10]||(u[10]=_=>a(o).password=_),label:a(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:a(o).processing,error:!!a(o).errors.password,"error-message":a(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:i.value?"text":"password"},{append:l(()=>[e(U,{dense:"",flat:"",round:"",onClick:u[9]||(u[9]=_=>i.value=!i.value)},{default:l(()=>[e(P,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(va,{modelValue:a(o).active,"onUpdate:modelValue":u[11]||(u[11]=_=>a(o).active=_),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),u[12]||(u[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Kd=Object.freeze(Object.defineProperty({__proto__:null,default:Ld},Symbol.toStringTag,{value:"Module"}));function Jt(m,s,d,o){const i=[];return m.forEach(n=>{o(n)===!0?i.push(n):s.push({failedPropValidation:d,file:n})}),i}function ca(m){m&&m.dataTransfer&&(m.dataTransfer.dropEffect="copy"),Ht(m)}const Hd={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Yd=["rejected"];function Wd({editable:m,dnd:s,getFileInput:d,addFilesToQueue:o}){const{props:i,emit:n,proxy:g}=Vt(),v=T(null),f=X(()=>i.accept!==void 0?i.accept.split(",").map(C=>(C=C.trim(),C==="*"?"*/":(C.endsWith("/*")&&(C=C.slice(0,C.length-1)),C.toUpperCase()))):null),u=X(()=>parseInt(i.maxFiles,10)),p=X(()=>parseInt(i.maxTotalSize,10));function y(C){if(m.value)if(C!==Object(C)&&(C={target:null}),C.target!==null&&C.target.matches('input[type="file"]')===!0)C.clientX===0&&C.clientY===0&&Tn(C);else{const B=d();B&&B!==C.target&&B.click(C)}}function _(C){m.value&&C&&o(null,C)}function q(C,B,O,z){let j=Array.from(B||C.target.files);const V=[],I=()=>{V.length!==0&&n("rejected",V)};if(i.accept!==void 0&&f.value.indexOf("*/")===-1&&(j=Jt(j,V,"accept",R=>f.value.some($=>R.type.toUpperCase().startsWith($)||R.name.toUpperCase().endsWith($))),j.length===0))return I();if(i.maxFileSize!==void 0){const R=parseInt(i.maxFileSize,10);if(j=Jt(j,V,"max-file-size",$=>$.size<=R),j.length===0)return I()}if(i.multiple!==!0&&j.length!==0&&(j=[j[0]]),j.forEach(R=>{R.__key=R.webkitRelativePath+R.lastModified+R.name+R.size}),z===!0){const R=O.map($=>$.__key);j=Jt(j,V,"duplicate",$=>R.includes($.__key)===!1)}if(j.length===0)return I();if(i.maxTotalSize!==void 0){let R=z===!0?O.reduce(($,E)=>$+E.size,0):0;if(j=Jt(j,V,"max-total-size",$=>(R+=$.size,R<=p.value)),j.length===0)return I()}if(typeof i.filter=="function"){const R=i.filter(j);j=Jt(j,V,"filter",$=>R.includes($))}if(i.maxFiles!==void 0){let R=z===!0?O.length:0;if(j=Jt(j,V,"max-files",()=>(R++,R<=u.value)),j.length===0)return I()}if(I(),j.length!==0)return j}function x(C){ca(C),s.value!==!0&&(s.value=!0)}function w(C){Ht(C),(C.relatedTarget!==null||Gt.is.safari!==!0?C.relatedTarget!==v.value:document.elementsFromPoint(C.clientX,C.clientY).includes(v.value)===!1)===!0&&(s.value=!1)}function M(C){ca(C);const B=C.dataTransfer.files;B.length!==0&&o(null,B),s.value=!1}function Y(C){if(s.value===!0)return qe("div",{ref:v,class:`q-${C}__dnd absolute-full`,onDragenter:ca,onDragover:ca,onDragleave:w,onDrop:M})}return Object.assign(g,{pickFiles:y,addFiles:_}),{pickFiles:y,addFiles:_,onDragover:x,onDragleave:w,processFiles:q,getDndNode:Y,maxFilesNumber:u,maxTotalSizeNumber:p}}const po=qt({name:"QFile",inheritAttrs:!1,props:{...Rn,...Gl,...Hd,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Pn,...Yd],setup(m,{slots:s,emit:d,attrs:o}){const{proxy:i}=Vt(),n=On(),g=T(null),v=T(!1),f=Dn(m),{pickFiles:u,onDragover:p,onDragleave:y,processFiles:_,getDndNode:q}=Wd({editable:n.editable,dnd:v,getFileInput:N,addFilesToQueue:S}),x=In(m),w=X(()=>Object(m.modelValue)===m.modelValue?"length"in m.modelValue?Array.from(m.modelValue):[m.modelValue]:[]),M=X(()=>Ka(w.value)),Y=X(()=>w.value.map(me=>me.name).join(", ")),C=X(()=>Un(w.value.reduce((me,Oe)=>me+Oe.size,0))),B=X(()=>({totalSize:C.value,filesNumber:w.value.length,maxFiles:m.maxFiles})),O=X(()=>({tabindex:-1,type:"file",title:"",accept:m.accept,capture:m.capture,name:f.value,...o,id:n.targetUid.value,disabled:n.editable.value!==!0})),z=X(()=>"q-file q-field--auto-height"+(v.value===!0?" q-file--dnd":"")),j=X(()=>m.multiple===!0&&m.append===!0);function V(me){const Oe=w.value.slice();Oe.splice(me,1),R(Oe)}function I(me){const Oe=w.value.indexOf(me);Oe!==-1&&V(Oe)}function R(me){d("update:modelValue",m.multiple===!0?me:me[0])}function $(me){me.keyCode===13&&An(me)}function E(me){(me.keyCode===13||me.keyCode===32)&&u(me)}function N(){return g.value}function S(me,Oe){const Ge=_(me,Oe,w.value,j.value),ue=N();ue!=null&&(ue.value=""),Ge!==void 0&&((m.multiple===!0?m.modelValue&&Ge.every(L=>w.value.includes(L)):m.modelValue===Ge[0])||R(j.value===!0?w.value.concat(Ge):Ge))}function A(){return[qe("input",{class:[m.inputClass,"q-file__filler"],style:m.inputStyle})]}function le(){if(s.file!==void 0)return w.value.length===0?A():w.value.map((Oe,Ge)=>s.file({index:Ge,file:Oe,ref:this}));if(s.selected!==void 0)return w.value.length===0?A():s.selected({files:w.value,ref:this});if(m.useChips===!0)return w.value.length===0?A():w.value.map((Oe,Ge)=>qe(Xl,{key:"file-"+Ge,removable:n.editable.value,dense:!0,textColor:m.color,tabindex:m.tabindex,onRemove:()=>{V(Ge)}},()=>qe("span",{class:"ellipsis",textContent:Oe.name})));const me=m.displayValue!==void 0?m.displayValue:Y.value;return me.length!==0?[qe("div",{class:m.inputClass,style:m.inputStyle,textContent:me})]:A()}function re(){const me={ref:g,...O.value,...x.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:S};return m.multiple===!0&&(me.multiple=!0),qe("input",me)}return Object.assign(n,{fieldClass:z,emitValue:R,hasValue:M,inputRef:g,innerValue:w,floatingLabel:X(()=>M.value===!0||Ka(m.displayValue)),computedCounter:X(()=>{if(m.counterLabel!==void 0)return m.counterLabel(B.value);const me=m.maxFiles;return`${w.value.length}${me!==void 0?" / "+me:""} (${C.value})`}),getControlChild:()=>q("file"),getControl:()=>{const me={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:m.tabindex};return n.editable.value===!0&&Object.assign(me,{onDragover:p,onDragleave:y,onKeydown:$,onKeyup:E}),qe("div",me,[re()].concat(le()))}}),Object.assign(i,{removeAtIndex:V,removeFile:I,getNativeElement:()=>g.value}),En(i,"nativeEl",()=>g.value),jn(n)}}),Qt=qt({name:"QBanner",props:{...Ra,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(m,{slots:s}){const{proxy:{$q:d}}=Vt(),o=Oa(m,d),i=X(()=>"q-banner row items-center"+(m.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(m.rounded===!0?" rounded-borders":"")),n=X(()=>`q-banner__actions row items-center justify-end col-${m.inlineActions===!0?"auto":"all"}`);return()=>{const g=[qe("div",{class:"q-banner__avatar col-auto row items-center self-start"},Nt(s.avatar)),qe("div",{class:"q-banner__content col text-body2"},Nt(s.default))],v=Nt(s.action);return v!==void 0&&g.push(qe("div",{class:n.value},v)),qe("div",{class:i.value+(m.inlineActions===!1&&v!==void 0?" q-banner--top-padding":""),role:"alert"},g)}}}),Qd={class:"q-gutter-sm"},Jd={class:"col col-md-6 q-pa-xs"},rl="Import Pelanggan",Gd={__name:"Import",setup(m){const s=Qe({csv_file:null}),d=()=>{s.post(route("admin.customer.import"),{onSuccess:()=>{s.reset()},onError:()=>{We()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=Z("i-head"),g=Z("authenticated-layout");return c(),h(J,null,[e(n,{title:rl}),e(g,{"show-drawer-button":!0},{title:l(()=>[b(r(rl))]),"left-button":l(()=>[t("div",Qd,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Jd,[e(Je,{class:"row",onSubmit:G(d,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(po,{modelValue:a(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=v=>a(s).csv_file=v),accept:".csv",label:"Pilih file CSV",error:!!a(s).errors.csv_file,"error-message":a(s).errors.csv_file,disable:a(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(s).processing||!a(s).csv_file,loading:a(s).processing},null,8,["disable","loading"]),e(U,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:i[2]||(i[2]=v=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(c(),D(Qt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[b(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(c(),D(Qt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[b(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Xd=Object.freeze(Object.defineProperty({__proto__:null,default:Gd},Symbol.toStringTag,{value:"Module"})),Zd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},eu={class:"q-pa-xs"},tu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},au={key:0},lu={key:2},ou={key:3},nu={class:"flex justify-end"},il="Pelanggan",su={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Re({search:"",status:"active",...Me()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"code",label:s.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{q()});const _=B=>st({message:`Hapus Pelanggan ${B.name}?`,url:route("admin.customer.delete",B.id),fetchItemsCallback:q,loading:i}),q=(B=null)=>{Be({pagination:u,filter:f,props:B,rows:o,url:route("admin.customer.data"),loading:i,tableRef:n})},x=()=>q(),w=B=>ee.get(route("admin.customer.detail",{id:B.id})),{protectClick:M}=Ut(),Y=M(w),C=X(()=>s.screen.gt.sm?p:p.filter(B=>B.name==="code"||B.name==="action"));return(B,O)=>{const z=Z("i-head"),j=Z("authenticated-layout");return c(),h(J,null,[e(z,{title:il}),e(j,null,He({title:l(()=>[b(r(il))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=V=>d.value=!d.value)},null,8,["icon"]),B.$can("admin.customer.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=V=>a(ee).get(B.route("admin.customer.add")))})):k("",!0),B.$can("admin.customer.import")?(c(),D(U,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[3]||(O[3]=G(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[B.$can("admin.customer.import")?te((c(),D(oe,{key:0,clickable:"",onClick:O[2]||(O[2]=G(V=>a(ee).get(B.route("admin.customer.import")),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"csv"})]),_:1}),e(F,null,{default:l(()=>O[8]||(O[8]=[b("Import")])),_:1})]),_:1})),[[ie],[pe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",eu,[e(Ie,{class:"full-height-table",style:Ye({height:a(v)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":O[7]||(O[7]=V=>u.value=V),filter:f.search,loading:i.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:q,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:I,filter:R})=>[t("div",tu,[t("span",null,r(I)+" "+r(R?" with term "+R:""),1)])]),body:l(V=>[e(Pe,{props:V,class:Ce([V.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(I=>a(Y)(V.row,I),["stop"])},{default:l(()=>[e(W,{key:"code",props:V,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.lt.md?(c(),D(P,{key:0,name:"person"})):k("",!0),b(" "+r(V.row.code),1)]),a(s).screen.lt.md?(c(),h(J,{key:0},[t("div",null,[a(s).screen.lt.md?(c(),D(P,{key:0,name:"person"})):k("",!0),b(" "+r(V.row.name),1)]),V.row.phone?(c(),h("div",au,[e(P,{name:"phone"}),b(" "+r(V.row.phone),1)])):k("",!0),V.row.address?(c(),D($e,{key:1,text:V.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),V.row.wallet_balance!=0?(c(),h("div",lu,[e(P,{name:"wallet"}),b(" Wallet: Rp. "+r(a(K)(V.row.wallet_balance)),1)])):k("",!0),V.row.balance!=0?(c(),h("div",ou,[e(P,{name:"wallet"}),b(" Utang: Rp. "+r(a(K)(V.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"name",props:V},{default:l(()=>[b(r(V.row.name),1)]),_:2},1032,["props"]),e(W,{key:"wallet_balance",props:V},{default:l(()=>[b(r(a(K)(V.row.wallet_balance)),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:V},{default:l(()=>[b(r(a(K)(V.row.balance)),1)]),_:2},1032,["props"]),e(W,{key:"phone",props:V},{default:l(()=>[b(r(V.row.phone),1)]),_:2},1032,["props"]),e(W,{key:"address",props:V},{default:l(()=>[e($e,{text:V.row.address},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:V},{default:l(()=>[t("div",nu,[B.$can("admin.customer.add")||B.$can("admin.customer.edit")||B.$can("admin.customer.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[6]||(O[6]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[B.$can("admin.customer.add")?te((c(),D(oe,{key:0,clickable:"",onClick:G(I=>a(ee).get(B.route("admin.customer.duplicate",V.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>O[9]||(O[9]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),B.$can("admin.customer.edit")?te((c(),D(oe,{key:1,clickable:"",onClick:G(I=>a(ee).get(B.route("admin.customer.edit",V.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>O[10]||(O[10]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),B.$can("admin.customer.delete")?te((c(),D(oe,{key:2,onClick:G(I=>_(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>O[11]||(O[11]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Zd,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:f.status,"onUpdate:modelValue":[O[4]||(O[4]=V=>f.status=V),x],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":O[5]||(O[5]=V=>f.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ru=Object.freeze(Object.defineProperty({__proto__:null,default:su},Symbol.toStringTag,{value:"Module"})),iu={class:"q-pb-sm"},du={class:"row q-col-gutter-sm"},uu={class:"row items-center no-wrap"},mu={class:"q-ml-md"},cu={class:"text-subtitle2 text-grey-8"},pu={class:"text-h6 text-weight-bold"},fo={__name:"ActualSummaryCard",props:{dashboardData:{type:Object,required:!0}},setup(m){const s=m,d=X(()=>[{label:"Total Pelanggan Aktif",value:s.dashboardData.summary.total_active_customer,icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Saldo Wallet",value:K(s.dashboardData.summary.total_wallet_balance),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Penjualan",value:K(s.dashboardData.summary.total_sales),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Transaksi",value:K(s.dashboardData.summary.total_transactions),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(o,i)=>(c(),h("div",iu,[i[0]||(i[0]=t("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"},"Ringkasan Statistik",-1)),t("div",du,[(c(!0),h(J,null,Fe(d.value,(n,g)=>(c(),h("div",{key:g,class:"col-12 col-md-6"},[e(fe,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:l(()=>[t("div",uu,[e(ta,{icon:n.icon,color:n.color,"text-color":n.bgColor},null,8,["icon","color","text-color"]),t("div",mu,[t("div",cu,r(n.label),1),t("div",pu,r(n.value),1)])])]),_:2},1024)]))),128))])]))}},fu=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"})),gu={class:"row q-col-gutter-sm q-pb-sm"},bu={class:"col-md-6 col-12"},vu={class:"col-md-6 col-12"},yu={__name:"ChartCard",props:{dashboardData:{type:Object,required:!0}},setup(m){Nn([Mn,Bn,zn,Fn,Ln,Kn,Hn]);const s=m,d=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=X(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(n){let g=n[0].name+"<br/>";return n.forEach(function(v){g+=v.marker+" "+v.seriesName+": "+K(v.value)+"<br/>"}),g}},xAxis:{type:"category",data:s.dashboardData.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:n=>K(n),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:s.dashboardData.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:d[0]}}]})),i=X(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(n){return n.name+"<br/>"+n.seriesName+": "+K(n.value)+" ("+n.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:s.dashboardData.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:n=>d[n.dataIndex%d.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(n,g)=>(c(),h("div",gu,[t("div",bu,[e(fe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[g[0]||(g[0]=t("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),e(a(Ha),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",vu,[e(fe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[g[1]||(g[1]=t("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),e(a(Ha),{class:"chart",option:i.value,autoresize:""},null,8,["option"])]),_:1})])]))}},go=wt(yu,[["__scopeId","data-v-b9cdf915"]]),_u=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"})),ku={class:"row q-col-gutter-sm q-pb-sm"},wu={class:"col-md-6 col-12"},hu={class:"col-md-6 col-12"},bo={__name:"TopCard",props:{dashboardData:{type:Object,required:!0}},setup(m){return(s,d)=>(c(),h("div",ku,[t("div",wu,[e(fe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[d[0]||(d[0]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),e(Le,{separator:""},{default:l(()=>[(c(!0),h(J,null,Fe(m.dashboardData.top_customers_sales,(o,i)=>(c(),D(oe,{key:i},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(ta,{color:"primary","text-color":"white",size:"sm"},{default:l(()=>[b(r(i+1),1)]),_:2},1024)]),_:2},1024),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[b(r(o.name),1)]),_:2},1024)]),_:2},1024),e(F,{side:""},{default:l(()=>[e(we,{class:"text-primary"},{default:l(()=>[b(r(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",hu,[e(fe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[d[1]||(d[1]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),e(Le,{separator:""},{default:l(()=>[(c(!0),h(J,null,Fe(m.dashboardData.top_customers_topup,(o,i)=>(c(),D(oe,{key:i},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(ta,{color:"green-7","text-color":"white",size:"sm"},{default:l(()=>[b(r(i+1),1)]),_:2},1024)]),_:2},1024),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[b(r(o.name),1)]),_:2},1024)]),_:2},1024),e(F,{side:""},{default:l(()=>[e(we,{class:"text-green-7"},{default:l(()=>[b(r(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]))}},$u=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),xu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Su={class:"q-pa-xs"},Vu={class:"q-pa-none"},dl="Dashboard",qu={__name:"Index",setup(m){const s=be(),d=T({summary:{total_active_customer:s.props.data.active_customer_count,total_sales:155e5,total_transactions:1250,total_wallet_balance:s.props.data.total_customer_wallet_balance,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),o=T(!1),i=T(Me().month??"this_month"),n=T([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),g=()=>{ee.visit(route("admin.dashboard",{month:i.value}))};return(v,f)=>{const u=Z("i-head"),p=Z("authenticated-layout");return c(),h(J,null,[e(u,{title:dl}),e(p,null,He({title:l(()=>[b(r(dl))]),"right-button":l(()=>[e(U,{class:"q-ml-sm",icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:f[0]||(f[0]=y=>o.value=!o.value)},null,8,["icon"])]),default:l(()=>[t("div",Su,[t("div",Vu,[e(fo,{dashboardData:d.value},null,8,["dashboardData"])]),e(go,{dashboardData:d.value},null,8,["dashboardData"]),e(bo,{dashboardData:d.value},null,8,["dashboardData"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar"},{default:l(()=>[t("div",xu,[e(ce,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:i.value,"onUpdate:modelValue":[f[1]||(f[1]=y=>i.value=y),g],options:n.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},Cu=Object.freeze(Object.defineProperty({__proto__:null,default:qu},Symbol.toStringTag,{value:"Module"})),Tu={class:"row"},Pu={class:"row q-col-gutter-sm"},Ru={class:"col-sm-6 col-xs-12"},Ou={class:"col-sm-6 col-xs-12"},Du={class:"col-md-3 col-sm-6 col-xs-12"},Iu={class:"col-md-3 col-sm-6 col-xs-12"},Uu={class:"col-md-3 col-sm-6 col-xs-12"},Eu={class:"col-md-3 col-sm-6 col-xs-12"};const ju={__name:"SummaryCard",setup(m){const s=be(),d=(o,i)=>{const g={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...i};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(g)),ee.visit(o,{data:g})};return(o,i)=>(c(),h("div",Tu,[e(fe,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:l(()=>[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",Pu,[t("div",Ru,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[0]||(i[0]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(F,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(P,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[b(r(a(s).props.data.active_customer_count),1)]),_:1}),e(we,null,{default:l(()=>i[5]||(i[5]=[b("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",Ou,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[1]||(i[1]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(F,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(P,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[b(r(o.$page.props.data.active_user_count),1)]),_:1}),e(we,null,{default:l(()=>i[6]||(i[6]=[b("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",Du,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(F,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(P,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[b(" Rp. "+r(a(K)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(we,null,{default:l(()=>i[7]||(i[7]=[b("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",Iu,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(F,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(P,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[b(" Rp. "+r(a(K)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(we,null,{default:l(()=>i[8]||(i[8]=[b("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",Uu,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(F,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(P,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[b(" Rp. "+r(a(K)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(we,null,{default:l(()=>i[9]||(i[9]=[b("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",Eu,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(F,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(P,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(we,{class:"text-white text-weight-bold"},{default:l(()=>[b(" Rp. "+r(a(K)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(we,null,{default:l(()=>i[10]||(i[10]=[b("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},Au=Object.freeze(Object.defineProperty({__proto__:null,default:ju},Symbol.toStringTag,{value:"Module"})),Nu={class:"detail"},vo={__name:"MainInfoTab",setup(m){const s=be();return(d,o)=>(c(),h("table",Nu,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.FINANCE_ACCOUNT_TYPES[a(s).props.data.type]),1)]),a(s).props.data.type=="bank"?(c(),h(J,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(s).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},Mu=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),Bu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zu={class:"flex q-gutter-sm"},Fu={key:0},yo={__name:"HistoryTab",setup(m){const s=be(),d=xe(),o=T(null),i=T([]),n=T(!0),g=Re({...Me()}),v=et(null,117),f=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),u=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],p=X(()=>d.screen.gt.sm?u:u.filter(_=>_.name==="id"));he(()=>{y()});const y=(_=null)=>Be({pagination:f,filter:g,props:_,rows:i,url:route("admin.finance-transaction.data",{filter:{account_id:s.props.data.id}}),loading:n,tableRef:o});return(_,q)=>(c(),D(Ie,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:Ye({height:a(v)}),color:"primary",class:"full-height-table","row-key":"id",pagination:f.value,"onUpdate:pagination":q[0]||(q[0]=x=>f.value=x),filter:g.search,loading:n.value,columns:p.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({message:x,filter:w})=>[t("div",Bu,[t("span",null,r(x)+" "+r(w?" with term "+w:""),1)])]),body:l(x=>[e(Pe,{props:x},{default:l(()=>[e(W,{key:"code",props:x},{default:l(()=>[t("div",zu,[t("div",null,[a(d).screen.lt.md?(c(),D(P,{key:0,name:"tag",class:"inline-icon"})):k("",!0),b(" "+r(x.row.code),1)])]),a(d).screen.lt.md?(c(),h(J,{key:0},[t("div",null,[e(P,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(a(ge)(x.row.datetime)),1)]),x.row.creator?(c(),h("div",Fu,[e(P,{name:"person",class:"inline-icon"}),b(" "+r(x.row.creator.username),1)])):k("",!0),t("div",{class:Ce([x.row.amount>0?"text-green":"text-red","text-bold"])},[e(P,{class:"inline-icon",name:"money"}),b(" "+r(a(aa)(x.row.amount))+"Rp. "+r(a(K)(Math.abs(x.row.amount))),1)],2),t("div",null,[e(ft,{color:x.row.amount>0?"green":"red"},{default:l(()=>[b(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[x.row.type]),1)]),_:2},1032,["color"])]),e($e,{text:x.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"datetime",props:x},{default:l(()=>[b(r(a(ge)(x.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"type",props:x},{default:l(()=>[e(ft,{color:x.row.amount>0?"green":"red"},{default:l(()=>[b(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[x.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(W,{key:"amount",props:x,class:Ce(x.row.amount>0?"text-green":"text-red")},{default:l(()=>[b(r(a(aa)(x.row.amount)+a(K)(Math.abs(x.row.amount))),1)]),_:2},1032,["props","class"]),e(W,{key:"notes",props:x},{default:l(()=>[e($e,{text:x.row.notes,icon:_.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},Lu=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),Ku={class:"q-gutter-sm"},Hu={class:"q-gutter-sm"},Yu={class:"col q-pa-xs"},Wu={class:"row"},ul="Rincian Akun",Qu={__name:"Detail",setup(m){const s=be(),d=T("main");return(o,i)=>{const n=Z("i-head"),g=Z("authenticated-layout");return c(),h(J,null,[e(n,{title:ul}),e(g,null,{title:l(()=>[b(r(ul))]),"left-button":l(()=>[t("div",Ku,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":l(()=>[t("div",Hu,[o.$can("admin.finance-account.edit")?(c(),D(U,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=v=>a(ee).get(o.route("admin.finance-account.edit",{id:a(s).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Yu,[t("div",Wu,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Pt,{modelValue:d.value,"onUpdate:modelValue":i[2]||(i[2]=v=>d.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Info Akun"}),e(ot,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:d.value,"onUpdate:modelValue":i[3]||(i[3]=v=>d.value=v),animated:""},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(vo)]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(yo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Ju=Object.freeze(Object.defineProperty({__proto__:null,default:Qu},Symbol.toStringTag,{value:"Module"})),Gu={style:{"margin-left":"-10px"}},St={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(m){return(s,d)=>(c(),h("div",Gu,[e(na,{class:"full-width q-pl-none","model-value":m.modelValue,"onUpdate:modelValue":d[0]||(d[0]=o=>s.$emit("update:modelValue",o)),disable:m.disable,label:m.label},null,8,["model-value","disable","label"])]))}},Xu={class:"q-gutter-sm"},Zu={class:"col col-md-6 q-pa-xs"},em={__name:"Editor",setup(m){const s=be(),d=(s.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Qe({id:s.props.data.id,name:s.props.data.name,type:s.props.data.type,bank:s.props.data.bank,number:s.props.data.number,holder:s.props.data.holder,balance:parseFloat(s.props.data.balance),active:!!s.props.data.active,has_wallet_access:!!s.props.data.has_wallet_access,show_in_pos_payment:!!s.props.data.show_in_pos_payment,show_in_purchasing_payment:!!s.props.data.show_in_purchasing_payment,notes:s.props.data.notes}),i=tt(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),n=()=>rt({form:o,url:route("admin.finance-account.save")}),g=v=>{v==="cashier_cash"&&(o.show_in_pos_payment=!0)};return he(()=>{g(o.type)}),Ne(()=>o.type,v=>{g(v)}),(v,f)=>{const u=Z("i-head"),p=Z("authenticated-layout");return c(),h(J,null,[e(u,{title:d}),e(p,null,{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",Xu,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=y=>v.$inertia.get(v.route("admin.finance-account.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Zu,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=y=>a(o).id=y)},null,512),[[_t,a(o).id]]),e(ne,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":f[2]||(f[2]=y=>a(o).name=y),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":f[3]||(f[3]=y=>a(o).type=y),label:"Jenis Akun",options:a(i),"map-options":"","emit-value":"",error:!!a(o).errors.type,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),a(o).type=="bank"?(c(),h(J,{key:0},[e(ne,{modelValue:a(o).bank,"onUpdate:modelValue":f[4]||(f[4]=y=>a(o).bank=y),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!a(o).errors.bank,disable:a(o).processing,"error-message":a(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(o).number,"onUpdate:modelValue":f[5]||(f[5]=y=>a(o).number=y),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!a(o).errors.number,disable:a(o).processing,"error-message":a(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(o).holder,"onUpdate:modelValue":f[6]||(f[6]=y=>a(o).holder=y),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!a(o).errors.holder,disable:a(o).processing,"error-message":a(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Ee,{modelValue:a(o).balance,"onUpdate:modelValue":f[7]||(f[7]=y=>a(o).balance=y),label:"Saldo",lazyRules:"",disable:a(o).processing,"allow-negative":!0,error:!!a(o).errors.balance,errorMessage:a(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ne,{modelValue:a(o).notes,"onUpdate:modelValue":f[8]||(f[8]=y=>a(o).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(St,{modelValue:a(o).active,"onUpdate:modelValue":f[9]||(f[9]=y=>a(o).active=y),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),f[14]||(f[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(St,{modelValue:a(o).show_in_pos_payment,"onUpdate:modelValue":f[10]||(f[10]=y=>a(o).show_in_pos_payment=y),disable:a(o).processing||a(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(St,{modelValue:a(o).show_in_purchasing_payment,"onUpdate:modelValue":f[11]||(f[11]=y=>a(o).show_in_purchasing_payment=y),disable:a(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(St,{modelValue:a(o).has_wallet_access,"onUpdate:modelValue":f[12]||(f[12]=y=>a(o).has_wallet_access=y),disable:a(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:f[13]||(f[13]=y=>a(ee).get(v.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},tm=Object.freeze(Object.defineProperty({__proto__:null,default:em},Symbol.toStringTag,{value:"Module"})),am={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},lm={class:"q-pa-xs"},om={class:"q-my-sm text-subtitle"},nm={class:"text-bold text-grey-8"},sm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},rm={class:"text-bold text-grey-9"},im={class:"text-grey-9"},dm={key:0},um={key:1},mm={key:0},cm={class:"flex justify-end"},ml="Akun Kas",pm={__name:"Index",setup(m){const s=be(),d=xe(),o=T(!1),i=T([]),n=T(null),g=T(null),v=et(g,117),f=T(!0),u=Re({search:"",status:"active",type:"all",...Me()}),p=s.props.totalBalance,y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],q=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],x=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];he(()=>{M()});const w=j=>st({message:`Hapus Akun ${j.name}?`,url:route("admin.finance-account.delete",j.id),fetchItemsCallback:M,loading:f}),M=(j=null)=>{Be({pagination:y,filter:u,props:j,rows:i,url:route("admin.finance-account.data"),loading:f,tableRef:n})},Y=()=>M(),C=j=>ee.get(route("admin.finance-account.detail",{id:j.id})),{protectClick:B}=Ut(),O=B(C),z=X(()=>d.screen.gt.sm?_:_.filter(j=>j.name==="name"||j.name==="action"));return(j,V)=>{const I=Z("i-head"),R=Z("authenticated-layout");return c(),h(J,null,[e(I,{title:ml}),e(R,null,He({title:l(()=>[b(r(ml))]),"right-button":l(()=>[e(U,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:V[0]||(V[0]=$=>o.value=!o.value)},null,8,["icon"]),j.$can("admin.finance-account.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:V[1]||(V[1]=$=>a(ee).get(j.route("admin.finance-account.add")))})):k("",!0)]),default:l(()=>[t("div",lm,[e(fe,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:l(()=>[t("div",om,[V[7]||(V[7]=b(" Total Saldo Akun Aktif: ")),t("span",nm,"Rp. "+r(a(K)(a(p))),1)])]),_:1}),e(Ie,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Ye({height:a(v)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":V[6]||(V[6]=$=>y.value=$),filter:u.search,loading:f.value,columns:z.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:M,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:$,message:E,filter:N})=>[t("div",sm,[t("span",null,r(E)+" "+r(N?" with term "+N:""),1)])]),body:l($=>[e(Pe,{props:$,class:Ce([$.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(E=>a(O)($.row,E),["stop"])},{default:l(()=>[e(W,{key:"name",props:$,class:"wrap-column"},{default:l(()=>[t("div",rm,r($.row.name),1),t("div",im,[$.row.type=="bank"?(c(),h("div",dm,[e(P,{name:"wallet",class:"inline-icon"}),b(" Rekening "+r($.row.bank??"-")+" "+r($.row.number??"-")+" a.n. "+r($.row.holder??"-"),1)])):k("",!0),$.row.notes?(c(),h("div",um,[e(P,{name:"notes"}),b(" "+r($.row.notes),1)])):k("",!0)]),a(d).screen.lt.md?(c(),h("div",mm,[e(P,{name:"money",class:"inline-icon"}),b(" Rp. "+r(a(K)($.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"type",props:$},{default:l(()=>[b(r(j.$CONSTANTS.FINANCE_ACCOUNT_TYPES[$.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:$},{default:l(()=>[b(r(a(K)($.row.balance)),1)]),_:2},1032,["props"]),e(W,{key:"action",props:$},{default:l(()=>[t("div",cm,[j.$can("admin.finance-account.add")||j.$can("admin.finance-account.edit")||j.$can("admin.finance-account.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:V[5]||(V[5]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[j.$can("admin.finance-account.add")?te((c(),D(oe,{key:0,clickable:"",onClick:G(E=>a(ee).get(j.route("admin.finance-account.duplicate",$.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>V[8]||(V[8]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),j.$can("admin.finance-account.edit")?te((c(),D(oe,{key:1,clickable:"",onClick:G(E=>a(ee).get(j.route("admin.finance-account.edit",$.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>V[9]||(V[9]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),j.$can("admin.finance-account.delete")?te((c(),D(oe,{key:2,onClick:G(E=>w($.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>V[10]||(V[10]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",am,[e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:u.type,"onUpdate:modelValue":[V[2]||(V[2]=$=>u.type=$),Y],options:x,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[V[3]||(V[3]=$=>u.status=$),Y],options:q,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":V[4]||(V[4]=$=>u.search=$),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fm=Object.freeze(Object.defineProperty({__proto__:null,default:pm},Symbol.toStringTag,{value:"Module"})),gm={class:"q-gutter-sm"},bm={class:"col col-md-6 q-pa-xs"},vm={class:"row"},ym={class:"detail"},_m={key:0},km={key:1},wm={key:2},hm={key:3},$m={colspan:"3",class:"bg-white"},cl="Rincian Transaksi",xm={__name:"Detail",setup(m){const s=be();return(d,o)=>{const i=Z("i-head"),n=Z("i-link"),g=Z("authenticated-layout");return c(),h(J,null,[e(i,{title:cl}),e(g,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",gm,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.finance-transaction.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(cl))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",bm,[t("div",vm,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",ym,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.datetime)),1)]),a(s).props.data.account?(c(),h("tr",_m,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[e(n,{href:d.route("admin.finance-account.detail",a(s).props.data.account.id)},{default:l(()=>[b(r(a(s).props.data.account.name),1)]),_:1},8,["href"]),a(s).props.data.account.type==="bank"?(c(),h(J,{key:0},[b(" Rek "+r(a(s).props.data.account.bank)+" an "+r(a(s).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),b(" "+r(a(s).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),a(s).props.data.type?(c(),h("tr",km,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.FINANCE_TRANSACTION_TYPES[a(s).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(la)(a(s).props.data.amount)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(c(),h("tr",wm,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(c(),h("tr",hm,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(c(),h(J,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",$m,[e(sa,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:Ye([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Sm=Object.freeze(Object.defineProperty({__proto__:null,default:xm},Symbol.toStringTag,{value:"Module"})),Vm={class:"q-gutter-sm"},qm={class:"col col-md-6 q-pa-xs"},Cm={__name:"Editor",setup(m){var v;const s=be(),d=(s.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=s.props.accounts.map(f=>({label:f.name,value:f.id})),i=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],n=Qe({id:s.props.data.id,account_id:s.props.data.account_id,to_account_id:s.props.data.to_account_id??null,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((v=s.props.data)==null?void 0:v.image_path)??"",image:null}),g=()=>{ra(n,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:n,url:route("admin.finance-transaction.save")})};return(f,u)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),h(J,null,[e(p,{title:d}),e(y,null,{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",Vm,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=_=>f.$inertia.get(f.route("admin.finance-transaction.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",qm,[e(Je,{class:"row",onSubmit:G(g,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":u[1]||(u[1]=_=>a(n).id=_)},null,512),[[_t,a(n).id]]),e(Ft,{modelValue:a(n).datetime,"onUpdate:modelValue":u[2]||(u[2]=_=>a(n).datetime=_),label:"Waktu",error:!!a(n).errors.datetime,disable:a(n).processing,errorMessage:a(n).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{autofocus:"",modelValue:a(n).type,"onUpdate:modelValue":u[3]||(u[3]=_=>a(n).type=_),label:"Jenis Transaksi",options:i,"map-options":"","emit-value":"",error:!!a(n).errors.type,disable:a(n).processing,errorMessage:a(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{class:"custom-select",modelValue:a(n).account_id,"onUpdate:modelValue":u[4]||(u[4]=_=>a(n).account_id=_),label:a(n).type=="transfer"?"Akun Asal":"Akun",options:a(o),"map-options":"","emit-value":"",errorMessage:a(n).errors.account_id,error:!!a(n).errors.account_id,disable:a(n).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),a(n).type=="transfer"?(c(),D(ce,{key:0,class:"custom-select",modelValue:a(n).to_account_id,"onUpdate:modelValue":u[5]||(u[5]=_=>a(n).to_account_id=_),label:"Akun Tujuan",options:a(o),"map-options":"","emit-value":"",errorMessage:a(n).errors.to_account_id,error:!!a(n).errors.to_account_id,disable:a(n).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Ee,{modelValue:a(n).amount,"onUpdate:modelValue":u[6]||(u[6]=_=>a(n).amount=_),label:"Jumlah",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.amount,errorMessage:a(n).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ne,{modelValue:a(n).notes,"onUpdate:modelValue":u[7]||(u[7]=_=>a(n).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(n).processing,error:!!a(n).errors.notes,"error-message":a(n).errors.notes,rules:[_=>_&&_.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Da,{modelValue:a(n).image,"onUpdate:modelValue":u[8]||(u[8]=_=>a(n).image=_),"initial-image-path":a(n).image_path,disabled:a(n).processing,error:!!a(n).errors.image||!!a(n).errors.image_path,"error-message":a(n).errors.image||a(n).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(n).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:u[9]||(u[9]=_=>a(ee).get(f.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Tm=Object.freeze(Object.defineProperty({__proto__:null,default:Cm},Symbol.toStringTag,{value:"Module"})),Pm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Rm={class:"q-pa-xs"},Om={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Dm={class:"text-grey-8"},Im={class:"text-bold text-grey-8"},Um={class:"flex justify-end no-wrap"},pl="Transaksi Kas",Em={__name:"Index",setup(m){const s=be(),d=xe(),o=T(!1),i=T([]),n=T(!0),g=T(null),v=T(null),f=et(v),u=Bt(),p=zt(),y=[{label:"Semua",value:"all"},...s.props.accounts.map(R=>({label:R.name,value:R.id}))],_=[{label:"Semua Tahun",value:"all"},{label:`${u}`,value:u},...Ct(u-2,u-1).reverse()],q=[{value:"all",label:"Semua Bulan"},...Tt()],x=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],w=Re({search:"",type:"all",account_id:"all",year:u,month:p,...Me()}),M=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"id",label:d.screen.lt.md?"Item":"Kode",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{B()});const C=R=>st({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${R.code}?`,url:route("admin.finance-transaction.delete",R.id),fetchItemsCallback:B,loading:n}),B=(R=null)=>{Be({pagination:M,filter:w,props:R,rows:i,url:route("admin.finance-transaction.data"),loading:n,tableRef:g})},O=()=>{B()},z=X(()=>d.screen.gt.sm?Y:Y.filter(R=>R.name==="id"||R.name==="action"));Ne(()=>w.year,R=>{R===null&&(w.month=null)});const j=T(null),V=T(!1),I=R=>{j.value=R,V.value=!0};return(R,$)=>{const E=Z("i-head"),N=Z("authenticated-layout");return c(),h(J,null,[e(E,{title:pl}),e(N,null,He({title:l(()=>[b(r(pl))]),"right-button":l(()=>[e(U,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=S=>o.value=!o.value)},null,8,["icon"]),R.$can("admin.finance-transaction.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=S=>a(ee).get(R.route("admin.finance-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",Rm,[e(Ie,{ref_key:"tableRef",ref:g,style:Ye({height:a(f)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:M.value,"onUpdate:pagination":$[8]||($[8]=S=>M.value=S),filter:w.search,loading:n.value,columns:z.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:B,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:A,filter:le})=>[t("div",Om,[t("span",null,r(A)+" "+r(le?" with term "+le:""),1)])]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:G(A=>a(ee).get(R.route("admin.finance-transaction.detail",{id:S.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:S},{default:l(()=>[t("div",null,[a(d).screen.lt.md?(c(),D(P,{key:0,class:"inline-icon",name:"tag"})):k("",!0),b(" "+r(S.row.code),1)]),a(d).screen.lt.md?(c(),h(J,{key:0},[t("div",Dm,[e(P,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(a(ge)(S.row.datetime)),1)]),t("div",Im,[e(P,{name:"wallet",class:"inline-icon"}),b(" "+r(S.row.account.name),1)]),t("div",{class:Ce(["text-bold",S.row.amount<0?"text-red":"text-green"])},[e(P,{name:"money",class:"inline-icon"}),b(" "+r(a(aa)(S.row.amount)+"Rp."+a(K)(Math.abs(S.row.amount))),1)],2),S.row.notes?(c(),D($e,{key:0,icon:"notes",text:S.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(ft,{color:S.row.amount>0?"green":"red"},{default:l(()=>[b(r(S.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"datetime",props:S,class:"wrap-column"},{default:l(()=>[b(r(a(ge)(S.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"account",props:S},{default:l(()=>{var A;return[b(r((A=S.row.account)==null?void 0:A.name),1)]}),_:2},1032,["props"]),e(W,{key:"type",props:S},{default:l(()=>[b(r(R.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"amount",props:S,style:{"text-align":"right"}},{default:l(()=>[b(r(a(ia)(S.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:S,class:"wrap-column"},{default:l(()=>[b(r(S.row.notes),1)]),_:2},1032,["props"]),e(W,{key:"action",props:S},{default:l(()=>[t("div",Um,[e(U,{icon:"image",color:"primary",dense:"",flat:"",disable:S.row.image_path===null||S.row.image_path==="",onClick:G(A=>I(S.row.image_path),["stop"])},{default:l(()=>[S.row.image_path!=null?(c(),D(ea,{key:0},{default:l(()=>$[10]||($[10]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),R.$can("admin.finance-transaction.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[7]||($[7]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[R.$can("admin.finance-transaction.delete")?te((c(),D(oe,{key:0,onClick:G(A=>C(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>$[11]||($[11]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ga,{modelValue:V.value,"onUpdate:modelValue":$[9]||($[9]=S=>V.value=S),imageUrl:`/${j.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Pm,[e(ce,{modelValue:w.year,"onUpdate:modelValue":[$[2]||($[2]=S=>w.year=S),O],options:_,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(c(),D(ce,{key:0,modelValue:w.month,"onUpdate:modelValue":[$[3]||($[3]=S=>w.month=S),O],options:q,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:w.type,"onUpdate:modelValue":[$[4]||($[4]=S=>w.type=S),O],options:x,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:w.account_id,"onUpdate:modelValue":[$[5]||($[5]=S=>w.account_id=S),O],label:"Akun",options:y,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":$[6]||($[6]=S=>w.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},jm=Object.freeze(Object.defineProperty({__proto__:null,default:Em},Symbol.toStringTag,{value:"Module"})),Am={class:"q-gutter-sm"},Nm={class:"col col-md-6 q-pa-xs"},Mm={__name:"Editor",setup(m){const s=be(),d=(s.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description}),i=()=>rt({form:o,url:route("admin.operational-cost-category.save")});return(n,g)=>{const v=Z("i-head"),f=Z("authenticated-layout");return c(),h(J,null,[e(v,{title:d}),e(f,null,{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",Am,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=u=>n.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Nm,[e(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=u=>a(o).id=u)},null,512),[[_t,a(o).id]]),e(ne,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":g[2]||(g[2]=u=>a(o).name=u),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[u=>u&&u.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).description,"onUpdate:modelValue":g[3]||(g[3]=u=>a(o).description=u),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:g[4]||(g[4]=u=>a(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Bm=Object.freeze(Object.defineProperty({__proto__:null,default:Mm},Symbol.toStringTag,{value:"Module"})),zm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Fm={class:"q-pa-xs"},Lm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Km={key:0,class:"text-grey-8"},Hm={class:"flex justify-end"},fl="Kategori Biaya Operasional",Ym={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Re({search:"",...Me()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{_()});const y=x=>st({message:`Hapus Kategori Biaya ${x.name}?`,url:route("admin.operational-cost-category.delete",x.id),fetchItemsCallback:_,loading:i}),_=(x=null)=>{Be({pagination:u,filter:f,props:x,rows:o,url:route("admin.operational-cost-category.data"),loading:i,tableRef:n})},q=X(()=>s.screen.gt.sm?p:p.filter(x=>x.name==="name"||x.name==="action"));return(x,w)=>{const M=Z("i-head"),Y=Z("authenticated-layout");return c(),h(J,null,[e(M,{title:fl}),e(Y,null,He({title:l(()=>[b(r(fl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=C=>d.value=!d.value)},null,8,["icon"]),x.$can("admin.operational-cost-category.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=C=>a(ee).get(x.route("admin.operational-cost-category.add")))})):k("",!0)]),default:l(()=>[t("div",Fm,[e(Ie,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Ye({height:a(v)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":w[4]||(w[4]=C=>u.value=C),filter:f.search,loading:i.value,columns:q.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:C,message:B,filter:O})=>[t("div",Lm,[t("span",null,r(B)+" "+r(O?" with term "+O:""),1)])]),body:l(C=>[e(Pe,{props:C},{default:l(()=>[e(W,{key:"name",props:C,class:"wrap-column"},{default:l(()=>[b(r(C.row.name)+" ",1),a(s).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[C.row.description?(c(),h("div",Km,[e(P,{name:"description"}),b(" "+r(C.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"description",props:C,class:"wrap-column"},{default:l(()=>[b(r(C.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:C},{default:l(()=>[t("div",Hm,[x.$can("admin.operational-cost-category.add")||x.$can("admin.operational-cost-category.edit")||x.$can("admin.operational-cost-category.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[3]||(w[3]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[x.$can("admin.operational-cost-category.add")?te((c(),D(oe,{key:0,clickable:"",onClick:G(B=>a(ee).get(x.route("admin.operational-cost-category.duplicate",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>w[5]||(w[5]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),x.$can("admin.operational-cost-category.edit")?te((c(),D(oe,{key:1,clickable:"",onClick:G(B=>a(ee).get(x.route("admin.operational-cost-category.edit",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>w[6]||(w[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),x.$can("admin.operational-cost-category.delete")?te((c(),D(oe,{key:2,onClick:G(B=>y(C.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>w[7]||(w[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",zm,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":w[2]||(w[2]=C=>f.search=C),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wm=Object.freeze(Object.defineProperty({__proto__:null,default:Ym},Symbol.toStringTag,{value:"Module"})),Qm={class:"q-gutter-sm"},Jm={class:"col col-md-6 q-pa-xs"},Gm={class:"row"},Xm={class:"detail"},Zm={key:0},ec={key:1},tc={key:2},ac={key:3},lc={colspan:"3",class:"bg-white"},gl="Rincian Biaya Operasional",oc={__name:"Detail",setup(m){const s=be();return(d,o)=>{const i=Z("i-head"),n=Z("i-link"),g=Z("authenticated-layout");return c(),h(J,null,[e(i,{title:gl}),e(g,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Qm,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.operational-cost.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(gl))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Jm,[t("div",Gm,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[o[22]||(o[22]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",Xm,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(oa)(a(s).props.data.date)),1)]),a(s).props.data.finance_account?(c(),h("tr",Zm,[o[7]||(o[7]=t("td",null,"Akun",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,[e(n,{href:d.route("admin.finance-account.detail",a(s).props.data.finance_account.id)},{default:l(()=>[b(r(a(s).props.data.finance_account.name),1)]),_:1},8,["href"]),a(s).props.data.finance_account.type==="bank"?(c(),h(J,{key:0},[o[5]||(o[5]=t("br",null,null,-1)),b(" Rek "+r(a(s).props.data.finance_account.bank)+" an "+r(a(s).props.data.finance_account.holder)+" ",1),o[6]||(o[6]=t("br",null,null,-1)),b(" "+r(a(s).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),a(s).props.data.category?(c(),h("tr",ec,[o[9]||(o[9]=t("td",null,"Kategori",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.category.name),1)])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Deskripsi",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.description),1)]),t("tr",null,[o[13]||(o[13]=t("td",null,"Jumlah",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(s).props.data.amount)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Catatan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(c(),h("tr",tc,[o[17]||(o[17]=t("td",null,"Dibuat",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(c(),h("tr",ac,[o[19]||(o[19]=t("td",null,"Diperbarui",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(c(),h(J,{key:4},[o[21]||(o[21]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",lc,[e(sa,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:Ye([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},nc=Object.freeze(Object.defineProperty({__proto__:null,default:oc},Symbol.toStringTag,{value:"Module"})),sc={class:"row items-center justify-end"},rc={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(m,{emit:s}){const d=m,o=s,i=T(""),n=T(""),g=u=>{let p=!0;const y=d.minDate?dt.formatDate(d.minDate,"YYYY/MM/DD"):null,_=d.maxDate?dt.formatDate(d.maxDate,"YYYY/MM/DD"):null;return y&&(p=p&&dt.isBetweenDates(u,y,"2999/01/01",{inclusiveFrom:!0})),_&&(p=p&&dt.isBetweenDates(u,"1900/01/01",_,{inclusiveTo:!0})),p},v=X(()=>[u=>!!u||"Tanggal harus diisi",u=>{const p=dt.extractDate(u,d.displayFormat);if(!p)return"Format tanggal tidak valid";p.setHours(0,0,0,0);const y=d.minDate?new Date(d.minDate):null;y&&y.setHours(0,0,0,0);const _=d.maxDate?new Date(d.maxDate):null;return _&&_.setHours(0,0,0,0),y&&p<y?`Tanggal tidak boleh kurang dari ${dt.formatDate(d.minDate,d.displayFormat)}`:_&&p>_?`Tanggal tidak boleh lebih dari ${dt.formatDate(d.maxDate,d.displayFormat)}`:(o("update:modelValue",p),!0)}]);Ne(()=>d.modelValue,u=>{u instanceof Date?(n.value=dt.formatDate(u,"YYYY/MM/DD"),i.value=dt.formatDate(u,d.displayFormat)):(n.value="",i.value="")},{immediate:!0});const f=u=>{const p=u!==null?new Date(u):null;o("update:modelValue",p),i.value=p?dt.formatDate(p,d.displayFormat):null};return(u,p)=>(c(),D(ne,{modelValue:i.value,"onUpdate:modelValue":p[1]||(p[1]=y=>i.value=y),label:d.label,readonly:d.readonly,disable:d.disable,error:d.error,"error-message":d.errorMessage,mask:d.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:v.value},{append:l(()=>[e(U,{icon:"event",disable:d.disable||d.readonly,flat:"",rounded:"",dense:""},{default:l(()=>[e(Yn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Wn,{modelValue:n.value,"onUpdate:modelValue":[p[0]||(p[0]=y=>n.value=y),f],options:g},{default:l(()=>[t("div",sc,[te(e(U,{label:"Close",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},da=wt(rc,[["__scopeId","data-v-b418ccfb"]]);function _o(m,s=!1){const d=m.map(g=>({value:g.id,label:g.name})),o=s?[{value:"all",label:"Semua"},...d]:d,i=T([...o]);return{filteredCostCategories:i,filterCostCategory:(g,v)=>{const f=g.toLowerCase();v(()=>{i.value=o.filter(u=>u.label.toLowerCase().includes(f))})},costCategoryOptions:o}}const ic={class:"q-gutter-sm"},dc={class:"col col-md-6 q-pa-xs"},uc={__name:"Editor",setup(m){var y;const s=be(),d=(s.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=_o(s.props.categories),i=s.props.finance_accounts.map(_=>({label:_.name,value:_.id})),n=T(o),g=T([...n.value]),v=Qe({id:s.props.data.id,finance_account_id:s.props.data.finance_account_id??null,category_id:s.props.data.category_id??null,date:new Date(s.props.data.date),description:s.props.data.description,notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((y=s.props.data)==null?void 0:y.image_path)??null,image:null}),f=()=>{ra(v,{date:"YYYY-MM-DD"}),rt({form:v,url:route("admin.operational-cost.save")})},u=(_,q)=>{q(()=>{g.value=n.value.filter(x=>x.label.toLowerCase().includes(_.toLowerCase()))})},p=()=>{v.image_path=null};return(_,q)=>{const x=Z("i-head"),w=Z("authenticated-layout");return c(),h(J,null,[e(x,{title:d}),e(w,null,{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",ic,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:q[0]||(q[0]=M=>_.$inertia.get(_.route("admin.operational-cost.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",dc,[e(Je,{class:"row",onSubmit:G(f,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":q[1]||(q[1]=M=>a(v).id=M)},null,512),[[_t,a(v).id]]),e(ce,{autofocus:"",modelValue:a(v).category_id,"onUpdate:modelValue":q[2]||(q[2]=M=>a(v).category_id=M),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:g.value,"map-options":"","emit-value":"",onFilter:u,error:!!a(v).errors.category_id,disable:a(v).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,null,{default:l(()=>q[10]||(q[10]=[b("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(da,{modelValue:a(v).date,"onUpdate:modelValue":q[3]||(q[3]=M=>a(v).date=M),label:"Tanggal",error:!!a(v).errors.date,disable:a(v).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ne,{modelValue:a(v).description,"onUpdate:modelValue":q[4]||(q[4]=M=>a(v).description=M),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!a(v).errors.description,disable:a(v).processing,"error-message":a(v).errors.description,rules:[M=>M&&M.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Ee,{modelValue:a(v).amount,"onUpdate:modelValue":q[5]||(q[5]=M=>a(v).amount=M),label:"Jumlah",lazyRules:"",disable:a(v).processing,error:!!a(v).errors.amount,errorMessage:a(v).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ce,{class:"custom-select",modelValue:a(v).finance_account_id,"onUpdate:modelValue":q[6]||(q[6]=M=>a(v).finance_account_id=M),label:"Sumber Dana",options:a(i),"map-options":"","emit-value":"",clearable:"",errorMessage:a(v).errors.finance_account_id,error:!!a(v).errors.finance_account_id,disable:a(v).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(ne,{modelValue:a(v).notes,"onUpdate:modelValue":q[7]||(q[7]=M=>a(v).notes=M),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(v).processing,error:!!a(v).errors.notes,"error-message":a(v).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Da,{modelValue:a(v).image,"onUpdate:modelValue":q[8]||(q[8]=M=>a(v).image=M),"initial-image-path":a(v).image_path,disabled:a(v).processing,error:!!a(v).errors.image||!!a(v).errors.image_path,"error-message":a(v).errors.image||a(v).errors.image_path,onImageCleared:p},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(v).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(v).processing,onClick:q[9]||(q[9]=M=>a(ee).get(_.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},mc=Object.freeze(Object.defineProperty({__proto__:null,default:uc},Symbol.toStringTag,{value:"Module"})),cc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},pc={class:"q-pa-xs"},fc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},gc={key:0},bc={key:1},vc={key:0},yc={class:"flex justify-end no-wrap"},bl="Biaya Operasional",_c={__name:"Index",setup(m){const s=be(),d=xe(),o=T(!1),i=T(null),n=T(null),g=et(n),v=T(null),f=T(!1),u=T([]),p=T(!0),y=new Date().getFullYear(),_=new Date().getMonth()+1,q=[{label:"Semua Tahun",value:null},{label:`${y}`,value:y},...Ct(y-2,y-1).reverse()],x=[{value:null,label:"Semua Bulan"},...Tt()],{costCategoryOptions:w}=_o(s.props.categories),M=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...w],{accountOptions:Y}=Qn(s.props.finance_accounts),C=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...Y],B=Re({search:"",finance_account_id:"all",category_id:"all",year:y,month:_,...Me()}),O=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),z=[{name:"code",label:d.screen.lt.md?"Item":"Kode",field:"code",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{V()});const j=E=>st({message:`Hapus Biaya ${E.code}?`,url:route("admin.operational-cost.delete",E.id),fetchItemsCallback:V,loading:p}),V=(E=null)=>{Be({pagination:O,filter:B,props:E,rows:u,url:route("admin.operational-cost.data"),loading:p,tableRef:i})},I=()=>{V()},R=X(()=>d.screen.gt.sm?z:z.filter(E=>E.name==="code"||E.name==="action"));Ne(()=>B.year,E=>{E===null&&(B.month=null)});const $=E=>{v.value=E,f.value=!0};return(E,N)=>{const S=Z("i-head"),A=Z("authenticated-layout");return c(),h(J,null,[e(S,{title:bl}),e(A,null,He({title:l(()=>[b(r(bl))]),"right-button":l(()=>[e(U,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:N[0]||(N[0]=le=>o.value=!o.value)},null,8,["icon"]),E.$can("admin.operational-cost.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:N[1]||(N[1]=le=>a(ee).get(E.route("admin.operational-cost.add")))})):k("",!0)]),default:l(()=>[t("div",pc,[e(Ie,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:O.value,"onUpdate:pagination":N[8]||(N[8]=le=>O.value=le),filter:B.search,loading:p.value,columns:R.value,rows:u.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(g)}),onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:le,message:re,filter:me})=>[t("div",fc,[t("span",null,r(re)+" "+r(me?" with term "+me:""),1)])]),body:l(le=>[e(Pe,{props:le,class:"cursor-pointer",onClick:G(re=>a(ee).get(E.route("admin.operational-cost.detail",{id:le.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:le,class:"wrap-column"},{default:l(()=>[a(d).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[b(" Kode: ")],64)),b(" "+r(le.row.code)+" ",1),a(d).screen.gt.sm?k("",!0):(c(),h(J,{key:1},[t("div",null,[e(P,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(a(oa)(le.row.date)),1)]),le.row.finance_account?(c(),h("div",gc,[e(P,{name:"wallet",class:"inline-icon"}),b(" "+r(le.row.finance_account.name),1)])):k("",!0),le.row.category?(c(),h("div",bc,[e(P,{name:"category",class:"inline-icon"}),b(" "+r(le.row.category.name),1)])):k("",!0),e($e,{icon:"description",text:le.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(P,{name:"money",class:"inline-icon"}),b(" Rp. "+r(a(K)(le.row.amount)),1)]),e($e,{icon:"notes",text:le.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(W,{key:"date",props:le,class:"wrap-column"},{default:l(()=>[b(r(a(oa)(le.row.date)),1)]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:le,class:"wrap-column"},{default:l(()=>[b(r(le.row.finance_account?le.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(W,{key:"category_id",props:le},{default:l(()=>[le.row.category?(c(),h("div",vc,r(le.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"description",props:le},{default:l(()=>[e($e,{text:le.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"amount",props:le},{default:l(()=>[b(r(a(K)(le.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:le},{default:l(()=>[e($e,{text:le.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:le},{default:l(()=>[t("div",yc,[e(U,{icon:"image",color:"primary",dense:"",flat:"",disable:le.row.image_path===null||le.row.image_path==="",onClick:G(re=>$(le.row.image_path),["stop"])},{default:l(()=>[le.row.image_path!=null?(c(),D(ea,{key:0},{default:l(()=>N[10]||(N[10]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),E.$can("admin.operational-cost.add")||E.$can("admin.operational-cost.edit")||E.$can("admin.operational-cost.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:N[7]||(N[7]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[E.$can("admin.operational-cost.add")?te((c(),D(oe,{key:0,clickable:"",onClick:G(re=>a(ee).get(E.route("admin.operational-cost.duplicate",le.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>N[11]||(N[11]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),E.$can("admin.operational-cost.edit")?te((c(),D(oe,{key:1,clickable:"",onClick:G(re=>a(ee).get(E.route("admin.operational-cost.edit",le.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>N[12]||(N[12]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),E.$can("admin.operational-cost.delete")?te((c(),D(oe,{key:2,onClick:G(re=>j(le.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>N[13]||(N[13]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(ga,{modelValue:f.value,"onUpdate:modelValue":N[9]||(N[9]=le=>f.value=le),imageUrl:`/${v.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:l(()=>[t("div",cc,[e(ce,{modelValue:B.year,"onUpdate:modelValue":[N[2]||(N[2]=le=>B.year=le),I],options:q,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:B.month,"onUpdate:modelValue":[N[3]||(N[3]=le=>B.month=le),I],options:x,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:B.year===null},null,8,["modelValue","disable"]),e(ce,{modelValue:B.category_id,"onUpdate:modelValue":[N[4]||(N[4]=le=>B.category_id=le),I],options:M,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:B.finance_account_id,"onUpdate:modelValue":[N[5]||(N[5]=le=>B.finance_account_id=le),I],options:C,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:B.search,"onUpdate:modelValue":N[6]||(N[6]=le=>B.search=le),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},kc=Object.freeze(Object.defineProperty({__proto__:null,default:_c},Symbol.toStringTag,{value:"Module"})),wc={class:"q-gutter-sm"},hc={class:"col col-md-6 q-pa-xs"},$c={__name:"Editor",setup(m){const s=xe(),d=be(),o=(d.props.data.id?"Edit":"Tambah")+" Kategori Produk",i=Qe({id:d.props.data.id,name:d.props.data.name,description:d.props.data.description}),n=()=>rt({form:i,url:route("admin.product-category.save")});return(g,v)=>{const f=Z("i-head"),u=Z("authenticated-layout");return c(),h(J,null,[e(f,{title:o}),e(u,{"show-drawer-button":!a(s).screen.lt.md},He({title:l(()=>[b(r(o))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",hc,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=p=>a(i).id=p)},null,512),[[_t,a(i).id]]),e(ne,{autofocus:"",modelValue:a(i).name,"onUpdate:modelValue":v[2]||(v[2]=p=>a(i).name=p),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(i).errors.name,disable:a(i).processing,"error-message":a(i).errors.name,rules:[p=>p&&p.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(i).description,"onUpdate:modelValue":v[3]||(v[3]=p=>a(i).description=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.description,"error-message":a(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"]),e(U,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:v[4]||(v[4]=p=>a(i).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(s).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",wc,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=p=>g.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},xc=Object.freeze(Object.defineProperty({__proto__:null,default:$c},Symbol.toStringTag,{value:"Module"})),Sc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Vc={class:"q-pa-xs"},qc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Cc={key:0,class:"text-grey-8"},Tc={class:"flex justify-end"},vl="Kategori Produk",Pc={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Re({search:"",...Me()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{_()});const y=x=>st({message:`Hapus Kategori ${x.name}?`,url:route("admin.product-category.delete",x.id),fetchItemsCallback:_,loading:i}),_=(x=null)=>{Be({pagination:u,filter:f,props:x,rows:o,url:route("admin.product-category.data"),loading:i,tableRef:n})},q=X(()=>s.screen.gt.sm?p:p.filter(x=>x.name==="name"||x.name==="action"));return(x,w)=>{const M=Z("i-head"),Y=Z("authenticated-layout");return c(),h(J,null,[e(M,{title:vl}),e(Y,null,He({title:l(()=>[b(r(vl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=C=>d.value=!d.value)},null,8,["icon"]),x.$can("admin.product-category.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=C=>a(ee).get(x.route("admin.product-category.add")))})):k("",!0)]),default:l(()=>[t("div",Vc,[e(Ie,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":w[4]||(w[4]=C=>u.value=C),filter:f.search,loading:i.value,columns:q.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(v)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:C,message:B,filter:O})=>[t("div",qc,[t("span",null,r(B)+" "+r(O?" with term "+O:""),1)])]),body:l(C=>[e(Pe,{props:C},{default:l(()=>[e(W,{key:"name",props:C,class:"wrap-column"},{default:l(()=>[b(r(C.row.name)+" ",1),a(s).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[C.row.description?(c(),h("div",Cc,[e(P,{name:"description"}),b(" "+r(C.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"description",props:C,class:"wrap-column"},{default:l(()=>[b(r(C.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:C},{default:l(()=>[t("div",Tc,[x.$can("admin.product-category.add")||x.$can("admin.product-category.edit")||x.$can("admin.product-category.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[3]||(w[3]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[x.$can("admin.product-category.add")?te((c(),D(oe,{key:0,clickable:"",onClick:G(B=>a(ee).get(x.route("admin.product-category.duplicate",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>w[5]||(w[5]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),x.$can("admin.product-category.edit")?te((c(),D(oe,{key:1,clickable:"",onClick:G(B=>a(ee).get(x.route("admin.product-category.edit",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>w[6]||(w[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),x.$can("admin.product-category.delete")?te((c(),D(oe,{key:2,onClick:G(B=>y(C.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>w[7]||(w[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Sc,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":w[2]||(w[2]=C=>f.search=C),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Rc=Object.freeze(Object.defineProperty({__proto__:null,default:Pc},Symbol.toStringTag,{value:"Module"})),Oc={class:"detail"},Dc={key:0},Ic={key:1},Uc={key:2},Ec={class:"detail"},jc={class:"detail"},Ac={key:0},Nc={key:0},Mc={key:0},Bc={key:0},zc={class:"detail"},Fc={key:0,class:"q-pt-md"},ko={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(m){const s=m;xe();const d=i=>`${i>0?K((i-s.product.cost)/s.product.cost*100,2):0}%`,o=()=>{st({message:`Hapus Produk ${s.product.name}?`,url:route("admin.product.delete",s.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(i,n)=>{const g=Z("i-link");return c(),h("div",null,[n[41]||(n[41]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",Oc,[t("tbody",null,[t("tr",null,[n[1]||(n[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),n[2]||(n[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.product.name),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"Deskirpsi",-1)),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,r(m.product.description),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Barcode",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(m.product.barcode),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Jenis Produk",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.PRODUCT_TYPES[m.product.type]),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Kategori",-1)),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,r(m.product.category?m.product.category.name:"--Tidak memiliki kategori--"),1)]),i.$can("admin.product:view-supplier")?(c(),h("tr",Dc,[n[11]||(n[11]=t("td",null,"Supplier",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[m.product.supplier?(c(),D(g,{key:0,href:i.route("admin.supplier.detail",{id:m.product.supplier.id})},{default:l(()=>[b(r(m.product.supplier.name),1)]),_:1},8,["href"])):(c(),h(J,{key:1},[b(r("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[n[13]||(n[13]=t("td",null,"Status",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,r(m.product.active?"Aktif":"Tidak Aktif"),1)]),m.product.created_at?(c(),h("tr",Ic,[n[16]||(n[16]=t("td",null,"Dibuat Oleh",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[m.product.creator?(c(),h(J,{key:0},[e(g,{href:i.route("admin.user.detail",{id:m.product.creator})},{default:l(()=>[b(r(m.product.creator.username),1)]),_:1},8,["href"]),n[15]||(n[15]=b(" - "))],64)):k("",!0),b(" "+r(a(ge)(m.product.created_at)),1)])])):k("",!0),m.product.updater?(c(),h("tr",Uc,[n[19]||(n[19]=t("td",null,"Diperbarui oleh",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,[m.product.updater?(c(),h(J,{key:0},[e(g,{href:i.route("admin.user.detail",{id:m.product.updater})},{default:l(()=>[b(r(m.product.updater.username),1)]),_:1},8,["href"]),n[18]||(n[18]=b(" - "))],64)):k("",!0),b(" "+r(a(ge)(m.product.updated_at)),1)])])):k("",!0)])]),n[42]||(n[42]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",Ec,[t("tbody",null,[t("tr",null,[n[21]||(n[21]=t("td",{style:{width:"120px"}},"Stok",-1)),n[22]||(n[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(K)(m.product.stock))+" "+r(m.product.uom),1)]),t("tr",null,[n[23]||(n[23]=t("td",null,"Stok Minimum",-1)),n[24]||(n[24]=t("td",null,":",-1)),t("td",null,r(a(K)(m.product.min_stock))+" "+r(m.product.uom),1)]),t("tr",null,[n[25]||(n[25]=t("td",null,"Stok Maksimum",-1)),n[26]||(n[26]=t("td",null,":",-1)),t("td",null,r(a(K)(m.product.max_stock))+" "+r(m.product.uom),1)]),t("tr",null,[n[27]||(n[27]=t("td",null,"Barcode",-1)),n[28]||(n[28]=t("td",null,":",-1)),t("td",null,r(m.product.barcode),1)])])]),n[43]||(n[43]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",jc,[t("tbody",null,[t("tr",null,[n[29]||(n[29]=t("td",null,"Opsi Harga",-1)),n[30]||(n[30]=t("td",null,":",-1)),t("td",null,r(m.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),i.$can("admin.product:view-cost")?(c(),h("tr",Ac,[n[31]||(n[31]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),n[32]||(n[32]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(a(K)(m.product.cost)),1)])):k("",!0),t("tr",null,[n[33]||(n[33]=t("td",null,"Harga Eceran",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+r(a(K)(m.product.price_1))+" ",1),i.$can("admin.product:view-cost")?(c(),h("span",Nc," ("+r(d(m.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[n[35]||(n[35]=t("td",null,"Harga Partai",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+r(a(K)(m.product.price_2))+" ",1),i.$can("admin.product:view-cost")?(c(),h("span",Mc," ("+r(d(m.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[n[37]||(n[37]=t("td",null,"Harga Grosir",-1)),n[38]||(n[38]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+r(a(K)(m.product.price_3))+" ",1),i.$can("admin.product:view-cost")?(c(),h("span",Bc," ("+r(d(m.product.price_3))+") ",1)):k("",!0)])])])]),n[44]||(n[44]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",zc,[t("tbody",null,[t("tr",null,[n[39]||(n[39]=t("td",{style:{width:"120px"}},"Catatan",-1)),n[40]||(n[40]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.product.notes),1)])])]),i.$can("admin.product.delete")?(c(),h("div",Fc,[e(U,{icon:"delete",label:"Hapus",color:"negative",onClick:n[0]||(n[0]=v=>o())})])):k("",!0)])}}},Lc=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),Kc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Hc={key:0},wo={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(m){const s=m,d=xe(),o=T([]),i=T(!0),n=Re({...Me()}),g=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let v=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"quantity_before",label:"Stok Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Stok Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{f()});const f=(p=null)=>Be({pagination:g,filter:n,props:p,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:s.productId}}),loading:i}),u=X(()=>d.screen.lt.sm?v.filter(p=>p.name==="id"||p.name==="quantity"):v);return(p,y)=>(c(),D(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:g.value,"onUpdate:pagination":y[0]||(y[0]=_=>g.value=_),filter:n.search,loading:i.value,columns:u.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:x})=>[t("div",Kc,[t("span",null,r(q)+" "+r(x?" with term "+x:""),1)])]),body:l(_=>[e(Pe,{props:_},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",null,[e(P,{class:"inline-icon",name:"tag"}),b(" "+r(_.row.code),1)]),t("div",null,[e(P,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(a(ge)(_.row.created_at)),1)]),t("div",null,[e(ft,null,{default:l(()=>[b(r(p.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[_.row.ref_type]),1)]),_:2},1024)]),a(d).screen.lt.sm?(c(),h(J,{key:0},[t("div",{class:Ce(_.row.quantity>0?"text-positive":"text-negative")},[e(P,{class:"inline-icon",name:"compare_arrows"}),b(" "+r(a(K)(_.row.quantity_before))+" "+r(_.row.uom)+"  "+r(a(K)(_.row.quantity_after))+" "+r(_.row.uom),1)],2),e($e,{text:_.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"created_at",props:_},{default:l(()=>[b(r(a(ge)(_.row.created_at)),1)]),_:2},1032,["props"]),e(W,{key:"type",props:_},{default:l(()=>[b(r(p.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[_.row.ref_type])+" ",1),_.row.ref?(c(),h("span",Hc,r(_.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"quantity_before",props:_},{default:l(()=>[b(r(a(K)(_.row.quantity_before)),1)]),_:2},1032,["props"]),e(W,{key:"quantity",props:_,class:Ce(_.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[b(r(a(ia)(_.row.quantity))+" ",1),a(d).screen.lt.sm?(c(),h(J,{key:0},[b(r(_.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(W,{key:"quantity_after",props:_},{default:l(()=>[b(r(a(K)(_.row.quantity_after)),1)]),_:2},1032,["props"]),e(W,{key:"uom",props:_},{default:l(()=>[b(r(_.row.uom),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Yc=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),Wc={class:"q-gutter-sm"},Qc={class:"q-gutter-sm"},Jc={class:"row justify-center"},Gc={class:"col col-lg-6 q-pa-xs"},Xc={class:"row"},Zc={__name:"Detail",setup(m){const s=be(),d=`Rincian Produk #${s.props.data.id}`,o=T("main");return(i,n)=>{const g=Z("i-head"),v=Z("authenticated-layout");return c(),h(J,null,[e(g,{title:d}),e(v,{"show-drawer-button":!0},{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",Wc,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>i.$goBack())})])]),"right-button":l(()=>[t("div",Qc,[i.$can("admin.product.edit")?(c(),D(U,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[1]||(n[1]=f=>a(ee).get(i.route("admin.product.edit",{id:a(s).props.data.id}))),title:"Edit produk"})):k("",!0),i.$can("admin.product.add")?(c(),D(U,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[2]||(n[2]=f=>a(ee).get(i.route("admin.product.duplicate",{id:a(s).props.data.id}))),title:"Duplikat produk"})):k("",!0),i.$can("admin.product.add")?(c(),D(U,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:n[3]||(n[3]=f=>a(ee).get(i.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:l(()=>[t("div",Jc,[t("div",Gc,[t("div",Xc,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Pt,{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=f=>o.value=f),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Info Utama"}),e(ot,{name:"history",label:"Riwayat Stok"}),e(ot,{name:"version-history",label:"Riwayat Dokumen"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=f=>o.value=f),animated:""},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(ko,{product:a(s).props.data},null,8,["product"])]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(wo,{"product-id":a(s).props.data.id},null,8,["product-id"])]),_:1}),e(nt,{name:"version-history",class:"q-pa-xs"},{default:l(()=>[e(Ia,{"document-id":a(s).props.data.id,"document-type":"product"},null,8,["document-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},ep=Object.freeze(Object.defineProperty({__proto__:null,default:Zc},Symbol.toStringTag,{value:"Module"})),Yt=qt({name:"QBtnToggle",props:{...Gl,modelValue:{required:!0},options:{type:Array,required:!0,validator:m=>m.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(m,{slots:s,emit:d}){const o=X(()=>m.options.find(_=>_.value===m.modelValue)!==void 0),i=X(()=>({type:"hidden",name:m.name,value:m.modelValue})),n=Xn(i),g=X(()=>Jn(m)),v=X(()=>({rounded:m.rounded,dense:m.dense,...g.value})),f=X(()=>m.options.map((_,q)=>{const{attrs:x,value:w,slot:M,...Y}=_;return{slot:M,props:{key:q,"aria-pressed":w===m.modelValue?"true":"false",...x,...Y,...v.value,disable:m.disable===!0||Y.disable===!0,color:w===m.modelValue?p(Y,"toggleColor"):p(Y,"color"),textColor:w===m.modelValue?p(Y,"toggleTextColor"):p(Y,"textColor"),noCaps:p(Y,"noCaps")===!0,noWrap:p(Y,"noWrap")===!0,size:p(Y,"size"),padding:p(Y,"padding"),ripple:p(Y,"ripple"),stack:p(Y,"stack")===!0,stretch:p(Y,"stretch")===!0,onClick(C){u(w,_,C)}}}}));function u(_,q,x){m.readonly!==!0&&(m.modelValue===_?m.clearable===!0&&(d("update:modelValue",null,null),d("clear")):d("update:modelValue",_,q),d("click",x))}function p(_,q){return _[q]===void 0?m[q]:_[q]}function y(){const _=f.value.map(q=>qe(U,q.props,q.slot!==void 0?s[q.slot]:void 0));return m.name!==void 0&&m.disable!==!0&&o.value===!0&&n(_,"push"),Ql(s.default,_)}return()=>qe(Gn,{class:"q-btn-toggle",...g.value,rounded:m.rounded,stretch:m.stretch,glossy:m.glossy,spread:m.spread},y)}});function Ua(m,s=!1){const d=m.map(g=>({value:g.id,label:g.name})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...d]:d,i=T([...o]);return{filteredCategories:i,filterCategories:(g,v)=>{const f=g.toLowerCase();v(()=>{i.value=o.filter(u=>u.label.toLowerCase().includes(f))})},categories:o}}function Ea(m,s=!1){const d=m.map(g=>({value:g.id,label:g.name+" ("+g.code+")"})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...d]:d,i=T([...o]);return{filteredSuppliers:i,filterSupplierFn:(g,v)=>{const f=g.toLowerCase();v(()=>{i.value=o.filter(u=>u.label.toLowerCase().includes(f))})},suppliers:o}}const qa=Zn({__name:"PercentInput",props:{modelValue:{type:[Number,null],required:!1,default:0},label:{type:[String,void 0],required:!1,default:void 0},locale:{type:String,default:"id-ID"},outlined:{type:Boolean,default:!1},allowNegative:{type:Boolean,default:!1},maxDecimals:{type:Number,default:0},lazyRules:{type:[Boolean,String],default:!1},disable:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(m,{expose:s,emit:d}){const o=T(null),i=es(),n=T(!1);s({focus:()=>{o.value&&o.value.focus()},select:()=>{var C;if((C=o.value)!=null&&C.$el){const B=o.value.$el.querySelector("input");B==null||B.select()}}});const g=m,v=d,f=T(""),u=C=>{const O=new Intl.NumberFormat(C).format(123456789e-2),z=O.includes(",")?",":".",j=O.replace(/\d/g,"").replace(z,"").charAt(0);return{decimalSeparator:z,thousandSeparator:j}},{decimalSeparator:p,thousandSeparator:y}=u(g.locale),_=C=>{if(C==null||isNaN(C)){if(g.maxDecimals>0)return"";C=0}return new Intl.NumberFormat(g.locale,{minimumFractionDigits:g.maxDecimals,maximumFractionDigits:g.maxDecimals}).format(C)};Ne(()=>g.modelValue,C=>{n.value||(f.value=_(C))},{immediate:!0});const q=C=>{const B=C.replace(/[^0-9.,-]+/g,"").replace(new RegExp(`\\${y}`,"g"),"").replace(new RegExp(`\\${p}`,"g"),".");if(B===""||B==="-")return null;const O=parseFloat(B);return isNaN(O)?null:parseFloat(O.toFixed(g.maxDecimals))},x=()=>{n.value=!0,q(f.value),vt(()=>{var C;(C=o.value)==null||C.select()})},w=C=>{f.value=C},M=()=>{n.value=!1;const C=q(f.value);v("update:modelValue",C),f.value=_(C)},Y=C=>{const B=["Backspace","Delete","Tab","ArrowLeft","ArrowRight","Home","End","Shift"];C.ctrlKey||C.metaKey||C.key>="0"&&C.key<="9"||(C.key===p||C.key===y)&&!f.value.includes(p)||g.allowNegative&&C.key==="-"&&C.target.selectionStart===0||B.includes(C.key)||C.preventDefault()};return(C,B)=>(c(),D(a(ne),{ref_key:"qInputRef",ref:o,"model-value":f.value,label:g.label,outlined:g.outlined,"onUpdate:modelValue":w,onBlur:M,onFocus:x,onKeydown:Y,"lazy-rules":g.lazyRules,disable:g.disable,error:g.error,rules:g.rules,"error-message":g.errorMessage},He({_:2},[a(i).prepend?{name:"prepend",fn:l(()=>[It(C.$slots,"prepend")]),key:"0"}:void 0,a(i).append?{name:"append",fn:l(()=>[It(C.$slots,"append")]),key:"1"}:void 0]),1032,["model-value","label","outlined","lazy-rules","disable","error","rules","error-message"]))}}),tp={class:"q-gutter-sm"},ap={class:"col col-md-6 q-pa-xs"},lp={class:"row q-gutter-md"},op={class:"row q-gutter-md"},np={class:"q-mt-md full-width"},sp={__name:"Editor",setup(m){const s=be(),d=(s.props.data.id?"Edit":"Tambah")+" Produk",o=tt(window.CONSTANTS.PRODUCT_TYPES),i=T(!1);s.props.data.price_1&&s.props.data.cost>0&&(s.props.data.price_1-s.props.data.cost)/s.props.data.cost*100,s.props.data.price_2&&s.props.data.cost>0&&(s.props.data.price_2-s.props.data.cost)/s.props.data.cost*100,s.props.data.price_3&&s.props.data.cost>0&&(s.props.data.price_3-s.props.data.cost)/s.props.data.cost*100;const n=Qe({id:s.props.data.id,category_id:s.props.data.category_id,supplier_id:s.props.data.supplier_id,type:s.props.data.type||"",name:s.props.data.name||"",description:s.props.data.description||"",stock:parseFloat(s.props.data.stock)||0,min_stock:parseFloat(s.props.data.min_stock)||0,max_stock:parseFloat(s.props.data.max_stock)||0,uom:s.props.data.uom||"",barcode:s.props.data.barcode||"",cost:parseFloat(s.props.data.cost)||0,price_1:parseFloat(s.props.data.price_1)||0,price_2:parseFloat(s.props.data.price_2)||0,price_3:parseFloat(s.props.data.price_3)||0,price_1_markup:parseFloat(s.props.data.price_1_markup),price_2_markup:parseFloat(s.props.data.price_2_markup),price_3_markup:parseFloat(s.props.data.price_3_markup),price_1_option:s.props.data.price_1_option??"price",price_2_option:s.props.data.price_2_option??"price",price_3_option:s.props.data.price_3_option??"price",active:!!s.props.data.active,price_editable:!!s.props.data.price_editable,notes:s.props.data.notes||""}),g=()=>rt({form:n,url:route("admin.product.save")}),{filteredCategories:v,filterCategories:f}=Ua(s.props.categories),{filteredSuppliers:u,filterSupplierFn:p}=Ea(s.props.suppliers),y=(x,w)=>(x=parseFloat(x)||0,w=parseFloat(w)||0,w<=0?x>0?100:0:(x-w)/w*100),_=(x,w)=>{x=parseFloat(x)||0,w=parseFloat(w)||0;const M=x*(1+w/100);return Math.round(M)};Ne(()=>n.cost,x=>{i.value||(i.value=!0,n.price_1_option=="markup"?n.price_1=_(x,n.price_1_markup):n.price_1_markup=y(n.price_1,x),n.price_2_option=="markup"?n.price_2=_(x,n.price_2_markup):n.price_2_markup=y(n.price_2,x),n.price_3_option=="markup"?n.price_3=_(x,n.price_3_markup):n.price_3_markup=y(n.price_3,x),i.value=!1)},{immediate:!1});const q=x=>{const w=`price_${x}`,M=`price_${x}_markup`,Y=`price_${x}_option`;Ne(()=>n[w],C=>{if(n[Y]=="markup"||i.value)return;i.value=!0;const B=y(C,n.cost);n[M]=parseFloat(B.toFixed(2)),i.value=!1},{deep:!1}),Ne(()=>n[M],C=>{n[Y]!="price"&&(i.value||(i.value=!0,n[w]=_(n.cost,C),i.value=!1))},{deep:!1})};return q(1),q(2),q(3),(x,w)=>{const M=Z("i-head"),Y=Z("authenticated-layout");return c(),h(J,null,[e(M,{title:d}),e(Y,{"show-drawer-button":!0},{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",tp,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:w[0]||(w[0]=C=>x.$goBack())})])]),"right-button":l(()=>[e(U,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(n).processing,onClick:w[1]||(w[1]=C=>g()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",ap,[e(Je,{class:"row",onKeydown:w[26]||(w[26]=Wt(G(()=>{},["prevent"]),["enter"])),onSubmit:G(g,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":w[2]||(w[2]=C=>a(n).id=C)},null,512),[[_t,a(n).id]]),w[33]||(w[33]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(ce,{disabled:!!a(n).id,autofocus:"",modelValue:a(n).type,"onUpdate:modelValue":w[3]||(w[3]=C=>a(n).type=C),class:"custom-select",options:a(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["disabled","modelValue","options"]),w[34]||(w[34]=t("div",{class:"text-warning text-italic"}," Mengganti tipe setelah produk digunakan dapat mempengaruhi stok ",-1)),e(ne,{modelValue:a(n).name,"onUpdate:modelValue":w[4]||(w[4]=C=>a(n).name=C),modelModifiers:{trim:!0},label:"Nama Produk","lazy-rules":"",error:!!a(n).errors.name,disable:a(n).processing,"error-message":a(n).errors.name,rules:[C=>C&&C.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),w[35]||(w[35]=t("div",{class:"text-warning text-italic"}," Mengganti kode/nama setelah produk digunakan dapat mempengaruhi konsistensi data. ",-1)),e(ce,{modelValue:a(n).category_id,"onUpdate:modelValue":w[5]||(w[5]=C=>a(n).category_id=C),label:"Kategori (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:a(v),"map-options":"","emit-value":"",onFilter:a(f),"option-label":"label","option-value":"value",error:!!a(n).errors.category_id,disable:a(n).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,null,{default:l(()=>w[27]||(w[27]=[b("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),x.$can("admin.product:view-supplier")?(c(),D(ce,{key:0,modelValue:a(n).supplier_id,"onUpdate:modelValue":w[6]||(w[6]=C=>a(n).supplier_id=C),label:"Supplier (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:a(u),"map-options":"","emit-value":"",onFilter:a(p),"option-label":"label","option-value":"value",error:!!a(n).errors.supplier_id,disable:a(n).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,null,{default:l(()=>w[28]||(w[28]=[b("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(ne,{modelValue:a(n).description,"onUpdate:modelValue":w[7]||(w[7]=C=>a(n).description=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi (Opsional)","lazy-rules":"",disable:a(n).processing,error:!!a(n).errors.description,"error-message":a(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(St,{class:"q-mt-md",modelValue:a(n).active,"onUpdate:modelValue":w[8]||(w[8]=C=>a(n).active=C),disable:a(n).processing,label:"Produk Aktif (Ditampilkan)"},null,8,["modelValue","disable"]),w[36]||(w[36]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",lp,[e(ne,{modelValue:a(n).uom,"onUpdate:modelValue":w[9]||(w[9]=C=>a(n).uom=C),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!a(n).errors.uom,disable:a(n).processing,"error-message":a(n).errors.uom,"hide-bottom-space":"",class:"col"},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(n).barcode,"onUpdate:modelValue":w[10]||(w[10]=C=>a(n).barcode=C),modelModifiers:{trim:!0},label:"Barcode","lazy-rules":"",error:!!a(n).errors.barcode,disable:a(n).processing,"error-message":a(n).errors.barcode,"hide-bottom-space":"",class:"col"},null,8,["modelValue","error","disable","error-message"])]),t("div",op,[e(Ee,{modelValue:a(n).stock,"onUpdate:modelValue":w[11]||(w[11]=C=>a(n).stock=C),label:"Stok Aktual",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.stock,errorMessage:a(n).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(n).min_stock,"onUpdate:modelValue":w[12]||(w[12]=C=>a(n).min_stock=C),label:"Stok Min",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.min_stock,errorMessage:a(n).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(n).max_stock,"onUpdate:modelValue":w[13]||(w[13]=C=>a(n).max_stock=C),label:"Stok Maks",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.max_stock,errorMessage:a(n).errors.max_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),w[37]||(w[37]=t("div",{class:"text-subtitle1 q-pt-lg"},"Harga & Modal",-1)),x.$can("admin.product:view-cost")?(c(),D(Ee,{key:1,modelValue:a(n).cost,"onUpdate:modelValue":w[14]||(w[14]=C=>a(n).cost=C),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.cost,errorMessage:a(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("table",np,[w[32]||(w[32]=t("thead",{class:"text-grey-6"},[t("tr",null,[t("th",{style:{width:"25%"}},"Harga"),t("th",{style:{width:"25%"}},"Markup (%)"),t("th"),t("th",{style:{width:"25%"}},"Harga Jual (Rp)")])],-1)),t("tbody",null,[t("tr",null,[w[29]||(w[29]=t("td",{class:"no-wrap"},"Harga Eceran",-1)),t("td",null,[e(qa,{class:"col-3",filled:"",dense:"",modelValue:a(n).price_1_markup,"onUpdate:modelValue":w[15]||(w[15]=C=>a(n).price_1_markup=C),lazyRules:"",readonly:a(n).price_1_option!="markup",disable:a(n).processing,error:!!a(n).errors.price_1_markup,errorMessage:a(n).errors.price_1_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Yt,{modelValue:a(n).price_1_option,"onUpdate:modelValue":w[16]||(w[16]=C=>a(n).price_1_option=C),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:a(n).price_1,"onUpdate:modelValue":w[17]||(w[17]=C=>a(n).price_1=C),lazyRules:"",disable:a(n).processing,readonly:a(n).price_1_option=="markup",error:!!a(n).errors.price_1,errorMessage:a(n).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])]),t("tr",null,[w[30]||(w[30]=t("td",{class:"no-wrap"},"Harga Partai",-1)),t("td",null,[e(qa,{class:"col-3",filled:"",dense:"",modelValue:a(n).price_2_markup,"onUpdate:modelValue":w[18]||(w[18]=C=>a(n).price_2_markup=C),lazyRules:"",readonly:a(n).price_2_option!="markup",disable:a(n).processing,error:!!a(n).errors.price_2_markup,errorMessage:a(n).errors.price_2_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Yt,{modelValue:a(n).price_2_option,"onUpdate:modelValue":w[19]||(w[19]=C=>a(n).price_2_option=C),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:a(n).price_2,"onUpdate:modelValue":w[20]||(w[20]=C=>a(n).price_2=C),lazyRules:"",readonly:a(n).price_2_option=="markup",disable:a(n).processing,error:!!a(n).errors.price_2,errorMessage:a(n).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","readonly","disable","error","errorMessage"])])]),t("tr",null,[w[31]||(w[31]=t("td",{class:"no-wrap"},"Harga Grosir",-1)),t("td",null,[e(qa,{class:"col-3",filled:"",dense:"",modelValue:a(n).price_3_markup,"onUpdate:modelValue":w[21]||(w[21]=C=>a(n).price_3_markup=C),lazyRules:"",disable:a(n).processing,readonly:a(n).price_3_option!="markup",error:!!a(n).errors.price_3_markup,errorMessage:a(n).errors.price_3_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","disable","readonly","error","errorMessage"])]),t("td",null,[e(Yt,{modelValue:a(n).price_3_option,"onUpdate:modelValue":w[22]||(w[22]=C=>a(n).price_3_option=C),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:a(n).price_3,"onUpdate:modelValue":w[23]||(w[23]=C=>a(n).price_3=C),lazyRules:"",disable:a(n).processing,readonly:a(n).price_3_option=="markup",error:!!a(n).errors.price_3,errorMessage:a(n).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])])])]),e(St,{class:"q-mt-sm",modelValue:a(n).price_editable,"onUpdate:modelValue":w[24]||(w[24]=C=>a(n).price_editable=C),disable:a(n).processing,label:"Harga dapat diubah saat penjualan"},null,8,["modelValue","disable"]),e(ne,{modelValue:a(n).notes,"onUpdate:modelValue":w[25]||(w[25]=C=>a(n).notes=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(n).processing,error:!!a(n).errors.notes,"error-message":a(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},rp=Object.freeze(Object.defineProperty({__proto__:null,default:sp},Symbol.toStringTag,{value:"Module"})),ip={class:"q-gutter-sm"},dp={class:"col col-md-6 q-pa-xs"},yl="Import Produk",up={__name:"Import",setup(m){const s=Qe({csv_file:null}),d=()=>{s.post(route("admin.product.import"),{onSuccess:()=>{s.reset()},onError:()=>{We()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=Z("i-head"),g=Z("authenticated-layout");return c(),h(J,null,[e(n,{title:yl}),e(g,{"show-drawer-button":!0},{title:l(()=>[b(r(yl))]),"left-button":l(()=>[t("div",ip,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",dp,[e(Je,{class:"row",onSubmit:G(d,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(po,{modelValue:a(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=v=>a(s).csv_file=v),accept:".csv",label:"Pilih file CSV",error:!!a(s).errors.csv_file,"error-message":a(s).errors.csv_file,disable:a(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(s).processing||!a(s).csv_file,loading:a(s).processing},null,8,["disable","loading"]),e(U,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:i[2]||(i[2]=v=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(c(),D(Qt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[b(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(c(),D(Qt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[b(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},mp=Object.freeze(Object.defineProperty({__proto__:null,default:up},Symbol.toStringTag,{value:"Module"})),cp={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},pp={class:"q-pa-xs"},fp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},gp={key:0},bp={key:1},vp={key:2},yp={key:3},_p={class:"flex justify-end"},kp={key:0},wp={key:1},hp={key:0},_l="Produk",$p={__name:"Index",setup(m){const s=be(),d=T(null),o=T(null),i=et(o),n=T(!1),g=[...tt(window.CONSTANTS.PRODUCT_TYPES)],v=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],f=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],u=xe(),p=T(!1),y=T([]),_=T(!0),q=Re({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...Me()}),x=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});let w=[{name:"id",label:"ID",field:"id",align:"center",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"price_2",label:"Harga Partai",field:"price_2",align:"right"},{name:"price_3",label:"Harga Grosir",field:"price_3",align:"right"},{name:"action",align:"right"}];he(()=>{const $=new URLSearchParams(window.location.search).get("page");$&&(x.value.page=parseInt($)),Y()});const M=R=>st({message:`Hapus Produk ${R.name}?`,url:route("admin.product.delete",R.id),fetchItemsCallback:Y,loading:_}),Y=(R=null)=>{Be({pagination:x,filter:q,props:R,rows:y,url:route("admin.product.data"),loading:_,tableRef:d})},C=()=>{Y()},{filteredCategories:B,filterCategories:O}=Ua(s.props.categories),{filteredSuppliers:z,filterSupplierFn:j}=Ea(s.props.suppliers),V=X(()=>{let R=[...w];return n.value||R.splice(3,1),u.screen.gt.sm?R:R.filter($=>$.name==="id"||$.name==="name"||$.name==="action")}),I=R=>{ee.get(route("admin.product.detail",R.row.id))};return(R,$)=>{const E=Z("i-head"),N=Z("authenticated-layout");return c(),h(J,null,[e(E,{title:_l}),e(N,null,He({title:l(()=>[b(r(_l))]),"right-button":l(()=>[e(U,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=S=>p.value=!p.value)},null,8,["icon"]),R.$can("admin.product.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=S=>a(ee).get(R.route("admin.product.add")))})):k("",!0),R.$can("admin.product.import")||R.$can("admin.product:view-cost")?(c(),D(U,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=G(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[R.$can("admin.product.send-price-list")?te((c(),D(oe,{key:0,clickable:"",onClick:$[2]||($[2]=G(S=>a(ee).get(R.route("admin.product.send-price-list")),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"send"})]),_:1}),e(F,null,{default:l(()=>$[14]||($[14]=[b("Kirim Daftar Harga")])),_:1})]),_:1})),[[ie],[pe]]):k("",!0),R.$can("admin.product.import")?te((c(),D(oe,{key:1,clickable:"",onClick:$[3]||($[3]=S=>n.value=!n.value)},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:n.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(F,null,{default:l(()=>[b(r(n.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[ie],[pe]]):k("",!0),R.$can("admin.product.import")?te((c(),D(oe,{key:2,clickable:"",onClick:$[4]||($[4]=G(S=>a(ee).get(R.route("admin.product.import")),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"csv"})]),_:1}),e(F,null,{default:l(()=>$[15]||($[15]=[b("Import")])),_:1})]),_:1})),[[ie],[pe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",pp,[e(Ie,{ref_key:"tableRef",ref:d,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":$[13]||($[13]=S=>x.value=S),filter:q.search,loading:_.value,columns:V.value,rows:y.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(i)}),onRequest:Y,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:A,filter:le})=>[t("div",fp,[t("span",null,r(A)+" "+r(le?" with term "+le:""),1)])]),header:l(S=>[e(Pe,{props:S},{default:l(()=>[e(Zt,{"auto-width":""}),(c(!0),h(J,null,Fe(S.cols,A=>(c(),D(Zt,{key:A.name,props:S},{default:l(()=>[b(r(A.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(S=>[e(Pe,{props:S,class:Ce([{inactive:!S.row.active},"cursor-pointer"]),onClick:A=>I(S)},{default:l(()=>[e(W,{"auto-width":""},{default:l(()=>[e(U,{size:"sm",flat:"",round:"",dense:"",onClick:G(A=>S.expand=!S.expand,["stop"]),icon:S.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(W,null,{default:l(()=>[b(r(S.row.id),1)]),_:2},1024),e(W,{key:"name",props:S,class:"wrap-column"},{default:l(()=>[b(r(S.row.name)+" ",1),a(u).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[S.row.type=="stocked"?(c(),h("div",gp,[e(P,{name:"cycle"}),b(" Stok: "+r(a(K)(S.row.stock))+" "+r(S.row.uom),1)])):k("",!0),n.value?(c(),h("div",bp,[e(P,{name:"money"}),b(" Modal: Rp. "+r(a(K)(S.row.cost)),1)])):k("",!0),t("div",null,[e(P,{name:"sell"}),b(" Eceran: Rp. "+r(a(K)(S.row.price_1)),1)]),S.row.price_2!=0?(c(),h("div",vp,[e(P,{name:"sell"}),b(" Partai: Rp. "+r(a(K)(S.row.price_2)),1)])):k("",!0),S.row.price_3!=0?(c(),h("div",yp,[e(P,{name:"sell"}),b(" Grosir: Rp. "+r(a(K)(S.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"stock",props:S,class:Ce(["wrap-column",{"low-stock":S.row.type=="stocked"&&(Number(S.row.stock)==0||Number(S.row.stock)<Number(S.row.min_stock)),"over-stock":S.row.type=="stocked"&&Number(S.row.max_stock)&&Number(S.row.stock)>Number(S.row.max_stock)}])},{default:l(()=>[b(r(S.row.type=="stocked"?a(K)(S.row.stock)+" "+S.row.uom:"-"),1)]),_:2},1032,["props","class"]),(c(),D(W,{key:"cost",props:S,class:"wrap-column"},{default:l(()=>[b(r(a(K)(S.row.cost)),1)]),_:2},1032,["props"])),e(W,{key:"price_1",props:S,class:"wrap-column"},{default:l(()=>[b(r(a(K)(S.row.price_1)),1)]),_:2},1032,["props"]),e(W,{key:"price_2",props:S,class:"wrap-column"},{default:l(()=>[b(r(a(K)(S.row.price_2)),1)]),_:2},1032,["props"]),e(W,{key:"price_3",props:S,class:"wrap-column"},{default:l(()=>[b(r(a(K)(S.row.price_3)),1)]),_:2},1032,["props"]),e(W,{key:"action",props:S},{default:l(()=>[t("div",_p,[R.$can("admin.product.add")||R.$can("admin.product.edit")||R.$can("admin.product.delete")?(c(),D(U,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:$[12]||($[12]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"175px"}},{default:l(()=>[R.$can("admin.product.add")?te((c(),D(oe,{key:0,clickable:"",onClick:G(A=>a(ee).get(R.route("admin.product.duplicate",S.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>$[16]||($[16]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),R.$can("admin.product.edit")?te((c(),D(oe,{key:1,clickable:"",onClick:G(A=>a(ee).get(R.route("admin.product.edit",S.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>$[17]||($[17]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),R.$can("admin.product.delete")?te((c(),D(oe,{key:2,onClick:G(A=>M(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>$[18]||($[18]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),te(e(Pe,{props:S},{default:l(()=>[e(W,{colspan:"100%"},{default:l(()=>[S.row.barcode?(c(),h("div",kp,[e(P,{class:"inline-icon",name:"barcode"}),b(" Barcode: "+r(S.row.barcode),1)])):k("",!0),S.row.category_id?(c(),h("div",wp,[e(P,{name:"category",class:"inline-icon"}),b(" Kategori: "+r(S.row.category.name),1)])):k("",!0),R.$can("admin.product:view-supplier")?(c(),h(J,{key:2},[S.row.supplier_id?(c(),h("div",hp,[e(P,{name:"local_shipping",class:"inline-icon"}),b(" Supplier: "+r(S.row.supplier.name),1)])):k("",!0)],64)):k("",!0),S.row.description?(c(),D($e,{key:3,text:S.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),S.row.notes?(c(),D($e,{key:4,text:S.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[Zl,S.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[p.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:l(()=>[t("div",cp,[e(ce,{modelValue:q.type,"onUpdate:modelValue":[$[6]||($[6]=S=>q.type=S),C],class:"custom-select col-xs-4 col-sm-2",options:g,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(ce,{modelValue:q.stock_status,"onUpdate:modelValue":[$[7]||($[7]=S=>q.stock_status=S),C],class:"custom-select col-xs-4 col-sm-2",options:f,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:q.status,"onUpdate:modelValue":[$[8]||($[8]=S=>q.status=S),C],class:"custom-select col-xs-4 col-sm-2",options:v,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:q.category_id,"onUpdate:modelValue":[$[9]||($[9]=S=>q.category_id=S),C],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(B),"map-options":"",dense:"","emit-value":"",onFilter:a(O),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),R.$can("admin.product:view-supplier")?(c(),D(ce,{key:0,modelValue:q.supplier_id,"onUpdate:modelValue":[$[10]||($[10]=S=>q.supplier_id=S),C],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(z),"map-options":"",dense:"","emit-value":"",onFilter:a(j),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:q.search,"onUpdate:modelValue":$[11]||($[11]=S=>q.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},xp=Object.freeze(Object.defineProperty({__proto__:null,default:$p},Symbol.toStringTag,{value:"Module"})),Sp={class:"q-gutter-sm"},Vp={class:"col col-md-8 q-pa-xs"},qp={class:"col-12 col-md-6"},Cp={class:"col-12 col-md-6"},Tp={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},Pp={class:"q-gutter-sm"},kl="Kirim Daftar Harga",Rp={__name:"SendPriceList",setup(m){const s=be(),d=T(""),o=T(null),i=X(()=>{var j;const z=new Map;return(j=s.props.products)==null||j.forEach(V=>{z.set(V.id,V)}),z}),n=X(()=>{var j;const z=new Map;return(j=s.props.customers)==null||j.filter(V=>V.phone&&V.phone.trim()!=="").forEach(V=>{z.set(V.id,V)}),z}),g=X(()=>{var z;return((z=s.props.customers)==null?void 0:z.map(j=>({value:j.id,label:j.name})))||[]}),v=X(()=>{var z;return((z=s.props.products)==null?void 0:z.map(j=>({value:j.id,label:`${j.name}`})))||[]}),f=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],u=T(v.value),p=T(g.value),y=Qe({price_types:[],products:[],customers:[]});y.transform(z=>({customers:z.customers.map(j=>j.value),message:d.value}));const _=z=>z?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(z):"Rp. 0",q=z=>{const j=f.find(V=>V.value===z);return j?j.label:z},x=()=>{if(o.value){const z=o.value.$el.querySelector("textarea");if(z){z.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(j){console.error("Gagal menyalin teks ke clipboard:",j)}}}},w=X(()=>{var j,V;if(((j=y.products)==null?void 0:j.length)===0||((V=y.price_types)==null?void 0:V.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let z=`*DAFTAR HARGA TERBARU*
`;return z+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,z+=`------------------------------

`,(y.products||[]).forEach(I=>{const R=i.value.get(I.value);R&&(z+=`*${R.name}*
`,(y.price_types||[]).forEach($=>{const E=q($),N=R[$],S=R.uom||"pcs";N!=null&&N>0&&(z+=`- ${E}: *${_(N)}* / ${S}
`)}),z+=`
`)}),z+=`------------------------------
`,z+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",z});Ne(w,z=>{d.value=z},{immediate:!0});const M=X(()=>(y.customers||[]).map(z=>n.value.get(z.value)).filter(z=>z&&z.phone)),Y=z=>{const j=d.value;let V=z.startsWith("0")?"62"+z.substring(1):z;V=V.replace(/[^0-9]/g,"");const I=encodeURIComponent(j);return`https://wa.me/${V}?text=${I}`},C=(z,j)=>{if(z===""){j(()=>{u.value=v.value});return}j(()=>{const V=z.toLowerCase();u.value=v.value.filter(I=>I.label.toLowerCase().indexOf(V)>-1)})},B=(z,j)=>{if(z===""){j(()=>{p.value=g.value});return}j(()=>{const V=z.toLowerCase();p.value=g.value.filter(I=>I.label.toLowerCase().indexOf(V)>-1)})},O=()=>{var z,j,V;if(((z=y.price_types)==null?void 0:z.length)===0||((j=y.products)==null?void 0:j.length)===0||((V=y.customers)==null?void 0:V.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}y.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{We()},onFinish:()=>{y.clearErrors()}})};return(z,j)=>{const V=Z("i-head"),I=Z("authenticated-layout");return c(),h(J,null,[e(V,{title:kl}),e(I,{"show-drawer-button":!0},{title:l(()=>[b(r(kl))]),"left-button":l(()=>[t("div",Sp,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:j[0]||(j[0]=R=>z.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Vp,[e(Je,{class:"row q-col-gutter-xs",onSubmit:G(O,["prevent"]),onValidationError:a(We)},{default:l(()=>[t("div",qp,[e(fe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[j[10]||(j[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),j[11]||(j[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:a(y).products,"onUpdate:modelValue":j[1]||(j[1]=R=>a(y).products=R),options:u.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.products,"error-message":a(y).errors.products,loading:a(y).processing,"use-input":"",onFilter:C,onClear:j[2]||(j[2]=R=>a(y).products=[]),"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,{class:"text-grey"},{default:l(()=>j[8]||(j[8]=[b(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:a(y).price_types,"onUpdate:modelValue":j[3]||(j[3]=R=>a(y).price_types=R),options:f,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.price_types,"error-message":a(y).errors.price_types,loading:a(y).processing,multiple:"","use-chips":"",clearable:"",onClear:j[4]||(j[4]=R=>a(y).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:a(y).customers,"onUpdate:modelValue":j[5]||(j[5]=R=>a(y).customers=R),options:p.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.customers,"error-message":a(y).errors.customers,loading:a(y).processing,"use-input":"",onFilter:B,onClear:j[6]||(j[6]=R=>a(y).customers=[]),"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,{class:"text-grey"},{default:l(()=>j[9]||(j[9]=[b(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>{var R,$,E;return[e(U,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:a(y).processing||((R=a(y).products)==null?void 0:R.length)===0||(($=a(y).customers)==null?void 0:$.length)===0||((E=a(y).price_types)==null?void 0:E.length)===0,loading:a(y).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",Cp,[e(fe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:l(()=>[e(ae,null,{default:l(()=>[t("div",Tp,[j[12]||(j[12]=b(" Pratinjau Pesan (Teks Biasa) ")),e(U,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:x,disable:d.value.length===0},null,8,["disable"])]),e(ne,{modelValue:d.value,"onUpdate:modelValue":j[7]||(j[7]=R=>d.value=R),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),M.value.length>0?(c(),D(ae,{key:0,class:"q-pt-none"},{default:l(()=>[j[14]||(j[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",Pp,[(c(!0),h(J,null,Fe(M.value,R=>(c(),D(U,{key:R.id,label:`Kirim ke ${R.name}`,href:Y(R.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(a(y).products.length>0&&a(y).price_types.length>0)},{default:l(()=>[R.phone?k("",!0):(c(),D(ea,{key:0},{default:l(()=>j[13]||(j[13]=[b(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),j[15]||(j[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Op=Object.freeze(Object.defineProperty({__proto__:null,default:Rp},Symbol.toStringTag,{value:"Module"})),Dp={class:"q-gutter-sm"},Ip={class:"q-pa-xs"},Up={class:"col-12"},Ep={class:"col-12"},jp={class:"q-gutter-xs"},wl="Kirim Daftar Harga",Ap={__name:"SendPriceList2",setup(m){const s=be(),d=T(""),o=X(()=>{var z;const O=new Map;return(z=s.props.products)==null||z.forEach(j=>{O.set(j.id,j)}),O}),i=X(()=>{var z;const O=new Map;return(z=s.props.customers)==null||z.forEach(j=>{O.set(j.id,j)}),O}),n=X(()=>{var O;return((O=s.props.customers)==null?void 0:O.map(z=>({value:z.id,label:z.name})))||[]}),g=X(()=>{var O;return((O=s.props.products)==null?void 0:O.map(z=>({value:z.id,label:`${z.name} (${z.sku||z.code||"ID: "+z.id})`})))||[]}),v=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],f=T(g.value),u=T(n.value),p=Qe({price_types:[],products:[],customers:[]});p.transform(O=>({...O,products:O.products.map(z=>z.value),customers:O.customers.map(z=>z.value)}));const y=O=>O?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(O):"Rp. 0",_=O=>{const z=v.find(j=>j.value===O);return z?z.label:O},q=X(()=>{if(p.products.length===0||p.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let O=`Daftar Harga Terbaru
`;return O+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,O+=`------------------------------

`,p.products.forEach(z=>{const j=o.value.get(z.value);j&&(O+=`*${j.name}*
`,p.price_types.forEach(V=>{const I=_(V),R=j[V],$=j.unit||"pcs";R!=null&&R!=0&&(O+=`- ${I}: ${y(R)} / ${$}
`)}),O+=`
`)}),O+=`------------------------------
`,O+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",O});Ne(q,O=>{d.value=O},{immediate:!0});const x=X(()=>p.customers.map(O=>i.value.get(O.value)).filter(O=>O&&O.phone_number)),w=O=>{const z=d.value;let j=O.startsWith("0")?"62"+O.substring(1):O;j=j.replace(/[^0-9]/g,"");const V=encodeURIComponent(z);return`https://wa.me/${j}?text=${V}`},M=(O,z)=>{if(O===""){z(()=>{f.value=g.value});return}z(()=>{const j=O.toLowerCase();f.value=g.value.filter(V=>V.label.toLowerCase().indexOf(j)>-1)})},Y=(O,z)=>{if(O===""){z(()=>{u.value=n.value});return}z(()=>{const j=O.toLowerCase();u.value=n.value.filter(V=>V.label.toLowerCase().indexOf(j)>-1)})},C=()=>{console.log("Scrolling to first error field...")},B=()=>{if(p.price_types.length===0||p.products.length===0||p.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}p.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{C()},onFinish:()=>{p.clearErrors()}})};return(O,z)=>{const j=Z("i-head"),V=Z("authenticated-layout");return c(),h(J,null,[e(j,{title:wl}),e(V,{"show-drawer-button":!0},{title:l(()=>[b(r(wl))]),"left-button":l(()=>[t("div",Dp,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:z[0]||(z[0]=I=>O.$goBack())})])]),default:l(()=>[t("div",Ip,[e(Je,{class:"row q-col-gutter-md",onSubmit:G(B,["prevent"]),onValidationError:C},{default:l(()=>[t("div",Up,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[z[8]||(z[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),z[9]||(z[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:a(p).products,"onUpdate:modelValue":z[1]||(z[1]=I=>a(p).products=I),options:f.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(p).errors.products,"error-message":a(p).errors.products,loading:a(p).processing,"use-input":"",onFilter:M,"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,{class:"text-grey"},{default:l(()=>z[6]||(z[6]=[b(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:a(p).price_types,"onUpdate:modelValue":z[2]||(z[2]=I=>a(p).price_types=I),options:v,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!a(p).errors.price_types,"error-message":a(p).errors.price_types,loading:a(p).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:a(p).customers,"onUpdate:modelValue":z[3]||(z[3]=I=>a(p).customers=I),options:u.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(p).errors.customers,"error-message":a(p).errors.customers,loading:a(p).processing,"use-input":"",onFilter:Y,"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(F,{class:"text-grey"},{default:l(()=>z[7]||(z[7]=[b(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:a(p).processing||a(p).products.length===0||a(p).customers.length===0||a(p).price_types.length===0,loading:a(p).processing},null,8,["disable","loading"]),e(U,{icon:"cancel",label:"Batal",disable:a(p).processing,onClick:z[4]||(z[4]=I=>O.$goBack())},null,8,["disable"])]),_:1}),O.$page.props.flash.success?(c(),D(Qt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[b(r(O.$page.props.flash.success),1)]),_:1})):k("",!0),O.$page.props.flash.error?(c(),D(Qt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[b(r(O.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",Ep,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[z[10]||(z[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(ne,{modelValue:d.value,"onUpdate:modelValue":z[5]||(z[5]=I=>d.value=I),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),z[11]||(z[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),x.value.length>0?(c(),D(ae,{key:0},{default:l(()=>[z[13]||(z[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",jp,[(c(!0),h(J,null,Fe(x.value,I=>(c(),D(U,{key:I.id,label:`Kirim ke ${I.label}`,href:w(I.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:l(()=>[I.phone_number?k("",!0):(c(),D(ea,{key:0},{default:l(()=>z[12]||(z[12]=[b(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href"]))),128))]),z[14]||(z[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},Np=Object.freeze(Object.defineProperty({__proto__:null,default:Ap},Symbol.toStringTag,{value:"Module"})),Mp={class:"q-gutter-sm"},Bp={class:"col col-md-6 q-pa-xs"},hl="Tambah Retur Pembelian",zp={__name:"Create",setup(m){const s=be(),d=Qe({code:s.props.data.code}),o=()=>rt({form:d,url:route("admin.purchase-order-return.add")});return(i,n)=>{const g=Z("i-head"),v=Z("authenticated-layout");return c(),h(J,null,[e(g,{title:hl}),e(v,null,{title:l(()=>[b(r(hl))]),"left-button":l(()=>[t("div",Mp,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>i.$inertia.get(i.route("admin.finance-account.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Bp,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(ne,{autofocus:"",modelValue:a(d).code,"onUpdate:modelValue":n[1]||(n[1]=f=>a(d).code=f),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!a(d).errors.code,disable:a(d).processing,"error-message":a(d).errors.code,rules:[f=>f&&f.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:a(d).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(d).processing,onClick:n[2]||(n[2]=f=>a(ee).get(i.route("admin.purchase-order-return.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Fp=Object.freeze(Object.defineProperty({__proto__:null,default:zp},Symbol.toStringTag,{value:"Module"})),Lp={class:"column"},Kp={class:"bg-grey-2 q-pa-xs"},Hp={class:"text-subtitle1 text-bold text-grey-10"},Yp={class:"text-caption text-grey-8"},Wp={class:"col-12 col-sm-6"},Qp={class:"full-width"},Jp={key:1},Gp={key:0},Xp={key:1},Zp={class:"col-12 col-sm-6",align:"left"},ef={class:"full-width"},tf={class:"full-width",style:{"border-collapse":"collapse"}},af={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},lf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},of={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},nf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},sf={key:0},rf={class:"col-12 col-sm-6"},df={class:"text-body2 text-grey-7 text-italic"},uf={class:"col-12 col-sm-6"},mf={class:"row justify-end q-gutter-y-xs"},cf={class:"col-12 row justify-between"},pf={class:"text-subtitle2 text-bold"},ho={__name:"MainInfoTab",props:{data:Object},setup(m){const s=m;return(d,o)=>{const i=Z("i-link");return c(),h("div",Lp,[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",Kp,[t("div",Hp," RETUR #"+r(s.data.code),1),t("div",Yp,r(a(ge)(s.data.datetime)),1)])]),_:1}),e(Ae),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",Wp,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",Qp,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(c(),D(i,{key:0,href:d.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:l(()=>[e(P,{class:"inline-icon",name:"person"}),b(" "+r(s.data.supplier_name)+" ("+r(s.data.supplier_code)+") ",1)]),_:1},8,["href"])):(c(),h("div",Jp,[e(P,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pemasok Umum "))]))])]),s.data.supplier_phone?(c(),h("tr",Gp,[t("td",null,[e(P,{class:"inline-icon",name:"phone"}),b(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(c(),h("tr",Xp,[t("td",null,[e(P,{class:"inline-icon",name:"home_pin"}),b(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",Zp,[o[8]||(o[8]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",ef,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ge)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",tf,[o[10]||(o[10]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(c(!0),h(J,null,Fe(s.data.details,n=>(c(),h("tr",{key:n.id},[t("td",af,[e(i,{href:d.route("admin.product.detail",n.product_id)},{default:l(()=>[b(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",lf,r(a(K)(n.price)),1),t("td",of,r(n.quantity),1),t("td",nf,r(a(K)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(c(),h("tr",sf,o[9]||(o[9]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",rf,[o[11]||(o[11]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",df,r(s.data.notes?s.data.notes:"-"),1)]),t("div",uf,[t("div",mf,[t("div",cf,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",pf,r(a(K)(s.data.grand_total)),1)])])])]),_:1})])}}},ff=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),gf={key:0,class:"text-center q-mb-md text-grey-8"},bf={class:"text-subtitle2 text-weight-medium"},vf={class:"text-h5 text-center text-primary q-pb-md"},yf={class:"text-center q-mt-md"},_f={key:0,class:"text-h6 text-negative text-weight-bold"},kf={key:1,class:"text-h6 text-positive text-weight-bold"},$o={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:s}){const d=m,o=s,i=be(),n=T(!1),g=T({method:"transfer",amount:d.total,notes:null}),v=i.props.data.supplier,f=X(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(x=>({label:x.name,value:x.id}))]),u=X(()=>d.total-(g.value.amount||0)),p=X(()=>{const x=g.value.amount||0;return x<=0?"Jumlah pembayaran harus lebih dari 0.":x>d.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),y=X(()=>p.value===null),_=()=>{if(!y.value)return;n.value=!0;const x={id:g.value.method,amount:g.value.amount,notes:g.value.notes};o("accepted",x),n.value=!1},q=()=>{g.value.amount=d.total,g.value.method="cash",g.value.notes=null};return(x,w)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":w[4]||(w[4]=M=>x.$emit("update:modelValue",M)),onBeforeShow:q},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>w[5]||(w[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(v)?(c(),h("div",gf,[t("div",bf,[b(r(a(v).code)+" ",1),w[6]||(w[6]=t("br",null,null,-1)),b(" "+r(a(v).name)+" ",1),w[7]||(w[7]=t("br",null,null,-1))])])):k("",!0),t("div",vf," Total: Rp. "+r(a(K)(m.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":w[0]||(w[0]=M=>g.value.method=M),options:f.value,label:"Kas Tujuan",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":w[1]||(w[1]=M=>g.value.amount=M),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":p.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":w[2]||(w[2]=M=>g.value.notes=M),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",yf,[u.value>0?(c(),h("div",_f," Sisa Refund: Rp. "+r(a(K)(u.value)),1)):(c(),h("div",kf," Refund Lunas "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(U,{flat:"",label:"Batal",color:"grey",onClick:w[3]||(w[3]=M=>x.$emit("update:modelValue",!1))}),e(U,{label:"Bayar",color:"positive",onClick:_,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},wf=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),hf={class:"column"},$f={class:"row"},xf={class:"full-width",style:{"border-collapse":"collapse"}},Sf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Vf={class:"row items-center q-gutter-x-sm"},qf={class:"text-weight-bold"},Cf={class:"row items-center q-gutter-x-sm q-mt-xs"},Tf={class:"text-caption text-grey-6"},Pf={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Rf={class:"text-caption text-grey-6"},Of={class:"q-mt-xs"},Df={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},If={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Uf={key:0},Ef={class:"text-right q-pa-sm"},jf={class:"text-right q-pa-sm"},xo={__name:"RefundTab",props:{data:Object},setup(m){const s=m,d=xe(),o=T(!1),i=()=>{o.value=!0},n=X(()=>s.data.grand_total-s.data.total_refunded),g=async f=>{const u={order_id:s.data.id,...f};d.loading.show({message:"Memproses pembayaran..."});try{const p=await De.post(route("admin.purchase-order-return.add-refund"),u);d.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(p){let y="Gagal memproses refund.";p.response&&p.response.data&&p.response.data.message?y=p.response.data.message:p.message&&(y=p.message),d.notify({message:y,color:"negative",icon:"error"})}finally{d.loading.hide()}},v=f=>{d.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{d.loading.show({message:"Menghapus pembayaran..."});try{await De.post(route("admin.purchase-order-return.delete-refund",{id:f.id})),d.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(u){let p="Gagal menghapus refund pembayaran.";u.response&&u.response.data&&u.response.data.message?p=u.response.data.message:u.message&&(p=u.message),d.notify({message:p,color:"negative",icon:"error"})}finally{d.loading.hide()}})};return(f,u)=>(c(),h(J,null,[t("div",hf,[e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("div",$f,[f.$can("admin.purchase-order-return.add-refund")&&s.data.remaining_refund>0?(c(),D(U,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:u[0]||(u[0]=G(p=>i(),["stop"]))})):k("",!0)]),t("table",xf,[u[7]||(u[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(c(!0),h(J,null,Fe(s.data.refunds,p=>(c(),h("tr",{key:p.id},[t("td",Sf,[t("div",Vf,[e(P,{name:"tag",size:"xs",color:"grey-7"}),t("span",qf,r(p.code),1)]),t("div",Cf,[e(P,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Tf,r(a(ge)(p.created_at)),1)]),(p.type==="transfer"||p.type==="cash")&&p.account?(c(),h("div",Pf,[e(P,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Rf,r(p.account.name),1)])):k("",!0),t("div",Of,[e(ft,{label:f.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[p.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Df,r(a(K)(p.amount)),1),t("td",If,[f.$can("admin.purchase-order-return.delete-refund")?(c(),D(U,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>v(p)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(c(),h("tr",Uf,u[2]||(u[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[u[3]||(u[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Direfund",-1)),t("th",Ef,r(a(K)(s.data.total_refunded)),1),u[4]||(u[4]=t("th",null,null,-1))]),t("tr",null,[u[5]||(u[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Refund",-1)),t("th",jf,r(a(K)(s.data.remaining_refund)),1),u[6]||(u[6]=t("td",null,null,-1))])])])]),_:1})]),e($o,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=p=>o.value=p),total:n.value,supplier:s.data.supplier,onAccepted:g},null,8,["modelValue","total","supplier"])],64))}},Af=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),Nf={class:"q-gutter-sm"},Mf={class:"col col-lg-6 q-pa-xs",align:"center"},$l="Retur Pembelian",Bf={__name:"Detail",setup(m){const s=new URLSearchParams(window.location.search),d=be(),o=d.props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"main-info");he(()=>{vt(()=>{const f=s.get("print_size");f&&v(f)})});const v=f=>{window.open(route("admin.purchase-order-return.print",{id:d.props.data.id,size:f}),"_self")};return(f,u)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),h(J,null,[e(p,{title:$l}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r($l))])]),"left-button":l(()=>[t("div",Nf,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=_=>f.$goBack())})])]),"right-button":l(()=>[e(U,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=_=>v("58mm"))}),e(U,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[2]||(u[2]=_=>v("a4"))}),i.value?k("",!0):(c(),D(U,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[3]||(u[3]=_=>a(ee).get(f.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Mf,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Pt,{modelValue:g.value,"onUpdate:modelValue":u[4]||(u[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(c(),D(ot,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Rt,{modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=_=>g.value=_),animated:""},{default:l(()=>[e(nt,{name:"main-info",class:"q-pa-none"},{default:l(()=>[e(ho,{data:a(o)},null,8,["data"])]),_:1}),e(nt,{name:"refund",class:"q-pa-none"},{default:l(()=>[e(xo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},zf=Object.freeze(Object.defineProperty({__proto__:null,default:Bf},Symbol.toStringTag,{value:"Module"})),Ff={class:"text-weight-medium wrap-column"},Lf={class:"text-caption text-grey-6 elipsis"},Kf={class:"column items-end"},Hf={class:"text-caption text-grey-6 text-italic"},So={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(m){const s=xe(),d=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(c(),D(Ie,{dense:"",rows:m.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ye({height:a(d)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(c(!0),h(J,null,Fe(g.cols,v=>(c(),D(Zt,{key:v.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left"},{default:l(()=>[t("div",Ff,r(g.row.product_name),1),t("div",Lf,r(g.row.product_barcode),1),g.row.notes?(c(),D($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal",props:g,class:"text-right"},{default:l(()=>[t("div",Kf,[t("div",null,r(a(K)(g.row.subtotal_cost)),1),t("div",Hf,r(a(K)(g.row.quantity))+" x Rp. "+r(a(K)(g.row.cost)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(U,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",g.row),disable:m.isProcessing},null,8,["onClick","disable"]),e(U,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",g.row),disable:m.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Yf=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),Wf={class:"row items-center no-wrap"},Qf={class:"col-auto"},Vo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:s,emit:d}){const o=m,i=d,n=()=>{i("save")},g=X(()=>o.item.quantity*o.item.cost),v=y=>{y.stopPropagation(),y.preventDefault()},f=y=>{o.modelValue&&(y.key==="Enter"?(n(),v(y)):y.key==="Escape"&&(i("update:modelValue",!1),v(y)))};he(()=>{window.addEventListener("keydown",f)}),ht(()=>{window.removeEventListener("keydown",f)}),s({getCurrentItem:()=>o.item});const p=()=>{};return(y,_)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":_[6]||(_[6]=q=>y.$emit("update:modelValue",q)),onBeforeShow:p},{default:l(()=>[e(fe,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",Wf,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Qf,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=q=>y.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:m.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=q=>m.item.product_name=q),label:"Produk","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:m.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=q=>m.item.quantity=q),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:m.item.cost,"onUpdate:modelValue":_[3]||(_[3]=q=>m.item.cost=q),label:"Modal / Harga Beli","hide-bottom-space":"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=q=>g.value=q),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:m.item.notes,"onUpdate:modelValue":_[5]||(_[5]=q=>m.item.notes=q),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[pe]]),te(e(U,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:m.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Jf=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"}));function Gf(){const m=T(new Date);let s=null;const d=()=>{m.value=new Date};return he(()=>{s=setInterval(d,1e3)}),ht(()=>{s&&clearInterval(s)}),{currentDateTime:m}}const Xf={class:"text-grey-8"},ya={__name:"DigitalClock",setup(m){const{currentDateTime:s}=Gf();return(d,o)=>(c(),h("div",Xf,r(a(ge)(a(s))),1))}},Zf={key:0,class:"q-select__selected-item"},qo={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(m,{expose:s,emit:d}){const o=T(null),i=m,n=d,g=T([]);let v=null;const f=T(i.modelValue);he(()=>{i.initialData&&(f.value=i.initialData)}),Ne(f,y=>{n("update:modelValue",y),n("supplierSelected",y)}),Ne(()=>i.modelValue,y=>{f.value=y}),s({focus:()=>{o.value&&o.value.focus()}});const p=(y,_)=>{if(y.length<i.minLength){_(()=>{g.value=[]});return}v&&clearTimeout(v),v=setTimeout(()=>{De.get(`/web-api/suppliers?q=${y}`).then(q=>{_(()=>{g.value=q.data.data})}).catch(q=>{console.error("Gagal mengambil data pemasok:",q),_(()=>{g.value=[]})})},100)};return(y,_)=>(c(),D(ce,{class:Ce(m.class),ref_key:"qSelectRef",ref:o,modelValue:f.value,"onUpdate:modelValue":_[0]||(_[0]=q=>f.value=q),"use-input":"","input-debounce":"0",label:m.label,options:g.value,onFilter:p,clearable:"",error:m.error,behavior:"menu","error-message":m.errorMessage,disable:m.disable,"hide-bottom-space":"",outlined:m.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(q=>[e(oe,eo(to(q.itemProps)),{default:l(()=>[e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[b(r(q.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(q=>[q.opt?(c(),h("div",Zf,r(q.opt.name),1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},eg={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(m,{emit:s}){return(d,o)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>d.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ae,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[te(e(U,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Co=wt(eg,[["__scopeId","data-v-abc5074e"]]),tg=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"}));function _a(m){const s=T(!1),d=()=>{const n=m.value||document.documentElement;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},i=()=>{s.value?o():d()};return ts(()=>{const n=()=>{s.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("mozfullscreenchange",n),document.removeEventListener("MSFullscreenChange",n)}}),{isFullscreen:s,requestFullscreen:d,exitFullscreen:o,toggleFullscreen:i}}const ag={class:"row items-center no-wrap"},lg={class:"col text-subtite text-bold text-grey-8"},og={class:"col-auto"},To={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:s,emit:d}){const o=m,i=d,n=()=>{i("save")},g=u=>{u.stopPropagation(),u.preventDefault()},v=u=>{o.modelValue&&(u.key==="Enter"?(n(),g(u)):u.key==="Escape"&&(i("update:modelValue",!1),g(u)))};return he(()=>{window.addEventListener("keydown",v)}),ht(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(u,p)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":p[4]||(p[4]=y=>u.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",ag,[t("div",lg," Edit "+r(m.data.code),1),t("div",og,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:p[0]||(p[0]=y=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(Ft,{modelValue:m.data.datetime,"onUpdate:modelValue":p[1]||(p[1]=y=>m.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:m.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status],"onUpdate:modelValue":p[2]||(p[2]=y=>u.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:m.data.notes,"onUpdate:modelValue":p[3]||(p[3]=y=>m.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[pe]]),te(e(U,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:m.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ng=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),sg={class:"row items-center no-wrap"},rg={class:"col-auto"},ig={class:"full-width row flex-center text-grey-8 q-gutter-sm"},dg={key:0},ka={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1},priceType:{type:String,require:!1,default:"price_1"}},emits:["update:modelValue","product-selected"],setup(m,{emit:s}){const d=xe(),o=m,i=T(!1),n=T(o.showCost),g=s,v=T(null),f=T([]),u=T(!0),p=T(-1),y=Re({search:"",status:"active",...Me()}),_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});[...tt(window.CONSTANTS.PRODUCT_PRICE_TYPES)];const q=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_1.replace("Harga ","H "),field:"price_1",align:"right"},{name:"price_2",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_2.replace("Harga ","H "),field:"price_2",align:"right"},{name:"price_3",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_3.replace("Harga ","H "),field:"price_3",align:"right"}],x=X(()=>{if(i.value)return q;const O=q.filter(z=>z.name!=="cost");return d.screen.gt.sm?O:O.filter(z=>z.name==="name"||z.name==="stock")});he(()=>{w()});const w=()=>{o.modelValue!==!1&&M()},M=(O=null)=>{u.value=!0,p.value=-1,Be({pagination:_,filter:y,props:O,rows:f,url:route("admin.product.data"),loading:u,tableRef:v})},Y=()=>{w()},C=O=>{g("product-selected",O),setTimeout(()=>{g("update:modelValue",!1)},100)},B=O=>{if(!o.modelValue)return;const z=f.value.length;z!==0&&(O.key==="ArrowDown"?(O.preventDefault(),p.value=(p.value+1)%z):O.key==="ArrowUp"?(O.preventDefault(),p.value=(p.value-1+z)%z):O.key==="Enter"&&p.value!==-1&&(O.preventDefault(),C(f.value[p.value])))};return Ne(()=>o.modelValue,(O,z)=>{z===!0&&O===!1&&(y.search=""),O===!0&&M()}),(O,z)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":z[4]||(z[4]=j=>O.$emit("update:modelValue",j)),maximized:a(d).screen.lt.sm},{default:l(()=>[e(fe,{class:"column fit",tabindex:"0",onKeydown:B,ref:"cardRef"},{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",sg,[z[5]||(z[5]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",rg,[e(U,{flat:"",round:"",size:"sm",icon:"close",onClick:z[0]||(z[0]=j=>O.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:Ce(["q-py-sm",a(d).screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(ne,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":[z[1]||(z[1]=j=>y.search=j),Y],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"]),n.value?(c(),D(na,{key:0,modelValue:i.value,"onUpdate:modelValue":z[2]||(z[2]=j=>i.value=j),label:"Tampilkan Modal",style:{"margin-left":"-10px"}},null,8,["modelValue"])):k("",!0)]),_:1},8,["class"]),e(ae,{class:Ce(["q-py-xs col",a(d).screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(Ie,{ref_key:"tableRef",ref:v,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":z[3]||(z[3]=j=>_.value=j),filter:y.search,loading:u.value,columns:x.value,rows:f.value,"rows-per-page-options":[10,25,50],onRequest:M,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":l(({icon:j,message:V,filter:I})=>[t("div",ig,[t("span",null,r(V),1)])]),body:l(j=>[e(Pe,{tabindex:"0",props:j,class:Ce([{inactive:["stocked","raw_materials"].includes(j.row.type)&&j.row.stock==0,"selected-row":p.value===j.rowIndex},"cursor-pointer"]),onClick:V=>C(j.row),onKeydown:[Wt(G(V=>C(j.row),["prevent","stop"]),["enter"]),Wt(G(V=>C(j.row),["prevent"]),["space"])]},{default:l(()=>[e(W,{key:"name",props:j,class:"wrap-column"},{default:l(()=>[e($e,{text:j.row.name},null,8,["text"]),j.row.description?(c(),D($e,{key:0,text:j.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),a(d).screen.lt.md?(c(),h(J,{key:1},[t("div",null," Stok: "+r(j.row.type=="stocked"?a(K)(j.row.stock)+" "+j.row.uom:"-"),1),i.value?(c(),h("div",dg," Modal: Rp. "+r(a(K)(j.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+r(a(K)(j.row.price_1)),1),t("div",null,"Harga 2: Rp. "+r(a(K)(j.row.price_1)),1),t("div",null,"Harga 3: Rp. "+r(a(K)(j.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"stock",props:j,class:"text-right"},{default:l(()=>[b(r(j.row.type=="stocked"?a(K)(j.row.stock)+" "+j.row.uom:"-"),1)]),_:2},1032,["props"]),e(W,{key:"cost",props:j,class:"wrap-column text-right"},{default:l(()=>[b(r(a(K)(j.row.cost)),1)]),_:2},1032,["props"]),e(W,{key:"price_1",props:j,class:"wrap-column text-right"},{default:l(()=>[b(r(a(K)(j.row.price_1)),1)]),_:2},1032,["props"]),e(W,{key:"price_2",props:j,class:"wrap-column text-right"},{default:l(()=>[b(r(a(K)(j.row.price_2)),1)]),_:2},1032,["props"]),e(W,{key:"price_3",props:j,class:"wrap-column text-right"},{default:l(()=>[b(r(a(K)(j.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},ug={class:"q-gutter-sm"},mg={class:"row items-center"},cg={class:"text-weight-bold"},pg={class:"row q-col-gutter-none full-width"},fg={class:"col-sm-6 col-12 col"},gg={class:"row full-width"},bg={key:0,class:"row"},vg={class:"col-sm-6 col-12"},yg={class:"row q-ml-sm items-end"},_g={class:"row col grow"},kg={class:"col-12 q-pa-sm column"},wg={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},hg={key:0,class:"col"},$g={class:"text-caption text-grey-6 q-mt-xs"},xg={key:0,class:"text-caption text-grey-8 q-mt-xs"},Sg={class:"text-italic"},Vg={key:1,class:"col"},qg={class:"q-pa-sm q-pb-none text-grey-8"},Cg={class:"col"},Tg={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Pg={class:"text-h4 text-weight-bold"},Rg={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Og={class:"col q-py-sm"},Dg={class:"q-py-sm"},Ig={__name:"Editor",setup(m){const s=xe(),d=be(),o=T(!0),i=T(null),n=T(null),g=T(null),v=T(!1),f=T(null),u=T(null),{isFullscreen:p,toggleFullscreen:y}=_a(u),_="Retur #"+d.props.data.code,q=T(d.props.data.supplier),x=T(""),w=T(!1),M=T(!1),Y=T(!1),C=T(!1),B=T(null),O=Re({id:d.props.data.id,code:d.props.data.code,supplier_id:d.props.data.supplier_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),z=X(()=>O.items.reduce((ue,L)=>ue+L.price*L.quantity,0)),j=()=>{var ue;y(),p.value||(ue=f==null?void 0:f.value)==null||ue.hideDrawer()},V=ue=>isNaN(ue)||ue<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,I=ue=>isNaN(ue)||ue<0?(bt("Harga tidak valid.","top"),!1):!0,R=ue=>!ue||ue.length==0?(bt("Barcode tidak valid.","top"),!1):!0,$=ue=>{x.value.endsWith("*")?x.value+=ue.name:x.value=ue.name},E=async()=>{const ue=x.value.trim();if(ue.length===0){M.value=!0;return}const L=ue.split("*");let ye=1,se="",H=null;if(L.length===1)se=L[0];else if(L.length<=3)ye=parseInt(L[0]),se=L[1],L.length===3&&(H=parseFloat(L[2]));else{bt("Input tidak valid.","top");return}if(se.length===0){M.value=!0;return}!R(se)&&!V(ye)&&!I(H)||(w.value=!0,await De.post(route("admin.purchase-order-return.add-item"),{order_id:O.id,product_code:se,qty:ye,price:H,merge:o.value}).then(_e=>{const de=_e.data.data.item;let Q=-1;_e.data.data.mergeItem&&(Q=O.items.findIndex(Ve=>Ve.id===de.id)),Q===-1?O.items.push(de):O.items[Q]=de,x.value="",H!==null&&H!==parseFloat(de.price)&&bt("Harga tidak dapat diubah!","top")}).catch(_e=>{var de,Q;ct((Q=(de=_e.response)==null?void 0:de.data)==null?void 0:Q.message,"top"),console.error("Gagal mengambil data produk:",_e)}),w.value=!1,vt(()=>{var _e;(_e=i.value)==null||_e.focus()}))},N=ue=>{B.value=Object.create(ue),Y.value=!0},S=ue=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ue.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{w.value=!0,De.post(route("admin.purchase-order-return.remove-item"),{id:ue.id}).then(()=>{const L=O.items.findIndex(ye=>ye.id===ue.id);L!==-1&&(O.items.splice(L,1)[0],pt("Item telah dihapus","top"))}).catch(L=>{var ye,se;ct(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{w.value=!1})})},A=()=>{w.value=!0;const ue=n.value.getCurrentItem(),L={id:ue.id,qty:ue.quantity,cost:ue.cost};ue.notes&&(L.notes=ue.notes),De.post(route("admin.purchase-order-return.update-item"),L).then(ye=>{const se=ye.data.data,H=O.items.findIndex(_e=>_e.id===se.id);H!==-1&&(O.items[H]=se,pt("Item telah diperbarui","top")),Y.value=!1}).catch(ye=>{var se,H;ct(((H=(se=ye==null?void 0:ye.response)==null?void 0:se.data)==null?void 0:H.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ye)}).finally(()=>{w.value=!1})};he(()=>{const ue=L=>{v.value||Y.value||M.value||C.value||(L.key==="F1"?(L.preventDefault(),v.value=!0):L.key==="F2"?(L.preventDefault(),g.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),re()):L.key==="F11"?(L.preventDefault(),j()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault())};document.addEventListener("keydown",ue),ht(()=>{document.removeEventListener("keydown",ue)}),vt(()=>{var L;(L=f==null?void 0:f.value)==null||L.hideDrawer()})});const le=async()=>{w.value=!0;const ue={id:O.id,supplier_id:O.supplier_id??null,datetime:Xt(O.datetime),notes:O.notes};await De.post(route("admin.purchase-order-return.update"),ue).then(L=>{const ye=L.data.data.id;O.supplier_id=ye.supplier_id}).catch(L=>{var ye,se;ct(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{w.value=!1})},re=ue=>{if(O.items.length===0){pt("Item masih kosong","top");return}$t.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{w.value=!0,De.post(route("admin.purchase-order-return.close",{id:O.id})).then(L=>{pt("Transaksi selesai"),ee.get(route("admin.purchase-order-return.detail",{id:O.id}))}).catch(L=>{var ye,se;ct((se=(ye=L.response)==null?void 0:ye.data)==null?void 0:se.message),console.error(L)}).finally(()=>{w.value=!1})})},me=()=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.purchase-order-return.cancel",{id:O.id}),{id:O.id}).then(()=>{pt("Transaksi telah dibatalkan."),ee.visit(route("admin.purchase-order-return.detail",{id:O.id}))}).catch(ue=>{var ye,se;const L=((se=(ye=ue.response)==null?void 0:ye.data)==null?void 0:se.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(ue)})})},Oe=()=>{window.open(route("admin.purchase-order-return.detail",{id:O.id})+"?preview=1","_blank")},Ge=X(()=>q.value?q.value.wallet_balance>=z.value:!0);return(ue,L)=>{const ye=Z("i-head"),se=Z("authenticated-layout");return c(),h(J,null,[e(ye,{title:_}),e(se,{ref_key:"authLayoutRef",ref:f,"show-drawer-button":!0},{title:l(()=>[b(r(_))]),"left-button":l(()=>[t("div",ug,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=H=>a(ee).get(ue.route("admin.purchase-order-return.index")))})])]),"right-button":l(()=>[t("div",mg,[a(s).screen.gt.sm?(c(),h(J,{key:0},[t("div",cg,r(a(d).props.auth.user.username),1),L[20]||(L[20]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ya)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",pg,[t("div",fg,[t("div",gg,[e(qo,{ref_key:"supplierAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:q.value,"onUpdate:modelValue":L[2]||(L[2]=H=>q.value=H),label:"Pemasok",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),q.value?(c(),h("div",bg,[t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",Ge.value?"text-green":"text-red"])}," Wallet: "+r(q.value?"Rp. "+a(K)(q.value?q.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",q.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(q.value?"Rp. "+a(K)(q.value?q.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",vg,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:x.value,"onUpdate:modelValue":L[5]||(L[5]=H=>x.value=H),onKeyup:L[6]||(L[6]=Wt(G(H=>E(),["prevent"]),["enter"])),loading:w.value,disable:w.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(P,{name:"search",onClick:L[3]||(L[3]=H=>M.value=!0),class:"cursor-pointer"})]),append:l(()=>{var H;return[((H=x.value)==null?void 0:H.length)>0?(c(),D(P,{key:0,name:"send",onClick:L[4]||(L[4]=_e=>E()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",yg,[e(St,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[7]||(L[7]=H=>o.value=H),label:"Gabungkan item",disable:w.value},null,8,["modelValue","disable"])])])]),t("div",_g,[t("div",kg,[e(So,{items:O.items,onUpdateQuantity:L[8]||(L[8]=({id:H,value:_e})=>ue.updateQuantity(H,_e)),onRemoveItem:S,onEditItem:N,"is-processing":w.value},null,8,["items","is-processing"])])]),t("div",wg,[a(s).screen.gt.sm?(c(),h("div",hg,[t("div",$g,r(O.items.length)+" item(s) ",1),O.notes?(c(),h("div",xg,[L[21]||(L[21]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Sg,[e($e,{text:O.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(c(),h("div",Vg,[t("div",qg,[t("div",null,"Return #: "+r(O.code),1),t("div",null,"Order #: "+r(a(d).props.data.purchase_order.code),1),t("div",null,r(a(ge)(O.datetime)),1)])])):k("",!0),t("div",Cg,[t("div",Tg,[L[23]||(L[23]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Pg,[L[22]||(L[22]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(a(K)(z.value)),1)])])])]),t("div",Rg,[t("div",Og,[e(U,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:L[9]||(L[9]=H=>re()),disable:!ue.$can("admin.purchase-order-return.close")||w.value||O.items.length===0||O.status!=="draft",loading:w.value},null,8,["disable","loading"])]),t("div",Dg,[e(U,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[13]||(L[13]=G(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[te((c(),D(oe,{clickable:"",onClick:L[10]||(L[10]=G(H=>C.value=!0,["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>L[24]||(L[24]=[b("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),te((c(),D(oe,{clickable:"",onClick:L[11]||(L[11]=G(H=>Oe(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"preview"})]),_:1}),e(F,null,{default:l(()=>L[25]||(L[25]=[b("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),te((c(),D(oe,{clickable:"",onClick:L[12]||(L[12]=G(H=>me(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:l(()=>L[26]||(L[26]=[b(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Vo,{ref_key:"itemEditorRef",ref:n,modelValue:Y.value,"onUpdate:modelValue":L[14]||(L[14]=H=>Y.value=H),item:B.value,onSave:L[15]||(L[15]=H=>A()),"is-processing":w.value},null,8,["modelValue","item","is-processing"]),e(ka,{modelValue:M.value,"onUpdate:modelValue":L[16]||(L[16]=H=>M.value=H),onProductSelected:$},null,8,["modelValue"]),e(To,{modelValue:C.value,"onUpdate:modelValue":L[17]||(L[17]=H=>C.value=H),data:O,onSave:L[18]||(L[18]=H=>le()),"is-processing":w.value},null,8,["modelValue","data","is-processing"]),e(Co,{modelValue:v.value,"onUpdate:modelValue":L[19]||(L[19]=H=>v.value=H)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},Ug=Object.freeze(Object.defineProperty({__proto__:null,default:Ig},Symbol.toStringTag,{value:"Module"})),Eg={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},jg={class:"q-pa-xs"},Ag={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ng={key:0},Mg={key:1},Bg={key:2},zg={key:3},Fg={key:0},Lg={key:0},Kg={key:1},Hg={class:"flex justify-end"},xl="Retur Pembelian",Yg={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Bt(),u=zt(),p=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...Ct(f-2,f-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Tt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES)],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES)],x=Re({search:"",year:f,month:u,status:"all",refund_status:"all",...Me()}),w=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),M=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{j()});const Y=R=>{if(R.status=="draft"){C(R);return}B(R)},C=R=>{ee.get(route("admin.purchase-order-return.edit",R.id))},B=R=>{ee.get(route("admin.purchase-order-return.detail",R.id))},O=R=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${R.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.purchase-order-return.cancel",{id:R.id}),{id:R.id}).then($=>{const E=$.data.data,N=o.value.findIndex(S=>S.id===E.id);if(N===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[N].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var N,S;const E=((S=(N=$.response)==null?void 0:N.data)==null?void 0:S.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:E,color:"warning",position:"bottom"}),console.error($)})})},z=R=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${R.code}?`,url:route("admin.purchase-order-return.delete",R.id),fetchItemsCallback:j,loading:i}),j=(R=null)=>{Be({pagination:w,filter:x,props:R,rows:o,url:route("admin.purchase-order-return.data"),loading:i,tableRef:n})},V=()=>{j()},I=X(()=>s.screen.gt.sm?M:M.filter(R=>R.name==="id"||R.name==="action"));return Ne(()=>x.year,R=>{R===null&&(x.month=null)}),(R,$)=>{const E=Z("i-head"),N=Z("authenticated-layout");return c(),h(J,null,[e(E,{title:xl}),e(N,null,He({title:l(()=>[b(r(xl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=S=>d.value=!d.value)},null,8,["icon"]),R.$can("admin.purchase-order-return.edit")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=S=>a(ee).get(R.route("admin.purchase-order-return.add")))})):k("",!0)]),default:l(()=>[t("div",jg,[e(Ie,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:w.value,"onUpdate:pagination":$[10]||($[10]=S=>w.value=S),filter:x.search,loading:i.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(v)}),onRequest:j,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:A,filter:le})=>[t("div",Ag,[t("span",null,r(A)+" "+r(le?" with term "+le:""),1)])]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:G(A=>Y(S.row),["prevent"])},{default:l(()=>[e(W,{key:"code",props:S,class:"wrap-column"},{default:l(()=>{var A,le,re;return[t("div",null,[e(P,{name:"tag"}),b(" "+r(S.row.code),1)]),t("div",null,[e(P,{class:"inline-icon",name:"calendar_today"}),b(r(a(ge)(S.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[S.row.cashier?(c(),h("div",Ng,[e(P,{name:"person",class:"inline-icon"}),b(" Kasir: "+r((A=S.row.cashier)==null?void 0:A.username),1)])):k("",!0),S.row.cashier_session?(c(),h("div",Mg,[e(P,{name:"point_of_sale",class:"inline-icon"}),b(" Terminal: "+r((re=(le=S.row.cashier_session)==null?void 0:le.cashier_terminal)==null?void 0:re.name),1)])):k("",!0),S.row.supplier?(c(),h("div",Bg,[e(P,{name:"person",class:"inline-icon"}),e(ba,{href:R.route("admin.supplier.detail",{id:S.row.supplier.id}),onClick:$[7]||($[7]=G(()=>{},["stop"]))},{default:l(()=>[b(" "+r(S.row.supplier.code)+" - "+r(S.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(K)(S.row.grand_total)),1),S.row.notes?(c(),h("div",zg,[e(P,{name:"notes"}),b(" "+r(S.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Mt,{status:S.row.status,statuses:R.$CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Mt,{status:S.row.refund_status,statuses:R.$CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(W,{key:"supplier_id",props:S},{default:l(()=>[S.row.supplier?(c(),h("div",Fg,[t("div",null,[e(P,{name:"person",class:"inline-icon"}),b(" "+r(S.row.supplier_code)+" - "+r(S.row.supplier_name),1)]),S.row.supplier_phone?(c(),h("div",Lg,[e(P,{name:"phone",class:"inline-icon"}),b(" "+r(S.row.supplier_phone),1)])):k("",!0),S.row.supplier_address?(c(),h("div",Kg,[e(P,{name:"home_pin",class:"inline-icon"}),b(" "+r(S.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:S},{default:l(()=>[b(r(a(K)(S.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:S},{default:l(()=>[e($e,{text:S.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:S,onClick:$[9]||($[9]=G(()=>{},["stop"]))},{default:l(()=>[t("div",Hg,[R.$can("admin.purchase-order-return.detail")||R.$can("admin.purchase-order-return.edit")||R.$can("admin.purchase-order-return.cancel")||R.$can("admin.purchase-order-return.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[S.row.status!="draft"&&R.$can("admin.purchase-order-return.detail")?te((c(),D(oe,{key:0,onClick:G(A=>B(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"visibility"})]),_:1}),e(F,null,{default:l(()=>$[11]||($[11]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.row.status=="draft"&&R.$can("admin.purchase-order-return.edit")?te((c(),D(oe,{key:1,onClick:G(A=>C(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>$[12]||($[12]=[b(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.row.status=="draft"&&R.$can("admin.purchase-order-return.cancel")?te((c(),D(oe,{key:2,onClick:G(A=>O(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"cancel"})]),_:1}),e(F,null,{default:l(()=>$[13]||($[13]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),R.$can("admin.purchase-order-return.delete")?te((c(),D(oe,{key:3,onClick:G(A=>z(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>$[14]||($[14]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Eg,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[$[2]||($[2]=S=>x.year=S),V],options:p,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(c(),D(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[$[3]||($[3]=S=>x.month=S),V],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.status,"onUpdate:modelValue":[$[4]||($[4]=S=>x.status=S),V],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:x.refund_status,"onUpdate:modelValue":[$[5]||($[5]=S=>x.refund_status=S),V],options:q,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":$[6]||($[6]=S=>x.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wg=Object.freeze(Object.defineProperty({__proto__:null,default:Yg},Symbol.toStringTag,{value:"Module"})),Qg={key:0,class:"text-center q-mb-md text-grey-8"},Jg={class:"text-subtitle2 text-weight-medium"},Gg={class:"text-h5 text-center text-primary q-pb-md"},Xg={class:"q-mb-md flex flex-center"},Zg={key:1},e1={class:"col-6"},t1={class:"col-6"},a1={class:"row"},l1={class:"text-center q-mt-md"},o1={key:0,class:"text-h6 text-negative text-weight-bold"},n1={key:1,class:"text-h6 text-green-8 text-weight-bold"},s1={key:2,class:"text-h6 text-positive text-weight-bold"},r1={key:2},i1={class:"text-h6 text-negative text-center"},d1={key:3},u1={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:s}){const d=m,o=s,i=be(),n=T(!1),g=T("payment"),v=T(new Date),f=T(null),u=Re([]),p=X(()=>u.every(I=>I.id&&typeof I.amount=="number"&&I.amount>0)),y=X(()=>i.props.accounts.map(I=>({label:I.name,value:I.id}))),_=X(()=>u.reduce((I,R)=>I+(R.amount||0),0)),q=X(()=>d.total-_.value),x=X(()=>{if(!d.supplier)return!0;const I=u.find($=>$.id==="wallet");return(I?I.amount:0)<=d.supplier.balance}),w=new Date,M=dt.addToDate(new Date,{days:30}),Y=X(()=>[I=>!!I||"Tanggal jatuh tempo harus diisi",I=>dt.isBetweenDates(I,w,M,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),C=X(()=>{if(g.value==="debt")return!!d.supplier&&Y.value.every(E=>E(v.value)===!0);const I=u.some(E=>(E.amount||0)>0),R=u.every(E=>(E.amount||0)>=0),$=q.value<=0;return p.value&&I&&R&&$}),B=()=>{u.length<3&&u.push({id:null,amount:0})},O=I=>{if(u.length>1){const R=u.findIndex($=>$.id===I);R!==-1&&u.splice(R,1)}},z=I=>{g.value=I,v.value=new Date,u.splice(0,u.length),I==="payment"&&y.value.length>0&&(u.splice(0,u.length,{id:y.value[0].value,amount:d.total}),vt(()=>{f.value&&f.value.length>0&&(f.value[0].focus(),f.value[0].select())}))},j=()=>{if(!C.value)return;n.value=!0;let I={total:d.total,is_debt:g.value==="debt"};if(g.value==="debt")I.due_date=dt.formatDate(v.value,"YYYY-MM-DD"),I.payments=[];else{const R=_.value,$=R>d.total?R-d.total:0,E=q.value>0?q.value:0;I.payments=u,I.remaining_debt=E,I.change=$}o("accepted",I),n.value=!1},V=()=>{if(y.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}z("payment")};return(I,R)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":R[3]||(R[3]=$=>I.$emit("update:modelValue",$)),onBeforeShow:V},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>R[4]||(R[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[m.supplier?(c(),h("div",Qg,[t("div",Jg,[b(" Nama: "+r(m.supplier.name),1),R[5]||(R[5]=t("br",null,null,-1)),b(" Utang / Piutang: Rp. "+r(a(K)(m.supplier.balance)),1)])])):k("",!0),t("div",Gg," Total: Rp. "+r(a(K)(m.total)),1),t("div",Xg,[e(a(Yt),{modelValue:g.value,"onUpdate:modelValue":[R[0]||(R[0]=$=>g.value=$),z],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!m.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="payment"?(c(),h("div",Zg,[(c(!0),h(J,null,Fe(u,($,E)=>(c(),h("div",{key:E,class:"row q-col-gutter-sm q-mb-sm"},[t("div",e1,[e(a(ce),{modelValue:$.id,"onUpdate:modelValue":N=>$.id=N,options:y.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[N=>!!N||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",t1,[e(Ee,{modelValue:$.amount,"onUpdate:modelValue":N=>$.amount=N,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!x.value,"error-message":x.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:E===0?"firstPaymentInputRef":null},He({_:2},[u.length>1?{name:"append",fn:l(()=>[e(P,{size:"xs",name:"close",class:"cursor-pointer",onClick:N=>O(E)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",a1,[e(U,{disable:!(u.length<3&&q.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:B,size:"sm"},null,8,["disable"])]),t("div",l1,[q.value>0?(c(),h("div",o1," Sisa Tagihan: Rp. "+r(a(K)(q.value)),1)):q.value<0?(c(),h("div",n1," Kembalian: Rp. "+r(a(K)(Math.abs(q.value))),1)):(c(),h("div",s1," Tagihan Terbayar "))])])):g.value==="debt"&&m.supplier?(c(),h("div",r1,[e(da,{outlined:"",modelValue:v.value,"onUpdate:modelValue":R[1]||(R[1]=$=>v.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(w),"max-date":a(M),rules:Y.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",i1," Total Utang: Rp. "+r(a(K)(m.total)),1)])):g.value==="debt"&&!m.supplier?(c(),h("div",d1,R[6]||(R[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(U,{flat:"",label:"Batal",color:"grey",onClick:R[2]||(R[2]=$=>I.$emit("update:modelValue",!1))}),e(U,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:j,disable:n.value||!C.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},m1=Object.freeze(Object.defineProperty({__proto__:null,default:u1},Symbol.toStringTag,{value:"Module"})),c1={key:0},p1={style:{float:"right"}},f1={key:1},g1={style:{float:"right"}},b1={key:2},v1={style:{float:"right"}},y1={key:3},_1={style:{float:"right"}},k1={style:{float:"right"}},w1={class:"q-gutter-sm"},h1={class:"q-my-md"},$1={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(m,{emit:s}){const d=T(null),o=()=>{var i;(i=d.value)==null||i.focus()};return(i,n)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ae,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(m.order.code),1)]),m.customer?(c(),h("tr",c1,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(m.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(m.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ")),t("div",p1,r(a(K)(m.payment.total)),1)])]),m.payment.cash_amount?(c(),h("tr",f1,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ")),t("div",g1,r(a(K)(m.payment.cash_amount)),1)])])):k("",!0),m.payment.wallet_amount?(c(),h("tr",b1,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ")),t("div",v1,r(a(K)(m.payment.wallet_amount)),1)])])):k("",!0),m.payment.remaining_debt?(c(),h("tr",y1,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ")),t("span",_1,r(a(K)(m.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ")),t("div",k1,r(a(K)(m.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",w1,[e(U,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(U,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",h1,[e(U,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},x1=wt($1,[["__scopeId","data-v-f0591c00"]]),S1=Object.freeze(Object.defineProperty({__proto__:null,default:x1},Symbol.toStringTag,{value:"Module"})),V1={class:"column"},q1={class:"bg-grey-2 q-pa-xs"},C1={class:"text-subtitle1 text-bold text-grey-10"},T1={class:"col-12 col-sm-6"},P1={class:"full-width"},R1={key:1},O1={key:0},D1={key:1},I1={class:"col-12 col-sm-6",align:"left"},U1={class:"full-width"};const E1={key:1},j1={class:"full-width",style:{"border-collapse":"collapse"}},A1={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},N1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},M1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},B1={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},z1={key:0},F1={class:"col-12 col-sm-6"},L1={class:"text-body2 text-grey-7 text-italic"},K1={class:"col-12 col-sm-6"},H1={class:"row justify-end q-gutter-y-xs"},Y1={class:"col-12 row justify-between"},W1={class:"text-subtitle2 text-bold"},Po={__name:"InvoiceTab",props:{data:Object},setup(m){const s=m;return(d,o)=>{const i=Z("i-link");return c(),h("div",V1,[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",q1,[t("div",C1," INVOICE #"+r(s.data.code),1)])]),_:1}),e(Ae),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",T1,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",P1,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(c(),D(i,{key:0,href:d.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:l(()=>[e(P,{class:"inline-icon",name:"person"}),b(" "+r(s.data.supplier_name),1)]),_:1},8,["href"])):(c(),h("div",R1,[e(P,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pemasok Umum "))]))])]),s.data.supplier_phone?(c(),h("tr",O1,[t("td",null,[e(P,{class:"inline-icon",name:"phone"}),b(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(c(),h("tr",D1,[t("td",null,[e(P,{class:"inline-icon",name:"home_pin"}),b(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",I1,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",U1,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ge)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(d.$CONSTANTS.PURCHASE_ORDER_STATUSES[s.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)]),k("",!0),s.data.due_date?(c(),h("tr",E1,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(oa)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",j1,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(c(!0),h(J,null,Fe(s.data.details,n=>(c(),h("tr",{key:n.id},[t("td",A1,[e(i,{href:d.route("admin.product.detail",{id:n.product_id})},{default:l(()=>[b(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",N1,r(n.quantity),1),t("td",null,r(n.product_uom),1),t("td",M1,r(a(K)(n.cost)),1),t("td",B1,r(a(K)(n.subtotal_cost)),1)]))),128)),s.data.details.length==0?(c(),h("tr",z1,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",F1,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",L1,r(s.data.notes?s.data.notes:"-"),1)]),t("div",K1,[t("div",H1,[t("div",Y1,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",W1,r(a(K)(s.data.grand_total)),1)])])])]),_:1})])}}},Q1=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),J1={key:0,class:"text-center q-mb-md text-grey-8"},G1={class:"text-subtitle2 text-weight-medium"},X1={class:"text-h5 text-center text-primary q-pb-md"},Z1={class:"text-center q-mt-md"},eb={key:0,class:"text-h6 text-negative text-weight-bold"},tb={key:1,class:"text-h6 text-green-8 text-weight-bold"},ab={key:2,class:"text-h6 text-positive text-weight-bold"},Ro={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:s}){const d=m,o=s,i=be(),n=T(!1),g=T({method:null,amount:d.total,notes:null}),v=i.props.data.supplier,f=X(()=>[...i.props.accounts.map(w=>({label:w.type=="bank"?w.name+" - "+w.number:w.name,value:w.id}))]),u=X(()=>d.total-(g.value.amount||0)),p=X(()=>g.value.method&&typeof g.value.amount=="number"&&g.value.amount>0),y=X(()=>g.value.method?(g.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),_=X(()=>p.value&&y.value===null),q=()=>{if(!_.value)return;n.value=!0;const w={total_paid:g.value.amount,payments:[{id:g.value.method,amount:g.value.amount}],notes:g.value.notes,remaining_debt:Math.max(0,d.total-(g.value.amount||0))};o("accepted",w),n.value=!1},x=()=>{g.value.amount=d.total,g.value.method=null,g.value.notes=null};return(w,M)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":M[4]||(M[4]=Y=>w.$emit("update:modelValue",Y)),onBeforeShow:x},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>M[5]||(M[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(v)?(c(),h("div",J1,[t("div",G1,[b(r(a(v).name)+" ",1),M[6]||(M[6]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(a(K)(a(v).balance)),1)])])):k("",!0),t("div",X1," Total: Rp. "+r(a(K)(m.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":M[0]||(M[0]=Y=>g.value.method=Y),options:f.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value,rules:[Y=>!!Y||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":M[1]||(M[1]=Y=>g.value.amount=Y),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":y.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":M[2]||(M[2]=Y=>g.value.notes=Y),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Z1,[u.value>0?(c(),h("div",eb," Sisa Tagihan: Rp. "+r(a(K)(u.value)),1)):u.value<0?(c(),h("div",tb," Kembalian: Rp. "+r(a(K)(Math.abs(u.value))),1)):(c(),h("div",ab," Tagihan Terbayar "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(U,{flat:"",label:"Batal",color:"grey",onClick:M[3]||(M[3]=Y=>w.$emit("update:modelValue",!1))}),e(U,{label:"Bayar",color:"positive",onClick:q,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},lb=Object.freeze(Object.defineProperty({__proto__:null,default:Ro},Symbol.toStringTag,{value:"Module"})),ob={class:"column"},nb={class:"row"},sb={class:"full-width",style:{"border-collapse":"collapse"}},rb={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ib={class:"row items-center q-gutter-x-sm"},db={class:"text-weight-bold"},ub={class:"row items-center q-gutter-x-sm q-mt-xs"},mb={class:"text-caption text-grey-6"},cb={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},pb={class:"text-caption text-grey-6"},fb={class:"q-mt-xs"},gb={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},bb={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},vb={key:0},yb={class:"text-right q-pa-sm"},_b={class:"text-right q-pa-sm"},Oo={__name:"PaymentTab",props:{data:Object},setup(m){const s=m,d=X(()=>s.data.grand_total-s.data.total_paid),o=xe(),i=T(!1),n=()=>{i.value=!0},g=async f=>{const u={order_id:s.data.id,payments:f.payments,notes:f.notes};o.loading.show({message:"Memproses pembayaran..."});try{const p=await De.post(route("admin.purchase-order.add-payment"),u);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),i.value=!1,ee.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(p){let y="Gagal memproses pembayaran.";p.response&&p.response.data&&p.response.data.message?y=p.response.data.message:p.message&&(y=p.message),o.notify({message:y,color:"negative",icon:"error"})}finally{o.loading.hide()}},v=f=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await De.post(route("admin.purchase-order.delete-payment",{id:f.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(u){let p="Gagal menghapus pembayaran.";u.response&&u.response.data&&u.response.data.message?p=u.response.data.message:u.message&&(p=u.message),o.notify({message:p,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(f,u)=>(c(),h(J,null,[t("div",ob,[e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("div",nb,[f.$can("admin.purchase-order.add-payment")&&d.value>0?(c(),D(U,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:u[0]||(u[0]=G(p=>n(),["stop"]))})):k("",!0)]),t("table",sb,[u[7]||(u[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(c(!0),h(J,null,Fe(s.data.payments,p=>(c(),h("tr",{key:p.id},[t("td",rb,[t("div",ib,[e(P,{name:"tag",size:"xs",color:"grey-7"}),t("span",db,r(p.code),1)]),t("div",ub,[e(P,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",mb,r(a(ge)(p.created_at)),1)]),(p.type==="transfer"||p.type==="cash")&&p.account?(c(),h("div",cb,[e(P,{name:"wallet",size:"xs",color:"grey-7"}),t("span",pb,r(p.account.name),1)])):k("",!0),t("div",fb,[e(ft,{label:f.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[p.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",gb,r(a(K)(p.amount)),1),t("td",bb,[f.$can("admin.purchase-order.delete-payment")&&s.data.supplier_id?(c(),D(U,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>v(p)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(c(),h("tr",vb,u[2]||(u[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[u[3]||(u[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",yb,r(a(K)(s.data.total_paid)),1),u[4]||(u[4]=t("th",null,null,-1))]),t("tr",null,[u[5]||(u[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Tagihan",-1)),t("th",_b,r(a(K)(d.value)),1),u[6]||(u[6]=t("td",null,null,-1))])])])]),_:1})]),e(Ro,{modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=p=>i.value=p),total:d.value,customer:s.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},kb=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),wb={class:"q-gutter-sm"},hb={class:"col col-lg-6 q-pa-xs",align:"center"},Sl="Rincian Pembelian",$b={__name:"Detail",setup(m){const s=new URLSearchParams(window.location.search),o=be().props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"invoice"),v=()=>{window.print()};return(f,u)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),h(J,null,[e(p,{title:Sl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Sl))])]),"left-button":l(()=>[t("div",wb,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=_=>f.$goBack())})])]),"right-button":l(()=>[e(U,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=_=>v())}),i.value?k("",!0):(c(),D(U,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[2]||(u[2]=_=>a(ee).get(f.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",hb,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Pt,{modelValue:g.value,"onUpdate:modelValue":u[3]||(u[3]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(c(),D(ot,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Rt,{modelValue:g.value,"onUpdate:modelValue":u[4]||(u[4]=_=>g.value=_),animated:""},{default:l(()=>[e(nt,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(Po,{data:a(o)},null,8,["data"])]),_:1}),e(nt,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(Oo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},xb=wt($b,[["__scopeId","data-v-ef1ae89c"]]),Sb=Object.freeze(Object.defineProperty({__proto__:null,default:xb},Symbol.toStringTag,{value:"Module"})),Vb={class:"text-weight-medium wrap-column"},qb={class:"text-caption text-grey-6 elipsis"},Cb={class:"column items-end"},Tb={class:"text-caption text-grey-6 text-italic"},Do={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(m){const s=xe(),d=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(c(),D(Ie,{dense:"",rows:m.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ye({height:a(d)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(c(!0),h(J,null,Fe(g.cols,v=>(c(),D(Zt,{key:v.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left"},{default:l(()=>[t("div",Vb,r(g.row.product_name),1),t("div",qb,r(g.row.product_barcode),1),g.row.notes?(c(),D($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal",props:g,class:"text-right"},{default:l(()=>[t("div",Cb,[t("div",null,r(a(K)(g.row.subtotal_cost)),1),t("div",Tb,r(a(K)(g.row.quantity))+" x Rp. "+r(a(K)(g.row.cost)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(U,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",g.row),disable:m.isProcessing},null,8,["onClick","disable"]),e(U,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",g.row),disable:m.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Pb=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),Rb={key:0,class:"text-center q-mb-md text-grey-8"},Ob={class:"text-subtitle2 text-weight-medium"},Db={class:"text-h5 text-center text-primary q-pb-md"},Ib={class:"q-mb-md flex flex-center"},Ub={key:1},Eb={class:"col-6"},jb={class:"col-6"},Ab={class:"row"},Nb={class:"text-center q-mt-md"},Mb={key:0,class:"text-h6 text-negative text-weight-bold"},Bb={key:1,class:"text-h6 text-green-8 text-weight-bold"},zb={key:2,class:"text-h6 text-positive text-weight-bold"},Fb={key:2},Lb={class:"text-h6 text-negative text-center"},Kb={key:3},Io={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:s}){const d=m,o=s,i=be(),n=T(!1),g=T("payment"),v=T(new Date),f=T(null),u=Re([]),p=X(()=>u.every(I=>I.id&&typeof I.amount=="number"&&I.amount>0)),y=X(()=>i.props.accounts.map(I=>({label:I.name,value:I.id}))),_=X(()=>u.reduce((I,R)=>I+(R.amount||0),0)),q=X(()=>d.total-_.value),x=X(()=>{if(!d.supplier)return!0;const I=u.find($=>$.id==="wallet");return(I?I.amount:0)<=d.supplier.balance}),w=new Date,M=dt.addToDate(new Date,{days:30}),Y=X(()=>[I=>!!I||"Tanggal jatuh tempo harus diisi",I=>dt.isBetweenDates(I,w,M,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),C=X(()=>{if(g.value==="debt")return!!d.supplier&&Y.value.every(E=>E(v.value)===!0);const I=u.some(E=>(E.amount||0)>0),R=u.every(E=>(E.amount||0)>=0),$=q.value<=0;return p.value&&I&&R&&$}),B=()=>{u.length<3&&u.push({id:null,amount:0})},O=I=>{if(u.length>1){const R=u.findIndex($=>$.id===I);R!==-1&&u.splice(R,1)}},z=I=>{g.value=I,v.value=new Date,u.splice(0,u.length),I==="payment"&&y.value.length>0&&(u.splice(0,u.length,{id:y.value[0].value,amount:d.total}),vt(()=>{f.value&&f.value.length>0&&(f.value[0].focus(),f.value[0].select())}))},j=()=>{if(!C.value)return;n.value=!0;let I={total:d.total,is_debt:g.value==="debt"};if(g.value==="debt")I.due_date=dt.formatDate(v.value,"YYYY-MM-DD"),I.payments=[];else{const R=_.value,$=R>d.total?R-d.total:0,E=q.value>0?q.value:0;I.payments=u,I.remaining_debt=E,I.change=$}o("accepted",I),n.value=!1},V=()=>{if(y.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}z("payment")};return(I,R)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":R[3]||(R[3]=$=>I.$emit("update:modelValue",$)),onBeforeShow:V},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>R[4]||(R[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[m.supplier?(c(),h("div",Rb,[t("div",Ob,[b(" Nama: "+r(m.supplier.name),1),R[5]||(R[5]=t("br",null,null,-1)),b(" Utang / Piutang: Rp. "+r(a(K)(m.supplier.balance)),1)])])):k("",!0),t("div",Db," Total: Rp. "+r(a(K)(m.total)),1),t("div",Ib,[e(a(Yt),{modelValue:g.value,"onUpdate:modelValue":[R[0]||(R[0]=$=>g.value=$),z],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!m.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="payment"?(c(),h("div",Ub,[(c(!0),h(J,null,Fe(u,($,E)=>(c(),h("div",{key:E,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Eb,[e(a(ce),{modelValue:$.id,"onUpdate:modelValue":N=>$.id=N,options:y.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[N=>!!N||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",jb,[e(Ee,{modelValue:$.amount,"onUpdate:modelValue":N=>$.amount=N,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!x.value,"error-message":x.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:E===0?"firstPaymentInputRef":null},He({_:2},[u.length>1?{name:"append",fn:l(()=>[e(P,{size:"xs",name:"close",class:"cursor-pointer",onClick:N=>O(E)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Ab,[e(U,{disable:!(u.length<3&&q.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:B,size:"sm"},null,8,["disable"])]),t("div",Nb,[q.value>0?(c(),h("div",Mb," Sisa Tagihan: Rp. "+r(a(K)(q.value)),1)):q.value<0?(c(),h("div",Bb," Kembalian: Rp. "+r(a(K)(Math.abs(q.value))),1)):(c(),h("div",zb," Tagihan Terbayar "))])])):g.value==="debt"&&m.supplier?(c(),h("div",Fb,[e(da,{outlined:"",modelValue:v.value,"onUpdate:modelValue":R[1]||(R[1]=$=>v.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(w),"max-date":a(M),rules:Y.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Lb," Total Utang: Rp. "+r(a(K)(m.total)),1)])):g.value==="debt"&&!m.supplier?(c(),h("div",Kb,R[6]||(R[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(U,{flat:"",label:"Batal",color:"grey",onClick:R[2]||(R[2]=$=>I.$emit("update:modelValue",!1))}),e(U,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:j,disable:n.value||!C.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Hb=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"})),Yb={class:"row items-center no-wrap"},Wb={class:"col-auto"},Uo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:s,emit:d}){const o=m,i=d,n=()=>{i("save")},g=X(()=>o.item.quantity*o.item.cost),v=y=>{y.stopPropagation(),y.preventDefault()},f=y=>{o.modelValue&&(y.key==="Enter"?(n(),v(y)):y.key==="Escape"&&(i("update:modelValue",!1),v(y)))};he(()=>{window.addEventListener("keydown",f)}),ht(()=>{window.removeEventListener("keydown",f)}),s({getCurrentItem:()=>o.item});const p=()=>{};return(y,_)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":_[6]||(_[6]=q=>y.$emit("update:modelValue",q)),onBeforeShow:p},{default:l(()=>[e(fe,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",Yb,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Wb,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=q=>y.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:m.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=q=>m.item.product_name=q),label:"Produk","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:m.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=q=>m.item.quantity=q),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:m.item.cost,"onUpdate:modelValue":_[3]||(_[3]=q=>m.item.cost=q),label:"Modal / Harga Beli","hide-bottom-space":"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=q=>g.value=q),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:m.item.notes,"onUpdate:modelValue":_[5]||(_[5]=q=>m.item.notes=q),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[pe]]),te(e(U,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:m.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Qb=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),Jb={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(m,{emit:s}){return(d,o)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>d.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ae,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[te(e(U,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Eo=wt(Jb,[["__scopeId","data-v-a7905738"]]),Gb=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Xb={class:"row items-center no-wrap"},Zb={class:"col text-subtite text-bold text-grey-8"},ev={class:"col-auto"},jo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:s,emit:d}){const o=m,i=d,n=()=>{i("save")},g=u=>{u.stopPropagation(),u.preventDefault()},v=u=>{o.modelValue&&(u.key==="Enter"?(n(),g(u)):u.key==="Escape"&&(i("update:modelValue",!1),g(u)))};return he(()=>{window.addEventListener("keydown",v)}),ht(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(u,p)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":p[4]||(p[4]=y=>u.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",Xb,[t("div",Zb," Edit "+r(m.data.code),1),t("div",ev,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:p[0]||(p[0]=y=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(Ft,{modelValue:m.data.datetime,"onUpdate:modelValue":p[1]||(p[1]=y=>m.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:m.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status],"onUpdate:modelValue":p[2]||(p[2]=y=>u.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:m.data.notes,"onUpdate:modelValue":p[3]||(p[3]=y=>m.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[pe]]),te(e(U,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:m.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},tv=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),av={key:0},lv={style:{float:"right"}},ov={key:1},nv={style:{float:"right"}},sv={key:2},rv={style:{float:"right"}},iv={key:3},dv={style:{float:"right"}},uv={style:{float:"right"}},mv={class:"q-gutter-sm"},cv={class:"q-my-md"},pv={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(m,{emit:s}){const d=T(null),o=()=>{var i;(i=d.value)==null||i.focus()};return(i,n)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ae,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(m.order.code),1)]),m.customer?(c(),h("tr",av,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(m.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(m.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ")),t("div",lv,r(a(K)(m.payment.total)),1)])]),m.payment.cash_amount?(c(),h("tr",ov,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ")),t("div",nv,r(a(K)(m.payment.cash_amount)),1)])])):k("",!0),m.payment.wallet_amount?(c(),h("tr",sv,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ")),t("div",rv,r(a(K)(m.payment.wallet_amount)),1)])])):k("",!0),m.payment.remaining_debt?(c(),h("tr",iv,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ")),t("span",dv,r(a(K)(m.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ")),t("div",uv,r(a(K)(m.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",mv,[e(U,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(U,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",cv,[e(U,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ao=wt(pv,[["__scopeId","data-v-31d340fd"]]),fv=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),gv={class:"q-gutter-sm"},bv={class:"row items-center"},vv={class:"text-weight-bold"},yv={class:"row q-col-gutter-none full-width"},_v={class:"col-sm-6 col-12 col"},kv={class:"row full-width"},wv={class:"text-grey q-mt-xs q-ml-sm"},hv={class:"col-sm-6 col-12"},$v={class:"row q-ml-sm items-end"},xv={class:"row col grow"},Sv={class:"col-12 q-pa-sm column"},Vv={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},qv={key:0,class:"col"},Cv={class:"text-caption text-grey-6 q-mt-xs"},Tv={key:0,class:"text-caption text-grey-8 q-mt-xs"},Pv={class:"text-italic"},Rv={key:1,class:"col"},Ov={class:"q-pa-sm q-pb-none text-grey-8"},Dv={class:"col"},Iv={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Uv={class:"text-h4 text-weight-bold"},Ev={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},jv={class:"col q-py-sm"},Av={class:"q-py-sm"},Nv={__name:"Editor",setup(m){const s=xe(),d=be(),o=T(!0),i=T(null),n=T(null),g=T(null),v=T(!1),f=T(null),u=T(null),{isFullscreen:p,toggleFullscreen:y}=_a(u),_=d.props.data.code,q=T(d.props.data.supplier),x=T(null),w=T(""),M=T(!1),Y=T(!1),C=T(!1),B=T(!1),O=T(!1),z=T(!1),j=T(null),V=Re({id:d.props.data.id,code:d.props.data.code,supplier_id:d.props.data.supplier_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),I=X(()=>V.items.reduce((se,H)=>se+H.cost*H.quantity,0)),R=()=>{var se;y(),p.value||(se=f==null?void 0:f.value)==null||se.hideDrawer()},$=se=>isNaN(se)||se<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,E=se=>isNaN(se)||se<0?(bt("Harga tidak valid.","top"),!1):!0,N=se=>!se||se.length==0?(bt("Barcode tidak valid.","top"),!1):!0,S=se=>{w.value.endsWith("*")?w.value+=se.name:w.value=se.name},A=async()=>{const se=w.value.trim();if(se.length===0){C.value=!0;return}const H=se.split("*");let _e=1,de="",Q=null;if(H.length===1)de=H[0];else if(H.length<=3)_e=parseInt(H[0]),de=H[1],H.length===3&&(Q=parseFloat(H[2]));else{bt("Input tidak valid.","top");return}if(de.length===0){C.value=!0;return}!N(de)&&!$(_e)&&!E(Q)||(M.value=!0,await De.post(route("admin.purchase-order.add-item"),{order_id:V.id,product_code:de,qty:_e,cost:Q,merge:o.value}).then(Ve=>{const je=Ve.data.data.item;let ke=-1;Ve.data.data.mergeItem&&(ke=V.items.findIndex(gt=>gt.id===je.id)),ke===-1?V.items.push(je):V.items[ke]=je,w.value="",Q!==null&&Q!==parseFloat(je.cost)&&bt("Harga tidak dapat diubah!","top")}).catch(Ve=>{var je,ke;ct((ke=(je=Ve.response)==null?void 0:je.data)==null?void 0:ke.message,"top"),console.error("Gagal mengambil data produk:",Ve)}),M.value=!1,vt(()=>{var Ve;(Ve=i.value)==null||Ve.focus()}))},le=se=>{j.value=Object.create(se),B.value=!0},re=se=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${se.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{M.value=!0,De.post(route("admin.purchase-order.remove-item"),{id:se.id}).then(()=>{const H=V.items.findIndex(_e=>_e.id===se.id);H!==-1&&(V.items.splice(H,1)[0],pt("Item telah dihapus","top"))}).catch(H=>{var _e,de;ct(((de=(_e=H==null?void 0:H.response)==null?void 0:_e.data)==null?void 0:de.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(H)}).finally(()=>{M.value=!1})})},me=()=>{M.value=!0;const se=n.value.getCurrentItem(),H={id:se.id,qty:se.quantity,cost:se.cost};se.notes&&(H.notes=se.notes),De.post(route("admin.purchase-order.update-item"),H).then(_e=>{const de=_e.data.data,Q=V.items.findIndex(Ve=>Ve.id===de.id);Q!==-1&&(V.items[Q]=de,pt("Item telah diperbarui","top"))}).catch(_e=>{var de,Q;ct(((Q=(de=_e==null?void 0:_e.response)==null?void 0:de.data)==null?void 0:Q.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(_e)}).finally(()=>{M.value=!1})};he(()=>{const se=H=>{H.key==="F1"?(H.preventDefault(),v.value=!0):H.key==="F2"?(H.preventDefault(),g.value.focus()):H.key==="F3"?(H.preventDefault(),i.value.focus()):H.key==="F4"?(H.preventDefault(),o.value=!o.value):H.key==="F10"?(H.preventDefault(),Y.value=!0):H.key==="F11"?(H.preventDefault(),R()):(H.key==="F5"||H.key==="F6"||H.key==="F7"||H.key==="F12")&&H.preventDefault()};document.addEventListener("keydown",se),ht(()=>{document.removeEventListener("keydown",se)}),vt(()=>{var H;(H=f==null?void 0:f.value)==null||H.hideDrawer()})});const Oe=async se=>{q.value=se,V.supplier_id=se==null?void 0:se.id,await Ge(),se!=null&&se.id?i.value.focus():g.value.focus()},Ge=async()=>{M.value=!0;const se={id:V.id,supplier_id:V.supplier_id,datetime:Xt(V.datetime),notes:V.notes};await De.post(route("admin.purchase-order.update"),se).then(H=>{const _e=H.data.data.id;V.supplier_id=_e.supplier_id}).catch(H=>{var _e,de;ct(((de=(_e=H==null?void 0:H.response)==null?void 0:_e.data)==null?void 0:de.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(H)}).finally(()=>{M.value=!1})},ue=se=>{if(V.items.length===0){pt("Item masih kosong","top");return}const H={id:V.id,...se};M.value=!0,De.post(route("admin.purchase-order.close"),H).then(_e=>{pt("Transaksi selesai"),ee.visit(route("admin.purchase-order.detail",{id:V.id}))}).catch(_e=>{var de,Q;ct((Q=(de=_e.response)==null?void 0:de.data)==null?void 0:Q.message),console.error(_e)}).finally(()=>{M.value=!1})},L=()=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${V.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.purchase-order.cancel",{id:V.id}),{id:V.id}).then(()=>{pt("Transaksi telah dibatalkan."),ee.visit(route("admin.purchase-order.detail",{id:V.id}))}).catch(se=>{var _e,de;const H=((de=(_e=se.response)==null?void 0:_e.data)==null?void 0:de.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:H,color:"warning",position:"bottom"}),console.error(se)})})},ye=()=>{window.open(route("admin.purchase-order.detail",{id:V.id})+"?preview=1","_blank")};return(se,H)=>{const _e=Z("i-head"),de=Z("authenticated-layout");return c(),h(J,null,[e(_e,{title:a(_)},null,8,["title"]),e(de,{ref_key:"authLayoutRef",ref:f,"show-drawer-button":!0},{title:l(()=>[b(r(a(_)),1)]),"left-button":l(()=>[t("div",gv,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:H[0]||(H[0]=Q=>a(ee).get(se.route("admin.purchase-order.index")))})])]),"right-button":l(()=>[t("div",bv,[a(s).screen.gt.sm?(c(),h(J,{key:0},[t("div",vv,r(a(d).props.auth.user.username),1),H[22]||(H[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ya)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",yv,[t("div",_v,[t("div",kv,[e(qo,{ref_key:"supplierAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:q.value,"onUpdate:modelValue":H[2]||(H[2]=Q=>q.value=Q),label:"Pemasok",disable:M.value,onSupplierSelected:Oe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",wv," Saldo: "+r(q.value?"Rp. "+a(K)(q.value?q.value.balance:0):"Tidak tersedia"),1)])]),t("div",hv,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:w.value,"onUpdate:modelValue":H[5]||(H[5]=Q=>w.value=Q),onKeyup:H[6]||(H[6]=Wt(G(Q=>A(),["prevent"]),["enter"])),loading:M.value,disable:M.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(P,{name:"search",onClick:H[3]||(H[3]=Q=>C.value=!0),class:"cursor-pointer"})]),append:l(()=>{var Q;return[((Q=w.value)==null?void 0:Q.length)>0?(c(),D(P,{key:0,name:"send",onClick:H[4]||(H[4]=Ve=>A()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",$v,[e(St,{class:"col",modelValue:o.value,"onUpdate:modelValue":H[7]||(H[7]=Q=>o.value=Q),label:"Gabungkan item",disable:M.value},null,8,["modelValue","disable"])])])]),t("div",xv,[t("div",Sv,[e(Do,{items:V.items,onUpdateQuantity:H[8]||(H[8]=({id:Q,value:Ve})=>se.updateQuantity(Q,Ve)),onRemoveItem:re,onEditItem:le,"is-processing":M.value},null,8,["items","is-processing"])])]),t("div",Vv,[a(s).screen.gt.sm?(c(),h("div",qv,[t("div",Cv,r(V.items.length)+" item(s) ",1),V.notes?(c(),h("div",Tv,[H[23]||(H[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Pv,[e($e,{text:V.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(c(),h("div",Rv,[t("div",Ov,[t("div",null,"#: "+r(V.code),1),t("div",null,r(a(ge)(V.datetime)),1)])])):k("",!0),t("div",Dv,[t("div",Iv,[H[25]||(H[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Uv,[H[24]||(H[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(a(K)(I.value)),1)])])])]),t("div",Ev,[t("div",jv,[e(U,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:H[9]||(H[9]=Q=>Y.value=!0),disable:!se.$can("admin.purchase-order.close")||M.value||V.items.length===0||V.status!=="draft",loading:M.value},null,8,["disable","loading"])]),t("div",Av,[e(U,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:H[13]||(H[13]=G(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[te((c(),D(oe,{clickable:"",onClick:H[10]||(H[10]=G(Q=>O.value=!0,["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>H[26]||(H[26]=[b("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),te((c(),D(oe,{clickable:"",onClick:H[11]||(H[11]=G(Q=>ye(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"preview"})]),_:1}),e(F,null,{default:l(()=>H[27]||(H[27]=[b("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),te((c(),D(oe,{clickable:"",onClick:H[12]||(H[12]=G(Q=>L(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:l(()=>H[28]||(H[28]=[b(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Uo,{ref_key:"itemEditorRef",ref:n,modelValue:B.value,"onUpdate:modelValue":H[14]||(H[14]=Q=>B.value=Q),item:j.value,onSave:H[15]||(H[15]=Q=>me()),"is-processing":M.value},null,8,["modelValue","item","is-processing"]),e(Io,{modelValue:Y.value,"onUpdate:modelValue":H[16]||(H[16]=Q=>Y.value=Q),onAccepted:ue,form:V,supplier:q.value,total:I.value,accounts:a(d).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(ka,{modelValue:C.value,"onUpdate:modelValue":H[17]||(H[17]=Q=>C.value=Q),"show-cost":!0,onProductSelected:S},null,8,["modelValue"]),e(jo,{modelValue:O.value,"onUpdate:modelValue":H[18]||(H[18]=Q=>O.value=Q),data:V,onSave:H[19]||(H[19]=Q=>Ge()),"is-processing":M.value},null,8,["modelValue","data","is-processing"]),e(Eo,{modelValue:v.value,"onUpdate:modelValue":H[20]||(H[20]=Q=>v.value=Q)},null,8,["modelValue"]),e(Ao,{modelValue:z.value,"onUpdate:modelValue":H[21]||(H[21]=Q=>z.value=Q),order:V,supplier:q.value,total:I.value,payment:x.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},Mv=Object.freeze(Object.defineProperty({__proto__:null,default:Nv},Symbol.toStringTag,{value:"Module"})),Bv={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(m){const s=window.CONSTANTS.PURCHASE_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(c(),D(Mt,{status:m.status,statuses:a(s),colors:d},null,8,["status","statuses"]))}},zv={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(m){const s=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(c(),D(Mt,{status:m.status,statuses:a(s),colors:d},null,8,["status","statuses"]))}};const Fv={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Lv={class:"q-pa-xs"},Kv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Hv={key:0},Yv={key:1},Wv={key:0},Qv={key:0},Jv={key:1},Gv={class:"flex justify-end"},Vl="Pembelian",Xv={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Bt(),u=zt(),p=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...Ct(f-2,f-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Tt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],x=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],w=Re({search:"",year:f,month:u,status:"all",payment_status:"all",delivery_status:"all",...Me()}),M=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{V()});const C=$=>{if($.status=="draft"){B($);return}O($)},B=$=>{ee.get(route("admin.purchase-order.edit",$.id))},O=$=>{ee.get(route("admin.purchase-order.detail",$.id))},z=$=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.purchase-order.cancel",{id:$.id}),{id:$.id}).then(E=>{const N=E.data.data,S=o.value.findIndex(A=>A.id===N.id);if(S===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[S].status="canceled",s.notify({message:E.data.message,position:"bottom"})}).catch(E=>{var S,A;const N=((A=(S=E.response)==null?void 0:S.data)==null?void 0:A.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:N,color:"warning",position:"bottom"}),console.error(E)})})},j=$=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.purchase-order.delete",$.id),fetchItemsCallback:V,loading:i}),V=($=null)=>{Be({pagination:M,filter:w,props:$,rows:o,url:route("admin.purchase-order.data"),loading:i,tableRef:n})},I=()=>{V()},R=X(()=>s.screen.gt.sm?Y:Y.filter($=>$.name==="id"||$.name==="action"));return Ne(()=>w.year,$=>{$===null&&(w.month=null)}),($,E)=>{const N=Z("i-head"),S=Z("authenticated-layout");return c(),h(J,null,[e(N,{title:Vl}),e(S,null,He({title:l(()=>[b(r(Vl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:E[0]||(E[0]=A=>d.value=!d.value)},null,8,["icon"]),$.$can("admin.purchase-order.edit")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:E[1]||(E[1]=A=>a(ee).get($.route("admin.purchase-order.add")))})):k("",!0)]),default:l(()=>[t("div",Lv,[e(Ie,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:M.value,"onUpdate:pagination":E[11]||(E[11]=A=>M.value=A),filter:w.search,loading:i.value,columns:R.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(v)}),onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:A,message:le,filter:re})=>[t("div",Kv,[t("span",null,r(le)+" "+r(re?" with term "+re:""),1)])]),body:l(A=>[e(Pe,{props:A,class:"cursor-pointer",onClick:G(le=>C(A.row),["prevent"])},{default:l(()=>[e(W,{key:"id",props:A,class:"wrap-column"},{default:l(()=>[t("div",null,[e(P,{name:"tag"}),b(" "+r(A.row.code),1)]),t("div",null,[e(P,{class:"inline-icon",name:"calendar_today"}),b(r(a(ge)(A.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[A.row.supplier?(c(),h("div",Hv,[e(P,{name:"person",class:"inline-icon"}),e(ba,{href:$.route("admin.supplier.detail",{id:A.row.supplier.id}),onClick:E[8]||(E[8]=G(()=>{},["stop"]))},{default:l(()=>[b(" "+r(A.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(K)(A.row.grand_total)),1),A.row.notes?(c(),h("div",Yv,[e(P,{name:"notes"}),b(" "+r(A.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Bv,{status:A.row.status},null,8,["status"]),e(zv,{status:A.row.payment_status},null,8,["status"]),k("",!0)])]),_:2},1032,["props"]),e(W,{key:"supplier_id",props:A},{default:l(()=>[A.row.supplier?(c(),h("div",Wv,[t("div",null,[e(P,{name:"person",class:"inline-icon"}),b(" "+r(A.row.supplier_name),1)]),A.row.supplier_phone?(c(),h("div",Qv,[e(P,{name:"phone",class:"inline-icon"}),b(" "+r(A.row.supplier_phone),1)])):k("",!0),A.row.supplier_address?(c(),h("div",Jv,[e(P,{name:"home_pin",class:"inline-icon"}),b(" "+r(A.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:A},{default:l(()=>[b(r(a(K)(A.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:A},{default:l(()=>[e($e,{text:A.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:A,onClick:E[10]||(E[10]=G(()=>{},["stop"]))},{default:l(()=>[t("div",Gv,[$.$can("admin.purchase-order.detail")||$.$can("admin.purchase-order.edit")||$.$can("admin.purchase-order.cancel")||$.$can("admin.purchase-order.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:E[9]||(E[9]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[A.row.status!="draft"&&$.$can("admin.purchase-order.detail")?te((c(),D(oe,{key:0,onClick:G(le=>O(A.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"visibility"})]),_:1}),e(F,null,{default:l(()=>E[12]||(E[12]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),A.row.status=="draft"&&$.$can("admin.purchase-order.edit")?te((c(),D(oe,{key:1,onClick:G(le=>B(A.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>E[13]||(E[13]=[b(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),A.row.status=="draft"&&$.$can("admin.purchase-order.cancel")?te((c(),D(oe,{key:2,onClick:G(le=>z(A.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"cancel"})]),_:1}),e(F,null,{default:l(()=>E[14]||(E[14]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),$.$can("admin.purchase-order.delete")?te((c(),D(oe,{key:3,onClick:G(le=>j(A.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>E[15]||(E[15]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Fv,[e(ce,{modelValue:w.year,"onUpdate:modelValue":[E[2]||(E[2]=A=>w.year=A),I],options:p,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(c(),D(ce,{key:0,modelValue:w.month,"onUpdate:modelValue":[E[3]||(E[3]=A=>w.month=A),I],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:w.status,"onUpdate:modelValue":[E[4]||(E[4]=A=>w.status=A),I],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:w.payment_status,"onUpdate:modelValue":[E[5]||(E[5]=A=>w.payment_status=A),I],options:q,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":E[7]||(E[7]=A=>w.search=A),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Zv=Object.freeze(Object.defineProperty({__proto__:null,default:Xv},Symbol.toStringTag,{value:"Module"})),ey={class:"q-gutter-sm"},ty={class:"col col-md-6 q-pa-xs"},ql="Tambah Retur Penjualan",ay={__name:"Create",setup(m){const s=be(),d=Qe({code:s.props.data.code}),o=()=>rt({form:d,url:route("admin.sales-order-return.add")});return(i,n)=>{const g=Z("i-head"),v=Z("authenticated-layout");return c(),h(J,null,[e(g,{title:ql}),e(v,null,{title:l(()=>[b(r(ql))]),"left-button":l(()=>[t("div",ey,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>i.$inertia.get(i.route("admin.sales-order-return.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",ty,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[e(ne,{autofocus:"",modelValue:a(d).code,"onUpdate:modelValue":n[1]||(n[1]=f=>a(d).code=f),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!a(d).errors.code,disable:a(d).processing,"error-message":a(d).errors.code,rules:[f=>f&&f.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:a(d).processing},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",disable:a(d).processing,onClick:n[2]||(n[2]=f=>a(ee).get(i.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ly=Object.freeze(Object.defineProperty({__proto__:null,default:ay},Symbol.toStringTag,{value:"Module"})),oy={class:"column"},ny={class:"bg-grey-2 q-pa-xs"},sy={class:"text-subtitle1 text-bold text-grey-10"},ry={class:"text-caption text-grey-8"},iy={class:"col-12 col-sm-6"},dy={class:"full-width"},uy={key:1},my={key:0},cy={key:1},py={class:"col-12 col-sm-6",align:"left"},fy={class:"full-width"},gy={class:"full-width",style:{"border-collapse":"collapse"}},by={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},vy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},yy={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},_y={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ky={key:0},wy={class:"col-12 col-sm-6"},hy={class:"text-body2 text-grey-7 text-italic"},$y={class:"col-12 col-sm-6"},xy={class:"row justify-end q-gutter-y-xs"},Sy={class:"col-12 row justify-between"},Vy={class:"text-subtitle2 text-bold"},No={__name:"MainInfoTab",props:{data:Object},setup(m){const s=m;return(d,o)=>{const i=Z("i-link");return c(),h("div",oy,[e(ae,{class:"q-pa-none"},{default:l(()=>{var n,g;return[t("div",ny,[t("div",sy," RETUR #"+r(s.data.code),1),t("div",ry,[b(" Kasir: "+r((n=s.data.cashier)==null?void 0:n.username)+" - "+r((g=s.data.cashier)==null?void 0:g.name)+" | "+r(a(ge)(s.data.datetime))+" ",1),s.data.cashier_session?(c(),h(J,{key:0},[b(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]}),_:1}),e(Ae),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",iy,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",dy,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(c(),D(i,{key:0,href:d.route("admin.customer.detail",{id:s.data.customer_id})},{default:l(()=>[e(P,{class:"inline-icon",name:"person"}),b(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(c(),h("div",uy,[e(P,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pelanggan Umum "))]))])]),s.data.customer_phone?(c(),h("tr",my,[t("td",null,[e(P,{class:"inline-icon",name:"phone"}),b(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(c(),h("tr",cy,[t("td",null,[e(P,{class:"inline-icon",name:"home_pin"}),b(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",py,[o[8]||(o[8]=t("div",{class:"text-subtitle2 text-bold text-grey-8"}," Info Retur Penjualan ",-1)),t("table",fy,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ge)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",gy,[o[10]||(o[10]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(c(!0),h(J,null,Fe(s.data.details,n=>(c(),h("tr",{key:n.id},[t("td",by,[e(i,{href:d.route("admin.product.detail",n.product_id)},{default:l(()=>[b(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",vy,r(a(K)(n.price)),1),t("td",yy,r(n.quantity),1),t("td",_y,r(a(K)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(c(),h("tr",ky,o[9]||(o[9]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",wy,[o[11]||(o[11]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",hy,r(s.data.notes?s.data.notes:"-"),1)]),t("div",$y,[t("div",xy,[t("div",Sy,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Vy,r(a(K)(s.data.grand_total)),1)])])])]),_:1})])}}},qy=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"})),Cy={key:0,class:"text-center q-mb-md text-grey-8"},Ty={class:"text-subtitle2 text-weight-medium"},Py={class:"text-h5 text-center text-primary q-pb-md"},Ry={class:"text-center q-mt-md"},Oy={key:0,class:"text-h6 text-negative text-weight-bold"},Dy={key:1,class:"text-h6 text-positive text-weight-bold"},Mo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:s}){const d=m,o=s,i=be(),n=T(!1),g=T({method:"cash",amount:d.total,notes:null}),v=i.props.data.customer,f=X(()=>[...v?[{label:"Refund ke Wallet",value:"wallet"}]:[],{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(x=>({label:x.name,value:x.id}))]),u=X(()=>d.total-(g.value.amount||0)),p=X(()=>{const x=g.value.amount||0;return x<=0?"Jumlah pembayaran harus lebih dari 0.":x>d.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),y=X(()=>p.value===null),_=()=>{if(!y.value)return;n.value=!0;const x={id:g.value.method,amount:g.value.amount,notes:g.value.notes};o("accepted",x),n.value=!1},q=()=>{g.value.amount=d.total,g.value.method="cash",g.value.notes=null};return(x,w)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":w[4]||(w[4]=M=>x.$emit("update:modelValue",M)),onBeforeShow:q},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>w[5]||(w[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(v)?(c(),h("div",Cy,[t("div",Ty,[b(r(a(v).code)+" ",1),w[6]||(w[6]=t("br",null,null,-1)),b(" "+r(a(v).name)+" ",1),w[7]||(w[7]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(a(K)(a(v).wallet_balance)),1)])])):k("",!0),t("div",Py," Total: Rp. "+r(a(K)(m.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":w[0]||(w[0]=M=>g.value.method=M),options:f.value,label:g.value.method=="wallet"?"Tujuan":"Sumber Dana",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","label","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":w[1]||(w[1]=M=>g.value.amount=M),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":p.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":w[2]||(w[2]=M=>g.value.notes=M),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Ry,[u.value>0?(c(),h("div",Oy," Sisa Refund: Rp. "+r(a(K)(u.value)),1)):(c(),h("div",Dy," Refund Lunas "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(U,{flat:"",label:"Batal",color:"grey",onClick:w[3]||(w[3]=M=>x.$emit("update:modelValue",!1))}),e(U,{label:"Bayar",color:"positive",onClick:_,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Iy=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),Uy={class:"column"},Ey={class:"row"},jy={class:"full-width",style:{"border-collapse":"collapse"}},Ay={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ny={class:"row items-center q-gutter-x-sm"},My={class:"text-weight-bold"},By={class:"row items-center q-gutter-x-sm q-mt-xs"},zy={class:"text-caption text-grey-6"},Fy={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Ly={class:"text-caption text-grey-6"},Ky={class:"q-mt-xs"},Hy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Yy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Wy={key:0},Qy={class:"text-right q-pa-sm"},Jy={class:"text-right q-pa-sm"},Bo={__name:"RefundTab",props:{data:Object},setup(m){const s=m;console.log(s.data);const d=xe(),o=T(!1),i=()=>{o.value=!0},n=X(()=>s.data.grand_total-s.data.total_refunded),g=async f=>{const u={order_id:s.data.id,...f};d.loading.show({message:"Memproses pembayaran..."});try{const p=await De.post(route("admin.sales-order-return.add-refund"),u);d.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(p){let y="Gagal memproses refund.";p.response&&p.response.data&&p.response.data.message?y=p.response.data.message:p.message&&(y=p.message),d.notify({message:y,color:"negative",icon:"error"})}finally{d.loading.hide()}},v=f=>{d.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{d.loading.show({message:"Menghapus pembayaran..."});try{await De.post(route("admin.sales-order-return.delete-refund",{id:f.id})),d.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(u){let p="Gagal menghapus refund pembayaran.";u.response&&u.response.data&&u.response.data.message?p=u.response.data.message:u.message&&(p=u.message),d.notify({message:p,color:"negative",icon:"error"})}finally{d.loading.hide()}})};return(f,u)=>(c(),h(J,null,[t("div",Uy,[e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("div",Ey,[f.$can("admin.sales-order-return.add-refund")&&s.data.remaining_refund>0?(c(),D(U,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:u[0]||(u[0]=G(p=>i(),["stop"]))})):k("",!0)]),t("table",jy,[u[7]||(u[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(c(!0),h(J,null,Fe(s.data.refunds,p=>(c(),h("tr",{key:p.id},[t("td",Ay,[t("div",Ny,[e(P,{name:"tag",size:"xs",color:"grey-7"}),t("span",My,r(p.code),1)]),t("div",By,[e(P,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",zy,r(a(ge)(p.created_at)),1)]),(p.type==="transfer"||p.type==="cash")&&p.account?(c(),h("div",Fy,[e(P,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Ly,r(p.account.name),1)])):k("",!0),t("div",Ky,[e(ft,{label:f.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[p.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Hy,r(a(K)(p.amount)),1),t("td",Yy,[f.$can("admin.sales-order-return.delete-refund")?(c(),D(U,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>v(p)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(c(),h("tr",Wy,u[2]||(u[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[u[3]||(u[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Direfund",-1)),t("th",Qy,r(a(K)(s.data.total_refunded)),1),u[4]||(u[4]=t("th",null,null,-1))]),t("tr",null,[u[5]||(u[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Refund",-1)),t("th",Jy,r(a(K)(s.data.remaining_refund)),1),u[6]||(u[6]=t("td",null,null,-1))])])])]),_:1})]),e(Mo,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=p=>o.value=p),total:n.value,customer:s.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},Gy=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"})),Xy={class:"q-gutter-sm"},Zy={class:"col col-lg-6 q-pa-xs",align:"center"},Cl="Retur Penjualan",e_={__name:"Detail",setup(m){const s=new URLSearchParams(window.location.search),d=be(),o=d.props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"main-info");he(()=>{vt(()=>{const f=s.get("print_size");f&&v(f)})});const v=f=>{window.open(route("admin.sales-order-return.print",{id:d.props.data.id,size:f}),"_self")};return(f,u)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),h(J,null,[e(p,{title:Cl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Cl))])]),"left-button":l(()=>[t("div",Xy,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=_=>f.$goBack())})])]),"right-button":l(()=>[e(U,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=_=>v("58mm"))}),e(U,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[2]||(u[2]=_=>v("a4"))}),i.value?k("",!0):(c(),D(U,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[3]||(u[3]=_=>a(ee).get(f.route("admin.sales-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Zy,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Pt,{modelValue:g.value,"onUpdate:modelValue":u[4]||(u[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(c(),D(ot,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Rt,{modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=_=>g.value=_),animated:""},{default:l(()=>[e(nt,{name:"main-info",class:"q-pa-none"},{default:l(()=>[e(No,{data:a(o)},null,8,["data"])]),_:1}),e(nt,{name:"refund",class:"q-pa-none"},{default:l(()=>[e(Bo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},t_=Object.freeze(Object.defineProperty({__proto__:null,default:e_},Symbol.toStringTag,{value:"Module"})),a_={class:"text-weight-medium"},l_={class:"text-caption text-grey-6 elipsis"},o_={class:"column items-end"},n_={class:"text-caption text-grey-6 text-italic"},zo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(m){const s=xe(),d=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(c(),D(Ie,{dense:"",rows:m.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ye({height:a(d)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(c(!0),h(J,null,Fe(g.cols,v=>(c(),D(Zt,{key:v.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left wrap-column"},{default:l(()=>[t("div",a_,r(g.row.product_name),1),t("div",l_,r(g.row.product_barcode),1),g.row.notes?(c(),D($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal_price",props:g,class:"text-right"},{default:l(()=>[t("div",o_,[t("div",null,r(a(K)(g.row.subtotal_price)),1),t("div",n_,r(a(K)(g.row.quantity))+" x Rp. "+r(a(K)(g.row.price)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(U,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",g.row),disable:m.isProcessing},null,8,["onClick","disable"]),e(U,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",g.row),disable:m.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},s_=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),r_={class:"row items-center no-wrap"},i_={class:"col-auto"},Fo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:s,emit:d}){const o=m,i=d,n=()=>{i("save")},g=X(()=>o.item.quantity*o.item.price),v=p=>{p.stopPropagation(),p.preventDefault()},f=p=>{o.modelValue&&(p.key==="Enter"?(n(),i("update:modelValue",!1),v(p)):p.key==="Escape"&&(i("update:modelValue",!1),v(p)))};return he(()=>{window.addEventListener("keydown",f)}),ht(()=>{window.removeEventListener("keydown",f)}),s({getCurrentItem:()=>o.item}),(p,y)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":y[6]||(y[6]=_=>p.$emit("update:modelValue",_))},{default:l(()=>[e(fe,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",r_,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",i_,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=_=>p.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:m.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=_=>m.item.product_name=_),label:"Produk","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:m.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=_=>m.item.quantity=_),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:m.item.price,"onUpdate:modelValue":y[3]||(y[3]=_=>m.item.price=_),label:"Harga","hide-bottom-space":"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":y[4]||(y[4]=_=>g.value=_),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:m.item.notes,"onUpdate:modelValue":y[5]||(y[5]=_=>m.item.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[pe]]),e(U,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:m.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},d_=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),u_={key:0,class:"q-select__selected-item"},Lo={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(m,{expose:s,emit:d}){const o=T(null),i=m,n=d,g=T([]);let v=null;const f=T(i.modelValue);he(()=>{i.initialData&&(f.value=i.initialData)}),Ne(f,y=>{n("update:modelValue",y),n("customerSelected",y)}),Ne(()=>i.modelValue,y=>{f.value=y}),s({focus:()=>{o.value&&o.value.focus()}});const p=(y,_)=>{if(y.length<i.minLength){_(()=>{g.value=[]});return}v&&clearTimeout(v),v=setTimeout(()=>{De.get(`/web-api/customers?q=${y}`).then(q=>{_(()=>{g.value=q.data.data})}).catch(q=>{console.error("Gagal mengambil data pelanggan:",q),_(()=>{g.value=[]})})},500)};return(y,_)=>(c(),D(ce,{class:Ce(m.class),ref_key:"qSelectRef",ref:o,modelValue:f.value,"onUpdate:modelValue":_[0]||(_[0]=q=>f.value=q),"use-input":"","input-debounce":"0",label:m.label,options:g.value,onFilter:p,clearable:"",error:m.error,behavior:"menu","error-message":m.errorMessage,disable:m.disable,"hide-bottom-space":"",outlined:m.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(q=>[e(oe,eo(to(q.itemProps)),{default:l(()=>[e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[b(r(q.opt.name),1)]),_:2},1024),e(we,{caption:""},{default:l(()=>[e(P,{name:"person",size:"14px"}),b(" "+r(q.opt.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(q=>[q.opt?(c(),h("div",u_,r(q.opt.name)+" ("+r(q.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},m_={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(m,{emit:s}){return(d,o)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>d.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ae,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[te(e(U,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ko=wt(m_,[["__scopeId","data-v-22783525"]]),c_=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),p_={class:"row items-center no-wrap"},f_={class:"col text-subtite text-bold text-grey-8"},g_={class:"col-auto"},Ho={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:s,emit:d}){const o=m,i=d,n=()=>{i("save")},g=u=>{u.stopPropagation(),u.preventDefault()},v=u=>{o.modelValue&&(u.key==="Enter"?(n(),g(u)):u.key==="Escape"&&(i("update:modelValue",!1),g(u)))};return he(()=>{window.addEventListener("keydown",v)}),ht(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(u,p)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":p[4]||(p[4]=y=>u.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",p_,[t("div",f_," Edit "+r(m.data.code),1),t("div",g_,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:p[0]||(p[0]=y=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(Ft,{modelValue:m.data.datetime,"onUpdate:modelValue":p[1]||(p[1]=y=>m.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:m.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status],"onUpdate:modelValue":p[2]||(p[2]=y=>u.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:m.data.notes,"onUpdate:modelValue":p[3]||(p[3]=y=>m.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[pe]]),te(e(U,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:m.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},b_=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),v_={class:"q-gutter-sm"},y_={class:"row items-center"},__={class:"text-weight-bold"},k_={class:"row q-col-gutter-none full-width"},w_={class:"col-sm-6 col-12 col"},h_={class:"row full-width"},$_={key:0,class:"row"},x_={class:"col-sm-6 col-12"},S_={class:"row q-ml-sm items-end"},V_={class:"row col grow"},q_={class:"col-12 q-pa-sm column"},C_={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},T_={key:0,class:"col"},P_={class:"text-caption text-grey-6 q-mt-xs"},R_={key:0,class:"text-caption text-grey-8 q-mt-xs"},O_={class:"text-italic"},D_={key:1,class:"col"},I_={class:"q-pa-sm q-pb-none text-grey-8"},U_={class:"col"},E_={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},j_={class:"text-h4 text-weight-bold"},A_={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},N_={class:"col q-py-sm"},M_={class:"q-py-sm"},B_={__name:"Editor",setup(m){const s=xe(),d=be(),o=T(!0),i=T(null),n=T(null),g=T(null),v=T(!1),f=T(null),u=T(null),{isFullscreen:p,toggleFullscreen:y}=_a(u),_="Retur #"+d.props.data.code,q=T(d.props.data.customer),x=T(""),w=T(!1),M=T(!1),Y=T(!1),C=T(!1),B=T(null),O=Re({id:d.props.data.id,code:d.props.data.code,customer_id:d.props.data.customer_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),z=X(()=>O.items.reduce((ue,L)=>ue+L.price*L.quantity,0)),j=()=>{var ue;y(),p.value||(ue=f==null?void 0:f.value)==null||ue.hideDrawer()},V=ue=>isNaN(ue)||ue<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,I=ue=>isNaN(ue)||ue<0?(bt("Harga tidak valid.","top"),!1):!0,R=ue=>!ue||ue.length==0?(bt("Barcode tidak valid.","top"),!1):!0,$=ue=>{x.value.endsWith("*")?x.value+=ue.name:x.value=ue.name},E=async()=>{const ue=x.value.trim();if(ue.length===0){M.value=!0;return}const L=ue.split("*");let ye=1,se="",H=null;if(L.length===1)se=L[0];else if(L.length<=3)ye=parseInt(L[0]),se=L[1],L.length===3&&(H=parseFloat(L[2]));else{bt("Input tidak valid.","top");return}if(se.length===0){M.value=!0;return}!R(se)&&!V(ye)&&!I(H)||(w.value=!0,await De.post(route("admin.sales-order-return.add-item"),{order_id:O.id,product_code:se,qty:ye,price:H,merge:o.value}).then(_e=>{const de=_e.data.data.item;let Q=-1;_e.data.data.mergeItem&&(Q=O.items.findIndex(Ve=>Ve.id===de.id)),Q===-1?O.items.push(de):O.items[Q]=de,x.value="",H!==null&&H!==parseFloat(de.price)&&bt("Harga tidak dapat diubah!","top")}).catch(_e=>{var de,Q;ct((Q=(de=_e.response)==null?void 0:de.data)==null?void 0:Q.message,"top"),console.error("Gagal mengambil data produk:",_e)}),w.value=!1,vt(()=>{var _e;(_e=i.value)==null||_e.focus()}))},N=ue=>{B.value=Object.create(ue),Y.value=!0},S=ue=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ue.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{w.value=!0,De.post(route("admin.sales-order-return.remove-item"),{id:ue.id}).then(()=>{const L=O.items.findIndex(ye=>ye.id===ue.id);L!==-1&&(O.items.splice(L,1)[0],pt("Item telah dihapus","top"))}).catch(L=>{var ye,se;ct(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{w.value=!1})})},A=()=>{w.value=!0;const ue=n.value.getCurrentItem(),L={id:ue.id,qty:ue.quantity,price:ue.price};ue.notes&&(L.notes=ue.notes),De.post(route("admin.sales-order-return.update-item"),L).then(ye=>{const se=ye.data.data,H=O.items.findIndex(_e=>_e.id===se.id);H!==-1&&(O.items[H]=se,pt("Item telah diperbarui","top")),Y.value=!1}).catch(ye=>{var se,H;ct(((H=(se=ye==null?void 0:ye.response)==null?void 0:se.data)==null?void 0:H.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ye)}).finally(()=>{w.value=!1})};he(()=>{const ue=L=>{v.value||Y.value||M.value||C.value||(L.key==="F1"?(L.preventDefault(),v.value=!0):L.key==="F2"?(L.preventDefault(),g.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),re()):L.key==="F11"?(L.preventDefault(),j()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault())};document.addEventListener("keydown",ue),ht(()=>{document.removeEventListener("keydown",ue)}),vt(()=>{var L;(L=f==null?void 0:f.value)==null||L.hideDrawer()})});const le=async()=>{w.value=!0;const ue={id:O.id,customer_id:O.customer_id??null,datetime:Xt(O.datetime),notes:O.notes};await De.post(route("admin.sales-order-return.update"),ue).then(L=>{const ye=L.data.data.id;O.customer_id=ye.customer_id}).catch(L=>{var ye,se;ct(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{w.value=!1})},re=ue=>{if(O.items.length===0){pt("Item masih kosong","top");return}$t.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{w.value=!0,De.post(route("admin.sales-order-return.close",{id:O.id})).then(L=>{pt("Transaksi selesai"),ee.get(route("admin.sales-order-return.detail",{id:O.id}))}).catch(L=>{var ye,se;ct((se=(ye=L.response)==null?void 0:ye.data)==null?void 0:se.message),console.error(L)}).finally(()=>{w.value=!1})})},me=()=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.sales-order-return.cancel",{id:O.id}),{id:O.id}).then(()=>{pt("Transaksi telah dibatalkan."),ee.visit(route("admin.sales-order-return.detail",{id:O.id}))}).catch(ue=>{var ye,se;const L=((se=(ye=ue.response)==null?void 0:ye.data)==null?void 0:se.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(ue)})})},Oe=()=>{window.open(route("admin.sales-order-return.detail",{id:O.id})+"?preview=1","_blank")},Ge=X(()=>q.value?q.value.wallet_balance>=z.value:!0);return(ue,L)=>{const ye=Z("i-head"),se=Z("authenticated-layout");return c(),h(J,null,[e(ye,{title:_}),e(se,{ref_key:"authLayoutRef",ref:f,"show-drawer-button":!0},{title:l(()=>[b(r(_))]),"left-button":l(()=>[t("div",v_,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=H=>a(ee).get(ue.route("admin.sales-order-return.index")))})])]),"right-button":l(()=>[t("div",y_,[a(s).screen.gt.sm?(c(),h(J,{key:0},[t("div",__,r(a(d).props.auth.user.username),1),L[20]||(L[20]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ya)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",k_,[t("div",w_,[t("div",h_,[e(Lo,{ref_key:"customerAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:q.value,"onUpdate:modelValue":L[2]||(L[2]=H=>q.value=H),label:"Pelanggan",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),q.value?(c(),h("div",$_,[t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",Ge.value?"text-green":"text-red"])}," Wallet: "+r(q.value?"Rp. "+a(K)(q.value?q.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",q.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(q.value?"Rp. "+a(K)(q.value?q.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",x_,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:x.value,"onUpdate:modelValue":L[5]||(L[5]=H=>x.value=H),onKeyup:L[6]||(L[6]=Wt(G(H=>E(),["prevent"]),["enter"])),loading:w.value,disable:w.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(P,{name:"search",onClick:L[3]||(L[3]=H=>M.value=!0),class:"cursor-pointer"})]),append:l(()=>{var H;return[((H=x.value)==null?void 0:H.length)>0?(c(),D(P,{key:0,name:"send",onClick:L[4]||(L[4]=_e=>E()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",S_,[e(St,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[7]||(L[7]=H=>o.value=H),label:"Gabungkan item",disable:w.value},null,8,["modelValue","disable"])])])]),t("div",V_,[t("div",q_,[e(zo,{items:O.items,onUpdateQuantity:L[8]||(L[8]=({id:H,value:_e})=>ue.updateQuantity(H,_e)),onRemoveItem:S,onEditItem:N,"is-processing":w.value},null,8,["items","is-processing"])])]),t("div",C_,[a(s).screen.gt.sm?(c(),h("div",T_,[t("div",P_,r(O.items.length)+" item(s) ",1),O.notes?(c(),h("div",R_,[L[21]||(L[21]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",O_,[e($e,{text:O.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(c(),h("div",D_,[t("div",I_,[t("div",null,"Return #: "+r(O.code),1),t("div",null,"Order #: "+r(a(d).props.data.sales_order.code),1),t("div",null,r(a(ge)(O.datetime)),1)])])):k("",!0),t("div",U_,[t("div",E_,[L[23]||(L[23]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",j_,[L[22]||(L[22]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(a(K)(z.value)),1)])])])]),t("div",A_,[t("div",N_,[e(U,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:L[9]||(L[9]=H=>re()),disable:!ue.$can("admin.sales-order-return.close")||w.value||O.items.length===0||O.status!=="draft",loading:w.value},null,8,["disable","loading"])]),t("div",M_,[e(U,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[13]||(L[13]=G(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[te((c(),D(oe,{clickable:"",onClick:L[10]||(L[10]=G(H=>C.value=!0,["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>L[24]||(L[24]=[b("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),te((c(),D(oe,{clickable:"",onClick:L[11]||(L[11]=G(H=>Oe(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"preview"})]),_:1}),e(F,null,{default:l(()=>L[25]||(L[25]=[b("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),te((c(),D(oe,{clickable:"",onClick:L[12]||(L[12]=G(H=>me(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:l(()=>L[26]||(L[26]=[b(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Fo,{ref_key:"itemEditorRef",ref:n,modelValue:Y.value,"onUpdate:modelValue":L[14]||(L[14]=H=>Y.value=H),item:B.value,onSave:L[15]||(L[15]=H=>A()),"is-processing":w.value},null,8,["modelValue","item","is-processing"]),e(ka,{modelValue:M.value,"onUpdate:modelValue":L[16]||(L[16]=H=>M.value=H),onProductSelected:$},null,8,["modelValue"]),e(Ho,{modelValue:C.value,"onUpdate:modelValue":L[17]||(L[17]=H=>C.value=H),data:O,onSave:L[18]||(L[18]=H=>le()),"is-processing":w.value},null,8,["modelValue","data","is-processing"]),e(Ko,{modelValue:v.value,"onUpdate:modelValue":L[19]||(L[19]=H=>v.value=H)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},z_=Object.freeze(Object.defineProperty({__proto__:null,default:B_},Symbol.toStringTag,{value:"Module"})),F_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},L_={class:"q-pa-xs"},K_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},H_={key:0},Y_={key:1},W_={key:2},Q_={key:3},J_={key:0},G_={key:1},X_={key:0},Z_={key:0},ek={key:1},tk={class:"flex justify-end"},Tl="Retur Penjualan",ak={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Bt(),u=zt(),p=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...Ct(f-2,f-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Tt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_RETURN_STATUSES)],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES)],x=Re({search:"",year:f,month:u,status:"all",refund_status:"all",...Me()}),w=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),M=[{name:"code",label:"Info Order",field:"code",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{j()});const Y=R=>{if(R.status=="draft"){C(R);return}B(R)},C=R=>{ee.get(route("admin.sales-order-return.edit",R.id))},B=R=>{ee.get(route("admin.sales-order-return.detail",R.id))},O=R=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${R.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.sales-order-return.cancel",{id:R.id}),{id:R.id}).then($=>{const E=$.data.data,N=o.value.findIndex(S=>S.id===E.id);if(N===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[N].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var N,S;const E=((S=(N=$.response)==null?void 0:N.data)==null?void 0:S.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:E,color:"warning",position:"bottom"}),console.error($)})})},z=R=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${R.code}?`,url:route("admin.sales-order-return.delete",R.id),fetchItemsCallback:j,loading:i}),j=(R=null)=>{Be({pagination:w,filter:x,props:R,rows:o,url:route("admin.sales-order-return.data"),loading:i,tableRef:n})},V=()=>{j()},I=X(()=>s.screen.gt.sm?M:M.filter(R=>R.name==="code"||R.name==="action"));return Ne(()=>x.year,R=>{R===null&&(x.month=null)}),(R,$)=>{const E=Z("i-head"),N=Z("authenticated-layout");return c(),h(J,null,[e(E,{title:Tl}),e(N,null,He({title:l(()=>[b(r(Tl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=S=>d.value=!d.value)},null,8,["icon"]),R.$can("admin.sales-order-return.edit")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=S=>a(ee).get(R.route("admin.sales-order-return.add")))})):k("",!0)]),default:l(()=>[t("div",L_,[e(Ie,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:w.value,"onUpdate:pagination":$[10]||($[10]=S=>w.value=S),filter:x.search,loading:i.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(v)}),onRequest:j,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:A,filter:le})=>[t("div",K_,[t("span",null,r(A)+" "+r(le?" with term "+le:""),1)])]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:G(A=>Y(S.row),["prevent"])},{default:l(()=>[e(W,{key:"code",props:S,class:"wrap-column"},{default:l(()=>{var A,le,re;return[t("div",null,[e(P,{name:"tag"}),b(" "+r(S.row.code),1)]),t("div",null,[e(P,{class:"inline-icon",name:"calendar_today"}),b(r(a(ge)(S.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[S.row.cashier?(c(),h("div",H_,[e(P,{name:"person",class:"inline-icon"}),b(" Kasir: "+r((A=S.row.cashier)==null?void 0:A.username),1)])):k("",!0),S.row.cashier_session?(c(),h("div",Y_,[e(P,{name:"point_of_sale",class:"inline-icon"}),b(" Terminal: "+r((re=(le=S.row.cashier_session)==null?void 0:le.cashier_terminal)==null?void 0:re.name),1)])):k("",!0),S.row.customer?(c(),h("div",W_,[e(P,{name:"person",class:"inline-icon"}),e(ba,{href:R.route("admin.customer.detail",{id:S.row.customer.id}),onClick:$[7]||($[7]=G(()=>{},["stop"]))},{default:l(()=>[b(" "+r(S.row.customer.code)+" - "+r(S.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(K)(S.row.grand_total)),1),S.row.notes?(c(),h("div",Q_,[e(P,{name:"notes"}),b(" "+r(S.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Mt,{status:S.row.status,statuses:R.$CONSTANTS.SALES_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Mt,{status:S.row.refund_status,statuses:R.$CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(W,{key:"cashier_id",props:S},{default:l(()=>{var A,le,re;return[S.row.cashier?(c(),h("div",J_,[e(P,{name:"person",class:"inline-icon"}),b(" "+r((A=S.row.cashier)==null?void 0:A.username),1)])):k("",!0),S.row.cashier_session?(c(),h("div",G_,[e(P,{name:"point_of_sale",class:"inline-icon"}),b(" "+r((re=(le=S.row.cashier_session)==null?void 0:le.cashier_terminal)==null?void 0:re.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(W,{key:"customer_id",props:S},{default:l(()=>[S.row.customer?(c(),h("div",X_,[t("div",null,[e(P,{name:"person",class:"inline-icon"}),b(" "+r(S.row.customer_code)+" - "+r(S.row.customer_name),1)]),S.row.customer_phone?(c(),h("div",Z_,[e(P,{name:"phone",class:"inline-icon"}),b(" "+r(S.row.customer_phone),1)])):k("",!0),S.row.customer_address?(c(),h("div",ek,[e(P,{name:"home_pin",class:"inline-icon"}),b(" "+r(S.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:S},{default:l(()=>[b(r(a(K)(S.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:S},{default:l(()=>[e($e,{text:S.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:S,onClick:$[9]||($[9]=G(()=>{},["stop"]))},{default:l(()=>[t("div",tk,[R.$can("admin.sales-order-return.detail")||R.$can("admin.sales-order-return.edit")||R.$can("admin.sales-order-return.cancel")||R.$can("admin.sales-order-return.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[S.row.status!="draft"&&R.$can("admin.sales-order-return.detail")?te((c(),D(oe,{key:0,onClick:G(A=>B(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"visibility"})]),_:1}),e(F,null,{default:l(()=>$[11]||($[11]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.row.status=="draft"&&R.$can("admin.sales-order-return.edit")?te((c(),D(oe,{key:1,onClick:G(A=>C(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>$[12]||($[12]=[b(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.row.status=="draft"&&R.$can("admin.sales-order-return.cancel")?te((c(),D(oe,{key:2,onClick:G(A=>O(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"cancel"})]),_:1}),e(F,null,{default:l(()=>$[13]||($[13]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),R.$can("admin.sales-order-return.delete")?te((c(),D(oe,{key:3,onClick:G(A=>z(S.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>$[14]||($[14]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",F_,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[$[2]||($[2]=S=>x.year=S),V],options:p,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(c(),D(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[$[3]||($[3]=S=>x.month=S),V],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.status,"onUpdate:modelValue":[$[4]||($[4]=S=>x.status=S),V],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:x.refund_status,"onUpdate:modelValue":[$[5]||($[5]=S=>x.refund_status=S),V],options:q,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":$[6]||($[6]=S=>x.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},lk=Object.freeze(Object.defineProperty({__proto__:null,default:ak},Symbol.toStringTag,{value:"Module"})),ok={key:0,class:"text-center q-mb-md text-grey-8"},nk={class:"text-subtitle2 text-weight-medium"},sk={class:"text-h5 text-center text-primary q-pb-md"},rk={class:"q-mb-md flex flex-center"},ik={key:1},dk={class:"col-6"},uk={class:"col-6"},mk={class:"row"},ck={class:"text-center q-mt-md"},pk={key:0,class:"text-h6 text-negative text-weight-bold"},fk={key:1,class:"text-h6 text-green-8 text-weight-bold"},gk={key:2,class:"text-h6 text-positive text-weight-bold"},bk={key:2},vk={class:"text-h6 text-negative text-center"},yk={key:3},_k={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:s}){const d=m,o=s,i=be(),n=T(!1),g=T("cash"),v=T(new Date),f=T([]),u=T([]),p=Re([{id:"cash",amount:0}]),y=i.props.settings.default_payment_mode,_=X(()=>[{label:"Laci Kasir",value:"cash"},...d.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map($=>({label:$.name,value:$.id}))]),q=X(()=>p.reduce(($,E)=>$+(E.amount||0),0)),x=X(()=>d.total-q.value),w=X(()=>{if(!d.customer)return!0;const $=p.find(N=>N.id==="wallet");return($?$.amount:0)<=d.customer.wallet_balance}),M=new Date,Y=dt.addToDate(new Date,{days:30}),C=X(()=>[$=>!!$||"Tanggal jatuh tempo harus diisi",$=>dt.isBetweenDates($,M,Y,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),B=X(()=>{if(g.value==="debt")return!!d.customer&&C.value.every(A=>A(v.value)===!0);const $=w.value,E=p.some(A=>(A.amount||0)>0),N=p.every(A=>(A.amount||0)>=0),S=x.value<=0;return $&&E&&N&&S}),O=()=>{if(p.length<3){const $=p.length;p.push({id:"cash",amount:0}),vt(()=>{const E=f.value[$];E&&(E.focus(),E.showPopup())})}},z=$=>{if(p.length>1){const E=p.findIndex(N=>N.id===$);E!==-1&&p.splice(E,1)}},j=($,E="cash")=>{g.value=$,v.value=new Date,p.splice(0,p.length),$==="cash"&&(p.splice(0,p.length,{id:E,amount:d.total}),vt(()=>{u.value.length>0&&u.value[0]&&(u.value[0].focus(),u.value[0].select())}))},V=()=>{if(!B.value)return;n.value=!0;let $={total:d.total,is_debt:g.value==="debt"};if(g.value==="debt")$.due_date=dt.formatDate(v.value,"YYYY-MM-DD"),$.payments=[];else{const E=q.value,N=E>d.total?E-d.total:0,S=x.value>0?x.value:0;$.payments=p,$.remaining_debt=S,$.change=N}o("accepted",$),n.value=!1},I=()=>{j("cash",d.customer?y:"cash")};he(()=>{const $=E=>{d.modelValue&&E.ctrlKey&&E.key==="Enter"&&(E.preventDefault(),V())};document.addEventListener("keydown",$),ht(()=>{document.removeEventListener("keydown",$)})});const R=($,E)=>{vt(()=>{u.value[E]&&(u.value[E].focus(),u.value[E].select())})};return($,E)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":E[3]||(E[3]=N=>$.$emit("update:modelValue",N)),onBeforeShow:I},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>E[4]||(E[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[m.customer?(c(),h("div",ok,[t("div",nk,[b(" Username: "+r(m.customer.code)+" ",1),E[5]||(E[5]=t("br",null,null,-1)),b(" Nama: "+r(m.customer.name),1),E[6]||(E[6]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(a(K)(m.customer.wallet_balance)),1)])])):k("",!0),t("div",sk," Total: Rp. "+r(a(K)(m.total)),1),t("div",rk,[e(a(Yt),{modelValue:g.value,"onUpdate:modelValue":[E[0]||(E[0]=N=>g.value=N),j],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!m.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="cash"?(c(),h("div",ik,[(c(!0),h(J,null,Fe(p,(N,S)=>(c(),h("div",{key:S,class:"row q-col-gutter-sm q-mb-sm"},[t("div",dk,[e(a(ce),{modelValue:N.id,"onUpdate:modelValue":[A=>N.id=A,A=>R(A,S)],options:_.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:A=>f.value[S]=A},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",uk,[e(Ee,{modelValue:N.amount,"onUpdate:modelValue":A=>N.amount=A,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:N.id==="wallet"&&!w.value,"error-message":N.id==="wallet"&&!w.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:A=>u.value[S]=A},He({_:2},[p.length>1?{name:"append",fn:l(()=>[e(P,{size:"xs",name:"close",class:"cursor-pointer",onClick:A=>z(N.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",mk,[e(U,{disable:!(p.length<3&&x.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:O,size:"sm"},null,8,["disable"])]),t("div",ck,[x.value>0?(c(),h("div",pk," Sisa Tagihan: Rp. "+r(a(K)(x.value)),1)):x.value<0?(c(),h("div",fk," Kembalian: Rp. "+r(a(K)(Math.abs(x.value))),1)):(c(),h("div",gk," Tagihan Terbayar "))])])):g.value==="debt"&&m.customer?(c(),h("div",bk,[e(da,{outlined:"",modelValue:v.value,"onUpdate:modelValue":E[1]||(E[1]=N=>v.value=N),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(M),"max-date":a(Y),rules:C.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",vk," Total Utang: Rp. "+r(a(K)(m.total)),1)])):g.value==="debt"&&!m.customer?(c(),h("div",yk,E[7]||(E[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(U,{flat:"",label:"Batal",color:"grey",onClick:E[2]||(E[2]=N=>$.$emit("update:modelValue",!1)),class:"col"}),e(U,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:V,disable:n.value||!B.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},kk=Object.freeze(Object.defineProperty({__proto__:null,default:_k},Symbol.toStringTag,{value:"Module"})),wk={key:0},hk={style:{float:"right"}},$k={key:1},xk={style:{float:"right"}},Sk={key:2},Vk={style:{float:"right"}},qk={key:3},Ck={style:{float:"right"}},Tk={style:{float:"right"}},Pk={class:"q-gutter-sm"},Rk={class:"q-my-md"},Ok={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(m,{emit:s}){const d=T(null),o=()=>{var i;(i=d.value)==null||i.focus()};return(i,n)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ae,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(m.order.code),1)]),m.customer?(c(),h("tr",wk,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(m.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(m.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ")),t("div",hk,r(a(K)(m.payment.total)),1)])]),m.payment.cash_amount?(c(),h("tr",$k,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ")),t("div",xk,r(a(K)(m.payment.cash_amount)),1)])])):k("",!0),m.payment.wallet_amount?(c(),h("tr",Sk,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ")),t("div",Vk,r(a(K)(m.payment.wallet_amount)),1)])])):k("",!0),m.payment.remaining_debt?(c(),h("tr",qk,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ")),t("span",Ck,r(a(K)(m.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ")),t("div",Tk,r(a(K)(m.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",Pk,[e(U,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(U,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Rk,[e(U,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Dk=wt(Ok,[["__scopeId","data-v-a3bb29e0"]]),Ik=Object.freeze(Object.defineProperty({__proto__:null,default:Dk},Symbol.toStringTag,{value:"Module"})),Uk={class:"column"},Ek={class:"bg-grey-2 q-pa-xs"},jk={class:"text-subtitle1 text-bold text-grey-10"},Ak={class:"text-caption text-grey-8"},Nk={class:"col-12 col-sm-6"},Mk={class:"full-width"},Bk={key:1},zk={key:0},Fk={key:1},Lk={class:"col-12 col-sm-6",align:"left"},Kk={class:"full-width"};const Hk={key:1},Yk={class:"full-width",style:{"border-collapse":"collapse"}},Wk={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Qk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Jk={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Gk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Xk={key:0},Zk={class:"col-12 col-sm-6"},ew={class:"text-body2 text-grey-7 text-italic"},tw={class:"col-12 col-sm-6"},aw={class:"row justify-end q-gutter-y-xs"},lw={class:"col-12 row justify-between"},ow={class:"text-subtitle2 text-bold"},nw={class:"row justify-end q-gutter-y-xs"},sw={class:"col-12 row justify-between"},rw={class:"text-subtitle2 text-bold"},iw={class:"row justify-end q-gutter-y-xs"},dw={class:"col-12 row justify-between"},uw={class:"text-subtitle2 text-bold"},Yo={__name:"InvoiceTab",props:{data:Object},setup(m){const s=m;return(d,o)=>{const i=Z("i-link"),n=Z("tempate");return c(),h("div",Uk,[e(ae,{class:"q-pa-none"},{default:l(()=>[t("div",Ek,[t("div",jk," INVOICE #"+r(s.data.code),1),t("div",Ak,[b(" Kasir: "+r(s.data.cashier.username)+" - "+r(s.data.cashier.name)+" | "+r(a(ge)(s.data.datetime))+" ",1),s.data.cashier_session?(c(),h(J,{key:0},[b(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Ae),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",Nk,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",Mk,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(c(),D(i,{key:0,href:d.route("admin.customer.detail",{id:s.data.customer_id})},{default:l(()=>[e(P,{class:"inline-icon",name:"person"}),b(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(c(),h("div",Bk,[e(P,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pelanggan Umum "))]))])]),s.data.customer_phone?(c(),h("tr",zk,[t("td",null,[e(P,{class:"inline-icon",name:"phone"}),b(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(c(),h("tr",Fk,[t("td",null,[e(P,{class:"inline-icon",name:"home_pin"}),b(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",Lk,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",Kk,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ge)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(d.$CONSTANTS.SALES_ORDER_STATUSES[s.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)]),k("",!0),s.data.due_date?(c(),h("tr",Hk,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(oa)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("table",Yk,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(c(!0),h(J,null,Fe(s.data.details,g=>(c(),h("tr",{key:g.id},[t("td",Wk,[e(i,{href:d.route("admin.product.detail",g.product_id)},{default:l(()=>[b(r(g.product_name),1)]),_:2},1032,["href"])]),t("td",Qk,r(a(K)(g.price)),1),t("td",Jk,r(g.quantity),1),t("td",Gk,r(a(K)(g.subtotal_price)),1)]))),128)),s.data.details.length==0?(c(),h("tr",Xk,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(ae,{class:"row",align:"left"},{default:l(()=>[t("div",Zk,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",ew,r(s.data.notes?s.data.notes:"-"),1)]),t("div",tw,[s.data.change>0?(c(),D(n,{key:0},{default:l(()=>[t("div",aw,[t("div",lw,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Jumlah Bayar",-1)),t("div",ow,r(a(K)(parseInt(s.data.total_paid)+parseInt(s.data.change))),1)])]),t("div",nw,[t("div",sw,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Kembalian",-1)),t("div",rw,r(a(K)(s.data.change)),1)])])]),_:1})):k("",!0),t("div",iw,[t("div",dw,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",uw,r(a(K)(s.data.grand_total)),1)])])])]),_:1})])}}},mw=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),cw={key:0,class:"text-center q-mb-md text-grey-8"},pw={class:"text-subtitle2 text-weight-medium"},fw={class:"text-h5 text-center text-primary q-pb-md"},gw={class:"text-center q-mt-md"},bw={key:0,class:"text-h6 text-negative text-weight-bold"},vw={key:1,class:"text-h6 text-green-8 text-weight-bold"},yw={key:2,class:"text-h6 text-positive text-weight-bold"},Wo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:s}){const d=m,o=s,i=be(),n=T(!1),g=T({method:"cash",amount:d.total,notes:null}),v=i.props.data.customer,f=X(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...v?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(x=>({label:x.name,value:x.id}))]),u=X(()=>d.total-(g.value.amount||0)),p=X(()=>{const x=g.value.amount||0;return d.total,x<=0?"Jumlah pembayaran harus lebih dari 0.":g.value.method==="wallet"&&v&&x>v.wallet_balance?"Saldo wallet tidak mencukupi.":null}),y=X(()=>p.value===null),_=()=>{if(!y.value)return;n.value=!0;const x={total_paid:g.value.amount,payments:[{id:g.value.method,amount:g.value.amount}],notes:g.value.notes,change:Math.max(0,(g.value.amount||0)-d.total),remaining_debt:Math.max(0,d.total-(g.value.amount||0))};o("accepted",x),n.value=!1},q=()=>{g.value.amount=d.total,g.value.method="cash",g.value.notes=null};return(x,w)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":w[4]||(w[4]=M=>x.$emit("update:modelValue",M)),onBeforeShow:q},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>w[5]||(w[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[a(v)?(c(),h("div",cw,[t("div",pw,[b(r(a(v).code)+" ",1),w[6]||(w[6]=t("br",null,null,-1)),b(" "+r(a(v).name)+" ",1),w[7]||(w[7]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(a(K)(a(v).wallet_balance)),1)])])):k("",!0),t("div",fw," Total: Rp. "+r(a(K)(m.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":w[0]||(w[0]=M=>g.value.method=M),options:f.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":w[1]||(w[1]=M=>g.value.amount=M),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":p.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":w[2]||(w[2]=M=>g.value.notes=M),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",gw,[u.value>0?(c(),h("div",bw," Sisa Tagihan: Rp. "+r(a(K)(u.value)),1)):u.value<0?(c(),h("div",vw," Kembalian: Rp. "+r(a(K)(Math.abs(u.value))),1)):(c(),h("div",yw," Tagihan Terbayar "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(U,{flat:"",label:"Batal",color:"grey",onClick:w[3]||(w[3]=M=>x.$emit("update:modelValue",!1))}),e(U,{label:"Bayar",color:"positive",onClick:_,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},_w=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),kw={class:"column"},ww={class:"row"},hw={class:"full-width",style:{"border-collapse":"collapse"}},$w={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},xw={class:"row items-center q-gutter-x-sm"},Sw={class:"text-weight-bold"},Vw={class:"row items-center q-gutter-x-sm q-mt-xs"},qw={class:"text-caption text-grey-6"},Cw={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Tw={class:"text-caption text-grey-6"},Pw={class:"q-mt-xs"},Rw={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ow={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Dw={key:0},Iw={class:"text-right q-pa-sm"},Uw={class:"text-right q-pa-sm"},Qo={__name:"PaymentTab",props:{data:Object},setup(m){const s=m,d=X(()=>s.data.remaining_debt),o=xe(),i=T(!1),n=()=>{i.value=!0},g=async f=>{const u={order_id:s.data.id,payments:f.payments,notes:f.notes};o.loading.show({message:"Memproses pembayaran..."});try{const p=await De.post(route("admin.sales-order.add-payment"),u);o.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),i.value=!1,ee.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(p){let y="Gagal memproses pembayaran.";p.response&&p.response.data&&p.response.data.message?y=p.response.data.message:p.message&&(y=p.message),o.notify({message:y,color:"negative",icon:"error"})}finally{o.loading.hide()}},v=f=>{o.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({message:"Menghapus pembayaran..."});try{await De.post(route("admin.sales-order.delete-payment",{id:f.id})),o.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(u){let p="Gagal menghapus pembayaran.";u.response&&u.response.data&&u.response.data.message?p=u.response.data.message:u.message&&(p=u.message),o.notify({message:p,color:"negative",icon:"error"})}finally{o.loading.hide()}})};return(f,u)=>(c(),h(J,null,[t("div",kw,[e(Ae),e(ae,{class:"q-pa-sm"},{default:l(()=>[t("div",ww,[f.$can("admin.sales-order.add-payment")&&d.value>0?(c(),D(U,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:u[0]||(u[0]=G(p=>n(),["stop"]))})):k("",!0)]),t("table",hw,[u[7]||(u[7]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(c(!0),h(J,null,Fe(s.data.payments,p=>(c(),h("tr",{key:p.id},[t("td",$w,[t("div",xw,[e(P,{name:"tag",size:"xs",color:"grey-7"}),t("span",Sw,r(p.code),1)]),t("div",Vw,[e(P,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",qw,r(a(ge)(p.created_at)),1)]),(p.type==="transfer"||p.type==="cash")&&p.account?(c(),h("div",Cw,[e(P,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Tw,r(p.account.name),1)])):k("",!0),t("div",Pw,[e(ft,{label:f.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[p.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Rw,r(a(K)(p.amount)),1),t("td",Ow,[f.$can("admin.sales-order.delete-payment")&&s.data.customer_id?(c(),D(U,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>v(p)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(c(),h("tr",Dw,u[2]||(u[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[u[3]||(u[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Dibayar",-1)),t("th",Iw,r(a(K)(s.data.total_paid)),1),u[4]||(u[4]=t("th",null,null,-1))]),t("tr",null,[u[5]||(u[5]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Sisa Tagihan",-1)),t("th",Uw,r(a(K)(d.value)),1),u[6]||(u[6]=t("td",null,null,-1))])])])]),_:1})]),e(Wo,{modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=p=>i.value=p),total:d.value,customer:s.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},Ew=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),jw={class:"q-gutter-sm"},Aw={class:"col col-lg-6 q-pa-xs",align:"center"},Pl="Rincian Penjualan",Nw={__name:"Detail",setup(m){const s=new URLSearchParams(window.location.search),d=be(),o=d.props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"invoice");he(()=>{vt(()=>{const f=s.get("print_size");f&&v(f)})});const v=f=>{window.open(route("admin.sales-order.print",{id:d.props.data.id,size:f}),"_self")};return(f,u)=>{const p=Z("i-head"),y=Z("authenticated-layout");return c(),h(J,null,[e(p,{title:Pl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Pl))])]),"left-button":l(()=>[t("div",jw,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=_=>f.$goBack())})])]),"right-button":l(()=>[e(U,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=_=>v("58mm"))}),e(U,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[2]||(u[2]=_=>v("a4"))}),i.value?k("",!0):(c(),D(U,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[3]||(u[3]=_=>a(ee).get(f.route("admin.sales-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Aw,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Pt,{modelValue:g.value,"onUpdate:modelValue":u[4]||(u[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(c(),D(ot,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(Rt,{modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=_=>g.value=_),animated:""},{default:l(()=>[e(nt,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(Yo,{data:a(o)},null,8,["data"])]),_:1}),e(nt,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(Qo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Mw=Object.freeze(Object.defineProperty({__proto__:null,default:Nw},Symbol.toStringTag,{value:"Module"})),Bw={class:"text-weight-medium"},zw={class:"text-caption text-grey-6 elipsis"},Fw={class:"column items-end"},Lw={class:"text-caption text-grey-6 text-italic"},Jo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(m){const s=xe(),d=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(c(),D(Ie,{dense:"",rows:m.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ye({height:a(d)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(c(!0),h(J,null,Fe(g.cols,v=>(c(),D(Zt,{key:v.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left wrap-column"},{default:l(()=>[t("div",Bw,r(g.row.product_name),1),t("div",zw,r(g.row.product_barcode),1),g.row.notes?(c(),D($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal_price",props:g,class:"text-right"},{default:l(()=>[t("div",Fw,[t("div",null,r(a(K)(g.row.subtotal_price)),1),t("div",Lw,r(a(K)(g.row.quantity))+" "+r(g.row.product_uom)+" x Rp. "+r(a(K)(g.row.price)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(U,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",g.row),disable:m.isProcessing},null,8,["onClick","disable"]),e(U,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",g.row),disable:m.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Kw=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),Hw={key:0,class:"text-center q-mb-md text-grey-8"},Yw={class:"text-subtitle2 text-weight-medium"},Ww={class:"text-h5 text-center text-primary q-pb-md"},Qw={class:"q-mb-md flex flex-center"},Jw={key:1},Gw={class:"col-6"},Xw={class:"col-6"},Zw={class:"row"},e0={class:"text-center q-mt-md"},t0={key:0,class:"text-h6 text-negative text-weight-bold"},a0={key:1,class:"text-h6 text-green-8 text-weight-bold"},l0={key:2,class:"text-h6 text-positive text-weight-bold"},o0={key:2},n0={class:"text-h6 text-negative text-center"},s0={key:3},Go={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:s}){const d=m,o=s,i=be(),n=T(!1),g=T("cash"),v=T(new Date),f=T(i.props.settings.after_payment_action??"print"),u=T([]),p=T([]),y=Re([{id:"cash",amount:0}]),_=i.props.settings.default_payment_mode,q=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],x=X(()=>[{label:"Laci Kasir",value:"cash"},...d.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(N=>({label:N.name,value:N.id}))]),w=X(()=>y.reduce((N,S)=>N+(S.amount||0),0)),M=X(()=>d.total-w.value),Y=X(()=>{if(!d.customer)return!0;const N=y.find(A=>A.id==="wallet");return(N?N.amount:0)<=d.customer.wallet_balance}),C=new Date,B=dt.addToDate(new Date,{days:30}),O=X(()=>[N=>!!N||"Tanggal jatuh tempo harus diisi",N=>dt.isBetweenDates(N,C,B,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),z=X(()=>{if(g.value==="debt")return!!d.customer&&O.value.every(re=>re(v.value)===!0);const N=Y.value,S=y.some(re=>(re.amount||0)>0),A=y.every(re=>(re.amount||0)>=0),le=M.value<=0;return N&&S&&A&&le}),j=()=>{if(y.length<3){const N=y.length;y.push({id:"cash",amount:0}),vt(()=>{const S=u.value[N];S&&(S.focus(),S.showPopup())})}},V=N=>{if(y.length>1){const S=y.findIndex(A=>A.id===N);S!==-1&&y.splice(S,1)}},I=(N,S="cash")=>{g.value=N,v.value=new Date,y.splice(0,y.length),N==="cash"&&(y.splice(0,y.length,{id:S,amount:d.total}),vt(()=>{p.value.length>0&&p.value[0]&&(p.value[0].focus(),p.value[0].select())}))},R=()=>{if(!z.value)return;n.value=!0;let N={total:d.total,is_debt:g.value==="debt",after_payment_action:f.value};if(g.value==="debt")N.due_date=dt.formatDate(v.value,"YYYY-MM-DD"),N.payments=[];else{const S=w.value,A=S>d.total?S-d.total:0,le=M.value>0?M.value:0;N.payments=y,N.remaining_debt=le,N.change=A}o("accepted",N),n.value=!1},$=()=>{I("cash",d.customer?_:"cash")};he(()=>{const N=S=>{d.modelValue&&S.ctrlKey&&S.key==="Enter"&&(S.preventDefault(),R())};document.addEventListener("keydown",N),ht(()=>{document.removeEventListener("keydown",N)})});const E=(N,S)=>{vt(()=>{p.value[S]&&(p.value[S].focus(),p.value[S].select())})};return(N,S)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":S[4]||(S[4]=A=>N.$emit("update:modelValue",A)),onBeforeShow:$},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,null,{default:l(()=>S[5]||(S[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[m.customer?(c(),h("div",Hw,[t("div",Yw,[b(" Username: "+r(m.customer.code)+" ",1),S[6]||(S[6]=t("br",null,null,-1)),b(" Nama: "+r(m.customer.name),1),S[7]||(S[7]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(a(K)(m.customer.wallet_balance)),1)])])):k("",!0),t("div",Ww," Total: Rp. "+r(a(K)(m.total)),1),t("div",Qw,[e(a(Yt),{modelValue:g.value,"onUpdate:modelValue":[S[0]||(S[0]=A=>g.value=A),I],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!m.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="cash"?(c(),h("div",Jw,[(c(!0),h(J,null,Fe(y,(A,le)=>(c(),h("div",{key:le,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Gw,[e(a(ce),{modelValue:A.id,"onUpdate:modelValue":[re=>A.id=re,re=>E(re,le)],options:x.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:re=>u.value[le]=re},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",Xw,[e(Ee,{modelValue:A.amount,"onUpdate:modelValue":re=>A.amount=re,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:A.id==="wallet"&&!Y.value,"error-message":A.id==="wallet"&&!Y.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:re=>p.value[le]=re},He({_:2},[y.length>1?{name:"append",fn:l(()=>[e(P,{size:"xs",name:"close",class:"cursor-pointer",onClick:re=>V(A.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Zw,[e(U,{disable:!(y.length<3&&M.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:j,size:"sm"},null,8,["disable"])]),t("div",e0,[M.value>0?(c(),h("div",t0," Sisa Tagihan: Rp. "+r(a(K)(M.value)),1)):M.value<0?(c(),h("div",a0," Kembalian: Rp. "+r(a(K)(Math.abs(M.value))),1)):(c(),h("div",l0," Tagihan Terbayar "))])])):g.value==="debt"&&m.customer?(c(),h("div",o0,[e(da,{outlined:"",modelValue:v.value,"onUpdate:modelValue":S[1]||(S[1]=A=>v.value=A),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(C),"max-date":a(B),rules:O.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",n0," Total Utang: Rp. "+r(a(K)(m.total)),1)])):g.value==="debt"&&!m.customer?(c(),h("div",s0,S[8]||(S[8]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(a(ce),{modelValue:f.value,"onUpdate:modelValue":S[2]||(S[2]=A=>f.value=A),options:q,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:n.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(U,{flat:"",label:"Batal",color:"grey",onClick:S[3]||(S[3]=A=>N.$emit("update:modelValue",!1)),class:"col"}),e(U,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:R,disable:n.value||!z.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},r0=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"})),i0={class:"row items-center no-wrap"},d0={class:"col-auto"},Xo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:s,emit:d}){const o=m,i=d,n=()=>{i("save")},g=X(()=>o.item.quantity*o.item.price),v=p=>{p.stopPropagation(),p.preventDefault()},f=p=>{o.modelValue&&(p.key==="Enter"?(n(),i("update:modelValue",!1),v(p)):p.key==="Escape"&&(i("update:modelValue",!1),v(p)))};return he(()=>{window.addEventListener("keydown",f)}),ht(()=>{window.removeEventListener("keydown",f)}),s({getCurrentItem:()=>o.item}),(p,y)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":y[6]||(y[6]=_=>p.$emit("update:modelValue",_))},{default:l(()=>[e(fe,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",i0,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",d0,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=_=>p.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:m.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=_=>m.item.product_name=_),label:"Produk","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:m.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=_=>m.item.quantity=_),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:m.item.price,"onUpdate:modelValue":y[3]||(y[3]=_=>m.item.price=_),label:"Harga",readonly:!m.item.product.price_editable,"hide-bottom-space":"",disable:m.isProcessing},null,8,["modelValue","readonly","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":y[4]||(y[4]=_=>g.value=_),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:m.item.notes,"onUpdate:modelValue":y[5]||(y[5]=_=>m.item.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[pe]]),te(e(U,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:m.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},u0=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),m0={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(m,{emit:s}){return(d,o)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>d.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ae,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[te(e(U,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Zo=wt(m0,[["__scopeId","data-v-92052544"]]),c0=Object.freeze(Object.defineProperty({__proto__:null,default:Zo},Symbol.toStringTag,{value:"Module"})),p0={class:"row items-center no-wrap"},f0={class:"col text-subtite text-bold text-grey-8"},g0={class:"col-auto"},en={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:s,emit:d}){const o=m,i=d,n=()=>{i("save")},g=u=>{u.stopPropagation(),u.preventDefault()},v=u=>{o.modelValue&&(u.key==="Enter"?(n(),g(u)):u.key==="Escape"&&(i("update:modelValue",!1),g(u)))};return he(()=>{window.addEventListener("keydown",v)}),ht(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(u,p)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":p[4]||(p[4]=y=>u.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(ae,{class:"q-py-sm"},{default:l(()=>[t("div",p0,[t("div",f0," Edit "+r(m.data.code),1),t("div",g0,[e(U,{flat:"",size:"sm",round:"",icon:"close",onClick:p[0]||(p[0]=y=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:l(()=>[e(Ft,{modelValue:m.data.datetime,"onUpdate:modelValue":p[1]||(p[1]=y=>m.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:m.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status],"onUpdate:modelValue":p[2]||(p[2]=y=>u.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:m.data.notes,"onUpdate:modelValue":p[3]||(p[3]=y=>m.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[te(e(U,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[pe]]),te(e(U,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:m.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},b0=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),v0={key:0},y0={style:{float:"right"}},_0={key:1},k0={style:{float:"right"}},w0={key:2},h0={style:{float:"right"}},$0={key:3},x0={style:{float:"right"}},S0={style:{float:"right"}},V0={class:"q-gutter-sm"},q0={class:"q-my-md"},C0={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(m,{emit:s}){const d=T(null),o=()=>{var i;(i=d.value)==null||i.focus()};return(i,n)=>(c(),D(lt,{"model-value":m.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ae,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(m.order.code),1)]),m.customer?(c(),h("tr",v0,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(m.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(m.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ")),t("div",y0,r(a(K)(m.payment.total)),1)])]),m.payment.cash_amount?(c(),h("tr",_0,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ")),t("div",k0,r(a(K)(m.payment.cash_amount)),1)])])):k("",!0),m.payment.wallet_amount?(c(),h("tr",w0,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ")),t("div",h0,r(a(K)(m.payment.wallet_amount)),1)])])):k("",!0),m.payment.remaining_debt?(c(),h("tr",$0,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ")),t("span",x0,r(a(K)(m.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ")),t("div",S0,r(a(K)(m.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",V0,[e(U,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(U,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",q0,[e(U,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},tn=wt(C0,[["__scopeId","data-v-794fd35f"]]),T0=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),P0={class:"q-gutter-sm"},R0={class:"row items-center"},O0={class:"text-weight-bold"},D0={class:"text-weight-bold"},I0={class:"row q-col-gutter-none full-width"},U0={class:"col-sm-6 col-12 col"},E0={class:"row full-width"},j0={key:0,class:"row"},A0={class:"col-sm-6 col-12"},N0={class:"row q-ml-sm items-end"},M0={class:"row col grow"},B0={class:"col-12 q-pa-sm column"},z0={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},F0={key:0,class:"col"},L0={class:"text-caption text-grey-6 q-mt-xs"},K0={key:0,class:"text-caption text-grey-8 q-mt-xs"},H0={class:"text-italic"},Y0={key:1,class:"col"},W0={class:"q-pa-sm q-pb-none text-grey-8"},Q0={class:"col"},J0={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},G0={class:"text-h4 text-weight-bold"},X0={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Z0={class:"col q-py-sm"},e2={class:"q-py-sm"},t2={__name:"Editor",setup(m){const s=xe(),d=be(),o=T(!0),i=T(null),n=T(null),g=T(null),v=T(!1),f=T(null),u=T(null),{isFullscreen:p,toggleFullscreen:y}=_a(u),_=d.props.data.code,q=T(d.props.data.customer),x=T(null),w=T(""),M=T(!1),Y=T(!1),C=T(!1),B=T(!1),O=T(!1),z=T(!1),j=T(null),V=T("price_1"),I=Re({id:d.props.data.id,code:d.props.data.code,customer_id:d.props.data.customer_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),R=X(()=>I.items.reduce((de,Q)=>de+Q.price*Q.quantity,0)),$=()=>{var de;y(),p.value||(de=f==null?void 0:f.value)==null||de.hideDrawer()},E=de=>isNaN(de)||de<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,N=de=>isNaN(de)||de<0?(bt("Harga tidak valid.","top"),!1):!0,S=de=>!de||de.length==0?(bt("Barcode tidak valid.","top"),!1):!0,A=de=>{var Q;(Q=w.value)!=null&&Q.endsWith("*")?w.value+=de.name:w.value=de.name},le=async()=>{const de=w.value.trim();if(de.length===0){C.value=!0;return}const Q=de.split("*");let Ve=1,je="",ke=null;if(Q.length===1)je=Q[0];else if(Q.length<=3)Ve=parseInt(Q[0]),je=Q[1],Q.length===3&&(ke=parseFloat(Q[2]));else{bt("Input tidak valid.","top");return}if(je.length===0){C.value=!0;return}!S(je)&&!E(Ve)&&!N(ke)||(M.value=!0,await De.post(route("admin.sales-order.add-item"),{order_id:I.id,product_code:je,qty:Ve,price:ke,merge:o.value}).then(gt=>{const xt=gt.data.data.item;let Et=-1;gt.data.data.mergeItem&&(Et=I.items.findIndex(Lt=>Lt.id===xt.id)),Et===-1?I.items.push(xt):I.items[Et]=xt,w.value="",ke!==null&&ke!==parseFloat(xt.price)&&bt("Harga tidak dapat diubah!","top")}).catch(gt=>{var xt,Et;ct((Et=(xt=gt.response)==null?void 0:xt.data)==null?void 0:Et.message,"top"),console.error("Gagal mengambil data produk:",gt)}),M.value=!1,vt(()=>{var gt;(gt=i.value)==null||gt.focus()}))},re=de=>{j.value=Object.create(de),B.value=!0},me=de=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${de.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{M.value=!0,De.post(route("admin.sales-order.remove-item"),{id:de.id}).then(()=>{const Q=I.items.findIndex(Ve=>Ve.id===de.id);Q!==-1&&(I.items.splice(Q,1)[0],pt("Item telah dihapus","top"))}).catch(Q=>{var Ve,je;ct(((je=(Ve=Q==null?void 0:Q.response)==null?void 0:Ve.data)==null?void 0:je.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(Q)}).finally(()=>{M.value=!1})})},Oe=()=>{M.value=!0;const de=n.value.getCurrentItem(),Q={id:de.id,qty:de.quantity};de.product.price_editable&&(Q.price=de.price),de.notes&&(Q.notes=de.notes),De.post(route("admin.sales-order.update-item"),Q).then(Ve=>{const je=Ve.data.data,ke=I.items.findIndex(gt=>gt.id===je.id);ke!==-1&&(I.items[ke]=je,pt("Item telah diperbarui","top"))}).catch(Ve=>{var je,ke;ct(((ke=(je=Ve==null?void 0:Ve.response)==null?void 0:je.data)==null?void 0:ke.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Ve)}).finally(()=>{M.value=!1})};he(()=>{const de=Q=>{Y.value||v.value||B.value||C.value||O.value||(Q.key==="F1"?(Q.preventDefault(),v.value=!0):Q.key==="F2"?(Q.preventDefault(),g.value.focus()):Q.key==="F3"?(Q.preventDefault(),i.value.focus()):Q.key==="F4"?(Q.preventDefault(),o.value=!o.value):Q.key==="F10"||Q.ctrlKey&&Q.key==="Enter"?(Q.preventDefault(),_e.value&&(Y.value=!0)):Q.key==="F11"?(Q.preventDefault(),$()):(Q.key==="F5"||Q.key==="F6"||Q.key==="F7"||Q.key==="F12")&&Q.preventDefault())};document.addEventListener("keydown",de),ht(()=>{document.removeEventListener("keydown",de)}),vt(()=>{var Q;(Q=f==null?void 0:f.value)==null||Q.hideDrawer()})});const Ge=async de=>{q.value=de,I.customer_id=de==null?void 0:de.id,await ue(),de!=null&&de.id?(V.value=q.value.default_price_type??"price_1",i.value.focus()):(V.value="price_1",g.value.focus())},ue=async()=>{M.value=!0;const de={id:I.id,customer_id:I.customer_id??null,datetime:Xt(I.datetime),notes:I.notes};await De.post(route("admin.sales-order.update"),de).then(Q=>{const Ve=Q.data.data.id;I.customer_id=Ve.customer_id}).catch(Q=>{var Ve,je;ct(((je=(Ve=Q==null?void 0:Q.response)==null?void 0:Ve.data)==null?void 0:je.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Q)}).finally(()=>{M.value=!1})},L=de=>{if(I.items.length===0){pt("Item masih kosong","top");return}const Q={id:I.id,...de};M.value=!0,De.post(route("admin.sales-order.close"),Q).then(Ve=>{pt("Transaksi selesai"),Q.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:I.id,size:d.props.settings.default_print_size}),"_self"):Q.after_payment_action==="detail"?ee.get(route("admin.sales-order.detail",{id:I.id})):Q.after_payment_action==="new-order"&&ee.get(route("admin.sales-order.add"))}).catch(Ve=>{var je,ke;ct((ke=(je=Ve.response)==null?void 0:je.data)==null?void 0:ke.message),console.error(Ve)}).finally(()=>{M.value=!1})},ye=()=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.sales-order.cancel",{id:I.id}),{id:I.id}).then(()=>{pt("Transaksi telah dibatalkan."),ee.visit(route("admin.sales-order.detail",{id:I.id}))}).catch(de=>{var Ve,je;const Q=((je=(Ve=de.response)==null?void 0:Ve.data)==null?void 0:je.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:Q,color:"warning",position:"bottom"}),console.error(de)})})},se=()=>{window.open(route("admin.sales-order.detail",{id:I.id})+"?preview=1","_blank")},H=X(()=>q.value?q.value.wallet_balance>=R.value:!0),_e=X(()=>Vt().appContext.config.globalProperties.$can("admin.sales-order.close")&&!M.value&&I.items.length!==0&&I.status==="draft");return(de,Q)=>{const Ve=Z("i-head"),je=Z("authenticated-layout");return c(),h(J,null,[e(Ve,{title:a(_)},null,8,["title"]),e(je,{ref_key:"authLayoutRef",ref:f,"show-drawer-button":!0},{title:l(()=>[b(r(a(_)),1)]),"left-button":l(()=>[t("div",P0,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:Q[0]||(Q[0]=ke=>a(ee).get(de.route("admin.sales-order.index")))})])]),"right-button":l(()=>{var ke,gt;return[t("div",R0,[a(s).screen.gt.sm?(c(),h(J,{key:0},[t("div",O0,r(a(d).props.auth.user.username),1),Q[22]||(Q[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",D0,r((gt=(ke=a(d).props.data.cashier_session)==null?void 0:ke.cashier_terminal)==null?void 0:gt.name),1),Q[23]||(Q[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ya)])],64)):k("",!0),k("",!0)])]}),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",I0,[t("div",U0,[t("div",E0,[e(Lo,{ref_key:"customerAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:q.value,"onUpdate:modelValue":Q[2]||(Q[2]=ke=>q.value=ke),label:"Pelanggan",disable:M.value,onCustomerSelected:Ge,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),q.value?(c(),h("div",j0,[t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",H.value?"text-green":"text-red"])}," Wallet: "+r(q.value?"Rp. "+a(K)(q.value?q.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:Ce(["q-mt-xs q-ml-sm text-bold",q.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(q.value?"Rp. "+a(K)(q.value?q.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",A0,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:w.value,"onUpdate:modelValue":Q[5]||(Q[5]=ke=>w.value=ke),onKeyup:Q[6]||(Q[6]=Wt(G(ke=>le(),["prevent"]),["enter"])),loading:M.value,disable:M.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(P,{name:"search",onClick:Q[3]||(Q[3]=ke=>C.value=!0),class:"cursor-pointer"})]),append:l(()=>{var ke;return[((ke=w.value)==null?void 0:ke.length)>0?(c(),D(P,{key:0,name:"send",onClick:Q[4]||(Q[4]=gt=>le()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",N0,[e(St,{class:"col",modelValue:o.value,"onUpdate:modelValue":Q[7]||(Q[7]=ke=>o.value=ke),label:"Gabungkan item",disable:M.value},null,8,["modelValue","disable"])])])]),t("div",M0,[t("div",B0,[e(Jo,{items:I.items,onUpdateQuantity:Q[8]||(Q[8]=({id:ke,value:gt})=>de.updateQuantity(ke,gt)),onRemoveItem:me,onEditItem:re,"is-processing":M.value},null,8,["items","is-processing"])])]),t("div",z0,[a(s).screen.gt.sm?(c(),h("div",F0,[t("div",L0,r(I.items.length)+" item(s) ",1),I.notes?(c(),h("div",K0,[Q[24]||(Q[24]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",H0,[e($e,{text:I.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(c(),h("div",Y0,[t("div",W0,[t("div",null,"#: "+r(I.code),1),t("div",null,r(a(ge)(I.datetime)),1)])])):k("",!0),t("div",Q0,[t("div",J0,[Q[26]||(Q[26]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",G0,[Q[25]||(Q[25]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(a(K)(R.value)),1)])])])]),t("div",X0,[t("div",Z0,[e(U,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:Q[9]||(Q[9]=ke=>Y.value=!0),disable:!_e.value,loading:M.value},null,8,["disable","loading"])]),t("div",e2,[e(U,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:Q[13]||(Q[13]=G(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[te((c(),D(oe,{clickable:"",onClick:Q[10]||(Q[10]=G(ke=>O.value=!0,["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>Q[27]||(Q[27]=[b("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),te((c(),D(oe,{clickable:"",onClick:Q[11]||(Q[11]=G(ke=>se(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"preview"})]),_:1}),e(F,null,{default:l(()=>Q[28]||(Q[28]=[b("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),te((c(),D(oe,{clickable:"",onClick:Q[12]||(Q[12]=G(ke=>ye(),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:l(()=>Q[29]||(Q[29]=[b(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Xo,{ref_key:"itemEditorRef",ref:n,modelValue:B.value,"onUpdate:modelValue":Q[14]||(Q[14]=ke=>B.value=ke),item:j.value,onSave:Q[15]||(Q[15]=ke=>Oe()),"is-processing":M.value},null,8,["modelValue","item","is-processing"]),e(Go,{modelValue:Y.value,"onUpdate:modelValue":Q[16]||(Q[16]=ke=>Y.value=ke),onAccepted:L,form:I,customer:q.value,total:R.value,accounts:a(d).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(ka,{modelValue:C.value,"onUpdate:modelValue":Q[17]||(Q[17]=ke=>C.value=ke),onProductSelected:A,priceType:V.value,"show-cost":de.$can("admin.product:view-cost")},null,8,["modelValue","priceType","show-cost"]),e(en,{modelValue:O.value,"onUpdate:modelValue":Q[18]||(Q[18]=ke=>O.value=ke),data:I,onSave:Q[19]||(Q[19]=ke=>ue()),"is-processing":M.value},null,8,["modelValue","data","is-processing"]),e(Zo,{modelValue:v.value,"onUpdate:modelValue":Q[20]||(Q[20]=ke=>v.value=ke)},null,8,["modelValue"]),e(tn,{modelValue:z.value,"onUpdate:modelValue":Q[21]||(Q[21]=ke=>z.value=ke),order:I,customer:q.value,total:R.value,payment:x.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},a2=Object.freeze(Object.defineProperty({__proto__:null,default:t2},Symbol.toStringTag,{value:"Module"})),l2={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(m){const s=window.CONSTANTS.SALES_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(c(),D(Mt,{status:m.status,statuses:a(s),colors:d},null,8,["status","statuses"]))}},o2={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(m){const s=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(c(),D(Mt,{status:m.status,statuses:a(s),colors:d},null,8,["status","statuses"]))}};const n2={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},s2={class:"q-pa-xs"},r2={class:"full-width row flex-center text-grey-8 q-gutter-sm"},i2={key:0},d2={key:1},u2={key:2},m2={key:3},c2={key:0},p2={key:1},f2={key:0},g2={key:0},b2={key:1},v2={class:"flex justify-end"},Rl="Penjualan",y2={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Bt(),u=zt(),p=[{label:"Semua Tahun",value:"all"},{label:`${f}`,value:f},...Ct(f-2,f-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Tt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_STATUSES)],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],x=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],w=Re({search:"",year:f,month:u,status:"all",payment_status:"all",delivery_status:"all",...Me()}),M=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),Y=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{V()});const C=$=>{if($.status=="draft"){B($);return}O($)},B=$=>{ee.get(route("admin.sales-order.edit",$.id))},O=$=>{ee.get(route("admin.sales-order.detail",$.id))},z=$=>{$t.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.sales-order.cancel",{id:$.id}),{id:$.id}).then(E=>{const N=E.data.data,S=o.value.findIndex(A=>A.id===N.id);if(S===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[S].status="canceled",s.notify({message:E.data.message,position:"bottom"})}).catch(E=>{var S,A;const N=((A=(S=E.response)==null?void 0:S.data)==null?void 0:A.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:N,color:"warning",position:"bottom"}),console.error(E)})})},j=$=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.sales-order.delete",$.id),fetchItemsCallback:V,loading:i}),V=($=null)=>{Be({pagination:M,filter:w,props:$,rows:o,url:route("admin.sales-order.data"),loading:i,tableRef:n})},I=()=>{V()},R=X(()=>s.screen.gt.sm?Y:Y.filter($=>$.name==="id"||$.name==="action"));return Ne(()=>w.year,$=>{$===null&&(w.month=null)}),($,E)=>{const N=Z("i-head"),S=Z("authenticated-layout");return c(),h(J,null,[e(N,{title:Rl}),e(S,null,He({title:l(()=>[b(r(Rl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:E[0]||(E[0]=A=>d.value=!d.value)},null,8,["icon"]),$.$can("admin.sales-order.edit")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:E[1]||(E[1]=A=>a(ee).get($.route("admin.sales-order.add")))})):k("",!0)]),default:l(()=>[t("div",s2,[e(Ie,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:M.value,"onUpdate:pagination":E[11]||(E[11]=A=>M.value=A),filter:w.search,loading:i.value,columns:R.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(v)}),onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:A,message:le,filter:re})=>[t("div",r2,[t("span",null,r(le)+" "+r(re?" with term "+re:""),1)])]),body:l(A=>[e(Pe,{props:A,class:"cursor-pointer",onClick:G(le=>C(A.row),["prevent"])},{default:l(()=>[e(W,{key:"id",props:A,class:"wrap-column"},{default:l(()=>{var le,re,me;return[t("div",null,[e(P,{name:"tag"}),b(" "+r(A.row.code),1)]),t("div",null,[e(P,{class:"inline-icon",name:"calendar_today"}),b(r(a(ge)(A.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[A.row.cashier?(c(),h("div",i2,[e(P,{name:"person",class:"inline-icon"}),b(" Kasir: "+r((le=A.row.cashier)==null?void 0:le.username),1)])):k("",!0),A.row.cashier_session?(c(),h("div",d2,[e(P,{name:"point_of_sale",class:"inline-icon"}),b(" Terminal: "+r((me=(re=A.row.cashier_session)==null?void 0:re.cashier_terminal)==null?void 0:me.name),1)])):k("",!0),A.row.customer?(c(),h("div",u2,[e(P,{name:"person",class:"inline-icon"}),e(ba,{href:$.route("admin.customer.detail",{id:A.row.customer.id}),onClick:E[8]||(E[8]=G(()=>{},["stop"]))},{default:l(()=>[b(" "+r(A.row.customer.code)+" - "+r(A.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(K)(A.row.grand_total)),1),A.row.notes?(c(),h("div",m2,[e(P,{name:"notes"}),b(" "+r(A.row.notes),1)])):k("",!0)],64)),t("div",null,[e(l2,{status:A.row.status},null,8,["status"]),e(o2,{status:A.row.payment_status},null,8,["status"]),k("",!0)])]}),_:2},1032,["props"]),e(W,{key:"cashier_id",props:A},{default:l(()=>{var le,re,me;return[A.row.cashier?(c(),h("div",c2,[e(P,{name:"person",class:"inline-icon"}),b(" "+r((le=A.row.cashier)==null?void 0:le.username),1)])):k("",!0),A.row.cashier_session?(c(),h("div",p2,[e(P,{name:"point_of_sale",class:"inline-icon"}),b(" "+r((me=(re=A.row.cashier_session)==null?void 0:re.cashier_terminal)==null?void 0:me.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(W,{key:"customer_id",props:A},{default:l(()=>[A.row.customer?(c(),h("div",f2,[t("div",null,[e(P,{name:"person",class:"inline-icon"}),b(" "+r(A.row.customer_code)+" - "+r(A.row.customer_name),1)]),A.row.customer_phone?(c(),h("div",g2,[e(P,{name:"phone",class:"inline-icon"}),b(" "+r(A.row.customer_phone),1)])):k("",!0),A.row.customer_address?(c(),h("div",b2,[e(P,{name:"home_pin",class:"inline-icon"}),b(" "+r(A.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:A},{default:l(()=>[b(r(a(K)(A.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:A},{default:l(()=>[e($e,{text:A.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:A,onClick:E[10]||(E[10]=G(()=>{},["stop"]))},{default:l(()=>[t("div",v2,[$.$can("admin.sales-order.detail")||$.$can("admin.sales-order.edit")||$.$can("admin.sales-order.cancel")||$.$can("admin.sales-order.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:E[9]||(E[9]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[A.row.status!="draft"&&$.$can("admin.sales-order.detail")?te((c(),D(oe,{key:0,onClick:G(le=>O(A.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"visibility"})]),_:1}),e(F,null,{default:l(()=>E[12]||(E[12]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),A.row.status=="draft"&&$.$can("admin.sales-order.edit")?te((c(),D(oe,{key:1,onClick:G(le=>B(A.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>E[13]||(E[13]=[b(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),A.row.status=="draft"&&$.$can("admin.sales-order.cancel")?te((c(),D(oe,{key:2,onClick:G(le=>z(A.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"cancel"})]),_:1}),e(F,null,{default:l(()=>E[14]||(E[14]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),$.$can("admin.sales-order.delete")?te((c(),D(oe,{key:3,onClick:G(le=>j(A.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>E[15]||(E[15]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",n2,[e(ce,{modelValue:w.year,"onUpdate:modelValue":[E[2]||(E[2]=A=>w.year=A),I],options:p,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),w.year!="all"?(c(),D(ce,{key:0,modelValue:w.month,"onUpdate:modelValue":[E[3]||(E[3]=A=>w.month=A),I],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:w.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:w.status,"onUpdate:modelValue":[E[4]||(E[4]=A=>w.status=A),I],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:w.payment_status,"onUpdate:modelValue":[E[5]||(E[5]=A=>w.payment_status=A),I],options:q,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:w.search,"onUpdate:modelValue":E[7]||(E[7]=A=>w.search=A),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},_2=Object.freeze(Object.defineProperty({__proto__:null,default:y2},Symbol.toStringTag,{value:"Module"})),k2={},w2={class:"row"},h2={class:"q-mb-md text-h6"};function $2(m,s){const d=Z("i-head"),o=Z("authenticated-layout");return c(),h(J,null,[e(d,{title:"Informasi Sistem"}),e(o,null,{title:l(()=>s[0]||(s[0]=[b("Informasi Sistem")])),default:l(()=>[t("div",w2,[e(fe,{class:"col q-ma-xs",square:"",flat:"",bordered:""},{default:l(()=>[e(ae,null,{default:l(()=>[t("div",h2,"Tentang "+r(m.$config.APP_NAME),1),b(" Versi : "+r(m.$config.APP_VERSION_STR),1),s[1]||(s[1]=t("br",null,null,-1)),s[2]||(s[2]=b(" Dikembangkan oleh Shiftech Indonesia")),s[3]||(s[3]=t("br",null,null,-1)),s[4]||(s[4]=b(" CV. Shift Karya Teknologi "))]),_:1})]),_:1})])]),_:1})],64)}const x2=wt(k2,[["render",$2]]),S2=Object.freeze(Object.defineProperty({__proto__:null,default:x2},Symbol.toStringTag,{value:"Module"})),an={__name:"CompanyInfoForm",setup(m){const s=T(),d=be(),o=Qe({name:d.props.data.name,headline:d.props.data.headline,phone:d.props.data.phone,address:d.props.data.address,logo_path:d.props.data.logo_path,logo_image:null}),i=T(null),n=T("");he(()=>{o.logo_path&&(n.value=`/${o.logo_path}`)});function g(){i.value.click()}function v(p){const y=p.target.files[0];y&&(o.logo_image=y,n.value=URL.createObjectURL(y))}function f(){o.logo_image=null,o.logo_path=null,n.value=null,i.value.value=null}const u=()=>rt({form:o,url:route("admin.company-profile.edit")});return(p,y)=>(c(),D(Je,{class:"row",onSubmit:G(u,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[y[8]||(y[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),y[9]||(y[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(ne,{ref_key:"nameInputRef",ref:s,modelValue:a(o).name,"onUpdate:modelValue":y[0]||(y[0]=_=>a(o).name=_),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[_=>_&&_.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ne,{modelValue:a(o).headline,"onUpdate:modelValue":y[1]||(y[1]=_=>a(o).headline=_),modelModifiers:{trim:!0},label:"Headline",disable:a(o).processing,maxlength:"200","lazy-rules":"",error:!!a(o).errors.headline,"error-message":a(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).phone,"onUpdate:modelValue":y[2]||(y[2]=_=>a(o).phone=_),modelModifiers:{trim:!0},label:"No Telepon",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.phone,"error-message":a(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(o).address,"onUpdate:modelValue":y[3]||(y[3]=_=>a(o).address=_),modelModifiers:{trim:!0},label:"Alamat",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[y[7]||(y[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(U,{label:"Browse Logo",size:"sm",onClick:g,color:"secondary",icon:"add_a_photo",disable:a(o).processing},null,8,["disable"]),e(U,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:a(o).processing||!n.value,color:"red",onClick:f},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*",style:{display:"none"},onChange:v},null,544),t("div",null,[e(sa,{src:n.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},He({error:l(()=>[y[4]||(y[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[n.value?void 0:{name:"default",fn:l(()=>[y[5]||(y[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),y[6]||(y[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(ae,null,{default:l(()=>[e(U,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},V2=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),q2={class:"q-pa-xs"},C2={class:"row justify-center"},T2={class:"col col-md-6"},Ol="Profil Perusahaan",P2={__name:"Edit",setup(m){return(s,d)=>{const o=Z("i-head"),i=Z("authenticated-layout");return c(),h(J,null,[e(o,{title:Ol}),e(i,null,{title:l(()=>[b(r(Ol))]),default:l(()=>[t("div",q2,[t("div",C2,[t("div",T2,[e(an)])])])]),_:1})],64)}}},R2=Object.freeze(Object.defineProperty({__proto__:null,default:P2},Symbol.toStringTag,{value:"Module"})),O2={class:"col-xs-12 col-md-8"},D2={class:"col-xs-12 col-sm-9"},I2={class:"col-xs-12 col-sm-3 text-right"},Dl="Pengaturan Database & Utilitas",U2={__name:"Index",setup(m){const s=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:" **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:" **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:" **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(d,o)=>{const i=Z("i-head"),n=Z("authenticated-layout");return c(),h(J,null,[e(i,{title:Dl}),e(n,null,{title:l(()=>[b(r(Dl))]),default:l(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:l(()=>[t("div",O2,[e(fe,{square:"",flat:"",bordered:"",class:"full-width"},{default:l(()=>[e(ae,null,{default:l(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Qt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:l(()=>[e(P,{name:"warning",color:"red"})]),default:l(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=b(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(Ae),e(ae,{class:"q-gutter-y-lg"},{default:l(()=>[(c(),h(J,null,Fe(s,g=>t("div",{key:g.name,class:"row items-center q-col-gutter-md"},[t("div",D2,[e(oe,{class:"q-pa-none"},{default:l(()=>[e(F,{avatar:"",class:"q-pr-md"},{default:l(()=>[e(P,{name:g.icon,color:g.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(F,{style:{"text-wrap":"initial"}},{default:l(()=>[e(we,{class:"text-subtitle1 text-bold"},{default:l(()=>[b(r(g.name),1)]),_:2},1024),e(we,{caption:"",class:"q-pb-sm"},{default:l(()=>[b(r(g.description),1)]),_:2},1024),e(we,{class:"text-caption text-negative text-bold"},{default:l(()=>[b(r(g.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",I2,[e(U,{icon:g.icon,label:g.name.split(" ")[0],color:g.color,disable:g.disable,onClick:g.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},E2=Object.freeze(Object.defineProperty({__proto__:null,default:U2},Symbol.toStringTag,{value:"Module"})),j2={class:"q-pa-xs"},A2={class:"row justify-center"},N2={class:"col col-md-6"},M2={__name:"Edit",setup(m){const s=be(),d=Qe({foot_note:s.props.data.foot_note,default_payment_mode:s.props.data.default_payment_mode,default_print_size:s.props.data.default_print_size,after_payment_action:s.props.data.after_payment_action}),o=()=>rt({form:d,url:route("admin.pos-settings.edit")}),i=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],n=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],g=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(v,f)=>{const u=Z("i-head"),p=Z("authenticated-layout");return c(),h(J,null,[e(u,{title:"Pengaturan POS"}),e(p,null,{title:l(()=>f[4]||(f[4]=[b("Pengaturan POS")])),default:l(()=>[t("div",j2,[t("div",A2,[t("div",N2,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[f[5]||(f[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),f[6]||(f[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(ce,{modelValue:a(d).default_payment_mode,"onUpdate:modelValue":f[0]||(f[0]=y=>a(d).default_payment_mode=y),label:"Default Pembayaran",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.default_payment_mode,"error-message":a(d).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(d).default_print_size,"onUpdate:modelValue":f[1]||(f[1]=y=>a(d).default_print_size=y),label:"Default Ukuran Cetak",options:n,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.default_print_size,"error-message":a(d).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(d).after_payment_action,"onUpdate:modelValue":f[2]||(f[2]=y=>a(d).after_payment_action=y),label:"Aksi Setelah Pembayaran",options:g,"map-options":"","emit-value":"","lazy-rules":"",disable:a(d).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(d).errors.after_payment_action,"error-message":a(d).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(d).foot_note,"onUpdate:modelValue":f[3]||(f[3]=y=>a(d).foot_note=y),modelModifiers:{trim:!0},label:"Foot Note",disable:a(d).processing,"lazy-rules":"",error:!!a(d).errors.foot_note,"error-message":a(d).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,null,{default:l(()=>[e(U,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(d).processing,loading:a(d).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},B2=Object.freeze(Object.defineProperty({__proto__:null,default:M2},Symbol.toStringTag,{value:"Module"})),z2={class:"q-gutter-sm"},F2={class:"q-gutter-sm"},L2={class:"col col-md-6 q-pa-xs"},K2={class:"row"},H2={class:"detail-item"},Y2={class:"detail-value"},W2={class:"detail-item"},Q2={class:"detail-value"},J2={class:"detail-item"},G2={class:"detail-value"},X2={class:"detail-item"},Z2={class:"detail-value"},eh={class:"detail-item"},th={class:"detail-value"},ah={class:"detail-item"},lh={class:"detail-value"},oh={class:"detail-item"},nh={class:"detail-value"},sh={class:"detail-item"},rh={class:"detail-value user-agent-value"},ih={class:"q-pt-md"},dh={class:"table-wrapper-scroll"},uh={key:0,class:"table-metadata"},mh={key:0},ch={colspan:"100%"},ph={class:"text-mono json-pre-scroll"},fh={key:1},gh={class:"metadata-label",style:{width:"100px"}},bh={class:"metadata-value"},vh={key:0,class:"text-mono json-pre-scroll"},yh={key:2},_h={colspan:"3"},kh={class:"table-metadata"},wh={class:"metadata-label"},hh={class:"metadata-value"},$h={class:"metadata-value"},xh={key:1,class:"text-grey-8 text-italic q-pa-sm"},Il="Rincian Log Aktifitas",Sh={__name:"Detail",setup(m){const s=be(),d=()=>st({message:`Hapus log aktifitas #${s.props.data.id}?`,url:route("admin.user-activity-log.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.user-activity-log.index"))}});return(o,i)=>{const n=Z("i-head"),g=Z("i-link"),v=Z("authenticated-layout");return c(),h(J,null,[e(n,{title:Il}),e(v,{"show-drawer-button":!0},{title:l(()=>[b(r(Il))]),"left-button":l(()=>[t("div",z2,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=f=>o.$goBack())})])]),"right-button":l(()=>[t("div",F2,[e(U,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=f=>d())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",L2,[t("div",K2,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"detail-group"},{default:l(()=>[i[20]||(i[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",H2,[i[2]||(i[2]=t("div",{class:"detail-label"},"ID",-1)),i[3]||(i[3]=t("div",{class:"detail-separator"},":",-1)),t("div",Y2,r(a(s).props.data.id),1)]),t("div",W2,[i[4]||(i[4]=t("div",{class:"detail-label"},"Waktu",-1)),i[5]||(i[5]=t("div",{class:"detail-separator"},":",-1)),t("div",Q2,r(a(ge)(a(s).props.data.logged_at)),1)]),t("div",J2,[i[6]||(i[6]=t("div",{class:"detail-label"},"Pengguna",-1)),i[7]||(i[7]=t("div",{class:"detail-separator"},":",-1)),t("div",G2,[e(g,{href:o.route("admin.user.detail",{id:a(s).props.data.user_id})},{default:l(()=>[b(r(a(s).props.data.username),1)]),_:1},8,["href"])])]),t("div",X2,[i[8]||(i[8]=t("div",{class:"detail-label"},"Kategori",-1)),i[9]||(i[9]=t("div",{class:"detail-separator"},":",-1)),t("div",Z2,r(a(s).props.data.activity_category_label),1)]),t("div",eh,[i[10]||(i[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),i[11]||(i[11]=t("div",{class:"detail-separator"},":",-1)),t("div",th,r(a(s).props.data.activity_name_label),1)]),t("div",ah,[i[12]||(i[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),i[13]||(i[13]=t("div",{class:"detail-separator"},":",-1)),t("div",lh,r(a(s).props.data.description),1)]),t("div",oh,[i[14]||(i[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),i[15]||(i[15]=t("div",{class:"detail-separator"},":",-1)),t("div",nh,r(a(s).props.data.ip_address),1)]),t("div",sh,[i[16]||(i[16]=t("div",{class:"detail-label"},"User Agent",-1)),i[17]||(i[17]=t("div",{class:"detail-separator"},":",-1)),t("div",rh,r(a(s).props.data.user_agent),1)]),t("div",ih,[i[19]||(i[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",dh,[Object.keys(a(s).props.data.metadata).length>0?(c(),h("table",uh,[t("tbody",null,[(c(!0),h(J,null,Fe(a(s).props.formatted_metadata,(f,u)=>(c(),h(J,{key:u},[f.type==="plain"?(c(),h("tr",mh,[t("td",ch,[t("pre",ph,r(f.value),1)])])):k("",!0),f.type==="simple"?(c(),h("tr",fh,[t("td",gh,r(f.label),1),t("td",bh,[f.label=="Data Mentah (JSON)"?(c(),h("pre",vh,r(f.value),1)):(c(),h(J,{key:1},[b(r(f.value),1)],64))])])):k("",!0),f.type==="comparison"?(c(),h("tr",yh,[t("td",_h,[t("table",kh,[i[18]||(i[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(c(!0),h(J,null,Fe(f.value,(p,y)=>(c(),h("tr",{class:Ce(p.new_value!==p.old_value?"value-changed":"")},[t("td",wh,r(p.field),1),t("td",hh,r(p.old_value),1),t("td",$h,r(p.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(c(),h("div",xh," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Vh=wt(Sh,[["__scopeId","data-v-37e21f0d"]]),qh=Object.freeze(Object.defineProperty({__proto__:null,default:Vh},Symbol.toStringTag,{value:"Module"})),Ch={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Th={class:"q-pa-xs"},Ph={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Rh={key:0},Oh={class:"flex justify-end"},Ul="Log Aktifitas Pengguna",Dh={__name:"Index",setup(m){const s=be(),d=xe(),o=T(!1),i=T([]),n=T(!0),g=T(null),v=T(null),f=et(v),{protectClick:u}=Ut(),p=Re({user_id:"all",activity_category:"all",activity_name:"all",search:"",...Me()}),y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),_=[{value:"all",label:"Semua"},...s.props.users.map(E=>({value:E.id,label:E.username+" - "+E.name}))],q=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_categories).map(([E,N])=>({value:E,label:N}))],x=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_names).map(([E,N])=>({value:E,label:N}))],w=T(q),M=T(x),Y=(E,N)=>{if(E===""){N(()=>{w.value=q});return}N(()=>{const S=E.toLowerCase();w.value=q.filter(A=>A.label.toLowerCase().indexOf(S)>-1)})},C=(E,N)=>{if(E===""){N(()=>{M.value=x});return}N(()=>{const S=E.toLowerCase();M.value=x.filter(A=>A.label.toLowerCase().indexOf(S)>-1)})},B=[{name:"id",label:d.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{z()});const O=E=>st({message:`Hapus log #${E.id}?`,url:route("admin.user-activity-log.delete",E.id),fetchItemsCallback:z,loading:n}),z=(E=null)=>{Be({pagination:y,filter:p,props:E,rows:i,url:route("admin.user-activity-log.data"),loading:n,tableRef:g})},j=()=>z(),I=u(E=>ee.get(route("admin.user-activity-log.detail",{id:E.id}))),R=X(()=>d.screen.gt.sm?B:B.filter(E=>E.name==="id"||E.name==="action")),$=()=>{$t.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{pt("Seluruh log telah dibersihkan."),z()}).catch(E=>{var S,A;const N=((A=(S=E.response)==null?void 0:S.data)==null?void 0:A.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";ct(N,"bottom"),console.error(E)})})};return(E,N)=>{const S=Z("i-head"),A=Z("i-link"),le=Z("authenticated-layout");return c(),h(J,null,[e(S,{title:Ul}),e(le,null,He({title:l(()=>[b(r(Ul))]),"right-button":l(()=>[e(U,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:N[0]||(N[0]=re=>o.value=!o.value)},null,8,["icon"]),E.$can("admin.user-activity-log.clear")?(c(),D(U,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:$})):k("",!0)]),default:l(()=>[t("div",Th,[e(Ie,{class:"full-height-table",ref_key:"tableRef",ref:g,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":N[7]||(N[7]=re=>y.value=re),filter:p.search,loading:n.value,columns:R.value,rows:i.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(f)}),onRequest:z,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:re,message:me,filter:Oe})=>[t("div",Ph,[t("span",null,r(me)+" "+r(Oe?" with term "+Oe:""),1)])]),body:l(re=>[e(Pe,{props:re,class:"cursor-pointer",onClick:G(me=>a(I)(re.row,me),["stop"])},{default:l(()=>[e(W,{key:"id",props:re},{default:l(()=>[t("div",null,[a(d).screen.lt.md?(c(),h(J,{key:0},[e(P,{name:"tag",class:"inline-icon"}),N[8]||(N[8]=b(" ID Aktifitas: "))],64)):k("",!0),b(" "+r(re.row.id),1)]),a(d).screen.lt.md?(c(),h("div",Rh,[t("div",null,[e(P,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(a(ge)(re.row.logged_at)),1)]),t("div",null,[e(P,{name:"person",class:"inline-icon"}),e(A,{onClick:N[5]||(N[5]=G(()=>{},["stop"])),href:E.route("admin.user.detail",{id:re.row.user_id})},{default:l(()=>[b(r(re.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(P,{name:"category",class:"inline-icon"}),b(" "+r(re.row.activity_category_label)+" > "+r(re.row.activity_name_label),1)]),t("div",null,[e(P,{name:"notes",class:"inline-icon"}),b(" "+r(re.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"logged_at",props:re},{default:l(()=>[b(r(a(ge)(re.row.logged_at)),1)]),_:2},1032,["props"]),e(W,{key:"username",props:re},{default:l(()=>[e(A,{onClick:N[6]||(N[6]=G(()=>{},["stop"])),href:E.route("admin.user.detail",{id:re.row.user_id})},{default:l(()=>[b(r(re.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(W,{key:"activity_category",props:re},{default:l(()=>[b(r(re.row.activity_category_label),1)]),_:2},1032,["props"]),e(W,{key:"activity_name",props:re},{default:l(()=>[b(r(re.row.activity_name_label),1)]),_:2},1032,["props"]),e(W,{key:"description",props:re,class:"wrap-column"},{default:l(()=>[b(r(re.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:re},{default:l(()=>[t("div",Oh,[E.$can("admin.user-role.delete")?(c(),D(U,{key:0,onClick:G(me=>O(re.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:l(()=>[t("div",Ch,[e(ce,{modelValue:p.user_id,"onUpdate:modelValue":[N[1]||(N[1]=re=>p.user_id=re),j],class:"custom-select col-xs-12 col-sm-2",options:_,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:p.activity_category,"onUpdate:modelValue":[N[2]||(N[2]=re=>p.activity_category=re),j],class:"custom-select col-xs-12 col-sm-2",options:w.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:Y,clearable:""},null,8,["modelValue","options"]),e(ce,{modelValue:p.activity_name,"onUpdate:modelValue":[N[3]||(N[3]=re=>p.activity_name=re),j],class:"custom-select col-xs-12 col-sm-2",options:M.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:C},null,8,["modelValue","options"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":N[4]||(N[4]=re=>p.search=re),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ih=Object.freeze(Object.defineProperty({__proto__:null,default:Dh},Symbol.toStringTag,{value:"Module"})),ln={__name:"UpdatePasswordForm",setup(m){const s=T(!1),d=T(null),o=T(null),i=Qe({current_password:"",password:"",password_confirmation:""}),n=()=>{i.clearErrors(),i.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>i.reset(),onError:()=>{i.errors.password&&(i.reset("password","password_confirmation"),d.value.focus()),i.errors.current_password&&(i.reset("current_password"),o.value.focus())}})};return(g,v)=>(c(),D(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[v[6]||(v[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),v[7]||(v[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(ne,{modelValue:a(i).current_password,"onUpdate:modelValue":v[1]||(v[1]=f=>a(i).current_password=f),type:s.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.current_password,"error-message":a(i).errors.current_password,rules:[f=>f&&f.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(U,{dense:"",flat:"",round:"",onClick:v[0]||(v[0]=f=>s.value=!s.value)},{default:l(()=>[e(P,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(ne,{modelValue:a(i).password,"onUpdate:modelValue":v[3]||(v[3]=f=>a(i).password=f),type:s.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.password,"error-message":a(i).errors.password,rules:[f=>f&&f.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(U,{dense:"",flat:"",round:"",onClick:v[2]||(v[2]=f=>s.value=!s.value)},{default:l(()=>[e(P,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(ne,{modelValue:a(i).password_confirmation,"onUpdate:modelValue":v[5]||(v[5]=f=>a(i).password_confirmation=f),type:s.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.password_confirmation,"error-message":a(i).errors.password_confirmation,rules:[f=>f&&f.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(U,{dense:"",flat:"",round:"",onClick:v[4]||(v[4]=f=>s.value=!s.value)},{default:l(()=>[e(P,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(ae,null,{default:l(()=>[e(U,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Uh=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),on={__name:"UpdateProfileInformationForm",setup(m){const d=be().props.auth.user,o=Qe({name:d.name,username:d.username,type:window.CONSTANTS.USER_TYPES[d.type]}),i=()=>rt({form:o,url:route("admin.user-profile.update")});return(n,g)=>(c(),D(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[g[3]||(g[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),g[4]||(g[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(ne,{modelValue:a(o).username,"onUpdate:modelValue":g[0]||(g[0]=v=>a(o).username=v),label:"ID Pengguna",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(ne,{modelValue:a(o).name,"onUpdate:modelValue":g[1]||(g[1]=v=>a(o).name=v),modelModifiers:{trim:!0},label:"Nama",disable:a(o).processing,error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[v=>v&&v.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ne,{modelValue:a(o).type,"onUpdate:modelValue":g[2]||(g[2]=v=>a(o).type=v),label:"Jenis Akun",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(ae,null,{default:l(()=>[e(U,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Eh=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"})),jh={class:"q-pa-xs"},Ah={class:"row justify-center"},Nh={class:"col col-md-6"},El="Pengaturan Pribadi",Mh={__name:"Edit",setup(m){return(s,d)=>{const o=Z("i-head"),i=Z("authenticated-layout");return c(),h(J,null,[e(o,{title:El}),e(i,null,{title:l(()=>[b(r(El))]),default:l(()=>[t("div",jh,[t("div",Ah,[t("div",Nh,[e(on,{class:"q-mb-md"}),e(ln)])])])]),_:1})],64)}}},Bh=Object.freeze(Object.defineProperty({__proto__:null,default:Mh},Symbol.toStringTag,{value:"Module"})),zh={class:"q-gutter-sm"},Fh={class:"q-gutter-sm"},Lh={class:"col col-md-6 q-pa-xs"},Kh={class:"row"},Hh={class:"detail"},Yh={key:0},Wh={key:1,class:"text-grey-8 text-italic"},Qh={key:2},Jh={class:"text-subtitle2 text-bold text-grey-8 q-mt-xs"},Gh={key:3,class:"text-grey-8 text-italic"},jl="Rincian Role Pengguna",Xh={__name:"Detail",setup(m){const s=be(),d=X(()=>{const o={};return s.props.data.permissions&&s.props.data.permissions.forEach(i=>{const n=i.category;o[n]||(o[n]=[]),o[n].push(i)}),o});return(o,i)=>{const n=Z("i-head"),g=Z("i-link"),v=Z("authenticated-layout");return c(),h(J,null,[e(n,{title:jl}),e(v,{"show-drawer-button":!0},{title:l(()=>[b(r(jl))]),"left-button":l(()=>[t("div",zh,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=f=>o.$goBack())})])]),"right-button":l(()=>[t("div",Fh,[o.$can("admin.user-role.edit")?(c(),D(U,{key:0,icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=f=>a(ee).get(o.route("admin.user-role.edit",{id:a(s).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Lh,[t("div",Kh,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>[i[7]||(i[7]=t("div",{class:"text-subtitle1 text-bold text-grey-8"},"Info Role",-1)),t("table",Hh,[t("tbody",null,[t("tr",null,[i[2]||(i[2]=t("td",{style:{width:"100px"}},"Nama Role",-1)),i[3]||(i[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[i[4]||(i[4]=t("td",null,"Deskripsi",-1)),i[5]||(i[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.description),1)])])]),i[8]||(i[8]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Pengguna ",-1)),a(s).props.data.users.length>0?(c(),h("div",Yh,[(c(!0),h(J,null,Fe(a(s).props.data.users,f=>(c(),h("div",null,[i[6]||(i[6]=b("  ")),e(g,{href:o.route("admin.user.detail",{id:f.id})},{default:l(()=>[b(r(f.username)+" - "+r(f.name),1)]),_:2},1032,["href"])]))),256))])):(c(),h("div",Wh," Belum ada akun pengguna yang terdaftar. ")),i[9]||(i[9]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Hak Akses ",-1)),a(s).props.data.permissions.length>0?(c(),h("div",Qh,[(c(!0),h(J,null,Fe(d.value,(f,u)=>(c(),h("div",{key:u},[t("div",Jh,r(u),1),(c(!0),h(J,null,Fe(f,p=>(c(),h("div",{key:p.id},"  "+r(p.label),1))),128))]))),128))])):(c(),h("div",Gh," Belum ada hak akses yang ditetapkan. "))]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Zh=Object.freeze(Object.defineProperty({__proto__:null,default:Xh},Symbol.toStringTag,{value:"Module"})),e$={class:"q-gutter-sm"},t$={class:"col col-md-6 q-pa-xs"},a$={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},l$={__name:"Editor",setup(m){const s=be(),d=(s.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description,permissions:s.props.data.permissions?s.props.data.permissions.map(g=>g.id):[]}),i=()=>rt({form:o,url:route("admin.user-role.save")}),n=X(()=>{const g={};return s.props.permissions&&s.props.permissions.forEach(v=>{const f=v.category;g[f]||(g[f]=[]),g[f].push(v)}),g});return(g,v)=>{const f=Z("i-head"),u=Z("authenticated-layout");return c(),h(J,null,[e(f,{title:d}),e(u,{"show-drawer-button":!0},{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",e$,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=p=>g.$goBack())})])]),"right-button":l(()=>[e(U,{icon:"save",label:"Simpan",color:"primary",disable:a(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:G(i,["prevent"])},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",t$,[e(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=p=>a(o).id=p)},null,512),[[_t,a(o).id]]),e(ne,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":v[2]||(v[2]=p=>a(o).name=p),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[p=>p&&p.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).description,"onUpdate:modelValue":v[3]||(v[3]=p=>a(o).description=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(c(!0),h(J,null,Fe(n.value,(p,y)=>(c(),h("div",{key:y},[t("div",a$,r(y),1),(c(!0),h(J,null,Fe(p,_=>(c(),h("div",{key:_.id},[e(na,{class:"q-ma-none q-pa-none list-checkbox",modelValue:a(o).permissions,"onUpdate:modelValue":q=>a(o).permissions=q,val:_.id,label:_.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},o$=wt(l$,[["__scopeId","data-v-2c2a059c"]]),n$=Object.freeze(Object.defineProperty({__proto__:null,default:o$},Symbol.toStringTag,{value:"Module"})),s$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},r$={class:"q-pa-xs"},i$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},d$={class:"flex justify-end"},Al="Role Pengguna",u$={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Re({search:"",...Me()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"name",label:"Nama Role",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{_()});const y=Y=>st({message:`Hapus role ${Y.name}?`,url:route("admin.user-role.delete",Y.id),fetchItemsCallback:_,loading:i}),_=(Y=null)=>{Be({pagination:u,filter:f,props:Y,rows:o,url:route("admin.user-role.data"),loading:i,tableRef:n})},q=Y=>ee.get(route("admin.user-role.detail",{id:Y.id})),{protectClick:x}=Ut(),w=x(q),M=X(()=>s.screen.gt.sm?p:p.filter(Y=>Y.name==="name"||Y.name==="action"));return(Y,C)=>{const B=Z("i-head"),O=Z("authenticated-layout");return c(),h(J,null,[e(B,{title:Al}),e(O,null,He({title:l(()=>[b(r(Al))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:C[0]||(C[0]=z=>d.value=!d.value)},null,8,["icon"]),Y.$can("admin.user-role.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:C[1]||(C[1]=z=>a(ee).get(Y.route("admin.user-role.add")))})):k("",!0)]),default:l(()=>[t("div",r$,[e(Ie,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":C[4]||(C[4]=z=>u.value=z),filter:f.search,loading:i.value,columns:M.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(v)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:z,message:j,filter:V})=>[t("div",i$,[t("span",null,r(j)+" "+r(V?" with term "+V:""),1)])]),body:l(z=>[e(Pe,{props:z,class:"cursor-pointer",onClick:G(j=>a(w)(z.row,j),["stop"])},{default:l(()=>[e(W,{key:"name",props:z,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.lt.md?(c(),D(P,{key:0,name:"person"})):k("",!0),b(" "+r(z.row.name),1)])]),_:2},1032,["props"]),e(W,{key:"description",props:z,class:"wrap-column"},{default:l(()=>[b(r(z.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:z},{default:l(()=>[t("div",d$,[Y.$can("admin.user-role.add")||Y.$can("admin.user-role.edit")||Y.$can("admin.user-role.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:C[3]||(C[3]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[Y.$can("admin.user-role.add")?te((c(),D(oe,{key:0,clickable:"",onClick:G(j=>a(ee).get(Y.route("admin.user-role.duplicate",z.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>C[5]||(C[5]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),Y.$can("admin.user-role.edit")?te((c(),D(oe,{key:1,clickable:"",onClick:G(j=>a(ee).get(Y.route("admin.user-role.edit",z.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>C[6]||(C[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),Y.$can("admin.user-role.delete")?te((c(),D(oe,{key:2,onClick:G(j=>y(z.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>C[7]||(C[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",s$,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":C[2]||(C[2]=z=>f.search=z),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},m$=Object.freeze(Object.defineProperty({__proto__:null,default:u$},Symbol.toStringTag,{value:"Module"})),c$={class:"q-gutter-sm"},p$={class:"q-gutter-sm"},f$={class:"row justify-center"},g$={class:"col col-md-6 q-pa-xs"},b$={class:"row"},v$={class:"detail"},y$={key:0},_$={key:0},k$={key:1},w$={key:2},Nl="Rincian Pengguna",h$={__name:"Detail",setup(m){const s=be();return(d,o)=>{const i=Z("i-head"),n=Z("i-link"),g=Z("authenticated-layout");return c(),h(J,null,[e(i,{title:Nl}),e(g,{"show-drawer-button":!0},{title:l(()=>[b(r(Nl))]),"left-button":l(()=>[t("div",c$,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>d.$inertia.get(d.route("admin.user.index")))})])]),"right-button":l(()=>[t("div",p$,[d.$can("admin.user.edit")&&a(s).props.data.id!=a(s).props.auth.user.id?(c(),D(U,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:o[1]||(o[1]=v=>d.$inertia.get(d.route("admin.user.edit",{id:a(s).props.data.id})))})):k("",!0)])]),default:l(()=>[t("div",f$,[t("div",g$,[t("div",b$,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>{var v,f;return[o[21]||(o[21]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),t("table",v$,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"125px"}},"ID Pengguna",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.username),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Nama Pengguna",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Jenis Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(d.$CONSTANTS.USER_TYPES[a(s).props.data.type]),1)]),a(s).props.data.roles.length>0?(c(),h("tr",y$,[o[8]||(o[8]=t("td",null,"Peran Pengguna",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,[(c(!0),h(J,null,Fe(a(s).props.data.roles,(u,p)=>(c(),h("div",{key:u.id,class:"inline"},[e(n,{href:d.route("admin.user-role.detail",{id:u.id})},{default:l(()=>[b(r(u.name),1)]),_:2},1032,["href"]),p<a(s).props.data.roles.length-1?(c(),h("span",_$,", ")):k("",!0)]))),128))])])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Status",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Dibuat",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.created_at))+" oleh "+r(((v=a(s).props.data.creator)==null?void 0:v.name)??"Sistem")+" ("+r(((f=a(s).props.data.creator)==null?void 0:f.username)??"system")+") ",1)]),a(s).props.data.updated_at?(c(),h("tr",k$,[o[14]||(o[14]=t("td",null,"Diperbarui",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,[b(r(a(ge)(a(s).props.data.updated_at))+" ",1),a(s).props.data.updater?(c(),h(J,{key:0},[b(" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(s).props.data.updater.username)+") ",1)],64)):k("",!0)])])):k("",!0),t("tr",null,[o[16]||(o[16]=t("td",null,"Terakhir login",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.last_login_datetime?d.$dayjs(a(s).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),a(s).props.data.last_activity_datetime?(c(),h("tr",w$,[o[19]||(o[19]=t("td",null,"Aktifitas Terakhir",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,[b(r(d.$dayjs(a(s).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),o[18]||(o[18]=t("br",null,null,-1)),b(r(a(s).props.data.last_activity_description),1)])])):k("",!0)])])]}),_:1})]),_:1})])])])]),_:1})],64)}}},$$=Object.freeze(Object.defineProperty({__proto__:null,default:h$},Symbol.toStringTag,{value:"Module"}));function x$(m){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(m)}const S$={class:"q-gutter-sm"},V$={class:"row justify-center"},q$={class:"col col-md-6 q-pa-xs"},C$={__name:"Editor",setup(m){const s=tt(window.CONSTANTS.USER_TYPES),d=be(),o=d.props.roles,i=d.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=T(!d.props.data.id),g=d.props.data.roles,v=Array.isArray(g)?g.map(p=>p.id):[],f=Qe({id:d.props.data.id,name:d.props.data.name,username:d.props.data.username,password:d.props.data.id?null:"12345",type:d.props.data.type?d.props.data.type:s[0].value,active:!!d.props.data.active,roles:v}),u=()=>rt({form:f,url:route("admin.user.save")});return(p,y)=>{const _=Z("i-head"),q=Z("authenticated-layout");return c(),h(J,null,[e(_,{title:a(i)},null,8,["title"]),e(q,{"show-drawer-button":!0},{title:l(()=>[b(r(a(i)),1)]),"left-button":l(()=>[t("div",S$,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=x=>p.$goBack())})])]),default:l(()=>[t("div",V$,[t("div",q$,[e(Je,{class:"row",onSubmit:G(u,["prevent"])},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[1]||(y[1]=x=>a(f).id=x)},null,512),[[_t,a(f).id]]),e(ne,{autofocus:"",modelValue:a(f).username,"onUpdate:modelValue":y[2]||(y[2]=x=>a(f).username=x),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:a(f).processing,error:!!a(f).errors.username,"error-message":a(f).errors.username,rules:[x=>x&&x.length>0||"Username harus diisi.",x=>a(x$)(x)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ne,{modelValue:a(f).name,"onUpdate:modelValue":y[3]||(y[3]=x=>a(f).name=x),modelModifiers:{trim:!0},label:"Nama",error:!!a(f).errors.name,disable:a(f).processing,"error-message":a(f).errors.name,rules:[x=>x&&x.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(f).password,"onUpdate:modelValue":y[5]||(y[5]=x=>a(f).password=x),label:"Kata Sandi","lazy-rules":"",disable:a(f).processing,error:!!a(f).errors.password,"error-message":a(f).errors.password,"hide-bottom-space":"",type:n.value?"text":"password"},{append:l(()=>[e(U,{dense:"",flat:"",round:"",onClick:y[4]||(y[4]=x=>n.value=!n.value)},{default:l(()=>[e(P,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","disable","error","error-message","type"]),e(ce,{modelValue:a(f).type,"onUpdate:modelValue":y[6]||(y[6]=x=>a(f).type=x),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"","lazy-rules":"",disable:a(f).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(f).errors.type,"error-message":a(f).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),a(f).type=="standard_user"?(c(),D(ce,{key:0,modelValue:a(f).roles,"onUpdate:modelValue":y[7]||(y[7]=x=>a(f).roles=x),label:"Peran",options:a(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:a(f).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(f).errors.roles||!!a(f).errors["roles.0"],"error-message":a(f).errors.roles||a(f).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(va,{modelValue:a(f).active,"onUpdate:modelValue":y[8]||(y[8]=x=>a(f).active=x),disable:a(f).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(f).processing,onClick:u},null,8,["disable"]),e(U,{icon:"cancel",label:"Batal",class:"text-black",disable:a(f).processing,onClick:y[9]||(y[9]=x=>p.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},T$=Object.freeze(Object.defineProperty({__proto__:null,default:C$},Symbol.toStringTag,{value:"Module"})),P$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},R$={class:"q-pa-xs"},O$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},D$={class:"elipsis",style:{"max-width":"200px"}},I$={class:"flex justify-end"},Ml="Pengguna",U$={__name:"Index",setup(m){const s=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.USER_TYPES)],d=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=be(),i=xe(),n=o.props.auth.user,g=T([]),v=T(!0),f=T(!1),u=Re({type:"all",roles:[],status:"active",search:""}),p=o.props.roles.map(V=>({value:V.id,label:V.name})),y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),_=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];he(()=>{x()});const q=()=>x(),x=(V=null)=>Be({pagination:y,props:V,rows:g,loading:v,filter:u,url:route("admin.user.data"),tableRef:O}),w=V=>st({url:route("admin.user.delete",V.id),message:`Hapus pengguna ${V.username}?`,fetchItemsCallback:x,loading:v}),M=X(()=>i.screen.gt.sm?_:_.filter(V=>V.name==="username"||V.name==="action")),Y=V=>ee.get(route("admin.user.detail",V.id)),{protectClick:C}=Ut(),B=C(Y),O=T(null),z=T(null),j=et(z);return(V,I)=>{const R=Z("i-head"),$=Z("authenticated-layout");return c(),h(J,null,[e(R,{title:Ml}),e($,null,He({title:l(()=>[b(r(Ml))]),"right-button":l(()=>[e(U,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=E=>f.value=!f.value)},null,8,["icon"]),V.$can("admin.user.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:I[1]||(I[1]=E=>a(ee).get(V.route("admin.user.add")))})):k("",!0)]),default:l(()=>[t("div",R$,[e(Ie,{ref_key:"tableRef",ref:O,class:"full-height-table",style:Ye({height:a(j)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":I[7]||(I[7]=E=>y.value=E),filter:u.search,loading:v.value,columns:M.value,rows:g.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:E,message:N,term:S})=>[t("div",O$,[t("span",null,r(N)+" "+r(S?" with term "+S:""),1)])]),body:l(E=>[e(Pe,{props:E,class:Ce([E.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(N=>a(B)(E.row,N),["stop"])},{default:l(()=>[e(W,{key:"username",props:E},{default:l(()=>[t("div",null,[a(i).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[e(P,{name:"person",class:"inline-icon"}),I[8]||(I[8]=b(" Username: "))],64)),b(" "+r(E.row.username),1)]),a(i).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[t("div",null,[e(P,{name:"person",class:"inline-icon"}),b(" Nama: "+r(E.row.name),1)]),t("div",D$,[e(P,{name:"group",class:"inline-icon"}),I[9]||(I[9]=b(" Jenis Akun: ")),t("span",null,r(V.$CONSTANTS.USER_TYPES[E.row.type]),1)]),t("div",null,[e(P,{name:"group",class:"inline-icon"}),b(" Peran: "+r(E.row.roles.map(N=>N.name).join(",")),1)])],64))]),_:2},1032,["props"]),e(W,{key:"name",props:E},{default:l(()=>[b(r(E.row.name),1)]),_:2},1032,["props"]),e(W,{key:"role",props:E,align:"center"},{default:l(()=>[t("span",null,r(V.$CONSTANTS.USER_TYPES[E.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"action",props:E},{default:l(()=>[t("div",I$,[V.$can("admin.user.add")||V.$can("admin.user.edit")||V.$can("admin.user.delete")?(c(),D(U,{key:0,disable:E.row.id==a(n).id||E.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[6]||(I[6]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[V.$can("admin.user.add")?te((c(),D(oe,{key:0,clickable:"",onClick:G(N=>a(ee).get(V.route("admin.user.duplicate",E.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>I[10]||(I[10]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),V.$can("admin.user.edit")?te((c(),D(oe,{key:1,clickable:"",onClick:G(N=>a(ee).get(V.route("admin.user.edit",E.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>I[11]||(I[11]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),V.$can("admin.user.delete")?te((c(),D(oe,{key:2,onClick:G(N=>w(E.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>I[12]||(I[12]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[f.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:z},{default:l(()=>[t("div",P$,[e(ce,{modelValue:u.type,"onUpdate:modelValue":[I[2]||(I[2]=E=>u.type=E),q],class:"custom-select col-xs-12 col-sm-2",options:s,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:u.status,"onUpdate:modelValue":[I[3]||(I[3]=E=>u.status=E),q],class:"custom-select col-xs-12 col-sm-2",options:d,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:u.roles,"onUpdate:modelValue":[I[4]||(I[4]=E=>u.roles=E),q],class:"custom-select col-xs-12 col-sm-2",options:a(p),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":I[5]||(I[5]=E=>u.search=E),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},E$=Object.freeze(Object.defineProperty({__proto__:null,default:U$},Symbol.toStringTag,{value:"Module"})),j$={class:"q-gutter-sm"},A$={class:"col col-lg-6 q-pa-xs"},N$={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},M$={class:"row q-col-gutter-sm q-mb-md"},B$={key:0},z$={class:"text-bold"},F$={key:0},L$={class:"text-caption text-grey-8"},K$={key:1},Bl="Buat Penyesuaian Stok",H$={__name:"Create",setup(m){const s=be(),d=T(!1),o=s.props.products,{filteredCategories:i,filterCategories:n}=Ua(s.props.categories),{filteredSuppliers:g,filterSupplierFn:v}=Ea(s.props.suppliers),f=T({search:null,category_id:null,supplier_id:null}),u=T([]),p=Qe({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),y=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(Y,C)=>K(Y)+" "+C.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],_=tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),q=X(()=>o.filter(Y=>{let C=!0;if(d.value&&!u.value.find(B=>B.id===Y.id))return!1;if(f.value.search){const B=f.value.search.toLowerCase();C=Y.name.toLowerCase().includes(B)||Y.description.toLowerCase().includes(B)||Y.barcode&&Y.barcode.toLowerCase().includes(B)}return C&&f.value.category_id&&(C=Y.category_id===f.value.category_id),C&&f.value.supplier_id&&(C=Y.supplier_id===f.value.supplier_id),C})),x=()=>{$t.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{p.product_ids=u.value.map(Y=>Y.id),ra(p,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:p,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},w=xe(),M=X(()=>w.screen.gt.sm?y:y.filter(Y=>Y.name==="name"));return(Y,C)=>{const B=Z("i-head"),O=Z("authenticated-layout");return c(),h(J,null,[e(B,{title:Bl}),e(O,{"show-drawer-button":!0},{title:l(()=>[b(r(Bl))]),"left-button":l(()=>[t("div",j$,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:C[0]||(C[0]=z=>a(ee).get(Y.route("admin.stock-adjustment.index")))})])]),"right-button":l(()=>[e(U,{icon:"cancel",disable:a(p).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:C[1]||(C[1]=z=>a(ee).get(Y.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(U,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:a(p).processing||u.value.length==0,class:"q-ml-sm",onClick:x},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",A$,[e(Je,{class:"row",onSubmit:G(x,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-sm"},{default:l(()=>{var z,j,V;return[C[10]||(C[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Ft,{modelValue:a(p).datetime,"onUpdate:modelValue":C[2]||(C[2]=I=>a(p).datetime=I),label:"Waktu",error:!!a(p).errors.datetime,disable:a(p).processing,"error-message":a(p).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:a(p).type,"onUpdate:modelValue":C[3]||(C[3]=I=>a(p).type=I),options:a(_),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(p).errors.type,disable:a(p).processing,"map-options":"","emit-value":"","error-message":a(p).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(ne,{modelValue:a(p).notes,"onUpdate:modelValue":C[4]||(C[4]=I=>a(p).notes=I),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(p).processing,error:!!a(p).errors.notes,"error-message":a(p).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),u.value.length===0||(z=a(s).props.errors)!=null&&z.product_ids?(c(),h("div",N$,[u.value.length===0?(c(),h(J,{key:0},[b(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(j=a(s).props.errors)!=null&&j.product_ids?(c(),h(J,{key:1},[b(r((V=a(s).props.errors)==null?void 0:V.product_ids),1)],64)):k("",!0)])):k("",!0),C[11]||(C[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",M$,[e(ne,{modelValue:f.value.search,"onUpdate:modelValue":C[5]||(C[5]=I=>f.value.search=I),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(ce,{modelValue:f.value.category_id,"onUpdate:modelValue":C[6]||(C[6]=I=>f.value.category_id=I),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(i),"map-options":"",dense:"","emit-value":"",onFilter:a(n),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(ce,{modelValue:f.value.supplier_id,"onUpdate:modelValue":C[7]||(C[7]=I=>f.value.supplier_id=I),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(g),"map-options":"",dense:"","emit-value":"",onFilter:a(v),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:C[8]||(C[8]=I=>d.value=!d.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},r(d.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:M.value,rows:q.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:u.value,"onUpdate:selected":C[9]||(C[9]=I=>u.value=I)},{"body-cell-name":l(I=>[e(W,{props:I},{default:l(()=>[a(w).screen.lt.md?(c(),h("div",B$,[t("div",z$,r(I.row.name),1),I.row.category?(c(),h("div",F$,r(I.row.category.name),1)):k("",!0),t("div",L$,r(a(K)(I.row.stock))+" "+r(I.row.uom),1)])):(c(),h("div",K$,r(I.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Y$=Object.freeze(Object.defineProperty({__proto__:null,default:H$},Symbol.toStringTag,{value:"Module"})),W$={class:"q-gutter-sm"},Q$={class:"q-gutter-sm"},J$={class:"row justify-center"},G$={class:"col col-lg-8 q-pa-sm"},X$={class:"row"},Z$={class:"detail"},ex={key:0},tx={key:1},ax={class:"text-grey-9"},lx={__name:"Detail",setup(m){const s=be(),d=`Rincian #${s.props.data.code}`,o=s.props.details,i=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:f=>K(f)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:f=>K(f)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:f=>K(f)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],n=xe(),g=X(()=>n.screen.gt.sm?i:i.filter(f=>f.name==="no")),v=()=>{window.open(route("admin.stock-adjustment.print",{id:s.props.data.id}),"_blank")};return(f,u)=>{const p=Z("i-head"),y=Z("i-link"),_=Z("authenticated-layout");return c(),h(J,null,[e(p,{title:d}),e(_,{"show-drawer-button":!0},{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",W$,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=q=>f.$inertia.get(f.route("admin.stock-adjustment.index")))})])]),"right-button":l(()=>[t("div",Q$,[e(U,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[1]||(u[1]=q=>v())})])]),default:l(()=>[t("div",J$,[t("div",G$,[t("div",X$,[e(fe,{square:"",flat:"",bordered:"",class:"q-card col"},{default:l(()=>[e(ae,null,{default:l(()=>[u[22]||(u[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",Z$,[t("tbody",null,[t("tr",null,[u[2]||(u[2]=t("td",{style:{width:"120px"}},"Kode",-1)),u[3]||(u[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+r(a(s).props.data.code),1)]),t("tr",null,[u[4]||(u[4]=t("td",null,"Jenis",-1)),u[5]||(u[5]=t("td",null,":",-1)),t("td",null,r(f.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[a(s).props.data.type]),1)]),t("tr",null,[u[6]||(u[6]=t("td",null,"Status",-1)),u[7]||(u[7]=t("td",null,":",-1)),t("td",null,r(f.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[a(s).props.data.status]),1)]),t("tr",null,[u[8]||(u[8]=t("td",null,"Waktu",-1)),u[9]||(u[9]=t("td",null,":",-1)),t("td",null,r(a(ge)(a(s).props.data.datetime)),1)]),a(s).props.data.created_at?(c(),h("tr",ex,[u[11]||(u[11]=t("td",null,"Dibuat Oleh",-1)),u[12]||(u[12]=t("td",null,":",-1)),t("td",null,[a(s).props.data.creator?(c(),h(J,{key:0},[e(y,{href:f.route("admin.user.detail",{id:a(s).props.data.creator})},{default:l(()=>[b(r(a(s).props.data.creator.username)+" - "+r(a(s).props.data.creator.name),1)]),_:1},8,["href"]),u[10]||(u[10]=b(" - "))],64)):k("",!0),b(" "+r(a(ge)(a(s).props.data.created_at)),1)])])):k("",!0),a(s).props.data.updater?(c(),h("tr",tx,[u[14]||(u[14]=t("td",null,"Diperbarui oleh",-1)),u[15]||(u[15]=t("td",null,":",-1)),t("td",null,[a(s).props.data.updater?(c(),h(J,{key:0},[e(y,{href:f.route("admin.user.detail",{id:a(s).props.data.updater})},{default:l(()=>[b(r(a(s).props.data.updater.username)+" - "+r(a(s).props.data.updater.name),1)]),_:1},8,["href"]),u[13]||(u[13]=b(" - "))],64)):k("",!0),b(" "+r(a(ge)(a(s).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[u[16]||(u[16]=t("td",null,"Total Modal",-1)),u[17]||(u[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:Ce(a(s).props.data.total_cost<0?"text-red-10":a(s).props.data.total_cost>0?"text-green-10":"")},r(a(la)(a(s).props.data.total_cost)),3)])]),t("tr",null,[u[18]||(u[18]=t("td",null,"Total Harga",-1)),u[19]||(u[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:Ce(a(s).props.data.total_price<0?"text-red-10":a(s).props.data.total_price>0?"text-green-10":"")},r(a(la)(a(s).props.data.total_price)),3)])]),t("tr",null,[u[20]||(u[20]=t("td",null,"Catatan",-1)),u[21]||(u[21]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)])])])]),_:1}),e(ae,null,{default:l(()=>[u[28]||(u[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Ie,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:g.value,rows:a(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":l(q=>[e(W,{props:q},{default:l(()=>[a(n).screen.lt.md?(c(),h(J,{key:1},[t("div",ax,[t("b",null,"#"+r(q.rowIndex+1),1),u[23]||(u[23]=b(" - ")),e(y,{href:f.route("admin.product.detail",{id:q.row.product_id})},{default:l(()=>[b(r(q.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[b(" Stok Lama: "+r(a(K)(q.row.old_quantity))+" "+r(q.row.uom),1),u[25]||(u[25]=t("br",null,null,-1)),b(" Stok Baru: "+r(a(K)(q.row.new_quantity))+" "+r(q.row.uom),1),u[26]||(u[26]=t("br",null,null,-1)),t("div",{class:Ce(q.row.balance<0?"text-red-10":q.row.balance>0?"text-green-10":"")},[b(" Selisih: "+r((q.row.balance>0?"+":"")+a(K)(q.row.balance))+" "+r(q.row.uom),1),u[24]||(u[24]=t("br",null,null,-1)),b(" (Rp. "+r(a(K)(q.row.subtotal_cost))+" / Rp. "+r(a(K)(q.row.subtotal_price))+") ",1)],2),u[27]||(u[27]=t("br",null,null,-1)),b(" "+r(q.row.notes),1)])],64)):(c(),h(J,{key:0},[b(r(q.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":l(q=>[e(W,{props:q},{default:l(()=>[e(y,{href:f.route("admin.product.detail",{id:q.row.product_id})},{default:l(()=>[b(r(q.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":l(q=>[e(W,{props:q},{default:l(()=>[t("div",{class:Ce(q.row.balance<0?"text-red-10":q.row.balance>0?"text-green-10":"")},r((q.row.balance>0?"+":"")+a(K)(q.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":l(q=>[e(W,{props:q},{default:l(()=>[t("div",{class:Ce(q.row.balance<0?"text-red-10":q.row.balance>0?"text-green-10":"")},r(a(K)(q.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":l(q=>[e(W,{props:q},{default:l(()=>[t("div",{class:Ce(q.row.balance<0?"text-red-10":q.row.balance>0?"text-green-10":"")},r(a(K)(q.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},ox=Object.freeze(Object.defineProperty({__proto__:null,default:lx},Symbol.toStringTag,{value:"Module"})),nx={class:"q-gutter-sm"},sx={class:"col col-lg-6 q-pa-xs"},rx={class:"text-bold"},ix={key:0},dx={class:"text-caption text-grey-8"},zl="Penyesuaian Stok",ux={__name:"Editor",setup(m){const s=xe(),d=be(),o=Qe({id:d.props.item.id,type:d.props.item.type,datetime:new Date(d.props.item.datetime),notes:d.props.item.notes,action:"save",details:[]}),i=tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),n=T(d.props.details.map(p=>(typeof p.new_quantity=="string"&&(p.new_quantity=parseFloat(p.new_quantity)),p))),g=p=>{const y=()=>{o.action=p,o.details=n.value.map(_=>({id:_.id,new_quantity:_.new_quantity})),ra(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:o,url:route("admin.stock-adjustment.save")})};p==="close"||p==="cancel"?$t.create({title:"Konfirmasi",message:p==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{y()}).onCancel(()=>{}):y()},v=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:p=>K(p)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:p=>K(p)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(p,y)=>K(y.new_quantity-y.old_quantity)}],f=X(()=>s.screen.gt.sm?v:v.filter(p=>p.name==="product_name"||p.name==="new_quantity")),u=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(p,y)=>{const _=Z("i-head"),q=Z("authenticated-layout");return c(),h(J,null,[e(_,{title:zl}),e(q,{"show-drawer-button":!0},{title:l(()=>[b(r(zl))]),"left-button":l(()=>[t("div",nx,[a(s).screen.gt.sm?(c(),D(U,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=x=>p.$inertia.get(p.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":l(()=>[e(U,{icon:"save",onClick:y[1]||(y[1]=x=>g("save")),disable:a(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(U,{icon:"check",onClick:y[2]||(y[2]=x=>g("close")),disable:a(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),p.$can("admin.product.import")||p.$can("admin.product:view-cost")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:y[5]||(y[5]=G(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[te((c(),D(oe,{clickable:"",onClick:y[3]||(y[3]=x=>u())},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"print"})]),_:1}),e(F,null,{default:l(()=>y[10]||(y[10]=[b(" Cetak Kartu Stok")])),_:1})]),_:1})),[[ie],[pe]]),te((c(),D(oe,{clickable:"",onClick:y[4]||(y[4]=G(x=>g("cancel"),["stop"]))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"cancel",color:"red"})]),_:1}),e(F,{class:"text-red"},{default:l(()=>y[11]||(y[11]=[b("Batalkan")])),_:1})]),_:1})),[[ie],[pe]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",sx,[e(Je,{class:"row",onSubmit:G(g,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,null,{default:l(()=>y[12]||(y[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[6]||(y[6]=x=>a(o).id=x)},null,512),[[_t,a(o).id]]),e(Ft,{modelValue:a(o).datetime,"onUpdate:modelValue":y[7]||(y[7]=x=>a(o).datetime=x),label:"Waktu",error:!!a(o).errors.datetime,disable:a(o).processing,"error-message":a(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":y[8]||(y[8]=x=>a(o).type=x),options:a(i),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(o).errors.type,disable:a(o).processing,"map-options":"","emit-value":"","error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(ne,{modelValue:a(o).notes,"onUpdate:modelValue":y[9]||(y[9]=x=>a(o).notes=x),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-pa-xs"},{default:l(()=>[e(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:f.value,rows:n.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":l(x=>[e(W,{props:x},{default:l(()=>[t("div",rx,r(x.row.product_name),1),a(s).screen.lt.md?(c(),h("div",ix,[t("div",dx,[b(" Tercatat: "+r(a(K)(x.row.old_quantity))+" ",1),y[13]||(y[13]=t("br",null,null,-1)),b(" Selisih: "+r(a(K)(x.row.new_quantity-x.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":l(x=>[e(W,{props:x,class:"text-center"},{default:l(()=>[e(Ee,{modelValue:x.row[x.col.name],"onUpdate:modelValue":w=>x.row[x.col.name]=w,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},mx=Object.freeze(Object.defineProperty({__proto__:null,default:ux},Symbol.toStringTag,{value:"Module"}));function cx(){const m=Vt();if(!m)throw new Error("useCan must be called within a component setup function.");return s=>m.proxy.$can(s)}const px={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},fx={class:"q-pa-xs"},gx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},bx={key:0,class:"flex q-gutter-xs"},vx={class:"flex q-col-gutter-xs"},yx={key:0},_x={key:1},kx={key:0},wx={class:"flex justify-end"},Fl="Penyesuaian Stok",hx={__name:"Index",setup(m){const s=T([]),d=T(!0),o=T(!1),i=T(null),n=T(null),g=et(n),v=Bt(),f=zt(),u=[{label:"Semua Tahun",value:"all"},{label:`${v}`,value:v},...Ct(v-2,v-1).reverse()],p=[{value:"all",label:"Semua Bulan"},...Tt()],y=Re({search:"",year:v,month:f,status:"all",type:"all",...Me()}),_=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],q=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],x=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),w=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];he(()=>{Y()});const M=I=>st({message:`Hapus Penyesuaian Stok #${I.code}?`,url:route("admin.stock-adjustment.delete",I.id),fetchItemsCallback:Y,loading:d}),Y=(I=null)=>Be({pagination:x,filter:y,props:I,rows:s,url:route("admin.stock-adjustment.data"),loading:d,tableRef:i}),C=()=>{Y()},B=I=>{I.status=="draft"?ee.get(route("admin.stock-adjustment.editor",I.id)):ee.get(route("admin.stock-adjustment.detail",I.id))},{protectClick:O}=Ut(),z=O(B),j=xe(),V=X(()=>{let I=w;return cx()||(I=I.filter(R=>R.name!=="cost")),j.screen.gt.sm?I:I.filter(R=>R.name==="id"||R.name==="action")});return(I,R)=>{const $=Z("i-head"),E=Z("authenticated-layout");return c(),h(J,null,[e($,{title:Fl}),e(E,null,He({"right-button":l(()=>[e(U,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=N=>o.value=!o.value)},null,8,["icon"]),I.$can("admin.stock-adjustment.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=N=>a(ee).get(I.route("admin.stock-adjustment.create")))})):k("",!0)]),title:l(()=>[b(r(Fl))]),default:l(()=>[t("div",fx,[e(Ie,{ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:x.value,"onUpdate:pagination":R[8]||(R[8]=N=>x.value=N),filter:y.search,loading:d.value,columns:V.value,rows:s.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(g)}),onRequest:Y,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:N,message:S,filter:A})=>[t("div",gx,[t("span",null,r(S)+" "+r(A?" with term "+A:""),1)])]),body:l(N=>[e(Pe,{props:N,onClick:G(S=>a(z)(N.row,S),["stop"]),class:"cursor-pointer"},{default:l(()=>[e(W,{key:"id",props:N},{default:l(()=>[a(j).screen.lt.md?(c(),h(J,{key:1},[t("div",vx,[t("div",null,"#"+r(N.row.code),1),t("div",null,[e(P,{name:"history"}),b(" "+r(a(ge)(N.row.datetime)),1)]),e(Xl,{dense:"",size:"sm",color:N.row.status==="draft"?"orange":N.row.status==="closed"?"green":N.row.status==="canceled"?"red":"",icon:N.row.status==="draft"?"emergency":N.row.status==="closed"?"check":N.row.status==="canceled"?"close":""},{default:l(()=>[b(r(I.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[N.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(P,{name:"category"}),b(" "+r(I.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[N.row.type]),1)]),N.row.created_by?(c(),h("div",yx,[e(P,{name:"person"}),R[9]||(R[9]=b(" Dibuat: ")),t("b",null,r(N.row.created_by.username),1),e(P,{name:"history"}),b(" "+r(a(ge)(N.row.created_at)),1)])):k("",!0),N.row.updated_by?(c(),h("div",_x,[e(P,{name:"person"}),R[10]||(R[10]=b(" Diperbarui: ")),t("b",null,r(N.row.updated_by.username),1),e(P,{name:"history"}),b(" "+r(a(ge)(N.row.updated_at)),1)])):k("",!0),t("div",{class:Ce(N.row.total_cost<0?"text-red-10":N.row.total_cost>0?"text-green-10":"")},[e(P,{name:"money"}),I.$can("admin.product:view-cost")?(c(),h("span",kx,"Rp. "+r(a(K)(N.row.total_cost))+" / ",1)):k("",!0),b(" Rp. "+r(a(K)(N.row.total_price)),1)],2)],64)):(c(),h("div",bx,"#"+r(N.row.code),1))]),_:2},1032,["props"]),e(W,{key:"datetime",props:N},{default:l(()=>[b(r(a(ge)(N.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"status",props:N,class:"text-center"},{default:l(()=>[b(r(I.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[N.row.status]),1)]),_:2},1032,["props"]),e(W,{key:"type",props:N},{default:l(()=>[b(r(I.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[N.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"total_cost",props:N},{default:l(()=>[I.$can("admin.product:view-cost")?(c(),h("div",{key:0,class:Ce(N.row.total_cost<0?"text-red-10":N.row.total_cost>0?"text-green-10":"")},r(a(K)(N.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total_price",props:N},{default:l(()=>[t("div",{class:Ce(N.row.total_price<0?"text-red-10":N.row.total_price>0?"text-green-10":"")},r(a(K)(N.row.total_price)),3)]),_:2},1032,["props"]),e(W,{key:"notes",props:N},{default:l(()=>[b(r(N.row.notes),1)]),_:2},1032,["props"]),e(W,{key:"action",props:N},{default:l(()=>[t("div",wx,[I.$can("admin.stock-adjustment.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[7]||(R[7]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[I.$can("admin.stock-adjustment.delete")?te((c(),D(oe,{key:0,onClick:G(S=>M(N.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>R[11]||(R[11]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:l(()=>[t("div",px,[e(ce,{modelValue:y.year,"onUpdate:modelValue":[R[2]||(R[2]=N=>y.year=N),C],options:u,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),y.year!="all"?(c(),D(ce,{key:0,modelValue:y.month,"onUpdate:modelValue":[R[3]||(R[3]=N=>y.month=N),C],options:p,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:y.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:y.status,"onUpdate:modelValue":[R[4]||(R[4]=N=>y.status=N),C],options:_,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:y.type,"onUpdate:modelValue":[R[5]||(R[5]=N=>y.type=N),C],options:q,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":R[6]||(R[6]=N=>y.search=N),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},$x=Object.freeze(Object.defineProperty({__proto__:null,default:hx},Symbol.toStringTag,{value:"Module"})),xx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Sx={class:"q-pa-xs"},Vx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ll="Riwayat Stok",qx={__name:"Index",setup(m){be();const s=T(null),d=T(null),o=et(d),i=Bt(),n=zt(),g=[{label:"Semua Tahun",value:"all"},{label:`${i}`,value:i},...Ct(i-2,i-1).reverse()],v=[{value:"all",label:"Semua Bulan"},...Tt()],f=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],u=xe(),p=T(!1),y=T([]),_=T(!0),q=Re({type:"all",search:"",year:i,month:n,...Me()}),x=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let w=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{const O=new URLSearchParams(window.location.search).get("page");O&&(x.value.page=parseInt(O)),M()});const M=(B=null)=>{Be({pagination:x,filter:q,props:B,rows:y,url:route("admin.stock-movement.data"),loading:_,tableRef:s})},Y=()=>{M()},C=X(()=>u.screen.lt.sm?w.filter(B=>B.name==="id"||B.name==="quantity"):w);return(B,O)=>{const z=Z("i-head"),j=Z("authenticated-layout");return c(),h(J,null,[e(z,{title:Ll}),e(j,null,He({title:l(()=>[b(r(Ll))]),"right-button":l(()=>[e(U,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=V=>p.value=!p.value)},null,8,["icon"])]),default:l(()=>[t("div",Sx,[e(Ie,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":O[5]||(O[5]=V=>x.value=V),filter:q.search,loading:_.value,columns:C.value,rows:y.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(o)}),onRequest:M,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:I,filter:R})=>[t("div",Vx,[t("span",null,r(I)+" "+r(R?" with term "+R:""),1)])]),body:l(V=>[e(Pe,{props:V},{default:l(()=>[e(W,{key:"id",props:V},{default:l(()=>[t("div",null,[e(P,{class:"inline-icon",name:"tag"}),b(" "+r(V.row.code),1)]),t("div",null,[e(P,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(a(ge)(V.row.created_at)),1)]),t("div",null,[e(ft,null,{default:l(()=>[b(r(B.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[V.row.ref_type]),1)]),_:2},1024)]),a(u).screen.lt.sm?(c(),h(J,{key:0},[t("div",null,[e(P,{name:"token",class:"inline-icon"}),b(" "+r(V.row.product.name),1)]),t("div",{class:Ce(V.row.quantity>0?"text-positive":"text-negative")},[e(P,{class:"inline-icon",name:"compare_arrows"}),b(" "+r(a(K)(V.row.quantity_before))+" "+r(V.row.uom)+"  "+r(a(K)(V.row.quantity_after))+" "+r(V.row.uom),1)],2),e($e,{text:V.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"product",props:V},{default:l(()=>[b(r(V.row.product.name),1)]),_:2},1032,["props"]),e(W,{key:"quantity_before",props:V},{default:l(()=>[b(r(a(K)(V.row.quantity_before)),1)]),_:2},1032,["props"]),e(W,{key:"quantity",props:V,class:Ce(V.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[b(r(a(ia)(V.row.quantity))+" ",1),a(u).screen.lt.sm?(c(),h(J,{key:0},[b(r(V.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(W,{key:"quantity_after",props:V},{default:l(()=>[b(r(a(K)(V.row.quantity_after)),1)]),_:2},1032,["props"]),e(W,{key:"uom",props:V},{default:l(()=>[b(r(V.row.uom),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:V},{default:l(()=>[e($e,{text:V.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[p.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:d},{default:l(()=>[t("div",xx,[e(ce,{modelValue:q.year,"onUpdate:modelValue":[O[1]||(O[1]=V=>q.year=V),Y],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),q.year!="all"?(c(),D(ce,{key:0,modelValue:q.month,"onUpdate:modelValue":[O[2]||(O[2]=V=>q.month=V),Y],options:v,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:q.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:q.ref_type,"onUpdate:modelValue":[O[3]||(O[3]=V=>q.ref_type=V),Y],options:f,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:q.search,"onUpdate:modelValue":O[4]||(O[4]=V=>q.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Cx=Object.freeze(Object.defineProperty({__proto__:null,default:qx},Symbol.toStringTag,{value:"Module"})),Tx={class:"detail"},Px={key:0},Rx={key:1},Ox={key:2},Dx={key:3},Ix={key:4},Ux={key:5},Ex={key:6},jx={key:0,class:"q-pt-md"},nn={__name:"MainInfoTab",setup(m){const s=be(),d=()=>{st({message:`Hapus Pemasok ${s.props.data.name}?`,url:route("admin.supplier.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.supplier.index"))}})};return(o,i)=>(c(),h(J,null,[t("table",Tx,[t("tbody",null,[i[22]||(i[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Nama",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[t("td",null,r(a(s).props.data.balance<0?"Utang":"Utang / Piutang"),1),i[5]||(i[5]=t("td",null,":",-1)),t("td",{class:Ce(a(s).props.data.balance<0?"text-red":"text-green")},r(a(la)(a(s).props.data.balance)),3)]),a(s).props.data.phone_1?(c(),h("tr",Px,[i[6]||(i[6]=t("td",null,"No Telepon",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone_1),1)])):k("",!0),a(s).props.data.phone_2?(c(),h("tr",Rx,[i[8]||(i[8]=t("td",null,"No Telepon 2",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone_2),1)])):k("",!0),a(s).props.data.phone_3?(c(),h("tr",Ox,[i[10]||(i[10]=t("td",null,"No Telepon 3",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone_3),1)])):k("",!0),a(s).props.data.address?(c(),h("tr",Dx,[i[12]||(i[12]=t("td",null,"Alamat",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.address),1)])):k("",!0),a(s).props.data.return_address?(c(),h("tr",Ix,[i[14]||(i[14]=t("td",null,"Alamat Retur",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.return_address),1)])):k("",!0),a(s).props.data.bank_account_name_1||a(s).props.data.bank_account_number_1||a(s).props.data.bank_account_holder_1?(c(),h("tr",Ux,[i[16]||(i[16]=t("td",null,"Rek 1",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.bank_account_name_1)+" "+r(a(s).props.data.bank_account_number_1)+" a.n. "+r(a(s).props.data.bank_account_holder_1),1)])):k("",!0),a(s).props.data.bank_account_name_2||a(s).props.data.bank_account_number_2||a(s).props.data.bank_account_holder_2?(c(),h("tr",Ex,[i[18]||(i[18]=t("td",null,"Rek 2",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.bank_account_name_2)+" "+r(a(s).props.data.bank_account_number_2)+" a.n. "+r(a(s).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Status",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(c(),h("div",jx,[e(U,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>d())})])):k("",!0)],64))}},Ax=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),Nx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Mx={class:"text-bold"},Bx={class:"text-bold"},zx={key:0},sn={__name:"OrderHistoryTab",setup(m){const s=be(),d=T([]),o=T(!0),i=Re({customer_id:s.props.data.id,...Me()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{v()});const v=(p=null)=>Be({pagination:n,filter:i,props:p,rows:d,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:s.props.data.id}}),loading:o}),f=xe(),u=X(()=>f.screen.gt.sm?g:g.filter(p=>p.name==="id"));return(p,y)=>(c(),D(Ie,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:u.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:q,filter:x})=>[t("div",Nx,[t("span",null,r(q)+" "+r(x?" with term "+x:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:G(q=>a(ee).get(p.route("admin.purchase-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",Mx,[e(P,{class:"inline-icon",name:"tag"}),b(" "+r(_.row.code),1)]),t("div",null,[e(P,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(a(ge)(_.row.datetime)),1)]),a(f).screen.lt.md?(c(),h(J,{key:0},[t("div",Bx,[e(P,{name:"money",class:"inline-icon"}),b(" Rp. "+r(a(K)(_.row.grand_total)),1)]),_.row.notes?(c(),h("div",zx,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(ft,{color:_.row.status=="closed"?"green":"red"},{default:l(()=>[b(r(p.$CONSTANTS.SALES_ORDER_STATUSES[_.row.status]),1)]),_:2},1032,["color"]),e(ft,{color:_.row.payment_status=="fully_paid"?"green":"red",class:"q-ml-xs"},{default:l(()=>[b(r(p.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[_.row.payment_status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[t("div",null,r(a(K)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Fx=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"})),Lx={class:"q-gutter-sm"},Kx={class:"q-gutter-sm"},Hx={class:"col col-lg-6 q-pa-xs"},Yx={class:"row"},Kl="Rincian Pemasok",Wx={__name:"Detail",setup(m){const s=be(),d=T("main");return xe(),(o,i)=>{const n=Z("i-head"),g=Z("authenticated-layout");return c(),h(J,null,[e(n,{title:Kl}),e(g,null,{title:l(()=>[b(r(Kl))]),"left-button":l(()=>[t("div",Lx,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":l(()=>[t("div",Kx,[o.$can("admin.supplier.edit")?(c(),D(U,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=v=>a(ee).get(o.route("admin.supplier.edit",{id:a(s).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(c(),D(U,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=v=>a(ee).get(o.route("admin.supplier.edit",{id:a(s).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(c(),D(U,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=v=>a(ee).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Hx,[t("div",Yx,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Pt,{modelValue:d.value,"onUpdate:modelValue":i[4]||(i[4]=v=>d.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(ot,{name:"main",label:"Info Utama"}),e(ot,{name:"order-history",label:"Riwayat Order"}),e(ot,{name:"version-history",label:"Riwayat Dokumen"})]),_:1},8,["modelValue"]),e(Rt,{modelValue:d.value,"onUpdate:modelValue":i[5]||(i[5]=v=>d.value=v),animated:""},{default:l(()=>[e(nt,{name:"main"},{default:l(()=>[e(nn)]),_:1}),e(nt,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(sn)]),_:1}),e(nt,{name:"version-history",class:"q-pa-xs"},{default:l(()=>[e(Ia,{"document-id":a(s).props.data.id,"document-type":"supplier"},null,8,["document-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Qx=Object.freeze(Object.defineProperty({__proto__:null,default:Wx},Symbol.toStringTag,{value:"Module"})),Jx={class:"q-gutter-sm"},Gx={class:"col col-md-6 q-pa-xs"},Xx={class:"row q-col-gutter-md"},Zx={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},eS={key:2,class:"row q-col-gutter-md"},tS={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},aS={key:4,class:"row q-col-gutter-md"},lS={key:5,class:"row q-col-gutter-md"},oS={style:{"margin-left":"-10px"},class:"q-mt-md"},nS={class:"q-mt-sm"},sS={__name:"Editor",setup(m){const s=be(),d=(s.props.data.id?"Edit":"Tambah")+" Pemasok",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,phone_1:s.props.data.phone_1,phone_2:s.props.data.phone_2,phone_3:s.props.data.phone_3,url_1:s.props.data.url_1,url_2:s.props.data.url_2,bank_account_name_1:s.props.data.bank_account_name_1,bank_account_holder_1:s.props.data.bank_account_holder_1,bank_account_number_1:s.props.data.bank_account_number_1,bank_account_name_2:s.props.data.bank_account_name_2,bank_account_holder_2:s.props.data.bank_account_holder_2,bank_account_number_2:s.props.data.bank_account_number_2,address:s.props.data.address,return_address:s.props.data.return_address,active:!!s.props.data.active}),i=T(!0),n=()=>rt({form:o,url:route("admin.supplier.save")});return(g,v)=>{const f=Z("i-head"),u=Z("authenticated-layout");return c(),h(J,null,[e(f,{title:d}),e(u,{"show-drawer-button":!0},{title:l(()=>[b(r(d))]),"left-button":l(()=>[t("div",Jx,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=p=>g.$goBack())})])]),"right-button":l(()=>[e(U,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(o).processing,onClick:v[1]||(v[1]=p=>n()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Gx,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[2]||(v[2]=p=>a(o).id=p)},null,512),[[_t,a(o).id]]),e(ne,{modelValue:a(o).code,"onUpdate:modelValue":v[3]||(v[3]=p=>a(o).code=p),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[p=>p&&p.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).name,"onUpdate:modelValue":v[4]||(v[4]=p=>a(o).name=p),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[p=>p&&p.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",Xx,[e(ne,{modelValue:a(o).phone_1,"onUpdate:modelValue":v[5]||(v[5]=p=>a(o).phone_1=p),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_1,"error-message":a(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(c(),D(ne,{key:0,modelValue:a(o).phone_2,"onUpdate:modelValue":v[6]||(v[6]=p=>a(o).phone_2=p),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_2,"error-message":a(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(c(),D(ne,{key:1,modelValue:a(o).phone_3,"onUpdate:modelValue":v[7]||(v[7]=p=>a(o).phone_3=p),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_3,"error-message":a(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(ne,{modelValue:a(o).address,"onUpdate:modelValue":v[8]||(v[8]=p=>a(o).address=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(c(),D(ne,{key:0,modelValue:a(o).return_address,"onUpdate:modelValue":v[9]||(v[9]=p=>a(o).return_address=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.return_address,"error-message":a(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(c(),h("div",Zx," Rekening 1 ")),i.value?k("",!0):(c(),h("div",eS,[e(ne,{modelValue:a(o).bank_account_name_1,"onUpdate:modelValue":v[10]||(v[10]=p=>a(o).bank_account_name_1=p),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_1,"error-message":a(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_number_1,"onUpdate:modelValue":v[11]||(v[11]=p=>a(o).bank_account_number_1=p),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_1,"error-message":a(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_holder_1,"onUpdate:modelValue":v[12]||(v[12]=p=>a(o).bank_account_holder_1=p),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_1,"error-message":a(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(c(),h("div",tS," Rekening 2 ")),i.value?k("",!0):(c(),h("div",aS,[e(ne,{modelValue:a(o).bank_account_name_2,"onUpdate:modelValue":v[13]||(v[13]=p=>a(o).bank_account_name_2=p),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_2,"error-message":a(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_number_2,"onUpdate:modelValue":v[14]||(v[14]=p=>a(o).bank_account_number_2=p),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_2,"error-message":a(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_holder_2,"onUpdate:modelValue":v[15]||(v[15]=p=>a(o).bank_account_holder_2=p),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_2,"error-message":a(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(c(),h("div",lS,[e(ne,{modelValue:a(o).url_1,"onUpdate:modelValue":v[16]||(v[16]=p=>a(o).url_1=p),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_1,"error-message":a(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).url_2,"onUpdate:modelValue":v[17]||(v[17]=p=>a(o).url_2=p),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_2,"error-message":a(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",oS,[e(na,{class:"full-width q-pl-none",modelValue:a(o).active,"onUpdate:modelValue":v[18]||(v[18]=p=>a(o).active=p),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",nS,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:v[19]||(v[19]=G(p=>i.value=!i.value,["stop"]))},[e(P,{name:i.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),b(" "+r(i.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},rS=Object.freeze(Object.defineProperty({__proto__:null,default:sS},Symbol.toStringTag,{value:"Module"})),iS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},dS={class:"q-pa-xs"},uS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},mS={key:0},cS={key:1},pS={class:"flex justify-end"},Hl="Pemasok",fS={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Re({search:"",status:"active",...Me()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),p=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{q()});const _=B=>st({message:`Hapus pemasok ${B.name}?`,url:route("admin.supplier.delete",B.id),fetchItemsCallback:q,loading:i}),q=(B=null)=>{Be({pagination:u,filter:f,props:B,rows:o,url:route("admin.supplier.data"),loading:i,tableRef:n})},x=()=>q(),w=B=>ee.get(route("admin.supplier.detail",{id:B.id})),{protectClick:M}=Ut(),Y=M(w),C=X(()=>s.screen.gt.sm?p:p.filter(B=>B.name==="code"||B.name==="action"));return(B,O)=>{const z=Z("i-head"),j=Z("authenticated-layout");return c(),h(J,null,[e(z,{title:Hl}),e(j,null,He({title:l(()=>[b(r(Hl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=V=>d.value=!d.value)},null,8,["icon"]),B.$can("admin.supplier.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=V=>a(ee).get(B.route("admin.supplier.add")))})):k("",!0)]),default:l(()=>[t("div",dS,[e(Ie,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":O[5]||(O[5]=V=>u.value=V),filter:f.search,loading:i.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(v)}),onRequest:q,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:I,filter:R})=>[t("div",uS,[t("span",null,r(I)+" "+r(R?" with term "+R:""),1)])]),body:l(V=>[e(Pe,{props:V,class:Ce([V.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(I=>a(Y)(V.row,I),["stop"])},{default:l(()=>[e(W,{key:"code",props:V,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.lt.md?(c(),D(P,{key:0,name:"person"})):k("",!0),b(" "+r(V.row.code)+" ",1),a(s).screen.lt.md?(c(),h(J,{key:1},[b(" - "+r(V.row.name),1)],64)):k("",!0)]),a(s).screen.lt.md?(c(),h(J,{key:0},[t("div",{class:Ce(V.row.balance<0?"text-negative":"text-positive")},[e(P,{name:"wallet"}),b(" "+r(a(K)(V.row.balance)),1)],2),V.row.phone_1?(c(),h("div",mS,[e(P,{name:"phone"}),b(" "+r(V.row.phone_1),1)])):k("",!0),V.row.address?(c(),h("div",cS,[e(P,{name:"home_pin"}),b(" "+r(V.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"name",props:V,class:"wrap-column"},{default:l(()=>[b(r(V.row.name),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:V,class:"wrap-column"},{default:l(()=>[t("div",{class:Ce(V.row.balance<0?"text-negative":"text-positive")},r(a(K)(V.row.balance)),3)]),_:2},1032,["props"]),e(W,{key:"phone_1",props:V},{default:l(()=>[b(r(V.row.phone_1),1)]),_:2},1032,["props"]),e(W,{key:"address",props:V},{default:l(()=>[b(r(V.row.address),1)]),_:2},1032,["props"]),e(W,{key:"action",props:V},{default:l(()=>[t("div",pS,[B.$can("admin.supplier.add")||B.$can("admin.supplier.edit")||B.$can("admin.supplier.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[4]||(O[4]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[B.$can("admin.supplier.add")?te((c(),D(oe,{key:0,clickable:"",onClick:G(I=>a(ee).get(B.route("admin.supplier.duplicate",V.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>O[6]||(O[6]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),B.$can("admin.supplier.edit")?te((c(),D(oe,{key:1,clickable:"",onClick:G(I=>a(ee).get(B.route("admin.supplier.edit",V.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>O[7]||(O[7]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),B.$can("admin.supplier.delete")?te((c(),D(oe,{key:2,onClick:G(I=>_(V.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>O[8]||(O[8]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",iS,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:f.status,"onUpdate:modelValue":[O[2]||(O[2]=V=>f.status=V),x],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":O[3]||(O[3]=V=>f.search=V),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},gS=Object.freeze(Object.defineProperty({__proto__:null,default:fS},Symbol.toStringTag,{value:"Module"})),bS={class:"q-gutter-sm"},vS={class:"col col-md-6 q-pa-xs"},yS={class:"q-pt-md"},_S={key:0,class:"text-caption text-negative"},kS={class:"q-pt-md"},wS={key:0,class:"text-caption text-negative"},hS={__name:"Editor",setup(m){const s=xe(),d=be(),o=(d.props.data.id?"Edit":"Tambah")+" Skema Pajak",i=Qe({id:d.props.data.id,name:d.props.data.name,rate_percentage:d.props.data.rate_percentage??0,tax_authority:d.props.data.tax_authority,is_inclusive:d.props.data.is_inclusive??!1,active:d.props.data.active??!0,description:d.props.data.description}),n=()=>rt({form:i,url:route("admin.tax-scheme.save")});return(g,v)=>{const f=Z("i-head"),u=Z("authenticated-layout");return c(),h(J,null,[e(f,{title:o}),e(u,{"show-drawer-button":!a(s).screen.lt.md},He({title:l(()=>[b(r(o))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",vS,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(ae,{class:"q-pt-none"},{default:l(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=p=>a(i).id=p)},null,512),[[_t,a(i).id]]),e(ne,{autofocus:"",modelValue:a(i).name,"onUpdate:modelValue":v[2]||(v[2]=p=>a(i).name=p),modelModifiers:{trim:!0},label:"Nama Skema Pajak","lazy-rules":"",error:!!a(i).errors.name,disable:a(i).processing,"error-message":a(i).errors.name,rules:[p=>p&&p.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(i).rate_percentage,"onUpdate:modelValue":v[3]||(v[3]=p=>a(i).rate_percentage=p),modelModifiers:{number:!0},label:"Tarif Persentase (%)",type:"number",suffix:"%",rules:[p=>p>=0||"Persentase tidak boleh negatif."],error:!!a(i).errors.rate_percentage,disable:a(i).processing,"error-message":a(i).errors.rate_percentage,"hide-bottom-space":""},null,8,["modelValue","rules","error","disable","error-message"]),e(ne,{modelValue:a(i).tax_authority,"onUpdate:modelValue":v[4]||(v[4]=p=>a(i).tax_authority=p),modelModifiers:{trim:!0},label:"Otoritas Pajak (Opsional)",hint:"Contoh: DJP, Pemerintah Daerah",error:!!a(i).errors.tax_authority,disable:a(i).processing,"error-message":a(i).errors.tax_authority,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(i).description,"onUpdate:modelValue":v[5]||(v[5]=p=>a(i).description=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.description,"error-message":a(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",yS,[e(Ya,{modelValue:a(i).is_inclusive,"onUpdate:modelValue":v[6]||(v[6]=p=>a(i).is_inclusive=p),disable:a(i).processing,label:a(i).is_inclusive?"Harga Jual SUDAH termasuk Pajak":"Harga Jual BELUM termasuk Pajak",color:"primary"},null,8,["modelValue","disable","label"]),a(i).errors.is_inclusive?(c(),h("div",_S,r(a(i).errors.is_inclusive),1)):k("",!0)]),t("div",kS,[e(Ya,{modelValue:a(i).active,"onUpdate:modelValue":v[7]||(v[7]=p=>a(i).active=p),disable:a(i).processing,label:a(i).active?"Skema Aktif":"Skema Non-Aktif",color:"primary"},null,8,["modelValue","disable","label"]),a(i).errors.active?(c(),h("div",wS,r(a(i).errors.active),1)):k("",!0)])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:l(()=>[e(U,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"]),e(U,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:v[8]||(v[8]=p=>g.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(s).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",bS,[e(U,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=p=>g.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},$S=Object.freeze(Object.defineProperty({__proto__:null,default:hS},Symbol.toStringTag,{value:"Module"})),xS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},SS={class:"q-pa-xs"},VS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},qS={class:"text-weight-bold"},CS={class:"text-grey-8"},TS={class:"text-weight-medium"},PS={class:"text-weight-medium text-uppercase"},RS={key:0,class:"text-grey-8"},OS={key:1,class:"text-grey-8"},DS={class:"flex justify-end"},Yl="Skema Pajak",IS={__name:"Index",setup(m){const s=xe(),d=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),v=et(g),f=Re({search:"",...Me()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),p=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"rate_percentage",label:"Tarif",field:"rate_percentage",align:"right",sortable:!0,format:x=>`${x}%`},{name:"is_inclusive",label:"Tipe Harga",field:"is_inclusive",align:"center",format:x=>x?"INCLUSIVE":"EXCLUSIVE",sortable:!0},{name:"tax_authority",label:"Otoritas",field:"tax_authority",align:"left",sortable:!0},{name:"active",label:"Status",field:"active",align:"center",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{_()});const y=x=>st({message:`Hapus Skema Pajak ${x.name}?`,url:route("admin.tax-scheme.delete",x.id),fetchItemsCallback:_,loading:i}),_=(x=null)=>{Be({pagination:u,filter:f,props:x,rows:o,url:route("admin.tax-scheme.data"),loading:i,tableRef:n})},q=X(()=>s.screen.gt.sm?p:p.filter(x=>x.name==="name"||x.name==="action"));return(x,w)=>{const M=Z("i-head"),Y=Z("authenticated-layout");return c(),h(J,null,[e(M,{title:Yl}),e(Y,null,He({title:l(()=>[b(r(Yl))]),"right-button":l(()=>[e(U,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=C=>d.value=!d.value)},null,8,["icon"]),x.$can("admin.tax-scheme.add")?(c(),D(U,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=C=>a(ee).get(x.route("admin.tax-scheme.add")))})):k("",!0)]),default:l(()=>[t("div",SS,[e(Ie,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":w[4]||(w[4]=C=>u.value=C),filter:f.search,loading:i.value,columns:q.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:a(v)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":l(({icon:C,message:B,filter:O})=>[t("div",VS,[t("span",null,r(B)+" "+r(O?" with term "+O:""),1)])]),body:l(C=>[e(Pe,{props:C},{default:l(()=>[e(W,{key:"name",props:C,class:"wrap-column"},{default:l(()=>[t("div",qS,r(C.row.name),1),a(s).screen.gt.sm?k("",!0):(c(),h(J,{key:0},[t("div",CS,[w[5]||(w[5]=b(" Tarif: ")),t("span",TS,r(C.row.rate_percentage)+"%",1)]),t("div",null,[w[6]||(w[6]=b(" Tipe: ")),t("span",PS,r(C.row.is_inclusive?"Inclusive":"Exclusive"),1)]),C.row.tax_authority?(c(),h("div",RS,[e(P,{name:"account_balance",size:"xs"}),b(" Otoritas: "+r(C.row.tax_authority),1)])):k("",!0),C.row.description?(c(),h("div",OS,[e(P,{name:"description",size:"xs"}),b(" "+r(C.row.description),1)])):k("",!0),e(ft,{color:C.row.active?"positive":"negative"},{default:l(()=>[b(r(C.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])],64))]),_:2},1032,["props"]),e(W,{key:"rate_percentage",props:C,class:"text-right text-weight-bold"},{default:l(()=>[b(r(C.row.rate_percentage)+"% ",1)]),_:2},1032,["props"]),e(W,{key:"is_inclusive",props:C,class:"text-center"},{default:l(()=>[e(ft,{color:C.row.is_inclusive?"green-7":"deep-orange-7","text-color":"white"},{default:l(()=>[b(r(C.row.is_inclusive?"INCLUSIVE":"EXCLUSIVE"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(W,{key:"tax_authority",props:C,class:"wrap-column"},{default:l(()=>[b(r(C.row.tax_authority),1)]),_:2},1032,["props"]),e(W,{key:"active",props:C,class:"text-center"},{default:l(()=>[e(ft,{color:C.row.active?"positive":"negative"},{default:l(()=>[b(r(C.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(W,{key:"description",props:C,class:"wrap-column"},{default:l(()=>[b(r(C.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:C},{default:l(()=>[t("div",DS,[x.$can("admin.tax-scheme.add")||x.$can("admin.tax-scheme.edit")||x.$can("admin.tax-scheme.delete")?(c(),D(U,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[3]||(w[3]=G(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Le,{style:{width:"200px"}},{default:l(()=>[x.$can("admin.tax-scheme.add")?te((c(),D(oe,{key:0,clickable:"",onClick:G(B=>a(ee).get(x.route("admin.tax-scheme.duplicate",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"file_copy"})]),_:1}),e(F,null,{default:l(()=>w[7]||(w[7]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),x.$can("admin.tax-scheme.edit")?te((c(),D(oe,{key:1,clickable:"",onClick:G(B=>a(ee).get(x.route("admin.tax-scheme.edit",C.row.id)),["stop"])},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"edit"})]),_:1}),e(F,null,{default:l(()=>w[8]||(w[8]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),x.$can("admin.tax-scheme.delete")?te((c(),D(oe,{key:2,onClick:G(B=>y(C.row),["stop"]),clickable:""},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"delete_forever"})]),_:1}),e(F,null,{default:l(()=>w[9]||(w[9]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:l(()=>[e(it,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",xS,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":w[2]||(w[2]=C=>f.search=C),placeholder:"Cari",clearable:""},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},US=Object.freeze(Object.defineProperty({__proto__:null,default:IS},Symbol.toStringTag,{value:"Module"})),ES=qt({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(m,{slots:s,emit:d}){let o=!1,i,n,g=null,v=null,f,u;function p(){i&&i(),i=null,o=!1,g!==null&&(clearTimeout(g),g=null),v!==null&&(clearTimeout(v),v=null),n!==void 0&&n.removeEventListener("transitionend",f),f=null}function y(w,M,Y){M!==void 0&&(w.style.height=`${M}px`),w.style.transition=`height ${m.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,i=Y}function _(w,M){w.style.overflowY=null,w.style.height=null,w.style.transition=null,p(),M!==u&&d(M)}function q(w,M){let Y=0;n=w,o===!0?(p(),Y=w.offsetHeight===w.scrollHeight?0:void 0):(u="hide",w.style.overflowY="hidden"),y(w,Y,M),g=setTimeout(()=>{g=null,w.style.height=`${w.scrollHeight}px`,f=C=>{v=null,(Object(C)!==C||C.target===w)&&_(w,"show")},w.addEventListener("transitionend",f),v=setTimeout(f,m.duration*1.1)},100)}function x(w,M){let Y;n=w,o===!0?p():(u="show",w.style.overflowY="hidden",Y=w.scrollHeight),y(w,Y,M),g=setTimeout(()=>{g=null,w.style.height=0,f=C=>{v=null,(Object(C)!==C||C.target===w)&&_(w,"hide")},w.addEventListener("transitionend",f),v=setTimeout(f,m.duration*1.1)},100)}return fa(()=>{o===!0&&p()}),()=>qe(Jl,{css:!1,appear:m.appear,onEnter:q,onLeave:x},s.default)}}),Kt=as({}),jS=Object.keys(ao),Dt=qt({name:"QExpansionItem",props:{...ao,...os,...Ra,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ls,"click","afterShow","afterHide"],setup(m,{slots:s,emit:d}){const{proxy:{$q:o}}=Vt(),i=Oa(m,o),n=T(m.modelValue!==null?m.modelValue:m.defaultOpened),g=T(null),v=ns(),{show:f,hide:u,toggle:p}=ss({showing:n});let y,_;const q=X(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${m.popup===!0?"popup":"standard"}`),x=X(()=>m.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:m.contentInsetLevel*56+"px"}),w=X(()=>m.disable!==!0&&(m.href!==void 0||m.to!==void 0&&m.to!==null&&m.to!=="")),M=X(()=>{const me={};return jS.forEach(Oe=>{me[Oe]=m[Oe]}),me}),Y=X(()=>w.value===!0||m.expandIconToggle!==!0),C=X(()=>m.expandedIcon!==void 0&&n.value===!0?m.expandedIcon:m.expandIcon||o.iconSet.expansionItem[m.denseToggle===!0?"denseIcon":"icon"]),B=X(()=>m.disable!==!0&&(w.value===!0||m.expandIconToggle===!0)),O=X(()=>({expanded:n.value===!0,detailsId:v.value,toggle:p,show:f,hide:u})),z=X(()=>{const me=m.toggleAriaLabel!==void 0?m.toggleAriaLabel:o.lang.label[n.value===!0?"collapse":"expand"](m.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":v.value,"aria-label":me}});Ne(()=>m.group,me=>{_!==void 0&&_(),me!==void 0&&E()});function j(me){w.value!==!0&&p(me),d("click",me)}function V(me){me.keyCode===13&&I(me,!0)}function I(me,Oe){Oe!==!0&&g.value!==null&&g.value.focus(),p(me),Ht(me)}function R(){d("afterShow")}function $(){d("afterHide")}function E(){y===void 0&&(y=rs()),n.value===!0&&(Kt[m.group]=y);const me=Ne(n,Ge=>{Ge===!0?Kt[m.group]=y:Kt[m.group]===y&&delete Kt[m.group]}),Oe=Ne(()=>Kt[m.group],(Ge,ue)=>{ue===y&&Ge!==void 0&&Ge!==y&&u()});_=()=>{me(),Oe(),Kt[m.group]===y&&delete Kt[m.group],_=void 0}}function N(){const me={class:[`q-focusable relative-position cursor-pointer${m.denseToggle===!0&&m.switchToggleSide===!0?" items-end":""}`,m.expandIconClass],side:m.switchToggleSide!==!0,avatar:m.switchToggleSide},Oe=[qe(P,{class:"q-expansion-item__toggle-icon"+(m.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:C.value})];return B.value===!0&&(Object.assign(me,{tabindex:0,...z.value,onClick:I,onKeyup:V}),Oe.unshift(qe("div",{ref:g,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),qe(F,me,()=>Oe)}function S(){let me;return s.header!==void 0?me=[].concat(s.header(O.value)):(me=[qe(F,()=>[qe(we,{lines:m.labelLines},()=>m.label||""),m.caption?qe(we,{lines:m.captionLines,caption:!0},()=>m.caption):null])],m.icon&&me[m.switchToggleSide===!0?"push":"unshift"](qe(F,{side:m.switchToggleSide===!0,avatar:m.switchToggleSide!==!0},()=>qe(P,{name:m.icon})))),m.disable!==!0&&m.hideExpandIcon!==!0&&me[m.switchToggleSide===!0?"unshift":"push"](N()),me}function A(){const me={ref:"item",style:m.headerStyle,class:m.headerClass,dark:i.value,disable:m.disable,dense:m.dense,insetLevel:m.headerInsetLevel};return Y.value===!0&&(me.clickable=!0,me.onClick=j,Object.assign(me,w.value===!0?M.value:z.value)),qe(oe,me,S)}function le(){return te(qe("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:x.value,id:v.value},Nt(s.default)),[[Zl,n.value]])}function re(){const me=[A(),qe(ES,{duration:m.duration,onShow:R,onHide:$},le)];return m.expandSeparator===!0&&me.push(qe(Ae,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),qe(Ae,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),me}return m.group!==void 0&&E(),fa(()=>{_!==void 0&&_()}),()=>qe("div",{class:q.value},[qe("div",{class:"q-expansion-item__container relative-position"},re())])}}),AS={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},NS={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},MS={class:"text-bold"},BS={class:"text-grey-8 text-caption"},zS={class:"absolute-bottom text-grey-6 q-pa-md"},Ca="amanah-pos.layout.left-drawer-open",FS={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(m,{expose:s}){const d=xe(),o=be(),i=T(JSON.parse(localStorage.getItem(Ca))),n=T(!1),g=()=>i.value=!i.value,v=()=>{i.value=!1};return Ne(i,f=>{localStorage.setItem(Ca,f)}),he(()=>{i.value=JSON.parse(localStorage.getItem(Ca)),d.screen.lt.md&&(i.value=!1)}),s({hideDrawer:v}),(f,u)=>(c(),D(fs,{view:"lHh LpR lFf"},{default:l(()=>[e(is,null,{default:l(()=>[e(it,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:l(()=>[m.showDrawerButton&&!i.value?(c(),D(U,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:g},{default:l(()=>[e(P,{class:"material-symbols-outlined"},{default:l(()=>u[32]||(u[32]=[b("dock_to_right")])),_:1})]),_:1})):k("",!0),It(f.$slots,"left-button",{},void 0,!0),e(ds,{style:{"font-size":"16px"}},{default:l(()=>[It(f.$slots,"title",{},()=>[b(r(f.$config.APP_NAME),1)],!0)]),_:3}),It(f.$slots,"right-button",{},void 0,!0)]),_:3}),It(f.$slots,"header",{},void 0,!0)]),_:3}),e(us,{breakpoint:768,modelValue:i.value,"onUpdate:modelValue":u[31]||(u[31]=p=>i.value=p),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:l(()=>[t("div",AS,[t("div",NS,[e(ms,{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=p=>n.value=p),class:Ce(["profile-btn text-bold",{"profile-btn-active":n.value}]),flat:"",label:a(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:l(()=>[e(Le,{id:"profile-btn-popup",style:{color:"#444"}},{default:l(()=>[e(oe,null,{default:l(()=>[e(ta,{style:{"margin-left":"-15px"}},{default:l(()=>[e(P,{name:"person"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[t("div",MS,r(a(o).props.auth.user.name),1),t("div",BS,[b(r(f.$CONSTANTS.USER_TYPES[a(o).props.auth.user.type])+" ",1),u[33]||(u[33]=t("br",null,null,-1)),b(" "+r(a(o).props.company.name),1)])]),_:1})]),_:1})]),_:1}),e(Ae),te((c(),D(oe,{class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/profile"),onClick:u[0]||(u[0]=p=>a(ee).get(f.route("admin.user-profile.edit")))},{default:l(()=>[e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[e(P,{name:"manage_accounts",class:"q-mr-sm"}),u[34]||(u[34]=b(" Pengaturan Pribadi"))]),_:1})]),_:1})]),_:1},8,["active"])),[[pe],[ie]]),te((c(),D(oe,{clickable:"",style:{color:"inherit"},href:f.route("admin.auth.logout")},{default:l(()=>[e(F,null,{default:l(()=>[e(we,null,{default:l(()=>[e(P,{name:"logout",class:"q-mr-sm"}),u[35]||(u[35]=b(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[pe],[ie]])]),_:1})]),_:1},8,["modelValue","label","class"]),i.value?(c(),D(U,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:g},{default:l(()=>[e(P,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(cs,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:l(()=>[e(Le,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:l(()=>[te((c(),D(oe,{clickable:"",active:f.$page.url.startsWith("/admin/dashboard"),onClick:u[2]||(u[2]=p=>a(ee).get(f.route("admin.dashboard")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"dashboard"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[36]||(u[36]=[b("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]),e(Dt,{icon:"shortcut",label:"Buat Baru"},{default:l(()=>[f.$can("admin.sales-order.add")?te((c(),D(oe,{key:0,class:"subnav",clickable:"",onClick:u[3]||(u[3]=p=>a(ee).get(f.route("admin.sales-order.add")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"add_shopping_cart"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[37]||(u[37]=[b("Penjualan")])),_:1})]),_:1})]),_:1})),[[ie]]):k("",!0),f.$can("admin.customer.add")?te((c(),D(oe,{key:1,class:"subnav",clickable:"",onClick:u[4]||(u[4]=p=>a(ee).get(f.route("admin.customer.add")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"group_add"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[38]||(u[38]=[b("Pelanggan")])),_:1})]),_:1})]),_:1})),[[ie]]):k("",!0)]),_:1}),f.$can("admin.sales-order.index")||f.$can("admin.customer.index")||f.$can("admin.sales-order-return.index")?(c(),D(Dt,{key:0,icon:"storefront",label:"Penjualan","default-opened":f.$page.url.startsWith("/admin/sales-orders")||f.$page.url.startsWith("/admin/sales-order-returns")||f.$page.url.startsWith("/admin/customers")},{default:l(()=>[f.$can("admin.sales-order.index")?te((c(),D(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/sales-orders"),onClick:u[5]||(u[5]=p=>a(ee).get(f.route("admin.sales-order.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"add_shopping_cart"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[39]||(u[39]=[b("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.sales-order-return.index")?te((c(),D(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/sales-order-returns"),onClick:u[6]||(u[6]=p=>a(ee).get(f.route("admin.sales-order-return.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"remove_shopping_cart"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[40]||(u[40]=[b("Retur Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.customer.index")?te((c(),D(oe,{key:2,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/customers"),onClick:u[7]||(u[7]=p=>a(ee).get(f.route("admin.customer.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"people"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[41]||(u[41]=[b("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.purchase-order.index")||f.$can("admin.supplier.index")||f.$can("admin.purchase-order-return.index")?(c(),D(Dt,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":f.$page.url.startsWith("/admin/purchase-orders")||f.$page.url.startsWith("/admin/purchase-order-returns")||f.$page.url.startsWith("/admin/suppliers")},{default:l(()=>[f.$can("admin.purchase-order.index")?te((c(),D(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/purchase-orders"),onClick:u[8]||(u[8]=p=>a(ee).get(f.route("admin.purchase-order.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"add_shopping_cart"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[42]||(u[42]=[b("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.purchase-order-return.index")?te((c(),D(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/purchase-order-returns"),onClick:u[9]||(u[9]=p=>a(ee).get(f.route("admin.purchase-order-return.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"remove_shopping_cart"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[43]||(u[43]=[b("Retur Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.supplier.index")?te((c(),D(oe,{key:2,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/suppliers"),onClick:u[10]||(u[10]=p=>a(ee).get(f.route("admin.supplier.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"people"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[44]||(u[44]=[b("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.product.index")||f.$can("admin.product-category.index")||f.$can("admin.stock-adjustment.index")||f.$can("admin.stock-movement.index")?(c(),D(Dt,{key:2,icon:"inventory_2",label:"Inventori","default-opened":f.$page.url.startsWith("/admin/products")||f.$page.url.startsWith("/admin/product-categories")||f.$page.url.startsWith("/admin/stock-adjustments")||f.$page.url.startsWith("/admin/stock-movements")},{default:l(()=>[f.$can("admin.stock-adjustment.index")?te((c(),D(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/stock-adjustments"),onClick:u[11]||(u[11]=p=>a(ee).get(f.route("admin.stock-adjustment.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"swap_vert"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[45]||(u[45]=[b("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.stock-movement.index")?te((c(),D(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/stock-movements"),onClick:u[12]||(u[12]=p=>a(ee).get(f.route("admin.stock-movement.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"timeline"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[46]||(u[46]=[b("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.product.index")?te((c(),D(oe,{key:2,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/products"),onClick:u[13]||(u[13]=p=>a(ee).get(f.route("admin.product.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"box"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[47]||(u[47]=[b("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.product-category.index")?te((c(),D(oe,{key:3,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/product-categories"),onClick:u[14]||(u[14]=p=>a(ee).get(f.route("admin.product-category.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"category"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[48]||(u[48]=[b("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.cashier-session.index")||f.$can("admin.cashier-terminal.index")?(c(),D(Dt,{key:3,icon:"point_of_sale",label:"Kasir","default-opened":f.$page.url.startsWith("/admin/cashier-terminals")||f.$page.url.startsWith("/admin/cashier-session")},{default:l(()=>[f.$can("admin.cashier-session.index")?te((c(),D(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/cashier-sessions"),onClick:u[15]||(u[15]=p=>a(ee).get(f.route("admin.cashier-session.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"tv_signin"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[49]||(u[49]=[b("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.cashier-terminal.index")?te((c(),D(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/cashier-terminals"),onClick:u[16]||(u[16]=p=>a(ee).get(f.route("admin.cashier-terminal.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"point_of_sale"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[50]||(u[50]=[b("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.customer-wallet-transaction-confirmation.index")||f.$can("admin.customer-wallet-transaction.index")?(c(),D(Dt,{key:4,icon:"wallet",label:"Wallet","default-opened":f.$page.url.startsWith("/admin/customer-wallet-transactions")||f.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:l(()=>[f.$can("admin.customer-wallet-transaction-confirmation.index")?te((c(),D(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:u[17]||(u[17]=p=>a(ee).get(f.route("admin.customer-wallet-transaction-confirmation.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"add_task"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[51]||(u[51]=[b("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.customer-wallet-transaction.index")?te((c(),D(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:u[18]||(u[18]=p=>a(ee).get(f.route("admin.customer-wallet-transaction.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"moving"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[52]||(u[52]=[b("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.finance-transaction.index")||f.$can("admin.finance-account.index")?(c(),D(Dt,{key:5,icon:"finance",label:"Keuangan","default-opened":f.$page.url.startsWith("/admin/finance-accounts")||f.$page.url.startsWith("/admin/finance-transactions")},{default:l(()=>[f.$can("admin.finance-transaction.index")?te((c(),D(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/finance-transactions"),onClick:u[19]||(u[19]=p=>a(ee).get(f.route("admin.finance-transaction.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"moving"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[53]||(u[53]=[b("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.finance-account.index")?te((c(),D(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/finance-accounts"),onClick:u[20]||(u[20]=p=>a(ee).get(f.route("admin.finance-account.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"groups_2"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[54]||(u[54]=[b("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),f.$can("admin.operational-cost.index")||f.$can("admin.operational-cost-category.index")?(c(),D(Dt,{key:6,icon:"paid",label:"Operasional","default-opened":f.$page.url.startsWith("/admin/operational-costs")||f.$page.url.startsWith("/admin/operational-cost-categories")},{default:l(()=>[f.$can("admin.operational-cost.index")?te((c(),D(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/operational-costs"),onClick:u[21]||(u[21]=p=>a(ee).get(f.route("admin.operational-cost.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"request_quote"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[55]||(u[55]=[b("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.operational-cost-category.index")?te((c(),D(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/operational-cost-categories"),onClick:u[22]||(u[22]=p=>a(ee).get(f.route("admin.operational-cost-category.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"category"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[56]||(u[56]=[b("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(Dt,{icon:"settings",label:"Pengaturan","default-opened":f.$page.url.startsWith("/admin/settings")},{default:l(()=>[f.$can("admin.user.index")?te((c(),D(oe,{key:0,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/users"),onClick:u[23]||(u[23]=p=>a(ee).get(f.route("admin.user.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"person"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[57]||(u[57]=[b("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.user-role.index")?te((c(),D(oe,{key:1,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/user-roles"),onClick:u[24]||(u[24]=p=>a(ee).get(f.route("admin.user-role.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"group"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[58]||(u[58]=[b("Role Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.tax-scheme.index")?te((c(),D(oe,{key:2,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/tax-schemes"),onClick:u[25]||(u[25]=p=>a(ee).get(f.route("admin.tax-scheme.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"credit_card_gear"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[59]||(u[59]=[b("Skema Pajak")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.pos-settings.edit")?te((c(),D(oe,{key:3,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/pos"),onClick:u[26]||(u[26]=p=>a(ee).get(f.route("admin.pos-settings.edit")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"point_of_sale"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[60]||(u[60]=[b("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.company-profile.edit")?te((c(),D(oe,{key:4,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/company-profile"),onClick:u[27]||(u[27]=p=>a(ee).get(f.route("admin.company-profile.edit")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"apartment"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[61]||(u[61]=[b("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.user-activity-log.index")?te((c(),D(oe,{key:5,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:u[28]||(u[28]=p=>a(ee).get(f.route("admin.user-activity-log.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"article"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[62]||(u[62]=[b("Log Aktivitas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),f.$can("admin.database-settings.index")?te((c(),D(oe,{key:6,class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/database"),onClick:u[29]||(u[29]=p=>a(ee).get(f.route("admin.database-settings.index")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"database"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[63]||(u[63]=[b("Database")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),te((c(),D(oe,{class:"subnav",clickable:"",active:f.$page.url.startsWith("/admin/settings/system-information"),onClick:u[30]||(u[30]=p=>a(ee).get(f.route("admin.settings.system-information")))},{default:l(()=>[e(F,{avatar:""},{default:l(()=>[e(P,{name:"info"})]),_:1}),e(F,null,{default:l(()=>[e(we,null,{default:l(()=>u[64]||(u[64]=[b("Informasi Sistem")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]])]),_:1},8,["default-opened"]),t("div",zS,"  2025 - "+r(f.$config.APP_NAME+" v"+f.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ps,{class:"bg-grey-1"},{default:l(()=>[e(Te,null,{default:l(()=>[It(f.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),It(f.$slots,"footer",{},void 0,!0)]),_:3}))}},LS=wt(FS,[["__scopeId","data-v-b836bcbf"]]),KS={__name:"GuestLayout",setup(m){return(s,d)=>(c(),D(gs,null,{default:l(()=>[It(s.$slots,"default")]),_:3}))}};bs({onRegistered(m){console.log("Admin Service Worker registered:",m)}});vs({layouts:{authenticated:LS,guest:KS},pagesGlob:Object.assign({"./pages/_examples/Autocomplete1.vue":ws,"./pages/auth/Login.vue":Ts,"./pages/cashier-session/Close.vue":Es,"./pages/cashier-session/Detail.vue":Vr,"./pages/cashier-session/Index.vue":Or,"./pages/cashier-session/Open.vue":Er,"./pages/cashier-session/detail/FinanceTransactionTab.vue":wr,"./pages/cashier-session/detail/MainInfoTab.vue":sr,"./pages/cashier-session/detail/SalesOrderTab.vue":gr,"./pages/cashier-terminal/Detail.vue":Gr,"./pages/cashier-terminal/Editor.vue":ai,"./pages/cashier-terminal/Index.vue":ii,"./pages/cashier-terminal/detail/MainInfoTab.vue":Lr,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":Hr,"./pages/customer-wallet-transaction-confirmation/Detail.vue":_i,"./pages/customer-wallet-transaction-confirmation/Index.vue":Si,"./pages/customer-wallet-transaction/Adjustment.vue":Ci,"./pages/customer-wallet-transaction/Detail.vue":Ni,"./pages/customer-wallet-transaction/Editor.vue":Fi,"./pages/customer-wallet-transaction/Index.vue":Gi,"./pages/customer/Detail.vue":Bd,"./pages/customer/Editor.vue":Kd,"./pages/customer/Import.vue":Xd,"./pages/customer/Index.vue":ru,"./pages/customer/detail/MainInfoTab.vue":nd,"./pages/customer/detail/OrderHistoryTab.vue":pd,"./pages/customer/detail/WalletHistoryTab.vue":id,"./pages/dashboard/Index.vue":Cu,"./pages/dashboard/cards/ActualSummaryCard.vue":fu,"./pages/dashboard/cards/ChartCard.vue":_u,"./pages/dashboard/cards/SummaryCard.vue":Au,"./pages/dashboard/cards/TopCard.vue":$u,"./pages/finance-account/Detail.vue":Ju,"./pages/finance-account/Editor.vue":tm,"./pages/finance-account/Index.vue":fm,"./pages/finance-account/detail/HistoryTab.vue":Lu,"./pages/finance-account/detail/MainInfoTab.vue":Mu,"./pages/finance-transaction/Detail.vue":Sm,"./pages/finance-transaction/Editor.vue":Tm,"./pages/finance-transaction/Index.vue":jm,"./pages/operational-cost-category/Editor.vue":Bm,"./pages/operational-cost-category/Index.vue":Wm,"./pages/operational-cost/Detail.vue":nc,"./pages/operational-cost/Editor.vue":mc,"./pages/operational-cost/Index.vue":kc,"./pages/product-category/Editor.vue":xc,"./pages/product-category/Index.vue":Rc,"./pages/product/Detail.vue":ep,"./pages/product/Editor.vue":rp,"./pages/product/Import.vue":mp,"./pages/product/Index.vue":xp,"./pages/product/SendPriceList.vue":Op,"./pages/product/SendPriceList2.vue":Np,"./pages/product/detail/MainInfoTab.vue":Lc,"./pages/product/detail/StockHistoryTab.vue":Yc,"./pages/purchase-order-return/Create.vue":Fp,"./pages/purchase-order-return/Detail.vue":zf,"./pages/purchase-order-return/Editor.vue":Ug,"./pages/purchase-order-return/Index.vue":Wg,"./pages/purchase-order-return/detail/MainInfoTab.vue":ff,"./pages/purchase-order-return/detail/PaymentDialog.vue":wf,"./pages/purchase-order-return/detail/RefundTab.vue":Af,"./pages/purchase-order-return/editor/HelpDialog.vue":tg,"./pages/purchase-order-return/editor/ItemEditorDialog.vue":Jf,"./pages/purchase-order-return/editor/ItemsListTable.vue":Yf,"./pages/purchase-order-return/editor/OrderInfoDialog.vue":ng,"./pages/purchase-order-return/editor/PaymentDialog.vue":m1,"./pages/purchase-order-return/editor/SuccessDialog.vue":S1,"./pages/purchase-order/Detail.vue":Sb,"./pages/purchase-order/Editor.vue":Mv,"./pages/purchase-order/Index.vue":Zv,"./pages/purchase-order/detail/InvoiceTab.vue":Q1,"./pages/purchase-order/detail/PaymentDialog.vue":lb,"./pages/purchase-order/detail/PaymentTab.vue":kb,"./pages/purchase-order/editor/HelpDialog.vue":Gb,"./pages/purchase-order/editor/ItemEditorDialog.vue":Qb,"./pages/purchase-order/editor/ItemsListTable.vue":Pb,"./pages/purchase-order/editor/OrderInfoDialog.vue":tv,"./pages/purchase-order/editor/PaymentDialog.vue":Hb,"./pages/purchase-order/editor/SuccessDialog.vue":fv,"./pages/sales-order-return/Create.vue":ly,"./pages/sales-order-return/Detail.vue":t_,"./pages/sales-order-return/Editor.vue":z_,"./pages/sales-order-return/Index.vue":lk,"./pages/sales-order-return/detail/MainInfoTab.vue":qy,"./pages/sales-order-return/detail/PaymentDialog.vue":Iy,"./pages/sales-order-return/detail/RefundTab.vue":Gy,"./pages/sales-order-return/editor/HelpDialog.vue":c_,"./pages/sales-order-return/editor/ItemEditorDialog.vue":d_,"./pages/sales-order-return/editor/ItemsListTable.vue":s_,"./pages/sales-order-return/editor/OrderInfoDialog.vue":b_,"./pages/sales-order-return/editor/PaymentDialog.vue":kk,"./pages/sales-order-return/editor/SuccessDialog.vue":Ik,"./pages/sales-order/Detail.vue":Mw,"./pages/sales-order/Editor.vue":a2,"./pages/sales-order/Index.vue":_2,"./pages/sales-order/detail/InvoiceTab.vue":mw,"./pages/sales-order/detail/PaymentDialog.vue":_w,"./pages/sales-order/detail/PaymentTab.vue":Ew,"./pages/sales-order/editor/HelpDialog.vue":c0,"./pages/sales-order/editor/ItemEditorDialog.vue":u0,"./pages/sales-order/editor/ItemsListTable.vue":Kw,"./pages/sales-order/editor/OrderInfoDialog.vue":b0,"./pages/sales-order/editor/PaymentDialog.vue":r0,"./pages/sales-order/editor/SuccessDialog.vue":T0,"./pages/settings/SystemInformation.vue":S2,"./pages/settings/company-profile/Edit.vue":R2,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":V2,"./pages/settings/database/Index.vue":E2,"./pages/settings/pos/Edit.vue":B2,"./pages/settings/user-activity-log/Detail.vue":qh,"./pages/settings/user-activity-log/Index.vue":Ih,"./pages/settings/user-profile/Edit.vue":Bh,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":Uh,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":Eh,"./pages/settings/user-role/Detail.vue":Zh,"./pages/settings/user-role/Editor.vue":n$,"./pages/settings/user-role/Index.vue":m$,"./pages/settings/user/Detail.vue":$$,"./pages/settings/user/Editor.vue":T$,"./pages/settings/user/Index.vue":E$,"./pages/stock-adjustment/Create.vue":Y$,"./pages/stock-adjustment/Detail.vue":ox,"./pages/stock-adjustment/Editor.vue":mx,"./pages/stock-adjustment/Index.vue":$x,"./pages/stock-movement/Index.vue":Cx,"./pages/supplier/Detail.vue":Qx,"./pages/supplier/Editor.vue":rS,"./pages/supplier/Index.vue":gS,"./pages/supplier/detail/MainInfoTab.vue":Ax,"./pages/supplier/detail/OrderHistoryTab.vue":Fx,"./pages/tax-scheme/Editor.vue":$S,"./pages/tax-scheme/Index.vue":US})});
