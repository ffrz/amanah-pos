import{r as C,a as X,c as D,o as d,w as l,b as t,d as e,e as w,f as k,Q as ce,t as r,u as a,g as K,h as Oe,i as sa,T as Qe,j as gn,k as ge,l as Te,m as Je,n as J,p as nt,q as fe,s as le,v,x as aa,y as T,z as ne,A as E,B as at,F as G,C as We,D as ae,E as yt,G as vt,H as ee,I as bn,J as xa,K as Ql,L as Tt,M as Z,N as ra,O as we,R as ie,P as Ce,S as Jl,U as vn,V as yn,W as Yt,X as Et,Y as Sa,Z as Pa,_ as _n,$ as Me,a0 as kn,a1 as wn,a2 as hn,a3 as Bt,a4 as $n,a5 as xn,a6 as Va,a7 as Zt,a8 as qa,a9 as Ba,aa as Sn,ab as pa,ac as Fa,ad as Vn,ae as za,af as qn,ag as Gl,ah as Cn,ai as Tn,aj as Pn,ak as Oa,al as Ia,am as Rn,an as Nt,ao as ve,ap as Ie,aq as Le,ar as Ke,as as xe,at as Pe,au as W,av as $e,aw as bt,ax as Ye,ay as Ue,az as ea,aA as Ve,aB as Ae,aC as et,aD as Be,aE as st,aF as He,aG as Ze,aH as ze,aI as oe,aJ as z,aK as pe,aL as ot,aM as Ee,aN as ia,aO as ga,aP as zt,aQ as Lt,aR as Pt,aS as Rt,aT as tt,aU as La,aV as Gt,aW as ba,aX as la,aY as Kt,aZ as Ua,a_ as da,a$ as $t,b0 as oa,b1 as On,b2 as In,b3 as Xl,b4 as Un,b5 as Dn,b6 as jn,b7 as En,b8 as Ka,b9 as An,ba as Mn,bb as Nn,bc as Bn,bd as Zl,be as Ne,bf as _t,bg as Fn,bh as Ha,bi as zn,bj as Ln,bk as Kn,bl as Hn,bm as Yn,bn as Wn,bo as Qn,bp as he,bq as na,br as rt,bs as Jn,bt as Gn,bu as Xn,bv as Zn,bw as es,bx as ts,by as eo,bz as as,bA as qt,bB as it,bC as Da,bD as Ya,bE as ls,bF as lt,bG as Qt,bH as to,bI as ta,bJ as wt,bK as ao,bL as os,bM as gt,bN as pt,bO as ft,bP as xt,bQ as va,bR as Ft,bS as Wa,bT as ns,bU as ss,bV as rs,bW as lo,bX as is,bY as ds,bZ as us,b_ as ms,b$ as cs,c0 as ps,c1 as fs,c2 as gs,c3 as bs,c4 as vs,c5 as ys,c6 as _s,c7 as ks}from"./virtual_pwa-register-Dqi801uO.js";const ws={class:"q-ma-md"},hs={key:0},$s={__name:"Autocomplete1",setup(c){const s=C(null),u=C([]);let o=null;const i=(n,g)=>{if(n.length<2){g(()=>{u.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Oe.get(`/web-api/customers?q=${n}`).then(b=>{const p=b.data.data.map(m=>({label:`${m.code} - ${m.name}`,value:m.id,data:m}));g(()=>{u.value=p})}).catch(b=>{console.error("Gagal mengambil data pelanggan:",b),g(()=>{u.value=[]})})})};return(n,g)=>{const b=X("guest-layout");return d(),D(b,null,{default:l(()=>[t("div",ws,[e(ce,{class:"full-width",modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=p=>s.value=p),"use-input":"",label:"Cari Pelanggan",options:u.value,onFilter:i,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),s.value?(d(),w("div",hs," Saldo: Rp. "+r(a(K)(s.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},xs=Object.freeze(Object.defineProperty({__proto__:null,default:$s},Symbol.toStringTag,{value:"Module"})),Ss={style:{"margin-left":"-10px"}},ya={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(c,{emit:s}){const u=c,o=s;return(i,n)=>(d(),w("div",Ss,[e(sa,{class:"full-width q-pl-none","model-value":u.modelValue,disable:u.disable,label:u.label,"onUpdate:modelValue":n[0]||(n[0]=g=>o("update:modelValue",g))},null,8,["model-value","disable","label"])]))}};function Ra(c){return c instanceof File||c instanceof Blob||c instanceof FileList&&c.length>0||c instanceof FormData&&Array.from(c.values()).some(s=>Ra(s))||typeof c=="object"&&c!==null&&Object.values(c).some(s=>Ra(s))}function Vs(c,s=null){const u=Qe(c,s);let o=g=>g,i=null;const n={transform:g=>b=>(o=b,g),submit:g=>(b,p,m={})=>{u.wasSuccessful=!1,u.recentlySuccessful=!1,u.clearErrors(),clearTimeout(i),m.onBefore&&m.onBefore(),u.processing=!0,m.onStart&&m.onStart();const f=o(u.data());axios[b](p,f,{headers:{"Content-Type":Ra(f)?"multipart/form-data":"application/json"},onUploadProgress:y=>{u.progress=y,m.onProgress&&m.onProgress(y)}}).then(y=>{u.processing=!1,u.progress=null,u.clearErrors(),u.wasSuccessful=!0,u.recentlySuccessful=!0,i=setTimeout(()=>u.recentlySuccessful=!1,2e3),m.onSuccess&&m.onSuccess(y.data),u.defaults(gn(u.data())),u.isDirty=!1}).catch(y=>{var _;u.processing=!1,u.progress=null,u.clearErrors(),((_=y.response)==null?void 0:_.status)===422&&Object.keys(y.response.data.errors).forEach(V=>{u.setError(V,y.response.data.errors[V][0])}),m.onError&&m.onError(y)}).finally(()=>{u.processing=!1,u.progress=null,m.onFinish&&m.onFinish()})}};return new Proxy(u,{get:(g,b,p)=>Object.keys(n).indexOf(b)<0?g[b]:n[b](p)})}const qs={class:"column"},Cs={class:"row"},Ts={class:"q-my-sm text-grey-7 text-subtitle1 text-bold"},Ps={class:"flex justify-center"},Rs={__name:"Login",setup(c){let s=Vs({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const u=ge();console.log(u.props.data);const o=()=>nt({form:s,url:route("admin.auth.login"),onSuccess:()=>{s.processing=!0,window.location.href=route("admin.dashboard")}}),i=C(!1);return(n,g)=>{const b=X("i-head"),p=X("guest-layout");return d(),w(G,null,[e(b,{title:"Login"}),e(p,null,{default:l(()=>[e(Te,{class:"row justify-center items-center"},{default:l(()=>[t("div",qs,[t("div",Cs,[e(Je,{class:"q-gutter-md",onSubmit:J(o,["prevent"])},{default:l(()=>[e(fe,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:l(()=>[e(le,{class:"text-center"},{default:l(()=>[t("div",Ts,[v(" Login ke "+r(a(u).props.company.name)+" ",1),t("div",Ps,[e(aa,{size:"100px",class:"q-my-none"},{default:l(()=>[e(T,{name:"badge",color:"grey"})]),_:1})])]),e(ne,{modelValue:a(s).username,"onUpdate:modelValue":g[0]||(g[0]=m=>a(s).username=m),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!a(s).errors.username,autocomplete:"username","error-message":a(s).errors.username,disable:a(s).processing,rules:[m=>m&&m.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:l(()=>[e(T,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(ne,{modelValue:a(s).password,"onUpdate:modelValue":g[2]||(g[2]=m=>a(s).password=m),type:i.value?"text":"password",label:"Kata Sandi",error:!!a(s).errors.password,autocomplete:"current-password","error-message":a(s).errors.password,"lazy-rules":"",disable:a(s).processing,rules:[m=>m&&m.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:l(()=>[e(E,{dense:"",flat:"",round:"",onClick:g[1]||(g[1]=m=>i.value=!i.value)},{default:l(()=>[e(T,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(ya,{class:"q-mt-sm",modelValue:a(s).remember,"onUpdate:modelValue":g[3]||(g[3]=m=>a(s).remember=m),disable:a(s).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(at,null,{default:l(()=>[e(E,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:a(s).processing,loading:a(s).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Os=Object.freeze(Object.defineProperty({__proto__:null,default:Rs},Symbol.toStringTag,{value:"Module"})),Is={class:"q-gutter-sm"},Us={class:"col col-md-6 q-pa-xs"},Ds={class:"detail q-mt-md"},js={key:0},Es={class:"text-bold"},Qa="Tutup Sesi Kasir",As={__name:"Close",setup(c){const s=ge(),u=Qe({closing_notes:s.props.data.closing_notes,closing_balance:parseFloat(s.props.data.closing_balance)}),o=()=>nt({form:u,url:route("admin.cashier-session.close",{id:s.props.data.id})});return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return d(),w(G,null,[e(g,{title:Qa}),e(b,null,{title:l(()=>[v(r(Qa))]),"left-button":l(()=>[t("div",Is,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Us,[e(Je,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":n[1]||(n[1]=p=>a(u).id=p)},null,512),[[yt,a(u).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[t("table",Ds,[t("tbody",null,[t("tr",null,[n[4]||(n[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),n[5]||(n[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.id),1)]),t("tr",null,[n[6]||(n[6]=t("td",null,"Terminal",-1)),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.cashier_terminal.name),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"Kasir",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.user.username)+" - "+r(a(s).props.data.user.name),1)]),t("tr",null,[n[10]||(n[10]=t("td",null,"Saldo Awal",-1)),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.opening_balance)),1)]),a(s).props.data.opening_notes?(d(),w("tr",js,[n[12]||(n[12]=t("td",null,"Catatan Buka",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.opening_notes),1)])):k("",!0),t("tr",null,[n[14]||(n[14]=t("td",null,"Total Penjualan",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_sales)),1)]),t("tr",null,[n[16]||(n[16]=t("td",null,"Total Pemasukan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_income)),1)]),t("tr",null,[n[18]||(n[18]=t("td",null,"Total Pengeluaran",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_expense)),1)]),t("tr",null,[n[21]||(n[21]=t("td",null,"Saldo Akhir",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,[t("div",Es,r(a(vt)(a(s).props.data.closing_balance)),1),n[20]||(n[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(ne,{modelValue:a(u).closing_notes,"onUpdate:modelValue":n[2]||(n[2]=p=>a(u).closing_notes=p),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(u).processing,error:!!a(u).errors.closing_notes,"error-message":a(u).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:a(u).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:a(u).processing,onClick:n[3]||(n[3]=p=>a(ee).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ms=Object.freeze(Object.defineProperty({__proto__:null,default:As},Symbol.toStringTag,{value:"Module"}));let Ns=0;const Bs=["click","keydown"],Fs={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Ns++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function zs(c,s,u,o){const i=bn(Ql,xa);if(i===xa)return console.error("QTab/QRouteTab component needs to be child of QTabs"),xa;const{proxy:n}=Tt(),g=C(null),b=C(null),p=C(null),m=Z(()=>c.disable===!0||c.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},c.ripple===!0?{}:c.ripple)),f=Z(()=>i.currentModel.value===c.name),y=Z(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(f.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(c.icon&&c.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(c.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(c.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),_=Z(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(c.contentClass!==void 0?` ${c.contentClass}`:"")),V=Z(()=>c.disable===!0||i.hasFocus.value===!0||f.value===!1&&i.hasActiveTab.value===!0?-1:c.tabindex||0);function q(U,I){if(I!==!0&&g.value!==null&&g.value.focus(),c.disable!==!0){i.updateModel({name:c.name}),u("click",U);return}}function x(U){vn(U,[13,32])?q(U,!0):yn(U)!==!0&&U.keyCode>=35&&U.keyCode<=40&&U.altKey!==!0&&U.metaKey!==!0&&i.onKbdNavigate(U.keyCode,n.$el)===!0&&Yt(U),u("keydown",U)}function R(){const U=i.tabProps.value.narrowIndicator,I=[],F=Ce("div",{ref:p,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});c.icon!==void 0&&I.push(Ce(T,{class:"q-tab__icon",name:c.icon})),c.label!==void 0&&I.push(Ce("div",{class:"q-tab__label"},c.label)),c.alert!==!1&&I.push(c.alertIcon!==void 0?Ce(T,{class:"q-tab__alert-icon",color:c.alert!==!0?c.alert:void 0,name:c.alertIcon}):Ce("div",{class:"q-tab__alert"+(c.alert!==!0?` text-${c.alert}`:"")})),U===!0&&I.push(F);const N=[Ce("div",{class:"q-focus-helper",tabindex:-1,ref:g}),Ce("div",{class:_.value},Jl(s.default,I))];return U===!1&&N.push(F),N}const H={name:Z(()=>c.name),rootRef:b,tabIndicatorRef:p,routeData:o};ra(()=>{i.unregisterTab(H)}),we(()=>{i.registerTab(H)});function O(U,I){const F={ref:b,class:y.value,tabindex:V.value,role:"tab","aria-selected":f.value===!0?"true":"false","aria-disabled":c.disable===!0?"true":void 0,onClick:q,onKeydown:x,...I};return ae(Ce(U,F,R()),[[ie,m.value]])}return{renderTab:O,$tabs:i}}const dt=Et({name:"QTab",props:Fs,emits:Bs,setup(c,{slots:s,emit:u}){const{renderTab:o}=zs(c,s,u);return()=>o("div")}});function Ls(c,s,u){const o=u===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${c?` text-${c}`:""}`}const Ks=["left","center","right","justify"],Ot=Et({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:c=>Ks.includes(c)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(c,{slots:s,emit:u}){const{proxy:o}=Tt(),{$q:i}=o,{registerTick:n}=Sa(),{registerTick:g}=Sa(),{registerTick:b}=Sa(),{registerTimeout:p,removeTimeout:m}=Pa(),{registerTimeout:f,removeTimeout:y}=Pa(),_=C(null),V=C(null),q=C(c.modelValue),x=C(!1),R=C(!0),H=C(!1),O=C(!1),U=[],I=C(0),F=C(!1);let N=null,h=null,j;const P=Z(()=>({activeClass:c.activeClass,activeColor:c.activeColor,activeBgColor:c.activeBgColor,indicatorClass:Ls(c.indicatorColor,c.switchIndicator,c.vertical),narrowIndicator:c.narrowIndicator,inlineLabel:c.inlineLabel,noCaps:c.noCaps})),$=Z(()=>{const be=I.value,Se=q.value;for(let De=0;De<be;De++)if(U[De].name.value===Se)return!0;return!1}),A=Z(()=>`q-tabs__content--align-${x.value===!0?"left":O.value===!0?"justify":c.align}`),B=Z(()=>`q-tabs row no-wrap items-center q-tabs--${x.value===!0?"":"not-"}scrollable q-tabs--${c.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${c.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${c.mobileArrows===!0?"":"out"}-arrows`+(c.dense===!0?" q-tabs--dense":"")+(c.shrink===!0?" col-shrink":"")+(c.stretch===!0?" self-stretch":"")),S=Z(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+A.value+(c.contentClass!==void 0?` ${c.contentClass}`:"")),M=Z(()=>c.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),te=Z(()=>c.vertical!==!0&&i.lang.rtl===!0),ue=Z(()=>_n===!1&&te.value===!0);Me(te,ye),Me(()=>c.modelValue,be=>{re({name:be,setCurrent:!0,skipEmit:!0})}),Me(()=>c.outsideArrows,Re);function re({name:be,setCurrent:Se,skipEmit:De}){q.value!==be&&(De!==!0&&c["onUpdate:modelValue"]!==void 0&&u("update:modelValue",be),(Se===!0||c["onUpdate:modelValue"]===void 0)&&(me(q.value,be),q.value=be))}function Re(){n(()=>{Ge({width:_.value.offsetWidth,height:_.value.offsetHeight})})}function Ge(be){if(M.value===void 0||V.value===null)return;const Se=be[M.value.container],De=Math.min(V.value[M.value.scroll],Array.prototype.reduce.call(V.value.children,(ct,Xe)=>ct+(Xe[M.value.content]||0),0)),mt=Se>0&&De>Se;x.value=mt,mt===!0&&g(ye),O.value=Se<parseInt(c.breakpoint,10)}function me(be,Se){const De=be!=null&&be!==""?U.find(ct=>ct.name.value===be):null,mt=Se!=null&&Se!==""?U.find(ct=>ct.name.value===Se):null;if(ca===!0)ca=!1;else if(De&&mt){const ct=De.tabIndicatorRef.value,Xe=mt.tabIndicatorRef.value;N!==null&&(clearTimeout(N),N=null),ct.style.transition="none",ct.style.transform="none",Xe.style.transition="none",Xe.style.transform="none";const Fe=ct.getBoundingClientRect(),kt=Xe.getBoundingClientRect();Xe.style.transform=c.vertical===!0?`translate3d(0,${Fe.top-kt.top}px,0) scale3d(1,${kt.height?Fe.height/kt.height:1},1)`:`translate3d(${Fe.left-kt.left}px,0,0) scale3d(${kt.width?Fe.width/kt.width:1},1,1)`,b(()=>{N=setTimeout(()=>{N=null,Xe.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Xe.style.transform="none"},70)})}mt&&x.value===!0&&L(mt.rootRef.value)}function L(be){const{left:Se,width:De,top:mt,height:ct}=V.value.getBoundingClientRect(),Xe=be.getBoundingClientRect();let Fe=c.vertical===!0?Xe.top-mt:Xe.left-Se;if(Fe<0){V.value[c.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Fe),ye();return}Fe+=c.vertical===!0?Xe.height-ct:Xe.width-De,Fe>0&&(V.value[c.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Fe),ye())}function ye(){const be=V.value;if(be===null)return;const Se=be.getBoundingClientRect(),De=c.vertical===!0?be.scrollTop:Math.abs(be.scrollLeft);te.value===!0?(R.value=Math.ceil(De+Se.width)<be.scrollWidth-1,H.value=De>0):(R.value=De>0,H.value=c.vertical===!0?Math.ceil(De+Se.height)<be.scrollHeight:Math.ceil(De+Se.width)<be.scrollWidth)}function se(be){h!==null&&clearInterval(h),h=setInterval(()=>{je(be)===!0&&de()},5)}function Y(){se(ue.value===!0?Number.MAX_SAFE_INTEGER:0)}function _e(){se(ue.value===!0?0:Number.MAX_SAFE_INTEGER)}function de(){h!==null&&(clearInterval(h),h=null)}function Q(be,Se){const De=Array.prototype.filter.call(V.value.children,kt=>kt===Se||kt.matches&&kt.matches(".q-tab.q-focusable")===!0),mt=De.length;if(mt===0)return;if(be===36)return L(De[0]),De[0].focus(),!0;if(be===35)return L(De[mt-1]),De[mt-1].focus(),!0;const ct=be===(c.vertical===!0?38:37),Xe=be===(c.vertical===!0?40:39),Fe=ct===!0?-1:Xe===!0?1:void 0;if(Fe!==void 0){const kt=te.value===!0?-1:1,Dt=De.indexOf(Se)+Fe*kt;return Dt>=0&&Dt<mt&&(L(De[Dt]),De[Dt].focus({preventScroll:!0})),!0}}const qe=Z(()=>ue.value===!0?{get:be=>Math.abs(be.scrollLeft),set:(be,Se)=>{be.scrollLeft=-Se}}:c.vertical===!0?{get:be=>be.scrollTop,set:(be,Se)=>{be.scrollTop=Se}}:{get:be=>be.scrollLeft,set:(be,Se)=>{be.scrollLeft=Se}});function je(be){const Se=V.value,{get:De,set:mt}=qe.value;let ct=!1,Xe=De(Se);const Fe=be<Xe?-1:1;return Xe+=Fe*5,Xe<0?(ct=!0,Xe=0):(Fe===-1&&Xe<=be||Fe===1&&Xe>=be)&&(ct=!0,Xe=be),mt(Se,Xe),ye(),ct}function ke(be,Se){for(const De in be)if(be[De]!==Se[De])return!1;return!0}function ht(){let be=null,Se={matchedLen:0,queryDiff:9999,hrefLen:0};const De=U.filter(Fe=>Fe.routeData!==void 0&&Fe.routeData.hasRouterLink.value===!0),{hash:mt,query:ct}=o.$route,Xe=Object.keys(ct).length;for(const Fe of De){const kt=Fe.routeData.exact.value===!0;if(Fe.routeData[kt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Dt,query:ha,matched:pn,href:fn}=Fe.routeData.resolvedLink.value,$a=Object.keys(ha).length;if(kt===!0){if(Dt!==mt||$a!==Xe||ke(ct,ha)===!1)continue;be=Fe.name.value;break}if(Dt!==""&&Dt!==mt||$a!==0&&ke(ha,ct)===!1)continue;const Mt={matchedLen:pn.length,queryDiff:Xe-$a,hrefLen:fn.length-Dt.length};if(Mt.matchedLen>Se.matchedLen){be=Fe.name.value,Se=Mt;continue}else if(Mt.matchedLen!==Se.matchedLen)continue;if(Mt.queryDiff<Se.queryDiff)be=Fe.name.value,Se=Mt;else if(Mt.queryDiff!==Se.queryDiff)continue;Mt.hrefLen>Se.hrefLen&&(be=Fe.name.value,Se=Mt)}if(be===null&&U.some(Fe=>Fe.routeData===void 0&&Fe.name.value===q.value)===!0){ca=!1;return}re({name:be,setCurrent:!0})}function Vt(be){if(m(),F.value!==!0&&_.value!==null&&be.target&&typeof be.target.closest=="function"){const Se=be.target.closest(".q-tab");Se&&_.value.contains(Se)===!0&&(F.value=!0,x.value===!0&&L(Se))}}function Ut(){p(()=>{F.value=!1},30)}function St(){Aa.avoidRouteWatcher===!1?f(ht):y()}function ma(){if(j===void 0){const be=Me(()=>o.$route.fullPath,St);j=()=>{be(),j=void 0}}}function mn(be){U.push(be),I.value++,Re(),be.routeData===void 0||o.$route===void 0?f(()=>{if(x.value===!0){const Se=q.value,De=Se!=null&&Se!==""?U.find(mt=>mt.name.value===Se):null;De&&L(De.rootRef.value)}}):(ma(),be.routeData.hasRouterLink.value===!0&&St())}function cn(be){U.splice(U.indexOf(be),1),I.value--,Re(),j!==void 0&&be.routeData!==void 0&&(U.every(Se=>Se.routeData===void 0)===!0&&j(),St())}const Aa={currentModel:q,tabProps:P,hasFocus:F,hasActiveTab:$,registerTab:mn,unregisterTab:cn,verifyRouteModel:St,updateModel:re,onKbdNavigate:Q,avoidRouteWatcher:!1};$n(Ql,Aa);function Ma(){N!==null&&clearTimeout(N),de(),j!==void 0&&j()}let Na,ca;return ra(Ma),kn(()=>{Na=j!==void 0,Ma()}),wn(()=>{Na===!0&&(ma(),ca=!0,St()),Re()}),()=>Ce("div",{ref:_,class:B.value,role:"tablist",onFocusin:Vt,onFocusout:Ut},[Ce(hn,{onResize:Ge}),Ce("div",{ref:V,class:S.value,onScroll:ye},Bt(s.default)),Ce(T,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(R.value===!0?"":" q-tabs__arrow--faded"),name:c.leftIcon||i.iconSet.tabs[c.vertical===!0?"up":"left"],onMousedownPassive:Y,onTouchstartPassive:Y,onMouseupPassive:de,onMouseleavePassive:de,onTouchendPassive:de}),Ce(T,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(H.value===!0?"":" q-tabs__arrow--faded"),name:c.rightIcon||i.iconSet.tabs[c.vertical===!0?"down":"right"],onMousedownPassive:_e,onTouchstartPassive:_e,onMouseupPassive:de,onMouseleavePassive:de,onTouchendPassive:de})])}});function Hs(c){const s=[.06,6,50];return typeof c=="string"&&c.length&&c.split(":").forEach((u,o)=>{const i=parseFloat(u);i&&(s[o]=i)}),s}const Ys=xn({name:"touch-swipe",beforeMount(c,{value:s,arg:u,modifiers:o}){if(o.mouse!==!0&&Zt.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",n={handler:s,sensitivity:Hs(u),direction:Ba(o),noop:Sn,mouseStart(g){za(g,n)&&qn(g)&&(pa(n,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(g,!0))},touchStart(g){if(za(g,n)){const b=g.target;pa(n,"temp",[[b,"touchmove","move","notPassiveCapture"],[b,"touchcancel","end","notPassiveCapture"],[b,"touchend","end","notPassiveCapture"]]),n.start(g)}},start(g,b){Zt.is.firefox===!0&&qa(c,!0);const p=Fa(g);n.event={x:p.left,y:p.top,time:Date.now(),mouse:b===!0,dir:!1}},move(g){if(n.event===void 0)return;if(n.event.dir!==!1){Yt(g);return}const b=Date.now()-n.event.time;if(b===0)return;const p=Fa(g),m=p.left-n.event.x,f=Math.abs(m),y=p.top-n.event.y,_=Math.abs(y);if(n.event.mouse!==!0){if(f<n.sensitivity[1]&&_<n.sensitivity[1]){n.end(g);return}}else if(window.getSelection().toString()!==""){n.end(g);return}else if(f<n.sensitivity[2]&&_<n.sensitivity[2])return;const V=f/b,q=_/b;n.direction.vertical===!0&&f<_&&f<100&&q>n.sensitivity[0]&&(n.event.dir=y<0?"up":"down"),n.direction.horizontal===!0&&f>_&&_<100&&V>n.sensitivity[0]&&(n.event.dir=m<0?"left":"right"),n.direction.up===!0&&f<_&&y<0&&f<100&&q>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&f<_&&y>0&&f<100&&q>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&f>_&&m<0&&_<100&&V>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&f>_&&m>0&&_<100&&V>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Yt(g),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Vn(),n.styleCleanup=x=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const R=()=>{document.body.classList.remove("no-pointer-events--children")};x===!0?setTimeout(R,50):R()}),n.handler({evt:g,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:b,distance:{x:f,y:_}})):n.end(g)},end(g){n.event!==void 0&&(Va(n,"temp"),Zt.is.firefox===!0&&qa(c,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),g!==void 0&&n.event.dir!==!1&&Yt(g),n.event=void 0)}};if(c.__qtouchswipe=n,o.mouse===!0){const g=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";pa(n,"main",[[c,"mousedown","mouseStart",`passive${g}`]])}Zt.has.touch===!0&&pa(n,"main",[[c,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[c,"touchmove","noop","notPassiveCapture"]])},updated(c,s){const u=c.__qtouchswipe;u!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&u.end(),u.handler=s.value),u.direction=Ba(s.modifiers))},beforeUnmount(c){const s=c.__qtouchswipe;s!==void 0&&(Va(s,"main"),Va(s,"temp"),Zt.is.firefox===!0&&qa(c,!1),s.styleCleanup!==void 0&&s.styleCleanup(),delete c.__qtouchswipe)}}),Ws={name:{required:!0},disable:Boolean},Ja={setup(c,{slots:s}){return()=>Ce("div",{class:"q-panel scroll",role:"tabpanel"},Bt(s.default))}},Qs={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Js=["update:modelValue","beforeTransition","transition"];function Gs(){const{props:c,emit:s,proxy:u}=Tt(),{getCache:o}=Tn(),{registerTimeout:i}=Pa();let n,g;const b=C(null),p=C(null);function m(M){const te=c.vertical===!0?"up":"left";j((u.$q.lang.rtl===!0?-1:1)*(M.direction===te?1:-1))}const f=Z(()=>[[Ys,m,void 0,{horizontal:c.vertical!==!0,vertical:c.vertical,mouse:!0}]]),y=Z(()=>c.transitionPrev||`slide-${c.vertical===!0?"down":"right"}`),_=Z(()=>c.transitionNext||`slide-${c.vertical===!0?"up":"left"}`),V=Z(()=>`--q-transition-duration: ${c.transitionDuration}ms`),q=Z(()=>typeof c.modelValue=="string"||typeof c.modelValue=="number"?c.modelValue:String(c.modelValue)),x=Z(()=>({include:c.keepAliveInclude,exclude:c.keepAliveExclude,max:c.keepAliveMax})),R=Z(()=>c.keepAliveInclude!==void 0||c.keepAliveExclude!==void 0);Me(()=>c.modelValue,(M,te)=>{const ue=I(M)===!0?F(M):-1;g!==!0&&h(ue===-1?0:ue<F(te)?-1:1),b.value!==ue&&(b.value=ue,s("beforeTransition",M,te),i(()=>{s("transition",M,te)},c.transitionDuration))});function H(){j(1)}function O(){j(-1)}function U(M){s("update:modelValue",M)}function I(M){return M!=null&&M!==""}function F(M){return n.findIndex(te=>te.props.name===M&&te.props.disable!==""&&te.props.disable!==!0)}function N(){return n.filter(M=>M.props.disable!==""&&M.props.disable!==!0)}function h(M){const te=M!==0&&c.animated===!0&&b.value!==-1?"q-transition--"+(M===-1?y.value:_.value):null;p.value!==te&&(p.value=te)}function j(M,te=b.value){let ue=te+M;for(;ue!==-1&&ue<n.length;){const re=n[ue];if(re!==void 0&&re.props.disable!==""&&re.props.disable!==!0){h(M),g=!0,s("update:modelValue",re.props.name),setTimeout(()=>{g=!1});return}ue+=M}c.infinite===!0&&n.length!==0&&te!==-1&&te!==n.length&&j(M,M===-1?n.length:-1)}function P(){const M=F(c.modelValue);return b.value!==M&&(b.value=M),!0}function $(){const M=I(c.modelValue)===!0&&P()&&n[b.value];return c.keepAlive===!0?[Ce(Pn,x.value,[Ce(R.value===!0?o(q.value,()=>({...Ja,name:q.value})):Ja,{key:q.value,style:V.value},()=>M)])]:[Ce("div",{class:"q-panel scroll",style:V.value,key:q.value,role:"tabpanel"},[M])]}function A(){if(n.length!==0)return c.animated===!0?[Ce(Gl,{name:p.value},$)]:$()}function B(M){return n=Cn(Bt(M.default,[])).filter(te=>te.props!==null&&te.props.slot===void 0&&I(te.props.name)===!0),n.length}function S(){return n}return Object.assign(u,{next:H,previous:O,goTo:U}),{panelIndex:b,panelDirectives:f,updatePanelsList:B,updatePanelIndex:P,getPanelContent:A,getEnabledPanels:N,getPanels:S,isValidPanelName:I,keepAliveProps:x,needsUniqueKeepAliveWrapper:R,goToPanelByOffset:j,goToPanel:U,nextPanel:H,previousPanel:O}}const ut=Et({name:"QTabPanel",props:Ws,setup(c,{slots:s}){return()=>Ce("div",{class:"q-tab-panel",role:"tabpanel"},Bt(s.default))}}),It=Et({name:"QTabPanels",props:{...Qs,...Oa},emits:Js,setup(c,{slots:s}){const u=Tt(),o=Ia(c,u.proxy.$q),{updatePanelsList:i,getPanelContent:n,panelDirectives:g}=Gs(),b=Z(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(s),Rn("div",{class:b.value},n(),"pan",c.swipeable,()=>g.value))}}),Xs={class:"detail"},Zs={key:0},er={key:1},tr={key:0},ar={key:0},lr={colspan:"100%"},or={class:"q-my-md"},nr={key:4},sr={colspan:"100%"},rr={key:5},ir={colspan:"100%"},oo={__name:"MainInfoTab",setup(c){const s=ge();return(u,o)=>(d(),w("table",Xs,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.user.username)+" - "+r(a(s).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.opening_balance)),1)]),a(s).props.data.opening_notes?(d(),w("tr",Zs,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.total_expense)),1)]),a(s).props.data.is_closed?k("",!0):(d(),w("tr",er,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.actual_balance)),1)])),a(s).props.data.is_closed?(d(),w(G,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.closing_balance)),1)]),a(s).props.data.closing_notes?(d(),w("tr",tr,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),u.$can("admin.cashier-session.close")?(d(),w(G,{key:3},[a(s).props.data.is_closed?k("",!0):(d(),w("tr",ar,[t("td",lr,[t("div",or,[e(E,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=i=>u.$inertia.get(u.route("admin.cashier-session.close",{id:a(s).props.data.id})))},{default:l(()=>o[26]||(o[26]=[v(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(s).props.data.created_at?(d(),w("tr",nr,[t("td",sr," Dibuat "+r(a(Nt)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name)+" ("+r(a(ve)(a(s).props.data.created_at))+") ",1)])):k("",!0),a(s).props.data.updated_at?(d(),w("tr",rr,[t("td",ir," Diperbarui "+r(a(Nt)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(ve)(a(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},dr=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),ur={class:"full-width row flex-center text-grey-8 q-gutter-sm"},mr={class:"text-bold"},cr={key:0},pr={class:"text-bold"},fr={key:1},gr={key:0},br={key:0},vr={key:1},no={__name:"SalesOrderTab",props:{data:Object},setup(c){const s=c,u=C([]),o=C(!0),i=Ie({...Le(),cashier_session_id:s.data.id,status:["closed","canceled"]}),n=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];we(()=>{b()});const b=(f=null)=>Ke({pagination:n,filter:i,props:f,rows:u,url:route("admin.sales-order.data"),loading:o}),p=xe(),m=Z(()=>p.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,y)=>(d(),D(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:V,filter:q})=>[t("div",ur,[t("span",null,r(V)+" "+r(q?" with term "+q:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(V=>a(ee).get(f.route("admin.sales-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",mr,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(" "+r(a(ve)(_.row.datetime)),1)]),a(p).screen.lt.md?(d(),w(G,{key:0},[_.row.customer?(d(),w("div",cr,[e(T,{class:"inline-icon",name:"person"}),v(" "+r(_.row.customer_code)+" "+r(_.row.customer.name),1)])):k("",!0),t("div",pr,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(_.row.grand_total)),1)]),_.row.notes?(d(),w("div",fr,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(bt,{color:_.row.status==="closed"?"green":"red"},{default:l(()=>[v(r(f.$CONSTANTS.SALES_ORDER_STATUSES[_.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"customer",props:_},{default:l(()=>[_.row.customer?(d(),w("div",gr,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(_.row.customer_code)+" - "+r(_.row.customer_name),1)]),_.row.customer_phone?(d(),w("div",br,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(_.row.customer_phone),1)])):k("",!0),_.row.customer_address?(d(),w("div",vr,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(_.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[t("div",null,r(a(K)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},yr=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),_r={class:"full-width row flex-center text-grey-8 q-gutter-sm"},kr={class:"text-bold"},wr={class:"text-bold"},hr={key:0},$r={class:"q-mt-sm"},so={__name:"FinanceTransactionTab",props:{data:Object},setup(c){var f;const s=c;console.log(s.data);const u=C([]),o=C(!0),i=Ie({...Le(),account_id:(f=s.data.cashier_terminal)==null?void 0:f.finance_account_id,from_datetime:ea(s.data.opened_at),to_datetime:s.data.closed_at?ea(s.data.closed_at):null}),n=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];we(()=>{b()});const b=(y=null)=>Ke({pagination:n,filter:i,props:y,rows:u,url:route("admin.finance-transaction.data"),loading:o}),p=xe(),m=Z(()=>p.screen.gt.sm?g:g.filter(y=>y.name==="id"));return(y,_)=>(d(),D(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=V=>n.value=V),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:V,message:q,filter:x})=>[t("div",_r,[t("span",null,r(q)+" "+r(x?" with term "+x:""),1)])]),body:l(V=>[e(Pe,{props:V},{default:l(()=>[e(W,{key:"id",props:V},{default:l(()=>[t("div",kr,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(V.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(" "+r(a(ve)(V.row.datetime)),1)]),a(p).screen.lt.md?(d(),w(G,{key:0},[t("div",wr,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(V.row.amount)),1)]),V.row.notes?(d(),w("div",hr,[e($e,{text:V.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",$r,[e(bt,{color:V.row.amount>=0?"green":"red"},{default:l(()=>[v(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[V.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"amount",props:V},{default:l(()=>[t("span",{class:Ve(V.row.amount<0?"text-red":"text-green")},r(a(K)(V.row.amount)),3)]),_:2},1032,["props"]),e(W,{key:"notes",props:V,class:"wrap-column"},{default:l(()=>[e($e,{text:V.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},xr=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"})),Sr={class:"q-gutter-sm"},Vr={class:"col col-lg-6 q-pa-xs"},qr={class:"row"},Ga="Rincian Sesi Kasir",Cr={__name:"Detail",setup(c){const s=ge(),u=Z(()=>s.props.data),o=C("main");return Me(()=>s.props.tab,i=>{i&&(o.value=i)},{immediate:!0}),(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return d(),w(G,null,[e(g,{title:Ga}),e(b,null,{title:l(()=>[v(r(Ga))]),"left-button":l(()=>[t("div",Sr,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Vr,[t("div",qr,[e(fe,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:l(()=>[e(Ot,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Ringkasan"}),e(dt,{name:"sales",label:"Transaksi Penjualan"}),e(dt,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Ae),e(It,{modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=p=>o.value=p),animated:"",class:"q-pa-none"},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(oo,{data:u.value},null,8,["data"])]),_:1}),e(ut,{name:"sales",class:"q-pa-xs"},{default:l(()=>[e(no,{data:u.value},null,8,["data"])]),_:1}),e(ut,{name:"finance",class:"q-pa-xs"},{default:l(()=>[e(so,{data:u.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Tr=Object.freeze(Object.defineProperty({__proto__:null,default:Cr},Symbol.toStringTag,{value:"Module"}));function At(){return{protectClick:s=>(u,o)=>{const i=window.getSelection();if(i&&!i.isCollapsed){o.stopPropagation();return}s(u,o)}}}const Pr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Rr={class:"q-pa-xs"},Or={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ir={class:"flex justify-end"},Xa="Sesi Kasir",Ur={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=Ie({search:"",status:"all",...Le()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];we(()=>{V()});const _=U=>ot({message:`Hapus Sesi: ${U.cashier_terminal.name} - ${U.user.username}?`,url:route("admin.cashier-session.delete",U.id),fetchItemsCallback:V,loading:i}),V=(U=null)=>{Ke({pagination:m,filter:p,props:U,rows:o,url:route("admin.cashier-session.data"),loading:i,tableRef:n})},q=()=>V(),x=U=>ee.get(route("admin.cashier-session.detail",{id:U.id})),{protectClick:R}=At(),H=R(x),O=Z(()=>s.screen.gt.sm?f:f.filter(U=>U.name==="id"||U.name==="action"));return(U,I)=>{const F=X("i-head"),N=X("authenticated-layout");return d(),w(G,null,[e(F,{title:Xa}),e(N,null,Be({title:l(()=>[v(r(Xa))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=h=>u.value=!u.value)},null,8,["icon"]),U.$can("admin.cashier-session.open")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=h=>a(ee).get(U.route("admin.cashier-session.open")))})):k("",!0)]),default:l(()=>[t("div",Rr,[e(Ue,{class:"full-height-table",style:He({height:a(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":I[5]||(I[5]=h=>m.value=h),filter:p.search,loading:i.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:h,message:j,filter:P})=>[t("div",Or,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:l(h=>[e(Pe,{props:h,class:Ve(["cursor-pointer",h.row.is_closed?"":"bg-yellow-3"]),onClick:J(j=>a(H)(h.row,j),["stop"])},{default:l(()=>[e(W,{key:"id",props:h,class:"wrap-column"},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"tag"}),v(" SessionID: "+r(h.row.id),1)]),t("div",null,[e(T,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(h.row.cashier_terminal.name),1)]),t("div",null,[e(T,{class:"inline-icon",name:"person"}),v(" "+r(h.row.user.username)+" - "+r(h.row.user.name),1)])]),_:2},1032,["props"]),e(W,{key:"opening_info",props:h},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(h.row.opened_at?a(ve)(h.row.opened_at):"-"),1)]),t("div",null,[e(T,{class:"inline-icon",name:"money"}),v(" "+r(a(vt)(h.row.opening_balance)),1)]),h.row.opening_notes?(d(),D($e,{key:0,text:h.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"closing_info",props:h},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(h.row.closed_at?a(ve)(h.row.closed_at):"-"),1)]),t("div",null,[e(T,{class:"inline-icon",name:"money"}),v(" "+r(a(vt)(h.row.closing_balance)),1)]),h.row.closing_notes?(d(),D($e,{key:0,text:h.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"action",props:h},{default:l(()=>[t("div",Ir,[U.$can("admin.cashier-session.close")||U.$can("admin.cashier-session.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[4]||(I[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[U.$can("admin.cashier-session.close")?ae((d(),D(oe,{key:0,disable:h.row.is_closed,clickable:"",onClick:J(j=>a(ee).get(U.route("admin.cashier-session.close",h.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"logout"})]),_:1}),e(z,null,{default:l(()=>I[6]||(I[6]=[v("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[ie],[pe]]):k("",!0),U.$can("admin.cashier-session.delete")&&!h.row.is_closed?ae((d(),D(oe,{key:1,onClick:J(j=>_(h.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>I[7]||(I[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Pr,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[2]||(I[2]=h=>p.status=h),q],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[3]||(I[3]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Dr=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"})),jr={class:"q-gutter-sm"},Er={class:"col col-md-6 q-pa-xs"},Za="Buka Sesi Kasir",Ar={__name:"Open",setup(c){const s=ge(),u=Qe({cashier_terminal_id:s.props.data.cashier_terminal_id,opening_balance:parseFloat(s.props.data.opening_balance),opening_notes:s.props.data.opening_notes}),o=[...s.props.cashier_terminals.map(n=>({value:n.id,label:n.name,balance:parseFloat(n.finance_account.balance)}))],i=()=>nt({form:u,url:route("admin.cashier-session.open")});return Me(()=>u.cashier_terminal_id,n=>{if(n){const g=o.find(b=>b.value===n);g&&(u.opening_balance=g.balance)}else u.opening_balance=0}),(n,g)=>{const b=X("i-head"),p=X("authenticated-layout");return d(),w(G,null,[e(b,{title:Za}),e(p,null,{title:l(()=>[v(r(Za))]),"left-button":l(()=>[t("div",jr,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=m=>n.$inertia.get(n.route("admin.cashier-session.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Er,[e(Je,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=m=>a(u).id=m)},null,512),[[yt,a(u).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ce,{class:"custom-select",modelValue:a(u).cashier_terminal_id,"onUpdate:modelValue":g[2]||(g[2]=m=>a(u).cashier_terminal_id=m),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:a(u).errors.cashier_terminal_id,error:!!a(u).errors.cashier_terminal_id,disable:a(u).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Ee,{modelValue:a(u).opening_balance,"onUpdate:modelValue":g[3]||(g[3]=m=>a(u).opening_balance=m),label:"Saldo Buka Sesi",lazyRules:"",disable:a(u).processing,error:!!a(u).errors.opening_balance,errorMessage:a(u).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),g[6]||(g[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(ne,{modelValue:a(u).opening_notes,"onUpdate:modelValue":g[4]||(g[4]=m=>a(u).opening_notes=m),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(u).processing,error:!!a(u).errors.opening_notes,"error-message":a(u).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:a(u).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:a(u).processing,onClick:g[5]||(g[5]=m=>a(ee).get(n.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Mr=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"})),Nr={class:"detail"},Br={colspan:"3"},Fr={class:"text-bold text-grey-8"},zr={key:0},Lr={colspan:"100%"},Kr={key:1},Hr={colspan:"100%"},ro={__name:"MainInfoTab",setup(c){const s=ge();return(u,o)=>(d(),w("table",Nr,[t("tbody",null,[t("tr",null,[t("td",Br,[t("div",Fr,[o[1]||(o[1]=v(" Info Terminal Kasir ")),e(E,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=i=>u.$inertia.get(u.route("admin.cashier-terminal.edit",{id:a(s).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(vt)(a(s).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),a(s).props.data.created_at?(d(),w("tr",zr,[t("td",Lr," Dibuat "+r(a(Nt)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name)+" ("+r(a(ve)(a(s).props.data.created_at))+") ",1)])):k("",!0),a(s).props.data.updated_at?(d(),w("tr",Kr,[t("td",Hr," Diperbarui "+r(a(Nt)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(ve)(a(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},Yr=Object.freeze(Object.defineProperty({__proto__:null,default:ro},Symbol.toStringTag,{value:"Module"})),Wr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},io={__name:"SessionHistoryTab",setup(c){const s=ge(),u=C([]),o=C(!0),i=Ie({cashier_terminal_id:s.props.data.id,...Le()}),n=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];we(()=>{b()});const b=(f=null)=>Ke({pagination:n,filter:i,props:f,rows:u,url:route("admin.cashier-session.data"),loading:o}),p=xe(),m=Z(()=>p.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,y)=>(d(),D(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:V,filter:q})=>[t("div",Wr,[t("span",null,r(V)+" "+r(q?" with term "+q:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(V=>a(ee).get(f.route("admin.customer-wallet-transaction.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_,class:"wrap-column"},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"tag"}),v(" Session ID: "+r(_.row.id),1)]),t("div",null,[e(T,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(_.row.cashier_terminal.name),1)]),t("div",null,[e(T,{class:"inline-icon",name:"person"}),v(" "+r(_.row.user.username)+" - "+r(_.row.user.name),1)])]),_:2},1032,["props"]),e(W,{key:"opening_info",props:_},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(_.row.opened_at?a(ve)(_.row.opened_at):"-"),1)]),t("div",null,[e(T,{class:"inline-icon",name:"money"}),v(" "+r(a(vt)(_.row.opening_balance)),1)]),_.row.opening_notes?(d(),D($e,{key:0,text:_.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"closing_info",props:_},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(_.row.closed_at?a(ve)(_.row.closed_at):"-"),1)]),t("div",null,[e(T,{class:"inline-icon",name:"money"}),v(" "+r(a(vt)(_.row.closing_balance)),1)]),_.row.closing_notes?(d(),D($e,{key:0,text:_.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Qr=Object.freeze(Object.defineProperty({__proto__:null,default:io},Symbol.toStringTag,{value:"Module"})),Jr={class:"q-gutter-sm"},Gr={class:"col col-lg-6 q-pa-xs"},Xr={class:"row"},el="Rincian Terminal Kasir",Zr={__name:"Detail",setup(c){const s=C("main");return(u,o)=>{const i=X("i-head"),n=X("authenticated-layout");return d(),w(G,null,[e(i,{title:el}),e(n,null,{title:l(()=>[v(r(el))]),"left-button":l(()=>[t("div",Jr,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=g=>u.$inertia.get(u.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Gr,[t("div",Xr,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ot,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=g=>s.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(It,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=g=>s.value=g),animated:""},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(ro)]),_:1}),e(ut,{name:"session-history",class:"q-pa-xs"},{default:l(()=>[e(io)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},ei=Object.freeze(Object.defineProperty({__proto__:null,default:Zr},Symbol.toStringTag,{value:"Module"})),ti={class:"q-gutter-sm"},ai={class:"col col-md-6 q-pa-xs"},li={key:0,class:"q-my-xs text-grey-8"},oi={__name:"Editor",setup(c){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Terminal",o=Qe({id:s.props.data.id,name:s.props.data.name,finance_account_id:s.props.data.finance_account_id??"new",location:s.props.data.location,active:!!s.props.data.active,notes:s.props.data.notes}),i=[{value:"new",label:"Buat Baru (Otomatis)"},...s.props.finance_accounts.map(g=>({value:g.id,label:g.name}))],n=()=>nt({form:o,url:route("admin.cashier-terminal.save")});return(g,b)=>{const p=X("i-head"),m=X("authenticated-layout");return d(),w(G,null,[e(p,{title:u}),e(m,null,{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",ti,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$inertia.get(g.route("admin.cashier-terminal.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",ai,[e(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>a(o).id=f)},null,512),[[yt,a(o).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ne,{modelValue:a(o).name,"onUpdate:modelValue":b[2]||(b[2]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{class:"custom-select",modelValue:a(o).finance_account_id,"onUpdate:modelValue":b[3]||(b[3]=f=>a(o).finance_account_id=f),label:"Akun Kas",options:i,"map-options":"","emit-value":"",errorMessage:a(o).errors.finance_account_id,error:!!a(o).errors.finance_account_id,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),a(o).finance_account_id==="new"?(d(),w("div",li,[b[8]||(b[8]=v(" Akun keuangan akan dibuat ")),a(o).name?(d(),w(G,{key:0},[v(" dengan nama Kas "+r(a(o).name),1)],64)):k("",!0)])):k("",!0),e(ne,{modelValue:a(o).location,"onUpdate:modelValue":b[4]||(b[4]=f=>a(o).location=f),modelModifiers:{trim:!0},label:"Lokasi",error:!!a(o).errors.location,disable:a(o).processing,"error-message":a(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(o).notes,"onUpdate:modelValue":b[5]||(b[5]=f=>a(o).notes=f),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ya,{modelValue:a(o).active,"onUpdate:modelValue":b[6]||(b[6]=f=>a(o).active=f),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:a(o).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:a(o).processing,onClick:b[7]||(b[7]=f=>a(ee).get(g.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ni=Object.freeze(Object.defineProperty({__proto__:null,default:oi},Symbol.toStringTag,{value:"Module"})),si={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ri={class:"q-pa-xs"},ii={class:"full-width row flex-center text-grey-8 q-gutter-sm"},di={class:"flex justify-end"},tl="Terminal Kasir",ui={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=Ie({search:"",status:"active",...Le()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:s.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];we(()=>{V()});const _=U=>ot({message:`Hapus Terminal Kasir ${U.name}?`,url:route("admin.cashier-terminal.delete",U.id),fetchItemsCallback:V,loading:i}),V=(U=null)=>{Ke({pagination:m,filter:p,props:U,rows:o,url:route("admin.cashier-terminal.data"),loading:i,tableRef:n})},q=()=>V(),x=U=>ee.get(route("admin.cashier-terminal.detail",{id:U.id})),{protectClick:R}=At(),H=R(x),O=Z(()=>s.screen.gt.sm?f:f.filter(U=>U.name==="name"||U.name==="finance_account_id"||U.name==="action"));return(U,I)=>{const F=X("i-head"),N=X("authenticated-layout");return d(),w(G,null,[e(F,{title:tl}),e(N,null,Be({title:l(()=>[v(r(tl))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=h=>u.value=!u.value)},null,8,["icon"]),U.$can("admin.cashier-terminal.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=h=>a(ee).get(U.route("admin.cashier-terminal.add")))})):k("",!0)]),default:l(()=>[t("div",ri,[e(Ue,{class:"full-height-table",style:He({height:a(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":I[5]||(I[5]=h=>m.value=h),filter:p.search,loading:i.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:h,message:j,filter:P})=>[t("div",ii,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:l(h=>[e(Pe,{props:h,class:Ve([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(j=>a(H)(h.row,j),["stop"])},{default:l(()=>[e(W,{key:"name",props:h,class:"wrap-column"},{default:l(()=>[t("div",null,[e(T,{name:"wallet"}),v(" "+r(h.row.name),1)]),t("div",null,[e(T,{name:"home_pin"}),v(" "+r(h.row.location),1)]),a(s).screen.lt.md?(d(),D($e,{key:0,text:h.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:h},{default:l(()=>[t("div",null,[e(T,{name:"wallet"}),v(" "+r(h.row.finance_account.name),1)]),t("div",null,[e(T,{name:"money"}),v(" "+r(a(vt)(h.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(W,{key:"notes",props:h},{default:l(()=>[e($e,{text:h.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:h},{default:l(()=>[t("div",di,[U.$can("admin.cashier-terminal.edit")||U.$can("admin.cashier-terminal.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[4]||(I[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[U.$can("admin.cashier-terminal.edit")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(j=>a(ee).get(U.route("admin.cashier-terminal.edit",h.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>I[6]||(I[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),U.$can("admin.cashier-terminal.delete")?ae((d(),D(oe,{key:1,onClick:J(j=>_(h.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>I[7]||(I[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",si,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[2]||(I[2]=h=>p.status=h),q],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[3]||(I[3]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},mi=Object.freeze(Object.defineProperty({__proto__:null,default:ui},Symbol.toStringTag,{value:"Module"})),ci={class:"q-gutter-sm"},pi={class:"col col-md-6 q-pa-xs"},fi={class:"row"},gi={class:"detail"},bi={key:0},vi={key:1},yi={key:0},_i={key:1},ki={colspan:"3",class:"bg-white"},al="Rincian Konfirmasi Top Up",wi={__name:"Detail",setup(c){const s=ge(),u=()=>ga({message:`Setujui konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"accept"},onSuccess:()=>{ee.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}}),o=()=>ga({message:`Tolak konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"reject"},onSuccess:()=>{ee.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}});return(i,n)=>{const g=X("i-head"),b=X("i-link"),p=X("my-link"),m=X("authenticated-layout");return d(),w(G,null,[e(g,{title:al}),e(m,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",ci,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>i.$inertia.get(i.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":l(()=>[a(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:reject")?(d(),D(E,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:n[1]||(n[1]=f=>o()),class:"q-mr-sm"})):k("",!0),a(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:accept")?(d(),D(E,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:n[2]||(n[2]=f=>u())})):k("",!0)]),title:l(()=>[t("span",{class:"text-subtitle2"},r(al))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",pi,[t("div",fi,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[n[24]||(n[24]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",gi,[t("tbody",null,[t("tr",null,[n[3]||(n[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),n[4]||(n[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Waktu",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.datetime)),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Pelanggan",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),e(b,{href:i.route("admin.customer.detail",{id:a(s).props.data.customer_id})},{default:l(()=>[v(r(a(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.name),1)]),a(s).props.data.customer.phone?(d(),w("div",bi,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.phone),1)])):k("",!0),a(s).props.data.customer.address?(d(),w("div",vi,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[n[11]||(n[11]=t("td",null,"Akun Tujuan",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[e(p,{href:i.route("admin.finance-account.detail",{id:a(s).props.data.finance_account.id})},{default:l(()=>[v(r(a(s).props.data.finance_account.name),1)]),_:1},8,["href"]),n[10]||(n[10]=t("br",null,null,-1)),a(s).props.data.finance_account.type==="bank"?(d(),w(G,{key:0},[v(" Rek "+r(a(s).props.data.finance_account.bank)+" an "+r(a(s).props.data.finance_account.holder)+" ",1),n[9]||(n[9]=t("br",null,null,-1)),v(" "+r(a(s).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[n[13]||(n[13]=t("td",null,"Jumlah",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(s).props.data.amount)),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"Status",-1)),n[16]||(n[16]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[a(s).props.data.status]),1)]),t("tr",null,[n[17]||(n[17]=t("td",null,"Catatan",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(d(),w("tr",yi,[n[19]||(n[19]=t("td",null,"Dibuat",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(d(),w("tr",_i,[n[21]||(n[21]=t("td",null,"Diperbarui",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(d(),w(G,{key:2},[n[23]||(n[23]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",ki,[e(ia,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},hi=Object.freeze(Object.defineProperty({__proto__:null,default:wi},Symbol.toStringTag,{value:"Module"})),$i={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},xi={class:"q-pa-xs"},Si={key:0},Vi={class:"flex justify-end no-wrap"},ll="Konfirmasi Top Up Wallet",qi={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=C(null),m=C(!1),f=zt(),y=Lt(),_=[{label:"Semua Tahun",value:"all"},...Pt(f-2,f).reverse()],V=[{value:"all",label:"Semua Bulan"},...Rt()],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],x=Ie({search:"",year:f,month:y,status:"all",...Le()}),R=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),H=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",field:"action",align:"center"}];we(()=>{O()});const O=(P=null)=>{Ke({pagination:R,filter:x,props:P,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:i,tableRef:n})},U=()=>{O()},I=Z(()=>s.screen.gt.sm?H:H.filter(P=>["code","action"].includes(P.name)));Me(()=>x.year,P=>{P===null&&(x.month=null)});const F=P=>ga({message:`Setujui konfirmasi transaksi #${P.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:O,loading:i,data:{id:P.id,action:"accept"}}),N=P=>ga({message:`Tolak konfirmasi transaksi #${P.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:O,loading:i,data:{id:P.id,action:"reject"}}),h=P=>ot({message:`Hapus konfirmasi transaksi ${P.code}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",P.id),fetchItemsCallback:O,loading:i}),j=P=>{p.value=P,m.value=!0};return(P,$)=>{const A=X("i-head"),B=X("authenticated-layout");return d(),w(G,null,[e(A,{title:ll}),e(B,null,Be({title:l(()=>[v(r(ll))]),"right-button":l(()=>[e(E,{class:"q-ml-sm",icon:u.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:$[0]||($[0]=S=>u.value=!u.value)},null,8,["icon"])]),default:l(()=>[t("div",xi,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",style:He({height:a(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:R.value,"onUpdate:pagination":$[6]||($[6]=S=>R.value=S),filter:x.search,loading:i.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:O,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:J(M=>a(ee).get(P.route("admin.customer-wallet-transaction-confirmation.detail",{id:S.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:S,class:"wrap-column"},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(S.row.code),1)]),a(s).screen.gt.sm?k("",!0):(d(),w("div",Si,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)(S.row.datetime)),1)])),a(s).screen.gt.sm?k("",!0):(d(),w(G,{key:1},[e($e,{icon:"account_balance",text:S.row.finance_account.name},null,8,["text"]),t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(S.row.customer.code)+" - "+r(S.row.customer.name),1)]),t("div",null,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(S.row.amount)),1)]),S.row.notes?(d(),D($e,{key:0,icon:"notes",text:S.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(La,{status:S.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(W,{key:"datetime",props:S,class:"wrap-column"},{default:l(()=>[v(r(a(ve)(S.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"customer_id",props:S},{default:l(()=>[e($e,{text:S.row.customer.code+" - "+S.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:S},{default:l(()=>[v(r(S.row.finance_account.name),1),$[8]||($[8]=t("br",null,null,-1)),v(" "+r(S.row.finance_account.bank)+" "+r(S.row.finance_account.number)+" an. "+r(S.row.finance_account.holder),1)]),_:2},1032,["props"]),e(W,{key:"amount",props:S,style:{"text-align":"right"}},{default:l(()=>[v(r(a(K)(S.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"status",props:S,class:"text-center"},{default:l(()=>[e(La,{status:S.row.status},null,8,["status"])]),_:2},1032,["props"]),e(W,{key:"notes",props:S,class:"word-wrap"},{default:l(()=>[e($e,{icon:"notes",text:S.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:S,class:"text-center"},{default:l(()=>[t("div",Vi,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:S.row.image_path===null||S.row.image_path==="",onClick:J(M=>j(S.row.image_path),["stop"])},{default:l(()=>[S.row.image_path!=null?(d(),D(Gt,{key:0},{default:l(()=>$[9]||($[9]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.customer-wallet-transaction-confirmation:accept")||P.$can("admin.customer-wallet-transaction-confirmation:deny")||P.$can("admin.customer-wallet-transaction-confirmation.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.customer-wallet-transaction-confirmation:accept")?ae((d(),D(oe,{key:0,onClick:J(M=>F(S.row),["stop"]),clickable:"",disable:S.row.status!=="pending"},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"check"})]),_:1}),e(z,null,{default:l(()=>$[10]||($[10]=[v("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[ie],[pe]]):k("",!0),P.$can("admin.customer-wallet-transaction-confirmation:deny")?ae((d(),D(oe,{key:1,onClick:J(M=>N(S.row),["stop"]),clickable:"",disable:S.row.status!=="pending"},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"cancel"})]),_:1}),e(z,null,{default:l(()=>$[11]||($[11]=[v("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[ie],[pe]]):k("",!0),e(Ae),P.$can("admin.customer-wallet-transaction-confirmation.delete")?ae((d(),D(oe,{key:2,onClick:J(M=>h(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>$[12]||($[12]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(ba,{modelValue:m.value,"onUpdate:modelValue":$[7]||($[7]=S=>m.value=S),imageUrl:`/${p.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",$i,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[$[1]||($[1]=S=>x.year=S),U],options:_,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!=="all"?(d(),D(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[$[2]||($[2]=S=>x.month=S),U],options:V,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.status,"onUpdate:modelValue":[$[3]||($[3]=S=>x.status=S),U],options:q,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":$[4]||($[4]=S=>x.search=S),placeholder:"Cari...",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ci=Object.freeze(Object.defineProperty({__proto__:null,default:qi},Symbol.toStringTag,{value:"Module"}));function uo(c,s=!1){const u=c.map(g=>({value:g.id,label:g.name+" ("+g.code+")"})),o=s?[{value:"all",label:"Semua"},...u]:u,i=C([...o]);return{filteredCustomers:i,filterCustomersFn:(g,b)=>{b(()=>{i.value=o.filter(p=>p.label.toLowerCase().includes(g.toLowerCase()))})},customers:o}}const Ti={class:"col col-md-6 q-pa-xs"},ol="Penyesuaian Saldo Dompet Pelanggan",Pi={__name:"Adjustment",setup(c){const s=ge(),{filteredCustomers:u,filterCustomersFn:o}=uo(s.props.customers,!1),i=Qe({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),n=()=>i.amount=i.new_wallet_balance-i.old_wallet_balance;Me(()=>i.customer_id,async p=>{if(!p){i.old_wallet_balance=0,i.new_wallet_balance=0,n();return}i.processing=!0;try{const m=await axios.get(route("admin.customer.wallet_balance",{id:p}));i.new_wallet_balance=i.old_wallet_balance=m.data.wallet_balance}catch(m){console.error("Gagal mengambil saldo:",m),i.old_wallet_balance=0,i.new_wallet_balance=0}i.processing=!1,n()});const g=Z(()=>i.new_wallet_balance-i.old_wallet_balance),b=()=>nt({form:i,url:route("admin.customer-wallet-transaction.adjustment")});return(p,m)=>{const f=X("i-head"),y=X("authenticated-layout");return d(),w(G,null,[e(f,{title:ol}),e(y,null,{title:l(()=>[v(r(ol))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ti,[e(Je,{class:"row",onSubmit:J(b,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ce,{class:"custom-select",modelValue:a(i).customer_id,"onUpdate:modelValue":m[0]||(m[0]=_=>a(i).customer_id=_),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(u),"map-options":"","emit-value":"",errorMessage:a(i).errors.customer_id,onFilter:a(o),error:!!a(i).errors.customer_id,disable:a(i).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(z,null,{default:l(()=>m[6]||(m[6]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Ee,{modelValue:a(i).old_wallet_balance,"onUpdate:modelValue":m[1]||(m[1]=_=>a(i).old_wallet_balance=_),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.old_wallet_balance,errorMessage:a(i).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(i).new_wallet_balance,"onUpdate:modelValue":m[2]||(m[2]=_=>a(i).new_wallet_balance=_),label:"Saldo Seharusnya",lazyRules:"",disable:a(i).processing,error:!!a(i).errors.new_wallet_balance,errorMessage:a(i).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":m[3]||(m[3]=_=>g.value=_),label:"Selisih",readonly:"",lazyRules:"",disable:a(i).processing},null,8,["modelValue","disable"]),e(ne,{modelValue:a(i).notes,"onUpdate:modelValue":m[4]||(m[4]=_=>a(i).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.notes,"error-message":a(i).errors.notes,rules:[_=>_&&_.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:m[5]||(m[5]=_=>a(ee).get(p.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ri=Object.freeze(Object.defineProperty({__proto__:null,default:Pi},Symbol.toStringTag,{value:"Module"})),Oi={class:"q-gutter-sm"},Ii={class:"col col-md-6 q-pa-xs"},Ui={class:"row"},Di={class:"detail"},ji={key:0},Ei={key:1},Ai={key:0},Mi={key:1},Ni={colspan:"3",class:"bg-white"},nl="Rincian Transaksi",Bi={__name:"Detail",setup(c){const s=ge();return(u,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return d(),w(G,null,[e(i,{title:nl}),e(g,null,{"left-button":l(()=>[t("div",Oi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$goBack())})])]),title:l(()=>[v(r(nl))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Ii,[t("div",Ui,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[o[18]||(o[18]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",Di,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.datetime)),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Pelanggan",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),e(n,{href:u.route("admin.customer.detail",{id:a(s).props.data.customer_id})},{default:l(()=>[v(""+r(a(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.name),1)]),a(s).props.data.customer.phone?(d(),w("div",ji,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.phone),1)])):k("",!0),a(s).props.data.customer.address?(d(),w("div",Ei,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(a(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[a(s).props.data.type]),1)]),t("tr",null,[o[9]||(o[9]=t("td",null,"Jumlah",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",{class:Ve(a(s).props.data.amount>0?"text-positive":"text-negative")},r(a(la)(a(s).props.data.amount))+"Rp. "+r(a(K)(Math.abs(a(s).props.data.amount))),3)]),t("tr",null,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(d(),w("tr",Ai,[o[13]||(o[13]=t("td",null,"Dibuat",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(d(),w("tr",Mi,[o[15]||(o[15]=t("td",null,"Diperbarui",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(d(),w(G,{key:2},[o[17]||(o[17]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Ni,[e(ia,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Fi=Object.freeze(Object.defineProperty({__proto__:null,default:Bi},Symbol.toStringTag,{value:"Module"})),zi={class:"q-gutter-sm"},Li={class:"col col-md-6 q-pa-xs"},Ki={__name:"Editor",setup(c){var m;const s=ge(),u=(s.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:i}=uo(s.props.customers,!1),n=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],g=s.props.finance_accounts.map(f=>({label:f.name,value:f.id})),b=Qe({id:s.props.data.id,customer_id:s.props.data.customer_id,finance_account_id:s.props.data.finance_account_id,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((m=s.props.data)==null?void 0:m.image_path)??"",image:null}),p=()=>{da(b,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:b,url:route("admin.customer-wallet-transaction.save")})};return(f,y)=>{const _=X("i-head"),V=X("authenticated-layout");return d(),w(G,null,[e(_,{title:u}),e(V,null,{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",zi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=q=>f.$inertia.get(f.route("admin.customer-wallet-transaction.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Li,[e(Je,{class:"row",onSubmit:J(p,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[1]||(y[1]=q=>a(b).id=q)},null,512),[[yt,a(b).id]]),e(Kt,{autofocus:"",modelValue:a(b).datetime,"onUpdate:modelValue":y[2]||(y[2]=q=>a(b).datetime=q),label:"Tanggal",error:!!a(b).errors.datetime,disable:a(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ce,{class:"custom-select",modelValue:a(b).customer_id,"onUpdate:modelValue":y[3]||(y[3]=q=>a(b).customer_id=q),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:a(o),"map-options":"","emit-value":"",errorMessage:a(b).errors.customer_id,onFilter:a(i),error:!!a(b).errors.customer_id,disable:a(b).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(z,null,{default:l(()=>y[10]||(y[10]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(ce,{modelValue:a(b).type,"onUpdate:modelValue":y[4]||(y[4]=q=>a(b).type=q),label:"Jenis",options:n,"map-options":"","emit-value":"",error:!!a(b).errors.type,disable:a(b).processing,errorMessage:a(b).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{modelValue:a(b).finance_account_id,"onUpdate:modelValue":y[5]||(y[5]=q=>a(b).finance_account_id=q),label:a(b).type=="deposit"?"Kas Tujuan":"Kas Asal",options:a(g),"map-options":"","emit-value":"",error:!!a(b).errors.finance_account_id,disable:a(b).processing,errorMessage:a(b).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Ee,{modelValue:a(b).amount,"onUpdate:modelValue":y[6]||(y[6]=q=>a(b).amount=q),label:"Jumlah",lazyRules:"",disable:a(b).processing,error:!!a(b).errors.amount,errorMessage:a(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ne,{modelValue:a(b).notes,"onUpdate:modelValue":y[7]||(y[7]=q=>a(b).notes=q),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(b).processing,error:!!a(b).errors.notes,"error-message":a(b).errors.notes,rules:[q=>q&&q.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Ua,{modelValue:a(b).image,"onUpdate:modelValue":y[8]||(y[8]=q=>a(b).image=q),"initial-image-path":a(b).image_path,disabled:a(b).processing,error:!!a(b).errors.image||!!a(b).errors.image_path,"error-message":a(b).errors.image||a(b).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(b).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:a(b).processing,onClick:y[9]||(y[9]=q=>a(ee).get(f.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Hi=Object.freeze(Object.defineProperty({__proto__:null,default:Ki},Symbol.toStringTag,{value:"Module"})),Yi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Wi={class:"q-pa-xs"},Qi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ji={key:0},Gi={key:0},Xi={class:"flex justify-end no-wrap"},sl="Transaksi Dompet Pelanggan",Zi={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=new Date().getFullYear(),m=new Date().getMonth()+1,f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Pt(p-2,p-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Rt()],_=Ie({search:"",year:p,month:m,...Le()}),V=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),q=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];we(()=>{R()});const x=N=>ot({message:`Hapus transaksi #${N.code}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",N.id),fetchItemsCallback:R,loading:i}),R=(N=null)=>{Ke({pagination:V,filter:_,props:N,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:i,tableRef:n})},H=()=>{R()},O=Z(()=>s.screen.gt.sm?q:q.filter(N=>N.name==="code"||N.name==="action"));Me(()=>_.year,N=>{N===null&&(_.month=null)});const U=C(null),I=C(!1),F=N=>{U.value=N,I.value=!0};return(N,h)=>{const j=X("i-head"),P=X("authenticated-layout");return d(),w(G,null,[e(j,{title:sl}),e(P,null,Be({title:l(()=>[v(r(sl))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=$=>u.value=!u.value)},null,8,["icon"]),N.$can("admin.customer-wallet-transaction.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=$=>a(ee).get(N.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",Wi,[e(Ue,{ref_key:"tableRef",ref:n,style:He({height:a(b)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":h[6]||(h[6]=$=>V.value=$),filter:_.search,loading:i.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:R,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:$,message:A,filter:B})=>[t("div",Qi,[t("span",null,r(A)+" "+r(B?" with term "+B:""),1)])]),body:l($=>[e(Pe,{props:$,class:"cursor-pointer",onClick:J(A=>a(ee).get(N.route("admin.customer-wallet-transaction.detail",{id:$.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:$,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.gt.sm?k("",!0):(d(),D(T,{key:0,name:"tag",class:"inline-icon"})),v(" "+r($.row.code),1)]),a(s).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)($.row.datetime)),1)]),$.row.finance_account?(d(),w("div",Ji,[e(T,{name:"wallet",class:"inline-icon"}),v(" "+r($.row.finance_account?$.row.finance_account.name:"-"),1)])):k("",!0),e($e,{icon:"person",text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"]),t("div",{class:Ve([$.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(T,{name:"money",class:"inline-icon"}),v(" "+r(a(la)($.row.amount))+"Rp. "+r(a(K)(Math.abs($.row.amount))),1)],2),e($e,{text:$.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(bt,null,{default:l(()=>[v(r($.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(W,{key:"datetime",props:$},{default:l(()=>[v(r(a(ve)($.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"customer_id",props:$},{default:l(()=>[e($e,{text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:$},{default:l(()=>[$.row.finance_account?(d(),w("div",Gi,r($.row.finance_account?$.row.finance_account.name:"-"),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"amount",props:$,style:{"text-align":"right"}},{default:l(()=>[v(r(a($t)($.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:$},{default:l(()=>[e($e,{text:$.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:$},{default:l(()=>[t("div",Xi,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:$.row.image_path===null||$.row.image_path==="",onClick:J(A=>F($.row.image_path),["stop"])},{default:l(()=>[$.row.image_path!=null?(d(),D(Gt,{key:0},{default:l(()=>h[8]||(h[8]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),N.$can("admin.customer-wallet-transaction.delete")?(d(),D(E,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:h[5]||(h[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.customer-wallet-transaction.delete")?ae((d(),D(oe,{key:0,onClick:J(A=>x($.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>h[9]||(h[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ba,{modelValue:I.value,"onUpdate:modelValue":h[7]||(h[7]=$=>I.value=$),imageUrl:`/${U.value}`},null,8,["modelValue","imageUrl"])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Yi,[e(ce,{modelValue:_.year,"onUpdate:modelValue":[h[2]||(h[2]=$=>_.year=$),H],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:_.month,"onUpdate:modelValue":[h[3]||(h[3]=$=>_.month=$),H],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:_.year===null},null,8,["modelValue","disable"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":h[4]||(h[4]=$=>_.search=$),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ed=Object.freeze(Object.defineProperty({__proto__:null,default:Zi},Symbol.toStringTag,{value:"Module"})),td={class:"detail"},ad={key:0},ld={key:1},od={class:"text-grey-8"},nd={key:2},sd={class:"text-grey-8"},rd={key:0,class:"q-pt-md"},mo={__name:"MainInfoTab",setup(c){const s=ge(),u=()=>{ot({message:`Hapus Pelanggan ${s.props.data.code}?`,url:route("admin.customer.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.customer.index"))}})};return(o,i)=>(d(),w(G,null,[t("table",td,[t("tbody",null,[i[28]||(i[28]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pelanggan")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Jenis",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.type_label),1)]),t("tr",null,[i[5]||(i[5]=t("td",null,"Nama",-1)),i[6]||(i[6]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[i[7]||(i[7]=t("td",null,"Default Harga",-1)),i[8]||(i[8]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.default_price_type_label),1)]),t("tr",null,[i[9]||(i[9]=t("td",null,"No. Telepon",-1)),i[10]||(i[10]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone?a(s).props.data.phone:"-"),1)]),t("tr",null,[i[11]||(i[11]=t("td",null,"Alamat",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.address?a(s).props.data.address:"-"),1)]),t("tr",null,[i[13]||(i[13]=t("td",null,"Saldo Wallet",-1)),i[14]||(i[14]=t("td",null,":",-1)),t("td",null," Rp. "+r(a($t)(a(s).props.data.wallet_balance)),1)]),t("tr",null,[i[15]||(i[15]=t("td",null,"Saldo Utang / Piutang",-1)),i[16]||(i[16]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a($t)(a(s).props.data.balance)),1)]),t("tr",null,[i[17]||(i[17]=t("td",null,"Status",-1)),i[18]||(i[18]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),i[29]||(i[29]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),a(s).props.data.created_at?(d(),w("tr",ad,[i[19]||(i[19]=t("td",null,"Dibuat",-1)),i[20]||(i[20]=t("td",null,":",-1)),t("td",null,r(a(Nt)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name)+" ("+r(a(ve)(a(s).props.data.created_at))+") ",1)])):k("",!0),a(s).props.data.updated_at?(d(),w("tr",ld,[i[21]||(i[21]=t("td",null,"Diperbarui",-1)),i[22]||(i[22]=t("td",null,":",-1)),t("td",null,r(a(Nt)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(ve)(a(s).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[i[23]||(i[23]=t("td",null,"Terakhir login",-1)),i[24]||(i[24]=t("td",null,":",-1)),t("td",null,[v(r(a(s).props.data.last_login_datetime?a(ve)(a(s).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",od,"("+r(a(Nt)(a(s).props.data.last_login_datetime))+")",1)])]),a(s).props.data.last_activity_datetime?(d(),w("tr",nd,[i[26]||(i[26]=t("td",null,"Aktifitas Terakhir",-1)),i[27]||(i[27]=t("td",null,":",-1)),t("td",null,[v(r(a(ve)(a(s).props.data.last_activity_datetime))+" ",1),t("span",sd,[v("("+r(a(Nt)(a(s).props.data.last_activity_datetime))+")",1),i[25]||(i[25]=t("br",null,null,-1)),v(r(a(s).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(d(),w("div",rd,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>u())})])):k("",!0)],64))}},id=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"})),dd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ud={class:"text-bold"},co={__name:"WalletHistoryTab",setup(c){const s=ge(),u=C([]),o=C(!0),i=Ie({customer_id:s.props.data.id,...Le()}),n=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];we(()=>{b()});const b=(f=null)=>Ke({pagination:n,filter:i,props:f,rows:u,url:route("admin.customer-wallet-transaction.data"),loading:o}),p=xe(),m=Z(()=>p.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,y)=>(d(),D(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:V,filter:q})=>[t("div",dd,[t("span",null,r(V)+" "+r(q?" with term "+q:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(V=>a(ee).get(f.route("admin.customer-wallet-transaction.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",ud,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(ve)(_.row.datetime)),1)]),a(p).screen.lt.md?(d(),w(G,{key:0},[t("div",{class:Ve(["text-bold",_.row.amount<0?"text-red":"text-green"])},[e(T,{name:"money",class:"inline-icon"}),v(" "+r(a(oa)(_.row.amount)),1)],2),t("div",null,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(bt,{size:"xs",color:_.row.amount>0?"green":"red"},{default:l(()=>[e(T,{name:"category"}),v(" "+r(_.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"amount",props:_},{default:l(()=>[t("div",{class:Ve(_.row.amount<0?"text-red-10":_.row.amount>0?"text-green-10":"")},r(a($t)(_.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},md=Object.freeze(Object.defineProperty({__proto__:null,default:co},Symbol.toStringTag,{value:"Module"})),cd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},pd={class:"text-bold"},fd={key:0},gd={key:1},po={__name:"OrderHistoryTab",setup(c){const s=ge(),u=C([]),o=C(!0),i=Ie({customer_id:s.props.data.id,...Le()}),n=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];we(()=>{b()});const b=(f=null)=>Ke({pagination:n,filter:i,props:f,rows:u,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:s.props.data.id}}),loading:o}),p=xe(),m=Z(()=>p.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,y)=>(d(),D(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:V,filter:q})=>[t("div",cd,[t("span",null,r(V)+" "+r(q?" with term "+q:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(V=>a(ee).get(f.route("admin.sales-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",pd,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(ve)(_.row.datetime)),1)]),a(p).screen.lt.md?(d(),w(G,{key:0},[t("div",null,[e(T,{name:"money",class:"inline-icon"}),v(" Total: Rp. "+r(a(K)(_.row.grand_total)),1)]),_.row.remaining_debt>0?(d(),w("div",fd,[e(T,{name:"money",class:"inline-icon"}),v(" Sisa Utang Rp. "+r(a(K)(_.row.remaining_debt)),1)])):k("",!0),_.row.notes?(d(),w("div",gd,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(bt,{color:_.row.status=="closed"?"green":"red"},{default:l(()=>[v(r(_.row.status_label),1)]),_:2},1032,["color"]),e(bt,{class:"q-ml-xs",color:_.row.payment_status=="fully_paid"?"green":"red"},{default:l(()=>[v(r(_.row.payment_status_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[v(r(a(K)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"remaining_debt",props:_},{default:l(()=>[v(r(a(K)(_.row.remaining_debt)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},bd=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"})),vd={class:"q-gutter-sm"},yd={class:"q-gutter-sm"},_d={class:"col col-lg-6 q-pa-xs"},kd={class:"row"},rl="Rincian Pelanggan",wd={__name:"Detail",setup(c){const s=ge(),u=C("main");return xe(),(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(G,null,[e(n,{title:rl}),e(g,null,{title:l(()=>[v(r(rl))]),"left-button":l(()=>[t("div",vd,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":l(()=>[t("div",yd,[o.$can("admin.customer.edit")?(d(),D(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>a(ee).get(o.route("admin.customer.edit",{id:a(s).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),D(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>a(ee).get(o.route("admin.customer.edit",{id:a(s).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),D(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>a(ee).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",_d,[t("div",kd,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ot,{modelValue:u.value,"onUpdate:modelValue":i[4]||(i[4]=b=>u.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"history",label:"Riwayat Wallet"}),e(dt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(It,{modelValue:u.value,"onUpdate:modelValue":i[5]||(i[5]=b=>u.value=b),animated:""},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(mo)]),_:1}),e(ut,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(co)]),_:1}),e(ut,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(po)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},hd=Object.freeze(Object.defineProperty({__proto__:null,default:wd},Symbol.toStringTag,{value:"Module"})),$d={class:"q-gutter-sm"},xd={class:"col col-md-6 q-pa-xs"},Sd={__name:"Editor",setup(c){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,default_price_type:s.props.data.default_price_type,phone:s.props.data.phone,address:s.props.data.address,active:!!s.props.data.active,password:s.props.data.id?null:"12345",type:s.props.data.type}),i=C(!s.props.data.id),n=tt(window.CONSTANTS.CUSTOMER_TYPES),g=tt(window.CONSTANTS.PRODUCT_PRICE_TYPES),b=()=>nt({form:o,url:route("admin.customer.save",{id:o.id})});return(p,m)=>{const f=X("i-head"),y=X("authenticated-layout");return d(),w(G,null,[e(f,{title:u}),e(y,null,{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",$d,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>p.$goBack())})])]),"right-button":l(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(o).processing,onClick:m[1]||(m[1]=_=>b()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",xd,[e(Je,{class:"row",onSubmit:J(b,["prevent"]),onValidationError:a(We)},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[2]||(m[2]=_=>a(o).id=_)},null,512),[[yt,a(o).id]]),e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ne,{modelValue:a(o).code,"onUpdate:modelValue":m[3]||(m[3]=_=>a(o).code=_),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[_=>_&&_.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).name,"onUpdate:modelValue":m[4]||(m[4]=_=>a(o).name=_),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:a(o).default_price_type,"onUpdate:modelValue":m[5]||(m[5]=_=>a(o).default_price_type=_),options:a(g),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!a(o).errors.default_price_type,"error-message":a(o).errors.default_price_type,disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":m[6]||(m[6]=_=>a(o).type=_),label:"Jenis Akun",options:a(n),"map-options":"","emit-value":"","lazy-rules":"",disable:a(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(o).errors.type,"error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(ne,{modelValue:a(o).phone,"onUpdate:modelValue":m[7]||(m[7]=_=>a(o).phone=_),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:a(o).processing,error:!!a(o).errors.phone,"error-message":a(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).address,"onUpdate:modelValue":m[8]||(m[8]=_=>a(o).address=_),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{autocomplete:"off","aria-autocomplete":"none",modelValue:a(o).password,"onUpdate:modelValue":m[10]||(m[10]=_=>a(o).password=_),label:a(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:a(o).processing,error:!!a(o).errors.password,"error-message":a(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:i.value?"text":"password"},{append:l(()=>[e(E,{dense:"",flat:"",round:"",onClick:m[9]||(m[9]=_=>i.value=!i.value)},{default:l(()=>[e(T,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(ya,{modelValue:a(o).active,"onUpdate:modelValue":m[11]||(m[11]=_=>a(o).active=_),label:"Aktif",disable:a(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),m[12]||(m[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Vd=Object.freeze(Object.defineProperty({__proto__:null,default:Sd},Symbol.toStringTag,{value:"Module"}));function Xt(c,s,u,o){const i=[];return c.forEach(n=>{o(n)===!0?i.push(n):s.push({failedPropValidation:u,file:n})}),i}function fa(c){c&&c.dataTransfer&&(c.dataTransfer.dropEffect="copy"),Yt(c)}const qd={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Cd=["rejected"];function Td({editable:c,dnd:s,getFileInput:u,addFilesToQueue:o}){const{props:i,emit:n,proxy:g}=Tt(),b=C(null),p=Z(()=>i.accept!==void 0?i.accept.split(",").map(O=>(O=O.trim(),O==="*"?"*/":(O.endsWith("/*")&&(O=O.slice(0,O.length-1)),O.toUpperCase()))):null),m=Z(()=>parseInt(i.maxFiles,10)),f=Z(()=>parseInt(i.maxTotalSize,10));function y(O){if(c.value)if(O!==Object(O)&&(O={target:null}),O.target!==null&&O.target.matches('input[type="file"]')===!0)O.clientX===0&&O.clientY===0&&On(O);else{const U=u();U&&U!==O.target&&U.click(O)}}function _(O){c.value&&O&&o(null,O)}function V(O,U,I,F){let N=Array.from(U||O.target.files);const h=[],j=()=>{h.length!==0&&n("rejected",h)};if(i.accept!==void 0&&p.value.indexOf("*/")===-1&&(N=Xt(N,h,"accept",P=>p.value.some($=>P.type.toUpperCase().startsWith($)||P.name.toUpperCase().endsWith($))),N.length===0))return j();if(i.maxFileSize!==void 0){const P=parseInt(i.maxFileSize,10);if(N=Xt(N,h,"max-file-size",$=>$.size<=P),N.length===0)return j()}if(i.multiple!==!0&&N.length!==0&&(N=[N[0]]),N.forEach(P=>{P.__key=P.webkitRelativePath+P.lastModified+P.name+P.size}),F===!0){const P=I.map($=>$.__key);N=Xt(N,h,"duplicate",$=>P.includes($.__key)===!1)}if(N.length===0)return j();if(i.maxTotalSize!==void 0){let P=F===!0?I.reduce(($,A)=>$+A.size,0):0;if(N=Xt(N,h,"max-total-size",$=>(P+=$.size,P<=f.value)),N.length===0)return j()}if(typeof i.filter=="function"){const P=i.filter(N);N=Xt(N,h,"filter",$=>P.includes($))}if(i.maxFiles!==void 0){let P=F===!0?I.length:0;if(N=Xt(N,h,"max-files",()=>(P++,P<=m.value)),N.length===0)return j()}if(j(),N.length!==0)return N}function q(O){fa(O),s.value!==!0&&(s.value=!0)}function x(O){Yt(O),(O.relatedTarget!==null||Zt.is.safari!==!0?O.relatedTarget!==b.value:document.elementsFromPoint(O.clientX,O.clientY).includes(b.value)===!1)===!0&&(s.value=!1)}function R(O){fa(O);const U=O.dataTransfer.files;U.length!==0&&o(null,U),s.value=!1}function H(O){if(s.value===!0)return Ce("div",{ref:b,class:`q-${O}__dnd absolute-full`,onDragenter:fa,onDragover:fa,onDragleave:x,onDrop:R})}return Object.assign(g,{pickFiles:y,addFiles:_}),{pickFiles:y,addFiles:_,onDragover:q,onDragleave:x,processFiles:V,getDndNode:H,maxFilesNumber:m,maxTotalSizeNumber:f}}const fo=Et({name:"QFile",inheritAttrs:!1,props:{...Un,...Xl,...qd,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...In,...Cd],setup(c,{slots:s,emit:u,attrs:o}){const{proxy:i}=Tt(),n=Dn(),g=C(null),b=C(!1),p=jn(c),{pickFiles:m,onDragover:f,onDragleave:y,processFiles:_,getDndNode:V}=Td({editable:n.editable,dnd:b,getFileInput:B,addFilesToQueue:S}),q=En(c),x=Z(()=>Object(c.modelValue)===c.modelValue?"length"in c.modelValue?Array.from(c.modelValue):[c.modelValue]:[]),R=Z(()=>Ka(x.value)),H=Z(()=>x.value.map(re=>re.name).join(", ")),O=Z(()=>An(x.value.reduce((re,Re)=>re+Re.size,0))),U=Z(()=>({totalSize:O.value,filesNumber:x.value.length,maxFiles:c.maxFiles})),I=Z(()=>({tabindex:-1,type:"file",title:"",accept:c.accept,capture:c.capture,name:p.value,...o,id:n.targetUid.value,disabled:n.editable.value!==!0})),F=Z(()=>"q-file q-field--auto-height"+(b.value===!0?" q-file--dnd":"")),N=Z(()=>c.multiple===!0&&c.append===!0);function h(re){const Re=x.value.slice();Re.splice(re,1),P(Re)}function j(re){const Re=x.value.indexOf(re);Re!==-1&&h(Re)}function P(re){u("update:modelValue",c.multiple===!0?re:re[0])}function $(re){re.keyCode===13&&Bn(re)}function A(re){(re.keyCode===13||re.keyCode===32)&&m(re)}function B(){return g.value}function S(re,Re){const Ge=_(re,Re,x.value,N.value),me=B();me!=null&&(me.value=""),Ge!==void 0&&((c.multiple===!0?c.modelValue&&Ge.every(L=>x.value.includes(L)):c.modelValue===Ge[0])||P(N.value===!0?x.value.concat(Ge):Ge))}function M(){return[Ce("input",{class:[c.inputClass,"q-file__filler"],style:c.inputStyle})]}function te(){if(s.file!==void 0)return x.value.length===0?M():x.value.map((Re,Ge)=>s.file({index:Ge,file:Re,ref:this}));if(s.selected!==void 0)return x.value.length===0?M():s.selected({files:x.value,ref:this});if(c.useChips===!0)return x.value.length===0?M():x.value.map((Re,Ge)=>Ce(Zl,{key:"file-"+Ge,removable:n.editable.value,dense:!0,textColor:c.color,tabindex:c.tabindex,onRemove:()=>{h(Ge)}},()=>Ce("span",{class:"ellipsis",textContent:Re.name})));const re=c.displayValue!==void 0?c.displayValue:H.value;return re.length!==0?[Ce("div",{class:c.inputClass,style:c.inputStyle,textContent:re})]:M()}function ue(){const re={ref:g,...I.value,...q.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:S};return c.multiple===!0&&(re.multiple=!0),Ce("input",re)}return Object.assign(n,{fieldClass:F,emitValue:P,hasValue:R,inputRef:g,innerValue:x,floatingLabel:Z(()=>R.value===!0||Ka(c.displayValue)),computedCounter:Z(()=>{if(c.counterLabel!==void 0)return c.counterLabel(U.value);const re=c.maxFiles;return`${x.value.length}${re!==void 0?" / "+re:""} (${O.value})`}),getControlChild:()=>V("file"),getControl:()=>{const re={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:c.tabindex};return n.editable.value===!0&&Object.assign(re,{onDragover:f,onDragleave:y,onKeydown:$,onKeyup:A}),Ce("div",re,[ue()].concat(te()))}}),Object.assign(i,{removeAtIndex:h,removeFile:j,getNativeElement:()=>g.value}),Mn(i,"nativeEl",()=>g.value),Nn(n)}}),Jt=Et({name:"QBanner",props:{...Oa,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(c,{slots:s}){const{proxy:{$q:u}}=Tt(),o=Ia(c,u),i=Z(()=>"q-banner row items-center"+(c.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(c.rounded===!0?" rounded-borders":"")),n=Z(()=>`q-banner__actions row items-center justify-end col-${c.inlineActions===!0?"auto":"all"}`);return()=>{const g=[Ce("div",{class:"q-banner__avatar col-auto row items-center self-start"},Bt(s.avatar)),Ce("div",{class:"q-banner__content col text-body2"},Bt(s.default))],b=Bt(s.action);return b!==void 0&&g.push(Ce("div",{class:n.value},b)),Ce("div",{class:i.value+(c.inlineActions===!1&&b!==void 0?" q-banner--top-padding":""),role:"alert"},g)}}}),Pd={class:"q-gutter-sm"},Rd={class:"col col-md-6 q-pa-xs"},il="Import Pelanggan",Od={__name:"Import",setup(c){const s=Qe({csv_file:null}),u=()=>{s.post(route("admin.customer.import"),{onSuccess:()=>{s.reset()},onError:()=>{We()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(G,null,[e(n,{title:il}),e(g,{"show-drawer-button":!0},{title:l(()=>[v(r(il))]),"left-button":l(()=>[t("div",Pd,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Rd,[e(Je,{class:"row",onSubmit:J(u,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(fo,{modelValue:a(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>a(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!a(s).errors.csv_file,"error-message":a(s).errors.csv_file,disable:a(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(s).processing||!a(s).csv_file,loading:a(s).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:i[2]||(i[2]=b=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),D(Jt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),D(Jt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Id=Object.freeze(Object.defineProperty({__proto__:null,default:Od},Symbol.toStringTag,{value:"Module"})),Ud={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Dd={class:"q-pa-xs"},jd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ed={key:0},Ad={key:2},Md={key:3},Nd={class:"flex justify-end"},dl="Pelanggan",Bd={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=Ie({search:"",status:"active",...Le()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"code",label:s.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];we(()=>{V()});const _=U=>ot({message:`Hapus Pelanggan ${U.name}?`,url:route("admin.customer.delete",U.id),fetchItemsCallback:V,loading:i}),V=(U=null)=>{Ke({pagination:m,filter:p,props:U,rows:o,url:route("admin.customer.data"),loading:i,tableRef:n})},q=()=>V(),x=U=>ee.get(route("admin.customer.detail",{id:U.id})),{protectClick:R}=At(),H=R(x),O=Z(()=>s.screen.gt.sm?f:f.filter(U=>U.name==="code"||U.name==="action"));return(U,I)=>{const F=X("i-head"),N=X("authenticated-layout");return d(),w(G,null,[e(F,{title:dl}),e(N,null,Be({title:l(()=>[v(r(dl))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=h=>u.value=!u.value)},null,8,["icon"]),U.$can("admin.customer.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=h=>a(ee).get(U.route("admin.customer.add")))})):k("",!0),U.$can("admin.customer.import")?(d(),D(E,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[3]||(I[3]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[U.$can("admin.customer.import")?ae((d(),D(oe,{key:0,clickable:"",onClick:I[2]||(I[2]=J(h=>a(ee).get(U.route("admin.customer.import")),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"csv"})]),_:1}),e(z,null,{default:l(()=>I[8]||(I[8]=[v("Import")])),_:1})]),_:1})),[[ie],[pe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",Dd,[e(Ue,{class:"full-height-table",style:He({height:a(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":I[7]||(I[7]=h=>m.value=h),filter:p.search,loading:i.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:h,message:j,filter:P})=>[t("div",jd,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:l(h=>[e(Pe,{props:h,class:Ve([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(j=>a(H)(h.row,j),["stop"])},{default:l(()=>[e(W,{key:"code",props:h,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.lt.md?(d(),D(T,{key:0,name:"person"})):k("",!0),v(" "+r(h.row.code),1)]),a(s).screen.lt.md?(d(),w(G,{key:0},[t("div",null,[a(s).screen.lt.md?(d(),D(T,{key:0,name:"person"})):k("",!0),v(" "+r(h.row.name),1)]),h.row.phone?(d(),w("div",Ed,[e(T,{name:"phone"}),v(" "+r(h.row.phone),1)])):k("",!0),h.row.address?(d(),D($e,{key:1,text:h.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),h.row.wallet_balance!=0?(d(),w("div",Ad,[e(T,{name:"wallet"}),v(" Wallet: Rp. "+r(a(K)(h.row.wallet_balance)),1)])):k("",!0),h.row.balance!=0?(d(),w("div",Md,[e(T,{name:"wallet"}),v(" Utang: Rp. "+r(a(K)(h.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"name",props:h},{default:l(()=>[v(r(h.row.name),1)]),_:2},1032,["props"]),e(W,{key:"wallet_balance",props:h},{default:l(()=>[v(r(a(K)(h.row.wallet_balance)),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:h},{default:l(()=>[v(r(a(K)(h.row.balance)),1)]),_:2},1032,["props"]),e(W,{key:"phone",props:h},{default:l(()=>[v(r(h.row.phone),1)]),_:2},1032,["props"]),e(W,{key:"address",props:h},{default:l(()=>[e($e,{text:h.row.address},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:h},{default:l(()=>[t("div",Nd,[U.$can("admin.customer.add")||U.$can("admin.customer.edit")||U.$can("admin.customer.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[6]||(I[6]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[U.$can("admin.customer.add")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(j=>a(ee).get(U.route("admin.customer.duplicate",h.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(z,null,{default:l(()=>I[9]||(I[9]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),U.$can("admin.customer.edit")?ae((d(),D(oe,{key:1,clickable:"",onClick:J(j=>a(ee).get(U.route("admin.customer.edit",h.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>I[10]||(I[10]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),U.$can("admin.customer.delete")?ae((d(),D(oe,{key:2,onClick:J(j=>_(h.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>I[11]||(I[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Ud,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[4]||(I[4]=h=>p.status=h),q],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[5]||(I[5]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Fd=Object.freeze(Object.defineProperty({__proto__:null,default:Bd},Symbol.toStringTag,{value:"Module"})),zd={class:"q-pb-sm"},Ld={class:"row q-col-gutter-sm"},Kd={class:"row items-center no-wrap"},Hd={class:"q-ml-md"},Yd={class:"text-subtitle2 text-grey-8"},Wd={class:"text-h6 text-weight-bold"},go={__name:"ActualSummaryCard",props:{dashboardData:{type:Object,required:!0}},setup(c){const s=c,u=Z(()=>[{label:"Total Pelanggan Aktif",value:s.dashboardData.summary.total_active_customer,icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Saldo Wallet",value:K(s.dashboardData.summary.total_wallet_balance),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Penjualan",value:K(s.dashboardData.summary.total_sales),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Transaksi",value:K(s.dashboardData.summary.total_transactions),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(o,i)=>(d(),w("div",zd,[i[0]||(i[0]=t("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"},"Ringkasan Statistik",-1)),t("div",Ld,[(d(!0),w(G,null,Ne(u.value,(n,g)=>(d(),w("div",{key:g,class:"col-12 col-md-6"},[e(fe,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:l(()=>[t("div",Kd,[e(aa,{icon:n.icon,color:n.color,"text-color":n.bgColor},null,8,["icon","color","text-color"]),t("div",Hd,[t("div",Yd,r(n.label),1),t("div",Wd,r(n.value),1)])])]),_:2},1024)]))),128))])]))}},Qd=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"})),Jd={class:"row q-col-gutter-sm q-pb-sm"},Gd={class:"col-md-6 col-12"},Xd={class:"col-md-6 col-12"},Zd={__name:"ChartCard",props:{dashboardData:{type:Object,required:!0}},setup(c){Fn([zn,Ln,Kn,Hn,Yn,Wn,Qn]);const s=c,u=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=Z(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(n){let g=n[0].name+"<br/>";return n.forEach(function(b){g+=b.marker+" "+b.seriesName+": "+K(b.value)+"<br/>"}),g}},xAxis:{type:"category",data:s.dashboardData.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:n=>K(n),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:s.dashboardData.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:u[0]}}]})),i=Z(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(n){return n.name+"<br/>"+n.seriesName+": "+K(n.value)+" ("+n.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:s.dashboardData.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:n=>u[n.dataIndex%u.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(n,g)=>(d(),w("div",Jd,[t("div",Gd,[e(fe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[g[0]||(g[0]=t("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),e(a(Ha),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",Xd,[e(fe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:l(()=>[g[1]||(g[1]=t("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),e(a(Ha),{class:"chart",option:i.value,autoresize:""},null,8,["option"])]),_:1})])]))}},bo=_t(Zd,[["__scopeId","data-v-b9cdf915"]]),eu=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),tu={class:"row q-col-gutter-sm q-pb-sm"},au={class:"col-md-6 col-12"},lu={class:"col-md-6 col-12"},vo={__name:"TopCard",props:{dashboardData:{type:Object,required:!0}},setup(c){return(s,u)=>(d(),w("div",tu,[t("div",au,[e(fe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[u[0]||(u[0]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),e(ze,{separator:""},{default:l(()=>[(d(!0),w(G,null,Ne(c.dashboardData.top_customers_sales,(o,i)=>(d(),D(oe,{key:i},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(aa,{color:"primary","text-color":"white",size:"sm"},{default:l(()=>[v(r(i+1),1)]),_:2},1024)]),_:2},1024),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>[v(r(o.name),1)]),_:2},1024)]),_:2},1024),e(z,{side:""},{default:l(()=>[e(he,{class:"text-primary"},{default:l(()=>[v(r(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",lu,[e(fe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:l(()=>[u[1]||(u[1]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),e(ze,{separator:""},{default:l(()=>[(d(!0),w(G,null,Ne(c.dashboardData.top_customers_topup,(o,i)=>(d(),D(oe,{key:i},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(aa,{color:"green-7","text-color":"white",size:"sm"},{default:l(()=>[v(r(i+1),1)]),_:2},1024)]),_:2},1024),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>[v(r(o.name),1)]),_:2},1024)]),_:2},1024),e(z,{side:""},{default:l(()=>[e(he,{class:"text-green-7"},{default:l(()=>[v(r(a(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]))}},ou=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),nu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},su={class:"q-pa-xs"},ru={class:"q-pa-none"},ul="Dashboard",iu={__name:"Index",setup(c){const s=ge(),u=C({summary:{total_active_customer:s.props.data.active_customer_count,total_sales:155e5,total_transactions:1250,total_wallet_balance:s.props.data.total_customer_wallet_balance,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),o=C(!1),i=C(Le().month??"this_month"),n=C([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),g=()=>{ee.visit(route("admin.dashboard",{month:i.value}))};return(b,p)=>{const m=X("i-head"),f=X("authenticated-layout");return d(),w(G,null,[e(m,{title:ul}),e(f,null,Be({title:l(()=>[v(r(ul))]),"right-button":l(()=>[e(E,{class:"q-ml-sm",icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:p[0]||(p[0]=y=>o.value=!o.value)},null,8,["icon"])]),default:l(()=>[t("div",su,[t("div",ru,[e(go,{dashboardData:u.value},null,8,["dashboardData"])]),e(bo,{dashboardData:u.value},null,8,["dashboardData"]),e(vo,{dashboardData:u.value},null,8,["dashboardData"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar"},{default:l(()=>[t("div",nu,[e(ce,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:i.value,"onUpdate:modelValue":[p[1]||(p[1]=y=>i.value=y),g],options:n.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},du=Object.freeze(Object.defineProperty({__proto__:null,default:iu},Symbol.toStringTag,{value:"Module"})),uu={class:"row"},mu={class:"row q-col-gutter-sm"},cu={class:"col-sm-6 col-xs-12"},pu={class:"col-sm-6 col-xs-12"},fu={class:"col-md-3 col-sm-6 col-xs-12"},gu={class:"col-md-3 col-sm-6 col-xs-12"},bu={class:"col-md-3 col-sm-6 col-xs-12"},vu={class:"col-md-3 col-sm-6 col-xs-12"};const yu={__name:"SummaryCard",setup(c){const s=ge(),u=(o,i)=>{const g={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...i};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(g)),ee.visit(o,{data:g})};return(o,i)=>(d(),w("div",uu,[e(fe,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:l(()=>[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",mu,[t("div",cu,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[0]||(i[0]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(z,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(he,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[v(r(a(s).props.data.active_customer_count),1)]),_:1}),e(he,null,{default:l(()=>i[5]||(i[5]=[v("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",pu,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[1]||(i[1]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:l(()=>[e(z,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(he,{class:"text-white text-h6 text-weight-bolder"},{default:l(()=>[v(r(o.$page.props.data.active_user_count),1)]),_:1}),e(he,null,{default:l(()=>i[6]||(i[6]=[v("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",fu,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(z,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(he,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(K)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(he,null,{default:l(()=>i[7]||(i[7]=[v("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",gu,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(z,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(he,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(K)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(he,null,{default:l(()=>i[8]||(i[8]=[v("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",bu,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:l(()=>[e(z,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(he,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(K)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(he,null,{default:l(()=>i[9]||(i[9]=[v("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",vu,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:l(()=>[e(z,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:l(()=>[e(T,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:l(()=>[e(he,{class:"text-white text-weight-bold"},{default:l(()=>[v(" Rp. "+r(a(K)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(he,null,{default:l(()=>i[10]||(i[10]=[v("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},_u=Object.freeze(Object.defineProperty({__proto__:null,default:yu},Symbol.toStringTag,{value:"Module"})),ku={class:"detail"},yo={__name:"MainInfoTab",setup(c){const s=ge();return(u,o)=>(d(),w("table",ku,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.FINANCE_ACCOUNT_TYPES[a(s).props.data.type]),1)]),a(s).props.data.type=="bank"?(d(),w(G,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(s).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},wu=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),hu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},$u={class:"flex q-gutter-sm"},xu={key:0},_o={__name:"HistoryTab",setup(c){const s=ge(),u=xe(),o=C(null),i=C([]),n=C(!0),g=Ie({...Le()}),b=et(null,117),p=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),m=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],f=Z(()=>u.screen.gt.sm?m:m.filter(_=>_.name==="code"));we(()=>{y()});const y=(_=null)=>Ke({pagination:p,filter:g,props:_,rows:i,url:route("admin.finance-transaction.data",{filter:{account_id:s.props.data.id}}),loading:n,tableRef:o});return(_,V)=>(d(),D(Ue,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:He({height:a(b)}),color:"primary",class:"full-height-table","row-key":"id",pagination:p.value,"onUpdate:pagination":V[0]||(V[0]=q=>p.value=q),filter:g.search,loading:n.value,columns:f.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({message:q,filter:x})=>[t("div",hu,[t("span",null,r(q)+" "+r(x?" with term "+x:""),1)])]),body:l(q=>[e(Pe,{props:q},{default:l(()=>[e(W,{key:"code",props:q},{default:l(()=>[t("div",$u,[t("div",null,[a(u).screen.lt.md?(d(),D(T,{key:0,name:"tag",class:"inline-icon"})):k("",!0),v(" "+r(q.row.code),1)])]),a(u).screen.lt.md?(d(),w(G,{key:0},[t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)(q.row.datetime)),1)]),q.row.creator?(d(),w("div",xu,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(q.row.creator.username),1)])):k("",!0),t("div",{class:Ve([q.row.amount>0?"text-green":"text-red","text-bold"])},[e(T,{class:"inline-icon",name:"money"}),v(" "+r(a(la)(q.row.amount))+"Rp. "+r(a(K)(Math.abs(q.row.amount))),1)],2),t("div",null,[e(bt,{color:q.row.amount>0?"green":"red"},{default:l(()=>[v(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[q.row.type]),1)]),_:2},1032,["color"])]),e($e,{text:q.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"datetime",props:q},{default:l(()=>[v(r(a(ve)(q.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"type",props:q},{default:l(()=>[e(bt,{color:q.row.amount>0?"green":"red"},{default:l(()=>[v(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[q.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(W,{key:"amount",props:q,class:Ve(q.row.amount>0?"text-green":"text-red")},{default:l(()=>[v(r(a(la)(q.row.amount)+a(K)(Math.abs(q.row.amount))),1)]),_:2},1032,["props","class"]),e(W,{key:"notes",props:q},{default:l(()=>[e($e,{text:q.row.notes,icon:_.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},Su=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),Vu={class:"q-gutter-sm"},qu={class:"q-gutter-sm"},Cu={class:"col q-pa-xs"},Tu={class:"row"},ml="Rincian Akun",Pu={__name:"Detail",setup(c){const s=ge(),u=C("main");return(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(G,null,[e(n,{title:ml}),e(g,null,{title:l(()=>[v(r(ml))]),"left-button":l(()=>[t("div",Vu,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":l(()=>[t("div",qu,[o.$can("admin.finance-account.edit")?(d(),D(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>a(ee).get(o.route("admin.finance-account.edit",{id:a(s).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Cu,[t("div",Tu,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ot,{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=b=>u.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Info Akun"}),e(dt,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(It,{modelValue:u.value,"onUpdate:modelValue":i[3]||(i[3]=b=>u.value=b),animated:""},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(yo)]),_:1}),e(ut,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(_o)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Ru=Object.freeze(Object.defineProperty({__proto__:null,default:Pu},Symbol.toStringTag,{value:"Module"})),Ou={style:{"margin-left":"-10px"}},Ct={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c){return(s,u)=>(d(),w("div",Ou,[e(sa,{class:"full-width q-pl-none","model-value":c.modelValue,"onUpdate:modelValue":u[0]||(u[0]=o=>s.$emit("update:modelValue",o)),disable:c.disable,label:c.label},null,8,["model-value","disable","label"])]))}},Iu={class:"q-gutter-sm"},Uu={class:"col col-md-6 q-pa-xs"},Du={__name:"Editor",setup(c){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Qe({id:s.props.data.id,name:s.props.data.name,type:s.props.data.type,bank:s.props.data.bank,number:s.props.data.number,holder:s.props.data.holder,balance:parseFloat(s.props.data.balance),active:!!s.props.data.active,has_wallet_access:!!s.props.data.has_wallet_access,show_in_pos_payment:!!s.props.data.show_in_pos_payment,show_in_purchasing_payment:!!s.props.data.show_in_purchasing_payment,notes:s.props.data.notes}),i=tt(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),n=()=>nt({form:o,url:route("admin.finance-account.save")}),g=b=>{b==="cashier_cash"&&(o.show_in_pos_payment=!0)};return we(()=>{g(o.type)}),Me(()=>o.type,b=>{g(b)}),(b,p)=>{const m=X("i-head"),f=X("authenticated-layout");return d(),w(G,null,[e(m,{title:u}),e(f,null,{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",Iu,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=y=>b.$inertia.get(b.route("admin.finance-account.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Uu,[e(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=y=>a(o).id=y)},null,512),[[yt,a(o).id]]),e(ne,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":p[2]||(p[2]=y=>a(o).name=y),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":p[3]||(p[3]=y=>a(o).type=y),label:"Jenis Akun",options:a(i),"map-options":"","emit-value":"",error:!!a(o).errors.type,disable:a(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),a(o).type=="bank"?(d(),w(G,{key:0},[e(ne,{modelValue:a(o).bank,"onUpdate:modelValue":p[4]||(p[4]=y=>a(o).bank=y),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!a(o).errors.bank,disable:a(o).processing,"error-message":a(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(o).number,"onUpdate:modelValue":p[5]||(p[5]=y=>a(o).number=y),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!a(o).errors.number,disable:a(o).processing,"error-message":a(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(o).holder,"onUpdate:modelValue":p[6]||(p[6]=y=>a(o).holder=y),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!a(o).errors.holder,disable:a(o).processing,"error-message":a(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Ee,{modelValue:a(o).balance,"onUpdate:modelValue":p[7]||(p[7]=y=>a(o).balance=y),label:"Saldo",lazyRules:"",disable:a(o).processing,"allow-negative":!0,error:!!a(o).errors.balance,errorMessage:a(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ne,{modelValue:a(o).notes,"onUpdate:modelValue":p[8]||(p[8]=y=>a(o).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Ct,{modelValue:a(o).active,"onUpdate:modelValue":p[9]||(p[9]=y=>a(o).active=y),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),p[14]||(p[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(Ct,{modelValue:a(o).show_in_pos_payment,"onUpdate:modelValue":p[10]||(p[10]=y=>a(o).show_in_pos_payment=y),disable:a(o).processing||a(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(Ct,{modelValue:a(o).show_in_purchasing_payment,"onUpdate:modelValue":p[11]||(p[11]=y=>a(o).show_in_purchasing_payment=y),disable:a(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(Ct,{modelValue:a(o).has_wallet_access,"onUpdate:modelValue":p[12]||(p[12]=y=>a(o).has_wallet_access=y),disable:a(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:p[13]||(p[13]=y=>a(ee).get(b.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ju=Object.freeze(Object.defineProperty({__proto__:null,default:Du},Symbol.toStringTag,{value:"Module"})),Eu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Au={class:"q-pa-xs"},Mu={class:"q-my-sm text-subtitle"},Nu={class:"text-bold text-grey-8"},Bu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Fu={class:"text-bold text-grey-9"},zu={class:"text-grey-9"},Lu={key:0},Ku={key:1},Hu={key:0},Yu={class:"flex justify-end"},cl="Akun Kas",Wu={__name:"Index",setup(c){const s=ge(),u=xe(),o=C(!1),i=C([]),n=C(null),g=C(null),b=et(g,117),p=C(!0),m=Ie({search:"",status:"active",type:"all",...Le()}),f=s.props.totalBalance,y=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],V=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],q=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];we(()=>{R()});const x=N=>ot({message:`Hapus Akun ${N.name}?`,url:route("admin.finance-account.delete",N.id),fetchItemsCallback:R,loading:p}),R=(N=null)=>{Ke({pagination:y,filter:m,props:N,rows:i,url:route("admin.finance-account.data"),loading:p,tableRef:n})},H=()=>R(),O=N=>ee.get(route("admin.finance-account.detail",{id:N.id})),{protectClick:U}=At(),I=U(O),F=Z(()=>u.screen.gt.sm?_:_.filter(N=>N.name==="name"||N.name==="action"));return(N,h)=>{const j=X("i-head"),P=X("authenticated-layout");return d(),w(G,null,[e(j,{title:cl}),e(P,null,Be({title:l(()=>[v(r(cl))]),"right-button":l(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=$=>o.value=!o.value)},null,8,["icon"]),N.$can("admin.finance-account.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=$=>a(ee).get(N.route("admin.finance-account.add")))})):k("",!0)]),default:l(()=>[t("div",Au,[e(fe,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:l(()=>[t("div",Mu,[h[7]||(h[7]=v(" Total Saldo Akun Aktif: ")),t("span",Nu,"Rp. "+r(a(K)(a(f))),1)])]),_:1}),e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",style:He({height:a(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":h[6]||(h[6]=$=>y.value=$),filter:m.search,loading:p.value,columns:F.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:R,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:$,message:A,filter:B})=>[t("div",Bu,[t("span",null,r(A)+" "+r(B?" with term "+B:""),1)])]),body:l($=>[e(Pe,{props:$,class:Ve([$.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(A=>a(I)($.row,A),["stop"])},{default:l(()=>[e(W,{key:"name",props:$,class:"wrap-column"},{default:l(()=>[t("div",Fu,r($.row.name),1),t("div",zu,[$.row.type=="bank"?(d(),w("div",Lu,[e(T,{name:"wallet",class:"inline-icon"}),v(" Rekening "+r($.row.bank??"-")+" "+r($.row.number??"-")+" a.n. "+r($.row.holder??"-"),1)])):k("",!0),$.row.notes?(d(),w("div",Ku,[e(T,{name:"notes"}),v(" "+r($.row.notes),1)])):k("",!0)]),a(u).screen.lt.md?(d(),w("div",Hu,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)($.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"type",props:$},{default:l(()=>[v(r(N.$CONSTANTS.FINANCE_ACCOUNT_TYPES[$.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:$},{default:l(()=>[v(r(a(K)($.row.balance)),1)]),_:2},1032,["props"]),e(W,{key:"action",props:$},{default:l(()=>[t("div",Yu,[N.$can("admin.finance-account.add")||N.$can("admin.finance-account.edit")||N.$can("admin.finance-account.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[5]||(h[5]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[N.$can("admin.finance-account.add")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(A=>a(ee).get(N.route("admin.finance-account.duplicate",$.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(z,null,{default:l(()=>h[8]||(h[8]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),N.$can("admin.finance-account.edit")?ae((d(),D(oe,{key:1,clickable:"",onClick:J(A=>a(ee).get(N.route("admin.finance-account.edit",$.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>h[9]||(h[9]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),N.$can("admin.finance-account.delete")?ae((d(),D(oe,{key:2,onClick:J(A=>x($.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>h[10]||(h[10]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Eu,[e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.type,"onUpdate:modelValue":[h[2]||(h[2]=$=>m.type=$),H],options:q,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[h[3]||(h[3]=$=>m.status=$),H],options:V,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":h[4]||(h[4]=$=>m.search=$),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Qu=Object.freeze(Object.defineProperty({__proto__:null,default:Wu},Symbol.toStringTag,{value:"Module"})),Ju={class:"q-gutter-sm"},Gu={class:"col col-md-6 q-pa-xs"},Xu={class:"row"},Zu={class:"detail"},em={key:0},tm={key:1},am={key:2},lm={key:3},om={colspan:"3",class:"bg-white"},pl="Rincian Transaksi",nm={__name:"Detail",setup(c){const s=ge();return(u,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return d(),w(G,null,[e(i,{title:pl}),e(g,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Ju,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.finance-transaction.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(pl))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Gu,[t("div",Xu,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",Zu,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.datetime)),1)]),a(s).props.data.account?(d(),w("tr",em,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[e(n,{href:u.route("admin.finance-account.detail",a(s).props.data.account.id)},{default:l(()=>[v(r(a(s).props.data.account.name),1)]),_:1},8,["href"]),a(s).props.data.account.type==="bank"?(d(),w(G,{key:0},[v(" Rek "+r(a(s).props.data.account.bank)+" an "+r(a(s).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),v(" "+r(a(s).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),a(s).props.data.type?(d(),w("tr",tm,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.FINANCE_TRANSACTION_TYPES[a(s).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(oa)(a(s).props.data.amount)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(d(),w("tr",am,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(d(),w("tr",lm,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(d(),w(G,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",om,[e(ia,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},sm=Object.freeze(Object.defineProperty({__proto__:null,default:nm},Symbol.toStringTag,{value:"Module"})),rm={class:"q-gutter-sm"},im={class:"col col-md-6 q-pa-xs"},dm={__name:"Editor",setup(c){var b;const s=ge(),u=(s.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=s.props.accounts.map(p=>({label:p.name,value:p.id})),i=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],n=Qe({id:s.props.data.id,account_id:s.props.data.account_id,to_account_id:s.props.data.to_account_id??null,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((b=s.props.data)==null?void 0:b.image_path)??"",image:null}),g=()=>{da(n,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:n,url:route("admin.finance-transaction.save")})};return(p,m)=>{const f=X("i-head"),y=X("authenticated-layout");return d(),w(G,null,[e(f,{title:u}),e(y,null,{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",rm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>p.$inertia.get(p.route("admin.finance-transaction.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",im,[e(Je,{class:"row",onSubmit:J(g,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[1]||(m[1]=_=>a(n).id=_)},null,512),[[yt,a(n).id]]),e(Kt,{modelValue:a(n).datetime,"onUpdate:modelValue":m[2]||(m[2]=_=>a(n).datetime=_),label:"Waktu",error:!!a(n).errors.datetime,disable:a(n).processing,errorMessage:a(n).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{autofocus:"",modelValue:a(n).type,"onUpdate:modelValue":m[3]||(m[3]=_=>a(n).type=_),label:"Jenis Transaksi",options:i,"map-options":"","emit-value":"",error:!!a(n).errors.type,disable:a(n).processing,errorMessage:a(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{class:"custom-select",modelValue:a(n).account_id,"onUpdate:modelValue":m[4]||(m[4]=_=>a(n).account_id=_),label:a(n).type=="transfer"?"Akun Asal":"Akun",options:a(o),"map-options":"","emit-value":"",errorMessage:a(n).errors.account_id,error:!!a(n).errors.account_id,disable:a(n).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),a(n).type=="transfer"?(d(),D(ce,{key:0,class:"custom-select",modelValue:a(n).to_account_id,"onUpdate:modelValue":m[5]||(m[5]=_=>a(n).to_account_id=_),label:"Akun Tujuan",options:a(o),"map-options":"","emit-value":"",errorMessage:a(n).errors.to_account_id,error:!!a(n).errors.to_account_id,disable:a(n).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Ee,{modelValue:a(n).amount,"onUpdate:modelValue":m[6]||(m[6]=_=>a(n).amount=_),label:"Jumlah",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.amount,errorMessage:a(n).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ne,{modelValue:a(n).notes,"onUpdate:modelValue":m[7]||(m[7]=_=>a(n).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(n).processing,error:!!a(n).errors.notes,"error-message":a(n).errors.notes,rules:[_=>_&&_.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Ua,{modelValue:a(n).image,"onUpdate:modelValue":m[8]||(m[8]=_=>a(n).image=_),"initial-image-path":a(n).image_path,disabled:a(n).processing,error:!!a(n).errors.image||!!a(n).errors.image_path,"error-message":a(n).errors.image||a(n).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(n).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:a(n).processing,onClick:m[9]||(m[9]=_=>a(ee).get(p.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},um=Object.freeze(Object.defineProperty({__proto__:null,default:dm},Symbol.toStringTag,{value:"Module"})),mm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},cm={class:"q-pa-xs"},pm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},fm={class:"text-grey-8"},gm={class:"text-bold text-grey-8"},bm={class:"flex justify-end no-wrap"},fl="Transaksi Kas",vm={__name:"Index",setup(c){const s=ge(),u=xe(),o=C(!1),i=C([]),n=C(!0),g=C(null),b=C(null),p=et(b),m=zt(),f=Lt(),y=[{label:"Semua",value:"all"},...s.props.accounts.map(P=>({label:P.name,value:P.id}))],_=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...Pt(m-2,m-1).reverse()],V=[{value:"all",label:"Semua Bulan"},...Rt()],q=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],x=Ie({search:"",type:"all",account_id:"all",year:m,month:f,...Le()}),R=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),H=[{name:"id",label:u.screen.lt.md?"Item":"Kode",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];we(()=>{U()});const O=P=>ot({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${P.code}?`,url:route("admin.finance-transaction.delete",P.id),fetchItemsCallback:U,loading:n}),U=(P=null)=>{Ke({pagination:R,filter:x,props:P,rows:i,url:route("admin.finance-transaction.data"),loading:n,tableRef:g})},I=()=>{U()},F=Z(()=>u.screen.gt.sm?H:H.filter(P=>P.name==="id"||P.name==="action"));Me(()=>x.year,P=>{P===null&&(x.month=null)});const N=C(null),h=C(!1),j=P=>{N.value=P,h.value=!0};return(P,$)=>{const A=X("i-head"),B=X("authenticated-layout");return d(),w(G,null,[e(A,{title:fl}),e(B,null,Be({title:l(()=>[v(r(fl))]),"right-button":l(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=S=>o.value=!o.value)},null,8,["icon"]),P.$can("admin.finance-transaction.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=S=>a(ee).get(P.route("admin.finance-transaction.add")))})):k("",!0)]),default:l(()=>[t("div",cm,[e(Ue,{ref_key:"tableRef",ref:g,style:He({height:a(p)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:R.value,"onUpdate:pagination":$[8]||($[8]=S=>R.value=S),filter:x.search,loading:n.value,columns:F.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:U,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:M,filter:te})=>[t("div",pm,[t("span",null,r(M)+" "+r(te?" with term "+te:""),1)])]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:J(M=>a(ee).get(P.route("admin.finance-transaction.detail",{id:S.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:S},{default:l(()=>[t("div",null,[a(u).screen.lt.md?(d(),D(T,{key:0,class:"inline-icon",name:"tag"})):k("",!0),v(" "+r(S.row.code),1)]),a(u).screen.lt.md?(d(),w(G,{key:0},[t("div",fm,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(ve)(S.row.datetime)),1)]),t("div",gm,[e(T,{name:"wallet",class:"inline-icon"}),v(" "+r(S.row.account.name),1)]),t("div",{class:Ve(["text-bold",S.row.amount<0?"text-red":"text-green"])},[e(T,{name:"money",class:"inline-icon"}),v(" "+r(a(la)(S.row.amount)+"Rp."+a(K)(Math.abs(S.row.amount))),1)],2),S.row.notes?(d(),D($e,{key:0,icon:"notes",text:S.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(bt,{color:S.row.amount>0?"green":"red"},{default:l(()=>[v(r(S.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"datetime",props:S,class:"wrap-column"},{default:l(()=>[v(r(a(ve)(S.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"account",props:S},{default:l(()=>{var M;return[v(r((M=S.row.account)==null?void 0:M.name),1)]}),_:2},1032,["props"]),e(W,{key:"type",props:S},{default:l(()=>[v(r(P.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"amount",props:S,style:{"text-align":"right"}},{default:l(()=>[v(r(a($t)(S.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:S,class:"wrap-column"},{default:l(()=>[v(r(S.row.notes),1)]),_:2},1032,["props"]),e(W,{key:"action",props:S},{default:l(()=>[t("div",bm,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:S.row.image_path===null||S.row.image_path==="",onClick:J(M=>j(S.row.image_path),["stop"])},{default:l(()=>[S.row.image_path!=null?(d(),D(Gt,{key:0},{default:l(()=>$[10]||($[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.finance-transaction.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[7]||($[7]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.finance-transaction.delete")?ae((d(),D(oe,{key:0,onClick:J(M=>O(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>$[11]||($[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ba,{modelValue:h.value,"onUpdate:modelValue":$[9]||($[9]=S=>h.value=S),imageUrl:`/${N.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",mm,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[$[2]||($[2]=S=>x.year=S),I],options:_,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(d(),D(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[$[3]||($[3]=S=>x.month=S),I],options:V,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.type,"onUpdate:modelValue":[$[4]||($[4]=S=>x.type=S),I],options:q,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:x.account_id,"onUpdate:modelValue":[$[5]||($[5]=S=>x.account_id=S),I],label:"Akun",options:y,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":$[6]||($[6]=S=>x.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ym=Object.freeze(Object.defineProperty({__proto__:null,default:vm},Symbol.toStringTag,{value:"Module"})),_m={class:"q-gutter-sm"},km={class:"col col-md-6 q-pa-xs"},wm={__name:"Editor",setup(c){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description}),i=()=>nt({form:o,url:route("admin.operational-cost-category.save")});return(n,g)=>{const b=X("i-head"),p=X("authenticated-layout");return d(),w(G,null,[e(b,{title:u}),e(p,null,{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",_m,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=m=>n.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",km,[e(Je,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=m=>a(o).id=m)},null,512),[[yt,a(o).id]]),e(ne,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":g[2]||(g[2]=m=>a(o).name=m),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[m=>m&&m.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).description,"onUpdate:modelValue":g[3]||(g[3]=m=>a(o).description=m),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(o).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:a(o).processing,onClick:g[4]||(g[4]=m=>a(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},hm=Object.freeze(Object.defineProperty({__proto__:null,default:wm},Symbol.toStringTag,{value:"Module"})),$m={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},xm={class:"q-pa-xs"},Sm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Vm={key:0,class:"text-grey-8"},qm={class:"flex justify-end"},gl="Kategori Biaya Operasional",Cm={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=Ie({search:"",...Le()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];we(()=>{_()});const y=q=>ot({message:`Hapus Kategori Biaya ${q.name}?`,url:route("admin.operational-cost-category.delete",q.id),fetchItemsCallback:_,loading:i}),_=(q=null)=>{Ke({pagination:m,filter:p,props:q,rows:o,url:route("admin.operational-cost-category.data"),loading:i,tableRef:n})},V=Z(()=>s.screen.gt.sm?f:f.filter(q=>q.name==="name"||q.name==="action"));return(q,x)=>{const R=X("i-head"),H=X("authenticated-layout");return d(),w(G,null,[e(R,{title:gl}),e(H,null,Be({title:l(()=>[v(r(gl))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=O=>u.value=!u.value)},null,8,["icon"]),q.$can("admin.operational-cost-category.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=O=>a(ee).get(q.route("admin.operational-cost-category.add")))})):k("",!0)]),default:l(()=>[t("div",xm,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",style:He({height:a(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":x[4]||(x[4]=O=>m.value=O),filter:p.search,loading:i.value,columns:V.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:O,message:U,filter:I})=>[t("div",Sm,[t("span",null,r(U)+" "+r(I?" with term "+I:""),1)])]),body:l(O=>[e(Pe,{props:O},{default:l(()=>[e(W,{key:"name",props:O,class:"wrap-column"},{default:l(()=>[v(r(O.row.name)+" ",1),a(s).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[O.row.description?(d(),w("div",Vm,[e(T,{name:"description"}),v(" "+r(O.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"description",props:O,class:"wrap-column"},{default:l(()=>[v(r(O.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:O},{default:l(()=>[t("div",qm,[q.$can("admin.operational-cost-category.add")||q.$can("admin.operational-cost-category.edit")||q.$can("admin.operational-cost-category.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[q.$can("admin.operational-cost-category.add")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(U=>a(ee).get(q.route("admin.operational-cost-category.duplicate",O.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(z,null,{default:l(()=>x[5]||(x[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),q.$can("admin.operational-cost-category.edit")?ae((d(),D(oe,{key:1,clickable:"",onClick:J(U=>a(ee).get(q.route("admin.operational-cost-category.edit",O.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>x[6]||(x[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),q.$can("admin.operational-cost-category.delete")?ae((d(),D(oe,{key:2,onClick:J(U=>y(O.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>x[7]||(x[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",$m,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":x[2]||(x[2]=O=>p.search=O),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Tm=Object.freeze(Object.defineProperty({__proto__:null,default:Cm},Symbol.toStringTag,{value:"Module"})),Pm={class:"q-gutter-sm"},Rm={class:"col col-md-6 q-pa-xs"},Om={class:"row"},Im={class:"detail"},Um={key:0},Dm={key:1},jm={key:2},Em={key:3},Am={colspan:"3",class:"bg-white"},bl="Rincian Biaya Operasional",Mm={__name:"Detail",setup(c){const s=ge();return(u,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return d(),w(G,null,[e(i,{title:bl}),e(g,{"show-drawer-button":!0},{"left-button":l(()=>[t("div",Pm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.operational-cost.index")))})])]),title:l(()=>[t("span",{class:"text-subtitle2"},r(bl))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Rm,[t("div",Om,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[o[22]||(o[22]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",Im,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(a(na)(a(s).props.data.date)),1)]),a(s).props.data.finance_account?(d(),w("tr",Um,[o[7]||(o[7]=t("td",null,"Akun",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,[e(n,{href:u.route("admin.finance-account.detail",a(s).props.data.finance_account.id)},{default:l(()=>[v(r(a(s).props.data.finance_account.name),1)]),_:1},8,["href"]),a(s).props.data.finance_account.type==="bank"?(d(),w(G,{key:0},[o[5]||(o[5]=t("br",null,null,-1)),v(" Rek "+r(a(s).props.data.finance_account.bank)+" an "+r(a(s).props.data.finance_account.holder)+" ",1),o[6]||(o[6]=t("br",null,null,-1)),v(" "+r(a(s).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),a(s).props.data.category?(d(),w("tr",Dm,[o[9]||(o[9]=t("td",null,"Kategori",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.category.name),1)])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Deskripsi",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.description),1)]),t("tr",null,[o[13]||(o[13]=t("td",null,"Jumlah",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(a(K)(a(s).props.data.amount)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Catatan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)]),a(s).props.data.creator?(d(),w("tr",jm,[o[17]||(o[17]=t("td",null,"Dibuat",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.created_at))+" oleh "+r(a(s).props.data.creator.name),1)])):k("",!0),a(s).props.data.updater?(d(),w("tr",Em,[o[19]||(o[19]=t("td",null,"Diperbarui",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.updated_at))+" oleh "+r(a(s).props.data.updater.name),1)])):k("",!0),a(s).props.data.image_path?(d(),w(G,{key:4},[o[21]||(o[21]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Am,[e(ia,{src:`/${a(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Nm=Object.freeze(Object.defineProperty({__proto__:null,default:Mm},Symbol.toStringTag,{value:"Module"})),Bm={class:"row items-center justify-end"},Fm={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(c,{emit:s}){const u=c,o=s,i=C(""),n=C(""),g=m=>{let f=!0;const y=u.minDate?rt.formatDate(u.minDate,"YYYY/MM/DD"):null,_=u.maxDate?rt.formatDate(u.maxDate,"YYYY/MM/DD"):null;return y&&(f=f&&rt.isBetweenDates(m,y,"2999/01/01",{inclusiveFrom:!0})),_&&(f=f&&rt.isBetweenDates(m,"1900/01/01",_,{inclusiveTo:!0})),f},b=Z(()=>[m=>!!m||"Tanggal harus diisi",m=>{const f=rt.extractDate(m,u.displayFormat);if(!f)return"Format tanggal tidak valid";f.setHours(0,0,0,0);const y=u.minDate?new Date(u.minDate):null;y&&y.setHours(0,0,0,0);const _=u.maxDate?new Date(u.maxDate):null;return _&&_.setHours(0,0,0,0),y&&f<y?`Tanggal tidak boleh kurang dari ${rt.formatDate(u.minDate,u.displayFormat)}`:_&&f>_?`Tanggal tidak boleh lebih dari ${rt.formatDate(u.maxDate,u.displayFormat)}`:(o("update:modelValue",f),!0)}]);Me(()=>u.modelValue,m=>{m instanceof Date?(n.value=rt.formatDate(m,"YYYY/MM/DD"),i.value=rt.formatDate(m,u.displayFormat)):(n.value="",i.value="")},{immediate:!0});const p=m=>{const f=m!==null?new Date(m):null;o("update:modelValue",f),i.value=f?rt.formatDate(f,u.displayFormat):null};return(m,f)=>(d(),D(ne,{modelValue:i.value,"onUpdate:modelValue":f[1]||(f[1]=y=>i.value=y),label:u.label,readonly:u.readonly,disable:u.disable,error:u.error,"error-message":u.errorMessage,mask:u.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:b.value},{append:l(()=>[e(E,{icon:"event",disable:u.disable||u.readonly,flat:"",rounded:"",dense:""},{default:l(()=>[e(Jn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Gn,{modelValue:n.value,"onUpdate:modelValue":[f[0]||(f[0]=y=>n.value=y),p],options:g},{default:l(()=>[t("div",Bm,[ae(e(E,{label:"Close",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},ua=_t(Fm,[["__scopeId","data-v-b418ccfb"]]);function ko(c,s=!1){const u=c.map(g=>({value:g.id,label:g.name})),o=s?[{value:"all",label:"Semua"},...u]:u,i=C([...o]);return{filteredCostCategories:i,filterCostCategory:(g,b)=>{const p=g.toLowerCase();b(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(p))})},costCategoryOptions:o}}const zm={class:"q-gutter-sm"},Lm={class:"col col-md-6 q-pa-xs"},Km={__name:"Editor",setup(c){var y;const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=ko(s.props.categories),i=s.props.finance_accounts.map(_=>({label:_.name,value:_.id})),n=C(o),g=C([...n.value]),b=Qe({id:s.props.data.id,finance_account_id:s.props.data.finance_account_id??null,category_id:s.props.data.category_id??null,date:new Date(s.props.data.date),description:s.props.data.description,notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((y=s.props.data)==null?void 0:y.image_path)??null,image:null}),p=()=>{da(b,{date:"YYYY-MM-DD"}),nt({form:b,url:route("admin.operational-cost.save")})},m=(_,V)=>{V(()=>{g.value=n.value.filter(q=>q.label.toLowerCase().includes(_.toLowerCase()))})},f=()=>{b.image_path=null};return(_,V)=>{const q=X("i-head"),x=X("authenticated-layout");return d(),w(G,null,[e(q,{title:u}),e(x,null,{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",zm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:V[0]||(V[0]=R=>_.$inertia.get(_.route("admin.operational-cost.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Lm,[e(Je,{class:"row",onSubmit:J(p,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":V[1]||(V[1]=R=>a(b).id=R)},null,512),[[yt,a(b).id]]),e(ce,{autofocus:"",modelValue:a(b).category_id,"onUpdate:modelValue":V[2]||(V[2]=R=>a(b).category_id=R),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:g.value,"map-options":"","emit-value":"",onFilter:m,error:!!a(b).errors.category_id,disable:a(b).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(z,null,{default:l(()=>V[10]||(V[10]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(ua,{modelValue:a(b).date,"onUpdate:modelValue":V[3]||(V[3]=R=>a(b).date=R),label:"Tanggal",error:!!a(b).errors.date,disable:a(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ne,{modelValue:a(b).description,"onUpdate:modelValue":V[4]||(V[4]=R=>a(b).description=R),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!a(b).errors.description,disable:a(b).processing,"error-message":a(b).errors.description,rules:[R=>R&&R.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Ee,{modelValue:a(b).amount,"onUpdate:modelValue":V[5]||(V[5]=R=>a(b).amount=R),label:"Jumlah",lazyRules:"",disable:a(b).processing,error:!!a(b).errors.amount,errorMessage:a(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ce,{class:"custom-select",modelValue:a(b).finance_account_id,"onUpdate:modelValue":V[6]||(V[6]=R=>a(b).finance_account_id=R),label:"Sumber Dana",options:a(i),"map-options":"","emit-value":"",clearable:"",errorMessage:a(b).errors.finance_account_id,error:!!a(b).errors.finance_account_id,disable:a(b).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(ne,{modelValue:a(b).notes,"onUpdate:modelValue":V[7]||(V[7]=R=>a(b).notes=R),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(b).processing,error:!!a(b).errors.notes,"error-message":a(b).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Ua,{modelValue:a(b).image,"onUpdate:modelValue":V[8]||(V[8]=R=>a(b).image=R),"initial-image-path":a(b).image_path,disabled:a(b).processing,error:!!a(b).errors.image||!!a(b).errors.image_path,"error-message":a(b).errors.image||a(b).errors.image_path,onImageCleared:f},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(b).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:a(b).processing,onClick:V[9]||(V[9]=R=>a(ee).get(_.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Hm=Object.freeze(Object.defineProperty({__proto__:null,default:Km},Symbol.toStringTag,{value:"Module"})),Ym={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Wm={class:"q-pa-xs"},Qm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Jm={key:0},Gm={key:1},Xm={key:0},Zm={class:"flex justify-end no-wrap"},vl="Biaya Operasional",ec={__name:"Index",setup(c){const s=ge(),u=xe(),o=C(!1),i=C(null),n=C(null),g=et(n),b=C(null),p=C(!1),m=C([]),f=C(!0),y=new Date().getFullYear(),_=new Date().getMonth()+1,V=[{label:"Semua Tahun",value:null},{label:`${y}`,value:y},...Pt(y-2,y-1).reverse()],q=[{value:null,label:"Semua Bulan"},...Rt()],{costCategoryOptions:x}=ko(s.props.categories),R=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...x],{accountOptions:H}=Xn(s.props.finance_accounts),O=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...H],U=Ie({search:"",finance_account_id:"all",category_id:"all",year:y,month:_,...Le()}),I=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),F=[{name:"code",label:u.screen.lt.md?"Item":"Kode",field:"code",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];we(()=>{h()});const N=A=>ot({message:`Hapus Biaya ${A.code}?`,url:route("admin.operational-cost.delete",A.id),fetchItemsCallback:h,loading:f}),h=(A=null)=>{Ke({pagination:I,filter:U,props:A,rows:m,url:route("admin.operational-cost.data"),loading:f,tableRef:i})},j=()=>{h()},P=Z(()=>u.screen.gt.sm?F:F.filter(A=>A.name==="code"||A.name==="action"));Me(()=>U.year,A=>{A===null&&(U.month=null)});const $=A=>{b.value=A,p.value=!0};return(A,B)=>{const S=X("i-head"),M=X("authenticated-layout");return d(),w(G,null,[e(S,{title:vl}),e(M,null,Be({title:l(()=>[v(r(vl))]),"right-button":l(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:B[0]||(B[0]=te=>o.value=!o.value)},null,8,["icon"]),A.$can("admin.operational-cost.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:B[1]||(B[1]=te=>a(ee).get(A.route("admin.operational-cost.add")))})):k("",!0)]),default:l(()=>[t("div",Wm,[e(Ue,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:I.value,"onUpdate:pagination":B[8]||(B[8]=te=>I.value=te),filter:U.search,loading:f.value,columns:P.value,rows:m.value,"rows-per-page-options":[10,25,50],style:He({height:a(g)}),onRequest:h,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:te,message:ue,filter:re})=>[t("div",Qm,[t("span",null,r(ue)+" "+r(re?" with term "+re:""),1)])]),body:l(te=>[e(Pe,{props:te,class:"cursor-pointer",onClick:J(ue=>a(ee).get(A.route("admin.operational-cost.detail",{id:te.row.id})),["stop"])},{default:l(()=>[e(W,{key:"code",props:te,class:"wrap-column"},{default:l(()=>[a(u).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[v(" Kode: ")],64)),v(" "+r(te.row.code)+" ",1),a(u).screen.gt.sm?k("",!0):(d(),w(G,{key:1},[t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(na)(te.row.date)),1)]),te.row.finance_account?(d(),w("div",Jm,[e(T,{name:"wallet",class:"inline-icon"}),v(" "+r(te.row.finance_account.name),1)])):k("",!0),te.row.category?(d(),w("div",Gm,[e(T,{name:"category",class:"inline-icon"}),v(" "+r(te.row.category.name),1)])):k("",!0),e($e,{icon:"description",text:te.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(T,{name:"money",class:"inline-icon"}),v(" Rp. "+r(a(K)(te.row.amount)),1)]),e($e,{icon:"notes",text:te.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(W,{key:"date",props:te,class:"wrap-column"},{default:l(()=>[v(r(a(na)(te.row.date)),1)]),_:2},1032,["props"]),e(W,{key:"finance_account_id",props:te,class:"wrap-column"},{default:l(()=>[v(r(te.row.finance_account?te.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(W,{key:"category_id",props:te},{default:l(()=>[te.row.category?(d(),w("div",Xm,r(te.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"description",props:te},{default:l(()=>[e($e,{text:te.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"amount",props:te},{default:l(()=>[v(r(a(K)(te.row.amount)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:te},{default:l(()=>[e($e,{text:te.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:te},{default:l(()=>[t("div",Zm,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:te.row.image_path===null||te.row.image_path==="",onClick:J(ue=>$(te.row.image_path),["stop"])},{default:l(()=>[te.row.image_path!=null?(d(),D(Gt,{key:0},{default:l(()=>B[10]||(B[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),A.$can("admin.operational-cost.add")||A.$can("admin.operational-cost.edit")||A.$can("admin.operational-cost.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:B[7]||(B[7]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[A.$can("admin.operational-cost.add")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(ue=>a(ee).get(A.route("admin.operational-cost.duplicate",te.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(z,null,{default:l(()=>B[11]||(B[11]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),A.$can("admin.operational-cost.edit")?ae((d(),D(oe,{key:1,clickable:"",onClick:J(ue=>a(ee).get(A.route("admin.operational-cost.edit",te.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>B[12]||(B[12]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),A.$can("admin.operational-cost.delete")?ae((d(),D(oe,{key:2,onClick:J(ue=>N(te.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>B[13]||(B[13]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(ba,{modelValue:p.value,"onUpdate:modelValue":B[9]||(B[9]=te=>p.value=te),imageUrl:`/${b.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:l(()=>[t("div",Ym,[e(ce,{modelValue:U.year,"onUpdate:modelValue":[B[2]||(B[2]=te=>U.year=te),j],options:V,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:U.month,"onUpdate:modelValue":[B[3]||(B[3]=te=>U.month=te),j],options:q,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:U.year===null},null,8,["modelValue","disable"]),e(ce,{modelValue:U.category_id,"onUpdate:modelValue":[B[4]||(B[4]=te=>U.category_id=te),j],options:R,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:U.finance_account_id,"onUpdate:modelValue":[B[5]||(B[5]=te=>U.finance_account_id=te),j],options:O,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:U.search,"onUpdate:modelValue":B[6]||(B[6]=te=>U.search=te),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},tc=Object.freeze(Object.defineProperty({__proto__:null,default:ec},Symbol.toStringTag,{value:"Module"})),ac={class:"q-gutter-sm"},lc={class:"col col-md-6 q-pa-xs"},oc={__name:"Editor",setup(c){const s=xe(),u=ge(),o=(u.props.data.id?"Edit":"Tambah")+" Kategori Produk",i=Qe({id:u.props.data.id,name:u.props.data.name,description:u.props.data.description}),n=()=>nt({form:i,url:route("admin.product-category.save")});return(g,b)=>{const p=X("i-head"),m=X("authenticated-layout");return d(),w(G,null,[e(p,{title:o}),e(m,{"show-drawer-button":!a(s).screen.lt.md},Be({title:l(()=>[v(r(o))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",lc,[e(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>a(i).id=f)},null,512),[[yt,a(i).id]]),e(ne,{autofocus:"",modelValue:a(i).name,"onUpdate:modelValue":b[2]||(b[2]=f=>a(i).name=f),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!a(i).errors.name,disable:a(i).processing,"error-message":a(i).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(i).description,"onUpdate:modelValue":b[3]||(b[3]=f=>a(i).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.description,"error-message":a(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:b[4]||(b[4]=f=>a(i).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(s).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",ac,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},nc=Object.freeze(Object.defineProperty({__proto__:null,default:oc},Symbol.toStringTag,{value:"Module"})),sc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},rc={class:"q-pa-xs"},ic={class:"full-width row flex-center text-grey-8 q-gutter-sm"},dc={key:0,class:"text-grey-8"},uc={class:"flex justify-end"},yl="Kategori Produk",mc={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=Ie({search:"",...Le()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];we(()=>{_()});const y=q=>ot({message:`Hapus Kategori ${q.name}?`,url:route("admin.product-category.delete",q.id),fetchItemsCallback:_,loading:i}),_=(q=null)=>{Ke({pagination:m,filter:p,props:q,rows:o,url:route("admin.product-category.data"),loading:i,tableRef:n})},V=Z(()=>s.screen.gt.sm?f:f.filter(q=>q.name==="name"||q.name==="action"));return(q,x)=>{const R=X("i-head"),H=X("authenticated-layout");return d(),w(G,null,[e(R,{title:yl}),e(H,null,Be({title:l(()=>[v(r(yl))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=O=>u.value=!u.value)},null,8,["icon"]),q.$can("admin.product-category.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=O=>a(ee).get(q.route("admin.product-category.add")))})):k("",!0)]),default:l(()=>[t("div",rc,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":x[4]||(x[4]=O=>m.value=O),filter:p.search,loading:i.value,columns:V.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:a(b)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:O,message:U,filter:I})=>[t("div",ic,[t("span",null,r(U)+" "+r(I?" with term "+I:""),1)])]),body:l(O=>[e(Pe,{props:O},{default:l(()=>[e(W,{key:"name",props:O,class:"wrap-column"},{default:l(()=>[v(r(O.row.name)+" ",1),a(s).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[O.row.description?(d(),w("div",dc,[e(T,{name:"description"}),v(" "+r(O.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"description",props:O,class:"wrap-column"},{default:l(()=>[v(r(O.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:O},{default:l(()=>[t("div",uc,[q.$can("admin.product-category.add")||q.$can("admin.product-category.edit")||q.$can("admin.product-category.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[q.$can("admin.product-category.add")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(U=>a(ee).get(q.route("admin.product-category.duplicate",O.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(z,null,{default:l(()=>x[5]||(x[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),q.$can("admin.product-category.edit")?ae((d(),D(oe,{key:1,clickable:"",onClick:J(U=>a(ee).get(q.route("admin.product-category.edit",O.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>x[6]||(x[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),q.$can("admin.product-category.delete")?ae((d(),D(oe,{key:2,onClick:J(U=>y(O.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>x[7]||(x[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",sc,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":x[2]||(x[2]=O=>p.search=O),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},cc=Object.freeze(Object.defineProperty({__proto__:null,default:mc},Symbol.toStringTag,{value:"Module"})),pc={class:"detail"},fc={key:0},gc={key:1},bc={key:2},vc={class:"detail"},yc={class:"detail"},_c={key:0},kc={key:0},wc={key:0},hc={key:0},$c={class:"detail"},xc={key:0,class:"q-pt-md"},wo={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(c){const s=c;xe();const u=i=>`${i>0?K((i-s.product.cost)/s.product.cost*100,2):0}%`,o=()=>{ot({message:`Hapus Produk ${s.product.name}?`,url:route("admin.product.delete",s.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(i,n)=>{const g=X("i-link");return d(),w("div",null,[n[39]||(n[39]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",pc,[t("tbody",null,[t("tr",null,[n[1]||(n[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),n[2]||(n[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(c.product.name),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"Deskirpsi",-1)),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,r(c.product.description),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Barcode",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(c.product.barcode),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Jenis Produk",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.PRODUCT_TYPES[c.product.type]),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Kategori",-1)),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,r(c.product.category?c.product.category.name:"--Tidak memiliki kategori--"),1)]),i.$can("admin.product:view-supplier")?(d(),w("tr",fc,[n[11]||(n[11]=t("td",null,"Supplier",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[c.product.supplier?(d(),D(g,{key:0,href:i.route("admin.supplier.detail",{id:c.product.supplier.id})},{default:l(()=>[v(r(c.product.supplier.name),1)]),_:1},8,["href"])):(d(),w(G,{key:1},[v(r("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[n[13]||(n[13]=t("td",null,"Status",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,r(c.product.active?"Aktif":"Tidak Aktif"),1)]),c.product.created_at?(d(),w("tr",gc,[n[16]||(n[16]=t("td",null,"Dibuat Oleh",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[c.product.creator?(d(),w(G,{key:0},[e(g,{href:i.route("admin.user.detail",{id:c.product.creator})},{default:l(()=>[v(r(c.product.creator.username),1)]),_:1},8,["href"]),n[15]||(n[15]=v(" - "))],64)):k("",!0),v(" "+r(a(ve)(c.product.created_at)),1)])])):k("",!0),c.product.updater?(d(),w("tr",bc,[n[19]||(n[19]=t("td",null,"Diperbarui oleh",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,[c.product.updater?(d(),w(G,{key:0},[e(g,{href:i.route("admin.user.detail",{id:c.product.updater})},{default:l(()=>[v(r(c.product.updater.username),1)]),_:1},8,["href"]),n[18]||(n[18]=v(" - "))],64)):k("",!0),v(" "+r(a(ve)(c.product.updated_at)),1)])])):k("",!0)])]),n[40]||(n[40]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",vc,[t("tbody",null,[t("tr",null,[n[21]||(n[21]=t("td",{style:{width:"120px"}},"Stok",-1)),n[22]||(n[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(K)(c.product.stock))+" "+r(c.product.uom),1)]),t("tr",null,[n[23]||(n[23]=t("td",null,"Stok Minimum",-1)),n[24]||(n[24]=t("td",null,":",-1)),t("td",null,r(a(K)(c.product.min_stock))+" "+r(c.product.uom),1)]),t("tr",null,[n[25]||(n[25]=t("td",null,"Barcode",-1)),n[26]||(n[26]=t("td",null,":",-1)),t("td",null,r(c.product.barcode),1)])])]),n[41]||(n[41]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",yc,[t("tbody",null,[t("tr",null,[n[27]||(n[27]=t("td",null,"Opsi Harga",-1)),n[28]||(n[28]=t("td",null,":",-1)),t("td",null,r(c.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),i.$can("admin.product:view-cost")?(d(),w("tr",_c,[n[29]||(n[29]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),n[30]||(n[30]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(a(K)(c.product.cost)),1)])):k("",!0),t("tr",null,[n[31]||(n[31]=t("td",null,"Harga Eceran",-1)),n[32]||(n[32]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(a(K)(c.product.price_1))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",kc," ("+r(u(c.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[n[33]||(n[33]=t("td",null,"Harga Partai",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(a(K)(c.product.price_2))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",wc," ("+r(u(c.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[n[35]||(n[35]=t("td",null,"Harga Grosir",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(a(K)(c.product.price_3))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",hc," ("+r(u(c.product.price_3))+") ",1)):k("",!0)])])])]),n[42]||(n[42]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",$c,[t("tbody",null,[t("tr",null,[n[37]||(n[37]=t("td",{style:{width:"120px"}},"Catatan",-1)),n[38]||(n[38]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(c.product.notes),1)])])]),i.$can("admin.product.delete")?(d(),w("div",xc,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:n[0]||(n[0]=b=>o())})])):k("",!0)])}}},Sc=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),Vc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},qc={key:0},ho={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(c){const s=c,u=xe(),o=C([]),i=C(!0),n=Ie({...Le()}),g=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let b=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"quantity_before",label:"Stok Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Stok Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];we(()=>{p()});const p=(f=null)=>Ke({pagination:g,filter:n,props:f,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:s.productId}}),loading:i}),m=Z(()=>u.screen.lt.sm?b.filter(f=>f.name==="id"||f.name==="quantity"):b);return(f,y)=>(d(),D(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:g.value,"onUpdate:pagination":y[0]||(y[0]=_=>g.value=_),filter:n.search,loading:i.value,columns:m.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:V,filter:q})=>[t("div",Vc,[t("span",null,r(V)+" "+r(q?" with term "+q:""),1)])]),body:l(_=>[e(Pe,{props:_},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)(_.row.created_at)),1)]),t("div",null,[e(bt,null,{default:l(()=>[v(r(f.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[_.row.ref_type]),1)]),_:2},1024)]),a(u).screen.lt.sm?(d(),w(G,{key:0},[t("div",{class:Ve(_.row.quantity>0?"text-positive":"text-negative")},[e(T,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(a(K)(_.row.quantity_before))+" "+r(_.row.uom)+"  "+r(a(K)(_.row.quantity_after))+" "+r(_.row.uom),1)],2),e($e,{text:_.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"created_at",props:_},{default:l(()=>[v(r(a(ve)(_.row.created_at)),1)]),_:2},1032,["props"]),e(W,{key:"type",props:_},{default:l(()=>[v(r(f.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[_.row.ref_type])+" ",1),_.row.ref?(d(),w("span",qc,r(_.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"quantity_before",props:_},{default:l(()=>[v(r(a(K)(_.row.quantity_before)),1)]),_:2},1032,["props"]),e(W,{key:"quantity",props:_,class:Ve(_.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[v(r(a($t)(_.row.quantity))+" ",1),a(u).screen.lt.sm?(d(),w(G,{key:0},[v(r(_.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(W,{key:"quantity_after",props:_},{default:l(()=>[v(r(a(K)(_.row.quantity_after)),1)]),_:2},1032,["props"]),e(W,{key:"uom",props:_},{default:l(()=>[v(r(_.row.uom),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Cc=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),Tc={class:"q-gutter-sm"},Pc={class:"q-gutter-sm"},Rc={class:"row justify-center"},Oc={class:"col col-lg-6 q-pa-xs"},Ic={class:"row"},Uc={__name:"Detail",setup(c){const s=ge(),u=`Rincian Produk #${s.props.data.id}`,o=C("main");return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return d(),w(G,null,[e(g,{title:u}),e(b,{"show-drawer-button":!0},{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",Tc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$goBack())})])]),"right-button":l(()=>[t("div",Pc,[i.$can("admin.product.edit")?(d(),D(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[1]||(n[1]=p=>a(ee).get(i.route("admin.product.edit",{id:a(s).props.data.id}))),title:"Edit produk"})):k("",!0),i.$can("admin.product.add")?(d(),D(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[2]||(n[2]=p=>a(ee).get(i.route("admin.product.duplicate",{id:a(s).props.data.id}))),title:"Duplikat produk"})):k("",!0),i.$can("admin.product.add")?(d(),D(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:n[3]||(n[3]=p=>a(ee).get(i.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:l(()=>[t("div",Rc,[t("div",Oc,[t("div",Ic,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ot,{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(It,{modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=p=>o.value=p),animated:""},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(wo,{product:a(s).props.data},null,8,["product"])]),_:1}),e(ut,{name:"history",class:"q-pa-xs"},{default:l(()=>[e(ho,{"product-id":a(s).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},Dc=Object.freeze(Object.defineProperty({__proto__:null,default:Uc},Symbol.toStringTag,{value:"Module"})),Wt=Et({name:"QBtnToggle",props:{...Xl,modelValue:{required:!0},options:{type:Array,required:!0,validator:c=>c.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(c,{slots:s,emit:u}){const o=Z(()=>c.options.find(_=>_.value===c.modelValue)!==void 0),i=Z(()=>({type:"hidden",name:c.name,value:c.modelValue})),n=ts(i),g=Z(()=>Zn(c)),b=Z(()=>({rounded:c.rounded,dense:c.dense,...g.value})),p=Z(()=>c.options.map((_,V)=>{const{attrs:q,value:x,slot:R,...H}=_;return{slot:R,props:{key:V,"aria-pressed":x===c.modelValue?"true":"false",...q,...H,...b.value,disable:c.disable===!0||H.disable===!0,color:x===c.modelValue?f(H,"toggleColor"):f(H,"color"),textColor:x===c.modelValue?f(H,"toggleTextColor"):f(H,"textColor"),noCaps:f(H,"noCaps")===!0,noWrap:f(H,"noWrap")===!0,size:f(H,"size"),padding:f(H,"padding"),ripple:f(H,"ripple"),stack:f(H,"stack")===!0,stretch:f(H,"stretch")===!0,onClick(O){m(x,_,O)}}}}));function m(_,V,q){c.readonly!==!0&&(c.modelValue===_?c.clearable===!0&&(u("update:modelValue",null,null),u("clear")):u("update:modelValue",_,V),u("click",q))}function f(_,V){return _[V]===void 0?c[V]:_[V]}function y(){const _=p.value.map(V=>Ce(E,V.props,V.slot!==void 0?s[V.slot]:void 0));return c.name!==void 0&&c.disable!==!0&&o.value===!0&&n(_,"push"),Jl(s.default,_)}return()=>Ce(es,{class:"q-btn-toggle",...g.value,rounded:c.rounded,stretch:c.stretch,glossy:c.glossy,spread:c.spread},y)}});function ja(c,s=!1){const u=c.map(g=>({value:g.id,label:g.name})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...u]:u,i=C([...o]);return{filteredCategories:i,filterCategories:(g,b)=>{const p=g.toLowerCase();b(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(p))})},categories:o}}function Ea(c,s=!1){const u=c.map(g=>({value:g.id,label:g.name+" ("+g.code+")"})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...u]:u,i=C([...o]);return{filteredSuppliers:i,filterSupplierFn:(g,b)=>{const p=g.toLowerCase();b(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(p))})},suppliers:o}}const Ca=eo({__name:"PercentInput",props:{modelValue:{type:[Number,null],required:!1,default:0},label:{type:[String,void 0],required:!1,default:void 0},locale:{type:String,default:"id-ID"},outlined:{type:Boolean,default:!1},allowNegative:{type:Boolean,default:!1},maxDecimals:{type:Number,default:0},lazyRules:{type:[Boolean,String],default:!1},disable:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(c,{expose:s,emit:u}){const o=C(null),i=as(),n=C(!1);s({focus:()=>{o.value&&o.value.focus()},select:()=>{var O;if((O=o.value)!=null&&O.$el){const U=o.value.$el.querySelector("input");U==null||U.select()}}});const g=c,b=u,p=C(""),m=O=>{const I=new Intl.NumberFormat(O).format(123456789e-2),F=I.includes(",")?",":".",N=I.replace(/\d/g,"").replace(F,"").charAt(0);return{decimalSeparator:F,thousandSeparator:N}},{decimalSeparator:f,thousandSeparator:y}=m(g.locale),_=O=>{if(O==null||isNaN(O)){if(g.maxDecimals>0)return"";O=0}return new Intl.NumberFormat(g.locale,{minimumFractionDigits:g.maxDecimals,maximumFractionDigits:g.maxDecimals}).format(O)};Me(()=>g.modelValue,O=>{n.value||(p.value=_(O))},{immediate:!0});const V=O=>{const U=O.replace(/[^0-9.,-]+/g,"").replace(new RegExp(`\\${y}`,"g"),"").replace(new RegExp(`\\${f}`,"g"),".");if(U===""||U==="-")return null;const I=parseFloat(U);return isNaN(I)?null:parseFloat(I.toFixed(g.maxDecimals))},q=()=>{n.value=!0,V(p.value),it(()=>{var O;(O=o.value)==null||O.select()})},x=O=>{p.value=O},R=()=>{n.value=!1;const O=V(p.value);b("update:modelValue",O),p.value=_(O)},H=O=>{const U=["Backspace","Delete","Tab","ArrowLeft","ArrowRight","Home","End","Shift"];O.ctrlKey||O.metaKey||O.key>="0"&&O.key<="9"||(O.key===f||O.key===y)&&!p.value.includes(f)||g.allowNegative&&O.key==="-"&&O.target.selectionStart===0||U.includes(O.key)||O.preventDefault()};return(O,U)=>(d(),D(a(ne),{ref_key:"qInputRef",ref:o,"model-value":p.value,label:g.label,outlined:g.outlined,"onUpdate:modelValue":x,onBlur:R,onFocus:q,onKeydown:H,"lazy-rules":g.lazyRules,disable:g.disable,error:g.error,rules:g.rules,"error-message":g.errorMessage},Be({_:2},[a(i).prepend?{name:"prepend",fn:l(()=>[qt(O.$slots,"prepend")]),key:"0"}:void 0,a(i).append?{name:"append",fn:l(()=>[qt(O.$slots,"append")]),key:"1"}:void 0]),1032,["model-value","label","outlined","lazy-rules","disable","error","rules","error-message"]))}}),jc=eo({__name:"BarcodeInput",props:{modelValue:{}},emits:["update:modelValue","scan-success"],setup(c,{emit:s}){const u=s,o=xe(),i=x=>{u("update:modelValue",x)},n=C(null),g=C(!1),b=C(!1);let p=null,m=null,f=null;we(async()=>{if("BarcodeDetector"in window){g.value=!0;try{const x=await window.BarcodeDetector.getSupportedFormats();m=new BarcodeDetector({formats:x})}catch(x){console.warn("BarcodeDetector init error:",x),g.value=!1}}}),ra(()=>V());function y(){if(!g.value){o.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}b.value?V():_()}async function _(){if(m)try{b.value=!0,p=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),n.value&&(n.value.srcObject=p),await new Promise(x=>setTimeout(x,300)),q()}catch(x){b.value=!1,o.notify({type:"negative",message:`Gagal akses kamera: ${x.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function V(){b.value=!1,f&&cancelAnimationFrame(f),p&&(p.getTracks().forEach(x=>x.stop()),p=null)}async function q(){var x;if(!(!n.value||!m||!b.value)){try{const R=await m.detect(n.value);if(R.length>0){const H=R[0].rawValue;i(H),u("scan-success",H),(x=navigator.vibrate)==null||x.call(navigator,100),o.notify({type:"positive",message:`Barcode terdeteksi: ${H}`,timeout:1e3}),V();return}}catch(R){console.warn("Detection error:",R)}f=requestAnimationFrame(q)}}return(x,R)=>(d(),w("div",null,[e(ne,Ya(x.$attrs,{"model-value":x.modelValue,"onUpdate:modelValue":i,disable:b.value||x.$attrs.disable,loading:b.value||x.$attrs.loading,clearable:""}),Be({append:l(()=>[g.value&&!b.value?(d(),D(T,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:y},{default:l(()=>[e(Gt,null,{default:l(()=>R[1]||(R[1]=[v("Scan Barcode")])),_:1})]),_:1})):b.value?(d(),D(ls,{key:1,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0),qt(x.$slots,"append",{},void 0,!0)]),_:2},[Ne(x.$slots,(H,O)=>({name:O,fn:l(U=>[O!=="append"?qt(x.$slots,O,Da(Ya({key:0},U)),void 0,!0):k("",!0)])}))]),1040,["model-value","disable","loading"]),e(lt,{modelValue:b.value,"onUpdate:modelValue":R[0]||(R[0]=H=>b.value=H),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:l(()=>[e(fe,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:l(()=>[e(le,{class:"text-center q-pb-none"},{default:l(()=>R[2]||(R[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(le,{class:"flex flex-center full-width q-pa-none"},{default:l(()=>[t("video",{ref_key:"videoRef",ref:n,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(at,{align:"center",class:"q-pt-lg"},{default:l(()=>[e(E,{label:"Batal Scan",color:"negative",icon:"close",onClick:V})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Ec=_t(jc,[["__scopeId","data-v-6b7a7163"]]),Ac={class:"q-gutter-sm"},Mc={class:"col col-md-6 q-pa-xs"},Nc={class:"row q-gutter-md"},Bc={class:"col"},Fc={class:"col"},zc={class:"row q-gutter-md"},Lc={class:"q-mt-md full-width"},Kc={__name:"Editor",setup(c){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Produk",o=tt(window.CONSTANTS.PRODUCT_TYPES),i=C(!1),n=Qe({id:s.props.data.id,category_id:s.props.data.category_id,supplier_id:s.props.data.supplier_id,type:s.props.data.type||"",name:s.props.data.name||"",description:s.props.data.description||"",stock:parseFloat(s.props.data.stock)||0,min_stock:parseFloat(s.props.data.min_stock)||0,max_stock:parseFloat(s.props.data.max_stock)||0,uom:s.props.data.uom||"",barcode:s.props.data.barcode||"",cost:parseFloat(s.props.data.cost)||0,price_1:parseFloat(s.props.data.price_1)||0,price_2:parseFloat(s.props.data.price_2)||0,price_3:parseFloat(s.props.data.price_3)||0,price_1_markup:parseFloat(s.props.data.price_1_markup),price_2_markup:parseFloat(s.props.data.price_2_markup),price_3_markup:parseFloat(s.props.data.price_3_markup),price_1_option:s.props.data.price_1_option??"price",price_2_option:s.props.data.price_2_option??"price",price_3_option:s.props.data.price_3_option??"price",active:!!s.props.data.active,price_editable:!!s.props.data.price_editable,notes:s.props.data.notes||""}),g=()=>nt({form:n,url:route("admin.product.save")});function b(x){return s.props.data.id&&s.props.data.supplier&&(x.some(H=>H.id===s.props.data.supplier_id)||x.unshift(s.props.data.supplier)),x}const{filteredCategories:p,filterCategories:m}=ja(s.props.categories),{filteredSuppliers:f,filterSupplierFn:y}=Ea(b(s.props.suppliers)),_=(x,R)=>(x=parseFloat(x)||0,R=parseFloat(R)||0,R<=0?x>0?100:0:(x-R)/R*100),V=(x,R)=>{x=parseFloat(x)||0,R=parseFloat(R)||0;const H=x*(1+R/100);return Math.round(H)};Me(()=>n.cost,x=>{i.value||(i.value=!0,n.price_1_option=="markup"?n.price_1=V(x,n.price_1_markup):n.price_1_markup=_(n.price_1,x),n.price_2_option=="markup"?n.price_2=V(x,n.price_2_markup):n.price_2_markup=_(n.price_2,x),n.price_3_option=="markup"?n.price_3=V(x,n.price_3_markup):n.price_3_markup=_(n.price_3,x),i.value=!1)},{immediate:!1});const q=x=>{const R=`price_${x}`,H=`price_${x}_markup`,O=`price_${x}_option`;Me(()=>n[R],U=>{if(n[O]=="markup"||i.value)return;i.value=!0;const I=_(U,n.cost);n[H]=parseFloat(I.toFixed(2)),i.value=!1},{deep:!1}),Me(()=>n[H],U=>{n[O]!="price"&&(i.value||(i.value=!0,n[R]=V(n.cost,U),i.value=!1))},{deep:!1})};for(let x=1;x<=3;x++)q(x);return we(()=>{for(let x=1;x<=3;x++)n[`price_${x}_markup`]=_(n[`price_${x}`],n.cost)}),(x,R)=>{const H=X("i-head"),O=X("authenticated-layout");return d(),w(G,null,[e(H,{title:u}),e(O,{"show-drawer-button":!0},{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",Ac,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:R[0]||(R[0]=U=>x.$goBack())})])]),"right-button":l(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(n).processing,onClick:R[1]||(R[1]=U=>g()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Mc,[e(Je,{class:"row",onKeydown:R[25]||(R[25]=Qt(J(()=>{},["prevent"]),["enter"])),onSubmit:J(g,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":R[2]||(R[2]=U=>a(n).id=U)},null,512),[[yt,a(n).id]]),R[32]||(R[32]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(ce,{disabled:!!a(n).id,autofocus:"",modelValue:a(n).type,"onUpdate:modelValue":R[3]||(R[3]=U=>a(n).type=U),class:"custom-select",options:a(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["disabled","modelValue","options"]),e(ne,{modelValue:a(n).name,"onUpdate:modelValue":R[4]||(R[4]=U=>a(n).name=U),modelModifiers:{trim:!0},label:"Kode / Nama Produk","lazy-rules":"",error:!!a(n).errors.name,disable:a(n).processing,"error-message":a(n).errors.name,rules:[U=>U&&U.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(n).description,"onUpdate:modelValue":R[5]||(R[5]=U=>a(n).description=U),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi (Opsional)","lazy-rules":"",disable:a(n).processing,error:!!a(n).errors.description,"error-message":a(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(n).category_id,"onUpdate:modelValue":R[6]||(R[6]=U=>a(n).category_id=U),label:"Kategori (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:a(p),"map-options":"","emit-value":"",onFilter:a(m),"option-label":"label","option-value":"value",error:!!a(n).errors.category_id,disable:a(n).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(z,null,{default:l(()=>R[26]||(R[26]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),x.$can("admin.product:view-supplier")?(d(),D(ce,{key:0,modelValue:a(n).supplier_id,"onUpdate:modelValue":R[7]||(R[7]=U=>a(n).supplier_id=U),label:"Supplier Default (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:a(f),"map-options":"","emit-value":"",onFilter:a(y),"option-label":"label","option-value":"value",error:!!a(n).errors.supplier_id,disable:a(n).processing,"hide-bottom-space":""},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(z,null,{default:l(()=>R[27]||(R[27]=[v("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(Ct,{class:"q-mt-md",modelValue:a(n).active,"onUpdate:modelValue":R[8]||(R[8]=U=>a(n).active=U),disable:a(n).processing,label:"Produk Aktif (Ditampilkan)"},null,8,["modelValue","disable"]),R[33]||(R[33]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",Nc,[t("div",Bc,[e(ne,{modelValue:a(n).uom,"onUpdate:modelValue":R[9]||(R[9]=U=>a(n).uom=U),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!a(n).errors.uom,disable:a(n).processing,"error-message":a(n).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])]),t("div",Fc,[e(Ec,{modelValue:x.barcode,"onUpdate:modelValue":R[10]||(R[10]=U=>x.barcode=U),modelModifiers:{trim:!0}},null,8,["modelValue"])])]),t("div",zc,[e(Ee,{modelValue:a(n).stock,"onUpdate:modelValue":R[11]||(R[11]=U=>a(n).stock=U),label:"Stok Aktual",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.stock,errorMessage:a(n).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:a(n).min_stock,"onUpdate:modelValue":R[12]||(R[12]=U=>a(n).min_stock=U),label:"Stok Minimum",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.min_stock,errorMessage:a(n).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),R[34]||(R[34]=t("div",{class:"text-subtitle1 q-pt-lg"},"Harga & Modal",-1)),x.$can("admin.product:view-cost")?(d(),D(Ee,{key:1,modelValue:a(n).cost,"onUpdate:modelValue":R[13]||(R[13]=U=>a(n).cost=U),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:a(n).processing,error:!!a(n).errors.cost,errorMessage:a(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("table",Lc,[R[31]||(R[31]=t("thead",{class:"text-grey-6"},[t("tr",null,[t("th",{style:{width:"25%"}},"Harga"),t("th",{style:{width:"25%"}},"Markup (%)"),t("th"),t("th",{style:{width:"25%"}},"Harga Jual (Rp)")])],-1)),t("tbody",null,[t("tr",null,[R[28]||(R[28]=t("td",{class:"no-wrap"},"Harga Eceran",-1)),t("td",null,[e(Ca,{class:"col-3",filled:"",dense:"",modelValue:a(n).price_1_markup,"onUpdate:modelValue":R[14]||(R[14]=U=>a(n).price_1_markup=U),lazyRules:"",readonly:a(n).price_1_option!="markup",disable:a(n).processing,error:!!a(n).errors.price_1_markup,errorMessage:a(n).errors.price_1_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Wt,{modelValue:a(n).price_1_option,"onUpdate:modelValue":R[15]||(R[15]=U=>a(n).price_1_option=U),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:a(n).price_1,"onUpdate:modelValue":R[16]||(R[16]=U=>a(n).price_1=U),lazyRules:"",disable:a(n).processing,readonly:a(n).price_1_option=="markup",error:!!a(n).errors.price_1,errorMessage:a(n).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])]),t("tr",null,[R[29]||(R[29]=t("td",{class:"no-wrap"},"Harga Partai",-1)),t("td",null,[e(Ca,{class:"col-3",filled:"",dense:"",modelValue:a(n).price_2_markup,"onUpdate:modelValue":R[17]||(R[17]=U=>a(n).price_2_markup=U),lazyRules:"",readonly:a(n).price_2_option!="markup",disable:a(n).processing,error:!!a(n).errors.price_2_markup,errorMessage:a(n).errors.price_2_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Wt,{modelValue:a(n).price_2_option,"onUpdate:modelValue":R[18]||(R[18]=U=>a(n).price_2_option=U),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:a(n).price_2,"onUpdate:modelValue":R[19]||(R[19]=U=>a(n).price_2=U),lazyRules:"",readonly:a(n).price_2_option=="markup",disable:a(n).processing,error:!!a(n).errors.price_2,errorMessage:a(n).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","readonly","disable","error","errorMessage"])])]),t("tr",null,[R[30]||(R[30]=t("td",{class:"no-wrap"},"Harga Grosir",-1)),t("td",null,[e(Ca,{class:"col-3",filled:"",dense:"",modelValue:a(n).price_3_markup,"onUpdate:modelValue":R[20]||(R[20]=U=>a(n).price_3_markup=U),lazyRules:"",disable:a(n).processing,readonly:a(n).price_3_option!="markup",error:!!a(n).errors.price_3_markup,errorMessage:a(n).errors.price_3_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","disable","readonly","error","errorMessage"])]),t("td",null,[e(Wt,{modelValue:a(n).price_3_option,"onUpdate:modelValue":R[21]||(R[21]=U=>a(n).price_3_option=U),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:a(n).price_3,"onUpdate:modelValue":R[22]||(R[22]=U=>a(n).price_3=U),lazyRules:"",disable:a(n).processing,readonly:a(n).price_3_option=="markup",error:!!a(n).errors.price_3,errorMessage:a(n).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])])])]),e(Ct,{class:"q-mt-sm",modelValue:a(n).price_editable,"onUpdate:modelValue":R[23]||(R[23]=U=>a(n).price_editable=U),disable:a(n).processing,label:"Harga dapat diubah saat penjualan"},null,8,["modelValue","disable"]),e(ne,{modelValue:a(n).notes,"onUpdate:modelValue":R[24]||(R[24]=U=>a(n).notes=U),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(n).processing,error:!!a(n).errors.notes,"error-message":a(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Hc=Object.freeze(Object.defineProperty({__proto__:null,default:Kc},Symbol.toStringTag,{value:"Module"})),Yc={class:"q-gutter-sm"},Wc={class:"col col-md-6 q-pa-xs"},_l="Import Produk",Qc={__name:"Import",setup(c){const s=Qe({csv_file:null}),u=()=>{s.post(route("admin.product.import"),{onSuccess:()=>{s.reset()},onError:()=>{We()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(G,null,[e(n,{title:_l}),e(g,{"show-drawer-button":!0},{title:l(()=>[v(r(_l))]),"left-button":l(()=>[t("div",Yc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Wc,[e(Je,{class:"row",onSubmit:J(u,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(fo,{modelValue:a(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>a(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!a(s).errors.csv_file,"error-message":a(s).errors.csv_file,disable:a(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:a(s).processing||!a(s).csv_file,loading:a(s).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:a(s).processing,onClick:i[2]||(i[2]=b=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),D(Jt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),D(Jt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Jc=Object.freeze(Object.defineProperty({__proto__:null,default:Qc},Symbol.toStringTag,{value:"Module"})),Gc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Xc={class:"q-pa-xs"},Zc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ep={key:0},tp={key:1},ap={key:2},lp={key:3},op={class:"flex justify-end"},np={key:0},sp={key:1},rp={key:0},kl="Produk",ip={__name:"Index",setup(c){const s=ge(),u=C(null),o=C(null),i=et(o),n=C(!1),g=[...tt(window.CONSTANTS.PRODUCT_TYPES)],b=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],p=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],m=xe(),f=C(!1),y=C([]),_=C(!0),V=Ie({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...Le()}),q=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let x=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"action",align:"right"}];we(()=>{const $=new URLSearchParams(window.location.search).get("page");$&&(q.value.page=parseInt($)),H()});const R=P=>ot({message:`Hapus Produk ${P.name}?`,url:route("admin.product.delete",P.id),fetchItemsCallback:H,loading:_}),H=(P=null)=>{Ke({pagination:q,filter:V,props:P,rows:y,url:route("admin.product.data"),loading:_,tableRef:u})},O=()=>{H()},{filteredCategories:U,filterCategories:I}=ja(s.props.categories),{filteredSuppliers:F,filterSupplierFn:N}=Ea(s.props.suppliers),h=Z(()=>{let P=[...x];return n.value||P.splice(2,1),m.screen.gt.sm?P:P.filter($=>$.name==="name"||$.name==="action")}),j=P=>{ee.get(route("admin.product.detail",P.row.id))};return(P,$)=>{const A=X("i-head"),B=X("authenticated-layout");return d(),w(G,null,[e(A,{title:kl}),e(B,null,Be({title:l(()=>[v(r(kl))]),"right-button":l(()=>[e(E,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=S=>f.value=!f.value)},null,8,["icon"]),P.$can("admin.product.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=S=>a(ee).get(P.route("admin.product.add")))})):k("",!0),P.$can("admin.product.import")||P.$can("admin.product:view-cost")?(d(),D(E,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=J(()=>{},["stop"])),class:"q-ml-sm"},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[P.$can("admin.product.send-price-list")?ae((d(),D(oe,{key:0,clickable:"",onClick:$[2]||($[2]=J(S=>a(ee).get(P.route("admin.product.send-price-list")),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"send"})]),_:1}),e(z,null,{default:l(()=>$[14]||($[14]=[v("Kirim Daftar Harga")])),_:1})]),_:1})),[[ie],[pe]]):k("",!0),P.$can("admin.product.import")?ae((d(),D(oe,{key:1,clickable:"",onClick:$[3]||($[3]=S=>n.value=!n.value)},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:n.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(z,null,{default:l(()=>[v(r(n.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[ie],[pe]]):k("",!0),P.$can("admin.product.import")?ae((d(),D(oe,{key:2,clickable:"",onClick:$[4]||($[4]=J(S=>a(ee).get(P.route("admin.product.import")),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"csv"})]),_:1}),e(z,null,{default:l(()=>$[15]||($[15]=[v("Import")])),_:1})]),_:1})),[[ie],[pe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[t("div",Xc,[e(Ue,{ref_key:"tableRef",ref:u,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:q.value,"onUpdate:pagination":$[13]||($[13]=S=>q.value=S),filter:V.search,loading:_.value,columns:h.value,rows:y.value,"rows-per-page-options":[10,25,50],style:He({height:a(i)}),onRequest:H,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:M,filter:te})=>[t("div",Zc,[t("span",null,r(M)+" "+r(te?" with term "+te:""),1)])]),header:l(S=>[e(Pe,{props:S},{default:l(()=>[e(ta,{"auto-width":""}),(d(!0),w(G,null,Ne(S.cols,M=>(d(),D(ta,{key:M.name,props:S},{default:l(()=>[v(r(M.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(S=>[e(Pe,{props:S,class:Ve([{inactive:!S.row.active},"cursor-pointer"]),onClick:M=>j(S)},{default:l(()=>[e(W,{"auto-width":""},{default:l(()=>[e(E,{size:"sm",flat:"",round:"",dense:"",onClick:J(M=>S.expand=!S.expand,["stop"]),icon:S.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(W,{key:"name",props:S,class:"wrap-column"},{default:l(()=>[v(r(S.row.name)+" ",1),a(m).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[S.row.type=="stocked"?(d(),w("div",ep,[e(T,{name:"cycle"}),v(" Stok: "+r(a(K)(S.row.stock))+" "+r(S.row.uom),1)])):k("",!0),n.value?(d(),w("div",tp,[e(T,{name:"money"}),v(" Modal: Rp. "+r(a(K)(S.row.cost)),1)])):k("",!0),t("div",null,[e(T,{name:"sell"}),v(" Eceran: Rp. "+r(a(K)(S.row.price_1)),1)]),S.row.price_2!=0?(d(),w("div",ap,[e(T,{name:"sell"}),v(" Partai: Rp. "+r(a(K)(S.row.price_2)),1)])):k("",!0),S.row.price_3!=0?(d(),w("div",lp,[e(T,{name:"sell"}),v(" Grosir: Rp. "+r(a(K)(S.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(W,{key:"stock",props:S,class:Ve(["wrap-column",{"low-stock":S.row.type=="stocked"&&(Number(S.row.stock)==0||Number(S.row.stock)<Number(S.row.min_stock)),"over-stock":S.row.type=="stocked"&&Number(S.row.max_stock)&&Number(S.row.stock)>Number(S.row.max_stock)}])},{default:l(()=>[v(r(S.row.type=="stocked"?a(K)(S.row.stock)+" "+S.row.uom:"-"),1)]),_:2},1032,["props","class"]),(d(),D(W,{key:"cost",props:S,class:"wrap-column"},{default:l(()=>[v(r(a(K)(S.row.cost)),1)]),_:2},1032,["props"])),e(W,{key:"price_1",props:S,class:"wrap-column"},{default:l(()=>[v(r(a(K)(S.row.price_1)),1)]),_:2},1032,["props"]),e(W,{key:"action",props:S},{default:l(()=>[t("div",op,[P.$can("admin.product.add")||P.$can("admin.product.edit")||P.$can("admin.product.delete")?(d(),D(E,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:$[12]||($[12]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"175px"}},{default:l(()=>[P.$can("admin.product.add")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(M=>a(ee).get(P.route("admin.product.duplicate",S.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(z,null,{default:l(()=>$[16]||($[16]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),P.$can("admin.product.edit")?ae((d(),D(oe,{key:1,clickable:"",onClick:J(M=>a(ee).get(P.route("admin.product.edit",S.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>$[17]||($[17]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),P.$can("admin.product.delete")?ae((d(),D(oe,{key:2,onClick:J(M=>R(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>$[18]||($[18]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),ae(e(Pe,{props:S},{default:l(()=>[e(W,{colspan:"100%"},{default:l(()=>[S.row.barcode?(d(),w("div",np,[e(T,{class:"inline-icon",name:"barcode"}),v(" Barcode: "+r(S.row.barcode),1)])):k("",!0),S.row.category_id?(d(),w("div",sp,[e(T,{name:"category",class:"inline-icon"}),v(" Kategori: "+r(S.row.category.name),1)])):k("",!0),P.$can("admin.product:view-supplier")?(d(),w(G,{key:2},[S.row.supplier_id?(d(),w("div",rp,[e(T,{name:"local_shipping",class:"inline-icon"}),v(" Supplier: "+r(S.row.supplier.name),1)])):k("",!0)],64)):k("",!0),S.row.description?(d(),D($e,{key:3,text:S.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),S.row.notes?(d(),D($e,{key:4,text:S.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[to,S.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[f.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:l(()=>[t("div",Gc,[e(ce,{modelValue:V.type,"onUpdate:modelValue":[$[6]||($[6]=S=>V.type=S),O],class:"custom-select col-xs-4 col-sm-2",options:g,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(ce,{modelValue:V.stock_status,"onUpdate:modelValue":[$[7]||($[7]=S=>V.stock_status=S),O],class:"custom-select col-xs-4 col-sm-2",options:p,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:V.status,"onUpdate:modelValue":[$[8]||($[8]=S=>V.status=S),O],class:"custom-select col-xs-4 col-sm-2",options:b,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:V.category_id,"onUpdate:modelValue":[$[9]||($[9]=S=>V.category_id=S),O],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(U),"map-options":"",dense:"","emit-value":"",onFilter:a(I),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),P.$can("admin.product:view-supplier")?(d(),D(ce,{key:0,modelValue:V.supplier_id,"onUpdate:modelValue":[$[10]||($[10]=S=>V.supplier_id=S),O],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(F),"map-options":"",dense:"","emit-value":"",onFilter:a(N),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:V.search,"onUpdate:modelValue":$[11]||($[11]=S=>V.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},dp=Object.freeze(Object.defineProperty({__proto__:null,default:ip},Symbol.toStringTag,{value:"Module"})),up={class:"q-gutter-sm"},mp={class:"col col-md-8 q-pa-xs"},cp={class:"col-12 col-md-6"},pp={class:"col-12 col-md-6"},fp={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},gp={class:"q-gutter-sm"},wl="Kirim Daftar Harga",bp={__name:"SendPriceList",setup(c){const s=ge(),u=C(""),o=C(null),i=Z(()=>{var N;const F=new Map;return(N=s.props.products)==null||N.forEach(h=>{F.set(h.id,h)}),F}),n=Z(()=>{var N;const F=new Map;return(N=s.props.customers)==null||N.filter(h=>h.phone&&h.phone.trim()!=="").forEach(h=>{F.set(h.id,h)}),F}),g=Z(()=>{var F;return((F=s.props.customers)==null?void 0:F.map(N=>({value:N.id,label:N.name})))||[]}),b=Z(()=>{var F;return((F=s.props.products)==null?void 0:F.map(N=>({value:N.id,label:`${N.name}`})))||[]}),p=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],m=C(b.value),f=C(g.value),y=Qe({price_types:[],products:[],customers:[]});y.transform(F=>({customers:F.customers.map(N=>N.value),message:u.value}));const _=F=>F?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(F):"Rp. 0",V=F=>{const N=p.find(h=>h.value===F);return N?N.label:F},q=()=>{if(o.value){const F=o.value.$el.querySelector("textarea");if(F){F.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(N){console.error("Gagal menyalin teks ke clipboard:",N)}}}},x=Z(()=>{var N,h;if(((N=y.products)==null?void 0:N.length)===0||((h=y.price_types)==null?void 0:h.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let F=`*DAFTAR HARGA TERBARU*
`;return F+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,F+=`------------------------------

`,(y.products||[]).forEach(j=>{const P=i.value.get(j.value);P&&(F+=`*${P.name}*
`,(y.price_types||[]).forEach($=>{const A=V($),B=P[$],S=P.uom||"pcs";B!=null&&B>0&&(F+=`- ${A}: *${_(B)}* / ${S}
`)}),F+=`
`)}),F+=`------------------------------
`,F+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",F});Me(x,F=>{u.value=F},{immediate:!0});const R=Z(()=>(y.customers||[]).map(F=>n.value.get(F.value)).filter(F=>F&&F.phone)),H=F=>{const N=u.value;let h=F.startsWith("0")?"62"+F.substring(1):F;h=h.replace(/[^0-9]/g,"");const j=encodeURIComponent(N);return`https://wa.me/${h}?text=${j}`},O=(F,N)=>{if(F===""){N(()=>{m.value=b.value});return}N(()=>{const h=F.toLowerCase();m.value=b.value.filter(j=>j.label.toLowerCase().indexOf(h)>-1)})},U=(F,N)=>{if(F===""){N(()=>{f.value=g.value});return}N(()=>{const h=F.toLowerCase();f.value=g.value.filter(j=>j.label.toLowerCase().indexOf(h)>-1)})},I=()=>{var F,N,h;if(((F=y.price_types)==null?void 0:F.length)===0||((N=y.products)==null?void 0:N.length)===0||((h=y.customers)==null?void 0:h.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}y.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{We()},onFinish:()=>{y.clearErrors()}})};return(F,N)=>{const h=X("i-head"),j=X("authenticated-layout");return d(),w(G,null,[e(h,{title:wl}),e(j,{"show-drawer-button":!0},{title:l(()=>[v(r(wl))]),"left-button":l(()=>[t("div",up,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:N[0]||(N[0]=P=>F.$goBack())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",mp,[e(Je,{class:"row q-col-gutter-xs",onSubmit:J(I,["prevent"]),onValidationError:a(We)},{default:l(()=>[t("div",cp,[e(fe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[N[10]||(N[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),N[11]||(N[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:a(y).products,"onUpdate:modelValue":N[1]||(N[1]=P=>a(y).products=P),options:m.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.products,"error-message":a(y).errors.products,loading:a(y).processing,"use-input":"",onFilter:O,onClear:N[2]||(N[2]=P=>a(y).products=[]),"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(z,{class:"text-grey"},{default:l(()=>N[8]||(N[8]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:a(y).price_types,"onUpdate:modelValue":N[3]||(N[3]=P=>a(y).price_types=P),options:p,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.price_types,"error-message":a(y).errors.price_types,loading:a(y).processing,multiple:"","use-chips":"",clearable:"",onClear:N[4]||(N[4]=P=>a(y).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:a(y).customers,"onUpdate:modelValue":N[5]||(N[5]=P=>a(y).customers=P),options:f.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(y).errors.customers,"error-message":a(y).errors.customers,loading:a(y).processing,"use-input":"",onFilter:U,onClear:N[6]||(N[6]=P=>a(y).customers=[]),"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(z,{class:"text-grey"},{default:l(()=>N[9]||(N[9]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>{var P,$,A;return[e(E,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:a(y).processing||((P=a(y).products)==null?void 0:P.length)===0||(($=a(y).customers)==null?void 0:$.length)===0||((A=a(y).price_types)==null?void 0:A.length)===0,loading:a(y).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",pp,[e(fe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:l(()=>[e(le,null,{default:l(()=>[t("div",fp,[N[12]||(N[12]=v(" Pratinjau Pesan (Teks Biasa) ")),e(E,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:q,disable:u.value.length===0},null,8,["disable"])]),e(ne,{modelValue:u.value,"onUpdate:modelValue":N[7]||(N[7]=P=>u.value=P),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),R.value.length>0?(d(),D(le,{key:0,class:"q-pt-none"},{default:l(()=>[N[14]||(N[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",gp,[(d(!0),w(G,null,Ne(R.value,P=>(d(),D(E,{key:P.id,label:`Kirim ke ${P.name}`,href:H(P.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(a(y).products.length>0&&a(y).price_types.length>0)},{default:l(()=>[P.phone?k("",!0):(d(),D(Gt,{key:0},{default:l(()=>N[13]||(N[13]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),N[15]||(N[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},vp=Object.freeze(Object.defineProperty({__proto__:null,default:bp},Symbol.toStringTag,{value:"Module"})),yp={class:"q-gutter-sm"},_p={class:"q-pa-xs"},kp={class:"col-12"},wp={class:"col-12"},hp={class:"q-gutter-xs"},hl="Kirim Daftar Harga",$p={__name:"SendPriceList2",setup(c){const s=ge(),u=C(""),o=Z(()=>{var F;const I=new Map;return(F=s.props.products)==null||F.forEach(N=>{I.set(N.id,N)}),I}),i=Z(()=>{var F;const I=new Map;return(F=s.props.customers)==null||F.forEach(N=>{I.set(N.id,N)}),I}),n=Z(()=>{var I;return((I=s.props.customers)==null?void 0:I.map(F=>({value:F.id,label:F.name})))||[]}),g=Z(()=>{var I;return((I=s.props.products)==null?void 0:I.map(F=>({value:F.id,label:`${F.name} (${F.sku||F.code||"ID: "+F.id})`})))||[]}),b=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],p=C(g.value),m=C(n.value),f=Qe({price_types:[],products:[],customers:[]});f.transform(I=>({...I,products:I.products.map(F=>F.value),customers:I.customers.map(F=>F.value)}));const y=I=>I?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(I):"Rp. 0",_=I=>{const F=b.find(N=>N.value===I);return F?F.label:I},V=Z(()=>{if(f.products.length===0||f.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let I=`Daftar Harga Terbaru
`;return I+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,I+=`------------------------------

`,f.products.forEach(F=>{const N=o.value.get(F.value);N&&(I+=`*${N.name}*
`,f.price_types.forEach(h=>{const j=_(h),P=N[h],$=N.unit||"pcs";P!=null&&P!=0&&(I+=`- ${j}: ${y(P)} / ${$}
`)}),I+=`
`)}),I+=`------------------------------
`,I+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",I});Me(V,I=>{u.value=I},{immediate:!0});const q=Z(()=>f.customers.map(I=>i.value.get(I.value)).filter(I=>I&&I.phone_number)),x=I=>{const F=u.value;let N=I.startsWith("0")?"62"+I.substring(1):I;N=N.replace(/[^0-9]/g,"");const h=encodeURIComponent(F);return`https://wa.me/${N}?text=${h}`},R=(I,F)=>{if(I===""){F(()=>{p.value=g.value});return}F(()=>{const N=I.toLowerCase();p.value=g.value.filter(h=>h.label.toLowerCase().indexOf(N)>-1)})},H=(I,F)=>{if(I===""){F(()=>{m.value=n.value});return}F(()=>{const N=I.toLowerCase();m.value=n.value.filter(h=>h.label.toLowerCase().indexOf(N)>-1)})},O=()=>{console.log("Scrolling to first error field...")},U=()=>{if(f.price_types.length===0||f.products.length===0||f.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}f.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{O()},onFinish:()=>{f.clearErrors()}})};return(I,F)=>{const N=X("i-head"),h=X("authenticated-layout");return d(),w(G,null,[e(N,{title:hl}),e(h,{"show-drawer-button":!0},{title:l(()=>[v(r(hl))]),"left-button":l(()=>[t("div",yp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:F[0]||(F[0]=j=>I.$goBack())})])]),default:l(()=>[t("div",_p,[e(Je,{class:"row q-col-gutter-md",onSubmit:J(U,["prevent"]),onValidationError:O},{default:l(()=>[t("div",kp,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[F[8]||(F[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),F[9]||(F[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:a(f).products,"onUpdate:modelValue":F[1]||(F[1]=j=>a(f).products=j),options:p.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(f).errors.products,"error-message":a(f).errors.products,loading:a(f).processing,"use-input":"",onFilter:R,"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(z,{class:"text-grey"},{default:l(()=>F[6]||(F[6]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:a(f).price_types,"onUpdate:modelValue":F[2]||(F[2]=j=>a(f).price_types=j),options:b,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!a(f).errors.price_types,"error-message":a(f).errors.price_types,loading:a(f).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:a(f).customers,"onUpdate:modelValue":F[3]||(F[3]=j=>a(f).customers=j),options:m.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!a(f).errors.customers,"error-message":a(f).errors.customers,loading:a(f).processing,"use-input":"",onFilter:H,"input-debounce":"0"},{"no-option":l(()=>[e(oe,null,{default:l(()=>[e(z,{class:"text-grey"},{default:l(()=>F[7]||(F[7]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:a(f).processing||a(f).products.length===0||a(f).customers.length===0||a(f).price_types.length===0,loading:a(f).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:a(f).processing,onClick:F[4]||(F[4]=j=>I.$goBack())},null,8,["disable"])]),_:1}),I.$page.props.flash.success?(d(),D(Jt,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[v(r(I.$page.props.flash.success),1)]),_:1})):k("",!0),I.$page.props.flash.error?(d(),D(Jt,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[v(r(I.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",wp,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[F[10]||(F[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(ne,{modelValue:u.value,"onUpdate:modelValue":F[5]||(F[5]=j=>u.value=j),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),F[11]||(F[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),q.value.length>0?(d(),D(le,{key:0},{default:l(()=>[F[13]||(F[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",hp,[(d(!0),w(G,null,Ne(q.value,j=>(d(),D(E,{key:j.id,label:`Kirim ke ${j.label}`,href:x(j.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:l(()=>[j.phone_number?k("",!0):(d(),D(Gt,{key:0},{default:l(()=>F[12]||(F[12]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href"]))),128))]),F[14]||(F[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},xp=Object.freeze(Object.defineProperty({__proto__:null,default:$p},Symbol.toStringTag,{value:"Module"})),Sp={class:"q-gutter-sm"},Vp={class:"col col-md-6 q-pa-xs"},$l="Tambah Retur Pembelian",qp={__name:"Create",setup(c){const s=ge(),u=Qe({code:s.props.data.code}),o=()=>nt({form:u,url:route("admin.purchase-order-return.add")});return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return d(),w(G,null,[e(g,{title:$l}),e(b,null,{title:l(()=>[v(r($l))]),"left-button":l(()=>[t("div",Sp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.finance-account.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Vp,[e(Je,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ne,{autofocus:"",modelValue:a(u).code,"onUpdate:modelValue":n[1]||(n[1]=p=>a(u).code=p),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!a(u).errors.code,disable:a(u).processing,"error-message":a(u).errors.code,rules:[p=>p&&p.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:a(u).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:a(u).processing,onClick:n[2]||(n[2]=p=>a(ee).get(i.route("admin.purchase-order-return.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Cp=Object.freeze(Object.defineProperty({__proto__:null,default:qp},Symbol.toStringTag,{value:"Module"})),Tp={class:"column"},Pp={class:"bg-grey-2 q-pa-xs"},Rp={class:"text-subtitle1 text-bold text-grey-10"},Op={class:"text-caption text-grey-8"},Ip={class:"col-12 col-sm-6"},Up={class:"full-width"},Dp={key:1},jp={key:0},Ep={key:1},Ap={class:"col-12 col-sm-6",align:"left"},Mp={class:"full-width"},Np={class:"full-width",style:{"border-collapse":"collapse"}},Bp={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Fp={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},zp={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Lp={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Kp={key:0},Hp={class:"col-12 col-sm-6"},Yp={class:"text-body2 text-grey-7 text-italic"},Wp={class:"col-12 col-sm-6"},Qp={class:"row justify-end q-gutter-y-xs"},Jp={class:"col-12 row justify-between"},Gp={class:"text-subtitle2 text-bold"},Xp={class:"row justify-end q-gutter-y-xs"},Zp={class:"col-12 row justify-between"},ef={class:"text-subtitle2 text-bold"},$o={__name:"MainInfoTab",props:{data:Object},setup(c){const s=c;return(u,o)=>{const i=X("i-link"),n=X("my-link");return d(),w("div",Tp,[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",Pp,[t("div",Rp," RETUR #"+r(s.data.code),1),t("div",Op,r(a(ve)(s.data.datetime)),1)])]),_:1}),e(Ae),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",Ip,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",Up,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),D(i,{key:0,href:u.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:l(()=>{var g;return[e(T,{class:"inline-icon",name:"person"}),v(" "+r(s.data.supplier_name)+" ("+r((g=s.data.supplier)==null?void 0:g.code)+") ",1)]}),_:1},8,["href"])):(d(),w("div",Dp,[e(T,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(d(),w("tr",jp,[t("td",null,[e(T,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(d(),w("tr",Ep,[t("td",null,[e(T,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",Ap,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Mp,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:u.route("admin.purchase-order.detail",{id:s.data.purchase_order_id})},{default:l(()=>[v(r(s.data.purchase_order_id?s.data.purchase_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("table",Np,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(G,null,Ne(s.data.details,g=>(d(),w("tr",{key:g.id},[t("td",Bp,[e(i,{href:u.route("admin.product.detail",g.product_id)},{default:l(()=>[v(r(g.product_name),1)]),_:2},1032,["href"])]),t("td",Fp,r(a(K)(g.cost)),1),t("td",zp,r(g.quantity),1),t("td",Lp,r(a(K)(g.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),w("tr",Kp,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(le,{class:"row",align:"left"},{default:l(()=>[t("div",Hp,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Yp,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Wp,[t("div",Qp,[t("div",Jp,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Gp,r(a(K)(s.data.grand_total)),1)])]),t("div",Xp,[t("div",Zp,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",ef,r(a(K)(s.data.total_refunded)),1)])])])]),_:1})])}}},tf=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),af={key:0,class:"text-center q-mb-md text-grey-8"},lf={class:"text-subtitle2 text-weight-medium"},of={class:"text-h5 text-center text-primary q-pb-md"},nf={class:"text-center q-mt-md"},sf={key:0,class:"text-h6 text-negative text-weight-bold"},rf={key:1,class:"text-h6 text-positive text-weight-bold"},xo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,i=ge(),n=C(!1),g=C({method:"transfer",amount:u.total,notes:null}),b=i.props.data.supplier,p=Z(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(q=>({label:q.name,value:q.id}))]),m=Z(()=>u.remaining_refund),f=Z(()=>{const q=g.value.amount||0;return q<=0?"Jumlah pembayaran harus lebih dari 0.":q>u.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),y=Z(()=>f.value===null),_=()=>{if(!y.value)return;n.value=!0;const q={id:g.value.method,amount:g.value.amount,notes:g.value.notes};o("accepted",q),n.value=!1},V=()=>{g.value.amount=u.total,g.value.method="cash",g.value.notes=null};return(q,x)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":x[4]||(x[4]=R=>q.$emit("update:modelValue",R)),onBeforeShow:V},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>x[5]||(x[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[a(b)?(d(),w("div",af,[t("div",lf,[v(r(a(b).code)+" ",1),x[6]||(x[6]=t("br",null,null,-1)),v(" "+r(a(b).name)+" ",1),x[7]||(x[7]=t("br",null,null,-1))])])):k("",!0),t("div",of," Total: Rp. "+r(a(K)(c.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":x[0]||(x[0]=R=>g.value.method=R),options:p.value,label:"Kas Tujuan",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":x[1]||(x[1]=R=>g.value.amount=R),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":f.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":x[2]||(x[2]=R=>g.value.notes=R),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",nf,[m.value>0?(d(),w("div",sf," Sisa Refund: Rp. "+r(a(K)(m.value)),1)):(d(),w("div",rf," Refund Lunas "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:x[3]||(x[3]=R=>q.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:_,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},df=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),uf={class:"column"},mf={class:"row"},cf={class:"full-width",style:{"border-collapse":"collapse"}},pf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ff={class:"row items-center q-gutter-x-sm"},gf={class:"text-weight-bold"},bf={class:"row items-center q-gutter-x-sm q-mt-xs"},vf={class:"text-caption text-grey-6"},yf={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},_f={class:"q-mt-xs"},kf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},wf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},hf={key:0},$f={class:"text-right q-pa-sm"},So={__name:"RefundTab",props:{data:Object},setup(c){const s=c,u=xe(),o=C(!1),i=()=>{o.value=!0},n=Z(()=>s.data.remaining_refund),g=async p=>{const m={order_id:s.data.id,...p};u.loading.show({message:"Memproses pembayaran..."});try{const f=await Oe.post(route("admin.purchase-order-return.add-refund"),m);u.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(f){let y="Gagal memproses refund.";f.response&&f.response.data&&f.response.data.message?y=f.response.data.message:f.message&&(y=f.message),u.notify({message:y,color:"negative",icon:"error"})}finally{u.loading.hide()}},b=p=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.purchase-order-return.delete-refund",{id:p.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(m){let f="Gagal menghapus refund pembayaran.";m.response&&m.response.data&&m.response.data.message?f=m.response.data.message:m.message&&(f=m.message),u.notify({message:f,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(p,m)=>{const f=X("my-link");return d(),w(G,null,[t("div",uf,[e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("div",mf,[p.$can("admin.purchase-order-return.add-refund")?(d(),D(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=J(y=>i(),["stop"]))})):k("",!0)]),t("table",cf,[m[5]||(m[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(G,null,Ne(s.data.payments,y=>(d(),w("tr",{key:y.id},[t("td",pf,[t("div",ff,[e(T,{name:"tag",size:"xs",color:"grey-7"}),t("span",gf,r(y.code),1)]),t("div",bf,[e(T,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",vf,r(a(ve)(y.created_at)),1)]),(y.type==="transfer"||y.type==="cash")&&y.account?(d(),w("div",yf,[e(T,{name:"wallet",size:"xs",color:"grey-7"}),e(f,{href:p.route("admin.finance-account.detail",y.account.id),target:"_blank"},{default:l(()=>[v(r(y.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",_f,[e(bt,{label:p.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[y.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",kf,r(a(K)(y.amount)),1),t("td",wf,[p.$can("admin.purchase-order-return.delete-refund")?(d(),D(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>b(y)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",hf,m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund (Rp.)",-1)),t("th",$f,r(a(K)(s.data.total_refunded)),1),m[4]||(m[4]=t("th",null,null,-1))])])])]),_:1})]),e(xo,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=y=>o.value=y),total:n.value,supplier:s.data.supplier,onAccepted:g},null,8,["modelValue","total","supplier"])],64)}}},xf=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),Sf={class:"q-gutter-sm"},Vf={class:"col col-lg-6 q-pa-xs",align:"center"},xl="Retur Pembelian",qf={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),u=ge(),o=u.props.data,i=C(s.get("preview")||!1),g=C(s.get("tab")||"main-info");we(()=>{it(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.purchase-order-return.print",{id:u.props.data.id,size:p}),"_self")};return(p,m)=>{const f=X("i-head"),y=X("authenticated-layout");return d(),w(G,null,[e(f,{title:xl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(xl))])]),"left-button":l(()=>[t("div",Sf,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>p.$goBack())})])]),"right-button":l(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=_=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=_=>b("a4"))}),i.value?k("",!0):(d(),D(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=_=>a(ee).get(p.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Vf,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Ot,{modelValue:g.value,"onUpdate:modelValue":m[4]||(m[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(d(),D(dt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(It,{modelValue:g.value,"onUpdate:modelValue":m[5]||(m[5]=_=>g.value=_),animated:""},{default:l(()=>[e(ut,{name:"main-info",class:"q-pa-none"},{default:l(()=>[e($o,{data:a(o)},null,8,["data"])]),_:1}),e(ut,{name:"refund",class:"q-pa-none"},{default:l(()=>[e(So,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Cf=Object.freeze(Object.defineProperty({__proto__:null,default:qf},Symbol.toStringTag,{value:"Module"})),Tf={class:"text-weight-medium wrap-column"},Pf={class:"text-caption text-grey-6 elipsis"},Rf={class:"column items-end"},Of={class:"text-caption text-grey-6 text-italic"},Vo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=xe(),u=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),D(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:a(u)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(d(!0),w(G,null,Ne(g.cols,b=>(d(),D(ta,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left"},{default:l(()=>[t("div",Tf,r(g.row.product_name),1),t("div",Pf,r(g.row.product_barcode),1),g.row.notes?(d(),D($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal",props:g,class:"text-right"},{default:l(()=>[t("div",Rf,[t("div",null,r(a(K)(g.row.subtotal_cost)),1),t("div",Of,r(a(K)(g.row.quantity))+" x Rp. "+r(a(K)(g.row.cost)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},If=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Uf={class:"row items-center no-wrap"},Df={class:"col-auto"},qo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,i=u,n=()=>{i("save")},g=Z(()=>o.item.quantity*o.item.cost),b=y=>{y.stopPropagation(),y.preventDefault()},p=y=>{o.modelValue&&(y.key==="Enter"?(n(),b(y)):y.key==="Escape"&&(i("update:modelValue",!1),b(y)))};we(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item});const f=()=>{};return(y,_)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":_[6]||(_[6]=V=>y.$emit("update:modelValue",V)),onBeforeShow:f},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Uf,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Df,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=V=>y.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:c.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=V=>c.item.product_name=V),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=V=>c.item.quantity=V),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.cost,"onUpdate:modelValue":_[3]||(_[3]=V=>c.item.cost=V),label:"Modal / Harga Beli","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=V=>g.value=V),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:c.item.notes,"onUpdate:modelValue":_[5]||(_[5]=V=>c.item.notes=V),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},jf=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"}));function Ef(){const c=C(new Date);let s=null;const u=()=>{c.value=new Date};return we(()=>{s=setInterval(u,1e3)}),wt(()=>{s&&clearInterval(s)}),{currentDateTime:c}}const Af={class:"text-grey-8"},_a={__name:"DigitalClock",setup(c){const{currentDateTime:s}=Ef();return(u,o)=>(d(),w("div",Af,r(a(ve)(a(s))),1))}},Mf={key:0,class:"q-select__selected-item"},Co={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(c,{expose:s,emit:u}){const o=C(null),i=c,n=u,g=C([]);let b=null;const p=C(i.modelValue);we(()=>{i.initialData&&(p.value=i.initialData)}),Me(p,y=>{n("update:modelValue",y),n("supplierSelected",y)}),Me(()=>i.modelValue,y=>{p.value=y}),s({focus:()=>{o.value&&o.value.focus()}});const f=(y,_)=>{if(y.length<i.minLength){_(()=>{g.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Oe.get(`/web-api/suppliers?q=${y}`).then(V=>{_(()=>{g.value=V.data.data})}).catch(V=>{console.error("Gagal mengambil data pemasok:",V),_(()=>{g.value=[]})})},100)};return(y,_)=>(d(),D(ce,{class:Ve(c.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=V=>p.value=V),"use-input":"","input-debounce":"0",label:c.label,options:g.value,onFilter:f,clearable:"",error:c.error,behavior:"menu","error-message":c.errorMessage,disable:c.disable,"hide-bottom-space":"",outlined:c.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(V=>[e(oe,Da(ao(V.itemProps)),{default:l(()=>[e(z,null,{default:l(()=>[e(he,null,{default:l(()=>[v(r(V.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(V=>[V.opt?(d(),w("div",Mf,r(V.opt.name),1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Nf={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(u,o)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[ae(e(E,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},To=_t(Nf,[["__scopeId","data-v-abc5074e"]]),Bf=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"}));function ka(c){const s=C(!1),u=()=>{const n=c.value||document.documentElement;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},i=()=>{s.value?o():u()};return os(()=>{const n=()=>{s.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("mozfullscreenchange",n),document.removeEventListener("MSFullscreenChange",n)}}),{isFullscreen:s,requestFullscreen:u,exitFullscreen:o,toggleFullscreen:i}}const Ff={class:"row items-center no-wrap"},zf={class:"col text-subtite text-bold text-grey-8"},Lf={class:"col-auto"},Po={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,i=u,n=()=>{i("save")},g=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),g(m)):m.key==="Escape"&&(i("update:modelValue",!1),g(m)))};return we(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,f)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":f[4]||(f[4]=y=>m.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Ff,[t("div",zf," Edit "+r(c.data.code),1),t("div",Lf,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=y=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(Kt,{modelValue:c.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=y=>c.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":f[2]||(f[2]=y=>m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:c.data.notes,"onUpdate:modelValue":f[3]||(f[3]=y=>c.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Kf=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Hf={class:"row items-center no-wrap"},Yf={class:"col-auto"},Wf={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Qf={key:0},wa={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1},priceType:{type:String,require:!1,default:"price_1"}},emits:["update:modelValue","product-selected"],setup(c,{emit:s}){const u=xe(),o=c,i=C(!1),n=C(o.showCost),g=s,b=C(null),p=C([]),m=C(!0),f=C(-1),y=Ie({search:"",status:"active",...Le()}),_=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});[...tt(window.CONSTANTS.PRODUCT_PRICE_TYPES)];const V=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_1.replace("Harga ","H "),field:"price_1",align:"right"},{name:"price_2",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_2.replace("Harga ","H "),field:"price_2",align:"right"},{name:"price_3",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_3.replace("Harga ","H "),field:"price_3",align:"right"}],q=Z(()=>{if(i.value)return V;const F=V.filter(N=>N.name!=="cost");return u.screen.gt.sm?F:F.filter(N=>N.name==="name"||N.name==="stock")});we(()=>{R()});const x=()=>{if(b.value&&f.value!==-1){const F=(_.value.page-1)*_.value.rowsPerPage,N=f.value-F;it(()=>{if(N>=0&&N<p.value.length&&b.value.scrollTo){const h=b.value.$el.querySelector(".selected-row");h&&h.scrollIntoView({behavior:"smooth",block:"nearest"})}})}},R=()=>{o.modelValue!==!1&&H()},H=(F=null)=>{m.value=!0;const N=f.value;Ke({pagination:_,filter:y,props:F,rows:p,url:route("admin.product.data"),loading:m,tableRef:b,onSuccess:()=>{p.value.length>0?((N===0||N===-1)&&(f.value=0),it(()=>{x()})):f.value=-1}})},O=()=>{R()},U=F=>{g("product-selected",F),setTimeout(()=>{g("update:modelValue",!1)},100)},I=F=>{if(!o.modelValue){alert("none");return}const N=p.value.length;if(N===0)return;const h=(_.value.page-1)*_.value.rowsPerPage,j=h+N-1;if(F.key==="ArrowDown")F.preventDefault(),f.value<j?(f.value=f.value+1,x()):f.value===j&&I({key:"ArrowRight",preventDefault:()=>{}});else if(F.key==="ArrowUp")F.preventDefault(),f.value>h?(f.value=f.value-1,x()):f.value===h&&h>0&&I({key:"ArrowLeft",preventDefault:()=>{}});else if(F.key==="Enter"&&f.value!==-1){F.preventDefault(),F.preventDefault();const P=(_.value.page-1)*_.value.rowsPerPage,$=f.value-P;$>=0&&$<N?U(p.value[$]):console.warn("Kesalahan: selectedIndex global di luar batas halaman saat ini.")}else if(f.value!==-1){if(F.key==="ArrowRight"){F.preventDefault();const P=_.value.page+1;P<=Math.ceil(_.value.rowsNumber/_.value.rowsPerPage)&&(_.value.page=P,f.value=(P-1)*_.value.rowsPerPage,b.value.requestServerInteraction())}else if(F.key==="ArrowLeft"){F.preventDefault();const P=_.value.page-1;P>=1&&(_.value.page=P,f.value=(P-1)*_.value.rowsPerPage,b.value.requestServerInteraction())}}};return Me(()=>o.modelValue,(F,N)=>{N===!0&&F===!1&&(y.search=""),F===!0&&H()}),(F,N)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":N[4]||(N[4]=h=>F.$emit("update:modelValue",h)),maximized:a(u).screen.lt.sm},{default:l(()=>[e(fe,{class:"column fit",tabindex:"0",onKeydown:I,ref:"cardRef"},{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Hf,[N[5]||(N[5]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",Yf,[e(E,{flat:"",round:"",size:"sm",icon:"close",onClick:N[0]||(N[0]=h=>F.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:Ve(["q-py-sm",a(u).screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(ne,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":[N[1]||(N[1]=h=>y.search=h),O],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"]),n.value?(d(),D(sa,{key:0,modelValue:i.value,"onUpdate:modelValue":N[2]||(N[2]=h=>i.value=h),label:"Tampilkan Modal",style:{"margin-left":"-10px"}},null,8,["modelValue"])):k("",!0)]),_:1},8,["class"]),e(le,{class:Ve(["q-py-xs col",a(u).screen.lt.sm?"q-px-xs":""])},{default:l(()=>[e(Ue,{ref_key:"tableRef",ref:b,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":N[3]||(N[3]=h=>_.value=h),filter:y.search,loading:m.value,columns:q.value,rows:p.value,"rows-per-page-options":[10,25,50],onRequest:H,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":l(({icon:h,message:j,filter:P})=>[t("div",Wf,[t("span",null,r(j),1)])]),body:l(h=>[e(Pe,{tabindex:"0",props:h,class:Ve([{inactive:["stocked","raw_materials"].includes(h.row.type)&&h.row.stock==0,"selected-row":f.value===h.rowIndex},"cursor-pointer"]),onClick:j=>U(h.row),onKeydown:[Qt(J(j=>U(h.row),["prevent","stop"]),["enter"]),Qt(J(j=>U(h.row),["prevent"]),["space"])]},{default:l(()=>[e(W,{key:"name",props:h,class:"wrap-column"},{default:l(()=>[e($e,{text:h.row.name},null,8,["text"]),h.row.description?(d(),D($e,{key:0,text:h.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),a(u).screen.lt.md?(d(),w(G,{key:1},[t("div",null," Stok: "+r(h.row.type=="stocked"?a(K)(h.row.stock)+" "+h.row.uom:"-"),1),i.value?(d(),w("div",Qf," Modal: Rp. "+r(a(K)(h.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+r(a(K)(h.row.price_1)),1),t("div",null,"Harga 2: Rp. "+r(a(K)(h.row.price_1)),1),t("div",null,"Harga 3: Rp. "+r(a(K)(h.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"stock",props:h,class:"text-right"},{default:l(()=>[v(r(h.row.type=="stocked"?a(K)(h.row.stock)+" "+h.row.uom:"-"),1)]),_:2},1032,["props"]),e(W,{key:"cost",props:h,class:"wrap-column text-right"},{default:l(()=>[v(r(a(K)(h.row.cost)),1)]),_:2},1032,["props"]),e(W,{key:"price_1",props:h,class:"wrap-column text-right"},{default:l(()=>[v(r(a(K)(h.row.price_1)),1)]),_:2},1032,["props"]),e(W,{key:"price_2",props:h,class:"wrap-column text-right"},{default:l(()=>[v(r(a(K)(h.row.price_2)),1)]),_:2},1032,["props"]),e(W,{key:"price_3",props:h,class:"wrap-column text-right"},{default:l(()=>[v(r(a(K)(h.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},Jf={class:"q-gutter-sm"},Gf={class:"row items-center"},Xf={class:"text-weight-bold"},Zf={class:"row q-col-gutter-none full-width"},eg={class:"col-sm-6 col-12 col"},tg={class:"row full-width"},ag={key:0,class:"row"},lg={class:"col-sm-6 col-12"},og={class:"row q-ml-sm items-end"},ng={class:"row col grow"},sg={class:"col-12 q-pa-sm column"},rg={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},ig={key:0,class:"col"},dg={class:"text-caption text-grey-6 q-mt-xs"},ug={key:0,class:"text-caption text-grey-8 q-mt-xs"},mg={class:"text-italic"},cg={key:1,class:"col"},pg={class:"q-pa-sm q-pb-none text-grey-8"},fg={class:"col"},gg={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},bg={class:"text-h4 text-weight-bold"},vg={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},yg={class:"col q-py-sm"},_g={class:"q-py-sm"},kg={__name:"Editor",setup(c){const s=xe(),u=ge(),o=C(!0),i=C(null),n=C(null),g=C(null),b=C(!1),p=C(null),m=C(null),{isFullscreen:f,toggleFullscreen:y}=ka(m),_="Retur #"+u.props.data.code,V=C(u.props.data.supplier),q=C(""),x=C(!1),R=C(!1),H=C(!1),O=C(!1),U=C(null),I=Ie({id:u.props.data.id,code:u.props.data.code,supplier_id:u.props.data.supplier_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),F=Z(()=>I.items.reduce((me,L)=>me+L.cost*L.quantity,0)),N=()=>{var me;y(),f.value||(me=p==null?void 0:p.value)==null||me.hideDrawer()},h=me=>isNaN(me)||me<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,j=me=>isNaN(me)||me<0?(gt("Harga tidak valid.","top"),!1):!0,P=me=>!me||me.length==0?(gt("Barcode tidak valid.","top"),!1):!0,$=me=>{var L;(L=q.value)!=null&&L.endsWith("*")?q.value+=me.name:q.value=me.name},A=async()=>{const me=q.value.trim();if(me.length===0){R.value=!0;return}const L=me.split("*");let ye=1,se="",Y=null;if(L.length===1)se=L[0];else if(L.length<=3)ye=parseInt(L[0]),se=L[1],L.length===3&&(Y=parseFloat(L[2]));else{gt("Input tidak valid.","top");return}if(se.length===0){R.value=!0;return}!P(se)&&!h(ye)&&!j(Y)||(x.value=!0,await Oe.post(route("admin.purchase-order-return.add-item"),{order_id:I.id,product_code:se,qty:ye,price:Y,merge:o.value}).then(_e=>{const de=_e.data.data.item;let Q=-1;_e.data.data.mergeItem&&(Q=I.items.findIndex(qe=>qe.id===de.id)),Q===-1?I.items.push(de):I.items[Q]=de,q.value="",Y!==null&&Y!==parseFloat(de.price)&&gt("Harga tidak dapat diubah!","top")}).catch(_e=>{var de,Q;pt((Q=(de=_e.response)==null?void 0:de.data)==null?void 0:Q.message,"top"),console.error("Gagal mengambil data produk:",_e)}),x.value=!1,it(()=>{var _e;(_e=i.value)==null||_e.focus()}))},B=me=>{U.value=Object.create(me),H.value=!0},S=me=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${me.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{x.value=!0,Oe.post(route("admin.purchase-order-return.remove-item"),{id:me.id}).then(()=>{const L=I.items.findIndex(ye=>ye.id===me.id);L!==-1&&(I.items.splice(L,1)[0],ft("Item telah dihapus","top"))}).catch(L=>{var ye,se;pt(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{x.value=!1})})},M=()=>{x.value=!0;const me=n.value.getCurrentItem(),L={id:me.id,qty:me.quantity,cost:me.cost};me.notes&&(L.notes=me.notes),Oe.post(route("admin.purchase-order-return.update-item"),L).then(ye=>{const se=ye.data.data,Y=I.items.findIndex(_e=>_e.id===se.id);Y!==-1&&(I.items[Y]=se,ft("Item telah diperbarui","top")),H.value=!1}).catch(ye=>{var se,Y;pt(((Y=(se=ye==null?void 0:ye.response)==null?void 0:se.data)==null?void 0:Y.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ye)}).finally(()=>{x.value=!1})};we(()=>{const me=L=>{b.value||H.value||R.value||O.value||(L.key==="F1"?(L.preventDefault(),b.value=!0):L.key==="F2"?(L.preventDefault(),g.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),ue()):L.key==="F11"?(L.preventDefault(),N()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault())};document.addEventListener("keydown",me),wt(()=>{document.removeEventListener("keydown",me)}),it(()=>{var L;(L=p==null?void 0:p.value)==null||L.hideDrawer()})});const te=async()=>{x.value=!0;const me={id:I.id,supplier_id:I.supplier_id??null,datetime:ea(I.datetime),notes:I.notes};await Oe.post(route("admin.purchase-order-return.update"),me).then(L=>{const ye=L.data.data.id;I.supplier_id=ye.supplier_id}).catch(L=>{var ye,se;pt(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{x.value=!1})},ue=me=>{if(I.items.length===0){ft("Item masih kosong","top");return}xt.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{x.value=!0,Oe.post(route("admin.purchase-order-return.close",{id:I.id})).then(L=>{ft("Transaksi selesai"),ee.get(route("admin.purchase-order-return.detail",{id:I.id}))}).catch(L=>{var ye,se;pt((se=(ye=L.response)==null?void 0:ye.data)==null?void 0:se.message),console.error(L)}).finally(()=>{x.value=!1})})},re=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order-return.cancel",{id:I.id}),{id:I.id}).then(()=>{ft("Transaksi telah dibatalkan."),ee.visit(route("admin.purchase-order-return.detail",{id:I.id}))}).catch(me=>{var ye,se;const L=((se=(ye=me.response)==null?void 0:ye.data)==null?void 0:se.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(me)})})},Re=()=>{window.open(route("admin.purchase-order-return.detail",{id:I.id})+"?preview=1","_blank")},Ge=Z(()=>V.value?V.value.wallet_balance>=F.value:!0);return(me,L)=>{const ye=X("i-head"),se=X("authenticated-layout");return d(),w(G,null,[e(ye,{title:_}),e(se,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:l(()=>[v(r(_))]),"left-button":l(()=>[t("div",Jf,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=Y=>a(ee).get(me.route("admin.purchase-order-return.index")))})])]),"right-button":l(()=>[t("div",Gf,[a(s).screen.gt.sm?(d(),w(G,{key:0},[t("div",Xf,r(a(u).props.auth.user.username),1),L[20]||(L[20]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(_a)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",Zf,[t("div",eg,[t("div",tg,[e(Co,{ref_key:"supplierAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:V.value,"onUpdate:modelValue":L[2]||(L[2]=Y=>V.value=Y),label:"Pemasok",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),V.value?(d(),w("div",ag,[t("div",{class:Ve(["q-mt-xs q-ml-sm text-bold",Ge.value?"text-green":"text-red"])}," Wallet: "+r(V.value?"Rp. "+a(K)(V.value?V.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:Ve(["q-mt-xs q-ml-sm text-bold",V.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(V.value?"Rp. "+a(K)(V.value?V.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",lg,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:q.value,"onUpdate:modelValue":L[5]||(L[5]=Y=>q.value=Y),onKeyup:L[6]||(L[6]=Qt(J(Y=>A(),["prevent"]),["enter"])),loading:x.value,disable:x.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(T,{name:"search",onClick:L[3]||(L[3]=Y=>R.value=!0),class:"cursor-pointer"})]),append:l(()=>{var Y;return[((Y=q.value)==null?void 0:Y.length)>0?(d(),D(T,{key:0,name:"send",onClick:L[4]||(L[4]=_e=>A()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",og,[e(Ct,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[7]||(L[7]=Y=>o.value=Y),label:"Gabungkan item",disable:x.value},null,8,["modelValue","disable"])])])]),t("div",ng,[t("div",sg,[e(Vo,{items:I.items,onUpdateQuantity:L[8]||(L[8]=({id:Y,value:_e})=>me.updateQuantity(Y,_e)),onRemoveItem:S,onEditItem:B,"is-processing":x.value},null,8,["items","is-processing"])])]),t("div",rg,[a(s).screen.gt.sm?(d(),w("div",ig,[t("div",dg,r(I.items.length)+" item(s) ",1),I.notes?(d(),w("div",ug,[L[21]||(L[21]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",mg,[e($e,{text:I.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(d(),w("div",cg,[t("div",pg,[t("div",null,"Return #: "+r(I.code),1),t("div",null,"Order #: "+r(a(u).props.data.purchase_order.code),1),t("div",null,r(a(ve)(I.datetime)),1)])])):k("",!0),t("div",fg,[t("div",gg,[L[23]||(L[23]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",bg,[L[22]||(L[22]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(K)(F.value)),1)])])])]),t("div",vg,[t("div",yg,[e(E,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:L[9]||(L[9]=Y=>ue()),disable:!me.$can("admin.purchase-order-return.close")||x.value||I.items.length===0||I.status!=="draft",loading:x.value},null,8,["disable","loading"])]),t("div",_g,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[13]||(L[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[ae((d(),D(oe,{clickable:"",onClick:L[10]||(L[10]=J(Y=>O.value=!0,["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>L[24]||(L[24]=[v("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),ae((d(),D(oe,{clickable:"",onClick:L[11]||(L[11]=J(Y=>Re(),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"preview"})]),_:1}),e(z,null,{default:l(()=>L[25]||(L[25]=[v("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),ae((d(),D(oe,{clickable:"",onClick:L[12]||(L[12]=J(Y=>re(),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:l(()=>L[26]||(L[26]=[v(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(qo,{ref_key:"itemEditorRef",ref:n,modelValue:H.value,"onUpdate:modelValue":L[14]||(L[14]=Y=>H.value=Y),item:U.value,onSave:L[15]||(L[15]=Y=>M()),"is-processing":x.value},null,8,["modelValue","item","is-processing"]),e(wa,{modelValue:R.value,"onUpdate:modelValue":L[16]||(L[16]=Y=>R.value=Y),onProductSelected:$},null,8,["modelValue"]),e(Po,{modelValue:O.value,"onUpdate:modelValue":L[17]||(L[17]=Y=>O.value=Y),data:I,onSave:L[18]||(L[18]=Y=>te()),"is-processing":x.value},null,8,["modelValue","data","is-processing"]),e(To,{modelValue:b.value,"onUpdate:modelValue":L[19]||(L[19]=Y=>b.value=Y)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},wg=Object.freeze(Object.defineProperty({__proto__:null,default:kg},Symbol.toStringTag,{value:"Module"})),hg={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},$g={class:"q-pa-xs"},xg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Sg={key:0},Vg={key:1},qg={key:2},Cg={key:3},Tg={key:0},Pg={key:0},Rg={key:1},Og={class:"flex justify-end"},Sl="Retur Pembelian",Ig={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=zt(),m=Lt(),f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Pt(p-2,p-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Rt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES)],V=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES)],q=Ie({search:"",year:p,month:m,status:"all",refund_status:"all",...Le()}),x=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),R=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];we(()=>{N()});const H=P=>{if(P.status=="draft"){O(P);return}U(P)},O=P=>{ee.get(route("admin.purchase-order-return.edit",P.id))},U=P=>{ee.get(route("admin.purchase-order-return.detail",P.id))},I=P=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order-return.cancel",{id:P.id}),{id:P.id}).then($=>{const A=$.data.data,B=o.value.findIndex(S=>S.id===A.id);if(B===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[B].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var B,S;const A=((S=(B=$.response)==null?void 0:B.data)==null?void 0:S.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:A,color:"warning",position:"bottom"}),console.error($)})})},F=P=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.purchase-order-return.delete",P.id),fetchItemsCallback:N,loading:i}),N=(P=null)=>{Ke({pagination:x,filter:q,props:P,rows:o,url:route("admin.purchase-order-return.data"),loading:i,tableRef:n})},h=()=>{N()},j=Z(()=>s.screen.gt.sm?R:R.filter(P=>P.name==="code"||P.name==="action"));return Me(()=>q.year,P=>{P===null&&(q.month=null)}),(P,$)=>{const A=X("i-head"),B=X("authenticated-layout");return d(),w(G,null,[e(A,{title:Sl}),e(B,null,Be({title:l(()=>[v(r(Sl))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=S=>u.value=!u.value)},null,8,["icon"]),P.$can("admin.purchase-order-return.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=S=>a(ee).get(P.route("admin.purchase-order-return.add")))})):k("",!0)]),default:l(()=>[t("div",$g,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":$[10]||($[10]=S=>x.value=S),filter:q.search,loading:i.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:a(b)}),onRequest:N,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:M,filter:te})=>[t("div",xg,[t("span",null,r(M)+" "+r(te?" with term "+te:""),1)])]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:J(M=>H(S.row),["prevent"])},{default:l(()=>[e(W,{key:"code",props:S,class:"wrap-column"},{default:l(()=>{var M,te,ue;return[t("div",null,[e(T,{name:"tag"}),v(" "+r(S.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(r(a(ve)(S.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[S.row.cashier?(d(),w("div",Sg,[e(T,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((M=S.row.cashier)==null?void 0:M.username),1)])):k("",!0),S.row.cashier_session?(d(),w("div",Vg,[e(T,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((ue=(te=S.row.cashier_session)==null?void 0:te.cashier_terminal)==null?void 0:ue.name),1)])):k("",!0),S.row.supplier?(d(),w("div",qg,[e(T,{name:"person",class:"inline-icon"}),e(va,{href:P.route("admin.supplier.detail",{id:S.row.supplier.id}),onClick:$[7]||($[7]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(S.row.supplier.code)+" - "+r(S.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(K)(S.row.grand_total)),1),S.row.notes?(d(),w("div",Cg,[e(T,{name:"notes"}),v(" "+r(S.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Ft,{status:S.row.status,statuses:P.$CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Ft,{status:S.row.refund_status,statuses:P.$CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"red",partially_refunded:"orange",fully_refunded:"green",no_refund:"black"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(W,{key:"supplier_id",props:S},{default:l(()=>[S.row.supplier?(d(),w("div",Tg,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(S.row.supplier_code)+" - "+r(S.row.supplier_name),1)]),S.row.supplier_phone?(d(),w("div",Pg,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(S.row.supplier_phone),1)])):k("",!0),S.row.supplier_address?(d(),w("div",Rg,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(S.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:S},{default:l(()=>[v(r(a(K)(S.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:S},{default:l(()=>[e($e,{text:S.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:S,onClick:$[9]||($[9]=J(()=>{},["stop"]))},{default:l(()=>[t("div",Og,[P.$can("admin.purchase-order-return.detail")||P.$can("admin.purchase-order-return.edit")||P.$can("admin.purchase-order-return.cancel")||P.$can("admin.purchase-order-return.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[S.row.status!="draft"&&P.$can("admin.purchase-order-return.detail")?ae((d(),D(oe,{key:0,onClick:J(M=>U(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"visibility"})]),_:1}),e(z,null,{default:l(()=>$[11]||($[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.row.status=="draft"&&P.$can("admin.purchase-order-return.edit")?ae((d(),D(oe,{key:1,onClick:J(M=>O(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>$[12]||($[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.row.status=="draft"&&P.$can("admin.purchase-order-return.cancel")?ae((d(),D(oe,{key:2,onClick:J(M=>I(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"cancel"})]),_:1}),e(z,null,{default:l(()=>$[13]||($[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),P.$can("admin.purchase-order-return.delete")?ae((d(),D(oe,{key:3,onClick:J(M=>F(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>$[14]||($[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",hg,[e(ce,{modelValue:q.year,"onUpdate:modelValue":[$[2]||($[2]=S=>q.year=S),h],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),q.year!="all"?(d(),D(ce,{key:0,modelValue:q.month,"onUpdate:modelValue":[$[3]||($[3]=S=>q.month=S),h],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:q.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:q.status,"onUpdate:modelValue":[$[4]||($[4]=S=>q.status=S),h],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:q.refund_status,"onUpdate:modelValue":[$[5]||($[5]=S=>q.refund_status=S),h],options:V,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:q.search,"onUpdate:modelValue":$[6]||($[6]=S=>q.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ug=Object.freeze(Object.defineProperty({__proto__:null,default:Ig},Symbol.toStringTag,{value:"Module"})),Dg={key:0,class:"text-center q-mb-md text-grey-8"},jg={class:"text-subtitle2 text-weight-medium"},Eg={class:"text-h5 text-center text-primary q-pb-md"},Ag={class:"q-mb-md flex flex-center"},Mg={key:1},Ng={class:"col-6"},Bg={class:"col-6"},Fg={class:"row"},zg={class:"text-center q-mt-md"},Lg={key:0,class:"text-h6 text-negative text-weight-bold"},Kg={key:1,class:"text-h6 text-green-8 text-weight-bold"},Hg={key:2,class:"text-h6 text-positive text-weight-bold"},Yg={key:2},Wg={class:"text-h6 text-negative text-center"},Qg={key:3},Jg={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,i=ge(),n=C(!1),g=C("payment"),b=C(new Date),p=C(null),m=Ie([]),f=Z(()=>m.every(j=>j.id&&typeof j.amount=="number"&&j.amount>0)),y=Z(()=>i.props.accounts.map(j=>({label:j.name,value:j.id}))),_=Z(()=>m.reduce((j,P)=>j+(P.amount||0),0)),V=Z(()=>u.total-_.value),q=Z(()=>{if(!u.supplier)return!0;const j=m.find($=>$.id==="wallet");return(j?j.amount:0)<=u.supplier.balance}),x=new Date,R=rt.addToDate(new Date,{days:30}),H=Z(()=>[j=>!!j||"Tanggal jatuh tempo harus diisi",j=>rt.isBetweenDates(j,x,R,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),O=Z(()=>{if(g.value==="debt")return!!u.supplier&&H.value.every(A=>A(b.value)===!0);const j=m.some(A=>(A.amount||0)>0),P=m.every(A=>(A.amount||0)>=0),$=V.value<=0;return f.value&&j&&P&&$}),U=()=>{m.length<3&&m.push({id:null,amount:0})},I=j=>{if(m.length>1){const P=m.findIndex($=>$.id===j);P!==-1&&m.splice(P,1)}},F=j=>{g.value=j,b.value=new Date,m.splice(0,m.length),j==="payment"&&y.value.length>0&&(m.splice(0,m.length,{id:y.value[0].value,amount:u.total}),it(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},N=()=>{if(!O.value)return;n.value=!0;let j={total:u.total,is_debt:g.value==="debt"};if(g.value==="debt")j.due_date=rt.formatDate(b.value,"YYYY-MM-DD"),j.payments=[];else{const P=_.value,$=P>u.total?P-u.total:0,A=V.value>0?V.value:0;j.payments=m,j.remaining_debt=A,j.change=$}o("accepted",j),n.value=!1},h=()=>{if(y.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}F("payment")};return(j,P)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":P[3]||(P[3]=$=>j.$emit("update:modelValue",$)),onBeforeShow:h},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[c.supplier?(d(),w("div",Dg,[t("div",jg,[v(" Nama: "+r(c.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(a(K)(c.supplier.balance)),1)])])):k("",!0),t("div",Eg," Total: Rp. "+r(a(K)(c.total)),1),t("div",Ag,[e(a(Wt),{modelValue:g.value,"onUpdate:modelValue":[P[0]||(P[0]=$=>g.value=$),F],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="payment"?(d(),w("div",Mg,[(d(!0),w(G,null,Ne(m,($,A)=>(d(),w("div",{key:A,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Ng,[e(a(ce),{modelValue:$.id,"onUpdate:modelValue":B=>$.id=B,options:y.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[B=>!!B||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Bg,[e(Ee,{modelValue:$.amount,"onUpdate:modelValue":B=>$.amount=B,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!q.value,"error-message":q.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:A===0?"firstPaymentInputRef":null},Be({_:2},[m.length>1?{name:"append",fn:l(()=>[e(T,{size:"xs",name:"close",class:"cursor-pointer",onClick:B=>I(A)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Fg,[e(E,{disable:!(m.length<3&&V.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:U,size:"sm"},null,8,["disable"])]),t("div",zg,[V.value>0?(d(),w("div",Lg," Sisa Tagihan: Rp. "+r(a(K)(V.value)),1)):V.value<0?(d(),w("div",Kg," Kembalian: Rp. "+r(a(K)(Math.abs(V.value))),1)):(d(),w("div",Hg," Tagihan Terbayar "))])])):g.value==="debt"&&c.supplier?(d(),w("div",Yg,[e(ua,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=$=>b.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(x),"max-date":a(R),rules:H.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Wg," Total Utang: Rp. "+r(a(K)(c.total)),1)])):g.value==="debt"&&!c.supplier?(d(),w("div",Qg,P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=$=>j.$emit("update:modelValue",!1))}),e(E,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:N,disable:n.value||!O.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Gg=Object.freeze(Object.defineProperty({__proto__:null,default:Jg},Symbol.toStringTag,{value:"Module"})),Xg={key:0},Zg={style:{float:"right"}},e1={key:1},t1={style:{float:"right"}},a1={key:2},l1={style:{float:"right"}},o1={key:3},n1={style:{float:"right"}},s1={style:{float:"right"}},r1={class:"q-gutter-sm"},i1={class:"q-my-md"},d1={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const u=C(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(d(),w("tr",Xg,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Zg,r(a(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",e1,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",t1,r(a(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",a1,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",l1,r(a(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",o1,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",n1,r(a(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",s1,r(a(K)(c.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",r1,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",i1,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},u1=_t(d1,[["__scopeId","data-v-f0591c00"]]),m1=Object.freeze(Object.defineProperty({__proto__:null,default:u1},Symbol.toStringTag,{value:"Module"})),c1={class:"column"},p1={class:"bg-grey-2 q-pa-xs"},f1={class:"text-subtitle1 text-bold text-grey-10"},g1={class:"col-12 col-sm-6"},b1={class:"full-width"},v1={key:1},y1={key:0},_1={key:1},k1={class:"col-12 col-sm-6",align:"left"},w1={class:"full-width"};const h1={key:1},$1={class:"full-width",style:{"border-collapse":"collapse"}},x1={class:"q-pa-sm"},S1={class:"text-right q-pa-sm"},V1={class:"text-right q-pa-sm"},q1={class:"text-right q-pa-sm"},C1={key:0},T1={class:"col-12 col-sm-6"},P1={class:"text-body2 text-grey-7 text-italic"},R1={class:"col-12 col-sm-6"},O1={class:"row justify-end q-gutter-y-xs"},I1={class:"col-12 row justify-between"},U1={class:"text-subtitle2 text-bold"},D1={class:"row justify-end q-gutter-y-xs"},j1={class:"col-12 row justify-between"},E1={class:"text-subtitle2 text-bold"},A1={class:"row justify-end q-gutter-y-xs"},M1={class:"col-12 row justify-between"},N1={class:"text-subtitle2 text-bold"},B1={class:"row justify-end q-gutter-y-xs"},F1={class:"col-12 row justify-between"},z1={class:"text-subtitle2 text-bold"},Ro={__name:"InvoiceTab",props:{data:Object},setup(c){const s=c;return(u,o)=>{const i=X("i-link");return d(),w("div",c1,[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",p1,[t("div",f1," Pembelian #"+r(s.data.code),1)])]),_:1}),e(Ae),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",g1,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Supplier",-1)),t("table",b1,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),D(i,{key:0,href:u.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:l(()=>[e(T,{class:"inline-icon",name:"person"}),v(" "+r(s.data.supplier_name),1)]),_:1},8,["href"])):(d(),w("div",v1,[e(T,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(d(),w("tr",y1,[t("td",null,[e(T,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(d(),w("tr",_1,[t("td",null,[e(T,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",k1,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",w1,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.$CONSTANTS.PURCHASE_ORDER_STATUSES[s.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)]),k("",!0),s.data.due_date?(d(),w("tr",h1,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(na)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("table",$1,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(G,null,Ne(s.data.details,n=>(d(),w("tr",{key:n.id},[t("td",x1,[e(i,{href:u.route("admin.product.detail",{id:n.product_id})},{default:l(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",S1,r(n.quantity),1),t("td",null,r(n.product_uom),1),t("td",V1,r(a(K)(n.cost)),1),t("td",q1,r(a(K)(n.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),w("tr",C1,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(le,{class:"row",align:"left"},{default:l(()=>[t("div",T1,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",P1,r(s.data.notes?s.data.notes:"-"),1)]),t("div",R1,[t("div",O1,[t("div",I1,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",U1,r(a(K)(s.data.grand_total)),1)])]),t("div",D1,[t("div",j1,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",E1,r(a(K)(s.data.total_return)),1)])]),t("div",A1,[t("div",M1,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Dibayar (Rp)",-1)),t("div",N1,r(a(K)(s.data.total_paid)),1)])]),t("div",B1,[t("div",F1,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",z1,r(a($t)(s.data.balance)),1)])])])]),_:1})])}}},L1=Object.freeze(Object.defineProperty({__proto__:null,default:Ro},Symbol.toStringTag,{value:"Module"})),K1={key:0,class:"text-center q-mb-md text-grey-8"},H1={class:"text-subtitle2 text-weight-medium"},Y1={class:"text-h5 text-center text-primary q-pb-md"},W1={class:"text-center q-mt-md"},Q1={key:0,class:"text-h6 text-negative text-weight-bold"},J1={key:1,class:"text-h6 text-green-8 text-weight-bold"},G1={key:2,class:"text-h6 text-positive text-weight-bold"},Oo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,i=ge(),n=C(!1),g=C({method:null,amount:u.total,notes:null}),b=i.props.data.supplier,p=Z(()=>[...i.props.accounts.map(x=>({label:x.type=="bank"?x.name+" - "+x.number:x.name,value:x.id}))]),m=Z(()=>u.total-(g.value.amount||0)),f=Z(()=>g.value.method&&typeof g.value.amount=="number"&&g.value.amount>0),y=Z(()=>g.value.method?(g.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),_=Z(()=>f.value&&y.value===null),V=()=>{if(!_.value)return;n.value=!0;const x={total_paid:g.value.amount,payments:[{id:g.value.method,amount:g.value.amount}],notes:g.value.notes,remaining_debt:Math.max(0,u.total-(g.value.amount||0))};o("accepted",x),n.value=!1},q=()=>{g.value.amount=u.total,g.value.method=null,g.value.notes=null};return(x,R)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":R[4]||(R[4]=H=>x.$emit("update:modelValue",H)),onBeforeShow:q},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>R[5]||(R[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[a(b)?(d(),w("div",K1,[t("div",H1,[v(r(a(b).name)+" ",1),R[6]||(R[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(K)(a(b).balance)),1)])])):k("",!0),t("div",Y1," Total: Rp. "+r(a(K)(c.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":R[0]||(R[0]=H=>g.value.method=H),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value,rules:[H=>!!H||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":R[1]||(R[1]=H=>g.value.amount=H),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":y.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":R[2]||(R[2]=H=>g.value.notes=H),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",W1,[m.value>0?(d(),w("div",Q1," Sisa Tagihan: Rp. "+r(a(K)(m.value)),1)):m.value<0?(d(),w("div",J1," Kembalian: Rp. "+r(a(K)(Math.abs(m.value))),1)):(d(),w("div",G1," Tagihan Terbayar "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:R[3]||(R[3]=H=>x.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:V,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},X1=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),Z1={class:"column"},eb={class:"row"},tb={class:"full-width",style:{"border-collapse":"collapse"}},ab={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},lb={class:"row items-center q-gutter-x-sm"},ob={class:"text-weight-bold"},nb={class:"row items-center q-gutter-x-sm q-mt-xs"},sb={class:"text-caption text-grey-6"},rb={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},ib={class:"q-mt-xs"},db={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ub={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},mb={key:0},cb={class:"text-right q-pa-sm"},Io={__name:"PaymentTab",props:{data:Object},setup(c){const s=c,u=xe(),o=C(!1),i=()=>{o.value=!0},n=async b=>{const p={order_id:s.data.id,payments:b.payments,notes:b.notes};u.loading.show({message:"Memproses pembayaran..."});try{const m=await Oe.post(route("admin.purchase-order.add-payment"),p);u.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(m){let f="Gagal memproses pembayaran.";m.response&&m.response.data&&m.response.data.message?f=m.response.data.message:m.message&&(f=m.message),u.notify({message:f,color:"negative",icon:"error"})}finally{u.loading.hide()}},g=b=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.purchase-order.delete-payment",{id:b.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(p){let m="Gagal menghapus pembayaran.";p.response&&p.response.data&&p.response.data.message?m=p.response.data.message:p.message&&(m=p.message),u.notify({message:m,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(b,p)=>{const m=X("i-link");return d(),w(G,null,[t("div",Z1,[e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("div",eb,[b.$can("admin.purchase-order.add-payment")?(d(),D(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:p[0]||(p[0]=J(f=>i(),["stop"]))})):k("",!0)]),t("table",tb,[p[5]||(p[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(G,null,Ne(s.data.payments,f=>(d(),w("tr",{key:f.id},[t("td",ab,[t("div",lb,[e(T,{name:"tag",size:"xs",color:"grey-7"}),t("span",ob,r(f.code),1)]),t("div",nb,[e(T,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",sb,r(a(ve)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(d(),w("div",rb,[e(T,{name:"wallet",size:"xs",color:"grey-7"}),e(m,{class:"text-caption",href:b.route("admin.finance-account.detail",{id:f.account.id})},{default:l(()=>[v(r(f.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",ib,[e(bt,{label:b.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(bt,{label:f.amount<0?"Pembayaran":"Refund",color:f.amount<0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",db,r(a($t)(f.amount)),1),t("td",ub,[b.$can("admin.purchase-order.delete-payment")&&s.data.supplier_id&&f.amount<0?(d(),D(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>g(f)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",mb,p[2]||(p[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[p[3]||(p[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",cb,r(a($t)(s.data.balance)),1),p[4]||(p[4]=t("td",null,null,-1))])])])]),_:1})]),e(Oo,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=f=>o.value=f),total:b.remainingPayment,customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},pb=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"})),fb={class:"q-gutter-sm"},gb={class:"col col-lg-6 q-pa-xs",align:"center"},Vl="Rincian Pembelian",bb={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),o=ge().props.data,i=C(s.get("preview")||!1),g=C(s.get("tab")||"invoice"),b=()=>{window.print()};return(p,m)=>{const f=X("i-head"),y=X("authenticated-layout");return d(),w(G,null,[e(f,{title:Vl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Vl))])]),"left-button":l(()=>[t("div",fb,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>p.$goBack())})])]),"right-button":l(()=>[e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=_=>b())}),i.value?k("",!0):(d(),D(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[2]||(m[2]=_=>a(ee).get(p.route("admin.purchase-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",gb,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Ot,{modelValue:g.value,"onUpdate:modelValue":m[3]||(m[3]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"invoice",label:"Rincian"}),i.value?k("",!0):(d(),D(dt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(It,{modelValue:g.value,"onUpdate:modelValue":m[4]||(m[4]=_=>g.value=_),animated:""},{default:l(()=>[e(ut,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(Ro,{data:a(o)},null,8,["data"])]),_:1}),e(ut,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(Io,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},vb=_t(bb,[["__scopeId","data-v-520195e7"]]),yb=Object.freeze(Object.defineProperty({__proto__:null,default:vb},Symbol.toStringTag,{value:"Module"})),_b={class:"text-weight-medium wrap-column"},kb={class:"text-caption text-grey-6 elipsis"},wb={class:"column items-end"},hb={class:"text-caption text-grey-6 text-italic"},Uo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=xe(),u=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),D(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:a(u)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(d(!0),w(G,null,Ne(g.cols,b=>(d(),D(ta,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left"},{default:l(()=>[t("div",_b,r(g.row.product_name),1),t("div",kb,r(g.row.product_barcode),1),g.row.notes?(d(),D($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal",props:g,class:"text-right"},{default:l(()=>[t("div",wb,[t("div",null,r(a(K)(g.row.subtotal_cost)),1),t("div",hb,r(a(K)(g.row.quantity))+" x Rp. "+r(a(K)(g.row.cost)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},$b=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),xb={key:0,class:"text-center q-mb-md text-grey-8"},Sb={class:"text-subtitle2 text-weight-medium"},Vb={class:"text-h5 text-center text-primary q-pb-md"},qb={class:"q-mb-md flex flex-center"},Cb={key:1},Tb={class:"col-6"},Pb={class:"col-6"},Rb={class:"row"},Ob={class:"text-center q-mt-md"},Ib={key:0,class:"text-h6 text-negative text-weight-bold"},Ub={key:1,class:"text-h6 text-green-8 text-weight-bold"},Db={key:2,class:"text-h6 text-positive text-weight-bold"},jb={key:2},Eb={class:"text-h6 text-negative text-center"},Ab={key:3},Do={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,i=ge(),n=C(!1),g=C("payment"),b=C(new Date),p=C(null),m=Ie([]),f=Z(()=>m.every(j=>j.id&&typeof j.amount=="number"&&j.amount>0)),y=Z(()=>i.props.accounts.map(j=>({label:j.name,value:j.id}))),_=Z(()=>m.reduce((j,P)=>j+(P.amount||0),0)),V=Z(()=>u.total-_.value),q=Z(()=>{if(!u.supplier)return!0;const j=m.find(P=>P.id==="wallet");return j?j.amount<=u.supplier.balance:!0}),x=new Date,R=rt.addToDate(new Date,{days:30}),H=Z(()=>[j=>!!j||"Tanggal jatuh tempo harus diisi",j=>rt.isBetweenDates(j,x,R,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),O=Z(()=>{if(g.value==="debt")return!!u.supplier&&H.value.every(A=>A(b.value)===!0);const j=m.some(A=>(A.amount||0)>0),P=m.every(A=>(A.amount||0)>=0),$=V.value<=0;return f.value&&j&&P&&$}),U=()=>{m.length<3&&m.push({id:null,amount:0})},I=j=>{if(m.length>1){const P=m.findIndex($=>$.id===j);P!==-1&&m.splice(P,1)}},F=j=>{g.value=j,b.value=new Date,m.splice(0,m.length),j==="payment"&&y.value.length>0&&(m.splice(0,m.length,{id:y.value[0].value,amount:u.total}),it(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},N=()=>{if(!O.value)return;n.value=!0;let j={total:u.total,is_debt:g.value==="debt"};if(g.value==="debt")j.due_date=rt.formatDate(b.value,"YYYY-MM-DD"),j.payments=[];else{const P=_.value,$=P>u.total?P-u.total:0,A=V.value>0?V.value:0;j.payments=m,j.remaining_debt=A,j.change=$}o("accepted",j),n.value=!1},h=()=>{if(y.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}F("payment")};return(j,P)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":P[3]||(P[3]=$=>j.$emit("update:modelValue",$)),onBeforeShow:h},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[c.supplier?(d(),w("div",xb,[t("div",Sb,[v(" Nama: "+r(c.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(a(K)(c.supplier.balance)),1)])])):k("",!0),t("div",Vb," Total: Rp. "+r(a(K)(c.total)),1),t("div",qb,[e(a(Wt),{modelValue:g.value,"onUpdate:modelValue":[P[0]||(P[0]=$=>g.value=$),F],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="payment"?(d(),w("div",Cb,[(d(!0),w(G,null,Ne(m,($,A)=>(d(),w("div",{key:A,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Tb,[e(a(ce),{modelValue:$.id,"onUpdate:modelValue":B=>$.id=B,options:y.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[B=>!!B||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Pb,[e(Ee,{modelValue:$.amount,"onUpdate:modelValue":B=>$.amount=B,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!q.value,"error-message":q.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:A===0?"firstPaymentInputRef":null},Be({_:2},[m.length>1?{name:"append",fn:l(()=>[e(T,{size:"xs",name:"close",class:"cursor-pointer",onClick:B=>I(A)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Rb,[e(E,{disable:!(m.length<3&&V.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:U,size:"sm"},null,8,["disable"])]),t("div",Ob,[V.value>0?(d(),w("div",Ib," Sisa Tagihan: Rp. "+r(a(K)(V.value)),1)):V.value<0?(d(),w("div",Ub," Kembalian: Rp. "+r(a(K)(Math.abs(V.value))),1)):(d(),w("div",Db," Tagihan Terbayar "))])])):g.value==="debt"&&c.supplier?(d(),w("div",jb,[e(ua,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=$=>b.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(x),"max-date":a(R),rules:H.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Eb," Total Utang: Rp. "+r(a(K)(c.total)),1)])):g.value==="debt"&&!c.supplier?(d(),w("div",Ab,P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=$=>j.$emit("update:modelValue",!1))}),e(E,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:N,disable:n.value||!O.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Mb=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),Nb={class:"row items-center no-wrap"},Bb={class:"col-auto"},jo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,i=u,n=()=>{i("save")},g=Z(()=>o.item.quantity*o.item.cost),b=y=>{y.stopPropagation(),y.preventDefault()},p=y=>{o.modelValue&&(y.key==="Enter"?(n(),b(y)):y.key==="Escape"&&(i("update:modelValue",!1),b(y)))};we(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item});const f=()=>{};return(y,_)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":_[6]||(_[6]=V=>y.$emit("update:modelValue",V)),onBeforeShow:f},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Nb,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Bb,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=V=>y.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:c.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=V=>c.item.product_name=V),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=V=>c.item.quantity=V),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.cost,"onUpdate:modelValue":_[3]||(_[3]=V=>c.item.cost=V),label:"Modal / Harga Beli","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=V=>g.value=V),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:c.item.notes,"onUpdate:modelValue":_[5]||(_[5]=V=>c.item.notes=V),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Fb=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),zb={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(u,o)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[ae(e(E,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Eo=_t(zb,[["__scopeId","data-v-a7905738"]]),Lb=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Kb={class:"row items-center no-wrap"},Hb={class:"col text-subtite text-bold text-grey-8"},Yb={class:"col-auto"},Ao={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,i=u,n=()=>{i("save")},g=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),g(m)):m.key==="Escape"&&(i("update:modelValue",!1),g(m)))};return we(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,f)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":f[4]||(f[4]=y=>m.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",Kb,[t("div",Hb," Edit "+r(c.data.code),1),t("div",Yb,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=y=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(Kt,{modelValue:c.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=y=>c.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":f[2]||(f[2]=y=>m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:c.data.notes,"onUpdate:modelValue":f[3]||(f[3]=y=>c.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Wb=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),Qb={key:0},Jb={style:{float:"right"}},Gb={key:1},Xb={style:{float:"right"}},Zb={key:2},ev={style:{float:"right"}},tv={key:3},av={style:{float:"right"}},lv={style:{float:"right"}},ov={class:"q-gutter-sm"},nv={class:"q-my-md"},sv={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const u=C(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(d(),w("tr",Qb,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Jb,r(a(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",Gb,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",Xb,r(a(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",Zb,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",ev,r(a(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",tv,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",av,r(a(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",lv,r(a(K)(c.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",ov,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",nv,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Mo=_t(sv,[["__scopeId","data-v-31d340fd"]]),rv=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),iv={class:"q-gutter-sm"},dv={class:"row items-center"},uv={class:"text-weight-bold"},mv={class:"row q-col-gutter-none full-width"},cv={class:"col-sm-6 col-12 col"},pv={class:"row full-width"},fv={class:"text-grey q-mt-xs q-ml-sm"},gv={class:"col-sm-6 col-12"},bv={class:"row q-ml-sm items-end"},vv={class:"row col grow"},yv={class:"col-12 q-pa-sm column"},_v={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},kv={key:0,class:"col"},wv={class:"text-caption text-grey-6 q-mt-xs"},hv={key:0,class:"text-caption text-grey-8 q-mt-xs"},$v={class:"text-italic"},xv={key:1,class:"col"},Sv={class:"q-pa-sm q-pb-none text-grey-8"},Vv={class:"col"},qv={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Cv={class:"text-h4 text-weight-bold"},Tv={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Pv={class:"col q-py-sm"},Rv={class:"q-py-sm"},Ov={__name:"Editor",setup(c){const s=xe(),u=ge(),o=C(!0),i=C(null),n=C(null),g=C(null),b=C(!1),p=C(null),m=C(null),{isFullscreen:f,toggleFullscreen:y}=ka(m),_=u.props.data.code,V=C(u.props.data.supplier),q=C(null),x=C(""),R=C(!1),H=C(!1),O=C(!1),U=C(!1),I=C(!1),F=C(!1),N=C(null),h=Ie({id:u.props.data.id,code:u.props.data.code,supplier_id:u.props.data.supplier_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),j=Z(()=>h.items.reduce((se,Y)=>se+Y.cost*Y.quantity,0)),P=()=>{var se;y(),f.value||(se=p==null?void 0:p.value)==null||se.hideDrawer()},$=se=>isNaN(se)||se<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,A=se=>isNaN(se)||se<0?(gt("Harga tidak valid.","top"),!1):!0,B=se=>!se||se.length==0?(gt("Barcode tidak valid.","top"),!1):!0,S=se=>{var Y;(Y=x.value)!=null&&Y.endsWith("*")?x.value+=se.name:x.value=se.name},M=async()=>{const se=x.value.trim();if(se.length===0){O.value=!0;return}const Y=se.split("*");let _e=1,de="",Q=null;if(Y.length===1)de=Y[0];else if(Y.length<=3)_e=parseInt(Y[0]),de=Y[1],Y.length===3&&(Q=parseFloat(Y[2]));else{gt("Input tidak valid.","top");return}if(de.length===0){O.value=!0;return}!B(de)&&!$(_e)&&!A(Q)||(R.value=!0,await Oe.post(route("admin.purchase-order.add-item"),{order_id:h.id,product_code:de,qty:_e,cost:Q,merge:o.value}).then(qe=>{const je=qe.data.data.item;let ke=-1;qe.data.data.mergeItem&&(ke=h.items.findIndex(ht=>ht.id===je.id)),ke===-1?h.items.push(je):h.items[ke]=je,x.value="",Q!==null&&Q!==parseFloat(je.cost)&&gt("Harga tidak dapat diubah!","top")}).catch(qe=>{var je,ke;pt((ke=(je=qe.response)==null?void 0:je.data)==null?void 0:ke.message,"top"),console.error("Gagal mengambil data produk:",qe)}),R.value=!1,it(()=>{var qe;(qe=i.value)==null||qe.focus()}))},te=se=>{N.value=Object.create(se),U.value=!0},ue=se=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${se.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{R.value=!0,Oe.post(route("admin.purchase-order.remove-item"),{id:se.id}).then(()=>{const Y=h.items.findIndex(_e=>_e.id===se.id);Y!==-1&&(h.items.splice(Y,1)[0],ft("Item telah dihapus","top"))}).catch(Y=>{var _e,de;pt(((de=(_e=Y==null?void 0:Y.response)==null?void 0:_e.data)==null?void 0:de.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(Y)}).finally(()=>{R.value=!1})})},re=()=>{R.value=!0;const se=n.value.getCurrentItem(),Y={id:se.id,qty:se.quantity,cost:se.cost};se.notes&&(Y.notes=se.notes),Oe.post(route("admin.purchase-order.update-item"),Y).then(_e=>{const de=_e.data.data,Q=h.items.findIndex(qe=>qe.id===de.id);Q!==-1&&(h.items[Q]=de,ft("Item telah diperbarui","top"))}).catch(_e=>{var de,Q;pt(((Q=(de=_e==null?void 0:_e.response)==null?void 0:de.data)==null?void 0:Q.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(_e)}).finally(()=>{R.value=!1})};we(()=>{const se=Y=>{Y.key==="F1"?(Y.preventDefault(),b.value=!0):Y.key==="F2"?(Y.preventDefault(),g.value.focus()):Y.key==="F3"?(Y.preventDefault(),i.value.focus()):Y.key==="F4"?(Y.preventDefault(),o.value=!o.value):Y.key==="F10"?(Y.preventDefault(),H.value=!0):Y.key==="F11"?(Y.preventDefault(),P()):(Y.key==="F5"||Y.key==="F6"||Y.key==="F7"||Y.key==="F12")&&Y.preventDefault()};document.addEventListener("keydown",se),wt(()=>{document.removeEventListener("keydown",se)}),it(()=>{var Y;(Y=p==null?void 0:p.value)==null||Y.hideDrawer()})});const Re=async se=>{V.value=se,h.supplier_id=se==null?void 0:se.id,await Ge(),se!=null&&se.id?i.value.focus():g.value.focus()},Ge=async()=>{R.value=!0;const se={id:h.id,supplier_id:h.supplier_id,datetime:ea(h.datetime),notes:h.notes};await Oe.post(route("admin.purchase-order.update"),se).then(Y=>{const _e=Y.data.data.id;h.supplier_id=_e.supplier_id}).catch(Y=>{var _e,de;pt(((de=(_e=Y==null?void 0:Y.response)==null?void 0:_e.data)==null?void 0:de.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Y)}).finally(()=>{R.value=!1})},me=se=>{if(h.items.length===0){ft("Item masih kosong","top");return}const Y={id:h.id,...se};R.value=!0,Oe.post(route("admin.purchase-order.close"),Y).then(_e=>{ft("Transaksi selesai"),ee.visit(route("admin.purchase-order.detail",{id:h.id}))}).catch(_e=>{var de,Q;pt((Q=(de=_e.response)==null?void 0:de.data)==null?void 0:Q.message),console.error(_e)}).finally(()=>{R.value=!1})},L=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${h.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order.cancel",{id:h.id}),{id:h.id}).then(()=>{ft("Transaksi telah dibatalkan."),ee.visit(route("admin.purchase-order.detail",{id:h.id}))}).catch(se=>{var _e,de;const Y=((de=(_e=se.response)==null?void 0:_e.data)==null?void 0:de.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:Y,color:"warning",position:"bottom"}),console.error(se)})})},ye=()=>{window.open(route("admin.purchase-order.detail",{id:h.id})+"?preview=1","_blank")};return(se,Y)=>{const _e=X("i-head"),de=X("authenticated-layout");return d(),w(G,null,[e(_e,{title:a(_)},null,8,["title"]),e(de,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:l(()=>[v(r(a(_)),1)]),"left-button":l(()=>[t("div",iv,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:Y[0]||(Y[0]=Q=>a(ee).get(se.route("admin.purchase-order.index")))})])]),"right-button":l(()=>[t("div",dv,[a(s).screen.gt.sm?(d(),w(G,{key:0},[t("div",uv,r(a(u).props.auth.user.username),1),Y[22]||(Y[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(_a)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",mv,[t("div",cv,[t("div",pv,[e(Co,{ref_key:"supplierAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:V.value,"onUpdate:modelValue":Y[2]||(Y[2]=Q=>V.value=Q),label:"Pemasok",disable:R.value,onSupplierSelected:Re,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",fv," Saldo: "+r(V.value?"Rp. "+a(K)(V.value?V.value.balance:0):"Tidak tersedia"),1)])]),t("div",gv,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:x.value,"onUpdate:modelValue":Y[5]||(Y[5]=Q=>x.value=Q),onKeyup:Y[6]||(Y[6]=Qt(J(Q=>M(),["prevent"]),["enter"])),loading:R.value,disable:R.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(T,{name:"search",onClick:Y[3]||(Y[3]=Q=>O.value=!0),class:"cursor-pointer"})]),append:l(()=>{var Q;return[((Q=x.value)==null?void 0:Q.length)>0?(d(),D(T,{key:0,name:"send",onClick:Y[4]||(Y[4]=qe=>M()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",bv,[e(Ct,{class:"col",modelValue:o.value,"onUpdate:modelValue":Y[7]||(Y[7]=Q=>o.value=Q),label:"Gabungkan item",disable:R.value},null,8,["modelValue","disable"])])])]),t("div",vv,[t("div",yv,[e(Uo,{items:h.items,onUpdateQuantity:Y[8]||(Y[8]=({id:Q,value:qe})=>se.updateQuantity(Q,qe)),onRemoveItem:ue,onEditItem:te,"is-processing":R.value},null,8,["items","is-processing"])])]),t("div",_v,[a(s).screen.gt.sm?(d(),w("div",kv,[t("div",wv,r(h.items.length)+" item(s) ",1),h.notes?(d(),w("div",hv,[Y[23]||(Y[23]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",$v,[e($e,{text:h.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(d(),w("div",xv,[t("div",Sv,[t("div",null,"#: "+r(h.code),1),t("div",null,r(a(ve)(h.datetime)),1)])])):k("",!0),t("div",Vv,[t("div",qv,[Y[25]||(Y[25]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Cv,[Y[24]||(Y[24]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(K)(j.value)),1)])])])]),t("div",Tv,[t("div",Pv,[e(E,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:Y[9]||(Y[9]=Q=>H.value=!0),disable:!se.$can("admin.purchase-order.close")||R.value||h.items.length===0||h.status!=="draft",loading:R.value},null,8,["disable","loading"])]),t("div",Rv,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:Y[13]||(Y[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[ae((d(),D(oe,{clickable:"",onClick:Y[10]||(Y[10]=J(Q=>I.value=!0,["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>Y[26]||(Y[26]=[v("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),ae((d(),D(oe,{clickable:"",onClick:Y[11]||(Y[11]=J(Q=>ye(),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"preview"})]),_:1}),e(z,null,{default:l(()=>Y[27]||(Y[27]=[v("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),ae((d(),D(oe,{clickable:"",onClick:Y[12]||(Y[12]=J(Q=>L(),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:l(()=>Y[28]||(Y[28]=[v(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(jo,{ref_key:"itemEditorRef",ref:n,modelValue:U.value,"onUpdate:modelValue":Y[14]||(Y[14]=Q=>U.value=Q),item:N.value,onSave:Y[15]||(Y[15]=Q=>re()),"is-processing":R.value},null,8,["modelValue","item","is-processing"]),e(Do,{modelValue:H.value,"onUpdate:modelValue":Y[16]||(Y[16]=Q=>H.value=Q),onAccepted:me,form:h,supplier:V.value,total:j.value,accounts:a(u).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(wa,{modelValue:O.value,"onUpdate:modelValue":Y[17]||(Y[17]=Q=>O.value=Q),"show-cost":!0,onProductSelected:S},null,8,["modelValue"]),e(Ao,{modelValue:I.value,"onUpdate:modelValue":Y[18]||(Y[18]=Q=>I.value=Q),data:h,onSave:Y[19]||(Y[19]=Q=>Ge()),"is-processing":R.value},null,8,["modelValue","data","is-processing"]),e(Eo,{modelValue:b.value,"onUpdate:modelValue":Y[20]||(Y[20]=Q=>b.value=Q)},null,8,["modelValue"]),e(Mo,{modelValue:F.value,"onUpdate:modelValue":Y[21]||(Y[21]=Q=>F.value=Q),order:h,supplier:V.value,total:j.value,payment:q.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},Iv=Object.freeze(Object.defineProperty({__proto__:null,default:Ov},Symbol.toStringTag,{value:"Module"})),No={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.PURCHASE_ORDER_STATUSES,u={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(d(),D(Ft,{status:c.status,statuses:a(s),colors:u},null,8,["status","statuses"]))}},Bo={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,u={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(d(),D(Ft,{status:c.status,statuses:a(s),colors:u},null,8,["status","statuses"]))}};const Uv={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Dv={class:"q-pa-xs"},jv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ev={key:0},Av={key:1},Mv={key:2},Nv={key:0},Bv={key:0},Fv={key:1},zv={class:"flex justify-end"},ql="Pembelian",Lv={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=zt(),m=Lt(),f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Pt(p-2,p-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Rt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],V=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],x=Ie({search:"",year:p,month:m,status:"all",payment_status:"all",delivery_status:"all",...Le()}),R=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),H=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp.)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];we(()=>{h()});const O=$=>{if($.status=="draft"){U($);return}I($)},U=$=>{ee.get(route("admin.purchase-order.edit",$.id))},I=$=>{ee.get(route("admin.purchase-order.detail",$.id))},F=$=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order.cancel",{id:$.id}),{id:$.id}).then(A=>{const B=A.data.data,S=o.value.findIndex(M=>M.id===B.id);if(S===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[S].status="canceled",s.notify({message:A.data.message,position:"bottom"})}).catch(A=>{var S,M;const B=((M=(S=A.response)==null?void 0:S.data)==null?void 0:M.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:B,color:"warning",position:"bottom"}),console.error(A)})})},N=$=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.purchase-order.delete",$.id),fetchItemsCallback:h,loading:i}),h=($=null)=>{Ke({pagination:R,filter:x,props:$,rows:o,url:route("admin.purchase-order.data"),loading:i,tableRef:n})},j=()=>{h()},P=Z(()=>s.screen.gt.sm?H:H.filter($=>$.name==="id"||$.name==="action"));return Me(()=>x.year,$=>{$===null&&(x.month=null)}),($,A)=>{const B=X("i-head"),S=X("authenticated-layout");return d(),w(G,null,[e(B,{title:ql}),e(S,null,Be({title:l(()=>[v(r(ql))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=M=>u.value=!u.value)},null,8,["icon"]),$.$can("admin.purchase-order.edit")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:A[1]||(A[1]=M=>a(ee).get($.route("admin.purchase-order.add")))})):k("",!0)]),default:l(()=>[t("div",Dv,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:R.value,"onUpdate:pagination":A[11]||(A[11]=M=>R.value=M),filter:x.search,loading:i.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:a(b)}),onRequest:h,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:M,message:te,filter:ue})=>[t("div",jv,[t("span",null,r(te)+" "+r(ue?" with term "+ue:""),1)])]),body:l(M=>[e(Pe,{props:M,class:"cursor-pointer",onClick:J(te=>O(M.row),["prevent"])},{default:l(()=>[e(W,{key:"id",props:M,class:"wrap-column"},{default:l(()=>[t("div",null,[e(T,{name:"tag"}),v(" "+r(M.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(r(a(ve)(M.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[M.row.supplier?(d(),w("div",Ev,[e(T,{name:"person",class:"inline-icon"}),e(va,{href:$.route("admin.supplier.detail",{id:M.row.supplier.id}),onClick:A[8]||(A[8]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(M.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Total: Rp. "+r(a(K)(M.row.grand_total)),1),M.row.balance!=0?(d(),w("div",Av," Saldo: Rp. "+r(a($t)(M.row.balance)),1)):k("",!0),M.row.notes?(d(),w("div",Mv,[e(T,{name:"notes"}),v(" "+r(M.row.notes),1)])):k("",!0)],64)),t("div",null,[e(No,{status:M.row.status},null,8,["status"]),M.row.status=="closed"?(d(),w(G,{key:0},[e(Bo,{status:M.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]),_:2},1032,["props"]),e(W,{key:"supplier_id",props:M},{default:l(()=>[M.row.supplier?(d(),w("div",Nv,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(M.row.supplier_name),1)]),M.row.supplier_phone?(d(),w("div",Bv,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(M.row.supplier_phone),1)])):k("",!0),M.row.supplier_address?(d(),w("div",Fv,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(M.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"grand_total",props:M},{default:l(()=>[v(r(a(K)(M.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:M},{default:l(()=>[v(r(a($t)(M.row.balance)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:M},{default:l(()=>[e($e,{text:M.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:M,onClick:A[10]||(A[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",zv,[$.$can("admin.purchase-order.detail")||$.$can("admin.purchase-order.edit")||$.$can("admin.purchase-order.cancel")||$.$can("admin.purchase-order.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:A[9]||(A[9]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[M.row.status!="draft"&&$.$can("admin.purchase-order.detail")?ae((d(),D(oe,{key:0,onClick:J(te=>I(M.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"visibility"})]),_:1}),e(z,null,{default:l(()=>A[12]||(A[12]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),M.row.status=="draft"&&$.$can("admin.purchase-order.edit")?ae((d(),D(oe,{key:1,onClick:J(te=>U(M.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>A[13]||(A[13]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),M.row.status=="draft"&&$.$can("admin.purchase-order.cancel")?ae((d(),D(oe,{key:2,onClick:J(te=>F(M.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"cancel"})]),_:1}),e(z,null,{default:l(()=>A[14]||(A[14]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),$.$can("admin.purchase-order.delete")?ae((d(),D(oe,{key:3,onClick:J(te=>N(M.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>A[15]||(A[15]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",Uv,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[A[2]||(A[2]=M=>x.year=M),j],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(d(),D(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[A[3]||(A[3]=M=>x.month=M),j],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.status,"onUpdate:modelValue":[A[4]||(A[4]=M=>x.status=M),j],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:x.payment_status,"onUpdate:modelValue":[A[5]||(A[5]=M=>x.payment_status=M),j],options:V,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":A[7]||(A[7]=M=>x.search=M),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Kv=Object.freeze(Object.defineProperty({__proto__:null,default:Lv},Symbol.toStringTag,{value:"Module"})),Hv={class:"q-gutter-sm"},Yv={class:"col col-md-6 q-pa-xs"},Cl="Tambah Retur Penjualan",Wv={__name:"Create",setup(c){const s=ge(),u=Qe({code:s.props.data.code}),o=()=>nt({form:u,url:route("admin.sales-order-return.add")});return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return d(),w(G,null,[e(g,{title:Cl}),e(b,null,{title:l(()=>[v(r(Cl))]),"left-button":l(()=>[t("div",Hv,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.sales-order-return.index")))})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Yv,[e(Je,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[e(ne,{autofocus:"",modelValue:a(u).code,"onUpdate:modelValue":n[1]||(n[1]=p=>a(u).code=p),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!a(u).errors.code,disable:a(u).processing,"error-message":a(u).errors.code,rules:[p=>p&&p.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:a(u).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:a(u).processing,onClick:n[2]||(n[2]=p=>a(ee).get(i.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Qv=Object.freeze(Object.defineProperty({__proto__:null,default:Wv},Symbol.toStringTag,{value:"Module"})),Jv={class:"column"},Gv={class:"bg-grey-2 q-pa-xs"},Xv={class:"text-subtitle1 text-bold text-grey-10"},Zv={class:"text-caption text-grey-8"},ey={class:"col-12 col-sm-6"},ty={class:"full-width"},ay={key:1},ly={key:0},oy={key:1},ny={class:"col-12 col-sm-6",align:"left"},sy={class:"full-width"},ry={class:"full-width",style:{"border-collapse":"collapse"}},iy={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},dy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},uy={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},my={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},cy={key:0},py={class:"col-12 col-sm-6"},fy={class:"text-body2 text-grey-7 text-italic"},gy={class:"col-12 col-sm-6"},by={class:"row justify-end q-gutter-y-xs"},vy={class:"col-12 row justify-between"},yy={class:"text-subtitle2 text-bold"},_y={class:"row justify-end q-gutter-y-xs"},ky={class:"col-12 row justify-between"},wy={class:"text-subtitle2 text-bold"},hy={class:"row justify-end q-gutter-y-xs"},$y={class:"col-12 row justify-between"},xy={class:"text-subtitle2 text-bold"},Fo={__name:"MainInfoTab",props:{data:Object},setup(c){const s=c;return(u,o)=>{const i=X("i-link"),n=X("my-link");return d(),w("div",Jv,[e(le,{class:"q-pa-none"},{default:l(()=>{var g,b;return[t("div",Gv,[t("div",Xv," RETUR #"+r(s.data.code),1),t("div",Zv,[v(" Kasir: "+r((g=s.data.cashier)==null?void 0:g.username)+" - "+r((b=s.data.cashier)==null?void 0:b.name)+" | "+r(a(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),w(G,{key:0},[v(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]}),_:1}),e(Ae),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",ey,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",ty,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),D(i,{key:0,href:u.route("admin.customer.detail",{id:s.data.customer_id})},{default:l(()=>[e(T,{class:"inline-icon",name:"person"}),v(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(d(),w("div",ay,[e(T,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(d(),w("tr",ly,[t("td",null,[e(T,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(d(),w("tr",oy,[t("td",null,[e(T,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",ny,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",sy,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:u.route("admin.sales-order.detail",{id:s.data.sales_order_id})},{default:l(()=>[v(r(s.data.sales_order_id?s.data.sales_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("table",ry,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(G,null,Ne(s.data.details,g=>(d(),w("tr",{key:g.id},[t("td",iy,[e(i,{href:u.route("admin.product.detail",g.product_id)},{default:l(()=>[v(r(g.product_name),1)]),_:2},1032,["href"])]),t("td",dy,r(a(K)(g.price)),1),t("td",uy,r(g.quantity),1),t("td",my,r(a(K)(g.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),w("tr",cy,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(le,{class:"row",align:"left"},{default:l(()=>[t("div",py,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",fy,r(s.data.notes?s.data.notes:"-"),1)]),t("div",gy,[t("div",by,[t("div",vy,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",yy,r(a(K)(s.data.grand_total)),1)])]),t("div",_y,[t("div",ky,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",wy,r(a(K)(parseFloat(-s.data.total_refunded))),1)])]),t("div",hy,[t("div",$y,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",xy,r(a(K)(s.data.remaining_refund)),1)])])])]),_:1})])}}},Sy=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),Vy={key:0,class:"text-center q-mb-md text-grey-8"},qy={class:"text-subtitle2 text-weight-medium"},Cy={class:"text-h5 text-center text-primary q-pb-md"},Ty={class:"text-center q-mt-md"},Py={key:0,class:"text-h6 text-negative text-weight-bold"},Ry={key:1,class:"text-h6 text-positive text-weight-bold"},zo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,i=ge(),n=C(!1),g=C({method:"cash",amount:u.total,notes:null}),b=i.props.data.customer,p=Z(()=>[...b?[{label:"Refund ke Wallet",value:"wallet"}]:[],{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(q=>({label:q.name,value:q.id}))]),m=Z(()=>u.total-(g.value.amount||0)),f=Z(()=>{const q=g.value.amount||0;return q<=0?"Jumlah pembayaran harus lebih dari 0.":q>u.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),y=Z(()=>f.value===null),_=()=>{if(!y.value)return;n.value=!0;const q={id:g.value.method,amount:g.value.amount,notes:g.value.notes};o("accepted",q),n.value=!1},V=()=>{g.value.amount=u.total,g.value.method="cash",g.value.notes=null};return(q,x)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":x[4]||(x[4]=R=>q.$emit("update:modelValue",R)),onBeforeShow:V},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>x[5]||(x[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[a(b)?(d(),w("div",Vy,[t("div",qy,[v(r(a(b).code)+" ",1),x[6]||(x[6]=t("br",null,null,-1)),v(" "+r(a(b).name)+" ",1),x[7]||(x[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(K)(a(b).wallet_balance)),1)])])):k("",!0),t("div",Cy," Total: Rp. "+r(a(K)(c.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":x[0]||(x[0]=R=>g.value.method=R),options:p.value,label:g.value.method=="wallet"?"Tujuan":"Sumber Dana",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","label","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":x[1]||(x[1]=R=>g.value.amount=R),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":f.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":x[2]||(x[2]=R=>g.value.notes=R),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Ty,[m.value>0?(d(),w("div",Py," Sisa Refund: Rp. "+r(a(K)(m.value)),1)):(d(),w("div",Ry," Refund Lunas "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:x[3]||(x[3]=R=>q.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:_,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Oy=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),Iy={class:"column"},Uy={class:"row"},Dy={class:"full-width",style:{"border-collapse":"collapse"}},jy={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ey={class:"row items-center q-gutter-x-sm"},Ay={class:"text-weight-bold"},My={class:"row items-center q-gutter-x-sm q-mt-xs"},Ny={class:"text-caption text-grey-6"},By={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Fy={class:"text-caption text-grey-6"},zy={class:"q-mt-xs"},Ly={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ky={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Hy={key:0},Yy={class:"text-right q-pa-sm"},Lo={__name:"RefundTab",props:{data:Object},setup(c){const s=c,u=xe(),o=C(!1),i=()=>{o.value=!0},n=Z(()=>s.data.remaining_refund),g=async p=>{const m={order_id:s.data.id,...p};u.loading.show({message:"Memproses pembayaran..."});try{const f=await Oe.post(route("admin.sales-order-return.add-refund"),m);u.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(f){let y="Gagal memproses refund.";f.response&&f.response.data&&f.response.data.message?y=f.response.data.message:f.message&&(y=f.message),u.notify({message:y,color:"negative",icon:"error"})}finally{u.loading.hide()}},b=p=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.sales-order-return.delete-refund",{id:p.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(m){let f="Gagal menghapus refund pembayaran.";m.response&&m.response.data&&m.response.data.message?f=m.response.data.message:m.message&&(f=m.message),u.notify({message:f,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(p,m)=>(d(),w(G,null,[t("div",Iy,[e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("div",Uy,[p.$can("admin.sales-order-return.add-refund")?(d(),D(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=J(f=>i(),["stop"]))})):k("",!0)]),t("table",Dy,[m[5]||(m[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(G,null,Ne(s.data.refunds,f=>(d(),w("tr",{key:f.id},[t("td",jy,[t("div",Ey,[e(T,{name:"tag",size:"xs",color:"grey-7"}),t("span",Ay,r(f.code),1)]),t("div",My,[e(T,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Ny,r(a(ve)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(d(),w("div",By,[e(T,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Fy,r(f.account.name),1)])):k("",!0),t("div",zy,[e(bt,{label:p.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Ly,r(a(K)(f.amount)),1),t("td",Ky,[p.$can("admin.sales-order-return.delete-refund")?(d(),D(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(f)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(d(),w("tr",Hy,m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund",-1)),t("th",Yy,r(a(K)(parseFloat(-s.data.total_refunded))),1),m[4]||(m[4]=t("th",null,null,-1))])])])]),_:1})]),e(zo,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=f=>o.value=f),total:n.value,customer:s.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},Wy=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),Qy={class:"q-gutter-sm"},Jy={class:"col col-lg-6 q-pa-xs",align:"center"},Tl="Retur Penjualan",Gy={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),u=ge(),o=u.props.data,i=C(s.get("preview")||!1),g=C(s.get("tab")||"main-info");we(()=>{it(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.sales-order-return.print",{id:u.props.data.id,size:p}),"_self")};return(p,m)=>{const f=X("i-head"),y=X("authenticated-layout");return d(),w(G,null,[e(f,{title:Tl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Tl))])]),"left-button":l(()=>[t("div",Qy,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>p.$goBack())})])]),"right-button":l(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=_=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=_=>b("a4"))}),i.value?k("",!0):(d(),D(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=_=>a(ee).get(p.route("admin.sales-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Jy,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Ot,{modelValue:g.value,"onUpdate:modelValue":m[4]||(m[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(d(),D(dt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(It,{modelValue:g.value,"onUpdate:modelValue":m[5]||(m[5]=_=>g.value=_),animated:""},{default:l(()=>[e(ut,{name:"main-info",class:"q-pa-none"},{default:l(()=>[e(Fo,{data:a(o)},null,8,["data"])]),_:1}),e(ut,{name:"refund",class:"q-pa-none"},{default:l(()=>[e(Lo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Xy=Object.freeze(Object.defineProperty({__proto__:null,default:Gy},Symbol.toStringTag,{value:"Module"})),Zy={class:"text-weight-medium"},e_={class:"text-caption text-grey-6 elipsis"},t_={class:"column items-end"},a_={class:"text-caption text-grey-6 text-italic"},Ko={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=xe(),u=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),D(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:a(u)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(d(!0),w(G,null,Ne(g.cols,b=>(d(),D(ta,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left wrap-column"},{default:l(()=>[t("div",Zy,r(g.row.product_name),1),t("div",e_,r(g.row.product_barcode),1),g.row.notes?(d(),D($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal_price",props:g,class:"text-right"},{default:l(()=>[t("div",t_,[t("div",null,r(a(K)(g.row.subtotal_price)),1),t("div",a_,r(a(K)(g.row.quantity))+" x Rp. "+r(a(K)(g.row.price)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},l_=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),o_={class:"row items-center no-wrap"},n_={class:"col-auto"},Ho={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,i=u,n=()=>{i("save")},g=Z(()=>o.item.quantity*o.item.price),b=f=>{f.stopPropagation(),f.preventDefault()},p=f=>{o.modelValue&&(f.key==="Enter"?(n(),i("update:modelValue",!1),b(f)):f.key==="Escape"&&(i("update:modelValue",!1),b(f)))};return we(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item}),(f,y)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":y[6]||(y[6]=_=>f.$emit("update:modelValue",_))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",o_,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",n_,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=_=>f.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:c.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=_=>c.item.product_name=_),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=_=>c.item.quantity=_),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.price,"onUpdate:modelValue":y[3]||(y[3]=_=>c.item.price=_),label:"Harga","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":y[4]||(y[4]=_=>g.value=_),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:c.item.notes,"onUpdate:modelValue":y[5]||(y[5]=_=>c.item.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},s_=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),r_={key:0,class:"q-select__selected-item"},Yo={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(c,{expose:s,emit:u}){const o=C(null),i=c,n=u,g=C([]);let b=null;const p=C(i.modelValue);we(()=>{i.initialData&&(p.value=i.initialData)}),Me(p,y=>{n("update:modelValue",y),n("customerSelected",y)}),Me(()=>i.modelValue,y=>{p.value=y}),s({focus:()=>{o.value&&o.value.focus()}});const f=(y,_)=>{if(y.length<i.minLength){_(()=>{g.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Oe.get(`/web-api/customers?q=${y}`).then(V=>{_(()=>{g.value=V.data.data})}).catch(V=>{console.error("Gagal mengambil data pelanggan:",V),_(()=>{g.value=[]})})},500)};return(y,_)=>(d(),D(ce,{class:Ve(c.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=V=>p.value=V),"use-input":"","input-debounce":"0",label:c.label,options:g.value,onFilter:f,clearable:"",error:c.error,behavior:"menu","error-message":c.errorMessage,disable:c.disable,"hide-bottom-space":"",outlined:c.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:l(V=>[e(oe,Da(ao(V.itemProps)),{default:l(()=>[e(z,null,{default:l(()=>[e(he,null,{default:l(()=>[v(r(V.opt.name),1)]),_:2},1024),e(he,{caption:""},{default:l(()=>[e(T,{name:"person",size:"14px"}),v(" "+r(V.opt.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":l(V=>[V.opt?(d(),w("div",r_,r(V.opt.name)+" ("+r(V.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},i_={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(u,o)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[ae(e(E,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Wo=_t(i_,[["__scopeId","data-v-22783525"]]),d_=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),u_={class:"row items-center no-wrap"},m_={class:"col text-subtite text-bold text-grey-8"},c_={class:"col-auto"},Qo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,i=u,n=()=>{i("save")},g=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),g(m)):m.key==="Escape"&&(i("update:modelValue",!1),g(m)))};return we(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,f)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":f[4]||(f[4]=y=>m.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",u_,[t("div",m_," Edit "+r(c.data.code),1),t("div",c_,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=y=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(Kt,{modelValue:c.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=y=>c.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":f[2]||(f[2]=y=>m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:c.data.notes,"onUpdate:modelValue":f[3]||(f[3]=y=>c.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},p_=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),f_={class:"q-gutter-sm"},g_={class:"row items-center"},b_={class:"text-weight-bold"},v_={class:"row q-col-gutter-none full-width"},y_={class:"col-sm-6 col-12 col"},__={class:"row full-width"},k_={key:0,class:"row"},w_={class:"col-sm-6 col-12"},h_={class:"row q-ml-sm items-end"},$_={class:"row col grow"},x_={class:"col-12 q-pa-sm column"},S_={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},V_={key:0,class:"col"},q_={class:"text-caption text-grey-6 q-mt-xs"},C_={key:0,class:"text-caption text-grey-8 q-mt-xs"},T_={class:"text-italic"},P_={key:1,class:"col"},R_={class:"q-pa-sm q-pb-none text-grey-8"},O_={class:"col"},I_={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},U_={class:"text-h4 text-weight-bold"},D_={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},j_={class:"col q-py-sm"},E_={class:"q-py-sm"},A_={__name:"Editor",setup(c){const s=xe(),u=ge(),o=C(!0),i=C(null),n=C(null),g=C(null),b=C(!1),p=C(null),m=C(null),{isFullscreen:f,toggleFullscreen:y}=ka(m),_="Retur #"+u.props.data.code,V=C(u.props.data.customer),q=C(""),x=C(!1),R=C(!1),H=C(!1),O=C(!1),U=C(null),I=Ie({id:u.props.data.id,code:u.props.data.code,customer_id:u.props.data.customer_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),F=Z(()=>I.items.reduce((me,L)=>me+L.price*L.quantity,0)),N=()=>{var me;y(),f.value||(me=p==null?void 0:p.value)==null||me.hideDrawer()},h=me=>isNaN(me)||me<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,j=me=>isNaN(me)||me<0?(gt("Harga tidak valid.","top"),!1):!0,P=me=>!me||me.length==0?(gt("Barcode tidak valid.","top"),!1):!0,$=me=>{var L;(L=q.value)!=null&&L.endsWith("*")?q.value+=me.name:q.value=me.name},A=async()=>{const me=q.value.trim();if(me.length===0){R.value=!0;return}const L=me.split("*");let ye=1,se="",Y=null;if(L.length===1)se=L[0];else if(L.length<=3)ye=parseInt(L[0]),se=L[1],L.length===3&&(Y=parseFloat(L[2]));else{gt("Input tidak valid.","top");return}if(se.length===0){R.value=!0;return}!P(se)&&!h(ye)&&!j(Y)||(x.value=!0,await Oe.post(route("admin.sales-order-return.add-item"),{order_id:I.id,product_code:se,qty:ye,price:Y,merge:o.value}).then(_e=>{const de=_e.data.data.item;let Q=-1;_e.data.data.mergeItem&&(Q=I.items.findIndex(qe=>qe.id===de.id)),Q===-1?I.items.push(de):I.items[Q]=de,q.value="",Y!==null&&Y!==parseFloat(de.price)&&gt("Harga tidak dapat diubah!","top")}).catch(_e=>{var de,Q;pt((Q=(de=_e.response)==null?void 0:de.data)==null?void 0:Q.message,"top"),console.error("Gagal mengambil data produk:",_e)}),x.value=!1,it(()=>{var _e;(_e=i.value)==null||_e.focus()}))},B=me=>{U.value=Object.create(me),H.value=!0},S=me=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${me.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{x.value=!0,Oe.post(route("admin.sales-order-return.remove-item"),{id:me.id}).then(()=>{const L=I.items.findIndex(ye=>ye.id===me.id);L!==-1&&(I.items.splice(L,1)[0],ft("Item telah dihapus","top"))}).catch(L=>{var ye,se;pt(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{x.value=!1})})},M=()=>{x.value=!0;const me=n.value.getCurrentItem(),L={id:me.id,qty:me.quantity,price:me.price};me.notes&&(L.notes=me.notes),Oe.post(route("admin.sales-order-return.update-item"),L).then(ye=>{const se=ye.data.data,Y=I.items.findIndex(_e=>_e.id===se.id);Y!==-1&&(I.items[Y]=se,ft("Item telah diperbarui","top")),H.value=!1}).catch(ye=>{var se,Y;pt(((Y=(se=ye==null?void 0:ye.response)==null?void 0:se.data)==null?void 0:Y.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ye)}).finally(()=>{x.value=!1})};we(()=>{const me=L=>{b.value||H.value||R.value||O.value||(L.key==="F1"?(L.preventDefault(),b.value=!0):L.key==="F2"?(L.preventDefault(),g.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),ue()):L.key==="F11"?(L.preventDefault(),N()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault())};document.addEventListener("keydown",me),wt(()=>{document.removeEventListener("keydown",me)}),it(()=>{var L;(L=p==null?void 0:p.value)==null||L.hideDrawer()})});const te=async()=>{x.value=!0;const me={id:I.id,customer_id:I.customer_id??null,datetime:ea(I.datetime),notes:I.notes};await Oe.post(route("admin.sales-order-return.update"),me).then(L=>{const ye=L.data.data.id;I.customer_id=ye.customer_id}).catch(L=>{var ye,se;pt(((se=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:se.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{x.value=!1})},ue=me=>{if(I.items.length===0){ft("Item masih kosong","top");return}xt.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{x.value=!0,Oe.post(route("admin.sales-order-return.close",{id:I.id})).then(L=>{ft("Transaksi selesai"),ee.get(route("admin.sales-order-return.detail",{id:I.id}))}).catch(L=>{var ye,se;pt((se=(ye=L.response)==null?void 0:ye.data)==null?void 0:se.message),console.error(L)}).finally(()=>{x.value=!1})})},re=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order-return.cancel",{id:I.id}),{id:I.id}).then(()=>{ft("Transaksi telah dibatalkan."),ee.visit(route("admin.sales-order-return.detail",{id:I.id}))}).catch(me=>{var ye,se;const L=((se=(ye=me.response)==null?void 0:ye.data)==null?void 0:se.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(me)})})},Re=()=>{window.open(route("admin.sales-order-return.detail",{id:I.id})+"?preview=1","_blank")},Ge=Z(()=>V.value?V.value.wallet_balance>=F.value:!0);return(me,L)=>{const ye=X("i-head"),se=X("authenticated-layout");return d(),w(G,null,[e(ye,{title:_}),e(se,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:l(()=>[v(r(_))]),"left-button":l(()=>[t("div",f_,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=Y=>a(ee).get(me.route("admin.sales-order-return.index")))})])]),"right-button":l(()=>[t("div",g_,[a(s).screen.gt.sm?(d(),w(G,{key:0},[t("div",b_,r(a(u).props.auth.user.username),1),L[20]||(L[20]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(_a)])],64)):k("",!0),k("",!0)])]),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",v_,[t("div",y_,[t("div",__,[e(Yo,{ref_key:"customerAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:V.value,"onUpdate:modelValue":L[2]||(L[2]=Y=>V.value=Y),label:"Pelanggan",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),V.value?(d(),w("div",k_,[t("div",{class:Ve(["q-mt-xs q-ml-sm text-bold",Ge.value?"text-green":"text-red"])}," Wallet: "+r(V.value?"Rp. "+a(K)(V.value?V.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:Ve(["q-mt-xs q-ml-sm text-bold",V.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(V.value?"Rp. "+a(K)(V.value?V.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",w_,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:q.value,"onUpdate:modelValue":L[5]||(L[5]=Y=>q.value=Y),onKeyup:L[6]||(L[6]=Qt(J(Y=>A(),["prevent"]),["enter"])),loading:x.value,disable:x.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(T,{name:"search",onClick:L[3]||(L[3]=Y=>R.value=!0),class:"cursor-pointer"})]),append:l(()=>{var Y;return[((Y=q.value)==null?void 0:Y.length)>0?(d(),D(T,{key:0,name:"send",onClick:L[4]||(L[4]=_e=>A()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",h_,[e(Ct,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[7]||(L[7]=Y=>o.value=Y),label:"Gabungkan item",disable:x.value},null,8,["modelValue","disable"])])])]),t("div",$_,[t("div",x_,[e(Ko,{items:I.items,onUpdateQuantity:L[8]||(L[8]=({id:Y,value:_e})=>me.updateQuantity(Y,_e)),onRemoveItem:S,onEditItem:B,"is-processing":x.value},null,8,["items","is-processing"])])]),t("div",S_,[a(s).screen.gt.sm?(d(),w("div",V_,[t("div",q_,r(I.items.length)+" item(s) ",1),I.notes?(d(),w("div",C_,[L[21]||(L[21]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",T_,[e($e,{text:I.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(d(),w("div",P_,[t("div",R_,[t("div",null,"Return #: "+r(I.code),1),t("div",null,"Order #: "+r(a(u).props.data.sales_order.code),1),t("div",null,r(a(ve)(I.datetime)),1)])])):k("",!0),t("div",O_,[t("div",I_,[L[23]||(L[23]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",U_,[L[22]||(L[22]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(K)(F.value)),1)])])])]),t("div",D_,[t("div",j_,[e(E,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:L[9]||(L[9]=Y=>ue()),disable:!me.$can("admin.sales-order-return.close")||x.value||I.items.length===0||I.status!=="draft",loading:x.value},null,8,["disable","loading"])]),t("div",E_,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[13]||(L[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[ae((d(),D(oe,{clickable:"",onClick:L[10]||(L[10]=J(Y=>O.value=!0,["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>L[24]||(L[24]=[v("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),ae((d(),D(oe,{clickable:"",onClick:L[11]||(L[11]=J(Y=>Re(),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"preview"})]),_:1}),e(z,null,{default:l(()=>L[25]||(L[25]=[v("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),ae((d(),D(oe,{clickable:"",onClick:L[12]||(L[12]=J(Y=>re(),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:l(()=>L[26]||(L[26]=[v(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Ho,{ref_key:"itemEditorRef",ref:n,modelValue:H.value,"onUpdate:modelValue":L[14]||(L[14]=Y=>H.value=Y),item:U.value,onSave:L[15]||(L[15]=Y=>M()),"is-processing":x.value},null,8,["modelValue","item","is-processing"]),e(wa,{modelValue:R.value,"onUpdate:modelValue":L[16]||(L[16]=Y=>R.value=Y),onProductSelected:$},null,8,["modelValue"]),e(Qo,{modelValue:O.value,"onUpdate:modelValue":L[17]||(L[17]=Y=>O.value=Y),data:I,onSave:L[18]||(L[18]=Y=>te()),"is-processing":x.value},null,8,["modelValue","data","is-processing"]),e(Wo,{modelValue:b.value,"onUpdate:modelValue":L[19]||(L[19]=Y=>b.value=Y)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},M_=Object.freeze(Object.defineProperty({__proto__:null,default:A_},Symbol.toStringTag,{value:"Module"})),N_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},B_={class:"q-pa-xs"},F_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},z_={key:0},L_={key:1},K_={key:2},H_={key:3},Y_={key:0},W_={key:1},Q_={key:0},J_={key:0},G_={key:1},X_={class:"flex justify-end"},Pl="Retur Penjualan",Z_={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=zt(),m=Lt(),f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Pt(p-2,p-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Rt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_RETURN_STATUSES)],V=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES)],q=Ie({search:"",year:p,month:m,status:"all",refund_status:"all",...Le()}),x=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),R=[{name:"code",label:"Info Order",field:"code",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];we(()=>{N()});const H=P=>{if(P.status=="draft"){O(P);return}U(P)},O=P=>{ee.get(route("admin.sales-order-return.edit",P.id))},U=P=>{ee.get(route("admin.sales-order-return.detail",P.id))},I=P=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order-return.cancel",{id:P.id}),{id:P.id}).then($=>{const A=$.data.data,B=o.value.findIndex(S=>S.id===A.id);if(B===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[B].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var B,S;const A=((S=(B=$.response)==null?void 0:B.data)==null?void 0:S.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:A,color:"warning",position:"bottom"}),console.error($)})})},F=P=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.sales-order-return.delete",P.id),fetchItemsCallback:N,loading:i}),N=(P=null)=>{Ke({pagination:x,filter:q,props:P,rows:o,url:route("admin.sales-order-return.data"),loading:i,tableRef:n})},h=()=>{N()},j=Z(()=>s.screen.gt.sm?R:R.filter(P=>P.name==="code"||P.name==="action"));return Me(()=>q.year,P=>{P===null&&(q.month=null)}),(P,$)=>{const A=X("i-head"),B=X("authenticated-layout");return d(),w(G,null,[e(A,{title:Pl}),e(B,null,Be({title:l(()=>[v(r(Pl))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=S=>u.value=!u.value)},null,8,["icon"]),P.$can("admin.sales-order-return.edit")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=S=>a(ee).get(P.route("admin.sales-order-return.add")))})):k("",!0)]),default:l(()=>[t("div",B_,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":$[10]||($[10]=S=>x.value=S),filter:q.search,loading:i.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:a(b)}),onRequest:N,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:S,message:M,filter:te})=>[t("div",F_,[t("span",null,r(M)+" "+r(te?" with term "+te:""),1)])]),body:l(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:J(M=>H(S.row),["prevent"])},{default:l(()=>[e(W,{key:"code",props:S,class:"wrap-column"},{default:l(()=>{var M,te,ue;return[t("div",null,[e(T,{name:"tag"}),v(" "+r(S.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(r(a(ve)(S.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[S.row.cashier?(d(),w("div",z_,[e(T,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((M=S.row.cashier)==null?void 0:M.username),1)])):k("",!0),S.row.cashier_session?(d(),w("div",L_,[e(T,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((ue=(te=S.row.cashier_session)==null?void 0:te.cashier_terminal)==null?void 0:ue.name),1)])):k("",!0),S.row.customer?(d(),w("div",K_,[e(T,{name:"person",class:"inline-icon"}),e(va,{href:P.route("admin.customer.detail",{id:S.row.customer.id}),onClick:$[7]||($[7]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(S.row.customer.code)+" - "+r(S.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(a(K)(S.row.grand_total)),1),S.row.notes?(d(),w("div",H_,[e(T,{name:"notes"}),v(" "+r(S.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Ft,{status:S.row.status,statuses:P.$CONSTANTS.SALES_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Ft,{status:S.row.refund_status,statuses:P.$CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(W,{key:"cashier_id",props:S},{default:l(()=>{var M,te,ue;return[S.row.cashier?(d(),w("div",Y_,[e(T,{name:"person",class:"inline-icon"}),v(" "+r((M=S.row.cashier)==null?void 0:M.username),1)])):k("",!0),S.row.cashier_session?(d(),w("div",W_,[e(T,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((ue=(te=S.row.cashier_session)==null?void 0:te.cashier_terminal)==null?void 0:ue.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(W,{key:"customer_id",props:S},{default:l(()=>[S.row.customer?(d(),w("div",Q_,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(S.row.customer_code)+" - "+r(S.row.customer_name),1)]),S.row.customer_phone?(d(),w("div",J_,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(S.row.customer_phone),1)])):k("",!0),S.row.customer_address?(d(),w("div",G_,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(S.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total",props:S},{default:l(()=>[v(r(a(K)(S.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:S},{default:l(()=>[e($e,{text:S.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:S,onClick:$[9]||($[9]=J(()=>{},["stop"]))},{default:l(()=>[t("div",X_,[P.$can("admin.sales-order-return.detail")||P.$can("admin.sales-order-return.edit")||P.$can("admin.sales-order-return.cancel")||P.$can("admin.sales-order-return.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[S.row.status!="draft"&&P.$can("admin.sales-order-return.detail")?ae((d(),D(oe,{key:0,onClick:J(M=>U(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"visibility"})]),_:1}),e(z,null,{default:l(()=>$[11]||($[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.row.status=="draft"&&P.$can("admin.sales-order-return.edit")?ae((d(),D(oe,{key:1,onClick:J(M=>O(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>$[12]||($[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),S.row.status=="draft"&&P.$can("admin.sales-order-return.cancel")?ae((d(),D(oe,{key:2,onClick:J(M=>I(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"cancel"})]),_:1}),e(z,null,{default:l(()=>$[13]||($[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),P.$can("admin.sales-order-return.delete")?ae((d(),D(oe,{key:3,onClick:J(M=>F(S.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>$[14]||($[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",N_,[e(ce,{modelValue:q.year,"onUpdate:modelValue":[$[2]||($[2]=S=>q.year=S),h],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),q.year!="all"?(d(),D(ce,{key:0,modelValue:q.month,"onUpdate:modelValue":[$[3]||($[3]=S=>q.month=S),h],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:q.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:q.status,"onUpdate:modelValue":[$[4]||($[4]=S=>q.status=S),h],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:q.refund_status,"onUpdate:modelValue":[$[5]||($[5]=S=>q.refund_status=S),h],options:V,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:q.search,"onUpdate:modelValue":$[6]||($[6]=S=>q.search=S),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ek=Object.freeze(Object.defineProperty({__proto__:null,default:Z_},Symbol.toStringTag,{value:"Module"})),tk={key:0,class:"text-center q-mb-md text-grey-8"},ak={class:"text-subtitle2 text-weight-medium"},lk={class:"text-h5 text-center text-primary q-pb-md"},ok={class:"q-mb-md flex flex-center"},nk={key:1},sk={class:"col-6"},rk={class:"col-6"},ik={class:"row"},dk={class:"text-center q-mt-md"},uk={key:0,class:"text-h6 text-negative text-weight-bold"},mk={key:1,class:"text-h6 text-green-8 text-weight-bold"},ck={key:2,class:"text-h6 text-positive text-weight-bold"},pk={key:2},fk={class:"text-h6 text-negative text-center"},gk={key:3},bk={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,i=ge(),n=C(!1),g=C("cash"),b=C(new Date),p=C([]),m=C([]),f=Ie([{id:"cash",amount:0}]),y=i.props.settings.default_payment_mode,_=Z(()=>[{label:"Laci Kasir",value:"cash"},...u.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map($=>({label:$.name,value:$.id}))]),V=Z(()=>f.reduce(($,A)=>$+(A.amount||0),0)),q=Z(()=>u.total-V.value),x=Z(()=>{if(!u.customer)return!0;const $=f.find(B=>B.id==="wallet");return($?$.amount:0)<=u.customer.wallet_balance}),R=new Date,H=rt.addToDate(new Date,{days:30}),O=Z(()=>[$=>!!$||"Tanggal jatuh tempo harus diisi",$=>rt.isBetweenDates($,R,H,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),U=Z(()=>{if(g.value==="debt")return!!u.customer&&O.value.every(M=>M(b.value)===!0);const $=x.value,A=f.some(M=>(M.amount||0)>0),B=f.every(M=>(M.amount||0)>=0),S=q.value<=0;return $&&A&&B&&S}),I=()=>{if(f.length<3){const $=f.length;f.push({id:"cash",amount:0}),it(()=>{const A=p.value[$];A&&(A.focus(),A.showPopup())})}},F=$=>{if(f.length>1){const A=f.findIndex(B=>B.id===$);A!==-1&&f.splice(A,1)}},N=($,A="cash")=>{g.value=$,b.value=new Date,f.splice(0,f.length),$==="cash"&&(f.splice(0,f.length,{id:A,amount:u.total}),it(()=>{m.value.length>0&&m.value[0]&&(m.value[0].focus(),m.value[0].select())}))},h=()=>{if(!U.value)return;n.value=!0;let $={total:u.total,is_debt:g.value==="debt"};if(g.value==="debt")$.due_date=rt.formatDate(b.value,"YYYY-MM-DD"),$.payments=[];else{const A=V.value,B=A>u.total?A-u.total:0,S=q.value>0?q.value:0;$.payments=f,$.remaining_debt=S,$.change=B}o("accepted",$),n.value=!1},j=()=>{N("cash",u.customer?y:"cash")};we(()=>{const $=A=>{u.modelValue&&A.ctrlKey&&A.key==="Enter"&&(A.preventDefault(),h())};document.addEventListener("keydown",$),wt(()=>{document.removeEventListener("keydown",$)})});const P=($,A)=>{it(()=>{m.value[A]&&(m.value[A].focus(),m.value[A].select())})};return($,A)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":A[3]||(A[3]=B=>$.$emit("update:modelValue",B)),onBeforeShow:j},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>A[4]||(A[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[c.customer?(d(),w("div",tk,[t("div",ak,[v(" Username: "+r(c.customer.code)+" ",1),A[5]||(A[5]=t("br",null,null,-1)),v(" Nama: "+r(c.customer.name),1),A[6]||(A[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(a(K)(c.customer.wallet_balance)),1)])])):k("",!0),t("div",lk," Total: Rp. "+r(a(K)(c.total)),1),t("div",ok,[e(a(Wt),{modelValue:g.value,"onUpdate:modelValue":[A[0]||(A[0]=B=>g.value=B),N],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="cash"?(d(),w("div",nk,[(d(!0),w(G,null,Ne(f,(B,S)=>(d(),w("div",{key:S,class:"row q-col-gutter-sm q-mb-sm"},[t("div",sk,[e(a(ce),{modelValue:B.id,"onUpdate:modelValue":[M=>B.id=M,M=>P(M,S)],options:_.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:M=>p.value[S]=M},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",rk,[e(Ee,{modelValue:B.amount,"onUpdate:modelValue":M=>B.amount=M,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:B.id==="wallet"&&!x.value,"error-message":B.id==="wallet"&&!x.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:M=>m.value[S]=M},Be({_:2},[f.length>1?{name:"append",fn:l(()=>[e(T,{size:"xs",name:"close",class:"cursor-pointer",onClick:M=>F(B.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",ik,[e(E,{disable:!(f.length<3&&q.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:I,size:"sm"},null,8,["disable"])]),t("div",dk,[q.value>0?(d(),w("div",uk," Sisa Tagihan: Rp. "+r(a(K)(q.value)),1)):q.value<0?(d(),w("div",mk," Kembalian: Rp. "+r(a(K)(Math.abs(q.value))),1)):(d(),w("div",ck," Tagihan Terbayar "))])])):g.value==="debt"&&c.customer?(d(),w("div",pk,[e(ua,{outlined:"",modelValue:b.value,"onUpdate:modelValue":A[1]||(A[1]=B=>b.value=B),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(R),"max-date":a(H),rules:O.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",fk," Total Utang: Rp. "+r(a(K)(c.total)),1)])):g.value==="debt"&&!c.customer?(d(),w("div",gk,A[7]||(A[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:A[2]||(A[2]=B=>$.$emit("update:modelValue",!1)),class:"col"}),e(E,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:h,disable:n.value||!U.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},vk=Object.freeze(Object.defineProperty({__proto__:null,default:bk},Symbol.toStringTag,{value:"Module"})),yk={key:0},_k={style:{float:"right"}},kk={key:1},wk={style:{float:"right"}},hk={key:2},$k={style:{float:"right"}},xk={key:3},Sk={style:{float:"right"}},Vk={style:{float:"right"}},qk={class:"q-gutter-sm"},Ck={class:"q-my-md"},Tk={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const u=C(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(d(),w("tr",yk,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",_k,r(a(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",kk,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",wk,r(a(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",hk,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",$k,r(a(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",xk,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Sk,r(a(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Vk,r(a(K)(c.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",qk,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Ck,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Pk=_t(Tk,[["__scopeId","data-v-a3bb29e0"]]),Rk=Object.freeze(Object.defineProperty({__proto__:null,default:Pk},Symbol.toStringTag,{value:"Module"})),Ok={class:"column"},Ik={class:"bg-grey-2 q-pa-xs"},Uk={class:"text-subtitle1 text-bold text-grey-10"},Dk={class:"text-caption text-grey-8"},jk={class:"col-12 col-sm-6"},Ek={class:"full-width"},Ak={key:1},Mk={key:0},Nk={key:1},Bk={class:"col-12 col-sm-6",align:"left"},Fk={class:"full-width"};const zk={key:1},Lk={class:"full-width",style:{"border-collapse":"collapse"}},Kk={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Hk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Yk={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Wk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Qk={key:0},Jk={class:"col-12 col-sm-6"},Gk={class:"text-body2 text-grey-7 text-italic"},Xk={class:"col-12 col-sm-6"},Zk={class:"row justify-end q-gutter-y-xs"},ew={class:"col-12 row justify-between"},tw={class:"text-subtitle2 text-bold"},aw={class:"row justify-end q-gutter-y-xs"},lw={class:"col-12 row justify-between"},ow={class:"text-subtitle2 text-bold"},nw={class:"row justify-end q-gutter-y-xs"},sw={class:"col-12 row justify-between"},rw={class:"text-subtitle2 text-bold"},iw={key:1,class:"row justify-end q-gutter-y-xs"},dw={class:"col-12 row justify-between"},uw={class:"text-subtitle2 text-bold"},mw={key:2,class:"row justify-end q-gutter-y-xs"},cw={class:"col-12 row justify-between"},pw={class:"text-subtitle2 text-bold"},Jo={__name:"InvoiceTab",props:{data:Object},setup(c){const s=c;return(u,o)=>{const i=X("i-link");return d(),w("div",Ok,[e(le,{class:"q-pa-none"},{default:l(()=>[t("div",Ik,[t("div",Uk," INVOICE #"+r(s.data.code),1),t("div",Dk,[v(" Kasir: "+r(s.data.cashier.username)+" - "+r(s.data.cashier.name)+" | "+r(a(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),w(G,{key:0},[v(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Ae),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:l(()=>[t("div",jk,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",Ek,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),D(i,{key:0,href:u.route("admin.customer.detail",{id:s.data.customer_id})},{default:l(()=>[e(T,{class:"inline-icon",name:"person"}),v(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(d(),w("div",Ak,[e(T,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(d(),w("tr",Mk,[t("td",null,[e(T,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(d(),w("tr",Nk,[t("td",null,[e(T,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",Bk,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",Fk,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.$CONSTANTS.SALES_ORDER_STATUSES[s.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)]),k("",!0),s.data.due_date?(d(),w("tr",zk,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(na)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("table",Lk,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(G,null,Ne(s.data.details,n=>(d(),w("tr",{key:n.id},[t("td",Kk,[e(i,{href:u.route("admin.product.detail",n.product_id)},{default:l(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",Hk,r(a(K)(n.price)),1),t("td",Yk,r(n.quantity),1),t("td",Wk,r(a(K)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),w("tr",Qk,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Ae),e(le,{class:"row",align:"left"},{default:l(()=>[t("div",Jk,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Gk,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Xk,[s.data.change>0?(d(),w(G,{key:0},[t("div",Zk,[t("div",ew,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Jumlah Bayar",-1)),t("div",tw,r(a(K)(parseInt(s.data.total_paid)+parseInt(s.data.change))),1)])]),t("div",aw,[t("div",lw,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Kembalian",-1)),t("div",ow,r(a(K)(s.data.change)),1)])])],64)):k("",!0),t("div",nw,[t("div",sw,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",rw,r(a(K)(s.data.grand_total)),1)])]),s.data.total_return!=0?(d(),w("div",iw,[t("div",dw,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",uw,r(a(K)(s.data.total_return)),1)])])):k("",!0),s.data.balance!=0?(d(),w("div",mw,[t("div",cw,[o[20]||(o[20]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",pw,r(a($t)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},fw=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),gw={key:0,class:"text-center q-mb-md text-grey-8"},bw={class:"text-subtitle2 text-weight-medium"},vw={class:"text-h5 text-center text-primary q-pb-md"},yw={class:"text-center q-mt-md"},_w={key:0,class:"text-h6 text-negative text-weight-bold"},kw={key:1,class:"text-h6 text-green-8 text-weight-bold"},ww={key:2,class:"text-h6 text-positive text-weight-bold"},Go={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,i=ge(),n=C(!1),g=C({method:"cash",amount:u.total,notes:null}),b=i.props.data.customer,p=Z(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...b?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(q=>({label:q.name,value:q.id}))]),m=Z(()=>u.total-(g.value.amount||0)),f=Z(()=>{const q=g.value.amount||0;return u.total,q<=0?"Jumlah pembayaran harus lebih dari 0.":g.value.method==="wallet"&&b&&q>b.wallet_balance?"Saldo wallet tidak mencukupi.":null}),y=Z(()=>f.value===null),_=()=>{if(!y.value)return;n.value=!0;const q={total_paid:g.value.amount,payments:[{id:g.value.method,amount:g.value.amount}],notes:g.value.notes,change:Math.max(0,(g.value.amount||0)-u.total),remaining_debt:Math.max(0,u.total-(g.value.amount||0))};o("accepted",q),n.value=!1},V=()=>{g.value.amount=u.total,g.value.method="cash",g.value.notes=null};return(q,x)=>{const R=X("my-link");return d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":x[4]||(x[4]=H=>q.$emit("update:modelValue",H)),onBeforeShow:V},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>x[5]||(x[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[a(b)?(d(),w("div",gw,[t("div",bw,[t("div",null,[e(R,{href:q.route("admin.customer.detail",{id:a(b).id}),target:"_blank"},{default:l(()=>[v(r(a(b).code)+" - "+r(a(b).name),1)]),_:1},8,["href"])]),t("div",{class:Ve(a(b).wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(a(K)(a(b).wallet_balance)),3),t("div",{class:Ve(a(b).balance>0?"text-green":"text-red")},r(a(b).balance>0?"Piutang":"Utang")+": "+r(a(K)(a(b).balance)),3)])])):k("",!0),t("div",vw," Total: Rp. "+r(a(K)(c.total)),1),e(a(ce),{modelValue:g.value.method,"onUpdate:modelValue":x[0]||(x[0]=H=>g.value.method=H),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:g.value.amount,"onUpdate:modelValue":x[1]||(x[1]=H=>g.value.amount=H),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":f.value},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:g.value.notes,"onUpdate:modelValue":x[2]||(x[2]=H=>g.value.notes=H),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",yw,[m.value>0?(d(),w("div",_w," Sisa Tagihan: Rp. "+r(a(K)(m.value)),1)):m.value<0?(d(),w("div",kw," Kembalian: Rp. "+r(a(K)(Math.abs(m.value))),1)):(d(),w("div",ww," Tagihan Terbayar "))])]),_:1}),e(at,{align:"center",class:"q-mb-sm"},{default:l(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:x[3]||(x[3]=H=>q.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:_,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},hw=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"})),$w={class:"column"},xw={class:"row"},Sw={class:"full-width",style:{"border-collapse":"collapse"}},Vw={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},qw={class:"row items-center q-gutter-x-sm"},Cw={class:"text-weight-bold"},Tw={class:"row items-center q-gutter-x-sm q-mt-xs"},Pw={class:"text-caption text-grey-6"},Rw={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Ow={class:"q-mt-xs"},Iw={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Uw={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Dw={key:0},jw={class:"text-right q-pa-sm"},Xo={__name:"PaymentTab",props:{data:Object},setup(c){const s=c,u=xe(),o=C(!1),i=()=>{o.value=!0},n=async b=>{const p={order_id:s.data.id,payments:b.payments,notes:b.notes};u.loading.show({message:"Memproses pembayaran..."});try{const m=await Oe.post(route("admin.sales-order.add-payment"),p);u.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(m){let f="Gagal memproses pembayaran.";m.response&&m.response.data&&m.response.data.message?f=m.response.data.message:m.message&&(f=m.message),u.notify({message:f,color:"negative",icon:"error"})}finally{u.loading.hide()}},g=b=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.sales-order.delete-payment",{id:b.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(p){let m="Gagal menghapus pembayaran.";p.response&&p.response.data&&p.response.data.message?m=p.response.data.message:p.message&&(m=p.message),u.notify({message:m,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(b,p)=>{const m=X("my-link");return d(),w(G,null,[t("div",$w,[e(Ae),e(le,{class:"q-pa-sm"},{default:l(()=>[t("div",xw,[b.$can("admin.sales-order.add-payment")?(d(),D(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:p[0]||(p[0]=J(f=>i(),["stop"]))})):k("",!0)]),t("table",Sw,[p[5]||(p[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(G,null,Ne(s.data.payments,f=>(d(),w("tr",{key:f.id},[t("td",Vw,[t("div",qw,[e(T,{name:"tag",size:"xs",color:"grey-7"}),t("span",Cw,r(f.code),1)]),t("div",Tw,[e(T,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Pw,r(a(ve)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(d(),w("div",Rw,[e(T,{name:"wallet",size:"xs",color:"grey-7"}),e(m,{href:b.route("admin.finance-account.detail",{id:f.account.id})},{default:l(()=>[v(r(f.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",Ow,[e(bt,{label:b.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(bt,{label:f.amount>0?"Pembayaran":"Refund",color:f.amount>0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",Iw,r(a(K)(f.amount)),1),t("td",Uw,[b.$can("admin.sales-order.delete-payment")&&s.data.customer_id&&f.amount>0?(d(),D(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>g(f)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",Dw,p[2]||(p[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[p[3]||(p[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",jw,r(a(K)(s.data.balance)),1),p[4]||(p[4]=t("td",null,null,-1))])])])]),_:1})]),e(Go,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=f=>o.value=f),total:Math.abs(s.data.balance),customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},Ew=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),Aw={class:"q-gutter-sm"},Mw={class:"col col-lg-6 q-pa-xs",align:"center"},Rl="Rincian Penjualan",Nw={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),u=ge(),o=u.props.data,i=C(s.get("preview")||!1),g=C(s.get("tab")||"invoice");we(()=>{it(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.sales-order.print",{id:u.props.data.id,size:p}),"_self")};return(p,m)=>{const f=X("i-head"),y=X("authenticated-layout");return d(),w(G,null,[e(f,{title:Rl}),e(y,{"show-drawer-button":!0},{title:l(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Rl))])]),"left-button":l(()=>[t("div",Aw,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=_=>p.$goBack())})])]),"right-button":l(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=_=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=_=>b("a4"))}),i.value?k("",!0):(d(),D(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=_=>a(ee).get(p.route("admin.sales-order.add")))}))]),default:l(()=>[e(Te,{class:"row justify-center print-visible"},{default:l(()=>[t("div",Mw,[e(fe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:l(()=>[e(Ot,{modelValue:g.value,"onUpdate:modelValue":m[4]||(m[4]=_=>g.value=_),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(d(),D(dt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Ae),e(It,{modelValue:g.value,"onUpdate:modelValue":m[5]||(m[5]=_=>g.value=_),animated:""},{default:l(()=>[e(ut,{name:"invoice",class:"q-pa-none"},{default:l(()=>[e(Jo,{data:a(o)},null,8,["data"])]),_:1}),e(ut,{name:"payment",class:"q-pa-none"},{default:l(()=>[e(Xo,{data:a(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Bw=Object.freeze(Object.defineProperty({__proto__:null,default:Nw},Symbol.toStringTag,{value:"Module"})),Fw={class:"text-weight-medium"},zw={class:"text-caption text-grey-6 elipsis"},Lw={class:"column items-end"},Kw={class:"text-caption text-grey-6 text-italic"},Zo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=xe(),u=et(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),D(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:a(u)})},{header:l(g=>[e(Pe,{props:g,class:"bg-grey-4"},{default:l(()=>[(d(!0),w(G,null,Ne(g.cols,b=>(d(),D(ta,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:l(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(g=>[e(Pe,{props:g,class:"hover-highlight"},{default:l(()=>[e(W,{key:"name",props:g,class:"text-left wrap-column"},{default:l(()=>[t("div",Fw,r(g.row.product_name),1),t("div",zw,r(g.row.product_barcode),1),g.row.notes?(d(),D($e,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"subtotal_price",props:g,class:"text-right"},{default:l(()=>[t("div",Lw,[t("div",null,r(a(K)(g.row.subtotal_price)),1),t("div",Kw,r(a(K)(g.row.quantity))+" "+r(g.row.product_uom)+" x Rp. "+r(a(K)(g.row.price)),1)])]),_:2},1032,["props"]),e(W,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:l(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Hw=Object.freeze(Object.defineProperty({__proto__:null,default:Zo},Symbol.toStringTag,{value:"Module"})),Yw={key:0,class:"text-center q-mb-md text-grey-8"},Ww={class:"text-subtitle2 text-weight-medium"},Qw={class:"text-h5 text-center text-primary q-pb-md"},Jw={class:"q-mb-md flex flex-center"},Gw={key:1},Xw={class:"col-6"},Zw={class:"col-6"},e0={class:"row"},t0={class:"text-center q-mt-md"},a0={key:0,class:"text-h6 text-negative text-weight-bold"},l0={key:1,class:"text-h6 text-green-8 text-weight-bold"},o0={key:2,class:"text-h6 text-positive text-weight-bold"},n0={key:2},s0={class:"text-h6 text-negative text-center"},r0={key:3},en={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const u=c,o=s,i=ge(),n=C(!1),g=C("cash"),b=C(new Date),p=C(i.props.settings.after_payment_action??"print"),m=C([]),f=C([]),y=Ie([{id:"cash",amount:0}]),_=i.props.settings.default_payment_mode,V=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],q=Z(()=>[{label:"Laci Kasir",value:"cash"},...u.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(B=>({label:B.name,value:B.id}))]),x=Z(()=>y.reduce((B,S)=>B+(S.amount||0),0)),R=Z(()=>u.total-x.value),H=Z(()=>{if(!u.customer)return!0;const B=y.find(M=>M.id==="wallet");return(B?B.amount:0)<=u.customer.wallet_balance}),O=new Date,U=rt.addToDate(new Date,{days:30}),I=Z(()=>[B=>!!B||"Tanggal jatuh tempo harus diisi",B=>rt.isBetweenDates(B,O,U,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),F=Z(()=>{if(g.value==="debt")return!!u.customer&&I.value.every(ue=>ue(b.value)===!0);const B=H.value,S=y.some(ue=>(ue.amount||0)>0),M=y.every(ue=>(ue.amount||0)>=0),te=R.value<=0;return B&&S&&M&&te}),N=()=>{if(y.length<3){const B=y.length;y.push({id:"cash",amount:0}),it(()=>{const S=m.value[B];S&&(S.focus(),S.showPopup())})}},h=B=>{if(y.length>1){const S=y.findIndex(M=>M.id===B);S!==-1&&y.splice(S,1)}},j=(B,S="cash")=>{g.value=B,b.value=new Date,y.splice(0,y.length),B==="cash"&&(y.splice(0,y.length,{id:S,amount:u.total}),it(()=>{f.value.length>0&&f.value[0]&&(f.value[0].focus(),f.value[0].select())}))},P=()=>{if(!F.value)return;n.value=!0;let B={total:u.total,is_debt:g.value==="debt",after_payment_action:p.value};if(g.value==="debt")B.due_date=rt.formatDate(b.value,"YYYY-MM-DD"),B.payments=[];else{const S=x.value,M=S>u.total?S-u.total:0,te=R.value>0?R.value:0;B.payments=y,B.remaining_debt=te,B.change=M}o("accepted",B),n.value=!1},$=()=>{j("cash",u.customer?_:"cash")};we(()=>{const B=S=>{u.modelValue&&S.ctrlKey&&S.key==="Enter"&&(S.preventDefault(),P())};document.addEventListener("keydown",B),wt(()=>{document.removeEventListener("keydown",B)})});const A=(B,S)=>{it(()=>{f.value[S]&&(f.value[S].focus(),f.value[S].select())})};return(B,S)=>{const M=X("my-link");return d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":S[4]||(S[4]=te=>B.$emit("update:modelValue",te)),onBeforeShow:$},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,null,{default:l(()=>S[5]||(S[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[c.customer?(d(),w("div",Yw,[t("div",Ww,[t("div",null,[e(M,{href:B.route("admin.customer.detail",{id:c.customer.id}),target:"_blank"},{default:l(()=>[v(r(c.customer.code)+" - "+r(c.customer.name),1)]),_:1},8,["href"])]),t("div",{class:Ve(c.customer.wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(a(K)(c.customer.wallet_balance)),3),t("div",{class:Ve(c.customer.balance>0?"text-green":"text-red")},r(c.customer.balance>0?"Piutang":"Utang")+": "+r(a(K)(c.customer.balance)),3)])])):k("",!0),t("div",Qw," Total: Rp. "+r(a(K)(c.total)),1),t("div",Jw,[e(a(Wt),{modelValue:g.value,"onUpdate:modelValue":[S[0]||(S[0]=te=>g.value=te),j],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="cash"?(d(),w("div",Gw,[(d(!0),w(G,null,Ne(y,(te,ue)=>(d(),w("div",{key:ue,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Xw,[e(a(ce),{modelValue:te.id,"onUpdate:modelValue":[re=>te.id=re,re=>A(re,ue)],options:q.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:re=>m.value[ue]=re},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",Zw,[e(Ee,{modelValue:te.amount,"onUpdate:modelValue":re=>te.amount=re,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:te.id==="wallet"&&!H.value,"error-message":te.id==="wallet"&&!H.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:re=>f.value[ue]=re},Be({_:2},[y.length>1?{name:"append",fn:l(()=>[e(T,{size:"xs",name:"close",class:"cursor-pointer",onClick:re=>h(te.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",e0,[e(E,{disable:!(y.length<3&&R.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:N,size:"sm"},null,8,["disable"])]),t("div",t0,[R.value>0?(d(),w("div",a0," Sisa Tagihan: Rp. "+r(a(K)(R.value)),1)):R.value<0?(d(),w("div",l0," Kembalian: Rp. "+r(a(K)(Math.abs(R.value))),1)):(d(),w("div",o0," Tagihan Terbayar "))])])):g.value==="debt"&&c.customer?(d(),w("div",n0,[e(ua,{outlined:"",modelValue:b.value,"onUpdate:modelValue":S[1]||(S[1]=te=>b.value=te),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":a(O),"max-date":a(U),rules:I.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",s0," Total Utang: Rp. "+r(a(K)(c.total)),1)])):g.value==="debt"&&!c.customer?(d(),w("div",r0,S[6]||(S[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(at,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:l(()=>[e(a(ce),{modelValue:p.value,"onUpdate:modelValue":S[2]||(S[2]=te=>p.value=te),options:V,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:n.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(E,{flat:"",label:"Batal",color:"grey",onClick:S[3]||(S[3]=te=>B.$emit("update:modelValue",!1)),class:"col"}),e(E,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:P,disable:n.value||!F.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},i0=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),d0={class:"row items-center no-wrap"},u0={class:"col-auto"},tn={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,i=u,n=()=>{i("save")},g=Z(()=>o.item.quantity*o.item.price),b=f=>{f.stopPropagation(),f.preventDefault()},p=f=>{o.modelValue&&(f.key==="Enter"?(n(),i("update:modelValue",!1),b(f)):f.key==="Escape"&&(i("update:modelValue",!1),b(f)))};return we(()=>{window.addEventListener("keydown",p)}),wt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item}),(f,y)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":y[6]||(y[6]=_=>f.$emit("update:modelValue",_))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",d0,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",u0,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=_=>f.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(ne,{modelValue:c.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=_=>c.item.product_name=_),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=_=>c.item.quantity=_),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.price,"onUpdate:modelValue":y[3]||(y[3]=_=>c.item.price=_),label:"Harga",readonly:!c.item.product.price_editable,"hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","readonly","disable"]),e(Ee,{modelValue:g.value,"onUpdate:modelValue":y[4]||(y[4]=_=>g.value=_),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ne,{modelValue:c.item.notes,"onUpdate:modelValue":y[5]||(y[5]=_=>c.item.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},m0=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),c0={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(u,o)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:l(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(at,{align:"center"},{default:l(()=>[ae(e(E,{dense:"",label:"Tutup"},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},an=_t(c0,[["__scopeId","data-v-92052544"]]),p0=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),f0={class:"row items-center no-wrap"},g0={class:"col text-subtite text-bold text-grey-8"},b0={class:"col-auto"},ln={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:u}){const o=c,i=u,n=()=>{i("save")},g=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),g(m)):m.key==="Escape"&&(i("update:modelValue",!1),g(m)))};return we(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,f)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":f[4]||(f[4]=y=>m.$emit("update:modelValue",y))},{default:l(()=>[e(fe,null,{default:l(()=>[e(le,{class:"q-py-sm"},{default:l(()=>[t("div",f0,[t("div",g0," Edit "+r(c.data.code),1),t("div",b0,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=y=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:l(()=>[e(Kt,{modelValue:c.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=y=>c.data.datetime=y),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(ne,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":f[2]||(f[2]=y=>m.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=y),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ne,{modelValue:c.data.notes,"onUpdate:modelValue":f[3]||(f[3]=y=>c.data.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(at,{align:"right"},{default:l(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[pe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[pe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},v0=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),y0={key:0},_0={style:{float:"right"}},k0={key:1},w0={style:{float:"right"}},h0={key:2},$0={style:{float:"right"}},x0={key:3},S0={style:{float:"right"}},V0={style:{float:"right"}},q0={class:"q-gutter-sm"},C0={class:"q-my-md"},T0={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const u=C(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),D(lt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:l(()=>[e(fe,{style:{"min-width":"300px"}},{default:l(()=>[e(le,{class:"q-py-none q-pt-md"},{default:l(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:l(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(d(),w("tr",y0,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",_0,r(a(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",k0,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",w0,r(a(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",h0,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",$0,r(a(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",x0,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",S0,r(a(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",V0,r(a(K)(c.payment.change)),1)])])])])]),_:1}),e(at,{align:"center"},{default:l(()=>[t("div",q0,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",C0,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},on=_t(T0,[["__scopeId","data-v-794fd35f"]]),P0=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"})),R0={class:"q-gutter-sm"},O0={class:"row items-center"},I0={class:"text-weight-bold"},U0={class:"text-weight-bold"},D0={class:"row q-col-gutter-none full-width"},j0={class:"col-sm-6 col-12 col"},E0={class:"row full-width"},A0={key:0,class:"row"},M0={class:"col-sm-6 col-12"},N0={class:"row q-ml-sm items-end"},B0={class:"row col grow"},F0={class:"col-12 q-pa-sm column"},z0={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},L0={key:0,class:"col"},K0={class:"text-caption text-grey-6 q-mt-xs"},H0={key:0,class:"text-caption text-grey-8 q-mt-xs"},Y0={class:"text-italic"},W0={key:1,class:"col"},Q0={class:"q-pa-sm q-pb-none text-grey-8"},J0={class:"col"},G0={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},X0={class:"text-h4 text-weight-bold"},Z0={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},e2={class:"col q-py-sm"},t2={class:"q-py-sm"},a2={__name:"Editor",setup(c){const s=xe(),u=ge(),o=C(!0),i=C(null),n=C(null),g=C(null),b=C(!1),p=C(null),m=C(null),{isFullscreen:f,toggleFullscreen:y}=ka(m),_=u.props.data.code,V=C(u.props.data.customer),q=C(null),x=C(""),R=C(!1),H=C(!1),O=C(!1),U=C(!1),I=C(!1),F=C(!1),N=C(null),h=C("price_1"),j=Ie({id:u.props.data.id,code:u.props.data.code,customer_id:u.props.data.customer_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),P=Z(()=>j.items.reduce((de,Q)=>de+Q.price*Q.quantity,0)),$=()=>{var de;y(),f.value||(de=p==null?void 0:p.value)==null||de.hideDrawer()},A=de=>isNaN(de)||de<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,B=de=>isNaN(de)||de<0?(gt("Harga tidak valid.","top"),!1):!0,S=de=>!de||de.length==0?(gt("Barcode tidak valid.","top"),!1):!0,M=de=>{var Q;(Q=x.value)!=null&&Q.endsWith("*")?x.value+=de.name:x.value=de.name},te=async()=>{var ht;const de=(ht=x.value)==null?void 0:ht.trim();if(de.length===0){O.value=!0;return}const Q=de.split("*");let qe=1,je="",ke=null;if(Q.length===1)je=Q[0];else if(Q.length<=3)qe=parseInt(Q[0]),je=Q[1],Q.length===3&&(ke=parseFloat(Q[2]));else{gt("Input tidak valid.","top");return}if(je.length===0){O.value=!0;return}!S(je)&&!A(qe)&&!B(ke)||(R.value=!0,await Oe.post(route("admin.sales-order.add-item"),{order_id:j.id,product_code:je,qty:qe,price:ke,merge:o.value}).then(Vt=>{const Ut=Vt.data.data.item;let St=-1;Vt.data.data.mergeItem&&(St=j.items.findIndex(ma=>ma.id===Ut.id)),St===-1?j.items.push(Ut):j.items[St]=Ut,x.value="",ke!==null&&ke!==parseFloat(Ut.price)&&gt("Harga tidak dapat diubah!","top")}).catch(Vt=>{var Ut,St;pt((St=(Ut=Vt.response)==null?void 0:Ut.data)==null?void 0:St.message,"top"),console.error("Gagal mengambil data produk:",Vt)}),R.value=!1,it(()=>{var Vt;(Vt=i.value)==null||Vt.focus()}))},ue=de=>{N.value=Object.create(de),U.value=!0},re=de=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${de.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{R.value=!0,Oe.post(route("admin.sales-order.remove-item"),{id:de.id}).then(()=>{const Q=j.items.findIndex(qe=>qe.id===de.id);Q!==-1&&(j.items.splice(Q,1)[0],ft("Item telah dihapus","top"))}).catch(Q=>{var qe,je;pt(((je=(qe=Q==null?void 0:Q.response)==null?void 0:qe.data)==null?void 0:je.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(Q)}).finally(()=>{R.value=!1})})},Re=()=>{R.value=!0;const de=n.value.getCurrentItem(),Q={id:de.id,qty:de.quantity};de.product.price_editable&&(Q.price=de.price),de.notes&&(Q.notes=de.notes),Oe.post(route("admin.sales-order.update-item"),Q).then(qe=>{const je=qe.data.data,ke=j.items.findIndex(ht=>ht.id===je.id);ke!==-1&&(j.items[ke]=je,ft("Item telah diperbarui","top"))}).catch(qe=>{var je,ke;pt(((ke=(je=qe==null?void 0:qe.response)==null?void 0:je.data)==null?void 0:ke.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(qe)}).finally(()=>{R.value=!1})};we(()=>{const de=Q=>{H.value||b.value||U.value||O.value||I.value||(Q.key==="F1"?(Q.preventDefault(),b.value=!0):Q.key==="F2"?(Q.preventDefault(),g.value.focus()):Q.key==="F3"?(Q.preventDefault(),i.value.focus()):Q.key==="F4"?(Q.preventDefault(),o.value=!o.value):Q.key==="F10"||Q.ctrlKey&&Q.key==="Enter"?(Q.preventDefault(),_e.value&&(H.value=!0)):Q.key==="F11"?(Q.preventDefault(),$()):(Q.key==="F5"||Q.key==="F6"||Q.key==="F7"||Q.key==="F12")&&Q.preventDefault())};document.addEventListener("keydown",de),wt(()=>{document.removeEventListener("keydown",de)}),it(()=>{var Q;(Q=p==null?void 0:p.value)==null||Q.hideDrawer()})});const Ge=async de=>{V.value=de,j.customer_id=de==null?void 0:de.id,await me(),de!=null&&de.id?(h.value=V.value.default_price_type??"price_1",i.value.focus()):(h.value="price_1",g.value.focus())},me=async()=>{R.value=!0;const de={id:j.id,customer_id:j.customer_id??null,datetime:ea(j.datetime),notes:j.notes};await Oe.post(route("admin.sales-order.update"),de).then(Q=>{const qe=Q.data.data.id;j.customer_id=qe.customer_id}).catch(Q=>{var qe,je;pt(((je=(qe=Q==null?void 0:Q.response)==null?void 0:qe.data)==null?void 0:je.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Q)}).finally(()=>{R.value=!1})},L=de=>{if(j.items.length===0){ft("Item masih kosong","top");return}const Q={id:j.id,...de};R.value=!0,Oe.post(route("admin.sales-order.close"),Q).then(qe=>{ft("Transaksi selesai"),Q.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:j.id,size:u.props.settings.default_print_size}),"_self"):Q.after_payment_action==="detail"?ee.get(route("admin.sales-order.detail",{id:j.id})):Q.after_payment_action==="new-order"&&ee.get(route("admin.sales-order.add"))}).catch(qe=>{var je,ke;pt((ke=(je=qe.response)==null?void 0:je.data)==null?void 0:ke.message),console.error(qe)}).finally(()=>{R.value=!1})},ye=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${j.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order.cancel",{id:j.id}),{id:j.id}).then(()=>{ft("Transaksi telah dibatalkan."),ee.visit(route("admin.sales-order.detail",{id:j.id}))}).catch(de=>{var qe,je;const Q=((je=(qe=de.response)==null?void 0:qe.data)==null?void 0:je.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:Q,color:"warning",position:"bottom"}),console.error(de)})})},se=()=>{window.open(route("admin.sales-order.detail",{id:j.id})+"?preview=1","_blank")},Y=Z(()=>V.value?V.value.wallet_balance>=P.value:!0),_e=Z(()=>Tt().appContext.config.globalProperties.$can("admin.sales-order.close")&&!R.value&&j.items.length!==0&&j.status==="draft");return(de,Q)=>{const qe=X("i-head"),je=X("authenticated-layout");return d(),w(G,null,[e(qe,{title:a(_)},null,8,["title"]),e(je,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:l(()=>[v(r(a(_)),1)]),"left-button":l(()=>[t("div",R0,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:Q[0]||(Q[0]=ke=>a(ee).get(de.route("admin.sales-order.index")))})])]),"right-button":l(()=>{var ke,ht;return[t("div",O0,[a(s).screen.gt.sm?(d(),w(G,{key:0},[t("div",I0,r(a(u).props.auth.user.username),1),Q[22]||(Q[22]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",U0,r((ht=(ke=a(u).props.data.cashier_session)==null?void 0:ke.cashier_terminal)==null?void 0:ht.name),1),Q[23]||(Q[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(_a)])],64)):k("",!0),k("",!0)])]}),default:l(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:l(()=>[e(fe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:l(()=>[t("div",D0,[t("div",j0,[t("div",E0,[e(Yo,{ref_key:"customerAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:V.value,"onUpdate:modelValue":Q[2]||(Q[2]=ke=>V.value=ke),label:"Pelanggan",disable:R.value,onCustomerSelected:Ge,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),V.value?(d(),w("div",A0,[t("div",{class:Ve(["q-mt-xs q-ml-sm text-bold",Y.value?"text-green":"text-red"])}," Wallet: "+r(V.value?"Rp. "+a(K)(V.value?V.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:Ve(["q-mt-xs q-ml-sm text-bold",V.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(V.value?"Rp. "+a(K)(V.value?V.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",M0,[e(ne,{ref_key:"userInputRef",ref:i,modelValue:x.value,"onUpdate:modelValue":Q[5]||(Q[5]=ke=>x.value=ke),onKeyup:Q[6]||(Q[6]=Qt(J(ke=>te(),["prevent"]),["enter"])),loading:R.value,disable:R.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:l(()=>[e(T,{name:"search",onClick:Q[3]||(Q[3]=ke=>O.value=!0),class:"cursor-pointer"})]),append:l(()=>{var ke;return[((ke=x.value)==null?void 0:ke.length)>0?(d(),D(T,{key:0,name:"send",onClick:Q[4]||(Q[4]=ht=>te()),class:"cursor-pointer q-ml-md"})):k("",!0)]}),_:1},8,["modelValue","loading","disable"]),t("div",N0,[e(Ct,{class:"col",modelValue:o.value,"onUpdate:modelValue":Q[7]||(Q[7]=ke=>o.value=ke),label:"Gabungkan item",disable:R.value},null,8,["modelValue","disable"])])])]),t("div",B0,[t("div",F0,[e(Zo,{items:j.items,onUpdateQuantity:Q[8]||(Q[8]=({id:ke,value:ht})=>de.updateQuantity(ke,ht)),onRemoveItem:re,onEditItem:ue,"is-processing":R.value},null,8,["items","is-processing"])])]),t("div",z0,[a(s).screen.gt.sm?(d(),w("div",L0,[t("div",K0,r(j.items.length)+" item(s) ",1),j.notes?(d(),w("div",H0,[Q[24]||(Q[24]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Y0,[e($e,{text:j.notes},null,8,["text"])])])):k("",!0)])):k("",!0),a(s).screen.gt.sm?(d(),w("div",W0,[t("div",Q0,[t("div",null,"#: "+r(j.code),1),t("div",null,r(a(ve)(j.datetime)),1)])])):k("",!0),t("div",J0,[t("div",G0,[Q[26]||(Q[26]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",X0,[Q[25]||(Q[25]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(a(K)(P.value)),1)])])])]),t("div",Z0,[t("div",e2,[e(E,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:Q[9]||(Q[9]=ke=>H.value=!0),disable:!_e.value,loading:R.value},null,8,["disable","loading"])]),t("div",t2,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:Q[13]||(Q[13]=J(()=>{},["stop"])),style:{width:"10px"}},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[ae((d(),D(oe,{clickable:"",onClick:Q[10]||(Q[10]=J(ke=>I.value=!0,["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>Q[27]||(Q[27]=[v("Edit Rincian")])),_:1})]),_:1})),[[ie],[pe]]),ae((d(),D(oe,{clickable:"",onClick:Q[11]||(Q[11]=J(ke=>se(),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"preview"})]),_:1}),e(z,null,{default:l(()=>Q[28]||(Q[28]=[v("Pratinjau")])),_:1})]),_:1})),[[ie],[pe]]),ae((d(),D(oe,{clickable:"",onClick:Q[12]||(Q[12]=J(ke=>ye(),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:l(()=>Q[29]||(Q[29]=[v(" Batalkan ")])),_:1})]),_:1})),[[ie],[pe]]),e(Ae)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(tn,{ref_key:"itemEditorRef",ref:n,modelValue:U.value,"onUpdate:modelValue":Q[14]||(Q[14]=ke=>U.value=ke),item:N.value,onSave:Q[15]||(Q[15]=ke=>Re()),"is-processing":R.value},null,8,["modelValue","item","is-processing"]),e(en,{modelValue:H.value,"onUpdate:modelValue":Q[16]||(Q[16]=ke=>H.value=ke),onAccepted:L,form:j,customer:V.value,total:P.value,accounts:a(u).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(wa,{modelValue:O.value,"onUpdate:modelValue":Q[17]||(Q[17]=ke=>O.value=ke),onProductSelected:M,priceType:h.value,"show-cost":de.$can("admin.product:view-cost")},null,8,["modelValue","priceType","show-cost"]),e(ln,{modelValue:I.value,"onUpdate:modelValue":Q[18]||(Q[18]=ke=>I.value=ke),data:j,onSave:Q[19]||(Q[19]=ke=>me()),"is-processing":R.value},null,8,["modelValue","data","is-processing"]),e(an,{modelValue:b.value,"onUpdate:modelValue":Q[20]||(Q[20]=ke=>b.value=ke)},null,8,["modelValue"]),e(on,{modelValue:F.value,"onUpdate:modelValue":Q[21]||(Q[21]=ke=>F.value=ke),order:j,customer:V.value,total:P.value,payment:q.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},l2=Object.freeze(Object.defineProperty({__proto__:null,default:a2},Symbol.toStringTag,{value:"Module"})),o2={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.SALES_ORDER_STATUSES,u={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(d(),D(Ft,{status:c.status,statuses:a(s),colors:u},null,8,["status","statuses"]))}},n2={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,u={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(d(),D(Ft,{status:c.status,statuses:a(s),colors:u},null,8,["status","statuses"]))}};const s2={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},r2={class:"q-pa-xs"},i2={class:"full-width row flex-center text-grey-8 q-gutter-sm"},d2={key:0},u2={key:1},m2={key:2},c2={key:4},p2={key:0},f2={key:1},g2={key:0},b2={key:0},v2={key:1},y2={class:"flex justify-end"},Ol="Penjualan",_2={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=zt(),m=Lt(),f=[{label:"Semua Tahun",value:"all"},{label:`${p}`,value:p},...Pt(p-2,p-1).reverse()],y=[{value:"all",label:"Semua Bulan"},...Rt()],_=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_STATUSES)],V=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],q=[{value:"all",label:"Semua Status"},...tt(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],x=Ie({search:"",year:p,month:m,status:"all",payment_status:"all",delivery_status:"all",...Le()}),R=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),H=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];we(()=>{h()});const O=$=>{if($.status=="draft"){U($);return}I($)},U=$=>{ee.get(route("admin.sales-order.edit",$.id))},I=$=>{ee.get(route("admin.sales-order.detail",$.id))},F=$=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order.cancel",{id:$.id}),{id:$.id}).then(A=>{const B=A.data.data,S=o.value.findIndex(M=>M.id===B.id);if(S===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[S].status="canceled",s.notify({message:A.data.message,position:"bottom"})}).catch(A=>{var S,M;const B=((M=(S=A.response)==null?void 0:S.data)==null?void 0:M.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:B,color:"warning",position:"bottom"}),console.error(A)})})},N=$=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.sales-order.delete",$.id),fetchItemsCallback:h,loading:i}),h=($=null)=>{Ke({pagination:R,filter:x,props:$,rows:o,url:route("admin.sales-order.data"),loading:i,tableRef:n})},j=()=>{h()},P=Z(()=>s.screen.gt.sm?H:H.filter($=>$.name==="id"||$.name==="action"));return Me(()=>x.year,$=>{$===null&&(x.month=null)}),($,A)=>{const B=X("i-head"),S=X("authenticated-layout");return d(),w(G,null,[e(B,{title:Ol}),e(S,null,Be({title:l(()=>[v(r(Ol))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=M=>u.value=!u.value)},null,8,["icon"]),$.$can("admin.sales-order.edit")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:A[1]||(A[1]=M=>a(ee).get($.route("admin.sales-order.add")))})):k("",!0)]),default:l(()=>[t("div",r2,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:R.value,"onUpdate:pagination":A[11]||(A[11]=M=>R.value=M),filter:x.search,loading:i.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:a(b)}),onRequest:h,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:M,message:te,filter:ue})=>[t("div",i2,[t("span",null,r(te)+" "+r(ue?" with term "+ue:""),1)])]),body:l(M=>[e(Pe,{props:M,class:"cursor-pointer",onClick:J(te=>O(M.row),["prevent"])},{default:l(()=>[e(W,{key:"id",props:M,class:"wrap-column"},{default:l(()=>{var te,ue,re;return[t("div",null,[e(T,{name:"tag"}),v(" "+r(M.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_today"}),v(r(a(ve)(M.row.datetime)),1)]),a(s).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[M.row.cashier?(d(),w("div",d2,[e(T,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((te=M.row.cashier)==null?void 0:te.username),1)])):k("",!0),M.row.cashier_session?(d(),w("div",u2,[e(T,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((re=(ue=M.row.cashier_session)==null?void 0:ue.cashier_terminal)==null?void 0:re.name),1)])):k("",!0),M.row.customer?(d(),w("div",m2,[e(T,{name:"person",class:"inline-icon"}),A[12]||(A[12]=v(" Pelanggan: ")),e(va,{href:$.route("admin.customer.detail",{id:M.row.customer.id}),onClick:A[8]||(A[8]=J(()=>{},["stop"]))},{default:l(()=>[v(" "+r(M.row.customer.code)+" - "+r(M.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,[e(T,{name:"wallet",class:"inline-icon"}),v(" Total: Rp. "+r(a(K)(M.row.grand_total)),1)]),M.row.balance!=0?(d(),w("div",{key:3,class:Ve(M.row.balance>0?"text-green":"text-red")},[e(T,{name:"balance",class:"inline-icon"}),v(" "+r(M.row.balance>0?"Piutang":"Utang")+": Rp. "+r(a(K)(M.row.balance)),1)],2)):k("",!0),M.row.notes?(d(),w("div",c2,[e(T,{name:"notes"}),v(" "+r(M.row.notes),1)])):k("",!0)],64)),t("div",null,[e(o2,{status:M.row.status},null,8,["status"]),M.row.status=="closed"?(d(),w(G,{key:0},[e(n2,{status:M.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]}),_:2},1032,["props"]),e(W,{key:"cashier_id",props:M},{default:l(()=>{var te,ue,re;return[M.row.cashier?(d(),w("div",p2,[e(T,{name:"person",class:"inline-icon"}),v(" "+r((te=M.row.cashier)==null?void 0:te.username),1)])):k("",!0),M.row.cashier_session?(d(),w("div",f2,[e(T,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((re=(ue=M.row.cashier_session)==null?void 0:ue.cashier_terminal)==null?void 0:re.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(W,{key:"customer_id",props:M},{default:l(()=>[M.row.customer?(d(),w("div",g2,[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" "+r(M.row.customer_code)+" - "+r(M.row.customer_name),1)]),M.row.customer_phone?(d(),w("div",b2,[e(T,{name:"phone",class:"inline-icon"}),v(" "+r(M.row.customer_phone),1)])):k("",!0),M.row.customer_address?(d(),w("div",v2,[e(T,{name:"home_pin",class:"inline-icon"}),v(" "+r(M.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"grand_total",props:M},{default:l(()=>[v(r(a(K)(M.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:M,class:Ve(M.row.balance>0?"text-green":"text-red")},{default:l(()=>[v(r(a(K)(M.row.balance)),1)]),_:2},1032,["props","class"]),e(W,{key:"notes",props:M},{default:l(()=>[e($e,{text:M.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(W,{key:"action",props:M,onClick:A[10]||(A[10]=J(()=>{},["stop"]))},{default:l(()=>[t("div",y2,[$.$can("admin.sales-order.detail")||$.$can("admin.sales-order.edit")||$.$can("admin.sales-order.cancel")||$.$can("admin.sales-order.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:A[9]||(A[9]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[M.row.status!="draft"&&$.$can("admin.sales-order.detail")?ae((d(),D(oe,{key:0,onClick:J(te=>I(M.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"visibility"})]),_:1}),e(z,null,{default:l(()=>A[13]||(A[13]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),M.row.status=="draft"&&$.$can("admin.sales-order.edit")?ae((d(),D(oe,{key:1,onClick:J(te=>U(M.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>A[14]||(A[14]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),M.row.status=="draft"&&$.$can("admin.sales-order.cancel")?ae((d(),D(oe,{key:2,onClick:J(te=>F(M.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"cancel"})]),_:1}),e(z,null,{default:l(()=>A[15]||(A[15]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),e(Ae),$.$can("admin.sales-order.delete")?ae((d(),D(oe,{key:3,onClick:J(te=>N(M.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>A[16]||(A[16]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",s2,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[A[2]||(A[2]=M=>x.year=M),j],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(d(),D(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[A[3]||(A[3]=M=>x.month=M),j],options:y,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.status,"onUpdate:modelValue":[A[4]||(A[4]=M=>x.status=M),j],options:_,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:x.payment_status,"onUpdate:modelValue":[A[5]||(A[5]=M=>x.payment_status=M),j],options:V,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":A[7]||(A[7]=M=>x.search=M),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},k2=Object.freeze(Object.defineProperty({__proto__:null,default:_2},Symbol.toStringTag,{value:"Module"})),w2={},h2={class:"row"},$2={class:"q-mb-md text-h6"};function x2(c,s){const u=X("i-head"),o=X("authenticated-layout");return d(),w(G,null,[e(u,{title:"Informasi Sistem"}),e(o,null,{title:l(()=>s[0]||(s[0]=[v("Informasi Sistem")])),default:l(()=>[t("div",h2,[e(fe,{class:"col q-ma-xs",square:"",flat:"",bordered:""},{default:l(()=>[e(le,null,{default:l(()=>[t("div",$2,"Tentang "+r(c.$config.APP_NAME),1),v(" Versi : "+r(c.$config.APP_VERSION_STR),1),s[1]||(s[1]=t("br",null,null,-1)),s[2]||(s[2]=v(" Dikembangkan oleh Shiftech Indonesia")),s[3]||(s[3]=t("br",null,null,-1)),s[4]||(s[4]=v(" CV. Shift Karya Teknologi "))]),_:1})]),_:1})])]),_:1})],64)}const S2=_t(w2,[["render",x2]]),V2=Object.freeze(Object.defineProperty({__proto__:null,default:S2},Symbol.toStringTag,{value:"Module"})),nn={__name:"CompanyInfoForm",setup(c){const s=C(),u=ge(),o=Qe({name:u.props.data.name,headline:u.props.data.headline,phone:u.props.data.phone,address:u.props.data.address,logo_path:u.props.data.logo_path,logo_image:null}),i=C(null),n=C("");we(()=>{o.logo_path&&(n.value=`/${o.logo_path}`)});function g(){i.value.click()}function b(f){const y=f.target.files[0];y&&(o.logo_image=y,n.value=URL.createObjectURL(y))}function p(){o.logo_image=null,o.logo_path=null,n.value=null,i.value.value=null}const m=()=>nt({form:o,url:route("admin.company-profile.edit")});return(f,y)=>(d(),D(Je,{class:"row",onSubmit:J(m,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[y[8]||(y[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),y[9]||(y[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(ne,{ref_key:"nameInputRef",ref:s,modelValue:a(o).name,"onUpdate:modelValue":y[0]||(y[0]=_=>a(o).name=_),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[_=>_&&_.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ne,{modelValue:a(o).headline,"onUpdate:modelValue":y[1]||(y[1]=_=>a(o).headline=_),modelModifiers:{trim:!0},label:"Headline",disable:a(o).processing,maxlength:"200","lazy-rules":"",error:!!a(o).errors.headline,"error-message":a(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).phone,"onUpdate:modelValue":y[2]||(y[2]=_=>a(o).phone=_),modelModifiers:{trim:!0},label:"No Telepon",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.phone,"error-message":a(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(o).address,"onUpdate:modelValue":y[3]||(y[3]=_=>a(o).address=_),modelModifiers:{trim:!0},label:"Alamat",disable:a(o).processing,"lazy-rules":"",error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[y[7]||(y[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(E,{label:"Browse Logo",size:"sm",onClick:g,color:"secondary",icon:"add_a_photo",disable:a(o).processing},null,8,["disable"]),e(E,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:a(o).processing||!n.value,color:"red",onClick:p},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*",style:{display:"none"},onChange:b},null,544),t("div",null,[e(ia,{src:n.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},Be({error:l(()=>[y[4]||(y[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[n.value?void 0:{name:"default",fn:l(()=>[y[5]||(y[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),y[6]||(y[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(le,null,{default:l(()=>[e(E,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},q2=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),C2={class:"q-pa-xs"},T2={class:"row justify-center"},P2={class:"col col-md-6"},Il="Profil Perusahaan",R2={__name:"Edit",setup(c){return(s,u)=>{const o=X("i-head"),i=X("authenticated-layout");return d(),w(G,null,[e(o,{title:Il}),e(i,null,{title:l(()=>[v(r(Il))]),default:l(()=>[t("div",C2,[t("div",T2,[t("div",P2,[e(nn)])])])]),_:1})],64)}}},O2=Object.freeze(Object.defineProperty({__proto__:null,default:R2},Symbol.toStringTag,{value:"Module"})),I2={class:"col-xs-12 col-md-8"},U2={class:"col-xs-12 col-sm-9"},D2={class:"col-xs-12 col-sm-3 text-right"},Ul="Pengaturan Database & Utilitas",j2={__name:"Index",setup(c){const s=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:" **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:" **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:" **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(u,o)=>{const i=X("i-head"),n=X("authenticated-layout");return d(),w(G,null,[e(i,{title:Ul}),e(n,null,{title:l(()=>[v(r(Ul))]),default:l(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:l(()=>[t("div",I2,[e(fe,{square:"",flat:"",bordered:"",class:"full-width"},{default:l(()=>[e(le,null,{default:l(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Jt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:l(()=>[e(T,{name:"warning",color:"red"})]),default:l(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=v(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(Ae),e(le,{class:"q-gutter-y-lg"},{default:l(()=>[(d(),w(G,null,Ne(s,g=>t("div",{key:g.name,class:"row items-center q-col-gutter-md"},[t("div",U2,[e(oe,{class:"q-pa-none"},{default:l(()=>[e(z,{avatar:"",class:"q-pr-md"},{default:l(()=>[e(T,{name:g.icon,color:g.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(z,{style:{"text-wrap":"initial"}},{default:l(()=>[e(he,{class:"text-subtitle1 text-bold"},{default:l(()=>[v(r(g.name),1)]),_:2},1024),e(he,{caption:"",class:"q-pb-sm"},{default:l(()=>[v(r(g.description),1)]),_:2},1024),e(he,{class:"text-caption text-negative text-bold"},{default:l(()=>[v(r(g.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",D2,[e(E,{icon:g.icon,label:g.name.split(" ")[0],color:g.color,disable:g.disable,onClick:g.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},E2=Object.freeze(Object.defineProperty({__proto__:null,default:j2},Symbol.toStringTag,{value:"Module"})),A2={class:"q-pa-xs"},M2={class:"row justify-center"},N2={class:"col col-md-6"},B2={__name:"Edit",setup(c){const s=ge(),u=Qe({foot_note:s.props.data.foot_note,default_payment_mode:s.props.data.default_payment_mode,default_print_size:s.props.data.default_print_size,after_payment_action:s.props.data.after_payment_action}),o=()=>nt({form:u,url:route("admin.pos-settings.edit")}),i=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],n=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],g=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(b,p)=>{const m=X("i-head"),f=X("authenticated-layout");return d(),w(G,null,[e(m,{title:"Pengaturan POS"}),e(f,null,{title:l(()=>p[4]||(p[4]=[v("Pengaturan POS")])),default:l(()=>[t("div",A2,[t("div",M2,[t("div",N2,[e(Je,{class:"row",onSubmit:J(o,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{flat:"",bordered:"",square:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[p[5]||(p[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),p[6]||(p[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(ce,{modelValue:a(u).default_payment_mode,"onUpdate:modelValue":p[0]||(p[0]=y=>a(u).default_payment_mode=y),label:"Default Pembayaran",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:a(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(u).errors.default_payment_mode,"error-message":a(u).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(u).default_print_size,"onUpdate:modelValue":p[1]||(p[1]=y=>a(u).default_print_size=y),label:"Default Ukuran Cetak",options:n,"map-options":"","emit-value":"","lazy-rules":"",disable:a(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(u).errors.default_print_size,"error-message":a(u).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:a(u).after_payment_action,"onUpdate:modelValue":p[2]||(p[2]=y=>a(u).after_payment_action=y),label:"Aksi Setelah Pembayaran",options:g,"map-options":"","emit-value":"","lazy-rules":"",disable:a(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(u).errors.after_payment_action,"error-message":a(u).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ne,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:a(u).foot_note,"onUpdate:modelValue":p[3]||(p[3]=y=>a(u).foot_note=y),modelModifiers:{trim:!0},label:"Foot Note",disable:a(u).processing,"lazy-rules":"",error:!!a(u).errors.foot_note,"error-message":a(u).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,null,{default:l(()=>[e(E,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:a(u).processing,loading:a(u).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},F2=Object.freeze(Object.defineProperty({__proto__:null,default:B2},Symbol.toStringTag,{value:"Module"})),z2={class:"q-gutter-sm"},L2={class:"q-gutter-sm"},K2={class:"col col-md-6 q-pa-xs"},H2={class:"row"},Y2={class:"detail-item"},W2={class:"detail-value"},Q2={class:"detail-item"},J2={class:"detail-value"},G2={class:"detail-item"},X2={class:"detail-value"},Z2={class:"detail-item"},eh={class:"detail-value"},th={class:"detail-item"},ah={class:"detail-value"},lh={class:"detail-item"},oh={class:"detail-value"},nh={class:"detail-item"},sh={class:"detail-value"},rh={class:"detail-item"},ih={class:"detail-value user-agent-value"},dh={class:"q-pt-md"},uh={class:"table-wrapper-scroll"},mh={key:0,class:"table-metadata"},ch={key:0},ph={colspan:"100%"},fh={class:"text-mono json-pre-scroll"},gh={key:1},bh={class:"metadata-label",style:{width:"100px"}},vh={class:"metadata-value"},yh={key:0,class:"text-mono json-pre-scroll"},_h={key:2},kh={colspan:"3"},wh={class:"table-metadata"},hh={class:"metadata-label"},$h={class:"metadata-value"},xh={class:"metadata-value"},Sh={key:1,class:"text-grey-8 text-italic q-pa-sm"},Dl="Rincian Log Aktifitas",Vh={__name:"Detail",setup(c){const s=ge(),u=()=>ot({message:`Hapus log aktifitas #${s.props.data.id}?`,url:route("admin.user-activity-log.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.user-activity-log.index"))}});return(o,i)=>{const n=X("i-head"),g=X("i-link"),b=X("authenticated-layout");return d(),w(G,null,[e(n,{title:Dl}),e(b,{"show-drawer-button":!0},{title:l(()=>[v(r(Dl))]),"left-button":l(()=>[t("div",z2,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=p=>o.$goBack())})])]),"right-button":l(()=>[t("div",L2,[e(E,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=p=>u())})])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",K2,[t("div",H2,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"detail-group"},{default:l(()=>[i[20]||(i[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",Y2,[i[2]||(i[2]=t("div",{class:"detail-label"},"ID",-1)),i[3]||(i[3]=t("div",{class:"detail-separator"},":",-1)),t("div",W2,r(a(s).props.data.id),1)]),t("div",Q2,[i[4]||(i[4]=t("div",{class:"detail-label"},"Waktu",-1)),i[5]||(i[5]=t("div",{class:"detail-separator"},":",-1)),t("div",J2,r(a(ve)(a(s).props.data.logged_at)),1)]),t("div",G2,[i[6]||(i[6]=t("div",{class:"detail-label"},"Pengguna",-1)),i[7]||(i[7]=t("div",{class:"detail-separator"},":",-1)),t("div",X2,[e(g,{href:o.route("admin.user.detail",{id:a(s).props.data.user_id})},{default:l(()=>[v(r(a(s).props.data.username),1)]),_:1},8,["href"])])]),t("div",Z2,[i[8]||(i[8]=t("div",{class:"detail-label"},"Kategori",-1)),i[9]||(i[9]=t("div",{class:"detail-separator"},":",-1)),t("div",eh,r(a(s).props.data.activity_category_label),1)]),t("div",th,[i[10]||(i[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),i[11]||(i[11]=t("div",{class:"detail-separator"},":",-1)),t("div",ah,r(a(s).props.data.activity_name_label),1)]),t("div",lh,[i[12]||(i[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),i[13]||(i[13]=t("div",{class:"detail-separator"},":",-1)),t("div",oh,r(a(s).props.data.description),1)]),t("div",nh,[i[14]||(i[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),i[15]||(i[15]=t("div",{class:"detail-separator"},":",-1)),t("div",sh,r(a(s).props.data.ip_address),1)]),t("div",rh,[i[16]||(i[16]=t("div",{class:"detail-label"},"User Agent",-1)),i[17]||(i[17]=t("div",{class:"detail-separator"},":",-1)),t("div",ih,r(a(s).props.data.user_agent),1)]),t("div",dh,[i[19]||(i[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",uh,[Object.keys(a(s).props.data.metadata).length>0?(d(),w("table",mh,[t("tbody",null,[(d(!0),w(G,null,Ne(a(s).props.formatted_metadata,(p,m)=>(d(),w(G,{key:m},[p.type==="plain"?(d(),w("tr",ch,[t("td",ph,[t("pre",fh,r(p.value),1)])])):k("",!0),p.type==="simple"?(d(),w("tr",gh,[t("td",bh,r(p.label),1),t("td",vh,[p.label=="Data Mentah (JSON)"?(d(),w("pre",yh,r(p.value),1)):(d(),w(G,{key:1},[v(r(p.value),1)],64))])])):k("",!0),p.type==="comparison"?(d(),w("tr",_h,[t("td",kh,[t("table",wh,[i[18]||(i[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(d(!0),w(G,null,Ne(p.value,(f,y)=>(d(),w("tr",{class:Ve(f.new_value!==f.old_value?"value-changed":"")},[t("td",hh,r(f.field),1),t("td",$h,r(f.old_value),1),t("td",xh,r(f.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(d(),w("div",Sh," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},qh=_t(Vh,[["__scopeId","data-v-37e21f0d"]]),Ch=Object.freeze(Object.defineProperty({__proto__:null,default:qh},Symbol.toStringTag,{value:"Module"})),Th={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ph={class:"q-pa-xs"},Rh={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Oh={key:0},Ih={class:"flex justify-end"},jl="Log Aktifitas Pengguna",Uh={__name:"Index",setup(c){const s=ge(),u=xe(),o=C(!1),i=C([]),n=C(!0),g=C(null),b=C(null),p=et(b),{protectClick:m}=At(),f=Ie({user_id:"all",activity_category:"all",activity_name:"all",search:"",...Le()}),y=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),_=[{value:"all",label:"Semua"},...s.props.users.map(A=>({value:A.id,label:A.username+" - "+A.name}))],V=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_categories).map(([A,B])=>({value:A,label:B}))],q=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_names).map(([A,B])=>({value:A,label:B}))],x=C(V),R=C(q),H=(A,B)=>{if(A===""){B(()=>{x.value=V});return}B(()=>{const S=A.toLowerCase();x.value=V.filter(M=>M.label.toLowerCase().indexOf(S)>-1)})},O=(A,B)=>{if(A===""){B(()=>{R.value=q});return}B(()=>{const S=A.toLowerCase();R.value=q.filter(M=>M.label.toLowerCase().indexOf(S)>-1)})},U=[{name:"id",label:u.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];we(()=>{F()});const I=A=>ot({message:`Hapus log #${A.id}?`,url:route("admin.user-activity-log.delete",A.id),fetchItemsCallback:F,loading:n}),F=(A=null)=>{Ke({pagination:y,filter:f,props:A,rows:i,url:route("admin.user-activity-log.data"),loading:n,tableRef:g})},N=()=>F(),j=m(A=>ee.get(route("admin.user-activity-log.detail",{id:A.id}))),P=Z(()=>u.screen.gt.sm?U:U.filter(A=>A.name==="id"||A.name==="action")),$=()=>{xt.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{ft("Seluruh log telah dibersihkan."),F()}).catch(A=>{var S,M;const B=((M=(S=A.response)==null?void 0:S.data)==null?void 0:M.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";pt(B,"bottom"),console.error(A)})})};return(A,B)=>{const S=X("i-head"),M=X("i-link"),te=X("authenticated-layout");return d(),w(G,null,[e(S,{title:jl}),e(te,null,Be({title:l(()=>[v(r(jl))]),"right-button":l(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:B[0]||(B[0]=ue=>o.value=!o.value)},null,8,["icon"]),A.$can("admin.user-activity-log.clear")?(d(),D(E,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:$})):k("",!0)]),default:l(()=>[t("div",Ph,[e(Ue,{class:"full-height-table",ref_key:"tableRef",ref:g,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":B[7]||(B[7]=ue=>y.value=ue),filter:f.search,loading:n.value,columns:P.value,rows:i.value,"rows-per-page-options":[10,25,50],style:He({height:a(p)}),onRequest:F,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:ue,message:re,filter:Re})=>[t("div",Rh,[t("span",null,r(re)+" "+r(Re?" with term "+Re:""),1)])]),body:l(ue=>[e(Pe,{props:ue,class:"cursor-pointer",onClick:J(re=>a(j)(ue.row,re),["stop"])},{default:l(()=>[e(W,{key:"id",props:ue},{default:l(()=>[t("div",null,[a(u).screen.lt.md?(d(),w(G,{key:0},[e(T,{name:"tag",class:"inline-icon"}),B[8]||(B[8]=v(" ID Aktifitas: "))],64)):k("",!0),v(" "+r(ue.row.id),1)]),a(u).screen.lt.md?(d(),w("div",Oh,[t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)(ue.row.logged_at)),1)]),t("div",null,[e(T,{name:"person",class:"inline-icon"}),e(M,{onClick:B[5]||(B[5]=J(()=>{},["stop"])),href:A.route("admin.user.detail",{id:ue.row.user_id})},{default:l(()=>[v(r(ue.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(T,{name:"category",class:"inline-icon"}),v(" "+r(ue.row.activity_category_label)+" > "+r(ue.row.activity_name_label),1)]),t("div",null,[e(T,{name:"notes",class:"inline-icon"}),v(" "+r(ue.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(W,{key:"logged_at",props:ue},{default:l(()=>[v(r(a(ve)(ue.row.logged_at)),1)]),_:2},1032,["props"]),e(W,{key:"username",props:ue},{default:l(()=>[e(M,{onClick:B[6]||(B[6]=J(()=>{},["stop"])),href:A.route("admin.user.detail",{id:ue.row.user_id})},{default:l(()=>[v(r(ue.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(W,{key:"activity_category",props:ue},{default:l(()=>[v(r(ue.row.activity_category_label),1)]),_:2},1032,["props"]),e(W,{key:"activity_name",props:ue},{default:l(()=>[v(r(ue.row.activity_name_label),1)]),_:2},1032,["props"]),e(W,{key:"description",props:ue,class:"wrap-column"},{default:l(()=>[v(r(ue.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:ue},{default:l(()=>[t("div",Ih,[A.$can("admin.user-role.delete")?(d(),D(E,{key:0,onClick:J(re=>I(ue.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:l(()=>[t("div",Th,[e(ce,{modelValue:f.user_id,"onUpdate:modelValue":[B[1]||(B[1]=ue=>f.user_id=ue),N],class:"custom-select col-xs-12 col-sm-2",options:_,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:f.activity_category,"onUpdate:modelValue":[B[2]||(B[2]=ue=>f.activity_category=ue),N],class:"custom-select col-xs-12 col-sm-2",options:x.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:H,clearable:""},null,8,["modelValue","options"]),e(ce,{modelValue:f.activity_name,"onUpdate:modelValue":[B[3]||(B[3]=ue=>f.activity_name=ue),N],class:"custom-select col-xs-12 col-sm-2",options:R.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:O},null,8,["modelValue","options"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":B[4]||(B[4]=ue=>f.search=ue),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Dh=Object.freeze(Object.defineProperty({__proto__:null,default:Uh},Symbol.toStringTag,{value:"Module"})),sn={__name:"UpdatePasswordForm",setup(c){const s=C(!1),u=C(null),o=C(null),i=Qe({current_password:"",password:"",password_confirmation:""}),n=()=>{i.clearErrors(),i.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>i.reset(),onError:()=>{i.errors.password&&(i.reset("password","password_confirmation"),u.value.focus()),i.errors.current_password&&(i.reset("current_password"),o.value.focus())}})};return(g,b)=>(d(),D(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[b[6]||(b[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),b[7]||(b[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(ne,{modelValue:a(i).current_password,"onUpdate:modelValue":b[1]||(b[1]=p=>a(i).current_password=p),type:s.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.current_password,"error-message":a(i).errors.current_password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[0]||(b[0]=p=>s.value=!s.value)},{default:l(()=>[e(T,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(ne,{modelValue:a(i).password,"onUpdate:modelValue":b[3]||(b[3]=p=>a(i).password=p),type:s.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.password,"error-message":a(i).errors.password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[2]||(b[2]=p=>s.value=!s.value)},{default:l(()=>[e(T,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(ne,{modelValue:a(i).password_confirmation,"onUpdate:modelValue":b[5]||(b[5]=p=>a(i).password_confirmation=p),type:s.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:a(i).processing,error:!!a(i).errors.password_confirmation,"error-message":a(i).errors.password_confirmation,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:l(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[4]||(b[4]=p=>s.value=!s.value)},{default:l(()=>[e(T,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(le,null,{default:l(()=>[e(E,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},jh=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"})),rn={__name:"UpdateProfileInformationForm",setup(c){const u=ge().props.auth.user,o=Qe({name:u.name,username:u.username,type:window.CONSTANTS.USER_TYPES[u.type]}),i=()=>nt({form:o,url:route("admin.user-profile.update")});return(n,g)=>(d(),D(Je,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[g[3]||(g[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),g[4]||(g[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(ne,{modelValue:a(o).username,"onUpdate:modelValue":g[0]||(g[0]=b=>a(o).username=b),label:"ID Pengguna",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(ne,{modelValue:a(o).name,"onUpdate:modelValue":g[1]||(g[1]=b=>a(o).name=b),modelModifiers:{trim:!0},label:"Nama",disable:a(o).processing,error:!!a(o).errors.name,"error-message":a(o).errors.name,rules:[b=>b&&b.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ne,{modelValue:a(o).type,"onUpdate:modelValue":g[2]||(g[2]=b=>a(o).type=b),label:"Jenis Akun",disable:a(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(le,null,{default:l(()=>[e(E,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:a(o).processing,loading:a(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Eh=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"})),Ah={class:"q-pa-xs"},Mh={class:"row justify-center"},Nh={class:"col col-md-6"},El="Pengaturan Pribadi",Bh={__name:"Edit",setup(c){return(s,u)=>{const o=X("i-head"),i=X("authenticated-layout");return d(),w(G,null,[e(o,{title:El}),e(i,null,{title:l(()=>[v(r(El))]),default:l(()=>[t("div",Ah,[t("div",Mh,[t("div",Nh,[e(rn,{class:"q-mb-md"}),e(sn)])])])]),_:1})],64)}}},Fh=Object.freeze(Object.defineProperty({__proto__:null,default:Bh},Symbol.toStringTag,{value:"Module"})),zh={class:"q-gutter-sm"},Lh={class:"q-gutter-sm"},Kh={class:"col col-md-6 q-pa-xs"},Hh={class:"row"},Yh={class:"detail"},Wh={key:0},Qh={key:1,class:"text-grey-8 text-italic"},Jh={key:2},Gh={class:"text-subtitle2 text-bold text-grey-8 q-mt-xs"},Xh={key:3,class:"text-grey-8 text-italic"},Al="Rincian Role Pengguna",Zh={__name:"Detail",setup(c){const s=ge(),u=Z(()=>{const o={};return s.props.data.permissions&&s.props.data.permissions.forEach(i=>{const n=i.category;o[n]||(o[n]=[]),o[n].push(i)}),o});return(o,i)=>{const n=X("i-head"),g=X("i-link"),b=X("authenticated-layout");return d(),w(G,null,[e(n,{title:Al}),e(b,{"show-drawer-button":!0},{title:l(()=>[v(r(Al))]),"left-button":l(()=>[t("div",zh,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=p=>o.$goBack())})])]),"right-button":l(()=>[t("div",Lh,[o.$can("admin.user-role.edit")?(d(),D(E,{key:0,icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=p=>a(ee).get(o.route("admin.user-role.edit",{id:a(s).props.data.id})))})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Kh,[t("div",Hh,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>[i[7]||(i[7]=t("div",{class:"text-subtitle1 text-bold text-grey-8"},"Info Role",-1)),t("table",Yh,[t("tbody",null,[t("tr",null,[i[2]||(i[2]=t("td",{style:{width:"100px"}},"Nama Role",-1)),i[3]||(i[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[i[4]||(i[4]=t("td",null,"Deskripsi",-1)),i[5]||(i[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.description),1)])])]),i[8]||(i[8]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Pengguna ",-1)),a(s).props.data.users.length>0?(d(),w("div",Wh,[(d(!0),w(G,null,Ne(a(s).props.data.users,p=>(d(),w("div",null,[i[6]||(i[6]=v("  ")),e(g,{href:o.route("admin.user.detail",{id:p.id})},{default:l(()=>[v(r(p.username)+" - "+r(p.name),1)]),_:2},1032,["href"])]))),256))])):(d(),w("div",Qh," Belum ada akun pengguna yang terdaftar. ")),i[9]||(i[9]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Hak Akses ",-1)),a(s).props.data.permissions.length>0?(d(),w("div",Jh,[(d(!0),w(G,null,Ne(u.value,(p,m)=>(d(),w("div",{key:m},[t("div",Gh,r(m),1),(d(!0),w(G,null,Ne(p,f=>(d(),w("div",{key:f.id},"  "+r(f.label),1))),128))]))),128))])):(d(),w("div",Xh," Belum ada hak akses yang ditetapkan. "))]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},e$=Object.freeze(Object.defineProperty({__proto__:null,default:Zh},Symbol.toStringTag,{value:"Module"})),t$={class:"q-gutter-sm"},a$={class:"col col-md-6 q-pa-xs"},l$={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},o$={__name:"Editor",setup(c){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description,permissions:s.props.data.permissions?s.props.data.permissions.map(g=>g.id):[]}),i=()=>nt({form:o,url:route("admin.user-role.save")}),n=Z(()=>{const g={};return s.props.permissions&&s.props.permissions.forEach(b=>{const p=b.category;g[p]||(g[p]=[]),g[p].push(b)}),g});return(g,b)=>{const p=X("i-head"),m=X("authenticated-layout");return d(),w(G,null,[e(p,{title:u}),e(m,{"show-drawer-button":!0},{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",t$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),"right-button":l(()=>[e(E,{icon:"save",label:"Simpan",color:"primary",disable:a(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:J(i,["prevent"])},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",a$,[e(Je,{class:"row",onSubmit:J(i,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>a(o).id=f)},null,512),[[yt,a(o).id]]),e(ne,{autofocus:"",modelValue:a(o).name,"onUpdate:modelValue":b[2]||(b[2]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).description,"onUpdate:modelValue":b[3]||(b[3]=f=>a(o).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.description,"error-message":a(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(d(!0),w(G,null,Ne(n.value,(f,y)=>(d(),w("div",{key:y},[t("div",l$,r(y),1),(d(!0),w(G,null,Ne(f,_=>(d(),w("div",{key:_.id},[e(sa,{class:"q-ma-none q-pa-none list-checkbox",modelValue:a(o).permissions,"onUpdate:modelValue":V=>a(o).permissions=V,val:_.id,label:_.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},n$=_t(o$,[["__scopeId","data-v-2c2a059c"]]),s$=Object.freeze(Object.defineProperty({__proto__:null,default:n$},Symbol.toStringTag,{value:"Module"})),r$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},i$={class:"q-pa-xs"},d$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},u$={class:"flex justify-end"},Ml="Role Pengguna",m$={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=Ie({search:"",...Le()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Role",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];we(()=>{_()});const y=H=>ot({message:`Hapus role ${H.name}?`,url:route("admin.user-role.delete",H.id),fetchItemsCallback:_,loading:i}),_=(H=null)=>{Ke({pagination:m,filter:p,props:H,rows:o,url:route("admin.user-role.data"),loading:i,tableRef:n})},V=H=>ee.get(route("admin.user-role.detail",{id:H.id})),{protectClick:q}=At(),x=q(V),R=Z(()=>s.screen.gt.sm?f:f.filter(H=>H.name==="name"||H.name==="action"));return(H,O)=>{const U=X("i-head"),I=X("authenticated-layout");return d(),w(G,null,[e(U,{title:Ml}),e(I,null,Be({title:l(()=>[v(r(Ml))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=F=>u.value=!u.value)},null,8,["icon"]),H.$can("admin.user-role.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=F=>a(ee).get(H.route("admin.user-role.add")))})):k("",!0)]),default:l(()=>[t("div",i$,[e(Ue,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":O[4]||(O[4]=F=>m.value=F),filter:p.search,loading:i.value,columns:R.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:a(b)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:F,message:N,filter:h})=>[t("div",d$,[t("span",null,r(N)+" "+r(h?" with term "+h:""),1)])]),body:l(F=>[e(Pe,{props:F,class:"cursor-pointer",onClick:J(N=>a(x)(F.row,N),["stop"])},{default:l(()=>[e(W,{key:"name",props:F,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.lt.md?(d(),D(T,{key:0,name:"person"})):k("",!0),v(" "+r(F.row.name),1)])]),_:2},1032,["props"]),e(W,{key:"description",props:F,class:"wrap-column"},{default:l(()=>[v(r(F.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:F},{default:l(()=>[t("div",u$,[H.$can("admin.user-role.add")||H.$can("admin.user-role.edit")||H.$can("admin.user-role.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[3]||(O[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[H.$can("admin.user-role.add")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(N=>a(ee).get(H.route("admin.user-role.duplicate",F.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(z,null,{default:l(()=>O[5]||(O[5]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),H.$can("admin.user-role.edit")?ae((d(),D(oe,{key:1,clickable:"",onClick:J(N=>a(ee).get(H.route("admin.user-role.edit",F.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>O[6]||(O[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),H.$can("admin.user-role.delete")?ae((d(),D(oe,{key:2,onClick:J(N=>y(F.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>O[7]||(O[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",r$,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":O[2]||(O[2]=F=>p.search=F),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},c$=Object.freeze(Object.defineProperty({__proto__:null,default:m$},Symbol.toStringTag,{value:"Module"})),p$={class:"q-gutter-sm"},f$={class:"q-gutter-sm"},g$={class:"row justify-center"},b$={class:"col col-md-6 q-pa-xs"},v$={class:"row"},y$={class:"detail"},_$={key:0},k$={key:0},w$={key:1},h$={key:2},Nl="Rincian Pengguna",$$={__name:"Detail",setup(c){const s=ge();return(u,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return d(),w(G,null,[e(i,{title:Nl}),e(g,{"show-drawer-button":!0},{title:l(()=>[v(r(Nl))]),"left-button":l(()=>[t("div",p$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.user.index")))})])]),"right-button":l(()=>[t("div",f$,[u.$can("admin.user.edit")&&a(s).props.data.id!=a(s).props.auth.user.id?(d(),D(E,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:o[1]||(o[1]=b=>u.$inertia.get(u.route("admin.user.edit",{id:a(s).props.data.id})))})):k("",!0)])]),default:l(()=>[t("div",g$,[t("div",b$,[t("div",v$,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>{var b,p;return[o[21]||(o[21]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),t("table",y$,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"125px"}},"ID Pengguna",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.username),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Nama Pengguna",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Jenis Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.USER_TYPES[a(s).props.data.type]),1)]),a(s).props.data.roles.length>0?(d(),w("tr",_$,[o[8]||(o[8]=t("td",null,"Peran Pengguna",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,[(d(!0),w(G,null,Ne(a(s).props.data.roles,(m,f)=>(d(),w("div",{key:m.id,class:"inline"},[e(n,{href:u.route("admin.user-role.detail",{id:m.id})},{default:l(()=>[v(r(m.name),1)]),_:2},1032,["href"]),f<a(s).props.data.roles.length-1?(d(),w("span",k$,", ")):k("",!0)]))),128))])])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Status",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Dibuat",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.created_at))+" oleh "+r(((b=a(s).props.data.creator)==null?void 0:b.name)??"Sistem")+" ("+r(((p=a(s).props.data.creator)==null?void 0:p.username)??"system")+") ",1)]),a(s).props.data.updated_at?(d(),w("tr",w$,[o[14]||(o[14]=t("td",null,"Diperbarui",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,[v(r(a(ve)(a(s).props.data.updated_at))+" ",1),a(s).props.data.updater?(d(),w(G,{key:0},[v(" oleh "+r(a(s).props.data.updater.name)+" ("+r(a(s).props.data.updater.username)+") ",1)],64)):k("",!0)])])):k("",!0),t("tr",null,[o[16]||(o[16]=t("td",null,"Terakhir login",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.last_login_datetime?u.$dayjs(a(s).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),a(s).props.data.last_activity_datetime?(d(),w("tr",h$,[o[19]||(o[19]=t("td",null,"Aktifitas Terakhir",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,[v(r(u.$dayjs(a(s).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),o[18]||(o[18]=t("br",null,null,-1)),v(r(a(s).props.data.last_activity_description),1)])])):k("",!0)])])]}),_:1})]),_:1})])])])]),_:1})],64)}}},x$=Object.freeze(Object.defineProperty({__proto__:null,default:$$},Symbol.toStringTag,{value:"Module"}));function S$(c){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(c)}const V$={class:"q-gutter-sm"},q$={class:"row justify-center"},C$={class:"col col-md-6 q-pa-xs"},T$={__name:"Editor",setup(c){const s=tt(window.CONSTANTS.USER_TYPES),u=ge(),o=u.props.roles,i=u.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=C(!u.props.data.id),g=u.props.data.roles,b=Array.isArray(g)?g.map(f=>f.id):[],p=Qe({id:u.props.data.id,name:u.props.data.name,username:u.props.data.username,password:u.props.data.id?null:"12345",type:u.props.data.type?u.props.data.type:s[0].value,active:!!u.props.data.active,roles:b}),m=()=>nt({form:p,url:route("admin.user.save")});return(f,y)=>{const _=X("i-head"),V=X("authenticated-layout");return d(),w(G,null,[e(_,{title:a(i)},null,8,["title"]),e(V,{"show-drawer-button":!0},{title:l(()=>[v(r(a(i)),1)]),"left-button":l(()=>[t("div",V$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=q=>f.$goBack())})])]),default:l(()=>[t("div",q$,[t("div",C$,[e(Je,{class:"row",onSubmit:J(m,["prevent"])},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[1]||(y[1]=q=>a(p).id=q)},null,512),[[yt,a(p).id]]),e(ne,{autofocus:"",modelValue:a(p).username,"onUpdate:modelValue":y[2]||(y[2]=q=>a(p).username=q),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:a(p).processing,error:!!a(p).errors.username,"error-message":a(p).errors.username,rules:[q=>q&&q.length>0||"Username harus diisi.",q=>a(S$)(q)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ne,{modelValue:a(p).name,"onUpdate:modelValue":y[3]||(y[3]=q=>a(p).name=q),modelModifiers:{trim:!0},label:"Nama",error:!!a(p).errors.name,disable:a(p).processing,"error-message":a(p).errors.name,rules:[q=>q&&q.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(p).password,"onUpdate:modelValue":y[5]||(y[5]=q=>a(p).password=q),label:"Kata Sandi","lazy-rules":"",disable:a(p).processing,error:!!a(p).errors.password,"error-message":a(p).errors.password,"hide-bottom-space":"",type:n.value?"text":"password"},{append:l(()=>[e(E,{dense:"",flat:"",round:"",onClick:y[4]||(y[4]=q=>n.value=!n.value)},{default:l(()=>[e(T,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","disable","error","error-message","type"]),e(ce,{modelValue:a(p).type,"onUpdate:modelValue":y[6]||(y[6]=q=>a(p).type=q),label:"Jenis Akun",options:a(s),"map-options":"","emit-value":"","lazy-rules":"",disable:a(p).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(p).errors.type,"error-message":a(p).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),a(p).type=="standard_user"?(d(),D(ce,{key:0,modelValue:a(p).roles,"onUpdate:modelValue":y[7]||(y[7]=q=>a(p).roles=q),label:"Peran",options:a(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:a(p).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!a(p).errors.roles||!!a(p).errors["roles.0"],"error-message":a(p).errors.roles||a(p).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(ya,{modelValue:a(p).active,"onUpdate:modelValue":y[8]||(y[8]=q=>a(p).active=q),disable:a(p).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(p).processing,onClick:m},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",class:"text-black",disable:a(p).processing,onClick:y[9]||(y[9]=q=>f.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},P$=Object.freeze(Object.defineProperty({__proto__:null,default:T$},Symbol.toStringTag,{value:"Module"})),R$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},O$={class:"q-pa-xs"},I$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},U$={class:"elipsis",style:{"max-width":"200px"}},D$={class:"flex justify-end"},Bl="Pengguna",j$={__name:"Index",setup(c){const s=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.USER_TYPES)],u=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=ge(),i=xe(),n=o.props.auth.user,g=C([]),b=C(!0),p=C(!1),m=Ie({type:"all",roles:[],status:"active",search:""}),f=o.props.roles.map(h=>({value:h.id,label:h.name})),y=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),_=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];we(()=>{q()});const V=()=>q(),q=(h=null)=>Ke({pagination:y,props:h,rows:g,loading:b,filter:m,url:route("admin.user.data"),tableRef:I}),x=h=>ot({url:route("admin.user.delete",h.id),message:`Hapus pengguna ${h.username}?`,fetchItemsCallback:q,loading:b}),R=Z(()=>i.screen.gt.sm?_:_.filter(h=>h.name==="username"||h.name==="action")),H=h=>ee.get(route("admin.user.detail",h.id)),{protectClick:O}=At(),U=O(H),I=C(null),F=C(null),N=et(F);return(h,j)=>{const P=X("i-head"),$=X("authenticated-layout");return d(),w(G,null,[e(P,{title:Bl}),e($,null,Be({title:l(()=>[v(r(Bl))]),"right-button":l(()=>[e(E,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:j[0]||(j[0]=A=>p.value=!p.value)},null,8,["icon"]),h.$can("admin.user.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:j[1]||(j[1]=A=>a(ee).get(h.route("admin.user.add")))})):k("",!0)]),default:l(()=>[t("div",O$,[e(Ue,{ref_key:"tableRef",ref:I,class:"full-height-table",style:He({height:a(N)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":j[7]||(j[7]=A=>y.value=A),filter:m.search,loading:b.value,columns:R.value,rows:g.value,"rows-per-page-options":[10,25,50],onRequest:q,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:A,message:B,term:S})=>[t("div",I$,[t("span",null,r(B)+" "+r(S?" with term "+S:""),1)])]),body:l(A=>[e(Pe,{props:A,class:Ve([A.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(B=>a(U)(A.row,B),["stop"])},{default:l(()=>[e(W,{key:"username",props:A},{default:l(()=>[t("div",null,[a(i).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[e(T,{name:"person",class:"inline-icon"}),j[8]||(j[8]=v(" Username: "))],64)),v(" "+r(A.row.username),1)]),a(i).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[t("div",null,[e(T,{name:"person",class:"inline-icon"}),v(" Nama: "+r(A.row.name),1)]),t("div",U$,[e(T,{name:"group",class:"inline-icon"}),j[9]||(j[9]=v(" Jenis Akun: ")),t("span",null,r(h.$CONSTANTS.USER_TYPES[A.row.type]),1)]),t("div",null,[e(T,{name:"group",class:"inline-icon"}),v(" Peran: "+r(A.row.roles.map(B=>B.name).join(",")),1)])],64))]),_:2},1032,["props"]),e(W,{key:"name",props:A},{default:l(()=>[v(r(A.row.name),1)]),_:2},1032,["props"]),e(W,{key:"role",props:A,align:"center"},{default:l(()=>[t("span",null,r(h.$CONSTANTS.USER_TYPES[A.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"action",props:A},{default:l(()=>[t("div",D$,[h.$can("admin.user.add")||h.$can("admin.user.edit")||h.$can("admin.user.delete")?(d(),D(E,{key:0,disable:A.row.id==a(n).id||A.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:j[6]||(j[6]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[h.$can("admin.user.add")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(B=>a(ee).get(h.route("admin.user.duplicate",A.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(z,null,{default:l(()=>j[10]||(j[10]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),h.$can("admin.user.edit")?ae((d(),D(oe,{key:1,clickable:"",onClick:J(B=>a(ee).get(h.route("admin.user.edit",A.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>j[11]||(j[11]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),h.$can("admin.user.delete")?ae((d(),D(oe,{key:2,onClick:J(B=>x(A.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>j[12]||(j[12]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[p.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:F},{default:l(()=>[t("div",R$,[e(ce,{modelValue:m.type,"onUpdate:modelValue":[j[2]||(j[2]=A=>m.type=A),V],class:"custom-select col-xs-12 col-sm-2",options:s,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:m.status,"onUpdate:modelValue":[j[3]||(j[3]=A=>m.status=A),V],class:"custom-select col-xs-12 col-sm-2",options:u,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:m.roles,"onUpdate:modelValue":[j[4]||(j[4]=A=>m.roles=A),V],class:"custom-select col-xs-12 col-sm-2",options:a(f),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":j[5]||(j[5]=A=>m.search=A),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},E$=Object.freeze(Object.defineProperty({__proto__:null,default:j$},Symbol.toStringTag,{value:"Module"})),A$={class:"q-gutter-sm"},M$={class:"col col-lg-6 q-pa-xs"},N$={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},B$={class:"row q-col-gutter-sm q-mb-md"},F$={key:0},z$={class:"text-bold"},L$={key:0},K$={class:"text-caption text-grey-8"},H$={key:1},Fl="Buat Penyesuaian Stok",Y$={__name:"Create",setup(c){const s=ge(),u=C(!1),o=s.props.products,{filteredCategories:i,filterCategories:n}=ja(s.props.categories),{filteredSuppliers:g,filterSupplierFn:b}=Ea(s.props.suppliers),p=C({search:null,category_id:null,supplier_id:null}),m=C([]),f=Qe({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),y=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(H,O)=>K(H)+" "+O.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],_=tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),V=Z(()=>o.filter(H=>{let O=!0;if(u.value&&!m.value.find(U=>U.id===H.id))return!1;if(p.value.search){const U=p.value.search.toLowerCase();O=H.name.toLowerCase().includes(U)||H.description.toLowerCase().includes(U)||H.barcode&&H.barcode.toLowerCase().includes(U)}return O&&p.value.category_id&&(O=H.category_id===p.value.category_id),O&&p.value.supplier_id&&(O=H.supplier_id===p.value.supplier_id),O})),q=()=>{xt.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{f.product_ids=m.value.map(H=>H.id),da(f,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:f,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},x=xe(),R=Z(()=>x.screen.gt.sm?y:y.filter(H=>H.name==="name"));return(H,O)=>{const U=X("i-head"),I=X("authenticated-layout");return d(),w(G,null,[e(U,{title:Fl}),e(I,{"show-drawer-button":!0},{title:l(()=>[v(r(Fl))]),"left-button":l(()=>[t("div",A$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:O[0]||(O[0]=F=>a(ee).get(H.route("admin.stock-adjustment.index")))})])]),"right-button":l(()=>[e(E,{icon:"cancel",disable:a(f).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:O[1]||(O[1]=F=>a(ee).get(H.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(E,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:a(f).processing||m.value.length==0,class:"q-ml-sm",onClick:q},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",M$,[e(Je,{class:"row",onSubmit:J(q,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-sm"},{default:l(()=>{var F,N,h;return[O[10]||(O[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Kt,{modelValue:a(f).datetime,"onUpdate:modelValue":O[2]||(O[2]=j=>a(f).datetime=j),label:"Waktu",error:!!a(f).errors.datetime,disable:a(f).processing,"error-message":a(f).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:a(f).type,"onUpdate:modelValue":O[3]||(O[3]=j=>a(f).type=j),options:a(_),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(f).errors.type,disable:a(f).processing,"map-options":"","emit-value":"","error-message":a(f).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(ne,{modelValue:a(f).notes,"onUpdate:modelValue":O[4]||(O[4]=j=>a(f).notes=j),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(f).processing,error:!!a(f).errors.notes,"error-message":a(f).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),m.value.length===0||(F=a(s).props.errors)!=null&&F.product_ids?(d(),w("div",N$,[m.value.length===0?(d(),w(G,{key:0},[v(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(N=a(s).props.errors)!=null&&N.product_ids?(d(),w(G,{key:1},[v(r((h=a(s).props.errors)==null?void 0:h.product_ids),1)],64)):k("",!0)])):k("",!0),O[11]||(O[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",B$,[e(ne,{modelValue:p.value.search,"onUpdate:modelValue":O[5]||(O[5]=j=>p.value.search=j),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(ce,{modelValue:p.value.category_id,"onUpdate:modelValue":O[6]||(O[6]=j=>p.value.category_id=j),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(i),"map-options":"",dense:"","emit-value":"",onFilter:a(n),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(ce,{modelValue:p.value.supplier_id,"onUpdate:modelValue":O[7]||(O[7]=j=>p.value.supplier_id=j),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:a(g),"map-options":"",dense:"","emit-value":"",onFilter:a(b),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:O[8]||(O[8]=j=>u.value=!u.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},r(u.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:R.value,rows:V.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:m.value,"onUpdate:selected":O[9]||(O[9]=j=>m.value=j)},{"body-cell-name":l(j=>[e(W,{props:j},{default:l(()=>[a(x).screen.lt.md?(d(),w("div",F$,[t("div",z$,r(j.row.name),1),j.row.category?(d(),w("div",L$,r(j.row.category.name),1)):k("",!0),t("div",K$,r(a(K)(j.row.stock))+" "+r(j.row.uom),1)])):(d(),w("div",H$,r(j.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},W$=Object.freeze(Object.defineProperty({__proto__:null,default:Y$},Symbol.toStringTag,{value:"Module"})),Q$={class:"q-gutter-sm"},J$={class:"q-gutter-sm"},G$={class:"row justify-center"},X$={class:"col col-lg-8 q-pa-sm"},Z$={class:"row"},ex={class:"detail"},tx={key:0},ax={key:1},lx={class:"text-grey-9"},ox={__name:"Detail",setup(c){const s=ge(),u=`Rincian #${s.props.data.code}`,o=s.props.details,i=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:p=>K(p)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:p=>K(p)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:p=>K(p)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],n=xe(),g=Z(()=>n.screen.gt.sm?i:i.filter(p=>p.name==="no")),b=()=>{window.open(route("admin.stock-adjustment.print",{id:s.props.data.id}),"_blank")};return(p,m)=>{const f=X("i-head"),y=X("i-link"),_=X("authenticated-layout");return d(),w(G,null,[e(f,{title:u}),e(_,{"show-drawer-button":!0},{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",Q$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=V=>p.$inertia.get(p.route("admin.stock-adjustment.index")))})])]),"right-button":l(()=>[t("div",J$,[e(E,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[1]||(m[1]=V=>b())})])]),default:l(()=>[t("div",G$,[t("div",X$,[t("div",Z$,[e(fe,{square:"",flat:"",bordered:"",class:"q-card col"},{default:l(()=>[e(le,null,{default:l(()=>[m[22]||(m[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",ex,[t("tbody",null,[t("tr",null,[m[2]||(m[2]=t("td",{style:{width:"120px"}},"Kode",-1)),m[3]||(m[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+r(a(s).props.data.code),1)]),t("tr",null,[m[4]||(m[4]=t("td",null,"Jenis",-1)),m[5]||(m[5]=t("td",null,":",-1)),t("td",null,r(p.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[a(s).props.data.type]),1)]),t("tr",null,[m[6]||(m[6]=t("td",null,"Status",-1)),m[7]||(m[7]=t("td",null,":",-1)),t("td",null,r(p.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[a(s).props.data.status]),1)]),t("tr",null,[m[8]||(m[8]=t("td",null,"Waktu",-1)),m[9]||(m[9]=t("td",null,":",-1)),t("td",null,r(a(ve)(a(s).props.data.datetime)),1)]),a(s).props.data.created_at?(d(),w("tr",tx,[m[11]||(m[11]=t("td",null,"Dibuat Oleh",-1)),m[12]||(m[12]=t("td",null,":",-1)),t("td",null,[a(s).props.data.creator?(d(),w(G,{key:0},[e(y,{href:p.route("admin.user.detail",{id:a(s).props.data.creator})},{default:l(()=>[v(r(a(s).props.data.creator.username)+" - "+r(a(s).props.data.creator.name),1)]),_:1},8,["href"]),m[10]||(m[10]=v(" - "))],64)):k("",!0),v(" "+r(a(ve)(a(s).props.data.created_at)),1)])])):k("",!0),a(s).props.data.updater?(d(),w("tr",ax,[m[14]||(m[14]=t("td",null,"Diperbarui oleh",-1)),m[15]||(m[15]=t("td",null,":",-1)),t("td",null,[a(s).props.data.updater?(d(),w(G,{key:0},[e(y,{href:p.route("admin.user.detail",{id:a(s).props.data.updater})},{default:l(()=>[v(r(a(s).props.data.updater.username)+" - "+r(a(s).props.data.updater.name),1)]),_:1},8,["href"]),m[13]||(m[13]=v(" - "))],64)):k("",!0),v(" "+r(a(ve)(a(s).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[m[16]||(m[16]=t("td",null,"Total Modal",-1)),m[17]||(m[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:Ve(a(s).props.data.total_cost<0?"text-red-10":a(s).props.data.total_cost>0?"text-green-10":"")},r(a(oa)(a(s).props.data.total_cost)),3)])]),t("tr",null,[m[18]||(m[18]=t("td",null,"Total Harga",-1)),m[19]||(m[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:Ve(a(s).props.data.total_price<0?"text-red-10":a(s).props.data.total_price>0?"text-green-10":"")},r(a(oa)(a(s).props.data.total_price)),3)])]),t("tr",null,[m[20]||(m[20]=t("td",null,"Catatan",-1)),m[21]||(m[21]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.notes),1)])])])]),_:1}),e(le,null,{default:l(()=>[m[28]||(m[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Ue,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:g.value,rows:a(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":l(V=>[e(W,{props:V},{default:l(()=>[a(n).screen.lt.md?(d(),w(G,{key:1},[t("div",lx,[t("b",null,"#"+r(V.rowIndex+1),1),m[23]||(m[23]=v(" - ")),e(y,{href:p.route("admin.product.detail",{id:V.row.product_id})},{default:l(()=>[v(r(V.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[v(" Stok Lama: "+r(a(K)(V.row.old_quantity))+" "+r(V.row.uom),1),m[25]||(m[25]=t("br",null,null,-1)),v(" Stok Baru: "+r(a(K)(V.row.new_quantity))+" "+r(V.row.uom),1),m[26]||(m[26]=t("br",null,null,-1)),t("div",{class:Ve(V.row.balance<0?"text-red-10":V.row.balance>0?"text-green-10":"")},[v(" Selisih: "+r((V.row.balance>0?"+":"")+a(K)(V.row.balance))+" "+r(V.row.uom),1),m[24]||(m[24]=t("br",null,null,-1)),v(" (Rp. "+r(a(K)(V.row.subtotal_cost))+" / Rp. "+r(a(K)(V.row.subtotal_price))+") ",1)],2),m[27]||(m[27]=t("br",null,null,-1)),v(" "+r(V.row.notes),1)])],64)):(d(),w(G,{key:0},[v(r(V.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":l(V=>[e(W,{props:V},{default:l(()=>[e(y,{href:p.route("admin.product.detail",{id:V.row.product_id})},{default:l(()=>[v(r(V.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":l(V=>[e(W,{props:V},{default:l(()=>[t("div",{class:Ve(V.row.balance<0?"text-red-10":V.row.balance>0?"text-green-10":"")},r((V.row.balance>0?"+":"")+a(K)(V.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":l(V=>[e(W,{props:V},{default:l(()=>[t("div",{class:Ve(V.row.balance<0?"text-red-10":V.row.balance>0?"text-green-10":"")},r(a(K)(V.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":l(V=>[e(W,{props:V},{default:l(()=>[t("div",{class:Ve(V.row.balance<0?"text-red-10":V.row.balance>0?"text-green-10":"")},r(a(K)(V.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},nx=Object.freeze(Object.defineProperty({__proto__:null,default:ox},Symbol.toStringTag,{value:"Module"})),sx={class:"q-gutter-sm"},rx={class:"col col-lg-6 q-pa-xs"},ix={class:"text-bold"},dx={key:0},ux={class:"text-caption text-grey-8"},zl="Penyesuaian Stok",mx={__name:"Editor",setup(c){const s=xe(),u=ge(),o=Qe({id:u.props.item.id,type:u.props.item.type,datetime:new Date(u.props.item.datetime),notes:u.props.item.notes,action:"save",details:[]}),i=tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),n=C(u.props.details.map(f=>(typeof f.new_quantity=="string"&&(f.new_quantity=parseFloat(f.new_quantity)),f))),g=f=>{const y=()=>{o.action=f,o.details=n.value.map(_=>({id:_.id,new_quantity:_.new_quantity})),da(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),nt({form:o,url:route("admin.stock-adjustment.save")})};f==="close"||f==="cancel"?xt.create({title:"Konfirmasi",message:f==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{y()}).onCancel(()=>{}):y()},b=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:f=>K(f)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:f=>K(f)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(f,y)=>K(y.new_quantity-y.old_quantity)}],p=Z(()=>s.screen.gt.sm?b:b.filter(f=>f.name==="product_name"||f.name==="new_quantity")),m=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(f,y)=>{const _=X("i-head"),V=X("authenticated-layout");return d(),w(G,null,[e(_,{title:zl}),e(V,{"show-drawer-button":!0},{title:l(()=>[v(r(zl))]),"left-button":l(()=>[t("div",sx,[a(s).screen.gt.sm?(d(),D(E,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=q=>f.$inertia.get(f.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":l(()=>[e(E,{icon:"save",onClick:y[1]||(y[1]=q=>g("save")),disable:a(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(E,{icon:"check",onClick:y[2]||(y[2]=q=>g("close")),disable:a(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),f.$can("admin.product.import")||f.$can("admin.product:view-cost")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:y[5]||(y[5]=J(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[ae((d(),D(oe,{clickable:"",onClick:y[3]||(y[3]=q=>m())},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"print"})]),_:1}),e(z,null,{default:l(()=>y[10]||(y[10]=[v(" Cetak Kartu Stok")])),_:1})]),_:1})),[[ie],[pe]]),ae((d(),D(oe,{clickable:"",onClick:y[4]||(y[4]=J(q=>g("cancel"),["stop"]))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"cancel",color:"red"})]),_:1}),e(z,{class:"text-red"},{default:l(()=>y[11]||(y[11]=[v("Batalkan")])),_:1})]),_:1})),[[ie],[pe]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",rx,[e(Je,{class:"row",onSubmit:J(g,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,null,{default:l(()=>y[12]||(y[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":y[6]||(y[6]=q=>a(o).id=q)},null,512),[[yt,a(o).id]]),e(Kt,{modelValue:a(o).datetime,"onUpdate:modelValue":y[7]||(y[7]=q=>a(o).datetime=q),label:"Waktu",error:!!a(o).errors.datetime,disable:a(o).processing,"error-message":a(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:a(o).type,"onUpdate:modelValue":y[8]||(y[8]=q=>a(o).type=q),options:a(i),label:"Jenis Penyesuaian",class:"custom-select",error:!!a(o).errors.type,disable:a(o).processing,"map-options":"","emit-value":"","error-message":a(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(ne,{modelValue:a(o).notes,"onUpdate:modelValue":y[9]||(y[9]=q=>a(o).notes=q),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.notes,"error-message":a(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-pa-xs"},{default:l(()=>[e(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:p.value,rows:n.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":l(q=>[e(W,{props:q},{default:l(()=>[t("div",ix,r(q.row.product_name),1),a(s).screen.lt.md?(d(),w("div",dx,[t("div",ux,[v(" Tercatat: "+r(a(K)(q.row.old_quantity))+" ",1),y[13]||(y[13]=t("br",null,null,-1)),v(" Selisih: "+r(a(K)(q.row.new_quantity-q.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":l(q=>[e(W,{props:q,class:"text-center"},{default:l(()=>[e(Ee,{modelValue:q.row[q.col.name],"onUpdate:modelValue":x=>q.row[q.col.name]=x,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},cx=Object.freeze(Object.defineProperty({__proto__:null,default:mx},Symbol.toStringTag,{value:"Module"}));function px(){const c=Tt();if(!c)throw new Error("useCan must be called within a component setup function.");return s=>c.proxy.$can(s)}const fx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},gx={class:"q-pa-xs"},bx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},vx={key:0,class:"flex q-gutter-xs"},yx={class:"flex q-col-gutter-xs"},_x={key:0},kx={key:1},wx={key:0},hx={class:"flex justify-end"},Ll="Penyesuaian Stok",$x={__name:"Index",setup(c){const s=C([]),u=C(!0),o=C(!1),i=C(null),n=C(null),g=et(n),b=zt(),p=Lt(),m=[{label:"Semua Tahun",value:"all"},{label:`${b}`,value:b},...Pt(b-2,b-1).reverse()],f=[{value:"all",label:"Semua Bulan"},...Rt()],y=Ie({search:"",year:b,month:p,status:"all",type:"all",...Le()}),_=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],V=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],q=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),x=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];we(()=>{H()});const R=j=>ot({message:`Hapus Penyesuaian Stok #${j.code}?`,url:route("admin.stock-adjustment.delete",j.id),fetchItemsCallback:H,loading:u}),H=(j=null)=>Ke({pagination:q,filter:y,props:j,rows:s,url:route("admin.stock-adjustment.data"),loading:u,tableRef:i}),O=()=>{H()},U=j=>{j.status=="draft"?ee.get(route("admin.stock-adjustment.editor",j.id)):ee.get(route("admin.stock-adjustment.detail",j.id))},{protectClick:I}=At(),F=I(U),N=xe(),h=Z(()=>{let j=x;return px()||(j=j.filter(P=>P.name!=="cost")),N.screen.gt.sm?j:j.filter(P=>P.name==="id"||P.name==="action")});return(j,P)=>{const $=X("i-head"),A=X("authenticated-layout");return d(),w(G,null,[e($,{title:Ll}),e(A,null,Be({"right-button":l(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=B=>o.value=!o.value)},null,8,["icon"]),j.$can("admin.stock-adjustment.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=B=>a(ee).get(j.route("admin.stock-adjustment.create")))})):k("",!0)]),title:l(()=>[v(r(Ll))]),default:l(()=>[t("div",gx,[e(Ue,{ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:q.value,"onUpdate:pagination":P[8]||(P[8]=B=>q.value=B),filter:y.search,loading:u.value,columns:h.value,rows:s.value,"rows-per-page-options":[10,25,50],style:He({height:a(g)}),onRequest:H,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:B,message:S,filter:M})=>[t("div",bx,[t("span",null,r(S)+" "+r(M?" with term "+M:""),1)])]),body:l(B=>[e(Pe,{props:B,onClick:J(S=>a(F)(B.row,S),["stop"]),class:"cursor-pointer"},{default:l(()=>[e(W,{key:"id",props:B},{default:l(()=>[a(N).screen.lt.md?(d(),w(G,{key:1},[t("div",yx,[t("div",null,"#"+r(B.row.code),1),t("div",null,[e(T,{name:"history"}),v(" "+r(a(ve)(B.row.datetime)),1)]),e(Zl,{dense:"",size:"sm",color:B.row.status==="draft"?"orange":B.row.status==="closed"?"green":B.row.status==="canceled"?"red":"",icon:B.row.status==="draft"?"emergency":B.row.status==="closed"?"check":B.row.status==="canceled"?"close":""},{default:l(()=>[v(r(j.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[B.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(T,{name:"category"}),v(" "+r(j.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[B.row.type]),1)]),B.row.created_by?(d(),w("div",_x,[e(T,{name:"person"}),P[9]||(P[9]=v(" Dibuat: ")),t("b",null,r(B.row.created_by.username),1),e(T,{name:"history"}),v(" "+r(a(ve)(B.row.created_at)),1)])):k("",!0),B.row.updated_by?(d(),w("div",kx,[e(T,{name:"person"}),P[10]||(P[10]=v(" Diperbarui: ")),t("b",null,r(B.row.updated_by.username),1),e(T,{name:"history"}),v(" "+r(a(ve)(B.row.updated_at)),1)])):k("",!0),t("div",{class:Ve(B.row.total_cost<0?"text-red-10":B.row.total_cost>0?"text-green-10":"")},[e(T,{name:"money"}),j.$can("admin.product:view-cost")?(d(),w("span",wx,"Rp. "+r(a(K)(B.row.total_cost))+" / ",1)):k("",!0),v(" Rp. "+r(a(K)(B.row.total_price)),1)],2)],64)):(d(),w("div",vx,"#"+r(B.row.code),1))]),_:2},1032,["props"]),e(W,{key:"datetime",props:B},{default:l(()=>[v(r(a(ve)(B.row.datetime)),1)]),_:2},1032,["props"]),e(W,{key:"status",props:B,class:"text-center"},{default:l(()=>[v(r(j.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[B.row.status]),1)]),_:2},1032,["props"]),e(W,{key:"type",props:B},{default:l(()=>[v(r(j.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[B.row.type]),1)]),_:2},1032,["props"]),e(W,{key:"total_cost",props:B},{default:l(()=>[j.$can("admin.product:view-cost")?(d(),w("div",{key:0,class:Ve(B.row.total_cost<0?"text-red-10":B.row.total_cost>0?"text-green-10":"")},r(a(K)(B.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"total_price",props:B},{default:l(()=>[t("div",{class:Ve(B.row.total_price<0?"text-red-10":B.row.total_price>0?"text-green-10":"")},r(a(K)(B.row.total_price)),3)]),_:2},1032,["props"]),e(W,{key:"notes",props:B},{default:l(()=>[v(r(B.row.notes),1)]),_:2},1032,["props"]),e(W,{key:"action",props:B},{default:l(()=>[t("div",hx,[j.$can("admin.stock-adjustment.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[7]||(P[7]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[j.$can("admin.stock-adjustment.delete")?ae((d(),D(oe,{key:0,onClick:J(S=>R(B.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>P[11]||(P[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:l(()=>[t("div",fx,[e(ce,{modelValue:y.year,"onUpdate:modelValue":[P[2]||(P[2]=B=>y.year=B),O],options:m,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),y.year!="all"?(d(),D(ce,{key:0,modelValue:y.month,"onUpdate:modelValue":[P[3]||(P[3]=B=>y.month=B),O],options:f,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:y.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:y.status,"onUpdate:modelValue":[P[4]||(P[4]=B=>y.status=B),O],options:_,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:y.type,"onUpdate:modelValue":[P[5]||(P[5]=B=>y.type=B),O],options:V,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":P[6]||(P[6]=B=>y.search=B),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},xx=Object.freeze(Object.defineProperty({__proto__:null,default:$x},Symbol.toStringTag,{value:"Module"})),Sx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Vx={class:"q-pa-xs"},qx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Kl="Riwayat Stok",Cx={__name:"Index",setup(c){ge();const s=C(null),u=C(null),o=et(u),i=zt(),n=Lt(),g=[{label:"Semua Tahun",value:"all"},{label:`${i}`,value:i},...Pt(i-2,i-1).reverse()],b=[{value:"all",label:"Semua Bulan"},...Rt()],p=[{value:"all",label:"Semua"},...tt(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],m=xe(),f=C(!1),y=C([]),_=C(!0),V=Ie({type:"all",search:"",year:i,month:n,...Le()}),q=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let x=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];we(()=>{const I=new URLSearchParams(window.location.search).get("page");I&&(q.value.page=parseInt(I)),R()});const R=(U=null)=>{Ke({pagination:q,filter:V,props:U,rows:y,url:route("admin.stock-movement.data"),loading:_,tableRef:s})},H=()=>{R()},O=Z(()=>m.screen.lt.sm?x.filter(U=>U.name==="id"||U.name==="quantity"):x);return(U,I)=>{const F=X("i-head"),N=X("authenticated-layout");return d(),w(G,null,[e(F,{title:Kl}),e(N,null,Be({title:l(()=>[v(r(Kl))]),"right-button":l(()=>[e(E,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=h=>f.value=!f.value)},null,8,["icon"])]),default:l(()=>[t("div",Vx,[e(Ue,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:q.value,"onUpdate:pagination":I[5]||(I[5]=h=>q.value=h),filter:V.search,loading:_.value,columns:O.value,rows:y.value,"rows-per-page-options":[10,25,50],style:He({height:a(o)}),onRequest:R,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:h,message:j,filter:P})=>[t("div",qx,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:l(h=>[e(Pe,{props:h},{default:l(()=>[e(W,{key:"id",props:h},{default:l(()=>[t("div",null,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(h.row.code),1)]),t("div",null,[e(T,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(a(ve)(h.row.created_at)),1)]),t("div",null,[e(bt,null,{default:l(()=>[v(r(U.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[h.row.ref_type]),1)]),_:2},1024)]),a(m).screen.lt.sm?(d(),w(G,{key:0},[t("div",null,[e(T,{name:"token",class:"inline-icon"}),v(" "+r(h.row.product.name),1)]),t("div",{class:Ve(h.row.quantity>0?"text-positive":"text-negative")},[e(T,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(a(K)(h.row.quantity_before))+" "+r(h.row.uom)+"  "+r(a(K)(h.row.quantity_after))+" "+r(h.row.uom),1)],2),e($e,{text:h.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"product",props:h},{default:l(()=>[v(r(h.row.product.name),1)]),_:2},1032,["props"]),e(W,{key:"quantity_before",props:h},{default:l(()=>[v(r(a(K)(h.row.quantity_before)),1)]),_:2},1032,["props"]),e(W,{key:"quantity",props:h,class:Ve(h.row.quantity>0?"text-positive":"text-negative")},{default:l(()=>[v(r(a($t)(h.row.quantity))+" ",1),a(m).screen.lt.sm?(d(),w(G,{key:0},[v(r(h.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(W,{key:"quantity_after",props:h},{default:l(()=>[v(r(a(K)(h.row.quantity_after)),1)]),_:2},1032,["props"]),e(W,{key:"uom",props:h},{default:l(()=>[v(r(h.row.uom),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:h},{default:l(()=>[e($e,{text:h.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[f.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:u},{default:l(()=>[t("div",Sx,[e(ce,{modelValue:V.year,"onUpdate:modelValue":[I[1]||(I[1]=h=>V.year=h),H],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),V.year!="all"?(d(),D(ce,{key:0,modelValue:V.month,"onUpdate:modelValue":[I[2]||(I[2]=h=>V.month=h),H],options:b,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:V.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:V.ref_type,"onUpdate:modelValue":[I[3]||(I[3]=h=>V.ref_type=h),H],options:p,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:V.search,"onUpdate:modelValue":I[4]||(I[4]=h=>V.search=h),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Tx=Object.freeze(Object.defineProperty({__proto__:null,default:Cx},Symbol.toStringTag,{value:"Module"})),Px={class:"detail"},Rx={key:0},Ox={key:1},Ix={key:2},Ux={key:3},Dx={key:4},jx={key:5},Ex={key:6},Ax={key:0,class:"q-pt-md"},dn={__name:"MainInfoTab",setup(c){const s=ge(),u=()=>{ot({message:`Hapus Pemasok ${s.props.data.name}?`,url:route("admin.supplier.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.supplier.index"))}})};return(o,i)=>(d(),w(G,null,[t("table",Px,[t("tbody",null,[i[22]||(i[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(a(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Nama",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.name),1)]),t("tr",null,[t("td",null,r(a(s).props.data.balance<0?"Utang":"Utang / Piutang"),1),i[5]||(i[5]=t("td",null,":",-1)),t("td",{class:Ve(a(s).props.data.balance<0?"text-red":"text-green")},r(a(oa)(a(s).props.data.balance)),3)]),a(s).props.data.phone_1?(d(),w("tr",Rx,[i[6]||(i[6]=t("td",null,"No Telepon",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone_1),1)])):k("",!0),a(s).props.data.phone_2?(d(),w("tr",Ox,[i[8]||(i[8]=t("td",null,"No Telepon 2",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone_2),1)])):k("",!0),a(s).props.data.phone_3?(d(),w("tr",Ix,[i[10]||(i[10]=t("td",null,"No Telepon 3",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.phone_3),1)])):k("",!0),a(s).props.data.address?(d(),w("tr",Ux,[i[12]||(i[12]=t("td",null,"Alamat",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.address),1)])):k("",!0),a(s).props.data.return_address?(d(),w("tr",Dx,[i[14]||(i[14]=t("td",null,"Alamat Retur",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.return_address),1)])):k("",!0),a(s).props.data.bank_account_name_1||a(s).props.data.bank_account_number_1||a(s).props.data.bank_account_holder_1?(d(),w("tr",jx,[i[16]||(i[16]=t("td",null,"Rek 1",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.bank_account_name_1)+" "+r(a(s).props.data.bank_account_number_1)+" a.n. "+r(a(s).props.data.bank_account_holder_1),1)])):k("",!0),a(s).props.data.bank_account_name_2||a(s).props.data.bank_account_number_2||a(s).props.data.bank_account_holder_2?(d(),w("tr",Ex,[i[18]||(i[18]=t("td",null,"Rek 2",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.bank_account_name_2)+" "+r(a(s).props.data.bank_account_number_2)+" a.n. "+r(a(s).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Status",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(a(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(d(),w("div",Ax,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>u())})])):k("",!0)],64))}},Mx=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"})),Nx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Bx={class:"text-bold"},Fx={class:"text-bold"},zx={key:0,class:"text-bold"},Lx={key:1},un={__name:"OrderHistoryTab",setup(c){const s=ge(),u=C([]),o=C(!0),i=Ie({customer_id:s.props.data.id,...Le()}),n=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp.)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];we(()=>{b()});const b=(f=null)=>Ke({pagination:n,filter:i,props:f,rows:u,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:s.props.data.id}}),loading:o}),p=xe(),m=Z(()=>p.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,y)=>(d(),D(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=_=>n.value=_),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:_,message:V,filter:q})=>[t("div",Nx,[t("span",null,r(V)+" "+r(q?" with term "+q:""),1)])]),body:l(_=>[e(Pe,{props:_,class:"cursor-pointer",onClick:J(V=>a(ee).get(f.route("admin.purchase-order.detail",{id:_.row.id})),["stop"])},{default:l(()=>[e(W,{key:"id",props:_},{default:l(()=>[t("div",Bx,[e(T,{class:"inline-icon",name:"tag"}),v(" "+r(_.row.code),1)]),t("div",null,[e(T,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(a(ve)(_.row.datetime)),1)]),a(p).screen.lt.md?(d(),w(G,{key:0},[t("div",Fx,[e(T,{name:"money",class:"inline-icon"}),v(" Total: Rp. "+r(a(K)(_.row.grand_total)),1)]),_.row.remaining_debt>0?(d(),w("div",zx,[e(T,{name:"money",class:"inline-icon"}),v(" Sisa Utang: Rp. "+r(a(K)(_.row.remaining_debt)),1)])):k("",!0),_.row.notes?(d(),w("div",Lx,[e($e,{text:_.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(No,{status:_.row.status},null,8,["status"]),e(Bo,{status:_.row.payment_status},null,8,["status"])])]),_:2},1032,["props"]),e(W,{key:"grand_total",props:_},{default:l(()=>[v(r(a(K)(_.row.grand_total)),1)]),_:2},1032,["props"]),e(W,{key:"remaining_debt",props:_},{default:l(()=>[v(r(a(K)(_.row.remaining_debt)),1)]),_:2},1032,["props"]),e(W,{key:"notes",props:_,class:"wrap-column"},{default:l(()=>[e($e,{text:_.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Kx=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"})),Hx={class:"q-gutter-sm"},Yx={class:"q-gutter-sm"},Wx={class:"col col-lg-6 q-pa-xs"},Qx={class:"row"},Hl="Rincian Pemasok",Jx={__name:"Detail",setup(c){const s=ge(),u=C("main");return xe(),(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(G,null,[e(n,{title:Hl}),e(g,null,{title:l(()=>[v(r(Hl))]),"left-button":l(()=>[t("div",Hx,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":l(()=>[t("div",Yx,[o.$can("admin.supplier.edit")?(d(),D(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>a(ee).get(o.route("admin.supplier.edit",{id:a(s).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),D(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>a(ee).get(o.route("admin.supplier.edit",{id:a(s).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),D(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>a(ee).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Wx,[t("div",Qx,[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(Ot,{modelValue:u.value,"onUpdate:modelValue":i[4]||(i[4]=b=>u.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(It,{modelValue:u.value,"onUpdate:modelValue":i[5]||(i[5]=b=>u.value=b),animated:""},{default:l(()=>[e(ut,{name:"main"},{default:l(()=>[e(dn)]),_:1}),e(ut,{name:"order-history",class:"q-pa-xs"},{default:l(()=>[e(un)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Gx=Object.freeze(Object.defineProperty({__proto__:null,default:Jx},Symbol.toStringTag,{value:"Module"})),Xx={class:"q-gutter-sm"},Zx={class:"col col-md-6 q-pa-xs"},eS={class:"row q-col-gutter-md"},tS={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},aS={key:2,class:"row q-col-gutter-md"},lS={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},oS={key:4,class:"row q-col-gutter-md"},nS={key:5,class:"row q-col-gutter-md"},sS={style:{"margin-left":"-10px"},class:"q-mt-md"},rS={class:"q-mt-sm"},iS={__name:"Editor",setup(c){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Pemasok",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,phone_1:s.props.data.phone_1,phone_2:s.props.data.phone_2,phone_3:s.props.data.phone_3,url_1:s.props.data.url_1,url_2:s.props.data.url_2,bank_account_name_1:s.props.data.bank_account_name_1,bank_account_holder_1:s.props.data.bank_account_holder_1,bank_account_number_1:s.props.data.bank_account_number_1,bank_account_name_2:s.props.data.bank_account_name_2,bank_account_holder_2:s.props.data.bank_account_holder_2,bank_account_number_2:s.props.data.bank_account_number_2,address:s.props.data.address,return_address:s.props.data.return_address,active:!!s.props.data.active}),i=C(!0),n=()=>nt({form:o,url:route("admin.supplier.save")});return(g,b)=>{const p=X("i-head"),m=X("authenticated-layout");return d(),w(G,null,[e(p,{title:u}),e(m,{"show-drawer-button":!0},{title:l(()=>[v(r(u))]),"left-button":l(()=>[t("div",Xx,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),"right-button":l(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:a(o).processing,onClick:b[1]||(b[1]=f=>n()),title:"Simpan"},null,8,["disable"])]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",Zx,[e(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[2]||(b[2]=f=>a(o).id=f)},null,512),[[yt,a(o).id]]),e(ne,{modelValue:a(o).code,"onUpdate:modelValue":b[3]||(b[3]=f=>a(o).code=f),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!a(o).errors.code,disable:a(o).processing,"error-message":a(o).errors.code,rules:[f=>f&&f.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(o).name,"onUpdate:modelValue":b[4]||(b[4]=f=>a(o).name=f),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!a(o).errors.name,disable:a(o).processing,"error-message":a(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",eS,[e(ne,{modelValue:a(o).phone_1,"onUpdate:modelValue":b[5]||(b[5]=f=>a(o).phone_1=f),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_1,"error-message":a(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(d(),D(ne,{key:0,modelValue:a(o).phone_2,"onUpdate:modelValue":b[6]||(b[6]=f=>a(o).phone_2=f),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_2,"error-message":a(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(d(),D(ne,{key:1,modelValue:a(o).phone_3,"onUpdate:modelValue":b[7]||(b[7]=f=>a(o).phone_3=f),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.phone_3,"error-message":a(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(ne,{modelValue:a(o).address,"onUpdate:modelValue":b[8]||(b[8]=f=>a(o).address=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.address,"error-message":a(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(d(),D(ne,{key:0,modelValue:a(o).return_address,"onUpdate:modelValue":b[9]||(b[9]=f=>a(o).return_address=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.return_address,"error-message":a(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(d(),w("div",tS," Rekening 1 ")),i.value?k("",!0):(d(),w("div",aS,[e(ne,{modelValue:a(o).bank_account_name_1,"onUpdate:modelValue":b[10]||(b[10]=f=>a(o).bank_account_name_1=f),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_1,"error-message":a(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_number_1,"onUpdate:modelValue":b[11]||(b[11]=f=>a(o).bank_account_number_1=f),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_1,"error-message":a(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_holder_1,"onUpdate:modelValue":b[12]||(b[12]=f=>a(o).bank_account_holder_1=f),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_1,"error-message":a(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(d(),w("div",lS," Rekening 2 ")),i.value?k("",!0):(d(),w("div",oS,[e(ne,{modelValue:a(o).bank_account_name_2,"onUpdate:modelValue":b[13]||(b[13]=f=>a(o).bank_account_name_2=f),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_name_2,"error-message":a(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_number_2,"onUpdate:modelValue":b[14]||(b[14]=f=>a(o).bank_account_number_2=f),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_number_2,"error-message":a(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).bank_account_holder_2,"onUpdate:modelValue":b[15]||(b[15]=f=>a(o).bank_account_holder_2=f),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.bank_account_holder_2,"error-message":a(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(d(),w("div",nS,[e(ne,{modelValue:a(o).url_1,"onUpdate:modelValue":b[16]||(b[16]=f=>a(o).url_1=f),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_1,"error-message":a(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(ne,{modelValue:a(o).url_2,"onUpdate:modelValue":b[17]||(b[17]=f=>a(o).url_2=f),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:a(o).processing,error:!!a(o).errors.url_2,"error-message":a(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",sS,[e(sa,{class:"full-width q-pl-none",modelValue:a(o).active,"onUpdate:modelValue":b[18]||(b[18]=f=>a(o).active=f),disable:a(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",rS,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:b[19]||(b[19]=J(f=>i.value=!i.value,["stop"]))},[e(T,{name:i.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),v(" "+r(i.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},dS=Object.freeze(Object.defineProperty({__proto__:null,default:iS},Symbol.toStringTag,{value:"Module"})),uS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},mS={class:"q-pa-xs"},cS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},pS={key:0},fS={key:1},gS={class:"flex justify-end"},Yl="Pemasok",bS={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=Ie({search:"",status:"active",...Le()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],y=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];we(()=>{V()});const _=U=>ot({message:`Hapus pemasok ${U.name}?`,url:route("admin.supplier.delete",U.id),fetchItemsCallback:V,loading:i}),V=(U=null)=>{Ke({pagination:m,filter:p,props:U,rows:o,url:route("admin.supplier.data"),loading:i,tableRef:n})},q=()=>V(),x=U=>ee.get(route("admin.supplier.detail",{id:U.id})),{protectClick:R}=At(),H=R(x),O=Z(()=>s.screen.gt.sm?f:f.filter(U=>U.name==="code"||U.name==="action"));return(U,I)=>{const F=X("i-head"),N=X("authenticated-layout");return d(),w(G,null,[e(F,{title:Yl}),e(N,null,Be({title:l(()=>[v(r(Yl))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=h=>u.value=!u.value)},null,8,["icon"]),U.$can("admin.supplier.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=h=>a(ee).get(U.route("admin.supplier.add")))})):k("",!0)]),default:l(()=>[t("div",mS,[e(Ue,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":I[5]||(I[5]=h=>m.value=h),filter:p.search,loading:i.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:a(b)}),onRequest:V,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:h,message:j,filter:P})=>[t("div",cS,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:l(h=>[e(Pe,{props:h,class:Ve([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:J(j=>a(H)(h.row,j),["stop"])},{default:l(()=>[e(W,{key:"code",props:h,class:"wrap-column"},{default:l(()=>[t("div",null,[a(s).screen.lt.md?(d(),D(T,{key:0,name:"person"})):k("",!0),v(" "+r(h.row.code)+" ",1),a(s).screen.lt.md?(d(),w(G,{key:1},[v(" - "+r(h.row.name),1)],64)):k("",!0)]),a(s).screen.lt.md?(d(),w(G,{key:0},[t("div",{class:Ve(h.row.balance<0?"text-negative":"text-positive")},[e(T,{name:"wallet"}),v(" "+r(a(K)(h.row.balance)),1)],2),h.row.phone_1?(d(),w("div",pS,[e(T,{name:"phone"}),v(" "+r(h.row.phone_1),1)])):k("",!0),h.row.address?(d(),w("div",fS,[e(T,{name:"home_pin"}),v(" "+r(h.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(W,{key:"name",props:h,class:"wrap-column"},{default:l(()=>[v(r(h.row.name),1)]),_:2},1032,["props"]),e(W,{key:"balance",props:h,class:"wrap-column"},{default:l(()=>[t("div",{class:Ve(h.row.balance<0?"text-negative":"text-positive")},r(a(K)(h.row.balance)),3)]),_:2},1032,["props"]),e(W,{key:"phone_1",props:h},{default:l(()=>[v(r(h.row.phone_1),1)]),_:2},1032,["props"]),e(W,{key:"address",props:h},{default:l(()=>[v(r(h.row.address),1)]),_:2},1032,["props"]),e(W,{key:"action",props:h},{default:l(()=>[t("div",gS,[U.$can("admin.supplier.add")||U.$can("admin.supplier.edit")||U.$can("admin.supplier.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[4]||(I[4]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[U.$can("admin.supplier.add")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(j=>a(ee).get(U.route("admin.supplier.duplicate",h.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(z,null,{default:l(()=>I[6]||(I[6]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),U.$can("admin.supplier.edit")?ae((d(),D(oe,{key:1,clickable:"",onClick:J(j=>a(ee).get(U.route("admin.supplier.edit",h.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>I[7]||(I[7]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),U.$can("admin.supplier.delete")?ae((d(),D(oe,{key:2,onClick:J(j=>_(h.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>I[8]||(I[8]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",uS,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[2]||(I[2]=h=>p.status=h),q],options:y,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[3]||(I[3]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},vS=Object.freeze(Object.defineProperty({__proto__:null,default:bS},Symbol.toStringTag,{value:"Module"})),yS={class:"q-gutter-sm"},_S={class:"col col-md-6 q-pa-xs"},kS={class:"q-pt-md"},wS={key:0,class:"text-caption text-negative"},hS={class:"q-pt-md"},$S={key:0,class:"text-caption text-negative"},xS={__name:"Editor",setup(c){const s=xe(),u=ge(),o=(u.props.data.id?"Edit":"Tambah")+" Skema Pajak",i=Qe({id:u.props.data.id,name:u.props.data.name,rate_percentage:u.props.data.rate_percentage??0,tax_authority:u.props.data.tax_authority,is_inclusive:u.props.data.is_inclusive??!1,active:u.props.data.active??!0,description:u.props.data.description}),n=()=>nt({form:i,url:route("admin.tax-scheme.save")});return(g,b)=>{const p=X("i-head"),m=X("authenticated-layout");return d(),w(G,null,[e(p,{title:o}),e(m,{"show-drawer-button":!a(s).screen.lt.md},Be({title:l(()=>[v(r(o))]),default:l(()=>[e(Te,{class:"row justify-center"},{default:l(()=>[t("div",_S,[e(Je,{class:"row",onSubmit:J(n,["prevent"]),onValidationError:a(We)},{default:l(()=>[e(fe,{square:"",flat:"",bordered:"",class:"col"},{default:l(()=>[e(le,{class:"q-pt-none"},{default:l(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>a(i).id=f)},null,512),[[yt,a(i).id]]),e(ne,{autofocus:"",modelValue:a(i).name,"onUpdate:modelValue":b[2]||(b[2]=f=>a(i).name=f),modelModifiers:{trim:!0},label:"Nama Skema Pajak","lazy-rules":"",error:!!a(i).errors.name,disable:a(i).processing,"error-message":a(i).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ne,{modelValue:a(i).rate_percentage,"onUpdate:modelValue":b[3]||(b[3]=f=>a(i).rate_percentage=f),modelModifiers:{number:!0},label:"Tarif Persentase (%)",type:"number",suffix:"%",rules:[f=>f>=0||"Persentase tidak boleh negatif."],error:!!a(i).errors.rate_percentage,disable:a(i).processing,"error-message":a(i).errors.rate_percentage,"hide-bottom-space":""},null,8,["modelValue","rules","error","disable","error-message"]),e(ne,{modelValue:a(i).tax_authority,"onUpdate:modelValue":b[4]||(b[4]=f=>a(i).tax_authority=f),modelModifiers:{trim:!0},label:"Otoritas Pajak (Opsional)",hint:"Contoh: DJP, Pemerintah Daerah",error:!!a(i).errors.tax_authority,disable:a(i).processing,"error-message":a(i).errors.tax_authority,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ne,{modelValue:a(i).description,"onUpdate:modelValue":b[5]||(b[5]=f=>a(i).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:a(i).processing,error:!!a(i).errors.description,"error-message":a(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",kS,[e(Wa,{modelValue:a(i).is_inclusive,"onUpdate:modelValue":b[6]||(b[6]=f=>a(i).is_inclusive=f),disable:a(i).processing,label:a(i).is_inclusive?"Harga Jual SUDAH termasuk Pajak":"Harga Jual BELUM termasuk Pajak",color:"primary"},null,8,["modelValue","disable","label"]),a(i).errors.is_inclusive?(d(),w("div",wS,r(a(i).errors.is_inclusive),1)):k("",!0)]),t("div",hS,[e(Wa,{modelValue:a(i).active,"onUpdate:modelValue":b[7]||(b[7]=f=>a(i).active=f),disable:a(i).processing,label:a(i).active?"Skema Aktif":"Skema Non-Aktif",color:"primary"},null,8,["modelValue","disable","label"]),a(i).errors.active?(d(),w("div",$S,r(a(i).errors.active),1)):k("",!0)])]),_:1}),e(le,{class:"q-gutter-sm"},{default:l(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:a(i).processing,loading:a(i).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:a(i).processing,onClick:b[8]||(b[8]=f=>g.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[a(s).screen.lt.md?{name:"left-button",fn:l(()=>[t("div",yS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},SS=Object.freeze(Object.defineProperty({__proto__:null,default:xS},Symbol.toStringTag,{value:"Module"})),VS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},qS={class:"q-pa-xs"},CS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},TS={class:"text-weight-bold"},PS={class:"text-grey-8"},RS={class:"text-weight-medium"},OS={class:"text-weight-medium text-uppercase"},IS={key:0,class:"text-grey-8"},US={key:1,class:"text-grey-8"},DS={class:"flex justify-end"},Wl="Skema Pajak",jS={__name:"Index",setup(c){const s=xe(),u=C(!1),o=C([]),i=C(!0),n=C(null),g=C(null),b=et(g),p=Ie({search:"",...Le()}),m=C({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"rate_percentage",label:"Tarif",field:"rate_percentage",align:"right",sortable:!0,format:q=>`${q}%`},{name:"is_inclusive",label:"Tipe Harga",field:"is_inclusive",align:"center",format:q=>q?"INCLUSIVE":"EXCLUSIVE",sortable:!0},{name:"tax_authority",label:"Otoritas",field:"tax_authority",align:"left",sortable:!0},{name:"active",label:"Status",field:"active",align:"center",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left"},{name:"action",align:"right"}];we(()=>{_()});const y=q=>ot({message:`Hapus Skema Pajak ${q.name}?`,url:route("admin.tax-scheme.delete",q.id),fetchItemsCallback:_,loading:i}),_=(q=null)=>{Ke({pagination:m,filter:p,props:q,rows:o,url:route("admin.tax-scheme.data"),loading:i,tableRef:n})},V=Z(()=>s.screen.gt.sm?f:f.filter(q=>q.name==="name"||q.name==="action"));return(q,x)=>{const R=X("i-head"),H=X("authenticated-layout");return d(),w(G,null,[e(R,{title:Wl}),e(H,null,Be({title:l(()=>[v(r(Wl))]),"right-button":l(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=O=>u.value=!u.value)},null,8,["icon"]),q.$can("admin.tax-scheme.add")?(d(),D(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=O=>a(ee).get(q.route("admin.tax-scheme.add")))})):k("",!0)]),default:l(()=>[t("div",qS,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":x[4]||(x[4]=O=>m.value=O),filter:p.search,loading:i.value,columns:V.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:a(b)}),onRequest:_,"binary-state-sort":""},{loading:l(()=>[e(Ye,{showing:"",color:"red"})]),"no-data":l(({icon:O,message:U,filter:I})=>[t("div",CS,[t("span",null,r(U)+" "+r(I?" with term "+I:""),1)])]),body:l(O=>[e(Pe,{props:O},{default:l(()=>[e(W,{key:"name",props:O,class:"wrap-column"},{default:l(()=>[t("div",TS,r(O.row.name),1),a(s).screen.gt.sm?k("",!0):(d(),w(G,{key:0},[t("div",PS,[x[5]||(x[5]=v(" Tarif: ")),t("span",RS,r(O.row.rate_percentage)+"%",1)]),t("div",null,[x[6]||(x[6]=v(" Tipe: ")),t("span",OS,r(O.row.is_inclusive?"Inclusive":"Exclusive"),1)]),O.row.tax_authority?(d(),w("div",IS,[e(T,{name:"account_balance",size:"xs"}),v(" Otoritas: "+r(O.row.tax_authority),1)])):k("",!0),O.row.description?(d(),w("div",US,[e(T,{name:"description",size:"xs"}),v(" "+r(O.row.description),1)])):k("",!0),e(bt,{color:O.row.active?"positive":"negative"},{default:l(()=>[v(r(O.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])],64))]),_:2},1032,["props"]),e(W,{key:"rate_percentage",props:O,class:"text-right text-weight-bold"},{default:l(()=>[v(r(O.row.rate_percentage)+"% ",1)]),_:2},1032,["props"]),e(W,{key:"is_inclusive",props:O,class:"text-center"},{default:l(()=>[e(bt,{color:O.row.is_inclusive?"green-7":"deep-orange-7","text-color":"white"},{default:l(()=>[v(r(O.row.is_inclusive?"INCLUSIVE":"EXCLUSIVE"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(W,{key:"tax_authority",props:O,class:"wrap-column"},{default:l(()=>[v(r(O.row.tax_authority),1)]),_:2},1032,["props"]),e(W,{key:"active",props:O,class:"text-center"},{default:l(()=>[e(bt,{color:O.row.active?"positive":"negative"},{default:l(()=>[v(r(O.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(W,{key:"description",props:O,class:"wrap-column"},{default:l(()=>[v(r(O.row.description),1)]),_:2},1032,["props"]),e(W,{key:"action",props:O},{default:l(()=>[t("div",DS,[q.$can("admin.tax-scheme.add")||q.$can("admin.tax-scheme.edit")||q.$can("admin.tax-scheme.delete")?(d(),D(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=J(()=>{},["stop"]))},{default:l(()=>[e(Ze,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ze,{style:{width:"200px"}},{default:l(()=>[q.$can("admin.tax-scheme.add")?ae((d(),D(oe,{key:0,clickable:"",onClick:J(U=>a(ee).get(q.route("admin.tax-scheme.duplicate",O.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"file_copy"})]),_:1}),e(z,null,{default:l(()=>x[7]||(x[7]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),q.$can("admin.tax-scheme.edit")?ae((d(),D(oe,{key:1,clickable:"",onClick:J(U=>a(ee).get(q.route("admin.tax-scheme.edit",O.row.id)),["stop"])},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"edit"})]),_:1}),e(z,null,{default:l(()=>x[8]||(x[8]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0),q.$can("admin.tax-scheme.delete")?ae((d(),D(oe,{key:2,onClick:J(U=>y(O.row),["stop"]),clickable:""},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"delete_forever"})]),_:1}),e(z,null,{default:l(()=>x[9]||(x[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ie],[pe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:l(()=>[e(st,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:l(()=>[t("div",VS,[e(ne,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":x[2]||(x[2]=O=>p.search=O),placeholder:"Cari",clearable:""},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ES=Object.freeze(Object.defineProperty({__proto__:null,default:jS},Symbol.toStringTag,{value:"Module"})),AS=Et({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(c,{slots:s,emit:u}){let o=!1,i,n,g=null,b=null,p,m;function f(){i&&i(),i=null,o=!1,g!==null&&(clearTimeout(g),g=null),b!==null&&(clearTimeout(b),b=null),n!==void 0&&n.removeEventListener("transitionend",p),p=null}function y(x,R,H){R!==void 0&&(x.style.height=`${R}px`),x.style.transition=`height ${c.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,i=H}function _(x,R){x.style.overflowY=null,x.style.height=null,x.style.transition=null,f(),R!==m&&u(R)}function V(x,R){let H=0;n=x,o===!0?(f(),H=x.offsetHeight===x.scrollHeight?0:void 0):(m="hide",x.style.overflowY="hidden"),y(x,H,R),g=setTimeout(()=>{g=null,x.style.height=`${x.scrollHeight}px`,p=O=>{b=null,(Object(O)!==O||O.target===x)&&_(x,"show")},x.addEventListener("transitionend",p),b=setTimeout(p,c.duration*1.1)},100)}function q(x,R){let H;n=x,o===!0?f():(m="show",x.style.overflowY="hidden",H=x.scrollHeight),y(x,H,R),g=setTimeout(()=>{g=null,x.style.height=0,p=O=>{b=null,(Object(O)!==O||O.target===x)&&_(x,"hide")},x.addEventListener("transitionend",p),b=setTimeout(p,c.duration*1.1)},100)}return ra(()=>{o===!0&&f()}),()=>Ce(Gl,{css:!1,appear:c.appear,onEnter:V,onLeave:q},s.default)}}),Ht=ns({}),MS=Object.keys(lo),jt=Et({name:"QExpansionItem",props:{...lo,...rs,...Oa,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ss,"click","afterShow","afterHide"],setup(c,{slots:s,emit:u}){const{proxy:{$q:o}}=Tt(),i=Ia(c,o),n=C(c.modelValue!==null?c.modelValue:c.defaultOpened),g=C(null),b=is(),{show:p,hide:m,toggle:f}=ds({showing:n});let y,_;const V=Z(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${c.popup===!0?"popup":"standard"}`),q=Z(()=>c.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:c.contentInsetLevel*56+"px"}),x=Z(()=>c.disable!==!0&&(c.href!==void 0||c.to!==void 0&&c.to!==null&&c.to!=="")),R=Z(()=>{const re={};return MS.forEach(Re=>{re[Re]=c[Re]}),re}),H=Z(()=>x.value===!0||c.expandIconToggle!==!0),O=Z(()=>c.expandedIcon!==void 0&&n.value===!0?c.expandedIcon:c.expandIcon||o.iconSet.expansionItem[c.denseToggle===!0?"denseIcon":"icon"]),U=Z(()=>c.disable!==!0&&(x.value===!0||c.expandIconToggle===!0)),I=Z(()=>({expanded:n.value===!0,detailsId:b.value,toggle:f,show:p,hide:m})),F=Z(()=>{const re=c.toggleAriaLabel!==void 0?c.toggleAriaLabel:o.lang.label[n.value===!0?"collapse":"expand"](c.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":b.value,"aria-label":re}});Me(()=>c.group,re=>{_!==void 0&&_(),re!==void 0&&A()});function N(re){x.value!==!0&&f(re),u("click",re)}function h(re){re.keyCode===13&&j(re,!0)}function j(re,Re){Re!==!0&&g.value!==null&&g.value.focus(),f(re),Yt(re)}function P(){u("afterShow")}function $(){u("afterHide")}function A(){y===void 0&&(y=us()),n.value===!0&&(Ht[c.group]=y);const re=Me(n,Ge=>{Ge===!0?Ht[c.group]=y:Ht[c.group]===y&&delete Ht[c.group]}),Re=Me(()=>Ht[c.group],(Ge,me)=>{me===y&&Ge!==void 0&&Ge!==y&&m()});_=()=>{re(),Re(),Ht[c.group]===y&&delete Ht[c.group],_=void 0}}function B(){const re={class:[`q-focusable relative-position cursor-pointer${c.denseToggle===!0&&c.switchToggleSide===!0?" items-end":""}`,c.expandIconClass],side:c.switchToggleSide!==!0,avatar:c.switchToggleSide},Re=[Ce(T,{class:"q-expansion-item__toggle-icon"+(c.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:O.value})];return U.value===!0&&(Object.assign(re,{tabindex:0,...F.value,onClick:j,onKeyup:h}),Re.unshift(Ce("div",{ref:g,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),Ce(z,re,()=>Re)}function S(){let re;return s.header!==void 0?re=[].concat(s.header(I.value)):(re=[Ce(z,()=>[Ce(he,{lines:c.labelLines},()=>c.label||""),c.caption?Ce(he,{lines:c.captionLines,caption:!0},()=>c.caption):null])],c.icon&&re[c.switchToggleSide===!0?"push":"unshift"](Ce(z,{side:c.switchToggleSide===!0,avatar:c.switchToggleSide!==!0},()=>Ce(T,{name:c.icon})))),c.disable!==!0&&c.hideExpandIcon!==!0&&re[c.switchToggleSide===!0?"unshift":"push"](B()),re}function M(){const re={ref:"item",style:c.headerStyle,class:c.headerClass,dark:i.value,disable:c.disable,dense:c.dense,insetLevel:c.headerInsetLevel};return H.value===!0&&(re.clickable=!0,re.onClick=N,Object.assign(re,x.value===!0?R.value:F.value)),Ce(oe,re,S)}function te(){return ae(Ce("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:q.value,id:b.value},Bt(s.default)),[[to,n.value]])}function ue(){const re=[M(),Ce(AS,{duration:c.duration,onShow:P,onHide:$},te)];return c.expandSeparator===!0&&re.push(Ce(Ae,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),Ce(Ae,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),re}return c.group!==void 0&&A(),ra(()=>{_!==void 0&&_()}),()=>Ce("div",{class:V.value},[Ce("div",{class:"q-expansion-item__container relative-position"},ue())])}}),NS={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},BS={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},FS={class:"text-bold"},zS={class:"text-grey-8 text-caption"},LS={class:"absolute-bottom text-grey-6 q-pa-md"},Ta="amanah-pos.layout.left-drawer-open",KS={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(c,{expose:s}){const u=xe(),o=ge(),i=C(JSON.parse(localStorage.getItem(Ta))),n=C(!1),g=()=>i.value=!i.value,b=()=>{i.value=!1};return Me(i,p=>{localStorage.setItem(Ta,p)}),we(()=>{i.value=JSON.parse(localStorage.getItem(Ta)),u.screen.lt.md&&(i.value=!1)}),s({hideDrawer:b}),(p,m)=>(d(),D(vs,{view:"lHh LpR lFf"},{default:l(()=>[e(ms,null,{default:l(()=>[e(st,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:l(()=>[c.showDrawerButton&&!i.value?(d(),D(E,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:g},{default:l(()=>[e(T,{class:"material-symbols-outlined"},{default:l(()=>m[32]||(m[32]=[v("dock_to_right")])),_:1})]),_:1})):k("",!0),qt(p.$slots,"left-button",{},void 0,!0),e(cs,{style:{"font-size":"16px"}},{default:l(()=>[qt(p.$slots,"title",{},()=>[v(r(p.$config.APP_NAME),1)],!0)]),_:3}),qt(p.$slots,"right-button",{},void 0,!0)]),_:3}),qt(p.$slots,"header",{},void 0,!0)]),_:3}),e(ps,{breakpoint:768,modelValue:i.value,"onUpdate:modelValue":m[31]||(m[31]=f=>i.value=f),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:l(()=>[t("div",NS,[t("div",BS,[e(fs,{modelValue:n.value,"onUpdate:modelValue":m[1]||(m[1]=f=>n.value=f),class:Ve(["profile-btn text-bold",{"profile-btn-active":n.value}]),flat:"",label:a(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:l(()=>[e(ze,{id:"profile-btn-popup",style:{color:"#444"}},{default:l(()=>[e(oe,null,{default:l(()=>[e(aa,{style:{"margin-left":"-15px"}},{default:l(()=>[e(T,{name:"person"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>[t("div",FS,r(a(o).props.auth.user.name),1),t("div",zS,[v(r(p.$CONSTANTS.USER_TYPES[a(o).props.auth.user.type])+" ",1),m[33]||(m[33]=t("br",null,null,-1)),v(" "+r(a(o).props.company.name),1)])]),_:1})]),_:1})]),_:1}),e(Ae),ae((d(),D(oe,{class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/profile"),onClick:m[0]||(m[0]=f=>a(ee).get(p.route("admin.user-profile.edit")))},{default:l(()=>[e(z,null,{default:l(()=>[e(he,null,{default:l(()=>[e(T,{name:"manage_accounts",class:"q-mr-sm"}),m[34]||(m[34]=v(" Pengaturan Pribadi"))]),_:1})]),_:1})]),_:1},8,["active"])),[[pe],[ie]]),ae((d(),D(oe,{clickable:"",style:{color:"inherit"},href:p.route("admin.auth.logout")},{default:l(()=>[e(z,null,{default:l(()=>[e(he,null,{default:l(()=>[e(T,{name:"logout",class:"q-mr-sm"}),m[35]||(m[35]=v(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[pe],[ie]])]),_:1})]),_:1},8,["modelValue","label","class"]),i.value?(d(),D(E,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:g},{default:l(()=>[e(T,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(gs,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:l(()=>[e(ze,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:l(()=>[ae((d(),D(oe,{clickable:"",active:p.$page.url.startsWith("/admin/dashboard"),onClick:m[2]||(m[2]=f=>a(ee).get(p.route("admin.dashboard")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"dashboard"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[36]||(m[36]=[v("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]),e(jt,{icon:"shortcut",label:"Buat Baru"},{default:l(()=>[p.$can("admin.sales-order.add")?ae((d(),D(oe,{key:0,class:"subnav",clickable:"",onClick:m[3]||(m[3]=f=>a(ee).get(p.route("admin.sales-order.add")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"add_shopping_cart"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[37]||(m[37]=[v("Penjualan")])),_:1})]),_:1})]),_:1})),[[ie]]):k("",!0),p.$can("admin.customer.add")?ae((d(),D(oe,{key:1,class:"subnav",clickable:"",onClick:m[4]||(m[4]=f=>a(ee).get(p.route("admin.customer.add")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"group_add"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[38]||(m[38]=[v("Pelanggan")])),_:1})]),_:1})]),_:1})),[[ie]]):k("",!0)]),_:1}),p.$can("admin.sales-order.index")||p.$can("admin.customer.index")||p.$can("admin.sales-order-return.index")?(d(),D(jt,{key:0,icon:"storefront",label:"Penjualan","default-opened":p.$page.url.startsWith("/admin/sales-orders")||p.$page.url.startsWith("/admin/sales-order-returns")||p.$page.url.startsWith("/admin/customers")},{default:l(()=>[p.$can("admin.sales-order.index")?ae((d(),D(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-orders"),onClick:m[5]||(m[5]=f=>a(ee).get(p.route("admin.sales-order.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"add_shopping_cart"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[39]||(m[39]=[v("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.sales-order-return.index")?ae((d(),D(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-order-returns"),onClick:m[6]||(m[6]=f=>a(ee).get(p.route("admin.sales-order-return.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"remove_shopping_cart"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[40]||(m[40]=[v("Retur Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.customer.index")?ae((d(),D(oe,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customers"),onClick:m[7]||(m[7]=f=>a(ee).get(p.route("admin.customer.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"people"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[41]||(m[41]=[v("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.purchase-order.index")||p.$can("admin.supplier.index")||p.$can("admin.purchase-order-return.index")?(d(),D(jt,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":p.$page.url.startsWith("/admin/purchase-orders")||p.$page.url.startsWith("/admin/purchase-order-returns")||p.$page.url.startsWith("/admin/suppliers")},{default:l(()=>[p.$can("admin.purchase-order.index")?ae((d(),D(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-orders"),onClick:m[8]||(m[8]=f=>a(ee).get(p.route("admin.purchase-order.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"add_shopping_cart"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[42]||(m[42]=[v("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.purchase-order-return.index")?ae((d(),D(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-order-returns"),onClick:m[9]||(m[9]=f=>a(ee).get(p.route("admin.purchase-order-return.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"remove_shopping_cart"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[43]||(m[43]=[v("Retur Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.supplier.index")?ae((d(),D(oe,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/suppliers"),onClick:m[10]||(m[10]=f=>a(ee).get(p.route("admin.supplier.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"people"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[44]||(m[44]=[v("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.product.index")||p.$can("admin.product-category.index")||p.$can("admin.stock-adjustment.index")||p.$can("admin.stock-movement.index")?(d(),D(jt,{key:2,icon:"inventory_2",label:"Inventori","default-opened":p.$page.url.startsWith("/admin/products")||p.$page.url.startsWith("/admin/product-categories")||p.$page.url.startsWith("/admin/stock-adjustments")||p.$page.url.startsWith("/admin/stock-movements")},{default:l(()=>[p.$can("admin.stock-adjustment.index")?ae((d(),D(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-adjustments"),onClick:m[11]||(m[11]=f=>a(ee).get(p.route("admin.stock-adjustment.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"swap_vert"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[45]||(m[45]=[v("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.stock-movement.index")?ae((d(),D(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-movements"),onClick:m[12]||(m[12]=f=>a(ee).get(p.route("admin.stock-movement.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"timeline"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[46]||(m[46]=[v("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.product.index")?ae((d(),D(oe,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/products"),onClick:m[13]||(m[13]=f=>a(ee).get(p.route("admin.product.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"box"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[47]||(m[47]=[v("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.product-category.index")?ae((d(),D(oe,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/product-categories"),onClick:m[14]||(m[14]=f=>a(ee).get(p.route("admin.product-category.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"category"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[48]||(m[48]=[v("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.cashier-session.index")||p.$can("admin.cashier-terminal.index")?(d(),D(jt,{key:3,icon:"point_of_sale",label:"Kasir","default-opened":p.$page.url.startsWith("/admin/cashier-terminals")||p.$page.url.startsWith("/admin/cashier-session")},{default:l(()=>[p.$can("admin.cashier-session.index")?ae((d(),D(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-sessions"),onClick:m[15]||(m[15]=f=>a(ee).get(p.route("admin.cashier-session.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"tv_signin"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[49]||(m[49]=[v("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.cashier-terminal.index")?ae((d(),D(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-terminals"),onClick:m[16]||(m[16]=f=>a(ee).get(p.route("admin.cashier-terminal.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"point_of_sale"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[50]||(m[50]=[v("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.customer-wallet-transaction-confirmation.index")||p.$can("admin.customer-wallet-transaction.index")?(d(),D(jt,{key:4,icon:"wallet",label:"Wallet","default-opened":p.$page.url.startsWith("/admin/customer-wallet-transactions")||p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:l(()=>[p.$can("admin.customer-wallet-transaction-confirmation.index")?ae((d(),D(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:m[17]||(m[17]=f=>a(ee).get(p.route("admin.customer-wallet-transaction-confirmation.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"add_task"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[51]||(m[51]=[v("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.customer-wallet-transaction.index")?ae((d(),D(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:m[18]||(m[18]=f=>a(ee).get(p.route("admin.customer-wallet-transaction.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"moving"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[52]||(m[52]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.finance-transaction.index")||p.$can("admin.finance-account.index")?(d(),D(jt,{key:5,icon:"finance",label:"Keuangan","default-opened":p.$page.url.startsWith("/admin/finance-accounts")||p.$page.url.startsWith("/admin/finance-transactions")},{default:l(()=>[p.$can("admin.finance-transaction.index")?ae((d(),D(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-transactions"),onClick:m[19]||(m[19]=f=>a(ee).get(p.route("admin.finance-transaction.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"moving"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[53]||(m[53]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.finance-account.index")?ae((d(),D(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-accounts"),onClick:m[20]||(m[20]=f=>a(ee).get(p.route("admin.finance-account.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"groups_2"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[54]||(m[54]=[v("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.operational-cost.index")||p.$can("admin.operational-cost-category.index")?(d(),D(jt,{key:6,icon:"paid",label:"Operasional","default-opened":p.$page.url.startsWith("/admin/operational-costs")||p.$page.url.startsWith("/admin/operational-cost-categories")},{default:l(()=>[p.$can("admin.operational-cost.index")?ae((d(),D(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-costs"),onClick:m[21]||(m[21]=f=>a(ee).get(p.route("admin.operational-cost.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"request_quote"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[55]||(m[55]=[v("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.operational-cost-category.index")?ae((d(),D(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-cost-categories"),onClick:m[22]||(m[22]=f=>a(ee).get(p.route("admin.operational-cost-category.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"category"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[56]||(m[56]=[v("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(jt,{icon:"settings",label:"Pengaturan","default-opened":p.$page.url.startsWith("/admin/settings")},{default:l(()=>[p.$can("admin.user.index")?ae((d(),D(oe,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/users"),onClick:m[23]||(m[23]=f=>a(ee).get(p.route("admin.user.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"person"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[57]||(m[57]=[v("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.user-role.index")?ae((d(),D(oe,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-roles"),onClick:m[24]||(m[24]=f=>a(ee).get(p.route("admin.user-role.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"group"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[58]||(m[58]=[v("Role Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.tax-scheme.index")?ae((d(),D(oe,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/tax-schemes"),onClick:m[25]||(m[25]=f=>a(ee).get(p.route("admin.tax-scheme.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"credit_card_gear"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[59]||(m[59]=[v("Skema Pajak")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.pos-settings.edit")?ae((d(),D(oe,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/pos"),onClick:m[26]||(m[26]=f=>a(ee).get(p.route("admin.pos-settings.edit")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"point_of_sale"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[60]||(m[60]=[v("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.company-profile.edit")?ae((d(),D(oe,{key:4,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/company-profile"),onClick:m[27]||(m[27]=f=>a(ee).get(p.route("admin.company-profile.edit")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"apartment"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[61]||(m[61]=[v("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.user-activity-log.index")?ae((d(),D(oe,{key:5,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:m[28]||(m[28]=f=>a(ee).get(p.route("admin.user-activity-log.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"article"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[62]||(m[62]=[v("Log Aktivitas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),p.$can("admin.database-settings.index")?ae((d(),D(oe,{key:6,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/database"),onClick:m[29]||(m[29]=f=>a(ee).get(p.route("admin.database-settings.index")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"database"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[63]||(m[63]=[v("Database")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]]):k("",!0),ae((d(),D(oe,{class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/system-information"),onClick:m[30]||(m[30]=f=>a(ee).get(p.route("admin.settings.system-information")))},{default:l(()=>[e(z,{avatar:""},{default:l(()=>[e(T,{name:"info"})]),_:1}),e(z,null,{default:l(()=>[e(he,null,{default:l(()=>m[64]||(m[64]=[v("Informasi Sistem")])),_:1})]),_:1})]),_:1},8,["active"])),[[ie]])]),_:1},8,["default-opened"]),t("div",LS,"  2025 - "+r(p.$config.APP_NAME+" v"+p.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(bs,{class:"bg-grey-1"},{default:l(()=>[e(Te,null,{default:l(()=>[qt(p.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),qt(p.$slots,"footer",{},void 0,!0)]),_:3}))}},HS=_t(KS,[["__scopeId","data-v-b836bcbf"]]),YS={__name:"GuestLayout",setup(c){return(s,u)=>(d(),D(ys,null,{default:l(()=>[qt(s.$slots,"default")]),_:3}))}};_s({onRegistered(c){console.log("Admin Service Worker registered:",c)}});ks({layouts:{authenticated:HS,guest:YS},pagesGlob:Object.assign({"./pages/_examples/Autocomplete1.vue":xs,"./pages/auth/Login.vue":Os,"./pages/cashier-session/Close.vue":Ms,"./pages/cashier-session/Detail.vue":Tr,"./pages/cashier-session/Index.vue":Dr,"./pages/cashier-session/Open.vue":Mr,"./pages/cashier-session/detail/FinanceTransactionTab.vue":xr,"./pages/cashier-session/detail/MainInfoTab.vue":dr,"./pages/cashier-session/detail/SalesOrderTab.vue":yr,"./pages/cashier-terminal/Detail.vue":ei,"./pages/cashier-terminal/Editor.vue":ni,"./pages/cashier-terminal/Index.vue":mi,"./pages/cashier-terminal/detail/MainInfoTab.vue":Yr,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":Qr,"./pages/customer-wallet-transaction-confirmation/Detail.vue":hi,"./pages/customer-wallet-transaction-confirmation/Index.vue":Ci,"./pages/customer-wallet-transaction/Adjustment.vue":Ri,"./pages/customer-wallet-transaction/Detail.vue":Fi,"./pages/customer-wallet-transaction/Editor.vue":Hi,"./pages/customer-wallet-transaction/Index.vue":ed,"./pages/customer/Detail.vue":hd,"./pages/customer/Editor.vue":Vd,"./pages/customer/Import.vue":Id,"./pages/customer/Index.vue":Fd,"./pages/customer/detail/MainInfoTab.vue":id,"./pages/customer/detail/OrderHistoryTab.vue":bd,"./pages/customer/detail/WalletHistoryTab.vue":md,"./pages/dashboard/Index.vue":du,"./pages/dashboard/cards/ActualSummaryCard.vue":Qd,"./pages/dashboard/cards/ChartCard.vue":eu,"./pages/dashboard/cards/SummaryCard.vue":_u,"./pages/dashboard/cards/TopCard.vue":ou,"./pages/finance-account/Detail.vue":Ru,"./pages/finance-account/Editor.vue":ju,"./pages/finance-account/Index.vue":Qu,"./pages/finance-account/detail/HistoryTab.vue":Su,"./pages/finance-account/detail/MainInfoTab.vue":wu,"./pages/finance-transaction/Detail.vue":sm,"./pages/finance-transaction/Editor.vue":um,"./pages/finance-transaction/Index.vue":ym,"./pages/operational-cost-category/Editor.vue":hm,"./pages/operational-cost-category/Index.vue":Tm,"./pages/operational-cost/Detail.vue":Nm,"./pages/operational-cost/Editor.vue":Hm,"./pages/operational-cost/Index.vue":tc,"./pages/product-category/Editor.vue":nc,"./pages/product-category/Index.vue":cc,"./pages/product/Detail.vue":Dc,"./pages/product/Editor.vue":Hc,"./pages/product/Import.vue":Jc,"./pages/product/Index.vue":dp,"./pages/product/SendPriceList.vue":vp,"./pages/product/SendPriceList2.vue":xp,"./pages/product/detail/MainInfoTab.vue":Sc,"./pages/product/detail/StockHistoryTab.vue":Cc,"./pages/purchase-order-return/Create.vue":Cp,"./pages/purchase-order-return/Detail.vue":Cf,"./pages/purchase-order-return/Editor.vue":wg,"./pages/purchase-order-return/Index.vue":Ug,"./pages/purchase-order-return/detail/MainInfoTab.vue":tf,"./pages/purchase-order-return/detail/PaymentDialog.vue":df,"./pages/purchase-order-return/detail/RefundTab.vue":xf,"./pages/purchase-order-return/editor/HelpDialog.vue":Bf,"./pages/purchase-order-return/editor/ItemEditorDialog.vue":jf,"./pages/purchase-order-return/editor/ItemsListTable.vue":If,"./pages/purchase-order-return/editor/OrderInfoDialog.vue":Kf,"./pages/purchase-order-return/editor/PaymentDialog.vue":Gg,"./pages/purchase-order-return/editor/SuccessDialog.vue":m1,"./pages/purchase-order/Detail.vue":yb,"./pages/purchase-order/Editor.vue":Iv,"./pages/purchase-order/Index.vue":Kv,"./pages/purchase-order/detail/InvoiceTab.vue":L1,"./pages/purchase-order/detail/PaymentDialog.vue":X1,"./pages/purchase-order/detail/PaymentTab.vue":pb,"./pages/purchase-order/editor/HelpDialog.vue":Lb,"./pages/purchase-order/editor/ItemEditorDialog.vue":Fb,"./pages/purchase-order/editor/ItemsListTable.vue":$b,"./pages/purchase-order/editor/OrderInfoDialog.vue":Wb,"./pages/purchase-order/editor/PaymentDialog.vue":Mb,"./pages/purchase-order/editor/SuccessDialog.vue":rv,"./pages/sales-order-return/Create.vue":Qv,"./pages/sales-order-return/Detail.vue":Xy,"./pages/sales-order-return/Editor.vue":M_,"./pages/sales-order-return/Index.vue":ek,"./pages/sales-order-return/detail/MainInfoTab.vue":Sy,"./pages/sales-order-return/detail/PaymentDialog.vue":Oy,"./pages/sales-order-return/detail/RefundTab.vue":Wy,"./pages/sales-order-return/editor/HelpDialog.vue":d_,"./pages/sales-order-return/editor/ItemEditorDialog.vue":s_,"./pages/sales-order-return/editor/ItemsListTable.vue":l_,"./pages/sales-order-return/editor/OrderInfoDialog.vue":p_,"./pages/sales-order-return/editor/PaymentDialog.vue":vk,"./pages/sales-order-return/editor/SuccessDialog.vue":Rk,"./pages/sales-order/Detail.vue":Bw,"./pages/sales-order/Editor.vue":l2,"./pages/sales-order/Index.vue":k2,"./pages/sales-order/detail/InvoiceTab.vue":fw,"./pages/sales-order/detail/PaymentDialog.vue":hw,"./pages/sales-order/detail/PaymentTab.vue":Ew,"./pages/sales-order/editor/HelpDialog.vue":p0,"./pages/sales-order/editor/ItemEditorDialog.vue":m0,"./pages/sales-order/editor/ItemsListTable.vue":Hw,"./pages/sales-order/editor/OrderInfoDialog.vue":v0,"./pages/sales-order/editor/PaymentDialog.vue":i0,"./pages/sales-order/editor/SuccessDialog.vue":P0,"./pages/settings/SystemInformation.vue":V2,"./pages/settings/company-profile/Edit.vue":O2,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":q2,"./pages/settings/database/Index.vue":E2,"./pages/settings/pos/Edit.vue":F2,"./pages/settings/user-activity-log/Detail.vue":Ch,"./pages/settings/user-activity-log/Index.vue":Dh,"./pages/settings/user-profile/Edit.vue":Fh,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":jh,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":Eh,"./pages/settings/user-role/Detail.vue":e$,"./pages/settings/user-role/Editor.vue":s$,"./pages/settings/user-role/Index.vue":c$,"./pages/settings/user/Detail.vue":x$,"./pages/settings/user/Editor.vue":P$,"./pages/settings/user/Index.vue":E$,"./pages/stock-adjustment/Create.vue":W$,"./pages/stock-adjustment/Detail.vue":nx,"./pages/stock-adjustment/Editor.vue":cx,"./pages/stock-adjustment/Index.vue":xx,"./pages/stock-movement/Index.vue":Tx,"./pages/supplier/Detail.vue":Gx,"./pages/supplier/Editor.vue":dS,"./pages/supplier/Index.vue":vS,"./pages/supplier/detail/MainInfoTab.vue":Mx,"./pages/supplier/detail/OrderHistoryTab.vue":Kx,"./pages/tax-scheme/Editor.vue":SS,"./pages/tax-scheme/Index.vue":ES})});
