import{r as O,a as J,c as I,o as d,w as a,b as t,d as e,e as w,f as k,Q as ce,t as r,u as l,g as K,h as Re,i as la,T as We,j as Pn,k as ge,l as Ve,m as Qe,n as X,p as lt,q as ue,s as ae,v as b,x as Yt,y as V,z as ie,A as E,B as et,F as W,C as Ye,D as te,E as vt,G as kt,H as Y,I as Rn,J as Sa,K as lo,L as St,M as G,N as Gt,O as ye,R as se,P as Se,S as oo,U as On,V as Dn,W as Nt,X as Pt,Y as Va,Z as Ra,_ as In,$ as He,a0 as Un,a1 as jn,a2 as En,a3 as Et,a4 as An,a5 as Mn,a6 as qa,a7 as Ht,a8 as Ca,a9 as La,aa as Nn,ab as ua,ac as Ha,ad as Bn,ae as Ka,af as zn,ag as no,ah as Fn,ai as Ln,aj as Hn,ak as Ia,al as Ua,am as Kn,an as jt,ao as ve,ap as De,aq as Ne,ar as Be,as as ke,at as Pe,au as Q,av as he,aw as ot,ax as Le,ay as Ue,az as Wt,aA as xe,aB as tt,aC as Ae,aD as Je,aE as ze,aF as Te,aG as Ge,aH as Ie,aI as le,aJ as z,aK as me,aL as at,aM as Ee,aN as oa,aO as ca,aP as Ce,aQ as Ke,aR as Fe,aS as Ya,aT as Tt,aU as pa,aV as ea,aW as ja,aX as na,aY as wt,aZ as Yn,a_ as ta,a$ as Wn,b0 as Qn,b1 as so,b2 as Jn,b3 as Gn,b4 as Xn,b5 as Zn,b6 as Wa,b7 as es,b8 as ro,b9 as ts,ba as as,bb as Qt,bc as Oe,bd as ft,be as ls,bf as Qa,bg as os,bh as ns,bi as ss,bj as rs,bk as is,bl as ds,bm as us,bn as be,bo as yt,bp as Zt,bq as aa,br as ms,bs as cs,bt as Xe,bu as it,bv as ps,bw as fs,bx as gs,by as bs,bz as vs,bA as Ea,bB as _s,bC as xt,bD as pt,bE as Aa,bF as Oa,bG as io,bH as zt,bI as uo,bJ as Jt,bK as mo,bL as gt,bM as mt,bN as ct,bO as ht,bP as co,bQ as po,bR as fo,bS as go,bT as fa,bU as At,bV as ys,bW as ks,bX as ws,bY as bo,bZ as hs,b_ as $s,b$ as xs,c0 as Ss,c1 as Ja,c2 as Vs,c3 as qs,c4 as Cs,c5 as Ts,c6 as Ps,c7 as Rs,c8 as Os,c9 as Ds,ca as Is}from"./virtual_pwa-register-Ddtoptmh.js";const Us={class:"q-ma-md"},js={key:0},Es={__name:"Autocomplete1",setup(c){const s=O(null),m=O([]);let o=null;const i=(n,f)=>{if(n.length<2){f(()=>{m.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Re.get(`/web-api/customers?q=${n}`).then(v=>{const p=v.data.data.map(u=>({label:`${u.code} - ${u.name}`,value:u.id,data:u}));f(()=>{m.value=p})}).catch(v=>{console.error("Gagal mengambil data pelanggan:",v),f(()=>{m.value=[]})})})};return(n,f)=>{const v=J("guest-layout");return d(),I(v,null,{default:a(()=>[t("div",Us,[e(ce,{class:"full-width",modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=p=>s.value=p),"use-input":"",label:"Cari Pelanggan",options:m.value,onFilter:i,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),s.value?(d(),w("div",js," Saldo: Rp. "+r(l(K)(s.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},As=Object.freeze(Object.defineProperty({__proto__:null,default:Es},Symbol.toStringTag,{value:"Module"})),Ms={style:{"margin-left":"-10px"}},ga={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(c,{emit:s}){const m=c,o=s;return(i,n)=>(d(),w("div",Ms,[e(la,{class:"full-width q-pl-none","model-value":m.modelValue,disable:m.disable,label:m.label,"onUpdate:modelValue":n[0]||(n[0]=f=>o("update:modelValue",f))},null,8,["model-value","disable","label"])]))}};function Da(c){return c instanceof File||c instanceof Blob||c instanceof FileList&&c.length>0||c instanceof FormData&&Array.from(c.values()).some(s=>Da(s))||typeof c=="object"&&c!==null&&Object.values(c).some(s=>Da(s))}function Ns(c,s=null){const m=We(c,s);let o=f=>f,i=null;const n={transform:f=>v=>(o=v,f),submit:f=>(v,p,u={})=>{m.wasSuccessful=!1,m.recentlySuccessful=!1,m.clearErrors(),clearTimeout(i),u.onBefore&&u.onBefore(),m.processing=!0,u.onStart&&u.onStart();const g=o(m.data());axios[v](p,g,{headers:{"Content-Type":Da(g)?"multipart/form-data":"application/json"},onUploadProgress:_=>{m.progress=_,u.onProgress&&u.onProgress(_)}}).then(_=>{m.processing=!1,m.progress=null,m.clearErrors(),m.wasSuccessful=!0,m.recentlySuccessful=!0,i=setTimeout(()=>m.recentlySuccessful=!1,2e3),u.onSuccess&&u.onSuccess(_.data),m.defaults(Pn(m.data())),m.isDirty=!1}).catch(_=>{var y;m.processing=!1,m.progress=null,m.clearErrors(),((y=_.response)==null?void 0:y.status)===422&&Object.keys(_.response.data.errors).forEach($=>{m.setError($,_.response.data.errors[$][0])}),u.onError&&u.onError(_)}).finally(()=>{m.processing=!1,m.progress=null,u.onFinish&&u.onFinish()})}};return new Proxy(m,{get:(f,v,p)=>Object.keys(n).indexOf(v)<0?f[v]:n[v](p)})}const Bs={class:"column"},zs={class:"row"},Fs={class:"q-my-sm text-grey-7 text-subtitle1 text-bold"},Ls={class:"flex justify-center"},Hs={__name:"Login",setup(c){let s=Ns({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const m=ge();console.log(m.props.data);const o=()=>lt({form:s,url:route("admin.auth.login"),onSuccess:()=>{s.processing=!0,window.location.href=route("admin.dashboard")}}),i=O(!1);return(n,f)=>{const v=J("i-head"),p=J("guest-layout");return d(),w(W,null,[e(v,{title:"Login"}),e(p,null,{default:a(()=>[e(Ve,{class:"row justify-center items-center"},{default:a(()=>[t("div",Bs,[t("div",zs,[e(Qe,{class:"q-gutter-md",onSubmit:X(o,["prevent"])},{default:a(()=>[e(ue,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:a(()=>[e(ae,{class:"text-center"},{default:a(()=>[t("div",Fs,[b(" Login ke "+r(l(m).props.company.name)+" ",1),t("div",Ls,[e(Yt,{size:"100px",class:"q-my-none"},{default:a(()=>[e(V,{name:"badge",color:"grey"})]),_:1})])]),e(ie,{modelValue:l(s).username,"onUpdate:modelValue":f[0]||(f[0]=u=>l(s).username=u),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!l(s).errors.username,autocomplete:"username","error-message":l(s).errors.username,disable:l(s).processing,rules:[u=>u&&u.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:a(()=>[e(V,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(ie,{modelValue:l(s).password,"onUpdate:modelValue":f[2]||(f[2]=u=>l(s).password=u),type:i.value?"text":"password",label:"Kata Sandi",error:!!l(s).errors.password,autocomplete:"current-password","error-message":l(s).errors.password,"lazy-rules":"",disable:l(s).processing,rules:[u=>u&&u.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:f[1]||(f[1]=u=>i.value=!i.value)},{default:a(()=>[e(V,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(ga,{class:"q-mt-sm",modelValue:l(s).remember,"onUpdate:modelValue":f[3]||(f[3]=u=>l(s).remember=u),disable:l(s).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(et,null,{default:a(()=>[e(E,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:l(s).processing,loading:l(s).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Ks=Object.freeze(Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"})),Ys={class:"q-gutter-sm"},Ws={class:"col col-md-6 q-pa-xs"},Qs={class:"detail q-mt-md"},Js={key:0},Gs={class:"text-bold"},Ga="Tutup Sesi Kasir",Xs={__name:"Close",setup(c){const s=ge(),m=We({closing_notes:s.props.data.closing_notes,closing_balance:parseFloat(s.props.data.closing_balance)}),o=()=>lt({form:m,url:route("admin.cashier-session.close",{id:s.props.data.id})});return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),w(W,null,[e(f,{title:Ga}),e(v,null,{title:a(()=>[b(r(Ga))]),"left-button":a(()=>[t("div",Ys,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Ws,[e(Qe,{class:"row",onSubmit:X(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":n[1]||(n[1]=p=>l(m).id=p)},null,512),[[vt,l(m).id]]),e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[t("table",Qs,[t("tbody",null,[t("tr",null,[n[4]||(n[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),n[5]||(n[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.id),1)]),t("tr",null,[n[6]||(n[6]=t("td",null,"Terminal",-1)),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"Kasir",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.user.username)+" - "+r(l(s).props.data.user.name),1)]),t("tr",null,[n[10]||(n[10]=t("td",null,"Saldo Awal",-1)),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,r(l(kt)(l(s).props.data.opening_balance)),1)]),l(s).props.data.opening_notes?(d(),w("tr",Js,[n[12]||(n[12]=t("td",null,"Catatan Buka",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.opening_notes),1)])):k("",!0),t("tr",null,[n[14]||(n[14]=t("td",null,"Total Penjualan",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,r(l(kt)(l(s).props.data.total_sales)),1)]),t("tr",null,[n[16]||(n[16]=t("td",null,"Total Pemasukan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,r(l(kt)(l(s).props.data.total_income)),1)]),t("tr",null,[n[18]||(n[18]=t("td",null,"Total Pengeluaran",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,r(l(kt)(l(s).props.data.total_expense)),1)]),t("tr",null,[n[21]||(n[21]=t("td",null,"Saldo Akhir",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,[t("div",Gs,r(l(kt)(l(s).props.data.closing_balance)),1),n[20]||(n[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(ie,{modelValue:l(m).closing_notes,"onUpdate:modelValue":n[2]||(n[2]=p=>l(m).closing_notes=p),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(m).processing,error:!!l(m).errors.closing_notes,"error-message":l(m).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:l(m).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(m).processing,onClick:n[3]||(n[3]=p=>l(Y).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Zs=Object.freeze(Object.defineProperty({__proto__:null,default:Xs},Symbol.toStringTag,{value:"Module"}));let er=0;const tr=["click","keydown"],ar={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${er++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function lr(c,s,m,o){const i=Rn(lo,Sa);if(i===Sa)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Sa;const{proxy:n}=St(),f=O(null),v=O(null),p=O(null),u=G(()=>c.disable===!0||c.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},c.ripple===!0?{}:c.ripple)),g=G(()=>i.currentModel.value===c.name),_=G(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(g.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(c.icon&&c.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(c.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(c.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),y=G(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(c.contentClass!==void 0?` ${c.contentClass}`:"")),$=G(()=>c.disable===!0||i.hasFocus.value===!0||g.value===!1&&i.hasActiveTab.value===!0?-1:c.tabindex||0);function C(N,M){if(M!==!0&&f.value!==null&&f.value.focus(),c.disable!==!0){i.updateModel({name:c.name}),m("click",N);return}}function D(N){On(N,[13,32])?C(N,!0):Dn(N)!==!0&&N.keyCode>=35&&N.keyCode<=40&&N.altKey!==!0&&N.metaKey!==!0&&i.onKbdNavigate(N.keyCode,n.$el)===!0&&Nt(N),m("keydown",N)}function F(){const N=i.tabProps.value.narrowIndicator,M=[],R=Se("div",{ref:p,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});c.icon!==void 0&&M.push(Se(V,{class:"q-tab__icon",name:c.icon})),c.label!==void 0&&M.push(Se("div",{class:"q-tab__label"},c.label)),c.alert!==!1&&M.push(c.alertIcon!==void 0?Se(V,{class:"q-tab__alert-icon",color:c.alert!==!0?c.alert:void 0,name:c.alertIcon}):Se("div",{class:"q-tab__alert"+(c.alert!==!0?` text-${c.alert}`:"")})),N===!0&&M.push(R);const B=[Se("div",{class:"q-focus-helper",tabindex:-1,ref:f}),Se("div",{class:y.value},oo(s.default,M))];return N===!1&&B.push(R),B}const A={name:G(()=>c.name),rootRef:v,tabIndicatorRef:p,routeData:o};Gt(()=>{i.unregisterTab(A)}),ye(()=>{i.registerTab(A)});function T(N,M){const R={ref:v,class:_.value,tabindex:$.value,role:"tab","aria-selected":g.value===!0?"true":"false","aria-disabled":c.disable===!0?"true":void 0,onClick:C,onKeydown:D,...M};return te(Se(N,R,F()),[[se,u.value]])}return{renderTab:T,$tabs:i}}const nt=Pt({name:"QTab",props:ar,emits:tr,setup(c,{slots:s,emit:m}){const{renderTab:o}=lr(c,s,m);return()=>o("div")}});function or(c,s,m){const o=m===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${c?` text-${c}`:""}`}const nr=["left","center","right","justify"],Vt=Pt({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:c=>nr.includes(c)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(c,{slots:s,emit:m}){const{proxy:o}=St(),{$q:i}=o,{registerTick:n}=Va(),{registerTick:f}=Va(),{registerTick:v}=Va(),{registerTimeout:p,removeTimeout:u}=Ra(),{registerTimeout:g,removeTimeout:_}=Ra(),y=O(null),$=O(null),C=O(c.modelValue),D=O(!1),F=O(!0),A=O(!1),T=O(!1),N=[],M=O(0),R=O(!1);let B=null,h=null,x;const P=G(()=>({activeClass:c.activeClass,activeColor:c.activeColor,activeBgColor:c.activeBgColor,indicatorClass:or(c.indicatorColor,c.switchIndicator,c.vertical),narrowIndicator:c.narrowIndicator,inlineLabel:c.inlineLabel,noCaps:c.noCaps})),q=G(()=>{const _e=M.value,$e=C.value;for(let je=0;je<_e;je++)if(N[je].name.value===$e)return!0;return!1}),S=G(()=>`q-tabs__content--align-${D.value===!0?"left":T.value===!0?"justify":c.align}`),U=G(()=>`q-tabs row no-wrap items-center q-tabs--${D.value===!0?"":"not-"}scrollable q-tabs--${c.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${c.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${c.mobileArrows===!0?"":"out"}-arrows`+(c.dense===!0?" q-tabs--dense":"")+(c.shrink===!0?" col-shrink":"")+(c.stretch===!0?" self-stretch":"")),j=G(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+S.value+(c.contentClass!==void 0?` ${c.contentClass}`:"")),oe=G(()=>c.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),re=G(()=>c.vertical!==!0&&i.lang.rtl===!0),H=G(()=>In===!1&&re.value===!0);He(re,ee),He(()=>c.modelValue,_e=>{L({name:_e,setCurrent:!0,skipEmit:!0})}),He(()=>c.outsideArrows,pe);function L({name:_e,setCurrent:$e,skipEmit:je}){C.value!==_e&&(je!==!0&&c["onUpdate:modelValue"]!==void 0&&m("update:modelValue",_e),($e===!0||c["onUpdate:modelValue"]===void 0)&&(Z(C.value,_e),C.value=_e))}function pe(){n(()=>{ne({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function ne(_e){if(oe.value===void 0||$.value===null)return;const $e=_e[oe.value.container],je=Math.min($.value[oe.value.scroll],Array.prototype.reduce.call($.value.children,(ut,Ze)=>ut+(Ze[oe.value.content]||0),0)),dt=$e>0&&je>$e;D.value=dt,dt===!0&&f(ee),T.value=$e<parseInt(c.breakpoint,10)}function Z(_e,$e){const je=_e!=null&&_e!==""?N.find(ut=>ut.name.value===_e):null,dt=$e!=null&&$e!==""?N.find(ut=>ut.name.value===$e):null;if(da===!0)da=!1;else if(je&&dt){const ut=je.tabIndicatorRef.value,Ze=dt.tabIndicatorRef.value;B!==null&&(clearTimeout(B),B=null),ut.style.transition="none",ut.style.transform="none",Ze.style.transition="none",Ze.style.transform="none";const Me=ut.getBoundingClientRect(),_t=Ze.getBoundingClientRect();Ze.style.transform=c.vertical===!0?`translate3d(0,${Me.top-_t.top}px,0) scale3d(1,${_t.height?Me.height/_t.height:1},1)`:`translate3d(${Me.left-_t.left}px,0,0) scale3d(${_t.width?Me.width/_t.width:1},1,1)`,v(()=>{B=setTimeout(()=>{B=null,Ze.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Ze.style.transform="none"},70)})}dt&&D.value===!0&&de(dt.rootRef.value)}function de(_e){const{left:$e,width:je,top:dt,height:ut}=$.value.getBoundingClientRect(),Ze=_e.getBoundingClientRect();let Me=c.vertical===!0?Ze.top-dt:Ze.left-$e;if(Me<0){$.value[c.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Me),ee();return}Me+=c.vertical===!0?Ze.height-ut:Ze.width-je,Me>0&&($.value[c.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Me),ee())}function ee(){const _e=$.value;if(_e===null)return;const $e=_e.getBoundingClientRect(),je=c.vertical===!0?_e.scrollTop:Math.abs(_e.scrollLeft);re.value===!0?(F.value=Math.ceil(je+$e.width)<_e.scrollWidth-1,A.value=je>0):(F.value=je>0,A.value=c.vertical===!0?Math.ceil(je+$e.height)<_e.scrollHeight:Math.ceil(je+$e.width)<_e.scrollWidth)}function fe(_e){h!==null&&clearInterval(h),h=setInterval(()=>{It(_e)===!0&&rt()},5)}function qe(){fe(H.value===!0?Number.MAX_SAFE_INTEGER:0)}function we(){fe(H.value===!0?0:Number.MAX_SAFE_INTEGER)}function rt(){h!==null&&(clearInterval(h),h=null)}function $t(_e,$e){const je=Array.prototype.filter.call($.value.children,_t=>_t===$e||_t.matches&&_t.matches(".q-tab.q-focusable")===!0),dt=je.length;if(dt===0)return;if(_e===36)return de(je[0]),je[0].focus(),!0;if(_e===35)return de(je[dt-1]),je[dt-1].focus(),!0;const ut=_e===(c.vertical===!0?38:37),Ze=_e===(c.vertical===!0?40:39),Me=ut===!0?-1:Ze===!0?1:void 0;if(Me!==void 0){const _t=re.value===!0?-1:1,Ot=je.indexOf($e)+Me*_t;return Ot>=0&&Ot<dt&&(de(je[Ot]),je[Ot].focus({preventScroll:!0})),!0}}const Rt=G(()=>H.value===!0?{get:_e=>Math.abs(_e.scrollLeft),set:(_e,$e)=>{_e.scrollLeft=-$e}}:c.vertical===!0?{get:_e=>_e.scrollTop,set:(_e,$e)=>{_e.scrollTop=$e}}:{get:_e=>_e.scrollLeft,set:(_e,$e)=>{_e.scrollLeft=$e}});function It(_e){const $e=$.value,{get:je,set:dt}=Rt.value;let ut=!1,Ze=je($e);const Me=_e<Ze?-1:1;return Ze+=Me*5,Ze<0?(ut=!0,Ze=0):(Me===-1&&Ze<=_e||Me===1&&Ze>=_e)&&(ut=!0,Ze=_e),dt($e,Ze),ee(),ut}function ia(_e,$e){for(const je in _e)if(_e[je]!==$e[je])return!1;return!0}function $n(){let _e=null,$e={matchedLen:0,queryDiff:9999,hrefLen:0};const je=N.filter(Me=>Me.routeData!==void 0&&Me.routeData.hasRouterLink.value===!0),{hash:dt,query:ut}=o.$route,Ze=Object.keys(ut).length;for(const Me of je){const _t=Me.routeData.exact.value===!0;if(Me.routeData[_t===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ot,query:$a,matched:Cn,href:Tn}=Me.routeData.resolvedLink.value,xa=Object.keys($a).length;if(_t===!0){if(Ot!==dt||xa!==Ze||ia(ut,$a)===!1)continue;_e=Me.name.value;break}if(Ot!==""&&Ot!==dt||xa!==0&&ia($a,ut)===!1)continue;const Ut={matchedLen:Cn.length,queryDiff:Ze-xa,hrefLen:Tn.length-Ot.length};if(Ut.matchedLen>$e.matchedLen){_e=Me.name.value,$e=Ut;continue}else if(Ut.matchedLen!==$e.matchedLen)continue;if(Ut.queryDiff<$e.queryDiff)_e=Me.name.value,$e=Ut;else if(Ut.queryDiff!==$e.queryDiff)continue;Ut.hrefLen>$e.hrefLen&&(_e=Me.name.value,$e=Ut)}if(_e===null&&N.some(Me=>Me.routeData===void 0&&Me.name.value===C.value)===!0){da=!1;return}L({name:_e,setCurrent:!0})}function xn(_e){if(u(),R.value!==!0&&y.value!==null&&_e.target&&typeof _e.target.closest=="function"){const $e=_e.target.closest(".q-tab");$e&&y.value.contains($e)===!0&&(R.value=!0,D.value===!0&&de($e))}}function Sn(){p(()=>{R.value=!1},30)}function Xt(){Ba.avoidRouteWatcher===!1?g($n):_()}function Na(){if(x===void 0){const _e=He(()=>o.$route.fullPath,Xt);x=()=>{_e(),x=void 0}}}function Vn(_e){N.push(_e),M.value++,pe(),_e.routeData===void 0||o.$route===void 0?g(()=>{if(D.value===!0){const $e=C.value,je=$e!=null&&$e!==""?N.find(dt=>dt.name.value===$e):null;je&&de(je.rootRef.value)}}):(Na(),_e.routeData.hasRouterLink.value===!0&&Xt())}function qn(_e){N.splice(N.indexOf(_e),1),M.value--,pe(),x!==void 0&&_e.routeData!==void 0&&(N.every($e=>$e.routeData===void 0)===!0&&x(),Xt())}const Ba={currentModel:C,tabProps:P,hasFocus:R,hasActiveTab:q,registerTab:Vn,unregisterTab:qn,verifyRouteModel:Xt,updateModel:L,onKbdNavigate:$t,avoidRouteWatcher:!1};An(lo,Ba);function za(){B!==null&&clearTimeout(B),rt(),x!==void 0&&x()}let Fa,da;return Gt(za),Un(()=>{Fa=x!==void 0,za()}),jn(()=>{Fa===!0&&(Na(),da=!0,Xt()),pe()}),()=>Se("div",{ref:y,class:U.value,role:"tablist",onFocusin:xn,onFocusout:Sn},[Se(En,{onResize:ne}),Se("div",{ref:$,class:j.value,onScroll:ee},Et(s.default)),Se(V,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(F.value===!0?"":" q-tabs__arrow--faded"),name:c.leftIcon||i.iconSet.tabs[c.vertical===!0?"up":"left"],onMousedownPassive:qe,onTouchstartPassive:qe,onMouseupPassive:rt,onMouseleavePassive:rt,onTouchendPassive:rt}),Se(V,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(A.value===!0?"":" q-tabs__arrow--faded"),name:c.rightIcon||i.iconSet.tabs[c.vertical===!0?"down":"right"],onMousedownPassive:we,onTouchstartPassive:we,onMouseupPassive:rt,onMouseleavePassive:rt,onTouchendPassive:rt})])}});function sr(c){const s=[.06,6,50];return typeof c=="string"&&c.length&&c.split(":").forEach((m,o)=>{const i=parseFloat(m);i&&(s[o]=i)}),s}const rr=Mn({name:"touch-swipe",beforeMount(c,{value:s,arg:m,modifiers:o}){if(o.mouse!==!0&&Ht.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",n={handler:s,sensitivity:sr(m),direction:La(o),noop:Nn,mouseStart(f){Ka(f,n)&&zn(f)&&(ua(n,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(f,!0))},touchStart(f){if(Ka(f,n)){const v=f.target;ua(n,"temp",[[v,"touchmove","move","notPassiveCapture"],[v,"touchcancel","end","notPassiveCapture"],[v,"touchend","end","notPassiveCapture"]]),n.start(f)}},start(f,v){Ht.is.firefox===!0&&Ca(c,!0);const p=Ha(f);n.event={x:p.left,y:p.top,time:Date.now(),mouse:v===!0,dir:!1}},move(f){if(n.event===void 0)return;if(n.event.dir!==!1){Nt(f);return}const v=Date.now()-n.event.time;if(v===0)return;const p=Ha(f),u=p.left-n.event.x,g=Math.abs(u),_=p.top-n.event.y,y=Math.abs(_);if(n.event.mouse!==!0){if(g<n.sensitivity[1]&&y<n.sensitivity[1]){n.end(f);return}}else if(window.getSelection().toString()!==""){n.end(f);return}else if(g<n.sensitivity[2]&&y<n.sensitivity[2])return;const $=g/v,C=y/v;n.direction.vertical===!0&&g<y&&g<100&&C>n.sensitivity[0]&&(n.event.dir=_<0?"up":"down"),n.direction.horizontal===!0&&g>y&&y<100&&$>n.sensitivity[0]&&(n.event.dir=u<0?"left":"right"),n.direction.up===!0&&g<y&&_<0&&g<100&&C>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&g<y&&_>0&&g<100&&C>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&g>y&&u<0&&y<100&&$>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&g>y&&u>0&&y<100&&$>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Nt(f),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Bn(),n.styleCleanup=D=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const F=()=>{document.body.classList.remove("no-pointer-events--children")};D===!0?setTimeout(F,50):F()}),n.handler({evt:f,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:v,distance:{x:g,y}})):n.end(f)},end(f){n.event!==void 0&&(qa(n,"temp"),Ht.is.firefox===!0&&Ca(c,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),f!==void 0&&n.event.dir!==!1&&Nt(f),n.event=void 0)}};if(c.__qtouchswipe=n,o.mouse===!0){const f=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ua(n,"main",[[c,"mousedown","mouseStart",`passive${f}`]])}Ht.has.touch===!0&&ua(n,"main",[[c,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[c,"touchmove","noop","notPassiveCapture"]])},updated(c,s){const m=c.__qtouchswipe;m!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&m.end(),m.handler=s.value),m.direction=La(s.modifiers))},beforeUnmount(c){const s=c.__qtouchswipe;s!==void 0&&(qa(s,"main"),qa(s,"temp"),Ht.is.firefox===!0&&Ca(c,!1),s.styleCleanup!==void 0&&s.styleCleanup(),delete c.__qtouchswipe)}}),ir={name:{required:!0},disable:Boolean},Xa={setup(c,{slots:s}){return()=>Se("div",{class:"q-panel scroll",role:"tabpanel"},Et(s.default))}},dr={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},ur=["update:modelValue","beforeTransition","transition"];function mr(){const{props:c,emit:s,proxy:m}=St(),{getCache:o}=Ln(),{registerTimeout:i}=Ra();let n,f;const v=O(null),p=O(null);function u(oe){const re=c.vertical===!0?"up":"left";x((m.$q.lang.rtl===!0?-1:1)*(oe.direction===re?1:-1))}const g=G(()=>[[rr,u,void 0,{horizontal:c.vertical!==!0,vertical:c.vertical,mouse:!0}]]),_=G(()=>c.transitionPrev||`slide-${c.vertical===!0?"down":"right"}`),y=G(()=>c.transitionNext||`slide-${c.vertical===!0?"up":"left"}`),$=G(()=>`--q-transition-duration: ${c.transitionDuration}ms`),C=G(()=>typeof c.modelValue=="string"||typeof c.modelValue=="number"?c.modelValue:String(c.modelValue)),D=G(()=>({include:c.keepAliveInclude,exclude:c.keepAliveExclude,max:c.keepAliveMax})),F=G(()=>c.keepAliveInclude!==void 0||c.keepAliveExclude!==void 0);He(()=>c.modelValue,(oe,re)=>{const H=M(oe)===!0?R(oe):-1;f!==!0&&h(H===-1?0:H<R(re)?-1:1),v.value!==H&&(v.value=H,s("beforeTransition",oe,re),i(()=>{s("transition",oe,re)},c.transitionDuration))});function A(){x(1)}function T(){x(-1)}function N(oe){s("update:modelValue",oe)}function M(oe){return oe!=null&&oe!==""}function R(oe){return n.findIndex(re=>re.props.name===oe&&re.props.disable!==""&&re.props.disable!==!0)}function B(){return n.filter(oe=>oe.props.disable!==""&&oe.props.disable!==!0)}function h(oe){const re=oe!==0&&c.animated===!0&&v.value!==-1?"q-transition--"+(oe===-1?_.value:y.value):null;p.value!==re&&(p.value=re)}function x(oe,re=v.value){let H=re+oe;for(;H!==-1&&H<n.length;){const L=n[H];if(L!==void 0&&L.props.disable!==""&&L.props.disable!==!0){h(oe),f=!0,s("update:modelValue",L.props.name),setTimeout(()=>{f=!1});return}H+=oe}c.infinite===!0&&n.length!==0&&re!==-1&&re!==n.length&&x(oe,oe===-1?n.length:-1)}function P(){const oe=R(c.modelValue);return v.value!==oe&&(v.value=oe),!0}function q(){const oe=M(c.modelValue)===!0&&P()&&n[v.value];return c.keepAlive===!0?[Se(Hn,D.value,[Se(F.value===!0?o(C.value,()=>({...Xa,name:C.value})):Xa,{key:C.value,style:$.value},()=>oe)])]:[Se("div",{class:"q-panel scroll",style:$.value,key:C.value,role:"tabpanel"},[oe])]}function S(){if(n.length!==0)return c.animated===!0?[Se(no,{name:p.value},q)]:q()}function U(oe){return n=Fn(Et(oe.default,[])).filter(re=>re.props!==null&&re.props.slot===void 0&&M(re.props.name)===!0),n.length}function j(){return n}return Object.assign(m,{next:A,previous:T,goTo:N}),{panelIndex:v,panelDirectives:g,updatePanelsList:U,updatePanelIndex:P,getPanelContent:S,getEnabledPanels:B,getPanels:j,isValidPanelName:M,keepAliveProps:D,needsUniqueKeepAliveWrapper:F,goToPanelByOffset:x,goToPanel:N,nextPanel:A,previousPanel:T}}const st=Pt({name:"QTabPanel",props:ir,setup(c,{slots:s}){return()=>Se("div",{class:"q-tab-panel",role:"tabpanel"},Et(s.default))}}),qt=Pt({name:"QTabPanels",props:{...dr,...Ia},emits:ur,setup(c,{slots:s}){const m=St(),o=Ua(c,m.proxy.$q),{updatePanelsList:i,getPanelContent:n,panelDirectives:f}=mr(),v=G(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(s),Kn("div",{class:v.value},n(),"pan",c.swipeable,()=>f.value))}}),cr={class:"detail"},pr={class:"detail with-currency"},fr={class:"text-right"},gr={key:0},br={class:"detail with-currency"},vr={class:"text-right"},_r={class:"detail with-currency"},yr={class:"text-right"},kr={class:"text-right"},wr={key:0},hr={class:"text-right"},$r={class:"detail with-currency"},xr={class:"text-right"},Sr={key:0},Vr={key:0},qr={colspan:"100%"},Cr={class:"q-my-md"},Tr={class:"detail"},Pr={key:0},Rr={colspan:"100%"},Or={key:1},Dr={colspan:"100%"},vo={__name:"MainInfoTab",setup(c){const s=ge();return(m,o)=>{const i=J("my-link");return d(),w(W,null,[o[39]||(o[39]=t("div",{class:"text-bold text-grey-8"},"Info Sesi",-1)),t("table",cr,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",null,"Kode",-1)),o[2]||(o[2]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[e(i,{href:m.route("admin.user.detail",l(s).props.data.user.id)},{default:a(()=>[b(r(l(s).props.data.user.name)+" - "+r(l(s).props.data.user.username),1)]),_:1},8,["href"])])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.is_closed?"Selesai":"Aktif"),1)])])]),o[40]||(o[40]=t("div",{class:"q-mt-md text-grey-8 text-bold"},"Info Buka Sesi",-1)),t("table",pr,[t("tbody",null,[t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),o[11]||(o[11]=t("td",null,"Rp.",-1)),t("td",fr,r(l(K)(l(s).props.data.opening_balance)),1),o[12]||(o[12]=t("td",null,null,-1))]),l(s).props.data.opening_notes?(d(),w("tr",gr,[o[13]||(o[13]=t("td",null,"Catatan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.opening_notes),1)])):k("",!0)])]),o[41]||(o[41]=t("div",{class:"q-mt-md text-bold text-grey-8"},"Rincian Pendapatan & Kas",-1)),t("table",br,[t("tbody",null,[t("tr",null,[o[15]||(o[15]=t("td",null,"Total Penjualan",-1)),o[16]||(o[16]=t("td",null,":",-1)),o[17]||(o[17]=t("td",null,"Rp.",-1)),t("td",vr,r(l(K)(l(s).props.data.total_sales)),1),o[18]||(o[18]=t("td",null,null,-1))])])]),o[42]||(o[42]=t("div",{class:"q-mt-md text-bold text-grey-8"},"Rincian Kas",-1)),t("table",_r,[t("tbody",null,[t("tr",null,[o[19]||(o[19]=t("td",null,"Total Pemasukan",-1)),o[20]||(o[20]=t("td",null,":",-1)),o[21]||(o[21]=t("td",null,"Rp.",-1)),t("td",yr,r(l(K)(l(s).props.data.total_income)),1),o[22]||(o[22]=t("td",null,null,-1))]),t("tr",null,[o[23]||(o[23]=t("td",null,"Total Pengeluaran",-1)),o[24]||(o[24]=t("td",null,":",-1)),o[25]||(o[25]=t("td",null,"Rp.",-1)),t("td",kr,r(l(K)(l(s).props.data.total_expense)),1),o[26]||(o[26]=t("td",null,null,-1))]),l(s).props.data.is_closed?k("",!0):(d(),w("tr",wr,[o[27]||(o[27]=t("td",null,"Saldo Aktual",-1)),o[28]||(o[28]=t("td",null,":",-1)),o[29]||(o[29]=t("td",null,"Rp.",-1)),t("td",hr,r(l(K)(l(s).props.data.actual_balance)),1),o[30]||(o[30]=t("td",null,null,-1))]))])]),t("table",$r,[t("tbody",null,[l(s).props.data.is_closed?(d(),w(W,{key:0},[o[37]||(o[37]=t("div",{class:"q-mt-md text-bold text-grey-8"},"Info Tutup Sesi",-1)),t("tr",null,[o[31]||(o[31]=t("td",null,"Saldo Akhir",-1)),o[32]||(o[32]=t("td",null,":",-1)),o[33]||(o[33]=t("td",null,"Rp.",-1)),t("td",xr,r(l(K)(l(s).props.data.closing_balance)),1),o[34]||(o[34]=t("td",null,null,-1))]),l(s).props.data.closing_notes?(d(),w("tr",Sr,[o[35]||(o[35]=t("td",null,"Catatan",-1)),o[36]||(o[36]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),m.$can("admin.cashier-session.close")?(d(),w(W,{key:1},[l(s).props.data.is_closed?k("",!0):(d(),w("tr",Vr,[t("td",qr,[t("div",Cr,[e(E,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=n=>m.$inertia.get(m.route("admin.cashier-session.close",{id:l(s).props.data.id})))},{default:a(()=>o[38]||(o[38]=[b(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):k("",!0)])]),o[43]||(o[43]=t("div",{class:"q-mt-md text-bold text-grey-8"},"Info Rekaman",-1)),t("table",Tr,[t("tbody",null,[l(s).props.data.created_at?(d(),w("tr",Pr,[t("td",Rr," Dibuat "+r(l(jt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",Or,[t("td",Dr," Diperbarui "+r(l(jt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])])],64)}}},Ir=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),Ur={class:"full-width row flex-center text-grey-8 q-gutter-sm"},jr={class:"text-bold"},Er={key:0},Ar={class:"text-bold"},Mr={key:1},Nr={key:0},Br={key:0},zr={key:1},_o={__name:"SalesOrderTab",props:{data:Object},setup(c){const s=c,m=O([]),o=O(!0),i=De({...Ne(),cashier_session_id:s.data.id,status:["closed","canceled"]}),n=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];ye(()=>{v()});const v=(g=null)=>Be({pagination:n,filter:i,props:g,rows:m,url:route("admin.sales-order.data"),loading:o}),p=ke(),u=G(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:C})=>[t("div",Ur,[t("span",null,r($)+" "+r(C?" with term "+C:""),1)])]),body:a(y=>[e(Pe,{props:y,class:"cursor-pointer",onClick:X($=>l(Y).get(g.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",jr,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(y.row.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(" "+r(l(ve)(y.row.datetime)),1)]),l(p).screen.lt.md?(d(),w(W,{key:0},[y.row.customer?(d(),w("div",Er,[e(V,{class:"inline-icon",name:"person"}),b(" "+r(y.row.customer_code)+" "+r(y.row.customer.name),1)])):k("",!0),t("div",Ar,[e(V,{name:"money",class:"inline-icon"}),b(" Rp. "+r(l(K)(y.row.grand_total)),1)]),y.row.notes?(d(),w("div",Mr,[e(he,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(ot,{color:y.row.status==="closed"?"green":"red"},{default:a(()=>[b(r(g.$CONSTANTS.SALES_ORDER_STATUSES[y.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"customer",props:y},{default:a(()=>[y.row.customer?(d(),w("div",Nr,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(y.row.customer_code)+" - "+r(y.row.customer_name),1)]),y.row.customer_phone?(d(),w("div",Br,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(y.row.customer_phone),1)])):k("",!0),y.row.customer_address?(d(),w("div",zr,[e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(y.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:y},{default:a(()=>[t("div",null,r(l(K)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(he,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Fr=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),Lr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Hr={class:"text-bold"},Kr={class:"text-bold"},Yr={key:0},Wr={class:"q-mt-sm"},yo={__name:"FinanceTransactionTab",props:{data:Object},setup(c){var g;const s=c;console.log(s.data);const m=O([]),o=O(!0),i=De({...Ne(),account_id:(g=s.data.cashier_terminal)==null?void 0:g.finance_account_id,from_datetime:Wt(s.data.opened_at),to_datetime:s.data.closed_at?Wt(s.data.closed_at):null}),n=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];ye(()=>{v()});const v=(_=null)=>Be({pagination:n,filter:i,props:_,rows:m,url:route("admin.finance-transaction.data"),loading:o}),p=ke(),u=G(()=>p.screen.gt.sm?f:f.filter(_=>_.name==="id"));return(_,y)=>(d(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=$=>n.value=$),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:C,filter:D})=>[t("div",Lr,[t("span",null,r(C)+" "+r(D?" with term "+D:""),1)])]),body:a($=>[e(Pe,{props:$},{default:a(()=>[e(Q,{key:"id",props:$},{default:a(()=>[t("div",Hr,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r($.row.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(" "+r(l(ve)($.row.datetime)),1)]),l(p).screen.lt.md?(d(),w(W,{key:0},[t("div",Kr,[e(V,{name:"money",class:"inline-icon"}),b(" Rp. "+r(l(K)($.row.amount)),1)]),$.row.notes?(d(),w("div",Yr,[e(he,{text:$.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",Wr,[e(ot,{color:$.row.amount>=0?"green":"red"},{default:a(()=>[b(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[$.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"amount",props:$},{default:a(()=>[t("span",{class:xe($.row.amount<0?"text-red":"text-green")},r(l(K)($.row.amount)),3)]),_:2},1032,["props"]),e(Q,{key:"notes",props:$,class:"wrap-column"},{default:a(()=>[e(he,{text:$.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Qr=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),Jr={class:"q-gutter-sm"},Gr={class:"col col-lg-6 q-pa-xs"},Xr={class:"row"},Za="Rincian Sesi Kasir",Zr={__name:"Detail",setup(c){const s=ge(),m=G(()=>s.props.data),o=O("main");return He(()=>s.props.tab,i=>{i&&(o.value=i)},{immediate:!0}),(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),w(W,null,[e(f,{title:Za}),e(v,null,{title:a(()=>[b(r(Za))]),"left-button":a(()=>[t("div",Jr,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Gr,[t("div",Xr,[e(ue,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:a(()=>[e(Vt,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(nt,{name:"main",label:"Ringkasan"}),e(nt,{name:"sales",label:"Transaksi Penjualan"}),e(nt,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(qt,{modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=p=>o.value=p),animated:"",class:"q-pa-none"},{default:a(()=>[e(st,{name:"main"},{default:a(()=>[e(vo,{data:m.value},null,8,["data"])]),_:1}),e(st,{name:"sales",class:"q-pa-xs"},{default:a(()=>[e(_o,{data:m.value},null,8,["data"])]),_:1}),e(st,{name:"finance",class:"q-pa-xs"},{default:a(()=>[e(yo,{data:m.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},ei=Object.freeze(Object.defineProperty({__proto__:null,default:Zr},Symbol.toStringTag,{value:"Module"}));function Dt(){return{protectClick:s=>(m,o)=>{const i=window.getSelection();if(i&&!i.isCollapsed){o.stopPropagation();return}s(m,o)}}}const ti={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ai={class:"q-pa-xs"},li={class:"full-width row flex-center text-grey-8 q-gutter-sm"},oi={class:"row items-center q-gutter-x-sm"},ni={class:"avatar"},si={class:"col"},ri={class:"row items-center no-wrap"},ii={class:"row items-center no-wrap"},di={class:"row items-center q-gutter-x-sm"},ui={class:"avatar"},mi={class:"col"},ci={class:"row items-center no-wrap"},pi={class:"flex justify-end"},el="Sesi Kasir",fi={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=De({search:"",status:"all",...Ne()}),u=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];ye(()=>{$()});const y=N=>at({message:`Hapus Sesi: ${N.cashier_terminal.name} - ${N.user.username}?`,url:route("admin.cashier-session.delete",N.id),fetchItemsCallback:$,loading:i}),$=(N=null)=>{Be({pagination:u,filter:p,props:N,rows:o,url:route("admin.cashier-session.data"),loading:i,tableRef:n})},C=()=>$(),D=N=>Y.get(route("admin.cashier-session.detail",{id:N.id})),{protectClick:F}=Dt(),A=F(D),T=G(()=>s.screen.gt.sm?g:g.filter(N=>N.name==="id"||N.name==="action"));return(N,M)=>{const R=J("i-head"),B=J("authenticated-layout");return d(),w(W,null,[e(R,{title:el}),e(B,null,Ae({title:a(()=>[b(r(el))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:M[0]||(M[0]=h=>m.value=!m.value)},null,8,["icon"]),N.$can("admin.cashier-session.open")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:M[1]||(M[1]=h=>l(Y).get(N.route("admin.cashier-session.open")))})):k("",!0)]),default:a(()=>[t("div",ai,[e(Ue,{class:"full-height-table",style:ze({height:l(v)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":M[5]||(M[5]=h=>u.value=h),filter:p.search,loading:i.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:x,filter:P})=>[t("div",li,[t("span",null,r(x)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Pe,{props:h,class:xe(["cursor-pointer",h.row.is_closed?"":"bg-yellow-3"]),onClick:X(x=>l(A)(h.row,x),["stop"])},{default:a(()=>[e(Q,{key:"id",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(h.row.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"point_of_sale"}),b(" "+r(h.row.cashier_terminal.name),1)]),t("div",null,[e(V,{class:"inline-icon",name:"person"}),b(" "+r(h.row.user.username)+" - "+r(h.row.user.name),1)]),l(s).screen.lt.md?(d(),w(W,{key:0},[e(Te),t("div",oi,[t("div",ni,[e(V,{name:"login",size:"25px",color:"grey-8"})]),t("div",si,[t("div",ri,[e(V,{name:"calendar_clock",size:"xs",class:"q-mr-xs"}),t("span",null,r(h.row.opened_at?l(ve)(h.row.opened_at):"-"),1)]),t("div",ii,[e(V,{name:"money",size:"xs",class:"q-mr-xs"}),t("span",null,r(l(kt)(h.row.opening_balance)),1)])])]),h.row.is_closed?(d(),w(W,{key:0},[e(Te),t("div",di,[t("div",ui,[e(V,{name:"logout",size:"25px",color:"grey-8"})]),t("div",mi,[t("div",ci,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(h.row.closed_at?l(ve)(h.row.closed_at):"-"),1)]),t("div",null,[e(V,{class:"inline-icon",name:"money"}),b(" "+r(l(kt)(h.row.closing_balance)),1)])])])],64)):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"opening_info",props:h},{default:a(()=>[t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(h.row.opened_at?l(ve)(h.row.opened_at):"-"),1)]),t("div",null,[e(V,{class:"inline-icon",name:"money"}),b(" "+r(l(kt)(h.row.opening_balance)),1)]),h.row.opening_notes?(d(),I(he,{key:0,text:h.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"closing_info",props:h},{default:a(()=>[t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(h.row.closed_at?l(ve)(h.row.closed_at):"-"),1)]),t("div",null,[e(V,{class:"inline-icon",name:"money"}),b(" "+r(l(kt)(h.row.closing_balance)),1)]),h.row.closing_notes?(d(),I(he,{key:0,text:h.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"action",props:h},{default:a(()=>[t("div",pi,[N.$can("admin.cashier-session.close")||N.$can("admin.cashier-session.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:M[4]||(M[4]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[N.$can("admin.cashier-session.close")?te((d(),I(le,{key:0,disable:h.row.is_closed,clickable:"",onClick:X(x=>l(Y).get(N.route("admin.cashier-session.close",h.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"logout"})]),_:1}),e(z,null,{default:a(()=>M[6]||(M[6]=[b("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[se],[me]]):k("",!0),N.$can("admin.cashier-session.delete")&&!h.row.is_closed?te((d(),I(le,{key:1,onClick:X(x=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>M[7]||(M[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",ti,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[M[2]||(M[2]=h=>p.status=h),C],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":M[3]||(M[3]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},gi=Object.freeze(Object.defineProperty({__proto__:null,default:fi},Symbol.toStringTag,{value:"Module"})),bi={class:"q-gutter-sm"},vi={class:"col col-md-6 q-pa-xs"},tl="Buka Sesi Kasir",_i={__name:"Open",setup(c){const s=ge(),m=We({cashier_terminal_id:s.props.data.cashier_terminal_id,opening_balance:parseFloat(s.props.data.opening_balance),opening_notes:s.props.data.opening_notes}),o=[...s.props.cashier_terminals.map(n=>({value:n.id,label:n.name,balance:parseFloat(n.finance_account.balance)}))],i=()=>lt({form:m,url:route("admin.cashier-session.open")});return He(()=>m.cashier_terminal_id,n=>{if(n){const f=o.find(v=>v.value===n);f&&(m.opening_balance=f.balance)}else m.opening_balance=0}),(n,f)=>{const v=J("i-head"),p=J("authenticated-layout");return d(),w(W,null,[e(v,{title:tl}),e(p,null,{title:a(()=>[b(r(tl))]),"left-button":a(()=>[t("div",bi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=u=>n.$inertia.get(n.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",vi,[e(Qe,{class:"row",onSubmit:X(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=u=>l(m).id=u)},null,512),[[vt,l(m).id]]),e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(ce,{class:"custom-select",modelValue:l(m).cashier_terminal_id,"onUpdate:modelValue":f[2]||(f[2]=u=>l(m).cashier_terminal_id=u),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:l(m).errors.cashier_terminal_id,error:!!l(m).errors.cashier_terminal_id,disable:l(m).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Ee,{modelValue:l(m).opening_balance,"onUpdate:modelValue":f[3]||(f[3]=u=>l(m).opening_balance=u),label:"Saldo Buka Sesi",lazyRules:"",disable:l(m).processing,error:!!l(m).errors.opening_balance,errorMessage:l(m).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),f[6]||(f[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(ie,{modelValue:l(m).opening_notes,"onUpdate:modelValue":f[4]||(f[4]=u=>l(m).opening_notes=u),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(m).processing,error:!!l(m).errors.opening_notes,"error-message":l(m).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:l(m).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(m).processing,onClick:f[5]||(f[5]=u=>l(Y).get(n.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},yi=Object.freeze(Object.defineProperty({__proto__:null,default:_i},Symbol.toStringTag,{value:"Module"})),ki={class:"detail"},wi={colspan:"3"},hi={class:"text-bold text-grey-8"},$i={key:0},xi={colspan:"100%"},Si={key:1},Vi={colspan:"100%"},ko={__name:"MainInfoTab",setup(c){const s=ge();return(m,o)=>(d(),w("table",ki,[t("tbody",null,[t("tr",null,[t("td",wi,[t("div",hi,[o[1]||(o[1]=b(" Info Terminal Kasir ")),e(E,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=i=>m.$inertia.get(m.route("admin.cashier-terminal.edit",{id:l(s).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(l(kt)(l(s).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),l(s).props.data.created_at?(d(),w("tr",$i,[t("td",xi," Dibuat "+r(l(jt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",Si,[t("td",Vi," Diperbarui "+r(l(jt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},qi=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),Ci={class:"full-width row flex-center text-grey-8 q-gutter-sm"},wo={__name:"SessionHistoryTab",setup(c){const s=ge(),m=O([]),o=O(!0),i=De({cashier_terminal_id:s.props.data.id,...Ne()}),n=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];ye(()=>{v()});const v=(g=null)=>Be({pagination:n,filter:i,props:g,rows:m,url:route("admin.cashier-session.data"),loading:o}),p=ke(),u=G(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:C})=>[t("div",Ci,[t("span",null,r($)+" "+r(C?" with term "+C:""),1)])]),body:a(y=>[e(Pe,{props:y,class:"cursor-pointer",onClick:X($=>l(Y).get(g.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y,class:"wrap-column"},{default:a(()=>[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(" Session ID: "+r(y.row.id),1)]),t("div",null,[e(V,{class:"inline-icon",name:"point_of_sale"}),b(" "+r(y.row.cashier_terminal.name),1)]),t("div",null,[e(V,{class:"inline-icon",name:"person"}),b(" "+r(y.row.user.username)+" - "+r(y.row.user.name),1)])]),_:2},1032,["props"]),e(Q,{key:"opening_info",props:y},{default:a(()=>[t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(y.row.opened_at?l(ve)(y.row.opened_at):"-"),1)]),t("div",null,[e(V,{class:"inline-icon",name:"money"}),b(" "+r(l(kt)(y.row.opening_balance)),1)]),y.row.opening_notes?(d(),I(he,{key:0,text:y.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"closing_info",props:y},{default:a(()=>[t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(y.row.closed_at?l(ve)(y.row.closed_at):"-"),1)]),t("div",null,[e(V,{class:"inline-icon",name:"money"}),b(" "+r(l(kt)(y.row.closing_balance)),1)]),y.row.closing_notes?(d(),I(he,{key:0,text:y.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ti=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),Pi={class:"q-gutter-sm"},Ri={class:"col col-lg-6 q-pa-xs"},Oi={class:"row"},al="Rincian Terminal Kasir",Di={__name:"Detail",setup(c){const s=O("main");return(m,o)=>{const i=J("i-head"),n=J("authenticated-layout");return d(),w(W,null,[e(i,{title:al}),e(n,null,{title:a(()=>[b(r(al))]),"left-button":a(()=>[t("div",Pi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=f=>m.$inertia.get(m.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Ri,[t("div",Oi,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Vt,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=f=>s.value=f),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(nt,{name:"main",label:"Info Utama"}),e(nt,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(qt,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=f=>s.value=f),animated:""},{default:a(()=>[e(st,{name:"main"},{default:a(()=>[e(ko)]),_:1}),e(st,{name:"session-history",class:"q-pa-xs"},{default:a(()=>[e(wo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Ii=Object.freeze(Object.defineProperty({__proto__:null,default:Di},Symbol.toStringTag,{value:"Module"})),Ui={class:"q-gutter-sm"},ji={class:"col col-md-6 q-pa-xs"},Ei={key:0,class:"q-my-xs text-grey-8"},Ai={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Terminal",o=We({id:s.props.data.id,name:s.props.data.name,finance_account_id:s.props.data.finance_account_id??"new",location:s.props.data.location,active:!!s.props.data.active,notes:s.props.data.notes}),i=[{value:"new",label:"Buat Baru (Otomatis)"},...s.props.finance_accounts.map(f=>({value:f.id,label:f.name}))],n=()=>lt({form:o,url:route("admin.cashier-terminal.save")});return(f,v)=>{const p=J("i-head"),u=J("authenticated-layout");return d(),w(W,null,[e(p,{title:m}),e(u,null,{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",Ui,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=g=>f.$inertia.get(f.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",ji,[e(Qe,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=g=>l(o).id=g)},null,512),[[vt,l(o).id]]),e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(ie,{modelValue:l(o).name,"onUpdate:modelValue":v[2]||(v[2]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{class:"custom-select",modelValue:l(o).finance_account_id,"onUpdate:modelValue":v[3]||(v[3]=g=>l(o).finance_account_id=g),label:"Akun Kas",options:i,"map-options":"","emit-value":"",errorMessage:l(o).errors.finance_account_id,error:!!l(o).errors.finance_account_id,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),l(o).finance_account_id==="new"?(d(),w("div",Ei,[v[8]||(v[8]=b(" Akun keuangan akan dibuat ")),l(o).name?(d(),w(W,{key:0},[b(" dengan nama Kas "+r(l(o).name),1)],64)):k("",!0)])):k("",!0),e(ie,{modelValue:l(o).location,"onUpdate:modelValue":v[4]||(v[4]=g=>l(o).location=g),modelModifiers:{trim:!0},label:"Lokasi",error:!!l(o).errors.location,disable:l(o).processing,"error-message":l(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ie,{modelValue:l(o).notes,"onUpdate:modelValue":v[5]||(v[5]=g=>l(o).notes=g),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ga,{modelValue:l(o).active,"onUpdate:modelValue":v[6]||(v[6]=g=>l(o).active=g),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(o).processing,onClick:v[7]||(v[7]=g=>l(Y).get(f.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Mi=Object.freeze(Object.defineProperty({__proto__:null,default:Ai},Symbol.toStringTag,{value:"Module"})),Ni={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Bi={class:"q-pa-xs"},zi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Fi={class:"flex justify-end"},ll="Terminal Kasir",Li={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=De({search:"",status:"active",...Ne()}),u=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:s.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];ye(()=>{$()});const y=N=>at({message:`Hapus Terminal Kasir ${N.name}?`,url:route("admin.cashier-terminal.delete",N.id),fetchItemsCallback:$,loading:i}),$=(N=null)=>{Be({pagination:u,filter:p,props:N,rows:o,url:route("admin.cashier-terminal.data"),loading:i,tableRef:n})},C=()=>$(),D=N=>Y.get(route("admin.cashier-terminal.detail",{id:N.id})),{protectClick:F}=Dt(),A=F(D),T=G(()=>s.screen.gt.sm?g:g.filter(N=>N.name==="name"||N.name==="finance_account_id"||N.name==="action"));return(N,M)=>{const R=J("i-head"),B=J("authenticated-layout");return d(),w(W,null,[e(R,{title:ll}),e(B,null,Ae({title:a(()=>[b(r(ll))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:M[0]||(M[0]=h=>m.value=!m.value)},null,8,["icon"]),N.$can("admin.cashier-terminal.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:M[1]||(M[1]=h=>l(Y).get(N.route("admin.cashier-terminal.add")))})):k("",!0)]),default:a(()=>[t("div",Bi,[e(Ue,{class:"full-height-table",style:ze({height:l(v)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":M[5]||(M[5]=h=>u.value=h),filter:p.search,loading:i.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:x,filter:P})=>[t("div",zi,[t("span",null,r(x)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Pe,{props:h,class:xe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:X(x=>l(A)(h.row,x),["stop"])},{default:a(()=>[e(Q,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[e(V,{name:"wallet"}),b(" "+r(h.row.name),1)]),t("div",null,[e(V,{name:"home_pin"}),b(" "+r(h.row.location),1)]),l(s).screen.lt.md?(d(),I(he,{key:0,text:h.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:h},{default:a(()=>[t("div",null,[e(V,{name:"wallet"}),b(" "+r(h.row.finance_account.name),1)]),t("div",null,[e(V,{name:"money"}),b(" "+r(l(kt)(h.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(Q,{key:"notes",props:h},{default:a(()=>[e(he,{text:h.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:h},{default:a(()=>[t("div",Fi,[N.$can("admin.cashier-terminal.edit")||N.$can("admin.cashier-terminal.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:M[4]||(M[4]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[N.$can("admin.cashier-terminal.edit")?te((d(),I(le,{key:0,clickable:"",onClick:X(x=>l(Y).get(N.route("admin.cashier-terminal.edit",h.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>M[6]||(M[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),N.$can("admin.cashier-terminal.delete")?te((d(),I(le,{key:1,onClick:X(x=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>M[7]||(M[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Ni,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[M[2]||(M[2]=h=>p.status=h),C],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":M[3]||(M[3]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Hi=Object.freeze(Object.defineProperty({__proto__:null,default:Li},Symbol.toStringTag,{value:"Module"})),Ki={class:"q-gutter-sm"},Yi={class:"col col-md-6 q-pa-xs"},Wi={class:"row"},Qi={class:"detail"},Ji={key:0},Gi={key:1},Xi={key:0},Zi={key:1},ed={colspan:"3",class:"bg-white"},ol="Rincian Konfirmasi Top Up",td={__name:"Detail",setup(c){const s=ge(),m=()=>ca({message:`Setujui konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"accept"},onSuccess:()=>{Y.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}}),o=()=>ca({message:`Tolak konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"reject"},onSuccess:()=>{Y.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}});return(i,n)=>{const f=J("i-head"),v=J("i-link"),p=J("my-link"),u=J("authenticated-layout");return d(),w(W,null,[e(f,{title:ol}),e(u,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Ki,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=g=>i.$inertia.get(i.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":a(()=>[l(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:reject")?(d(),I(E,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:n[1]||(n[1]=g=>o()),class:"q-mr-sm"})):k("",!0),l(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:accept")?(d(),I(E,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:n[2]||(n[2]=g=>m())})):k("",!0)]),title:a(()=>[t("span",{class:"text-subtitle2"},r(ol))]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Yi,[t("div",Wi,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[n[24]||(n[24]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",Qi,[t("tbody",null,[t("tr",null,[n[3]||(n[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),n[4]||(n[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Waktu",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Pelanggan",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),e(v,{href:i.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[b(r(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(d(),w("div",Ji,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(d(),w("div",Gi,[e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[n[11]||(n[11]=t("td",null,"Akun Tujuan",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[e(p,{href:i.route("admin.finance-account.detail",{id:l(s).props.data.finance_account.id})},{default:a(()=>[b(r(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),n[10]||(n[10]=t("br",null,null,-1)),l(s).props.data.finance_account.type==="bank"?(d(),w(W,{key:0},[b(" Rek "+r(l(s).props.data.finance_account.bank)+" an "+r(l(s).props.data.finance_account.holder)+" ",1),n[9]||(n[9]=t("br",null,null,-1)),b(" "+r(l(s).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[n[13]||(n[13]=t("td",null,"Jumlah",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(K)(l(s).props.data.amount)),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"Status",-1)),n[16]||(n[16]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[n[17]||(n[17]=t("td",null,"Catatan",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",Xi,[n[19]||(n[19]=t("td",null,"Dibuat",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",Zi,[n[21]||(n[21]=t("td",null,"Diperbarui",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(W,{key:2},[n[23]||(n[23]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",ed,[e(oa,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:ze([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},ad=Object.freeze(Object.defineProperty({__proto__:null,default:td},Symbol.toStringTag,{value:"Module"})),ld={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},od={class:"q-pa-xs"},nd={key:0},sd={class:"flex justify-end no-wrap"},nl="Konfirmasi Top Up Deposit",rd={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=O(null),u=O(!1),g=Ce().startOf("month").toDate(),_=Ce().endOf("month").toDate(),y=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],$=De({search:"",start_date:g,end_date:_,status:"all",...Ne()}),C=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),D=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",field:"action",align:"center"}];ye(()=>{F()});const F=(h=null)=>{const x={...$,start_date:Ce($.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Ce($.end_date).format("YYYY-MM-DD HH:mm:ss")};Be({pagination:C,filter:x,props:h,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:i,tableRef:n})},A=()=>{F()},T=G(()=>s.screen.gt.sm?D:D.filter(h=>["code","action"].includes(h.name))),N=h=>ca({message:`Setujui konfirmasi transaksi #${h.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:F,loading:i,data:{id:h.id,action:"accept"}}),M=h=>ca({message:`Tolak konfirmasi transaksi #${h.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:F,loading:i,data:{id:h.id,action:"reject"}}),R=h=>at({message:`Hapus konfirmasi transaksi ${h.code}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",h.id),fetchItemsCallback:F,loading:i}),B=h=>{p.value=h,u.value=!0};return(h,x)=>{const P=J("i-head"),q=J("authenticated-layout");return d(),w(W,null,[e(P,{title:nl}),e(q,null,Ae({title:a(()=>[b(r(nl))]),"right-button":a(()=>[e(E,{class:"q-ml-sm",icon:m.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:x[0]||(x[0]=S=>m.value=!m.value)},null,8,["icon"])]),default:a(()=>[t("div",od,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",style:ze({height:l(v)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:C.value,"onUpdate:pagination":x[6]||(x[6]=S=>C.value=S),filter:$.search,loading:i.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:F,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),body:a(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:X(U=>l(Y).get(h.route("admin.customer-wallet-transaction-confirmation.detail",{id:S.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"code",props:S,class:"wrap-column"},{default:a(()=>[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(S.row.code),1)]),l(s).screen.gt.sm?k("",!0):(d(),w("div",nd,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(ve)(S.row.datetime)),1)])),l(s).screen.gt.sm?k("",!0):(d(),w(W,{key:1},[e(he,{icon:"account_balance",text:S.row.finance_account.name},null,8,["text"]),t("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(S.row.customer.code)+" - "+r(S.row.customer.name),1)]),t("div",null,[e(V,{name:"money",class:"inline-icon"}),b(" Rp. "+r(l(K)(S.row.amount)),1)]),S.row.notes?(d(),I(he,{key:0,icon:"notes",text:S.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Ya,{status:S.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(Q,{key:"datetime",props:S,class:"wrap-column"},{default:a(()=>[b(r(l(ve)(S.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"customer_id",props:S},{default:a(()=>[e(he,{text:S.row.customer.code+" - "+S.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:S},{default:a(()=>[b(r(S.row.finance_account.name),1),x[8]||(x[8]=t("br",null,null,-1)),b(" "+r(S.row.finance_account.bank)+" "+r(S.row.finance_account.number)+" an. "+r(S.row.finance_account.holder),1)]),_:2},1032,["props"]),e(Q,{key:"amount",props:S,style:{"text-align":"right"}},{default:a(()=>[b(r(l(K)(S.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"status",props:S,class:"text-center"},{default:a(()=>[e(Ya,{status:S.row.status},null,8,["status"])]),_:2},1032,["props"]),e(Q,{key:"notes",props:S,class:"word-wrap"},{default:a(()=>[e(he,{icon:"notes",text:S.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:S,class:"text-center"},{default:a(()=>[t("div",sd,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:S.row.image_path===null||S.row.image_path==="",onClick:X(U=>B(S.row.image_path),["stop"])},{default:a(()=>[S.row.image_path!=null?(d(),I(Tt,{key:0},{default:a(()=>x[9]||(x[9]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),h.$can("admin.customer-wallet-transaction-confirmation:accept")||h.$can("admin.customer-wallet-transaction-confirmation:deny")||h.$can("admin.customer-wallet-transaction-confirmation.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[5]||(x[5]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[h.$can("admin.customer-wallet-transaction-confirmation:accept")?te((d(),I(le,{key:0,onClick:X(U=>N(S.row),["stop"]),clickable:"",disable:S.row.status!=="pending"},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"check"})]),_:1}),e(z,null,{default:a(()=>x[10]||(x[10]=[b("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[se],[me]]):k("",!0),h.$can("admin.customer-wallet-transaction-confirmation:deny")?te((d(),I(le,{key:1,onClick:X(U=>M(S.row),["stop"]),clickable:"",disable:S.row.status!=="pending"},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"cancel"})]),_:1}),e(z,null,{default:a(()=>x[11]||(x[11]=[b("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[se],[me]]):k("",!0),e(Te),h.$can("admin.customer-wallet-transaction-confirmation.delete")?te((d(),I(le,{key:2,onClick:X(U=>R(S.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>x[12]||(x[12]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(pa,{modelValue:u.value,"onUpdate:modelValue":x[7]||(x[7]=S=>u.value=S),imageUrl:`/${p.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",ld,[e(Fe,{modelValue:$.start_date,"onUpdate:modelValue":[x[1]||(x[1]=S=>$.start_date=S),A],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Fe,{modelValue:$.end_date,"onUpdate:modelValue":[x[2]||(x[2]=S=>$.end_date=S),A],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:$.status,"onUpdate:modelValue":[x[3]||(x[3]=S=>$.status=S),A],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":x[4]||(x[4]=S=>$.search=S),placeholder:"Cari...",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},id=Object.freeze(Object.defineProperty({__proto__:null,default:rd},Symbol.toStringTag,{value:"Module"}));function Ma(c,s=!1){const m=c.map(f=>({value:f.id,label:f.name+" ("+f.code+")"})),o=s?[{value:"all",label:"Semua"},...m]:m,i=O([...o]);return{filteredCustomers:i,filterCustomersFn:(f,v)=>{v(()=>{i.value=o.filter(p=>p.label.toLowerCase().includes(f.toLowerCase()))})},customers:o}}const dd={class:"col col-md-6 q-pa-xs"},sl="Penyesuaian Saldo Deposit Pelanggan",ud={__name:"Adjustment",setup(c){const s=ge(),{filteredCustomers:m,filterCustomersFn:o}=Ma(s.props.customers,!1),i=We({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),n=()=>i.amount=i.new_wallet_balance-i.old_wallet_balance;He(()=>i.customer_id,async p=>{if(!p){i.old_wallet_balance=0,i.new_wallet_balance=0,n();return}i.processing=!0;try{const u=await axios.get(route("admin.customer.wallet_balance",{id:p}));i.new_wallet_balance=i.old_wallet_balance=u.data.wallet_balance}catch(u){console.error("Gagal mengambil saldo:",u),i.old_wallet_balance=0,i.new_wallet_balance=0}i.processing=!1,n()});const f=G(()=>i.new_wallet_balance-i.old_wallet_balance),v=()=>lt({form:i,url:route("admin.customer-wallet-transaction.adjustment")});return(p,u)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),w(W,null,[e(g,{title:sl}),e(_,null,{title:a(()=>[b(r(sl))]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",dd,[e(Qe,{class:"row",onSubmit:X(v,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(ce,{class:"custom-select",modelValue:l(i).customer_id,"onUpdate:modelValue":u[0]||(u[0]=y=>l(i).customer_id=y),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(m),"map-options":"","emit-value":"",errorMessage:l(i).errors.customer_id,onFilter:l(o),error:!!l(i).errors.customer_id,disable:l(i).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(z,null,{default:a(()=>u[6]||(u[6]=[b("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Ee,{modelValue:l(i).old_wallet_balance,"onUpdate:modelValue":u[1]||(u[1]=y=>l(i).old_wallet_balance=y),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:l(i).processing,error:!!l(i).errors.old_wallet_balance,errorMessage:l(i).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:l(i).new_wallet_balance,"onUpdate:modelValue":u[2]||(u[2]=y=>l(i).new_wallet_balance=y),label:"Saldo Seharusnya",lazyRules:"",disable:l(i).processing,error:!!l(i).errors.new_wallet_balance,errorMessage:l(i).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:f.value,"onUpdate:modelValue":u[3]||(u[3]=y=>f.value=y),label:"Selisih",readonly:"",lazyRules:"",disable:l(i).processing},null,8,["modelValue","disable"]),e(ie,{modelValue:l(i).notes,"onUpdate:modelValue":u[4]||(u[4]=y=>l(i).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.notes,"error-message":l(i).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:u[5]||(u[5]=y=>l(Y).get(p.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},md=Object.freeze(Object.defineProperty({__proto__:null,default:ud},Symbol.toStringTag,{value:"Module"})),cd={class:"q-gutter-sm"},pd={class:"col col-md-6 q-pa-xs"},fd={class:"row"},gd={class:"detail"},bd={key:0},vd={key:1},_d={key:0},yd={key:1},kd={colspan:"3",class:"bg-white"},rl="Rincian Transaksi",wd={__name:"Detail",setup(c){const s=ge();return(m,o)=>{const i=J("i-head"),n=J("i-link"),f=J("authenticated-layout");return d(),w(W,null,[e(i,{title:rl}),e(f,null,{"left-button":a(()=>[t("div",cd,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>m.router.get(m.route("admin.customer-wallet-transaction.index")))})])]),title:a(()=>[b(r(rl))]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",pd,[t("div",fd,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[o[18]||(o[18]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Deposit ",-1)),t("table",gd,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Pelanggan",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),e(n,{href:m.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[b(""+r(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(d(),w("div",bd,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(d(),w("div",vd,[e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[l(s).props.data.type]),1)]),t("tr",null,[o[9]||(o[9]=t("td",null,"Jumlah",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",{class:xe(l(s).props.data.amount>0?"text-positive":"text-negative")},r(l(ea)(l(s).props.data.amount))+"Rp. "+r(l(K)(Math.abs(l(s).props.data.amount))),3)]),t("tr",null,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",_d,[o[13]||(o[13]=t("td",null,"Dibuat",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",yd,[o[15]||(o[15]=t("td",null,"Diperbarui",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(W,{key:2},[o[17]||(o[17]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",kd,[e(oa,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:ze([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},hd=Object.freeze(Object.defineProperty({__proto__:null,default:wd},Symbol.toStringTag,{value:"Module"})),$d={class:"q-gutter-sm"},xd={class:"col col-md-6 q-pa-xs"},Sd={__name:"Editor",setup(c){var u;const s=ge(),m=(s.props.data.id?"Edit":"Catat")+" Transaksi Deposit Pelanggan",{filteredCustomers:o,filterCustomersFn:i}=Ma(s.props.customers,!1),n=[{label:"Deposit / Uang Masuk (+)",value:"deposit"},{label:"Pengembalian / Uang Keluar (-)",value:"withdrawal"}],f=s.props.finance_accounts.map(g=>({label:g.name,value:g.id})),v=We({id:s.props.data.id,customer_id:s.props.data.customer_id,finance_account_id:s.props.data.finance_account_id,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((u=s.props.data)==null?void 0:u.image_path)??"",image:null}),p=()=>{na(v,{datetime:"YYYY-MM-DD HH:mm:ss"}),lt({form:v,url:route("admin.customer-wallet-transaction.save")})};return(g,_)=>{const y=J("i-head"),$=J("authenticated-layout");return d(),w(W,null,[e(y,{title:m}),e($,null,{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",$d,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=C=>g.$inertia.get(g.route("admin.customer-wallet-transaction.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",xd,[e(Qe,{class:"row",onSubmit:X(p,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=C=>l(v).id=C)},null,512),[[vt,l(v).id]]),e(Fe,{autofocus:"",modelValue:l(v).datetime,"onUpdate:modelValue":_[2]||(_[2]=C=>l(v).datetime=C),label:"Tanggal",error:!!l(v).errors.datetime,disable:l(v).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ce,{class:"custom-select",modelValue:l(v).customer_id,"onUpdate:modelValue":_[3]||(_[3]=C=>l(v).customer_id=C),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(o),"map-options":"","emit-value":"",errorMessage:l(v).errors.customer_id,onFilter:l(i),error:!!l(v).errors.customer_id,disable:l(v).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(z,null,{default:a(()=>_[10]||(_[10]=[b("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(ce,{modelValue:l(v).type,"onUpdate:modelValue":_[4]||(_[4]=C=>l(v).type=C),label:"Jenis Transaksi",options:n,"map-options":"","emit-value":"",error:!!l(v).errors.type,disable:l(v).processing,errorMessage:l(v).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{modelValue:l(v).finance_account_id,"onUpdate:modelValue":_[5]||(_[5]=C=>l(v).finance_account_id=C),label:l(v).type=="deposit"?"Kas Tujuan":"Kas Asal",options:l(f),"map-options":"","emit-value":"",error:!!l(v).errors.finance_account_id,disable:l(v).processing,errorMessage:l(v).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Ee,{modelValue:l(v).amount,"onUpdate:modelValue":_[6]||(_[6]=C=>l(v).amount=C),label:"Jumlah",lazyRules:"",disable:l(v).processing,error:!!l(v).errors.amount,errorMessage:l(v).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ie,{modelValue:l(v).notes,"onUpdate:modelValue":_[7]||(_[7]=C=>l(v).notes=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(v).processing,error:!!l(v).errors.notes,"error-message":l(v).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ja,{modelValue:l(v).image,"onUpdate:modelValue":_[8]||(_[8]=C=>l(v).image=C),"initial-image-path":l(v).image_path,disabled:l(v).processing,error:!!l(v).errors.image||!!l(v).errors.image_path,"error-message":l(v).errors.image||l(v).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(v).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(v).processing,onClick:_[9]||(_[9]=C=>l(Y).get(g.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Vd=Object.freeze(Object.defineProperty({__proto__:null,default:Sd},Symbol.toStringTag,{value:"Module"})),qd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Cd={class:"q-pa-xs"},Td={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Pd={key:0},Rd={key:0},Od={class:"flex justify-end no-wrap"},il="Transaksi Deposit Pelanggan",Dd={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=Ce().startOf("month").toDate(),u=Ce().endOf("month").toDate(),g=De({search:"",start_date:p,end_date:u,...Ne()}),_=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),y=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];ye(()=>{C()});const $=M=>at({message:`Hapus transaksi #${M.code}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",M.id),fetchItemsCallback:C,loading:i}),C=(M=null)=>{console.log(g);const R={...g,start_date:Ce(g.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Ce(g.end_date).format("YYYY-MM-DD HH:mm:ss")};Be({pagination:_,filter:R,props:M,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:i,tableRef:n})},D=()=>{C()},F=G(()=>s.screen.gt.sm?y:y.filter(M=>M.name==="code"||M.name==="action")),A=O(null),T=O(!1),N=M=>{A.value=M,T.value=!0};return(M,R)=>{const B=J("i-head"),h=J("authenticated-layout");return d(),w(W,null,[e(B,{title:il}),e(h,null,Ae({title:a(()=>[b(r(il))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=x=>m.value=!m.value)},null,8,["icon"]),M.$can("admin.customer-wallet-transaction.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=x=>l(Y).get(M.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",Cd,[e(Ue,{ref_key:"tableRef",ref:n,style:ze({height:l(v)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":R[6]||(R[6]=x=>_.value=x),filter:g.search,loading:i.value,columns:F.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:C,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:x,message:P,filter:q})=>[t("div",Td,[t("span",null,r(P)+" "+r(q?" with term "+q:""),1)])]),body:a(x=>[e(Pe,{props:x,class:"cursor-pointer",onClick:X(P=>l(Y).get(M.route("admin.customer-wallet-transaction.detail",{id:x.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"code",props:x,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.gt.sm?k("",!0):(d(),I(V,{key:0,name:"tag",class:"inline-icon"})),b(" "+r(x.row.code),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(ve)(x.row.datetime)),1)]),x.row.finance_account?(d(),w("div",Pd,[e(V,{name:"wallet",class:"inline-icon"}),b(" "+r(x.row.finance_account?x.row.finance_account.name:"-"),1)])):k("",!0),e(he,{icon:"person",text:x.row.customer.code+" - "+x.row.customer.name},null,8,["text"]),t("div",{class:xe([x.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(V,{name:"money",class:"inline-icon"}),b(" "+r(l(ea)(x.row.amount))+"Rp. "+r(l(K)(Math.abs(x.row.amount))),1)],2),e(he,{text:x.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(ot,null,{default:a(()=>[b(r(x.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(Q,{key:"datetime",props:x},{default:a(()=>[b(r(l(ve)(x.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"customer_id",props:x},{default:a(()=>[e(he,{text:x.row.customer.code+" - "+x.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:x},{default:a(()=>[x.row.finance_account?(d(),w("div",Rd,r(x.row.finance_account?x.row.finance_account.name:"-"),1)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"amount",props:x,style:{"text-align":"right"}},{default:a(()=>[b(r(l(wt)(x.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:x},{default:a(()=>[e(he,{text:x.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:x},{default:a(()=>[t("div",Od,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:x.row.image_path===null||x.row.image_path==="",onClick:X(P=>N(x.row.image_path),["stop"])},{default:a(()=>[x.row.image_path!=null?(d(),I(Tt,{key:0},{default:a(()=>R[8]||(R[8]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),M.$can("admin.customer-wallet-transaction.delete")?(d(),I(E,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:R[5]||(R[5]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[M.$can("admin.customer-wallet-transaction.delete")?te((d(),I(le,{key:0,onClick:X(P=>$(x.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>R[9]||(R[9]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(pa,{modelValue:T.value,"onUpdate:modelValue":R[7]||(R[7]=x=>T.value=x),imageUrl:`/${A.value}`},null,8,["modelValue","imageUrl"])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",qd,[e(Fe,{modelValue:g.start_date,"onUpdate:modelValue":[R[2]||(R[2]=x=>g.start_date=x),D],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Fe,{modelValue:g.end_date,"onUpdate:modelValue":[R[3]||(R[3]=x=>g.end_date=x),D],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":R[4]||(R[4]=x=>g.search=x),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Id=Object.freeze(Object.defineProperty({__proto__:null,default:Dd},Symbol.toStringTag,{value:"Module"})),Ud=["href"],jd={key:1},Kt={__name:"WaLink",props:{phone:{type:String,required:!0},message:{type:String,default:""},display_text:{type:String,default:""}},setup(c){const s=c,m=G(()=>Yn(s.phone,s.message)),o=G(()=>s.display_text?s.display_text:s.phone&&m.value!=="#"?s.phone:"-"),i=G(()=>s.phone&&m.value!=="#");return(n,f)=>i.value?(d(),w("a",{key:0,href:m.value,target:"_blank",rel:"noopener noreferrer"},[b(r(o.value)+" ",1),e(l(V),{name:"open_in_new",size:"xs",class:"q-ml-xs"})],8,Ud)):(d(),w("span",jd,r(o.value),1))}},Ed={class:"detail"},Ad={class:"detail"},Md={key:0},Nd={key:1},Bd={class:"text-grey-8"},zd={key:2},Fd={class:"text-grey-8"},Ld={key:0,class:"q-pt-md"},ho={__name:"MainInfoTab",setup(c){const s=ge(),m=()=>{at({message:`Hapus Pelanggan ${s.props.data.code}?`,url:route("admin.customer.delete",s.props.data.id),onSuccess:()=>{Y.get(route("admin.customer.index"))}})};return(o,i)=>(d(),w(W,null,[i[27]||(i[27]=t("div",{class:"text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",Ed,[t("tbody",null,[t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Jenis",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.type_label),1)]),t("tr",null,[i[5]||(i[5]=t("td",null,"Nama",-1)),i[6]||(i[6]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[i[7]||(i[7]=t("td",null,"Default Harga",-1)),i[8]||(i[8]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.default_price_type_label),1)]),t("tr",null,[i[9]||(i[9]=t("td",null,"No. Telepon",-1)),i[10]||(i[10]=t("td",null,":",-1)),t("td",null,[e(Kt,{phone:l(s).props.data.phone},null,8,["phone"])])]),t("tr",null,[i[11]||(i[11]=t("td",null,"Alamat",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.address?l(s).props.data.address:"-"),1)]),t("tr",null,[i[13]||(i[13]=t("td",null,"Saldo Deposit",-1)),i[14]||(i[14]=t("td",null,":",-1)),t("td",{class:xe(l(s).props.data.wallet_balance<0?"text-red":"text-green")}," Rp. "+r(l(wt)(l(s).props.data.wallet_balance)),3)]),t("tr",null,[t("td",null,r(l(s).props.data.balance>0?"Piutang":"Utang"),1),i[15]||(i[15]=t("td",null,":",-1)),t("td",{class:xe(l(s).props.data.balance<0?"text-red":"text-green")}," Rp. "+r(l(wt)(l(s).props.data.balance)),3)]),t("tr",null,[i[16]||(i[16]=t("td",null,"Status",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),i[28]||(i[28]=t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun",-1)),t("table",Ad,[t("tbody",null,[l(s).props.data.created_at?(d(),w("tr",Md,[i[18]||(i[18]=t("td",null,"Dibuat",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(l(jt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",Nd,[i[20]||(i[20]=t("td",null,"Diperbarui",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(l(jt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[i[22]||(i[22]=t("td",null,"Terakhir login",-1)),i[23]||(i[23]=t("td",null,":",-1)),t("td",null,[b(r(l(s).props.data.last_login_datetime?l(ve)(l(s).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",Bd,"("+r(l(jt)(l(s).props.data.last_login_datetime))+")",1)])]),l(s).props.data.last_activity_datetime?(d(),w("tr",zd,[i[25]||(i[25]=t("td",null,"Aktifitas Terakhir",-1)),i[26]||(i[26]=t("td",null,":",-1)),t("td",null,[b(r(l(ve)(l(s).props.data.last_activity_datetime))+" ",1),t("span",Fd,[b("("+r(l(jt)(l(s).props.data.last_activity_datetime))+")",1),i[24]||(i[24]=t("br",null,null,-1)),b(r(l(s).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(d(),w("div",Ld,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>m())})])):k("",!0)],64))}},Hd=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),Kd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Yd={class:"text-bold"},$o={__name:"WalletHistoryTab",setup(c){const s=ge(),m=O([]),o=O(!0),i=De({customer_id:s.props.data.id,...Ne()}),n=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];ye(()=>{v()});const v=(g=null)=>Be({pagination:n,filter:i,props:g,rows:m,url:route("admin.customer-wallet-transaction.data"),loading:o}),p=ke(),u=G(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:C})=>[t("div",Kd,[t("span",null,r($)+" "+r(C?" with term "+C:""),1)])]),body:a(y=>[e(Pe,{props:y,class:"cursor-pointer",onClick:X($=>l(Y).get(g.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",Yd,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(y.row.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(l(ve)(y.row.datetime)),1)]),l(p).screen.lt.md?(d(),w(W,{key:0},[t("div",{class:xe(["text-bold",y.row.amount<0?"text-red":"text-green"])},[e(V,{name:"money",class:"inline-icon"}),b(" "+r(l(ta)(y.row.amount)),1)],2),t("div",null,[e(he,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(ot,{size:"xs",color:y.row.amount>0?"green":"red"},{default:a(()=>[e(V,{name:"category"}),b(" "+r(y.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(he,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"amount",props:y},{default:a(()=>[t("div",{class:xe(y.row.amount<0?"text-red-10":y.row.amount>0?"text-green-10":"")},r(l(wt)(y.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Wd=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),Qd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Jd={class:"text-bold"},Gd={key:0},Xd={key:1},xo={__name:"OrderHistoryTab",setup(c){const s=ge(),m=O([]),o=O(!0),i=De({customer_id:s.props.data.id,...Ne()}),n=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];ye(()=>{v()});const v=(g=null)=>Be({pagination:n,filter:i,props:g,rows:m,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:s.props.data.id}}),loading:o}),p=ke(),u=G(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:C})=>[t("div",Qd,[t("span",null,r($)+" "+r(C?" with term "+C:""),1)])]),body:a(y=>[e(Pe,{props:y,class:"cursor-pointer",onClick:X($=>l(Y).get(g.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",Jd,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(y.row.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(l(ve)(y.row.datetime)),1)]),l(p).screen.lt.md?(d(),w(W,{key:0},[t("div",null,[e(V,{name:"money",class:"inline-icon"}),b(" Total: Rp. "+r(l(K)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(d(),w("div",Gd,[e(V,{name:"money",class:"inline-icon"}),b(" Sisa Utang Rp. "+r(l(K)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(d(),w("div",Xd,[e(he,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(ot,{color:y.row.status=="closed"?"green":"red"},{default:a(()=>[b(r(y.row.status_label),1)]),_:2},1032,["color"]),e(ot,{class:"q-ml-xs",color:y.row.payment_status=="fully_paid"?"green":"red"},{default:a(()=>[b(r(y.row.payment_status_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:y},{default:a(()=>[b(r(l(K)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"remaining_debt",props:y},{default:a(()=>[b(r(l(K)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(he,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Zd=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),eu={class:"q-gutter-sm"},tu={class:"q-gutter-sm"},au={class:"col col-lg-6 q-pa-xs"},lu={class:"row"},dl="Rincian Pelanggan",ou={__name:"Detail",setup(c){const s=ge(),m=O("main");return ke(),(o,i)=>{const n=J("i-head"),f=J("authenticated-layout");return d(),w(W,null,[e(n,{title:dl}),e(f,null,{title:a(()=>[b(r(dl))]),"left-button":a(()=>[t("div",eu,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":a(()=>[t("div",tu,[o.$can("admin.customer.edit")?(d(),I(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=v=>l(Y).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),I(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=v=>l(Y).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),I(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=v=>l(Y).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",au,[t("div",lu,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Vt,{modelValue:m.value,"onUpdate:modelValue":i[4]||(i[4]=v=>m.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(nt,{name:"main",label:"Info Utama"}),e(nt,{name:"history",label:"Riwayat Deposit"}),e(nt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(qt,{modelValue:m.value,"onUpdate:modelValue":i[5]||(i[5]=v=>m.value=v),animated:""},{default:a(()=>[e(st,{name:"main"},{default:a(()=>[e(ho)]),_:1}),e(st,{name:"history",class:"q-pa-xs"},{default:a(()=>[e($o)]),_:1}),e(st,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(xo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},nu=Object.freeze(Object.defineProperty({__proto__:null,default:ou},Symbol.toStringTag,{value:"Module"})),su={class:"q-gutter-sm"},ru={class:"col col-md-6 q-pa-xs"},iu={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=We({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,default_price_type:s.props.data.default_price_type,phone:s.props.data.phone,address:s.props.data.address,active:!!s.props.data.active,password:s.props.data.id?null:"12345",type:s.props.data.type}),i=O(!s.props.data.id),n=Ke(window.CONSTANTS.CUSTOMER_TYPES),f=Ke(window.CONSTANTS.PRODUCT_PRICE_TYPES),v=()=>lt({form:o,url:route("admin.customer.save",{id:o.id})});return(p,u)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),w(W,null,[e(g,{title:m}),e(_,null,{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",su,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>l(Y).get(p.route("admin.customer.index")))})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:u[1]||(u[1]=y=>v()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",ru,[e(Qe,{class:"row",onSubmit:X(v,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":u[2]||(u[2]=y=>l(o).id=y)},null,512),[[vt,l(o).id]]),e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(ie,{modelValue:l(o).code,"onUpdate:modelValue":u[3]||(u[3]=y=>l(o).code=y),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[y=>y&&y.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(o).name,"onUpdate:modelValue":u[4]||(u[4]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:l(o).default_price_type,"onUpdate:modelValue":u[5]||(u[5]=y=>l(o).default_price_type=y),options:l(f),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!l(o).errors.default_price_type,"error-message":l(o).errors.default_price_type,disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":u[6]||(u[6]=y=>l(o).type=y),label:"Jenis Akun",options:l(n),"map-options":"","emit-value":"","lazy-rules":"",disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(o).errors.type,"error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(ie,{modelValue:l(o).phone,"onUpdate:modelValue":u[7]||(u[7]=y=>l(o).phone=y),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:l(o).processing,error:!!l(o).errors.phone,"error-message":l(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).address,"onUpdate:modelValue":u[8]||(u[8]=y=>l(o).address=y),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{autocomplete:"off","aria-autocomplete":"none",modelValue:l(o).password,"onUpdate:modelValue":u[10]||(u[10]=y=>l(o).password=y),label:l(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:l(o).processing,error:!!l(o).errors.password,"error-message":l(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:i.value?"text":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:u[9]||(u[9]=y=>i.value=!i.value)},{default:a(()=>[e(V,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(ga,{modelValue:l(o).active,"onUpdate:modelValue":u[11]||(u[11]=y=>l(o).active=y),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),u[12]||(u[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},du=Object.freeze(Object.defineProperty({__proto__:null,default:iu},Symbol.toStringTag,{value:"Module"}));function Lt(c,s,m,o){const i=[];return c.forEach(n=>{o(n)===!0?i.push(n):s.push({failedPropValidation:m,file:n})}),i}function ma(c){c&&c.dataTransfer&&(c.dataTransfer.dropEffect="copy"),Nt(c)}const uu={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},mu=["rejected"];function cu({editable:c,dnd:s,getFileInput:m,addFilesToQueue:o}){const{props:i,emit:n,proxy:f}=St(),v=O(null),p=G(()=>i.accept!==void 0?i.accept.split(",").map(T=>(T=T.trim(),T==="*"?"*/":(T.endsWith("/*")&&(T=T.slice(0,T.length-1)),T.toUpperCase()))):null),u=G(()=>parseInt(i.maxFiles,10)),g=G(()=>parseInt(i.maxTotalSize,10));function _(T){if(c.value)if(T!==Object(T)&&(T={target:null}),T.target!==null&&T.target.matches('input[type="file"]')===!0)T.clientX===0&&T.clientY===0&&Wn(T);else{const N=m();N&&N!==T.target&&N.click(T)}}function y(T){c.value&&T&&o(null,T)}function $(T,N,M,R){let B=Array.from(N||T.target.files);const h=[],x=()=>{h.length!==0&&n("rejected",h)};if(i.accept!==void 0&&p.value.indexOf("*/")===-1&&(B=Lt(B,h,"accept",P=>p.value.some(q=>P.type.toUpperCase().startsWith(q)||P.name.toUpperCase().endsWith(q))),B.length===0))return x();if(i.maxFileSize!==void 0){const P=parseInt(i.maxFileSize,10);if(B=Lt(B,h,"max-file-size",q=>q.size<=P),B.length===0)return x()}if(i.multiple!==!0&&B.length!==0&&(B=[B[0]]),B.forEach(P=>{P.__key=P.webkitRelativePath+P.lastModified+P.name+P.size}),R===!0){const P=M.map(q=>q.__key);B=Lt(B,h,"duplicate",q=>P.includes(q.__key)===!1)}if(B.length===0)return x();if(i.maxTotalSize!==void 0){let P=R===!0?M.reduce((q,S)=>q+S.size,0):0;if(B=Lt(B,h,"max-total-size",q=>(P+=q.size,P<=g.value)),B.length===0)return x()}if(typeof i.filter=="function"){const P=i.filter(B);B=Lt(B,h,"filter",q=>P.includes(q))}if(i.maxFiles!==void 0){let P=R===!0?M.length:0;if(B=Lt(B,h,"max-files",()=>(P++,P<=u.value)),B.length===0)return x()}if(x(),B.length!==0)return B}function C(T){ma(T),s.value!==!0&&(s.value=!0)}function D(T){Nt(T),(T.relatedTarget!==null||Ht.is.safari!==!0?T.relatedTarget!==v.value:document.elementsFromPoint(T.clientX,T.clientY).includes(v.value)===!1)===!0&&(s.value=!1)}function F(T){ma(T);const N=T.dataTransfer.files;N.length!==0&&o(null,N),s.value=!1}function A(T){if(s.value===!0)return Se("div",{ref:v,class:`q-${T}__dnd absolute-full`,onDragenter:ma,onDragover:ma,onDragleave:D,onDrop:F})}return Object.assign(f,{pickFiles:_,addFiles:y}),{pickFiles:_,addFiles:y,onDragover:C,onDragleave:D,processFiles:$,getDndNode:A,maxFilesNumber:u,maxTotalSizeNumber:g}}const So=Pt({name:"QFile",inheritAttrs:!1,props:{...Jn,...so,...uu,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Qn,...mu],setup(c,{slots:s,emit:m,attrs:o}){const{proxy:i}=St(),n=Gn(),f=O(null),v=O(!1),p=Xn(c),{pickFiles:u,onDragover:g,onDragleave:_,processFiles:y,getDndNode:$}=cu({editable:n.editable,dnd:v,getFileInput:U,addFilesToQueue:j}),C=Zn(c),D=G(()=>Object(c.modelValue)===c.modelValue?"length"in c.modelValue?Array.from(c.modelValue):[c.modelValue]:[]),F=G(()=>Wa(D.value)),A=G(()=>D.value.map(L=>L.name).join(", ")),T=G(()=>es(D.value.reduce((L,pe)=>L+pe.size,0))),N=G(()=>({totalSize:T.value,filesNumber:D.value.length,maxFiles:c.maxFiles})),M=G(()=>({tabindex:-1,type:"file",title:"",accept:c.accept,capture:c.capture,name:p.value,...o,id:n.targetUid.value,disabled:n.editable.value!==!0})),R=G(()=>"q-file q-field--auto-height"+(v.value===!0?" q-file--dnd":"")),B=G(()=>c.multiple===!0&&c.append===!0);function h(L){const pe=D.value.slice();pe.splice(L,1),P(pe)}function x(L){const pe=D.value.indexOf(L);pe!==-1&&h(pe)}function P(L){m("update:modelValue",c.multiple===!0?L:L[0])}function q(L){L.keyCode===13&&as(L)}function S(L){(L.keyCode===13||L.keyCode===32)&&u(L)}function U(){return f.value}function j(L,pe){const ne=y(L,pe,D.value,B.value),Z=U();Z!=null&&(Z.value=""),ne!==void 0&&((c.multiple===!0?c.modelValue&&ne.every(de=>D.value.includes(de)):c.modelValue===ne[0])||P(B.value===!0?D.value.concat(ne):ne))}function oe(){return[Se("input",{class:[c.inputClass,"q-file__filler"],style:c.inputStyle})]}function re(){if(s.file!==void 0)return D.value.length===0?oe():D.value.map((pe,ne)=>s.file({index:ne,file:pe,ref:this}));if(s.selected!==void 0)return D.value.length===0?oe():s.selected({files:D.value,ref:this});if(c.useChips===!0)return D.value.length===0?oe():D.value.map((pe,ne)=>Se(Qt,{key:"file-"+ne,removable:n.editable.value,dense:!0,textColor:c.color,tabindex:c.tabindex,onRemove:()=>{h(ne)}},()=>Se("span",{class:"ellipsis",textContent:pe.name})));const L=c.displayValue!==void 0?c.displayValue:A.value;return L.length!==0?[Se("div",{class:c.inputClass,style:c.inputStyle,textContent:L})]:oe()}function H(){const L={ref:f,...M.value,...C.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:j};return c.multiple===!0&&(L.multiple=!0),Se("input",L)}return Object.assign(n,{fieldClass:R,emitValue:P,hasValue:F,inputRef:f,innerValue:D,floatingLabel:G(()=>F.value===!0||Wa(c.displayValue)),computedCounter:G(()=>{if(c.counterLabel!==void 0)return c.counterLabel(N.value);const L=c.maxFiles;return`${D.value.length}${L!==void 0?" / "+L:""} (${T.value})`}),getControlChild:()=>$("file"),getControl:()=>{const L={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:c.tabindex};return n.editable.value===!0&&Object.assign(L,{onDragover:g,onDragleave:_,onKeydown:q,onKeyup:S}),Se("div",L,[H()].concat(re()))}}),Object.assign(i,{removeAtIndex:h,removeFile:x,getNativeElement:()=>f.value}),ro(i,"nativeEl",()=>f.value),ts(n)}}),Ft=Pt({name:"QBanner",props:{...Ia,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(c,{slots:s}){const{proxy:{$q:m}}=St(),o=Ua(c,m),i=G(()=>"q-banner row items-center"+(c.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(c.rounded===!0?" rounded-borders":"")),n=G(()=>`q-banner__actions row items-center justify-end col-${c.inlineActions===!0?"auto":"all"}`);return()=>{const f=[Se("div",{class:"q-banner__avatar col-auto row items-center self-start"},Et(s.avatar)),Se("div",{class:"q-banner__content col text-body2"},Et(s.default))],v=Et(s.action);return v!==void 0&&f.push(Se("div",{class:n.value},v)),Se("div",{class:i.value+(c.inlineActions===!1&&v!==void 0?" q-banner--top-padding":""),role:"alert"},f)}}}),pu={class:"q-gutter-sm"},fu={class:"col col-md-6 q-pa-xs"},ul="Import Pelanggan",gu={__name:"Import",setup(c){const s=We({csv_file:null}),m=()=>{s.post(route("admin.customer.import"),{onSuccess:()=>{s.reset()},onError:()=>{Ye()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=J("i-head"),f=J("authenticated-layout");return d(),w(W,null,[e(n,{title:ul}),e(f,{"show-drawer-button":!0},{title:a(()=>[b(r(ul))]),"left-button":a(()=>[t("div",pu,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>l(Y).get(o.route("admin.customer.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",fu,[e(Qe,{class:"row",onSubmit:X(m,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(So,{modelValue:l(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=v=>l(s).csv_file=v),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:i[2]||(i[2]=v=>l(Y).get(o.route("admin.customer.index")))},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),I(Ft,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),I(Ft,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},bu=Object.freeze(Object.defineProperty({__proto__:null,default:gu},Symbol.toStringTag,{value:"Module"})),vu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},_u={class:"q-pa-xs"},yu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ku={key:0},wu={key:2},hu={key:3},$u={class:"flex justify-end"},ml="Pelanggan",xu={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=De({search:"",status:"active",...Ne()}),u=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"code",label:s.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];ye(()=>{$()});const y=N=>at({message:`Hapus Pelanggan ${N.name}?`,url:route("admin.customer.delete",N.id),fetchItemsCallback:$,loading:i}),$=(N=null)=>{Be({pagination:u,filter:p,props:N,rows:o,url:route("admin.customer.data"),loading:i,tableRef:n})},C=()=>$(),D=N=>Y.get(route("admin.customer.detail",{id:N.id})),{protectClick:F}=Dt(),A=F(D),T=G(()=>s.screen.gt.sm?g:g.filter(N=>N.name==="code"||N.name==="action"));return(N,M)=>{const R=J("i-head"),B=J("authenticated-layout");return d(),w(W,null,[e(R,{title:ml}),e(B,null,Ae({title:a(()=>[b(r(ml))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:M[0]||(M[0]=h=>m.value=!m.value)},null,8,["icon"]),N.$can("admin.customer.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:M[1]||(M[1]=h=>l(Y).get(N.route("admin.customer.add")))})):k("",!0),N.$can("admin.customer.import")?(d(),I(E,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:M[3]||(M[3]=X(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[N.$can("admin.customer.import")?te((d(),I(le,{key:0,clickable:"",onClick:M[2]||(M[2]=X(h=>l(Y).get(N.route("admin.customer.import")),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"csv"})]),_:1}),e(z,null,{default:a(()=>M[8]||(M[8]=[b("Import")])),_:1})]),_:1})),[[se],[me]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",_u,[e(Ue,{class:"full-height-table",style:ze({height:l(v)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":M[7]||(M[7]=h=>u.value=h),filter:p.search,loading:i.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:x,filter:P})=>[t("div",yu,[t("span",null,r(x)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Pe,{props:h,class:xe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:X(x=>l(A)(h.row,x),["stop"])},{default:a(()=>[e(Q,{key:"code",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),I(V,{key:0,name:"person"})):k("",!0),b(" "+r(h.row.code),1)]),l(s).screen.lt.md?(d(),w(W,{key:0},[t("div",null,[l(s).screen.lt.md?(d(),I(V,{key:0,name:"person"})):k("",!0),b(" "+r(h.row.name),1)]),h.row.phone?(d(),w("div",ku,[e(V,{name:"phone"}),b(" "+r(h.row.phone),1)])):k("",!0),h.row.address?(d(),I(he,{key:1,text:h.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),h.row.wallet_balance!=0?(d(),w("div",wu,[e(V,{name:"wallet"}),b(" Wallet: Rp. "+r(l(K)(h.row.wallet_balance)),1)])):k("",!0),h.row.balance!=0?(d(),w("div",hu,[e(V,{name:"wallet"}),b(" Utang: Rp. "+r(l(K)(h.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"name",props:h},{default:a(()=>[b(r(h.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"wallet_balance",props:h},{default:a(()=>[b(r(l(K)(h.row.wallet_balance)),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:h},{default:a(()=>[b(r(l(K)(h.row.balance)),1)]),_:2},1032,["props"]),e(Q,{key:"phone",props:h},{default:a(()=>[b(r(h.row.phone),1)]),_:2},1032,["props"]),e(Q,{key:"address",props:h},{default:a(()=>[e(he,{text:h.row.address},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:h},{default:a(()=>[t("div",$u,[N.$can("admin.customer.add")||N.$can("admin.customer.edit")||N.$can("admin.customer.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:M[6]||(M[6]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[N.$can("admin.customer.add")?te((d(),I(le,{key:0,clickable:"",onClick:X(x=>l(Y).get(N.route("admin.customer.duplicate",h.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>M[9]||(M[9]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),N.$can("admin.customer.edit")?te((d(),I(le,{key:1,clickable:"",onClick:X(x=>l(Y).get(N.route("admin.customer.edit",h.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>M[10]||(M[10]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),N.$can("admin.customer.delete")?te((d(),I(le,{key:2,onClick:X(x=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>M[11]||(M[11]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",vu,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[M[4]||(M[4]=h=>p.status=h),C],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":M[5]||(M[5]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Su=Object.freeze(Object.defineProperty({__proto__:null,default:xu},Symbol.toStringTag,{value:"Module"})),Vu={class:"q-pb-sm"},qu={class:"row q-col-gutter-sm"},Cu={class:"row items-center no-wrap"},Tu={class:"q-ml-md"},Pu={class:"text-subtitle2 text-grey-8"},Ru={class:"text-h6 text-weight-bold"},Ou={class:"q-my-sm"},Du={class:"row q-col-gutter-sm"},Iu={class:"row items-center no-wrap"},Uu={class:"q-ml-md"},ju={class:"text-subtitle2 text-grey-8"},Eu={class:"text-h6 text-weight-bold"},Vo={__name:"ActualSummaryCard",setup(c){const s=ge(),m=G(()=>[{label:"Pelanggan Aktif",value:s.props.data.total_active_customer,icon:"person_add",color:"blue-7",bgColor:"#e3f2fd"},{label:"Saldo Wallet / Deposit",value:K(s.props.data.total_customer_wallet_balance),icon:"savings",color:"green-7",bgColor:"#e8f5e9"},{label:"Saldo Utang / Piutang",value:K(s.props.data.total_customer_balance),icon:"account_balance",color:"red-8",bgColor:"#ffebee"},{label:"Supplier Aktif",value:s.props.data.total_active_supplier,icon:"local_shipping",color:"indigo-7",bgColor:"#e8eaf6"},{label:"Saldo Wallet / Deposit",value:K(s.props.data.total_supplier_wallet_balance),icon:"account_balance_wallet",color:"cyan-7",bgColor:"#e0f7fa"},{label:"Saldo Utang / Piutang",value:K(s.props.data.total_supplier_balance),icon:"credit_card",color:"red-8",bgColor:"#ffebee"}]),o=G(()=>[{label:"Total Transaksi",value:K(s.props.data.total_sales_count),icon:"shopping_basket",color:"purple-8",bgColor:"#f3e5f5"},{label:"Total Penjualan",value:K(s.props.data.total_sales),icon:"trending_up",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Laba",value:K(s.props.data.total_sales_profit),icon:"attach_money",color:"teal-6",bgColor:"#e0f2f1"}]);return(i,n)=>(d(),w("div",Vu,[t("div",null,[t("div",qu,[(d(!0),w(W,null,Oe(m.value,(f,v)=>(d(),w("div",{key:v,class:"col-12 col-md-4"},[e(ue,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",Cu,[e(Yt,{icon:f.icon,color:f.color,"text-color":f.bgColor},null,8,["icon","color","text-color"]),t("div",Tu,[t("div",Pu,r(f.label),1),t("div",Ru,r(f.value),1)])])]),_:2},1024)]))),128))])]),t("div",Ou,[t("div",Du,[(d(!0),w(W,null,Oe(o.value,(f,v)=>(d(),w("div",{key:v,class:"col-12 col-md-4"},[e(ue,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",Iu,[e(Yt,{icon:f.icon,color:f.color,"text-color":f.bgColor},null,8,["icon","color","text-color"]),t("div",Uu,[t("div",ju,r(f.label),1),t("div",Eu,r(f.value),1)])])]),_:2},1024)]))),128))])])]))}},Au=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Mu={class:"row q-col-gutter-sm q-pb-sm"},Nu={class:"col-md-6 col-12"},Bu={class:"col-md-6 col-12"},zu={__name:"ChartCard",setup(c){ls([os,ns,ss,rs,is,ds,us]);const s=ge(),m=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=G(()=>({title:{left:"center"},tooltip:{trigger:"axis",formatter:function(n){let f=n[0].name+"<br/>";return n.forEach(function(v){f+=v.marker+" "+v.seriesName+": "+K(v.value)+"<br/>"}),f}},xAxis:{type:"category",data:s.props.data.chart_data_1.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:n=>K(n),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:s.props.data.chart_data_1.data,itemStyle:{borderRadius:[5,5,0,0],color:m[0]}}]})),i=G(()=>({title:{left:"center"},tooltip:{show:!1},legend:{show:!1},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:s.props.data.revenue_by_category,label:{show:!0,position:"outside",formatter:n=>{const f=K(n.value);return`${n.percent}% - ${n.name}
Rp. ${f}
`},fontSize:12,fontWeight:"bold",color:"#616161"},labelLine:{show:!0,length:10,length2:10},itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:n=>m[n.dataIndex%m.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(n,f)=>(d(),w("div",Mu,[t("div",Nu,[e(ue,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[f[0]||(f[0]=t("div",{class:"text-subtitle1 q-pb-sm"},"Penjualan",-1)),e(l(Qa),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",Bu,[e(ue,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[f[1]||(f[1]=t("div",{class:"text-subtitle1 q-pb-sm"},"Distribusi Omzet",-1)),e(l(Qa),{class:"chart",option:i.value,autoresize:""},null,8,["option"])]),_:1})])]))}},qo=ft(zu,[["__scopeId","data-v-aac9117e"]]),Fu=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Lu={class:"row q-col-gutter-sm q-pb-sm"},Hu={class:"col-md-6 col-12"},Ku={key:1,class:"text-grey text-italic"},Yu={class:"col-md-6 col-12"},Wu={key:1,class:"text-grey text-italic"},Co={__name:"TopCard",setup(c){const s=ge();return(m,o)=>{const i=J("my-link");return d(),w("div",Lu,[t("div",Hu,[e(ue,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[o[0]||(o[0]=t("div",{class:"text-subtitle1 q-mb-sm"},"Top 5 Transaksi Pelanggan",-1)),l(s).props.data.top_customers_revenue.length>0?(d(),I(Ie,{key:0},{default:a(()=>[(d(!0),w(W,null,Oe(l(s).props.data.top_customers_revenue,(n,f)=>(d(),I(le,{key:f},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(Yt,{color:"purple-"+(9-f),"text-color":"white",size:"sm"},{default:a(()=>[b(r(f+1),1)]),_:2},1032,["color"])]),_:2},1024),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>[e(i,{href:m.route("admin.customer.detail",{id:n.customer_id}),class:"text-purple"},{default:a(()=>[b(r(n.customer_name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),e(z,{side:""},{default:a(()=>[e(be,{class:"text-purple"},{default:a(()=>[b(r(l(K)(n.total_revenue)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),w("div",Ku,"Data tidak tersedia"))]),_:1})]),t("div",Yu,[e(ue,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[o[1]||(o[1]=t("div",{class:"text-subtitle1 q-mb-sm"},"Top 5 Saldo Wallet Pelanggan",-1)),l(s).props.data.top_customers_wallet.length>0?(d(),I(Ie,{key:0},{default:a(()=>[(d(!0),w(W,null,Oe(l(s).props.data.top_customers_wallet,(n,f)=>(d(),I(le,{key:f},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(Yt,{color:"orange-"+(9-f),"text-color":"white",size:"sm"},{default:a(()=>[b(r(f+1),1)]),_:2},1032,["color"])]),_:2},1024),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>[e(i,{href:m.route("admin.customer.detail",{id:n.id}),class:"text-orange-9"},{default:a(()=>[b(r(n.name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),e(z,{side:""},{default:a(()=>[e(be,{class:"text-orange-9"},{default:a(()=>[b(r(l(K)(n.wallet_balance)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),w("div",Wu,"Data tidak tersedia"))]),_:1})])])}}},Qu=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),Ju={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Gu={class:"q-pa-xs"},Xu={class:"q-pa-none"},cl="Dashboard",Zu={__name:"Index",setup(c){ge();const s=O({top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}]}),m=O(!0),o=O(Ne().period??"this_month"),i=O([{value:"today",label:"Hari Ini"},{value:"yesterday",label:"Kemarin"},{value:"this_week",label:"Minggu Ini"},{value:"last_week",label:"Minggu Lalu"},{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"Bulan Lalu"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"},{value:"this_year",label:"Tahun Ini"},{value:"prev_year",label:"Tahun Lalu"}]),n=()=>{Y.visit(route("admin.dashboard",{period:o.value}))},f=G(()=>!(o.value=="today"||o.value=="yesterday"));return(v,p)=>{const u=J("i-head"),g=J("authenticated-layout");return d(),w(W,null,[e(u,{title:cl}),e(g,null,Ae({title:a(()=>[b(r(cl))]),"right-button":a(()=>[e(E,{class:"q-ml-sm",icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:p[0]||(p[0]=_=>m.value=!m.value)},null,8,["icon"])]),default:a(()=>[t("div",Gu,[t("div",Xu,[e(Vo,{dashboardData:s.value},null,8,["dashboardData"])]),f.value?(d(),w(W,{key:0},[e(qo,{dashboardData:s.value},null,8,["dashboardData"]),e(Co,{dashboardData:s.value},null,8,["dashboardData"])],64)):k("",!0)])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar"},{default:a(()=>[t("div",Ju,[e(ce,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:o.value,"onUpdate:modelValue":[p[1]||(p[1]=_=>o.value=_),n],options:i.value,label:"Periode",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},em=Object.freeze(Object.defineProperty({__proto__:null,default:Zu},Symbol.toStringTag,{value:"Module"})),tm={class:"row"},am={class:"row q-col-gutter-sm"},lm={class:"col-sm-6 col-xs-12"},om={class:"col-sm-6 col-xs-12"},nm={class:"col-md-3 col-sm-6 col-xs-12"},sm={class:"col-md-3 col-sm-6 col-xs-12"},rm={class:"col-md-3 col-sm-6 col-xs-12"},im={class:"col-md-3 col-sm-6 col-xs-12"};const dm={__name:"SummaryCard",setup(c){const s=ge(),m=(o,i)=>{const f={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...i};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(f)),Y.visit(o,{data:f})};return(o,i)=>(d(),w("div",tm,[e(ue,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:a(()=>[e(ae,{class:"q-pa-none"},{default:a(()=>[t("div",am,[t("div",lm,[e(le,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[0]||(i[0]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(z,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[b(r(l(s).props.data.active_customer_count),1)]),_:1}),e(be,null,{default:a(()=>i[5]||(i[5]=[b("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",om,[e(le,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[1]||(i[1]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(z,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[b(r(o.$page.props.data.active_user_count),1)]),_:1}),e(be,null,{default:a(()=>i[6]||(i[6]=[b("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",nm,[e(le,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(z,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(l(K)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(be,null,{default:a(()=>i[7]||(i[7]=[b("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",sm,[e(le,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(z,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(l(K)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(be,null,{default:a(()=>i[8]||(i[8]=[b("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",rm,[e(le,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(z,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(l(K)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(be,null,{default:a(()=>i[9]||(i[9]=[b("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",im,[e(le,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(z,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(l(K)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(be,null,{default:a(()=>i[10]||(i[10]=[b("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},um=Object.freeze(Object.defineProperty({__proto__:null,default:dm},Symbol.toStringTag,{value:"Module"})),mm={class:"detail"},cm={class:"detail"},To={__name:"MainInfoTab",setup(c){const s=ge();return(m,o)=>(d(),w(W,null,[o[22]||(o[22]=t("div",{class:"text-bold text-grey-8"},"Informasi Umum",-1)),t("table",mm,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.FINANCE_ACCOUNT_TYPES[l(s).props.data.type]),1)]),l(s).props.data.type=="bank"?(d(),w(W,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(K)(l(s).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)])])]),o[23]||(o[23]=t("div",{class:"q-mt-md text-bold text-grey-8"},"Opsi Lanjutan",-1)),t("table",cm,[t("tbody",null,[t("tr",null,[o[16]||(o[16]=t("td",{style:{width:"170px"}},"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.has_wallet_access?"Ya":"Tidak"),1)])])])],64))}},pm=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),fm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},gm={class:"flex q-gutter-sm"},bm={key:0},Po={__name:"HistoryTab",setup(c){const s=ge(),m=ke(),o=O(null),i=O([]),n=O(!0),f=De({...Ne()}),v=tt(null,117),p=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),u=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],g=G(()=>m.screen.gt.sm?u:u.filter(y=>y.name==="code"));ye(()=>{_()});const _=(y=null)=>Be({pagination:p,filter:f,props:y,rows:i,url:route("admin.finance-transaction.data",{filter:{account_id:s.props.data.id}}),loading:n,tableRef:o});return(y,$)=>(d(),I(Ue,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:ze({height:l(v)}),color:"primary",class:"full-height-table","row-key":"id",pagination:p.value,"onUpdate:pagination":$[0]||($[0]=C=>p.value=C),filter:f.search,loading:n.value,columns:g.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({message:C,filter:D})=>[t("div",fm,[t("span",null,r(C)+" "+r(D?" with term "+D:""),1)])]),body:a(C=>[e(Pe,{props:C},{default:a(()=>[e(Q,{key:"code",props:C},{default:a(()=>[t("div",gm,[t("div",null,[l(m).screen.lt.md?(d(),I(V,{key:0,name:"tag",class:"inline-icon"})):k("",!0),b(" "+r(C.row.code),1)])]),l(m).screen.lt.md?(d(),w(W,{key:0},[t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(ve)(C.row.datetime)),1)]),C.row.creator?(d(),w("div",bm,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(C.row.creator.username),1)])):k("",!0),t("div",{class:xe([C.row.amount>0?"text-green":"text-red","text-bold"])},[e(V,{class:"inline-icon",name:"money"}),b(" "+r(l(ea)(C.row.amount))+"Rp. "+r(l(K)(Math.abs(C.row.amount))),1)],2),t("div",null,[e(ot,{color:C.row.amount>0?"green":"red"},{default:a(()=>[b(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[C.row.type]),1)]),_:2},1032,["color"])]),e(he,{text:C.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"datetime",props:C},{default:a(()=>[b(r(l(ve)(C.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"type",props:C},{default:a(()=>[e(ot,{color:C.row.amount>0?"green":"red"},{default:a(()=>[b(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[C.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Q,{key:"amount",props:C,class:xe(C.row.amount>0?"text-green":"text-red")},{default:a(()=>[b(r(l(ea)(C.row.amount)+l(K)(Math.abs(C.row.amount))),1)]),_:2},1032,["props","class"]),e(Q,{key:"notes",props:C},{default:a(()=>[e(he,{text:C.row.notes,icon:y.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},vm=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),_m={class:"q-gutter-sm"},ym={class:"q-gutter-sm"},km={class:"col q-pa-xs"},wm={class:"row"},pl="Rincian Akun",hm={__name:"Detail",setup(c){const s=ge(),m=O("main");return(o,i)=>{const n=J("i-head"),f=J("authenticated-layout");return d(),w(W,null,[e(n,{title:pl}),e(f,null,{title:a(()=>[b(r(pl))]),"left-button":a(()=>[t("div",_m,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":a(()=>[t("div",ym,[o.$can("admin.finance-account.edit")?(d(),I(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=v=>l(Y).get(o.route("admin.finance-account.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",km,[t("div",wm,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Vt,{modelValue:m.value,"onUpdate:modelValue":i[2]||(i[2]=v=>m.value=v),dense:"","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(nt,{name:"main",label:"Info Akun"}),e(nt,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(qt,{modelValue:m.value,"onUpdate:modelValue":i[3]||(i[3]=v=>m.value=v),animated:""},{default:a(()=>[e(st,{name:"main"},{default:a(()=>[e(To)]),_:1}),e(st,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Po)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},$m=Object.freeze(Object.defineProperty({__proto__:null,default:hm},Symbol.toStringTag,{value:"Module"})),xm={style:{"margin-left":"-10px"}},Ct={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c){return(s,m)=>(d(),w("div",xm,[e(la,{class:"full-width q-pl-none","model-value":c.modelValue,"onUpdate:modelValue":m[0]||(m[0]=o=>s.$emit("update:modelValue",o)),disable:c.disable,label:c.label},null,8,["model-value","disable","label"])]))}},Sm={class:"q-gutter-sm"},Vm={class:"col col-md-6 q-pa-xs"},qm={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=We({id:s.props.data.id,name:s.props.data.name,type:s.props.data.type,bank:s.props.data.bank,number:s.props.data.number,holder:s.props.data.holder,balance:parseFloat(s.props.data.balance),active:!!s.props.data.active,has_wallet_access:!!s.props.data.has_wallet_access,show_in_pos_payment:!!s.props.data.show_in_pos_payment,show_in_purchasing_payment:!!s.props.data.show_in_purchasing_payment,notes:s.props.data.notes}),i=Ke(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),n=()=>lt({form:o,url:route("admin.finance-account.save")}),f=v=>{v==="cashier_cash"&&(o.show_in_pos_payment=!0)};return ye(()=>{f(o.type)}),He(()=>o.type,v=>{f(v)}),(v,p)=>{const u=J("i-head"),g=J("authenticated-layout");return d(),w(W,null,[e(u,{title:m}),e(g,null,{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",Sm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=_=>v.$inertia.get(v.route("admin.finance-account.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Vm,[e(Qe,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=_=>l(o).id=_)},null,512),[[vt,l(o).id]]),e(ie,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":p[2]||(p[2]=_=>l(o).name=_),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":p[3]||(p[3]=_=>l(o).type=_),label:"Jenis Akun",options:l(i),"map-options":"","emit-value":"",error:!!l(o).errors.type,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),l(o).type=="bank"?(d(),w(W,{key:0},[e(ie,{modelValue:l(o).bank,"onUpdate:modelValue":p[4]||(p[4]=_=>l(o).bank=_),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!l(o).errors.bank,disable:l(o).processing,"error-message":l(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ie,{modelValue:l(o).number,"onUpdate:modelValue":p[5]||(p[5]=_=>l(o).number=_),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!l(o).errors.number,disable:l(o).processing,"error-message":l(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ie,{modelValue:l(o).holder,"onUpdate:modelValue":p[6]||(p[6]=_=>l(o).holder=_),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!l(o).errors.holder,disable:l(o).processing,"error-message":l(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Ee,{modelValue:l(o).balance,"onUpdate:modelValue":p[7]||(p[7]=_=>l(o).balance=_),label:"Saldo",lazyRules:"",disable:l(o).processing,"allow-negative":!0,error:!!l(o).errors.balance,errorMessage:l(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ie,{modelValue:l(o).notes,"onUpdate:modelValue":p[8]||(p[8]=_=>l(o).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Ct,{modelValue:l(o).active,"onUpdate:modelValue":p[9]||(p[9]=_=>l(o).active=_),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),p[14]||(p[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(Ct,{modelValue:l(o).show_in_pos_payment,"onUpdate:modelValue":p[10]||(p[10]=_=>l(o).show_in_pos_payment=_),disable:l(o).processing||l(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(Ct,{modelValue:l(o).show_in_purchasing_payment,"onUpdate:modelValue":p[11]||(p[11]=_=>l(o).show_in_purchasing_payment=_),disable:l(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(Ct,{modelValue:l(o).has_wallet_access,"onUpdate:modelValue":p[12]||(p[12]=_=>l(o).has_wallet_access=_),disable:l(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:p[13]||(p[13]=_=>l(Y).get(v.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Cm=Object.freeze(Object.defineProperty({__proto__:null,default:qm},Symbol.toStringTag,{value:"Module"})),Tm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Pm={class:"q-pa-xs"},Rm={class:"q-my-sm text-subtitle"},Om={class:"text-bold text-grey-8"},Dm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Im={class:"text-bold text-grey-9"},Um={class:"text-grey-9"},jm={key:0},Em={key:1},Am={key:0},Mm={class:"flex justify-end"},fl="Akun Kas",Nm={__name:"Index",setup(c){const s=ge(),m=ke(),o=O(!1),i=O([]),n=O(null),f=O(null),v=tt(f,117),p=O(!0),u=De({search:"",status:"active",type:"all",...Ne()}),g=s.props.totalBalance,_=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),y=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],$=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],C=[{value:"all",label:"Semua"},...Ke(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];ye(()=>{F()});const D=B=>at({message:`Hapus Akun ${B.name}?`,url:route("admin.finance-account.delete",B.id),fetchItemsCallback:F,loading:p}),F=(B=null)=>{Be({pagination:_,filter:u,props:B,rows:i,url:route("admin.finance-account.data"),loading:p,tableRef:n})},A=()=>F(),T=B=>Y.get(route("admin.finance-account.detail",{id:B.id})),{protectClick:N}=Dt(),M=N(T),R=G(()=>m.screen.gt.sm?y:y.filter(B=>B.name==="name"||B.name==="action"));return(B,h)=>{const x=J("i-head"),P=J("authenticated-layout");return d(),w(W,null,[e(x,{title:fl}),e(P,null,Ae({title:a(()=>[b(r(fl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=q=>o.value=!o.value)},null,8,["icon"]),B.$can("admin.finance-account.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=q=>l(Y).get(B.route("admin.finance-account.add")))})):k("",!0)]),default:a(()=>[t("div",Pm,[e(ue,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:a(()=>[t("div",Rm,[h[7]||(h[7]=b(" Total Saldo Akun Aktif: ")),t("span",Om,"Rp. "+r(l(K)(l(g))),1)])]),_:1}),e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",style:ze({height:l(v)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":h[6]||(h[6]=q=>_.value=q),filter:u.search,loading:p.value,columns:R.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:F,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:S,filter:U})=>[t("div",Dm,[t("span",null,r(S)+" "+r(U?" with term "+U:""),1)])]),body:a(q=>[e(Pe,{props:q,class:xe([q.row.active?"":"bg-red-1","cursor-pointer"]),onClick:X(S=>l(M)(q.row,S),["stop"])},{default:a(()=>[e(Q,{key:"name",props:q,class:"wrap-column"},{default:a(()=>[t("div",Im,r(q.row.name),1),t("div",Um,[q.row.type=="bank"?(d(),w("div",jm,[e(V,{name:"wallet",class:"inline-icon"}),b(" Rekening "+r(q.row.bank??"-")+" "+r(q.row.number??"-")+" a.n. "+r(q.row.holder??"-"),1)])):k("",!0),q.row.notes?(d(),w("div",Em,[e(V,{name:"notes"}),b(" "+r(q.row.notes),1)])):k("",!0)]),l(m).screen.lt.md?(d(),w("div",Am,[e(V,{name:"money",class:"inline-icon"}),b(" Rp. "+r(l(K)(q.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"type",props:q},{default:a(()=>[b(r(B.$CONSTANTS.FINANCE_ACCOUNT_TYPES[q.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:q},{default:a(()=>[b(r(l(K)(q.row.balance)),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:q},{default:a(()=>[t("div",Mm,[B.$can("admin.finance-account.add")||B.$can("admin.finance-account.edit")||B.$can("admin.finance-account.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[5]||(h[5]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[B.$can("admin.finance-account.add")?te((d(),I(le,{key:0,clickable:"",onClick:X(S=>l(Y).get(B.route("admin.finance-account.duplicate",q.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>h[8]||(h[8]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),B.$can("admin.finance-account.edit")?te((d(),I(le,{key:1,clickable:"",onClick:X(S=>l(Y).get(B.route("admin.finance-account.edit",q.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>h[9]||(h[9]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),B.$can("admin.finance-account.delete")?te((d(),I(le,{key:2,onClick:X(S=>D(q.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>h[10]||(h[10]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Tm,[e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:u.type,"onUpdate:modelValue":[h[2]||(h[2]=q=>u.type=q),A],options:C,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[h[3]||(h[3]=q=>u.status=q),A],options:$,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":h[4]||(h[4]=q=>u.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Bm=Object.freeze(Object.defineProperty({__proto__:null,default:Nm},Symbol.toStringTag,{value:"Module"})),zm={class:"q-gutter-sm"},Fm={class:"col col-md-6 q-pa-xs"},Lm={class:"row"},Hm={class:"detail"},Km={key:0},Ym={key:1},Wm={key:2},Qm={key:3},Jm={colspan:"3",class:"bg-white"},gl="Rincian Transaksi",Gm={__name:"Detail",setup(c){const s=ge();return(m,o)=>{const i=J("i-head"),n=J("i-link"),f=J("authenticated-layout");return d(),w(W,null,[e(i,{title:gl}),e(f,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",zm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>m.$inertia.get(m.route("admin.finance-transaction.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},r(gl))]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Fm,[t("div",Lm,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",Hm,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),l(s).props.data.account?(d(),w("tr",Km,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[e(n,{href:m.route("admin.finance-account.detail",l(s).props.data.account.id)},{default:a(()=>[b(r(l(s).props.data.account.name),1)]),_:1},8,["href"]),l(s).props.data.account.type==="bank"?(d(),w(W,{key:0},[b(" Rek "+r(l(s).props.data.account.bank)+" an "+r(l(s).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),b(" "+r(l(s).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.type?(d(),w("tr",Ym,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.FINANCE_TRANSACTION_TYPES[l(s).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(ta)(l(s).props.data.amount)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",Wm,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",Qm,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(W,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Jm,[e(oa,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:ze([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Xm=Object.freeze(Object.defineProperty({__proto__:null,default:Gm},Symbol.toStringTag,{value:"Module"})),Zm={class:"q-gutter-sm"},ec={class:"col col-md-6 q-pa-xs"},tc={__name:"Editor",setup(c){var v;const s=ge(),m=(s.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=s.props.accounts.map(p=>({label:p.name,value:p.id})),i=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],n=We({id:s.props.data.id,account_id:s.props.data.account_id,to_account_id:s.props.data.to_account_id??null,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((v=s.props.data)==null?void 0:v.image_path)??"",image:null}),f=()=>{na(n,{datetime:"YYYY-MM-DD HH:mm:ss"}),lt({form:n,url:route("admin.finance-transaction.save")})};return(p,u)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),w(W,null,[e(g,{title:m}),e(_,null,{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",Zm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>p.$inertia.get(p.route("admin.finance-transaction.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",ec,[e(Qe,{class:"row",onSubmit:X(f,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":u[1]||(u[1]=y=>l(n).id=y)},null,512),[[vt,l(n).id]]),e(Fe,{modelValue:l(n).datetime,"onUpdate:modelValue":u[2]||(u[2]=y=>l(n).datetime=y),label:"Waktu",error:!!l(n).errors.datetime,disable:l(n).processing,errorMessage:l(n).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":u[3]||(u[3]=y=>l(n).type=y),label:"Jenis Transaksi",options:i,"map-options":"","emit-value":"",error:!!l(n).errors.type,disable:l(n).processing,errorMessage:l(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{class:"custom-select",modelValue:l(n).account_id,"onUpdate:modelValue":u[4]||(u[4]=y=>l(n).account_id=y),label:l(n).type=="transfer"?"Akun Asal":"Akun",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.account_id,error:!!l(n).errors.account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),l(n).type=="transfer"?(d(),I(ce,{key:0,class:"custom-select",modelValue:l(n).to_account_id,"onUpdate:modelValue":u[5]||(u[5]=y=>l(n).to_account_id=y),label:"Akun Tujuan",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.to_account_id,error:!!l(n).errors.to_account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Ee,{modelValue:l(n).amount,"onUpdate:modelValue":u[6]||(u[6]=y=>l(n).amount=y),label:"Jumlah",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.amount,errorMessage:l(n).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ie,{modelValue:l(n).notes,"onUpdate:modelValue":u[7]||(u[7]=y=>l(n).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ja,{modelValue:l(n).image,"onUpdate:modelValue":u[8]||(u[8]=y=>l(n).image=y),"initial-image-path":l(n).image_path,disabled:l(n).processing,error:!!l(n).errors.image||!!l(n).errors.image_path,"error-message":l(n).errors.image||l(n).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(n).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(n).processing,onClick:u[9]||(u[9]=y=>l(Y).get(p.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ac=Object.freeze(Object.defineProperty({__proto__:null,default:tc},Symbol.toStringTag,{value:"Module"})),lc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},oc={class:"q-pa-xs"},nc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},sc={class:"text-grey-8"},rc={class:"text-bold text-grey-8"},ic={class:"flex justify-end no-wrap"},bl="Transaksi Kas",dc={__name:"Index",setup(c){const s=ge(),m=ke(),o=O(!1),i=O([]),n=O(!0),f=O(null),v=O(null),p=tt(v),u=Ce().startOf("month").toDate(),g=Ce().endOf("month").toDate(),_=[{label:"Semua",value:"all"},...s.props.accounts.map(h=>({label:h.name,value:h.id}))],y=[{value:"all",label:"Semua"},...Ke(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],$=De({search:"",type:"all",account_id:"all",start_date:u,end_date:g,...Ne()}),C=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),D=[{name:"id",label:m.screen.lt.md?"Item":"Kode",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];ye(()=>{A()});const F=h=>at({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${h.code}?`,url:route("admin.finance-transaction.delete",h.id),fetchItemsCallback:A,loading:n}),A=(h=null)=>{const x={...$,start_date:Ce($.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Ce($.end_date).format("YYYY-MM-DD HH:mm:ss")};Be({pagination:C,filter:x,props:h,rows:i,url:route("admin.finance-transaction.data"),loading:n,tableRef:f})},T=()=>{A()},N=G(()=>m.screen.gt.sm?D:D.filter(h=>h.name==="id"||h.name==="action")),M=O(null),R=O(!1),B=h=>{M.value=h,R.value=!0};return(h,x)=>{const P=J("i-head"),q=J("authenticated-layout");return d(),w(W,null,[e(P,{title:bl}),e(q,null,Ae({title:a(()=>[b(r(bl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=S=>o.value=!o.value)},null,8,["icon"]),h.$can("admin.finance-transaction.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=S=>l(Y).get(h.route("admin.finance-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",oc,[e(Ue,{ref_key:"tableRef",ref:f,style:ze({height:l(p)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:C.value,"onUpdate:pagination":x[8]||(x[8]=S=>C.value=S),filter:$.search,loading:n.value,columns:N.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:A,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:S,message:U,filter:j})=>[t("div",nc,[t("span",null,r(U)+" "+r(j?" with term "+j:""),1)])]),body:a(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:X(U=>l(Y).get(h.route("admin.finance-transaction.detail",{id:S.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:S},{default:a(()=>[t("div",null,[l(m).screen.lt.md?(d(),I(V,{key:0,class:"inline-icon",name:"tag"})):k("",!0),b(" "+r(S.row.code),1)]),l(m).screen.lt.md?(d(),w(W,{key:0},[t("div",sc,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(l(ve)(S.row.datetime)),1)]),t("div",rc,[e(V,{name:"wallet",class:"inline-icon"}),b(" "+r(S.row.account.name),1)]),t("div",{class:xe(["text-bold",S.row.amount<0?"text-red":"text-green"])},[e(V,{name:"money",class:"inline-icon"}),b(" "+r(l(ea)(S.row.amount)+"Rp."+l(K)(Math.abs(S.row.amount))),1)],2),S.row.notes?(d(),I(he,{key:0,icon:"notes",text:S.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(ot,{color:S.row.amount>0?"green":"red"},{default:a(()=>[b(r(S.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"datetime",props:S,class:"wrap-column"},{default:a(()=>[b(r(l(ve)(S.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"account",props:S},{default:a(()=>{var U;return[b(r((U=S.row.account)==null?void 0:U.name),1)]}),_:2},1032,["props"]),e(Q,{key:"type",props:S},{default:a(()=>[b(r(h.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"amount",props:S,style:{"text-align":"right"}},{default:a(()=>[b(r(l(wt)(S.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:S,class:"wrap-column"},{default:a(()=>[b(r(S.row.notes),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:S},{default:a(()=>[t("div",ic,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:S.row.image_path===null||S.row.image_path==="",onClick:X(U=>B(S.row.image_path),["stop"])},{default:a(()=>[S.row.image_path!=null?(d(),I(Tt,{key:0},{default:a(()=>x[10]||(x[10]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),h.$can("admin.finance-transaction.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[7]||(x[7]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[h.$can("admin.finance-transaction.delete")?te((d(),I(le,{key:0,onClick:X(U=>F(S.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>x[11]||(x[11]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(pa,{modelValue:R.value,"onUpdate:modelValue":x[9]||(x[9]=S=>R.value=S),imageUrl:`/${M.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:a(()=>[t("div",lc,[e(Fe,{modelValue:$.start_date,"onUpdate:modelValue":[x[2]||(x[2]=S=>$.start_date=S),T],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Fe,{modelValue:$.end_date,"onUpdate:modelValue":[x[3]||(x[3]=S=>$.end_date=S),T],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:$.type,"onUpdate:modelValue":[x[4]||(x[4]=S=>$.type=S),T],options:y,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:$.account_id,"onUpdate:modelValue":[x[5]||(x[5]=S=>$.account_id=S),T],label:"Akun",options:_,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":x[6]||(x[6]=S=>$.search=S),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},uc=Object.freeze(Object.defineProperty({__proto__:null,default:dc},Symbol.toStringTag,{value:"Module"}));function mc(){const c=O(new Date);let s=null;const m=()=>{c.value=new Date};return ye(()=>{s=setInterval(m,1e3)}),yt(()=>{s&&clearInterval(s)}),{currentDateTime:c}}const cc={class:"text-grey-8 row items-center"},Ro={__name:"DigitalClock",setup(c){const{currentDateTime:s}=mc();return(m,o)=>(d(),w("div",cc,[e(V,{name:"calendar_clock",class:"q-mr-sm"}),b(" "+r(l(ve)(l(s))),1)]))}},pc={class:"q-pa-sm"},fc={class:"text-h6 q-my-md text-center"},gc={class:"row q-col-gutter-md q-mb-md"},bc={class:"col-xs-12 col-md-4"},vc={class:"col-xs-12 col-md-4"},_c={class:"col-xs-12 col-md-4"},yc={class:"row"},kc={class:"text-subtitle1 text-bold text-grey-9 q-mb-xs q-ml-md"},vl="Beranda",wc={__name:"Index",setup(c){const s=ke(),m=ge(),o={reports:[{group:"Penjualan",items:[{label:"Laporan Penjualan",route:"admin.report.sales-order.index"},{label:"Laporan Daftar Pelanggan",route:"admin.report.customer.index"}]},{group:"Pembelian",items:[{label:"Laporan Pembelian",route:"admin.report.purchase-order.index"},{label:"Laporan Supplier",route:"admin.report.supplier.index"}]},{group:"Inventori",items:[{label:"Laporan Daftar Produk",route:"admin.report.product.index"},{label:"Laporan Daftar Stok",route:"admin.report.product-low-stock.index"}]},{group:"Keuangan",items:[{label:"Laporan Transaksi",route:"admin.report.index"},{label:"Laporan Akun",route:"admin.report.index"}]},{group:"Operasional",items:[{label:"Laporan Transaksi Biaya Operasional",route:"admin.report.operational-cost.index"}]}]};return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),w(W,null,[e(f,{title:vl}),e(v,null,{title:a(()=>[b(r(vl))]),"right-button":a(()=>[l(s).screen.gt.sm?(d(),I(Ro,{key:0})):k("",!0)]),default:a(()=>[e(Ve,{class:"fit animated-background-container"},{default:a(()=>[t("div",pc,[t("div",fc,[b(" Selamat datang, "+r(l(m).props.auth.user.name)+". ",1),e(V,{name:"waving_hand",class:"waving-hand"})]),t("div",gc,[t("div",bc,[e(ue,{class:"full-height full-width",flat:""},{default:a(()=>[e(Je,{class:"bg-green-3 text-grey-10"},{default:a(()=>[e(Zt,null,{default:a(()=>[e(V,{name:"storefront",class:"q-mr-md"}),n[14]||(n[14]=b("Penjualan"))]),_:1})]),_:1}),e(Ie,null,{default:a(()=>[te((d(),I(le,{clickable:"",onClick:n[0]||(n[0]=p=>l(Y).get(i.route("admin.sales-order.index")))},{default:a(()=>[e(z,null,{default:a(()=>n[15]||(n[15]=[b("Daftar Penjualan")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(le,{clickable:"",onClick:n[1]||(n[1]=p=>l(Y).get(i.route("admin.sales-order.add")))},{default:a(()=>[e(z,null,{default:a(()=>n[16]||(n[16]=[b("Penjualan Baru")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"add"})]),_:1})]),_:1})),[[se]]),e(Te),te((d(),I(le,{clickable:"",onClick:n[2]||(n[2]=p=>l(Y).get(i.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(z,null,{default:a(()=>n[17]||(n[17]=[b("Konfirmasi Topup Deposit Pelanggan")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(le,{clickable:"",onClick:n[3]||(n[3]=p=>l(Y).get(i.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(z,null,{default:a(()=>n[18]||(n[18]=[b("Transaksi Deposit Pelanggan")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),e(Te),te((d(),I(le,{clickable:"",onClick:n[4]||(n[4]=p=>l(Y).get(i.route("admin.customer.index")))},{default:a(()=>[e(z,null,{default:a(()=>n[19]||(n[19]=[b("Pelanggan")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(le,{clickable:"",onClick:n[5]||(n[5]=p=>l(Y).get(i.route("admin.customer.add")))},{default:a(()=>[e(z,null,{default:a(()=>n[20]||(n[20]=[b("Pelanggan Baru")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"add"})]),_:1})]),_:1})),[[se]])]),_:1})]),_:1})]),t("div",vc,[e(ue,{class:"full-height full-width",flat:""},{default:a(()=>[e(Je,{class:"bg-light-blue-2 text-grey-10"},{default:a(()=>[e(Zt,null,{default:a(()=>[e(V,{name:"inventory_2",class:"q-mr-md"}),n[21]||(n[21]=b("Inventori"))]),_:1})]),_:1}),e(Ie,null,{default:a(()=>[te((d(),I(le,{clickable:"",onClick:n[6]||(n[6]=p=>l(Y).get(i.route("admin.product.index")))},{default:a(()=>[e(z,null,{default:a(()=>n[22]||(n[22]=[b("Produk")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(le,{clickable:"",onClick:n[7]||(n[7]=p=>l(Y).get(i.route("admin.product.add")))},{default:a(()=>[e(z,null,{default:a(()=>n[23]||(n[23]=[b("Produk Baru")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"add"})]),_:1})]),_:1})),[[se]]),e(Te),te((d(),I(le,{clickable:"",onClick:n[8]||(n[8]=p=>l(Y).get(i.route("admin.stock-adjustment.index")))},{default:a(()=>[e(z,null,{default:a(()=>n[24]||(n[24]=[b("Penyesuaian Stok")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(le,{clickable:"",onClick:n[9]||(n[9]=p=>l(Y).get(i.route("admin.stock-movement.index")))},{default:a(()=>[e(z,null,{default:a(()=>n[25]||(n[25]=[b("Riwayat Stok")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right"})]),_:1})]),_:1})),[[se]])]),_:1})]),_:1})]),t("div",_c,[e(ue,{class:"full-height full-width",flat:""},{default:a(()=>[e(Je,{class:"bg-deep-purple-2 text-grey-10"},{default:a(()=>[e(Zt,null,{default:a(()=>[e(V,{name:"local_shipping",class:"q-mr-md"}),n[26]||(n[26]=b("Pembelian"))]),_:1})]),_:1}),e(Ie,null,{default:a(()=>[te((d(),I(le,{clickable:"",onClick:n[10]||(n[10]=p=>l(Y).get(i.route("admin.purchase-order.index")))},{default:a(()=>[e(z,null,{default:a(()=>n[27]||(n[27]=[b("Pembelian")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(le,{clickable:"",onClick:n[11]||(n[11]=p=>l(Y).get(i.route("admin.purchase-order.add")))},{default:a(()=>[e(z,null,{default:a(()=>n[28]||(n[28]=[b("Pembelian Baru")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"add"})]),_:1})]),_:1})),[[se]]),e(Te),te((d(),I(le,{clickable:"",onClick:n[12]||(n[12]=p=>l(Y).get(i.route("admin.supplier.index")))},{default:a(()=>[e(z,null,{default:a(()=>n[29]||(n[29]=[b("Supplier Baru")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"add"})]),_:1})]),_:1})),[[se]]),te((d(),I(le,{clickable:"",onClick:n[13]||(n[13]=p=>l(Y).get(i.route("admin.supplier.index")))},{default:a(()=>[e(z,null,{default:a(()=>n[30]||(n[30]=[b("Supplier")])),_:1}),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right"})]),_:1})]),_:1})),[[se]])]),_:1})]),_:1})])]),e(ue,{class:"bg-orange-3 text-grey-10 full-width",flat:""},{default:a(()=>[e(Je,null,{default:a(()=>[e(Zt,null,{default:a(()=>[e(V,{name:"analytics",class:"q-mr-sm"}),n[31]||(n[31]=b(" Laporan"))]),_:1})]),_:1})]),_:1}),e(ue,{flat:"",class:"q-pa-md bg-grey-1 full-width"},{default:a(()=>[t("div",yc,[(d(!0),w(W,null,Oe(o.reports,p=>(d(),w("div",{key:p.group,class:"col-xs-12 col-sm-3 q-mb-md"},[t("div",kc,r(p.group),1),e(Ie,null,{default:a(()=>[(d(!0),w(W,null,Oe(p.items,u=>te((d(),I(le,{key:u,clickable:"",onClick:g=>l(Y).get(i.route(u.route))},{default:a(()=>[e(z,null,{default:a(()=>[b(r(u.label),1)]),_:2},1024),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"])),[[se]])),128))]),_:2},1024)]))),128))])]),_:1})])]),_:1})]),_:1})],64)}}},hc=ft(wc,[["__scopeId","data-v-b399094e"]]),$c=Object.freeze(Object.defineProperty({__proto__:null,default:hc},Symbol.toStringTag,{value:"Module"})),xc={class:"q-gutter-sm"},Sc={class:"col col-md-6 q-pa-xs"},Vc={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=We({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description}),i=()=>lt({form:o,url:route("admin.operational-cost-category.save")});return(n,f)=>{const v=J("i-head"),p=J("authenticated-layout");return d(),w(W,null,[e(v,{title:m}),e(p,null,{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",xc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=u=>l(Y).get(n.route("admin.operational-cost-category.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Sc,[e(Qe,{class:"row",onSubmit:X(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=u=>l(o).id=u)},null,512),[[vt,l(o).id]]),e(ie,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":f[2]||(f[2]=u=>l(o).name=u),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[u=>u&&u.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(o).description,"onUpdate:modelValue":f[3]||(f[3]=u=>l(o).description=u),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:f[4]||(f[4]=u=>l(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},qc=Object.freeze(Object.defineProperty({__proto__:null,default:Vc},Symbol.toStringTag,{value:"Module"})),Cc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Tc={class:"q-pa-xs"},Pc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Rc={key:0,class:"text-grey-8"},Oc={class:"flex justify-end"},_l="Kategori Biaya Operasional",Dc={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=De({search:"",...Ne()}),u=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];ye(()=>{y()});const _=C=>at({message:`Hapus Kategori Biaya ${C.name}?`,url:route("admin.operational-cost-category.delete",C.id),fetchItemsCallback:y,loading:i}),y=(C=null)=>{Be({pagination:u,filter:p,props:C,rows:o,url:route("admin.operational-cost-category.data"),loading:i,tableRef:n})},$=G(()=>s.screen.gt.sm?g:g.filter(C=>C.name==="name"||C.name==="action"));return(C,D)=>{const F=J("i-head"),A=J("authenticated-layout");return d(),w(W,null,[e(F,{title:_l}),e(A,null,Ae({title:a(()=>[b(r(_l))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=T=>m.value=!m.value)},null,8,["icon"]),C.$can("admin.operational-cost-category.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[1]||(D[1]=T=>l(Y).get(C.route("admin.operational-cost-category.add")))})):k("",!0)]),default:a(()=>[t("div",Tc,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",style:ze({height:l(v)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":D[4]||(D[4]=T=>u.value=T),filter:p.search,loading:i.value,columns:$.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:T,message:N,filter:M})=>[t("div",Pc,[t("span",null,r(N)+" "+r(M?" with term "+M:""),1)])]),body:a(T=>[e(Pe,{props:T},{default:a(()=>[e(Q,{key:"name",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[T.row.description?(d(),w("div",Rc,[e(V,{name:"description"}),b(" "+r(T.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"description",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:T},{default:a(()=>[t("div",Oc,[C.$can("admin.operational-cost-category.add")||C.$can("admin.operational-cost-category.edit")||C.$can("admin.operational-cost-category.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[3]||(D[3]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[C.$can("admin.operational-cost-category.add")?te((d(),I(le,{key:0,clickable:"",onClick:X(N=>l(Y).get(C.route("admin.operational-cost-category.duplicate",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>D[5]||(D[5]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),C.$can("admin.operational-cost-category.edit")?te((d(),I(le,{key:1,clickable:"",onClick:X(N=>l(Y).get(C.route("admin.operational-cost-category.edit",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>D[6]||(D[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),C.$can("admin.operational-cost-category.delete")?te((d(),I(le,{key:2,onClick:X(N=>_(T.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>D[7]||(D[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Cc,[e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":D[2]||(D[2]=T=>p.search=T),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ic=Object.freeze(Object.defineProperty({__proto__:null,default:Dc},Symbol.toStringTag,{value:"Module"})),Uc={class:"q-gutter-sm"},jc={class:"col col-md-6 q-pa-xs"},Ec={class:"row"},Ac={class:"detail"},Mc={key:0},Nc={key:1},Bc={key:2},zc={key:3},Fc={colspan:"3",class:"bg-white"},yl="Rincian Biaya Operasional",Lc={__name:"Detail",setup(c){const s=ge();return(m,o)=>{const i=J("i-head"),n=J("i-link"),f=J("authenticated-layout");return d(),w(W,null,[e(i,{title:yl}),e(f,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Uc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>m.$inertia.get(m.route("admin.operational-cost.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},r(yl))]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",jc,[t("div",Ec,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[o[22]||(o[22]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",Ac,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(aa)(l(s).props.data.date)),1)]),l(s).props.data.finance_account?(d(),w("tr",Mc,[o[7]||(o[7]=t("td",null,"Akun",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,[e(n,{href:m.route("admin.finance-account.detail",l(s).props.data.finance_account.id)},{default:a(()=>[b(r(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),l(s).props.data.finance_account.type==="bank"?(d(),w(W,{key:0},[o[5]||(o[5]=t("br",null,null,-1)),b(" Rek "+r(l(s).props.data.finance_account.bank)+" an "+r(l(s).props.data.finance_account.holder)+" ",1),o[6]||(o[6]=t("br",null,null,-1)),b(" "+r(l(s).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.category?(d(),w("tr",Nc,[o[9]||(o[9]=t("td",null,"Kategori",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.category.name),1)])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Deskripsi",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.description),1)]),t("tr",null,[o[13]||(o[13]=t("td",null,"Jumlah",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(K)(l(s).props.data.amount)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Catatan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",Bc,[o[17]||(o[17]=t("td",null,"Dibuat",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",zc,[o[19]||(o[19]=t("td",null,"Diperbarui",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(W,{key:4},[o[21]||(o[21]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Fc,[e(oa,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:ze([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Hc=Object.freeze(Object.defineProperty({__proto__:null,default:Lc},Symbol.toStringTag,{value:"Module"})),Kc=Pt({name:"QPopupProxy",props:{...ms,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(c,{slots:s,emit:m,attrs:o}){const{proxy:i}=St(),{$q:n}=i,f=O(!1),v=O(null),p=G(()=>parseInt(c.breakpoint,10)),{canShow:u}=cs({showing:f});function g(){return n.screen.width<p.value||n.screen.height<p.value?"dialog":"menu"}const _=O(g()),y=G(()=>_.value==="menu"?{maxHeight:"99vh"}:{});He(()=>g(),D=>{f.value!==!0&&(_.value=D)});function $(D){f.value=!0,m("show",D)}function C(D){f.value=!1,_.value=g(),m("hide",D)}return Object.assign(i,{show(D){u(D)===!0&&v.value.show(D)},hide(D){v.value.hide(D)},toggle(D){v.value.toggle(D)}}),ro(i,"currentComponent",()=>({type:_.value,ref:v.value})),()=>{const D={ref:v,...y.value,...o,onShow:$,onHide:C};let F;return _.value==="dialog"?F=Xe:(F=Ge,Object.assign(D,{target:c.target,contextMenu:c.contextMenu,noParentEvent:!0,separateClosePopup:!0})),Se(F,D,s.default)}}}),Yc={class:"row items-center justify-end"},Wc={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(c,{emit:s}){const m=c,o=s,i=O(""),n=O(""),f=u=>{let g=!0;const _=m.minDate?it.formatDate(m.minDate,"YYYY/MM/DD"):null,y=m.maxDate?it.formatDate(m.maxDate,"YYYY/MM/DD"):null;return _&&(g=g&&it.isBetweenDates(u,_,"2999/01/01",{inclusiveFrom:!0})),y&&(g=g&&it.isBetweenDates(u,"1900/01/01",y,{inclusiveTo:!0})),g},v=G(()=>[u=>!!u||"Tanggal harus diisi",u=>{const g=it.extractDate(u,m.displayFormat);if(!g)return"Format tanggal tidak valid";g.setHours(0,0,0,0);const _=m.minDate?new Date(m.minDate):null;_&&_.setHours(0,0,0,0);const y=m.maxDate?new Date(m.maxDate):null;return y&&y.setHours(0,0,0,0),_&&g<_?`Tanggal tidak boleh kurang dari ${it.formatDate(m.minDate,m.displayFormat)}`:y&&g>y?`Tanggal tidak boleh lebih dari ${it.formatDate(m.maxDate,m.displayFormat)}`:(o("update:modelValue",g),!0)}]);He(()=>m.modelValue,u=>{u instanceof Date?(n.value=it.formatDate(u,"YYYY/MM/DD"),i.value=it.formatDate(u,m.displayFormat)):(n.value="",i.value="")},{immediate:!0});const p=u=>{const g=u!==null?new Date(u):null;o("update:modelValue",g),i.value=g?it.formatDate(g,m.displayFormat):null};return(u,g)=>(d(),I(ie,{modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=_=>i.value=_),label:m.label,readonly:m.readonly,disable:m.disable,error:m.error,"error-message":m.errorMessage,mask:m.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:v.value},{append:a(()=>[e(E,{icon:"event",disable:m.disable||m.readonly,flat:"",rounded:"",dense:""},{default:a(()=>[e(Kc,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(ps,{modelValue:n.value,"onUpdate:modelValue":[g[0]||(g[0]=_=>n.value=_),p],options:f},{default:a(()=>[t("div",Yc,[te(e(E,{label:"Close",color:"primary",flat:""},null,512),[[me]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},sa=ft(Wc,[["__scopeId","data-v-b418ccfb"]]);function Oo(c,s=!1){const m=c.map(f=>({value:f.id,label:f.name})),o=s?[{value:"all",label:"Semua"},...m]:m,i=O([...o]);return{filteredCostCategories:i,filterCostCategory:(f,v)=>{const p=f.toLowerCase();v(()=>{i.value=o.filter(u=>u.label.toLowerCase().includes(p))})},costCategoryOptions:o}}const Qc={class:"q-gutter-sm"},Jc={class:"col col-md-6 q-pa-xs"},Gc={__name:"Editor",setup(c){var _;const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=Oo(s.props.categories),i=s.props.finance_accounts.map(y=>({label:y.name,value:y.id})),n=O(o),f=O([...n.value]),v=We({id:s.props.data.id,finance_account_id:s.props.data.finance_account_id??null,category_id:s.props.data.category_id??null,date:new Date(s.props.data.date),description:s.props.data.description,notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((_=s.props.data)==null?void 0:_.image_path)??null,image:null}),p=()=>{na(v,{date:"YYYY-MM-DD"}),lt({form:v,url:route("admin.operational-cost.save")})},u=(y,$)=>{$(()=>{f.value=n.value.filter(C=>C.label.toLowerCase().includes(y.toLowerCase()))})},g=()=>{v.image_path=null};return(y,$)=>{const C=J("i-head"),D=J("authenticated-layout");return d(),w(W,null,[e(C,{title:m}),e(D,null,{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",Qc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:$[0]||($[0]=F=>y.$inertia.get(y.route("admin.operational-cost.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Jc,[e(Qe,{class:"row",onSubmit:X(p,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":$[1]||($[1]=F=>l(v).id=F)},null,512),[[vt,l(v).id]]),e(ce,{autofocus:"",modelValue:l(v).category_id,"onUpdate:modelValue":$[2]||($[2]=F=>l(v).category_id=F),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:f.value,"map-options":"","emit-value":"",onFilter:u,error:!!l(v).errors.category_id,disable:l(v).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(z,null,{default:a(()=>$[10]||($[10]=[b("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(sa,{modelValue:l(v).date,"onUpdate:modelValue":$[3]||($[3]=F=>l(v).date=F),label:"Tanggal",error:!!l(v).errors.date,disable:l(v).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ie,{modelValue:l(v).description,"onUpdate:modelValue":$[4]||($[4]=F=>l(v).description=F),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!l(v).errors.description,disable:l(v).processing,"error-message":l(v).errors.description,rules:[F=>F&&F.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Ee,{modelValue:l(v).amount,"onUpdate:modelValue":$[5]||($[5]=F=>l(v).amount=F),label:"Jumlah",lazyRules:"",disable:l(v).processing,error:!!l(v).errors.amount,errorMessage:l(v).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ce,{class:"custom-select",modelValue:l(v).finance_account_id,"onUpdate:modelValue":$[6]||($[6]=F=>l(v).finance_account_id=F),label:"Sumber Dana",options:l(i),"map-options":"","emit-value":"",clearable:"",errorMessage:l(v).errors.finance_account_id,error:!!l(v).errors.finance_account_id,disable:l(v).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(ie,{modelValue:l(v).notes,"onUpdate:modelValue":$[7]||($[7]=F=>l(v).notes=F),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(v).processing,error:!!l(v).errors.notes,"error-message":l(v).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ja,{modelValue:l(v).image,"onUpdate:modelValue":$[8]||($[8]=F=>l(v).image=F),"initial-image-path":l(v).image_path,disabled:l(v).processing,error:!!l(v).errors.image||!!l(v).errors.image_path,"error-message":l(v).errors.image||l(v).errors.image_path,onImageCleared:g},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(v).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(v).processing,onClick:$[9]||($[9]=F=>l(Y).get(y.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Xc=Object.freeze(Object.defineProperty({__proto__:null,default:Gc},Symbol.toStringTag,{value:"Module"})),Zc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ep={class:"q-pa-xs"},tp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ap={key:0},lp={key:1},op={key:0},np={class:"flex justify-end no-wrap"},kl="Biaya Operasional",sp={__name:"Index",setup(c){const s=ge(),m=ke(),o=O(!1),i=O(null),n=O(null),f=tt(n),v=O(null),p=O(!1),u=Ce().startOf("month").toDate(),g=Ce().endOf("month").toDate(),_=O([]),y=O(!0),{costCategoryOptions:$}=Oo(s.props.categories),C=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...$],{accountOptions:D}=fs(s.props.finance_accounts),F=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...D],A=De({search:"",finance_account_id:"all",category_id:"all",start_date:u,end_date:g,...Ne()}),T=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),N=[{name:"code",label:m.screen.lt.md?"Item":"Kode",field:"code",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];ye(()=>{R()});const M=P=>at({message:`Hapus Biaya ${P.code}?`,url:route("admin.operational-cost.delete",P.id),fetchItemsCallback:R,loading:y}),R=(P=null)=>{const q={...A,start_date:Ce(A.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Ce(A.end_date).format("YYYY-MM-DD HH:mm:ss")};Be({pagination:T,filter:q,props:P,rows:_,url:route("admin.operational-cost.data"),loading:y,tableRef:i})},B=()=>{R()},h=G(()=>m.screen.gt.sm?N:N.filter(P=>P.name==="code"||P.name==="action")),x=P=>{v.value=P,p.value=!0};return(P,q)=>{const S=J("i-head"),U=J("authenticated-layout");return d(),w(W,null,[e(S,{title:kl}),e(U,null,Ae({title:a(()=>[b(r(kl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:q[0]||(q[0]=j=>o.value=!o.value)},null,8,["icon"]),P.$can("admin.operational-cost.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:q[1]||(q[1]=j=>l(Y).get(P.route("admin.operational-cost.add")))})):k("",!0)]),default:a(()=>[t("div",ep,[e(Ue,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:T.value,"onUpdate:pagination":q[8]||(q[8]=j=>T.value=j),filter:A.search,loading:y.value,columns:h.value,rows:_.value,"rows-per-page-options":[10,25,50],style:ze({height:l(f)}),onRequest:R,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:j,message:oe,filter:re})=>[t("div",tp,[t("span",null,r(oe)+" "+r(re?" with term "+re:""),1)])]),body:a(j=>[e(Pe,{props:j,class:"cursor-pointer",onClick:X(oe=>l(Y).get(P.route("admin.operational-cost.detail",{id:j.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"code",props:j,class:"wrap-column"},{default:a(()=>[l(m).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[b(" Kode: ")],64)),b(" "+r(j.row.code)+" ",1),l(m).screen.gt.sm?k("",!0):(d(),w(W,{key:1},[t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(aa)(j.row.date)),1)]),j.row.finance_account?(d(),w("div",ap,[e(V,{name:"wallet",class:"inline-icon"}),b(" "+r(j.row.finance_account.name),1)])):k("",!0),j.row.category?(d(),w("div",lp,[e(V,{name:"category",class:"inline-icon"}),b(" "+r(j.row.category.name),1)])):k("",!0),e(he,{icon:"description",text:j.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(V,{name:"money",class:"inline-icon"}),b(" Rp. "+r(l(K)(j.row.amount)),1)]),e(he,{icon:"notes",text:j.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(Q,{key:"date",props:j,class:"wrap-column"},{default:a(()=>[b(r(l(aa)(j.row.date)),1)]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:j,class:"wrap-column"},{default:a(()=>[b(r(j.row.finance_account?j.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(Q,{key:"category_id",props:j},{default:a(()=>[j.row.category?(d(),w("div",op,r(j.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"description",props:j},{default:a(()=>[e(he,{text:j.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"amount",props:j},{default:a(()=>[b(r(l(K)(j.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:j},{default:a(()=>[e(he,{text:j.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:j},{default:a(()=>[t("div",np,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:j.row.image_path===null||j.row.image_path==="",onClick:X(oe=>x(j.row.image_path),["stop"])},{default:a(()=>[j.row.image_path!=null?(d(),I(Tt,{key:0},{default:a(()=>q[10]||(q[10]=[b(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.operational-cost.add")||P.$can("admin.operational-cost.edit")||P.$can("admin.operational-cost.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:q[7]||(q[7]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[P.$can("admin.operational-cost.add")?te((d(),I(le,{key:0,clickable:"",onClick:X(oe=>l(Y).get(P.route("admin.operational-cost.duplicate",j.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>q[11]||(q[11]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),P.$can("admin.operational-cost.edit")?te((d(),I(le,{key:1,clickable:"",onClick:X(oe=>l(Y).get(P.route("admin.operational-cost.edit",j.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>q[12]||(q[12]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),P.$can("admin.operational-cost.delete")?te((d(),I(le,{key:2,onClick:X(oe=>M(j.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>q[13]||(q[13]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(pa,{modelValue:p.value,"onUpdate:modelValue":q[9]||(q[9]=j=>p.value=j),imageUrl:`/${v.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",Zc,[e(Fe,{modelValue:A.start_date,"onUpdate:modelValue":[q[2]||(q[2]=j=>A.start_date=j),B],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Fe,{modelValue:A.end_date,"onUpdate:modelValue":[q[3]||(q[3]=j=>A.end_date=j),B],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:A.category_id,"onUpdate:modelValue":[q[4]||(q[4]=j=>A.category_id=j),B],options:C,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:A.finance_account_id,"onUpdate:modelValue":[q[5]||(q[5]=j=>A.finance_account_id=j),B],options:F,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:A.search,"onUpdate:modelValue":q[6]||(q[6]=j=>A.search=j),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},rp=Object.freeze(Object.defineProperty({__proto__:null,default:sp},Symbol.toStringTag,{value:"Module"})),ip={class:"q-gutter-sm"},dp={class:"col col-md-6 q-pa-xs"},up={__name:"Editor",setup(c){const s=ke(),m=ge(),o=(m.props.data.id?"Edit":"Tambah")+" Kategori Produk",i=We({id:m.props.data.id,name:m.props.data.name,description:m.props.data.description}),n=()=>lt({form:i,url:route("admin.product-category.save")});return(f,v)=>{const p=J("i-head"),u=J("authenticated-layout");return d(),w(W,null,[e(p,{title:o}),e(u,{"show-drawer-button":!l(s).screen.lt.md},Ae({title:a(()=>[b(r(o))]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",dp,[e(Qe,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=g=>l(i).id=g)},null,512),[[vt,l(i).id]]),e(ie,{autofocus:"",modelValue:l(i).name,"onUpdate:modelValue":v[2]||(v[2]=g=>l(i).name=g),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(i).errors.name,disable:l(i).processing,"error-message":l(i).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(i).description,"onUpdate:modelValue":v[3]||(v[3]=g=>l(i).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.description,"error-message":l(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:v[4]||(v[4]=g=>l(i).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",ip,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=g=>l(Y).get(f.route("admin.product-category.index")))})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},mp=Object.freeze(Object.defineProperty({__proto__:null,default:up},Symbol.toStringTag,{value:"Module"})),cp={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},pp={class:"q-pa-xs"},fp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},gp={key:0,class:"text-grey-8"},bp={class:"flex justify-end"},wl="Kategori Produk",vp={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=De({search:"",...Ne()}),u=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];ye(()=>{y()});const _=C=>at({message:`Hapus Kategori ${C.name}?`,url:route("admin.product-category.delete",C.id),fetchItemsCallback:y,loading:i}),y=(C=null)=>{Be({pagination:u,filter:p,props:C,rows:o,url:route("admin.product-category.data"),loading:i,tableRef:n})},$=G(()=>s.screen.gt.sm?g:g.filter(C=>C.name==="name"||C.name==="action"));return(C,D)=>{const F=J("i-head"),A=J("authenticated-layout");return d(),w(W,null,[e(F,{title:wl}),e(A,null,Ae({title:a(()=>[b(r(wl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=T=>m.value=!m.value)},null,8,["icon"]),C.$can("admin.product-category.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[1]||(D[1]=T=>l(Y).get(C.route("admin.product-category.add")))})):k("",!0)]),default:a(()=>[t("div",pp,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":D[4]||(D[4]=T=>u.value=T),filter:p.search,loading:i.value,columns:$.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:l(v)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:T,message:N,filter:M})=>[t("div",fp,[t("span",null,r(N)+" "+r(M?" with term "+M:""),1)])]),body:a(T=>[e(Pe,{props:T},{default:a(()=>[e(Q,{key:"name",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[T.row.description?(d(),w("div",gp,[e(V,{name:"description"}),b(" "+r(T.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"description",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:T},{default:a(()=>[t("div",bp,[C.$can("admin.product-category.add")||C.$can("admin.product-category.edit")||C.$can("admin.product-category.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[3]||(D[3]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[C.$can("admin.product-category.add")?te((d(),I(le,{key:0,clickable:"",onClick:X(N=>l(Y).get(C.route("admin.product-category.duplicate",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>D[5]||(D[5]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),C.$can("admin.product-category.edit")?te((d(),I(le,{key:1,clickable:"",onClick:X(N=>l(Y).get(C.route("admin.product-category.edit",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>D[6]||(D[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),C.$can("admin.product-category.delete")?te((d(),I(le,{key:2,onClick:X(N=>_(T.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>D[7]||(D[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",cp,[e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":D[2]||(D[2]=T=>p.search=T),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},_p=Object.freeze(Object.defineProperty({__proto__:null,default:vp},Symbol.toStringTag,{value:"Module"})),yp={class:"detail"},kp={key:0},wp={key:1},hp={key:2},$p={class:"detail"},xp={class:"detail"},Sp={key:0},Vp={key:0},qp={key:0},Cp={key:0},Tp={class:"detail"},Pp={key:0,class:"q-pt-md"},Do={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(c){const s=c;ke();const m=i=>`${i>0?K((i-s.product.cost)/s.product.cost*100,2):0}%`,o=()=>{at({message:`Hapus Produk ${s.product.name}?`,url:route("admin.product.delete",s.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(i,n)=>{const f=J("i-link");return d(),w("div",null,[n[39]||(n[39]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",yp,[t("tbody",null,[t("tr",null,[n[1]||(n[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),n[2]||(n[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(c.product.name),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"Deskirpsi",-1)),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,r(c.product.description),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Barcode",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(c.product.barcode),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Jenis Produk",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.PRODUCT_TYPES[c.product.type]),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Kategori",-1)),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,r(c.product.category?c.product.category.name:"--Tidak memiliki kategori--"),1)]),i.$can("admin.product:view-supplier")?(d(),w("tr",kp,[n[11]||(n[11]=t("td",null,"Supplier",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[c.product.supplier?(d(),I(f,{key:0,href:i.route("admin.supplier.detail",{id:c.product.supplier.id})},{default:a(()=>[b(r(c.product.supplier.name),1)]),_:1},8,["href"])):(d(),w(W,{key:1},[b(r("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[n[13]||(n[13]=t("td",null,"Status",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,r(c.product.active?"Aktif":"Tidak Aktif"),1)]),c.product.created_at?(d(),w("tr",wp,[n[16]||(n[16]=t("td",null,"Dibuat Oleh",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[c.product.creator?(d(),w(W,{key:0},[e(f,{href:i.route("admin.user.detail",{id:c.product.creator})},{default:a(()=>[b(r(c.product.creator.username),1)]),_:1},8,["href"]),n[15]||(n[15]=b(" - "))],64)):k("",!0),b(" "+r(l(ve)(c.product.created_at)),1)])])):k("",!0),c.product.updater?(d(),w("tr",hp,[n[19]||(n[19]=t("td",null,"Diperbarui oleh",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,[c.product.updater?(d(),w(W,{key:0},[e(f,{href:i.route("admin.user.detail",{id:c.product.updater})},{default:a(()=>[b(r(c.product.updater.username),1)]),_:1},8,["href"]),n[18]||(n[18]=b(" - "))],64)):k("",!0),b(" "+r(l(ve)(c.product.updated_at)),1)])])):k("",!0)])]),n[40]||(n[40]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",$p,[t("tbody",null,[t("tr",null,[n[21]||(n[21]=t("td",{style:{width:"120px"}},"Stok",-1)),n[22]||(n[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(K)(c.product.stock))+" "+r(c.product.uom),1)]),t("tr",null,[n[23]||(n[23]=t("td",null,"Stok Minimum",-1)),n[24]||(n[24]=t("td",null,":",-1)),t("td",null,r(l(K)(c.product.min_stock))+" "+r(c.product.uom),1)]),t("tr",null,[n[25]||(n[25]=t("td",null,"Barcode",-1)),n[26]||(n[26]=t("td",null,":",-1)),t("td",null,r(c.product.barcode),1)])])]),n[41]||(n[41]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",xp,[t("tbody",null,[t("tr",null,[n[27]||(n[27]=t("td",null,"Opsi Harga",-1)),n[28]||(n[28]=t("td",null,":",-1)),t("td",null,r(c.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),i.$can("admin.product:view-cost")?(d(),w("tr",Sp,[n[29]||(n[29]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),n[30]||(n[30]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(l(K)(c.product.cost)),1)])):k("",!0),t("tr",null,[n[31]||(n[31]=t("td",null,"Harga Eceran",-1)),n[32]||(n[32]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+r(l(K)(c.product.price_1))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",Vp," ("+r(m(c.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[n[33]||(n[33]=t("td",null,"Harga Partai",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+r(l(K)(c.product.price_2))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",qp," ("+r(m(c.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[n[35]||(n[35]=t("td",null,"Harga Grosir",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+r(l(K)(c.product.price_3))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",Cp," ("+r(m(c.product.price_3))+") ",1)):k("",!0)])])])]),n[42]||(n[42]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",Tp,[t("tbody",null,[t("tr",null,[n[37]||(n[37]=t("td",{style:{width:"120px"}},"Catatan",-1)),n[38]||(n[38]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(c.product.notes),1)])])]),i.$can("admin.product.delete")?(d(),w("div",Pp,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:n[0]||(n[0]=v=>o())})])):k("",!0)])}}},Rp=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),Op={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Dp={key:0},Io={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(c){const s=c,m=ke(),o=O([]),i=O(!0),n=De({...Ne()}),f=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let v=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"quantity_before",label:"Stok Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Stok Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];ye(()=>{p()});const p=(g=null)=>Be({pagination:f,filter:n,props:g,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:s.productId}}),loading:i}),u=G(()=>m.screen.lt.sm?v.filter(g=>g.name==="id"||g.name==="quantity"):v);return(g,_)=>(d(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:f.value,"onUpdate:pagination":_[0]||(_[0]=y=>f.value=y),filter:n.search,loading:i.value,columns:u.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:C})=>[t("div",Op,[t("span",null,r($)+" "+r(C?" with term "+C:""),1)])]),body:a(y=>[e(Pe,{props:y},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(y.row.code),1)]),t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(ve)(y.row.created_at)),1)]),t("div",null,[e(ot,null,{default:a(()=>[b(r(g.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type]),1)]),_:2},1024)]),l(m).screen.lt.sm?(d(),w(W,{key:0},[t("div",{class:xe(y.row.quantity>0?"text-positive":"text-negative")},[e(V,{class:"inline-icon",name:"compare_arrows"}),b(" "+r(l(K)(y.row.quantity_before))+" "+r(y.row.uom)+"  "+r(l(K)(y.row.quantity_after))+" "+r(y.row.uom),1)],2),e(he,{text:y.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"created_at",props:y},{default:a(()=>[b(r(l(ve)(y.row.created_at)),1)]),_:2},1032,["props"]),e(Q,{key:"type",props:y},{default:a(()=>[b(r(g.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type])+" ",1),y.row.ref?(d(),w("span",Dp,r(y.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"quantity_before",props:y},{default:a(()=>[b(r(l(K)(y.row.quantity_before)),1)]),_:2},1032,["props"]),e(Q,{key:"quantity",props:y,class:xe(y.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[b(r(l(wt)(y.row.quantity))+" ",1),l(m).screen.lt.sm?(d(),w(W,{key:0},[b(r(y.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Q,{key:"quantity_after",props:y},{default:a(()=>[b(r(l(K)(y.row.quantity_after)),1)]),_:2},1032,["props"]),e(Q,{key:"uom",props:y},{default:a(()=>[b(r(y.row.uom),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y},{default:a(()=>[e(he,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ip=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"})),Up={class:"q-gutter-sm"},jp={class:"q-gutter-sm"},Ep={class:"row justify-center"},Ap={class:"col col-lg-6 q-pa-xs"},Mp={class:"row"},Np={__name:"Detail",setup(c){const s=ge(),m=`Rincian Produk #${s.props.data.id}`,o=O("main");return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),w(W,null,[e(f,{title:m}),e(v,{"show-drawer-button":!0},{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",Up,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>l(Y).get(i.route("admin.product.index")))})])]),"right-button":a(()=>[t("div",jp,[i.$can("admin.product.edit")?(d(),I(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[1]||(n[1]=p=>l(Y).get(i.route("admin.product.edit",{id:l(s).props.data.id}))),title:"Edit produk"})):k("",!0),i.$can("admin.product.add")?(d(),I(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[2]||(n[2]=p=>l(Y).get(i.route("admin.product.duplicate",{id:l(s).props.data.id}))),title:"Duplikat produk"})):k("",!0),i.$can("admin.product.add")?(d(),I(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:n[3]||(n[3]=p=>l(Y).get(i.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:a(()=>[t("div",Ep,[t("div",Ap,[t("div",Mp,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Vt,{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(nt,{name:"main",label:"Info Utama"}),e(nt,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(qt,{modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=p=>o.value=p),animated:""},{default:a(()=>[e(st,{name:"main"},{default:a(()=>[e(Do,{product:l(s).props.data},null,8,["product"])]),_:1}),e(st,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Io,{"product-id":l(s).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},Bp=Object.freeze(Object.defineProperty({__proto__:null,default:Np},Symbol.toStringTag,{value:"Module"})),Bt=Pt({name:"QBtnToggle",props:{...so,modelValue:{required:!0},options:{type:Array,required:!0,validator:c=>c.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(c,{slots:s,emit:m}){const o=G(()=>c.options.find(y=>y.value===c.modelValue)!==void 0),i=G(()=>({type:"hidden",name:c.name,value:c.modelValue})),n=vs(i),f=G(()=>gs(c)),v=G(()=>({rounded:c.rounded,dense:c.dense,...f.value})),p=G(()=>c.options.map((y,$)=>{const{attrs:C,value:D,slot:F,...A}=y;return{slot:F,props:{key:$,"aria-pressed":D===c.modelValue?"true":"false",...C,...A,...v.value,disable:c.disable===!0||A.disable===!0,color:D===c.modelValue?g(A,"toggleColor"):g(A,"color"),textColor:D===c.modelValue?g(A,"toggleTextColor"):g(A,"textColor"),noCaps:g(A,"noCaps")===!0,noWrap:g(A,"noWrap")===!0,size:g(A,"size"),padding:g(A,"padding"),ripple:g(A,"ripple"),stack:g(A,"stack")===!0,stretch:g(A,"stretch")===!0,onClick(T){u(D,y,T)}}}}));function u(y,$,C){c.readonly!==!0&&(c.modelValue===y?c.clearable===!0&&(m("update:modelValue",null,null),m("clear")):m("update:modelValue",y,$),m("click",C))}function g(y,$){return y[$]===void 0?c[$]:y[$]}function _(){const y=p.value.map($=>Se(E,$.props,$.slot!==void 0?s[$.slot]:void 0));return c.name!==void 0&&c.disable!==!0&&o.value===!0&&n(y,"push"),oo(s.default,y)}return()=>Se(bs,{class:"q-btn-toggle",...f.value,rounded:c.rounded,stretch:c.stretch,glossy:c.glossy,spread:c.spread},_)}});function ba(c,s=!1){const m=c.map(f=>({value:f.id,label:f.name})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...m]:m,i=O([...o]);return{filteredCategories:i,filterCategories:(f,v)=>{const p=f.toLowerCase();v(()=>{i.value=o.filter(u=>u.label.toLowerCase().includes(p))})},categories:o}}function va(c,s=!1){const m=c.map(f=>({value:f.id,label:f.name+" ("+f.code+")"})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...m]:m,i=O([...o]);return{filteredSuppliers:i,filterSupplierFn:(f,v)=>{const p=f.toLowerCase();v(()=>{i.value=o.filter(u=>u.label.toLowerCase().includes(p))})},suppliers:o}}const Ta=Ea({__name:"PercentInput",props:{modelValue:{type:[Number,null],required:!1,default:0},label:{type:[String,void 0],required:!1,default:void 0},locale:{type:String,default:"id-ID"},outlined:{type:Boolean,default:!1},allowNegative:{type:Boolean,default:!1},maxDecimals:{type:Number,default:0},lazyRules:{type:[Boolean,String],default:!1},disable:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(c,{expose:s,emit:m}){const o=O(null),i=_s(),n=O(!1);s({focus:()=>{o.value&&o.value.focus()},select:()=>{var T;if((T=o.value)!=null&&T.$el){const N=o.value.$el.querySelector("input");N==null||N.select()}}});const f=c,v=m,p=O(""),u=T=>{const M=new Intl.NumberFormat(T).format(123456789e-2),R=M.includes(",")?",":".",B=M.replace(/\d/g,"").replace(R,"").charAt(0);return{decimalSeparator:R,thousandSeparator:B}},{decimalSeparator:g,thousandSeparator:_}=u(f.locale),y=T=>{if(T==null||isNaN(T)){if(f.maxDecimals>0)return"";T=0}return new Intl.NumberFormat(f.locale,{minimumFractionDigits:f.maxDecimals,maximumFractionDigits:f.maxDecimals}).format(T)};He(()=>f.modelValue,T=>{n.value||(p.value=y(T))},{immediate:!0});const $=T=>{const N=T.replace(/[^0-9.,-]+/g,"").replace(new RegExp(`\\${_}`,"g"),"").replace(new RegExp(`\\${g}`,"g"),".");if(N===""||N==="-")return null;const M=parseFloat(N);return isNaN(M)?null:parseFloat(M.toFixed(f.maxDecimals))},C=()=>{n.value=!0,$(p.value),pt(()=>{var T;(T=o.value)==null||T.select()})},D=T=>{p.value=T},F=()=>{n.value=!1;const T=$(p.value);v("update:modelValue",T),p.value=y(T)},A=T=>{const N=["Backspace","Delete","Tab","ArrowLeft","ArrowRight","Home","End","Shift"];T.ctrlKey||T.metaKey||T.key>="0"&&T.key<="9"||(T.key===g||T.key===_)&&!p.value.includes(g)||f.allowNegative&&T.key==="-"&&T.target.selectionStart===0||N.includes(T.key)||T.preventDefault()};return(T,N)=>(d(),I(l(ie),{ref_key:"qInputRef",ref:o,"model-value":p.value,label:f.label,outlined:f.outlined,"onUpdate:modelValue":D,onBlur:F,onFocus:C,onKeydown:A,"lazy-rules":f.lazyRules,disable:f.disable,error:f.error,rules:f.rules,"error-message":f.errorMessage},Ae({_:2},[l(i).prepend?{name:"prepend",fn:a(()=>[xt(T.$slots,"prepend")]),key:"0"}:void 0,l(i).append?{name:"append",fn:a(()=>[xt(T.$slots,"append")]),key:"1"}:void 0]),1032,["model-value","label","outlined","lazy-rules","disable","error","rules","error-message"]))}}),zp=Ea({__name:"BarcodeInput",props:{modelValue:{}},emits:["update:modelValue","scan-success"],setup(c,{emit:s}){const m=c,o=s,i=ke(),n=O(m.modelValue);He(()=>m.modelValue,A=>{A!==n.value&&(n.value=A)});const f=A=>{n.value=A,o("update:modelValue",A)},v=O(null),p=O(!1),u=O(!1);let g=null,_=null,y=null;ye(async()=>{if("BarcodeDetector"in window){p.value=!0;try{const A=await window.BarcodeDetector.getSupportedFormats();_=new BarcodeDetector({formats:A})}catch(A){console.warn("BarcodeDetector init error:",A),p.value=!1}}}),Gt(()=>D());function $(){if(!p.value){i.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}u.value?D():C()}async function C(){if(_)try{u.value=!0,g=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),v.value&&(v.value.srcObject=g),await new Promise(A=>setTimeout(A,300)),F()}catch(A){u.value=!1,i.notify({type:"negative",message:`Gagal akses kamera: ${A.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function D(){u.value=!1,y&&cancelAnimationFrame(y),g&&(g.getTracks().forEach(A=>A.stop()),g=null)}async function F(){var A;if(!(!v.value||!_||!u.value)){try{const T=await _.detect(v.value);if(T.length>0){const N=T[0].rawValue;n.value=N,o("update:modelValue",N),o("scan-success",N),(A=navigator.vibrate)==null||A.call(navigator,100),i.notify({type:"positive",message:`Barcode terdeteksi: ${N}`,timeout:1e3}),D();return}}catch(T){console.warn("Detection error:",T)}y=requestAnimationFrame(F)}}return(A,T)=>(d(),w("div",null,[e(ie,Oa(A.$attrs,{"model-value":n.value,"onUpdate:modelValue":f,disable:u.value||A.$attrs.disable,loading:u.value||A.$attrs.loading}),Ae({append:a(()=>[p.value&&!u.value&&!n.value?(d(),I(V,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:$},{default:a(()=>[e(Tt,null,{default:a(()=>T[1]||(T[1]=[b("Scan Barcode")])),_:1})]),_:1})):u.value?(d(),I(io,{key:1,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0)]),_:2},[Oe(A.$slots,(N,M)=>({name:M,fn:a(R=>[M!=="append"?xt(A.$slots,M,Aa(Oa({key:0},R)),void 0,!0):k("",!0)])}))]),1040,["model-value","disable","loading"]),e(Xe,{modelValue:u.value,"onUpdate:modelValue":T[0]||(T[0]=N=>u.value=N),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(ue,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(ae,{class:"text-center q-pb-none"},{default:a(()=>T[2]||(T[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(ae,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:v,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(et,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(E,{label:"Batal Scan",color:"negative",icon:"close",onClick:D})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Fp=ft(zp,[["__scopeId","data-v-38d5a1a0"]]),Lp={class:"q-gutter-sm"},Hp={class:"col col-md-6 q-pa-xs"},Kp={class:"row q-gutter-md"},Yp={class:"col"},Wp={class:"col"},Qp={class:"row q-gutter-md"},Jp={class:"q-mt-md full-width"},Gp={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Produk",o=Ke(window.CONSTANTS.PRODUCT_TYPES),i=O(!1),n=We({id:s.props.data.id,category_id:s.props.data.category_id,supplier_id:s.props.data.supplier_id,type:s.props.data.type||"",name:s.props.data.name||"",description:s.props.data.description||"",stock:parseFloat(s.props.data.stock)||0,min_stock:parseFloat(s.props.data.min_stock)||0,max_stock:parseFloat(s.props.data.max_stock)||0,uom:s.props.data.uom||"",barcode:s.props.data.barcode||"",cost:parseFloat(s.props.data.cost)||0,price_1:parseFloat(s.props.data.price_1)||0,price_2:parseFloat(s.props.data.price_2)||0,price_3:parseFloat(s.props.data.price_3)||0,price_1_markup:parseFloat(s.props.data.price_1_markup),price_2_markup:parseFloat(s.props.data.price_2_markup),price_3_markup:parseFloat(s.props.data.price_3_markup),price_1_option:s.props.data.price_1_option??"price",price_2_option:s.props.data.price_2_option??"price",price_3_option:s.props.data.price_3_option??"price",active:!!s.props.data.active,price_editable:!!s.props.data.price_editable,notes:s.props.data.notes||""}),f=()=>lt({form:n,url:route("admin.product.save")});function v(D){return s.props.data.id&&s.props.data.supplier&&(D.some(A=>A.id===s.props.data.supplier_id)||D.unshift(s.props.data.supplier)),D}const{filteredCategories:p,filterCategories:u}=ba(s.props.categories),{filteredSuppliers:g,filterSupplierFn:_}=va(v(s.props.suppliers)),y=(D,F)=>(D=parseFloat(D)||0,F=parseFloat(F)||0,F<=0?D>0?100:0:(D-F)/F*100),$=(D,F)=>{D=parseFloat(D)||0,F=parseFloat(F)||0;const A=D*(1+F/100);return Math.round(A)};He(()=>n.cost,D=>{i.value||(i.value=!0,n.price_1_option=="markup"?n.price_1=$(D,n.price_1_markup):n.price_1_markup=y(n.price_1,D),n.price_2_option=="markup"?n.price_2=$(D,n.price_2_markup):n.price_2_markup=y(n.price_2,D),n.price_3_option=="markup"?n.price_3=$(D,n.price_3_markup):n.price_3_markup=y(n.price_3,D),i.value=!1)},{immediate:!1});const C=D=>{const F=`price_${D}`,A=`price_${D}_markup`,T=`price_${D}_option`;He(()=>n[F],N=>{if(n[T]=="markup"||i.value)return;i.value=!0;const M=y(N,n.cost);n[A]=parseFloat(M.toFixed(2)),i.value=!1},{deep:!1}),He(()=>n[A],N=>{n[T]!="price"&&(i.value||(i.value=!0,n[F]=$(n.cost,N),i.value=!1))},{deep:!1})};for(let D=1;D<=3;D++)C(D);return ye(()=>{for(let D=1;D<=3;D++)n[`price_${D}_markup`]=y(n[`price_${D}`],n.cost)}),(D,F)=>{const A=J("i-head"),T=J("authenticated-layout");return d(),w(W,null,[e(A,{title:m}),e(T,{"show-drawer-button":!0},{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",Lp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:F[0]||(F[0]=N=>l(Y).get(D.route("admin.product.index")))})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(n).processing,onClick:F[1]||(F[1]=N=>f()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Hp,[e(Qe,{class:"row",onKeydown:F[25]||(F[25]=zt(X(()=>{},["prevent"]),["enter"])),onSubmit:X(f,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":F[2]||(F[2]=N=>l(n).id=N)},null,512),[[vt,l(n).id]]),F[32]||(F[32]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(ce,{disabled:!!l(n).id,autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":F[3]||(F[3]=N=>l(n).type=N),class:"custom-select",options:l(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["disabled","modelValue","options"]),e(ie,{modelValue:l(n).name,"onUpdate:modelValue":F[4]||(F[4]=N=>l(n).name=N),modelModifiers:{trim:!0},label:"Kode / Nama Produk","lazy-rules":"",error:!!l(n).errors.name,disable:l(n).processing,"error-message":l(n).errors.name,rules:[N=>N&&N.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(n).description,"onUpdate:modelValue":F[5]||(F[5]=N=>l(n).description=N),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi (Opsional)","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.description,"error-message":l(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(n).category_id,"onUpdate:modelValue":F[6]||(F[6]=N=>l(n).category_id=N),label:"Kategori (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(p),"map-options":"","emit-value":"",onFilter:l(u),"option-label":"label","option-value":"value",error:!!l(n).errors.category_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(z,null,{default:a(()=>F[26]||(F[26]=[b("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),D.$can("admin.product:view-supplier")?(d(),I(ce,{key:0,modelValue:l(n).supplier_id,"onUpdate:modelValue":F[7]||(F[7]=N=>l(n).supplier_id=N),label:"Supplier Default (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(g),"map-options":"","emit-value":"",onFilter:l(_),"option-label":"label","option-value":"value",error:!!l(n).errors.supplier_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(z,null,{default:a(()=>F[27]||(F[27]=[b("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(Ct,{class:"q-mt-md",modelValue:l(n).active,"onUpdate:modelValue":F[8]||(F[8]=N=>l(n).active=N),disable:l(n).processing,label:"Produk Aktif (Ditampilkan)"},null,8,["modelValue","disable"]),F[33]||(F[33]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",Kp,[t("div",Yp,[e(ie,{modelValue:l(n).uom,"onUpdate:modelValue":F[9]||(F[9]=N=>l(n).uom=N),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!l(n).errors.uom,disable:l(n).processing,"error-message":l(n).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])]),t("div",Wp,[e(Fp,{modelValue:l(n).barcode,"onUpdate:modelValue":F[10]||(F[10]=N=>l(n).barcode=N),modelModifiers:{trim:!0},label:"Barcode"},null,8,["modelValue"])])]),t("div",Qp,[e(Ee,{modelValue:l(n).stock,"onUpdate:modelValue":F[11]||(F[11]=N=>l(n).stock=N),label:"Stok Aktual",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.stock,errorMessage:l(n).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Ee,{modelValue:l(n).min_stock,"onUpdate:modelValue":F[12]||(F[12]=N=>l(n).min_stock=N),label:"Stok Minimum",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.min_stock,errorMessage:l(n).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),F[34]||(F[34]=t("div",{class:"text-subtitle1 q-pt-lg"},"Harga & Modal",-1)),D.$can("admin.product:view-cost")?(d(),I(Ee,{key:1,modelValue:l(n).cost,"onUpdate:modelValue":F[13]||(F[13]=N=>l(n).cost=N),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.cost,errorMessage:l(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("table",Jp,[F[31]||(F[31]=t("thead",{class:"text-grey-6"},[t("tr",null,[t("th",{style:{width:"25%"}},"Harga"),t("th",{style:{width:"25%"}},"Markup (%)"),t("th"),t("th",{style:{width:"25%"}},"Harga Jual (Rp)")])],-1)),t("tbody",null,[t("tr",null,[F[28]||(F[28]=t("td",{class:"no-wrap"},"Harga Eceran",-1)),t("td",null,[e(Ta,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_1_markup,"onUpdate:modelValue":F[14]||(F[14]=N=>l(n).price_1_markup=N),lazyRules:"",readonly:l(n).price_1_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_1_markup,errorMessage:l(n).errors.price_1_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Bt,{modelValue:l(n).price_1_option,"onUpdate:modelValue":F[15]||(F[15]=N=>l(n).price_1_option=N),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_1,"onUpdate:modelValue":F[16]||(F[16]=N=>l(n).price_1=N),lazyRules:"",disable:l(n).processing,readonly:l(n).price_1_option=="markup",error:!!l(n).errors.price_1,errorMessage:l(n).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])]),t("tr",null,[F[29]||(F[29]=t("td",{class:"no-wrap"},"Harga Partai",-1)),t("td",null,[e(Ta,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_2_markup,"onUpdate:modelValue":F[17]||(F[17]=N=>l(n).price_2_markup=N),lazyRules:"",readonly:l(n).price_2_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_2_markup,errorMessage:l(n).errors.price_2_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Bt,{modelValue:l(n).price_2_option,"onUpdate:modelValue":F[18]||(F[18]=N=>l(n).price_2_option=N),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_2,"onUpdate:modelValue":F[19]||(F[19]=N=>l(n).price_2=N),lazyRules:"",readonly:l(n).price_2_option=="markup",disable:l(n).processing,error:!!l(n).errors.price_2,errorMessage:l(n).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","readonly","disable","error","errorMessage"])])]),t("tr",null,[F[30]||(F[30]=t("td",{class:"no-wrap"},"Harga Grosir",-1)),t("td",null,[e(Ta,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_3_markup,"onUpdate:modelValue":F[20]||(F[20]=N=>l(n).price_3_markup=N),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option!="markup",error:!!l(n).errors.price_3_markup,errorMessage:l(n).errors.price_3_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","disable","readonly","error","errorMessage"])]),t("td",null,[e(Bt,{modelValue:l(n).price_3_option,"onUpdate:modelValue":F[21]||(F[21]=N=>l(n).price_3_option=N),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Ee,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_3,"onUpdate:modelValue":F[22]||(F[22]=N=>l(n).price_3=N),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option=="markup",error:!!l(n).errors.price_3,errorMessage:l(n).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])])])]),e(Ct,{class:"q-mt-sm",modelValue:l(n).price_editable,"onUpdate:modelValue":F[23]||(F[23]=N=>l(n).price_editable=N),disable:l(n).processing,label:"Harga dapat diubah saat penjualan"},null,8,["modelValue","disable"]),e(ie,{modelValue:l(n).notes,"onUpdate:modelValue":F[24]||(F[24]=N=>l(n).notes=N),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Xp=Object.freeze(Object.defineProperty({__proto__:null,default:Gp},Symbol.toStringTag,{value:"Module"})),Zp={class:"q-gutter-sm"},ef={class:"col col-md-6 q-pa-xs"},hl="Import Produk",tf={__name:"Import",setup(c){const s=We({csv_file:null}),m=()=>{s.post(route("admin.product.import"),{onSuccess:()=>{s.reset()},onError:()=>{Ye()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=J("i-head"),f=J("authenticated-layout");return d(),w(W,null,[e(n,{title:hl}),e(f,{"show-drawer-button":!0},{title:a(()=>[b(r(hl))]),"left-button":a(()=>[t("div",Zp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>l(Y).get(o.route("admin.product.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",ef,[e(Qe,{class:"row",onSubmit:X(m,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(So,{modelValue:l(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=v=>l(s).csv_file=v),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:i[2]||(i[2]=v=>l(Y).get(o.route("admin.product.index")))},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),I(Ft,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),I(Ft,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},af=Object.freeze(Object.defineProperty({__proto__:null,default:tf},Symbol.toStringTag,{value:"Module"})),lf={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},of={class:"q-pa-xs"},nf={class:"full-width row flex-center text-grey-8 q-gutter-sm"},sf={key:0},rf={key:1},df={key:2},uf={key:3},mf={class:"flex justify-end"},cf={key:0},pf={key:1},ff={key:0},$l="Produk",gf={__name:"Index",setup(c){const s=ge(),m=O(null),o=O(null),i=tt(o),n=O(!1),f=[...Ke(window.CONSTANTS.PRODUCT_TYPES)],v=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],p=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],u=ke(),g=O(!1),_=O([]),y=O(!0),$=De({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...Ne()}),C=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let D=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"action",align:"right"}];ye(()=>{const q=new URLSearchParams(window.location.search).get("page");q&&(C.value.page=parseInt(q)),A()});const F=P=>at({message:`Hapus Produk ${P.name}?`,url:route("admin.product.delete",P.id),fetchItemsCallback:A,loading:y}),A=(P=null)=>{Be({pagination:C,filter:$,props:P,rows:_,url:route("admin.product.data"),loading:y,tableRef:m})},T=()=>{A()},{filteredCategories:N,filterCategories:M}=ba(s.props.categories),{filteredSuppliers:R,filterSupplierFn:B}=va(s.props.suppliers),h=G(()=>{let P=[...D];return n.value||P.splice(2,1),u.screen.gt.sm?P:P.filter(q=>q.name==="name"||q.name==="action")}),x=P=>{Y.get(route("admin.product.detail",P.row.id))};return(P,q)=>{const S=J("i-head"),U=J("authenticated-layout");return d(),w(W,null,[e(S,{title:$l}),e(U,null,Ae({title:a(()=>[b(r($l))]),"right-button":a(()=>[e(E,{icon:g.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:q[0]||(q[0]=j=>g.value=!g.value)},null,8,["icon"]),P.$can("admin.product.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:q[1]||(q[1]=j=>l(Y).get(P.route("admin.product.add")))})):k("",!0),P.$can("admin.product.import")||P.$can("admin.product:view-cost")?(d(),I(E,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:q[5]||(q[5]=X(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[P.$can("admin.product.send-price-list")?te((d(),I(le,{key:0,clickable:"",onClick:q[2]||(q[2]=X(j=>l(Y).get(P.route("admin.product.send-price-list")),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"send"})]),_:1}),e(z,null,{default:a(()=>q[14]||(q[14]=[b("Kirim Daftar Harga")])),_:1})]),_:1})),[[se],[me]]):k("",!0),P.$can("admin.product.import")?te((d(),I(le,{key:1,clickable:"",onClick:q[3]||(q[3]=j=>n.value=!n.value)},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:n.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(z,null,{default:a(()=>[b(r(n.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[se],[me]]):k("",!0),P.$can("admin.product.import")?te((d(),I(le,{key:2,clickable:"",onClick:q[4]||(q[4]=X(j=>l(Y).get(P.route("admin.product.import")),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"csv"})]),_:1}),e(z,null,{default:a(()=>q[15]||(q[15]=[b("Import")])),_:1})]),_:1})),[[se],[me]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",of,[e(Ue,{ref_key:"tableRef",ref:m,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:C.value,"onUpdate:pagination":q[13]||(q[13]=j=>C.value=j),filter:$.search,loading:y.value,columns:h.value,rows:_.value,"rows-per-page-options":[10,25,50],style:ze({height:l(i)}),onRequest:A,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:j,message:oe,filter:re})=>[t("div",nf,[t("span",null,r(oe)+" "+r(re?" with term "+re:""),1)])]),header:a(j=>[e(Pe,{props:j},{default:a(()=>[e(Jt,{"auto-width":""}),(d(!0),w(W,null,Oe(j.cols,oe=>(d(),I(Jt,{key:oe.name,props:j},{default:a(()=>[b(r(oe.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(j=>[e(Pe,{props:j,class:xe([{inactive:!j.row.active},"cursor-pointer"]),onClick:oe=>x(j)},{default:a(()=>[e(Q,{"auto-width":""},{default:a(()=>[e(E,{size:"sm",flat:"",round:"",dense:"",onClick:X(oe=>j.expand=!j.expand,["stop"]),icon:j.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(Q,{key:"name",props:j,class:"wrap-column"},{default:a(()=>[b(r(j.row.name)+" ",1),l(u).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[j.row.type=="stocked"?(d(),w("div",sf,[e(V,{name:"cycle"}),b(" Stok: "+r(l(K)(j.row.stock))+" "+r(j.row.uom),1)])):k("",!0),n.value?(d(),w("div",rf,[e(V,{name:"money"}),b(" Modal: Rp. "+r(l(K)(j.row.cost)),1)])):k("",!0),t("div",null,[e(V,{name:"sell"}),b(" Eceran: Rp. "+r(l(K)(j.row.price_1)),1)]),j.row.price_2!=0?(d(),w("div",df,[e(V,{name:"sell"}),b(" Partai: Rp. "+r(l(K)(j.row.price_2)),1)])):k("",!0),j.row.price_3!=0?(d(),w("div",uf,[e(V,{name:"sell"}),b(" Grosir: Rp. "+r(l(K)(j.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"stock",props:j,class:xe(["wrap-column",{"low-stock":j.row.type=="stocked"&&(Number(j.row.stock)==0||Number(j.row.stock)<Number(j.row.min_stock)),"over-stock":j.row.type=="stocked"&&Number(j.row.max_stock)&&Number(j.row.stock)>Number(j.row.max_stock)}])},{default:a(()=>[b(r(j.row.type=="stocked"?l(K)(j.row.stock)+" "+j.row.uom:"-"),1)]),_:2},1032,["props","class"]),(d(),I(Q,{key:"cost",props:j,class:"wrap-column"},{default:a(()=>[b(r(l(K)(j.row.cost)),1)]),_:2},1032,["props"])),e(Q,{key:"price_1",props:j,class:"wrap-column"},{default:a(()=>[b(r(l(K)(j.row.price_1)),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:j},{default:a(()=>[t("div",mf,[P.$can("admin.product.add")||P.$can("admin.product.edit")||P.$can("admin.product.delete")?(d(),I(E,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:q[12]||(q[12]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"175px"}},{default:a(()=>[P.$can("admin.product.add")?te((d(),I(le,{key:0,clickable:"",onClick:X(oe=>l(Y).get(P.route("admin.product.duplicate",j.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>q[16]||(q[16]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),P.$can("admin.product.edit")?te((d(),I(le,{key:1,clickable:"",onClick:X(oe=>l(Y).get(P.route("admin.product.edit",j.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>q[17]||(q[17]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),P.$can("admin.product.delete")?te((d(),I(le,{key:2,onClick:X(oe=>F(j.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>q[18]||(q[18]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),te(e(Pe,{props:j},{default:a(()=>[e(Q,{colspan:"100%"},{default:a(()=>[j.row.barcode?(d(),w("div",cf,[e(V,{class:"inline-icon",name:"barcode"}),b(" Barcode: "+r(j.row.barcode),1)])):k("",!0),j.row.category_id?(d(),w("div",pf,[e(V,{name:"category",class:"inline-icon"}),b(" Kategori: "+r(j.row.category.name),1)])):k("",!0),P.$can("admin.product:view-supplier")?(d(),w(W,{key:2},[j.row.supplier_id?(d(),w("div",ff,[e(V,{name:"local_shipping",class:"inline-icon"}),b(" Supplier: "+r(j.row.supplier.name),1)])):k("",!0)],64)):k("",!0),j.row.description?(d(),I(he,{key:3,text:j.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),j.row.notes?(d(),I(he,{key:4,text:j.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[uo,j.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[g.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:a(()=>[t("div",lf,[e(ce,{modelValue:$.type,"onUpdate:modelValue":[q[6]||(q[6]=j=>$.type=j),T],class:"custom-select col-xs-4 col-sm-2",options:f,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(ce,{modelValue:$.stock_status,"onUpdate:modelValue":[q[7]||(q[7]=j=>$.stock_status=j),T],class:"custom-select col-xs-4 col-sm-2",options:p,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:$.status,"onUpdate:modelValue":[q[8]||(q[8]=j=>$.status=j),T],class:"custom-select col-xs-4 col-sm-2",options:v,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:$.category_id,"onUpdate:modelValue":[q[9]||(q[9]=j=>$.category_id=j),T],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(N),"map-options":"",dense:"","emit-value":"",onFilter:l(M),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),P.$can("admin.product:view-supplier")?(d(),I(ce,{key:0,modelValue:$.supplier_id,"onUpdate:modelValue":[q[10]||(q[10]=j=>$.supplier_id=j),T],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(R),"map-options":"",dense:"","emit-value":"",onFilter:l(B),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":q[11]||(q[11]=j=>$.search=j),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},bf=Object.freeze(Object.defineProperty({__proto__:null,default:gf},Symbol.toStringTag,{value:"Module"})),vf={class:"q-gutter-sm"},_f={class:"col col-md-8 q-pa-xs"},yf={class:"col-12 col-md-6"},kf={class:"col-12 col-md-6"},wf={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},hf={class:"q-gutter-sm"},xl="Kirim Daftar Harga",$f={__name:"SendPriceList",setup(c){const s=ge(),m=O(""),o=O(null),i=G(()=>{var B;const R=new Map;return(B=s.props.products)==null||B.forEach(h=>{R.set(h.id,h)}),R}),n=G(()=>{var B;const R=new Map;return(B=s.props.customers)==null||B.filter(h=>h.phone&&h.phone.trim()!=="").forEach(h=>{R.set(h.id,h)}),R}),f=G(()=>{var R;return((R=s.props.customers)==null?void 0:R.map(B=>({value:B.id,label:B.name})))||[]}),v=G(()=>{var R;return((R=s.props.products)==null?void 0:R.map(B=>({value:B.id,label:`${B.name}`})))||[]}),p=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],u=O(v.value),g=O(f.value),_=We({price_types:[],products:[],customers:[]});_.transform(R=>({customers:R.customers.map(B=>B.value),message:m.value}));const y=R=>R?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(R):"Rp. 0",$=R=>{const B=p.find(h=>h.value===R);return B?B.label:R},C=()=>{if(o.value){const R=o.value.$el.querySelector("textarea");if(R){R.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(B){console.error("Gagal menyalin teks ke clipboard:",B)}}}},D=G(()=>{var B,h;if(((B=_.products)==null?void 0:B.length)===0||((h=_.price_types)==null?void 0:h.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let R=`*DAFTAR HARGA TERBARU*
`;return R+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,R+=`------------------------------

`,(_.products||[]).forEach(x=>{const P=i.value.get(x.value);P&&(R+=`*${P.name}*
`,(_.price_types||[]).forEach(q=>{const S=$(q),U=P[q],j=P.uom||"pcs";U!=null&&U>0&&(R+=`- ${S}: *${y(U)}* / ${j}
`)}),R+=`
`)}),R+=`------------------------------
`,R+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",R});He(D,R=>{m.value=R},{immediate:!0});const F=G(()=>(_.customers||[]).map(R=>n.value.get(R.value)).filter(R=>R&&R.phone)),A=R=>{const B=m.value;let h=R.startsWith("0")?"62"+R.substring(1):R;h=h.replace(/[^0-9]/g,"");const x=encodeURIComponent(B);return`https://wa.me/${h}?text=${x}`},T=(R,B)=>{if(R===""){B(()=>{u.value=v.value});return}B(()=>{const h=R.toLowerCase();u.value=v.value.filter(x=>x.label.toLowerCase().indexOf(h)>-1)})},N=(R,B)=>{if(R===""){B(()=>{g.value=f.value});return}B(()=>{const h=R.toLowerCase();g.value=f.value.filter(x=>x.label.toLowerCase().indexOf(h)>-1)})},M=()=>{var R,B,h;if(((R=_.price_types)==null?void 0:R.length)===0||((B=_.products)==null?void 0:B.length)===0||((h=_.customers)==null?void 0:h.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}_.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{Ye()},onFinish:()=>{_.clearErrors()}})};return(R,B)=>{const h=J("i-head"),x=J("authenticated-layout");return d(),w(W,null,[e(h,{title:xl}),e(x,{"show-drawer-button":!0},{title:a(()=>[b(r(xl))]),"left-button":a(()=>[t("div",vf,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:B[0]||(B[0]=P=>l(Y).get(R.route("admin.product.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",_f,[e(Qe,{class:"row q-col-gutter-xs",onSubmit:X(M,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[t("div",yf,[e(ue,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[B[10]||(B[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),B[11]||(B[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:l(_).products,"onUpdate:modelValue":B[1]||(B[1]=P=>l(_).products=P),options:u.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.products,"error-message":l(_).errors.products,loading:l(_).processing,"use-input":"",onFilter:T,onClear:B[2]||(B[2]=P=>l(_).products=[]),"input-debounce":"0"},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(z,{class:"text-grey"},{default:a(()=>B[8]||(B[8]=[b(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:l(_).price_types,"onUpdate:modelValue":B[3]||(B[3]=P=>l(_).price_types=P),options:p,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.price_types,"error-message":l(_).errors.price_types,loading:l(_).processing,multiple:"","use-chips":"",clearable:"",onClear:B[4]||(B[4]=P=>l(_).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:l(_).customers,"onUpdate:modelValue":B[5]||(B[5]=P=>l(_).customers=P),options:g.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.customers,"error-message":l(_).errors.customers,loading:l(_).processing,"use-input":"",onFilter:N,onClear:B[6]||(B[6]=P=>l(_).customers=[]),"input-debounce":"0"},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(z,{class:"text-grey"},{default:a(()=>B[9]||(B[9]=[b(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>{var P,q,S;return[e(E,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:l(_).processing||((P=l(_).products)==null?void 0:P.length)===0||((q=l(_).customers)==null?void 0:q.length)===0||((S=l(_).price_types)==null?void 0:S.length)===0,loading:l(_).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",kf,[e(ue,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(ae,null,{default:a(()=>[t("div",wf,[B[12]||(B[12]=b(" Pratinjau Pesan (Teks Biasa) ")),e(E,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:C,disable:m.value.length===0},null,8,["disable"])]),e(ie,{modelValue:m.value,"onUpdate:modelValue":B[7]||(B[7]=P=>m.value=P),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),F.value.length>0?(d(),I(ae,{key:0,class:"q-pt-none"},{default:a(()=>[B[14]||(B[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",hf,[(d(!0),w(W,null,Oe(F.value,P=>(d(),I(E,{key:P.id,label:`Kirim ke ${P.name}`,href:A(P.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(l(_).products.length>0&&l(_).price_types.length>0)},{default:a(()=>[P.phone?k("",!0):(d(),I(Tt,{key:0},{default:a(()=>B[13]||(B[13]=[b(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),B[15]||(B[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},xf=Object.freeze(Object.defineProperty({__proto__:null,default:$f},Symbol.toStringTag,{value:"Module"})),Sf={class:"q-gutter-sm"},Vf={class:"q-pa-xs"},qf={class:"col-12"},Cf={class:"col-12"},Tf={class:"q-gutter-xs"},Sl="Kirim Daftar Harga",Pf={__name:"SendPriceList2",setup(c){const s=ge(),m=O(""),o=G(()=>{var R;const M=new Map;return(R=s.props.products)==null||R.forEach(B=>{M.set(B.id,B)}),M}),i=G(()=>{var R;const M=new Map;return(R=s.props.customers)==null||R.forEach(B=>{M.set(B.id,B)}),M}),n=G(()=>{var M;return((M=s.props.customers)==null?void 0:M.map(R=>({value:R.id,label:R.name})))||[]}),f=G(()=>{var M;return((M=s.props.products)==null?void 0:M.map(R=>({value:R.id,label:`${R.name} (${R.sku||R.code||"ID: "+R.id})`})))||[]}),v=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],p=O(f.value),u=O(n.value),g=We({price_types:[],products:[],customers:[]});g.transform(M=>({...M,products:M.products.map(R=>R.value),customers:M.customers.map(R=>R.value)}));const _=M=>M?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(M):"Rp. 0",y=M=>{const R=v.find(B=>B.value===M);return R?R.label:M},$=G(()=>{if(g.products.length===0||g.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let M=`Daftar Harga Terbaru
`;return M+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,M+=`------------------------------

`,g.products.forEach(R=>{const B=o.value.get(R.value);B&&(M+=`*${B.name}*
`,g.price_types.forEach(h=>{const x=y(h),P=B[h],q=B.unit||"pcs";P!=null&&P!=0&&(M+=`- ${x}: ${_(P)} / ${q}
`)}),M+=`
`)}),M+=`------------------------------
`,M+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",M});He($,M=>{m.value=M},{immediate:!0});const C=G(()=>g.customers.map(M=>i.value.get(M.value)).filter(M=>M&&M.phone_number)),D=M=>{const R=m.value;let B=M.startsWith("0")?"62"+M.substring(1):M;B=B.replace(/[^0-9]/g,"");const h=encodeURIComponent(R);return`https://wa.me/${B}?text=${h}`},F=(M,R)=>{if(M===""){R(()=>{p.value=f.value});return}R(()=>{const B=M.toLowerCase();p.value=f.value.filter(h=>h.label.toLowerCase().indexOf(B)>-1)})},A=(M,R)=>{if(M===""){R(()=>{u.value=n.value});return}R(()=>{const B=M.toLowerCase();u.value=n.value.filter(h=>h.label.toLowerCase().indexOf(B)>-1)})},T=()=>{console.log("Scrolling to first error field...")},N=()=>{if(g.price_types.length===0||g.products.length===0||g.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}g.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{T()},onFinish:()=>{g.clearErrors()}})};return(M,R)=>{const B=J("i-head"),h=J("authenticated-layout");return d(),w(W,null,[e(B,{title:Sl}),e(h,{"show-drawer-button":!0},{title:a(()=>[b(r(Sl))]),"left-button":a(()=>[t("div",Sf,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:R[0]||(R[0]=x=>M.router.get(M.route("admin.product.index")))})])]),default:a(()=>[t("div",Vf,[e(Qe,{class:"row q-col-gutter-md",onSubmit:X(N,["prevent"]),onValidationError:T},{default:a(()=>[t("div",qf,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[R[8]||(R[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),R[9]||(R[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:l(g).products,"onUpdate:modelValue":R[1]||(R[1]=x=>l(g).products=x),options:p.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.products,"error-message":l(g).errors.products,loading:l(g).processing,"use-input":"",onFilter:F,"input-debounce":"0"},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(z,{class:"text-grey"},{default:a(()=>R[6]||(R[6]=[b(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:l(g).price_types,"onUpdate:modelValue":R[2]||(R[2]=x=>l(g).price_types=x),options:v,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.price_types,"error-message":l(g).errors.price_types,loading:l(g).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:l(g).customers,"onUpdate:modelValue":R[3]||(R[3]=x=>l(g).customers=x),options:u.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.customers,"error-message":l(g).errors.customers,loading:l(g).processing,"use-input":"",onFilter:A,"input-debounce":"0"},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(z,{class:"text-grey"},{default:a(()=>R[7]||(R[7]=[b(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:l(g).processing||l(g).products.length===0||l(g).customers.length===0||l(g).price_types.length===0,loading:l(g).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(g).processing,onClick:R[4]||(R[4]=x=>M.router.get(M.route("admin.product.index")))},null,8,["disable"])]),_:1}),M.$page.props.flash.success?(d(),I(Ft,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[b(r(M.$page.props.flash.success),1)]),_:1})):k("",!0),M.$page.props.flash.error?(d(),I(Ft,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[b(r(M.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",Cf,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[R[10]||(R[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(ie,{modelValue:m.value,"onUpdate:modelValue":R[5]||(R[5]=x=>m.value=x),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),R[11]||(R[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),C.value.length>0?(d(),I(ae,{key:0},{default:a(()=>[R[13]||(R[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",Tf,[(d(!0),w(W,null,Oe(C.value,x=>(d(),I(E,{key:x.id,label:`Kirim ke ${x.label}`,href:D(x.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:a(()=>[x.phone_number?k("",!0):(d(),I(Tt,{key:0},{default:a(()=>R[12]||(R[12]=[b(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href"]))),128))]),R[14]||(R[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},Rf=Object.freeze(Object.defineProperty({__proto__:null,default:Pf},Symbol.toStringTag,{value:"Module"})),Of={class:"q-gutter-sm"},Df={class:"col col-md-6 q-pa-xs"},Vl="Tambah Retur Pembelian",If={__name:"Create",setup(c){const s=ge(),m=We({code:s.props.data.code}),o=()=>lt({form:m,url:route("admin.purchase-order-return.add")});return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),w(W,null,[e(f,{title:Vl}),e(v,null,{title:a(()=>[b(r(Vl))]),"left-button":a(()=>[t("div",Of,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.finance-account.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Df,[e(Qe,{class:"row",onSubmit:X(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(ie,{autofocus:"",modelValue:l(m).code,"onUpdate:modelValue":n[1]||(n[1]=p=>l(m).code=p),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(m).errors.code,disable:l(m).processing,"error-message":l(m).errors.code,rules:[p=>p&&p.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(m).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(m).processing,onClick:n[2]||(n[2]=p=>l(Y).get(i.route("admin.purchase-order-return.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Uf=Object.freeze(Object.defineProperty({__proto__:null,default:If},Symbol.toStringTag,{value:"Module"})),jf={class:"column"},Ef={class:"bg-grey-2 q-pa-xs"},Af={class:"text-subtitle1 text-bold text-grey-10"},Mf={class:"text-caption text-grey-8"},Nf={class:"col-12 col-sm-6"},Bf={class:"full-width"},zf={key:1},Ff={key:0},Lf={key:1},Hf={class:"col-12 col-sm-6",align:"left"},Kf={class:"full-width"},Yf={class:"full-width",style:{"border-collapse":"collapse"}},Wf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Qf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Jf={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Gf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Xf={key:0},Zf={class:"col-12 col-sm-6"},eg={class:"text-body2 text-grey-7 text-italic"},tg={class:"col-12 col-sm-6"},ag={class:"row justify-end q-gutter-y-xs"},lg={class:"col-12 row justify-between"},og={class:"text-subtitle2 text-bold"},ng={class:"row justify-end q-gutter-y-xs"},sg={class:"col-12 row justify-between"},rg={class:"text-subtitle2 text-bold"},Uo={__name:"MainInfoTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=J("i-link"),n=J("my-link");return d(),w("div",jf,[e(ae,{class:"q-pa-none"},{default:a(()=>[t("div",Ef,[t("div",Af," RETUR #"+r(s.data.code),1),t("div",Mf,r(l(ve)(s.data.datetime)),1)])]),_:1}),e(Te),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",Nf,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",Bf,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),I(i,{key:0,href:m.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>{var f;return[e(V,{class:"inline-icon",name:"person"}),b(" "+r(s.data.supplier_name)+" ("+r((f=s.data.supplier)==null?void 0:f.code)+") ",1)]}),_:1},8,["href"])):(d(),w("div",zf,[e(V,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pemasok Umum "))]))])]),s.data.supplier_phone?(d(),w("tr",Ff,[t("td",null,[e(V,{class:"inline-icon",name:"phone"}),b(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(d(),w("tr",Lf,[t("td",null,[e(V,{class:"inline-icon",name:"home_pin"}),b(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",Hf,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Kf,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:m.route("admin.purchase-order.detail",{id:s.data.purchase_order_id})},{default:a(()=>[b(r(s.data.purchase_order_id?s.data.purchase_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("table",Yf,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(W,null,Oe(s.data.details,f=>(d(),w("tr",{key:f.id},[t("td",Wf,[e(i,{href:m.route("admin.product.detail",f.product_id)},{default:a(()=>[b(r(f.product_name),1)]),_:2},1032,["href"])]),t("td",Qf,r(l(K)(f.cost)),1),t("td",Jf,r(f.quantity),1),t("td",Gf,r(l(K)(f.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),w("tr",Xf,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Te),e(ae,{class:"row",align:"left"},{default:a(()=>[t("div",Zf,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",eg,r(s.data.notes?s.data.notes:"-"),1)]),t("div",tg,[t("div",ag,[t("div",lg,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",og,r(l(K)(s.data.grand_total)),1)])]),t("div",ng,[t("div",sg,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",rg,r(l(K)(s.data.total_refunded)),1)])])])]),_:1})])}}},ig=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),dg={key:0,class:"text-center q-mb-md text-grey-8"},ug={class:"text-subtitle2 text-weight-medium"},mg={class:"text-h5 text-center text-primary q-pb-md"},cg={class:"text-center q-mt-md"},pg={key:0,class:"text-h6 text-negative text-weight-bold"},fg={key:1,class:"text-h6 text-positive text-weight-bold"},jo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=O(!1),f=O({method:"transfer",amount:m.total,notes:null}),v=i.props.data.supplier,p=G(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(C=>({label:C.name,value:C.id}))]),u=G(()=>m.remaining_refund),g=G(()=>{const C=f.value.amount||0;return C<=0?"Jumlah pembayaran harus lebih dari 0.":C>m.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=G(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const C={id:f.value.method,amount:f.value.amount,notes:f.value.notes};o("accepted",C),n.value=!1},$=()=>{f.value.amount=m.total,f.value.method="cash",f.value.notes=null};return(C,D)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":D[4]||(D[4]=F=>C.$emit("update:modelValue",F)),onBeforeShow:$},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>D[5]||(D[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[l(v)?(d(),w("div",dg,[t("div",ug,[b(r(l(v).code)+" ",1),D[6]||(D[6]=t("br",null,null,-1)),b(" "+r(l(v).name)+" ",1),D[7]||(D[7]=t("br",null,null,-1))])])):k("",!0),t("div",mg," Total: Rp. "+r(l(K)(c.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":D[0]||(D[0]=F=>f.value.method=F),options:p.value,label:"Kas Tujuan",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:f.value.amount,"onUpdate:modelValue":D[1]||(D[1]=F=>f.value.amount=F),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:f.value.notes,"onUpdate:modelValue":D[2]||(D[2]=F=>f.value.notes=F),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",cg,[u.value>0?(d(),w("div",pg," Sisa Refund: Rp. "+r(l(K)(u.value)),1)):(d(),w("div",fg," Refund Lunas "))])]),_:1}),e(et,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:D[3]||(D[3]=F=>C.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},gg=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),bg={class:"column"},vg={class:"row"},_g={class:"full-width",style:{"border-collapse":"collapse"}},yg={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},kg={class:"row items-center q-gutter-x-sm"},wg={class:"text-weight-bold"},hg={class:"row items-center q-gutter-x-sm q-mt-xs"},$g={class:"text-caption text-grey-6"},xg={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Sg={class:"q-mt-xs"},Vg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},qg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Cg={key:0},Tg={class:"text-right q-pa-sm"},Eo={__name:"RefundTab",props:{data:Object},setup(c){const s=c,m=ke(),o=O(!1),i=()=>{o.value=!0},n=G(()=>s.data.remaining_refund),f=async p=>{const u={order_id:s.data.id,...p};m.loading.show({message:"Memproses pembayaran..."});try{const g=await Re.post(route("admin.purchase-order-return.add-refund"),u);m.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Y.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(g){let _="Gagal memproses refund.";g.response&&g.response.data&&g.response.data.message?_=g.response.data.message:g.message&&(_=g.message),m.notify({message:_,color:"negative",icon:"error"})}finally{m.loading.hide()}},v=p=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Re.post(route("admin.purchase-order-return.delete-refund",{id:p.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Y.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(u){let g="Gagal menghapus refund pembayaran.";u.response&&u.response.data&&u.response.data.message?g=u.response.data.message:u.message&&(g=u.message),m.notify({message:g,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(p,u)=>{const g=J("my-link");return d(),w(W,null,[t("div",bg,[e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("div",vg,[p.$can("admin.purchase-order-return.add-refund")?(d(),I(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:u[0]||(u[0]=X(_=>i(),["stop"]))})):k("",!0)]),t("table",_g,[u[5]||(u[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(W,null,Oe(s.data.payments,_=>(d(),w("tr",{key:_.id},[t("td",yg,[t("div",kg,[e(V,{name:"tag",size:"xs",color:"grey-7"}),t("span",wg,r(_.code),1)]),t("div",hg,[e(V,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",$g,r(l(ve)(_.created_at)),1)]),(_.type==="transfer"||_.type==="cash")&&_.account?(d(),w("div",xg,[e(V,{name:"wallet",size:"xs",color:"grey-7"}),e(g,{href:p.route("admin.finance-account.detail",_.account.id),target:"_blank"},{default:a(()=>[b(r(_.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",Sg,[e(ot,{label:p.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[_.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Vg,r(l(K)(_.amount)),1),t("td",qg,[p.$can("admin.purchase-order-return.delete-refund")?(d(),I(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>v(_)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",Cg,u[2]||(u[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[u[3]||(u[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund (Rp.)",-1)),t("th",Tg,r(l(K)(s.data.total_refunded)),1),u[4]||(u[4]=t("th",null,null,-1))])])])]),_:1})]),e(jo,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=_=>o.value=_),total:n.value,supplier:s.data.supplier,onAccepted:f},null,8,["modelValue","total","supplier"])],64)}}},Pg=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Rg={class:"q-gutter-sm"},Og={class:"col col-lg-6 q-pa-xs",align:"center"},ql="Retur Pembelian",Dg={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=ge(),o=m.props.data,i=O(s.get("preview")||!1),f=O(s.get("tab")||"main-info");ye(()=>{pt(()=>{const p=s.get("print_size");p&&v(p)})});const v=p=>{window.open(route("admin.purchase-order-return.print",{id:m.props.data.id,size:p}),"_self")};return(p,u)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),w(W,null,[e(g,{title:ql}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(ql))])]),"left-button":a(()=>[t("div",Rg,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>l(Y).get(p.route("admin.purchase-order-return.index")))})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=y=>v("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[2]||(u[2]=y=>v("a4"))}),i.value?k("",!0):(d(),I(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[3]||(u[3]=y=>l(Y).get(p.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Ve,{class:"row justify-center print-visible"},{default:a(()=>[t("div",Og,[e(ue,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(Vt,{modelValue:f.value,"onUpdate:modelValue":u[4]||(u[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(nt,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(d(),I(nt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Te),e(qt,{modelValue:f.value,"onUpdate:modelValue":u[5]||(u[5]=y=>f.value=y),animated:""},{default:a(()=>[e(st,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(Uo,{data:l(o)},null,8,["data"])]),_:1}),e(st,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(Eo,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Ig=Object.freeze(Object.defineProperty({__proto__:null,default:Dg},Symbol.toStringTag,{value:"Module"})),Ug={class:"text-weight-medium wrap-column"},jg={class:"text-caption text-grey-6 elipsis"},Eg={class:"column items-end"},Ag={class:"text-caption text-grey-6 text-italic"},Ao={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=ke(),m=tt(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:ze({height:l(m)})},{header:a(f=>[e(Pe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(W,null,Oe(f.cols,v=>(d(),I(Jt,{key:v.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Pe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left"},{default:a(()=>[t("div",Ug,r(f.row.product_name),1),t("div",jg,r(f.row.product_barcode),1),f.row.notes?(d(),I(he,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal",props:f,class:"text-right"},{default:a(()=>[t("div",Eg,[t("div",null,r(l(K)(f.row.subtotal_cost)),1),t("div",Ag,r(l(K)(f.row.quantity))+" x Rp. "+r(l(K)(f.row.cost)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Mg=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),Ng={class:"row items-center no-wrap"},Bg={class:"col-auto"},Mo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=G(()=>o.item.quantity*o.item.cost),v=_=>{_.stopPropagation(),_.preventDefault()},p=_=>{o.modelValue&&(_.key==="Enter"?(n(),v(_)):_.key==="Escape"&&(i("update:modelValue",!1),v(_)))};ye(()=>{window.addEventListener("keydown",p)}),yt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item});const g=()=>{};return(_,y)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":y[6]||(y[6]=$=>_.$emit("update:modelValue",$)),onBeforeShow:g},{default:a(()=>[e(ue,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Ng,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Bg,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=$=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(ie,{modelValue:c.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=$=>c.item.product_name=$),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=$=>c.item.quantity=$),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Ee,{modelValue:c.item.cost,"onUpdate:modelValue":y[3]||(y[3]=$=>c.item.cost=$),label:"Modal / Harga Beli (Rp)","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=$=>f.value=$),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ie,{modelValue:c.item.notes,"onUpdate:modelValue":y[5]||(y[5]=$=>c.item.notes=$),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(et,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},zg=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),Fg={key:0,class:"q-select__selected-item"},No={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(c,{expose:s,emit:m}){const o=O(null),i=c,n=m,f=O([]);let v=null;const p=O(i.modelValue);ye(()=>{i.initialData&&(p.value=i.initialData)}),He(p,_=>{n("update:modelValue",_),n("supplierSelected",_)}),He(()=>i.modelValue,_=>{p.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const g=(_,y)=>{if(_.length<i.minLength){y(()=>{f.value=[]});return}v&&clearTimeout(v),v=setTimeout(()=>{Re.get(`/web-api/suppliers?q=${_}`).then($=>{y(()=>{f.value=$.data.data})}).catch($=>{console.error("Gagal mengambil data pemasok:",$),y(()=>{f.value=[]})})},100)};return(_,y)=>(d(),I(ce,{class:xe(c.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=$=>p.value=$),"use-input":"","input-debounce":"500",label:c.label,options:f.value,onFilter:g,clearable:"",error:c.error,behavior:"menu","error-message":c.errorMessage,disable:c.disable,"hide-bottom-space":"",outlined:c.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a($=>[e(le,Aa(mo($.itemProps)),{default:a(()=>[e(z,null,{default:a(()=>[e(be,null,{default:a(()=>[b(r($.opt.name)+" ("+r($.opt.code)+")",1)]),_:2},1024),$.opt.phone_1?(d(),I(be,{key:0,class:"text-grey-8 q-ml-sm q-mt-xs"},{default:a(()=>[e(V,{name:"phone",class:"inline-icon"}),b(r($.opt.phone_1),1)]),_:2},1024)):k("",!0),$.opt.address?(d(),I(be,{key:1,class:"text-grey-8 q-ml-sm"},{default:a(()=>[e(V,{name:"home_pin",class:"inline-icon"}),b(r($.opt.address),1)]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1040)]),"selected-item":a($=>[$.opt?(d(),w("div",Fg,r($.opt.name)+" ("+r($.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Lg={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ae,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(et,{align:"center"},{default:a(()=>[te(e(E,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Bo=ft(Lg,[["__scopeId","data-v-abc5074e"]]),Hg=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"})),Kg={class:"row items-center no-wrap"},Yg={class:"col text-subtite text-bold text-grey-8"},Wg={class:"col-auto"},zo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=u=>{u.stopPropagation(),u.preventDefault()},v=u=>{o.modelValue&&(u.key==="Enter"?(n(),f(u)):u.key==="Escape"&&(i("update:modelValue",!1),f(u)))};return ye(()=>{window.addEventListener("keydown",v)}),yt(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(u,g)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>u.$emit("update:modelValue",_))},{default:a(()=>[e(ue,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Kg,[t("div",Yg," Edit "+r(c.data.code),1),t("div",Wg,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(Fe,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(ie,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>u.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ie,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(et,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Qg=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),Jg={class:"row items-center no-wrap"},Gg={class:"col-auto"},Xg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Zg={key:0},_a={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1},priceType:{type:String,require:!1,default:"price_1"}},emits:["update:modelValue","product-selected"],setup(c,{emit:s}){const m=ke(),o=c,i=O(!1),n=O(o.showCost),f=s,v=O(null),p=O([]),u=O(!0),g=O(-1),_=De({search:"",status:"active",...Ne()}),y=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});[...Ke(window.CONSTANTS.PRODUCT_PRICE_TYPES)];const $=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_1.replace("Harga ","H "),field:"price_1",align:"right"},{name:"price_2",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_2.replace("Harga ","H "),field:"price_2",align:"right"},{name:"price_3",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_3.replace("Harga ","H "),field:"price_3",align:"right"}],C=G(()=>{if(i.value)return $;const R=$.filter(B=>B.name!=="cost");return m.screen.gt.sm?R:R.filter(B=>B.name==="name"||B.name==="stock")});ye(()=>{F()});const D=()=>{if(v.value&&g.value!==-1){const R=(y.value.page-1)*y.value.rowsPerPage,B=g.value-R;pt(()=>{if(B>=0&&B<p.value.length&&v.value.scrollTo){const h=v.value.$el.querySelector(".selected-row");h&&h.scrollIntoView({behavior:"smooth",block:"nearest"})}})}},F=()=>{o.modelValue!==!1&&A()},A=(R=null)=>{u.value=!0;const B=g.value;Be({pagination:y,filter:_,props:R,rows:p,url:route("admin.product.data"),loading:u,tableRef:v,onSuccess:()=>{p.value.length>0?((B===0||B===-1)&&(g.value=0),pt(()=>{D()})):g.value=-1}})},T=()=>{F()},N=R=>{f("product-selected",R),setTimeout(()=>{f("update:modelValue",!1)},100)},M=R=>{if(!o.modelValue){alert("none");return}const B=p.value.length;if(B===0)return;const h=(y.value.page-1)*y.value.rowsPerPage,x=h+B-1;if(R.key==="ArrowDown")R.preventDefault(),g.value<x?(g.value=g.value+1,D()):g.value===x&&M({key:"ArrowRight",preventDefault:()=>{}});else if(R.key==="ArrowUp")R.preventDefault(),g.value>h?(g.value=g.value-1,D()):g.value===h&&h>0&&M({key:"ArrowLeft",preventDefault:()=>{}});else if(R.key==="Enter"&&g.value!==-1){R.preventDefault(),R.preventDefault();const P=(y.value.page-1)*y.value.rowsPerPage,q=g.value-P;q>=0&&q<B?N(p.value[q]):console.warn("Kesalahan: selectedIndex global di luar batas halaman saat ini.")}else if(g.value!==-1){if(R.key==="ArrowRight"){R.preventDefault();const P=y.value.page+1;P<=Math.ceil(y.value.rowsNumber/y.value.rowsPerPage)&&(y.value.page=P,g.value=(P-1)*y.value.rowsPerPage,v.value.requestServerInteraction())}else if(R.key==="ArrowLeft"){R.preventDefault();const P=y.value.page-1;P>=1&&(y.value.page=P,g.value=(P-1)*y.value.rowsPerPage,v.value.requestServerInteraction())}}};return He(()=>o.modelValue,(R,B)=>{B===!0&&R===!1&&(_.search=""),R===!0&&A()}),(R,B)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":B[4]||(B[4]=h=>R.$emit("update:modelValue",h)),maximized:l(m).screen.lt.sm},{default:a(()=>[e(ue,{class:"column fit",tabindex:"0",onKeydown:M,ref:"cardRef"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Jg,[B[5]||(B[5]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",Gg,[e(E,{flat:"",round:"",size:"sm",icon:"close",onClick:B[0]||(B[0]=h=>R.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:xe(["q-py-sm",l(m).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(ie,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":[B[1]||(B[1]=h=>_.search=h),T],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"]),n.value?(d(),I(la,{key:0,modelValue:i.value,"onUpdate:modelValue":B[2]||(B[2]=h=>i.value=h),label:"Tampilkan Modal",style:{"margin-left":"-10px"}},null,8,["modelValue"])):k("",!0)]),_:1},8,["class"]),e(ae,{class:xe(["q-py-xs col",l(m).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(Ue,{ref_key:"tableRef",ref:v,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":B[3]||(B[3]=h=>y.value=h),filter:_.search,loading:u.value,columns:C.value,rows:p.value,"rows-per-page-options":[10,25,50],onRequest:A,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":a(({icon:h,message:x,filter:P})=>[t("div",Xg,[t("span",null,r(x),1)])]),body:a(h=>[e(Pe,{tabindex:"0",props:h,class:xe([{inactive:["stocked","raw_materials"].includes(h.row.type)&&h.row.stock<=0,"selected-row":g.value===h.rowIndex},"cursor-pointer"]),onClick:x=>N(h.row),onKeydown:[zt(X(x=>N(h.row),["prevent","stop"]),["enter"]),zt(X(x=>N(h.row),["prevent"]),["space"])]},{default:a(()=>[e(Q,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[e(he,{text:h.row.name},null,8,["text"]),h.row.description?(d(),I(he,{key:0,text:h.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),l(m).screen.lt.md?(d(),w(W,{key:1},[t("div",null," Stok: "+r(h.row.type=="stocked"?l(K)(h.row.stock)+" "+h.row.uom:"-"),1),i.value?(d(),w("div",Zg," Modal: Rp. "+r(l(K)(h.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+r(l(K)(h.row.price_1)),1),t("div",null,"Harga 2: Rp. "+r(l(K)(h.row.price_1)),1),t("div",null,"Harga 3: Rp. "+r(l(K)(h.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"stock",props:h,class:"text-right"},{default:a(()=>[b(r(h.row.type=="stocked"?l(K)(h.row.stock)+" "+h.row.uom:"-"),1)]),_:2},1032,["props"]),e(Q,{key:"cost",props:h,class:"wrap-column text-right"},{default:a(()=>[b(r(l(K)(h.row.cost)),1)]),_:2},1032,["props"]),e(Q,{key:"price_1",props:h,class:"wrap-column text-right"},{default:a(()=>[b(r(l(K)(h.row.price_1)),1)]),_:2},1032,["props"]),e(Q,{key:"price_2",props:h,class:"wrap-column text-right"},{default:a(()=>[b(r(l(K)(h.row.price_2)),1)]),_:2},1032,["props"]),e(Q,{key:"price_3",props:h,class:"wrap-column text-right"},{default:a(()=>[b(r(l(K)(h.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},e1=Ea({__name:"BarcodeInputEditor",props:{modelValue:{}},emits:["update:modelValue","scan-success","send","search"],setup(c,{expose:s,emit:m}){const o=O(null);s({focus:()=>{o.value&&o.value.focus()},qInput:o});const n=c,f=m,v=ke(),p=O(n.modelValue);He(()=>n.modelValue,h=>{h!==p.value&&(p.value=h)});const u=h=>{p.value=h,f("update:modelValue",h)},g=O(null),_=O(!1),y=O(!1);let $=null,C=null,D=null;ye(async()=>{if("BarcodeDetector"in window){_.value=!0;try{const h=await window.BarcodeDetector.getSupportedFormats();C=new BarcodeDetector({formats:h})}catch(h){console.warn("BarcodeDetector init error:",h),_.value=!1}}}),Gt(()=>T());function F(){if(!_.value){v.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}y.value?T():A()}async function A(){if(C)try{y.value=!0,$=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),g.value&&(g.value.srcObject=$),await new Promise(h=>setTimeout(h,300)),R()}catch(h){y.value=!1,v.notify({type:"negative",message:`Gagal akses kamera: ${h.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function T(){y.value=!1,D&&cancelAnimationFrame(D),$&&($.getTracks().forEach(h=>h.stop()),$=null)}async function N(){f("search")}async function M(){f("send")}async function R(){var h;if(!(!g.value||!C||!y.value)){try{const x=await C.detect(g.value);if(x.length>0){const P=x[0].rawValue;p.value+=P,f("update:modelValue",p.value),f("scan-success",p.value),(h=navigator.vibrate)==null||h.call(navigator,100),v.notify({type:"positive",message:`Barcode terdeteksi: ${p.value}`,timeout:1e3}),T();return}}catch(x){console.warn("Detection error:",x)}D=requestAnimationFrame(R)}}const B=G(()=>{var h;return _.value&&!y.value&&!p.value?!0:(h=p.value)!=null&&h.endsWith("*")?_.value:!1});return(h,x)=>(d(),w("div",null,[e(ie,Oa({ref_key:"qInputInternalRef",ref:o},h.$attrs,{"model-value":p.value,"onUpdate:modelValue":u,disable:y.value||h.$attrs.disable,loading:y.value||h.$attrs.loading,clearable:p.value&&!p.value.endsWith("*")}),{prepend:a(()=>[e(V,{name:"search",onClick:N,class:"cursor-pointer"})]),append:a(()=>[B.value?(d(),I(V,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:F},{default:a(()=>[e(Tt,null,{default:a(()=>x[1]||(x[1]=[b("Scan Barcode")])),_:1})]),_:1})):k("",!0),B.value?y.value?(d(),I(io,{key:2,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0):(d(),I(V,{key:1,name:"send",onClick:M,class:"cursor-pointer q-ml-md"}))]),_:1},16,["model-value","disable","loading","clearable"]),e(Xe,{modelValue:y.value,"onUpdate:modelValue":x[0]||(x[0]=P=>y.value=P),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(ue,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(ae,{class:"text-center q-pb-none"},{default:a(()=>x[2]||(x[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(ae,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:g,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(et,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(E,{label:"Batal Scan",color:"negative",icon:"close",onClick:T})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),ya=ft(e1,[["__scopeId","data-v-f929c752"]]),t1={class:"row text-grey-9 q-pt-sm"},a1={key:0,class:"q-ml-sm"},l1={key:1,class:"q-ml-sm"},o1={key:2,class:"q-ml-sm text-grey-9"},n1={class:"row text-grey-9"},s1={key:1,class:"q-ml-sm"},r1={key:0},ka={__name:"PartyInfo",props:{party:{type:Object,required:!0},isValidWalletBalance:{type:Boolean,default:!0}},setup(c){const s=o=>o==null?"text-grey-9":o>0?"text-red":"text-green",m=o=>o==null?"Rp. 0":`Rp. ${K(o)}`;return(o,i)=>(d(),w("div",null,[t("div",t1,[c.party.phone?(d(),w("div",a1,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(c.party.phone),1)])):k("",!0),c.party.phone_1?(d(),w("div",l1,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(c.party.phone_1),1)])):k("",!0),c.party.address?(d(),w("div",o1,[e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(c.party.address),1)])):k("",!0)]),t("div",n1,[c.party.wallet_balance?(d(),w("div",{key:0,class:xe(["q-ml-sm",s(c.party.wallet_balance)])},[e(V,{name:"wallet",class:"inline-icon"}),b(" "+r(m(c.party.wallet_balance)),1)],2)):k("",!0),c.party.balance&&c.party.balance!=0?(d(),w("div",s1,[c.party.wallet_balance?(d(),w("span",r1,"")):k("",!0),i[0]||(i[0]=b("  ")),t("span",{class:xe(s(c.party.balance))},[e(V,{name:"balance",class:"inline-icon"}),b(" "+r(m(c.party.balance)),1)],2)])):k("",!0)])]))}},i1={class:"row items-center text-grey-8",style:{"line-height":"1em"}},d1={class:"row items-center q-pr-sm"},u1={key:0,class:"q-px-sm row items-center left-border"},m1={class:"q-pl-sm left-border"},c1={__name:"UserSessionInfo",setup(c){const s=ge();return(m,o)=>{var i,n;return d(),w("div",i1,[t("div",d1,[e(V,{name:"account_box",class:"q-mr-xs"}),b(" "+r(l(s).props.auth.user.username),1)]),l(s).props.data.cashier_session?(d(),w("div",u1,[e(V,{name:"point_of_sale",class:"q-mr-sm"}),b(" "+r((n=(i=l(s).props.data.cashier_session)==null?void 0:i.cashier_terminal)==null?void 0:n.name),1)])):k("",!0),t("div",m1,[e(Ro)])])}}},wa=ft(c1,[["__scopeId","data-v-bfe220aa"]]),p1={class:"q-gutter-sm"},f1={class:"row q-col-gutter-none full-width"},g1={class:"col-sm-6 col-12 col"},b1={class:"row full-width q-pa-sm"},v1={class:"col-sm-6 col-12"},_1={class:"row q-ml-sm items-end"},y1={class:"row col grow"},k1={class:"col-12 q-px-sm column"},w1={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},h1={key:0,class:"col"},$1={class:"text-caption text-grey-6 q-mt-xs"},x1={key:0,class:"text-caption text-grey-8 q-mt-xs"},S1={class:"text-italic"},V1={key:1,class:"col"},q1={class:"text-grey-8"},C1={class:"col"},T1={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},P1={class:"text-h4 text-weight-bold"},R1={class:"row q-px-sm q-col-gutter-sm q-py-xs"},O1={class:"col"},D1={__name:"Editor",setup(c){const s=ke(),m=ge(),o=O(!0),i=O(null),n=O(null),f=O(null),v=O(!1),p=O(null),u="Retur #"+m.props.data.code,g=O(m.props.data.supplier),_=O(""),y=O(!1),$=O(!1),C=O(!1),D=O(!1),F=O(null),A=De({id:m.props.data.id,code:m.props.data.code,supplier_id:m.props.data.supplier_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),T=G(()=>A.items.reduce((re,H)=>re+H.cost*H.quantity,0)),N=re=>isNaN(re)||re<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,M=re=>isNaN(re)||re<0?(gt("Harga tidak valid.","top"),!1):!0,R=re=>!re||re.length==0?(gt("Barcode tidak valid.","top"),!1):!0,B=re=>{var H;(H=_.value)!=null&&H.endsWith("*")?_.value+=re.name:_.value=re.name},h=async()=>{if(y.value)return;const re=_.value.trim();if(re.length===0){$.value=!0;return}const H=re.split("*");let L=1,pe="",ne=null;if(H.length===1)pe=H[0];else if(H.length<=3)L=parseInt(H[0]),pe=H[1],H.length===3&&(ne=parseFloat(H[2]));else{gt("Input tidak valid.","top");return}if(pe.length===0){$.value=!0;return}!R(pe)&&!N(L)&&!M(ne)||(y.value=!0,await Re.post(route("admin.purchase-order-return.add-item"),{order_id:A.id,product_code:pe,qty:L,price:ne,merge:o.value}).then(Z=>{const de=Z.data.data.item;let ee=-1;Z.data.data.mergeItem&&(ee=A.items.findIndex(fe=>fe.id===de.id)),ee===-1?A.items.push(de):A.items[ee]=de,_.value="",ne!==null&&ne!==parseFloat(de.price)&&gt("Harga tidak dapat diubah!","top")}).catch(Z=>{var de,ee;mt((ee=(de=Z.response)==null?void 0:de.data)==null?void 0:ee.message,"top"),console.error("Gagal mengambil data produk:",Z)}),y.value=!1,pt(()=>{var Z;(Z=i.value)==null||Z.focus()}))},x=re=>{F.value=Object.create(re),C.value=!0},P=re=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${re.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{y.value=!0,Re.post(route("admin.purchase-order-return.remove-item"),{id:re.id}).then(()=>{const H=A.items.findIndex(L=>L.id===re.id);H!==-1&&(A.items.splice(H,1)[0],ct("Item telah dihapus","top"))}).catch(H=>{var L,pe;mt(((pe=(L=H==null?void 0:H.response)==null?void 0:L.data)==null?void 0:pe.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(H)}).finally(()=>{y.value=!1})})},q=()=>{y.value=!0;const re=n.value.getCurrentItem(),H={id:re.id,qty:re.quantity,cost:re.cost};re.notes&&(H.notes=re.notes),Re.post(route("admin.purchase-order-return.update-item"),H).then(L=>{const pe=L.data.data,ne=A.items.findIndex(Z=>Z.id===pe.id);ne!==-1&&(A.items[ne]=pe,ct("Item telah diperbarui","top")),C.value=!1}).catch(L=>{var pe,ne;mt(((ne=(pe=L==null?void 0:L.response)==null?void 0:pe.data)==null?void 0:ne.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{y.value=!1})};ye(()=>{const re=H=>{v.value||C.value||$.value||D.value||(H.key==="F1"?(H.preventDefault(),v.value=!0):H.key==="F2"?(H.preventDefault(),f.value.focus()):H.key==="F3"?(H.preventDefault(),i.value.focus()):H.key==="F4"?(H.preventDefault(),o.value=!o.value):H.key==="F12"||H.ctrlKey&&H.key==="Enter"?(H.preventDefault(),U()):(H.key==="F5"||H.key==="F6"||H.key==="F7")&&H.preventDefault())};document.addEventListener("keydown",re),yt(()=>{document.removeEventListener("keydown",re)}),pt(()=>{var H;(H=p==null?void 0:p.value)==null||H.hideDrawer()})});const S=async()=>{y.value=!0;const re={id:A.id,supplier_id:A.supplier_id??null,datetime:Wt(A.datetime),notes:A.notes};await Re.post(route("admin.purchase-order-return.update"),re).then(H=>{const L=H.data.data.id;A.supplier_id=L.supplier_id}).catch(H=>{var L,pe;mt(((pe=(L=H==null?void 0:H.response)==null?void 0:L.data)==null?void 0:pe.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(H)}).finally(()=>{y.value=!1})},U=re=>{if(A.items.length===0){ct("Item masih kosong","top");return}ht.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${A.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{y.value=!0,Re.post(route("admin.purchase-order-return.close",{id:A.id})).then(H=>{ct("Transaksi selesai"),Y.get(route("admin.purchase-order-return.detail",{id:A.id}))}).catch(H=>{var L,pe;mt((pe=(L=H.response)==null?void 0:L.data)==null?void 0:pe.message),console.error(H)}).finally(()=>{y.value=!1})})},j=()=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${A.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Re.post(route("admin.purchase-order-return.cancel",{id:A.id}),{id:A.id}).then(()=>{ct("Transaksi telah dibatalkan."),Y.visit(route("admin.purchase-order-return.detail",{id:A.id}))}).catch(re=>{var L,pe;const H=((pe=(L=re.response)==null?void 0:L.data)==null?void 0:pe.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:H,color:"warning",position:"bottom"}),console.error(re)})})},oe=()=>{window.open(route("admin.purchase-order-return.detail",{id:A.id})+"?preview=1","_blank")};return G(()=>g.value?g.value.wallet_balance>=T.value:!0),(re,H)=>{const L=J("i-head"),pe=J("authenticated-layout");return d(),w(W,null,[e(L,{title:u}),e(pe,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",p1,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:H[0]||(H[0]=ne=>l(Y).get(re.route("admin.purchase-order-return.index")))})])]),"right-button":a(()=>[l(s).screen.gt.sm?(d(),I(wa,{key:0})):k("",!0)]),default:a(()=>[e(Ve,{class:"bg-grey-2 column fit"},{default:a(()=>[e(ue,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",f1,[t("div",g1,[t("div",b1,[e(No,{ref_key:"supplierAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:g.value,"onUpdate:modelValue":H[1]||(H[1]=ne=>g.value=ne),label:"Pemasok",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),g.value?(d(),I(ka,{key:0,party:g.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",v1,[e(ya,{ref_key:"userInputRef",ref:i,modelValue:_.value,"onUpdate:modelValue":H[2]||(H[2]=ne=>_.value=ne),onKeyup:H[3]||(H[3]=zt(X(ne=>h(),["prevent"]),["enter"])),onScanSuccess:H[4]||(H[4]=ne=>h()),onSend:H[5]||(H[5]=ne=>h()),onSearch:H[6]||(H[6]=ne=>$.value=!0),loading:y.value,disable:y.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",_1,[e(Ct,{class:"col",modelValue:o.value,"onUpdate:modelValue":H[7]||(H[7]=ne=>o.value=ne),label:"Gabungkan item",disable:y.value},null,8,["modelValue","disable"])])])]),t("div",y1,[t("div",k1,[e(Ao,{items:A.items,onUpdateQuantity:H[8]||(H[8]=({id:ne,value:Z})=>re.updateQuantity(ne,Z)),onRemoveItem:P,onEditItem:x,"is-processing":y.value},null,8,["items","is-processing"])])]),t("div",w1,[l(s).screen.gt.sm?(d(),w("div",h1,[t("div",$1,r(A.items.length)+" item(s) ",1),A.notes?(d(),w("div",x1,[H[20]||(H[20]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",S1,[e(he,{text:A.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",V1,[t("div",q1,[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(r(l(m).props.data.purchase_order.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(r(l(ve)(A.datetime)),1)])])])):k("",!0),t("div",C1,[t("div",T1,[H[22]||(H[22]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",P1,[H[21]||(H[21]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(l(K)(T.value)),1)])])])]),t("div",R1,[t("div",O1,[e(E,{class:"full-width",label:"Selesai",color:"primary",icon:"payment",onClick:H[9]||(H[9]=ne=>U()),disable:!re.$can("admin.purchase-order-return.close")||y.value||A.items.length===0||A.status!=="draft",loading:y.value},null,8,["disable","loading"])]),t("div",null,[e(E,{icon:"more_vert",color:"grey",onClick:H[13]||(H[13]=X(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[te((d(),I(le,{clickable:"",onClick:H[10]||(H[10]=X(ne=>D.value=!0,["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>H[23]||(H[23]=[b("Edit Rincian")])),_:1})]),_:1})),[[se],[me]]),te((d(),I(le,{clickable:"",onClick:H[11]||(H[11]=X(ne=>oe(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"preview"})]),_:1}),e(z,null,{default:a(()=>H[24]||(H[24]=[b("Pratinjau")])),_:1})]),_:1})),[[se],[me]]),te((d(),I(le,{clickable:"",onClick:H[12]||(H[12]=X(ne=>j(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:a(()=>H[25]||(H[25]=[b(" Batalkan ")])),_:1})]),_:1})),[[se],[me]]),e(Te)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Mo,{ref_key:"itemEditorRef",ref:n,modelValue:C.value,"onUpdate:modelValue":H[14]||(H[14]=ne=>C.value=ne),item:F.value,onSave:H[15]||(H[15]=ne=>q()),"is-processing":y.value},null,8,["modelValue","item","is-processing"]),e(_a,{modelValue:$.value,"onUpdate:modelValue":H[16]||(H[16]=ne=>$.value=ne),onProductSelected:B},null,8,["modelValue"]),e(zo,{modelValue:D.value,"onUpdate:modelValue":H[17]||(H[17]=ne=>D.value=ne),data:A,onSave:H[18]||(H[18]=ne=>S()),"is-processing":y.value},null,8,["modelValue","data","is-processing"]),e(Bo,{modelValue:v.value,"onUpdate:modelValue":H[19]||(H[19]=ne=>v.value=ne)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},I1=Object.freeze(Object.defineProperty({__proto__:null,default:D1},Symbol.toStringTag,{value:"Module"})),U1={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},j1={class:"q-pa-xs"},E1={class:"full-width row flex-center text-grey-8 q-gutter-sm"},A1={key:0},M1={key:1},N1={key:2},B1={key:3},z1={key:0},F1={key:0},L1={key:1},H1={class:"flex justify-end"},Cl="Retur Pembelian",K1={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=co();po(),[`${p}`,...fo(p-2,p-1).reverse()],[...go()];const u=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES)],g=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES)],_=Ce().startOf("month").toDate(),y=Ce().endOf("month").toDate(),$=De({search:"",status:"all",refund_status:"all",start_date:_,end_date:y,...Ne()}),C=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),D=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];ye(()=>{R()});const F=x=>{if(x.status=="draft"){A(x);return}T(x)},A=x=>{Y.get(route("admin.purchase-order-return.edit",x.id))},T=x=>{Y.get(route("admin.purchase-order-return.detail",x.id))},N=x=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${x.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Re.post(route("admin.purchase-order-return.cancel",{id:x.id}),{id:x.id}).then(P=>{const q=P.data.data,S=o.value.findIndex(U=>U.id===q.id);if(S===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[S].status="canceled",s.notify({message:P.data.message,position:"bottom"})}).catch(P=>{var S,U;const q=((U=(S=P.response)==null?void 0:S.data)==null?void 0:U.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:q,color:"warning",position:"bottom"}),console.error(P)})})},M=x=>at({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${x.code}?`,url:route("admin.purchase-order-return.delete",x.id),fetchItemsCallback:R,loading:i}),R=(x=null)=>{const P={...$,start_date:Ce($.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Ce($.end_date).format("YYYY-MM-DD HH:mm:ss")};Be({pagination:C,filter:P,props:x,rows:o,url:route("admin.purchase-order-return.data"),loading:i,tableRef:n})},B=()=>{R()},h=G(()=>s.screen.gt.sm?D:D.filter(x=>x.name==="code"||x.name==="action"));return(x,P)=>{const q=J("i-head"),S=J("authenticated-layout");return d(),w(W,null,[e(q,{title:Cl}),e(S,null,Ae({title:a(()=>[b(r(Cl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=U=>m.value=!m.value)},null,8,["icon"]),x.$can("admin.purchase-order-return.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=U=>l(Y).get(x.route("admin.purchase-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",j1,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:C.value,"onUpdate:pagination":P[10]||(P[10]=U=>C.value=U),filter:$.search,loading:i.value,columns:h.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:l(v)}),onRequest:R,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:U,message:j,filter:oe})=>[t("div",E1,[t("span",null,r(j)+" "+r(oe?" with term "+oe:""),1)])]),body:a(U=>[e(Pe,{props:U,class:"cursor-pointer",onClick:X(j=>F(U.row),["prevent"])},{default:a(()=>[e(Q,{key:"code",props:U,class:"wrap-column"},{default:a(()=>{var j,oe,re;return[t("div",null,[e(V,{name:"tag"}),b(" "+r(U.row.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(r(l(ve)(U.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[U.row.cashier?(d(),w("div",A1,[e(V,{name:"person",class:"inline-icon"}),b(" Kasir: "+r((j=U.row.cashier)==null?void 0:j.username),1)])):k("",!0),U.row.cashier_session?(d(),w("div",M1,[e(V,{name:"point_of_sale",class:"inline-icon"}),b(" Terminal: "+r((re=(oe=U.row.cashier_session)==null?void 0:oe.cashier_terminal)==null?void 0:re.name),1)])):k("",!0),U.row.supplier?(d(),w("div",N1,[e(V,{name:"person",class:"inline-icon"}),e(fa,{href:x.route("admin.supplier.detail",{id:U.row.supplier.id}),onClick:P[7]||(P[7]=X(()=>{},["stop"]))},{default:a(()=>[b(" "+r(U.row.supplier.code)+" - "+r(U.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(l(K)(U.row.grand_total)),1),U.row.notes?(d(),w("div",B1,[e(V,{name:"notes"}),b(" "+r(U.row.notes),1)])):k("",!0)],64)),t("div",null,[e(At,{status:U.row.status,statuses:x.$CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(At,{status:U.row.refund_status,statuses:x.$CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"red",partially_refunded:"orange",fully_refunded:"green",no_refund:"black"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Q,{key:"supplier_id",props:U},{default:a(()=>[U.row.supplier?(d(),w("div",z1,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(U.row.supplier_code)+" - "+r(U.row.supplier_name),1)]),U.row.supplier_phone?(d(),w("div",F1,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(U.row.supplier_phone),1)])):k("",!0),U.row.supplier_address?(d(),w("div",L1,[e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(U.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"total",props:U},{default:a(()=>[b(r(l(K)(U.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:U},{default:a(()=>[e(he,{text:U.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:U,onClick:P[9]||(P[9]=X(()=>{},["stop"]))},{default:a(()=>[t("div",H1,[x.$can("admin.purchase-order-return.detail")||x.$can("admin.purchase-order-return.edit")||x.$can("admin.purchase-order-return.cancel")||x.$can("admin.purchase-order-return.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[8]||(P[8]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[U.row.status!="draft"&&x.$can("admin.purchase-order-return.detail")?te((d(),I(le,{key:0,onClick:X(j=>T(U.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"visibility"})]),_:1}),e(z,null,{default:a(()=>P[11]||(P[11]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),U.row.status=="draft"&&x.$can("admin.purchase-order-return.edit")?te((d(),I(le,{key:1,onClick:X(j=>A(U.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>P[12]||(P[12]=[b(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),U.row.status=="draft"&&x.$can("admin.purchase-order-return.cancel")?te((d(),I(le,{key:2,onClick:X(j=>N(U.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"cancel"})]),_:1}),e(z,null,{default:a(()=>P[13]||(P[13]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),e(Te),x.$can("admin.purchase-order-return.delete")?te((d(),I(le,{key:3,onClick:X(j=>M(U.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>P[14]||(P[14]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",U1,[e(Fe,{modelValue:$.start_date,"onUpdate:modelValue":[P[2]||(P[2]=U=>$.start_date=U),B],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Fe,{modelValue:$.end_date,"onUpdate:modelValue":[P[3]||(P[3]=U=>$.end_date=U),B],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:$.status,"onUpdate:modelValue":[P[4]||(P[4]=U=>$.status=U),B],options:u,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:$.refund_status,"onUpdate:modelValue":[P[5]||(P[5]=U=>$.refund_status=U),B],options:g,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":P[6]||(P[6]=U=>$.search=U),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Y1=Object.freeze(Object.defineProperty({__proto__:null,default:K1},Symbol.toStringTag,{value:"Module"})),W1={key:0,class:"text-center q-mb-md text-grey-8"},Q1={class:"text-subtitle2 text-weight-medium"},J1={class:"text-h5 text-center text-primary q-pb-md"},G1={class:"q-mb-md flex flex-center"},X1={key:1},Z1={class:"col-6"},eb={class:"col-6"},tb={class:"row"},ab={class:"text-center q-mt-md"},lb={key:0,class:"text-h6 text-negative text-weight-bold"},ob={key:1,class:"text-h6 text-green-8 text-weight-bold"},nb={key:2,class:"text-h6 text-positive text-weight-bold"},sb={key:2},rb={class:"text-h6 text-negative text-center"},ib={key:3},db={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=O(!1),f=O("payment"),v=O(new Date),p=O(null),u=De([]),g=G(()=>u.every(x=>x.id&&typeof x.amount=="number"&&x.amount>0)),_=G(()=>i.props.accounts.map(x=>({label:x.name,value:x.id}))),y=G(()=>u.reduce((x,P)=>x+(P.amount||0),0)),$=G(()=>m.total-y.value),C=G(()=>{if(!m.supplier)return!0;const x=u.find(q=>q.id==="wallet");return(x?x.amount:0)<=m.supplier.balance}),D=new Date,F=it.addToDate(new Date,{days:30}),A=G(()=>[x=>!!x||"Tanggal jatuh tempo harus diisi",x=>it.isBetweenDates(x,D,F,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),T=G(()=>{if(f.value==="debt")return!!m.supplier&&A.value.every(S=>S(v.value)===!0);const x=u.some(S=>(S.amount||0)>0),P=u.every(S=>(S.amount||0)>=0),q=$.value<=0;return g.value&&x&&P&&q}),N=()=>{u.length<3&&u.push({id:null,amount:0})},M=x=>{if(u.length>1){const P=u.findIndex(q=>q.id===x);P!==-1&&u.splice(P,1)}},R=x=>{f.value=x,v.value=new Date,u.splice(0,u.length),x==="payment"&&_.value.length>0&&(u.splice(0,u.length,{id:_.value[0].value,amount:m.total}),pt(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},B=()=>{if(!T.value)return;n.value=!0;let x={total:m.total,is_debt:f.value==="debt"};if(f.value==="debt")x.due_date=it.formatDate(v.value,"YYYY-MM-DD"),x.payments=[];else{const P=y.value,q=P>m.total?P-m.total:0,S=$.value>0?$.value:0;x.payments=u,x.remaining_debt=S,x.change=q}o("accepted",x),n.value=!1},h=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}R("payment")};return(x,P)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":P[3]||(P[3]=q=>x.$emit("update:modelValue",q)),onBeforeShow:h},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[c.supplier?(d(),w("div",W1,[t("div",Q1,[b(" Nama: "+r(c.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),b(" Utang / Piutang: Rp. "+r(l(K)(c.supplier.balance)),1)])])):k("",!0),t("div",J1," Total: Rp. "+r(l(K)(c.total)),1),t("div",G1,[e(l(Bt),{modelValue:f.value,"onUpdate:modelValue":[P[0]||(P[0]=q=>f.value=q),R],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="payment"?(d(),w("div",X1,[(d(!0),w(W,null,Oe(u,(q,S)=>(d(),w("div",{key:S,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Z1,[e(l(ce),{modelValue:q.id,"onUpdate:modelValue":U=>q.id=U,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[U=>!!U||"Akun harus dipilih"],error:!q.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",eb,[e(Ee,{modelValue:q.amount,"onUpdate:modelValue":U=>q.amount=U,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!C.value,"error-message":C.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:S===0?"firstPaymentInputRef":null},Ae({_:2},[u.length>1?{name:"append",fn:a(()=>[e(V,{size:"xs",name:"close",class:"cursor-pointer",onClick:U=>M(S)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",tb,[e(E,{disable:!(u.length<3&&$.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:N,size:"sm"},null,8,["disable"])]),t("div",ab,[$.value>0?(d(),w("div",lb," Sisa Tagihan: Rp. "+r(l(K)($.value)),1)):$.value<0?(d(),w("div",ob," Kembalian: Rp. "+r(l(K)(Math.abs($.value))),1)):(d(),w("div",nb," Tagihan Terbayar "))])])):f.value==="debt"&&c.supplier?(d(),w("div",sb,[e(sa,{outlined:"",modelValue:v.value,"onUpdate:modelValue":P[1]||(P[1]=q=>v.value=q),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(D),"max-date":l(F),rules:A.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",rb," Total Utang: Rp. "+r(l(K)(c.total)),1)])):f.value==="debt"&&!c.supplier?(d(),w("div",ib,P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(et,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=q=>x.$emit("update:modelValue",!1))}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:B,disable:n.value||!T.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ub=Object.freeze(Object.defineProperty({__proto__:null,default:db},Symbol.toStringTag,{value:"Module"})),mb={key:0},cb={style:{float:"right"}},pb={key:1},fb={style:{float:"right"}},gb={key:2},bb={style:{float:"right"}},vb={key:3},_b={style:{float:"right"}},yb={style:{float:"right"}},kb={class:"q-gutter-sm"},wb={class:"q-my-md"},hb={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=O(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ae,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(d(),w("tr",mb,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ")),t("div",cb,r(l(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",pb,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ")),t("div",fb,r(l(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",gb,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ")),t("div",bb,r(l(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",vb,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ")),t("span",_b,r(l(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ")),t("div",yb,r(l(K)(c.payment.change)),1)])])])])]),_:1}),e(et,{align:"center"},{default:a(()=>[t("div",kb,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",wb,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$b=ft(hb,[["__scopeId","data-v-f0591c00"]]),xb=Object.freeze(Object.defineProperty({__proto__:null,default:$b},Symbol.toStringTag,{value:"Module"})),Sb={class:"column"},Vb={class:"bg-grey-2 q-pa-xs"},qb={class:"text-subtitle1 text-bold text-grey-10"},Cb={class:"col-12 col-sm-6"},Tb={class:"full-width"},Pb={key:0},Rb={key:1},Ob={key:0},Db={key:1},Ib={class:"col-12 col-sm-6",align:"left"},Ub={class:"full-width"},jb={key:0};const Eb={key:2},Ab={class:"full-width",style:{"border-collapse":"collapse"}},Mb={class:"q-pa-sm"},Nb={class:"text-right q-pa-sm"},Bb={class:"text-right q-pa-sm"},zb={class:"text-right q-pa-sm"},Fb={key:0},Lb={class:"col-12 col-sm-6"},Hb={class:"text-body2 text-grey-7 text-italic"},Kb={class:"col-12 col-sm-6"},Yb={class:"row justify-end q-gutter-y-xs"},Wb={class:"col-12 row justify-between"},Qb={class:"text-subtitle2 text-bold"},Jb={key:0,class:"row justify-end q-gutter-y-xs"},Gb={class:"col-12 row justify-between"},Xb={class:"text-subtitle2 text-bold"},Zb={key:1,class:"row justify-end q-gutter-y-xs"},ev={class:"col-12 row justify-between"},tv={class:"text-subtitle2 text-bold"},av={key:2,class:"row justify-end q-gutter-y-xs"},lv={class:"col-12 row justify-between"},ov={class:"text-subtitle2 text-bold"},Fo={__name:"InvoiceTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=J("i-link");return d(),w("div",Sb,[e(ae,{class:"q-pa-none"},{default:a(()=>[t("div",Vb,[t("div",qb," Pembelian #"+r(s.data.code),1)])]),_:1}),e(Te),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",Cb,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Supplier",-1)),t("table",Tb,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),w("div",Pb,[e(V,{class:"inline-icon",name:"person"}),e(i,{href:m.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>[b(r(s.data.supplier_name),1)]),_:1},8,["href"])])):(d(),w("div",Rb,[e(V,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pemasok Umum "))]))])]),s.data.supplier_phone?(d(),w("tr",Ob,[t("td",null,[e(V,{class:"inline-icon",name:"phone"}),e(Kt,{phone:s.data.supplier_phone},null,8,["phone"])])])):k("",!0),s.data.supplier_address?(d(),w("tr",Db,[t("td",null,[e(V,{class:"inline-icon",name:"home_pin"}),(d(),w(W,{key:0},[b(r(s.data.supplier_address),1)],64))])])):k("",!0)])])]),t("div",Ib,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",Ub,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.$CONSTANTS.PURCHASE_ORDER_STATUSES[s.data.status]),1)]),s.data.status=="closed"?(d(),w("tr",jb,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)])):k("",!0),k("",!0),s.data.due_date?(d(),w("tr",Eb,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(aa)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("table",Ab,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(W,null,Oe(s.data.details,n=>(d(),w("tr",{key:n.id},[t("td",Mb,[e(i,{href:m.route("admin.product.detail",{id:n.product_id})},{default:a(()=>[b(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",Nb,r(n.quantity),1),t("td",null,r(n.product_uom),1),t("td",Bb,r(l(K)(n.cost)),1),t("td",zb,r(l(K)(n.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),w("tr",Fb,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Te),e(ae,{class:"row",align:"left"},{default:a(()=>[t("div",Lb,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Hb,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Kb,[t("div",Yb,[t("div",Wb,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Qb,r(l(K)(s.data.grand_total)),1)])]),s.data.status=="closed"&&s.data.total_return?(d(),w("div",Jb,[t("div",Gb,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",Xb,r(l(K)(s.data.total_return)),1)])])):k("",!0),s.data.status=="closed"&&s.data.total_paid?(d(),w("div",Zb,[t("div",ev,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Dibayar (Rp)",-1)),t("div",tv,r(l(K)(s.data.total_paid)),1)])])):k("",!0),s.data.status=="closed"&&s.data.balance!=0?(d(),w("div",av,[t("div",lv,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",ov,r(l(wt)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},nv=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),sv={key:0,class:"text-center q-mb-md text-grey-8"},rv={class:"text-subtitle2 text-weight-medium"},iv={class:"text-h5 text-center text-primary q-pb-md"},dv={class:"text-center q-mt-md"},uv={key:0,class:"text-h6 text-negative text-weight-bold"},mv={key:1,class:"text-h6 text-green-8 text-weight-bold"},cv={key:2,class:"text-h6 text-positive text-weight-bold"},Lo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=O(!1),f=O({method:null,amount:m.total,notes:null}),v=i.props.data.supplier,p=G(()=>[...i.props.accounts.map(D=>({label:D.type=="bank"?D.name+" - "+D.number:D.name,value:D.id}))]),u=G(()=>m.total-(f.value.amount||0)),g=G(()=>f.value.method&&typeof f.value.amount=="number"&&f.value.amount>0),_=G(()=>f.value.method?(f.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),y=G(()=>g.value&&_.value===null),$=()=>{if(!y.value)return;n.value=!0;const D={total_paid:f.value.amount,payments:[{id:f.value.method,amount:f.value.amount}],notes:f.value.notes,remaining_debt:Math.max(0,m.total-(f.value.amount||0))};o("accepted",D),n.value=!1},C=()=>{f.value.amount=m.total,f.value.method=null,f.value.notes=null};return(D,F)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":F[4]||(F[4]=A=>D.$emit("update:modelValue",A)),onBeforeShow:C},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>F[5]||(F[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[l(v)?(d(),w("div",sv,[t("div",rv,[b(r(l(v).name)+" ",1),F[6]||(F[6]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(l(K)(l(v).balance)),1)])])):k("",!0),t("div",iv," Total: Rp. "+r(l(K)(c.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":F[0]||(F[0]=A=>f.value.method=A),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value,rules:[A=>!!A||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Ee,{modelValue:f.value.amount,"onUpdate:modelValue":F[1]||(F[1]=A=>f.value.amount=A),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":_.value},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:f.value.notes,"onUpdate:modelValue":F[2]||(F[2]=A=>f.value.notes=A),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",dv,[u.value>0?(d(),w("div",uv," Sisa Tagihan: Rp. "+r(l(K)(u.value)),1)):u.value<0?(d(),w("div",mv," Kembalian: Rp. "+r(l(K)(Math.abs(u.value))),1)):(d(),w("div",cv," Tagihan Terbayar "))])]),_:1}),e(et,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:F[3]||(F[3]=A=>D.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:$,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},pv=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),fv={class:"column"},gv={class:"row"},bv={class:"full-width",style:{"border-collapse":"collapse"}},vv={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},_v={class:"row items-center q-gutter-x-sm"},yv={class:"text-weight-bold"},kv={class:"row items-center q-gutter-x-sm q-mt-xs"},wv={class:"text-caption text-grey-6"},hv={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},$v={class:"q-mt-xs"},xv={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Sv={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Vv={key:0},qv={class:"text-right q-pa-sm"},Ho={__name:"PaymentTab",props:{data:Object},setup(c){const s=c,m=ke(),o=O(!1),i=()=>{o.value=!0},n=async v=>{const p={order_id:s.data.id,payments:v.payments,notes:v.notes};m.loading.show({message:"Memproses pembayaran..."});try{const u=await Re.post(route("admin.purchase-order.add-payment"),p);m.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Y.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(u){let g="Gagal memproses pembayaran.";u.response&&u.response.data&&u.response.data.message?g=u.response.data.message:u.message&&(g=u.message),m.notify({message:g,color:"negative",icon:"error"})}finally{m.loading.hide()}},f=v=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Re.post(route("admin.purchase-order.delete-payment",{id:v.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Y.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(p){let u="Gagal menghapus pembayaran.";p.response&&p.response.data&&p.response.data.message?u=p.response.data.message:p.message&&(u=p.message),m.notify({message:u,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(v,p)=>{const u=J("i-link");return d(),w(W,null,[t("div",fv,[e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("div",gv,[v.$can("admin.purchase-order.add-payment")?(d(),I(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:p[0]||(p[0]=X(g=>i(),["stop"]))})):k("",!0)]),t("table",bv,[p[5]||(p[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(W,null,Oe(s.data.payments,g=>(d(),w("tr",{key:g.id},[t("td",vv,[t("div",_v,[e(V,{name:"tag",size:"xs",color:"grey-7"}),t("span",yv,r(g.code),1)]),t("div",kv,[e(V,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",wv,r(l(ve)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),w("div",hv,[e(V,{name:"wallet",size:"xs",color:"grey-7"}),e(u,{class:"text-caption",href:v.route("admin.finance-account.detail",{id:g.account.id})},{default:a(()=>[b(r(g.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",$v,[e(ot,{label:v.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(ot,{label:g.amount<0?"Pembayaran":"Refund",color:g.amount<0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",xv,r(l(wt)(g.amount)),1),t("td",Sv,[v.$can("admin.purchase-order.delete-payment")&&s.data.supplier_id&&g.amount<0?(d(),I(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",Vv,p[2]||(p[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[p[3]||(p[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",qv,r(l(wt)(s.data.balance)),1),p[4]||(p[4]=t("td",null,null,-1))])])])]),_:1})]),e(Lo,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=g=>o.value=g),total:v.remainingPayment,customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},Cv=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),Tv={class:"q-gutter-sm"},Pv={class:"col col-lg-6 q-pa-xs",align:"center"},Tl="Rincian Pembelian",Rv={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=ge(),o=m.props.data,i=O(s.get("preview")||!1),f=O(s.get("tab")||"invoice"),v=()=>{window.print()};return(p,u)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),w(W,null,[e(g,{title:Tl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Tl))])]),"left-button":a(()=>[t("div",Tv,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>i.value?l(Y).get(p.route("admin.purchase-order.edit",l(m).props.data.id)):l(Y).get(p.route("admin.purchase-order.index")))})])]),"right-button":a(()=>[e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=y=>v())}),i.value?k("",!0):(d(),I(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[2]||(u[2]=y=>l(Y).get(p.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Ve,{class:"row justify-center print-visible"},{default:a(()=>[t("div",Pv,[e(ue,{square:"",flat:"",bordered:"",class:xe(["full-width",i.value?"draft-label":f.value!="invoice"?"":l(m).props.data.payment_status=="fully_paid"?"paid-label":"unpaid-label"]),style:{"max-width":"1024px"}},{default:a(()=>[e(Vt,{modelValue:f.value,"onUpdate:modelValue":u[3]||(u[3]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(nt,{name:"invoice",label:"Rincian"}),i.value?k("",!0):(d(),I(nt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Te),e(qt,{modelValue:f.value,"onUpdate:modelValue":u[4]||(u[4]=y=>f.value=y),animated:""},{default:a(()=>[e(st,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(Fo,{data:l(o)},null,8,["data"])]),_:1}),e(st,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(Ho,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])])]),_:1})]),_:1})],64)}}},Ov=Object.freeze(Object.defineProperty({__proto__:null,default:Rv},Symbol.toStringTag,{value:"Module"})),Dv={class:"text-weight-medium wrap-column"},Iv={class:"text-caption text-grey-6 elipsis"},Uv={class:"column items-end"},jv={class:"text-caption text-grey-6 text-italic"},Ko={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=ke(),m=tt(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:ze({height:l(m)})},{header:a(f=>[e(Pe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(W,null,Oe(f.cols,v=>(d(),I(Jt,{key:v.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Pe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left"},{default:a(()=>[t("div",Dv,r(f.row.product_name),1),t("div",Iv,r(f.row.product_barcode),1),f.row.notes?(d(),I(he,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal",props:f,class:"text-right"},{default:a(()=>[t("div",Uv,[t("div",null,r(l(K)(f.row.subtotal_cost)),1),t("div",jv,r(l(K)(f.row.quantity))+" x Rp. "+r(l(K)(f.row.cost)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Ev=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),Av={key:0,class:"text-center q-mb-md text-grey-8"},Mv={class:"text-subtitle2 text-weight-medium"},Nv={class:"text-h5 text-center text-primary q-pb-md"},Bv={class:"q-mb-md flex flex-center"},zv={key:1},Fv={class:"col-6"},Lv={class:"col-6"},Hv={class:"row"},Kv={class:"text-center q-mt-md"},Yv={key:0,class:"text-h6 text-negative text-weight-bold"},Wv={key:1,class:"text-h6 text-green-8 text-weight-bold"},Qv={key:2,class:"text-h6 text-positive text-weight-bold"},Jv={key:2},Gv={class:"text-h6 text-negative text-center"},Xv={key:3},Yo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=O(!1),f=O("payment"),v=O(new Date),p=O(null),u=De([]),g=G(()=>u.every(x=>x.id&&typeof x.amount=="number"&&x.amount>0)),_=G(()=>i.props.accounts.map(x=>({label:x.name,value:x.id}))),y=G(()=>u.reduce((x,P)=>x+(P.amount||0),0)),$=G(()=>m.total-y.value),C=G(()=>{if(!m.supplier)return!0;const x=u.find(P=>P.id==="wallet");return x?x.amount<=m.supplier.balance:!0}),D=new Date,F=it.addToDate(new Date,{days:30}),A=G(()=>[x=>!!x||"Tanggal jatuh tempo harus diisi",x=>it.isBetweenDates(x,D,F,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),T=G(()=>{if(f.value==="debt")return!!m.supplier&&A.value.every(S=>S(v.value)===!0);const x=u.some(S=>(S.amount||0)>0),P=u.every(S=>(S.amount||0)>=0),q=$.value<=0;return g.value&&x&&P&&q}),N=()=>{u.length<3&&u.push({id:null,amount:0})},M=x=>{if(u.length>1){const P=u.findIndex(q=>q.id===x);P!==-1&&u.splice(P,1)}},R=x=>{f.value=x,v.value=new Date,u.splice(0,u.length),x==="payment"&&_.value.length>0&&(u.splice(0,u.length,{id:_.value[0].value,amount:m.total}),pt(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},B=()=>{if(!T.value)return;n.value=!0;let x={total:m.total,is_debt:f.value==="debt"};if(f.value==="debt")x.due_date=it.formatDate(v.value,"YYYY-MM-DD"),x.payments=[];else{const P=y.value,q=P>m.total?P-m.total:0,S=$.value>0?$.value:0;x.payments=u,x.remaining_debt=S,x.change=q}o("accepted",x),n.value=!1},h=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}R("payment")};return(x,P)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":P[3]||(P[3]=q=>x.$emit("update:modelValue",q)),onBeforeShow:h},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[c.supplier?(d(),w("div",Av,[t("div",Mv,[b(" Nama: "+r(c.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),b(" Utang / Piutang: Rp. "+r(l(K)(c.supplier.balance)),1)])])):k("",!0),t("div",Nv," Total: Rp. "+r(l(K)(c.total)),1),t("div",Bv,[e(l(Bt),{modelValue:f.value,"onUpdate:modelValue":[P[0]||(P[0]=q=>f.value=q),R],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="payment"?(d(),w("div",zv,[(d(!0),w(W,null,Oe(u,(q,S)=>(d(),w("div",{key:S,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Fv,[e(l(ce),{modelValue:q.id,"onUpdate:modelValue":U=>q.id=U,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[U=>!!U||"Akun harus dipilih"],error:!q.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Lv,[e(Ee,{modelValue:q.amount,"onUpdate:modelValue":U=>q.amount=U,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!C.value,"error-message":C.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:S===0?"firstPaymentInputRef":null},Ae({_:2},[u.length>1?{name:"append",fn:a(()=>[e(V,{size:"xs",name:"close",class:"cursor-pointer",onClick:U=>M(S)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Hv,[e(E,{disable:!(u.length<3&&$.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:N,size:"sm"},null,8,["disable"])]),t("div",Kv,[$.value>0?(d(),w("div",Yv," Sisa Tagihan: Rp. "+r(l(K)($.value)),1)):$.value<0?(d(),w("div",Wv," Kembalian: Rp. "+r(l(K)(Math.abs($.value))),1)):(d(),w("div",Qv," Tagihan Terbayar "))])])):f.value==="debt"&&c.supplier?(d(),w("div",Jv,[e(sa,{outlined:"",modelValue:v.value,"onUpdate:modelValue":P[1]||(P[1]=q=>v.value=q),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(D),"max-date":l(F),rules:A.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Gv," Total Utang: Rp. "+r(l(K)(c.total)),1)])):f.value==="debt"&&!c.supplier?(d(),w("div",Xv,P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(et,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=q=>x.$emit("update:modelValue",!1))}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:B,disable:n.value||!T.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Zv=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),e_={class:"row items-center no-wrap"},t_={class:"col-auto"},Wo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=G(()=>o.item.quantity*o.item.cost),v=_=>{_.stopPropagation(),_.preventDefault()},p=_=>{o.modelValue&&(_.key==="Enter"?(n(),v(_)):_.key==="Escape"&&(i("update:modelValue",!1),v(_)))};ye(()=>{window.addEventListener("keydown",p)}),yt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item});const g=()=>{};return(_,y)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":y[6]||(y[6]=$=>_.$emit("update:modelValue",$)),onBeforeShow:g},{default:a(()=>[e(ue,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",e_,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",t_,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=$=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(ie,{modelValue:c.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=$=>c.item.product_name=$),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=$=>c.item.quantity=$),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Ee,{modelValue:c.item.cost,"onUpdate:modelValue":y[3]||(y[3]=$=>c.item.cost=$),label:"Modal / Harga Beli","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=$=>f.value=$),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ie,{modelValue:c.item.notes,"onUpdate:modelValue":y[5]||(y[5]=$=>c.item.notes=$),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(et,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},a_=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),l_={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ae,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(et,{align:"center"},{default:a(()=>[te(e(E,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Qo=ft(l_,[["__scopeId","data-v-a7905738"]]),o_=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),n_={class:"row items-center no-wrap"},s_={class:"col text-subtite text-bold text-grey-8"},r_={class:"col-auto"},Jo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=u=>{u.stopPropagation(),u.preventDefault()},v=u=>{o.modelValue&&(u.key==="Enter"?(n(),f(u)):u.key==="Escape"&&(i("update:modelValue",!1),f(u)))};return ye(()=>{window.addEventListener("keydown",v)}),yt(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(u,g)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>u.$emit("update:modelValue",_))},{default:a(()=>[e(ue,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",n_,[t("div",s_," Edit "+r(c.data.code),1),t("div",r_,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(Fe,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(ie,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>u.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ie,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(et,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},i_=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),d_={key:0},u_={style:{float:"right"}},m_={key:1},c_={style:{float:"right"}},p_={key:2},f_={style:{float:"right"}},g_={key:3},b_={style:{float:"right"}},v_={style:{float:"right"}},__={class:"q-gutter-sm"},y_={class:"q-my-md"},k_={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=O(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ae,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(d(),w("tr",d_,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ")),t("div",u_,r(l(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",m_,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ")),t("div",c_,r(l(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",p_,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ")),t("div",f_,r(l(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",g_,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ")),t("span",b_,r(l(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ")),t("div",v_,r(l(K)(c.payment.change)),1)])])])])]),_:1}),e(et,{align:"center"},{default:a(()=>[t("div",__,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",y_,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Go=ft(k_,[["__scopeId","data-v-31d340fd"]]),w_=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"})),h_={class:"q-gutter-sm"},$_={class:"row q-col-gutter-none full-width"},x_={class:"col-sm-6 col-12 col q-pa-sm"},S_={class:"row full-width"},V_={class:"col-sm-6 col-12 q-pa-sm"},q_={class:"row q-ml-sm items-end"},C_={class:"row col grow"},T_={class:"col-12 q-px-sm column"},P_={class:"row items-start q-col-gutter-none q-px-sm"},R_={key:0,class:"col"},O_={class:"text-caption text-grey-6 q-mt-xs"},D_={key:0,class:"text-caption text-grey-8 q-mt-xs"},I_={class:"text-italic"},U_={key:1,class:"col"},j_={class:"text-grey-8"},E_={class:"col"},A_={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},M_={class:"text-h4 text-weight-bold"},N_={class:"row q-px-sm q-col-gutter-sm q-py-xs"},B_={class:"col"},z_={__name:"Editor",setup(c){const s=ke(),m=ge(),o=O(!0),i=O(null),n=O(null),f=O(null),v=O(!1),p=O(null),u=m.props.data.code,g=O(m.props.data.supplier),_=O(null),y=O(""),$=O(!1),C=O(!1),D=O(!1),F=O(!1),A=O(!1),T=O(!1),N=O(null),M=De({id:m.props.data.id,code:m.props.data.code,supplier_id:m.props.data.supplier_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),R=G(()=>M.items.reduce((ne,Z)=>ne+Z.cost*Z.quantity,0)),B=ne=>isNaN(ne)||ne<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,h=ne=>isNaN(ne)||ne<0?(gt("Harga tidak valid.","top"),!1):!0,x=ne=>!ne||ne.length==0?(gt("Barcode tidak valid.","top"),!1):!0,P=ne=>{var Z;(Z=y.value)!=null&&Z.endsWith("*")?y.value+=ne.name:y.value=ne.name},q=async()=>{if($.value)return;const ne=y.value.trim();if(ne.length===0){D.value=!0;return}const Z=ne.split("*");let de=1,ee="",fe=null;if(Z.length===1)ee=Z[0];else if(Z.length<=3)de=parseInt(Z[0]),ee=Z[1],Z.length===3&&(fe=parseFloat(Z[2]));else{gt("Input tidak valid.","top");return}if(ee.length===0){D.value=!0;return}!x(ee)&&!B(de)&&!h(fe)||($.value=!0,await Re.post(route("admin.purchase-order.add-item"),{order_id:M.id,product_code:ee,qty:de,cost:fe,merge:o.value}).then(qe=>{const we=qe.data.data.item;let rt=-1;qe.data.data.mergeItem&&(rt=M.items.findIndex($t=>$t.id===we.id)),rt===-1?M.items.push(we):M.items[rt]=we,y.value="",fe!==null&&fe!==parseFloat(we.cost)&&gt("Harga tidak dapat diubah!","top")}).catch(qe=>{var we,rt;mt((rt=(we=qe.response)==null?void 0:we.data)==null?void 0:rt.message,"top"),console.error("Gagal mengambil data produk:",qe)}),$.value=!1,pt(()=>{var qe;(qe=i.value)==null||qe.focus()}))},S=ne=>{N.value=Object.create(ne),F.value=!0},U=ne=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ne.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{$.value=!0,Re.post(route("admin.purchase-order.remove-item"),{id:ne.id}).then(()=>{const Z=M.items.findIndex(de=>de.id===ne.id);Z!==-1&&(M.items.splice(Z,1)[0],ct("Item telah dihapus","top"))}).catch(Z=>{var de,ee;mt(((ee=(de=Z==null?void 0:Z.response)==null?void 0:de.data)==null?void 0:ee.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(Z)}).finally(()=>{$.value=!1})})},j=()=>{$.value=!0;const ne=n.value.getCurrentItem(),Z={id:ne.id,qty:ne.quantity,cost:ne.cost};ne.notes&&(Z.notes=ne.notes),Re.post(route("admin.purchase-order.update-item"),Z).then(de=>{const ee=de.data.data,fe=M.items.findIndex(qe=>qe.id===ee.id);fe!==-1&&(M.items[fe]=ee,ct("Item telah diperbarui","top"))}).catch(de=>{var ee,fe;mt(((fe=(ee=de==null?void 0:de.response)==null?void 0:ee.data)==null?void 0:fe.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(de)}).finally(()=>{$.value=!1})};ye(()=>{const ne=Z=>{var de;Z.key==="F1"?(Z.preventDefault(),v.value=!0):Z.key==="F2"?(Z.preventDefault(),f.value.focus()):Z.key==="F3"?(Z.preventDefault(),(de=i.value)==null||de.focus()):Z.key==="F4"?(Z.preventDefault(),o.value=!o.value):Z.key==="F12"||Z.ctrlKey&&Z.key==="Enter"?(Z.preventDefault(),C.value=!0):(Z.key==="F5"||Z.key==="F6"||Z.key==="F7")&&Z.preventDefault()};document.addEventListener("keydown",ne),yt(()=>{document.removeEventListener("keydown",ne)}),pt(()=>{var Z;(Z=p==null?void 0:p.value)==null||Z.hideDrawer()})});const oe=async ne=>{var Z;g.value=ne,M.supplier_id=ne==null?void 0:ne.id,await re(),ne!=null&&ne.id?(Z=i.value)==null||Z.focus():f.value.focus()},re=async()=>{$.value=!0;const ne={id:M.id,supplier_id:M.supplier_id,datetime:Wt(M.datetime),notes:M.notes};await Re.post(route("admin.purchase-order.update"),ne).then(Z=>{const de=Z.data.data.id;M.supplier_id=de.supplier_id}).catch(Z=>{var de,ee;mt(((ee=(de=Z==null?void 0:Z.response)==null?void 0:de.data)==null?void 0:ee.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Z)}).finally(()=>{$.value=!1})},H=ne=>{if(M.items.length===0){ct("Item masih kosong","top");return}const Z={id:M.id,...ne};$.value=!0,Re.post(route("admin.purchase-order.close"),Z).then(de=>{ct("Transaksi selesai"),Y.visit(route("admin.purchase-order.detail",{id:M.id}))}).catch(de=>{var ee,fe;mt((fe=(ee=de.response)==null?void 0:ee.data)==null?void 0:fe.message),console.error(de)}).finally(()=>{$.value=!1})},L=()=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${M.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Re.post(route("admin.purchase-order.cancel",{id:M.id}),{id:M.id}).then(()=>{ct("Transaksi telah dibatalkan."),Y.visit(route("admin.purchase-order.detail",{id:M.id}))}).catch(ne=>{var de,ee;const Z=((ee=(de=ne.response)==null?void 0:de.data)==null?void 0:ee.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:Z,color:"warning",position:"bottom"}),console.error(ne)})})},pe=()=>{window.open(route("admin.purchase-order.detail",{id:M.id})+"?preview=1","_blank")};return(ne,Z)=>{const de=J("i-head"),ee=J("authenticated-layout");return d(),w(W,null,[e(de,{title:l(u)},null,8,["title"]),e(ee,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[b(r(l(u)),1)]),"left-button":a(()=>[t("div",h_,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:Z[0]||(Z[0]=fe=>l(Y).get(ne.route("admin.purchase-order.index")))})])]),"right-button":a(()=>[l(s).screen.gt.sm?(d(),I(wa,{key:0})):k("",!0)]),default:a(()=>[e(Ve,{class:"bg-grey-2 column fit"},{default:a(()=>[e(ue,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",$_,[t("div",x_,[t("div",S_,[e(No,{ref_key:"supplierAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:g.value,"onUpdate:modelValue":Z[1]||(Z[1]=fe=>g.value=fe),label:"Pemasok",disable:$.value,onSupplierSelected:oe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),g.value?(d(),I(ka,{key:0,party:g.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",V_,[e(ya,{ref_key:"userInputRef",ref:i,modelValue:y.value,"onUpdate:modelValue":Z[2]||(Z[2]=fe=>y.value=fe),onKeyup:Z[3]||(Z[3]=zt(X(fe=>q(),["prevent"]),["enter"])),onScanSuccess:Z[4]||(Z[4]=fe=>q()),onSend:Z[5]||(Z[5]=fe=>q()),onSearch:Z[6]||(Z[6]=fe=>D.value=!0),loading:$.value,disable:$.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",q_,[e(Ct,{class:"col",modelValue:o.value,"onUpdate:modelValue":Z[7]||(Z[7]=fe=>o.value=fe),label:"Gabungkan item",disable:$.value},null,8,["modelValue","disable"])])])]),t("div",C_,[t("div",T_,[e(Ko,{items:M.items,onUpdateQuantity:Z[8]||(Z[8]=({id:fe,value:qe})=>ne.updateQuantity(fe,qe)),onRemoveItem:U,onEditItem:S,"is-processing":$.value},null,8,["items","is-processing"])])]),t("div",P_,[l(s).screen.gt.sm?(d(),w("div",R_,[t("div",O_,r(M.items.length)+" item(s) ",1),M.notes?(d(),w("div",D_,[Z[22]||(Z[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",I_,[e(he,{text:M.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",U_,[t("div",j_,[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(r(M.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(r(l(ve)(M.datetime)),1)])])])):k("",!0),t("div",E_,[t("div",A_,[Z[24]||(Z[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",M_,[Z[23]||(Z[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(l(K)(R.value)),1)])])])]),t("div",N_,[t("div",B_,[e(E,{class:"full-width",label:"Bayar",color:"primary",icon:"payment",onClick:Z[9]||(Z[9]=fe=>C.value=!0),disable:!ne.$can("admin.purchase-order.close")||$.value||M.items.length===0||M.status!=="draft",loading:$.value},null,8,["disable","loading"])]),t("div",null,[e(E,{icon:"more_vert",color:"grey",onClick:Z[13]||(Z[13]=X(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[te((d(),I(le,{clickable:"",onClick:Z[10]||(Z[10]=X(fe=>A.value=!0,["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>Z[25]||(Z[25]=[b("Edit Rincian")])),_:1})]),_:1})),[[se],[me]]),te((d(),I(le,{clickable:"",onClick:Z[11]||(Z[11]=X(fe=>pe(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"preview"})]),_:1}),e(z,null,{default:a(()=>Z[26]||(Z[26]=[b("Pratinjau")])),_:1})]),_:1})),[[se],[me]]),te((d(),I(le,{clickable:"",onClick:Z[12]||(Z[12]=X(fe=>L(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:a(()=>Z[27]||(Z[27]=[b(" Batalkan ")])),_:1})]),_:1})),[[se],[me]]),e(Te)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Wo,{ref_key:"itemEditorRef",ref:n,modelValue:F.value,"onUpdate:modelValue":Z[14]||(Z[14]=fe=>F.value=fe),item:N.value,onSave:Z[15]||(Z[15]=fe=>j()),"is-processing":$.value},null,8,["modelValue","item","is-processing"]),e(Yo,{modelValue:C.value,"onUpdate:modelValue":Z[16]||(Z[16]=fe=>C.value=fe),onAccepted:H,form:M,supplier:g.value,total:R.value,accounts:l(m).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(_a,{modelValue:D.value,"onUpdate:modelValue":Z[17]||(Z[17]=fe=>D.value=fe),"show-cost":!0,onProductSelected:P},null,8,["modelValue"]),e(Jo,{modelValue:A.value,"onUpdate:modelValue":Z[18]||(Z[18]=fe=>A.value=fe),data:M,onSave:Z[19]||(Z[19]=fe=>re()),"is-processing":$.value},null,8,["modelValue","data","is-processing"]),e(Qo,{modelValue:v.value,"onUpdate:modelValue":Z[20]||(Z[20]=fe=>v.value=fe)},null,8,["modelValue"]),e(Go,{modelValue:T.value,"onUpdate:modelValue":Z[21]||(Z[21]=fe=>T.value=fe),order:M,supplier:g.value,total:R.value,payment:_.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},F_=Object.freeze(Object.defineProperty({__proto__:null,default:z_},Symbol.toStringTag,{value:"Module"})),Xo={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.PURCHASE_ORDER_STATUSES,m={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(d(),I(At,{status:c.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}},Zo={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,m={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(d(),I(At,{status:c.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}};const L_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},H_={class:"q-pa-xs"},K_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Y_={key:0},W_={key:1},Q_={key:2},J_={key:0},G_={key:0},X_={key:1},Z_={class:"flex justify-end"},Pl="Pembelian",ey={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=co();po(),[`${p}`,...fo(p-2,p-1).reverse()],[...go()];const u=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],g=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],_=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],y=Ce().startOf("month").toDate(),$=Ce().endOf("month").toDate(),C=De({search:"",status:"all",payment_status:"all",delivery_status:"all",start_date:y,end_date:$,...Ne()}),D=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),F=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp.)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];ye(()=>{B()});const A=P=>{if(P.status=="draft"){T(P);return}N(P)},T=P=>{Y.get(route("admin.purchase-order.edit",P.id))},N=P=>{Y.get(route("admin.purchase-order.detail",P.id))},M=P=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Re.post(route("admin.purchase-order.cancel",{id:P.id}),{id:P.id}).then(q=>{const S=q.data.data,U=o.value.findIndex(j=>j.id===S.id);if(U===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[U].status="canceled",s.notify({message:q.data.message,position:"bottom"})}).catch(q=>{var U,j;const S=((j=(U=q.response)==null?void 0:U.data)==null?void 0:j.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:S,color:"warning",position:"bottom"}),console.error(q)})})},R=P=>at({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.purchase-order.delete",P.id),fetchItemsCallback:B,loading:i}),B=(P=null)=>{const q={...C,start_date:Ce(C.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Ce(C.end_date).format("YYYY-MM-DD HH:mm:ss")};Be({pagination:D,filter:q,props:P,rows:o,url:route("admin.purchase-order.data"),loading:i,tableRef:n})},h=()=>{B()},x=G(()=>s.screen.gt.sm?F:F.filter(P=>P.name==="id"||P.name==="action"));return(P,q)=>{const S=J("i-head"),U=J("authenticated-layout");return d(),w(W,null,[e(S,{title:Pl}),e(U,null,Ae({title:a(()=>[b(r(Pl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:q[0]||(q[0]=j=>m.value=!m.value)},null,8,["icon"]),P.$can("admin.purchase-order.edit")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:q[1]||(q[1]=j=>l(Y).get(P.route("admin.purchase-order.add")))})):k("",!0)]),default:a(()=>[t("div",H_,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":q[11]||(q[11]=j=>D.value=j),filter:C.search,loading:i.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:l(v)}),onRequest:B,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:j,message:oe,filter:re})=>[t("div",K_,[t("span",null,r(oe)+" "+r(re?" with term "+re:""),1)])]),body:a(j=>[e(Pe,{props:j,class:"cursor-pointer",onClick:X(oe=>A(j.row),["prevent"])},{default:a(()=>[e(Q,{key:"id",props:j,class:"wrap-column"},{default:a(()=>[t("div",null,[e(V,{name:"tag"}),b(" "+r(j.row.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(r(l(ve)(j.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[j.row.supplier?(d(),w("div",Y_,[e(V,{name:"person",class:"inline-icon"}),e(fa,{href:P.route("admin.supplier.detail",{id:j.row.supplier.id}),onClick:q[8]||(q[8]=X(()=>{},["stop"]))},{default:a(()=>[b(" "+r(j.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Total: Rp. "+r(l(K)(j.row.grand_total)),1),j.row.balance!=0?(d(),w("div",W_," Saldo: Rp. "+r(l(wt)(j.row.balance)),1)):k("",!0),j.row.notes?(d(),w("div",Q_,[e(V,{name:"notes"}),b(" "+r(j.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Xo,{status:j.row.status},null,8,["status"]),j.row.status=="closed"?(d(),w(W,{key:0},[e(Zo,{status:j.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]),_:2},1032,["props"]),e(Q,{key:"supplier_id",props:j},{default:a(()=>[j.row.supplier?(d(),w("div",J_,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(j.row.supplier_name),1)]),j.row.supplier_phone?(d(),w("div",G_,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(j.row.supplier_phone),1)])):k("",!0),j.row.supplier_address?(d(),w("div",X_,[e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(j.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:j},{default:a(()=>[b(r(l(K)(j.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:j},{default:a(()=>[b(r(l(wt)(j.row.balance)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:j},{default:a(()=>[e(he,{text:j.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:j,onClick:q[10]||(q[10]=X(()=>{},["stop"]))},{default:a(()=>[t("div",Z_,[P.$can("admin.purchase-order.detail")||P.$can("admin.purchase-order.edit")||P.$can("admin.purchase-order.cancel")||P.$can("admin.purchase-order.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:q[9]||(q[9]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[j.row.status!="draft"&&P.$can("admin.purchase-order.detail")?te((d(),I(le,{key:0,onClick:X(oe=>N(j.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"visibility"})]),_:1}),e(z,null,{default:a(()=>q[12]||(q[12]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),j.row.status=="draft"&&P.$can("admin.purchase-order.edit")?te((d(),I(le,{key:1,onClick:X(oe=>T(j.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>q[13]||(q[13]=[b(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),j.row.status=="draft"&&P.$can("admin.purchase-order.cancel")?te((d(),I(le,{key:2,onClick:X(oe=>M(j.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"cancel"})]),_:1}),e(z,null,{default:a(()=>q[14]||(q[14]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),e(Te),P.$can("admin.purchase-order.delete")?te((d(),I(le,{key:3,onClick:X(oe=>R(j.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>q[15]||(q[15]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",L_,[e(Fe,{modelValue:C.start_date,"onUpdate:modelValue":[q[2]||(q[2]=j=>C.start_date=j),h],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Fe,{modelValue:C.end_date,"onUpdate:modelValue":[q[3]||(q[3]=j=>C.end_date=j),h],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:C.status,"onUpdate:modelValue":[q[4]||(q[4]=j=>C.status=j),h],options:u,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:C.payment_status,"onUpdate:modelValue":[q[5]||(q[5]=j=>C.payment_status=j),h],options:g,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:C.search,"onUpdate:modelValue":q[7]||(q[7]=j=>C.search=j),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ty=Object.freeze(Object.defineProperty({__proto__:null,default:ey},Symbol.toStringTag,{value:"Module"})),ay={class:"q-pa-xs"},ly={class:"row items-center full-width"},oy={class:"col text-left text-bold text-grey-9"},ny={key:1,class:"q-pa-md"},sy={class:"text-h6 text-primary q-mb-md"},Rl="Laporan",ry={__name:"Index",setup(c){ke();const s=O("sales"),m=G(()=>!0),o={sales:{label:"Penjualan",icon:"o_payments",reports:[{title:"Laporan Penjualan",subtitle:"Laporan penjualan rekap / rincian",icon:"o_receipt_long",route:"admin.report.sales-order.index"}]},purchasing:{label:"Pembelian",icon:"o_shopping_cart",reports:[{title:"Rincian Pembelian",subtitle:"Daftar rincian pembelian",icon:"o_receipt_long",route:"admin.report.purchase-order.detail"}]},inventory:{label:"Inventori",icon:"inventory",reports:[{title:"Produk",subtitle:"Daftar produk",icon:"inventory",route:"admin.report.product.index"}]},customer:{label:"Pelanggan",icon:"o_groups",reports:[{title:"Daftar Pelanggan",subtitle:"Laporan daftar pelanggan",icon:"o_groups",route:"admin.report.customer.index"}]},supplier:{label:"Supplier",icon:"o_groups",reports:[{title:"Daftar Supplier",subtitle:"Laporan daftar supplier",icon:"o_groups",route:"admin.report.supplier.index"}]}},i=[{id:"sales",...o.sales},{id:"purchasing",...o.purchasing},{id:"inventory",...o.inventory},{id:"customer",...o.customer},{id:"supplier",...o.supplier}];return(n,f)=>{const v=J("i-head"),p=J("authenticated-layout");return d(),w(W,null,[e(v,{title:Rl}),e(p,null,{title:a(()=>[b(r(Rl))]),default:a(()=>[t("div",ay,[e(ue,{flat:"",bordered:"",class:"report-container full-width"},{default:a(()=>[e(Vt,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=u=>s.value=u),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary","inline-label":"","mobile-arrows":"",align:"justify","switch-indicator":"",breakpoint:0},{default:a(()=>[(d(),w(W,null,Oe(i,u=>e(nt,{key:u.id,name:u.id},{default:a(()=>[t("div",ly,[m.value?k("",!0):(d(),I(V,{key:0,name:u.icon,class:"q-mr-md"},null,8,["name"])),t("div",oy,r(u.label),1),u.count?(d(),I(ot,{key:1,color:"grey-5","text-color":"dark",rounded:"",label:u.count,class:"q-ml-sm"},null,8,["label"])):k("",!0)])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"]),e(qt,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=u=>s.value=u),animated:"",class:"q-pa-none"},{default:a(()=>[(d(),w(W,null,Oe(i,u=>e(st,{key:u.id,name:u.id,class:"q-pa-none"},{default:a(()=>[e(Ie,{separator:""},{default:a(()=>[u.reports&&u.reports.length>0?(d(!0),w(W,{key:0},Oe(u.reports,(g,_)=>te((d(),I(le,{key:_,clickable:"",class:"q-py-md",onClick:X(y=>l(Y).get(n.route(g.route)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:g.icon,size:"28px",color:"grey"},null,8,["name"])]),_:2},1024),e(z,null,{default:a(()=>[e(be,{class:"text-weight-bold text-dark"},{default:a(()=>[b(r(g.title),1)]),_:2},1024),e(be,{caption:""},{default:a(()=>[b(r(g.subtitle),1)]),_:2},1024)]),_:2},1024),e(z,{side:""},{default:a(()=>[e(V,{name:"chevron_right",color:"grey"})]),_:1})]),_:2},1032,["onClick"])),[[se]])),128)):(d(),w("div",ny,[t("div",sy," Laporan "+r(u.label),1),f[2]||(f[2]=t("p",null," Saat ini tidak ada daftar laporan spesifik yang ditampilkan di kategori ini. ",-1))]))]),_:2},1024)]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})])]),_:1})],64)}}},iy=ft(ry,[["__scopeId","data-v-f429565f"]]),dy=Object.freeze(Object.defineProperty({__proto__:null,default:iy},Symbol.toStringTag,{value:"Module"})),uy=Pt({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(c,{slots:s,emit:m}){let o=!1,i,n,f=null,v=null,p,u;function g(){i&&i(),i=null,o=!1,f!==null&&(clearTimeout(f),f=null),v!==null&&(clearTimeout(v),v=null),n!==void 0&&n.removeEventListener("transitionend",p),p=null}function _(D,F,A){F!==void 0&&(D.style.height=`${F}px`),D.style.transition=`height ${c.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,i=A}function y(D,F){D.style.overflowY=null,D.style.height=null,D.style.transition=null,g(),F!==u&&m(F)}function $(D,F){let A=0;n=D,o===!0?(g(),A=D.offsetHeight===D.scrollHeight?0:void 0):(u="hide",D.style.overflowY="hidden"),_(D,A,F),f=setTimeout(()=>{f=null,D.style.height=`${D.scrollHeight}px`,p=T=>{v=null,(Object(T)!==T||T.target===D)&&y(D,"show")},D.addEventListener("transitionend",p),v=setTimeout(p,c.duration*1.1)},100)}function C(D,F){let A;n=D,o===!0?g():(u="show",D.style.overflowY="hidden",A=D.scrollHeight),_(D,A,F),f=setTimeout(()=>{f=null,D.style.height=0,p=T=>{v=null,(Object(T)!==T||T.target===D)&&y(D,"hide")},D.addEventListener("transitionend",p),v=setTimeout(p,c.duration*1.1)},100)}return Gt(()=>{o===!0&&g()}),()=>Se(no,{css:!1,appear:c.appear,onEnter:$,onLeave:C},s.default)}}),Mt=ys({}),my=Object.keys(bo),bt=Pt({name:"QExpansionItem",props:{...bo,...ws,...Ia,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ks,"click","afterShow","afterHide"],setup(c,{slots:s,emit:m}){const{proxy:{$q:o}}=St(),i=Ua(c,o),n=O(c.modelValue!==null?c.modelValue:c.defaultOpened),f=O(null),v=hs(),{show:p,hide:u,toggle:g}=$s({showing:n});let _,y;const $=G(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${c.popup===!0?"popup":"standard"}`),C=G(()=>c.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:c.contentInsetLevel*56+"px"}),D=G(()=>c.disable!==!0&&(c.href!==void 0||c.to!==void 0&&c.to!==null&&c.to!=="")),F=G(()=>{const L={};return my.forEach(pe=>{L[pe]=c[pe]}),L}),A=G(()=>D.value===!0||c.expandIconToggle!==!0),T=G(()=>c.expandedIcon!==void 0&&n.value===!0?c.expandedIcon:c.expandIcon||o.iconSet.expansionItem[c.denseToggle===!0?"denseIcon":"icon"]),N=G(()=>c.disable!==!0&&(D.value===!0||c.expandIconToggle===!0)),M=G(()=>({expanded:n.value===!0,detailsId:v.value,toggle:g,show:p,hide:u})),R=G(()=>{const L=c.toggleAriaLabel!==void 0?c.toggleAriaLabel:o.lang.label[n.value===!0?"collapse":"expand"](c.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":v.value,"aria-label":L}});He(()=>c.group,L=>{y!==void 0&&y(),L!==void 0&&S()});function B(L){D.value!==!0&&g(L),m("click",L)}function h(L){L.keyCode===13&&x(L,!0)}function x(L,pe){pe!==!0&&f.value!==null&&f.value.focus(),g(L),Nt(L)}function P(){m("afterShow")}function q(){m("afterHide")}function S(){_===void 0&&(_=xs()),n.value===!0&&(Mt[c.group]=_);const L=He(n,ne=>{ne===!0?Mt[c.group]=_:Mt[c.group]===_&&delete Mt[c.group]}),pe=He(()=>Mt[c.group],(ne,Z)=>{Z===_&&ne!==void 0&&ne!==_&&u()});y=()=>{L(),pe(),Mt[c.group]===_&&delete Mt[c.group],y=void 0}}function U(){const L={class:[`q-focusable relative-position cursor-pointer${c.denseToggle===!0&&c.switchToggleSide===!0?" items-end":""}`,c.expandIconClass],side:c.switchToggleSide!==!0,avatar:c.switchToggleSide},pe=[Se(V,{class:"q-expansion-item__toggle-icon"+(c.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:T.value})];return N.value===!0&&(Object.assign(L,{tabindex:0,...R.value,onClick:x,onKeyup:h}),pe.unshift(Se("div",{ref:f,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),Se(z,L,()=>pe)}function j(){let L;return s.header!==void 0?L=[].concat(s.header(M.value)):(L=[Se(z,()=>[Se(be,{lines:c.labelLines},()=>c.label||""),c.caption?Se(be,{lines:c.captionLines,caption:!0},()=>c.caption):null])],c.icon&&L[c.switchToggleSide===!0?"push":"unshift"](Se(z,{side:c.switchToggleSide===!0,avatar:c.switchToggleSide!==!0},()=>Se(V,{name:c.icon})))),c.disable!==!0&&c.hideExpandIcon!==!0&&L[c.switchToggleSide===!0?"unshift":"push"](U()),L}function oe(){const L={ref:"item",style:c.headerStyle,class:c.headerClass,dark:i.value,disable:c.disable,dense:c.dense,insetLevel:c.headerInsetLevel};return A.value===!0&&(L.clickable=!0,L.onClick=B,Object.assign(L,D.value===!0?F.value:R.value)),Se(le,L,j)}function re(){return te(Se("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:C.value,id:v.value},Et(s.default)),[[uo,n.value]])}function H(){const L=[oe(),Se(uy,{duration:c.duration,onShow:P,onHide:q},re)];return c.expandSeparator===!0&&L.push(Se(Te,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),Se(Te,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),L}return c.group!==void 0&&S(),Gt(()=>{y!==void 0&&y()}),()=>Se("div",{class:$.value},[Se("div",{class:"q-expansion-item__container relative-position"},H())])}}),cy={class:"col col-md-8"},py={class:"q-col-gutter-sm row"},fy={class:"col-xs-12 col-md-7"},gy={class:"full-width bg-grey-2 text-subtitle2 text-bold text-grey-8 row items-center"},by={class:"text-subtitle2 text-bold text-grey-8 row items-center"},vy={class:"text-subtitle2 text-bold text-grey-8 row items-center"},_y={class:"text-subtitle2 text-bold text-grey-8 row items-center"},yy={key:0,class:"row q-mt-md"},ky={class:"text-subtitle2 text-bold text-grey-8 row items-center"},wy={class:"col-xs-12 col-md-5"},hy={class:"q-my-sm"},$y={class:"q-my-sm"},xy={class:"q-my-sm"},Sy={__name:"ReportGeneratorLayout",props:{options:{type:Object,required:!0},routeName:{type:String,required:!0}},emits:["beforeSubmit"],setup(c,{expose:s,emit:m}){const o=ke(),i=m,n=c,f=Ke(n.options.primary_columns),v=Ke(n.options.optional_columns),p=[...n.options.templates],u=G(()=>[...f,...v]),g=G(()=>f.map(P=>P.value)),_=[{value:"auto",label:"Otomatis"},{value:"portrait",label:"Potret"},{value:"landscape",label:"Lansekap"}],y=G(()=>n.options.templates.find(P=>P.value===T.value.template)),$=P=>{var S;const q=(S=y.value)==null?void 0:S[P];return q??n.options[P]},C=G(()=>v.length>0&&$("columns_editable")),D=G(()=>$("sorts_editable")&&A().columns.length>0),F=G(()=>$("page_orientation_editable")),A=()=>{const P=p.find(q=>q.value===p[0].value);return{template:p[0].value,columns:(P==null?void 0:P.columns)||n.options.initial_columns||[],filter:{...n.options.initial_filter},sortOptions:(P==null?void 0:P.initial_sorts)||n.options.initial_sorts,orientation:"auto"}},T=O(A()),N=()=>{T.value=A(),o.notify({message:"Opsi laporan direset ke nilai awal.",timeout:1500})},M=({index:P,value:q})=>{if(g.value.includes(q)){const oe=f.find(re=>re.value===q);return o.notify({type:"negative",message:`Kolom (${oe.label}) tidak boleh dihapus.`,timeout:2e3}),!1}const S=T.value.sortOptions.length;T.value.sortOptions=T.value.sortOptions.filter(oe=>oe.column!==q);const U=T.value.sortOptions.length;return S-U>0&&T.value.sortOptions.length===0&&B(),!0},R=async P=>{if(A().columns>0&&T.value.columns.length===0){o.notify({type:"negative",message:"Kolom belum dipilih.",timeout:2e3});return}let S={...Ss(T.value),format:P};for(const U of Object.keys(S.filter))S.filter[U]instanceof Date&&(S.filter[U]=Ce(S.filter[U]).format("YYYY-MM-DD HH:mm:ss"));i("beforeSubmit",S);try{const U=route(n.routeName,S);window.open(U,"_blank"),P!=="html"&&o.notify({type:"positive",message:`Laporan ${P.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(U){o.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",U)}},B=()=>{const q=T.value.sortOptions.length,S=T.value.columns.length;if(q>=3){o.notify({type:"warning",message:"Maksimal hanya 3 opsi pengurutan yang diperbolehkan.",timeout:2e3});return}if(q>=S){o.notify({type:"warning",message:`Jumlah opsi pengurutan tidak boleh melebihi jumlah kolom yang dipilih (${S}).`,timeout:2500});return}const U=T.value.sortOptions.map(oe=>oe.column),j=u.value.find(oe=>!U.includes(oe.value));j?T.value.sortOptions.push({column:j.value,order:"asc"}):o.notify({type:"warning",message:"Tidak ada kolom unik yang tersedia untuk pengurutan.",timeout:2500})},h=P=>{T.value.sortOptions.splice(P,1)},x=G(()=>P=>{const q=T.value.sortOptions.slice(0,P).map(S=>S.column);return q.push(...T.value.sortOptions.slice(P+1).map(S=>S.column)),u.value.filter(S=>{var j;const U=(j=T.value.sortOptions[P])==null?void 0:j.column;return S.value===U||!q.includes(S.value)})});return He(()=>T.value.template,(P,q)=>{if(P!==q&&P!==null){const S=n.options.templates.find(U=>U.value===P);S.columns?T.value.columns=S.columns:T.value.columns=n.options.initial_columns,S.initial_sorts?T.value.sortOptions=S.initial_sorts:T.value.sortOptions=n.options.initial_sorts,S.page_orientation?T.value.orientation=S.page_orientation:T.value.orientation="auto"}else P===null&&(T.value.columns=n.options.initial_columns,T.value.sortOptions=n.options.initial_sorts,T.value.orientation="auto")}),s({form:T,reset:N,columnOptions:u}),(P,q)=>(d(),I(Ve,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",cy,[t("div",py,[t("div",fy,[e(bt,{"default-opened":"",class:"full-width q-mb-sm bg-grey-2"},{header:a(()=>[t("div",gy,[e(V,{name:"analytics",size:"xs",class:"q-mr-sm"}),q[7]||(q[7]=b(" Jenis Laporan "))])]),default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(ce,{label:"Pilih Laporan",modelValue:T.value.template,"onUpdate:modelValue":q[0]||(q[0]=S=>T.value.template=S),options:p,"map-options":"","emit-value":"","hide-bottom-space":""},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),e(bt,{class:"full-width q-mb-sm bg-grey-2","default-opened":""},{header:a(()=>[t("div",by,[e(V,{name:"filter_alt",size:"xs",class:"q-mr-sm"}),q[8]||(q[8]=b(" Filter "))])]),default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[xt(P.$slots,"filter",{form:T.value},void 0,!0)]),_:3})]),_:3})]),_:3}),C.value?(d(),I(bt,{key:0,"default-opened":"",class:"full-width q-mb-sm bg-grey-2"},{header:a(()=>[t("div",vy,[e(V,{name:"data_table",size:"xs",class:"q-mr-sm"}),q[9]||(q[9]=b(" Kolom "))])]),default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(ce,{label:"Pilih Kolom",modelValue:T.value.columns,"onUpdate:modelValue":q[1]||(q[1]=S=>T.value.columns=S),options:u.value,"map-options":"","emit-value":"",multiple:"",clearable:"","use-chips":"",onRemove:M,onClear:q[2]||(q[2]=S=>{var U;return T.value.columns=((U=n.options.templates.find(j=>j.value===T.value.template))==null?void 0:U.columns.slice())||[]}),rules:[S=>S&&S.length>0||"Pilih minimal satu kolom"],"hide-bottom-space":""},{"selected-item":a(S=>[e(Qt,{removable:!g.value.includes(S.opt.value),onRemove:U=>M(S.opt)&&S.removeAtIndex(S.index),dense:""},{default:a(()=>[b(r(S.opt.label),1)]),_:2},1032,["removable","onRemove"])]),_:1},8,["modelValue","options","rules"])])]),_:1})]),_:1})]),_:1})):k("",!0),D.value?(d(),I(bt,{key:1,class:"full-width q-mb-sm bg-grey-2"},{header:a(()=>[t("div",_y,[e(V,{name:"sort",size:"xs",class:"q-mr-sm"}),q[10]||(q[10]=b(" Urutkan "))])]),default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[(d(!0),w(W,null,Oe(T.value.sortOptions,(S,U)=>(d(),w("div",{key:U,class:"row q-col-gutter-sm q-mb-sm items-center"},[e(ce,{modelValue:S.column,"onUpdate:modelValue":j=>S.column=j,class:"col-grow",style:{"min-width":"150px"},options:x.value(U),"map-options":"",dense:"","emit-value":"",label:U+1+" - Urut berdasarkan"},null,8,["modelValue","onUpdate:modelValue","options","label"]),e(E,{icon:S.order==="asc"?"arrow_upward":"arrow_downward",color:"grey-8",flat:"",round:"",dense:"",onClick:j=>S.order=S.order==="asc"?"desc":"asc",class:"q-ml-sm",size:"sm"},{default:a(()=>[e(Tt,null,{default:a(()=>[b(" Urutkan: "+r(S.order==="asc"?"Terkecil ke Terbesar":"Terbesar ke Terkecil"),1)]),_:2},1024)]),_:2},1032,["icon","onClick"]),T.value.sortOptions.length>1?(d(),I(E,{key:0,icon:"delete",color:"red",flat:"",round:"",dense:"",onClick:j=>h(U),class:"q-ml-xs",size:"sm"},{default:a(()=>[e(Tt,null,{default:a(()=>q[11]||(q[11]=[b("Hapus Opsi Urutan")])),_:1})]),_:2},1032,["onClick"])):k("",!0)]))),128)),T.value.sortOptions.length<3&&T.value.sortOptions.length<T.value.columns.length?(d(),w("div",yy,[e(E,{label:"Tambah Opsi Pengurutan",icon:"add",color:"blue-grey",flat:"",dense:"",size:"sm",onClick:B})])):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0),F.value?(d(),I(bt,{key:2,class:"full-width bg-grey-2"},{header:a(()=>[t("div",ky,[e(V,{name:"rotate_right",size:"xs",class:"q-mr-sm"}),q[12]||(q[12]=b(" Halaman "))])]),default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(ce,{label:"Orientasi",modelValue:T.value.orientation,"onUpdate:modelValue":q[3]||(q[3]=S=>T.value.orientation=S),options:_,"map-options":"","emit-value":""},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})):k("",!0)]),t("div",wy,[e(ue,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(ae,{class:"q-py-sm q-px-md"},{default:a(()=>[t("div",hy,[e(E,{label:"Cetak",class:"full-width",color:"primary",icon:"print",onClick:q[4]||(q[4]=S=>R("html"))})]),t("div",$y,[e(E,{label:"Unduh PDF",class:"full-width",color:"red",icon:"picture_as_pdf",onClick:q[5]||(q[5]=S=>R("pdf"))})]),t("div",xy,[e(E,{label:"Reset",class:"full-width",color:"grey",icon:"refresh",onClick:q[6]||(q[6]=S=>N())})])]),_:1})]),_:1})])])])]),_:3}))}},ra=ft(Sy,[["__scopeId","data-v-b6e206f9"]]),Vy=Object.freeze(Object.defineProperty({__proto__:null,default:ra},Symbol.toStringTag,{value:"Module"})),ha={__name:"BackButton",props:{route:{type:String,default:"",required:!0}},setup(c){const s=c;return(m,o)=>(d(),I(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=i=>m.$inertia.get(s.route))}))}},qy={class:"q-gutter-sm"},Ol="Laporan Pelanggan",Cy={__name:"Index",setup(c){const m=ge().props.options,o=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],i=[{value:"all",label:"Semua"},{value:"general",label:"Umum"},{value:"staff",label:"Staff"},{value:"category1",label:"Kategori 1"},{value:"category2",label:"Kategori 2"},{value:"category3",label:"Kategori 3"}],n=[{value:"all",label:"Semua"},{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}];return(f,v)=>{const p=J("i-head"),u=J("authenticated-layout");return d(),w(W,null,[e(p,{title:Ol}),e(u,null,{title:a(()=>[b(r(Ol))]),"left-button":a(()=>[t("div",qy,[e(ha,{route:f.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>v[0]||(v[0]=[])),default:a(()=>[e(ra,{options:l(m),routeName:"admin.report.customer.generate"},{filter:a(({form:g})=>[e(ce,{label:"Status",modelValue:g.filter.status,"onUpdate:modelValue":_=>g.filter.status=_,options:o,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ce,{label:"Level Harga",modelValue:g.filter.default_price_type,"onUpdate:modelValue":_=>g.filter.default_price_type=_,options:n,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ce,{label:"Jenis Akun",modelValue:g.filter.type,"onUpdate:modelValue":_=>g.filter.type=_,options:i,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["options"])]),_:1})],64)}}},Ty=Object.freeze(Object.defineProperty({__proto__:null,default:Cy},Symbol.toStringTag,{value:"Module"})),Py={class:"q-gutter-sm"},Dl="Laporan Produk",Ry={__name:"Index",setup(c){const s=ge(),m=s.props.options,{filteredCategories:o,filterCategories:i}=ba(s.props.categories),{filteredSuppliers:n,filterSupplierFn:f}=va(s.props.suppliers),v=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],p=Ke(window.CONSTANTS.PRODUCT_TYPES);return(u,g)=>{const _=J("i-head"),y=J("authenticated-layout");return d(),w(W,null,[e(_,{title:Dl}),e(y,null,{title:a(()=>[b(r(Dl))]),"left-button":a(()=>[t("div",Py,[e(ha,{route:u.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>g[0]||(g[0]=[])),default:a(()=>[e(ra,{options:l(m),routeName:"admin.report.product.generate"},{filter:a(({form:$})=>[e(ce,{label:"Status",modelValue:$.filter.status,"onUpdate:modelValue":C=>$.filter.status=C,options:v,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ce,{label:"Jenis",modelValue:$.filter.types,"onUpdate:modelValue":C=>$.filter.types=C,options:l(p),"map-options":"","emit-value":"",multiple:"","use-chips":"",clearable:""},null,8,["modelValue","onUpdate:modelValue","options"]),e(ce,{label:"Kategori",modelValue:$.filter.categories,"onUpdate:modelValue":C=>$.filter.categories=C,options:l(o),onFilter:l(i),"map-options":"","emit-value":"","use-input":"",clearable:"",multiple:"","use-chips":""},null,8,["modelValue","onUpdate:modelValue","options","onFilter"]),e(ce,{label:"Supplier",modelValue:$.filter.suppliers,"onUpdate:modelValue":C=>$.filter.suppliers=C,options:l(n),onFilter:l(f),"map-options":"","emit-value":"","use-input":"",clearable:"",multiple:"","use-chips":""},null,8,["modelValue","onUpdate:modelValue","options","onFilter"])]),_:1},8,["options"])]),_:1})],64)}}},Oy=Object.freeze(Object.defineProperty({__proto__:null,default:Ry},Symbol.toStringTag,{value:"Module"})),Dy={class:"q-gutter-sm"},Il="Laporan Rincian Penjualan",Iy={__name:"Index",setup(c){const s=ge(),m=s.props.options;m.initial_filter.start_date=Ce().startOf("month").toDate(),m.initial_filter.end_date=Ce().endOf("month").toDate();const{filteredCustomers:o,filterCustomersFn:i}=Ma(s.props.customers);return(n,f)=>{const v=J("i-head"),p=J("authenticated-layout");return d(),w(W,null,[e(v,{title:Il}),e(p,null,{title:a(()=>[b(r(Il))]),"left-button":a(()=>[t("div",Dy,[e(ha,{route:n.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>f[0]||(f[0]=[])),default:a(()=>[e(ra,{options:l(m),routeName:"admin.report.sales-order.generate"},{filter:a(({form:u})=>[e(Fe,{modelValue:u.filter.start_date,"onUpdate:modelValue":g=>u.filter.start_date=g,label:"Mulai Tanggal",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue","onUpdate:modelValue"]),e(Fe,{modelValue:u.filter.end_date,"onUpdate:modelValue":g=>u.filter.end_date=g,label:"Sampai Tanggal",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue","onUpdate:modelValue"]),e(ce,{label:"Pelanggan",modelValue:u.filter.customer_ids,"onUpdate:modelValue":g=>u.filter.customer_ids=g,options:l(o),onFilter:l(i),"map-options":"","emit-value":"","use-input":"",clearable:"",multiple:"","use-chips":""},null,8,["modelValue","onUpdate:modelValue","options","onFilter"])]),_:1},8,["options"])]),_:1})],64)}}},Uy=Object.freeze(Object.defineProperty({__proto__:null,default:Iy},Symbol.toStringTag,{value:"Module"})),jy={class:"q-gutter-sm"},Ul="Laporan Supplier",Ey={__name:"Index",setup(c){const m=ge().props.options,o=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),w(W,null,[e(f,{title:Ul}),e(v,null,{title:a(()=>[b(r(Ul))]),"left-button":a(()=>[t("div",jy,[e(ha,{route:i.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>n[0]||(n[0]=[])),default:a(()=>[e(ra,{options:l(m),routeName:"admin.report.supplier.generate"},{filter:a(({form:p})=>[e(ce,{label:"Status",modelValue:p.filter.status,"onUpdate:modelValue":u=>p.filter.status=u,options:o,"map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["options"])]),_:1})],64)}}},Ay=Object.freeze(Object.defineProperty({__proto__:null,default:Ey},Symbol.toStringTag,{value:"Module"})),My={class:"q-gutter-sm"},Ny={class:"col col-md-6 q-pa-xs"},jl="Tambah Retur Penjualan",By={__name:"Create",setup(c){const s=ge(),m=We({code:s.props.data.code}),o=()=>lt({form:m,url:route("admin.sales-order-return.add")});return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),w(W,null,[e(f,{title:jl}),e(v,null,{title:a(()=>[b(r(jl))]),"left-button":a(()=>[t("div",My,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.sales-order-return.index")))})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Ny,[e(Qe,{class:"row",onSubmit:X(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(ie,{autofocus:"",modelValue:l(m).code,"onUpdate:modelValue":n[1]||(n[1]=p=>l(m).code=p),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(m).errors.code,disable:l(m).processing,"error-message":l(m).errors.code,rules:[p=>p&&p.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(m).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(m).processing,onClick:n[2]||(n[2]=p=>l(Y).get(i.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},zy=Object.freeze(Object.defineProperty({__proto__:null,default:By},Symbol.toStringTag,{value:"Module"})),Fy={class:"column"},Ly={class:"bg-grey-2 q-pa-xs"},Hy={class:"text-subtitle1 text-bold text-grey-10"},Ky={class:"text-caption text-grey-8"},Yy={class:"col-12 col-sm-6"},Wy={class:"full-width"},Qy={key:1},Jy={key:0},Gy={key:1},Xy={class:"col-12 col-sm-6",align:"left"},Zy={class:"full-width"},ek={class:"full-width",style:{"border-collapse":"collapse"}},tk={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ak={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},lk={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ok={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},nk={key:0},sk={class:"col-12 col-sm-6"},rk={class:"text-body2 text-grey-7 text-italic"},ik={class:"col-12 col-sm-6"},dk={class:"row justify-end q-gutter-y-xs"},uk={class:"col-12 row justify-between"},mk={class:"text-subtitle2 text-bold"},ck={class:"row justify-end q-gutter-y-xs"},pk={class:"col-12 row justify-between"},fk={class:"text-subtitle2 text-bold"},gk={class:"row justify-end q-gutter-y-xs"},bk={class:"col-12 row justify-between"},vk={class:"text-subtitle2 text-bold"},en={__name:"MainInfoTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=J("i-link"),n=J("my-link");return d(),w("div",Fy,[e(ae,{class:"q-pa-none"},{default:a(()=>{var f,v;return[t("div",Ly,[t("div",Hy," RETUR #"+r(s.data.code),1),t("div",Ky,[b(" Kasir: "+r((f=s.data.cashier)==null?void 0:f.username)+" - "+r((v=s.data.cashier)==null?void 0:v.name)+" | "+r(l(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),w(W,{key:0},[b(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]}),_:1}),e(Te),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",Yy,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",Wy,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),I(i,{key:0,href:m.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[e(V,{class:"inline-icon",name:"person"}),b(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(d(),w("div",Qy,[e(V,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pelanggan Umum "))]))])]),s.data.customer_phone?(d(),w("tr",Jy,[t("td",null,[e(V,{class:"inline-icon",name:"phone"}),b(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(d(),w("tr",Gy,[t("td",null,[e(V,{class:"inline-icon",name:"home_pin"}),b(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",Xy,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Zy,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:m.route("admin.sales-order.detail",{id:s.data.sales_order_id})},{default:a(()=>[b(r(s.data.sales_order_id?s.data.sales_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("table",ek,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(W,null,Oe(s.data.details,f=>(d(),w("tr",{key:f.id},[t("td",tk,[e(i,{href:m.route("admin.product.detail",f.product_id)},{default:a(()=>[b(r(f.product_name),1)]),_:2},1032,["href"])]),t("td",ak,r(l(K)(f.price)),1),t("td",lk,r(f.quantity),1),t("td",ok,r(l(K)(f.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),w("tr",nk,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Te),e(ae,{class:"row",align:"left"},{default:a(()=>[t("div",sk,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",rk,r(s.data.notes?s.data.notes:"-"),1)]),t("div",ik,[t("div",dk,[t("div",uk,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",mk,r(l(K)(s.data.grand_total)),1)])]),t("div",ck,[t("div",pk,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",fk,r(l(K)(parseFloat(-s.data.total_refunded))),1)])]),t("div",gk,[t("div",bk,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",vk,r(l(K)(s.data.remaining_refund)),1)])])])]),_:1})])}}},_k=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),yk={key:0,class:"text-center q-mb-md text-grey-8"},kk={class:"text-subtitle2 text-weight-medium"},wk={class:"text-h5 text-center text-primary q-pb-md"},hk={class:"text-center q-mt-md"},$k={key:0,class:"text-h6 text-negative text-weight-bold"},xk={key:1,class:"text-h6 text-positive text-weight-bold"},tn={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=O(!1),f=O({method:"cash",amount:m.total,notes:null}),v=i.props.data.customer,p=G(()=>[...v?[{label:"Refund ke Wallet",value:"wallet"}]:[],{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(C=>({label:C.name,value:C.id}))]),u=G(()=>m.total-(f.value.amount||0)),g=G(()=>{const C=f.value.amount||0;return C<=0?"Jumlah pembayaran harus lebih dari 0.":C>m.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=G(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const C={id:f.value.method,amount:f.value.amount,notes:f.value.notes};o("accepted",C),n.value=!1},$=()=>{f.value.amount=m.total,f.value.method="cash",f.value.notes=null};return(C,D)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":D[4]||(D[4]=F=>C.$emit("update:modelValue",F)),onBeforeShow:$},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>D[5]||(D[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[l(v)?(d(),w("div",yk,[t("div",kk,[b(r(l(v).code)+" ",1),D[6]||(D[6]=t("br",null,null,-1)),b(" "+r(l(v).name)+" ",1),D[7]||(D[7]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(l(K)(l(v).wallet_balance)),1)])])):k("",!0),t("div",wk," Total: Rp. "+r(l(K)(c.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":D[0]||(D[0]=F=>f.value.method=F),options:p.value,label:f.value.method=="wallet"?"Tujuan":"Sumber Dana",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","label","disable"]),e(Ee,{modelValue:f.value.amount,"onUpdate:modelValue":D[1]||(D[1]=F=>f.value.amount=F),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:f.value.notes,"onUpdate:modelValue":D[2]||(D[2]=F=>f.value.notes=F),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",hk,[u.value>0?(d(),w("div",$k," Sisa Refund: Rp. "+r(l(K)(u.value)),1)):(d(),w("div",xk," Refund Lunas "))])]),_:1}),e(et,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:D[3]||(D[3]=F=>C.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Sk=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),Vk={class:"column"},qk={class:"row"},Ck={class:"full-width",style:{"border-collapse":"collapse"}},Tk={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Pk={class:"row items-center q-gutter-x-sm"},Rk={class:"text-weight-bold"},Ok={class:"row items-center q-gutter-x-sm q-mt-xs"},Dk={class:"text-caption text-grey-6"},Ik={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Uk={class:"text-caption text-grey-6"},jk={class:"q-mt-xs"},Ek={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ak={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Mk={key:0},Nk={class:"text-right q-pa-sm"},an={__name:"RefundTab",props:{data:Object},setup(c){const s=c,m=ke(),o=O(!1),i=()=>{o.value=!0},n=G(()=>s.data.remaining_refund),f=async p=>{const u={order_id:s.data.id,...p};m.loading.show({message:"Memproses pembayaran..."});try{const g=await Re.post(route("admin.sales-order-return.add-refund"),u);m.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Y.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(g){let _="Gagal memproses refund.";g.response&&g.response.data&&g.response.data.message?_=g.response.data.message:g.message&&(_=g.message),m.notify({message:_,color:"negative",icon:"error"})}finally{m.loading.hide()}},v=p=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Re.post(route("admin.sales-order-return.delete-refund",{id:p.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Y.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(u){let g="Gagal menghapus refund pembayaran.";u.response&&u.response.data&&u.response.data.message?g=u.response.data.message:u.message&&(g=u.message),m.notify({message:g,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(p,u)=>(d(),w(W,null,[t("div",Vk,[e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("div",qk,[p.$can("admin.sales-order-return.add-refund")?(d(),I(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:u[0]||(u[0]=X(g=>i(),["stop"]))})):k("",!0)]),t("table",Ck,[u[5]||(u[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(W,null,Oe(s.data.refunds,g=>(d(),w("tr",{key:g.id},[t("td",Tk,[t("div",Pk,[e(V,{name:"tag",size:"xs",color:"grey-7"}),t("span",Rk,r(g.code),1)]),t("div",Ok,[e(V,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Dk,r(l(ve)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),w("div",Ik,[e(V,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Uk,r(g.account.name),1)])):k("",!0),t("div",jk,[e(ot,{label:p.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Ek,r(l(K)(g.amount)),1),t("td",Ak,[p.$can("admin.sales-order-return.delete-refund")?(d(),I(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>v(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(d(),w("tr",Mk,u[2]||(u[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[u[3]||(u[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund",-1)),t("th",Nk,r(l(K)(parseFloat(-s.data.total_refunded))),1),u[4]||(u[4]=t("th",null,null,-1))])])])]),_:1})]),e(tn,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=g=>o.value=g),total:n.value,customer:s.data.customer,onAccepted:f},null,8,["modelValue","total","customer"])],64))}},Bk=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),zk={class:"q-gutter-sm"},Fk={class:"col col-lg-6 q-pa-xs",align:"center"},El="Retur Penjualan",Lk={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=ge(),o=m.props.data,i=O(s.get("preview")||!1),f=O(s.get("tab")||"main-info");ye(()=>{pt(()=>{const p=s.get("print_size");p&&v(p)})});const v=p=>{window.open(route("admin.sales-order-return.print",{id:m.props.data.id,size:p}),"_self")};return(p,u)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),w(W,null,[e(g,{title:El}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(El))])]),"left-button":a(()=>[t("div",zk,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>l(Y).get(p.route("admin.sales-order-return.index")))})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=y=>v("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[2]||(u[2]=y=>v("a4"))}),i.value?k("",!0):(d(),I(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[3]||(u[3]=y=>l(Y).get(p.route("admin.sales-order.add")))}))]),default:a(()=>[e(Ve,{class:"row justify-center print-visible"},{default:a(()=>[t("div",Fk,[e(ue,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(Vt,{modelValue:f.value,"onUpdate:modelValue":u[4]||(u[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(nt,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(d(),I(nt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Te),e(qt,{modelValue:f.value,"onUpdate:modelValue":u[5]||(u[5]=y=>f.value=y),animated:""},{default:a(()=>[e(st,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(en,{data:l(o)},null,8,["data"])]),_:1}),e(st,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(an,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Hk=Object.freeze(Object.defineProperty({__proto__:null,default:Lk},Symbol.toStringTag,{value:"Module"})),Kk={class:"text-weight-medium"},Yk={class:"text-caption text-grey-6 elipsis"},Wk={class:"column items-end"},Qk={class:"text-caption text-grey-6 text-italic"},ln={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=ke(),m=tt(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:ze({height:l(m)})},{header:a(f=>[e(Pe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(W,null,Oe(f.cols,v=>(d(),I(Jt,{key:v.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Pe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left wrap-column"},{default:a(()=>[t("div",Kk,r(f.row.product_name),1),t("div",Yk,r(f.row.product_barcode),1),f.row.notes?(d(),I(he,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal_price",props:f,class:"text-right"},{default:a(()=>[t("div",Wk,[t("div",null,r(l(K)(f.row.subtotal_price)),1),t("div",Qk,r(l(K)(f.row.quantity))+" x Rp. "+r(l(K)(f.row.price)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Jk=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),Gk={class:"row items-center no-wrap"},Xk={class:"col-auto"},on={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=G(()=>o.item.quantity*o.item.price),v=g=>{g.stopPropagation(),g.preventDefault()},p=g=>{o.modelValue&&(g.key==="Enter"?(n(),i("update:modelValue",!1),v(g)):g.key==="Escape"&&(i("update:modelValue",!1),v(g)))};return ye(()=>{window.addEventListener("keydown",p)}),yt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item}),(g,_)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>g.$emit("update:modelValue",y))},{default:a(()=>[e(ue,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Gk,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Xk,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>g.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(ie,{modelValue:c.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=y=>c.item.product_name=y),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=y=>c.item.quantity=y),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Ee,{modelValue:c.item.price,"onUpdate:modelValue":_[3]||(_[3]=y=>c.item.price=y),label:"Harga","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:f.value,"onUpdate:modelValue":_[4]||(_[4]=y=>f.value=y),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ie,{modelValue:c.item.notes,"onUpdate:modelValue":_[5]||(_[5]=y=>c.item.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(et,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Zk=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"})),ew={key:0,class:"q-select__selected-item"},nn={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(c,{expose:s,emit:m}){const o=O(null),i=c,n=m,f=O([]);let v=null;const p=O(i.modelValue);ye(()=>{i.initialData&&(p.value=i.initialData)}),He(p,_=>{n("update:modelValue",_),n("customerSelected",_)}),He(()=>i.modelValue,_=>{p.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const g=(_,y)=>{if(_.length<i.minLength){y(()=>{f.value=[]});return}v&&clearTimeout(v),v=setTimeout(()=>{Re.get(`/web-api/customers?q=${_}`).then($=>{y(()=>{f.value=$.data.data})}).catch($=>{console.error("Gagal mengambil data pelanggan:",$),y(()=>{f.value=[]})})},100)};return(_,y)=>(d(),I(ce,{class:xe(c.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=$=>p.value=$),"use-input":"","input-debounce":"500",label:c.label,options:f.value,onFilter:g,clearable:"",error:c.error,behavior:"menu","error-message":c.errorMessage,disable:c.disable,"hide-bottom-space":"",outlined:c.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a($=>[e(le,Aa(mo($.itemProps)),{default:a(()=>[e(z,null,{default:a(()=>[e(be,null,{default:a(()=>[b(r($.opt.name)+" ("+r($.opt.code)+")",1)]),_:2},1024),$.opt.phone?(d(),I(be,{key:0,class:"text-grey-8 q-ml-sm q-mt-xs"},{default:a(()=>[e(V,{name:"phone",class:"inline-icon"}),b(r($.opt.phone),1)]),_:2},1024)):k("",!0),$.opt.address?(d(),I(be,{key:1,class:"text-grey-8 q-ml-sm"},{default:a(()=>[e(V,{name:"home_pin",class:"inline-icon"}),b(r($.opt.address),1)]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1040)]),"selected-item":a($=>[$.opt?(d(),w("div",ew,r($.opt.name)+" ("+r($.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},tw={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ae,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(et,{align:"center"},{default:a(()=>[te(e(E,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},sn=ft(tw,[["__scopeId","data-v-22783525"]]),aw=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"})),lw={class:"row items-center no-wrap"},ow={class:"col text-subtite text-bold text-grey-8"},nw={class:"col-auto"},rn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=u=>{u.stopPropagation(),u.preventDefault()},v=u=>{o.modelValue&&(u.key==="Enter"?(n(),f(u)):u.key==="Escape"&&(i("update:modelValue",!1),f(u)))};return ye(()=>{window.addEventListener("keydown",v)}),yt(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(u,g)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>u.$emit("update:modelValue",_))},{default:a(()=>[e(ue,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",lw,[t("div",ow," Edit "+r(c.data.code),1),t("div",nw,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(Fe,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(ie,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>u.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ie,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(et,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},sw=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"})),rw={class:"q-gutter-sm"},iw={class:"row q-col-gutter-none full-width"},dw={class:"col-sm-6 col-12 col q-pa-sm"},uw={class:"row full-width"},mw={class:"col-sm-6 col-12"},cw={class:"row q-ml-sm items-end"},pw={class:"row col grow"},fw={class:"col-12 q-px-sm column"},gw={class:"row items-start q-col-gutter-none q-px-sm"},bw={key:0,class:"col"},vw={class:"text-caption text-grey-6 q-mt-xs"},_w={key:0,class:"text-caption text-grey-8 q-mt-xs"},yw={class:"text-italic"},kw={key:1,class:"col"},ww={class:"text-grey-8"},hw={class:"col"},$w={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},xw={class:"text-h4 text-weight-bold"},Sw={class:"row q-col-gutter-xs q-py-xs q-px-sm"},Vw={class:"col"},qw={__name:"Editor",setup(c){const s=ke(),m=ge(),o=O(!0),i=O(null),n=O(null),f=O(null),v=O(!1),p=O(null),u="Retur #"+m.props.data.code,g=O(m.props.data.customer),_=O(""),y=O(!1),$=O(!1),C=O(!1),D=O(!1),F=O(null),A=De({id:m.props.data.id,code:m.props.data.code,customer_id:m.props.data.customer_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),T=G(()=>A.items.reduce((H,L)=>H+L.price*L.quantity,0)),N=H=>isNaN(H)||H<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,M=H=>isNaN(H)||H<0?(gt("Harga tidak valid.","top"),!1):!0,R=H=>!H||H.length==0?(gt("Barcode tidak valid.","top"),!1):!0,B=H=>{var L;(L=_.value)!=null&&L.endsWith("*")?_.value+=H.name:_.value=H.name},h=async()=>{if(y.value)return;const H=_.value.trim();if(H.length===0){$.value=!0;return}const L=H.split("*");let pe=1,ne="",Z=null;if(L.length===1)ne=L[0];else if(L.length<=3)pe=parseInt(L[0]),ne=L[1],L.length===3&&(Z=parseFloat(L[2]));else{gt("Input tidak valid.","top");return}if(ne.length===0){$.value=!0;return}!R(ne)&&!N(pe)&&!M(Z)||(y.value=!0,await Re.post(route("admin.sales-order-return.add-item"),{order_id:A.id,product_code:ne,qty:pe,price:Z,merge:o.value}).then(de=>{const ee=de.data.data.item;let fe=-1;de.data.data.mergeItem&&(fe=A.items.findIndex(qe=>qe.id===ee.id)),fe===-1?A.items.push(ee):A.items[fe]=ee,_.value="",Z!==null&&Z!==parseFloat(ee.price)&&gt("Harga tidak dapat diubah!","top")}).catch(de=>{var ee,fe;mt((fe=(ee=de.response)==null?void 0:ee.data)==null?void 0:fe.message,"top"),console.error("Gagal mengambil data produk:",de)}),y.value=!1,pt(()=>{var de;(de=i.value)==null||de.focus()}))},x=H=>{F.value=Object.create(H),C.value=!0},P=H=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${H.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{y.value=!0,Re.post(route("admin.sales-order-return.remove-item"),{id:H.id}).then(()=>{const L=A.items.findIndex(pe=>pe.id===H.id);L!==-1&&(A.items.splice(L,1)[0],ct("Item telah dihapus","top"))}).catch(L=>{var pe,ne;mt(((ne=(pe=L==null?void 0:L.response)==null?void 0:pe.data)==null?void 0:ne.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{y.value=!1})})},q=()=>{y.value=!0;const H=n.value.getCurrentItem(),L={id:H.id,qty:H.quantity,price:H.price};H.notes&&(L.notes=H.notes),Re.post(route("admin.sales-order-return.update-item"),L).then(pe=>{const ne=pe.data.data,Z=A.items.findIndex(de=>de.id===ne.id);Z!==-1&&(A.items[Z]=ne,ct("Item telah diperbarui","top")),C.value=!1}).catch(pe=>{var ne,Z;mt(((Z=(ne=pe==null?void 0:pe.response)==null?void 0:ne.data)==null?void 0:Z.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(pe)}).finally(()=>{y.value=!1})};ye(()=>{const H=L=>{v.value||C.value||$.value||D.value||(L.key==="F1"?(L.preventDefault(),v.value=!0):L.key==="F2"?(L.preventDefault(),f.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F12"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),U()):(L.key==="F5"||L.key==="F6"||L.key==="F7")&&L.preventDefault())};document.addEventListener("keydown",H),yt(()=>{document.removeEventListener("keydown",H)}),pt(()=>{var L;(L=p==null?void 0:p.value)==null||L.hideDrawer()})});const S=async()=>{y.value=!0;const H={id:A.id,customer_id:A.customer_id??null,datetime:Wt(A.datetime),notes:A.notes};await Re.post(route("admin.sales-order-return.update"),H).then(L=>{const pe=L.data.data.id;A.customer_id=pe.customer_id}).catch(L=>{var pe,ne;mt(((ne=(pe=L==null?void 0:L.response)==null?void 0:pe.data)==null?void 0:ne.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{y.value=!1})},U=H=>{if(A.items.length===0){ct("Item masih kosong","top");return}ht.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${A.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{y.value=!0,Re.post(route("admin.sales-order-return.close",{id:A.id})).then(L=>{ct("Transaksi selesai"),Y.get(route("admin.sales-order-return.detail",{id:A.id}))}).catch(L=>{var pe,ne;mt((ne=(pe=L.response)==null?void 0:pe.data)==null?void 0:ne.message),console.error(L)}).finally(()=>{y.value=!1})})},j=()=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${A.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Re.post(route("admin.sales-order-return.cancel",{id:A.id}),{id:A.id}).then(()=>{ct("Transaksi telah dibatalkan."),Y.visit(route("admin.sales-order-return.detail",{id:A.id}))}).catch(H=>{var pe,ne;const L=((ne=(pe=H.response)==null?void 0:pe.data)==null?void 0:ne.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(H)})})},oe=()=>{window.open(route("admin.sales-order-return.detail",{id:A.id})+"?preview=1","_blank")},re=G(()=>g.value?g.value.wallet_balance>=T.value:!0);return(H,L)=>{const pe=J("i-head"),ne=J("authenticated-layout");return d(),w(W,null,[e(pe,{title:u}),e(ne,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",rw,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=Z=>l(Y).get(H.route("admin.sales-order-return.index")))})])]),"right-button":a(()=>[l(s).screen.gt.sm?(d(),I(wa,{key:0})):k("",!0)]),default:a(()=>[e(Ve,{class:"bg-grey-2 column fit"},{default:a(()=>[e(ue,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",iw,[t("div",dw,[t("div",uw,[e(nn,{ref_key:"customerAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:g.value,"onUpdate:modelValue":L[1]||(L[1]=Z=>g.value=Z),label:"Pelanggan",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),g.value?(d(),I(ka,{key:0,party:g.value,"is-valid-wallet-balance":re.value},null,8,["party","is-valid-wallet-balance"])):k("",!0)])]),t("div",mw,[e(ya,{ref_key:"userInputRef",ref:i,modelValue:_.value,"onUpdate:modelValue":L[2]||(L[2]=Z=>_.value=Z),onKeyup:L[3]||(L[3]=zt(X(Z=>h(),["prevent"]),["enter"])),onScanSuccess:L[4]||(L[4]=Z=>h()),onSend:L[5]||(L[5]=Z=>h()),onSearch:L[6]||(L[6]=Z=>$.value=!0),loading:y.value,disable:y.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",cw,[e(Ct,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[7]||(L[7]=Z=>o.value=Z),label:"Gabungkan item",disable:y.value},null,8,["modelValue","disable"])])])]),t("div",pw,[t("div",fw,[e(ln,{items:A.items,onUpdateQuantity:L[8]||(L[8]=({id:Z,value:de})=>H.updateQuantity(Z,de)),onRemoveItem:P,onEditItem:x,"is-processing":y.value},null,8,["items","is-processing"])])]),t("div",gw,[l(s).screen.gt.sm?(d(),w("div",bw,[t("div",vw,r(A.items.length)+" item(s) ",1),A.notes?(d(),w("div",_w,[L[20]||(L[20]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",yw,[e(he,{text:A.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",kw,[t("div",ww,[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(r(l(m).props.data.sales_order.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(r(l(ve)(A.datetime)),1)])])])):k("",!0),t("div",hw,[t("div",$w,[L[22]||(L[22]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",xw,[L[21]||(L[21]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(l(K)(T.value)),1)])])])]),t("div",Sw,[t("div",Vw,[e(E,{class:"full-width",label:"Selesai",color:"primary",icon:"payment",onClick:L[9]||(L[9]=Z=>U()),disable:!H.$can("admin.sales-order-return.close")||y.value||A.items.length===0||A.status!=="draft",loading:y.value},null,8,["disable","loading"])]),t("div",null,[e(E,{icon:"more_vert",color:"grey",onClick:L[13]||(L[13]=X(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[te((d(),I(le,{clickable:"",onClick:L[10]||(L[10]=X(Z=>D.value=!0,["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>L[23]||(L[23]=[b("Edit Rincian")])),_:1})]),_:1})),[[se],[me]]),te((d(),I(le,{clickable:"",onClick:L[11]||(L[11]=X(Z=>oe(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"preview"})]),_:1}),e(z,null,{default:a(()=>L[24]||(L[24]=[b("Pratinjau")])),_:1})]),_:1})),[[se],[me]]),te((d(),I(le,{clickable:"",onClick:L[12]||(L[12]=X(Z=>j(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:a(()=>L[25]||(L[25]=[b(" Batalkan ")])),_:1})]),_:1})),[[se],[me]]),e(Te)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(on,{ref_key:"itemEditorRef",ref:n,modelValue:C.value,"onUpdate:modelValue":L[14]||(L[14]=Z=>C.value=Z),item:F.value,onSave:L[15]||(L[15]=Z=>q()),"is-processing":y.value},null,8,["modelValue","item","is-processing"]),e(_a,{modelValue:$.value,"onUpdate:modelValue":L[16]||(L[16]=Z=>$.value=Z),onProductSelected:B},null,8,["modelValue"]),e(rn,{modelValue:D.value,"onUpdate:modelValue":L[17]||(L[17]=Z=>D.value=Z),data:A,onSave:L[18]||(L[18]=Z=>S()),"is-processing":y.value},null,8,["modelValue","data","is-processing"]),e(sn,{modelValue:v.value,"onUpdate:modelValue":L[19]||(L[19]=Z=>v.value=Z)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},Cw=Object.freeze(Object.defineProperty({__proto__:null,default:qw},Symbol.toStringTag,{value:"Module"})),Tw={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Pw={class:"q-pa-xs"},Rw={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ow={key:0},Dw={key:1},Iw={key:2},Uw={key:3},jw={key:0},Ew={key:1},Aw={key:0},Mw={key:0},Nw={key:1},Bw={class:"flex justify-end"},Al="Retur Penjualan",zw={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=Ce().startOf("month").toDate(),u=Ce().endOf("month").toDate(),g=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.SALES_ORDER_RETURN_STATUSES)],_=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES)],y=De({search:"",status:"all",refund_status:"all",start_date:p,end_date:u,...Ne()}),$=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"code",label:"Info Order",field:"code",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];ye(()=>{M()});const D=h=>{if(h.status=="draft"){F(h);return}A(h)},F=h=>{Y.get(route("admin.sales-order-return.edit",h.id))},A=h=>{Y.get(route("admin.sales-order-return.detail",h.id))},T=h=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${h.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Re.post(route("admin.sales-order-return.cancel",{id:h.id}),{id:h.id}).then(x=>{const P=x.data.data,q=o.value.findIndex(S=>S.id===P.id);if(q===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[q].status="canceled",s.notify({message:x.data.message,position:"bottom"})}).catch(x=>{var q,S;const P=((S=(q=x.response)==null?void 0:q.data)==null?void 0:S.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:P,color:"warning",position:"bottom"}),console.error(x)})})},N=h=>at({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${h.code}?`,url:route("admin.sales-order-return.delete",h.id),fetchItemsCallback:M,loading:i}),M=(h=null)=>{const x={...y,start_date:Ce(y.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Ce(y.end_date).format("YYYY-MM-DD HH:mm:ss")};Be({pagination:$,filter:x,props:h,rows:o,url:route("admin.sales-order-return.data"),loading:i,tableRef:n})},R=()=>{M()},B=G(()=>s.screen.gt.sm?C:C.filter(h=>h.name==="code"||h.name==="action"));return(h,x)=>{const P=J("i-head"),q=J("authenticated-layout");return d(),w(W,null,[e(P,{title:Al}),e(q,null,Ae({title:a(()=>[b(r(Al))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=S=>m.value=!m.value)},null,8,["icon"]),h.$can("admin.sales-order-return.edit")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=S=>l(Y).get(h.route("admin.sales-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",Pw,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:$.value,"onUpdate:pagination":x[10]||(x[10]=S=>$.value=S),filter:y.search,loading:i.value,columns:B.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:l(v)}),onRequest:M,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:S,message:U,filter:j})=>[t("div",Rw,[t("span",null,r(U)+" "+r(j?" with term "+j:""),1)])]),body:a(S=>[e(Pe,{props:S,class:"cursor-pointer",onClick:X(U=>D(S.row),["prevent"])},{default:a(()=>[e(Q,{key:"code",props:S,class:"wrap-column"},{default:a(()=>{var U,j,oe;return[t("div",null,[e(V,{name:"tag"}),b(" "+r(S.row.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(r(l(ve)(S.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[S.row.cashier?(d(),w("div",Ow,[e(V,{name:"person",class:"inline-icon"}),b(" Kasir: "+r((U=S.row.cashier)==null?void 0:U.username),1)])):k("",!0),S.row.cashier_session?(d(),w("div",Dw,[e(V,{name:"point_of_sale",class:"inline-icon"}),b(" Terminal: "+r((oe=(j=S.row.cashier_session)==null?void 0:j.cashier_terminal)==null?void 0:oe.name),1)])):k("",!0),S.row.customer?(d(),w("div",Iw,[e(V,{name:"person",class:"inline-icon"}),e(fa,{href:h.route("admin.customer.detail",{id:S.row.customer.id}),onClick:x[7]||(x[7]=X(()=>{},["stop"]))},{default:a(()=>[b(" "+r(S.row.customer.code)+" - "+r(S.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(l(K)(S.row.grand_total)),1),S.row.notes?(d(),w("div",Uw,[e(V,{name:"notes"}),b(" "+r(S.row.notes),1)])):k("",!0)],64)),t("div",null,[e(At,{status:S.row.status,statuses:h.$CONSTANTS.SALES_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(At,{status:S.row.refund_status,statuses:h.$CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Q,{key:"cashier_id",props:S},{default:a(()=>{var U,j,oe;return[S.row.cashier?(d(),w("div",jw,[e(V,{name:"person",class:"inline-icon"}),b(" "+r((U=S.row.cashier)==null?void 0:U.username),1)])):k("",!0),S.row.cashier_session?(d(),w("div",Ew,[e(V,{name:"point_of_sale",class:"inline-icon"}),b(" "+r((oe=(j=S.row.cashier_session)==null?void 0:j.cashier_terminal)==null?void 0:oe.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Q,{key:"customer_id",props:S},{default:a(()=>[S.row.customer?(d(),w("div",Aw,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(S.row.customer_code)+" - "+r(S.row.customer_name),1)]),S.row.customer_phone?(d(),w("div",Mw,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(S.row.customer_phone),1)])):k("",!0),S.row.customer_address?(d(),w("div",Nw,[e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(S.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"total",props:S},{default:a(()=>[b(r(l(K)(S.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:S},{default:a(()=>[e(he,{text:S.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:S,onClick:x[9]||(x[9]=X(()=>{},["stop"]))},{default:a(()=>[t("div",Bw,[h.$can("admin.sales-order-return.detail")||h.$can("admin.sales-order-return.edit")||h.$can("admin.sales-order-return.cancel")||h.$can("admin.sales-order-return.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[8]||(x[8]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[S.row.status!="draft"&&h.$can("admin.sales-order-return.detail")?te((d(),I(le,{key:0,onClick:X(U=>A(S.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"visibility"})]),_:1}),e(z,null,{default:a(()=>x[11]||(x[11]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),S.row.status=="draft"&&h.$can("admin.sales-order-return.edit")?te((d(),I(le,{key:1,onClick:X(U=>F(S.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>x[12]||(x[12]=[b(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),S.row.status=="draft"&&h.$can("admin.sales-order-return.cancel")?te((d(),I(le,{key:2,onClick:X(U=>T(S.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"cancel"})]),_:1}),e(z,null,{default:a(()=>x[13]||(x[13]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),e(Te),h.$can("admin.sales-order-return.delete")?te((d(),I(le,{key:3,onClick:X(U=>N(S.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>x[14]||(x[14]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Tw,[e(Fe,{modelValue:y.start_date,"onUpdate:modelValue":[x[2]||(x[2]=S=>y.start_date=S),R],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Fe,{modelValue:y.end_date,"onUpdate:modelValue":[x[3]||(x[3]=S=>y.end_date=S),R],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:y.status,"onUpdate:modelValue":[x[4]||(x[4]=S=>y.status=S),R],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:y.refund_status,"onUpdate:modelValue":[x[5]||(x[5]=S=>y.refund_status=S),R],options:_,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":x[6]||(x[6]=S=>y.search=S),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Fw=Object.freeze(Object.defineProperty({__proto__:null,default:zw},Symbol.toStringTag,{value:"Module"})),Lw={key:0,class:"text-center q-mb-md text-grey-8"},Hw={class:"text-subtitle2 text-weight-medium"},Kw={class:"text-h5 text-center text-primary q-pb-md"},Yw={class:"q-mb-md flex flex-center"},Ww={key:1},Qw={class:"col-6"},Jw={class:"col-6"},Gw={class:"row"},Xw={class:"text-center q-mt-md"},Zw={key:0,class:"text-h6 text-negative text-weight-bold"},e0={key:1,class:"text-h6 text-green-8 text-weight-bold"},t0={key:2,class:"text-h6 text-positive text-weight-bold"},a0={key:2},l0={class:"text-h6 text-negative text-center"},o0={key:3},n0={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=O(!1),f=O("cash"),v=O(new Date),p=O([]),u=O([]),g=De([{id:"cash",amount:0}]),_=i.props.settings.default_payment_mode,y=G(()=>[{label:"Laci Kasir",value:"cash"},...m.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(q=>({label:q.name,value:q.id}))]),$=G(()=>g.reduce((q,S)=>q+(S.amount||0),0)),C=G(()=>m.total-$.value),D=G(()=>{if(!m.customer)return!0;const q=g.find(U=>U.id==="wallet");return(q?q.amount:0)<=m.customer.wallet_balance}),F=new Date,A=it.addToDate(new Date,{days:30}),T=G(()=>[q=>!!q||"Tanggal jatuh tempo harus diisi",q=>it.isBetweenDates(q,F,A,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),N=G(()=>{if(f.value==="debt")return!!m.customer&&T.value.every(oe=>oe(v.value)===!0);const q=D.value,S=g.some(oe=>(oe.amount||0)>0),U=g.every(oe=>(oe.amount||0)>=0),j=C.value<=0;return q&&S&&U&&j}),M=()=>{if(g.length<3){const q=g.length;g.push({id:"cash",amount:0}),pt(()=>{const S=p.value[q];S&&(S.focus(),S.showPopup())})}},R=q=>{if(g.length>1){const S=g.findIndex(U=>U.id===q);S!==-1&&g.splice(S,1)}},B=(q,S="cash")=>{f.value=q,v.value=new Date,g.splice(0,g.length),q==="cash"&&(g.splice(0,g.length,{id:S,amount:m.total}),pt(()=>{u.value.length>0&&u.value[0]&&(u.value[0].focus(),u.value[0].select())}))},h=()=>{if(!N.value)return;n.value=!0;let q={total:m.total,is_debt:f.value==="debt"};if(f.value==="debt")q.due_date=it.formatDate(v.value,"YYYY-MM-DD"),q.payments=[];else{const S=$.value,U=S>m.total?S-m.total:0,j=C.value>0?C.value:0;q.payments=g,q.remaining_debt=j,q.change=U}o("accepted",q),n.value=!1},x=()=>{B("cash",m.customer?_:"cash")};ye(()=>{const q=S=>{m.modelValue&&S.ctrlKey&&S.key==="Enter"&&(S.preventDefault(),h())};document.addEventListener("keydown",q),yt(()=>{document.removeEventListener("keydown",q)})});const P=(q,S)=>{pt(()=>{u.value[S]&&(u.value[S].focus(),u.value[S].select())})};return(q,S)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":S[3]||(S[3]=U=>q.$emit("update:modelValue",U)),onBeforeShow:x},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>S[4]||(S[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[c.customer?(d(),w("div",Lw,[t("div",Hw,[b(" Username: "+r(c.customer.code)+" ",1),S[5]||(S[5]=t("br",null,null,-1)),b(" Nama: "+r(c.customer.name),1),S[6]||(S[6]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(l(K)(c.customer.wallet_balance)),1)])])):k("",!0),t("div",Kw," Total: Rp. "+r(l(K)(c.total)),1),t("div",Yw,[e(l(Bt),{modelValue:f.value,"onUpdate:modelValue":[S[0]||(S[0]=U=>f.value=U),B],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="cash"?(d(),w("div",Ww,[(d(!0),w(W,null,Oe(g,(U,j)=>(d(),w("div",{key:j,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Qw,[e(l(ce),{modelValue:U.id,"onUpdate:modelValue":[oe=>U.id=oe,oe=>P(oe,j)],options:y.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:oe=>p.value[j]=oe},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",Jw,[e(Ee,{modelValue:U.amount,"onUpdate:modelValue":oe=>U.amount=oe,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:U.id==="wallet"&&!D.value,"error-message":U.id==="wallet"&&!D.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:oe=>u.value[j]=oe},Ae({_:2},[g.length>1?{name:"append",fn:a(()=>[e(V,{size:"xs",name:"close",class:"cursor-pointer",onClick:oe=>R(U.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Gw,[e(E,{disable:!(g.length<3&&C.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:M,size:"sm"},null,8,["disable"])]),t("div",Xw,[C.value>0?(d(),w("div",Zw," Sisa Tagihan: Rp. "+r(l(K)(C.value)),1)):C.value<0?(d(),w("div",e0," Kembalian: Rp. "+r(l(K)(Math.abs(C.value))),1)):(d(),w("div",t0," Tagihan Terbayar "))])])):f.value==="debt"&&c.customer?(d(),w("div",a0,[e(sa,{outlined:"",modelValue:v.value,"onUpdate:modelValue":S[1]||(S[1]=U=>v.value=U),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(F),"max-date":l(A),rules:T.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",l0," Total Utang: Rp. "+r(l(K)(c.total)),1)])):f.value==="debt"&&!c.customer?(d(),w("div",o0,S[7]||(S[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(et,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:S[2]||(S[2]=U=>q.$emit("update:modelValue",!1)),class:"col"}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:h,disable:n.value||!N.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},s0=Object.freeze(Object.defineProperty({__proto__:null,default:n0},Symbol.toStringTag,{value:"Module"})),r0={key:0},i0={style:{float:"right"}},d0={key:1},u0={style:{float:"right"}},m0={key:2},c0={style:{float:"right"}},p0={key:3},f0={style:{float:"right"}},g0={style:{float:"right"}},b0={class:"q-gutter-sm"},v0={class:"q-my-md"},_0={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=O(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ae,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(d(),w("tr",r0,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ")),t("div",i0,r(l(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",d0,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ")),t("div",u0,r(l(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",m0,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ")),t("div",c0,r(l(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",p0,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ")),t("span",f0,r(l(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ")),t("div",g0,r(l(K)(c.payment.change)),1)])])])])]),_:1}),e(et,{align:"center"},{default:a(()=>[t("div",b0,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",v0,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},y0=ft(_0,[["__scopeId","data-v-a3bb29e0"]]),k0=Object.freeze(Object.defineProperty({__proto__:null,default:y0},Symbol.toStringTag,{value:"Module"})),w0={class:"column"},h0={class:"bg-grey-2 q-pa-xs"},$0={class:"text-subtitle1 text-bold text-grey-10"},x0={class:"text-caption text-grey-8"},S0={class:"col-12 col-sm-6"},V0={class:"full-width"},q0={key:1},C0={key:0},T0={key:1},P0={class:"col-12 col-sm-6",align:"left"},R0={class:"full-width"},O0={key:0};const D0={key:2},I0={class:"full-width",style:{"border-collapse":"collapse"}},U0={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},j0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},E0={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},A0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},M0={key:0},N0={class:"col-12 col-sm-6"},B0={class:"text-body2 text-grey-7 text-italic"},z0={class:"col-12 col-sm-6"},F0={class:"row justify-end q-gutter-y-xs"},L0={class:"col-12 row justify-between"},H0={class:"text-subtitle2 text-bold"},K0={key:0,class:"row justify-end q-gutter-y-xs"},Y0={class:"col-12 row justify-between"},W0={class:"text-subtitle2 text-bold"},Q0={class:"row justify-end q-gutter-y-xs"},J0={class:"col-12 row justify-between"},G0={class:"text-subtitle2 text-bold"},X0={key:1,class:"row justify-end q-gutter-y-xs"},Z0={class:"col-12 row justify-between"},e2={class:"text-subtitle2 text-bold"},t2={key:2,class:"row justify-end q-gutter-y-xs"},a2={class:"col-12 row justify-between"},l2={class:"text-subtitle2 text-bold"},dn={__name:"InvoiceTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=J("i-link");return d(),w("div",w0,[e(ae,{class:"q-pa-none"},{default:a(()=>[t("div",h0,[t("div",$0," INVOICE #"+r(s.data.code),1),t("div",x0,[b(" Kasir: "+r(s.data.cashier.username)+" - "+r(s.data.cashier.name)+" | "+r(l(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),w(W,{key:0},[b(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Te),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",S0,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",V0,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),w(W,{key:0},[e(V,{class:"inline-icon",name:"person"}),e(i,{href:m.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[b(r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])],64)):(d(),w("div",q0,[e(V,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pelanggan Umum "))]))])]),s.data.customer_phone?(d(),w("tr",C0,[t("td",null,[e(V,{class:"inline-icon",name:"phone"}),e(Kt,{phone:s.data.customer_phone},null,8,["phone"])])])):k("",!0),s.data.customer_address?(d(),w("tr",T0,[t("td",null,[e(V,{class:"inline-icon",name:"home_pin"}),(d(),w(W,{key:0},[b(r(s.data.customer_address),1)],64))])])):k("",!0)])])]),t("div",P0,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",R0,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.$CONSTANTS.SALES_ORDER_STATUSES[s.data.status]),1)]),s.data.status=="closed"?(d(),w("tr",O0,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)])):k("",!0),k("",!0),s.data.due_date?(d(),w("tr",D0,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(aa)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("table",I0,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(W,null,Oe(s.data.details,n=>(d(),w("tr",{key:n.id},[t("td",U0,[e(i,{href:m.route("admin.product.detail",n.product_id)},{default:a(()=>[b(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",j0,r(l(K)(n.price)),1),t("td",E0,r(n.quantity),1),t("td",A0,r(l(K)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),w("tr",M0,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Te),e(ae,{class:"row",align:"left"},{default:a(()=>[t("div",N0,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",B0,r(s.data.notes?s.data.notes:"-"),1)]),t("div",z0,[s.data.status=="closed"&&s.data.change>0?(d(),w(W,{key:0},[t("div",F0,[t("div",L0,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Jumlah Bayar",-1)),t("div",H0,r(l(K)(parseInt(s.data.total_paid)+parseInt(s.data.change))),1)])]),s.data.status=="closed"?(d(),w("div",K0,[t("div",Y0,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Kembalian",-1)),t("div",W0,r(l(K)(s.data.change)),1)])])):k("",!0)],64)):k("",!0),t("div",Q0,[t("div",J0,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",G0,r(l(K)(s.data.grand_total)),1)])]),s.data.status=="closed"&&s.data.total_return!=0?(d(),w("div",X0,[t("div",Z0,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",e2,r(l(K)(s.data.total_return)),1)])])):k("",!0),s.data.status=="closed"&&s.data.balance!=0?(d(),w("div",t2,[t("div",a2,[o[20]||(o[20]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",l2,r(l(wt)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},o2=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"})),n2={key:0,class:"text-center q-mb-md text-grey-8"},s2={class:"text-subtitle2 text-weight-medium"},r2={class:"text-h5 text-center text-primary q-pb-md"},i2={class:"text-center q-mt-md"},d2={key:0,class:"text-h6 text-negative text-weight-bold"},u2={key:1,class:"text-h6 text-green-8 text-weight-bold"},m2={key:2,class:"text-h6 text-positive text-weight-bold"},un={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=O(!1),f=O({method:"cash",amount:m.total,notes:null}),v=i.props.data.customer,p=G(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...v?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(C=>({label:C.name,value:C.id}))]),u=G(()=>m.total-(f.value.amount||0)),g=G(()=>{const C=f.value.amount||0;return m.total,C<=0?"Jumlah pembayaran harus lebih dari 0.":f.value.method==="wallet"&&v&&C>v.wallet_balance?"Saldo wallet tidak mencukupi.":null}),_=G(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const C={total_paid:f.value.amount,payments:[{id:f.value.method,amount:f.value.amount}],notes:f.value.notes,change:Math.max(0,(f.value.amount||0)-m.total),remaining_debt:Math.max(0,m.total-(f.value.amount||0))};o("accepted",C),n.value=!1},$=()=>{f.value.amount=m.total,f.value.method="cash",f.value.notes=null};return(C,D)=>{const F=J("my-link");return d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":D[4]||(D[4]=A=>C.$emit("update:modelValue",A)),onBeforeShow:$},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>D[5]||(D[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[l(v)?(d(),w("div",n2,[t("div",s2,[t("div",null,[e(F,{href:C.route("admin.customer.detail",{id:l(v).id}),target:"_blank"},{default:a(()=>[b(r(l(v).code)+" - "+r(l(v).name),1)]),_:1},8,["href"])]),t("div",{class:xe(l(v).wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(l(K)(l(v).wallet_balance)),3),t("div",{class:xe(l(v).balance>0?"text-green":"text-red")},r(l(v).balance>0?"Piutang":"Utang")+": "+r(l(K)(l(v).balance)),3)])])):k("",!0),t("div",r2," Total: Rp. "+r(l(K)(c.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":D[0]||(D[0]=A=>f.value.method=A),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Ee,{modelValue:f.value.amount,"onUpdate:modelValue":D[1]||(D[1]=A=>f.value.amount=A),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:f.value.notes,"onUpdate:modelValue":D[2]||(D[2]=A=>f.value.notes=A),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",i2,[u.value>0?(d(),w("div",d2," Sisa Tagihan: Rp. "+r(l(K)(u.value)),1)):u.value<0?(d(),w("div",u2," Kembalian: Rp. "+r(l(K)(Math.abs(u.value))),1)):(d(),w("div",m2," Tagihan Terbayar "))])]),_:1}),e(et,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:D[3]||(D[3]=A=>C.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},c2=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"})),p2={class:"column"},f2={class:"row"},g2={class:"full-width",style:{"border-collapse":"collapse"}},b2={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},v2={class:"row items-center q-gutter-x-sm"},_2={class:"text-weight-bold"},y2={class:"row items-center q-gutter-x-sm q-mt-xs"},k2={class:"text-caption text-grey-6"},w2={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},h2={class:"q-mt-xs"},$2={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},x2={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},S2={key:0},V2={class:"text-right q-pa-sm"},mn={__name:"PaymentTab",props:{data:Object},setup(c){const s=c,m=ke(),o=O(!1),i=()=>{o.value=!0},n=async v=>{const p={order_id:s.data.id,payments:v.payments,notes:v.notes};m.loading.show({message:"Memproses pembayaran..."});try{const u=await Re.post(route("admin.sales-order.add-payment"),p);m.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Y.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(u){let g="Gagal memproses pembayaran.";u.response&&u.response.data&&u.response.data.message?g=u.response.data.message:u.message&&(g=u.message),m.notify({message:g,color:"negative",icon:"error"})}finally{m.loading.hide()}},f=v=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Re.post(route("admin.sales-order.delete-payment",{id:v.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Y.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(p){let u="Gagal menghapus pembayaran.";p.response&&p.response.data&&p.response.data.message?u=p.response.data.message:p.message&&(u=p.message),m.notify({message:u,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(v,p)=>{const u=J("my-link");return d(),w(W,null,[t("div",p2,[e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("div",f2,[v.$can("admin.sales-order.add-payment")?(d(),I(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:p[0]||(p[0]=X(g=>i(),["stop"]))})):k("",!0)]),t("table",g2,[p[5]||(p[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(W,null,Oe(s.data.payments,g=>(d(),w("tr",{key:g.id},[t("td",b2,[t("div",v2,[e(V,{name:"tag",size:"xs",color:"grey-7"}),t("span",_2,r(g.code),1)]),t("div",y2,[e(V,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",k2,r(l(ve)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),w("div",w2,[e(V,{name:"wallet",size:"xs",color:"grey-7"}),e(u,{href:v.route("admin.finance-account.detail",{id:g.account.id})},{default:a(()=>[b(r(g.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",h2,[e(ot,{label:v.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(ot,{label:g.amount>0?"Pembayaran":"Refund",color:g.amount>0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",$2,r(l(K)(g.amount)),1),t("td",x2,[v.$can("admin.sales-order.delete-payment")&&s.data.customer_id&&g.amount>0?(d(),I(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",S2,p[2]||(p[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[p[3]||(p[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",V2,r(l(K)(s.data.balance)),1),p[4]||(p[4]=t("td",null,null,-1))])])])]),_:1})]),e(un,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=g=>o.value=g),total:Math.abs(s.data.balance),customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},q2=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),C2={class:"q-gutter-sm"},T2={class:"col col-lg-6 q-pa-xs",align:"center"},Ml="Rincian Penjualan",P2={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=ge(),o=m.props.data,i=O(s.get("preview")||!1),f=O(s.get("tab")||"invoice");ye(()=>{pt(()=>{const p=s.get("print_size");p&&v(p)})});const v=p=>{window.open(route("admin.sales-order.print",{id:m.props.data.id,size:p}),"_self")};return(p,u)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),w(W,null,[e(g,{title:Ml}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Ml))])]),"left-button":a(()=>[t("div",C2,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>i.value?l(Y).get(p.route("admin.sales-order.edit",l(m).props.data.id)):l(Y).get(p.route("admin.sales-order.index")))})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=y=>v("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[2]||(u[2]=y=>v("a4"))}),i.value?k("",!0):(d(),I(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[3]||(u[3]=y=>l(Y).get(p.route("admin.sales-order.add")))}))]),default:a(()=>[e(Ve,{class:"row justify-center print-visible"},{default:a(()=>[t("div",T2,[e(ue,{square:"",flat:"",bordered:"",class:xe(["full-width",i.value?"draft-label":f.value!="invoice"?"":l(m).props.data.payment_status=="fully_paid"?"paid-label":"unpaid-label"]),style:{"max-width":"1024px"}},{default:a(()=>[e(Vt,{modelValue:f.value,"onUpdate:modelValue":u[4]||(u[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(nt,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(d(),I(nt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Te),e(qt,{modelValue:f.value,"onUpdate:modelValue":u[5]||(u[5]=y=>f.value=y),animated:""},{default:a(()=>[e(st,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(dn,{data:l(o)},null,8,["data"])]),_:1}),e(st,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(mn,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])])]),_:1})]),_:1})],64)}}},R2=Object.freeze(Object.defineProperty({__proto__:null,default:P2},Symbol.toStringTag,{value:"Module"})),O2={class:"text-weight-medium"},D2={class:"text-caption text-grey-6 elipsis"},I2={class:"column items-end"},U2={class:"text-caption text-grey-6 text-italic"},cn={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=ke(),m=tt(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(Ue,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:ze({height:l(m)})},{header:a(f=>[e(Pe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(W,null,Oe(f.cols,v=>(d(),I(Jt,{key:v.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Pe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left wrap-column"},{default:a(()=>[t("div",O2,r(f.row.product_name),1),t("div",D2,r(f.row.product_barcode),1),f.row.notes?(d(),I(he,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal_price",props:f,class:"text-right"},{default:a(()=>[t("div",I2,[t("div",null,r(l(K)(f.row.subtotal_price)),1),t("div",U2,r(l(K)(f.row.quantity))+" "+r(f.row.product_uom)+" x Rp. "+r(l(K)(f.row.price)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},j2=Object.freeze(Object.defineProperty({__proto__:null,default:cn},Symbol.toStringTag,{value:"Module"})),E2={key:0,class:"text-center q-mb-md text-grey-8"},A2={class:"text-subtitle2 text-weight-medium"},M2={class:"text-h5 text-center text-primary q-pb-md"},N2={class:"q-mb-md flex flex-center"},B2={key:1},z2={class:"col-6"},F2={class:"col-6"},L2={class:"row"},H2={class:"text-center q-mt-md"},K2={key:0,class:"text-h6 text-negative text-weight-bold"},Y2={key:1,class:"text-h6 text-green-8 text-weight-bold"},W2={key:2,class:"text-h6 text-positive text-weight-bold"},Q2={key:2},J2={class:"text-h6 text-negative text-center"},G2={key:3},pn={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=ge(),n=O(!1),f=O("cash"),v=O(new Date),p=O(i.props.settings.after_payment_action??"print"),u=O([]),g=O([]),_=De([{id:"cash",amount:0}]),y=i.props.settings.default_payment_mode,$=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],C=G(()=>[{label:"Laci Kasir",value:"cash"},...m.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(U=>({label:U.name,value:U.id}))]),D=G(()=>_.reduce((U,j)=>U+(j.amount||0),0)),F=G(()=>m.total-D.value),A=G(()=>{if(!m.customer)return!0;const U=_.find(oe=>oe.id==="wallet");return(U?U.amount:0)<=m.customer.wallet_balance}),T=new Date,N=it.addToDate(new Date,{days:30}),M=G(()=>[U=>!!U||"Tanggal jatuh tempo harus diisi",U=>it.isBetweenDates(U,T,N,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),R=G(()=>{if(f.value==="debt")return!!m.customer&&M.value.every(H=>H(v.value)===!0);const U=A.value,j=_.some(H=>(H.amount||0)>0),oe=_.every(H=>(H.amount||0)>=0),re=F.value<=0;return U&&j&&oe&&re}),B=()=>{if(_.length<3){const U=_.length;_.push({id:"cash",amount:0}),pt(()=>{const j=u.value[U];j&&(j.focus(),j.showPopup())})}},h=U=>{if(_.length>1){const j=_.findIndex(oe=>oe.id===U);j!==-1&&_.splice(j,1)}},x=(U,j="cash")=>{f.value=U,v.value=new Date,_.splice(0,_.length),U==="cash"&&(_.splice(0,_.length,{id:j,amount:m.total}),pt(()=>{g.value.length>0&&g.value[0]&&(g.value[0].focus(),g.value[0].select())}))},P=()=>{if(!R.value)return;n.value=!0;let U={total:m.total,is_debt:f.value==="debt",after_payment_action:p.value};if(f.value==="debt")U.due_date=it.formatDate(v.value,"YYYY-MM-DD"),U.payments=[];else{const j=D.value,oe=j>m.total?j-m.total:0,re=F.value>0?F.value:0;U.payments=_,U.remaining_debt=re,U.change=oe}o("accepted",U),n.value=!1},q=()=>{x("cash",m.customer?y:"cash")};ye(()=>{const U=j=>{m.modelValue&&j.ctrlKey&&j.key==="Enter"&&(j.preventDefault(),P())};document.addEventListener("keydown",U),yt(()=>{document.removeEventListener("keydown",U)})});const S=(U,j)=>{pt(()=>{g.value[j]&&(g.value[j].focus(),g.value[j].select())})};return(U,j)=>{const oe=J("my-link");return d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":j[4]||(j[4]=re=>U.$emit("update:modelValue",re)),onBeforeShow:q},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>j[5]||(j[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[c.customer?(d(),w("div",E2,[t("div",A2,[t("div",null,[e(oe,{href:U.route("admin.customer.detail",{id:c.customer.id}),target:"_blank"},{default:a(()=>[b(r(c.customer.code)+" - "+r(c.customer.name),1)]),_:1},8,["href"])]),t("div",{class:xe(c.customer.wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(l(K)(c.customer.wallet_balance)),3),t("div",{class:xe(c.customer.balance>0?"text-green":"text-red")},r(c.customer.balance>0?"Piutang":"Utang")+": "+r(l(K)(c.customer.balance)),3)])])):k("",!0),t("div",M2," Total: Rp. "+r(l(K)(c.total)),1),t("div",N2,[e(l(Bt),{modelValue:f.value,"onUpdate:modelValue":[j[0]||(j[0]=re=>f.value=re),x],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="cash"?(d(),w("div",B2,[(d(!0),w(W,null,Oe(_,(re,H)=>(d(),w("div",{key:H,class:"row q-col-gutter-sm q-mb-sm"},[t("div",z2,[e(l(ce),{modelValue:re.id,"onUpdate:modelValue":[L=>re.id=L,L=>S(L,H)],options:C.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:L=>u.value[H]=L},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",F2,[e(Ee,{modelValue:re.amount,"onUpdate:modelValue":L=>re.amount=L,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:re.id==="wallet"&&!A.value,"error-message":re.id==="wallet"&&!A.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:L=>g.value[H]=L},Ae({_:2},[_.length>1?{name:"append",fn:a(()=>[e(V,{size:"xs",name:"close",class:"cursor-pointer",onClick:L=>h(re.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",L2,[e(E,{disable:!(_.length<3&&F.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:B,size:"sm"},null,8,["disable"])]),t("div",H2,[F.value>0?(d(),w("div",K2," Sisa Tagihan: Rp. "+r(l(K)(F.value)),1)):F.value<0?(d(),w("div",Y2," Kembalian: Rp. "+r(l(K)(Math.abs(F.value))),1)):(d(),w("div",W2," Tagihan Terbayar "))])])):f.value==="debt"&&c.customer?(d(),w("div",Q2,[e(sa,{outlined:"",modelValue:v.value,"onUpdate:modelValue":j[1]||(j[1]=re=>v.value=re),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(T),"max-date":l(N),rules:M.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",J2," Total Utang: Rp. "+r(l(K)(c.total)),1)])):f.value==="debt"&&!c.customer?(d(),w("div",G2,j[6]||(j[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(et,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(l(ce),{modelValue:p.value,"onUpdate:modelValue":j[2]||(j[2]=re=>p.value=re),options:$,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:n.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(E,{flat:"",label:"Batal",color:"grey",onClick:j[3]||(j[3]=re=>U.$emit("update:modelValue",!1)),class:"col"}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:P,disable:n.value||!R.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},X2=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),Z2={class:"row items-center no-wrap"},eh={class:"col-auto"},fn={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=G(()=>o.item.quantity*o.item.price),v=g=>{g.stopPropagation(),g.preventDefault()},p=g=>{o.modelValue&&(g.key==="Enter"?(n(),i("update:modelValue",!1),v(g)):g.key==="Escape"&&(i("update:modelValue",!1),v(g)))};return ye(()=>{window.addEventListener("keydown",p)}),yt(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item}),(g,_)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>g.$emit("update:modelValue",y))},{default:a(()=>[e(ue,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Z2,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",eh,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>g.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>{var y;return[e(ie,{modelValue:c.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=$=>c.item.product_name=$),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Ee,{modelValue:c.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=$=>c.item.quantity=$),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Ee,{modelValue:c.item.price,"onUpdate:modelValue":_[3]||(_[3]=$=>c.item.price=$),label:"Harga (Rp)",readonly:!((y=c.item.product)!=null&&y.price_editable),"hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","readonly","disable"]),e(Ee,{modelValue:f.value,"onUpdate:modelValue":_[4]||(_[4]=$=>f.value=$),label:"Subtotal (Rp)","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(ie,{modelValue:c.item.notes,"onUpdate:modelValue":_[5]||(_[5]=$=>c.item.notes=$),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]}),_:1}),e(et,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},th=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"})),ah={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ae,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(et,{align:"center"},{default:a(()=>[te(e(E,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},gn=ft(ah,[["__scopeId","data-v-92052544"]]),lh=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),oh={class:"row items-center no-wrap"},nh={class:"col text-subtite text-bold text-grey-8"},sh={class:"col-auto"},bn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=u=>{u.stopPropagation(),u.preventDefault()},v=u=>{o.modelValue&&(u.key==="Enter"?(n(),f(u)):u.key==="Escape"&&(i("update:modelValue",!1),f(u)))};return ye(()=>{window.addEventListener("keydown",v)}),yt(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(u,g)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>u.$emit("update:modelValue",_))},{default:a(()=>[e(ue,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",oh,[t("div",nh," Edit "+r(c.data.code),1),t("div",sh,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(Fe,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(ie,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>u.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(ie,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(et,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},rh=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"})),ih={key:0},dh={style:{float:"right"}},uh={key:1},mh={style:{float:"right"}},ch={key:2},ph={style:{float:"right"}},fh={key:3},gh={style:{float:"right"}},bh={style:{float:"right"}},vh={class:"q-gutter-sm"},_h={class:"q-my-md"},yh={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=O(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(d(),I(Xe,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(ue,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ae,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(d(),w("tr",ih,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ")),t("div",dh,r(l(K)(c.payment.total)),1)])]),c.payment.cash_amount?(d(),w("tr",uh,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ")),t("div",mh,r(l(K)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(d(),w("tr",ch,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ")),t("div",ph,r(l(K)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(d(),w("tr",fh,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ")),t("span",gh,r(l(K)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ")),t("div",bh,r(l(K)(c.payment.change)),1)])])])])]),_:1}),e(et,{align:"center"},{default:a(()=>[t("div",vh,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",_h,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},vn=ft(yh,[["__scopeId","data-v-794fd35f"]]),kh=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"})),wh={class:"q-gutter-sm"},hh={class:"row q-col-gutter-none full-width"},$h={class:"col-sm-6 col-12 col q-pa-sm"},xh={class:"row full-width"},Sh={class:"col-sm-6 col-12"},Vh={class:"row q-ml-sm items-end"},qh={class:"row col grow"},Ch={class:"col-12 q-px-sm column"},Th={class:"row items-start q-col-gutter-none q-px-sm"},Ph={key:0,class:"col"},Rh={class:"text-caption text-grey-6"},Oh={key:0,class:"text-caption text-grey-8 q-mt-xs"},Dh={class:"text-italic"},Ih={key:1,class:"col"},Uh={class:"text-grey-8"},jh={class:"col"},Eh={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Ah={class:"text-h4 text-weight-bold"},Mh={class:"row q-col-gutter-sm q-py-xs q-px-sm"},Nh={class:"col"},Bh={__name:"Editor",setup(c){const s=ke(),m=ge(),o=O(!0),i=O(null),n=O(null),f=O(null),v=O(!1),p=O(null),u=m.props.data.code,g=O(m.props.data.customer),_=O(null),y=O(""),$=O(!1),C=O(!1),D=O(!1),F=O(!1),A=O(!1),T=O(!1),N=O(null),M=O("price_1"),R=De({id:m.props.data.id,code:m.props.data.code,customer_id:m.props.data.customer_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),B=G(()=>R.items.reduce((de,ee)=>de+ee.price*ee.quantity,0)),h=de=>isNaN(de)||de<=0?(gt("Kuantitas tidak valid.","top"),!1):!0,x=de=>isNaN(de)||de<0?(gt("Harga tidak valid.","top"),!1):!0,P=de=>!de||de.length==0?(gt("Barcode tidak valid.","top"),!1):!0,q=de=>{var ee;(ee=y.value)!=null&&ee.endsWith("*")?y.value+=de.name:y.value=de.name},S=async()=>{var rt;if($.value)return;const de=(rt=y.value)==null?void 0:rt.trim();if(de.length===0){D.value=!0;return}const ee=de.split("*");let fe=1,qe="",we=null;if(ee.length===1)qe=ee[0];else if(ee.length<=3)fe=parseInt(ee[0]),qe=ee[1],ee.length===3&&(we=parseFloat(ee[2]));else{gt("Input tidak valid.","top");return}if(qe.length===0){D.value=!0;return}!P(qe)&&!h(fe)&&!x(we)||($.value=!0,await Re.post(route("admin.sales-order.add-item"),{order_id:R.id,product_code:qe,qty:fe,price:we,merge:o.value}).then($t=>{const Rt=$t.data.data.item;let It=-1;$t.data.data.mergeItem&&(It=R.items.findIndex(ia=>ia.id===Rt.id)),It===-1?R.items.push(Rt):R.items[It]=Rt,y.value="",we!==null&&we!==parseFloat(Rt.price)&&gt("Harga tidak dapat diubah!","top")}).catch($t=>{var Rt,It;mt((It=(Rt=$t.response)==null?void 0:Rt.data)==null?void 0:It.message,"top"),console.error("Gagal mengambil data produk:",$t)}),$.value=!1,pt(()=>{var $t;($t=i.value)==null||$t.focus()}))},U=de=>{N.value=Object.create(de),F.value=!0},j=de=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${de.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{$.value=!0,Re.post(route("admin.sales-order.remove-item"),{id:de.id}).then(()=>{const ee=R.items.findIndex(fe=>fe.id===de.id);ee!==-1&&(R.items.splice(ee,1)[0],ct("Item telah dihapus","top"))}).catch(ee=>{var fe,qe;mt(((qe=(fe=ee==null?void 0:ee.response)==null?void 0:fe.data)==null?void 0:qe.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(ee)}).finally(()=>{$.value=!1})})},oe=()=>{$.value=!0;const de=n.value.getCurrentItem(),ee={id:de.id,qty:de.quantity};de.product.price_editable&&(ee.price=de.price),de.notes&&(ee.notes=de.notes),Re.post(route("admin.sales-order.update-item"),ee).then(fe=>{const qe=fe.data.data,we=R.items.findIndex(rt=>rt.id===qe.id);we!==-1&&(R.items[we]=qe,ct("Item telah diperbarui","top"))}).catch(fe=>{var qe,we;mt(((we=(qe=fe==null?void 0:fe.response)==null?void 0:qe.data)==null?void 0:we.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(fe)}).finally(()=>{$.value=!1})};ye(()=>{const de=ee=>{C.value||v.value||F.value||D.value||A.value||(ee.key==="F1"?(ee.preventDefault(),v.value=!0):ee.key==="F2"?(ee.preventDefault(),f.value.focus()):ee.key==="F3"?(ee.preventDefault(),i.value.focus()):ee.key==="F4"?(ee.preventDefault(),o.value=!o.value):ee.key==="F12"||ee.ctrlKey&&ee.key==="Enter"?(ee.preventDefault(),Z.value&&(C.value=!0)):(ee.key==="F5"||ee.key==="F6"||ee.key==="F7")&&ee.preventDefault())};document.addEventListener("keydown",de),yt(()=>{document.removeEventListener("keydown",de)})});const re=async de=>{g.value=de,R.customer_id=de==null?void 0:de.id,await H(),de!=null&&de.id?(M.value=g.value.default_price_type??"price_1",i.value.focus()):(M.value="price_1",f.value.focus())},H=async()=>{$.value=!0;const de={id:R.id,customer_id:R.customer_id??null,datetime:Wt(R.datetime),notes:R.notes};await Re.post(route("admin.sales-order.update"),de).then(ee=>{const fe=ee.data.data.id;R.customer_id=fe.customer_id}).catch(ee=>{var fe,qe;mt(((qe=(fe=ee==null?void 0:ee.response)==null?void 0:fe.data)==null?void 0:qe.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ee)}).finally(()=>{$.value=!1})},L=de=>{if(R.items.length===0){ct("Item masih kosong","top");return}const ee={id:R.id,...de};$.value=!0,Re.post(route("admin.sales-order.close"),ee).then(fe=>{ct("Transaksi selesai"),ee.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:R.id,size:m.props.settings.default_print_size}),"_self"):ee.after_payment_action==="detail"?Y.get(route("admin.sales-order.detail",{id:R.id})):ee.after_payment_action==="new-order"&&Y.get(route("admin.sales-order.add"))}).catch(fe=>{var qe,we;mt((we=(qe=fe.response)==null?void 0:qe.data)==null?void 0:we.message),console.error(fe)}).finally(()=>{$.value=!1})},pe=()=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${R.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Re.post(route("admin.sales-order.cancel",{id:R.id}),{id:R.id}).then(()=>{ct("Transaksi telah dibatalkan."),Y.visit(route("admin.sales-order.detail",{id:R.id}))}).catch(de=>{var fe,qe;const ee=((qe=(fe=de.response)==null?void 0:fe.data)==null?void 0:qe.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:ee,color:"warning",position:"bottom"}),console.error(de)})})},ne=()=>{window.open(route("admin.sales-order.detail",{id:R.id})+"?preview=1","_blank")};G(()=>g.value?g.value.wallet_balance>=B.value:!0);const Z=G(()=>St().appContext.config.globalProperties.$can("admin.sales-order.close")&&!$.value&&R.items.length!==0&&R.status==="draft");return(de,ee)=>{const fe=J("i-head"),qe=J("authenticated-layout");return d(),w(W,null,[e(fe,{title:l(u)},null,8,["title"]),e(qe,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[b(r(l(u)),1)]),"left-button":a(()=>[t("div",wh,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:ee[0]||(ee[0]=we=>l(Y).get(de.route("admin.sales-order.index")))})])]),"right-button":a(()=>[l(s).screen.gt.sm?(d(),I(wa,{key:0})):k("",!0)]),default:a(()=>[e(Ve,{class:"bg-grey-2 column fit"},{default:a(()=>[e(ue,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",hh,[t("div",$h,[t("div",xh,[e(nn,{ref_key:"customerAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:g.value,"onUpdate:modelValue":ee[1]||(ee[1]=we=>g.value=we),label:"Pelanggan",disable:$.value,onCustomerSelected:re,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),g.value?(d(),I(ka,{key:0,party:g.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",Sh,[e(ya,{ref_key:"userInputRef",ref:i,modelValue:y.value,"onUpdate:modelValue":ee[2]||(ee[2]=we=>y.value=we),onKeyup:ee[3]||(ee[3]=zt(X(we=>S(),["prevent"]),["enter"])),onScanSuccess:ee[4]||(ee[4]=we=>S()),onSend:ee[5]||(ee[5]=we=>S()),onSearch:ee[6]||(ee[6]=we=>D.value=!0),loading:$.value,disable:$.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",Vh,[e(Ct,{class:"col",modelValue:o.value,"onUpdate:modelValue":ee[7]||(ee[7]=we=>o.value=we),label:"Gabungkan item",disable:$.value},null,8,["modelValue","disable"])])])]),t("div",qh,[t("div",Ch,[e(cn,{items:R.items,onUpdateQuantity:ee[8]||(ee[8]=({id:we,value:rt})=>de.updateQuantity(we,rt)),onRemoveItem:j,onEditItem:U,"is-processing":$.value},null,8,["items","is-processing"])])]),t("div",Th,[l(s).screen.gt.sm?(d(),w("div",Ph,[t("div",Rh,r(R.items.length)+" item(s) ",1),R.notes?(d(),w("div",Oh,[ee[22]||(ee[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Dh,[e(he,{text:R.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",Ih,[t("div",Uh,[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(r(R.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(r(l(ve)(R.datetime)),1)])])])):k("",!0),t("div",jh,[t("div",Eh,[ee[24]||(ee[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Ah,[ee[23]||(ee[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(l(K)(B.value)),1)])])])]),t("div",Mh,[t("div",Nh,[e(E,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:ee[9]||(ee[9]=we=>C.value=!0),disable:!Z.value,loading:$.value},null,8,["disable","loading"])]),t("div",null,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:ee[13]||(ee[13]=X(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[te((d(),I(le,{clickable:"",onClick:ee[10]||(ee[10]=X(we=>A.value=!0,["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>ee[25]||(ee[25]=[b("Edit Rincian")])),_:1})]),_:1})),[[se],[me]]),te((d(),I(le,{clickable:"",onClick:ee[11]||(ee[11]=X(we=>ne(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"preview"})]),_:1}),e(z,null,{default:a(()=>ee[26]||(ee[26]=[b("Pratinjau")])),_:1})]),_:1})),[[se],[me]]),te((d(),I(le,{clickable:"",onClick:ee[12]||(ee[12]=X(we=>pe(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:a(()=>ee[27]||(ee[27]=[b(" Batalkan ")])),_:1})]),_:1})),[[se],[me]]),e(Te)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(fn,{ref_key:"itemEditorRef",ref:n,modelValue:F.value,"onUpdate:modelValue":ee[14]||(ee[14]=we=>F.value=we),item:N.value,onSave:ee[15]||(ee[15]=we=>oe()),"is-processing":$.value},null,8,["modelValue","item","is-processing"]),e(pn,{modelValue:C.value,"onUpdate:modelValue":ee[16]||(ee[16]=we=>C.value=we),onAccepted:L,form:R,customer:g.value,total:B.value,accounts:l(m).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(_a,{modelValue:D.value,"onUpdate:modelValue":ee[17]||(ee[17]=we=>D.value=we),onProductSelected:q,priceType:M.value,"show-cost":de.$can("admin.product:view-cost")},null,8,["modelValue","priceType","show-cost"]),e(bn,{modelValue:A.value,"onUpdate:modelValue":ee[18]||(ee[18]=we=>A.value=we),data:R,onSave:ee[19]||(ee[19]=we=>H()),"is-processing":$.value},null,8,["modelValue","data","is-processing"]),e(gn,{modelValue:v.value,"onUpdate:modelValue":ee[20]||(ee[20]=we=>v.value=we)},null,8,["modelValue"]),e(vn,{modelValue:T.value,"onUpdate:modelValue":ee[21]||(ee[21]=we=>T.value=we),order:R,customer:g.value,total:B.value,payment:_.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},zh=Object.freeze(Object.defineProperty({__proto__:null,default:Bh},Symbol.toStringTag,{value:"Module"})),Fh={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.SALES_ORDER_STATUSES,m={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(d(),I(At,{status:c.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}},Lh={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,m={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(d(),I(At,{status:c.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}};const Hh={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Kh={class:"q-pa-xs"},Yh={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Wh={key:0},Qh={key:1},Jh={key:2},Gh={key:4},Xh={key:0},Zh={key:1},e$={key:0},t$={key:0},a$={key:1},l$={class:"flex justify-end"},Nl="Penjualan",o$={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=Ce().startOf("month").toDate(),u=Ce().endOf("month").toDate(),g=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.SALES_ORDER_STATUSES)],_=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],y=[{value:"all",label:"Semua Status"},...Ke(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],$=De({search:"",status:"all",payment_status:"all",delivery_status:"all",start_date:p,end_date:u,...Ne()}),C=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),D=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];ye(()=>{R()});const F=x=>{if(x.status=="draft"){A(x);return}T(x)},A=x=>{Y.get(route("admin.sales-order.edit",x.id))},T=x=>{Y.get(route("admin.sales-order.detail",x.id))},N=x=>{ht.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${x.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Re.post(route("admin.sales-order.cancel",{id:x.id}),{id:x.id}).then(P=>{const q=P.data.data,S=o.value.findIndex(U=>U.id===q.id);if(S===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[S].status="canceled",s.notify({message:P.data.message,position:"bottom"})}).catch(P=>{var S,U;const q=((U=(S=P.response)==null?void 0:S.data)==null?void 0:U.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:q,color:"warning",position:"bottom"}),console.error(P)})})},M=x=>at({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${x.code}?`,url:route("admin.sales-order.delete",x.id),fetchItemsCallback:R,loading:i}),R=(x=null)=>{const P={...$,start_date:Ce($.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Ce($.end_date).format("YYYY-MM-DD HH:mm:ss")};Be({pagination:C,filter:P,props:x,rows:o,url:route("admin.sales-order.data"),loading:i,tableRef:n})},B=()=>{R()},h=G(()=>s.screen.gt.sm?D:D.filter(x=>x.name==="id"||x.name==="action"));return(x,P)=>{const q=J("i-head"),S=J("authenticated-layout");return d(),w(W,null,[e(q,{title:Nl}),e(S,null,Ae({title:a(()=>[b(r(Nl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=U=>m.value=!m.value)},null,8,["icon"]),x.$can("admin.sales-order.edit")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=U=>l(Y).get(x.route("admin.sales-order.add")))})):k("",!0)]),default:a(()=>[t("div",Kh,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:C.value,"onUpdate:pagination":P[11]||(P[11]=U=>C.value=U),filter:$.search,loading:i.value,columns:h.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:l(v)}),onRequest:R,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:U,message:j,filter:oe})=>[t("div",Yh,[t("span",null,r(j)+" "+r(oe?" with term "+oe:""),1)])]),body:a(U=>[e(Pe,{props:U,class:"cursor-pointer",onClick:X(j=>F(U.row),["prevent"])},{default:a(()=>[e(Q,{key:"id",props:U,class:"wrap-column"},{default:a(()=>{var j,oe,re;return[t("div",null,[e(V,{name:"tag"}),b(" "+r(U.row.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(r(l(ve)(U.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[U.row.cashier?(d(),w("div",Wh,[e(V,{name:"person",class:"inline-icon"}),b(" Kasir: "+r((j=U.row.cashier)==null?void 0:j.username),1)])):k("",!0),U.row.cashier_session?(d(),w("div",Qh,[e(V,{name:"point_of_sale",class:"inline-icon"}),b(" Terminal: "+r((re=(oe=U.row.cashier_session)==null?void 0:oe.cashier_terminal)==null?void 0:re.name),1)])):k("",!0),U.row.customer?(d(),w("div",Jh,[e(V,{name:"person",class:"inline-icon"}),P[12]||(P[12]=b(" Pelanggan: ")),e(fa,{href:x.route("admin.customer.detail",{id:U.row.customer.id}),onClick:P[8]||(P[8]=X(()=>{},["stop"]))},{default:a(()=>[b(" "+r(U.row.customer.code)+" - "+r(U.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,[e(V,{name:"wallet",class:"inline-icon"}),b(" Total: Rp. "+r(l(K)(U.row.grand_total)),1)]),U.row.balance!=0?(d(),w("div",{key:3,class:xe(U.row.balance>0?"text-green":"text-red")},[e(V,{name:"balance",class:"inline-icon"}),b(" "+r(U.row.balance>0?"Piutang":"Utang")+": Rp. "+r(l(K)(U.row.balance)),1)],2)):k("",!0),U.row.notes?(d(),w("div",Gh,[e(V,{name:"notes"}),b(" "+r(U.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Fh,{status:U.row.status},null,8,["status"]),U.row.status=="closed"?(d(),w(W,{key:0},[e(Lh,{status:U.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]}),_:2},1032,["props"]),e(Q,{key:"cashier_id",props:U},{default:a(()=>{var j,oe,re;return[U.row.cashier?(d(),w("div",Xh,[e(V,{name:"person",class:"inline-icon"}),b(" "+r((j=U.row.cashier)==null?void 0:j.username),1)])):k("",!0),U.row.cashier_session?(d(),w("div",Zh,[e(V,{name:"point_of_sale",class:"inline-icon"}),b(" "+r((re=(oe=U.row.cashier_session)==null?void 0:oe.cashier_terminal)==null?void 0:re.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Q,{key:"customer_id",props:U},{default:a(()=>[U.row.customer?(d(),w("div",e$,[t("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(U.row.customer_code)+" - "+r(U.row.customer_name),1)]),U.row.customer_phone?(d(),w("div",t$,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(U.row.customer_phone),1)])):k("",!0),U.row.customer_address?(d(),w("div",a$,[e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(U.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:U},{default:a(()=>[b(r(l(K)(U.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:U,class:xe(U.row.balance>0?"text-green":"text-red")},{default:a(()=>[b(r(l(K)(U.row.balance)),1)]),_:2},1032,["props","class"]),e(Q,{key:"notes",props:U},{default:a(()=>[e(he,{text:U.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:U,onClick:P[10]||(P[10]=X(()=>{},["stop"]))},{default:a(()=>[t("div",l$,[x.$can("admin.sales-order.detail")||x.$can("admin.sales-order.edit")||x.$can("admin.sales-order.cancel")||x.$can("admin.sales-order.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[9]||(P[9]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[U.row.status!="draft"&&x.$can("admin.sales-order.detail")?te((d(),I(le,{key:0,onClick:X(j=>T(U.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"visibility"})]),_:1}),e(z,null,{default:a(()=>P[13]||(P[13]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),U.row.status=="draft"&&x.$can("admin.sales-order.edit")?te((d(),I(le,{key:1,onClick:X(j=>A(U.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>P[14]||(P[14]=[b(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),U.row.status=="draft"&&x.$can("admin.sales-order.cancel")?te((d(),I(le,{key:2,onClick:X(j=>N(U.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"cancel"})]),_:1}),e(z,null,{default:a(()=>P[15]||(P[15]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),e(Te),x.$can("admin.sales-order.delete")?te((d(),I(le,{key:3,onClick:X(j=>M(U.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>P[16]||(P[16]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Hh,[e(Fe,{modelValue:$.start_date,"onUpdate:modelValue":[P[2]||(P[2]=U=>$.start_date=U),B],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Fe,{modelValue:$.end_date,"onUpdate:modelValue":[P[3]||(P[3]=U=>$.end_date=U),B],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:$.status,"onUpdate:modelValue":[P[4]||(P[4]=U=>$.status=U),B],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:$.payment_status,"onUpdate:modelValue":[P[5]||(P[5]=U=>$.payment_status=U),B],options:_,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":P[7]||(P[7]=U=>$.search=U),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},n$=Object.freeze(Object.defineProperty({__proto__:null,default:o$},Symbol.toStringTag,{value:"Module"})),s$={},r$={class:"row"},i$={class:"q-mb-md text-h6"};function d$(c,s){const m=J("i-head"),o=J("authenticated-layout");return d(),w(W,null,[e(m,{title:"Informasi Sistem"}),e(o,null,{title:a(()=>s[0]||(s[0]=[b("Informasi Sistem")])),default:a(()=>[t("div",r$,[e(ue,{class:"col q-ma-xs",square:"",flat:"",bordered:""},{default:a(()=>[e(ae,null,{default:a(()=>[t("div",i$,"Tentang "+r(c.$config.APP_NAME),1),b(" Versi : "+r(c.$config.APP_VERSION_STR),1),s[1]||(s[1]=t("br",null,null,-1)),s[2]||(s[2]=b(" Dikembangkan oleh Shiftech Indonesia")),s[3]||(s[3]=t("br",null,null,-1)),s[4]||(s[4]=b(" CV. Shift Karya Teknologi "))]),_:1})]),_:1})])]),_:1})],64)}const u$=ft(s$,[["render",d$]]),m$=Object.freeze(Object.defineProperty({__proto__:null,default:u$},Symbol.toStringTag,{value:"Module"})),_n={__name:"CompanyInfoForm",setup(c){const s=O(),m=ge(),o=We({name:m.props.data.name,headline:m.props.data.headline,phone:m.props.data.phone,address:m.props.data.address,logo_path:m.props.data.logo_path,logo_image:null}),i=O(null),n=O("");ye(()=>{o.logo_path&&(n.value=`/${o.logo_path}`)});function f(){i.value.click()}function v(g){const _=g.target.files[0];_&&(o.logo_image=_,n.value=URL.createObjectURL(_))}function p(){o.logo_image=null,o.logo_path=null,n.value=null,i.value.value=null}const u=()=>lt({form:o,url:route("admin.company-profile.edit")});return(g,_)=>(d(),I(Qe,{class:"row",onSubmit:X(u,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[_[8]||(_[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),_[9]||(_[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(ie,{ref_key:"nameInputRef",ref:s,modelValue:l(o).name,"onUpdate:modelValue":_[0]||(_[0]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ie,{modelValue:l(o).headline,"onUpdate:modelValue":_[1]||(_[1]=y=>l(o).headline=y),modelModifiers:{trim:!0},label:"Headline",disable:l(o).processing,maxlength:"200","lazy-rules":"",error:!!l(o).errors.headline,"error-message":l(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).phone,"onUpdate:modelValue":_[2]||(_[2]=y=>l(o).phone=y),modelModifiers:{trim:!0},label:"No Telepon",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.phone,"error-message":l(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(o).address,"onUpdate:modelValue":_[3]||(_[3]=y=>l(o).address=y),modelModifiers:{trim:!0},label:"Alamat",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[_[7]||(_[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(E,{label:"Browse Logo",size:"sm",onClick:f,color:"secondary",icon:"add_a_photo",disable:l(o).processing},null,8,["disable"]),e(E,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:l(o).processing||!n.value,color:"red",onClick:p},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*",style:{display:"none"},onChange:v},null,544),t("div",null,[e(oa,{src:n.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},Ae({error:a(()=>[_[4]||(_[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[n.value?void 0:{name:"default",fn:a(()=>[_[5]||(_[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),_[6]||(_[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(ae,null,{default:a(()=>[e(E,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},c$=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"})),p$={class:"q-pa-xs"},f$={class:"row justify-center"},g$={class:"col col-md-6"},Bl="Profil Perusahaan",b$={__name:"Edit",setup(c){return(s,m)=>{const o=J("i-head"),i=J("authenticated-layout");return d(),w(W,null,[e(o,{title:Bl}),e(i,null,{title:a(()=>[b(r(Bl))]),default:a(()=>[t("div",p$,[t("div",f$,[t("div",g$,[e(_n)])])])]),_:1})],64)}}},v$=Object.freeze(Object.defineProperty({__proto__:null,default:b$},Symbol.toStringTag,{value:"Module"})),_$={class:"col-xs-12 col-md-8"},y$={class:"col-xs-12 col-sm-9"},k$={class:"col-xs-12 col-sm-3 text-right"},zl="Pengaturan Database & Utilitas",w$={__name:"Index",setup(c){const s=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:" **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:" **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:" **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(m,o)=>{const i=J("i-head"),n=J("authenticated-layout");return d(),w(W,null,[e(i,{title:zl}),e(n,null,{title:a(()=>[b(r(zl))]),default:a(()=>[e(Ve,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",_$,[e(ue,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,null,{default:a(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Ft,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:a(()=>[e(V,{name:"warning",color:"red"})]),default:a(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=b(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(Te),e(ae,{class:"q-gutter-y-lg"},{default:a(()=>[(d(),w(W,null,Oe(s,f=>t("div",{key:f.name,class:"row items-center q-col-gutter-md"},[t("div",y$,[e(le,{class:"q-pa-none"},{default:a(()=>[e(z,{avatar:"",class:"q-pr-md"},{default:a(()=>[e(V,{name:f.icon,color:f.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(z,{style:{"text-wrap":"initial"}},{default:a(()=>[e(be,{class:"text-subtitle1 text-bold"},{default:a(()=>[b(r(f.name),1)]),_:2},1024),e(be,{caption:"",class:"q-pb-sm"},{default:a(()=>[b(r(f.description),1)]),_:2},1024),e(be,{class:"text-caption text-negative text-bold"},{default:a(()=>[b(r(f.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",k$,[e(E,{icon:f.icon,label:f.name.split(" ")[0],color:f.color,disable:f.disable,onClick:f.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},h$=Object.freeze(Object.defineProperty({__proto__:null,default:w$},Symbol.toStringTag,{value:"Module"})),$$={class:"q-pa-xs"},x$={class:"row justify-center"},S$={class:"col col-md-6"},V$={__name:"Edit",setup(c){const s=ge(),m=We({foot_note:s.props.data.foot_note,default_payment_mode:s.props.data.default_payment_mode,default_print_size:s.props.data.default_print_size,after_payment_action:s.props.data.after_payment_action}),o=()=>lt({form:m,url:route("admin.pos-settings.edit")}),i=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],n=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],f=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(v,p)=>{const u=J("i-head"),g=J("authenticated-layout");return d(),w(W,null,[e(u,{title:"Pengaturan POS"}),e(g,null,{title:a(()=>p[4]||(p[4]=[b("Pengaturan POS")])),default:a(()=>[t("div",$$,[t("div",x$,[t("div",S$,[e(Qe,{class:"row",onSubmit:X(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[p[5]||(p[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),p[6]||(p[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(ce,{modelValue:l(m).default_payment_mode,"onUpdate:modelValue":p[0]||(p[0]=_=>l(m).default_payment_mode=_),label:"Default Pembayaran",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:l(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(m).errors.default_payment_mode,"error-message":l(m).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(m).default_print_size,"onUpdate:modelValue":p[1]||(p[1]=_=>l(m).default_print_size=_),label:"Default Ukuran Cetak",options:n,"map-options":"","emit-value":"","lazy-rules":"",disable:l(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(m).errors.default_print_size,"error-message":l(m).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(m).after_payment_action,"onUpdate:modelValue":p[2]||(p[2]=_=>l(m).after_payment_action=_),label:"Aksi Setelah Pembayaran",options:f,"map-options":"","emit-value":"","lazy-rules":"",disable:l(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(m).errors.after_payment_action,"error-message":l(m).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ie,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(m).foot_note,"onUpdate:modelValue":p[3]||(p[3]=_=>l(m).foot_note=_),modelModifiers:{trim:!0},label:"Foot Note",disable:l(m).processing,"lazy-rules":"",error:!!l(m).errors.foot_note,"error-message":l(m).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,null,{default:a(()=>[e(E,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(m).processing,loading:l(m).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},q$=Object.freeze(Object.defineProperty({__proto__:null,default:V$},Symbol.toStringTag,{value:"Module"})),C$={class:"q-gutter-sm"},T$={class:"q-gutter-sm"},P$={class:"col col-md-6 q-pa-xs"},R$={class:"row"},O$={class:"detail-item"},D$={class:"detail-value"},I$={class:"detail-item"},U$={class:"detail-value"},j$={class:"detail-item"},E$={class:"detail-value"},A$={class:"detail-item"},M$={class:"detail-value"},N$={class:"detail-item"},B$={class:"detail-value"},z$={class:"detail-item"},F$={class:"detail-value"},L$={class:"detail-item"},H$={class:"detail-value"},K$={class:"detail-item"},Y$={class:"detail-value user-agent-value"},W$={class:"q-pt-md"},Q$={class:"table-wrapper-scroll"},J$={key:0,class:"table-metadata"},G$={key:0},X$={colspan:"100%"},Z$={class:"text-mono json-pre-scroll"},ex={key:1},tx={class:"metadata-label",style:{width:"100px"}},ax={class:"metadata-value"},lx={key:0,class:"text-mono json-pre-scroll"},ox={key:2},nx={colspan:"3"},sx={class:"table-metadata"},rx={class:"metadata-label"},ix={class:"metadata-value"},dx={class:"metadata-value"},ux={key:1,class:"text-grey-8 text-italic q-pa-sm"},Fl="Rincian Log Aktifitas",mx={__name:"Detail",setup(c){const s=ge(),m=()=>at({message:`Hapus log aktifitas #${s.props.data.id}?`,url:route("admin.user-activity-log.delete",s.props.data.id),onSuccess:()=>{Y.get(route("admin.user-activity-log.index"))}});return(o,i)=>{const n=J("i-head"),f=J("i-link"),v=J("authenticated-layout");return d(),w(W,null,[e(n,{title:Fl}),e(v,{"show-drawer-button":!0},{title:a(()=>[b(r(Fl))]),"left-button":a(()=>[t("div",C$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=p=>l(Y).get(o.route("admin.user-activity-log.index")))})])]),"right-button":a(()=>[t("div",T$,[e(E,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=p=>m())})])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",P$,[t("div",R$,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"detail-group"},{default:a(()=>[i[20]||(i[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",O$,[i[2]||(i[2]=t("div",{class:"detail-label"},"ID",-1)),i[3]||(i[3]=t("div",{class:"detail-separator"},":",-1)),t("div",D$,r(l(s).props.data.id),1)]),t("div",I$,[i[4]||(i[4]=t("div",{class:"detail-label"},"Waktu",-1)),i[5]||(i[5]=t("div",{class:"detail-separator"},":",-1)),t("div",U$,r(l(ve)(l(s).props.data.logged_at)),1)]),t("div",j$,[i[6]||(i[6]=t("div",{class:"detail-label"},"Pengguna",-1)),i[7]||(i[7]=t("div",{class:"detail-separator"},":",-1)),t("div",E$,[e(f,{href:o.route("admin.user.detail",{id:l(s).props.data.user_id})},{default:a(()=>[b(r(l(s).props.data.username),1)]),_:1},8,["href"])])]),t("div",A$,[i[8]||(i[8]=t("div",{class:"detail-label"},"Kategori",-1)),i[9]||(i[9]=t("div",{class:"detail-separator"},":",-1)),t("div",M$,r(l(s).props.data.activity_category_label),1)]),t("div",N$,[i[10]||(i[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),i[11]||(i[11]=t("div",{class:"detail-separator"},":",-1)),t("div",B$,r(l(s).props.data.activity_name_label),1)]),t("div",z$,[i[12]||(i[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),i[13]||(i[13]=t("div",{class:"detail-separator"},":",-1)),t("div",F$,r(l(s).props.data.description),1)]),t("div",L$,[i[14]||(i[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),i[15]||(i[15]=t("div",{class:"detail-separator"},":",-1)),t("div",H$,r(l(s).props.data.ip_address),1)]),t("div",K$,[i[16]||(i[16]=t("div",{class:"detail-label"},"User Agent",-1)),i[17]||(i[17]=t("div",{class:"detail-separator"},":",-1)),t("div",Y$,r(l(s).props.data.user_agent),1)]),t("div",W$,[i[19]||(i[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",Q$,[Object.keys(l(s).props.data.metadata).length>0?(d(),w("table",J$,[t("tbody",null,[(d(!0),w(W,null,Oe(l(s).props.formatted_metadata,(p,u)=>(d(),w(W,{key:u},[p.type==="plain"?(d(),w("tr",G$,[t("td",X$,[t("pre",Z$,r(p.value),1)])])):k("",!0),p.type==="simple"?(d(),w("tr",ex,[t("td",tx,r(p.label),1),t("td",ax,[p.label=="Data Mentah (JSON)"?(d(),w("pre",lx,r(p.value),1)):(d(),w(W,{key:1},[b(r(p.value),1)],64))])])):k("",!0),p.type==="comparison"?(d(),w("tr",ox,[t("td",nx,[t("table",sx,[i[18]||(i[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(d(!0),w(W,null,Oe(p.value,(g,_)=>(d(),w("tr",{class:xe(g.new_value!==g.old_value?"value-changed":"")},[t("td",rx,r(g.field),1),t("td",ix,r(g.old_value),1),t("td",dx,r(g.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(d(),w("div",ux," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},cx=ft(mx,[["__scopeId","data-v-a10644eb"]]),px=Object.freeze(Object.defineProperty({__proto__:null,default:cx},Symbol.toStringTag,{value:"Module"})),fx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},gx={class:"q-pa-xs"},bx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},vx={key:0},_x={class:"flex justify-end"},Ll="Log Aktifitas Pengguna",yx={__name:"Index",setup(c){const s=ge(),m=ke(),o=O(!1),i=O([]),n=O(!0),f=O(null),v=O(null),p=tt(v),{protectClick:u}=Dt(),g=De({user_id:"all",activity_category:"all",activity_name:"all",search:"",...Ne()}),_=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),y=[{value:"all",label:"Semua"},...s.props.users.map(S=>({value:S.id,label:S.username+" - "+S.name}))],$=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_categories).map(([S,U])=>({value:S,label:U}))],C=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_names).map(([S,U])=>({value:S,label:U}))],D=O($),F=O(C),A=(S,U)=>{if(S===""){U(()=>{D.value=$});return}U(()=>{const j=S.toLowerCase();D.value=$.filter(oe=>oe.label.toLowerCase().indexOf(j)>-1)})},T=(S,U)=>{if(S===""){U(()=>{F.value=C});return}U(()=>{const j=S.toLowerCase();F.value=C.filter(oe=>oe.label.toLowerCase().indexOf(j)>-1)})},N=[{name:"id",label:m.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];ye(()=>{R()});const M=S=>at({message:`Hapus log #${S.id}?`,url:route("admin.user-activity-log.delete",S.id),fetchItemsCallback:R,loading:n}),R=(S=null)=>{Be({pagination:_,filter:g,props:S,rows:i,url:route("admin.user-activity-log.data"),loading:n,tableRef:f})},B=()=>R(),x=u(S=>Y.get(route("admin.user-activity-log.detail",{id:S.id}))),P=G(()=>m.screen.gt.sm?N:N.filter(S=>S.name==="id"||S.name==="action")),q=()=>{ht.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{ct("Seluruh log telah dibersihkan."),R()}).catch(S=>{var j,oe;const U=((oe=(j=S.response)==null?void 0:j.data)==null?void 0:oe.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";mt(U,"bottom"),console.error(S)})})};return(S,U)=>{const j=J("i-head"),oe=J("i-link"),re=J("authenticated-layout");return d(),w(W,null,[e(j,{title:Ll}),e(re,null,Ae({title:a(()=>[b(r(Ll))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=H=>o.value=!o.value)},null,8,["icon"]),S.$can("admin.user-activity-log.clear")?(d(),I(E,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:q})):k("",!0)]),default:a(()=>[t("div",gx,[e(Ue,{class:"full-height-table",ref_key:"tableRef",ref:f,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":U[7]||(U[7]=H=>_.value=H),filter:g.search,loading:n.value,columns:P.value,rows:i.value,"rows-per-page-options":[10,25,50],style:ze({height:l(p)}),onRequest:R,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:H,message:L,filter:pe})=>[t("div",bx,[t("span",null,r(L)+" "+r(pe?" with term "+pe:""),1)])]),body:a(H=>[e(Pe,{props:H,class:"cursor-pointer",onClick:X(L=>l(x)(H.row,L),["stop"])},{default:a(()=>[e(Q,{key:"id",props:H},{default:a(()=>[t("div",null,[l(m).screen.lt.md?(d(),w(W,{key:0},[e(V,{name:"tag",class:"inline-icon"}),U[8]||(U[8]=b(" ID Aktifitas: "))],64)):k("",!0),b(" "+r(H.row.id),1)]),l(m).screen.lt.md?(d(),w("div",vx,[t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(ve)(H.row.logged_at)),1)]),t("div",null,[e(V,{name:"person",class:"inline-icon"}),e(oe,{onClick:U[5]||(U[5]=X(()=>{},["stop"])),href:S.route("admin.user.detail",{id:H.row.user_id})},{default:a(()=>[b(r(H.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(V,{name:"category",class:"inline-icon"}),b(" "+r(H.row.activity_category_label)+" > "+r(H.row.activity_name_label),1)]),t("div",null,[e(V,{name:"notes",class:"inline-icon"}),b(" "+r(H.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"logged_at",props:H},{default:a(()=>[b(r(l(ve)(H.row.logged_at)),1)]),_:2},1032,["props"]),e(Q,{key:"username",props:H},{default:a(()=>[e(oe,{onClick:U[6]||(U[6]=X(()=>{},["stop"])),href:S.route("admin.user.detail",{id:H.row.user_id})},{default:a(()=>[b(r(H.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(Q,{key:"activity_category",props:H},{default:a(()=>[b(r(H.row.activity_category_label),1)]),_:2},1032,["props"]),e(Q,{key:"activity_name",props:H},{default:a(()=>[b(r(H.row.activity_name_label),1)]),_:2},1032,["props"]),e(Q,{key:"description",props:H,class:"wrap-column"},{default:a(()=>[b(r(H.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:H},{default:a(()=>[t("div",_x,[S.$can("admin.user-role.delete")?(d(),I(E,{key:0,onClick:X(L=>M(H.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:a(()=>[t("div",fx,[e(ce,{modelValue:g.user_id,"onUpdate:modelValue":[U[1]||(U[1]=H=>g.user_id=H),B],class:"custom-select col-xs-12 col-sm-2",options:y,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:g.activity_category,"onUpdate:modelValue":[U[2]||(U[2]=H=>g.activity_category=H),B],class:"custom-select col-xs-12 col-sm-2",options:D.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:A,clearable:""},null,8,["modelValue","options"]),e(ce,{modelValue:g.activity_name,"onUpdate:modelValue":[U[3]||(U[3]=H=>g.activity_name=H),B],class:"custom-select col-xs-12 col-sm-2",options:F.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:T},null,8,["modelValue","options"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":U[4]||(U[4]=H=>g.search=H),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},kx=Object.freeze(Object.defineProperty({__proto__:null,default:yx},Symbol.toStringTag,{value:"Module"})),yn={__name:"UpdatePasswordForm",setup(c){const s=O(!1),m=O(null),o=O(null),i=We({current_password:"",password:"",password_confirmation:""}),n=()=>{i.clearErrors(),i.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>i.reset(),onError:()=>{i.errors.password&&(i.reset("password","password_confirmation"),m.value.focus()),i.errors.current_password&&(i.reset("current_password"),o.value.focus())}})};return(f,v)=>(d(),I(Qe,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[v[6]||(v[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),v[7]||(v[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(ie,{modelValue:l(i).current_password,"onUpdate:modelValue":v[1]||(v[1]=p=>l(i).current_password=p),type:s.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.current_password,"error-message":l(i).errors.current_password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:v[0]||(v[0]=p=>s.value=!s.value)},{default:a(()=>[e(V,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(ie,{modelValue:l(i).password,"onUpdate:modelValue":v[3]||(v[3]=p=>l(i).password=p),type:s.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.password,"error-message":l(i).errors.password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:v[2]||(v[2]=p=>s.value=!s.value)},{default:a(()=>[e(V,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(ie,{modelValue:l(i).password_confirmation,"onUpdate:modelValue":v[5]||(v[5]=p=>l(i).password_confirmation=p),type:s.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.password_confirmation,"error-message":l(i).errors.password_confirmation,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:v[4]||(v[4]=p=>s.value=!s.value)},{default:a(()=>[e(V,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(ae,null,{default:a(()=>[e(E,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},wx=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"})),kn={__name:"UpdateProfileInformationForm",setup(c){const m=ge().props.auth.user,o=We({name:m.name,username:m.username,type:window.CONSTANTS.USER_TYPES[m.type]}),i=()=>lt({form:o,url:route("admin.user-profile.update")});return(n,f)=>(d(),I(Qe,{class:"row",onSubmit:X(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[f[3]||(f[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),f[4]||(f[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(ie,{modelValue:l(o).username,"onUpdate:modelValue":f[0]||(f[0]=v=>l(o).username=v),label:"ID Pengguna",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(ie,{modelValue:l(o).name,"onUpdate:modelValue":f[1]||(f[1]=v=>l(o).name=v),modelModifiers:{trim:!0},label:"Nama",disable:l(o).processing,error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[v=>v&&v.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ie,{modelValue:l(o).type,"onUpdate:modelValue":f[2]||(f[2]=v=>l(o).type=v),label:"Jenis Akun",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(ae,null,{default:a(()=>[e(E,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},hx=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"})),$x={class:"q-pa-xs"},xx={class:"row justify-center"},Sx={class:"col col-md-6"},Hl="Pengaturan Pribadi",Vx={__name:"Edit",setup(c){return(s,m)=>{const o=J("i-head"),i=J("authenticated-layout");return d(),w(W,null,[e(o,{title:Hl}),e(i,null,{title:a(()=>[b(r(Hl))]),default:a(()=>[t("div",$x,[t("div",xx,[t("div",Sx,[e(kn,{class:"q-mb-md"}),e(yn)])])])]),_:1})],64)}}},qx=Object.freeze(Object.defineProperty({__proto__:null,default:Vx},Symbol.toStringTag,{value:"Module"})),Cx={class:"q-gutter-sm"},Tx={class:"col col-md-8"},Px={class:"q-col-gutter-xs row"},Rx={class:"col-xs-12 col-md-5"},Ox={class:"row items-center"},Dx={class:"text-subtite1 text-bold q-mb-sm"},Ix={class:"text-body2"},Ux={class:"text-subtitle2 text-bold text-grey-8 q-my-sm"},jx={key:0,class:"q-gutter-xs"},Ex={key:1,class:"text-grey-8 text-italic"},Ax={class:"col-xs-12 col-md-7"},Mx={class:"row items-center"},Kl="Rincian Peran Pengguna",Nx={__name:"Detail",setup(c){const s=ge(),m=G(()=>{const o={};return s.props.data.permissions&&s.props.data.permissions.forEach(i=>{const f=i.category.replace("Manajemen ","");o[f]||(o[f]=[]),o[f].push(i)}),o});return(o,i)=>{const n=J("i-head"),f=J("i-link"),v=J("authenticated-layout");return d(),w(W,null,[e(n,{title:Kl}),e(v,null,{title:a(()=>[b(r(Kl))]),"left-button":a(()=>[t("div",Cx,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=p=>l(Y).get(o.route("admin.user-role.index")))})])]),"right-button":a(()=>i[1]||(i[1]=[])),default:a(()=>[e(Ve,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",Tx,[t("div",Px,[t("div",Rx,[e(ue,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(ae,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",Ox,[e(V,{name:"assignment_ind",size:"sm",color:"grey-8",class:"q-mr-sm"}),i[2]||(i[2]=t("div",{class:"text-subtite1 text-bold text-grey-8"}," Info Peran ",-1))])]),_:1}),e(ae,null,{default:a(()=>[t("div",Dx,r(l(s).props.data.name),1),i[4]||(i[4]=t("div",{class:"text-subtitle2 text-grey-7"},"Deskripsi:",-1)),t("div",Ix,r(l(s).props.data.description||"Tidak ada deskripsi."),1),t("div",Ux,[e(V,{name:"group",class:"q-mr-xs"}),i[3]||(i[3]=b(" Pengguna Terdaftar "))]),l(s).props.data.users.length>0?(d(),w("div",jx,[(d(!0),w(W,null,Oe(l(s).props.data.users,p=>(d(),I(f,{key:p.id,href:o.route("admin.user.detail",{id:p.id}),style:{"text-decoration":"none"}},{default:a(()=>[e(Qt,{clickable:"","text-color":"primary",color:"grey-3"},{default:a(()=>[b(r(p.username),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])):(d(),w("div",Ex," Belum ada akun pengguna yang terdaftar. "))]),_:1})]),_:1})]),t("div",Ax,[e(ue,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(ae,{class:"bg-grey-3 q-py-sm"},{default:a(()=>[t("div",Mx,[e(V,{name:"security",size:"sm",color:"grey-8",class:"q-mr-sm"}),i[5]||(i[5]=t("div",{class:"text-subtite1 text-grey-8 text-bold"}," Daftar Hak Akses ",-1))])]),_:1}),l(s).props.data.permissions.length>0?(d(),I(ae,{key:0,class:"q-pa-none"},{default:a(()=>[e(Ie,{bordered:"",separator:""},{default:a(()=>[(d(!0),w(W,null,Oe(m.value,(p,u)=>(d(),I(bt,{key:u,label:u,"header-class":"text-bold bg-grey-1 text-grey-7","default-opened":""},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",null,[(d(!0),w(W,null,Oe(p,g=>(d(),I(Qt,{key:g.id,color:"grey-2","text-color":"grey-9",size:"sm"},{default:a(()=>[b(r(g.label),1)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})):(d(),I(ae,{key:1},{default:a(()=>i[6]||(i[6]=[t("div",{class:"text-grey-7 text-italic"}," Belum ada hak akses yang ditetapkan. ",-1)])),_:1}))]),_:1})])])])]),_:1})]),_:1})],64)}}},Bx=ft(Nx,[["__scopeId","data-v-7dee658a"]]),zx=Object.freeze(Object.defineProperty({__proto__:null,default:Bx},Symbol.toStringTag,{value:"Module"})),Fx={class:"q-gutter-sm"},Lx={class:"col col-md-6 q-pa-xs"},Hx={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},Kx={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=We({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description,permissions:s.props.data.permissions?s.props.data.permissions.map(f=>f.id):[]}),i=()=>lt({form:o,url:route("admin.user-role.save")}),n=G(()=>{const f={};return s.props.permissions&&s.props.permissions.forEach(v=>{const p=v.category;f[p]||(f[p]=[]),f[p].push(v)}),f});return(f,v)=>{const p=J("i-head"),u=J("authenticated-layout");return d(),w(W,null,[e(p,{title:m}),e(u,null,{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",Fx,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=g=>l(Y).get(f.route("admin.user-role.index")))})])]),"right-button":a(()=>[e(E,{icon:"save",label:"Simpan",color:"primary",disable:l(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:X(i,["prevent"])},null,8,["disable"])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",Lx,[e(Qe,{class:"row",onSubmit:X(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=g=>l(o).id=g)},null,512),[[vt,l(o).id]]),e(ie,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":v[2]||(v[2]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(o).description,"onUpdate:modelValue":v[3]||(v[3]=g=>l(o).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(d(!0),w(W,null,Oe(n.value,(g,_)=>(d(),w("div",{key:_},[t("div",Hx,r(_),1),(d(!0),w(W,null,Oe(g,y=>(d(),w("div",{key:y.id},[e(la,{class:"q-ma-none q-pa-none list-checkbox",modelValue:l(o).permissions,"onUpdate:modelValue":$=>l(o).permissions=$,val:y.id,label:y.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Yx=ft(Kx,[["__scopeId","data-v-8b35322b"]]),Wx=Object.freeze(Object.defineProperty({__proto__:null,default:Yx},Symbol.toStringTag,{value:"Module"})),Qx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Jx={class:"q-pa-xs"},Gx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Xx={class:"flex justify-end"},Yl="Peran Pengguna",Zx={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=De({search:"",...Ne()}),u=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Peran",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];ye(()=>{y()});const _=A=>at({message:`Hapus role ${A.name}?`,url:route("admin.user-role.delete",A.id),fetchItemsCallback:y,loading:i}),y=(A=null)=>{Be({pagination:u,filter:p,props:A,rows:o,url:route("admin.user-role.data"),loading:i,tableRef:n})},$=A=>Y.get(route("admin.user-role.detail",{id:A.id})),{protectClick:C}=Dt(),D=C($),F=G(()=>s.screen.gt.sm?g:g.filter(A=>A.name==="name"||A.name==="action"));return(A,T)=>{const N=J("i-head"),M=J("authenticated-layout");return d(),w(W,null,[e(N,{title:Yl}),e(M,null,Ae({title:a(()=>[b(r(Yl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=R=>m.value=!m.value)},null,8,["icon"]),A.$can("admin.user-role.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:T[1]||(T[1]=R=>l(Y).get(A.route("admin.user-role.add")))})):k("",!0)]),default:a(()=>[t("div",Jx,[e(Ue,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":T[4]||(T[4]=R=>u.value=R),filter:p.search,loading:i.value,columns:F.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:l(v)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:R,message:B,filter:h})=>[t("div",Gx,[t("span",null,r(B)+" "+r(h?" with term "+h:""),1)])]),body:a(R=>[e(Pe,{props:R,class:"cursor-pointer",onClick:X(B=>l(D)(R.row,B),["stop"])},{default:a(()=>[e(Q,{key:"name",props:R,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),I(V,{key:0,name:"person"})):k("",!0),b(" "+r(R.row.name),1)])]),_:2},1032,["props"]),e(Q,{key:"description",props:R,class:"wrap-column"},{default:a(()=>[b(r(R.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:R},{default:a(()=>[t("div",Xx,[A.$can("admin.user-role.add")||A.$can("admin.user-role.edit")||A.$can("admin.user-role.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:T[3]||(T[3]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[A.$can("admin.user-role.add")?te((d(),I(le,{key:0,clickable:"",onClick:X(B=>l(Y).get(A.route("admin.user-role.duplicate",R.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>T[5]||(T[5]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),A.$can("admin.user-role.edit")?te((d(),I(le,{key:1,clickable:"",onClick:X(B=>l(Y).get(A.route("admin.user-role.edit",R.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>T[6]||(T[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),A.$can("admin.user-role.delete")?te((d(),I(le,{key:2,onClick:X(B=>_(R.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>T[7]||(T[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Qx,[e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":T[2]||(T[2]=R=>p.search=R),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},eS=Object.freeze(Object.defineProperty({__proto__:null,default:Zx},Symbol.toStringTag,{value:"Module"})),tS={class:"q-gutter-sm"},aS={class:"q-gutter-sm"},lS={class:"row justify-center"},oS={class:"col col-md-6 q-pa-xs"},nS={class:"row"},sS={class:"row items-center justify-between"},rS={class:"text-subtitle1 text-bold text-grey-9"},iS={class:"q-gutter-xs"},Wl="Rincian Pengguna",dS={__name:"Detail",setup(c){const s=ge(),m=G(()=>s.props.data),o=G(()=>m.value.active?"positive":"negative"),i=G(()=>m.value.active?"Aktif":"Tidak Aktif");return(n,f)=>{const v=J("i-head"),p=J("i-link"),u=J("authenticated-layout");return d(),w(W,null,[e(v,{title:Wl}),e(u,{"show-drawer-button":!0},{title:a(()=>[b(r(Wl))]),"left-button":a(()=>[t("div",tS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=g=>n.$inertia.get(n.route("admin.user.index")))})])]),"right-button":a(()=>[t("div",aS,[n.$can("admin.user.edit")&&l(s).props.data.id!=l(s).props.auth.user.id?(d(),I(E,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:f[1]||(f[1]=g=>n.$inertia.get(n.route("admin.user.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[t("div",lS,[t("div",oS,[t("div",nS,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",sS,[t("div",rS,[e(V,{name:"person",class:"q-mr-xs",size:"sm"}),f[2]||(f[2]=b(" Profil Pengguna "))]),e(ot,{color:o.value,label:i.value,class:"q-pa-xs"},null,8,["color","label"])])]),_:1}),e(Ie,null,{default:a(()=>[e(le,{class:"bg-white"},{default:a(()=>[e(z,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[3]||(f[3]=[b("Nama Pengguna")])),_:1}),e(be,{class:"text-subtitle1 text-bold"},{default:a(()=>[b(r(m.value.name),1)]),_:1})]),_:1})]),_:1}),e(le,null,{default:a(()=>[e(z,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[4]||(f[4]=[b("ID Pengguna")])),_:1}),e(be,null,{default:a(()=>[b(r(m.value.username),1)]),_:1})]),_:1})]),_:1}),e(le,null,{default:a(()=>[e(z,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[5]||(f[5]=[b("Jenis Akun")])),_:1}),e(be,null,{default:a(()=>[b(r(n.$CONSTANTS.USER_TYPES[m.value.type]),1)]),_:1})]),_:1})]),_:1}),m.value.roles.length>0?(d(),I(le,{key:0},{default:a(()=>[e(z,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[6]||(f[6]=[b("Peran Pengguna")])),_:1}),e(be,null,{default:a(()=>[t("div",iS,[(d(!0),w(W,null,Oe(m.value.roles,g=>(d(),I(p,{key:g.id,href:n.route("admin.user-role.detail",{id:g.id}),style:{"text-decoration":"none"}},{default:a(()=>[e(Qt,{clickable:"",icon:"military_tech",size:"sm"},{default:a(()=>[b(r(g.name),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])]),_:1})]),_:1})]),_:1})):k("",!0),e(le,null,{default:a(()=>[e(z,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[7]||(f[7]=[b("Informasi Rekaman")])),_:1}),m.value.created_at?(d(),I(be,{key:0},{default:a(()=>{var g,_;return[b(" Dibuat "+r(l(ve)(m.value.created_at))+" oleh ",1),t("span",null,r(((g=m.value.creator)==null?void 0:g.name)??"Sistem")+" ("+r(((_=m.value.creator)==null?void 0:_.username)??"system")+")",1)]}),_:1})):k("",!0),m.value.updated_at?(d(),I(be,{key:1},{default:a(()=>[b(" Diperbarui "+r(l(ve)(m.value.updated_at))+" ",1),m.value.updater?(d(),w(W,{key:0},[f[8]||(f[8]=b(" oleh ")),t("span",null,r(m.value.updater.name)+" ("+r(m.value.updater.username)+")",1)],64)):k("",!0)]),_:1})):k("",!0)]),_:1})]),_:1}),e(le,null,{default:a(()=>[e(z,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[9]||(f[9]=[b("Aktifitas")])),_:1}),e(be,null,{default:a(()=>[e(V,{class:"inline-icon",name:"login"}),b(" "+r(m.value.last_login_datetime?"Terakhir login pada "+l(ve)(m.value.last_login_datetime):"Belum pernah login"),1)]),_:1}),m.value.last_activity_datetime?(d(),I(be,{key:0},{default:a(()=>[e(V,{class:"inline-icon",name:"calendar_today"}),b(" "+r(l(ve)(m.value.last_activity_datetime))+" - "+r(m.value.last_activity_description),1)]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])])])]),_:1})],64)}}},uS=Object.freeze(Object.defineProperty({__proto__:null,default:dS},Symbol.toStringTag,{value:"Module"}));function mS(c){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(c)}const cS={class:"q-gutter-sm"},pS={class:"row justify-center"},fS={class:"col col-md-6 q-pa-xs"},gS={__name:"Editor",setup(c){const s=Ke(window.CONSTANTS.USER_TYPES),m=ge(),o=m.props.roles,i=m.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=O(!m.props.data.id),f=m.props.data.roles,v=Array.isArray(f)?f.map(g=>g.id):[],p=We({id:m.props.data.id,name:m.props.data.name,username:m.props.data.username,password:m.props.data.id?null:"12345",type:m.props.data.type?m.props.data.type:s[0].value,active:!!m.props.data.active,roles:v}),u=()=>lt({form:p,url:route("admin.user.save")});return(g,_)=>{const y=J("i-head"),$=J("authenticated-layout");return d(),w(W,null,[e(y,{title:l(i)},null,8,["title"]),e($,{"show-drawer-button":!0},{title:a(()=>[b(r(l(i)),1)]),"left-button":a(()=>[t("div",cS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=C=>l(Y).get(g.route("admin.user.index")))})])]),default:a(()=>[t("div",pS,[t("div",fS,[e(Qe,{class:"row",onSubmit:X(u,["prevent"])},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=C=>l(p).id=C)},null,512),[[vt,l(p).id]]),e(ie,{autofocus:"",modelValue:l(p).username,"onUpdate:modelValue":_[2]||(_[2]=C=>l(p).username=C),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:l(p).processing,error:!!l(p).errors.username,"error-message":l(p).errors.username,rules:[C=>C&&C.length>0||"Username harus diisi.",C=>l(mS)(C)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ie,{modelValue:l(p).name,"onUpdate:modelValue":_[3]||(_[3]=C=>l(p).name=C),modelModifiers:{trim:!0},label:"Nama",error:!!l(p).errors.name,disable:l(p).processing,"error-message":l(p).errors.name,rules:[C=>C&&C.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(p).password,"onUpdate:modelValue":_[5]||(_[5]=C=>l(p).password=C),label:"Kata Sandi","lazy-rules":"",disable:l(p).processing,error:!!l(p).errors.password,"error-message":l(p).errors.password,"hide-bottom-space":"",type:n.value?"text":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:_[4]||(_[4]=C=>n.value=!n.value)},{default:a(()=>[e(V,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","disable","error","error-message","type"]),e(ce,{modelValue:l(p).type,"onUpdate:modelValue":_[6]||(_[6]=C=>l(p).type=C),label:"Jenis Akun",options:l(s),"map-options":"","emit-value":"","lazy-rules":"",disable:l(p).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(p).errors.type,"error-message":l(p).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),l(p).type=="standard_user"?(d(),I(ce,{key:0,modelValue:l(p).roles,"onUpdate:modelValue":_[7]||(_[7]=C=>l(p).roles=C),label:"Peran",options:l(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:l(p).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(p).errors.roles||!!l(p).errors["roles.0"],"error-message":l(p).errors.roles||l(p).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(ga,{modelValue:l(p).active,"onUpdate:modelValue":_[8]||(_[8]=C=>l(p).active=C),disable:l(p).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(p).processing,onClick:u},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",class:"text-black",disable:l(p).processing,onClick:_[9]||(_[9]=C=>l(Y).get(g.route("admin.user.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},bS=Object.freeze(Object.defineProperty({__proto__:null,default:gS},Symbol.toStringTag,{value:"Module"})),vS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},_S={class:"q-pa-xs"},yS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},kS={key:0},wS={class:"flex justify-end"},Ql="Pengguna",hS={__name:"Index",setup(c){const s=[{value:"all",label:"Semua"},...Ke(window.CONSTANTS.USER_TYPES)],m=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=ge(),i=ke(),n=o.props.auth.user,f=O([]),v=O(!0),p=O(!1),u=De({type:"all",roles:[],status:"active",search:""}),g=o.props.roles.map(h=>({value:h.id,label:h.name})),_=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),y=[{name:"username",label:i.screen.gt.sm?"ID Pengguna":"Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];ye(()=>{C()});const $=()=>C(),C=(h=null)=>Be({pagination:_,props:h,rows:f,loading:v,filter:u,url:route("admin.user.data"),tableRef:M}),D=h=>at({url:route("admin.user.delete",h.id),message:`Hapus pengguna ${h.username}?`,fetchItemsCallback:C,loading:v}),F=G(()=>i.screen.gt.sm?y:y.filter(h=>h.name==="username"||h.name==="action")),A=h=>Y.get(route("admin.user.detail",h.id)),{protectClick:T}=Dt(),N=T(A),M=O(null),R=O(null),B=tt(R);return(h,x)=>{const P=J("i-head"),q=J("authenticated-layout");return d(),w(W,null,[e(P,{title:Ql}),e(q,null,Ae({title:a(()=>[b(r(Ql))]),"right-button":a(()=>[e(E,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=S=>p.value=!p.value)},null,8,["icon"]),h.$can("admin.user.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:x[1]||(x[1]=S=>l(Y).get(h.route("admin.user.add")))})):k("",!0)]),default:a(()=>[t("div",_S,[e(Ue,{ref_key:"tableRef",ref:M,class:"full-height-table",style:ze({height:l(B)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":x[7]||(x[7]=S=>_.value=S),filter:u.search,loading:v.value,columns:F.value,rows:f.value,"rows-per-page-options":[10,25,50],onRequest:C,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:S,message:U,term:j})=>[t("div",yS,[t("span",null,r(U)+" "+r(j?" with term "+j:""),1)])]),body:a(S=>[e(Pe,{props:S,class:xe([S.row.active?"":"bg-red-1","cursor-pointer"]),onClick:X(U=>l(N)(S.row,U),["stop"])},{default:a(()=>[e(Q,{key:"username",props:S},{default:a(()=>[t("div",null,[l(i).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[],64)),b(" "+r(S.row.username),1)]),l(i).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[t("div",null,r(S.row.name),1),e(ot,{color:S.row.type=="super_user"?"red":"primary"},{default:a(()=>[b(r(h.$CONSTANTS.USER_TYPES[S.row.type]),1)]),_:2},1032,["color"]),S.row.roles.length>0?(d(),w("div",kS,r(S.row.roles.map(U=>U.name).join(",")),1)):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"name",props:S},{default:a(()=>[b(r(S.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"role",props:S,align:"center"},{default:a(()=>[t("span",null,r(h.$CONSTANTS.USER_TYPES[S.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:S},{default:a(()=>[t("div",wS,[h.$can("admin.user.add")||h.$can("admin.user.edit")||h.$can("admin.user.delete")?(d(),I(E,{key:0,disable:S.row.id==l(n).id||S.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[6]||(x[6]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[h.$can("admin.user.add")?te((d(),I(le,{key:0,clickable:"",onClick:X(U=>l(Y).get(h.route("admin.user.duplicate",S.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>x[8]||(x[8]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),h.$can("admin.user.edit")?te((d(),I(le,{key:1,clickable:"",onClick:X(U=>l(Y).get(h.route("admin.user.edit",S.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>x[9]||(x[9]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),h.$can("admin.user.delete")?te((d(),I(le,{key:2,onClick:X(U=>D(S.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>x[10]||(x[10]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[p.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:R},{default:a(()=>[t("div",vS,[e(ce,{modelValue:u.type,"onUpdate:modelValue":[x[2]||(x[2]=S=>u.type=S),$],class:"custom-select col-xs-12 col-sm-2",options:s,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:u.status,"onUpdate:modelValue":[x[3]||(x[3]=S=>u.status=S),$],class:"custom-select col-xs-12 col-sm-2",options:m,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:u.roles,"onUpdate:modelValue":[x[4]||(x[4]=S=>u.roles=S),$],class:"custom-select col-xs-12 col-sm-2",options:l(g),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":x[5]||(x[5]=S=>u.search=S),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},$S=Object.freeze(Object.defineProperty({__proto__:null,default:hS},Symbol.toStringTag,{value:"Module"})),xS={class:"q-gutter-sm"},SS={class:"col col-lg-6 q-pa-xs"},VS={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},qS={class:"row q-col-gutter-sm q-mb-md"},CS={key:0},TS={class:"text-bold"},PS={key:0},RS={class:"text-caption text-grey-8"},OS={key:1},Jl="Buat Penyesuaian Stok",DS={__name:"Create",setup(c){const s=ge(),m=O(!1),o=s.props.products,{filteredCategories:i,filterCategories:n}=ba(s.props.categories),{filteredSuppliers:f,filterSupplierFn:v}=va(s.props.suppliers),p=O({search:null,category_id:null,supplier_id:null}),u=O([]),g=We({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),_=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(A,T)=>K(A)+" "+T.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],y=Ke(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),$=G(()=>o.filter(A=>{let T=!0;if(m.value&&!u.value.find(N=>N.id===A.id))return!1;if(p.value.search){const N=p.value.search.toLowerCase();T=A.name.toLowerCase().includes(N)||A.description.toLowerCase().includes(N)||A.barcode&&A.barcode.toLowerCase().includes(N)}return T&&p.value.category_id&&(T=A.category_id===p.value.category_id),T&&p.value.supplier_id&&(T=A.supplier_id===p.value.supplier_id),T})),C=()=>{ht.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{g.product_ids=u.value.map(A=>A.id),na(g,{datetime:"YYYY-MM-DD HH:mm:ss"}),lt({form:g,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},D=ke(),F=G(()=>D.screen.gt.sm?_:_.filter(A=>A.name==="name"));return(A,T)=>{const N=J("i-head"),M=J("authenticated-layout");return d(),w(W,null,[e(N,{title:Jl}),e(M,{"show-drawer-button":!0},{title:a(()=>[b(r(Jl))]),"left-button":a(()=>[t("div",xS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:T[0]||(T[0]=R=>l(Y).get(A.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[e(E,{icon:"cancel",disable:l(g).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:T[1]||(T[1]=R=>l(Y).get(A.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(E,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:l(g).processing||u.value.length==0,class:"q-ml-sm",onClick:C},null,8,["disable"])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",SS,[e(Qe,{class:"row",onSubmit:X(C,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-sm"},{default:a(()=>{var R,B,h;return[T[10]||(T[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Fe,{modelValue:l(g).datetime,"onUpdate:modelValue":T[2]||(T[2]=x=>l(g).datetime=x),label:"Waktu",error:!!l(g).errors.datetime,disable:l(g).processing,"error-message":l(g).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:l(g).type,"onUpdate:modelValue":T[3]||(T[3]=x=>l(g).type=x),options:l(y),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(g).errors.type,disable:l(g).processing,"map-options":"","emit-value":"","error-message":l(g).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(ie,{modelValue:l(g).notes,"onUpdate:modelValue":T[4]||(T[4]=x=>l(g).notes=x),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(g).processing,error:!!l(g).errors.notes,"error-message":l(g).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),u.value.length===0||(R=l(s).props.errors)!=null&&R.product_ids?(d(),w("div",VS,[u.value.length===0?(d(),w(W,{key:0},[b(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(B=l(s).props.errors)!=null&&B.product_ids?(d(),w(W,{key:1},[b(r((h=l(s).props.errors)==null?void 0:h.product_ids),1)],64)):k("",!0)])):k("",!0),T[11]||(T[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",qS,[e(ie,{modelValue:p.value.search,"onUpdate:modelValue":T[5]||(T[5]=x=>p.value.search=x),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(ce,{modelValue:p.value.category_id,"onUpdate:modelValue":T[6]||(T[6]=x=>p.value.category_id=x),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(i),"map-options":"",dense:"","emit-value":"",onFilter:l(n),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(ce,{modelValue:p.value.supplier_id,"onUpdate:modelValue":T[7]||(T[7]=x=>p.value.supplier_id=x),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(f),"map-options":"",dense:"","emit-value":"",onFilter:l(v),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:T[8]||(T[8]=x=>m.value=!m.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},r(m.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:F.value,rows:$.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:u.value,"onUpdate:selected":T[9]||(T[9]=x=>u.value=x)},{"body-cell-name":a(x=>[e(Q,{props:x},{default:a(()=>[l(D).screen.lt.md?(d(),w("div",CS,[t("div",TS,r(x.row.name),1),x.row.category?(d(),w("div",PS,r(x.row.category.name),1)):k("",!0),t("div",RS,r(l(K)(x.row.stock))+" "+r(x.row.uom),1)])):(d(),w("div",OS,r(x.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},IS=Object.freeze(Object.defineProperty({__proto__:null,default:DS},Symbol.toStringTag,{value:"Module"})),US={class:"q-gutter-sm"},jS={class:"q-gutter-sm"},ES={class:"row justify-center"},AS={class:"col col-lg-8 q-pa-sm"},MS={class:"row"},NS={class:"detail"},BS={key:0},zS={key:1},FS={class:"text-grey-9"},LS={__name:"Detail",setup(c){const s=ge(),m=`Rincian #${s.props.data.code}`,o=s.props.details,i=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:p=>K(p)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:p=>K(p)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:p=>K(p)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],n=ke(),f=G(()=>n.screen.gt.sm?i:i.filter(p=>p.name==="no")),v=()=>{window.open(route("admin.stock-adjustment.print",{id:s.props.data.id}),"_blank")};return(p,u)=>{const g=J("i-head"),_=J("i-link"),y=J("authenticated-layout");return d(),w(W,null,[e(g,{title:m}),e(y,{"show-drawer-button":!0},{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",US,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=$=>p.$inertia.get(p.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[t("div",jS,[e(E,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[1]||(u[1]=$=>v())})])]),default:a(()=>[t("div",ES,[t("div",AS,[t("div",MS,[e(ue,{square:"",flat:"",bordered:"",class:"q-card col"},{default:a(()=>[e(ae,null,{default:a(()=>[u[22]||(u[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",NS,[t("tbody",null,[t("tr",null,[u[2]||(u[2]=t("td",{style:{width:"120px"}},"Kode",-1)),u[3]||(u[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+r(l(s).props.data.code),1)]),t("tr",null,[u[4]||(u[4]=t("td",null,"Jenis",-1)),u[5]||(u[5]=t("td",null,":",-1)),t("td",null,r(p.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[l(s).props.data.type]),1)]),t("tr",null,[u[6]||(u[6]=t("td",null,"Status",-1)),u[7]||(u[7]=t("td",null,":",-1)),t("td",null,r(p.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[u[8]||(u[8]=t("td",null,"Waktu",-1)),u[9]||(u[9]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),l(s).props.data.created_at?(d(),w("tr",BS,[u[11]||(u[11]=t("td",null,"Dibuat Oleh",-1)),u[12]||(u[12]=t("td",null,":",-1)),t("td",null,[l(s).props.data.creator?(d(),w(W,{key:0},[e(_,{href:p.route("admin.user.detail",{id:l(s).props.data.creator})},{default:a(()=>[b(r(l(s).props.data.creator.username)+" - "+r(l(s).props.data.creator.name),1)]),_:1},8,["href"]),u[10]||(u[10]=b(" - "))],64)):k("",!0),b(" "+r(l(ve)(l(s).props.data.created_at)),1)])])):k("",!0),l(s).props.data.updater?(d(),w("tr",zS,[u[14]||(u[14]=t("td",null,"Diperbarui oleh",-1)),u[15]||(u[15]=t("td",null,":",-1)),t("td",null,[l(s).props.data.updater?(d(),w(W,{key:0},[e(_,{href:p.route("admin.user.detail",{id:l(s).props.data.updater})},{default:a(()=>[b(r(l(s).props.data.updater.username)+" - "+r(l(s).props.data.updater.name),1)]),_:1},8,["href"]),u[13]||(u[13]=b(" - "))],64)):k("",!0),b(" "+r(l(ve)(l(s).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[u[16]||(u[16]=t("td",null,"Total Modal",-1)),u[17]||(u[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:xe(l(s).props.data.total_cost<0?"text-red-10":l(s).props.data.total_cost>0?"text-green-10":"")},r(l(ta)(l(s).props.data.total_cost)),3)])]),t("tr",null,[u[18]||(u[18]=t("td",null,"Total Harga",-1)),u[19]||(u[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:xe(l(s).props.data.total_price<0?"text-red-10":l(s).props.data.total_price>0?"text-green-10":"")},r(l(ta)(l(s).props.data.total_price)),3)])]),t("tr",null,[u[20]||(u[20]=t("td",null,"Catatan",-1)),u[21]||(u[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)])])])]),_:1}),e(ae,null,{default:a(()=>[u[28]||(u[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Ue,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:f.value,rows:l(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":a($=>[e(Q,{props:$},{default:a(()=>[l(n).screen.lt.md?(d(),w(W,{key:1},[t("div",FS,[t("b",null,"#"+r($.rowIndex+1),1),u[23]||(u[23]=b(" - ")),e(_,{href:p.route("admin.product.detail",{id:$.row.product_id})},{default:a(()=>[b(r($.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[b(" Stok Lama: "+r(l(K)($.row.old_quantity))+" "+r($.row.uom),1),u[25]||(u[25]=t("br",null,null,-1)),b(" Stok Baru: "+r(l(K)($.row.new_quantity))+" "+r($.row.uom),1),u[26]||(u[26]=t("br",null,null,-1)),t("div",{class:xe($.row.balance<0?"text-red-10":$.row.balance>0?"text-green-10":"")},[b(" Selisih: "+r(($.row.balance>0?"+":"")+l(K)($.row.balance))+" "+r($.row.uom),1),u[24]||(u[24]=t("br",null,null,-1)),b(" (Rp. "+r(l(K)($.row.subtotal_cost))+" / Rp. "+r(l(K)($.row.subtotal_price))+") ",1)],2),u[27]||(u[27]=t("br",null,null,-1)),b(" "+r($.row.notes),1)])],64)):(d(),w(W,{key:0},[b(r($.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":a($=>[e(Q,{props:$},{default:a(()=>[e(_,{href:p.route("admin.product.detail",{id:$.row.product_id})},{default:a(()=>[b(r($.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":a($=>[e(Q,{props:$},{default:a(()=>[t("div",{class:xe($.row.balance<0?"text-red-10":$.row.balance>0?"text-green-10":"")},r(($.row.balance>0?"+":"")+l(K)($.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":a($=>[e(Q,{props:$},{default:a(()=>[t("div",{class:xe($.row.balance<0?"text-red-10":$.row.balance>0?"text-green-10":"")},r(l(K)($.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":a($=>[e(Q,{props:$},{default:a(()=>[t("div",{class:xe($.row.balance<0?"text-red-10":$.row.balance>0?"text-green-10":"")},r(l(K)($.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},HS=Object.freeze(Object.defineProperty({__proto__:null,default:LS},Symbol.toStringTag,{value:"Module"})),KS={class:"q-gutter-sm"},YS={class:"col col-lg-6 q-pa-xs"},WS={class:"text-bold"},QS={key:0},JS={class:"text-caption text-grey-8"},Gl="Penyesuaian Stok",GS={__name:"Editor",setup(c){const s=ke(),m=ge(),o=We({id:m.props.item.id,type:m.props.item.type,datetime:new Date(m.props.item.datetime),notes:m.props.item.notes,action:"save",details:[]}),i=Ke(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),n=O(m.props.details.map(g=>(typeof g.new_quantity=="string"&&(g.new_quantity=parseFloat(g.new_quantity)),g))),f=g=>{const _=()=>{o.action=g,o.details=n.value.map(y=>({id:y.id,new_quantity:y.new_quantity})),na(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),lt({form:o,url:route("admin.stock-adjustment.save")})};g==="close"||g==="cancel"?ht.create({title:"Konfirmasi",message:g==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{_()}).onCancel(()=>{}):_()},v=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:g=>K(g)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:g=>K(g)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(g,_)=>K(_.new_quantity-_.old_quantity)}],p=G(()=>s.screen.gt.sm?v:v.filter(g=>g.name==="product_name"||g.name==="new_quantity")),u=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(g,_)=>{const y=J("i-head"),$=J("authenticated-layout");return d(),w(W,null,[e(y,{title:Gl}),e($,{"show-drawer-button":!0},{title:a(()=>[b(r(Gl))]),"left-button":a(()=>[t("div",KS,[l(s).screen.gt.sm?(d(),I(E,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=C=>g.$inertia.get(g.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":a(()=>[e(E,{icon:"save",onClick:_[1]||(_[1]=C=>f("save")),disable:l(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(E,{icon:"check",onClick:_[2]||(_[2]=C=>f("close")),disable:l(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),g.$can("admin.product.import")||g.$can("admin.product:view-cost")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:_[5]||(_[5]=X(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[te((d(),I(le,{clickable:"",onClick:_[3]||(_[3]=C=>u())},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"print"})]),_:1}),e(z,null,{default:a(()=>_[10]||(_[10]=[b(" Cetak Kartu Stok")])),_:1})]),_:1})),[[se],[me]]),te((d(),I(le,{clickable:"",onClick:_[4]||(_[4]=X(C=>f("cancel"),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"cancel",color:"red"})]),_:1}),e(z,{class:"text-red"},{default:a(()=>_[11]||(_[11]=[b("Batalkan")])),_:1})]),_:1})),[[se],[me]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",YS,[e(Qe,{class:"row",onSubmit:X(f,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>_[12]||(_[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[6]||(_[6]=C=>l(o).id=C)},null,512),[[vt,l(o).id]]),e(Fe,{modelValue:l(o).datetime,"onUpdate:modelValue":_[7]||(_[7]=C=>l(o).datetime=C),label:"Waktu",error:!!l(o).errors.datetime,disable:l(o).processing,"error-message":l(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":_[8]||(_[8]=C=>l(o).type=C),options:l(i),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(o).errors.type,disable:l(o).processing,"map-options":"","emit-value":"","error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(ie,{modelValue:l(o).notes,"onUpdate:modelValue":_[9]||(_[9]=C=>l(o).notes=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-pa-xs"},{default:a(()=>[e(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:p.value,rows:n.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":a(C=>[e(Q,{props:C},{default:a(()=>[t("div",WS,r(C.row.product_name),1),l(s).screen.lt.md?(d(),w("div",QS,[t("div",JS,[b(" Tercatat: "+r(l(K)(C.row.old_quantity))+" ",1),_[13]||(_[13]=t("br",null,null,-1)),b(" Selisih: "+r(l(K)(C.row.new_quantity-C.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":a(C=>[e(Q,{props:C,class:"text-center"},{default:a(()=>[e(Ee,{modelValue:C.row[C.col.name],"onUpdate:modelValue":D=>C.row[C.col.name]=D,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},XS=Object.freeze(Object.defineProperty({__proto__:null,default:GS},Symbol.toStringTag,{value:"Module"}));function ZS(){const c=St();if(!c)throw new Error("useCan must be called within a component setup function.");return s=>c.proxy.$can(s)}const eV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},tV={class:"q-pa-xs"},aV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},lV={key:0,class:"flex q-gutter-xs"},oV={class:"flex q-col-gutter-xs"},nV={key:0},sV={key:1},rV={key:0},iV={class:"flex justify-end"},Xl="Penyesuaian Stok",dV={__name:"Index",setup(c){const s=O([]),m=O(!0),o=O(!1),i=O(null),n=O(null),f=tt(n),v=Ce().startOf("month").toDate(),p=Ce().endOf("month").toDate(),u=De({search:"",start_date:v,end_date:p,status:"all",type:"all",...Ne()}),g=[{value:"all",label:"Semua"},...Ke(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],_=[{value:"all",label:"Semua"},...Ke(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],y=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),$=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];ye(()=>{D()});const C=B=>at({message:`Hapus Penyesuaian Stok #${B.code}?`,url:route("admin.stock-adjustment.delete",B.id),fetchItemsCallback:D,loading:m}),D=(B=null)=>{const h={...u,start_date:Ce(u.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Ce(u.end_date).format("YYYY-MM-DD HH:mm:ss")};Be({pagination:y,filter:h,props:B,rows:s,url:route("admin.stock-adjustment.data"),loading:m,tableRef:i})},F=()=>{D()},A=B=>{B.status=="draft"?Y.get(route("admin.stock-adjustment.editor",B.id)):Y.get(route("admin.stock-adjustment.detail",B.id))},{protectClick:T}=Dt(),N=T(A),M=ke(),R=G(()=>{let B=$;return ZS()||(B=B.filter(h=>h.name!=="cost")),M.screen.gt.sm?B:B.filter(h=>h.name==="id"||h.name==="action")});return(B,h)=>{const x=J("i-head"),P=J("authenticated-layout");return d(),w(W,null,[e(x,{title:Xl}),e(P,null,Ae({"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=q=>o.value=!o.value)},null,8,["icon"]),B.$can("admin.stock-adjustment.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=q=>l(Y).get(B.route("admin.stock-adjustment.create")))})):k("",!0)]),title:a(()=>[b(r(Xl))]),default:a(()=>[t("div",tV,[e(Ue,{ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:y.value,"onUpdate:pagination":h[8]||(h[8]=q=>y.value=q),filter:u.search,loading:m.value,columns:R.value,rows:s.value,"rows-per-page-options":[10,25,50],style:ze({height:l(f)}),onRequest:D,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:S,filter:U})=>[t("div",aV,[t("span",null,r(S)+" "+r(U?" with term "+U:""),1)])]),body:a(q=>[e(Pe,{props:q,onClick:X(S=>l(N)(q.row,S),["stop"]),class:"cursor-pointer"},{default:a(()=>[e(Q,{key:"id",props:q},{default:a(()=>[l(M).screen.lt.md?(d(),w(W,{key:1},[t("div",oV,[t("div",null,"#"+r(q.row.code),1),t("div",null,[e(V,{name:"history"}),b(" "+r(l(ve)(q.row.datetime)),1)]),e(Qt,{dense:"",size:"sm",color:q.row.status==="draft"?"orange":q.row.status==="closed"?"green":q.row.status==="canceled"?"red":"",icon:q.row.status==="draft"?"emergency":q.row.status==="closed"?"check":q.row.status==="canceled"?"close":""},{default:a(()=>[b(r(B.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[q.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(V,{name:"category"}),b(" "+r(B.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[q.row.type]),1)]),q.row.created_by?(d(),w("div",nV,[e(V,{name:"person"}),h[9]||(h[9]=b(" Dibuat: ")),t("b",null,r(q.row.created_by.username),1),e(V,{name:"history"}),b(" "+r(l(ve)(q.row.created_at)),1)])):k("",!0),q.row.updated_by?(d(),w("div",sV,[e(V,{name:"person"}),h[10]||(h[10]=b(" Diperbarui: ")),t("b",null,r(q.row.updated_by.username),1),e(V,{name:"history"}),b(" "+r(l(ve)(q.row.updated_at)),1)])):k("",!0),t("div",{class:xe(q.row.total_cost<0?"text-red-10":q.row.total_cost>0?"text-green-10":"")},[e(V,{name:"money"}),B.$can("admin.product:view-cost")?(d(),w("span",rV,"Rp. "+r(l(K)(q.row.total_cost))+" / ",1)):k("",!0),b(" Rp. "+r(l(K)(q.row.total_price)),1)],2)],64)):(d(),w("div",lV,"#"+r(q.row.code),1))]),_:2},1032,["props"]),e(Q,{key:"datetime",props:q},{default:a(()=>[b(r(l(ve)(q.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"status",props:q,class:"text-center"},{default:a(()=>[b(r(B.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[q.row.status]),1)]),_:2},1032,["props"]),e(Q,{key:"type",props:q},{default:a(()=>[b(r(B.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[q.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"total_cost",props:q},{default:a(()=>[B.$can("admin.product:view-cost")?(d(),w("div",{key:0,class:xe(q.row.total_cost<0?"text-red-10":q.row.total_cost>0?"text-green-10":"")},r(l(K)(q.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"total_price",props:q},{default:a(()=>[t("div",{class:xe(q.row.total_price<0?"text-red-10":q.row.total_price>0?"text-green-10":"")},r(l(K)(q.row.total_price)),3)]),_:2},1032,["props"]),e(Q,{key:"notes",props:q},{default:a(()=>[b(r(q.row.notes),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:q},{default:a(()=>[t("div",iV,[B.$can("admin.stock-adjustment.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[7]||(h[7]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[B.$can("admin.stock-adjustment.delete")?te((d(),I(le,{key:0,onClick:X(S=>C(q.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>h[11]||(h[11]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",eV,[e(Fe,{modelValue:u.start_date,"onUpdate:modelValue":[h[2]||(h[2]=q=>u.start_date=q),F],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Fe,{modelValue:u.end_date,"onUpdate:modelValue":[h[3]||(h[3]=q=>u.end_date=q),F],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:u.status,"onUpdate:modelValue":[h[4]||(h[4]=q=>u.status=q),F],options:g,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:u.type,"onUpdate:modelValue":[h[5]||(h[5]=q=>u.type=q),F],options:_,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":h[6]||(h[6]=q=>u.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},uV=Object.freeze(Object.defineProperty({__proto__:null,default:dV},Symbol.toStringTag,{value:"Module"})),mV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},cV={class:"q-pa-xs"},pV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Zl="Riwayat Stok",fV={__name:"Index",setup(c){ge();const s=O(null),m=O(null),o=tt(m),i=Ce().startOf("month").toDate(),n=Ce().endOf("month").toDate(),f=[{value:"all",label:"Semua"},...Ke(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],v=ke(),p=O(!1),u=O([]),g=O(!0),_=De({type:"all",search:"",start_date:i,end_date:n,...Ne()}),y=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let $=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];ye(()=>{const T=new URLSearchParams(window.location.search).get("page");T&&(y.value.page=parseInt(T)),C()});const C=(A=null)=>{const T={..._,start_date:Ce(_.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Ce(_.end_date).format("YYYY-MM-DD HH:mm:ss")};Be({pagination:y,filter:T,props:A,rows:u,url:route("admin.stock-movement.data"),loading:g,tableRef:s})},D=()=>{C()},F=G(()=>v.screen.lt.sm?$.filter(A=>A.name==="id"||A.name==="quantity"):$);return(A,T)=>{const N=J("i-head"),M=J("authenticated-layout");return d(),w(W,null,[e(N,{title:Zl}),e(M,null,Ae({title:a(()=>[b(r(Zl))]),"right-button":a(()=>[e(E,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=R=>p.value=!p.value)},null,8,["icon"])]),default:a(()=>[t("div",cV,[e(Ue,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":T[5]||(T[5]=R=>y.value=R),filter:_.search,loading:g.value,columns:F.value,rows:u.value,"rows-per-page-options":[10,25,50],style:ze({height:l(o)}),onRequest:C,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:R,message:B,filter:h})=>[t("div",pV,[t("span",null,r(B)+" "+r(h?" with term "+h:""),1)])]),body:a(R=>[e(Pe,{props:R},{default:a(()=>[e(Q,{key:"id",props:R},{default:a(()=>[t("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(R.row.code),1)]),t("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(ve)(R.row.created_at)),1)]),t("div",null,[e(ot,null,{default:a(()=>[b(r(A.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[R.row.ref_type]),1)]),_:2},1024)]),l(v).screen.lt.sm?(d(),w(W,{key:0},[t("div",null,[e(V,{name:"token",class:"inline-icon"}),b(" "+r(R.row.product.name),1)]),t("div",{class:xe(R.row.quantity>0?"text-positive":"text-negative")},[e(V,{class:"inline-icon",name:"compare_arrows"}),b(" "+r(l(K)(R.row.quantity_before))+" "+r(R.row.uom)+"  "+r(l(K)(R.row.quantity_after))+" "+r(R.row.uom),1)],2),e(he,{text:R.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"product",props:R},{default:a(()=>[b(r(R.row.product.name),1)]),_:2},1032,["props"]),e(Q,{key:"quantity_before",props:R},{default:a(()=>[b(r(l(K)(R.row.quantity_before)),1)]),_:2},1032,["props"]),e(Q,{key:"quantity",props:R,class:xe(R.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[b(r(l(wt)(R.row.quantity))+" ",1),l(v).screen.lt.sm?(d(),w(W,{key:0},[b(r(R.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Q,{key:"quantity_after",props:R},{default:a(()=>[b(r(l(K)(R.row.quantity_after)),1)]),_:2},1032,["props"]),e(Q,{key:"uom",props:R},{default:a(()=>[b(r(R.row.uom),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:R},{default:a(()=>[e(he,{text:R.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[p.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:m},{default:a(()=>[t("div",mV,[e(Fe,{modelValue:_.start_date,"onUpdate:modelValue":[T[1]||(T[1]=R=>_.start_date=R),D],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Fe,{modelValue:_.end_date,"onUpdate:modelValue":[T[2]||(T[2]=R=>_.end_date=R),D],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:_.ref_type,"onUpdate:modelValue":[T[3]||(T[3]=R=>_.ref_type=R),D],options:f,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":T[4]||(T[4]=R=>_.search=R),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},gV=Object.freeze(Object.defineProperty({__proto__:null,default:fV},Symbol.toStringTag,{value:"Module"})),bV={class:"detail"},vV={key:0},_V={key:1},yV={key:2},kV={key:3},wV={key:4},hV={key:5},$V={key:6},xV={key:0,class:"q-pt-md"},wn={__name:"MainInfoTab",setup(c){const s=ge(),m=()=>{at({message:`Hapus Pemasok ${s.props.data.name}?`,url:route("admin.supplier.delete",s.props.data.id),onSuccess:()=>{Y.get(route("admin.supplier.index"))}})};return(o,i)=>(d(),w(W,null,[t("table",bV,[t("tbody",null,[i[22]||(i[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Nama",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[t("td",null,r(l(s).props.data.balance<0?"Utang":"Utang / Piutang"),1),i[5]||(i[5]=t("td",null,":",-1)),t("td",{class:xe(l(s).props.data.balance<0?"text-red":"text-green")},r(l(ta)(l(s).props.data.balance)),3)]),l(s).props.data.phone_1?(d(),w("tr",vV,[i[6]||(i[6]=t("td",null,"No Telepon",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,[e(Kt,{phone:l(s).props.data.phone_1},null,8,["phone"])])])):k("",!0),l(s).props.data.phone_2?(d(),w("tr",_V,[i[8]||(i[8]=t("td",null,"No Telepon 2",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,[e(Kt,{phone:l(s).props.data.phone_2},null,8,["phone"])])])):k("",!0),l(s).props.data.phone_3?(d(),w("tr",yV,[i[10]||(i[10]=t("td",null,"No Telepon 3",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,[e(Kt,{phone:l(s).props.data.phone_3},null,8,["phone"])])])):k("",!0),l(s).props.data.address?(d(),w("tr",kV,[i[12]||(i[12]=t("td",null,"Alamat",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.address),1)])):k("",!0),l(s).props.data.return_address?(d(),w("tr",wV,[i[14]||(i[14]=t("td",null,"Alamat Retur",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.return_address),1)])):k("",!0),l(s).props.data.bank_account_name_1||l(s).props.data.bank_account_number_1||l(s).props.data.bank_account_holder_1?(d(),w("tr",hV,[i[16]||(i[16]=t("td",null,"Rek 1",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank_account_name_1)+" "+r(l(s).props.data.bank_account_number_1)+" a.n. "+r(l(s).props.data.bank_account_holder_1),1)])):k("",!0),l(s).props.data.bank_account_name_2||l(s).props.data.bank_account_number_2||l(s).props.data.bank_account_holder_2?(d(),w("tr",$V,[i[18]||(i[18]=t("td",null,"Rek 2",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank_account_name_2)+" "+r(l(s).props.data.bank_account_number_2)+" a.n. "+r(l(s).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Status",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(d(),w("div",xV,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>m())})])):k("",!0)],64))}},SV=Object.freeze(Object.defineProperty({__proto__:null,default:wn},Symbol.toStringTag,{value:"Module"})),VV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},qV={class:"text-bold"},CV={class:"text-bold"},TV={key:0,class:"text-bold"},PV={key:1},hn={__name:"OrderHistoryTab",setup(c){const s=ge(),m=O([]),o=O(!0),i=De({customer_id:s.props.data.id,...Ne()}),n=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp.)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];ye(()=>{v()});const v=(g=null)=>Be({pagination:n,filter:i,props:g,rows:m,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:s.props.data.id}}),loading:o}),p=ke(),u=G(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),I(Ue,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:C})=>[t("div",VV,[t("span",null,r($)+" "+r(C?" with term "+C:""),1)])]),body:a(y=>[e(Pe,{props:y,class:"cursor-pointer",onClick:X($=>l(Y).get(g.route("admin.purchase-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",qV,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(y.row.code),1)]),t("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(l(ve)(y.row.datetime)),1)]),l(p).screen.lt.md?(d(),w(W,{key:0},[t("div",CV,[e(V,{name:"money",class:"inline-icon"}),b(" Total: Rp. "+r(l(K)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(d(),w("div",TV,[e(V,{name:"money",class:"inline-icon"}),b(" Sisa Utang: Rp. "+r(l(K)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(d(),w("div",PV,[e(he,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(Xo,{status:y.row.status},null,8,["status"]),e(Zo,{status:y.row.payment_status},null,8,["status"])])]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:y},{default:a(()=>[b(r(l(K)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"remaining_debt",props:y},{default:a(()=>[b(r(l(K)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(he,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},RV=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"})),OV={class:"q-gutter-sm"},DV={class:"q-gutter-sm"},IV={class:"col col-lg-6 q-pa-xs"},UV={class:"row"},eo="Rincian Pemasok",jV={__name:"Detail",setup(c){const s=ge(),m=O("main");return ke(),(o,i)=>{const n=J("i-head"),f=J("authenticated-layout");return d(),w(W,null,[e(n,{title:eo}),e(f,null,{title:a(()=>[b(r(eo))]),"left-button":a(()=>[t("div",OV,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":a(()=>[t("div",DV,[o.$can("admin.supplier.edit")?(d(),I(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=v=>l(Y).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),I(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=v=>l(Y).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),I(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=v=>l(Y).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",IV,[t("div",UV,[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Vt,{modelValue:m.value,"onUpdate:modelValue":i[4]||(i[4]=v=>m.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(nt,{name:"main",label:"Info Utama"}),e(nt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(qt,{modelValue:m.value,"onUpdate:modelValue":i[5]||(i[5]=v=>m.value=v),animated:""},{default:a(()=>[e(st,{name:"main"},{default:a(()=>[e(wn)]),_:1}),e(st,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(hn)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},EV=Object.freeze(Object.defineProperty({__proto__:null,default:jV},Symbol.toStringTag,{value:"Module"})),AV={class:"q-gutter-sm"},MV={class:"col col-md-6 q-pa-xs"},NV={class:"row q-col-gutter-md"},BV={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},zV={key:2,class:"row q-col-gutter-md"},FV={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},LV={key:4,class:"row q-col-gutter-md"},HV={key:5,class:"row q-col-gutter-md"},KV={style:{"margin-left":"-10px"},class:"q-mt-md"},YV={class:"q-mt-sm"},WV={__name:"Editor",setup(c){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Pemasok",o=We({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,phone_1:s.props.data.phone_1,phone_2:s.props.data.phone_2,phone_3:s.props.data.phone_3,url_1:s.props.data.url_1,url_2:s.props.data.url_2,bank_account_name_1:s.props.data.bank_account_name_1,bank_account_holder_1:s.props.data.bank_account_holder_1,bank_account_number_1:s.props.data.bank_account_number_1,bank_account_name_2:s.props.data.bank_account_name_2,bank_account_holder_2:s.props.data.bank_account_holder_2,bank_account_number_2:s.props.data.bank_account_number_2,address:s.props.data.address,return_address:s.props.data.return_address,active:!!s.props.data.active}),i=O(!0),n=()=>lt({form:o,url:route("admin.supplier.save")});return(f,v)=>{const p=J("i-head"),u=J("authenticated-layout");return d(),w(W,null,[e(p,{title:m}),e(u,{"show-drawer-button":!0},{title:a(()=>[b(r(m))]),"left-button":a(()=>[t("div",AV,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=g=>l(Y).get(f.route("admin.supplier.index")))})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:v[1]||(v[1]=g=>n()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",MV,[e(Qe,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[2]||(v[2]=g=>l(o).id=g)},null,512),[[vt,l(o).id]]),e(ie,{modelValue:l(o).code,"onUpdate:modelValue":v[3]||(v[3]=g=>l(o).code=g),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[g=>g&&g.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(o).name,"onUpdate:modelValue":v[4]||(v[4]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",NV,[e(ie,{modelValue:l(o).phone_1,"onUpdate:modelValue":v[5]||(v[5]=g=>l(o).phone_1=g),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_1,"error-message":l(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(d(),I(ie,{key:0,modelValue:l(o).phone_2,"onUpdate:modelValue":v[6]||(v[6]=g=>l(o).phone_2=g),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_2,"error-message":l(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(d(),I(ie,{key:1,modelValue:l(o).phone_3,"onUpdate:modelValue":v[7]||(v[7]=g=>l(o).phone_3=g),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_3,"error-message":l(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(ie,{modelValue:l(o).address,"onUpdate:modelValue":v[8]||(v[8]=g=>l(o).address=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(d(),I(ie,{key:0,modelValue:l(o).return_address,"onUpdate:modelValue":v[9]||(v[9]=g=>l(o).return_address=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.return_address,"error-message":l(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(d(),w("div",BV," Rekening 1 ")),i.value?k("",!0):(d(),w("div",zV,[e(ie,{modelValue:l(o).bank_account_name_1,"onUpdate:modelValue":v[10]||(v[10]=g=>l(o).bank_account_name_1=g),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_1,"error-message":l(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).bank_account_number_1,"onUpdate:modelValue":v[11]||(v[11]=g=>l(o).bank_account_number_1=g),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_1,"error-message":l(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).bank_account_holder_1,"onUpdate:modelValue":v[12]||(v[12]=g=>l(o).bank_account_holder_1=g),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_1,"error-message":l(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(d(),w("div",FV," Rekening 2 ")),i.value?k("",!0):(d(),w("div",LV,[e(ie,{modelValue:l(o).bank_account_name_2,"onUpdate:modelValue":v[13]||(v[13]=g=>l(o).bank_account_name_2=g),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_2,"error-message":l(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).bank_account_number_2,"onUpdate:modelValue":v[14]||(v[14]=g=>l(o).bank_account_number_2=g),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_2,"error-message":l(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).bank_account_holder_2,"onUpdate:modelValue":v[15]||(v[15]=g=>l(o).bank_account_holder_2=g),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_2,"error-message":l(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(d(),w("div",HV,[e(ie,{modelValue:l(o).url_1,"onUpdate:modelValue":v[16]||(v[16]=g=>l(o).url_1=g),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_1,"error-message":l(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(ie,{modelValue:l(o).url_2,"onUpdate:modelValue":v[17]||(v[17]=g=>l(o).url_2=g),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_2,"error-message":l(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",KV,[e(la,{class:"full-width q-pl-none",modelValue:l(o).active,"onUpdate:modelValue":v[18]||(v[18]=g=>l(o).active=g),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",YV,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:v[19]||(v[19]=X(g=>i.value=!i.value,["stop"]))},[e(V,{name:i.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),b(" "+r(i.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},QV=Object.freeze(Object.defineProperty({__proto__:null,default:WV},Symbol.toStringTag,{value:"Module"})),JV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},GV={class:"q-pa-xs"},XV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ZV={key:0},eq={key:1},tq={class:"flex justify-end"},to="Pemasok",aq={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=De({search:"",status:"active",...Ne()}),u=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];ye(()=>{$()});const y=N=>at({message:`Hapus pemasok ${N.name}?`,url:route("admin.supplier.delete",N.id),fetchItemsCallback:$,loading:i}),$=(N=null)=>{Be({pagination:u,filter:p,props:N,rows:o,url:route("admin.supplier.data"),loading:i,tableRef:n})},C=()=>$(),D=N=>Y.get(route("admin.supplier.detail",{id:N.id})),{protectClick:F}=Dt(),A=F(D),T=G(()=>s.screen.gt.sm?g:g.filter(N=>N.name==="code"||N.name==="action"));return(N,M)=>{const R=J("i-head"),B=J("authenticated-layout");return d(),w(W,null,[e(R,{title:to}),e(B,null,Ae({title:a(()=>[b(r(to))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:M[0]||(M[0]=h=>m.value=!m.value)},null,8,["icon"]),N.$can("admin.supplier.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:M[1]||(M[1]=h=>l(Y).get(N.route("admin.supplier.add")))})):k("",!0)]),default:a(()=>[t("div",GV,[e(Ue,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":M[5]||(M[5]=h=>u.value=h),filter:p.search,loading:i.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:l(v)}),onRequest:$,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:x,filter:P})=>[t("div",XV,[t("span",null,r(x)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Pe,{props:h,class:xe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:X(x=>l(A)(h.row,x),["stop"])},{default:a(()=>[e(Q,{key:"code",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),I(V,{key:0,name:"person"})):k("",!0),b(" "+r(h.row.code)+" ",1),l(s).screen.lt.md?(d(),w(W,{key:1},[b(" - "+r(h.row.name),1)],64)):k("",!0)]),l(s).screen.lt.md?(d(),w(W,{key:0},[t("div",{class:xe(h.row.balance<0?"text-negative":"text-positive")},[e(V,{name:"wallet"}),b(" "+r(l(K)(h.row.balance)),1)],2),h.row.phone_1?(d(),w("div",ZV,[e(V,{name:"phone"}),b(" "+r(h.row.phone_1),1)])):k("",!0),h.row.address?(d(),w("div",eq,[e(V,{name:"home_pin"}),b(" "+r(h.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[b(r(h.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:h,class:"wrap-column"},{default:a(()=>[t("div",{class:xe(h.row.balance<0?"text-negative":"text-positive")},r(l(K)(h.row.balance)),3)]),_:2},1032,["props"]),e(Q,{key:"phone_1",props:h},{default:a(()=>[b(r(h.row.phone_1),1)]),_:2},1032,["props"]),e(Q,{key:"address",props:h},{default:a(()=>[b(r(h.row.address),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:h},{default:a(()=>[t("div",tq,[N.$can("admin.supplier.add")||N.$can("admin.supplier.edit")||N.$can("admin.supplier.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:M[4]||(M[4]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[N.$can("admin.supplier.add")?te((d(),I(le,{key:0,clickable:"",onClick:X(x=>l(Y).get(N.route("admin.supplier.duplicate",h.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>M[6]||(M[6]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),N.$can("admin.supplier.edit")?te((d(),I(le,{key:1,clickable:"",onClick:X(x=>l(Y).get(N.route("admin.supplier.edit",h.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>M[7]||(M[7]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),N.$can("admin.supplier.delete")?te((d(),I(le,{key:2,onClick:X(x=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>M[8]||(M[8]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",JV,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[M[2]||(M[2]=h=>p.status=h),C],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":M[3]||(M[3]=h=>p.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},lq=Object.freeze(Object.defineProperty({__proto__:null,default:aq},Symbol.toStringTag,{value:"Module"})),oq={class:"q-gutter-sm"},nq={class:"col col-md-6 q-pa-xs"},sq={class:"q-pt-md"},rq={key:0,class:"text-caption text-negative"},iq={class:"q-pt-md"},dq={key:0,class:"text-caption text-negative"},uq={__name:"Editor",setup(c){const s=ke(),m=ge(),o=(m.props.data.id?"Edit":"Tambah")+" Skema Pajak",i=We({id:m.props.data.id,name:m.props.data.name,rate_percentage:m.props.data.rate_percentage??0,tax_authority:m.props.data.tax_authority,is_inclusive:m.props.data.is_inclusive??!1,active:m.props.data.active??!0,description:m.props.data.description}),n=()=>lt({form:i,url:route("admin.tax-scheme.save")});return(f,v)=>{const p=J("i-head"),u=J("authenticated-layout");return d(),w(W,null,[e(p,{title:o}),e(u,{"show-drawer-button":!l(s).screen.lt.md},Ae({title:a(()=>[b(r(o))]),default:a(()=>[e(Ve,{class:"row justify-center"},{default:a(()=>[t("div",nq,[e(Qe,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(ue,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=g=>l(i).id=g)},null,512),[[vt,l(i).id]]),e(ie,{autofocus:"",modelValue:l(i).name,"onUpdate:modelValue":v[2]||(v[2]=g=>l(i).name=g),modelModifiers:{trim:!0},label:"Nama Skema Pajak","lazy-rules":"",error:!!l(i).errors.name,disable:l(i).processing,"error-message":l(i).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ie,{modelValue:l(i).rate_percentage,"onUpdate:modelValue":v[3]||(v[3]=g=>l(i).rate_percentage=g),modelModifiers:{number:!0},label:"Tarif Persentase (%)",type:"number",suffix:"%",rules:[g=>g>=0||"Persentase tidak boleh negatif."],error:!!l(i).errors.rate_percentage,disable:l(i).processing,"error-message":l(i).errors.rate_percentage,"hide-bottom-space":""},null,8,["modelValue","rules","error","disable","error-message"]),e(ie,{modelValue:l(i).tax_authority,"onUpdate:modelValue":v[4]||(v[4]=g=>l(i).tax_authority=g),modelModifiers:{trim:!0},label:"Otoritas Pajak (Opsional)",hint:"Contoh: DJP, Pemerintah Daerah",error:!!l(i).errors.tax_authority,disable:l(i).processing,"error-message":l(i).errors.tax_authority,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(ie,{modelValue:l(i).description,"onUpdate:modelValue":v[5]||(v[5]=g=>l(i).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.description,"error-message":l(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",sq,[e(Ja,{modelValue:l(i).is_inclusive,"onUpdate:modelValue":v[6]||(v[6]=g=>l(i).is_inclusive=g),disable:l(i).processing,label:l(i).is_inclusive?"Harga Jual SUDAH termasuk Pajak":"Harga Jual BELUM termasuk Pajak",color:"primary"},null,8,["modelValue","disable","label"]),l(i).errors.is_inclusive?(d(),w("div",rq,r(l(i).errors.is_inclusive),1)):k("",!0)]),t("div",iq,[e(Ja,{modelValue:l(i).active,"onUpdate:modelValue":v[7]||(v[7]=g=>l(i).active=g),disable:l(i).processing,label:l(i).active?"Skema Aktif":"Skema Non-Aktif",color:"primary"},null,8,["modelValue","disable","label"]),l(i).errors.active?(d(),w("div",dq,r(l(i).errors.active),1)):k("",!0)])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:v[8]||(v[8]=g=>l(Y).get(f.route("admin.tax-scheme.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",oq,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=g=>l(Y).get(f.route("admin.tax-scheme.index")))})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},mq=Object.freeze(Object.defineProperty({__proto__:null,default:uq},Symbol.toStringTag,{value:"Module"})),cq={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},pq={class:"q-pa-xs"},fq={class:"full-width row flex-center text-grey-8 q-gutter-sm"},gq={class:"text-weight-bold"},bq={class:"text-grey-8"},vq={class:"text-weight-medium"},_q={class:"text-weight-medium text-uppercase"},yq={key:0,class:"text-grey-8"},kq={key:1,class:"text-grey-8"},wq={class:"flex justify-end"},ao="Skema Pajak",hq={__name:"Index",setup(c){const s=ke(),m=O(!1),o=O([]),i=O(!0),n=O(null),f=O(null),v=tt(f),p=De({search:"",...Ne()}),u=O({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"rate_percentage",label:"Tarif",field:"rate_percentage",align:"right",sortable:!0,format:C=>`${C}%`},{name:"is_inclusive",label:"Tipe Harga",field:"is_inclusive",align:"center",format:C=>C?"INCLUSIVE":"EXCLUSIVE",sortable:!0},{name:"tax_authority",label:"Otoritas",field:"tax_authority",align:"left",sortable:!0},{name:"active",label:"Status",field:"active",align:"center",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left"},{name:"action",align:"right"}];ye(()=>{y()});const _=C=>at({message:`Hapus Skema Pajak ${C.name}?`,url:route("admin.tax-scheme.delete",C.id),fetchItemsCallback:y,loading:i}),y=(C=null)=>{Be({pagination:u,filter:p,props:C,rows:o,url:route("admin.tax-scheme.data"),loading:i,tableRef:n})},$=G(()=>s.screen.gt.sm?g:g.filter(C=>C.name==="name"||C.name==="action"));return(C,D)=>{const F=J("i-head"),A=J("authenticated-layout");return d(),w(W,null,[e(F,{title:ao}),e(A,null,Ae({title:a(()=>[b(r(ao))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=T=>m.value=!m.value)},null,8,["icon"]),C.$can("admin.tax-scheme.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[1]||(D[1]=T=>l(Y).get(C.route("admin.tax-scheme.add")))})):k("",!0)]),default:a(()=>[t("div",pq,[e(Ue,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":D[4]||(D[4]=T=>u.value=T),filter:p.search,loading:i.value,columns:$.value,rows:o.value,"rows-per-page-options":[10,25,50],style:ze({height:l(v)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Le,{showing:"",color:"red"})]),"no-data":a(({icon:T,message:N,filter:M})=>[t("div",fq,[t("span",null,r(N)+" "+r(M?" with term "+M:""),1)])]),body:a(T=>[e(Pe,{props:T},{default:a(()=>[e(Q,{key:"name",props:T,class:"wrap-column"},{default:a(()=>[t("div",gq,r(T.row.name),1),l(s).screen.gt.sm?k("",!0):(d(),w(W,{key:0},[t("div",bq,[D[5]||(D[5]=b(" Tarif: ")),t("span",vq,r(T.row.rate_percentage)+"%",1)]),t("div",null,[D[6]||(D[6]=b(" Tipe: ")),t("span",_q,r(T.row.is_inclusive?"Inclusive":"Exclusive"),1)]),T.row.tax_authority?(d(),w("div",yq,[e(V,{name:"account_balance",size:"xs"}),b(" Otoritas: "+r(T.row.tax_authority),1)])):k("",!0),T.row.description?(d(),w("div",kq,[e(V,{name:"description",size:"xs"}),b(" "+r(T.row.description),1)])):k("",!0),e(ot,{color:T.row.active?"positive":"negative"},{default:a(()=>[b(r(T.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])],64))]),_:2},1032,["props"]),e(Q,{key:"rate_percentage",props:T,class:"text-right text-weight-bold"},{default:a(()=>[b(r(T.row.rate_percentage)+"% ",1)]),_:2},1032,["props"]),e(Q,{key:"is_inclusive",props:T,class:"text-center"},{default:a(()=>[e(ot,{color:T.row.is_inclusive?"green-7":"deep-orange-7","text-color":"white"},{default:a(()=>[b(r(T.row.is_inclusive?"INCLUSIVE":"EXCLUSIVE"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Q,{key:"tax_authority",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.tax_authority),1)]),_:2},1032,["props"]),e(Q,{key:"active",props:T,class:"text-center"},{default:a(()=>[e(ot,{color:T.row.active?"positive":"negative"},{default:a(()=>[b(r(T.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Q,{key:"description",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:T},{default:a(()=>[t("div",wq,[C.$can("admin.tax-scheme.add")||C.$can("admin.tax-scheme.edit")||C.$can("admin.tax-scheme.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[3]||(D[3]=X(()=>{},["stop"]))},{default:a(()=>[e(Ge,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ie,{style:{width:"200px"}},{default:a(()=>[C.$can("admin.tax-scheme.add")?te((d(),I(le,{key:0,clickable:"",onClick:X(N=>l(Y).get(C.route("admin.tax-scheme.duplicate",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>D[7]||(D[7]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),C.$can("admin.tax-scheme.edit")?te((d(),I(le,{key:1,clickable:"",onClick:X(N=>l(Y).get(C.route("admin.tax-scheme.edit",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>D[8]||(D[8]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),C.$can("admin.tax-scheme.delete")?te((d(),I(le,{key:2,onClick:X(N=>_(T.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>D[9]||(D[9]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Je,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",cq,[e(ie,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":D[2]||(D[2]=T=>p.search=T),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},$q=Object.freeze(Object.defineProperty({__proto__:null,default:hq},Symbol.toStringTag,{value:"Module"})),xq={key:1,class:"q-ml-sm"},Sq={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},Vq={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},qq={class:"absolute-bottom text-grey-6 q-pa-md"},Pa="amanah-pos.layout.left-drawer-open",Cq={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(c,{expose:s}){const m=ke(),o=ge(),i=O(JSON.parse(localStorage.getItem(Pa))),n=O(!1),f=()=>i.value=!i.value,v=()=>{i.value=!1};return He(i,p=>{localStorage.setItem(Pa,p)}),ye(()=>{i.value=JSON.parse(localStorage.getItem(Pa)),m.screen.lt.md&&(i.value=!1)}),s({hideDrawer:v}),(p,u)=>{const g=J("my-link");return d(),I(Rs,{view:"lHh LpR lFf"},{default:a(()=>[e(Vs,null,{default:a(()=>[e(Je,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:a(()=>[c.showDrawerButton&&!i.value?(d(),I(E,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:f},{default:a(()=>[e(V,{class:"material-symbols-outlined"},{default:a(()=>u[36]||(u[36]=[b("dock_to_right")])),_:1})]),_:1})):k("",!0),l(m).screen.gt.sm?(d(),w("div",xq,[xt(p.$slots,"left-button",{},void 0,!0)])):k("",!0),e(Zt,{style:{"font-size":"16px"}},{default:a(()=>[xt(p.$slots,"title",{},()=>[b(r(p.$config.APP_NAME),1)],!0)]),_:3}),xt(p.$slots,"right-button",{},void 0,!0)]),_:3}),xt(p.$slots,"header",{},void 0,!0)]),_:3}),e(qs,{breakpoint:768,modelValue:i.value,"onUpdate:modelValue":u[35]||(u[35]=_=>i.value=_),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:a(()=>[t("div",Sq,[t("div",Vq,[e(Cs,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=_=>n.value=_),class:xe(["profile-btn text-bold",{"profile-btn-active":n.value}]),flat:"",label:l(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:a(()=>[e(Ie,{id:"profile-btn-popup",style:{color:"#444"}},{default:a(()=>[e(le,null,{default:a(()=>[e(Yt,{style:{"margin-left":"-15px"}},{default:a(()=>[e(V,{name:"person"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>[e(g,{class:"text-bold text-grey-9",href:p.route("admin.user-profile.edit")},{default:a(()=>[b(r(l(o).props.auth.user.name),1)]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}),e(Te),te((d(),I(le,{clickable:"",style:{color:"inherit"},href:p.route("admin.auth.logout")},{default:a(()=>[e(z,null,{default:a(()=>[e(be,null,{default:a(()=>[e(V,{name:"logout",class:"q-mr-sm"}),u[37]||(u[37]=b(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[me],[se]])]),_:1})]),_:1},8,["modelValue","label","class"]),i.value?(d(),I(E,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:f},{default:a(()=>[e(V,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(Ts,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:a(()=>[e(Ie,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:a(()=>[te((d(),I(le,{clickable:"",active:p.$page.url.startsWith("/admin/home"),onClick:u[1]||(u[1]=_=>l(Y).get(p.route("admin.home")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"home"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[38]||(u[38]=[b("Beranda")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]),p.$can("admin.dashboard")?te((d(),I(le,{key:0,clickable:"",active:p.$page.url.startsWith("/admin/dashboard"),onClick:u[2]||(u[2]=_=>l(Y).get(p.route("admin.dashboard")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"dashboard"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[39]||(u[39]=[b("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),e(bt,{icon:"o_fast_forward",label:"Pintasan"},{default:a(()=>[p.$can("admin.sales-order.add")?te((d(),I(le,{key:0,class:"subnav show-icon",clickable:"",onClick:u[3]||(u[3]=_=>l(Y).get(p.route("admin.sales-order.add")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"add_shopping_cart"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[40]||(u[40]=[b("Penjualan Baru ")])),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),p.$can("admin.purchase-order.add")?te((d(),I(le,{key:1,class:"subnav show-icon",clickable:"",onClick:u[4]||(u[4]=_=>l(Y).get(p.route("admin.purchase-order.add")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"o_shopping_basket"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[41]||(u[41]=[b("Pembelian Baru ")])),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),e(Te),p.$can("admin.customer.add")?te((d(),I(le,{key:2,class:"subnav show-icon",clickable:"",onClick:u[5]||(u[5]=_=>l(Y).get(p.route("admin.customer.add")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"person_add_alt"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[42]||(u[42]=[b("Pelanggan Baru ")])),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),p.$can("admin.supplier.add")?te((d(),I(le,{key:3,class:"subnav show-icon",clickable:"",onClick:u[6]||(u[6]=_=>l(Y).get(p.route("admin.supplier.add")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"o_business_center"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[43]||(u[43]=[b("Supplier Baru ")])),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),e(Te),p.$can("admin.product.add")?te((d(),I(le,{key:4,class:"subnav show-icon",clickable:"",onClick:u[7]||(u[7]=_=>l(Y).get(p.route("admin.product.add")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"o_inventory_2"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[44]||(u[44]=[b("Produk Baru ")])),_:1})]),_:1})]),_:1})),[[se]]):k("",!0)]),_:1}),p.$can("admin.sales-order.index")||p.$can("admin.customer.index")||p.$can("admin.sales-order-return.index")?(d(),I(bt,{key:1,icon:"storefront",label:"Penjualan","default-opened":p.$page.url.startsWith("/admin/sales-orders")||p.$page.url.startsWith("/admin/sales-order-returns")||p.$page.url.startsWith("/admin/customers")||p.$page.url.startsWith("/admin/customer-wallet-transactions")||p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[p.$can("admin.sales-order.index")?te((d(),I(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-orders"),onClick:u[8]||(u[8]=_=>l(Y).get(p.route("admin.sales-order.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"add_shopping_cart"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[45]||(u[45]=[b("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.sales-order-return.index")?te((d(),I(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-order-returns"),onClick:u[9]||(u[9]=_=>l(Y).get(p.route("admin.sales-order-return.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"remove_shopping_cart"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[46]||(u[46]=[b("Retur Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.customer.index")?te((d(),I(le,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customers"),onClick:u[10]||(u[10]=_=>l(Y).get(p.route("admin.customer.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"people"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[47]||(u[47]=[b("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.customer-wallet-transaction-confirmation.index")||p.$can("admin.customer-wallet-transaction.index")?(d(),I(bt,{key:3,class:"subnav",icon:"wallet",label:"Deposit","default-opened":p.$page.url.startsWith("/admin/customer-wallet-transactions")||p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[p.$can("admin.customer-wallet-transaction-confirmation.index")?te((d(),I(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:u[11]||(u[11]=_=>l(Y).get(p.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"add_task"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[48]||(u[48]=[b("Konfirmasi Deposit")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.customer-wallet-transaction.index")?te((d(),I(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:u[12]||(u[12]=_=>l(Y).get(p.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"moving"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[49]||(u[49]=[b("Transaksi Deposit")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.purchase-order.index")||p.$can("admin.supplier.index")||p.$can("admin.purchase-order-return.index")?(d(),I(bt,{key:2,icon:"local_shipping",label:"Pembelian","default-opened":p.$page.url.startsWith("/admin/purchase-orders")||p.$page.url.startsWith("/admin/purchase-order-returns")||p.$page.url.startsWith("/admin/suppliers")},{default:a(()=>[p.$can("admin.purchase-order.index")?te((d(),I(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-orders"),onClick:u[13]||(u[13]=_=>l(Y).get(p.route("admin.purchase-order.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"add_shopping_cart"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[50]||(u[50]=[b("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.purchase-order-return.index")?te((d(),I(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-order-returns"),onClick:u[14]||(u[14]=_=>l(Y).get(p.route("admin.purchase-order-return.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"remove_shopping_cart"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[51]||(u[51]=[b("Retur Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.supplier.index")?te((d(),I(le,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/suppliers"),onClick:u[15]||(u[15]=_=>l(Y).get(p.route("admin.supplier.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"people"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[52]||(u[52]=[b("Supplier")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.product.index")||p.$can("admin.product-category.index")||p.$can("admin.stock-adjustment.index")||p.$can("admin.stock-movement.index")?(d(),I(bt,{key:3,icon:"inventory_2",label:"Inventori","default-opened":p.$page.url.startsWith("/admin/products")||p.$page.url.startsWith("/admin/product-categories")||p.$page.url.startsWith("/admin/stock-adjustments")||p.$page.url.startsWith("/admin/stock-movements")},{default:a(()=>[p.$can("admin.stock-adjustment.index")?te((d(),I(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-adjustments"),onClick:u[16]||(u[16]=_=>l(Y).get(p.route("admin.stock-adjustment.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"swap_vert"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[53]||(u[53]=[b("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.stock-movement.index")?te((d(),I(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-movements"),onClick:u[17]||(u[17]=_=>l(Y).get(p.route("admin.stock-movement.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"timeline"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[54]||(u[54]=[b("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.product.index")?te((d(),I(le,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/products"),onClick:u[18]||(u[18]=_=>l(Y).get(p.route("admin.product.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"box"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[55]||(u[55]=[b("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.product-category.index")?te((d(),I(le,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/product-categories"),onClick:u[19]||(u[19]=_=>l(Y).get(p.route("admin.product-category.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"category"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[56]||(u[56]=[b("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(bt,{icon:"business_center",label:"Back Office","default-opened":p.$page.url.startsWith("/admin/cashier-terminals")||p.$page.url.startsWith("/admin/cashier-sessions")||p.$page.url.startsWith("/admin/finance-accounts")||p.$page.url.startsWith("/admin/finance-transactions")||p.$page.url.startsWith("/admin/operational-costs")||p.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[p.$can("admin.cashier-session.index")||p.$can("admin.cashier-terminal.index")||p.$can("admin.finance-account.index")||p.$can("admin.finance-transaction.index")||p.$can("admin.operational-cost.index")||p.$can("admin.operational-cost-category.index")?(d(),I(bt,{key:0,class:"subnav show-icon",icon:"point_of_sale",label:"Kasir","default-opened":p.$page.url.startsWith("/admin/cashier-terminals")||p.$page.url.startsWith("/admin/cashier-session")},{default:a(()=>[p.$can("admin.cashier-session.index")?te((d(),I(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-sessions"),onClick:u[20]||(u[20]=_=>l(Y).get(p.route("admin.cashier-session.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"tv_signin"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[57]||(u[57]=[b("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.cashier-terminal.index")?te((d(),I(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-terminals"),onClick:u[21]||(u[21]=_=>l(Y).get(p.route("admin.cashier-terminal.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"point_of_sale"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[58]||(u[58]=[b("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.finance-transaction.index")||p.$can("admin.finance-account.index")?(d(),I(bt,{key:1,class:"subnav show-icon",icon:"finance",label:"Keuangan","default-opened":p.$page.url.startsWith("/admin/finance-accounts")||p.$page.url.startsWith("/admin/finance-transactions")},{default:a(()=>[p.$can("admin.finance-transaction.index")?te((d(),I(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-transactions"),onClick:u[22]||(u[22]=_=>l(Y).get(p.route("admin.finance-transaction.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"moving"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[59]||(u[59]=[b("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.finance-account.index")?te((d(),I(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-accounts"),onClick:u[23]||(u[23]=_=>l(Y).get(p.route("admin.finance-account.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"groups_2"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[60]||(u[60]=[b("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.operational-cost.index")||p.$can("admin.operational-cost-category.index")?(d(),I(bt,{key:2,class:"subnav show-icon",icon:"paid",label:"Operasional","default-opened":p.$page.url.startsWith("/admin/operational-costs")||p.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[p.$can("admin.operational-cost.index")?te((d(),I(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-costs"),onClick:u[24]||(u[24]=_=>l(Y).get(p.route("admin.operational-cost.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"request_quote"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[61]||(u[61]=[b("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.operational-cost-category.index")?te((d(),I(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-cost-categories"),onClick:u[25]||(u[25]=_=>l(Y).get(p.route("admin.operational-cost-category.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"category"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[62]||(u[62]=[b("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"]),p.$can("admin.report.index")?te((d(),I(le,{key:4,clickable:"",active:p.$page.url.startsWith("/admin/reports"),onClick:u[26]||(u[26]=_=>l(Y).get(p.route("admin.report.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"analytics"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[63]||(u[63]=[b("Laporan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),e(bt,{icon:"settings",label:"Pengaturan","default-opened":p.$page.url.startsWith("/admin/settings")},{default:a(()=>[p.$can("admin.user.index")?te((d(),I(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/users"),onClick:u[27]||(u[27]=_=>l(Y).get(p.route("admin.user.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"person"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[64]||(u[64]=[b("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.user-role.index")?te((d(),I(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-roles"),onClick:u[28]||(u[28]=_=>l(Y).get(p.route("admin.user-role.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"group"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[65]||(u[65]=[b("Peran Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),k("",!0),p.$can("admin.pos-settings.edit")?te((d(),I(le,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/pos"),onClick:u[30]||(u[30]=_=>l(Y).get(p.route("admin.pos-settings.edit")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"point_of_sale"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[67]||(u[67]=[b("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.company-profile.edit")?te((d(),I(le,{key:4,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/company-profile"),onClick:u[31]||(u[31]=_=>l(Y).get(p.route("admin.company-profile.edit")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"apartment"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[68]||(u[68]=[b("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.user-activity-log.index")?te((d(),I(le,{key:5,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:u[32]||(u[32]=_=>l(Y).get(p.route("admin.user-activity-log.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"article"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[69]||(u[69]=[b("Log Aktivitas")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),k("",!0),te((d(),I(le,{class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/system-information"),onClick:u[34]||(u[34]=_=>l(Y).get(p.route("admin.settings.system-information")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(V,{name:"info"})]),_:1}),e(z,null,{default:a(()=>[e(be,null,{default:a(()=>u[71]||(u[71]=[b("Informasi Sistem")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]])]),_:1},8,["default-opened"]),t("div",qq,"  2025 - "+r(p.$config.APP_NAME+" v"+p.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ps,{class:"bg-grey-1"},{default:a(()=>[e(Ve,null,{default:a(()=>[xt(p.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),xt(p.$slots,"footer",{},void 0,!0)]),_:3})}}},Tq=ft(Cq,[["__scopeId","data-v-19e26e9c"]]),Pq={__name:"GuestLayout",setup(c){return(s,m)=>(d(),I(Os,null,{default:a(()=>[xt(s.$slots,"default")]),_:3}))}};Ds({onRegistered(c){console.log("Admin Service Worker registered:",c)}});Is({layouts:{authenticated:Tq,guest:Pq},pagesGlob:Object.assign({"./pages/_examples/Autocomplete1.vue":As,"./pages/auth/Login.vue":Ks,"./pages/cashier-session/Close.vue":Zs,"./pages/cashier-session/Detail.vue":ei,"./pages/cashier-session/Index.vue":gi,"./pages/cashier-session/Open.vue":yi,"./pages/cashier-session/detail/FinanceTransactionTab.vue":Qr,"./pages/cashier-session/detail/MainInfoTab.vue":Ir,"./pages/cashier-session/detail/SalesOrderTab.vue":Fr,"./pages/cashier-terminal/Detail.vue":Ii,"./pages/cashier-terminal/Editor.vue":Mi,"./pages/cashier-terminal/Index.vue":Hi,"./pages/cashier-terminal/detail/MainInfoTab.vue":qi,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":Ti,"./pages/customer-wallet-transaction-confirmation/Detail.vue":ad,"./pages/customer-wallet-transaction-confirmation/Index.vue":id,"./pages/customer-wallet-transaction/Adjustment.vue":md,"./pages/customer-wallet-transaction/Detail.vue":hd,"./pages/customer-wallet-transaction/Editor.vue":Vd,"./pages/customer-wallet-transaction/Index.vue":Id,"./pages/customer/Detail.vue":nu,"./pages/customer/Editor.vue":du,"./pages/customer/Import.vue":bu,"./pages/customer/Index.vue":Su,"./pages/customer/detail/MainInfoTab.vue":Hd,"./pages/customer/detail/OrderHistoryTab.vue":Zd,"./pages/customer/detail/WalletHistoryTab.vue":Wd,"./pages/dashboard/Index.vue":em,"./pages/dashboard/cards/ActualSummaryCard.vue":Au,"./pages/dashboard/cards/ChartCard.vue":Fu,"./pages/dashboard/cards/SummaryCard.vue":um,"./pages/dashboard/cards/TopCard.vue":Qu,"./pages/finance-account/Detail.vue":$m,"./pages/finance-account/Editor.vue":Cm,"./pages/finance-account/Index.vue":Bm,"./pages/finance-account/detail/HistoryTab.vue":vm,"./pages/finance-account/detail/MainInfoTab.vue":pm,"./pages/finance-transaction/Detail.vue":Xm,"./pages/finance-transaction/Editor.vue":ac,"./pages/finance-transaction/Index.vue":uc,"./pages/home/Index.vue":$c,"./pages/operational-cost-category/Editor.vue":qc,"./pages/operational-cost-category/Index.vue":Ic,"./pages/operational-cost/Detail.vue":Hc,"./pages/operational-cost/Editor.vue":Xc,"./pages/operational-cost/Index.vue":rp,"./pages/product-category/Editor.vue":mp,"./pages/product-category/Index.vue":_p,"./pages/product/Detail.vue":Bp,"./pages/product/Editor.vue":Xp,"./pages/product/Import.vue":af,"./pages/product/Index.vue":bf,"./pages/product/SendPriceList.vue":xf,"./pages/product/SendPriceList2.vue":Rf,"./pages/product/detail/MainInfoTab.vue":Rp,"./pages/product/detail/StockHistoryTab.vue":Ip,"./pages/purchase-order-return/Create.vue":Uf,"./pages/purchase-order-return/Detail.vue":Ig,"./pages/purchase-order-return/Editor.vue":I1,"./pages/purchase-order-return/Index.vue":Y1,"./pages/purchase-order-return/detail/MainInfoTab.vue":ig,"./pages/purchase-order-return/detail/PaymentDialog.vue":gg,"./pages/purchase-order-return/detail/RefundTab.vue":Pg,"./pages/purchase-order-return/editor/HelpDialog.vue":Hg,"./pages/purchase-order-return/editor/ItemEditorDialog.vue":zg,"./pages/purchase-order-return/editor/ItemsListTable.vue":Mg,"./pages/purchase-order-return/editor/OrderInfoDialog.vue":Qg,"./pages/purchase-order-return/editor/PaymentDialog.vue":ub,"./pages/purchase-order-return/editor/SuccessDialog.vue":xb,"./pages/purchase-order/Detail.vue":Ov,"./pages/purchase-order/Editor.vue":F_,"./pages/purchase-order/Index.vue":ty,"./pages/purchase-order/detail/InvoiceTab.vue":nv,"./pages/purchase-order/detail/PaymentDialog.vue":pv,"./pages/purchase-order/detail/PaymentTab.vue":Cv,"./pages/purchase-order/editor/HelpDialog.vue":o_,"./pages/purchase-order/editor/ItemEditorDialog.vue":a_,"./pages/purchase-order/editor/ItemsListTable.vue":Ev,"./pages/purchase-order/editor/OrderInfoDialog.vue":i_,"./pages/purchase-order/editor/PaymentDialog.vue":Zv,"./pages/purchase-order/editor/SuccessDialog.vue":w_,"./pages/report/Index.vue":dy,"./pages/reports/ReportGeneratorLayout.vue":Vy,"./pages/reports/customer/Index.vue":Ty,"./pages/reports/product/Index.vue":Oy,"./pages/reports/sales-order/Index.vue":Uy,"./pages/reports/supplier/Index.vue":Ay,"./pages/sales-order-return/Create.vue":zy,"./pages/sales-order-return/Detail.vue":Hk,"./pages/sales-order-return/Editor.vue":Cw,"./pages/sales-order-return/Index.vue":Fw,"./pages/sales-order-return/detail/MainInfoTab.vue":_k,"./pages/sales-order-return/detail/PaymentDialog.vue":Sk,"./pages/sales-order-return/detail/RefundTab.vue":Bk,"./pages/sales-order-return/editor/HelpDialog.vue":aw,"./pages/sales-order-return/editor/ItemEditorDialog.vue":Zk,"./pages/sales-order-return/editor/ItemsListTable.vue":Jk,"./pages/sales-order-return/editor/OrderInfoDialog.vue":sw,"./pages/sales-order-return/editor/PaymentDialog.vue":s0,"./pages/sales-order-return/editor/SuccessDialog.vue":k0,"./pages/sales-order/Detail.vue":R2,"./pages/sales-order/Editor.vue":zh,"./pages/sales-order/Index.vue":n$,"./pages/sales-order/detail/InvoiceTab.vue":o2,"./pages/sales-order/detail/PaymentDialog.vue":c2,"./pages/sales-order/detail/PaymentTab.vue":q2,"./pages/sales-order/editor/HelpDialog.vue":lh,"./pages/sales-order/editor/ItemEditorDialog.vue":th,"./pages/sales-order/editor/ItemsListTable.vue":j2,"./pages/sales-order/editor/OrderInfoDialog.vue":rh,"./pages/sales-order/editor/PaymentDialog.vue":X2,"./pages/sales-order/editor/SuccessDialog.vue":kh,"./pages/settings/SystemInformation.vue":m$,"./pages/settings/company-profile/Edit.vue":v$,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":c$,"./pages/settings/database/Index.vue":h$,"./pages/settings/pos/Edit.vue":q$,"./pages/settings/user-activity-log/Detail.vue":px,"./pages/settings/user-activity-log/Index.vue":kx,"./pages/settings/user-profile/Edit.vue":qx,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":wx,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":hx,"./pages/settings/user-role/Detail.vue":zx,"./pages/settings/user-role/Editor.vue":Wx,"./pages/settings/user-role/Index.vue":eS,"./pages/settings/user/Detail.vue":uS,"./pages/settings/user/Editor.vue":bS,"./pages/settings/user/Index.vue":$S,"./pages/stock-adjustment/Create.vue":IS,"./pages/stock-adjustment/Detail.vue":HS,"./pages/stock-adjustment/Editor.vue":XS,"./pages/stock-adjustment/Index.vue":uV,"./pages/stock-movement/Index.vue":gV,"./pages/supplier/Detail.vue":EV,"./pages/supplier/Editor.vue":QV,"./pages/supplier/Index.vue":lq,"./pages/supplier/detail/MainInfoTab.vue":SV,"./pages/supplier/detail/OrderHistoryTab.vue":RV,"./pages/tax-scheme/Editor.vue":mq,"./pages/tax-scheme/Index.vue":$q})});
