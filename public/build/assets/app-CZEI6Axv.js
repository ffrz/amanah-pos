import{r as T,a as G,c as O,o as d,w as a,b as t,d as e,e as w,f as k,Q as de,t as r,u as l,g as H,h as Ie,i as ua,T as Qe,j as Sn,k as ge,l as Te,m as Je,n as X,p as rt,q as pe,s as te,v,x as ta,y as C,z as se,A as E,B as tt,F as Y,C as Ye,D as ae,E as yt,G as vt,H as ee,I as Vn,J as Ca,K as no,L as Ot,M as Z,N as na,O as he,R as ne,P as Ce,S as so,U as qn,V as Cn,W as Yt,X as At,Y as Ta,Z as Ua,_ as Tn,$ as Ne,a0 as Pn,a1 as Rn,a2 as On,a3 as zt,a4 as In,a5 as Un,a6 as Pa,a7 as Zt,a8 as Ra,a9 as Ya,aa as Dn,ab as ba,ac as Qa,ad as jn,ae as Ja,af as En,ag as ro,ah as An,ai as Bn,aj as Mn,ak as Ea,al as Aa,am as Nn,an as Nt,ao as ve,ap as je,aq as Le,ar as Ke,as as $e,at as Re,au as Q,av as Se,aw as it,ax as We,ay as Ee,az as aa,aA as xe,aB as Pe,aC as at,aD as ze,aE as Ge,aF as He,aG as et,aH as Ue,aI as oe,aJ as B,aK as fe,aL as st,aM as Me,aN as ma,aO as _a,aP as Lt,aQ as Kt,aR as It,aS as Ut,aT as ot,aU as Ga,aV as Dt,aW as ya,aX as ra,aY as Ht,aZ as Ba,a_ as ca,a$ as $t,b0 as zn,b1 as ia,b2 as Fn,b3 as Ln,b4 as io,b5 as Kn,b6 as Hn,b7 as Wn,b8 as Yn,b9 as Xa,ba as Qn,bb as Jn,bc as Gn,bd as Xn,be as la,bf as De,bg as _t,bh as Zn,bi as Za,bj as es,bk as ts,bl as as,bm as ls,bn as os,bo as ns,bp as ss,bq as be,br as sa,bs as da,bt as ut,bu as rs,bv as is,bw as ds,bx as us,by as ms,bz as cs,bA as Ma,bB as ps,bC as Vt,bD as mt,bE as Na,bF as Da,bG as uo,bH as lt,bI as Jt,bJ as mo,bK as oa,bL as wt,bM as co,bN as fs,bO as bt,bP as ft,bQ as gt,bR as xt,bS as ka,bT as Ft,bU as gs,bV as bs,bW as vs,bX as po,bY as _s,bZ as ys,b_ as ks,b$ as el,c0 as ws,c1 as hs,c2 as $s,c3 as xs,c4 as Ss,c5 as Vs,c6 as qs,c7 as Cs,c8 as Ts}from"./virtual_pwa-register-CHriFkR0.js";const Ps={class:"q-ma-md"},Rs={key:0},Os={__name:"Autocomplete1",setup(p){const s=T(null),u=T([]);let o=null;const i=(n,f)=>{if(n.length<2){f(()=>{u.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Ie.get(`/web-api/customers?q=${n}`).then(b=>{const c=b.data.data.map(m=>({label:`${m.code} - ${m.name}`,value:m.id,data:m}));f(()=>{u.value=c})}).catch(b=>{console.error("Gagal mengambil data pelanggan:",b),f(()=>{u.value=[]})})})};return(n,f)=>{const b=G("guest-layout");return d(),O(b,null,{default:a(()=>[t("div",Ps,[e(de,{class:"full-width",modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=c=>s.value=c),"use-input":"",label:"Cari Pelanggan",options:u.value,onFilter:i,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),s.value?(d(),w("div",Rs," Saldo: Rp. "+r(l(H)(s.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},Is=Object.freeze(Object.defineProperty({__proto__:null,default:Os},Symbol.toStringTag,{value:"Module"})),Us={style:{"margin-left":"-10px"}},wa={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(p,{emit:s}){const u=p,o=s;return(i,n)=>(d(),w("div",Us,[e(ua,{class:"full-width q-pl-none","model-value":u.modelValue,disable:u.disable,label:u.label,"onUpdate:modelValue":n[0]||(n[0]=f=>o("update:modelValue",f))},null,8,["model-value","disable","label"])]))}};function ja(p){return p instanceof File||p instanceof Blob||p instanceof FileList&&p.length>0||p instanceof FormData&&Array.from(p.values()).some(s=>ja(s))||typeof p=="object"&&p!==null&&Object.values(p).some(s=>ja(s))}function Ds(p,s=null){const u=Qe(p,s);let o=f=>f,i=null;const n={transform:f=>b=>(o=b,f),submit:f=>(b,c,m={})=>{u.wasSuccessful=!1,u.recentlySuccessful=!1,u.clearErrors(),clearTimeout(i),m.onBefore&&m.onBefore(),u.processing=!0,m.onStart&&m.onStart();const g=o(u.data());axios[b](c,g,{headers:{"Content-Type":ja(g)?"multipart/form-data":"application/json"},onUploadProgress:_=>{u.progress=_,m.onProgress&&m.onProgress(_)}}).then(_=>{u.processing=!1,u.progress=null,u.clearErrors(),u.wasSuccessful=!0,u.recentlySuccessful=!0,i=setTimeout(()=>u.recentlySuccessful=!1,2e3),m.onSuccess&&m.onSuccess(_.data),u.defaults(Sn(u.data())),u.isDirty=!1}).catch(_=>{var y;u.processing=!1,u.progress=null,u.clearErrors(),((y=_.response)==null?void 0:y.status)===422&&Object.keys(_.response.data.errors).forEach(S=>{u.setError(S,_.response.data.errors[S][0])}),m.onError&&m.onError(_)}).finally(()=>{u.processing=!1,u.progress=null,m.onFinish&&m.onFinish()})}};return new Proxy(u,{get:(f,b,c)=>Object.keys(n).indexOf(b)<0?f[b]:n[b](c)})}const js={class:"column"},Es={class:"row"},As={class:"q-my-sm text-grey-7 text-subtitle1 text-bold"},Bs={class:"flex justify-center"},Ms={__name:"Login",setup(p){let s=Ds({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const u=ge();console.log(u.props.data);const o=()=>rt({form:s,url:route("admin.auth.login"),onSuccess:()=>{s.processing=!0,window.location.href=route("admin.dashboard")}}),i=T(!1);return(n,f)=>{const b=G("i-head"),c=G("guest-layout");return d(),w(Y,null,[e(b,{title:"Login"}),e(c,null,{default:a(()=>[e(Te,{class:"row justify-center items-center"},{default:a(()=>[t("div",js,[t("div",Es,[e(Je,{class:"q-gutter-md",onSubmit:X(o,["prevent"])},{default:a(()=>[e(pe,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:a(()=>[e(te,{class:"text-center"},{default:a(()=>[t("div",As,[v(" Login ke "+r(l(u).props.company.name)+" ",1),t("div",Bs,[e(ta,{size:"100px",class:"q-my-none"},{default:a(()=>[e(C,{name:"badge",color:"grey"})]),_:1})])]),e(se,{modelValue:l(s).username,"onUpdate:modelValue":f[0]||(f[0]=m=>l(s).username=m),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!l(s).errors.username,autocomplete:"username","error-message":l(s).errors.username,disable:l(s).processing,rules:[m=>m&&m.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:a(()=>[e(C,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(se,{modelValue:l(s).password,"onUpdate:modelValue":f[2]||(f[2]=m=>l(s).password=m),type:i.value?"text":"password",label:"Kata Sandi",error:!!l(s).errors.password,autocomplete:"current-password","error-message":l(s).errors.password,"lazy-rules":"",disable:l(s).processing,rules:[m=>m&&m.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:f[1]||(f[1]=m=>i.value=!i.value)},{default:a(()=>[e(C,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(wa,{class:"q-mt-sm",modelValue:l(s).remember,"onUpdate:modelValue":f[3]||(f[3]=m=>l(s).remember=m),disable:l(s).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(tt,null,{default:a(()=>[e(E,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:l(s).processing,loading:l(s).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Ns=Object.freeze(Object.defineProperty({__proto__:null,default:Ms},Symbol.toStringTag,{value:"Module"})),zs={class:"q-gutter-sm"},Fs={class:"col col-md-6 q-pa-xs"},Ls={class:"detail q-mt-md"},Ks={key:0},Hs={class:"text-bold"},tl="Tutup Sesi Kasir",Ws={__name:"Close",setup(p){const s=ge(),u=Qe({closing_notes:s.props.data.closing_notes,closing_balance:parseFloat(s.props.data.closing_balance)}),o=()=>rt({form:u,url:route("admin.cashier-session.close",{id:s.props.data.id})});return(i,n)=>{const f=G("i-head"),b=G("authenticated-layout");return d(),w(Y,null,[e(f,{title:tl}),e(b,null,{title:a(()=>[v(r(tl))]),"left-button":a(()=>[t("div",zs,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Fs,[e(Je,{class:"row",onSubmit:X(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":n[1]||(n[1]=c=>l(u).id=c)},null,512),[[yt,l(u).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[t("table",Ls,[t("tbody",null,[t("tr",null,[n[4]||(n[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),n[5]||(n[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.id),1)]),t("tr",null,[n[6]||(n[6]=t("td",null,"Terminal",-1)),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"Kasir",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.user.username)+" - "+r(l(s).props.data.user.name),1)]),t("tr",null,[n[10]||(n[10]=t("td",null,"Saldo Awal",-1)),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.opening_balance)),1)]),l(s).props.data.opening_notes?(d(),w("tr",Ks,[n[12]||(n[12]=t("td",null,"Catatan Buka",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.opening_notes),1)])):k("",!0),t("tr",null,[n[14]||(n[14]=t("td",null,"Total Penjualan",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.total_sales)),1)]),t("tr",null,[n[16]||(n[16]=t("td",null,"Total Pemasukan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.total_income)),1)]),t("tr",null,[n[18]||(n[18]=t("td",null,"Total Pengeluaran",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.total_expense)),1)]),t("tr",null,[n[21]||(n[21]=t("td",null,"Saldo Akhir",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,[t("div",Hs,r(l(vt)(l(s).props.data.closing_balance)),1),n[20]||(n[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(se,{modelValue:l(u).closing_notes,"onUpdate:modelValue":n[2]||(n[2]=c=>l(u).closing_notes=c),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(u).processing,error:!!l(u).errors.closing_notes,"error-message":l(u).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:l(u).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(u).processing,onClick:n[3]||(n[3]=c=>l(ee).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ys=Object.freeze(Object.defineProperty({__proto__:null,default:Ws},Symbol.toStringTag,{value:"Module"}));let Qs=0;const Js=["click","keydown"],Gs={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Qs++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Xs(p,s,u,o){const i=Vn(no,Ca);if(i===Ca)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ca;const{proxy:n}=Ot(),f=T(null),b=T(null),c=T(null),m=Z(()=>p.disable===!0||p.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},p.ripple===!0?{}:p.ripple)),g=Z(()=>i.currentModel.value===p.name),_=Z(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(g.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(p.icon&&p.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(p.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(p.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),y=Z(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(p.contentClass!==void 0?` ${p.contentClass}`:"")),S=Z(()=>p.disable===!0||i.hasFocus.value===!0||g.value===!1&&i.hasActiveTab.value===!0?-1:p.tabindex||0);function V(D,U){if(U!==!0&&f.value!==null&&f.value.focus(),p.disable!==!0){i.updateModel({name:p.name}),u("click",D);return}}function $(D){qn(D,[13,32])?V(D,!0):Cn(D)!==!0&&D.keyCode>=35&&D.keyCode<=40&&D.altKey!==!0&&D.metaKey!==!0&&i.onKbdNavigate(D.keyCode,n.$el)===!0&&Yt(D),u("keydown",D)}function R(){const D=i.tabProps.value.narrowIndicator,U=[],z=Ce("div",{ref:c,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});p.icon!==void 0&&U.push(Ce(C,{class:"q-tab__icon",name:p.icon})),p.label!==void 0&&U.push(Ce("div",{class:"q-tab__label"},p.label)),p.alert!==!1&&U.push(p.alertIcon!==void 0?Ce(C,{class:"q-tab__alert-icon",color:p.alert!==!0?p.alert:void 0,name:p.alertIcon}):Ce("div",{class:"q-tab__alert"+(p.alert!==!0?` text-${p.alert}`:"")})),D===!0&&U.push(z);const M=[Ce("div",{class:"q-focus-helper",tabindex:-1,ref:f}),Ce("div",{class:y.value},so(s.default,U))];return D===!1&&M.push(z),M}const K={name:Z(()=>p.name),rootRef:b,tabIndicatorRef:c,routeData:o};na(()=>{i.unregisterTab(K)}),he(()=>{i.registerTab(K)});function I(D,U){const z={ref:b,class:_.value,tabindex:S.value,role:"tab","aria-selected":g.value===!0?"true":"false","aria-disabled":p.disable===!0?"true":void 0,onClick:V,onKeydown:$,...U};return ae(Ce(D,z,R()),[[ne,m.value]])}return{renderTab:I,$tabs:i}}const dt=At({name:"QTab",props:Gs,emits:Js,setup(p,{slots:s,emit:u}){const{renderTab:o}=Xs(p,s,u);return()=>o("div")}});function Zs(p,s,u){const o=u===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${p?` text-${p}`:""}`}const er=["left","center","right","justify"],Tt=At({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:p=>er.includes(p)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(p,{slots:s,emit:u}){const{proxy:o}=Ot(),{$q:i}=o,{registerTick:n}=Ta(),{registerTick:f}=Ta(),{registerTick:b}=Ta(),{registerTimeout:c,removeTimeout:m}=Ua(),{registerTimeout:g,removeTimeout:_}=Ua(),y=T(null),S=T(null),V=T(p.modelValue),$=T(!1),R=T(!0),K=T(!1),I=T(!1),D=[],U=T(0),z=T(!1);let M=null,h=null,j;const P=Z(()=>({activeClass:p.activeClass,activeColor:p.activeColor,activeBgColor:p.activeBgColor,indicatorClass:Zs(p.indicatorColor,p.switchIndicator,p.vertical),narrowIndicator:p.narrowIndicator,inlineLabel:p.inlineLabel,noCaps:p.noCaps})),x=Z(()=>{const _e=U.value,Ve=V.value;for(let Ae=0;Ae<_e;Ae++)if(D[Ae].name.value===Ve)return!0;return!1}),A=Z(()=>`q-tabs__content--align-${$.value===!0?"left":I.value===!0?"justify":p.align}`),F=Z(()=>`q-tabs row no-wrap items-center q-tabs--${$.value===!0?"":"not-"}scrollable q-tabs--${p.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${p.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${p.mobileArrows===!0?"":"out"}-arrows`+(p.dense===!0?" q-tabs--dense":"")+(p.shrink===!0?" col-shrink":"")+(p.stretch===!0?" self-stretch":"")),q=Z(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+A.value+(p.contentClass!==void 0?` ${p.contentClass}`:"")),N=Z(()=>p.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),le=Z(()=>p.vertical!==!0&&i.lang.rtl===!0),me=Z(()=>Tn===!1&&le.value===!0);Ne(le,ye),Ne(()=>p.modelValue,_e=>{ie({name:_e,setCurrent:!0,skipEmit:!0})}),Ne(()=>p.outsideArrows,Oe);function ie({name:_e,setCurrent:Ve,skipEmit:Ae}){V.value!==_e&&(Ae!==!0&&p["onUpdate:modelValue"]!==void 0&&u("update:modelValue",_e),(Ve===!0||p["onUpdate:modelValue"]===void 0)&&(ce(V.value,_e),V.value=_e))}function Oe(){n(()=>{Xe({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function Xe(_e){if(N.value===void 0||S.value===null)return;const Ve=_e[N.value.container],Ae=Math.min(S.value[N.value.scroll],Array.prototype.reduce.call(S.value.children,(pt,Ze)=>pt+(Ze[N.value.content]||0),0)),ct=Ve>0&&Ae>Ve;$.value=ct,ct===!0&&f(ye),I.value=Ve<parseInt(p.breakpoint,10)}function ce(_e,Ve){const Ae=_e!=null&&_e!==""?D.find(pt=>pt.name.value===_e):null,ct=Ve!=null&&Ve!==""?D.find(pt=>pt.name.value===Ve):null;if(ga===!0)ga=!1;else if(Ae&&ct){const pt=Ae.tabIndicatorRef.value,Ze=ct.tabIndicatorRef.value;M!==null&&(clearTimeout(M),M=null),pt.style.transition="none",pt.style.transform="none",Ze.style.transition="none",Ze.style.transform="none";const Fe=pt.getBoundingClientRect(),kt=Ze.getBoundingClientRect();Ze.style.transform=p.vertical===!0?`translate3d(0,${Fe.top-kt.top}px,0) scale3d(1,${kt.height?Fe.height/kt.height:1},1)`:`translate3d(${Fe.left-kt.left}px,0,0) scale3d(${kt.width?Fe.width/kt.width:1},1,1)`,b(()=>{M=setTimeout(()=>{M=null,Ze.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Ze.style.transform="none"},70)})}ct&&$.value===!0&&L(ct.rootRef.value)}function L(_e){const{left:Ve,width:Ae,top:ct,height:pt}=S.value.getBoundingClientRect(),Ze=_e.getBoundingClientRect();let Fe=p.vertical===!0?Ze.top-ct:Ze.left-Ve;if(Fe<0){S.value[p.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Fe),ye();return}Fe+=p.vertical===!0?Ze.height-pt:Ze.width-Ae,Fe>0&&(S.value[p.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Fe),ye())}function ye(){const _e=S.value;if(_e===null)return;const Ve=_e.getBoundingClientRect(),Ae=p.vertical===!0?_e.scrollTop:Math.abs(_e.scrollLeft);le.value===!0?(R.value=Math.ceil(Ae+Ve.width)<_e.scrollWidth-1,K.value=Ae>0):(R.value=Ae>0,K.value=p.vertical===!0?Math.ceil(Ae+Ve.height)<_e.scrollHeight:Math.ceil(Ae+Ve.width)<_e.scrollWidth)}function re(_e){h!==null&&clearInterval(h),h=setInterval(()=>{Be(_e)===!0&&ue()},5)}function W(){re(me.value===!0?Number.MAX_SAFE_INTEGER:0)}function ke(){re(me.value===!0?0:Number.MAX_SAFE_INTEGER)}function ue(){h!==null&&(clearInterval(h),h=null)}function J(_e,Ve){const Ae=Array.prototype.filter.call(S.value.children,kt=>kt===Ve||kt.matches&&kt.matches(".q-tab.q-focusable")===!0),ct=Ae.length;if(ct===0)return;if(_e===36)return L(Ae[0]),Ae[0].focus(),!0;if(_e===35)return L(Ae[ct-1]),Ae[ct-1].focus(),!0;const pt=_e===(p.vertical===!0?38:37),Ze=_e===(p.vertical===!0?40:39),Fe=pt===!0?-1:Ze===!0?1:void 0;if(Fe!==void 0){const kt=le.value===!0?-1:1,Et=Ae.indexOf(Ve)+Fe*kt;return Et>=0&&Et<ct&&(L(Ae[Et]),Ae[Et].focus({preventScroll:!0})),!0}}const qe=Z(()=>me.value===!0?{get:_e=>Math.abs(_e.scrollLeft),set:(_e,Ve)=>{_e.scrollLeft=-Ve}}:p.vertical===!0?{get:_e=>_e.scrollTop,set:(_e,Ve)=>{_e.scrollTop=Ve}}:{get:_e=>_e.scrollLeft,set:(_e,Ve)=>{_e.scrollLeft=Ve}});function Be(_e){const Ve=S.value,{get:Ae,set:ct}=qe.value;let pt=!1,Ze=Ae(Ve);const Fe=_e<Ze?-1:1;return Ze+=Fe*5,Ze<0?(pt=!0,Ze=0):(Fe===-1&&Ze<=_e||Fe===1&&Ze>=_e)&&(pt=!0,Ze=_e),ct(Ve,Ze),ye(),pt}function we(_e,Ve){for(const Ae in _e)if(_e[Ae]!==Ve[Ae])return!1;return!0}function ht(){let _e=null,Ve={matchedLen:0,queryDiff:9999,hrefLen:0};const Ae=D.filter(Fe=>Fe.routeData!==void 0&&Fe.routeData.hasRouterLink.value===!0),{hash:ct,query:pt}=o.$route,Ze=Object.keys(pt).length;for(const Fe of Ae){const kt=Fe.routeData.exact.value===!0;if(Fe.routeData[kt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Et,query:Va,matched:$n,href:xn}=Fe.routeData.resolvedLink.value,qa=Object.keys(Va).length;if(kt===!0){if(Et!==ct||qa!==Ze||we(pt,Va)===!1)continue;_e=Fe.name.value;break}if(Et!==""&&Et!==ct||qa!==0&&we(Va,pt)===!1)continue;const Mt={matchedLen:$n.length,queryDiff:Ze-qa,hrefLen:xn.length-Et.length};if(Mt.matchedLen>Ve.matchedLen){_e=Fe.name.value,Ve=Mt;continue}else if(Mt.matchedLen!==Ve.matchedLen)continue;if(Mt.queryDiff<Ve.queryDiff)_e=Fe.name.value,Ve=Mt;else if(Mt.queryDiff!==Ve.queryDiff)continue;Mt.hrefLen>Ve.hrefLen&&(_e=Fe.name.value,Ve=Mt)}if(_e===null&&D.some(Fe=>Fe.routeData===void 0&&Fe.name.value===V.value)===!0){ga=!1;return}ie({name:_e,setCurrent:!0})}function qt(_e){if(m(),z.value!==!0&&y.value!==null&&_e.target&&typeof _e.target.closest=="function"){const Ve=_e.target.closest(".q-tab");Ve&&y.value.contains(Ve)===!0&&(z.value=!0,$.value===!0&&L(Ve))}}function jt(){c(()=>{z.value=!1},30)}function St(){Ka.avoidRouteWatcher===!1?g(ht):_()}function fa(){if(j===void 0){const _e=Ne(()=>o.$route.fullPath,St);j=()=>{_e(),j=void 0}}}function wn(_e){D.push(_e),U.value++,Oe(),_e.routeData===void 0||o.$route===void 0?g(()=>{if($.value===!0){const Ve=V.value,Ae=Ve!=null&&Ve!==""?D.find(ct=>ct.name.value===Ve):null;Ae&&L(Ae.rootRef.value)}}):(fa(),_e.routeData.hasRouterLink.value===!0&&St())}function hn(_e){D.splice(D.indexOf(_e),1),U.value--,Oe(),j!==void 0&&_e.routeData!==void 0&&(D.every(Ve=>Ve.routeData===void 0)===!0&&j(),St())}const Ka={currentModel:V,tabProps:P,hasFocus:z,hasActiveTab:x,registerTab:wn,unregisterTab:hn,verifyRouteModel:St,updateModel:ie,onKbdNavigate:J,avoidRouteWatcher:!1};In(no,Ka);function Ha(){M!==null&&clearTimeout(M),ue(),j!==void 0&&j()}let Wa,ga;return na(Ha),Pn(()=>{Wa=j!==void 0,Ha()}),Rn(()=>{Wa===!0&&(fa(),ga=!0,St()),Oe()}),()=>Ce("div",{ref:y,class:F.value,role:"tablist",onFocusin:qt,onFocusout:jt},[Ce(On,{onResize:Xe}),Ce("div",{ref:S,class:q.value,onScroll:ye},zt(s.default)),Ce(C,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(R.value===!0?"":" q-tabs__arrow--faded"),name:p.leftIcon||i.iconSet.tabs[p.vertical===!0?"up":"left"],onMousedownPassive:W,onTouchstartPassive:W,onMouseupPassive:ue,onMouseleavePassive:ue,onTouchendPassive:ue}),Ce(C,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(K.value===!0?"":" q-tabs__arrow--faded"),name:p.rightIcon||i.iconSet.tabs[p.vertical===!0?"down":"right"],onMousedownPassive:ke,onTouchstartPassive:ke,onMouseupPassive:ue,onMouseleavePassive:ue,onTouchendPassive:ue})])}});function tr(p){const s=[.06,6,50];return typeof p=="string"&&p.length&&p.split(":").forEach((u,o)=>{const i=parseFloat(u);i&&(s[o]=i)}),s}const ar=Un({name:"touch-swipe",beforeMount(p,{value:s,arg:u,modifiers:o}){if(o.mouse!==!0&&Zt.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",n={handler:s,sensitivity:tr(u),direction:Ya(o),noop:Dn,mouseStart(f){Ja(f,n)&&En(f)&&(ba(n,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(f,!0))},touchStart(f){if(Ja(f,n)){const b=f.target;ba(n,"temp",[[b,"touchmove","move","notPassiveCapture"],[b,"touchcancel","end","notPassiveCapture"],[b,"touchend","end","notPassiveCapture"]]),n.start(f)}},start(f,b){Zt.is.firefox===!0&&Ra(p,!0);const c=Qa(f);n.event={x:c.left,y:c.top,time:Date.now(),mouse:b===!0,dir:!1}},move(f){if(n.event===void 0)return;if(n.event.dir!==!1){Yt(f);return}const b=Date.now()-n.event.time;if(b===0)return;const c=Qa(f),m=c.left-n.event.x,g=Math.abs(m),_=c.top-n.event.y,y=Math.abs(_);if(n.event.mouse!==!0){if(g<n.sensitivity[1]&&y<n.sensitivity[1]){n.end(f);return}}else if(window.getSelection().toString()!==""){n.end(f);return}else if(g<n.sensitivity[2]&&y<n.sensitivity[2])return;const S=g/b,V=y/b;n.direction.vertical===!0&&g<y&&g<100&&V>n.sensitivity[0]&&(n.event.dir=_<0?"up":"down"),n.direction.horizontal===!0&&g>y&&y<100&&S>n.sensitivity[0]&&(n.event.dir=m<0?"left":"right"),n.direction.up===!0&&g<y&&_<0&&g<100&&V>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&g<y&&_>0&&g<100&&V>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&g>y&&m<0&&y<100&&S>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&g>y&&m>0&&y<100&&S>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Yt(f),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),jn(),n.styleCleanup=$=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const R=()=>{document.body.classList.remove("no-pointer-events--children")};$===!0?setTimeout(R,50):R()}),n.handler({evt:f,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:b,distance:{x:g,y}})):n.end(f)},end(f){n.event!==void 0&&(Pa(n,"temp"),Zt.is.firefox===!0&&Ra(p,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),f!==void 0&&n.event.dir!==!1&&Yt(f),n.event=void 0)}};if(p.__qtouchswipe=n,o.mouse===!0){const f=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ba(n,"main",[[p,"mousedown","mouseStart",`passive${f}`]])}Zt.has.touch===!0&&ba(n,"main",[[p,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[p,"touchmove","noop","notPassiveCapture"]])},updated(p,s){const u=p.__qtouchswipe;u!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&u.end(),u.handler=s.value),u.direction=Ya(s.modifiers))},beforeUnmount(p){const s=p.__qtouchswipe;s!==void 0&&(Pa(s,"main"),Pa(s,"temp"),Zt.is.firefox===!0&&Ra(p,!1),s.styleCleanup!==void 0&&s.styleCleanup(),delete p.__qtouchswipe)}}),lr={name:{required:!0},disable:Boolean},al={setup(p,{slots:s}){return()=>Ce("div",{class:"q-panel scroll",role:"tabpanel"},zt(s.default))}},or={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},nr=["update:modelValue","beforeTransition","transition"];function sr(){const{props:p,emit:s,proxy:u}=Ot(),{getCache:o}=Bn(),{registerTimeout:i}=Ua();let n,f;const b=T(null),c=T(null);function m(N){const le=p.vertical===!0?"up":"left";j((u.$q.lang.rtl===!0?-1:1)*(N.direction===le?1:-1))}const g=Z(()=>[[ar,m,void 0,{horizontal:p.vertical!==!0,vertical:p.vertical,mouse:!0}]]),_=Z(()=>p.transitionPrev||`slide-${p.vertical===!0?"down":"right"}`),y=Z(()=>p.transitionNext||`slide-${p.vertical===!0?"up":"left"}`),S=Z(()=>`--q-transition-duration: ${p.transitionDuration}ms`),V=Z(()=>typeof p.modelValue=="string"||typeof p.modelValue=="number"?p.modelValue:String(p.modelValue)),$=Z(()=>({include:p.keepAliveInclude,exclude:p.keepAliveExclude,max:p.keepAliveMax})),R=Z(()=>p.keepAliveInclude!==void 0||p.keepAliveExclude!==void 0);Ne(()=>p.modelValue,(N,le)=>{const me=U(N)===!0?z(N):-1;f!==!0&&h(me===-1?0:me<z(le)?-1:1),b.value!==me&&(b.value=me,s("beforeTransition",N,le),i(()=>{s("transition",N,le)},p.transitionDuration))});function K(){j(1)}function I(){j(-1)}function D(N){s("update:modelValue",N)}function U(N){return N!=null&&N!==""}function z(N){return n.findIndex(le=>le.props.name===N&&le.props.disable!==""&&le.props.disable!==!0)}function M(){return n.filter(N=>N.props.disable!==""&&N.props.disable!==!0)}function h(N){const le=N!==0&&p.animated===!0&&b.value!==-1?"q-transition--"+(N===-1?_.value:y.value):null;c.value!==le&&(c.value=le)}function j(N,le=b.value){let me=le+N;for(;me!==-1&&me<n.length;){const ie=n[me];if(ie!==void 0&&ie.props.disable!==""&&ie.props.disable!==!0){h(N),f=!0,s("update:modelValue",ie.props.name),setTimeout(()=>{f=!1});return}me+=N}p.infinite===!0&&n.length!==0&&le!==-1&&le!==n.length&&j(N,N===-1?n.length:-1)}function P(){const N=z(p.modelValue);return b.value!==N&&(b.value=N),!0}function x(){const N=U(p.modelValue)===!0&&P()&&n[b.value];return p.keepAlive===!0?[Ce(Mn,$.value,[Ce(R.value===!0?o(V.value,()=>({...al,name:V.value})):al,{key:V.value,style:S.value},()=>N)])]:[Ce("div",{class:"q-panel scroll",style:S.value,key:V.value,role:"tabpanel"},[N])]}function A(){if(n.length!==0)return p.animated===!0?[Ce(ro,{name:c.value},x)]:x()}function F(N){return n=An(zt(N.default,[])).filter(le=>le.props!==null&&le.props.slot===void 0&&U(le.props.name)===!0),n.length}function q(){return n}return Object.assign(u,{next:K,previous:I,goTo:D}),{panelIndex:b,panelDirectives:g,updatePanelsList:F,updatePanelIndex:P,getPanelContent:A,getEnabledPanels:M,getPanels:q,isValidPanelName:U,keepAliveProps:$,needsUniqueKeepAliveWrapper:R,goToPanelByOffset:j,goToPanel:D,nextPanel:K,previousPanel:I}}const nt=At({name:"QTabPanel",props:lr,setup(p,{slots:s}){return()=>Ce("div",{class:"q-tab-panel",role:"tabpanel"},zt(s.default))}}),Pt=At({name:"QTabPanels",props:{...or,...Ea},emits:nr,setup(p,{slots:s}){const u=Ot(),o=Aa(p,u.proxy.$q),{updatePanelsList:i,getPanelContent:n,panelDirectives:f}=sr(),b=Z(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(s),Nn("div",{class:b.value},n(),"pan",p.swipeable,()=>f.value))}}),rr={class:"detail"},ir={key:0},dr={key:1},ur={key:0},mr={key:0},cr={colspan:"100%"},pr={class:"q-my-md"},fr={key:4},gr={colspan:"100%"},br={key:5},vr={colspan:"100%"},fo={__name:"MainInfoTab",setup(p){const s=ge();return(u,o)=>(d(),w("table",rr,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.user.username)+" - "+r(l(s).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.opening_balance)),1)]),l(s).props.data.opening_notes?(d(),w("tr",ir,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.total_expense)),1)]),l(s).props.data.is_closed?k("",!0):(d(),w("tr",dr,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.actual_balance)),1)])),l(s).props.data.is_closed?(d(),w(Y,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.closing_balance)),1)]),l(s).props.data.closing_notes?(d(),w("tr",ur,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),u.$can("admin.cashier-session.close")?(d(),w(Y,{key:3},[l(s).props.data.is_closed?k("",!0):(d(),w("tr",mr,[t("td",cr,[t("div",pr,[e(E,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=i=>u.$inertia.get(u.route("admin.cashier-session.close",{id:l(s).props.data.id})))},{default:a(()=>o[26]||(o[26]=[v(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),l(s).props.data.created_at?(d(),w("tr",fr,[t("td",gr," Dibuat "+r(l(Nt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",br,[t("td",vr," Diperbarui "+r(l(Nt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},_r=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"})),yr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},kr={class:"text-bold"},wr={key:0},hr={class:"text-bold"},$r={key:1},xr={key:0},Sr={key:0},Vr={key:1},go={__name:"SalesOrderTab",props:{data:Object},setup(p){const s=p,u=T([]),o=T(!0),i=je({...Le(),cashier_session_id:s.data.id,status:["closed","canceled"]}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(g=null)=>Ke({pagination:n,filter:i,props:g,rows:u,url:route("admin.sales-order.data"),loading:o}),c=$e(),m=Z(()=>c.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),O(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",yr,[t("span",null,r(S)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Re,{props:y,class:"cursor-pointer",onClick:X(S=>l(ee).get(g.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",kr,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),w(Y,{key:0},[y.row.customer?(d(),w("div",wr,[e(C,{class:"inline-icon",name:"person"}),v(" "+r(y.row.customer_code)+" "+r(y.row.customer.name),1)])):k("",!0),t("div",hr,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(H)(y.row.grand_total)),1)]),y.row.notes?(d(),w("div",$r,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(it,{color:y.row.status==="closed"?"green":"red"},{default:a(()=>[v(r(g.$CONSTANTS.SALES_ORDER_STATUSES[y.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"customer",props:y},{default:a(()=>[y.row.customer?(d(),w("div",xr,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(y.row.customer_code)+" - "+r(y.row.customer_name),1)]),y.row.customer_phone?(d(),w("div",Sr,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(y.row.customer_phone),1)])):k("",!0),y.row.customer_address?(d(),w("div",Vr,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(y.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:y},{default:a(()=>[t("div",null,r(l(H)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},qr=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"})),Cr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Tr={class:"text-bold"},Pr={class:"text-bold"},Rr={key:0},Or={class:"q-mt-sm"},bo={__name:"FinanceTransactionTab",props:{data:Object},setup(p){var g;const s=p;console.log(s.data);const u=T([]),o=T(!0),i=je({...Le(),account_id:(g=s.data.cashier_terminal)==null?void 0:g.finance_account_id,from_datetime:aa(s.data.opened_at),to_datetime:s.data.closed_at?aa(s.data.closed_at):null}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(_=null)=>Ke({pagination:n,filter:i,props:_,rows:u,url:route("admin.finance-transaction.data"),loading:o}),c=$e(),m=Z(()=>c.screen.gt.sm?f:f.filter(_=>_.name==="id"));return(_,y)=>(d(),O(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=S=>n.value=S),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:S,message:V,filter:$})=>[t("div",Cr,[t("span",null,r(V)+" "+r($?" with term "+$:""),1)])]),body:a(S=>[e(Re,{props:S},{default:a(()=>[e(Q,{key:"id",props:S},{default:a(()=>[t("div",Tr,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(S.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(" "+r(l(ve)(S.row.datetime)),1)]),l(c).screen.lt.md?(d(),w(Y,{key:0},[t("div",Pr,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(H)(S.row.amount)),1)]),S.row.notes?(d(),w("div",Rr,[e(Se,{text:S.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",Or,[e(it,{color:S.row.amount>=0?"green":"red"},{default:a(()=>[v(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"amount",props:S},{default:a(()=>[t("span",{class:xe(S.row.amount<0?"text-red":"text-green")},r(l(H)(S.row.amount)),3)]),_:2},1032,["props"]),e(Q,{key:"notes",props:S,class:"wrap-column"},{default:a(()=>[e(Se,{text:S.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ir=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),Ur={class:"q-gutter-sm"},Dr={class:"col col-lg-6 q-pa-xs"},jr={class:"row"},ll="Rincian Sesi Kasir",Er={__name:"Detail",setup(p){const s=ge(),u=Z(()=>s.props.data),o=T("main");return Ne(()=>s.props.tab,i=>{i&&(o.value=i)},{immediate:!0}),(i,n)=>{const f=G("i-head"),b=G("authenticated-layout");return d(),w(Y,null,[e(f,{title:ll}),e(b,null,{title:a(()=>[v(r(ll))]),"left-button":a(()=>[t("div",Ur,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Dr,[t("div",jr,[e(pe,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:a(()=>[e(Tt,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=c=>o.value=c),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Ringkasan"}),e(dt,{name:"sales",label:"Transaksi Penjualan"}),e(dt,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Pe),e(Pt,{modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=c=>o.value=c),animated:"",class:"q-pa-none"},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(fo,{data:u.value},null,8,["data"])]),_:1}),e(nt,{name:"sales",class:"q-pa-xs"},{default:a(()=>[e(go,{data:u.value},null,8,["data"])]),_:1}),e(nt,{name:"finance",class:"q-pa-xs"},{default:a(()=>[e(bo,{data:u.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Ar=Object.freeze(Object.defineProperty({__proto__:null,default:Er},Symbol.toStringTag,{value:"Module"}));function Bt(){return{protectClick:s=>(u,o)=>{const i=window.getSelection();if(i&&!i.isCollapsed){o.stopPropagation();return}s(u,o)}}}const Br={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Mr={class:"q-pa-xs"},Nr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zr={class:"row items-center q-gutter-x-sm"},Fr={class:"avatar"},Lr={class:"col"},Kr={class:"row items-center no-wrap"},Hr={class:"row items-center no-wrap"},Wr={class:"row items-center q-gutter-x-sm"},Yr={class:"avatar"},Qr={class:"col"},Jr={class:"row items-center no-wrap"},Gr={class:"flex justify-end"},ol="Sesi Kasir",Xr={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=je({search:"",status:"all",...Le()}),m=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];he(()=>{S()});const y=D=>st({message:`Hapus Sesi: ${D.cashier_terminal.name} - ${D.user.username}?`,url:route("admin.cashier-session.delete",D.id),fetchItemsCallback:S,loading:i}),S=(D=null)=>{Ke({pagination:m,filter:c,props:D,rows:o,url:route("admin.cashier-session.data"),loading:i,tableRef:n})},V=()=>S(),$=D=>ee.get(route("admin.cashier-session.detail",{id:D.id})),{protectClick:R}=Bt(),K=R($),I=Z(()=>s.screen.gt.sm?g:g.filter(D=>D.name==="id"||D.name==="action"));return(D,U)=>{const z=G("i-head"),M=G("authenticated-layout");return d(),w(Y,null,[e(z,{title:ol}),e(M,null,ze({title:a(()=>[v(r(ol))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=h=>u.value=!u.value)},null,8,["icon"]),D.$can("admin.cashier-session.open")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:U[1]||(U[1]=h=>l(ee).get(D.route("admin.cashier-session.open")))})):k("",!0)]),default:a(()=>[t("div",Mr,[e(Ee,{class:"full-height-table",style:He({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":U[5]||(U[5]=h=>m.value=h),filter:c.search,loading:i.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:P})=>[t("div",Nr,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Re,{props:h,class:xe(["cursor-pointer",h.row.is_closed?"":"bg-yellow-3"]),onClick:X(j=>l(K)(h.row,j),["stop"])},{default:a(()=>[e(Q,{key:"id",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" ID: "+r(h.row.id),1)]),t("div",null,[e(C,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(h.row.cashier_terminal.name),1)]),t("div",null,[e(C,{class:"inline-icon",name:"person"}),v(" "+r(h.row.user.username)+" - "+r(h.row.user.name),1)]),l(s).screen.lt.md?(d(),w(Y,{key:0},[e(Pe),t("div",zr,[t("div",Fr,[e(C,{name:"login",size:"25px",color:"grey-8"})]),t("div",Lr,[t("div",Kr,[e(C,{name:"calendar_clock",size:"xs",class:"q-mr-xs"}),t("span",null,r(h.row.opened_at?l(ve)(h.row.opened_at):"-"),1)]),t("div",Hr,[e(C,{name:"money",size:"xs",class:"q-mr-xs"}),t("span",null,r(l(vt)(h.row.opening_balance)),1)])])]),h.row.is_closed?(d(),w(Y,{key:0},[e(Pe),t("div",Wr,[t("div",Yr,[e(C,{name:"logout",size:"25px",color:"grey-8"})]),t("div",Qr,[t("div",Jr,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(h.row.closed_at?l(ve)(h.row.closed_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(vt)(h.row.closing_balance)),1)])])])],64)):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"opening_info",props:h},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(h.row.opened_at?l(ve)(h.row.opened_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(vt)(h.row.opening_balance)),1)]),h.row.opening_notes?(d(),O(Se,{key:0,text:h.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"closing_info",props:h},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(h.row.closed_at?l(ve)(h.row.closed_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(vt)(h.row.closing_balance)),1)]),h.row.closing_notes?(d(),O(Se,{key:0,text:h.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"action",props:h},{default:a(()=>[t("div",Gr,[D.$can("admin.cashier-session.close")||D.$can("admin.cashier-session.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:U[4]||(U[4]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[D.$can("admin.cashier-session.close")?ae((d(),O(oe,{key:0,disable:h.row.is_closed,clickable:"",onClick:X(j=>l(ee).get(D.route("admin.cashier-session.close",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"logout"})]),_:1}),e(B,null,{default:a(()=>U[6]||(U[6]=[v("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[ne],[fe]]):k("",!0),D.$can("admin.cashier-session.delete")&&!h.row.is_closed?ae((d(),O(oe,{key:1,onClick:X(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>U[7]||(U[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Br,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[U[2]||(U[2]=h=>c.status=h),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":U[3]||(U[3]=h=>c.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Zr=Object.freeze(Object.defineProperty({__proto__:null,default:Xr},Symbol.toStringTag,{value:"Module"})),ei={class:"q-gutter-sm"},ti={class:"col col-md-6 q-pa-xs"},nl="Buka Sesi Kasir",ai={__name:"Open",setup(p){const s=ge(),u=Qe({cashier_terminal_id:s.props.data.cashier_terminal_id,opening_balance:parseFloat(s.props.data.opening_balance),opening_notes:s.props.data.opening_notes}),o=[...s.props.cashier_terminals.map(n=>({value:n.id,label:n.name,balance:parseFloat(n.finance_account.balance)}))],i=()=>rt({form:u,url:route("admin.cashier-session.open")});return Ne(()=>u.cashier_terminal_id,n=>{if(n){const f=o.find(b=>b.value===n);f&&(u.opening_balance=f.balance)}else u.opening_balance=0}),(n,f)=>{const b=G("i-head"),c=G("authenticated-layout");return d(),w(Y,null,[e(b,{title:nl}),e(c,null,{title:a(()=>[v(r(nl))]),"left-button":a(()=>[t("div",ei,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=m=>n.$inertia.get(n.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",ti,[e(Je,{class:"row",onSubmit:X(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=m=>l(u).id=m)},null,512),[[yt,l(u).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(de,{class:"custom-select",modelValue:l(u).cashier_terminal_id,"onUpdate:modelValue":f[2]||(f[2]=m=>l(u).cashier_terminal_id=m),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:l(u).errors.cashier_terminal_id,error:!!l(u).errors.cashier_terminal_id,disable:l(u).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Me,{modelValue:l(u).opening_balance,"onUpdate:modelValue":f[3]||(f[3]=m=>l(u).opening_balance=m),label:"Saldo Buka Sesi",lazyRules:"",disable:l(u).processing,error:!!l(u).errors.opening_balance,errorMessage:l(u).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),f[6]||(f[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(se,{modelValue:l(u).opening_notes,"onUpdate:modelValue":f[4]||(f[4]=m=>l(u).opening_notes=m),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(u).processing,error:!!l(u).errors.opening_notes,"error-message":l(u).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:l(u).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(u).processing,onClick:f[5]||(f[5]=m=>l(ee).get(n.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},li=Object.freeze(Object.defineProperty({__proto__:null,default:ai},Symbol.toStringTag,{value:"Module"})),oi={class:"detail"},ni={colspan:"3"},si={class:"text-bold text-grey-8"},ri={key:0},ii={colspan:"100%"},di={key:1},ui={colspan:"100%"},vo={__name:"MainInfoTab",setup(p){const s=ge();return(u,o)=>(d(),w("table",oi,[t("tbody",null,[t("tr",null,[t("td",ni,[t("div",si,[o[1]||(o[1]=v(" Info Terminal Kasir ")),e(E,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=i=>u.$inertia.get(u.route("admin.cashier-terminal.edit",{id:l(s).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(l(vt)(l(s).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),l(s).props.data.created_at?(d(),w("tr",ri,[t("td",ii," Dibuat "+r(l(Nt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",di,[t("td",ui," Diperbarui "+r(l(Nt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},mi=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),ci={class:"full-width row flex-center text-grey-8 q-gutter-sm"},_o={__name:"SessionHistoryTab",setup(p){const s=ge(),u=T([]),o=T(!0),i=je({cashier_terminal_id:s.props.data.id,...Le()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];he(()=>{b()});const b=(g=null)=>Ke({pagination:n,filter:i,props:g,rows:u,url:route("admin.cashier-session.data"),loading:o}),c=$e(),m=Z(()=>c.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),O(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",ci,[t("span",null,r(S)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Re,{props:y,class:"cursor-pointer",onClick:X(S=>l(ee).get(g.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" Session ID: "+r(y.row.id),1)]),t("div",null,[e(C,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(y.row.cashier_terminal.name),1)]),t("div",null,[e(C,{class:"inline-icon",name:"person"}),v(" "+r(y.row.user.username)+" - "+r(y.row.user.name),1)])]),_:2},1032,["props"]),e(Q,{key:"opening_info",props:y},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(y.row.opened_at?l(ve)(y.row.opened_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(vt)(y.row.opening_balance)),1)]),y.row.opening_notes?(d(),O(Se,{key:0,text:y.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"closing_info",props:y},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(y.row.closed_at?l(ve)(y.row.closed_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(vt)(y.row.closing_balance)),1)]),y.row.closing_notes?(d(),O(Se,{key:0,text:y.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},pi=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),fi={class:"q-gutter-sm"},gi={class:"col col-lg-6 q-pa-xs"},bi={class:"row"},sl="Rincian Terminal Kasir",vi={__name:"Detail",setup(p){const s=T("main");return(u,o)=>{const i=G("i-head"),n=G("authenticated-layout");return d(),w(Y,null,[e(i,{title:sl}),e(n,null,{title:a(()=>[v(r(sl))]),"left-button":a(()=>[t("div",fi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=f=>u.$inertia.get(u.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",gi,[t("div",bi,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Tt,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=f=>s.value=f),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(Pt,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=f=>s.value=f),animated:""},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(vo)]),_:1}),e(nt,{name:"session-history",class:"q-pa-xs"},{default:a(()=>[e(_o)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},_i=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"})),yi={class:"q-gutter-sm"},ki={class:"col col-md-6 q-pa-xs"},wi={key:0,class:"q-my-xs text-grey-8"},hi={__name:"Editor",setup(p){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Terminal",o=Qe({id:s.props.data.id,name:s.props.data.name,finance_account_id:s.props.data.finance_account_id??"new",location:s.props.data.location,active:!!s.props.data.active,notes:s.props.data.notes}),i=[{value:"new",label:"Buat Baru (Otomatis)"},...s.props.finance_accounts.map(f=>({value:f.id,label:f.name}))],n=()=>rt({form:o,url:route("admin.cashier-terminal.save")});return(f,b)=>{const c=G("i-head"),m=G("authenticated-layout");return d(),w(Y,null,[e(c,{title:u}),e(m,null,{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",yi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>f.$inertia.get(f.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",ki,[e(Je,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(o).id=g)},null,512),[[yt,l(o).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(se,{modelValue:l(o).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{class:"custom-select",modelValue:l(o).finance_account_id,"onUpdate:modelValue":b[3]||(b[3]=g=>l(o).finance_account_id=g),label:"Akun Kas",options:i,"map-options":"","emit-value":"",errorMessage:l(o).errors.finance_account_id,error:!!l(o).errors.finance_account_id,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),l(o).finance_account_id==="new"?(d(),w("div",wi,[b[8]||(b[8]=v(" Akun keuangan akan dibuat ")),l(o).name?(d(),w(Y,{key:0},[v(" dengan nama Kas "+r(l(o).name),1)],64)):k("",!0)])):k("",!0),e(se,{modelValue:l(o).location,"onUpdate:modelValue":b[4]||(b[4]=g=>l(o).location=g),modelModifiers:{trim:!0},label:"Lokasi",error:!!l(o).errors.location,disable:l(o).processing,"error-message":l(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:l(o).notes,"onUpdate:modelValue":b[5]||(b[5]=g=>l(o).notes=g),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(wa,{modelValue:l(o).active,"onUpdate:modelValue":b[6]||(b[6]=g=>l(o).active=g),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(o).processing,onClick:b[7]||(b[7]=g=>l(ee).get(f.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},$i=Object.freeze(Object.defineProperty({__proto__:null,default:hi},Symbol.toStringTag,{value:"Module"})),xi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Si={class:"q-pa-xs"},Vi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},qi={class:"flex justify-end"},rl="Terminal Kasir",Ci={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=je({search:"",status:"active",...Le()}),m=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:s.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{S()});const y=D=>st({message:`Hapus Terminal Kasir ${D.name}?`,url:route("admin.cashier-terminal.delete",D.id),fetchItemsCallback:S,loading:i}),S=(D=null)=>{Ke({pagination:m,filter:c,props:D,rows:o,url:route("admin.cashier-terminal.data"),loading:i,tableRef:n})},V=()=>S(),$=D=>ee.get(route("admin.cashier-terminal.detail",{id:D.id})),{protectClick:R}=Bt(),K=R($),I=Z(()=>s.screen.gt.sm?g:g.filter(D=>D.name==="name"||D.name==="finance_account_id"||D.name==="action"));return(D,U)=>{const z=G("i-head"),M=G("authenticated-layout");return d(),w(Y,null,[e(z,{title:rl}),e(M,null,ze({title:a(()=>[v(r(rl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=h=>u.value=!u.value)},null,8,["icon"]),D.$can("admin.cashier-terminal.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:U[1]||(U[1]=h=>l(ee).get(D.route("admin.cashier-terminal.add")))})):k("",!0)]),default:a(()=>[t("div",Si,[e(Ee,{class:"full-height-table",style:He({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":U[5]||(U[5]=h=>m.value=h),filter:c.search,loading:i.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:P})=>[t("div",Vi,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Re,{props:h,class:xe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:X(j=>l(K)(h.row,j),["stop"])},{default:a(()=>[e(Q,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{name:"wallet"}),v(" "+r(h.row.name),1)]),t("div",null,[e(C,{name:"home_pin"}),v(" "+r(h.row.location),1)]),l(s).screen.lt.md?(d(),O(Se,{key:0,text:h.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:h},{default:a(()=>[t("div",null,[e(C,{name:"wallet"}),v(" "+r(h.row.finance_account.name),1)]),t("div",null,[e(C,{name:"money"}),v(" "+r(l(vt)(h.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(Q,{key:"notes",props:h},{default:a(()=>[e(Se,{text:h.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:h},{default:a(()=>[t("div",qi,[D.$can("admin.cashier-terminal.edit")||D.$can("admin.cashier-terminal.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:U[4]||(U[4]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[D.$can("admin.cashier-terminal.edit")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(j=>l(ee).get(D.route("admin.cashier-terminal.edit",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>U[6]||(U[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),D.$can("admin.cashier-terminal.delete")?ae((d(),O(oe,{key:1,onClick:X(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>U[7]||(U[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",xi,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[U[2]||(U[2]=h=>c.status=h),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":U[3]||(U[3]=h=>c.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ti=Object.freeze(Object.defineProperty({__proto__:null,default:Ci},Symbol.toStringTag,{value:"Module"})),Pi={class:"q-gutter-sm"},Ri={class:"col col-md-6 q-pa-xs"},Oi={class:"row"},Ii={class:"detail"},Ui={key:0},Di={key:1},ji={key:0},Ei={key:1},Ai={colspan:"3",class:"bg-white"},il="Rincian Konfirmasi Top Up",Bi={__name:"Detail",setup(p){const s=ge(),u=()=>_a({message:`Setujui konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"accept"},onSuccess:()=>{ee.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}}),o=()=>_a({message:`Tolak konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"reject"},onSuccess:()=>{ee.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}});return(i,n)=>{const f=G("i-head"),b=G("i-link"),c=G("my-link"),m=G("authenticated-layout");return d(),w(Y,null,[e(f,{title:il}),e(m,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Pi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=g=>i.$inertia.get(i.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":a(()=>[l(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:reject")?(d(),O(E,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:n[1]||(n[1]=g=>o()),class:"q-mr-sm"})):k("",!0),l(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:accept")?(d(),O(E,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:n[2]||(n[2]=g=>u())})):k("",!0)]),title:a(()=>[t("span",{class:"text-subtitle2"},r(il))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ri,[t("div",Oi,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[n[24]||(n[24]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",Ii,[t("tbody",null,[t("tr",null,[n[3]||(n[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),n[4]||(n[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Waktu",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Pelanggan",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),e(b,{href:i.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[v(r(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(d(),w("div",Ui,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(d(),w("div",Di,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[n[11]||(n[11]=t("td",null,"Akun Tujuan",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[e(c,{href:i.route("admin.finance-account.detail",{id:l(s).props.data.finance_account.id})},{default:a(()=>[v(r(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),n[10]||(n[10]=t("br",null,null,-1)),l(s).props.data.finance_account.type==="bank"?(d(),w(Y,{key:0},[v(" Rek "+r(l(s).props.data.finance_account.bank)+" an "+r(l(s).props.data.finance_account.holder)+" ",1),n[9]||(n[9]=t("br",null,null,-1)),v(" "+r(l(s).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[n[13]||(n[13]=t("td",null,"Jumlah",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(H)(l(s).props.data.amount)),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"Status",-1)),n[16]||(n[16]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[n[17]||(n[17]=t("td",null,"Catatan",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",ji,[n[19]||(n[19]=t("td",null,"Dibuat",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",Ei,[n[21]||(n[21]=t("td",null,"Diperbarui",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(Y,{key:2},[n[23]||(n[23]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Ai,[e(ma,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Mi=Object.freeze(Object.defineProperty({__proto__:null,default:Bi},Symbol.toStringTag,{value:"Module"})),Ni={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},zi={class:"q-pa-xs"},Fi={key:0},Li={class:"flex justify-end no-wrap"},dl="Konfirmasi Top Up Wallet",Ki={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=T(null),m=T(!1),g=Lt(),_=Kt(),y=[{label:"Semua Tahun",value:"all"},...It(g-2,g).reverse()],S=[{value:"all",label:"Semua Bulan"},...Ut()],V=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],$=je({search:"",year:g,month:_,status:"all",...Le()}),R=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),K=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",field:"action",align:"center"}];he(()=>{I()});const I=(P=null)=>{Ke({pagination:R,filter:$,props:P,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:i,tableRef:n})},D=()=>{I()},U=Z(()=>s.screen.gt.sm?K:K.filter(P=>["code","action"].includes(P.name)));Ne(()=>$.year,P=>{P===null&&($.month=null)});const z=P=>_a({message:`Setujui konfirmasi transaksi #${P.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:I,loading:i,data:{id:P.id,action:"accept"}}),M=P=>_a({message:`Tolak konfirmasi transaksi #${P.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:I,loading:i,data:{id:P.id,action:"reject"}}),h=P=>st({message:`Hapus konfirmasi transaksi ${P.code}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",P.id),fetchItemsCallback:I,loading:i}),j=P=>{c.value=P,m.value=!0};return(P,x)=>{const A=G("i-head"),F=G("authenticated-layout");return d(),w(Y,null,[e(A,{title:dl}),e(F,null,ze({title:a(()=>[v(r(dl))]),"right-button":a(()=>[e(E,{class:"q-ml-sm",icon:u.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:x[0]||(x[0]=q=>u.value=!u.value)},null,8,["icon"])]),default:a(()=>[t("div",zi,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",style:He({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:R.value,"onUpdate:pagination":x[6]||(x[6]=q=>R.value=q),filter:$.search,loading:i.value,columns:U.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:I,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),body:a(q=>[e(Re,{props:q,class:"cursor-pointer",onClick:X(N=>l(ee).get(P.route("admin.customer-wallet-transaction-confirmation.detail",{id:q.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"code",props:q,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(q.row.code),1)]),l(s).screen.gt.sm?k("",!0):(d(),w("div",Fi,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(q.row.datetime)),1)])),l(s).screen.gt.sm?k("",!0):(d(),w(Y,{key:1},[e(Se,{icon:"account_balance",text:q.row.finance_account.name},null,8,["text"]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(q.row.customer.code)+" - "+r(q.row.customer.name),1)]),t("div",null,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(H)(q.row.amount)),1)]),q.row.notes?(d(),O(Se,{key:0,icon:"notes",text:q.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Ga,{status:q.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(Q,{key:"datetime",props:q,class:"wrap-column"},{default:a(()=>[v(r(l(ve)(q.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"customer_id",props:q},{default:a(()=>[e(Se,{text:q.row.customer.code+" - "+q.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:q},{default:a(()=>[v(r(q.row.finance_account.name),1),x[8]||(x[8]=t("br",null,null,-1)),v(" "+r(q.row.finance_account.bank)+" "+r(q.row.finance_account.number)+" an. "+r(q.row.finance_account.holder),1)]),_:2},1032,["props"]),e(Q,{key:"amount",props:q,style:{"text-align":"right"}},{default:a(()=>[v(r(l(H)(q.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"status",props:q,class:"text-center"},{default:a(()=>[e(Ga,{status:q.row.status},null,8,["status"])]),_:2},1032,["props"]),e(Q,{key:"notes",props:q,class:"word-wrap"},{default:a(()=>[e(Se,{icon:"notes",text:q.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:q,class:"text-center"},{default:a(()=>[t("div",Li,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:q.row.image_path===null||q.row.image_path==="",onClick:X(N=>j(q.row.image_path),["stop"])},{default:a(()=>[q.row.image_path!=null?(d(),O(Dt,{key:0},{default:a(()=>x[9]||(x[9]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.customer-wallet-transaction-confirmation:accept")||P.$can("admin.customer-wallet-transaction-confirmation:deny")||P.$can("admin.customer-wallet-transaction-confirmation.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[5]||(x[5]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[P.$can("admin.customer-wallet-transaction-confirmation:accept")?ae((d(),O(oe,{key:0,onClick:X(N=>z(q.row),["stop"]),clickable:"",disable:q.row.status!=="pending"},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"check"})]),_:1}),e(B,null,{default:a(()=>x[10]||(x[10]=[v("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[ne],[fe]]):k("",!0),P.$can("admin.customer-wallet-transaction-confirmation:deny")?ae((d(),O(oe,{key:1,onClick:X(N=>M(q.row),["stop"]),clickable:"",disable:q.row.status!=="pending"},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(B,null,{default:a(()=>x[11]||(x[11]=[v("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[ne],[fe]]):k("",!0),e(Pe),P.$can("admin.customer-wallet-transaction-confirmation.delete")?ae((d(),O(oe,{key:2,onClick:X(N=>h(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>x[12]||(x[12]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(ya,{modelValue:m.value,"onUpdate:modelValue":x[7]||(x[7]=q=>m.value=q),imageUrl:`/${c.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Ni,[e(de,{modelValue:$.year,"onUpdate:modelValue":[x[1]||(x[1]=q=>$.year=q),D],options:y,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!=="all"?(d(),O(de,{key:0,modelValue:$.month,"onUpdate:modelValue":[x[2]||(x[2]=q=>$.month=q),D],options:S,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:$.status,"onUpdate:modelValue":[x[3]||(x[3]=q=>$.status=q),D],options:V,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":x[4]||(x[4]=q=>$.search=q),placeholder:"Cari...",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Hi=Object.freeze(Object.defineProperty({__proto__:null,default:Ki},Symbol.toStringTag,{value:"Module"}));function yo(p,s=!1){const u=p.map(f=>({value:f.id,label:f.name+" ("+f.code+")"})),o=s?[{value:"all",label:"Semua"},...u]:u,i=T([...o]);return{filteredCustomers:i,filterCustomersFn:(f,b)=>{b(()=>{i.value=o.filter(c=>c.label.toLowerCase().includes(f.toLowerCase()))})},customers:o}}const Wi={class:"col col-md-6 q-pa-xs"},ul="Penyesuaian Saldo Dompet Pelanggan",Yi={__name:"Adjustment",setup(p){const s=ge(),{filteredCustomers:u,filterCustomersFn:o}=yo(s.props.customers,!1),i=Qe({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),n=()=>i.amount=i.new_wallet_balance-i.old_wallet_balance;Ne(()=>i.customer_id,async c=>{if(!c){i.old_wallet_balance=0,i.new_wallet_balance=0,n();return}i.processing=!0;try{const m=await axios.get(route("admin.customer.wallet_balance",{id:c}));i.new_wallet_balance=i.old_wallet_balance=m.data.wallet_balance}catch(m){console.error("Gagal mengambil saldo:",m),i.old_wallet_balance=0,i.new_wallet_balance=0}i.processing=!1,n()});const f=Z(()=>i.new_wallet_balance-i.old_wallet_balance),b=()=>rt({form:i,url:route("admin.customer-wallet-transaction.adjustment")});return(c,m)=>{const g=G("i-head"),_=G("authenticated-layout");return d(),w(Y,null,[e(g,{title:ul}),e(_,null,{title:a(()=>[v(r(ul))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Wi,[e(Je,{class:"row",onSubmit:X(b,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(de,{class:"custom-select",modelValue:l(i).customer_id,"onUpdate:modelValue":m[0]||(m[0]=y=>l(i).customer_id=y),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(u),"map-options":"","emit-value":"",errorMessage:l(i).errors.customer_id,onFilter:l(o),error:!!l(i).errors.customer_id,disable:l(i).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(B,null,{default:a(()=>m[6]||(m[6]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Me,{modelValue:l(i).old_wallet_balance,"onUpdate:modelValue":m[1]||(m[1]=y=>l(i).old_wallet_balance=y),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:l(i).processing,error:!!l(i).errors.old_wallet_balance,errorMessage:l(i).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Me,{modelValue:l(i).new_wallet_balance,"onUpdate:modelValue":m[2]||(m[2]=y=>l(i).new_wallet_balance=y),label:"Saldo Seharusnya",lazyRules:"",disable:l(i).processing,error:!!l(i).errors.new_wallet_balance,errorMessage:l(i).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Me,{modelValue:f.value,"onUpdate:modelValue":m[3]||(m[3]=y=>f.value=y),label:"Selisih",readonly:"",lazyRules:"",disable:l(i).processing},null,8,["modelValue","disable"]),e(se,{modelValue:l(i).notes,"onUpdate:modelValue":m[4]||(m[4]=y=>l(i).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.notes,"error-message":l(i).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:m[5]||(m[5]=y=>l(ee).get(c.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Qi=Object.freeze(Object.defineProperty({__proto__:null,default:Yi},Symbol.toStringTag,{value:"Module"})),Ji={class:"q-gutter-sm"},Gi={class:"col col-md-6 q-pa-xs"},Xi={class:"row"},Zi={class:"detail"},ed={key:0},td={key:1},ad={key:0},ld={key:1},od={colspan:"3",class:"bg-white"},ml="Rincian Transaksi",nd={__name:"Detail",setup(p){const s=ge();return(u,o)=>{const i=G("i-head"),n=G("i-link"),f=G("authenticated-layout");return d(),w(Y,null,[e(i,{title:ml}),e(f,null,{"left-button":a(()=>[t("div",Ji,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$goBack())})])]),title:a(()=>[v(r(ml))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Gi,[t("div",Xi,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[18]||(o[18]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",Zi,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Pelanggan",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),e(n,{href:u.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[v(""+r(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(d(),w("div",ed,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(d(),w("div",td,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[l(s).props.data.type]),1)]),t("tr",null,[o[9]||(o[9]=t("td",null,"Jumlah",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",{class:xe(l(s).props.data.amount>0?"text-positive":"text-negative")},r(l(ra)(l(s).props.data.amount))+"Rp. "+r(l(H)(Math.abs(l(s).props.data.amount))),3)]),t("tr",null,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",ad,[o[13]||(o[13]=t("td",null,"Dibuat",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",ld,[o[15]||(o[15]=t("td",null,"Diperbarui",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(Y,{key:2},[o[17]||(o[17]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",od,[e(ma,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},sd=Object.freeze(Object.defineProperty({__proto__:null,default:nd},Symbol.toStringTag,{value:"Module"})),rd={class:"q-gutter-sm"},id={class:"col col-md-6 q-pa-xs"},dd={__name:"Editor",setup(p){var m;const s=ge(),u=(s.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:i}=yo(s.props.customers,!1),n=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],f=s.props.finance_accounts.map(g=>({label:g.name,value:g.id})),b=Qe({id:s.props.data.id,customer_id:s.props.data.customer_id,finance_account_id:s.props.data.finance_account_id,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((m=s.props.data)==null?void 0:m.image_path)??"",image:null}),c=()=>{ca(b,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:b,url:route("admin.customer-wallet-transaction.save")})};return(g,_)=>{const y=G("i-head"),S=G("authenticated-layout");return d(),w(Y,null,[e(y,{title:u}),e(S,null,{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",rd,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=V=>g.$inertia.get(g.route("admin.customer-wallet-transaction.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",id,[e(Je,{class:"row",onSubmit:X(c,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=V=>l(b).id=V)},null,512),[[yt,l(b).id]]),e(Ht,{autofocus:"",modelValue:l(b).datetime,"onUpdate:modelValue":_[2]||(_[2]=V=>l(b).datetime=V),label:"Tanggal",error:!!l(b).errors.datetime,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(de,{class:"custom-select",modelValue:l(b).customer_id,"onUpdate:modelValue":_[3]||(_[3]=V=>l(b).customer_id=V),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(o),"map-options":"","emit-value":"",errorMessage:l(b).errors.customer_id,onFilter:l(i),error:!!l(b).errors.customer_id,disable:l(b).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(B,null,{default:a(()=>_[10]||(_[10]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(de,{modelValue:l(b).type,"onUpdate:modelValue":_[4]||(_[4]=V=>l(b).type=V),label:"Jenis",options:n,"map-options":"","emit-value":"",error:!!l(b).errors.type,disable:l(b).processing,errorMessage:l(b).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{modelValue:l(b).finance_account_id,"onUpdate:modelValue":_[5]||(_[5]=V=>l(b).finance_account_id=V),label:l(b).type=="deposit"?"Kas Tujuan":"Kas Asal",options:l(f),"map-options":"","emit-value":"",error:!!l(b).errors.finance_account_id,disable:l(b).processing,errorMessage:l(b).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Me,{modelValue:l(b).amount,"onUpdate:modelValue":_[6]||(_[6]=V=>l(b).amount=V),label:"Jumlah",lazyRules:"",disable:l(b).processing,error:!!l(b).errors.amount,errorMessage:l(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(se,{modelValue:l(b).notes,"onUpdate:modelValue":_[7]||(_[7]=V=>l(b).notes=V),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(b).processing,error:!!l(b).errors.notes,"error-message":l(b).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Ba,{modelValue:l(b).image,"onUpdate:modelValue":_[8]||(_[8]=V=>l(b).image=V),"initial-image-path":l(b).image_path,disabled:l(b).processing,error:!!l(b).errors.image||!!l(b).errors.image_path,"error-message":l(b).errors.image||l(b).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(b).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(b).processing,onClick:_[9]||(_[9]=V=>l(ee).get(g.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ud=Object.freeze(Object.defineProperty({__proto__:null,default:dd},Symbol.toStringTag,{value:"Module"})),md={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},cd={class:"q-pa-xs"},pd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},fd={key:0},gd={key:0},bd={class:"flex justify-end no-wrap"},cl="Transaksi Dompet Pelanggan",vd={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=new Date().getFullYear(),m=new Date().getMonth()+1,g=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...It(c-2,c-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Ut()],y=je({search:"",year:c,month:m,...Le()}),S=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),V=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{R()});const $=M=>st({message:`Hapus transaksi #${M.code}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",M.id),fetchItemsCallback:R,loading:i}),R=(M=null)=>{Ke({pagination:S,filter:y,props:M,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:i,tableRef:n})},K=()=>{R()},I=Z(()=>s.screen.gt.sm?V:V.filter(M=>M.name==="code"||M.name==="action"));Ne(()=>y.year,M=>{M===null&&(y.month=null)});const D=T(null),U=T(!1),z=M=>{D.value=M,U.value=!0};return(M,h)=>{const j=G("i-head"),P=G("authenticated-layout");return d(),w(Y,null,[e(j,{title:cl}),e(P,null,ze({title:a(()=>[v(r(cl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=x=>u.value=!u.value)},null,8,["icon"]),M.$can("admin.customer-wallet-transaction.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=x=>l(ee).get(M.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",cd,[e(Ee,{ref_key:"tableRef",ref:n,style:He({height:l(b)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:S.value,"onUpdate:pagination":h[6]||(h[6]=x=>S.value=x),filter:y.search,loading:i.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:R,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:x,message:A,filter:F})=>[t("div",pd,[t("span",null,r(A)+" "+r(F?" with term "+F:""),1)])]),body:a(x=>[e(Re,{props:x,class:"cursor-pointer",onClick:X(A=>l(ee).get(M.route("admin.customer-wallet-transaction.detail",{id:x.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"code",props:x,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.gt.sm?k("",!0):(d(),O(C,{key:0,name:"tag",class:"inline-icon"})),v(" "+r(x.row.code),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(x.row.datetime)),1)]),x.row.finance_account?(d(),w("div",fd,[e(C,{name:"wallet",class:"inline-icon"}),v(" "+r(x.row.finance_account?x.row.finance_account.name:"-"),1)])):k("",!0),e(Se,{icon:"person",text:x.row.customer.code+" - "+x.row.customer.name},null,8,["text"]),t("div",{class:xe([x.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(C,{name:"money",class:"inline-icon"}),v(" "+r(l(ra)(x.row.amount))+"Rp. "+r(l(H)(Math.abs(x.row.amount))),1)],2),e(Se,{text:x.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(it,null,{default:a(()=>[v(r(x.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(Q,{key:"datetime",props:x},{default:a(()=>[v(r(l(ve)(x.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"customer_id",props:x},{default:a(()=>[e(Se,{text:x.row.customer.code+" - "+x.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:x},{default:a(()=>[x.row.finance_account?(d(),w("div",gd,r(x.row.finance_account?x.row.finance_account.name:"-"),1)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"amount",props:x,style:{"text-align":"right"}},{default:a(()=>[v(r(l($t)(x.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:x},{default:a(()=>[e(Se,{text:x.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:x},{default:a(()=>[t("div",bd,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:x.row.image_path===null||x.row.image_path==="",onClick:X(A=>z(x.row.image_path),["stop"])},{default:a(()=>[x.row.image_path!=null?(d(),O(Dt,{key:0},{default:a(()=>h[8]||(h[8]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),M.$can("admin.customer-wallet-transaction.delete")?(d(),O(E,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:h[5]||(h[5]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[M.$can("admin.customer-wallet-transaction.delete")?ae((d(),O(oe,{key:0,onClick:X(A=>$(x.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>h[9]||(h[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ya,{modelValue:U.value,"onUpdate:modelValue":h[7]||(h[7]=x=>U.value=x),imageUrl:`/${D.value}`},null,8,["modelValue","imageUrl"])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",md,[e(de,{modelValue:y.year,"onUpdate:modelValue":[h[2]||(h[2]=x=>y.year=x),K],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:y.month,"onUpdate:modelValue":[h[3]||(h[3]=x=>y.month=x),K],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:y.year===null},null,8,["modelValue","disable"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":h[4]||(h[4]=x=>y.search=x),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},_d=Object.freeze(Object.defineProperty({__proto__:null,default:vd},Symbol.toStringTag,{value:"Module"})),yd=["href"],kd={key:1},ea={__name:"WaLink",props:{phone:{type:String,required:!0},message:{type:String,default:""},display_text:{type:String,default:""}},setup(p){const s=p,u=Z(()=>zn(s.phone,s.message)),o=Z(()=>s.display_text?s.display_text:s.phone&&u.value!=="#"?s.phone:"-"),i=Z(()=>s.phone&&u.value!=="#");return(n,f)=>i.value?(d(),w("a",{key:0,href:u.value,target:"_blank",rel:"noopener noreferrer"},[v(r(o.value)+" ",1),e(l(C),{name:"open_in_new",size:"xs",class:"q-ml-xs"})],8,yd)):(d(),w("span",kd,r(o.value),1))}},wd={class:"detail"},hd={key:0},$d={key:1},xd={class:"text-grey-8"},Sd={key:2},Vd={class:"text-grey-8"},qd={key:0,class:"q-pt-md"},ko={__name:"MainInfoTab",setup(p){const s=ge(),u=()=>{st({message:`Hapus Pelanggan ${s.props.data.code}?`,url:route("admin.customer.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.customer.index"))}})};return(o,i)=>(d(),w(Y,null,[t("table",wd,[t("tbody",null,[i[28]||(i[28]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pelanggan")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Jenis",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.type_label),1)]),t("tr",null,[i[5]||(i[5]=t("td",null,"Nama",-1)),i[6]||(i[6]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[i[7]||(i[7]=t("td",null,"Default Harga",-1)),i[8]||(i[8]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.default_price_type_label),1)]),t("tr",null,[i[9]||(i[9]=t("td",null,"No. Telepon",-1)),i[10]||(i[10]=t("td",null,":",-1)),t("td",null,[e(ea,{phone:l(s).props.data.phone},null,8,["phone"])])]),t("tr",null,[i[11]||(i[11]=t("td",null,"Alamat",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.address?l(s).props.data.address:"-"),1)]),t("tr",null,[i[13]||(i[13]=t("td",null,"Saldo Wallet",-1)),i[14]||(i[14]=t("td",null,":",-1)),t("td",null," Rp. "+r(l($t)(l(s).props.data.wallet_balance)),1)]),t("tr",null,[i[15]||(i[15]=t("td",null,"Saldo Utang / Piutang",-1)),i[16]||(i[16]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l($t)(l(s).props.data.balance)),1)]),t("tr",null,[i[17]||(i[17]=t("td",null,"Status",-1)),i[18]||(i[18]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),i[29]||(i[29]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),l(s).props.data.created_at?(d(),w("tr",hd,[i[19]||(i[19]=t("td",null,"Dibuat",-1)),i[20]||(i[20]=t("td",null,":",-1)),t("td",null,r(l(Nt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",$d,[i[21]||(i[21]=t("td",null,"Diperbarui",-1)),i[22]||(i[22]=t("td",null,":",-1)),t("td",null,r(l(Nt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[i[23]||(i[23]=t("td",null,"Terakhir login",-1)),i[24]||(i[24]=t("td",null,":",-1)),t("td",null,[v(r(l(s).props.data.last_login_datetime?l(ve)(l(s).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",xd,"("+r(l(Nt)(l(s).props.data.last_login_datetime))+")",1)])]),l(s).props.data.last_activity_datetime?(d(),w("tr",Sd,[i[26]||(i[26]=t("td",null,"Aktifitas Terakhir",-1)),i[27]||(i[27]=t("td",null,":",-1)),t("td",null,[v(r(l(ve)(l(s).props.data.last_activity_datetime))+" ",1),t("span",Vd,[v("("+r(l(Nt)(l(s).props.data.last_activity_datetime))+")",1),i[25]||(i[25]=t("br",null,null,-1)),v(r(l(s).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(d(),w("div",qd,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>u())})])):k("",!0)],64))}},Cd=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),Td={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Pd={class:"text-bold"},wo={__name:"WalletHistoryTab",setup(p){const s=ge(),u=T([]),o=T(!0),i=je({customer_id:s.props.data.id,...Le()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{b()});const b=(g=null)=>Ke({pagination:n,filter:i,props:g,rows:u,url:route("admin.customer-wallet-transaction.data"),loading:o}),c=$e(),m=Z(()=>c.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),O(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",Td,[t("span",null,r(S)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Re,{props:y,class:"cursor-pointer",onClick:X(S=>l(ee).get(g.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",Pd,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),w(Y,{key:0},[t("div",{class:xe(["text-bold",y.row.amount<0?"text-red":"text-green"])},[e(C,{name:"money",class:"inline-icon"}),v(" "+r(l(ia)(y.row.amount)),1)],2),t("div",null,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(it,{size:"xs",color:y.row.amount>0?"green":"red"},{default:a(()=>[e(C,{name:"category"}),v(" "+r(y.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"amount",props:y},{default:a(()=>[t("div",{class:xe(y.row.amount<0?"text-red-10":y.row.amount>0?"text-green-10":"")},r(l($t)(y.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Rd=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),Od={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Id={class:"text-bold"},Ud={key:0},Dd={key:1},ho={__name:"OrderHistoryTab",setup(p){const s=ge(),u=T([]),o=T(!0),i=je({customer_id:s.props.data.id,...Le()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(g=null)=>Ke({pagination:n,filter:i,props:g,rows:u,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:s.props.data.id}}),loading:o}),c=$e(),m=Z(()=>c.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),O(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",Od,[t("span",null,r(S)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Re,{props:y,class:"cursor-pointer",onClick:X(S=>l(ee).get(g.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",Id,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),w(Y,{key:0},[t("div",null,[e(C,{name:"money",class:"inline-icon"}),v(" Total: Rp. "+r(l(H)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(d(),w("div",Ud,[e(C,{name:"money",class:"inline-icon"}),v(" Sisa Utang Rp. "+r(l(H)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(d(),w("div",Dd,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(it,{color:y.row.status=="closed"?"green":"red"},{default:a(()=>[v(r(y.row.status_label),1)]),_:2},1032,["color"]),e(it,{class:"q-ml-xs",color:y.row.payment_status=="fully_paid"?"green":"red"},{default:a(()=>[v(r(y.row.payment_status_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:y},{default:a(()=>[v(r(l(H)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"remaining_debt",props:y},{default:a(()=>[v(r(l(H)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},jd=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),Ed={class:"q-gutter-sm"},Ad={class:"q-gutter-sm"},Bd={class:"col col-lg-6 q-pa-xs"},Md={class:"row"},pl="Rincian Pelanggan",Nd={__name:"Detail",setup(p){const s=ge(),u=T("main");return $e(),(o,i)=>{const n=G("i-head"),f=G("authenticated-layout");return d(),w(Y,null,[e(n,{title:pl}),e(f,null,{title:a(()=>[v(r(pl))]),"left-button":a(()=>[t("div",Ed,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":a(()=>[t("div",Ad,[o.$can("admin.customer.edit")?(d(),O(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>l(ee).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),O(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>l(ee).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),O(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>l(ee).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Bd,[t("div",Md,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Tt,{modelValue:u.value,"onUpdate:modelValue":i[4]||(i[4]=b=>u.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"history",label:"Riwayat Wallet"}),e(dt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Pt,{modelValue:u.value,"onUpdate:modelValue":i[5]||(i[5]=b=>u.value=b),animated:""},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(ko)]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(wo)]),_:1}),e(nt,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(ho)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},zd=Object.freeze(Object.defineProperty({__proto__:null,default:Nd},Symbol.toStringTag,{value:"Module"})),Fd={class:"q-gutter-sm"},Ld={class:"col col-md-6 q-pa-xs"},Kd={__name:"Editor",setup(p){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,default_price_type:s.props.data.default_price_type,phone:s.props.data.phone,address:s.props.data.address,active:!!s.props.data.active,password:s.props.data.id?null:"12345",type:s.props.data.type}),i=T(!s.props.data.id),n=ot(window.CONSTANTS.CUSTOMER_TYPES),f=ot(window.CONSTANTS.PRODUCT_PRICE_TYPES),b=()=>rt({form:o,url:route("admin.customer.save",{id:o.id})});return(c,m)=>{const g=G("i-head"),_=G("authenticated-layout");return d(),w(Y,null,[e(g,{title:u}),e(_,null,{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",Fd,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>c.$goBack())})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:m[1]||(m[1]=y=>b()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ld,[e(Je,{class:"row",onSubmit:X(b,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[2]||(m[2]=y=>l(o).id=y)},null,512),[[yt,l(o).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(se,{modelValue:l(o).code,"onUpdate:modelValue":m[3]||(m[3]=y=>l(o).code=y),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[y=>y&&y.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(o).name,"onUpdate:modelValue":m[4]||(m[4]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{modelValue:l(o).default_price_type,"onUpdate:modelValue":m[5]||(m[5]=y=>l(o).default_price_type=y),options:l(f),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!l(o).errors.default_price_type,"error-message":l(o).errors.default_price_type,disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(de,{modelValue:l(o).type,"onUpdate:modelValue":m[6]||(m[6]=y=>l(o).type=y),label:"Jenis Akun",options:l(n),"map-options":"","emit-value":"","lazy-rules":"",disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(o).errors.type,"error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(se,{modelValue:l(o).phone,"onUpdate:modelValue":m[7]||(m[7]=y=>l(o).phone=y),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:l(o).processing,error:!!l(o).errors.phone,"error-message":l(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).address,"onUpdate:modelValue":m[8]||(m[8]=y=>l(o).address=y),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{autocomplete:"off","aria-autocomplete":"none",modelValue:l(o).password,"onUpdate:modelValue":m[10]||(m[10]=y=>l(o).password=y),label:l(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:l(o).processing,error:!!l(o).errors.password,"error-message":l(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:i.value?"text":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:m[9]||(m[9]=y=>i.value=!i.value)},{default:a(()=>[e(C,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(wa,{modelValue:l(o).active,"onUpdate:modelValue":m[11]||(m[11]=y=>l(o).active=y),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),m[12]||(m[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Hd=Object.freeze(Object.defineProperty({__proto__:null,default:Kd},Symbol.toStringTag,{value:"Module"}));function Xt(p,s,u,o){const i=[];return p.forEach(n=>{o(n)===!0?i.push(n):s.push({failedPropValidation:u,file:n})}),i}function va(p){p&&p.dataTransfer&&(p.dataTransfer.dropEffect="copy"),Yt(p)}const Wd={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Yd=["rejected"];function Qd({editable:p,dnd:s,getFileInput:u,addFilesToQueue:o}){const{props:i,emit:n,proxy:f}=Ot(),b=T(null),c=Z(()=>i.accept!==void 0?i.accept.split(",").map(I=>(I=I.trim(),I==="*"?"*/":(I.endsWith("/*")&&(I=I.slice(0,I.length-1)),I.toUpperCase()))):null),m=Z(()=>parseInt(i.maxFiles,10)),g=Z(()=>parseInt(i.maxTotalSize,10));function _(I){if(p.value)if(I!==Object(I)&&(I={target:null}),I.target!==null&&I.target.matches('input[type="file"]')===!0)I.clientX===0&&I.clientY===0&&Fn(I);else{const D=u();D&&D!==I.target&&D.click(I)}}function y(I){p.value&&I&&o(null,I)}function S(I,D,U,z){let M=Array.from(D||I.target.files);const h=[],j=()=>{h.length!==0&&n("rejected",h)};if(i.accept!==void 0&&c.value.indexOf("*/")===-1&&(M=Xt(M,h,"accept",P=>c.value.some(x=>P.type.toUpperCase().startsWith(x)||P.name.toUpperCase().endsWith(x))),M.length===0))return j();if(i.maxFileSize!==void 0){const P=parseInt(i.maxFileSize,10);if(M=Xt(M,h,"max-file-size",x=>x.size<=P),M.length===0)return j()}if(i.multiple!==!0&&M.length!==0&&(M=[M[0]]),M.forEach(P=>{P.__key=P.webkitRelativePath+P.lastModified+P.name+P.size}),z===!0){const P=U.map(x=>x.__key);M=Xt(M,h,"duplicate",x=>P.includes(x.__key)===!1)}if(M.length===0)return j();if(i.maxTotalSize!==void 0){let P=z===!0?U.reduce((x,A)=>x+A.size,0):0;if(M=Xt(M,h,"max-total-size",x=>(P+=x.size,P<=g.value)),M.length===0)return j()}if(typeof i.filter=="function"){const P=i.filter(M);M=Xt(M,h,"filter",x=>P.includes(x))}if(i.maxFiles!==void 0){let P=z===!0?U.length:0;if(M=Xt(M,h,"max-files",()=>(P++,P<=m.value)),M.length===0)return j()}if(j(),M.length!==0)return M}function V(I){va(I),s.value!==!0&&(s.value=!0)}function $(I){Yt(I),(I.relatedTarget!==null||Zt.is.safari!==!0?I.relatedTarget!==b.value:document.elementsFromPoint(I.clientX,I.clientY).includes(b.value)===!1)===!0&&(s.value=!1)}function R(I){va(I);const D=I.dataTransfer.files;D.length!==0&&o(null,D),s.value=!1}function K(I){if(s.value===!0)return Ce("div",{ref:b,class:`q-${I}__dnd absolute-full`,onDragenter:va,onDragover:va,onDragleave:$,onDrop:R})}return Object.assign(f,{pickFiles:_,addFiles:y}),{pickFiles:_,addFiles:y,onDragover:V,onDragleave:$,processFiles:S,getDndNode:K,maxFilesNumber:m,maxTotalSizeNumber:g}}const $o=At({name:"QFile",inheritAttrs:!1,props:{...Kn,...io,...Wd,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Ln,...Yd],setup(p,{slots:s,emit:u,attrs:o}){const{proxy:i}=Ot(),n=Hn(),f=T(null),b=T(!1),c=Wn(p),{pickFiles:m,onDragover:g,onDragleave:_,processFiles:y,getDndNode:S}=Qd({editable:n.editable,dnd:b,getFileInput:F,addFilesToQueue:q}),V=Yn(p),$=Z(()=>Object(p.modelValue)===p.modelValue?"length"in p.modelValue?Array.from(p.modelValue):[p.modelValue]:[]),R=Z(()=>Xa($.value)),K=Z(()=>$.value.map(ie=>ie.name).join(", ")),I=Z(()=>Qn($.value.reduce((ie,Oe)=>ie+Oe.size,0))),D=Z(()=>({totalSize:I.value,filesNumber:$.value.length,maxFiles:p.maxFiles})),U=Z(()=>({tabindex:-1,type:"file",title:"",accept:p.accept,capture:p.capture,name:c.value,...o,id:n.targetUid.value,disabled:n.editable.value!==!0})),z=Z(()=>"q-file q-field--auto-height"+(b.value===!0?" q-file--dnd":"")),M=Z(()=>p.multiple===!0&&p.append===!0);function h(ie){const Oe=$.value.slice();Oe.splice(ie,1),P(Oe)}function j(ie){const Oe=$.value.indexOf(ie);Oe!==-1&&h(Oe)}function P(ie){u("update:modelValue",p.multiple===!0?ie:ie[0])}function x(ie){ie.keyCode===13&&Xn(ie)}function A(ie){(ie.keyCode===13||ie.keyCode===32)&&m(ie)}function F(){return f.value}function q(ie,Oe){const Xe=y(ie,Oe,$.value,M.value),ce=F();ce!=null&&(ce.value=""),Xe!==void 0&&((p.multiple===!0?p.modelValue&&Xe.every(L=>$.value.includes(L)):p.modelValue===Xe[0])||P(M.value===!0?$.value.concat(Xe):Xe))}function N(){return[Ce("input",{class:[p.inputClass,"q-file__filler"],style:p.inputStyle})]}function le(){if(s.file!==void 0)return $.value.length===0?N():$.value.map((Oe,Xe)=>s.file({index:Xe,file:Oe,ref:this}));if(s.selected!==void 0)return $.value.length===0?N():s.selected({files:$.value,ref:this});if(p.useChips===!0)return $.value.length===0?N():$.value.map((Oe,Xe)=>Ce(la,{key:"file-"+Xe,removable:n.editable.value,dense:!0,textColor:p.color,tabindex:p.tabindex,onRemove:()=>{h(Xe)}},()=>Ce("span",{class:"ellipsis",textContent:Oe.name})));const ie=p.displayValue!==void 0?p.displayValue:K.value;return ie.length!==0?[Ce("div",{class:p.inputClass,style:p.inputStyle,textContent:ie})]:N()}function me(){const ie={ref:f,...U.value,...V.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:q};return p.multiple===!0&&(ie.multiple=!0),Ce("input",ie)}return Object.assign(n,{fieldClass:z,emitValue:P,hasValue:R,inputRef:f,innerValue:$,floatingLabel:Z(()=>R.value===!0||Xa(p.displayValue)),computedCounter:Z(()=>{if(p.counterLabel!==void 0)return p.counterLabel(D.value);const ie=p.maxFiles;return`${$.value.length}${ie!==void 0?" / "+ie:""} (${I.value})`}),getControlChild:()=>S("file"),getControl:()=>{const ie={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:p.tabindex};return n.editable.value===!0&&Object.assign(ie,{onDragover:g,onDragleave:_,onKeydown:x,onKeyup:A}),Ce("div",ie,[me()].concat(le()))}}),Object.assign(i,{removeAtIndex:h,removeFile:j,getNativeElement:()=>f.value}),Jn(i,"nativeEl",()=>f.value),Gn(n)}}),Gt=At({name:"QBanner",props:{...Ea,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(p,{slots:s}){const{proxy:{$q:u}}=Ot(),o=Aa(p,u),i=Z(()=>"q-banner row items-center"+(p.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(p.rounded===!0?" rounded-borders":"")),n=Z(()=>`q-banner__actions row items-center justify-end col-${p.inlineActions===!0?"auto":"all"}`);return()=>{const f=[Ce("div",{class:"q-banner__avatar col-auto row items-center self-start"},zt(s.avatar)),Ce("div",{class:"q-banner__content col text-body2"},zt(s.default))],b=zt(s.action);return b!==void 0&&f.push(Ce("div",{class:n.value},b)),Ce("div",{class:i.value+(p.inlineActions===!1&&b!==void 0?" q-banner--top-padding":""),role:"alert"},f)}}}),Jd={class:"q-gutter-sm"},Gd={class:"col col-md-6 q-pa-xs"},fl="Import Pelanggan",Xd={__name:"Import",setup(p){const s=Qe({csv_file:null}),u=()=>{s.post(route("admin.customer.import"),{onSuccess:()=>{s.reset()},onError:()=>{Ye()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=G("i-head"),f=G("authenticated-layout");return d(),w(Y,null,[e(n,{title:fl}),e(f,{"show-drawer-button":!0},{title:a(()=>[v(r(fl))]),"left-button":a(()=>[t("div",Jd,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$goBack())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Gd,[e(Je,{class:"row",onSubmit:X(u,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e($o,{modelValue:l(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>l(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:i[2]||(i[2]=b=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),O(Gt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),O(Gt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Zd=Object.freeze(Object.defineProperty({__proto__:null,default:Xd},Symbol.toStringTag,{value:"Module"})),eu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},tu={class:"q-pa-xs"},au={class:"full-width row flex-center text-grey-8 q-gutter-sm"},lu={key:0},ou={key:2},nu={key:3},su={class:"flex justify-end"},gl="Pelanggan",ru={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=je({search:"",status:"active",...Le()}),m=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"code",label:s.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{S()});const y=D=>st({message:`Hapus Pelanggan ${D.name}?`,url:route("admin.customer.delete",D.id),fetchItemsCallback:S,loading:i}),S=(D=null)=>{Ke({pagination:m,filter:c,props:D,rows:o,url:route("admin.customer.data"),loading:i,tableRef:n})},V=()=>S(),$=D=>ee.get(route("admin.customer.detail",{id:D.id})),{protectClick:R}=Bt(),K=R($),I=Z(()=>s.screen.gt.sm?g:g.filter(D=>D.name==="code"||D.name==="action"));return(D,U)=>{const z=G("i-head"),M=G("authenticated-layout");return d(),w(Y,null,[e(z,{title:gl}),e(M,null,ze({title:a(()=>[v(r(gl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=h=>u.value=!u.value)},null,8,["icon"]),D.$can("admin.customer.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:U[1]||(U[1]=h=>l(ee).get(D.route("admin.customer.add")))})):k("",!0),D.$can("admin.customer.import")?(d(),O(E,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:U[3]||(U[3]=X(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[D.$can("admin.customer.import")?ae((d(),O(oe,{key:0,clickable:"",onClick:U[2]||(U[2]=X(h=>l(ee).get(D.route("admin.customer.import")),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"csv"})]),_:1}),e(B,null,{default:a(()=>U[8]||(U[8]=[v("Import")])),_:1})]),_:1})),[[ne],[fe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",tu,[e(Ee,{class:"full-height-table",style:He({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":U[7]||(U[7]=h=>m.value=h),filter:c.search,loading:i.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:P})=>[t("div",au,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Re,{props:h,class:xe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:X(j=>l(K)(h.row,j),["stop"])},{default:a(()=>[e(Q,{key:"code",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),O(C,{key:0,name:"person"})):k("",!0),v(" "+r(h.row.code),1)]),l(s).screen.lt.md?(d(),w(Y,{key:0},[t("div",null,[l(s).screen.lt.md?(d(),O(C,{key:0,name:"person"})):k("",!0),v(" "+r(h.row.name),1)]),h.row.phone?(d(),w("div",lu,[e(C,{name:"phone"}),v(" "+r(h.row.phone),1)])):k("",!0),h.row.address?(d(),O(Se,{key:1,text:h.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),h.row.wallet_balance!=0?(d(),w("div",ou,[e(C,{name:"wallet"}),v(" Wallet: Rp. "+r(l(H)(h.row.wallet_balance)),1)])):k("",!0),h.row.balance!=0?(d(),w("div",nu,[e(C,{name:"wallet"}),v(" Utang: Rp. "+r(l(H)(h.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"name",props:h},{default:a(()=>[v(r(h.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"wallet_balance",props:h},{default:a(()=>[v(r(l(H)(h.row.wallet_balance)),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:h},{default:a(()=>[v(r(l(H)(h.row.balance)),1)]),_:2},1032,["props"]),e(Q,{key:"phone",props:h},{default:a(()=>[v(r(h.row.phone),1)]),_:2},1032,["props"]),e(Q,{key:"address",props:h},{default:a(()=>[e(Se,{text:h.row.address},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:h},{default:a(()=>[t("div",su,[D.$can("admin.customer.add")||D.$can("admin.customer.edit")||D.$can("admin.customer.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:U[6]||(U[6]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[D.$can("admin.customer.add")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(j=>l(ee).get(D.route("admin.customer.duplicate",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>U[9]||(U[9]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),D.$can("admin.customer.edit")?ae((d(),O(oe,{key:1,clickable:"",onClick:X(j=>l(ee).get(D.route("admin.customer.edit",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>U[10]||(U[10]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),D.$can("admin.customer.delete")?ae((d(),O(oe,{key:2,onClick:X(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>U[11]||(U[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",eu,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[U[4]||(U[4]=h=>c.status=h),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":U[5]||(U[5]=h=>c.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},iu=Object.freeze(Object.defineProperty({__proto__:null,default:ru},Symbol.toStringTag,{value:"Module"})),du={class:"q-pb-sm"},uu={class:"row q-col-gutter-sm"},mu={class:"row items-center no-wrap"},cu={class:"q-ml-md"},pu={class:"text-subtitle2 text-grey-8"},fu={class:"text-h6 text-weight-bold"},gu={class:"q-my-sm"},bu={class:"row q-col-gutter-sm"},vu={class:"row items-center no-wrap"},_u={class:"q-ml-md"},yu={class:"text-subtitle2 text-grey-8"},ku={class:"text-h6 text-weight-bold"},xo={__name:"ActualSummaryCard",setup(p){const s=ge(),u=Z(()=>[{label:"Pelanggan Aktif",value:s.props.data.total_active_customer,icon:"person_add",color:"blue-7",bgColor:"#e3f2fd"},{label:"Saldo Wallet / Deposit",value:H(s.props.data.total_customer_wallet_balance),icon:"savings",color:"green-7",bgColor:"#e8f5e9"},{label:"Saldo Utang / Piutang",value:H(s.props.data.total_customer_balance),icon:"account_balance",color:"red-8",bgColor:"#ffebee"},{label:"Supplier Aktif",value:s.props.data.total_active_supplier,icon:"local_shipping",color:"indigo-7",bgColor:"#e8eaf6"},{label:"Saldo Wallet / Deposit",value:H(s.props.data.total_supplier_wallet_balance),icon:"account_balance_wallet",color:"cyan-7",bgColor:"#e0f7fa"},{label:"Saldo Utang / Piutang",value:H(s.props.data.total_supplier_balance),icon:"credit_card",color:"red-8",bgColor:"#ffebee"}]),o=Z(()=>[{label:"Total Transaksi",value:H(s.props.data.total_sales_count),icon:"shopping_basket",color:"purple-8",bgColor:"#f3e5f5"},{label:"Total Penjualan",value:H(s.props.data.total_sales),icon:"trending_up",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Laba",value:H(s.props.data.total_sales_profit),icon:"attach_money",color:"teal-6",bgColor:"#e0f2f1"}]);return(i,n)=>(d(),w("div",du,[t("div",null,[t("div",uu,[(d(!0),w(Y,null,De(u.value,(f,b)=>(d(),w("div",{key:b,class:"col-12 col-md-4"},[e(pe,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",mu,[e(ta,{icon:f.icon,color:f.color,"text-color":f.bgColor},null,8,["icon","color","text-color"]),t("div",cu,[t("div",pu,r(f.label),1),t("div",fu,r(f.value),1)])])]),_:2},1024)]))),128))])]),t("div",gu,[t("div",bu,[(d(!0),w(Y,null,De(o.value,(f,b)=>(d(),w("div",{key:b,class:"col-12 col-md-4"},[e(pe,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",vu,[e(ta,{icon:f.icon,color:f.color,"text-color":f.bgColor},null,8,["icon","color","text-color"]),t("div",_u,[t("div",yu,r(f.label),1),t("div",ku,r(f.value),1)])])]),_:2},1024)]))),128))])])]))}},wu=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),hu={class:"row q-col-gutter-sm q-pb-sm"},$u={class:"col-md-6 col-12"},xu={class:"col-md-6 col-12"},Su={__name:"ChartCard",setup(p){Zn([es,ts,as,ls,os,ns,ss]);const s=ge(),u=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=Z(()=>({title:{left:"center"},tooltip:{trigger:"axis",formatter:function(n){let f=n[0].name+"<br/>";return n.forEach(function(b){f+=b.marker+" "+b.seriesName+": "+H(b.value)+"<br/>"}),f}},xAxis:{type:"category",data:s.props.data.chart_data_1.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:n=>H(n),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:s.props.data.chart_data_1.data,itemStyle:{borderRadius:[5,5,0,0],color:u[0]}}]})),i=Z(()=>({title:{left:"center"},tooltip:{show:!1},legend:{show:!1},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:s.props.data.revenue_by_category,label:{show:!0,position:"outside",formatter:n=>{const f=H(n.value);return`${n.percent}% - ${n.name}
Rp. ${f}
`},fontSize:12,fontWeight:"bold",color:"#616161"},labelLine:{show:!0,length:10,length2:10},itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:n=>u[n.dataIndex%u.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(n,f)=>(d(),w("div",hu,[t("div",$u,[e(pe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[f[0]||(f[0]=t("div",{class:"text-subtitle1 q-pb-sm"},"Penjualan",-1)),e(l(Za),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",xu,[e(pe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[f[1]||(f[1]=t("div",{class:"text-subtitle1 q-pb-sm"},"Distribusi Omzet",-1)),e(l(Za),{class:"chart",option:i.value,autoresize:""},null,8,["option"])]),_:1})])]))}},So=_t(Su,[["__scopeId","data-v-aac9117e"]]),Vu=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),qu={class:"row q-col-gutter-sm q-pb-sm"},Cu={class:"col-md-6 col-12"},Tu={key:1,class:"text-grey text-italic"},Pu={class:"col-md-6 col-12"},Ru={key:1,class:"text-grey text-italic"},Vo={__name:"TopCard",setup(p){const s=ge();return(u,o)=>{const i=G("my-link");return d(),w("div",qu,[t("div",Cu,[e(pe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[o[0]||(o[0]=t("div",{class:"text-subtitle1 q-mb-sm"},"Top 5 Transaksi Pelanggan",-1)),l(s).props.data.top_customers_revenue.length>0?(d(),O(Ue,{key:0},{default:a(()=>[(d(!0),w(Y,null,De(l(s).props.data.top_customers_revenue,(n,f)=>(d(),O(oe,{key:f},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(ta,{color:"purple-"+(9-f),"text-color":"white",size:"sm"},{default:a(()=>[v(r(f+1),1)]),_:2},1032,["color"])]),_:2},1024),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>[e(i,{href:u.route("admin.customer.detail",{id:n.customer_id}),class:"text-purple"},{default:a(()=>[v(r(n.customer_name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:a(()=>[e(be,{class:"text-purple"},{default:a(()=>[v(r(l(H)(n.total_revenue)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),w("div",Tu,"Data tidak tersedia"))]),_:1})]),t("div",Pu,[e(pe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[o[1]||(o[1]=t("div",{class:"text-subtitle1 q-mb-sm"},"Top 5 Saldo Wallet Pelanggan",-1)),l(s).props.data.top_customers_wallet.length>0?(d(),O(Ue,{key:0},{default:a(()=>[(d(!0),w(Y,null,De(l(s).props.data.top_customers_wallet,(n,f)=>(d(),O(oe,{key:f},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(ta,{color:"orange-"+(9-f),"text-color":"white",size:"sm"},{default:a(()=>[v(r(f+1),1)]),_:2},1032,["color"])]),_:2},1024),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>[e(i,{href:u.route("admin.customer.detail",{id:n.id}),class:"text-orange-9"},{default:a(()=>[v(r(n.name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:a(()=>[e(be,{class:"text-orange-9"},{default:a(()=>[v(r(l(H)(n.wallet_balance)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),w("div",Ru,"Data tidak tersedia"))]),_:1})])])}}},Ou=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Iu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Uu={class:"q-pa-xs"},Du={class:"q-pa-none"},bl="Dashboard",ju={__name:"Index",setup(p){ge();const s=T({top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}]}),u=T(!0),o=T(Le().period??"this_month"),i=T([{value:"today",label:"Hari Ini"},{value:"yesterday",label:"Kemarin"},{value:"this_week",label:"Minggu Ini"},{value:"last_week",label:"Minggu Lalu"},{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"Bulan Lalu"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"},{value:"this_year",label:"Tahun Ini"},{value:"prev_year",label:"Tahun Lalu"}]),n=()=>{ee.visit(route("admin.dashboard",{period:o.value}))},f=Z(()=>!(o.value=="today"||o.value=="yesterday"));return(b,c)=>{const m=G("i-head"),g=G("authenticated-layout");return d(),w(Y,null,[e(m,{title:bl}),e(g,null,ze({title:a(()=>[v(r(bl))]),"right-button":a(()=>[e(E,{class:"q-ml-sm",icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:c[0]||(c[0]=_=>u.value=!u.value)},null,8,["icon"])]),default:a(()=>[t("div",Uu,[t("div",Du,[e(xo,{dashboardData:s.value},null,8,["dashboardData"])]),f.value?(d(),w(Y,{key:0},[e(So,{dashboardData:s.value},null,8,["dashboardData"]),e(Vo,{dashboardData:s.value},null,8,["dashboardData"])],64)):k("",!0)])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar"},{default:a(()=>[t("div",Iu,[e(de,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:o.value,"onUpdate:modelValue":[c[1]||(c[1]=_=>o.value=_),n],options:i.value,label:"Periode",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},Eu=Object.freeze(Object.defineProperty({__proto__:null,default:ju},Symbol.toStringTag,{value:"Module"})),Au={class:"row"},Bu={class:"row q-col-gutter-sm"},Mu={class:"col-sm-6 col-xs-12"},Nu={class:"col-sm-6 col-xs-12"},zu={class:"col-md-3 col-sm-6 col-xs-12"},Fu={class:"col-md-3 col-sm-6 col-xs-12"},Lu={class:"col-md-3 col-sm-6 col-xs-12"},Ku={class:"col-md-3 col-sm-6 col-xs-12"};const Hu={__name:"SummaryCard",setup(p){const s=ge(),u=(o,i)=>{const f={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...i};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(f)),ee.visit(o,{data:f})};return(o,i)=>(d(),w("div",Au,[e(pe,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:a(()=>[e(te,{class:"q-pa-none"},{default:a(()=>[t("div",Bu,[t("div",Mu,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[0]||(i[0]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(B,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[v(r(l(s).props.data.active_customer_count),1)]),_:1}),e(be,null,{default:a(()=>i[5]||(i[5]=[v("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",Nu,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[1]||(i[1]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(B,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[v(r(o.$page.props.data.active_user_count),1)]),_:1}),e(be,null,{default:a(()=>i[6]||(i[6]=[v("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",zu,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(B,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(H)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(be,null,{default:a(()=>i[7]||(i[7]=[v("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",Fu,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(B,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(H)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(be,null,{default:a(()=>i[8]||(i[8]=[v("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",Lu,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(B,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(H)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(be,null,{default:a(()=>i[9]||(i[9]=[v("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",Ku,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(B,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(B,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(H)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(be,null,{default:a(()=>i[10]||(i[10]=[v("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},Wu=Object.freeze(Object.defineProperty({__proto__:null,default:Hu},Symbol.toStringTag,{value:"Module"})),Yu={class:"detail"},qo={__name:"MainInfoTab",setup(p){const s=ge();return(u,o)=>(d(),w("table",Yu,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.FINANCE_ACCOUNT_TYPES[l(s).props.data.type]),1)]),l(s).props.data.type=="bank"?(d(),w(Y,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(H)(l(s).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},Qu=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Ju={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Gu={class:"flex q-gutter-sm"},Xu={key:0},Co={__name:"HistoryTab",setup(p){const s=ge(),u=$e(),o=T(null),i=T([]),n=T(!0),f=je({...Le()}),b=at(null,117),c=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),m=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],g=Z(()=>u.screen.gt.sm?m:m.filter(y=>y.name==="code"));he(()=>{_()});const _=(y=null)=>Ke({pagination:c,filter:f,props:y,rows:i,url:route("admin.finance-transaction.data",{filter:{account_id:s.props.data.id}}),loading:n,tableRef:o});return(y,S)=>(d(),O(Ee,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:He({height:l(b)}),color:"primary",class:"full-height-table","row-key":"id",pagination:c.value,"onUpdate:pagination":S[0]||(S[0]=V=>c.value=V),filter:f.search,loading:n.value,columns:g.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({message:V,filter:$})=>[t("div",Ju,[t("span",null,r(V)+" "+r($?" with term "+$:""),1)])]),body:a(V=>[e(Re,{props:V},{default:a(()=>[e(Q,{key:"code",props:V},{default:a(()=>[t("div",Gu,[t("div",null,[l(u).screen.lt.md?(d(),O(C,{key:0,name:"tag",class:"inline-icon"})):k("",!0),v(" "+r(V.row.code),1)])]),l(u).screen.lt.md?(d(),w(Y,{key:0},[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(V.row.datetime)),1)]),V.row.creator?(d(),w("div",Xu,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(V.row.creator.username),1)])):k("",!0),t("div",{class:xe([V.row.amount>0?"text-green":"text-red","text-bold"])},[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(ra)(V.row.amount))+"Rp. "+r(l(H)(Math.abs(V.row.amount))),1)],2),t("div",null,[e(it,{color:V.row.amount>0?"green":"red"},{default:a(()=>[v(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[V.row.type]),1)]),_:2},1032,["color"])]),e(Se,{text:V.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"datetime",props:V},{default:a(()=>[v(r(l(ve)(V.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"type",props:V},{default:a(()=>[e(it,{color:V.row.amount>0?"green":"red"},{default:a(()=>[v(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[V.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Q,{key:"amount",props:V,class:xe(V.row.amount>0?"text-green":"text-red")},{default:a(()=>[v(r(l(ra)(V.row.amount)+l(H)(Math.abs(V.row.amount))),1)]),_:2},1032,["props","class"]),e(Q,{key:"notes",props:V},{default:a(()=>[e(Se,{text:V.row.notes,icon:y.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},Zu=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),em={class:"q-gutter-sm"},tm={class:"q-gutter-sm"},am={class:"col q-pa-xs"},lm={class:"row"},vl="Rincian Akun",om={__name:"Detail",setup(p){const s=ge(),u=T("main");return(o,i)=>{const n=G("i-head"),f=G("authenticated-layout");return d(),w(Y,null,[e(n,{title:vl}),e(f,null,{title:a(()=>[v(r(vl))]),"left-button":a(()=>[t("div",em,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":a(()=>[t("div",tm,[o.$can("admin.finance-account.edit")?(d(),O(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>l(ee).get(o.route("admin.finance-account.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",am,[t("div",lm,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Tt,{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=b=>u.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Info Akun"}),e(dt,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(Pt,{modelValue:u.value,"onUpdate:modelValue":i[3]||(i[3]=b=>u.value=b),animated:""},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(qo)]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Co)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},nm=Object.freeze(Object.defineProperty({__proto__:null,default:om},Symbol.toStringTag,{value:"Module"})),sm={style:{"margin-left":"-10px"}},Rt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(p){return(s,u)=>(d(),w("div",sm,[e(ua,{class:"full-width q-pl-none","model-value":p.modelValue,"onUpdate:modelValue":u[0]||(u[0]=o=>s.$emit("update:modelValue",o)),disable:p.disable,label:p.label},null,8,["model-value","disable","label"])]))}},rm={class:"q-gutter-sm"},im={class:"col col-md-6 q-pa-xs"},dm={__name:"Editor",setup(p){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Qe({id:s.props.data.id,name:s.props.data.name,type:s.props.data.type,bank:s.props.data.bank,number:s.props.data.number,holder:s.props.data.holder,balance:parseFloat(s.props.data.balance),active:!!s.props.data.active,has_wallet_access:!!s.props.data.has_wallet_access,show_in_pos_payment:!!s.props.data.show_in_pos_payment,show_in_purchasing_payment:!!s.props.data.show_in_purchasing_payment,notes:s.props.data.notes}),i=ot(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),n=()=>rt({form:o,url:route("admin.finance-account.save")}),f=b=>{b==="cashier_cash"&&(o.show_in_pos_payment=!0)};return he(()=>{f(o.type)}),Ne(()=>o.type,b=>{f(b)}),(b,c)=>{const m=G("i-head"),g=G("authenticated-layout");return d(),w(Y,null,[e(m,{title:u}),e(g,null,{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",rm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=_=>b.$inertia.get(b.route("admin.finance-account.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",im,[e(Je,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=_=>l(o).id=_)},null,512),[[yt,l(o).id]]),e(se,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":c[2]||(c[2]=_=>l(o).name=_),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(de,{modelValue:l(o).type,"onUpdate:modelValue":c[3]||(c[3]=_=>l(o).type=_),label:"Jenis Akun",options:l(i),"map-options":"","emit-value":"",error:!!l(o).errors.type,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),l(o).type=="bank"?(d(),w(Y,{key:0},[e(se,{modelValue:l(o).bank,"onUpdate:modelValue":c[4]||(c[4]=_=>l(o).bank=_),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!l(o).errors.bank,disable:l(o).processing,"error-message":l(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:l(o).number,"onUpdate:modelValue":c[5]||(c[5]=_=>l(o).number=_),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!l(o).errors.number,disable:l(o).processing,"error-message":l(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:l(o).holder,"onUpdate:modelValue":c[6]||(c[6]=_=>l(o).holder=_),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!l(o).errors.holder,disable:l(o).processing,"error-message":l(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Me,{modelValue:l(o).balance,"onUpdate:modelValue":c[7]||(c[7]=_=>l(o).balance=_),label:"Saldo",lazyRules:"",disable:l(o).processing,"allow-negative":!0,error:!!l(o).errors.balance,errorMessage:l(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(se,{modelValue:l(o).notes,"onUpdate:modelValue":c[8]||(c[8]=_=>l(o).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Rt,{modelValue:l(o).active,"onUpdate:modelValue":c[9]||(c[9]=_=>l(o).active=_),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),c[14]||(c[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(Rt,{modelValue:l(o).show_in_pos_payment,"onUpdate:modelValue":c[10]||(c[10]=_=>l(o).show_in_pos_payment=_),disable:l(o).processing||l(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(Rt,{modelValue:l(o).show_in_purchasing_payment,"onUpdate:modelValue":c[11]||(c[11]=_=>l(o).show_in_purchasing_payment=_),disable:l(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(Rt,{modelValue:l(o).has_wallet_access,"onUpdate:modelValue":c[12]||(c[12]=_=>l(o).has_wallet_access=_),disable:l(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:c[13]||(c[13]=_=>l(ee).get(b.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},um=Object.freeze(Object.defineProperty({__proto__:null,default:dm},Symbol.toStringTag,{value:"Module"})),mm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},cm={class:"q-pa-xs"},pm={class:"q-my-sm text-subtitle"},fm={class:"text-bold text-grey-8"},gm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},bm={class:"text-bold text-grey-9"},vm={class:"text-grey-9"},_m={key:0},ym={key:1},km={key:0},wm={class:"flex justify-end"},_l="Akun Kas",hm={__name:"Index",setup(p){const s=ge(),u=$e(),o=T(!1),i=T([]),n=T(null),f=T(null),b=at(f,117),c=T(!0),m=je({search:"",status:"active",type:"all",...Le()}),g=s.props.totalBalance,_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),y=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],S=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],V=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];he(()=>{R()});const $=M=>st({message:`Hapus Akun ${M.name}?`,url:route("admin.finance-account.delete",M.id),fetchItemsCallback:R,loading:c}),R=(M=null)=>{Ke({pagination:_,filter:m,props:M,rows:i,url:route("admin.finance-account.data"),loading:c,tableRef:n})},K=()=>R(),I=M=>ee.get(route("admin.finance-account.detail",{id:M.id})),{protectClick:D}=Bt(),U=D(I),z=Z(()=>u.screen.gt.sm?y:y.filter(M=>M.name==="name"||M.name==="action"));return(M,h)=>{const j=G("i-head"),P=G("authenticated-layout");return d(),w(Y,null,[e(j,{title:_l}),e(P,null,ze({title:a(()=>[v(r(_l))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=x=>o.value=!o.value)},null,8,["icon"]),M.$can("admin.finance-account.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=x=>l(ee).get(M.route("admin.finance-account.add")))})):k("",!0)]),default:a(()=>[t("div",cm,[e(pe,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:a(()=>[t("div",pm,[h[7]||(h[7]=v(" Total Saldo Akun Aktif: ")),t("span",fm,"Rp. "+r(l(H)(l(g))),1)])]),_:1}),e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",style:He({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":h[6]||(h[6]=x=>_.value=x),filter:m.search,loading:c.value,columns:z.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:R,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:x,message:A,filter:F})=>[t("div",gm,[t("span",null,r(A)+" "+r(F?" with term "+F:""),1)])]),body:a(x=>[e(Re,{props:x,class:xe([x.row.active?"":"bg-red-1","cursor-pointer"]),onClick:X(A=>l(U)(x.row,A),["stop"])},{default:a(()=>[e(Q,{key:"name",props:x,class:"wrap-column"},{default:a(()=>[t("div",bm,r(x.row.name),1),t("div",vm,[x.row.type=="bank"?(d(),w("div",_m,[e(C,{name:"wallet",class:"inline-icon"}),v(" Rekening "+r(x.row.bank??"-")+" "+r(x.row.number??"-")+" a.n. "+r(x.row.holder??"-"),1)])):k("",!0),x.row.notes?(d(),w("div",ym,[e(C,{name:"notes"}),v(" "+r(x.row.notes),1)])):k("",!0)]),l(u).screen.lt.md?(d(),w("div",km,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(H)(x.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"type",props:x},{default:a(()=>[v(r(M.$CONSTANTS.FINANCE_ACCOUNT_TYPES[x.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:x},{default:a(()=>[v(r(l(H)(x.row.balance)),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:x},{default:a(()=>[t("div",wm,[M.$can("admin.finance-account.add")||M.$can("admin.finance-account.edit")||M.$can("admin.finance-account.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[5]||(h[5]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[M.$can("admin.finance-account.add")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(A=>l(ee).get(M.route("admin.finance-account.duplicate",x.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>h[8]||(h[8]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),M.$can("admin.finance-account.edit")?ae((d(),O(oe,{key:1,clickable:"",onClick:X(A=>l(ee).get(M.route("admin.finance-account.edit",x.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>h[9]||(h[9]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),M.$can("admin.finance-account.delete")?ae((d(),O(oe,{key:2,onClick:X(A=>$(x.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>h[10]||(h[10]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",mm,[e(de,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.type,"onUpdate:modelValue":[h[2]||(h[2]=x=>m.type=x),K],options:V,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[h[3]||(h[3]=x=>m.status=x),K],options:S,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":h[4]||(h[4]=x=>m.search=x),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},$m=Object.freeze(Object.defineProperty({__proto__:null,default:hm},Symbol.toStringTag,{value:"Module"})),xm={class:"q-gutter-sm"},Sm={class:"col col-md-6 q-pa-xs"},Vm={class:"row"},qm={class:"detail"},Cm={key:0},Tm={key:1},Pm={key:2},Rm={key:3},Om={colspan:"3",class:"bg-white"},yl="Rincian Transaksi",Im={__name:"Detail",setup(p){const s=ge();return(u,o)=>{const i=G("i-head"),n=G("i-link"),f=G("authenticated-layout");return d(),w(Y,null,[e(i,{title:yl}),e(f,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",xm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.finance-transaction.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},r(yl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Sm,[t("div",Vm,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",qm,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),l(s).props.data.account?(d(),w("tr",Cm,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[e(n,{href:u.route("admin.finance-account.detail",l(s).props.data.account.id)},{default:a(()=>[v(r(l(s).props.data.account.name),1)]),_:1},8,["href"]),l(s).props.data.account.type==="bank"?(d(),w(Y,{key:0},[v(" Rek "+r(l(s).props.data.account.bank)+" an "+r(l(s).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),v(" "+r(l(s).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.type?(d(),w("tr",Tm,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.FINANCE_TRANSACTION_TYPES[l(s).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(ia)(l(s).props.data.amount)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",Pm,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",Rm,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(Y,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Om,[e(ma,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Um=Object.freeze(Object.defineProperty({__proto__:null,default:Im},Symbol.toStringTag,{value:"Module"})),Dm={class:"q-gutter-sm"},jm={class:"col col-md-6 q-pa-xs"},Em={__name:"Editor",setup(p){var b;const s=ge(),u=(s.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=s.props.accounts.map(c=>({label:c.name,value:c.id})),i=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],n=Qe({id:s.props.data.id,account_id:s.props.data.account_id,to_account_id:s.props.data.to_account_id??null,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((b=s.props.data)==null?void 0:b.image_path)??"",image:null}),f=()=>{ca(n,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:n,url:route("admin.finance-transaction.save")})};return(c,m)=>{const g=G("i-head"),_=G("authenticated-layout");return d(),w(Y,null,[e(g,{title:u}),e(_,null,{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",Dm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>c.$inertia.get(c.route("admin.finance-transaction.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",jm,[e(Je,{class:"row",onSubmit:X(f,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[1]||(m[1]=y=>l(n).id=y)},null,512),[[yt,l(n).id]]),e(Ht,{modelValue:l(n).datetime,"onUpdate:modelValue":m[2]||(m[2]=y=>l(n).datetime=y),label:"Waktu",error:!!l(n).errors.datetime,disable:l(n).processing,errorMessage:l(n).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":m[3]||(m[3]=y=>l(n).type=y),label:"Jenis Transaksi",options:i,"map-options":"","emit-value":"",error:!!l(n).errors.type,disable:l(n).processing,errorMessage:l(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(de,{class:"custom-select",modelValue:l(n).account_id,"onUpdate:modelValue":m[4]||(m[4]=y=>l(n).account_id=y),label:l(n).type=="transfer"?"Akun Asal":"Akun",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.account_id,error:!!l(n).errors.account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),l(n).type=="transfer"?(d(),O(de,{key:0,class:"custom-select",modelValue:l(n).to_account_id,"onUpdate:modelValue":m[5]||(m[5]=y=>l(n).to_account_id=y),label:"Akun Tujuan",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.to_account_id,error:!!l(n).errors.to_account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Me,{modelValue:l(n).amount,"onUpdate:modelValue":m[6]||(m[6]=y=>l(n).amount=y),label:"Jumlah",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.amount,errorMessage:l(n).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(se,{modelValue:l(n).notes,"onUpdate:modelValue":m[7]||(m[7]=y=>l(n).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Ba,{modelValue:l(n).image,"onUpdate:modelValue":m[8]||(m[8]=y=>l(n).image=y),"initial-image-path":l(n).image_path,disabled:l(n).processing,error:!!l(n).errors.image||!!l(n).errors.image_path,"error-message":l(n).errors.image||l(n).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(n).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(n).processing,onClick:m[9]||(m[9]=y=>l(ee).get(c.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Am=Object.freeze(Object.defineProperty({__proto__:null,default:Em},Symbol.toStringTag,{value:"Module"})),Bm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Mm={class:"q-pa-xs"},Nm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zm={class:"text-grey-8"},Fm={class:"text-bold text-grey-8"},Lm={class:"flex justify-end no-wrap"},kl="Transaksi Kas",Km={__name:"Index",setup(p){const s=ge(),u=$e(),o=T(!1),i=T([]),n=T(!0),f=T(null),b=T(null),c=at(b),m=Lt(),g=Kt(),_=[{label:"Semua",value:"all"},...s.props.accounts.map(P=>({label:P.name,value:P.id}))],y=[{label:"Semua Tahun",value:"all"},{label:`${m}`,value:m},...It(m-2,m-1).reverse()],S=[{value:"all",label:"Semua Bulan"},...Ut()],V=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],$=je({search:"",type:"all",account_id:"all",year:m,month:g,...Le()}),R=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),K=[{name:"id",label:u.screen.lt.md?"Item":"Kode",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{D()});const I=P=>st({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${P.code}?`,url:route("admin.finance-transaction.delete",P.id),fetchItemsCallback:D,loading:n}),D=(P=null)=>{Ke({pagination:R,filter:$,props:P,rows:i,url:route("admin.finance-transaction.data"),loading:n,tableRef:f})},U=()=>{D()},z=Z(()=>u.screen.gt.sm?K:K.filter(P=>P.name==="id"||P.name==="action"));Ne(()=>$.year,P=>{P===null&&($.month=null)});const M=T(null),h=T(!1),j=P=>{M.value=P,h.value=!0};return(P,x)=>{const A=G("i-head"),F=G("authenticated-layout");return d(),w(Y,null,[e(A,{title:kl}),e(F,null,ze({title:a(()=>[v(r(kl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=q=>o.value=!o.value)},null,8,["icon"]),P.$can("admin.finance-transaction.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=q=>l(ee).get(P.route("admin.finance-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",Mm,[e(Ee,{ref_key:"tableRef",ref:f,style:He({height:l(c)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:R.value,"onUpdate:pagination":x[8]||(x[8]=q=>R.value=q),filter:$.search,loading:n.value,columns:z.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:D,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:N,filter:le})=>[t("div",Nm,[t("span",null,r(N)+" "+r(le?" with term "+le:""),1)])]),body:a(q=>[e(Re,{props:q,class:"cursor-pointer",onClick:X(N=>l(ee).get(P.route("admin.finance-transaction.detail",{id:q.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:q},{default:a(()=>[t("div",null,[l(u).screen.lt.md?(d(),O(C,{key:0,class:"inline-icon",name:"tag"})):k("",!0),v(" "+r(q.row.code),1)]),l(u).screen.lt.md?(d(),w(Y,{key:0},[t("div",zm,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(q.row.datetime)),1)]),t("div",Fm,[e(C,{name:"wallet",class:"inline-icon"}),v(" "+r(q.row.account.name),1)]),t("div",{class:xe(["text-bold",q.row.amount<0?"text-red":"text-green"])},[e(C,{name:"money",class:"inline-icon"}),v(" "+r(l(ra)(q.row.amount)+"Rp."+l(H)(Math.abs(q.row.amount))),1)],2),q.row.notes?(d(),O(Se,{key:0,icon:"notes",text:q.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(it,{color:q.row.amount>0?"green":"red"},{default:a(()=>[v(r(q.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"datetime",props:q,class:"wrap-column"},{default:a(()=>[v(r(l(ve)(q.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"account",props:q},{default:a(()=>{var N;return[v(r((N=q.row.account)==null?void 0:N.name),1)]}),_:2},1032,["props"]),e(Q,{key:"type",props:q},{default:a(()=>[v(r(P.$CONSTANTS.FINANCE_TRANSACTION_TYPES[q.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"amount",props:q,style:{"text-align":"right"}},{default:a(()=>[v(r(l($t)(q.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:q,class:"wrap-column"},{default:a(()=>[v(r(q.row.notes),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:q},{default:a(()=>[t("div",Lm,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:q.row.image_path===null||q.row.image_path==="",onClick:X(N=>j(q.row.image_path),["stop"])},{default:a(()=>[q.row.image_path!=null?(d(),O(Dt,{key:0},{default:a(()=>x[10]||(x[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.finance-transaction.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[7]||(x[7]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[P.$can("admin.finance-transaction.delete")?ae((d(),O(oe,{key:0,onClick:X(N=>I(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>x[11]||(x[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ya,{modelValue:h.value,"onUpdate:modelValue":x[9]||(x[9]=q=>h.value=q),imageUrl:`/${M.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:a(()=>[t("div",Bm,[e(de,{modelValue:$.year,"onUpdate:modelValue":[x[2]||(x[2]=q=>$.year=q),U],options:y,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!="all"?(d(),O(de,{key:0,modelValue:$.month,"onUpdate:modelValue":[x[3]||(x[3]=q=>$.month=q),U],options:S,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:$.type,"onUpdate:modelValue":[x[4]||(x[4]=q=>$.type=q),U],options:V,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:$.account_id,"onUpdate:modelValue":[x[5]||(x[5]=q=>$.account_id=q),U],label:"Akun",options:_,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":x[6]||(x[6]=q=>$.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Hm=Object.freeze(Object.defineProperty({__proto__:null,default:Km},Symbol.toStringTag,{value:"Module"})),Wm={class:"q-pa-sm animated-background-container"},Ym={class:"text-h6 q-mb-lg"},Qm={class:"row q-col-gutter-md q-mb-md"},Jm={class:"col-xs-12 col-md-4"},Gm={class:"col-xs-12 col-md-4"},Xm={class:"col-xs-12 col-md-4"},Zm={class:"row"},ec={class:"text-subtitle1 text-bold text-grey-9 q-mb-xs q-ml-md"},wl="Beranda",tc={__name:"Index",setup(p){const s=ge(),u={reports:[{group:"Pembelian",items:[{label:"Laporan Pembelian 1",route:"admin.report.index"},{label:"Laporan Pembelian 2",route:"admin.report.index"}]},{group:"Penjualan",items:[{label:"Laporan Penjualan 1",route:"admin.report.index"},{label:"Laporan Penjualan 2",route:"admin.report.index"}]},{group:"Keuangan",items:[{label:"Laporan Keuangan 1",route:"admin.report.index"},{label:"Laporan Keuangan 2",route:"admin.report.index"}]}]};return(o,i)=>{const n=G("i-head"),f=G("authenticated-layout");return d(),w(Y,null,[e(n,{title:wl}),e(f,null,{title:a(()=>[v(r(wl))]),"right-button":a(()=>i[9]||(i[9]=[])),default:a(()=>[t("div",Wm,[t("div",Ym,[v(" Selamat datang, "+r(l(s).props.auth.user.name)+". ",1),e(C,{name:"waving_hand",class:"waving-hand"})]),t("div",Qm,[t("div",Jm,[e(pe,{class:"full-height full-width",flat:""},{default:a(()=>[e(Ge,{class:"bg-deep-purple-2 text-grey-10"},{default:a(()=>[e(sa,null,{default:a(()=>[e(C,{name:"local_shipping",class:"q-mr-md"}),i[10]||(i[10]=v("Pembelian"))]),_:1})]),_:1}),e(Ue,null,{default:a(()=>[ae((d(),O(oe,{clickable:"",onClick:i[0]||(i[0]=b=>l(ee).get(o.route("admin.purchase-order.index")))},{default:a(()=>[e(B,null,{default:a(()=>i[11]||(i[11]=[v("Pembelian")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),e(Pe),ae((d(),O(oe,{clickable:"",onClick:i[1]||(i[1]=b=>l(ee).get(o.route("admin.supplier.index")))},{default:a(()=>[e(B,null,{default:a(()=>i[12]||(i[12]=[v("Supplier")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]])]),_:1})]),_:1})]),t("div",Gm,[e(pe,{class:"full-height full-width",flat:""},{default:a(()=>[e(Ge,{class:"bg-light-blue-2 text-grey-10"},{default:a(()=>[e(sa,null,{default:a(()=>[e(C,{name:"inventory_2",class:"q-mr-md"}),i[13]||(i[13]=v("Inventori"))]),_:1})]),_:1}),e(Ue,null,{default:a(()=>[ae((d(),O(oe,{clickable:"",onClick:i[2]||(i[2]=b=>l(ee).get(o.route("admin.product.index")))},{default:a(()=>[e(B,null,{default:a(()=>i[14]||(i[14]=[v("Produk")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),e(Pe),ae((d(),O(oe,{clickable:"",onClick:i[3]||(i[3]=b=>l(ee).get(o.route("admin.stock-adjustment.index")))},{default:a(()=>[e(B,null,{default:a(()=>i[15]||(i[15]=[v("Penyesuaian Stok")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),ae((d(),O(oe,{clickable:"",onClick:i[4]||(i[4]=b=>l(ee).get(o.route("admin.stock-movement.index")))},{default:a(()=>[e(B,null,{default:a(()=>i[16]||(i[16]=[v("Riwayat Stok")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]])]),_:1})]),_:1})]),t("div",Xm,[e(pe,{class:"full-height full-width",flat:""},{default:a(()=>[e(Ge,{class:"bg-green-3 text-grey-10"},{default:a(()=>[e(sa,null,{default:a(()=>[e(C,{name:"storefront",class:"q-mr-md"}),i[17]||(i[17]=v("Penjualan"))]),_:1})]),_:1}),e(Ue,null,{default:a(()=>[ae((d(),O(oe,{clickable:"",onClick:i[5]||(i[5]=b=>l(ee).get(o.route("admin.sales-order.index")))},{default:a(()=>[e(B,null,{default:a(()=>i[18]||(i[18]=[v("Penjualan")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),e(Pe),ae((d(),O(oe,{clickable:"",onClick:i[6]||(i[6]=b=>l(ee).get(o.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(B,null,{default:a(()=>i[19]||(i[19]=[v("Konfirmasi Topup Wallet")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),ae((d(),O(oe,{clickable:"",onClick:i[7]||(i[7]=b=>l(ee).get(o.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(B,null,{default:a(()=>i[20]||(i[20]=[v("Transaksi Wallet")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),e(Pe),ae((d(),O(oe,{clickable:"",onClick:i[8]||(i[8]=b=>l(ee).get(o.route("admin.customer.index")))},{default:a(()=>[e(B,null,{default:a(()=>i[21]||(i[21]=[v("Pelanggan")])),_:1}),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]])]),_:1})]),_:1})])]),e(pe,{class:"bg-orange-3 text-grey-10 full-width",flat:""},{default:a(()=>[e(Ge,null,{default:a(()=>[e(sa,null,{default:a(()=>[e(C,{name:"analytics",class:"q-mr-sm"}),i[22]||(i[22]=v(" Laporan"))]),_:1})]),_:1})]),_:1}),e(pe,{flat:"",class:"q-pa-md bg-grey-1 full-width"},{default:a(()=>[t("div",Zm,[(d(!0),w(Y,null,De(u.reports,b=>(d(),w("div",{key:b.group,class:"col-xs-12 col-sm-4 q-mb-md"},[t("div",ec,r(b.group),1),e(Ue,null,{default:a(()=>[(d(!0),w(Y,null,De(b.items,c=>ae((d(),O(oe,{key:c,clickable:"",onClick:m=>l(ee).get(o.route(c.route))},{default:a(()=>[e(B,null,{default:a(()=>[v(r(c.label),1)]),_:2},1024),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"])),[[ne]])),128))]),_:2},1024)]))),128))])]),_:1})])]),_:1})],64)}}},ac=_t(tc,[["__scopeId","data-v-8a5e0c68"]]),lc=Object.freeze(Object.defineProperty({__proto__:null,default:ac},Symbol.toStringTag,{value:"Module"})),oc={class:"q-gutter-sm"},nc={class:"col col-md-6 q-pa-xs"},sc={__name:"Editor",setup(p){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description}),i=()=>rt({form:o,url:route("admin.operational-cost-category.save")});return(n,f)=>{const b=G("i-head"),c=G("authenticated-layout");return d(),w(Y,null,[e(b,{title:u}),e(c,null,{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",oc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=m=>n.$goBack())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",nc,[e(Je,{class:"row",onSubmit:X(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=m=>l(o).id=m)},null,512),[[yt,l(o).id]]),e(se,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":f[2]||(f[2]=m=>l(o).name=m),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[m=>m&&m.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(o).description,"onUpdate:modelValue":f[3]||(f[3]=m=>l(o).description=m),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:f[4]||(f[4]=m=>l(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},rc=Object.freeze(Object.defineProperty({__proto__:null,default:sc},Symbol.toStringTag,{value:"Module"})),ic={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},dc={class:"q-pa-xs"},uc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},mc={key:0,class:"text-grey-8"},cc={class:"flex justify-end"},hl="Kategori Biaya Operasional",pc={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=je({search:"",...Le()}),m=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{y()});const _=V=>st({message:`Hapus Kategori Biaya ${V.name}?`,url:route("admin.operational-cost-category.delete",V.id),fetchItemsCallback:y,loading:i}),y=(V=null)=>{Ke({pagination:m,filter:c,props:V,rows:o,url:route("admin.operational-cost-category.data"),loading:i,tableRef:n})},S=Z(()=>s.screen.gt.sm?g:g.filter(V=>V.name==="name"||V.name==="action"));return(V,$)=>{const R=G("i-head"),K=G("authenticated-layout");return d(),w(Y,null,[e(R,{title:hl}),e(K,null,ze({title:a(()=>[v(r(hl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=I=>u.value=!u.value)},null,8,["icon"]),V.$can("admin.operational-cost-category.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=I=>l(ee).get(V.route("admin.operational-cost-category.add")))})):k("",!0)]),default:a(()=>[t("div",dc,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",style:He({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":$[4]||($[4]=I=>m.value=I),filter:c.search,loading:i.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:I,message:D,filter:U})=>[t("div",uc,[t("span",null,r(D)+" "+r(U?" with term "+U:""),1)])]),body:a(I=>[e(Re,{props:I},{default:a(()=>[e(Q,{key:"name",props:I,class:"wrap-column"},{default:a(()=>[v(r(I.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[I.row.description?(d(),w("div",mc,[e(C,{name:"description"}),v(" "+r(I.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"description",props:I,class:"wrap-column"},{default:a(()=>[v(r(I.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:I},{default:a(()=>[t("div",cc,[V.$can("admin.operational-cost-category.add")||V.$can("admin.operational-cost-category.edit")||V.$can("admin.operational-cost-category.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[3]||($[3]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[V.$can("admin.operational-cost-category.add")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(D=>l(ee).get(V.route("admin.operational-cost-category.duplicate",I.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>$[5]||($[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),V.$can("admin.operational-cost-category.edit")?ae((d(),O(oe,{key:1,clickable:"",onClick:X(D=>l(ee).get(V.route("admin.operational-cost-category.edit",I.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>$[6]||($[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),V.$can("admin.operational-cost-category.delete")?ae((d(),O(oe,{key:2,onClick:X(D=>_(I.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>$[7]||($[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",ic,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":$[2]||($[2]=I=>c.search=I),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fc=Object.freeze(Object.defineProperty({__proto__:null,default:pc},Symbol.toStringTag,{value:"Module"})),gc={class:"q-gutter-sm"},bc={class:"col col-md-6 q-pa-xs"},vc={class:"row"},_c={class:"detail"},yc={key:0},kc={key:1},wc={key:2},hc={key:3},$c={colspan:"3",class:"bg-white"},$l="Rincian Biaya Operasional",xc={__name:"Detail",setup(p){const s=ge();return(u,o)=>{const i=G("i-head"),n=G("i-link"),f=G("authenticated-layout");return d(),w(Y,null,[e(i,{title:$l}),e(f,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",gc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>u.$inertia.get(u.route("admin.operational-cost.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},r($l))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",bc,[t("div",vc,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[22]||(o[22]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",_c,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(da)(l(s).props.data.date)),1)]),l(s).props.data.finance_account?(d(),w("tr",yc,[o[7]||(o[7]=t("td",null,"Akun",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,[e(n,{href:u.route("admin.finance-account.detail",l(s).props.data.finance_account.id)},{default:a(()=>[v(r(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),l(s).props.data.finance_account.type==="bank"?(d(),w(Y,{key:0},[o[5]||(o[5]=t("br",null,null,-1)),v(" Rek "+r(l(s).props.data.finance_account.bank)+" an "+r(l(s).props.data.finance_account.holder)+" ",1),o[6]||(o[6]=t("br",null,null,-1)),v(" "+r(l(s).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.category?(d(),w("tr",kc,[o[9]||(o[9]=t("td",null,"Kategori",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.category.name),1)])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Deskripsi",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.description),1)]),t("tr",null,[o[13]||(o[13]=t("td",null,"Jumlah",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(H)(l(s).props.data.amount)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Catatan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",wc,[o[17]||(o[17]=t("td",null,"Dibuat",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",hc,[o[19]||(o[19]=t("td",null,"Diperbarui",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(Y,{key:4},[o[21]||(o[21]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",$c,[e(ma,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Sc=Object.freeze(Object.defineProperty({__proto__:null,default:xc},Symbol.toStringTag,{value:"Module"})),Vc={class:"row items-center justify-end"},qc={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(p,{emit:s}){const u=p,o=s,i=T(""),n=T(""),f=m=>{let g=!0;const _=u.minDate?ut.formatDate(u.minDate,"YYYY/MM/DD"):null,y=u.maxDate?ut.formatDate(u.maxDate,"YYYY/MM/DD"):null;return _&&(g=g&&ut.isBetweenDates(m,_,"2999/01/01",{inclusiveFrom:!0})),y&&(g=g&&ut.isBetweenDates(m,"1900/01/01",y,{inclusiveTo:!0})),g},b=Z(()=>[m=>!!m||"Tanggal harus diisi",m=>{const g=ut.extractDate(m,u.displayFormat);if(!g)return"Format tanggal tidak valid";g.setHours(0,0,0,0);const _=u.minDate?new Date(u.minDate):null;_&&_.setHours(0,0,0,0);const y=u.maxDate?new Date(u.maxDate):null;return y&&y.setHours(0,0,0,0),_&&g<_?`Tanggal tidak boleh kurang dari ${ut.formatDate(u.minDate,u.displayFormat)}`:y&&g>y?`Tanggal tidak boleh lebih dari ${ut.formatDate(u.maxDate,u.displayFormat)}`:(o("update:modelValue",g),!0)}]);Ne(()=>u.modelValue,m=>{m instanceof Date?(n.value=ut.formatDate(m,"YYYY/MM/DD"),i.value=ut.formatDate(m,u.displayFormat)):(n.value="",i.value="")},{immediate:!0});const c=m=>{const g=m!==null?new Date(m):null;o("update:modelValue",g),i.value=g?ut.formatDate(g,u.displayFormat):null};return(m,g)=>(d(),O(se,{modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=_=>i.value=_),label:u.label,readonly:u.readonly,disable:u.disable,error:u.error,"error-message":u.errorMessage,mask:u.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:b.value},{append:a(()=>[e(E,{icon:"event",disable:u.disable||u.readonly,flat:"",rounded:"",dense:""},{default:a(()=>[e(rs,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(is,{modelValue:n.value,"onUpdate:modelValue":[g[0]||(g[0]=_=>n.value=_),c],options:f},{default:a(()=>[t("div",Vc,[ae(e(E,{label:"Close",color:"primary",flat:""},null,512),[[fe]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},pa=_t(qc,[["__scopeId","data-v-b418ccfb"]]);function To(p,s=!1){const u=p.map(f=>({value:f.id,label:f.name})),o=s?[{value:"all",label:"Semua"},...u]:u,i=T([...o]);return{filteredCostCategories:i,filterCostCategory:(f,b)=>{const c=f.toLowerCase();b(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(c))})},costCategoryOptions:o}}const Cc={class:"q-gutter-sm"},Tc={class:"col col-md-6 q-pa-xs"},Pc={__name:"Editor",setup(p){var _;const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=To(s.props.categories),i=s.props.finance_accounts.map(y=>({label:y.name,value:y.id})),n=T(o),f=T([...n.value]),b=Qe({id:s.props.data.id,finance_account_id:s.props.data.finance_account_id??null,category_id:s.props.data.category_id??null,date:new Date(s.props.data.date),description:s.props.data.description,notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((_=s.props.data)==null?void 0:_.image_path)??null,image:null}),c=()=>{ca(b,{date:"YYYY-MM-DD"}),rt({form:b,url:route("admin.operational-cost.save")})},m=(y,S)=>{S(()=>{f.value=n.value.filter(V=>V.label.toLowerCase().includes(y.toLowerCase()))})},g=()=>{b.image_path=null};return(y,S)=>{const V=G("i-head"),$=G("authenticated-layout");return d(),w(Y,null,[e(V,{title:u}),e($,null,{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",Cc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:S[0]||(S[0]=R=>y.$inertia.get(y.route("admin.operational-cost.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Tc,[e(Je,{class:"row",onSubmit:X(c,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":S[1]||(S[1]=R=>l(b).id=R)},null,512),[[yt,l(b).id]]),e(de,{autofocus:"",modelValue:l(b).category_id,"onUpdate:modelValue":S[2]||(S[2]=R=>l(b).category_id=R),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:f.value,"map-options":"","emit-value":"",onFilter:m,error:!!l(b).errors.category_id,disable:l(b).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(B,null,{default:a(()=>S[10]||(S[10]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(pa,{modelValue:l(b).date,"onUpdate:modelValue":S[3]||(S[3]=R=>l(b).date=R),label:"Tanggal",error:!!l(b).errors.date,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(se,{modelValue:l(b).description,"onUpdate:modelValue":S[4]||(S[4]=R=>l(b).description=R),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!l(b).errors.description,disable:l(b).processing,"error-message":l(b).errors.description,rules:[R=>R&&R.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Me,{modelValue:l(b).amount,"onUpdate:modelValue":S[5]||(S[5]=R=>l(b).amount=R),label:"Jumlah",lazyRules:"",disable:l(b).processing,error:!!l(b).errors.amount,errorMessage:l(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(de,{class:"custom-select",modelValue:l(b).finance_account_id,"onUpdate:modelValue":S[6]||(S[6]=R=>l(b).finance_account_id=R),label:"Sumber Dana",options:l(i),"map-options":"","emit-value":"",clearable:"",errorMessage:l(b).errors.finance_account_id,error:!!l(b).errors.finance_account_id,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(se,{modelValue:l(b).notes,"onUpdate:modelValue":S[7]||(S[7]=R=>l(b).notes=R),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(b).processing,error:!!l(b).errors.notes,"error-message":l(b).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Ba,{modelValue:l(b).image,"onUpdate:modelValue":S[8]||(S[8]=R=>l(b).image=R),"initial-image-path":l(b).image_path,disabled:l(b).processing,error:!!l(b).errors.image||!!l(b).errors.image_path,"error-message":l(b).errors.image||l(b).errors.image_path,onImageCleared:g},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(b).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(b).processing,onClick:S[9]||(S[9]=R=>l(ee).get(y.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Rc=Object.freeze(Object.defineProperty({__proto__:null,default:Pc},Symbol.toStringTag,{value:"Module"})),Oc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ic={class:"q-pa-xs"},Uc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Dc={key:0},jc={key:1},Ec={key:0},Ac={class:"flex justify-end no-wrap"},xl="Biaya Operasional",Bc={__name:"Index",setup(p){const s=ge(),u=$e(),o=T(!1),i=T(null),n=T(null),f=at(n),b=T(null),c=T(!1),m=T([]),g=T(!0),_=new Date().getFullYear(),y=new Date().getMonth()+1,S=[{label:"Semua Tahun",value:null},{label:`${_}`,value:_},...It(_-2,_-1).reverse()],V=[{value:null,label:"Semua Bulan"},...Ut()],{costCategoryOptions:$}=To(s.props.categories),R=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...$],{accountOptions:K}=ds(s.props.finance_accounts),I=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...K],D=je({search:"",finance_account_id:"all",category_id:"all",year:_,month:y,...Le()}),U=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),z=[{name:"code",label:u.screen.lt.md?"Item":"Kode",field:"code",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{h()});const M=A=>st({message:`Hapus Biaya ${A.code}?`,url:route("admin.operational-cost.delete",A.id),fetchItemsCallback:h,loading:g}),h=(A=null)=>{Ke({pagination:U,filter:D,props:A,rows:m,url:route("admin.operational-cost.data"),loading:g,tableRef:i})},j=()=>{h()},P=Z(()=>u.screen.gt.sm?z:z.filter(A=>A.name==="code"||A.name==="action"));Ne(()=>D.year,A=>{A===null&&(D.month=null)});const x=A=>{b.value=A,c.value=!0};return(A,F)=>{const q=G("i-head"),N=G("authenticated-layout");return d(),w(Y,null,[e(q,{title:xl}),e(N,null,ze({title:a(()=>[v(r(xl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:F[0]||(F[0]=le=>o.value=!o.value)},null,8,["icon"]),A.$can("admin.operational-cost.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:F[1]||(F[1]=le=>l(ee).get(A.route("admin.operational-cost.add")))})):k("",!0)]),default:a(()=>[t("div",Ic,[e(Ee,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:U.value,"onUpdate:pagination":F[8]||(F[8]=le=>U.value=le),filter:D.search,loading:g.value,columns:P.value,rows:m.value,"rows-per-page-options":[10,25,50],style:He({height:l(f)}),onRequest:h,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:le,message:me,filter:ie})=>[t("div",Uc,[t("span",null,r(me)+" "+r(ie?" with term "+ie:""),1)])]),body:a(le=>[e(Re,{props:le,class:"cursor-pointer",onClick:X(me=>l(ee).get(A.route("admin.operational-cost.detail",{id:le.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"code",props:le,class:"wrap-column"},{default:a(()=>[l(u).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[v(" Kode: ")],64)),v(" "+r(le.row.code)+" ",1),l(u).screen.gt.sm?k("",!0):(d(),w(Y,{key:1},[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(da)(le.row.date)),1)]),le.row.finance_account?(d(),w("div",Dc,[e(C,{name:"wallet",class:"inline-icon"}),v(" "+r(le.row.finance_account.name),1)])):k("",!0),le.row.category?(d(),w("div",jc,[e(C,{name:"category",class:"inline-icon"}),v(" "+r(le.row.category.name),1)])):k("",!0),e(Se,{icon:"description",text:le.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(H)(le.row.amount)),1)]),e(Se,{icon:"notes",text:le.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(Q,{key:"date",props:le,class:"wrap-column"},{default:a(()=>[v(r(l(da)(le.row.date)),1)]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:le,class:"wrap-column"},{default:a(()=>[v(r(le.row.finance_account?le.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(Q,{key:"category_id",props:le},{default:a(()=>[le.row.category?(d(),w("div",Ec,r(le.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"description",props:le},{default:a(()=>[e(Se,{text:le.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"amount",props:le},{default:a(()=>[v(r(l(H)(le.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:le},{default:a(()=>[e(Se,{text:le.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:le},{default:a(()=>[t("div",Ac,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:le.row.image_path===null||le.row.image_path==="",onClick:X(me=>x(le.row.image_path),["stop"])},{default:a(()=>[le.row.image_path!=null?(d(),O(Dt,{key:0},{default:a(()=>F[10]||(F[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),A.$can("admin.operational-cost.add")||A.$can("admin.operational-cost.edit")||A.$can("admin.operational-cost.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:F[7]||(F[7]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[A.$can("admin.operational-cost.add")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(me=>l(ee).get(A.route("admin.operational-cost.duplicate",le.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>F[11]||(F[11]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),A.$can("admin.operational-cost.edit")?ae((d(),O(oe,{key:1,clickable:"",onClick:X(me=>l(ee).get(A.route("admin.operational-cost.edit",le.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>F[12]||(F[12]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),A.$can("admin.operational-cost.delete")?ae((d(),O(oe,{key:2,onClick:X(me=>M(le.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>F[13]||(F[13]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(ya,{modelValue:c.value,"onUpdate:modelValue":F[9]||(F[9]=le=>c.value=le),imageUrl:`/${b.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",Oc,[e(de,{modelValue:D.year,"onUpdate:modelValue":[F[2]||(F[2]=le=>D.year=le),j],options:S,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:D.month,"onUpdate:modelValue":[F[3]||(F[3]=le=>D.month=le),j],options:V,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:D.year===null},null,8,["modelValue","disable"]),e(de,{modelValue:D.category_id,"onUpdate:modelValue":[F[4]||(F[4]=le=>D.category_id=le),j],options:R,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:D.finance_account_id,"onUpdate:modelValue":[F[5]||(F[5]=le=>D.finance_account_id=le),j],options:I,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:D.search,"onUpdate:modelValue":F[6]||(F[6]=le=>D.search=le),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Mc=Object.freeze(Object.defineProperty({__proto__:null,default:Bc},Symbol.toStringTag,{value:"Module"})),Nc={class:"q-gutter-sm"},zc={class:"col col-md-6 q-pa-xs"},Fc={__name:"Editor",setup(p){const s=$e(),u=ge(),o=(u.props.data.id?"Edit":"Tambah")+" Kategori Produk",i=Qe({id:u.props.data.id,name:u.props.data.name,description:u.props.data.description}),n=()=>rt({form:i,url:route("admin.product-category.save")});return(f,b)=>{const c=G("i-head"),m=G("authenticated-layout");return d(),w(Y,null,[e(c,{title:o}),e(m,{"show-drawer-button":!l(s).screen.lt.md},ze({title:a(()=>[v(r(o))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",zc,[e(Je,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(i).id=g)},null,512),[[yt,l(i).id]]),e(se,{autofocus:"",modelValue:l(i).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(i).name=g),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(i).errors.name,disable:l(i).processing,"error-message":l(i).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(i).description,"onUpdate:modelValue":b[3]||(b[3]=g=>l(i).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.description,"error-message":l(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:b[4]||(b[4]=g=>l(i).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",Nc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>f.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},Lc=Object.freeze(Object.defineProperty({__proto__:null,default:Fc},Symbol.toStringTag,{value:"Module"})),Kc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Hc={class:"q-pa-xs"},Wc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Yc={key:0,class:"text-grey-8"},Qc={class:"flex justify-end"},Sl="Kategori Produk",Jc={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=je({search:"",...Le()}),m=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{y()});const _=V=>st({message:`Hapus Kategori ${V.name}?`,url:route("admin.product-category.delete",V.id),fetchItemsCallback:y,loading:i}),y=(V=null)=>{Ke({pagination:m,filter:c,props:V,rows:o,url:route("admin.product-category.data"),loading:i,tableRef:n})},S=Z(()=>s.screen.gt.sm?g:g.filter(V=>V.name==="name"||V.name==="action"));return(V,$)=>{const R=G("i-head"),K=G("authenticated-layout");return d(),w(Y,null,[e(R,{title:Sl}),e(K,null,ze({title:a(()=>[v(r(Sl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=I=>u.value=!u.value)},null,8,["icon"]),V.$can("admin.product-category.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=I=>l(ee).get(V.route("admin.product-category.add")))})):k("",!0)]),default:a(()=>[t("div",Hc,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":$[4]||($[4]=I=>m.value=I),filter:c.search,loading:i.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:I,message:D,filter:U})=>[t("div",Wc,[t("span",null,r(D)+" "+r(U?" with term "+U:""),1)])]),body:a(I=>[e(Re,{props:I},{default:a(()=>[e(Q,{key:"name",props:I,class:"wrap-column"},{default:a(()=>[v(r(I.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[I.row.description?(d(),w("div",Yc,[e(C,{name:"description"}),v(" "+r(I.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"description",props:I,class:"wrap-column"},{default:a(()=>[v(r(I.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:I},{default:a(()=>[t("div",Qc,[V.$can("admin.product-category.add")||V.$can("admin.product-category.edit")||V.$can("admin.product-category.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[3]||($[3]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[V.$can("admin.product-category.add")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(D=>l(ee).get(V.route("admin.product-category.duplicate",I.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>$[5]||($[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),V.$can("admin.product-category.edit")?ae((d(),O(oe,{key:1,clickable:"",onClick:X(D=>l(ee).get(V.route("admin.product-category.edit",I.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>$[6]||($[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),V.$can("admin.product-category.delete")?ae((d(),O(oe,{key:2,onClick:X(D=>_(I.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>$[7]||($[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Kc,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":$[2]||($[2]=I=>c.search=I),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Gc=Object.freeze(Object.defineProperty({__proto__:null,default:Jc},Symbol.toStringTag,{value:"Module"})),Xc={class:"detail"},Zc={key:0},ep={key:1},tp={key:2},ap={class:"detail"},lp={class:"detail"},op={key:0},np={key:0},sp={key:0},rp={key:0},ip={class:"detail"},dp={key:0,class:"q-pt-md"},Po={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(p){const s=p;$e();const u=i=>`${i>0?H((i-s.product.cost)/s.product.cost*100,2):0}%`,o=()=>{st({message:`Hapus Produk ${s.product.name}?`,url:route("admin.product.delete",s.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(i,n)=>{const f=G("i-link");return d(),w("div",null,[n[39]||(n[39]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",Xc,[t("tbody",null,[t("tr",null,[n[1]||(n[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),n[2]||(n[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(p.product.name),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"Deskirpsi",-1)),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,r(p.product.description),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Barcode",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(p.product.barcode),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Jenis Produk",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.PRODUCT_TYPES[p.product.type]),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Kategori",-1)),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,r(p.product.category?p.product.category.name:"--Tidak memiliki kategori--"),1)]),i.$can("admin.product:view-supplier")?(d(),w("tr",Zc,[n[11]||(n[11]=t("td",null,"Supplier",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[p.product.supplier?(d(),O(f,{key:0,href:i.route("admin.supplier.detail",{id:p.product.supplier.id})},{default:a(()=>[v(r(p.product.supplier.name),1)]),_:1},8,["href"])):(d(),w(Y,{key:1},[v(r("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[n[13]||(n[13]=t("td",null,"Status",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,r(p.product.active?"Aktif":"Tidak Aktif"),1)]),p.product.created_at?(d(),w("tr",ep,[n[16]||(n[16]=t("td",null,"Dibuat Oleh",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[p.product.creator?(d(),w(Y,{key:0},[e(f,{href:i.route("admin.user.detail",{id:p.product.creator})},{default:a(()=>[v(r(p.product.creator.username),1)]),_:1},8,["href"]),n[15]||(n[15]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(p.product.created_at)),1)])])):k("",!0),p.product.updater?(d(),w("tr",tp,[n[19]||(n[19]=t("td",null,"Diperbarui oleh",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,[p.product.updater?(d(),w(Y,{key:0},[e(f,{href:i.route("admin.user.detail",{id:p.product.updater})},{default:a(()=>[v(r(p.product.updater.username),1)]),_:1},8,["href"]),n[18]||(n[18]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(p.product.updated_at)),1)])])):k("",!0)])]),n[40]||(n[40]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",ap,[t("tbody",null,[t("tr",null,[n[21]||(n[21]=t("td",{style:{width:"120px"}},"Stok",-1)),n[22]||(n[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(H)(p.product.stock))+" "+r(p.product.uom),1)]),t("tr",null,[n[23]||(n[23]=t("td",null,"Stok Minimum",-1)),n[24]||(n[24]=t("td",null,":",-1)),t("td",null,r(l(H)(p.product.min_stock))+" "+r(p.product.uom),1)]),t("tr",null,[n[25]||(n[25]=t("td",null,"Barcode",-1)),n[26]||(n[26]=t("td",null,":",-1)),t("td",null,r(p.product.barcode),1)])])]),n[41]||(n[41]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",lp,[t("tbody",null,[t("tr",null,[n[27]||(n[27]=t("td",null,"Opsi Harga",-1)),n[28]||(n[28]=t("td",null,":",-1)),t("td",null,r(p.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),i.$can("admin.product:view-cost")?(d(),w("tr",op,[n[29]||(n[29]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),n[30]||(n[30]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(l(H)(p.product.cost)),1)])):k("",!0),t("tr",null,[n[31]||(n[31]=t("td",null,"Harga Eceran",-1)),n[32]||(n[32]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(l(H)(p.product.price_1))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",np," ("+r(u(p.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[n[33]||(n[33]=t("td",null,"Harga Partai",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(l(H)(p.product.price_2))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",sp," ("+r(u(p.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[n[35]||(n[35]=t("td",null,"Harga Grosir",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(l(H)(p.product.price_3))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",rp," ("+r(u(p.product.price_3))+") ",1)):k("",!0)])])])]),n[42]||(n[42]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",ip,[t("tbody",null,[t("tr",null,[n[37]||(n[37]=t("td",{style:{width:"120px"}},"Catatan",-1)),n[38]||(n[38]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(p.product.notes),1)])])]),i.$can("admin.product.delete")?(d(),w("div",dp,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:n[0]||(n[0]=b=>o())})])):k("",!0)])}}},up=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),mp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},cp={key:0},Ro={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(p){const s=p,u=$e(),o=T([]),i=T(!0),n=je({...Le()}),f=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let b=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"quantity_before",label:"Stok Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Stok Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{c()});const c=(g=null)=>Ke({pagination:f,filter:n,props:g,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:s.productId}}),loading:i}),m=Z(()=>u.screen.lt.sm?b.filter(g=>g.name==="id"||g.name==="quantity"):b);return(g,_)=>(d(),O(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:f.value,"onUpdate:pagination":_[0]||(_[0]=y=>f.value=y),filter:n.search,loading:i.value,columns:m.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:c,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",mp,[t("span",null,r(S)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Re,{props:y},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(y.row.created_at)),1)]),t("div",null,[e(it,null,{default:a(()=>[v(r(g.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type]),1)]),_:2},1024)]),l(u).screen.lt.sm?(d(),w(Y,{key:0},[t("div",{class:xe(y.row.quantity>0?"text-positive":"text-negative")},[e(C,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(l(H)(y.row.quantity_before))+" "+r(y.row.uom)+"  "+r(l(H)(y.row.quantity_after))+" "+r(y.row.uom),1)],2),e(Se,{text:y.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"created_at",props:y},{default:a(()=>[v(r(l(ve)(y.row.created_at)),1)]),_:2},1032,["props"]),e(Q,{key:"type",props:y},{default:a(()=>[v(r(g.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type])+" ",1),y.row.ref?(d(),w("span",cp,r(y.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"quantity_before",props:y},{default:a(()=>[v(r(l(H)(y.row.quantity_before)),1)]),_:2},1032,["props"]),e(Q,{key:"quantity",props:y,class:xe(y.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[v(r(l($t)(y.row.quantity))+" ",1),l(u).screen.lt.sm?(d(),w(Y,{key:0},[v(r(y.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Q,{key:"quantity_after",props:y},{default:a(()=>[v(r(l(H)(y.row.quantity_after)),1)]),_:2},1032,["props"]),e(Q,{key:"uom",props:y},{default:a(()=>[v(r(y.row.uom),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},pp=Object.freeze(Object.defineProperty({__proto__:null,default:Ro},Symbol.toStringTag,{value:"Module"})),fp={class:"q-gutter-sm"},gp={class:"q-gutter-sm"},bp={class:"row justify-center"},vp={class:"col col-lg-6 q-pa-xs"},_p={class:"row"},yp={__name:"Detail",setup(p){const s=ge(),u=`Rincian Produk #${s.props.data.id}`,o=T("main");return(i,n)=>{const f=G("i-head"),b=G("authenticated-layout");return d(),w(Y,null,[e(f,{title:u}),e(b,{"show-drawer-button":!0},{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",fp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$goBack())})])]),"right-button":a(()=>[t("div",gp,[i.$can("admin.product.edit")?(d(),O(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[1]||(n[1]=c=>l(ee).get(i.route("admin.product.edit",{id:l(s).props.data.id}))),title:"Edit produk"})):k("",!0),i.$can("admin.product.add")?(d(),O(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[2]||(n[2]=c=>l(ee).get(i.route("admin.product.duplicate",{id:l(s).props.data.id}))),title:"Duplikat produk"})):k("",!0),i.$can("admin.product.add")?(d(),O(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:n[3]||(n[3]=c=>l(ee).get(i.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:a(()=>[t("div",bp,[t("div",vp,[t("div",_p,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Tt,{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=c=>o.value=c),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(Pt,{modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=c=>o.value=c),animated:""},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(Po,{product:l(s).props.data},null,8,["product"])]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Ro,{"product-id":l(s).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},kp=Object.freeze(Object.defineProperty({__proto__:null,default:yp},Symbol.toStringTag,{value:"Module"})),Qt=At({name:"QBtnToggle",props:{...io,modelValue:{required:!0},options:{type:Array,required:!0,validator:p=>p.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(p,{slots:s,emit:u}){const o=Z(()=>p.options.find(y=>y.value===p.modelValue)!==void 0),i=Z(()=>({type:"hidden",name:p.name,value:p.modelValue})),n=cs(i),f=Z(()=>us(p)),b=Z(()=>({rounded:p.rounded,dense:p.dense,...f.value})),c=Z(()=>p.options.map((y,S)=>{const{attrs:V,value:$,slot:R,...K}=y;return{slot:R,props:{key:S,"aria-pressed":$===p.modelValue?"true":"false",...V,...K,...b.value,disable:p.disable===!0||K.disable===!0,color:$===p.modelValue?g(K,"toggleColor"):g(K,"color"),textColor:$===p.modelValue?g(K,"toggleTextColor"):g(K,"textColor"),noCaps:g(K,"noCaps")===!0,noWrap:g(K,"noWrap")===!0,size:g(K,"size"),padding:g(K,"padding"),ripple:g(K,"ripple"),stack:g(K,"stack")===!0,stretch:g(K,"stretch")===!0,onClick(I){m($,y,I)}}}}));function m(y,S,V){p.readonly!==!0&&(p.modelValue===y?p.clearable===!0&&(u("update:modelValue",null,null),u("clear")):u("update:modelValue",y,S),u("click",V))}function g(y,S){return y[S]===void 0?p[S]:y[S]}function _(){const y=c.value.map(S=>Ce(E,S.props,S.slot!==void 0?s[S.slot]:void 0));return p.name!==void 0&&p.disable!==!0&&o.value===!0&&n(y,"push"),so(s.default,y)}return()=>Ce(ms,{class:"q-btn-toggle",...f.value,rounded:p.rounded,stretch:p.stretch,glossy:p.glossy,spread:p.spread},_)}});function za(p,s=!1){const u=p.map(f=>({value:f.id,label:f.name})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...u]:u,i=T([...o]);return{filteredCategories:i,filterCategories:(f,b)=>{const c=f.toLowerCase();b(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(c))})},categories:o}}function Fa(p,s=!1){const u=p.map(f=>({value:f.id,label:f.name+" ("+f.code+")"})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...u]:u,i=T([...o]);return{filteredSuppliers:i,filterSupplierFn:(f,b)=>{const c=f.toLowerCase();b(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(c))})},suppliers:o}}const Oa=Ma({__name:"PercentInput",props:{modelValue:{type:[Number,null],required:!1,default:0},label:{type:[String,void 0],required:!1,default:void 0},locale:{type:String,default:"id-ID"},outlined:{type:Boolean,default:!1},allowNegative:{type:Boolean,default:!1},maxDecimals:{type:Number,default:0},lazyRules:{type:[Boolean,String],default:!1},disable:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(p,{expose:s,emit:u}){const o=T(null),i=ps(),n=T(!1);s({focus:()=>{o.value&&o.value.focus()},select:()=>{var I;if((I=o.value)!=null&&I.$el){const D=o.value.$el.querySelector("input");D==null||D.select()}}});const f=p,b=u,c=T(""),m=I=>{const U=new Intl.NumberFormat(I).format(123456789e-2),z=U.includes(",")?",":".",M=U.replace(/\d/g,"").replace(z,"").charAt(0);return{decimalSeparator:z,thousandSeparator:M}},{decimalSeparator:g,thousandSeparator:_}=m(f.locale),y=I=>{if(I==null||isNaN(I)){if(f.maxDecimals>0)return"";I=0}return new Intl.NumberFormat(f.locale,{minimumFractionDigits:f.maxDecimals,maximumFractionDigits:f.maxDecimals}).format(I)};Ne(()=>f.modelValue,I=>{n.value||(c.value=y(I))},{immediate:!0});const S=I=>{const D=I.replace(/[^0-9.,-]+/g,"").replace(new RegExp(`\\${_}`,"g"),"").replace(new RegExp(`\\${g}`,"g"),".");if(D===""||D==="-")return null;const U=parseFloat(D);return isNaN(U)?null:parseFloat(U.toFixed(f.maxDecimals))},V=()=>{n.value=!0,S(c.value),mt(()=>{var I;(I=o.value)==null||I.select()})},$=I=>{c.value=I},R=()=>{n.value=!1;const I=S(c.value);b("update:modelValue",I),c.value=y(I)},K=I=>{const D=["Backspace","Delete","Tab","ArrowLeft","ArrowRight","Home","End","Shift"];I.ctrlKey||I.metaKey||I.key>="0"&&I.key<="9"||(I.key===g||I.key===_)&&!c.value.includes(g)||f.allowNegative&&I.key==="-"&&I.target.selectionStart===0||D.includes(I.key)||I.preventDefault()};return(I,D)=>(d(),O(l(se),{ref_key:"qInputRef",ref:o,"model-value":c.value,label:f.label,outlined:f.outlined,"onUpdate:modelValue":$,onBlur:R,onFocus:V,onKeydown:K,"lazy-rules":f.lazyRules,disable:f.disable,error:f.error,rules:f.rules,"error-message":f.errorMessage},ze({_:2},[l(i).prepend?{name:"prepend",fn:a(()=>[Vt(I.$slots,"prepend")]),key:"0"}:void 0,l(i).append?{name:"append",fn:a(()=>[Vt(I.$slots,"append")]),key:"1"}:void 0]),1032,["model-value","label","outlined","lazy-rules","disable","error","rules","error-message"]))}}),wp=Ma({__name:"BarcodeInput",props:{modelValue:{}},emits:["update:modelValue","scan-success"],setup(p,{emit:s}){const u=p,o=s,i=$e(),n=T(u.modelValue);Ne(()=>u.modelValue,K=>{K!==n.value&&(n.value=K)});const f=K=>{n.value=K,o("update:modelValue",K)},b=T(null),c=T(!1),m=T(!1);let g=null,_=null,y=null;he(async()=>{if("BarcodeDetector"in window){c.value=!0;try{const K=await window.BarcodeDetector.getSupportedFormats();_=new BarcodeDetector({formats:K})}catch(K){console.warn("BarcodeDetector init error:",K),c.value=!1}}}),na(()=>$());function S(){if(!c.value){i.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}m.value?$():V()}async function V(){if(_)try{m.value=!0,g=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),b.value&&(b.value.srcObject=g),await new Promise(K=>setTimeout(K,300)),R()}catch(K){m.value=!1,i.notify({type:"negative",message:`Gagal akses kamera: ${K.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function $(){m.value=!1,y&&cancelAnimationFrame(y),g&&(g.getTracks().forEach(K=>K.stop()),g=null)}async function R(){var K;if(!(!b.value||!_||!m.value)){try{const I=await _.detect(b.value);if(I.length>0){const D=I[0].rawValue;n.value=D,o("update:modelValue",D),o("scan-success",D),(K=navigator.vibrate)==null||K.call(navigator,100),i.notify({type:"positive",message:`Barcode terdeteksi: ${D}`,timeout:1e3}),$();return}}catch(I){console.warn("Detection error:",I)}y=requestAnimationFrame(R)}}return(K,I)=>(d(),w("div",null,[e(se,Da(K.$attrs,{"model-value":n.value,"onUpdate:modelValue":f,disable:m.value||K.$attrs.disable,loading:m.value||K.$attrs.loading}),ze({append:a(()=>[c.value&&!m.value&&!n.value?(d(),O(C,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:S},{default:a(()=>[e(Dt,null,{default:a(()=>I[1]||(I[1]=[v("Scan Barcode")])),_:1})]),_:1})):m.value?(d(),O(uo,{key:1,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0)]),_:2},[De(K.$slots,(D,U)=>({name:U,fn:a(z=>[U!=="append"?Vt(K.$slots,U,Na(Da({key:0},z)),void 0,!0):k("",!0)])}))]),1040,["model-value","disable","loading"]),e(lt,{modelValue:m.value,"onUpdate:modelValue":I[0]||(I[0]=D=>m.value=D),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(pe,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(te,{class:"text-center q-pb-none"},{default:a(()=>I[2]||(I[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(te,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:b,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(tt,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(E,{label:"Batal Scan",color:"negative",icon:"close",onClick:$})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),hp=_t(wp,[["__scopeId","data-v-38d5a1a0"]]),$p={class:"q-gutter-sm"},xp={class:"col col-md-6 q-pa-xs"},Sp={class:"row q-gutter-md"},Vp={class:"col"},qp={class:"col"},Cp={class:"row q-gutter-md"},Tp={class:"q-mt-md full-width"},Pp={__name:"Editor",setup(p){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Produk",o=ot(window.CONSTANTS.PRODUCT_TYPES),i=T(!1),n=Qe({id:s.props.data.id,category_id:s.props.data.category_id,supplier_id:s.props.data.supplier_id,type:s.props.data.type||"",name:s.props.data.name||"",description:s.props.data.description||"",stock:parseFloat(s.props.data.stock)||0,min_stock:parseFloat(s.props.data.min_stock)||0,max_stock:parseFloat(s.props.data.max_stock)||0,uom:s.props.data.uom||"",barcode:s.props.data.barcode||"",cost:parseFloat(s.props.data.cost)||0,price_1:parseFloat(s.props.data.price_1)||0,price_2:parseFloat(s.props.data.price_2)||0,price_3:parseFloat(s.props.data.price_3)||0,price_1_markup:parseFloat(s.props.data.price_1_markup),price_2_markup:parseFloat(s.props.data.price_2_markup),price_3_markup:parseFloat(s.props.data.price_3_markup),price_1_option:s.props.data.price_1_option??"price",price_2_option:s.props.data.price_2_option??"price",price_3_option:s.props.data.price_3_option??"price",active:!!s.props.data.active,price_editable:!!s.props.data.price_editable,notes:s.props.data.notes||""}),f=()=>rt({form:n,url:route("admin.product.save")});function b($){return s.props.data.id&&s.props.data.supplier&&($.some(K=>K.id===s.props.data.supplier_id)||$.unshift(s.props.data.supplier)),$}const{filteredCategories:c,filterCategories:m}=za(s.props.categories),{filteredSuppliers:g,filterSupplierFn:_}=Fa(b(s.props.suppliers)),y=($,R)=>($=parseFloat($)||0,R=parseFloat(R)||0,R<=0?$>0?100:0:($-R)/R*100),S=($,R)=>{$=parseFloat($)||0,R=parseFloat(R)||0;const K=$*(1+R/100);return Math.round(K)};Ne(()=>n.cost,$=>{i.value||(i.value=!0,n.price_1_option=="markup"?n.price_1=S($,n.price_1_markup):n.price_1_markup=y(n.price_1,$),n.price_2_option=="markup"?n.price_2=S($,n.price_2_markup):n.price_2_markup=y(n.price_2,$),n.price_3_option=="markup"?n.price_3=S($,n.price_3_markup):n.price_3_markup=y(n.price_3,$),i.value=!1)},{immediate:!1});const V=$=>{const R=`price_${$}`,K=`price_${$}_markup`,I=`price_${$}_option`;Ne(()=>n[R],D=>{if(n[I]=="markup"||i.value)return;i.value=!0;const U=y(D,n.cost);n[K]=parseFloat(U.toFixed(2)),i.value=!1},{deep:!1}),Ne(()=>n[K],D=>{n[I]!="price"&&(i.value||(i.value=!0,n[R]=S(n.cost,D),i.value=!1))},{deep:!1})};for(let $=1;$<=3;$++)V($);return he(()=>{for(let $=1;$<=3;$++)n[`price_${$}_markup`]=y(n[`price_${$}`],n.cost)}),($,R)=>{const K=G("i-head"),I=G("authenticated-layout");return d(),w(Y,null,[e(K,{title:u}),e(I,{"show-drawer-button":!0},{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",$p,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:R[0]||(R[0]=D=>$.$goBack())})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(n).processing,onClick:R[1]||(R[1]=D=>f()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",xp,[e(Je,{class:"row",onKeydown:R[25]||(R[25]=Jt(X(()=>{},["prevent"]),["enter"])),onSubmit:X(f,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":R[2]||(R[2]=D=>l(n).id=D)},null,512),[[yt,l(n).id]]),R[32]||(R[32]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(de,{disabled:!!l(n).id,autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":R[3]||(R[3]=D=>l(n).type=D),class:"custom-select",options:l(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["disabled","modelValue","options"]),e(se,{modelValue:l(n).name,"onUpdate:modelValue":R[4]||(R[4]=D=>l(n).name=D),modelModifiers:{trim:!0},label:"Kode / Nama Produk","lazy-rules":"",error:!!l(n).errors.name,disable:l(n).processing,"error-message":l(n).errors.name,rules:[D=>D&&D.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(n).description,"onUpdate:modelValue":R[5]||(R[5]=D=>l(n).description=D),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi (Opsional)","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.description,"error-message":l(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:l(n).category_id,"onUpdate:modelValue":R[6]||(R[6]=D=>l(n).category_id=D),label:"Kategori (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(c),"map-options":"","emit-value":"",onFilter:l(m),"option-label":"label","option-value":"value",error:!!l(n).errors.category_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(B,null,{default:a(()=>R[26]||(R[26]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),$.$can("admin.product:view-supplier")?(d(),O(de,{key:0,modelValue:l(n).supplier_id,"onUpdate:modelValue":R[7]||(R[7]=D=>l(n).supplier_id=D),label:"Supplier Default (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(g),"map-options":"","emit-value":"",onFilter:l(_),"option-label":"label","option-value":"value",error:!!l(n).errors.supplier_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(B,null,{default:a(()=>R[27]||(R[27]=[v("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(Rt,{class:"q-mt-md",modelValue:l(n).active,"onUpdate:modelValue":R[8]||(R[8]=D=>l(n).active=D),disable:l(n).processing,label:"Produk Aktif (Ditampilkan)"},null,8,["modelValue","disable"]),R[33]||(R[33]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",Sp,[t("div",Vp,[e(se,{modelValue:l(n).uom,"onUpdate:modelValue":R[9]||(R[9]=D=>l(n).uom=D),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!l(n).errors.uom,disable:l(n).processing,"error-message":l(n).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])]),t("div",qp,[e(hp,{modelValue:l(n).barcode,"onUpdate:modelValue":R[10]||(R[10]=D=>l(n).barcode=D),modelModifiers:{trim:!0},label:"Barcode"},null,8,["modelValue"])])]),t("div",Cp,[e(Me,{modelValue:l(n).stock,"onUpdate:modelValue":R[11]||(R[11]=D=>l(n).stock=D),label:"Stok Aktual",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.stock,errorMessage:l(n).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Me,{modelValue:l(n).min_stock,"onUpdate:modelValue":R[12]||(R[12]=D=>l(n).min_stock=D),label:"Stok Minimum",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.min_stock,errorMessage:l(n).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),R[34]||(R[34]=t("div",{class:"text-subtitle1 q-pt-lg"},"Harga & Modal",-1)),$.$can("admin.product:view-cost")?(d(),O(Me,{key:1,modelValue:l(n).cost,"onUpdate:modelValue":R[13]||(R[13]=D=>l(n).cost=D),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.cost,errorMessage:l(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("table",Tp,[R[31]||(R[31]=t("thead",{class:"text-grey-6"},[t("tr",null,[t("th",{style:{width:"25%"}},"Harga"),t("th",{style:{width:"25%"}},"Markup (%)"),t("th"),t("th",{style:{width:"25%"}},"Harga Jual (Rp)")])],-1)),t("tbody",null,[t("tr",null,[R[28]||(R[28]=t("td",{class:"no-wrap"},"Harga Eceran",-1)),t("td",null,[e(Oa,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_1_markup,"onUpdate:modelValue":R[14]||(R[14]=D=>l(n).price_1_markup=D),lazyRules:"",readonly:l(n).price_1_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_1_markup,errorMessage:l(n).errors.price_1_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Qt,{modelValue:l(n).price_1_option,"onUpdate:modelValue":R[15]||(R[15]=D=>l(n).price_1_option=D),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Me,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_1,"onUpdate:modelValue":R[16]||(R[16]=D=>l(n).price_1=D),lazyRules:"",disable:l(n).processing,readonly:l(n).price_1_option=="markup",error:!!l(n).errors.price_1,errorMessage:l(n).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])]),t("tr",null,[R[29]||(R[29]=t("td",{class:"no-wrap"},"Harga Partai",-1)),t("td",null,[e(Oa,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_2_markup,"onUpdate:modelValue":R[17]||(R[17]=D=>l(n).price_2_markup=D),lazyRules:"",readonly:l(n).price_2_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_2_markup,errorMessage:l(n).errors.price_2_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Qt,{modelValue:l(n).price_2_option,"onUpdate:modelValue":R[18]||(R[18]=D=>l(n).price_2_option=D),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Me,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_2,"onUpdate:modelValue":R[19]||(R[19]=D=>l(n).price_2=D),lazyRules:"",readonly:l(n).price_2_option=="markup",disable:l(n).processing,error:!!l(n).errors.price_2,errorMessage:l(n).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","readonly","disable","error","errorMessage"])])]),t("tr",null,[R[30]||(R[30]=t("td",{class:"no-wrap"},"Harga Grosir",-1)),t("td",null,[e(Oa,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_3_markup,"onUpdate:modelValue":R[20]||(R[20]=D=>l(n).price_3_markup=D),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option!="markup",error:!!l(n).errors.price_3_markup,errorMessage:l(n).errors.price_3_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","disable","readonly","error","errorMessage"])]),t("td",null,[e(Qt,{modelValue:l(n).price_3_option,"onUpdate:modelValue":R[21]||(R[21]=D=>l(n).price_3_option=D),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Me,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_3,"onUpdate:modelValue":R[22]||(R[22]=D=>l(n).price_3=D),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option=="markup",error:!!l(n).errors.price_3,errorMessage:l(n).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])])])]),e(Rt,{class:"q-mt-sm",modelValue:l(n).price_editable,"onUpdate:modelValue":R[23]||(R[23]=D=>l(n).price_editable=D),disable:l(n).processing,label:"Harga dapat diubah saat penjualan"},null,8,["modelValue","disable"]),e(se,{modelValue:l(n).notes,"onUpdate:modelValue":R[24]||(R[24]=D=>l(n).notes=D),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Rp=Object.freeze(Object.defineProperty({__proto__:null,default:Pp},Symbol.toStringTag,{value:"Module"})),Op={class:"q-gutter-sm"},Ip={class:"col col-md-6 q-pa-xs"},Vl="Import Produk",Up={__name:"Import",setup(p){const s=Qe({csv_file:null}),u=()=>{s.post(route("admin.product.import"),{onSuccess:()=>{s.reset()},onError:()=>{Ye()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=G("i-head"),f=G("authenticated-layout");return d(),w(Y,null,[e(n,{title:Vl}),e(f,{"show-drawer-button":!0},{title:a(()=>[v(r(Vl))]),"left-button":a(()=>[t("div",Op,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$goBack())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ip,[e(Je,{class:"row",onSubmit:X(u,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e($o,{modelValue:l(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>l(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:i[2]||(i[2]=b=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),O(Gt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),O(Gt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Dp=Object.freeze(Object.defineProperty({__proto__:null,default:Up},Symbol.toStringTag,{value:"Module"})),jp={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ep={class:"q-pa-xs"},Ap={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Bp={key:0},Mp={key:1},Np={key:2},zp={key:3},Fp={class:"flex justify-end"},Lp={key:0},Kp={key:1},Hp={key:0},ql="Produk",Wp={__name:"Index",setup(p){const s=ge(),u=T(null),o=T(null),i=at(o),n=T(!1),f=[...ot(window.CONSTANTS.PRODUCT_TYPES)],b=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],c=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],m=$e(),g=T(!1),_=T([]),y=T(!0),S=je({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...Le()}),V=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let $=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"action",align:"right"}];he(()=>{const x=new URLSearchParams(window.location.search).get("page");x&&(V.value.page=parseInt(x)),K()});const R=P=>st({message:`Hapus Produk ${P.name}?`,url:route("admin.product.delete",P.id),fetchItemsCallback:K,loading:y}),K=(P=null)=>{Ke({pagination:V,filter:S,props:P,rows:_,url:route("admin.product.data"),loading:y,tableRef:u})},I=()=>{K()},{filteredCategories:D,filterCategories:U}=za(s.props.categories),{filteredSuppliers:z,filterSupplierFn:M}=Fa(s.props.suppliers),h=Z(()=>{let P=[...$];return n.value||P.splice(2,1),m.screen.gt.sm?P:P.filter(x=>x.name==="name"||x.name==="action")}),j=P=>{ee.get(route("admin.product.detail",P.row.id))};return(P,x)=>{const A=G("i-head"),F=G("authenticated-layout");return d(),w(Y,null,[e(A,{title:ql}),e(F,null,ze({title:a(()=>[v(r(ql))]),"right-button":a(()=>[e(E,{icon:g.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=q=>g.value=!g.value)},null,8,["icon"]),P.$can("admin.product.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=q=>l(ee).get(P.route("admin.product.add")))})):k("",!0),P.$can("admin.product.import")||P.$can("admin.product:view-cost")?(d(),O(E,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[5]||(x[5]=X(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[P.$can("admin.product.send-price-list")?ae((d(),O(oe,{key:0,clickable:"",onClick:x[2]||(x[2]=X(q=>l(ee).get(P.route("admin.product.send-price-list")),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"send"})]),_:1}),e(B,null,{default:a(()=>x[14]||(x[14]=[v("Kirim Daftar Harga")])),_:1})]),_:1})),[[ne],[fe]]):k("",!0),P.$can("admin.product.import")?ae((d(),O(oe,{key:1,clickable:"",onClick:x[3]||(x[3]=q=>n.value=!n.value)},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:n.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(B,null,{default:a(()=>[v(r(n.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[ne],[fe]]):k("",!0),P.$can("admin.product.import")?ae((d(),O(oe,{key:2,clickable:"",onClick:x[4]||(x[4]=X(q=>l(ee).get(P.route("admin.product.import")),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"csv"})]),_:1}),e(B,null,{default:a(()=>x[15]||(x[15]=[v("Import")])),_:1})]),_:1})),[[ne],[fe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",Ep,[e(Ee,{ref_key:"tableRef",ref:u,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":x[13]||(x[13]=q=>V.value=q),filter:S.search,loading:y.value,columns:h.value,rows:_.value,"rows-per-page-options":[10,25,50],style:He({height:l(i)}),onRequest:K,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:N,filter:le})=>[t("div",Ap,[t("span",null,r(N)+" "+r(le?" with term "+le:""),1)])]),header:a(q=>[e(Re,{props:q},{default:a(()=>[e(oa,{"auto-width":""}),(d(!0),w(Y,null,De(q.cols,N=>(d(),O(oa,{key:N.name,props:q},{default:a(()=>[v(r(N.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(q=>[e(Re,{props:q,class:xe([{inactive:!q.row.active},"cursor-pointer"]),onClick:N=>j(q)},{default:a(()=>[e(Q,{"auto-width":""},{default:a(()=>[e(E,{size:"sm",flat:"",round:"",dense:"",onClick:X(N=>q.expand=!q.expand,["stop"]),icon:q.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(Q,{key:"name",props:q,class:"wrap-column"},{default:a(()=>[v(r(q.row.name)+" ",1),l(m).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[q.row.type=="stocked"?(d(),w("div",Bp,[e(C,{name:"cycle"}),v(" Stok: "+r(l(H)(q.row.stock))+" "+r(q.row.uom),1)])):k("",!0),n.value?(d(),w("div",Mp,[e(C,{name:"money"}),v(" Modal: Rp. "+r(l(H)(q.row.cost)),1)])):k("",!0),t("div",null,[e(C,{name:"sell"}),v(" Eceran: Rp. "+r(l(H)(q.row.price_1)),1)]),q.row.price_2!=0?(d(),w("div",Np,[e(C,{name:"sell"}),v(" Partai: Rp. "+r(l(H)(q.row.price_2)),1)])):k("",!0),q.row.price_3!=0?(d(),w("div",zp,[e(C,{name:"sell"}),v(" Grosir: Rp. "+r(l(H)(q.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"stock",props:q,class:xe(["wrap-column",{"low-stock":q.row.type=="stocked"&&(Number(q.row.stock)==0||Number(q.row.stock)<Number(q.row.min_stock)),"over-stock":q.row.type=="stocked"&&Number(q.row.max_stock)&&Number(q.row.stock)>Number(q.row.max_stock)}])},{default:a(()=>[v(r(q.row.type=="stocked"?l(H)(q.row.stock)+" "+q.row.uom:"-"),1)]),_:2},1032,["props","class"]),(d(),O(Q,{key:"cost",props:q,class:"wrap-column"},{default:a(()=>[v(r(l(H)(q.row.cost)),1)]),_:2},1032,["props"])),e(Q,{key:"price_1",props:q,class:"wrap-column"},{default:a(()=>[v(r(l(H)(q.row.price_1)),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:q},{default:a(()=>[t("div",Fp,[P.$can("admin.product.add")||P.$can("admin.product.edit")||P.$can("admin.product.delete")?(d(),O(E,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:x[12]||(x[12]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"175px"}},{default:a(()=>[P.$can("admin.product.add")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(N=>l(ee).get(P.route("admin.product.duplicate",q.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>x[16]||(x[16]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),P.$can("admin.product.edit")?ae((d(),O(oe,{key:1,clickable:"",onClick:X(N=>l(ee).get(P.route("admin.product.edit",q.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>x[17]||(x[17]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),P.$can("admin.product.delete")?ae((d(),O(oe,{key:2,onClick:X(N=>R(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>x[18]||(x[18]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),ae(e(Re,{props:q},{default:a(()=>[e(Q,{colspan:"100%"},{default:a(()=>[q.row.barcode?(d(),w("div",Lp,[e(C,{class:"inline-icon",name:"barcode"}),v(" Barcode: "+r(q.row.barcode),1)])):k("",!0),q.row.category_id?(d(),w("div",Kp,[e(C,{name:"category",class:"inline-icon"}),v(" Kategori: "+r(q.row.category.name),1)])):k("",!0),P.$can("admin.product:view-supplier")?(d(),w(Y,{key:2},[q.row.supplier_id?(d(),w("div",Hp,[e(C,{name:"local_shipping",class:"inline-icon"}),v(" Supplier: "+r(q.row.supplier.name),1)])):k("",!0)],64)):k("",!0),q.row.description?(d(),O(Se,{key:3,text:q.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),q.row.notes?(d(),O(Se,{key:4,text:q.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[mo,q.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[g.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:a(()=>[t("div",jp,[e(de,{modelValue:S.type,"onUpdate:modelValue":[x[6]||(x[6]=q=>S.type=q),I],class:"custom-select col-xs-4 col-sm-2",options:f,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(de,{modelValue:S.stock_status,"onUpdate:modelValue":[x[7]||(x[7]=q=>S.stock_status=q),I],class:"custom-select col-xs-4 col-sm-2",options:c,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:S.status,"onUpdate:modelValue":[x[8]||(x[8]=q=>S.status=q),I],class:"custom-select col-xs-4 col-sm-2",options:b,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:S.category_id,"onUpdate:modelValue":[x[9]||(x[9]=q=>S.category_id=q),I],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(D),"map-options":"",dense:"","emit-value":"",onFilter:l(U),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),P.$can("admin.product:view-supplier")?(d(),O(de,{key:0,modelValue:S.supplier_id,"onUpdate:modelValue":[x[10]||(x[10]=q=>S.supplier_id=q),I],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(z),"map-options":"",dense:"","emit-value":"",onFilter:l(M),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:S.search,"onUpdate:modelValue":x[11]||(x[11]=q=>S.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Yp=Object.freeze(Object.defineProperty({__proto__:null,default:Wp},Symbol.toStringTag,{value:"Module"})),Qp={class:"q-gutter-sm"},Jp={class:"col col-md-8 q-pa-xs"},Gp={class:"col-12 col-md-6"},Xp={class:"col-12 col-md-6"},Zp={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},ef={class:"q-gutter-sm"},Cl="Kirim Daftar Harga",tf={__name:"SendPriceList",setup(p){const s=ge(),u=T(""),o=T(null),i=Z(()=>{var M;const z=new Map;return(M=s.props.products)==null||M.forEach(h=>{z.set(h.id,h)}),z}),n=Z(()=>{var M;const z=new Map;return(M=s.props.customers)==null||M.filter(h=>h.phone&&h.phone.trim()!=="").forEach(h=>{z.set(h.id,h)}),z}),f=Z(()=>{var z;return((z=s.props.customers)==null?void 0:z.map(M=>({value:M.id,label:M.name})))||[]}),b=Z(()=>{var z;return((z=s.props.products)==null?void 0:z.map(M=>({value:M.id,label:`${M.name}`})))||[]}),c=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],m=T(b.value),g=T(f.value),_=Qe({price_types:[],products:[],customers:[]});_.transform(z=>({customers:z.customers.map(M=>M.value),message:u.value}));const y=z=>z?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(z):"Rp. 0",S=z=>{const M=c.find(h=>h.value===z);return M?M.label:z},V=()=>{if(o.value){const z=o.value.$el.querySelector("textarea");if(z){z.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(M){console.error("Gagal menyalin teks ke clipboard:",M)}}}},$=Z(()=>{var M,h;if(((M=_.products)==null?void 0:M.length)===0||((h=_.price_types)==null?void 0:h.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let z=`*DAFTAR HARGA TERBARU*
`;return z+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,z+=`------------------------------

`,(_.products||[]).forEach(j=>{const P=i.value.get(j.value);P&&(z+=`*${P.name}*
`,(_.price_types||[]).forEach(x=>{const A=S(x),F=P[x],q=P.uom||"pcs";F!=null&&F>0&&(z+=`- ${A}: *${y(F)}* / ${q}
`)}),z+=`
`)}),z+=`------------------------------
`,z+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",z});Ne($,z=>{u.value=z},{immediate:!0});const R=Z(()=>(_.customers||[]).map(z=>n.value.get(z.value)).filter(z=>z&&z.phone)),K=z=>{const M=u.value;let h=z.startsWith("0")?"62"+z.substring(1):z;h=h.replace(/[^0-9]/g,"");const j=encodeURIComponent(M);return`https://wa.me/${h}?text=${j}`},I=(z,M)=>{if(z===""){M(()=>{m.value=b.value});return}M(()=>{const h=z.toLowerCase();m.value=b.value.filter(j=>j.label.toLowerCase().indexOf(h)>-1)})},D=(z,M)=>{if(z===""){M(()=>{g.value=f.value});return}M(()=>{const h=z.toLowerCase();g.value=f.value.filter(j=>j.label.toLowerCase().indexOf(h)>-1)})},U=()=>{var z,M,h;if(((z=_.price_types)==null?void 0:z.length)===0||((M=_.products)==null?void 0:M.length)===0||((h=_.customers)==null?void 0:h.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}_.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{Ye()},onFinish:()=>{_.clearErrors()}})};return(z,M)=>{const h=G("i-head"),j=G("authenticated-layout");return d(),w(Y,null,[e(h,{title:Cl}),e(j,{"show-drawer-button":!0},{title:a(()=>[v(r(Cl))]),"left-button":a(()=>[t("div",Qp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:M[0]||(M[0]=P=>z.$goBack())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Jp,[e(Je,{class:"row q-col-gutter-xs",onSubmit:X(U,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[t("div",Gp,[e(pe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[M[10]||(M[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),M[11]||(M[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(de,{modelValue:l(_).products,"onUpdate:modelValue":M[1]||(M[1]=P=>l(_).products=P),options:m.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.products,"error-message":l(_).errors.products,loading:l(_).processing,"use-input":"",onFilter:I,onClear:M[2]||(M[2]=P=>l(_).products=[]),"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(B,{class:"text-grey"},{default:a(()=>M[8]||(M[8]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(de,{modelValue:l(_).price_types,"onUpdate:modelValue":M[3]||(M[3]=P=>l(_).price_types=P),options:c,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.price_types,"error-message":l(_).errors.price_types,loading:l(_).processing,multiple:"","use-chips":"",clearable:"",onClear:M[4]||(M[4]=P=>l(_).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(de,{modelValue:l(_).customers,"onUpdate:modelValue":M[5]||(M[5]=P=>l(_).customers=P),options:g.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.customers,"error-message":l(_).errors.customers,loading:l(_).processing,"use-input":"",onFilter:D,onClear:M[6]||(M[6]=P=>l(_).customers=[]),"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(B,{class:"text-grey"},{default:a(()=>M[9]||(M[9]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>{var P,x,A;return[e(E,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:l(_).processing||((P=l(_).products)==null?void 0:P.length)===0||((x=l(_).customers)==null?void 0:x.length)===0||((A=l(_).price_types)==null?void 0:A.length)===0,loading:l(_).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",Xp,[e(pe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(te,null,{default:a(()=>[t("div",Zp,[M[12]||(M[12]=v(" Pratinjau Pesan (Teks Biasa) ")),e(E,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:V,disable:u.value.length===0},null,8,["disable"])]),e(se,{modelValue:u.value,"onUpdate:modelValue":M[7]||(M[7]=P=>u.value=P),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),R.value.length>0?(d(),O(te,{key:0,class:"q-pt-none"},{default:a(()=>[M[14]||(M[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",ef,[(d(!0),w(Y,null,De(R.value,P=>(d(),O(E,{key:P.id,label:`Kirim ke ${P.name}`,href:K(P.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(l(_).products.length>0&&l(_).price_types.length>0)},{default:a(()=>[P.phone?k("",!0):(d(),O(Dt,{key:0},{default:a(()=>M[13]||(M[13]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),M[15]||(M[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},af=Object.freeze(Object.defineProperty({__proto__:null,default:tf},Symbol.toStringTag,{value:"Module"})),lf={class:"q-gutter-sm"},of={class:"q-pa-xs"},nf={class:"col-12"},sf={class:"col-12"},rf={class:"q-gutter-xs"},Tl="Kirim Daftar Harga",df={__name:"SendPriceList2",setup(p){const s=ge(),u=T(""),o=Z(()=>{var z;const U=new Map;return(z=s.props.products)==null||z.forEach(M=>{U.set(M.id,M)}),U}),i=Z(()=>{var z;const U=new Map;return(z=s.props.customers)==null||z.forEach(M=>{U.set(M.id,M)}),U}),n=Z(()=>{var U;return((U=s.props.customers)==null?void 0:U.map(z=>({value:z.id,label:z.name})))||[]}),f=Z(()=>{var U;return((U=s.props.products)==null?void 0:U.map(z=>({value:z.id,label:`${z.name} (${z.sku||z.code||"ID: "+z.id})`})))||[]}),b=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],c=T(f.value),m=T(n.value),g=Qe({price_types:[],products:[],customers:[]});g.transform(U=>({...U,products:U.products.map(z=>z.value),customers:U.customers.map(z=>z.value)}));const _=U=>U?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(U):"Rp. 0",y=U=>{const z=b.find(M=>M.value===U);return z?z.label:U},S=Z(()=>{if(g.products.length===0||g.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let U=`Daftar Harga Terbaru
`;return U+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,U+=`------------------------------

`,g.products.forEach(z=>{const M=o.value.get(z.value);M&&(U+=`*${M.name}*
`,g.price_types.forEach(h=>{const j=y(h),P=M[h],x=M.unit||"pcs";P!=null&&P!=0&&(U+=`- ${j}: ${_(P)} / ${x}
`)}),U+=`
`)}),U+=`------------------------------
`,U+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",U});Ne(S,U=>{u.value=U},{immediate:!0});const V=Z(()=>g.customers.map(U=>i.value.get(U.value)).filter(U=>U&&U.phone_number)),$=U=>{const z=u.value;let M=U.startsWith("0")?"62"+U.substring(1):U;M=M.replace(/[^0-9]/g,"");const h=encodeURIComponent(z);return`https://wa.me/${M}?text=${h}`},R=(U,z)=>{if(U===""){z(()=>{c.value=f.value});return}z(()=>{const M=U.toLowerCase();c.value=f.value.filter(h=>h.label.toLowerCase().indexOf(M)>-1)})},K=(U,z)=>{if(U===""){z(()=>{m.value=n.value});return}z(()=>{const M=U.toLowerCase();m.value=n.value.filter(h=>h.label.toLowerCase().indexOf(M)>-1)})},I=()=>{console.log("Scrolling to first error field...")},D=()=>{if(g.price_types.length===0||g.products.length===0||g.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}g.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{I()},onFinish:()=>{g.clearErrors()}})};return(U,z)=>{const M=G("i-head"),h=G("authenticated-layout");return d(),w(Y,null,[e(M,{title:Tl}),e(h,{"show-drawer-button":!0},{title:a(()=>[v(r(Tl))]),"left-button":a(()=>[t("div",lf,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:z[0]||(z[0]=j=>U.$goBack())})])]),default:a(()=>[t("div",of,[e(Je,{class:"row q-col-gutter-md",onSubmit:X(D,["prevent"]),onValidationError:I},{default:a(()=>[t("div",nf,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[z[8]||(z[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),z[9]||(z[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(de,{modelValue:l(g).products,"onUpdate:modelValue":z[1]||(z[1]=j=>l(g).products=j),options:c.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.products,"error-message":l(g).errors.products,loading:l(g).processing,"use-input":"",onFilter:R,"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(B,{class:"text-grey"},{default:a(()=>z[6]||(z[6]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(de,{modelValue:l(g).price_types,"onUpdate:modelValue":z[2]||(z[2]=j=>l(g).price_types=j),options:b,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.price_types,"error-message":l(g).errors.price_types,loading:l(g).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(de,{modelValue:l(g).customers,"onUpdate:modelValue":z[3]||(z[3]=j=>l(g).customers=j),options:m.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.customers,"error-message":l(g).errors.customers,loading:l(g).processing,"use-input":"",onFilter:K,"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(B,{class:"text-grey"},{default:a(()=>z[7]||(z[7]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:l(g).processing||l(g).products.length===0||l(g).customers.length===0||l(g).price_types.length===0,loading:l(g).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(g).processing,onClick:z[4]||(z[4]=j=>U.$goBack())},null,8,["disable"])]),_:1}),U.$page.props.flash.success?(d(),O(Gt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(r(U.$page.props.flash.success),1)]),_:1})):k("",!0),U.$page.props.flash.error?(d(),O(Gt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(r(U.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",sf,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[z[10]||(z[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(se,{modelValue:u.value,"onUpdate:modelValue":z[5]||(z[5]=j=>u.value=j),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),z[11]||(z[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),V.value.length>0?(d(),O(te,{key:0},{default:a(()=>[z[13]||(z[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",rf,[(d(!0),w(Y,null,De(V.value,j=>(d(),O(E,{key:j.id,label:`Kirim ke ${j.label}`,href:$(j.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:a(()=>[j.phone_number?k("",!0):(d(),O(Dt,{key:0},{default:a(()=>z[12]||(z[12]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href"]))),128))]),z[14]||(z[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},uf=Object.freeze(Object.defineProperty({__proto__:null,default:df},Symbol.toStringTag,{value:"Module"})),mf={class:"q-gutter-sm"},cf={class:"col col-md-6 q-pa-xs"},Pl="Tambah Retur Pembelian",pf={__name:"Create",setup(p){const s=ge(),u=Qe({code:s.props.data.code}),o=()=>rt({form:u,url:route("admin.purchase-order-return.add")});return(i,n)=>{const f=G("i-head"),b=G("authenticated-layout");return d(),w(Y,null,[e(f,{title:Pl}),e(b,null,{title:a(()=>[v(r(Pl))]),"left-button":a(()=>[t("div",mf,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.finance-account.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",cf,[e(Je,{class:"row",onSubmit:X(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(se,{autofocus:"",modelValue:l(u).code,"onUpdate:modelValue":n[1]||(n[1]=c=>l(u).code=c),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(u).errors.code,disable:l(u).processing,"error-message":l(u).errors.code,rules:[c=>c&&c.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(u).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(u).processing,onClick:n[2]||(n[2]=c=>l(ee).get(i.route("admin.purchase-order-return.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ff=Object.freeze(Object.defineProperty({__proto__:null,default:pf},Symbol.toStringTag,{value:"Module"})),gf={class:"column"},bf={class:"bg-grey-2 q-pa-xs"},vf={class:"text-subtitle1 text-bold text-grey-10"},_f={class:"text-caption text-grey-8"},yf={class:"col-12 col-sm-6"},kf={class:"full-width"},wf={key:1},hf={key:0},$f={key:1},xf={class:"col-12 col-sm-6",align:"left"},Sf={class:"full-width"},Vf={class:"full-width",style:{"border-collapse":"collapse"}},qf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Cf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Tf={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Pf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Rf={key:0},Of={class:"col-12 col-sm-6"},If={class:"text-body2 text-grey-7 text-italic"},Uf={class:"col-12 col-sm-6"},Df={class:"row justify-end q-gutter-y-xs"},jf={class:"col-12 row justify-between"},Ef={class:"text-subtitle2 text-bold"},Af={class:"row justify-end q-gutter-y-xs"},Bf={class:"col-12 row justify-between"},Mf={class:"text-subtitle2 text-bold"},Oo={__name:"MainInfoTab",props:{data:Object},setup(p){const s=p;return(u,o)=>{const i=G("i-link"),n=G("my-link");return d(),w("div",gf,[e(te,{class:"q-pa-none"},{default:a(()=>[t("div",bf,[t("div",vf," RETUR #"+r(s.data.code),1),t("div",_f,r(l(ve)(s.data.datetime)),1)])]),_:1}),e(Pe),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",yf,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",kf,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),O(i,{key:0,href:u.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>{var f;return[e(C,{class:"inline-icon",name:"person"}),v(" "+r(s.data.supplier_name)+" ("+r((f=s.data.supplier)==null?void 0:f.code)+") ",1)]}),_:1},8,["href"])):(d(),w("div",wf,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(d(),w("tr",hf,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(d(),w("tr",$f,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",xf,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Sf,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:u.route("admin.purchase-order.detail",{id:s.data.purchase_order_id})},{default:a(()=>[v(r(s.data.purchase_order_id?s.data.purchase_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("table",Vf,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(Y,null,De(s.data.details,f=>(d(),w("tr",{key:f.id},[t("td",qf,[e(i,{href:u.route("admin.product.detail",f.product_id)},{default:a(()=>[v(r(f.product_name),1)]),_:2},1032,["href"])]),t("td",Cf,r(l(H)(f.cost)),1),t("td",Tf,r(f.quantity),1),t("td",Pf,r(l(H)(f.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),w("tr",Rf,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(te,{class:"row",align:"left"},{default:a(()=>[t("div",Of,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",If,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Uf,[t("div",Df,[t("div",jf,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Ef,r(l(H)(s.data.grand_total)),1)])]),t("div",Af,[t("div",Bf,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",Mf,r(l(H)(s.data.total_refunded)),1)])])])]),_:1})])}}},Nf=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),zf={key:0,class:"text-center q-mb-md text-grey-8"},Ff={class:"text-subtitle2 text-weight-medium"},Lf={class:"text-h5 text-center text-primary q-pb-md"},Kf={class:"text-center q-mt-md"},Hf={key:0,class:"text-h6 text-negative text-weight-bold"},Wf={key:1,class:"text-h6 text-positive text-weight-bold"},Io={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=ge(),n=T(!1),f=T({method:"transfer",amount:u.total,notes:null}),b=i.props.data.supplier,c=Z(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(V=>({label:V.name,value:V.id}))]),m=Z(()=>u.remaining_refund),g=Z(()=>{const V=f.value.amount||0;return V<=0?"Jumlah pembayaran harus lebih dari 0.":V>u.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=Z(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const V={id:f.value.method,amount:f.value.amount,notes:f.value.notes};o("accepted",V),n.value=!1},S=()=>{f.value.amount=u.total,f.value.method="cash",f.value.notes=null};return(V,$)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":$[4]||($[4]=R=>V.$emit("update:modelValue",R)),onBeforeShow:S},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>$[5]||($[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",zf,[t("div",Ff,[v(r(l(b).code)+" ",1),$[6]||($[6]=t("br",null,null,-1)),v(" "+r(l(b).name)+" ",1),$[7]||($[7]=t("br",null,null,-1))])])):k("",!0),t("div",Lf," Total: Rp. "+r(l(H)(p.total)),1),e(l(de),{modelValue:f.value.method,"onUpdate:modelValue":$[0]||($[0]=R=>f.value.method=R),options:c.value,label:"Kas Tujuan",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Me,{modelValue:f.value.amount,"onUpdate:modelValue":$[1]||($[1]=R=>f.value.amount=R),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:f.value.notes,"onUpdate:modelValue":$[2]||($[2]=R=>f.value.notes=R),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Kf,[m.value>0?(d(),w("div",Hf," Sisa Refund: Rp. "+r(l(H)(m.value)),1)):(d(),w("div",Wf," Refund Lunas "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:$[3]||($[3]=R=>V.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Yf=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"})),Qf={class:"column"},Jf={class:"row"},Gf={class:"full-width",style:{"border-collapse":"collapse"}},Xf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Zf={class:"row items-center q-gutter-x-sm"},eg={class:"text-weight-bold"},tg={class:"row items-center q-gutter-x-sm q-mt-xs"},ag={class:"text-caption text-grey-6"},lg={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},og={class:"q-mt-xs"},ng={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},sg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},rg={key:0},ig={class:"text-right q-pa-sm"},Uo={__name:"RefundTab",props:{data:Object},setup(p){const s=p,u=$e(),o=T(!1),i=()=>{o.value=!0},n=Z(()=>s.data.remaining_refund),f=async c=>{const m={order_id:s.data.id,...c};u.loading.show({message:"Memproses pembayaran..."});try{const g=await Ie.post(route("admin.purchase-order-return.add-refund"),m);u.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(g){let _="Gagal memproses refund.";g.response&&g.response.data&&g.response.data.message?_=g.response.data.message:g.message&&(_=g.message),u.notify({message:_,color:"negative",icon:"error"})}finally{u.loading.hide()}},b=c=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Ie.post(route("admin.purchase-order-return.delete-refund",{id:c.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(m){let g="Gagal menghapus refund pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(c,m)=>{const g=G("my-link");return d(),w(Y,null,[t("div",Qf,[e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("div",Jf,[c.$can("admin.purchase-order-return.add-refund")?(d(),O(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=X(_=>i(),["stop"]))})):k("",!0)]),t("table",Gf,[m[5]||(m[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(Y,null,De(s.data.payments,_=>(d(),w("tr",{key:_.id},[t("td",Xf,[t("div",Zf,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",eg,r(_.code),1)]),t("div",tg,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",ag,r(l(ve)(_.created_at)),1)]),(_.type==="transfer"||_.type==="cash")&&_.account?(d(),w("div",lg,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),e(g,{href:c.route("admin.finance-account.detail",_.account.id),target:"_blank"},{default:a(()=>[v(r(_.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",og,[e(it,{label:c.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[_.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",ng,r(l(H)(_.amount)),1),t("td",sg,[c.$can("admin.purchase-order-return.delete-refund")?(d(),O(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(_)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",rg,m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund (Rp.)",-1)),t("th",ig,r(l(H)(s.data.total_refunded)),1),m[4]||(m[4]=t("th",null,null,-1))])])])]),_:1})]),e(Io,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=_=>o.value=_),total:n.value,supplier:s.data.supplier,onAccepted:f},null,8,["modelValue","total","supplier"])],64)}}},dg=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),ug={class:"q-gutter-sm"},mg={class:"col col-lg-6 q-pa-xs",align:"center"},Rl="Retur Pembelian",cg={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),u=ge(),o=u.props.data,i=T(s.get("preview")||!1),f=T(s.get("tab")||"main-info");he(()=>{mt(()=>{const c=s.get("print_size");c&&b(c)})});const b=c=>{window.open(route("admin.purchase-order-return.print",{id:u.props.data.id,size:c}),"_self")};return(c,m)=>{const g=G("i-head"),_=G("authenticated-layout");return d(),w(Y,null,[e(g,{title:Rl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Rl))])]),"left-button":a(()=>[t("div",ug,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>c.$goBack())})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=y=>b("a4"))}),i.value?k("",!0):(d(),O(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=y=>l(ee).get(c.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",mg,[e(pe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(Tt,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(d(),O(dt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Pt,{modelValue:f.value,"onUpdate:modelValue":m[5]||(m[5]=y=>f.value=y),animated:""},{default:a(()=>[e(nt,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(Oo,{data:l(o)},null,8,["data"])]),_:1}),e(nt,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(Uo,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},pg=Object.freeze(Object.defineProperty({__proto__:null,default:cg},Symbol.toStringTag,{value:"Module"})),fg={class:"text-weight-medium wrap-column"},gg={class:"text-caption text-grey-6 elipsis"},bg={class:"column items-end"},vg={class:"text-caption text-grey-6 text-italic"},Do={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=$e(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),O(Ee,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:l(u)})},{header:a(f=>[e(Re,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(Y,null,De(f.cols,b=>(d(),O(oa,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Re,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left"},{default:a(()=>[t("div",fg,r(f.row.product_name),1),t("div",gg,r(f.row.product_barcode),1),f.row.notes?(d(),O(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal",props:f,class:"text-right"},{default:a(()=>[t("div",bg,[t("div",null,r(l(H)(f.row.subtotal_cost)),1),t("div",vg,r(l(H)(f.row.quantity))+" x Rp. "+r(l(H)(f.row.cost)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},_g=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),yg={class:"row items-center no-wrap"},kg={class:"col-auto"},jo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=Z(()=>o.item.quantity*o.item.cost),b=_=>{_.stopPropagation(),_.preventDefault()},c=_=>{o.modelValue&&(_.key==="Enter"?(n(),b(_)):_.key==="Escape"&&(i("update:modelValue",!1),b(_)))};he(()=>{window.addEventListener("keydown",c)}),wt(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item});const g=()=>{};return(_,y)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":y[6]||(y[6]=S=>_.$emit("update:modelValue",S)),onBeforeShow:g},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",yg,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",kg,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=S=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(se,{modelValue:p.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=S=>p.item.product_name=S),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=S=>p.item.quantity=S),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.cost,"onUpdate:modelValue":y[3]||(y[3]=S=>p.item.cost=S),label:"Modal / Harga Beli","hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=S=>f.value=S),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:p.item.notes,"onUpdate:modelValue":y[5]||(y[5]=S=>p.item.notes=S),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},wg=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"}));function hg(){const p=T(new Date);let s=null;const u=()=>{p.value=new Date};return he(()=>{s=setInterval(u,1e3)}),wt(()=>{s&&clearInterval(s)}),{currentDateTime:p}}const $g={class:"text-grey-8"},ha={__name:"DigitalClock",setup(p){const{currentDateTime:s}=hg();return(u,o)=>(d(),w("div",$g,r(l(ve)(l(s))),1))}},xg={key:0,class:"q-select__selected-item"},Eo={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(p,{expose:s,emit:u}){const o=T(null),i=p,n=u,f=T([]);let b=null;const c=T(i.modelValue);he(()=>{i.initialData&&(c.value=i.initialData)}),Ne(c,_=>{n("update:modelValue",_),n("supplierSelected",_)}),Ne(()=>i.modelValue,_=>{c.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const g=(_,y)=>{if(_.length<i.minLength){y(()=>{f.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Ie.get(`/web-api/suppliers?q=${_}`).then(S=>{y(()=>{f.value=S.data.data})}).catch(S=>{console.error("Gagal mengambil data pemasok:",S),y(()=>{f.value=[]})})},100)};return(_,y)=>(d(),O(de,{class:xe(p.class),ref_key:"qSelectRef",ref:o,modelValue:c.value,"onUpdate:modelValue":y[0]||(y[0]=S=>c.value=S),"use-input":"","input-debounce":"0",label:p.label,options:f.value,onFilter:g,clearable:"",error:p.error,behavior:"menu","error-message":p.errorMessage,disable:p.disable,"hide-bottom-space":"",outlined:p.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a(S=>[e(oe,Na(co(S.itemProps)),{default:a(()=>[e(B,null,{default:a(()=>[e(be,null,{default:a(()=>[v(r(S.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":a(S=>[S.opt?(d(),w("div",xg,r(S.opt.name),1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Sg={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(u,o)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[ae(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ao=_t(Sg,[["__scopeId","data-v-abc5074e"]]),Vg=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"}));function $a(p){const s=T(!1),u=()=>{const n=p.value||document.documentElement;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},i=()=>{s.value?o():u()};return fs(()=>{const n=()=>{s.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("mozfullscreenchange",n),document.removeEventListener("MSFullscreenChange",n)}}),{isFullscreen:s,requestFullscreen:u,exitFullscreen:o,toggleFullscreen:i}}const qg={class:"row items-center no-wrap"},Cg={class:"col text-subtite text-bold text-grey-8"},Tg={class:"col-auto"},Bo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(i("update:modelValue",!1),f(m)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",qg,[t("div",Cg," Edit "+r(p.data.code),1),t("div",Tg,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(Ht,{modelValue:p.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:p.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Pg=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"})),Rg={class:"row items-center no-wrap"},Og={class:"col-auto"},Ig={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ug={key:0},xa={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1},priceType:{type:String,require:!1,default:"price_1"}},emits:["update:modelValue","product-selected"],setup(p,{emit:s}){const u=$e(),o=p,i=T(!1),n=T(o.showCost),f=s,b=T(null),c=T([]),m=T(!0),g=T(-1),_=je({search:"",status:"active",...Le()}),y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});[...ot(window.CONSTANTS.PRODUCT_PRICE_TYPES)];const S=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_1.replace("Harga ","H "),field:"price_1",align:"right"},{name:"price_2",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_2.replace("Harga ","H "),field:"price_2",align:"right"},{name:"price_3",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_3.replace("Harga ","H "),field:"price_3",align:"right"}],V=Z(()=>{if(i.value)return S;const z=S.filter(M=>M.name!=="cost");return u.screen.gt.sm?z:z.filter(M=>M.name==="name"||M.name==="stock")});he(()=>{R()});const $=()=>{if(b.value&&g.value!==-1){const z=(y.value.page-1)*y.value.rowsPerPage,M=g.value-z;mt(()=>{if(M>=0&&M<c.value.length&&b.value.scrollTo){const h=b.value.$el.querySelector(".selected-row");h&&h.scrollIntoView({behavior:"smooth",block:"nearest"})}})}},R=()=>{o.modelValue!==!1&&K()},K=(z=null)=>{m.value=!0;const M=g.value;Ke({pagination:y,filter:_,props:z,rows:c,url:route("admin.product.data"),loading:m,tableRef:b,onSuccess:()=>{c.value.length>0?((M===0||M===-1)&&(g.value=0),mt(()=>{$()})):g.value=-1}})},I=()=>{R()},D=z=>{f("product-selected",z),setTimeout(()=>{f("update:modelValue",!1)},100)},U=z=>{if(!o.modelValue){alert("none");return}const M=c.value.length;if(M===0)return;const h=(y.value.page-1)*y.value.rowsPerPage,j=h+M-1;if(z.key==="ArrowDown")z.preventDefault(),g.value<j?(g.value=g.value+1,$()):g.value===j&&U({key:"ArrowRight",preventDefault:()=>{}});else if(z.key==="ArrowUp")z.preventDefault(),g.value>h?(g.value=g.value-1,$()):g.value===h&&h>0&&U({key:"ArrowLeft",preventDefault:()=>{}});else if(z.key==="Enter"&&g.value!==-1){z.preventDefault(),z.preventDefault();const P=(y.value.page-1)*y.value.rowsPerPage,x=g.value-P;x>=0&&x<M?D(c.value[x]):console.warn("Kesalahan: selectedIndex global di luar batas halaman saat ini.")}else if(g.value!==-1){if(z.key==="ArrowRight"){z.preventDefault();const P=y.value.page+1;P<=Math.ceil(y.value.rowsNumber/y.value.rowsPerPage)&&(y.value.page=P,g.value=(P-1)*y.value.rowsPerPage,b.value.requestServerInteraction())}else if(z.key==="ArrowLeft"){z.preventDefault();const P=y.value.page-1;P>=1&&(y.value.page=P,g.value=(P-1)*y.value.rowsPerPage,b.value.requestServerInteraction())}}};return Ne(()=>o.modelValue,(z,M)=>{M===!0&&z===!1&&(_.search=""),z===!0&&K()}),(z,M)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":M[4]||(M[4]=h=>z.$emit("update:modelValue",h)),maximized:l(u).screen.lt.sm},{default:a(()=>[e(pe,{class:"column fit",tabindex:"0",onKeydown:U,ref:"cardRef"},{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",Rg,[M[5]||(M[5]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",Og,[e(E,{flat:"",round:"",size:"sm",icon:"close",onClick:M[0]||(M[0]=h=>z.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:xe(["q-py-sm",l(u).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(se,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":[M[1]||(M[1]=h=>_.search=h),I],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"]),n.value?(d(),O(ua,{key:0,modelValue:i.value,"onUpdate:modelValue":M[2]||(M[2]=h=>i.value=h),label:"Tampilkan Modal",style:{"margin-left":"-10px"}},null,8,["modelValue"])):k("",!0)]),_:1},8,["class"]),e(te,{class:xe(["q-py-xs col",l(u).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(Ee,{ref_key:"tableRef",ref:b,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":M[3]||(M[3]=h=>y.value=h),filter:_.search,loading:m.value,columns:V.value,rows:c.value,"rows-per-page-options":[10,25,50],onRequest:K,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":a(({icon:h,message:j,filter:P})=>[t("div",Ig,[t("span",null,r(j),1)])]),body:a(h=>[e(Re,{tabindex:"0",props:h,class:xe([{inactive:["stocked","raw_materials"].includes(h.row.type)&&h.row.stock==0,"selected-row":g.value===h.rowIndex},"cursor-pointer"]),onClick:j=>D(h.row),onKeydown:[Jt(X(j=>D(h.row),["prevent","stop"]),["enter"]),Jt(X(j=>D(h.row),["prevent"]),["space"])]},{default:a(()=>[e(Q,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[e(Se,{text:h.row.name},null,8,["text"]),h.row.description?(d(),O(Se,{key:0,text:h.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),l(u).screen.lt.md?(d(),w(Y,{key:1},[t("div",null," Stok: "+r(h.row.type=="stocked"?l(H)(h.row.stock)+" "+h.row.uom:"-"),1),i.value?(d(),w("div",Ug," Modal: Rp. "+r(l(H)(h.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+r(l(H)(h.row.price_1)),1),t("div",null,"Harga 2: Rp. "+r(l(H)(h.row.price_1)),1),t("div",null,"Harga 3: Rp. "+r(l(H)(h.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"stock",props:h,class:"text-right"},{default:a(()=>[v(r(h.row.type=="stocked"?l(H)(h.row.stock)+" "+h.row.uom:"-"),1)]),_:2},1032,["props"]),e(Q,{key:"cost",props:h,class:"wrap-column text-right"},{default:a(()=>[v(r(l(H)(h.row.cost)),1)]),_:2},1032,["props"]),e(Q,{key:"price_1",props:h,class:"wrap-column text-right"},{default:a(()=>[v(r(l(H)(h.row.price_1)),1)]),_:2},1032,["props"]),e(Q,{key:"price_2",props:h,class:"wrap-column text-right"},{default:a(()=>[v(r(l(H)(h.row.price_2)),1)]),_:2},1032,["props"]),e(Q,{key:"price_3",props:h,class:"wrap-column text-right"},{default:a(()=>[v(r(l(H)(h.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},Dg=Ma({__name:"BarcodeInputEditor",props:{modelValue:{}},emits:["update:modelValue","scan-success","send","search"],setup(p,{expose:s,emit:u}){const o=T(null);s({focus:()=>{o.value&&o.value.focus()},qInput:o});const n=p,f=u,b=$e(),c=T(n.modelValue);Ne(()=>n.modelValue,h=>{h!==c.value&&(c.value=h)});const m=h=>{c.value=h,f("update:modelValue",h)},g=T(null),_=T(!1),y=T(!1);let S=null,V=null,$=null;he(async()=>{if("BarcodeDetector"in window){_.value=!0;try{const h=await window.BarcodeDetector.getSupportedFormats();V=new BarcodeDetector({formats:h})}catch(h){console.warn("BarcodeDetector init error:",h),_.value=!1}}}),na(()=>I());function R(){if(!_.value){b.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}y.value?I():K()}async function K(){if(V)try{y.value=!0,S=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),g.value&&(g.value.srcObject=S),await new Promise(h=>setTimeout(h,300)),z()}catch(h){y.value=!1,b.notify({type:"negative",message:`Gagal akses kamera: ${h.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function I(){y.value=!1,$&&cancelAnimationFrame($),S&&(S.getTracks().forEach(h=>h.stop()),S=null)}async function D(){f("search")}async function U(){f("send")}async function z(){var h;if(!(!g.value||!V||!y.value)){try{const j=await V.detect(g.value);if(j.length>0){const P=j[0].rawValue;c.value+=P,f("update:modelValue",c.value),f("scan-success",c.value),(h=navigator.vibrate)==null||h.call(navigator,100),b.notify({type:"positive",message:`Barcode terdeteksi: ${c.value}`,timeout:1e3}),I();return}}catch(j){console.warn("Detection error:",j)}$=requestAnimationFrame(z)}}const M=Z(()=>!!(_.value&&!y.value&&!c.value||c.value.endsWith("*")));return(h,j)=>(d(),w("div",null,[e(se,Da({ref_key:"qInputInternalRef",ref:o},h.$attrs,{"model-value":c.value,"onUpdate:modelValue":m,disable:y.value||h.$attrs.disable,loading:y.value||h.$attrs.loading,clearable:c.value&&!c.value.endsWith("*")}),{prepend:a(()=>[e(C,{name:"search",onClick:D,class:"cursor-pointer"})]),append:a(()=>[M.value?(d(),O(C,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:R},{default:a(()=>[e(Dt,null,{default:a(()=>j[1]||(j[1]=[v("Scan Barcode")])),_:1})]),_:1})):k("",!0),M.value?y.value?(d(),O(uo,{key:2,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0):(d(),O(C,{key:1,name:"send",onClick:U,class:"cursor-pointer q-ml-md"}))]),_:1},16,["model-value","disable","loading","clearable"]),e(lt,{modelValue:y.value,"onUpdate:modelValue":j[0]||(j[0]=P=>y.value=P),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(pe,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(te,{class:"text-center q-pb-none"},{default:a(()=>j[2]||(j[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(te,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:g,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(tt,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(E,{label:"Batal Scan",color:"negative",icon:"close",onClick:I})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Sa=_t(Dg,[["__scopeId","data-v-5cfb3e70"]]),jg={class:"q-gutter-sm"},Eg={class:"row items-center"},Ag={class:"text-weight-bold"},Bg={class:"row q-col-gutter-none full-width"},Mg={class:"col-sm-6 col-12 col"},Ng={class:"row full-width"},zg={key:0,class:"row"},Fg={class:"col-sm-6 col-12"},Lg={class:"row q-ml-sm items-end"},Kg={class:"row col grow"},Hg={class:"col-12 q-pa-sm column"},Wg={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},Yg={key:0,class:"col"},Qg={class:"text-caption text-grey-6 q-mt-xs"},Jg={key:0,class:"text-caption text-grey-8 q-mt-xs"},Gg={class:"text-italic"},Xg={key:1,class:"col"},Zg={class:"q-pa-sm q-pb-none text-grey-8"},e1={class:"col"},t1={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},a1={class:"text-h4 text-weight-bold"},l1={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},o1={class:"col q-py-sm"},n1={class:"q-py-sm"},s1={__name:"Editor",setup(p){const s=$e(),u=ge(),o=T(!0),i=T(null),n=T(null),f=T(null),b=T(!1),c=T(null),m=T(null),{isFullscreen:g,toggleFullscreen:_}=$a(m),y="Retur #"+u.props.data.code,S=T(u.props.data.supplier),V=T(""),$=T(!1),R=T(!1),K=T(!1),I=T(!1),D=T(null),U=je({id:u.props.data.id,code:u.props.data.code,supplier_id:u.props.data.supplier_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),z=Z(()=>U.items.reduce((ce,L)=>ce+L.cost*L.quantity,0)),M=()=>{var ce;_(),g.value||(ce=c==null?void 0:c.value)==null||ce.hideDrawer()},h=ce=>isNaN(ce)||ce<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,j=ce=>isNaN(ce)||ce<0?(bt("Harga tidak valid.","top"),!1):!0,P=ce=>!ce||ce.length==0?(bt("Barcode tidak valid.","top"),!1):!0,x=ce=>{var L;(L=V.value)!=null&&L.endsWith("*")?V.value+=ce.name:V.value=ce.name},A=async()=>{if($.value)return;const ce=V.value.trim();if(ce.length===0){R.value=!0;return}const L=ce.split("*");let ye=1,re="",W=null;if(L.length===1)re=L[0];else if(L.length<=3)ye=parseInt(L[0]),re=L[1],L.length===3&&(W=parseFloat(L[2]));else{bt("Input tidak valid.","top");return}if(re.length===0){R.value=!0;return}!P(re)&&!h(ye)&&!j(W)||($.value=!0,await Ie.post(route("admin.purchase-order-return.add-item"),{order_id:U.id,product_code:re,qty:ye,price:W,merge:o.value}).then(ke=>{const ue=ke.data.data.item;let J=-1;ke.data.data.mergeItem&&(J=U.items.findIndex(qe=>qe.id===ue.id)),J===-1?U.items.push(ue):U.items[J]=ue,V.value="",W!==null&&W!==parseFloat(ue.price)&&bt("Harga tidak dapat diubah!","top")}).catch(ke=>{var ue,J;ft((J=(ue=ke.response)==null?void 0:ue.data)==null?void 0:J.message,"top"),console.error("Gagal mengambil data produk:",ke)}),$.value=!1,mt(()=>{var ke;(ke=i.value)==null||ke.focus()}))},F=ce=>{D.value=Object.create(ce),K.value=!0},q=ce=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ce.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{$.value=!0,Ie.post(route("admin.purchase-order-return.remove-item"),{id:ce.id}).then(()=>{const L=U.items.findIndex(ye=>ye.id===ce.id);L!==-1&&(U.items.splice(L,1)[0],gt("Item telah dihapus","top"))}).catch(L=>{var ye,re;ft(((re=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:re.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{$.value=!1})})},N=()=>{$.value=!0;const ce=n.value.getCurrentItem(),L={id:ce.id,qty:ce.quantity,cost:ce.cost};ce.notes&&(L.notes=ce.notes),Ie.post(route("admin.purchase-order-return.update-item"),L).then(ye=>{const re=ye.data.data,W=U.items.findIndex(ke=>ke.id===re.id);W!==-1&&(U.items[W]=re,gt("Item telah diperbarui","top")),K.value=!1}).catch(ye=>{var re,W;ft(((W=(re=ye==null?void 0:ye.response)==null?void 0:re.data)==null?void 0:W.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ye)}).finally(()=>{$.value=!1})};he(()=>{const ce=L=>{b.value||K.value||R.value||I.value||(L.key==="F1"?(L.preventDefault(),b.value=!0):L.key==="F2"?(L.preventDefault(),f.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),me()):L.key==="F11"?(L.preventDefault(),M()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault())};document.addEventListener("keydown",ce),wt(()=>{document.removeEventListener("keydown",ce)}),mt(()=>{var L;(L=c==null?void 0:c.value)==null||L.hideDrawer()})});const le=async()=>{$.value=!0;const ce={id:U.id,supplier_id:U.supplier_id??null,datetime:aa(U.datetime),notes:U.notes};await Ie.post(route("admin.purchase-order-return.update"),ce).then(L=>{const ye=L.data.data.id;U.supplier_id=ye.supplier_id}).catch(L=>{var ye,re;ft(((re=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{$.value=!1})},me=ce=>{if(U.items.length===0){gt("Item masih kosong","top");return}xt.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${U.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{$.value=!0,Ie.post(route("admin.purchase-order-return.close",{id:U.id})).then(L=>{gt("Transaksi selesai"),ee.get(route("admin.purchase-order-return.detail",{id:U.id}))}).catch(L=>{var ye,re;ft((re=(ye=L.response)==null?void 0:ye.data)==null?void 0:re.message),console.error(L)}).finally(()=>{$.value=!1})})},ie=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${U.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ie.post(route("admin.purchase-order-return.cancel",{id:U.id}),{id:U.id}).then(()=>{gt("Transaksi telah dibatalkan."),ee.visit(route("admin.purchase-order-return.detail",{id:U.id}))}).catch(ce=>{var ye,re;const L=((re=(ye=ce.response)==null?void 0:ye.data)==null?void 0:re.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(ce)})})},Oe=()=>{window.open(route("admin.purchase-order-return.detail",{id:U.id})+"?preview=1","_blank")},Xe=Z(()=>S.value?S.value.wallet_balance>=z.value:!0);return(ce,L)=>{const ye=G("i-head"),re=G("authenticated-layout");return d(),w(Y,null,[e(ye,{title:y}),e(re,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[v(r(y))]),"left-button":a(()=>[t("div",jg,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=W=>l(ee).get(ce.route("admin.purchase-order-return.index")))})])]),"right-button":a(()=>[t("div",Eg,[l(s).screen.gt.sm?(d(),w(Y,{key:0},[t("div",Ag,r(l(u).props.auth.user.username),1),L[21]||(L[21]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ha)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:a(()=>[t("div",Bg,[t("div",Mg,[t("div",Ng,[e(Eo,{ref_key:"supplierAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:S.value,"onUpdate:modelValue":L[2]||(L[2]=W=>S.value=W),label:"Pemasok",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),S.value?(d(),w("div",zg,[t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",Xe.value?"text-green":"text-red"])}," Wallet: "+r(S.value?"Rp. "+l(H)(S.value?S.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",S.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(S.value?"Rp. "+l(H)(S.value?S.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",Fg,[e(Sa,{ref_key:"userInputRef",ref:i,modelValue:V.value,"onUpdate:modelValue":L[3]||(L[3]=W=>V.value=W),onKeyup:L[4]||(L[4]=Jt(X(W=>A(),["prevent"]),["enter"])),onScanSuccess:L[5]||(L[5]=W=>A()),onSend:L[6]||(L[6]=W=>A()),onSearch:L[7]||(L[7]=W=>R.value=!0),loading:$.value,disable:$.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",Lg,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[8]||(L[8]=W=>o.value=W),label:"Gabungkan item",disable:$.value},null,8,["modelValue","disable"])])])]),t("div",Kg,[t("div",Hg,[e(Do,{items:U.items,onUpdateQuantity:L[9]||(L[9]=({id:W,value:ke})=>ce.updateQuantity(W,ke)),onRemoveItem:q,onEditItem:F,"is-processing":$.value},null,8,["items","is-processing"])])]),t("div",Wg,[l(s).screen.gt.sm?(d(),w("div",Yg,[t("div",Qg,r(U.items.length)+" item(s) ",1),U.notes?(d(),w("div",Jg,[L[22]||(L[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Gg,[e(Se,{text:U.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",Xg,[t("div",Zg,[t("div",null,"Return #: "+r(U.code),1),t("div",null,"Order #: "+r(l(u).props.data.purchase_order.code),1),t("div",null,r(l(ve)(U.datetime)),1)])])):k("",!0),t("div",e1,[t("div",t1,[L[24]||(L[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",a1,[L[23]||(L[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(H)(z.value)),1)])])])]),t("div",l1,[t("div",o1,[e(E,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:L[10]||(L[10]=W=>me()),disable:!ce.$can("admin.purchase-order-return.close")||$.value||U.items.length===0||U.status!=="draft",loading:$.value},null,8,["disable","loading"])]),t("div",n1,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[14]||(L[14]=X(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[ae((d(),O(oe,{clickable:"",onClick:L[11]||(L[11]=X(W=>I.value=!0,["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>L[25]||(L[25]=[v("Edit Rincian")])),_:1})]),_:1})),[[ne],[fe]]),ae((d(),O(oe,{clickable:"",onClick:L[12]||(L[12]=X(W=>Oe(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(B,null,{default:a(()=>L[26]||(L[26]=[v("Pratinjau")])),_:1})]),_:1})),[[ne],[fe]]),ae((d(),O(oe,{clickable:"",onClick:L[13]||(L[13]=X(W=>ie(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(B,{class:"text-negative"},{default:a(()=>L[27]||(L[27]=[v(" Batalkan ")])),_:1})]),_:1})),[[ne],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(jo,{ref_key:"itemEditorRef",ref:n,modelValue:K.value,"onUpdate:modelValue":L[15]||(L[15]=W=>K.value=W),item:D.value,onSave:L[16]||(L[16]=W=>N()),"is-processing":$.value},null,8,["modelValue","item","is-processing"]),e(xa,{modelValue:R.value,"onUpdate:modelValue":L[17]||(L[17]=W=>R.value=W),onProductSelected:x},null,8,["modelValue"]),e(Bo,{modelValue:I.value,"onUpdate:modelValue":L[18]||(L[18]=W=>I.value=W),data:U,onSave:L[19]||(L[19]=W=>le()),"is-processing":$.value},null,8,["modelValue","data","is-processing"]),e(Ao,{modelValue:b.value,"onUpdate:modelValue":L[20]||(L[20]=W=>b.value=W)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},r1=Object.freeze(Object.defineProperty({__proto__:null,default:s1},Symbol.toStringTag,{value:"Module"})),i1={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},d1={class:"q-pa-xs"},u1={class:"full-width row flex-center text-grey-8 q-gutter-sm"},m1={key:0},c1={key:1},p1={key:2},f1={key:3},g1={key:0},b1={key:0},v1={key:1},_1={class:"flex justify-end"},Ol="Retur Pembelian",y1={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=Lt(),m=Kt(),g=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...It(c-2,c-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Ut()],y=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES)],S=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES)],V=je({search:"",year:c,month:m,status:"all",refund_status:"all",...Le()}),$=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),R=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{M()});const K=P=>{if(P.status=="draft"){I(P);return}D(P)},I=P=>{ee.get(route("admin.purchase-order-return.edit",P.id))},D=P=>{ee.get(route("admin.purchase-order-return.detail",P.id))},U=P=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ie.post(route("admin.purchase-order-return.cancel",{id:P.id}),{id:P.id}).then(x=>{const A=x.data.data,F=o.value.findIndex(q=>q.id===A.id);if(F===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[F].status="canceled",s.notify({message:x.data.message,position:"bottom"})}).catch(x=>{var F,q;const A=((q=(F=x.response)==null?void 0:F.data)==null?void 0:q.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:A,color:"warning",position:"bottom"}),console.error(x)})})},z=P=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.purchase-order-return.delete",P.id),fetchItemsCallback:M,loading:i}),M=(P=null)=>{Ke({pagination:$,filter:V,props:P,rows:o,url:route("admin.purchase-order-return.data"),loading:i,tableRef:n})},h=()=>{M()},j=Z(()=>s.screen.gt.sm?R:R.filter(P=>P.name==="code"||P.name==="action"));return Ne(()=>V.year,P=>{P===null&&(V.month=null)}),(P,x)=>{const A=G("i-head"),F=G("authenticated-layout");return d(),w(Y,null,[e(A,{title:Ol}),e(F,null,ze({title:a(()=>[v(r(Ol))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=q=>u.value=!u.value)},null,8,["icon"]),P.$can("admin.purchase-order-return.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=q=>l(ee).get(P.route("admin.purchase-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",d1,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:$.value,"onUpdate:pagination":x[10]||(x[10]=q=>$.value=q),filter:V.search,loading:i.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:M,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:N,filter:le})=>[t("div",u1,[t("span",null,r(N)+" "+r(le?" with term "+le:""),1)])]),body:a(q=>[e(Re,{props:q,class:"cursor-pointer",onClick:X(N=>K(q.row),["prevent"])},{default:a(()=>[e(Q,{key:"code",props:q,class:"wrap-column"},{default:a(()=>{var N,le,me;return[t("div",null,[e(C,{name:"tag"}),v(" "+r(q.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(q.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[q.row.cashier?(d(),w("div",m1,[e(C,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((N=q.row.cashier)==null?void 0:N.username),1)])):k("",!0),q.row.cashier_session?(d(),w("div",c1,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((me=(le=q.row.cashier_session)==null?void 0:le.cashier_terminal)==null?void 0:me.name),1)])):k("",!0),q.row.supplier?(d(),w("div",p1,[e(C,{name:"person",class:"inline-icon"}),e(ka,{href:P.route("admin.supplier.detail",{id:q.row.supplier.id}),onClick:x[7]||(x[7]=X(()=>{},["stop"]))},{default:a(()=>[v(" "+r(q.row.supplier.code)+" - "+r(q.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(l(H)(q.row.grand_total)),1),q.row.notes?(d(),w("div",f1,[e(C,{name:"notes"}),v(" "+r(q.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Ft,{status:q.row.status,statuses:P.$CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Ft,{status:q.row.refund_status,statuses:P.$CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"red",partially_refunded:"orange",fully_refunded:"green",no_refund:"black"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Q,{key:"supplier_id",props:q},{default:a(()=>[q.row.supplier?(d(),w("div",g1,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(q.row.supplier_code)+" - "+r(q.row.supplier_name),1)]),q.row.supplier_phone?(d(),w("div",b1,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(q.row.supplier_phone),1)])):k("",!0),q.row.supplier_address?(d(),w("div",v1,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(q.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"total",props:q},{default:a(()=>[v(r(l(H)(q.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:q},{default:a(()=>[e(Se,{text:q.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:q,onClick:x[9]||(x[9]=X(()=>{},["stop"]))},{default:a(()=>[t("div",_1,[P.$can("admin.purchase-order-return.detail")||P.$can("admin.purchase-order-return.edit")||P.$can("admin.purchase-order-return.cancel")||P.$can("admin.purchase-order-return.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[8]||(x[8]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[q.row.status!="draft"&&P.$can("admin.purchase-order-return.detail")?ae((d(),O(oe,{key:0,onClick:X(N=>D(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(B,null,{default:a(()=>x[11]||(x[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),q.row.status=="draft"&&P.$can("admin.purchase-order-return.edit")?ae((d(),O(oe,{key:1,onClick:X(N=>I(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>x[12]||(x[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),q.row.status=="draft"&&P.$can("admin.purchase-order-return.cancel")?ae((d(),O(oe,{key:2,onClick:X(N=>U(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(B,null,{default:a(()=>x[13]||(x[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),e(Pe),P.$can("admin.purchase-order-return.delete")?ae((d(),O(oe,{key:3,onClick:X(N=>z(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>x[14]||(x[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",i1,[e(de,{modelValue:V.year,"onUpdate:modelValue":[x[2]||(x[2]=q=>V.year=q),h],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),V.year!="all"?(d(),O(de,{key:0,modelValue:V.month,"onUpdate:modelValue":[x[3]||(x[3]=q=>V.month=q),h],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:V.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:V.status,"onUpdate:modelValue":[x[4]||(x[4]=q=>V.status=q),h],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:V.refund_status,"onUpdate:modelValue":[x[5]||(x[5]=q=>V.refund_status=q),h],options:S,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:V.search,"onUpdate:modelValue":x[6]||(x[6]=q=>V.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},k1=Object.freeze(Object.defineProperty({__proto__:null,default:y1},Symbol.toStringTag,{value:"Module"})),w1={key:0,class:"text-center q-mb-md text-grey-8"},h1={class:"text-subtitle2 text-weight-medium"},$1={class:"text-h5 text-center text-primary q-pb-md"},x1={class:"q-mb-md flex flex-center"},S1={key:1},V1={class:"col-6"},q1={class:"col-6"},C1={class:"row"},T1={class:"text-center q-mt-md"},P1={key:0,class:"text-h6 text-negative text-weight-bold"},R1={key:1,class:"text-h6 text-green-8 text-weight-bold"},O1={key:2,class:"text-h6 text-positive text-weight-bold"},I1={key:2},U1={class:"text-h6 text-negative text-center"},D1={key:3},j1={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=ge(),n=T(!1),f=T("payment"),b=T(new Date),c=T(null),m=je([]),g=Z(()=>m.every(j=>j.id&&typeof j.amount=="number"&&j.amount>0)),_=Z(()=>i.props.accounts.map(j=>({label:j.name,value:j.id}))),y=Z(()=>m.reduce((j,P)=>j+(P.amount||0),0)),S=Z(()=>u.total-y.value),V=Z(()=>{if(!u.supplier)return!0;const j=m.find(x=>x.id==="wallet");return(j?j.amount:0)<=u.supplier.balance}),$=new Date,R=ut.addToDate(new Date,{days:30}),K=Z(()=>[j=>!!j||"Tanggal jatuh tempo harus diisi",j=>ut.isBetweenDates(j,$,R,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),I=Z(()=>{if(f.value==="debt")return!!u.supplier&&K.value.every(A=>A(b.value)===!0);const j=m.some(A=>(A.amount||0)>0),P=m.every(A=>(A.amount||0)>=0),x=S.value<=0;return g.value&&j&&P&&x}),D=()=>{m.length<3&&m.push({id:null,amount:0})},U=j=>{if(m.length>1){const P=m.findIndex(x=>x.id===j);P!==-1&&m.splice(P,1)}},z=j=>{f.value=j,b.value=new Date,m.splice(0,m.length),j==="payment"&&_.value.length>0&&(m.splice(0,m.length,{id:_.value[0].value,amount:u.total}),mt(()=>{c.value&&c.value.length>0&&(c.value[0].focus(),c.value[0].select())}))},M=()=>{if(!I.value)return;n.value=!0;let j={total:u.total,is_debt:f.value==="debt"};if(f.value==="debt")j.due_date=ut.formatDate(b.value,"YYYY-MM-DD"),j.payments=[];else{const P=y.value,x=P>u.total?P-u.total:0,A=S.value>0?S.value:0;j.payments=m,j.remaining_debt=A,j.change=x}o("accepted",j),n.value=!1},h=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}z("payment")};return(j,P)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":P[3]||(P[3]=x=>j.$emit("update:modelValue",x)),onBeforeShow:h},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[p.supplier?(d(),w("div",w1,[t("div",h1,[v(" Nama: "+r(p.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(l(H)(p.supplier.balance)),1)])])):k("",!0),t("div",$1," Total: Rp. "+r(l(H)(p.total)),1),t("div",x1,[e(l(Qt),{modelValue:f.value,"onUpdate:modelValue":[P[0]||(P[0]=x=>f.value=x),z],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="payment"?(d(),w("div",S1,[(d(!0),w(Y,null,De(m,(x,A)=>(d(),w("div",{key:A,class:"row q-col-gutter-sm q-mb-sm"},[t("div",V1,[e(l(de),{modelValue:x.id,"onUpdate:modelValue":F=>x.id=F,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[F=>!!F||"Akun harus dipilih"],error:!x.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",q1,[e(Me,{modelValue:x.amount,"onUpdate:modelValue":F=>x.amount=F,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!V.value,"error-message":V.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:A===0?"firstPaymentInputRef":null},ze({_:2},[m.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:F=>U(A)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",C1,[e(E,{disable:!(m.length<3&&S.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:D,size:"sm"},null,8,["disable"])]),t("div",T1,[S.value>0?(d(),w("div",P1," Sisa Tagihan: Rp. "+r(l(H)(S.value)),1)):S.value<0?(d(),w("div",R1," Kembalian: Rp. "+r(l(H)(Math.abs(S.value))),1)):(d(),w("div",O1," Tagihan Terbayar "))])])):f.value==="debt"&&p.supplier?(d(),w("div",I1,[e(pa,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=x=>b.value=x),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l($),"max-date":l(R),rules:K.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",U1," Total Utang: Rp. "+r(l(H)(p.total)),1)])):f.value==="debt"&&!p.supplier?(d(),w("div",D1,P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=x=>j.$emit("update:modelValue",!1))}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:M,disable:n.value||!I.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},E1=Object.freeze(Object.defineProperty({__proto__:null,default:j1},Symbol.toStringTag,{value:"Module"})),A1={key:0},B1={style:{float:"right"}},M1={key:1},N1={style:{float:"right"}},z1={key:2},F1={style:{float:"right"}},L1={key:3},K1={style:{float:"right"}},H1={style:{float:"right"}},W1={class:"q-gutter-sm"},Y1={class:"q-my-md"},Q1={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const u=T(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),w("tr",A1,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",B1,r(l(H)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),w("tr",M1,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",N1,r(l(H)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),w("tr",z1,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",F1,r(l(H)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),w("tr",L1,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",K1,r(l(H)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",H1,r(l(H)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",W1,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Y1,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},J1=_t(Q1,[["__scopeId","data-v-f0591c00"]]),G1=Object.freeze(Object.defineProperty({__proto__:null,default:J1},Symbol.toStringTag,{value:"Module"})),X1={class:"column"},Z1={class:"bg-grey-2 q-pa-xs"},eb={class:"text-subtitle1 text-bold text-grey-10"},tb={class:"col-12 col-sm-6"},ab={class:"full-width"},lb={key:0},ob={key:1},nb={key:0},sb={key:1},rb={class:"col-12 col-sm-6",align:"left"},ib={class:"full-width"},db={key:0};const ub={key:2},mb={class:"full-width",style:{"border-collapse":"collapse"}},cb={class:"q-pa-sm"},pb={class:"text-right q-pa-sm"},fb={class:"text-right q-pa-sm"},gb={class:"text-right q-pa-sm"},bb={key:0},vb={class:"col-12 col-sm-6"},_b={class:"text-body2 text-grey-7 text-italic"},yb={class:"col-12 col-sm-6"},kb={class:"row justify-end q-gutter-y-xs"},wb={class:"col-12 row justify-between"},hb={class:"text-subtitle2 text-bold"},$b={key:0,class:"row justify-end q-gutter-y-xs"},xb={class:"col-12 row justify-between"},Sb={class:"text-subtitle2 text-bold"},Vb={key:1,class:"row justify-end q-gutter-y-xs"},qb={class:"col-12 row justify-between"},Cb={class:"text-subtitle2 text-bold"},Tb={key:2,class:"row justify-end q-gutter-y-xs"},Pb={class:"col-12 row justify-between"},Rb={class:"text-subtitle2 text-bold"},Mo={__name:"InvoiceTab",props:{data:Object},setup(p){const s=p;return(u,o)=>{const i=G("i-link");return d(),w("div",X1,[e(te,{class:"q-pa-none"},{default:a(()=>[t("div",Z1,[t("div",eb," Pembelian #"+r(s.data.code),1)])]),_:1}),e(Pe),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",tb,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Supplier",-1)),t("table",ab,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),w("div",lb,[e(C,{class:"inline-icon",name:"person"}),e(i,{href:u.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>[v(r(s.data.supplier_name),1)]),_:1},8,["href"])])):(d(),w("div",ob,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(d(),w("tr",nb,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),e(ea,{phone:s.data.supplier_phone},null,8,["phone"])])])):k("",!0),s.data.supplier_address?(d(),w("tr",sb,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),(d(),w(Y,{key:0},[v(r(s.data.supplier_address),1)],64))])])):k("",!0)])])]),t("div",rb,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",ib,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.$CONSTANTS.PURCHASE_ORDER_STATUSES[s.data.status]),1)]),s.data.status=="closed"?(d(),w("tr",db,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)])):k("",!0),k("",!0),s.data.due_date?(d(),w("tr",ub,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(da)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("table",mb,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(Y,null,De(s.data.details,n=>(d(),w("tr",{key:n.id},[t("td",cb,[e(i,{href:u.route("admin.product.detail",{id:n.product_id})},{default:a(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",pb,r(n.quantity),1),t("td",null,r(n.product_uom),1),t("td",fb,r(l(H)(n.cost)),1),t("td",gb,r(l(H)(n.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),w("tr",bb,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(te,{class:"row",align:"left"},{default:a(()=>[t("div",vb,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",_b,r(s.data.notes?s.data.notes:"-"),1)]),t("div",yb,[t("div",kb,[t("div",wb,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",hb,r(l(H)(s.data.grand_total)),1)])]),s.data.status=="closed"&&s.data.total_return?(d(),w("div",$b,[t("div",xb,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",Sb,r(l(H)(s.data.total_return)),1)])])):k("",!0),s.data.status=="closed"&&s.data.total_paid?(d(),w("div",Vb,[t("div",qb,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Dibayar (Rp)",-1)),t("div",Cb,r(l(H)(s.data.total_paid)),1)])])):k("",!0),s.data.status=="closed"&&s.data.balance!=0?(d(),w("div",Tb,[t("div",Pb,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",Rb,r(l($t)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},Ob=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),Ib={key:0,class:"text-center q-mb-md text-grey-8"},Ub={class:"text-subtitle2 text-weight-medium"},Db={class:"text-h5 text-center text-primary q-pb-md"},jb={class:"text-center q-mt-md"},Eb={key:0,class:"text-h6 text-negative text-weight-bold"},Ab={key:1,class:"text-h6 text-green-8 text-weight-bold"},Bb={key:2,class:"text-h6 text-positive text-weight-bold"},No={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=ge(),n=T(!1),f=T({method:null,amount:u.total,notes:null}),b=i.props.data.supplier,c=Z(()=>[...i.props.accounts.map($=>({label:$.type=="bank"?$.name+" - "+$.number:$.name,value:$.id}))]),m=Z(()=>u.total-(f.value.amount||0)),g=Z(()=>f.value.method&&typeof f.value.amount=="number"&&f.value.amount>0),_=Z(()=>f.value.method?(f.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),y=Z(()=>g.value&&_.value===null),S=()=>{if(!y.value)return;n.value=!0;const $={total_paid:f.value.amount,payments:[{id:f.value.method,amount:f.value.amount}],notes:f.value.notes,remaining_debt:Math.max(0,u.total-(f.value.amount||0))};o("accepted",$),n.value=!1},V=()=>{f.value.amount=u.total,f.value.method=null,f.value.notes=null};return($,R)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":R[4]||(R[4]=K=>$.$emit("update:modelValue",K)),onBeforeShow:V},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>R[5]||(R[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",Ib,[t("div",Ub,[v(r(l(b).name)+" ",1),R[6]||(R[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(l(H)(l(b).balance)),1)])])):k("",!0),t("div",Db," Total: Rp. "+r(l(H)(p.total)),1),e(l(de),{modelValue:f.value.method,"onUpdate:modelValue":R[0]||(R[0]=K=>f.value.method=K),options:c.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value,rules:[K=>!!K||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Me,{modelValue:f.value.amount,"onUpdate:modelValue":R[1]||(R[1]=K=>f.value.amount=K),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":_.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:f.value.notes,"onUpdate:modelValue":R[2]||(R[2]=K=>f.value.notes=K),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",jb,[m.value>0?(d(),w("div",Eb," Sisa Tagihan: Rp. "+r(l(H)(m.value)),1)):m.value<0?(d(),w("div",Ab," Kembalian: Rp. "+r(l(H)(Math.abs(m.value))),1)):(d(),w("div",Bb," Tagihan Terbayar "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:R[3]||(R[3]=K=>$.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:S,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Mb=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"})),Nb={class:"column"},zb={class:"row"},Fb={class:"full-width",style:{"border-collapse":"collapse"}},Lb={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Kb={class:"row items-center q-gutter-x-sm"},Hb={class:"text-weight-bold"},Wb={class:"row items-center q-gutter-x-sm q-mt-xs"},Yb={class:"text-caption text-grey-6"},Qb={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Jb={class:"q-mt-xs"},Gb={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Xb={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Zb={key:0},ev={class:"text-right q-pa-sm"},zo={__name:"PaymentTab",props:{data:Object},setup(p){const s=p,u=$e(),o=T(!1),i=()=>{o.value=!0},n=async b=>{const c={order_id:s.data.id,payments:b.payments,notes:b.notes};u.loading.show({message:"Memproses pembayaran..."});try{const m=await Ie.post(route("admin.purchase-order.add-payment"),c);u.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(m){let g="Gagal memproses pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}},f=b=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Ie.post(route("admin.purchase-order.delete-payment",{id:b.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(c){let m="Gagal menghapus pembayaran.";c.response&&c.response.data&&c.response.data.message?m=c.response.data.message:c.message&&(m=c.message),u.notify({message:m,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(b,c)=>{const m=G("i-link");return d(),w(Y,null,[t("div",Nb,[e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("div",zb,[b.$can("admin.purchase-order.add-payment")?(d(),O(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:c[0]||(c[0]=X(g=>i(),["stop"]))})):k("",!0)]),t("table",Fb,[c[5]||(c[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(Y,null,De(s.data.payments,g=>(d(),w("tr",{key:g.id},[t("td",Lb,[t("div",Kb,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",Hb,r(g.code),1)]),t("div",Wb,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Yb,r(l(ve)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),w("div",Qb,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),e(m,{class:"text-caption",href:b.route("admin.finance-account.detail",{id:g.account.id})},{default:a(()=>[v(r(g.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",Jb,[e(it,{label:b.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(it,{label:g.amount<0?"Pembayaran":"Refund",color:g.amount<0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",Gb,r(l($t)(g.amount)),1),t("td",Xb,[b.$can("admin.purchase-order.delete-payment")&&s.data.supplier_id&&g.amount<0?(d(),O(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",Zb,c[2]||(c[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[c[3]||(c[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",ev,r(l($t)(s.data.balance)),1),c[4]||(c[4]=t("td",null,null,-1))])])])]),_:1})]),e(No,{modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=g=>o.value=g),total:b.remainingPayment,customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},tv=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),av={class:"q-gutter-sm"},lv={class:"col col-lg-6 q-pa-xs",align:"center"},Il="Rincian Pembelian",ov={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),u=ge(),o=u.props.data,i=T(s.get("preview")||!1),f=T(s.get("tab")||"invoice"),b=()=>{window.print()};return(c,m)=>{const g=G("i-head"),_=G("authenticated-layout");return d(),w(Y,null,[e(g,{title:Il}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Il))])]),"left-button":a(()=>[t("div",av,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>i.value?l(ee).get(c.route("admin.purchase-order.edit",l(u).props.data.id)):c.$goBack())})])]),"right-button":a(()=>[e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>b())}),i.value?k("",!0):(d(),O(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[2]||(m[2]=y=>l(ee).get(c.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",lv,[e(pe,{square:"",flat:"",bordered:"",class:xe(["full-width",i.value?"draft-label":l(u).props.data.payment_status=="fully_paid"?"paid-label":"unpaid-label"]),style:{"max-width":"1024px"}},{default:a(()=>[e(Tt,{modelValue:f.value,"onUpdate:modelValue":m[3]||(m[3]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"invoice",label:"Rincian"}),i.value?k("",!0):(d(),O(dt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Pt,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),animated:""},{default:a(()=>[e(nt,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(Mo,{data:l(o)},null,8,["data"])]),_:1}),e(nt,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(zo,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])])]),_:1})]),_:1})],64)}}},nv=Object.freeze(Object.defineProperty({__proto__:null,default:ov},Symbol.toStringTag,{value:"Module"})),sv={class:"text-weight-medium wrap-column"},rv={class:"text-caption text-grey-6 elipsis"},iv={class:"column items-end"},dv={class:"text-caption text-grey-6 text-italic"},Fo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=$e(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),O(Ee,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:l(u)})},{header:a(f=>[e(Re,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(Y,null,De(f.cols,b=>(d(),O(oa,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Re,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left"},{default:a(()=>[t("div",sv,r(f.row.product_name),1),t("div",rv,r(f.row.product_barcode),1),f.row.notes?(d(),O(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal",props:f,class:"text-right"},{default:a(()=>[t("div",iv,[t("div",null,r(l(H)(f.row.subtotal_cost)),1),t("div",dv,r(l(H)(f.row.quantity))+" x Rp. "+r(l(H)(f.row.cost)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},uv=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),mv={key:0,class:"text-center q-mb-md text-grey-8"},cv={class:"text-subtitle2 text-weight-medium"},pv={class:"text-h5 text-center text-primary q-pb-md"},fv={class:"q-mb-md flex flex-center"},gv={key:1},bv={class:"col-6"},vv={class:"col-6"},_v={class:"row"},yv={class:"text-center q-mt-md"},kv={key:0,class:"text-h6 text-negative text-weight-bold"},wv={key:1,class:"text-h6 text-green-8 text-weight-bold"},hv={key:2,class:"text-h6 text-positive text-weight-bold"},$v={key:2},xv={class:"text-h6 text-negative text-center"},Sv={key:3},Lo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=ge(),n=T(!1),f=T("payment"),b=T(new Date),c=T(null),m=je([]),g=Z(()=>m.every(j=>j.id&&typeof j.amount=="number"&&j.amount>0)),_=Z(()=>i.props.accounts.map(j=>({label:j.name,value:j.id}))),y=Z(()=>m.reduce((j,P)=>j+(P.amount||0),0)),S=Z(()=>u.total-y.value),V=Z(()=>{if(!u.supplier)return!0;const j=m.find(P=>P.id==="wallet");return j?j.amount<=u.supplier.balance:!0}),$=new Date,R=ut.addToDate(new Date,{days:30}),K=Z(()=>[j=>!!j||"Tanggal jatuh tempo harus diisi",j=>ut.isBetweenDates(j,$,R,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),I=Z(()=>{if(f.value==="debt")return!!u.supplier&&K.value.every(A=>A(b.value)===!0);const j=m.some(A=>(A.amount||0)>0),P=m.every(A=>(A.amount||0)>=0),x=S.value<=0;return g.value&&j&&P&&x}),D=()=>{m.length<3&&m.push({id:null,amount:0})},U=j=>{if(m.length>1){const P=m.findIndex(x=>x.id===j);P!==-1&&m.splice(P,1)}},z=j=>{f.value=j,b.value=new Date,m.splice(0,m.length),j==="payment"&&_.value.length>0&&(m.splice(0,m.length,{id:_.value[0].value,amount:u.total}),mt(()=>{c.value&&c.value.length>0&&(c.value[0].focus(),c.value[0].select())}))},M=()=>{if(!I.value)return;n.value=!0;let j={total:u.total,is_debt:f.value==="debt"};if(f.value==="debt")j.due_date=ut.formatDate(b.value,"YYYY-MM-DD"),j.payments=[];else{const P=y.value,x=P>u.total?P-u.total:0,A=S.value>0?S.value:0;j.payments=m,j.remaining_debt=A,j.change=x}o("accepted",j),n.value=!1},h=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}z("payment")};return(j,P)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":P[3]||(P[3]=x=>j.$emit("update:modelValue",x)),onBeforeShow:h},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[p.supplier?(d(),w("div",mv,[t("div",cv,[v(" Nama: "+r(p.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(l(H)(p.supplier.balance)),1)])])):k("",!0),t("div",pv," Total: Rp. "+r(l(H)(p.total)),1),t("div",fv,[e(l(Qt),{modelValue:f.value,"onUpdate:modelValue":[P[0]||(P[0]=x=>f.value=x),z],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="payment"?(d(),w("div",gv,[(d(!0),w(Y,null,De(m,(x,A)=>(d(),w("div",{key:A,class:"row q-col-gutter-sm q-mb-sm"},[t("div",bv,[e(l(de),{modelValue:x.id,"onUpdate:modelValue":F=>x.id=F,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[F=>!!F||"Akun harus dipilih"],error:!x.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",vv,[e(Me,{modelValue:x.amount,"onUpdate:modelValue":F=>x.amount=F,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!V.value,"error-message":V.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:A===0?"firstPaymentInputRef":null},ze({_:2},[m.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:F=>U(A)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",_v,[e(E,{disable:!(m.length<3&&S.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:D,size:"sm"},null,8,["disable"])]),t("div",yv,[S.value>0?(d(),w("div",kv," Sisa Tagihan: Rp. "+r(l(H)(S.value)),1)):S.value<0?(d(),w("div",wv," Kembalian: Rp. "+r(l(H)(Math.abs(S.value))),1)):(d(),w("div",hv," Tagihan Terbayar "))])])):f.value==="debt"&&p.supplier?(d(),w("div",$v,[e(pa,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=x=>b.value=x),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l($),"max-date":l(R),rules:K.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",xv," Total Utang: Rp. "+r(l(H)(p.total)),1)])):f.value==="debt"&&!p.supplier?(d(),w("div",Sv,P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=x=>j.$emit("update:modelValue",!1))}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:M,disable:n.value||!I.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Vv=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),qv={class:"row items-center no-wrap"},Cv={class:"col-auto"},Ko={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=Z(()=>o.item.quantity*o.item.cost),b=_=>{_.stopPropagation(),_.preventDefault()},c=_=>{o.modelValue&&(_.key==="Enter"?(n(),b(_)):_.key==="Escape"&&(i("update:modelValue",!1),b(_)))};he(()=>{window.addEventListener("keydown",c)}),wt(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item});const g=()=>{};return(_,y)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":y[6]||(y[6]=S=>_.$emit("update:modelValue",S)),onBeforeShow:g},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",qv,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Cv,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=S=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(se,{modelValue:p.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=S=>p.item.product_name=S),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=S=>p.item.quantity=S),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.cost,"onUpdate:modelValue":y[3]||(y[3]=S=>p.item.cost=S),label:"Modal / Harga Beli","hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=S=>f.value=S),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:p.item.notes,"onUpdate:modelValue":y[5]||(y[5]=S=>p.item.notes=S),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Tv=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),Pv={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(u,o)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[ae(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ho=_t(Pv,[["__scopeId","data-v-a7905738"]]),Rv=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),Ov={class:"row items-center no-wrap"},Iv={class:"col text-subtite text-bold text-grey-8"},Uv={class:"col-auto"},Wo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(i("update:modelValue",!1),f(m)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",Ov,[t("div",Iv," Edit "+r(p.data.code),1),t("div",Uv,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(Ht,{modelValue:p.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:p.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Dv=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),jv={key:0},Ev={style:{float:"right"}},Av={key:1},Bv={style:{float:"right"}},Mv={key:2},Nv={style:{float:"right"}},zv={key:3},Fv={style:{float:"right"}},Lv={style:{float:"right"}},Kv={class:"q-gutter-sm"},Hv={class:"q-my-md"},Wv={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const u=T(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),w("tr",jv,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Ev,r(l(H)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),w("tr",Av,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",Bv,r(l(H)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),w("tr",Mv,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",Nv,r(l(H)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),w("tr",zv,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Fv,r(l(H)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Lv,r(l(H)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",Kv,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Hv,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Yo=_t(Wv,[["__scopeId","data-v-31d340fd"]]),Yv=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),Qv={class:"q-gutter-sm"},Jv={class:"row items-center"},Gv={class:"text-weight-bold"},Xv={class:"row q-col-gutter-none full-width"},Zv={class:"col-sm-6 col-12 col"},e_={class:"row full-width"},t_={class:"text-grey q-mt-xs q-ml-sm"},a_={class:"col-sm-6 col-12"},l_={class:"row q-ml-sm items-end"},o_={class:"row col grow"},n_={class:"col-12 q-pa-sm column"},s_={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},r_={key:0,class:"col"},i_={class:"text-caption text-grey-6 q-mt-xs"},d_={key:0,class:"text-caption text-grey-8 q-mt-xs"},u_={class:"text-italic"},m_={key:1,class:"col"},c_={class:"q-pa-sm q-pb-none text-grey-8"},p_={class:"col"},f_={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},g_={class:"text-h4 text-weight-bold"},b_={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},v_={class:"col q-py-sm"},__={class:"q-py-sm"},y_={__name:"Editor",setup(p){const s=$e(),u=ge(),o=T(!0),i=T(null),n=T(null),f=T(null),b=T(!1),c=T(null),m=T(null),{isFullscreen:g,toggleFullscreen:_}=$a(m),y=u.props.data.code,S=T(u.props.data.supplier),V=T(null),$=T(""),R=T(!1),K=T(!1),I=T(!1),D=T(!1),U=T(!1),z=T(!1),M=T(null),h=je({id:u.props.data.id,code:u.props.data.code,supplier_id:u.props.data.supplier_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),j=Z(()=>h.items.reduce((re,W)=>re+W.cost*W.quantity,0)),P=()=>{var re;_(),g.value||(re=c==null?void 0:c.value)==null||re.hideDrawer()},x=re=>isNaN(re)||re<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,A=re=>isNaN(re)||re<0?(bt("Harga tidak valid.","top"),!1):!0,F=re=>!re||re.length==0?(bt("Barcode tidak valid.","top"),!1):!0,q=re=>{var W;(W=$.value)!=null&&W.endsWith("*")?$.value+=re.name:$.value=re.name},N=async()=>{if(R.value)return;const re=$.value.trim();if(re.length===0){I.value=!0;return}const W=re.split("*");let ke=1,ue="",J=null;if(W.length===1)ue=W[0];else if(W.length<=3)ke=parseInt(W[0]),ue=W[1],W.length===3&&(J=parseFloat(W[2]));else{bt("Input tidak valid.","top");return}if(ue.length===0){I.value=!0;return}!F(ue)&&!x(ke)&&!A(J)||(R.value=!0,await Ie.post(route("admin.purchase-order.add-item"),{order_id:h.id,product_code:ue,qty:ke,cost:J,merge:o.value}).then(qe=>{const Be=qe.data.data.item;let we=-1;qe.data.data.mergeItem&&(we=h.items.findIndex(ht=>ht.id===Be.id)),we===-1?h.items.push(Be):h.items[we]=Be,$.value="",J!==null&&J!==parseFloat(Be.cost)&&bt("Harga tidak dapat diubah!","top")}).catch(qe=>{var Be,we;ft((we=(Be=qe.response)==null?void 0:Be.data)==null?void 0:we.message,"top"),console.error("Gagal mengambil data produk:",qe)}),R.value=!1,mt(()=>{var qe;(qe=i.value)==null||qe.focus()}))},le=re=>{M.value=Object.create(re),D.value=!0},me=re=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${re.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{R.value=!0,Ie.post(route("admin.purchase-order.remove-item"),{id:re.id}).then(()=>{const W=h.items.findIndex(ke=>ke.id===re.id);W!==-1&&(h.items.splice(W,1)[0],gt("Item telah dihapus","top"))}).catch(W=>{var ke,ue;ft(((ue=(ke=W==null?void 0:W.response)==null?void 0:ke.data)==null?void 0:ue.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(W)}).finally(()=>{R.value=!1})})},ie=()=>{R.value=!0;const re=n.value.getCurrentItem(),W={id:re.id,qty:re.quantity,cost:re.cost};re.notes&&(W.notes=re.notes),Ie.post(route("admin.purchase-order.update-item"),W).then(ke=>{const ue=ke.data.data,J=h.items.findIndex(qe=>qe.id===ue.id);J!==-1&&(h.items[J]=ue,gt("Item telah diperbarui","top"))}).catch(ke=>{var ue,J;ft(((J=(ue=ke==null?void 0:ke.response)==null?void 0:ue.data)==null?void 0:J.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ke)}).finally(()=>{R.value=!1})};he(()=>{const re=W=>{var ke;W.key==="F1"?(W.preventDefault(),b.value=!0):W.key==="F2"?(W.preventDefault(),f.value.focus()):W.key==="F3"?(W.preventDefault(),(ke=i.value)==null||ke.focus()):W.key==="F4"?(W.preventDefault(),o.value=!o.value):W.key==="F10"?(W.preventDefault(),K.value=!0):W.key==="F11"?(W.preventDefault(),P()):(W.key==="F5"||W.key==="F6"||W.key==="F7"||W.key==="F12")&&W.preventDefault()};document.addEventListener("keydown",re),wt(()=>{document.removeEventListener("keydown",re)}),mt(()=>{var W;(W=c==null?void 0:c.value)==null||W.hideDrawer()})});const Oe=async re=>{var W;S.value=re,h.supplier_id=re==null?void 0:re.id,await Xe(),re!=null&&re.id?(W=i.value)==null||W.focus():f.value.focus()},Xe=async()=>{R.value=!0;const re={id:h.id,supplier_id:h.supplier_id,datetime:aa(h.datetime),notes:h.notes};await Ie.post(route("admin.purchase-order.update"),re).then(W=>{const ke=W.data.data.id;h.supplier_id=ke.supplier_id}).catch(W=>{var ke,ue;ft(((ue=(ke=W==null?void 0:W.response)==null?void 0:ke.data)==null?void 0:ue.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(W)}).finally(()=>{R.value=!1})},ce=re=>{if(h.items.length===0){gt("Item masih kosong","top");return}const W={id:h.id,...re};R.value=!0,Ie.post(route("admin.purchase-order.close"),W).then(ke=>{gt("Transaksi selesai"),ee.visit(route("admin.purchase-order.detail",{id:h.id}))}).catch(ke=>{var ue,J;ft((J=(ue=ke.response)==null?void 0:ue.data)==null?void 0:J.message),console.error(ke)}).finally(()=>{R.value=!1})},L=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${h.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ie.post(route("admin.purchase-order.cancel",{id:h.id}),{id:h.id}).then(()=>{gt("Transaksi telah dibatalkan."),ee.visit(route("admin.purchase-order.detail",{id:h.id}))}).catch(re=>{var ke,ue;const W=((ue=(ke=re.response)==null?void 0:ke.data)==null?void 0:ue.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:W,color:"warning",position:"bottom"}),console.error(re)})})},ye=()=>{window.open(route("admin.purchase-order.detail",{id:h.id})+"?preview=1","_blank")};return(re,W)=>{const ke=G("i-head"),ue=G("authenticated-layout");return d(),w(Y,null,[e(ke,{title:l(y)},null,8,["title"]),e(ue,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[v(r(l(y)),1)]),"left-button":a(()=>[t("div",Qv,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:W[0]||(W[0]=J=>l(ee).get(re.route("admin.purchase-order.index")))})])]),"right-button":a(()=>[t("div",Jv,[l(s).screen.gt.sm?(d(),w(Y,{key:0},[t("div",Gv,r(l(u).props.auth.user.username),1),W[23]||(W[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ha)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:a(()=>[t("div",Xv,[t("div",Zv,[t("div",e_,[e(Eo,{ref_key:"supplierAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:S.value,"onUpdate:modelValue":W[2]||(W[2]=J=>S.value=J),label:"Pemasok",disable:R.value,onSupplierSelected:Oe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",t_," Saldo: "+r(S.value?"Rp. "+l(H)(S.value?S.value.balance:0):"Tidak tersedia"),1)])]),t("div",a_,[e(Sa,{ref_key:"userInputRef",ref:i,modelValue:$.value,"onUpdate:modelValue":W[3]||(W[3]=J=>$.value=J),onKeyup:W[4]||(W[4]=Jt(X(J=>N(),["prevent"]),["enter"])),onScanSuccess:W[5]||(W[5]=J=>N()),onSend:W[6]||(W[6]=J=>N()),onSearch:W[7]||(W[7]=J=>I.value=!0),loading:R.value,disable:R.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",l_,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":W[8]||(W[8]=J=>o.value=J),label:"Gabungkan item",disable:R.value},null,8,["modelValue","disable"])])])]),t("div",o_,[t("div",n_,[e(Fo,{items:h.items,onUpdateQuantity:W[9]||(W[9]=({id:J,value:qe})=>re.updateQuantity(J,qe)),onRemoveItem:me,onEditItem:le,"is-processing":R.value},null,8,["items","is-processing"])])]),t("div",s_,[l(s).screen.gt.sm?(d(),w("div",r_,[t("div",i_,r(h.items.length)+" item(s) ",1),h.notes?(d(),w("div",d_,[W[24]||(W[24]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",u_,[e(Se,{text:h.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",m_,[t("div",c_,[t("div",null,"#: "+r(h.code),1),t("div",null,r(l(ve)(h.datetime)),1)])])):k("",!0),t("div",p_,[t("div",f_,[W[26]||(W[26]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",g_,[W[25]||(W[25]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(H)(j.value)),1)])])])]),t("div",b_,[t("div",v_,[e(E,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:W[10]||(W[10]=J=>K.value=!0),disable:!re.$can("admin.purchase-order.close")||R.value||h.items.length===0||h.status!=="draft",loading:R.value},null,8,["disable","loading"])]),t("div",__,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:W[14]||(W[14]=X(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[ae((d(),O(oe,{clickable:"",onClick:W[11]||(W[11]=X(J=>U.value=!0,["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>W[27]||(W[27]=[v("Edit Rincian")])),_:1})]),_:1})),[[ne],[fe]]),ae((d(),O(oe,{clickable:"",onClick:W[12]||(W[12]=X(J=>ye(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(B,null,{default:a(()=>W[28]||(W[28]=[v("Pratinjau")])),_:1})]),_:1})),[[ne],[fe]]),ae((d(),O(oe,{clickable:"",onClick:W[13]||(W[13]=X(J=>L(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(B,{class:"text-negative"},{default:a(()=>W[29]||(W[29]=[v(" Batalkan ")])),_:1})]),_:1})),[[ne],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Ko,{ref_key:"itemEditorRef",ref:n,modelValue:D.value,"onUpdate:modelValue":W[15]||(W[15]=J=>D.value=J),item:M.value,onSave:W[16]||(W[16]=J=>ie()),"is-processing":R.value},null,8,["modelValue","item","is-processing"]),e(Lo,{modelValue:K.value,"onUpdate:modelValue":W[17]||(W[17]=J=>K.value=J),onAccepted:ce,form:h,supplier:S.value,total:j.value,accounts:l(u).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(xa,{modelValue:I.value,"onUpdate:modelValue":W[18]||(W[18]=J=>I.value=J),"show-cost":!0,onProductSelected:q},null,8,["modelValue"]),e(Wo,{modelValue:U.value,"onUpdate:modelValue":W[19]||(W[19]=J=>U.value=J),data:h,onSave:W[20]||(W[20]=J=>Xe()),"is-processing":R.value},null,8,["modelValue","data","is-processing"]),e(Ho,{modelValue:b.value,"onUpdate:modelValue":W[21]||(W[21]=J=>b.value=J)},null,8,["modelValue"]),e(Yo,{modelValue:z.value,"onUpdate:modelValue":W[22]||(W[22]=J=>z.value=J),order:h,supplier:S.value,total:j.value,payment:V.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},k_=Object.freeze(Object.defineProperty({__proto__:null,default:y_},Symbol.toStringTag,{value:"Module"})),Qo={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.PURCHASE_ORDER_STATUSES,u={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(d(),O(Ft,{status:p.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}},Jo={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,u={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(d(),O(Ft,{status:p.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}};const w_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},h_={class:"q-pa-xs"},$_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},x_={key:0},S_={key:1},V_={key:2},q_={key:0},C_={key:0},T_={key:1},P_={class:"flex justify-end"},Ul="Pembelian",R_={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=Lt(),m=Kt(),g=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...It(c-2,c-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Ut()],y=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],S=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],V=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],$=je({search:"",year:c,month:m,status:"all",payment_status:"all",delivery_status:"all",...Le()}),R=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),K=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp.)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{h()});const I=x=>{if(x.status=="draft"){D(x);return}U(x)},D=x=>{ee.get(route("admin.purchase-order.edit",x.id))},U=x=>{ee.get(route("admin.purchase-order.detail",x.id))},z=x=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${x.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ie.post(route("admin.purchase-order.cancel",{id:x.id}),{id:x.id}).then(A=>{const F=A.data.data,q=o.value.findIndex(N=>N.id===F.id);if(q===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[q].status="canceled",s.notify({message:A.data.message,position:"bottom"})}).catch(A=>{var q,N;const F=((N=(q=A.response)==null?void 0:q.data)==null?void 0:N.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:F,color:"warning",position:"bottom"}),console.error(A)})})},M=x=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${x.code}?`,url:route("admin.purchase-order.delete",x.id),fetchItemsCallback:h,loading:i}),h=(x=null)=>{Ke({pagination:R,filter:$,props:x,rows:o,url:route("admin.purchase-order.data"),loading:i,tableRef:n})},j=()=>{h()},P=Z(()=>s.screen.gt.sm?K:K.filter(x=>x.name==="id"||x.name==="action"));return Ne(()=>$.year,x=>{x===null&&($.month=null)}),(x,A)=>{const F=G("i-head"),q=G("authenticated-layout");return d(),w(Y,null,[e(F,{title:Ul}),e(q,null,ze({title:a(()=>[v(r(Ul))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=N=>u.value=!u.value)},null,8,["icon"]),x.$can("admin.purchase-order.edit")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:A[1]||(A[1]=N=>l(ee).get(x.route("admin.purchase-order.add")))})):k("",!0)]),default:a(()=>[t("div",h_,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:R.value,"onUpdate:pagination":A[11]||(A[11]=N=>R.value=N),filter:$.search,loading:i.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:h,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:N,message:le,filter:me})=>[t("div",$_,[t("span",null,r(le)+" "+r(me?" with term "+me:""),1)])]),body:a(N=>[e(Re,{props:N,class:"cursor-pointer",onClick:X(le=>I(N.row),["prevent"])},{default:a(()=>[e(Q,{key:"id",props:N,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{name:"tag"}),v(" "+r(N.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(N.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[N.row.supplier?(d(),w("div",x_,[e(C,{name:"person",class:"inline-icon"}),e(ka,{href:x.route("admin.supplier.detail",{id:N.row.supplier.id}),onClick:A[8]||(A[8]=X(()=>{},["stop"]))},{default:a(()=>[v(" "+r(N.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Total: Rp. "+r(l(H)(N.row.grand_total)),1),N.row.balance!=0?(d(),w("div",S_," Saldo: Rp. "+r(l($t)(N.row.balance)),1)):k("",!0),N.row.notes?(d(),w("div",V_,[e(C,{name:"notes"}),v(" "+r(N.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Qo,{status:N.row.status},null,8,["status"]),N.row.status=="closed"?(d(),w(Y,{key:0},[e(Jo,{status:N.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]),_:2},1032,["props"]),e(Q,{key:"supplier_id",props:N},{default:a(()=>[N.row.supplier?(d(),w("div",q_,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(N.row.supplier_name),1)]),N.row.supplier_phone?(d(),w("div",C_,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(N.row.supplier_phone),1)])):k("",!0),N.row.supplier_address?(d(),w("div",T_,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(N.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:N},{default:a(()=>[v(r(l(H)(N.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:N},{default:a(()=>[v(r(l($t)(N.row.balance)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:N},{default:a(()=>[e(Se,{text:N.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:N,onClick:A[10]||(A[10]=X(()=>{},["stop"]))},{default:a(()=>[t("div",P_,[x.$can("admin.purchase-order.detail")||x.$can("admin.purchase-order.edit")||x.$can("admin.purchase-order.cancel")||x.$can("admin.purchase-order.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:A[9]||(A[9]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[N.row.status!="draft"&&x.$can("admin.purchase-order.detail")?ae((d(),O(oe,{key:0,onClick:X(le=>U(N.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(B,null,{default:a(()=>A[12]||(A[12]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),N.row.status=="draft"&&x.$can("admin.purchase-order.edit")?ae((d(),O(oe,{key:1,onClick:X(le=>D(N.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>A[13]||(A[13]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),N.row.status=="draft"&&x.$can("admin.purchase-order.cancel")?ae((d(),O(oe,{key:2,onClick:X(le=>z(N.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(B,null,{default:a(()=>A[14]||(A[14]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),e(Pe),x.$can("admin.purchase-order.delete")?ae((d(),O(oe,{key:3,onClick:X(le=>M(N.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>A[15]||(A[15]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",w_,[e(de,{modelValue:$.year,"onUpdate:modelValue":[A[2]||(A[2]=N=>$.year=N),j],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!="all"?(d(),O(de,{key:0,modelValue:$.month,"onUpdate:modelValue":[A[3]||(A[3]=N=>$.month=N),j],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:$.status,"onUpdate:modelValue":[A[4]||(A[4]=N=>$.status=N),j],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:$.payment_status,"onUpdate:modelValue":[A[5]||(A[5]=N=>$.payment_status=N),j],options:S,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":A[7]||(A[7]=N=>$.search=N),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},O_=Object.freeze(Object.defineProperty({__proto__:null,default:R_},Symbol.toStringTag,{value:"Module"})),I_={class:"q-pa-xs"},U_={class:"row items-center full-width"},D_={class:"col text-left text-bold text-grey-9"},j_={class:"q-pa-md"},E_={class:"text-h6 text-primary q-mb-md"},Dl="Laporan",A_={__name:"Index",setup(p){const s=$e(),u=T("sales"),o=Z(()=>s.screen.lt.md),i={sales:{label:"Penjualan",icon:"o_payments",reports:[{title:"Keuntungan Penjualan",subtitle:"Daftar penjualan berikut laba kotor",icon:"analytics",route:"admin.report.sales-order.gross-profit"},{title:"Pelanggan",subtitle:"Daftar pelanggan",icon:"o_groups",route:"admin.report.customer.index"}]},purchasing:{label:"Pembelian",icon:"o_shopping_cart",reports:[{title:"Rincian Pembelian",subtitle:"Daftar rincian pembelian",icon:"o_receipt_long",route:"admin.report.purchase-order.detail"},{title:"Supplier",subtitle:"Daftar supplier",icon:"o_groups",route:"admin.report.supplier.index"}]}},n=[{id:"sales",...i.sales},{id:"purchasing",...i.purchasing}];return(f,b)=>{const c=G("i-head"),m=G("authenticated-layout");return d(),w(Y,null,[e(c,{title:Dl}),e(m,null,{title:a(()=>[v(r(Dl))]),"right-button":a(()=>b[2]||(b[2]=[])),default:a(()=>[t("div",I_,[e(pe,{flat:"",bordered:"",class:"report-container full-width"},{default:a(()=>[e(Tt,{modelValue:u.value,"onUpdate:modelValue":b[0]||(b[0]=g=>u.value=g),dense:"",class:"text-grey-7",align:"left",vertical:!o.value,"switch-indicator":o.value,"inline-label":o.value,"mobile-arrows":o.value,breakpoint:0},{default:a(()=>[(d(),w(Y,null,De(n,g=>e(dt,{key:g.id,name:g.id,class:xe({"bg-blue-2":u.value===g.id&&!o.value,"q-py-md":!o.value,"q-py-sm":o.value}),"content-class":"full-width",style:{"min-height":"50px"}},{default:a(()=>[t("div",U_,[o.value?k("",!0):(d(),O(C,{key:0,name:g.icon,class:"q-mr-md"},null,8,["name"])),t("div",D_,r(g.label),1),g.count&&!o.value?(d(),O(it,{key:1,color:"grey-5","text-color":"dark",rounded:"",label:g.count,class:"q-ml-sm"},null,8,["label"])):k("",!0)])]),_:2},1032,["name","class"])),64))]),_:1},8,["modelValue","vertical","switch-indicator","inline-label","mobile-arrows"]),e(Pe,{vertical:!o.value},null,8,["vertical"]),b[3]||(b[3]=t("div",null,null,-1)),e(Pt,{modelValue:u.value,"onUpdate:modelValue":b[1]||(b[1]=g=>u.value=g),animated:"",class:"q-pa-none"},{default:a(()=>[e(nt,{name:"purchasing",class:"q-pa-none"},{default:a(()=>[e(Ue,{separator:""},{default:a(()=>[(d(!0),w(Y,null,De(i.purchasing.reports,(g,_)=>ae((d(),O(oe,{key:_,clickable:"",class:"q-py-md",onClick:X(y=>l(ee).get(f.route(g.route)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:g.icon,size:"28px",color:"grey"},null,8,["name"])]),_:2},1024),e(B,null,{default:a(()=>[e(be,{class:"text-weight-bold text-dark"},{default:a(()=>[v(r(g.title),1)]),_:2},1024),e(be,{caption:""},{default:a(()=>[v(r(g.subtitle),1)]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right",color:"grey"})]),_:1})]),_:2},1032,["onClick"])),[[ne]])),128))]),_:1})]),_:1}),e(nt,{name:"sales",class:"q-pa-none"},{default:a(()=>[e(Ue,{separator:""},{default:a(()=>[(d(!0),w(Y,null,De(i.sales.reports,(g,_)=>ae((d(),O(oe,{key:_,clickable:"",class:"q-py-md",onClick:X(y=>l(ee).get(f.route(g.route)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:g.icon,size:"28px",color:"grey"},null,8,["name"])]),_:2},1024),e(B,null,{default:a(()=>[e(be,{class:"text-weight-bold text-dark"},{default:a(()=>[v(r(g.title),1)]),_:2},1024),e(be,{caption:""},{default:a(()=>[v(r(g.subtitle),1)]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:a(()=>[e(C,{name:"chevron_right",color:"grey"})]),_:1})]),_:2},1032,["onClick"])),[[ne]])),128))]),_:1})]),_:1}),(d(),w(Y,null,De(n,g=>e(nt,{key:g.id,name:g.id,class:xe({hidden:["purchasing","sales"].includes(g.id)})},{default:a(()=>[t("div",j_,[t("div",E_," Laporan "+r(g.label),1),t("p",null," Saat ini tidak ada daftar laporan spesifik yang ditampilkan. Klik tombol di bawah untuk melihat semua daftar laporan di kategori **"+r(g.label)+"**. ",1),e(E,{label:"Lihat Semua Laporan",color:"primary","icon-right":"arrow_forward"})])]),_:2},1032,["name","class"])),64))]),_:1},8,["modelValue"])]),_:1})])]),_:1})],64)}}},B_=_t(A_,[["__scopeId","data-v-01d5ea91"]]),M_=Object.freeze(Object.defineProperty({__proto__:null,default:B_},Symbol.toStringTag,{value:"Module"})),N_={class:"col col-md-8"},z_={class:"q-col-gutter-sm row"},F_={class:"col-xs-12 col-md-7"},L_={class:"text-subtitle2 text-bold text-grey-8"},K_={class:"text-subtitle2 text-bold text-grey-8"},H_={class:"text-subtitle2 text-bold text-grey-8"},W_={class:"text-subtitle2 text-bold text-grey-8"},Y_={class:"col-xs-12 col-md-5"},Q_={class:"q-my-sm"},J_={class:"q-my-sm"},G_={class:"q-my-sm"},X_={class:"q-my-sm"},La={__name:"ReportGeneratorLayout",props:{primaryColumns:{type:Array,required:!0},optionalColumns:{type:Array,default:()=>[]},initialFilter:{type:Object,default:()=>({})},initialSortOptions:{type:Array,default:()=>[]}},emits:["submit"],setup(p,{expose:s,emit:u}){const o=$e(),i=p,n=Z(()=>[...i.primaryColumns,...i.optionalColumns]),f=Z(()=>i.primaryColumns.map(V=>V.value)),b=[{value:"auto",label:"Otomatis"},{value:"portrait",label:"Potret"},{value:"landscape",label:"Lansekap"}],c=()=>({columns:f.value.slice(),filter:JSON.parse(JSON.stringify(i.initialFilter)),sortOptions:JSON.parse(JSON.stringify(i.initialSortOptions)),orientation:"auto"}),m=T(c()),g=()=>{m.value=c(),o.notify({type:"info",message:"Filter laporan direset ke nilai awal.",timeout:1500})},_=({index:V,value:$})=>{if(f.value.includes($)){const R=i.primaryColumns.find(K=>K.value===$);return o.notify({type:"negative",message:`Kolom (${R.label}) tidak boleh dihapus.`,timeout:2e3}),!1}return!0},y=V=>{if(m.value.columns.length===0){o.notify({type:"negative",message:"Kolom belum dipilih.",timeout:2e3});return}S("submit",{format:V,form:m.value})},S=u;return s({form:m,submit:y,reset:g,columnOptions:n}),(V,$)=>(d(),O(Te,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",N_,[t("div",z_,[t("div",F_,[e(pe,{square:"",flat:"",bordered:"",class:"full-width q-mb-sm"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",L_,[e(C,{name:"data_table",size:"xs",class:"q-mr-sm"}),$[7]||($[7]=v(" Kolom "))])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(de,{label:"Pilih Kolom",modelValue:m.value.columns,"onUpdate:modelValue":$[0]||($[0]=R=>m.value.columns=R),options:n.value,"map-options":"","emit-value":"",multiple:"",clearable:"","use-chips":"",onRemove:_,onClear:$[1]||($[1]=R=>m.value.columns=f.value.slice()),rules:[R=>R&&R.length>0||"Pilih minimal satu kolom"],"hide-bottom-space":""},{"selected-item":a(R=>[e(la,{removable:!f.value.includes(R.opt.value),onRemove:K=>_(R.opt)&&R.removeAtIndex(R.index),dense:""},{default:a(()=>[v(r(R.opt.label),1)]),_:2},1032,["removable","onRemove"])]),_:1},8,["modelValue","options","rules"])])]),_:1})]),_:1}),e(pe,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",K_,[e(C,{name:"filter_alt",size:"xs",class:"q-mr-sm"}),$[8]||($[8]=v(" Filter "))])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[Vt(V.$slots,"filter",{form:m.value})]),_:3})]),_:3}),e(pe,{square:"",flat:"",bordered:"",class:"full-width q-mt-sm"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",H_,[e(C,{name:"sort",size:"xs",class:"q-mr-sm"}),$[9]||($[9]=v(" Urutkan "))])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[Vt(V.$slots,"sort",{form:m.value,columnOptions:n.value})]),_:3})]),_:3}),e(pe,{square:"",flat:"",bordered:"",class:"full-width q-mt-sm"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",W_,[e(C,{name:"rotate_right",size:"xs",class:"q-mr-sm"}),$[10]||($[10]=v(" Orientasi "))])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(de,{label:"Orientasi",modelValue:m.value.orientation,"onUpdate:modelValue":$[2]||($[2]=R=>m.value.orientation=R),options:b,"map-options":"","emit-value":""},null,8,["modelValue"])])]),_:1})]),_:1})]),t("div",Y_,[e(pe,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(te,{class:"q-py-sm q-px-md"},{default:a(()=>[t("div",Q_,[e(E,{label:"Cetak",class:"full-width",color:"primary",icon:"print",onClick:$[3]||($[3]=R=>y("html"))})]),t("div",J_,[e(E,{label:"Unduh PDF",class:"full-width",color:"red",icon:"picture_as_pdf",onClick:$[4]||($[4]=R=>y("pdf"))})]),t("div",G_,[e(E,{label:"Unduh CSV",class:"full-width",color:"green",icon:"csv",onClick:$[5]||($[5]=R=>y("csv"))})]),t("div",X_,[e(E,{label:"Reset",class:"full-width",color:"grey",icon:"refresh",onClick:$[6]||($[6]=R=>g())})])]),_:1})]),_:1})])])])]),_:3}))}},Z_=Object.freeze(Object.defineProperty({__proto__:null,default:La},Symbol.toStringTag,{value:"Module"})),Go={__name:"BackButton",props:{route:{type:String,default:"",required:!0}},setup(p){const s=p;return(u,o)=>(d(),O(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=i=>u.$inertia.get(s.route))}))}},ey={class:"q-gutter-sm"},ty={class:"row q-col-gutter-sm items-center"},jl="Laporan Pelanggan",ay={__name:"Index",setup(p){const s=$e(),u=[{value:"code",label:"Kode"},{value:"name",label:"Nama"}],o=[{value:"phone",label:"No Telepon"},{value:"address",label:"Alamat"},{value:"balance",label:"Saldo Utang / Piutang"},{value:"wallet_balance",label:"Saldo Deposit"},{value:"active",label:"Aktif / Nonaktif"},{value:"type",label:"Jenis Akun"},{value:"default_price_type",label:"Level Harga"}],i=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],n=[{value:"all",label:"Semua"},{value:"general",label:"Umum"},{value:"staff",label:"Staff"},{value:"category_1",label:"Kategori 1"},{value:"category_2",label:"Kategori 2"},{value:"category_3",label:"Kategori 3"}],f=[{value:"all",label:"Semua"},{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],b={status:"all",type:"all",default_price_type:"all"},c=[{column:"code",order:"asc"}],m=T(null),g=({format:_,form:y})=>{const S={...y,format:_};try{const V=route("admin.report.customer.list",S);window.open(V,"_blank"),_!=="html"&&s.notify({type:"positive",message:`Laporan ${_.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(V){s.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",V)}};return(_,y)=>{const S=G("i-head"),V=G("authenticated-layout");return d(),w(Y,null,[e(S,{title:jl}),e(V,null,{title:a(()=>[v(r(jl))]),"left-button":a(()=>[t("div",ey,[e(Go,{route:_.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>y[0]||(y[0]=[])),default:a(()=>[e(La,{ref_key:"reportGeneratorRef",ref:m,primaryColumns:u,optionalColumns:o,initialFilter:b,initialSortOptions:c,onSubmit:g},{filter:a(({form:$})=>[e(de,{label:"Status",modelValue:$.filter.status,"onUpdate:modelValue":R=>$.filter.status=R,options:i,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(de,{label:"Level Harga",modelValue:$.filter.default_price_type,"onUpdate:modelValue":R=>$.filter.default_price_type=R,options:f,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(de,{label:"Jenis Akun",modelValue:$.filter.type,"onUpdate:modelValue":R=>$.filter.type=R,options:n,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"])]),sort:a(({form:$,columnOptions:R})=>[t("div",ty,[e(de,{modelValue:$.sortOptions[0].column,"onUpdate:modelValue":K=>$.sortOptions[0].column=K,class:"col-grow",style:{"min-width":"150px"},options:R,"map-options":"","emit-value":"",dense:""},null,8,["modelValue","onUpdate:modelValue","options"]),e(E,{icon:$.sortOptions[0].order=="desc"?"arrow_upward":"arrow_downward",color:"grey-8",flat:"",round:"",dense:"",onClick:K=>$.sortOptions[0].order=$.sortOptions[0].order=="asc"?"desc":"asc",class:"q-ml-sm"},{default:a(()=>[e(Dt,null,{default:a(()=>[v(" Urutkan: "+r($.sortOptions[0].order=="asc"?"Terkecil ke Terbesar":"Terbesar ke Terkecil"),1)]),_:2},1024)]),_:2},1032,["icon","onClick"])])]),_:1},512)]),_:1})],64)}}},ly=Object.freeze(Object.defineProperty({__proto__:null,default:ay},Symbol.toStringTag,{value:"Module"})),oy={class:"q-gutter-sm"},ny={class:"row q-col-gutter-sm items-center"},El="Laporan Supplier",sy={__name:"Index",setup(p){$e();const s=[{value:"code",label:"Kode"},{value:"name",label:"Nama"}],u=[{value:"phone_1",label:"No Telepon"},{value:"balance",label:"Saldo"}],o=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],i={status:"all"},n=[{column:"code",asc:!0}],f=T(null),b=({format:c,form:m})=>{console.log("Form Data:",m),alert(`Mencetak laporan dalam format: ${c}`)};return(c,m)=>{const g=G("i-head"),_=G("authenticated-layout");return d(),w(Y,null,[e(g,{title:El}),e(_,null,{title:a(()=>[v(r(El))]),"left-button":a(()=>[t("div",oy,[e(Go,{route:c.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>m[0]||(m[0]=[])),default:a(()=>[e(La,{ref_key:"reportGeneratorRef",ref:f,primaryColumns:s,optionalColumns:u,initialFilter:i,initialSortOptions:n,onSubmit:b},{filter:a(({form:y})=>[e(de,{label:"Status",modelValue:y.filter.status,"onUpdate:modelValue":S=>y.filter.status=S,options:o,"map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),sort:a(({form:y,columnOptions:S})=>[t("div",ny,[e(de,{modelValue:y.sortOptions[0].column,"onUpdate:modelValue":V=>y.sortOptions[0].column=V,class:"col-grow",style:{"min-width":"150px"},options:S,"map-options":"",dense:""},null,8,["modelValue","onUpdate:modelValue","options"]),e(E,{icon:y.sortOptions[0].asc?"arrow_upward":"arrow_downward",color:"grey-8",flat:"",round:"",dense:"",onClick:V=>y.sortOptions[0].asc=!y.sortOptions[0].asc,class:"q-ml-sm"},{default:a(()=>[e(Dt,null,{default:a(()=>[v(" Urutkan: "+r(y.sortOptions[0].asc?"Terkecil ke Terbesar":"Terbesar ke Terkecil"),1)]),_:2},1024)]),_:2},1032,["icon","onClick"])])]),_:1},512)]),_:1})],64)}}},ry=Object.freeze(Object.defineProperty({__proto__:null,default:sy},Symbol.toStringTag,{value:"Module"})),iy={class:"q-gutter-sm"},dy={class:"col col-md-6 q-pa-xs"},Al="Tambah Retur Penjualan",uy={__name:"Create",setup(p){const s=ge(),u=Qe({code:s.props.data.code}),o=()=>rt({form:u,url:route("admin.sales-order-return.add")});return(i,n)=>{const f=G("i-head"),b=G("authenticated-layout");return d(),w(Y,null,[e(f,{title:Al}),e(b,null,{title:a(()=>[v(r(Al))]),"left-button":a(()=>[t("div",iy,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.sales-order-return.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",dy,[e(Je,{class:"row",onSubmit:X(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(se,{autofocus:"",modelValue:l(u).code,"onUpdate:modelValue":n[1]||(n[1]=c=>l(u).code=c),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(u).errors.code,disable:l(u).processing,"error-message":l(u).errors.code,rules:[c=>c&&c.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(u).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(u).processing,onClick:n[2]||(n[2]=c=>l(ee).get(i.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},my=Object.freeze(Object.defineProperty({__proto__:null,default:uy},Symbol.toStringTag,{value:"Module"})),cy={class:"column"},py={class:"bg-grey-2 q-pa-xs"},fy={class:"text-subtitle1 text-bold text-grey-10"},gy={class:"text-caption text-grey-8"},by={class:"col-12 col-sm-6"},vy={class:"full-width"},_y={key:1},yy={key:0},ky={key:1},wy={class:"col-12 col-sm-6",align:"left"},hy={class:"full-width"},$y={class:"full-width",style:{"border-collapse":"collapse"}},xy={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Sy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Vy={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},qy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Cy={key:0},Ty={class:"col-12 col-sm-6"},Py={class:"text-body2 text-grey-7 text-italic"},Ry={class:"col-12 col-sm-6"},Oy={class:"row justify-end q-gutter-y-xs"},Iy={class:"col-12 row justify-between"},Uy={class:"text-subtitle2 text-bold"},Dy={class:"row justify-end q-gutter-y-xs"},jy={class:"col-12 row justify-between"},Ey={class:"text-subtitle2 text-bold"},Ay={class:"row justify-end q-gutter-y-xs"},By={class:"col-12 row justify-between"},My={class:"text-subtitle2 text-bold"},Xo={__name:"MainInfoTab",props:{data:Object},setup(p){const s=p;return(u,o)=>{const i=G("i-link"),n=G("my-link");return d(),w("div",cy,[e(te,{class:"q-pa-none"},{default:a(()=>{var f,b;return[t("div",py,[t("div",fy," RETUR #"+r(s.data.code),1),t("div",gy,[v(" Kasir: "+r((f=s.data.cashier)==null?void 0:f.username)+" - "+r((b=s.data.cashier)==null?void 0:b.name)+" | "+r(l(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),w(Y,{key:0},[v(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]}),_:1}),e(Pe),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",by,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",vy,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),O(i,{key:0,href:u.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[e(C,{class:"inline-icon",name:"person"}),v(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(d(),w("div",_y,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(d(),w("tr",yy,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(d(),w("tr",ky,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",wy,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",hy,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:u.route("admin.sales-order.detail",{id:s.data.sales_order_id})},{default:a(()=>[v(r(s.data.sales_order_id?s.data.sales_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("table",$y,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(Y,null,De(s.data.details,f=>(d(),w("tr",{key:f.id},[t("td",xy,[e(i,{href:u.route("admin.product.detail",f.product_id)},{default:a(()=>[v(r(f.product_name),1)]),_:2},1032,["href"])]),t("td",Sy,r(l(H)(f.price)),1),t("td",Vy,r(f.quantity),1),t("td",qy,r(l(H)(f.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),w("tr",Cy,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(te,{class:"row",align:"left"},{default:a(()=>[t("div",Ty,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Py,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Ry,[t("div",Oy,[t("div",Iy,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Uy,r(l(H)(s.data.grand_total)),1)])]),t("div",Dy,[t("div",jy,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",Ey,r(l(H)(parseFloat(-s.data.total_refunded))),1)])]),t("div",Ay,[t("div",By,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",My,r(l(H)(s.data.remaining_refund)),1)])])])]),_:1})])}}},Ny=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),zy={key:0,class:"text-center q-mb-md text-grey-8"},Fy={class:"text-subtitle2 text-weight-medium"},Ly={class:"text-h5 text-center text-primary q-pb-md"},Ky={class:"text-center q-mt-md"},Hy={key:0,class:"text-h6 text-negative text-weight-bold"},Wy={key:1,class:"text-h6 text-positive text-weight-bold"},Zo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=ge(),n=T(!1),f=T({method:"cash",amount:u.total,notes:null}),b=i.props.data.customer,c=Z(()=>[...b?[{label:"Refund ke Wallet",value:"wallet"}]:[],{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(V=>({label:V.name,value:V.id}))]),m=Z(()=>u.total-(f.value.amount||0)),g=Z(()=>{const V=f.value.amount||0;return V<=0?"Jumlah pembayaran harus lebih dari 0.":V>u.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=Z(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const V={id:f.value.method,amount:f.value.amount,notes:f.value.notes};o("accepted",V),n.value=!1},S=()=>{f.value.amount=u.total,f.value.method="cash",f.value.notes=null};return(V,$)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":$[4]||($[4]=R=>V.$emit("update:modelValue",R)),onBeforeShow:S},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>$[5]||($[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",zy,[t("div",Fy,[v(r(l(b).code)+" ",1),$[6]||($[6]=t("br",null,null,-1)),v(" "+r(l(b).name)+" ",1),$[7]||($[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(l(H)(l(b).wallet_balance)),1)])])):k("",!0),t("div",Ly," Total: Rp. "+r(l(H)(p.total)),1),e(l(de),{modelValue:f.value.method,"onUpdate:modelValue":$[0]||($[0]=R=>f.value.method=R),options:c.value,label:f.value.method=="wallet"?"Tujuan":"Sumber Dana",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","label","disable"]),e(Me,{modelValue:f.value.amount,"onUpdate:modelValue":$[1]||($[1]=R=>f.value.amount=R),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:f.value.notes,"onUpdate:modelValue":$[2]||($[2]=R=>f.value.notes=R),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Ky,[m.value>0?(d(),w("div",Hy," Sisa Refund: Rp. "+r(l(H)(m.value)),1)):(d(),w("div",Wy," Refund Lunas "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:$[3]||($[3]=R=>V.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Yy=Object.freeze(Object.defineProperty({__proto__:null,default:Zo},Symbol.toStringTag,{value:"Module"})),Qy={class:"column"},Jy={class:"row"},Gy={class:"full-width",style:{"border-collapse":"collapse"}},Xy={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Zy={class:"row items-center q-gutter-x-sm"},ek={class:"text-weight-bold"},tk={class:"row items-center q-gutter-x-sm q-mt-xs"},ak={class:"text-caption text-grey-6"},lk={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},ok={class:"text-caption text-grey-6"},nk={class:"q-mt-xs"},sk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},rk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ik={key:0},dk={class:"text-right q-pa-sm"},en={__name:"RefundTab",props:{data:Object},setup(p){const s=p,u=$e(),o=T(!1),i=()=>{o.value=!0},n=Z(()=>s.data.remaining_refund),f=async c=>{const m={order_id:s.data.id,...c};u.loading.show({message:"Memproses pembayaran..."});try{const g=await Ie.post(route("admin.sales-order-return.add-refund"),m);u.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(g){let _="Gagal memproses refund.";g.response&&g.response.data&&g.response.data.message?_=g.response.data.message:g.message&&(_=g.message),u.notify({message:_,color:"negative",icon:"error"})}finally{u.loading.hide()}},b=c=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Ie.post(route("admin.sales-order-return.delete-refund",{id:c.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(m){let g="Gagal menghapus refund pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(c,m)=>(d(),w(Y,null,[t("div",Qy,[e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("div",Jy,[c.$can("admin.sales-order-return.add-refund")?(d(),O(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=X(g=>i(),["stop"]))})):k("",!0)]),t("table",Gy,[m[5]||(m[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(Y,null,De(s.data.refunds,g=>(d(),w("tr",{key:g.id},[t("td",Xy,[t("div",Zy,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",ek,r(g.code),1)]),t("div",tk,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",ak,r(l(ve)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),w("div",lk,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),t("span",ok,r(g.account.name),1)])):k("",!0),t("div",nk,[e(it,{label:c.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",sk,r(l(H)(g.amount)),1),t("td",rk,[c.$can("admin.sales-order-return.delete-refund")?(d(),O(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>b(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(d(),w("tr",ik,m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund",-1)),t("th",dk,r(l(H)(parseFloat(-s.data.total_refunded))),1),m[4]||(m[4]=t("th",null,null,-1))])])])]),_:1})]),e(Zo,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=g=>o.value=g),total:n.value,customer:s.data.customer,onAccepted:f},null,8,["modelValue","total","customer"])],64))}},uk=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),mk={class:"q-gutter-sm"},ck={class:"col col-lg-6 q-pa-xs",align:"center"},Bl="Retur Penjualan",pk={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),u=ge(),o=u.props.data,i=T(s.get("preview")||!1),f=T(s.get("tab")||"main-info");he(()=>{mt(()=>{const c=s.get("print_size");c&&b(c)})});const b=c=>{window.open(route("admin.sales-order-return.print",{id:u.props.data.id,size:c}),"_self")};return(c,m)=>{const g=G("i-head"),_=G("authenticated-layout");return d(),w(Y,null,[e(g,{title:Bl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Bl))])]),"left-button":a(()=>[t("div",mk,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>c.$goBack())})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=y=>b("a4"))}),i.value?k("",!0):(d(),O(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=y=>l(ee).get(c.route("admin.sales-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",ck,[e(pe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(Tt,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(d(),O(dt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Pt,{modelValue:f.value,"onUpdate:modelValue":m[5]||(m[5]=y=>f.value=y),animated:""},{default:a(()=>[e(nt,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(Xo,{data:l(o)},null,8,["data"])]),_:1}),e(nt,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(en,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},fk=Object.freeze(Object.defineProperty({__proto__:null,default:pk},Symbol.toStringTag,{value:"Module"})),gk={class:"text-weight-medium"},bk={class:"text-caption text-grey-6 elipsis"},vk={class:"column items-end"},_k={class:"text-caption text-grey-6 text-italic"},tn={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=$e(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),O(Ee,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:l(u)})},{header:a(f=>[e(Re,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(Y,null,De(f.cols,b=>(d(),O(oa,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Re,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left wrap-column"},{default:a(()=>[t("div",gk,r(f.row.product_name),1),t("div",bk,r(f.row.product_barcode),1),f.row.notes?(d(),O(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal_price",props:f,class:"text-right"},{default:a(()=>[t("div",vk,[t("div",null,r(l(H)(f.row.subtotal_price)),1),t("div",_k,r(l(H)(f.row.quantity))+" x Rp. "+r(l(H)(f.row.price)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},yk=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),kk={class:"row items-center no-wrap"},wk={class:"col-auto"},an={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=Z(()=>o.item.quantity*o.item.price),b=g=>{g.stopPropagation(),g.preventDefault()},c=g=>{o.modelValue&&(g.key==="Enter"?(n(),i("update:modelValue",!1),b(g)):g.key==="Escape"&&(i("update:modelValue",!1),b(g)))};return he(()=>{window.addEventListener("keydown",c)}),wt(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item}),(g,_)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>g.$emit("update:modelValue",y))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",kk,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",wk,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>g.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(se,{modelValue:p.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=y=>p.item.product_name=y),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=y=>p.item.quantity=y),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.price,"onUpdate:modelValue":_[3]||(_[3]=y=>p.item.price=y),label:"Harga","hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:f.value,"onUpdate:modelValue":_[4]||(_[4]=y=>f.value=y),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:p.item.notes,"onUpdate:modelValue":_[5]||(_[5]=y=>p.item.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},hk=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),$k={key:0,class:"q-select__selected-item"},ln={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(p,{expose:s,emit:u}){const o=T(null),i=p,n=u,f=T([]);let b=null;const c=T(i.modelValue);he(()=>{i.initialData&&(c.value=i.initialData)}),Ne(c,_=>{n("update:modelValue",_),n("customerSelected",_)}),Ne(()=>i.modelValue,_=>{c.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const g=(_,y)=>{if(_.length<i.minLength){y(()=>{f.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Ie.get(`/web-api/customers?q=${_}`).then(S=>{y(()=>{f.value=S.data.data})}).catch(S=>{console.error("Gagal mengambil data pelanggan:",S),y(()=>{f.value=[]})})},500)};return(_,y)=>(d(),O(de,{class:xe(p.class),ref_key:"qSelectRef",ref:o,modelValue:c.value,"onUpdate:modelValue":y[0]||(y[0]=S=>c.value=S),"use-input":"","input-debounce":"0",label:p.label,options:f.value,onFilter:g,clearable:"",error:p.error,behavior:"menu","error-message":p.errorMessage,disable:p.disable,"hide-bottom-space":"",outlined:p.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a(S=>[e(oe,Na(co(S.itemProps)),{default:a(()=>[e(B,null,{default:a(()=>[e(be,null,{default:a(()=>[v(r(S.opt.name),1)]),_:2},1024),e(be,{caption:""},{default:a(()=>[e(C,{name:"person",size:"14px"}),v(" "+r(S.opt.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":a(S=>[S.opt?(d(),w("div",$k,r(S.opt.name)+" ("+r(S.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},xk={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(u,o)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[ae(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},on=_t(xk,[["__scopeId","data-v-22783525"]]),Sk=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"})),Vk={class:"row items-center no-wrap"},qk={class:"col text-subtite text-bold text-grey-8"},Ck={class:"col-auto"},nn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(i("update:modelValue",!1),f(m)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",Vk,[t("div",qk," Edit "+r(p.data.code),1),t("div",Ck,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(Ht,{modelValue:p.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:p.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Tk=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),Pk={class:"q-gutter-sm"},Rk={class:"row items-center"},Ok={class:"text-weight-bold"},Ik={class:"row q-col-gutter-none full-width"},Uk={class:"col-sm-6 col-12 col"},Dk={class:"row full-width"},jk={key:0,class:"row"},Ek={class:"col-sm-6 col-12"},Ak={class:"row q-ml-sm items-end"},Bk={class:"row col grow"},Mk={class:"col-12 q-pa-sm column"},Nk={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},zk={key:0,class:"col"},Fk={class:"text-caption text-grey-6 q-mt-xs"},Lk={key:0,class:"text-caption text-grey-8 q-mt-xs"},Kk={class:"text-italic"},Hk={key:1,class:"col"},Wk={class:"q-pa-sm q-pb-none text-grey-8"},Yk={class:"col"},Qk={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Jk={class:"text-h4 text-weight-bold"},Gk={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Xk={class:"col q-py-sm"},Zk={class:"q-py-sm"},ew={__name:"Editor",setup(p){const s=$e(),u=ge(),o=T(!0),i=T(null),n=T(null),f=T(null),b=T(!1),c=T(null),m=T(null),{isFullscreen:g,toggleFullscreen:_}=$a(m),y="Retur #"+u.props.data.code,S=T(u.props.data.customer),V=T(""),$=T(!1),R=T(!1),K=T(!1),I=T(!1),D=T(null),U=je({id:u.props.data.id,code:u.props.data.code,customer_id:u.props.data.customer_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),z=Z(()=>U.items.reduce((ce,L)=>ce+L.price*L.quantity,0)),M=()=>{var ce;_(),g.value||(ce=c==null?void 0:c.value)==null||ce.hideDrawer()},h=ce=>isNaN(ce)||ce<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,j=ce=>isNaN(ce)||ce<0?(bt("Harga tidak valid.","top"),!1):!0,P=ce=>!ce||ce.length==0?(bt("Barcode tidak valid.","top"),!1):!0,x=ce=>{var L;(L=V.value)!=null&&L.endsWith("*")?V.value+=ce.name:V.value=ce.name},A=async()=>{if($.value)return;const ce=V.value.trim();if(ce.length===0){R.value=!0;return}const L=ce.split("*");let ye=1,re="",W=null;if(L.length===1)re=L[0];else if(L.length<=3)ye=parseInt(L[0]),re=L[1],L.length===3&&(W=parseFloat(L[2]));else{bt("Input tidak valid.","top");return}if(re.length===0){R.value=!0;return}!P(re)&&!h(ye)&&!j(W)||($.value=!0,await Ie.post(route("admin.sales-order-return.add-item"),{order_id:U.id,product_code:re,qty:ye,price:W,merge:o.value}).then(ke=>{const ue=ke.data.data.item;let J=-1;ke.data.data.mergeItem&&(J=U.items.findIndex(qe=>qe.id===ue.id)),J===-1?U.items.push(ue):U.items[J]=ue,V.value="",W!==null&&W!==parseFloat(ue.price)&&bt("Harga tidak dapat diubah!","top")}).catch(ke=>{var ue,J;ft((J=(ue=ke.response)==null?void 0:ue.data)==null?void 0:J.message,"top"),console.error("Gagal mengambil data produk:",ke)}),$.value=!1,mt(()=>{var ke;(ke=i.value)==null||ke.focus()}))},F=ce=>{D.value=Object.create(ce),K.value=!0},q=ce=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ce.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{$.value=!0,Ie.post(route("admin.sales-order-return.remove-item"),{id:ce.id}).then(()=>{const L=U.items.findIndex(ye=>ye.id===ce.id);L!==-1&&(U.items.splice(L,1)[0],gt("Item telah dihapus","top"))}).catch(L=>{var ye,re;ft(((re=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:re.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{$.value=!1})})},N=()=>{$.value=!0;const ce=n.value.getCurrentItem(),L={id:ce.id,qty:ce.quantity,price:ce.price};ce.notes&&(L.notes=ce.notes),Ie.post(route("admin.sales-order-return.update-item"),L).then(ye=>{const re=ye.data.data,W=U.items.findIndex(ke=>ke.id===re.id);W!==-1&&(U.items[W]=re,gt("Item telah diperbarui","top")),K.value=!1}).catch(ye=>{var re,W;ft(((W=(re=ye==null?void 0:ye.response)==null?void 0:re.data)==null?void 0:W.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ye)}).finally(()=>{$.value=!1})};he(()=>{const ce=L=>{b.value||K.value||R.value||I.value||(L.key==="F1"?(L.preventDefault(),b.value=!0):L.key==="F2"?(L.preventDefault(),f.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),me()):L.key==="F11"?(L.preventDefault(),M()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault())};document.addEventListener("keydown",ce),wt(()=>{document.removeEventListener("keydown",ce)}),mt(()=>{var L;(L=c==null?void 0:c.value)==null||L.hideDrawer()})});const le=async()=>{$.value=!0;const ce={id:U.id,customer_id:U.customer_id??null,datetime:aa(U.datetime),notes:U.notes};await Ie.post(route("admin.sales-order-return.update"),ce).then(L=>{const ye=L.data.data.id;U.customer_id=ye.customer_id}).catch(L=>{var ye,re;ft(((re=(ye=L==null?void 0:L.response)==null?void 0:ye.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{$.value=!1})},me=ce=>{if(U.items.length===0){gt("Item masih kosong","top");return}xt.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${U.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{$.value=!0,Ie.post(route("admin.sales-order-return.close",{id:U.id})).then(L=>{gt("Transaksi selesai"),ee.get(route("admin.sales-order-return.detail",{id:U.id}))}).catch(L=>{var ye,re;ft((re=(ye=L.response)==null?void 0:ye.data)==null?void 0:re.message),console.error(L)}).finally(()=>{$.value=!1})})},ie=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${U.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ie.post(route("admin.sales-order-return.cancel",{id:U.id}),{id:U.id}).then(()=>{gt("Transaksi telah dibatalkan."),ee.visit(route("admin.sales-order-return.detail",{id:U.id}))}).catch(ce=>{var ye,re;const L=((re=(ye=ce.response)==null?void 0:ye.data)==null?void 0:re.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(ce)})})},Oe=()=>{window.open(route("admin.sales-order-return.detail",{id:U.id})+"?preview=1","_blank")},Xe=Z(()=>S.value?S.value.wallet_balance>=z.value:!0);return(ce,L)=>{const ye=G("i-head"),re=G("authenticated-layout");return d(),w(Y,null,[e(ye,{title:y}),e(re,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[v(r(y))]),"left-button":a(()=>[t("div",Pk,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=W=>l(ee).get(ce.route("admin.sales-order-return.index")))})])]),"right-button":a(()=>[t("div",Rk,[l(s).screen.gt.sm?(d(),w(Y,{key:0},[t("div",Ok,r(l(u).props.auth.user.username),1),L[21]||(L[21]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ha)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:a(()=>[t("div",Ik,[t("div",Uk,[t("div",Dk,[e(ln,{ref_key:"customerAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:S.value,"onUpdate:modelValue":L[2]||(L[2]=W=>S.value=W),label:"Pelanggan",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),S.value?(d(),w("div",jk,[t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",Xe.value?"text-green":"text-red"])}," Wallet: "+r(S.value?"Rp. "+l(H)(S.value?S.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",S.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(S.value?"Rp. "+l(H)(S.value?S.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",Ek,[e(Sa,{ref_key:"userInputRef",ref:i,modelValue:V.value,"onUpdate:modelValue":L[3]||(L[3]=W=>V.value=W),onKeyup:L[4]||(L[4]=Jt(X(W=>A(),["prevent"]),["enter"])),onScanSuccess:L[5]||(L[5]=W=>A()),onSend:L[6]||(L[6]=W=>A()),onSearch:L[7]||(L[7]=W=>R.value=!0),loading:$.value,disable:$.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",Ak,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[8]||(L[8]=W=>o.value=W),label:"Gabungkan item",disable:$.value},null,8,["modelValue","disable"])])])]),t("div",Bk,[t("div",Mk,[e(tn,{items:U.items,onUpdateQuantity:L[9]||(L[9]=({id:W,value:ke})=>ce.updateQuantity(W,ke)),onRemoveItem:q,onEditItem:F,"is-processing":$.value},null,8,["items","is-processing"])])]),t("div",Nk,[l(s).screen.gt.sm?(d(),w("div",zk,[t("div",Fk,r(U.items.length)+" item(s) ",1),U.notes?(d(),w("div",Lk,[L[22]||(L[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Kk,[e(Se,{text:U.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",Hk,[t("div",Wk,[t("div",null,"Return #: "+r(U.code),1),t("div",null,"Order #: "+r(l(u).props.data.sales_order.code),1),t("div",null,r(l(ve)(U.datetime)),1)])])):k("",!0),t("div",Yk,[t("div",Qk,[L[24]||(L[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Jk,[L[23]||(L[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(H)(z.value)),1)])])])]),t("div",Gk,[t("div",Xk,[e(E,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:L[10]||(L[10]=W=>me()),disable:!ce.$can("admin.sales-order-return.close")||$.value||U.items.length===0||U.status!=="draft",loading:$.value},null,8,["disable","loading"])]),t("div",Zk,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[14]||(L[14]=X(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[ae((d(),O(oe,{clickable:"",onClick:L[11]||(L[11]=X(W=>I.value=!0,["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>L[25]||(L[25]=[v("Edit Rincian")])),_:1})]),_:1})),[[ne],[fe]]),ae((d(),O(oe,{clickable:"",onClick:L[12]||(L[12]=X(W=>Oe(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(B,null,{default:a(()=>L[26]||(L[26]=[v("Pratinjau")])),_:1})]),_:1})),[[ne],[fe]]),ae((d(),O(oe,{clickable:"",onClick:L[13]||(L[13]=X(W=>ie(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(B,{class:"text-negative"},{default:a(()=>L[27]||(L[27]=[v(" Batalkan ")])),_:1})]),_:1})),[[ne],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(an,{ref_key:"itemEditorRef",ref:n,modelValue:K.value,"onUpdate:modelValue":L[15]||(L[15]=W=>K.value=W),item:D.value,onSave:L[16]||(L[16]=W=>N()),"is-processing":$.value},null,8,["modelValue","item","is-processing"]),e(xa,{modelValue:R.value,"onUpdate:modelValue":L[17]||(L[17]=W=>R.value=W),onProductSelected:x},null,8,["modelValue"]),e(nn,{modelValue:I.value,"onUpdate:modelValue":L[18]||(L[18]=W=>I.value=W),data:U,onSave:L[19]||(L[19]=W=>le()),"is-processing":$.value},null,8,["modelValue","data","is-processing"]),e(on,{modelValue:b.value,"onUpdate:modelValue":L[20]||(L[20]=W=>b.value=W)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},tw=Object.freeze(Object.defineProperty({__proto__:null,default:ew},Symbol.toStringTag,{value:"Module"})),aw={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},lw={class:"q-pa-xs"},ow={class:"full-width row flex-center text-grey-8 q-gutter-sm"},nw={key:0},sw={key:1},rw={key:2},iw={key:3},dw={key:0},uw={key:1},mw={key:0},cw={key:0},pw={key:1},fw={class:"flex justify-end"},Ml="Retur Penjualan",gw={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=Lt(),m=Kt(),g=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...It(c-2,c-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Ut()],y=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.SALES_ORDER_RETURN_STATUSES)],S=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES)],V=je({search:"",year:c,month:m,status:"all",refund_status:"all",...Le()}),$=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),R=[{name:"code",label:"Info Order",field:"code",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{M()});const K=P=>{if(P.status=="draft"){I(P);return}D(P)},I=P=>{ee.get(route("admin.sales-order-return.edit",P.id))},D=P=>{ee.get(route("admin.sales-order-return.detail",P.id))},U=P=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ie.post(route("admin.sales-order-return.cancel",{id:P.id}),{id:P.id}).then(x=>{const A=x.data.data,F=o.value.findIndex(q=>q.id===A.id);if(F===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[F].status="canceled",s.notify({message:x.data.message,position:"bottom"})}).catch(x=>{var F,q;const A=((q=(F=x.response)==null?void 0:F.data)==null?void 0:q.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:A,color:"warning",position:"bottom"}),console.error(x)})})},z=P=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.sales-order-return.delete",P.id),fetchItemsCallback:M,loading:i}),M=(P=null)=>{Ke({pagination:$,filter:V,props:P,rows:o,url:route("admin.sales-order-return.data"),loading:i,tableRef:n})},h=()=>{M()},j=Z(()=>s.screen.gt.sm?R:R.filter(P=>P.name==="code"||P.name==="action"));return Ne(()=>V.year,P=>{P===null&&(V.month=null)}),(P,x)=>{const A=G("i-head"),F=G("authenticated-layout");return d(),w(Y,null,[e(A,{title:Ml}),e(F,null,ze({title:a(()=>[v(r(Ml))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=q=>u.value=!u.value)},null,8,["icon"]),P.$can("admin.sales-order-return.edit")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=q=>l(ee).get(P.route("admin.sales-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",lw,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:$.value,"onUpdate:pagination":x[10]||(x[10]=q=>$.value=q),filter:V.search,loading:i.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:M,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:N,filter:le})=>[t("div",ow,[t("span",null,r(N)+" "+r(le?" with term "+le:""),1)])]),body:a(q=>[e(Re,{props:q,class:"cursor-pointer",onClick:X(N=>K(q.row),["prevent"])},{default:a(()=>[e(Q,{key:"code",props:q,class:"wrap-column"},{default:a(()=>{var N,le,me;return[t("div",null,[e(C,{name:"tag"}),v(" "+r(q.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(q.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[q.row.cashier?(d(),w("div",nw,[e(C,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((N=q.row.cashier)==null?void 0:N.username),1)])):k("",!0),q.row.cashier_session?(d(),w("div",sw,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((me=(le=q.row.cashier_session)==null?void 0:le.cashier_terminal)==null?void 0:me.name),1)])):k("",!0),q.row.customer?(d(),w("div",rw,[e(C,{name:"person",class:"inline-icon"}),e(ka,{href:P.route("admin.customer.detail",{id:q.row.customer.id}),onClick:x[7]||(x[7]=X(()=>{},["stop"]))},{default:a(()=>[v(" "+r(q.row.customer.code)+" - "+r(q.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(l(H)(q.row.grand_total)),1),q.row.notes?(d(),w("div",iw,[e(C,{name:"notes"}),v(" "+r(q.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Ft,{status:q.row.status,statuses:P.$CONSTANTS.SALES_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Ft,{status:q.row.refund_status,statuses:P.$CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Q,{key:"cashier_id",props:q},{default:a(()=>{var N,le,me;return[q.row.cashier?(d(),w("div",dw,[e(C,{name:"person",class:"inline-icon"}),v(" "+r((N=q.row.cashier)==null?void 0:N.username),1)])):k("",!0),q.row.cashier_session?(d(),w("div",uw,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((me=(le=q.row.cashier_session)==null?void 0:le.cashier_terminal)==null?void 0:me.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Q,{key:"customer_id",props:q},{default:a(()=>[q.row.customer?(d(),w("div",mw,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(q.row.customer_code)+" - "+r(q.row.customer_name),1)]),q.row.customer_phone?(d(),w("div",cw,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(q.row.customer_phone),1)])):k("",!0),q.row.customer_address?(d(),w("div",pw,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(q.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"total",props:q},{default:a(()=>[v(r(l(H)(q.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:q},{default:a(()=>[e(Se,{text:q.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:q,onClick:x[9]||(x[9]=X(()=>{},["stop"]))},{default:a(()=>[t("div",fw,[P.$can("admin.sales-order-return.detail")||P.$can("admin.sales-order-return.edit")||P.$can("admin.sales-order-return.cancel")||P.$can("admin.sales-order-return.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[8]||(x[8]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[q.row.status!="draft"&&P.$can("admin.sales-order-return.detail")?ae((d(),O(oe,{key:0,onClick:X(N=>D(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(B,null,{default:a(()=>x[11]||(x[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),q.row.status=="draft"&&P.$can("admin.sales-order-return.edit")?ae((d(),O(oe,{key:1,onClick:X(N=>I(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>x[12]||(x[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),q.row.status=="draft"&&P.$can("admin.sales-order-return.cancel")?ae((d(),O(oe,{key:2,onClick:X(N=>U(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(B,null,{default:a(()=>x[13]||(x[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),e(Pe),P.$can("admin.sales-order-return.delete")?ae((d(),O(oe,{key:3,onClick:X(N=>z(q.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>x[14]||(x[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",aw,[e(de,{modelValue:V.year,"onUpdate:modelValue":[x[2]||(x[2]=q=>V.year=q),h],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),V.year!="all"?(d(),O(de,{key:0,modelValue:V.month,"onUpdate:modelValue":[x[3]||(x[3]=q=>V.month=q),h],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:V.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:V.status,"onUpdate:modelValue":[x[4]||(x[4]=q=>V.status=q),h],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:V.refund_status,"onUpdate:modelValue":[x[5]||(x[5]=q=>V.refund_status=q),h],options:S,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:V.search,"onUpdate:modelValue":x[6]||(x[6]=q=>V.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},bw=Object.freeze(Object.defineProperty({__proto__:null,default:gw},Symbol.toStringTag,{value:"Module"})),vw={key:0,class:"text-center q-mb-md text-grey-8"},_w={class:"text-subtitle2 text-weight-medium"},yw={class:"text-h5 text-center text-primary q-pb-md"},kw={class:"q-mb-md flex flex-center"},ww={key:1},hw={class:"col-6"},$w={class:"col-6"},xw={class:"row"},Sw={class:"text-center q-mt-md"},Vw={key:0,class:"text-h6 text-negative text-weight-bold"},qw={key:1,class:"text-h6 text-green-8 text-weight-bold"},Cw={key:2,class:"text-h6 text-positive text-weight-bold"},Tw={key:2},Pw={class:"text-h6 text-negative text-center"},Rw={key:3},Ow={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=ge(),n=T(!1),f=T("cash"),b=T(new Date),c=T([]),m=T([]),g=je([{id:"cash",amount:0}]),_=i.props.settings.default_payment_mode,y=Z(()=>[{label:"Laci Kasir",value:"cash"},...u.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(x=>({label:x.name,value:x.id}))]),S=Z(()=>g.reduce((x,A)=>x+(A.amount||0),0)),V=Z(()=>u.total-S.value),$=Z(()=>{if(!u.customer)return!0;const x=g.find(F=>F.id==="wallet");return(x?x.amount:0)<=u.customer.wallet_balance}),R=new Date,K=ut.addToDate(new Date,{days:30}),I=Z(()=>[x=>!!x||"Tanggal jatuh tempo harus diisi",x=>ut.isBetweenDates(x,R,K,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),D=Z(()=>{if(f.value==="debt")return!!u.customer&&I.value.every(N=>N(b.value)===!0);const x=$.value,A=g.some(N=>(N.amount||0)>0),F=g.every(N=>(N.amount||0)>=0),q=V.value<=0;return x&&A&&F&&q}),U=()=>{if(g.length<3){const x=g.length;g.push({id:"cash",amount:0}),mt(()=>{const A=c.value[x];A&&(A.focus(),A.showPopup())})}},z=x=>{if(g.length>1){const A=g.findIndex(F=>F.id===x);A!==-1&&g.splice(A,1)}},M=(x,A="cash")=>{f.value=x,b.value=new Date,g.splice(0,g.length),x==="cash"&&(g.splice(0,g.length,{id:A,amount:u.total}),mt(()=>{m.value.length>0&&m.value[0]&&(m.value[0].focus(),m.value[0].select())}))},h=()=>{if(!D.value)return;n.value=!0;let x={total:u.total,is_debt:f.value==="debt"};if(f.value==="debt")x.due_date=ut.formatDate(b.value,"YYYY-MM-DD"),x.payments=[];else{const A=S.value,F=A>u.total?A-u.total:0,q=V.value>0?V.value:0;x.payments=g,x.remaining_debt=q,x.change=F}o("accepted",x),n.value=!1},j=()=>{M("cash",u.customer?_:"cash")};he(()=>{const x=A=>{u.modelValue&&A.ctrlKey&&A.key==="Enter"&&(A.preventDefault(),h())};document.addEventListener("keydown",x),wt(()=>{document.removeEventListener("keydown",x)})});const P=(x,A)=>{mt(()=>{m.value[A]&&(m.value[A].focus(),m.value[A].select())})};return(x,A)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":A[3]||(A[3]=F=>x.$emit("update:modelValue",F)),onBeforeShow:j},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>A[4]||(A[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[p.customer?(d(),w("div",vw,[t("div",_w,[v(" Username: "+r(p.customer.code)+" ",1),A[5]||(A[5]=t("br",null,null,-1)),v(" Nama: "+r(p.customer.name),1),A[6]||(A[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(l(H)(p.customer.wallet_balance)),1)])])):k("",!0),t("div",yw," Total: Rp. "+r(l(H)(p.total)),1),t("div",kw,[e(l(Qt),{modelValue:f.value,"onUpdate:modelValue":[A[0]||(A[0]=F=>f.value=F),M],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="cash"?(d(),w("div",ww,[(d(!0),w(Y,null,De(g,(F,q)=>(d(),w("div",{key:q,class:"row q-col-gutter-sm q-mb-sm"},[t("div",hw,[e(l(de),{modelValue:F.id,"onUpdate:modelValue":[N=>F.id=N,N=>P(N,q)],options:y.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:N=>c.value[q]=N},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",$w,[e(Me,{modelValue:F.amount,"onUpdate:modelValue":N=>F.amount=N,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:F.id==="wallet"&&!$.value,"error-message":F.id==="wallet"&&!$.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:N=>m.value[q]=N},ze({_:2},[g.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:N=>z(F.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",xw,[e(E,{disable:!(g.length<3&&V.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:U,size:"sm"},null,8,["disable"])]),t("div",Sw,[V.value>0?(d(),w("div",Vw," Sisa Tagihan: Rp. "+r(l(H)(V.value)),1)):V.value<0?(d(),w("div",qw," Kembalian: Rp. "+r(l(H)(Math.abs(V.value))),1)):(d(),w("div",Cw," Tagihan Terbayar "))])])):f.value==="debt"&&p.customer?(d(),w("div",Tw,[e(pa,{outlined:"",modelValue:b.value,"onUpdate:modelValue":A[1]||(A[1]=F=>b.value=F),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(R),"max-date":l(K),rules:I.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Pw," Total Utang: Rp. "+r(l(H)(p.total)),1)])):f.value==="debt"&&!p.customer?(d(),w("div",Rw,A[7]||(A[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:A[2]||(A[2]=F=>x.$emit("update:modelValue",!1)),class:"col"}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:h,disable:n.value||!D.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Iw=Object.freeze(Object.defineProperty({__proto__:null,default:Ow},Symbol.toStringTag,{value:"Module"})),Uw={key:0},Dw={style:{float:"right"}},jw={key:1},Ew={style:{float:"right"}},Aw={key:2},Bw={style:{float:"right"}},Mw={key:3},Nw={style:{float:"right"}},zw={style:{float:"right"}},Fw={class:"q-gutter-sm"},Lw={class:"q-my-md"},Kw={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const u=T(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),w("tr",Uw,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Dw,r(l(H)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),w("tr",jw,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",Ew,r(l(H)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),w("tr",Aw,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",Bw,r(l(H)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),w("tr",Mw,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Nw,r(l(H)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",zw,r(l(H)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",Fw,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Lw,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Hw=_t(Kw,[["__scopeId","data-v-a3bb29e0"]]),Ww=Object.freeze(Object.defineProperty({__proto__:null,default:Hw},Symbol.toStringTag,{value:"Module"})),Yw={class:"column"},Qw={class:"bg-grey-2 q-pa-xs"},Jw={class:"text-subtitle1 text-bold text-grey-10"},Gw={class:"text-caption text-grey-8"},Xw={class:"col-12 col-sm-6"},Zw={class:"full-width"},e0={key:1},t0={key:0},a0={key:1},l0={class:"col-12 col-sm-6",align:"left"},o0={class:"full-width"},n0={key:0};const s0={key:2},r0={class:"full-width",style:{"border-collapse":"collapse"}},i0={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},d0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},u0={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},m0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},c0={key:0},p0={class:"col-12 col-sm-6"},f0={class:"text-body2 text-grey-7 text-italic"},g0={class:"col-12 col-sm-6"},b0={class:"row justify-end q-gutter-y-xs"},v0={class:"col-12 row justify-between"},_0={class:"text-subtitle2 text-bold"},y0={key:0,class:"row justify-end q-gutter-y-xs"},k0={class:"col-12 row justify-between"},w0={class:"text-subtitle2 text-bold"},h0={class:"row justify-end q-gutter-y-xs"},$0={class:"col-12 row justify-between"},x0={class:"text-subtitle2 text-bold"},S0={key:1,class:"row justify-end q-gutter-y-xs"},V0={class:"col-12 row justify-between"},q0={class:"text-subtitle2 text-bold"},C0={key:2,class:"row justify-end q-gutter-y-xs"},T0={class:"col-12 row justify-between"},P0={class:"text-subtitle2 text-bold"},sn={__name:"InvoiceTab",props:{data:Object},setup(p){const s=p;return(u,o)=>{const i=G("i-link");return d(),w("div",Yw,[e(te,{class:"q-pa-none"},{default:a(()=>[t("div",Qw,[t("div",Jw," INVOICE #"+r(s.data.code),1),t("div",Gw,[v(" Kasir: "+r(s.data.cashier.username)+" - "+r(s.data.cashier.name)+" | "+r(l(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),w(Y,{key:0},[v(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Pe),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",Xw,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",Zw,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),w(Y,{key:0},[e(C,{class:"inline-icon",name:"person"}),e(i,{href:u.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[v(r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])],64)):(d(),w("div",e0,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(d(),w("tr",t0,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),e(ea,{phone:s.data.customer_phone},null,8,["phone"])])])):k("",!0),s.data.customer_address?(d(),w("tr",a0,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),(d(),w(Y,{key:0},[v(r(s.data.customer_address),1)],64))])])):k("",!0)])])]),t("div",l0,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",o0,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.$CONSTANTS.SALES_ORDER_STATUSES[s.data.status]),1)]),s.data.status=="closed"?(d(),w("tr",n0,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)])):k("",!0),k("",!0),s.data.due_date?(d(),w("tr",s0,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(da)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("table",r0,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(Y,null,De(s.data.details,n=>(d(),w("tr",{key:n.id},[t("td",i0,[e(i,{href:u.route("admin.product.detail",n.product_id)},{default:a(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",d0,r(l(H)(n.price)),1),t("td",u0,r(n.quantity),1),t("td",m0,r(l(H)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),w("tr",c0,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(te,{class:"row",align:"left"},{default:a(()=>[t("div",p0,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",f0,r(s.data.notes?s.data.notes:"-"),1)]),t("div",g0,[s.data.status=="closed"&&s.data.change>0?(d(),w(Y,{key:0},[t("div",b0,[t("div",v0,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Jumlah Bayar",-1)),t("div",_0,r(l(H)(parseInt(s.data.total_paid)+parseInt(s.data.change))),1)])]),s.data.status=="closed"?(d(),w("div",y0,[t("div",k0,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Kembalian",-1)),t("div",w0,r(l(H)(s.data.change)),1)])])):k("",!0)],64)):k("",!0),t("div",h0,[t("div",$0,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",x0,r(l(H)(s.data.grand_total)),1)])]),s.data.status=="closed"&&s.data.total_return!=0?(d(),w("div",S0,[t("div",V0,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",q0,r(l(H)(s.data.total_return)),1)])])):k("",!0),s.data.status=="closed"&&s.data.balance!=0?(d(),w("div",C0,[t("div",T0,[o[20]||(o[20]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",P0,r(l($t)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},R0=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"})),O0={key:0,class:"text-center q-mb-md text-grey-8"},I0={class:"text-subtitle2 text-weight-medium"},U0={class:"text-h5 text-center text-primary q-pb-md"},D0={class:"text-center q-mt-md"},j0={key:0,class:"text-h6 text-negative text-weight-bold"},E0={key:1,class:"text-h6 text-green-8 text-weight-bold"},A0={key:2,class:"text-h6 text-positive text-weight-bold"},rn={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=ge(),n=T(!1),f=T({method:"cash",amount:u.total,notes:null}),b=i.props.data.customer,c=Z(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...b?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(V=>({label:V.name,value:V.id}))]),m=Z(()=>u.total-(f.value.amount||0)),g=Z(()=>{const V=f.value.amount||0;return u.total,V<=0?"Jumlah pembayaran harus lebih dari 0.":f.value.method==="wallet"&&b&&V>b.wallet_balance?"Saldo wallet tidak mencukupi.":null}),_=Z(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const V={total_paid:f.value.amount,payments:[{id:f.value.method,amount:f.value.amount}],notes:f.value.notes,change:Math.max(0,(f.value.amount||0)-u.total),remaining_debt:Math.max(0,u.total-(f.value.amount||0))};o("accepted",V),n.value=!1},S=()=>{f.value.amount=u.total,f.value.method="cash",f.value.notes=null};return(V,$)=>{const R=G("my-link");return d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":$[4]||($[4]=K=>V.$emit("update:modelValue",K)),onBeforeShow:S},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>$[5]||($[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",O0,[t("div",I0,[t("div",null,[e(R,{href:V.route("admin.customer.detail",{id:l(b).id}),target:"_blank"},{default:a(()=>[v(r(l(b).code)+" - "+r(l(b).name),1)]),_:1},8,["href"])]),t("div",{class:xe(l(b).wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(l(H)(l(b).wallet_balance)),3),t("div",{class:xe(l(b).balance>0?"text-green":"text-red")},r(l(b).balance>0?"Piutang":"Utang")+": "+r(l(H)(l(b).balance)),3)])])):k("",!0),t("div",U0," Total: Rp. "+r(l(H)(p.total)),1),e(l(de),{modelValue:f.value.method,"onUpdate:modelValue":$[0]||($[0]=K=>f.value.method=K),options:c.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Me,{modelValue:f.value.amount,"onUpdate:modelValue":$[1]||($[1]=K=>f.value.amount=K),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:f.value.notes,"onUpdate:modelValue":$[2]||($[2]=K=>f.value.notes=K),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",D0,[m.value>0?(d(),w("div",j0," Sisa Tagihan: Rp. "+r(l(H)(m.value)),1)):m.value<0?(d(),w("div",E0," Kembalian: Rp. "+r(l(H)(Math.abs(m.value))),1)):(d(),w("div",A0," Tagihan Terbayar "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:$[3]||($[3]=K=>V.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},B0=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"})),M0={class:"column"},N0={class:"row"},z0={class:"full-width",style:{"border-collapse":"collapse"}},F0={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},L0={class:"row items-center q-gutter-x-sm"},K0={class:"text-weight-bold"},H0={class:"row items-center q-gutter-x-sm q-mt-xs"},W0={class:"text-caption text-grey-6"},Y0={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Q0={class:"q-mt-xs"},J0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},G0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},X0={key:0},Z0={class:"text-right q-pa-sm"},dn={__name:"PaymentTab",props:{data:Object},setup(p){const s=p,u=$e(),o=T(!1),i=()=>{o.value=!0},n=async b=>{const c={order_id:s.data.id,payments:b.payments,notes:b.notes};u.loading.show({message:"Memproses pembayaran..."});try{const m=await Ie.post(route("admin.sales-order.add-payment"),c);u.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,ee.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(m){let g="Gagal memproses pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}},f=b=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await Ie.post(route("admin.sales-order.delete-payment",{id:b.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),ee.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(c){let m="Gagal menghapus pembayaran.";c.response&&c.response.data&&c.response.data.message?m=c.response.data.message:c.message&&(m=c.message),u.notify({message:m,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(b,c)=>{const m=G("my-link");return d(),w(Y,null,[t("div",M0,[e(Pe),e(te,{class:"q-pa-sm"},{default:a(()=>[t("div",N0,[b.$can("admin.sales-order.add-payment")?(d(),O(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:c[0]||(c[0]=X(g=>i(),["stop"]))})):k("",!0)]),t("table",z0,[c[5]||(c[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(Y,null,De(s.data.payments,g=>(d(),w("tr",{key:g.id},[t("td",F0,[t("div",L0,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",K0,r(g.code),1)]),t("div",H0,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",W0,r(l(ve)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),w("div",Y0,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),e(m,{href:b.route("admin.finance-account.detail",{id:g.account.id})},{default:a(()=>[v(r(g.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",Q0,[e(it,{label:b.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(it,{label:g.amount>0?"Pembayaran":"Refund",color:g.amount>0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",J0,r(l(H)(g.amount)),1),t("td",G0,[b.$can("admin.sales-order.delete-payment")&&s.data.customer_id&&g.amount>0?(d(),O(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",X0,c[2]||(c[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[c[3]||(c[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",Z0,r(l(H)(s.data.balance)),1),c[4]||(c[4]=t("td",null,null,-1))])])])]),_:1})]),e(rn,{modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=g=>o.value=g),total:Math.abs(s.data.balance),customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},e2=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"})),t2={class:"q-gutter-sm"},a2={class:"col col-lg-6 q-pa-xs",align:"center"},Nl="Rincian Penjualan",l2={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),u=ge(),o=u.props.data,i=T(s.get("preview")||!1),f=T(s.get("tab")||"invoice");he(()=>{mt(()=>{const c=s.get("print_size");c&&b(c)})});const b=c=>{window.open(route("admin.sales-order.print",{id:u.props.data.id,size:c}),"_self")};return(c,m)=>{const g=G("i-head"),_=G("authenticated-layout");return d(),w(Y,null,[e(g,{title:Nl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Nl))])]),"left-button":a(()=>[t("div",t2,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>i.value?l(ee).get(c.route("admin.sales-order.edit",l(u).props.data.id)):c.$goBack())})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=y=>b("a4"))}),i.value?k("",!0):(d(),O(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=y=>l(ee).get(c.route("admin.sales-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",a2,[e(pe,{square:"",flat:"",bordered:"",class:xe(["full-width",i.value?"draft-label":l(u).props.data.payment_status=="fully_paid"?"paid-label":"unpaid-label"]),style:{"max-width":"1024px"}},{default:a(()=>[e(Tt,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(d(),O(dt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Pt,{modelValue:f.value,"onUpdate:modelValue":m[5]||(m[5]=y=>f.value=y),animated:""},{default:a(()=>[e(nt,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(sn,{data:l(o)},null,8,["data"])]),_:1}),e(nt,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(dn,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])])]),_:1})]),_:1})],64)}}},o2=Object.freeze(Object.defineProperty({__proto__:null,default:l2},Symbol.toStringTag,{value:"Module"})),n2={class:"text-weight-medium"},s2={class:"text-caption text-grey-6 elipsis"},r2={class:"column items-end"},i2={class:"text-caption text-grey-6 text-italic"},un={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=$e(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),O(Ee,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:l(u)})},{header:a(f=>[e(Re,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(Y,null,De(f.cols,b=>(d(),O(oa,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Re,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left wrap-column"},{default:a(()=>[t("div",n2,r(f.row.product_name),1),t("div",s2,r(f.row.product_barcode),1),f.row.notes?(d(),O(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal_price",props:f,class:"text-right"},{default:a(()=>[t("div",r2,[t("div",null,r(l(H)(f.row.subtotal_price)),1),t("div",i2,r(l(H)(f.row.quantity))+" "+r(f.row.product_uom)+" x Rp. "+r(l(H)(f.row.price)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},d2=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"})),u2={key:0,class:"text-center q-mb-md text-grey-8"},m2={class:"text-subtitle2 text-weight-medium"},c2={class:"text-h5 text-center text-primary q-pb-md"},p2={class:"q-mb-md flex flex-center"},f2={key:1},g2={class:"col-6"},b2={class:"col-6"},v2={class:"row"},_2={class:"text-center q-mt-md"},y2={key:0,class:"text-h6 text-negative text-weight-bold"},k2={key:1,class:"text-h6 text-green-8 text-weight-bold"},w2={key:2,class:"text-h6 text-positive text-weight-bold"},h2={key:2},$2={class:"text-h6 text-negative text-center"},x2={key:3},mn={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=ge(),n=T(!1),f=T("cash"),b=T(new Date),c=T(i.props.settings.after_payment_action??"print"),m=T([]),g=T([]),_=je([{id:"cash",amount:0}]),y=i.props.settings.default_payment_mode,S=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],V=Z(()=>[{label:"Laci Kasir",value:"cash"},...u.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(F=>({label:F.name,value:F.id}))]),$=Z(()=>_.reduce((F,q)=>F+(q.amount||0),0)),R=Z(()=>u.total-$.value),K=Z(()=>{if(!u.customer)return!0;const F=_.find(N=>N.id==="wallet");return(F?F.amount:0)<=u.customer.wallet_balance}),I=new Date,D=ut.addToDate(new Date,{days:30}),U=Z(()=>[F=>!!F||"Tanggal jatuh tempo harus diisi",F=>ut.isBetweenDates(F,I,D,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),z=Z(()=>{if(f.value==="debt")return!!u.customer&&U.value.every(me=>me(b.value)===!0);const F=K.value,q=_.some(me=>(me.amount||0)>0),N=_.every(me=>(me.amount||0)>=0),le=R.value<=0;return F&&q&&N&&le}),M=()=>{if(_.length<3){const F=_.length;_.push({id:"cash",amount:0}),mt(()=>{const q=m.value[F];q&&(q.focus(),q.showPopup())})}},h=F=>{if(_.length>1){const q=_.findIndex(N=>N.id===F);q!==-1&&_.splice(q,1)}},j=(F,q="cash")=>{f.value=F,b.value=new Date,_.splice(0,_.length),F==="cash"&&(_.splice(0,_.length,{id:q,amount:u.total}),mt(()=>{g.value.length>0&&g.value[0]&&(g.value[0].focus(),g.value[0].select())}))},P=()=>{if(!z.value)return;n.value=!0;let F={total:u.total,is_debt:f.value==="debt",after_payment_action:c.value};if(f.value==="debt")F.due_date=ut.formatDate(b.value,"YYYY-MM-DD"),F.payments=[];else{const q=$.value,N=q>u.total?q-u.total:0,le=R.value>0?R.value:0;F.payments=_,F.remaining_debt=le,F.change=N}o("accepted",F),n.value=!1},x=()=>{j("cash",u.customer?y:"cash")};he(()=>{const F=q=>{u.modelValue&&q.ctrlKey&&q.key==="Enter"&&(q.preventDefault(),P())};document.addEventListener("keydown",F),wt(()=>{document.removeEventListener("keydown",F)})});const A=(F,q)=>{mt(()=>{g.value[q]&&(g.value[q].focus(),g.value[q].select())})};return(F,q)=>{const N=G("my-link");return d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":q[4]||(q[4]=le=>F.$emit("update:modelValue",le)),onBeforeShow:x},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>q[5]||(q[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[p.customer?(d(),w("div",u2,[t("div",m2,[t("div",null,[e(N,{href:F.route("admin.customer.detail",{id:p.customer.id}),target:"_blank"},{default:a(()=>[v(r(p.customer.code)+" - "+r(p.customer.name),1)]),_:1},8,["href"])]),t("div",{class:xe(p.customer.wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(l(H)(p.customer.wallet_balance)),3),t("div",{class:xe(p.customer.balance>0?"text-green":"text-red")},r(p.customer.balance>0?"Piutang":"Utang")+": "+r(l(H)(p.customer.balance)),3)])])):k("",!0),t("div",c2," Total: Rp. "+r(l(H)(p.total)),1),t("div",p2,[e(l(Qt),{modelValue:f.value,"onUpdate:modelValue":[q[0]||(q[0]=le=>f.value=le),j],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="cash"?(d(),w("div",f2,[(d(!0),w(Y,null,De(_,(le,me)=>(d(),w("div",{key:me,class:"row q-col-gutter-sm q-mb-sm"},[t("div",g2,[e(l(de),{modelValue:le.id,"onUpdate:modelValue":[ie=>le.id=ie,ie=>A(ie,me)],options:V.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:ie=>m.value[me]=ie},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",b2,[e(Me,{modelValue:le.amount,"onUpdate:modelValue":ie=>le.amount=ie,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:le.id==="wallet"&&!K.value,"error-message":le.id==="wallet"&&!K.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:ie=>g.value[me]=ie},ze({_:2},[_.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:ie=>h(le.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",v2,[e(E,{disable:!(_.length<3&&R.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:M,size:"sm"},null,8,["disable"])]),t("div",_2,[R.value>0?(d(),w("div",y2," Sisa Tagihan: Rp. "+r(l(H)(R.value)),1)):R.value<0?(d(),w("div",k2," Kembalian: Rp. "+r(l(H)(Math.abs(R.value))),1)):(d(),w("div",w2," Tagihan Terbayar "))])])):f.value==="debt"&&p.customer?(d(),w("div",h2,[e(pa,{outlined:"",modelValue:b.value,"onUpdate:modelValue":q[1]||(q[1]=le=>b.value=le),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(I),"max-date":l(D),rules:U.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",$2," Total Utang: Rp. "+r(l(H)(p.total)),1)])):f.value==="debt"&&!p.customer?(d(),w("div",x2,q[6]||(q[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(l(de),{modelValue:c.value,"onUpdate:modelValue":q[2]||(q[2]=le=>c.value=le),options:S,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:n.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(E,{flat:"",label:"Batal",color:"grey",onClick:q[3]||(q[3]=le=>F.$emit("update:modelValue",!1)),class:"col"}),e(E,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:P,disable:n.value||!z.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},S2=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),V2={class:"row items-center no-wrap"},q2={class:"col-auto"},cn={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=Z(()=>o.item.quantity*o.item.price),b=g=>{g.stopPropagation(),g.preventDefault()},c=g=>{o.modelValue&&(g.key==="Enter"?(n(),i("update:modelValue",!1),b(g)):g.key==="Escape"&&(i("update:modelValue",!1),b(g)))};return he(()=>{window.addEventListener("keydown",c)}),wt(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item}),(g,_)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>g.$emit("update:modelValue",y))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",V2,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",q2,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>g.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(se,{modelValue:p.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=y=>p.item.product_name=y),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=y=>p.item.quantity=y),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.price,"onUpdate:modelValue":_[3]||(_[3]=y=>p.item.price=y),label:"Harga",readonly:!p.item.product.price_editable,"hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","readonly","disable"]),e(Me,{modelValue:f.value,"onUpdate:modelValue":_[4]||(_[4]=y=>f.value=y),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:p.item.notes,"onUpdate:modelValue":_[5]||(_[5]=y=>p.item.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},C2=Object.freeze(Object.defineProperty({__proto__:null,default:cn},Symbol.toStringTag,{value:"Module"})),T2={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(u,o)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[ae(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},pn=_t(T2,[["__scopeId","data-v-92052544"]]),P2=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),R2={class:"row items-center no-wrap"},O2={class:"col text-subtite text-bold text-grey-8"},I2={class:"col-auto"},fn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=m=>{m.stopPropagation(),m.preventDefault()},b=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(i("update:modelValue",!1),f(m)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",R2,[t("div",O2," Edit "+r(p.data.code),1),t("div",I2,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(Ht,{modelValue:p.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:p.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[ae(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),ae(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},U2=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"})),D2={key:0},j2={style:{float:"right"}},E2={key:1},A2={style:{float:"right"}},B2={key:2},M2={style:{float:"right"}},N2={key:3},z2={style:{float:"right"}},F2={style:{float:"right"}},L2={class:"q-gutter-sm"},K2={class:"q-my-md"},H2={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const u=T(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),O(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),w("tr",D2,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",j2,r(l(H)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),w("tr",E2,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",A2,r(l(H)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),w("tr",B2,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",M2,r(l(H)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),w("tr",N2,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",z2,r(l(H)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",F2,r(l(H)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",L2,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",K2,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},gn=_t(H2,[["__scopeId","data-v-794fd35f"]]),W2=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),Y2={class:"q-gutter-sm"},Q2={class:"row items-center"},J2={class:"text-weight-bold"},G2={class:"text-weight-bold"},X2={class:"row q-col-gutter-none full-width"},Z2={class:"col-sm-6 col-12 col"},eh={class:"row full-width"},th={key:0,class:"row"},ah={class:"col-sm-6 col-12"},lh={class:"row q-ml-sm items-end"},oh={class:"row col grow"},nh={class:"col-12 q-pa-sm column"},sh={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},rh={key:0,class:"col"},ih={class:"text-caption text-grey-6 q-mt-xs"},dh={key:0,class:"text-caption text-grey-8 q-mt-xs"},uh={class:"text-italic"},mh={key:1,class:"col"},ch={class:"q-pa-sm q-pb-none text-grey-8"},ph={class:"col"},fh={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},gh={class:"text-h4 text-weight-bold"},bh={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},vh={class:"col q-py-sm"},_h={class:"q-py-sm"},yh={__name:"Editor",setup(p){const s=$e(),u=ge(),o=T(!0),i=T(null),n=T(null),f=T(null),b=T(!1),c=T(null),m=T(null),{isFullscreen:g,toggleFullscreen:_}=$a(m),y=u.props.data.code,S=T(u.props.data.customer),V=T(null),$=T(""),R=T(!1),K=T(!1),I=T(!1),D=T(!1),U=T(!1),z=T(!1),M=T(null),h=T("price_1"),j=je({id:u.props.data.id,code:u.props.data.code,customer_id:u.props.data.customer_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),P=Z(()=>j.items.reduce((ue,J)=>ue+J.price*J.quantity,0)),x=()=>{var ue;_(),g.value||(ue=c==null?void 0:c.value)==null||ue.hideDrawer()},A=ue=>isNaN(ue)||ue<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,F=ue=>isNaN(ue)||ue<0?(bt("Harga tidak valid.","top"),!1):!0,q=ue=>!ue||ue.length==0?(bt("Barcode tidak valid.","top"),!1):!0,N=ue=>{var J;(J=$.value)!=null&&J.endsWith("*")?$.value+=ue.name:$.value=ue.name},le=async()=>{var ht;if(R.value)return;const ue=(ht=$.value)==null?void 0:ht.trim();if(ue.length===0){I.value=!0;return}const J=ue.split("*");let qe=1,Be="",we=null;if(J.length===1)Be=J[0];else if(J.length<=3)qe=parseInt(J[0]),Be=J[1],J.length===3&&(we=parseFloat(J[2]));else{bt("Input tidak valid.","top");return}if(Be.length===0){I.value=!0;return}!q(Be)&&!A(qe)&&!F(we)||(R.value=!0,await Ie.post(route("admin.sales-order.add-item"),{order_id:j.id,product_code:Be,qty:qe,price:we,merge:o.value}).then(qt=>{const jt=qt.data.data.item;let St=-1;qt.data.data.mergeItem&&(St=j.items.findIndex(fa=>fa.id===jt.id)),St===-1?j.items.push(jt):j.items[St]=jt,$.value="",we!==null&&we!==parseFloat(jt.price)&&bt("Harga tidak dapat diubah!","top")}).catch(qt=>{var jt,St;ft((St=(jt=qt.response)==null?void 0:jt.data)==null?void 0:St.message,"top"),console.error("Gagal mengambil data produk:",qt)}),R.value=!1,mt(()=>{var qt;(qt=i.value)==null||qt.focus()}))},me=ue=>{M.value=Object.create(ue),D.value=!0},ie=ue=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ue.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{R.value=!0,Ie.post(route("admin.sales-order.remove-item"),{id:ue.id}).then(()=>{const J=j.items.findIndex(qe=>qe.id===ue.id);J!==-1&&(j.items.splice(J,1)[0],gt("Item telah dihapus","top"))}).catch(J=>{var qe,Be;ft(((Be=(qe=J==null?void 0:J.response)==null?void 0:qe.data)==null?void 0:Be.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(J)}).finally(()=>{R.value=!1})})},Oe=()=>{R.value=!0;const ue=n.value.getCurrentItem(),J={id:ue.id,qty:ue.quantity};ue.product.price_editable&&(J.price=ue.price),ue.notes&&(J.notes=ue.notes),Ie.post(route("admin.sales-order.update-item"),J).then(qe=>{const Be=qe.data.data,we=j.items.findIndex(ht=>ht.id===Be.id);we!==-1&&(j.items[we]=Be,gt("Item telah diperbarui","top"))}).catch(qe=>{var Be,we;ft(((we=(Be=qe==null?void 0:qe.response)==null?void 0:Be.data)==null?void 0:we.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(qe)}).finally(()=>{R.value=!1})};he(()=>{const ue=J=>{K.value||b.value||D.value||I.value||U.value||(J.key==="F1"?(J.preventDefault(),b.value=!0):J.key==="F2"?(J.preventDefault(),f.value.focus()):J.key==="F3"?(J.preventDefault(),i.value.focus()):J.key==="F4"?(J.preventDefault(),o.value=!o.value):J.key==="F10"||J.ctrlKey&&J.key==="Enter"?(J.preventDefault(),ke.value&&(K.value=!0)):J.key==="F11"?(J.preventDefault(),x()):(J.key==="F5"||J.key==="F6"||J.key==="F7"||J.key==="F12")&&J.preventDefault())};document.addEventListener("keydown",ue),wt(()=>{document.removeEventListener("keydown",ue)}),mt(()=>{var J;(J=c==null?void 0:c.value)==null||J.hideDrawer()})});const Xe=async ue=>{S.value=ue,j.customer_id=ue==null?void 0:ue.id,await ce(),ue!=null&&ue.id?(h.value=S.value.default_price_type??"price_1",i.value.focus()):(h.value="price_1",f.value.focus())},ce=async()=>{R.value=!0;const ue={id:j.id,customer_id:j.customer_id??null,datetime:aa(j.datetime),notes:j.notes};await Ie.post(route("admin.sales-order.update"),ue).then(J=>{const qe=J.data.data.id;j.customer_id=qe.customer_id}).catch(J=>{var qe,Be;ft(((Be=(qe=J==null?void 0:J.response)==null?void 0:qe.data)==null?void 0:Be.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(J)}).finally(()=>{R.value=!1})},L=ue=>{if(j.items.length===0){gt("Item masih kosong","top");return}const J={id:j.id,...ue};R.value=!0,Ie.post(route("admin.sales-order.close"),J).then(qe=>{gt("Transaksi selesai"),J.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:j.id,size:u.props.settings.default_print_size}),"_self"):J.after_payment_action==="detail"?ee.get(route("admin.sales-order.detail",{id:j.id})):J.after_payment_action==="new-order"&&ee.get(route("admin.sales-order.add"))}).catch(qe=>{var Be,we;ft((we=(Be=qe.response)==null?void 0:Be.data)==null?void 0:we.message),console.error(qe)}).finally(()=>{R.value=!1})},ye=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${j.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ie.post(route("admin.sales-order.cancel",{id:j.id}),{id:j.id}).then(()=>{gt("Transaksi telah dibatalkan."),ee.visit(route("admin.sales-order.detail",{id:j.id}))}).catch(ue=>{var qe,Be;const J=((Be=(qe=ue.response)==null?void 0:qe.data)==null?void 0:Be.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:J,color:"warning",position:"bottom"}),console.error(ue)})})},re=()=>{window.open(route("admin.sales-order.detail",{id:j.id})+"?preview=1","_blank")},W=Z(()=>S.value?S.value.wallet_balance>=P.value:!0),ke=Z(()=>Ot().appContext.config.globalProperties.$can("admin.sales-order.close")&&!R.value&&j.items.length!==0&&j.status==="draft");return(ue,J)=>{const qe=G("i-head"),Be=G("authenticated-layout");return d(),w(Y,null,[e(qe,{title:l(y)},null,8,["title"]),e(Be,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[v(r(l(y)),1)]),"left-button":a(()=>[t("div",Y2,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:J[0]||(J[0]=we=>l(ee).get(ue.route("admin.sales-order.index")))})])]),"right-button":a(()=>{var we,ht;return[t("div",Q2,[l(s).screen.gt.sm?(d(),w(Y,{key:0},[t("div",J2,r(l(u).props.auth.user.username),1),J[23]||(J[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",G2,r((ht=(we=l(u).props.data.cashier_session)==null?void 0:we.cashier_terminal)==null?void 0:ht.name),1),J[24]||(J[24]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ha)])],64)):k("",!0),k("",!0)])]}),default:a(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:a(()=>[t("div",X2,[t("div",Z2,[t("div",eh,[e(ln,{ref_key:"customerAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:S.value,"onUpdate:modelValue":J[2]||(J[2]=we=>S.value=we),label:"Pelanggan",disable:R.value,onCustomerSelected:Xe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),S.value?(d(),w("div",th,[t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",W.value?"text-green":"text-red"])}," Wallet: "+r(S.value?"Rp. "+l(H)(S.value?S.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",S.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(S.value?"Rp. "+l(H)(S.value?S.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",ah,[e(Sa,{ref_key:"userInputRef",ref:i,modelValue:$.value,"onUpdate:modelValue":J[3]||(J[3]=we=>$.value=we),onKeyup:J[4]||(J[4]=Jt(X(we=>le(),["prevent"]),["enter"])),onScanSuccess:J[5]||(J[5]=we=>le()),onSend:J[6]||(J[6]=we=>le()),onSearch:J[7]||(J[7]=we=>I.value=!0),loading:R.value,disable:R.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",lh,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":J[8]||(J[8]=we=>o.value=we),label:"Gabungkan item",disable:R.value},null,8,["modelValue","disable"])])])]),t("div",oh,[t("div",nh,[e(un,{items:j.items,onUpdateQuantity:J[9]||(J[9]=({id:we,value:ht})=>ue.updateQuantity(we,ht)),onRemoveItem:ie,onEditItem:me,"is-processing":R.value},null,8,["items","is-processing"])])]),t("div",sh,[l(s).screen.gt.sm?(d(),w("div",rh,[t("div",ih,r(j.items.length)+" item(s) ",1),j.notes?(d(),w("div",dh,[J[25]||(J[25]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",uh,[e(Se,{text:j.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",mh,[t("div",ch,[t("div",null,"#: "+r(j.code),1),t("div",null,r(l(ve)(j.datetime)),1)])])):k("",!0),t("div",ph,[t("div",fh,[J[27]||(J[27]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",gh,[J[26]||(J[26]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(H)(P.value)),1)])])])]),t("div",bh,[t("div",vh,[e(E,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:J[10]||(J[10]=we=>K.value=!0),disable:!ke.value,loading:R.value},null,8,["disable","loading"])]),t("div",_h,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:J[14]||(J[14]=X(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[ae((d(),O(oe,{clickable:"",onClick:J[11]||(J[11]=X(we=>U.value=!0,["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>J[28]||(J[28]=[v("Edit Rincian")])),_:1})]),_:1})),[[ne],[fe]]),ae((d(),O(oe,{clickable:"",onClick:J[12]||(J[12]=X(we=>re(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(B,null,{default:a(()=>J[29]||(J[29]=[v("Pratinjau")])),_:1})]),_:1})),[[ne],[fe]]),ae((d(),O(oe,{clickable:"",onClick:J[13]||(J[13]=X(we=>ye(),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(B,{class:"text-negative"},{default:a(()=>J[30]||(J[30]=[v(" Batalkan ")])),_:1})]),_:1})),[[ne],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(cn,{ref_key:"itemEditorRef",ref:n,modelValue:D.value,"onUpdate:modelValue":J[15]||(J[15]=we=>D.value=we),item:M.value,onSave:J[16]||(J[16]=we=>Oe()),"is-processing":R.value},null,8,["modelValue","item","is-processing"]),e(mn,{modelValue:K.value,"onUpdate:modelValue":J[17]||(J[17]=we=>K.value=we),onAccepted:L,form:j,customer:S.value,total:P.value,accounts:l(u).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(xa,{modelValue:I.value,"onUpdate:modelValue":J[18]||(J[18]=we=>I.value=we),onProductSelected:N,priceType:h.value,"show-cost":ue.$can("admin.product:view-cost")},null,8,["modelValue","priceType","show-cost"]),e(fn,{modelValue:U.value,"onUpdate:modelValue":J[19]||(J[19]=we=>U.value=we),data:j,onSave:J[20]||(J[20]=we=>ce()),"is-processing":R.value},null,8,["modelValue","data","is-processing"]),e(pn,{modelValue:b.value,"onUpdate:modelValue":J[21]||(J[21]=we=>b.value=we)},null,8,["modelValue"]),e(gn,{modelValue:z.value,"onUpdate:modelValue":J[22]||(J[22]=we=>z.value=we),order:j,customer:S.value,total:P.value,payment:V.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},kh=Object.freeze(Object.defineProperty({__proto__:null,default:yh},Symbol.toStringTag,{value:"Module"})),wh={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.SALES_ORDER_STATUSES,u={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(d(),O(Ft,{status:p.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}},hh={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,u={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(d(),O(Ft,{status:p.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}};const $h={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},xh={class:"q-pa-xs"},Sh={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Vh={key:0},qh={key:1},Ch={key:2},Th={key:4},Ph={key:0},Rh={key:1},Oh={key:0},Ih={key:0},Uh={key:1},Dh={class:"flex justify-end"},zl="Penjualan",jh={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=Lt(),m=Kt(),g=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...It(c-2,c-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Ut()],y=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.SALES_ORDER_STATUSES)],S=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],V=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],$=je({search:"",year:c,month:m,status:"all",payment_status:"all",delivery_status:"all",...Le()}),R=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),K=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{h()});const I=x=>{if(x.status=="draft"){D(x);return}U(x)},D=x=>{ee.get(route("admin.sales-order.edit",x.id))},U=x=>{ee.get(route("admin.sales-order.detail",x.id))},z=x=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${x.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ie.post(route("admin.sales-order.cancel",{id:x.id}),{id:x.id}).then(A=>{const F=A.data.data,q=o.value.findIndex(N=>N.id===F.id);if(q===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[q].status="canceled",s.notify({message:A.data.message,position:"bottom"})}).catch(A=>{var q,N;const F=((N=(q=A.response)==null?void 0:q.data)==null?void 0:N.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:F,color:"warning",position:"bottom"}),console.error(A)})})},M=x=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${x.code}?`,url:route("admin.sales-order.delete",x.id),fetchItemsCallback:h,loading:i}),h=(x=null)=>{Ke({pagination:R,filter:$,props:x,rows:o,url:route("admin.sales-order.data"),loading:i,tableRef:n})},j=()=>{h()},P=Z(()=>s.screen.gt.sm?K:K.filter(x=>x.name==="id"||x.name==="action"));return Ne(()=>$.year,x=>{x===null&&($.month=null)}),(x,A)=>{const F=G("i-head"),q=G("authenticated-layout");return d(),w(Y,null,[e(F,{title:zl}),e(q,null,ze({title:a(()=>[v(r(zl))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=N=>u.value=!u.value)},null,8,["icon"]),x.$can("admin.sales-order.edit")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:A[1]||(A[1]=N=>l(ee).get(x.route("admin.sales-order.add")))})):k("",!0)]),default:a(()=>[t("div",xh,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:R.value,"onUpdate:pagination":A[11]||(A[11]=N=>R.value=N),filter:$.search,loading:i.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:h,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:N,message:le,filter:me})=>[t("div",Sh,[t("span",null,r(le)+" "+r(me?" with term "+me:""),1)])]),body:a(N=>[e(Re,{props:N,class:"cursor-pointer",onClick:X(le=>I(N.row),["prevent"])},{default:a(()=>[e(Q,{key:"id",props:N,class:"wrap-column"},{default:a(()=>{var le,me,ie;return[t("div",null,[e(C,{name:"tag"}),v(" "+r(N.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(N.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[N.row.cashier?(d(),w("div",Vh,[e(C,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((le=N.row.cashier)==null?void 0:le.username),1)])):k("",!0),N.row.cashier_session?(d(),w("div",qh,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((ie=(me=N.row.cashier_session)==null?void 0:me.cashier_terminal)==null?void 0:ie.name),1)])):k("",!0),N.row.customer?(d(),w("div",Ch,[e(C,{name:"person",class:"inline-icon"}),A[12]||(A[12]=v(" Pelanggan: ")),e(ka,{href:x.route("admin.customer.detail",{id:N.row.customer.id}),onClick:A[8]||(A[8]=X(()=>{},["stop"]))},{default:a(()=>[v(" "+r(N.row.customer.code)+" - "+r(N.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,[e(C,{name:"wallet",class:"inline-icon"}),v(" Total: Rp. "+r(l(H)(N.row.grand_total)),1)]),N.row.balance!=0?(d(),w("div",{key:3,class:xe(N.row.balance>0?"text-green":"text-red")},[e(C,{name:"balance",class:"inline-icon"}),v(" "+r(N.row.balance>0?"Piutang":"Utang")+": Rp. "+r(l(H)(N.row.balance)),1)],2)):k("",!0),N.row.notes?(d(),w("div",Th,[e(C,{name:"notes"}),v(" "+r(N.row.notes),1)])):k("",!0)],64)),t("div",null,[e(wh,{status:N.row.status},null,8,["status"]),N.row.status=="closed"?(d(),w(Y,{key:0},[e(hh,{status:N.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]}),_:2},1032,["props"]),e(Q,{key:"cashier_id",props:N},{default:a(()=>{var le,me,ie;return[N.row.cashier?(d(),w("div",Ph,[e(C,{name:"person",class:"inline-icon"}),v(" "+r((le=N.row.cashier)==null?void 0:le.username),1)])):k("",!0),N.row.cashier_session?(d(),w("div",Rh,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((ie=(me=N.row.cashier_session)==null?void 0:me.cashier_terminal)==null?void 0:ie.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Q,{key:"customer_id",props:N},{default:a(()=>[N.row.customer?(d(),w("div",Oh,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(N.row.customer_code)+" - "+r(N.row.customer_name),1)]),N.row.customer_phone?(d(),w("div",Ih,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(N.row.customer_phone),1)])):k("",!0),N.row.customer_address?(d(),w("div",Uh,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(N.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:N},{default:a(()=>[v(r(l(H)(N.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:N,class:xe(N.row.balance>0?"text-green":"text-red")},{default:a(()=>[v(r(l(H)(N.row.balance)),1)]),_:2},1032,["props","class"]),e(Q,{key:"notes",props:N},{default:a(()=>[e(Se,{text:N.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:N,onClick:A[10]||(A[10]=X(()=>{},["stop"]))},{default:a(()=>[t("div",Dh,[x.$can("admin.sales-order.detail")||x.$can("admin.sales-order.edit")||x.$can("admin.sales-order.cancel")||x.$can("admin.sales-order.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:A[9]||(A[9]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[N.row.status!="draft"&&x.$can("admin.sales-order.detail")?ae((d(),O(oe,{key:0,onClick:X(le=>U(N.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(B,null,{default:a(()=>A[13]||(A[13]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),N.row.status=="draft"&&x.$can("admin.sales-order.edit")?ae((d(),O(oe,{key:1,onClick:X(le=>D(N.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>A[14]||(A[14]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),N.row.status=="draft"&&x.$can("admin.sales-order.cancel")?ae((d(),O(oe,{key:2,onClick:X(le=>z(N.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(B,null,{default:a(()=>A[15]||(A[15]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),e(Pe),x.$can("admin.sales-order.delete")?ae((d(),O(oe,{key:3,onClick:X(le=>M(N.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>A[16]||(A[16]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",$h,[e(de,{modelValue:$.year,"onUpdate:modelValue":[A[2]||(A[2]=N=>$.year=N),j],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),$.year!="all"?(d(),O(de,{key:0,modelValue:$.month,"onUpdate:modelValue":[A[3]||(A[3]=N=>$.month=N),j],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:$.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:$.status,"onUpdate:modelValue":[A[4]||(A[4]=N=>$.status=N),j],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(de,{modelValue:$.payment_status,"onUpdate:modelValue":[A[5]||(A[5]=N=>$.payment_status=N),j],options:S,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":A[7]||(A[7]=N=>$.search=N),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Eh=Object.freeze(Object.defineProperty({__proto__:null,default:jh},Symbol.toStringTag,{value:"Module"})),Ah={},Bh={class:"row"},Mh={class:"q-mb-md text-h6"};function Nh(p,s){const u=G("i-head"),o=G("authenticated-layout");return d(),w(Y,null,[e(u,{title:"Informasi Sistem"}),e(o,null,{title:a(()=>s[0]||(s[0]=[v("Informasi Sistem")])),default:a(()=>[t("div",Bh,[e(pe,{class:"col q-ma-xs",square:"",flat:"",bordered:""},{default:a(()=>[e(te,null,{default:a(()=>[t("div",Mh,"Tentang "+r(p.$config.APP_NAME),1),v(" Versi : "+r(p.$config.APP_VERSION_STR),1),s[1]||(s[1]=t("br",null,null,-1)),s[2]||(s[2]=v(" Dikembangkan oleh Shiftech Indonesia")),s[3]||(s[3]=t("br",null,null,-1)),s[4]||(s[4]=v(" CV. Shift Karya Teknologi "))]),_:1})]),_:1})])]),_:1})],64)}const zh=_t(Ah,[["render",Nh]]),Fh=Object.freeze(Object.defineProperty({__proto__:null,default:zh},Symbol.toStringTag,{value:"Module"})),bn={__name:"CompanyInfoForm",setup(p){const s=T(),u=ge(),o=Qe({name:u.props.data.name,headline:u.props.data.headline,phone:u.props.data.phone,address:u.props.data.address,logo_path:u.props.data.logo_path,logo_image:null}),i=T(null),n=T("");he(()=>{o.logo_path&&(n.value=`/${o.logo_path}`)});function f(){i.value.click()}function b(g){const _=g.target.files[0];_&&(o.logo_image=_,n.value=URL.createObjectURL(_))}function c(){o.logo_image=null,o.logo_path=null,n.value=null,i.value.value=null}const m=()=>rt({form:o,url:route("admin.company-profile.edit")});return(g,_)=>(d(),O(Je,{class:"row",onSubmit:X(m,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[_[8]||(_[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),_[9]||(_[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(se,{ref_key:"nameInputRef",ref:s,modelValue:l(o).name,"onUpdate:modelValue":_[0]||(_[0]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(se,{modelValue:l(o).headline,"onUpdate:modelValue":_[1]||(_[1]=y=>l(o).headline=y),modelModifiers:{trim:!0},label:"Headline",disable:l(o).processing,maxlength:"200","lazy-rules":"",error:!!l(o).errors.headline,"error-message":l(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).phone,"onUpdate:modelValue":_[2]||(_[2]=y=>l(o).phone=y),modelModifiers:{trim:!0},label:"No Telepon",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.phone,"error-message":l(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(o).address,"onUpdate:modelValue":_[3]||(_[3]=y=>l(o).address=y),modelModifiers:{trim:!0},label:"Alamat",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[_[7]||(_[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(E,{label:"Browse Logo",size:"sm",onClick:f,color:"secondary",icon:"add_a_photo",disable:l(o).processing},null,8,["disable"]),e(E,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:l(o).processing||!n.value,color:"red",onClick:c},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*",style:{display:"none"},onChange:b},null,544),t("div",null,[e(ma,{src:n.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},ze({error:a(()=>[_[4]||(_[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[n.value?void 0:{name:"default",fn:a(()=>[_[5]||(_[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),_[6]||(_[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(te,null,{default:a(()=>[e(E,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Lh=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"})),Kh={class:"q-pa-xs"},Hh={class:"row justify-center"},Wh={class:"col col-md-6"},Fl="Profil Perusahaan",Yh={__name:"Edit",setup(p){return(s,u)=>{const o=G("i-head"),i=G("authenticated-layout");return d(),w(Y,null,[e(o,{title:Fl}),e(i,null,{title:a(()=>[v(r(Fl))]),default:a(()=>[t("div",Kh,[t("div",Hh,[t("div",Wh,[e(bn)])])])]),_:1})],64)}}},Qh=Object.freeze(Object.defineProperty({__proto__:null,default:Yh},Symbol.toStringTag,{value:"Module"})),Jh={class:"col-xs-12 col-md-8"},Gh={class:"col-xs-12 col-sm-9"},Xh={class:"col-xs-12 col-sm-3 text-right"},Ll="Pengaturan Database & Utilitas",Zh={__name:"Index",setup(p){const s=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:" **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:" **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:" **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(u,o)=>{const i=G("i-head"),n=G("authenticated-layout");return d(),w(Y,null,[e(i,{title:Ll}),e(n,null,{title:a(()=>[v(r(Ll))]),default:a(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",Jh,[e(pe,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(te,null,{default:a(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Gt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:a(()=>[e(C,{name:"warning",color:"red"})]),default:a(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=v(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(Pe),e(te,{class:"q-gutter-y-lg"},{default:a(()=>[(d(),w(Y,null,De(s,f=>t("div",{key:f.name,class:"row items-center q-col-gutter-md"},[t("div",Gh,[e(oe,{class:"q-pa-none"},{default:a(()=>[e(B,{avatar:"",class:"q-pr-md"},{default:a(()=>[e(C,{name:f.icon,color:f.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(B,{style:{"text-wrap":"initial"}},{default:a(()=>[e(be,{class:"text-subtitle1 text-bold"},{default:a(()=>[v(r(f.name),1)]),_:2},1024),e(be,{caption:"",class:"q-pb-sm"},{default:a(()=>[v(r(f.description),1)]),_:2},1024),e(be,{class:"text-caption text-negative text-bold"},{default:a(()=>[v(r(f.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",Xh,[e(E,{icon:f.icon,label:f.name.split(" ")[0],color:f.color,disable:f.disable,onClick:f.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},e$=Object.freeze(Object.defineProperty({__proto__:null,default:Zh},Symbol.toStringTag,{value:"Module"})),t$={class:"q-pa-xs"},a$={class:"row justify-center"},l$={class:"col col-md-6"},o$={__name:"Edit",setup(p){const s=ge(),u=Qe({foot_note:s.props.data.foot_note,default_payment_mode:s.props.data.default_payment_mode,default_print_size:s.props.data.default_print_size,after_payment_action:s.props.data.after_payment_action}),o=()=>rt({form:u,url:route("admin.pos-settings.edit")}),i=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],n=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],f=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(b,c)=>{const m=G("i-head"),g=G("authenticated-layout");return d(),w(Y,null,[e(m,{title:"Pengaturan POS"}),e(g,null,{title:a(()=>c[4]||(c[4]=[v("Pengaturan POS")])),default:a(()=>[t("div",t$,[t("div",a$,[t("div",l$,[e(Je,{class:"row",onSubmit:X(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[c[5]||(c[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),c[6]||(c[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(de,{modelValue:l(u).default_payment_mode,"onUpdate:modelValue":c[0]||(c[0]=_=>l(u).default_payment_mode=_),label:"Default Pembayaran",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:l(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(u).errors.default_payment_mode,"error-message":l(u).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:l(u).default_print_size,"onUpdate:modelValue":c[1]||(c[1]=_=>l(u).default_print_size=_),label:"Default Ukuran Cetak",options:n,"map-options":"","emit-value":"","lazy-rules":"",disable:l(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(u).errors.default_print_size,"error-message":l(u).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(de,{modelValue:l(u).after_payment_action,"onUpdate:modelValue":c[2]||(c[2]=_=>l(u).after_payment_action=_),label:"Aksi Setelah Pembayaran",options:f,"map-options":"","emit-value":"","lazy-rules":"",disable:l(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(u).errors.after_payment_action,"error-message":l(u).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(u).foot_note,"onUpdate:modelValue":c[3]||(c[3]=_=>l(u).foot_note=_),modelModifiers:{trim:!0},label:"Foot Note",disable:l(u).processing,"lazy-rules":"",error:!!l(u).errors.foot_note,"error-message":l(u).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,null,{default:a(()=>[e(E,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(u).processing,loading:l(u).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},n$=Object.freeze(Object.defineProperty({__proto__:null,default:o$},Symbol.toStringTag,{value:"Module"})),s$={class:"q-gutter-sm"},r$={class:"q-gutter-sm"},i$={class:"col col-md-6 q-pa-xs"},d$={class:"row"},u$={class:"detail-item"},m$={class:"detail-value"},c$={class:"detail-item"},p$={class:"detail-value"},f$={class:"detail-item"},g$={class:"detail-value"},b$={class:"detail-item"},v$={class:"detail-value"},_$={class:"detail-item"},y$={class:"detail-value"},k$={class:"detail-item"},w$={class:"detail-value"},h$={class:"detail-item"},$$={class:"detail-value"},x$={class:"detail-item"},S$={class:"detail-value user-agent-value"},V$={class:"q-pt-md"},q$={class:"table-wrapper-scroll"},C$={key:0,class:"table-metadata"},T$={key:0},P$={colspan:"100%"},R$={class:"text-mono json-pre-scroll"},O$={key:1},I$={class:"metadata-label",style:{width:"100px"}},U$={class:"metadata-value"},D$={key:0,class:"text-mono json-pre-scroll"},j$={key:2},E$={colspan:"3"},A$={class:"table-metadata"},B$={class:"metadata-label"},M$={class:"metadata-value"},N$={class:"metadata-value"},z$={key:1,class:"text-grey-8 text-italic q-pa-sm"},Kl="Rincian Log Aktifitas",F$={__name:"Detail",setup(p){const s=ge(),u=()=>st({message:`Hapus log aktifitas #${s.props.data.id}?`,url:route("admin.user-activity-log.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.user-activity-log.index"))}});return(o,i)=>{const n=G("i-head"),f=G("i-link"),b=G("authenticated-layout");return d(),w(Y,null,[e(n,{title:Kl}),e(b,{"show-drawer-button":!0},{title:a(()=>[v(r(Kl))]),"left-button":a(()=>[t("div",s$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=c=>o.$goBack())})])]),"right-button":a(()=>[t("div",r$,[e(E,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=c=>u())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",i$,[t("div",d$,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"detail-group"},{default:a(()=>[i[20]||(i[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",u$,[i[2]||(i[2]=t("div",{class:"detail-label"},"ID",-1)),i[3]||(i[3]=t("div",{class:"detail-separator"},":",-1)),t("div",m$,r(l(s).props.data.id),1)]),t("div",c$,[i[4]||(i[4]=t("div",{class:"detail-label"},"Waktu",-1)),i[5]||(i[5]=t("div",{class:"detail-separator"},":",-1)),t("div",p$,r(l(ve)(l(s).props.data.logged_at)),1)]),t("div",f$,[i[6]||(i[6]=t("div",{class:"detail-label"},"Pengguna",-1)),i[7]||(i[7]=t("div",{class:"detail-separator"},":",-1)),t("div",g$,[e(f,{href:o.route("admin.user.detail",{id:l(s).props.data.user_id})},{default:a(()=>[v(r(l(s).props.data.username),1)]),_:1},8,["href"])])]),t("div",b$,[i[8]||(i[8]=t("div",{class:"detail-label"},"Kategori",-1)),i[9]||(i[9]=t("div",{class:"detail-separator"},":",-1)),t("div",v$,r(l(s).props.data.activity_category_label),1)]),t("div",_$,[i[10]||(i[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),i[11]||(i[11]=t("div",{class:"detail-separator"},":",-1)),t("div",y$,r(l(s).props.data.activity_name_label),1)]),t("div",k$,[i[12]||(i[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),i[13]||(i[13]=t("div",{class:"detail-separator"},":",-1)),t("div",w$,r(l(s).props.data.description),1)]),t("div",h$,[i[14]||(i[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),i[15]||(i[15]=t("div",{class:"detail-separator"},":",-1)),t("div",$$,r(l(s).props.data.ip_address),1)]),t("div",x$,[i[16]||(i[16]=t("div",{class:"detail-label"},"User Agent",-1)),i[17]||(i[17]=t("div",{class:"detail-separator"},":",-1)),t("div",S$,r(l(s).props.data.user_agent),1)]),t("div",V$,[i[19]||(i[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",q$,[Object.keys(l(s).props.data.metadata).length>0?(d(),w("table",C$,[t("tbody",null,[(d(!0),w(Y,null,De(l(s).props.formatted_metadata,(c,m)=>(d(),w(Y,{key:m},[c.type==="plain"?(d(),w("tr",T$,[t("td",P$,[t("pre",R$,r(c.value),1)])])):k("",!0),c.type==="simple"?(d(),w("tr",O$,[t("td",I$,r(c.label),1),t("td",U$,[c.label=="Data Mentah (JSON)"?(d(),w("pre",D$,r(c.value),1)):(d(),w(Y,{key:1},[v(r(c.value),1)],64))])])):k("",!0),c.type==="comparison"?(d(),w("tr",j$,[t("td",E$,[t("table",A$,[i[18]||(i[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(d(!0),w(Y,null,De(c.value,(g,_)=>(d(),w("tr",{class:xe(g.new_value!==g.old_value?"value-changed":"")},[t("td",B$,r(g.field),1),t("td",M$,r(g.old_value),1),t("td",N$,r(g.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(d(),w("div",z$," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},L$=_t(F$,[["__scopeId","data-v-37e21f0d"]]),K$=Object.freeze(Object.defineProperty({__proto__:null,default:L$},Symbol.toStringTag,{value:"Module"})),H$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},W$={class:"q-pa-xs"},Y$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Q$={key:0},J$={class:"flex justify-end"},Hl="Log Aktifitas Pengguna",G$={__name:"Index",setup(p){const s=ge(),u=$e(),o=T(!1),i=T([]),n=T(!0),f=T(null),b=T(null),c=at(b),{protectClick:m}=Bt(),g=je({user_id:"all",activity_category:"all",activity_name:"all",search:"",...Le()}),_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),y=[{value:"all",label:"Semua"},...s.props.users.map(A=>({value:A.id,label:A.username+" - "+A.name}))],S=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_categories).map(([A,F])=>({value:A,label:F}))],V=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_names).map(([A,F])=>({value:A,label:F}))],$=T(S),R=T(V),K=(A,F)=>{if(A===""){F(()=>{$.value=S});return}F(()=>{const q=A.toLowerCase();$.value=S.filter(N=>N.label.toLowerCase().indexOf(q)>-1)})},I=(A,F)=>{if(A===""){F(()=>{R.value=V});return}F(()=>{const q=A.toLowerCase();R.value=V.filter(N=>N.label.toLowerCase().indexOf(q)>-1)})},D=[{name:"id",label:u.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{z()});const U=A=>st({message:`Hapus log #${A.id}?`,url:route("admin.user-activity-log.delete",A.id),fetchItemsCallback:z,loading:n}),z=(A=null)=>{Ke({pagination:_,filter:g,props:A,rows:i,url:route("admin.user-activity-log.data"),loading:n,tableRef:f})},M=()=>z(),j=m(A=>ee.get(route("admin.user-activity-log.detail",{id:A.id}))),P=Z(()=>u.screen.gt.sm?D:D.filter(A=>A.name==="id"||A.name==="action")),x=()=>{xt.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{gt("Seluruh log telah dibersihkan."),z()}).catch(A=>{var q,N;const F=((N=(q=A.response)==null?void 0:q.data)==null?void 0:N.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";ft(F,"bottom"),console.error(A)})})};return(A,F)=>{const q=G("i-head"),N=G("i-link"),le=G("authenticated-layout");return d(),w(Y,null,[e(q,{title:Hl}),e(le,null,ze({title:a(()=>[v(r(Hl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:F[0]||(F[0]=me=>o.value=!o.value)},null,8,["icon"]),A.$can("admin.user-activity-log.clear")?(d(),O(E,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:x})):k("",!0)]),default:a(()=>[t("div",W$,[e(Ee,{class:"full-height-table",ref_key:"tableRef",ref:f,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":F[7]||(F[7]=me=>_.value=me),filter:g.search,loading:n.value,columns:P.value,rows:i.value,"rows-per-page-options":[10,25,50],style:He({height:l(c)}),onRequest:z,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:me,message:ie,filter:Oe})=>[t("div",Y$,[t("span",null,r(ie)+" "+r(Oe?" with term "+Oe:""),1)])]),body:a(me=>[e(Re,{props:me,class:"cursor-pointer",onClick:X(ie=>l(j)(me.row,ie),["stop"])},{default:a(()=>[e(Q,{key:"id",props:me},{default:a(()=>[t("div",null,[l(u).screen.lt.md?(d(),w(Y,{key:0},[e(C,{name:"tag",class:"inline-icon"}),F[8]||(F[8]=v(" ID Aktifitas: "))],64)):k("",!0),v(" "+r(me.row.id),1)]),l(u).screen.lt.md?(d(),w("div",Q$,[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(me.row.logged_at)),1)]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),e(N,{onClick:F[5]||(F[5]=X(()=>{},["stop"])),href:A.route("admin.user.detail",{id:me.row.user_id})},{default:a(()=>[v(r(me.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(C,{name:"category",class:"inline-icon"}),v(" "+r(me.row.activity_category_label)+" > "+r(me.row.activity_name_label),1)]),t("div",null,[e(C,{name:"notes",class:"inline-icon"}),v(" "+r(me.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"logged_at",props:me},{default:a(()=>[v(r(l(ve)(me.row.logged_at)),1)]),_:2},1032,["props"]),e(Q,{key:"username",props:me},{default:a(()=>[e(N,{onClick:F[6]||(F[6]=X(()=>{},["stop"])),href:A.route("admin.user.detail",{id:me.row.user_id})},{default:a(()=>[v(r(me.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(Q,{key:"activity_category",props:me},{default:a(()=>[v(r(me.row.activity_category_label),1)]),_:2},1032,["props"]),e(Q,{key:"activity_name",props:me},{default:a(()=>[v(r(me.row.activity_name_label),1)]),_:2},1032,["props"]),e(Q,{key:"description",props:me,class:"wrap-column"},{default:a(()=>[v(r(me.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:me},{default:a(()=>[t("div",J$,[A.$can("admin.user-role.delete")?(d(),O(E,{key:0,onClick:X(ie=>U(me.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:a(()=>[t("div",H$,[e(de,{modelValue:g.user_id,"onUpdate:modelValue":[F[1]||(F[1]=me=>g.user_id=me),M],class:"custom-select col-xs-12 col-sm-2",options:y,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(de,{modelValue:g.activity_category,"onUpdate:modelValue":[F[2]||(F[2]=me=>g.activity_category=me),M],class:"custom-select col-xs-12 col-sm-2",options:$.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:K,clearable:""},null,8,["modelValue","options"]),e(de,{modelValue:g.activity_name,"onUpdate:modelValue":[F[3]||(F[3]=me=>g.activity_name=me),M],class:"custom-select col-xs-12 col-sm-2",options:R.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:I},null,8,["modelValue","options"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":F[4]||(F[4]=me=>g.search=me),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},X$=Object.freeze(Object.defineProperty({__proto__:null,default:G$},Symbol.toStringTag,{value:"Module"})),vn={__name:"UpdatePasswordForm",setup(p){const s=T(!1),u=T(null),o=T(null),i=Qe({current_password:"",password:"",password_confirmation:""}),n=()=>{i.clearErrors(),i.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>i.reset(),onError:()=>{i.errors.password&&(i.reset("password","password_confirmation"),u.value.focus()),i.errors.current_password&&(i.reset("current_password"),o.value.focus())}})};return(f,b)=>(d(),O(Je,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[b[6]||(b[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),b[7]||(b[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(se,{modelValue:l(i).current_password,"onUpdate:modelValue":b[1]||(b[1]=c=>l(i).current_password=c),type:s.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.current_password,"error-message":l(i).errors.current_password,rules:[c=>c&&c.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[0]||(b[0]=c=>s.value=!s.value)},{default:a(()=>[e(C,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(se,{modelValue:l(i).password,"onUpdate:modelValue":b[3]||(b[3]=c=>l(i).password=c),type:s.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.password,"error-message":l(i).errors.password,rules:[c=>c&&c.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[2]||(b[2]=c=>s.value=!s.value)},{default:a(()=>[e(C,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(se,{modelValue:l(i).password_confirmation,"onUpdate:modelValue":b[5]||(b[5]=c=>l(i).password_confirmation=c),type:s.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.password_confirmation,"error-message":l(i).errors.password_confirmation,rules:[c=>c&&c.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[4]||(b[4]=c=>s.value=!s.value)},{default:a(()=>[e(C,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(te,null,{default:a(()=>[e(E,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Z$=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"})),_n={__name:"UpdateProfileInformationForm",setup(p){const u=ge().props.auth.user,o=Qe({name:u.name,username:u.username,type:window.CONSTANTS.USER_TYPES[u.type]}),i=()=>rt({form:o,url:route("admin.user-profile.update")});return(n,f)=>(d(),O(Je,{class:"row",onSubmit:X(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[f[3]||(f[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),f[4]||(f[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(se,{modelValue:l(o).username,"onUpdate:modelValue":f[0]||(f[0]=b=>l(o).username=b),label:"ID Pengguna",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(se,{modelValue:l(o).name,"onUpdate:modelValue":f[1]||(f[1]=b=>l(o).name=b),modelModifiers:{trim:!0},label:"Nama",disable:l(o).processing,error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[b=>b&&b.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(se,{modelValue:l(o).type,"onUpdate:modelValue":f[2]||(f[2]=b=>l(o).type=b),label:"Jenis Akun",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(te,null,{default:a(()=>[e(E,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},ex=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"})),tx={class:"q-pa-xs"},ax={class:"row justify-center"},lx={class:"col col-md-6"},Wl="Pengaturan Pribadi",ox={__name:"Edit",setup(p){return(s,u)=>{const o=G("i-head"),i=G("authenticated-layout");return d(),w(Y,null,[e(o,{title:Wl}),e(i,null,{title:a(()=>[v(r(Wl))]),default:a(()=>[t("div",tx,[t("div",ax,[t("div",lx,[e(_n,{class:"q-mb-md"}),e(vn)])])])]),_:1})],64)}}},nx=Object.freeze(Object.defineProperty({__proto__:null,default:ox},Symbol.toStringTag,{value:"Module"})),sx=At({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(p,{slots:s,emit:u}){let o=!1,i,n,f=null,b=null,c,m;function g(){i&&i(),i=null,o=!1,f!==null&&(clearTimeout(f),f=null),b!==null&&(clearTimeout(b),b=null),n!==void 0&&n.removeEventListener("transitionend",c),c=null}function _($,R,K){R!==void 0&&($.style.height=`${R}px`),$.style.transition=`height ${p.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,i=K}function y($,R){$.style.overflowY=null,$.style.height=null,$.style.transition=null,g(),R!==m&&u(R)}function S($,R){let K=0;n=$,o===!0?(g(),K=$.offsetHeight===$.scrollHeight?0:void 0):(m="hide",$.style.overflowY="hidden"),_($,K,R),f=setTimeout(()=>{f=null,$.style.height=`${$.scrollHeight}px`,c=I=>{b=null,(Object(I)!==I||I.target===$)&&y($,"show")},$.addEventListener("transitionend",c),b=setTimeout(c,p.duration*1.1)},100)}function V($,R){let K;n=$,o===!0?g():(m="show",$.style.overflowY="hidden",K=$.scrollHeight),_($,K,R),f=setTimeout(()=>{f=null,$.style.height=0,c=I=>{b=null,(Object(I)!==I||I.target===$)&&y($,"hide")},$.addEventListener("transitionend",c),b=setTimeout(c,p.duration*1.1)},100)}return na(()=>{o===!0&&g()}),()=>Ce(ro,{css:!1,appear:p.appear,onEnter:S,onLeave:V},s.default)}}),Wt=gs({}),rx=Object.keys(po),Ct=At({name:"QExpansionItem",props:{...po,...vs,...Ea,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...bs,"click","afterShow","afterHide"],setup(p,{slots:s,emit:u}){const{proxy:{$q:o}}=Ot(),i=Aa(p,o),n=T(p.modelValue!==null?p.modelValue:p.defaultOpened),f=T(null),b=_s(),{show:c,hide:m,toggle:g}=ys({showing:n});let _,y;const S=Z(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${p.popup===!0?"popup":"standard"}`),V=Z(()=>p.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:p.contentInsetLevel*56+"px"}),$=Z(()=>p.disable!==!0&&(p.href!==void 0||p.to!==void 0&&p.to!==null&&p.to!=="")),R=Z(()=>{const ie={};return rx.forEach(Oe=>{ie[Oe]=p[Oe]}),ie}),K=Z(()=>$.value===!0||p.expandIconToggle!==!0),I=Z(()=>p.expandedIcon!==void 0&&n.value===!0?p.expandedIcon:p.expandIcon||o.iconSet.expansionItem[p.denseToggle===!0?"denseIcon":"icon"]),D=Z(()=>p.disable!==!0&&($.value===!0||p.expandIconToggle===!0)),U=Z(()=>({expanded:n.value===!0,detailsId:b.value,toggle:g,show:c,hide:m})),z=Z(()=>{const ie=p.toggleAriaLabel!==void 0?p.toggleAriaLabel:o.lang.label[n.value===!0?"collapse":"expand"](p.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":b.value,"aria-label":ie}});Ne(()=>p.group,ie=>{y!==void 0&&y(),ie!==void 0&&A()});function M(ie){$.value!==!0&&g(ie),u("click",ie)}function h(ie){ie.keyCode===13&&j(ie,!0)}function j(ie,Oe){Oe!==!0&&f.value!==null&&f.value.focus(),g(ie),Yt(ie)}function P(){u("afterShow")}function x(){u("afterHide")}function A(){_===void 0&&(_=ks()),n.value===!0&&(Wt[p.group]=_);const ie=Ne(n,Xe=>{Xe===!0?Wt[p.group]=_:Wt[p.group]===_&&delete Wt[p.group]}),Oe=Ne(()=>Wt[p.group],(Xe,ce)=>{ce===_&&Xe!==void 0&&Xe!==_&&m()});y=()=>{ie(),Oe(),Wt[p.group]===_&&delete Wt[p.group],y=void 0}}function F(){const ie={class:[`q-focusable relative-position cursor-pointer${p.denseToggle===!0&&p.switchToggleSide===!0?" items-end":""}`,p.expandIconClass],side:p.switchToggleSide!==!0,avatar:p.switchToggleSide},Oe=[Ce(C,{class:"q-expansion-item__toggle-icon"+(p.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:I.value})];return D.value===!0&&(Object.assign(ie,{tabindex:0,...z.value,onClick:j,onKeyup:h}),Oe.unshift(Ce("div",{ref:f,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),Ce(B,ie,()=>Oe)}function q(){let ie;return s.header!==void 0?ie=[].concat(s.header(U.value)):(ie=[Ce(B,()=>[Ce(be,{lines:p.labelLines},()=>p.label||""),p.caption?Ce(be,{lines:p.captionLines,caption:!0},()=>p.caption):null])],p.icon&&ie[p.switchToggleSide===!0?"push":"unshift"](Ce(B,{side:p.switchToggleSide===!0,avatar:p.switchToggleSide!==!0},()=>Ce(C,{name:p.icon})))),p.disable!==!0&&p.hideExpandIcon!==!0&&ie[p.switchToggleSide===!0?"unshift":"push"](F()),ie}function N(){const ie={ref:"item",style:p.headerStyle,class:p.headerClass,dark:i.value,disable:p.disable,dense:p.dense,insetLevel:p.headerInsetLevel};return K.value===!0&&(ie.clickable=!0,ie.onClick=M,Object.assign(ie,$.value===!0?R.value:z.value)),Ce(oe,ie,q)}function le(){return ae(Ce("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:V.value,id:b.value},zt(s.default)),[[mo,n.value]])}function me(){const ie=[N(),Ce(sx,{duration:p.duration,onShow:P,onHide:x},le)];return p.expandSeparator===!0&&ie.push(Ce(Pe,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),Ce(Pe,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),ie}return p.group!==void 0&&A(),na(()=>{y!==void 0&&y()}),()=>Ce("div",{class:S.value},[Ce("div",{class:"q-expansion-item__container relative-position"},me())])}}),ix={class:"col col-md-8"},dx={class:"q-col-gutter-xs row"},ux={class:"col-xs-12 col-md-5"},mx={class:"row items-center"},cx={class:"text-subtite1 text-bold q-mb-sm"},px={class:"text-body2"},fx={class:"text-subtitle2 text-bold text-grey-8 q-my-sm"},gx={key:0,class:"q-gutter-xs"},bx={key:1,class:"text-grey-8 text-italic"},vx={class:"col-xs-12 col-md-7"},_x={class:"row items-center"},Yl="Rincian Role Pengguna",yx={__name:"Detail",setup(p){const s=ge(),u=Z(()=>{const o={};return s.props.data.permissions&&s.props.data.permissions.forEach(i=>{const f=i.category.replace("Manajemen ","");o[f]||(o[f]=[]),o[f].push(i)}),o});return(o,i)=>{const n=G("i-head"),f=G("i-link"),b=G("authenticated-layout");return d(),w(Y,null,[e(n,{title:Yl}),e(b,{"show-drawer-button":!0},{title:a(()=>[v(r(Yl))]),"left-button":a(()=>i[0]||(i[0]=[])),"right-button":a(()=>i[1]||(i[1]=[])),default:a(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",ix,[t("div",dx,[t("div",ux,[e(pe,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",mx,[e(C,{name:"assignment_ind",size:"sm",color:"grey-8",class:"q-mr-sm"}),i[2]||(i[2]=t("div",{class:"text-subtite1 text-bold text-grey-8"}," Info Peran ",-1))])]),_:1}),e(te,null,{default:a(()=>[t("div",cx,r(l(s).props.data.name),1),i[4]||(i[4]=t("div",{class:"text-subtitle2 text-grey-7"},"Deskripsi:",-1)),t("div",px,r(l(s).props.data.description||"Tidak ada deskripsi."),1),t("div",fx,[e(C,{name:"group",class:"q-mr-xs"}),i[3]||(i[3]=v(" Pengguna Terdaftar "))]),l(s).props.data.users.length>0?(d(),w("div",gx,[(d(!0),w(Y,null,De(l(s).props.data.users,c=>(d(),O(f,{key:c.id,href:o.route("admin.user.detail",{id:c.id}),style:{"text-decoration":"none"}},{default:a(()=>[e(la,{clickable:"","text-color":"primary",color:"grey-3"},{default:a(()=>[v(r(c.username),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])):(d(),w("div",bx," Belum ada akun pengguna yang terdaftar. "))]),_:1})]),_:1})]),t("div",vx,[e(pe,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(te,{class:"bg-grey-3 q-py-sm"},{default:a(()=>[t("div",_x,[e(C,{name:"security",size:"sm",color:"grey-8",class:"q-mr-sm"}),i[5]||(i[5]=t("div",{class:"text-subtite1 text-grey-8 text-bold"}," Daftar Hak Akses ",-1))])]),_:1}),l(s).props.data.permissions.length>0?(d(),O(te,{key:0,class:"q-pa-none"},{default:a(()=>[e(Ue,{bordered:"",separator:""},{default:a(()=>[(d(!0),w(Y,null,De(u.value,(c,m)=>(d(),O(Ct,{key:m,label:m,"header-class":"text-bold bg-grey-1 text-grey-7","default-opened":""},{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[t("div",null,[(d(!0),w(Y,null,De(c,g=>(d(),O(la,{key:g.id,color:"grey-2","text-color":"grey-9",size:"sm"},{default:a(()=>[v(r(g.label),1)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})):(d(),O(te,{key:1},{default:a(()=>i[6]||(i[6]=[t("div",{class:"text-grey-7 text-italic"}," Belum ada hak akses yang ditetapkan. ",-1)])),_:1}))]),_:1})])])])]),_:1})]),_:1})],64)}}},kx=_t(yx,[["__scopeId","data-v-0556304e"]]),wx=Object.freeze(Object.defineProperty({__proto__:null,default:kx},Symbol.toStringTag,{value:"Module"})),hx={class:"q-gutter-sm"},$x={class:"col col-md-6 q-pa-xs"},xx={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},Sx={__name:"Editor",setup(p){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description,permissions:s.props.data.permissions?s.props.data.permissions.map(f=>f.id):[]}),i=()=>rt({form:o,url:route("admin.user-role.save")}),n=Z(()=>{const f={};return s.props.permissions&&s.props.permissions.forEach(b=>{const c=b.category;f[c]||(f[c]=[]),f[c].push(b)}),f});return(f,b)=>{const c=G("i-head"),m=G("authenticated-layout");return d(),w(Y,null,[e(c,{title:u}),e(m,{"show-drawer-button":!0},{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",hx,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>f.$goBack())})])]),"right-button":a(()=>[e(E,{icon:"save",label:"Simpan",color:"primary",disable:l(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:X(i,["prevent"])},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",$x,[e(Je,{class:"row",onSubmit:X(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(o).id=g)},null,512),[[yt,l(o).id]]),e(se,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(o).description,"onUpdate:modelValue":b[3]||(b[3]=g=>l(o).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(d(!0),w(Y,null,De(n.value,(g,_)=>(d(),w("div",{key:_},[t("div",xx,r(_),1),(d(!0),w(Y,null,De(g,y=>(d(),w("div",{key:y.id},[e(ua,{class:"q-ma-none q-pa-none list-checkbox",modelValue:l(o).permissions,"onUpdate:modelValue":S=>l(o).permissions=S,val:y.id,label:y.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Vx=_t(Sx,[["__scopeId","data-v-2c2a059c"]]),qx=Object.freeze(Object.defineProperty({__proto__:null,default:Vx},Symbol.toStringTag,{value:"Module"})),Cx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Tx={class:"q-pa-xs"},Px={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Rx={class:"flex justify-end"},Ql="Peran Pengguna",Ox={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=je({search:"",...Le()}),m=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Peran",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{y()});const _=K=>st({message:`Hapus role ${K.name}?`,url:route("admin.user-role.delete",K.id),fetchItemsCallback:y,loading:i}),y=(K=null)=>{Ke({pagination:m,filter:c,props:K,rows:o,url:route("admin.user-role.data"),loading:i,tableRef:n})},S=K=>ee.get(route("admin.user-role.detail",{id:K.id})),{protectClick:V}=Bt(),$=V(S),R=Z(()=>s.screen.gt.sm?g:g.filter(K=>K.name==="name"||K.name==="action"));return(K,I)=>{const D=G("i-head"),U=G("authenticated-layout");return d(),w(Y,null,[e(D,{title:Ql}),e(U,null,ze({title:a(()=>[v(r(Ql))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=z=>u.value=!u.value)},null,8,["icon"]),K.$can("admin.user-role.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=z=>l(ee).get(K.route("admin.user-role.add")))})):k("",!0)]),default:a(()=>[t("div",Tx,[e(Ee,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":I[4]||(I[4]=z=>m.value=z),filter:c.search,loading:i.value,columns:R.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:z,message:M,filter:h})=>[t("div",Px,[t("span",null,r(M)+" "+r(h?" with term "+h:""),1)])]),body:a(z=>[e(Re,{props:z,class:"cursor-pointer",onClick:X(M=>l($)(z.row,M),["stop"])},{default:a(()=>[e(Q,{key:"name",props:z,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),O(C,{key:0,name:"person"})):k("",!0),v(" "+r(z.row.name),1)])]),_:2},1032,["props"]),e(Q,{key:"description",props:z,class:"wrap-column"},{default:a(()=>[v(r(z.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:z},{default:a(()=>[t("div",Rx,[K.$can("admin.user-role.add")||K.$can("admin.user-role.edit")||K.$can("admin.user-role.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[3]||(I[3]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[K.$can("admin.user-role.add")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(M=>l(ee).get(K.route("admin.user-role.duplicate",z.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>I[5]||(I[5]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),K.$can("admin.user-role.edit")?ae((d(),O(oe,{key:1,clickable:"",onClick:X(M=>l(ee).get(K.route("admin.user-role.edit",z.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>I[6]||(I[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),K.$can("admin.user-role.delete")?ae((d(),O(oe,{key:2,onClick:X(M=>_(z.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>I[7]||(I[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Cx,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":I[2]||(I[2]=z=>c.search=z),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ix=Object.freeze(Object.defineProperty({__proto__:null,default:Ox},Symbol.toStringTag,{value:"Module"})),Ux={class:"q-gutter-sm"},Dx={class:"q-gutter-sm"},jx={class:"row justify-center"},Ex={class:"col col-md-6 q-pa-xs"},Ax={class:"row"},Bx={class:"row items-center justify-between"},Mx={class:"text-subtitle1 text-bold text-grey-9"},Nx={class:"q-gutter-xs"},zx={class:"text-bold"},Fx={class:"text-bold"},Jl="Rincian Pengguna",Lx={__name:"Detail",setup(p){const s=ge(),u=Z(()=>s.props.data),o=Z(()=>u.value.active?"positive":"negative"),i=Z(()=>u.value.active?"Aktif":"Tidak Aktif");return(n,f)=>{const b=G("i-head"),c=G("i-link"),m=G("authenticated-layout");return d(),w(Y,null,[e(b,{title:Jl}),e(m,{"show-drawer-button":!0},{title:a(()=>[v(r(Jl))]),"left-button":a(()=>[t("div",Ux,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=g=>n.$inertia.get(n.route("admin.user.index")))})])]),"right-button":a(()=>[t("div",Dx,[n.$can("admin.user.edit")&&l(s).props.data.id!=l(s).props.auth.user.id?(d(),O(E,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:f[1]||(f[1]=g=>n.$inertia.get(n.route("admin.user.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[t("div",jx,[t("div",Ex,[t("div",Ax,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",Bx,[t("div",Mx,[e(C,{name:"person",class:"q-mr-xs",size:"sm"}),f[2]||(f[2]=v(" Profil Pengguna "))]),e(it,{color:o.value,label:i.value,class:"q-pa-xs"},null,8,["color","label"])])]),_:1}),e(Ue,null,{default:a(()=>[e(oe,{class:"bg-white"},{default:a(()=>[e(B,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[3]||(f[3]=[v("Nama Pengguna")])),_:1}),e(be,{class:"text-subtitle1 text-bold"},{default:a(()=>[v(r(u.value.name),1)]),_:1})]),_:1})]),_:1}),e(oe,null,{default:a(()=>[e(B,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[4]||(f[4]=[v("ID Pengguna")])),_:1}),e(be,null,{default:a(()=>[v(r(u.value.username),1)]),_:1})]),_:1})]),_:1}),e(oe,null,{default:a(()=>[e(B,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[5]||(f[5]=[v("Jenis Akun")])),_:1}),e(be,null,{default:a(()=>[v(r(n.$CONSTANTS.USER_TYPES[u.value.type]),1)]),_:1})]),_:1})]),_:1}),u.value.roles.length>0?(d(),O(oe,{key:0},{default:a(()=>[e(B,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[6]||(f[6]=[v("Peran Pengguna")])),_:1}),e(be,null,{default:a(()=>[t("div",Nx,[(d(!0),w(Y,null,De(u.value.roles,g=>(d(),O(c,{key:g.id,href:n.route("admin.user-role.detail",{id:g.id}),style:{"text-decoration":"none"}},{default:a(()=>[e(la,{clickable:"",color:"indigo-1","text-color":"indigo-10",icon:"military_tech",size:"sm"},{default:a(()=>[v(r(g.name),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])]),_:1})]),_:1})]),_:1})):k("",!0),e(oe,null,{default:a(()=>[e(B,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[7]||(f[7]=[v("Dibuat")])),_:1}),e(be,null,{default:a(()=>{var g,_;return[v(r(l(ve)(u.value.created_at))+" oleh ",1),t("span",zx,r(((g=u.value.creator)==null?void 0:g.name)??"Sistem")+" ("+r(((_=u.value.creator)==null?void 0:_.username)??"system")+")",1)]}),_:1})]),_:1})]),_:1}),u.value.updated_at?(d(),O(oe,{key:1},{default:a(()=>[e(B,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[8]||(f[8]=[v("Diperbarui")])),_:1}),e(be,null,{default:a(()=>[v(r(l(ve)(u.value.updated_at))+" ",1),u.value.updater?(d(),w(Y,{key:0},[f[9]||(f[9]=v(" oleh ")),t("span",Fx,r(u.value.updater.name)+" ("+r(u.value.updater.username)+")",1)],64)):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0),e(oe,null,{default:a(()=>[e(B,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[10]||(f[10]=[v("Terakhir Login")])),_:1}),e(be,{class:"text-bold"},{default:a(()=>[v(r(u.value.last_login_datetime?n.$dayjs(u.value.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),_:1})]),_:1})]),_:1}),u.value.last_activity_datetime?(d(),O(oe,{key:2,class:"q-mb-md"},{default:a(()=>[e(B,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[11]||(f[11]=[v("Aktifitas Terakhir")])),_:1}),e(be,{class:"text-bold"},{default:a(()=>[v(r(n.$dayjs(u.value.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" "+r(u.value.last_activity_description),1)]),_:1})]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})])])])]),_:1})],64)}}},Kx=Object.freeze(Object.defineProperty({__proto__:null,default:Lx},Symbol.toStringTag,{value:"Module"}));function Hx(p){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(p)}const Wx={class:"q-gutter-sm"},Yx={class:"row justify-center"},Qx={class:"col col-md-6 q-pa-xs"},Jx={__name:"Editor",setup(p){const s=ot(window.CONSTANTS.USER_TYPES),u=ge(),o=u.props.roles,i=u.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=T(!u.props.data.id),f=u.props.data.roles,b=Array.isArray(f)?f.map(g=>g.id):[],c=Qe({id:u.props.data.id,name:u.props.data.name,username:u.props.data.username,password:u.props.data.id?null:"12345",type:u.props.data.type?u.props.data.type:s[0].value,active:!!u.props.data.active,roles:b}),m=()=>rt({form:c,url:route("admin.user.save")});return(g,_)=>{const y=G("i-head"),S=G("authenticated-layout");return d(),w(Y,null,[e(y,{title:l(i)},null,8,["title"]),e(S,{"show-drawer-button":!0},{title:a(()=>[v(r(l(i)),1)]),"left-button":a(()=>[t("div",Wx,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=V=>g.$goBack())})])]),default:a(()=>[t("div",Yx,[t("div",Qx,[e(Je,{class:"row",onSubmit:X(m,["prevent"])},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=V=>l(c).id=V)},null,512),[[yt,l(c).id]]),e(se,{autofocus:"",modelValue:l(c).username,"onUpdate:modelValue":_[2]||(_[2]=V=>l(c).username=V),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:l(c).processing,error:!!l(c).errors.username,"error-message":l(c).errors.username,rules:[V=>V&&V.length>0||"Username harus diisi.",V=>l(Hx)(V)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(se,{modelValue:l(c).name,"onUpdate:modelValue":_[3]||(_[3]=V=>l(c).name=V),modelModifiers:{trim:!0},label:"Nama",error:!!l(c).errors.name,disable:l(c).processing,"error-message":l(c).errors.name,rules:[V=>V&&V.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(c).password,"onUpdate:modelValue":_[5]||(_[5]=V=>l(c).password=V),label:"Kata Sandi","lazy-rules":"",disable:l(c).processing,error:!!l(c).errors.password,"error-message":l(c).errors.password,"hide-bottom-space":"",type:n.value?"text":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:_[4]||(_[4]=V=>n.value=!n.value)},{default:a(()=>[e(C,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","disable","error","error-message","type"]),e(de,{modelValue:l(c).type,"onUpdate:modelValue":_[6]||(_[6]=V=>l(c).type=V),label:"Jenis Akun",options:l(s),"map-options":"","emit-value":"","lazy-rules":"",disable:l(c).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(c).errors.type,"error-message":l(c).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),l(c).type=="standard_user"?(d(),O(de,{key:0,modelValue:l(c).roles,"onUpdate:modelValue":_[7]||(_[7]=V=>l(c).roles=V),label:"Peran",options:l(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:l(c).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(c).errors.roles||!!l(c).errors["roles.0"],"error-message":l(c).errors.roles||l(c).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(wa,{modelValue:l(c).active,"onUpdate:modelValue":_[8]||(_[8]=V=>l(c).active=V),disable:l(c).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(c).processing,onClick:m},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",class:"text-black",disable:l(c).processing,onClick:_[9]||(_[9]=V=>g.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},Gx=Object.freeze(Object.defineProperty({__proto__:null,default:Jx},Symbol.toStringTag,{value:"Module"})),Xx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Zx={class:"q-pa-xs"},eS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},tS={key:0},aS={class:"flex justify-end"},Gl="Pengguna",lS={__name:"Index",setup(p){const s=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.USER_TYPES)],u=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=ge(),i=$e(),n=o.props.auth.user,f=T([]),b=T(!0),c=T(!1),m=je({type:"all",roles:[],status:"active",search:""}),g=o.props.roles.map(h=>({value:h.id,label:h.name})),_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),y=[{name:"username",label:i.screen.gt.sm?"ID Pengguna":"Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];he(()=>{V()});const S=()=>V(),V=(h=null)=>Ke({pagination:_,props:h,rows:f,loading:b,filter:m,url:route("admin.user.data"),tableRef:U}),$=h=>st({url:route("admin.user.delete",h.id),message:`Hapus pengguna ${h.username}?`,fetchItemsCallback:V,loading:b}),R=Z(()=>i.screen.gt.sm?y:y.filter(h=>h.name==="username"||h.name==="action")),K=h=>ee.get(route("admin.user.detail",h.id)),{protectClick:I}=Bt(),D=I(K),U=T(null),z=T(null),M=at(z);return(h,j)=>{const P=G("i-head"),x=G("authenticated-layout");return d(),w(Y,null,[e(P,{title:Gl}),e(x,null,ze({title:a(()=>[v(r(Gl))]),"right-button":a(()=>[e(E,{icon:c.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:j[0]||(j[0]=A=>c.value=!c.value)},null,8,["icon"]),h.$can("admin.user.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:j[1]||(j[1]=A=>l(ee).get(h.route("admin.user.add")))})):k("",!0)]),default:a(()=>[t("div",Zx,[e(Ee,{ref_key:"tableRef",ref:U,class:"full-height-table",style:He({height:l(M)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":j[7]||(j[7]=A=>_.value=A),filter:m.search,loading:b.value,columns:R.value,rows:f.value,"rows-per-page-options":[10,25,50],onRequest:V,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:A,message:F,term:q})=>[t("div",eS,[t("span",null,r(F)+" "+r(q?" with term "+q:""),1)])]),body:a(A=>[e(Re,{props:A,class:xe([A.row.active?"":"bg-red-1","cursor-pointer"]),onClick:X(F=>l(D)(A.row,F),["stop"])},{default:a(()=>[e(Q,{key:"username",props:A},{default:a(()=>[t("div",null,[l(i).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[],64)),v(" "+r(A.row.username),1)]),l(i).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[t("div",null,r(A.row.name),1),e(it,{color:A.row.type=="super_user"?"red":"primary"},{default:a(()=>[v(r(h.$CONSTANTS.USER_TYPES[A.row.type]),1)]),_:2},1032,["color"]),A.row.roles.length>0?(d(),w("div",tS,r(A.row.roles.map(F=>F.name).join(",")),1)):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"name",props:A},{default:a(()=>[v(r(A.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"role",props:A,align:"center"},{default:a(()=>[t("span",null,r(h.$CONSTANTS.USER_TYPES[A.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:A},{default:a(()=>[t("div",aS,[h.$can("admin.user.add")||h.$can("admin.user.edit")||h.$can("admin.user.delete")?(d(),O(E,{key:0,disable:A.row.id==l(n).id||A.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:j[6]||(j[6]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[h.$can("admin.user.add")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(F=>l(ee).get(h.route("admin.user.duplicate",A.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>j[8]||(j[8]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),h.$can("admin.user.edit")?ae((d(),O(oe,{key:1,clickable:"",onClick:X(F=>l(ee).get(h.route("admin.user.edit",A.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>j[9]||(j[9]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),h.$can("admin.user.delete")?ae((d(),O(oe,{key:2,onClick:X(F=>$(A.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>j[10]||(j[10]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[c.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:z},{default:a(()=>[t("div",Xx,[e(de,{modelValue:m.type,"onUpdate:modelValue":[j[2]||(j[2]=A=>m.type=A),S],class:"custom-select col-xs-12 col-sm-2",options:s,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(de,{modelValue:m.status,"onUpdate:modelValue":[j[3]||(j[3]=A=>m.status=A),S],class:"custom-select col-xs-12 col-sm-2",options:u,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(de,{modelValue:m.roles,"onUpdate:modelValue":[j[4]||(j[4]=A=>m.roles=A),S],class:"custom-select col-xs-12 col-sm-2",options:l(g),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":j[5]||(j[5]=A=>m.search=A),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},oS=Object.freeze(Object.defineProperty({__proto__:null,default:lS},Symbol.toStringTag,{value:"Module"})),nS={class:"q-gutter-sm"},sS={class:"col col-lg-6 q-pa-xs"},rS={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},iS={class:"row q-col-gutter-sm q-mb-md"},dS={key:0},uS={class:"text-bold"},mS={key:0},cS={class:"text-caption text-grey-8"},pS={key:1},Xl="Buat Penyesuaian Stok",fS={__name:"Create",setup(p){const s=ge(),u=T(!1),o=s.props.products,{filteredCategories:i,filterCategories:n}=za(s.props.categories),{filteredSuppliers:f,filterSupplierFn:b}=Fa(s.props.suppliers),c=T({search:null,category_id:null,supplier_id:null}),m=T([]),g=Qe({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),_=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(K,I)=>H(K)+" "+I.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],y=ot(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),S=Z(()=>o.filter(K=>{let I=!0;if(u.value&&!m.value.find(D=>D.id===K.id))return!1;if(c.value.search){const D=c.value.search.toLowerCase();I=K.name.toLowerCase().includes(D)||K.description.toLowerCase().includes(D)||K.barcode&&K.barcode.toLowerCase().includes(D)}return I&&c.value.category_id&&(I=K.category_id===c.value.category_id),I&&c.value.supplier_id&&(I=K.supplier_id===c.value.supplier_id),I})),V=()=>{xt.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{g.product_ids=m.value.map(K=>K.id),ca(g,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:g,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},$=$e(),R=Z(()=>$.screen.gt.sm?_:_.filter(K=>K.name==="name"));return(K,I)=>{const D=G("i-head"),U=G("authenticated-layout");return d(),w(Y,null,[e(D,{title:Xl}),e(U,{"show-drawer-button":!0},{title:a(()=>[v(r(Xl))]),"left-button":a(()=>[t("div",nS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:I[0]||(I[0]=z=>l(ee).get(K.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[e(E,{icon:"cancel",disable:l(g).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:I[1]||(I[1]=z=>l(ee).get(K.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(E,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:l(g).processing||m.value.length==0,class:"q-ml-sm",onClick:V},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",sS,[e(Je,{class:"row",onSubmit:X(V,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-sm"},{default:a(()=>{var z,M,h;return[I[10]||(I[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Ht,{modelValue:l(g).datetime,"onUpdate:modelValue":I[2]||(I[2]=j=>l(g).datetime=j),label:"Waktu",error:!!l(g).errors.datetime,disable:l(g).processing,"error-message":l(g).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(de,{modelValue:l(g).type,"onUpdate:modelValue":I[3]||(I[3]=j=>l(g).type=j),options:l(y),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(g).errors.type,disable:l(g).processing,"map-options":"","emit-value":"","error-message":l(g).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(se,{modelValue:l(g).notes,"onUpdate:modelValue":I[4]||(I[4]=j=>l(g).notes=j),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(g).processing,error:!!l(g).errors.notes,"error-message":l(g).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),m.value.length===0||(z=l(s).props.errors)!=null&&z.product_ids?(d(),w("div",rS,[m.value.length===0?(d(),w(Y,{key:0},[v(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(M=l(s).props.errors)!=null&&M.product_ids?(d(),w(Y,{key:1},[v(r((h=l(s).props.errors)==null?void 0:h.product_ids),1)],64)):k("",!0)])):k("",!0),I[11]||(I[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",iS,[e(se,{modelValue:c.value.search,"onUpdate:modelValue":I[5]||(I[5]=j=>c.value.search=j),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(de,{modelValue:c.value.category_id,"onUpdate:modelValue":I[6]||(I[6]=j=>c.value.category_id=j),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(i),"map-options":"",dense:"","emit-value":"",onFilter:l(n),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(de,{modelValue:c.value.supplier_id,"onUpdate:modelValue":I[7]||(I[7]=j=>c.value.supplier_id=j),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(f),"map-options":"",dense:"","emit-value":"",onFilter:l(b),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:I[8]||(I[8]=j=>u.value=!u.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},r(u.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:R.value,rows:S.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:m.value,"onUpdate:selected":I[9]||(I[9]=j=>m.value=j)},{"body-cell-name":a(j=>[e(Q,{props:j},{default:a(()=>[l($).screen.lt.md?(d(),w("div",dS,[t("div",uS,r(j.row.name),1),j.row.category?(d(),w("div",mS,r(j.row.category.name),1)):k("",!0),t("div",cS,r(l(H)(j.row.stock))+" "+r(j.row.uom),1)])):(d(),w("div",pS,r(j.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},gS=Object.freeze(Object.defineProperty({__proto__:null,default:fS},Symbol.toStringTag,{value:"Module"})),bS={class:"q-gutter-sm"},vS={class:"q-gutter-sm"},_S={class:"row justify-center"},yS={class:"col col-lg-8 q-pa-sm"},kS={class:"row"},wS={class:"detail"},hS={key:0},$S={key:1},xS={class:"text-grey-9"},SS={__name:"Detail",setup(p){const s=ge(),u=`Rincian #${s.props.data.code}`,o=s.props.details,i=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:c=>H(c)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:c=>H(c)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:c=>H(c)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],n=$e(),f=Z(()=>n.screen.gt.sm?i:i.filter(c=>c.name==="no")),b=()=>{window.open(route("admin.stock-adjustment.print",{id:s.props.data.id}),"_blank")};return(c,m)=>{const g=G("i-head"),_=G("i-link"),y=G("authenticated-layout");return d(),w(Y,null,[e(g,{title:u}),e(y,{"show-drawer-button":!0},{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",bS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=S=>c.$inertia.get(c.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[t("div",vS,[e(E,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[1]||(m[1]=S=>b())})])]),default:a(()=>[t("div",_S,[t("div",yS,[t("div",kS,[e(pe,{square:"",flat:"",bordered:"",class:"q-card col"},{default:a(()=>[e(te,null,{default:a(()=>[m[22]||(m[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",wS,[t("tbody",null,[t("tr",null,[m[2]||(m[2]=t("td",{style:{width:"120px"}},"Kode",-1)),m[3]||(m[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+r(l(s).props.data.code),1)]),t("tr",null,[m[4]||(m[4]=t("td",null,"Jenis",-1)),m[5]||(m[5]=t("td",null,":",-1)),t("td",null,r(c.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[l(s).props.data.type]),1)]),t("tr",null,[m[6]||(m[6]=t("td",null,"Status",-1)),m[7]||(m[7]=t("td",null,":",-1)),t("td",null,r(c.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[m[8]||(m[8]=t("td",null,"Waktu",-1)),m[9]||(m[9]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),l(s).props.data.created_at?(d(),w("tr",hS,[m[11]||(m[11]=t("td",null,"Dibuat Oleh",-1)),m[12]||(m[12]=t("td",null,":",-1)),t("td",null,[l(s).props.data.creator?(d(),w(Y,{key:0},[e(_,{href:c.route("admin.user.detail",{id:l(s).props.data.creator})},{default:a(()=>[v(r(l(s).props.data.creator.username)+" - "+r(l(s).props.data.creator.name),1)]),_:1},8,["href"]),m[10]||(m[10]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(l(s).props.data.created_at)),1)])])):k("",!0),l(s).props.data.updater?(d(),w("tr",$S,[m[14]||(m[14]=t("td",null,"Diperbarui oleh",-1)),m[15]||(m[15]=t("td",null,":",-1)),t("td",null,[l(s).props.data.updater?(d(),w(Y,{key:0},[e(_,{href:c.route("admin.user.detail",{id:l(s).props.data.updater})},{default:a(()=>[v(r(l(s).props.data.updater.username)+" - "+r(l(s).props.data.updater.name),1)]),_:1},8,["href"]),m[13]||(m[13]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(l(s).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[m[16]||(m[16]=t("td",null,"Total Modal",-1)),m[17]||(m[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:xe(l(s).props.data.total_cost<0?"text-red-10":l(s).props.data.total_cost>0?"text-green-10":"")},r(l(ia)(l(s).props.data.total_cost)),3)])]),t("tr",null,[m[18]||(m[18]=t("td",null,"Total Harga",-1)),m[19]||(m[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:xe(l(s).props.data.total_price<0?"text-red-10":l(s).props.data.total_price>0?"text-green-10":"")},r(l(ia)(l(s).props.data.total_price)),3)])]),t("tr",null,[m[20]||(m[20]=t("td",null,"Catatan",-1)),m[21]||(m[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)])])])]),_:1}),e(te,null,{default:a(()=>[m[28]||(m[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Ee,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:f.value,rows:l(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":a(S=>[e(Q,{props:S},{default:a(()=>[l(n).screen.lt.md?(d(),w(Y,{key:1},[t("div",xS,[t("b",null,"#"+r(S.rowIndex+1),1),m[23]||(m[23]=v(" - ")),e(_,{href:c.route("admin.product.detail",{id:S.row.product_id})},{default:a(()=>[v(r(S.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[v(" Stok Lama: "+r(l(H)(S.row.old_quantity))+" "+r(S.row.uom),1),m[25]||(m[25]=t("br",null,null,-1)),v(" Stok Baru: "+r(l(H)(S.row.new_quantity))+" "+r(S.row.uom),1),m[26]||(m[26]=t("br",null,null,-1)),t("div",{class:xe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},[v(" Selisih: "+r((S.row.balance>0?"+":"")+l(H)(S.row.balance))+" "+r(S.row.uom),1),m[24]||(m[24]=t("br",null,null,-1)),v(" (Rp. "+r(l(H)(S.row.subtotal_cost))+" / Rp. "+r(l(H)(S.row.subtotal_price))+") ",1)],2),m[27]||(m[27]=t("br",null,null,-1)),v(" "+r(S.row.notes),1)])],64)):(d(),w(Y,{key:0},[v(r(S.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":a(S=>[e(Q,{props:S},{default:a(()=>[e(_,{href:c.route("admin.product.detail",{id:S.row.product_id})},{default:a(()=>[v(r(S.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":a(S=>[e(Q,{props:S},{default:a(()=>[t("div",{class:xe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},r((S.row.balance>0?"+":"")+l(H)(S.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":a(S=>[e(Q,{props:S},{default:a(()=>[t("div",{class:xe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},r(l(H)(S.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":a(S=>[e(Q,{props:S},{default:a(()=>[t("div",{class:xe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},r(l(H)(S.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},VS=Object.freeze(Object.defineProperty({__proto__:null,default:SS},Symbol.toStringTag,{value:"Module"})),qS={class:"q-gutter-sm"},CS={class:"col col-lg-6 q-pa-xs"},TS={class:"text-bold"},PS={key:0},RS={class:"text-caption text-grey-8"},Zl="Penyesuaian Stok",OS={__name:"Editor",setup(p){const s=$e(),u=ge(),o=Qe({id:u.props.item.id,type:u.props.item.type,datetime:new Date(u.props.item.datetime),notes:u.props.item.notes,action:"save",details:[]}),i=ot(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),n=T(u.props.details.map(g=>(typeof g.new_quantity=="string"&&(g.new_quantity=parseFloat(g.new_quantity)),g))),f=g=>{const _=()=>{o.action=g,o.details=n.value.map(y=>({id:y.id,new_quantity:y.new_quantity})),ca(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:o,url:route("admin.stock-adjustment.save")})};g==="close"||g==="cancel"?xt.create({title:"Konfirmasi",message:g==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{_()}).onCancel(()=>{}):_()},b=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:g=>H(g)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:g=>H(g)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(g,_)=>H(_.new_quantity-_.old_quantity)}],c=Z(()=>s.screen.gt.sm?b:b.filter(g=>g.name==="product_name"||g.name==="new_quantity")),m=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(g,_)=>{const y=G("i-head"),S=G("authenticated-layout");return d(),w(Y,null,[e(y,{title:Zl}),e(S,{"show-drawer-button":!0},{title:a(()=>[v(r(Zl))]),"left-button":a(()=>[t("div",qS,[l(s).screen.gt.sm?(d(),O(E,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=V=>g.$inertia.get(g.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":a(()=>[e(E,{icon:"save",onClick:_[1]||(_[1]=V=>f("save")),disable:l(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(E,{icon:"check",onClick:_[2]||(_[2]=V=>f("close")),disable:l(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),g.$can("admin.product.import")||g.$can("admin.product:view-cost")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:_[5]||(_[5]=X(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[ae((d(),O(oe,{clickable:"",onClick:_[3]||(_[3]=V=>m())},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"print"})]),_:1}),e(B,null,{default:a(()=>_[10]||(_[10]=[v(" Cetak Kartu Stok")])),_:1})]),_:1})),[[ne],[fe]]),ae((d(),O(oe,{clickable:"",onClick:_[4]||(_[4]=X(V=>f("cancel"),["stop"]))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"red"})]),_:1}),e(B,{class:"text-red"},{default:a(()=>_[11]||(_[11]=[v("Batalkan")])),_:1})]),_:1})),[[ne],[fe]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",CS,[e(Je,{class:"row",onSubmit:X(f,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>_[12]||(_[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[6]||(_[6]=V=>l(o).id=V)},null,512),[[yt,l(o).id]]),e(Ht,{modelValue:l(o).datetime,"onUpdate:modelValue":_[7]||(_[7]=V=>l(o).datetime=V),label:"Waktu",error:!!l(o).errors.datetime,disable:l(o).processing,"error-message":l(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(de,{modelValue:l(o).type,"onUpdate:modelValue":_[8]||(_[8]=V=>l(o).type=V),options:l(i),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(o).errors.type,disable:l(o).processing,"map-options":"","emit-value":"","error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(se,{modelValue:l(o).notes,"onUpdate:modelValue":_[9]||(_[9]=V=>l(o).notes=V),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-pa-xs"},{default:a(()=>[e(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:c.value,rows:n.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":a(V=>[e(Q,{props:V},{default:a(()=>[t("div",TS,r(V.row.product_name),1),l(s).screen.lt.md?(d(),w("div",PS,[t("div",RS,[v(" Tercatat: "+r(l(H)(V.row.old_quantity))+" ",1),_[13]||(_[13]=t("br",null,null,-1)),v(" Selisih: "+r(l(H)(V.row.new_quantity-V.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":a(V=>[e(Q,{props:V,class:"text-center"},{default:a(()=>[e(Me,{modelValue:V.row[V.col.name],"onUpdate:modelValue":$=>V.row[V.col.name]=$,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},IS=Object.freeze(Object.defineProperty({__proto__:null,default:OS},Symbol.toStringTag,{value:"Module"}));function US(){const p=Ot();if(!p)throw new Error("useCan must be called within a component setup function.");return s=>p.proxy.$can(s)}const DS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},jS={class:"q-pa-xs"},ES={class:"full-width row flex-center text-grey-8 q-gutter-sm"},AS={key:0,class:"flex q-gutter-xs"},BS={class:"flex q-col-gutter-xs"},MS={key:0},NS={key:1},zS={key:0},FS={class:"flex justify-end"},eo="Penyesuaian Stok",LS={__name:"Index",setup(p){const s=T([]),u=T(!0),o=T(!1),i=T(null),n=T(null),f=at(n),b=Lt(),c=Kt(),m=[{label:"Semua Tahun",value:"all"},{label:`${b}`,value:b},...It(b-2,b-1).reverse()],g=[{value:"all",label:"Semua Bulan"},...Ut()],_=je({search:"",year:b,month:c,status:"all",type:"all",...Le()}),y=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],S=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],V=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),$=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];he(()=>{K()});const R=j=>st({message:`Hapus Penyesuaian Stok #${j.code}?`,url:route("admin.stock-adjustment.delete",j.id),fetchItemsCallback:K,loading:u}),K=(j=null)=>Ke({pagination:V,filter:_,props:j,rows:s,url:route("admin.stock-adjustment.data"),loading:u,tableRef:i}),I=()=>{K()},D=j=>{j.status=="draft"?ee.get(route("admin.stock-adjustment.editor",j.id)):ee.get(route("admin.stock-adjustment.detail",j.id))},{protectClick:U}=Bt(),z=U(D),M=$e(),h=Z(()=>{let j=$;return US()||(j=j.filter(P=>P.name!=="cost")),M.screen.gt.sm?j:j.filter(P=>P.name==="id"||P.name==="action")});return(j,P)=>{const x=G("i-head"),A=G("authenticated-layout");return d(),w(Y,null,[e(x,{title:eo}),e(A,null,ze({"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=F=>o.value=!o.value)},null,8,["icon"]),j.$can("admin.stock-adjustment.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=F=>l(ee).get(j.route("admin.stock-adjustment.create")))})):k("",!0)]),title:a(()=>[v(r(eo))]),default:a(()=>[t("div",jS,[e(Ee,{ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:V.value,"onUpdate:pagination":P[8]||(P[8]=F=>V.value=F),filter:_.search,loading:u.value,columns:h.value,rows:s.value,"rows-per-page-options":[10,25,50],style:He({height:l(f)}),onRequest:K,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:F,message:q,filter:N})=>[t("div",ES,[t("span",null,r(q)+" "+r(N?" with term "+N:""),1)])]),body:a(F=>[e(Re,{props:F,onClick:X(q=>l(z)(F.row,q),["stop"]),class:"cursor-pointer"},{default:a(()=>[e(Q,{key:"id",props:F},{default:a(()=>[l(M).screen.lt.md?(d(),w(Y,{key:1},[t("div",BS,[t("div",null,"#"+r(F.row.code),1),t("div",null,[e(C,{name:"history"}),v(" "+r(l(ve)(F.row.datetime)),1)]),e(la,{dense:"",size:"sm",color:F.row.status==="draft"?"orange":F.row.status==="closed"?"green":F.row.status==="canceled"?"red":"",icon:F.row.status==="draft"?"emergency":F.row.status==="closed"?"check":F.row.status==="canceled"?"close":""},{default:a(()=>[v(r(j.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[F.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(C,{name:"category"}),v(" "+r(j.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[F.row.type]),1)]),F.row.created_by?(d(),w("div",MS,[e(C,{name:"person"}),P[9]||(P[9]=v(" Dibuat: ")),t("b",null,r(F.row.created_by.username),1),e(C,{name:"history"}),v(" "+r(l(ve)(F.row.created_at)),1)])):k("",!0),F.row.updated_by?(d(),w("div",NS,[e(C,{name:"person"}),P[10]||(P[10]=v(" Diperbarui: ")),t("b",null,r(F.row.updated_by.username),1),e(C,{name:"history"}),v(" "+r(l(ve)(F.row.updated_at)),1)])):k("",!0),t("div",{class:xe(F.row.total_cost<0?"text-red-10":F.row.total_cost>0?"text-green-10":"")},[e(C,{name:"money"}),j.$can("admin.product:view-cost")?(d(),w("span",zS,"Rp. "+r(l(H)(F.row.total_cost))+" / ",1)):k("",!0),v(" Rp. "+r(l(H)(F.row.total_price)),1)],2)],64)):(d(),w("div",AS,"#"+r(F.row.code),1))]),_:2},1032,["props"]),e(Q,{key:"datetime",props:F},{default:a(()=>[v(r(l(ve)(F.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"status",props:F,class:"text-center"},{default:a(()=>[v(r(j.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[F.row.status]),1)]),_:2},1032,["props"]),e(Q,{key:"type",props:F},{default:a(()=>[v(r(j.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[F.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"total_cost",props:F},{default:a(()=>[j.$can("admin.product:view-cost")?(d(),w("div",{key:0,class:xe(F.row.total_cost<0?"text-red-10":F.row.total_cost>0?"text-green-10":"")},r(l(H)(F.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"total_price",props:F},{default:a(()=>[t("div",{class:xe(F.row.total_price<0?"text-red-10":F.row.total_price>0?"text-green-10":"")},r(l(H)(F.row.total_price)),3)]),_:2},1032,["props"]),e(Q,{key:"notes",props:F},{default:a(()=>[v(r(F.row.notes),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:F},{default:a(()=>[t("div",FS,[j.$can("admin.stock-adjustment.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[7]||(P[7]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[j.$can("admin.stock-adjustment.delete")?ae((d(),O(oe,{key:0,onClick:X(q=>R(F.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>P[11]||(P[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",DS,[e(de,{modelValue:_.year,"onUpdate:modelValue":[P[2]||(P[2]=F=>_.year=F),I],options:m,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),_.year!="all"?(d(),O(de,{key:0,modelValue:_.month,"onUpdate:modelValue":[P[3]||(P[3]=F=>_.month=F),I],options:g,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:_.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:_.status,"onUpdate:modelValue":[P[4]||(P[4]=F=>_.status=F),I],options:y,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(de,{modelValue:_.type,"onUpdate:modelValue":[P[5]||(P[5]=F=>_.type=F),I],options:S,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":P[6]||(P[6]=F=>_.search=F),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},KS=Object.freeze(Object.defineProperty({__proto__:null,default:LS},Symbol.toStringTag,{value:"Module"})),HS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},WS={class:"q-pa-xs"},YS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},to="Riwayat Stok",QS={__name:"Index",setup(p){ge();const s=T(null),u=T(null),o=at(u),i=Lt(),n=Kt(),f=[{label:"Semua Tahun",value:"all"},{label:`${i}`,value:i},...It(i-2,i-1).reverse()],b=[{value:"all",label:"Semua Bulan"},...Ut()],c=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],m=$e(),g=T(!1),_=T([]),y=T(!0),S=je({type:"all",search:"",year:i,month:n,...Le()}),V=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let $=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{const U=new URLSearchParams(window.location.search).get("page");U&&(V.value.page=parseInt(U)),R()});const R=(D=null)=>{Ke({pagination:V,filter:S,props:D,rows:_,url:route("admin.stock-movement.data"),loading:y,tableRef:s})},K=()=>{R()},I=Z(()=>m.screen.lt.sm?$.filter(D=>D.name==="id"||D.name==="quantity"):$);return(D,U)=>{const z=G("i-head"),M=G("authenticated-layout");return d(),w(Y,null,[e(z,{title:to}),e(M,null,ze({title:a(()=>[v(r(to))]),"right-button":a(()=>[e(E,{icon:g.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=h=>g.value=!g.value)},null,8,["icon"])]),default:a(()=>[t("div",WS,[e(Ee,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":U[5]||(U[5]=h=>V.value=h),filter:S.search,loading:y.value,columns:I.value,rows:_.value,"rows-per-page-options":[10,25,50],style:He({height:l(o)}),onRequest:R,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:P})=>[t("div",YS,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Re,{props:h},{default:a(()=>[e(Q,{key:"id",props:h},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(h.row.code),1)]),t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(h.row.created_at)),1)]),t("div",null,[e(it,null,{default:a(()=>[v(r(D.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[h.row.ref_type]),1)]),_:2},1024)]),l(m).screen.lt.sm?(d(),w(Y,{key:0},[t("div",null,[e(C,{name:"token",class:"inline-icon"}),v(" "+r(h.row.product.name),1)]),t("div",{class:xe(h.row.quantity>0?"text-positive":"text-negative")},[e(C,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(l(H)(h.row.quantity_before))+" "+r(h.row.uom)+"  "+r(l(H)(h.row.quantity_after))+" "+r(h.row.uom),1)],2),e(Se,{text:h.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"product",props:h},{default:a(()=>[v(r(h.row.product.name),1)]),_:2},1032,["props"]),e(Q,{key:"quantity_before",props:h},{default:a(()=>[v(r(l(H)(h.row.quantity_before)),1)]),_:2},1032,["props"]),e(Q,{key:"quantity",props:h,class:xe(h.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[v(r(l($t)(h.row.quantity))+" ",1),l(m).screen.lt.sm?(d(),w(Y,{key:0},[v(r(h.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Q,{key:"quantity_after",props:h},{default:a(()=>[v(r(l(H)(h.row.quantity_after)),1)]),_:2},1032,["props"]),e(Q,{key:"uom",props:h},{default:a(()=>[v(r(h.row.uom),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:h},{default:a(()=>[e(Se,{text:h.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[g.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:u},{default:a(()=>[t("div",HS,[e(de,{modelValue:S.year,"onUpdate:modelValue":[U[1]||(U[1]=h=>S.year=h),K],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),S.year!="all"?(d(),O(de,{key:0,modelValue:S.month,"onUpdate:modelValue":[U[2]||(U[2]=h=>S.month=h),K],options:b,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:S.year===null},null,8,["modelValue","disable"])):k("",!0),e(de,{modelValue:S.ref_type,"onUpdate:modelValue":[U[3]||(U[3]=h=>S.ref_type=h),K],options:c,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:S.search,"onUpdate:modelValue":U[4]||(U[4]=h=>S.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},JS=Object.freeze(Object.defineProperty({__proto__:null,default:QS},Symbol.toStringTag,{value:"Module"})),GS={class:"detail"},XS={key:0},ZS={key:1},eV={key:2},tV={key:3},aV={key:4},lV={key:5},oV={key:6},nV={key:0,class:"q-pt-md"},yn={__name:"MainInfoTab",setup(p){const s=ge(),u=()=>{st({message:`Hapus Pemasok ${s.props.data.name}?`,url:route("admin.supplier.delete",s.props.data.id),onSuccess:()=>{ee.get(route("admin.supplier.index"))}})};return(o,i)=>(d(),w(Y,null,[t("table",GS,[t("tbody",null,[i[22]||(i[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Nama",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[t("td",null,r(l(s).props.data.balance<0?"Utang":"Utang / Piutang"),1),i[5]||(i[5]=t("td",null,":",-1)),t("td",{class:xe(l(s).props.data.balance<0?"text-red":"text-green")},r(l(ia)(l(s).props.data.balance)),3)]),l(s).props.data.phone_1?(d(),w("tr",XS,[i[6]||(i[6]=t("td",null,"No Telepon",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,[e(ea,{phone:l(s).props.data.phone_1},null,8,["phone"])])])):k("",!0),l(s).props.data.phone_2?(d(),w("tr",ZS,[i[8]||(i[8]=t("td",null,"No Telepon 2",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,[e(ea,{phone:l(s).props.data.phone_2},null,8,["phone"])])])):k("",!0),l(s).props.data.phone_3?(d(),w("tr",eV,[i[10]||(i[10]=t("td",null,"No Telepon 3",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,[e(ea,{phone:l(s).props.data.phone_3},null,8,["phone"])])])):k("",!0),l(s).props.data.address?(d(),w("tr",tV,[i[12]||(i[12]=t("td",null,"Alamat",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.address),1)])):k("",!0),l(s).props.data.return_address?(d(),w("tr",aV,[i[14]||(i[14]=t("td",null,"Alamat Retur",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.return_address),1)])):k("",!0),l(s).props.data.bank_account_name_1||l(s).props.data.bank_account_number_1||l(s).props.data.bank_account_holder_1?(d(),w("tr",lV,[i[16]||(i[16]=t("td",null,"Rek 1",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank_account_name_1)+" "+r(l(s).props.data.bank_account_number_1)+" a.n. "+r(l(s).props.data.bank_account_holder_1),1)])):k("",!0),l(s).props.data.bank_account_name_2||l(s).props.data.bank_account_number_2||l(s).props.data.bank_account_holder_2?(d(),w("tr",oV,[i[18]||(i[18]=t("td",null,"Rek 2",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank_account_name_2)+" "+r(l(s).props.data.bank_account_number_2)+" a.n. "+r(l(s).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Status",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(d(),w("div",nV,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>u())})])):k("",!0)],64))}},sV=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"})),rV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},iV={class:"text-bold"},dV={class:"text-bold"},uV={key:0,class:"text-bold"},mV={key:1},kn={__name:"OrderHistoryTab",setup(p){const s=ge(),u=T([]),o=T(!0),i=je({customer_id:s.props.data.id,...Le()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp.)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(g=null)=>Ke({pagination:n,filter:i,props:g,rows:u,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:s.props.data.id}}),loading:o}),c=$e(),m=Z(()=>c.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),O(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:V})=>[t("div",rV,[t("span",null,r(S)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Re,{props:y,class:"cursor-pointer",onClick:X(S=>l(ee).get(g.route("admin.purchase-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",iV,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),w(Y,{key:0},[t("div",dV,[e(C,{name:"money",class:"inline-icon"}),v(" Total: Rp. "+r(l(H)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(d(),w("div",uV,[e(C,{name:"money",class:"inline-icon"}),v(" Sisa Utang: Rp. "+r(l(H)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(d(),w("div",mV,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(Qo,{status:y.row.status},null,8,["status"]),e(Jo,{status:y.row.payment_status},null,8,["status"])])]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:y},{default:a(()=>[v(r(l(H)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"remaining_debt",props:y},{default:a(()=>[v(r(l(H)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},cV=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"})),pV={class:"q-gutter-sm"},fV={class:"q-gutter-sm"},gV={class:"col col-lg-6 q-pa-xs"},bV={class:"row"},ao="Rincian Pemasok",vV={__name:"Detail",setup(p){const s=ge(),u=T("main");return $e(),(o,i)=>{const n=G("i-head"),f=G("authenticated-layout");return d(),w(Y,null,[e(n,{title:ao}),e(f,null,{title:a(()=>[v(r(ao))]),"left-button":a(()=>[t("div",pV,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":a(()=>[t("div",fV,[o.$can("admin.supplier.edit")?(d(),O(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>l(ee).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),O(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>l(ee).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),O(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>l(ee).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",gV,[t("div",bV,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Tt,{modelValue:u.value,"onUpdate:modelValue":i[4]||(i[4]=b=>u.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Pt,{modelValue:u.value,"onUpdate:modelValue":i[5]||(i[5]=b=>u.value=b),animated:""},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(yn)]),_:1}),e(nt,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(kn)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},_V=Object.freeze(Object.defineProperty({__proto__:null,default:vV},Symbol.toStringTag,{value:"Module"})),yV={class:"q-gutter-sm"},kV={class:"col col-md-6 q-pa-xs"},wV={class:"row q-col-gutter-md"},hV={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},$V={key:2,class:"row q-col-gutter-md"},xV={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},SV={key:4,class:"row q-col-gutter-md"},VV={key:5,class:"row q-col-gutter-md"},qV={style:{"margin-left":"-10px"},class:"q-mt-md"},CV={class:"q-mt-sm"},TV={__name:"Editor",setup(p){const s=ge(),u=(s.props.data.id?"Edit":"Tambah")+" Pemasok",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,phone_1:s.props.data.phone_1,phone_2:s.props.data.phone_2,phone_3:s.props.data.phone_3,url_1:s.props.data.url_1,url_2:s.props.data.url_2,bank_account_name_1:s.props.data.bank_account_name_1,bank_account_holder_1:s.props.data.bank_account_holder_1,bank_account_number_1:s.props.data.bank_account_number_1,bank_account_name_2:s.props.data.bank_account_name_2,bank_account_holder_2:s.props.data.bank_account_holder_2,bank_account_number_2:s.props.data.bank_account_number_2,address:s.props.data.address,return_address:s.props.data.return_address,active:!!s.props.data.active}),i=T(!0),n=()=>rt({form:o,url:route("admin.supplier.save")});return(f,b)=>{const c=G("i-head"),m=G("authenticated-layout");return d(),w(Y,null,[e(c,{title:u}),e(m,{"show-drawer-button":!0},{title:a(()=>[v(r(u))]),"left-button":a(()=>[t("div",yV,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>f.$goBack())})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:b[1]||(b[1]=g=>n()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",kV,[e(Je,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[2]||(b[2]=g=>l(o).id=g)},null,512),[[yt,l(o).id]]),e(se,{modelValue:l(o).code,"onUpdate:modelValue":b[3]||(b[3]=g=>l(o).code=g),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[g=>g&&g.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(o).name,"onUpdate:modelValue":b[4]||(b[4]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",wV,[e(se,{modelValue:l(o).phone_1,"onUpdate:modelValue":b[5]||(b[5]=g=>l(o).phone_1=g),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_1,"error-message":l(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(d(),O(se,{key:0,modelValue:l(o).phone_2,"onUpdate:modelValue":b[6]||(b[6]=g=>l(o).phone_2=g),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_2,"error-message":l(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(d(),O(se,{key:1,modelValue:l(o).phone_3,"onUpdate:modelValue":b[7]||(b[7]=g=>l(o).phone_3=g),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_3,"error-message":l(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(se,{modelValue:l(o).address,"onUpdate:modelValue":b[8]||(b[8]=g=>l(o).address=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(d(),O(se,{key:0,modelValue:l(o).return_address,"onUpdate:modelValue":b[9]||(b[9]=g=>l(o).return_address=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.return_address,"error-message":l(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(d(),w("div",hV," Rekening 1 ")),i.value?k("",!0):(d(),w("div",$V,[e(se,{modelValue:l(o).bank_account_name_1,"onUpdate:modelValue":b[10]||(b[10]=g=>l(o).bank_account_name_1=g),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_1,"error-message":l(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).bank_account_number_1,"onUpdate:modelValue":b[11]||(b[11]=g=>l(o).bank_account_number_1=g),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_1,"error-message":l(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).bank_account_holder_1,"onUpdate:modelValue":b[12]||(b[12]=g=>l(o).bank_account_holder_1=g),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_1,"error-message":l(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(d(),w("div",xV," Rekening 2 ")),i.value?k("",!0):(d(),w("div",SV,[e(se,{modelValue:l(o).bank_account_name_2,"onUpdate:modelValue":b[13]||(b[13]=g=>l(o).bank_account_name_2=g),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_2,"error-message":l(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).bank_account_number_2,"onUpdate:modelValue":b[14]||(b[14]=g=>l(o).bank_account_number_2=g),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_2,"error-message":l(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).bank_account_holder_2,"onUpdate:modelValue":b[15]||(b[15]=g=>l(o).bank_account_holder_2=g),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_2,"error-message":l(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(d(),w("div",VV,[e(se,{modelValue:l(o).url_1,"onUpdate:modelValue":b[16]||(b[16]=g=>l(o).url_1=g),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_1,"error-message":l(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).url_2,"onUpdate:modelValue":b[17]||(b[17]=g=>l(o).url_2=g),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_2,"error-message":l(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",qV,[e(ua,{class:"full-width q-pl-none",modelValue:l(o).active,"onUpdate:modelValue":b[18]||(b[18]=g=>l(o).active=g),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",CV,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:b[19]||(b[19]=X(g=>i.value=!i.value,["stop"]))},[e(C,{name:i.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),v(" "+r(i.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},PV=Object.freeze(Object.defineProperty({__proto__:null,default:TV},Symbol.toStringTag,{value:"Module"})),RV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},OV={class:"q-pa-xs"},IV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},UV={key:0},DV={key:1},jV={class:"flex justify-end"},lo="Pemasok",EV={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=je({search:"",status:"active",...Le()}),m=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{S()});const y=D=>st({message:`Hapus pemasok ${D.name}?`,url:route("admin.supplier.delete",D.id),fetchItemsCallback:S,loading:i}),S=(D=null)=>{Ke({pagination:m,filter:c,props:D,rows:o,url:route("admin.supplier.data"),loading:i,tableRef:n})},V=()=>S(),$=D=>ee.get(route("admin.supplier.detail",{id:D.id})),{protectClick:R}=Bt(),K=R($),I=Z(()=>s.screen.gt.sm?g:g.filter(D=>D.name==="code"||D.name==="action"));return(D,U)=>{const z=G("i-head"),M=G("authenticated-layout");return d(),w(Y,null,[e(z,{title:lo}),e(M,null,ze({title:a(()=>[v(r(lo))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:U[0]||(U[0]=h=>u.value=!u.value)},null,8,["icon"]),D.$can("admin.supplier.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:U[1]||(U[1]=h=>l(ee).get(D.route("admin.supplier.add")))})):k("",!0)]),default:a(()=>[t("div",OV,[e(Ee,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":U[5]||(U[5]=h=>m.value=h),filter:c.search,loading:i.value,columns:I.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:P})=>[t("div",IV,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Re,{props:h,class:xe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:X(j=>l(K)(h.row,j),["stop"])},{default:a(()=>[e(Q,{key:"code",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),O(C,{key:0,name:"person"})):k("",!0),v(" "+r(h.row.code)+" ",1),l(s).screen.lt.md?(d(),w(Y,{key:1},[v(" - "+r(h.row.name),1)],64)):k("",!0)]),l(s).screen.lt.md?(d(),w(Y,{key:0},[t("div",{class:xe(h.row.balance<0?"text-negative":"text-positive")},[e(C,{name:"wallet"}),v(" "+r(l(H)(h.row.balance)),1)],2),h.row.phone_1?(d(),w("div",UV,[e(C,{name:"phone"}),v(" "+r(h.row.phone_1),1)])):k("",!0),h.row.address?(d(),w("div",DV,[e(C,{name:"home_pin"}),v(" "+r(h.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[v(r(h.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:h,class:"wrap-column"},{default:a(()=>[t("div",{class:xe(h.row.balance<0?"text-negative":"text-positive")},r(l(H)(h.row.balance)),3)]),_:2},1032,["props"]),e(Q,{key:"phone_1",props:h},{default:a(()=>[v(r(h.row.phone_1),1)]),_:2},1032,["props"]),e(Q,{key:"address",props:h},{default:a(()=>[v(r(h.row.address),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:h},{default:a(()=>[t("div",jV,[D.$can("admin.supplier.add")||D.$can("admin.supplier.edit")||D.$can("admin.supplier.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:U[4]||(U[4]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[D.$can("admin.supplier.add")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(j=>l(ee).get(D.route("admin.supplier.duplicate",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>U[6]||(U[6]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),D.$can("admin.supplier.edit")?ae((d(),O(oe,{key:1,clickable:"",onClick:X(j=>l(ee).get(D.route("admin.supplier.edit",h.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>U[7]||(U[7]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),D.$can("admin.supplier.delete")?ae((d(),O(oe,{key:2,onClick:X(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>U[8]||(U[8]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",RV,[e(de,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[U[2]||(U[2]=h=>c.status=h),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":U[3]||(U[3]=h=>c.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},AV=Object.freeze(Object.defineProperty({__proto__:null,default:EV},Symbol.toStringTag,{value:"Module"})),BV={class:"q-gutter-sm"},MV={class:"col col-md-6 q-pa-xs"},NV={class:"q-pt-md"},zV={key:0,class:"text-caption text-negative"},FV={class:"q-pt-md"},LV={key:0,class:"text-caption text-negative"},KV={__name:"Editor",setup(p){const s=$e(),u=ge(),o=(u.props.data.id?"Edit":"Tambah")+" Skema Pajak",i=Qe({id:u.props.data.id,name:u.props.data.name,rate_percentage:u.props.data.rate_percentage??0,tax_authority:u.props.data.tax_authority,is_inclusive:u.props.data.is_inclusive??!1,active:u.props.data.active??!0,description:u.props.data.description}),n=()=>rt({form:i,url:route("admin.tax-scheme.save")});return(f,b)=>{const c=G("i-head"),m=G("authenticated-layout");return d(),w(Y,null,[e(c,{title:o}),e(m,{"show-drawer-button":!l(s).screen.lt.md},ze({title:a(()=>[v(r(o))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",MV,[e(Je,{class:"row",onSubmit:X(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(i).id=g)},null,512),[[yt,l(i).id]]),e(se,{autofocus:"",modelValue:l(i).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(i).name=g),modelModifiers:{trim:!0},label:"Nama Skema Pajak","lazy-rules":"",error:!!l(i).errors.name,disable:l(i).processing,"error-message":l(i).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(i).rate_percentage,"onUpdate:modelValue":b[3]||(b[3]=g=>l(i).rate_percentage=g),modelModifiers:{number:!0},label:"Tarif Persentase (%)",type:"number",suffix:"%",rules:[g=>g>=0||"Persentase tidak boleh negatif."],error:!!l(i).errors.rate_percentage,disable:l(i).processing,"error-message":l(i).errors.rate_percentage,"hide-bottom-space":""},null,8,["modelValue","rules","error","disable","error-message"]),e(se,{modelValue:l(i).tax_authority,"onUpdate:modelValue":b[4]||(b[4]=g=>l(i).tax_authority=g),modelModifiers:{trim:!0},label:"Otoritas Pajak (Opsional)",hint:"Contoh: DJP, Pemerintah Daerah",error:!!l(i).errors.tax_authority,disable:l(i).processing,"error-message":l(i).errors.tax_authority,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:l(i).description,"onUpdate:modelValue":b[5]||(b[5]=g=>l(i).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.description,"error-message":l(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",NV,[e(el,{modelValue:l(i).is_inclusive,"onUpdate:modelValue":b[6]||(b[6]=g=>l(i).is_inclusive=g),disable:l(i).processing,label:l(i).is_inclusive?"Harga Jual SUDAH termasuk Pajak":"Harga Jual BELUM termasuk Pajak",color:"primary"},null,8,["modelValue","disable","label"]),l(i).errors.is_inclusive?(d(),w("div",zV,r(l(i).errors.is_inclusive),1)):k("",!0)]),t("div",FV,[e(el,{modelValue:l(i).active,"onUpdate:modelValue":b[7]||(b[7]=g=>l(i).active=g),disable:l(i).processing,label:l(i).active?"Skema Aktif":"Skema Non-Aktif",color:"primary"},null,8,["modelValue","disable","label"]),l(i).errors.active?(d(),w("div",LV,r(l(i).errors.active),1)):k("",!0)])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:b[8]||(b[8]=g=>f.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",BV,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>f.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},HV=Object.freeze(Object.defineProperty({__proto__:null,default:KV},Symbol.toStringTag,{value:"Module"})),WV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},YV={class:"q-pa-xs"},QV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},JV={class:"text-weight-bold"},GV={class:"text-grey-8"},XV={class:"text-weight-medium"},ZV={class:"text-weight-medium text-uppercase"},eq={key:0,class:"text-grey-8"},tq={key:1,class:"text-grey-8"},aq={class:"flex justify-end"},oo="Skema Pajak",lq={__name:"Index",setup(p){const s=$e(),u=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=at(f),c=je({search:"",...Le()}),m=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"rate_percentage",label:"Tarif",field:"rate_percentage",align:"right",sortable:!0,format:V=>`${V}%`},{name:"is_inclusive",label:"Tipe Harga",field:"is_inclusive",align:"center",format:V=>V?"INCLUSIVE":"EXCLUSIVE",sortable:!0},{name:"tax_authority",label:"Otoritas",field:"tax_authority",align:"left",sortable:!0},{name:"active",label:"Status",field:"active",align:"center",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{y()});const _=V=>st({message:`Hapus Skema Pajak ${V.name}?`,url:route("admin.tax-scheme.delete",V.id),fetchItemsCallback:y,loading:i}),y=(V=null)=>{Ke({pagination:m,filter:c,props:V,rows:o,url:route("admin.tax-scheme.data"),loading:i,tableRef:n})},S=Z(()=>s.screen.gt.sm?g:g.filter(V=>V.name==="name"||V.name==="action"));return(V,$)=>{const R=G("i-head"),K=G("authenticated-layout");return d(),w(Y,null,[e(R,{title:oo}),e(K,null,ze({title:a(()=>[v(r(oo))]),"right-button":a(()=>[e(E,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=I=>u.value=!u.value)},null,8,["icon"]),V.$can("admin.tax-scheme.add")?(d(),O(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=I=>l(ee).get(V.route("admin.tax-scheme.add")))})):k("",!0)]),default:a(()=>[t("div",YV,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":$[4]||($[4]=I=>m.value=I),filter:c.search,loading:i.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:I,message:D,filter:U})=>[t("div",QV,[t("span",null,r(D)+" "+r(U?" with term "+U:""),1)])]),body:a(I=>[e(Re,{props:I},{default:a(()=>[e(Q,{key:"name",props:I,class:"wrap-column"},{default:a(()=>[t("div",JV,r(I.row.name),1),l(s).screen.gt.sm?k("",!0):(d(),w(Y,{key:0},[t("div",GV,[$[5]||($[5]=v(" Tarif: ")),t("span",XV,r(I.row.rate_percentage)+"%",1)]),t("div",null,[$[6]||($[6]=v(" Tipe: ")),t("span",ZV,r(I.row.is_inclusive?"Inclusive":"Exclusive"),1)]),I.row.tax_authority?(d(),w("div",eq,[e(C,{name:"account_balance",size:"xs"}),v(" Otoritas: "+r(I.row.tax_authority),1)])):k("",!0),I.row.description?(d(),w("div",tq,[e(C,{name:"description",size:"xs"}),v(" "+r(I.row.description),1)])):k("",!0),e(it,{color:I.row.active?"positive":"negative"},{default:a(()=>[v(r(I.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])],64))]),_:2},1032,["props"]),e(Q,{key:"rate_percentage",props:I,class:"text-right text-weight-bold"},{default:a(()=>[v(r(I.row.rate_percentage)+"% ",1)]),_:2},1032,["props"]),e(Q,{key:"is_inclusive",props:I,class:"text-center"},{default:a(()=>[e(it,{color:I.row.is_inclusive?"green-7":"deep-orange-7","text-color":"white"},{default:a(()=>[v(r(I.row.is_inclusive?"INCLUSIVE":"EXCLUSIVE"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Q,{key:"tax_authority",props:I,class:"wrap-column"},{default:a(()=>[v(r(I.row.tax_authority),1)]),_:2},1032,["props"]),e(Q,{key:"active",props:I,class:"text-center"},{default:a(()=>[e(it,{color:I.row.active?"positive":"negative"},{default:a(()=>[v(r(I.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Q,{key:"description",props:I,class:"wrap-column"},{default:a(()=>[v(r(I.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:I},{default:a(()=>[t("div",aq,[V.$can("admin.tax-scheme.add")||V.$can("admin.tax-scheme.edit")||V.$can("admin.tax-scheme.delete")?(d(),O(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[3]||($[3]=X(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ue,{style:{width:"200px"}},{default:a(()=>[V.$can("admin.tax-scheme.add")?ae((d(),O(oe,{key:0,clickable:"",onClick:X(D=>l(ee).get(V.route("admin.tax-scheme.duplicate",I.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(B,null,{default:a(()=>$[7]||($[7]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),V.$can("admin.tax-scheme.edit")?ae((d(),O(oe,{key:1,clickable:"",onClick:X(D=>l(ee).get(V.route("admin.tax-scheme.edit",I.row.id)),["stop"])},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(B,null,{default:a(()=>$[8]||($[8]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),V.$can("admin.tax-scheme.delete")?ae((d(),O(oe,{key:2,onClick:X(D=>_(I.row),["stop"]),clickable:""},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(B,null,{default:a(()=>$[9]||($[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",WV,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":$[2]||($[2]=I=>c.search=I),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},oq=Object.freeze(Object.defineProperty({__proto__:null,default:lq},Symbol.toStringTag,{value:"Module"})),nq={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},sq={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},rq={class:"absolute-bottom text-grey-6 q-pa-md"},Ia="amanah-pos.layout.left-drawer-open",iq={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(p,{expose:s}){const u=$e(),o=ge(),i=T(JSON.parse(localStorage.getItem(Ia))),n=T(!1),f=()=>i.value=!i.value,b=()=>{i.value=!1};return Ne(i,c=>{localStorage.setItem(Ia,c)}),he(()=>{i.value=JSON.parse(localStorage.getItem(Ia)),u.screen.lt.md&&(i.value=!1)}),s({hideDrawer:b}),(c,m)=>{const g=G("my-link");return d(),O(Vs,{view:"lHh LpR lFf"},{default:a(()=>[e(ws,null,{default:a(()=>[e(Ge,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:a(()=>[p.showDrawerButton&&!i.value?(d(),O(E,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:f},{default:a(()=>[e(C,{class:"material-symbols-outlined"},{default:a(()=>m[36]||(m[36]=[v("dock_to_right")])),_:1})]),_:1})):k("",!0),Vt(c.$slots,"left-button",{},void 0,!0),e(sa,{style:{"font-size":"16px"}},{default:a(()=>[Vt(c.$slots,"title",{},()=>[v(r(c.$config.APP_NAME),1)],!0)]),_:3}),Vt(c.$slots,"right-button",{},void 0,!0)]),_:3}),Vt(c.$slots,"header",{},void 0,!0)]),_:3}),e(hs,{breakpoint:768,modelValue:i.value,"onUpdate:modelValue":m[35]||(m[35]=_=>i.value=_),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:a(()=>[t("div",nq,[t("div",sq,[e($s,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=_=>n.value=_),class:xe(["profile-btn text-bold",{"profile-btn-active":n.value}]),flat:"",label:l(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:a(()=>[e(Ue,{id:"profile-btn-popup",style:{color:"#444"}},{default:a(()=>[e(oe,null,{default:a(()=>[e(ta,{style:{"margin-left":"-15px"}},{default:a(()=>[e(C,{name:"person"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>[e(g,{class:"text-bold text-grey-9",href:c.route("admin.user-profile.edit")},{default:a(()=>[v(r(l(o).props.auth.user.name),1)]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}),e(Pe),ae((d(),O(oe,{clickable:"",style:{color:"inherit"},href:c.route("admin.auth.logout")},{default:a(()=>[e(B,null,{default:a(()=>[e(be,null,{default:a(()=>[e(C,{name:"logout",class:"q-mr-sm"}),m[37]||(m[37]=v(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[fe],[ne]])]),_:1})]),_:1},8,["modelValue","label","class"]),i.value?(d(),O(E,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:f},{default:a(()=>[e(C,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(xs,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:a(()=>[e(Ue,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:a(()=>[ae((d(),O(oe,{clickable:"",active:c.$page.url.startsWith("/admin/home"),onClick:m[1]||(m[1]=_=>l(ee).get(c.route("admin.home")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"home"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[38]||(m[38]=[v("Beranda")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]),c.$can("admin.dashboard")?ae((d(),O(oe,{key:0,clickable:"",active:c.$page.url.startsWith("/admin/dashboard"),onClick:m[2]||(m[2]=_=>l(ee).get(c.route("admin.dashboard")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"dashboard"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[39]||(m[39]=[v("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),e(Ct,{icon:"o_fast_forward",label:"Pintasan"},{default:a(()=>[c.$can("admin.sales-order.add")?ae((d(),O(oe,{key:0,class:"subnav show-icon",clickable:"",onClick:m[3]||(m[3]=_=>l(ee).get(c.route("admin.sales-order.add")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"add_shopping_cart"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[40]||(m[40]=[v("Penjualan Baru ")])),_:1})]),_:1})]),_:1})),[[ne]]):k("",!0),c.$can("admin.purchase-order.add")?ae((d(),O(oe,{key:1,class:"subnav show-icon",clickable:"",onClick:m[4]||(m[4]=_=>l(ee).get(c.route("admin.purchase-order.add")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"o_shopping_basket"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[41]||(m[41]=[v("Pembelian Baru ")])),_:1})]),_:1})]),_:1})),[[ne]]):k("",!0),e(Pe),c.$can("admin.customer.add")?ae((d(),O(oe,{key:2,class:"subnav show-icon",clickable:"",onClick:m[5]||(m[5]=_=>l(ee).get(c.route("admin.customer.add")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"person_add_alt"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[42]||(m[42]=[v("Pelanggan Baru ")])),_:1})]),_:1})]),_:1})),[[ne]]):k("",!0),c.$can("admin.supplier.add")?ae((d(),O(oe,{key:3,class:"subnav show-icon",clickable:"",onClick:m[6]||(m[6]=_=>l(ee).get(c.route("admin.supplier.add")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"o_business_center"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[43]||(m[43]=[v("Pemasok Baru ")])),_:1})]),_:1})]),_:1})),[[ne]]):k("",!0),e(Pe),c.$can("admin.product.add")?ae((d(),O(oe,{key:4,class:"subnav show-icon",clickable:"",onClick:m[7]||(m[7]=_=>l(ee).get(c.route("admin.product.add")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"o_inventory_2"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[44]||(m[44]=[v("Produk Baru ")])),_:1})]),_:1})]),_:1})),[[ne]]):k("",!0)]),_:1}),c.$can("admin.sales-order.index")||c.$can("admin.customer.index")||c.$can("admin.sales-order-return.index")?(d(),O(Ct,{key:1,icon:"storefront",label:"Penjualan","default-opened":c.$page.url.startsWith("/admin/sales-orders")||c.$page.url.startsWith("/admin/sales-order-returns")||c.$page.url.startsWith("/admin/customers")||c.$page.url.startsWith("/admin/customer-wallet-transactions")||c.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[c.$can("admin.sales-order.index")?ae((d(),O(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/sales-orders"),onClick:m[8]||(m[8]=_=>l(ee).get(c.route("admin.sales-order.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"add_shopping_cart"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[45]||(m[45]=[v("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.sales-order-return.index")?ae((d(),O(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/sales-order-returns"),onClick:m[9]||(m[9]=_=>l(ee).get(c.route("admin.sales-order-return.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"remove_shopping_cart"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[46]||(m[46]=[v("Retur Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.customer.index")?ae((d(),O(oe,{key:2,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/customers"),onClick:m[10]||(m[10]=_=>l(ee).get(c.route("admin.customer.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"people"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[47]||(m[47]=[v("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.customer-wallet-transaction-confirmation.index")||c.$can("admin.customer-wallet-transaction.index")?(d(),O(Ct,{key:3,class:"subnav",icon:"wallet",label:"Wallet","default-opened":c.$page.url.startsWith("/admin/customer-wallet-transactions")||c.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[c.$can("admin.customer-wallet-transaction-confirmation.index")?ae((d(),O(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:m[11]||(m[11]=_=>l(ee).get(c.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"add_task"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[48]||(m[48]=[v("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.customer-wallet-transaction.index")?ae((d(),O(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:m[12]||(m[12]=_=>l(ee).get(c.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"moving"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[49]||(m[49]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.purchase-order.index")||c.$can("admin.supplier.index")||c.$can("admin.purchase-order-return.index")?(d(),O(Ct,{key:2,icon:"local_shipping",label:"Pembelian","default-opened":c.$page.url.startsWith("/admin/purchase-orders")||c.$page.url.startsWith("/admin/purchase-order-returns")||c.$page.url.startsWith("/admin/suppliers")},{default:a(()=>[c.$can("admin.purchase-order.index")?ae((d(),O(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/purchase-orders"),onClick:m[13]||(m[13]=_=>l(ee).get(c.route("admin.purchase-order.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"add_shopping_cart"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[50]||(m[50]=[v("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.purchase-order-return.index")?ae((d(),O(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/purchase-order-returns"),onClick:m[14]||(m[14]=_=>l(ee).get(c.route("admin.purchase-order-return.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"remove_shopping_cart"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[51]||(m[51]=[v("Retur Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.supplier.index")?ae((d(),O(oe,{key:2,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/suppliers"),onClick:m[15]||(m[15]=_=>l(ee).get(c.route("admin.supplier.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"people"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[52]||(m[52]=[v("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.product.index")||c.$can("admin.product-category.index")||c.$can("admin.stock-adjustment.index")||c.$can("admin.stock-movement.index")?(d(),O(Ct,{key:3,icon:"inventory_2",label:"Inventori","default-opened":c.$page.url.startsWith("/admin/products")||c.$page.url.startsWith("/admin/product-categories")||c.$page.url.startsWith("/admin/stock-adjustments")||c.$page.url.startsWith("/admin/stock-movements")},{default:a(()=>[c.$can("admin.stock-adjustment.index")?ae((d(),O(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/stock-adjustments"),onClick:m[16]||(m[16]=_=>l(ee).get(c.route("admin.stock-adjustment.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"swap_vert"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[53]||(m[53]=[v("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.stock-movement.index")?ae((d(),O(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/stock-movements"),onClick:m[17]||(m[17]=_=>l(ee).get(c.route("admin.stock-movement.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"timeline"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[54]||(m[54]=[v("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.product.index")?ae((d(),O(oe,{key:2,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/products"),onClick:m[18]||(m[18]=_=>l(ee).get(c.route("admin.product.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"box"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[55]||(m[55]=[v("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.product-category.index")?ae((d(),O(oe,{key:3,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/product-categories"),onClick:m[19]||(m[19]=_=>l(ee).get(c.route("admin.product-category.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"category"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[56]||(m[56]=[v("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(Ct,{icon:"business_center",label:"Back Office","default-opened":c.$page.url.startsWith("/admin/cashier-terminals")||c.$page.url.startsWith("/admin/cashier-sessions")||c.$page.url.startsWith("/admin/finance-accounts")||c.$page.url.startsWith("/admin/finance-transactions")||c.$page.url.startsWith("/admin/operational-costs")||c.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[c.$can("admin.cashier-session.index")||c.$can("admin.cashier-terminal.index")||c.$can("admin.finance-account.index")||c.$can("admin.finance-transaction.index")||c.$can("admin.operational-cost.index")||c.$can("admin.operational-cost-category.index")?(d(),O(Ct,{key:0,class:"subnav show-icon",icon:"point_of_sale",label:"Kasir","default-opened":c.$page.url.startsWith("/admin/cashier-terminals")||c.$page.url.startsWith("/admin/cashier-session")},{default:a(()=>[c.$can("admin.cashier-session.index")?ae((d(),O(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/cashier-sessions"),onClick:m[20]||(m[20]=_=>l(ee).get(c.route("admin.cashier-session.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"tv_signin"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[57]||(m[57]=[v("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.cashier-terminal.index")?ae((d(),O(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/cashier-terminals"),onClick:m[21]||(m[21]=_=>l(ee).get(c.route("admin.cashier-terminal.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"point_of_sale"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[58]||(m[58]=[v("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.finance-transaction.index")||c.$can("admin.finance-account.index")?(d(),O(Ct,{key:1,class:"subnav show-icon",icon:"finance",label:"Keuangan","default-opened":c.$page.url.startsWith("/admin/finance-accounts")||c.$page.url.startsWith("/admin/finance-transactions")},{default:a(()=>[c.$can("admin.finance-transaction.index")?ae((d(),O(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/finance-transactions"),onClick:m[22]||(m[22]=_=>l(ee).get(c.route("admin.finance-transaction.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"moving"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[59]||(m[59]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.finance-account.index")?ae((d(),O(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/finance-accounts"),onClick:m[23]||(m[23]=_=>l(ee).get(c.route("admin.finance-account.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"groups_2"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[60]||(m[60]=[v("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.operational-cost.index")||c.$can("admin.operational-cost-category.index")?(d(),O(Ct,{key:2,class:"subnav show-icon",icon:"paid",label:"Operasional","default-opened":c.$page.url.startsWith("/admin/operational-costs")||c.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[c.$can("admin.operational-cost.index")?ae((d(),O(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/operational-costs"),onClick:m[24]||(m[24]=_=>l(ee).get(c.route("admin.operational-cost.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"request_quote"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[61]||(m[61]=[v("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.operational-cost-category.index")?ae((d(),O(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/operational-cost-categories"),onClick:m[25]||(m[25]=_=>l(ee).get(c.route("admin.operational-cost-category.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"category"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[62]||(m[62]=[v("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"]),c.$can("admin.report.index")?ae((d(),O(oe,{key:4,clickable:"",active:c.$page.url.startsWith("/admin/reports"),onClick:m[26]||(m[26]=_=>l(ee).get(c.route("admin.report.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"analytics"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[63]||(m[63]=[v("Laporan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),e(Ct,{icon:"settings",label:"Pengaturan","default-opened":c.$page.url.startsWith("/admin/settings")},{default:a(()=>[c.$can("admin.user.index")?ae((d(),O(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/users"),onClick:m[27]||(m[27]=_=>l(ee).get(c.route("admin.user.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"person"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[64]||(m[64]=[v("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.user-role.index")?ae((d(),O(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/user-roles"),onClick:m[28]||(m[28]=_=>l(ee).get(c.route("admin.user-role.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"group"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[65]||(m[65]=[v("Peran Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),k("",!0),c.$can("admin.pos-settings.edit")?ae((d(),O(oe,{key:3,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/pos"),onClick:m[30]||(m[30]=_=>l(ee).get(c.route("admin.pos-settings.edit")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"point_of_sale"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[67]||(m[67]=[v("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.company-profile.edit")?ae((d(),O(oe,{key:4,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/company-profile"),onClick:m[31]||(m[31]=_=>l(ee).get(c.route("admin.company-profile.edit")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"apartment"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[68]||(m[68]=[v("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.user-activity-log.index")?ae((d(),O(oe,{key:5,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:m[32]||(m[32]=_=>l(ee).get(c.route("admin.user-activity-log.index")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"article"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[69]||(m[69]=[v("Log Aktivitas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),k("",!0),ae((d(),O(oe,{class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/system-information"),onClick:m[34]||(m[34]=_=>l(ee).get(c.route("admin.settings.system-information")))},{default:a(()=>[e(B,{avatar:""},{default:a(()=>[e(C,{name:"info"})]),_:1}),e(B,null,{default:a(()=>[e(be,null,{default:a(()=>m[71]||(m[71]=[v("Informasi Sistem")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]])]),_:1},8,["default-opened"]),t("div",rq,"  2025 - "+r(c.$config.APP_NAME+" v"+c.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ss,{class:"bg-grey-1"},{default:a(()=>[e(Te,null,{default:a(()=>[Vt(c.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),Vt(c.$slots,"footer",{},void 0,!0)]),_:3})}}},dq=_t(iq,[["__scopeId","data-v-93d15eea"]]),uq={__name:"GuestLayout",setup(p){return(s,u)=>(d(),O(qs,null,{default:a(()=>[Vt(s.$slots,"default")]),_:3}))}};Cs({onRegistered(p){console.log("Admin Service Worker registered:",p)}});Ts({layouts:{authenticated:dq,guest:uq},pagesGlob:Object.assign({"./pages/_examples/Autocomplete1.vue":Is,"./pages/auth/Login.vue":Ns,"./pages/cashier-session/Close.vue":Ys,"./pages/cashier-session/Detail.vue":Ar,"./pages/cashier-session/Index.vue":Zr,"./pages/cashier-session/Open.vue":li,"./pages/cashier-session/detail/FinanceTransactionTab.vue":Ir,"./pages/cashier-session/detail/MainInfoTab.vue":_r,"./pages/cashier-session/detail/SalesOrderTab.vue":qr,"./pages/cashier-terminal/Detail.vue":_i,"./pages/cashier-terminal/Editor.vue":$i,"./pages/cashier-terminal/Index.vue":Ti,"./pages/cashier-terminal/detail/MainInfoTab.vue":mi,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":pi,"./pages/customer-wallet-transaction-confirmation/Detail.vue":Mi,"./pages/customer-wallet-transaction-confirmation/Index.vue":Hi,"./pages/customer-wallet-transaction/Adjustment.vue":Qi,"./pages/customer-wallet-transaction/Detail.vue":sd,"./pages/customer-wallet-transaction/Editor.vue":ud,"./pages/customer-wallet-transaction/Index.vue":_d,"./pages/customer/Detail.vue":zd,"./pages/customer/Editor.vue":Hd,"./pages/customer/Import.vue":Zd,"./pages/customer/Index.vue":iu,"./pages/customer/detail/MainInfoTab.vue":Cd,"./pages/customer/detail/OrderHistoryTab.vue":jd,"./pages/customer/detail/WalletHistoryTab.vue":Rd,"./pages/dashboard/Index.vue":Eu,"./pages/dashboard/cards/ActualSummaryCard.vue":wu,"./pages/dashboard/cards/ChartCard.vue":Vu,"./pages/dashboard/cards/SummaryCard.vue":Wu,"./pages/dashboard/cards/TopCard.vue":Ou,"./pages/finance-account/Detail.vue":nm,"./pages/finance-account/Editor.vue":um,"./pages/finance-account/Index.vue":$m,"./pages/finance-account/detail/HistoryTab.vue":Zu,"./pages/finance-account/detail/MainInfoTab.vue":Qu,"./pages/finance-transaction/Detail.vue":Um,"./pages/finance-transaction/Editor.vue":Am,"./pages/finance-transaction/Index.vue":Hm,"./pages/home/Index.vue":lc,"./pages/operational-cost-category/Editor.vue":rc,"./pages/operational-cost-category/Index.vue":fc,"./pages/operational-cost/Detail.vue":Sc,"./pages/operational-cost/Editor.vue":Rc,"./pages/operational-cost/Index.vue":Mc,"./pages/product-category/Editor.vue":Lc,"./pages/product-category/Index.vue":Gc,"./pages/product/Detail.vue":kp,"./pages/product/Editor.vue":Rp,"./pages/product/Import.vue":Dp,"./pages/product/Index.vue":Yp,"./pages/product/SendPriceList.vue":af,"./pages/product/SendPriceList2.vue":uf,"./pages/product/detail/MainInfoTab.vue":up,"./pages/product/detail/StockHistoryTab.vue":pp,"./pages/purchase-order-return/Create.vue":ff,"./pages/purchase-order-return/Detail.vue":pg,"./pages/purchase-order-return/Editor.vue":r1,"./pages/purchase-order-return/Index.vue":k1,"./pages/purchase-order-return/detail/MainInfoTab.vue":Nf,"./pages/purchase-order-return/detail/PaymentDialog.vue":Yf,"./pages/purchase-order-return/detail/RefundTab.vue":dg,"./pages/purchase-order-return/editor/HelpDialog.vue":Vg,"./pages/purchase-order-return/editor/ItemEditorDialog.vue":wg,"./pages/purchase-order-return/editor/ItemsListTable.vue":_g,"./pages/purchase-order-return/editor/OrderInfoDialog.vue":Pg,"./pages/purchase-order-return/editor/PaymentDialog.vue":E1,"./pages/purchase-order-return/editor/SuccessDialog.vue":G1,"./pages/purchase-order/Detail.vue":nv,"./pages/purchase-order/Editor.vue":k_,"./pages/purchase-order/Index.vue":O_,"./pages/purchase-order/detail/InvoiceTab.vue":Ob,"./pages/purchase-order/detail/PaymentDialog.vue":Mb,"./pages/purchase-order/detail/PaymentTab.vue":tv,"./pages/purchase-order/editor/HelpDialog.vue":Rv,"./pages/purchase-order/editor/ItemEditorDialog.vue":Tv,"./pages/purchase-order/editor/ItemsListTable.vue":uv,"./pages/purchase-order/editor/OrderInfoDialog.vue":Dv,"./pages/purchase-order/editor/PaymentDialog.vue":Vv,"./pages/purchase-order/editor/SuccessDialog.vue":Yv,"./pages/report/Index.vue":M_,"./pages/reports/ReportGeneratorLayout.vue":Z_,"./pages/reports/customer/Index.vue":ly,"./pages/reports/supplier/Index.vue":ry,"./pages/sales-order-return/Create.vue":my,"./pages/sales-order-return/Detail.vue":fk,"./pages/sales-order-return/Editor.vue":tw,"./pages/sales-order-return/Index.vue":bw,"./pages/sales-order-return/detail/MainInfoTab.vue":Ny,"./pages/sales-order-return/detail/PaymentDialog.vue":Yy,"./pages/sales-order-return/detail/RefundTab.vue":uk,"./pages/sales-order-return/editor/HelpDialog.vue":Sk,"./pages/sales-order-return/editor/ItemEditorDialog.vue":hk,"./pages/sales-order-return/editor/ItemsListTable.vue":yk,"./pages/sales-order-return/editor/OrderInfoDialog.vue":Tk,"./pages/sales-order-return/editor/PaymentDialog.vue":Iw,"./pages/sales-order-return/editor/SuccessDialog.vue":Ww,"./pages/sales-order/Detail.vue":o2,"./pages/sales-order/Editor.vue":kh,"./pages/sales-order/Index.vue":Eh,"./pages/sales-order/detail/InvoiceTab.vue":R0,"./pages/sales-order/detail/PaymentDialog.vue":B0,"./pages/sales-order/detail/PaymentTab.vue":e2,"./pages/sales-order/editor/HelpDialog.vue":P2,"./pages/sales-order/editor/ItemEditorDialog.vue":C2,"./pages/sales-order/editor/ItemsListTable.vue":d2,"./pages/sales-order/editor/OrderInfoDialog.vue":U2,"./pages/sales-order/editor/PaymentDialog.vue":S2,"./pages/sales-order/editor/SuccessDialog.vue":W2,"./pages/settings/SystemInformation.vue":Fh,"./pages/settings/company-profile/Edit.vue":Qh,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":Lh,"./pages/settings/database/Index.vue":e$,"./pages/settings/pos/Edit.vue":n$,"./pages/settings/user-activity-log/Detail.vue":K$,"./pages/settings/user-activity-log/Index.vue":X$,"./pages/settings/user-profile/Edit.vue":nx,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":Z$,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":ex,"./pages/settings/user-role/Detail.vue":wx,"./pages/settings/user-role/Editor.vue":qx,"./pages/settings/user-role/Index.vue":Ix,"./pages/settings/user/Detail.vue":Kx,"./pages/settings/user/Editor.vue":Gx,"./pages/settings/user/Index.vue":oS,"./pages/stock-adjustment/Create.vue":gS,"./pages/stock-adjustment/Detail.vue":VS,"./pages/stock-adjustment/Editor.vue":IS,"./pages/stock-adjustment/Index.vue":KS,"./pages/stock-movement/Index.vue":JS,"./pages/supplier/Detail.vue":_V,"./pages/supplier/Editor.vue":PV,"./pages/supplier/Index.vue":AV,"./pages/supplier/detail/MainInfoTab.vue":sV,"./pages/supplier/detail/OrderHistoryTab.vue":cV,"./pages/tax-scheme/Editor.vue":HV,"./pages/tax-scheme/Index.vue":oq})});
