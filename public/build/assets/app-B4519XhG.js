import{r as T,a as X,c as I,o as d,w as a,b as t,d as e,e as w,f as k,Q as ce,t as r,u as l,g as H,h as Oe,i as ia,T as Qe,j as kn,k as ge,l as Te,m as Je,n as G,p as rt,q as pe,s as le,v,x as oa,y as C,z as se,A as E,B as tt,F as J,C as Ye,D as te,E as yt,G as _t,H as Z,I as wn,J as Va,K as eo,L as It,M as ee,N as aa,O as he,R as ne,P as Ce,S as to,U as hn,V as $n,W as Yt,X as Et,Y as qa,Z as Ia,_ as xn,$ as Ne,a0 as Sn,a1 as Vn,a2 as qn,a3 as Nt,a4 as Cn,a5 as Tn,a6 as Ca,a7 as Zt,a8 as Ta,a9 as Ka,aa as Pn,ab as fa,ac as Ha,ad as Rn,ae as Wa,af as In,ag as ao,ah as On,ai as Dn,aj as Un,ak as Ua,al as ja,am as jn,an as Mt,ao as ve,ap as De,aq as Le,ar as Ke,as as $e,at as Re,au as Y,av as Se,aw as gt,ax as We,ay as je,az as ea,aA as xe,aB as Pe,aC as at,aD as Fe,aE as Ge,aF as He,aG as et,aH as Ae,aI as oe,aJ as N,aK as fe,aL as st,aM as Me,aN as da,aO as ba,aP as zt,aQ as Lt,aR as Ot,aS as Dt,aT as ot,aU as Ya,aV as Kt,aW as va,aX as na,aY as Ht,aZ as Ea,a_ as ua,a$ as $t,b0 as sa,b1 as En,b2 as An,b3 as lo,b4 as Bn,b5 as Mn,b6 as Nn,b7 as Fn,b8 as Qa,b9 as zn,ba as Ln,bb as Kn,bc as Hn,bd as oo,be as Ue,bf as vt,bg as Wn,bh as Ja,bi as Yn,bj as Qn,bk as Jn,bl as Gn,bm as Xn,bn as Zn,bo as es,bp as ke,bq as la,br as ra,bs as dt,bt as ts,bu as as,bv as ls,bw as os,bx as ns,by as ss,bz as Aa,bA as rs,bB as Pt,bC as ut,bD as Ba,bE as Oa,bF as no,bG as lt,bH as Jt,bI as so,bJ as ta,bK as wt,bL as ro,bM as is,bN as bt,bO as pt,bP as ft,bQ as xt,bR as _a,bS as Ft,bT as Ga,bU as ds,bV as us,bW as ms,bX as io,bY as cs,bZ as ps,b_ as fs,b$ as gs,c0 as bs,c1 as vs,c2 as _s,c3 as ys,c4 as ks,c5 as ws,c6 as hs,c7 as $s}from"./virtual_pwa-register-Bw-beZI2.js";const xs={class:"q-ma-md"},Ss={key:0},Vs={__name:"Autocomplete1",setup(p){const s=T(null),m=T([]);let o=null;const i=(n,g)=>{if(n.length<2){g(()=>{m.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Oe.get(`/web-api/customers?q=${n}`).then(b=>{const c=b.data.data.map(u=>({label:`${u.code} - ${u.name}`,value:u.id,data:u}));g(()=>{m.value=c})}).catch(b=>{console.error("Gagal mengambil data pelanggan:",b),g(()=>{m.value=[]})})})};return(n,g)=>{const b=X("guest-layout");return d(),I(b,null,{default:a(()=>[t("div",xs,[e(ce,{class:"full-width",modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=c=>s.value=c),"use-input":"",label:"Cari Pelanggan",options:m.value,onFilter:i,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),s.value?(d(),w("div",Ss," Saldo: Rp. "+r(l(H)(s.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},qs=Object.freeze(Object.defineProperty({__proto__:null,default:Vs},Symbol.toStringTag,{value:"Module"})),Cs={style:{"margin-left":"-10px"}},ya={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(p,{emit:s}){const m=p,o=s;return(i,n)=>(d(),w("div",Cs,[e(ia,{class:"full-width q-pl-none","model-value":m.modelValue,disable:m.disable,label:m.label,"onUpdate:modelValue":n[0]||(n[0]=g=>o("update:modelValue",g))},null,8,["model-value","disable","label"])]))}};function Da(p){return p instanceof File||p instanceof Blob||p instanceof FileList&&p.length>0||p instanceof FormData&&Array.from(p.values()).some(s=>Da(s))||typeof p=="object"&&p!==null&&Object.values(p).some(s=>Da(s))}function Ts(p,s=null){const m=Qe(p,s);let o=g=>g,i=null;const n={transform:g=>b=>(o=b,g),submit:g=>(b,c,u={})=>{m.wasSuccessful=!1,m.recentlySuccessful=!1,m.clearErrors(),clearTimeout(i),u.onBefore&&u.onBefore(),m.processing=!0,u.onStart&&u.onStart();const f=o(m.data());axios[b](c,f,{headers:{"Content-Type":Da(f)?"multipart/form-data":"application/json"},onUploadProgress:_=>{m.progress=_,u.onProgress&&u.onProgress(_)}}).then(_=>{m.processing=!1,m.progress=null,m.clearErrors(),m.wasSuccessful=!0,m.recentlySuccessful=!0,i=setTimeout(()=>m.recentlySuccessful=!1,2e3),u.onSuccess&&u.onSuccess(_.data),m.defaults(kn(m.data())),m.isDirty=!1}).catch(_=>{var y;m.processing=!1,m.progress=null,m.clearErrors(),((y=_.response)==null?void 0:y.status)===422&&Object.keys(_.response.data.errors).forEach(S=>{m.setError(S,_.response.data.errors[S][0])}),u.onError&&u.onError(_)}).finally(()=>{m.processing=!1,m.progress=null,u.onFinish&&u.onFinish()})}};return new Proxy(m,{get:(g,b,c)=>Object.keys(n).indexOf(b)<0?g[b]:n[b](c)})}const Ps={class:"column"},Rs={class:"row"},Is={class:"q-my-sm text-grey-7 text-subtitle1 text-bold"},Os={class:"flex justify-center"},Ds={__name:"Login",setup(p){let s=Ts({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const m=ge();console.log(m.props.data);const o=()=>rt({form:s,url:route("admin.auth.login"),onSuccess:()=>{s.processing=!0,window.location.href=route("admin.dashboard")}}),i=T(!1);return(n,g)=>{const b=X("i-head"),c=X("guest-layout");return d(),w(J,null,[e(b,{title:"Login"}),e(c,null,{default:a(()=>[e(Te,{class:"row justify-center items-center"},{default:a(()=>[t("div",Ps,[t("div",Rs,[e(Je,{class:"q-gutter-md",onSubmit:G(o,["prevent"])},{default:a(()=>[e(pe,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:a(()=>[e(le,{class:"text-center"},{default:a(()=>[t("div",Is,[v(" Login ke "+r(l(m).props.company.name)+" ",1),t("div",Os,[e(oa,{size:"100px",class:"q-my-none"},{default:a(()=>[e(C,{name:"badge",color:"grey"})]),_:1})])]),e(se,{modelValue:l(s).username,"onUpdate:modelValue":g[0]||(g[0]=u=>l(s).username=u),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!l(s).errors.username,autocomplete:"username","error-message":l(s).errors.username,disable:l(s).processing,rules:[u=>u&&u.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:a(()=>[e(C,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(se,{modelValue:l(s).password,"onUpdate:modelValue":g[2]||(g[2]=u=>l(s).password=u),type:i.value?"text":"password",label:"Kata Sandi",error:!!l(s).errors.password,autocomplete:"current-password","error-message":l(s).errors.password,"lazy-rules":"",disable:l(s).processing,rules:[u=>u&&u.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:g[1]||(g[1]=u=>i.value=!i.value)},{default:a(()=>[e(C,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(ya,{class:"q-mt-sm",modelValue:l(s).remember,"onUpdate:modelValue":g[3]||(g[3]=u=>l(s).remember=u),disable:l(s).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(tt,null,{default:a(()=>[e(E,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:l(s).processing,loading:l(s).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Us=Object.freeze(Object.defineProperty({__proto__:null,default:Ds},Symbol.toStringTag,{value:"Module"})),js={class:"q-gutter-sm"},Es={class:"col col-md-6 q-pa-xs"},As={class:"detail q-mt-md"},Bs={key:0},Ms={class:"text-bold"},Xa="Tutup Sesi Kasir",Ns={__name:"Close",setup(p){const s=ge(),m=Qe({closing_notes:s.props.data.closing_notes,closing_balance:parseFloat(s.props.data.closing_balance)}),o=()=>rt({form:m,url:route("admin.cashier-session.close",{id:s.props.data.id})});return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return d(),w(J,null,[e(g,{title:Xa}),e(b,null,{title:a(()=>[v(r(Xa))]),"left-button":a(()=>[t("div",js,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Es,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":n[1]||(n[1]=c=>l(m).id=c)},null,512),[[yt,l(m).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[t("table",As,[t("tbody",null,[t("tr",null,[n[4]||(n[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),n[5]||(n[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.id),1)]),t("tr",null,[n[6]||(n[6]=t("td",null,"Terminal",-1)),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"Kasir",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.user.username)+" - "+r(l(s).props.data.user.name),1)]),t("tr",null,[n[10]||(n[10]=t("td",null,"Saldo Awal",-1)),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.opening_balance)),1)]),l(s).props.data.opening_notes?(d(),w("tr",Bs,[n[12]||(n[12]=t("td",null,"Catatan Buka",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.opening_notes),1)])):k("",!0),t("tr",null,[n[14]||(n[14]=t("td",null,"Total Penjualan",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.total_sales)),1)]),t("tr",null,[n[16]||(n[16]=t("td",null,"Total Pemasukan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.total_income)),1)]),t("tr",null,[n[18]||(n[18]=t("td",null,"Total Pengeluaran",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.total_expense)),1)]),t("tr",null,[n[21]||(n[21]=t("td",null,"Saldo Akhir",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,[t("div",Ms,r(l(_t)(l(s).props.data.closing_balance)),1),n[20]||(n[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(se,{modelValue:l(m).closing_notes,"onUpdate:modelValue":n[2]||(n[2]=c=>l(m).closing_notes=c),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(m).processing,error:!!l(m).errors.closing_notes,"error-message":l(m).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:l(m).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(m).processing,onClick:n[3]||(n[3]=c=>l(Z).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Fs=Object.freeze(Object.defineProperty({__proto__:null,default:Ns},Symbol.toStringTag,{value:"Module"}));let zs=0;const Ls=["click","keydown"],Ks={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${zs++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Hs(p,s,m,o){const i=wn(eo,Va);if(i===Va)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Va;const{proxy:n}=It(),g=T(null),b=T(null),c=T(null),u=ee(()=>p.disable===!0||p.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},p.ripple===!0?{}:p.ripple)),f=ee(()=>i.currentModel.value===p.name),_=ee(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(f.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(p.icon&&p.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(p.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(p.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),y=ee(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(p.contentClass!==void 0?` ${p.contentClass}`:"")),S=ee(()=>p.disable===!0||i.hasFocus.value===!0||f.value===!1&&i.hasActiveTab.value===!0?-1:p.tabindex||0);function q(U,O){if(O!==!0&&g.value!==null&&g.value.focus(),p.disable!==!0){i.updateModel({name:p.name}),m("click",U);return}}function x(U){hn(U,[13,32])?q(U,!0):$n(U)!==!0&&U.keyCode>=35&&U.keyCode<=40&&U.altKey!==!0&&U.metaKey!==!0&&i.onKbdNavigate(U.keyCode,n.$el)===!0&&Yt(U),m("keydown",U)}function D(){const U=i.tabProps.value.narrowIndicator,O=[],F=Ce("div",{ref:c,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});p.icon!==void 0&&O.push(Ce(C,{class:"q-tab__icon",name:p.icon})),p.label!==void 0&&O.push(Ce("div",{class:"q-tab__label"},p.label)),p.alert!==!1&&O.push(p.alertIcon!==void 0?Ce(C,{class:"q-tab__alert-icon",color:p.alert!==!0?p.alert:void 0,name:p.alertIcon}):Ce("div",{class:"q-tab__alert"+(p.alert!==!0?` text-${p.alert}`:"")})),U===!0&&O.push(F);const B=[Ce("div",{class:"q-focus-helper",tabindex:-1,ref:g}),Ce("div",{class:y.value},to(s.default,O))];return U===!1&&B.push(F),B}const K={name:ee(()=>p.name),rootRef:b,tabIndicatorRef:c,routeData:o};aa(()=>{i.unregisterTab(K)}),he(()=>{i.registerTab(K)});function R(U,O){const F={ref:b,class:_.value,tabindex:S.value,role:"tab","aria-selected":f.value===!0?"true":"false","aria-disabled":p.disable===!0?"true":void 0,onClick:q,onKeydown:x,...O};return te(Ce(U,F,D()),[[ne,u.value]])}return{renderTab:R,$tabs:i}}const it=Et({name:"QTab",props:Ks,emits:Ls,setup(p,{slots:s,emit:m}){const{renderTab:o}=Hs(p,s,m);return()=>o("div")}});function Ws(p,s,m){const o=m===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${p?` text-${p}`:""}`}const Ys=["left","center","right","justify"],qt=Et({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:p=>Ys.includes(p)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(p,{slots:s,emit:m}){const{proxy:o}=It(),{$q:i}=o,{registerTick:n}=qa(),{registerTick:g}=qa(),{registerTick:b}=qa(),{registerTimeout:c,removeTimeout:u}=Ia(),{registerTimeout:f,removeTimeout:_}=Ia(),y=T(null),S=T(null),q=T(p.modelValue),x=T(!1),D=T(!0),K=T(!1),R=T(!1),U=[],O=T(0),F=T(!1);let B=null,h=null,j;const P=ee(()=>({activeClass:p.activeClass,activeColor:p.activeColor,activeBgColor:p.activeBgColor,indicatorClass:Ws(p.indicatorColor,p.switchIndicator,p.vertical),narrowIndicator:p.narrowIndicator,inlineLabel:p.inlineLabel,noCaps:p.noCaps})),$=ee(()=>{const be=O.value,Ve=q.value;for(let Ee=0;Ee<be;Ee++)if(U[Ee].name.value===Ve)return!0;return!1}),A=ee(()=>`q-tabs__content--align-${x.value===!0?"left":R.value===!0?"justify":p.align}`),z=ee(()=>`q-tabs row no-wrap items-center q-tabs--${x.value===!0?"":"not-"}scrollable q-tabs--${p.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${p.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${p.mobileArrows===!0?"":"out"}-arrows`+(p.dense===!0?" q-tabs--dense":"")+(p.shrink===!0?" col-shrink":"")+(p.stretch===!0?" self-stretch":"")),V=ee(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+A.value+(p.contentClass!==void 0?` ${p.contentClass}`:"")),M=ee(()=>p.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),ae=ee(()=>p.vertical!==!0&&i.lang.rtl===!0),ue=ee(()=>xn===!1&&ae.value===!0);Ne(ae,_e),Ne(()=>p.modelValue,be=>{ie({name:be,setCurrent:!0,skipEmit:!0})}),Ne(()=>p.outsideArrows,Ie);function ie({name:be,setCurrent:Ve,skipEmit:Ee}){q.value!==be&&(Ee!==!0&&p["onUpdate:modelValue"]!==void 0&&m("update:modelValue",be),(Ve===!0||p["onUpdate:modelValue"]===void 0)&&(me(q.value,be),q.value=be))}function Ie(){n(()=>{Xe({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function Xe(be){if(M.value===void 0||S.value===null)return;const Ve=be[M.value.container],Ee=Math.min(S.value[M.value.scroll],Array.prototype.reduce.call(S.value.children,(ct,Ze)=>ct+(Ze[M.value.content]||0),0)),mt=Ve>0&&Ee>Ve;x.value=mt,mt===!0&&g(_e),R.value=Ve<parseInt(p.breakpoint,10)}function me(be,Ve){const Ee=be!=null&&be!==""?U.find(ct=>ct.name.value===be):null,mt=Ve!=null&&Ve!==""?U.find(ct=>ct.name.value===Ve):null;if(pa===!0)pa=!1;else if(Ee&&mt){const ct=Ee.tabIndicatorRef.value,Ze=mt.tabIndicatorRef.value;B!==null&&(clearTimeout(B),B=null),ct.style.transition="none",ct.style.transform="none",Ze.style.transition="none",Ze.style.transform="none";const ze=ct.getBoundingClientRect(),kt=Ze.getBoundingClientRect();Ze.style.transform=p.vertical===!0?`translate3d(0,${ze.top-kt.top}px,0) scale3d(1,${kt.height?ze.height/kt.height:1},1)`:`translate3d(${ze.left-kt.left}px,0,0) scale3d(${kt.width?ze.width/kt.width:1},1,1)`,b(()=>{B=setTimeout(()=>{B=null,Ze.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Ze.style.transform="none"},70)})}mt&&x.value===!0&&L(mt.rootRef.value)}function L(be){const{left:Ve,width:Ee,top:mt,height:ct}=S.value.getBoundingClientRect(),Ze=be.getBoundingClientRect();let ze=p.vertical===!0?Ze.top-mt:Ze.left-Ve;if(ze<0){S.value[p.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ze),_e();return}ze+=p.vertical===!0?Ze.height-ct:Ze.width-Ee,ze>0&&(S.value[p.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ze),_e())}function _e(){const be=S.value;if(be===null)return;const Ve=be.getBoundingClientRect(),Ee=p.vertical===!0?be.scrollTop:Math.abs(be.scrollLeft);ae.value===!0?(D.value=Math.ceil(Ee+Ve.width)<be.scrollWidth-1,K.value=Ee>0):(D.value=Ee>0,K.value=p.vertical===!0?Math.ceil(Ee+Ve.height)<be.scrollHeight:Math.ceil(Ee+Ve.width)<be.scrollWidth)}function re(be){h!==null&&clearInterval(h),h=setInterval(()=>{Be(be)===!0&&de()},5)}function W(){re(ue.value===!0?Number.MAX_SAFE_INTEGER:0)}function ye(){re(ue.value===!0?0:Number.MAX_SAFE_INTEGER)}function de(){h!==null&&(clearInterval(h),h=null)}function Q(be,Ve){const Ee=Array.prototype.filter.call(S.value.children,kt=>kt===Ve||kt.matches&&kt.matches(".q-tab.q-focusable")===!0),mt=Ee.length;if(mt===0)return;if(be===36)return L(Ee[0]),Ee[0].focus(),!0;if(be===35)return L(Ee[mt-1]),Ee[mt-1].focus(),!0;const ct=be===(p.vertical===!0?38:37),Ze=be===(p.vertical===!0?40:39),ze=ct===!0?-1:Ze===!0?1:void 0;if(ze!==void 0){const kt=ae.value===!0?-1:1,jt=Ee.indexOf(Ve)+ze*kt;return jt>=0&&jt<mt&&(L(Ee[jt]),Ee[jt].focus({preventScroll:!0})),!0}}const qe=ee(()=>ue.value===!0?{get:be=>Math.abs(be.scrollLeft),set:(be,Ve)=>{be.scrollLeft=-Ve}}:p.vertical===!0?{get:be=>be.scrollTop,set:(be,Ve)=>{be.scrollTop=Ve}}:{get:be=>be.scrollLeft,set:(be,Ve)=>{be.scrollLeft=Ve}});function Be(be){const Ve=S.value,{get:Ee,set:mt}=qe.value;let ct=!1,Ze=Ee(Ve);const ze=be<Ze?-1:1;return Ze+=ze*5,Ze<0?(ct=!0,Ze=0):(ze===-1&&Ze<=be||ze===1&&Ze>=be)&&(ct=!0,Ze=be),mt(Ve,Ze),_e(),ct}function we(be,Ve){for(const Ee in be)if(be[Ee]!==Ve[Ee])return!1;return!0}function ht(){let be=null,Ve={matchedLen:0,queryDiff:9999,hrefLen:0};const Ee=U.filter(ze=>ze.routeData!==void 0&&ze.routeData.hasRouterLink.value===!0),{hash:mt,query:ct}=o.$route,Ze=Object.keys(ct).length;for(const ze of Ee){const kt=ze.routeData.exact.value===!0;if(ze.routeData[kt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:jt,query:xa,matched:_n,href:yn}=ze.routeData.resolvedLink.value,Sa=Object.keys(xa).length;if(kt===!0){if(jt!==mt||Sa!==Ze||we(ct,xa)===!1)continue;be=ze.name.value;break}if(jt!==""&&jt!==mt||Sa!==0&&we(xa,ct)===!1)continue;const Bt={matchedLen:_n.length,queryDiff:Ze-Sa,hrefLen:yn.length-jt.length};if(Bt.matchedLen>Ve.matchedLen){be=ze.name.value,Ve=Bt;continue}else if(Bt.matchedLen!==Ve.matchedLen)continue;if(Bt.queryDiff<Ve.queryDiff)be=ze.name.value,Ve=Bt;else if(Bt.queryDiff!==Ve.queryDiff)continue;Bt.hrefLen>Ve.hrefLen&&(be=ze.name.value,Ve=Bt)}if(be===null&&U.some(ze=>ze.routeData===void 0&&ze.name.value===q.value)===!0){pa=!1;return}ie({name:be,setCurrent:!0})}function Vt(be){if(u(),F.value!==!0&&y.value!==null&&be.target&&typeof be.target.closest=="function"){const Ve=be.target.closest(".q-tab");Ve&&y.value.contains(Ve)===!0&&(F.value=!0,x.value===!0&&L(Ve))}}function Ut(){c(()=>{F.value=!1},30)}function St(){Fa.avoidRouteWatcher===!1?f(ht):_()}function ca(){if(j===void 0){const be=Ne(()=>o.$route.fullPath,St);j=()=>{be(),j=void 0}}}function bn(be){U.push(be),O.value++,Ie(),be.routeData===void 0||o.$route===void 0?f(()=>{if(x.value===!0){const Ve=q.value,Ee=Ve!=null&&Ve!==""?U.find(mt=>mt.name.value===Ve):null;Ee&&L(Ee.rootRef.value)}}):(ca(),be.routeData.hasRouterLink.value===!0&&St())}function vn(be){U.splice(U.indexOf(be),1),O.value--,Ie(),j!==void 0&&be.routeData!==void 0&&(U.every(Ve=>Ve.routeData===void 0)===!0&&j(),St())}const Fa={currentModel:q,tabProps:P,hasFocus:F,hasActiveTab:$,registerTab:bn,unregisterTab:vn,verifyRouteModel:St,updateModel:ie,onKbdNavigate:Q,avoidRouteWatcher:!1};Cn(eo,Fa);function za(){B!==null&&clearTimeout(B),de(),j!==void 0&&j()}let La,pa;return aa(za),Sn(()=>{La=j!==void 0,za()}),Vn(()=>{La===!0&&(ca(),pa=!0,St()),Ie()}),()=>Ce("div",{ref:y,class:z.value,role:"tablist",onFocusin:Vt,onFocusout:Ut},[Ce(qn,{onResize:Xe}),Ce("div",{ref:S,class:V.value,onScroll:_e},Nt(s.default)),Ce(C,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(D.value===!0?"":" q-tabs__arrow--faded"),name:p.leftIcon||i.iconSet.tabs[p.vertical===!0?"up":"left"],onMousedownPassive:W,onTouchstartPassive:W,onMouseupPassive:de,onMouseleavePassive:de,onTouchendPassive:de}),Ce(C,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(K.value===!0?"":" q-tabs__arrow--faded"),name:p.rightIcon||i.iconSet.tabs[p.vertical===!0?"down":"right"],onMousedownPassive:ye,onTouchstartPassive:ye,onMouseupPassive:de,onMouseleavePassive:de,onTouchendPassive:de})])}});function Qs(p){const s=[.06,6,50];return typeof p=="string"&&p.length&&p.split(":").forEach((m,o)=>{const i=parseFloat(m);i&&(s[o]=i)}),s}const Js=Tn({name:"touch-swipe",beforeMount(p,{value:s,arg:m,modifiers:o}){if(o.mouse!==!0&&Zt.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",n={handler:s,sensitivity:Qs(m),direction:Ka(o),noop:Pn,mouseStart(g){Wa(g,n)&&In(g)&&(fa(n,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(g,!0))},touchStart(g){if(Wa(g,n)){const b=g.target;fa(n,"temp",[[b,"touchmove","move","notPassiveCapture"],[b,"touchcancel","end","notPassiveCapture"],[b,"touchend","end","notPassiveCapture"]]),n.start(g)}},start(g,b){Zt.is.firefox===!0&&Ta(p,!0);const c=Ha(g);n.event={x:c.left,y:c.top,time:Date.now(),mouse:b===!0,dir:!1}},move(g){if(n.event===void 0)return;if(n.event.dir!==!1){Yt(g);return}const b=Date.now()-n.event.time;if(b===0)return;const c=Ha(g),u=c.left-n.event.x,f=Math.abs(u),_=c.top-n.event.y,y=Math.abs(_);if(n.event.mouse!==!0){if(f<n.sensitivity[1]&&y<n.sensitivity[1]){n.end(g);return}}else if(window.getSelection().toString()!==""){n.end(g);return}else if(f<n.sensitivity[2]&&y<n.sensitivity[2])return;const S=f/b,q=y/b;n.direction.vertical===!0&&f<y&&f<100&&q>n.sensitivity[0]&&(n.event.dir=_<0?"up":"down"),n.direction.horizontal===!0&&f>y&&y<100&&S>n.sensitivity[0]&&(n.event.dir=u<0?"left":"right"),n.direction.up===!0&&f<y&&_<0&&f<100&&q>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&f<y&&_>0&&f<100&&q>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&f>y&&u<0&&y<100&&S>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&f>y&&u>0&&y<100&&S>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Yt(g),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Rn(),n.styleCleanup=x=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const D=()=>{document.body.classList.remove("no-pointer-events--children")};x===!0?setTimeout(D,50):D()}),n.handler({evt:g,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:b,distance:{x:f,y}})):n.end(g)},end(g){n.event!==void 0&&(Ca(n,"temp"),Zt.is.firefox===!0&&Ta(p,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),g!==void 0&&n.event.dir!==!1&&Yt(g),n.event=void 0)}};if(p.__qtouchswipe=n,o.mouse===!0){const g=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";fa(n,"main",[[p,"mousedown","mouseStart",`passive${g}`]])}Zt.has.touch===!0&&fa(n,"main",[[p,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[p,"touchmove","noop","notPassiveCapture"]])},updated(p,s){const m=p.__qtouchswipe;m!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&m.end(),m.handler=s.value),m.direction=Ka(s.modifiers))},beforeUnmount(p){const s=p.__qtouchswipe;s!==void 0&&(Ca(s,"main"),Ca(s,"temp"),Zt.is.firefox===!0&&Ta(p,!1),s.styleCleanup!==void 0&&s.styleCleanup(),delete p.__qtouchswipe)}}),Gs={name:{required:!0},disable:Boolean},Za={setup(p,{slots:s}){return()=>Ce("div",{class:"q-panel scroll",role:"tabpanel"},Nt(s.default))}},Xs={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Zs=["update:modelValue","beforeTransition","transition"];function er(){const{props:p,emit:s,proxy:m}=It(),{getCache:o}=Dn(),{registerTimeout:i}=Ia();let n,g;const b=T(null),c=T(null);function u(M){const ae=p.vertical===!0?"up":"left";j((m.$q.lang.rtl===!0?-1:1)*(M.direction===ae?1:-1))}const f=ee(()=>[[Js,u,void 0,{horizontal:p.vertical!==!0,vertical:p.vertical,mouse:!0}]]),_=ee(()=>p.transitionPrev||`slide-${p.vertical===!0?"down":"right"}`),y=ee(()=>p.transitionNext||`slide-${p.vertical===!0?"up":"left"}`),S=ee(()=>`--q-transition-duration: ${p.transitionDuration}ms`),q=ee(()=>typeof p.modelValue=="string"||typeof p.modelValue=="number"?p.modelValue:String(p.modelValue)),x=ee(()=>({include:p.keepAliveInclude,exclude:p.keepAliveExclude,max:p.keepAliveMax})),D=ee(()=>p.keepAliveInclude!==void 0||p.keepAliveExclude!==void 0);Ne(()=>p.modelValue,(M,ae)=>{const ue=O(M)===!0?F(M):-1;g!==!0&&h(ue===-1?0:ue<F(ae)?-1:1),b.value!==ue&&(b.value=ue,s("beforeTransition",M,ae),i(()=>{s("transition",M,ae)},p.transitionDuration))});function K(){j(1)}function R(){j(-1)}function U(M){s("update:modelValue",M)}function O(M){return M!=null&&M!==""}function F(M){return n.findIndex(ae=>ae.props.name===M&&ae.props.disable!==""&&ae.props.disable!==!0)}function B(){return n.filter(M=>M.props.disable!==""&&M.props.disable!==!0)}function h(M){const ae=M!==0&&p.animated===!0&&b.value!==-1?"q-transition--"+(M===-1?_.value:y.value):null;c.value!==ae&&(c.value=ae)}function j(M,ae=b.value){let ue=ae+M;for(;ue!==-1&&ue<n.length;){const ie=n[ue];if(ie!==void 0&&ie.props.disable!==""&&ie.props.disable!==!0){h(M),g=!0,s("update:modelValue",ie.props.name),setTimeout(()=>{g=!1});return}ue+=M}p.infinite===!0&&n.length!==0&&ae!==-1&&ae!==n.length&&j(M,M===-1?n.length:-1)}function P(){const M=F(p.modelValue);return b.value!==M&&(b.value=M),!0}function $(){const M=O(p.modelValue)===!0&&P()&&n[b.value];return p.keepAlive===!0?[Ce(Un,x.value,[Ce(D.value===!0?o(q.value,()=>({...Za,name:q.value})):Za,{key:q.value,style:S.value},()=>M)])]:[Ce("div",{class:"q-panel scroll",style:S.value,key:q.value,role:"tabpanel"},[M])]}function A(){if(n.length!==0)return p.animated===!0?[Ce(ao,{name:c.value},$)]:$()}function z(M){return n=On(Nt(M.default,[])).filter(ae=>ae.props!==null&&ae.props.slot===void 0&&O(ae.props.name)===!0),n.length}function V(){return n}return Object.assign(m,{next:K,previous:R,goTo:U}),{panelIndex:b,panelDirectives:f,updatePanelsList:z,updatePanelIndex:P,getPanelContent:A,getEnabledPanels:B,getPanels:V,isValidPanelName:O,keepAliveProps:x,needsUniqueKeepAliveWrapper:D,goToPanelByOffset:j,goToPanel:U,nextPanel:K,previousPanel:R}}const nt=Et({name:"QTabPanel",props:Gs,setup(p,{slots:s}){return()=>Ce("div",{class:"q-tab-panel",role:"tabpanel"},Nt(s.default))}}),Ct=Et({name:"QTabPanels",props:{...Xs,...Ua},emits:Zs,setup(p,{slots:s}){const m=It(),o=ja(p,m.proxy.$q),{updatePanelsList:i,getPanelContent:n,panelDirectives:g}=er(),b=ee(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(s),jn("div",{class:b.value},n(),"pan",p.swipeable,()=>g.value))}}),tr={class:"detail"},ar={key:0},lr={key:1},or={key:0},nr={key:0},sr={colspan:"100%"},rr={class:"q-my-md"},ir={key:4},dr={colspan:"100%"},ur={key:5},mr={colspan:"100%"},uo={__name:"MainInfoTab",setup(p){const s=ge();return(m,o)=>(d(),w("table",tr,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.user.username)+" - "+r(l(s).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.opening_balance)),1)]),l(s).props.data.opening_notes?(d(),w("tr",ar,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.total_expense)),1)]),l(s).props.data.is_closed?k("",!0):(d(),w("tr",lr,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.actual_balance)),1)])),l(s).props.data.is_closed?(d(),w(J,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.closing_balance)),1)]),l(s).props.data.closing_notes?(d(),w("tr",or,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),m.$can("admin.cashier-session.close")?(d(),w(J,{key:3},[l(s).props.data.is_closed?k("",!0):(d(),w("tr",nr,[t("td",sr,[t("div",rr,[e(E,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=i=>m.$inertia.get(m.route("admin.cashier-session.close",{id:l(s).props.data.id})))},{default:a(()=>o[26]||(o[26]=[v(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),l(s).props.data.created_at?(d(),w("tr",ir,[t("td",dr," Dibuat "+r(l(Mt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",ur,[t("td",mr," Diperbarui "+r(l(Mt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},cr=Object.freeze(Object.defineProperty({__proto__:null,default:uo},Symbol.toStringTag,{value:"Module"})),pr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},fr={class:"text-bold"},gr={key:0},br={class:"text-bold"},vr={key:1},_r={key:0},yr={key:0},kr={key:1},mo={__name:"SalesOrderTab",props:{data:Object},setup(p){const s=p,m=T([]),o=T(!0),i=De({...Le(),cashier_session_id:s.data.id,status:["closed","canceled"]}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(f=null)=>Ke({pagination:n,filter:i,props:f,rows:m,url:route("admin.sales-order.data"),loading:o}),c=$e(),u=ee(()=>c.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,_)=>(d(),I(je,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:q})=>[t("div",pr,[t("span",null,r(S)+" "+r(q?" with term "+q:""),1)])]),body:a(y=>[e(Re,{props:y,class:"cursor-pointer",onClick:G(S=>l(Z).get(f.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",fr,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),w(J,{key:0},[y.row.customer?(d(),w("div",gr,[e(C,{class:"inline-icon",name:"person"}),v(" "+r(y.row.customer_code)+" "+r(y.row.customer.name),1)])):k("",!0),t("div",br,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(H)(y.row.grand_total)),1)]),y.row.notes?(d(),w("div",vr,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(gt,{color:y.row.status==="closed"?"green":"red"},{default:a(()=>[v(r(f.$CONSTANTS.SALES_ORDER_STATUSES[y.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"customer",props:y},{default:a(()=>[y.row.customer?(d(),w("div",_r,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(y.row.customer_code)+" - "+r(y.row.customer_name),1)]),y.row.customer_phone?(d(),w("div",yr,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(y.row.customer_phone),1)])):k("",!0),y.row.customer_address?(d(),w("div",kr,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(y.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:y},{default:a(()=>[t("div",null,r(l(H)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},wr=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"})),hr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},$r={class:"text-bold"},xr={class:"text-bold"},Sr={key:0},Vr={class:"q-mt-sm"},co={__name:"FinanceTransactionTab",props:{data:Object},setup(p){var f;const s=p;console.log(s.data);const m=T([]),o=T(!0),i=De({...Le(),account_id:(f=s.data.cashier_terminal)==null?void 0:f.finance_account_id,from_datetime:ea(s.data.opened_at),to_datetime:s.data.closed_at?ea(s.data.closed_at):null}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(_=null)=>Ke({pagination:n,filter:i,props:_,rows:m,url:route("admin.finance-transaction.data"),loading:o}),c=$e(),u=ee(()=>c.screen.gt.sm?g:g.filter(_=>_.name==="id"));return(_,y)=>(d(),I(je,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=S=>n.value=S),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:S,message:q,filter:x})=>[t("div",hr,[t("span",null,r(q)+" "+r(x?" with term "+x:""),1)])]),body:a(S=>[e(Re,{props:S},{default:a(()=>[e(Y,{key:"id",props:S},{default:a(()=>[t("div",$r,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(S.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(" "+r(l(ve)(S.row.datetime)),1)]),l(c).screen.lt.md?(d(),w(J,{key:0},[t("div",xr,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(H)(S.row.amount)),1)]),S.row.notes?(d(),w("div",Sr,[e(Se,{text:S.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",Vr,[e(gt,{color:S.row.amount>=0?"green":"red"},{default:a(()=>[v(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"amount",props:S},{default:a(()=>[t("span",{class:xe(S.row.amount<0?"text-red":"text-green")},r(l(H)(S.row.amount)),3)]),_:2},1032,["props"]),e(Y,{key:"notes",props:S,class:"wrap-column"},{default:a(()=>[e(Se,{text:S.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},qr=Object.freeze(Object.defineProperty({__proto__:null,default:co},Symbol.toStringTag,{value:"Module"})),Cr={class:"q-gutter-sm"},Tr={class:"col col-lg-6 q-pa-xs"},Pr={class:"row"},el="Rincian Sesi Kasir",Rr={__name:"Detail",setup(p){const s=ge(),m=ee(()=>s.props.data),o=T("main");return Ne(()=>s.props.tab,i=>{i&&(o.value=i)},{immediate:!0}),(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return d(),w(J,null,[e(g,{title:el}),e(b,null,{title:a(()=>[v(r(el))]),"left-button":a(()=>[t("div",Cr,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Tr,[t("div",Pr,[e(pe,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:a(()=>[e(qt,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=c=>o.value=c),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Ringkasan"}),e(it,{name:"sales",label:"Transaksi Penjualan"}),e(it,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Pe),e(Ct,{modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=c=>o.value=c),animated:"",class:"q-pa-none"},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(uo,{data:m.value},null,8,["data"])]),_:1}),e(nt,{name:"sales",class:"q-pa-xs"},{default:a(()=>[e(mo,{data:m.value},null,8,["data"])]),_:1}),e(nt,{name:"finance",class:"q-pa-xs"},{default:a(()=>[e(co,{data:m.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Ir=Object.freeze(Object.defineProperty({__proto__:null,default:Rr},Symbol.toStringTag,{value:"Module"}));function At(){return{protectClick:s=>(m,o)=>{const i=window.getSelection();if(i&&!i.isCollapsed){o.stopPropagation();return}s(m,o)}}}const Or={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Dr={class:"q-pa-xs"},Ur={class:"full-width row flex-center text-grey-8 q-gutter-sm"},jr={class:"flex justify-end"},tl="Sesi Kasir",Er={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=De({search:"",status:"all",...Le()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];he(()=>{S()});const y=U=>st({message:`Hapus Sesi: ${U.cashier_terminal.name} - ${U.user.username}?`,url:route("admin.cashier-session.delete",U.id),fetchItemsCallback:S,loading:i}),S=(U=null)=>{Ke({pagination:u,filter:c,props:U,rows:o,url:route("admin.cashier-session.data"),loading:i,tableRef:n})},q=()=>S(),x=U=>Z.get(route("admin.cashier-session.detail",{id:U.id})),{protectClick:D}=At(),K=D(x),R=ee(()=>s.screen.gt.sm?f:f.filter(U=>U.name==="id"||U.name==="action"));return(U,O)=>{const F=X("i-head"),B=X("authenticated-layout");return d(),w(J,null,[e(F,{title:tl}),e(B,null,Fe({title:a(()=>[v(r(tl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=h=>m.value=!m.value)},null,8,["icon"]),U.$can("admin.cashier-session.open")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=h=>l(Z).get(U.route("admin.cashier-session.open")))})):k("",!0)]),default:a(()=>[t("div",Dr,[e(je,{class:"full-height-table",style:He({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":O[5]||(O[5]=h=>u.value=h),filter:c.search,loading:i.value,columns:R.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:P})=>[t("div",Ur,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Re,{props:h,class:xe(["cursor-pointer",h.row.is_closed?"":"bg-yellow-3"]),onClick:G(j=>l(K)(h.row,j),["stop"])},{default:a(()=>[e(Y,{key:"id",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" SessionID: "+r(h.row.id),1)]),t("div",null,[e(C,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(h.row.cashier_terminal.name),1)]),t("div",null,[e(C,{class:"inline-icon",name:"person"}),v(" "+r(h.row.user.username)+" - "+r(h.row.user.name),1)])]),_:2},1032,["props"]),e(Y,{key:"opening_info",props:h},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(h.row.opened_at?l(ve)(h.row.opened_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(_t)(h.row.opening_balance)),1)]),h.row.opening_notes?(d(),I(Se,{key:0,text:h.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"closing_info",props:h},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(h.row.closed_at?l(ve)(h.row.closed_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(_t)(h.row.closing_balance)),1)]),h.row.closing_notes?(d(),I(Se,{key:0,text:h.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"action",props:h},{default:a(()=>[t("div",jr,[U.$can("admin.cashier-session.close")||U.$can("admin.cashier-session.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[4]||(O[4]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[U.$can("admin.cashier-session.close")?te((d(),I(oe,{key:0,disable:h.row.is_closed,clickable:"",onClick:G(j=>l(Z).get(U.route("admin.cashier-session.close",h.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"logout"})]),_:1}),e(N,null,{default:a(()=>O[6]||(O[6]=[v("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[ne],[fe]]):k("",!0),U.$can("admin.cashier-session.delete")&&!h.row.is_closed?te((d(),I(oe,{key:1,onClick:G(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>O[7]||(O[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",Or,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[O[2]||(O[2]=h=>c.status=h),q],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":O[3]||(O[3]=h=>c.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ar=Object.freeze(Object.defineProperty({__proto__:null,default:Er},Symbol.toStringTag,{value:"Module"})),Br={class:"q-gutter-sm"},Mr={class:"col col-md-6 q-pa-xs"},al="Buka Sesi Kasir",Nr={__name:"Open",setup(p){const s=ge(),m=Qe({cashier_terminal_id:s.props.data.cashier_terminal_id,opening_balance:parseFloat(s.props.data.opening_balance),opening_notes:s.props.data.opening_notes}),o=[...s.props.cashier_terminals.map(n=>({value:n.id,label:n.name,balance:parseFloat(n.finance_account.balance)}))],i=()=>rt({form:m,url:route("admin.cashier-session.open")});return Ne(()=>m.cashier_terminal_id,n=>{if(n){const g=o.find(b=>b.value===n);g&&(m.opening_balance=g.balance)}else m.opening_balance=0}),(n,g)=>{const b=X("i-head"),c=X("authenticated-layout");return d(),w(J,null,[e(b,{title:al}),e(c,null,{title:a(()=>[v(r(al))]),"left-button":a(()=>[t("div",Br,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=u=>n.$inertia.get(n.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Mr,[e(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=u=>l(m).id=u)},null,512),[[yt,l(m).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[e(ce,{class:"custom-select",modelValue:l(m).cashier_terminal_id,"onUpdate:modelValue":g[2]||(g[2]=u=>l(m).cashier_terminal_id=u),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:l(m).errors.cashier_terminal_id,error:!!l(m).errors.cashier_terminal_id,disable:l(m).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Me,{modelValue:l(m).opening_balance,"onUpdate:modelValue":g[3]||(g[3]=u=>l(m).opening_balance=u),label:"Saldo Buka Sesi",lazyRules:"",disable:l(m).processing,error:!!l(m).errors.opening_balance,errorMessage:l(m).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),g[6]||(g[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(se,{modelValue:l(m).opening_notes,"onUpdate:modelValue":g[4]||(g[4]=u=>l(m).opening_notes=u),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(m).processing,error:!!l(m).errors.opening_notes,"error-message":l(m).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:l(m).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(m).processing,onClick:g[5]||(g[5]=u=>l(Z).get(n.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Fr=Object.freeze(Object.defineProperty({__proto__:null,default:Nr},Symbol.toStringTag,{value:"Module"})),zr={class:"detail"},Lr={colspan:"3"},Kr={class:"text-bold text-grey-8"},Hr={key:0},Wr={colspan:"100%"},Yr={key:1},Qr={colspan:"100%"},po={__name:"MainInfoTab",setup(p){const s=ge();return(m,o)=>(d(),w("table",zr,[t("tbody",null,[t("tr",null,[t("td",Lr,[t("div",Kr,[o[1]||(o[1]=v(" Info Terminal Kasir ")),e(E,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=i=>m.$inertia.get(m.route("admin.cashier-terminal.edit",{id:l(s).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(l(_t)(l(s).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),l(s).props.data.created_at?(d(),w("tr",Hr,[t("td",Wr," Dibuat "+r(l(Mt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",Yr,[t("td",Qr," Diperbarui "+r(l(Mt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},Jr=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"})),Gr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},fo={__name:"SessionHistoryTab",setup(p){const s=ge(),m=T([]),o=T(!0),i=De({cashier_terminal_id:s.props.data.id,...Le()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];he(()=>{b()});const b=(f=null)=>Ke({pagination:n,filter:i,props:f,rows:m,url:route("admin.cashier-session.data"),loading:o}),c=$e(),u=ee(()=>c.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,_)=>(d(),I(je,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:q})=>[t("div",Gr,[t("span",null,r(S)+" "+r(q?" with term "+q:""),1)])]),body:a(y=>[e(Re,{props:y,class:"cursor-pointer",onClick:G(S=>l(Z).get(f.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" Session ID: "+r(y.row.id),1)]),t("div",null,[e(C,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(y.row.cashier_terminal.name),1)]),t("div",null,[e(C,{class:"inline-icon",name:"person"}),v(" "+r(y.row.user.username)+" - "+r(y.row.user.name),1)])]),_:2},1032,["props"]),e(Y,{key:"opening_info",props:y},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(y.row.opened_at?l(ve)(y.row.opened_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(_t)(y.row.opening_balance)),1)]),y.row.opening_notes?(d(),I(Se,{key:0,text:y.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"closing_info",props:y},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(y.row.closed_at?l(ve)(y.row.closed_at):"-"),1)]),t("div",null,[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(_t)(y.row.closing_balance)),1)]),y.row.closing_notes?(d(),I(Se,{key:0,text:y.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Xr=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"})),Zr={class:"q-gutter-sm"},ei={class:"col col-lg-6 q-pa-xs"},ti={class:"row"},ll="Rincian Terminal Kasir",ai={__name:"Detail",setup(p){const s=T("main");return(m,o)=>{const i=X("i-head"),n=X("authenticated-layout");return d(),w(J,null,[e(i,{title:ll}),e(n,null,{title:a(()=>[v(r(ll))]),"left-button":a(()=>[t("div",Zr,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=g=>m.$inertia.get(m.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",ei,[t("div",ti,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(qt,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=g=>s.value=g),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Info Utama"}),e(it,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(Ct,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=g=>s.value=g),animated:""},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(po)]),_:1}),e(nt,{name:"session-history",class:"q-pa-xs"},{default:a(()=>[e(fo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},li=Object.freeze(Object.defineProperty({__proto__:null,default:ai},Symbol.toStringTag,{value:"Module"})),oi={class:"q-gutter-sm"},ni={class:"col col-md-6 q-pa-xs"},si={key:0,class:"q-my-xs text-grey-8"},ri={__name:"Editor",setup(p){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Terminal",o=Qe({id:s.props.data.id,name:s.props.data.name,finance_account_id:s.props.data.finance_account_id??"new",location:s.props.data.location,active:!!s.props.data.active,notes:s.props.data.notes}),i=[{value:"new",label:"Buat Baru (Otomatis)"},...s.props.finance_accounts.map(g=>({value:g.id,label:g.name}))],n=()=>rt({form:o,url:route("admin.cashier-terminal.save")});return(g,b)=>{const c=X("i-head"),u=X("authenticated-layout");return d(),w(J,null,[e(c,{title:m}),e(u,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",oi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$inertia.get(g.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",ni,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>l(o).id=f)},null,512),[[yt,l(o).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[e(se,{modelValue:l(o).name,"onUpdate:modelValue":b[2]||(b[2]=f=>l(o).name=f),modelModifiers:{trim:!0},label:"Nama",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{class:"custom-select",modelValue:l(o).finance_account_id,"onUpdate:modelValue":b[3]||(b[3]=f=>l(o).finance_account_id=f),label:"Akun Kas",options:i,"map-options":"","emit-value":"",errorMessage:l(o).errors.finance_account_id,error:!!l(o).errors.finance_account_id,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),l(o).finance_account_id==="new"?(d(),w("div",si,[b[8]||(b[8]=v(" Akun keuangan akan dibuat ")),l(o).name?(d(),w(J,{key:0},[v(" dengan nama Kas "+r(l(o).name),1)],64)):k("",!0)])):k("",!0),e(se,{modelValue:l(o).location,"onUpdate:modelValue":b[4]||(b[4]=f=>l(o).location=f),modelModifiers:{trim:!0},label:"Lokasi",error:!!l(o).errors.location,disable:l(o).processing,"error-message":l(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:l(o).notes,"onUpdate:modelValue":b[5]||(b[5]=f=>l(o).notes=f),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ya,{modelValue:l(o).active,"onUpdate:modelValue":b[6]||(b[6]=f=>l(o).active=f),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{label:"Batal",icon:"cancel",disable:l(o).processing,onClick:b[7]||(b[7]=f=>l(Z).get(g.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ii=Object.freeze(Object.defineProperty({__proto__:null,default:ri},Symbol.toStringTag,{value:"Module"})),di={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ui={class:"q-pa-xs"},mi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ci={class:"flex justify-end"},ol="Terminal Kasir",pi={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=De({search:"",status:"active",...Le()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:s.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{S()});const y=U=>st({message:`Hapus Terminal Kasir ${U.name}?`,url:route("admin.cashier-terminal.delete",U.id),fetchItemsCallback:S,loading:i}),S=(U=null)=>{Ke({pagination:u,filter:c,props:U,rows:o,url:route("admin.cashier-terminal.data"),loading:i,tableRef:n})},q=()=>S(),x=U=>Z.get(route("admin.cashier-terminal.detail",{id:U.id})),{protectClick:D}=At(),K=D(x),R=ee(()=>s.screen.gt.sm?f:f.filter(U=>U.name==="name"||U.name==="finance_account_id"||U.name==="action"));return(U,O)=>{const F=X("i-head"),B=X("authenticated-layout");return d(),w(J,null,[e(F,{title:ol}),e(B,null,Fe({title:a(()=>[v(r(ol))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=h=>m.value=!m.value)},null,8,["icon"]),U.$can("admin.cashier-terminal.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=h=>l(Z).get(U.route("admin.cashier-terminal.add")))})):k("",!0)]),default:a(()=>[t("div",ui,[e(je,{class:"full-height-table",style:He({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":O[5]||(O[5]=h=>u.value=h),filter:c.search,loading:i.value,columns:R.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:P})=>[t("div",mi,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Re,{props:h,class:xe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(j=>l(K)(h.row,j),["stop"])},{default:a(()=>[e(Y,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{name:"wallet"}),v(" "+r(h.row.name),1)]),t("div",null,[e(C,{name:"home_pin"}),v(" "+r(h.row.location),1)]),l(s).screen.lt.md?(d(),I(Se,{key:0,text:h.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:h},{default:a(()=>[t("div",null,[e(C,{name:"wallet"}),v(" "+r(h.row.finance_account.name),1)]),t("div",null,[e(C,{name:"money"}),v(" "+r(l(_t)(h.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(Y,{key:"notes",props:h},{default:a(()=>[e(Se,{text:h.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:h},{default:a(()=>[t("div",ci,[U.$can("admin.cashier-terminal.edit")||U.$can("admin.cashier-terminal.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[4]||(O[4]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[U.$can("admin.cashier-terminal.edit")?te((d(),I(oe,{key:0,clickable:"",onClick:G(j=>l(Z).get(U.route("admin.cashier-terminal.edit",h.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>O[6]||(O[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),U.$can("admin.cashier-terminal.delete")?te((d(),I(oe,{key:1,onClick:G(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>O[7]||(O[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",di,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[O[2]||(O[2]=h=>c.status=h),q],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":O[3]||(O[3]=h=>c.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fi=Object.freeze(Object.defineProperty({__proto__:null,default:pi},Symbol.toStringTag,{value:"Module"})),gi={class:"q-gutter-sm"},bi={class:"col col-md-6 q-pa-xs"},vi={class:"row"},_i={class:"detail"},yi={key:0},ki={key:1},wi={key:0},hi={key:1},$i={colspan:"3",class:"bg-white"},nl="Rincian Konfirmasi Top Up",xi={__name:"Detail",setup(p){const s=ge(),m=()=>ba({message:`Setujui konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"accept"},onSuccess:()=>{Z.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}}),o=()=>ba({message:`Tolak konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"reject"},onSuccess:()=>{Z.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}});return(i,n)=>{const g=X("i-head"),b=X("i-link"),c=X("my-link"),u=X("authenticated-layout");return d(),w(J,null,[e(g,{title:nl}),e(u,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",gi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>i.$inertia.get(i.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":a(()=>[l(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:reject")?(d(),I(E,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:n[1]||(n[1]=f=>o()),class:"q-mr-sm"})):k("",!0),l(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:accept")?(d(),I(E,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:n[2]||(n[2]=f=>m())})):k("",!0)]),title:a(()=>[t("span",{class:"text-subtitle2"},r(nl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",bi,[t("div",vi,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>[n[24]||(n[24]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",_i,[t("tbody",null,[t("tr",null,[n[3]||(n[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),n[4]||(n[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Waktu",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Pelanggan",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),e(b,{href:i.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[v(r(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(d(),w("div",yi,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(d(),w("div",ki,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[n[11]||(n[11]=t("td",null,"Akun Tujuan",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[e(c,{href:i.route("admin.finance-account.detail",{id:l(s).props.data.finance_account.id})},{default:a(()=>[v(r(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),n[10]||(n[10]=t("br",null,null,-1)),l(s).props.data.finance_account.type==="bank"?(d(),w(J,{key:0},[v(" Rek "+r(l(s).props.data.finance_account.bank)+" an "+r(l(s).props.data.finance_account.holder)+" ",1),n[9]||(n[9]=t("br",null,null,-1)),v(" "+r(l(s).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[n[13]||(n[13]=t("td",null,"Jumlah",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(H)(l(s).props.data.amount)),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"Status",-1)),n[16]||(n[16]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[n[17]||(n[17]=t("td",null,"Catatan",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",wi,[n[19]||(n[19]=t("td",null,"Dibuat",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",hi,[n[21]||(n[21]=t("td",null,"Diperbarui",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(J,{key:2},[n[23]||(n[23]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",$i,[e(da,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Si=Object.freeze(Object.defineProperty({__proto__:null,default:xi},Symbol.toStringTag,{value:"Module"})),Vi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},qi={class:"q-pa-xs"},Ci={key:0},Ti={class:"flex justify-end no-wrap"},sl="Konfirmasi Top Up Wallet",Pi={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=T(null),u=T(!1),f=zt(),_=Lt(),y=[{label:"Semua Tahun",value:"all"},...Ot(f-2,f).reverse()],S=[{value:"all",label:"Semua Bulan"},...Dt()],q=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],x=De({search:"",year:f,month:_,status:"all",...Le()}),D=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),K=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",field:"action",align:"center"}];he(()=>{R()});const R=(P=null)=>{Ke({pagination:D,filter:x,props:P,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:i,tableRef:n})},U=()=>{R()},O=ee(()=>s.screen.gt.sm?K:K.filter(P=>["code","action"].includes(P.name)));Ne(()=>x.year,P=>{P===null&&(x.month=null)});const F=P=>ba({message:`Setujui konfirmasi transaksi #${P.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:R,loading:i,data:{id:P.id,action:"accept"}}),B=P=>ba({message:`Tolak konfirmasi transaksi #${P.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:R,loading:i,data:{id:P.id,action:"reject"}}),h=P=>st({message:`Hapus konfirmasi transaksi ${P.code}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",P.id),fetchItemsCallback:R,loading:i}),j=P=>{c.value=P,u.value=!0};return(P,$)=>{const A=X("i-head"),z=X("authenticated-layout");return d(),w(J,null,[e(A,{title:sl}),e(z,null,Fe({title:a(()=>[v(r(sl))]),"right-button":a(()=>[e(E,{class:"q-ml-sm",icon:m.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:$[0]||($[0]=V=>m.value=!m.value)},null,8,["icon"])]),default:a(()=>[t("div",qi,[e(je,{ref_key:"tableRef",ref:n,class:"full-height-table",style:He({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":$[6]||($[6]=V=>D.value=V),filter:x.search,loading:i.value,columns:O.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:R,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),body:a(V=>[e(Re,{props:V,class:"cursor-pointer",onClick:G(M=>l(Z).get(P.route("admin.customer-wallet-transaction-confirmation.detail",{id:V.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"code",props:V,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(V.row.code),1)]),l(s).screen.gt.sm?k("",!0):(d(),w("div",Ci,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(V.row.datetime)),1)])),l(s).screen.gt.sm?k("",!0):(d(),w(J,{key:1},[e(Se,{icon:"account_balance",text:V.row.finance_account.name},null,8,["text"]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(V.row.customer.code)+" - "+r(V.row.customer.name),1)]),t("div",null,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(H)(V.row.amount)),1)]),V.row.notes?(d(),I(Se,{key:0,icon:"notes",text:V.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Ya,{status:V.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(Y,{key:"datetime",props:V,class:"wrap-column"},{default:a(()=>[v(r(l(ve)(V.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"customer_id",props:V},{default:a(()=>[e(Se,{text:V.row.customer.code+" - "+V.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:V},{default:a(()=>[v(r(V.row.finance_account.name),1),$[8]||($[8]=t("br",null,null,-1)),v(" "+r(V.row.finance_account.bank)+" "+r(V.row.finance_account.number)+" an. "+r(V.row.finance_account.holder),1)]),_:2},1032,["props"]),e(Y,{key:"amount",props:V,style:{"text-align":"right"}},{default:a(()=>[v(r(l(H)(V.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"status",props:V,class:"text-center"},{default:a(()=>[e(Ya,{status:V.row.status},null,8,["status"])]),_:2},1032,["props"]),e(Y,{key:"notes",props:V,class:"word-wrap"},{default:a(()=>[e(Se,{icon:"notes",text:V.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:V,class:"text-center"},{default:a(()=>[t("div",Ti,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:V.row.image_path===null||V.row.image_path==="",onClick:G(M=>j(V.row.image_path),["stop"])},{default:a(()=>[V.row.image_path!=null?(d(),I(Kt,{key:0},{default:a(()=>$[9]||($[9]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.customer-wallet-transaction-confirmation:accept")||P.$can("admin.customer-wallet-transaction-confirmation:deny")||P.$can("admin.customer-wallet-transaction-confirmation.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[P.$can("admin.customer-wallet-transaction-confirmation:accept")?te((d(),I(oe,{key:0,onClick:G(M=>F(V.row),["stop"]),clickable:"",disable:V.row.status!=="pending"},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"check"})]),_:1}),e(N,null,{default:a(()=>$[10]||($[10]=[v("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[ne],[fe]]):k("",!0),P.$can("admin.customer-wallet-transaction-confirmation:deny")?te((d(),I(oe,{key:1,onClick:G(M=>B(V.row),["stop"]),clickable:"",disable:V.row.status!=="pending"},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(N,null,{default:a(()=>$[11]||($[11]=[v("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[ne],[fe]]):k("",!0),e(Pe),P.$can("admin.customer-wallet-transaction-confirmation.delete")?te((d(),I(oe,{key:2,onClick:G(M=>h(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>$[12]||($[12]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(va,{modelValue:u.value,"onUpdate:modelValue":$[7]||($[7]=V=>u.value=V),imageUrl:`/${c.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",Vi,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[$[1]||($[1]=V=>x.year=V),U],options:y,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!=="all"?(d(),I(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[$[2]||($[2]=V=>x.month=V),U],options:S,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.status,"onUpdate:modelValue":[$[3]||($[3]=V=>x.status=V),U],options:q,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":$[4]||($[4]=V=>x.search=V),placeholder:"Cari...",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ri=Object.freeze(Object.defineProperty({__proto__:null,default:Pi},Symbol.toStringTag,{value:"Module"}));function go(p,s=!1){const m=p.map(g=>({value:g.id,label:g.name+" ("+g.code+")"})),o=s?[{value:"all",label:"Semua"},...m]:m,i=T([...o]);return{filteredCustomers:i,filterCustomersFn:(g,b)=>{b(()=>{i.value=o.filter(c=>c.label.toLowerCase().includes(g.toLowerCase()))})},customers:o}}const Ii={class:"col col-md-6 q-pa-xs"},rl="Penyesuaian Saldo Dompet Pelanggan",Oi={__name:"Adjustment",setup(p){const s=ge(),{filteredCustomers:m,filterCustomersFn:o}=go(s.props.customers,!1),i=Qe({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),n=()=>i.amount=i.new_wallet_balance-i.old_wallet_balance;Ne(()=>i.customer_id,async c=>{if(!c){i.old_wallet_balance=0,i.new_wallet_balance=0,n();return}i.processing=!0;try{const u=await axios.get(route("admin.customer.wallet_balance",{id:c}));i.new_wallet_balance=i.old_wallet_balance=u.data.wallet_balance}catch(u){console.error("Gagal mengambil saldo:",u),i.old_wallet_balance=0,i.new_wallet_balance=0}i.processing=!1,n()});const g=ee(()=>i.new_wallet_balance-i.old_wallet_balance),b=()=>rt({form:i,url:route("admin.customer-wallet-transaction.adjustment")});return(c,u)=>{const f=X("i-head"),_=X("authenticated-layout");return d(),w(J,null,[e(f,{title:rl}),e(_,null,{title:a(()=>[v(r(rl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ii,[e(Je,{class:"row",onSubmit:G(b,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[e(ce,{class:"custom-select",modelValue:l(i).customer_id,"onUpdate:modelValue":u[0]||(u[0]=y=>l(i).customer_id=y),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(m),"map-options":"","emit-value":"",errorMessage:l(i).errors.customer_id,onFilter:l(o),error:!!l(i).errors.customer_id,disable:l(i).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(N,null,{default:a(()=>u[6]||(u[6]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Me,{modelValue:l(i).old_wallet_balance,"onUpdate:modelValue":u[1]||(u[1]=y=>l(i).old_wallet_balance=y),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:l(i).processing,error:!!l(i).errors.old_wallet_balance,errorMessage:l(i).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Me,{modelValue:l(i).new_wallet_balance,"onUpdate:modelValue":u[2]||(u[2]=y=>l(i).new_wallet_balance=y),label:"Saldo Seharusnya",lazyRules:"",disable:l(i).processing,error:!!l(i).errors.new_wallet_balance,errorMessage:l(i).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Me,{modelValue:g.value,"onUpdate:modelValue":u[3]||(u[3]=y=>g.value=y),label:"Selisih",readonly:"",lazyRules:"",disable:l(i).processing},null,8,["modelValue","disable"]),e(se,{modelValue:l(i).notes,"onUpdate:modelValue":u[4]||(u[4]=y=>l(i).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.notes,"error-message":l(i).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:u[5]||(u[5]=y=>l(Z).get(c.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Di=Object.freeze(Object.defineProperty({__proto__:null,default:Oi},Symbol.toStringTag,{value:"Module"})),Ui={class:"q-gutter-sm"},ji={class:"col col-md-6 q-pa-xs"},Ei={class:"row"},Ai={class:"detail"},Bi={key:0},Mi={key:1},Ni={key:0},Fi={key:1},zi={colspan:"3",class:"bg-white"},il="Rincian Transaksi",Li={__name:"Detail",setup(p){const s=ge();return(m,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return d(),w(J,null,[e(i,{title:il}),e(g,null,{"left-button":a(()=>[t("div",Ui,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.$goBack())})])]),title:a(()=>[v(r(il))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",ji,[t("div",Ei,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>[o[18]||(o[18]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),t("table",Ai,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Pelanggan",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),e(n,{href:m.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[v(""+r(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(d(),w("div",Bi,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(d(),w("div",Mi,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[l(s).props.data.type]),1)]),t("tr",null,[o[9]||(o[9]=t("td",null,"Jumlah",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",{class:xe(l(s).props.data.amount>0?"text-positive":"text-negative")},r(l(na)(l(s).props.data.amount))+"Rp. "+r(l(H)(Math.abs(l(s).props.data.amount))),3)]),t("tr",null,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",Ni,[o[13]||(o[13]=t("td",null,"Dibuat",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",Fi,[o[15]||(o[15]=t("td",null,"Diperbarui",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(J,{key:2},[o[17]||(o[17]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",zi,[e(da,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Ki=Object.freeze(Object.defineProperty({__proto__:null,default:Li},Symbol.toStringTag,{value:"Module"})),Hi={class:"q-gutter-sm"},Wi={class:"col col-md-6 q-pa-xs"},Yi={__name:"Editor",setup(p){var u;const s=ge(),m=(s.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:i}=go(s.props.customers,!1),n=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],g=s.props.finance_accounts.map(f=>({label:f.name,value:f.id})),b=Qe({id:s.props.data.id,customer_id:s.props.data.customer_id,finance_account_id:s.props.data.finance_account_id,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((u=s.props.data)==null?void 0:u.image_path)??"",image:null}),c=()=>{ua(b,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:b,url:route("admin.customer-wallet-transaction.save")})};return(f,_)=>{const y=X("i-head"),S=X("authenticated-layout");return d(),w(J,null,[e(y,{title:m}),e(S,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",Hi,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=q=>f.$inertia.get(f.route("admin.customer-wallet-transaction.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Wi,[e(Je,{class:"row",onSubmit:G(c,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=q=>l(b).id=q)},null,512),[[yt,l(b).id]]),e(Ht,{autofocus:"",modelValue:l(b).datetime,"onUpdate:modelValue":_[2]||(_[2]=q=>l(b).datetime=q),label:"Tanggal",error:!!l(b).errors.datetime,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ce,{class:"custom-select",modelValue:l(b).customer_id,"onUpdate:modelValue":_[3]||(_[3]=q=>l(b).customer_id=q),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(o),"map-options":"","emit-value":"",errorMessage:l(b).errors.customer_id,onFilter:l(i),error:!!l(b).errors.customer_id,disable:l(b).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(N,null,{default:a(()=>_[10]||(_[10]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(ce,{modelValue:l(b).type,"onUpdate:modelValue":_[4]||(_[4]=q=>l(b).type=q),label:"Jenis",options:n,"map-options":"","emit-value":"",error:!!l(b).errors.type,disable:l(b).processing,errorMessage:l(b).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{modelValue:l(b).finance_account_id,"onUpdate:modelValue":_[5]||(_[5]=q=>l(b).finance_account_id=q),label:l(b).type=="deposit"?"Kas Tujuan":"Kas Asal",options:l(g),"map-options":"","emit-value":"",error:!!l(b).errors.finance_account_id,disable:l(b).processing,errorMessage:l(b).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Me,{modelValue:l(b).amount,"onUpdate:modelValue":_[6]||(_[6]=q=>l(b).amount=q),label:"Jumlah",lazyRules:"",disable:l(b).processing,error:!!l(b).errors.amount,errorMessage:l(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(se,{modelValue:l(b).notes,"onUpdate:modelValue":_[7]||(_[7]=q=>l(b).notes=q),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(b).processing,error:!!l(b).errors.notes,"error-message":l(b).errors.notes,rules:[q=>q&&q.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Ea,{modelValue:l(b).image,"onUpdate:modelValue":_[8]||(_[8]=q=>l(b).image=q),"initial-image-path":l(b).image_path,disabled:l(b).processing,error:!!l(b).errors.image||!!l(b).errors.image_path,"error-message":l(b).errors.image||l(b).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(b).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(b).processing,onClick:_[9]||(_[9]=q=>l(Z).get(f.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Qi=Object.freeze(Object.defineProperty({__proto__:null,default:Yi},Symbol.toStringTag,{value:"Module"})),Ji={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Gi={class:"q-pa-xs"},Xi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Zi={key:0},ed={key:0},td={class:"flex justify-end no-wrap"},dl="Transaksi Dompet Pelanggan",ad={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=new Date().getFullYear(),u=new Date().getMonth()+1,f=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...Ot(c-2,c-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Dt()],y=De({search:"",year:c,month:u,...Le()}),S=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),q=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{D()});const x=B=>st({message:`Hapus transaksi #${B.code}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",B.id),fetchItemsCallback:D,loading:i}),D=(B=null)=>{Ke({pagination:S,filter:y,props:B,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:i,tableRef:n})},K=()=>{D()},R=ee(()=>s.screen.gt.sm?q:q.filter(B=>B.name==="code"||B.name==="action"));Ne(()=>y.year,B=>{B===null&&(y.month=null)});const U=T(null),O=T(!1),F=B=>{U.value=B,O.value=!0};return(B,h)=>{const j=X("i-head"),P=X("authenticated-layout");return d(),w(J,null,[e(j,{title:dl}),e(P,null,Fe({title:a(()=>[v(r(dl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=$=>m.value=!m.value)},null,8,["icon"]),B.$can("admin.customer-wallet-transaction.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=$=>l(Z).get(B.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",Gi,[e(je,{ref_key:"tableRef",ref:n,style:He({height:l(b)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:S.value,"onUpdate:pagination":h[6]||(h[6]=$=>S.value=$),filter:y.search,loading:i.value,columns:R.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:D,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:A,filter:z})=>[t("div",Xi,[t("span",null,r(A)+" "+r(z?" with term "+z:""),1)])]),body:a($=>[e(Re,{props:$,class:"cursor-pointer",onClick:G(A=>l(Z).get(B.route("admin.customer-wallet-transaction.detail",{id:$.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"code",props:$,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.gt.sm?k("",!0):(d(),I(C,{key:0,name:"tag",class:"inline-icon"})),v(" "+r($.row.code),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)($.row.datetime)),1)]),$.row.finance_account?(d(),w("div",Zi,[e(C,{name:"wallet",class:"inline-icon"}),v(" "+r($.row.finance_account?$.row.finance_account.name:"-"),1)])):k("",!0),e(Se,{icon:"person",text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"]),t("div",{class:xe([$.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(C,{name:"money",class:"inline-icon"}),v(" "+r(l(na)($.row.amount))+"Rp. "+r(l(H)(Math.abs($.row.amount))),1)],2),e(Se,{text:$.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(gt,null,{default:a(()=>[v(r($.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(Y,{key:"datetime",props:$},{default:a(()=>[v(r(l(ve)($.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"customer_id",props:$},{default:a(()=>[e(Se,{text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:$},{default:a(()=>[$.row.finance_account?(d(),w("div",ed,r($.row.finance_account?$.row.finance_account.name:"-"),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"amount",props:$,style:{"text-align":"right"}},{default:a(()=>[v(r(l($t)($.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:$},{default:a(()=>[e(Se,{text:$.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:$},{default:a(()=>[t("div",td,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:$.row.image_path===null||$.row.image_path==="",onClick:G(A=>F($.row.image_path),["stop"])},{default:a(()=>[$.row.image_path!=null?(d(),I(Kt,{key:0},{default:a(()=>h[8]||(h[8]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),B.$can("admin.customer-wallet-transaction.delete")?(d(),I(E,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:h[5]||(h[5]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[B.$can("admin.customer-wallet-transaction.delete")?te((d(),I(oe,{key:0,onClick:G(A=>x($.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>h[9]||(h[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(va,{modelValue:O.value,"onUpdate:modelValue":h[7]||(h[7]=$=>O.value=$),imageUrl:`/${U.value}`},null,8,["modelValue","imageUrl"])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",Ji,[e(ce,{modelValue:y.year,"onUpdate:modelValue":[h[2]||(h[2]=$=>y.year=$),K],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:y.month,"onUpdate:modelValue":[h[3]||(h[3]=$=>y.month=$),K],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:y.year===null},null,8,["modelValue","disable"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":h[4]||(h[4]=$=>y.search=$),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ld=Object.freeze(Object.defineProperty({__proto__:null,default:ad},Symbol.toStringTag,{value:"Module"})),od={class:"detail"},nd={key:0},sd={key:1},rd={class:"text-grey-8"},id={key:2},dd={class:"text-grey-8"},ud={key:0,class:"q-pt-md"},bo={__name:"MainInfoTab",setup(p){const s=ge(),m=()=>{st({message:`Hapus Pelanggan ${s.props.data.code}?`,url:route("admin.customer.delete",s.props.data.id),onSuccess:()=>{Z.get(route("admin.customer.index"))}})};return(o,i)=>(d(),w(J,null,[t("table",od,[t("tbody",null,[i[28]||(i[28]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pelanggan")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Jenis",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.type_label),1)]),t("tr",null,[i[5]||(i[5]=t("td",null,"Nama",-1)),i[6]||(i[6]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[i[7]||(i[7]=t("td",null,"Default Harga",-1)),i[8]||(i[8]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.default_price_type_label),1)]),t("tr",null,[i[9]||(i[9]=t("td",null,"No. Telepon",-1)),i[10]||(i[10]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.phone?l(s).props.data.phone:"-"),1)]),t("tr",null,[i[11]||(i[11]=t("td",null,"Alamat",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.address?l(s).props.data.address:"-"),1)]),t("tr",null,[i[13]||(i[13]=t("td",null,"Saldo Wallet",-1)),i[14]||(i[14]=t("td",null,":",-1)),t("td",null," Rp. "+r(l($t)(l(s).props.data.wallet_balance)),1)]),t("tr",null,[i[15]||(i[15]=t("td",null,"Saldo Utang / Piutang",-1)),i[16]||(i[16]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l($t)(l(s).props.data.balance)),1)]),t("tr",null,[i[17]||(i[17]=t("td",null,"Status",-1)),i[18]||(i[18]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),i[29]||(i[29]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),l(s).props.data.created_at?(d(),w("tr",nd,[i[19]||(i[19]=t("td",null,"Dibuat",-1)),i[20]||(i[20]=t("td",null,":",-1)),t("td",null,r(l(Mt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),w("tr",sd,[i[21]||(i[21]=t("td",null,"Diperbarui",-1)),i[22]||(i[22]=t("td",null,":",-1)),t("td",null,r(l(Mt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[i[23]||(i[23]=t("td",null,"Terakhir login",-1)),i[24]||(i[24]=t("td",null,":",-1)),t("td",null,[v(r(l(s).props.data.last_login_datetime?l(ve)(l(s).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",rd,"("+r(l(Mt)(l(s).props.data.last_login_datetime))+")",1)])]),l(s).props.data.last_activity_datetime?(d(),w("tr",id,[i[26]||(i[26]=t("td",null,"Aktifitas Terakhir",-1)),i[27]||(i[27]=t("td",null,":",-1)),t("td",null,[v(r(l(ve)(l(s).props.data.last_activity_datetime))+" ",1),t("span",dd,[v("("+r(l(Mt)(l(s).props.data.last_activity_datetime))+")",1),i[25]||(i[25]=t("br",null,null,-1)),v(r(l(s).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(d(),w("div",ud,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>m())})])):k("",!0)],64))}},md=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),cd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},pd={class:"text-bold"},vo={__name:"WalletHistoryTab",setup(p){const s=ge(),m=T([]),o=T(!0),i=De({customer_id:s.props.data.id,...Le()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{b()});const b=(f=null)=>Ke({pagination:n,filter:i,props:f,rows:m,url:route("admin.customer-wallet-transaction.data"),loading:o}),c=$e(),u=ee(()=>c.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,_)=>(d(),I(je,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:q})=>[t("div",cd,[t("span",null,r(S)+" "+r(q?" with term "+q:""),1)])]),body:a(y=>[e(Re,{props:y,class:"cursor-pointer",onClick:G(S=>l(Z).get(f.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",pd,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),w(J,{key:0},[t("div",{class:xe(["text-bold",y.row.amount<0?"text-red":"text-green"])},[e(C,{name:"money",class:"inline-icon"}),v(" "+r(l(sa)(y.row.amount)),1)],2),t("div",null,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(gt,{size:"xs",color:y.row.amount>0?"green":"red"},{default:a(()=>[e(C,{name:"category"}),v(" "+r(y.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:y},{default:a(()=>[t("div",{class:xe(y.row.amount<0?"text-red-10":y.row.amount>0?"text-green-10":"")},r(l($t)(y.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},fd=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),gd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},bd={class:"text-bold"},vd={key:0},_d={key:1},_o={__name:"OrderHistoryTab",setup(p){const s=ge(),m=T([]),o=T(!0),i=De({customer_id:s.props.data.id,...Le()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(f=null)=>Ke({pagination:n,filter:i,props:f,rows:m,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:s.props.data.id}}),loading:o}),c=$e(),u=ee(()=>c.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,_)=>(d(),I(je,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:q})=>[t("div",gd,[t("span",null,r(S)+" "+r(q?" with term "+q:""),1)])]),body:a(y=>[e(Re,{props:y,class:"cursor-pointer",onClick:G(S=>l(Z).get(f.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",bd,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),w(J,{key:0},[t("div",null,[e(C,{name:"money",class:"inline-icon"}),v(" Total: Rp. "+r(l(H)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(d(),w("div",vd,[e(C,{name:"money",class:"inline-icon"}),v(" Sisa Utang Rp. "+r(l(H)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(d(),w("div",_d,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(gt,{color:y.row.status=="closed"?"green":"red"},{default:a(()=>[v(r(y.row.status_label),1)]),_:2},1032,["color"]),e(gt,{class:"q-ml-xs",color:y.row.payment_status=="fully_paid"?"green":"red"},{default:a(()=>[v(r(y.row.payment_status_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:y},{default:a(()=>[v(r(l(H)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"remaining_debt",props:y},{default:a(()=>[v(r(l(H)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},yd=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),kd={class:"q-gutter-sm"},wd={class:"q-gutter-sm"},hd={class:"col col-lg-6 q-pa-xs"},$d={class:"row"},ul="Rincian Pelanggan",xd={__name:"Detail",setup(p){const s=ge(),m=T("main");return $e(),(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(J,null,[e(n,{title:ul}),e(g,null,{title:a(()=>[v(r(ul))]),"left-button":a(()=>[t("div",kd,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":a(()=>[t("div",wd,[o.$can("admin.customer.edit")?(d(),I(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>l(Z).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),I(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>l(Z).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),I(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>l(Z).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",hd,[t("div",$d,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(qt,{modelValue:m.value,"onUpdate:modelValue":i[4]||(i[4]=b=>m.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Info Utama"}),e(it,{name:"history",label:"Riwayat Wallet"}),e(it,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Ct,{modelValue:m.value,"onUpdate:modelValue":i[5]||(i[5]=b=>m.value=b),animated:""},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(bo)]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(vo)]),_:1}),e(nt,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(_o)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Sd=Object.freeze(Object.defineProperty({__proto__:null,default:xd},Symbol.toStringTag,{value:"Module"})),Vd={class:"q-gutter-sm"},qd={class:"col col-md-6 q-pa-xs"},Cd={__name:"Editor",setup(p){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,default_price_type:s.props.data.default_price_type,phone:s.props.data.phone,address:s.props.data.address,active:!!s.props.data.active,password:s.props.data.id?null:"12345",type:s.props.data.type}),i=T(!s.props.data.id),n=ot(window.CONSTANTS.CUSTOMER_TYPES),g=ot(window.CONSTANTS.PRODUCT_PRICE_TYPES),b=()=>rt({form:o,url:route("admin.customer.save",{id:o.id})});return(c,u)=>{const f=X("i-head"),_=X("authenticated-layout");return d(),w(J,null,[e(f,{title:m}),e(_,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",Vd,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>c.$goBack())})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:u[1]||(u[1]=y=>b()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",qd,[e(Je,{class:"row",onSubmit:G(b,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":u[2]||(u[2]=y=>l(o).id=y)},null,512),[[yt,l(o).id]]),e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[e(se,{modelValue:l(o).code,"onUpdate:modelValue":u[3]||(u[3]=y=>l(o).code=y),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[y=>y&&y.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(o).name,"onUpdate:modelValue":u[4]||(u[4]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:l(o).default_price_type,"onUpdate:modelValue":u[5]||(u[5]=y=>l(o).default_price_type=y),options:l(g),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!l(o).errors.default_price_type,"error-message":l(o).errors.default_price_type,disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":u[6]||(u[6]=y=>l(o).type=y),label:"Jenis Akun",options:l(n),"map-options":"","emit-value":"","lazy-rules":"",disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(o).errors.type,"error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(se,{modelValue:l(o).phone,"onUpdate:modelValue":u[7]||(u[7]=y=>l(o).phone=y),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:l(o).processing,error:!!l(o).errors.phone,"error-message":l(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).address,"onUpdate:modelValue":u[8]||(u[8]=y=>l(o).address=y),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{autocomplete:"off","aria-autocomplete":"none",modelValue:l(o).password,"onUpdate:modelValue":u[10]||(u[10]=y=>l(o).password=y),label:l(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:l(o).processing,error:!!l(o).errors.password,"error-message":l(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:i.value?"text":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:u[9]||(u[9]=y=>i.value=!i.value)},{default:a(()=>[e(C,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(ya,{modelValue:l(o).active,"onUpdate:modelValue":u[11]||(u[11]=y=>l(o).active=y),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),u[12]||(u[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Td=Object.freeze(Object.defineProperty({__proto__:null,default:Cd},Symbol.toStringTag,{value:"Module"}));function Xt(p,s,m,o){const i=[];return p.forEach(n=>{o(n)===!0?i.push(n):s.push({failedPropValidation:m,file:n})}),i}function ga(p){p&&p.dataTransfer&&(p.dataTransfer.dropEffect="copy"),Yt(p)}const Pd={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Rd=["rejected"];function Id({editable:p,dnd:s,getFileInput:m,addFilesToQueue:o}){const{props:i,emit:n,proxy:g}=It(),b=T(null),c=ee(()=>i.accept!==void 0?i.accept.split(",").map(R=>(R=R.trim(),R==="*"?"*/":(R.endsWith("/*")&&(R=R.slice(0,R.length-1)),R.toUpperCase()))):null),u=ee(()=>parseInt(i.maxFiles,10)),f=ee(()=>parseInt(i.maxTotalSize,10));function _(R){if(p.value)if(R!==Object(R)&&(R={target:null}),R.target!==null&&R.target.matches('input[type="file"]')===!0)R.clientX===0&&R.clientY===0&&En(R);else{const U=m();U&&U!==R.target&&U.click(R)}}function y(R){p.value&&R&&o(null,R)}function S(R,U,O,F){let B=Array.from(U||R.target.files);const h=[],j=()=>{h.length!==0&&n("rejected",h)};if(i.accept!==void 0&&c.value.indexOf("*/")===-1&&(B=Xt(B,h,"accept",P=>c.value.some($=>P.type.toUpperCase().startsWith($)||P.name.toUpperCase().endsWith($))),B.length===0))return j();if(i.maxFileSize!==void 0){const P=parseInt(i.maxFileSize,10);if(B=Xt(B,h,"max-file-size",$=>$.size<=P),B.length===0)return j()}if(i.multiple!==!0&&B.length!==0&&(B=[B[0]]),B.forEach(P=>{P.__key=P.webkitRelativePath+P.lastModified+P.name+P.size}),F===!0){const P=O.map($=>$.__key);B=Xt(B,h,"duplicate",$=>P.includes($.__key)===!1)}if(B.length===0)return j();if(i.maxTotalSize!==void 0){let P=F===!0?O.reduce(($,A)=>$+A.size,0):0;if(B=Xt(B,h,"max-total-size",$=>(P+=$.size,P<=f.value)),B.length===0)return j()}if(typeof i.filter=="function"){const P=i.filter(B);B=Xt(B,h,"filter",$=>P.includes($))}if(i.maxFiles!==void 0){let P=F===!0?O.length:0;if(B=Xt(B,h,"max-files",()=>(P++,P<=u.value)),B.length===0)return j()}if(j(),B.length!==0)return B}function q(R){ga(R),s.value!==!0&&(s.value=!0)}function x(R){Yt(R),(R.relatedTarget!==null||Zt.is.safari!==!0?R.relatedTarget!==b.value:document.elementsFromPoint(R.clientX,R.clientY).includes(b.value)===!1)===!0&&(s.value=!1)}function D(R){ga(R);const U=R.dataTransfer.files;U.length!==0&&o(null,U),s.value=!1}function K(R){if(s.value===!0)return Ce("div",{ref:b,class:`q-${R}__dnd absolute-full`,onDragenter:ga,onDragover:ga,onDragleave:x,onDrop:D})}return Object.assign(g,{pickFiles:_,addFiles:y}),{pickFiles:_,addFiles:y,onDragover:q,onDragleave:x,processFiles:S,getDndNode:K,maxFilesNumber:u,maxTotalSizeNumber:f}}const yo=Et({name:"QFile",inheritAttrs:!1,props:{...Bn,...lo,...Pd,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...An,...Rd],setup(p,{slots:s,emit:m,attrs:o}){const{proxy:i}=It(),n=Mn(),g=T(null),b=T(!1),c=Nn(p),{pickFiles:u,onDragover:f,onDragleave:_,processFiles:y,getDndNode:S}=Id({editable:n.editable,dnd:b,getFileInput:z,addFilesToQueue:V}),q=Fn(p),x=ee(()=>Object(p.modelValue)===p.modelValue?"length"in p.modelValue?Array.from(p.modelValue):[p.modelValue]:[]),D=ee(()=>Qa(x.value)),K=ee(()=>x.value.map(ie=>ie.name).join(", ")),R=ee(()=>zn(x.value.reduce((ie,Ie)=>ie+Ie.size,0))),U=ee(()=>({totalSize:R.value,filesNumber:x.value.length,maxFiles:p.maxFiles})),O=ee(()=>({tabindex:-1,type:"file",title:"",accept:p.accept,capture:p.capture,name:c.value,...o,id:n.targetUid.value,disabled:n.editable.value!==!0})),F=ee(()=>"q-file q-field--auto-height"+(b.value===!0?" q-file--dnd":"")),B=ee(()=>p.multiple===!0&&p.append===!0);function h(ie){const Ie=x.value.slice();Ie.splice(ie,1),P(Ie)}function j(ie){const Ie=x.value.indexOf(ie);Ie!==-1&&h(Ie)}function P(ie){m("update:modelValue",p.multiple===!0?ie:ie[0])}function $(ie){ie.keyCode===13&&Hn(ie)}function A(ie){(ie.keyCode===13||ie.keyCode===32)&&u(ie)}function z(){return g.value}function V(ie,Ie){const Xe=y(ie,Ie,x.value,B.value),me=z();me!=null&&(me.value=""),Xe!==void 0&&((p.multiple===!0?p.modelValue&&Xe.every(L=>x.value.includes(L)):p.modelValue===Xe[0])||P(B.value===!0?x.value.concat(Xe):Xe))}function M(){return[Ce("input",{class:[p.inputClass,"q-file__filler"],style:p.inputStyle})]}function ae(){if(s.file!==void 0)return x.value.length===0?M():x.value.map((Ie,Xe)=>s.file({index:Xe,file:Ie,ref:this}));if(s.selected!==void 0)return x.value.length===0?M():s.selected({files:x.value,ref:this});if(p.useChips===!0)return x.value.length===0?M():x.value.map((Ie,Xe)=>Ce(oo,{key:"file-"+Xe,removable:n.editable.value,dense:!0,textColor:p.color,tabindex:p.tabindex,onRemove:()=>{h(Xe)}},()=>Ce("span",{class:"ellipsis",textContent:Ie.name})));const ie=p.displayValue!==void 0?p.displayValue:K.value;return ie.length!==0?[Ce("div",{class:p.inputClass,style:p.inputStyle,textContent:ie})]:M()}function ue(){const ie={ref:g,...O.value,...q.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:V};return p.multiple===!0&&(ie.multiple=!0),Ce("input",ie)}return Object.assign(n,{fieldClass:F,emitValue:P,hasValue:D,inputRef:g,innerValue:x,floatingLabel:ee(()=>D.value===!0||Qa(p.displayValue)),computedCounter:ee(()=>{if(p.counterLabel!==void 0)return p.counterLabel(U.value);const ie=p.maxFiles;return`${x.value.length}${ie!==void 0?" / "+ie:""} (${R.value})`}),getControlChild:()=>S("file"),getControl:()=>{const ie={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:p.tabindex};return n.editable.value===!0&&Object.assign(ie,{onDragover:f,onDragleave:_,onKeydown:$,onKeyup:A}),Ce("div",ie,[ue()].concat(ae()))}}),Object.assign(i,{removeAtIndex:h,removeFile:j,getNativeElement:()=>g.value}),Ln(i,"nativeEl",()=>g.value),Kn(n)}}),Gt=Et({name:"QBanner",props:{...Ua,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(p,{slots:s}){const{proxy:{$q:m}}=It(),o=ja(p,m),i=ee(()=>"q-banner row items-center"+(p.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(p.rounded===!0?" rounded-borders":"")),n=ee(()=>`q-banner__actions row items-center justify-end col-${p.inlineActions===!0?"auto":"all"}`);return()=>{const g=[Ce("div",{class:"q-banner__avatar col-auto row items-center self-start"},Nt(s.avatar)),Ce("div",{class:"q-banner__content col text-body2"},Nt(s.default))],b=Nt(s.action);return b!==void 0&&g.push(Ce("div",{class:n.value},b)),Ce("div",{class:i.value+(p.inlineActions===!1&&b!==void 0?" q-banner--top-padding":""),role:"alert"},g)}}}),Od={class:"q-gutter-sm"},Dd={class:"col col-md-6 q-pa-xs"},ml="Import Pelanggan",Ud={__name:"Import",setup(p){const s=Qe({csv_file:null}),m=()=>{s.post(route("admin.customer.import"),{onSuccess:()=>{s.reset()},onError:()=>{Ye()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(J,null,[e(n,{title:ml}),e(g,{"show-drawer-button":!0},{title:a(()=>[v(r(ml))]),"left-button":a(()=>[t("div",Od,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$goBack())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Dd,[e(Je,{class:"row",onSubmit:G(m,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(yo,{modelValue:l(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>l(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:i[2]||(i[2]=b=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),I(Gt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),I(Gt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},jd=Object.freeze(Object.defineProperty({__proto__:null,default:Ud},Symbol.toStringTag,{value:"Module"})),Ed={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ad={class:"q-pa-xs"},Bd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Md={key:0},Nd={key:2},Fd={key:3},zd={class:"flex justify-end"},cl="Pelanggan",Ld={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=De({search:"",status:"active",...Le()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"code",label:s.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{S()});const y=U=>st({message:`Hapus Pelanggan ${U.name}?`,url:route("admin.customer.delete",U.id),fetchItemsCallback:S,loading:i}),S=(U=null)=>{Ke({pagination:u,filter:c,props:U,rows:o,url:route("admin.customer.data"),loading:i,tableRef:n})},q=()=>S(),x=U=>Z.get(route("admin.customer.detail",{id:U.id})),{protectClick:D}=At(),K=D(x),R=ee(()=>s.screen.gt.sm?f:f.filter(U=>U.name==="code"||U.name==="action"));return(U,O)=>{const F=X("i-head"),B=X("authenticated-layout");return d(),w(J,null,[e(F,{title:cl}),e(B,null,Fe({title:a(()=>[v(r(cl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=h=>m.value=!m.value)},null,8,["icon"]),U.$can("admin.customer.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=h=>l(Z).get(U.route("admin.customer.add")))})):k("",!0),U.$can("admin.customer.import")?(d(),I(E,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[3]||(O[3]=G(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[U.$can("admin.customer.import")?te((d(),I(oe,{key:0,clickable:"",onClick:O[2]||(O[2]=G(h=>l(Z).get(U.route("admin.customer.import")),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"csv"})]),_:1}),e(N,null,{default:a(()=>O[8]||(O[8]=[v("Import")])),_:1})]),_:1})),[[ne],[fe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",Ad,[e(je,{class:"full-height-table",style:He({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":O[7]||(O[7]=h=>u.value=h),filter:c.search,loading:i.value,columns:R.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:P})=>[t("div",Bd,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Re,{props:h,class:xe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(j=>l(K)(h.row,j),["stop"])},{default:a(()=>[e(Y,{key:"code",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),I(C,{key:0,name:"person"})):k("",!0),v(" "+r(h.row.code),1)]),l(s).screen.lt.md?(d(),w(J,{key:0},[t("div",null,[l(s).screen.lt.md?(d(),I(C,{key:0,name:"person"})):k("",!0),v(" "+r(h.row.name),1)]),h.row.phone?(d(),w("div",Md,[e(C,{name:"phone"}),v(" "+r(h.row.phone),1)])):k("",!0),h.row.address?(d(),I(Se,{key:1,text:h.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),h.row.wallet_balance!=0?(d(),w("div",Nd,[e(C,{name:"wallet"}),v(" Wallet: Rp. "+r(l(H)(h.row.wallet_balance)),1)])):k("",!0),h.row.balance!=0?(d(),w("div",Fd,[e(C,{name:"wallet"}),v(" Utang: Rp. "+r(l(H)(h.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"name",props:h},{default:a(()=>[v(r(h.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"wallet_balance",props:h},{default:a(()=>[v(r(l(H)(h.row.wallet_balance)),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:h},{default:a(()=>[v(r(l(H)(h.row.balance)),1)]),_:2},1032,["props"]),e(Y,{key:"phone",props:h},{default:a(()=>[v(r(h.row.phone),1)]),_:2},1032,["props"]),e(Y,{key:"address",props:h},{default:a(()=>[e(Se,{text:h.row.address},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:h},{default:a(()=>[t("div",zd,[U.$can("admin.customer.add")||U.$can("admin.customer.edit")||U.$can("admin.customer.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[6]||(O[6]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[U.$can("admin.customer.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(j=>l(Z).get(U.route("admin.customer.duplicate",h.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(N,null,{default:a(()=>O[9]||(O[9]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),U.$can("admin.customer.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(j=>l(Z).get(U.route("admin.customer.edit",h.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>O[10]||(O[10]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),U.$can("admin.customer.delete")?te((d(),I(oe,{key:2,onClick:G(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>O[11]||(O[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",Ed,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[O[4]||(O[4]=h=>c.status=h),q],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":O[5]||(O[5]=h=>c.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Kd=Object.freeze(Object.defineProperty({__proto__:null,default:Ld},Symbol.toStringTag,{value:"Module"})),Hd={class:"q-pb-sm"},Wd={class:"row q-col-gutter-sm"},Yd={class:"row items-center no-wrap"},Qd={class:"q-ml-md"},Jd={class:"text-subtitle2 text-grey-8"},Gd={class:"text-h6 text-weight-bold"},ko={__name:"ActualSummaryCard",props:{dashboardData:{type:Object,required:!0}},setup(p){const s=p,m=ee(()=>[{label:"Total Pelanggan Aktif",value:s.dashboardData.summary.total_active_customer,icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Saldo Wallet",value:H(s.dashboardData.summary.total_wallet_balance),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Penjualan",value:H(s.dashboardData.summary.total_sales),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Transaksi",value:H(s.dashboardData.summary.total_transactions),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(o,i)=>(d(),w("div",Hd,[i[0]||(i[0]=t("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"},"Ringkasan Statistik",-1)),t("div",Wd,[(d(!0),w(J,null,Ue(m.value,(n,g)=>(d(),w("div",{key:g,class:"col-12 col-md-6"},[e(pe,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",Yd,[e(oa,{icon:n.icon,color:n.color,"text-color":n.bgColor},null,8,["icon","color","text-color"]),t("div",Qd,[t("div",Jd,r(n.label),1),t("div",Gd,r(n.value),1)])])]),_:2},1024)]))),128))])]))}},Xd=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),Zd={class:"row q-col-gutter-sm q-pb-sm"},eu={class:"col-md-6 col-12"},tu={class:"col-md-6 col-12"},au={__name:"ChartCard",props:{dashboardData:{type:Object,required:!0}},setup(p){Wn([Yn,Qn,Jn,Gn,Xn,Zn,es]);const s=p,m=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=ee(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(n){let g=n[0].name+"<br/>";return n.forEach(function(b){g+=b.marker+" "+b.seriesName+": "+H(b.value)+"<br/>"}),g}},xAxis:{type:"category",data:s.dashboardData.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:n=>H(n),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:s.dashboardData.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:m[0]}}]})),i=ee(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(n){return n.name+"<br/>"+n.seriesName+": "+H(n.value)+" ("+n.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:s.dashboardData.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:n=>m[n.dataIndex%m.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(n,g)=>(d(),w("div",Zd,[t("div",eu,[e(pe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[g[0]||(g[0]=t("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),e(l(Ja),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",tu,[e(pe,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[g[1]||(g[1]=t("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),e(l(Ja),{class:"chart",option:i.value,autoresize:""},null,8,["option"])]),_:1})])]))}},wo=vt(au,[["__scopeId","data-v-b9cdf915"]]),lu=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),ou={class:"row q-col-gutter-sm q-pb-sm"},nu={class:"col-md-6 col-12"},su={class:"col-md-6 col-12"},ho={__name:"TopCard",props:{dashboardData:{type:Object,required:!0}},setup(p){return(s,m)=>(d(),w("div",ou,[t("div",nu,[e(pe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[m[0]||(m[0]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),e(Ae,{separator:""},{default:a(()=>[(d(!0),w(J,null,Ue(p.dashboardData.top_customers_sales,(o,i)=>(d(),I(oe,{key:i},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(oa,{color:"primary","text-color":"white",size:"sm"},{default:a(()=>[v(r(i+1),1)]),_:2},1024)]),_:2},1024),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>[v(r(o.name),1)]),_:2},1024)]),_:2},1024),e(N,{side:""},{default:a(()=>[e(ke,{class:"text-primary"},{default:a(()=>[v(r(l(H)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",su,[e(pe,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[m[1]||(m[1]=t("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),e(Ae,{separator:""},{default:a(()=>[(d(!0),w(J,null,Ue(p.dashboardData.top_customers_topup,(o,i)=>(d(),I(oe,{key:i},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(oa,{color:"green-7","text-color":"white",size:"sm"},{default:a(()=>[v(r(i+1),1)]),_:2},1024)]),_:2},1024),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>[v(r(o.name),1)]),_:2},1024)]),_:2},1024),e(N,{side:""},{default:a(()=>[e(ke,{class:"text-green-7"},{default:a(()=>[v(r(l(H)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]))}},ru=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),iu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},du={class:"q-pa-xs"},uu={class:"q-pa-none"},pl="Dashboard",mu={__name:"Index",setup(p){const s=ge(),m=T({summary:{total_active_customer:s.props.data.active_customer_count,total_sales:155e5,total_transactions:1250,total_wallet_balance:s.props.data.total_customer_wallet_balance,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),o=T(!1),i=T(Le().month??"this_month"),n=T([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),g=()=>{Z.visit(route("admin.dashboard",{month:i.value}))};return(b,c)=>{const u=X("i-head"),f=X("authenticated-layout");return d(),w(J,null,[e(u,{title:pl}),e(f,null,Fe({title:a(()=>[v(r(pl))]),"right-button":a(()=>[e(E,{class:"q-ml-sm",icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:c[0]||(c[0]=_=>o.value=!o.value)},null,8,["icon"])]),default:a(()=>[t("div",du,[t("div",uu,[e(ko,{dashboardData:m.value},null,8,["dashboardData"])]),e(wo,{dashboardData:m.value},null,8,["dashboardData"]),e(ho,{dashboardData:m.value},null,8,["dashboardData"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar"},{default:a(()=>[t("div",iu,[e(ce,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:i.value,"onUpdate:modelValue":[c[1]||(c[1]=_=>i.value=_),g],options:n.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},cu=Object.freeze(Object.defineProperty({__proto__:null,default:mu},Symbol.toStringTag,{value:"Module"})),pu={class:"row"},fu={class:"row q-col-gutter-sm"},gu={class:"col-sm-6 col-xs-12"},bu={class:"col-sm-6 col-xs-12"},vu={class:"col-md-3 col-sm-6 col-xs-12"},_u={class:"col-md-3 col-sm-6 col-xs-12"},yu={class:"col-md-3 col-sm-6 col-xs-12"},ku={class:"col-md-3 col-sm-6 col-xs-12"};const wu={__name:"SummaryCard",setup(p){const s=ge(),m=(o,i)=>{const g={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...i};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(g)),Z.visit(o,{data:g})};return(o,i)=>(d(),w("div",pu,[e(pe,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:a(()=>[e(le,{class:"q-pa-none"},{default:a(()=>[t("div",fu,[t("div",gu,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[0]||(i[0]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(N,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ke,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[v(r(l(s).props.data.active_customer_count),1)]),_:1}),e(ke,null,{default:a(()=>i[5]||(i[5]=[v("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",bu,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[1]||(i[1]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(N,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ke,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[v(r(o.$page.props.data.active_user_count),1)]),_:1}),e(ke,null,{default:a(()=>i[6]||(i[6]=[v("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",vu,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(N,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ke,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(H)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(ke,null,{default:a(()=>i[7]||(i[7]=[v("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",_u,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(N,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ke,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(H)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(ke,null,{default:a(()=>i[8]||(i[8]=[v("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",yu,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(N,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ke,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(H)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(ke,null,{default:a(()=>i[9]||(i[9]=[v("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",ku,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(N,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(C,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(N,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ke,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(H)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(ke,null,{default:a(()=>i[10]||(i[10]=[v("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},hu=Object.freeze(Object.defineProperty({__proto__:null,default:wu},Symbol.toStringTag,{value:"Module"})),$u={class:"detail"},$o={__name:"MainInfoTab",setup(p){const s=ge();return(m,o)=>(d(),w("table",$u,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.FINANCE_ACCOUNT_TYPES[l(s).props.data.type]),1)]),l(s).props.data.type=="bank"?(d(),w(J,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(H)(l(s).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},xu=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),Su={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Vu={class:"flex q-gutter-sm"},qu={key:0},xo={__name:"HistoryTab",setup(p){const s=ge(),m=$e(),o=T(null),i=T([]),n=T(!0),g=De({...Le()}),b=at(null,117),c=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),u=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],f=ee(()=>m.screen.gt.sm?u:u.filter(y=>y.name==="code"));he(()=>{_()});const _=(y=null)=>Ke({pagination:c,filter:g,props:y,rows:i,url:route("admin.finance-transaction.data",{filter:{account_id:s.props.data.id}}),loading:n,tableRef:o});return(y,S)=>(d(),I(je,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:He({height:l(b)}),color:"primary",class:"full-height-table","row-key":"id",pagination:c.value,"onUpdate:pagination":S[0]||(S[0]=q=>c.value=q),filter:g.search,loading:n.value,columns:f.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({message:q,filter:x})=>[t("div",Su,[t("span",null,r(q)+" "+r(x?" with term "+x:""),1)])]),body:a(q=>[e(Re,{props:q},{default:a(()=>[e(Y,{key:"code",props:q},{default:a(()=>[t("div",Vu,[t("div",null,[l(m).screen.lt.md?(d(),I(C,{key:0,name:"tag",class:"inline-icon"})):k("",!0),v(" "+r(q.row.code),1)])]),l(m).screen.lt.md?(d(),w(J,{key:0},[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(q.row.datetime)),1)]),q.row.creator?(d(),w("div",qu,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(q.row.creator.username),1)])):k("",!0),t("div",{class:xe([q.row.amount>0?"text-green":"text-red","text-bold"])},[e(C,{class:"inline-icon",name:"money"}),v(" "+r(l(na)(q.row.amount))+"Rp. "+r(l(H)(Math.abs(q.row.amount))),1)],2),t("div",null,[e(gt,{color:q.row.amount>0?"green":"red"},{default:a(()=>[v(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[q.row.type]),1)]),_:2},1032,["color"])]),e(Se,{text:q.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"datetime",props:q},{default:a(()=>[v(r(l(ve)(q.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:q},{default:a(()=>[e(gt,{color:q.row.amount>0?"green":"red"},{default:a(()=>[v(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[q.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:q,class:xe(q.row.amount>0?"text-green":"text-red")},{default:a(()=>[v(r(l(na)(q.row.amount)+l(H)(Math.abs(q.row.amount))),1)]),_:2},1032,["props","class"]),e(Y,{key:"notes",props:q},{default:a(()=>[e(Se,{text:q.row.notes,icon:y.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},Cu=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),Tu={class:"q-gutter-sm"},Pu={class:"q-gutter-sm"},Ru={class:"col q-pa-xs"},Iu={class:"row"},fl="Rincian Akun",Ou={__name:"Detail",setup(p){const s=ge(),m=T("main");return(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(J,null,[e(n,{title:fl}),e(g,null,{title:a(()=>[v(r(fl))]),"left-button":a(()=>[t("div",Tu,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":a(()=>[t("div",Pu,[o.$can("admin.finance-account.edit")?(d(),I(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>l(Z).get(o.route("admin.finance-account.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ru,[t("div",Iu,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(qt,{modelValue:m.value,"onUpdate:modelValue":i[2]||(i[2]=b=>m.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Info Akun"}),e(it,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(Ct,{modelValue:m.value,"onUpdate:modelValue":i[3]||(i[3]=b=>m.value=b),animated:""},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e($o)]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(xo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Du=Object.freeze(Object.defineProperty({__proto__:null,default:Ou},Symbol.toStringTag,{value:"Module"})),Uu={style:{"margin-left":"-10px"}},Rt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(p){return(s,m)=>(d(),w("div",Uu,[e(ia,{class:"full-width q-pl-none","model-value":p.modelValue,"onUpdate:modelValue":m[0]||(m[0]=o=>s.$emit("update:modelValue",o)),disable:p.disable,label:p.label},null,8,["model-value","disable","label"])]))}},ju={class:"q-gutter-sm"},Eu={class:"col col-md-6 q-pa-xs"},Au={__name:"Editor",setup(p){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Qe({id:s.props.data.id,name:s.props.data.name,type:s.props.data.type,bank:s.props.data.bank,number:s.props.data.number,holder:s.props.data.holder,balance:parseFloat(s.props.data.balance),active:!!s.props.data.active,has_wallet_access:!!s.props.data.has_wallet_access,show_in_pos_payment:!!s.props.data.show_in_pos_payment,show_in_purchasing_payment:!!s.props.data.show_in_purchasing_payment,notes:s.props.data.notes}),i=ot(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),n=()=>rt({form:o,url:route("admin.finance-account.save")}),g=b=>{b==="cashier_cash"&&(o.show_in_pos_payment=!0)};return he(()=>{g(o.type)}),Ne(()=>o.type,b=>{g(b)}),(b,c)=>{const u=X("i-head"),f=X("authenticated-layout");return d(),w(J,null,[e(u,{title:m}),e(f,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",ju,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=_=>b.$inertia.get(b.route("admin.finance-account.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Eu,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=_=>l(o).id=_)},null,512),[[yt,l(o).id]]),e(se,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":c[2]||(c[2]=_=>l(o).name=_),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":c[3]||(c[3]=_=>l(o).type=_),label:"Jenis Akun",options:l(i),"map-options":"","emit-value":"",error:!!l(o).errors.type,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),l(o).type=="bank"?(d(),w(J,{key:0},[e(se,{modelValue:l(o).bank,"onUpdate:modelValue":c[4]||(c[4]=_=>l(o).bank=_),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!l(o).errors.bank,disable:l(o).processing,"error-message":l(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:l(o).number,"onUpdate:modelValue":c[5]||(c[5]=_=>l(o).number=_),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!l(o).errors.number,disable:l(o).processing,"error-message":l(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:l(o).holder,"onUpdate:modelValue":c[6]||(c[6]=_=>l(o).holder=_),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!l(o).errors.holder,disable:l(o).processing,"error-message":l(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Me,{modelValue:l(o).balance,"onUpdate:modelValue":c[7]||(c[7]=_=>l(o).balance=_),label:"Saldo",lazyRules:"",disable:l(o).processing,"allow-negative":!0,error:!!l(o).errors.balance,errorMessage:l(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(se,{modelValue:l(o).notes,"onUpdate:modelValue":c[8]||(c[8]=_=>l(o).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Rt,{modelValue:l(o).active,"onUpdate:modelValue":c[9]||(c[9]=_=>l(o).active=_),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),c[14]||(c[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(Rt,{modelValue:l(o).show_in_pos_payment,"onUpdate:modelValue":c[10]||(c[10]=_=>l(o).show_in_pos_payment=_),disable:l(o).processing||l(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(Rt,{modelValue:l(o).show_in_purchasing_payment,"onUpdate:modelValue":c[11]||(c[11]=_=>l(o).show_in_purchasing_payment=_),disable:l(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(Rt,{modelValue:l(o).has_wallet_access,"onUpdate:modelValue":c[12]||(c[12]=_=>l(o).has_wallet_access=_),disable:l(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:c[13]||(c[13]=_=>l(Z).get(b.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Bu=Object.freeze(Object.defineProperty({__proto__:null,default:Au},Symbol.toStringTag,{value:"Module"})),Mu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Nu={class:"q-pa-xs"},Fu={class:"q-my-sm text-subtitle"},zu={class:"text-bold text-grey-8"},Lu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ku={class:"text-bold text-grey-9"},Hu={class:"text-grey-9"},Wu={key:0},Yu={key:1},Qu={key:0},Ju={class:"flex justify-end"},gl="Akun Kas",Gu={__name:"Index",setup(p){const s=ge(),m=$e(),o=T(!1),i=T([]),n=T(null),g=T(null),b=at(g,117),c=T(!0),u=De({search:"",status:"active",type:"all",...Le()}),f=s.props.totalBalance,_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),y=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],S=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],q=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];he(()=>{D()});const x=B=>st({message:`Hapus Akun ${B.name}?`,url:route("admin.finance-account.delete",B.id),fetchItemsCallback:D,loading:c}),D=(B=null)=>{Ke({pagination:_,filter:u,props:B,rows:i,url:route("admin.finance-account.data"),loading:c,tableRef:n})},K=()=>D(),R=B=>Z.get(route("admin.finance-account.detail",{id:B.id})),{protectClick:U}=At(),O=U(R),F=ee(()=>m.screen.gt.sm?y:y.filter(B=>B.name==="name"||B.name==="action"));return(B,h)=>{const j=X("i-head"),P=X("authenticated-layout");return d(),w(J,null,[e(j,{title:gl}),e(P,null,Fe({title:a(()=>[v(r(gl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:h[0]||(h[0]=$=>o.value=!o.value)},null,8,["icon"]),B.$can("admin.finance-account.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:h[1]||(h[1]=$=>l(Z).get(B.route("admin.finance-account.add")))})):k("",!0)]),default:a(()=>[t("div",Nu,[e(pe,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:a(()=>[t("div",Fu,[h[7]||(h[7]=v(" Total Saldo Akun Aktif: ")),t("span",zu,"Rp. "+r(l(H)(l(f))),1)])]),_:1}),e(je,{ref_key:"tableRef",ref:n,class:"full-height-table",style:He({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":h[6]||(h[6]=$=>_.value=$),filter:u.search,loading:c.value,columns:F.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:D,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:A,filter:z})=>[t("div",Lu,[t("span",null,r(A)+" "+r(z?" with term "+z:""),1)])]),body:a($=>[e(Re,{props:$,class:xe([$.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(A=>l(O)($.row,A),["stop"])},{default:a(()=>[e(Y,{key:"name",props:$,class:"wrap-column"},{default:a(()=>[t("div",Ku,r($.row.name),1),t("div",Hu,[$.row.type=="bank"?(d(),w("div",Wu,[e(C,{name:"wallet",class:"inline-icon"}),v(" Rekening "+r($.row.bank??"-")+" "+r($.row.number??"-")+" a.n. "+r($.row.holder??"-"),1)])):k("",!0),$.row.notes?(d(),w("div",Yu,[e(C,{name:"notes"}),v(" "+r($.row.notes),1)])):k("",!0)]),l(m).screen.lt.md?(d(),w("div",Qu,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(H)($.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"type",props:$},{default:a(()=>[v(r(B.$CONSTANTS.FINANCE_ACCOUNT_TYPES[$.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:$},{default:a(()=>[v(r(l(H)($.row.balance)),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:$},{default:a(()=>[t("div",Ju,[B.$can("admin.finance-account.add")||B.$can("admin.finance-account.edit")||B.$can("admin.finance-account.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:h[5]||(h[5]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[B.$can("admin.finance-account.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(A=>l(Z).get(B.route("admin.finance-account.duplicate",$.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(N,null,{default:a(()=>h[8]||(h[8]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),B.$can("admin.finance-account.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(A=>l(Z).get(B.route("admin.finance-account.edit",$.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>h[9]||(h[9]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),B.$can("admin.finance-account.delete")?te((d(),I(oe,{key:2,onClick:G(A=>x($.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>h[10]||(h[10]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",Mu,[e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:u.type,"onUpdate:modelValue":[h[2]||(h[2]=$=>u.type=$),K],options:q,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[h[3]||(h[3]=$=>u.status=$),K],options:S,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":h[4]||(h[4]=$=>u.search=$),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Xu=Object.freeze(Object.defineProperty({__proto__:null,default:Gu},Symbol.toStringTag,{value:"Module"})),Zu={class:"q-gutter-sm"},em={class:"col col-md-6 q-pa-xs"},tm={class:"row"},am={class:"detail"},lm={key:0},om={key:1},nm={key:2},sm={key:3},rm={colspan:"3",class:"bg-white"},bl="Rincian Transaksi",im={__name:"Detail",setup(p){const s=ge();return(m,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return d(),w(J,null,[e(i,{title:bl}),e(g,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Zu,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.$inertia.get(m.route("admin.finance-transaction.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},r(bl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",em,[t("div",tm,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",am,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),l(s).props.data.account?(d(),w("tr",lm,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[e(n,{href:m.route("admin.finance-account.detail",l(s).props.data.account.id)},{default:a(()=>[v(r(l(s).props.data.account.name),1)]),_:1},8,["href"]),l(s).props.data.account.type==="bank"?(d(),w(J,{key:0},[v(" Rek "+r(l(s).props.data.account.bank)+" an "+r(l(s).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),v(" "+r(l(s).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.type?(d(),w("tr",om,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.FINANCE_TRANSACTION_TYPES[l(s).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(sa)(l(s).props.data.amount)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",nm,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",sm,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(J,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",rm,[e(da,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},dm=Object.freeze(Object.defineProperty({__proto__:null,default:im},Symbol.toStringTag,{value:"Module"})),um={class:"q-gutter-sm"},mm={class:"col col-md-6 q-pa-xs"},cm={__name:"Editor",setup(p){var b;const s=ge(),m=(s.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=s.props.accounts.map(c=>({label:c.name,value:c.id})),i=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],n=Qe({id:s.props.data.id,account_id:s.props.data.account_id,to_account_id:s.props.data.to_account_id??null,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((b=s.props.data)==null?void 0:b.image_path)??"",image:null}),g=()=>{ua(n,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:n,url:route("admin.finance-transaction.save")})};return(c,u)=>{const f=X("i-head"),_=X("authenticated-layout");return d(),w(J,null,[e(f,{title:m}),e(_,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",um,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>c.$inertia.get(c.route("admin.finance-transaction.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",mm,[e(Je,{class:"row",onSubmit:G(g,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":u[1]||(u[1]=y=>l(n).id=y)},null,512),[[yt,l(n).id]]),e(Ht,{modelValue:l(n).datetime,"onUpdate:modelValue":u[2]||(u[2]=y=>l(n).datetime=y),label:"Waktu",error:!!l(n).errors.datetime,disable:l(n).processing,errorMessage:l(n).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":u[3]||(u[3]=y=>l(n).type=y),label:"Jenis Transaksi",options:i,"map-options":"","emit-value":"",error:!!l(n).errors.type,disable:l(n).processing,errorMessage:l(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{class:"custom-select",modelValue:l(n).account_id,"onUpdate:modelValue":u[4]||(u[4]=y=>l(n).account_id=y),label:l(n).type=="transfer"?"Akun Asal":"Akun",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.account_id,error:!!l(n).errors.account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),l(n).type=="transfer"?(d(),I(ce,{key:0,class:"custom-select",modelValue:l(n).to_account_id,"onUpdate:modelValue":u[5]||(u[5]=y=>l(n).to_account_id=y),label:"Akun Tujuan",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.to_account_id,error:!!l(n).errors.to_account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Me,{modelValue:l(n).amount,"onUpdate:modelValue":u[6]||(u[6]=y=>l(n).amount=y),label:"Jumlah",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.amount,errorMessage:l(n).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(se,{modelValue:l(n).notes,"onUpdate:modelValue":u[7]||(u[7]=y=>l(n).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Ea,{modelValue:l(n).image,"onUpdate:modelValue":u[8]||(u[8]=y=>l(n).image=y),"initial-image-path":l(n).image_path,disabled:l(n).processing,error:!!l(n).errors.image||!!l(n).errors.image_path,"error-message":l(n).errors.image||l(n).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(n).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(n).processing,onClick:u[9]||(u[9]=y=>l(Z).get(c.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},pm=Object.freeze(Object.defineProperty({__proto__:null,default:cm},Symbol.toStringTag,{value:"Module"})),fm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},gm={class:"q-pa-xs"},bm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},vm={class:"text-grey-8"},_m={class:"text-bold text-grey-8"},ym={class:"flex justify-end no-wrap"},vl="Transaksi Kas",km={__name:"Index",setup(p){const s=ge(),m=$e(),o=T(!1),i=T([]),n=T(!0),g=T(null),b=T(null),c=at(b),u=zt(),f=Lt(),_=[{label:"Semua",value:"all"},...s.props.accounts.map(P=>({label:P.name,value:P.id}))],y=[{label:"Semua Tahun",value:"all"},{label:`${u}`,value:u},...Ot(u-2,u-1).reverse()],S=[{value:"all",label:"Semua Bulan"},...Dt()],q=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],x=De({search:"",type:"all",account_id:"all",year:u,month:f,...Le()}),D=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),K=[{name:"id",label:m.screen.lt.md?"Item":"Kode",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{U()});const R=P=>st({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${P.code}?`,url:route("admin.finance-transaction.delete",P.id),fetchItemsCallback:U,loading:n}),U=(P=null)=>{Ke({pagination:D,filter:x,props:P,rows:i,url:route("admin.finance-transaction.data"),loading:n,tableRef:g})},O=()=>{U()},F=ee(()=>m.screen.gt.sm?K:K.filter(P=>P.name==="id"||P.name==="action"));Ne(()=>x.year,P=>{P===null&&(x.month=null)});const B=T(null),h=T(!1),j=P=>{B.value=P,h.value=!0};return(P,$)=>{const A=X("i-head"),z=X("authenticated-layout");return d(),w(J,null,[e(A,{title:vl}),e(z,null,Fe({title:a(()=>[v(r(vl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=V=>o.value=!o.value)},null,8,["icon"]),P.$can("admin.finance-transaction.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=V=>l(Z).get(P.route("admin.finance-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",gm,[e(je,{ref_key:"tableRef",ref:g,style:He({height:l(c)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":$[8]||($[8]=V=>D.value=V),filter:x.search,loading:n.value,columns:F.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:U,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:V,message:M,filter:ae})=>[t("div",bm,[t("span",null,r(M)+" "+r(ae?" with term "+ae:""),1)])]),body:a(V=>[e(Re,{props:V,class:"cursor-pointer",onClick:G(M=>l(Z).get(P.route("admin.finance-transaction.detail",{id:V.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:V},{default:a(()=>[t("div",null,[l(m).screen.lt.md?(d(),I(C,{key:0,class:"inline-icon",name:"tag"})):k("",!0),v(" "+r(V.row.code),1)]),l(m).screen.lt.md?(d(),w(J,{key:0},[t("div",vm,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(V.row.datetime)),1)]),t("div",_m,[e(C,{name:"wallet",class:"inline-icon"}),v(" "+r(V.row.account.name),1)]),t("div",{class:xe(["text-bold",V.row.amount<0?"text-red":"text-green"])},[e(C,{name:"money",class:"inline-icon"}),v(" "+r(l(na)(V.row.amount)+"Rp."+l(H)(Math.abs(V.row.amount))),1)],2),V.row.notes?(d(),I(Se,{key:0,icon:"notes",text:V.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(gt,{color:V.row.amount>0?"green":"red"},{default:a(()=>[v(r(V.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"datetime",props:V,class:"wrap-column"},{default:a(()=>[v(r(l(ve)(V.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"account",props:V},{default:a(()=>{var M;return[v(r((M=V.row.account)==null?void 0:M.name),1)]}),_:2},1032,["props"]),e(Y,{key:"type",props:V},{default:a(()=>[v(r(P.$CONSTANTS.FINANCE_TRANSACTION_TYPES[V.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"amount",props:V,style:{"text-align":"right"}},{default:a(()=>[v(r(l($t)(V.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:V,class:"wrap-column"},{default:a(()=>[v(r(V.row.notes),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:V},{default:a(()=>[t("div",ym,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:V.row.image_path===null||V.row.image_path==="",onClick:G(M=>j(V.row.image_path),["stop"])},{default:a(()=>[V.row.image_path!=null?(d(),I(Kt,{key:0},{default:a(()=>$[10]||($[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.finance-transaction.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[7]||($[7]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[P.$can("admin.finance-transaction.delete")?te((d(),I(oe,{key:0,onClick:G(M=>R(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>$[11]||($[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(va,{modelValue:h.value,"onUpdate:modelValue":$[9]||($[9]=V=>h.value=V),imageUrl:`/${B.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:a(()=>[t("div",fm,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[$[2]||($[2]=V=>x.year=V),O],options:y,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(d(),I(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[$[3]||($[3]=V=>x.month=V),O],options:S,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.type,"onUpdate:modelValue":[$[4]||($[4]=V=>x.type=V),O],options:q,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:x.account_id,"onUpdate:modelValue":[$[5]||($[5]=V=>x.account_id=V),O],label:"Akun",options:_,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":$[6]||($[6]=V=>x.search=V),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},wm=Object.freeze(Object.defineProperty({__proto__:null,default:km},Symbol.toStringTag,{value:"Module"})),hm={class:"q-pa-md"},$m={class:"text-h6 q-mb-lg"},xm={class:"row q-col-gutter-md q-mb-md"},Sm={class:"col-xs-12 col-md-4"},Vm={class:"col-xs-12 col-md-4"},qm={class:"col-xs-12 col-md-4"},Cm={class:"row"},Tm={class:"text-caption text-bold text-grey-9 q-mb-xs"},_l="Beranda",Pm={__name:"Index",setup(p){const s=ge(),m={reports:[{group:"Pembelian",items:[{label:"Laporan Pembelian 1",route:"admin.report.index"},{label:"Laporan Pembelian 2",route:"admin.report.index"}]},{group:"Penjualan",items:[{label:"Laporan Penjualan 1",route:"admin.report.index"},{label:"Laporan Penjualan 2",route:"admin.report.index"}]},{group:"Keuangan",items:[{label:"Laporan Keuangan 1",route:"admin.report.index"},{label:"Laporan Keuangan 2",route:"admin.report.index"}]}]};return(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(J,null,[e(n,{title:_l}),e(g,null,{title:a(()=>[v(r(_l))]),"right-button":a(()=>i[9]||(i[9]=[])),default:a(()=>[t("div",hm,[t("div",$m,[v(" Selamat datang, "+r(l(s).props.auth.user.name)+". ",1),e(C,{name:"waving_hand",class:"waving-hand"})]),t("div",xm,[t("div",Sm,[e(pe,{class:"full-height full-width",flat:""},{default:a(()=>[e(Ge,{class:"bg-red text-white"},{default:a(()=>[e(la,null,{default:a(()=>[e(C,{name:"add_shopping_cart",class:"q-mr-md"}),i[10]||(i[10]=v("Pembelian"))]),_:1})]),_:1}),e(Ae,null,{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:i[0]||(i[0]=b=>l(Z).get(o.route("admin.purchase-order.index")))},{default:a(()=>[e(N,null,{default:a(()=>i[11]||(i[11]=[v("Pembelian")])),_:1}),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),e(Pe),te((d(),I(oe,{clickable:"",onClick:i[1]||(i[1]=b=>l(Z).get(o.route("admin.supplier.index")))},{default:a(()=>[e(N,null,{default:a(()=>i[12]||(i[12]=[v("Supplier")])),_:1}),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]])]),_:1})]),_:1})]),t("div",Vm,[e(pe,{class:"full-height full-width",flat:""},{default:a(()=>[e(Ge,{class:"bg-primary text-white"},{default:a(()=>[e(la,null,{default:a(()=>[e(C,{name:"add_shopping_cart",class:"q-mr-md"}),i[13]||(i[13]=v("Inventori"))]),_:1})]),_:1}),e(Ae,null,{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:i[2]||(i[2]=b=>l(Z).get(o.route("admin.product.index")))},{default:a(()=>[e(N,null,{default:a(()=>i[14]||(i[14]=[v("Produk")])),_:1}),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),e(Pe),te((d(),I(oe,{clickable:"",onClick:i[3]||(i[3]=b=>l(Z).get(o.route("admin.stock-adjustment.index")))},{default:a(()=>[e(N,null,{default:a(()=>i[15]||(i[15]=[v("Penyesuaian Stok")])),_:1}),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),te((d(),I(oe,{clickable:"",onClick:i[4]||(i[4]=b=>l(Z).get(o.route("admin.stock-movement.index")))},{default:a(()=>[e(N,null,{default:a(()=>i[16]||(i[16]=[v("Riwayat Stok")])),_:1}),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]])]),_:1})]),_:1})]),t("div",qm,[e(pe,{class:"full-height full-width",flat:""},{default:a(()=>[e(Ge,{class:"bg-green text-white"},{default:a(()=>[e(la,null,{default:a(()=>[e(C,{name:"storefront",class:"q-mr-md"}),i[17]||(i[17]=v("Penjualan"))]),_:1})]),_:1}),e(Ae,null,{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:i[5]||(i[5]=b=>l(Z).get(o.route("admin.sales-order.index")))},{default:a(()=>[e(N,null,{default:a(()=>i[18]||(i[18]=[v("Penjualan")])),_:1}),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),e(Pe),te((d(),I(oe,{clickable:"",onClick:i[6]||(i[6]=b=>l(Z).get(o.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(N,null,{default:a(()=>i[19]||(i[19]=[v("Konfirmasi Topup Wallet")])),_:1}),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),te((d(),I(oe,{clickable:"",onClick:i[7]||(i[7]=b=>l(Z).get(o.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(N,null,{default:a(()=>i[20]||(i[20]=[v("Transaksi Wallet")])),_:1}),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]]),e(Pe),te((d(),I(oe,{clickable:"",onClick:i[8]||(i[8]=b=>l(Z).get(o.route("admin.customer.index")))},{default:a(()=>[e(N,null,{default:a(()=>i[21]||(i[21]=[v("Pelanggan")])),_:1}),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right"})]),_:1})]),_:1})),[[ne]])]),_:1})]),_:1})])]),e(pe,{class:"bg-orange text-white full-width",flat:""},{default:a(()=>[e(Ge,null,{default:a(()=>[e(la,null,{default:a(()=>[e(C,{name:"analytics",class:"q-mr-sm"}),i[22]||(i[22]=v(" Laporan"))]),_:1})]),_:1})]),_:1}),e(pe,{flat:"",class:"q-pa-md bg-grey-1 full-width"},{default:a(()=>[t("div",Cm,[(d(!0),w(J,null,Ue(m.reports,b=>(d(),w("div",{key:b.group,class:"col-xs-6 col-sm-4 q-mb-md"},[t("div",Tm,r(b.group),1),e(Ae,{dense:""},{default:a(()=>[(d(!0),w(J,null,Ue(b.items,c=>te((d(),I(oe,{key:c,clickable:"",onClick:u=>l(Z).get(o.route(c.route))},{default:a(()=>[e(N,null,{default:a(()=>[v(r(c.label),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[ne]])),128))]),_:2},1024)]))),128))])]),_:1})])]),_:1})],64)}}},Rm=vt(Pm,[["__scopeId","data-v-ea82241d"]]),Im=Object.freeze(Object.defineProperty({__proto__:null,default:Rm},Symbol.toStringTag,{value:"Module"})),Om={class:"q-gutter-sm"},Dm={class:"col col-md-6 q-pa-xs"},Um={__name:"Editor",setup(p){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description}),i=()=>rt({form:o,url:route("admin.operational-cost-category.save")});return(n,g)=>{const b=X("i-head"),c=X("authenticated-layout");return d(),w(J,null,[e(b,{title:m}),e(c,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",Om,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=u=>n.$goBack())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Dm,[e(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=u=>l(o).id=u)},null,512),[[yt,l(o).id]]),e(se,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":g[2]||(g[2]=u=>l(o).name=u),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[u=>u&&u.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(o).description,"onUpdate:modelValue":g[3]||(g[3]=u=>l(o).description=u),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:g[4]||(g[4]=u=>l(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},jm=Object.freeze(Object.defineProperty({__proto__:null,default:Um},Symbol.toStringTag,{value:"Module"})),Em={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Am={class:"q-pa-xs"},Bm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Mm={key:0,class:"text-grey-8"},Nm={class:"flex justify-end"},yl="Kategori Biaya Operasional",Fm={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=De({search:"",...Le()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{y()});const _=q=>st({message:`Hapus Kategori Biaya ${q.name}?`,url:route("admin.operational-cost-category.delete",q.id),fetchItemsCallback:y,loading:i}),y=(q=null)=>{Ke({pagination:u,filter:c,props:q,rows:o,url:route("admin.operational-cost-category.data"),loading:i,tableRef:n})},S=ee(()=>s.screen.gt.sm?f:f.filter(q=>q.name==="name"||q.name==="action"));return(q,x)=>{const D=X("i-head"),K=X("authenticated-layout");return d(),w(J,null,[e(D,{title:yl}),e(K,null,Fe({title:a(()=>[v(r(yl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=R=>m.value=!m.value)},null,8,["icon"]),q.$can("admin.operational-cost-category.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=R=>l(Z).get(q.route("admin.operational-cost-category.add")))})):k("",!0)]),default:a(()=>[t("div",Am,[e(je,{ref_key:"tableRef",ref:n,class:"full-height-table",style:He({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":x[4]||(x[4]=R=>u.value=R),filter:c.search,loading:i.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:R,message:U,filter:O})=>[t("div",Bm,[t("span",null,r(U)+" "+r(O?" with term "+O:""),1)])]),body:a(R=>[e(Re,{props:R},{default:a(()=>[e(Y,{key:"name",props:R,class:"wrap-column"},{default:a(()=>[v(r(R.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[R.row.description?(d(),w("div",Mm,[e(C,{name:"description"}),v(" "+r(R.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"description",props:R,class:"wrap-column"},{default:a(()=>[v(r(R.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:R},{default:a(()=>[t("div",Nm,[q.$can("admin.operational-cost-category.add")||q.$can("admin.operational-cost-category.edit")||q.$can("admin.operational-cost-category.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[q.$can("admin.operational-cost-category.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(U=>l(Z).get(q.route("admin.operational-cost-category.duplicate",R.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(N,null,{default:a(()=>x[5]||(x[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),q.$can("admin.operational-cost-category.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(U=>l(Z).get(q.route("admin.operational-cost-category.edit",R.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>x[6]||(x[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),q.$can("admin.operational-cost-category.delete")?te((d(),I(oe,{key:2,onClick:G(U=>_(R.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>x[7]||(x[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",Em,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":x[2]||(x[2]=R=>c.search=R),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},zm=Object.freeze(Object.defineProperty({__proto__:null,default:Fm},Symbol.toStringTag,{value:"Module"})),Lm={class:"q-gutter-sm"},Km={class:"col col-md-6 q-pa-xs"},Hm={class:"row"},Wm={class:"detail"},Ym={key:0},Qm={key:1},Jm={key:2},Gm={key:3},Xm={colspan:"3",class:"bg-white"},kl="Rincian Biaya Operasional",Zm={__name:"Detail",setup(p){const s=ge();return(m,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return d(),w(J,null,[e(i,{title:kl}),e(g,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Lm,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.$inertia.get(m.route("admin.operational-cost.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},r(kl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Km,[t("div",Hm,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>[o[22]||(o[22]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",Wm,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(ra)(l(s).props.data.date)),1)]),l(s).props.data.finance_account?(d(),w("tr",Ym,[o[7]||(o[7]=t("td",null,"Akun",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,[e(n,{href:m.route("admin.finance-account.detail",l(s).props.data.finance_account.id)},{default:a(()=>[v(r(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),l(s).props.data.finance_account.type==="bank"?(d(),w(J,{key:0},[o[5]||(o[5]=t("br",null,null,-1)),v(" Rek "+r(l(s).props.data.finance_account.bank)+" an "+r(l(s).props.data.finance_account.holder)+" ",1),o[6]||(o[6]=t("br",null,null,-1)),v(" "+r(l(s).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.category?(d(),w("tr",Qm,[o[9]||(o[9]=t("td",null,"Kategori",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.category.name),1)])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Deskripsi",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.description),1)]),t("tr",null,[o[13]||(o[13]=t("td",null,"Jumlah",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(H)(l(s).props.data.amount)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Catatan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),w("tr",Jm,[o[17]||(o[17]=t("td",null,"Dibuat",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),w("tr",Gm,[o[19]||(o[19]=t("td",null,"Diperbarui",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),w(J,{key:4},[o[21]||(o[21]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Xm,[e(da,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:He([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},ec=Object.freeze(Object.defineProperty({__proto__:null,default:Zm},Symbol.toStringTag,{value:"Module"})),tc={class:"row items-center justify-end"},ac={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(p,{emit:s}){const m=p,o=s,i=T(""),n=T(""),g=u=>{let f=!0;const _=m.minDate?dt.formatDate(m.minDate,"YYYY/MM/DD"):null,y=m.maxDate?dt.formatDate(m.maxDate,"YYYY/MM/DD"):null;return _&&(f=f&&dt.isBetweenDates(u,_,"2999/01/01",{inclusiveFrom:!0})),y&&(f=f&&dt.isBetweenDates(u,"1900/01/01",y,{inclusiveTo:!0})),f},b=ee(()=>[u=>!!u||"Tanggal harus diisi",u=>{const f=dt.extractDate(u,m.displayFormat);if(!f)return"Format tanggal tidak valid";f.setHours(0,0,0,0);const _=m.minDate?new Date(m.minDate):null;_&&_.setHours(0,0,0,0);const y=m.maxDate?new Date(m.maxDate):null;return y&&y.setHours(0,0,0,0),_&&f<_?`Tanggal tidak boleh kurang dari ${dt.formatDate(m.minDate,m.displayFormat)}`:y&&f>y?`Tanggal tidak boleh lebih dari ${dt.formatDate(m.maxDate,m.displayFormat)}`:(o("update:modelValue",f),!0)}]);Ne(()=>m.modelValue,u=>{u instanceof Date?(n.value=dt.formatDate(u,"YYYY/MM/DD"),i.value=dt.formatDate(u,m.displayFormat)):(n.value="",i.value="")},{immediate:!0});const c=u=>{const f=u!==null?new Date(u):null;o("update:modelValue",f),i.value=f?dt.formatDate(f,m.displayFormat):null};return(u,f)=>(d(),I(se,{modelValue:i.value,"onUpdate:modelValue":f[1]||(f[1]=_=>i.value=_),label:m.label,readonly:m.readonly,disable:m.disable,error:m.error,"error-message":m.errorMessage,mask:m.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:b.value},{append:a(()=>[e(E,{icon:"event",disable:m.disable||m.readonly,flat:"",rounded:"",dense:""},{default:a(()=>[e(ts,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(as,{modelValue:n.value,"onUpdate:modelValue":[f[0]||(f[0]=_=>n.value=_),c],options:g},{default:a(()=>[t("div",tc,[te(e(E,{label:"Close",color:"primary",flat:""},null,512),[[fe]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},ma=vt(ac,[["__scopeId","data-v-b418ccfb"]]);function So(p,s=!1){const m=p.map(g=>({value:g.id,label:g.name})),o=s?[{value:"all",label:"Semua"},...m]:m,i=T([...o]);return{filteredCostCategories:i,filterCostCategory:(g,b)=>{const c=g.toLowerCase();b(()=>{i.value=o.filter(u=>u.label.toLowerCase().includes(c))})},costCategoryOptions:o}}const lc={class:"q-gutter-sm"},oc={class:"col col-md-6 q-pa-xs"},nc={__name:"Editor",setup(p){var _;const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=So(s.props.categories),i=s.props.finance_accounts.map(y=>({label:y.name,value:y.id})),n=T(o),g=T([...n.value]),b=Qe({id:s.props.data.id,finance_account_id:s.props.data.finance_account_id??null,category_id:s.props.data.category_id??null,date:new Date(s.props.data.date),description:s.props.data.description,notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((_=s.props.data)==null?void 0:_.image_path)??null,image:null}),c=()=>{ua(b,{date:"YYYY-MM-DD"}),rt({form:b,url:route("admin.operational-cost.save")})},u=(y,S)=>{S(()=>{g.value=n.value.filter(q=>q.label.toLowerCase().includes(y.toLowerCase()))})},f=()=>{b.image_path=null};return(y,S)=>{const q=X("i-head"),x=X("authenticated-layout");return d(),w(J,null,[e(q,{title:m}),e(x,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",lc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:S[0]||(S[0]=D=>y.$inertia.get(y.route("admin.operational-cost.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",oc,[e(Je,{class:"row",onSubmit:G(c,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":S[1]||(S[1]=D=>l(b).id=D)},null,512),[[yt,l(b).id]]),e(ce,{autofocus:"",modelValue:l(b).category_id,"onUpdate:modelValue":S[2]||(S[2]=D=>l(b).category_id=D),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:g.value,"map-options":"","emit-value":"",onFilter:u,error:!!l(b).errors.category_id,disable:l(b).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(N,null,{default:a(()=>S[10]||(S[10]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(ma,{modelValue:l(b).date,"onUpdate:modelValue":S[3]||(S[3]=D=>l(b).date=D),label:"Tanggal",error:!!l(b).errors.date,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(se,{modelValue:l(b).description,"onUpdate:modelValue":S[4]||(S[4]=D=>l(b).description=D),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!l(b).errors.description,disable:l(b).processing,"error-message":l(b).errors.description,rules:[D=>D&&D.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Me,{modelValue:l(b).amount,"onUpdate:modelValue":S[5]||(S[5]=D=>l(b).amount=D),label:"Jumlah",lazyRules:"",disable:l(b).processing,error:!!l(b).errors.amount,errorMessage:l(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ce,{class:"custom-select",modelValue:l(b).finance_account_id,"onUpdate:modelValue":S[6]||(S[6]=D=>l(b).finance_account_id=D),label:"Sumber Dana",options:l(i),"map-options":"","emit-value":"",clearable:"",errorMessage:l(b).errors.finance_account_id,error:!!l(b).errors.finance_account_id,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(se,{modelValue:l(b).notes,"onUpdate:modelValue":S[7]||(S[7]=D=>l(b).notes=D),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(b).processing,error:!!l(b).errors.notes,"error-message":l(b).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Ea,{modelValue:l(b).image,"onUpdate:modelValue":S[8]||(S[8]=D=>l(b).image=D),"initial-image-path":l(b).image_path,disabled:l(b).processing,error:!!l(b).errors.image||!!l(b).errors.image_path,"error-message":l(b).errors.image||l(b).errors.image_path,onImageCleared:f},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(b).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(b).processing,onClick:S[9]||(S[9]=D=>l(Z).get(y.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},sc=Object.freeze(Object.defineProperty({__proto__:null,default:nc},Symbol.toStringTag,{value:"Module"})),rc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ic={class:"q-pa-xs"},dc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},uc={key:0},mc={key:1},cc={key:0},pc={class:"flex justify-end no-wrap"},wl="Biaya Operasional",fc={__name:"Index",setup(p){const s=ge(),m=$e(),o=T(!1),i=T(null),n=T(null),g=at(n),b=T(null),c=T(!1),u=T([]),f=T(!0),_=new Date().getFullYear(),y=new Date().getMonth()+1,S=[{label:"Semua Tahun",value:null},{label:`${_}`,value:_},...Ot(_-2,_-1).reverse()],q=[{value:null,label:"Semua Bulan"},...Dt()],{costCategoryOptions:x}=So(s.props.categories),D=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...x],{accountOptions:K}=ls(s.props.finance_accounts),R=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...K],U=De({search:"",finance_account_id:"all",category_id:"all",year:_,month:y,...Le()}),O=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),F=[{name:"code",label:m.screen.lt.md?"Item":"Kode",field:"code",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{h()});const B=A=>st({message:`Hapus Biaya ${A.code}?`,url:route("admin.operational-cost.delete",A.id),fetchItemsCallback:h,loading:f}),h=(A=null)=>{Ke({pagination:O,filter:U,props:A,rows:u,url:route("admin.operational-cost.data"),loading:f,tableRef:i})},j=()=>{h()},P=ee(()=>m.screen.gt.sm?F:F.filter(A=>A.name==="code"||A.name==="action"));Ne(()=>U.year,A=>{A===null&&(U.month=null)});const $=A=>{b.value=A,c.value=!0};return(A,z)=>{const V=X("i-head"),M=X("authenticated-layout");return d(),w(J,null,[e(V,{title:wl}),e(M,null,Fe({title:a(()=>[v(r(wl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:z[0]||(z[0]=ae=>o.value=!o.value)},null,8,["icon"]),A.$can("admin.operational-cost.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:z[1]||(z[1]=ae=>l(Z).get(A.route("admin.operational-cost.add")))})):k("",!0)]),default:a(()=>[t("div",ic,[e(je,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:O.value,"onUpdate:pagination":z[8]||(z[8]=ae=>O.value=ae),filter:U.search,loading:f.value,columns:P.value,rows:u.value,"rows-per-page-options":[10,25,50],style:He({height:l(g)}),onRequest:h,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:ae,message:ue,filter:ie})=>[t("div",dc,[t("span",null,r(ue)+" "+r(ie?" with term "+ie:""),1)])]),body:a(ae=>[e(Re,{props:ae,class:"cursor-pointer",onClick:G(ue=>l(Z).get(A.route("admin.operational-cost.detail",{id:ae.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"code",props:ae,class:"wrap-column"},{default:a(()=>[l(m).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[v(" Kode: ")],64)),v(" "+r(ae.row.code)+" ",1),l(m).screen.gt.sm?k("",!0):(d(),w(J,{key:1},[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ra)(ae.row.date)),1)]),ae.row.finance_account?(d(),w("div",uc,[e(C,{name:"wallet",class:"inline-icon"}),v(" "+r(ae.row.finance_account.name),1)])):k("",!0),ae.row.category?(d(),w("div",mc,[e(C,{name:"category",class:"inline-icon"}),v(" "+r(ae.row.category.name),1)])):k("",!0),e(Se,{icon:"description",text:ae.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(C,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(H)(ae.row.amount)),1)]),e(Se,{icon:"notes",text:ae.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(Y,{key:"date",props:ae,class:"wrap-column"},{default:a(()=>[v(r(l(ra)(ae.row.date)),1)]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:ae,class:"wrap-column"},{default:a(()=>[v(r(ae.row.finance_account?ae.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(Y,{key:"category_id",props:ae},{default:a(()=>[ae.row.category?(d(),w("div",cc,r(ae.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"description",props:ae},{default:a(()=>[e(Se,{text:ae.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:ae},{default:a(()=>[v(r(l(H)(ae.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:ae},{default:a(()=>[e(Se,{text:ae.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:ae},{default:a(()=>[t("div",pc,[e(E,{icon:"image",color:"primary",dense:"",flat:"",disable:ae.row.image_path===null||ae.row.image_path==="",onClick:G(ue=>$(ae.row.image_path),["stop"])},{default:a(()=>[ae.row.image_path!=null?(d(),I(Kt,{key:0},{default:a(()=>z[10]||(z[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),A.$can("admin.operational-cost.add")||A.$can("admin.operational-cost.edit")||A.$can("admin.operational-cost.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:z[7]||(z[7]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[A.$can("admin.operational-cost.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(ue=>l(Z).get(A.route("admin.operational-cost.duplicate",ae.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(N,null,{default:a(()=>z[11]||(z[11]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),A.$can("admin.operational-cost.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(ue=>l(Z).get(A.route("admin.operational-cost.edit",ae.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>z[12]||(z[12]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),A.$can("admin.operational-cost.delete")?te((d(),I(oe,{key:2,onClick:G(ue=>B(ae.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>z[13]||(z[13]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(va,{modelValue:c.value,"onUpdate:modelValue":z[9]||(z[9]=ae=>c.value=ae),imageUrl:`/${b.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",rc,[e(ce,{modelValue:U.year,"onUpdate:modelValue":[z[2]||(z[2]=ae=>U.year=ae),j],options:S,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:U.month,"onUpdate:modelValue":[z[3]||(z[3]=ae=>U.month=ae),j],options:q,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:U.year===null},null,8,["modelValue","disable"]),e(ce,{modelValue:U.category_id,"onUpdate:modelValue":[z[4]||(z[4]=ae=>U.category_id=ae),j],options:D,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:U.finance_account_id,"onUpdate:modelValue":[z[5]||(z[5]=ae=>U.finance_account_id=ae),j],options:R,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:U.search,"onUpdate:modelValue":z[6]||(z[6]=ae=>U.search=ae),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},gc=Object.freeze(Object.defineProperty({__proto__:null,default:fc},Symbol.toStringTag,{value:"Module"})),bc={class:"q-gutter-sm"},vc={class:"col col-md-6 q-pa-xs"},_c={__name:"Editor",setup(p){const s=$e(),m=ge(),o=(m.props.data.id?"Edit":"Tambah")+" Kategori Produk",i=Qe({id:m.props.data.id,name:m.props.data.name,description:m.props.data.description}),n=()=>rt({form:i,url:route("admin.product-category.save")});return(g,b)=>{const c=X("i-head"),u=X("authenticated-layout");return d(),w(J,null,[e(c,{title:o}),e(u,{"show-drawer-button":!l(s).screen.lt.md},Fe({title:a(()=>[v(r(o))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",vc,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>l(i).id=f)},null,512),[[yt,l(i).id]]),e(se,{autofocus:"",modelValue:l(i).name,"onUpdate:modelValue":b[2]||(b[2]=f=>l(i).name=f),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(i).errors.name,disable:l(i).processing,"error-message":l(i).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(i).description,"onUpdate:modelValue":b[3]||(b[3]=f=>l(i).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.description,"error-message":l(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:b[4]||(b[4]=f=>l(i).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",bc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},yc=Object.freeze(Object.defineProperty({__proto__:null,default:_c},Symbol.toStringTag,{value:"Module"})),kc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},wc={class:"q-pa-xs"},hc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},$c={key:0,class:"text-grey-8"},xc={class:"flex justify-end"},hl="Kategori Produk",Sc={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=De({search:"",...Le()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{y()});const _=q=>st({message:`Hapus Kategori ${q.name}?`,url:route("admin.product-category.delete",q.id),fetchItemsCallback:y,loading:i}),y=(q=null)=>{Ke({pagination:u,filter:c,props:q,rows:o,url:route("admin.product-category.data"),loading:i,tableRef:n})},S=ee(()=>s.screen.gt.sm?f:f.filter(q=>q.name==="name"||q.name==="action"));return(q,x)=>{const D=X("i-head"),K=X("authenticated-layout");return d(),w(J,null,[e(D,{title:hl}),e(K,null,Fe({title:a(()=>[v(r(hl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=R=>m.value=!m.value)},null,8,["icon"]),q.$can("admin.product-category.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=R=>l(Z).get(q.route("admin.product-category.add")))})):k("",!0)]),default:a(()=>[t("div",wc,[e(je,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":x[4]||(x[4]=R=>u.value=R),filter:c.search,loading:i.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:R,message:U,filter:O})=>[t("div",hc,[t("span",null,r(U)+" "+r(O?" with term "+O:""),1)])]),body:a(R=>[e(Re,{props:R},{default:a(()=>[e(Y,{key:"name",props:R,class:"wrap-column"},{default:a(()=>[v(r(R.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[R.row.description?(d(),w("div",$c,[e(C,{name:"description"}),v(" "+r(R.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"description",props:R,class:"wrap-column"},{default:a(()=>[v(r(R.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:R},{default:a(()=>[t("div",xc,[q.$can("admin.product-category.add")||q.$can("admin.product-category.edit")||q.$can("admin.product-category.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[q.$can("admin.product-category.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(U=>l(Z).get(q.route("admin.product-category.duplicate",R.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(N,null,{default:a(()=>x[5]||(x[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),q.$can("admin.product-category.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(U=>l(Z).get(q.route("admin.product-category.edit",R.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>x[6]||(x[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),q.$can("admin.product-category.delete")?te((d(),I(oe,{key:2,onClick:G(U=>_(R.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>x[7]||(x[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",kc,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":x[2]||(x[2]=R=>c.search=R),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Vc=Object.freeze(Object.defineProperty({__proto__:null,default:Sc},Symbol.toStringTag,{value:"Module"})),qc={class:"detail"},Cc={key:0},Tc={key:1},Pc={key:2},Rc={class:"detail"},Ic={class:"detail"},Oc={key:0},Dc={key:0},Uc={key:0},jc={key:0},Ec={class:"detail"},Ac={key:0,class:"q-pt-md"},Vo={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(p){const s=p;$e();const m=i=>`${i>0?H((i-s.product.cost)/s.product.cost*100,2):0}%`,o=()=>{st({message:`Hapus Produk ${s.product.name}?`,url:route("admin.product.delete",s.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(i,n)=>{const g=X("i-link");return d(),w("div",null,[n[39]||(n[39]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",qc,[t("tbody",null,[t("tr",null,[n[1]||(n[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),n[2]||(n[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(p.product.name),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"Deskirpsi",-1)),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,r(p.product.description),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Barcode",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(p.product.barcode),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Jenis Produk",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.PRODUCT_TYPES[p.product.type]),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Kategori",-1)),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,r(p.product.category?p.product.category.name:"--Tidak memiliki kategori--"),1)]),i.$can("admin.product:view-supplier")?(d(),w("tr",Cc,[n[11]||(n[11]=t("td",null,"Supplier",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[p.product.supplier?(d(),I(g,{key:0,href:i.route("admin.supplier.detail",{id:p.product.supplier.id})},{default:a(()=>[v(r(p.product.supplier.name),1)]),_:1},8,["href"])):(d(),w(J,{key:1},[v(r("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[n[13]||(n[13]=t("td",null,"Status",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,r(p.product.active?"Aktif":"Tidak Aktif"),1)]),p.product.created_at?(d(),w("tr",Tc,[n[16]||(n[16]=t("td",null,"Dibuat Oleh",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[p.product.creator?(d(),w(J,{key:0},[e(g,{href:i.route("admin.user.detail",{id:p.product.creator})},{default:a(()=>[v(r(p.product.creator.username),1)]),_:1},8,["href"]),n[15]||(n[15]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(p.product.created_at)),1)])])):k("",!0),p.product.updater?(d(),w("tr",Pc,[n[19]||(n[19]=t("td",null,"Diperbarui oleh",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,[p.product.updater?(d(),w(J,{key:0},[e(g,{href:i.route("admin.user.detail",{id:p.product.updater})},{default:a(()=>[v(r(p.product.updater.username),1)]),_:1},8,["href"]),n[18]||(n[18]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(p.product.updated_at)),1)])])):k("",!0)])]),n[40]||(n[40]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",Rc,[t("tbody",null,[t("tr",null,[n[21]||(n[21]=t("td",{style:{width:"120px"}},"Stok",-1)),n[22]||(n[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(H)(p.product.stock))+" "+r(p.product.uom),1)]),t("tr",null,[n[23]||(n[23]=t("td",null,"Stok Minimum",-1)),n[24]||(n[24]=t("td",null,":",-1)),t("td",null,r(l(H)(p.product.min_stock))+" "+r(p.product.uom),1)]),t("tr",null,[n[25]||(n[25]=t("td",null,"Barcode",-1)),n[26]||(n[26]=t("td",null,":",-1)),t("td",null,r(p.product.barcode),1)])])]),n[41]||(n[41]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",Ic,[t("tbody",null,[t("tr",null,[n[27]||(n[27]=t("td",null,"Opsi Harga",-1)),n[28]||(n[28]=t("td",null,":",-1)),t("td",null,r(p.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),i.$can("admin.product:view-cost")?(d(),w("tr",Oc,[n[29]||(n[29]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),n[30]||(n[30]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(l(H)(p.product.cost)),1)])):k("",!0),t("tr",null,[n[31]||(n[31]=t("td",null,"Harga Eceran",-1)),n[32]||(n[32]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(l(H)(p.product.price_1))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",Dc," ("+r(m(p.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[n[33]||(n[33]=t("td",null,"Harga Partai",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(l(H)(p.product.price_2))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",Uc," ("+r(m(p.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[n[35]||(n[35]=t("td",null,"Harga Grosir",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(l(H)(p.product.price_3))+" ",1),i.$can("admin.product:view-cost")?(d(),w("span",jc," ("+r(m(p.product.price_3))+") ",1)):k("",!0)])])])]),n[42]||(n[42]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",Ec,[t("tbody",null,[t("tr",null,[n[37]||(n[37]=t("td",{style:{width:"120px"}},"Catatan",-1)),n[38]||(n[38]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(p.product.notes),1)])])]),i.$can("admin.product.delete")?(d(),w("div",Ac,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:n[0]||(n[0]=b=>o())})])):k("",!0)])}}},Bc=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Mc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Nc={key:0},qo={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(p){const s=p,m=$e(),o=T([]),i=T(!0),n=De({...Le()}),g=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let b=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"quantity_before",label:"Stok Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Stok Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{c()});const c=(f=null)=>Ke({pagination:g,filter:n,props:f,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:s.productId}}),loading:i}),u=ee(()=>m.screen.lt.sm?b.filter(f=>f.name==="id"||f.name==="quantity"):b);return(f,_)=>(d(),I(je,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:g.value,"onUpdate:pagination":_[0]||(_[0]=y=>g.value=y),filter:n.search,loading:i.value,columns:u.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:c,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:q})=>[t("div",Mc,[t("span",null,r(S)+" "+r(q?" with term "+q:""),1)])]),body:a(y=>[e(Re,{props:y},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(y.row.created_at)),1)]),t("div",null,[e(gt,null,{default:a(()=>[v(r(f.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type]),1)]),_:2},1024)]),l(m).screen.lt.sm?(d(),w(J,{key:0},[t("div",{class:xe(y.row.quantity>0?"text-positive":"text-negative")},[e(C,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(l(H)(y.row.quantity_before))+" "+r(y.row.uom)+"  "+r(l(H)(y.row.quantity_after))+" "+r(y.row.uom),1)],2),e(Se,{text:y.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"created_at",props:y},{default:a(()=>[v(r(l(ve)(y.row.created_at)),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:y},{default:a(()=>[v(r(f.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type])+" ",1),y.row.ref?(d(),w("span",Nc,r(y.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"quantity_before",props:y},{default:a(()=>[v(r(l(H)(y.row.quantity_before)),1)]),_:2},1032,["props"]),e(Y,{key:"quantity",props:y,class:xe(y.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[v(r(l($t)(y.row.quantity))+" ",1),l(m).screen.lt.sm?(d(),w(J,{key:0},[v(r(y.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Y,{key:"quantity_after",props:y},{default:a(()=>[v(r(l(H)(y.row.quantity_after)),1)]),_:2},1032,["props"]),e(Y,{key:"uom",props:y},{default:a(()=>[v(r(y.row.uom),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Fc=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),zc={class:"q-gutter-sm"},Lc={class:"q-gutter-sm"},Kc={class:"row justify-center"},Hc={class:"col col-lg-6 q-pa-xs"},Wc={class:"row"},Yc={__name:"Detail",setup(p){const s=ge(),m=`Rincian Produk #${s.props.data.id}`,o=T("main");return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return d(),w(J,null,[e(g,{title:m}),e(b,{"show-drawer-button":!0},{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",zc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$goBack())})])]),"right-button":a(()=>[t("div",Lc,[i.$can("admin.product.edit")?(d(),I(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[1]||(n[1]=c=>l(Z).get(i.route("admin.product.edit",{id:l(s).props.data.id}))),title:"Edit produk"})):k("",!0),i.$can("admin.product.add")?(d(),I(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[2]||(n[2]=c=>l(Z).get(i.route("admin.product.duplicate",{id:l(s).props.data.id}))),title:"Duplikat produk"})):k("",!0),i.$can("admin.product.add")?(d(),I(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:n[3]||(n[3]=c=>l(Z).get(i.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:a(()=>[t("div",Kc,[t("div",Hc,[t("div",Wc,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(qt,{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=c=>o.value=c),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Info Utama"}),e(it,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(Ct,{modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=c=>o.value=c),animated:""},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(Vo,{product:l(s).props.data},null,8,["product"])]),_:1}),e(nt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(qo,{"product-id":l(s).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},Qc=Object.freeze(Object.defineProperty({__proto__:null,default:Yc},Symbol.toStringTag,{value:"Module"})),Qt=Et({name:"QBtnToggle",props:{...lo,modelValue:{required:!0},options:{type:Array,required:!0,validator:p=>p.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(p,{slots:s,emit:m}){const o=ee(()=>p.options.find(y=>y.value===p.modelValue)!==void 0),i=ee(()=>({type:"hidden",name:p.name,value:p.modelValue})),n=ss(i),g=ee(()=>os(p)),b=ee(()=>({rounded:p.rounded,dense:p.dense,...g.value})),c=ee(()=>p.options.map((y,S)=>{const{attrs:q,value:x,slot:D,...K}=y;return{slot:D,props:{key:S,"aria-pressed":x===p.modelValue?"true":"false",...q,...K,...b.value,disable:p.disable===!0||K.disable===!0,color:x===p.modelValue?f(K,"toggleColor"):f(K,"color"),textColor:x===p.modelValue?f(K,"toggleTextColor"):f(K,"textColor"),noCaps:f(K,"noCaps")===!0,noWrap:f(K,"noWrap")===!0,size:f(K,"size"),padding:f(K,"padding"),ripple:f(K,"ripple"),stack:f(K,"stack")===!0,stretch:f(K,"stretch")===!0,onClick(R){u(x,y,R)}}}}));function u(y,S,q){p.readonly!==!0&&(p.modelValue===y?p.clearable===!0&&(m("update:modelValue",null,null),m("clear")):m("update:modelValue",y,S),m("click",q))}function f(y,S){return y[S]===void 0?p[S]:y[S]}function _(){const y=c.value.map(S=>Ce(E,S.props,S.slot!==void 0?s[S.slot]:void 0));return p.name!==void 0&&p.disable!==!0&&o.value===!0&&n(y,"push"),to(s.default,y)}return()=>Ce(ns,{class:"q-btn-toggle",...g.value,rounded:p.rounded,stretch:p.stretch,glossy:p.glossy,spread:p.spread},_)}});function Ma(p,s=!1){const m=p.map(g=>({value:g.id,label:g.name})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...m]:m,i=T([...o]);return{filteredCategories:i,filterCategories:(g,b)=>{const c=g.toLowerCase();b(()=>{i.value=o.filter(u=>u.label.toLowerCase().includes(c))})},categories:o}}function Na(p,s=!1){const m=p.map(g=>({value:g.id,label:g.name+" ("+g.code+")"})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...m]:m,i=T([...o]);return{filteredSuppliers:i,filterSupplierFn:(g,b)=>{const c=g.toLowerCase();b(()=>{i.value=o.filter(u=>u.label.toLowerCase().includes(c))})},suppliers:o}}const Pa=Aa({__name:"PercentInput",props:{modelValue:{type:[Number,null],required:!1,default:0},label:{type:[String,void 0],required:!1,default:void 0},locale:{type:String,default:"id-ID"},outlined:{type:Boolean,default:!1},allowNegative:{type:Boolean,default:!1},maxDecimals:{type:Number,default:0},lazyRules:{type:[Boolean,String],default:!1},disable:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(p,{expose:s,emit:m}){const o=T(null),i=rs(),n=T(!1);s({focus:()=>{o.value&&o.value.focus()},select:()=>{var R;if((R=o.value)!=null&&R.$el){const U=o.value.$el.querySelector("input");U==null||U.select()}}});const g=p,b=m,c=T(""),u=R=>{const O=new Intl.NumberFormat(R).format(123456789e-2),F=O.includes(",")?",":".",B=O.replace(/\d/g,"").replace(F,"").charAt(0);return{decimalSeparator:F,thousandSeparator:B}},{decimalSeparator:f,thousandSeparator:_}=u(g.locale),y=R=>{if(R==null||isNaN(R)){if(g.maxDecimals>0)return"";R=0}return new Intl.NumberFormat(g.locale,{minimumFractionDigits:g.maxDecimals,maximumFractionDigits:g.maxDecimals}).format(R)};Ne(()=>g.modelValue,R=>{n.value||(c.value=y(R))},{immediate:!0});const S=R=>{const U=R.replace(/[^0-9.,-]+/g,"").replace(new RegExp(`\\${_}`,"g"),"").replace(new RegExp(`\\${f}`,"g"),".");if(U===""||U==="-")return null;const O=parseFloat(U);return isNaN(O)?null:parseFloat(O.toFixed(g.maxDecimals))},q=()=>{n.value=!0,S(c.value),ut(()=>{var R;(R=o.value)==null||R.select()})},x=R=>{c.value=R},D=()=>{n.value=!1;const R=S(c.value);b("update:modelValue",R),c.value=y(R)},K=R=>{const U=["Backspace","Delete","Tab","ArrowLeft","ArrowRight","Home","End","Shift"];R.ctrlKey||R.metaKey||R.key>="0"&&R.key<="9"||(R.key===f||R.key===_)&&!c.value.includes(f)||g.allowNegative&&R.key==="-"&&R.target.selectionStart===0||U.includes(R.key)||R.preventDefault()};return(R,U)=>(d(),I(l(se),{ref_key:"qInputRef",ref:o,"model-value":c.value,label:g.label,outlined:g.outlined,"onUpdate:modelValue":x,onBlur:D,onFocus:q,onKeydown:K,"lazy-rules":g.lazyRules,disable:g.disable,error:g.error,rules:g.rules,"error-message":g.errorMessage},Fe({_:2},[l(i).prepend?{name:"prepend",fn:a(()=>[Pt(R.$slots,"prepend")]),key:"0"}:void 0,l(i).append?{name:"append",fn:a(()=>[Pt(R.$slots,"append")]),key:"1"}:void 0]),1032,["model-value","label","outlined","lazy-rules","disable","error","rules","error-message"]))}}),Jc=Aa({__name:"BarcodeInput",props:{modelValue:{}},emits:["update:modelValue","scan-success"],setup(p,{emit:s}){const m=p,o=s,i=$e(),n=T(m.modelValue);Ne(()=>m.modelValue,K=>{K!==n.value&&(n.value=K)});const g=K=>{n.value=K,o("update:modelValue",K)},b=T(null),c=T(!1),u=T(!1);let f=null,_=null,y=null;he(async()=>{if("BarcodeDetector"in window){c.value=!0;try{const K=await window.BarcodeDetector.getSupportedFormats();_=new BarcodeDetector({formats:K})}catch(K){console.warn("BarcodeDetector init error:",K),c.value=!1}}}),aa(()=>x());function S(){if(!c.value){i.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}u.value?x():q()}async function q(){if(_)try{u.value=!0,f=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),b.value&&(b.value.srcObject=f),await new Promise(K=>setTimeout(K,300)),D()}catch(K){u.value=!1,i.notify({type:"negative",message:`Gagal akses kamera: ${K.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function x(){u.value=!1,y&&cancelAnimationFrame(y),f&&(f.getTracks().forEach(K=>K.stop()),f=null)}async function D(){var K;if(!(!b.value||!_||!u.value)){try{const R=await _.detect(b.value);if(R.length>0){const U=R[0].rawValue;n.value=U,o("update:modelValue",U),o("scan-success",U),(K=navigator.vibrate)==null||K.call(navigator,100),i.notify({type:"positive",message:`Barcode terdeteksi: ${U}`,timeout:1e3}),x();return}}catch(R){console.warn("Detection error:",R)}y=requestAnimationFrame(D)}}return(K,R)=>(d(),w("div",null,[e(se,Oa(K.$attrs,{"model-value":n.value,"onUpdate:modelValue":g,disable:u.value||K.$attrs.disable,loading:u.value||K.$attrs.loading}),Fe({append:a(()=>[c.value&&!u.value&&!n.value?(d(),I(C,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:S},{default:a(()=>[e(Kt,null,{default:a(()=>R[1]||(R[1]=[v("Scan Barcode")])),_:1})]),_:1})):u.value?(d(),I(no,{key:1,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0)]),_:2},[Ue(K.$slots,(U,O)=>({name:O,fn:a(F=>[O!=="append"?Pt(K.$slots,O,Ba(Oa({key:0},F)),void 0,!0):k("",!0)])}))]),1040,["model-value","disable","loading"]),e(lt,{modelValue:u.value,"onUpdate:modelValue":R[0]||(R[0]=U=>u.value=U),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(pe,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(le,{class:"text-center q-pb-none"},{default:a(()=>R[2]||(R[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(le,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:b,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(tt,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(E,{label:"Batal Scan",color:"negative",icon:"close",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Gc=vt(Jc,[["__scopeId","data-v-38d5a1a0"]]),Xc={class:"q-gutter-sm"},Zc={class:"col col-md-6 q-pa-xs"},ep={class:"row q-gutter-md"},tp={class:"col"},ap={class:"col"},lp={class:"row q-gutter-md"},op={class:"q-mt-md full-width"},np={__name:"Editor",setup(p){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Produk",o=ot(window.CONSTANTS.PRODUCT_TYPES),i=T(!1),n=Qe({id:s.props.data.id,category_id:s.props.data.category_id,supplier_id:s.props.data.supplier_id,type:s.props.data.type||"",name:s.props.data.name||"",description:s.props.data.description||"",stock:parseFloat(s.props.data.stock)||0,min_stock:parseFloat(s.props.data.min_stock)||0,max_stock:parseFloat(s.props.data.max_stock)||0,uom:s.props.data.uom||"",barcode:s.props.data.barcode||"",cost:parseFloat(s.props.data.cost)||0,price_1:parseFloat(s.props.data.price_1)||0,price_2:parseFloat(s.props.data.price_2)||0,price_3:parseFloat(s.props.data.price_3)||0,price_1_markup:parseFloat(s.props.data.price_1_markup),price_2_markup:parseFloat(s.props.data.price_2_markup),price_3_markup:parseFloat(s.props.data.price_3_markup),price_1_option:s.props.data.price_1_option??"price",price_2_option:s.props.data.price_2_option??"price",price_3_option:s.props.data.price_3_option??"price",active:!!s.props.data.active,price_editable:!!s.props.data.price_editable,notes:s.props.data.notes||""}),g=()=>rt({form:n,url:route("admin.product.save")});function b(x){return s.props.data.id&&s.props.data.supplier&&(x.some(K=>K.id===s.props.data.supplier_id)||x.unshift(s.props.data.supplier)),x}const{filteredCategories:c,filterCategories:u}=Ma(s.props.categories),{filteredSuppliers:f,filterSupplierFn:_}=Na(b(s.props.suppliers)),y=(x,D)=>(x=parseFloat(x)||0,D=parseFloat(D)||0,D<=0?x>0?100:0:(x-D)/D*100),S=(x,D)=>{x=parseFloat(x)||0,D=parseFloat(D)||0;const K=x*(1+D/100);return Math.round(K)};Ne(()=>n.cost,x=>{i.value||(i.value=!0,n.price_1_option=="markup"?n.price_1=S(x,n.price_1_markup):n.price_1_markup=y(n.price_1,x),n.price_2_option=="markup"?n.price_2=S(x,n.price_2_markup):n.price_2_markup=y(n.price_2,x),n.price_3_option=="markup"?n.price_3=S(x,n.price_3_markup):n.price_3_markup=y(n.price_3,x),i.value=!1)},{immediate:!1});const q=x=>{const D=`price_${x}`,K=`price_${x}_markup`,R=`price_${x}_option`;Ne(()=>n[D],U=>{if(n[R]=="markup"||i.value)return;i.value=!0;const O=y(U,n.cost);n[K]=parseFloat(O.toFixed(2)),i.value=!1},{deep:!1}),Ne(()=>n[K],U=>{n[R]!="price"&&(i.value||(i.value=!0,n[D]=S(n.cost,U),i.value=!1))},{deep:!1})};for(let x=1;x<=3;x++)q(x);return he(()=>{for(let x=1;x<=3;x++)n[`price_${x}_markup`]=y(n[`price_${x}`],n.cost)}),(x,D)=>{const K=X("i-head"),R=X("authenticated-layout");return d(),w(J,null,[e(K,{title:m}),e(R,{"show-drawer-button":!0},{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",Xc,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:D[0]||(D[0]=U=>x.$goBack())})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(n).processing,onClick:D[1]||(D[1]=U=>g()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Zc,[e(Je,{class:"row",onKeydown:D[25]||(D[25]=Jt(G(()=>{},["prevent"]),["enter"])),onSubmit:G(g,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":D[2]||(D[2]=U=>l(n).id=U)},null,512),[[yt,l(n).id]]),D[32]||(D[32]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(ce,{disabled:!!l(n).id,autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":D[3]||(D[3]=U=>l(n).type=U),class:"custom-select",options:l(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["disabled","modelValue","options"]),e(se,{modelValue:l(n).name,"onUpdate:modelValue":D[4]||(D[4]=U=>l(n).name=U),modelModifiers:{trim:!0},label:"Kode / Nama Produk","lazy-rules":"",error:!!l(n).errors.name,disable:l(n).processing,"error-message":l(n).errors.name,rules:[U=>U&&U.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(n).description,"onUpdate:modelValue":D[5]||(D[5]=U=>l(n).description=U),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi (Opsional)","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.description,"error-message":l(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(n).category_id,"onUpdate:modelValue":D[6]||(D[6]=U=>l(n).category_id=U),label:"Kategori (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(c),"map-options":"","emit-value":"",onFilter:l(u),"option-label":"label","option-value":"value",error:!!l(n).errors.category_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(N,null,{default:a(()=>D[26]||(D[26]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),x.$can("admin.product:view-supplier")?(d(),I(ce,{key:0,modelValue:l(n).supplier_id,"onUpdate:modelValue":D[7]||(D[7]=U=>l(n).supplier_id=U),label:"Supplier Default (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(f),"map-options":"","emit-value":"",onFilter:l(_),"option-label":"label","option-value":"value",error:!!l(n).errors.supplier_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(N,null,{default:a(()=>D[27]||(D[27]=[v("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(Rt,{class:"q-mt-md",modelValue:l(n).active,"onUpdate:modelValue":D[8]||(D[8]=U=>l(n).active=U),disable:l(n).processing,label:"Produk Aktif (Ditampilkan)"},null,8,["modelValue","disable"]),D[33]||(D[33]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",ep,[t("div",tp,[e(se,{modelValue:l(n).uom,"onUpdate:modelValue":D[9]||(D[9]=U=>l(n).uom=U),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!l(n).errors.uom,disable:l(n).processing,"error-message":l(n).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])]),t("div",ap,[e(Gc,{modelValue:l(n).barcode,"onUpdate:modelValue":D[10]||(D[10]=U=>l(n).barcode=U),modelModifiers:{trim:!0},label:"Barcode"},null,8,["modelValue"])])]),t("div",lp,[e(Me,{modelValue:l(n).stock,"onUpdate:modelValue":D[11]||(D[11]=U=>l(n).stock=U),label:"Stok Aktual",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.stock,errorMessage:l(n).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Me,{modelValue:l(n).min_stock,"onUpdate:modelValue":D[12]||(D[12]=U=>l(n).min_stock=U),label:"Stok Minimum",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.min_stock,errorMessage:l(n).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),D[34]||(D[34]=t("div",{class:"text-subtitle1 q-pt-lg"},"Harga & Modal",-1)),x.$can("admin.product:view-cost")?(d(),I(Me,{key:1,modelValue:l(n).cost,"onUpdate:modelValue":D[13]||(D[13]=U=>l(n).cost=U),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.cost,errorMessage:l(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("table",op,[D[31]||(D[31]=t("thead",{class:"text-grey-6"},[t("tr",null,[t("th",{style:{width:"25%"}},"Harga"),t("th",{style:{width:"25%"}},"Markup (%)"),t("th"),t("th",{style:{width:"25%"}},"Harga Jual (Rp)")])],-1)),t("tbody",null,[t("tr",null,[D[28]||(D[28]=t("td",{class:"no-wrap"},"Harga Eceran",-1)),t("td",null,[e(Pa,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_1_markup,"onUpdate:modelValue":D[14]||(D[14]=U=>l(n).price_1_markup=U),lazyRules:"",readonly:l(n).price_1_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_1_markup,errorMessage:l(n).errors.price_1_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Qt,{modelValue:l(n).price_1_option,"onUpdate:modelValue":D[15]||(D[15]=U=>l(n).price_1_option=U),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Me,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_1,"onUpdate:modelValue":D[16]||(D[16]=U=>l(n).price_1=U),lazyRules:"",disable:l(n).processing,readonly:l(n).price_1_option=="markup",error:!!l(n).errors.price_1,errorMessage:l(n).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])]),t("tr",null,[D[29]||(D[29]=t("td",{class:"no-wrap"},"Harga Partai",-1)),t("td",null,[e(Pa,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_2_markup,"onUpdate:modelValue":D[17]||(D[17]=U=>l(n).price_2_markup=U),lazyRules:"",readonly:l(n).price_2_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_2_markup,errorMessage:l(n).errors.price_2_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Qt,{modelValue:l(n).price_2_option,"onUpdate:modelValue":D[18]||(D[18]=U=>l(n).price_2_option=U),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Me,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_2,"onUpdate:modelValue":D[19]||(D[19]=U=>l(n).price_2=U),lazyRules:"",readonly:l(n).price_2_option=="markup",disable:l(n).processing,error:!!l(n).errors.price_2,errorMessage:l(n).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","readonly","disable","error","errorMessage"])])]),t("tr",null,[D[30]||(D[30]=t("td",{class:"no-wrap"},"Harga Grosir",-1)),t("td",null,[e(Pa,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_3_markup,"onUpdate:modelValue":D[20]||(D[20]=U=>l(n).price_3_markup=U),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option!="markup",error:!!l(n).errors.price_3_markup,errorMessage:l(n).errors.price_3_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","disable","readonly","error","errorMessage"])]),t("td",null,[e(Qt,{modelValue:l(n).price_3_option,"onUpdate:modelValue":D[21]||(D[21]=U=>l(n).price_3_option=U),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Me,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_3,"onUpdate:modelValue":D[22]||(D[22]=U=>l(n).price_3=U),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option=="markup",error:!!l(n).errors.price_3,errorMessage:l(n).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])])])]),e(Rt,{class:"q-mt-sm",modelValue:l(n).price_editable,"onUpdate:modelValue":D[23]||(D[23]=U=>l(n).price_editable=U),disable:l(n).processing,label:"Harga dapat diubah saat penjualan"},null,8,["modelValue","disable"]),e(se,{modelValue:l(n).notes,"onUpdate:modelValue":D[24]||(D[24]=U=>l(n).notes=U),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},sp=Object.freeze(Object.defineProperty({__proto__:null,default:np},Symbol.toStringTag,{value:"Module"})),rp={class:"q-gutter-sm"},ip={class:"col col-md-6 q-pa-xs"},$l="Import Produk",dp={__name:"Import",setup(p){const s=Qe({csv_file:null}),m=()=>{s.post(route("admin.product.import"),{onSuccess:()=>{s.reset()},onError:()=>{Ye()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(J,null,[e(n,{title:$l}),e(g,{"show-drawer-button":!0},{title:a(()=>[v(r($l))]),"left-button":a(()=>[t("div",rp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$goBack())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",ip,[e(Je,{class:"row",onSubmit:G(m,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(yo,{modelValue:l(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>l(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:i[2]||(i[2]=b=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),I(Gt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),I(Gt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},up=Object.freeze(Object.defineProperty({__proto__:null,default:dp},Symbol.toStringTag,{value:"Module"})),mp={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},cp={class:"q-pa-xs"},pp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},fp={key:0},gp={key:1},bp={key:2},vp={key:3},_p={class:"flex justify-end"},yp={key:0},kp={key:1},wp={key:0},xl="Produk",hp={__name:"Index",setup(p){const s=ge(),m=T(null),o=T(null),i=at(o),n=T(!1),g=[...ot(window.CONSTANTS.PRODUCT_TYPES)],b=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],c=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],u=$e(),f=T(!1),_=T([]),y=T(!0),S=De({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...Le()}),q=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let x=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"action",align:"right"}];he(()=>{const $=new URLSearchParams(window.location.search).get("page");$&&(q.value.page=parseInt($)),K()});const D=P=>st({message:`Hapus Produk ${P.name}?`,url:route("admin.product.delete",P.id),fetchItemsCallback:K,loading:y}),K=(P=null)=>{Ke({pagination:q,filter:S,props:P,rows:_,url:route("admin.product.data"),loading:y,tableRef:m})},R=()=>{K()},{filteredCategories:U,filterCategories:O}=Ma(s.props.categories),{filteredSuppliers:F,filterSupplierFn:B}=Na(s.props.suppliers),h=ee(()=>{let P=[...x];return n.value||P.splice(2,1),u.screen.gt.sm?P:P.filter($=>$.name==="name"||$.name==="action")}),j=P=>{Z.get(route("admin.product.detail",P.row.id))};return(P,$)=>{const A=X("i-head"),z=X("authenticated-layout");return d(),w(J,null,[e(A,{title:xl}),e(z,null,Fe({title:a(()=>[v(r(xl))]),"right-button":a(()=>[e(E,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=V=>f.value=!f.value)},null,8,["icon"]),P.$can("admin.product.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=V=>l(Z).get(P.route("admin.product.add")))})):k("",!0),P.$can("admin.product.import")||P.$can("admin.product:view-cost")?(d(),I(E,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=G(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[P.$can("admin.product.send-price-list")?te((d(),I(oe,{key:0,clickable:"",onClick:$[2]||($[2]=G(V=>l(Z).get(P.route("admin.product.send-price-list")),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"send"})]),_:1}),e(N,null,{default:a(()=>$[14]||($[14]=[v("Kirim Daftar Harga")])),_:1})]),_:1})),[[ne],[fe]]):k("",!0),P.$can("admin.product.import")?te((d(),I(oe,{key:1,clickable:"",onClick:$[3]||($[3]=V=>n.value=!n.value)},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:n.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(N,null,{default:a(()=>[v(r(n.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[ne],[fe]]):k("",!0),P.$can("admin.product.import")?te((d(),I(oe,{key:2,clickable:"",onClick:$[4]||($[4]=G(V=>l(Z).get(P.route("admin.product.import")),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"csv"})]),_:1}),e(N,null,{default:a(()=>$[15]||($[15]=[v("Import")])),_:1})]),_:1})),[[ne],[fe]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",cp,[e(je,{ref_key:"tableRef",ref:m,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:q.value,"onUpdate:pagination":$[13]||($[13]=V=>q.value=V),filter:S.search,loading:y.value,columns:h.value,rows:_.value,"rows-per-page-options":[10,25,50],style:He({height:l(i)}),onRequest:K,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:V,message:M,filter:ae})=>[t("div",pp,[t("span",null,r(M)+" "+r(ae?" with term "+ae:""),1)])]),header:a(V=>[e(Re,{props:V},{default:a(()=>[e(ta,{"auto-width":""}),(d(!0),w(J,null,Ue(V.cols,M=>(d(),I(ta,{key:M.name,props:V},{default:a(()=>[v(r(M.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(V=>[e(Re,{props:V,class:xe([{inactive:!V.row.active},"cursor-pointer"]),onClick:M=>j(V)},{default:a(()=>[e(Y,{"auto-width":""},{default:a(()=>[e(E,{size:"sm",flat:"",round:"",dense:"",onClick:G(M=>V.expand=!V.expand,["stop"]),icon:V.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(Y,{key:"name",props:V,class:"wrap-column"},{default:a(()=>[v(r(V.row.name)+" ",1),l(u).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[V.row.type=="stocked"?(d(),w("div",fp,[e(C,{name:"cycle"}),v(" Stok: "+r(l(H)(V.row.stock))+" "+r(V.row.uom),1)])):k("",!0),n.value?(d(),w("div",gp,[e(C,{name:"money"}),v(" Modal: Rp. "+r(l(H)(V.row.cost)),1)])):k("",!0),t("div",null,[e(C,{name:"sell"}),v(" Eceran: Rp. "+r(l(H)(V.row.price_1)),1)]),V.row.price_2!=0?(d(),w("div",bp,[e(C,{name:"sell"}),v(" Partai: Rp. "+r(l(H)(V.row.price_2)),1)])):k("",!0),V.row.price_3!=0?(d(),w("div",vp,[e(C,{name:"sell"}),v(" Grosir: Rp. "+r(l(H)(V.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"stock",props:V,class:xe(["wrap-column",{"low-stock":V.row.type=="stocked"&&(Number(V.row.stock)==0||Number(V.row.stock)<Number(V.row.min_stock)),"over-stock":V.row.type=="stocked"&&Number(V.row.max_stock)&&Number(V.row.stock)>Number(V.row.max_stock)}])},{default:a(()=>[v(r(V.row.type=="stocked"?l(H)(V.row.stock)+" "+V.row.uom:"-"),1)]),_:2},1032,["props","class"]),(d(),I(Y,{key:"cost",props:V,class:"wrap-column"},{default:a(()=>[v(r(l(H)(V.row.cost)),1)]),_:2},1032,["props"])),e(Y,{key:"price_1",props:V,class:"wrap-column"},{default:a(()=>[v(r(l(H)(V.row.price_1)),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:V},{default:a(()=>[t("div",_p,[P.$can("admin.product.add")||P.$can("admin.product.edit")||P.$can("admin.product.delete")?(d(),I(E,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:$[12]||($[12]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"175px"}},{default:a(()=>[P.$can("admin.product.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(M=>l(Z).get(P.route("admin.product.duplicate",V.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(N,null,{default:a(()=>$[16]||($[16]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),P.$can("admin.product.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(M=>l(Z).get(P.route("admin.product.edit",V.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>$[17]||($[17]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),P.$can("admin.product.delete")?te((d(),I(oe,{key:2,onClick:G(M=>D(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>$[18]||($[18]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),te(e(Re,{props:V},{default:a(()=>[e(Y,{colspan:"100%"},{default:a(()=>[V.row.barcode?(d(),w("div",yp,[e(C,{class:"inline-icon",name:"barcode"}),v(" Barcode: "+r(V.row.barcode),1)])):k("",!0),V.row.category_id?(d(),w("div",kp,[e(C,{name:"category",class:"inline-icon"}),v(" Kategori: "+r(V.row.category.name),1)])):k("",!0),P.$can("admin.product:view-supplier")?(d(),w(J,{key:2},[V.row.supplier_id?(d(),w("div",wp,[e(C,{name:"local_shipping",class:"inline-icon"}),v(" Supplier: "+r(V.row.supplier.name),1)])):k("",!0)],64)):k("",!0),V.row.description?(d(),I(Se,{key:3,text:V.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),V.row.notes?(d(),I(Se,{key:4,text:V.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[so,V.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[f.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:a(()=>[t("div",mp,[e(ce,{modelValue:S.type,"onUpdate:modelValue":[$[6]||($[6]=V=>S.type=V),R],class:"custom-select col-xs-4 col-sm-2",options:g,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(ce,{modelValue:S.stock_status,"onUpdate:modelValue":[$[7]||($[7]=V=>S.stock_status=V),R],class:"custom-select col-xs-4 col-sm-2",options:c,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:S.status,"onUpdate:modelValue":[$[8]||($[8]=V=>S.status=V),R],class:"custom-select col-xs-4 col-sm-2",options:b,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:S.category_id,"onUpdate:modelValue":[$[9]||($[9]=V=>S.category_id=V),R],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(U),"map-options":"",dense:"","emit-value":"",onFilter:l(O),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),P.$can("admin.product:view-supplier")?(d(),I(ce,{key:0,modelValue:S.supplier_id,"onUpdate:modelValue":[$[10]||($[10]=V=>S.supplier_id=V),R],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(F),"map-options":"",dense:"","emit-value":"",onFilter:l(B),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:S.search,"onUpdate:modelValue":$[11]||($[11]=V=>S.search=V),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},$p=Object.freeze(Object.defineProperty({__proto__:null,default:hp},Symbol.toStringTag,{value:"Module"})),xp={class:"q-gutter-sm"},Sp={class:"col col-md-8 q-pa-xs"},Vp={class:"col-12 col-md-6"},qp={class:"col-12 col-md-6"},Cp={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},Tp={class:"q-gutter-sm"},Sl="Kirim Daftar Harga",Pp={__name:"SendPriceList",setup(p){const s=ge(),m=T(""),o=T(null),i=ee(()=>{var B;const F=new Map;return(B=s.props.products)==null||B.forEach(h=>{F.set(h.id,h)}),F}),n=ee(()=>{var B;const F=new Map;return(B=s.props.customers)==null||B.filter(h=>h.phone&&h.phone.trim()!=="").forEach(h=>{F.set(h.id,h)}),F}),g=ee(()=>{var F;return((F=s.props.customers)==null?void 0:F.map(B=>({value:B.id,label:B.name})))||[]}),b=ee(()=>{var F;return((F=s.props.products)==null?void 0:F.map(B=>({value:B.id,label:`${B.name}`})))||[]}),c=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],u=T(b.value),f=T(g.value),_=Qe({price_types:[],products:[],customers:[]});_.transform(F=>({customers:F.customers.map(B=>B.value),message:m.value}));const y=F=>F?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(F):"Rp. 0",S=F=>{const B=c.find(h=>h.value===F);return B?B.label:F},q=()=>{if(o.value){const F=o.value.$el.querySelector("textarea");if(F){F.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(B){console.error("Gagal menyalin teks ke clipboard:",B)}}}},x=ee(()=>{var B,h;if(((B=_.products)==null?void 0:B.length)===0||((h=_.price_types)==null?void 0:h.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let F=`*DAFTAR HARGA TERBARU*
`;return F+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,F+=`------------------------------

`,(_.products||[]).forEach(j=>{const P=i.value.get(j.value);P&&(F+=`*${P.name}*
`,(_.price_types||[]).forEach($=>{const A=S($),z=P[$],V=P.uom||"pcs";z!=null&&z>0&&(F+=`- ${A}: *${y(z)}* / ${V}
`)}),F+=`
`)}),F+=`------------------------------
`,F+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",F});Ne(x,F=>{m.value=F},{immediate:!0});const D=ee(()=>(_.customers||[]).map(F=>n.value.get(F.value)).filter(F=>F&&F.phone)),K=F=>{const B=m.value;let h=F.startsWith("0")?"62"+F.substring(1):F;h=h.replace(/[^0-9]/g,"");const j=encodeURIComponent(B);return`https://wa.me/${h}?text=${j}`},R=(F,B)=>{if(F===""){B(()=>{u.value=b.value});return}B(()=>{const h=F.toLowerCase();u.value=b.value.filter(j=>j.label.toLowerCase().indexOf(h)>-1)})},U=(F,B)=>{if(F===""){B(()=>{f.value=g.value});return}B(()=>{const h=F.toLowerCase();f.value=g.value.filter(j=>j.label.toLowerCase().indexOf(h)>-1)})},O=()=>{var F,B,h;if(((F=_.price_types)==null?void 0:F.length)===0||((B=_.products)==null?void 0:B.length)===0||((h=_.customers)==null?void 0:h.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}_.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{Ye()},onFinish:()=>{_.clearErrors()}})};return(F,B)=>{const h=X("i-head"),j=X("authenticated-layout");return d(),w(J,null,[e(h,{title:Sl}),e(j,{"show-drawer-button":!0},{title:a(()=>[v(r(Sl))]),"left-button":a(()=>[t("div",xp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:B[0]||(B[0]=P=>F.$goBack())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Sp,[e(Je,{class:"row q-col-gutter-xs",onSubmit:G(O,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[t("div",Vp,[e(pe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[B[10]||(B[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),B[11]||(B[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:l(_).products,"onUpdate:modelValue":B[1]||(B[1]=P=>l(_).products=P),options:u.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.products,"error-message":l(_).errors.products,loading:l(_).processing,"use-input":"",onFilter:R,onClear:B[2]||(B[2]=P=>l(_).products=[]),"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(N,{class:"text-grey"},{default:a(()=>B[8]||(B[8]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:l(_).price_types,"onUpdate:modelValue":B[3]||(B[3]=P=>l(_).price_types=P),options:c,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.price_types,"error-message":l(_).errors.price_types,loading:l(_).processing,multiple:"","use-chips":"",clearable:"",onClear:B[4]||(B[4]=P=>l(_).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:l(_).customers,"onUpdate:modelValue":B[5]||(B[5]=P=>l(_).customers=P),options:f.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.customers,"error-message":l(_).errors.customers,loading:l(_).processing,"use-input":"",onFilter:U,onClear:B[6]||(B[6]=P=>l(_).customers=[]),"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(N,{class:"text-grey"},{default:a(()=>B[9]||(B[9]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>{var P,$,A;return[e(E,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:l(_).processing||((P=l(_).products)==null?void 0:P.length)===0||(($=l(_).customers)==null?void 0:$.length)===0||((A=l(_).price_types)==null?void 0:A.length)===0,loading:l(_).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",qp,[e(pe,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(le,null,{default:a(()=>[t("div",Cp,[B[12]||(B[12]=v(" Pratinjau Pesan (Teks Biasa) ")),e(E,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:q,disable:m.value.length===0},null,8,["disable"])]),e(se,{modelValue:m.value,"onUpdate:modelValue":B[7]||(B[7]=P=>m.value=P),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),D.value.length>0?(d(),I(le,{key:0,class:"q-pt-none"},{default:a(()=>[B[14]||(B[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",Tp,[(d(!0),w(J,null,Ue(D.value,P=>(d(),I(E,{key:P.id,label:`Kirim ke ${P.name}`,href:K(P.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(l(_).products.length>0&&l(_).price_types.length>0)},{default:a(()=>[P.phone?k("",!0):(d(),I(Kt,{key:0},{default:a(()=>B[13]||(B[13]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),B[15]||(B[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Rp=Object.freeze(Object.defineProperty({__proto__:null,default:Pp},Symbol.toStringTag,{value:"Module"})),Ip={class:"q-gutter-sm"},Op={class:"q-pa-xs"},Dp={class:"col-12"},Up={class:"col-12"},jp={class:"q-gutter-xs"},Vl="Kirim Daftar Harga",Ep={__name:"SendPriceList2",setup(p){const s=ge(),m=T(""),o=ee(()=>{var F;const O=new Map;return(F=s.props.products)==null||F.forEach(B=>{O.set(B.id,B)}),O}),i=ee(()=>{var F;const O=new Map;return(F=s.props.customers)==null||F.forEach(B=>{O.set(B.id,B)}),O}),n=ee(()=>{var O;return((O=s.props.customers)==null?void 0:O.map(F=>({value:F.id,label:F.name})))||[]}),g=ee(()=>{var O;return((O=s.props.products)==null?void 0:O.map(F=>({value:F.id,label:`${F.name} (${F.sku||F.code||"ID: "+F.id})`})))||[]}),b=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],c=T(g.value),u=T(n.value),f=Qe({price_types:[],products:[],customers:[]});f.transform(O=>({...O,products:O.products.map(F=>F.value),customers:O.customers.map(F=>F.value)}));const _=O=>O?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(O):"Rp. 0",y=O=>{const F=b.find(B=>B.value===O);return F?F.label:O},S=ee(()=>{if(f.products.length===0||f.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let O=`Daftar Harga Terbaru
`;return O+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,O+=`------------------------------

`,f.products.forEach(F=>{const B=o.value.get(F.value);B&&(O+=`*${B.name}*
`,f.price_types.forEach(h=>{const j=y(h),P=B[h],$=B.unit||"pcs";P!=null&&P!=0&&(O+=`- ${j}: ${_(P)} / ${$}
`)}),O+=`
`)}),O+=`------------------------------
`,O+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",O});Ne(S,O=>{m.value=O},{immediate:!0});const q=ee(()=>f.customers.map(O=>i.value.get(O.value)).filter(O=>O&&O.phone_number)),x=O=>{const F=m.value;let B=O.startsWith("0")?"62"+O.substring(1):O;B=B.replace(/[^0-9]/g,"");const h=encodeURIComponent(F);return`https://wa.me/${B}?text=${h}`},D=(O,F)=>{if(O===""){F(()=>{c.value=g.value});return}F(()=>{const B=O.toLowerCase();c.value=g.value.filter(h=>h.label.toLowerCase().indexOf(B)>-1)})},K=(O,F)=>{if(O===""){F(()=>{u.value=n.value});return}F(()=>{const B=O.toLowerCase();u.value=n.value.filter(h=>h.label.toLowerCase().indexOf(B)>-1)})},R=()=>{console.log("Scrolling to first error field...")},U=()=>{if(f.price_types.length===0||f.products.length===0||f.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}f.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{R()},onFinish:()=>{f.clearErrors()}})};return(O,F)=>{const B=X("i-head"),h=X("authenticated-layout");return d(),w(J,null,[e(B,{title:Vl}),e(h,{"show-drawer-button":!0},{title:a(()=>[v(r(Vl))]),"left-button":a(()=>[t("div",Ip,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:F[0]||(F[0]=j=>O.$goBack())})])]),default:a(()=>[t("div",Op,[e(Je,{class:"row q-col-gutter-md",onSubmit:G(U,["prevent"]),onValidationError:R},{default:a(()=>[t("div",Dp,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[F[8]||(F[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),F[9]||(F[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:l(f).products,"onUpdate:modelValue":F[1]||(F[1]=j=>l(f).products=j),options:c.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(f).errors.products,"error-message":l(f).errors.products,loading:l(f).processing,"use-input":"",onFilter:D,"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(N,{class:"text-grey"},{default:a(()=>F[6]||(F[6]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:l(f).price_types,"onUpdate:modelValue":F[2]||(F[2]=j=>l(f).price_types=j),options:b,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(f).errors.price_types,"error-message":l(f).errors.price_types,loading:l(f).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:l(f).customers,"onUpdate:modelValue":F[3]||(F[3]=j=>l(f).customers=j),options:u.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(f).errors.customers,"error-message":l(f).errors.customers,loading:l(f).processing,"use-input":"",onFilter:K,"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(N,{class:"text-grey"},{default:a(()=>F[7]||(F[7]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:l(f).processing||l(f).products.length===0||l(f).customers.length===0||l(f).price_types.length===0,loading:l(f).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(f).processing,onClick:F[4]||(F[4]=j=>O.$goBack())},null,8,["disable"])]),_:1}),O.$page.props.flash.success?(d(),I(Gt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(r(O.$page.props.flash.success),1)]),_:1})):k("",!0),O.$page.props.flash.error?(d(),I(Gt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(r(O.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",Up,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>[F[10]||(F[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(se,{modelValue:m.value,"onUpdate:modelValue":F[5]||(F[5]=j=>m.value=j),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),F[11]||(F[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),q.value.length>0?(d(),I(le,{key:0},{default:a(()=>[F[13]||(F[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",jp,[(d(!0),w(J,null,Ue(q.value,j=>(d(),I(E,{key:j.id,label:`Kirim ke ${j.label}`,href:x(j.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:a(()=>[j.phone_number?k("",!0):(d(),I(Kt,{key:0},{default:a(()=>F[12]||(F[12]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href"]))),128))]),F[14]||(F[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},Ap=Object.freeze(Object.defineProperty({__proto__:null,default:Ep},Symbol.toStringTag,{value:"Module"})),Bp={class:"q-gutter-sm"},Mp={class:"col col-md-6 q-pa-xs"},ql="Tambah Retur Pembelian",Np={__name:"Create",setup(p){const s=ge(),m=Qe({code:s.props.data.code}),o=()=>rt({form:m,url:route("admin.purchase-order-return.add")});return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return d(),w(J,null,[e(g,{title:ql}),e(b,null,{title:a(()=>[v(r(ql))]),"left-button":a(()=>[t("div",Bp,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.finance-account.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Mp,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[e(se,{autofocus:"",modelValue:l(m).code,"onUpdate:modelValue":n[1]||(n[1]=c=>l(m).code=c),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(m).errors.code,disable:l(m).processing,"error-message":l(m).errors.code,rules:[c=>c&&c.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(m).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(m).processing,onClick:n[2]||(n[2]=c=>l(Z).get(i.route("admin.purchase-order-return.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Fp=Object.freeze(Object.defineProperty({__proto__:null,default:Np},Symbol.toStringTag,{value:"Module"})),zp={class:"column"},Lp={class:"bg-grey-2 q-pa-xs"},Kp={class:"text-subtitle1 text-bold text-grey-10"},Hp={class:"text-caption text-grey-8"},Wp={class:"col-12 col-sm-6"},Yp={class:"full-width"},Qp={key:1},Jp={key:0},Gp={key:1},Xp={class:"col-12 col-sm-6",align:"left"},Zp={class:"full-width"},ef={class:"full-width",style:{"border-collapse":"collapse"}},tf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},af={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},lf={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},of={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},nf={key:0},sf={class:"col-12 col-sm-6"},rf={class:"text-body2 text-grey-7 text-italic"},df={class:"col-12 col-sm-6"},uf={class:"row justify-end q-gutter-y-xs"},mf={class:"col-12 row justify-between"},cf={class:"text-subtitle2 text-bold"},pf={class:"row justify-end q-gutter-y-xs"},ff={class:"col-12 row justify-between"},gf={class:"text-subtitle2 text-bold"},Co={__name:"MainInfoTab",props:{data:Object},setup(p){const s=p;return(m,o)=>{const i=X("i-link"),n=X("my-link");return d(),w("div",zp,[e(le,{class:"q-pa-none"},{default:a(()=>[t("div",Lp,[t("div",Kp," RETUR #"+r(s.data.code),1),t("div",Hp,r(l(ve)(s.data.datetime)),1)])]),_:1}),e(Pe),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",Wp,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",Yp,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),I(i,{key:0,href:m.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>{var g;return[e(C,{class:"inline-icon",name:"person"}),v(" "+r(s.data.supplier_name)+" ("+r((g=s.data.supplier)==null?void 0:g.code)+") ",1)]}),_:1},8,["href"])):(d(),w("div",Qp,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(d(),w("tr",Jp,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(d(),w("tr",Gp,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",Xp,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Zp,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:m.route("admin.purchase-order.detail",{id:s.data.purchase_order_id})},{default:a(()=>[v(r(s.data.purchase_order_id?s.data.purchase_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Pe),e(le,{class:"q-pa-sm"},{default:a(()=>[t("table",ef,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(J,null,Ue(s.data.details,g=>(d(),w("tr",{key:g.id},[t("td",tf,[e(i,{href:m.route("admin.product.detail",g.product_id)},{default:a(()=>[v(r(g.product_name),1)]),_:2},1032,["href"])]),t("td",af,r(l(H)(g.cost)),1),t("td",lf,r(g.quantity),1),t("td",of,r(l(H)(g.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),w("tr",nf,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(le,{class:"row",align:"left"},{default:a(()=>[t("div",sf,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",rf,r(s.data.notes?s.data.notes:"-"),1)]),t("div",df,[t("div",uf,[t("div",mf,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",cf,r(l(H)(s.data.grand_total)),1)])]),t("div",pf,[t("div",ff,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",gf,r(l(H)(s.data.total_refunded)),1)])])])]),_:1})])}}},bf=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),vf={key:0,class:"text-center q-mb-md text-grey-8"},_f={class:"text-subtitle2 text-weight-medium"},yf={class:"text-h5 text-center text-primary q-pb-md"},kf={class:"text-center q-mt-md"},wf={key:0,class:"text-h6 text-negative text-weight-bold"},hf={key:1,class:"text-h6 text-positive text-weight-bold"},To={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const m=p,o=s,i=ge(),n=T(!1),g=T({method:"transfer",amount:m.total,notes:null}),b=i.props.data.supplier,c=ee(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(q=>({label:q.name,value:q.id}))]),u=ee(()=>m.remaining_refund),f=ee(()=>{const q=g.value.amount||0;return q<=0?"Jumlah pembayaran harus lebih dari 0.":q>m.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=ee(()=>f.value===null),y=()=>{if(!_.value)return;n.value=!0;const q={id:g.value.method,amount:g.value.amount,notes:g.value.notes};o("accepted",q),n.value=!1},S=()=>{g.value.amount=m.total,g.value.method="cash",g.value.notes=null};return(q,x)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":x[4]||(x[4]=D=>q.$emit("update:modelValue",D)),onBeforeShow:S},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,null,{default:a(()=>x[5]||(x[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",vf,[t("div",_f,[v(r(l(b).code)+" ",1),x[6]||(x[6]=t("br",null,null,-1)),v(" "+r(l(b).name)+" ",1),x[7]||(x[7]=t("br",null,null,-1))])])):k("",!0),t("div",yf," Total: Rp. "+r(l(H)(p.total)),1),e(l(ce),{modelValue:g.value.method,"onUpdate:modelValue":x[0]||(x[0]=D=>g.value.method=D),options:c.value,label:"Kas Tujuan",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Me,{modelValue:g.value.amount,"onUpdate:modelValue":x[1]||(x[1]=D=>g.value.amount=D),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":f.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:g.value.notes,"onUpdate:modelValue":x[2]||(x[2]=D=>g.value.notes=D),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",kf,[u.value>0?(d(),w("div",wf," Sisa Refund: Rp. "+r(l(H)(u.value)),1)):(d(),w("div",hf," Refund Lunas "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:x[3]||(x[3]=D=>q.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$f=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),xf={class:"column"},Sf={class:"row"},Vf={class:"full-width",style:{"border-collapse":"collapse"}},qf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Cf={class:"row items-center q-gutter-x-sm"},Tf={class:"text-weight-bold"},Pf={class:"row items-center q-gutter-x-sm q-mt-xs"},Rf={class:"text-caption text-grey-6"},If={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Of={class:"q-mt-xs"},Df={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Uf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},jf={key:0},Ef={class:"text-right q-pa-sm"},Po={__name:"RefundTab",props:{data:Object},setup(p){const s=p,m=$e(),o=T(!1),i=()=>{o.value=!0},n=ee(()=>s.data.remaining_refund),g=async c=>{const u={order_id:s.data.id,...c};m.loading.show({message:"Memproses pembayaran..."});try{const f=await Oe.post(route("admin.purchase-order-return.add-refund"),u);m.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Z.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(f){let _="Gagal memproses refund.";f.response&&f.response.data&&f.response.data.message?_=f.response.data.message:f.message&&(_=f.message),m.notify({message:_,color:"negative",icon:"error"})}finally{m.loading.hide()}},b=c=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.purchase-order-return.delete-refund",{id:c.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Z.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(u){let f="Gagal menghapus refund pembayaran.";u.response&&u.response.data&&u.response.data.message?f=u.response.data.message:u.message&&(f=u.message),m.notify({message:f,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(c,u)=>{const f=X("my-link");return d(),w(J,null,[t("div",xf,[e(Pe),e(le,{class:"q-pa-sm"},{default:a(()=>[t("div",Sf,[c.$can("admin.purchase-order-return.add-refund")?(d(),I(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:u[0]||(u[0]=G(_=>i(),["stop"]))})):k("",!0)]),t("table",Vf,[u[5]||(u[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(J,null,Ue(s.data.payments,_=>(d(),w("tr",{key:_.id},[t("td",qf,[t("div",Cf,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",Tf,r(_.code),1)]),t("div",Pf,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Rf,r(l(ve)(_.created_at)),1)]),(_.type==="transfer"||_.type==="cash")&&_.account?(d(),w("div",If,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),e(f,{href:c.route("admin.finance-account.detail",_.account.id),target:"_blank"},{default:a(()=>[v(r(_.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",Of,[e(gt,{label:c.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[_.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Df,r(l(H)(_.amount)),1),t("td",Uf,[c.$can("admin.purchase-order-return.delete-refund")?(d(),I(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(_)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",jf,u[2]||(u[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[u[3]||(u[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund (Rp.)",-1)),t("th",Ef,r(l(H)(s.data.total_refunded)),1),u[4]||(u[4]=t("th",null,null,-1))])])])]),_:1})]),e(To,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=_=>o.value=_),total:n.value,supplier:s.data.supplier,onAccepted:g},null,8,["modelValue","total","supplier"])],64)}}},Af=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Bf={class:"q-gutter-sm"},Mf={class:"col col-lg-6 q-pa-xs",align:"center"},Cl="Retur Pembelian",Nf={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),m=ge(),o=m.props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"main-info");he(()=>{ut(()=>{const c=s.get("print_size");c&&b(c)})});const b=c=>{window.open(route("admin.purchase-order-return.print",{id:m.props.data.id,size:c}),"_self")};return(c,u)=>{const f=X("i-head"),_=X("authenticated-layout");return d(),w(J,null,[e(f,{title:Cl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Cl))])]),"left-button":a(()=>[t("div",Bf,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>c.$goBack())})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=y=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[2]||(u[2]=y=>b("a4"))}),i.value?k("",!0):(d(),I(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[3]||(u[3]=y=>l(Z).get(c.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",Mf,[e(pe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(qt,{modelValue:g.value,"onUpdate:modelValue":u[4]||(u[4]=y=>g.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(it,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(d(),I(it,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Ct,{modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=y=>g.value=y),animated:""},{default:a(()=>[e(nt,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(Co,{data:l(o)},null,8,["data"])]),_:1}),e(nt,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(Po,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Ff=Object.freeze(Object.defineProperty({__proto__:null,default:Nf},Symbol.toStringTag,{value:"Module"})),zf={class:"text-weight-medium wrap-column"},Lf={class:"text-caption text-grey-6 elipsis"},Kf={class:"column items-end"},Hf={class:"text-caption text-grey-6 text-italic"},Ro={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=$e(),m=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(je,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:l(m)})},{header:a(g=>[e(Re,{props:g,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(J,null,Ue(g.cols,b=>(d(),I(ta,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(g=>[e(Re,{props:g,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:g,class:"text-left"},{default:a(()=>[t("div",zf,r(g.row.product_name),1),t("div",Lf,r(g.row.product_barcode),1),g.row.notes?(d(),I(Se,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal",props:g,class:"text-right"},{default:a(()=>[t("div",Kf,[t("div",null,r(l(H)(g.row.subtotal_cost)),1),t("div",Hf,r(l(H)(g.row.quantity))+" x Rp. "+r(l(H)(g.row.cost)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Wf=Object.freeze(Object.defineProperty({__proto__:null,default:Ro},Symbol.toStringTag,{value:"Module"})),Yf={class:"row items-center no-wrap"},Qf={class:"col-auto"},Io={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:m}){const o=p,i=m,n=()=>{i("save")},g=ee(()=>o.item.quantity*o.item.cost),b=_=>{_.stopPropagation(),_.preventDefault()},c=_=>{o.modelValue&&(_.key==="Enter"?(n(),b(_)):_.key==="Escape"&&(i("update:modelValue",!1),b(_)))};he(()=>{window.addEventListener("keydown",c)}),wt(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item});const f=()=>{};return(_,y)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":y[6]||(y[6]=S=>_.$emit("update:modelValue",S)),onBeforeShow:f},{default:a(()=>[e(pe,null,{default:a(()=>[e(le,{class:"q-py-sm"},{default:a(()=>[t("div",Yf,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Qf,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=S=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:a(()=>[e(se,{modelValue:p.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=S=>p.item.product_name=S),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=S=>p.item.quantity=S),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.cost,"onUpdate:modelValue":y[3]||(y[3]=S=>p.item.cost=S),label:"Modal / Harga Beli","hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:g.value,"onUpdate:modelValue":y[4]||(y[4]=S=>g.value=S),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:p.item.notes,"onUpdate:modelValue":y[5]||(y[5]=S=>p.item.notes=S),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Jf=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"}));function Gf(){const p=T(new Date);let s=null;const m=()=>{p.value=new Date};return he(()=>{s=setInterval(m,1e3)}),wt(()=>{s&&clearInterval(s)}),{currentDateTime:p}}const Xf={class:"text-grey-8"},ka={__name:"DigitalClock",setup(p){const{currentDateTime:s}=Gf();return(m,o)=>(d(),w("div",Xf,r(l(ve)(l(s))),1))}},Zf={key:0,class:"q-select__selected-item"},Oo={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(p,{expose:s,emit:m}){const o=T(null),i=p,n=m,g=T([]);let b=null;const c=T(i.modelValue);he(()=>{i.initialData&&(c.value=i.initialData)}),Ne(c,_=>{n("update:modelValue",_),n("supplierSelected",_)}),Ne(()=>i.modelValue,_=>{c.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const f=(_,y)=>{if(_.length<i.minLength){y(()=>{g.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Oe.get(`/web-api/suppliers?q=${_}`).then(S=>{y(()=>{g.value=S.data.data})}).catch(S=>{console.error("Gagal mengambil data pemasok:",S),y(()=>{g.value=[]})})},100)};return(_,y)=>(d(),I(ce,{class:xe(p.class),ref_key:"qSelectRef",ref:o,modelValue:c.value,"onUpdate:modelValue":y[0]||(y[0]=S=>c.value=S),"use-input":"","input-debounce":"0",label:p.label,options:g.value,onFilter:f,clearable:"",error:p.error,behavior:"menu","error-message":p.errorMessage,disable:p.disable,"hide-bottom-space":"",outlined:p.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a(S=>[e(oe,Ba(ro(S.itemProps)),{default:a(()=>[e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>[v(r(S.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":a(S=>[S.opt?(d(),w("div",Zf,r(S.opt.name),1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},eg={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(m,o)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[te(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Do=vt(eg,[["__scopeId","data-v-abc5074e"]]),tg=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"}));function wa(p){const s=T(!1),m=()=>{const n=p.value||document.documentElement;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},i=()=>{s.value?o():m()};return is(()=>{const n=()=>{s.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("mozfullscreenchange",n),document.removeEventListener("MSFullscreenChange",n)}}),{isFullscreen:s,requestFullscreen:m,exitFullscreen:o,toggleFullscreen:i}}const ag={class:"row items-center no-wrap"},lg={class:"col text-subtite text-bold text-grey-8"},og={class:"col-auto"},Uo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:m}){const o=p,i=m,n=()=>{i("save")},g=u=>{u.stopPropagation(),u.preventDefault()},b=u=>{o.modelValue&&(u.key==="Enter"?(n(),g(u)):u.key==="Escape"&&(i("update:modelValue",!1),g(u)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(u,f)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":f[4]||(f[4]=_=>u.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(le,{class:"q-py-sm"},{default:a(()=>[t("div",ag,[t("div",lg," Edit "+r(p.data.code),1),t("div",og,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=_=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:a(()=>[e(Ht,{modelValue:p.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":f[2]||(f[2]=_=>u.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:p.data.notes,"onUpdate:modelValue":f[3]||(f[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ng=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),sg={class:"row items-center no-wrap"},rg={class:"col-auto"},ig={class:"full-width row flex-center text-grey-8 q-gutter-sm"},dg={key:0},ha={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1},priceType:{type:String,require:!1,default:"price_1"}},emits:["update:modelValue","product-selected"],setup(p,{emit:s}){const m=$e(),o=p,i=T(!1),n=T(o.showCost),g=s,b=T(null),c=T([]),u=T(!0),f=T(-1),_=De({search:"",status:"active",...Le()}),y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});[...ot(window.CONSTANTS.PRODUCT_PRICE_TYPES)];const S=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_1.replace("Harga ","H "),field:"price_1",align:"right"},{name:"price_2",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_2.replace("Harga ","H "),field:"price_2",align:"right"},{name:"price_3",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_3.replace("Harga ","H "),field:"price_3",align:"right"}],q=ee(()=>{if(i.value)return S;const F=S.filter(B=>B.name!=="cost");return m.screen.gt.sm?F:F.filter(B=>B.name==="name"||B.name==="stock")});he(()=>{D()});const x=()=>{if(b.value&&f.value!==-1){const F=(y.value.page-1)*y.value.rowsPerPage,B=f.value-F;ut(()=>{if(B>=0&&B<c.value.length&&b.value.scrollTo){const h=b.value.$el.querySelector(".selected-row");h&&h.scrollIntoView({behavior:"smooth",block:"nearest"})}})}},D=()=>{o.modelValue!==!1&&K()},K=(F=null)=>{u.value=!0;const B=f.value;Ke({pagination:y,filter:_,props:F,rows:c,url:route("admin.product.data"),loading:u,tableRef:b,onSuccess:()=>{c.value.length>0?((B===0||B===-1)&&(f.value=0),ut(()=>{x()})):f.value=-1}})},R=()=>{D()},U=F=>{g("product-selected",F),setTimeout(()=>{g("update:modelValue",!1)},100)},O=F=>{if(!o.modelValue){alert("none");return}const B=c.value.length;if(B===0)return;const h=(y.value.page-1)*y.value.rowsPerPage,j=h+B-1;if(F.key==="ArrowDown")F.preventDefault(),f.value<j?(f.value=f.value+1,x()):f.value===j&&O({key:"ArrowRight",preventDefault:()=>{}});else if(F.key==="ArrowUp")F.preventDefault(),f.value>h?(f.value=f.value-1,x()):f.value===h&&h>0&&O({key:"ArrowLeft",preventDefault:()=>{}});else if(F.key==="Enter"&&f.value!==-1){F.preventDefault(),F.preventDefault();const P=(y.value.page-1)*y.value.rowsPerPage,$=f.value-P;$>=0&&$<B?U(c.value[$]):console.warn("Kesalahan: selectedIndex global di luar batas halaman saat ini.")}else if(f.value!==-1){if(F.key==="ArrowRight"){F.preventDefault();const P=y.value.page+1;P<=Math.ceil(y.value.rowsNumber/y.value.rowsPerPage)&&(y.value.page=P,f.value=(P-1)*y.value.rowsPerPage,b.value.requestServerInteraction())}else if(F.key==="ArrowLeft"){F.preventDefault();const P=y.value.page-1;P>=1&&(y.value.page=P,f.value=(P-1)*y.value.rowsPerPage,b.value.requestServerInteraction())}}};return Ne(()=>o.modelValue,(F,B)=>{B===!0&&F===!1&&(_.search=""),F===!0&&K()}),(F,B)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":B[4]||(B[4]=h=>F.$emit("update:modelValue",h)),maximized:l(m).screen.lt.sm},{default:a(()=>[e(pe,{class:"column fit",tabindex:"0",onKeydown:O,ref:"cardRef"},{default:a(()=>[e(le,{class:"q-py-sm"},{default:a(()=>[t("div",sg,[B[5]||(B[5]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",rg,[e(E,{flat:"",round:"",size:"sm",icon:"close",onClick:B[0]||(B[0]=h=>F.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:xe(["q-py-sm",l(m).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(se,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":[B[1]||(B[1]=h=>_.search=h),R],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"]),n.value?(d(),I(ia,{key:0,modelValue:i.value,"onUpdate:modelValue":B[2]||(B[2]=h=>i.value=h),label:"Tampilkan Modal",style:{"margin-left":"-10px"}},null,8,["modelValue"])):k("",!0)]),_:1},8,["class"]),e(le,{class:xe(["q-py-xs col",l(m).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(je,{ref_key:"tableRef",ref:b,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":B[3]||(B[3]=h=>y.value=h),filter:_.search,loading:u.value,columns:q.value,rows:c.value,"rows-per-page-options":[10,25,50],onRequest:K,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":a(({icon:h,message:j,filter:P})=>[t("div",ig,[t("span",null,r(j),1)])]),body:a(h=>[e(Re,{tabindex:"0",props:h,class:xe([{inactive:["stocked","raw_materials"].includes(h.row.type)&&h.row.stock==0,"selected-row":f.value===h.rowIndex},"cursor-pointer"]),onClick:j=>U(h.row),onKeydown:[Jt(G(j=>U(h.row),["prevent","stop"]),["enter"]),Jt(G(j=>U(h.row),["prevent"]),["space"])]},{default:a(()=>[e(Y,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[e(Se,{text:h.row.name},null,8,["text"]),h.row.description?(d(),I(Se,{key:0,text:h.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),l(m).screen.lt.md?(d(),w(J,{key:1},[t("div",null," Stok: "+r(h.row.type=="stocked"?l(H)(h.row.stock)+" "+h.row.uom:"-"),1),i.value?(d(),w("div",dg," Modal: Rp. "+r(l(H)(h.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+r(l(H)(h.row.price_1)),1),t("div",null,"Harga 2: Rp. "+r(l(H)(h.row.price_1)),1),t("div",null,"Harga 3: Rp. "+r(l(H)(h.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"stock",props:h,class:"text-right"},{default:a(()=>[v(r(h.row.type=="stocked"?l(H)(h.row.stock)+" "+h.row.uom:"-"),1)]),_:2},1032,["props"]),e(Y,{key:"cost",props:h,class:"wrap-column text-right"},{default:a(()=>[v(r(l(H)(h.row.cost)),1)]),_:2},1032,["props"]),e(Y,{key:"price_1",props:h,class:"wrap-column text-right"},{default:a(()=>[v(r(l(H)(h.row.price_1)),1)]),_:2},1032,["props"]),e(Y,{key:"price_2",props:h,class:"wrap-column text-right"},{default:a(()=>[v(r(l(H)(h.row.price_2)),1)]),_:2},1032,["props"]),e(Y,{key:"price_3",props:h,class:"wrap-column text-right"},{default:a(()=>[v(r(l(H)(h.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},ug=Aa({__name:"BarcodeInputEditor",props:{modelValue:{}},emits:["update:modelValue","scan-success","send","search"],setup(p,{expose:s,emit:m}){const o=T(null);s({focus:()=>{o.value&&o.value.focus()},qInput:o});const n=p,g=m,b=$e(),c=T(n.modelValue);Ne(()=>n.modelValue,h=>{h!==c.value&&(c.value=h)});const u=h=>{c.value=h,g("update:modelValue",h)},f=T(null),_=T(!1),y=T(!1);let S=null,q=null,x=null;he(async()=>{if("BarcodeDetector"in window){_.value=!0;try{const h=await window.BarcodeDetector.getSupportedFormats();q=new BarcodeDetector({formats:h})}catch(h){console.warn("BarcodeDetector init error:",h),_.value=!1}}}),aa(()=>R());function D(){if(!_.value){b.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}y.value?R():K()}async function K(){if(q)try{y.value=!0,S=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),f.value&&(f.value.srcObject=S),await new Promise(h=>setTimeout(h,300)),F()}catch(h){y.value=!1,b.notify({type:"negative",message:`Gagal akses kamera: ${h.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function R(){y.value=!1,x&&cancelAnimationFrame(x),S&&(S.getTracks().forEach(h=>h.stop()),S=null)}async function U(){g("search")}async function O(){g("send")}async function F(){var h;if(!(!f.value||!q||!y.value)){try{const j=await q.detect(f.value);if(j.length>0){const P=j[0].rawValue;c.value+=P,g("update:modelValue",c.value),g("scan-success",c.value),(h=navigator.vibrate)==null||h.call(navigator,100),b.notify({type:"positive",message:`Barcode terdeteksi: ${c.value}`,timeout:1e3}),R();return}}catch(j){console.warn("Detection error:",j)}x=requestAnimationFrame(F)}}const B=ee(()=>!!(_.value&&!y.value&&!c.value||c.value.endsWith("*")));return(h,j)=>(d(),w("div",null,[e(se,Oa({ref_key:"qInputInternalRef",ref:o},h.$attrs,{"model-value":c.value,"onUpdate:modelValue":u,disable:y.value||h.$attrs.disable,loading:y.value||h.$attrs.loading,clearable:c.value&&!c.value.endsWith("*")}),{prepend:a(()=>[e(C,{name:"search",onClick:U,class:"cursor-pointer"})]),append:a(()=>[B.value?(d(),I(C,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:D},{default:a(()=>[e(Kt,null,{default:a(()=>j[1]||(j[1]=[v("Scan Barcode")])),_:1})]),_:1})):k("",!0),B.value?y.value?(d(),I(no,{key:2,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0):(d(),I(C,{key:1,name:"send",onClick:O,class:"cursor-pointer q-ml-md"}))]),_:1},16,["model-value","disable","loading","clearable"]),e(lt,{modelValue:y.value,"onUpdate:modelValue":j[0]||(j[0]=P=>y.value=P),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(pe,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(le,{class:"text-center q-pb-none"},{default:a(()=>j[2]||(j[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(le,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:f,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(tt,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(E,{label:"Batal Scan",color:"negative",icon:"close",onClick:R})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),$a=vt(ug,[["__scopeId","data-v-5cfb3e70"]]),mg={class:"q-gutter-sm"},cg={class:"row items-center"},pg={class:"text-weight-bold"},fg={class:"row q-col-gutter-none full-width"},gg={class:"col-sm-6 col-12 col"},bg={class:"row full-width"},vg={key:0,class:"row"},_g={class:"col-sm-6 col-12"},yg={class:"row q-ml-sm items-end"},kg={class:"row col grow"},wg={class:"col-12 q-pa-sm column"},hg={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},$g={key:0,class:"col"},xg={class:"text-caption text-grey-6 q-mt-xs"},Sg={key:0,class:"text-caption text-grey-8 q-mt-xs"},Vg={class:"text-italic"},qg={key:1,class:"col"},Cg={class:"q-pa-sm q-pb-none text-grey-8"},Tg={class:"col"},Pg={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Rg={class:"text-h4 text-weight-bold"},Ig={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Og={class:"col q-py-sm"},Dg={class:"q-py-sm"},Ug={__name:"Editor",setup(p){const s=$e(),m=ge(),o=T(!0),i=T(null),n=T(null),g=T(null),b=T(!1),c=T(null),u=T(null),{isFullscreen:f,toggleFullscreen:_}=wa(u),y="Retur #"+m.props.data.code,S=T(m.props.data.supplier),q=T(""),x=T(!1),D=T(!1),K=T(!1),R=T(!1),U=T(null),O=De({id:m.props.data.id,code:m.props.data.code,supplier_id:m.props.data.supplier_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),F=ee(()=>O.items.reduce((me,L)=>me+L.cost*L.quantity,0)),B=()=>{var me;_(),f.value||(me=c==null?void 0:c.value)==null||me.hideDrawer()},h=me=>isNaN(me)||me<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,j=me=>isNaN(me)||me<0?(bt("Harga tidak valid.","top"),!1):!0,P=me=>!me||me.length==0?(bt("Barcode tidak valid.","top"),!1):!0,$=me=>{var L;(L=q.value)!=null&&L.endsWith("*")?q.value+=me.name:q.value=me.name},A=async()=>{if(x.value)return;const me=q.value.trim();if(me.length===0){D.value=!0;return}const L=me.split("*");let _e=1,re="",W=null;if(L.length===1)re=L[0];else if(L.length<=3)_e=parseInt(L[0]),re=L[1],L.length===3&&(W=parseFloat(L[2]));else{bt("Input tidak valid.","top");return}if(re.length===0){D.value=!0;return}!P(re)&&!h(_e)&&!j(W)||(x.value=!0,await Oe.post(route("admin.purchase-order-return.add-item"),{order_id:O.id,product_code:re,qty:_e,price:W,merge:o.value}).then(ye=>{const de=ye.data.data.item;let Q=-1;ye.data.data.mergeItem&&(Q=O.items.findIndex(qe=>qe.id===de.id)),Q===-1?O.items.push(de):O.items[Q]=de,q.value="",W!==null&&W!==parseFloat(de.price)&&bt("Harga tidak dapat diubah!","top")}).catch(ye=>{var de,Q;pt((Q=(de=ye.response)==null?void 0:de.data)==null?void 0:Q.message,"top"),console.error("Gagal mengambil data produk:",ye)}),x.value=!1,ut(()=>{var ye;(ye=i.value)==null||ye.focus()}))},z=me=>{U.value=Object.create(me),K.value=!0},V=me=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${me.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{x.value=!0,Oe.post(route("admin.purchase-order-return.remove-item"),{id:me.id}).then(()=>{const L=O.items.findIndex(_e=>_e.id===me.id);L!==-1&&(O.items.splice(L,1)[0],ft("Item telah dihapus","top"))}).catch(L=>{var _e,re;pt(((re=(_e=L==null?void 0:L.response)==null?void 0:_e.data)==null?void 0:re.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{x.value=!1})})},M=()=>{x.value=!0;const me=n.value.getCurrentItem(),L={id:me.id,qty:me.quantity,cost:me.cost};me.notes&&(L.notes=me.notes),Oe.post(route("admin.purchase-order-return.update-item"),L).then(_e=>{const re=_e.data.data,W=O.items.findIndex(ye=>ye.id===re.id);W!==-1&&(O.items[W]=re,ft("Item telah diperbarui","top")),K.value=!1}).catch(_e=>{var re,W;pt(((W=(re=_e==null?void 0:_e.response)==null?void 0:re.data)==null?void 0:W.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(_e)}).finally(()=>{x.value=!1})};he(()=>{const me=L=>{b.value||K.value||D.value||R.value||(L.key==="F1"?(L.preventDefault(),b.value=!0):L.key==="F2"?(L.preventDefault(),g.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),ue()):L.key==="F11"?(L.preventDefault(),B()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault())};document.addEventListener("keydown",me),wt(()=>{document.removeEventListener("keydown",me)}),ut(()=>{var L;(L=c==null?void 0:c.value)==null||L.hideDrawer()})});const ae=async()=>{x.value=!0;const me={id:O.id,supplier_id:O.supplier_id??null,datetime:ea(O.datetime),notes:O.notes};await Oe.post(route("admin.purchase-order-return.update"),me).then(L=>{const _e=L.data.data.id;O.supplier_id=_e.supplier_id}).catch(L=>{var _e,re;pt(((re=(_e=L==null?void 0:L.response)==null?void 0:_e.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{x.value=!1})},ue=me=>{if(O.items.length===0){ft("Item masih kosong","top");return}xt.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{x.value=!0,Oe.post(route("admin.purchase-order-return.close",{id:O.id})).then(L=>{ft("Transaksi selesai"),Z.get(route("admin.purchase-order-return.detail",{id:O.id}))}).catch(L=>{var _e,re;pt((re=(_e=L.response)==null?void 0:_e.data)==null?void 0:re.message),console.error(L)}).finally(()=>{x.value=!1})})},ie=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order-return.cancel",{id:O.id}),{id:O.id}).then(()=>{ft("Transaksi telah dibatalkan."),Z.visit(route("admin.purchase-order-return.detail",{id:O.id}))}).catch(me=>{var _e,re;const L=((re=(_e=me.response)==null?void 0:_e.data)==null?void 0:re.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(me)})})},Ie=()=>{window.open(route("admin.purchase-order-return.detail",{id:O.id})+"?preview=1","_blank")},Xe=ee(()=>S.value?S.value.wallet_balance>=F.value:!0);return(me,L)=>{const _e=X("i-head"),re=X("authenticated-layout");return d(),w(J,null,[e(_e,{title:y}),e(re,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[v(r(y))]),"left-button":a(()=>[t("div",mg,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=W=>l(Z).get(me.route("admin.purchase-order-return.index")))})])]),"right-button":a(()=>[t("div",cg,[l(s).screen.gt.sm?(d(),w(J,{key:0},[t("div",pg,r(l(m).props.auth.user.username),1),L[21]||(L[21]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ka)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:a(()=>[t("div",fg,[t("div",gg,[t("div",bg,[e(Oo,{ref_key:"supplierAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:S.value,"onUpdate:modelValue":L[2]||(L[2]=W=>S.value=W),label:"Pemasok",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),S.value?(d(),w("div",vg,[t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",Xe.value?"text-green":"text-red"])}," Wallet: "+r(S.value?"Rp. "+l(H)(S.value?S.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",S.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(S.value?"Rp. "+l(H)(S.value?S.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",_g,[e($a,{ref_key:"userInputRef",ref:i,modelValue:q.value,"onUpdate:modelValue":L[3]||(L[3]=W=>q.value=W),onKeyup:L[4]||(L[4]=Jt(G(W=>A(),["prevent"]),["enter"])),onScanSuccess:L[5]||(L[5]=W=>A()),onSend:L[6]||(L[6]=W=>A()),onSearch:L[7]||(L[7]=W=>D.value=!0),loading:x.value,disable:x.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",yg,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[8]||(L[8]=W=>o.value=W),label:"Gabungkan item",disable:x.value},null,8,["modelValue","disable"])])])]),t("div",kg,[t("div",wg,[e(Ro,{items:O.items,onUpdateQuantity:L[9]||(L[9]=({id:W,value:ye})=>me.updateQuantity(W,ye)),onRemoveItem:V,onEditItem:z,"is-processing":x.value},null,8,["items","is-processing"])])]),t("div",hg,[l(s).screen.gt.sm?(d(),w("div",$g,[t("div",xg,r(O.items.length)+" item(s) ",1),O.notes?(d(),w("div",Sg,[L[22]||(L[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Vg,[e(Se,{text:O.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",qg,[t("div",Cg,[t("div",null,"Return #: "+r(O.code),1),t("div",null,"Order #: "+r(l(m).props.data.purchase_order.code),1),t("div",null,r(l(ve)(O.datetime)),1)])])):k("",!0),t("div",Tg,[t("div",Pg,[L[24]||(L[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Rg,[L[23]||(L[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(H)(F.value)),1)])])])]),t("div",Ig,[t("div",Og,[e(E,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:L[10]||(L[10]=W=>ue()),disable:!me.$can("admin.purchase-order-return.close")||x.value||O.items.length===0||O.status!=="draft",loading:x.value},null,8,["disable","loading"])]),t("div",Dg,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[14]||(L[14]=G(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:L[11]||(L[11]=G(W=>R.value=!0,["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>L[25]||(L[25]=[v("Edit Rincian")])),_:1})]),_:1})),[[ne],[fe]]),te((d(),I(oe,{clickable:"",onClick:L[12]||(L[12]=G(W=>Ie(),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(N,null,{default:a(()=>L[26]||(L[26]=[v("Pratinjau")])),_:1})]),_:1})),[[ne],[fe]]),te((d(),I(oe,{clickable:"",onClick:L[13]||(L[13]=G(W=>ie(),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(N,{class:"text-negative"},{default:a(()=>L[27]||(L[27]=[v(" Batalkan ")])),_:1})]),_:1})),[[ne],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Io,{ref_key:"itemEditorRef",ref:n,modelValue:K.value,"onUpdate:modelValue":L[15]||(L[15]=W=>K.value=W),item:U.value,onSave:L[16]||(L[16]=W=>M()),"is-processing":x.value},null,8,["modelValue","item","is-processing"]),e(ha,{modelValue:D.value,"onUpdate:modelValue":L[17]||(L[17]=W=>D.value=W),onProductSelected:$},null,8,["modelValue"]),e(Uo,{modelValue:R.value,"onUpdate:modelValue":L[18]||(L[18]=W=>R.value=W),data:O,onSave:L[19]||(L[19]=W=>ae()),"is-processing":x.value},null,8,["modelValue","data","is-processing"]),e(Do,{modelValue:b.value,"onUpdate:modelValue":L[20]||(L[20]=W=>b.value=W)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},jg=Object.freeze(Object.defineProperty({__proto__:null,default:Ug},Symbol.toStringTag,{value:"Module"})),Eg={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ag={class:"q-pa-xs"},Bg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Mg={key:0},Ng={key:1},Fg={key:2},zg={key:3},Lg={key:0},Kg={key:0},Hg={key:1},Wg={class:"flex justify-end"},Tl="Retur Pembelian",Yg={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=zt(),u=Lt(),f=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...Ot(c-2,c-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Dt()],y=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES)],S=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES)],q=De({search:"",year:c,month:u,status:"all",refund_status:"all",...Le()}),x=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),D=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{B()});const K=P=>{if(P.status=="draft"){R(P);return}U(P)},R=P=>{Z.get(route("admin.purchase-order-return.edit",P.id))},U=P=>{Z.get(route("admin.purchase-order-return.detail",P.id))},O=P=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order-return.cancel",{id:P.id}),{id:P.id}).then($=>{const A=$.data.data,z=o.value.findIndex(V=>V.id===A.id);if(z===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[z].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var z,V;const A=((V=(z=$.response)==null?void 0:z.data)==null?void 0:V.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:A,color:"warning",position:"bottom"}),console.error($)})})},F=P=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.purchase-order-return.delete",P.id),fetchItemsCallback:B,loading:i}),B=(P=null)=>{Ke({pagination:x,filter:q,props:P,rows:o,url:route("admin.purchase-order-return.data"),loading:i,tableRef:n})},h=()=>{B()},j=ee(()=>s.screen.gt.sm?D:D.filter(P=>P.name==="code"||P.name==="action"));return Ne(()=>q.year,P=>{P===null&&(q.month=null)}),(P,$)=>{const A=X("i-head"),z=X("authenticated-layout");return d(),w(J,null,[e(A,{title:Tl}),e(z,null,Fe({title:a(()=>[v(r(Tl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=V=>m.value=!m.value)},null,8,["icon"]),P.$can("admin.purchase-order-return.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=V=>l(Z).get(P.route("admin.purchase-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",Ag,[e(je,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":$[10]||($[10]=V=>x.value=V),filter:q.search,loading:i.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:B,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:V,message:M,filter:ae})=>[t("div",Bg,[t("span",null,r(M)+" "+r(ae?" with term "+ae:""),1)])]),body:a(V=>[e(Re,{props:V,class:"cursor-pointer",onClick:G(M=>K(V.row),["prevent"])},{default:a(()=>[e(Y,{key:"code",props:V,class:"wrap-column"},{default:a(()=>{var M,ae,ue;return[t("div",null,[e(C,{name:"tag"}),v(" "+r(V.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(V.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[V.row.cashier?(d(),w("div",Mg,[e(C,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((M=V.row.cashier)==null?void 0:M.username),1)])):k("",!0),V.row.cashier_session?(d(),w("div",Ng,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((ue=(ae=V.row.cashier_session)==null?void 0:ae.cashier_terminal)==null?void 0:ue.name),1)])):k("",!0),V.row.supplier?(d(),w("div",Fg,[e(C,{name:"person",class:"inline-icon"}),e(_a,{href:P.route("admin.supplier.detail",{id:V.row.supplier.id}),onClick:$[7]||($[7]=G(()=>{},["stop"]))},{default:a(()=>[v(" "+r(V.row.supplier.code)+" - "+r(V.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(l(H)(V.row.grand_total)),1),V.row.notes?(d(),w("div",zg,[e(C,{name:"notes"}),v(" "+r(V.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Ft,{status:V.row.status,statuses:P.$CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Ft,{status:V.row.refund_status,statuses:P.$CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"red",partially_refunded:"orange",fully_refunded:"green",no_refund:"black"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Y,{key:"supplier_id",props:V},{default:a(()=>[V.row.supplier?(d(),w("div",Lg,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(V.row.supplier_code)+" - "+r(V.row.supplier_name),1)]),V.row.supplier_phone?(d(),w("div",Kg,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(V.row.supplier_phone),1)])):k("",!0),V.row.supplier_address?(d(),w("div",Hg,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(V.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total",props:V},{default:a(()=>[v(r(l(H)(V.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:V},{default:a(()=>[e(Se,{text:V.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:V,onClick:$[9]||($[9]=G(()=>{},["stop"]))},{default:a(()=>[t("div",Wg,[P.$can("admin.purchase-order-return.detail")||P.$can("admin.purchase-order-return.edit")||P.$can("admin.purchase-order-return.cancel")||P.$can("admin.purchase-order-return.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[V.row.status!="draft"&&P.$can("admin.purchase-order-return.detail")?te((d(),I(oe,{key:0,onClick:G(M=>U(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(N,null,{default:a(()=>$[11]||($[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),V.row.status=="draft"&&P.$can("admin.purchase-order-return.edit")?te((d(),I(oe,{key:1,onClick:G(M=>R(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>$[12]||($[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),V.row.status=="draft"&&P.$can("admin.purchase-order-return.cancel")?te((d(),I(oe,{key:2,onClick:G(M=>O(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(N,null,{default:a(()=>$[13]||($[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),e(Pe),P.$can("admin.purchase-order-return.delete")?te((d(),I(oe,{key:3,onClick:G(M=>F(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>$[14]||($[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",Eg,[e(ce,{modelValue:q.year,"onUpdate:modelValue":[$[2]||($[2]=V=>q.year=V),h],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),q.year!="all"?(d(),I(ce,{key:0,modelValue:q.month,"onUpdate:modelValue":[$[3]||($[3]=V=>q.month=V),h],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:q.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:q.status,"onUpdate:modelValue":[$[4]||($[4]=V=>q.status=V),h],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:q.refund_status,"onUpdate:modelValue":[$[5]||($[5]=V=>q.refund_status=V),h],options:S,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:q.search,"onUpdate:modelValue":$[6]||($[6]=V=>q.search=V),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Qg=Object.freeze(Object.defineProperty({__proto__:null,default:Yg},Symbol.toStringTag,{value:"Module"})),Jg={key:0,class:"text-center q-mb-md text-grey-8"},Gg={class:"text-subtitle2 text-weight-medium"},Xg={class:"text-h5 text-center text-primary q-pb-md"},Zg={class:"q-mb-md flex flex-center"},e1={key:1},t1={class:"col-6"},a1={class:"col-6"},l1={class:"row"},o1={class:"text-center q-mt-md"},n1={key:0,class:"text-h6 text-negative text-weight-bold"},s1={key:1,class:"text-h6 text-green-8 text-weight-bold"},r1={key:2,class:"text-h6 text-positive text-weight-bold"},i1={key:2},d1={class:"text-h6 text-negative text-center"},u1={key:3},m1={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const m=p,o=s,i=ge(),n=T(!1),g=T("payment"),b=T(new Date),c=T(null),u=De([]),f=ee(()=>u.every(j=>j.id&&typeof j.amount=="number"&&j.amount>0)),_=ee(()=>i.props.accounts.map(j=>({label:j.name,value:j.id}))),y=ee(()=>u.reduce((j,P)=>j+(P.amount||0),0)),S=ee(()=>m.total-y.value),q=ee(()=>{if(!m.supplier)return!0;const j=u.find($=>$.id==="wallet");return(j?j.amount:0)<=m.supplier.balance}),x=new Date,D=dt.addToDate(new Date,{days:30}),K=ee(()=>[j=>!!j||"Tanggal jatuh tempo harus diisi",j=>dt.isBetweenDates(j,x,D,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),R=ee(()=>{if(g.value==="debt")return!!m.supplier&&K.value.every(A=>A(b.value)===!0);const j=u.some(A=>(A.amount||0)>0),P=u.every(A=>(A.amount||0)>=0),$=S.value<=0;return f.value&&j&&P&&$}),U=()=>{u.length<3&&u.push({id:null,amount:0})},O=j=>{if(u.length>1){const P=u.findIndex($=>$.id===j);P!==-1&&u.splice(P,1)}},F=j=>{g.value=j,b.value=new Date,u.splice(0,u.length),j==="payment"&&_.value.length>0&&(u.splice(0,u.length,{id:_.value[0].value,amount:m.total}),ut(()=>{c.value&&c.value.length>0&&(c.value[0].focus(),c.value[0].select())}))},B=()=>{if(!R.value)return;n.value=!0;let j={total:m.total,is_debt:g.value==="debt"};if(g.value==="debt")j.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),j.payments=[];else{const P=y.value,$=P>m.total?P-m.total:0,A=S.value>0?S.value:0;j.payments=u,j.remaining_debt=A,j.change=$}o("accepted",j),n.value=!1},h=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}F("payment")};return(j,P)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":P[3]||(P[3]=$=>j.$emit("update:modelValue",$)),onBeforeShow:h},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,null,{default:a(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:a(()=>[p.supplier?(d(),w("div",Jg,[t("div",Gg,[v(" Nama: "+r(p.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(l(H)(p.supplier.balance)),1)])])):k("",!0),t("div",Xg," Total: Rp. "+r(l(H)(p.total)),1),t("div",Zg,[e(l(Qt),{modelValue:g.value,"onUpdate:modelValue":[P[0]||(P[0]=$=>g.value=$),F],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="payment"?(d(),w("div",e1,[(d(!0),w(J,null,Ue(u,($,A)=>(d(),w("div",{key:A,class:"row q-col-gutter-sm q-mb-sm"},[t("div",t1,[e(l(ce),{modelValue:$.id,"onUpdate:modelValue":z=>$.id=z,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[z=>!!z||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",a1,[e(Me,{modelValue:$.amount,"onUpdate:modelValue":z=>$.amount=z,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!q.value,"error-message":q.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:A===0?"firstPaymentInputRef":null},Fe({_:2},[u.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:z=>O(A)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",l1,[e(E,{disable:!(u.length<3&&S.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:U,size:"sm"},null,8,["disable"])]),t("div",o1,[S.value>0?(d(),w("div",n1," Sisa Tagihan: Rp. "+r(l(H)(S.value)),1)):S.value<0?(d(),w("div",s1," Kembalian: Rp. "+r(l(H)(Math.abs(S.value))),1)):(d(),w("div",r1," Tagihan Terbayar "))])])):g.value==="debt"&&p.supplier?(d(),w("div",i1,[e(ma,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=$=>b.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(x),"max-date":l(D),rules:K.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",d1," Total Utang: Rp. "+r(l(H)(p.total)),1)])):g.value==="debt"&&!p.supplier?(d(),w("div",u1,P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=$=>j.$emit("update:modelValue",!1))}),e(E,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:B,disable:n.value||!R.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},c1=Object.freeze(Object.defineProperty({__proto__:null,default:m1},Symbol.toStringTag,{value:"Module"})),p1={key:0},f1={style:{float:"right"}},g1={key:1},b1={style:{float:"right"}},v1={key:2},_1={style:{float:"right"}},y1={key:3},k1={style:{float:"right"}},w1={style:{float:"right"}},h1={class:"q-gutter-sm"},$1={class:"q-my-md"},x1={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),w("tr",p1,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",f1,r(l(H)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),w("tr",g1,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",b1,r(l(H)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),w("tr",v1,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",_1,r(l(H)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),w("tr",y1,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",k1,r(l(H)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",w1,r(l(H)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",h1,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",$1,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},S1=vt(x1,[["__scopeId","data-v-f0591c00"]]),V1=Object.freeze(Object.defineProperty({__proto__:null,default:S1},Symbol.toStringTag,{value:"Module"})),q1={class:"column"},C1={class:"bg-grey-2 q-pa-xs"},T1={class:"text-subtitle1 text-bold text-grey-10"},P1={class:"col-12 col-sm-6"},R1={class:"full-width"},I1={key:1},O1={key:0},D1={key:1},U1={class:"col-12 col-sm-6",align:"left"},j1={class:"full-width"};const E1={key:1},A1={class:"full-width",style:{"border-collapse":"collapse"}},B1={class:"q-pa-sm"},M1={class:"text-right q-pa-sm"},N1={class:"text-right q-pa-sm"},F1={class:"text-right q-pa-sm"},z1={key:0},L1={class:"col-12 col-sm-6"},K1={class:"text-body2 text-grey-7 text-italic"},H1={class:"col-12 col-sm-6"},W1={class:"row justify-end q-gutter-y-xs"},Y1={class:"col-12 row justify-between"},Q1={class:"text-subtitle2 text-bold"},J1={class:"row justify-end q-gutter-y-xs"},G1={class:"col-12 row justify-between"},X1={class:"text-subtitle2 text-bold"},Z1={class:"row justify-end q-gutter-y-xs"},eb={class:"col-12 row justify-between"},tb={class:"text-subtitle2 text-bold"},ab={class:"row justify-end q-gutter-y-xs"},lb={class:"col-12 row justify-between"},ob={class:"text-subtitle2 text-bold"},jo={__name:"InvoiceTab",props:{data:Object},setup(p){const s=p;return(m,o)=>{const i=X("i-link");return d(),w("div",q1,[e(le,{class:"q-pa-none"},{default:a(()=>[t("div",C1,[t("div",T1," Pembelian #"+r(s.data.code),1)])]),_:1}),e(Pe),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",P1,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Supplier",-1)),t("table",R1,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),I(i,{key:0,href:m.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>[e(C,{class:"inline-icon",name:"person"}),v(" "+r(s.data.supplier_name),1)]),_:1},8,["href"])):(d(),w("div",I1,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(d(),w("tr",O1,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(d(),w("tr",D1,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",U1,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",j1,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.$CONSTANTS.PURCHASE_ORDER_STATUSES[s.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)]),k("",!0),s.data.due_date?(d(),w("tr",E1,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(ra)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Pe),e(le,{class:"q-pa-sm"},{default:a(()=>[t("table",A1,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(J,null,Ue(s.data.details,n=>(d(),w("tr",{key:n.id},[t("td",B1,[e(i,{href:m.route("admin.product.detail",{id:n.product_id})},{default:a(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",M1,r(n.quantity),1),t("td",null,r(n.product_uom),1),t("td",N1,r(l(H)(n.cost)),1),t("td",F1,r(l(H)(n.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),w("tr",z1,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(le,{class:"row",align:"left"},{default:a(()=>[t("div",L1,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",K1,r(s.data.notes?s.data.notes:"-"),1)]),t("div",H1,[t("div",W1,[t("div",Y1,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Q1,r(l(H)(s.data.grand_total)),1)])]),t("div",J1,[t("div",G1,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",X1,r(l(H)(s.data.total_return)),1)])]),t("div",Z1,[t("div",eb,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Dibayar (Rp)",-1)),t("div",tb,r(l(H)(s.data.total_paid)),1)])]),t("div",ab,[t("div",lb,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",ob,r(l($t)(s.data.balance)),1)])])])]),_:1})])}}},nb=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),sb={key:0,class:"text-center q-mb-md text-grey-8"},rb={class:"text-subtitle2 text-weight-medium"},ib={class:"text-h5 text-center text-primary q-pb-md"},db={class:"text-center q-mt-md"},ub={key:0,class:"text-h6 text-negative text-weight-bold"},mb={key:1,class:"text-h6 text-green-8 text-weight-bold"},cb={key:2,class:"text-h6 text-positive text-weight-bold"},Eo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const m=p,o=s,i=ge(),n=T(!1),g=T({method:null,amount:m.total,notes:null}),b=i.props.data.supplier,c=ee(()=>[...i.props.accounts.map(x=>({label:x.type=="bank"?x.name+" - "+x.number:x.name,value:x.id}))]),u=ee(()=>m.total-(g.value.amount||0)),f=ee(()=>g.value.method&&typeof g.value.amount=="number"&&g.value.amount>0),_=ee(()=>g.value.method?(g.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),y=ee(()=>f.value&&_.value===null),S=()=>{if(!y.value)return;n.value=!0;const x={total_paid:g.value.amount,payments:[{id:g.value.method,amount:g.value.amount}],notes:g.value.notes,remaining_debt:Math.max(0,m.total-(g.value.amount||0))};o("accepted",x),n.value=!1},q=()=>{g.value.amount=m.total,g.value.method=null,g.value.notes=null};return(x,D)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":D[4]||(D[4]=K=>x.$emit("update:modelValue",K)),onBeforeShow:q},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,null,{default:a(()=>D[5]||(D[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",sb,[t("div",rb,[v(r(l(b).name)+" ",1),D[6]||(D[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(l(H)(l(b).balance)),1)])])):k("",!0),t("div",ib," Total: Rp. "+r(l(H)(p.total)),1),e(l(ce),{modelValue:g.value.method,"onUpdate:modelValue":D[0]||(D[0]=K=>g.value.method=K),options:c.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value,rules:[K=>!!K||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Me,{modelValue:g.value.amount,"onUpdate:modelValue":D[1]||(D[1]=K=>g.value.amount=K),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":_.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:g.value.notes,"onUpdate:modelValue":D[2]||(D[2]=K=>g.value.notes=K),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",db,[u.value>0?(d(),w("div",ub," Sisa Tagihan: Rp. "+r(l(H)(u.value)),1)):u.value<0?(d(),w("div",mb," Kembalian: Rp. "+r(l(H)(Math.abs(u.value))),1)):(d(),w("div",cb," Tagihan Terbayar "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:D[3]||(D[3]=K=>x.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:S,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},pb=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),fb={class:"column"},gb={class:"row"},bb={class:"full-width",style:{"border-collapse":"collapse"}},vb={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},_b={class:"row items-center q-gutter-x-sm"},yb={class:"text-weight-bold"},kb={class:"row items-center q-gutter-x-sm q-mt-xs"},wb={class:"text-caption text-grey-6"},hb={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},$b={class:"q-mt-xs"},xb={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Sb={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Vb={key:0},qb={class:"text-right q-pa-sm"},Ao={__name:"PaymentTab",props:{data:Object},setup(p){const s=p,m=$e(),o=T(!1),i=()=>{o.value=!0},n=async b=>{const c={order_id:s.data.id,payments:b.payments,notes:b.notes};m.loading.show({message:"Memproses pembayaran..."});try{const u=await Oe.post(route("admin.purchase-order.add-payment"),c);m.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Z.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(u){let f="Gagal memproses pembayaran.";u.response&&u.response.data&&u.response.data.message?f=u.response.data.message:u.message&&(f=u.message),m.notify({message:f,color:"negative",icon:"error"})}finally{m.loading.hide()}},g=b=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.purchase-order.delete-payment",{id:b.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Z.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(c){let u="Gagal menghapus pembayaran.";c.response&&c.response.data&&c.response.data.message?u=c.response.data.message:c.message&&(u=c.message),m.notify({message:u,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(b,c)=>{const u=X("i-link");return d(),w(J,null,[t("div",fb,[e(Pe),e(le,{class:"q-pa-sm"},{default:a(()=>[t("div",gb,[b.$can("admin.purchase-order.add-payment")?(d(),I(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:c[0]||(c[0]=G(f=>i(),["stop"]))})):k("",!0)]),t("table",bb,[c[5]||(c[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(J,null,Ue(s.data.payments,f=>(d(),w("tr",{key:f.id},[t("td",vb,[t("div",_b,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",yb,r(f.code),1)]),t("div",kb,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",wb,r(l(ve)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(d(),w("div",hb,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),e(u,{class:"text-caption",href:b.route("admin.finance-account.detail",{id:f.account.id})},{default:a(()=>[v(r(f.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",$b,[e(gt,{label:b.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(gt,{label:f.amount<0?"Pembayaran":"Refund",color:f.amount<0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",xb,r(l($t)(f.amount)),1),t("td",Sb,[b.$can("admin.purchase-order.delete-payment")&&s.data.supplier_id&&f.amount<0?(d(),I(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>g(f)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",Vb,c[2]||(c[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[c[3]||(c[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",qb,r(l($t)(s.data.balance)),1),c[4]||(c[4]=t("td",null,null,-1))])])])]),_:1})]),e(Eo,{modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=f=>o.value=f),total:b.remainingPayment,customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},Cb=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),Tb={class:"q-gutter-sm"},Pb={class:"col col-lg-6 q-pa-xs",align:"center"},Pl="Rincian Pembelian",Rb={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),o=ge().props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"invoice"),b=()=>{window.print()};return(c,u)=>{const f=X("i-head"),_=X("authenticated-layout");return d(),w(J,null,[e(f,{title:Pl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Pl))])]),"left-button":a(()=>[t("div",Tb,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>c.$goBack())})])]),"right-button":a(()=>[e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=y=>b())}),i.value?k("",!0):(d(),I(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[2]||(u[2]=y=>l(Z).get(c.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",Pb,[e(pe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(qt,{modelValue:g.value,"onUpdate:modelValue":u[3]||(u[3]=y=>g.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(it,{name:"invoice",label:"Rincian"}),i.value?k("",!0):(d(),I(it,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Ct,{modelValue:g.value,"onUpdate:modelValue":u[4]||(u[4]=y=>g.value=y),animated:""},{default:a(()=>[e(nt,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(jo,{data:l(o)},null,8,["data"])]),_:1}),e(nt,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(Ao,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Ib=vt(Rb,[["__scopeId","data-v-520195e7"]]),Ob=Object.freeze(Object.defineProperty({__proto__:null,default:Ib},Symbol.toStringTag,{value:"Module"})),Db={class:"text-weight-medium wrap-column"},Ub={class:"text-caption text-grey-6 elipsis"},jb={class:"column items-end"},Eb={class:"text-caption text-grey-6 text-italic"},Bo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=$e(),m=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(je,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:l(m)})},{header:a(g=>[e(Re,{props:g,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(J,null,Ue(g.cols,b=>(d(),I(ta,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(g=>[e(Re,{props:g,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:g,class:"text-left"},{default:a(()=>[t("div",Db,r(g.row.product_name),1),t("div",Ub,r(g.row.product_barcode),1),g.row.notes?(d(),I(Se,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal",props:g,class:"text-right"},{default:a(()=>[t("div",jb,[t("div",null,r(l(H)(g.row.subtotal_cost)),1),t("div",Eb,r(l(H)(g.row.quantity))+" x Rp. "+r(l(H)(g.row.cost)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Ab=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"})),Bb={key:0,class:"text-center q-mb-md text-grey-8"},Mb={class:"text-subtitle2 text-weight-medium"},Nb={class:"text-h5 text-center text-primary q-pb-md"},Fb={class:"q-mb-md flex flex-center"},zb={key:1},Lb={class:"col-6"},Kb={class:"col-6"},Hb={class:"row"},Wb={class:"text-center q-mt-md"},Yb={key:0,class:"text-h6 text-negative text-weight-bold"},Qb={key:1,class:"text-h6 text-green-8 text-weight-bold"},Jb={key:2,class:"text-h6 text-positive text-weight-bold"},Gb={key:2},Xb={class:"text-h6 text-negative text-center"},Zb={key:3},Mo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const m=p,o=s,i=ge(),n=T(!1),g=T("payment"),b=T(new Date),c=T(null),u=De([]),f=ee(()=>u.every(j=>j.id&&typeof j.amount=="number"&&j.amount>0)),_=ee(()=>i.props.accounts.map(j=>({label:j.name,value:j.id}))),y=ee(()=>u.reduce((j,P)=>j+(P.amount||0),0)),S=ee(()=>m.total-y.value),q=ee(()=>{if(!m.supplier)return!0;const j=u.find(P=>P.id==="wallet");return j?j.amount<=m.supplier.balance:!0}),x=new Date,D=dt.addToDate(new Date,{days:30}),K=ee(()=>[j=>!!j||"Tanggal jatuh tempo harus diisi",j=>dt.isBetweenDates(j,x,D,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),R=ee(()=>{if(g.value==="debt")return!!m.supplier&&K.value.every(A=>A(b.value)===!0);const j=u.some(A=>(A.amount||0)>0),P=u.every(A=>(A.amount||0)>=0),$=S.value<=0;return f.value&&j&&P&&$}),U=()=>{u.length<3&&u.push({id:null,amount:0})},O=j=>{if(u.length>1){const P=u.findIndex($=>$.id===j);P!==-1&&u.splice(P,1)}},F=j=>{g.value=j,b.value=new Date,u.splice(0,u.length),j==="payment"&&_.value.length>0&&(u.splice(0,u.length,{id:_.value[0].value,amount:m.total}),ut(()=>{c.value&&c.value.length>0&&(c.value[0].focus(),c.value[0].select())}))},B=()=>{if(!R.value)return;n.value=!0;let j={total:m.total,is_debt:g.value==="debt"};if(g.value==="debt")j.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),j.payments=[];else{const P=y.value,$=P>m.total?P-m.total:0,A=S.value>0?S.value:0;j.payments=u,j.remaining_debt=A,j.change=$}o("accepted",j),n.value=!1},h=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}F("payment")};return(j,P)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":P[3]||(P[3]=$=>j.$emit("update:modelValue",$)),onBeforeShow:h},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,null,{default:a(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:a(()=>[p.supplier?(d(),w("div",Bb,[t("div",Mb,[v(" Nama: "+r(p.supplier.name),1),P[5]||(P[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(l(H)(p.supplier.balance)),1)])])):k("",!0),t("div",Nb," Total: Rp. "+r(l(H)(p.total)),1),t("div",Fb,[e(l(Qt),{modelValue:g.value,"onUpdate:modelValue":[P[0]||(P[0]=$=>g.value=$),F],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="payment"?(d(),w("div",zb,[(d(!0),w(J,null,Ue(u,($,A)=>(d(),w("div",{key:A,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Lb,[e(l(ce),{modelValue:$.id,"onUpdate:modelValue":z=>$.id=z,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[z=>!!z||"Akun harus dipilih"],error:!$.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Kb,[e(Me,{modelValue:$.amount,"onUpdate:modelValue":z=>$.amount=z,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!q.value,"error-message":q.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:A===0?"firstPaymentInputRef":null},Fe({_:2},[u.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:z=>O(A)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Hb,[e(E,{disable:!(u.length<3&&S.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:U,size:"sm"},null,8,["disable"])]),t("div",Wb,[S.value>0?(d(),w("div",Yb," Sisa Tagihan: Rp. "+r(l(H)(S.value)),1)):S.value<0?(d(),w("div",Qb," Kembalian: Rp. "+r(l(H)(Math.abs(S.value))),1)):(d(),w("div",Jb," Tagihan Terbayar "))])])):g.value==="debt"&&p.supplier?(d(),w("div",Gb,[e(ma,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=$=>b.value=$),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(x),"max-date":l(D),rules:K.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Xb," Total Utang: Rp. "+r(l(H)(p.total)),1)])):g.value==="debt"&&!p.supplier?(d(),w("div",Zb,P[6]||(P[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=$=>j.$emit("update:modelValue",!1))}),e(E,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:B,disable:n.value||!R.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ev=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),tv={class:"row items-center no-wrap"},av={class:"col-auto"},No={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:m}){const o=p,i=m,n=()=>{i("save")},g=ee(()=>o.item.quantity*o.item.cost),b=_=>{_.stopPropagation(),_.preventDefault()},c=_=>{o.modelValue&&(_.key==="Enter"?(n(),b(_)):_.key==="Escape"&&(i("update:modelValue",!1),b(_)))};he(()=>{window.addEventListener("keydown",c)}),wt(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item});const f=()=>{};return(_,y)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":y[6]||(y[6]=S=>_.$emit("update:modelValue",S)),onBeforeShow:f},{default:a(()=>[e(pe,null,{default:a(()=>[e(le,{class:"q-py-sm"},{default:a(()=>[t("div",tv,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",av,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=S=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:a(()=>[e(se,{modelValue:p.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=S=>p.item.product_name=S),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=S=>p.item.quantity=S),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.cost,"onUpdate:modelValue":y[3]||(y[3]=S=>p.item.cost=S),label:"Modal / Harga Beli","hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:g.value,"onUpdate:modelValue":y[4]||(y[4]=S=>g.value=S),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:p.item.notes,"onUpdate:modelValue":y[5]||(y[5]=S=>p.item.notes=S),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},lv=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"})),ov={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(m,o)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[te(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Fo=vt(ov,[["__scopeId","data-v-a7905738"]]),nv=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),sv={class:"row items-center no-wrap"},rv={class:"col text-subtite text-bold text-grey-8"},iv={class:"col-auto"},zo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:m}){const o=p,i=m,n=()=>{i("save")},g=u=>{u.stopPropagation(),u.preventDefault()},b=u=>{o.modelValue&&(u.key==="Enter"?(n(),g(u)):u.key==="Escape"&&(i("update:modelValue",!1),g(u)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(u,f)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":f[4]||(f[4]=_=>u.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(le,{class:"q-py-sm"},{default:a(()=>[t("div",sv,[t("div",rv," Edit "+r(p.data.code),1),t("div",iv,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=_=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:a(()=>[e(Ht,{modelValue:p.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":f[2]||(f[2]=_=>u.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:p.data.notes,"onUpdate:modelValue":f[3]||(f[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},dv=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),uv={key:0},mv={style:{float:"right"}},cv={key:1},pv={style:{float:"right"}},fv={key:2},gv={style:{float:"right"}},bv={key:3},vv={style:{float:"right"}},_v={style:{float:"right"}},yv={class:"q-gutter-sm"},kv={class:"q-my-md"},wv={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),w("tr",uv,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",mv,r(l(H)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),w("tr",cv,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",pv,r(l(H)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),w("tr",fv,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",gv,r(l(H)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),w("tr",bv,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",vv,r(l(H)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",_v,r(l(H)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",yv,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",kv,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Lo=vt(wv,[["__scopeId","data-v-31d340fd"]]),hv=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),$v={class:"q-gutter-sm"},xv={class:"row items-center"},Sv={class:"text-weight-bold"},Vv={class:"row q-col-gutter-none full-width"},qv={class:"col-sm-6 col-12 col"},Cv={class:"row full-width"},Tv={class:"text-grey q-mt-xs q-ml-sm"},Pv={class:"col-sm-6 col-12"},Rv={class:"row q-ml-sm items-end"},Iv={class:"row col grow"},Ov={class:"col-12 q-pa-sm column"},Dv={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},Uv={key:0,class:"col"},jv={class:"text-caption text-grey-6 q-mt-xs"},Ev={key:0,class:"text-caption text-grey-8 q-mt-xs"},Av={class:"text-italic"},Bv={key:1,class:"col"},Mv={class:"q-pa-sm q-pb-none text-grey-8"},Nv={class:"col"},Fv={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},zv={class:"text-h4 text-weight-bold"},Lv={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Kv={class:"col q-py-sm"},Hv={class:"q-py-sm"},Wv={__name:"Editor",setup(p){const s=$e(),m=ge(),o=T(!0),i=T(null),n=T(null),g=T(null),b=T(!1),c=T(null),u=T(null),{isFullscreen:f,toggleFullscreen:_}=wa(u),y=m.props.data.code,S=T(m.props.data.supplier),q=T(null),x=T(""),D=T(!1),K=T(!1),R=T(!1),U=T(!1),O=T(!1),F=T(!1),B=T(null),h=De({id:m.props.data.id,code:m.props.data.code,supplier_id:m.props.data.supplier_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),j=ee(()=>h.items.reduce((re,W)=>re+W.cost*W.quantity,0)),P=()=>{var re;_(),f.value||(re=c==null?void 0:c.value)==null||re.hideDrawer()},$=re=>isNaN(re)||re<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,A=re=>isNaN(re)||re<0?(bt("Harga tidak valid.","top"),!1):!0,z=re=>!re||re.length==0?(bt("Barcode tidak valid.","top"),!1):!0,V=re=>{var W;(W=x.value)!=null&&W.endsWith("*")?x.value+=re.name:x.value=re.name},M=async()=>{if(D.value)return;const re=x.value.trim();if(re.length===0){R.value=!0;return}const W=re.split("*");let ye=1,de="",Q=null;if(W.length===1)de=W[0];else if(W.length<=3)ye=parseInt(W[0]),de=W[1],W.length===3&&(Q=parseFloat(W[2]));else{bt("Input tidak valid.","top");return}if(de.length===0){R.value=!0;return}!z(de)&&!$(ye)&&!A(Q)||(D.value=!0,await Oe.post(route("admin.purchase-order.add-item"),{order_id:h.id,product_code:de,qty:ye,cost:Q,merge:o.value}).then(qe=>{const Be=qe.data.data.item;let we=-1;qe.data.data.mergeItem&&(we=h.items.findIndex(ht=>ht.id===Be.id)),we===-1?h.items.push(Be):h.items[we]=Be,x.value="",Q!==null&&Q!==parseFloat(Be.cost)&&bt("Harga tidak dapat diubah!","top")}).catch(qe=>{var Be,we;pt((we=(Be=qe.response)==null?void 0:Be.data)==null?void 0:we.message,"top"),console.error("Gagal mengambil data produk:",qe)}),D.value=!1,ut(()=>{var qe;(qe=i.value)==null||qe.focus()}))},ae=re=>{B.value=Object.create(re),U.value=!0},ue=re=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${re.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{D.value=!0,Oe.post(route("admin.purchase-order.remove-item"),{id:re.id}).then(()=>{const W=h.items.findIndex(ye=>ye.id===re.id);W!==-1&&(h.items.splice(W,1)[0],ft("Item telah dihapus","top"))}).catch(W=>{var ye,de;pt(((de=(ye=W==null?void 0:W.response)==null?void 0:ye.data)==null?void 0:de.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(W)}).finally(()=>{D.value=!1})})},ie=()=>{D.value=!0;const re=n.value.getCurrentItem(),W={id:re.id,qty:re.quantity,cost:re.cost};re.notes&&(W.notes=re.notes),Oe.post(route("admin.purchase-order.update-item"),W).then(ye=>{const de=ye.data.data,Q=h.items.findIndex(qe=>qe.id===de.id);Q!==-1&&(h.items[Q]=de,ft("Item telah diperbarui","top"))}).catch(ye=>{var de,Q;pt(((Q=(de=ye==null?void 0:ye.response)==null?void 0:de.data)==null?void 0:Q.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ye)}).finally(()=>{D.value=!1})};he(()=>{const re=W=>{var ye;W.key==="F1"?(W.preventDefault(),b.value=!0):W.key==="F2"?(W.preventDefault(),g.value.focus()):W.key==="F3"?(W.preventDefault(),(ye=i.value)==null||ye.focus()):W.key==="F4"?(W.preventDefault(),o.value=!o.value):W.key==="F10"?(W.preventDefault(),K.value=!0):W.key==="F11"?(W.preventDefault(),P()):(W.key==="F5"||W.key==="F6"||W.key==="F7"||W.key==="F12")&&W.preventDefault()};document.addEventListener("keydown",re),wt(()=>{document.removeEventListener("keydown",re)}),ut(()=>{var W;(W=c==null?void 0:c.value)==null||W.hideDrawer()})});const Ie=async re=>{var W;S.value=re,h.supplier_id=re==null?void 0:re.id,await Xe(),re!=null&&re.id?(W=i.value)==null||W.focus():g.value.focus()},Xe=async()=>{D.value=!0;const re={id:h.id,supplier_id:h.supplier_id,datetime:ea(h.datetime),notes:h.notes};await Oe.post(route("admin.purchase-order.update"),re).then(W=>{const ye=W.data.data.id;h.supplier_id=ye.supplier_id}).catch(W=>{var ye,de;pt(((de=(ye=W==null?void 0:W.response)==null?void 0:ye.data)==null?void 0:de.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(W)}).finally(()=>{D.value=!1})},me=re=>{if(h.items.length===0){ft("Item masih kosong","top");return}const W={id:h.id,...re};D.value=!0,Oe.post(route("admin.purchase-order.close"),W).then(ye=>{ft("Transaksi selesai"),Z.visit(route("admin.purchase-order.detail",{id:h.id}))}).catch(ye=>{var de,Q;pt((Q=(de=ye.response)==null?void 0:de.data)==null?void 0:Q.message),console.error(ye)}).finally(()=>{D.value=!1})},L=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${h.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order.cancel",{id:h.id}),{id:h.id}).then(()=>{ft("Transaksi telah dibatalkan."),Z.visit(route("admin.purchase-order.detail",{id:h.id}))}).catch(re=>{var ye,de;const W=((de=(ye=re.response)==null?void 0:ye.data)==null?void 0:de.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:W,color:"warning",position:"bottom"}),console.error(re)})})},_e=()=>{window.open(route("admin.purchase-order.detail",{id:h.id})+"?preview=1","_blank")};return(re,W)=>{const ye=X("i-head"),de=X("authenticated-layout");return d(),w(J,null,[e(ye,{title:l(y)},null,8,["title"]),e(de,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[v(r(l(y)),1)]),"left-button":a(()=>[t("div",$v,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:W[0]||(W[0]=Q=>l(Z).get(re.route("admin.purchase-order.index")))})])]),"right-button":a(()=>[t("div",xv,[l(s).screen.gt.sm?(d(),w(J,{key:0},[t("div",Sv,r(l(m).props.auth.user.username),1),W[23]||(W[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ka)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:a(()=>[t("div",Vv,[t("div",qv,[t("div",Cv,[e(Oo,{ref_key:"supplierAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:S.value,"onUpdate:modelValue":W[2]||(W[2]=Q=>S.value=Q),label:"Pemasok",disable:D.value,onSupplierSelected:Ie,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),t("div",Tv," Saldo: "+r(S.value?"Rp. "+l(H)(S.value?S.value.balance:0):"Tidak tersedia"),1)])]),t("div",Pv,[e($a,{ref_key:"userInputRef",ref:i,modelValue:x.value,"onUpdate:modelValue":W[3]||(W[3]=Q=>x.value=Q),onKeyup:W[4]||(W[4]=Jt(G(Q=>M(),["prevent"]),["enter"])),onScanSuccess:W[5]||(W[5]=Q=>M()),onSend:W[6]||(W[6]=Q=>M()),onSearch:W[7]||(W[7]=Q=>R.value=!0),loading:D.value,disable:D.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",Rv,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":W[8]||(W[8]=Q=>o.value=Q),label:"Gabungkan item",disable:D.value},null,8,["modelValue","disable"])])])]),t("div",Iv,[t("div",Ov,[e(Bo,{items:h.items,onUpdateQuantity:W[9]||(W[9]=({id:Q,value:qe})=>re.updateQuantity(Q,qe)),onRemoveItem:ue,onEditItem:ae,"is-processing":D.value},null,8,["items","is-processing"])])]),t("div",Dv,[l(s).screen.gt.sm?(d(),w("div",Uv,[t("div",jv,r(h.items.length)+" item(s) ",1),h.notes?(d(),w("div",Ev,[W[24]||(W[24]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Av,[e(Se,{text:h.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",Bv,[t("div",Mv,[t("div",null,"#: "+r(h.code),1),t("div",null,r(l(ve)(h.datetime)),1)])])):k("",!0),t("div",Nv,[t("div",Fv,[W[26]||(W[26]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",zv,[W[25]||(W[25]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(H)(j.value)),1)])])])]),t("div",Lv,[t("div",Kv,[e(E,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:W[10]||(W[10]=Q=>K.value=!0),disable:!re.$can("admin.purchase-order.close")||D.value||h.items.length===0||h.status!=="draft",loading:D.value},null,8,["disable","loading"])]),t("div",Hv,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:W[14]||(W[14]=G(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:W[11]||(W[11]=G(Q=>O.value=!0,["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>W[27]||(W[27]=[v("Edit Rincian")])),_:1})]),_:1})),[[ne],[fe]]),te((d(),I(oe,{clickable:"",onClick:W[12]||(W[12]=G(Q=>_e(),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(N,null,{default:a(()=>W[28]||(W[28]=[v("Pratinjau")])),_:1})]),_:1})),[[ne],[fe]]),te((d(),I(oe,{clickable:"",onClick:W[13]||(W[13]=G(Q=>L(),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(N,{class:"text-negative"},{default:a(()=>W[29]||(W[29]=[v(" Batalkan ")])),_:1})]),_:1})),[[ne],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(No,{ref_key:"itemEditorRef",ref:n,modelValue:U.value,"onUpdate:modelValue":W[15]||(W[15]=Q=>U.value=Q),item:B.value,onSave:W[16]||(W[16]=Q=>ie()),"is-processing":D.value},null,8,["modelValue","item","is-processing"]),e(Mo,{modelValue:K.value,"onUpdate:modelValue":W[17]||(W[17]=Q=>K.value=Q),onAccepted:me,form:h,supplier:S.value,total:j.value,accounts:l(m).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(ha,{modelValue:R.value,"onUpdate:modelValue":W[18]||(W[18]=Q=>R.value=Q),"show-cost":!0,onProductSelected:V},null,8,["modelValue"]),e(zo,{modelValue:O.value,"onUpdate:modelValue":W[19]||(W[19]=Q=>O.value=Q),data:h,onSave:W[20]||(W[20]=Q=>Xe()),"is-processing":D.value},null,8,["modelValue","data","is-processing"]),e(Fo,{modelValue:b.value,"onUpdate:modelValue":W[21]||(W[21]=Q=>b.value=Q)},null,8,["modelValue"]),e(Lo,{modelValue:F.value,"onUpdate:modelValue":W[22]||(W[22]=Q=>F.value=Q),order:h,supplier:S.value,total:j.value,payment:q.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},Yv=Object.freeze(Object.defineProperty({__proto__:null,default:Wv},Symbol.toStringTag,{value:"Module"})),Ko={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.PURCHASE_ORDER_STATUSES,m={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(d(),I(Ft,{status:p.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}},Ho={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,m={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(d(),I(Ft,{status:p.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}};const Qv={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Jv={class:"q-pa-xs"},Gv={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Xv={key:0},Zv={key:1},e_={key:2},t_={key:0},a_={key:0},l_={key:1},o_={class:"flex justify-end"},Rl="Pembelian",n_={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=zt(),u=Lt(),f=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...Ot(c-2,c-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Dt()],y=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],S=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],q=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],x=De({search:"",year:c,month:u,status:"all",payment_status:"all",delivery_status:"all",...Le()}),D=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),K=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp.)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{h()});const R=$=>{if($.status=="draft"){U($);return}O($)},U=$=>{Z.get(route("admin.purchase-order.edit",$.id))},O=$=>{Z.get(route("admin.purchase-order.detail",$.id))},F=$=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.purchase-order.cancel",{id:$.id}),{id:$.id}).then(A=>{const z=A.data.data,V=o.value.findIndex(M=>M.id===z.id);if(V===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[V].status="canceled",s.notify({message:A.data.message,position:"bottom"})}).catch(A=>{var V,M;const z=((M=(V=A.response)==null?void 0:V.data)==null?void 0:M.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:z,color:"warning",position:"bottom"}),console.error(A)})})},B=$=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.purchase-order.delete",$.id),fetchItemsCallback:h,loading:i}),h=($=null)=>{Ke({pagination:D,filter:x,props:$,rows:o,url:route("admin.purchase-order.data"),loading:i,tableRef:n})},j=()=>{h()},P=ee(()=>s.screen.gt.sm?K:K.filter($=>$.name==="id"||$.name==="action"));return Ne(()=>x.year,$=>{$===null&&(x.month=null)}),($,A)=>{const z=X("i-head"),V=X("authenticated-layout");return d(),w(J,null,[e(z,{title:Rl}),e(V,null,Fe({title:a(()=>[v(r(Rl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=M=>m.value=!m.value)},null,8,["icon"]),$.$can("admin.purchase-order.edit")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:A[1]||(A[1]=M=>l(Z).get($.route("admin.purchase-order.add")))})):k("",!0)]),default:a(()=>[t("div",Jv,[e(je,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":A[11]||(A[11]=M=>D.value=M),filter:x.search,loading:i.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:h,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:M,message:ae,filter:ue})=>[t("div",Gv,[t("span",null,r(ae)+" "+r(ue?" with term "+ue:""),1)])]),body:a(M=>[e(Re,{props:M,class:"cursor-pointer",onClick:G(ae=>R(M.row),["prevent"])},{default:a(()=>[e(Y,{key:"id",props:M,class:"wrap-column"},{default:a(()=>[t("div",null,[e(C,{name:"tag"}),v(" "+r(M.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(M.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[M.row.supplier?(d(),w("div",Xv,[e(C,{name:"person",class:"inline-icon"}),e(_a,{href:$.route("admin.supplier.detail",{id:M.row.supplier.id}),onClick:A[8]||(A[8]=G(()=>{},["stop"]))},{default:a(()=>[v(" "+r(M.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Total: Rp. "+r(l(H)(M.row.grand_total)),1),M.row.balance!=0?(d(),w("div",Zv," Saldo: Rp. "+r(l($t)(M.row.balance)),1)):k("",!0),M.row.notes?(d(),w("div",e_,[e(C,{name:"notes"}),v(" "+r(M.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Ko,{status:M.row.status},null,8,["status"]),M.row.status=="closed"?(d(),w(J,{key:0},[e(Ho,{status:M.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]),_:2},1032,["props"]),e(Y,{key:"supplier_id",props:M},{default:a(()=>[M.row.supplier?(d(),w("div",t_,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(M.row.supplier_name),1)]),M.row.supplier_phone?(d(),w("div",a_,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(M.row.supplier_phone),1)])):k("",!0),M.row.supplier_address?(d(),w("div",l_,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(M.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:M},{default:a(()=>[v(r(l(H)(M.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:M},{default:a(()=>[v(r(l($t)(M.row.balance)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:M},{default:a(()=>[e(Se,{text:M.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:M,onClick:A[10]||(A[10]=G(()=>{},["stop"]))},{default:a(()=>[t("div",o_,[$.$can("admin.purchase-order.detail")||$.$can("admin.purchase-order.edit")||$.$can("admin.purchase-order.cancel")||$.$can("admin.purchase-order.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:A[9]||(A[9]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[M.row.status!="draft"&&$.$can("admin.purchase-order.detail")?te((d(),I(oe,{key:0,onClick:G(ae=>O(M.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(N,null,{default:a(()=>A[12]||(A[12]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),M.row.status=="draft"&&$.$can("admin.purchase-order.edit")?te((d(),I(oe,{key:1,onClick:G(ae=>U(M.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>A[13]||(A[13]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),M.row.status=="draft"&&$.$can("admin.purchase-order.cancel")?te((d(),I(oe,{key:2,onClick:G(ae=>F(M.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(N,null,{default:a(()=>A[14]||(A[14]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),e(Pe),$.$can("admin.purchase-order.delete")?te((d(),I(oe,{key:3,onClick:G(ae=>B(M.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>A[15]||(A[15]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",Qv,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[A[2]||(A[2]=M=>x.year=M),j],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(d(),I(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[A[3]||(A[3]=M=>x.month=M),j],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.status,"onUpdate:modelValue":[A[4]||(A[4]=M=>x.status=M),j],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:x.payment_status,"onUpdate:modelValue":[A[5]||(A[5]=M=>x.payment_status=M),j],options:S,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":A[7]||(A[7]=M=>x.search=M),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},s_=Object.freeze(Object.defineProperty({__proto__:null,default:n_},Symbol.toStringTag,{value:"Module"})),r_={class:"q-pa-xs"},i_={class:"row items-center full-width"},d_={class:"col text-left text-bold text-grey-9"},u_={class:"q-pa-md"},m_={class:"text-h6 text-primary q-mb-md"},Il="Laporan",c_={__name:"Index",setup(p){const s=$e(),m=T("sales"),o=ee(()=>s.screen.lt.md),i={sales:{label:"Penjualan",icon:"o_payments",reports:[{title:"Keuntungan Penjualan",subtitle:"Daftar penjualan berikut laba kotor",icon:"analytics",route:"admin.report.sales-order.gross-profit"}]},purchasing:{label:"Pembelian",icon:"o_shopping_cart",reports:[{title:"Rincian Pembelian",subtitle:"Daftar rincian pembelian",icon:"o_receipt_long",route:"admin.report.purchase-order.detail"},{title:"Supplier",subtitle:"Daftar supplier",icon:"o_groups",route:"admin.report.vendor.list"}]}},n=[{id:"sales",...i.sales},{id:"purchasing",...i.purchasing}];return(g,b)=>{const c=X("i-head"),u=X("authenticated-layout");return d(),w(J,null,[e(c,{title:Il}),e(u,null,{title:a(()=>[v(r(Il))]),"right-button":a(()=>b[2]||(b[2]=[])),default:a(()=>[t("div",r_,[e(pe,{flat:"",bordered:"",class:"report-container full-width"},{default:a(()=>[e(qt,{modelValue:m.value,"onUpdate:modelValue":b[0]||(b[0]=f=>m.value=f),dense:"",class:"text-grey-7",align:"left",vertical:!o.value,"switch-indicator":o.value,"inline-label":o.value,"mobile-arrows":o.value,breakpoint:0},{default:a(()=>[(d(),w(J,null,Ue(n,f=>e(it,{key:f.id,name:f.id,class:xe({"bg-blue-2":m.value===f.id&&!o.value,"q-py-md":!o.value,"q-py-sm":o.value}),"content-class":"full-width",style:{"min-height":"50px"}},{default:a(()=>[t("div",i_,[o.value?k("",!0):(d(),I(C,{key:0,name:f.icon,class:"q-mr-md"},null,8,["name"])),t("div",d_,r(f.label),1),f.count&&!o.value?(d(),I(gt,{key:1,color:"grey-5","text-color":"dark",rounded:"",label:f.count,class:"q-ml-sm"},null,8,["label"])):k("",!0)])]),_:2},1032,["name","class"])),64))]),_:1},8,["modelValue","vertical","switch-indicator","inline-label","mobile-arrows"]),e(Pe,{vertical:!o.value},null,8,["vertical"]),b[3]||(b[3]=t("div",null,null,-1)),e(Ct,{modelValue:m.value,"onUpdate:modelValue":b[1]||(b[1]=f=>m.value=f),animated:"",class:"q-pa-none"},{default:a(()=>[e(nt,{name:"purchasing",class:"q-pa-none"},{default:a(()=>[e(Ae,{separator:""},{default:a(()=>[(d(!0),w(J,null,Ue(i.purchasing.reports,(f,_)=>te((d(),I(oe,{key:_,clickable:"",class:"q-py-md",onClick:G(y=>l(Z).get(g.route(f.route)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:f.icon,size:"28px",color:"grey"},null,8,["name"])]),_:2},1024),e(N,null,{default:a(()=>[e(ke,{class:"text-weight-bold text-dark"},{default:a(()=>[v(r(f.title),1)]),_:2},1024),e(ke,{caption:""},{default:a(()=>[v(r(f.subtitle),1)]),_:2},1024)]),_:2},1024),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right",color:"grey"})]),_:1})]),_:2},1032,["onClick"])),[[ne]])),128))]),_:1})]),_:1}),e(nt,{name:"sales",class:"q-pa-none"},{default:a(()=>[e(Ae,{separator:""},{default:a(()=>[(d(!0),w(J,null,Ue(i.sales.reports,(f,_)=>te((d(),I(oe,{key:_,clickable:"",class:"q-py-md",onClick:G(y=>l(Z).get(g.route(f.route)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:f.icon,size:"28px",color:"grey"},null,8,["name"])]),_:2},1024),e(N,null,{default:a(()=>[e(ke,{class:"text-weight-bold text-dark"},{default:a(()=>[v(r(f.title),1)]),_:2},1024),e(ke,{caption:""},{default:a(()=>[v(r(f.subtitle),1)]),_:2},1024)]),_:2},1024),e(N,{side:""},{default:a(()=>[e(C,{name:"chevron_right",color:"grey"})]),_:1})]),_:2},1032,["onClick"])),[[ne]])),128))]),_:1})]),_:1}),(d(),w(J,null,Ue(n,f=>e(nt,{key:f.id,name:f.id,class:xe({hidden:["purchasing","sales"].includes(f.id)})},{default:a(()=>[t("div",u_,[t("div",m_," Laporan "+r(f.label),1),t("p",null," Saat ini tidak ada daftar laporan spesifik yang ditampilkan. Klik tombol di bawah untuk melihat semua daftar laporan di kategori **"+r(f.label)+"**. ",1),e(E,{label:"Lihat Semua Laporan",color:"primary","icon-right":"arrow_forward"})])]),_:2},1032,["name","class"])),64))]),_:1},8,["modelValue"])]),_:1})])]),_:1})],64)}}},p_=vt(c_,[["__scopeId","data-v-f0203c0b"]]),f_=Object.freeze(Object.defineProperty({__proto__:null,default:p_},Symbol.toStringTag,{value:"Module"})),g_={class:"q-gutter-sm"},b_={class:"col col-md-6 q-pa-xs"},Ol="Tambah Retur Penjualan",v_={__name:"Create",setup(p){const s=ge(),m=Qe({code:s.props.data.code}),o=()=>rt({form:m,url:route("admin.sales-order-return.add")});return(i,n)=>{const g=X("i-head"),b=X("authenticated-layout");return d(),w(J,null,[e(g,{title:Ol}),e(b,null,{title:a(()=>[v(r(Ol))]),"left-button":a(()=>[t("div",g_,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.sales-order-return.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",b_,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[e(se,{autofocus:"",modelValue:l(m).code,"onUpdate:modelValue":n[1]||(n[1]=c=>l(m).code=c),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(m).errors.code,disable:l(m).processing,"error-message":l(m).errors.code,rules:[c=>c&&c.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(m).processing},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",disable:l(m).processing,onClick:n[2]||(n[2]=c=>l(Z).get(i.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},__=Object.freeze(Object.defineProperty({__proto__:null,default:v_},Symbol.toStringTag,{value:"Module"})),y_={class:"column"},k_={class:"bg-grey-2 q-pa-xs"},w_={class:"text-subtitle1 text-bold text-grey-10"},h_={class:"text-caption text-grey-8"},$_={class:"col-12 col-sm-6"},x_={class:"full-width"},S_={key:1},V_={key:0},q_={key:1},C_={class:"col-12 col-sm-6",align:"left"},T_={class:"full-width"},P_={class:"full-width",style:{"border-collapse":"collapse"}},R_={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},I_={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},O_={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},D_={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},U_={key:0},j_={class:"col-12 col-sm-6"},E_={class:"text-body2 text-grey-7 text-italic"},A_={class:"col-12 col-sm-6"},B_={class:"row justify-end q-gutter-y-xs"},M_={class:"col-12 row justify-between"},N_={class:"text-subtitle2 text-bold"},F_={class:"row justify-end q-gutter-y-xs"},z_={class:"col-12 row justify-between"},L_={class:"text-subtitle2 text-bold"},K_={class:"row justify-end q-gutter-y-xs"},H_={class:"col-12 row justify-between"},W_={class:"text-subtitle2 text-bold"},Wo={__name:"MainInfoTab",props:{data:Object},setup(p){const s=p;return(m,o)=>{const i=X("i-link"),n=X("my-link");return d(),w("div",y_,[e(le,{class:"q-pa-none"},{default:a(()=>{var g,b;return[t("div",k_,[t("div",w_," RETUR #"+r(s.data.code),1),t("div",h_,[v(" Kasir: "+r((g=s.data.cashier)==null?void 0:g.username)+" - "+r((b=s.data.cashier)==null?void 0:b.name)+" | "+r(l(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),w(J,{key:0},[v(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]}),_:1}),e(Pe),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",$_,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",x_,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),I(i,{key:0,href:m.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[e(C,{class:"inline-icon",name:"person"}),v(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(d(),w("div",S_,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(d(),w("tr",V_,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(d(),w("tr",q_,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",C_,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",T_,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:m.route("admin.sales-order.detail",{id:s.data.sales_order_id})},{default:a(()=>[v(r(s.data.sales_order_id?s.data.sales_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Pe),e(le,{class:"q-pa-sm"},{default:a(()=>[t("table",P_,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(J,null,Ue(s.data.details,g=>(d(),w("tr",{key:g.id},[t("td",R_,[e(i,{href:m.route("admin.product.detail",g.product_id)},{default:a(()=>[v(r(g.product_name),1)]),_:2},1032,["href"])]),t("td",I_,r(l(H)(g.price)),1),t("td",O_,r(g.quantity),1),t("td",D_,r(l(H)(g.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),w("tr",U_,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(le,{class:"row",align:"left"},{default:a(()=>[t("div",j_,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",E_,r(s.data.notes?s.data.notes:"-"),1)]),t("div",A_,[t("div",B_,[t("div",M_,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",N_,r(l(H)(s.data.grand_total)),1)])]),t("div",F_,[t("div",z_,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",L_,r(l(H)(parseFloat(-s.data.total_refunded))),1)])]),t("div",K_,[t("div",H_,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",W_,r(l(H)(s.data.remaining_refund)),1)])])])]),_:1})])}}},Y_=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),Q_={key:0,class:"text-center q-mb-md text-grey-8"},J_={class:"text-subtitle2 text-weight-medium"},G_={class:"text-h5 text-center text-primary q-pb-md"},X_={class:"text-center q-mt-md"},Z_={key:0,class:"text-h6 text-negative text-weight-bold"},ey={key:1,class:"text-h6 text-positive text-weight-bold"},Yo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const m=p,o=s,i=ge(),n=T(!1),g=T({method:"cash",amount:m.total,notes:null}),b=i.props.data.customer,c=ee(()=>[...b?[{label:"Refund ke Wallet",value:"wallet"}]:[],{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(q=>({label:q.name,value:q.id}))]),u=ee(()=>m.total-(g.value.amount||0)),f=ee(()=>{const q=g.value.amount||0;return q<=0?"Jumlah pembayaran harus lebih dari 0.":q>m.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=ee(()=>f.value===null),y=()=>{if(!_.value)return;n.value=!0;const q={id:g.value.method,amount:g.value.amount,notes:g.value.notes};o("accepted",q),n.value=!1},S=()=>{g.value.amount=m.total,g.value.method="cash",g.value.notes=null};return(q,x)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":x[4]||(x[4]=D=>q.$emit("update:modelValue",D)),onBeforeShow:S},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,null,{default:a(()=>x[5]||(x[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",Q_,[t("div",J_,[v(r(l(b).code)+" ",1),x[6]||(x[6]=t("br",null,null,-1)),v(" "+r(l(b).name)+" ",1),x[7]||(x[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(l(H)(l(b).wallet_balance)),1)])])):k("",!0),t("div",G_," Total: Rp. "+r(l(H)(p.total)),1),e(l(ce),{modelValue:g.value.method,"onUpdate:modelValue":x[0]||(x[0]=D=>g.value.method=D),options:c.value,label:g.value.method=="wallet"?"Tujuan":"Sumber Dana",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","label","disable"]),e(Me,{modelValue:g.value.amount,"onUpdate:modelValue":x[1]||(x[1]=D=>g.value.amount=D),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":f.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:g.value.notes,"onUpdate:modelValue":x[2]||(x[2]=D=>g.value.notes=D),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",X_,[u.value>0?(d(),w("div",Z_," Sisa Refund: Rp. "+r(l(H)(u.value)),1)):(d(),w("div",ey," Refund Lunas "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:x[3]||(x[3]=D=>q.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ty=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),ay={class:"column"},ly={class:"row"},oy={class:"full-width",style:{"border-collapse":"collapse"}},ny={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},sy={class:"row items-center q-gutter-x-sm"},ry={class:"text-weight-bold"},iy={class:"row items-center q-gutter-x-sm q-mt-xs"},dy={class:"text-caption text-grey-6"},uy={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},my={class:"text-caption text-grey-6"},cy={class:"q-mt-xs"},py={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},fy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},gy={key:0},by={class:"text-right q-pa-sm"},Qo={__name:"RefundTab",props:{data:Object},setup(p){const s=p,m=$e(),o=T(!1),i=()=>{o.value=!0},n=ee(()=>s.data.remaining_refund),g=async c=>{const u={order_id:s.data.id,...c};m.loading.show({message:"Memproses pembayaran..."});try{const f=await Oe.post(route("admin.sales-order-return.add-refund"),u);m.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Z.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(f){let _="Gagal memproses refund.";f.response&&f.response.data&&f.response.data.message?_=f.response.data.message:f.message&&(_=f.message),m.notify({message:_,color:"negative",icon:"error"})}finally{m.loading.hide()}},b=c=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.sales-order-return.delete-refund",{id:c.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Z.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(u){let f="Gagal menghapus refund pembayaran.";u.response&&u.response.data&&u.response.data.message?f=u.response.data.message:u.message&&(f=u.message),m.notify({message:f,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(c,u)=>(d(),w(J,null,[t("div",ay,[e(Pe),e(le,{class:"q-pa-sm"},{default:a(()=>[t("div",ly,[c.$can("admin.sales-order-return.add-refund")?(d(),I(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:u[0]||(u[0]=G(f=>i(),["stop"]))})):k("",!0)]),t("table",oy,[u[5]||(u[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(J,null,Ue(s.data.refunds,f=>(d(),w("tr",{key:f.id},[t("td",ny,[t("div",sy,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",ry,r(f.code),1)]),t("div",iy,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",dy,r(l(ve)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(d(),w("div",uy,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),t("span",my,r(f.account.name),1)])):k("",!0),t("div",cy,[e(gt,{label:c.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",py,r(l(H)(f.amount)),1),t("td",fy,[c.$can("admin.sales-order-return.delete-refund")?(d(),I(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>b(f)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(d(),w("tr",gy,u[2]||(u[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[u[3]||(u[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund",-1)),t("th",by,r(l(H)(parseFloat(-s.data.total_refunded))),1),u[4]||(u[4]=t("th",null,null,-1))])])])]),_:1})]),e(Yo,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=f=>o.value=f),total:n.value,customer:s.data.customer,onAccepted:g},null,8,["modelValue","total","customer"])],64))}},vy=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),_y={class:"q-gutter-sm"},yy={class:"col col-lg-6 q-pa-xs",align:"center"},Dl="Retur Penjualan",ky={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),m=ge(),o=m.props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"main-info");he(()=>{ut(()=>{const c=s.get("print_size");c&&b(c)})});const b=c=>{window.open(route("admin.sales-order-return.print",{id:m.props.data.id,size:c}),"_self")};return(c,u)=>{const f=X("i-head"),_=X("authenticated-layout");return d(),w(J,null,[e(f,{title:Dl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Dl))])]),"left-button":a(()=>[t("div",_y,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>c.$goBack())})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=y=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[2]||(u[2]=y=>b("a4"))}),i.value?k("",!0):(d(),I(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[3]||(u[3]=y=>l(Z).get(c.route("admin.sales-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",yy,[e(pe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(qt,{modelValue:g.value,"onUpdate:modelValue":u[4]||(u[4]=y=>g.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(it,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(d(),I(it,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Ct,{modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=y=>g.value=y),animated:""},{default:a(()=>[e(nt,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(Wo,{data:l(o)},null,8,["data"])]),_:1}),e(nt,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(Qo,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},wy=Object.freeze(Object.defineProperty({__proto__:null,default:ky},Symbol.toStringTag,{value:"Module"})),hy={class:"text-weight-medium"},$y={class:"text-caption text-grey-6 elipsis"},xy={class:"column items-end"},Sy={class:"text-caption text-grey-6 text-italic"},Jo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=$e(),m=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(je,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:l(m)})},{header:a(g=>[e(Re,{props:g,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(J,null,Ue(g.cols,b=>(d(),I(ta,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(g=>[e(Re,{props:g,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:g,class:"text-left wrap-column"},{default:a(()=>[t("div",hy,r(g.row.product_name),1),t("div",$y,r(g.row.product_barcode),1),g.row.notes?(d(),I(Se,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal_price",props:g,class:"text-right"},{default:a(()=>[t("div",xy,[t("div",null,r(l(H)(g.row.subtotal_price)),1),t("div",Sy,r(l(H)(g.row.quantity))+" x Rp. "+r(l(H)(g.row.price)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Vy=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),qy={class:"row items-center no-wrap"},Cy={class:"col-auto"},Go={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:m}){const o=p,i=m,n=()=>{i("save")},g=ee(()=>o.item.quantity*o.item.price),b=f=>{f.stopPropagation(),f.preventDefault()},c=f=>{o.modelValue&&(f.key==="Enter"?(n(),i("update:modelValue",!1),b(f)):f.key==="Escape"&&(i("update:modelValue",!1),b(f)))};return he(()=>{window.addEventListener("keydown",c)}),wt(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item}),(f,_)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>f.$emit("update:modelValue",y))},{default:a(()=>[e(pe,null,{default:a(()=>[e(le,{class:"q-py-sm"},{default:a(()=>[t("div",qy,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Cy,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>f.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:a(()=>[e(se,{modelValue:p.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=y=>p.item.product_name=y),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=y=>p.item.quantity=y),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.price,"onUpdate:modelValue":_[3]||(_[3]=y=>p.item.price=y),label:"Harga","hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=y=>g.value=y),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:p.item.notes,"onUpdate:modelValue":_[5]||(_[5]=y=>p.item.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ty=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"})),Py={key:0,class:"q-select__selected-item"},Xo={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(p,{expose:s,emit:m}){const o=T(null),i=p,n=m,g=T([]);let b=null;const c=T(i.modelValue);he(()=>{i.initialData&&(c.value=i.initialData)}),Ne(c,_=>{n("update:modelValue",_),n("customerSelected",_)}),Ne(()=>i.modelValue,_=>{c.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const f=(_,y)=>{if(_.length<i.minLength){y(()=>{g.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Oe.get(`/web-api/customers?q=${_}`).then(S=>{y(()=>{g.value=S.data.data})}).catch(S=>{console.error("Gagal mengambil data pelanggan:",S),y(()=>{g.value=[]})})},500)};return(_,y)=>(d(),I(ce,{class:xe(p.class),ref_key:"qSelectRef",ref:o,modelValue:c.value,"onUpdate:modelValue":y[0]||(y[0]=S=>c.value=S),"use-input":"","input-debounce":"0",label:p.label,options:g.value,onFilter:f,clearable:"",error:p.error,behavior:"menu","error-message":p.errorMessage,disable:p.disable,"hide-bottom-space":"",outlined:p.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a(S=>[e(oe,Ba(ro(S.itemProps)),{default:a(()=>[e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>[v(r(S.opt.name),1)]),_:2},1024),e(ke,{caption:""},{default:a(()=>[e(C,{name:"person",size:"14px"}),v(" "+r(S.opt.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":a(S=>[S.opt?(d(),w("div",Py,r(S.opt.name)+" ("+r(S.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Ry={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(m,o)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[te(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Zo=vt(Ry,[["__scopeId","data-v-22783525"]]),Iy=Object.freeze(Object.defineProperty({__proto__:null,default:Zo},Symbol.toStringTag,{value:"Module"})),Oy={class:"row items-center no-wrap"},Dy={class:"col text-subtite text-bold text-grey-8"},Uy={class:"col-auto"},en={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:m}){const o=p,i=m,n=()=>{i("save")},g=u=>{u.stopPropagation(),u.preventDefault()},b=u=>{o.modelValue&&(u.key==="Enter"?(n(),g(u)):u.key==="Escape"&&(i("update:modelValue",!1),g(u)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(u,f)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":f[4]||(f[4]=_=>u.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(le,{class:"q-py-sm"},{default:a(()=>[t("div",Oy,[t("div",Dy," Edit "+r(p.data.code),1),t("div",Uy,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=_=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:a(()=>[e(Ht,{modelValue:p.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":f[2]||(f[2]=_=>u.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:p.data.notes,"onUpdate:modelValue":f[3]||(f[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},jy=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),Ey={class:"q-gutter-sm"},Ay={class:"row items-center"},By={class:"text-weight-bold"},My={class:"row q-col-gutter-none full-width"},Ny={class:"col-sm-6 col-12 col"},Fy={class:"row full-width"},zy={key:0,class:"row"},Ly={class:"col-sm-6 col-12"},Ky={class:"row q-ml-sm items-end"},Hy={class:"row col grow"},Wy={class:"col-12 q-pa-sm column"},Yy={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},Qy={key:0,class:"col"},Jy={class:"text-caption text-grey-6 q-mt-xs"},Gy={key:0,class:"text-caption text-grey-8 q-mt-xs"},Xy={class:"text-italic"},Zy={key:1,class:"col"},ek={class:"q-pa-sm q-pb-none text-grey-8"},tk={class:"col"},ak={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},lk={class:"text-h4 text-weight-bold"},ok={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},nk={class:"col q-py-sm"},sk={class:"q-py-sm"},rk={__name:"Editor",setup(p){const s=$e(),m=ge(),o=T(!0),i=T(null),n=T(null),g=T(null),b=T(!1),c=T(null),u=T(null),{isFullscreen:f,toggleFullscreen:_}=wa(u),y="Retur #"+m.props.data.code,S=T(m.props.data.customer),q=T(""),x=T(!1),D=T(!1),K=T(!1),R=T(!1),U=T(null),O=De({id:m.props.data.id,code:m.props.data.code,customer_id:m.props.data.customer_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),F=ee(()=>O.items.reduce((me,L)=>me+L.price*L.quantity,0)),B=()=>{var me;_(),f.value||(me=c==null?void 0:c.value)==null||me.hideDrawer()},h=me=>isNaN(me)||me<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,j=me=>isNaN(me)||me<0?(bt("Harga tidak valid.","top"),!1):!0,P=me=>!me||me.length==0?(bt("Barcode tidak valid.","top"),!1):!0,$=me=>{var L;(L=q.value)!=null&&L.endsWith("*")?q.value+=me.name:q.value=me.name},A=async()=>{if(x.value)return;const me=q.value.trim();if(me.length===0){D.value=!0;return}const L=me.split("*");let _e=1,re="",W=null;if(L.length===1)re=L[0];else if(L.length<=3)_e=parseInt(L[0]),re=L[1],L.length===3&&(W=parseFloat(L[2]));else{bt("Input tidak valid.","top");return}if(re.length===0){D.value=!0;return}!P(re)&&!h(_e)&&!j(W)||(x.value=!0,await Oe.post(route("admin.sales-order-return.add-item"),{order_id:O.id,product_code:re,qty:_e,price:W,merge:o.value}).then(ye=>{const de=ye.data.data.item;let Q=-1;ye.data.data.mergeItem&&(Q=O.items.findIndex(qe=>qe.id===de.id)),Q===-1?O.items.push(de):O.items[Q]=de,q.value="",W!==null&&W!==parseFloat(de.price)&&bt("Harga tidak dapat diubah!","top")}).catch(ye=>{var de,Q;pt((Q=(de=ye.response)==null?void 0:de.data)==null?void 0:Q.message,"top"),console.error("Gagal mengambil data produk:",ye)}),x.value=!1,ut(()=>{var ye;(ye=i.value)==null||ye.focus()}))},z=me=>{U.value=Object.create(me),K.value=!0},V=me=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${me.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{x.value=!0,Oe.post(route("admin.sales-order-return.remove-item"),{id:me.id}).then(()=>{const L=O.items.findIndex(_e=>_e.id===me.id);L!==-1&&(O.items.splice(L,1)[0],ft("Item telah dihapus","top"))}).catch(L=>{var _e,re;pt(((re=(_e=L==null?void 0:L.response)==null?void 0:_e.data)==null?void 0:re.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(L)}).finally(()=>{x.value=!1})})},M=()=>{x.value=!0;const me=n.value.getCurrentItem(),L={id:me.id,qty:me.quantity,price:me.price};me.notes&&(L.notes=me.notes),Oe.post(route("admin.sales-order-return.update-item"),L).then(_e=>{const re=_e.data.data,W=O.items.findIndex(ye=>ye.id===re.id);W!==-1&&(O.items[W]=re,ft("Item telah diperbarui","top")),K.value=!1}).catch(_e=>{var re,W;pt(((W=(re=_e==null?void 0:_e.response)==null?void 0:re.data)==null?void 0:W.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(_e)}).finally(()=>{x.value=!1})};he(()=>{const me=L=>{b.value||K.value||D.value||R.value||(L.key==="F1"?(L.preventDefault(),b.value=!0):L.key==="F2"?(L.preventDefault(),g.value.focus()):L.key==="F3"?(L.preventDefault(),i.value.focus()):L.key==="F4"?(L.preventDefault(),o.value=!o.value):L.key==="F10"||L.ctrlKey&&L.key==="Enter"?(L.preventDefault(),ue()):L.key==="F11"?(L.preventDefault(),B()):(L.key==="F5"||L.key==="F6"||L.key==="F7"||L.key==="F12")&&L.preventDefault())};document.addEventListener("keydown",me),wt(()=>{document.removeEventListener("keydown",me)}),ut(()=>{var L;(L=c==null?void 0:c.value)==null||L.hideDrawer()})});const ae=async()=>{x.value=!0;const me={id:O.id,customer_id:O.customer_id??null,datetime:ea(O.datetime),notes:O.notes};await Oe.post(route("admin.sales-order-return.update"),me).then(L=>{const _e=L.data.data.id;O.customer_id=_e.customer_id}).catch(L=>{var _e,re;pt(((re=(_e=L==null?void 0:L.response)==null?void 0:_e.data)==null?void 0:re.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(L)}).finally(()=>{x.value=!1})},ue=me=>{if(O.items.length===0){ft("Item masih kosong","top");return}xt.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{x.value=!0,Oe.post(route("admin.sales-order-return.close",{id:O.id})).then(L=>{ft("Transaksi selesai"),Z.get(route("admin.sales-order-return.detail",{id:O.id}))}).catch(L=>{var _e,re;pt((re=(_e=L.response)==null?void 0:_e.data)==null?void 0:re.message),console.error(L)}).finally(()=>{x.value=!1})})},ie=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${O.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order-return.cancel",{id:O.id}),{id:O.id}).then(()=>{ft("Transaksi telah dibatalkan."),Z.visit(route("admin.sales-order-return.detail",{id:O.id}))}).catch(me=>{var _e,re;const L=((re=(_e=me.response)==null?void 0:_e.data)==null?void 0:re.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:L,color:"warning",position:"bottom"}),console.error(me)})})},Ie=()=>{window.open(route("admin.sales-order-return.detail",{id:O.id})+"?preview=1","_blank")},Xe=ee(()=>S.value?S.value.wallet_balance>=F.value:!0);return(me,L)=>{const _e=X("i-head"),re=X("authenticated-layout");return d(),w(J,null,[e(_e,{title:y}),e(re,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[v(r(y))]),"left-button":a(()=>[t("div",Ey,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:L[0]||(L[0]=W=>l(Z).get(me.route("admin.sales-order-return.index")))})])]),"right-button":a(()=>[t("div",Ay,[l(s).screen.gt.sm?(d(),w(J,{key:0},[t("div",By,r(l(m).props.auth.user.username),1),L[21]||(L[21]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ka)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:a(()=>[t("div",My,[t("div",Ny,[t("div",Fy,[e(Xo,{ref_key:"customerAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:S.value,"onUpdate:modelValue":L[2]||(L[2]=W=>S.value=W),label:"Pelanggan",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),S.value?(d(),w("div",zy,[t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",Xe.value?"text-green":"text-red"])}," Wallet: "+r(S.value?"Rp. "+l(H)(S.value?S.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",S.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(S.value?"Rp. "+l(H)(S.value?S.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",Ly,[e($a,{ref_key:"userInputRef",ref:i,modelValue:q.value,"onUpdate:modelValue":L[3]||(L[3]=W=>q.value=W),onKeyup:L[4]||(L[4]=Jt(G(W=>A(),["prevent"]),["enter"])),onScanSuccess:L[5]||(L[5]=W=>A()),onSend:L[6]||(L[6]=W=>A()),onSearch:L[7]||(L[7]=W=>D.value=!0),loading:x.value,disable:x.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",Ky,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":L[8]||(L[8]=W=>o.value=W),label:"Gabungkan item",disable:x.value},null,8,["modelValue","disable"])])])]),t("div",Hy,[t("div",Wy,[e(Jo,{items:O.items,onUpdateQuantity:L[9]||(L[9]=({id:W,value:ye})=>me.updateQuantity(W,ye)),onRemoveItem:V,onEditItem:z,"is-processing":x.value},null,8,["items","is-processing"])])]),t("div",Yy,[l(s).screen.gt.sm?(d(),w("div",Qy,[t("div",Jy,r(O.items.length)+" item(s) ",1),O.notes?(d(),w("div",Gy,[L[22]||(L[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Xy,[e(Se,{text:O.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",Zy,[t("div",ek,[t("div",null,"Return #: "+r(O.code),1),t("div",null,"Order #: "+r(l(m).props.data.sales_order.code),1),t("div",null,r(l(ve)(O.datetime)),1)])])):k("",!0),t("div",tk,[t("div",ak,[L[24]||(L[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",lk,[L[23]||(L[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(H)(F.value)),1)])])])]),t("div",ok,[t("div",nk,[e(E,{class:"full-width q-py-none",label:"Selesai",color:"primary",icon:"payment",onClick:L[10]||(L[10]=W=>ue()),disable:!me.$can("admin.sales-order-return.close")||x.value||O.items.length===0||O.status!=="draft",loading:x.value},null,8,["disable","loading"])]),t("div",sk,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:L[14]||(L[14]=G(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:L[11]||(L[11]=G(W=>R.value=!0,["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>L[25]||(L[25]=[v("Edit Rincian")])),_:1})]),_:1})),[[ne],[fe]]),te((d(),I(oe,{clickable:"",onClick:L[12]||(L[12]=G(W=>Ie(),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(N,null,{default:a(()=>L[26]||(L[26]=[v("Pratinjau")])),_:1})]),_:1})),[[ne],[fe]]),te((d(),I(oe,{clickable:"",onClick:L[13]||(L[13]=G(W=>ie(),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(N,{class:"text-negative"},{default:a(()=>L[27]||(L[27]=[v(" Batalkan ")])),_:1})]),_:1})),[[ne],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Go,{ref_key:"itemEditorRef",ref:n,modelValue:K.value,"onUpdate:modelValue":L[15]||(L[15]=W=>K.value=W),item:U.value,onSave:L[16]||(L[16]=W=>M()),"is-processing":x.value},null,8,["modelValue","item","is-processing"]),e(ha,{modelValue:D.value,"onUpdate:modelValue":L[17]||(L[17]=W=>D.value=W),onProductSelected:$},null,8,["modelValue"]),e(en,{modelValue:R.value,"onUpdate:modelValue":L[18]||(L[18]=W=>R.value=W),data:O,onSave:L[19]||(L[19]=W=>ae()),"is-processing":x.value},null,8,["modelValue","data","is-processing"]),e(Zo,{modelValue:b.value,"onUpdate:modelValue":L[20]||(L[20]=W=>b.value=W)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},ik=Object.freeze(Object.defineProperty({__proto__:null,default:rk},Symbol.toStringTag,{value:"Module"})),dk={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},uk={class:"q-pa-xs"},mk={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ck={key:0},pk={key:1},fk={key:2},gk={key:3},bk={key:0},vk={key:1},_k={key:0},yk={key:0},kk={key:1},wk={class:"flex justify-end"},Ul="Retur Penjualan",hk={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=zt(),u=Lt(),f=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...Ot(c-2,c-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Dt()],y=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.SALES_ORDER_RETURN_STATUSES)],S=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES)],q=De({search:"",year:c,month:u,status:"all",refund_status:"all",...Le()}),x=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),D=[{name:"code",label:"Info Order",field:"code",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{B()});const K=P=>{if(P.status=="draft"){R(P);return}U(P)},R=P=>{Z.get(route("admin.sales-order-return.edit",P.id))},U=P=>{Z.get(route("admin.sales-order-return.detail",P.id))},O=P=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order-return.cancel",{id:P.id}),{id:P.id}).then($=>{const A=$.data.data,z=o.value.findIndex(V=>V.id===A.id);if(z===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[z].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var z,V;const A=((V=(z=$.response)==null?void 0:z.data)==null?void 0:V.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:A,color:"warning",position:"bottom"}),console.error($)})})},F=P=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.code}?`,url:route("admin.sales-order-return.delete",P.id),fetchItemsCallback:B,loading:i}),B=(P=null)=>{Ke({pagination:x,filter:q,props:P,rows:o,url:route("admin.sales-order-return.data"),loading:i,tableRef:n})},h=()=>{B()},j=ee(()=>s.screen.gt.sm?D:D.filter(P=>P.name==="code"||P.name==="action"));return Ne(()=>q.year,P=>{P===null&&(q.month=null)}),(P,$)=>{const A=X("i-head"),z=X("authenticated-layout");return d(),w(J,null,[e(A,{title:Ul}),e(z,null,Fe({title:a(()=>[v(r(Ul))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=V=>m.value=!m.value)},null,8,["icon"]),P.$can("admin.sales-order-return.edit")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=V=>l(Z).get(P.route("admin.sales-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",uk,[e(je,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":$[10]||($[10]=V=>x.value=V),filter:q.search,loading:i.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:B,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:V,message:M,filter:ae})=>[t("div",mk,[t("span",null,r(M)+" "+r(ae?" with term "+ae:""),1)])]),body:a(V=>[e(Re,{props:V,class:"cursor-pointer",onClick:G(M=>K(V.row),["prevent"])},{default:a(()=>[e(Y,{key:"code",props:V,class:"wrap-column"},{default:a(()=>{var M,ae,ue;return[t("div",null,[e(C,{name:"tag"}),v(" "+r(V.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(V.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[V.row.cashier?(d(),w("div",ck,[e(C,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((M=V.row.cashier)==null?void 0:M.username),1)])):k("",!0),V.row.cashier_session?(d(),w("div",pk,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((ue=(ae=V.row.cashier_session)==null?void 0:ae.cashier_terminal)==null?void 0:ue.name),1)])):k("",!0),V.row.customer?(d(),w("div",fk,[e(C,{name:"person",class:"inline-icon"}),e(_a,{href:P.route("admin.customer.detail",{id:V.row.customer.id}),onClick:$[7]||($[7]=G(()=>{},["stop"]))},{default:a(()=>[v(" "+r(V.row.customer.code)+" - "+r(V.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(l(H)(V.row.grand_total)),1),V.row.notes?(d(),w("div",gk,[e(C,{name:"notes"}),v(" "+r(V.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Ft,{status:V.row.status,statuses:P.$CONSTANTS.SALES_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Ft,{status:V.row.refund_status,statuses:P.$CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Y,{key:"cashier_id",props:V},{default:a(()=>{var M,ae,ue;return[V.row.cashier?(d(),w("div",bk,[e(C,{name:"person",class:"inline-icon"}),v(" "+r((M=V.row.cashier)==null?void 0:M.username),1)])):k("",!0),V.row.cashier_session?(d(),w("div",vk,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((ue=(ae=V.row.cashier_session)==null?void 0:ae.cashier_terminal)==null?void 0:ue.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Y,{key:"customer_id",props:V},{default:a(()=>[V.row.customer?(d(),w("div",_k,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(V.row.customer_code)+" - "+r(V.row.customer_name),1)]),V.row.customer_phone?(d(),w("div",yk,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(V.row.customer_phone),1)])):k("",!0),V.row.customer_address?(d(),w("div",kk,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(V.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total",props:V},{default:a(()=>[v(r(l(H)(V.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:V},{default:a(()=>[e(Se,{text:V.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:V,onClick:$[9]||($[9]=G(()=>{},["stop"]))},{default:a(()=>[t("div",wk,[P.$can("admin.sales-order-return.detail")||P.$can("admin.sales-order-return.edit")||P.$can("admin.sales-order-return.cancel")||P.$can("admin.sales-order-return.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[V.row.status!="draft"&&P.$can("admin.sales-order-return.detail")?te((d(),I(oe,{key:0,onClick:G(M=>U(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(N,null,{default:a(()=>$[11]||($[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),V.row.status=="draft"&&P.$can("admin.sales-order-return.edit")?te((d(),I(oe,{key:1,onClick:G(M=>R(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>$[12]||($[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),V.row.status=="draft"&&P.$can("admin.sales-order-return.cancel")?te((d(),I(oe,{key:2,onClick:G(M=>O(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(N,null,{default:a(()=>$[13]||($[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),e(Pe),P.$can("admin.sales-order-return.delete")?te((d(),I(oe,{key:3,onClick:G(M=>F(V.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>$[14]||($[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",dk,[e(ce,{modelValue:q.year,"onUpdate:modelValue":[$[2]||($[2]=V=>q.year=V),h],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),q.year!="all"?(d(),I(ce,{key:0,modelValue:q.month,"onUpdate:modelValue":[$[3]||($[3]=V=>q.month=V),h],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:q.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:q.status,"onUpdate:modelValue":[$[4]||($[4]=V=>q.status=V),h],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:q.refund_status,"onUpdate:modelValue":[$[5]||($[5]=V=>q.refund_status=V),h],options:S,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:q.search,"onUpdate:modelValue":$[6]||($[6]=V=>q.search=V),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},$k=Object.freeze(Object.defineProperty({__proto__:null,default:hk},Symbol.toStringTag,{value:"Module"})),xk={key:0,class:"text-center q-mb-md text-grey-8"},Sk={class:"text-subtitle2 text-weight-medium"},Vk={class:"text-h5 text-center text-primary q-pb-md"},qk={class:"q-mb-md flex flex-center"},Ck={key:1},Tk={class:"col-6"},Pk={class:"col-6"},Rk={class:"row"},Ik={class:"text-center q-mt-md"},Ok={key:0,class:"text-h6 text-negative text-weight-bold"},Dk={key:1,class:"text-h6 text-green-8 text-weight-bold"},Uk={key:2,class:"text-h6 text-positive text-weight-bold"},jk={key:2},Ek={class:"text-h6 text-negative text-center"},Ak={key:3},Bk={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const m=p,o=s,i=ge(),n=T(!1),g=T("cash"),b=T(new Date),c=T([]),u=T([]),f=De([{id:"cash",amount:0}]),_=i.props.settings.default_payment_mode,y=ee(()=>[{label:"Laci Kasir",value:"cash"},...m.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map($=>({label:$.name,value:$.id}))]),S=ee(()=>f.reduce(($,A)=>$+(A.amount||0),0)),q=ee(()=>m.total-S.value),x=ee(()=>{if(!m.customer)return!0;const $=f.find(z=>z.id==="wallet");return($?$.amount:0)<=m.customer.wallet_balance}),D=new Date,K=dt.addToDate(new Date,{days:30}),R=ee(()=>[$=>!!$||"Tanggal jatuh tempo harus diisi",$=>dt.isBetweenDates($,D,K,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),U=ee(()=>{if(g.value==="debt")return!!m.customer&&R.value.every(M=>M(b.value)===!0);const $=x.value,A=f.some(M=>(M.amount||0)>0),z=f.every(M=>(M.amount||0)>=0),V=q.value<=0;return $&&A&&z&&V}),O=()=>{if(f.length<3){const $=f.length;f.push({id:"cash",amount:0}),ut(()=>{const A=c.value[$];A&&(A.focus(),A.showPopup())})}},F=$=>{if(f.length>1){const A=f.findIndex(z=>z.id===$);A!==-1&&f.splice(A,1)}},B=($,A="cash")=>{g.value=$,b.value=new Date,f.splice(0,f.length),$==="cash"&&(f.splice(0,f.length,{id:A,amount:m.total}),ut(()=>{u.value.length>0&&u.value[0]&&(u.value[0].focus(),u.value[0].select())}))},h=()=>{if(!U.value)return;n.value=!0;let $={total:m.total,is_debt:g.value==="debt"};if(g.value==="debt")$.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),$.payments=[];else{const A=S.value,z=A>m.total?A-m.total:0,V=q.value>0?q.value:0;$.payments=f,$.remaining_debt=V,$.change=z}o("accepted",$),n.value=!1},j=()=>{B("cash",m.customer?_:"cash")};he(()=>{const $=A=>{m.modelValue&&A.ctrlKey&&A.key==="Enter"&&(A.preventDefault(),h())};document.addEventListener("keydown",$),wt(()=>{document.removeEventListener("keydown",$)})});const P=($,A)=>{ut(()=>{u.value[A]&&(u.value[A].focus(),u.value[A].select())})};return($,A)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":A[3]||(A[3]=z=>$.$emit("update:modelValue",z)),onBeforeShow:j},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,null,{default:a(()=>A[4]||(A[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:a(()=>[p.customer?(d(),w("div",xk,[t("div",Sk,[v(" Username: "+r(p.customer.code)+" ",1),A[5]||(A[5]=t("br",null,null,-1)),v(" Nama: "+r(p.customer.name),1),A[6]||(A[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(l(H)(p.customer.wallet_balance)),1)])])):k("",!0),t("div",Vk," Total: Rp. "+r(l(H)(p.total)),1),t("div",qk,[e(l(Qt),{modelValue:g.value,"onUpdate:modelValue":[A[0]||(A[0]=z=>g.value=z),B],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="cash"?(d(),w("div",Ck,[(d(!0),w(J,null,Ue(f,(z,V)=>(d(),w("div",{key:V,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Tk,[e(l(ce),{modelValue:z.id,"onUpdate:modelValue":[M=>z.id=M,M=>P(M,V)],options:y.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:M=>c.value[V]=M},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",Pk,[e(Me,{modelValue:z.amount,"onUpdate:modelValue":M=>z.amount=M,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:z.id==="wallet"&&!x.value,"error-message":z.id==="wallet"&&!x.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:M=>u.value[V]=M},Fe({_:2},[f.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:M=>F(z.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Rk,[e(E,{disable:!(f.length<3&&q.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:O,size:"sm"},null,8,["disable"])]),t("div",Ik,[q.value>0?(d(),w("div",Ok," Sisa Tagihan: Rp. "+r(l(H)(q.value)),1)):q.value<0?(d(),w("div",Dk," Kembalian: Rp. "+r(l(H)(Math.abs(q.value))),1)):(d(),w("div",Uk," Tagihan Terbayar "))])])):g.value==="debt"&&p.customer?(d(),w("div",jk,[e(ma,{outlined:"",modelValue:b.value,"onUpdate:modelValue":A[1]||(A[1]=z=>b.value=z),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(D),"max-date":l(K),rules:R.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Ek," Total Utang: Rp. "+r(l(H)(p.total)),1)])):g.value==="debt"&&!p.customer?(d(),w("div",Ak,A[7]||(A[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:A[2]||(A[2]=z=>$.$emit("update:modelValue",!1)),class:"col"}),e(E,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:h,disable:n.value||!U.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Mk=Object.freeze(Object.defineProperty({__proto__:null,default:Bk},Symbol.toStringTag,{value:"Module"})),Nk={key:0},Fk={style:{float:"right"}},zk={key:1},Lk={style:{float:"right"}},Kk={key:2},Hk={style:{float:"right"}},Wk={key:3},Yk={style:{float:"right"}},Qk={style:{float:"right"}},Jk={class:"q-gutter-sm"},Gk={class:"q-my-md"},Xk={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),w("tr",Nk,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Fk,r(l(H)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),w("tr",zk,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",Lk,r(l(H)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),w("tr",Kk,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",Hk,r(l(H)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),w("tr",Wk,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Yk,r(l(H)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Qk,r(l(H)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",Jk,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Gk,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Zk=vt(Xk,[["__scopeId","data-v-a3bb29e0"]]),ew=Object.freeze(Object.defineProperty({__proto__:null,default:Zk},Symbol.toStringTag,{value:"Module"})),tw={class:"column"},aw={class:"bg-grey-2 q-pa-xs"},lw={class:"text-subtitle1 text-bold text-grey-10"},ow={class:"text-caption text-grey-8"},nw={class:"col-12 col-sm-6"},sw={class:"full-width"},rw={key:1},iw={key:0},dw={key:1},uw={class:"col-12 col-sm-6",align:"left"},mw={class:"full-width"};const cw={key:1},pw={class:"full-width",style:{"border-collapse":"collapse"}},fw={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},gw={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},bw={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},vw={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},_w={key:0},yw={class:"col-12 col-sm-6"},kw={class:"text-body2 text-grey-7 text-italic"},ww={class:"col-12 col-sm-6"},hw={class:"row justify-end q-gutter-y-xs"},$w={class:"col-12 row justify-between"},xw={class:"text-subtitle2 text-bold"},Sw={class:"row justify-end q-gutter-y-xs"},Vw={class:"col-12 row justify-between"},qw={class:"text-subtitle2 text-bold"},Cw={class:"row justify-end q-gutter-y-xs"},Tw={class:"col-12 row justify-between"},Pw={class:"text-subtitle2 text-bold"},Rw={key:1,class:"row justify-end q-gutter-y-xs"},Iw={class:"col-12 row justify-between"},Ow={class:"text-subtitle2 text-bold"},Dw={key:2,class:"row justify-end q-gutter-y-xs"},Uw={class:"col-12 row justify-between"},jw={class:"text-subtitle2 text-bold"},tn={__name:"InvoiceTab",props:{data:Object},setup(p){const s=p;return(m,o)=>{const i=X("i-link");return d(),w("div",tw,[e(le,{class:"q-pa-none"},{default:a(()=>[t("div",aw,[t("div",lw," INVOICE #"+r(s.data.code),1),t("div",ow,[v(" Kasir: "+r(s.data.cashier.username)+" - "+r(s.data.cashier.name)+" | "+r(l(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),w(J,{key:0},[v(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Pe),e(le,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",nw,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",sw,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),I(i,{key:0,href:m.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[e(C,{class:"inline-icon",name:"person"}),v(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(d(),w("div",rw,[e(C,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(d(),w("tr",iw,[t("td",null,[e(C,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(d(),w("tr",dw,[t("td",null,[e(C,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",uw,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",mw,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.$CONSTANTS.SALES_ORDER_STATUSES[s.data.status]),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)]),k("",!0),s.data.due_date?(d(),w("tr",cw,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(ra)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Pe),e(le,{class:"q-pa-sm"},{default:a(()=>[t("table",pw,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),w(J,null,Ue(s.data.details,n=>(d(),w("tr",{key:n.id},[t("td",fw,[e(i,{href:m.route("admin.product.detail",n.product_id)},{default:a(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",gw,r(l(H)(n.price)),1),t("td",bw,r(n.quantity),1),t("td",vw,r(l(H)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),w("tr",_w,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Pe),e(le,{class:"row",align:"left"},{default:a(()=>[t("div",yw,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",kw,r(s.data.notes?s.data.notes:"-"),1)]),t("div",ww,[s.data.change>0?(d(),w(J,{key:0},[t("div",hw,[t("div",$w,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Jumlah Bayar",-1)),t("div",xw,r(l(H)(parseInt(s.data.total_paid)+parseInt(s.data.change))),1)])]),t("div",Sw,[t("div",Vw,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Kembalian",-1)),t("div",qw,r(l(H)(s.data.change)),1)])])],64)):k("",!0),t("div",Cw,[t("div",Tw,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Pw,r(l(H)(s.data.grand_total)),1)])]),s.data.total_return!=0?(d(),w("div",Rw,[t("div",Iw,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",Ow,r(l(H)(s.data.total_return)),1)])])):k("",!0),s.data.balance!=0?(d(),w("div",Dw,[t("div",Uw,[o[20]||(o[20]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",jw,r(l($t)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},Ew=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),Aw={key:0,class:"text-center q-mb-md text-grey-8"},Bw={class:"text-subtitle2 text-weight-medium"},Mw={class:"text-h5 text-center text-primary q-pb-md"},Nw={class:"text-center q-mt-md"},Fw={key:0,class:"text-h6 text-negative text-weight-bold"},zw={key:1,class:"text-h6 text-green-8 text-weight-bold"},Lw={key:2,class:"text-h6 text-positive text-weight-bold"},an={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const m=p,o=s,i=ge(),n=T(!1),g=T({method:"cash",amount:m.total,notes:null}),b=i.props.data.customer,c=ee(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...b?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(q=>({label:q.name,value:q.id}))]),u=ee(()=>m.total-(g.value.amount||0)),f=ee(()=>{const q=g.value.amount||0;return m.total,q<=0?"Jumlah pembayaran harus lebih dari 0.":g.value.method==="wallet"&&b&&q>b.wallet_balance?"Saldo wallet tidak mencukupi.":null}),_=ee(()=>f.value===null),y=()=>{if(!_.value)return;n.value=!0;const q={total_paid:g.value.amount,payments:[{id:g.value.method,amount:g.value.amount}],notes:g.value.notes,change:Math.max(0,(g.value.amount||0)-m.total),remaining_debt:Math.max(0,m.total-(g.value.amount||0))};o("accepted",q),n.value=!1},S=()=>{g.value.amount=m.total,g.value.method="cash",g.value.notes=null};return(q,x)=>{const D=X("my-link");return d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":x[4]||(x[4]=K=>q.$emit("update:modelValue",K)),onBeforeShow:S},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,null,{default:a(()=>x[5]||(x[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:a(()=>[l(b)?(d(),w("div",Aw,[t("div",Bw,[t("div",null,[e(D,{href:q.route("admin.customer.detail",{id:l(b).id}),target:"_blank"},{default:a(()=>[v(r(l(b).code)+" - "+r(l(b).name),1)]),_:1},8,["href"])]),t("div",{class:xe(l(b).wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(l(H)(l(b).wallet_balance)),3),t("div",{class:xe(l(b).balance>0?"text-green":"text-red")},r(l(b).balance>0?"Piutang":"Utang")+": "+r(l(H)(l(b).balance)),3)])])):k("",!0),t("div",Mw," Total: Rp. "+r(l(H)(p.total)),1),e(l(ce),{modelValue:g.value.method,"onUpdate:modelValue":x[0]||(x[0]=K=>g.value.method=K),options:c.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Me,{modelValue:g.value.amount,"onUpdate:modelValue":x[1]||(x[1]=K=>g.value.amount=K),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":f.value},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:g.value.notes,"onUpdate:modelValue":x[2]||(x[2]=K=>g.value.notes=K),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Nw,[u.value>0?(d(),w("div",Fw," Sisa Tagihan: Rp. "+r(l(H)(u.value)),1)):u.value<0?(d(),w("div",zw," Kembalian: Rp. "+r(l(H)(Math.abs(u.value))),1)):(d(),w("div",Lw," Tagihan Terbayar "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(E,{flat:"",label:"Batal",color:"grey",onClick:x[3]||(x[3]=K=>q.$emit("update:modelValue",!1))}),e(E,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Kw=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),Hw={class:"column"},Ww={class:"row"},Yw={class:"full-width",style:{"border-collapse":"collapse"}},Qw={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Jw={class:"row items-center q-gutter-x-sm"},Gw={class:"text-weight-bold"},Xw={class:"row items-center q-gutter-x-sm q-mt-xs"},Zw={class:"text-caption text-grey-6"},e0={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},t0={class:"q-mt-xs"},a0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},l0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},o0={key:0},n0={class:"text-right q-pa-sm"},ln={__name:"PaymentTab",props:{data:Object},setup(p){const s=p,m=$e(),o=T(!1),i=()=>{o.value=!0},n=async b=>{const c={order_id:s.data.id,payments:b.payments,notes:b.notes};m.loading.show({message:"Memproses pembayaran..."});try{const u=await Oe.post(route("admin.sales-order.add-payment"),c);m.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Z.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(u){let f="Gagal memproses pembayaran.";u.response&&u.response.data&&u.response.data.message?f=u.response.data.message:u.message&&(f=u.message),m.notify({message:f,color:"negative",icon:"error"})}finally{m.loading.hide()}},g=b=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Oe.post(route("admin.sales-order.delete-payment",{id:b.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Z.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(c){let u="Gagal menghapus pembayaran.";c.response&&c.response.data&&c.response.data.message?u=c.response.data.message:c.message&&(u=c.message),m.notify({message:u,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(b,c)=>{const u=X("my-link");return d(),w(J,null,[t("div",Hw,[e(Pe),e(le,{class:"q-pa-sm"},{default:a(()=>[t("div",Ww,[b.$can("admin.sales-order.add-payment")?(d(),I(E,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:c[0]||(c[0]=G(f=>i(),["stop"]))})):k("",!0)]),t("table",Yw,[c[5]||(c[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),w(J,null,Ue(s.data.payments,f=>(d(),w("tr",{key:f.id},[t("td",Qw,[t("div",Jw,[e(C,{name:"tag",size:"xs",color:"grey-7"}),t("span",Gw,r(f.code),1)]),t("div",Xw,[e(C,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Zw,r(l(ve)(f.created_at)),1)]),(f.type==="transfer"||f.type==="cash")&&f.account?(d(),w("div",e0,[e(C,{name:"wallet",size:"xs",color:"grey-7"}),e(u,{href:b.route("admin.finance-account.detail",{id:f.account.id})},{default:a(()=>[v(r(f.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",t0,[e(gt,{label:b.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[f.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(gt,{label:f.amount>0?"Pembayaran":"Refund",color:f.amount>0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",a0,r(l(H)(f.amount)),1),t("td",l0,[b.$can("admin.sales-order.delete-payment")&&s.data.customer_id&&f.amount>0?(d(),I(E,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>g(f)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),w("tr",o0,c[2]||(c[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[c[3]||(c[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",n0,r(l(H)(s.data.balance)),1),c[4]||(c[4]=t("td",null,null,-1))])])])]),_:1})]),e(an,{modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=f=>o.value=f),total:Math.abs(s.data.balance),customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},s0=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),r0={class:"q-gutter-sm"},i0={class:"col col-lg-6 q-pa-xs",align:"center"},jl="Rincian Penjualan",d0={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),m=ge(),o=m.props.data,i=T(s.get("preview")||!1),g=T(s.get("tab")||"invoice");he(()=>{ut(()=>{const c=s.get("print_size");c&&b(c)})});const b=c=>{window.open(route("admin.sales-order.print",{id:m.props.data.id,size:c}),"_self")};return(c,u)=>{const f=X("i-head"),_=X("authenticated-layout");return d(),w(J,null,[e(f,{title:jl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(jl))])]),"left-button":a(()=>[t("div",r0,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=y=>c.$goBack())})])]),"right-button":a(()=>[e(E,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:u[1]||(u[1]=y=>b("58mm"))}),e(E,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:u[2]||(u[2]=y=>b("a4"))}),i.value?k("",!0):(d(),I(E,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:u[3]||(u[3]=y=>l(Z).get(c.route("admin.sales-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",i0,[e(pe,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(qt,{modelValue:g.value,"onUpdate:modelValue":u[4]||(u[4]=y=>g.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(it,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(d(),I(it,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Pe),e(Ct,{modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=y=>g.value=y),animated:""},{default:a(()=>[e(nt,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(tn,{data:l(o)},null,8,["data"])]),_:1}),e(nt,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(ln,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},u0=Object.freeze(Object.defineProperty({__proto__:null,default:d0},Symbol.toStringTag,{value:"Module"})),m0={class:"text-weight-medium"},c0={class:"text-caption text-grey-6 elipsis"},p0={class:"column items-end"},f0={class:"text-caption text-grey-6 text-italic"},on={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=$e(),m=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(je,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:He({height:l(m)})},{header:a(g=>[e(Re,{props:g,class:"bg-grey-4"},{default:a(()=>[(d(!0),w(J,null,Ue(g.cols,b=>(d(),I(ta,{key:b.name,props:g,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(g=>[e(Re,{props:g,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:g,class:"text-left wrap-column"},{default:a(()=>[t("div",m0,r(g.row.product_name),1),t("div",c0,r(g.row.product_barcode),1),g.row.notes?(d(),I(Se,{key:0,text:g.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal_price",props:g,class:"text-right"},{default:a(()=>[t("div",p0,[t("div",null,r(l(H)(g.row.subtotal_price)),1),t("div",f0,r(l(H)(g.row.quantity))+" "+r(g.row.product_uom)+" x Rp. "+r(l(H)(g.row.price)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:g,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(E,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",g.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(E,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",g.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},g0=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"})),b0={key:0,class:"text-center q-mb-md text-grey-8"},v0={class:"text-subtitle2 text-weight-medium"},_0={class:"text-h5 text-center text-primary q-pb-md"},y0={class:"q-mb-md flex flex-center"},k0={key:1},w0={class:"col-6"},h0={class:"col-6"},$0={class:"row"},x0={class:"text-center q-mt-md"},S0={key:0,class:"text-h6 text-negative text-weight-bold"},V0={key:1,class:"text-h6 text-green-8 text-weight-bold"},q0={key:2,class:"text-h6 text-positive text-weight-bold"},C0={key:2},T0={class:"text-h6 text-negative text-center"},P0={key:3},nn={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const m=p,o=s,i=ge(),n=T(!1),g=T("cash"),b=T(new Date),c=T(i.props.settings.after_payment_action??"print"),u=T([]),f=T([]),_=De([{id:"cash",amount:0}]),y=i.props.settings.default_payment_mode,S=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],q=ee(()=>[{label:"Laci Kasir",value:"cash"},...m.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(z=>({label:z.name,value:z.id}))]),x=ee(()=>_.reduce((z,V)=>z+(V.amount||0),0)),D=ee(()=>m.total-x.value),K=ee(()=>{if(!m.customer)return!0;const z=_.find(M=>M.id==="wallet");return(z?z.amount:0)<=m.customer.wallet_balance}),R=new Date,U=dt.addToDate(new Date,{days:30}),O=ee(()=>[z=>!!z||"Tanggal jatuh tempo harus diisi",z=>dt.isBetweenDates(z,R,U,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),F=ee(()=>{if(g.value==="debt")return!!m.customer&&O.value.every(ue=>ue(b.value)===!0);const z=K.value,V=_.some(ue=>(ue.amount||0)>0),M=_.every(ue=>(ue.amount||0)>=0),ae=D.value<=0;return z&&V&&M&&ae}),B=()=>{if(_.length<3){const z=_.length;_.push({id:"cash",amount:0}),ut(()=>{const V=u.value[z];V&&(V.focus(),V.showPopup())})}},h=z=>{if(_.length>1){const V=_.findIndex(M=>M.id===z);V!==-1&&_.splice(V,1)}},j=(z,V="cash")=>{g.value=z,b.value=new Date,_.splice(0,_.length),z==="cash"&&(_.splice(0,_.length,{id:V,amount:m.total}),ut(()=>{f.value.length>0&&f.value[0]&&(f.value[0].focus(),f.value[0].select())}))},P=()=>{if(!F.value)return;n.value=!0;let z={total:m.total,is_debt:g.value==="debt",after_payment_action:c.value};if(g.value==="debt")z.due_date=dt.formatDate(b.value,"YYYY-MM-DD"),z.payments=[];else{const V=x.value,M=V>m.total?V-m.total:0,ae=D.value>0?D.value:0;z.payments=_,z.remaining_debt=ae,z.change=M}o("accepted",z),n.value=!1},$=()=>{j("cash",m.customer?y:"cash")};he(()=>{const z=V=>{m.modelValue&&V.ctrlKey&&V.key==="Enter"&&(V.preventDefault(),P())};document.addEventListener("keydown",z),wt(()=>{document.removeEventListener("keydown",z)})});const A=(z,V)=>{ut(()=>{f.value[V]&&(f.value[V].focus(),f.value[V].select())})};return(z,V)=>{const M=X("my-link");return d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":V[4]||(V[4]=ae=>z.$emit("update:modelValue",ae)),onBeforeShow:$},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,null,{default:a(()=>V[5]||(V[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:a(()=>[p.customer?(d(),w("div",b0,[t("div",v0,[t("div",null,[e(M,{href:z.route("admin.customer.detail",{id:p.customer.id}),target:"_blank"},{default:a(()=>[v(r(p.customer.code)+" - "+r(p.customer.name),1)]),_:1},8,["href"])]),t("div",{class:xe(p.customer.wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(l(H)(p.customer.wallet_balance)),3),t("div",{class:xe(p.customer.balance>0?"text-green":"text-red")},r(p.customer.balance>0?"Piutang":"Utang")+": "+r(l(H)(p.customer.balance)),3)])])):k("",!0),t("div",_0," Total: Rp. "+r(l(H)(p.total)),1),t("div",y0,[e(l(Qt),{modelValue:g.value,"onUpdate:modelValue":[V[0]||(V[0]=ae=>g.value=ae),j],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),g.value==="cash"?(d(),w("div",k0,[(d(!0),w(J,null,Ue(_,(ae,ue)=>(d(),w("div",{key:ue,class:"row q-col-gutter-sm q-mb-sm"},[t("div",w0,[e(l(ce),{modelValue:ae.id,"onUpdate:modelValue":[ie=>ae.id=ie,ie=>A(ie,ue)],options:q.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:ie=>u.value[ue]=ie},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",h0,[e(Me,{modelValue:ae.amount,"onUpdate:modelValue":ie=>ae.amount=ie,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:ae.id==="wallet"&&!K.value,"error-message":ae.id==="wallet"&&!K.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:ie=>f.value[ue]=ie},Fe({_:2},[_.length>1?{name:"append",fn:a(()=>[e(C,{size:"xs",name:"close",class:"cursor-pointer",onClick:ie=>h(ae.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",$0,[e(E,{disable:!(_.length<3&&D.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:B,size:"sm"},null,8,["disable"])]),t("div",x0,[D.value>0?(d(),w("div",S0," Sisa Tagihan: Rp. "+r(l(H)(D.value)),1)):D.value<0?(d(),w("div",V0," Kembalian: Rp. "+r(l(H)(Math.abs(D.value))),1)):(d(),w("div",q0," Tagihan Terbayar "))])])):g.value==="debt"&&p.customer?(d(),w("div",C0,[e(ma,{outlined:"",modelValue:b.value,"onUpdate:modelValue":V[1]||(V[1]=ae=>b.value=ae),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(R),"max-date":l(U),rules:O.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",T0," Total Utang: Rp. "+r(l(H)(p.total)),1)])):g.value==="debt"&&!p.customer?(d(),w("div",P0,V[6]||(V[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(l(ce),{modelValue:c.value,"onUpdate:modelValue":V[2]||(V[2]=ae=>c.value=ae),options:S,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:n.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(E,{flat:"",label:"Batal",color:"grey",onClick:V[3]||(V[3]=ae=>z.$emit("update:modelValue",!1)),class:"col"}),e(E,{label:g.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:P,disable:n.value||!F.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},R0=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),I0={class:"row items-center no-wrap"},O0={class:"col-auto"},sn={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:m}){const o=p,i=m,n=()=>{i("save")},g=ee(()=>o.item.quantity*o.item.price),b=f=>{f.stopPropagation(),f.preventDefault()},c=f=>{o.modelValue&&(f.key==="Enter"?(n(),i("update:modelValue",!1),b(f)):f.key==="Escape"&&(i("update:modelValue",!1),b(f)))};return he(()=>{window.addEventListener("keydown",c)}),wt(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item}),(f,_)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>f.$emit("update:modelValue",y))},{default:a(()=>[e(pe,null,{default:a(()=>[e(le,{class:"q-py-sm"},{default:a(()=>[t("div",I0,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",O0,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>f.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:a(()=>[e(se,{modelValue:p.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=y=>p.item.product_name=y),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=y=>p.item.quantity=y),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.price,"onUpdate:modelValue":_[3]||(_[3]=y=>p.item.price=y),label:"Harga",readonly:!p.item.product.price_editable,"hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","readonly","disable"]),e(Me,{modelValue:g.value,"onUpdate:modelValue":_[4]||(_[4]=y=>g.value=y),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(se,{modelValue:p.item.notes,"onUpdate:modelValue":_[5]||(_[5]=y=>p.item.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},D0=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"})),U0={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(m,o)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(le,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(tt,{align:"center"},{default:a(()=>[te(e(E,{dense:"",label:"Tutup"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},rn=vt(U0,[["__scopeId","data-v-92052544"]]),j0=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"})),E0={class:"row items-center no-wrap"},A0={class:"col text-subtite text-bold text-grey-8"},B0={class:"col-auto"},dn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:m}){const o=p,i=m,n=()=>{i("save")},g=u=>{u.stopPropagation(),u.preventDefault()},b=u=>{o.modelValue&&(u.key==="Enter"?(n(),g(u)):u.key==="Escape"&&(i("update:modelValue",!1),g(u)))};return he(()=>{window.addEventListener("keydown",b)}),wt(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(u,f)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":f[4]||(f[4]=_=>u.$emit("update:modelValue",_))},{default:a(()=>[e(pe,null,{default:a(()=>[e(le,{class:"q-py-sm"},{default:a(()=>[t("div",E0,[t("div",A0," Edit "+r(p.data.code),1),t("div",B0,[e(E,{flat:"",size:"sm",round:"",icon:"close",onClick:f[0]||(f[0]=_=>u.$emit("update:modelValue",!1))})])])]),_:1}),e(le,{class:"q-py-sm"},{default:a(()=>[e(Ht,{modelValue:p.data.datetime,"onUpdate:modelValue":f[1]||(f[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(se,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":f[2]||(f[2]=_=>u.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(se,{modelValue:p.data.notes,"onUpdate:modelValue":f[3]||(f[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(E,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[fe]]),te(e(E,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[fe]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},M0=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"})),N0={key:0},F0={style:{float:"right"}},z0={key:1},L0={style:{float:"right"}},K0={key:2},H0={style:{float:"right"}},W0={key:3},Y0={style:{float:"right"}},Q0={style:{float:"right"}},J0={class:"q-gutter-sm"},G0={class:"q-my-md"},X0={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=g=>i.$emit("update:modelValue",g)),onBeforeShow:o,persistent:""},{default:a(()=>[e(pe,{style:{"min-width":"300px"}},{default:a(()=>[e(le,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(le,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),w("tr",N0,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",F0,r(l(H)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),w("tr",z0,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",L0,r(l(H)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),w("tr",K0,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",H0,r(l(H)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),w("tr",W0,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Y0,r(l(H)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Q0,r(l(H)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",J0,[e(E,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(E,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",G0,[e(E,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},un=vt(X0,[["__scopeId","data-v-794fd35f"]]),Z0=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"})),e2={class:"q-gutter-sm"},t2={class:"row items-center"},a2={class:"text-weight-bold"},l2={class:"text-weight-bold"},o2={class:"row q-col-gutter-none full-width"},n2={class:"col-sm-6 col-12 col"},s2={class:"row full-width"},r2={key:0,class:"row"},i2={class:"col-sm-6 col-12"},d2={class:"row q-ml-sm items-end"},u2={class:"row col grow"},m2={class:"col-12 q-pa-sm column"},c2={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},p2={key:0,class:"col"},f2={class:"text-caption text-grey-6 q-mt-xs"},g2={key:0,class:"text-caption text-grey-8 q-mt-xs"},b2={class:"text-italic"},v2={key:1,class:"col"},_2={class:"q-pa-sm q-pb-none text-grey-8"},y2={class:"col"},k2={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},w2={class:"text-h4 text-weight-bold"},h2={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},$2={class:"col q-py-sm"},x2={class:"q-py-sm"},S2={__name:"Editor",setup(p){const s=$e(),m=ge(),o=T(!0),i=T(null),n=T(null),g=T(null),b=T(!1),c=T(null),u=T(null),{isFullscreen:f,toggleFullscreen:_}=wa(u),y=m.props.data.code,S=T(m.props.data.customer),q=T(null),x=T(""),D=T(!1),K=T(!1),R=T(!1),U=T(!1),O=T(!1),F=T(!1),B=T(null),h=T("price_1"),j=De({id:m.props.data.id,code:m.props.data.code,customer_id:m.props.data.customer_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),P=ee(()=>j.items.reduce((de,Q)=>de+Q.price*Q.quantity,0)),$=()=>{var de;_(),f.value||(de=c==null?void 0:c.value)==null||de.hideDrawer()},A=de=>isNaN(de)||de<=0?(bt("Kuantitas tidak valid.","top"),!1):!0,z=de=>isNaN(de)||de<0?(bt("Harga tidak valid.","top"),!1):!0,V=de=>!de||de.length==0?(bt("Barcode tidak valid.","top"),!1):!0,M=de=>{var Q;(Q=x.value)!=null&&Q.endsWith("*")?x.value+=de.name:x.value=de.name},ae=async()=>{var ht;if(D.value)return;const de=(ht=x.value)==null?void 0:ht.trim();if(de.length===0){R.value=!0;return}const Q=de.split("*");let qe=1,Be="",we=null;if(Q.length===1)Be=Q[0];else if(Q.length<=3)qe=parseInt(Q[0]),Be=Q[1],Q.length===3&&(we=parseFloat(Q[2]));else{bt("Input tidak valid.","top");return}if(Be.length===0){R.value=!0;return}!V(Be)&&!A(qe)&&!z(we)||(D.value=!0,await Oe.post(route("admin.sales-order.add-item"),{order_id:j.id,product_code:Be,qty:qe,price:we,merge:o.value}).then(Vt=>{const Ut=Vt.data.data.item;let St=-1;Vt.data.data.mergeItem&&(St=j.items.findIndex(ca=>ca.id===Ut.id)),St===-1?j.items.push(Ut):j.items[St]=Ut,x.value="",we!==null&&we!==parseFloat(Ut.price)&&bt("Harga tidak dapat diubah!","top")}).catch(Vt=>{var Ut,St;pt((St=(Ut=Vt.response)==null?void 0:Ut.data)==null?void 0:St.message,"top"),console.error("Gagal mengambil data produk:",Vt)}),D.value=!1,ut(()=>{var Vt;(Vt=i.value)==null||Vt.focus()}))},ue=de=>{B.value=Object.create(de),U.value=!0},ie=de=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${de.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{D.value=!0,Oe.post(route("admin.sales-order.remove-item"),{id:de.id}).then(()=>{const Q=j.items.findIndex(qe=>qe.id===de.id);Q!==-1&&(j.items.splice(Q,1)[0],ft("Item telah dihapus","top"))}).catch(Q=>{var qe,Be;pt(((Be=(qe=Q==null?void 0:Q.response)==null?void 0:qe.data)==null?void 0:Be.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(Q)}).finally(()=>{D.value=!1})})},Ie=()=>{D.value=!0;const de=n.value.getCurrentItem(),Q={id:de.id,qty:de.quantity};de.product.price_editable&&(Q.price=de.price),de.notes&&(Q.notes=de.notes),Oe.post(route("admin.sales-order.update-item"),Q).then(qe=>{const Be=qe.data.data,we=j.items.findIndex(ht=>ht.id===Be.id);we!==-1&&(j.items[we]=Be,ft("Item telah diperbarui","top"))}).catch(qe=>{var Be,we;pt(((we=(Be=qe==null?void 0:qe.response)==null?void 0:Be.data)==null?void 0:we.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(qe)}).finally(()=>{D.value=!1})};he(()=>{const de=Q=>{K.value||b.value||U.value||R.value||O.value||(Q.key==="F1"?(Q.preventDefault(),b.value=!0):Q.key==="F2"?(Q.preventDefault(),g.value.focus()):Q.key==="F3"?(Q.preventDefault(),i.value.focus()):Q.key==="F4"?(Q.preventDefault(),o.value=!o.value):Q.key==="F10"||Q.ctrlKey&&Q.key==="Enter"?(Q.preventDefault(),ye.value&&(K.value=!0)):Q.key==="F11"?(Q.preventDefault(),$()):(Q.key==="F5"||Q.key==="F6"||Q.key==="F7"||Q.key==="F12")&&Q.preventDefault())};document.addEventListener("keydown",de),wt(()=>{document.removeEventListener("keydown",de)}),ut(()=>{var Q;(Q=c==null?void 0:c.value)==null||Q.hideDrawer()})});const Xe=async de=>{S.value=de,j.customer_id=de==null?void 0:de.id,await me(),de!=null&&de.id?(h.value=S.value.default_price_type??"price_1",i.value.focus()):(h.value="price_1",g.value.focus())},me=async()=>{D.value=!0;const de={id:j.id,customer_id:j.customer_id??null,datetime:ea(j.datetime),notes:j.notes};await Oe.post(route("admin.sales-order.update"),de).then(Q=>{const qe=Q.data.data.id;j.customer_id=qe.customer_id}).catch(Q=>{var qe,Be;pt(((Be=(qe=Q==null?void 0:Q.response)==null?void 0:qe.data)==null?void 0:Be.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Q)}).finally(()=>{D.value=!1})},L=de=>{if(j.items.length===0){ft("Item masih kosong","top");return}const Q={id:j.id,...de};D.value=!0,Oe.post(route("admin.sales-order.close"),Q).then(qe=>{ft("Transaksi selesai"),Q.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:j.id,size:m.props.settings.default_print_size}),"_self"):Q.after_payment_action==="detail"?Z.get(route("admin.sales-order.detail",{id:j.id})):Q.after_payment_action==="new-order"&&Z.get(route("admin.sales-order.add"))}).catch(qe=>{var Be,we;pt((we=(Be=qe.response)==null?void 0:Be.data)==null?void 0:we.message),console.error(qe)}).finally(()=>{D.value=!1})},_e=()=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${j.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order.cancel",{id:j.id}),{id:j.id}).then(()=>{ft("Transaksi telah dibatalkan."),Z.visit(route("admin.sales-order.detail",{id:j.id}))}).catch(de=>{var qe,Be;const Q=((Be=(qe=de.response)==null?void 0:qe.data)==null?void 0:Be.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:Q,color:"warning",position:"bottom"}),console.error(de)})})},re=()=>{window.open(route("admin.sales-order.detail",{id:j.id})+"?preview=1","_blank")},W=ee(()=>S.value?S.value.wallet_balance>=P.value:!0),ye=ee(()=>It().appContext.config.globalProperties.$can("admin.sales-order.close")&&!D.value&&j.items.length!==0&&j.status==="draft");return(de,Q)=>{const qe=X("i-head"),Be=X("authenticated-layout");return d(),w(J,null,[e(qe,{title:l(y)},null,8,["title"]),e(Be,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[v(r(l(y)),1)]),"left-button":a(()=>[t("div",e2,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:Q[0]||(Q[0]=we=>l(Z).get(de.route("admin.sales-order.index")))})])]),"right-button":a(()=>{var we,ht;return[t("div",t2,[l(s).screen.gt.sm?(d(),w(J,{key:0},[t("div",a2,r(l(m).props.auth.user.username),1),Q[23]||(Q[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",l2,r((ht=(we=l(m).props.data.cashier_session)==null?void 0:we.cashier_terminal)==null?void 0:ht.name),1),Q[24]||(Q[24]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ka)])],64)):k("",!0),k("",!0)])]}),default:a(()=>[e(Te,{class:"bg-grey-2 q-pa-none column fit"},{default:a(()=>[e(pe,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:a(()=>[t("div",o2,[t("div",n2,[t("div",s2,[e(Xo,{ref_key:"customerAutocompleteRef",ref:g,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:S.value,"onUpdate:modelValue":Q[2]||(Q[2]=we=>S.value=we),label:"Pelanggan",disable:D.value,onCustomerSelected:Xe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),S.value?(d(),w("div",r2,[t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",W.value?"text-green":"text-red"])}," Wallet: "+r(S.value?"Rp. "+l(H)(S.value?S.value.wallet_balance:0):"Tidak tersedia"),3),t("div",{class:xe(["q-mt-xs q-ml-sm text-bold",S.value.balance>=0?"text-green":"text-red"])}," Utang / Piutang: "+r(S.value?"Rp. "+l(H)(S.value?S.value.balance:0):"Tidak tersedia"),3)])):k("",!0)])]),t("div",i2,[e($a,{ref_key:"userInputRef",ref:i,modelValue:x.value,"onUpdate:modelValue":Q[3]||(Q[3]=we=>x.value=we),onKeyup:Q[4]||(Q[4]=Jt(G(we=>ae(),["prevent"]),["enter"])),onScanSuccess:Q[5]||(Q[5]=we=>ae()),onSend:Q[6]||(Q[6]=we=>ae()),onSearch:Q[7]||(Q[7]=we=>R.value=!0),loading:D.value,disable:D.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",d2,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":Q[8]||(Q[8]=we=>o.value=we),label:"Gabungkan item",disable:D.value},null,8,["modelValue","disable"])])])]),t("div",u2,[t("div",m2,[e(on,{items:j.items,onUpdateQuantity:Q[9]||(Q[9]=({id:we,value:ht})=>de.updateQuantity(we,ht)),onRemoveItem:ie,onEditItem:ue,"is-processing":D.value},null,8,["items","is-processing"])])]),t("div",c2,[l(s).screen.gt.sm?(d(),w("div",p2,[t("div",f2,r(j.items.length)+" item(s) ",1),j.notes?(d(),w("div",g2,[Q[25]||(Q[25]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",b2,[e(Se,{text:j.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),w("div",v2,[t("div",_2,[t("div",null,"#: "+r(j.code),1),t("div",null,r(l(ve)(j.datetime)),1)])])):k("",!0),t("div",y2,[t("div",k2,[Q[27]||(Q[27]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",w2,[Q[26]||(Q[26]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(H)(P.value)),1)])])])]),t("div",h2,[t("div",$2,[e(E,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:Q[10]||(Q[10]=we=>K.value=!0),disable:!ye.value,loading:D.value},null,8,["disable","loading"])]),t("div",x2,[e(E,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:Q[14]||(Q[14]=G(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:Q[11]||(Q[11]=G(we=>O.value=!0,["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>Q[28]||(Q[28]=[v("Edit Rincian")])),_:1})]),_:1})),[[ne],[fe]]),te((d(),I(oe,{clickable:"",onClick:Q[12]||(Q[12]=G(we=>re(),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"preview"})]),_:1}),e(N,null,{default:a(()=>Q[29]||(Q[29]=[v("Pratinjau")])),_:1})]),_:1})),[[ne],[fe]]),te((d(),I(oe,{clickable:"",onClick:Q[13]||(Q[13]=G(we=>_e(),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"negative"})]),_:1}),e(N,{class:"text-negative"},{default:a(()=>Q[30]||(Q[30]=[v(" Batalkan ")])),_:1})]),_:1})),[[ne],[fe]]),e(Pe)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(sn,{ref_key:"itemEditorRef",ref:n,modelValue:U.value,"onUpdate:modelValue":Q[15]||(Q[15]=we=>U.value=we),item:B.value,onSave:Q[16]||(Q[16]=we=>Ie()),"is-processing":D.value},null,8,["modelValue","item","is-processing"]),e(nn,{modelValue:K.value,"onUpdate:modelValue":Q[17]||(Q[17]=we=>K.value=we),onAccepted:L,form:j,customer:S.value,total:P.value,accounts:l(m).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(ha,{modelValue:R.value,"onUpdate:modelValue":Q[18]||(Q[18]=we=>R.value=we),onProductSelected:M,priceType:h.value,"show-cost":de.$can("admin.product:view-cost")},null,8,["modelValue","priceType","show-cost"]),e(dn,{modelValue:O.value,"onUpdate:modelValue":Q[19]||(Q[19]=we=>O.value=we),data:j,onSave:Q[20]||(Q[20]=we=>me()),"is-processing":D.value},null,8,["modelValue","data","is-processing"]),e(rn,{modelValue:b.value,"onUpdate:modelValue":Q[21]||(Q[21]=we=>b.value=we)},null,8,["modelValue"]),e(un,{modelValue:F.value,"onUpdate:modelValue":Q[22]||(Q[22]=we=>F.value=we),order:j,customer:S.value,total:P.value,payment:q.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},V2=Object.freeze(Object.defineProperty({__proto__:null,default:S2},Symbol.toStringTag,{value:"Module"})),q2={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.SALES_ORDER_STATUSES,m={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(d(),I(Ft,{status:p.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}},C2={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,m={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(d(),I(Ft,{status:p.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}};const T2={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},P2={class:"q-pa-xs"},R2={class:"full-width row flex-center text-grey-8 q-gutter-sm"},I2={key:0},O2={key:1},D2={key:2},U2={key:4},j2={key:0},E2={key:1},A2={key:0},B2={key:0},M2={key:1},N2={class:"flex justify-end"},El="Penjualan",F2={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=zt(),u=Lt(),f=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...Ot(c-2,c-1).reverse()],_=[{value:"all",label:"Semua Bulan"},...Dt()],y=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.SALES_ORDER_STATUSES)],S=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],q=[{value:"all",label:"Semua Status"},...ot(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],x=De({search:"",year:c,month:u,status:"all",payment_status:"all",delivery_status:"all",...Le()}),D=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),K=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{h()});const R=$=>{if($.status=="draft"){U($);return}O($)},U=$=>{Z.get(route("admin.sales-order.edit",$.id))},O=$=>{Z.get(route("admin.sales-order.detail",$.id))},F=$=>{xt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Oe.post(route("admin.sales-order.cancel",{id:$.id}),{id:$.id}).then(A=>{const z=A.data.data,V=o.value.findIndex(M=>M.id===z.id);if(V===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[V].status="canceled",s.notify({message:A.data.message,position:"bottom"})}).catch(A=>{var V,M;const z=((M=(V=A.response)==null?void 0:V.data)==null?void 0:M.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:z,color:"warning",position:"bottom"}),console.error(A)})})},B=$=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.sales-order.delete",$.id),fetchItemsCallback:h,loading:i}),h=($=null)=>{Ke({pagination:D,filter:x,props:$,rows:o,url:route("admin.sales-order.data"),loading:i,tableRef:n})},j=()=>{h()},P=ee(()=>s.screen.gt.sm?K:K.filter($=>$.name==="id"||$.name==="action"));return Ne(()=>x.year,$=>{$===null&&(x.month=null)}),($,A)=>{const z=X("i-head"),V=X("authenticated-layout");return d(),w(J,null,[e(z,{title:El}),e(V,null,Fe({title:a(()=>[v(r(El))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=M=>m.value=!m.value)},null,8,["icon"]),$.$can("admin.sales-order.edit")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:A[1]||(A[1]=M=>l(Z).get($.route("admin.sales-order.add")))})):k("",!0)]),default:a(()=>[t("div",P2,[e(je,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:D.value,"onUpdate:pagination":A[11]||(A[11]=M=>D.value=M),filter:x.search,loading:i.value,columns:P.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:h,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:M,message:ae,filter:ue})=>[t("div",R2,[t("span",null,r(ae)+" "+r(ue?" with term "+ue:""),1)])]),body:a(M=>[e(Re,{props:M,class:"cursor-pointer",onClick:G(ae=>R(M.row),["prevent"])},{default:a(()=>[e(Y,{key:"id",props:M,class:"wrap-column"},{default:a(()=>{var ae,ue,ie;return[t("div",null,[e(C,{name:"tag"}),v(" "+r(M.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(M.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[M.row.cashier?(d(),w("div",I2,[e(C,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((ae=M.row.cashier)==null?void 0:ae.username),1)])):k("",!0),M.row.cashier_session?(d(),w("div",O2,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((ie=(ue=M.row.cashier_session)==null?void 0:ue.cashier_terminal)==null?void 0:ie.name),1)])):k("",!0),M.row.customer?(d(),w("div",D2,[e(C,{name:"person",class:"inline-icon"}),A[12]||(A[12]=v(" Pelanggan: ")),e(_a,{href:$.route("admin.customer.detail",{id:M.row.customer.id}),onClick:A[8]||(A[8]=G(()=>{},["stop"]))},{default:a(()=>[v(" "+r(M.row.customer.code)+" - "+r(M.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,[e(C,{name:"wallet",class:"inline-icon"}),v(" Total: Rp. "+r(l(H)(M.row.grand_total)),1)]),M.row.balance!=0?(d(),w("div",{key:3,class:xe(M.row.balance>0?"text-green":"text-red")},[e(C,{name:"balance",class:"inline-icon"}),v(" "+r(M.row.balance>0?"Piutang":"Utang")+": Rp. "+r(l(H)(M.row.balance)),1)],2)):k("",!0),M.row.notes?(d(),w("div",U2,[e(C,{name:"notes"}),v(" "+r(M.row.notes),1)])):k("",!0)],64)),t("div",null,[e(q2,{status:M.row.status},null,8,["status"]),M.row.status=="closed"?(d(),w(J,{key:0},[e(C2,{status:M.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]}),_:2},1032,["props"]),e(Y,{key:"cashier_id",props:M},{default:a(()=>{var ae,ue,ie;return[M.row.cashier?(d(),w("div",j2,[e(C,{name:"person",class:"inline-icon"}),v(" "+r((ae=M.row.cashier)==null?void 0:ae.username),1)])):k("",!0),M.row.cashier_session?(d(),w("div",E2,[e(C,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((ie=(ue=M.row.cashier_session)==null?void 0:ue.cashier_terminal)==null?void 0:ie.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Y,{key:"customer_id",props:M},{default:a(()=>[M.row.customer?(d(),w("div",A2,[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" "+r(M.row.customer_code)+" - "+r(M.row.customer_name),1)]),M.row.customer_phone?(d(),w("div",B2,[e(C,{name:"phone",class:"inline-icon"}),v(" "+r(M.row.customer_phone),1)])):k("",!0),M.row.customer_address?(d(),w("div",M2,[e(C,{name:"home_pin",class:"inline-icon"}),v(" "+r(M.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:M},{default:a(()=>[v(r(l(H)(M.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:M,class:xe(M.row.balance>0?"text-green":"text-red")},{default:a(()=>[v(r(l(H)(M.row.balance)),1)]),_:2},1032,["props","class"]),e(Y,{key:"notes",props:M},{default:a(()=>[e(Se,{text:M.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:M,onClick:A[10]||(A[10]=G(()=>{},["stop"]))},{default:a(()=>[t("div",N2,[$.$can("admin.sales-order.detail")||$.$can("admin.sales-order.edit")||$.$can("admin.sales-order.cancel")||$.$can("admin.sales-order.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:A[9]||(A[9]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[M.row.status!="draft"&&$.$can("admin.sales-order.detail")?te((d(),I(oe,{key:0,onClick:G(ae=>O(M.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"visibility"})]),_:1}),e(N,null,{default:a(()=>A[13]||(A[13]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),M.row.status=="draft"&&$.$can("admin.sales-order.edit")?te((d(),I(oe,{key:1,onClick:G(ae=>U(M.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>A[14]||(A[14]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),M.row.status=="draft"&&$.$can("admin.sales-order.cancel")?te((d(),I(oe,{key:2,onClick:G(ae=>F(M.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"cancel"})]),_:1}),e(N,null,{default:a(()=>A[15]||(A[15]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),e(Pe),$.$can("admin.sales-order.delete")?te((d(),I(oe,{key:3,onClick:G(ae=>B(M.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>A[16]||(A[16]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",T2,[e(ce,{modelValue:x.year,"onUpdate:modelValue":[A[2]||(A[2]=M=>x.year=M),j],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),x.year!="all"?(d(),I(ce,{key:0,modelValue:x.month,"onUpdate:modelValue":[A[3]||(A[3]=M=>x.month=M),j],options:_,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:x.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:x.status,"onUpdate:modelValue":[A[4]||(A[4]=M=>x.status=M),j],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:x.payment_status,"onUpdate:modelValue":[A[5]||(A[5]=M=>x.payment_status=M),j],options:S,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":A[7]||(A[7]=M=>x.search=M),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},z2=Object.freeze(Object.defineProperty({__proto__:null,default:F2},Symbol.toStringTag,{value:"Module"})),L2={},K2={class:"row"},H2={class:"q-mb-md text-h6"};function W2(p,s){const m=X("i-head"),o=X("authenticated-layout");return d(),w(J,null,[e(m,{title:"Informasi Sistem"}),e(o,null,{title:a(()=>s[0]||(s[0]=[v("Informasi Sistem")])),default:a(()=>[t("div",K2,[e(pe,{class:"col q-ma-xs",square:"",flat:"",bordered:""},{default:a(()=>[e(le,null,{default:a(()=>[t("div",H2,"Tentang "+r(p.$config.APP_NAME),1),v(" Versi : "+r(p.$config.APP_VERSION_STR),1),s[1]||(s[1]=t("br",null,null,-1)),s[2]||(s[2]=v(" Dikembangkan oleh Shiftech Indonesia")),s[3]||(s[3]=t("br",null,null,-1)),s[4]||(s[4]=v(" CV. Shift Karya Teknologi "))]),_:1})]),_:1})])]),_:1})],64)}const Y2=vt(L2,[["render",W2]]),Q2=Object.freeze(Object.defineProperty({__proto__:null,default:Y2},Symbol.toStringTag,{value:"Module"})),mn={__name:"CompanyInfoForm",setup(p){const s=T(),m=ge(),o=Qe({name:m.props.data.name,headline:m.props.data.headline,phone:m.props.data.phone,address:m.props.data.address,logo_path:m.props.data.logo_path,logo_image:null}),i=T(null),n=T("");he(()=>{o.logo_path&&(n.value=`/${o.logo_path}`)});function g(){i.value.click()}function b(f){const _=f.target.files[0];_&&(o.logo_image=_,n.value=URL.createObjectURL(_))}function c(){o.logo_image=null,o.logo_path=null,n.value=null,i.value.value=null}const u=()=>rt({form:o,url:route("admin.company-profile.edit")});return(f,_)=>(d(),I(Je,{class:"row",onSubmit:G(u,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>[_[8]||(_[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),_[9]||(_[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(se,{ref_key:"nameInputRef",ref:s,modelValue:l(o).name,"onUpdate:modelValue":_[0]||(_[0]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(se,{modelValue:l(o).headline,"onUpdate:modelValue":_[1]||(_[1]=y=>l(o).headline=y),modelModifiers:{trim:!0},label:"Headline",disable:l(o).processing,maxlength:"200","lazy-rules":"",error:!!l(o).errors.headline,"error-message":l(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).phone,"onUpdate:modelValue":_[2]||(_[2]=y=>l(o).phone=y),modelModifiers:{trim:!0},label:"No Telepon",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.phone,"error-message":l(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(o).address,"onUpdate:modelValue":_[3]||(_[3]=y=>l(o).address=y),modelModifiers:{trim:!0},label:"Alamat",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[_[7]||(_[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(E,{label:"Browse Logo",size:"sm",onClick:g,color:"secondary",icon:"add_a_photo",disable:l(o).processing},null,8,["disable"]),e(E,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:l(o).processing||!n.value,color:"red",onClick:c},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*",style:{display:"none"},onChange:b},null,544),t("div",null,[e(da,{src:n.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},Fe({error:a(()=>[_[4]||(_[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[n.value?void 0:{name:"default",fn:a(()=>[_[5]||(_[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),_[6]||(_[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(le,null,{default:a(()=>[e(E,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},J2=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),G2={class:"q-pa-xs"},X2={class:"row justify-center"},Z2={class:"col col-md-6"},Al="Profil Perusahaan",eh={__name:"Edit",setup(p){return(s,m)=>{const o=X("i-head"),i=X("authenticated-layout");return d(),w(J,null,[e(o,{title:Al}),e(i,null,{title:a(()=>[v(r(Al))]),default:a(()=>[t("div",G2,[t("div",X2,[t("div",Z2,[e(mn)])])])]),_:1})],64)}}},th=Object.freeze(Object.defineProperty({__proto__:null,default:eh},Symbol.toStringTag,{value:"Module"})),ah={class:"col-xs-12 col-md-8"},lh={class:"col-xs-12 col-sm-9"},oh={class:"col-xs-12 col-sm-3 text-right"},Bl="Pengaturan Database & Utilitas",nh={__name:"Index",setup(p){const s=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:" **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:" **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:" **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(m,o)=>{const i=X("i-head"),n=X("authenticated-layout");return d(),w(J,null,[e(i,{title:Bl}),e(n,null,{title:a(()=>[v(r(Bl))]),default:a(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",ah,[e(pe,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(le,null,{default:a(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Gt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:a(()=>[e(C,{name:"warning",color:"red"})]),default:a(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=v(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(Pe),e(le,{class:"q-gutter-y-lg"},{default:a(()=>[(d(),w(J,null,Ue(s,g=>t("div",{key:g.name,class:"row items-center q-col-gutter-md"},[t("div",lh,[e(oe,{class:"q-pa-none"},{default:a(()=>[e(N,{avatar:"",class:"q-pr-md"},{default:a(()=>[e(C,{name:g.icon,color:g.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(N,{style:{"text-wrap":"initial"}},{default:a(()=>[e(ke,{class:"text-subtitle1 text-bold"},{default:a(()=>[v(r(g.name),1)]),_:2},1024),e(ke,{caption:"",class:"q-pb-sm"},{default:a(()=>[v(r(g.description),1)]),_:2},1024),e(ke,{class:"text-caption text-negative text-bold"},{default:a(()=>[v(r(g.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",oh,[e(E,{icon:g.icon,label:g.name.split(" ")[0],color:g.color,disable:g.disable,onClick:g.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},sh=Object.freeze(Object.defineProperty({__proto__:null,default:nh},Symbol.toStringTag,{value:"Module"})),rh={class:"q-pa-xs"},ih={class:"row justify-center"},dh={class:"col col-md-6"},uh={__name:"Edit",setup(p){const s=ge(),m=Qe({foot_note:s.props.data.foot_note,default_payment_mode:s.props.data.default_payment_mode,default_print_size:s.props.data.default_print_size,after_payment_action:s.props.data.after_payment_action}),o=()=>rt({form:m,url:route("admin.pos-settings.edit")}),i=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],n=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],g=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(b,c)=>{const u=X("i-head"),f=X("authenticated-layout");return d(),w(J,null,[e(u,{title:"Pengaturan POS"}),e(f,null,{title:a(()=>c[4]||(c[4]=[v("Pengaturan POS")])),default:a(()=>[t("div",rh,[t("div",ih,[t("div",dh,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>[c[5]||(c[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),c[6]||(c[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(ce,{modelValue:l(m).default_payment_mode,"onUpdate:modelValue":c[0]||(c[0]=_=>l(m).default_payment_mode=_),label:"Default Pembayaran",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:l(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(m).errors.default_payment_mode,"error-message":l(m).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(m).default_print_size,"onUpdate:modelValue":c[1]||(c[1]=_=>l(m).default_print_size=_),label:"Default Ukuran Cetak",options:n,"map-options":"","emit-value":"","lazy-rules":"",disable:l(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(m).errors.default_print_size,"error-message":l(m).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(m).after_payment_action,"onUpdate:modelValue":c[2]||(c[2]=_=>l(m).after_payment_action=_),label:"Aksi Setelah Pembayaran",options:g,"map-options":"","emit-value":"","lazy-rules":"",disable:l(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(m).errors.after_payment_action,"error-message":l(m).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(m).foot_note,"onUpdate:modelValue":c[3]||(c[3]=_=>l(m).foot_note=_),modelModifiers:{trim:!0},label:"Foot Note",disable:l(m).processing,"lazy-rules":"",error:!!l(m).errors.foot_note,"error-message":l(m).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,null,{default:a(()=>[e(E,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(m).processing,loading:l(m).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},mh=Object.freeze(Object.defineProperty({__proto__:null,default:uh},Symbol.toStringTag,{value:"Module"})),ch={class:"q-gutter-sm"},ph={class:"q-gutter-sm"},fh={class:"col col-md-6 q-pa-xs"},gh={class:"row"},bh={class:"detail-item"},vh={class:"detail-value"},_h={class:"detail-item"},yh={class:"detail-value"},kh={class:"detail-item"},wh={class:"detail-value"},hh={class:"detail-item"},$h={class:"detail-value"},xh={class:"detail-item"},Sh={class:"detail-value"},Vh={class:"detail-item"},qh={class:"detail-value"},Ch={class:"detail-item"},Th={class:"detail-value"},Ph={class:"detail-item"},Rh={class:"detail-value user-agent-value"},Ih={class:"q-pt-md"},Oh={class:"table-wrapper-scroll"},Dh={key:0,class:"table-metadata"},Uh={key:0},jh={colspan:"100%"},Eh={class:"text-mono json-pre-scroll"},Ah={key:1},Bh={class:"metadata-label",style:{width:"100px"}},Mh={class:"metadata-value"},Nh={key:0,class:"text-mono json-pre-scroll"},Fh={key:2},zh={colspan:"3"},Lh={class:"table-metadata"},Kh={class:"metadata-label"},Hh={class:"metadata-value"},Wh={class:"metadata-value"},Yh={key:1,class:"text-grey-8 text-italic q-pa-sm"},Ml="Rincian Log Aktifitas",Qh={__name:"Detail",setup(p){const s=ge(),m=()=>st({message:`Hapus log aktifitas #${s.props.data.id}?`,url:route("admin.user-activity-log.delete",s.props.data.id),onSuccess:()=>{Z.get(route("admin.user-activity-log.index"))}});return(o,i)=>{const n=X("i-head"),g=X("i-link"),b=X("authenticated-layout");return d(),w(J,null,[e(n,{title:Ml}),e(b,{"show-drawer-button":!0},{title:a(()=>[v(r(Ml))]),"left-button":a(()=>[t("div",ch,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=c=>o.$goBack())})])]),"right-button":a(()=>[t("div",ph,[e(E,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=c=>m())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",fh,[t("div",gh,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"detail-group"},{default:a(()=>[i[20]||(i[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",bh,[i[2]||(i[2]=t("div",{class:"detail-label"},"ID",-1)),i[3]||(i[3]=t("div",{class:"detail-separator"},":",-1)),t("div",vh,r(l(s).props.data.id),1)]),t("div",_h,[i[4]||(i[4]=t("div",{class:"detail-label"},"Waktu",-1)),i[5]||(i[5]=t("div",{class:"detail-separator"},":",-1)),t("div",yh,r(l(ve)(l(s).props.data.logged_at)),1)]),t("div",kh,[i[6]||(i[6]=t("div",{class:"detail-label"},"Pengguna",-1)),i[7]||(i[7]=t("div",{class:"detail-separator"},":",-1)),t("div",wh,[e(g,{href:o.route("admin.user.detail",{id:l(s).props.data.user_id})},{default:a(()=>[v(r(l(s).props.data.username),1)]),_:1},8,["href"])])]),t("div",hh,[i[8]||(i[8]=t("div",{class:"detail-label"},"Kategori",-1)),i[9]||(i[9]=t("div",{class:"detail-separator"},":",-1)),t("div",$h,r(l(s).props.data.activity_category_label),1)]),t("div",xh,[i[10]||(i[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),i[11]||(i[11]=t("div",{class:"detail-separator"},":",-1)),t("div",Sh,r(l(s).props.data.activity_name_label),1)]),t("div",Vh,[i[12]||(i[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),i[13]||(i[13]=t("div",{class:"detail-separator"},":",-1)),t("div",qh,r(l(s).props.data.description),1)]),t("div",Ch,[i[14]||(i[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),i[15]||(i[15]=t("div",{class:"detail-separator"},":",-1)),t("div",Th,r(l(s).props.data.ip_address),1)]),t("div",Ph,[i[16]||(i[16]=t("div",{class:"detail-label"},"User Agent",-1)),i[17]||(i[17]=t("div",{class:"detail-separator"},":",-1)),t("div",Rh,r(l(s).props.data.user_agent),1)]),t("div",Ih,[i[19]||(i[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",Oh,[Object.keys(l(s).props.data.metadata).length>0?(d(),w("table",Dh,[t("tbody",null,[(d(!0),w(J,null,Ue(l(s).props.formatted_metadata,(c,u)=>(d(),w(J,{key:u},[c.type==="plain"?(d(),w("tr",Uh,[t("td",jh,[t("pre",Eh,r(c.value),1)])])):k("",!0),c.type==="simple"?(d(),w("tr",Ah,[t("td",Bh,r(c.label),1),t("td",Mh,[c.label=="Data Mentah (JSON)"?(d(),w("pre",Nh,r(c.value),1)):(d(),w(J,{key:1},[v(r(c.value),1)],64))])])):k("",!0),c.type==="comparison"?(d(),w("tr",Fh,[t("td",zh,[t("table",Lh,[i[18]||(i[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(d(!0),w(J,null,Ue(c.value,(f,_)=>(d(),w("tr",{class:xe(f.new_value!==f.old_value?"value-changed":"")},[t("td",Kh,r(f.field),1),t("td",Hh,r(f.old_value),1),t("td",Wh,r(f.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(d(),w("div",Yh," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Jh=vt(Qh,[["__scopeId","data-v-37e21f0d"]]),Gh=Object.freeze(Object.defineProperty({__proto__:null,default:Jh},Symbol.toStringTag,{value:"Module"})),Xh={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Zh={class:"q-pa-xs"},e$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},t$={key:0},a$={class:"flex justify-end"},Nl="Log Aktifitas Pengguna",l$={__name:"Index",setup(p){const s=ge(),m=$e(),o=T(!1),i=T([]),n=T(!0),g=T(null),b=T(null),c=at(b),{protectClick:u}=At(),f=De({user_id:"all",activity_category:"all",activity_name:"all",search:"",...Le()}),_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),y=[{value:"all",label:"Semua"},...s.props.users.map(A=>({value:A.id,label:A.username+" - "+A.name}))],S=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_categories).map(([A,z])=>({value:A,label:z}))],q=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_names).map(([A,z])=>({value:A,label:z}))],x=T(S),D=T(q),K=(A,z)=>{if(A===""){z(()=>{x.value=S});return}z(()=>{const V=A.toLowerCase();x.value=S.filter(M=>M.label.toLowerCase().indexOf(V)>-1)})},R=(A,z)=>{if(A===""){z(()=>{D.value=q});return}z(()=>{const V=A.toLowerCase();D.value=q.filter(M=>M.label.toLowerCase().indexOf(V)>-1)})},U=[{name:"id",label:m.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{F()});const O=A=>st({message:`Hapus log #${A.id}?`,url:route("admin.user-activity-log.delete",A.id),fetchItemsCallback:F,loading:n}),F=(A=null)=>{Ke({pagination:_,filter:f,props:A,rows:i,url:route("admin.user-activity-log.data"),loading:n,tableRef:g})},B=()=>F(),j=u(A=>Z.get(route("admin.user-activity-log.detail",{id:A.id}))),P=ee(()=>m.screen.gt.sm?U:U.filter(A=>A.name==="id"||A.name==="action")),$=()=>{xt.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{ft("Seluruh log telah dibersihkan."),F()}).catch(A=>{var V,M;const z=((M=(V=A.response)==null?void 0:V.data)==null?void 0:M.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";pt(z,"bottom"),console.error(A)})})};return(A,z)=>{const V=X("i-head"),M=X("i-link"),ae=X("authenticated-layout");return d(),w(J,null,[e(V,{title:Nl}),e(ae,null,Fe({title:a(()=>[v(r(Nl))]),"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:z[0]||(z[0]=ue=>o.value=!o.value)},null,8,["icon"]),A.$can("admin.user-activity-log.clear")?(d(),I(E,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:$})):k("",!0)]),default:a(()=>[t("div",Zh,[e(je,{class:"full-height-table",ref_key:"tableRef",ref:g,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":z[7]||(z[7]=ue=>_.value=ue),filter:f.search,loading:n.value,columns:P.value,rows:i.value,"rows-per-page-options":[10,25,50],style:He({height:l(c)}),onRequest:F,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:ue,message:ie,filter:Ie})=>[t("div",e$,[t("span",null,r(ie)+" "+r(Ie?" with term "+Ie:""),1)])]),body:a(ue=>[e(Re,{props:ue,class:"cursor-pointer",onClick:G(ie=>l(j)(ue.row,ie),["stop"])},{default:a(()=>[e(Y,{key:"id",props:ue},{default:a(()=>[t("div",null,[l(m).screen.lt.md?(d(),w(J,{key:0},[e(C,{name:"tag",class:"inline-icon"}),z[8]||(z[8]=v(" ID Aktifitas: "))],64)):k("",!0),v(" "+r(ue.row.id),1)]),l(m).screen.lt.md?(d(),w("div",t$,[t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(ue.row.logged_at)),1)]),t("div",null,[e(C,{name:"person",class:"inline-icon"}),e(M,{onClick:z[5]||(z[5]=G(()=>{},["stop"])),href:A.route("admin.user.detail",{id:ue.row.user_id})},{default:a(()=>[v(r(ue.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(C,{name:"category",class:"inline-icon"}),v(" "+r(ue.row.activity_category_label)+" > "+r(ue.row.activity_name_label),1)]),t("div",null,[e(C,{name:"notes",class:"inline-icon"}),v(" "+r(ue.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"logged_at",props:ue},{default:a(()=>[v(r(l(ve)(ue.row.logged_at)),1)]),_:2},1032,["props"]),e(Y,{key:"username",props:ue},{default:a(()=>[e(M,{onClick:z[6]||(z[6]=G(()=>{},["stop"])),href:A.route("admin.user.detail",{id:ue.row.user_id})},{default:a(()=>[v(r(ue.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(Y,{key:"activity_category",props:ue},{default:a(()=>[v(r(ue.row.activity_category_label),1)]),_:2},1032,["props"]),e(Y,{key:"activity_name",props:ue},{default:a(()=>[v(r(ue.row.activity_name_label),1)]),_:2},1032,["props"]),e(Y,{key:"description",props:ue,class:"wrap-column"},{default:a(()=>[v(r(ue.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:ue},{default:a(()=>[t("div",a$,[A.$can("admin.user-role.delete")?(d(),I(E,{key:0,onClick:G(ie=>O(ue.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:a(()=>[t("div",Xh,[e(ce,{modelValue:f.user_id,"onUpdate:modelValue":[z[1]||(z[1]=ue=>f.user_id=ue),B],class:"custom-select col-xs-12 col-sm-2",options:y,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:f.activity_category,"onUpdate:modelValue":[z[2]||(z[2]=ue=>f.activity_category=ue),B],class:"custom-select col-xs-12 col-sm-2",options:x.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:K,clearable:""},null,8,["modelValue","options"]),e(ce,{modelValue:f.activity_name,"onUpdate:modelValue":[z[3]||(z[3]=ue=>f.activity_name=ue),B],class:"custom-select col-xs-12 col-sm-2",options:D.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:R},null,8,["modelValue","options"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":z[4]||(z[4]=ue=>f.search=ue),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},o$=Object.freeze(Object.defineProperty({__proto__:null,default:l$},Symbol.toStringTag,{value:"Module"})),cn={__name:"UpdatePasswordForm",setup(p){const s=T(!1),m=T(null),o=T(null),i=Qe({current_password:"",password:"",password_confirmation:""}),n=()=>{i.clearErrors(),i.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>i.reset(),onError:()=>{i.errors.password&&(i.reset("password","password_confirmation"),m.value.focus()),i.errors.current_password&&(i.reset("current_password"),o.value.focus())}})};return(g,b)=>(d(),I(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>[b[6]||(b[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),b[7]||(b[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(se,{modelValue:l(i).current_password,"onUpdate:modelValue":b[1]||(b[1]=c=>l(i).current_password=c),type:s.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.current_password,"error-message":l(i).errors.current_password,rules:[c=>c&&c.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[0]||(b[0]=c=>s.value=!s.value)},{default:a(()=>[e(C,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(se,{modelValue:l(i).password,"onUpdate:modelValue":b[3]||(b[3]=c=>l(i).password=c),type:s.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.password,"error-message":l(i).errors.password,rules:[c=>c&&c.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[2]||(b[2]=c=>s.value=!s.value)},{default:a(()=>[e(C,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(se,{modelValue:l(i).password_confirmation,"onUpdate:modelValue":b[5]||(b[5]=c=>l(i).password_confirmation=c),type:s.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.password_confirmation,"error-message":l(i).errors.password_confirmation,rules:[c=>c&&c.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:b[4]||(b[4]=c=>s.value=!s.value)},{default:a(()=>[e(C,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(le,null,{default:a(()=>[e(E,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},n$=Object.freeze(Object.defineProperty({__proto__:null,default:cn},Symbol.toStringTag,{value:"Module"})),pn={__name:"UpdateProfileInformationForm",setup(p){const m=ge().props.auth.user,o=Qe({name:m.name,username:m.username,type:window.CONSTANTS.USER_TYPES[m.type]}),i=()=>rt({form:o,url:route("admin.user-profile.update")});return(n,g)=>(d(),I(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>[g[3]||(g[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),g[4]||(g[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(se,{modelValue:l(o).username,"onUpdate:modelValue":g[0]||(g[0]=b=>l(o).username=b),label:"ID Pengguna",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(se,{modelValue:l(o).name,"onUpdate:modelValue":g[1]||(g[1]=b=>l(o).name=b),modelModifiers:{trim:!0},label:"Nama",disable:l(o).processing,error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[b=>b&&b.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(se,{modelValue:l(o).type,"onUpdate:modelValue":g[2]||(g[2]=b=>l(o).type=b),label:"Jenis Akun",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(le,null,{default:a(()=>[e(E,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},s$=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),r$={class:"q-pa-xs"},i$={class:"row justify-center"},d$={class:"col col-md-6"},Fl="Pengaturan Pribadi",u$={__name:"Edit",setup(p){return(s,m)=>{const o=X("i-head"),i=X("authenticated-layout");return d(),w(J,null,[e(o,{title:Fl}),e(i,null,{title:a(()=>[v(r(Fl))]),default:a(()=>[t("div",r$,[t("div",i$,[t("div",d$,[e(pn,{class:"q-mb-md"}),e(cn)])])])]),_:1})],64)}}},m$=Object.freeze(Object.defineProperty({__proto__:null,default:u$},Symbol.toStringTag,{value:"Module"})),c$={class:"q-gutter-sm"},p$={class:"q-gutter-sm"},f$={class:"col col-md-6 q-pa-xs"},g$={class:"row"},b$={class:"detail"},v$={key:0},_$={key:1,class:"text-grey-8 text-italic"},y$={key:2},k$={class:"text-subtitle2 text-bold text-grey-8 q-mt-xs"},w$={key:3,class:"text-grey-8 text-italic"},zl="Rincian Role Pengguna",h$={__name:"Detail",setup(p){const s=ge(),m=ee(()=>{const o={};return s.props.data.permissions&&s.props.data.permissions.forEach(i=>{const n=i.category;o[n]||(o[n]=[]),o[n].push(i)}),o});return(o,i)=>{const n=X("i-head"),g=X("i-link"),b=X("authenticated-layout");return d(),w(J,null,[e(n,{title:zl}),e(b,{"show-drawer-button":!0},{title:a(()=>[v(r(zl))]),"left-button":a(()=>[t("div",c$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=c=>o.$goBack())})])]),"right-button":a(()=>[t("div",p$,[o.$can("admin.user-role.edit")?(d(),I(E,{key:0,icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=c=>l(Z).get(o.route("admin.user-role.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",f$,[t("div",g$,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>[i[7]||(i[7]=t("div",{class:"text-subtitle1 text-bold text-grey-8"},"Info Role",-1)),t("table",b$,[t("tbody",null,[t("tr",null,[i[2]||(i[2]=t("td",{style:{width:"100px"}},"Nama Role",-1)),i[3]||(i[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[i[4]||(i[4]=t("td",null,"Deskripsi",-1)),i[5]||(i[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.description),1)])])]),i[8]||(i[8]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Pengguna ",-1)),l(s).props.data.users.length>0?(d(),w("div",v$,[(d(!0),w(J,null,Ue(l(s).props.data.users,c=>(d(),w("div",null,[i[6]||(i[6]=v("  ")),e(g,{href:o.route("admin.user.detail",{id:c.id})},{default:a(()=>[v(r(c.username)+" - "+r(c.name),1)]),_:2},1032,["href"])]))),256))])):(d(),w("div",_$," Belum ada akun pengguna yang terdaftar. ")),i[9]||(i[9]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Hak Akses ",-1)),l(s).props.data.permissions.length>0?(d(),w("div",y$,[(d(!0),w(J,null,Ue(m.value,(c,u)=>(d(),w("div",{key:u},[t("div",k$,r(u),1),(d(!0),w(J,null,Ue(c,f=>(d(),w("div",{key:f.id},"  "+r(f.label),1))),128))]))),128))])):(d(),w("div",w$," Belum ada hak akses yang ditetapkan. "))]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},$$=Object.freeze(Object.defineProperty({__proto__:null,default:h$},Symbol.toStringTag,{value:"Module"})),x$={class:"q-gutter-sm"},S$={class:"col col-md-6 q-pa-xs"},V$={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},q$={__name:"Editor",setup(p){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description,permissions:s.props.data.permissions?s.props.data.permissions.map(g=>g.id):[]}),i=()=>rt({form:o,url:route("admin.user-role.save")}),n=ee(()=>{const g={};return s.props.permissions&&s.props.permissions.forEach(b=>{const c=b.category;g[c]||(g[c]=[]),g[c].push(b)}),g});return(g,b)=>{const c=X("i-head"),u=X("authenticated-layout");return d(),w(J,null,[e(c,{title:m}),e(u,{"show-drawer-button":!0},{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",x$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),"right-button":a(()=>[e(E,{icon:"save",label:"Simpan",color:"primary",disable:l(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:G(i,["prevent"])},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",S$,[e(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>l(o).id=f)},null,512),[[yt,l(o).id]]),e(se,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":b[2]||(b[2]=f=>l(o).name=f),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(o).description,"onUpdate:modelValue":b[3]||(b[3]=f=>l(o).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(d(!0),w(J,null,Ue(n.value,(f,_)=>(d(),w("div",{key:_},[t("div",V$,r(_),1),(d(!0),w(J,null,Ue(f,y=>(d(),w("div",{key:y.id},[e(ia,{class:"q-ma-none q-pa-none list-checkbox",modelValue:l(o).permissions,"onUpdate:modelValue":S=>l(o).permissions=S,val:y.id,label:y.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},C$=vt(q$,[["__scopeId","data-v-2c2a059c"]]),T$=Object.freeze(Object.defineProperty({__proto__:null,default:C$},Symbol.toStringTag,{value:"Module"})),P$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},R$={class:"q-pa-xs"},I$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},O$={class:"flex justify-end"},Ll="Role Pengguna",D$={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=De({search:"",...Le()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama Role",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{y()});const _=K=>st({message:`Hapus role ${K.name}?`,url:route("admin.user-role.delete",K.id),fetchItemsCallback:y,loading:i}),y=(K=null)=>{Ke({pagination:u,filter:c,props:K,rows:o,url:route("admin.user-role.data"),loading:i,tableRef:n})},S=K=>Z.get(route("admin.user-role.detail",{id:K.id})),{protectClick:q}=At(),x=q(S),D=ee(()=>s.screen.gt.sm?f:f.filter(K=>K.name==="name"||K.name==="action"));return(K,R)=>{const U=X("i-head"),O=X("authenticated-layout");return d(),w(J,null,[e(U,{title:Ll}),e(O,null,Fe({title:a(()=>[v(r(Ll))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=F=>m.value=!m.value)},null,8,["icon"]),K.$can("admin.user-role.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=F=>l(Z).get(K.route("admin.user-role.add")))})):k("",!0)]),default:a(()=>[t("div",R$,[e(je,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":R[4]||(R[4]=F=>u.value=F),filter:c.search,loading:i.value,columns:D.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:F,message:B,filter:h})=>[t("div",I$,[t("span",null,r(B)+" "+r(h?" with term "+h:""),1)])]),body:a(F=>[e(Re,{props:F,class:"cursor-pointer",onClick:G(B=>l(x)(F.row,B),["stop"])},{default:a(()=>[e(Y,{key:"name",props:F,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),I(C,{key:0,name:"person"})):k("",!0),v(" "+r(F.row.name),1)])]),_:2},1032,["props"]),e(Y,{key:"description",props:F,class:"wrap-column"},{default:a(()=>[v(r(F.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:F},{default:a(()=>[t("div",O$,[K.$can("admin.user-role.add")||K.$can("admin.user-role.edit")||K.$can("admin.user-role.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[3]||(R[3]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[K.$can("admin.user-role.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(B=>l(Z).get(K.route("admin.user-role.duplicate",F.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(N,null,{default:a(()=>R[5]||(R[5]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),K.$can("admin.user-role.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(B=>l(Z).get(K.route("admin.user-role.edit",F.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>R[6]||(R[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),K.$can("admin.user-role.delete")?te((d(),I(oe,{key:2,onClick:G(B=>_(F.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>R[7]||(R[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",P$,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":R[2]||(R[2]=F=>c.search=F),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},U$=Object.freeze(Object.defineProperty({__proto__:null,default:D$},Symbol.toStringTag,{value:"Module"})),j$={class:"q-gutter-sm"},E$={class:"q-gutter-sm"},A$={class:"row justify-center"},B$={class:"col col-md-6 q-pa-xs"},M$={class:"row"},N$={class:"detail"},F$={key:0},z$={key:0},L$={key:1},K$={key:2},Kl="Rincian Pengguna",H$={__name:"Detail",setup(p){const s=ge();return(m,o)=>{const i=X("i-head"),n=X("i-link"),g=X("authenticated-layout");return d(),w(J,null,[e(i,{title:Kl}),e(g,{"show-drawer-button":!0},{title:a(()=>[v(r(Kl))]),"left-button":a(()=>[t("div",j$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.$inertia.get(m.route("admin.user.index")))})])]),"right-button":a(()=>[t("div",E$,[m.$can("admin.user.edit")&&l(s).props.data.id!=l(s).props.auth.user.id?(d(),I(E,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:o[1]||(o[1]=b=>m.$inertia.get(m.route("admin.user.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[t("div",A$,[t("div",B$,[t("div",M$,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>{var b,c;return[o[21]||(o[21]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),t("table",N$,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"125px"}},"ID Pengguna",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.username),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Nama Pengguna",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Jenis Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.USER_TYPES[l(s).props.data.type]),1)]),l(s).props.data.roles.length>0?(d(),w("tr",F$,[o[8]||(o[8]=t("td",null,"Peran Pengguna",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,[(d(!0),w(J,null,Ue(l(s).props.data.roles,(u,f)=>(d(),w("div",{key:u.id,class:"inline"},[e(n,{href:m.route("admin.user-role.detail",{id:u.id})},{default:a(()=>[v(r(u.name),1)]),_:2},1032,["href"]),f<l(s).props.data.roles.length-1?(d(),w("span",z$,", ")):k("",!0)]))),128))])])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Status",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Dibuat",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(((b=l(s).props.data.creator)==null?void 0:b.name)??"Sistem")+" ("+r(((c=l(s).props.data.creator)==null?void 0:c.username)??"system")+") ",1)]),l(s).props.data.updated_at?(d(),w("tr",L$,[o[14]||(o[14]=t("td",null,"Diperbarui",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,[v(r(l(ve)(l(s).props.data.updated_at))+" ",1),l(s).props.data.updater?(d(),w(J,{key:0},[v(" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(s).props.data.updater.username)+") ",1)],64)):k("",!0)])])):k("",!0),t("tr",null,[o[16]||(o[16]=t("td",null,"Terakhir login",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.last_login_datetime?m.$dayjs(l(s).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),l(s).props.data.last_activity_datetime?(d(),w("tr",K$,[o[19]||(o[19]=t("td",null,"Aktifitas Terakhir",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,[v(r(m.$dayjs(l(s).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),o[18]||(o[18]=t("br",null,null,-1)),v(r(l(s).props.data.last_activity_description),1)])])):k("",!0)])])]}),_:1})]),_:1})])])])]),_:1})],64)}}},W$=Object.freeze(Object.defineProperty({__proto__:null,default:H$},Symbol.toStringTag,{value:"Module"}));function Y$(p){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(p)}const Q$={class:"q-gutter-sm"},J$={class:"row justify-center"},G$={class:"col col-md-6 q-pa-xs"},X$={__name:"Editor",setup(p){const s=ot(window.CONSTANTS.USER_TYPES),m=ge(),o=m.props.roles,i=m.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=T(!m.props.data.id),g=m.props.data.roles,b=Array.isArray(g)?g.map(f=>f.id):[],c=Qe({id:m.props.data.id,name:m.props.data.name,username:m.props.data.username,password:m.props.data.id?null:"12345",type:m.props.data.type?m.props.data.type:s[0].value,active:!!m.props.data.active,roles:b}),u=()=>rt({form:c,url:route("admin.user.save")});return(f,_)=>{const y=X("i-head"),S=X("authenticated-layout");return d(),w(J,null,[e(y,{title:l(i)},null,8,["title"]),e(S,{"show-drawer-button":!0},{title:a(()=>[v(r(l(i)),1)]),"left-button":a(()=>[t("div",Q$,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=q=>f.$goBack())})])]),default:a(()=>[t("div",J$,[t("div",G$,[e(Je,{class:"row",onSubmit:G(u,["prevent"])},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=q=>l(c).id=q)},null,512),[[yt,l(c).id]]),e(se,{autofocus:"",modelValue:l(c).username,"onUpdate:modelValue":_[2]||(_[2]=q=>l(c).username=q),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:l(c).processing,error:!!l(c).errors.username,"error-message":l(c).errors.username,rules:[q=>q&&q.length>0||"Username harus diisi.",q=>l(Y$)(q)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(se,{modelValue:l(c).name,"onUpdate:modelValue":_[3]||(_[3]=q=>l(c).name=q),modelModifiers:{trim:!0},label:"Nama",error:!!l(c).errors.name,disable:l(c).processing,"error-message":l(c).errors.name,rules:[q=>q&&q.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(c).password,"onUpdate:modelValue":_[5]||(_[5]=q=>l(c).password=q),label:"Kata Sandi","lazy-rules":"",disable:l(c).processing,error:!!l(c).errors.password,"error-message":l(c).errors.password,"hide-bottom-space":"",type:n.value?"text":"password"},{append:a(()=>[e(E,{dense:"",flat:"",round:"",onClick:_[4]||(_[4]=q=>n.value=!n.value)},{default:a(()=>[e(C,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","disable","error","error-message","type"]),e(ce,{modelValue:l(c).type,"onUpdate:modelValue":_[6]||(_[6]=q=>l(c).type=q),label:"Jenis Akun",options:l(s),"map-options":"","emit-value":"","lazy-rules":"",disable:l(c).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(c).errors.type,"error-message":l(c).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),l(c).type=="standard_user"?(d(),I(ce,{key:0,modelValue:l(c).roles,"onUpdate:modelValue":_[7]||(_[7]=q=>l(c).roles=q),label:"Peran",options:l(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:l(c).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(c).errors.roles||!!l(c).errors["roles.0"],"error-message":l(c).errors.roles||l(c).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(ya,{modelValue:l(c).active,"onUpdate:modelValue":_[8]||(_[8]=q=>l(c).active=q),disable:l(c).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(c).processing,onClick:u},null,8,["disable"]),e(E,{icon:"cancel",label:"Batal",class:"text-black",disable:l(c).processing,onClick:_[9]||(_[9]=q=>f.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},Z$=Object.freeze(Object.defineProperty({__proto__:null,default:X$},Symbol.toStringTag,{value:"Module"})),ex={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},tx={class:"q-pa-xs"},ax={class:"full-width row flex-center text-grey-8 q-gutter-sm"},lx={class:"elipsis",style:{"max-width":"200px"}},ox={class:"flex justify-end"},Hl="Pengguna",nx={__name:"Index",setup(p){const s=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.USER_TYPES)],m=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=ge(),i=$e(),n=o.props.auth.user,g=T([]),b=T(!0),c=T(!1),u=De({type:"all",roles:[],status:"active",search:""}),f=o.props.roles.map(h=>({value:h.id,label:h.name})),_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),y=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];he(()=>{q()});const S=()=>q(),q=(h=null)=>Ke({pagination:_,props:h,rows:g,loading:b,filter:u,url:route("admin.user.data"),tableRef:O}),x=h=>st({url:route("admin.user.delete",h.id),message:`Hapus pengguna ${h.username}?`,fetchItemsCallback:q,loading:b}),D=ee(()=>i.screen.gt.sm?y:y.filter(h=>h.name==="username"||h.name==="action")),K=h=>Z.get(route("admin.user.detail",h.id)),{protectClick:R}=At(),U=R(K),O=T(null),F=T(null),B=at(F);return(h,j)=>{const P=X("i-head"),$=X("authenticated-layout");return d(),w(J,null,[e(P,{title:Hl}),e($,null,Fe({title:a(()=>[v(r(Hl))]),"right-button":a(()=>[e(E,{icon:c.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:j[0]||(j[0]=A=>c.value=!c.value)},null,8,["icon"]),h.$can("admin.user.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:j[1]||(j[1]=A=>l(Z).get(h.route("admin.user.add")))})):k("",!0)]),default:a(()=>[t("div",tx,[e(je,{ref_key:"tableRef",ref:O,class:"full-height-table",style:He({height:l(B)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":j[7]||(j[7]=A=>_.value=A),filter:u.search,loading:b.value,columns:D.value,rows:g.value,"rows-per-page-options":[10,25,50],onRequest:q,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:A,message:z,term:V})=>[t("div",ax,[t("span",null,r(z)+" "+r(V?" with term "+V:""),1)])]),body:a(A=>[e(Re,{props:A,class:xe([A.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(z=>l(U)(A.row,z),["stop"])},{default:a(()=>[e(Y,{key:"username",props:A},{default:a(()=>[t("div",null,[l(i).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[e(C,{name:"person",class:"inline-icon"}),j[8]||(j[8]=v(" Username: "))],64)),v(" "+r(A.row.username),1)]),l(i).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[t("div",null,[e(C,{name:"person",class:"inline-icon"}),v(" Nama: "+r(A.row.name),1)]),t("div",lx,[e(C,{name:"group",class:"inline-icon"}),j[9]||(j[9]=v(" Jenis Akun: ")),t("span",null,r(h.$CONSTANTS.USER_TYPES[A.row.type]),1)]),t("div",null,[e(C,{name:"group",class:"inline-icon"}),v(" Peran: "+r(A.row.roles.map(z=>z.name).join(",")),1)])],64))]),_:2},1032,["props"]),e(Y,{key:"name",props:A},{default:a(()=>[v(r(A.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"role",props:A,align:"center"},{default:a(()=>[t("span",null,r(h.$CONSTANTS.USER_TYPES[A.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:A},{default:a(()=>[t("div",ox,[h.$can("admin.user.add")||h.$can("admin.user.edit")||h.$can("admin.user.delete")?(d(),I(E,{key:0,disable:A.row.id==l(n).id||A.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:j[6]||(j[6]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[h.$can("admin.user.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(z=>l(Z).get(h.route("admin.user.duplicate",A.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(N,null,{default:a(()=>j[10]||(j[10]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),h.$can("admin.user.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(z=>l(Z).get(h.route("admin.user.edit",A.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>j[11]||(j[11]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),h.$can("admin.user.delete")?te((d(),I(oe,{key:2,onClick:G(z=>x(A.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>j[12]||(j[12]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[c.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:F},{default:a(()=>[t("div",ex,[e(ce,{modelValue:u.type,"onUpdate:modelValue":[j[2]||(j[2]=A=>u.type=A),S],class:"custom-select col-xs-12 col-sm-2",options:s,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:u.status,"onUpdate:modelValue":[j[3]||(j[3]=A=>u.status=A),S],class:"custom-select col-xs-12 col-sm-2",options:m,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:u.roles,"onUpdate:modelValue":[j[4]||(j[4]=A=>u.roles=A),S],class:"custom-select col-xs-12 col-sm-2",options:l(f),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":j[5]||(j[5]=A=>u.search=A),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},sx=Object.freeze(Object.defineProperty({__proto__:null,default:nx},Symbol.toStringTag,{value:"Module"})),rx={class:"q-gutter-sm"},ix={class:"col col-lg-6 q-pa-xs"},dx={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},ux={class:"row q-col-gutter-sm q-mb-md"},mx={key:0},cx={class:"text-bold"},px={key:0},fx={class:"text-caption text-grey-8"},gx={key:1},Wl="Buat Penyesuaian Stok",bx={__name:"Create",setup(p){const s=ge(),m=T(!1),o=s.props.products,{filteredCategories:i,filterCategories:n}=Ma(s.props.categories),{filteredSuppliers:g,filterSupplierFn:b}=Na(s.props.suppliers),c=T({search:null,category_id:null,supplier_id:null}),u=T([]),f=Qe({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),_=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(K,R)=>H(K)+" "+R.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],y=ot(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),S=ee(()=>o.filter(K=>{let R=!0;if(m.value&&!u.value.find(U=>U.id===K.id))return!1;if(c.value.search){const U=c.value.search.toLowerCase();R=K.name.toLowerCase().includes(U)||K.description.toLowerCase().includes(U)||K.barcode&&K.barcode.toLowerCase().includes(U)}return R&&c.value.category_id&&(R=K.category_id===c.value.category_id),R&&c.value.supplier_id&&(R=K.supplier_id===c.value.supplier_id),R})),q=()=>{xt.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{f.product_ids=u.value.map(K=>K.id),ua(f,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:f,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},x=$e(),D=ee(()=>x.screen.gt.sm?_:_.filter(K=>K.name==="name"));return(K,R)=>{const U=X("i-head"),O=X("authenticated-layout");return d(),w(J,null,[e(U,{title:Wl}),e(O,{"show-drawer-button":!0},{title:a(()=>[v(r(Wl))]),"left-button":a(()=>[t("div",rx,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:R[0]||(R[0]=F=>l(Z).get(K.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[e(E,{icon:"cancel",disable:l(f).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:R[1]||(R[1]=F=>l(Z).get(K.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(E,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:l(f).processing||u.value.length==0,class:"q-ml-sm",onClick:q},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",ix,[e(Je,{class:"row",onSubmit:G(q,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-sm"},{default:a(()=>{var F,B,h;return[R[10]||(R[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Ht,{modelValue:l(f).datetime,"onUpdate:modelValue":R[2]||(R[2]=j=>l(f).datetime=j),label:"Waktu",error:!!l(f).errors.datetime,disable:l(f).processing,"error-message":l(f).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:l(f).type,"onUpdate:modelValue":R[3]||(R[3]=j=>l(f).type=j),options:l(y),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(f).errors.type,disable:l(f).processing,"map-options":"","emit-value":"","error-message":l(f).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(se,{modelValue:l(f).notes,"onUpdate:modelValue":R[4]||(R[4]=j=>l(f).notes=j),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(f).processing,error:!!l(f).errors.notes,"error-message":l(f).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),u.value.length===0||(F=l(s).props.errors)!=null&&F.product_ids?(d(),w("div",dx,[u.value.length===0?(d(),w(J,{key:0},[v(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(B=l(s).props.errors)!=null&&B.product_ids?(d(),w(J,{key:1},[v(r((h=l(s).props.errors)==null?void 0:h.product_ids),1)],64)):k("",!0)])):k("",!0),R[11]||(R[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",ux,[e(se,{modelValue:c.value.search,"onUpdate:modelValue":R[5]||(R[5]=j=>c.value.search=j),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(ce,{modelValue:c.value.category_id,"onUpdate:modelValue":R[6]||(R[6]=j=>c.value.category_id=j),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(i),"map-options":"",dense:"","emit-value":"",onFilter:l(n),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(ce,{modelValue:c.value.supplier_id,"onUpdate:modelValue":R[7]||(R[7]=j=>c.value.supplier_id=j),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(g),"map-options":"",dense:"","emit-value":"",onFilter:l(b),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:R[8]||(R[8]=j=>m.value=!m.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},r(m.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(je,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:D.value,rows:S.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:u.value,"onUpdate:selected":R[9]||(R[9]=j=>u.value=j)},{"body-cell-name":a(j=>[e(Y,{props:j},{default:a(()=>[l(x).screen.lt.md?(d(),w("div",mx,[t("div",cx,r(j.row.name),1),j.row.category?(d(),w("div",px,r(j.row.category.name),1)):k("",!0),t("div",fx,r(l(H)(j.row.stock))+" "+r(j.row.uom),1)])):(d(),w("div",gx,r(j.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},vx=Object.freeze(Object.defineProperty({__proto__:null,default:bx},Symbol.toStringTag,{value:"Module"})),_x={class:"q-gutter-sm"},yx={class:"q-gutter-sm"},kx={class:"row justify-center"},wx={class:"col col-lg-8 q-pa-sm"},hx={class:"row"},$x={class:"detail"},xx={key:0},Sx={key:1},Vx={class:"text-grey-9"},qx={__name:"Detail",setup(p){const s=ge(),m=`Rincian #${s.props.data.code}`,o=s.props.details,i=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:c=>H(c)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:c=>H(c)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:c=>H(c)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],n=$e(),g=ee(()=>n.screen.gt.sm?i:i.filter(c=>c.name==="no")),b=()=>{window.open(route("admin.stock-adjustment.print",{id:s.props.data.id}),"_blank")};return(c,u)=>{const f=X("i-head"),_=X("i-link"),y=X("authenticated-layout");return d(),w(J,null,[e(f,{title:m}),e(y,{"show-drawer-button":!0},{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",_x,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=S=>c.$inertia.get(c.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[t("div",yx,[e(E,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[1]||(u[1]=S=>b())})])]),default:a(()=>[t("div",kx,[t("div",wx,[t("div",hx,[e(pe,{square:"",flat:"",bordered:"",class:"q-card col"},{default:a(()=>[e(le,null,{default:a(()=>[u[22]||(u[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",$x,[t("tbody",null,[t("tr",null,[u[2]||(u[2]=t("td",{style:{width:"120px"}},"Kode",-1)),u[3]||(u[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+r(l(s).props.data.code),1)]),t("tr",null,[u[4]||(u[4]=t("td",null,"Jenis",-1)),u[5]||(u[5]=t("td",null,":",-1)),t("td",null,r(c.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[l(s).props.data.type]),1)]),t("tr",null,[u[6]||(u[6]=t("td",null,"Status",-1)),u[7]||(u[7]=t("td",null,":",-1)),t("td",null,r(c.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[u[8]||(u[8]=t("td",null,"Waktu",-1)),u[9]||(u[9]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),l(s).props.data.created_at?(d(),w("tr",xx,[u[11]||(u[11]=t("td",null,"Dibuat Oleh",-1)),u[12]||(u[12]=t("td",null,":",-1)),t("td",null,[l(s).props.data.creator?(d(),w(J,{key:0},[e(_,{href:c.route("admin.user.detail",{id:l(s).props.data.creator})},{default:a(()=>[v(r(l(s).props.data.creator.username)+" - "+r(l(s).props.data.creator.name),1)]),_:1},8,["href"]),u[10]||(u[10]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(l(s).props.data.created_at)),1)])])):k("",!0),l(s).props.data.updater?(d(),w("tr",Sx,[u[14]||(u[14]=t("td",null,"Diperbarui oleh",-1)),u[15]||(u[15]=t("td",null,":",-1)),t("td",null,[l(s).props.data.updater?(d(),w(J,{key:0},[e(_,{href:c.route("admin.user.detail",{id:l(s).props.data.updater})},{default:a(()=>[v(r(l(s).props.data.updater.username)+" - "+r(l(s).props.data.updater.name),1)]),_:1},8,["href"]),u[13]||(u[13]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(l(s).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[u[16]||(u[16]=t("td",null,"Total Modal",-1)),u[17]||(u[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:xe(l(s).props.data.total_cost<0?"text-red-10":l(s).props.data.total_cost>0?"text-green-10":"")},r(l(sa)(l(s).props.data.total_cost)),3)])]),t("tr",null,[u[18]||(u[18]=t("td",null,"Total Harga",-1)),u[19]||(u[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:xe(l(s).props.data.total_price<0?"text-red-10":l(s).props.data.total_price>0?"text-green-10":"")},r(l(sa)(l(s).props.data.total_price)),3)])]),t("tr",null,[u[20]||(u[20]=t("td",null,"Catatan",-1)),u[21]||(u[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)])])])]),_:1}),e(le,null,{default:a(()=>[u[28]||(u[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(je,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:g.value,rows:l(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":a(S=>[e(Y,{props:S},{default:a(()=>[l(n).screen.lt.md?(d(),w(J,{key:1},[t("div",Vx,[t("b",null,"#"+r(S.rowIndex+1),1),u[23]||(u[23]=v(" - ")),e(_,{href:c.route("admin.product.detail",{id:S.row.product_id})},{default:a(()=>[v(r(S.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[v(" Stok Lama: "+r(l(H)(S.row.old_quantity))+" "+r(S.row.uom),1),u[25]||(u[25]=t("br",null,null,-1)),v(" Stok Baru: "+r(l(H)(S.row.new_quantity))+" "+r(S.row.uom),1),u[26]||(u[26]=t("br",null,null,-1)),t("div",{class:xe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},[v(" Selisih: "+r((S.row.balance>0?"+":"")+l(H)(S.row.balance))+" "+r(S.row.uom),1),u[24]||(u[24]=t("br",null,null,-1)),v(" (Rp. "+r(l(H)(S.row.subtotal_cost))+" / Rp. "+r(l(H)(S.row.subtotal_price))+") ",1)],2),u[27]||(u[27]=t("br",null,null,-1)),v(" "+r(S.row.notes),1)])],64)):(d(),w(J,{key:0},[v(r(S.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":a(S=>[e(Y,{props:S},{default:a(()=>[e(_,{href:c.route("admin.product.detail",{id:S.row.product_id})},{default:a(()=>[v(r(S.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":a(S=>[e(Y,{props:S},{default:a(()=>[t("div",{class:xe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},r((S.row.balance>0?"+":"")+l(H)(S.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":a(S=>[e(Y,{props:S},{default:a(()=>[t("div",{class:xe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},r(l(H)(S.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":a(S=>[e(Y,{props:S},{default:a(()=>[t("div",{class:xe(S.row.balance<0?"text-red-10":S.row.balance>0?"text-green-10":"")},r(l(H)(S.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},Cx=Object.freeze(Object.defineProperty({__proto__:null,default:qx},Symbol.toStringTag,{value:"Module"})),Tx={class:"q-gutter-sm"},Px={class:"col col-lg-6 q-pa-xs"},Rx={class:"text-bold"},Ix={key:0},Ox={class:"text-caption text-grey-8"},Yl="Penyesuaian Stok",Dx={__name:"Editor",setup(p){const s=$e(),m=ge(),o=Qe({id:m.props.item.id,type:m.props.item.type,datetime:new Date(m.props.item.datetime),notes:m.props.item.notes,action:"save",details:[]}),i=ot(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),n=T(m.props.details.map(f=>(typeof f.new_quantity=="string"&&(f.new_quantity=parseFloat(f.new_quantity)),f))),g=f=>{const _=()=>{o.action=f,o.details=n.value.map(y=>({id:y.id,new_quantity:y.new_quantity})),ua(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:o,url:route("admin.stock-adjustment.save")})};f==="close"||f==="cancel"?xt.create({title:"Konfirmasi",message:f==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{_()}).onCancel(()=>{}):_()},b=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:f=>H(f)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:f=>H(f)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(f,_)=>H(_.new_quantity-_.old_quantity)}],c=ee(()=>s.screen.gt.sm?b:b.filter(f=>f.name==="product_name"||f.name==="new_quantity")),u=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(f,_)=>{const y=X("i-head"),S=X("authenticated-layout");return d(),w(J,null,[e(y,{title:Yl}),e(S,{"show-drawer-button":!0},{title:a(()=>[v(r(Yl))]),"left-button":a(()=>[t("div",Tx,[l(s).screen.gt.sm?(d(),I(E,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=q=>f.$inertia.get(f.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":a(()=>[e(E,{icon:"save",onClick:_[1]||(_[1]=q=>g("save")),disable:l(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(E,{icon:"check",onClick:_[2]||(_[2]=q=>g("close")),disable:l(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),f.$can("admin.product.import")||f.$can("admin.product:view-cost")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:_[5]||(_[5]=G(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:_[3]||(_[3]=q=>u())},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"print"})]),_:1}),e(N,null,{default:a(()=>_[10]||(_[10]=[v(" Cetak Kartu Stok")])),_:1})]),_:1})),[[ne],[fe]]),te((d(),I(oe,{clickable:"",onClick:_[4]||(_[4]=G(q=>g("cancel"),["stop"]))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"cancel",color:"red"})]),_:1}),e(N,{class:"text-red"},{default:a(()=>_[11]||(_[11]=[v("Batalkan")])),_:1})]),_:1})),[[ne],[fe]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Px,[e(Je,{class:"row",onSubmit:G(g,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,null,{default:a(()=>_[12]||(_[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[6]||(_[6]=q=>l(o).id=q)},null,512),[[yt,l(o).id]]),e(Ht,{modelValue:l(o).datetime,"onUpdate:modelValue":_[7]||(_[7]=q=>l(o).datetime=q),label:"Waktu",error:!!l(o).errors.datetime,disable:l(o).processing,"error-message":l(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":_[8]||(_[8]=q=>l(o).type=q),options:l(i),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(o).errors.type,disable:l(o).processing,"map-options":"","emit-value":"","error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(se,{modelValue:l(o).notes,"onUpdate:modelValue":_[9]||(_[9]=q=>l(o).notes=q),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(le,{class:"q-pa-xs"},{default:a(()=>[e(je,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:c.value,rows:n.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":a(q=>[e(Y,{props:q},{default:a(()=>[t("div",Rx,r(q.row.product_name),1),l(s).screen.lt.md?(d(),w("div",Ix,[t("div",Ox,[v(" Tercatat: "+r(l(H)(q.row.old_quantity))+" ",1),_[13]||(_[13]=t("br",null,null,-1)),v(" Selisih: "+r(l(H)(q.row.new_quantity-q.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":a(q=>[e(Y,{props:q,class:"text-center"},{default:a(()=>[e(Me,{modelValue:q.row[q.col.name],"onUpdate:modelValue":x=>q.row[q.col.name]=x,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ux=Object.freeze(Object.defineProperty({__proto__:null,default:Dx},Symbol.toStringTag,{value:"Module"}));function jx(){const p=It();if(!p)throw new Error("useCan must be called within a component setup function.");return s=>p.proxy.$can(s)}const Ex={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ax={class:"q-pa-xs"},Bx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Mx={key:0,class:"flex q-gutter-xs"},Nx={class:"flex q-col-gutter-xs"},Fx={key:0},zx={key:1},Lx={key:0},Kx={class:"flex justify-end"},Ql="Penyesuaian Stok",Hx={__name:"Index",setup(p){const s=T([]),m=T(!0),o=T(!1),i=T(null),n=T(null),g=at(n),b=zt(),c=Lt(),u=[{label:"Semua Tahun",value:"all"},{label:`${b}`,value:b},...Ot(b-2,b-1).reverse()],f=[{value:"all",label:"Semua Bulan"},...Dt()],_=De({search:"",year:b,month:c,status:"all",type:"all",...Le()}),y=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],S=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],q=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),x=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];he(()=>{K()});const D=j=>st({message:`Hapus Penyesuaian Stok #${j.code}?`,url:route("admin.stock-adjustment.delete",j.id),fetchItemsCallback:K,loading:m}),K=(j=null)=>Ke({pagination:q,filter:_,props:j,rows:s,url:route("admin.stock-adjustment.data"),loading:m,tableRef:i}),R=()=>{K()},U=j=>{j.status=="draft"?Z.get(route("admin.stock-adjustment.editor",j.id)):Z.get(route("admin.stock-adjustment.detail",j.id))},{protectClick:O}=At(),F=O(U),B=$e(),h=ee(()=>{let j=x;return jx()||(j=j.filter(P=>P.name!=="cost")),B.screen.gt.sm?j:j.filter(P=>P.name==="id"||P.name==="action")});return(j,P)=>{const $=X("i-head"),A=X("authenticated-layout");return d(),w(J,null,[e($,{title:Ql}),e(A,null,Fe({"right-button":a(()=>[e(E,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=z=>o.value=!o.value)},null,8,["icon"]),j.$can("admin.stock-adjustment.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=z=>l(Z).get(j.route("admin.stock-adjustment.create")))})):k("",!0)]),title:a(()=>[v(r(Ql))]),default:a(()=>[t("div",Ax,[e(je,{ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:q.value,"onUpdate:pagination":P[8]||(P[8]=z=>q.value=z),filter:_.search,loading:m.value,columns:h.value,rows:s.value,"rows-per-page-options":[10,25,50],style:He({height:l(g)}),onRequest:K,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:z,message:V,filter:M})=>[t("div",Bx,[t("span",null,r(V)+" "+r(M?" with term "+M:""),1)])]),body:a(z=>[e(Re,{props:z,onClick:G(V=>l(F)(z.row,V),["stop"]),class:"cursor-pointer"},{default:a(()=>[e(Y,{key:"id",props:z},{default:a(()=>[l(B).screen.lt.md?(d(),w(J,{key:1},[t("div",Nx,[t("div",null,"#"+r(z.row.code),1),t("div",null,[e(C,{name:"history"}),v(" "+r(l(ve)(z.row.datetime)),1)]),e(oo,{dense:"",size:"sm",color:z.row.status==="draft"?"orange":z.row.status==="closed"?"green":z.row.status==="canceled"?"red":"",icon:z.row.status==="draft"?"emergency":z.row.status==="closed"?"check":z.row.status==="canceled"?"close":""},{default:a(()=>[v(r(j.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[z.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(C,{name:"category"}),v(" "+r(j.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[z.row.type]),1)]),z.row.created_by?(d(),w("div",Fx,[e(C,{name:"person"}),P[9]||(P[9]=v(" Dibuat: ")),t("b",null,r(z.row.created_by.username),1),e(C,{name:"history"}),v(" "+r(l(ve)(z.row.created_at)),1)])):k("",!0),z.row.updated_by?(d(),w("div",zx,[e(C,{name:"person"}),P[10]||(P[10]=v(" Diperbarui: ")),t("b",null,r(z.row.updated_by.username),1),e(C,{name:"history"}),v(" "+r(l(ve)(z.row.updated_at)),1)])):k("",!0),t("div",{class:xe(z.row.total_cost<0?"text-red-10":z.row.total_cost>0?"text-green-10":"")},[e(C,{name:"money"}),j.$can("admin.product:view-cost")?(d(),w("span",Lx,"Rp. "+r(l(H)(z.row.total_cost))+" / ",1)):k("",!0),v(" Rp. "+r(l(H)(z.row.total_price)),1)],2)],64)):(d(),w("div",Mx,"#"+r(z.row.code),1))]),_:2},1032,["props"]),e(Y,{key:"datetime",props:z},{default:a(()=>[v(r(l(ve)(z.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"status",props:z,class:"text-center"},{default:a(()=>[v(r(j.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[z.row.status]),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:z},{default:a(()=>[v(r(j.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[z.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"total_cost",props:z},{default:a(()=>[j.$can("admin.product:view-cost")?(d(),w("div",{key:0,class:xe(z.row.total_cost<0?"text-red-10":z.row.total_cost>0?"text-green-10":"")},r(l(H)(z.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total_price",props:z},{default:a(()=>[t("div",{class:xe(z.row.total_price<0?"text-red-10":z.row.total_price>0?"text-green-10":"")},r(l(H)(z.row.total_price)),3)]),_:2},1032,["props"]),e(Y,{key:"notes",props:z},{default:a(()=>[v(r(z.row.notes),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:z},{default:a(()=>[t("div",Kx,[j.$can("admin.stock-adjustment.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[7]||(P[7]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[j.$can("admin.stock-adjustment.delete")?te((d(),I(oe,{key:0,onClick:G(V=>D(z.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>P[11]||(P[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",Ex,[e(ce,{modelValue:_.year,"onUpdate:modelValue":[P[2]||(P[2]=z=>_.year=z),R],options:u,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),_.year!="all"?(d(),I(ce,{key:0,modelValue:_.month,"onUpdate:modelValue":[P[3]||(P[3]=z=>_.month=z),R],options:f,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:_.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:_.status,"onUpdate:modelValue":[P[4]||(P[4]=z=>_.status=z),R],options:y,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:_.type,"onUpdate:modelValue":[P[5]||(P[5]=z=>_.type=z),R],options:S,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":P[6]||(P[6]=z=>_.search=z),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wx=Object.freeze(Object.defineProperty({__proto__:null,default:Hx},Symbol.toStringTag,{value:"Module"})),Yx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Qx={class:"q-pa-xs"},Jx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Jl="Riwayat Stok",Gx={__name:"Index",setup(p){ge();const s=T(null),m=T(null),o=at(m),i=zt(),n=Lt(),g=[{label:"Semua Tahun",value:"all"},{label:`${i}`,value:i},...Ot(i-2,i-1).reverse()],b=[{value:"all",label:"Semua Bulan"},...Dt()],c=[{value:"all",label:"Semua"},...ot(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],u=$e(),f=T(!1),_=T([]),y=T(!0),S=De({type:"all",search:"",year:i,month:n,...Le()}),q=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let x=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{const O=new URLSearchParams(window.location.search).get("page");O&&(q.value.page=parseInt(O)),D()});const D=(U=null)=>{Ke({pagination:q,filter:S,props:U,rows:_,url:route("admin.stock-movement.data"),loading:y,tableRef:s})},K=()=>{D()},R=ee(()=>u.screen.lt.sm?x.filter(U=>U.name==="id"||U.name==="quantity"):x);return(U,O)=>{const F=X("i-head"),B=X("authenticated-layout");return d(),w(J,null,[e(F,{title:Jl}),e(B,null,Fe({title:a(()=>[v(r(Jl))]),"right-button":a(()=>[e(E,{icon:f.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=h=>f.value=!f.value)},null,8,["icon"])]),default:a(()=>[t("div",Qx,[e(je,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:q.value,"onUpdate:pagination":O[5]||(O[5]=h=>q.value=h),filter:S.search,loading:y.value,columns:R.value,rows:_.value,"rows-per-page-options":[10,25,50],style:He({height:l(o)}),onRequest:D,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:P})=>[t("div",Jx,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Re,{props:h},{default:a(()=>[e(Y,{key:"id",props:h},{default:a(()=>[t("div",null,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(h.row.code),1)]),t("div",null,[e(C,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(h.row.created_at)),1)]),t("div",null,[e(gt,null,{default:a(()=>[v(r(U.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[h.row.ref_type]),1)]),_:2},1024)]),l(u).screen.lt.sm?(d(),w(J,{key:0},[t("div",null,[e(C,{name:"token",class:"inline-icon"}),v(" "+r(h.row.product.name),1)]),t("div",{class:xe(h.row.quantity>0?"text-positive":"text-negative")},[e(C,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(l(H)(h.row.quantity_before))+" "+r(h.row.uom)+"  "+r(l(H)(h.row.quantity_after))+" "+r(h.row.uom),1)],2),e(Se,{text:h.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"product",props:h},{default:a(()=>[v(r(h.row.product.name),1)]),_:2},1032,["props"]),e(Y,{key:"quantity_before",props:h},{default:a(()=>[v(r(l(H)(h.row.quantity_before)),1)]),_:2},1032,["props"]),e(Y,{key:"quantity",props:h,class:xe(h.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[v(r(l($t)(h.row.quantity))+" ",1),l(u).screen.lt.sm?(d(),w(J,{key:0},[v(r(h.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Y,{key:"quantity_after",props:h},{default:a(()=>[v(r(l(H)(h.row.quantity_after)),1)]),_:2},1032,["props"]),e(Y,{key:"uom",props:h},{default:a(()=>[v(r(h.row.uom),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:h},{default:a(()=>[e(Se,{text:h.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[f.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:m},{default:a(()=>[t("div",Yx,[e(ce,{modelValue:S.year,"onUpdate:modelValue":[O[1]||(O[1]=h=>S.year=h),K],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),S.year!="all"?(d(),I(ce,{key:0,modelValue:S.month,"onUpdate:modelValue":[O[2]||(O[2]=h=>S.month=h),K],options:b,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:S.year===null},null,8,["modelValue","disable"])):k("",!0),e(ce,{modelValue:S.ref_type,"onUpdate:modelValue":[O[3]||(O[3]=h=>S.ref_type=h),K],options:c,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:S.search,"onUpdate:modelValue":O[4]||(O[4]=h=>S.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Xx=Object.freeze(Object.defineProperty({__proto__:null,default:Gx},Symbol.toStringTag,{value:"Module"})),Zx={class:"detail"},eS={key:0},tS={key:1},aS={key:2},lS={key:3},oS={key:4},nS={key:5},sS={key:6},rS={key:0,class:"q-pt-md"},fn={__name:"MainInfoTab",setup(p){const s=ge(),m=()=>{st({message:`Hapus Pemasok ${s.props.data.name}?`,url:route("admin.supplier.delete",s.props.data.id),onSuccess:()=>{Z.get(route("admin.supplier.index"))}})};return(o,i)=>(d(),w(J,null,[t("table",Zx,[t("tbody",null,[i[22]||(i[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Nama",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[t("td",null,r(l(s).props.data.balance<0?"Utang":"Utang / Piutang"),1),i[5]||(i[5]=t("td",null,":",-1)),t("td",{class:xe(l(s).props.data.balance<0?"text-red":"text-green")},r(l(sa)(l(s).props.data.balance)),3)]),l(s).props.data.phone_1?(d(),w("tr",eS,[i[6]||(i[6]=t("td",null,"No Telepon",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.phone_1),1)])):k("",!0),l(s).props.data.phone_2?(d(),w("tr",tS,[i[8]||(i[8]=t("td",null,"No Telepon 2",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.phone_2),1)])):k("",!0),l(s).props.data.phone_3?(d(),w("tr",aS,[i[10]||(i[10]=t("td",null,"No Telepon 3",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.phone_3),1)])):k("",!0),l(s).props.data.address?(d(),w("tr",lS,[i[12]||(i[12]=t("td",null,"Alamat",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.address),1)])):k("",!0),l(s).props.data.return_address?(d(),w("tr",oS,[i[14]||(i[14]=t("td",null,"Alamat Retur",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.return_address),1)])):k("",!0),l(s).props.data.bank_account_name_1||l(s).props.data.bank_account_number_1||l(s).props.data.bank_account_holder_1?(d(),w("tr",nS,[i[16]||(i[16]=t("td",null,"Rek 1",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank_account_name_1)+" "+r(l(s).props.data.bank_account_number_1)+" a.n. "+r(l(s).props.data.bank_account_holder_1),1)])):k("",!0),l(s).props.data.bank_account_name_2||l(s).props.data.bank_account_number_2||l(s).props.data.bank_account_holder_2?(d(),w("tr",sS,[i[18]||(i[18]=t("td",null,"Rek 2",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank_account_name_2)+" "+r(l(s).props.data.bank_account_number_2)+" a.n. "+r(l(s).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Status",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(d(),w("div",rS,[e(E,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>m())})])):k("",!0)],64))}},iS=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"})),dS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},uS={class:"text-bold"},mS={class:"text-bold"},cS={key:0,class:"text-bold"},pS={key:1},gn={__name:"OrderHistoryTab",setup(p){const s=ge(),m=T([]),o=T(!0),i=De({customer_id:s.props.data.id,...Le()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp.)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{b()});const b=(f=null)=>Ke({pagination:n,filter:i,props:f,rows:m,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:s.props.data.id}}),loading:o}),c=$e(),u=ee(()=>c.screen.gt.sm?g:g.filter(f=>f.name==="id"));return(f,_)=>(d(),I(je,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:u.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:S,filter:q})=>[t("div",dS,[t("span",null,r(S)+" "+r(q?" with term "+q:""),1)])]),body:a(y=>[e(Re,{props:y,class:"cursor-pointer",onClick:G(S=>l(Z).get(f.route("admin.purchase-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",uS,[e(C,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(C,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),w(J,{key:0},[t("div",mS,[e(C,{name:"money",class:"inline-icon"}),v(" Total: Rp. "+r(l(H)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(d(),w("div",cS,[e(C,{name:"money",class:"inline-icon"}),v(" Sisa Utang: Rp. "+r(l(H)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(d(),w("div",pS,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(Ko,{status:y.row.status},null,8,["status"]),e(Ho,{status:y.row.payment_status},null,8,["status"])])]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:y},{default:a(()=>[v(r(l(H)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"remaining_debt",props:y},{default:a(()=>[v(r(l(H)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},fS=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),gS={class:"q-gutter-sm"},bS={class:"q-gutter-sm"},vS={class:"col col-lg-6 q-pa-xs"},_S={class:"row"},Gl="Rincian Pemasok",yS={__name:"Detail",setup(p){const s=ge(),m=T("main");return $e(),(o,i)=>{const n=X("i-head"),g=X("authenticated-layout");return d(),w(J,null,[e(n,{title:Gl}),e(g,null,{title:a(()=>[v(r(Gl))]),"left-button":a(()=>[t("div",gS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":a(()=>[t("div",bS,[o.$can("admin.supplier.edit")?(d(),I(E,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>l(Z).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),I(E,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>l(Z).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),I(E,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>l(Z).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",vS,[t("div",_S,[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(qt,{modelValue:m.value,"onUpdate:modelValue":i[4]||(i[4]=b=>m.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Info Utama"}),e(it,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Ct,{modelValue:m.value,"onUpdate:modelValue":i[5]||(i[5]=b=>m.value=b),animated:""},{default:a(()=>[e(nt,{name:"main"},{default:a(()=>[e(fn)]),_:1}),e(nt,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(gn)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},kS=Object.freeze(Object.defineProperty({__proto__:null,default:yS},Symbol.toStringTag,{value:"Module"})),wS={class:"q-gutter-sm"},hS={class:"col col-md-6 q-pa-xs"},$S={class:"row q-col-gutter-md"},xS={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},SS={key:2,class:"row q-col-gutter-md"},VS={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},qS={key:4,class:"row q-col-gutter-md"},CS={key:5,class:"row q-col-gutter-md"},TS={style:{"margin-left":"-10px"},class:"q-mt-md"},PS={class:"q-mt-sm"},RS={__name:"Editor",setup(p){const s=ge(),m=(s.props.data.id?"Edit":"Tambah")+" Pemasok",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,phone_1:s.props.data.phone_1,phone_2:s.props.data.phone_2,phone_3:s.props.data.phone_3,url_1:s.props.data.url_1,url_2:s.props.data.url_2,bank_account_name_1:s.props.data.bank_account_name_1,bank_account_holder_1:s.props.data.bank_account_holder_1,bank_account_number_1:s.props.data.bank_account_number_1,bank_account_name_2:s.props.data.bank_account_name_2,bank_account_holder_2:s.props.data.bank_account_holder_2,bank_account_number_2:s.props.data.bank_account_number_2,address:s.props.data.address,return_address:s.props.data.return_address,active:!!s.props.data.active}),i=T(!0),n=()=>rt({form:o,url:route("admin.supplier.save")});return(g,b)=>{const c=X("i-head"),u=X("authenticated-layout");return d(),w(J,null,[e(c,{title:m}),e(u,{"show-drawer-button":!0},{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",wS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),"right-button":a(()=>[e(E,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:b[1]||(b[1]=f=>n()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",hS,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[2]||(b[2]=f=>l(o).id=f)},null,512),[[yt,l(o).id]]),e(se,{modelValue:l(o).code,"onUpdate:modelValue":b[3]||(b[3]=f=>l(o).code=f),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[f=>f&&f.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(o).name,"onUpdate:modelValue":b[4]||(b[4]=f=>l(o).name=f),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",$S,[e(se,{modelValue:l(o).phone_1,"onUpdate:modelValue":b[5]||(b[5]=f=>l(o).phone_1=f),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_1,"error-message":l(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(d(),I(se,{key:0,modelValue:l(o).phone_2,"onUpdate:modelValue":b[6]||(b[6]=f=>l(o).phone_2=f),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_2,"error-message":l(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(d(),I(se,{key:1,modelValue:l(o).phone_3,"onUpdate:modelValue":b[7]||(b[7]=f=>l(o).phone_3=f),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_3,"error-message":l(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(se,{modelValue:l(o).address,"onUpdate:modelValue":b[8]||(b[8]=f=>l(o).address=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(d(),I(se,{key:0,modelValue:l(o).return_address,"onUpdate:modelValue":b[9]||(b[9]=f=>l(o).return_address=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.return_address,"error-message":l(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(d(),w("div",xS," Rekening 1 ")),i.value?k("",!0):(d(),w("div",SS,[e(se,{modelValue:l(o).bank_account_name_1,"onUpdate:modelValue":b[10]||(b[10]=f=>l(o).bank_account_name_1=f),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_1,"error-message":l(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).bank_account_number_1,"onUpdate:modelValue":b[11]||(b[11]=f=>l(o).bank_account_number_1=f),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_1,"error-message":l(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).bank_account_holder_1,"onUpdate:modelValue":b[12]||(b[12]=f=>l(o).bank_account_holder_1=f),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_1,"error-message":l(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(d(),w("div",VS," Rekening 2 ")),i.value?k("",!0):(d(),w("div",qS,[e(se,{modelValue:l(o).bank_account_name_2,"onUpdate:modelValue":b[13]||(b[13]=f=>l(o).bank_account_name_2=f),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_2,"error-message":l(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).bank_account_number_2,"onUpdate:modelValue":b[14]||(b[14]=f=>l(o).bank_account_number_2=f),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_2,"error-message":l(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).bank_account_holder_2,"onUpdate:modelValue":b[15]||(b[15]=f=>l(o).bank_account_holder_2=f),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_2,"error-message":l(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(d(),w("div",CS,[e(se,{modelValue:l(o).url_1,"onUpdate:modelValue":b[16]||(b[16]=f=>l(o).url_1=f),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_1,"error-message":l(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:l(o).url_2,"onUpdate:modelValue":b[17]||(b[17]=f=>l(o).url_2=f),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_2,"error-message":l(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",TS,[e(ia,{class:"full-width q-pl-none",modelValue:l(o).active,"onUpdate:modelValue":b[18]||(b[18]=f=>l(o).active=f),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",PS,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:b[19]||(b[19]=G(f=>i.value=!i.value,["stop"]))},[e(C,{name:i.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),v(" "+r(i.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},IS=Object.freeze(Object.defineProperty({__proto__:null,default:RS},Symbol.toStringTag,{value:"Module"})),OS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},DS={class:"q-pa-xs"},US={class:"full-width row flex-center text-grey-8 q-gutter-sm"},jS={key:0},ES={key:1},AS={class:"flex justify-end"},Xl="Pemasok",BS={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=De({search:"",status:"active",...Le()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{S()});const y=U=>st({message:`Hapus pemasok ${U.name}?`,url:route("admin.supplier.delete",U.id),fetchItemsCallback:S,loading:i}),S=(U=null)=>{Ke({pagination:u,filter:c,props:U,rows:o,url:route("admin.supplier.data"),loading:i,tableRef:n})},q=()=>S(),x=U=>Z.get(route("admin.supplier.detail",{id:U.id})),{protectClick:D}=At(),K=D(x),R=ee(()=>s.screen.gt.sm?f:f.filter(U=>U.name==="code"||U.name==="action"));return(U,O)=>{const F=X("i-head"),B=X("authenticated-layout");return d(),w(J,null,[e(F,{title:Xl}),e(B,null,Fe({title:a(()=>[v(r(Xl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=h=>m.value=!m.value)},null,8,["icon"]),U.$can("admin.supplier.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=h=>l(Z).get(U.route("admin.supplier.add")))})):k("",!0)]),default:a(()=>[t("div",DS,[e(je,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":O[5]||(O[5]=h=>u.value=h),filter:c.search,loading:i.value,columns:R.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:h,message:j,filter:P})=>[t("div",US,[t("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(h=>[e(Re,{props:h,class:xe([h.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(j=>l(K)(h.row,j),["stop"])},{default:a(()=>[e(Y,{key:"code",props:h,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),I(C,{key:0,name:"person"})):k("",!0),v(" "+r(h.row.code)+" ",1),l(s).screen.lt.md?(d(),w(J,{key:1},[v(" - "+r(h.row.name),1)],64)):k("",!0)]),l(s).screen.lt.md?(d(),w(J,{key:0},[t("div",{class:xe(h.row.balance<0?"text-negative":"text-positive")},[e(C,{name:"wallet"}),v(" "+r(l(H)(h.row.balance)),1)],2),h.row.phone_1?(d(),w("div",jS,[e(C,{name:"phone"}),v(" "+r(h.row.phone_1),1)])):k("",!0),h.row.address?(d(),w("div",ES,[e(C,{name:"home_pin"}),v(" "+r(h.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"name",props:h,class:"wrap-column"},{default:a(()=>[v(r(h.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:h,class:"wrap-column"},{default:a(()=>[t("div",{class:xe(h.row.balance<0?"text-negative":"text-positive")},r(l(H)(h.row.balance)),3)]),_:2},1032,["props"]),e(Y,{key:"phone_1",props:h},{default:a(()=>[v(r(h.row.phone_1),1)]),_:2},1032,["props"]),e(Y,{key:"address",props:h},{default:a(()=>[v(r(h.row.address),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:h},{default:a(()=>[t("div",AS,[U.$can("admin.supplier.add")||U.$can("admin.supplier.edit")||U.$can("admin.supplier.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[4]||(O[4]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[U.$can("admin.supplier.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(j=>l(Z).get(U.route("admin.supplier.duplicate",h.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(N,null,{default:a(()=>O[6]||(O[6]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),U.$can("admin.supplier.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(j=>l(Z).get(U.route("admin.supplier.edit",h.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>O[7]||(O[7]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),U.$can("admin.supplier.delete")?te((d(),I(oe,{key:2,onClick:G(j=>y(h.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>O[8]||(O[8]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",OS,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[O[2]||(O[2]=h=>c.status=h),q],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":O[3]||(O[3]=h=>c.search=h),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},MS=Object.freeze(Object.defineProperty({__proto__:null,default:BS},Symbol.toStringTag,{value:"Module"})),NS={class:"q-gutter-sm"},FS={class:"col col-md-6 q-pa-xs"},zS={class:"q-pt-md"},LS={key:0,class:"text-caption text-negative"},KS={class:"q-pt-md"},HS={key:0,class:"text-caption text-negative"},WS={__name:"Editor",setup(p){const s=$e(),m=ge(),o=(m.props.data.id?"Edit":"Tambah")+" Skema Pajak",i=Qe({id:m.props.data.id,name:m.props.data.name,rate_percentage:m.props.data.rate_percentage??0,tax_authority:m.props.data.tax_authority,is_inclusive:m.props.data.is_inclusive??!1,active:m.props.data.active??!0,description:m.props.data.description}),n=()=>rt({form:i,url:route("admin.tax-scheme.save")});return(g,b)=>{const c=X("i-head"),u=X("authenticated-layout");return d(),w(J,null,[e(c,{title:o}),e(u,{"show-drawer-button":!l(s).screen.lt.md},Fe({title:a(()=>[v(r(o))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",FS,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(Ye)},{default:a(()=>[e(pe,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(le,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=f=>l(i).id=f)},null,512),[[yt,l(i).id]]),e(se,{autofocus:"",modelValue:l(i).name,"onUpdate:modelValue":b[2]||(b[2]=f=>l(i).name=f),modelModifiers:{trim:!0},label:"Nama Skema Pajak","lazy-rules":"",error:!!l(i).errors.name,disable:l(i).processing,"error-message":l(i).errors.name,rules:[f=>f&&f.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:l(i).rate_percentage,"onUpdate:modelValue":b[3]||(b[3]=f=>l(i).rate_percentage=f),modelModifiers:{number:!0},label:"Tarif Persentase (%)",type:"number",suffix:"%",rules:[f=>f>=0||"Persentase tidak boleh negatif."],error:!!l(i).errors.rate_percentage,disable:l(i).processing,"error-message":l(i).errors.rate_percentage,"hide-bottom-space":""},null,8,["modelValue","rules","error","disable","error-message"]),e(se,{modelValue:l(i).tax_authority,"onUpdate:modelValue":b[4]||(b[4]=f=>l(i).tax_authority=f),modelModifiers:{trim:!0},label:"Otoritas Pajak (Opsional)",hint:"Contoh: DJP, Pemerintah Daerah",error:!!l(i).errors.tax_authority,disable:l(i).processing,"error-message":l(i).errors.tax_authority,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:l(i).description,"onUpdate:modelValue":b[5]||(b[5]=f=>l(i).description=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.description,"error-message":l(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",zS,[e(Ga,{modelValue:l(i).is_inclusive,"onUpdate:modelValue":b[6]||(b[6]=f=>l(i).is_inclusive=f),disable:l(i).processing,label:l(i).is_inclusive?"Harga Jual SUDAH termasuk Pajak":"Harga Jual BELUM termasuk Pajak",color:"primary"},null,8,["modelValue","disable","label"]),l(i).errors.is_inclusive?(d(),w("div",LS,r(l(i).errors.is_inclusive),1)):k("",!0)]),t("div",KS,[e(Ga,{modelValue:l(i).active,"onUpdate:modelValue":b[7]||(b[7]=f=>l(i).active=f),disable:l(i).processing,label:l(i).active?"Skema Aktif":"Skema Non-Aktif",color:"primary"},null,8,["modelValue","disable","label"]),l(i).errors.active?(d(),w("div",HS,r(l(i).errors.active),1)):k("",!0)])]),_:1}),e(le,{class:"q-gutter-sm"},{default:a(()=>[e(E,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"]),e(E,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:b[8]||(b[8]=f=>g.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",NS,[e(E,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=f=>g.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},YS=Object.freeze(Object.defineProperty({__proto__:null,default:WS},Symbol.toStringTag,{value:"Module"})),QS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},JS={class:"q-pa-xs"},GS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},XS={class:"text-weight-bold"},ZS={class:"text-grey-8"},eV={class:"text-weight-medium"},tV={class:"text-weight-medium text-uppercase"},aV={key:0,class:"text-grey-8"},lV={key:1,class:"text-grey-8"},oV={class:"flex justify-end"},Zl="Skema Pajak",nV={__name:"Index",setup(p){const s=$e(),m=T(!1),o=T([]),i=T(!0),n=T(null),g=T(null),b=at(g),c=De({search:"",...Le()}),u=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"rate_percentage",label:"Tarif",field:"rate_percentage",align:"right",sortable:!0,format:q=>`${q}%`},{name:"is_inclusive",label:"Tipe Harga",field:"is_inclusive",align:"center",format:q=>q?"INCLUSIVE":"EXCLUSIVE",sortable:!0},{name:"tax_authority",label:"Otoritas",field:"tax_authority",align:"left",sortable:!0},{name:"active",label:"Status",field:"active",align:"center",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{y()});const _=q=>st({message:`Hapus Skema Pajak ${q.name}?`,url:route("admin.tax-scheme.delete",q.id),fetchItemsCallback:y,loading:i}),y=(q=null)=>{Ke({pagination:u,filter:c,props:q,rows:o,url:route("admin.tax-scheme.data"),loading:i,tableRef:n})},S=ee(()=>s.screen.gt.sm?f:f.filter(q=>q.name==="name"||q.name==="action"));return(q,x)=>{const D=X("i-head"),K=X("authenticated-layout");return d(),w(J,null,[e(D,{title:Zl}),e(K,null,Fe({title:a(()=>[v(r(Zl))]),"right-button":a(()=>[e(E,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=R=>m.value=!m.value)},null,8,["icon"]),q.$can("admin.tax-scheme.add")?(d(),I(E,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=R=>l(Z).get(q.route("admin.tax-scheme.add")))})):k("",!0)]),default:a(()=>[t("div",JS,[e(je,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":x[4]||(x[4]=R=>u.value=R),filter:c.search,loading:i.value,columns:S.value,rows:o.value,"rows-per-page-options":[10,25,50],style:He({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:R,message:U,filter:O})=>[t("div",GS,[t("span",null,r(U)+" "+r(O?" with term "+O:""),1)])]),body:a(R=>[e(Re,{props:R},{default:a(()=>[e(Y,{key:"name",props:R,class:"wrap-column"},{default:a(()=>[t("div",XS,r(R.row.name),1),l(s).screen.gt.sm?k("",!0):(d(),w(J,{key:0},[t("div",ZS,[x[5]||(x[5]=v(" Tarif: ")),t("span",eV,r(R.row.rate_percentage)+"%",1)]),t("div",null,[x[6]||(x[6]=v(" Tipe: ")),t("span",tV,r(R.row.is_inclusive?"Inclusive":"Exclusive"),1)]),R.row.tax_authority?(d(),w("div",aV,[e(C,{name:"account_balance",size:"xs"}),v(" Otoritas: "+r(R.row.tax_authority),1)])):k("",!0),R.row.description?(d(),w("div",lV,[e(C,{name:"description",size:"xs"}),v(" "+r(R.row.description),1)])):k("",!0),e(gt,{color:R.row.active?"positive":"negative"},{default:a(()=>[v(r(R.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])],64))]),_:2},1032,["props"]),e(Y,{key:"rate_percentage",props:R,class:"text-right text-weight-bold"},{default:a(()=>[v(r(R.row.rate_percentage)+"% ",1)]),_:2},1032,["props"]),e(Y,{key:"is_inclusive",props:R,class:"text-center"},{default:a(()=>[e(gt,{color:R.row.is_inclusive?"green-7":"deep-orange-7","text-color":"white"},{default:a(()=>[v(r(R.row.is_inclusive?"INCLUSIVE":"EXCLUSIVE"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Y,{key:"tax_authority",props:R,class:"wrap-column"},{default:a(()=>[v(r(R.row.tax_authority),1)]),_:2},1032,["props"]),e(Y,{key:"active",props:R,class:"text-center"},{default:a(()=>[e(gt,{color:R.row.active?"positive":"negative"},{default:a(()=>[v(r(R.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Y,{key:"description",props:R,class:"wrap-column"},{default:a(()=>[v(r(R.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:R},{default:a(()=>[t("div",oV,[q.$can("admin.tax-scheme.add")||q.$can("admin.tax-scheme.edit")||q.$can("admin.tax-scheme.delete")?(d(),I(E,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[3]||(x[3]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[q.$can("admin.tax-scheme.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(U=>l(Z).get(q.route("admin.tax-scheme.duplicate",R.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"file_copy"})]),_:1}),e(N,null,{default:a(()=>x[7]||(x[7]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),q.$can("admin.tax-scheme.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(U=>l(Z).get(q.route("admin.tax-scheme.edit",R.row.id)),["stop"])},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"edit"})]),_:1}),e(N,null,{default:a(()=>x[8]||(x[8]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0),q.$can("admin.tax-scheme.delete")?te((d(),I(oe,{key:2,onClick:G(U=>_(R.row),["stop"]),clickable:""},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"delete_forever"})]),_:1}),e(N,null,{default:a(()=>x[9]||(x[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[fe]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:g},{default:a(()=>[t("div",QS,[e(se,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":x[2]||(x[2]=R=>c.search=R),placeholder:"Cari",clearable:""},{append:a(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},sV=Object.freeze(Object.defineProperty({__proto__:null,default:nV},Symbol.toStringTag,{value:"Module"})),rV=Et({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(p,{slots:s,emit:m}){let o=!1,i,n,g=null,b=null,c,u;function f(){i&&i(),i=null,o=!1,g!==null&&(clearTimeout(g),g=null),b!==null&&(clearTimeout(b),b=null),n!==void 0&&n.removeEventListener("transitionend",c),c=null}function _(x,D,K){D!==void 0&&(x.style.height=`${D}px`),x.style.transition=`height ${p.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,i=K}function y(x,D){x.style.overflowY=null,x.style.height=null,x.style.transition=null,f(),D!==u&&m(D)}function S(x,D){let K=0;n=x,o===!0?(f(),K=x.offsetHeight===x.scrollHeight?0:void 0):(u="hide",x.style.overflowY="hidden"),_(x,K,D),g=setTimeout(()=>{g=null,x.style.height=`${x.scrollHeight}px`,c=R=>{b=null,(Object(R)!==R||R.target===x)&&y(x,"show")},x.addEventListener("transitionend",c),b=setTimeout(c,p.duration*1.1)},100)}function q(x,D){let K;n=x,o===!0?f():(u="show",x.style.overflowY="hidden",K=x.scrollHeight),_(x,K,D),g=setTimeout(()=>{g=null,x.style.height=0,c=R=>{b=null,(Object(R)!==R||R.target===x)&&y(x,"hide")},x.addEventListener("transitionend",c),b=setTimeout(c,p.duration*1.1)},100)}return aa(()=>{o===!0&&f()}),()=>Ce(ao,{css:!1,appear:p.appear,onEnter:S,onLeave:q},s.default)}}),Wt=ds({}),iV=Object.keys(io),Tt=Et({name:"QExpansionItem",props:{...io,...ms,...Ua,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...us,"click","afterShow","afterHide"],setup(p,{slots:s,emit:m}){const{proxy:{$q:o}}=It(),i=ja(p,o),n=T(p.modelValue!==null?p.modelValue:p.defaultOpened),g=T(null),b=cs(),{show:c,hide:u,toggle:f}=ps({showing:n});let _,y;const S=ee(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${p.popup===!0?"popup":"standard"}`),q=ee(()=>p.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:p.contentInsetLevel*56+"px"}),x=ee(()=>p.disable!==!0&&(p.href!==void 0||p.to!==void 0&&p.to!==null&&p.to!=="")),D=ee(()=>{const ie={};return iV.forEach(Ie=>{ie[Ie]=p[Ie]}),ie}),K=ee(()=>x.value===!0||p.expandIconToggle!==!0),R=ee(()=>p.expandedIcon!==void 0&&n.value===!0?p.expandedIcon:p.expandIcon||o.iconSet.expansionItem[p.denseToggle===!0?"denseIcon":"icon"]),U=ee(()=>p.disable!==!0&&(x.value===!0||p.expandIconToggle===!0)),O=ee(()=>({expanded:n.value===!0,detailsId:b.value,toggle:f,show:c,hide:u})),F=ee(()=>{const ie=p.toggleAriaLabel!==void 0?p.toggleAriaLabel:o.lang.label[n.value===!0?"collapse":"expand"](p.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":b.value,"aria-label":ie}});Ne(()=>p.group,ie=>{y!==void 0&&y(),ie!==void 0&&A()});function B(ie){x.value!==!0&&f(ie),m("click",ie)}function h(ie){ie.keyCode===13&&j(ie,!0)}function j(ie,Ie){Ie!==!0&&g.value!==null&&g.value.focus(),f(ie),Yt(ie)}function P(){m("afterShow")}function $(){m("afterHide")}function A(){_===void 0&&(_=fs()),n.value===!0&&(Wt[p.group]=_);const ie=Ne(n,Xe=>{Xe===!0?Wt[p.group]=_:Wt[p.group]===_&&delete Wt[p.group]}),Ie=Ne(()=>Wt[p.group],(Xe,me)=>{me===_&&Xe!==void 0&&Xe!==_&&u()});y=()=>{ie(),Ie(),Wt[p.group]===_&&delete Wt[p.group],y=void 0}}function z(){const ie={class:[`q-focusable relative-position cursor-pointer${p.denseToggle===!0&&p.switchToggleSide===!0?" items-end":""}`,p.expandIconClass],side:p.switchToggleSide!==!0,avatar:p.switchToggleSide},Ie=[Ce(C,{class:"q-expansion-item__toggle-icon"+(p.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:R.value})];return U.value===!0&&(Object.assign(ie,{tabindex:0,...F.value,onClick:j,onKeyup:h}),Ie.unshift(Ce("div",{ref:g,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),Ce(N,ie,()=>Ie)}function V(){let ie;return s.header!==void 0?ie=[].concat(s.header(O.value)):(ie=[Ce(N,()=>[Ce(ke,{lines:p.labelLines},()=>p.label||""),p.caption?Ce(ke,{lines:p.captionLines,caption:!0},()=>p.caption):null])],p.icon&&ie[p.switchToggleSide===!0?"push":"unshift"](Ce(N,{side:p.switchToggleSide===!0,avatar:p.switchToggleSide!==!0},()=>Ce(C,{name:p.icon})))),p.disable!==!0&&p.hideExpandIcon!==!0&&ie[p.switchToggleSide===!0?"unshift":"push"](z()),ie}function M(){const ie={ref:"item",style:p.headerStyle,class:p.headerClass,dark:i.value,disable:p.disable,dense:p.dense,insetLevel:p.headerInsetLevel};return K.value===!0&&(ie.clickable=!0,ie.onClick=B,Object.assign(ie,x.value===!0?D.value:F.value)),Ce(oe,ie,V)}function ae(){return te(Ce("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:q.value,id:b.value},Nt(s.default)),[[so,n.value]])}function ue(){const ie=[M(),Ce(rV,{duration:p.duration,onShow:P,onHide:$},ae)];return p.expandSeparator===!0&&ie.push(Ce(Pe,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),Ce(Pe,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),ie}return p.group!==void 0&&A(),aa(()=>{y!==void 0&&y()}),()=>Ce("div",{class:S.value},[Ce("div",{class:"q-expansion-item__container relative-position"},ue())])}}),dV={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},uV={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},mV={class:"absolute-bottom text-grey-6 q-pa-md"},Ra="amanah-pos.layout.left-drawer-open",cV={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(p,{expose:s}){const m=$e(),o=ge(),i=T(JSON.parse(localStorage.getItem(Ra))),n=T(!1),g=()=>i.value=!i.value,b=()=>{i.value=!1};return Ne(i,c=>{localStorage.setItem(Ra,c)}),he(()=>{i.value=JSON.parse(localStorage.getItem(Ra)),m.screen.lt.md&&(i.value=!1)}),s({hideDrawer:b}),(c,u)=>{const f=X("my-link");return d(),I(ks,{view:"lHh LpR lFf"},{default:a(()=>[e(gs,null,{default:a(()=>[e(Ge,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:a(()=>[p.showDrawerButton&&!i.value?(d(),I(E,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:g},{default:a(()=>[e(C,{class:"material-symbols-outlined"},{default:a(()=>u[36]||(u[36]=[v("dock_to_right")])),_:1})]),_:1})):k("",!0),Pt(c.$slots,"left-button",{},void 0,!0),e(la,{style:{"font-size":"16px"}},{default:a(()=>[Pt(c.$slots,"title",{},()=>[v(r(c.$config.APP_NAME),1)],!0)]),_:3}),Pt(c.$slots,"right-button",{},void 0,!0)]),_:3}),Pt(c.$slots,"header",{},void 0,!0)]),_:3}),e(bs,{breakpoint:768,modelValue:i.value,"onUpdate:modelValue":u[35]||(u[35]=_=>i.value=_),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:a(()=>[t("div",dV,[t("div",uV,[e(vs,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=_=>n.value=_),class:xe(["profile-btn text-bold",{"profile-btn-active":n.value}]),flat:"",label:l(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:a(()=>[e(Ae,{id:"profile-btn-popup",style:{color:"#444"}},{default:a(()=>[e(oe,null,{default:a(()=>[e(oa,{style:{"margin-left":"-15px"}},{default:a(()=>[e(C,{name:"person"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>[e(f,{class:"text-bold text-grey-9",href:c.route("admin.user-profile.edit")},{default:a(()=>[v(r(l(o).props.auth.user.name),1)]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}),e(Pe),te((d(),I(oe,{clickable:"",style:{color:"inherit"},href:c.route("admin.auth.logout")},{default:a(()=>[e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>[e(C,{name:"logout",class:"q-mr-sm"}),u[37]||(u[37]=v(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[fe],[ne]])]),_:1})]),_:1},8,["modelValue","label","class"]),i.value?(d(),I(E,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:g},{default:a(()=>[e(C,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(_s,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:a(()=>[e(Ae,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",active:c.$page.url.startsWith("/admin/home"),onClick:u[1]||(u[1]=_=>l(Z).get(c.route("admin.home")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"home"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[38]||(u[38]=[v("Beranda")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]),te((d(),I(oe,{clickable:"",active:c.$page.url.startsWith("/admin/dashboard"),onClick:u[2]||(u[2]=_=>l(Z).get(c.route("admin.dashboard")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"dashboard"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[39]||(u[39]=[v("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]),e(Tt,{icon:"o_fast_forward",label:"Pintasan"},{default:a(()=>[c.$can("admin.sales-order.add")?te((d(),I(oe,{key:0,class:"subnav show-icon",clickable:"",onClick:u[3]||(u[3]=_=>l(Z).get(c.route("admin.sales-order.add")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"add_shopping_cart"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[40]||(u[40]=[v("Penjualan Baru ")])),_:1})]),_:1})]),_:1})),[[ne]]):k("",!0),c.$can("admin.purchase-order.add")?te((d(),I(oe,{key:1,class:"subnav show-icon",clickable:"",onClick:u[4]||(u[4]=_=>l(Z).get(c.route("admin.purchase-order.add")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"o_shopping_basket"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[41]||(u[41]=[v("Pembelian Baru ")])),_:1})]),_:1})]),_:1})),[[ne]]):k("",!0),e(Pe),c.$can("admin.customer.add")?te((d(),I(oe,{key:2,class:"subnav show-icon",clickable:"",onClick:u[5]||(u[5]=_=>l(Z).get(c.route("admin.customer.add")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"person_add_alt"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[42]||(u[42]=[v("Pelanggan Baru ")])),_:1})]),_:1})]),_:1})),[[ne]]):k("",!0),c.$can("admin.supplier.add")?te((d(),I(oe,{key:3,class:"subnav show-icon",clickable:"",onClick:u[6]||(u[6]=_=>l(Z).get(c.route("admin.supplier.add")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"o_business_center"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[43]||(u[43]=[v("Pemasok Baru ")])),_:1})]),_:1})]),_:1})),[[ne]]):k("",!0),e(Pe),c.$can("admin.product.add")?te((d(),I(oe,{key:4,class:"subnav show-icon",clickable:"",onClick:u[7]||(u[7]=_=>l(Z).get(c.route("admin.product.add")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"o_inventory_2"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[44]||(u[44]=[v("Produk Baru ")])),_:1})]),_:1})]),_:1})),[[ne]]):k("",!0)]),_:1}),c.$can("admin.sales-order.index")||c.$can("admin.customer.index")||c.$can("admin.sales-order-return.index")?(d(),I(Tt,{key:0,icon:"storefront",label:"Penjualan","default-opened":c.$page.url.startsWith("/admin/sales-orders")||c.$page.url.startsWith("/admin/sales-order-returns")||c.$page.url.startsWith("/admin/customers")||c.$page.url.startsWith("/admin/customer-wallet-transactions")||c.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[c.$can("admin.sales-order.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/sales-orders"),onClick:u[8]||(u[8]=_=>l(Z).get(c.route("admin.sales-order.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"add_shopping_cart"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[45]||(u[45]=[v("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.sales-order-return.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/sales-order-returns"),onClick:u[9]||(u[9]=_=>l(Z).get(c.route("admin.sales-order-return.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"remove_shopping_cart"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[46]||(u[46]=[v("Retur Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.customer.index")?te((d(),I(oe,{key:2,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/customers"),onClick:u[10]||(u[10]=_=>l(Z).get(c.route("admin.customer.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"people"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[47]||(u[47]=[v("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.customer-wallet-transaction-confirmation.index")||c.$can("admin.customer-wallet-transaction.index")?(d(),I(Tt,{key:3,class:"subnav",icon:"wallet",label:"Wallet","default-opened":c.$page.url.startsWith("/admin/customer-wallet-transactions")||c.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[c.$can("admin.customer-wallet-transaction-confirmation.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:u[11]||(u[11]=_=>l(Z).get(c.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"add_task"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[48]||(u[48]=[v("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.customer-wallet-transaction.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:u[12]||(u[12]=_=>l(Z).get(c.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"moving"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[49]||(u[49]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.purchase-order.index")||c.$can("admin.supplier.index")||c.$can("admin.purchase-order-return.index")?(d(),I(Tt,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":c.$page.url.startsWith("/admin/purchase-orders")||c.$page.url.startsWith("/admin/purchase-order-returns")||c.$page.url.startsWith("/admin/suppliers")},{default:a(()=>[c.$can("admin.purchase-order.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/purchase-orders"),onClick:u[13]||(u[13]=_=>l(Z).get(c.route("admin.purchase-order.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"add_shopping_cart"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[50]||(u[50]=[v("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.purchase-order-return.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/purchase-order-returns"),onClick:u[14]||(u[14]=_=>l(Z).get(c.route("admin.purchase-order-return.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"remove_shopping_cart"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[51]||(u[51]=[v("Retur Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.supplier.index")?te((d(),I(oe,{key:2,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/suppliers"),onClick:u[15]||(u[15]=_=>l(Z).get(c.route("admin.supplier.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"people"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[52]||(u[52]=[v("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.product.index")||c.$can("admin.product-category.index")||c.$can("admin.stock-adjustment.index")||c.$can("admin.stock-movement.index")?(d(),I(Tt,{key:2,icon:"inventory_2",label:"Inventori","default-opened":c.$page.url.startsWith("/admin/products")||c.$page.url.startsWith("/admin/product-categories")||c.$page.url.startsWith("/admin/stock-adjustments")||c.$page.url.startsWith("/admin/stock-movements")},{default:a(()=>[c.$can("admin.stock-adjustment.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/stock-adjustments"),onClick:u[16]||(u[16]=_=>l(Z).get(c.route("admin.stock-adjustment.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"swap_vert"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[53]||(u[53]=[v("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.stock-movement.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/stock-movements"),onClick:u[17]||(u[17]=_=>l(Z).get(c.route("admin.stock-movement.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"timeline"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[54]||(u[54]=[v("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.product.index")?te((d(),I(oe,{key:2,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/products"),onClick:u[18]||(u[18]=_=>l(Z).get(c.route("admin.product.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"box"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[55]||(u[55]=[v("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.product-category.index")?te((d(),I(oe,{key:3,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/product-categories"),onClick:u[19]||(u[19]=_=>l(Z).get(c.route("admin.product-category.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"category"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[56]||(u[56]=[v("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(Tt,{icon:"business_center",label:"Back Office","default-opened":c.$page.url.startsWith("/admin/cashier-terminals")||c.$page.url.startsWith("/admin/cashier-sessions")||c.$page.url.startsWith("/admin/finance-accounts")||c.$page.url.startsWith("/admin/finance-transactions")||c.$page.url.startsWith("/admin/operational-costs")||c.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[c.$can("admin.cashier-session.index")||c.$can("admin.cashier-terminal.index")||c.$can("admin.finance-account.index")||c.$can("admin.finance-transaction.index")||c.$can("admin.operational-cost.index")||c.$can("admin.operational-cost-category.index")?(d(),I(Tt,{key:0,class:"subnav show-icon",icon:"point_of_sale",label:"Kasir","default-opened":c.$page.url.startsWith("/admin/cashier-terminals")||c.$page.url.startsWith("/admin/cashier-session")},{default:a(()=>[c.$can("admin.cashier-session.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/cashier-sessions"),onClick:u[20]||(u[20]=_=>l(Z).get(c.route("admin.cashier-session.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"tv_signin"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[57]||(u[57]=[v("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.cashier-terminal.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/cashier-terminals"),onClick:u[21]||(u[21]=_=>l(Z).get(c.route("admin.cashier-terminal.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"point_of_sale"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[58]||(u[58]=[v("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.finance-transaction.index")||c.$can("admin.finance-account.index")?(d(),I(Tt,{key:1,class:"subnav show-icon",icon:"finance",label:"Keuangan","default-opened":c.$page.url.startsWith("/admin/finance-accounts")||c.$page.url.startsWith("/admin/finance-transactions")},{default:a(()=>[c.$can("admin.finance-transaction.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/finance-transactions"),onClick:u[22]||(u[22]=_=>l(Z).get(c.route("admin.finance-transaction.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"moving"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[59]||(u[59]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.finance-account.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/finance-accounts"),onClick:u[23]||(u[23]=_=>l(Z).get(c.route("admin.finance-account.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"groups_2"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[60]||(u[60]=[v("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.operational-cost.index")||c.$can("admin.operational-cost-category.index")?(d(),I(Tt,{key:2,class:"subnav show-icon",icon:"paid",label:"Operasional","default-opened":c.$page.url.startsWith("/admin/operational-costs")||c.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[c.$can("admin.operational-cost.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/operational-costs"),onClick:u[24]||(u[24]=_=>l(Z).get(c.route("admin.operational-cost.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"request_quote"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[61]||(u[61]=[v("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.operational-cost-category.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/operational-cost-categories"),onClick:u[25]||(u[25]=_=>l(Z).get(c.route("admin.operational-cost-category.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"category"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[62]||(u[62]=[v("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"]),c.$can("admin.report.index")?te((d(),I(oe,{key:3,clickable:"",active:c.$page.url.startsWith("/admin/reports"),onClick:u[26]||(u[26]=_=>l(Z).get(c.route("admin.report.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"analytics"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[63]||(u[63]=[v("Laporan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),e(Tt,{icon:"settings",label:"Pengaturan","default-opened":c.$page.url.startsWith("/admin/settings")},{default:a(()=>[c.$can("admin.user.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/users"),onClick:u[27]||(u[27]=_=>l(Z).get(c.route("admin.user.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"person"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[64]||(u[64]=[v("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.user-role.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/user-roles"),onClick:u[28]||(u[28]=_=>l(Z).get(c.route("admin.user-role.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"group"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[65]||(u[65]=[v("Peran Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),k("",!0),c.$can("admin.pos-settings.edit")?te((d(),I(oe,{key:3,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/pos"),onClick:u[30]||(u[30]=_=>l(Z).get(c.route("admin.pos-settings.edit")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"point_of_sale"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[67]||(u[67]=[v("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.company-profile.edit")?te((d(),I(oe,{key:4,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/company-profile"),onClick:u[31]||(u[31]=_=>l(Z).get(c.route("admin.company-profile.edit")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"apartment"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[68]||(u[68]=[v("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),c.$can("admin.user-activity-log.index")?te((d(),I(oe,{key:5,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:u[32]||(u[32]=_=>l(Z).get(c.route("admin.user-activity-log.index")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"article"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[69]||(u[69]=[v("Log Aktivitas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):k("",!0),k("",!0),te((d(),I(oe,{class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/system-information"),onClick:u[34]||(u[34]=_=>l(Z).get(c.route("admin.settings.system-information")))},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(C,{name:"info"})]),_:1}),e(N,null,{default:a(()=>[e(ke,null,{default:a(()=>u[71]||(u[71]=[v("Informasi Sistem")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]])]),_:1},8,["default-opened"]),t("div",mV,"  2025 - "+r(c.$config.APP_NAME+" v"+c.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ys,{class:"bg-grey-1"},{default:a(()=>[e(Te,null,{default:a(()=>[Pt(c.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),Pt(c.$slots,"footer",{},void 0,!0)]),_:3})}}},pV=vt(cV,[["__scopeId","data-v-2dc4b3ab"]]),fV={__name:"GuestLayout",setup(p){return(s,m)=>(d(),I(ws,null,{default:a(()=>[Pt(s.$slots,"default")]),_:3}))}};hs({onRegistered(p){console.log("Admin Service Worker registered:",p)}});$s({layouts:{authenticated:pV,guest:fV},pagesGlob:Object.assign({"./pages/_examples/Autocomplete1.vue":qs,"./pages/auth/Login.vue":Us,"./pages/cashier-session/Close.vue":Fs,"./pages/cashier-session/Detail.vue":Ir,"./pages/cashier-session/Index.vue":Ar,"./pages/cashier-session/Open.vue":Fr,"./pages/cashier-session/detail/FinanceTransactionTab.vue":qr,"./pages/cashier-session/detail/MainInfoTab.vue":cr,"./pages/cashier-session/detail/SalesOrderTab.vue":wr,"./pages/cashier-terminal/Detail.vue":li,"./pages/cashier-terminal/Editor.vue":ii,"./pages/cashier-terminal/Index.vue":fi,"./pages/cashier-terminal/detail/MainInfoTab.vue":Jr,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":Xr,"./pages/customer-wallet-transaction-confirmation/Detail.vue":Si,"./pages/customer-wallet-transaction-confirmation/Index.vue":Ri,"./pages/customer-wallet-transaction/Adjustment.vue":Di,"./pages/customer-wallet-transaction/Detail.vue":Ki,"./pages/customer-wallet-transaction/Editor.vue":Qi,"./pages/customer-wallet-transaction/Index.vue":ld,"./pages/customer/Detail.vue":Sd,"./pages/customer/Editor.vue":Td,"./pages/customer/Import.vue":jd,"./pages/customer/Index.vue":Kd,"./pages/customer/detail/MainInfoTab.vue":md,"./pages/customer/detail/OrderHistoryTab.vue":yd,"./pages/customer/detail/WalletHistoryTab.vue":fd,"./pages/dashboard/Index.vue":cu,"./pages/dashboard/cards/ActualSummaryCard.vue":Xd,"./pages/dashboard/cards/ChartCard.vue":lu,"./pages/dashboard/cards/SummaryCard.vue":hu,"./pages/dashboard/cards/TopCard.vue":ru,"./pages/finance-account/Detail.vue":Du,"./pages/finance-account/Editor.vue":Bu,"./pages/finance-account/Index.vue":Xu,"./pages/finance-account/detail/HistoryTab.vue":Cu,"./pages/finance-account/detail/MainInfoTab.vue":xu,"./pages/finance-transaction/Detail.vue":dm,"./pages/finance-transaction/Editor.vue":pm,"./pages/finance-transaction/Index.vue":wm,"./pages/home/Index.vue":Im,"./pages/operational-cost-category/Editor.vue":jm,"./pages/operational-cost-category/Index.vue":zm,"./pages/operational-cost/Detail.vue":ec,"./pages/operational-cost/Editor.vue":sc,"./pages/operational-cost/Index.vue":gc,"./pages/product-category/Editor.vue":yc,"./pages/product-category/Index.vue":Vc,"./pages/product/Detail.vue":Qc,"./pages/product/Editor.vue":sp,"./pages/product/Import.vue":up,"./pages/product/Index.vue":$p,"./pages/product/SendPriceList.vue":Rp,"./pages/product/SendPriceList2.vue":Ap,"./pages/product/detail/MainInfoTab.vue":Bc,"./pages/product/detail/StockHistoryTab.vue":Fc,"./pages/purchase-order-return/Create.vue":Fp,"./pages/purchase-order-return/Detail.vue":Ff,"./pages/purchase-order-return/Editor.vue":jg,"./pages/purchase-order-return/Index.vue":Qg,"./pages/purchase-order-return/detail/MainInfoTab.vue":bf,"./pages/purchase-order-return/detail/PaymentDialog.vue":$f,"./pages/purchase-order-return/detail/RefundTab.vue":Af,"./pages/purchase-order-return/editor/HelpDialog.vue":tg,"./pages/purchase-order-return/editor/ItemEditorDialog.vue":Jf,"./pages/purchase-order-return/editor/ItemsListTable.vue":Wf,"./pages/purchase-order-return/editor/OrderInfoDialog.vue":ng,"./pages/purchase-order-return/editor/PaymentDialog.vue":c1,"./pages/purchase-order-return/editor/SuccessDialog.vue":V1,"./pages/purchase-order/Detail.vue":Ob,"./pages/purchase-order/Editor.vue":Yv,"./pages/purchase-order/Index.vue":s_,"./pages/purchase-order/detail/InvoiceTab.vue":nb,"./pages/purchase-order/detail/PaymentDialog.vue":pb,"./pages/purchase-order/detail/PaymentTab.vue":Cb,"./pages/purchase-order/editor/HelpDialog.vue":nv,"./pages/purchase-order/editor/ItemEditorDialog.vue":lv,"./pages/purchase-order/editor/ItemsListTable.vue":Ab,"./pages/purchase-order/editor/OrderInfoDialog.vue":dv,"./pages/purchase-order/editor/PaymentDialog.vue":ev,"./pages/purchase-order/editor/SuccessDialog.vue":hv,"./pages/report/Index.vue":f_,"./pages/sales-order-return/Create.vue":__,"./pages/sales-order-return/Detail.vue":wy,"./pages/sales-order-return/Editor.vue":ik,"./pages/sales-order-return/Index.vue":$k,"./pages/sales-order-return/detail/MainInfoTab.vue":Y_,"./pages/sales-order-return/detail/PaymentDialog.vue":ty,"./pages/sales-order-return/detail/RefundTab.vue":vy,"./pages/sales-order-return/editor/HelpDialog.vue":Iy,"./pages/sales-order-return/editor/ItemEditorDialog.vue":Ty,"./pages/sales-order-return/editor/ItemsListTable.vue":Vy,"./pages/sales-order-return/editor/OrderInfoDialog.vue":jy,"./pages/sales-order-return/editor/PaymentDialog.vue":Mk,"./pages/sales-order-return/editor/SuccessDialog.vue":ew,"./pages/sales-order/Detail.vue":u0,"./pages/sales-order/Editor.vue":V2,"./pages/sales-order/Index.vue":z2,"./pages/sales-order/detail/InvoiceTab.vue":Ew,"./pages/sales-order/detail/PaymentDialog.vue":Kw,"./pages/sales-order/detail/PaymentTab.vue":s0,"./pages/sales-order/editor/HelpDialog.vue":j0,"./pages/sales-order/editor/ItemEditorDialog.vue":D0,"./pages/sales-order/editor/ItemsListTable.vue":g0,"./pages/sales-order/editor/OrderInfoDialog.vue":M0,"./pages/sales-order/editor/PaymentDialog.vue":R0,"./pages/sales-order/editor/SuccessDialog.vue":Z0,"./pages/settings/SystemInformation.vue":Q2,"./pages/settings/company-profile/Edit.vue":th,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":J2,"./pages/settings/database/Index.vue":sh,"./pages/settings/pos/Edit.vue":mh,"./pages/settings/user-activity-log/Detail.vue":Gh,"./pages/settings/user-activity-log/Index.vue":o$,"./pages/settings/user-profile/Edit.vue":m$,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":n$,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":s$,"./pages/settings/user-role/Detail.vue":$$,"./pages/settings/user-role/Editor.vue":T$,"./pages/settings/user-role/Index.vue":U$,"./pages/settings/user/Detail.vue":W$,"./pages/settings/user/Editor.vue":Z$,"./pages/settings/user/Index.vue":sx,"./pages/stock-adjustment/Create.vue":vx,"./pages/stock-adjustment/Detail.vue":Cx,"./pages/stock-adjustment/Editor.vue":Ux,"./pages/stock-adjustment/Index.vue":Wx,"./pages/stock-movement/Index.vue":Xx,"./pages/supplier/Detail.vue":kS,"./pages/supplier/Editor.vue":IS,"./pages/supplier/Index.vue":MS,"./pages/supplier/detail/MainInfoTab.vue":iS,"./pages/supplier/detail/OrderHistoryTab.vue":fS,"./pages/tax-scheme/Editor.vue":YS,"./pages/tax-scheme/Index.vue":sV})});
