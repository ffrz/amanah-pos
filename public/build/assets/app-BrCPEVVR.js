import{_ as Nr,r as ee,c as X,o as $,a as h,w as b,b as x,Q as Me,d as me,e as N,F as se,f as B,g as K,h as Q,i as Ce,t as P,u as m,j as ae,k as Sr,l as Xn,T as wt,m as gt,n as Dt,p as ue,q as Mt,s as nn,v as U,x as fe,y as Y,z as Or,A as Ue,B as Gt,C as at,D as Qt,E as Vo,G as Ro,H as bn,I as _n,J as Et,K as xt,L as Pt,M as Je,N as Lt,O as ve,P as ot,R as Jt,S as Ft,U as it,V as ea,W as tt,X as J,Y as sa,Z as wr,$ as ta,a0 as Rd,a1 as ia,a2 as It,a3 as ie,a4 as pe,a5 as Ed,a6 as j,a7 as Se,a8 as Ae,a9 as Sa,aa as oa,ab as $t,ac as u0,ad as mt,ae as oe,af as Ir,ag as ba,ah as Sn,ai as $r,aj as $e,ak as bg,al as tr,am as _a,an as d0,ao as dl,ap as _g,aq as gi,ar as Eo,as as c0,at as f0,au as Wn,av as cl,aw as As,ax as p0,ay as v0,az as g0,aA as h0,aB as hi,aC as m0,aD as y0,aE as fl,aF as An,aG as pl,aH as Nd,aI as b0,aJ as Pi,aK as Od,aL as _0,aM as $d,aN as S0,aO as Sg,aP as w0,aQ as x0,aR as T0,aS as wg,aT as xg,aU as C0,aV as Ze,aW as zd,aX as W,aY as k0,aZ as Is,a_ as Tg,a$ as Kn,b0 as O,b1 as st,b2 as Cg,b3 as kg,b4 as ne,b5 as bt,b6 as ht,b7 as tn,b8 as $n,b9 as Be,ba as vt,bb as qe,bc as de,bd as A0,be as I0,bf as D0,bg as M0,bh as Ag,bi as Ig,bj as Bd,bk as P0,bl as Dg,bm as At,bn as qt,bo as nt,bp as Ke,bq as Mg,br as Za,bs as Ta,bt as Qn,bu as L0,bv as qd,bw as V0,bx as Pg,by as Re,bz as R0,bA as E0,bB as be,bC as Lg,bD as aa,bE as Vg,bF as _u,bG as N0,bH as Tt,bI as Rg,bJ as No,bK as O0,bL as $0,bM as z0,bN as B0,bO as q0,bP as G0,bQ as F0,bR as U0,bS as H0,bT as W0,bU as Y0,bV as Jn,bW as j0,bX as Fe,bY as Z0,bZ as Eg,b_ as Su,b$ as X0,c0 as K0,c1 as Q0,c2 as ge,c3 as Nt,c4 as Gd,c5 as J0,c6 as ar,c7 as zr,c8 as xe,c9 as St,ca as Ct,cb as un,cc as dn,cd as qa,ce as Ot,cf as wn,cg as Zt,ch as ei,ci as dt,cj as cn,ck as xn,cl as mi,cm as fn,cn as xr,co as Fd,cp as Ud,cq as Hd,cr as Ne,cs as Xt,ct as Wd,cu as ut,cv as io,cw as Xe,cx as e1,cy as t1,cz as Oo,cA as yi,cB as a1,cC as r1,cD as ti,cE as n1,cF as $o,cG as i1,cH as De,cI as o1,cJ as l1,cK as ya,cL as Va,cM as Tn,cN as zo,cO as ye,cP as bi,cQ as s1,cR as ra,cS as rt,cT as na,cU as Ca,cV as Bo,cW as u1,cX as zt,cY as Dr,cZ as _i,c_ as Ng,c$ as wa,d0 as Ut,d1 as Ra,d2 as Ds,d3 as d1,d4 as qo,d5 as Go,d6 as Yd,d7 as Mr,d8 as Og,d9 as et,da as le,db as c1,dc as f1,dd as xa,de as p1,df as v1,dg as Fo,dh as $g,di as Pr,dj as Cn,dk as Pe,dl as zg,dm as Lr,dn as pn,dp as Uo,dq as Ho,dr as g1,ds as Si,dt as Ve,du as Bg,dv as h1,dw as Yt,dx as La,dy as wu,dz as ua,dA as Kt,dB as Wo,dC as qg,dD as Gg,dE as m1,dF as Yo,dG as Ms,dH as y1,dI as Fg,dJ as Oa,dK as xu,dL as da,dM as Ps,dN as jt,dO as jo,dP as b1,dQ as lt,dR as rr,dS as Ug,dT as jd,dU as zn,dV as Zd,dW as Hg,dX as _1,dY as We,dZ as Wg,d_ as Ji,d$ as vl,e0 as oo,e1 as Yn,e2 as Xd,e3 as wi,e4 as Qa,e5 as xi,e6 as S1,e7 as w1,e8 as an,e9 as Kd,ea as Ls,eb as x1,ec as Tu,ed as T1,ee as Yg,ef as C1,eg as jg,eh as k1,ei as A1,ej as Qd,ek as Vr,el as Jd,em as I1,en as D1,eo as $a,ep as M1,eq as P1,er as Zo,es as Zg,et as Cu,eu as lo,ev as Ja,ew as ha,ex as ku,ey as on,ez as L1,eA as Au,eB as so,eC as Vs,eD as Rs,eE as V1,eF as gl,eG as Xg,eH as pt,eI as Xo,eJ as hl,eK as R1,eL as Bn,eM as E1,eN as ec,eO as N1,eP as tc,eQ as O1,eR as Br,eS as ac,eT as $1,eU as z1,eV as rc,eW as B1,eX as q1,eY as G1,eZ as Ti,e_ as ai,e$ as F1,f0 as Kg,f1 as nc,f2 as U1,f3 as Qg,f4 as H1,f5 as Jg,f6 as eh,f7 as W1,f8 as th,f9 as ic,fa as ah,fb as rh,fc as oc,fd as Ci,fe as Iu,ff as Y1,fg as j1,fh as Z1,fi as X1,fj as K1,fk as Q1,fl as Du,fm as J1,fn as Mu,fo as eb,fp as lc,fq as tb,fr as ab,fs as rb,ft as nb,fu as ib,fv as ob,fw as lb,fx as sb,fy as nh,fz as Tr,fA as Pu,fB as ih,fC as ub,fD as sc,fE as oh,fF as db,fG as cb,fH as lh,fI as sh,fJ as Li,fK as fb,fL as Lu,fM as ln,fN as Es,fO as pb,fP as vb,fQ as uo,fR as gb,fS as hb,fT as mb,fU as Ko,fV as yb,fW as bb,fX as _b,fY as Sb,fZ as uc,f_ as uh,f$ as wb,g0 as xb,g1 as Tb,g2 as Cb,g3 as kb,g4 as dc,g5 as Ab,g6 as dh,g7 as ch,g8 as fh,g9 as ph,ga as vh,gb as gh,gc as Cr,gd as co,ge as Le,gf as fo,gg as Vu,gh as Ib,gi as ml,gj as Db,gk as Mb,gl as Pb,gm as Lb,gn as hh,go as po,gp as Qo,gq as ri,gr as Vb,gs as ni,gt as qr,gu as Rb,gv as Eb,gw as Nb,gx as In,gy as Vi,gz as yl,gA as Ru,gB as cc,gC as mh,gD as Ob,gE as $b,gF as zb,gG as Bb,gH as yh,gI as qb,gJ as Gb,gK as Fb,gL as cr,gM as Ub,gN as Hb,gO as Wb,gP as Yb,gQ as jb,gR as Zb,gS as Xb,gT as Kb,gU as Qb}from"./BaseGuestLayout-Ruorze_6.js";const Jb={},e_={class:"row"};function t_(r,t){const e=ee("i-head"),a=ee("authenticated-layout");return $(),X(se,null,[h(e,{title:"About"}),h(a,null,{title:b(()=>t[0]||(t[0]=[N("About")])),default:b(()=>[x("div",e_,[h(Me,{class:"col q-pa-md q-ma-md",square:"",flat:"",bordered:""},{default:b(()=>[h(me,null,{default:b(()=>t[1]||(t[1]=[x("div",{class:"q-mb-md text-h4"},"About",-1),x("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Autem soluta, accusamus placeat eius eligendi perferendis quisquam veritatis iste debitis laboriosam facere et aliquam quos beatae illo distinctio rerum eos! Expedita, voluptatem. Aut nihil deleniti magni fuga eius labore aliquam nulla quod ullam sunt amet eum asperiores, harum unde eligendi tempore sapiente. Placeat sed, dignissimos voluptatum perspiciatis saepe aspernatur, maxime est, ipsam quas nobis cumque sunt labore molestias? Amet in sed ullam recusandae, nostrum dicta facilis blanditiis incidunt quae commodi soluta id impedit vel fugit illo, molestias reiciendis, provident nam molestiae! Ipsam, hic. Facere aut quisquam praesentium enim illum, pariatur nam.",-1),x("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque, cum nulla. Ut eligendi tenetur aliquam cum mollitia repellat voluptas, fugiat doloremque sunt commodi enim excepturi distinctio id sapiente incidunt ipsam asperiores cupiditate, labore libero! Ad facere magni cumque perspiciatis, adipisci possimus pariatur quo nobis minus, est enim similique quaerat vel asperiores ipsam harum et, totam fugit.",-1),x("p",null,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Suscipit aspernatur maxime consectetur, consequatur excepturi facilis praesentium rem placeat sapiente, maiores doloribus modi voluptate. Unde autem dolor officiis numquam incidunt quasi aspernatur nam dolores ratione quidem recusandae, nulla qui provident molestias odit nemo praesentium quas voluptatem aliquid perferendis, iste veritatis vitae. Dolor, eligendi quidem distinctio asperiores doloremque culpa corporis quibusdam earum ex laudantium iure officia ullam nostrum maxime voluptatum laboriosam impedit labore illum. Culpa, veniam dolor odio ad eius nisi, aspernatur quia veritatis blanditiis repellat id minima deserunt beatae?",-1)])),_:1})]),_:1})])]),_:1})],64)}const a_=Nr(Jb,[["render",t_]]),r_=Object.freeze(Object.defineProperty({__proto__:null,default:a_},Symbol.toStringTag,{value:"Module"})),n_={class:"q-ma-md"},i_={key:0},o_={__name:"Autocomplete1",setup(r){const t=B(null),e=B([]);let a=null;const n=(i,o)=>{if(i.length<2){o(()=>{e.value=[]});return}a&&clearTimeout(a),a=setTimeout(()=>{Sr.get(`/web-api/customers?q=${i}`).then(l=>{const s=l.data.data.map(u=>({label:`${u.username} - ${u.name}`,value:u.id,data:u}));o(()=>{e.value=s})}).catch(l=>{console.error("Gagal mengambil data pelanggan:",l),o(()=>{e.value=[]})})})};return(i,o)=>{const l=ee("guest-layout");return $(),K(l,null,{default:b(()=>[x("div",n_,[h(Ce,{class:"full-width",modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=s=>t.value=s),"use-input":"",label:"Cari Pelanggan",options:e.value,onFilter:n,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),t.value?($(),X("div",i_," Saldo: Rp. "+P(m(ae)(t.value.data.balance)),1)):Q("",!0)])]),_:1})}}},l_=Object.freeze(Object.defineProperty({__proto__:null,default:o_},Symbol.toStringTag,{value:"Module"})),s_={style:{"margin-left":"-10px"}},Eu={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(r,{emit:t}){const e=r,a=t;return(n,i)=>($(),X("div",s_,[h(Xn,{class:"full-width q-pl-none","model-value":e.modelValue,disable:e.disable,label:e.label,"onUpdate:modelValue":i[0]||(i[0]=o=>a("update:modelValue",o))},null,8,["model-value","disable","label"])]))}},u_={class:"column"},d_={class:"row"},c_={class:"flex justify-center"},f_={__name:"Login",setup(r){let t=wt({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const e=()=>Mt({form:t,url:route("admin.auth.login")}),a=B(!1);return(n,i)=>{const o=ee("i-head"),l=ee("guest-layout");return $(),X(se,null,[h(o,{title:"Login"}),h(l,null,{default:b(()=>[h(gt,{class:"row justify-center items-center"},{default:b(()=>[x("div",u_,[x("div",d_,[h(Dt,{class:"q-gutter-md",onSubmit:ue(e,["prevent"])},{default:b(()=>[h(Me,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:b(()=>[h(me,{class:"text-center"},{default:b(()=>[x("div",c_,[h(nn,{size:"80px"},{default:b(()=>[h(U,{name:"badge",color:"primary"})]),_:1})]),i[4]||(i[4]=x("h6",{class:"q-my-sm text-primary"},"Login Staff",-1))]),_:1}),h(me,null,{default:b(()=>[h(fe,{modelValue:m(t).username,"onUpdate:modelValue":i[0]||(i[0]=s=>m(t).username=s),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!m(t).errors.username,autocomplete:"username","error-message":m(t).errors.username,disable:m(t).processing,rules:[s=>s&&s.length>0||"Masukkan Username"],"hide-bottom-space":""},{append:b(()=>[h(U,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),h(fe,{modelValue:m(t).password,"onUpdate:modelValue":i[2]||(i[2]=s=>m(t).password=s),type:a.value?"text":"password",label:"Kata Sandi",error:!!m(t).errors.password,autocomplete:"current-password","error-message":m(t).errors.password,"lazy-rules":"",disable:m(t).processing,rules:[s=>s&&s.length>0||"Masukkan kata sandi"],"hide-bottom-space":""},{append:b(()=>[h(Y,{dense:"",flat:"",round:"",onClick:i[1]||(i[1]=s=>a.value=!a.value)},{default:b(()=>[h(U,{name:a.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),h(Eu,{class:"q-mt-sm",modelValue:m(t).remember,"onUpdate:modelValue":i[3]||(i[3]=s=>m(t).remember=s),disable:m(t).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),h(Or,null,{default:b(()=>[h(Y,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:m(t).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},p_=Object.freeze(Object.defineProperty({__proto__:null,default:f_},Symbol.toStringTag,{value:"Module"})),bh={__name:"CompanyInfoForm",setup(r){const t=B(),e=Ue(),a=wt({name:e.props.data.name,phone:e.props.data.phone,address:e.props.data.address}),n=()=>Mt({form:a,url:route("admin.company-profile.update")});return(i,o)=>($(),K(Dt,{class:"row",onSubmit:ue(n,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{flat:"",bordered:"",square:"",class:"col"},{default:b(()=>[h(me,null,{default:b(()=>[o[3]||(o[3]=x("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),o[4]||(o[4]=x("p",{class:"text-caption text-grey-9"},"Perbarui profil koperasi.",-1)),h(fe,{ref_key:"nameInputRef",ref:t,modelValue:m(a).name,"onUpdate:modelValue":o[0]||(o[0]=l=>m(a).name=l),modelModifiers:{trim:!0},label:"Nama Koperasi",disable:m(a).processing,"lazy-rules":"",error:!!m(a).errors.name,"error-message":m(a).errors.name,rules:[l=>l&&l.length>0||"Nama Koperasi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),h(fe,{modelValue:m(a).phone,"onUpdate:modelValue":o[1]||(o[1]=l=>m(a).phone=l),modelModifiers:{trim:!0},label:"No Telepon",disable:m(a).processing,"lazy-rules":"",error:!!m(a).errors.phone,"error-message":m(a).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),h(fe,{type:"textarea",counter:"",autogrow:"",maxlength:"200",modelValue:m(a).address,"onUpdate:modelValue":o[2]||(o[2]=l=>m(a).address=l),modelModifiers:{trim:!0},label:"Alamat",disable:m(a).processing,"lazy-rules":"",error:!!m(a).errors.address,"error-message":m(a).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),h(me,null,{default:b(()=>[h(Y,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:m(a).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},v_=Object.freeze(Object.defineProperty({__proto__:null,default:bh},Symbol.toStringTag,{value:"Module"})),g_={class:"q-pa-xs"},h_={class:"row justify-center"},m_={class:"col col-lg-6"},fc="Profil Perusahaan",y_={__name:"Edit",setup(r){return(t,e)=>{const a=ee("i-head"),n=ee("authenticated-layout");return $(),X(se,null,[h(a,{title:fc}),h(n,null,{title:b(()=>[N(P(fc))]),default:b(()=>[x("div",g_,[x("div",h_,[x("div",m_,[h(bh)])])])]),_:1})],64)}}},b_=Object.freeze(Object.defineProperty({__proto__:null,default:y_},Symbol.toStringTag,{value:"Module"})),__={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},S_={class:"q-pa-xs"},w_={class:"flex justify-end"},pc="Konfirmasi Top Up Wallet",x_={__name:"Index",setup(r){const t=at(),e=B(!1),a=B([]),n=B(!0),i=B(null),o=B(null),l=Qt(o),s=B(null),u=B(!1),d=Vo(),c=Ro(),f=[{label:"Semua Tahun",value:"all"},...bn(d-2,d).reverse()],p=[{value:"all",label:"Semua Bulan"},..._n()],g=[{value:"all",label:"Semua Status"},...Et(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],v=xt({search:"",year:d,month:c,status:"all",...Pt()}),y=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!1}),_=[{name:"datetime",label:"Tanggal",field:"datetime",align:"left",sortable:!0},{name:"finance_account_id",label:"Bank Tujuan",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",label:"Aksi",field:"action",align:"center"}];Je(()=>{S()});const S=(I=null)=>{Lt({pagination:y,filter:v,props:I,rows:a,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:n,tableRef:i})},w=()=>{S()},T=ve(()=>t.screen.gt.sm?_:_.filter(I=>["datetime","action"].includes(I.name)));ot(()=>v.year,I=>{I===null&&(v.month=null)});const C=I=>Ed({message:`Setujui konfirmasi transaksi #${I.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",I.id),fetchItemsCallback:S,loading:n,data:{id:I.id,action:"accept"}}),k=I=>Ed({message:`Tolak konfirmasi transaksi #${I.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",I.id),fetchItemsCallback:S,loading:n,data:{id:I.id,action:"reject"}}),A=I=>oa({message:`Hapus konfirmasi transaksi #${I.id}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",I.id),fetchItemsCallback:S,loading:n});return(I,M)=>{const D=ee("i-head"),L=ee("authenticated-layout");return $(),X(se,null,[h(D,{title:pc}),h(L,null,Jt({title:b(()=>[N(P(pc))]),"right-button":b(()=>[h(Y,{class:"q-ml-sm",icon:e.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:M[0]||(M[0]=E=>e.value=!e.value)},null,8,["icon"])]),default:b(()=>[x("div",S_,[h(it,{ref_key:"tableRef",ref:i,class:"full-height-table",style:ea({height:m(l)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:y.value,"onUpdate:pagination":M[6]||(M[6]=E=>y.value=E),filter:v.search,loading:n.value,columns:T.value,rows:a.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),body:b(E=>[h(tt,{props:E},{default:b(()=>[h(J,{key:"datetime",props:E,class:"wrap-column"},{default:b(()=>[x("div",null,"#: "+P(E.row.formatted_id),1),x("div",null,[h(U,{name:"calendar_today",class:"inline-icon"}),N(" "+P(m(sa)(E.row.datetime))+" ("+P(m(wr)(E.row.datetime))+") ",1)]),m(t).screen.gt.sm?Q("",!0):($(),X(se,{key:0},[h(ta,{icon:"account_balance",text:E.row.finance_account.name},null,8,["text"]),x("div",null,[h(U,{name:"person",class:"inline-icon"}),N(" "+P(E.row.customer.username)+" - "+P(E.row.customer.name),1)]),x("div",null,[h(U,{name:"money",class:"inline-icon"}),N(" Rp. "+P(m(ae)(E.row.amount)),1)]),E.row.description?($(),K(ta,{key:0,icon:"notes",text:E.row.description},null,8,["text"])):Q("",!0),x("div",null,[h(Rd,{status:E.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),h(J,{key:"finance_account_id",props:E},{default:b(()=>[N(P(E.row.finance_account.name),1),M[8]||(M[8]=x("br",null,null,-1)),N(" "+P(E.row.finance_account.bank)+" "+P(E.row.finance_account.number)+" an. "+P(E.row.finance_account.holder),1)]),_:2},1032,["props"]),h(J,{key:"amount",props:E,style:{"text-align":"right"}},{default:b(()=>[N(" Rp. "+P(m(ae)(E.row.amount)),1)]),_:2},1032,["props"]),h(J,{key:"status",props:E,class:"text-center"},{default:b(()=>[h(Rd,{status:E.row.status},null,8,["status"])]),_:2},1032,["props"]),h(J,{key:"notes",props:E},{default:b(()=>[N(P(E.row.notes),1)]),_:2},1032,["props"]),h(J,{key:"action",props:E,class:"text-center"},{default:b(()=>[x("div",w_,[h(Y,{icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:M[5]||(M[5]=ue(()=>{},["stop"])),disable:E.row.status!=="pending"},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{onClick:ue(R=>C(E.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"check"})]),_:1}),h(j,null,{default:b(()=>M[9]||(M[9]=[N("Setujui")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{onClick:ue(R=>k(E.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"cancel"})]),_:1}),h(j,null,{default:b(()=>M[10]||(M[10]=[N("Tolak")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),h(Sa),ie(($(),K(pe,{onClick:ue(R=>A(E.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>M[11]||(M[11]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),h(u0,{modelValue:u.value,"onUpdate:modelValue":M[7]||(M[7]=E=>u.value=E),imageUrl:`/${s.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[e.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:b(()=>[x("div",__,[h(Ce,{modelValue:v.year,"onUpdate:modelValue":[M[1]||(M[1]=E=>v.year=E),w],options:f,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),v.year!=="all"?($(),K(Ce,{key:0,modelValue:v.month,"onUpdate:modelValue":[M[2]||(M[2]=E=>v.month=E),w],options:p,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:v.year===null},null,8,["modelValue","disable"])):Q("",!0),h(Ce,{modelValue:v.status,"onUpdate:modelValue":[M[3]||(M[3]=E=>v.status=E),w],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:v.search,"onUpdate:modelValue":M[4]||(M[4]=E=>v.search=E),placeholder:"Cari...",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},T_=Object.freeze(Object.defineProperty({__proto__:null,default:x_},Symbol.toStringTag,{value:"Module"}));function _h(r,t=!1){const e=r.map(o=>({value:o.id,label:o.username+" - "+o.name})),a=t?[{value:"all",label:"Semua"},...e]:e,n=B([...a]);return{filteredCustomers:n,filterCustomersFn:(o,l)=>{l(()=>{n.value=a.filter(s=>s.label.toLowerCase().includes(o.toLowerCase()))})},customers:a}}const C_={class:"col col-md-6 q-pa-xs"},vc="Penyesuaian Saldo Dompet Pelanggan",k_={__name:"Adjustment",setup(r){const t=Ue(),{filteredCustomers:e,filterCustomersFn:a}=_h(t.props.customers,!1),n=wt({customer_id:null,old_balance:0,new_balance:0,notes:""}),i=()=>n.amount=n.new_balance-n.old_balance;ot(()=>n.customer_id,async s=>{if(!s){n.old_balance=0,n.new_balance=0,i();return}n.processing=!0;try{const u=await axios.get(route("admin.customer.balance",{id:s}));n.new_balance=n.old_balance=u.data.balance}catch(u){console.error("Gagal mengambil saldo:",u),n.old_balance=0,n.new_balance=0}n.processing=!1,i()});const o=ve(()=>n.new_balance-n.old_balance),l=()=>Mt({form:n,url:route("admin.customer-wallet-transaction.adjustment")});return(s,u)=>{const d=ee("i-head"),c=ee("authenticated-layout");return $(),X(se,null,[h(d,{title:vc}),h(c,null,{title:b(()=>[N(P(vc))]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",C_,[h(Dt,{class:"row",onSubmit:ue(l,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[h(Ce,{class:"custom-select",modelValue:m(n).customer_id,"onUpdate:modelValue":u[0]||(u[0]=f=>m(n).customer_id=f),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:m(e),"map-options":"","emit-value":"",errorMessage:m(n).errors.customer_id,onFilter:m(a),error:!!m(n).errors.customer_id,disable:m(n).processing,"hide-bottom-space":""},{"no-option":b(()=>[h(pe,null,{default:b(()=>[h(j,null,{default:b(()=>u[6]||(u[6]=[N("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),h(mt,{modelValue:m(n).old_balance,"onUpdate:modelValue":u[1]||(u[1]=f=>m(n).old_balance=f),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:m(n).processing,error:!!m(n).errors.balance,errorMessage:m(n).errors.balance},null,8,["modelValue","disable","error","errorMessage"]),h(mt,{modelValue:m(n).new_balance,"onUpdate:modelValue":u[2]||(u[2]=f=>m(n).new_balance=f),label:"Saldo Seharusnya",lazyRules:"",disable:m(n).processing,error:!!m(n).errors.new_balance,errorMessage:m(n).errors.new_balance},null,8,["modelValue","disable","error","errorMessage"]),h(mt,{modelValue:o.value,"onUpdate:modelValue":u[3]||(u[3]=f=>o.value=f),label:"Selisih",readonly:"",lazyRules:"",disable:m(n).processing},null,8,["modelValue","disable"]),h(fe,{modelValue:m(n).notes,"onUpdate:modelValue":u[4]||(u[4]=f=>m(n).notes=f),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:m(n).processing,error:!!m(n).errors.notes,"error-message":m(n).errors.notes,rules:[f=>f&&f.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:m(n).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(n).processing,onClick:u[5]||(u[5]=f=>m(oe).get(s.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},A_=Object.freeze(Object.defineProperty({__proto__:null,default:k_},Symbol.toStringTag,{value:"Module"})),I_={class:"q-gutter-sm"},D_={class:"col col-md-6 q-pa-xs"},M_={__name:"Editor",setup(r){const t=Ue(),e=(t.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:a,filterCustomersFn:n}=_h(t.props.customers,!1),i=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"},{label:"Pembelian (-)",value:"purchase"},{label:"Refund (+)",value:"refund"}],o=t.props.finance_accounts.map(u=>({label:u.name,value:u.id})),l=wt({id:t.props.data.id,customer_id:t.props.data.customer_id,finance_account_id:t.props.data.finance_account_id,type:t.props.data.type,datetime:Ir(t.props.data.datetime).format("YYYY-MM-DD HH:mm:ss"),notes:t.props.data.notes,amount:parseFloat(t.props.data.amount)}),s=()=>Mt({form:l,url:route("admin.customer-wallet-transaction.save")});return(u,d)=>{const c=ee("i-head"),f=ee("authenticated-layout");return $(),X(se,null,[h(c,{title:e}),h(f,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",I_,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=p=>u.$inertia.get(u.route("admin.customer-wallet-transaction.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",D_,[h(Dt,{class:"row",onSubmit:ue(s,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":d[1]||(d[1]=p=>m(l).id=p)},null,512),[[ba,m(l).id]]),h(Sn,{autofocus:"",modelValue:m(l).datetime,"onUpdate:modelValue":d[2]||(d[2]=p=>m(l).datetime=p),label:"Tanggal",error:!!m(l).errors.datetime,disable:m(l).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),h(Ce,{class:"custom-select",modelValue:m(l).customer_id,"onUpdate:modelValue":d[3]||(d[3]=p=>m(l).customer_id=p),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:m(a),"map-options":"","emit-value":"",errorMessage:m(l).errors.customer_id,onFilter:m(n),error:!!m(l).errors.customer_id,disable:m(l).processing,"hide-bottom-space":""},{"no-option":b(()=>[h(pe,null,{default:b(()=>[h(j,null,{default:b(()=>d[9]||(d[9]=[N("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),h(Ce,{modelValue:m(l).type,"onUpdate:modelValue":d[4]||(d[4]=p=>m(l).type=p),label:"Jenis",options:i,"map-options":"","emit-value":"",error:!!m(l).errors.type,disable:m(l).processing,errorMessage:m(l).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),m(l).type=="deposit"||m(l).type=="withdrawal"?($(),K(Ce,{key:0,modelValue:m(l).finance_account_id,"onUpdate:modelValue":d[5]||(d[5]=p=>m(l).finance_account_id=p),label:m(l).type=="deposit"?"Kas Tujuan":"Kas Asal",options:m(o),"map-options":"","emit-value":"",error:!!m(l).errors.finance_account_id,disable:m(l).processing,errorMessage:m(l).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"])):Q("",!0),h(mt,{modelValue:m(l).amount,"onUpdate:modelValue":d[6]||(d[6]=p=>m(l).amount=p),label:"Jumlah",lazyRules:"",disable:m(l).processing,error:!!m(l).errors.amount,errorMessage:m(l).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),h(fe,{modelValue:m(l).notes,"onUpdate:modelValue":d[7]||(d[7]=p=>m(l).notes=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:m(l).processing,error:!!m(l).errors.notes,"error-message":m(l).errors.notes,rules:[p=>p&&p.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:m(l).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(l).processing,onClick:d[8]||(d[8]=p=>m(oe).get(u.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},P_=Object.freeze(Object.defineProperty({__proto__:null,default:M_},Symbol.toStringTag,{value:"Module"})),L_=["top","middle","bottom"],Jo=$r({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:r=>L_.includes(r)}},setup(r,{slots:t}){const e=ve(()=>r.align!==void 0?{verticalAlign:r.align}:null),a=ve(()=>{const n=r.outline===!0&&r.color||r.textColor;return`q-badge flex inline items-center no-wrap q-badge--${r.multiLine===!0?"multi":"single"}-line`+(r.outline===!0?" q-badge--outline":r.color!==void 0?` bg-${r.color}`:"")+(n!==void 0?` text-${n}`:"")+(r.floating===!0?" q-badge--floating":"")+(r.rounded===!0?" q-badge--rounded":"")+(r.transparent===!0?" q-badge--transparent":"")});return()=>$e("div",{class:a.value,style:e.value,role:"status","aria-label":r.label},bg(t.default,r.label!==void 0?[r.label]:[]))}}),V_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},R_={class:"q-pa-xs"},E_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},N_={class:"flex justify-end"},gc="Transaksi Dompet Pelanggan",O_={__name:"Index",setup(r){const t=at(),e=B(!1),a=B([]),n=B(!0),i=B(null),o=B(null),l=Qt(o),s=new Date().getFullYear(),u=new Date().getMonth()+1,d=[{label:"Semua Tahun",value:"all"},{label:`${s}`,value:s},...bn(s-2,s-1).reverse()],c=[{value:"all",label:"Semua Bulan"},..._n()],f=xt({search:"",year:s,month:u,...Pt()}),p=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),g=[{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"action",align:"right"}];Je(()=>{y()});const v=w=>oa({message:`Hapus transaksi #-${w.id}?`,url:route("admin.customer-wallet-transaction.delete",w.id),fetchItemsCallback:y,loading:n}),y=(w=null)=>{Lt({pagination:p,filter:f,props:w,rows:a,url:route("admin.customer-wallet-transaction.data"),loading:n,tableRef:i})},_=()=>{y()},S=ve(()=>t.screen.gt.sm?g:g.filter(w=>w.name==="datetime"||w.name==="action"));return ot(()=>f.year,w=>{w===null&&(f.month=null)}),(w,T)=>{const C=ee("i-head"),k=ee("authenticated-layout");return $(),X(se,null,[h(C,{title:gc}),h(k,null,Jt({title:b(()=>[N(P(gc))]),"right-button":b(()=>[h(Y,{icon:e.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=A=>e.value=!e.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:T[1]||(T[1]=A=>m(oe).get(w.route("admin.customer-wallet-transaction.add")))})]),default:b(()=>[x("div",R_,[h(it,{ref_key:"tableRef",ref:i,style:ea({height:m(l)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:p.value,"onUpdate:pagination":T[6]||(T[6]=A=>p.value=A),filter:f.search,loading:n.value,columns:S.value,rows:a.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:A,message:I,filter:M})=>[x("div",E_,[x("span",null,P(I)+" "+P(M?" with term "+M:""),1)])]),body:b(A=>[h(tt,{props:A},{default:b(()=>[h(J,{key:"datetime",props:A,class:"wrap-column"},{default:b(()=>[x("div",null,[N(" #: "+P(A.row.formatted_id)+" ",1),T[7]||(T[7]=x("br",null,null,-1)),h(U,{name:"calendar_today"}),N(" "+P(m(sa)(A.row.datetime))+" ("+P(m(wr)(A.row.datetime))+") ",1)]),x("div",null,[h(U,{name:"account_balance",class:"inline-icon"}),N(" "+P(A.row.finance_account?A.row.finance_account.name:"-"),1)]),m(t).screen.gt.sm?Q("",!0):($(),X(se,{key:0},[h(ta,{icon:"person",text:A.row.customer.username+" -"+A.row.customer.name},null,8,["text"]),x("div",null,[h(U,{name:"money",class:"inline-icon"}),N(" Rp. "+P(m(tr)(A.row.amount)+m(ae)(A.row.amount))+" ",1),h(Jo,null,{default:b(()=>[h(U,{name:"category"}),N(" "+P(A.row.type_label),1)]),_:2},1024)]),h(ta,{text:A.row.notes,icon:"notes"},null,8,["text"])],64))]),_:2},1032,["props"]),h(J,{key:"customer",props:A},{default:b(()=>[h(ta,{text:A.row.customer.username+" -"+A.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),h(J,{key:"notes",props:A},{default:b(()=>[h(ta,{text:A.row.notes},null,8,["text"])]),_:2},1032,["props"]),h(J,{key:"amount",props:A,style:{"text-align":"right"}},{default:b(()=>[N(P(m(tr)(A.row.amount)+m(ae)(A.row.amount)),1)]),_:2},1032,["props"]),h(J,{key:"action",props:A},{default:b(()=>[x("div",N_,[h(Y,{disabled:!m(_a)(w.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:T[5]||(T[5]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{onClick:ue(I=>v(A.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>T[8]||(T[8]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[e.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:b(()=>[x("div",V_,[h(Ce,{modelValue:f.year,"onUpdate:modelValue":[T[2]||(T[2]=A=>f.year=A),_],options:d,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h(Ce,{modelValue:f.month,"onUpdate:modelValue":[T[3]||(T[3]=A=>f.month=A),_],options:c,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:f.year===null},null,8,["modelValue","disable"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":T[4]||(T[4]=A=>f.search=A),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},$_=Object.freeze(Object.defineProperty({__proto__:null,default:O_},Symbol.toStringTag,{value:"Module"}));let z_=0;const B_=["click","keydown"],q_={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${z_++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function G_(r,t,e,a){const n=d0(_g,dl);if(n===dl)return console.error("QTab/QRouteTab component needs to be child of QTabs"),dl;const{proxy:i}=gi(),o=B(null),l=B(null),s=B(null),u=ve(()=>r.disable===!0||r.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},r.ripple===!0?{}:r.ripple)),d=ve(()=>n.currentModel.value===r.name),c=ve(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(d.value===!0?" q-tab--active"+(n.tabProps.value.activeClass?" "+n.tabProps.value.activeClass:"")+(n.tabProps.value.activeColor?` text-${n.tabProps.value.activeColor}`:"")+(n.tabProps.value.activeBgColor?` bg-${n.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(r.icon&&r.label&&n.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(r.noCaps===!0||n.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(r.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),f=ve(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(n.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(r.contentClass!==void 0?` ${r.contentClass}`:"")),p=ve(()=>r.disable===!0||n.hasFocus.value===!0||d.value===!1&&n.hasActiveTab.value===!0?-1:r.tabindex||0);function g(w,T){if(T!==!0&&o.value!==null&&o.value.focus(),r.disable!==!0){n.updateModel({name:r.name}),e("click",w);return}}function v(w){c0(w,[13,32])?g(w,!0):f0(w)!==!0&&w.keyCode>=35&&w.keyCode<=40&&w.altKey!==!0&&w.metaKey!==!0&&n.onKbdNavigate(w.keyCode,i.$el)===!0&&Wn(w),e("keydown",w)}function y(){const w=n.tabProps.value.narrowIndicator,T=[],C=$e("div",{ref:s,class:["q-tab__indicator",n.tabProps.value.indicatorClass]});r.icon!==void 0&&T.push($e(U,{class:"q-tab__icon",name:r.icon})),r.label!==void 0&&T.push($e("div",{class:"q-tab__label"},r.label)),r.alert!==!1&&T.push(r.alertIcon!==void 0?$e(U,{class:"q-tab__alert-icon",color:r.alert!==!0?r.alert:void 0,name:r.alertIcon}):$e("div",{class:"q-tab__alert"+(r.alert!==!0?` text-${r.alert}`:"")})),w===!0&&T.push(C);const k=[$e("div",{class:"q-focus-helper",tabindex:-1,ref:o}),$e("div",{class:f.value},bg(t.default,T))];return w===!1&&k.push(C),k}const _={name:ve(()=>r.name),rootRef:l,tabIndicatorRef:s,routeData:a};Eo(()=>{n.unregisterTab(_)}),Je(()=>{n.registerTab(_)});function S(w,T){const C={ref:l,class:c.value,tabindex:p.value,role:"tab","aria-selected":d.value===!0?"true":"false","aria-disabled":r.disable===!0?"true":void 0,onClick:g,onKeydown:v,...T};return ie($e(w,C,y()),[[Se,u.value]])}return{renderTab:S,$tabs:n}}const vn=$r({name:"QTab",props:q_,emits:B_,setup(r,{slots:t,emit:e}){const{renderTab:a}=G_(r,t,e);return()=>a("div")}});function F_(r,t,e){const a=e===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?a[0]:a[1]}${r?` text-${r}`:""}`}const U_=["left","center","right","justify"],Nu=$r({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:r=>U_.includes(r)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(r,{slots:t,emit:e}){const{proxy:a}=gi(),{$q:n}=a,{registerTick:i}=cl(),{registerTick:o}=cl(),{registerTick:l}=cl(),{registerTimeout:s,removeTimeout:u}=As(),{registerTimeout:d,removeTimeout:c}=As(),f=B(null),p=B(null),g=B(r.modelValue),v=B(!1),y=B(!0),_=B(!1),S=B(!1),w=[],T=B(0),C=B(!1);let k=null,A=null,I;const M=ve(()=>({activeClass:r.activeClass,activeColor:r.activeColor,activeBgColor:r.activeBgColor,indicatorClass:F_(r.indicatorColor,r.switchIndicator,r.vertical),narrowIndicator:r.narrowIndicator,inlineLabel:r.inlineLabel,noCaps:r.noCaps})),D=ve(()=>{const ce=T.value,Te=g.value;for(let Oe=0;Oe<ce;Oe++)if(w[Oe].name.value===Te)return!0;return!1}),L=ve(()=>`q-tabs__content--align-${v.value===!0?"left":S.value===!0?"justify":r.align}`),E=ve(()=>`q-tabs row no-wrap items-center q-tabs--${v.value===!0?"":"not-"}scrollable q-tabs--${r.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${r.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${r.mobileArrows===!0?"":"out"}-arrows`+(r.dense===!0?" q-tabs--dense":"")+(r.shrink===!0?" col-shrink":"")+(r.stretch===!0?" self-stretch":"")),R=ve(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+L.value+(r.contentClass!==void 0?` ${r.contentClass}`:"")),V=ve(()=>r.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),z=ve(()=>r.vertical!==!0&&n.lang.rtl===!0),G=ve(()=>p0===!1&&z.value===!0);ot(z,_e),ot(()=>r.modelValue,ce=>{q({name:ce,setCurrent:!0,skipEmit:!0})}),ot(()=>r.outsideArrows,Z);function q({name:ce,setCurrent:Te,skipEmit:Oe}){g.value!==ce&&(Oe!==!0&&r["onUpdate:modelValue"]!==void 0&&e("update:modelValue",ce),(Te===!0||r["onUpdate:modelValue"]===void 0)&&(F(g.value,ce),g.value=ce))}function Z(){i(()=>{H({width:f.value.offsetWidth,height:f.value.offsetHeight})})}function H(ce){if(V.value===void 0||p.value===null)return;const Te=ce[V.value.container],Oe=Math.min(p.value[V.value.scroll],Array.prototype.reduce.call(p.value.children,(ft,Qe)=>ft+(Qe[V.value.content]||0),0)),ct=Te>0&&Oe>Te;v.value=ct,ct===!0&&o(_e),S.value=Te<parseInt(r.breakpoint,10)}function F(ce,Te){const Oe=ce!=null&&ce!==""?w.find(ft=>ft.name.value===ce):null,ct=Te!=null&&Te!==""?w.find(ft=>ft.name.value===Te):null;if(or===!0)or=!1;else if(Oe&&ct){const ft=Oe.tabIndicatorRef.value,Qe=ct.tabIndicatorRef.value;k!==null&&(clearTimeout(k),k=null),ft.style.transition="none",ft.style.transform="none",Qe.style.transition="none",Qe.style.transform="none";const He=ft.getBoundingClientRect(),Ht=Qe.getBoundingClientRect();Qe.style.transform=r.vertical===!0?`translate3d(0,${He.top-Ht.top}px,0) scale3d(1,${Ht.height?He.height/Ht.height:1},1)`:`translate3d(${He.left-Ht.left}px,0,0) scale3d(${Ht.width?He.width/Ht.width:1},1,1)`,l(()=>{k=setTimeout(()=>{k=null,Qe.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Qe.style.transform="none"},70)})}ct&&v.value===!0&&re(ct.rootRef.value)}function re(ce){const{left:Te,width:Oe,top:ct,height:ft}=p.value.getBoundingClientRect(),Qe=ce.getBoundingClientRect();let He=r.vertical===!0?Qe.top-ct:Qe.left-Te;if(He<0){p.value[r.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(He),_e();return}He+=r.vertical===!0?Qe.height-ft:Qe.width-Oe,He>0&&(p.value[r.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(He),_e())}function _e(){const ce=p.value;if(ce===null)return;const Te=ce.getBoundingClientRect(),Oe=r.vertical===!0?ce.scrollTop:Math.abs(ce.scrollLeft);z.value===!0?(y.value=Math.ceil(Oe+Te.width)<ce.scrollWidth-1,_.value=Oe>0):(y.value=Oe>0,_.value=r.vertical===!0?Math.ceil(Oe+Te.height)<ce.scrollHeight:Math.ceil(Oe+Te.width)<ce.scrollWidth)}function te(ce){A!==null&&clearInterval(A),A=setInterval(()=>{Ge(ce)===!0&&ke()},5)}function he(){te(G.value===!0?Number.MAX_SAFE_INTEGER:0)}function Ie(){te(G.value===!0?0:Number.MAX_SAFE_INTEGER)}function ke(){A!==null&&(clearInterval(A),A=null)}function Ee(ce,Te){const Oe=Array.prototype.filter.call(p.value.children,Ht=>Ht===Te||Ht.matches&&Ht.matches(".q-tab.q-focusable")===!0),ct=Oe.length;if(ct===0)return;if(ce===36)return re(Oe[0]),Oe[0].focus(),!0;if(ce===35)return re(Oe[ct-1]),Oe[ct-1].focus(),!0;const ft=ce===(r.vertical===!0?38:37),Qe=ce===(r.vertical===!0?40:39),He=ft===!0?-1:Qe===!0?1:void 0;if(He!==void 0){const Ht=z.value===!0?-1:1,Ea=Oe.indexOf(Te)+He*Ht;return Ea>=0&&Ea<ct&&(re(Oe[Ea]),Oe[Ea].focus({preventScroll:!0})),!0}}const we=ve(()=>G.value===!0?{get:ce=>Math.abs(ce.scrollLeft),set:(ce,Te)=>{ce.scrollLeft=-Te}}:r.vertical===!0?{get:ce=>ce.scrollTop,set:(ce,Te)=>{ce.scrollTop=Te}}:{get:ce=>ce.scrollLeft,set:(ce,Te)=>{ce.scrollLeft=Te}});function Ge(ce){const Te=p.value,{get:Oe,set:ct}=we.value;let ft=!1,Qe=Oe(Te);const He=ce<Qe?-1:1;return Qe+=He*5,Qe<0?(ft=!0,Qe=0):(He===-1&&Qe<=ce||He===1&&Qe>=ce)&&(ft=!0,Qe=ce),ct(Te,Qe),_e(),ft}function ze(ce,Te){for(const Oe in ce)if(ce[Oe]!==Te[Oe])return!1;return!0}function Ye(){let ce=null,Te={matchedLen:0,queryDiff:9999,hrefLen:0};const Oe=w.filter(He=>He.routeData!==void 0&&He.routeData.hasRouterLink.value===!0),{hash:ct,query:ft}=a.$route,Qe=Object.keys(ft).length;for(const He of Oe){const Ht=He.routeData.exact.value===!0;if(He.routeData[Ht===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ea,query:sl,matched:l0,href:s0}=He.routeData.resolvedLink.value,ul=Object.keys(sl).length;if(Ht===!0){if(Ea!==ct||ul!==Qe||ze(ft,sl)===!1)continue;ce=He.name.value;break}if(Ea!==""&&Ea!==ct||ul!==0&&ze(sl,ft)===!1)continue;const Ua={matchedLen:l0.length,queryDiff:Qe-ul,hrefLen:s0.length-Ea.length};if(Ua.matchedLen>Te.matchedLen){ce=He.name.value,Te=Ua;continue}else if(Ua.matchedLen!==Te.matchedLen)continue;if(Ua.queryDiff<Te.queryDiff)ce=He.name.value,Te=Ua;else if(Ua.queryDiff!==Te.queryDiff)continue;Ua.hrefLen>Te.hrefLen&&(ce=He.name.value,Te=Ua)}if(ce===null&&w.some(He=>He.routeData===void 0&&He.name.value===g.value)===!0){or=!1;return}q({name:ce,setCurrent:!0})}function kt(ce){if(u(),C.value!==!0&&f.value!==null&&ce.target&&typeof ce.target.closest=="function"){const Te=ce.target.closest(".q-tab");Te&&f.value.contains(Te)===!0&&(C.value=!0,v.value===!0&&re(Te))}}function Vt(){s(()=>{C.value=!1},30)}function je(){ka.avoidRouteWatcher===!1?d(Ye):c()}function Rt(){if(I===void 0){const ce=ot(()=>a.$route.fullPath,je);I=()=>{ce(),I=void 0}}}function Bt(ce){w.push(ce),T.value++,Z(),ce.routeData===void 0||a.$route===void 0?d(()=>{if(v.value===!0){const Te=g.value,Oe=Te!=null&&Te!==""?w.find(ct=>ct.name.value===Te):null;Oe&&re(Oe.rootRef.value)}}):(Rt(),ce.routeData.hasRouterLink.value===!0&&je())}function ca(ce){w.splice(w.indexOf(ce),1),T.value--,Z(),I!==void 0&&ce.routeData!==void 0&&(w.every(Te=>Te.routeData===void 0)===!0&&I(),je())}const ka={currentModel:g,tabProps:M,hasFocus:C,hasActiveTab:D,registerTab:Bt,unregisterTab:ca,verifyRouteModel:je,updateModel:q,onKbdNavigate:Ee,avoidRouteWatcher:!1};m0(_g,ka);function Aa(){k!==null&&clearTimeout(k),ke(),I!==void 0&&I()}let kn,or;return Eo(Aa),v0(()=>{kn=I!==void 0,Aa()}),g0(()=>{kn===!0&&(Rt(),or=!0,je()),Z()}),()=>$e("div",{ref:f,class:E.value,role:"tablist",onFocusin:kt,onFocusout:Vt},[$e(h0,{onResize:H}),$e("div",{ref:p,class:R.value,onScroll:_e},hi(t.default)),$e(U,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(y.value===!0?"":" q-tabs__arrow--faded"),name:r.leftIcon||n.iconSet.tabs[r.vertical===!0?"up":"left"],onMousedownPassive:he,onTouchstartPassive:he,onMouseupPassive:ke,onMouseleavePassive:ke,onTouchendPassive:ke}),$e(U,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(_.value===!0?"":" q-tabs__arrow--faded"),name:r.rightIcon||n.iconSet.tabs[r.vertical===!0?"down":"right"],onMousedownPassive:Ie,onTouchstartPassive:Ie,onMouseupPassive:ke,onMouseleavePassive:ke,onTouchendPassive:ke})])}});function H_(r){const t=[.06,6,50];return typeof r=="string"&&r.length&&r.split(":").forEach((e,a)=>{const n=parseFloat(e);n&&(t[a]=n)}),t}const W_=y0({name:"touch-swipe",beforeMount(r,{value:t,arg:e,modifiers:a}){if(a.mouse!==!0&&An.has.touch!==!0)return;const n=a.mouseCapture===!0?"Capture":"",i={handler:t,sensitivity:H_(e),direction:Nd(a),noop:b0,mouseStart(o){$d(o,i)&&S0(o)&&(Pi(i,"temp",[[document,"mousemove","move",`notPassive${n}`],[document,"mouseup","end","notPassiveCapture"]]),i.start(o,!0))},touchStart(o){if($d(o,i)){const l=o.target;Pi(i,"temp",[[l,"touchmove","move","notPassiveCapture"],[l,"touchcancel","end","notPassiveCapture"],[l,"touchend","end","notPassiveCapture"]]),i.start(o)}},start(o,l){An.is.firefox===!0&&pl(r,!0);const s=Od(o);i.event={x:s.left,y:s.top,time:Date.now(),mouse:l===!0,dir:!1}},move(o){if(i.event===void 0)return;if(i.event.dir!==!1){Wn(o);return}const l=Date.now()-i.event.time;if(l===0)return;const s=Od(o),u=s.left-i.event.x,d=Math.abs(u),c=s.top-i.event.y,f=Math.abs(c);if(i.event.mouse!==!0){if(d<i.sensitivity[1]&&f<i.sensitivity[1]){i.end(o);return}}else if(window.getSelection().toString()!==""){i.end(o);return}else if(d<i.sensitivity[2]&&f<i.sensitivity[2])return;const p=d/l,g=f/l;i.direction.vertical===!0&&d<f&&d<100&&g>i.sensitivity[0]&&(i.event.dir=c<0?"up":"down"),i.direction.horizontal===!0&&d>f&&f<100&&p>i.sensitivity[0]&&(i.event.dir=u<0?"left":"right"),i.direction.up===!0&&d<f&&c<0&&d<100&&g>i.sensitivity[0]&&(i.event.dir="up"),i.direction.down===!0&&d<f&&c>0&&d<100&&g>i.sensitivity[0]&&(i.event.dir="down"),i.direction.left===!0&&d>f&&u<0&&f<100&&p>i.sensitivity[0]&&(i.event.dir="left"),i.direction.right===!0&&d>f&&u>0&&f<100&&p>i.sensitivity[0]&&(i.event.dir="right"),i.event.dir!==!1?(Wn(o),i.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),_0(),i.styleCleanup=v=>{i.styleCleanup=void 0,document.body.classList.remove("non-selectable");const y=()=>{document.body.classList.remove("no-pointer-events--children")};v===!0?setTimeout(y,50):y()}),i.handler({evt:o,touch:i.event.mouse!==!0,mouse:i.event.mouse,direction:i.event.dir,duration:l,distance:{x:d,y:f}})):i.end(o)},end(o){i.event!==void 0&&(fl(i,"temp"),An.is.firefox===!0&&pl(r,!1),i.styleCleanup!==void 0&&i.styleCleanup(!0),o!==void 0&&i.event.dir!==!1&&Wn(o),i.event=void 0)}};if(r.__qtouchswipe=i,a.mouse===!0){const o=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";Pi(i,"main",[[r,"mousedown","mouseStart",`passive${o}`]])}An.has.touch===!0&&Pi(i,"main",[[r,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[r,"touchmove","noop","notPassiveCapture"]])},updated(r,t){const e=r.__qtouchswipe;e!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&e.end(),e.handler=t.value),e.direction=Nd(t.modifiers))},beforeUnmount(r){const t=r.__qtouchswipe;t!==void 0&&(fl(t,"main"),fl(t,"temp"),An.is.firefox===!0&&pl(r,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete r.__qtouchswipe)}}),Y_={name:{required:!0},disable:Boolean},hc={setup(r,{slots:t}){return()=>$e("div",{class:"q-panel scroll",role:"tabpanel"},hi(t.default))}},j_={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Z_=["update:modelValue","beforeTransition","transition"];function X_(){const{props:r,emit:t,proxy:e}=gi(),{getCache:a}=x0(),{registerTimeout:n}=As();let i,o;const l=B(null),s=B(null);function u(V){const z=r.vertical===!0?"up":"left";I((e.$q.lang.rtl===!0?-1:1)*(V.direction===z?1:-1))}const d=ve(()=>[[W_,u,void 0,{horizontal:r.vertical!==!0,vertical:r.vertical,mouse:!0}]]),c=ve(()=>r.transitionPrev||`slide-${r.vertical===!0?"down":"right"}`),f=ve(()=>r.transitionNext||`slide-${r.vertical===!0?"up":"left"}`),p=ve(()=>`--q-transition-duration: ${r.transitionDuration}ms`),g=ve(()=>typeof r.modelValue=="string"||typeof r.modelValue=="number"?r.modelValue:String(r.modelValue)),v=ve(()=>({include:r.keepAliveInclude,exclude:r.keepAliveExclude,max:r.keepAliveMax})),y=ve(()=>r.keepAliveInclude!==void 0||r.keepAliveExclude!==void 0);ot(()=>r.modelValue,(V,z)=>{const G=T(V)===!0?C(V):-1;o!==!0&&A(G===-1?0:G<C(z)?-1:1),l.value!==G&&(l.value=G,t("beforeTransition",V,z),n(()=>{t("transition",V,z)},r.transitionDuration))});function _(){I(1)}function S(){I(-1)}function w(V){t("update:modelValue",V)}function T(V){return V!=null&&V!==""}function C(V){return i.findIndex(z=>z.props.name===V&&z.props.disable!==""&&z.props.disable!==!0)}function k(){return i.filter(V=>V.props.disable!==""&&V.props.disable!==!0)}function A(V){const z=V!==0&&r.animated===!0&&l.value!==-1?"q-transition--"+(V===-1?c.value:f.value):null;s.value!==z&&(s.value=z)}function I(V,z=l.value){let G=z+V;for(;G!==-1&&G<i.length;){const q=i[G];if(q!==void 0&&q.props.disable!==""&&q.props.disable!==!0){A(V),o=!0,t("update:modelValue",q.props.name),setTimeout(()=>{o=!1});return}G+=V}r.infinite===!0&&i.length!==0&&z!==-1&&z!==i.length&&I(V,V===-1?i.length:-1)}function M(){const V=C(r.modelValue);return l.value!==V&&(l.value=V),!0}function D(){const V=T(r.modelValue)===!0&&M()&&i[l.value];return r.keepAlive===!0?[$e(T0,v.value,[$e(y.value===!0?a(g.value,()=>({...hc,name:g.value})):hc,{key:g.value,style:p.value},()=>V)])]:[$e("div",{class:"q-panel scroll",style:p.value,key:g.value,role:"tabpanel"},[V])]}function L(){if(i.length!==0)return r.animated===!0?[$e(Sg,{name:s.value},D)]:D()}function E(V){return i=w0(hi(V.default,[])).filter(z=>z.props!==null&&z.props.slot===void 0&&T(z.props.name)===!0),i.length}function R(){return i}return Object.assign(e,{next:_,previous:S,goTo:w}),{panelIndex:l,panelDirectives:d,updatePanelsList:E,updatePanelIndex:M,getPanelContent:L,getEnabledPanels:k,getPanels:R,isValidPanelName:T,keepAliveProps:v,needsUniqueKeepAliveWrapper:y,goToPanelByOffset:I,goToPanel:w,nextPanel:_,previousPanel:S}}const gn=$r({name:"QTabPanel",props:Y_,setup(r,{slots:t}){return()=>$e("div",{class:"q-tab-panel",role:"tabpanel"},hi(t.default))}}),Ou=$r({name:"QTabPanels",props:{...j_,...wg},emits:Z_,setup(r,{slots:t}){const e=gi(),a=xg(r,e.proxy.$q),{updatePanelsList:n,getPanelContent:i,panelDirectives:o}=X_(),l=ve(()=>"q-tab-panels q-panel-parent"+(a.value===!0?" q-tab-panels--dark q-dark":""));return()=>(n(t),C0("div",{class:l.value},i(),"pan",r.swipeable,()=>o.value))}}),K_={class:"q-gutter-sm"},Q_={class:"q-gutter-sm"},J_={class:"col col-md-6 q-pa-xs"},eS={class:"row"},tS={class:"detail"},aS={key:0},rS={class:"text-grey-8"},nS={key:1},iS={class:"text-grey-8"},oS={class:"text-grey-8"},lS={key:2},sS={class:"text-grey-8"},uS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},dS={class:"text-grey-8"},mc="Rincian Pelanggan",cS={__name:"Detail",setup(r){const t=Ue(),e=B("main"),a=B([]),n=B(!0),i=xt({customer_id:t.props.data.id,...Pt()}),o=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),l=[{name:"id",label:"#",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];Je(()=>{s()});const s=(c=null)=>Lt({pagination:o,filter:i,props:c,rows:a,url:route("admin.customer-wallet-transaction.data"),loading:n}),u=at(),d=ve(()=>u.screen.gt.sm?l:l.filter(c=>c.name==="id"));return(c,f)=>{const p=ee("i-head"),g=ee("authenticated-layout");return $(),X(se,null,[h(p,{title:mc}),h(g,null,{title:b(()=>[N(P(mc))]),"left-button":b(()=>[x("div",K_,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=v=>c.$inertia.get(c.route("admin.customer.index")))})])]),"right-button":b(()=>[x("div",Q_,[h(Y,{icon:"edit",dense:"",color:"primary",onClick:f[1]||(f[1]=v=>c.$inertia.get(c.route("admin.customer.edit",{id:m(t).props.data.id})))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",J_,[x("div",eS,[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(Nu,{modelValue:e.value,"onUpdate:modelValue":f[2]||(f[2]=v=>e.value=v),align:"left"},{default:b(()=>[h(vn,{name:"main",label:"Info Utama"}),h(vn,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),h(Ou,{modelValue:e.value,"onUpdate:modelValue":f[4]||(f[4]=v=>e.value=v)},{default:b(()=>[h(gn,{name:"main"},{default:b(()=>[x("table",tS,[x("tbody",null,[f[28]||(f[28]=x("tr",null,[x("td",{colspan:"3"},[x("div",{class:"text-bold text-grey-8"},"Info Pelanggan")])],-1)),x("tr",null,[f[5]||(f[5]=x("td",{style:{width:"120px"}},"Username",-1)),f[6]||(f[6]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,P(m(t).props.data.username),1)]),x("tr",null,[f[7]||(f[7]=x("td",null,"Jenis",-1)),f[8]||(f[8]=x("td",null,":",-1)),x("td",null,P(c.$CONSTANTS.CUSTOMER_TYPES[m(t).props.data.type]),1)]),x("tr",null,[f[9]||(f[9]=x("td",null,"Nama",-1)),f[10]||(f[10]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.name),1)]),x("tr",null,[f[11]||(f[11]=x("td",null,"No. Telepon",-1)),f[12]||(f[12]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.phone),1)]),x("tr",null,[f[13]||(f[13]=x("td",null,"Alamat",-1)),f[14]||(f[14]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.address),1)]),x("tr",null,[f[15]||(f[15]=x("td",null,"Saldo",-1)),f[16]||(f[16]=x("td",null,":",-1)),x("td",null,"Rp. "+P(m(ae)(m(t).props.data.balance)),1)]),x("tr",null,[f[17]||(f[17]=x("td",null,"Status",-1)),f[18]||(f[18]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.active?"Aktif":"Tidak Aktif"),1)]),f[29]||(f[29]=x("tr",null,[x("td",{colspan:"3"},[x("div",{class:"text-bold text-grey-8 q-mt-md"}," Info Akun ")])],-1)),m(t).props.data.created_at?($(),X("tr",aS,[f[19]||(f[19]=x("td",null,"Dibuat",-1)),f[20]||(f[20]=x("td",null,":",-1)),x("td",null,[N(P(m(sa)(m(t).props.data.created_at))+" ",1),x("span",rS,"("+P(m(wr)(m(t).props.data.created_at))+")",1)])])):Q("",!0),m(t).props.data.updated_at?($(),X("tr",nS,[f[21]||(f[21]=x("td",null,"Diperbarui",-1)),f[22]||(f[22]=x("td",null,":",-1)),x("td",null,[N(P(m(sa)(m(t).props.data.updated_at))+" ",1),x("span",iS,"("+P(m(wr)(m(t).props.data.updated_at))+")",1)])])):Q("",!0),x("tr",null,[f[23]||(f[23]=x("td",null,"Terakhir login",-1)),f[24]||(f[24]=x("td",null,":",-1)),x("td",null,[N(P(m(t).props.data.last_login_datetime?m(sa)(m(t).props.data.last_login_datetime):"Belum pernah login")+" ",1),x("span",oS,"("+P(m(wr)(m(t).props.data.last_login_datetime))+")",1)])]),m(t).props.data.last_activity_datetime?($(),X("tr",lS,[f[26]||(f[26]=x("td",null,"Aktifitas Terakhir",-1)),f[27]||(f[27]=x("td",null,":",-1)),x("td",null,[N(P(m(sa)(m(t).props.data.last_activity_datetime))+" ",1),x("span",sS,[N("("+P(m(wr)(m(t).props.data.last_activity_datetime))+") ",1),f[25]||(f[25]=x("br",null,null,-1)),N(P(m(t).props.data.last_activity_description),1)])])])):Q("",!0)])])]),_:1}),h(gn,{name:"history"},{default:b(()=>[h(it,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:o.value,"onUpdate:pagination":f[3]||(f[3]=v=>o.value=v),filter:i.search,loading:n.value,columns:d.value,rows:a.value,"rows-per-page-options":[10,25,50],onRequest:s,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:v,message:y,filter:_})=>[x("div",uS,[x("span",null,P(y)+" "+P(_?" with term "+_:""),1)])]),body:b(v=>[h(tt,{props:v},{default:b(()=>[h(J,{key:"id",props:v},{default:b(()=>[x("div",null,[x("b",null,"#"+P(v.row.formatted_id),1),N(" - "+P(m(sa)(v.row.datetime)),1)]),h(Jo,{size:"xs"},{default:b(()=>[h(U,{name:"category"}),N(" "+P(v.row.type_label),1)]),_:2},1024),m(u).screen.lt.md?($(),X(se,{key:0},[x("div",null,[h(U,{name:"money"}),x("span",{class:Ze(v.row.amount<0?"text-red-10":v.row.amount>0?"text-green-10":"")},P(m(tr)(v.row.amount))+" "+P(m(ae)(v.row.amount)),3)]),x("div",dS,[h(U,{name:"notes"}),N(" "+P(v.row.notes),1)])],64)):Q("",!0)]),_:2},1032,["props"]),h(J,{key:"notes",props:v},{default:b(()=>[N(P(v.row.notes),1)]),_:2},1032,["props"]),h(J,{key:"amount",props:v},{default:b(()=>[x("div",{class:Ze(v.row.amount<0?"text-red-10":v.row.amount>0?"text-green-10":"")},P(m(tr)(v.row.amount))+" "+P(m(ae)(v.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},fS=Object.freeze(Object.defineProperty({__proto__:null,default:cS},Symbol.toStringTag,{value:"Module"})),pS={class:"q-gutter-sm"},vS={class:"col col-md-6 q-pa-xs"},gS={__name:"Editor",setup(r){const t=Ue(),e=(t.props.data.id?"Edit":"Tambah")+" Pelanggan",a=wt({id:t.props.data.id,username:t.props.data.username,name:t.props.data.name,phone:t.props.data.phone,address:t.props.data.address,active:!!t.props.data.active,password:t.props.data.password}),n=()=>Mt({form:a,url:route("admin.customer.save")});return(i,o)=>{const l=ee("i-head"),s=ee("authenticated-layout");return $(),X(se,null,[h(l,{title:e}),h(s,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",pS,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=u=>i.$inertia.get(i.route("admin.customer.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",vS,[h(Dt,{class:"row",onSubmit:ue(n,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":o[1]||(o[1]=u=>m(a).id=u)},null,512),[[ba,m(a).id]]),h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[h(fe,{modelValue:m(a).username,"onUpdate:modelValue":o[2]||(o[2]=u=>m(a).username=u),modelModifiers:{trim:!0},label:"Username",error:!!m(a).errors.username,disable:m(a).processing,"error-message":m(a).errors.username,rules:[u=>u&&u.length>0||"Username harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),h(fe,{modelValue:m(a).name,"onUpdate:modelValue":o[3]||(o[3]=u=>m(a).name=u),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!m(a).errors.name,disable:m(a).processing,"error-message":m(a).errors.name,rules:[u=>u&&u.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),h(fe,{modelValue:m(a).phone,"onUpdate:modelValue":o[4]||(o[4]=u=>m(a).phone=u),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:m(a).processing,error:!!m(a).errors.phone,"error-message":m(a).errors.phone,rules:[u=>u&&u.length>0||"No HP harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),h(fe,{modelValue:m(a).address,"onUpdate:modelValue":o[5]||(o[5]=u=>m(a).address=u),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:m(a).processing,error:!!m(a).errors.address,"error-message":m(a).errors.address,rules:[u=>u&&u.length>0||"Alamat harus diisi."],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),h(fe,{modelValue:m(a).password,"onUpdate:modelValue":o[6]||(o[6]=u=>m(a).password=u),type:"password",label:m(a).id?"Kata Sandi Baru (Wajib diisi)":"Kata Sandi (Isi jika ingin mengganti)",disable:m(a).processing,error:!!m(a).errors.password,"error-message":m(a).errors.password,"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","label","disable","error","error-message"]),h(Eu,{modelValue:m(a).active,"onUpdate:modelValue":o[7]||(o[7]=u=>m(a).active=u),label:"Aktif",disable:m(a).processing},null,8,["modelValue","disable"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:m(a).processing},null,8,["disable"]),h(Y,{label:"Batal",icon:"cancel",disable:m(a).processing,onClick:o[8]||(o[8]=u=>m(oe).get(i.route("admin.customer.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},hS=Object.freeze(Object.defineProperty({__proto__:null,default:gS},Symbol.toStringTag,{value:"Module"})),mS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},yS={class:"q-pa-xs"},bS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},_S={class:"flex justify-end"},yc="Pelanggan",SS={__name:"Index",setup(r){const t=at(),e=B(!1),a=B([]),n=B(!0),i=B(null),o=B(null),l=Qt(o),s=xt({search:"",status:"active",...Pt()}),u=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),d=[{name:"username",label:t.screen.lt.md?"Pelanggan":"Kode",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right"},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],c=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];Je(()=>{p()});const f=_=>oa({message:`Hapus Pelanggan ${_.name}?`,url:route("admin.customer.delete",_.id),fetchItemsCallback:p,loading:n}),p=(_=null)=>{Lt({pagination:u,filter:s,props:_,rows:a,url:route("admin.customer.data"),loading:n,tableRef:i})},g=()=>p(),v=_=>oe.get(route("admin.customer.detail",{id:_.id})),y=ve(()=>t.screen.gt.sm?d:d.filter(_=>_.name==="username"||_.name==="action"));return(_,S)=>{const w=ee("i-head"),T=ee("authenticated-layout");return $(),X(se,null,[h(w,{title:yc}),h(T,null,Jt({title:b(()=>[N(P(yc))]),"right-button":b(()=>[h(Y,{icon:e.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:S[0]||(S[0]=C=>e.value=!e.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:S[1]||(S[1]=C=>m(oe).get(_.route("admin.customer.add")))})]),default:b(()=>[x("div",yS,[h(it,{class:"full-height-table",style:ea({height:m(l)}),ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":S[5]||(S[5]=C=>u.value=C),filter:s.search,loading:n.value,columns:y.value,rows:a.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:C,message:k,filter:A})=>[x("div",bS,[x("span",null,P(k)+" "+P(A?" with term "+A:""),1)])]),body:b(C=>[h(tt,{props:C,class:Ze([C.row.active?"":"bg-red-1","cursor-pointer"]),onClick:k=>v(C.row)},{default:b(()=>[h(J,{key:"username",props:C,class:"wrap-column"},{default:b(()=>[x("div",null,[m(t).screen.lt.md?($(),K(U,{key:0,name:"person"})):Q("",!0),N(" "+P(C.row.username),1)]),m(t).screen.lt.md?($(),X(se,{key:0},[x("div",null,[m(t).screen.lt.md?($(),K(U,{key:0,name:"person"})):Q("",!0),N(" "+P(C.row.name),1)]),x("div",null,[h(U,{name:"phone"}),N(" "+P(C.row.phone),1)]),h(ta,{text:C.row.address,icon:"home_pin"},null,8,["text"]),x("div",null,[h(U,{name:"wallet"}),N(" Rp. "+P(m(ae)(C.row.balance)),1)])],64)):Q("",!0)]),_:2},1032,["props"]),h(J,{key:"name",props:C},{default:b(()=>[N(P(C.row.name),1)]),_:2},1032,["props"]),h(J,{key:"balance",props:C},{default:b(()=>[N(P(m(ae)(C.row.balance)),1)]),_:2},1032,["props"]),h(J,{key:"phone",props:C},{default:b(()=>[N(P(C.row.phone),1)]),_:2},1032,["props"]),h(J,{key:"address",props:C},{default:b(()=>[h(ta,{text:C.row.address},null,8,["text"])]),_:2},1032,["props"]),h(J,{key:"action",props:C},{default:b(()=>[x("div",_S,[h(Y,{disabled:!m(_a)(_.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:S[4]||(S[4]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{clickable:"",onClick:ue(k=>m(oe).get(_.route("admin.customer.edit",C.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"edit"})]),_:1}),h(j,{icon:"edit"},{default:b(()=>S[6]||(S[6]=[N("Edit")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{onClick:ue(k=>f(C.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>S[7]||(S[7]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[e.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:b(()=>[x("div",mS,[h(Ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:s.status,"onUpdate:modelValue":[S[2]||(S[2]=C=>s.status=C),g],options:c,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:s.search,"onUpdate:modelValue":S[3]||(S[3]=C=>s.search=C),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},wS=Object.freeze(Object.defineProperty({__proto__:null,default:SS},Symbol.toStringTag,{value:"Module"}));var xS=1e-8;function bc(r,t){return Math.abs(r-t)<xS}function yr(r,t,e){var a=0,n=r[0];if(!n)return!1;for(var i=1;i<r.length;i++){var o=r[i];a+=zd(n[0],n[1],o[0],o[1],t,e),n=o}var l=r[0];return(!bc(n[0],l[0])||!bc(n[1],l[1]))&&(a+=zd(n[0],n[1],l[0],l[1],t,e)),a!==0}var TS=[];function bl(r,t){for(var e=0;e<r.length;e++)Kn(r[e],r[e],t)}function _c(r,t,e,a){for(var n=0;n<r.length;n++){var i=r[n];a&&(i=a.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(Cg(t,t,i),kg(e,e,i))}}function CS(r){for(var t=0,e=0,a=0,n=r.length,i=r[n-1][0],o=r[n-1][1],l=0;l<n;l++){var s=r[l][0],u=r[l][1],d=i*u-s*o;t+=d,e+=(i+s)*d,a+=(o+u)*d,i=s,o=u}return t?[e/t/3,a/t/3,t]:[r[0][0]||0,r[0][1]||0]}var Sh=function(){function r(t){this.name=t}return r.prototype.setCenter=function(t){this._center=t},r.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},r}(),Sc=function(){function r(t,e){this.type="polygon",this.exterior=t,this.interiors=e}return r}(),wc=function(){function r(t){this.type="linestring",this.points=t}return r}(),wh=function(r){W(t,r);function t(e,a,n){var i=r.call(this,e)||this;return i.type="geoJSON",i.geometries=a,i._center=n&&[n[0],n[1]],i}return t.prototype.calcCenter=function(){for(var e=this.geometries,a,n=0,i=0;i<e.length;i++){var o=e[i],l=o.exterior,s=l&&l.length;s>n&&(a=o,n=s)}if(a)return CS(a.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(e){var a=this._rect;if(a&&!e)return a;var n=[1/0,1/0],i=[-1/0,-1/0],o=this.geometries;return O(o,function(l){l.type==="polygon"?_c(l.exterior,n,i,e):O(l.points,function(s){_c(s,n,i,e)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(i[0])&&isFinite(i[1])||(n[0]=n[1]=i[0]=i[1]=0),a=new st(n[0],n[1],i[0]-n[0],i[1]-n[1]),e||(this._rect=a),a},t.prototype.contain=function(e){var a=this.getBoundingRect(),n=this.geometries;if(!a.contain(e[0],e[1]))return!1;e:for(var i=0,o=n.length;i<o;i++){var l=n[i];if(l.type==="polygon"){var s=l.exterior,u=l.interiors;if(yr(s,e[0],e[1])){for(var d=0;d<(u?u.length:0);d++)if(yr(u[d],e[0],e[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(e,a,n,i){var o=this.getBoundingRect(),l=o.width/o.height;n?i||(i=n/l):n=l*i;for(var s=new st(e,a,n,i),u=o.calculateTransform(s),d=this.geometries,c=0;c<d.length;c++){var f=d[c];f.type==="polygon"?(bl(f.exterior,u),O(f.interiors,function(p){bl(p,u)})):O(f.points,function(p){bl(p,u)})}o=this._rect,o.copy(s),this._center=[o.x+o.width/2,o.y+o.height/2]},t.prototype.cloneShallow=function(e){e==null&&(e=this.name);var a=new t(e,this.geometries,this._center);return a._rect=this._rect,a.transformTo=null,a},t}(Sh),kS=function(r){W(t,r);function t(e,a){var n=r.call(this,e)||this;return n.type="geoSVG",n._elOnlyForCalculate=a,n}return t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,a=e.getBoundingRect(),n=[a.x+a.width/2,a.y+a.height/2],i=k0(TS),o=e;o&&!o.isGeoSVGGraphicRoot;)Is(i,o.getLocalTransform(),i),o=o.parent;return Tg(i,i),Kn(n,n,i),n},t}(Sh);function AS(r){if(!r.UTF8Encoding)return r;var t=r,e=t.UTF8Scale;e==null&&(e=1024);var a=t.features;return O(a,function(n){var i=n.geometry,o=i.encodeOffsets,l=i.coordinates;if(o)switch(i.type){case"LineString":i.coordinates=xh(l,o,e);break;case"Polygon":_l(l,o,e);break;case"MultiLineString":_l(l,o,e);break;case"MultiPolygon":O(l,function(s,u){return _l(s,o[u],e)})}}),t.UTF8Encoding=!1,t}function _l(r,t,e){for(var a=0;a<r.length;a++)r[a]=xh(r[a],t[a],e)}function xh(r,t,e){for(var a=[],n=t[0],i=t[1],o=0;o<r.length;o+=2){var l=r.charCodeAt(o)-64,s=r.charCodeAt(o+1)-64;l=l>>1^-(l&1),s=s>>1^-(s&1),l+=n,s+=i,n=l,i=s,a.push([l/e,s/e])}return a}function IS(r,t){return r=AS(r),ne(bt(r.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var a=e.properties,n=e.geometry,i=[];switch(n.type){case"Polygon":var o=n.coordinates;i.push(new Sc(o[0],o.slice(1)));break;case"MultiPolygon":O(n.coordinates,function(s){s[0]&&i.push(new Sc(s[0],s.slice(1)))});break;case"LineString":i.push(new wc([n.coordinates]));break;case"MultiLineString":i.push(new wc(n.coordinates))}var l=new wh(a[t||"name"],i,a.cp);return l.properties=a,l})}function DS(r){if(r){for(var t=[],e=0;e<r.length;e++)t.push(r[e].slice());return t}}function MS(r,t){var e=r.label,a=t&&t.getTextGuideLine();return{dataIndex:r.dataIndex,dataType:r.dataType,seriesIndex:r.seriesModel.seriesIndex,text:r.label.style.text,rect:r.hostRect,labelRect:r.rect,align:e.style.align,verticalAlign:e.style.verticalAlign,labelLinePoints:DS(a&&a.shape.points)}}var xc=["align","verticalAlign","width","height","fontSize"],Wt=new tn,Sl=ht(),PS=ht();function Ri(r,t,e){for(var a=0;a<e.length;a++){var n=e[a];t[n]!=null&&(r[n]=t[n])}}var Ei=["x","y","rotation"],LS=function(){function r(){this._labelList=[],this._chartViewList=[]}return r.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},r.prototype._addLabel=function(t,e,a,n,i){var o=n.style,l=n.__hostTarget,s=l.textConfig||{},u=n.getComputedTransform(),d=n.getBoundingRect().plain();st.applyTransform(d,d,u),u?Wt.setLocalTransform(u):(Wt.x=Wt.y=Wt.rotation=Wt.originX=Wt.originY=0,Wt.scaleX=Wt.scaleY=1),Wt.rotation=$n(Wt.rotation);var c=n.__hostTarget,f;if(c){f=c.getBoundingRect().plain();var p=c.getComputedTransform();st.applyTransform(f,f,p)}var g=f&&c.getTextGuideLine();this._labelList.push({label:n,labelLine:g,seriesModel:a,dataIndex:t,dataType:e,layoutOption:i,computedLayoutOption:null,rect:d,hostRect:f,priority:f?f.width*f.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:g&&g.ignore,x:Wt.x,y:Wt.y,scaleX:Wt.scaleX,scaleY:Wt.scaleY,rotation:Wt.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:n.cursor,attachedPos:s.position,attachedRot:s.rotation}})},r.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var a=t.__model,n=a.get("labelLayout");(Be(n)||vt(n).length)&&t.group.traverse(function(i){if(i.ignore)return!0;var o=i.getTextContent(),l=qe(i);o&&!o.disableLabelLayout&&e._addLabel(l.dataIndex,l.dataType,a,o,n)})},r.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),a=t.getHeight();function n(w,T){return function(){Bd(w,T)}}for(var i=0;i<this._labelList.length;i++){var o=this._labelList[i],l=o.label,s=l.__hostTarget,u=o.defaultAttr,d=void 0;Be(o.layoutOption)?d=o.layoutOption(MS(o,s)):d=o.layoutOption,d=d||{},o.computedLayoutOption=d;var c=Math.PI/180;s&&s.setTextConfig({local:!1,position:d.x!=null||d.y!=null?null:u.attachedPos,rotation:d.rotate!=null?d.rotate*c:u.attachedRot,offset:[d.dx||0,d.dy||0]});var f=!1;if(d.x!=null?(l.x=de(d.x,e),l.setStyle("x",0),f=!0):(l.x=u.x,l.setStyle("x",u.style.x)),d.y!=null?(l.y=de(d.y,a),l.setStyle("y",0),f=!0):(l.y=u.y,l.setStyle("y",u.style.y)),d.labelLinePoints){var p=s.getTextGuideLine();p&&(p.setShape({points:d.labelLinePoints}),f=!1)}var g=Sl(l);g.needsUpdateLabelLine=f,l.rotation=d.rotate!=null?d.rotate*c:u.rotation,l.scaleX=u.scaleX,l.scaleY=u.scaleY;for(var v=0;v<xc.length;v++){var y=xc[v];l.setStyle(y,d[y]!=null?d[y]:u.style[y])}if(d.draggable){if(l.draggable=!0,l.cursor="move",s){var _=o.seriesModel;if(o.dataIndex!=null){var S=o.seriesModel.getData(o.dataType);_=S.getItemModel(o.dataIndex)}l.on("drag",n(s,_.getModel("labelLine")))}}else l.off("drag"),l.cursor=u.cursor}},r.prototype.layout=function(t){var e=t.getWidth(),a=t.getHeight(),n=A0(this._labelList),i=bt(n,function(s){return s.layoutOption.moveOverlap==="shiftX"}),o=bt(n,function(s){return s.layoutOption.moveOverlap==="shiftY"});I0(i,0,e),D0(o,0,a);var l=bt(n,function(s){return s.layoutOption.hideOverlap});M0(l)},r.prototype.processLabelsOverall=function(){var t=this;O(this._chartViewList,function(e){var a=e.__model,n=e.ignoreLabelLineUpdate,i=a.isAnimationEnabled();e.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var l=!n,s=o.getTextContent();!l&&s&&(l=Sl(s).needsUpdateLabelLine),l&&t._updateLabelLine(o,a),i&&t._animateLabels(o,a)})})},r.prototype._updateLabelLine=function(t,e){var a=t.getTextContent(),n=qe(t),i=n.dataIndex;if(a&&i!=null){var o=e.getData(n.dataType),l=o.getItemModel(i),s={},u=o.getItemVisual(i,"style");if(u){var d=o.getVisual("drawType");s.stroke=u[d]}var c=l.getModel("labelLine");Ag(t,Ig(l),s),Bd(t,c)}},r.prototype._animateLabels=function(t,e){var a=t.getTextContent(),n=t.getTextGuideLine();if(a&&(t.forceLabelAnimation||!a.ignore&&!a.invisible&&!t.disableLabelAnimation&&!P0(t))){var i=Sl(a),o=i.oldLayout,l=qe(t),s=l.dataIndex,u={x:a.x,y:a.y,rotation:a.rotation},d=e.getData(l.dataType);if(o){a.attr(o);var f=t.prevStates;f&&(nt(f,"select")>=0&&a.attr(i.oldLayoutSelect),nt(f,"emphasis")>=0&&a.attr(i.oldLayoutEmphasis)),Ke(a,u,e,s)}else if(a.attr(u),!Dg(a).valueAnimation){var c=At(a.style.opacity,1);a.style.opacity=0,qt(a,{style:{opacity:c}},e,s)}if(i.oldLayout=u,a.states.select){var p=i.oldLayoutSelect={};Ri(p,u,Ei),Ri(p,a.states.select,Ei)}if(a.states.emphasis){var g=i.oldLayoutEmphasis={};Ri(g,u,Ei),Ri(g,a.states.emphasis,Ei)}Mg(a,s,d,e,e)}if(n&&!n.ignore&&!n.invisible){var i=PS(n),o=i.oldLayout,v={points:n.shape.points};o?(n.attr({shape:o}),Ke(n,{shape:v},e)):(n.setShape(v),n.style.strokePercent=0,qt(n,{style:{strokePercent:1}},e)),i.oldLayout=v}},r}(),wl=ht();function VS(r){r.registerUpdateLifecycle("series:beforeupdate",function(t,e,a){var n=wl(e).labelManager;n||(n=wl(e).labelManager=new LS),n.clearLabels()}),r.registerUpdateLifecycle("series:layoutlabels",function(t,e,a){var n=wl(e).labelManager;a.updatedSeries.forEach(function(i){n.addLabelsOfSeries(e.getViewOfSeriesModel(i))}),n.updateLayoutConfig(e),n.layout(e),n.processLabelsOverall()})}var xl=Math.sin,Tl=Math.cos,Th=Math.PI,lr=Math.PI*2,RS=180/Th,Ch=function(){function r(){}return r.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},r.prototype.moveTo=function(t,e){this._add("M",t,e)},r.prototype.lineTo=function(t,e){this._add("L",t,e)},r.prototype.bezierCurveTo=function(t,e,a,n,i,o){this._add("C",t,e,a,n,i,o)},r.prototype.quadraticCurveTo=function(t,e,a,n){this._add("Q",t,e,a,n)},r.prototype.arc=function(t,e,a,n,i,o){this.ellipse(t,e,a,a,0,n,i,o)},r.prototype.ellipse=function(t,e,a,n,i,o,l,s){var u=l-o,d=!s,c=Math.abs(u),f=Za(c-lr)||(d?u>=lr:-u>=lr),p=u>0?u%lr:u%lr+lr,g=!1;f?g=!0:Za(c)?g=!1:g=p>=Th==!!d;var v=t+a*Tl(o),y=e+n*xl(o);this._start&&this._add("M",v,y);var _=Math.round(i*RS);if(f){var S=1/this._p,w=(d?1:-1)*(lr-S);this._add("A",a,n,_,1,+d,t+a*Tl(o+w),e+n*xl(o+w)),S>.01&&this._add("A",a,n,_,0,+d,v,y)}else{var T=t+a*Tl(l),C=e+n*xl(l);this._add("A",a,n,_,+g,+d,T,C)}},r.prototype.rect=function(t,e,a,n){this._add("M",t,e),this._add("l",a,0),this._add("l",0,n),this._add("l",-a,0),this._add("Z")},r.prototype.closePath=function(){this._d.length>0&&this._add("Z")},r.prototype._add=function(t,e,a,n,i,o,l,s,u){for(var d=[],c=this._p,f=1;f<arguments.length;f++){var p=arguments[f];if(isNaN(p)){this._invalid=!0;return}d.push(Math.round(p*c)/c)}this._d.push(t+d.join(" ")),this._start=t==="Z"},r.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},r.prototype.getStr=function(){return this._str},r}(),$u="none",ES=Math.round;function NS(r){var t=r.fill;return t!=null&&t!==$u}function OS(r){var t=r.stroke;return t!=null&&t!==$u}var Ns=["lineCap","miterLimit","lineJoin"],$S=ne(Ns,function(r){return"stroke-"+r.toLowerCase()});function zS(r,t,e,a){var n=t.opacity==null?1:t.opacity;if(e instanceof Ta){r("opacity",n);return}if(NS(t)){var i=Qn(t.fill);r("fill",i.color);var o=t.fillOpacity!=null?t.fillOpacity*i.opacity*n:i.opacity*n;o<1&&r("fill-opacity",o)}else r("fill",$u);if(OS(t)){var l=Qn(t.stroke);r("stroke",l.color);var s=t.strokeNoScale?e.getLineScale():1,u=s?(t.lineWidth||0)/s:0,d=t.strokeOpacity!=null?t.strokeOpacity*l.opacity*n:l.opacity*n,c=t.strokeFirst;if(u!==1&&r("stroke-width",u),c&&r("paint-order",c?"stroke":"fill"),d<1&&r("stroke-opacity",d),t.lineDash){var f=L0(e),p=f[0],g=f[1];p&&(g=ES(g||0),r("stroke-dasharray",p.join(",")),(g||a)&&r("stroke-dashoffset",g))}for(var v=0;v<Ns.length;v++){var y=Ns[v];if(t[y]!==qd[y]){var _=t[y]||qd[y];_&&r($S[v],_)}}}}var kh="http://www.w3.org/2000/svg",Ah="http://www.w3.org/1999/xlink",BS="http://www.w3.org/2000/xmlns/",qS="http://www.w3.org/XML/1998/namespace",Tc="ecmeta_";function Ih(r){return document.createElementNS(kh,r)}function yt(r,t,e,a,n){return{tag:r,attrs:e||{},children:a,text:n,key:t}}function GS(r,t){var e=[];if(t)for(var a in t){var n=t[a],i=a;n!==!1&&(n!==!0&&n!=null&&(i+='="'+n+'"'),e.push(i))}return"<"+r+" "+e.join(" ")+">"}function FS(r){return"</"+r+">"}function zu(r,t){t=t||{};var e=t.newline?`
`:"";function a(n){var i=n.children,o=n.tag,l=n.attrs,s=n.text;return GS(o,l)+(o!=="style"?V0(s):s||"")+(i?""+e+ne(i,function(u){return a(u)}).join(e)+e:"")+FS(o)}return a(r)}function US(r,t,e){e=e||{};var a=e.newline?`
`:"",n=" {"+a,i=a+"}",o=ne(vt(r),function(s){return s+n+ne(vt(r[s]),function(u){return u+":"+r[s][u]+";"}).join(a)+i}).join(a),l=ne(vt(t),function(s){return"@keyframes "+s+n+ne(vt(t[s]),function(u){return u+n+ne(vt(t[s][u]),function(d){var c=t[s][u][d];return d==="d"&&(c='path("'+c+'")'),d+":"+c+";"}).join(a)+i}).join(a)+i}).join(a);return!o&&!l?"":["<![CDATA[",o,l,"]]>"].join(a)}function Os(r){return{zrId:r,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function Cc(r,t,e,a){return yt("svg","root",{width:r,height:t,xmlns:kh,"xmlns:xlink":Ah,version:"1.1",baseProfile:"full",viewBox:a?"0 0 "+r+" "+t:!1},e)}var HS=0;function Dh(){return HS++}var kc={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},fr="transform-origin";function WS(r,t,e){var a=be({},r.shape);be(a,t),r.buildPath(e,a);var n=new Ch;return n.reset(Vg(r)),e.rebuildPath(n,1),n.generateStr(),n.getStr()}function YS(r,t){var e=t.originX,a=t.originY;(e||a)&&(r[fr]=e+"px "+a+"px")}var jS={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Mh(r,t){var e=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[e]=r,e}function ZS(r,t,e){var a=r.shape.paths,n={},i,o;if(O(a,function(s){var u=Os(e.zrId);u.animation=!0,el(s,{},u,!0);var d=u.cssAnims,c=u.cssNodes,f=vt(d),p=f.length;if(p){o=f[p-1];var g=d[o];for(var v in g){var y=g[v];n[v]=n[v]||{d:""},n[v].d+=y.d||""}for(var _ in c){var S=c[_].animation;S.indexOf(o)>=0&&(i=S)}}}),!!i){t.d=!1;var l=Mh(n,e);return i.replace(o,l)}}function Ac(r){return Re(r)?kc[r]?"cubic-bezier("+kc[r]+")":R0(r)?r:"":""}function el(r,t,e,a){var n=r.animators,i=n.length,o=[];if(r instanceof Pg){var l=ZS(r,t,e);if(l)o.push(l);else if(!i)return}else if(!i)return;for(var s={},u=0;u<i;u++){var d=n[u],c=[d.getMaxTime()/1e3+"s"],f=Ac(d.getClip().easing),p=d.getDelay();f?c.push(f):c.push("linear"),p&&c.push(p/1e3+"s"),d.getLoop()&&c.push("infinite");var g=c.join(" ");s[g]=s[g]||[g,[]],s[g][1].push(d)}function v(S){var w=S[1],T=w.length,C={},k={},A={},I="animation-timing-function";function M(we,Ge,ze){for(var Ye=we.getTracks(),kt=we.getMaxTime(),Vt=0;Vt<Ye.length;Vt++){var je=Ye[Vt];if(je.needsAnimate()){var Rt=je.keyframes,Bt=je.propName;if(ze&&(Bt=ze(Bt)),Bt)for(var ca=0;ca<Rt.length;ca++){var ka=Rt[ca],Aa=Math.round(ka.time/kt*100)+"%",kn=Ac(ka.easing),or=ka.rawValue;(Re(or)||aa(or))&&(Ge[Aa]=Ge[Aa]||{},Ge[Aa][Bt]=ka.rawValue,kn&&(Ge[Aa][I]=kn))}}}}for(var D=0;D<T;D++){var L=w[D],E=L.targetName;E?E==="shape"&&M(L,k):!a&&M(L,C)}for(var R in C){var V={};E0(V,r),be(V,C[R]);var z=Lg(V),G=C[R][I];A[R]=z?{transform:z}:{},YS(A[R],V),G&&(A[R][I]=G)}var q,Z=!0;for(var R in k){A[R]=A[R]||{};var H=!q,G=k[R][I];H&&(q=new _u);var F=q.len();q.reset(),A[R].d=WS(r,k[R],q);var re=q.len();if(!H&&F!==re){Z=!1;break}G&&(A[R][I]=G)}if(!Z)for(var R in A)delete A[R].d;if(!a)for(var D=0;D<T;D++){var L=w[D],E=L.targetName;E==="style"&&M(L,A,function(Ye){return jS[Ye]})}for(var _e=vt(A),te=!0,he,D=1;D<_e.length;D++){var Ie=_e[D-1],ke=_e[D];if(A[Ie][fr]!==A[ke][fr]){te=!1;break}he=A[Ie][fr]}if(te&&he){for(var R in A)A[R][fr]&&delete A[R][fr];t[fr]=he}if(bt(_e,function(we){return vt(A[we]).length>0}).length){var Ee=Mh(A,e);return Ee+" "+S[0]+" both"}}for(var y in s){var l=v(s[y]);l&&o.push(l)}if(o.length){var _=e.zrId+"-cls-"+Dh();e.cssNodes["."+_]={animation:o.join(",")},t.class=_}}function XS(r,t,e){if(!r.ignore)if(r.isSilent()){var a={"pointer-events":"none"};Ic(a,t,e)}else{var n=r.states.emphasis&&r.states.emphasis.style?r.states.emphasis.style:{},i=n.fill;if(!i){var o=r.style&&r.style.fill,l=r.states.select&&r.states.select.style&&r.states.select.style.fill,s=r.currentStates.indexOf("select")>=0&&l||o;s&&(i=N0(s))}var u=n.lineWidth;if(u){var d=!n.strokeNoScale&&r.transform?r.transform[0]:1;u=u/d}var a={cursor:"pointer"};i&&(a.fill=i),n.stroke&&(a.stroke=n.stroke),u&&(a["stroke-width"]=u),Ic(a,t,e)}}function Ic(r,t,e,a){var n=JSON.stringify(r),i=e.cssStyleCache[n];i||(i=e.zrId+"-cls-"+Dh(),e.cssStyleCache[n]=i,e.cssNodes["."+i+":hover"]=r),t.class=t.class?t.class+" "+i:i}var ii=Math.round;function Ph(r){return r&&Re(r.src)}function Lh(r){return r&&Be(r.toDataURL)}function Bu(r,t,e,a){zS(function(n,i){var o=n==="fill"||n==="stroke";o&&Eg(i)?Rh(t,r,n,a):o&&Su(i)?Eh(e,r,n,a):o&&i==="none"?r[n]="transparent":r[n]=i},t,e,!1),rw(e,r,a)}function qu(r,t){var e=X0(t);e&&(e.each(function(a,n){a!=null&&(r[(Tc+n).toLowerCase()]=a+"")}),t.isSilent()&&(r[Tc+"silent"]="true"))}function Dc(r){return Za(r[0]-1)&&Za(r[1])&&Za(r[2])&&Za(r[3]-1)}function KS(r){return Za(r[4])&&Za(r[5])}function Gu(r,t,e){if(t&&!(KS(t)&&Dc(t))){var a=1e4;r.transform=Dc(t)?"translate("+ii(t[4]*a)/a+" "+ii(t[5]*a)/a+")":Z0(t)}}function Mc(r,t,e){for(var a=r.points,n=[],i=0;i<a.length;i++)n.push(ii(a[i][0]*e)/e),n.push(ii(a[i][1]*e)/e);t.points=n.join(" ")}function Pc(r){return!r.smooth}function QS(r){var t=ne(r,function(e){return typeof e=="string"?[e,e]:e});return function(e,a,n){for(var i=0;i<t.length;i++){var o=t[i],l=e[o[0]];l!=null&&(a[o[1]]=ii(l*n)/n)}}}var JS={circle:[QS(["cx","cy","r"])],polyline:[Mc,Pc],polygon:[Mc,Pc]};function ew(r){for(var t=r.animators,e=0;e<t.length;e++)if(t[e].targetName==="shape")return!0;return!1}function Vh(r,t){var e=r.style,a=r.shape,n=JS[r.type],i={},o=t.animation,l="path",s=r.style.strokePercent,u=t.compress&&Vg(r)||4;if(n&&!t.willUpdate&&!(n[1]&&!n[1](a))&&!(o&&ew(r))&&!(s<1)){l=r.type;var d=Math.pow(10,u);n[0](a,i,d)}else{var c=!r.path||r.shapeChanged();r.path||r.createPathProxy();var f=r.path;c&&(f.beginPath(),r.buildPath(f,r.shape),r.pathUpdated());var p=f.getVersion(),g=r,v=g.__svgPathBuilder;(g.__svgPathVersion!==p||!v||s!==g.__svgPathStrokePercent)&&(v||(v=g.__svgPathBuilder=new Ch),v.reset(u),f.rebuildPath(v,s),v.generateStr(),g.__svgPathVersion=p,g.__svgPathStrokePercent=s),i.d=v.getStr()}return Gu(i,r.transform),Bu(i,e,r,t),qu(i,r),t.animation&&el(r,i,t),t.emphasis&&XS(r,i,t),yt(l,r.id+"",i)}function tw(r,t){var e=r.style,a=e.image;if(a&&!Re(a)&&(Ph(a)?a=a.src:Lh(a)&&(a=a.toDataURL())),!!a){var n=e.x||0,i=e.y||0,o=e.width,l=e.height,s={href:a,width:o,height:l};return n&&(s.x=n),i&&(s.y=i),Gu(s,r.transform),Bu(s,e,r,t),qu(s,r),t.animation&&el(r,s,t),yt("image",r.id+"",s)}}function aw(r,t){var e=r.style,a=e.text;if(a!=null&&(a+=""),!(!a||isNaN(e.x)||isNaN(e.y))){var n=e.font||O0,i=e.x||0,o=$0(e.y||0,z0(n),e.textBaseline),l=B0[e.textAlign]||e.textAlign,s={"dominant-baseline":"central","text-anchor":l};if(q0(e)){var u="",d=e.fontStyle,c=G0(e.fontSize);if(!parseFloat(c))return;var f=e.fontFamily||F0,p=e.fontWeight;u+="font-size:"+c+";font-family:"+f+";",d&&d!=="normal"&&(u+="font-style:"+d+";"),p&&p!=="normal"&&(u+="font-weight:"+p+";"),s.style=u}else s.style="font: "+n;return a.match(/\s/)&&(s["xml:space"]="preserve"),i&&(s.x=i),o&&(s.y=o),Gu(s,r.transform),Bu(s,e,r,t),qu(s,r),t.animation&&el(r,s,t),yt("text",r.id+"",s,void 0,a)}}function Lc(r,t){if(r instanceof Tt)return Vh(r,t);if(r instanceof Ta)return tw(r,t);if(r instanceof Rg)return aw(r,t)}function rw(r,t,e){var a=r.style;if(K0(a)){var n=Q0(r),i=e.shadowCache,o=i[n];if(!o){var l=r.getGlobalScale(),s=l[0],u=l[1];if(!s||!u)return;var d=a.shadowOffsetX||0,c=a.shadowOffsetY||0,f=a.shadowBlur,p=Qn(a.shadowColor),g=p.opacity,v=p.color,y=f/2/s,_=f/2/u,S=y+" "+_;o=e.zrId+"-s"+e.shadowIdx++,e.defs[o]=yt("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[yt("feDropShadow","",{dx:d/s,dy:c/u,stdDeviation:S,"flood-color":v,"flood-opacity":g})]),i[n]=o}t.filter=No(o)}}function Rh(r,t,e,a){var n=r[e],i,o={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(U0(n))i="linearGradient",o.x1=n.x,o.y1=n.y,o.x2=n.x2,o.y2=n.y2;else if(H0(n))i="radialGradient",o.cx=At(n.x,.5),o.cy=At(n.y,.5),o.r=At(n.r,.5);else return;for(var l=n.colorStops,s=[],u=0,d=l.length;u<d;++u){var c=W0(l[u].offset)*100+"%",f=l[u].color,p=Qn(f),g=p.color,v=p.opacity,y={offset:c};y["stop-color"]=g,v<1&&(y["stop-opacity"]=v),s.push(yt("stop",u+"",y))}var _=yt(i,"",o,s),S=zu(_),w=a.gradientCache,T=w[S];T||(T=a.zrId+"-g"+a.gradientIdx++,w[S]=T,o.id=T,a.defs[T]=yt(i,T,o,s)),t[e]=No(T)}function Eh(r,t,e,a){var n=r.style[e],i=r.getBoundingRect(),o={},l=n.repeat,s=l==="no-repeat",u=l==="repeat-x",d=l==="repeat-y",c;if(Y0(n)){var f=n.imageWidth,p=n.imageHeight,g=void 0,v=n.image;if(Re(v)?g=v:Ph(v)?g=v.src:Lh(v)&&(g=v.toDataURL()),typeof Image>"u"){var y="Image width/height must been given explictly in svg-ssr renderer.";Jn(f,y),Jn(p,y)}else if(f==null||p==null){var _=function(D,L){if(D){var E=D.elm,R=f||L.width,V=p||L.height;D.tag==="pattern"&&(u?(V=1,R/=i.width):d&&(R=1,V/=i.height)),D.attrs.width=R,D.attrs.height=V,E&&(E.setAttribute("width",R),E.setAttribute("height",V))}},S=j0(g,null,r,function(D){s||_(k,D),_(c,D)});S&&S.width&&S.height&&(f=f||S.width,p=p||S.height)}c=yt("image","img",{href:g,width:f,height:p}),o.width=f,o.height=p}else n.svgElement&&(c=Fe(n.svgElement),o.width=n.svgWidth,o.height=n.svgHeight);if(c){var w,T;s?w=T=1:u?(T=1,w=o.width/i.width):d?(w=1,T=o.height/i.height):o.patternUnits="userSpaceOnUse",w!=null&&!isNaN(w)&&(o.width=w),T!=null&&!isNaN(T)&&(o.height=T);var C=Lg(n);C&&(o.patternTransform=C);var k=yt("pattern","",o,[c]),A=zu(k),I=a.patternCache,M=I[A];M||(M=a.zrId+"-p"+a.patternIdx++,I[A]=M,o.id=M,k=a.defs[M]=yt("pattern",M,o,[c])),t[e]=No(M)}}function nw(r,t,e){var a=e.clipPathCache,n=e.defs,i=a[r.id];if(!i){i=e.zrId+"-c"+e.clipPathIdx++;var o={id:i};a[r.id]=i,n[i]=yt("clipPath",i,o,[Vh(r,e)])}t["clip-path"]=No(i)}function Vc(r){return document.createTextNode(r)}function br(r,t,e){r.insertBefore(t,e)}function Rc(r,t){r.removeChild(t)}function Ec(r,t){r.appendChild(t)}function Nh(r){return r.parentNode}function Oh(r){return r.nextSibling}function Cl(r,t){r.textContent=t}var Nc=58,iw=120,ow=yt("","");function $s(r){return r===void 0}function Pa(r){return r!==void 0}function lw(r,t,e){for(var a={},n=t;n<=e;++n){var i=r[n].key;i!==void 0&&(a[i]=n)}return a}function qn(r,t){var e=r.key===t.key,a=r.tag===t.tag;return a&&e}function oi(r){var t,e=r.children,a=r.tag;if(Pa(a)){var n=r.elm=Ih(a);if(Fu(ow,r),ge(e))for(t=0;t<e.length;++t){var i=e[t];i!=null&&Ec(n,oi(i))}else Pa(r.text)&&!Nt(r.text)&&Ec(n,Vc(r.text))}else r.elm=Vc(r.text);return r.elm}function $h(r,t,e,a,n){for(;a<=n;++a){var i=e[a];i!=null&&br(r,oi(i),t)}}function vo(r,t,e,a){for(;e<=a;++e){var n=t[e];if(n!=null)if(Pa(n.tag)){var i=Nh(n.elm);Rc(i,n.elm)}else Rc(r,n.elm)}}function Fu(r,t){var e,a=t.elm,n=r&&r.attrs||{},i=t.attrs||{};if(n!==i){for(e in i){var o=i[e],l=n[e];l!==o&&(o===!0?a.setAttribute(e,""):o===!1?a.removeAttribute(e):e==="style"?a.style.cssText=o:e.charCodeAt(0)!==iw?a.setAttribute(e,o):e==="xmlns:xlink"||e==="xmlns"?a.setAttributeNS(BS,e,o):e.charCodeAt(3)===Nc?a.setAttributeNS(qS,e,o):e.charCodeAt(5)===Nc?a.setAttributeNS(Ah,e,o):a.setAttribute(e,o))}for(e in n)e in i||a.removeAttribute(e)}}function sw(r,t,e){for(var a=0,n=0,i=t.length-1,o=t[0],l=t[i],s=e.length-1,u=e[0],d=e[s],c,f,p,g;a<=i&&n<=s;)o==null?o=t[++a]:l==null?l=t[--i]:u==null?u=e[++n]:d==null?d=e[--s]:qn(o,u)?(Qr(o,u),o=t[++a],u=e[++n]):qn(l,d)?(Qr(l,d),l=t[--i],d=e[--s]):qn(o,d)?(Qr(o,d),br(r,o.elm,Oh(l.elm)),o=t[++a],d=e[--s]):qn(l,u)?(Qr(l,u),br(r,l.elm,o.elm),l=t[--i],u=e[++n]):($s(c)&&(c=lw(t,a,i)),f=c[u.key],$s(f)?br(r,oi(u),o.elm):(p=t[f],p.tag!==u.tag?br(r,oi(u),o.elm):(Qr(p,u),t[f]=void 0,br(r,p.elm,o.elm))),u=e[++n]);(a<=i||n<=s)&&(a>i?(g=e[s+1]==null?null:e[s+1].elm,$h(r,g,e,n,s)):vo(r,t,a,i))}function Qr(r,t){var e=t.elm=r.elm,a=r.children,n=t.children;r!==t&&(Fu(r,t),$s(t.text)?Pa(a)&&Pa(n)?a!==n&&sw(e,a,n):Pa(n)?(Pa(r.text)&&Cl(e,""),$h(e,null,n,0,n.length-1)):Pa(a)?vo(e,a,0,a.length-1):Pa(r.text)&&Cl(e,""):r.text!==t.text&&(Pa(a)&&vo(e,a,0,a.length-1),Cl(e,t.text)))}function uw(r,t){if(qn(r,t))Qr(r,t);else{var e=r.elm,a=Nh(e);oi(t),a!==null&&(br(a,t.elm,Oh(e)),vo(a,[r],0,0))}return t}var dw=0,cw=function(){function r(t,e,a){if(this.type="svg",this.refreshHover=Oc(),this.configLayer=Oc(),this.storage=e,this._opts=a=be({},a),this.root=t,this._id="zr"+dw++,this._oldVNode=Cc(a.width,a.height),t&&!a.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=Ih("svg");Fu(null,this._oldVNode),n.appendChild(i),t.appendChild(n)}this.resize(a.width,a.height)}return r.prototype.getType=function(){return this.type},r.prototype.getViewportRoot=function(){return this._viewport},r.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},r.prototype.getSvgDom=function(){return this._svgDom},r.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",uw(this._oldVNode,t),this._oldVNode=t}},r.prototype.renderOneToVNode=function(t){return Lc(t,Os(this._id))},r.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),a=this._width,n=this._height,i=Os(this._id);i.animation=t.animation,i.willUpdate=t.willUpdate,i.compress=t.compress,i.emphasis=t.emphasis;var o=[],l=this._bgVNode=fw(a,n,this._backgroundColor,i);l&&o.push(l);var s=t.compress?null:this._mainVNode=yt("g","main",{},[]);this._paintList(e,i,s?s.children:o),s&&o.push(s);var u=ne(vt(i.defs),function(f){return i.defs[f]});if(u.length&&o.push(yt("defs","defs",{},u)),t.animation){var d=US(i.cssNodes,i.cssAnims,{newline:!0});if(d){var c=yt("style","stl",{},[],d);o.push(c)}}return Cc(a,n,o,t.useViewBox)},r.prototype.renderToString=function(t){return t=t||{},zu(this.renderToVNode({animation:At(t.cssAnimation,!0),emphasis:At(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:At(t.useViewBox,!0)}),{newline:!0})},r.prototype.setBackgroundColor=function(t){this._backgroundColor=t},r.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},r.prototype._paintList=function(t,e,a){for(var n=t.length,i=[],o=0,l,s,u=0,d=0;d<n;d++){var c=t[d];if(!c.invisible){var f=c.__clipPaths,p=f&&f.length||0,g=s&&s.length||0,v=void 0;for(v=Math.max(p-1,g-1);v>=0&&!(f&&s&&f[v]===s[v]);v--);for(var y=g-1;y>v;y--)o--,l=i[o-1];for(var _=v+1;_<p;_++){var S={};nw(f[_],S,e);var w=yt("g","clip-g-"+u++,S,[]);(l?l.children:a).push(w),i[o++]=w,l=w}s=f;var T=Lc(c,e);T&&(l?l.children:a).push(T)}}},r.prototype.resize=function(t,e){var a=this._opts,n=this.root,i=this._viewport;if(t!=null&&(a.width=t),e!=null&&(a.height=e),n&&i&&(i.style.display="none",t=Gd(n,0,a),e=Gd(n,1,a),i.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,i){var o=i.style;o.width=t+"px",o.height=e+"px"}if(Su(this._backgroundColor))this.refresh();else{var l=this._svgDom;l&&(l.setAttribute("width",t),l.setAttribute("height",e));var s=this._bgVNode&&this._bgVNode.elm;s&&(s.setAttribute("width",t),s.setAttribute("height",e))}}},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},r.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},r.prototype.toDataURL=function(t){var e=this.renderToString(),a="data:image/svg+xml;";return t?(e=J0(e),e&&a+"base64,"+e):a+"charset=UTF-8,"+encodeURIComponent(e)},r}();function Oc(r){return function(){}}function fw(r,t,e,a){var n;if(e&&e!=="none")if(n=yt("rect","bg",{width:r,height:t,x:"0",y:"0"}),Eg(e))Rh({fill:e},n.attrs,"fill",a);else if(Su(e))Eh({style:{fill:e},dirty:ar,getBoundingRect:function(){return{width:r,height:t}}},n.attrs,"fill",a);else{var i=Qn(e),o=i.color,l=i.opacity;n.attrs.fill=o,l<1&&(n.attrs["fill-opacity"]=l)}return n}function pw(r){r.registerPainter("svg",cw)}var vw=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e){return zr(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var a=new xe,n=St("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);a.add(n),n.setStyle(e.lineStyle);var i=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),l=i==="none"?"circle":i,s=e.itemHeight*.8,u=St(l,(e.itemWidth-s)/2,(e.itemHeight-s)/2,s,s,e.itemStyle.fill);a.add(u),u.setStyle(e.itemStyle);var d=e.iconRotate==="inherit"?o:e.iconRotate||0;return u.rotation=d*Math.PI/180,u.setOrigin([e.itemWidth/2,e.itemHeight/2]),l.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),a},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Ct),ki=function(r){W(t,r);function t(e,a,n,i){var o=r.call(this)||this;return o.updateData(e,a,n,i),o}return t.prototype._createSymbol=function(e,a,n,i,o){this.removeAll();var l=St(e,-1,-1,2,2,null,o);l.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),l.drift=gw,this._symbolType=e,this.add(l)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){un(this.childAt(0))},t.prototype.downplay=function(){dn(this.childAt(0))},t.prototype.setZ=function(e,a){var n=this.childAt(0);n.zlevel=e,n.z=a},t.prototype.setDraggable=function(e,a){var n=this.childAt(0);n.draggable=e,n.cursor=!a&&e?"move":n.cursor},t.prototype.updateData=function(e,a,n,i){this.silent=!1;var o=e.getItemVisual(a,"symbol")||"circle",l=e.hostModel,s=t.getSymbolSize(e,a),u=o!==this._symbolType,d=i&&i.disableAnimation;if(u){var c=e.getItemVisual(a,"symbolKeepAspect");this._createSymbol(o,e,a,s,c)}else{var f=this.childAt(0);f.silent=!1;var p={scaleX:s[0]/2,scaleY:s[1]/2};d?f.attr(p):Ke(f,p,l,a),qa(f)}if(this._updateCommon(e,a,s,n,i),u){var f=this.childAt(0);if(!d){var p={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:f.style.opacity}};f.scaleX=f.scaleY=0,f.style.opacity=0,qt(f,p,l,a)}}d&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,a,n,i,o){var l=this.childAt(0),s=e.hostModel,u,d,c,f,p,g,v,y,_;if(i&&(u=i.emphasisItemStyle,d=i.blurItemStyle,c=i.selectItemStyle,f=i.focus,p=i.blurScope,v=i.labelStatesModels,y=i.hoverScale,_=i.cursorStyle,g=i.emphasisDisabled),!i||e.hasItemOption){var S=i&&i.itemModel?i.itemModel:e.getItemModel(a),w=S.getModel("emphasis");u=w.getModel("itemStyle").getItemStyle(),c=S.getModel(["select","itemStyle"]).getItemStyle(),d=S.getModel(["blur","itemStyle"]).getItemStyle(),f=w.get("focus"),p=w.get("blurScope"),g=w.get("disabled"),v=Ot(S),y=w.getShallow("scale"),_=S.getShallow("cursor")}var T=e.getItemVisual(a,"symbolRotate");l.attr("rotation",(T||0)*Math.PI/180||0);var C=wn(e.getItemVisual(a,"symbolOffset"),n);C&&(l.x=C[0],l.y=C[1]),_&&l.attr("cursor",_);var k=e.getItemVisual(a,"style"),A=k.fill;if(l instanceof Ta){var I=l.style;l.useStyle(be({image:I.image,x:I.x,y:I.y,width:I.width,height:I.height},k))}else l.__isEmptyBrush?l.useStyle(be({},k)):l.useStyle(k),l.style.decal=null,l.setColor(A,o&&o.symbolInnerColor),l.style.strokeNoScale=!0;var M=e.getItemVisual(a,"liftZ"),D=this._z2;M!=null?D==null&&(this._z2=l.z2,l.z2+=M):D!=null&&(l.z2=D,this._z2=null);var L=o&&o.useNameLabel;Zt(l,v,{labelFetcher:s,labelDataIndex:a,defaultText:E,inheritColor:A,defaultOpacity:k.opacity});function E(z){return L?e.getName(z):ei(e,z)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var R=l.ensureState("emphasis");R.style=u,l.ensureState("select").style=c,l.ensureState("blur").style=d;var V=y==null||y===!0?Math.max(1.1,3/this._sizeY):isFinite(y)&&y>0?+y:1;R.scaleX=this._sizeX*V,R.scaleY=this._sizeY*V,this.setSymbolScale(1),dt(this,f,p,g)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,a,n){var i=this.childAt(0),o=qe(this).dataIndex,l=n&&n.animation;if(this.silent=i.silent=!0,n&&n.fadeLabel){var s=i.getTextContent();s&&cn(s,{style:{opacity:0}},a,{dataIndex:o,removeOpt:l,cb:function(){i.removeTextContent()}})}else i.removeTextContent();cn(i,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:o,cb:e,removeOpt:l})},t.getSymbolSize=function(e,a){return xn(e.getItemVisual(a,"symbolSize"))},t}(xe);function gw(r,t){this.parent.drift(r,t)}function kl(r,t,e,a){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(a.isIgnore&&a.isIgnore(e))&&!(a.clipShape&&!a.clipShape.contain(t[0],t[1]))&&r.getItemVisual(e,"symbol")!=="none"}function $c(r){return r!=null&&!Nt(r)&&(r={isIgnore:r}),r||{}}function zc(r){var t=r.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:Ot(t),cursorStyle:t.get("cursor")}}var Ai=function(){function r(t){this.group=new xe,this._SymbolCtor=t||ki}return r.prototype.updateData=function(t,e){this._progressiveEls=null,e=$c(e);var a=this.group,n=t.hostModel,i=this._data,o=this._SymbolCtor,l=e.disableAnimation,s=zc(t),u={disableAnimation:l},d=e.getSymbolPoint||function(c){return t.getItemLayout(c)};i||a.removeAll(),t.diff(i).add(function(c){var f=d(c);if(kl(t,f,c,e)){var p=new o(t,c,s,u);p.setPosition(f),t.setItemGraphicEl(c,p),a.add(p)}}).update(function(c,f){var p=i.getItemGraphicEl(f),g=d(c);if(!kl(t,g,c,e)){a.remove(p);return}var v=t.getItemVisual(c,"symbol")||"circle",y=p&&p.getSymbolType&&p.getSymbolType();if(!p||y&&y!==v)a.remove(p),p=new o(t,c,s,u),p.setPosition(g);else{p.updateData(t,c,s,u);var _={x:g[0],y:g[1]};l?p.attr(_):Ke(p,_,n)}a.add(p),t.setItemGraphicEl(c,p)}).remove(function(c){var f=i.getItemGraphicEl(c);f&&f.fadeOut(function(){a.remove(f)},n)}).execute(),this._getSymbolPoint=d,this._data=t},r.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(a,n){var i=t._getSymbolPoint(n);a.setPosition(i),a.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=zc(t),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,e,a){this._progressiveEls=[],a=$c(a);function n(s){s.isGroup||(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=e.getItemLayout(i);if(kl(e,o,i,a)){var l=new this._SymbolCtor(e,i,this._seriesScope);l.traverse(n),l.setPosition(o),this.group.add(l),e.setItemGraphicEl(i,l),this._progressiveEls.push(l)}}},r.prototype.eachRendered=function(t){mi(this._progressiveEls||this.group,t)},r.prototype.remove=function(t){var e=this.group,a=this._data;a&&t?a.eachItemGraphicEl(function(n){n.fadeOut(function(){e.remove(n)},a.hostModel)}):e.removeAll()},r}();function zh(r,t,e){var a=r.getBaseAxis(),n=r.getOtherAxis(a),i=hw(n,e),o=a.dim,l=n.dim,s=t.mapDimension(l),u=t.mapDimension(o),d=l==="x"||l==="radius"?1:0,c=ne(r.dimensions,function(g){return t.mapDimension(g)}),f=!1,p=t.getCalculationInfo("stackResultDimension");return fn(t,c[0])&&(f=!0,c[0]=p),fn(t,c[1])&&(f=!0,c[1]=p),{dataDimsForPoint:c,valueStart:i,valueAxisDim:l,baseAxisDim:o,stacked:!!f,valueDim:s,baseDim:u,baseDataOffset:d,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function hw(r,t){var e=0,a=r.scale.getExtent();return t==="start"?e=a[0]:t==="end"?e=a[1]:aa(t)&&!isNaN(t)?e=t:a[0]>0?e=a[0]:a[1]<0&&(e=a[1]),e}function Bh(r,t,e,a){var n=NaN;r.stacked&&(n=e.get(e.getCalculationInfo("stackedOverDimension"),a)),isNaN(n)&&(n=r.valueStart);var i=r.baseDataOffset,o=[];return o[i]=e.get(r.baseDim,a),o[1-i]=n,t.dataToPoint(o)}function mw(r,t){var e=[];return t.diff(r).add(function(a){e.push({cmd:"+",idx:a})}).update(function(a,n){e.push({cmd:"=",idx:n,idx1:a})}).remove(function(a){e.push({cmd:"-",idx:a})}).execute(),e}function yw(r,t,e,a,n,i,o,l){for(var s=mw(r,t),u=[],d=[],c=[],f=[],p=[],g=[],v=[],y=zh(n,t,o),_=r.getLayout("points")||[],S=t.getLayout("points")||[],w=0;w<s.length;w++){var T=s[w],C=!0,k=void 0,A=void 0;switch(T.cmd){case"=":k=T.idx*2,A=T.idx1*2;var I=_[k],M=_[k+1],D=S[A],L=S[A+1];(isNaN(I)||isNaN(M))&&(I=D,M=L),u.push(I,M),d.push(D,L),c.push(e[k],e[k+1]),f.push(a[A],a[A+1]),v.push(t.getRawIndex(T.idx1));break;case"+":var E=T.idx,R=y.dataDimsForPoint,V=n.dataToPoint([t.get(R[0],E),t.get(R[1],E)]);A=E*2,u.push(V[0],V[1]),d.push(S[A],S[A+1]);var z=Bh(y,n,t,E);c.push(z[0],z[1]),f.push(a[A],a[A+1]),v.push(t.getRawIndex(E));break;case"-":C=!1}C&&(p.push(T),g.push(g.length))}g.sort(function(Ie,ke){return v[Ie]-v[ke]});for(var G=u.length,q=xr(G),Z=xr(G),H=xr(G),F=xr(G),re=[],w=0;w<g.length;w++){var _e=g[w],te=w*2,he=_e*2;q[te]=u[he],q[te+1]=u[he+1],Z[te]=d[he],Z[te+1]=d[he+1],H[te]=c[he],H[te+1]=c[he+1],F[te]=f[he],F[te+1]=f[he+1],re[w]=p[_e]}return{current:q,next:Z,stackedOnCurrent:H,stackedOnNext:F,status:re}}var Ha=Math.min,Wa=Math.max;function kr(r,t){return isNaN(r)||isNaN(t)}function zs(r,t,e,a,n,i,o,l,s){for(var u,d,c,f,p,g,v=e,y=0;y<a;y++){var _=t[v*2],S=t[v*2+1];if(v>=n||v<0)break;if(kr(_,S)){if(s){v+=i;continue}break}if(v===e)r[i>0?"moveTo":"lineTo"](_,S),c=_,f=S;else{var w=_-u,T=S-d;if(w*w+T*T<.5){v+=i;continue}if(o>0){for(var C=v+i,k=t[C*2],A=t[C*2+1];k===_&&A===S&&y<a;)y++,C+=i,v+=i,k=t[C*2],A=t[C*2+1],_=t[v*2],S=t[v*2+1],w=_-u,T=S-d;var I=y+1;if(s)for(;kr(k,A)&&I<a;)I++,C+=i,k=t[C*2],A=t[C*2+1];var M=.5,D=0,L=0,E=void 0,R=void 0;if(I>=a||kr(k,A))p=_,g=S;else{D=k-u,L=A-d;var V=_-u,z=k-_,G=S-d,q=A-S,Z=void 0,H=void 0;if(l==="x"){Z=Math.abs(V),H=Math.abs(z);var F=D>0?1:-1;p=_-F*Z*o,g=S,E=_+F*H*o,R=S}else if(l==="y"){Z=Math.abs(G),H=Math.abs(q);var re=L>0?1:-1;p=_,g=S-re*Z*o,E=_,R=S+re*H*o}else Z=Math.sqrt(V*V+G*G),H=Math.sqrt(z*z+q*q),M=H/(H+Z),p=_-D*o*(1-M),g=S-L*o*(1-M),E=_+D*o*M,R=S+L*o*M,E=Ha(E,Wa(k,_)),R=Ha(R,Wa(A,S)),E=Wa(E,Ha(k,_)),R=Wa(R,Ha(A,S)),D=E-_,L=R-S,p=_-D*Z/H,g=S-L*Z/H,p=Ha(p,Wa(u,_)),g=Ha(g,Wa(d,S)),p=Wa(p,Ha(u,_)),g=Wa(g,Ha(d,S)),D=_-p,L=S-g,E=_+D*H/Z,R=S+L*H/Z}r.bezierCurveTo(c,f,p,g,_,S),c=E,f=R}else r.lineTo(_,S)}u=_,d=S,v+=i}return y}var qh=function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r}(),bw=function(r){W(t,r);function t(e){var a=r.call(this,e)||this;return a.type="ec-polyline",a}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new qh},t.prototype.buildPath=function(e,a){var n=a.points,i=0,o=n.length/2;if(a.connectNulls){for(;o>0&&kr(n[o*2-2],n[o*2-1]);o--);for(;i<o&&kr(n[i*2],n[i*2+1]);i++);}for(;i<o;)i+=zs(e,n,i,o,o,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},t.prototype.getPointOn=function(e,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,i=n.data,o=_u.CMD,l,s,u=a==="x",d=[],c=0;c<i.length;){var f=i[c++],p=void 0,g=void 0,v=void 0,y=void 0,_=void 0,S=void 0,w=void 0;switch(f){case o.M:l=i[c++],s=i[c++];break;case o.L:if(p=i[c++],g=i[c++],w=u?(e-l)/(p-l):(e-s)/(g-s),w<=1&&w>=0){var T=u?(g-s)*w+s:(p-l)*w+l;return u?[e,T]:[T,e]}l=p,s=g;break;case o.C:p=i[c++],g=i[c++],v=i[c++],y=i[c++],_=i[c++],S=i[c++];var C=u?Fd(l,p,v,_,e,d):Fd(s,g,y,S,e,d);if(C>0)for(var k=0;k<C;k++){var A=d[k];if(A<=1&&A>=0){var T=u?Ud(s,g,y,S,A):Ud(l,p,v,_,A);return u?[e,T]:[T,e]}}l=_,s=S;break}}},t}(Tt),_w=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(qh),Gh=function(r){W(t,r);function t(e){var a=r.call(this,e)||this;return a.type="ec-polygon",a}return t.prototype.getDefaultShape=function(){return new _w},t.prototype.buildPath=function(e,a){var n=a.points,i=a.stackedOnPoints,o=0,l=n.length/2,s=a.smoothMonotone;if(a.connectNulls){for(;l>0&&kr(n[l*2-2],n[l*2-1]);l--);for(;o<l&&kr(n[o*2],n[o*2+1]);o++);}for(;o<l;){var u=zs(e,n,o,l,l,1,a.smooth,s,a.connectNulls);zs(e,i,o+u-1,u,l,-1,a.stackedOnSmooth,s,a.connectNulls),o+=u+1,e.closePath()}},t}(Tt);function Bc(r,t){if(r.length===t.length){for(var e=0;e<r.length;e++)if(r[e]!==t[e])return;return!0}}function qc(r){for(var t=1/0,e=1/0,a=-1/0,n=-1/0,i=0;i<r.length;){var o=r[i++],l=r[i++];isNaN(o)||(t=Math.min(o,t),a=Math.max(o,a)),isNaN(l)||(e=Math.min(l,e),n=Math.max(l,n))}return[[t,e],[a,n]]}function Gc(r,t){var e=qc(r),a=e[0],n=e[1],i=qc(t),o=i[0],l=i[1];return Math.max(Math.abs(a[0]-o[0]),Math.abs(a[1]-o[1]),Math.abs(n[0]-l[0]),Math.abs(n[1]-l[1]))}function Fc(r){return aa(r)?r:r?.5:0}function Sw(r,t,e){if(!e.valueDim)return[];for(var a=t.count(),n=xr(a*2),i=0;i<a;i++){var o=Bh(e,r,t,i);n[i*2]=o[0],n[i*2+1]=o[1]}return n}function Ya(r,t,e,a){var n=t.getBaseAxis(),i=n.dim==="x"||n.dim==="radius"?0:1,o=[],l=0,s=[],u=[],d=[],c=[];if(a){for(l=0;l<r.length;l+=2)!isNaN(r[l])&&!isNaN(r[l+1])&&c.push(r[l],r[l+1]);r=c}for(l=0;l<r.length-2;l+=2)switch(d[0]=r[l+2],d[1]=r[l+3],u[0]=r[l],u[1]=r[l+1],o.push(u[0],u[1]),e){case"end":s[i]=d[i],s[1-i]=u[1-i],o.push(s[0],s[1]);break;case"middle":var f=(u[i]+d[i])/2,p=[];s[i]=p[i]=f,s[1-i]=u[1-i],p[1-i]=d[1-i],o.push(s[0],s[1]),o.push(p[0],p[1]);break;default:s[i]=u[i],s[1-i]=d[1-i],o.push(s[0],s[1])}return o.push(r[l++],r[l++]),o}function ww(r,t){var e=[],a=r.length,n,i;function o(d,c,f){var p=d.coord,g=(f-p)/(c.coord-p),v=n1(g,[d.color,c.color]);return{coord:f,color:v}}for(var l=0;l<a;l++){var s=r[l],u=s.coord;if(u<0)n=s;else if(u>t){i?e.push(o(i,s,t)):n&&e.push(o(n,s,0),o(n,s,t));break}else n&&(e.push(o(n,s,0)),n=null),e.push(s),i=s}return e}function xw(r,t,e){var a=r.getVisual("visualMeta");if(!(!a||!a.length||!r.count())&&t.type==="cartesian2d"){for(var n,i,o=a.length-1;o>=0;o--){var l=r.getDimensionInfo(a[o].dimension);if(n=l&&l.coordDim,n==="x"||n==="y"){i=a[o];break}}if(i){var s=t.getAxis(n),u=ne(i.stops,function(w){return{coord:s.toGlobalCoord(s.dataToCoord(w.value)),color:w.color}}),d=u.length,c=i.outerColors.slice();d&&u[0].coord>u[d-1].coord&&(u.reverse(),c.reverse());var f=ww(u,n==="x"?e.getWidth():e.getHeight()),p=f.length;if(!p&&d)return u[0].coord<0?c[1]?c[1]:u[d-1].color:c[0]?c[0]:u[0].color;var g=10,v=f[0].coord-g,y=f[p-1].coord+g,_=y-v;if(_<.001)return"transparent";O(f,function(w){w.offset=(w.coord-v)/_}),f.push({offset:p?f[p-1].offset:.5,color:c[1]||"transparent"}),f.unshift({offset:p?f[0].offset:.5,color:c[0]||"transparent"});var S=new Oo(0,0,0,0,f,!0);return S[n]=v,S[n+"2"]=y,S}}}function Tw(r,t,e){var a=r.get("showAllSymbol"),n=a==="auto";if(!(a&&!n)){var i=e.getAxesByScale("ordinal")[0];if(i&&!(n&&Cw(i,t))){var o=t.mapDimension(i.dim),l={};return O(i.getViewLabels(),function(s){var u=i.scale.getRawOrdinalNumber(s.tickValue);l[u]=1}),function(s){return!l.hasOwnProperty(t.get(o,s))}}}}function Cw(r,t){var e=r.getExtent(),a=Math.abs(e[1]-e[0])/r.scale.count();isNaN(a)&&(a=0);for(var n=t.count(),i=Math.max(1,Math.round(n/5)),o=0;o<n;o+=i)if(ki.getSymbolSize(t,o)[r.isHorizontal()?1:0]*1.5>a)return!1;return!0}function kw(r,t){return isNaN(r)||isNaN(t)}function Aw(r){for(var t=r.length/2;t>0&&kw(r[t*2-2],r[t*2-1]);t--);return t-1}function Uc(r,t){return[r[t*2],r[t*2+1]]}function Iw(r,t,e){for(var a=r.length/2,n=e==="x"?0:1,i,o,l=0,s=-1,u=0;u<a;u++)if(o=r[u*2+n],!(isNaN(o)||isNaN(r[u*2+1-n]))){if(u===0){i=o;continue}if(i<=t&&o>=t||i>=t&&o<=t){s=u;break}l=u,i=o}return{range:[l,s],t:(t-i)/(o-i)}}function Fh(r){if(r.get(["endLabel","show"]))return!0;for(var t=0;t<ti.length;t++)if(r.get([ti[t],"endLabel","show"]))return!0;return!1}function Al(r,t,e,a){if(yi(t,"cartesian2d")){var n=a.getModel("endLabel"),i=n.get("valueAnimation"),o=a.getData(),l={lastFrameIndex:0},s=Fh(a)?function(p,g){r._endLabelOnDuring(p,g,o,l,i,n,t)}:null,u=t.getBaseAxis().isHorizontal(),d=a1(t,e,a,function(){var p=r._endLabel;p&&e&&l.originalX!=null&&p.attr({x:l.originalX,y:l.originalY})},s);if(!a.get("clip",!0)){var c=d.shape,f=Math.max(c.width,c.height);u?(c.y-=f,c.height+=f*2):(c.x-=f,c.width+=f*2)}return s&&s(1,d),d}else return r1(t,e,a)}function Dw(r,t){var e=t.getBaseAxis(),a=e.isHorizontal(),n=e.inverse,i=a?n?"right":"left":"center",o=a?"middle":n?"top":"bottom";return{normal:{align:r.get("align")||i,verticalAlign:r.get("verticalAlign")||o}}}var Mw=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){var e=new xe,a=new Ai;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=e},t.prototype.render=function(e,a,n){var i=this,o=e.coordinateSystem,l=this.group,s=e.getData(),u=e.getModel("lineStyle"),d=e.getModel("areaStyle"),c=s.getLayout("points")||[],f=o.type==="polar",p=this._coordSys,g=this._symbolDraw,v=this._polyline,y=this._polygon,_=this._lineGroup,S=!a.ssr&&e.get("animation"),w=!d.isEmpty(),T=d.get("origin"),C=zh(o,s,T),k=w&&Sw(o,s,C),A=e.get("showSymbol"),I=e.get("connectNulls"),M=A&&!f&&Tw(e,s,o),D=this._data;D&&D.eachItemGraphicEl(function(ke,Ee){ke.__temp&&(l.remove(ke),D.setItemGraphicEl(Ee,null))}),A||g.remove(),l.add(_);var L=f?!1:e.get("step"),E;o&&o.getArea&&e.get("clip",!0)&&(E=o.getArea(),E.width!=null?(E.x-=.1,E.y-=.1,E.width+=.2,E.height+=.2):E.r0&&(E.r0-=.5,E.r+=.5)),this._clipShapeForSymbol=E;var R=xw(s,o,n)||s.getVisual("style")[s.getVisual("drawType")];if(!(v&&p.type===o.type&&L===this._step))A&&g.updateData(s,{isIgnore:M,clipShape:E,disableAnimation:!0,getSymbolPoint:function(ke){return[c[ke*2],c[ke*2+1]]}}),S&&this._initSymbolLabelAnimation(s,o,E),L&&(c=Ya(c,o,L,I),k&&(k=Ya(k,o,L,I))),v=this._newPolyline(c),w?y=this._newPolygon(c,k):y&&(_.remove(y),y=this._polygon=null),f||this._initOrUpdateEndLabel(e,o,Hd(R)),_.setClipPath(Al(this,o,!0,e));else{w&&!y?y=this._newPolygon(c,k):y&&!w&&(_.remove(y),y=this._polygon=null),f||this._initOrUpdateEndLabel(e,o,Hd(R));var V=_.getClipPath();if(V){var z=Al(this,o,!1,e);qt(V,{shape:z.shape},e)}else _.setClipPath(Al(this,o,!0,e));A&&g.updateData(s,{isIgnore:M,clipShape:E,disableAnimation:!0,getSymbolPoint:function(ke){return[c[ke*2],c[ke*2+1]]}}),(!Bc(this._stackedOnPoints,k)||!Bc(this._points,c))&&(S?this._doUpdateAnimation(s,k,o,n,L,T,I):(L&&(c=Ya(c,o,L,I),k&&(k=Ya(k,o,L,I))),v.setShape({points:c}),y&&y.setShape({points:c,stackedOnPoints:k})))}var G=e.getModel("emphasis"),q=G.get("focus"),Z=G.get("blurScope"),H=G.get("disabled");if(v.useStyle(Ne(u.getLineStyle(),{fill:"none",stroke:R,lineJoin:"bevel"})),Xt(v,e,"lineStyle"),v.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var F=v.getState("emphasis").style;F.lineWidth=+v.style.lineWidth+1}qe(v).seriesIndex=e.seriesIndex,dt(v,q,Z,H);var re=Fc(e.get("smooth")),_e=e.get("smoothMonotone");if(v.setShape({smooth:re,smoothMonotone:_e,connectNulls:I}),y){var te=s.getCalculationInfo("stackedOnSeries"),he=0;y.useStyle(Ne(d.getAreaStyle(),{fill:R,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),te&&(he=Fc(te.get("smooth"))),y.setShape({smooth:re,stackedOnSmooth:he,smoothMonotone:_e,connectNulls:I}),Xt(y,e,"areaStyle"),qe(y).seriesIndex=e.seriesIndex,dt(y,q,Z,H)}var Ie=function(ke){i._changePolyState(ke)};s.eachItemGraphicEl(function(ke){ke&&(ke.onHoverStateChange=Ie)}),this._polyline.onHoverStateChange=Ie,this._data=s,this._coordSys=o,this._stackedOnPoints=k,this._points=c,this._step=L,this._valueOrigin=T,e.get("triggerLineEvent")&&(this.packEventData(e,v),y&&this.packEventData(e,y))},t.prototype.packEventData=function(e,a){qe(a).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,a,n,i){var o=e.getData(),l=Wd(o,i);if(this._changePolyState("emphasis"),!(l instanceof Array)&&l!=null&&l>=0){var s=o.getLayout("points"),u=o.getItemGraphicEl(l);if(!u){var d=s[l*2],c=s[l*2+1];if(isNaN(d)||isNaN(c)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(d,c))return;var f=e.get("zlevel")||0,p=e.get("z")||0;u=new ki(o,l),u.x=d,u.y=c,u.setZ(f,p);var g=u.getSymbolPath().getTextContent();g&&(g.zlevel=f,g.z=p,g.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(l,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else ut.prototype.highlight.call(this,e,a,n,i)},t.prototype.downplay=function(e,a,n,i){var o=e.getData(),l=Wd(o,i);if(this._changePolyState("normal"),l!=null&&l>=0){var s=o.getItemGraphicEl(l);s&&(s.__temp?(o.setItemGraphicEl(l,null),this.group.remove(s)):s.downplay())}else ut.prototype.downplay.call(this,e,a,n,i)},t.prototype._changePolyState=function(e){var a=this._polygon;io(this._polyline,e),a&&io(a,e)},t.prototype._newPolyline=function(e){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new bw({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},t.prototype._newPolygon=function(e,a){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Gh({shape:{points:e,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(e,a,n){var i,o,l=a.getBaseAxis(),s=l.inverse;a.type==="cartesian2d"?(i=l.isHorizontal(),o=!1):a.type==="polar"&&(i=l.dim==="angle",o=!0);var u=e.hostModel,d=u.get("animationDuration");Be(d)&&(d=d(null));var c=u.get("animationDelay")||0,f=Be(c)?c(null):c;e.eachItemGraphicEl(function(p,g){var v=p;if(v){var y=[p.x,p.y],_=void 0,S=void 0,w=void 0;if(n)if(o){var T=n,C=a.pointToCoord(y);i?(_=T.startAngle,S=T.endAngle,w=-C[1]/180*Math.PI):(_=T.r0,S=T.r,w=C[0])}else{var k=n;i?(_=k.x,S=k.x+k.width,w=p.x):(_=k.y+k.height,S=k.y,w=p.y)}var A=S===_?0:(w-_)/(S-_);s&&(A=1-A);var I=Be(c)?c(g):d*A+f,M=v.getSymbolPath(),D=M.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:I}),D&&D.animateFrom({style:{opacity:0}},{duration:300,delay:I}),M.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,a,n){var i=e.getModel("endLabel");if(Fh(e)){var o=e.getData(),l=this._polyline,s=o.getLayout("points");if(!s){l.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Xe({z2:200}),u.ignoreClip=!0,l.setTextContent(this._endLabel),l.disableLabelAnimation=!0);var d=Aw(s);d>=0&&(Zt(l,Ot(e,"endLabel"),{inheritColor:n,labelFetcher:e,labelDataIndex:d,defaultText:function(c,f,p){return p!=null?e1(o,p):ei(o,c)},enableTextSetter:!0},Dw(i,a)),l.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,a,n,i,o,l,s){var u=this._endLabel,d=this._polyline;if(u){e<1&&i.originalX==null&&(i.originalX=u.x,i.originalY=u.y);var c=n.getLayout("points"),f=n.hostModel,p=f.get("connectNulls"),g=l.get("precision"),v=l.get("distance")||0,y=s.getBaseAxis(),_=y.isHorizontal(),S=y.inverse,w=a.shape,T=S?_?w.x:w.y+w.height:_?w.x+w.width:w.y,C=(_?v:0)*(S?-1:1),k=(_?0:-v)*(S?-1:1),A=_?"x":"y",I=Iw(c,T,A),M=I.range,D=M[1]-M[0],L=void 0;if(D>=1){if(D>1&&!p){var E=Uc(c,M[0]);u.attr({x:E[0]+C,y:E[1]+k}),o&&(L=f.getRawValue(M[0]))}else{var E=d.getPointOn(T,A);E&&u.attr({x:E[0]+C,y:E[1]+k});var R=f.getRawValue(M[0]),V=f.getRawValue(M[1]);o&&(L=t1(n,g,R,V,I.t))}i.lastFrameIndex=M[0]}else{var z=e===1||i.lastFrameIndex>0?M[0]:0,E=Uc(c,z);o&&(L=f.getRawValue(z)),u.attr({x:E[0]+C,y:E[1]+k})}if(o){var G=Dg(u);typeof G.setLabelText=="function"&&G.setLabelText(L)}}},t.prototype._doUpdateAnimation=function(e,a,n,i,o,l,s){var u=this._polyline,d=this._polygon,c=e.hostModel,f=yw(this._data,e,this._stackedOnPoints,a,this._coordSys,n,this._valueOrigin),p=f.current,g=f.stackedOnCurrent,v=f.next,y=f.stackedOnNext;if(o&&(p=Ya(f.current,n,o,s),g=Ya(f.stackedOnCurrent,n,o,s),v=Ya(f.next,n,o,s),y=Ya(f.stackedOnNext,n,o,s)),Gc(p,v)>3e3||d&&Gc(g,y)>3e3){u.stopAnimation(),u.setShape({points:v}),d&&(d.stopAnimation(),d.setShape({points:v,stackedOnPoints:y}));return}u.shape.__points=f.current,u.shape.points=p;var _={shape:{points:v}};f.current!==p&&(_.shape.__points=f.next),u.stopAnimation(),Ke(u,_,c),d&&(d.setShape({points:p,stackedOnPoints:g}),d.stopAnimation(),Ke(d,{shape:{stackedOnPoints:y}},c),u.shape.points!==d.shape.points&&(d.shape.points=u.shape.points));for(var S=[],w=f.status,T=0;T<w.length;T++){var C=w[T].cmd;if(C==="="){var k=e.getItemGraphicEl(w[T].idx1);k&&S.push({el:k,ptIdx:T})}}u.animators&&u.animators.length&&u.animators[0].during(function(){d&&d.dirtyShape();for(var A=u.shape.__points,I=0;I<S.length;I++){var M=S[I].el,D=S[I].ptIdx*2;M.x=A[D],M.y=A[D+1],M.markRedraw()}})},t.prototype.remove=function(e){var a=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(i,o){i.__temp&&(a.remove(i),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ut);function Ii(r,t){return{seriesType:r,plan:$o(),reset:function(e){var a=e.getData(),n=e.coordinateSystem,i=e.pipelineContext,o=t||i.large;if(n){var l=ne(n.dimensions,function(p){return a.mapDimension(p)}).slice(0,2),s=l.length,u=a.getCalculationInfo("stackResultDimension");fn(a,l[0])&&(l[0]=u),fn(a,l[1])&&(l[1]=u);var d=a.getStore(),c=a.getDimensionIndex(l[0]),f=a.getDimensionIndex(l[1]);return s&&{progress:function(p,g){for(var v=p.end-p.start,y=o&&xr(v*s),_=[],S=[],w=p.start,T=0;w<p.end;w++){var C=void 0;if(s===1){var k=d.get(c,w);C=n.dataToPoint(k,null,S)}else _[0]=d.get(c,w),_[1]=d.get(f,w),C=n.dataToPoint(_,null,S);o?(y[T++]=C[0],y[T++]=C[1]):g.setItemLayout(w,C.slice())}o&&g.setLayout("points",y)}}}}}}function Pw(r){r.registerChartView(Mw),r.registerSeriesModel(vw),r.registerLayout(Ii("line",!0)),r.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),a=t.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",a)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,i1("line"))}var Lw=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,a){return zr(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,a,n){return n.point(a.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Ct),Uh=4,Vw=function(){function r(){}return r}(),Rw=function(r){W(t,r);function t(e){var a=r.call(this,e)||this;return a._off=0,a.hoverDataIdx=-1,a}return t.prototype.getDefaultShape=function(){return new Vw},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,a){var n=a.points,i=a.size,o=this.symbolProxy,l=o.shape,s=e.getContext?e.getContext():e,u=s&&i[0]<Uh,d=this.softClipShape,c;if(u){this._ctx=s;return}for(this._ctx=null,c=this._off;c<n.length;){var f=n[c++],p=n[c++];isNaN(f)||isNaN(p)||d&&!d.contain(f,p)||(l.x=f-i[0]/2,l.y=p-i[1]/2,l.width=i[0],l.height=i[1],o.buildPath(e,l,!0))}this.incremental&&(this._off=c,this.notClear=!0)},t.prototype.afterBrush=function(){var e=this.shape,a=e.points,n=e.size,i=this._ctx,o=this.softClipShape,l;if(i){for(l=this._off;l<a.length;){var s=a[l++],u=a[l++];isNaN(s)||isNaN(u)||o&&!o.contain(s,u)||i.fillRect(s-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=l,this.notClear=!0)}},t.prototype.findDataIndex=function(e,a){for(var n=this.shape,i=n.points,o=n.size,l=Math.max(o[0],4),s=Math.max(o[1],4),u=i.length/2-1;u>=0;u--){var d=u*2,c=i[d]-l/2,f=i[d+1]-s/2;if(e>=c&&a>=f&&e<=c+l&&a<=f+s)return u}return-1},t.prototype.contain=function(e,a){var n=this.transformCoordToLocal(e,a),i=this.getBoundingRect();if(e=n[0],a=n[1],i.contain(e,a)){var o=this.hoverDataIdx=this.findDataIndex(e,a);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var a=this.shape,n=a.points,i=a.size,o=i[0],l=i[1],s=1/0,u=1/0,d=-1/0,c=-1/0,f=0;f<n.length;){var p=n[f++],g=n[f++];s=Math.min(p,s),d=Math.max(p,d),u=Math.min(g,u),c=Math.max(g,c)}e=this._rect=new st(s-o/2,u-l/2,d-s+o,c-u+l)}return e},t}(Tt),Ew=function(){function r(){this.group=new xe}return r.prototype.updateData=function(t,e){this._clear();var a=this._create();a.setShape({points:t.getLayout("points")}),this._setCommon(a,t,e)},r.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var n=(a.endIndex-a.startIndex)*2,i=a.startIndex*4*2;e=new Float32Array(e.buffer,i,n)}a.setShape("points",e),a.reset()})},r.prototype.incrementalPrepareUpdate=function(t){this._clear()},r.prototype.incrementalUpdate=function(t,e,a){var n=this._newAdded[0],i=e.getLayout("points"),o=n&&n.shape.points;if(o&&o.length<2e4){var l=o.length,s=new Float32Array(l+i.length);s.set(o),s.set(i,l),n.endIndex=t.end,n.setShape({points:s})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:i}),this._setCommon(u,e,a)}},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new Rw({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},r.prototype._setCommon=function(t,e,a){var n=e.hostModel;a=a||{};var i=e.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.softClipShape=a.clipShape||null,t.symbolProxy=St(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<Uh;t.useStyle(n.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var l=e.getVisual("style"),s=l&&l.fill;s&&t.setColor(s);var u=qe(t);u.seriesIndex=n.seriesIndex,t.on("mousemove",function(d){u.dataIndex=null;var c=t.hoverDataIdx;c>=0&&(u.dataIndex=c+(t.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),Nw=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=e.getData(),o=this._updateSymbolDraw(i,e);o.updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,a,n){var i=e.getData(),o=this._updateSymbolDraw(i,e);o.incrementalPrepareUpdate(i),this._finished=!1},t.prototype.incrementalRender=function(e,a,n){this._symbolDraw.incrementalUpdate(e,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=e.end===a.getData().count()},t.prototype.updateTransform=function(e,a,n){var i=e.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var o=Ii("").reset(e,a,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(e.get("clip",!0)){var a=e.coordinateSystem;return a&&a.getArea&&a.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,a){var n=this._symbolDraw,i=a.pipelineContext,o=i.large;return(!n||o!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=o?new Ew:new Ai,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(e,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(ut);function Ow(r){De(o1),r.registerSeriesModel(Lw),r.registerChartView(Nw),r.registerLayout(Ii("scatter"))}function $w(r){r.eachSeriesByType("radar",function(t){var e=t.getData(),a=[],n=t.coordinateSystem;if(n){var i=n.getIndicatorAxes();O(i,function(o,l){e.each(e.mapDimension(i[l].dim),function(s,u){a[u]=a[u]||[];var d=n.dataToPoint(s,l);a[u][l]=Hc(d)?d:Wc(n)})}),e.each(function(o){var l=l1(a[o],function(s){return Hc(s)})||Wc(n);a[o].push(l.slice()),e.setItemLayout(o,a[o])})}})}function Hc(r){return!isNaN(r[0])&&!isNaN(r[1])}function Wc(r){return[r.cx,r.cy]}function zw(r){var t=r.polar;if(t){ge(t)||(t=[t]);var e=[];O(t,function(a,n){a.indicator?(a.type&&!a.shape&&(a.shape=a.type),r.radar=r.radar||[],ge(r.radar)||(r.radar=[r.radar]),r.radar.push(a)):e.push(a)}),r.polar=e}O(r.series,function(a){a&&a.type==="radar"&&a.polarIndex&&(a.radarIndex=a.polarIndex)})}var Bw=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=e.coordinateSystem,o=this.group,l=e.getData(),s=this._data;function u(f,p){var g=f.getItemVisual(p,"symbol")||"circle";if(g!=="none"){var v=xn(f.getItemVisual(p,"symbolSize")),y=St(g,-1,-1,2,2),_=f.getItemVisual(p,"symbolRotate")||0;return y.attr({style:{strokeNoScale:!0},z2:100,scaleX:v[0]/2,scaleY:v[1]/2,rotation:_*Math.PI/180||0}),y}}function d(f,p,g,v,y,_){g.removeAll();for(var S=0;S<p.length-1;S++){var w=u(v,y);w&&(w.__dimIdx=S,f[S]?(w.setPosition(f[S]),Tn[_?"initProps":"updateProps"](w,{x:p[S][0],y:p[S][1]},e,y)):w.setPosition(p[S]),g.add(w))}}function c(f){return ne(f,function(p){return[i.cx,i.cy]})}l.diff(s).add(function(f){var p=l.getItemLayout(f);if(p){var g=new ya,v=new Va,y={shape:{points:p}};g.shape.points=c(p),v.shape.points=c(p),qt(g,y,e,f),qt(v,y,e,f);var _=new xe,S=new xe;_.add(v),_.add(g),_.add(S),d(v.shape.points,p,S,l,f,!0),l.setItemGraphicEl(f,_)}}).update(function(f,p){var g=s.getItemGraphicEl(p),v=g.childAt(0),y=g.childAt(1),_=g.childAt(2),S={shape:{points:l.getItemLayout(f)}};S.shape.points&&(d(v.shape.points,S.shape.points,_,l,f,!1),qa(y),qa(v),Ke(v,S,e),Ke(y,S,e),l.setItemGraphicEl(f,g))}).remove(function(f){o.remove(s.getItemGraphicEl(f))}).execute(),l.eachItemGraphicEl(function(f,p){var g=l.getItemModel(p),v=f.childAt(0),y=f.childAt(1),_=f.childAt(2),S=l.getItemVisual(p,"style"),w=S.fill;o.add(f),v.useStyle(Ne(g.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:w})),Xt(v,g,"lineStyle"),Xt(y,g,"areaStyle");var T=g.getModel("areaStyle"),C=T.isEmpty()&&T.parentModel.isEmpty();y.ignore=C,O(["emphasis","select","blur"],function(I){var M=g.getModel([I,"areaStyle"]),D=M.isEmpty()&&M.parentModel.isEmpty();y.ensureState(I).ignore=D&&C}),y.useStyle(Ne(T.getAreaStyle(),{fill:w,opacity:.7,decal:S.decal}));var k=g.getModel("emphasis"),A=k.getModel("itemStyle").getItemStyle();_.eachChild(function(I){if(I instanceof Ta){var M=I.style;I.useStyle(be({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},S))}else I.useStyle(S),I.setColor(w),I.style.strokeNoScale=!0;var D=I.ensureState("emphasis");D.style=Fe(A);var L=l.getStore().get(l.getDimensionIndex(I.__dimIdx),p);(L==null||isNaN(L))&&(L=""),Zt(I,Ot(g),{labelFetcher:l.hostModel,labelDataIndex:p,labelDimIndex:I.__dimIdx,defaultText:L,inheritColor:w,defaultOpacity:S.opacity})}),dt(f,k.get("focus"),k.get("blurScope"),k.get("disabled"))}),this._data=l},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(ut),qw=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new zo(ye(this.getData,this),ye(this.getRawData,this))},t.prototype.getInitialData=function(e,a){return bi(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,a,n){var i=this.getData(),o=this.coordinateSystem,l=o.getIndicatorAxes(),s=this.getData().getName(e),u=s===""?this.name:s,d=s1(this,e);return ra("section",{header:u,sortBlocks:!0,blocks:ne(l,function(c){var f=i.get(i.mapDimension(c.dim),e);return ra("nameValue",{markerType:"subItem",markerColor:d,name:c.name,value:f,sortParam:f})})})},t.prototype.getTooltipPosition=function(e){if(e!=null){for(var a=this.getData(),n=this.coordinateSystem,i=a.getValues(ne(n.dimensions,function(u){return a.mapDimension(u)}),e),o=0,l=i.length;o<l;o++)if(!isNaN(i[o])){var s=n.getIndicatorAxes();return n.coordToPoint(s[o].dataToCoord(i[o]),o)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(Ct),Dn=u1.value;function Ni(r,t){return Ne({show:t},r)}var Gw=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),a=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),o=this.get("axisTick"),l=this.get("axisLabel"),s=this.get("axisName"),u=this.get(["axisName","show"]),d=this.get(["axisName","formatter"]),c=this.get("axisNameGap"),f=this.get("triggerEvent"),p=ne(this.get("indicator")||[],function(g){g.max!=null&&g.max>0&&!g.min?g.min=0:g.min!=null&&g.min<0&&!g.max&&(g.max=0);var v=s;g.color!=null&&(v=Ne({color:g.color},s));var y=rt(Fe(g),{boundaryGap:e,splitNumber:a,scale:n,axisLine:i,axisTick:o,axisLabel:l,name:g.text,showName:u,nameLocation:"end",nameGap:c,nameTextStyle:v,triggerEvent:f},!1);if(Re(d)){var _=y.name;y.name=d.replace("{value}",_??"")}else Be(d)&&(y.name=d(y.name,y));var S=new na(y,null,this.ecModel);return Ca(S,Bo.prototype),S.mainType="radar",S.componentIndex=this.componentIndex,S},this);this._indicatorModels=p},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:rt({lineStyle:{color:"#bbb"}},Dn.axisLine),axisLabel:Ni(Dn.axisLabel,!1),axisTick:Ni(Dn.axisTick,!1),splitLine:Ni(Dn.splitLine,!0),splitArea:Ni(Dn.splitArea,!0),indicator:[]},t}(zt),Fw=["axisLine","axisTickLabel","axisName"],Uw=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=this.group;i.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e){var a=e.coordinateSystem,n=a.getIndicatorAxes(),i=ne(n,function(o){var l=o.model.get("showName")?o.name:"",s=new Dr(o.model,{axisName:l,position:[a.cx,a.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return s});O(i,function(o){O(Fw,o.add,o),this.group.add(o.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(e){var a=e.coordinateSystem,n=a.getIndicatorAxes();if(!n.length)return;var i=e.get("shape"),o=e.getModel("splitLine"),l=e.getModel("splitArea"),s=o.getModel("lineStyle"),u=l.getModel("areaStyle"),d=o.get("show"),c=l.get("show"),f=s.get("color"),p=u.get("color"),g=ge(f)?f:[f],v=ge(p)?p:[p],y=[],_=[];function S(z,G,q){var Z=q%G.length;return z[Z]=z[Z]||[],Z}if(i==="circle")for(var w=n[0].getTicksCoords(),T=a.cx,C=a.cy,k=0;k<w.length;k++){if(d){var A=S(y,g,k);y[A].push(new _i({shape:{cx:T,cy:C,r:w[k].coord}}))}if(c&&k<w.length-1){var A=S(_,v,k);_[A].push(new Ng({shape:{cx:T,cy:C,r0:w[k].coord,r:w[k+1].coord}}))}}else for(var I,M=ne(n,function(z,G){var q=z.getTicksCoords();return I=I==null?q.length-1:Math.min(q.length-1,I),ne(q,function(Z){return a.coordToPoint(Z.coord,G)})}),D=[],k=0;k<=I;k++){for(var L=[],E=0;E<n.length;E++)L.push(M[E][k]);if(L[0]&&L.push(L[0].slice()),d){var A=S(y,g,k);y[A].push(new Va({shape:{points:L}}))}if(c&&D){var A=S(_,v,k-1);_[A].push(new ya({shape:{points:L.concat(D)}}))}D=L.slice().reverse()}var R=s.getLineStyle(),V=u.getAreaStyle();O(_,function(z,G){this.group.add(wa(z,{style:Ne({stroke:"none",fill:v[G%v.length]},V),silent:!0}))},this),O(y,function(z,G){this.group.add(wa(z,{style:Ne({fill:"none",stroke:g[G%g.length]},R),silent:!0}))},this)},t.type="radar",t}(Ut),Hw=function(r){W(t,r);function t(e,a,n){var i=r.call(this,e,a,n)||this;return i.type="value",i.angle=0,i.name="",i}return t}(Ra),Ww=function(){function r(t,e,a){this.dimensions=[],this._model=t,this._indicatorAxes=ne(t.getIndicatorModels(),function(n,i){var o="indicator_"+i,l=new Hw(o,new Ds);return l.name=n.get("name"),l.model=n,n.axis=l,this.dimensions.push(o),l},this),this.resize(t,a)}return r.prototype.getIndicatorAxes=function(){return this._indicatorAxes},r.prototype.dataToPoint=function(t,e){var a=this._indicatorAxes[e];return this.coordToPoint(a.dataToCoord(t),e)},r.prototype.coordToPoint=function(t,e){var a=this._indicatorAxes[e],n=a.angle,i=this.cx+t*Math.cos(n),o=this.cy-t*Math.sin(n);return[i,o]},r.prototype.pointToData=function(t){var e=t[0]-this.cx,a=t[1]-this.cy,n=Math.sqrt(e*e+a*a);e/=n,a/=n;for(var i=Math.atan2(-a,e),o=1/0,l,s=-1,u=0;u<this._indicatorAxes.length;u++){var d=this._indicatorAxes[u],c=Math.abs(i-d.angle);c<o&&(l=d,s=u,o=c)}return[s,+(l&&l.coordToData(n))]},r.prototype.resize=function(t,e){var a=t.get("center"),n=e.getWidth(),i=e.getHeight(),o=Math.min(n,i)/2;this.cx=de(a[0],n),this.cy=de(a[1],i),this.startAngle=t.get("startAngle")*Math.PI/180;var l=t.get("radius");(Re(l)||aa(l))&&(l=[0,l]),this.r0=de(l[0],o),this.r=de(l[1],o),O(this._indicatorAxes,function(s,u){s.setExtent(this.r0,this.r);var d=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;d=Math.atan2(Math.sin(d),Math.cos(d)),s.angle=d},this)},r.prototype.update=function(t,e){var a=this._indicatorAxes,n=this._model;O(a,function(l){l.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(l,s){if(!(l.get("coordinateSystem")!=="radar"||t.getComponent("radar",l.get("radarIndex"))!==n)){var u=l.getData();O(a,function(d){d.scale.unionExtentFromData(u,u.mapDimension(d.dim))})}},this);var i=n.get("splitNumber"),o=new Ds;o.setExtent(0,i),o.setInterval(1),O(a,function(l,s){d1(l.scale,l.model,o)})},r.prototype.convertToPixel=function(t,e,a){return console.warn("Not implemented."),null},r.prototype.convertFromPixel=function(t,e,a){return console.warn("Not implemented."),null},r.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},r.create=function(t,e){var a=[];return t.eachComponent("radar",function(n){var i=new r(n,t,e);a.push(i),n.coordinateSystem=i}),t.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=a[n.get("radarIndex")||0])}),a},r.dimensions=[],r}();function Yw(r){r.registerCoordinateSystem("radar",Ww),r.registerComponentModel(Gw),r.registerComponentView(Uw),r.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each(function(a){e.setItemVisual(a,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}function jw(r){De(Yw),r.registerChartView(Bw),r.registerSeriesModel(qw),r.registerLayout($w),r.registerProcessor(qo("radar")),r.registerPreprocessor(zw)}var Yc="\0_ec_interaction_mutex";function Zw(r,t,e){var a=Uu(r);a[t]=e}function Xw(r,t,e){var a=Uu(r),n=a[t];n===e&&(a[t]=null)}function jc(r,t){return!!Uu(r)[t]}function Uu(r){return r[Yc]||(r[Yc]={})}Go({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},ar);var Di=function(r){W(t,r);function t(e){var a=r.call(this)||this;a._zr=e;var n=ye(a._mousedownHandler,a),i=ye(a._mousemoveHandler,a),o=ye(a._mouseupHandler,a),l=ye(a._mousewheelHandler,a),s=ye(a._pinchHandler,a);return a.enable=function(u,d){this.disable(),this._opt=Ne(Fe(d)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(e.on("mousedown",n),e.on("mousemove",i),e.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(e.on("mousewheel",l),e.on("pinch",s))},a.disable=function(){e.off("mousedown",n),e.off("mousemove",i),e.off("mouseup",o),e.off("mousewheel",l),e.off("pinch",s)},a}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!Yd(e)){for(var a=e.target;a;){if(a.draggable)return;a=a.__hostTarget||a.parent}var n=e.offsetX,i=e.offsetY;this.pointerChecker&&this.pointerChecker(e,n,i)&&(this._x=n,this._y=i,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!eo("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||jc(this._zr,"globalPan"))){var a=e.offsetX,n=e.offsetY,i=this._x,o=this._y,l=a-i,s=n-o;this._x=a,this._y=n,this._opt.preventDefaultMouseMove&&Mr(e.event),Hh(this,"pan","moveOnMouseMove",e,{dx:l,dy:s,oldX:i,oldY:o,newX:a,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){Yd(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var a=eo("zoomOnMouseWheel",e,this._opt),n=eo("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,o=Math.abs(i),l=e.offsetX,s=e.offsetY;if(!(i===0||!a&&!n)){if(a){var u=o>3?1.4:o>1?1.2:1.1,d=i>0?u:1/u;Il(this,"zoom","zoomOnMouseWheel",e,{scale:d,originX:l,originY:s,isAvailableBehavior:null})}if(n){var c=Math.abs(i),f=(i>0?1:-1)*(c>3?.4:c>1?.15:.05);Il(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:f,originX:l,originY:s,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){if(!jc(this._zr,"globalPan")){var a=e.pinchScale>1?1.1:1/1.1;Il(this,"zoom",null,e,{scale:a,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},t}(Og);function Il(r,t,e,a,n){r.pointerChecker&&r.pointerChecker(a,n.originX,n.originY)&&(Mr(a.event),Hh(r,t,e,a,n))}function Hh(r,t,e,a,n){n.isAvailableBehavior=ye(eo,null,e,a),r.trigger(t,n)}function eo(r,t,e){var a=e[r];return!r||a&&(!Re(a)||t.event[a+"Key"])}function Hu(r,t,e){var a=r.target;a.x+=t,a.y+=e,a.dirty()}function Wu(r,t,e,a){var n=r.target,i=r.zoomLimit,o=r.zoom=r.zoom||1;if(o*=t,i){var l=i.min||0,s=i.max||1/0;o=Math.max(Math.min(s,o),l)}var u=o/r.zoom;r.zoom=o,n.x-=(e-n.x)*(u-1),n.y-=(a-n.y)*(u-1),n.scaleX*=u,n.scaleY*=u,n.dirty()}var Kw={axisPointer:1,tooltip:1,brush:1};function tl(r,t,e){var a=t.getComponentByElement(r.topTarget),n=a&&a.coordinateSystem;return a&&a!==e&&!Kw.hasOwnProperty(a.mainType)&&n&&n.model!==e}function Wh(r){if(Re(r)){var t=new DOMParser;r=t.parseFromString(r,"text/xml")}var e=r;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var Dl,go={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Zc=vt(go),ho={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Xc=vt(ho),Qw=function(){function r(){this._defs={},this._root=null}return r.prototype.parse=function(t,e){e=e||{};var a=Wh(t);this._defsUsePending=[];var n=new xe;this._root=n;var i=[],o=a.getAttribute("viewBox")||"",l=parseFloat(a.getAttribute("width")||e.width),s=parseFloat(a.getAttribute("height")||e.height);isNaN(l)&&(l=null),isNaN(s)&&(s=null),la(a,n,null,!0,!1);for(var u=a.firstChild;u;)this._parseNode(u,n,i,null,!1,!1),u=u.nextSibling;tx(this._defs,this._defsUsePending),this._defsUsePending=[];var d,c;if(o){var f=al(o);f.length>=4&&(d={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(d&&l!=null&&s!=null&&(c=jh(d,{x:0,y:0,width:l,height:s}),!e.ignoreViewBox)){var p=n;n=new xe,n.add(p),p.scaleX=p.scaleY=c.scale,p.x=c.x,p.y=c.y}return!e.ignoreRootClip&&l!=null&&s!=null&&n.setClipPath(new et({shape:{x:0,y:0,width:l,height:s}})),{root:n,width:l,height:s,viewBoxRect:d,viewBoxTransform:c,named:i}},r.prototype._parseNode=function(t,e,a,n,i,o){var l=t.nodeName.toLowerCase(),s,u=n;if(l==="defs"&&(i=!0),l==="text"&&(o=!0),l==="defs"||l==="switch")s=e;else{if(!i){var d=Dl[l];if(d&&le(Dl,l)){s=d.call(this,t,e);var c=t.getAttribute("name");if(c){var f={name:c,namedFrom:null,svgNodeTagLower:l,el:s};a.push(f),l==="g"&&(u=f)}else n&&a.push({name:n.name,namedFrom:n,svgNodeTagLower:l,el:s});e.add(s)}}var p=Kc[l];if(p&&le(Kc,l)){var g=p.call(this,t),v=t.getAttribute("id");v&&(this._defs[v]=g)}}if(s&&s.isGroup)for(var y=t.firstChild;y;)y.nodeType===1?this._parseNode(y,s,a,u,i,o):y.nodeType===3&&o&&this._parseText(y,s),y=y.nextSibling},r.prototype._parseText=function(t,e){var a=new Rg({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});fa(e,a),la(t,a,this._defsUsePending,!1,!1),Jw(a,e);var n=a.style,i=n.fontSize;i&&i<9&&(n.fontSize=9,a.scaleX*=i/9,a.scaleY*=i/9);var o=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=o;var l=a.getBoundingRect();return this._textX+=l.width,e.add(a),a},r.internalField=function(){Dl={g:function(t,e){var a=new xe;return fa(e,a),la(t,a,this._defsUsePending,!1,!1),a},rect:function(t,e){var a=new et;return fa(e,a),la(t,a,this._defsUsePending,!1,!1),a.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),a.silent=!0,a},circle:function(t,e){var a=new _i;return fa(e,a),la(t,a,this._defsUsePending,!1,!1),a.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),a.silent=!0,a},line:function(t,e){var a=new xa;return fa(e,a),la(t,a,this._defsUsePending,!1,!1),a.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),a.silent=!0,a},ellipse:function(t,e){var a=new f1;return fa(e,a),la(t,a,this._defsUsePending,!1,!1),a.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),a.silent=!0,a},polygon:function(t,e){var a=t.getAttribute("points"),n;a&&(n=ef(a));var i=new ya({shape:{points:n||[]},silent:!0});return fa(e,i),la(t,i,this._defsUsePending,!1,!1),i},polyline:function(t,e){var a=t.getAttribute("points"),n;a&&(n=ef(a));var i=new Va({shape:{points:n||[]},silent:!0});return fa(e,i),la(t,i,this._defsUsePending,!1,!1),i},image:function(t,e){var a=new Ta;return fa(e,a),la(t,a,this._defsUsePending,!1,!1),a.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),a.silent=!0,a},text:function(t,e){var a=t.getAttribute("x")||"0",n=t.getAttribute("y")||"0",i=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(a)+parseFloat(i),this._textY=parseFloat(n)+parseFloat(o);var l=new xe;return fa(e,l),la(t,l,this._defsUsePending,!1,!0),l},tspan:function(t,e){var a=t.getAttribute("x"),n=t.getAttribute("y");a!=null&&(this._textX=parseFloat(a)),n!=null&&(this._textY=parseFloat(n));var i=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",l=new xe;return fa(e,l),la(t,l,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(o),l},path:function(t,e){var a=t.getAttribute("d")||"",n=c1(a);return fa(e,n),la(t,n,this._defsUsePending,!1,!1),n.silent=!0,n}}}(),r}(),Kc={lineargradient:function(r){var t=parseInt(r.getAttribute("x1")||"0",10),e=parseInt(r.getAttribute("y1")||"0",10),a=parseInt(r.getAttribute("x2")||"10",10),n=parseInt(r.getAttribute("y2")||"0",10),i=new Oo(t,e,a,n);return Qc(r,i),Jc(r,i),i},radialgradient:function(r){var t=parseInt(r.getAttribute("cx")||"0",10),e=parseInt(r.getAttribute("cy")||"0",10),a=parseInt(r.getAttribute("r")||"0",10),n=new p1(t,e,a);return Qc(r,n),Jc(r,n),n}};function Qc(r,t){var e=r.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(t.global=!0)}function Jc(r,t){for(var e=r.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var a=e.getAttribute("offset"),n=void 0;a&&a.indexOf("%")>0?n=parseInt(a,10)/100:a?n=parseFloat(a):n=0;var i={};Yh(e,i,i);var o=i.stopColor||e.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:n,color:o})}e=e.nextSibling}}function fa(r,t){r&&r.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),Ne(t.__inheritedStyle,r.__inheritedStyle))}function ef(r){for(var t=al(r),e=[],a=0;a<t.length;a+=2){var n=parseFloat(t[a]),i=parseFloat(t[a+1]);e.push([n,i])}return e}function la(r,t,e,a,n){var i=t,o=i.__inheritedStyle=i.__inheritedStyle||{},l={};r.nodeType===1&&(nx(r,t),Yh(r,o,l),a||ix(r,o,l)),i.style=i.style||{},o.fill!=null&&(i.style.fill=tf(i,"fill",o.fill,e)),o.stroke!=null&&(i.style.stroke=tf(i,"stroke",o.stroke,e)),O(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(s){o[s]!=null&&(i.style[s]=parseFloat(o[s]))}),O(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(s){o[s]!=null&&(i.style[s]=o[s])}),n&&(i.__selfStyle=l),o.lineDash&&(i.style.lineDash=ne(al(o.lineDash),function(s){return parseFloat(s)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(i.invisible=!0),o.display==="none"&&(i.ignore=!0)}function Jw(r,t){var e=t.__selfStyle;if(e){var a=e.textBaseline,n=a;!a||a==="auto"||a==="baseline"?n="alphabetic":a==="before-edge"||a==="text-before-edge"?n="top":a==="after-edge"||a==="text-after-edge"?n="bottom":(a==="central"||a==="mathematical")&&(n="middle"),r.style.textBaseline=n}var i=t.__inheritedStyle;if(i){var o=i.textAlign,l=o;o&&(o==="middle"&&(l="center"),r.style.textAlign=l)}}var ex=/^url\(\s*#(.*?)\)/;function tf(r,t,e,a){var n=e&&e.match(ex);if(n){var i=v1(n[1]);a.push([r,t,i]);return}return e==="none"&&(e=null),e}function tx(r,t){for(var e=0;e<t.length;e++){var a=t[e];a[0].style[a[1]]=r[a[2]]}}var ax=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function al(r){return r.match(ax)||[]}var rx=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Ml=Math.PI/180;function nx(r,t){var e=r.getAttribute("transform");if(e){e=e.replace(/,/g," ");var a=[],n=null;e.replace(rx,function(c,f,p){return a.push(f,p),""});for(var i=a.length-1;i>0;i-=2){var o=a[i],l=a[i-1],s=al(o);switch(n=n||Cn(),l){case"translate":Pr(n,n,[parseFloat(s[0]),parseFloat(s[1]||"0")]);break;case"scale":$g(n,n,[parseFloat(s[0]),parseFloat(s[1]||s[0])]);break;case"rotate":Fo(n,n,-parseFloat(s[0])*Ml,[parseFloat(s[1]||"0"),parseFloat(s[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(s[0])*Ml);Is(n,[1,0,u,1,0,0],n);break;case"skewY":var d=Math.tan(parseFloat(s[0])*Ml);Is(n,[1,d,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(s[0]),n[1]=parseFloat(s[1]),n[2]=parseFloat(s[2]),n[3]=parseFloat(s[3]),n[4]=parseFloat(s[4]),n[5]=parseFloat(s[5]);break}}t.setLocalTransform(n)}}var af=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Yh(r,t,e){var a=r.getAttribute("style");if(a){af.lastIndex=0;for(var n;(n=af.exec(a))!=null;){var i=n[1],o=le(go,i)?go[i]:null;o&&(t[o]=n[2]);var l=le(ho,i)?ho[i]:null;l&&(e[l]=n[2])}}}function ix(r,t,e){for(var a=0;a<Zc.length;a++){var n=Zc[a],i=r.getAttribute(n);i!=null&&(t[go[n]]=i)}for(var a=0;a<Xc.length;a++){var n=Xc[a],i=r.getAttribute(n);i!=null&&(e[ho[n]]=i)}}function jh(r,t){var e=t.width/r.width,a=t.height/r.height,n=Math.min(e,a);return{scale:n,x:-(r.x+r.width/2)*n+(t.x+t.width/2),y:-(r.y+r.height/2)*n+(t.y+t.height/2)}}function ox(r,t){var e=new Qw;return e.parse(r,t)}var lx=Pe(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),sx=function(){function r(t,e){this.type="geoSVG",this._usedGraphicMap=Pe(),this._freedGraphics=[],this._mapName=t,this._parsedXML=Wh(e)}return r.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=dx(t.named),a=e.regions,n=e.regionsMap;this._regions=a,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},r.prototype._buildGraphic=function(t){var e,a;try{e=t&&ox(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},a=e.root,Jn(a!=null)}catch(y){throw new Error(`Invalid svg format
`+y.message)}var n=new xe;n.add(a),n.isGeoSVGGraphicRoot=!0;var i=e.width,o=e.height,l=e.viewBoxRect,s=this._boundingRect;if(!s){var u=void 0,d=void 0,c=void 0,f=void 0;if(i!=null?(u=0,c=i):l&&(u=l.x,c=l.width),o!=null?(d=0,f=o):l&&(d=l.y,f=l.height),u==null||d==null){var p=a.getBoundingRect();u==null&&(u=p.x,c=p.width),d==null&&(d=p.y,f=p.height)}s=this._boundingRect=new st(u,d,c,f)}if(l){var g=jh(l,s);a.scaleX=a.scaleY=g.scale,a.x=g.x,a.y=g.y}n.setClipPath(new et({shape:s.plain()}));var v=[];return O(e.named,function(y){lx.get(y.svgNodeTagLower)!=null&&(v.push(y),ux(y.el))}),{root:n,boundingRect:s,named:v}},r.prototype.useGraphic=function(t){var e=this._usedGraphicMap,a=e.get(t);return a||(a=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,a),a)},r.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,a=e.get(t);a&&(e.removeKey(t),this._freedGraphics.push(a))},r}();function ux(r){r.silent=!1,r.isGroup&&r.traverse(function(t){t.silent=!1})}function dx(r){var t=[],e=Pe();return O(r,function(a){if(a.namedFrom==null){var n=new kS(a.name,a.el);t.push(n),e.set(a.name,n)}}),{regions:t,regionsMap:e}}var Bs=[126,25],rf="南海诸岛",pr=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var sr=0;sr<pr.length;sr++)for(var Fr=0;Fr<pr[sr].length;Fr++)pr[sr][Fr][0]/=10.5,pr[sr][Fr][1]/=-10.5/.75,pr[sr][Fr][0]+=Bs[0],pr[sr][Fr][1]+=Bs[1];function cx(r,t){if(r==="china"){for(var e=0;e<t.length;e++)if(t[e].name===rf)return;t.push(new wh(rf,ne(pr,function(a){return{type:"polygon",exterior:a}}),Bs))}}var fx={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function px(r,t){if(r==="china"){var e=fx[t.name];if(e){var a=t.getCenter();a[0]+=e[0]/10.5,a[1]+=-e[1]/(10.5/.75),t.setCenter(a)}}}var vx=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function gx(r,t){r==="china"&&t.name==="台湾"&&t.geometries.push({type:"polygon",exterior:vx[0]})}var hx="name",mx=function(){function r(t,e,a){this.type="geoJSON",this._parsedMap=Pe(),this._mapName=t,this._specialAreas=a,this._geoJSON=bx(e)}return r.prototype.load=function(t,e){e=e||hx;var a=this._parsedMap.get(e);if(!a){var n=this._parseToRegions(e);a=this._parsedMap.set(e,{regions:n,boundingRect:yx(n)})}var i=Pe(),o=[];return O(a.regions,function(l){var s=l.name;t&&le(t,s)&&(l=l.cloneShallow(s=t[s])),o.push(l),i.set(s,l)}),{regions:o,boundingRect:a.boundingRect||new st(0,0,0,0),regionsMap:i}},r.prototype._parseToRegions=function(t){var e=this._mapName,a=this._geoJSON,n;try{n=a?IS(a,t):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return cx(e,n),O(n,function(i){var o=i.name;px(e,i),gx(e,i);var l=this._specialAreas&&this._specialAreas[o];l&&i.transformTo(l.left,l.top,l.width,l.height)},this),n},r.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},r}();function yx(r){for(var t,e=0;e<r.length;e++){var a=r[e].getBoundingRect();t=t||a.clone(),t.union(a)}return t}function bx(r){return Re(r)?typeof JSON<"u"&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r}var Mn=Pe();const Ga={registerMap:function(r,t,e){if(t.svg){var a=new sx(r,t.svg);Mn.set(r,a)}else{var n=t.geoJson||t.geoJSON;n&&!t.features?e=t.specialAreas:n=t;var a=new mx(r,n,e);Mn.set(r,a)}},getGeoResource:function(r){return Mn.get(r)},getMapForUser:function(r){var t=Mn.get(r);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(r,t,e){var a=Mn.get(r);if(a)return a.load(t,e)}};var Yu=["rect","circle","line","ellipse","polygon","polyline","path"],_x=Pe(Yu),Sx=Pe(Yu.concat(["g"])),wx=Pe(Yu.concat(["g"])),Zh=ht();function Oi(r){var t=r.getItemStyle(),e=r.get("areaColor");return e!=null&&(t.fill=e),t}function nf(r){var t=r.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var Xh=function(){function r(t){var e=new xe;this.uid=zg("ec_map_draw"),this._controller=new Di(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new xe),e.add(this._svgGroup=new xe)}return r.prototype.draw=function(t,e,a,n,i){var o=t.mainType==="geo",l=t.getData&&t.getData();o&&e.eachComponent({mainType:"series",subType:"map"},function(_){!l&&_.getHostGeoModel()===t&&(l=_.getData())});var s=t.coordinateSystem,u=this._regionsGroup,d=this.group,c=s.getTransformInfo(),f=c.raw,p=c.roam,g=!u.childAt(0)||i;g?(d.x=p.x,d.y=p.y,d.scaleX=p.scaleX,d.scaleY=p.scaleY,d.dirty()):Ke(d,p,t);var v=l&&l.getVisual("visualMeta")&&l.getVisual("visualMeta").length>0,y={api:a,geo:s,mapOrGeoModel:t,data:l,isVisualEncodedByVisualMap:v,isGeo:o,transformInfoRaw:f};s.resourceType==="geoJSON"?this._buildGeoJSON(y):s.resourceType==="geoSVG"&&this._buildSVG(y),this._updateController(t,e,a),this._updateMapSelectHandler(t,u,a,n)},r.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=Pe(),a=Pe(),n=this._regionsGroup,i=t.transformInfoRaw,o=t.mapOrGeoModel,l=t.data,s=t.geo.projection,u=s&&s.stream;function d(p,g){return g&&(p=g(p)),p&&[p[0]*i.scaleX+i.x,p[1]*i.scaleY+i.y]}function c(p){for(var g=[],v=!u&&s&&s.project,y=0;y<p.length;++y){var _=d(p[y],v);_&&g.push(_)}return g}function f(p){return{shape:{points:c(p)}}}n.removeAll(),O(t.geo.regions,function(p){var g=p.name,v=e.get(g),y=a.get(g)||{},_=y.dataIdx,S=y.regionModel;v||(v=e.set(g,new xe),n.add(v),_=l?l.indexOfName(g):null,S=t.isGeo?o.getRegionModel(g):l?l.getItemModel(_):null,a.set(g,{dataIdx:_,regionModel:S}));var w=[],T=[];O(p.geometries,function(A){if(A.type==="polygon"){var I=[A.exterior].concat(A.interiors||[]);u&&(I=cf(I,u)),O(I,function(D){w.push(new ya(f(D)))})}else{var M=A.points;u&&(M=cf(M,u,!0)),O(M,function(D){T.push(new Va(f(D)))})}});var C=d(p.getCenter(),s&&s.project);function k(A,I){if(A.length){var M=new Pg({culling:!0,segmentIgnoreThreshold:1,shape:{paths:A}});v.add(M),of(t,M,_,S),lf(t,M,g,S,o,_,C),I&&(nf(M),O(M.states,nf))}}k(w),k(T,!0)}),e.each(function(p,g){var v=a.get(g),y=v.dataIdx,_=v.regionModel;sf(t,p,g,_,o,y),uf(t,p,g,_,o),df(t,p,g,_,o)},this)},r.prototype._buildSVG=function(t){var e=t.geo.map,a=t.transformInfoRaw;this._svgGroup.x=a.x,this._svgGroup.y=a.y,this._svgGroup.scaleX=a.scaleX,this._svgGroup.scaleY=a.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var n=this._svgDispatcherMap=Pe(),i=!1;O(this._svgGraphicRecord.named,function(o){var l=o.name,s=t.mapOrGeoModel,u=t.data,d=o.svgNodeTagLower,c=o.el,f=u?u.indexOfName(l):null,p=s.getRegionModel(l);if(_x.get(d)!=null&&c instanceof Lr&&of(t,c,f,p),c instanceof Lr&&(c.culling=!0),c.z2EmphasisLift=0,!o.namedFrom&&(wx.get(d)!=null&&lf(t,c,l,p,s,f,null),sf(t,c,l,p,s,f),uf(t,c,l,p,s),Sx.get(d)!=null)){var g=df(t,c,l,p,s);g==="self"&&(i=!0);var v=n.get(l)||n.set(l,[]);v.push(c)}},this),this._enableBlurEntireSVG(i,t)},r.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var a=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=a.opacity;this._svgGraphicRecord.root.traverse(function(i){if(!i.isGroup){pn(i);var o=i.ensureState("blur").style||{};o.opacity==null&&n!=null&&(o.opacity=n),i.ensureState("emphasis")}})}},r.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},r.prototype.findHighDownDispatchers=function(t,e){if(t==null)return[];var a=e.coordinateSystem;if(a.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var i=n.get(t);return i?[i]:[]}}else if(a.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},r.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},r.prototype._useSVG=function(t){var e=Ga.getGeoResource(t);if(e&&e.type==="geoSVG"){var a=e.useGraphic(this.uid);this._svgGroup.add(a.root),this._svgGraphicRecord=a,this._svgMapName=t}},r.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var e=Ga.getGeoResource(t);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},r.prototype._updateController=function(t,e,a){var n=t.coordinateSystem,i=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=n.getZoom(),i.enable(t.get("roam")||!1);var l=t.mainType;function s(){var u={type:"geoRoam",componentType:l};return u[l+"Id"]=t.id,u}i.off("pan").on("pan",function(u){this._mouseDownFlag=!1,Hu(o,u.dx,u.dy),a.dispatchAction(be(s(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),i.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,Wu(o,u.scale,u.originX,u.originY),a.dispatchAction(be(s(),{totalZoom:o.zoom,zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),i.setPointerChecker(function(u,d,c){return n.containPoint([d,c])&&!tl(u,a,t)})},r.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=Zh(e).ignore)})},r.prototype._updateMapSelectHandler=function(t,e,a,n){var i=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){i._mouseDownFlag=!0}),e.on("click",function(o){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},r}();function of(r,t,e,a){var n=a.getModel("itemStyle"),i=a.getModel(["emphasis","itemStyle"]),o=a.getModel(["blur","itemStyle"]),l=a.getModel(["select","itemStyle"]),s=Oi(n),u=Oi(i),d=Oi(l),c=Oi(o),f=r.data;if(f){var p=f.getItemVisual(e,"style"),g=f.getItemVisual(e,"decal");r.isVisualEncodedByVisualMap&&p.fill&&(s.fill=p.fill),g&&(s.decal=Uo(g,r.api))}t.setStyle(s),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=d,t.ensureState("blur").style=c,pn(t)}function lf(r,t,e,a,n,i,o){var l=r.data,s=r.isGeo,u=l&&isNaN(l.get(l.mapDimension("value"),i)),d=l&&l.getItemLayout(i);if(s||u||d&&d.showLabel){var c=s?e:i,f=void 0;(!l||i>=0)&&(f=n);var p=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Zt(t,Ot(a),{labelFetcher:f,labelDataIndex:c,defaultText:e},p);var g=t.getTextContent();if(g&&(Zh(g).ignore=g.ignore,t.textConfig&&o)){var v=t.getBoundingRect().clone();t.textConfig.layoutRect=v,t.textConfig.position=[(o[0]-v.x)/v.width*100+"%",(o[1]-v.y)/v.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function sf(r,t,e,a,n,i){r.data?r.data.setItemGraphicEl(i,t):qe(t).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:e,region:a&&a.option||{}}}function uf(r,t,e,a,n){r.data||Ho({el:t,componentModel:n,itemName:e,itemTooltipOption:a.get("tooltip")})}function df(r,t,e,a,n){t.highDownSilentOnTouch=!!n.get("selectedMode");var i=a.getModel("emphasis"),o=i.get("focus");return dt(t,o,i.get("blurScope"),i.get("disabled")),r.isGeo&&g1(t,n,e),o}function cf(r,t,e){var a=[],n;function i(){n=[]}function o(){n.length&&(a.push(n),n=[])}var l=t({polygonStart:i,polygonEnd:o,lineStart:i,lineEnd:o,point:function(s,u){isFinite(s)&&isFinite(u)&&n.push([s,u])},sphere:function(){}});return!e&&l.polygonStart(),O(r,function(s){l.lineStart();for(var u=0;u<s.length;u++)l.point(s[u][0],s[u][1]);l.lineEnd()}),!e&&l.polygonEnd(),a}var xx=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,i){if(!(i&&i.type==="mapToggleSelect"&&i.from===this.uid)){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&i&&i.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===e.id){var l=this._mapDraw;l&&o.add(l.group)}else if(e.needsDrawMap){var l=this._mapDraw||new Xh(n);o.add(l.group),l.draw(e,a,n,this,i),this._mapDraw=l}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&a.getComponent("legend")&&this._renderSymbols(e,a,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,a,n){var i=e.originalData,o=this.group;i.each(i.mapDimension("value"),function(l,s){if(!isNaN(l)){var u=i.getItemLayout(s);if(!(!u||!u.point)){var d=u.point,c=u.offset,f=new _i({style:{fill:e.getData().getVisual("style").fill},shape:{cx:d[0]+c*9,cy:d[1],r:3},silent:!0,z2:8+(c?0:Si+1)});if(!c){var p=e.mainSeries.getData(),g=i.getName(s),v=p.indexOfName(g),y=i.getItemModel(s),_=y.getModel("label"),S=p.getItemGraphicEl(v);Zt(f,Ot(y),{labelFetcher:{getFormattedLabel:function(w,T){return e.getFormattedLabel(v,T)}},defaultText:g}),f.disableLabelAnimation=!0,_.get("position")||f.setTextConfig({position:"bottom"}),S.onHoverStateChange=function(w){io(f,w)}}o.add(f)}}})},t.type="map",t}(ut),Tx=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(a){if(a!=null){var n=this.getData().getName(a),i=this.coordinateSystem,o=i.getRegion(n);return o&&i.dataToPoint(o.getCenter())}},e}return t.prototype.getInitialData=function(e){for(var a=bi(this,{coordDimensions:["value"],encodeDefaulter:Ve(Bg,this)}),n=Pe(),i=[],o=0,l=a.count();o<l;o++){var s=a.getName(o);n.set(s,!0)}var u=Ga.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return O(u.regions,function(d){var c=d.name;n.get(c)||i.push(c)}),a.appendValues([],i),a},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var a=this.getData();return a.get(a.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var a=this.getData();return a.getItemModel(a.indexOfName(e))},t.prototype.formatTooltip=function(e,a,n){for(var i=this.getData(),o=this.getRawValue(e),l=i.getName(e),s=this.seriesGroup,u=[],d=0;d<s.length;d++){var c=s[d].originalData.indexOfName(l),f=i.mapDimension("value");isNaN(s[d].originalData.get(f,c))||u.push(s[d].name)}return ra("section",{header:u.join(", "),noHeader:!u.length,blocks:[ra("nameValue",{name:l,value:o})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var a=e.icon||"roundRect",n=St(a,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return n.setStyle(e.itemStyle),n.style.stroke="none",a.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(Ct);function Cx(r,t){var e={};return O(r,function(a){a.each(a.mapDimension("value"),function(n,i){var o="ec-"+a.getName(i);e[o]=e[o]||[],isNaN(n)||e[o].push(n)})}),r[0].map(r[0].mapDimension("value"),function(a,n){for(var i="ec-"+r[0].getName(n),o=0,l=1/0,s=-1/0,u=e[i].length,d=0;d<u;d++)l=Math.min(l,e[i][d]),s=Math.max(s,e[i][d]),o+=e[i][d];var c;return t==="min"?c=l:t==="max"?c=s:t==="average"?c=o/u:c=o,u===0?NaN:c})}function kx(r){var t={};r.eachSeriesByType("map",function(e){var a=e.getHostGeoModel(),n=a?"o"+a.id:"i"+e.getMapType();(t[n]=t[n]||[]).push(e)}),O(t,function(e,a){for(var n=Cx(ne(e,function(o){return o.getData()}),e[0].get("mapValueCalculation")),i=0;i<e.length;i++)e[i].originalData=e[i].getData();for(var i=0;i<e.length;i++)e[i].seriesGroup=e,e[i].needsDrawMap=i===0&&!e[i].getHostGeoModel(),e[i].setData(n.cloneShallow()),e[i].mainSeries=e[0]})}function Ax(r){var t={};r.eachSeriesByType("map",function(e){var a=e.getMapType();if(!(e.getHostGeoModel()||t[a])){var n={};O(e.seriesGroup,function(o){var l=o.coordinateSystem,s=o.originalData;o.get("showLegendSymbol")&&r.getComponent("legend")&&s.each(s.mapDimension("value"),function(u,d){var c=s.getName(d),f=l.getRegion(c);if(!(!f||isNaN(u))){var p=n[c]||0,g=l.dataToPoint(f.getCenter());n[c]=p+1,s.setItemLayout(d,{point:g,offset:p})}})});var i=e.getData();i.each(function(o){var l=i.getName(o),s=i.getItemLayout(o)||{};s.showLabel=!n[l],i.setItemLayout(o,s)}),t[a]=!0}})}var ff=Kn,Mi=function(r){W(t,r);function t(e){var a=r.call(this)||this;return a.type="view",a.dimensions=["x","y"],a._roamTransformable=new tn,a._rawTransformable=new tn,a.name=e,a}return t.prototype.setBoundingRect=function(e,a,n,i){return this._rect=new st(e,a,n,i),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,a,n,i){this._transformTo(e,a,n,i),this._viewRect=new st(e,a,n,i)},t.prototype._transformTo=function(e,a,n,i){var o=this.getBoundingRect(),l=this._rawTransformable;l.transform=o.calculateTransform(new st(e,a,n,i));var s=l.parent;l.parent=null,l.decomposeTransform(),l.parent=s,this._updateTransform()},t.prototype.setCenter=function(e,a){e&&(this._center=[de(e[0],a.getWidth()),de(e[1],a.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var a=this.zoomLimit;a&&(a.max!=null&&(e=Math.min(a.max,e)),a.min!=null&&(e=Math.max(a.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),a=e.x+e.width/2,n=e.y+e.height/2;return[a,n]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),a=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),o=this.getZoom();i=Kn([],i,e),n=Kn([],n,e),a.originX=i[0],a.originY=i[1],a.x=n[0]-i[0],a.y=n[1]-i[1],a.scaleX=a.scaleY=o,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,a=this._rawTransformable;a.parent=e,e.updateTransform(),a.updateTransform(),h1(this.transform||(this.transform=[]),a.transform||Cn()),this._rawTransform=a.getLocalTransform(),this.invTransform=this.invTransform||[],Tg(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,a=this._roamTransformable,n=new tn;return n.transform=a.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,a,n){var i=a?this._rawTransform:this.transform;return n=n||[],i?ff(n,e,i):Yt(n,e)},t.prototype.pointToData=function(e){var a=this.invTransform;return a?ff([],e,a):[e[0],e[1]]},t.prototype.convertToPixel=function(e,a,n){var i=pf(a);return i===this?i.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,a,n){var i=pf(a);return i===this?i.pointToData(n):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(tn);function pf(r){var t=r.seriesModel;return t?t.coordinateSystem:null}var Ix={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Kh=["lng","lat"],qs=function(r){W(t,r);function t(e,a,n){var i=r.call(this,e)||this;i.dimensions=Kh,i.type="geo",i._nameCoordMap=Pe(),i.map=a;var o=n.projection,l=Ga.load(a,n.nameMap,n.nameProperty),s=Ga.getGeoResource(a);i.resourceType=s?s.type:null;var u=i.regions=l.regions,d=Ix[s.type];i._regionsMap=l.regionsMap,i.regions=l.regions,i.projection=o;var c;if(o)for(var f=0;f<u.length;f++){var p=u[f].getBoundingRect(o);c=c||p.clone(),c.union(p)}else c=l.boundingRect;return i.setBoundingRect(c.x,c.y,c.width,c.height),i.aspectScale=o?1:At(n.aspectScale,d.aspectScale),i._invertLongitute=o?!1:d.invertLongitute,i}return t.prototype._transformTo=function(e,a,n,i){var o=this.getBoundingRect(),l=this._invertLongitute;o=o.clone(),l&&(o.y=-o.y-o.height);var s=this._rawTransformable;s.transform=o.calculateTransform(new st(e,a,n,i));var u=s.parent;s.parent=null,s.decomposeTransform(),s.parent=u,l&&(s.scaleY=-s.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var a=this.regions,n=0;n<a.length;n++){var i=a[n];if(i.type==="geoJSON"&&i.contain(e))return a[n]}},t.prototype.addGeoCoord=function(e,a){this._nameCoordMap.set(e,a)},t.prototype.getGeoCoord=function(e){var a=this._regionsMap.get(e);return this._nameCoordMap.get(e)||a&&a.getCenter()},t.prototype.dataToPoint=function(e,a,n){if(Re(e)&&(e=this.getGeoCoord(e)),e){var i=this.projection;return i&&(e=i.project(e)),e&&this.projectedToPoint(e,a,n)}},t.prototype.pointToData=function(e){var a=this.projection;return a&&(e=a.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(e){return r.prototype.pointToData.call(this,e)},t.prototype.projectedToPoint=function(e,a,n){return r.prototype.dataToPoint.call(this,e,a,n)},t.prototype.convertToPixel=function(e,a,n){var i=vf(a);return i===this?i.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,a,n){var i=vf(a);return i===this?i.pointToData(n):null},t}(Mi);Ca(qs,Mi);function vf(r){var t=r.geoModel,e=r.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",La).models[0]||{}).coordinateSystem:null}function gf(r,t){var e=r.get("boundingCoords");if(e!=null){var a=e[0],n=e[1];if(isFinite(a[0])&&isFinite(a[1])&&isFinite(n[0])&&isFinite(n[1])){var i=this.projection;if(i){var o=a[0],l=a[1],s=n[0],u=n[1];a=[1/0,1/0],n=[-1/0,-1/0];var d=function(k,A,I,M){for(var D=I-k,L=M-A,E=0;E<=100;E++){var R=E/100,V=i.project([k+D*R,A+L*R]);Cg(a,a,V),kg(n,n,V)}};d(o,l,s,l),d(s,l,s,u),d(s,u,o,u),d(o,u,s,l)}this.setBoundingRect(a[0],a[1],n[0]-a[0],n[1]-a[1])}}var c=this.getBoundingRect(),f=r.get("layoutCenter"),p=r.get("layoutSize"),g=t.getWidth(),v=t.getHeight(),y=c.width/c.height*this.aspectScale,_=!1,S,w;f&&p&&(S=[de(f[0],g),de(f[1],v)],w=de(p,Math.min(g,v)),!isNaN(S[0])&&!isNaN(S[1])&&!isNaN(w)&&(_=!0));var T;if(_)T={},y>1?(T.width=w,T.height=w/y):(T.height=w,T.width=w*y),T.y=S[1]-T.height/2,T.x=S[0]-T.width/2;else{var C=r.getBoxLayoutParams();C.aspect=y,T=Kt(C,{width:g,height:v})}this.setViewRect(T.x,T.y,T.width,T.height),this.setCenter(r.get("center"),t),this.setZoom(r.get("zoom"))}function Dx(r,t){O(t.get("geoCoord"),function(e,a){r.addGeoCoord(a,e)})}var Mx=function(){function r(){this.dimensions=Kh}return r.prototype.create=function(t,e){var a=[];function n(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}t.eachComponent("geo",function(o,l){var s=o.get("map"),u=new qs(s+l,s,be({nameMap:o.get("nameMap")},n(o)));u.zoomLimit=o.get("scaleLimit"),a.push(u),o.coordinateSystem=u,u.model=o,u.resize=gf,u.resize(o,e)}),t.eachSeries(function(o){var l=o.get("coordinateSystem");if(l==="geo"){var s=o.get("geoIndex")||0;o.coordinateSystem=a[s]}});var i={};return t.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var l=o.getMapType();i[l]=i[l]||[],i[l].push(o)}}),O(i,function(o,l){var s=ne(o,function(d){return d.get("nameMap")}),u=new qs(l,l,be({nameMap:wu(s)},n(o[0])));u.zoomLimit=ua.apply(null,ne(o,function(d){return d.get("scaleLimit")})),a.push(u),u.resize=gf,u.resize(o[0],e),O(o,function(d){d.coordinateSystem=u,Dx(u,d)})}),a},r.prototype.getFilledRegions=function(t,e,a,n){for(var i=(t||[]).slice(),o=Pe(),l=0;l<i.length;l++)o.set(i[l].name,i[l]);var s=Ga.load(e,a,n);return O(s.regions,function(u){var d=u.name;!o.get(d)&&i.push({name:d})}),i},r}(),Qh=new Mx,Px=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a,n){var i=Ga.getGeoResource(e.map);if(i&&i.type==="geoJSON"){var o=e.itemStyle=e.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(e,n),Wo(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,a=this.option;a.regions=Qh.getFilledRegions(a.regions,a.map,a.nameMap,a.nameProperty);var n={};this._optionModelMap=qg(a.regions||[],function(i,o){var l=o.name;return l&&(i.set(l,new na(o,e,e.ecModel)),o.selected&&(n[l]=!0)),i},Pe()),a.selectedMap||(a.selectedMap=n)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new na(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,a){var n=this.getRegionModel(e),i=a==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),o={name:e};if(Be(i))return o.status=a,i(o);if(Re(i))return i.replace("{a}",e??"")},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var a=this.option,n=a.selectedMode;if(n){n!=="multiple"&&(a.selectedMap=null);var i=a.selectedMap||(a.selectedMap={});i[e]=!0}},t.prototype.unSelect=function(e){var a=this.option.selectedMap;a&&(a[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var a=this.option.selectedMap;return!!(a&&a[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(zt);function hf(r,t){return r.pointToProjected?r.pointToProjected(t):r.pointToData(t)}function ju(r,t,e,a){var n=r.getZoom(),i=r.getCenter(),o=t.zoom,l=r.projectedToPoint?r.projectedToPoint(i):r.dataToPoint(i);if(t.dx!=null&&t.dy!=null&&(l[0]-=t.dx,l[1]-=t.dy,r.setCenter(hf(r,l),a)),o!=null){if(e){var s=e.min||0,u=e.max||1/0;o=Math.max(Math.min(n*o,u),s)/n}r.scaleX*=o,r.scaleY*=o;var d=(t.originX-r.x)*(o-1),c=(t.originY-r.y)*(o-1);r.x-=d,r.y-=c,r.updateTransform(),r.setCenter(hf(r,l),a),r.setZoom(o*n)}return{center:r.getCenter(),zoom:r.getZoom()}}var Lx=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.focusBlurEnabled=!0,e}return t.prototype.init=function(e,a){this._api=a},t.prototype.render=function(e,a,n,i){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new Xh(n));var o=this._mapDraw;o.draw(e,a,n,this,i),o.group.on("click",this._handleRegionClick,this),o.group.silent=e.get("silent"),this.group.add(o.group),this.updateSelectStatus(e,a,n)},t.prototype._handleRegionClick=function(e){var a;Gg(e.target,function(n){return(a=qe(n).eventData)!=null},!0),a&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:a.name})},t.prototype.updateSelectStatus=function(e,a,n){var i=this;this._mapDraw.group.traverse(function(o){var l=qe(o).eventData;if(l)return i._model.isSelected(l.name)?n.enterSelect(o):n.leaveSelect(o),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(Ut);function Vx(r,t,e){Ga.registerMap(r,t,e)}function Jh(r){r.registerCoordinateSystem("geo",Qh),r.registerComponentModel(Px),r.registerComponentView(Lx),r.registerImpl("registerMap",Vx),r.registerImpl("getMap",function(e){return Ga.getMapForUser(e)});function t(e,a){a.update="geo:updateSelectStatus",r.registerAction(a,function(n,i){var o={},l=[];return i.eachComponent({mainType:"geo",query:n},function(s){s[e](n.name);var u=s.coordinateSystem;O(u.regions,function(c){o[c.name]=s.isSelected(c.name)||!1});var d=[];O(o,function(c,f){o[f]&&d.push(f)}),l.push({geoIndex:s.componentIndex,name:d})}),{selected:o,allSelected:l,name:n.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),r.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,a,n){var i=e.componentType||"series";a.eachComponent({mainType:i,query:e},function(o){var l=o.coordinateSystem;if(l.type==="geo"){var s=ju(l,e,o.get("scaleLimit"),n);o.setCenter&&o.setCenter(s.center),o.setZoom&&o.setZoom(s.zoom),i==="series"&&O(o.seriesGroup,function(u){u.setCenter(s.center),u.setZoom(s.zoom)})}})})}function Rx(r){De(Jh),r.registerChartView(xx),r.registerSeriesModel(Tx),r.registerLayout(Ax),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,kx),m1("map",r.registerAction)}function Ex(r){var t=r;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e=[t],a,n;a=e.pop();)if(n=a.children,a.isExpand&&n.length)for(var i=n.length,o=i-1;o>=0;o--){var l=n[o];l.hierNode={defaultAncestor:null,ancestor:l,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},e.push(l)}}function Nx(r,t){var e=r.isExpand?r.children:[],a=r.parentNode.children,n=r.hierNode.i?a[r.hierNode.i-1]:null;if(e.length){zx(r);var i=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;n?(r.hierNode.prelim=n.hierNode.prelim+t(r,n),r.hierNode.modifier=r.hierNode.prelim-i):r.hierNode.prelim=i}else n&&(r.hierNode.prelim=n.hierNode.prelim+t(r,n));r.parentNode.hierNode.defaultAncestor=Bx(r,n,r.parentNode.hierNode.defaultAncestor||a[0],t)}function Ox(r){var t=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:t},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function mf(r){return arguments.length?r:Fx}function Gn(r,t){return r-=Math.PI/2,{x:t*Math.cos(r),y:t*Math.sin(r)}}function $x(r,t){return Kt(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function zx(r){for(var t=r.children,e=t.length,a=0,n=0;--e>=0;){var i=t[e];i.hierNode.prelim+=a,i.hierNode.modifier+=a,n+=i.hierNode.change,a+=i.hierNode.shift+n}}function Bx(r,t,e,a){if(t){for(var n=r,i=r,o=i.parentNode.children[0],l=t,s=n.hierNode.modifier,u=i.hierNode.modifier,d=o.hierNode.modifier,c=l.hierNode.modifier;l=Pl(l),i=Ll(i),l&&i;){n=Pl(n),o=Ll(o),n.hierNode.ancestor=r;var f=l.hierNode.prelim+c-i.hierNode.prelim-u+a(l,i);f>0&&(Gx(qx(l,r,e),r,f),u+=f,s+=f),c+=l.hierNode.modifier,u+=i.hierNode.modifier,s+=n.hierNode.modifier,d+=o.hierNode.modifier}l&&!Pl(n)&&(n.hierNode.thread=l,n.hierNode.modifier+=c-s),i&&!Ll(o)&&(o.hierNode.thread=i,o.hierNode.modifier+=u-d,e=r)}return e}function Pl(r){var t=r.children;return t.length&&r.isExpand?t[t.length-1]:r.hierNode.thread}function Ll(r){var t=r.children;return t.length&&r.isExpand?t[0]:r.hierNode.thread}function qx(r,t,e){return r.hierNode.ancestor.parentNode===t.parentNode?r.hierNode.ancestor:e}function Gx(r,t,e){var a=e/(t.hierNode.i-r.hierNode.i);t.hierNode.change-=a,t.hierNode.shift+=e,t.hierNode.modifier+=e,t.hierNode.prelim+=e,r.hierNode.change+=a}function Fx(r,t){return r.parentNode===t.parentNode?1:2}var Ux=function(){function r(){this.parentPoint=[],this.childPoints=[]}return r}(),Hx=function(r){W(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ux},t.prototype.buildPath=function(e,a){var n=a.childPoints,i=n.length,o=a.parentPoint,l=n[0],s=n[i-1];if(i===1){e.moveTo(o[0],o[1]),e.lineTo(l[0],l[1]);return}var u=a.orient,d=u==="TB"||u==="BT"?0:1,c=1-d,f=de(a.forkPosition,1),p=[];p[d]=o[d],p[c]=o[c]+(s[c]-o[c])*f,e.moveTo(o[0],o[1]),e.lineTo(p[0],p[1]),e.moveTo(l[0],l[1]),p[d]=l[d],e.lineTo(p[0],p[1]),p[d]=s[d],e.lineTo(p[0],p[1]),e.lineTo(s[0],s[1]);for(var g=1;g<i-1;g++){var v=n[g];e.moveTo(v[0],v[1]),p[d]=v[d],e.lineTo(p[0],p[1])}},t}(Tt),Wx=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._mainGroup=new xe,e}return t.prototype.init=function(e,a){this._controller=new Di(a.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,a,n){var i=e.getData(),o=e.layoutInfo,l=this._mainGroup,s=e.get("layout");s==="radial"?(l.x=o.x+o.width/2,l.y=o.y+o.height/2):(l.x=o.x,l.y=o.y),this._updateViewCoordSys(e,n),this._updateController(e,a,n);var u=this._data;i.diff(u).add(function(d){yf(i,d)&&bf(i,d,null,l,e)}).update(function(d,c){var f=u.getItemGraphicEl(c);if(!yf(i,d)){f&&Sf(u,c,f,l,e);return}bf(i,d,f,l,e)}).remove(function(d){var c=u.getItemGraphicEl(d);c&&Sf(u,d,c,l,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&i.eachItemGraphicEl(function(d,c){d.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:c})})}),this._data=i},t.prototype._updateViewCoordSys=function(e,a){var n=e.getData(),i=[];n.each(function(c){var f=n.getItemLayout(c);f&&!isNaN(f.x)&&!isNaN(f.y)&&i.push([+f.x,+f.y])});var o=[],l=[];Yo(i,o,l);var s=this._min,u=this._max;l[0]-o[0]===0&&(o[0]=s?s[0]:o[0]-1,l[0]=u?u[0]:l[0]+1),l[1]-o[1]===0&&(o[1]=s?s[1]:o[1]-1,l[1]=u?u[1]:l[1]+1);var d=e.coordinateSystem=new Mi;d.zoomLimit=e.get("scaleLimit"),d.setBoundingRect(o[0],o[1],l[0]-o[0],l[1]-o[1]),d.setCenter(e.get("center"),a),d.setZoom(e.get("zoom")),this.group.attr({x:d.x,y:d.y,scaleX:d.scaleX,scaleY:d.scaleY}),this._min=o,this._max=l},t.prototype._updateController=function(e,a,n){var i=this,o=this._controller,l=this._controllerHost,s=this.group;o.setPointerChecker(function(u,d,c){var f=s.getBoundingRect();return f.applyTransform(s.transform),f.contain(d,c)&&!tl(u,n,e)}),o.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){Hu(l,u.dx,u.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Wu(l,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),i._updateNodeAndLinkScale(e),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var a=e.getData(),n=this._getNodeGlobalScale(e);a.eachItemGraphicEl(function(i,o){i.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(e){var a=e.coordinateSystem;if(a.type!=="view")return 1;var n=this._nodeScaleRatio,i=a.scaleX||1,o=a.getZoom(),l=(o-1)*n+1;return l/i},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(ut);function yf(r,t){var e=r.getItemLayout(t);return e&&!isNaN(e.x)&&!isNaN(e.y)}function bf(r,t,e,a,n){var i=!e,o=r.tree.getNodeByDataIndex(t),l=o.getModel(),s=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?s:"#fff",d=r.tree.root,c=o.parentNode===d?o:o.parentNode||o,f=r.getItemGraphicEl(c.dataIndex),p=c.getLayout(),g=f?{x:f.__oldX,y:f.__oldY,rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:p,v=o.getLayout();i?(e=new ki(r,t,null,{symbolInnerColor:u,useNameLabel:!0}),e.x=g.x,e.y=g.y):e.updateData(r,t,null,{symbolInnerColor:u,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=v.rawX,e.__radialRawY=v.rawY,a.add(e),r.setItemGraphicEl(t,e),e.__oldX=e.x,e.__oldY=e.y,Ke(e,{x:v.x,y:v.y},n);var y=e.getSymbolPath();if(n.get("layout")==="radial"){var _=d.children[0],S=_.getLayout(),w=_.children.length,T=void 0,C=void 0;if(v.x===S.x&&o.isExpand===!0&&_.children.length){var k={x:(_.children[0].getLayout().x+_.children[w-1].getLayout().x)/2,y:(_.children[0].getLayout().y+_.children[w-1].getLayout().y)/2};T=Math.atan2(k.y-S.y,k.x-S.x),T<0&&(T=Math.PI*2+T),C=k.x<S.x,C&&(T=T-Math.PI)}else T=Math.atan2(v.y-S.y,v.x-S.x),T<0&&(T=Math.PI*2+T),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(C=v.x<S.x,C&&(T=T-Math.PI)):(C=v.x>S.x,C||(T=T-Math.PI));var A=C?"left":"right",I=l.getModel("label"),M=I.get("rotate"),D=M*(Math.PI/180),L=y.getTextContent();L&&(y.setTextConfig({position:I.get("position")||A,rotation:M==null?-T:D,origin:"center"}),L.setStyle("verticalAlign","middle"))}var E=l.get(["emphasis","focus"]),R=E==="relative"?Ms(o.getAncestorsIndices(),o.getDescendantIndices()):E==="ancestor"?o.getAncestorsIndices():E==="descendant"?o.getDescendantIndices():null;R&&(qe(e).focus=R),Yx(n,o,d,e,g,p,v,a),e.__edge&&(e.onHoverStateChange=function(V){if(V!=="blur"){var z=o.parentNode&&r.getItemGraphicEl(o.parentNode.dataIndex);z&&z.hoverState===y1||io(e.__edge,V)}})}function Yx(r,t,e,a,n,i,o,l){var s=t.getModel(),u=r.get("edgeShape"),d=r.get("layout"),c=r.getOrient(),f=r.get(["lineStyle","curveness"]),p=r.get("edgeForkPosition"),g=s.getModel("lineStyle").getLineStyle(),v=a.__edge;if(u==="curve")t.parentNode&&t.parentNode!==e&&(v||(v=a.__edge=new Fg({shape:Gs(d,c,f,n,n)})),Ke(v,{shape:Gs(d,c,f,i,o)},r));else if(u==="polyline"&&d==="orthogonal"&&t!==e&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var y=t.children,_=[],S=0;S<y.length;S++){var w=y[S].getLayout();_.push([w.x,w.y])}v||(v=a.__edge=new Hx({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:c,forkPosition:p}})),Ke(v,{shape:{parentPoint:[o.x,o.y],childPoints:_}},r)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(Ne({strokeNoScale:!0,fill:null},g)),Xt(v,s,"lineStyle"),pn(v),l.add(v))}function _f(r,t,e,a,n){var i=t.tree.root,o=em(i,r),l=o.source,s=o.sourceLayout,u=t.getItemGraphicEl(r.dataIndex);if(u){var d=t.getItemGraphicEl(l.dataIndex),c=d.__edge,f=u.__edge||(l.isExpand===!1||l.children.length===1?c:void 0),p=a.get("edgeShape"),g=a.get("layout"),v=a.get("orient"),y=a.get(["lineStyle","curveness"]);f&&(p==="curve"?cn(f,{shape:Gs(g,v,y,s,s),style:{opacity:0}},a,{cb:function(){e.remove(f)},removeOpt:n}):p==="polyline"&&a.get("layout")==="orthogonal"&&cn(f,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},a,{cb:function(){e.remove(f)},removeOpt:n}))}}function em(r,t){for(var e=t.parentNode===r?t:t.parentNode||t,a;a=e.getLayout(),a==null;)e=e.parentNode===r?e:e.parentNode||e;return{source:e,sourceLayout:a}}function Sf(r,t,e,a,n){var i=r.tree.getNodeByDataIndex(t),o=r.tree.root,l=em(o,i).sourceLayout,s={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};cn(e,{x:l.x+1,y:l.y+1},n,{cb:function(){a.remove(e),r.setItemGraphicEl(t,null)},removeOpt:s}),e.fadeOut(null,r.hostModel,{fadeLabel:!0,animation:s}),i.children.forEach(function(u){_f(u,r,a,n,s)}),_f(i,r,a,n,s)}function Gs(r,t,e,a,n){var i,o,l,s,u,d,c,f;if(r==="radial"){u=a.rawX,c=a.rawY,d=n.rawX,f=n.rawY;var p=Gn(u,c),g=Gn(u,c+(f-c)*e),v=Gn(d,f+(c-f)*e),y=Gn(d,f);return{x1:p.x||0,y1:p.y||0,x2:y.x||0,y2:y.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=a.x,c=a.y,d=n.x,f=n.y,(t==="LR"||t==="RL")&&(i=u+(d-u)*e,o=c,l=d+(u-d)*e,s=f),(t==="TB"||t==="BT")&&(i=u,o=c+(f-c)*e,l=d,s=f+(c-f)*e);return{x1:u,y1:c,x2:d,y2:f,cpx1:i,cpy1:o,cpx2:l,cpy2:s}}var ma=ht();function tm(r){var t=r.mainData,e=r.datas;e||(e={main:t},r.datasAttr={main:"data"}),r.datas=r.mainData=null,am(t,e,r),O(e,function(a){O(t.TRANSFERABLE_METHODS,function(n){a.wrapMethod(n,Ve(jx,r))})}),t.wrapMethod("cloneShallow",Ve(Xx,r)),O(t.CHANGABLE_METHODS,function(a){t.wrapMethod(a,Ve(Zx,r))}),Jn(e[t.dataType]===t)}function jx(r,t){if(Jx(this)){var e=be({},ma(this).datas);e[this.dataType]=t,am(t,e,r)}else Zu(t,this.dataType,ma(this).mainData,r);return t}function Zx(r,t){return r.struct&&r.struct.update(),t}function Xx(r,t){return O(ma(t).datas,function(e,a){e!==t&&Zu(e.cloneShallow(),a,t,r)}),t}function Kx(r){var t=ma(this).mainData;return r==null||t==null?t:ma(t).datas[r]}function Qx(){var r=ma(this).mainData;return r==null?[{data:r}]:ne(vt(ma(r).datas),function(t){return{type:t,data:ma(r).datas[t]}})}function Jx(r){return ma(r).mainData===r}function am(r,t,e){ma(r).datas={},O(t,function(a,n){Zu(a,n,r,e)})}function Zu(r,t,e,a){ma(e).datas[t]=r,ma(r).mainData=e,r.dataType=t,a.struct&&(r[a.structAttr]=a.struct,a.struct[a.datasAttr[t]]=r),r.getLinkedData=Kx,r.getLinkedDataAll=Qx}var e2=function(){function r(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return r.prototype.isRemoved=function(){return this.dataIndex<0},r.prototype.eachNode=function(t,e,a){Be(t)&&(a=e,e=t,t=null),t=t||{},Re(t)&&(t={order:t});var n=t.order||"preorder",i=this[t.attr||"children"],o;n==="preorder"&&(o=e.call(a,this));for(var l=0;!o&&l<i.length;l++)i[l].eachNode(t,e,a);n==="postorder"&&e.call(a,this)},r.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var a=0;a<this.children.length;a++){var n=this.children[a];n.updateDepthAndHeight(t+1),n.height>e&&(e=n.height)}this.height=e+1},r.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,a=this.children,n=a.length;e<n;e++){var i=a[e].getNodeById(t);if(i)return i}},r.prototype.contains=function(t){if(t===this)return!0;for(var e=0,a=this.children,n=a.length;e<n;e++){var i=a[e].contains(t);if(i)return i}},r.prototype.getAncestors=function(t){for(var e=[],a=t?this:this.parentNode;a;)e.push(a),a=a.parentNode;return e.reverse(),e},r.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},r.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},r.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},r.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},r.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostTree,a=e.data.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},r.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},r.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},r.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},r.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},r.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},r.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},r.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},r}(),Xu=function(){function r(t){this.type="tree",this._nodes=[],this.hostModel=t}return r.prototype.eachNode=function(t,e,a){this.root.eachNode(t,e,a)},r.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},r.prototype.getNodeById=function(t){return this.root.getNodeById(t)},r.prototype.update=function(){for(var t=this.data,e=this._nodes,a=0,n=e.length;a<n;a++)e[a].dataIndex=-1;for(var a=0,n=t.count();a<n;a++)e[t.getRawIndex(a)].dataIndex=a},r.prototype.clearLayouts=function(){this.data.clearItemLayouts()},r.createTree=function(t,e,a){var n=new r(e),i=[],o=1;l(t);function l(d,c){var f=d.value;o=Math.max(o,ge(f)?f.length:1),i.push(d);var p=new e2(Oa(d.name,""),n);c?t2(p,c):n.root=p,n._nodes.push(p);var g=d.children;if(g)for(var v=0;v<g.length;v++)l(g[v],p)}n.root.updateDepthAndHeight(0);var s=xu(i,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new da(s,e);return u.initData(i),a&&a(u),tm({mainData:u,struct:n,structAttr:"tree"}),n.update(),n},r}();function t2(r,t){var e=t.children;r.parentNode!==t&&(e.push(r),r.parentNode=t)}function li(r,t,e){if(r&&nt(t,r.type)>=0){var a=e.getData().tree.root,n=r.targetNode;if(Re(n)&&(n=a.getNodeById(n)),n&&a.contains(n))return{node:n};var i=r.targetNodeId;if(i!=null&&(n=a.getNodeById(i)))return{node:n}}}function rm(r){for(var t=[];r;)r=r.parentNode,r&&t.push(r);return t.reverse()}function Ku(r,t){var e=rm(r);return nt(e,t)>=0}function rl(r,t){for(var e=[];r;){var a=r.dataIndex;e.push({name:r.name,dataIndex:a,value:t.getRawValue(a)}),r=r.parentNode}return e.reverse(),e}var a2=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e){var a={name:e.name,children:e.data},n=e.leaves||{},i=new na(n,this,this.ecModel),o=Xu.createTree(a,this,l);function l(c){c.wrapMethod("getItemModel",function(f,p){var g=o.getNodeByDataIndex(p);return g&&g.children.length&&g.isExpand||(f.parentModel=i),f})}var s=0;o.eachNode("preorder",function(c){c.depth>s&&(s=c.depth)});var u=e.expandAndCollapse,d=u&&e.initialTreeDepth>=0?e.initialTreeDepth:s;return o.root.eachNode("preorder",function(c){var f=c.hostTree.data.getRawDataItem(c.dataIndex);c.isExpand=f&&f.collapsed!=null?!f.collapsed:c.depth<=d}),o.data},t.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,a,n){for(var i=this.getData().tree,o=i.root.children[0],l=i.getNodeByDataIndex(e),s=l.getValue(),u=l.name;l&&l!==o;)u=l.parentNode.name+"."+u,l=l.parentNode;return ra("nameValue",{name:u,value:s,noValue:isNaN(s)||s==null})},t.prototype.getDataParams=function(e){var a=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return a.treeAncestors=rl(n,this),a.collapsed=!n.isExpand,a},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Ct);function r2(r,t,e){for(var a=[r],n=[],i;i=a.pop();)if(n.push(i),i.isExpand){var o=i.children;if(o.length)for(var l=0;l<o.length;l++)a.push(o[l])}for(;i=n.pop();)t(i,e)}function Pn(r,t){for(var e=[r],a;a=e.pop();)if(t(a),a.isExpand){var n=a.children;if(n.length)for(var i=n.length-1;i>=0;i--)e.push(n[i])}}function n2(r,t){r.eachSeriesByType("tree",function(e){i2(e,t)})}function i2(r,t){var e=$x(r,t);r.layoutInfo=e;var a=r.get("layout"),n=0,i=0,o=null;a==="radial"?(n=2*Math.PI,i=Math.min(e.height,e.width)/2,o=mf(function(w,T){return(w.parentNode===T.parentNode?1:2)/w.depth})):(n=e.width,i=e.height,o=mf());var l=r.getData().tree.root,s=l.children[0];if(s){Ex(l),r2(s,Nx,o),l.hierNode.modifier=-s.hierNode.prelim,Pn(s,Ox);var u=s,d=s,c=s;Pn(s,function(w){var T=w.getLayout().x;T<u.getLayout().x&&(u=w),T>d.getLayout().x&&(d=w),w.depth>c.depth&&(c=w)});var f=u===d?1:o(u,d)/2,p=f-u.getLayout().x,g=0,v=0,y=0,_=0;if(a==="radial")g=n/(d.getLayout().x+f+p),v=i/(c.depth-1||1),Pn(s,function(w){y=(w.getLayout().x+p)*g,_=(w.depth-1)*v;var T=Gn(y,_);w.setLayout({x:T.x,y:T.y,rawX:y,rawY:_},!0)});else{var S=r.getOrient();S==="RL"||S==="LR"?(v=i/(d.getLayout().x+f+p),g=n/(c.depth-1||1),Pn(s,function(w){_=(w.getLayout().x+p)*v,y=S==="LR"?(w.depth-1)*g:n-(w.depth-1)*g,w.setLayout({x:y,y:_},!0)})):(S==="TB"||S==="BT")&&(g=n/(d.getLayout().x+f+p),v=i/(c.depth-1||1),Pn(s,function(w){y=(w.getLayout().x+p)*g,_=S==="TB"?(w.depth-1)*v:i-(w.depth-1)*v,w.setLayout({x:y,y:_},!0)}))}}}function o2(r){r.eachSeriesByType("tree",function(t){var e=t.getData(),a=e.tree;a.eachNode(function(n){var i=n.getModel(),o=i.getModel("itemStyle").getItemStyle(),l=e.ensureUniqueItemVisual(n.dataIndex,"style");be(l,o)})})}function l2(r){r.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(a){var n=t.dataIndex,i=a.getData().tree,o=i.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),r.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e,a){e.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=n.coordinateSystem,o=ju(i,t,void 0,a);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}function s2(r){r.registerChartView(Wx),r.registerSeriesModel(a2),r.registerLayout(n2),r.registerVisual(o2),l2(r)}var wf=["treemapZoomToNode","treemapRender","treemapMove"];function u2(r){for(var t=0;t<wf.length;t++)r.registerAction({type:wf[t],update:"updateView"},ar);r.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,a){a.eachComponent({mainType:"series",subType:"treemap",query:e},n);function n(i,o){var l=["treemapZoomToNode","treemapRootToNode"],s=li(e,l,i);if(s){var u=i.getViewRoot();u&&(e.direction=Ku(u,s.node)?"rollUp":"drillDown"),i.resetViewRoot(s.node)}}})}function nm(r){var t=r.getData(),e=t.tree,a={};e.eachNode(function(n){for(var i=n;i&&i.depth>1;)i=i.parentNode;var o=Ps(r.ecModel,i.name||i.dataIndex+"",a);n.setVisual("decal",o)})}var d2=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.preventUsingHoverLayer=!0,e}return t.prototype.getInitialData=function(e,a){var n={name:e.name,children:e.data};im(n);var i=e.levels||[],o=this.designatedVisualItemStyle={},l=new na({itemStyle:o},this,a);i=e.levels=c2(i,a);var s=ne(i||[],function(c){return new na(c,l,a)},this),u=Xu.createTree(n,this,d);function d(c){c.wrapMethod("getItemModel",function(f,p){var g=u.getNodeByDataIndex(p),v=g?s[g.depth]:null;return f.parentModel=v||l,f})}return u.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,a,n){var i=this.getData(),o=this.getRawValue(e),l=i.getName(e);return ra("nameValue",{name:l,value:o})},t.prototype.getDataParams=function(e){var a=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return a.treeAncestors=rl(n,this),a.treePathInfo=a.treeAncestors,a},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},be(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var a=this._idIndexMap;a||(a=this._idIndexMap=Pe(),this._idIndexMapCount=0);var n=a.get(e);return n==null&&a.set(e,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var a=this.getRawData().tree.root;(!e||e!==a&&!a.contains(e))&&(this._viewRoot=a)},t.prototype.enableAriaDecal=function(){nm(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(Ct);function im(r){var t=0;O(r.children,function(a){im(a);var n=a.value;ge(n)&&(n=n[0]),t+=n});var e=r.value;ge(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),ge(r.value)?r.value[0]=e:r.value=e}function c2(r,t){var e=jt(t.get("color")),a=jt(t.get(["aria","decal","decals"]));if(e){r=r||[];var n,i;O(r,function(l){var s=new na(l),u=s.get("color"),d=s.get("decal");(s.get(["itemStyle","color"])||u&&u!=="none")&&(n=!0),(s.get(["itemStyle","decal"])||d&&d!=="none")&&(i=!0)});var o=r[0]||(r[0]={});return n||(o.color=e.slice()),!i&&a&&(o.decal=a.slice()),r}}var f2=8,xf=8,Vl=5,p2=function(){function r(t){this.group=new xe,t.add(this.group)}return r.prototype.render=function(t,e,a,n){var i=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!i.get("show")||!a)){var l=i.getModel("itemStyle"),s=i.getModel("emphasis"),u=l.getModel("textStyle"),d=s.getModel(["itemStyle","textStyle"]),c={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(a,c,u),this._renderContent(t,c,l,s,u,d,n),jo(o,c.pos,c.box)}},r.prototype._prepare=function(t,e,a){for(var n=t;n;n=n.parentNode){var i=Oa(n.getModel().get("name"),""),o=a.getTextRect(i),l=Math.max(o.width+f2*2,e.emptyItemWidth);e.totalWidth+=l+xf,e.renderList.push({node:n,text:i,width:l})}},r.prototype._renderContent=function(t,e,a,n,i,o,l){for(var s=0,u=e.emptyItemWidth,d=t.get(["breadcrumb","height"]),c=b1(e.pos,e.box),f=e.totalWidth,p=e.renderList,g=n.getModel("itemStyle").getItemStyle(),v=p.length-1;v>=0;v--){var y=p[v],_=y.node,S=y.width,w=y.text;f>c.width&&(f-=S-u,S=u,w=null);var T=new ya({shape:{points:v2(s,0,S,d,v===p.length-1,v===0)},style:Ne(a.getItemStyle(),{lineJoin:"bevel"}),textContent:new Xe({style:lt(i,{text:w})}),textConfig:{position:"inside"},z2:Si*1e4,onclick:Ve(l,_)});T.disableLabelAnimation=!0,T.getTextContent().ensureState("emphasis").style=lt(o,{text:w}),T.ensureState("emphasis").style=g,dt(T,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(T),g2(T,t,_),s+=S+xf}},r.prototype.remove=function(){this.group.removeAll()},r}();function v2(r,t,e,a,n,i){var o=[[n?r:r-Vl,t],[r+e,t],[r+e,t+a],[n?r:r-Vl,t+a]];return!i&&o.splice(2,0,[r+e+Vl,t+a/2]),!n&&o.push([r,t+a/2]),o}function g2(r,t,e){qe(r).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&rl(e,t)}}var h2=function(){function r(){this._storage=[],this._elExistsMap={}}return r.prototype.add=function(t,e,a,n,i){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:a,delay:n,easing:i}),!0)},r.prototype.finished=function(t){return this._finishedCallback=t,this},r.prototype.start=function(){for(var t=this,e=this._storage.length,a=function(){e--,e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},n=0,i=this._storage.length;n<i;n++){var o=this._storage[n];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:a,aborted:a})}return this},r}();function m2(){return new h2}var Fs=xe,Tf=et,Cf=3,kf="label",Af="upperLabel",y2=Si*10,b2=Si*2,_2=Si*3,vr=Hg([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),If=function(r){var t=vr(r);return t.stroke=t.fill=t.lineWidth=null,t},mo=ht(),S2=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._state="ready",e._storage=Ln(),e}return t.prototype.render=function(e,a,n,i){var o=a.findComponents({mainType:"series",subType:"treemap",query:i});if(!(nt(o,e)<0)){this.seriesModel=e,this.api=n,this.ecModel=a;var l=["treemapZoomToNode","treemapRootToNode"],s=li(i,l,e),u=i&&i.type,d=e.layoutInfo,c=!this._oldTree,f=this._storage,p=u==="treemapRootToNode"&&s&&f?{rootNodeGroup:f.nodeGroup[s.node.getRawIndex()],direction:i.direction}:null,g=this._giveContainerGroup(d),v=e.get("animation"),y=this._doRender(g,e,p);v&&!c&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(g,y,e,p):y.renderFinally(),this._resetController(n),this._renderBreadcrumb(e,n,s)}},t.prototype._giveContainerGroup=function(e){var a=this._containerGroup;return a||(a=this._containerGroup=new Fs,this._initEvents(a),this.group.add(a)),a.x=e.x,a.y=e.y,a},t.prototype._doRender=function(e,a,n){var i=a.getData().tree,o=this._oldTree,l=Ln(),s=Ln(),u=this._storage,d=[];function c(S,w,T,C){return w2(a,s,u,n,l,d,S,w,T,C)}v(i.root?[i.root]:[],o&&o.root?[o.root]:[],e,i===o||!o,0);var f=y(u);if(this._oldTree=i,this._storage=s,this._controllerHost){var p=this.seriesModel.layoutInfo,g=i.root.getLayout();g.width===p.width&&g.height===p.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:l,willDeleteEls:f,renderFinally:_};function v(S,w,T,C,k){C?(w=S,O(S,function(M,D){!M.isRemoved()&&I(D,D)})):new rr(w,S,A,A).add(I).update(I).remove(Ve(I,null)).execute();function A(M){return M.getId()}function I(M,D){var L=M!=null?S[M]:null,E=D!=null?w[D]:null,R=c(L,E,T,k);R&&v(L&&L.viewChildren||[],E&&E.viewChildren||[],R,C,k+1)}}function y(S){var w=Ln();return S&&O(S,function(T,C){var k=w[C];O(T,function(A){A&&(k.push(A),mo(A).willDelete=!0)})}),w}function _(){O(f,function(S){O(S,function(w){w.parent&&w.parent.remove(w)})}),O(d,function(S){S.invisible=!0,S.dirty()})}},t.prototype._doAnimation=function(e,a,n,i){var o=n.get("animationDurationUpdate"),l=n.get("animationEasing"),s=(Be(o)?0:o)||0,u=(Be(l)?null:l)||"cubicOut",d=m2();O(a.willDeleteEls,function(c,f){O(c,function(p,g){if(!p.invisible){var v=p.parent,y,_=mo(v);if(i&&i.direction==="drillDown")y=v===i.rootNodeGroup?{shape:{x:0,y:0,width:_.nodeWidth,height:_.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var S=0,w=0;_.willDelete||(S=_.nodeWidth/2,w=_.nodeHeight/2),y=f==="nodeGroup"?{x:S,y:w,style:{opacity:0}}:{shape:{x:S,y:w,width:0,height:0},style:{opacity:0}}}y&&d.add(p,y,s,0,u)}})}),O(this._storage,function(c,f){O(c,function(p,g){var v=a.lastsForAnimation[f][g],y={};v&&(p instanceof xe?v.oldX!=null&&(y.x=p.x,y.y=p.y,p.x=v.oldX,p.y=v.oldY):(v.oldShape&&(y.shape=be({},p.shape),p.setShape(v.oldShape)),v.fadein?(p.setStyle("opacity",0),y.style={opacity:1}):p.style.opacity!==1&&(y.style={opacity:1})),d.add(p,y,s,0,u))})},this),this._state="animating",d.finished(ye(function(){this._state="ready",a.renderFinally()},this)).start()},t.prototype._resetController=function(e){var a=this._controller,n=this._controllerHost;n||(this._controllerHost={target:this.group},n=this._controllerHost),a||(a=this._controller=new Di(e.getZr()),a.enable(this.seriesModel.get("roam")),n.zoomLimit=this.seriesModel.get("scaleLimit"),n.zoom=this.seriesModel.get("zoom"),a.on("pan",ye(this._onPan,this)),a.on("zoom",ye(this._onZoom,this)));var i=new st(0,0,e.getWidth(),e.getHeight());a.setPointerChecker(function(o,l,s){return i.contain(l,s)})},t.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>Cf||Math.abs(e.dy)>Cf)){var a=this.seriesModel.getData().tree.root;if(!a)return;var n=a.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(e){var a=e.originX,n=e.originY,i=e.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var l=o.getLayout();if(!l)return;var s=new st(l.x,l.y,l.width,l.height),u=null,d=this._controllerHost;u=d.zoomLimit;var c=d.zoom=d.zoom||1;if(c*=i,u){var f=u.min||0,p=u.max||1/0;c=Math.max(Math.min(p,c),f)}var g=c/d.zoom;d.zoom=c;var v=this.seriesModel.layoutInfo;a-=v.x,n-=v.y;var y=Cn();Pr(y,y,[-a,-n]),$g(y,y,[g,g]),Pr(y,y,[a,n]),s.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x,y:s.y,width:s.width,height:s.height}})}},t.prototype._initEvents=function(e){var a=this;e.on("click",function(n){if(a._state==="ready"){var i=a.seriesModel.get("nodeClick",!0);if(i){var o=a.findTarget(n.offsetX,n.offsetY);if(o){var l=o.node;if(l.getLayout().isLeafRoot)a._rootToNode(o);else if(i==="zoomToNode")a._zoomToNode(o);else if(i==="link"){var s=l.hostTree.data.getItemModel(l.dataIndex),u=s.get("link",!0),d=s.get("target",!0)||"blank";u&&Ug(u,d)}}}}},this)},t.prototype._renderBreadcrumb=function(e,a,n){var i=this;n||(n=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(a.getWidth()/2,a.getHeight()/2),n||(n={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new p2(this.group))).render(e,a,n.node,function(o){i._state!=="animating"&&(Ku(e.getViewRoot(),o)?i._rootToNode({node:o}):i._zoomToNode({node:o}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Ln(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,a){var n,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},function(o){var l=this._storage.background[o.getRawIndex()];if(l){var s=l.transformCoordToLocal(e,a),u=l.shape;if(u.x<=s[0]&&s[0]<=u.x+u.width&&u.y<=s[1]&&s[1]<=u.y+u.height)n={node:o,offsetX:s[0],offsetY:s[1]};else return!1}},this),n},t.type="treemap",t}(ut);function Ln(){return{nodeGroup:[],background:[],content:[]}}function w2(r,t,e,a,n,i,o,l,s,u){if(!o)return;var d=o.getLayout(),c=r.getData(),f=o.getModel();if(c.setItemGraphicEl(o.dataIndex,null),!d||!d.isInView)return;var p=d.width,g=d.height,v=d.borderWidth,y=d.invisible,_=o.getRawIndex(),S=l&&l.getRawIndex(),w=o.viewChildren,T=d.upperHeight,C=w&&w.length,k=f.getModel("itemStyle"),A=f.getModel(["emphasis","itemStyle"]),I=f.getModel(["blur","itemStyle"]),M=f.getModel(["select","itemStyle"]),D=k.get("borderRadius")||0,L=he("nodeGroup",Fs);if(!L)return;if(s.add(L),L.x=d.x||0,L.y=d.y||0,L.markRedraw(),mo(L).nodeWidth=p,mo(L).nodeHeight=g,d.isAboveViewRoot)return L;var E=he("background",Tf,u,b2);E&&H(L,E,C&&d.upperLabelHeight);var R=f.getModel("emphasis"),V=R.get("focus"),z=R.get("blurScope"),G=R.get("disabled"),q=V==="ancestor"?o.getAncestorsIndices():V==="descendant"?o.getDescendantIndices():V;if(C)jd(L)&&zn(L,!1),E&&(zn(E,!G),c.setItemGraphicEl(o.dataIndex,E),Zd(E,q,z));else{var Z=he("content",Tf,u,_2);Z&&F(L,Z),E.disableMorphing=!0,E&&jd(E)&&zn(E,!1),zn(L,!G),c.setItemGraphicEl(o.dataIndex,L),Zd(L,q,z)}return L;function H(Ee,we,Ge){var ze=qe(we);if(ze.dataIndex=o.dataIndex,ze.seriesIndex=r.seriesIndex,we.setShape({x:0,y:0,width:p,height:g,r:D}),y)re(we);else{we.invisible=!1;var Ye=o.getVisual("style"),kt=Ye.stroke,Vt=If(k);Vt.fill=kt;var je=vr(A);je.fill=A.get("borderColor");var Rt=vr(I);Rt.fill=I.get("borderColor");var Bt=vr(M);if(Bt.fill=M.get("borderColor"),Ge){var ca=p-2*v;_e(we,kt,Ye.opacity,{x:v,y:0,width:ca,height:T})}else we.removeTextContent();we.setStyle(Vt),we.ensureState("emphasis").style=je,we.ensureState("blur").style=Rt,we.ensureState("select").style=Bt,pn(we)}Ee.add(we)}function F(Ee,we){var Ge=qe(we);Ge.dataIndex=o.dataIndex,Ge.seriesIndex=r.seriesIndex;var ze=Math.max(p-2*v,0),Ye=Math.max(g-2*v,0);if(we.culling=!0,we.setShape({x:v,y:v,width:ze,height:Ye,r:D}),y)re(we);else{we.invisible=!1;var kt=o.getVisual("style"),Vt=kt.fill,je=If(k);je.fill=Vt,je.decal=kt.decal;var Rt=vr(A),Bt=vr(I),ca=vr(M);_e(we,Vt,kt.opacity,null),we.setStyle(je),we.ensureState("emphasis").style=Rt,we.ensureState("blur").style=Bt,we.ensureState("select").style=ca,pn(we)}Ee.add(we)}function re(Ee){!Ee.invisible&&i.push(Ee)}function _e(Ee,we,Ge,ze){var Ye=f.getModel(ze?Af:kf),kt=Oa(f.get("name"),null),Vt=Ye.getShallow("show");Zt(Ee,Ot(f,ze?Af:kf),{defaultText:Vt?kt:null,inheritColor:we,defaultOpacity:Ge,labelFetcher:r,labelDataIndex:o.dataIndex});var je=Ee.getTextContent();if(je){var Rt=je.style,Bt=_1(Rt.padding||0);ze&&(Ee.setTextConfig({layoutRect:ze}),je.disableLabelLayout=!0),je.beforeUpdate=function(){var ka=Math.max((ze?ze.width:Ee.shape.width)-Bt[1]-Bt[3],0),Aa=Math.max((ze?ze.height:Ee.shape.height)-Bt[0]-Bt[2],0);(Rt.width!==ka||Rt.height!==Aa)&&je.setStyle({width:ka,height:Aa})},Rt.truncateMinChar=2,Rt.lineOverflow="truncate",te(Rt,ze,d);var ca=je.getState("emphasis");te(ca?ca.style:null,ze,d)}}function te(Ee,we,Ge){var ze=Ee?Ee.text:null;if(!we&&Ge.isLeafRoot&&ze!=null){var Ye=r.get("drillDownIcon",!0);Ee.text=Ye?Ye+" "+ze:ze}}function he(Ee,we,Ge,ze){var Ye=S!=null&&e[Ee][S],kt=n[Ee];return Ye?(e[Ee][S]=null,Ie(kt,Ye)):y||(Ye=new we,Ye instanceof Lr&&(Ye.z2=x2(Ge,ze)),ke(kt,Ye)),t[Ee][_]=Ye}function Ie(Ee,we){var Ge=Ee[_]={};we instanceof Fs?(Ge.oldX=we.x,Ge.oldY=we.y):Ge.oldShape=be({},we.shape)}function ke(Ee,we){var Ge=Ee[_]={},ze=o.parentNode,Ye=we instanceof xe;if(ze&&(!a||a.direction==="drillDown")){var kt=0,Vt=0,je=n.background[ze.getRawIndex()];!a&&je&&je.oldShape&&(kt=je.oldShape.width,Vt=je.oldShape.height),Ye?(Ge.oldX=0,Ge.oldY=Vt):Ge.oldShape={x:kt,y:Vt,width:0,height:0}}Ge.fadein=!Ye}}function x2(r,t){return r*y2+t}var si=O,T2=Nt,yo=-1,_t=function(){function r(t){var e=t.mappingMethod,a=t.type,n=this.option=Fe(t);this.type=a,this.mappingMethod=e,this._normalizeData=A2[e];var i=r.visualHandlers[a];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[e],e==="piecewise"?(Rl(n),C2(n)):e==="category"?n.categories?k2(n):Rl(n,!0):(Jn(e!=="linear"||n.dataExtent),Rl(n))}return r.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},r.prototype.getNormalizer=function(){return ye(this._normalizeData,this)},r.listVisualTypes=function(){return vt(r.visualHandlers)},r.isValidType=function(t){return r.visualHandlers.hasOwnProperty(t)},r.eachVisual=function(t,e,a){Nt(t)?O(t,e,a):e.call(a,t)},r.mapVisual=function(t,e,a){var n,i=ge(t)?[]:Nt(t)?{}:(n=!0,null);return r.eachVisual(t,function(o,l){var s=e.call(a,o,l);n?i=s:i[l]=s}),i},r.retrieveVisuals=function(t){var e={},a;return t&&si(r.visualHandlers,function(n,i){t.hasOwnProperty(i)&&(e[i]=t[i],a=!0)}),a?e:null},r.prepareVisualTypes=function(t){if(ge(t))t=t.slice();else if(T2(t)){var e=[];si(t,function(a,n){e.push(n)}),t=e}else return[];return t.sort(function(a,n){return n==="color"&&a!=="color"&&a.indexOf("color")===0?1:-1}),t},r.dependsOn=function(t,e){return e==="color"?!!(t&&t.indexOf(e)===0):t===e},r.findPieceIndex=function(t,e,a){for(var n,i=1/0,o=0,l=e.length;o<l;o++){var s=e[o].value;if(s!=null){if(s===t||Re(s)&&s===t+"")return o;a&&f(s,o)}}for(var o=0,l=e.length;o<l;o++){var u=e[o],d=u.interval,c=u.close;if(d){if(d[0]===-1/0){if(zi(c[1],t,d[1]))return o}else if(d[1]===1/0){if(zi(c[0],d[0],t))return o}else if(zi(c[0],d[0],t)&&zi(c[1],t,d[1]))return o;a&&f(d[0],o),a&&f(d[1],o)}}if(a)return t===1/0?e.length-1:t===-1/0?0:n;function f(p,g){var v=Math.abs(p-t);v<i&&(i=v,n=g)}},r.visualHandlers={color:{applyVisual:Vn("color"),getColorMapper:function(){var t=this.option;return ye(t.mappingMethod==="category"?function(e,a){return!a&&(e=this._normalizeData(e)),Fn.call(this,e)}:function(e,a,n){var i=!!n;return!a&&(e=this._normalizeData(e)),n=vl(e,t.parsedVisual,n),i?n:Ji(n,"rgba")},this)},_normalizedToVisual:{linear:function(t){return Ji(vl(t,this.option.parsedVisual),"rgba")},category:Fn,piecewise:function(t,e){var a=Hs.call(this,e);return a==null&&(a=Ji(vl(t,this.option.parsedVisual),"rgba")),a},fixed:gr}},colorHue:$i(function(t,e){return Yn(t,e)}),colorSaturation:$i(function(t,e){return Yn(t,null,e)}),colorLightness:$i(function(t,e){return Yn(t,null,null,e)}),colorAlpha:$i(function(t,e){return oo(t,e)}),decal:{applyVisual:Vn("decal"),_normalizedToVisual:{linear:null,category:Fn,piecewise:null,fixed:null}},opacity:{applyVisual:Vn("opacity"),_normalizedToVisual:Us([0,1])},liftZ:{applyVisual:Vn("liftZ"),_normalizedToVisual:{linear:gr,category:gr,piecewise:gr,fixed:gr}},symbol:{applyVisual:function(t,e,a){var n=this.mapValueToVisual(t);a("symbol",n)},_normalizedToVisual:{linear:Df,category:Fn,piecewise:function(t,e){var a=Hs.call(this,e);return a==null&&(a=Df.call(this,t)),a},fixed:gr}},symbolSize:{applyVisual:Vn("symbolSize"),_normalizedToVisual:Us([0,1])}},r}();function C2(r){var t=r.pieceList;r.hasSpecialVisual=!1,O(t,function(e,a){e.originIndex=a,e.visual!=null&&(r.hasSpecialVisual=!0)})}function k2(r){var t=r.categories,e=r.categoryMap={},a=r.visual;if(si(t,function(o,l){e[o]=l}),!ge(a)){var n=[];Nt(a)?si(a,function(o,l){var s=e[l];n[s??yo]=o}):n[yo]=a,a=om(r,n)}for(var i=t.length-1;i>=0;i--)a[i]==null&&(delete e[t[i]],t.pop())}function Rl(r,t){var e=r.visual,a=[];Nt(e)?si(e,function(i){a.push(i)}):e!=null&&a.push(e);var n={color:1,symbol:1};!t&&a.length===1&&!n.hasOwnProperty(r.type)&&(a[1]=a[0]),om(r,a)}function $i(r){return{applyVisual:function(t,e,a){var n=this.mapValueToVisual(t);a("color",r(e("color"),n))},_normalizedToVisual:Us([0,1])}}function Df(r){var t=this.option.visual;return t[Math.round(We(r,[0,1],[0,t.length-1],!0))]||{}}function Vn(r){return function(t,e,a){a(r,this.mapValueToVisual(t))}}function Fn(r){var t=this.option.visual;return t[this.option.loop&&r!==yo?r%t.length:r]}function gr(){return this.option.visual[0]}function Us(r){return{linear:function(t){return We(t,r,this.option.visual,!0)},category:Fn,piecewise:function(t,e){var a=Hs.call(this,e);return a==null&&(a=We(t,r,this.option.visual,!0)),a},fixed:gr}}function Hs(r){var t=this.option,e=t.pieceList;if(t.hasSpecialVisual){var a=_t.findPieceIndex(r,e),n=e[a];if(n&&n.visual)return n.visual[this.type]}}function om(r,t){return r.visual=t,r.type==="color"&&(r.parsedVisual=ne(t,function(e){var a=Wg(e);return a||[0,0,0,1]})),t}var A2={linear:function(r){return We(r,this.option.dataExtent,[0,1],!0)},piecewise:function(r){var t=this.option.pieceList,e=_t.findPieceIndex(r,t,!0);if(e!=null)return We(e,[0,t.length-1],[0,1],!0)},category:function(r){var t=this.option.categories?this.option.categoryMap[r]:r;return t??yo},fixed:ar};function zi(r,t,e){return r?t<=e:t<e}var I2="itemStyle",lm=ht();const D2={seriesType:"treemap",reset:function(r){var t=r.getData().tree,e=t.root;e.isRemoved()||sm(e,{},r.getViewRoot().getAncestors(),r)}};function sm(r,t,e,a){var n=r.getModel(),i=r.getLayout(),o=r.hostTree.data;if(!(!i||i.invisible||!i.isInView)){var l=n.getModel(I2),s=M2(l,t,a),u=o.ensureUniqueItemVisual(r.dataIndex,"style"),d=l.get("borderColor"),c=l.get("borderColorSaturation"),f;c!=null&&(f=Mf(s),d=P2(c,f)),u.stroke=d;var p=r.viewChildren;if(!p||!p.length)f=Mf(s),u.fill=f;else{var g=L2(r,n,i,l,s,p);O(p,function(v,y){if(v.depth>=e.length||v===e[v.depth]){var _=V2(n,s,v,y,g,a);sm(v,_,e,a)}})}}}function M2(r,t,e){var a=be({},t),n=e.designatedVisualItemStyle;return O(["color","colorAlpha","colorSaturation"],function(i){n[i]=t[i];var o=r.get(i);n[i]=null,o!=null&&(a[i]=o)}),a}function Mf(r){var t=El(r,"color");if(t){var e=El(r,"colorAlpha"),a=El(r,"colorSaturation");return a&&(t=Yn(t,null,null,a)),e&&(t=oo(t,e)),t}}function P2(r,t){return t!=null?Yn(t,null,null,r):null}function El(r,t){var e=r[t];if(e!=null&&e!=="none")return e}function L2(r,t,e,a,n,i){if(!(!i||!i.length)){var o=Nl(t,"color")||n.color!=null&&n.color!=="none"&&(Nl(t,"colorAlpha")||Nl(t,"colorSaturation"));if(o){var l=t.get("visualMin"),s=t.get("visualMax"),u=e.dataExtent.slice();l!=null&&l<u[0]&&(u[0]=l),s!=null&&s>u[1]&&(u[1]=s);var d=t.get("colorMappingBy"),c={type:o.name,dataExtent:u,visual:o.range};c.type==="color"&&(d==="index"||d==="id")?(c.mappingMethod="category",c.loop=!0):c.mappingMethod="linear";var f=new _t(c);return lm(f).drColorMappingBy=d,f}}}function Nl(r,t){var e=r.get(t);return ge(e)&&e.length?{name:t,range:e}:null}function V2(r,t,e,a,n,i){var o=be({},t);if(n){var l=n.type,s=l==="color"&&lm(n).drColorMappingBy,u=s==="index"?a:s==="id"?i.mapIdToIndex(e.getId()):e.getValue(r.get("visualDimension"));o[l]=n.mapValueToVisual(u)}return o}var ui=Math.max,bo=Math.min,Pf=ua,Qu=O,um=["itemStyle","borderWidth"],R2=["itemStyle","gapWidth"],E2=["upperLabel","show"],N2=["upperLabel","height"];const O2={seriesType:"treemap",reset:function(r,t,e,a){var n=e.getWidth(),i=e.getHeight(),o=r.option,l=Kt(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),s=o.size||[],u=de(Pf(l.width,s[0]),n),d=de(Pf(l.height,s[1]),i),c=a&&a.type,f=["treemapZoomToNode","treemapRootToNode"],p=li(a,f,r),g=c==="treemapRender"||c==="treemapMove"?a.rootRect:null,v=r.getViewRoot(),y=rm(v);if(c!=="treemapMove"){var _=c==="treemapZoomToNode"?F2(r,p,v,u,d):g?[g.width,g.height]:[u,d],S=o.sort;S&&S!=="asc"&&S!=="desc"&&(S="desc");var w={squareRatio:o.squareRatio,sort:S,leafDepth:o.leafDepth};v.hostTree.clearLayouts();var T={x:0,y:0,width:_[0],height:_[1],area:_[0]*_[1]};v.setLayout(T),dm(v,w,!1,0),T=v.getLayout(),Qu(y,function(k,A){var I=(y[A+1]||v).getValue();k.setLayout(be({dataExtent:[I,I],borderWidth:0,upperHeight:0},T))})}var C=r.getData().tree.root;C.setLayout(U2(l,g,p),!0),r.setLayoutInfo(l),cm(C,new st(-l.x,-l.y,n,i),y,v,0)}};function dm(r,t,e,a){var n,i;if(!r.isRemoved()){var o=r.getLayout();n=o.width,i=o.height;var l=r.getModel(),s=l.get(um),u=l.get(R2)/2,d=fm(l),c=Math.max(s,d),f=s-u,p=c-u;r.setLayout({borderWidth:s,upperHeight:c,upperLabelHeight:d},!0),n=ui(n-2*f,0),i=ui(i-f-p,0);var g=n*i,v=$2(r,l,g,t,e,a);if(v.length){var y={x:f,y:p,width:n,height:i},_=bo(n,i),S=1/0,w=[];w.area=0;for(var T=0,C=v.length;T<C;){var k=v[T];w.push(k),w.area+=k.getLayout().area;var A=G2(w,_,t.squareRatio);A<=S?(T++,S=A):(w.area-=w.pop().getLayout().area,Lf(w,_,y,u,!1),_=bo(y.width,y.height),w.length=w.area=0,S=1/0)}if(w.length&&Lf(w,_,y,u,!0),!e){var I=l.get("childrenVisibleMin");I!=null&&g<I&&(e=!0)}for(var T=0,C=v.length;T<C;T++)dm(v[T],t,e,a+1)}}}function $2(r,t,e,a,n,i){var o=r.children||[],l=a.sort;l!=="asc"&&l!=="desc"&&(l=null);var s=a.leafDepth!=null&&a.leafDepth<=i;if(n&&!s)return r.viewChildren=[];o=bt(o,function(p){return!p.isRemoved()}),B2(o,l);var u=q2(t,o,l);if(u.sum===0)return r.viewChildren=[];if(u.sum=z2(t,e,u.sum,l,o),u.sum===0)return r.viewChildren=[];for(var d=0,c=o.length;d<c;d++){var f=o[d].getValue()/u.sum*e;o[d].setLayout({area:f})}return s&&(o.length&&r.setLayout({isLeafRoot:!0},!0),o.length=0),r.viewChildren=o,r.setLayout({dataExtent:u.dataExtent},!0),o}function z2(r,t,e,a,n){if(!a)return e;for(var i=r.get("visibleMin"),o=n.length,l=o,s=o-1;s>=0;s--){var u=n[a==="asc"?o-s-1:s].getValue();u/e*t<i&&(l=s,e-=u)}return a==="asc"?n.splice(0,o-l):n.splice(l,o-l),e}function B2(r,t){return t&&r.sort(function(e,a){var n=t==="asc"?e.getValue()-a.getValue():a.getValue()-e.getValue();return n===0?t==="asc"?e.dataIndex-a.dataIndex:a.dataIndex-e.dataIndex:n}),r}function q2(r,t,e){for(var a=0,n=0,i=t.length;n<i;n++)a+=t[n].getValue();var o=r.get("visualDimension"),l;return!t||!t.length?l=[NaN,NaN]:o==="value"&&e?(l=[t[t.length-1].getValue(),t[0].getValue()],e==="asc"&&l.reverse()):(l=[1/0,-1/0],Qu(t,function(s){var u=s.getValue(o);u<l[0]&&(l[0]=u),u>l[1]&&(l[1]=u)})),{sum:a,dataExtent:l}}function G2(r,t,e){for(var a=0,n=1/0,i=0,o=void 0,l=r.length;i<l;i++)o=r[i].getLayout().area,o&&(o<n&&(n=o),o>a&&(a=o));var s=r.area*r.area,u=t*t*e;return s?ui(u*a/s,s/(u*n)):1/0}function Lf(r,t,e,a,n){var i=t===e.width?0:1,o=1-i,l=["x","y"],s=["width","height"],u=e[l[i]],d=t?r.area/t:0;(n||d>e[s[o]])&&(d=e[s[o]]);for(var c=0,f=r.length;c<f;c++){var p=r[c],g={},v=d?p.getLayout().area/d:0,y=g[s[o]]=ui(d-2*a,0),_=e[l[i]]+e[s[i]]-u,S=c===f-1||_<v?_:v,w=g[s[i]]=ui(S-2*a,0);g[l[o]]=e[l[o]]+bo(a,y/2),g[l[i]]=u+bo(a,w/2),u+=S,p.setLayout(g,!0)}e[l[o]]+=d,e[s[o]]-=d}function F2(r,t,e,a,n){var i=(t||{}).node,o=[a,n];if(!i||i===e)return o;for(var l,s=a*n,u=s*r.option.zoomToNodeRatio;l=i.parentNode;){for(var d=0,c=l.children,f=0,p=c.length;f<p;f++)d+=c[f].getValue();var g=i.getValue();if(g===0)return o;u*=d/g;var v=l.getModel(),y=v.get(um),_=Math.max(y,fm(v));u+=4*y*y+(3*y+_)*Math.pow(u,.5),u>Xd&&(u=Xd),i=l}u<s&&(u=s);var S=Math.pow(u/s,.5);return[a*S,n*S]}function U2(r,t,e){if(t)return{x:t.x,y:t.y};var a={x:0,y:0};if(!e)return a;var n=e.node,i=n.getLayout();if(!i)return a;for(var o=[i.width/2,i.height/2],l=n;l;){var s=l.getLayout();o[0]+=s.x,o[1]+=s.y,l=l.parentNode}return{x:r.width/2-o[0],y:r.height/2-o[1]}}function cm(r,t,e,a,n){var i=r.getLayout(),o=e[n],l=o&&o===r;if(!(o&&!l||n===e.length&&r!==a)){r.setLayout({isInView:!0,invisible:!l&&!t.intersect(i),isAboveViewRoot:l},!0);var s=new st(t.x-i.x,t.y-i.y,t.width,t.height);Qu(r.viewChildren||[],function(u){cm(u,s,e,a,n+1)})}}function fm(r){return r.get(E2)?r.get(N2):0}function H2(r){r.registerSeriesModel(d2),r.registerChartView(S2),r.registerVisual(D2),r.registerLayout(O2),u2(r)}function W2(r){var t=r.findComponents({mainType:"legend"});!t||!t.length||r.eachSeriesByType("graph",function(e){var a=e.getCategoriesData(),n=e.getGraph(),i=n.data,o=a.mapArray(a.getName);i.filterSelf(function(l){var s=i.getItemModel(l),u=s.getShallow("category");if(u!=null){aa(u)&&(u=o[u]);for(var d=0;d<t.length;d++)if(!t[d].isSelected(u))return!1}return!0})})}function Y2(r){var t={};r.eachSeriesByType("graph",function(e){var a=e.getCategoriesData(),n=e.getData(),i={};a.each(function(o){var l=a.getName(o);i["ec-"+l]=o;var s=a.getItemModel(o),u=s.getModel("itemStyle").getItemStyle();u.fill||(u.fill=e.getColorFromPalette(l,t)),a.setItemVisual(o,"style",u);for(var d=["symbol","symbolSize","symbolKeepAspect"],c=0;c<d.length;c++){var f=s.getShallow(d[c],!0);f!=null&&a.setItemVisual(o,d[c],f)}}),a.count()&&n.each(function(o){var l=n.getItemModel(o),s=l.getShallow("category");if(s!=null){Re(s)&&(s=i["ec-"+s]);var u=a.getItemVisual(s,"style"),d=n.ensureUniqueItemVisual(o,"style");be(d,u);for(var c=["symbol","symbolSize","symbolKeepAspect"],f=0;f<c.length;f++)n.setItemVisual(o,c[f],a.getItemVisual(s,c[f]))}})})}function Bi(r){return r instanceof Array||(r=[r,r]),r}function j2(r){r.eachSeriesByType("graph",function(t){var e=t.getGraph(),a=t.getEdgeData(),n=Bi(t.get("edgeSymbol")),i=Bi(t.get("edgeSymbolSize"));a.setVisual("fromSymbol",n&&n[0]),a.setVisual("toSymbol",n&&n[1]),a.setVisual("fromSymbolSize",i&&i[0]),a.setVisual("toSymbolSize",i&&i[1]),a.setVisual("style",t.getModel("lineStyle").getLineStyle()),a.each(function(o){var l=a.getItemModel(o),s=e.getEdgeByIndex(o),u=Bi(l.getShallow("symbol",!0)),d=Bi(l.getShallow("symbolSize",!0)),c=l.getModel("lineStyle").getLineStyle(),f=a.ensureUniqueItemVisual(o,"style");switch(be(f,c),f.stroke){case"source":{var p=s.node1.getVisual("style");f.stroke=p&&p.fill;break}case"target":{var p=s.node2.getVisual("style");f.stroke=p&&p.fill;break}}u[0]&&s.setVisual("fromSymbol",u[0]),u[1]&&s.setVisual("toSymbol",u[1]),d[0]&&s.setVisual("fromSymbolSize",d[0]),d[1]&&s.setVisual("toSymbolSize",d[1])})})}var Ws="-->",nl=function(r){return r.get("autoCurveness")||null},pm=function(r,t){var e=nl(r),a=20,n=[];if(aa(e))a=e;else if(ge(e)){r.__curvenessList=e;return}t>a&&(a=t);var i=a%2?a+2:a+3;n=[];for(var o=0;o<i;o++)n.push((o%2?o+1:o)/10*(o%2?-1:1));r.__curvenessList=n},di=function(r,t,e){var a=[r.id,r.dataIndex].join("."),n=[t.id,t.dataIndex].join(".");return[e.uid,a,n].join(Ws)},vm=function(r){var t=r.split(Ws);return[t[0],t[2],t[1]].join(Ws)},Z2=function(r,t){var e=di(r.node1,r.node2,t);return t.__edgeMap[e]},X2=function(r,t){var e=Ys(di(r.node1,r.node2,t),t),a=Ys(di(r.node2,r.node1,t),t);return e+a},Ys=function(r,t){var e=t.__edgeMap;return e[r]?e[r].length:0};function K2(r){nl(r)&&(r.__curvenessList=[],r.__edgeMap={},pm(r))}function Q2(r,t,e,a){if(nl(e)){var n=di(r,t,e),i=e.__edgeMap,o=i[vm(n)];i[n]&&!o?i[n].isForward=!0:o&&i[n]&&(o.isForward=!0,i[n].isForward=!1),i[n]=i[n]||[],i[n].push(a)}}function Ju(r,t,e,a){var n=nl(t),i=ge(n);if(!n)return null;var o=Z2(r,t);if(!o)return null;for(var l=-1,s=0;s<o.length;s++)if(o[s]===e){l=s;break}var u=X2(r,t);pm(t,u),r.lineStyle=r.lineStyle||{};var d=di(r.node1,r.node2,t),c=t.__curvenessList,f=i||u%2?0:1;if(o.isForward)return c[f+l];var p=vm(d),g=Ys(p,t),v=c[l+g+f];return a?i?n&&n[0]===0?(g+f)%2?v:-v:((g%2?0:1)+f)%2?v:-v:(g+f)%2?v:-v:c[l+g+f]}function gm(r){var t=r.coordinateSystem;if(!(t&&t.type!=="view")){var e=r.getGraph();e.eachNode(function(a){var n=a.getModel();a.setLayout([+n.get("x"),+n.get("y")])}),ed(e,r)}}function ed(r,t){r.eachEdge(function(e,a){var n=wi(e.getModel().get(["lineStyle","curveness"]),-Ju(e,t,a,!0),0),i=Qa(e.node1.getLayout()),o=Qa(e.node2.getLayout()),l=[i,o];+n&&l.push([(i[0]+o[0])/2-(i[1]-o[1])*n,(i[1]+o[1])/2-(o[0]-i[0])*n]),e.setLayout(l)})}function J2(r,t){r.eachSeriesByType("graph",function(e){var a=e.get("layout"),n=e.coordinateSystem;if(n&&n.type!=="view"){var i=e.getData(),o=[];O(n.dimensions,function(f){o=o.concat(i.mapDimensionsAll(f))});for(var l=0;l<i.count();l++){for(var s=[],u=!1,d=0;d<o.length;d++){var c=i.get(o[d],l);isNaN(c)||(u=!0),s.push(c)}u?i.setItemLayout(l,n.dataToPoint(s)):i.setItemLayout(l,[NaN,NaN])}ed(i.graph,e)}else(!a||a==="none")&&gm(e)})}function Un(r){var t=r.coordinateSystem;if(t.type!=="view")return 1;var e=r.option.nodeScaleRatio,a=t.scaleX,n=t.getZoom(),i=(n-1)*e+1;return i/a}function Hn(r){var t=r.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var Vf=Math.PI,Ol=[];function td(r,t,e,a){var n=r.coordinateSystem;if(!(n&&n.type!=="view")){var i=n.getBoundingRect(),o=r.getData(),l=o.graph,s=i.width/2+i.x,u=i.height/2+i.y,d=Math.min(i.width,i.height)/2,c=o.count();if(o.setLayout({cx:s,cy:u}),!!c){if(e){var f=n.pointToData(a),p=f[0],g=f[1],v=[p-s,g-u];xi(v,v),S1(v,v,d),e.setLayout([s+v[0],u+v[1]],!0);var y=r.get(["circular","rotateLabel"]);hm(e,y,s,u)}eT[t](r,l,o,d,s,u,c),l.eachEdge(function(_,S){var w=wi(_.getModel().get(["lineStyle","curveness"]),Ju(_,r,S),0),T=Qa(_.node1.getLayout()),C=Qa(_.node2.getLayout()),k,A=(T[0]+C[0])/2,I=(T[1]+C[1])/2;+w&&(w*=3,k=[s*w+A*(1-w),u*w+I*(1-w)]),_.setLayout([T,C,k])})}}}var eT={value:function(r,t,e,a,n,i,o){var l=0,s=e.getSum("value"),u=Math.PI*2/(s||o);t.eachNode(function(d){var c=d.getValue("value"),f=u*(s?c:1)/2;l+=f,d.setLayout([a*Math.cos(l)+n,a*Math.sin(l)+i]),l+=f})},symbolSize:function(r,t,e,a,n,i,o){var l=0;Ol.length=o;var s=Un(r);t.eachNode(function(c){var f=Hn(c);isNaN(f)&&(f=2),f<0&&(f=0),f*=s;var p=Math.asin(f/2/a);isNaN(p)&&(p=Vf/2),Ol[c.dataIndex]=p,l+=p*2});var u=(2*Vf-l)/o/2,d=0;t.eachNode(function(c){var f=u+Ol[c.dataIndex];d+=f,(!c.getLayout()||!c.getLayout().fixed)&&c.setLayout([a*Math.cos(d)+n,a*Math.sin(d)+i]),d+=f})}};function hm(r,t,e,a){var n=r.getGraphicEl();if(n){var i=r.getModel(),o=i.get(["label","rotate"])||0,l=n.getSymbolPath();if(t){var s=r.getLayout(),u=Math.atan2(s[1]-a,s[0]-e);u<0&&(u=Math.PI*2+u);var d=s[0]<e;d&&(u=u-Math.PI);var c=d?"left":"right";l.setTextConfig({rotation:-u,position:c,origin:"center"});var f=l.ensureState("emphasis");be(f.textConfig||(f.textConfig={}),{position:c})}else l.setTextConfig({rotation:o*=Math.PI/180})}}function tT(r){r.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&td(t,"symbolSize")})}var Ur=Ls;function aT(r,t,e){for(var a=r,n=t,i=e.rect,o=i.width,l=i.height,s=[i.x+o/2,i.y+l/2],u=e.gravity==null?.1:e.gravity,d=0;d<a.length;d++){var c=a[d];c.p||(c.p=w1(o*(Math.random()-.5)+s[0],l*(Math.random()-.5)+s[1])),c.pp=Qa(c.p),c.edges=null}var f=e.friction==null?.6:e.friction,p=f,g,v;return{warmUp:function(){p=f*.8},setFixed:function(y){a[y].fixed=!0},setUnfixed:function(y){a[y].fixed=!1},beforeStep:function(y){g=y},afterStep:function(y){v=y},step:function(y){g&&g(a,n);for(var _=[],S=a.length,w=0;w<n.length;w++){var T=n[w];if(!T.ignoreForceLayout){var C=T.n1,k=T.n2;an(_,k.p,C.p);var A=Kd(_)-T.d,I=k.w/(C.w+k.w);isNaN(I)&&(I=0),xi(_,_),!C.fixed&&Ur(C.p,C.p,_,I*A*p),!k.fixed&&Ur(k.p,k.p,_,-(1-I)*A*p)}}for(var w=0;w<S;w++){var M=a[w];M.fixed||(an(_,s,M.p),Ur(M.p,M.p,_,u*p))}for(var w=0;w<S;w++)for(var C=a[w],D=w+1;D<S;D++){var k=a[D];an(_,k.p,C.p);var A=Kd(_);A===0&&(x1(_,Math.random()-.5,Math.random()-.5),A=1);var L=(C.rep+k.rep)/A/A;!C.fixed&&Ur(C.pp,C.pp,_,L),!k.fixed&&Ur(k.pp,k.pp,_,-L)}for(var E=[],w=0;w<S;w++){var M=a[w];M.fixed||(an(E,M.p,M.pp),Ur(M.p,M.p,E,p),Yt(M.pp,M.p))}p=p*.992;var R=p<.01;v&&v(a,n,R),y&&y(R)}}}function rT(r){r.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!(e&&e.type!=="view"))if(t.get("layout")==="force"){var a=t.preservedPoints||{},n=t.getGraph(),i=n.data,o=n.edgeData,l=t.getModel("force"),s=l.get("initLayout");t.preservedPoints?i.each(function(w){var T=i.getId(w);i.setItemLayout(w,a[T]||[NaN,NaN])}):!s||s==="none"?gm(t):s==="circular"&&td(t,"value");var u=i.getDataExtent("value"),d=o.getDataExtent("value"),c=l.get("repulsion"),f=l.get("edgeLength"),p=ge(c)?c:[c,c],g=ge(f)?f:[f,f];g=[g[1],g[0]];var v=i.mapArray("value",function(w,T){var C=i.getItemLayout(T),k=We(w,u,p);return isNaN(k)&&(k=(p[0]+p[1])/2),{w:k,rep:k,fixed:i.getItemModel(T).get("fixed"),p:!C||isNaN(C[0])||isNaN(C[1])?null:C}}),y=o.mapArray("value",function(w,T){var C=n.getEdgeByIndex(T),k=We(w,d,g);isNaN(k)&&(k=(g[0]+g[1])/2);var A=C.getModel(),I=wi(C.getModel().get(["lineStyle","curveness"]),-Ju(C,t,T,!0),0);return{n1:v[C.node1.dataIndex],n2:v[C.node2.dataIndex],d:k,curveness:I,ignoreForceLayout:A.get("ignoreForceLayout")}}),_=e.getBoundingRect(),S=aT(v,y,{rect:_,gravity:l.get("gravity"),friction:l.get("friction")});S.beforeStep(function(w,T){for(var C=0,k=w.length;C<k;C++)w[C].fixed&&Yt(w[C].p,n.getNodeByIndex(C).getLayout())}),S.afterStep(function(w,T,C){for(var k=0,A=w.length;k<A;k++)w[k].fixed||n.getNodeByIndex(k).setLayout(w[k].p),a[i.getId(k)]=w[k].p;for(var k=0,A=T.length;k<A;k++){var I=T[k],M=n.getEdgeByIndex(k),D=I.n1.p,L=I.n2.p,E=M.getLayout();E=E?E.slice():[],E[0]=E[0]||[],E[1]=E[1]||[],Yt(E[0],D),Yt(E[1],L),+I.curveness&&(E[2]=[(D[0]+L[0])/2-(D[1]-L[1])*I.curveness,(D[1]+L[1])/2-(L[0]-D[0])*I.curveness]),M.setLayout(E)}}),t.forceLayout=S,t.preservedPoints=a,S.step()}else t.forceLayout=null})}function nT(r,t,e){var a=be(r.getBoxLayoutParams(),{aspect:e});return Kt(a,{width:t.getWidth(),height:t.getHeight()})}function iT(r,t){var e=[];return r.eachSeriesByType("graph",function(a){var n=a.get("coordinateSystem");if(!n||n==="view"){var i=a.getData(),o=i.mapArray(function(y){var _=i.getItemModel(y);return[+_.get("x"),+_.get("y")]}),l=[],s=[];Yo(o,l,s),s[0]-l[0]===0&&(s[0]+=1,l[0]-=1),s[1]-l[1]===0&&(s[1]+=1,l[1]-=1);var u=(s[0]-l[0])/(s[1]-l[1]),d=nT(a,t,u);isNaN(u)&&(l=[d.x,d.y],s=[d.x+d.width,d.y+d.height]);var c=s[0]-l[0],f=s[1]-l[1],p=d.width,g=d.height,v=a.coordinateSystem=new Mi;v.zoomLimit=a.get("scaleLimit"),v.setBoundingRect(l[0],l[1],c,f),v.setViewRect(d.x,d.y,p,g),v.setCenter(a.get("center"),t),v.setZoom(a.get("zoom")),e.push(v)}}),e}var Rf=xa.prototype,$l=Fg.prototype,mm=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r}();(function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(mm);function zl(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}var oT=function(r){W(t,r);function t(e){var a=r.call(this,e)||this;return a.type="ec-line",a}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new mm},t.prototype.buildPath=function(e,a){zl(a)?Rf.buildPath.call(this,e,a):$l.buildPath.call(this,e,a)},t.prototype.pointAt=function(e){return zl(this.shape)?Rf.pointAt.call(this,e):$l.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var a=this.shape,n=zl(a)?[a.x2-a.x1,a.y2-a.y1]:$l.tangentAt.call(this,e);return xi(n,n)},t}(Tt),Bl=["fromSymbol","toSymbol"];function Ef(r){return"_"+r+"Type"}function Nf(r,t,e){var a=t.getItemVisual(e,r);if(!a||a==="none")return a;var n=t.getItemVisual(e,r+"Size"),i=t.getItemVisual(e,r+"Rotate"),o=t.getItemVisual(e,r+"Offset"),l=t.getItemVisual(e,r+"KeepAspect"),s=xn(n),u=wn(o||0,s);return a+s+u+(i||"")+(l||"")}function Of(r,t,e){var a=t.getItemVisual(e,r);if(!(!a||a==="none")){var n=t.getItemVisual(e,r+"Size"),i=t.getItemVisual(e,r+"Rotate"),o=t.getItemVisual(e,r+"Offset"),l=t.getItemVisual(e,r+"KeepAspect"),s=xn(n),u=wn(o||0,s),d=St(a,-s[0]/2+u[0],-s[1]/2+u[1],s[0],s[1],null,l);return d.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,d.name=r,d}}function lT(r){var t=new oT({name:"line",subPixelOptimize:!0});return js(t.shape,r),t}function js(r,t){r.x1=t[0][0],r.y1=t[0][1],r.x2=t[1][0],r.y2=t[1][1],r.percent=1;var e=t[2];e?(r.cpx1=e[0],r.cpy1=e[1]):(r.cpx1=NaN,r.cpy1=NaN)}var ad=function(r){W(t,r);function t(e,a,n){var i=r.call(this)||this;return i._createLine(e,a,n),i}return t.prototype._createLine=function(e,a,n){var i=e.hostModel,o=e.getItemLayout(a),l=lT(o);l.shape.percent=0,qt(l,{shape:{percent:1}},i,a),this.add(l),O(Bl,function(s){var u=Of(s,e,a);this.add(u),this[Ef(s)]=Nf(s,e,a)},this),this._updateCommonStl(e,a,n)},t.prototype.updateData=function(e,a,n){var i=e.hostModel,o=this.childOfName("line"),l=e.getItemLayout(a),s={shape:{}};js(s.shape,l),Ke(o,s,i,a),O(Bl,function(u){var d=Nf(u,e,a),c=Ef(u);if(this[c]!==d){this.remove(this.childOfName(u));var f=Of(u,e,a);this.add(f)}this[c]=d},this),this._updateCommonStl(e,a,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,a,n){var i=e.hostModel,o=this.childOfName("line"),l=n&&n.emphasisLineStyle,s=n&&n.blurLineStyle,u=n&&n.selectLineStyle,d=n&&n.labelStatesModels,c=n&&n.emphasisDisabled,f=n&&n.focus,p=n&&n.blurScope;if(!n||e.hasItemOption){var g=e.getItemModel(a),v=g.getModel("emphasis");l=v.getModel("lineStyle").getLineStyle(),s=g.getModel(["blur","lineStyle"]).getLineStyle(),u=g.getModel(["select","lineStyle"]).getLineStyle(),c=v.get("disabled"),f=v.get("focus"),p=v.get("blurScope"),d=Ot(g)}var y=e.getItemVisual(a,"style"),_=y.stroke;o.useStyle(y),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=l,o.ensureState("blur").style=s,o.ensureState("select").style=u,O(Bl,function(k){var A=this.childOfName(k);if(A){A.setColor(_),A.style.opacity=y.opacity;for(var I=0;I<ti.length;I++){var M=ti[I],D=o.getState(M);if(D){var L=D.style||{},E=A.ensureState(M),R=E.style||(E.style={});L.stroke!=null&&(R[A.__isEmptyBrush?"stroke":"fill"]=L.stroke),L.opacity!=null&&(R.opacity=L.opacity)}}A.markRedraw()}},this);var S=i.getRawValue(a);Zt(this,d,{labelDataIndex:a,labelFetcher:{getFormattedLabel:function(k,A){return i.getFormattedLabel(k,A,e.dataType)}},inheritColor:_||"#000",defaultOpacity:y.opacity,defaultText:(S==null?e.getName(a):isFinite(S)?Tu(S):S)+""});var w=this.getTextContent();if(w){var T=d.normal;w.__align=w.style.align,w.__verticalAlign=w.style.verticalAlign,w.__position=T.get("position")||"middle";var C=T.get("distance");ge(C)||(C=[C,C]),w.__labelDistance=C}this.setTextConfig({position:null,local:!0,inside:!1}),dt(this,f,p,c)},t.prototype.highlight=function(){un(this)},t.prototype.downplay=function(){dn(this)},t.prototype.updateLayout=function(e,a){this.setLinePoints(e.getItemLayout(a))},t.prototype.setLinePoints=function(e){var a=this.childOfName("line");js(a.shape,e),a.dirty()},t.prototype.beforeUpdate=function(){var e=this,a=e.childOfName("fromSymbol"),n=e.childOfName("toSymbol"),i=e.getTextContent();if(!a&&!n&&(!i||i.ignore))return;for(var o=1,l=this.parent;l;)l.scaleX&&(o/=l.scaleX),l=l.parent;var s=e.childOfName("line");if(!this.__dirty&&!s.__dirty)return;var u=s.shape.percent,d=s.pointAt(0),c=s.pointAt(u),f=an([],c,d);xi(f,f);function p(D,L){var E=D.__specifiedRotation;if(E==null){var R=s.tangentAt(L);D.attr("rotation",(L===1?-1:1)*Math.PI/2-Math.atan2(R[1],R[0]))}else D.attr("rotation",E)}if(a&&(a.setPosition(d),p(a,0),a.scaleX=a.scaleY=o*u,a.markRedraw()),n&&(n.setPosition(c),p(n,1),n.scaleX=n.scaleY=o*u,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var g=void 0,v=void 0,y=i.__labelDistance,_=y[0]*o,S=y[1]*o,w=u/2,T=s.tangentAt(w),C=[T[1],-T[0]],k=s.pointAt(w);C[1]>0&&(C[0]=-C[0],C[1]=-C[1]);var A=T[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var I=-Math.atan2(T[1],T[0]);c[0]<d[0]&&(I=Math.PI+I),i.rotation=I}var M=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":M=-S,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":M=S,v="top";break;default:M=0,v="middle"}switch(i.__position){case"end":i.x=f[0]*_+c[0],i.y=f[1]*S+c[1],g=f[0]>.8?"left":f[0]<-.8?"right":"center",v=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":i.x=-f[0]*_+d[0],i.y=-f[1]*S+d[1],g=f[0]>.8?"right":f[0]<-.8?"left":"center",v=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=_*A+d[0],i.y=d[1]+M,g=T[0]<0?"right":"left",i.originX=-_*A,i.originY=-M;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=k[0],i.y=k[1]+M,g="center",i.originY=-M;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-_*A+c[0],i.y=c[1]+M,g=T[0]>=0?"right":"left",i.originX=_*A,i.originY=-M;break}i.scaleX=i.scaleY=o,i.setStyle({verticalAlign:i.__verticalAlign||v,align:i.__align||g})}},t}(xe),rd=function(){function r(t){this.group=new xe,this._LineCtor=t||ad}return r.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var a=this,n=a.group,i=a._lineData;a._lineData=t,i||n.removeAll();var o=$f(t);t.diff(i).add(function(l){e._doAdd(t,l,o)}).update(function(l,s){e._doUpdate(i,t,s,l,o)}).remove(function(l){n.remove(i.getItemGraphicEl(l))}).execute()},r.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,a){e.updateLayout(t,a)},this)},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=$f(t),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,e){this._progressiveEls=[];function a(l){!l.isGroup&&!sT(l)&&(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var i=e.getItemLayout(n);if(ql(i)){var o=new this._LineCtor(e,n,this._seriesScope);o.traverse(a),this.group.add(o),e.setItemGraphicEl(n,o),this._progressiveEls.push(o)}}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(t){mi(this._progressiveEls||this.group,t)},r.prototype._doAdd=function(t,e,a){var n=t.getItemLayout(e);if(ql(n)){var i=new this._LineCtor(t,e,a);t.setItemGraphicEl(e,i),this.group.add(i)}},r.prototype._doUpdate=function(t,e,a,n,i){var o=t.getItemGraphicEl(a);if(!ql(e.getItemLayout(n))){this.group.remove(o);return}o?o.updateData(e,n,i):o=new this._LineCtor(e,n,i),e.setItemGraphicEl(n,o),this.group.add(o)},r}();function sT(r){return r.animators&&r.animators.length>0}function $f(r){var t=r.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:Ot(t)}}function zf(r){return isNaN(r[0])||isNaN(r[1])}function ql(r){return r&&!zf(r[0])&&!zf(r[1])}var Gl=[],Fl=[],Ul=[],Hr=Yg,Hl=C1,Bf=Math.abs;function qf(r,t,e){for(var a=r[0],n=r[1],i=r[2],o=1/0,l,s=e*e,u=.1,d=.1;d<=.9;d+=.1){Gl[0]=Hr(a[0],n[0],i[0],d),Gl[1]=Hr(a[1],n[1],i[1],d);var c=Bf(Hl(Gl,t)-s);c<o&&(o=c,l=d)}for(var f=0;f<32;f++){var p=l+u;Fl[0]=Hr(a[0],n[0],i[0],l),Fl[1]=Hr(a[1],n[1],i[1],l),Ul[0]=Hr(a[0],n[0],i[0],p),Ul[1]=Hr(a[1],n[1],i[1],p);var c=Hl(Fl,t)-s;if(Bf(c)<.01)break;var g=Hl(Ul,t)-s;u/=2,c<0?g>=0?l=l+u:l=l-u:g>=0?l=l-u:l=l+u}return l}function Wl(r,t){var e=[],a=T1,n=[[],[],[]],i=[[],[]],o=[];t/=2,r.eachEdge(function(l,s){var u=l.getLayout(),d=l.getVisual("fromSymbol"),c=l.getVisual("toSymbol");u.__original||(u.__original=[Qa(u[0]),Qa(u[1])],u[2]&&u.__original.push(Qa(u[2])));var f=u.__original;if(u[2]!=null){if(Yt(n[0],f[0]),Yt(n[1],f[2]),Yt(n[2],f[1]),d&&d!=="none"){var p=Hn(l.node1),g=qf(n,f[0],p*t);a(n[0][0],n[1][0],n[2][0],g,e),n[0][0]=e[3],n[1][0]=e[4],a(n[0][1],n[1][1],n[2][1],g,e),n[0][1]=e[3],n[1][1]=e[4]}if(c&&c!=="none"){var p=Hn(l.node2),g=qf(n,f[1],p*t);a(n[0][0],n[1][0],n[2][0],g,e),n[1][0]=e[1],n[2][0]=e[2],a(n[0][1],n[1][1],n[2][1],g,e),n[1][1]=e[1],n[2][1]=e[2]}Yt(u[0],n[0]),Yt(u[1],n[2]),Yt(u[2],n[1])}else{if(Yt(i[0],f[0]),Yt(i[1],f[1]),an(o,i[1],i[0]),xi(o,o),d&&d!=="none"){var p=Hn(l.node1);Ls(i[0],i[0],o,p*t)}if(c&&c!=="none"){var p=Hn(l.node2);Ls(i[1],i[1],o,-p*t)}Yt(u[0],i[0]),Yt(u[1],i[1])}})}function Gf(r){return r.type==="view"}var uT=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){var n=new Ai,i=new rd,o=this.group;this._controller=new Di(a.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},t.prototype.render=function(e,a,n){var i=this,o=e.coordinateSystem;this._model=e;var l=this._symbolDraw,s=this._lineDraw,u=this.group;if(Gf(o)){var d={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(d):Ke(u,d,e)}Wl(e.getGraph(),Un(e));var c=e.getData();l.updateData(c);var f=e.getEdgeData();s.updateData(f),this._updateNodeAndLinkScale(),this._updateController(e,a,n),clearTimeout(this._layoutTimeout);var p=e.forceLayout,g=e.get(["force","layoutAnimation"]);p&&this._startForceLayoutIteration(p,g);var v=e.get("layout");c.graph.eachNode(function(w){var T=w.dataIndex,C=w.getGraphicEl(),k=w.getModel();if(C){C.off("drag").off("dragend");var A=k.get("draggable");A&&C.on("drag",function(M){switch(v){case"force":p.warmUp(),!i._layouting&&i._startForceLayoutIteration(p,g),p.setFixed(T),c.setItemLayout(T,[C.x,C.y]);break;case"circular":c.setItemLayout(T,[C.x,C.y]),w.setLayout({fixed:!0},!0),td(e,"symbolSize",w,[M.offsetX,M.offsetY]),i.updateLayout(e);break;case"none":default:c.setItemLayout(T,[C.x,C.y]),ed(e.getGraph(),e),i.updateLayout(e);break}}).on("dragend",function(){p&&p.setUnfixed(T)}),C.setDraggable(A,!!k.get("cursor"));var I=k.get(["emphasis","focus"]);I==="adjacency"&&(qe(C).focus=w.getAdjacentDataIndices())}}),c.graph.eachEdge(function(w){var T=w.getGraphicEl(),C=w.getModel().get(["emphasis","focus"]);T&&C==="adjacency"&&(qe(T).focus={edge:[w.dataIndex],node:[w.node1.dataIndex,w.node2.dataIndex]})});var y=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),_=c.getLayout("cx"),S=c.getLayout("cy");c.graph.eachNode(function(w){hm(w,y,_,S)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,a){var n=this;(function i(){e.step(function(o){n.updateLayout(n._model),(n._layouting=!o)&&(a?n._layoutTimeout=setTimeout(i,16):i())})})()},t.prototype._updateController=function(e,a,n){var i=this,o=this._controller,l=this._controllerHost,s=this.group;if(o.setPointerChecker(function(u,d,c){var f=s.getBoundingRect();return f.applyTransform(s.transform),f.contain(d,c)&&!tl(u,n,e)}),!Gf(e.coordinateSystem)){o.disable();return}o.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){Hu(l,u.dx,u.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Wu(l,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),i._updateNodeAndLinkScale(),Wl(e.getGraph(),Un(e)),i._lineDraw.updateLayout(),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,a=e.getData(),n=Un(e);a.eachItemGraphicEl(function(i,o){i&&i.setSymbolScale(n)})},t.prototype.updateLayout=function(e){Wl(e.getGraph(),Un(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(ut);function Wr(r){return"_EC_"+r}var dT=function(){function r(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(t,e){t=t==null?""+e:""+t;var a=this._nodesMap;if(!a[Wr(t)]){var n=new hr(t,e);return n.hostGraph=this,this.nodes.push(n),a[Wr(t)]=n,n}},r.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},r.prototype.getNodeById=function(t){return this._nodesMap[Wr(t)]},r.prototype.addEdge=function(t,e,a){var n=this._nodesMap,i=this._edgesMap;if(aa(t)&&(t=this.nodes[t]),aa(e)&&(e=this.nodes[e]),t instanceof hr||(t=n[Wr(t)]),e instanceof hr||(e=n[Wr(e)]),!(!t||!e)){var o=t.id+"-"+e.id,l=new ym(t,e,a);return l.hostGraph=this,this._directed&&(t.outEdges.push(l),e.inEdges.push(l)),t.edges.push(l),t!==e&&e.edges.push(l),this.edges.push(l),i[o]=l,l}},r.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},r.prototype.getEdge=function(t,e){t instanceof hr&&(t=t.id),e instanceof hr&&(e=e.id);var a=this._edgesMap;return this._directed?a[t+"-"+e]:a[t+"-"+e]||a[e+"-"+t]},r.prototype.eachNode=function(t,e){for(var a=this.nodes,n=a.length,i=0;i<n;i++)a[i].dataIndex>=0&&t.call(e,a[i],i)},r.prototype.eachEdge=function(t,e){for(var a=this.edges,n=a.length,i=0;i<n;i++)a[i].dataIndex>=0&&a[i].node1.dataIndex>=0&&a[i].node2.dataIndex>=0&&t.call(e,a[i],i)},r.prototype.breadthFirstTraverse=function(t,e,a,n){if(e instanceof hr||(e=this._nodesMap[Wr(e)]),!!e){for(var i=a==="out"?"outEdges":a==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!t.call(n,e,null))for(var l=[e];l.length;)for(var s=l.shift(),u=s[i],o=0;o<u.length;o++){var d=u[o],c=d.node1===s?d.node2:d.node1;if(!c.__visited){if(t.call(n,c,s))return;l.push(c),c.__visited=!0}}}},r.prototype.update=function(){for(var t=this.data,e=this.edgeData,a=this.nodes,n=this.edges,i=0,o=a.length;i<o;i++)a[i].dataIndex=-1;for(var i=0,o=t.count();i<o;i++)a[t.getRawIndex(i)].dataIndex=i;e.filterSelf(function(l){var s=n[e.getRawIndex(l)];return s.node1.dataIndex>=0&&s.node2.dataIndex>=0});for(var i=0,o=n.length;i<o;i++)n[i].dataIndex=-1;for(var i=0,o=e.count();i<o;i++)n[e.getRawIndex(i)].dataIndex=i},r.prototype.clone=function(){for(var t=new r(this._directed),e=this.nodes,a=this.edges,n=0;n<e.length;n++)t.addNode(e[n].id,e[n].dataIndex);for(var n=0;n<a.length;n++){var i=a[n];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},r}(),hr=function(){function r(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=e??-1}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,a=e.data.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var a=this.edges[e];a.dataIndex<0||(t.edge.push(a.dataIndex),t.node.push(a.node1.dataIndex,a.node2.dataIndex))}return t},r.prototype.getTrajectoryDataIndices=function(){for(var t=Pe(),e=Pe(),a=0;a<this.edges.length;a++){var n=this.edges[a];if(!(n.dataIndex<0)){t.set(n.dataIndex,!0);for(var i=[n.node1],o=[n.node2],l=0;l<i.length;){var s=i[l];l++,e.set(s.dataIndex,!0);for(var u=0;u<s.inEdges.length;u++)t.set(s.inEdges[u].dataIndex,!0),i.push(s.inEdges[u].node1)}for(l=0;l<o.length;){var d=o[l];l++,e.set(d.dataIndex,!0);for(var u=0;u<d.outEdges.length;u++)t.set(d.outEdges[u].dataIndex,!0),o.push(d.outEdges[u].node2)}}}return{edge:t.keys(),node:e.keys()}},r}(),ym=function(){function r(t,e,a){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=a??-1}return r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,a=e.edgeData.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r.prototype.getTrajectoryDataIndices=function(){var t=Pe(),e=Pe();t.set(this.dataIndex,!0);for(var a=[this.node1],n=[this.node2],i=0;i<a.length;){var o=a[i];i++,e.set(o.dataIndex,!0);for(var l=0;l<o.inEdges.length;l++)t.set(o.inEdges[l].dataIndex,!0),a.push(o.inEdges[l].node1)}for(i=0;i<n.length;){var s=n[i];i++,e.set(s.dataIndex,!0);for(var l=0;l<s.outEdges.length;l++)t.set(s.outEdges[l].dataIndex,!0),n.push(s.outEdges[l].node2)}return{edge:t.keys(),node:e.keys()}},r}();function bm(r,t){return{getValue:function(e){var a=this[r][t];return a.getStore().get(a.getDimensionIndex(e||"value"),this.dataIndex)},setVisual:function(e,a){this.dataIndex>=0&&this[r][t].setItemVisual(this.dataIndex,e,a)},getVisual:function(e){return this[r][t].getItemVisual(this.dataIndex,e)},setLayout:function(e,a){this.dataIndex>=0&&this[r][t].setItemLayout(this.dataIndex,e,a)},getLayout:function(){return this[r][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][t].getRawIndex(this.dataIndex)}}}Ca(hr,bm("hostGraph","data"));Ca(ym,bm("hostGraph","edgeData"));function _m(r,t,e,a,n){for(var i=new dT(a),o=0;o<r.length;o++)i.addNode(ua(r[o].id,r[o].name,o),o);for(var l=[],s=[],u=0,o=0;o<t.length;o++){var d=t[o],c=d.source,f=d.target;i.addEdge(c,f,u)&&(s.push(d),l.push(ua(Oa(d.id,null),c+" > "+f)),u++)}var p=e.get("coordinateSystem"),g;if(p==="cartesian2d"||p==="polar")g=zr(r,e);else{var v=jg.get(p),y=v?v.dimensions||[]:[];nt(y,"value")<0&&y.concat(["value"]);var _=xu(r,{coordDimensions:y,encodeDefine:e.getEncode()}).dimensions;g=new da(_,e),g.initData(r)}var S=new da(["value"],e);return S.initData(s,l),n&&n(g,S),tm({mainData:g,struct:i,structAttr:"graph",datas:{node:g,edge:S},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}var cT=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments);var a=this;function n(){return a._categoriesData}this.legendVisualProvider=new zo(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(e){r.prototype.mergeDefaultAndTheme.apply(this,arguments),Wo(e,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,a){var n=e.edges||e.links||[],i=e.data||e.nodes||[],o=this;if(i&&n){K2(this);var l=_m(i,n,this,!0,s);return O(l.edges,function(u){Q2(u.node1,u.node2,this,u.dataIndex)},this),l.data}function s(u,d){u.wrapMethod("getItemModel",function(g){var v=o._categoriesModels,y=g.getShallow("category"),_=v[y];return _&&(_.parentModel=g.parentModel,g.parentModel=_),g});var c=na.prototype.getModel;function f(g,v){var y=c.call(this,g,v);return y.resolveParentPath=p,y}d.wrapMethod("getItemModel",function(g){return g.resolveParentPath=p,g.getModel=f,g});function p(g){if(g&&(g[0]==="label"||g[1]==="label")){var v=g.slice();return g[0]==="label"?v[0]="edgeLabel":g[1]==="label"&&(v[1]="edgeLabel"),v}return g}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,a,n){if(n==="edge"){var i=this.getData(),o=this.getDataParams(e,n),l=i.graph.getEdgeByIndex(e),s=i.getName(l.node1.dataIndex),u=i.getName(l.node2.dataIndex),d=[];return s!=null&&d.push(s),u!=null&&d.push(u),ra("nameValue",{name:d.join(" > "),value:o.value,noValue:o.value==null})}var c=k1({series:this,dataIndex:e,multipleSeries:a});return c},t.prototype._updateCategoriesData=function(){var e=ne(this.option.categories||[],function(n){return n.value!=null?n:be({value:0},n)}),a=new da(["value"],this);a.initData(e),this._categoriesData=a,this._categoriesModels=a.mapArray(function(n){return a.getItemModel(n)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(Ct),fT={type:"graphRoam",event:"graphRoam",update:"none"};function pT(r){r.registerChartView(uT),r.registerSeriesModel(cT),r.registerProcessor(W2),r.registerVisual(Y2),r.registerVisual(j2),r.registerLayout(J2),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,tT),r.registerLayout(rT),r.registerCoordinateSystem("graphView",{dimensions:Mi.dimensions,create:iT}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},ar),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},ar),r.registerAction(fT,function(t,e,a){e.eachComponent({mainType:"series",query:t},function(n){var i=n.coordinateSystem,o=ju(i,t,void 0,a);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}var vT=function(){function r(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return r}(),gT=function(r){W(t,r);function t(e){var a=r.call(this,e)||this;return a.type="pointer",a}return t.prototype.getDefaultShape=function(){return new vT},t.prototype.buildPath=function(e,a){var n=Math.cos,i=Math.sin,o=a.r,l=a.width,s=a.angle,u=a.x-n(s)*l*(l>=o/3?1:2),d=a.y-i(s)*l*(l>=o/3?1:2);s=a.angle-Math.PI/2,e.moveTo(u,d),e.lineTo(a.x+n(s)*l,a.y+i(s)*l),e.lineTo(a.x+n(a.angle)*o,a.y+i(a.angle)*o),e.lineTo(a.x-n(s)*l,a.y-i(s)*l),e.lineTo(u,d)},t}(Tt);function hT(r,t){var e=r.get("center"),a=t.getWidth(),n=t.getHeight(),i=Math.min(a,n),o=de(e[0],t.getWidth()),l=de(e[1],t.getHeight()),s=de(r.get("radius"),i/2);return{cx:o,cy:l,r:s}}function qi(r,t){var e=r==null?"":r+"";return t&&(Re(t)?e=t.replace("{value}",e):Be(t)&&(e=t(r))),e}var mT=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){this.group.removeAll();var i=e.get(["axisLine","lineStyle","color"]),o=hT(e,n);this._renderMain(e,a,n,i,o),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,a,n,i,o){var l=this.group,s=e.get("clockwise"),u=-e.get("startAngle")/180*Math.PI,d=-e.get("endAngle")/180*Math.PI,c=e.getModel("axisLine"),f=c.get("roundCap"),p=f?Qd:Vr,g=c.get("show"),v=c.getModel("lineStyle"),y=v.get("width"),_=[u,d];A1(_,!s),u=_[0],d=_[1];for(var S=d-u,w=u,T=[],C=0;g&&C<i.length;C++){var k=Math.min(Math.max(i[C][0],0),1);d=u+S*k;var A=new p({shape:{startAngle:w,endAngle:d,cx:o.cx,cy:o.cy,clockwise:s,r0:o.r-y,r:o.r},silent:!0});A.setStyle({fill:i[C][1]}),A.setStyle(v.getLineStyle(["color","width"])),T.push(A),w=d}T.reverse(),O(T,function(M){return l.add(M)});var I=function(M){if(M<=0)return i[0][1];var D;for(D=0;D<i.length;D++)if(i[D][0]>=M&&(D===0?0:i[D-1][0])<M)return i[D][1];return i[D-1][1]};this._renderTicks(e,a,n,I,o,u,d,s,y),this._renderTitleAndDetail(e,a,n,I,o),this._renderAnchor(e,o),this._renderPointer(e,a,n,I,o,u,d,s,y)},t.prototype._renderTicks=function(e,a,n,i,o,l,s,u,d){for(var c=this.group,f=o.cx,p=o.cy,g=o.r,v=+e.get("min"),y=+e.get("max"),_=e.getModel("splitLine"),S=e.getModel("axisTick"),w=e.getModel("axisLabel"),T=e.get("splitNumber"),C=S.get("splitNumber"),k=de(_.get("length"),g),A=de(S.get("length"),g),I=l,M=(s-l)/T,D=M/C,L=_.getModel("lineStyle").getLineStyle(),E=S.getModel("lineStyle").getLineStyle(),R=_.get("distance"),V,z,G=0;G<=T;G++){if(V=Math.cos(I),z=Math.sin(I),_.get("show")){var q=R?R+d:d,Z=new xa({shape:{x1:V*(g-q)+f,y1:z*(g-q)+p,x2:V*(g-k-q)+f,y2:z*(g-k-q)+p},style:L,silent:!0});L.stroke==="auto"&&Z.setStyle({stroke:i(G/T)}),c.add(Z)}if(w.get("show")){var q=w.get("distance")+R,H=qi(Tu(G/T*(y-v)+v),w.get("formatter")),F=i(G/T),re=V*(g-k-q)+f,_e=z*(g-k-q)+p,te=w.get("rotate"),he=0;te==="radial"?(he=-I+2*Math.PI,he>Math.PI/2&&(he+=Math.PI)):te==="tangential"?he=-I-Math.PI/2:aa(te)&&(he=te*Math.PI/180),he===0?c.add(new Xe({style:lt(w,{text:H,x:re,y:_e,verticalAlign:z<-.8?"top":z>.8?"bottom":"middle",align:V<-.4?"left":V>.4?"right":"center"},{inheritColor:F}),silent:!0})):c.add(new Xe({style:lt(w,{text:H,x:re,y:_e,verticalAlign:"middle",align:"center"},{inheritColor:F}),silent:!0,originX:re,originY:_e,rotation:he}))}if(S.get("show")&&G!==T){var q=S.get("distance");q=q?q+d:d;for(var Ie=0;Ie<=C;Ie++){V=Math.cos(I),z=Math.sin(I);var ke=new xa({shape:{x1:V*(g-q)+f,y1:z*(g-q)+p,x2:V*(g-A-q)+f,y2:z*(g-A-q)+p},silent:!0,style:E});E.stroke==="auto"&&ke.setStyle({stroke:i((G+Ie/C)/T)}),c.add(ke),I+=D}I-=D}else I+=M}},t.prototype._renderPointer=function(e,a,n,i,o,l,s,u,d){var c=this.group,f=this._data,p=this._progressEls,g=[],v=e.get(["pointer","show"]),y=e.getModel("progress"),_=y.get("show"),S=e.getData(),w=S.mapDimension("value"),T=+e.get("min"),C=+e.get("max"),k=[T,C],A=[l,s];function I(D,L){var E=S.getItemModel(D),R=E.getModel("pointer"),V=de(R.get("width"),o.r),z=de(R.get("length"),o.r),G=e.get(["pointer","icon"]),q=R.get("offsetCenter"),Z=de(q[0],o.r),H=de(q[1],o.r),F=R.get("keepAspect"),re;return G?re=St(G,Z-V/2,H-z,V,z,null,F):re=new gT({shape:{angle:-Math.PI/2,width:V,r:z,x:Z,y:H}}),re.rotation=-(L+Math.PI/2),re.x=o.cx,re.y=o.cy,re}function M(D,L){var E=y.get("roundCap"),R=E?Qd:Vr,V=y.get("overlap"),z=V?y.get("width"):d/S.count(),G=V?o.r-z:o.r-(D+1)*z,q=V?o.r:o.r-D*z,Z=new R({shape:{startAngle:l,endAngle:L,cx:o.cx,cy:o.cy,clockwise:u,r0:G,r:q}});return V&&(Z.z2=C-S.get(w,D)%C),Z}(_||v)&&(S.diff(f).add(function(D){var L=S.get(w,D);if(v){var E=I(D,l);qt(E,{rotation:-((isNaN(+L)?A[0]:We(L,k,A,!0))+Math.PI/2)},e),c.add(E),S.setItemGraphicEl(D,E)}if(_){var R=M(D,l),V=y.get("clip");qt(R,{shape:{endAngle:We(L,k,A,V)}},e),c.add(R),Jd(e.seriesIndex,S.dataType,D,R),g[D]=R}}).update(function(D,L){var E=S.get(w,D);if(v){var R=f.getItemGraphicEl(L),V=R?R.rotation:l,z=I(D,V);z.rotation=V,Ke(z,{rotation:-((isNaN(+E)?A[0]:We(E,k,A,!0))+Math.PI/2)},e),c.add(z),S.setItemGraphicEl(D,z)}if(_){var G=p[L],q=G?G.shape.endAngle:l,Z=M(D,q),H=y.get("clip");Ke(Z,{shape:{endAngle:We(E,k,A,H)}},e),c.add(Z),Jd(e.seriesIndex,S.dataType,D,Z),g[D]=Z}}).execute(),S.each(function(D){var L=S.getItemModel(D),E=L.getModel("emphasis"),R=E.get("focus"),V=E.get("blurScope"),z=E.get("disabled");if(v){var G=S.getItemGraphicEl(D),q=S.getItemVisual(D,"style"),Z=q.fill;if(G instanceof Ta){var H=G.style;G.useStyle(be({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},q))}else G.useStyle(q),G.type!=="pointer"&&G.setColor(Z);G.setStyle(L.getModel(["pointer","itemStyle"]).getItemStyle()),G.style.fill==="auto"&&G.setStyle("fill",i(We(S.get(w,D),k,[0,1],!0))),G.z2EmphasisLift=0,Xt(G,L),dt(G,R,V,z)}if(_){var F=g[D];F.useStyle(S.getItemVisual(D,"style")),F.setStyle(L.getModel(["progress","itemStyle"]).getItemStyle()),F.z2EmphasisLift=0,Xt(F,L),dt(F,R,V,z)}}),this._progressEls=g)},t.prototype._renderAnchor=function(e,a){var n=e.getModel("anchor"),i=n.get("show");if(i){var o=n.get("size"),l=n.get("icon"),s=n.get("offsetCenter"),u=n.get("keepAspect"),d=St(l,a.cx-o/2+de(s[0],a.r),a.cy-o/2+de(s[1],a.r),o,o,null,u);d.z2=n.get("showAbove")?1:0,d.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(d)}},t.prototype._renderTitleAndDetail=function(e,a,n,i,o){var l=this,s=e.getData(),u=s.mapDimension("value"),d=+e.get("min"),c=+e.get("max"),f=new xe,p=[],g=[],v=e.isAnimationEnabled(),y=e.get(["pointer","showAbove"]);s.diff(this._data).add(function(_){p[_]=new Xe({silent:!0}),g[_]=new Xe({silent:!0})}).update(function(_,S){p[_]=l._titleEls[S],g[_]=l._detailEls[S]}).execute(),s.each(function(_){var S=s.getItemModel(_),w=s.get(u,_),T=new xe,C=i(We(w,[d,c],[0,1],!0)),k=S.getModel("title");if(k.get("show")){var A=k.get("offsetCenter"),I=o.cx+de(A[0],o.r),M=o.cy+de(A[1],o.r),D=p[_];D.attr({z2:y?0:2,style:lt(k,{x:I,y:M,text:s.getName(_),align:"center",verticalAlign:"middle"},{inheritColor:C})}),T.add(D)}var L=S.getModel("detail");if(L.get("show")){var E=L.get("offsetCenter"),R=o.cx+de(E[0],o.r),V=o.cy+de(E[1],o.r),z=de(L.get("width"),o.r),G=de(L.get("height"),o.r),q=e.get(["progress","show"])?s.getItemVisual(_,"style").fill:C,D=g[_],Z=L.get("formatter");D.attr({z2:y?0:2,style:lt(L,{x:R,y:V,text:qi(w,Z),width:isNaN(z)?null:z,height:isNaN(G)?null:G,align:"center",verticalAlign:"middle"},{inheritColor:q})}),I1(D,{normal:L},w,function(F){return qi(F,Z)}),v&&Mg(D,_,s,e,{getFormattedLabel:function(F,re,_e,te,he,Ie){return qi(Ie?Ie.interpolatedValue:w,Z)}}),T.add(D)}f.add(T)}),this.group.add(f),this._titleEls=p,this._detailEls=g},t.type="gauge",t}(ut),yT=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="itemStyle",e}return t.prototype.getInitialData=function(e,a){return bi(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(Ct);function bT(r){r.registerChartView(mT),r.registerSeriesModel(yT)}var _T=["itemStyle","opacity"],ST=function(r){W(t,r);function t(e,a){var n=r.call(this)||this,i=n,o=new Va,l=new Xe;return i.setTextContent(l),n.setTextGuideLine(o),n.updateData(e,a,!0),n}return t.prototype.updateData=function(e,a,n){var i=this,o=e.hostModel,l=e.getItemModel(a),s=e.getItemLayout(a),u=l.getModel("emphasis"),d=l.get(_T);d=d??1,n||qa(i),i.useStyle(e.getItemVisual(a,"style")),i.style.lineJoin="round",n?(i.setShape({points:s.points}),i.style.opacity=0,qt(i,{style:{opacity:d}},o,a)):Ke(i,{style:{opacity:d},shape:{points:s.points}},o,a),Xt(i,l),this._updateLabel(e,a),dt(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e,a){var n=this,i=this.getTextGuideLine(),o=n.getTextContent(),l=e.hostModel,s=e.getItemModel(a),u=e.getItemLayout(a),d=u.label,c=e.getItemVisual(a,"style"),f=c.fill;Zt(o,Ot(s),{labelFetcher:e.hostModel,labelDataIndex:a,defaultOpacity:c.opacity,defaultText:e.getName(a)},{normal:{align:d.textAlign,verticalAlign:d.verticalAlign}}),n.setTextConfig({local:!0,inside:!!d.inside,insideStroke:f,outsideFill:f});var p=d.linePoints;i.setShape({points:p}),n.textGuideLineConfig={anchor:p?new $a(p[0][0],p[0][1]):null},Ke(o,{style:{x:d.x,y:d.y}},l,a),o.attr({rotation:d.rotation,originX:d.x,originY:d.y,z2:10}),Ag(n,Ig(s),{stroke:f})},t}(ya),wT=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,a,n){var i=e.getData(),o=this._data,l=this.group;i.diff(o).add(function(s){var u=new ST(i,s);i.setItemGraphicEl(s,u),l.add(u)}).update(function(s,u){var d=o.getItemGraphicEl(u);d.updateData(i,s),l.add(d),i.setItemGraphicEl(s,d)}).remove(function(s){var u=o.getItemGraphicEl(s);D1(u,e,s)}).execute(),this._data=i},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(ut),xT=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new zo(ye(this.getData,this),ye(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.getInitialData=function(e,a){return bi(this,{coordDimensions:["value"],encodeDefaulter:Ve(Bg,this)})},t.prototype._defaultLabelLine=function(e){Wo(e,"labelLine",["show"]);var a=e.labelLine,n=e.emphasis.labelLine;a.show=a.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.prototype.getDataParams=function(e){var a=this.getData(),n=r.prototype.getDataParams.call(this,e),i=a.mapDimension("value"),o=a.getSum(i);return n.percent=o?+(a.get(i,e)/o*100).toFixed(2):0,n.$vars.push("percent"),n},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(Ct);function TT(r,t){return Kt(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function CT(r,t){for(var e=r.mapDimension("value"),a=r.mapArray(e,function(s){return s}),n=[],i=t==="ascending",o=0,l=r.count();o<l;o++)n[o]=o;return Be(t)?n.sort(t):t!=="none"&&n.sort(function(s,u){return i?a[s]-a[u]:a[u]-a[s]}),n}function kT(r){var t=r.hostModel,e=t.get("orient");r.each(function(a){var n=r.getItemModel(a),i=n.getModel("label"),o=i.get("position"),l=n.getModel("labelLine"),s=r.getItemLayout(a),u=s.points,d=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",c,f,p,g;if(d)o==="insideLeft"?(f=(u[0][0]+u[3][0])/2+5,p=(u[0][1]+u[3][1])/2,c="left"):o==="insideRight"?(f=(u[1][0]+u[2][0])/2-5,p=(u[1][1]+u[2][1])/2,c="right"):(f=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,p=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,c="center"),g=[[f,p],[f,p]];else{var v=void 0,y=void 0,_=void 0,S=void 0,w=l.get("length");o==="left"?(v=(u[3][0]+u[0][0])/2,y=(u[3][1]+u[0][1])/2,_=v-w,f=_-5,c="right"):o==="right"?(v=(u[1][0]+u[2][0])/2,y=(u[1][1]+u[2][1])/2,_=v+w,f=_+5,c="left"):o==="top"?(v=(u[3][0]+u[0][0])/2,y=(u[3][1]+u[0][1])/2,S=y-w,p=S-5,c="center"):o==="bottom"?(v=(u[1][0]+u[2][0])/2,y=(u[1][1]+u[2][1])/2,S=y+w,p=S+5,c="center"):o==="rightTop"?(v=e==="horizontal"?u[3][0]:u[1][0],y=e==="horizontal"?u[3][1]:u[1][1],e==="horizontal"?(S=y-w,p=S-5,c="center"):(_=v+w,f=_+5,c="top")):o==="rightBottom"?(v=u[2][0],y=u[2][1],e==="horizontal"?(S=y+w,p=S+5,c="center"):(_=v+w,f=_+5,c="bottom")):o==="leftTop"?(v=u[0][0],y=e==="horizontal"?u[0][1]:u[1][1],e==="horizontal"?(S=y-w,p=S-5,c="center"):(_=v-w,f=_-5,c="right")):o==="leftBottom"?(v=e==="horizontal"?u[1][0]:u[3][0],y=e==="horizontal"?u[1][1]:u[2][1],e==="horizontal"?(S=y+w,p=S+5,c="center"):(_=v-w,f=_-5,c="right")):(v=(u[1][0]+u[2][0])/2,y=(u[1][1]+u[2][1])/2,e==="horizontal"?(S=y+w,p=S+5,c="center"):(_=v+w,f=_+5,c="left")),e==="horizontal"?(_=v,f=_):(S=y,p=S),g=[[v,y],[_,S]]}s.label={linePoints:g,x:f,y:p,verticalAlign:"middle",textAlign:c,inside:d}})}function AT(r,t){r.eachSeriesByType("funnel",function(e){var a=e.getData(),n=a.mapDimension("value"),i=e.get("sort"),o=TT(e,t),l=e.get("orient"),s=o.width,u=o.height,d=CT(a,i),c=o.x,f=o.y,p=l==="horizontal"?[de(e.get("minSize"),u),de(e.get("maxSize"),u)]:[de(e.get("minSize"),s),de(e.get("maxSize"),s)],g=a.getDataExtent(n),v=e.get("min"),y=e.get("max");v==null&&(v=Math.min(g[0],0)),y==null&&(y=g[1]);var _=e.get("funnelAlign"),S=e.get("gap"),w=l==="horizontal"?s:u,T=(w-S*(a.count()-1))/a.count(),C=function(V,z){if(l==="horizontal"){var G=a.get(n,V)||0,q=We(G,[v,y],p,!0),Z=void 0;switch(_){case"top":Z=f;break;case"center":Z=f+(u-q)/2;break;case"bottom":Z=f+(u-q);break}return[[z,Z],[z,Z+q]]}var H=a.get(n,V)||0,F=We(H,[v,y],p,!0),re;switch(_){case"left":re=c;break;case"center":re=c+(s-F)/2;break;case"right":re=c+s-F;break}return[[re,z],[re+F,z]]};i==="ascending"&&(T=-T,S=-S,l==="horizontal"?c+=s:f+=u,d=d.reverse());for(var k=0;k<d.length;k++){var A=d[k],I=d[k+1],M=a.getItemModel(A);if(l==="horizontal"){var D=M.get(["itemStyle","width"]);D==null?D=T:(D=de(D,s),i==="ascending"&&(D=-D));var L=C(A,c),E=C(I,c+D);c+=D+S,a.setItemLayout(A,{points:L.concat(E.slice().reverse())})}else{var R=M.get(["itemStyle","height"]);R==null?R=T:(R=de(R,u),i==="ascending"&&(R=-R));var L=C(A,f),E=C(I,f+R);f+=R+S,a.setItemLayout(A,{points:L.concat(E.slice().reverse())})}}kT(a)})}function IT(r){r.registerChartView(wT),r.registerSeriesModel(xT),r.registerLayout(AT),r.registerProcessor(qo("funnel"))}var DT=.3,MT=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._dataGroup=new xe,e._initialized=!1,e}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,a,n,i){this._progressiveEls=null;var o=this._dataGroup,l=e.getData(),s=this._data,u=e.coordinateSystem,d=u.dimensions,c=Uf(e);l.diff(s).add(f).update(p).remove(g).execute();function f(y){var _=Ff(l,o,y,d,u);Yl(_,l,y,c)}function p(y,_){var S=s.getItemGraphicEl(_),w=Sm(l,y,d,u);l.setItemGraphicEl(y,S),Ke(S,{shape:{points:w}},e,y),qa(S),Yl(S,l,y,c)}function g(y){var _=s.getItemGraphicEl(y);o.remove(_)}if(!this._initialized){this._initialized=!0;var v=PT(u,e,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(v)}this._data=l},t.prototype.incrementalPrepareRender=function(e,a,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,a,n){for(var i=a.getData(),o=a.coordinateSystem,l=o.dimensions,s=Uf(a),u=this._progressiveEls=[],d=e.start;d<e.end;d++){var c=Ff(i,this._dataGroup,d,l,o);c.incremental=!0,Yl(c,i,d,s),u.push(c)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(ut);function PT(r,t,e){var a=r.model,n=r.getRect(),i=new et({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),o=a.get("layout")==="horizontal"?"width":"height";return i.setShape(o,0),qt(i,{shape:{width:n.width,height:n.height}},t,e),i}function Sm(r,t,e,a){for(var n=[],i=0;i<e.length;i++){var o=e[i],l=r.get(r.mapDimension(o),t);LT(l,a.getAxis(o).type)||n.push(a.dataToPoint(l,o))}return n}function Ff(r,t,e,a,n){var i=Sm(r,e,a,n),o=new Va({shape:{points:i},z2:10});return t.add(o),r.setItemGraphicEl(e,o),o}function Uf(r){var t=r.get("smooth",!0);return t===!0&&(t=DT),t=M1(t),P1(t)&&(t=0),{smooth:t}}function Yl(r,t,e,a){r.useStyle(t.getItemVisual(e,"style")),r.style.fill=null,r.setShape("smooth",a.smooth);var n=t.getItemModel(e),i=n.getModel("emphasis");Xt(r,n,"lineStyle"),dt(r,i.get("focus"),i.get("blurScope"),i.get("disabled"))}function LT(r,t){return t==="category"?r==null:r==null||isNaN(r)}var VT=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return t.prototype.getInitialData=function(e,a){return zr(null,this,{useEncodeDefaulter:ye(RT,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var a=this.coordinateSystem,n=this.getData(),i=[];return a.eachActiveState(n,function(o,l){e===o&&i.push(n.getRawIndex(l))}),i},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(Ct);function RT(r){var t=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(t){var e={};return O(t.dimensions,function(a){var n=ET(a);e[a]=n}),e}}function ET(r){return+r.replace("dim","")}var NT=["lineStyle","opacity"],OT={seriesType:"parallel",reset:function(r,t){var e=r.coordinateSystem,a={normal:r.get(["lineStyle","opacity"]),active:r.get("activeOpacity"),inactive:r.get("inactiveOpacity")};return{progress:function(n,i){e.eachActiveState(i,function(o,l){var s=a[o];if(o==="normal"&&i.hasItemOption){var u=i.getItemModel(l).get(NT,!0);u!=null&&(s=u)}var d=i.ensureUniqueItemVisual(l,"style");d.opacity=s},n.start,n.end)}}}};function $T(r){zT(r),BT(r)}function zT(r){if(!r.parallel){var t=!1;O(r.series,function(e){e&&e.type==="parallel"&&(t=!0)}),t&&(r.parallel=[{}])}}function BT(r){var t=jt(r.parallelAxis);O(t,function(e){if(Nt(e)){var a=e.parallelIndex||0,n=jt(r.parallel)[a];n&&n.parallelAxisDefault&&rt(e,n.parallelAxisDefault,!1)}})}var qT=5,GT=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){this._model=e,this._api=n,this._handlers||(this._handlers={},O(FT,function(i,o){n.getZr().on(o,this._handlers[o]=ye(i,this))},this)),Zo(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(e,a){Zg(this,"_throttledDispatchExpand"),O(this._handlers,function(n,i){a.getZr().off(i,n)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},t.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(be({type:"parallelAxisExpand"},e))},t.type="parallel",t}(Ut),FT={mousedown:function(r){jl(this,"click")&&(this._mouseDownPoint=[r.offsetX,r.offsetY])},mouseup:function(r){var t=this._mouseDownPoint;if(jl(this,"click")&&t){var e=[r.offsetX,r.offsetY],a=Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2);if(a>qT)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(r){if(!(this._mouseDownPoint||!jl(this,"mousemove"))){var t=this._model,e=t.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]),a=e.behavior;a==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(a==="none"?null:{axisExpandWindow:e.axisExpandWindow,animation:a==="jump"?null:{duration:0}})}}};function jl(r,t){var e=r._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===t}var UT=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){r.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(e){var a=this.option;e&&rt(a,e,!0),this._initDimensions()},t.prototype.contains=function(e,a){var n=e.get("parallelIndex");return n!=null&&a.getComponent("parallel",n)===this},t.prototype.setAxisExpand=function(e){O(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(a){e.hasOwnProperty(a)&&(this.option[a]=e[a])},this)},t.prototype._initDimensions=function(){var e=this.dimensions=[],a=this.parallelAxisIndex=[],n=bt(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(i){return(i.get("parallelIndex")||0)===this.componentIndex},this);O(n,function(i){e.push("dim"+i.get("dim")),a.push(i.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(zt),HT=function(r){W(t,r);function t(e,a,n,i,o){var l=r.call(this,e,a,n)||this;return l.type=i||"value",l.axisIndex=o,l}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(Ra);function Gr(r,t,e,a,n,i){r=r||0;var o=e[1]-e[0];if(n!=null&&(n=Yr(n,[0,o])),i!=null&&(i=Math.max(i,n??0)),a==="all"){var l=Math.abs(t[1]-t[0]);l=Yr(l,[0,o]),n=i=Yr(l,[n,i]),a=0}t[0]=Yr(t[0],e),t[1]=Yr(t[1],e);var s=Zl(t,a);t[a]+=r;var u=n||0,d=e.slice();s.sign<0?d[0]+=u:d[1]-=u,t[a]=Yr(t[a],d);var c;return c=Zl(t,a),n!=null&&(c.sign!==s.sign||c.span<n)&&(t[1-a]=t[a]+s.sign*n),c=Zl(t,a),i!=null&&c.span>i&&(t[1-a]=t[a]+c.sign*i),t}function Zl(r,t){var e=r[t]-r[1-t];return{span:Math.abs(e),sign:e>0?-1:e<0?1:t?-1:1}}function Yr(r,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,r))}var Xl=O,wm=Math.min,xm=Math.max,Hf=Math.floor,WT=Math.ceil,Wf=Tu,YT=Math.PI,jT=function(){function r(t,e,a){this.type="parallel",this._axesMap=Pe(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,a)}return r.prototype._init=function(t,e,a){var n=t.dimensions,i=t.parallelAxisIndex;Xl(n,function(o,l){var s=i[l],u=e.getComponent("parallelAxis",s),d=this._axesMap.set(o,new HT(o,Cu(u),[0,0],u.get("type"),s)),c=d.type==="category";d.onBand=c&&u.get("boundaryGap"),d.inverse=u.get("inverse"),u.axis=d,d.model=u,d.coordinateSystem=u.coordinateSystem=this},this)},r.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},r.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),a=e.axisBase,n=e.layoutBase,i=e.pixelDimIndex,o=t[1-i],l=t[i];return o>=a&&o<=a+e.axisLength&&l>=n&&l<=n+e.layoutLength},r.prototype.getModel=function(){return this._model},r.prototype._updateAxesFromSeries=function(t,e){e.eachSeries(function(a){if(t.contains(a,e)){var n=a.getData();Xl(this.dimensions,function(i){var o=this._axesMap.get(i);o.scale.unionExtentFromData(n,n.mapDimension(i)),lo(o.scale,o.model)},this)}},this)},r.prototype.resize=function(t,e){this._rect=Kt(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},r.prototype.getRect=function(){return this._rect},r.prototype._makeLayoutInfo=function(){var t=this._model,e=this._rect,a=["x","y"],n=["width","height"],i=t.get("layout"),o=i==="horizontal"?0:1,l=e[n[o]],s=[0,l],u=this.dimensions.length,d=Gi(t.get("axisExpandWidth"),s),c=Gi(t.get("axisExpandCount")||0,[0,u]),f=t.get("axisExpandable")&&u>3&&u>c&&c>1&&d>0&&l>0,p=t.get("axisExpandWindow"),g;if(p)g=Gi(p[1]-p[0],s),p[1]=p[0]+g;else{g=Gi(d*(c-1),s);var v=t.get("axisExpandCenter")||Hf(u/2);p=[d*v-g/2],p[1]=p[0]+g}var y=(l-g)/(u-c);y<3&&(y=0);var _=[Hf(Wf(p[0]/d,1))+1,WT(Wf(p[1]/d,1))-1],S=y/d*p[0];return{layout:i,pixelDimIndex:o,layoutBase:e[a[o]],layoutLength:l,axisBase:e[a[1-o]],axisLength:e[n[1-o]],axisExpandable:f,axisExpandWidth:d,axisCollapseWidth:y,axisExpandWindow:p,axisCount:u,winInnerIndices:_,axisExpandWindow0Pos:S}},r.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,a=this.dimensions,n=this._makeLayoutInfo(),i=n.layout;e.each(function(o){var l=[0,n.axisLength],s=o.inverse?1:0;o.setExtent(l[s],l[1-s])}),Xl(a,function(o,l){var s=(n.axisExpandable?XT:ZT)(l,n),u={horizontal:{x:s.position,y:n.axisLength},vertical:{x:0,y:s.position}},d={horizontal:YT/2,vertical:0},c=[u[i].x+t.x,u[i].y+t.y],f=d[i],p=Cn();Fo(p,p,f),Pr(p,p,c),this._axesLayout[o]={position:c,rotation:f,transform:p,axisNameAvailableWidth:s.axisNameAvailableWidth,axisLabelShow:s.axisLabelShow,nameTruncateMaxWidth:s.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},r.prototype.getAxis=function(t){return this._axesMap.get(t)},r.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},r.prototype.eachActiveState=function(t,e,a,n){a==null&&(a=0),n==null&&(n=t.count());var i=this._axesMap,o=this.dimensions,l=[],s=[];O(o,function(y){l.push(t.mapDimension(y)),s.push(i.get(y).model)});for(var u=this.hasAxisBrushed(),d=a;d<n;d++){var c=void 0;if(!u)c="normal";else{c="active";for(var f=t.getValues(l,d),p=0,g=o.length;p<g;p++){var v=s[p].getActiveState(f[p]);if(v==="inactive"){c="inactive";break}}}e(c,d)}},r.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,a=!1,n=0,i=t.length;n<i;n++)e.get(t[n]).model.getActiveState()!=="normal"&&(a=!0);return a},r.prototype.axisCoordToPoint=function(t,e){var a=this._axesLayout[e];return Ja([t,0],a.transform)},r.prototype.getAxisLayout=function(t){return Fe(this._axesLayout[t])},r.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),a=e.pixelDimIndex,n=e.axisExpandWindow.slice(),i=n[1]-n[0],o=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:n};var l=t[a]-e.layoutBase-e.axisExpandWindow0Pos,s,u="slide",d=e.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),f=c[0]!=null;if(d)f&&d&&l<i*c[0]?(u="jump",s=l-i*c[2]):f&&d&&l>i*(1-c[0])?(u="jump",s=l-i*(1-c[2])):(s=l-i*c[1])>=0&&(s=l-i*(1-c[1]))<=0&&(s=0),s*=e.axisExpandWidth/d,s?Gr(s,n,o,"all"):u="none";else{var p=n[1]-n[0],g=o[1]*l/p;n=[xm(0,g-p/2)],n[1]=wm(o[1],n[0]+p),n[0]=n[1]-p}return{axisExpandWindow:n,behavior:u}},r}();function Gi(r,t){return wm(xm(r,t[0]),t[1])}function ZT(r,t){var e=t.layoutLength/(t.axisCount-1);return{position:e*r,axisNameAvailableWidth:e,axisLabelShow:!0}}function XT(r,t){var e=t.layoutLength,a=t.axisExpandWidth,n=t.axisCount,i=t.axisCollapseWidth,o=t.winInnerIndices,l,s=i,u=!1,d;return r<o[0]?(l=r*i,d=i):r<=o[1]?(l=t.axisExpandWindow0Pos+r*a-t.axisExpandWindow[0],s=a,u=!0):(l=e-(n-1-r)*i,d=i),{position:l,axisNameAvailableWidth:s,axisLabelShow:u,nameTruncateMaxWidth:d}}function KT(r,t){var e=[];return r.eachComponent("parallel",function(a,n){var i=new jT(a,r,t);i.name="parallel_"+n,i.resize(a,t),a.coordinateSystem=i,i.model=a,e.push(i)}),r.eachSeries(function(a){if(a.get("coordinateSystem")==="parallel"){var n=a.getReferringComponents("parallel",La).models[0];a.coordinateSystem=n.coordinateSystem}}),e}var QT={create:KT},Zs=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.activeIntervals=[],e}return t.prototype.getAreaSelectStyle=function(){return Hg([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(e){var a=this.activeIntervals=Fe(e);if(a)for(var n=a.length-1;n>=0;n--)ha(a[n])},t.prototype.getActiveState=function(e){var a=this.activeIntervals;if(!a.length)return"normal";if(e==null||isNaN(+e))return"inactive";if(a.length===1){var n=a[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var i=0,o=a.length;i<o;i++)if(a[i][0]<=e&&e<=a[i][1])return"active";return"inactive"},t}(zt);Ca(Zs,Bo);var Rr=!0,ci=Math.min,hn=Math.max,JT=Math.pow,eC=1e4,tC=6,aC=6,Yf="globalPan",rC={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},nC={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},jf={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},iC=0,nd=function(r){W(t,r);function t(e){var a=r.call(this)||this;return a._track=[],a._covers=[],a._handlers={},a._zr=e,a.group=new xe,a._uid="brushController_"+iC++,O(fC,function(n,i){this._handlers[i]=ye(n,this)},a),a}return t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var a=this._zr;this._enableGlobalPan||Zw(a,Yf,this._uid),O(this._handlers,function(n,i){a.on(i,n)}),this._brushType=e.brushType,this._brushOption=rt(Fe(jf),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;Xw(e,Yf,this._uid),O(this._handlers,function(a,n){e.off(n,a)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var a=this._panels={};O(e,function(n){a[n.panelId]=Fe(n)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var a=this.group;return this._zr.add(a),a.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=a.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=ne(e,function(f){return rt(Fe(jf),f,!0)});var a="\0-brush-index-",n=this._covers,i=this._covers=[],o=this,l=this._creatingCover;return new rr(n,e,u,s).add(d).update(d).remove(c).execute(),this;function s(f,p){return(f.id!=null?f.id:a+p)+"-"+f.brushType}function u(f,p){return s(f.__brushOption,p)}function d(f,p){var g=e[f];if(p!=null&&n[p]===l)i[f]=n[p];else{var v=i[f]=p!=null?(n[p].__brushOption=g,n[p]):Cm(o,Tm(o,g));id(o,v)}}function c(f){n[f]!==l&&o.group.remove(n[f])}},t.prototype.unmount=function(){return this.enableBrush(!1),Xs(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Og);function Tm(r,t){var e=il[t.brushType].createCover(r,t);return e.__brushOption=t,Am(e,t),r.group.add(e),e}function Cm(r,t){var e=od(t);return e.endCreating&&(e.endCreating(r,t),Am(t,t.__brushOption)),t}function km(r,t){var e=t.__brushOption;od(t).updateCoverShape(r,t,e.range,e)}function Am(r,t){var e=t.z;e==null&&(e=eC),r.traverse(function(a){a.z=e,a.z2=e})}function id(r,t){od(t).updateCommon(r,t),km(r,t)}function od(r){return il[r.__brushOption.brushType]}function ld(r,t,e){var a=r._panels;if(!a)return Rr;var n,i=r._transform;return O(a,function(o){o.isTargetByCursor(t,e,i)&&(n=o)}),n}function Im(r,t){var e=r._panels;if(!e)return Rr;var a=t.__brushOption.panelId;return a!=null?e[a]:Rr}function Xs(r){var t=r._covers,e=t.length;return O(t,function(a){r.group.remove(a)},r),t.length=0,!!e}function Er(r,t){var e=ne(r._covers,function(a){var n=a.__brushOption,i=Fe(n.range);return{brushType:n.brushType,panelId:n.panelId,range:i}});r.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function oC(r){var t=r._track;if(!t.length)return!1;var e=t[t.length-1],a=t[0],n=e[0]-a[0],i=e[1]-a[1],o=JT(n*n+i*i,.5);return o>tC}function Dm(r){var t=r.length-1;return t<0&&(t=0),[r[0],r[t]]}function Mm(r,t,e,a){var n=new xe;return n.add(new et({name:"main",style:sd(e),silent:!0,draggable:!0,cursor:"move",drift:Ve(Zf,r,t,n,["n","s","w","e"]),ondragend:Ve(Er,t,{isEnd:!0})})),O(a,function(i){n.add(new et({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Ve(Zf,r,t,n,i),ondragend:Ve(Er,t,{isEnd:!0})}))}),n}function Pm(r,t,e,a){var n=a.brushStyle.lineWidth||0,i=hn(n,aC),o=e[0][0],l=e[1][0],s=o-n/2,u=l-n/2,d=e[0][1],c=e[1][1],f=d-i+n/2,p=c-i+n/2,g=d-o,v=c-l,y=g+n,_=v+n;Na(r,t,"main",o,l,g,v),a.transformable&&(Na(r,t,"w",s,u,i,_),Na(r,t,"e",f,u,i,_),Na(r,t,"n",s,u,y,i),Na(r,t,"s",s,p,y,i),Na(r,t,"nw",s,u,i,i),Na(r,t,"ne",f,u,i,i),Na(r,t,"sw",s,p,i,i),Na(r,t,"se",f,p,i,i))}function Ks(r,t){var e=t.__brushOption,a=e.transformable,n=t.childAt(0);n.useStyle(sd(e)),n.attr({silent:!a,cursor:a?"move":"default"}),O([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var o=t.childOfName(i.join("")),l=i.length===1?Qs(r,i[0]):sC(r,i);o&&o.attr({silent:!a,invisible:!a,cursor:a?nC[l]+"-resize":null})})}function Na(r,t,e,a,n,i,o){var l=t.childOfName(e);l&&l.setShape(dC(ud(r,t,[[a,n],[a+i,n+o]])))}function sd(r){return Ne({strokeNoScale:!0},r.brushStyle)}function Lm(r,t,e,a){var n=[ci(r,e),ci(t,a)],i=[hn(r,e),hn(t,a)];return[[n[0],i[0]],[n[1],i[1]]]}function lC(r){return on(r.group)}function Qs(r,t){var e={w:"left",e:"right",n:"top",s:"bottom"},a={left:"w",right:"e",top:"n",bottom:"s"},n=ku(e[t],lC(r));return a[n]}function sC(r,t){var e=[Qs(r,t[0]),Qs(r,t[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function Zf(r,t,e,a,n,i){var o=e.__brushOption,l=r.toRectRange(o.range),s=Vm(t,n,i);O(a,function(u){var d=rC[u];l[d[0]][d[1]]+=s[d[0]]}),o.range=r.fromRectRange(Lm(l[0][0],l[1][0],l[0][1],l[1][1])),id(t,e),Er(t,{isEnd:!1})}function uC(r,t,e,a){var n=t.__brushOption.range,i=Vm(r,e,a);O(n,function(o){o[0]+=i[0],o[1]+=i[1]}),id(r,t),Er(r,{isEnd:!1})}function Vm(r,t,e){var a=r.group,n=a.transformCoordToLocal(t,e),i=a.transformCoordToLocal(0,0);return[n[0]-i[0],n[1]-i[1]]}function ud(r,t,e){var a=Im(r,t);return a&&a!==Rr?a.clipPath(e,r._transform):Fe(e)}function dC(r){var t=ci(r[0][0],r[1][0]),e=ci(r[0][1],r[1][1]),a=hn(r[0][0],r[1][0]),n=hn(r[0][1],r[1][1]);return{x:t,y:e,width:a-t,height:n-e}}function cC(r,t,e){if(!(!r._brushType||pC(r,t.offsetX,t.offsetY))){var a=r._zr,n=r._covers,i=ld(r,t,e);if(!r._dragging)for(var o=0;o<n.length;o++){var l=n[o].__brushOption;if(i&&(i===Rr||l.panelId===i.panelId)&&il[l.brushType].contain(n[o],e[0],e[1]))return}i&&a.setCursorStyle("crosshair")}}function Js(r){var t=r.event;t.preventDefault&&t.preventDefault()}function eu(r,t,e){return r.childOfName("main").contain(t,e)}function Rm(r,t,e,a){var n=r._creatingCover,i=r._creatingPanel,o=r._brushOption,l;if(r._track.push(e.slice()),oC(r)||n){if(i&&!n){o.brushMode==="single"&&Xs(r);var s=Fe(o);s.brushType=Xf(s.brushType,i),s.panelId=i===Rr?null:i.panelId,n=r._creatingCover=Tm(r,s),r._covers.push(n)}if(n){var u=il[Xf(r._brushType,i)],d=n.__brushOption;d.range=u.getCreatingRange(ud(r,n,r._track)),a&&(Cm(r,n),u.updateCommon(r,n)),km(r,n),l={isEnd:a}}}else a&&o.brushMode==="single"&&o.removeOnClick&&ld(r,t,e)&&Xs(r)&&(l={isEnd:a,removeOnClick:!0});return l}function Xf(r,t){return r==="auto"?t.defaultBrushType:r}var fC={mousedown:function(r){if(this._dragging)Kf(this,r);else if(!r.target||!r.target.draggable){Js(r);var t=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null;var e=this._creatingPanel=ld(this,r,t);e&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(r){var t=r.offsetX,e=r.offsetY,a=this.group.transformCoordToLocal(t,e);if(cC(this,r,a),this._dragging){Js(r);var n=Rm(this,r,a,!1);n&&Er(this,n)}},mouseup:function(r){Kf(this,r)}};function Kf(r,t){if(r._dragging){Js(t);var e=t.offsetX,a=t.offsetY,n=r.group.transformCoordToLocal(e,a),i=Rm(r,t,n,!0);r._dragging=!1,r._track=[],r._creatingCover=null,i&&Er(r,i)}}function pC(r,t,e){var a=r._zr;return t<0||t>a.getWidth()||e<0||e>a.getHeight()}var il={lineX:Qf(0),lineY:Qf(1),rect:{createCover:function(r,t){function e(a){return a}return Mm({toRectRange:e,fromRectRange:e},r,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var t=Dm(r);return Lm(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(r,t,e,a){Pm(r,t,e,a)},updateCommon:Ks,contain:eu},polygon:{createCover:function(r,t){var e=new xe;return e.add(new Va({name:"main",style:sd(t),silent:!0})),e},getCreatingRange:function(r){return r},endCreating:function(r,t){t.remove(t.childAt(0)),t.add(new ya({name:"main",draggable:!0,drift:Ve(uC,r,t),ondragend:Ve(Er,r,{isEnd:!0})}))},updateCoverShape:function(r,t,e,a){t.childAt(0).setShape({points:ud(r,t,e)})},updateCommon:Ks,contain:eu}};function Qf(r){return{createCover:function(t,e){return Mm({toRectRange:function(a){var n=[a,[0,100]];return r&&n.reverse(),n},fromRectRange:function(a){return a[r]}},t,e,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(t){var e=Dm(t),a=ci(e[0][r],e[1][r]),n=hn(e[0][r],e[1][r]);return[a,n]},updateCoverShape:function(t,e,a,n){var i,o=Im(t,e);if(o!==Rr&&o.getLinearBrushOtherExtent)i=o.getLinearBrushOtherExtent(r);else{var l=t._zr;i=[0,[l.getWidth(),l.getHeight()][1-r]]}var s=[a,i];r&&s.reverse(),Pm(t,e,s,n)},updateCommon:Ks,contain:eu}}function Em(r){return r=dd(r),function(t){return L1(t,r)}}function Nm(r,t){return r=dd(r),function(e){var a=t??e,n=a?r.width:r.height,i=a?r.x:r.y;return[i,i+(n||0)]}}function Om(r,t,e){var a=dd(r);return function(n,i){return a.contain(i[0],i[1])&&!tl(n,t,e)}}function dd(r){return st.create(r)}var vC=["axisLine","axisTickLabel","axisName"],gC=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){r.prototype.init.apply(this,arguments),(this._brushController=new nd(a.getZr())).on("brush",ye(this._onBrush,this))},t.prototype.render=function(e,a,n,i){if(!hC(e,a,i)){this.axisModel=e,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new xe,this.group.add(this._axisGroup),!!e.get("show")){var l=yC(e,a),s=l.coordinateSystem,u=e.getAreaSelectStyle(),d=u.width,c=e.axis.dim,f=s.getAxisLayout(c),p=be({strokeContainThreshold:d},f),g=new Dr(e,p);O(vC,g.add,g),this._axisGroup.add(g.getGroup()),this._refreshBrushController(p,u,e,l,d,n),Au(o,this._axisGroup,e)}}},t.prototype._refreshBrushController=function(e,a,n,i,o,l){var s=n.axis.getExtent(),u=s[1]-s[0],d=Math.min(30,Math.abs(u)*.1),c=st.create({x:s[0],y:-o/2,width:u,height:o});c.x-=d,c.width+=2*d,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:Em(c),isTargetByCursor:Om(c,l,i),getLinearBrushOtherExtent:Nm(c,0)}]).enableBrush({brushType:"lineX",brushStyle:a,removeOnClick:!0}).updateCovers(mC(n))},t.prototype._onBrush=function(e){var a=e.areas,n=this.axisModel,i=n.axis,o=ne(a,function(l){return[i.coordToData(l.range[0],!0),i.coordToData(l.range[1],!0)]});(!n.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(Ut);function hC(r,t,e){return e&&e.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:e})[0]===r}function mC(r){var t=r.axis;return ne(r.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(e[0],!0),t.dataToCoord(e[1],!0)]}})}function yC(r,t){return t.getComponent("parallel",r.get("parallelIndex"))}var bC={type:"axisAreaSelect",event:"axisAreaSelected"};function _C(r){r.registerAction(bC,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(a){a.axis.model.setActiveIntervals(t.intervals)})}),r.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(a){a.setAxisExpand(t)})})}var SC={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function $m(r){r.registerComponentView(GT),r.registerComponentModel(UT),r.registerCoordinateSystem("parallel",QT),r.registerPreprocessor($T),r.registerComponentModel(Zs),r.registerComponentView(gC),so(r,"parallel",Zs,SC),_C(r)}function wC(r){De($m),r.registerChartView(MT),r.registerSeriesModel(VT),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,OT)}var xC=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return r}(),TC=function(r){W(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new xC},t.prototype.buildPath=function(e,a){var n=a.extent;e.moveTo(a.x1,a.y1),e.bezierCurveTo(a.cpx1,a.cpy1,a.cpx2,a.cpy2,a.x2,a.y2),a.orient==="vertical"?(e.lineTo(a.x2+n,a.y2),e.bezierCurveTo(a.cpx2+n,a.cpy2,a.cpx1+n,a.cpy1,a.x1+n,a.y1)):(e.lineTo(a.x2,a.y2+n),e.bezierCurveTo(a.cpx2,a.cpy2+n,a.cpx1,a.cpy1+n,a.x1,a.y1+n)),e.closePath()},t.prototype.highlight=function(){un(this)},t.prototype.downplay=function(){dn(this)},t}(Tt),CC=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._focusAdjacencyDisabled=!1,e}return t.prototype.render=function(e,a,n){var i=this,o=e.getGraph(),l=this.group,s=e.layoutInfo,u=s.width,d=s.height,c=e.getData(),f=e.getData("edge"),p=e.get("orient");this._model=e,l.removeAll(),l.x=s.x,l.y=s.y,o.eachEdge(function(g){var v=new TC,y=qe(v);y.dataIndex=g.dataIndex,y.seriesIndex=e.seriesIndex,y.dataType="edge";var _=g.getModel(),S=_.getModel("lineStyle"),w=S.get("curveness"),T=g.node1.getLayout(),C=g.node1.getModel(),k=C.get("localX"),A=C.get("localY"),I=g.node2.getLayout(),M=g.node2.getModel(),D=M.get("localX"),L=M.get("localY"),E=g.getLayout(),R,V,z,G,q,Z,H,F;v.shape.extent=Math.max(1,E.dy),v.shape.orient=p,p==="vertical"?(R=(k!=null?k*u:T.x)+E.sy,V=(A!=null?A*d:T.y)+T.dy,z=(D!=null?D*u:I.x)+E.ty,G=L!=null?L*d:I.y,q=R,Z=V*(1-w)+G*w,H=z,F=V*w+G*(1-w)):(R=(k!=null?k*u:T.x)+T.dx,V=(A!=null?A*d:T.y)+E.sy,z=D!=null?D*u:I.x,G=(L!=null?L*d:I.y)+E.ty,q=R*(1-w)+z*w,Z=V,H=R*w+z*(1-w),F=G),v.setShape({x1:R,y1:V,x2:z,y2:G,cpx1:q,cpy1:Z,cpx2:H,cpy2:F}),v.useStyle(S.getItemStyle()),Jf(v.style,p,g);var re=""+_.get("value"),_e=Ot(_,"edgeLabel");Zt(v,_e,{labelFetcher:{getFormattedLabel:function(Ie,ke,Ee,we,Ge,ze){return e.getFormattedLabel(Ie,ke,"edge",we,wi(Ge,_e.normal&&_e.normal.get("formatter"),re),ze)}},labelDataIndex:g.dataIndex,defaultText:re}),v.setTextConfig({position:"inside"});var te=_.getModel("emphasis");Xt(v,_,"lineStyle",function(Ie){var ke=Ie.getItemStyle();return Jf(ke,p,g),ke}),l.add(v),f.setItemGraphicEl(g.dataIndex,v);var he=te.get("focus");dt(v,he==="adjacency"?g.getAdjacentDataIndices():he==="trajectory"?g.getTrajectoryDataIndices():he,te.get("blurScope"),te.get("disabled"))}),o.eachNode(function(g){var v=g.getLayout(),y=g.getModel(),_=y.get("localX"),S=y.get("localY"),w=y.getModel("emphasis"),T=y.get(["itemStyle","borderRadius"])||0,C=new et({shape:{x:_!=null?_*u:v.x,y:S!=null?S*d:v.y,width:v.dx,height:v.dy,r:T},style:y.getModel("itemStyle").getItemStyle(),z2:10});Zt(C,Ot(y),{labelFetcher:{getFormattedLabel:function(A,I){return e.getFormattedLabel(A,I,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),C.disableLabelAnimation=!0,C.setStyle("fill",g.getVisual("color")),C.setStyle("decal",g.getVisual("style").decal),Xt(C,y),l.add(C),c.setItemGraphicEl(g.dataIndex,C),qe(C).dataType="node";var k=w.get("focus");dt(C,k==="adjacency"?g.getAdjacentDataIndices():k==="trajectory"?g.getTrajectoryDataIndices():k,w.get("blurScope"),w.get("disabled"))}),c.eachItemGraphicEl(function(g,v){var y=c.getItemModel(v);y.get("draggable")&&(g.drift=function(_,S){i._focusAdjacencyDisabled=!0,this.shape.x+=_,this.shape.y+=S,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:c.getRawIndex(v),localX:this.shape.x/u,localY:this.shape.y/d})},g.ondragend=function(){i._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&e.isAnimationEnabled()&&l.setClipPath(kC(l.getBoundingRect(),e,function(){l.removeClipPath()})),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(ut);function Jf(r,t,e){switch(r.fill){case"source":r.fill=e.node1.getVisual("color"),r.decal=e.node1.getVisual("style").decal;break;case"target":r.fill=e.node2.getVisual("color"),r.decal=e.node2.getVisual("style").decal;break;case"gradient":var a=e.node1.getVisual("color"),n=e.node2.getVisual("color");Re(a)&&Re(n)&&(r.fill=new Oo(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:a,offset:0},{color:n,offset:1}]))}}function kC(r,t,e){var a=new et({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return qt(a,{shape:{width:r.width+20}},t,e),a}var AC=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){var n=e.edges||e.links,i=e.data||e.nodes,o=e.levels;this.levelModels=[];for(var l=this.levelModels,s=0;s<o.length;s++)o[s].depth!=null&&o[s].depth>=0&&(l[o[s].depth]=new na(o[s],this,a));if(i&&n){var u=_m(i,n,this,!0,d);return u.data}function d(c,f){c.wrapMethod("getItemModel",function(p,g){var v=p.parentModel,y=v.getData().getItemLayout(g);if(y){var _=y.depth,S=v.levelModels[_];S&&(p.parentModel=S)}return p}),f.wrapMethod("getItemModel",function(p,g){var v=p.parentModel,y=v.getGraph().getEdgeByIndex(g),_=y.node1.getLayout();if(_){var S=_.depth,w=v.levelModels[S];w&&(p.parentModel=w)}return p})}},t.prototype.setNodePosition=function(e,a){var n=this.option.data||this.option.nodes,i=n[e];i.localX=a[0],i.localY=a[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,a,n){function i(p){return isNaN(p)||p==null}if(n==="edge"){var o=this.getDataParams(e,n),l=o.data,s=o.value,u=l.source+" -- "+l.target;return ra("nameValue",{name:u,value:s,noValue:i(s)})}else{var d=this.getGraph().getNodeByIndex(e),c=d.getLayout().value,f=this.getDataParams(e,n).data.name;return ra("nameValue",{name:f!=null?f+"":null,value:c,noValue:i(c)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(e,a){var n=r.prototype.getDataParams.call(this,e,a);if(n.value==null&&a==="node"){var i=this.getGraph().getNodeByIndex(e),o=i.getLayout().value;n.value=o}return n},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(Ct);function IC(r,t){r.eachSeriesByType("sankey",function(e){var a=e.get("nodeWidth"),n=e.get("nodeGap"),i=DC(e,t);e.layoutInfo=i;var o=i.width,l=i.height,s=e.getGraph(),u=s.nodes,d=s.edges;PC(u);var c=bt(u,function(v){return v.getLayout().value===0}),f=c.length!==0?0:e.get("layoutIterations"),p=e.get("orient"),g=e.get("nodeAlign");MC(u,d,a,n,o,l,f,p,g)})}function DC(r,t){return Kt(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function MC(r,t,e,a,n,i,o,l,s){LC(r,t,e,n,i,l,s),NC(r,t,i,n,a,o,l),HC(r,l)}function PC(r){O(r,function(t){var e=er(t.outEdges,_o),a=er(t.inEdges,_o),n=t.getValue()||0,i=Math.max(e,a,n);t.setLayout({value:i},!0)})}function LC(r,t,e,a,n,i,o){for(var l=[],s=[],u=[],d=[],c=0,f=0;f<t.length;f++)l[f]=1;for(var f=0;f<r.length;f++)s[f]=r[f].inEdges.length,s[f]===0&&u.push(r[f]);for(var p=-1;u.length;){for(var g=0;g<u.length;g++){var v=u[g],y=v.hostGraph.data.getRawDataItem(v.dataIndex),_=y.depth!=null&&y.depth>=0;_&&y.depth>p&&(p=y.depth),v.setLayout({depth:_?y.depth:c},!0),i==="vertical"?v.setLayout({dy:e},!0):v.setLayout({dx:e},!0);for(var S=0;S<v.outEdges.length;S++){var w=v.outEdges[S],T=t.indexOf(w);l[T]=0;var C=w.node2,k=r.indexOf(C);--s[k]===0&&d.indexOf(C)<0&&d.push(C)}}++c,u=d,d=[]}for(var f=0;f<l.length;f++)if(l[f]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var A=p>c-1?p:c-1;o&&o!=="left"&&VC(r,o,i,A);var I=i==="vertical"?(n-e)/A:(a-e)/A;EC(r,I,i)}function zm(r){var t=r.hostGraph.data.getRawDataItem(r.dataIndex);return t.depth!=null&&t.depth>=0}function VC(r,t,e,a){if(t==="right"){for(var n=[],i=r,o=0;i.length;){for(var l=0;l<i.length;l++){var s=i[l];s.setLayout({skNodeHeight:o},!0);for(var u=0;u<s.inEdges.length;u++){var d=s.inEdges[u];n.indexOf(d.node1)<0&&n.push(d.node1)}}i=n,n=[],++o}O(r,function(c){zm(c)||c.setLayout({depth:Math.max(0,a-c.getLayout().skNodeHeight)},!0)})}else t==="justify"&&RC(r,a)}function RC(r,t){O(r,function(e){!zm(e)&&!e.outEdges.length&&e.setLayout({depth:t},!0)})}function EC(r,t,e){O(r,function(a){var n=a.getLayout().depth*t;e==="vertical"?a.setLayout({y:n},!0):a.setLayout({x:n},!0)})}function NC(r,t,e,a,n,i,o){var l=OC(r,o);$C(l,t,e,a,n,o),Kl(l,n,e,a,o);for(var s=1;i>0;i--)s*=.99,zC(l,s,o),Kl(l,n,e,a,o),UC(l,s,o),Kl(l,n,e,a,o)}function OC(r,t){var e=[],a=t==="vertical"?"y":"x",n=Vs(r,function(i){return i.getLayout()[a]});return n.keys.sort(function(i,o){return i-o}),O(n.keys,function(i){e.push(n.buckets.get(i))}),e}function $C(r,t,e,a,n,i){var o=1/0;O(r,function(l){var s=l.length,u=0;O(l,function(c){u+=c.getLayout().value});var d=i==="vertical"?(a-(s-1)*n)/u:(e-(s-1)*n)/u;d<o&&(o=d)}),O(r,function(l){O(l,function(s,u){var d=s.getLayout().value*o;i==="vertical"?(s.setLayout({x:u},!0),s.setLayout({dx:d},!0)):(s.setLayout({y:u},!0),s.setLayout({dy:d},!0))})}),O(t,function(l){var s=+l.getValue()*o;l.setLayout({dy:s},!0)})}function Kl(r,t,e,a,n){var i=n==="vertical"?"x":"y";O(r,function(o){o.sort(function(v,y){return v.getLayout()[i]-y.getLayout()[i]});for(var l,s,u,d=0,c=o.length,f=n==="vertical"?"dx":"dy",p=0;p<c;p++)s=o[p],u=d-s.getLayout()[i],u>0&&(l=s.getLayout()[i]+u,n==="vertical"?s.setLayout({x:l},!0):s.setLayout({y:l},!0)),d=s.getLayout()[i]+s.getLayout()[f]+t;var g=n==="vertical"?a:e;if(u=d-t-g,u>0){l=s.getLayout()[i]-u,n==="vertical"?s.setLayout({x:l},!0):s.setLayout({y:l},!0),d=l;for(var p=c-2;p>=0;--p)s=o[p],u=s.getLayout()[i]+s.getLayout()[f]+t-d,u>0&&(l=s.getLayout()[i]-u,n==="vertical"?s.setLayout({x:l},!0):s.setLayout({y:l},!0)),d=s.getLayout()[i]}})}function zC(r,t,e){O(r.slice().reverse(),function(a){O(a,function(n){if(n.outEdges.length){var i=er(n.outEdges,BC,e)/er(n.outEdges,_o);if(isNaN(i)){var o=n.outEdges.length;i=o?er(n.outEdges,qC,e)/o:0}if(e==="vertical"){var l=n.getLayout().x+(i-nr(n,e))*t;n.setLayout({x:l},!0)}else{var s=n.getLayout().y+(i-nr(n,e))*t;n.setLayout({y:s},!0)}}})})}function BC(r,t){return nr(r.node2,t)*r.getValue()}function qC(r,t){return nr(r.node2,t)}function GC(r,t){return nr(r.node1,t)*r.getValue()}function FC(r,t){return nr(r.node1,t)}function nr(r,t){return t==="vertical"?r.getLayout().x+r.getLayout().dx/2:r.getLayout().y+r.getLayout().dy/2}function _o(r){return r.getValue()}function er(r,t,e){for(var a=0,n=r.length,i=-1;++i<n;){var o=+t(r[i],e);isNaN(o)||(a+=o)}return a}function UC(r,t,e){O(r,function(a){O(a,function(n){if(n.inEdges.length){var i=er(n.inEdges,GC,e)/er(n.inEdges,_o);if(isNaN(i)){var o=n.inEdges.length;i=o?er(n.inEdges,FC,e)/o:0}if(e==="vertical"){var l=n.getLayout().x+(i-nr(n,e))*t;n.setLayout({x:l},!0)}else{var s=n.getLayout().y+(i-nr(n,e))*t;n.setLayout({y:s},!0)}}})})}function HC(r,t){var e=t==="vertical"?"x":"y";O(r,function(a){a.outEdges.sort(function(n,i){return n.node2.getLayout()[e]-i.node2.getLayout()[e]}),a.inEdges.sort(function(n,i){return n.node1.getLayout()[e]-i.node1.getLayout()[e]})}),O(r,function(a){var n=0,i=0;O(a.outEdges,function(o){o.setLayout({sy:n},!0),n+=o.getLayout().dy}),O(a.inEdges,function(o){o.setLayout({ty:i},!0),i+=o.getLayout().dy})})}function WC(r){r.eachSeriesByType("sankey",function(t){var e=t.getGraph(),a=e.nodes,n=e.edges;if(a.length){var i=1/0,o=-1/0;O(a,function(l){var s=l.getLayout().value;s<i&&(i=s),s>o&&(o=s)}),O(a,function(l){var s=new _t({type:"color",mappingMethod:"linear",dataExtent:[i,o],visual:t.get("color")}),u=s.mapValueToVisual(l.getLayout().value),d=l.getModel().get(["itemStyle","color"]);d!=null?(l.setVisual("color",d),l.setVisual("style",{fill:d})):(l.setVisual("color",u),l.setVisual("style",{fill:u}))})}n.length&&O(n,function(l){var s=l.getModel().get("lineStyle");l.setVisual("style",s)})})}function YC(r){r.registerChartView(CC),r.registerSeriesModel(AC),r.registerLayout(IC),r.registerVisual(WC),r.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(a){a.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var Bm=function(){function r(){}return r.prototype.getInitialData=function(t,e){var a,n=e.getComponent("xAxis",this.get("xAxisIndex")),i=e.getComponent("yAxis",this.get("yAxisIndex")),o=n.get("type"),l=i.get("type"),s;o==="category"?(t.layout="horizontal",a=n.getOrdinalMeta(),s=!0):l==="category"?(t.layout="vertical",a=i.getOrdinalMeta(),s=!0):t.layout=t.layout||"horizontal";var u=["x","y"],d=t.layout==="horizontal"?0:1,c=this._baseAxisDim=u[d],f=u[1-d],p=[n,i],g=p[d].get("type"),v=p[1-d].get("type"),y=t.data;if(y&&s){var _=[];O(y,function(T,C){var k;ge(T)?(k=T.slice(),T.unshift(C)):ge(T.value)?(k=be({},T),k.value=k.value.slice(),T.value.unshift(C)):k=T,_.push(k)}),t.data=_}var S=this.defaultValueDimensions,w=[{name:c,type:Rs(g),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:Rs(v),dimsDef:S.slice()}];return bi(this,{coordDimensions:w,dimensionsCount:S.length+1,encodeDefaulter:Ve(V1,w,this)})},r.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},r}(),qm=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(Ct);Ca(qm,Bm,!0);var jC=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=e.getData(),o=this.group,l=this._data;this._data||o.removeAll();var s=e.get("layout")==="horizontal"?1:0;i.diff(l).add(function(u){if(i.hasValue(u)){var d=i.getItemLayout(u),c=ep(d,i,u,s,!0);i.setItemGraphicEl(u,c),o.add(c)}}).update(function(u,d){var c=l.getItemGraphicEl(d);if(!i.hasValue(u)){o.remove(c);return}var f=i.getItemLayout(u);c?(qa(c),Gm(f,c,i,u)):c=ep(f,i,u,s),o.add(c),i.setItemGraphicEl(u,c)}).remove(function(u){var d=l.getItemGraphicEl(u);d&&o.remove(d)}).execute(),this._data=i},t.prototype.remove=function(e){var a=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(i){i&&a.remove(i)})},t.type="boxplot",t}(ut),ZC=function(){function r(){}return r}(),XC=function(r){W(t,r);function t(e){var a=r.call(this,e)||this;return a.type="boxplotBoxPath",a}return t.prototype.getDefaultShape=function(){return new ZC},t.prototype.buildPath=function(e,a){var n=a.points,i=0;for(e.moveTo(n[i][0],n[i][1]),i++;i<4;i++)e.lineTo(n[i][0],n[i][1]);for(e.closePath();i<n.length;i++)e.moveTo(n[i][0],n[i][1]),i++,e.lineTo(n[i][0],n[i][1])},t}(Tt);function ep(r,t,e,a,n){var i=r.ends,o=new XC({shape:{points:n?KC(i,a,r):i}});return Gm(r,o,t,e,n),o}function Gm(r,t,e,a,n){var i=e.hostModel,o=Tn[n?"initProps":"updateProps"];o(t,{shape:{points:r.ends}},i,a),t.useStyle(e.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.z2=100;var l=e.getItemModel(a),s=l.getModel("emphasis");Xt(t,l),dt(t,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function KC(r,t,e){return ne(r,function(a){return a=a.slice(),a[t]=e.initBaseline,a})}var jn=O;function QC(r){var t=JC(r);jn(t,function(e){var a=e.seriesModels;a.length&&(ek(e),jn(a,function(n,i){tk(n,e.boxOffsetList[i],e.boxWidthList[i])}))})}function JC(r){var t=[],e=[];return r.eachSeriesByType("boxplot",function(a){var n=a.getBaseAxis(),i=nt(e,n);i<0&&(i=e.length,e[i]=n,t[i]={axis:n,seriesModels:[]}),t[i].seriesModels.push(a)}),t}function ek(r){var t=r.axis,e=r.seriesModels,a=e.length,n=r.boxWidthList=[],i=r.boxOffsetList=[],o=[],l;if(t.type==="category")l=t.getBandWidth();else{var s=0;jn(e,function(g){s=Math.max(s,g.getData().count())});var u=t.getExtent();l=Math.abs(u[1]-u[0])/s}jn(e,function(g){var v=g.get("boxWidth");ge(v)||(v=[v,v]),o.push([de(v[0],l)||0,de(v[1],l)||0])});var d=l*.8-2,c=d/a*.3,f=(d-c*(a-1))/a,p=f/2-d/2;jn(e,function(g,v){i.push(p),p+=c+f,n.push(Math.min(Math.max(f,o[v][0]),o[v][1]))})}function tk(r,t,e){var a=r.coordinateSystem,n=r.getData(),i=e/2,o=r.get("layout")==="horizontal"?0:1,l=1-o,s=["x","y"],u=n.mapDimension(s[o]),d=n.mapDimensionsAll(s[l]);if(u==null||d.length<5)return;for(var c=0;c<n.count();c++){var f=n.get(u,c),p=w(f,d[2],c),g=w(f,d[0],c),v=w(f,d[1],c),y=w(f,d[3],c),_=w(f,d[4],c),S=[];T(S,v,!1),T(S,y,!0),S.push(g,v,_,y),C(S,g),C(S,_),C(S,p),n.setItemLayout(c,{initBaseline:p[l],ends:S})}function w(k,A,I){var M=n.get(A,I),D=[];D[o]=k,D[l]=M;var L;return isNaN(k)||isNaN(M)?L=[NaN,NaN]:(L=a.dataToPoint(D),L[o]+=t),L}function T(k,A,I){var M=A.slice(),D=A.slice();M[o]+=i,D[o]-=i,I?k.push(M,D):k.push(D,M)}function C(k,A){var I=A.slice(),M=A.slice();I[o]-=i,M[o]+=i,k.push(I,M)}}function ak(r,t){t=t||{};for(var e=[],a=[],n=t.boundIQR,i=n==="none"||n===0,o=0;o<r.length;o++){var l=ha(r[o].slice()),s=gl(l,.25),u=gl(l,.5),d=gl(l,.75),c=l[0],f=l[l.length-1],p=(n??1.5)*(d-s),g=i?c:Math.max(c,s-p),v=i?f:Math.min(f,d+p),y=t.itemNameFormatter,_=Be(y)?y({value:o}):Re(y)?y.replace("{value}",o+""):o+"";e.push([_,g,s,u,d,v]);for(var S=0;S<l.length;S++){var w=l[S];if(w<g||w>v){var T=[_,w];a.push(T)}}}return{boxData:e,outliers:a}}var rk={type:"echarts:boxplot",transform:function(t){var e=t.upstream;if(e.sourceFormat!==Xg){var a="";pt(a)}var n=ak(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function nk(r){r.registerSeriesModel(qm),r.registerChartView(jC),r.registerLayout(QC),r.registerTransform(rk)}var ik=["color","borderColor"],ok=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,a,n){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,a,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,a):this._incrementalRenderNormal(e,a)},t.prototype.eachRendered=function(e){mi(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var a=e.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},t.prototype._renderNormal=function(e){var a=e.getData(),n=this._data,i=this.group,o=a.getLayout("isSimpleBox"),l=e.get("clip",!0),s=e.coordinateSystem,u=s.getArea&&s.getArea();this._data||i.removeAll(),a.diff(n).add(function(d){if(a.hasValue(d)){var c=a.getItemLayout(d);if(l&&tp(u,c))return;var f=Ql(c,d,!0);qt(f,{shape:{points:c.ends}},e,d),Jl(f,a,d,o),i.add(f),a.setItemGraphicEl(d,f)}}).update(function(d,c){var f=n.getItemGraphicEl(c);if(!a.hasValue(d)){i.remove(f);return}var p=a.getItemLayout(d);if(l&&tp(u,p)){i.remove(f);return}f?(Ke(f,{shape:{points:p.ends}},e,d),qa(f)):f=Ql(p),Jl(f,a,d,o),i.add(f),a.setItemGraphicEl(d,f)}).remove(function(d){var c=n.getItemGraphicEl(d);c&&i.remove(c)}).execute(),this._data=a},t.prototype._renderLarge=function(e){this._clear(),ap(e,this.group);var a=e.get("clip",!0)?Xo(e.coordinateSystem,!1,e):null;a?this.group.setClipPath(a):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,a){for(var n=a.getData(),i=n.getLayout("isSimpleBox"),o;(o=e.next())!=null;){var l=n.getItemLayout(o),s=Ql(l);Jl(s,n,o,i),s.incremental=!0,this.group.add(s),this._progressiveEls.push(s)}},t.prototype._incrementalRenderLarge=function(e,a){ap(a,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(ut),lk=function(){function r(){}return r}(),sk=function(r){W(t,r);function t(e){var a=r.call(this,e)||this;return a.type="normalCandlestickBox",a}return t.prototype.getDefaultShape=function(){return new lk},t.prototype.buildPath=function(e,a){var n=a.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},t}(Tt);function Ql(r,t,e){var a=r.ends;return new sk({shape:{points:e?uk(a,r):a},z2:100})}function tp(r,t){for(var e=!0,a=0;a<t.ends.length;a++)if(r.contain(t.ends[a][0],t.ends[a][1])){e=!1;break}return e}function Jl(r,t,e,a){var n=t.getItemModel(e);r.useStyle(t.getItemVisual(e,"style")),r.style.strokeNoScale=!0,r.__simpleBox=a,Xt(r,n)}function uk(r,t){return ne(r,function(e){return e=e.slice(),e[1]=t.initBaseline,e})}var dk=function(){function r(){}return r}(),es=function(r){W(t,r);function t(e){var a=r.call(this,e)||this;return a.type="largeCandlestickBox",a}return t.prototype.getDefaultShape=function(){return new dk},t.prototype.buildPath=function(e,a){for(var n=a.points,i=0;i<n.length;)if(this.__sign===n[i++]){var o=n[i++];e.moveTo(o,n[i++]),e.lineTo(o,n[i++])}else i+=3},t}(Tt);function ap(r,t,e,a){var n=r.getData(),i=n.getLayout("largePoints"),o=new es({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});t.add(o);var l=new es({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});t.add(l);var s=new es({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});t.add(s),ts(1,o,r),ts(-1,l,r),ts(0,s,r),a&&(o.incremental=!0,l.incremental=!0),e&&e.push(o,l)}function ts(r,t,e,a){var n=e.get(["itemStyle",r>0?"borderColor":"borderColor0"])||e.get(["itemStyle",r>0?"color":"color0"]);r===0&&(n=e.get(["itemStyle","borderColorDoji"]));var i=e.getModel("itemStyle").getItemStyle(ik);t.useStyle(i),t.style.fill=null,t.style.stroke=n}var Fm=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,a,n){var i=a.getItemLayout(e);return i&&n.rect(i.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(Ct);Ca(Fm,Bm,!0);function ck(r){!r||!ge(r.series)||O(r.series,function(t){Nt(t)&&t.type==="k"&&(t.type="candlestick")})}var fk=["itemStyle","borderColor"],pk=["itemStyle","borderColor0"],vk=["itemStyle","borderColorDoji"],gk=["itemStyle","color"],hk=["itemStyle","color0"],mk={seriesType:"candlestick",plan:$o(),performRawSeries:!0,reset:function(r,t){function e(i,o){return o.get(i>0?gk:hk)}function a(i,o){return o.get(i===0?vk:i>0?fk:pk)}if(!t.isSeriesFiltered(r)){var n=r.pipelineContext.large;return!n&&{progress:function(i,o){for(var l;(l=i.next())!=null;){var s=o.getItemModel(l),u=o.getItemLayout(l).sign,d=s.getItemStyle();d.fill=e(u,s),d.stroke=a(u,s)||d.fill;var c=o.ensureUniqueItemVisual(l,"style");be(c,d)}}}}}},yk={seriesType:"candlestick",plan:$o(),reset:function(r){var t=r.coordinateSystem,e=r.getData(),a=bk(r,e),n=0,i=1,o=["x","y"],l=e.getDimensionIndex(e.mapDimension(o[n])),s=ne(e.mapDimensionsAll(o[i]),e.getDimensionIndex,e),u=s[0],d=s[1],c=s[2],f=s[3];if(e.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),l<0||s.length<4)return;return{progress:r.pipelineContext.large?g:p};function p(v,y){for(var _,S=y.getStore();(_=v.next())!=null;){var w=S.get(l,_),T=S.get(u,_),C=S.get(d,_),k=S.get(c,_),A=S.get(f,_),I=Math.min(T,C),M=Math.max(T,C),D=q(I,w),L=q(M,w),E=q(k,w),R=q(A,w),V=[];Z(V,L,0),Z(V,D,1),V.push(F(R),F(L),F(E),F(D));var z=y.getItemModel(_),G=!!z.get(["itemStyle","borderColorDoji"]);y.setItemLayout(_,{sign:rp(S,_,T,C,d,G),initBaseline:T>C?L[i]:D[i],ends:V,brushRect:H(k,A,w)})}function q(re,_e){var te=[];return te[n]=_e,te[i]=re,isNaN(_e)||isNaN(re)?[NaN,NaN]:t.dataToPoint(te)}function Z(re,_e,te){var he=_e.slice(),Ie=_e.slice();he[n]=hl(he[n]+a/2,1,!1),Ie[n]=hl(Ie[n]-a/2,1,!0),te?re.push(he,Ie):re.push(Ie,he)}function H(re,_e,te){var he=q(re,te),Ie=q(_e,te);return he[n]-=a/2,Ie[n]-=a/2,{x:he[0],y:he[1],width:a,height:Ie[1]-he[1]}}function F(re){return re[n]=hl(re[n],1),re}}function g(v,y){for(var _=xr(v.count*4),S=0,w,T=[],C=[],k,A=y.getStore(),I=!!r.get(["itemStyle","borderColorDoji"]);(k=v.next())!=null;){var M=A.get(l,k),D=A.get(u,k),L=A.get(d,k),E=A.get(c,k),R=A.get(f,k);if(isNaN(M)||isNaN(E)||isNaN(R)){_[S++]=NaN,S+=3;continue}_[S++]=rp(A,k,D,L,d,I),T[n]=M,T[i]=E,w=t.dataToPoint(T,null,C),_[S++]=w?w[0]:NaN,_[S++]=w?w[1]:NaN,T[i]=R,w=t.dataToPoint(T,null,C),_[S++]=w?w[1]:NaN}y.setLayout("largePoints",_)}}};function rp(r,t,e,a,n,i){var o;return e>a?o=-1:e<a?o=1:o=i?0:t>0?r.get(n,t-1)<=a?1:-1:1,o}function bk(r,t){var e=r.getBaseAxis(),a,n=e.type==="category"?e.getBandWidth():(a=e.getExtent(),Math.abs(a[1]-a[0])/t.count()),i=de(At(r.get("barMaxWidth"),n),n),o=de(At(r.get("barMinWidth"),1),n),l=r.get("barWidth");return l!=null?de(l,n):Math.max(Math.min(n/2,i),o)}function _k(r){r.registerChartView(ok),r.registerSeriesModel(Fm),r.registerPreprocessor(ck),r.registerVisual(mk),r.registerLayout(yk)}function np(r,t){var e=t.rippleEffectColor||t.color;r.eachChild(function(a){a.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?e:null,fill:t.brushType==="fill"?e:null}})})}var Sk=function(r){W(t,r);function t(e,a){var n=r.call(this)||this,i=new ki(e,a),o=new xe;return n.add(i),n.add(o),n.updateData(e,a),n}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var a=e.symbolType,n=e.color,i=e.rippleNumber,o=this.childAt(1),l=0;l<i;l++){var s=St(a,-1,-1,2,2,n);s.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-l/i*e.period+e.effectOffset;s.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(u).start(),s.animateStyle(!0).when(e.period,{opacity:0}).delay(u).start(),o.add(s)}np(o,e)},t.prototype.updateEffectAnimation=function(e){for(var a=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],o=0;o<i.length;o++){var l=i[o];if(a[l]!==e[l]){this.stopEffectAnimation(),this.startEffectAnimation(e);return}}np(n,e)},t.prototype.highlight=function(){un(this)},t.prototype.downplay=function(){dn(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,a){var n=this,i=e.hostModel;this.childAt(0).updateData(e,a);var o=this.childAt(1),l=e.getItemModel(a),s=e.getItemVisual(a,"symbol"),u=xn(e.getItemVisual(a,"symbolSize")),d=e.getItemVisual(a,"style"),c=d&&d.fill,f=l.getModel("emphasis");o.setScale(u),o.traverse(function(y){y.setStyle("fill",c)});var p=wn(e.getItemVisual(a,"symbolOffset"),u);p&&(o.x=p[0],o.y=p[1]);var g=e.getItemVisual(a,"symbolRotate");o.rotation=(g||0)*Math.PI/180||0;var v={};v.showEffectOn=i.get("showEffectOn"),v.rippleScale=l.get(["rippleEffect","scale"]),v.brushType=l.get(["rippleEffect","brushType"]),v.period=l.get(["rippleEffect","period"])*1e3,v.effectOffset=a/e.count(),v.z=i.getShallow("z")||0,v.zlevel=i.getShallow("zlevel")||0,v.symbolType=s,v.color=c,v.rippleEffectColor=l.get(["rippleEffect","color"]),v.rippleNumber=l.get(["rippleEffect","number"]),v.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(v):this.startEffectAnimation(v),this._effectCfg=v):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(y){y==="emphasis"?v.showEffectOn!=="render"&&n.startEffectAnimation(v):y==="normal"&&v.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=v,dt(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t}(xe),wk=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this._symbolDraw=new Ai(Sk)},t.prototype.render=function(e,a,n){var i=e.getData(),o=this._symbolDraw;o.updateData(i,{clipShape:this._getClipShape(e)}),this.group.add(o.group)},t.prototype._getClipShape=function(e){var a=e.coordinateSystem,n=a&&a.getArea&&a.getArea();return e.get("clip",!0)?n:null},t.prototype.updateTransform=function(e,a,n){var i=e.getData();this.group.dirty();var o=Ii("").reset(e,a,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var a=e.coordinateSystem;a&&a.getRoamTransform&&(this.group.transform=R1(a.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,a){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(ut),xk=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,a){return zr(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,a,n){return n.point(a.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(Ct);function Tk(r){r.registerChartView(wk),r.registerSeriesModel(xk),r.registerLayout(Ii("effectScatter"))}var Um=function(r){W(t,r);function t(e,a,n){var i=r.call(this)||this;return i.add(i.createLine(e,a,n)),i._updateEffectSymbol(e,a),i}return t.prototype.createLine=function(e,a,n){return new ad(e,a,n)},t.prototype._updateEffectSymbol=function(e,a){var n=e.getItemModel(a),i=n.getModel("effect"),o=i.get("symbolSize"),l=i.get("symbol");ge(o)||(o=[o,o]);var s=e.getItemVisual(a,"style"),u=i.get("color")||s&&s.stroke,d=this.childAt(1);this._symbolType!==l&&(this.remove(d),d=St(l,-.5,-.5,1,1,u),d.z2=100,d.culling=!0,this.add(d)),d&&(d.setStyle("shadowColor",u),d.setStyle(i.getItemStyle(["color"])),d.scaleX=o[0],d.scaleY=o[1],d.setColor(u),this._symbolType=l,this._symbolScale=o,this._updateEffectAnimation(e,i,a))},t.prototype._updateEffectAnimation=function(e,a,n){var i=this.childAt(1);if(i){var o=e.getItemLayout(n),l=a.get("period")*1e3,s=a.get("loop"),u=a.get("roundTrip"),d=a.get("constantSpeed"),c=ua(a.get("delay"),function(p){return p/e.count()*l/3});if(i.ignore=!0,this._updateAnimationPoints(i,o),d>0&&(l=this._getLineLength(i)/d*1e3),l!==this._period||s!==this._loop||u!==this._roundTrip){i.stopAnimation();var f=void 0;Be(c)?f=c(n):f=c,i.__t>0&&(f=-l*i.__t),this._animateSymbol(i,l,f,s,u)}this._period=l,this._loop=s,this._roundTrip=u}},t.prototype._animateSymbol=function(e,a,n,i,o){if(a>0){e.__t=0;var l=this,s=e.animate("",i).when(o?a*2:a,{__t:o?2:1}).delay(n).during(function(){l._updateSymbolPosition(e)});i||s.done(function(){l.remove(e)}),s.start()}},t.prototype._getLineLength=function(e){return Bn(e.__p1,e.__cp1)+Bn(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,a){e.__p1=a[0],e.__p2=a[1],e.__cp1=a[2]||[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]},t.prototype.updateData=function(e,a,n){this.childAt(0).updateData(e,a,n),this._updateEffectSymbol(e,a)},t.prototype._updateSymbolPosition=function(e){var a=e.__p1,n=e.__p2,i=e.__cp1,o=e.__t<1?e.__t:2-e.__t,l=[e.x,e.y],s=l.slice(),u=Yg,d=E1;l[0]=u(a[0],i[0],n[0],o),l[1]=u(a[1],i[1],n[1],o);var c=e.__t<1?d(a[0],i[0],n[0],o):d(n[0],i[0],a[0],1-o),f=e.__t<1?d(a[1],i[1],n[1],o):d(n[1],i[1],a[1],1-o);e.rotation=-Math.atan2(f,c)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(e.__lastT!==void 0&&e.__lastT<e.__t?(e.scaleY=Bn(s,l)*1.05,o===1&&(l[0]=s[0]+(l[0]-s[0])/2,l[1]=s[1]+(l[1]-s[1])/2)):e.__lastT===1?e.scaleY=2*Bn(a,l):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=l[0],e.y=l[1]},t.prototype.updateLayout=function(e,a){this.childAt(0).updateLayout(e,a);var n=e.getItemModel(a).getModel("effect");this._updateEffectAnimation(e,n,a)},t}(xe),Hm=function(r){W(t,r);function t(e,a,n){var i=r.call(this)||this;return i._createPolyline(e,a,n),i}return t.prototype._createPolyline=function(e,a,n){var i=e.getItemLayout(a),o=new Va({shape:{points:i}});this.add(o),this._updateCommonStl(e,a,n)},t.prototype.updateData=function(e,a,n){var i=e.hostModel,o=this.childAt(0),l={shape:{points:e.getItemLayout(a)}};Ke(o,l,i,a),this._updateCommonStl(e,a,n)},t.prototype._updateCommonStl=function(e,a,n){var i=this.childAt(0),o=e.getItemModel(a),l=n&&n.emphasisLineStyle,s=n&&n.focus,u=n&&n.blurScope,d=n&&n.emphasisDisabled;if(!n||e.hasItemOption){var c=o.getModel("emphasis");l=c.getModel("lineStyle").getLineStyle(),d=c.get("disabled"),s=c.get("focus"),u=c.get("blurScope")}i.useStyle(e.getItemVisual(a,"style")),i.style.fill=null,i.style.strokeNoScale=!0;var f=i.ensureState("emphasis");f.style=l,dt(this,s,u,d)},t.prototype.updateLayout=function(e,a){var n=this.childAt(0);n.setShape("points",e.getItemLayout(a))},t}(xe),Ck=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return t.prototype.createLine=function(e,a,n){return new Hm(e,a,n)},t.prototype._updateAnimationPoints=function(e,a){this._points=a;for(var n=[0],i=0,o=1;o<a.length;o++){var l=a[o-1],s=a[o];i+=Bn(l,s),n.push(i)}if(i===0){this._length=0;return}for(var o=0;o<n.length;o++)n[o]/=i;this._offsets=n,this._length=i},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var a=e.__t<1?e.__t:2-e.__t,n=this._points,i=this._offsets,o=n.length;if(i){var l=this._lastFrame,s;if(a<this._lastFramePercent){var u=Math.min(l+1,o-1);for(s=u;s>=0&&!(i[s]<=a);s--);s=Math.min(s,o-2)}else{for(s=l;s<o&&!(i[s]>a);s++);s=Math.min(s-1,o-2)}var d=(a-i[s])/(i[s+1]-i[s]),c=n[s],f=n[s+1];e.x=c[0]*(1-d)+d*f[0],e.y=c[1]*(1-d)+d*f[1];var p=e.__t<1?f[0]-c[0]:c[0]-f[0],g=e.__t<1?f[1]-c[1]:c[1]-f[1];e.rotation=-Math.atan2(g,p)-Math.PI/2,this._lastFrame=s,this._lastFramePercent=a,e.ignore=!1}},t}(Um),kk=function(){function r(){this.polyline=!1,this.curveness=0,this.segs=[]}return r}(),Ak=function(r){W(t,r);function t(e){var a=r.call(this,e)||this;return a._off=0,a.hoverDataIdx=-1,a}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new kk},t.prototype.buildPath=function(e,a){var n=a.segs,i=a.curveness,o;if(a.polyline)for(o=this._off;o<n.length;){var l=n[o++];if(l>0){e.moveTo(n[o++],n[o++]);for(var s=1;s<l;s++)e.lineTo(n[o++],n[o++])}}else for(o=this._off;o<n.length;){var u=n[o++],d=n[o++],c=n[o++],f=n[o++];if(e.moveTo(u,d),i>0){var p=(u+c)/2-(d-f)*i,g=(d+f)/2-(c-u)*i;e.quadraticCurveTo(p,g,c,f)}else e.lineTo(c,f)}this.incremental&&(this._off=o,this.notClear=!0)},t.prototype.findDataIndex=function(e,a){var n=this.shape,i=n.segs,o=n.curveness,l=this.style.lineWidth;if(n.polyline)for(var s=0,u=0;u<i.length;){var d=i[u++];if(d>0)for(var c=i[u++],f=i[u++],p=1;p<d;p++){var g=i[u++],v=i[u++];if(ec(c,f,g,v,l,e,a))return s}s++}else for(var s=0,u=0;u<i.length;){var c=i[u++],f=i[u++],g=i[u++],v=i[u++];if(o>0){var y=(c+g)/2-(f-v)*o,_=(f+v)/2-(g-c)*o;if(N1(c,f,y,_,g,v,l,e,a))return s}else if(ec(c,f,g,v,l,e,a))return s;s++}return-1},t.prototype.contain=function(e,a){var n=this.transformCoordToLocal(e,a),i=this.getBoundingRect();if(e=n[0],a=n[1],i.contain(e,a)){var o=this.hoverDataIdx=this.findDataIndex(e,a);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var a=this.shape,n=a.segs,i=1/0,o=1/0,l=-1/0,s=-1/0,u=0;u<n.length;){var d=n[u++],c=n[u++];i=Math.min(d,i),l=Math.max(d,l),o=Math.min(c,o),s=Math.max(c,s)}e=this._rect=new st(i,o,l,s)}return e},t}(Tt),Ik=function(){function r(){this.group=new xe}return r.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},r.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},r.prototype.incrementalUpdate=function(t,e){var a=this._newAdded[0],n=e.getLayout("linesPoints"),i=a&&a.shape.segs;if(i&&i.length<2e4){var o=i.length,l=new Float32Array(o+n.length);l.set(i),l.set(n,o),a.setShape({segs:l})}else{this._newAdded=[];var s=this._create();s.incremental=!0,s.setShape({segs:n}),this._setCommon(s,e),s.__startIndex=t.start}},r.prototype.remove=function(){this._clear()},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new Ak({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},r.prototype._setCommon=function(t,e,a){var n=e.hostModel;t.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),t.useStyle(n.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var i=e.getVisual("style");i&&i.stroke&&t.setStyle("stroke",i.stroke),t.setStyle("fill",null);var o=qe(t);o.seriesIndex=n.seriesIndex,t.on("mousemove",function(l){o.dataIndex=null;var s=t.hoverDataIdx;s>0&&(o.dataIndex=s+t.__startIndex)})},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),Wm={seriesType:"lines",plan:$o(),reset:function(r){var t=r.coordinateSystem;if(t){var e=r.get("polyline"),a=r.pipelineContext.large;return{progress:function(n,i){var o=[];if(a){var l=void 0,s=n.end-n.start;if(e){for(var u=0,d=n.start;d<n.end;d++)u+=r.getLineCoordsCount(d);l=new Float32Array(s+u*2)}else l=new Float32Array(s*4);for(var c=0,f=[],d=n.start;d<n.end;d++){var p=r.getLineCoords(d,o);e&&(l[c++]=p);for(var g=0;g<p;g++)f=t.dataToPoint(o[g],!1,f),l[c++]=f[0],l[c++]=f[1]}i.setLayout("linesPoints",l)}else for(var d=n.start;d<n.end;d++){var v=i.getItemModel(d),p=r.getLineCoords(d,o),y=[];if(e)for(var _=0;_<p;_++)y.push(t.dataToPoint(o[_]));else{y[0]=t.dataToPoint(o[0]),y[1]=t.dataToPoint(o[1]);var S=v.get(["lineStyle","curveness"]);+S&&(y[2]=[(y[0][0]+y[1][0])/2-(y[0][1]-y[1][1])*S,(y[0][1]+y[1][1])/2-(y[1][0]-y[0][0])*S])}i.setItemLayout(d,y)}}}}}},Dk=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=e.getData(),o=this._updateLineDraw(i,e),l=e.get("zlevel"),s=e.get(["effect","trailLength"]),u=n.getZr(),d=u.painter.getType()==="svg";d||u.painter.getLayer(l).clear(!0),this._lastZlevel!=null&&!d&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&s>0&&(d||u.configLayer(l,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(s/10+.9,1),0)})),o.updateData(i);var c=e.get("clip",!0)&&Xo(e.coordinateSystem,!1,e);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=l,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,a,n){var i=e.getData(),o=this._updateLineDraw(i,e);o.incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(e,a,n){this._lineDraw.incrementalUpdate(e,a.getData()),this._finished=e.end===a.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,a,n){var i=e.getData(),o=e.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var l=Wm.reset(e,a,n);l.progress&&l.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(e,a){var n=this._lineDraw,i=this._showEffect(a),o=!!a.get("polyline"),l=a.pipelineContext,s=l.large;return(!n||i!==this._hasEffet||o!==this._isPolyline||s!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=s?new Ik:new rd(o?i?Ck:Hm:i?Um:ad),this._hasEffet=i,this._isPolyline=o,this._isLargeDraw=s),this.group.add(n.group),n},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var a=e.getZr(),n=a.painter.getType()==="svg";!n&&this._lastZlevel!=null&&a.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,a){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(a)},t.prototype.dispose=function(e,a){this.remove(e,a)},t.type="lines",t}(ut),Mk=typeof Uint32Array>"u"?Array:Uint32Array,Pk=typeof Float64Array>"u"?Array:Float64Array;function ip(r){var t=r.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(r.data=ne(t,function(e){var a=[e[0].coord,e[1].coord],n={coords:a};return e[0].name&&(n.fromName=e[0].name),e[1].name&&(n.toName=e[1].name),wu([n,e[0],e[1]])}))}var Lk=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return t.prototype.init=function(e){e.data=e.data||[],ip(e);var a=this._processFlatCoordsArray(e.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(e.data=new Float32Array(a.count)),r.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(e){if(ip(e),e.data){var a=this._processFlatCoordsArray(e.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(e.data=new Float32Array(a.count))}r.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var a=this._processFlatCoordsArray(e.data);a.flatCoords&&(this._flatCoords?(this._flatCoords=Ms(this._flatCoords,a.flatCoords),this._flatCoordsOffset=Ms(this._flatCoordsOffset,a.flatCoordsOffset)):(this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset),e.data=new Float32Array(a.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var a=this.getData().getItemModel(e),n=a.option instanceof Array?a.option:a.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[e*2+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,a){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[e*2],i=this._flatCoordsOffset[e*2+1],o=0;o<i;o++)a[o]=a[o]||[],a[o][0]=this._flatCoords[n+o*2],a[o][1]=this._flatCoords[n+o*2+1];return i}else{for(var l=this._getCoordsFromItemModel(e),o=0;o<l.length;o++)a[o]=a[o]||[],a[o][0]=l[o][0],a[o][1]=l[o][1];return l.length}},t.prototype._processFlatCoordsArray=function(e){var a=0;if(this._flatCoords&&(a=this._flatCoords.length),aa(e[0])){for(var n=e.length,i=new Mk(n),o=new Pk(n),l=0,s=0,u=0,d=0;d<n;){u++;var c=e[d++];i[s++]=l+a,i[s++]=c;for(var f=0;f<c;f++){var p=e[d++],g=e[d++];o[l++]=p,o[l++]=g}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,s),flatCoords:o,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,a){var n=new da(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(i,o,l,s){if(i instanceof Array)return NaN;n.hasItemOption=!0;var u=i.value;if(u!=null)return u instanceof Array?u[s]:u}),n},t.prototype.formatTooltip=function(e,a,n){var i=this.getData(),o=i.getItemModel(e),l=o.get("name");if(l)return l;var s=o.get("fromName"),u=o.get("toName"),d=[];return s!=null&&d.push(s),u!=null&&d.push(u),ra("nameValue",{name:d.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),a=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&a>0?a+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(Ct);function Fi(r){return r instanceof Array||(r=[r,r]),r}var Vk={seriesType:"lines",reset:function(r){var t=Fi(r.get("symbol")),e=Fi(r.get("symbolSize")),a=r.getData();a.setVisual("fromSymbol",t&&t[0]),a.setVisual("toSymbol",t&&t[1]),a.setVisual("fromSymbolSize",e&&e[0]),a.setVisual("toSymbolSize",e&&e[1]);function n(i,o){var l=i.getItemModel(o),s=Fi(l.getShallow("symbol",!0)),u=Fi(l.getShallow("symbolSize",!0));s[0]&&i.setItemVisual(o,"fromSymbol",s[0]),s[1]&&i.setItemVisual(o,"toSymbol",s[1]),u[0]&&i.setItemVisual(o,"fromSymbolSize",u[0]),u[1]&&i.setItemVisual(o,"toSymbolSize",u[1])}return{dataEach:a.hasItemOption?n:null}}};function Rk(r){r.registerChartView(Dk),r.registerSeriesModel(Lk),r.registerLayout(Wm),r.registerVisual(Vk)}var Ek=256,Nk=function(){function r(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=tc.createCanvas();this.canvas=t}return r.prototype.update=function(t,e,a,n,i,o){var l=this._getBrush(),s=this._getGradient(i,"inRange"),u=this._getGradient(i,"outOfRange"),d=this.pointSize+this.blurSize,c=this.canvas,f=c.getContext("2d"),p=t.length;c.width=e,c.height=a;for(var g=0;g<p;++g){var v=t[g],y=v[0],_=v[1],S=v[2],w=n(S);f.globalAlpha=w,f.drawImage(l,y-d,_-d)}if(!c.width||!c.height)return c;for(var T=f.getImageData(0,0,c.width,c.height),C=T.data,k=0,A=C.length,I=this.minOpacity,M=this.maxOpacity,D=M-I;k<A;){var w=C[k+3]/256,L=Math.floor(w*(Ek-1))*4;if(w>0){var E=o(w)?s:u;w>0&&(w=w*D+I),C[k++]=E[L],C[k++]=E[L+1],C[k++]=E[L+2],C[k++]=E[L+3]*w*256}else k+=4}return f.putImageData(T,0,0),c},r.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=tc.createCanvas()),e=this.pointSize+this.blurSize,a=e*2;t.width=a,t.height=a;var n=t.getContext("2d");return n.clearRect(0,0,a,a),n.shadowOffsetX=a,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-e,e,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),t},r.prototype._getGradient=function(t,e){for(var a=this._gradientPixels,n=a[e]||(a[e]=new Uint8ClampedArray(256*4)),i=[0,0,0,0],o=0,l=0;l<256;l++)t[e](l/255,!0,i),n[o++]=i[0],n[o++]=i[1],n[o++]=i[2],n[o++]=i[3];return n},r}();function Ok(r,t,e){var a=r[1]-r[0];t=ne(t,function(o){return{interval:[(o.interval[0]-r[0])/a,(o.interval[1]-r[0])/a]}});var n=t.length,i=0;return function(o){var l;for(l=i;l<n;l++){var s=t[l].interval;if(s[0]<=o&&o<=s[1]){i=l;break}}if(l===n)for(l=i-1;l>=0;l--){var s=t[l].interval;if(s[0]<=o&&o<=s[1]){i=l;break}}return l>=0&&l<n&&e[l]}}function $k(r,t){var e=r[1]-r[0];return t=[(t[0]-r[0])/e,(t[1]-r[0])/e],function(a){return a>=t[0]&&a<=t[1]}}function op(r){var t=r.dimensions;return t[0]==="lng"&&t[1]==="lat"}var zk=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i;a.eachComponent("visualMap",function(l){l.eachTargetSeries(function(s){s===e&&(i=l)})}),this._progressiveEls=null,this.group.removeAll();var o=e.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):op(o)&&this._renderOnGeo(o,e,i,n)},t.prototype.incrementalPrepareRender=function(e,a,n){this.group.removeAll()},t.prototype.incrementalRender=function(e,a,n,i){var o=a.coordinateSystem;o&&(op(o)?this.render(a,n,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(a,i,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){mi(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,a,n,i,o){var l=e.coordinateSystem,s=yi(l,"cartesian2d"),u,d,c,f;if(s){var p=l.getAxis("x"),g=l.getAxis("y");u=p.getBandWidth()+.5,d=g.getBandWidth()+.5,c=p.scale.getExtent(),f=g.scale.getExtent()}for(var v=this.group,y=e.getData(),_=e.getModel(["emphasis","itemStyle"]).getItemStyle(),S=e.getModel(["blur","itemStyle"]).getItemStyle(),w=e.getModel(["select","itemStyle"]).getItemStyle(),T=e.get(["itemStyle","borderRadius"]),C=Ot(e),k=e.getModel("emphasis"),A=k.get("focus"),I=k.get("blurScope"),M=k.get("disabled"),D=s?[y.mapDimension("x"),y.mapDimension("y"),y.mapDimension("value")]:[y.mapDimension("time"),y.mapDimension("value")],L=n;L<i;L++){var E=void 0,R=y.getItemVisual(L,"style");if(s){var V=y.get(D[0],L),z=y.get(D[1],L);if(isNaN(y.get(D[2],L))||isNaN(V)||isNaN(z)||V<c[0]||V>c[1]||z<f[0]||z>f[1])continue;var G=l.dataToPoint([V,z]);E=new et({shape:{x:G[0]-u/2,y:G[1]-d/2,width:u,height:d},style:R})}else{if(isNaN(y.get(D[1],L)))continue;E=new et({z2:1,shape:l.dataToRect([y.get(D[0],L)]).contentShape,style:R})}if(y.hasItemOption){var q=y.getItemModel(L),Z=q.getModel("emphasis");_=Z.getModel("itemStyle").getItemStyle(),S=q.getModel(["blur","itemStyle"]).getItemStyle(),w=q.getModel(["select","itemStyle"]).getItemStyle(),T=q.get(["itemStyle","borderRadius"]),A=Z.get("focus"),I=Z.get("blurScope"),M=Z.get("disabled"),C=Ot(q)}E.shape.r=T;var H=e.getRawValue(L),F="-";H&&H[2]!=null&&(F=H[2]+""),Zt(E,C,{labelFetcher:e,labelDataIndex:L,defaultOpacity:R.opacity,defaultText:F}),E.ensureState("emphasis").style=_,E.ensureState("blur").style=S,E.ensureState("select").style=w,dt(E,A,I,M),E.incremental=o,o&&(E.states.emphasis.hoverLayer=!0),v.add(E),y.setItemGraphicEl(L,E),this._progressiveEls&&this._progressiveEls.push(E)}},t.prototype._renderOnGeo=function(e,a,n,i){var o=n.targetVisuals.inRange,l=n.targetVisuals.outOfRange,s=a.getData(),u=this._hmLayer||this._hmLayer||new Nk;u.blurSize=a.get("blurSize"),u.pointSize=a.get("pointSize"),u.minOpacity=a.get("minOpacity"),u.maxOpacity=a.get("maxOpacity");var d=e.getViewRect().clone(),c=e.getRoamTransform();d.applyTransform(c);var f=Math.max(d.x,0),p=Math.max(d.y,0),g=Math.min(d.width+d.x,i.getWidth()),v=Math.min(d.height+d.y,i.getHeight()),y=g-f,_=v-p,S=[s.mapDimension("lng"),s.mapDimension("lat"),s.mapDimension("value")],w=s.mapArray(S,function(A,I,M){var D=e.dataToPoint([A,I]);return D[0]-=f,D[1]-=p,D.push(M),D}),T=n.getExtent(),C=n.type==="visualMap.continuous"?$k(T,n.option.range):Ok(T,n.getPieceList(),n.option.selected);u.update(w,y,_,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:l.color.getColorMapper()},C);var k=new Ta({style:{width:y,height:_,x:f,y:p,image:u.canvas},silent:!0});this.group.add(k)},t.type="heatmap",t}(ut),Bk=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){return zr(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=jg.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(Ct);function qk(r){r.registerChartView(zk),r.registerSeriesModel(Bk)}var Gk=["itemStyle","borderWidth"],lp=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],as=new _i,Fk=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=this.group,o=e.getData(),l=this._data,s=e.coordinateSystem,u=s.getBaseAxis(),d=u.isHorizontal(),c=s.master.getRect(),f={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:s,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:d,valueDim:lp[+d],categoryDim:lp[1-+d]};o.diff(l).add(function(g){if(o.hasValue(g)){var v=up(o,g),y=sp(o,g,v,f),_=dp(o,f,y);o.setItemGraphicEl(g,_),i.add(_),fp(_,f,y)}}).update(function(g,v){var y=l.getItemGraphicEl(v);if(!o.hasValue(g)){i.remove(y);return}var _=up(o,g),S=sp(o,g,_,f),w=Qm(o,S);y&&w!==y.__pictorialShapeStr&&(i.remove(y),o.setItemGraphicEl(g,null),y=null),y?Xk(y,f,S):y=dp(o,f,S,!0),o.setItemGraphicEl(g,y),y.__pictorialSymbolMeta=S,i.add(y),fp(y,f,S)}).remove(function(g){var v=l.getItemGraphicEl(g);v&&cp(l,g,v.__pictorialSymbolMeta.animationModel,v)}).execute();var p=e.get("clip",!0)?Xo(e.coordinateSystem,!1,e):null;return p?i.setClipPath(p):i.removeClipPath(),this._data=o,this.group},t.prototype.remove=function(e,a){var n=this.group,i=this._data;e.get("animation")?i&&i.eachItemGraphicEl(function(o){cp(i,qe(o).dataIndex,e,o)}):n.removeAll()},t.type="pictorialBar",t}(ut);function sp(r,t,e,a){var n=r.getItemLayout(t),i=e.get("symbolRepeat"),o=e.get("symbolClip"),l=e.get("symbolPosition")||"start",s=e.get("symbolRotate"),u=(s||0)*Math.PI/180||0,d=e.get("symbolPatternSize")||2,c=e.isAnimationEnabled(),f={dataIndex:t,layout:n,itemModel:e,symbolType:r.getItemVisual(t,"symbol")||"circle",style:r.getItemVisual(t,"style"),symbolClip:o,symbolRepeat:i,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:d,rotation:u,animationModel:c?e:null,hoverScale:c&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};Uk(e,i,n,a,f),Hk(r,t,n,i,o,f.boundingLength,f.pxSign,d,a,f),Wk(e,f.symbolScale,u,a,f);var p=f.symbolSize,g=wn(e.get("symbolOffset"),p);return Yk(e,p,n,i,o,g,l,f.valueLineWidth,f.boundingLength,f.repeatCutLength,a,f),f}function Uk(r,t,e,a,n){var i=a.valueDim,o=r.get("symbolBoundingData"),l=a.coordSys.getOtherAxis(a.coordSys.getBaseAxis()),s=l.toGlobalCoord(l.dataToCoord(0)),u=1-+(e[i.wh]<=0),d;if(ge(o)){var c=[rs(l,o[0])-s,rs(l,o[1])-s];c[1]<c[0]&&c.reverse(),d=c[u]}else o!=null?d=rs(l,o)-s:t?d=a.coordSysExtent[i.index][u]-s:d=e[i.wh];n.boundingLength=d,t&&(n.repeatCutLength=e[i.wh]),n.pxSign=d>0?1:-1}function rs(r,t){return r.toGlobalCoord(r.dataToCoord(r.scale.parse(t)))}function Hk(r,t,e,a,n,i,o,l,s,u){var d=s.valueDim,c=s.categoryDim,f=Math.abs(e[c.wh]),p=r.getItemVisual(t,"symbolSize"),g;ge(p)?g=p.slice():p==null?g=["100%","100%"]:g=[p,p],g[c.index]=de(g[c.index],f),g[d.index]=de(g[d.index],a?f:Math.abs(i)),u.symbolSize=g;var v=u.symbolScale=[g[0]/l,g[1]/l];v[d.index]*=(s.isHorizontal?-1:1)*o}function Wk(r,t,e,a,n){var i=r.get(Gk)||0;i&&(as.attr({scaleX:t[0],scaleY:t[1],rotation:e}),as.updateTransform(),i/=as.getLineScale(),i*=t[a.valueDim.index]),n.valueLineWidth=i||0}function Yk(r,t,e,a,n,i,o,l,s,u,d,c){var f=d.categoryDim,p=d.valueDim,g=c.pxSign,v=Math.max(t[p.index]+l,0),y=v;if(a){var _=Math.abs(s),S=ua(r.get("symbolMargin"),"15%")+"",w=!1;S.lastIndexOf("!")===S.length-1&&(w=!0,S=S.slice(0,S.length-1));var T=de(S,t[p.index]),C=Math.max(v+T*2,0),k=w?0:T*2,A=O1(a),I=A?a:pp((_+k)/C),M=_-I*v;T=M/2/(w?I:Math.max(I-1,1)),C=v+T*2,k=w?0:T*2,!A&&a!=="fixed"&&(I=u?pp((Math.abs(u)+k)/C):0),y=I*C-k,c.repeatTimes=I,c.symbolMargin=T}var D=g*(y/2),L=c.pathPosition=[];L[f.index]=e[f.wh]/2,L[p.index]=o==="start"?D:o==="end"?s-D:s/2,i&&(L[0]+=i[0],L[1]+=i[1]);var E=c.bundlePosition=[];E[f.index]=e[f.xy],E[p.index]=e[p.xy];var R=c.barRectShape=be({},e);R[p.wh]=g*Math.max(Math.abs(e[p.wh]),Math.abs(L[p.index]+D)),R[f.wh]=e[f.wh];var V=c.clipShape={};V[f.xy]=-e[f.xy],V[f.wh]=d.ecSize[f.wh],V[p.xy]=0,V[p.wh]=e[p.wh]}function Ym(r){var t=r.symbolPatternSize,e=St(r.symbolType,-t/2,-t/2,t,t);return e.attr({culling:!0}),e.type!=="image"&&e.setStyle({strokeNoScale:!0}),e}function jm(r,t,e,a){var n=r.__pictorialBundle,i=e.symbolSize,o=e.valueLineWidth,l=e.pathPosition,s=t.valueDim,u=e.repeatTimes||0,d=0,c=i[t.valueDim.index]+o+e.symbolMargin*2;for(cd(r,function(v){v.__pictorialAnimationIndex=d,v.__pictorialRepeatTimes=u,d<u?sn(v,null,g(d),e,a):sn(v,null,{scaleX:0,scaleY:0},e,a,function(){n.remove(v)}),d++});d<u;d++){var f=Ym(e);f.__pictorialAnimationIndex=d,f.__pictorialRepeatTimes=u,n.add(f);var p=g(d);sn(f,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},e,a)}function g(v){var y=l.slice(),_=e.pxSign,S=v;return(e.symbolRepeatDirection==="start"?_>0:_<0)&&(S=u-1-v),y[s.index]=c*(S-u/2+.5)+l[s.index],{x:y[0],y:y[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function Zm(r,t,e,a){var n=r.__pictorialBundle,i=r.__pictorialMainPath;i?sn(i,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,a):(i=r.__pictorialMainPath=Ym(e),n.add(i),sn(i,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,a))}function Xm(r,t,e){var a=be({},t.barRectShape),n=r.__pictorialBarRect;n?sn(n,null,{shape:a},t,e):(n=r.__pictorialBarRect=new et({z2:2,shape:a,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,r.add(n))}function Km(r,t,e,a){if(e.symbolClip){var n=r.__pictorialClipPath,i=be({},e.clipShape),o=t.valueDim,l=e.animationModel,s=e.dataIndex;if(n)Ke(n,{shape:i},l,s);else{i[o.wh]=0,n=new et({shape:i}),r.__pictorialBundle.setClipPath(n),r.__pictorialClipPath=n;var u={};u[o.wh]=e.clipShape[o.wh],Tn[a?"updateProps":"initProps"](n,{shape:u},l,s)}}}function up(r,t){var e=r.getItemModel(t);return e.getAnimationDelayParams=jk,e.isAnimationEnabled=Zk,e}function jk(r){return{index:r.__pictorialAnimationIndex,count:r.__pictorialRepeatTimes}}function Zk(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function dp(r,t,e,a){var n=new xe,i=new xe;return n.add(i),n.__pictorialBundle=i,i.x=e.bundlePosition[0],i.y=e.bundlePosition[1],e.symbolRepeat?jm(n,t,e):Zm(n,t,e),Xm(n,e,a),Km(n,t,e,a),n.__pictorialShapeStr=Qm(r,e),n.__pictorialSymbolMeta=e,n}function Xk(r,t,e){var a=e.animationModel,n=e.dataIndex,i=r.__pictorialBundle;Ke(i,{x:e.bundlePosition[0],y:e.bundlePosition[1]},a,n),e.symbolRepeat?jm(r,t,e,!0):Zm(r,t,e,!0),Xm(r,e,!0),Km(r,t,e,!0)}function cp(r,t,e,a){var n=a.__pictorialBarRect;n&&n.removeTextContent();var i=[];cd(a,function(o){i.push(o)}),a.__pictorialMainPath&&i.push(a.__pictorialMainPath),a.__pictorialClipPath&&(e=null),O(i,function(o){cn(o,{scaleX:0,scaleY:0},e,t,function(){a.parent&&a.parent.remove(a)})}),r.setItemGraphicEl(t,null)}function Qm(r,t){return[r.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function cd(r,t,e){O(r.__pictorialBundle.children(),function(a){a!==r.__pictorialBarRect&&t.call(e,a)})}function sn(r,t,e,a,n,i){t&&r.attr(t),a.symbolClip&&!n?e&&r.attr(e):e&&Tn[n?"updateProps":"initProps"](r,e,a.animationModel,a.dataIndex,i)}function fp(r,t,e){var a=e.dataIndex,n=e.itemModel,i=n.getModel("emphasis"),o=i.getModel("itemStyle").getItemStyle(),l=n.getModel(["blur","itemStyle"]).getItemStyle(),s=n.getModel(["select","itemStyle"]).getItemStyle(),u=n.getShallow("cursor"),d=i.get("focus"),c=i.get("blurScope"),f=i.get("scale");cd(r,function(v){if(v instanceof Ta){var y=v.style;v.useStyle(be({image:y.image,x:y.x,y:y.y,width:y.width,height:y.height},e.style))}else v.useStyle(e.style);var _=v.ensureState("emphasis");_.style=o,f&&(_.scaleX=v.scaleX*1.1,_.scaleY=v.scaleY*1.1),v.ensureState("blur").style=l,v.ensureState("select").style=s,u&&(v.cursor=u),v.z2=e.z2});var p=t.valueDim.posDesc[+(e.boundingLength>0)],g=r.__pictorialBarRect;g.ignoreClip=!0,Zt(g,Ot(n),{labelFetcher:t.seriesModel,labelDataIndex:a,defaultText:ei(t.seriesModel.getData(),a),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:p}),dt(r,d,c,i.get("disabled"))}function pp(r){var t=Math.round(r);return Math.abs(r-t)<1e-4?t:Math.ceil(r)}var Kk=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return t.prototype.getInitialData=function(e){return e.stack=null,r.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=Br(ac.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(ac);function Qk(r){r.registerChartView(Fk),r.registerSeriesModel(Kk),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,Ve($1,"pictorialBar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,z1("pictorialBar"))}var Jk=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._layers=[],e}return t.prototype.render=function(e,a,n){var i=e.getData(),o=this,l=this.group,s=e.getLayerSeries(),u=i.getLayout("layoutInfo"),d=u.rect,c=u.boundaryGap;l.x=0,l.y=d.y+c[0];function f(y){return y.name}var p=new rr(this._layersSeries||[],s,f,f),g=[];p.add(ye(v,this,"add")).update(ye(v,this,"update")).remove(ye(v,this,"remove")).execute();function v(y,_,S){var w=o._layers;if(y==="remove"){l.remove(w[_]);return}for(var T=[],C=[],k,A=s[_].indices,I=0;I<A.length;I++){var M=i.getItemLayout(A[I]),D=M.x,L=M.y0,E=M.y;T.push(D,L),C.push(D,L+E),k=i.getItemVisual(A[I],"style")}var R,V=i.getItemLayout(A[0]),z=e.getModel("label"),G=z.get("margin"),q=e.getModel("emphasis");if(y==="add"){var Z=g[_]=new xe;R=new Gh({shape:{points:T,stackedOnPoints:C,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Z.add(R),l.add(Z),e.isAnimationEnabled()&&R.setClipPath(eA(R.getBoundingRect(),e,function(){R.removeClipPath()}))}else{var Z=w[S];R=Z.childAt(0),l.add(Z),g[_]=Z,Ke(R,{shape:{points:T,stackedOnPoints:C}},e),qa(R)}Zt(R,Ot(e),{labelDataIndex:A[I-1],defaultText:i.getName(A[I-1]),inheritColor:k.fill},{normal:{verticalAlign:"middle"}}),R.setTextConfig({position:null,local:!0});var H=R.getTextContent();H&&(H.x=V.x-G,H.y=V.y0+V.y/2),R.useStyle(k),i.setItemGraphicEl(_,R),Xt(R,e),dt(R,q.get("focus"),q.get("blurScope"),q.get("disabled"))}this._layersSeries=s,this._layers=g},t.type="themeRiver",t}(ut);function eA(r,t,e){var a=new et({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return qt(a,{shape:{x:r.x-50,width:r.width+100,height:r.height+20}},t,e),a}var ns=2,tA=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new zo(ye(this.getData,this),ye(this.getRawData,this))},t.prototype.fixData=function(e){var a=e.length,n={},i=Vs(e,function(f){return n.hasOwnProperty(f[0]+"")||(n[f[0]+""]=-1),f[2]}),o=[];i.buckets.each(function(f,p){o.push({name:p,dataList:f})});for(var l=o.length,s=0;s<l;++s){for(var u=o[s].name,d=0;d<o[s].dataList.length;++d){var c=o[s].dataList[d][0]+"";n[c]=s}for(var c in n)n.hasOwnProperty(c)&&n[c]!==s&&(n[c]=s,e[a]=[c,0,u],a++)}return e},t.prototype.getInitialData=function(e,a){for(var n=this.getReferringComponents("singleAxis",La).models[0],i=n.get("type"),o=bt(e.data,function(g){return g[2]!==void 0}),l=this.fixData(o||[]),s=[],u=this.nameMap=Pe(),d=0,c=0;c<l.length;++c)s.push(l[c][ns]),u.get(l[c][ns])||(u.set(l[c][ns],d),d++);var f=xu(l,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Rs(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,p=new da(f,this);return p.initData(l),p},t.prototype.getLayerSeries=function(){for(var e=this.getData(),a=e.count(),n=[],i=0;i<a;++i)n[i]=i;var o=e.mapDimension("single"),l=Vs(n,function(u){return e.get("name",u)}),s=[];return l.buckets.each(function(u,d){u.sort(function(c,f){return e.get(o,c)-e.get(o,f)}),s.push({name:d,indices:u})}),s},t.prototype.getAxisTooltipData=function(e,a,n){ge(e)||(e=e?[e]:[]);for(var i=this.getData(),o=this.getLayerSeries(),l=[],s=o.length,u,d=0;d<s;++d){for(var c=Number.MAX_VALUE,f=-1,p=o[d].indices.length,g=0;g<p;++g){var v=i.get(e[0],o[d].indices[g]),y=Math.abs(v-a);y<=c&&(u=v,c=y,f=o[d].indices[g])}l.push(f)}return{dataIndices:l,nestestValue:u}},t.prototype.formatTooltip=function(e,a,n){var i=this.getData(),o=i.getName(e),l=i.get(i.mapDimension("value"),e);return ra("nameValue",{name:o,value:l})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(Ct);function aA(r,t){r.eachSeriesByType("themeRiver",function(e){var a=e.getData(),n=e.coordinateSystem,i={},o=n.getRect();i.rect=o;var l=e.get("boundaryGap"),s=n.getAxis();if(i.boundaryGap=l,s.orient==="horizontal"){l[0]=de(l[0],o.height),l[1]=de(l[1],o.height);var u=o.height-l[0]-l[1];vp(a,e,u)}else{l[0]=de(l[0],o.width),l[1]=de(l[1],o.width);var d=o.width-l[0]-l[1];vp(a,e,d)}a.setLayout("layoutInfo",i)})}function vp(r,t,e){if(r.count())for(var a=t.coordinateSystem,n=t.getLayerSeries(),i=r.mapDimension("single"),o=r.mapDimension("value"),l=ne(n,function(y){return ne(y.indices,function(_){var S=a.dataToPoint(r.get(i,_));return S[1]=r.get(o,_),S})}),s=rA(l),u=s.y0,d=e/s.max,c=n.length,f=n[0].indices.length,p,g=0;g<f;++g){p=u[g]*d,r.setItemLayout(n[0].indices[g],{layerIndex:0,x:l[0][g][0],y0:p,y:l[0][g][1]*d});for(var v=1;v<c;++v)p+=l[v-1][g][1]*d,r.setItemLayout(n[v].indices[g],{layerIndex:v,x:l[v][g][0],y0:p,y:l[v][g][1]*d})}}function rA(r){for(var t=r.length,e=r[0].length,a=[],n=[],i=0,o=0;o<e;++o){for(var l=0,s=0;s<t;++s)l+=r[s][o][1];l>i&&(i=l),a.push(l)}for(var u=0;u<e;++u)n[u]=(i-a[u])/2;i=0;for(var d=0;d<e;++d){var c=a[d]+n[d];c>i&&(i=c)}return{y0:n,max:i}}function nA(r){r.registerChartView(Jk),r.registerSeriesModel(tA),r.registerLayout(aA),r.registerProcessor(qo("themeRiver"))}var iA=2,oA=4,gp=function(r){W(t,r);function t(e,a,n,i){var o=r.call(this)||this;o.z2=iA,o.textConfig={inside:!0},qe(o).seriesIndex=a.seriesIndex;var l=new Xe({z2:oA,silent:e.getModel().get(["label","silent"])});return o.setTextContent(l),o.updateData(!0,e,a,n,i),o}return t.prototype.updateData=function(e,a,n,i,o){this.node=a,a.piece=this,n=n||this._seriesModel,i=i||this._ecModel;var l=this;qe(l).dataIndex=a.dataIndex;var s=a.getModel(),u=s.getModel("emphasis"),d=a.getLayout(),c=be({},d);c.label=null;var f=a.getVisual("style");f.lineJoin="bevel";var p=a.getVisual("decal");p&&(f.decal=Uo(p,o));var g=rc(s.getModel("itemStyle"),c,!0);be(c,g),O(ti,function(S){var w=l.ensureState(S),T=s.getModel([S,"itemStyle"]);w.style=T.getItemStyle();var C=rc(T,c);C&&(w.shape=C)}),e?(l.setShape(c),l.shape.r=d.r0,qt(l,{shape:{r:d.r}},n,a.dataIndex)):(Ke(l,{shape:c},n),qa(l)),l.useStyle(f),this._updateLabel(n);var v=s.getShallow("cursor");v&&l.attr("cursor",v),this._seriesModel=n||this._seriesModel,this._ecModel=i||this._ecModel;var y=u.get("focus"),_=y==="ancestor"?a.getAncestorsIndices():y==="descendant"?a.getDescendantIndices():y;dt(this,_,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e){var a=this,n=this.node.getModel(),i=n.getModel("label"),o=this.node.getLayout(),l=o.endAngle-o.startAngle,s=(o.startAngle+o.endAngle)/2,u=Math.cos(s),d=Math.sin(s),c=this,f=c.getTextContent(),p=this.node.dataIndex,g=i.get("minAngle")/180*Math.PI,v=i.get("show")&&!(g!=null&&Math.abs(l)<g);f.ignore=!v,O(q1,function(_){var S=_==="normal"?n.getModel("label"):n.getModel([_,"label"]),w=_==="normal",T=w?f:f.ensureState(_),C=e.getFormattedLabel(p,_);w&&(C=C||a.node.name),T.style=lt(S,{},null,_!=="normal",!0),C&&(T.style.text=C);var k=S.get("show");k!=null&&!w&&(T.ignore=!k);var A=y(S,"position"),I=w?c:c.states[_],M=I.style.fill;I.textConfig={outsideFill:S.get("color")==="inherit"?M:null,inside:A!=="outside"};var D,L=y(S,"distance")||0,E=y(S,"align"),R=y(S,"rotate"),V=Math.PI*.5,z=Math.PI*1.5,G=$n(R==="tangential"?Math.PI/2-s:s),q=G>V&&!B1(G-V)&&G<z;A==="outside"?(D=o.r+L,E=q?"right":"left"):!E||E==="center"?(l===2*Math.PI&&o.r0===0?D=0:D=(o.r+o.r0)/2,E="center"):E==="left"?(D=o.r0+L,E=q?"right":"left"):E==="right"&&(D=o.r-L,E=q?"left":"right"),T.style.align=E,T.style.verticalAlign=y(S,"verticalAlign")||"middle",T.x=D*u+o.cx,T.y=D*d+o.cy;var Z=0;R==="radial"?Z=$n(-s)+(q?Math.PI:0):R==="tangential"?Z=$n(Math.PI/2-s)+(q?Math.PI:0):aa(R)&&(Z=R*Math.PI/180),T.rotation=$n(Z)});function y(_,S){var w=_.get(S);return w??i.get(S)}f.dirtyStyle()},t}(Vr),tu="sunburstRootToNode",hp="sunburstHighlight",lA="sunburstUnhighlight";function sA(r){r.registerAction({type:tu,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},a);function a(n,i){var o=li(t,[tu],n);if(o){var l=n.getViewRoot();l&&(t.direction=Ku(l,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}}}),r.registerAction({type:hp,update:"none"},function(t,e,a){t=be({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},n);function n(i){var o=li(t,[hp],i);o&&(t.dataIndex=o.node.dataIndex)}a.dispatchAction(be(t,{type:"highlight"}))}),r.registerAction({type:lA,update:"updateView"},function(t,e,a){t=be({},t),a.dispatchAction(be(t,{type:"downplay"}))})}var uA=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,i){var o=this;this.seriesModel=e,this.api=n,this.ecModel=a;var l=e.getData(),s=l.tree.root,u=e.getViewRoot(),d=this.group,c=e.get("renderLabelForZeroData"),f=[];u.eachNode(function(S){f.push(S)});var p=this._oldChildren||[];g(f,p),_(s,u),this._initEvents(),this._oldChildren=f;function g(S,w){if(S.length===0&&w.length===0)return;new rr(w,S,T,T).add(C).update(C).remove(Ve(C,null)).execute();function T(k){return k.getId()}function C(k,A){var I=k==null?null:S[k],M=A==null?null:w[A];v(I,M)}}function v(S,w){if(!c&&S&&!S.getValue()&&(S=null),S!==s&&w!==s){if(w&&w.piece)S?(w.piece.updateData(!1,S,e,a,n),l.setItemGraphicEl(S.dataIndex,w.piece)):y(w);else if(S){var T=new gp(S,e,a,n);d.add(T),l.setItemGraphicEl(S.dataIndex,T)}}}function y(S){S&&S.piece&&(d.remove(S.piece),S.piece=null)}function _(S,w){w.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,S,e,a,n):(o.virtualPiece=new gp(S,e,a,n),d.add(o.virtualPiece)),w.piece.off("click"),o.virtualPiece.on("click",function(T){o._rootToNode(w.parentNode)})):o.virtualPiece&&(d.remove(o.virtualPiece),o.virtualPiece=null)}},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(a){var n=!1,i=e.seriesModel.getViewRoot();i.eachNode(function(o){if(!n&&o.piece&&o.piece===a.target){var l=o.getModel().get("nodeClick");if(l==="rootToNode")e._rootToNode(o);else if(l==="link"){var s=o.getModel(),u=s.get("link");if(u){var d=s.get("target",!0)||"_blank";Ug(u,d)}}n=!0}})})},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:tu,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,a){var n=a.getData(),i=n.getItemLayout(0);if(i){var o=e[0]-i.cx,l=e[1]-i.cy,s=Math.sqrt(o*o+l*l);return s<=i.r&&s>=i.r0}},t.type="sunburst",t}(ut),dA=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e,a){var n={name:e.name,children:e.data};Jm(n);var i=this._levelModels=ne(e.levels||[],function(s){return new na(s,this,a)},this),o=Xu.createTree(n,this,l);function l(s){s.wrapMethod("getItemModel",function(u,d){var c=o.getNodeByDataIndex(d),f=i[c.depth];return f&&(u.parentModel=f),u})}return o.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(e){var a=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return a.treePathInfo=rl(n,this),a},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var a=this.getRawData().tree.root;(!e||e!==a&&!a.contains(e))&&(this._viewRoot=a)},t.prototype.enableAriaDecal=function(){nm(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(Ct);function Jm(r){var t=0;O(r.children,function(a){Jm(a);var n=a.value;ge(n)&&(n=n[0]),t+=n});var e=r.value;ge(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),ge(r.value)?r.value[0]=e:r.value=e}var mp=Math.PI/180;function cA(r,t,e){t.eachSeriesByType(r,function(a){var n=a.get("center"),i=a.get("radius");ge(i)||(i=[0,i]),ge(n)||(n=[n,n]);var o=e.getWidth(),l=e.getHeight(),s=Math.min(o,l),u=de(n[0],o),d=de(n[1],l),c=de(i[0],s/2),f=de(i[1],s/2),p=-a.get("startAngle")*mp,g=a.get("minAngle")*mp,v=a.getData().tree.root,y=a.getViewRoot(),_=y.depth,S=a.get("sort");S!=null&&ey(y,S);var w=0;O(y.children,function(G){!isNaN(G.getValue())&&w++});var T=y.getValue(),C=Math.PI/(T||w)*2,k=y.depth>0,A=y.height-(k?-1:1),I=(f-c)/(A||1),M=a.get("clockwise"),D=a.get("stillShowZeroSum"),L=M?1:-1,E=function(G,q){if(G){var Z=q;if(G!==v){var H=G.getValue(),F=T===0&&D?C:H*C;F<g&&(F=g),Z=q+L*F;var re=G.depth-_-(k?-1:1),_e=c+I*re,te=c+I*(re+1),he=a.getLevelModel(G);if(he){var Ie=he.get("r0",!0),ke=he.get("r",!0),Ee=he.get("radius",!0);Ee!=null&&(Ie=Ee[0],ke=Ee[1]),Ie!=null&&(_e=de(Ie,s/2)),ke!=null&&(te=de(ke,s/2))}G.setLayout({angle:F,startAngle:q,endAngle:Z,clockwise:M,cx:u,cy:d,r0:_e,r:te})}if(G.children&&G.children.length){var we=0;O(G.children,function(Ge){we+=E(Ge,q+we)})}return Z-q}};if(k){var R=c,V=c+I,z=Math.PI*2;v.setLayout({angle:z,startAngle:p,endAngle:p+z,clockwise:M,cx:u,cy:d,r0:R,r:V})}E(y,p)})}function ey(r,t){var e=r.children||[];r.children=fA(e,t),e.length&&O(r.children,function(a){ey(a,t)})}function fA(r,t){if(Be(t)){var e=ne(r,function(n,i){var o=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return o}},index:i}});return e.sort(function(n,i){return t(n.params,i.params)}),ne(e,function(n){return r[n.index]})}else{var a=t==="asc";return r.sort(function(n,i){var o=(n.getValue()-i.getValue())*(a?1:-1);return o===0?(n.dataIndex-i.dataIndex)*(a?-1:1):o})}}function pA(r){var t={};function e(a,n,i){for(var o=a;o&&o.depth>1;)o=o.parentNode;var l=n.getColorFromPalette(o.name||o.dataIndex+"",t);return a.depth>1&&Re(l)&&(l=G1(l,(a.depth-1)/(i-1)*.5)),l}r.eachSeriesByType("sunburst",function(a){var n=a.getData(),i=n.tree;i.eachNode(function(o){var l=o.getModel(),s=l.getModel("itemStyle").getItemStyle();s.fill||(s.fill=e(o,a,i.root.height));var u=n.ensureUniqueItemVisual(o.dataIndex,"style");be(u,s)})})}function vA(r){r.registerChartView(uA),r.registerSeriesModel(dA),r.registerLayout(Ve(cA,"sunburst")),r.registerProcessor(Ve(qo,"sunburst")),r.registerVisual(pA),sA(r)}var yp={color:"fill",borderColor:"stroke"},gA={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},za=ht(),hA=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,a){return zr(null,this)},t.prototype.getDataParams=function(e,a,n){var i=r.prototype.getDataParams.call(this,e,a);return n&&(i.info=za(n).info),i},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Ct);function mA(r,t){return t=t||[0,0],ne(["x","y"],function(e,a){var n=this.getAxis(e),i=t[a],o=r[a]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(i-o)-n.dataToCoord(i+o))},this)}function yA(r){var t=r.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return r.dataToPoint(e)},size:ye(mA,r)}}}function bA(r,t){return t=t||[0,0],ne([0,1],function(e){var a=t[e],n=r[e]/2,i=[],o=[];return i[e]=a-n,o[e]=a+n,i[1-e]=o[1-e]=t[1-e],Math.abs(this.dataToPoint(i)[e]-this.dataToPoint(o)[e])},this)}function _A(r){var t=r.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:r.getZoom()},api:{coord:function(e){return r.dataToPoint(e)},size:ye(bA,r)}}}function SA(r,t){var e=this.getAxis(),a=t instanceof Array?t[0]:t,n=(r instanceof Array?r[0]:r)/2;return e.type==="category"?e.getBandWidth():Math.abs(e.dataToCoord(a-n)-e.dataToCoord(a+n))}function wA(r){var t=r.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return r.dataToPoint(e)},size:ye(SA,r)}}}function xA(r,t){return t=t||[0,0],ne(["Radius","Angle"],function(e,a){var n="get"+e+"Axis",i=this[n](),o=t[a],l=r[a]/2,s=i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-l)-i.dataToCoord(o+l));return e==="Angle"&&(s=s*Math.PI/180),s},this)}function TA(r){var t=r.getRadiusAxis(),e=r.getAngleAxis(),a=t.getExtent();return a[0]>a[1]&&a.reverse(),{coordSys:{type:"polar",cx:r.cx,cy:r.cy,r:a[1],r0:a[0]},api:{coord:function(n){var i=t.dataToRadius(n[0]),o=e.dataToAngle(n[1]),l=r.coordToPoint([i,o]);return l.push(i,o*Math.PI/180),l},size:ye(xA,r)}}}function CA(r){var t=r.getRect(),e=r.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(a,n){return r.dataToPoint(a,n)}}}}function ty(r,t,e,a){return r&&(r.legacy||r.legacy!==!1&&!e&&!a&&t!=="tspan"&&(t==="text"||le(r,"text")))}function ay(r,t,e){var a=r,n,i,o;if(t==="text")o=a;else{o={},le(a,"text")&&(o.text=a.text),le(a,"rich")&&(o.rich=a.rich),le(a,"textFill")&&(o.fill=a.textFill),le(a,"textStroke")&&(o.stroke=a.textStroke),le(a,"fontFamily")&&(o.fontFamily=a.fontFamily),le(a,"fontSize")&&(o.fontSize=a.fontSize),le(a,"fontStyle")&&(o.fontStyle=a.fontStyle),le(a,"fontWeight")&&(o.fontWeight=a.fontWeight),i={type:"text",style:o,silent:!0},n={};var l=le(a,"textPosition");e?n.position=l?a.textPosition:"inside":l&&(n.position=a.textPosition),le(a,"textPosition")&&(n.position=a.textPosition),le(a,"textOffset")&&(n.offset=a.textOffset),le(a,"textRotation")&&(n.rotation=a.textRotation),le(a,"textDistance")&&(n.distance=a.textDistance)}return bp(o,r),O(o.rich,function(s){bp(s,s)}),{textConfig:n,textContent:i}}function bp(r,t){t&&(t.font=t.textFont||t.font,le(t,"textStrokeWidth")&&(r.lineWidth=t.textStrokeWidth),le(t,"textAlign")&&(r.align=t.textAlign),le(t,"textVerticalAlign")&&(r.verticalAlign=t.textVerticalAlign),le(t,"textLineHeight")&&(r.lineHeight=t.textLineHeight),le(t,"textWidth")&&(r.width=t.textWidth),le(t,"textHeight")&&(r.height=t.textHeight),le(t,"textBackgroundColor")&&(r.backgroundColor=t.textBackgroundColor),le(t,"textPadding")&&(r.padding=t.textPadding),le(t,"textBorderColor")&&(r.borderColor=t.textBorderColor),le(t,"textBorderWidth")&&(r.borderWidth=t.textBorderWidth),le(t,"textBorderRadius")&&(r.borderRadius=t.textBorderRadius),le(t,"textBoxShadowColor")&&(r.shadowColor=t.textBoxShadowColor),le(t,"textBoxShadowBlur")&&(r.shadowBlur=t.textBoxShadowBlur),le(t,"textBoxShadowOffsetX")&&(r.shadowOffsetX=t.textBoxShadowOffsetX),le(t,"textBoxShadowOffsetY")&&(r.shadowOffsetY=t.textBoxShadowOffsetY))}function _p(r,t,e){var a=r;a.textPosition=a.textPosition||e.position||"inside",e.offset!=null&&(a.textOffset=e.offset),e.rotation!=null&&(a.textRotation=e.rotation),e.distance!=null&&(a.textDistance=e.distance);var n=a.textPosition.indexOf("inside")>=0,i=r.fill||"#000";Sp(a,t);var o=a.textFill==null;return n?o&&(a.textFill=e.insideFill||"#fff",!a.textStroke&&e.insideStroke&&(a.textStroke=e.insideStroke),!a.textStroke&&(a.textStroke=i),a.textStrokeWidth==null&&(a.textStrokeWidth=2)):(o&&(a.textFill=r.fill||e.outsideFill||"#000"),!a.textStroke&&e.outsideStroke&&(a.textStroke=e.outsideStroke)),a.text=t.text,a.rich=t.rich,O(t.rich,function(l){Sp(l,l)}),a}function Sp(r,t){t&&(le(t,"fill")&&(r.textFill=t.fill),le(t,"stroke")&&(r.textStroke=t.fill),le(t,"lineWidth")&&(r.textStrokeWidth=t.lineWidth),le(t,"font")&&(r.font=t.font),le(t,"fontStyle")&&(r.fontStyle=t.fontStyle),le(t,"fontWeight")&&(r.fontWeight=t.fontWeight),le(t,"fontSize")&&(r.fontSize=t.fontSize),le(t,"fontFamily")&&(r.fontFamily=t.fontFamily),le(t,"align")&&(r.textAlign=t.align),le(t,"verticalAlign")&&(r.textVerticalAlign=t.verticalAlign),le(t,"lineHeight")&&(r.textLineHeight=t.lineHeight),le(t,"width")&&(r.textWidth=t.width),le(t,"height")&&(r.textHeight=t.height),le(t,"backgroundColor")&&(r.textBackgroundColor=t.backgroundColor),le(t,"padding")&&(r.textPadding=t.padding),le(t,"borderColor")&&(r.textBorderColor=t.borderColor),le(t,"borderWidth")&&(r.textBorderWidth=t.borderWidth),le(t,"borderRadius")&&(r.textBorderRadius=t.borderRadius),le(t,"shadowColor")&&(r.textBoxShadowColor=t.shadowColor),le(t,"shadowBlur")&&(r.textBoxShadowBlur=t.shadowBlur),le(t,"shadowOffsetX")&&(r.textBoxShadowOffsetX=t.shadowOffsetX),le(t,"shadowOffsetY")&&(r.textBoxShadowOffsetY=t.shadowOffsetY),le(t,"textShadowColor")&&(r.textShadowColor=t.textShadowColor),le(t,"textShadowBlur")&&(r.textShadowBlur=t.textShadowBlur),le(t,"textShadowOffsetX")&&(r.textShadowOffsetX=t.textShadowOffsetX),le(t,"textShadowOffsetY")&&(r.textShadowOffsetY=t.textShadowOffsetY))}var ry={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},wp=vt(ry);qg(ai,function(r,t){return r[t]=1,r},{});ai.join(", ");var So=["","style","shape","extra"],mn=ht();function fd(r,t,e,a,n){var i=r+"Animation",o=Ti(r,a,n)||{},l=mn(t).userDuring;return o.duration>0&&(o.during=l?ye(MA,{el:t,userDuring:l}):null,o.setToFinal=!0,o.scope=r),be(o,e[i]),o}function to(r,t,e,a){a=a||{};var n=a.dataIndex,i=a.isInit,o=a.clearStyle,l=e.isAnimationEnabled(),s=mn(r),u=t.style;s.userDuring=t.during;var d={},c={};if(LA(r,t,c),Tp("shape",t,c),Tp("extra",t,c),!i&&l&&(PA(r,t,d),xp("shape",r,t,d),xp("extra",r,t,d),VA(r,t,u,d)),c.style=u,kA(r,c,o),IA(r,t),l)if(i){var f={};O(So,function(g){var v=g?t[g]:t;v&&v.enterFrom&&(g&&(f[g]=f[g]||{}),be(g?f[g]:f,v.enterFrom))});var p=fd("enter",r,t,e,n);p.duration>0&&r.animateFrom(f,p)}else AA(r,t,n||0,e,d);ny(r,t),u?r.dirty():r.markRedraw()}function ny(r,t){for(var e=mn(r).leaveToProps,a=0;a<So.length;a++){var n=So[a],i=n?t[n]:t;i&&i.leaveTo&&(e||(e=mn(r).leaveToProps={}),n&&(e[n]=e[n]||{}),be(n?e[n]:e,i.leaveTo))}}function ol(r,t,e,a){if(r){var n=r.parent,i=mn(r).leaveToProps;if(i){var o=fd("update",r,t,e,0);o.done=function(){n.remove(r)},r.animateTo(i,o)}else n.remove(r)}}function Ar(r){return r==="all"}function kA(r,t,e){var a=t.style;if(!r.isGroup&&a){if(e){r.useStyle({});for(var n=r.animators,i=0;i<n.length;i++){var o=n[i];o.targetName==="style"&&o.changeTarget(r.style)}}r.setStyle(a)}t&&(t.style=null,t&&r.attr(t),t.style=a)}function AA(r,t,e,a,n){if(n){var i=fd("update",r,t,a,e);i.duration>0&&r.animateFrom(n,i)}}function IA(r,t){le(t,"silent")&&(r.silent=t.silent),le(t,"ignore")&&(r.ignore=t.ignore),r instanceof Lr&&le(t,"invisible")&&(r.invisible=t.invisible),r instanceof Tt&&le(t,"autoBatch")&&(r.autoBatch=t.autoBatch)}var Da={},DA={setTransform:function(r,t){return Da.el[r]=t,this},getTransform:function(r){return Da.el[r]},setShape:function(r,t){var e=Da.el,a=e.shape||(e.shape={});return a[r]=t,e.dirtyShape&&e.dirtyShape(),this},getShape:function(r){var t=Da.el.shape;if(t)return t[r]},setStyle:function(r,t){var e=Da.el,a=e.style;return a&&(a[r]=t,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(r){var t=Da.el.style;if(t)return t[r]},setExtra:function(r,t){var e=Da.el.extra||(Da.el.extra={});return e[r]=t,this},getExtra:function(r){var t=Da.el.extra;if(t)return t[r]}};function MA(){var r=this,t=r.el;if(t){var e=mn(t).userDuring,a=r.userDuring;if(e!==a){r.el=r.userDuring=null;return}Da.el=t,a(DA)}}function xp(r,t,e,a){var n=e[r];if(n){var i=t[r],o;if(i){var l=e.transition,s=n.transition;if(s)if(!o&&(o=a[r]={}),Ar(s))be(o,i);else for(var u=jt(s),d=0;d<u.length;d++){var c=u[d],f=i[c];o[c]=f}else if(Ar(l)||nt(l,r)>=0){!o&&(o=a[r]={});for(var p=vt(i),d=0;d<p.length;d++){var c=p[d],f=i[c];RA(n[c],f)&&(o[c]=f)}}}}}function Tp(r,t,e){var a=t[r];if(a)for(var n=e[r]={},i=vt(a),o=0;o<i.length;o++){var l=i[o];n[l]=F1(a[l])}}function PA(r,t,e){for(var a=t.transition,n=Ar(a)?ai:jt(a||[]),i=0;i<n.length;i++){var o=n[i];if(!(o==="style"||o==="shape"||o==="extra")){var l=r[o];e[o]=l}}}function LA(r,t,e){for(var a=0;a<wp.length;a++){var n=wp[a],i=ry[n],o=t[n];o&&(e[i[0]]=o[0],e[i[1]]=o[1])}for(var a=0;a<ai.length;a++){var l=ai[a];t[l]!=null&&(e[l]=t[l])}}function VA(r,t,e,a){if(e){var n=r.style,i;if(n){var o=e.transition,l=t.transition;if(o&&!Ar(o)){var s=jt(o);!i&&(i=a.style={});for(var u=0;u<s.length;u++){var d=s[u],c=n[d];i[d]=c}}else if(r.getAnimationStyleProps&&(Ar(l)||Ar(o)||nt(l,"style")>=0)){var f=r.getAnimationStyleProps(),p=f?f.style:null;if(p){!i&&(i=a.style={});for(var g=vt(e),u=0;u<g.length;u++){var d=g[u];if(p[d]){var c=n[d];i[d]=c}}}}}}}function RA(r,t){return Kg(r)?r!==t:r!=null&&isFinite(r)}var iy=ht(),EA=["percent","easing","shape","style","extra"];function oy(r){r.stopAnimation("keyframe"),r.attr(iy(r))}function wo(r,t,e){if(!(!e.isAnimationEnabled()||!t)){if(ge(t)){O(t,function(l){wo(r,l,e)});return}var a=t.keyframes,n=t.duration;if(e&&n==null){var i=Ti("enter",e,0);n=i&&i.duration}if(!(!a||!n)){var o=iy(r);O(So,function(l){if(!(l&&!r[l])){var s;a.sort(function(u,d){return u.percent-d.percent}),O(a,function(u){var d=r.animators,c=l?u[l]:u;if(c){var f=vt(c);if(l||(f=bt(f,function(v){return nt(EA,v)<0})),!!f.length){s||(s=r.animate(l,t.loop,!0),s.scope="keyframe");for(var p=0;p<d.length;p++)d[p]!==s&&d[p].targetName===s.targetName&&d[p].stopTracks(f);l&&(o[l]=o[l]||{});var g=l?o[l]:o;O(f,function(v){g[v]=((l?r[l]:r)||{})[v]}),s.whenWithKeys(n*u.percent,c,f,u.easing)}}}),s&&s.delay(t.delay||0).duration(n).start(t.easing)}})}}}var Ba="emphasis",Xa="normal",pd="blur",vd="select",ir=[Xa,Ba,pd,vd],is={normal:["itemStyle"],emphasis:[Ba,"itemStyle"],blur:[pd,"itemStyle"],select:[vd,"itemStyle"]},os={normal:["label"],emphasis:[Ba,"label"],blur:[pd,"label"],select:[vd,"label"]},NA=["x","y"],OA="e\0\0",pa={normal:{},emphasis:{},blur:{},select:{}},$A={cartesian2d:yA,geo:_A,single:wA,polar:TA,calendar:CA};function au(r){return r instanceof Tt}function ru(r){return r instanceof Lr}function zA(r,t){t.copyTransform(r),ru(t)&&ru(r)&&(t.setStyle(r.style),t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel,t.invisible=r.invisible,t.ignore=r.ignore,au(t)&&au(r)&&t.setShape(r.shape))}var BA=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,i){this._progressiveEls=null;var o=this._data,l=e.getData(),s=this.group,u=Cp(e,l,a,n);o||s.removeAll(),l.diff(o).add(function(c){ls(n,null,c,u(c,i),e,s,l)}).remove(function(c){var f=o.getItemGraphicEl(c);f&&ol(f,za(f).option,e)}).update(function(c,f){var p=o.getItemGraphicEl(f);ls(n,p,c,u(c,i),e,s,l)}).execute();var d=e.get("clip",!0)?Xo(e.coordinateSystem,!1,e):null;d?s.setClipPath(d):s.removeClipPath(),this._data=l},t.prototype.incrementalPrepareRender=function(e,a,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,a,n,i,o){var l=a.getData(),s=Cp(a,l,n,i),u=this._progressiveEls=[];function d(p){p.isGroup||(p.incremental=!0,p.ensureState("emphasis").hoverLayer=!0)}for(var c=e.start;c<e.end;c++){var f=ls(null,null,c,s(c,o),a,this.group,l);f&&(f.traverse(d),u.push(f))}},t.prototype.eachRendered=function(e){mi(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,a,n,i){var o=a.element;if(o==null||n.name===o)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1},t.type="custom",t}(ut);function gd(r){var t=r.type,e;if(t==="path"){var a=r.shape,n=a.width!=null&&a.height!=null?{x:a.x||0,y:a.y||0,width:a.width,height:a.height}:null,i=uy(a);e=H1(i,null,n,a.layout||"center"),za(e).customPathData=i}else if(t==="image")e=new Ta({}),za(e).customImagePath=r.style.image;else if(t==="text")e=new Xe({});else if(t==="group")e=new xe;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=Jg(t);if(!o){var l="";pt(l)}e=new o}return za(e).customGraphicType=t,e.name=r.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function hd(r,t,e,a,n,i,o){oy(t);var l=n&&n.normal.cfg;l&&t.setTextConfig(l),a&&a.transition==null&&(a.transition=NA);var s=a&&a.style;if(s){if(t.type==="text"){var u=s;le(u,"textFill")&&(u.fill=u.textFill),le(u,"textStroke")&&(u.stroke=u.textStroke)}var d=void 0,c=au(t)?s.decal:null;r&&c&&(c.dirty=!0,d=Uo(c,r)),s.__decalPattern=d}if(ru(t)&&s){var d=s.__decalPattern;d&&(s.decal=d)}to(t,a,i,{dataIndex:e,isInit:o,clearStyle:!0}),wo(t,a.keyframeAnimation,i)}function ly(r,t,e,a,n){var i=t.isGroup?null:t,o=n&&n[r].cfg;if(i){var l=i.ensureState(r);if(a===!1){var s=i.getState(r);s&&(s.style=null)}else l.style=a||null;o&&(l.textConfig=o),pn(i)}}function qA(r,t,e){if(!r.isGroup){var a=r,n=e.currentZ,i=e.currentZLevel;a.z=n,a.zlevel=i;var o=t.z2;o!=null&&(a.z2=o||0);for(var l=0;l<ir.length;l++)GA(a,t,ir[l])}}function GA(r,t,e){var a=e===Xa,n=a?t:xo(t,e),i=n?n.z2:null,o;i!=null&&(o=a?r:r.ensureState(e),o.z2=i||0)}function Cp(r,t,e,a){var n=r.get("renderItem"),i=r.coordinateSystem,o={};i&&(o=i.prepareCustoms?i.prepareCustoms(i):$A[i.type](i));for(var l=Ne({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:T,style:k,ordinalRawValue:C,styleEmphasis:A,visual:D,barLayout:L,currentSeriesIndices:E,font:R},o.api||{}),s={context:{},seriesId:r.id,seriesName:r.name,seriesIndex:r.seriesIndex,coordSys:o.coordSys,dataInsideLength:t.count(),encode:FA(r.getData())},u,d,c={},f={},p={},g={},v=0;v<ir.length;v++){var y=ir[v];p[y]=r.getModel(is[y]),g[y]=r.getModel(os[y])}function _(V){return V===u?d||(d=t.getItemModel(V)):t.getItemModel(V)}function S(V,z){return t.hasItemOption?V===u?c[z]||(c[z]=_(V).getModel(is[z])):_(V).getModel(is[z]):p[z]}function w(V,z){return t.hasItemOption?V===u?f[z]||(f[z]=_(V).getModel(os[z])):_(V).getModel(os[z]):g[z]}return function(V,z){return u=V,d=null,c={},f={},n&&n(Ne({dataIndexInside:V,dataIndex:t.getRawIndex(V),actionType:z?z.type:null},s),l)};function T(V,z){return z==null&&(z=u),t.getStore().get(t.getDimensionIndex(V||0),z)}function C(V,z){z==null&&(z=u),V=V||0;var G=t.getDimensionInfo(V);if(!G){var q=t.getDimensionIndex(V);return q>=0?t.getStore().get(q,z):void 0}var Z=t.get(G.name,z),H=G&&G.ordinalMeta;return H?H.categories[Z]:Z}function k(V,z){z==null&&(z=u);var G=t.getItemVisual(z,"style"),q=G&&G.fill,Z=G&&G.opacity,H=S(z,Xa).getItemStyle();q!=null&&(H.fill=q),Z!=null&&(H.opacity=Z);var F={inheritColor:Re(q)?q:"#000"},re=w(z,Xa),_e=lt(re,null,F,!1,!0);_e.text=re.getShallow("show")?At(r.getFormattedLabel(z,Xa),ei(t,z)):null;var te=nc(re,F,!1);return M(V,H),H=_p(H,_e,te),V&&I(H,V),H.legacy=!0,H}function A(V,z){z==null&&(z=u);var G=S(z,Ba).getItemStyle(),q=w(z,Ba),Z=lt(q,null,null,!0,!0);Z.text=q.getShallow("show")?wi(r.getFormattedLabel(z,Ba),r.getFormattedLabel(z,Xa),ei(t,z)):null;var H=nc(q,null,!0);return M(V,G),G=_p(G,Z,H),V&&I(G,V),G.legacy=!0,G}function I(V,z){for(var G in z)le(z,G)&&(V[G]=z[G])}function M(V,z){V&&(V.textFill&&(z.textFill=V.textFill),V.textPosition&&(z.textPosition=V.textPosition))}function D(V,z){if(z==null&&(z=u),le(yp,V)){var G=t.getItemVisual(z,"style");return G?G[yp[V]]:null}if(le(gA,V))return t.getItemVisual(z,V)}function L(V){if(i.type==="cartesian2d"){var z=i.getBaseAxis();return U1(Ne({axis:z},V))}}function E(){return e.getCurrentSeriesIndices()}function R(V){return Qg(V,e)}}function FA(r){var t={};return O(r.dimensions,function(e){var a=r.getDimensionInfo(e);if(!a.isExtraCoord){var n=a.coordDim,i=t[n]=t[n]||[];i[a.coordDimIndex]=r.getDimensionIndex(e)}}),t}function ls(r,t,e,a,n,i,o){if(!a){i.remove(t);return}var l=md(r,t,e,a,n,i);return l&&o.setItemGraphicEl(e,l),l&&dt(l,a.focus,a.blurScope,a.emphasisDisabled),l}function md(r,t,e,a,n,i){var o=-1,l=t;t&&sy(t,a,n)&&(o=nt(i.childrenRef(),t),t=null);var s=!t,u=t;u?u.clearStates():(u=gd(a),l&&zA(l,u)),a.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),pa.normal.cfg=pa.normal.conOpt=pa.emphasis.cfg=pa.emphasis.conOpt=pa.blur.cfg=pa.blur.conOpt=pa.select.cfg=pa.select.conOpt=null,pa.isLegacy=!1,HA(u,e,a,n,s,pa),UA(u,e,a,n,s),hd(r,u,e,a,pa,n,s),le(a,"info")&&(za(u).info=a.info);for(var d=0;d<ir.length;d++){var c=ir[d];if(c!==Xa){var f=xo(a,c),p=yd(a,f,c);ly(c,u,f,p,pa)}}return qA(u,a,n),a.type==="group"&&WA(r,u,e,a,n),o>=0?i.replaceAt(u,o):i.add(u),u}function sy(r,t,e){var a=za(r),n=t.type,i=t.shape,o=t.style;return e.isUniversalTransitionEnabled()||n!=null&&n!==a.customGraphicType||n==="path"&&XA(i)&&uy(i)!==a.customPathData||n==="image"&&le(o,"image")&&o.image!==a.customImagePath}function UA(r,t,e,a,n){var i=e.clipPath;if(i===!1)r&&r.getClipPath()&&r.removeClipPath();else if(i){var o=r.getClipPath();o&&sy(o,i,a)&&(o=null),o||(o=gd(i),r.setClipPath(o)),hd(null,o,t,i,null,a,n)}}function HA(r,t,e,a,n,i){if(!r.isGroup){kp(e,null,i),kp(e,Ba,i);var o=i.normal.conOpt,l=i.emphasis.conOpt,s=i.blur.conOpt,u=i.select.conOpt;if(o!=null||l!=null||u!=null||s!=null){var d=r.getTextContent();if(o===!1)d&&r.removeTextContent();else{o=i.normal.conOpt=o||{type:"text"},d?d.clearStates():(d=gd(o),r.setTextContent(d)),hd(null,d,t,o,null,a,n);for(var c=o&&o.style,f=0;f<ir.length;f++){var p=ir[f];if(p!==Xa){var g=i[p].conOpt;ly(p,d,g,yd(o,g,p),null)}}c?d.dirty():d.markRedraw()}}}}function kp(r,t,e){var a=t?xo(r,t):r,n=t?yd(r,a,Ba):r.style,i=r.type,o=a?a.textConfig:null,l=r.textContent,s=l?t?xo(l,t):l:null;if(n&&(e.isLegacy||ty(n,i,!!o,!!s))){e.isLegacy=!0;var u=ay(n,i,!t);!o&&u.textConfig&&(o=u.textConfig),!s&&u.textContent&&(s=u.textContent)}if(!t&&s){var d=s;!d.type&&(d.type="text")}var c=t?e[t]:e.normal;c.cfg=o,c.conOpt=s}function xo(r,t){return t?r?r[t]:null:r}function yd(r,t,e){var a=t&&t.style;return a==null&&e===Ba&&r&&(a=r.styleEmphasis),a}function WA(r,t,e,a,n){var i=a.children,o=i?i.length:0,l=a.$mergeChildren,s=l==="byName"||a.diffChildrenByName,u=l===!1;if(!(!o&&!s&&!u)){if(s){jA({api:r,oldChildren:t.children()||[],newChildren:i||[],dataIndex:e,seriesModel:n,group:t});return}u&&t.removeAll();for(var d=0;d<o;d++){var c=i[d],f=t.childAt(d);c?(c.ignore==null&&(c.ignore=!1),md(r,f,e,c,n,t)):f.ignore=!0}for(var p=t.childCount()-1;p>=d;p--){var g=t.childAt(p);YA(t,g,n)}}}function YA(r,t,e){t&&ol(t,za(r).option,e)}function jA(r){new rr(r.oldChildren,r.newChildren,Ap,Ap,r).add(Ip).update(Ip).remove(ZA).execute()}function Ap(r,t){var e=r&&r.name;return e??OA+t}function Ip(r,t){var e=this.context,a=r!=null?e.newChildren[r]:null,n=t!=null?e.oldChildren[t]:null;md(e.api,n,e.dataIndex,a,e.seriesModel,e.group)}function ZA(r){var t=this.context,e=t.oldChildren[r];e&&ol(e,za(e).option,t.seriesModel)}function uy(r){return r&&(r.pathData||r.d)}function XA(r){return r&&(le(r,"pathData")||le(r,"d"))}function KA(r){r.registerChartView(BA),r.registerSeriesModel(hA)}var QA=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,a,n,i,o){var l=n.axis;l.dim==="angle"&&(this.animationThreshold=Math.PI/18);var s=l.polar,u=s.getOtherAxis(l),d=u.getExtent(),c=l.dataToCoord(a),f=i.get("type");if(f&&f!=="none"){var p=eh(i),g=eI[f](l,s,c,d);g.style=p,e.graphicKey=g.type,e.pointer=g}var v=i.get(["label","margin"]),y=JA(a,n,i,s,v);W1(e,n,i,o,y)},t}(th);function JA(r,t,e,a,n){var i=t.axis,o=i.dataToCoord(r),l=a.getAngleAxis().getExtent()[0];l=l/180*Math.PI;var s=a.getRadiusAxis().getExtent(),u,d,c;if(i.dim==="radius"){var f=Cn();Fo(f,f,l),Pr(f,f,[a.cx,a.cy]),u=Ja([o,-n],f);var p=t.getModel("axisLabel").get("rotate")||0,g=Dr.innerTextLayout(l,p*Math.PI/180,-1);d=g.textAlign,c=g.textVerticalAlign}else{var v=s[1];u=a.coordToPoint([v+n,o]);var y=a.cx,_=a.cy;d=Math.abs(u[0]-y)/v<.3?"center":u[0]>y?"left":"right",c=Math.abs(u[1]-_)/v<.3?"middle":u[1]>_?"top":"bottom"}return{position:u,align:d,verticalAlign:c}}var eI={line:function(r,t,e,a){return r.dim==="angle"?{type:"Line",shape:ah(t.coordToPoint([a[0],e]),t.coordToPoint([a[1],e]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:e}}},shadow:function(r,t,e,a){var n=Math.max(1,r.getBandWidth()),i=Math.PI/180;return r.dim==="angle"?{type:"Sector",shape:ic(t.cx,t.cy,a[0],a[1],(-e-n/2)*i,(-e+n/2)*i)}:{type:"Sector",shape:ic(t.cx,t.cy,e-n/2,e+n/2,0,Math.PI*2)}}},tI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.findAxisModel=function(e){var a,n=this.ecModel;return n.eachComponent(e,function(i){i.getCoordSysModel()===this&&(a=i)},this),a},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(zt),bd=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",La).models[0]},t.type="polarAxis",t}(zt);Ca(bd,Bo);var aI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="angleAxis",t}(bd),rI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="radiusAxis",t}(bd),_d=function(r){W(t,r);function t(e,a){return r.call(this,"radius",e,a)||this}return t.prototype.pointToData=function(e,a){return this.polar.pointToData(e,a)[this.dim==="radius"?0:1]},t}(Ra);_d.prototype.dataToRadius=Ra.prototype.dataToCoord;_d.prototype.radiusToData=Ra.prototype.coordToData;var nI=ht(),Sd=function(r){W(t,r);function t(e,a){return r.call(this,"angle",e,a||[0,360])||this}return t.prototype.pointToData=function(e,a){return this.polar.pointToData(e,a)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var e=this,a=e.getLabelModel(),n=e.scale,i=n.getExtent(),o=n.count();if(i[1]-i[0]<1)return 0;var l=i[0],s=e.dataToCoord(l+1)-e.dataToCoord(l),u=Math.abs(s),d=rh(l==null?"":l+"",a.getFont(),"center","top"),c=Math.max(d.height,7),f=c/u;isNaN(f)&&(f=1/0);var p=Math.max(0,Math.floor(f)),g=nI(e.model),v=g.lastAutoInterval,y=g.lastTickCount;return v!=null&&y!=null&&Math.abs(v-p)<=1&&Math.abs(y-o)<=1&&v>p?p=v:(g.lastTickCount=o,g.lastAutoInterval=p),p},t}(Ra);Sd.prototype.dataToAngle=Ra.prototype.dataToCoord;Sd.prototype.angleToData=Ra.prototype.coordToData;var dy=["radius","angle"],iI=function(){function r(t){this.dimensions=dy,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new _d,this._angleAxis=new Sd,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return r.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},r.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},r.prototype.getAxis=function(t){var e="_"+t+"Axis";return this[e]},r.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},r.prototype.getAxesByScale=function(t){var e=[],a=this._angleAxis,n=this._radiusAxis;return a.scale.type===t&&e.push(a),n.scale.type===t&&e.push(n),e},r.prototype.getAngleAxis=function(){return this._angleAxis},r.prototype.getRadiusAxis=function(){return this._radiusAxis},r.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},r.prototype.getTooltipAxes=function(t){var e=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},r.prototype.dataToPoint=function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},r.prototype.pointToData=function(t,e){var a=this.pointToCoord(t);return[this._radiusAxis.radiusToData(a[0],e),this._angleAxis.angleToData(a[1],e)]},r.prototype.pointToCoord=function(t){var e=t[0]-this.cx,a=t[1]-this.cy,n=this.getAngleAxis(),i=n.getExtent(),o=Math.min(i[0],i[1]),l=Math.max(i[0],i[1]);n.inverse?o=l-360:l=o+360;var s=Math.sqrt(e*e+a*a);e/=s,a/=s;for(var u=Math.atan2(-a,e)/Math.PI*180,d=u<o?1:-1;u<o||u>l;)u+=d*360;return[s,u]},r.prototype.coordToPoint=function(t){var e=t[0],a=t[1]/180*Math.PI,n=Math.cos(a)*e+this.cx,i=-Math.sin(a)*e+this.cy;return[n,i]},r.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis(),a=e.getExtent().slice();a[0]>a[1]&&a.reverse();var n=t.getExtent(),i=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:a[0],r:a[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:t.inverse,contain:function(o,l){var s=o-this.cx,u=l-this.cy,d=s*s+u*u-1e-4,c=this.r,f=this.r0;return d<=c*c&&d>=f*f}}},r.prototype.convertToPixel=function(t,e,a){var n=Dp(e);return n===this?this.dataToPoint(a):null},r.prototype.convertFromPixel=function(t,e,a){var n=Dp(e);return n===this?this.pointToData(a):null},r}();function Dp(r){var t=r.seriesModel,e=r.polarModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}function oI(r,t,e){var a=t.get("center"),n=e.getWidth(),i=e.getHeight();r.cx=de(a[0],n),r.cy=de(a[1],i);var o=r.getRadiusAxis(),l=Math.min(n,i)/2,s=t.get("radius");s==null?s=[0,"100%"]:ge(s)||(s=[0,s]);var u=[de(s[0],l),de(s[1],l)];o.inverse?o.setExtent(u[1],u[0]):o.setExtent(u[0],u[1])}function lI(r,t){var e=this,a=e.getAngleAxis(),n=e.getRadiusAxis();if(a.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),r.eachSeries(function(l){if(l.coordinateSystem===e){var s=l.getData();O(oc(s,"radius"),function(u){n.scale.unionExtentFromData(s,u)}),O(oc(s,"angle"),function(u){a.scale.unionExtentFromData(s,u)})}}),lo(a.scale,a.model),lo(n.scale,n.model),a.type==="category"&&!a.onBand){var i=a.getExtent(),o=360/a.scale.count();a.inverse?i[1]+=o:i[1]-=o,a.setExtent(i[0],i[1])}}function sI(r){return r.mainType==="angleAxis"}function Mp(r,t){var e;if(r.type=t.get("type"),r.scale=Cu(t),r.onBand=t.get("boundaryGap")&&r.type==="category",r.inverse=t.get("inverse"),sI(t)){r.inverse=r.inverse!==t.get("clockwise");var a=t.get("startAngle"),n=(e=t.get("endAngle"))!==null&&e!==void 0?e:a+(r.inverse?-360:360);r.setExtent(a,n)}t.axis=r,r.model=t}var uI={dimensions:dy,create:function(r,t){var e=[];return r.eachComponent("polar",function(a,n){var i=new iI(n+"");i.update=lI;var o=i.getRadiusAxis(),l=i.getAngleAxis(),s=a.findAxisModel("radiusAxis"),u=a.findAxisModel("angleAxis");Mp(o,s),Mp(l,u),oI(i,a,t),e.push(i),a.coordinateSystem=i,i.model=a}),r.eachSeries(function(a){if(a.get("coordinateSystem")==="polar"){var n=a.getReferringComponents("polar",La).models[0];a.coordinateSystem=n.coordinateSystem}}),e}},dI=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Ui(r,t,e){t[1]>t[0]&&(t=t.slice().reverse());var a=r.coordToPoint([t[0],e]),n=r.coordToPoint([t[1],e]);return{x1:a[0],y1:a[1],x2:n[0],y2:n[1]}}function Hi(r){var t=r.getRadiusAxis();return t.inverse?0:1}function Pp(r){var t=r[0],e=r[r.length-1];t&&e&&Math.abs(Math.abs(t.coord-e.coord)-360)<1e-4&&r.pop()}var cI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return t.prototype.render=function(e,a){if(this.group.removeAll(),!!e.get("show")){var n=e.axis,i=n.polar,o=i.getRadiusAxis().getExtent(),l=n.getTicksCoords(),s=n.getMinorTicksCoords(),u=ne(n.getViewLabels(),function(d){d=Fe(d);var c=n.scale,f=c.type==="ordinal"?c.getRawOrdinalNumber(d.tickValue):d.tickValue;return d.coord=n.dataToCoord(f),d});Pp(u),Pp(l),O(dI,function(d){e.get([d,"show"])&&(!n.scale.isBlank()||d==="axisLine")&&fI[d](this.group,e,i,l,s,o,u)},this)}},t.type="angleAxis",t}(Ci),fI={axisLine:function(r,t,e,a,n,i){var o=t.getModel(["axisLine","lineStyle"]),l=e.getAngleAxis(),s=Math.PI/180,u=l.getExtent(),d=Hi(e),c=d?0:1,f,p=Math.abs(u[1]-u[0])===360?"Circle":"Arc";i[c]===0?f=new Tn[p]({shape:{cx:e.cx,cy:e.cy,r:i[d],startAngle:-u[0]*s,endAngle:-u[1]*s,clockwise:l.inverse},style:o.getLineStyle(),z2:1,silent:!0}):f=new Ng({shape:{cx:e.cx,cy:e.cy,r:i[d],r0:i[c]},style:o.getLineStyle(),z2:1,silent:!0}),f.style.fill=null,r.add(f)},axisTick:function(r,t,e,a,n,i){var o=t.getModel("axisTick"),l=(o.get("inside")?-1:1)*o.get("length"),s=i[Hi(e)],u=ne(a,function(d){return new xa({shape:Ui(e,[s,s+l],d.coord)})});r.add(wa(u,{style:Ne(o.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(r,t,e,a,n,i){if(n.length){for(var o=t.getModel("axisTick"),l=t.getModel("minorTick"),s=(o.get("inside")?-1:1)*l.get("length"),u=i[Hi(e)],d=[],c=0;c<n.length;c++)for(var f=0;f<n[c].length;f++)d.push(new xa({shape:Ui(e,[u,u+s],n[c][f].coord)}));r.add(wa(d,{style:Ne(l.getModel("lineStyle").getLineStyle(),Ne(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(r,t,e,a,n,i,o){var l=t.getCategories(!0),s=t.getModel("axisLabel"),u=s.get("margin"),d=t.get("triggerEvent");O(o,function(c,f){var p=s,g=c.tickValue,v=i[Hi(e)],y=e.coordToPoint([v+u,c.coord]),_=e.cx,S=e.cy,w=Math.abs(y[0]-_)/v<.3?"center":y[0]>_?"left":"right",T=Math.abs(y[1]-S)/v<.3?"middle":y[1]>S?"top":"bottom";if(l&&l[g]){var C=l[g];Nt(C)&&C.textStyle&&(p=new na(C.textStyle,s,s.ecModel))}var k=new Xe({silent:Dr.isLabelSilent(t),style:lt(p,{x:y[0],y:y[1],fill:p.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:c.formattedLabel,align:w,verticalAlign:T})});if(r.add(k),d){var A=Dr.makeAxisEventDataBase(t);A.targetType="axisLabel",A.value=c.rawLabel,qe(k).eventData=A}},this)},splitLine:function(r,t,e,a,n,i){var o=t.getModel("splitLine"),l=o.getModel("lineStyle"),s=l.get("color"),u=0;s=s instanceof Array?s:[s];for(var d=[],c=0;c<a.length;c++){var f=u++%s.length;d[f]=d[f]||[],d[f].push(new xa({shape:Ui(e,i,a[c].coord)}))}for(var c=0;c<d.length;c++)r.add(wa(d[c],{style:Ne({stroke:s[c%s.length]},l.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(r,t,e,a,n,i){if(n.length){for(var o=t.getModel("minorSplitLine"),l=o.getModel("lineStyle"),s=[],u=0;u<n.length;u++)for(var d=0;d<n[u].length;d++)s.push(new xa({shape:Ui(e,i,n[u][d].coord)}));r.add(wa(s,{style:l.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(r,t,e,a,n,i){if(a.length){var o=t.getModel("splitArea"),l=o.getModel("areaStyle"),s=l.get("color"),u=0;s=s instanceof Array?s:[s];for(var d=[],c=Math.PI/180,f=-a[0].coord*c,p=Math.min(i[0],i[1]),g=Math.max(i[0],i[1]),v=t.get("clockwise"),y=1,_=a.length;y<=_;y++){var S=y===_?a[0].coord:a[y].coord,w=u++%s.length;d[w]=d[w]||[],d[w].push(new Vr({shape:{cx:e.cx,cy:e.cy,r0:p,r:g,startAngle:f,endAngle:-S*c,clockwise:v},silent:!0})),f=-S*c}for(var y=0;y<d.length;y++)r.add(wa(d[y],{style:Ne({fill:s[y%s.length]},l.getAreaStyle()),silent:!0}))}}},pI=["axisLine","axisTickLabel","axisName"],vI=["splitLine","splitArea","minorSplitLine"],gI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return t.prototype.render=function(e,a){if(this.group.removeAll(),!!e.get("show")){var n=this._axisGroup,i=this._axisGroup=new xe;this.group.add(i);var o=e.axis,l=o.polar,s=l.getAngleAxis(),u=o.getTicksCoords(),d=o.getMinorTicksCoords(),c=s.getExtent()[0],f=o.getExtent(),p=mI(l,e,c),g=new Dr(e,p);O(pI,g.add,g),i.add(g.getGroup()),Au(n,i,e),O(vI,function(v){e.get([v,"show"])&&!o.scale.isBlank()&&hI[v](this.group,e,l,c,f,u,d)},this)}},t.type="radiusAxis",t}(Ci),hI={splitLine:function(r,t,e,a,n,i){var o=t.getModel("splitLine"),l=o.getModel("lineStyle"),s=l.get("color"),u=0,d=e.getAngleAxis(),c=Math.PI/180,f=d.getExtent(),p=Math.abs(f[1]-f[0])===360?"Circle":"Arc";s=s instanceof Array?s:[s];for(var g=[],v=0;v<i.length;v++){var y=u++%s.length;g[y]=g[y]||[],g[y].push(new Tn[p]({shape:{cx:e.cx,cy:e.cy,r:Math.max(i[v].coord,0),startAngle:-f[0]*c,endAngle:-f[1]*c,clockwise:d.inverse}}))}for(var v=0;v<g.length;v++)r.add(wa(g[v],{style:Ne({stroke:s[v%s.length],fill:null},l.getLineStyle()),silent:!0}))},minorSplitLine:function(r,t,e,a,n,i,o){if(o.length){for(var l=t.getModel("minorSplitLine"),s=l.getModel("lineStyle"),u=[],d=0;d<o.length;d++)for(var c=0;c<o[d].length;c++)u.push(new _i({shape:{cx:e.cx,cy:e.cy,r:o[d][c].coord}}));r.add(wa(u,{style:Ne({fill:null},s.getLineStyle()),silent:!0}))}},splitArea:function(r,t,e,a,n,i){if(i.length){var o=t.getModel("splitArea"),l=o.getModel("areaStyle"),s=l.get("color"),u=0;s=s instanceof Array?s:[s];for(var d=[],c=i[0].coord,f=1;f<i.length;f++){var p=u++%s.length;d[p]=d[p]||[],d[p].push(new Vr({shape:{cx:e.cx,cy:e.cy,r0:c,r:i[f].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),c=i[f].coord}for(var f=0;f<d.length;f++)r.add(wa(d[f],{style:Ne({fill:s[f%s.length]},l.getAreaStyle()),silent:!0}))}}};function mI(r,t,e){return{position:[r.cx,r.cy],rotation:e/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}function cy(r){return r.get("stack")||"__ec_stack_"+r.seriesIndex}function fy(r,t){return t.dim+r.model.componentIndex}function yI(r,t,e){var a={},n=bI(bt(t.getSeriesByType(r),function(i){return!t.isSeriesFiltered(i)&&i.coordinateSystem&&i.coordinateSystem.type==="polar"}));t.eachSeriesByType(r,function(i){if(i.coordinateSystem.type==="polar"){var o=i.getData(),l=i.coordinateSystem,s=l.getBaseAxis(),u=fy(l,s),d=cy(i),c=n[u][d],f=c.offset,p=c.width,g=l.getOtherAxis(s),v=i.coordinateSystem.cx,y=i.coordinateSystem.cy,_=i.get("barMinHeight")||0,S=i.get("barMinAngle")||0;a[d]=a[d]||[];for(var w=o.mapDimension(g.dim),T=o.mapDimension(s.dim),C=fn(o,w),k=s.dim!=="radius"||!i.get("roundCap",!0),A=g.model,I=A.get("startValue"),M=g.dataToCoord(I||0),D=0,L=o.count();D<L;D++){var E=o.get(w,D),R=o.get(T,D),V=E>=0?"p":"n",z=M;C&&(a[d][R]||(a[d][R]={p:M,n:M}),z=a[d][R][V]);var G=void 0,q=void 0,Z=void 0,H=void 0;if(g.dim==="radius"){var F=g.dataToCoord(E)-M,re=s.dataToCoord(R);Math.abs(F)<_&&(F=(F<0?-1:1)*_),G=z,q=z+F,Z=re-f,H=Z-p,C&&(a[d][R][V]=q)}else{var _e=g.dataToCoord(E,k)-M,te=s.dataToCoord(R);Math.abs(_e)<S&&(_e=(_e<0?-1:1)*S),G=te+f,q=G+p,Z=z,H=z+_e,C&&(a[d][R][V]=H)}o.setItemLayout(D,{cx:v,cy:y,r0:G,r:q,startAngle:-Z*Math.PI/180,endAngle:-H*Math.PI/180,clockwise:Z>=H})}}})}function bI(r){var t={};O(r,function(a,n){var i=a.getData(),o=a.coordinateSystem,l=o.getBaseAxis(),s=fy(o,l),u=l.getExtent(),d=l.type==="category"?l.getBandWidth():Math.abs(u[1]-u[0])/i.count(),c=t[s]||{bandWidth:d,remainedWidth:d,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},f=c.stacks;t[s]=c;var p=cy(a);f[p]||c.autoWidthCount++,f[p]=f[p]||{width:0,maxWidth:0};var g=de(a.get("barWidth"),d),v=de(a.get("barMaxWidth"),d),y=a.get("barGap"),_=a.get("barCategoryGap");g&&!f[p].width&&(g=Math.min(c.remainedWidth,g),f[p].width=g,c.remainedWidth-=g),v&&(f[p].maxWidth=v),y!=null&&(c.gap=y),_!=null&&(c.categoryGap=_)});var e={};return O(t,function(a,n){e[n]={};var i=a.stacks,o=a.bandWidth,l=de(a.categoryGap,o),s=de(a.gap,1),u=a.remainedWidth,d=a.autoWidthCount,c=(u-l)/(d+(d-1)*s);c=Math.max(c,0),O(i,function(v,y){var _=v.maxWidth;_&&_<c&&(_=Math.min(_,u),v.width&&(_=Math.min(_,v.width)),u-=_,v.width=_,d--)}),c=(u-l)/(d+(d-1)*s),c=Math.max(c,0);var f=0,p;O(i,function(v,y){v.width||(v.width=c),p=v,f+=v.width*(1+s)}),p&&(f-=p.width*s);var g=-f/2;O(i,function(v,y){e[n][y]=e[n][y]||{offset:g,width:v.width},g+=v.width*(1+s)})}),e}var _I={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},SI={splitNumber:5},wI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="polar",t}(Ut);function xI(r){De(Iu),Ci.registerAxisPointerClass("PolarAxisPointer",QA),r.registerCoordinateSystem("polar",uI),r.registerComponentModel(tI),r.registerComponentView(wI),so(r,"angle",aI,_I),so(r,"radius",rI,SI),r.registerComponentView(cI),r.registerComponentView(gI),r.registerLayout(Ve(yI,"bar"))}function nu(r,t){t=t||{};var e=r.coordinateSystem,a=r.axis,n={},i=a.position,o=a.orient,l=e.getRect(),s=[l.x,l.x+l.width,l.y,l.y+l.height],u={horizontal:{top:s[2],bottom:s[3]},vertical:{left:s[0],right:s[1]}};n.position=[o==="vertical"?u.vertical[i]:s[0],o==="horizontal"?u.horizontal[i]:s[3]];var d={horizontal:0,vertical:1};n.rotation=Math.PI/2*d[o];var c={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=c[i],r.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),ua(t.labelInside,r.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var f=t.rotate;return f==null&&(f=r.get(["axisLabel","rotate"])),n.labelRotation=i==="top"?-f:f,n.z2=1,n}var TI=["axisLine","axisTickLabel","axisName"],CI=["splitArea","splitLine"],kI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="SingleAxisPointer",e}return t.prototype.render=function(e,a,n,i){var o=this.group;o.removeAll();var l=this._axisGroup;this._axisGroup=new xe;var s=nu(e),u=new Dr(e,s);O(TI,u.add,u),o.add(this._axisGroup),o.add(u.getGroup()),O(CI,function(d){e.get([d,"show"])&&AI[d](this,this.group,this._axisGroup,e)},this),Au(l,this._axisGroup,e),r.prototype.render.call(this,e,a,n,i)},t.prototype.remove=function(){Y1(this)},t.type="singleAxis",t}(Ci),AI={splitLine:function(r,t,e,a){var n=a.axis;if(!n.scale.isBlank()){var i=a.getModel("splitLine"),o=i.getModel("lineStyle"),l=o.get("color");l=l instanceof Array?l:[l];for(var s=o.get("width"),u=a.coordinateSystem.getRect(),d=n.isHorizontal(),c=[],f=0,p=n.getTicksCoords({tickModel:i}),g=[],v=[],y=0;y<p.length;++y){var _=n.toGlobalCoord(p[y].coord);d?(g[0]=_,g[1]=u.y,v[0]=_,v[1]=u.y+u.height):(g[0]=u.x,g[1]=_,v[0]=u.x+u.width,v[1]=_);var S=new xa({shape:{x1:g[0],y1:g[1],x2:v[0],y2:v[1]},silent:!0});Z1(S.shape,s);var w=f++%l.length;c[w]=c[w]||[],c[w].push(S)}for(var T=o.getLineStyle(["color"]),y=0;y<c.length;++y)t.add(wa(c[y],{style:Ne({stroke:l[y%l.length]},T),silent:!0}))}},splitArea:function(r,t,e,a){j1(r,e,a,a)}},ao=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(zt);Ca(ao,Bo.prototype);var II=function(r){W(t,r);function t(e,a,n,i,o){var l=r.call(this,e,a,n)||this;return l.type=i||"value",l.position=o||"bottom",l}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.pointToData=function(e,a){return this.coordinateSystem.pointToData(e)[0]},t}(Ra),py=["single"],DI=function(){function r(t,e,a){this.type="single",this.dimension="single",this.dimensions=py,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,a)}return r.prototype._init=function(t,e,a){var n=this.dimension,i=new II(n,Cu(t),[0,0],t.get("type"),t.get("position")),o=i.type==="category";i.onBand=o&&t.get("boundaryGap"),i.inverse=t.get("inverse"),i.orient=t.get("orient"),t.axis=i,i.model=t,i.coordinateSystem=this,this._axis=i},r.prototype.update=function(t,e){t.eachSeries(function(a){if(a.coordinateSystem===this){var n=a.getData();O(n.mapDimensionsAll(this.dimension),function(i){this._axis.scale.unionExtentFromData(n,i)},this),lo(this._axis.scale,this._axis.model)}},this)},r.prototype.resize=function(t,e){this._rect=Kt({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},r.prototype.getRect=function(){return this._rect},r.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,a=e.isHorizontal(),n=a?[0,t.width]:[0,t.height],i=e.inverse?1:0;e.setExtent(n[i],n[1-i]),this._updateAxisTransform(e,a?t.x:t.y)},r.prototype._updateAxisTransform=function(t,e){var a=t.getExtent(),n=a[0]+a[1],i=t.isHorizontal();t.toGlobalCoord=i?function(o){return o+e}:function(o){return n-o+e},t.toLocalCoord=i?function(o){return o-e}:function(o){return n-o+e}},r.prototype.getAxis=function(){return this._axis},r.prototype.getBaseAxis=function(){return this._axis},r.prototype.getAxes=function(){return[this._axis]},r.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},r.prototype.containPoint=function(t){var e=this.getRect(),a=this.getAxis(),n=a.orient;return n==="horizontal"?a.contain(a.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:a.contain(a.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},r.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t[e.orient==="horizontal"?0:1]))]},r.prototype.dataToPoint=function(t){var e=this.getAxis(),a=this.getRect(),n=[],i=e.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),n[i]=e.toGlobalCoord(e.dataToCoord(+t)),n[1-i]=i===0?a.y+a.height/2:a.x+a.width/2,n},r.prototype.convertToPixel=function(t,e,a){var n=Lp(e);return n===this?this.dataToPoint(a):null},r.prototype.convertFromPixel=function(t,e,a){var n=Lp(e);return n===this?this.pointToData(a):null},r}();function Lp(r){var t=r.seriesModel,e=r.singleAxisModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}function MI(r,t){var e=[];return r.eachComponent("singleAxis",function(a,n){var i=new DI(a,r,t);i.name="single_"+n,i.resize(a,t),a.coordinateSystem=i,e.push(i)}),r.eachSeries(function(a){if(a.get("coordinateSystem")==="singleAxis"){var n=a.getReferringComponents("singleAxis",La).models[0];a.coordinateSystem=n&&n.coordinateSystem}}),e}var PI={create:MI,dimensions:py},Vp=["x","y"],LI=["width","height"],VI=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,a,n,i,o){var l=n.axis,s=l.coordinateSystem,u=ss(s,1-To(l)),d=s.dataToPoint(a)[0],c=i.get("type");if(c&&c!=="none"){var f=eh(i),p=RI[c](l,d,u);p.style=f,e.graphicKey=p.type,e.pointer=p}var g=nu(n);X1(a,e,g,n,i,o)},t.prototype.getHandleTransform=function(e,a,n){var i=nu(a,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var o=K1(a.axis,e,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,a,n,i){var o=n.axis,l=o.coordinateSystem,s=To(o),u=ss(l,s),d=[e.x,e.y];d[s]+=a[s],d[s]=Math.min(u[1],d[s]),d[s]=Math.max(u[0],d[s]);var c=ss(l,1-s),f=(c[1]+c[0])/2,p=[f,f];return p[s]=d[s],{x:d[0],y:d[1],rotation:e.rotation,cursorPoint:p,tooltipOption:{verticalAlign:"middle"}}},t}(th),RI={line:function(r,t,e){var a=ah([t,e[0]],[t,e[1]],To(r));return{type:"Line",subPixelOptimize:!0,shape:a}},shadow:function(r,t,e){var a=r.getBandWidth(),n=e[1]-e[0];return{type:"Rect",shape:Q1([t-a/2,e[0]],[a,n],To(r))}}};function To(r){return r.isHorizontal()?0:1}function ss(r,t){var e=r.getRect();return[e[Vp[t]],e[Vp[t]]+e[LI[t]]]}var EI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="single",t}(Ut);function NI(r){De(Iu),Ci.registerAxisPointerClass("SingleAxisPointer",VI),r.registerComponentView(EI),r.registerComponentView(kI),r.registerComponentModel(ao),so(r,"single",ao,ao.defaultOption),r.registerCoordinateSystem("single",PI)}var OI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a,n){var i=Du(e);r.prototype.init.apply(this,arguments),Rp(e,i)},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),Rp(this.option,e)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(zt);function Rp(r,t){var e=r.cellSize,a;ge(e)?a=e:a=r.cellSize=[e,e],a.length===1&&(a[1]=a[0]);var n=ne([0,1],function(i){return J1(t,i)&&(a[i]="auto"),a[i]!=null&&a[i]!=="auto"});Mu(r,t,{type:"box",ignoreSize:n})}var $I=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=this.group;i.removeAll();var o=e.coordinateSystem,l=o.getRangeInfo(),s=o.getOrient(),u=a.getLocaleModel();this._renderDayRect(e,l,i),this._renderLines(e,l,s,i),this._renderYearText(e,l,s,i),this._renderMonthText(e,u,s,i),this._renderWeekText(e,u,l,s,i)},t.prototype._renderDayRect=function(e,a,n){for(var i=e.coordinateSystem,o=e.getModel("itemStyle").getItemStyle(),l=i.getCellWidth(),s=i.getCellHeight(),u=a.start.time;u<=a.end.time;u=i.getNextNDay(u,1).time){var d=i.dataToRect([u],!1).tl,c=new et({shape:{x:d[0],y:d[1],width:l,height:s},cursor:"default",style:o});n.add(c)}},t.prototype._renderLines=function(e,a,n,i){var o=this,l=e.coordinateSystem,s=e.getModel(["splitLine","lineStyle"]).getLineStyle(),u=e.get(["splitLine","show"]),d=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=a.start,f=0;c.time<=a.end.time;f++){g(c.formatedDate),f===0&&(c=l.getDateInfo(a.start.y+"-"+a.start.m));var p=c.date;p.setMonth(p.getMonth()+1),c=l.getDateInfo(p)}g(l.getNextNDay(a.end.time,1).formatedDate);function g(v){o._firstDayOfMonth.push(l.getDateInfo(v)),o._firstDayPoints.push(l.dataToRect([v],!1).tl);var y=o._getLinePointsOfOneWeek(e,v,n);o._tlpoints.push(y[0]),o._blpoints.push(y[y.length-1]),u&&o._drawSplitline(y,s,i)}u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,d,n),s,i),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,d,n),s,i)},t.prototype._getEdgesPoints=function(e,a,n){var i=[e[0].slice(),e[e.length-1].slice()],o=n==="horizontal"?0:1;return i[0][o]=i[0][o]-a/2,i[1][o]=i[1][o]+a/2,i},t.prototype._drawSplitline=function(e,a,n){var i=new Va({z2:20,shape:{points:e},style:a});n.add(i)},t.prototype._getLinePointsOfOneWeek=function(e,a,n){for(var i=e.coordinateSystem,o=i.getDateInfo(a),l=[],s=0;s<7;s++){var u=i.getNextNDay(o.time,s),d=i.dataToRect([u.time],!1);l[2*u.day]=d.tl,l[2*u.day+1]=d[n==="horizontal"?"bl":"tr"]}return l},t.prototype._formatterLabel=function(e,a){return Re(e)&&e?eb(e,a):Be(e)?e(a):a.nameMap},t.prototype._yearTextPositionControl=function(e,a,n,i,o){var l=a[0],s=a[1],u=["center","bottom"];i==="bottom"?(s+=o,u=["center","top"]):i==="left"?l-=o:i==="right"?(l+=o,u=["center","top"]):s-=o;var d=0;return(i==="left"||i==="right")&&(d=Math.PI/2),{rotation:d,x:l,y:s,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(e,a,n,i){var o=e.getModel("yearLabel");if(o.get("show")){var l=o.get("margin"),s=o.get("position");s||(s=n!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],d=(u[0][0]+u[1][0])/2,c=(u[0][1]+u[1][1])/2,f=n==="horizontal"?0:1,p={top:[d,u[f][1]],bottom:[d,u[1-f][1]],left:[u[1-f][0],c],right:[u[f][0],c]},g=a.start.y;+a.end.y>+a.start.y&&(g=g+"-"+a.end.y);var v=o.get("formatter"),y={start:a.start.y,end:a.end.y,nameMap:g},_=this._formatterLabel(v,y),S=new Xe({z2:30,style:lt(o,{text:_})});S.attr(this._yearTextPositionControl(S,p[s],n,s,l)),i.add(S)}},t.prototype._monthTextPositionControl=function(e,a,n,i,o){var l="left",s="top",u=e[0],d=e[1];return n==="horizontal"?(d=d+o,a&&(l="center"),i==="start"&&(s="bottom")):(u=u+o,a&&(s="middle"),i==="start"&&(l="right")),{x:u,y:d,align:l,verticalAlign:s}},t.prototype._renderMonthText=function(e,a,n,i){var o=e.getModel("monthLabel");if(o.get("show")){var l=o.get("nameMap"),s=o.get("margin"),u=o.get("position"),d=o.get("align"),c=[this._tlpoints,this._blpoints];(!l||Re(l))&&(l&&(a=lc(l)||a),l=a.get(["time","monthAbbr"])||[]);var f=u==="start"?0:1,p=n==="horizontal"?0:1;s=u==="start"?-s:s;for(var g=d==="center",v=0;v<c[f].length-1;v++){var y=c[f][v].slice(),_=this._firstDayOfMonth[v];if(g){var S=this._firstDayPoints[v];y[p]=(S[p]+c[0][v+1][p])/2}var w=o.get("formatter"),T=l[+_.m-1],C={yyyy:_.y,yy:(_.y+"").slice(2),MM:_.m,M:+_.m,nameMap:T},k=this._formatterLabel(w,C),A=new Xe({z2:30,style:be(lt(o,{text:k}),this._monthTextPositionControl(y,g,n,u,s))});i.add(A)}}},t.prototype._weekTextPositionControl=function(e,a,n,i,o){var l="center",s="middle",u=e[0],d=e[1],c=n==="start";return a==="horizontal"?(u=u+i+(c?1:-1)*o[0]/2,l=c?"right":"left"):(d=d+i+(c?1:-1)*o[1]/2,s=c?"bottom":"top"),{x:u,y:d,align:l,verticalAlign:s}},t.prototype._renderWeekText=function(e,a,n,i,o){var l=e.getModel("dayLabel");if(l.get("show")){var s=e.coordinateSystem,u=l.get("position"),d=l.get("nameMap"),c=l.get("margin"),f=s.getFirstDayOfWeek();if(!d||Re(d)){d&&(a=lc(d)||a);var p=a.get(["time","dayOfWeekShort"]);d=p||ne(a.get(["time","dayOfWeekAbbr"]),function(C){return C[0]})}var g=s.getNextNDay(n.end.time,7-n.lweek).time,v=[s.getCellWidth(),s.getCellHeight()];c=de(c,Math.min(v[1],v[0])),u==="start"&&(g=s.getNextNDay(n.start.time,-(7+n.fweek)).time,c=-c);for(var y=0;y<7;y++){var _=s.getNextNDay(g,y),S=s.dataToRect([_.time],!1).center,w=y;w=Math.abs((y+f)%7);var T=new Xe({z2:30,style:be(lt(l,{text:d[w]}),this._weekTextPositionControl(S,i,u,c,v))});o.add(T)}}},t.type="calendar",t}(Ut),us=864e5,zI=function(){function r(t,e,a){this.type="calendar",this.dimensions=r.dimensions,this.getDimensionsInfo=r.getDimensionsInfo,this._model=t}return r.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},r.prototype.getRangeInfo=function(){return this._rangeInfo},r.prototype.getModel=function(){return this._model},r.prototype.getRect=function(){return this._rect},r.prototype.getCellWidth=function(){return this._sw},r.prototype.getCellHeight=function(){return this._sh},r.prototype.getOrient=function(){return this._orient},r.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},r.prototype.getDateInfo=function(t){t=tb(t);var e=t.getFullYear(),a=t.getMonth()+1,n=a<10?"0"+a:""+a,i=t.getDate(),o=i<10?"0"+i:""+i,l=t.getDay();return l=Math.abs((l+7-this.getFirstDayOfWeek())%7),{y:e+"",m:n,d:o,day:l,time:t.getTime(),formatedDate:e+"-"+n+"-"+o,date:t}},r.prototype.getNextNDay=function(t,e){return e=e||0,e===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+e),this.getDateInfo(t))},r.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var a=this._rangeInfo.weeks||1,n=["width","height"],i=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),l=this._orient==="horizontal"?[a,7]:[7,a];O([0,1],function(c){d(i,c)&&(o[n[c]]=i[c]*l[c])});var s={width:e.getWidth(),height:e.getHeight()},u=this._rect=Kt(o,s);O([0,1],function(c){d(i,c)||(i[c]=u[n[c]]/l[c])});function d(c,f){return c[f]!=null&&c[f]!=="auto"}this._sw=i[0],this._sh=i[1]},r.prototype.dataToPoint=function(t,e){ge(t)&&(t=t[0]),e==null&&(e=!0);var a=this.getDateInfo(t),n=this._rangeInfo,i=a.formatedDate;if(e&&!(a.time>=n.start.time&&a.time<n.end.time+us))return[NaN,NaN];var o=a.day,l=this._getRangeInfo([n.start.time,i]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+l*this._sh+this._sh/2]:[this._rect.x+l*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},r.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},r.prototype.dataToRect=function(t,e){var a=this.dataToPoint(t,e);return{contentShape:{x:a[0]-(this._sw-this._lineWidth)/2,y:a[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:a,tl:[a[0]-this._sw/2,a[1]-this._sh/2],tr:[a[0]+this._sw/2,a[1]-this._sh/2],br:[a[0]+this._sw/2,a[1]+this._sh/2],bl:[a[0]-this._sw/2,a[1]+this._sh/2]}},r.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,a=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(a,e-1,n):this._getDateByWeeksAndDay(e,a-1,n)},r.prototype.convertToPixel=function(t,e,a){var n=Ep(e);return n===this?n.dataToPoint(a):null},r.prototype.convertFromPixel=function(t,e,a){var n=Ep(e);return n===this?n.pointToData(a):null},r.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},r.prototype._initRangeOption=function(){var t=this._model.get("range"),e;if(ge(t)&&t.length===1&&(t=t[0]),ge(t))e=t;else{var a=t.toString();if(/^\d{4}$/.test(a)&&(e=[a+"-01-01",a+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(a)){var n=this.getDateInfo(a),i=n.date;i.setMonth(i.getMonth()+1);var o=this.getNextNDay(i,-1);e=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(a)&&(e=[a,a])}if(!e)return t;var l=this._getRangeInfo(e);return l.start.time>l.end.time&&e.reverse(),e},r.prototype._getRangeInfo=function(t){var e=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],a;e[0].time>e[1].time&&(a=!0,e.reverse());var n=Math.floor(e[1].time/us)-Math.floor(e[0].time/us)+1,i=new Date(e[0].time),o=i.getDate(),l=e[1].date.getDate();i.setDate(o+n-1);var s=i.getDate();if(s!==l)for(var u=i.getTime()-e[1].time>0?1:-1;(s=i.getDate())!==l&&(i.getTime()-e[1].time)*u>0;)n-=u,i.setDate(s-u);var d=Math.floor((n+e[0].day+6)/7),c=a?-d+1:d-1;return a&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:d,nthWeek:c,fweek:e[0].day,lweek:e[1].day}},r.prototype._getDateByWeeksAndDay=function(t,e,a){var n=this._getRangeInfo(a);if(t>n.weeks||t===0&&e<n.fweek||t===n.weeks&&e>n.lweek)return null;var i=(t-1)*7-n.fweek+e,o=new Date(n.start.time);return o.setDate(+n.start.d+i),this.getDateInfo(o)},r.create=function(t,e){var a=[];return t.eachComponent("calendar",function(n){var i=new r(n);a.push(i),n.coordinateSystem=i}),t.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=a[n.get("calendarIndex")||0])}),a},r.dimensions=["time","value"],r}();function Ep(r){var t=r.calendarModel,e=r.seriesModel,a=t?t.coordinateSystem:e?e.coordinateSystem:null;return a}function BI(r){r.registerComponentModel(OI),r.registerComponentView($I),r.registerCoordinateSystem("calendar",zI)}function qI(r,t){var e=r.existing;if(t.id=r.keyInfo.id,!t.type&&e&&(t.type=e.type),t.parentId==null){var a=t.parentOption;a?t.parentId=a.id:e&&(t.parentId=e.parentId)}t.parentOption=null}function Np(r,t){var e;return O(t,function(a){r[a]!=null&&r[a]!=="auto"&&(e=!0)}),e}function GI(r,t,e){var a=be({},e),n=r[t],i=e.$action||"merge";i==="merge"?n?(rt(n,a,!0),Mu(n,a,{ignoreSize:!0}),rb(e,n),Wi(e,n),Wi(e,n,"shape"),Wi(e,n,"style"),Wi(e,n,"extra"),e.clipPath=n.clipPath):r[t]=a:i==="replace"?r[t]=a:i==="remove"&&n&&(r[t]=null)}var vy=["transition","enterFrom","leaveTo"],FI=vy.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Wi(r,t,e){if(e&&(!r[e]&&t[e]&&(r[e]={}),r=r[e],t=t[e]),!(!r||!t))for(var a=e?vy:FI,n=0;n<a.length;n++){var i=a[n];r[i]==null&&t[i]!=null&&(r[i]=t[i])}}function UI(r,t){if(r&&(r.hv=t.hv=[Np(t,["left","right"]),Np(t,["top","bottom"])],r.type==="group")){var e=r,a=t;e.width==null&&(e.width=a.width=0),e.height==null&&(e.height=a.height=0)}}var HI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.preventAutoZ=!0,e}return t.prototype.mergeOption=function(e,a){var n=this.option.elements;this.option.elements=null,r.prototype.mergeOption.call(this,e,a),this.option.elements=n},t.prototype.optionUpdated=function(e,a){var n=this.option,i=(a?n:e).elements,o=n.elements=a?[]:n.elements,l=[];this._flatten(i,l,null);var s=ab(o,l,"normalMerge"),u=this._elOptionsToUpdate=[];O(s,function(d,c){var f=d.newOption;f&&(u.push(f),qI(d,f),GI(o,c,f),UI(o[c],f))},this),n.elements=bt(o,function(d){return d&&delete d.$action,d!=null})},t.prototype._flatten=function(e,a,n){O(e,function(i){if(i){n&&(i.parentOption=n),a.push(i);var o=i.children;o&&o.length&&this._flatten(o,a,i),delete i.children}},this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t}(zt),Op={path:null,compoundPath:null,group:xe,image:Ta,text:Xe},va=ht(),WI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this._elMap=Pe()},t.prototype.render=function(e,a,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},t.prototype._updateElements=function(e){var a=e.useElOptionsToUpdate();if(a){var n=this._elMap,i=this.group,o=e.get("z"),l=e.get("zlevel");O(a,function(s){var u=Oa(s.id,null),d=u!=null?n.get(u):null,c=Oa(s.parentId,null),f=c!=null?n.get(c):i,p=s.type,g=s.style;p==="text"&&g&&s.hv&&s.hv[1]&&(g.textVerticalAlign=g.textBaseline=g.verticalAlign=g.align=null);var v=s.textContent,y=s.textConfig;if(g&&ty(g,p,!!y,!!v)){var _=ay(g,p,!0);!y&&_.textConfig&&(y=s.textConfig=_.textConfig),!v&&_.textContent&&(v=_.textContent)}var S=YI(s),w=s.$action||"merge",T=w==="merge",C=w==="replace";if(T){var k=!d,A=d;k?A=$p(u,f,s.type,n):(A&&(va(A).isNew=!1),oy(A)),A&&(to(A,S,e,{isInit:k}),zp(A,s,o,l))}else if(C){ro(d,s,n,e);var I=$p(u,f,s.type,n);I&&(to(I,S,e,{isInit:!0}),zp(I,s,o,l))}else w==="remove"&&(ny(d,s),ro(d,s,n,e));var M=n.get(u);if(M&&v)if(T){var D=M.getTextContent();D?D.attr(v):M.setTextContent(new Xe(v))}else C&&M.setTextContent(new Xe(v));if(M){var L=s.clipPath;if(L){var E=L.type,R=void 0,k=!1;if(T){var V=M.getClipPath();k=!V||va(V).type!==E,R=k?iu(E):V}else C&&(k=!0,R=iu(E));M.setClipPath(R),to(R,L,e,{isInit:k}),wo(R,L.keyframeAnimation,e)}var z=va(M);M.setTextConfig(y),z.option=s,jI(M,e,s),Ho({el:M,componentModel:e,itemName:M.name,itemTooltipOption:s.tooltip}),wo(M,s.keyframeAnimation,e)}})}},t.prototype._relocate=function(e,a){for(var n=e.option.elements,i=this.group,o=this._elMap,l=a.getWidth(),s=a.getHeight(),u=["x","y"],d=0;d<n.length;d++){var c=n[d],f=Oa(c.id,null),p=f!=null?o.get(f):null;if(!(!p||!p.isGroup)){var g=p.parent,v=g===i,y=va(p),_=va(g);y.width=de(y.option.width,v?l:_.width)||0,y.height=de(y.option.height,v?s:_.height)||0}}for(var d=n.length-1;d>=0;d--){var c=n[d],f=Oa(c.id,null),p=f!=null?o.get(f):null;if(p){var g=p.parent,_=va(g),S=g===i?{width:l,height:s}:{width:_.width,height:_.height},w={},T=jo(p,c,S,null,{hv:c.hv,boundingMode:c.bounding},w);if(!va(p).isNew&&T){for(var C=c.transition,k={},A=0;A<u.length;A++){var I=u[A],M=w[I];C&&(Ar(C)||nt(C,I)>=0)?k[I]=M:p[I]=M}Ke(p,k,e,0)}else p.attr(w)}}},t.prototype._clear=function(){var e=this,a=this._elMap;a.each(function(n){ro(n,va(n).option,a,e._lastGraphicModel)}),this._elMap=Pe()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(Ut);function iu(r){var t=le(Op,r)?Op[r]:Jg(r),e=new t({});return va(e).type=r,e}function $p(r,t,e,a){var n=iu(e);return t.add(n),a.set(r,n),va(n).id=r,va(n).isNew=!0,n}function ro(r,t,e,a){var n=r&&r.parent;n&&(r.type==="group"&&r.traverse(function(i){ro(i,t,e,a)}),ol(r,t,a),e.removeKey(va(r).id))}function zp(r,t,e,a){r.isGroup||O([["cursor",Lr.prototype.cursor],["zlevel",a||0],["z",e||0],["z2",0]],function(n){var i=n[0];le(t,i)?r[i]=At(t[i],n[1]):r[i]==null&&(r[i]=n[1])}),O(vt(t),function(n){if(n.indexOf("on")===0){var i=t[n];r[n]=Be(i)?i:null}}),le(t,"draggable")&&(r.draggable=t.draggable),t.name!=null&&(r.name=t.name),t.id!=null&&(r.id=t.id)}function YI(r){return r=be({},r),O(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(nb),function(t){delete r[t]}),r}function jI(r,t,e){var a=qe(r).eventData;!r.silent&&!r.ignore&&!a&&(a=qe(r).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:r.name}),a&&(a.info=e.info)}function ZI(r){r.registerComponentModel(HI),r.registerComponentView(WI),r.registerPreprocessor(function(t){var e=t.graphic;ge(e)?!e[0]||!e[0].elements?t.graphic=[{elements:e}]:t.graphic=[t.graphic[0]]:e&&!e.elements&&(t.graphic=[{elements:[e]}])})}var Bp=["x","y","radius","angle","single"],XI=["cartesian2d","polar","singleAxis"];function KI(r){var t=r.get("coordinateSystem");return nt(XI,t)>=0}function Ka(r){return r+"Axis"}function QI(r,t){var e=Pe(),a=[],n=Pe();r.eachComponent({mainType:"dataZoom",query:t},function(d){n.get(d.uid)||l(d)});var i;do i=!1,r.eachComponent("dataZoom",o);while(i);function o(d){!n.get(d.uid)&&s(d)&&(l(d),i=!0)}function l(d){n.set(d.uid,!0),a.push(d),u(d)}function s(d){var c=!1;return d.eachTargetAxis(function(f,p){var g=e.get(f);g&&g[p]&&(c=!0)}),c}function u(d){d.eachTargetAxis(function(c,f){(e.get(c)||e.set(c,[]))[f]=!0})}return a}function gy(r){var t=r.ecModel,e={infoList:[],infoMap:Pe()};return r.eachTargetAxis(function(a,n){var i=t.getComponent(Ka(a),n);if(i){var o=i.getCoordSysModel();if(o){var l=o.uid,s=e.infoMap.get(l);s||(s={model:o,axisModels:[]},e.infoList.push(s),e.infoMap.set(l,s)),s.axisModels.push(i)}}}),e}var ds=function(){function r(){this.indexList=[],this.indexMap=[]}return r.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},r}(),fi=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return t.prototype.init=function(e,a,n){var i=qp(e);this.settledOption=i,this.mergeDefaultAndTheme(e,n),this._doInit(i)},t.prototype.mergeOption=function(e){var a=qp(e);rt(this.option,e,!0),rt(this.settledOption,a,!0),this._doInit(a)},t.prototype._doInit=function(e){var a=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;O([["start","startValue"],["end","endValue"]],function(i,o){this._rangePropMode[o]==="value"&&(a[i[0]]=n[i[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),a=this._targetAxisInfoMap=Pe(),n=this._fillSpecifiedTargetAxis(a);n?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(a,this._orient)),this._noTarget=!0,a.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var a=!1;return O(Bp,function(n){var i=this.getReferringComponents(Ka(n),ib);if(i.specified){a=!0;var o=new ds;O(i.models,function(l){o.add(l.componentIndex)}),e.set(n,o)}},this),a},t.prototype._fillAutoTargetAxisByOrient=function(e,a){var n=this.ecModel,i=!0;if(i){var o=a==="vertical"?"y":"x",l=n.findComponents({mainType:o+"Axis"});s(l,o)}if(i){var l=n.findComponents({mainType:"singleAxis",filter:function(d){return d.get("orient",!0)===a}});s(l,"single")}function s(u,d){var c=u[0];if(c){var f=new ds;if(f.add(c.componentIndex),e.set(d,f),i=!1,d==="x"||d==="y"){var p=c.getReferringComponents("grid",La).models[0];p&&O(u,function(g){c.componentIndex!==g.componentIndex&&p===g.getReferringComponents("grid",La).models[0]&&f.add(g.componentIndex)})}}}i&&O(Bp,function(u){if(i){var d=n.findComponents({mainType:Ka(u),filter:function(f){return f.get("type",!0)==="category"}});if(d[0]){var c=new ds;c.add(d[0].componentIndex),e.set(u,c),i=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(a){!e&&(e=a)},this),e==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var a=this.ecModel.option;this.option.throttle=a.animation&&a.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var a=this._rangePropMode,n=this.get("rangeMode");O([["start","startValue"],["end","endValue"]],function(i,o){var l=e[i[0]]!=null,s=e[i[1]]!=null;l&&!s?a[o]="percent":!l&&s?a[o]="value":n?a[o]=n[o]:l&&(a[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(a,n){e==null&&(e=this.ecModel.getComponent(Ka(a),n))},this),e},t.prototype.eachTargetAxis=function(e,a){this._targetAxisInfoMap.each(function(n,i){O(n.indexList,function(o){e.call(a,i,o)})})},t.prototype.getAxisProxy=function(e,a){var n=this.getAxisModel(e,a);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,a){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[a])return this.ecModel.getComponent(Ka(e),a)},t.prototype.setRawRange=function(e){var a=this.option,n=this.settledOption;O([["start","startValue"],["end","endValue"]],function(i){(e[i[0]]!=null||e[i[1]]!=null)&&(a[i[0]]=n[i[0]]=e[i[0]],a[i[1]]=n[i[1]]=e[i[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var a=this.option;O(["start","startValue","end","endValue"],function(n){a[n]=e[n]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,a){if(e==null&&a==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(e,a).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var a,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var o=n[i],l=this._targetAxisInfoMap.get(o),s=0;s<l.indexList.length;s++){var u=this.getAxisProxy(o,l.indexList[s]);if(u.hostedBy(this))return u;a||(a=u)}return a},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(zt);function qp(r){var t={};return O(["start","end","startValue","endValue","throttle"],function(e){r.hasOwnProperty(e)&&(t[e]=r[e])}),t}var JI=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(fi),wd=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,i){this.dataZoomModel=e,this.ecModel=a,this.api=n},t.type="dataZoom",t}(Ut),eD=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(wd),Jr=O,Gp=ha,tD=function(){function r(t,e,a,n){this._dimName=t,this._axisIndex=e,this.ecModel=n,this._dataZoomModel=a}return r.prototype.hostedBy=function(t){return this._dataZoomModel===t},r.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},r.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},r.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(KI(e)){var a=Ka(this._dimName),n=e.getReferringComponents(a,La).models[0];n&&this._axisIndex===n.componentIndex&&t.push(e)}},this),t},r.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},r.prototype.getMinMaxSpan=function(){return Fe(this._minMaxSpan)},r.prototype.calculateDataWindow=function(t){var e=this._dataExtent,a=this.getAxisModel(),n=a.axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],l=[],s=[],u;Jr(["start","end"],function(f,p){var g=t[f],v=t[f+"Value"];i[p]==="percent"?(g==null&&(g=o[p]),v=n.parse(We(g,o,e))):(u=!0,v=v==null?e[p]:n.parse(v),g=We(v,e,o)),s[p]=v==null||isNaN(v)?e[p]:v,l[p]=g==null||isNaN(g)?o[p]:g}),Gp(s),Gp(l);var d=this._minMaxSpan;u?c(s,l,e,o,!1):c(l,s,o,e,!0);function c(f,p,g,v,y){var _=y?"Span":"ValueSpan";Gr(0,f,g,"all",d["min"+_],d["max"+_]);for(var S=0;S<2;S++)p[S]=We(f[S],g,v,!0),y&&(p[S]=n.parse(p[S]))}return{valueWindow:s,percentWindow:l}},r.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=aD(this,this._dimName,e),this._updateMinMaxSpan();var a=this.calculateDataWindow(t.settledOption);this._valueWindow=a.valueWindow,this._percentWindow=a.percentWindow,this._setAxisModel()}},r.prototype.filterData=function(t,e){if(t!==this._dataZoomModel)return;var a=this._dimName,n=this.getTargetSeriesModels(),i=t.get("filterMode"),o=this._valueWindow;if(i==="none")return;Jr(n,function(s){var u=s.getData(),d=u.mapDimensionsAll(a);if(d.length){if(i==="weakFilter"){var c=u.getStore(),f=ne(d,function(p){return u.getDimensionIndex(p)},u);u.filterSelf(function(p){for(var g,v,y,_=0;_<d.length;_++){var S=c.get(f[_],p),w=!isNaN(S),T=S<o[0],C=S>o[1];if(w&&!T&&!C)return!0;w&&(y=!0),T&&(g=!0),C&&(v=!0)}return y&&g&&v})}else Jr(d,function(p){if(i==="empty")s.setData(u=u.map(p,function(v){return l(v)?v:NaN}));else{var g={};g[p]=o,u.selectRange(g)}});Jr(d,function(p){u.setApproximateExtent(o,p)})}});function l(s){return s>=o[0]&&s<=o[1]}},r.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,a=this._dataExtent;Jr(["min","max"],function(n){var i=e.get(n+"Span"),o=e.get(n+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?i=We(a[0]+o,a,[0,100],!0):i!=null&&(o=We(i,[0,100],a,!0)-a[0]),t[n+"Span"]=i,t[n+"ValueSpan"]=o},this)},r.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,a=this._valueWindow;if(e){var n=ob(a,[0,500]);n=Math.min(n,20);var i=t.axis.scale.rawExtentInfo;e[0]!==0&&i.setDeterminedMinMax("min",+a[0].toFixed(n)),e[1]!==100&&i.setDeterminedMinMax("max",+a[1].toFixed(n)),i.freeze()}},r}();function aD(r,t,e){var a=[1/0,-1/0];Jr(e,function(o){lb(a,o.getData(),t)});var n=r.getAxisModel(),i=sb(n.axis.scale,n,a).calculate();return[i.min,i.max]}var rD={getTargetSeries:function(r){function t(n){r.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(o,l){var s=r.getComponent(Ka(o),l);n(o,l,s,i)})})}t(function(n,i,o,l){o.__dzAxisProxy=null});var e=[];t(function(n,i,o,l){o.__dzAxisProxy||(o.__dzAxisProxy=new tD(n,i,l,r),e.push(o.__dzAxisProxy))});var a=Pe();return O(e,function(n){O(n.getTargetSeriesModels(),function(i){a.set(i.uid,i)})}),a},overallReset:function(r,t){r.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(a,n){e.getAxisProxy(a,n).reset(e)}),e.eachTargetAxis(function(a,n){e.getAxisProxy(a,n).filterData(e,t)})}),r.eachComponent("dataZoom",function(e){var a=e.findRepresentativeAxisProxy();if(a){var n=a.getDataPercentWindow(),i=a.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}})}};function nD(r){r.registerAction("dataZoom",function(t,e){var a=QI(e,t);O(a,function(n){n.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var Fp=!1;function xd(r){Fp||(Fp=!0,r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,rD),nD(r),r.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function iD(r){r.registerComponentModel(JI),r.registerComponentView(eD),xd(r)}var ga=function(){function r(){}return r}(),hy={};function en(r,t){hy[r]=t}function my(r){return hy[r]}var oD=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;O(this.option.feature,function(a,n){var i=my(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(e)),rt(a,i.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(zt);function lD(r,t,e){var a=t.getBoxLayoutParams(),n=t.get("padding"),i={width:e.getWidth(),height:e.getHeight()},o=Kt(a,i,n);Tr(t.get("orient"),r,t.get("itemGap"),o.width,o.height),jo(r,a,i,n)}function yy(r,t){var e=nh(t.get("padding")),a=t.getItemStyle(["color","opacity"]);return a.fill=t.get("backgroundColor"),r=new et({shape:{x:r.x-e[3],y:r.y-e[0],width:r.width+e[1]+e[3],height:r.height+e[0]+e[2],r:t.get("borderRadius")},style:a,silent:!0,z2:-1}),r}var sD=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,a,n,i){var o=this.group;if(o.removeAll(),!e.get("show"))return;var l=+e.get("itemSize"),s=e.get("orient")==="vertical",u=e.get("feature")||{},d=this._features||(this._features={}),c=[];O(u,function(g,v){c.push(v)}),new rr(this._featureNames||[],c).add(f).update(f).remove(Ve(f,null)).execute(),this._featureNames=c;function f(g,v){var y=c[g],_=c[v],S=u[y],w=new na(S,e,e.ecModel),T;if(i&&i.newTitle!=null&&i.featureName===y&&(S.title=i.newTitle),y&&!_){if(uD(y))T={onclick:w.option.onclick,featureName:y};else{var C=my(y);if(!C)return;T=new C}d[y]=T}else if(T=d[_],!T)return;T.uid=zg("toolbox-feature"),T.model=w,T.ecModel=a,T.api=n;var k=T instanceof ga;if(!y&&_){k&&T.dispose&&T.dispose(a,n);return}if(!w.get("show")||k&&T.unusable){k&&T.remove&&T.remove(a,n);return}p(w,T,y),w.setIconStatus=function(A,I){var M=this.option,D=this.iconPaths;M.iconStatus=M.iconStatus||{},M.iconStatus[A]=I,D[A]&&(I==="emphasis"?un:dn)(D[A])},T instanceof ga&&T.render&&T.render(w,a,n,i)}function p(g,v,y){var _=g.getModel("iconStyle"),S=g.getModel(["emphasis","iconStyle"]),w=v instanceof ga&&v.getIcons?v.getIcons():g.get("icon"),T=g.get("title")||{},C,k;Re(w)?(C={},C[y]=w):C=w,Re(T)?(k={},k[y]=T):k=T;var A=g.iconPaths={};O(C,function(I,M){var D=Pu(I,{},{x:-l/2,y:-l/2,width:l,height:l});D.setStyle(_.getItemStyle());var L=D.ensureState("emphasis");L.style=S.getItemStyle();var E=new Xe({style:{text:k[M],align:S.get("textAlign"),borderRadius:S.get("textBorderRadius"),padding:S.get("textPadding"),fill:null,font:Qg({fontStyle:S.get("textFontStyle"),fontFamily:S.get("textFontFamily"),fontSize:S.get("textFontSize"),fontWeight:S.get("textFontWeight")},a)},ignore:!0});D.setTextContent(E),Ho({el:D,componentModel:e,itemName:M,formatterParamsExtra:{title:k[M]}}),D.__title=k[M],D.on("mouseover",function(){var R=S.getItemStyle(),V=s?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";E.setStyle({fill:S.get("textFill")||R.fill||R.stroke||"#000",backgroundColor:S.get("textBackgroundColor")}),D.setTextConfig({position:S.get("textPosition")||V}),E.ignore=!e.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){g.get(["iconStatus",M])!=="emphasis"&&n.leaveEmphasis(this),E.hide()}),(g.get(["iconStatus",M])==="emphasis"?un:dn)(D),o.add(D),D.on("click",ye(v.onclick,v,a,n,M)),A[M]=D})}lD(o,e,n),o.add(yy(o.getBoundingRect(),e)),s||o.eachChild(function(g){var v=g.__title,y=g.ensureState("emphasis"),_=y.textConfig||(y.textConfig={}),S=g.getTextContent(),w=S&&S.ensureState("emphasis");if(w&&!Be(w)&&v){var T=w.style||(w.style={}),C=rh(v,Xe.makeFont(T)),k=g.x+o.x,A=g.y+o.y+l,I=!1;A+C.height>n.getHeight()&&(_.position="top",I=!0);var M=I?-5-C.height:l+10;k+C.width/2>n.getWidth()?(_.position=["100%",M],T.align="right"):k-C.width/2<0&&(_.position=[0,M],T.align="left")}})},t.prototype.updateView=function(e,a,n,i){O(this._features,function(o){o instanceof ga&&o.updateView&&o.updateView(o.model,a,n,i)})},t.prototype.remove=function(e,a){O(this._features,function(n){n instanceof ga&&n.remove&&n.remove(e,a)}),this.group.removeAll()},t.prototype.dispose=function(e,a){O(this._features,function(n){n instanceof ga&&n.dispose&&n.dispose(e,a)})},t.type="toolbox",t}(Ut);function uD(r){return r.indexOf("my")===0}var dD=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(e,a){var n=this.model,i=n.get("name")||e.get("title.0.text")||"echarts",o=a.getZr().painter.getType()==="svg",l=o?"svg":n.get("type",!0)||"png",s=a.getConnectedDataURL({type:l,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=ih.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var d=document.createElement("a");d.download=i+"."+l,d.target="_blank",d.href=s;var c=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});d.dispatchEvent(c)}else if(window.navigator.msSaveOrOpenBlob||o){var f=s.split(","),p=f[0].indexOf("base64")>-1,g=o?decodeURIComponent(f[1]):f[1];p&&(g=window.atob(g));var v=i+"."+l;if(window.navigator.msSaveOrOpenBlob){for(var y=g.length,_=new Uint8Array(y);y--;)_[y]=g.charCodeAt(y);var S=new Blob([_]);window.navigator.msSaveOrOpenBlob(S,v)}else{var w=document.createElement("iframe");document.body.appendChild(w);var T=w.contentWindow,C=T.document;C.open("image/svg+xml","replace"),C.write(g),C.close(),T.focus(),C.execCommand("SaveAs",!0,v),document.body.removeChild(w)}}else{var k=n.get("lang"),A='<body style="margin:0;"><img src="'+s+'" style="max-width:100%;" title="'+(k&&k[0]||"")+'" /></body>',I=window.open();I.document.write(A),I.document.title=i}},t.getDefaultOption=function(e){var a={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return a},t}(ga),Up="__ec_magicType_stack__",cD=[["line","bar"],["stack"]],fD=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getIcons=function(){var e=this.model,a=e.get("icon"),n={};return O(e.get("type"),function(i){a[i]&&(n[i]=a[i])}),n},t.getDefaultOption=function(e){var a={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return a},t.prototype.onclick=function(e,a,n){var i=this.model,o=i.get(["seriesIndex",n]);if(Hp[n]){var l={series:[]},s=function(c){var f=c.subType,p=c.id,g=Hp[n](f,p,c,i);g&&(Ne(g,c.option),l.series.push(g));var v=c.coordinateSystem;if(v&&v.type==="cartesian2d"&&(n==="line"||n==="bar")){var y=v.getAxesByScale("ordinal")[0];if(y){var _=y.dim,S=_+"Axis",w=c.getReferringComponents(S,La).models[0],T=w.componentIndex;l[S]=l[S]||[];for(var C=0;C<=T;C++)l[S][T]=l[S][T]||{};l[S][T].boundaryGap=n==="bar"}}};O(cD,function(c){nt(c,n)>=0&&O(c,function(f){i.setIconStatus(f,"normal")})}),i.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},s);var u,d=n;n==="stack"&&(u=rt({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",n])!=="emphasis"&&(d="tiled")),a.dispatchAction({type:"changeMagicType",currentType:d,newOption:l,newTitle:u,featureName:"magicType"})}},t}(ga),Hp={line:function(r,t,e,a){if(r==="bar")return rt({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},a.get(["option","line"])||{},!0)},bar:function(r,t,e,a){if(r==="line")return rt({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},a.get(["option","bar"])||{},!0)},stack:function(r,t,e,a){var n=e.get("stack")===Up;if(r==="line"||r==="bar")return a.setIconStatus("stack",n?"normal":"emphasis"),rt({id:t,stack:n?"":Up},a.get(["option","stack"])||{},!0)}};Go({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,t){t.mergeOption(r.newOption)});var ll=new Array(60).join("-"),yn="	";function pD(r){var t={},e=[],a=[];return r.eachRawSeries(function(n){var i=n.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var o=i.getBaseAxis();if(o.type==="category"){var l=o.dim+"_"+o.index;t[l]||(t[l]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},a.push({axisDim:o.dim,axisIndex:o.index})),t[l].series.push(n)}else e.push(n)}else e.push(n)}),{seriesGroupByCategoryAxis:t,other:e,meta:a}}function vD(r){var t=[];return O(r,function(e,a){var n=e.categoryAxis,i=e.valueAxis,o=i.dim,l=[" "].concat(ne(e.series,function(p){return p.name})),s=[n.model.getCategories()];O(e.series,function(p){var g=p.getRawData();s.push(p.getRawData().mapArray(g.mapDimension(o),function(v){return v}))});for(var u=[l.join(yn)],d=0;d<s[0].length;d++){for(var c=[],f=0;f<s.length;f++)c.push(s[f][d]);u.push(c.join(yn))}t.push(u.join(`
`))}),t.join(`

`+ll+`

`)}function gD(r){return ne(r,function(t){var e=t.getRawData(),a=[t.name],n=[];return e.each(e.dimensions,function(){for(var i=arguments.length,o=arguments[i-1],l=e.getName(o),s=0;s<i-1;s++)n[s]=arguments[s];a.push((l?l+yn:"")+n.join(yn))}),a.join(`
`)}).join(`

`+ll+`

`)}function hD(r){var t=pD(r);return{value:bt([vD(t.seriesGroupByCategoryAxis),gD(t.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+ll+`

`),meta:t.meta}}function Co(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function mD(r){var t=r.slice(0,r.indexOf(`
`));if(t.indexOf(yn)>=0)return!0}var ou=new RegExp("["+yn+"]+","g");function yD(r){for(var t=r.split(/\n+/g),e=Co(t.shift()).split(ou),a=[],n=ne(e,function(s){return{name:s,data:[]}}),i=0;i<t.length;i++){var o=Co(t[i]).split(ou);a.push(o.shift());for(var l=0;l<o.length;l++)n[l]&&(n[l].data[i]=o[l])}return{series:n,categories:a}}function bD(r){for(var t=r.split(/\n+/g),e=Co(t.shift()),a=[],n=0;n<t.length;n++){var i=Co(t[n]);if(i){var o=i.split(ou),l="",s=void 0,u=!1;isNaN(o[0])?(u=!0,l=o[0],o=o.slice(1),a[n]={name:l,value:[]},s=a[n].value):s=a[n]=[];for(var d=0;d<o.length;d++)s.push(+o[d]);s.length===1&&(u?a[n].value=s[0]:a[n]=s[0])}}return{name:e,data:a}}function _D(r,t){var e=r.split(new RegExp(`
*`+ll+`
*`,"g")),a={series:[]};return O(e,function(n,i){if(mD(n)){var o=yD(n),l=t[i],s=l.axisDim+"Axis";l&&(a[s]=a[s]||[],a[s][l.axisIndex]={data:o.categories},a.series=a.series.concat(o.series))}else{var o=bD(n);a.series.push(o)}}),a}var SD=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(e,a){setTimeout(function(){a.dispatchAction({type:"hideTip"})});var n=a.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var l=document.createElement("h4"),s=i.get("lang")||[];l.innerHTML=s[0]||i.get("title"),l.style.cssText="margin:10px 20px",l.style.color=i.get("textColor");var u=document.createElement("div"),d=document.createElement("textarea");u.style.cssText="overflow:auto";var c=i.get("optionToContent"),f=i.get("contentToOption"),p=hD(e);if(Be(c)){var g=c(a.getOption());Re(g)?u.innerHTML=g:ub(g)&&u.appendChild(g)}else{d.readOnly=i.get("readOnly");var v=d.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=i.get("textColor"),v.borderColor=i.get("textareaBorderColor"),v.backgroundColor=i.get("textareaColor"),d.value=p.value,u.appendChild(d)}var y=p.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:5px;left:0;right:0";var S="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",w=document.createElement("div"),T=document.createElement("div");S+=";background-color:"+i.get("buttonColor"),S+=";color:"+i.get("buttonTextColor");var C=this;function k(){n.removeChild(o),C._dom=null}sc(w,"click",k),sc(T,"click",function(){if(f==null&&c!=null||f!=null&&c==null){k();return}var A;try{Be(f)?A=f(u,a.getOption()):A=_D(d.value,y)}catch(I){throw k(),new Error("Data view format error "+I)}A&&a.dispatchAction({type:"changeDataView",newOption:A}),k()}),w.innerHTML=s[1],T.innerHTML=s[2],T.style.cssText=w.style.cssText=S,!i.get("readOnly")&&_.appendChild(T),_.appendChild(w),o.appendChild(l),o.appendChild(u),o.appendChild(_),u.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},t.prototype.remove=function(e,a){this._dom&&a.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,a){this.remove(e,a)},t.getDefaultOption=function(e){var a={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return a},t}(ga);function wD(r,t){return ne(r,function(e,a){var n=t&&t[a];if(Nt(n)&&!ge(n)){var i=Nt(e)&&!ge(e);i||(e={value:e});var o=n.name!=null&&e.name==null;return e=Ne(e,n),o&&delete e.name,e}else return e})}Go({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,t){var e=[];O(r.newOption.series,function(a){var n=t.getSeriesByName(a.name)[0];if(!n)e.push(be({type:"scatter"},a));else{var i=n.get("data");e.push({name:a.name,data:wD(a.data,i)})}}),t.mergeOption(Ne({series:e},r.newOption))});var by=O,_y=ht();function xD(r,t){var e=Td(r);by(t,function(a,n){for(var i=e.length-1;i>=0;i--){var o=e[i];if(o[n])break}if(i<0){var l=r.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(l){var s=l.getPercentRange();e[0][n]={dataZoomId:n,start:s[0],end:s[1]}}}}),e.push(t)}function TD(r){var t=Td(r),e=t[t.length-1];t.length>1&&t.pop();var a={};return by(e,function(n,i){for(var o=t.length-1;o>=0;o--)if(n=t[o][i],n){a[i]=n;break}}),a}function CD(r){_y(r).snapshots=null}function kD(r){return Td(r).length}function Td(r){var t=_y(r);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var AD=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(e,a){CD(e),a.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){var a={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return a},t}(ga);Go({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,t){t.resetOption("recreate")});var ID=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Cd=function(){function r(t,e,a){var n=this;this._targetInfoList=[];var i=Wp(e,t);O(DD,function(o,l){(!a||!a.include||nt(a.include,l)>=0)&&o(i,n._targetInfoList)})}return r.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(a,n,i){if((a.coordRanges||(a.coordRanges=[])).push(n),!a.coordRange){a.coordRange=n;var o=cs[a.brushType](0,i,n);a.__rangeOffset={offset:Xp[a.brushType](o.values,a.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},r.prototype.matchOutputRanges=function(t,e,a){O(t,function(n){var i=this.findTargetInfo(n,e);i&&i!==!0&&O(i.coordSyses,function(o){var l=cs[n.brushType](1,o,n.range,!0);a(n,l.values,o,e)})},this)},r.prototype.setInputRanges=function(t,e){O(t,function(a){var n=this.findTargetInfo(a,e);if(a.range=a.range||[],n&&n!==!0){a.panelId=n.panelId;var i=cs[a.brushType](0,n.coordSys,a.coordRange),o=a.__rangeOffset;a.range=o?Xp[a.brushType](i.values,o.offset,MD(i.xyMinMax,o.xyMinMax)):i.values}},this)},r.prototype.makePanelOpts=function(t,e){return ne(this._targetInfoList,function(a){var n=a.getPanelRect();return{panelId:a.panelId,defaultBrushType:e?e(a):null,clipPath:Em(n),isTargetByCursor:Om(n,t,a.coordSysModel),getLinearBrushOtherExtent:Nm(n)}})},r.prototype.controlSeries=function(t,e,a){var n=this.findTargetInfo(t,a);return n===!0||n&&nt(n.coordSyses,e.coordinateSystem)>=0},r.prototype.findTargetInfo=function(t,e){for(var a=this._targetInfoList,n=Wp(e,t),i=0;i<a.length;i++){var o=a[i],l=t.panelId;if(l){if(o.panelId===l)return o}else for(var s=0;s<Yp.length;s++)if(Yp[s](n,o))return o}return!0},r}();function lu(r){return r[0]>r[1]&&r.reverse(),r}function Wp(r,t){return oh(r,t,{includeMainTypes:ID})}var DD={grid:function(r,t){var e=r.xAxisModels,a=r.yAxisModels,n=r.gridModels,i=Pe(),o={},l={};!e&&!a&&!n||(O(e,function(s){var u=s.axis.grid.model;i.set(u.id,u),o[u.id]=!0}),O(a,function(s){var u=s.axis.grid.model;i.set(u.id,u),l[u.id]=!0}),O(n,function(s){i.set(s.id,s),o[s.id]=!0,l[s.id]=!0}),i.each(function(s){var u=s.coordinateSystem,d=[];O(u.getCartesians(),function(c,f){(nt(e,c.getAxis("x").model)>=0||nt(a,c.getAxis("y").model)>=0)&&d.push(c)}),t.push({panelId:"grid--"+s.id,gridModel:s,coordSysModel:s,coordSys:d[0],coordSyses:d,getPanelRect:jp.grid,xAxisDeclared:o[s.id],yAxisDeclared:l[s.id]})}))},geo:function(r,t){O(r.geoModels,function(e){var a=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:a,coordSyses:[a],getPanelRect:jp.geo})})}},Yp=[function(r,t){var e=r.xAxisModel,a=r.yAxisModel,n=r.gridModel;return!n&&e&&(n=e.axis.grid.model),!n&&a&&(n=a.axis.grid.model),n&&n===t.gridModel},function(r,t){var e=r.geoModel;return e&&e===t.geoModel}],jp={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,t=r.getBoundingRect().clone();return t.applyTransform(on(r)),t}},cs={lineX:Ve(Zp,0),lineY:Ve(Zp,1),rect:function(r,t,e,a){var n=r?t.pointToData([e[0][0],e[1][0]],a):t.dataToPoint([e[0][0],e[1][0]],a),i=r?t.pointToData([e[0][1],e[1][1]],a):t.dataToPoint([e[0][1],e[1][1]],a),o=[lu([n[0],i[0]]),lu([n[1],i[1]])];return{values:o,xyMinMax:o}},polygon:function(r,t,e,a){var n=[[1/0,-1/0],[1/0,-1/0]],i=ne(e,function(o){var l=r?t.pointToData(o,a):t.dataToPoint(o,a);return n[0][0]=Math.min(n[0][0],l[0]),n[1][0]=Math.min(n[1][0],l[1]),n[0][1]=Math.max(n[0][1],l[0]),n[1][1]=Math.max(n[1][1],l[1]),l});return{values:i,xyMinMax:n}}};function Zp(r,t,e,a){var n=e.getAxis(["x","y"][r]),i=lu(ne([0,1],function(l){return t?n.coordToData(n.toLocalCoord(a[l]),!0):n.toGlobalCoord(n.dataToCoord(a[l]))})),o=[];return o[r]=i,o[1-r]=[NaN,NaN],{values:i,xyMinMax:o}}var Xp={lineX:Ve(Kp,0),lineY:Ve(Kp,1),rect:function(r,t,e){return[[r[0][0]-e[0]*t[0][0],r[0][1]-e[0]*t[0][1]],[r[1][0]-e[1]*t[1][0],r[1][1]-e[1]*t[1][1]]]},polygon:function(r,t,e){return ne(r,function(a,n){return[a[0]-e[0]*t[n][0],a[1]-e[1]*t[n][1]]})}};function Kp(r,t,e,a){return[t[0]-a[r]*e[0],t[1]-a[r]*e[1]]}function MD(r,t){var e=Qp(r),a=Qp(t),n=[e[0]/a[0],e[1]/a[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function Qp(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}var su=O,PD=cb("toolbox-dataZoom_"),LD=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,a,n,i){this._brushController||(this._brushController=new nd(n.getZr()),this._brushController.on("brush",ye(this._onBrush,this)).mount()),ED(e,a,this,i,n),RD(e,a)},t.prototype.onclick=function(e,a,n){VD[n].call(this)},t.prototype.remove=function(e,a){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,a){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var a=e.areas;if(!e.isEnd||!a.length)return;var n={},i=this.ecModel;this._brushController.updateCovers([]);var o=new Cd(kd(this.model),i,{include:["grid"]});o.matchOutputRanges(a,i,function(u,d,c){if(c.type==="cartesian2d"){var f=u.brushType;f==="rect"?(l("x",c,d[0]),l("y",c,d[1])):l({lineX:"x",lineY:"y"}[f],c,d)}}),xD(i,n),this._dispatchZoomAction(n);function l(u,d,c){var f=d.getAxis(u),p=f.model,g=s(u,p,i),v=g.findRepresentativeAxisProxy(p).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(c=Gr(0,c.slice(),f.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),g&&(n[g.id]={dataZoomId:g.id,startValue:c[0],endValue:c[1]})}function s(u,d,c){var f;return c.eachComponent({mainType:"dataZoom",subType:"select"},function(p){var g=p.getAxisModel(u,d.componentIndex);g&&(f=p)}),f}},t.prototype._dispatchZoomAction=function(e){var a=[];su(e,function(n,i){a.push(Fe(n))}),a.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:a})},t.getDefaultOption=function(e){var a={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return a},t}(ga),VD={zoom:function(){var r=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:r})},back:function(){this._dispatchZoomAction(TD(this.ecModel))}};function kd(r){var t={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function RD(r,t){r.setIconStatus("back",kD(t)>1?"emphasis":"normal")}function ED(r,t,e,a,n){var i=e._isZoomActive;a&&a.type==="takeGlobalCursor"&&(i=a.key==="dataZoomSelect"?a.dataZoomSelectActive:!1),e._isZoomActive=i,r.setIconStatus("zoom",i?"emphasis":"normal");var o=new Cd(kd(r),t,{include:["grid"]}),l=o.makePanelOpts(n,function(s){return s.xAxisDeclared&&!s.yAxisDeclared?"lineX":!s.xAxisDeclared&&s.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(l).enableBrush(i&&l.length?{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()}:!1)}db("dataZoom",function(r){var t=r.getComponent("toolbox",0),e=["feature","dataZoom"];if(!t||t.get(e)==null)return;var a=t.getModel(e),n=[],i=kd(a),o=oh(r,i);su(o.xAxisModels,function(s){return l(s,"xAxis","xAxisIndex")}),su(o.yAxisModels,function(s){return l(s,"yAxis","yAxisIndex")});function l(s,u,d){var c=s.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:a.get("filterMode",!0)||"filter",id:PD+u+c};f[d]=c,n.push(f)}return n});function ND(r){r.registerComponentModel(oD),r.registerComponentView(sD),en("saveAsImage",dD),en("magicType",fD),en("dataView",SD),en("dataZoom",LD),en("restore",AD),De(iD)}var OD=["rect","polygon","keep","clear"];function $D(r,t){var e=jt(r?r.brush:[]);if(e.length){var a=[];O(e,function(s){var u=s.hasOwnProperty("toolbox")?s.toolbox:[];u instanceof Array&&(a=a.concat(u))});var n=r&&r.toolbox;ge(n)&&(n=n[0]),n||(n={feature:{}},r.toolbox=[n]);var i=n.feature||(n.feature={}),o=i.brush||(i.brush={}),l=o.type||(o.type=[]);l.push.apply(l,a),zD(l),t&&!l.length&&l.push.apply(l,OD)}}function zD(r){var t={};O(r,function(e){t[e]=1}),r.length=0,O(t,function(e,a){r.push(a)})}var Jp=O;function ev(r){if(r){for(var t in r)if(r.hasOwnProperty(t))return!0}}function uu(r,t,e){var a={};return Jp(t,function(i){var o=a[i]=n();Jp(r[i],function(l,s){if(_t.isValidType(s)){var u={type:s,visual:l};e&&e(u,i),o[s]=new _t(u),s==="opacity"&&(u=Fe(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new _t(u))}})}),a;function n(){var i=function(){};i.prototype.__hidden=i.prototype;var o=new i;return o}}function Sy(r,t,e){var a;O(e,function(n){t.hasOwnProperty(n)&&ev(t[n])&&(a=!0)}),a&&O(e,function(n){t.hasOwnProperty(n)&&ev(t[n])?r[n]=Fe(t[n]):delete r[n]})}function BD(r,t,e,a,n,i){var o={};O(r,function(c){var f=_t.prepareVisualTypes(t[c]);o[c]=f});var l;function s(c){return lh(e,l,c)}function u(c,f){sh(e,l,c,f)}e.each(d);function d(c,f){l=c;var p=e.getRawDataItem(l);if(!(p&&p.visualMap===!1))for(var g=a.call(n,c),v=t[g],y=o[g],_=0,S=y.length;_<S;_++){var w=y[_];v[w]&&v[w].applyVisual(c,s,u)}}}function qD(r,t,e,a){var n={};return O(r,function(i){var o=_t.prepareVisualTypes(t[i]);n[i]=o}),{progress:function(o,l){var s;a!=null&&(s=l.getDimensionIndex(a));function u(C){return lh(l,c,C)}function d(C,k){sh(l,c,C,k)}for(var c,f=l.getStore();(c=o.next())!=null;){var p=l.getRawDataItem(c);if(!(p&&p.visualMap===!1))for(var g=a!=null?f.get(s,c):c,v=e(g),y=t[v],_=n[v],S=0,w=_.length;S<w;S++){var T=_[S];y[T]&&y[T].applyVisual(g,u,d)}}}}}function GD(r){var t=r.brushType,e={point:function(a){return tv[t].point(a,e,r)},rect:function(a){return tv[t].rect(a,e,r)}};return e}var tv={lineX:av(0),lineY:av(1),rect:{point:function(r,t,e){return r&&e.boundingRect.contain(r[0],r[1])},rect:function(r,t,e){return r&&e.boundingRect.intersect(r)}},polygon:{point:function(r,t,e){return r&&e.boundingRect.contain(r[0],r[1])&&yr(e.range,r[0],r[1])},rect:function(r,t,e){var a=e.range;if(!r||a.length<=1)return!1;var n=r.x,i=r.y,o=r.width,l=r.height,s=a[0];if(yr(a,n,i)||yr(a,n+o,i)||yr(a,n,i+l)||yr(a,n+o,i+l)||st.create(r).contain(s[0],s[1])||Li(n,i,n+o,i,a)||Li(n,i,n,i+l,a)||Li(n+o,i,n+o,i+l,a)||Li(n,i+l,n+o,i+l,a))return!0}}};function av(r){var t=["x","y"],e=["width","height"];return{point:function(a,n,i){if(a){var o=i.range,l=a[r];return Rn(l,o)}},rect:function(a,n,i){if(a){var o=i.range,l=[a[t[r]],a[t[r]]+a[e[r]]];return l[1]<l[0]&&l.reverse(),Rn(l[0],o)||Rn(l[1],o)||Rn(o[0],l)||Rn(o[1],l)}}}}function Rn(r,t){return t[0]<=r&&r<=t[1]}var rv=["inBrush","outOfBrush"],fs="__ecBrushSelect",du="__ecInBrushSelectEvent";function wy(r){r.eachComponent({mainType:"brush"},function(t){var e=t.brushTargetManager=new Cd(t.option,r);e.setInputRanges(t.areas,r)})}function FD(r,t,e){var a=[],n,i;r.eachComponent({mainType:"brush"},function(o){e&&e.type==="takeGlobalCursor"&&o.setBrushOption(e.key==="brush"?e.brushOption:{brushType:!1})}),wy(r),r.eachComponent({mainType:"brush"},function(o,l){var s={brushId:o.id,brushIndex:l,brushName:o.name,areas:Fe(o.areas),selected:[]};a.push(s);var u=o.option,d=u.brushLink,c=[],f=[],p=[],g=!1;l||(n=u.throttleType,i=u.throttleDelay);var v=ne(o.areas,function(C){var k=YD[C.brushType],A=Ne({boundingRect:k?k(C):void 0},C);return A.selectors=GD(A),A}),y=uu(o.option,rv,function(C){C.mappingMethod="fixed"});ge(d)&&O(d,function(C){c[C]=1});function _(C){return d==="all"||!!c[C]}function S(C){return!!C.length}r.eachSeries(function(C,k){var A=p[k]=[];C.subType==="parallel"?w(C,k):T(C,k,A)});function w(C,k){var A=C.coordinateSystem;g=g||A.hasAxisBrushed(),_(k)&&A.eachActiveState(C.getData(),function(I,M){I==="active"&&(f[M]=1)})}function T(C,k,A){if(!(!C.brushSelector||WD(o,k))&&(O(v,function(M){o.brushTargetManager.controlSeries(M,C,r)&&A.push(M),g=g||S(A)}),_(k)&&S(A))){var I=C.getData();I.each(function(M){nv(C,A,I,M)&&(f[M]=1)})}}r.eachSeries(function(C,k){var A={seriesId:C.id,seriesIndex:k,seriesName:C.name,dataIndex:[]};s.selected.push(A);var I=p[k],M=C.getData(),D=_(k)?function(L){return f[L]?(A.dataIndex.push(M.getRawIndex(L)),"inBrush"):"outOfBrush"}:function(L){return nv(C,I,M,L)?(A.dataIndex.push(M.getRawIndex(L)),"inBrush"):"outOfBrush"};(_(k)?g:S(I))&&BD(rv,y,M,D)})}),UD(t,n,i,a,e)}function UD(r,t,e,a,n){if(n){var i=r.getZr();if(!i[du]){i[fs]||(i[fs]=HD);var o=Zo(i,fs,e,t);o(r,a)}}}function HD(r,t){if(!r.isDisposed()){var e=r.getZr();e[du]=!0,r.dispatchAction({type:"brushSelect",batch:t}),e[du]=!1}}function nv(r,t,e,a){for(var n=0,i=t.length;n<i;n++){var o=t[n];if(r.brushSelector(a,e,o.selectors,o))return!0}}function WD(r,t){var e=r.option.seriesIndex;return e!=null&&e!=="all"&&(ge(e)?nt(e,t)<0:t!==e)}var YD={rect:function(r){return iv(r.range)},polygon:function(r){for(var t,e=r.range,a=0,n=e.length;a<n;a++){t=t||[[1/0,-1/0],[1/0,-1/0]];var i=e[a];i[0]<t[0][0]&&(t[0][0]=i[0]),i[0]>t[0][1]&&(t[0][1]=i[0]),i[1]<t[1][0]&&(t[1][0]=i[1]),i[1]>t[1][1]&&(t[1][1]=i[1])}return t&&iv(t)}};function iv(r){return new st(r[0][0],r[1][0],r[0][1]-r[0][0],r[1][1]-r[1][0])}var jD=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){this.ecModel=e,this.api=a,this.model,(this._brushController=new nd(a.getZr())).on("brush",ye(this._onBrush,this)).mount()},t.prototype.render=function(e,a,n,i){this.model=e,this._updateController(e,a,n,i)},t.prototype.updateTransform=function(e,a,n,i){wy(a),this._updateController(e,a,n,i)},t.prototype.updateVisual=function(e,a,n,i){this.updateTransform(e,a,n,i)},t.prototype.updateView=function(e,a,n,i){this._updateController(e,a,n,i)},t.prototype._updateController=function(e,a,n,i){(!i||i.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var a=this.model.id,n=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:a,areas:Fe(n),$from:a}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:a,areas:Fe(n),$from:a})},t.type="brush",t}(Ut),ZD="#ddd",XD=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.areas=[],e.brushOption={},e}return t.prototype.optionUpdated=function(e,a){var n=this.option;!a&&Sy(n,e,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:ZD},i.hasOwnProperty("liftZ")||(i.liftZ=5)},t.prototype.setAreas=function(e){e&&(this.areas=ne(e,function(a){return ov(this.option,a)},this))},t.prototype.setBrushOption=function(e){this.brushOption=ov(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(zt);function ov(r,t){return rt({brushType:r.brushType,brushMode:r.brushMode,transformable:r.transformable,brushStyle:new na(r.brushStyle).getItemStyle(),removeOnClick:r.removeOnClick,z:r.z},t,!0)}var KD=["rect","polygon","lineX","lineY","keep","clear"],QD=function(r){W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,a,n){var i,o,l;a.eachComponent({mainType:"brush"},function(s){i=s.brushType,o=s.brushOption.brushMode||"single",l=l||!!s.areas.length}),this._brushType=i,this._brushMode=o,O(e.get("type",!0),function(s){e.setIconStatus(s,(s==="keep"?o==="multiple":s==="clear"?l:s===i)?"emphasis":"normal")})},t.prototype.updateView=function(e,a,n){this.render(e,a,n)},t.prototype.getIcons=function(){var e=this.model,a=e.get("icon",!0),n={};return O(e.get("type",!0),function(i){a[i]&&(n[i]=a[i])}),n},t.prototype.onclick=function(e,a,n){var i=this._brushType,o=this._brushMode;n==="clear"?(a.dispatchAction({type:"axisAreaSelect",intervals:[]}),a.dispatchAction({type:"brush",command:"clear",areas:[]})):a.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?i:i===n?!1:n,brushMode:n==="keep"?o==="multiple"?"single":"multiple":o}})},t.getDefaultOption=function(e){var a={show:!0,type:KD.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])};return a},t}(ga);function JD(r){r.registerComponentView(jD),r.registerComponentModel(XD),r.registerPreprocessor($D),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,FD),r.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(a){a.setAreas(t.areas)})}),r.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},ar),r.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},ar),en("brush",QD)}var lv=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.layoutMode="box",e}return t.prototype.init=function(e,a,n){this.mergeDefaultAndTheme(e,n),this._initData()},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var a=this._data.count();this.option.loop?e=(e%a+a)%a:(e>=a&&(e=a-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e=this.option,a=e.data||[],n=e.axisType,i=this._names=[],o;n==="category"?(o=[],O(a,function(u,d){var c=Oa(fb(u),""),f;Nt(u)?(f=Fe(u),f.value=d):f=d,o.push(f),i.push(c)})):o=a;var l={category:"ordinal",time:"time",value:"number"}[n]||"number",s=this._data=new da([{name:"value",type:l}],this);s.initData(o,i)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(zt),xy=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline.slider",t.defaultOption=Br(lv.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(lv);Ca(xy,Lu.prototype);var eM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline",t}(Ut),tM=function(r){W(t,r);function t(e,a,n,i){var o=r.call(this,e,a,n)||this;return o.type=i||"value",o}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(Ra),ps=Math.PI,sv=ht(),aM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){this.api=a},t.prototype.render=function(e,a,n){if(this.model=e,this.api=n,this.ecModel=a,this.group.removeAll(),e.get("show",!0)){var i=this._layout(e,n),o=this._createGroup("_mainGroup"),l=this._createGroup("_labelGroup"),s=this._axis=this._createAxis(i,e);e.formatTooltip=function(u){var d=s.scale.getLabel({value:u});return ra("nameValue",{noName:!0,value:d})},O(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](i,o,s,e)},this),this._renderAxisLabel(i,l,s,e),this._position(i,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,a){var n=e.get(["label","position"]),i=e.get("orient"),o=nM(e,a),l;n==null||n==="auto"?l=i==="horizontal"?o.y+o.height/2<a.getHeight()/2?"-":"+":o.x+o.width/2<a.getWidth()/2?"+":"-":Re(n)?l={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]:l=n;var s={horizontal:"center",vertical:l>=0||l==="+"?"left":"right"},u={horizontal:l>=0||l==="+"?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:ps/2},c=i==="vertical"?o.height:o.width,f=e.getModel("controlStyle"),p=f.get("show",!0),g=p?f.get("itemSize"):0,v=p?f.get("itemGap"):0,y=g+v,_=e.get(["label","rotate"])||0;_=_*ps/180;var S,w,T,C=f.get("position",!0),k=p&&f.get("showPlayBtn",!0),A=p&&f.get("showPrevBtn",!0),I=p&&f.get("showNextBtn",!0),M=0,D=c;C==="left"||C==="bottom"?(k&&(S=[0,0],M+=y),A&&(w=[M,0],M+=y),I&&(T=[D-g,0],D-=y)):(k&&(S=[D-g,0],D-=y),A&&(w=[0,0],M+=y),I&&(T=[D-g,0],D-=y));var L=[M,D];return e.get("inverse")&&L.reverse(),{viewRect:o,mainLength:c,orient:i,rotation:d[i],labelRotation:_,labelPosOpt:l,labelAlign:e.get(["label","align"])||s[i],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||u[i],playPosition:S,prevBtnPosition:w,nextBtnPosition:T,axisExtent:L,controlSize:g,controlGap:v}},t.prototype._position=function(e,a){var n=this._mainGroup,i=this._labelGroup,o=e.viewRect;if(e.orient==="vertical"){var l=Cn(),s=o.x,u=o.y+o.height;Pr(l,l,[-s,-u]),Fo(l,l,-ps/2),Pr(l,l,[s,u]),o=o.clone(),o.applyTransform(l)}var d=S(o),c=S(n.getBoundingRect()),f=S(i.getBoundingRect()),p=[n.x,n.y],g=[i.x,i.y];g[0]=p[0]=d[0][0];var v=e.labelPosOpt;if(v==null||Re(v)){var y=v==="+"?0:1;w(p,c,d,1,y),w(g,f,d,1,1-y)}else{var y=v>=0?0:1;w(p,c,d,1,y),g[1]=p[1]+v}n.setPosition(p),i.setPosition(g),n.rotation=i.rotation=e.rotation,_(n),_(i);function _(T){T.originX=d[0][0]-T.x,T.originY=d[1][0]-T.y}function S(T){return[[T.x,T.x+T.width],[T.y,T.y+T.height]]}function w(T,C,k,A,I){T[A]+=k[A][I]-C[A][I]}},t.prototype._createAxis=function(e,a){var n=a.getData(),i=a.get("axisType"),o=rM(a,i);o.getTicks=function(){return n.mapArray(["value"],function(u){return{value:u}})};var l=n.getDataExtent("value");o.setExtent(l[0],l[1]),o.calcNiceTicks();var s=new tM("value",o,e.axisExtent,i);return s.model=a,s},t.prototype._createGroup=function(e){var a=this[e]=new xe;return this.group.add(a),a},t.prototype._renderAxisLine=function(e,a,n,i){var o=n.getExtent();if(i.get(["lineStyle","show"])){var l=new xa({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:be({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});a.add(l);var s=this._progressLine=new xa({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:Ne({lineCap:"round",lineWidth:l.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});a.add(s)}},t.prototype._renderAxisTick=function(e,a,n,i){var o=this,l=i.getData(),s=n.scale.getTicks();this._tickSymbols=[],O(s,function(u){var d=n.dataToCoord(u.value),c=l.getItemModel(u.value),f=c.getModel("itemStyle"),p=c.getModel(["emphasis","itemStyle"]),g=c.getModel(["progress","itemStyle"]),v={x:d,y:0,onclick:ye(o._changeTimeline,o,u.value)},y=uv(c,f,a,v);y.ensureState("emphasis").style=p.getItemStyle(),y.ensureState("progress").style=g.getItemStyle(),ln(y);var _=qe(y);c.get("tooltip")?(_.dataIndex=u.value,_.dataModel=i):_.dataIndex=_.dataModel=null,o._tickSymbols.push(y)})},t.prototype._renderAxisLabel=function(e,a,n,i){var o=this,l=n.getLabelModel();if(l.get("show")){var s=i.getData(),u=n.getViewLabels();this._tickLabels=[],O(u,function(d){var c=d.tickValue,f=s.getItemModel(c),p=f.getModel("label"),g=f.getModel(["emphasis","label"]),v=f.getModel(["progress","label"]),y=n.dataToCoord(d.tickValue),_=new Xe({x:y,y:0,rotation:e.labelRotation-e.rotation,onclick:ye(o._changeTimeline,o,c),silent:!1,style:lt(p,{text:d.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});_.ensureState("emphasis").style=lt(g),_.ensureState("progress").style=lt(v),a.add(_),ln(_),sv(_).dataIndex=c,o._tickLabels.push(_)})}},t.prototype._renderControl=function(e,a,n,i){var o=e.controlSize,l=e.rotation,s=i.getModel("controlStyle").getItemStyle(),u=i.getModel(["emphasis","controlStyle"]).getItemStyle(),d=i.getPlayState(),c=i.get("inverse",!0);f(e.nextBtnPosition,"next",ye(this._changeTimeline,this,c?"-":"+")),f(e.prevBtnPosition,"prev",ye(this._changeTimeline,this,c?"+":"-")),f(e.playPosition,d?"stop":"play",ye(this._handlePlayClick,this,!d),!0);function f(p,g,v,y){if(p){var _=Es(At(i.get(["controlStyle",g+"BtnSize"]),o),o),S=[0,-_/2,_,_],w=iM(i,g+"Icon",S,{x:p[0],y:p[1],originX:o/2,originY:0,rotation:y?-l:0,rectHover:!0,style:s,onclick:v});w.ensureState("emphasis").style=u,a.add(w),ln(w)}}},t.prototype._renderCurrentPointer=function(e,a,n,i){var o=i.getData(),l=i.getCurrentIndex(),s=o.getItemModel(l).getModel("checkpointStyle"),u=this,d={onCreate:function(c){c.draggable=!0,c.drift=ye(u._handlePointerDrag,u),c.ondragend=ye(u._handlePointerDragend,u),dv(c,u._progressLine,l,n,i,!0)},onUpdate:function(c){dv(c,u._progressLine,l,n,i)}};this._currentPointer=uv(s,s,this._mainGroup,{},this._currentPointer,d)},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,a,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,a){var n=this._toAxisCoord(e)[0],i=this._axis,o=ha(i.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var l=this._progressLine;l&&(l.shape.x2=n,l.dirty());var s=this._findNearestTick(n),u=this.model;(a||s!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(s)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var a=e.model;e._changeTimeline(a.getCurrentIndex()+(a.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){var a=this._mainGroup.getLocalTransform();return Ja(e,a,!0)},t.prototype._findNearestTick=function(e){var a=this.model.getData(),n=1/0,i,o=this._axis;return a.each(["value"],function(l,s){var u=o.dataToCoord(l),d=Math.abs(u-e);d<n&&(n=d,i=s)}),i},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var a=this.model.getCurrentIndex();e==="+"?e=a+1:e==="-"&&(e=a-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),a=this._tickSymbols,n=this._tickLabels;if(a)for(var i=0;i<a.length;i++)a&&a[i]&&a[i].toggleState("progress",i<e);if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",sv(n[i]).dataIndex<=e)},t.type="timeline.slider",t}(eM);function rM(r,t){if(t=t||r.get("type"),t)switch(t){case"category":return new vb({ordinalMeta:r.getCategories(),extent:[1/0,-1/0]});case"time":return new pb({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new Ds}}function nM(r,t){return Kt(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},r.get("padding"))}function iM(r,t,e,a){var n=a.style,i=Pu(r.get(["controlStyle",t]),a||{},new st(e[0],e[1],e[2],e[3]));return n&&i.setStyle(n),i}function uv(r,t,e,a,n,i){var o=t.get("color");if(n)n.setColor(o),e.add(n),i&&i.onUpdate(n);else{var l=r.get("symbol");n=St(l,-1,-1,2,2,o),n.setStyle("strokeNoScale",!0),e.add(n),i&&i.onCreate(n)}var s=t.getItemStyle(["color"]);n.setStyle(s),a=rt({rectHover:!0,z2:100},a,!0);var u=xn(r.get("symbolSize"));a.scaleX=u[0]/2,a.scaleY=u[1]/2;var d=wn(r.get("symbolOffset"),u);d&&(a.x=(a.x||0)+d[0],a.y=(a.y||0)+d[1]);var c=r.get("symbolRotate");return a.rotation=(c||0)*Math.PI/180||0,n.attr(a),n.updateTransform(),n}function dv(r,t,e,a,n,i){if(!r.dragging){var o=n.getModel("checkpointStyle"),l=a.dataToCoord(n.getData().get("value",e));if(i||!o.get("animation",!0))r.attr({x:l,y:0}),t&&t.attr({shape:{x2:l}});else{var s={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};r.stopAnimation(null,!0),r.animateTo({x:l,y:0},s),t&&t.animateTo({shape:{x2:l}},s)}}}function oM(r){r.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e,a){var n=e.getComponent("timeline");return n&&t.currentIndex!=null&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),a.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Ne({currentIndex:n.option.currentIndex},t)}),r.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var a=e.getComponent("timeline");a&&t.playState!=null&&a.setPlayState(t.playState)})}function lM(r){var t=r&&r.timeline;ge(t)||(t=t?[t]:[]),O(t,function(e){e&&sM(e)})}function sM(r){var t=r.type,e={number:"value",time:"time"};if(e[t]&&(r.axisType=e[t],delete r.type),cv(r),_r(r,"controlPosition")){var a=r.controlStyle||(r.controlStyle={});_r(a,"position")||(a.position=r.controlPosition),a.position==="none"&&!_r(a,"show")&&(a.show=!1,delete a.position),delete r.controlPosition}O(r.data||[],function(n){Nt(n)&&!ge(n)&&(!_r(n,"value")&&_r(n,"name")&&(n.value=n.name),cv(n))})}function cv(r){var t=r.itemStyle||(r.itemStyle={}),e=t.emphasis||(t.emphasis={}),a=r.label||r.label||{},n=a.normal||(a.normal={}),i={normal:1,emphasis:1};O(a,function(o,l){!i[l]&&!_r(n,l)&&(n[l]=o)}),e.label&&!_r(a,"emphasis")&&(a.emphasis=e.label,delete e.label)}function _r(r,t){return r.hasOwnProperty(t)}function uM(r){r.registerComponentModel(xy),r.registerComponentView(aM),r.registerSubTypeDefaulter("timeline",function(){return"slider"}),oM(r),r.registerPreprocessor(lM)}function Ad(r,t){if(!r)return!1;for(var e=ge(r)?r:[r],a=0;a<e.length;a++)if(e[a]&&e[a][t])return!0;return!1}function Yi(r){Wo(r,"label",["show"])}var ji=ht(),Fa=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.createdBySelf=!1,e}return t.prototype.init=function(e,a,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(ih.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,a){this._mergeOption(e,a,!1,!1)},t.prototype._mergeOption=function(e,a,n,i){var o=this.mainType;n||a.eachSeries(function(l){var s=l.get(this.mainType,!0),u=ji(l)[o];if(!s||!s.data){ji(l)[o]=null;return}u?u._mergeOption(s,a,!0):(i&&Yi(s),O(s.data,function(d){d instanceof Array?(Yi(d[0]),Yi(d[1])):Yi(d)}),u=this.createMarkerModelFromSeries(s,this,a),be(u,{mainType:this.mainType,seriesIndex:l.seriesIndex,name:l.name,createdBySelf:!0}),u.__hostSeries=l),ji(l)[o]=u},this)},t.prototype.formatTooltip=function(e,a,n){var i=this.getData(),o=this.getRawValue(e),l=i.getName(e);return ra("section",{header:this.name,blocks:[ra("nameValue",{name:l,value:o,noName:!l,noValue:o==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.prototype.getDataParams=function(e,a){var n=Lu.prototype.getDataParams.call(this,e,a),i=this.__hostSeries;return i&&(n.seriesId=i.id,n.seriesName=i.name,n.seriesType=i.subType),n},t.getMarkerModelFromSeries=function(e,a){return ji(e)[a]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(zt);Ca(Fa,Lu.prototype);var dM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,a,n){return new t(e,a,n)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(Fa);function cu(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function cM(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function Zi(r,t,e,a,n,i){var o=[],l=fn(t,a),s=l?t.getCalculationInfo("stackResultDimension"):a,u=Id(t,s,r),d=t.indicesOfNearest(s,u)[0];o[n]=t.get(e,d),o[i]=t.get(s,d);var c=t.get(a,d),f=gb(t.get(a,d));return f=Math.min(f,20),f>=0&&(o[i]=+o[i].toFixed(f)),[o,c]}var vs={min:Ve(Zi,"min"),max:Ve(Zi,"max"),average:Ve(Zi,"average"),median:Ve(Zi,"median")};function pi(r,t){if(t){var e=r.getData(),a=r.coordinateSystem,n=a&&a.dimensions;if(!cM(t)&&!ge(t.coord)&&ge(n)){var i=Ty(t,e,a,r);if(t=Fe(t),t.type&&vs[t.type]&&i.baseAxis&&i.valueAxis){var o=nt(n,i.baseAxis.dim),l=nt(n,i.valueAxis.dim),s=vs[t.type](e,i.baseDataDim,i.valueDataDim,o,l);t.coord=s[0],t.value=s[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!ge(n))t.coord=[];else for(var u=t.coord,d=0;d<2;d++)vs[u[d]]&&(u[d]=Id(e,e.mapDimension(n[d]),u[d]));return t}}function Ty(r,t,e,a){var n={};return r.valueIndex!=null||r.valueDim!=null?(n.valueDataDim=r.valueIndex!=null?t.getDimension(r.valueIndex):r.valueDim,n.valueAxis=e.getAxis(fM(a,n.valueDataDim)),n.baseAxis=e.getOtherAxis(n.valueAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim)):(n.baseAxis=a.getBaseAxis(),n.valueAxis=e.getOtherAxis(n.baseAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim),n.valueDataDim=t.mapDimension(n.valueAxis.dim)),n}function fM(r,t){var e=r.getData().getDimensionInfo(t);return e&&e.coordDim}function vi(r,t){return r&&r.containData&&t.coord&&!cu(t)?r.containData(t.coord):!0}function pM(r,t,e){return r&&r.containZone&&t.coord&&e.coord&&!cu(t)&&!cu(e)?r.containZone(t.coord,e.coord):!0}function Cy(r,t){return r?function(e,a,n,i){var o=i<2?e.coord&&e.coord[i]:e.value;return uo(o,t[i])}:function(e,a,n,i){return uo(e.value,t[i])}}function Id(r,t,e){if(e==="average"){var a=0,n=0;return r.each(t,function(i,o){isNaN(i)||(a+=i,n++)}),a/n}else return e==="median"?r.getMedian(t):r.getDataExtent(t)[e==="max"?1:0]}var gs=ht(),Dd=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this.markerGroupMap=Pe()},t.prototype.render=function(e,a,n){var i=this,o=this.markerGroupMap;o.each(function(l){gs(l).keep=!1}),a.eachSeries(function(l){var s=Fa.getMarkerModelFromSeries(l,i.type);s&&i.renderSeries(l,s,a,n)}),o.each(function(l){!gs(l).keep&&i.group.remove(l.group)})},t.prototype.markKeep=function(e){gs(e).keep=!0},t.prototype.toggleBlurSeries=function(e,a){var n=this;O(e,function(i){var o=Fa.getMarkerModelFromSeries(i,n.type);if(o){var l=o.getData();l.eachItemGraphicEl(function(s){s&&(a?hb(s):mb(s))})}})},t.type="marker",t}(Ut);function fv(r,t,e){var a=t.coordinateSystem;r.each(function(n){var i=r.getItemModel(n),o,l=de(i.get("x"),e.getWidth()),s=de(i.get("y"),e.getHeight());if(!isNaN(l)&&!isNaN(s))o=[l,s];else if(t.getMarkerPosition)o=t.getMarkerPosition(r.getValues(r.dimensions,n));else if(a){var u=r.get(a.dimensions[0],n),d=r.get(a.dimensions[1],n);o=a.dataToPoint([u,d])}isNaN(l)||(o[0]=l),isNaN(s)||(o[1]=s),r.setItemLayout(n,o)})}var vM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,a,n){a.eachSeries(function(i){var o=Fa.getMarkerModelFromSeries(i,"markPoint");o&&(fv(o.getData(),i,n),this.markerGroupMap.get(i.id).updateLayout())},this)},t.prototype.renderSeries=function(e,a,n,i){var o=e.coordinateSystem,l=e.id,s=e.getData(),u=this.markerGroupMap,d=u.get(l)||u.set(l,new Ai),c=gM(o,e,a);a.setData(c),fv(a.getData(),e,i),c.each(function(f){var p=c.getItemModel(f),g=p.getShallow("symbol"),v=p.getShallow("symbolSize"),y=p.getShallow("symbolRotate"),_=p.getShallow("symbolOffset"),S=p.getShallow("symbolKeepAspect");if(Be(g)||Be(v)||Be(y)||Be(_)){var w=a.getRawValue(f),T=a.getDataParams(f);Be(g)&&(g=g(w,T)),Be(v)&&(v=v(w,T)),Be(y)&&(y=y(w,T)),Be(_)&&(_=_(w,T))}var C=p.getModel("itemStyle").getItemStyle(),k=Ko(s,"color");C.fill||(C.fill=k),c.setItemVisual(f,{symbol:g,symbolSize:v,symbolRotate:y,symbolOffset:_,symbolKeepAspect:S,style:C})}),d.updateData(c),this.group.add(d.group),c.eachItemGraphicEl(function(f){f.traverse(function(p){qe(p).dataModel=a})}),this.markKeep(d),d.group.silent=a.get("silent")||e.get("silent")},t.type="markPoint",t}(Dd);function gM(r,t,e){var a;r?a=ne(r&&r.dimensions,function(l){var s=t.getData().getDimensionInfo(t.getData().mapDimension(l))||{};return be(be({},s),{name:l,ordinalMeta:null})}):a=[{name:"value",type:"float"}];var n=new da(a,e),i=ne(e.get("data"),Ve(pi,t));r&&(i=bt(i,Ve(vi,r)));var o=Cy(!!r,a);return n.initData(i,null,o),n}function hM(r){r.registerComponentModel(dM),r.registerComponentView(vM),r.registerPreprocessor(function(t){Ad(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var mM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,a,n){return new t(e,a,n)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Fa),Xi=ht(),yM=function(r,t,e,a){var n=r.getData(),i;if(ge(a))i=a;else{var o=a.type;if(o==="min"||o==="max"||o==="average"||o==="median"||a.xAxis!=null||a.yAxis!=null){var l=void 0,s=void 0;if(a.yAxis!=null||a.xAxis!=null)l=t.getAxis(a.yAxis!=null?"y":"x"),s=ua(a.yAxis,a.xAxis);else{var u=Ty(a,n,t,r);l=u.valueAxis;var d=yb(n,u.valueDataDim);s=Id(n,d,o)}var c=l.dim==="x"?0:1,f=1-c,p=Fe(a),g={coord:[]};p.type=null,p.coord=[],p.coord[f]=-1/0,g.coord[f]=1/0;var v=e.get("precision");v>=0&&aa(s)&&(s=+s.toFixed(Math.min(v,20))),p.coord[c]=g.coord[c]=s,i=[p,g,{type:o,valueIndex:a.valueIndex,value:s}]}else i=[]}var y=[pi(r,i[0]),pi(r,i[1]),be({},i[2])];return y[2].type=y[2].type||null,rt(y[2],y[0]),rt(y[2],y[1]),y};function ko(r){return!isNaN(r)&&!isFinite(r)}function pv(r,t,e,a){var n=1-r,i=a.dimensions[r];return ko(t[n])&&ko(e[n])&&t[r]===e[r]&&a.getAxis(i).containData(t[r])}function bM(r,t){if(r.type==="cartesian2d"){var e=t[0].coord,a=t[1].coord;if(e&&a&&(pv(1,e,a,r)||pv(0,e,a,r)))return!0}return vi(r,t[0])&&vi(r,t[1])}function hs(r,t,e,a,n){var i=a.coordinateSystem,o=r.getItemModel(t),l,s=de(o.get("x"),n.getWidth()),u=de(o.get("y"),n.getHeight());if(!isNaN(s)&&!isNaN(u))l=[s,u];else{if(a.getMarkerPosition)l=a.getMarkerPosition(r.getValues(r.dimensions,t));else{var d=i.dimensions,c=r.get(d[0],t),f=r.get(d[1],t);l=i.dataToPoint([c,f])}if(yi(i,"cartesian2d")){var p=i.getAxis("x"),g=i.getAxis("y"),d=i.dimensions;ko(r.get(d[0],t))?l[0]=p.toGlobalCoord(p.getExtent()[e?0:1]):ko(r.get(d[1],t))&&(l[1]=g.toGlobalCoord(g.getExtent()[e?0:1]))}isNaN(s)||(l[0]=s),isNaN(u)||(l[1]=u)}r.setItemLayout(t,l)}var _M=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,a,n){a.eachSeries(function(i){var o=Fa.getMarkerModelFromSeries(i,"markLine");if(o){var l=o.getData(),s=Xi(o).from,u=Xi(o).to;s.each(function(d){hs(s,d,!0,i,n),hs(u,d,!1,i,n)}),l.each(function(d){l.setItemLayout(d,[s.getItemLayout(d),u.getItemLayout(d)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,a,n,i){var o=e.coordinateSystem,l=e.id,s=e.getData(),u=this.markerGroupMap,d=u.get(l)||u.set(l,new rd);this.group.add(d.group);var c=SM(o,e,a),f=c.from,p=c.to,g=c.line;Xi(a).from=f,Xi(a).to=p,a.setData(g);var v=a.get("symbol"),y=a.get("symbolSize"),_=a.get("symbolRotate"),S=a.get("symbolOffset");ge(v)||(v=[v,v]),ge(y)||(y=[y,y]),ge(_)||(_=[_,_]),ge(S)||(S=[S,S]),c.from.each(function(T){w(f,T,!0),w(p,T,!1)}),g.each(function(T){var C=g.getItemModel(T).getModel("lineStyle").getLineStyle();g.setItemLayout(T,[f.getItemLayout(T),p.getItemLayout(T)]),C.stroke==null&&(C.stroke=f.getItemVisual(T,"style").fill),g.setItemVisual(T,{fromSymbolKeepAspect:f.getItemVisual(T,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(T,"symbolOffset"),fromSymbolRotate:f.getItemVisual(T,"symbolRotate"),fromSymbolSize:f.getItemVisual(T,"symbolSize"),fromSymbol:f.getItemVisual(T,"symbol"),toSymbolKeepAspect:p.getItemVisual(T,"symbolKeepAspect"),toSymbolOffset:p.getItemVisual(T,"symbolOffset"),toSymbolRotate:p.getItemVisual(T,"symbolRotate"),toSymbolSize:p.getItemVisual(T,"symbolSize"),toSymbol:p.getItemVisual(T,"symbol"),style:C})}),d.updateData(g),c.line.eachItemGraphicEl(function(T){qe(T).dataModel=a,T.traverse(function(C){qe(C).dataModel=a})});function w(T,C,k){var A=T.getItemModel(C);hs(T,C,k,e,i);var I=A.getModel("itemStyle").getItemStyle();I.fill==null&&(I.fill=Ko(s,"color")),T.setItemVisual(C,{symbolKeepAspect:A.get("symbolKeepAspect"),symbolOffset:At(A.get("symbolOffset",!0),S[k?0:1]),symbolRotate:At(A.get("symbolRotate",!0),_[k?0:1]),symbolSize:At(A.get("symbolSize"),y[k?0:1]),symbol:At(A.get("symbol",!0),v[k?0:1]),style:I})}this.markKeep(d),d.group.silent=a.get("silent")||e.get("silent")},t.type="markLine",t}(Dd);function SM(r,t,e){var a;r?a=ne(r&&r.dimensions,function(u){var d=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return be(be({},d),{name:u,ordinalMeta:null})}):a=[{name:"value",type:"float"}];var n=new da(a,e),i=new da(a,e),o=new da([],e),l=ne(e.get("data"),Ve(yM,t,r,e));r&&(l=bt(l,Ve(bM,r)));var s=Cy(!!r,a);return n.initData(ne(l,function(u){return u[0]}),null,s),i.initData(ne(l,function(u){return u[1]}),null,s),o.initData(ne(l,function(u){return u[2]})),o.hasItemOption=!0,{from:n,to:i,line:o}}function wM(r){r.registerComponentModel(mM),r.registerComponentView(_M),r.registerPreprocessor(function(t){Ad(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var xM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,a,n){return new t(e,a,n)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(Fa),Ki=ht(),TM=function(r,t,e,a){var n=a[0],i=a[1];if(!(!n||!i)){var o=pi(r,n),l=pi(r,i),s=o.coord,u=l.coord;s[0]=ua(s[0],-1/0),s[1]=ua(s[1],-1/0),u[0]=ua(u[0],1/0),u[1]=ua(u[1],1/0);var d=wu([{},o,l]);return d.coord=[o.coord,l.coord],d.x0=o.x,d.y0=o.y,d.x1=l.x,d.y1=l.y,d}};function Ao(r){return!isNaN(r)&&!isFinite(r)}function vv(r,t,e,a){var n=1-r;return Ao(t[n])&&Ao(e[n])}function CM(r,t){var e=t.coord[0],a=t.coord[1],n={coord:e,x:t.x0,y:t.y0},i={coord:a,x:t.x1,y:t.y1};return yi(r,"cartesian2d")?e&&a&&(vv(1,e,a)||vv(0,e,a))?!0:pM(r,n,i):vi(r,n)||vi(r,i)}function gv(r,t,e,a,n){var i=a.coordinateSystem,o=r.getItemModel(t),l,s=de(o.get(e[0]),n.getWidth()),u=de(o.get(e[1]),n.getHeight());if(!isNaN(s)&&!isNaN(u))l=[s,u];else{if(a.getMarkerPosition){var d=r.getValues(["x0","y0"],t),c=r.getValues(["x1","y1"],t),f=i.clampData(d),p=i.clampData(c),g=[];e[0]==="x0"?g[0]=f[0]>p[0]?c[0]:d[0]:g[0]=f[0]>p[0]?d[0]:c[0],e[1]==="y0"?g[1]=f[1]>p[1]?c[1]:d[1]:g[1]=f[1]>p[1]?d[1]:c[1],l=a.getMarkerPosition(g,e,!0)}else{var v=r.get(e[0],t),y=r.get(e[1],t),_=[v,y];i.clampData&&i.clampData(_,_),l=i.dataToPoint(_,!0)}if(yi(i,"cartesian2d")){var S=i.getAxis("x"),w=i.getAxis("y"),v=r.get(e[0],t),y=r.get(e[1],t);Ao(v)?l[0]=S.toGlobalCoord(S.getExtent()[e[0]==="x0"?0:1]):Ao(y)&&(l[1]=w.toGlobalCoord(w.getExtent()[e[1]==="y0"?0:1]))}isNaN(s)||(l[0]=s),isNaN(u)||(l[1]=u)}return l}var hv=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],kM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,a,n){a.eachSeries(function(i){var o=Fa.getMarkerModelFromSeries(i,"markArea");if(o){var l=o.getData();l.each(function(s){var u=ne(hv,function(c){return gv(l,s,c,i,n)});l.setItemLayout(s,u);var d=l.getItemGraphicEl(s);d.setShape("points",u)})}},this)},t.prototype.renderSeries=function(e,a,n,i){var o=e.coordinateSystem,l=e.id,s=e.getData(),u=this.markerGroupMap,d=u.get(l)||u.set(l,{group:new xe});this.group.add(d.group),this.markKeep(d);var c=AM(o,e,a);a.setData(c),c.each(function(f){var p=ne(hv,function(I){return gv(c,f,I,e,i)}),g=o.getAxis("x").scale,v=o.getAxis("y").scale,y=g.getExtent(),_=v.getExtent(),S=[g.parse(c.get("x0",f)),g.parse(c.get("x1",f))],w=[v.parse(c.get("y0",f)),v.parse(c.get("y1",f))];ha(S),ha(w);var T=!(y[0]>S[1]||y[1]<S[0]||_[0]>w[1]||_[1]<w[0]),C=!T;c.setItemLayout(f,{points:p,allClipped:C});var k=c.getItemModel(f).getModel("itemStyle").getItemStyle(),A=Ko(s,"color");k.fill||(k.fill=A,Re(k.fill)&&(k.fill=oo(k.fill,.4))),k.stroke||(k.stroke=A),c.setItemVisual(f,"style",k)}),c.diff(Ki(d).data).add(function(f){var p=c.getItemLayout(f);if(!p.allClipped){var g=new ya({shape:{points:p.points}});c.setItemGraphicEl(f,g),d.group.add(g)}}).update(function(f,p){var g=Ki(d).data.getItemGraphicEl(p),v=c.getItemLayout(f);v.allClipped?g&&d.group.remove(g):(g?Ke(g,{shape:{points:v.points}},a,f):g=new ya({shape:{points:v.points}}),c.setItemGraphicEl(f,g),d.group.add(g))}).remove(function(f){var p=Ki(d).data.getItemGraphicEl(f);d.group.remove(p)}).execute(),c.eachItemGraphicEl(function(f,p){var g=c.getItemModel(p),v=c.getItemVisual(p,"style");f.useStyle(c.getItemVisual(p,"style")),Zt(f,Ot(g),{labelFetcher:a,labelDataIndex:p,defaultText:c.getName(p)||"",inheritColor:Re(v.fill)?oo(v.fill,1):"#000"}),Xt(f,g),dt(f,null,null,g.get(["emphasis","disabled"])),qe(f).dataModel=a}),Ki(d).data=c,d.group.silent=a.get("silent")||e.get("silent")},t.type="markArea",t}(Dd);function AM(r,t,e){var a,n,i=["x0","y0","x1","y1"];if(r){var o=ne(r&&r.dimensions,function(u){var d=t.getData(),c=d.getDimensionInfo(d.mapDimension(u))||{};return be(be({},c),{name:u,ordinalMeta:null})});n=ne(i,function(u,d){return{name:u,type:o[d%2].type}}),a=new da(n,e)}else n=[{name:"value",type:"float"}],a=new da(n,e);var l=ne(e.get("data"),Ve(TM,t,r,e));r&&(l=bt(l,Ve(CM,r)));var s=r?function(u,d,c,f){var p=u.coord[Math.floor(f/2)][f%2];return uo(p,n[f])}:function(u,d,c,f){return uo(u.value,n[f])};return a.initData(l,null,s),a.hasItemOption=!0,a}function IM(r){r.registerComponentModel(xM),r.registerComponentView(kM),r.registerPreprocessor(function(t){Ad(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var DM=function(r,t){if(t==="all")return{type:"all",title:r.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:r.getLocaleModel().get(["legend","selector","inverse"])}},fu=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.prototype.init=function(e,a,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(e,a){r.prototype.mergeOption.call(this,e,a),this._updateSelector(e)},t.prototype._updateSelector=function(e){var a=e.selector,n=this.ecModel;a===!0&&(a=e.selector=["all","inverse"]),ge(a)&&O(a,function(i,o){Re(i)&&(i={type:i}),a[o]=rt(i,DM(n,i.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var a=!1,n=0;n<e.length;n++){var i=e[n].get("name");if(this.isSelected(i)){this.select(i),a=!0;break}}!a&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var a=[],n=[];e.eachRawSeries(function(s){var u=s.name;n.push(u);var d;if(s.legendVisualProvider){var c=s.legendVisualProvider,f=c.getAllNames();e.isSeriesFiltered(s)||(n=n.concat(f)),f.length?a=a.concat(f):d=!0}else d=!0;d&&bb(s)&&a.push(s.name)}),this._availableNames=n;var i=this.get("data")||a,o=Pe(),l=ne(i,function(s){return(Re(s)||aa(s))&&(s={name:s}),o.get(s.name)?null:(o.set(s.name,!0),new na(s,this,this.ecModel))},this);this._data=bt(l,function(s){return!!s})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var a=this.option.selected,n=this.get("selectedMode");if(n==="single"){var i=this._data;O(i,function(o){a[o.get("name")]=!1})}a[e]=!0},t.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var a=this.option.selected;a.hasOwnProperty(e)||(a[e]=!0),this[a[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,a=this.option.selected;O(e,function(n){a[n.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,a=this.option.selected;O(e,function(n){var i=n.get("name",!0);a.hasOwnProperty(i)||(a[i]=!0),a[i]=!a[i]})},t.prototype.isSelected=function(e){var a=this.option.selected;return!(a.hasOwnProperty(e)&&!a[e])&&nt(this._availableNames,e)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(zt),jr=Ve,pu=O,Qi=xe,ky=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!1,e}return t.prototype.init=function(){this.group.add(this._contentGroup=new Qi),this.group.add(this._selectorGroup=new Qi),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,a,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var o=e.get("align"),l=e.get("orient");(!o||o==="auto")&&(o=e.get("left")==="right"&&l==="vertical"?"right":"left");var s=e.get("selector",!0),u=e.get("selectorPosition",!0);s&&(!u||u==="auto")&&(u=l==="horizontal"?"end":"start"),this.renderInner(o,e,a,n,s,l,u);var d=e.getBoxLayoutParams(),c={width:n.getWidth(),height:n.getHeight()},f=e.get("padding"),p=Kt(d,c,f),g=this.layoutInner(e,o,p,i,s,u),v=Kt(Ne({width:g.width,height:g.height},d),c,f);this.group.x=v.x-g.x,this.group.y=v.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=yy(g,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,a,n,i,o,l,s){var u=this.getContentGroup(),d=Pe(),c=a.get("selectedMode"),f=[];n.eachRawSeries(function(p){!p.get("legendHoverLink")&&f.push(p.id)}),pu(a.getData(),function(p,g){var v=p.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var y=new Qi;y.newline=!0,u.add(y);return}var _=n.getSeriesByName(v)[0];if(!d.get(v))if(_){var S=_.getData(),w=S.getVisual("legendLineStyle")||{},T=S.getVisual("legendIcon"),C=S.getVisual("style"),k=this._createItem(_,v,g,p,a,e,w,C,T,c,i);k.on("click",jr(mv,v,null,i,f)).on("mouseover",jr(vu,_.name,null,i,f)).on("mouseout",jr(gu,_.name,null,i,f)),n.ssr&&k.eachChild(function(A){var I=qe(A);I.seriesIndex=_.seriesIndex,I.dataIndex=g,I.ssrType="legend"}),d.set(v,!0)}else n.eachRawSeries(function(A){if(!d.get(v)&&A.legendVisualProvider){var I=A.legendVisualProvider;if(!I.containName(v))return;var M=I.indexOfName(v),D=I.getItemVisual(M,"style"),L=I.getItemVisual(M,"legendIcon"),E=Wg(D.fill);E&&E[3]===0&&(E[3]=.2,D=be(be({},D),{fill:Ji(E,"rgba")}));var R=this._createItem(A,v,g,p,a,e,{},D,L,c,i);R.on("click",jr(mv,null,v,i,f)).on("mouseover",jr(vu,null,v,i,f)).on("mouseout",jr(gu,null,v,i,f)),n.ssr&&R.eachChild(function(V){var z=qe(V);z.seriesIndex=A.seriesIndex,z.dataIndex=g,z.ssrType="legend"}),d.set(v,!0)}},this)},this),o&&this._createSelector(o,a,i,l,s)},t.prototype._createSelector=function(e,a,n,i,o){var l=this.getSelectorGroup();pu(e,function(u){var d=u.type,c=new Xe({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:d==="all"?"legendAllSelect":"legendInverseSelect"})}});l.add(c);var f=a.getModel("selectorLabel"),p=a.getModel(["emphasis","selectorLabel"]);Zt(c,{normal:f,emphasis:p},{defaultText:u.title}),ln(c)})},t.prototype._createItem=function(e,a,n,i,o,l,s,u,d,c,f){var p=e.visualDrawType,g=o.get("itemWidth"),v=o.get("itemHeight"),y=o.isSelected(a),_=i.get("symbolRotate"),S=i.get("symbolKeepAspect"),w=i.get("icon");d=w||d||"roundRect";var T=MM(d,i,s,u,p,y,f),C=new Qi,k=i.getModel("textStyle");if(Be(e.getLegendIcon)&&(!w||w==="inherit"))C.add(e.getLegendIcon({itemWidth:g,itemHeight:v,icon:d,iconRotate:_,itemStyle:T.itemStyle,lineStyle:T.lineStyle,symbolKeepAspect:S}));else{var A=w==="inherit"&&e.getData().getVisual("symbol")?_==="inherit"?e.getData().getVisual("symbolRotate"):_:0;C.add(PM({itemWidth:g,itemHeight:v,icon:d,iconRotate:A,itemStyle:T.itemStyle,symbolKeepAspect:S}))}var I=l==="left"?g+5:-5,M=l,D=o.get("formatter"),L=a;Re(D)&&D?L=D.replace("{name}",a??""):Be(D)&&(L=D(a));var E=y?k.getTextColor():i.get("inactiveColor");C.add(new Xe({style:lt(k,{text:L,x:I,y:v/2,fill:E,align:M,verticalAlign:"middle"},{inheritColor:E})}));var R=new et({shape:C.getBoundingRect(),style:{fill:"transparent"}}),V=i.getModel("tooltip");return V.get("show")&&Ho({el:R,componentModel:o,itemName:a,itemTooltipOption:V.option}),C.add(R),C.eachChild(function(z){z.silent=!0}),R.silent=!c,this.getContentGroup().add(C),ln(C),C.__legendDataIndex=n,C},t.prototype.layoutInner=function(e,a,n,i,o,l){var s=this.getContentGroup(),u=this.getSelectorGroup();Tr(e.get("orient"),s,e.get("itemGap"),n.width,n.height);var d=s.getBoundingRect(),c=[-d.x,-d.y];if(u.markRedraw(),s.markRedraw(),o){Tr("horizontal",u,e.get("selectorItemGap",!0));var f=u.getBoundingRect(),p=[-f.x,-f.y],g=e.get("selectorButtonGap",!0),v=e.getOrient().index,y=v===0?"width":"height",_=v===0?"height":"width",S=v===0?"y":"x";l==="end"?p[v]+=d[y]+g:c[v]+=f[y]+g,p[1-v]+=d[_]/2-f[_]/2,u.x=p[0],u.y=p[1],s.x=c[0],s.y=c[1];var w={x:0,y:0};return w[y]=d[y]+g+f[y],w[_]=Math.max(d[_],f[_]),w[S]=Math.min(0,f[S]+p[1-v]),w}else return s.x=c[0],s.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Ut);function MM(r,t,e,a,n,i,o){function l(y,_){y.lineWidth==="auto"&&(y.lineWidth=_.lineWidth>0?2:0),pu(y,function(S,w){y[w]==="inherit"&&(y[w]=_[w])})}var s=t.getModel("itemStyle"),u=s.getItemStyle(),d=r.lastIndexOf("empty",0)===0?"fill":"stroke",c=s.getShallow("decal");u.decal=!c||c==="inherit"?a.decal:Uo(c,o),u.fill==="inherit"&&(u.fill=a[n]),u.stroke==="inherit"&&(u.stroke=a[d]),u.opacity==="inherit"&&(u.opacity=(n==="fill"?a:e).opacity),l(u,a);var f=t.getModel("lineStyle"),p=f.getLineStyle();if(l(p,e),u.fill==="auto"&&(u.fill=a.fill),u.stroke==="auto"&&(u.stroke=a.fill),p.stroke==="auto"&&(p.stroke=a.fill),!i){var g=t.get("inactiveBorderWidth"),v=u[d];u.lineWidth=g==="auto"?a.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),p.stroke=f.get("inactiveColor"),p.lineWidth=f.get("inactiveWidth")}return{itemStyle:u,lineStyle:p}}function PM(r){var t=r.icon||"roundRect",e=St(t,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill,r.symbolKeepAspect);return e.setStyle(r.itemStyle),e.rotation=(r.iconRotate||0)*Math.PI/180,e.setOrigin([r.itemWidth/2,r.itemHeight/2]),t.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function mv(r,t,e,a){gu(r,t,e,a),e.dispatchAction({type:"legendToggleSelect",name:r??t}),vu(r,t,e,a)}function Ay(r){for(var t=r.getZr().storage.getDisplayList(),e,a=0,n=t.length;a<n&&!(e=t[a].states.emphasis);)a++;return e&&e.hoverLayer}function vu(r,t,e,a){Ay(e)||e.dispatchAction({type:"highlight",seriesName:r,name:t,excludeSeriesId:a})}function gu(r,t,e,a){Ay(e)||e.dispatchAction({type:"downplay",seriesName:r,name:t,excludeSeriesId:a})}function LM(r){var t=r.findComponents({mainType:"legend"});t&&t.length&&r.filterSeries(function(e){for(var a=0;a<t.length;a++)if(!t[a].isSelected(e.name))return!1;return!0})}function En(r,t,e){var a={},n=r==="toggleSelected",i;return e.eachComponent("legend",function(o){n&&i!=null?o[i?"select":"unSelect"](t.name):r==="allSelect"||r==="inverseSelect"?o[r]():(o[r](t.name),i=o.isSelected(t.name));var l=o.getData();O(l,function(s){var u=s.get("name");if(!(u===`
`||u==="")){var d=o.isSelected(u);a.hasOwnProperty(u)?a[u]=a[u]&&d:a[u]=d}})}),r==="allSelect"||r==="inverseSelect"?{selected:a}:{name:t.name,selected:a}}function VM(r){r.registerAction("legendToggleSelect","legendselectchanged",Ve(En,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",Ve(En,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",Ve(En,"inverseSelect")),r.registerAction("legendSelect","legendselected",Ve(En,"select")),r.registerAction("legendUnSelect","legendunselected",Ve(En,"unSelect"))}function Iy(r){r.registerComponentModel(fu),r.registerComponentView(ky),r.registerProcessor(r.PRIORITY.PROCESSOR.SERIES_FILTER,LM),r.registerSubTypeDefaulter("legend",function(){return"plain"}),VM(r)}var RM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(e,a,n){var i=Du(e);r.prototype.init.call(this,e,a,n),yv(this,e,i)},t.prototype.mergeOption=function(e,a){r.prototype.mergeOption.call(this,e,a),yv(this,this.option,e)},t.type="legend.scroll",t.defaultOption=Br(fu.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(fu);function yv(r,t,e){var a=r.getOrient(),n=[1,1];n[a.index]=0,Mu(t,e,{type:"box",ignoreSize:!!n})}var bv=xe,ms=["width","height"],ys=["x","y"],EM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!0,e._currentIndex=0,e}return t.prototype.init=function(){r.prototype.init.call(this),this.group.add(this._containerGroup=new bv),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new bv)},t.prototype.resetInner=function(){r.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(e,a,n,i,o,l,s){var u=this;r.prototype.renderInner.call(this,e,a,n,i,o,l,s);var d=this._controllerGroup,c=a.get("pageIconSize",!0),f=ge(c)?c:[c,c];g("pagePrev",0);var p=a.getModel("pageTextStyle");d.add(new Xe({name:"pageText",style:{text:"xx/xx",fill:p.getTextColor(),font:p.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(v,y){var _=v+"DataIndex",S=Pu(a.get("pageIcons",!0)[a.getOrient().name][y],{onclick:ye(u._pageGo,u,_,a,i)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});S.name=v,d.add(S)}},t.prototype.layoutInner=function(e,a,n,i,o,l){var s=this.getSelectorGroup(),u=e.getOrient().index,d=ms[u],c=ys[u],f=ms[1-u],p=ys[1-u];o&&Tr("horizontal",s,e.get("selectorItemGap",!0));var g=e.get("selectorButtonGap",!0),v=s.getBoundingRect(),y=[-v.x,-v.y],_=Fe(n);o&&(_[d]=n[d]-v[d]-g);var S=this._layoutContentAndController(e,i,_,u,d,f,p,c);if(o){if(l==="end")y[u]+=S[d]+g;else{var w=v[d]+g;y[u]-=w,S[c]-=w}S[d]+=v[d]+g,y[1-u]+=S[p]+S[f]/2-v[f]/2,S[f]=Math.max(S[f],v[f]),S[p]=Math.min(S[p],v[p]+y[1-u]),s.x=y[0],s.y=y[1],s.markRedraw()}return S},t.prototype._layoutContentAndController=function(e,a,n,i,o,l,s,u){var d=this.getContentGroup(),c=this._containerGroup,f=this._controllerGroup;Tr(e.get("orient"),d,e.get("itemGap"),i?n.width:null,i?null:n.height),Tr("horizontal",f,e.get("pageButtonItemGap",!0));var p=d.getBoundingRect(),g=f.getBoundingRect(),v=this._showController=p[o]>n[o],y=[-p.x,-p.y];a||(y[i]=d[u]);var _=[0,0],S=[-g.x,-g.y],w=At(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(v){var T=e.get("pageButtonPosition",!0);T==="end"?S[i]+=n[o]-g[o]:_[i]+=g[o]+w}S[1-i]+=p[l]/2-g[l]/2,d.setPosition(y),c.setPosition(_),f.setPosition(S);var C={x:0,y:0};if(C[o]=v?n[o]:p[o],C[l]=Math.max(p[l],g[l]),C[s]=Math.min(0,g[s]+S[1-i]),c.__rectSize=n[o],v){var k={x:0,y:0};k[o]=Math.max(n[o]-g[o]-w,0),k[l]=C[l],c.setClipPath(new et({shape:k})),c.__rectSize=k[o]}else f.eachChild(function(I){I.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(e);return A.pageIndex!=null&&Ke(d,{x:A.contentPosition[0],y:A.contentPosition[1]},v?e:null),this._updatePageInfoView(e,A),C},t.prototype._pageGo=function(e,a,n){var i=this._getPageInfo(a)[e];i!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:a.id})},t.prototype._updatePageInfoView=function(e,a){var n=this._controllerGroup;O(["pagePrev","pageNext"],function(d){var c=d+"DataIndex",f=a[c]!=null,p=n.childOfName(d);p&&(p.setStyle("fill",f?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),p.cursor=f?"pointer":"default")});var i=n.childOfName("pageText"),o=e.get("pageFormatter"),l=a.pageIndex,s=l!=null?l+1:0,u=a.pageCount;i&&o&&i.setStyle("text",Re(o)?o.replace("{current}",s==null?"":s+"").replace("{total}",u==null?"":u+""):o({current:s,total:u}))},t.prototype._getPageInfo=function(e){var a=e.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,o=e.getOrient().index,l=ms[o],s=ys[o],u=this._findTargetItemIndex(a),d=n.children(),c=d[u],f=d.length,p=f?1:0,g={contentPosition:[n.x,n.y],pageCount:p,pageIndex:p-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return g;var v=T(c);g.contentPosition[o]=-v.s;for(var y=u+1,_=v,S=v,w=null;y<=f;++y)w=T(d[y]),(!w&&S.e>_.s+i||w&&!C(w,_.s))&&(S.i>_.i?_=S:_=w,_&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=_.i),++g.pageCount)),S=w;for(var y=u-1,_=v,S=v,w=null;y>=-1;--y)w=T(d[y]),(!w||!C(S,w.s))&&_.i<S.i&&(S=_,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=_.i),++g.pageCount,++g.pageIndex),_=w;return g;function T(k){if(k){var A=k.getBoundingRect(),I=A[s]+k[s];return{s:I,e:I+A[l],i:k.__legendDataIndex}}}function C(k,A){return k.e>=A&&k.s<=A+i}},t.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var a,n=this.getContentGroup(),i;return n.eachChild(function(o,l){var s=o.__legendDataIndex;i==null&&s!=null&&(i=l),s===e&&(a=l)}),a??i},t.type="legend.scroll",t}(ky);function NM(r){r.registerAction("legendScroll","legendscroll",function(t,e){var a=t.scrollDataIndex;a!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(n){n.setScrollDataIndex(a)})})}function OM(r){De(Iy),r.registerComponentModel(RM),r.registerComponentView(EM),NM(r)}function Dy(r){De(Iy),De(OM)}var $M=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.inside",t.defaultOption=Br(fi.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(fi),Md=ht();function zM(r,t,e){Md(r).coordSysRecordMap.each(function(a){var n=a.dataZoomInfoMap.get(t.uid);n&&(n.getRange=e)})}function BM(r,t){for(var e=Md(r).coordSysRecordMap,a=e.keys(),n=0;n<a.length;n++){var i=a[n],o=e.get(i),l=o.dataZoomInfoMap;if(l){var s=t.uid,u=l.get(s);u&&(l.removeKey(s),l.keys().length||My(e,o))}}}function My(r,t){if(t){r.removeKey(t.model.uid);var e=t.controller;e&&e.dispose()}}function qM(r,t){var e={model:t,containsPoint:Ve(FM,t),dispatchAction:Ve(GM,r),dataZoomInfoMap:null,controller:null},a=e.controller=new Di(r.getZr());return O(["pan","zoom","scrollMove"],function(n){a.on(n,function(i){var o=[];e.dataZoomInfoMap.each(function(l){if(i.isAvailableBehavior(l.model.option)){var s=(l.getRange||{})[n],u=s&&s(l.dzReferCoordSysInfo,e.model.mainType,e.controller,i);!l.model.get("disabled",!0)&&u&&o.push({dataZoomId:l.model.id,start:u[0],end:u[1]})}}),o.length&&e.dispatchAction(o)})}),e}function GM(r,t){r.isDisposed()||r.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function FM(r,t,e,a){return r.coordinateSystem.containPoint([e,a])}function UM(r){var t,e="type_",a={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return r.each(function(i){var o=i.model,l=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;a[e+l]>a[e+t]&&(t=l),n=n&&o.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}function HM(r){r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,function(t,e){var a=Md(e),n=a.coordSysRecordMap||(a.coordSysRecordMap=Pe());n.each(function(i){i.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){var o=gy(i);O(o.infoList,function(l){var s=l.model.uid,u=n.get(s)||n.set(s,qM(e,l.model)),d=u.dataZoomInfoMap||(u.dataZoomInfoMap=Pe());d.set(i.uid,{dzReferCoordSysInfo:l,model:i,getRange:null})})}),n.each(function(i){var o=i.controller,l,s=i.dataZoomInfoMap;if(s){var u=s.keys()[0];u!=null&&(l=s.get(u))}if(!l){My(n,i);return}var d=UM(s);o.enable(d.controlType,d.opt),o.setPointerChecker(i.containsPoint),Zo(i,"dispatchAction",l.model.get("throttle",!0),"fixRate")})})}var WM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return t.prototype.render=function(e,a,n){if(r.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),zM(n,e,{pan:ye(bs.pan,this),zoom:ye(bs.zoom,this),scrollMove:ye(bs.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){BM(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(wd),bs={zoom:function(r,t,e,a){var n=this.range,i=n.slice(),o=r.axisModels[0];if(o){var l=_s[t](null,[a.originX,a.originY],o,e,r),s=(l.signal>0?l.pixelStart+l.pixelLength-l.pixel:l.pixel-l.pixelStart)/l.pixelLength*(i[1]-i[0])+i[0],u=Math.max(1/a.scale,0);i[0]=(i[0]-s)*u+s,i[1]=(i[1]-s)*u+s;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Gr(0,i,[0,100],0,d.minSpan,d.maxSpan),this.range=i,n[0]!==i[0]||n[1]!==i[1])return i}},pan:_v(function(r,t,e,a,n,i){var o=_s[a]([i.oldX,i.oldY],[i.newX,i.newY],t,n,e);return o.signal*(r[1]-r[0])*o.pixel/o.pixelLength}),scrollMove:_v(function(r,t,e,a,n,i){var o=_s[a]([0,0],[i.scrollDelta,i.scrollDelta],t,n,e);return o.signal*(r[1]-r[0])*i.scrollDelta})};function _v(r){return function(t,e,a,n){var i=this.range,o=i.slice(),l=t.axisModels[0];if(l){var s=r(o,l,t,e,a,n);if(Gr(s,o,[0,100],"all"),this.range=o,i[0]!==o[0]||i[1]!==o[1])return o}}}var _s={grid:function(r,t,e,a,n){var i=e.axis,o={},l=n.model.coordinateSystem.getRect();return r=r||[0,0],i.dim==="x"?(o.pixel=t[0]-r[0],o.pixelLength=l.width,o.pixelStart=l.x,o.signal=i.inverse?1:-1):(o.pixel=t[1]-r[1],o.pixelLength=l.height,o.pixelStart=l.y,o.signal=i.inverse?-1:1),o},polar:function(r,t,e,a,n){var i=e.axis,o={},l=n.model.coordinateSystem,s=l.getRadiusAxis().getExtent(),u=l.getAngleAxis().getExtent();return r=r?l.pointToCoord(r):[0,0],t=l.pointToCoord(t),e.mainType==="radiusAxis"?(o.pixel=t[0]-r[0],o.pixelLength=s[1]-s[0],o.pixelStart=s[0],o.signal=i.inverse?1:-1):(o.pixel=t[1]-r[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=i.inverse?-1:1),o},singleAxis:function(r,t,e,a,n){var i=e.axis,o=n.model.coordinateSystem.getRect(),l={};return r=r||[0,0],i.orient==="horizontal"?(l.pixel=t[0]-r[0],l.pixelLength=o.width,l.pixelStart=o.x,l.signal=i.inverse?1:-1):(l.pixel=t[1]-r[1],l.pixelLength=o.height,l.pixelStart=o.y,l.signal=i.inverse?-1:1),l}};function Py(r){xd(r),r.registerComponentModel($M),r.registerComponentView(WM),HM(r)}var YM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=Br(fi.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(fi),Nn=et,Sv=7,jM=1,Ss=30,ZM=7,On="horizontal",wv="vertical",XM=5,KM=["line","bar","candlestick","scatter"],QM={easing:"cubicOut",duration:100,delay:0},JM=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._displayables={},e}return t.prototype.init=function(e,a){this.api=a,this._onBrush=ye(this._onBrush,this),this._onBrushEnd=ye(this._onBrushEnd,this)},t.prototype.render=function(e,a,n,i){if(r.prototype.render.apply(this,arguments),Zo(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!i||i.type!=="dataZoom"||i.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Zg(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var a=this._displayables.sliderGroup=new xe;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(a),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,a=this.api,n=e.get("brushSelect"),i=n?ZM:0,o=this._findCoordRect(),l={width:a.getWidth(),height:a.getHeight()},s=this._orient===On?{right:l.width-o.x-o.width,top:l.height-Ss-Sv-i,width:o.width,height:Ss}:{right:Sv,top:o.y,width:Ss,height:o.height},u=Du(e.option);O(["right","top","width","height"],function(c){u[c]==="ph"&&(u[c]=s[c])});var d=Kt(u,l);this._location={x:d.x,y:d.y},this._size=[d.width,d.height],this._orient===wv&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,a=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),l=this._displayables.sliderGroup,s=(this._dataShadowInfo||{}).otherAxisInverse;l.attr(n===On&&!o?{scaleY:s?1:-1,scaleX:1}:n===On&&o?{scaleY:s?1:-1,scaleX:-1}:n===wv&&!o?{scaleY:s?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:s?-1:1,scaleX:-1,rotation:Math.PI/2});var u=e.getBoundingRect([l]);e.x=a.x-u.x,e.y=a.y-u.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,a=this._size,n=this._displayables.sliderGroup,i=e.get("brushSelect");n.add(new Nn({silent:!0,shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var o=new Nn({shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:"transparent"},z2:0,onclick:ye(this._onClickPanel,this)}),l=this.api.getZr();i?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",l.on("mousemove",this._onBrush),l.on("mouseup",this._onBrushEnd)):(l.off("mousemove",this._onBrush),l.off("mouseup",this._onBrushEnd)),n.add(o)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var a=this._size,n=this._shadowSize||[],i=e.series,o=i.getRawData(),l=i.getShadowDim&&i.getShadowDim(),s=l&&o.getDimensionInfo(l)?i.getShadowDim():e.otherDim;if(s==null)return;var u=this._shadowPolygonPts,d=this._shadowPolylinePts;if(o!==this._shadowData||s!==this._shadowDim||a[0]!==n[0]||a[1]!==n[1]){var c=o.getDataExtent(s),f=(c[1]-c[0])*.3;c=[c[0]-f,c[1]+f];var p=[0,a[1]],g=[0,a[0]],v=[[a[0],0],[0,0]],y=[],_=g[1]/(o.count()-1),S=0,w=Math.round(o.count()/a[0]),T;o.each([s],function(M,D){if(w>0&&D%w){S+=_;return}var L=M==null||isNaN(M)||M==="",E=L?0:We(M,c,p,!0);L&&!T&&D?(v.push([v[v.length-1][0],0]),y.push([y[y.length-1][0],0])):!L&&T&&(v.push([S,0]),y.push([S,0])),v.push([S,E]),y.push([S,E]),S+=_,T=L}),u=this._shadowPolygonPts=v,d=this._shadowPolylinePts=y}this._shadowData=o,this._shadowDim=s,this._shadowSize=[a[0],a[1]];var C=this.dataZoomModel;function k(M){var D=C.getModel(M?"selectedDataBackground":"dataBackground"),L=new xe,E=new ya({shape:{points:u},segmentIgnoreThreshold:1,style:D.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),R=new Va({shape:{points:d},segmentIgnoreThreshold:1,style:D.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return L.add(E),L.add(R),L}for(var A=0;A<3;A++){var I=k(A===1);this._displayables.sliderGroup.add(I),this._displayables.dataShadowSegs.push(I)}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,a=e.get("showDataShadow");if(a!==!1){var n,i=this.ecModel;return e.eachTargetAxis(function(o,l){var s=e.getAxisProxy(o,l).getTargetSeriesModels();O(s,function(u){if(!n&&!(a!==!0&&nt(KM,u.get("type"))<0)){var d=i.getComponent(Ka(o),l).axis,c=eP(o),f,p=u.coordinateSystem;c!=null&&p.getOtherAxis&&(f=p.getOtherAxis(d).inverse),c=u.getData().mapDimension(c),n={thisAxis:d,series:u,thisDim:o,otherDim:c,otherAxisInverse:f}}},this)},this),n}},t.prototype._renderHandle=function(){var e=this.group,a=this._displayables,n=a.handles=[null,null],i=a.handleLabels=[null,null],o=this._displayables.sliderGroup,l=this._size,s=this.dataZoomModel,u=this.api,d=s.get("borderRadius")||0,c=s.get("brushSelect"),f=a.filler=new Nn({silent:c,style:{fill:s.get("fillerColor")},textConfig:{position:"inside"}});o.add(f),o.add(new Nn({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:l[0],height:l[1],r:d},style:{stroke:s.get("dataBackgroundColor")||s.get("borderColor"),lineWidth:jM,fill:"rgba(0,0,0,0)"}})),O([0,1],function(w){var T=s.get("handleIcon");!_b[T]&&T.indexOf("path://")<0&&T.indexOf("image://")<0&&(T="path://"+T);var C=St(T,-1,0,2,2,null,!0);C.attr({cursor:xv(this._orient),draggable:!0,drift:ye(this._onDragMove,this,w),ondragend:ye(this._onDragEnd,this),onmouseover:ye(this._showDataInfo,this,!0),onmouseout:ye(this._showDataInfo,this,!1),z2:5});var k=C.getBoundingRect(),A=s.get("handleSize");this._handleHeight=de(A,this._size[1]),this._handleWidth=k.width/k.height*this._handleHeight,C.setStyle(s.getModel("handleStyle").getItemStyle()),C.style.strokeNoScale=!0,C.rectHover=!0,C.ensureState("emphasis").style=s.getModel(["emphasis","handleStyle"]).getItemStyle(),ln(C);var I=s.get("handleColor");I!=null&&(C.style.fill=I),o.add(n[w]=C);var M=s.getModel("textStyle");e.add(i[w]=new Xe({silent:!0,invisible:!0,style:lt(M,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:M.getTextColor(),font:M.getFont()}),z2:10}))},this);var p=f;if(c){var g=de(s.get("moveHandleSize"),l[1]),v=a.moveHandle=new et({style:s.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:l[1]-.5,height:g}}),y=g*.8,_=a.moveHandleIcon=St(s.get("moveHandleIcon"),-y/2,-y/2,y,y,"#fff",!0);_.silent=!0,_.y=l[1]+g/2-.5,v.ensureState("emphasis").style=s.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var S=Math.min(l[1]/2,Math.max(g,10));p=a.moveZone=new et({invisible:!0,shape:{y:l[1]-S,height:g+S}}),p.on("mouseover",function(){u.enterEmphasis(v)}).on("mouseout",function(){u.leaveEmphasis(v)}),o.add(v),o.add(_),o.add(p)}p.attr({draggable:!0,cursor:xv(this._orient),drift:ye(this._onDragMove,this,"all"),ondragstart:ye(this._showDataInfo,this,!0),ondragend:ye(this._onDragEnd,this),onmouseover:ye(this._showDataInfo,this,!0),onmouseout:ye(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),a=this._getViewExtent();this._handleEnds=[We(e[0],[0,100],a,!0),We(e[1],[0,100],a,!0)]},t.prototype._updateInterval=function(e,a){var n=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),l=n.findRepresentativeAxisProxy().getMinMaxSpan(),s=[0,100];Gr(a,i,o,n.get("zoomLock")?"all":e,l.minSpan!=null?We(l.minSpan,s,o,!0):null,l.maxSpan!=null?We(l.maxSpan,s,o,!0):null);var u=this._range,d=this._range=ha([We(i[0],o,s,!0),We(i[1],o,s,!0)]);return!u||u[0]!==d[0]||u[1]!==d[1]},t.prototype._updateView=function(e){var a=this._displayables,n=this._handleEnds,i=ha(n.slice()),o=this._size;O([0,1],function(p){var g=a.handles[p],v=this._handleHeight;g.attr({scaleX:v/2,scaleY:v/2,x:n[p]+(p?-1:1),y:o[1]/2-v/2})},this),a.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]});var l={x:i[0],width:i[1]-i[0]};a.moveHandle&&(a.moveHandle.setShape(l),a.moveZone.setShape(l),a.moveZone.getBoundingRect(),a.moveHandleIcon&&a.moveHandleIcon.attr("x",l.x+l.width/2));for(var s=a.dataShadowSegs,u=[0,i[0],i[1],o[0]],d=0;d<s.length;d++){var c=s[d],f=c.getClipPath();f||(f=new et,c.setClipPath(f)),f.setShape({x:u[d],y:0,width:u[d+1]-u[d],height:o[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var a=this.dataZoomModel,n=this._displayables,i=n.handleLabels,o=this._orient,l=["",""];if(a.get("showDetail")){var s=a.findRepresentativeAxisProxy();if(s){var u=s.getAxisModel().axis,d=this._range,c=e?s.calculateDataWindow({start:d[0],end:d[1]}).valueWindow:s.getDataValueWindow();l=[this._formatLabel(c[0],u),this._formatLabel(c[1],u)]}}var f=ha(this._handleEnds.slice());p.call(this,0),p.call(this,1);function p(g){var v=on(n.handles[g].parent,this.group),y=ku(g===0?"right":"left",v),_=this._handleWidth/2+XM,S=Ja([f[g]+(g===0?-_:_),this._size[1]/2],v);i[g].setStyle({x:S[0],y:S[1],verticalAlign:o===On?"middle":y,align:o===On?y:"center",text:l[g]})}},t.prototype._formatLabel=function(e,a){var n=this.dataZoomModel,i=n.get("labelFormatter"),o=n.get("labelPrecision");(o==null||o==="auto")&&(o=a.getPixelPrecision());var l=e==null||isNaN(e)?"":a.type==="category"||a.type==="time"?a.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(o,20));return Be(i)?i(e,l):Re(i)?i.replace("{value}",l):l},t.prototype._showDataInfo=function(e){e=this._dragging||e;var a=this._displayables,n=a.handleLabels;n[0].attr("invisible",!e),n[1].attr("invisible",!e),a.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](a.moveHandle,1)},t.prototype._onDragMove=function(e,a,n,i){this._dragging=!0,Mr(i.event);var o=this._displayables.sliderGroup.getLocalTransform(),l=Ja([a,n],o,!0),s=this._updateInterval(e,l[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),s&&u&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var a=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>a[0]||n[1]<0||n[1]>a[1])){var i=this._handleEnds,o=(i[0]+i[1])/2,l=this._updateInterval("all",n[0]-o);this._updateView(),l&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var a=e.offsetX,n=e.offsetY;this._brushStart=new $a(a,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var a=this._displayables.brushRect;if(this._brushing=!1,!!a){a.attr("ignore",!0);var n=a.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),l=[0,100];this._range=ha([We(n.x,o,l,!0),We(n.x+n.width,o,l,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(Mr(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,a){var n=this._displayables,i=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new Nn({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var l=this._brushStart,s=this._displayables.sliderGroup,u=s.transformCoordToLocal(e,a),d=s.transformCoordToLocal(l.x,l.y),c=this._size;u[0]=Math.max(Math.min(c[0],u[0]),0),o.setShape({x:d[0],y:0,width:u[0]-d[0],height:c[1]})},t.prototype._dispatchZoomAction=function(e){var a=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?QM:null,start:a[0],end:a[1]})},t.prototype._findCoordRect=function(){var e,a=gy(this.dataZoomModel).infoList;if(!e&&a.length){var n=a[0].model.coordinateSystem;e=n.getRect&&n.getRect()}if(!e){var i=this.api.getWidth(),o=this.api.getHeight();e={x:i*.2,y:o*.2,width:i*.6,height:o*.6}}return e},t.type="dataZoom.slider",t}(wd);function eP(r){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[r]}function xv(r){return r==="vertical"?"ns-resize":"ew-resize"}function Ly(r){r.registerComponentModel(YM),r.registerComponentView(JM),xd(r)}function tP(r){De(Py),De(Ly)}var Vy={get:function(r,t,e){var a=Fe((aP[r]||{})[t]);return e&&ge(a)?a[a.length-1]:a}},aP={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Tv=_t.mapVisual,rP=_t.eachVisual,nP=ge,Cv=O,iP=ha,oP=We,Io=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return t.prototype.init=function(e,a,n){this.mergeDefaultAndTheme(e,n)},t.prototype.optionUpdated=function(e,a){var n=this.option;!a&&Sy(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var a=this.stateList;e=ye(e,this),this.controllerVisuals=uu(this.option.controller,a,e),this.targetVisuals=uu(this.option.target,a,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,a=[];return e==null||e==="all"?this.ecModel.eachSeries(function(n,i){a.push(i)}):a=jt(e),a},t.prototype.eachTargetSeries=function(e,a){O(this.getTargetSeriesIndices(),function(n){var i=this.ecModel.getSeriesByIndex(n);i&&e.call(a,i)},this)},t.prototype.isTargetSeries=function(e){var a=!1;return this.eachTargetSeries(function(n){n===e&&(a=!0)}),a},t.prototype.formatValueText=function(e,a,n){var i=this.option,o=i.precision,l=this.dataBound,s=i.formatter,u;n=n||["<",">"],ge(e)&&(e=e.slice(),u=!0);var d=a?e:u?[c(e[0]),c(e[1])]:c(e);if(Re(s))return s.replace("{value}",u?d[0]:d).replace("{value2}",u?d[1]:d);if(Be(s))return u?s(e[0],e[1]):s(e);if(u)return e[0]===l[0]?n[0]+" "+d[1]:e[1]===l[1]?n[1]+" "+d[0]:d[0]+" - "+d[1];return d;function c(f){return f===l[0]?"min":f===l[1]?"max":(+f).toFixed(Math.min(o,20))}},t.prototype.resetExtent=function(){var e=this.option,a=iP([e.min,e.max]);this._dataExtent=a},t.prototype.getDataDimensionIndex=function(e){var a=this.option.dimension;if(a!=null)return e.getDimensionIndex(a);for(var n=e.dimensions,i=n.length-1;i>=0;i--){var o=n[i],l=e.getDimensionInfo(o);if(!l.isCalculationCoord)return l.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,a=this.option,n={inRange:a.inRange,outOfRange:a.outOfRange},i=a.target||(a.target={}),o=a.controller||(a.controller={});rt(i,n),rt(o,n);var l=this.isCategory();s.call(this,i),s.call(this,o),u.call(this,i,"inRange","outOfRange"),d.call(this,o);function s(c){nP(a.color)&&!c.inRange&&(c.inRange={color:a.color.slice().reverse()}),c.inRange=c.inRange||{color:e.get("gradientColor")}}function u(c,f,p){var g=c[f],v=c[p];g&&!v&&(v=c[p]={},Cv(g,function(y,_){if(_t.isValidType(_)){var S=Vy.get(_,"inactive",l);S!=null&&(v[_]=S,_==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function d(c){var f=(c.inRange||{}).symbol||(c.outOfRange||{}).symbol,p=(c.inRange||{}).symbolSize||(c.outOfRange||{}).symbolSize,g=this.get("inactiveColor"),v=this.getItemSymbol(),y=v||"roundRect";Cv(this.stateList,function(_){var S=this.itemSize,w=c[_];w||(w=c[_]={color:l?g:[g]}),w.symbol==null&&(w.symbol=f&&Fe(f)||(l?y:[y])),w.symbolSize==null&&(w.symbolSize=p&&Fe(p)||(l?S[0]:[S[0],S[0]])),w.symbol=Tv(w.symbol,function(k){return k==="none"?y:k});var T=w.symbolSize;if(T!=null){var C=-1/0;rP(T,function(k){k>C&&(C=k)}),w.symbolSize=Tv(T,function(k){return oP(k,[0,C],[0,S[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(zt),kv=[20,140],lP=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(e,a){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){r.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=kv[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=kv[1])},t.prototype._resetRange=function(){var e=this.getExtent(),a=this.option.range;!a||a.auto?(e.auto=1,this.option.range=e):ge(a)&&(a[0]>a[1]&&a.reverse(),a[0]=Math.max(a[0],e[0]),a[1]=Math.min(a[1],e[1]))},t.prototype.completeVisualOption=function(){r.prototype.completeVisualOption.apply(this,arguments),O(this.stateList,function(e){var a=this.option.controller[e].symbolSize;a&&a[0]!==a[1]&&(a[0]=a[1]/3)},this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),a=ha((this.get("range")||[]).slice());return a[0]>e[1]&&(a[0]=e[1]),a[1]>e[1]&&(a[1]=e[1]),a[0]<e[0]&&(a[0]=e[0]),a[1]<e[0]&&(a[1]=e[0]),a},t.prototype.getValueState=function(e){var a=this.option.range,n=this.getExtent();return(a[0]<=n[0]||a[0]<=e)&&(a[1]>=n[1]||e<=a[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var a=[];return this.eachTargetSeries(function(n){var i=[],o=n.getData();o.each(this.getDataDimensionIndex(o),function(l,s){e[0]<=l&&l<=e[1]&&i.push(s)},this),a.push({seriesId:n.id,dataIndex:i})},this),a},t.prototype.getVisualMeta=function(e){var a=Av(this,"outOfRange",this.getExtent()),n=Av(this,"inRange",this.option.range.slice()),i=[];function o(p,g){i.push({value:p,color:e(p,g)})}for(var l=0,s=0,u=n.length,d=a.length;s<d&&(!n.length||a[s]<=n[0]);s++)a[s]<n[l]&&o(a[s],"outOfRange");for(var c=1;l<u;l++,c=0)c&&i.length&&o(n[l],"outOfRange"),o(n[l],"inRange");for(var c=1;s<d;s++)(!n.length||n[n.length-1]<a[s])&&(c&&(i.length&&o(i[i.length-1].value,"outOfRange"),c=0),o(a[s],"outOfRange"));var f=i.length;return{stops:i,outerColors:[f?i[0].color:"transparent",f?i[f-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Br(Io.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(Io);function Av(r,t,e){if(e[0]===e[1])return e.slice();for(var a=200,n=(e[1]-e[0])/a,i=e[0],o=[],l=0;l<=a&&i<e[1];l++)o.push(i),i+=n;return o.push(e[1]),o}var Ry=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return t.prototype.init=function(e,a){this.ecModel=e,this.api=a},t.prototype.render=function(e,a,n,i){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,a,n,i)},t.prototype.renderBackground=function(e){var a=this.visualMapModel,n=nh(a.get("padding")||0),i=e.getBoundingRect();e.add(new et({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:a.get("backgroundColor"),stroke:a.get("borderColor"),lineWidth:a.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,a,n){n=n||{};var i=n.forceState,o=this.visualMapModel,l={};if(a==="color"){var s=o.get("contentColor");l.color=s}function u(p){return l[p]}function d(p,g){l[p]=g}var c=o.controllerVisuals[i||o.getValueState(e)],f=_t.prepareVisualTypes(c);return O(f,function(p){var g=c[p];n.convertOpacityToAlpha&&p==="opacity"&&(p="colorAlpha",g=c.__alphaForOpacity),_t.dependsOn(p,a)&&g&&g.applyVisual(e,u,d)}),l[a]},t.prototype.positionGroup=function(e){var a=this.visualMapModel,n=this.api;jo(e,a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},t.prototype.doRender=function(e,a,n,i){},t.type="visualMap",t}(Ut),Iv=[["left","right","width"],["top","bottom","height"]];function Ey(r,t,e){var a=r.option,n=a.align;if(n!=null&&n!=="auto")return n;for(var i={width:t.getWidth(),height:t.getHeight()},o=a.orient==="horizontal"?1:0,l=Iv[o],s=[0,null,10],u={},d=0;d<3;d++)u[Iv[1-o][d]]=s[d],u[l[d]]=d===2?e[0]:a[l[d]];var c=[["x","width",3],["y","height",0]][o],f=Kt(u,i,a.padding);return l[(f.margin[c[2]]||0)+f[c[0]]+f[c[1]]*.5<i[c[1]]*.5?0:1]}function no(r,t){return O(r||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),r}var Ma=We,sP=O,Dv=Math.min,ws=Math.max,uP=12,dP=6,cP=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return t.prototype.init=function(e,a){r.prototype.init.call(this,e,a),this._hoverLinkFromSeriesMouseOver=ye(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=ye(this._hideIndicator,this)},t.prototype.doRender=function(e,a,n,i){(!i||i.type!=="selectDataRange"||i.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,a=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(a);var n=e.get("text");this._renderEndsText(a,n,0),this._renderEndsText(a,n,1),this._updateView(!0),this.renderBackground(a),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(a)},t.prototype._renderEndsText=function(e,a,n){if(a){var i=a[1-n];i=i!=null?i+"":"";var o=this.visualMapModel,l=o.get("textGap"),s=o.itemSize,u=this._shapes.mainGroup,d=this._applyTransform([s[0]/2,n===0?-l:s[1]+l],u),c=this._applyTransform(n===0?"bottom":"top",u),f=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new Xe({style:lt(p,{x:d[0],y:d[1],verticalAlign:f==="horizontal"?"middle":c,align:f==="horizontal"?c:"center",text:i})}))}},t.prototype._renderBar=function(e){var a=this.visualMapModel,n=this._shapes,i=a.itemSize,o=this._orient,l=this._useHandle,s=Ey(a,this.api,i),u=n.mainGroup=this._createBarGroup(s),d=new xe;u.add(d),d.add(n.outOfRange=Mv()),d.add(n.inRange=Mv(null,l?Lv(this._orient):null,ye(this._dragHandle,this,"all",!1),ye(this._dragHandle,this,"all",!0))),d.setClipPath(new et({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var c=a.textStyleModel.getTextRect("国"),f=ws(c.width,c.height);l&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(a,u,0,i,f,o),this._createHandle(a,u,1,i,f,o)),this._createIndicator(a,u,i,f,o),e.add(u)},t.prototype._createHandle=function(e,a,n,i,o,l){var s=ye(this._dragHandle,this,n,!1),u=ye(this._dragHandle,this,n,!0),d=Es(e.get("handleSize"),i[0]),c=St(e.get("handleIcon"),-d/2,-d/2,d,d,null,!0),f=Lv(this._orient);c.attr({cursor:f,draggable:!0,drift:s,ondragend:u,onmousemove:function(_){Mr(_.event)}}),c.x=i[0]/2,c.useStyle(e.getModel("handleStyle").getItemStyle()),c.setStyle({strokeNoScale:!0,strokeFirst:!0}),c.style.lineWidth*=2,c.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),zn(c,!0),a.add(c);var p=this.visualMapModel.textStyleModel,g=new Xe({cursor:f,draggable:!0,drift:s,onmousemove:function(_){Mr(_.event)},ondragend:u,style:lt(p,{x:0,y:0,text:""})});g.ensureState("blur").style={opacity:.1},g.stateTransition={duration:200},this.group.add(g);var v=[d,0],y=this._shapes;y.handleThumbs[n]=c,y.handleLabelPoints[n]=v,y.handleLabels[n]=g},t.prototype._createIndicator=function(e,a,n,i,o){var l=Es(e.get("indicatorSize"),n[0]),s=St(e.get("indicatorIcon"),-l/2,-l/2,l,l,null,!0);s.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var u=e.getModel("indicatorStyle").getItemStyle();if(s instanceof Ta){var d=s.style;s.useStyle(be({image:d.image,x:d.x,y:d.y,width:d.width,height:d.height},u))}else s.useStyle(u);a.add(s);var c=this.visualMapModel.textStyleModel,f=new Xe({silent:!0,invisible:!0,style:lt(c,{x:0,y:0,text:""})});this.group.add(f);var p=[(o==="horizontal"?i/2:dP)+n[0]/2,0],g=this._shapes;g.indicator=s,g.indicatorLabel=f,g.indicatorLabelPoint=p,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,a,n,i){if(this._useHandle){if(this._dragging=!a,!a){var o=this._applyTransform([n,i],this._shapes.mainGroup,!0);this._updateInterval(e,o[1]),this._hideIndicator(),this._updateView()}a===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),a?!this._hovering&&this._clearHoverLinkToSeries():Pv(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,a=this._dataInterval=e.getSelected(),n=e.getExtent(),i=[0,e.itemSize[1]];this._handleEnds=[Ma(a[0],n,i,!0),Ma(a[1],n,i,!0)]},t.prototype._updateInterval=function(e,a){a=a||0;var n=this.visualMapModel,i=this._handleEnds,o=[0,n.itemSize[1]];Gr(a,i,o,e,0);var l=n.getExtent();this._dataInterval=[Ma(i[0],o,l,!0),Ma(i[1],o,l,!0)]},t.prototype._updateView=function(e){var a=this.visualMapModel,n=a.getExtent(),i=this._shapes,o=[0,a.itemSize[1]],l=e?o:this._handleEnds,s=this._createBarVisual(this._dataInterval,n,l,"inRange"),u=this._createBarVisual(n,n,o,"outOfRange");i.inRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),i.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(l,s)},t.prototype._createBarVisual=function(e,a,n,i){var o={forceState:i,convertOpacityToAlpha:!0},l=this._makeColorGradient(e,o),s=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],u=this._createBarPoints(n,s);return{barColor:new Oo(0,0,0,1,l),barPoints:u,handlesColor:[l[0].color,l[l.length-1].color]}},t.prototype._makeColorGradient=function(e,a){var n=100,i=[],o=(e[1]-e[0])/n;i.push({color:this.getControllerVisual(e[0],"color",a),offset:0});for(var l=1;l<n;l++){var s=e[0]+o*l;if(s>e[1])break;i.push({color:this.getControllerVisual(s,"color",a),offset:l/n})}return i.push({color:this.getControllerVisual(e[1],"color",a),offset:1}),i},t.prototype._createBarPoints=function(e,a){var n=this.visualMapModel.itemSize;return[[n[0]-a[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-a[1],e[1]]]},t.prototype._createBarGroup=function(e){var a=this._orient,n=this.visualMapModel.get("inverse");return new xe(a==="horizontal"&&!n?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:a==="horizontal"&&n?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:a==="vertical"&&!n?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},t.prototype._updateHandle=function(e,a){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,o=n.handleThumbs,l=n.handleLabels,s=i.itemSize,u=i.getExtent();sP([0,1],function(d){var c=o[d];c.setStyle("fill",a.handlesColor[d]),c.y=e[d];var f=Ma(e[d],[0,s[1]],u,!0),p=this.getControllerVisual(f,"symbolSize");c.scaleX=c.scaleY=p/s[0],c.x=s[0]-p/2;var g=Ja(n.handleLabelPoints[d],on(c,this.group));l[d].setStyle({x:g[0],y:g[1],text:i.formatValueText(this._dataInterval[d]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(e,a,n,i){var o=this.visualMapModel,l=o.getExtent(),s=o.itemSize,u=[0,s[1]],d=this._shapes,c=d.indicator;if(c){c.attr("invisible",!1);var f={convertOpacityToAlpha:!0},p=this.getControllerVisual(e,"color",f),g=this.getControllerVisual(e,"symbolSize"),v=Ma(e,l,u,!0),y=s[0]-g/2,_={x:c.x,y:c.y};c.y=v,c.x=y;var S=Ja(d.indicatorLabelPoint,on(c,this.group)),w=d.indicatorLabel;w.attr("invisible",!1);var T=this._applyTransform("left",d.mainGroup),C=this._orient,k=C==="horizontal";w.setStyle({text:(n||"")+o.formatValueText(a),verticalAlign:k?T:"middle",align:k?"center":T});var A={x:y,y:v,style:{fill:p}},I={style:{x:S[0],y:S[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var M={duration:100,easing:"cubicInOut",additive:!0};c.x=_.x,c.y=_.y,c.animateTo(A,M),w.animateTo(I,M)}else c.attr(A),w.attr(I);this._firstShowIndicator=!1;var D=this._shapes.handleLabels;if(D)for(var L=0;L<D.length;L++)this.api.enterBlur(D[L])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(a){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,i=e._applyTransform([a.offsetX,a.offsetY],e._shapes.mainGroup,!0,!0);i[1]=Dv(ws(0,i[1]),n[1]),e._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,a){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var o=[0,i[1]],l=n.getExtent();e=Dv(ws(o[0],e),o[1]);var s=fP(n,l,o),u=[e-s,e+s],d=Ma(e,o,l,!0),c=[Ma(u[0],o,l,!0),Ma(u[1],o,l,!0)];u[0]<o[0]&&(c[0]=-1/0),u[1]>o[1]&&(c[1]=1/0),a&&(c[0]===-1/0?this._showIndicator(d,c[1],"< ",s):c[1]===1/0?this._showIndicator(d,c[0],"> ",s):this._showIndicator(d,d,"≈ ",s));var f=this._hoverLinkDataIndices,p=[];(a||Pv(n))&&(p=this._hoverLinkDataIndices=n.findTargetDataIndices(c));var g=Sb(f,p);this._dispatchHighDown("downplay",no(g[0],n)),this._dispatchHighDown("highlight",no(g[1],n))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var a;if(Gg(e.target,function(s){var u=qe(s);if(u.dataIndex!=null)return a=u,!0},!0),!!a){var n=this.ecModel.getSeriesByIndex(a.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(n)){var o=n.getData(a.dataType),l=o.getStore().get(i.getDataDimensionIndex(o),a.dataIndex);isNaN(l)||this._showIndicator(l,l)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var a=this._shapes.handleLabels;if(a)for(var n=0;n<a.length;n++)this.api.leaveBlur(a[n])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",no(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,a,n,i){var o=on(a,i?null:this.group);return ge(e)?Ja(e,o,n):ku(e,o,n)},t.prototype._dispatchHighDown=function(e,a){a&&a.length&&this.api.dispatchAction({type:e,batch:a})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(Ry);function Mv(r,t,e,a){return new ya({shape:{points:r},draggable:!!e,cursor:t,drift:e,onmousemove:function(n){Mr(n.event)},ondragend:a})}function fP(r,t,e){var a=uP/2,n=r.get("hoverLinkDataSize");return n&&(a=Ma(n,t,e,!0)/2),a}function Pv(r){var t=r.get("hoverLinkOnHandle");return!!(t??r.get("realtime"))}function Lv(r){return r==="vertical"?"ns-resize":"ew-resize"}var pP={type:"selectDataRange",event:"dataRangeSelected",update:"update"},vP=function(r,t){t.eachComponent({mainType:"visualMap",query:r},function(e){e.setSelected(r.selected)})},gP=[{createOnAllSeries:!0,reset:function(r,t){var e=[];return t.eachComponent("visualMap",function(a){var n=r.pipelineContext;!a.isTargetSeries(r)||n&&n.large||e.push(qD(a.stateList,a.targetVisuals,ye(a.getValueState,a),a.getDataDimensionIndex(r.getData())))}),e}},{createOnAllSeries:!0,reset:function(r,t){var e=r.getData(),a=[];t.eachComponent("visualMap",function(n){if(n.isTargetSeries(r)){var i=n.getVisualMeta(ye(hP,null,r,n))||{stops:[],outerColors:[]},o=n.getDataDimensionIndex(e);o>=0&&(i.dimension=o,a.push(i))}}),r.getData().setVisual("visualMeta",a)}}];function hP(r,t,e,a){for(var n=t.targetVisuals[a],i=_t.prepareVisualTypes(n),o={color:Ko(r.getData(),"color")},l=0,s=i.length;l<s;l++){var u=i[l],d=n[u==="opacity"?"__alphaForOpacity":u];d&&d.applyVisual(e,c,f)}return o.color;function c(p){return o[p]}function f(p,g){o[p]=g}}var Vv=O;function mP(r){var t=r&&r.visualMap;ge(t)||(t=t?[t]:[]),Vv(t,function(e){if(e){Zr(e,"splitList")&&!Zr(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var a=e.pieces;a&&ge(a)&&Vv(a,function(n){Nt(n)&&(Zr(n,"start")&&!Zr(n,"min")&&(n.min=n.start),Zr(n,"end")&&!Zr(n,"max")&&(n.max=n.end))})}})}function Zr(r,t){return r&&r.hasOwnProperty&&r.hasOwnProperty(t)}var Rv=!1;function Ny(r){Rv||(Rv=!0,r.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),r.registerAction(pP,vP),O(gP,function(t){r.registerVisual(r.PRIORITY.VISUAL.COMPONENT,t)}),r.registerPreprocessor(mP))}function Oy(r){r.registerComponentModel(lP),r.registerComponentView(cP),Ny(r)}var yP=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._pieceList=[],e}return t.prototype.optionUpdated=function(e,a){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],bP[this._mode].call(this,this._pieceList),this._resetSelected(e,a);var i=this.option.categories;this.resetVisual(function(o,l){n==="categories"?(o.mappingMethod="category",o.categories=Fe(i)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=ne(this._pieceList,function(s){return s=Fe(s),l!=="inRange"&&(s.visual=null),s}))})},t.prototype.completeVisualOption=function(){var e=this.option,a={},n=_t.listVisualTypes(),i=this.isCategory();O(e.pieces,function(l){O(n,function(s){l.hasOwnProperty(s)&&(a[s]=1)})}),O(a,function(l,s){var u=!1;O(this.stateList,function(d){u=u||o(e,d,s)||o(e.target,d,s)},this),!u&&O(this.stateList,function(d){(e[d]||(e[d]={}))[s]=Vy.get(s,d==="inRange"?"active":"inactive",i)})},this);function o(l,s,u){return l&&l[s]&&l[s].hasOwnProperty(u)}r.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,a){var n=this.option,i=this._pieceList,o=(a?n:e).selected||{};if(n.selected=o,O(i,function(s,u){var d=this.getSelectedMapKey(s);o.hasOwnProperty(d)||(o[d]=!0)},this),n.selectedMode==="single"){var l=!1;O(i,function(s,u){var d=this.getSelectedMapKey(s);o[d]&&(l?o[d]=!1:l=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=Fe(e)},t.prototype.getValueState=function(e){var a=_t.findPieceIndex(e,this._pieceList);return a!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[a])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var a=[],n=this._pieceList;return this.eachTargetSeries(function(i){var o=[],l=i.getData();l.each(this.getDataDimensionIndex(l),function(s,u){var d=_t.findPieceIndex(s,n);d===e&&o.push(u)},this),a.push({seriesId:i.id,dataIndex:o})},this),a},t.prototype.getRepresentValue=function(e){var a;if(this.isCategory())a=e.value;else if(e.value!=null)a=e.value;else{var n=e.interval||[];a=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return a},t.prototype.getVisualMeta=function(e){if(this.isCategory())return;var a=[],n=["",""],i=this;function o(d,c){var f=i.getRepresentValue({interval:d});c||(c=i.getValueState(f));var p=e(f,c);d[0]===-1/0?n[0]=p:d[1]===1/0?n[1]=p:a.push({value:d[0],color:p},{value:d[1],color:p})}var l=this._pieceList.slice();if(!l.length)l.push({interval:[-1/0,1/0]});else{var s=l[0].interval[0];s!==-1/0&&l.unshift({interval:[-1/0,s]}),s=l[l.length-1].interval[1],s!==1/0&&l.push({interval:[s,1/0]})}var u=-1/0;return O(l,function(d){var c=d.interval;c&&(c[0]>u&&o([u,c[0]],"outOfRange"),o(c.slice()),u=c[1])},this),{stops:a,outerColors:n}},t.type="visualMap.piecewise",t.defaultOption=Br(Io.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(Io),bP={splitNumber:function(r){var t=this.option,e=Math.min(t.precision,20),a=this.getExtent(),n=t.splitNumber;n=Math.max(parseInt(n,10),1),t.splitNumber=n;for(var i=(a[1]-a[0])/n;+i.toFixed(e)!==i&&e<5;)e++;t.precision=e,i=+i.toFixed(e),t.minOpen&&r.push({interval:[-1/0,a[0]],close:[0,0]});for(var o=0,l=a[0];o<n;l+=i,o++){var s=o===n-1?a[1]:l+i;r.push({interval:[l,s],close:[1,1]})}t.maxOpen&&r.push({interval:[a[1],1/0],close:[0,0]}),uc(r),O(r,function(u,d){u.index=d,u.text=this.formatValueText(u.interval)},this)},categories:function(r){var t=this.option;O(t.categories,function(e){r.push({text:this.formatValueText(e,!0),value:e})},this),Ev(t,r)},pieces:function(r){var t=this.option;O(t.pieces,function(e,a){Nt(e)||(e={value:e});var n={text:"",index:a};if(e.label!=null&&(n.text=e.label),e.hasOwnProperty("value")){var i=n.value=e.value;n.interval=[i,i],n.close=[1,1]}else{for(var o=n.interval=[],l=n.close=[0,0],s=[1,0,1],u=[-1/0,1/0],d=[],c=0;c<2;c++){for(var f=[["gte","gt","min"],["lte","lt","max"]][c],p=0;p<3&&o[c]==null;p++)o[c]=e[f[p]],l[c]=s[p],d[c]=p===2;o[c]==null&&(o[c]=u[c])}d[0]&&o[1]===1/0&&(l[0]=0),d[1]&&o[0]===-1/0&&(l[1]=0),o[0]===o[1]&&l[0]&&l[1]&&(n.value=o[0])}n.visual=_t.retrieveVisuals(e),r.push(n)},this),Ev(t,r),uc(r),O(r,function(e){var a=e.close,n=[["<","≤"][a[1]],[">","≥"][a[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,n)},this)}};function Ev(r,t){var e=r.inverse;(r.orient==="vertical"?!e:e)&&t.reverse()}var _P=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.doRender=function(){var e=this.group;e.removeAll();var a=this.visualMapModel,n=a.get("textGap"),i=a.textStyleModel,o=i.getFont(),l=i.getTextColor(),s=this._getItemAlign(),u=a.itemSize,d=this._getViewData(),c=d.endsText,f=ua(a.get("showLabel",!0),!c);c&&this._renderEndsText(e,c[0],u,f,s),O(d.viewPieceList,function(p){var g=p.piece,v=new xe;v.onclick=ye(this._onItemClick,this,g),this._enableHoverLink(v,p.indexInModelPieceList);var y=a.getRepresentValue(g);if(this._createItemSymbol(v,y,[0,0,u[0],u[1]]),f){var _=this.visualMapModel.getValueState(y);v.add(new Xe({style:{x:s==="right"?-n:u[0]+n,y:u[1]/2,text:g.text,verticalAlign:"middle",align:s,font:o,fill:l,opacity:_==="outOfRange"?.5:1}}))}e.add(v)},this),c&&this._renderEndsText(e,c[1],u,f,s),Tr(a.get("orient"),e,a.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,a){var n=this;e.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(o){var l=n.visualMapModel;l.option.hoverLink&&n.api.dispatchAction({type:o,batch:no(l.findTargetDataIndices(a),l)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,a=e.option;if(a.orient==="vertical")return Ey(e,this.api,e.itemSize);var n=a.align;return(!n||n==="auto")&&(n="left"),n},t.prototype._renderEndsText=function(e,a,n,i,o){if(a){var l=new xe,s=this.visualMapModel.textStyleModel;l.add(new Xe({style:lt(s,{x:i?o==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:i?o:"center",text:a})})),e.add(l)}},t.prototype._getViewData=function(){var e=this.visualMapModel,a=ne(e.getPieceList(),function(l,s){return{piece:l,indexInModelPieceList:s}}),n=e.get("text"),i=e.get("orient"),o=e.get("inverse");return(i==="horizontal"?o:!o)?a.reverse():n&&(n=n.slice().reverse()),{viewPieceList:a,endsText:n}},t.prototype._createItemSymbol=function(e,a,n){e.add(St(this.getControllerVisual(a,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(a,"color")))},t.prototype._onItemClick=function(e){var a=this.visualMapModel,n=a.option,i=n.selectedMode;if(i){var o=Fe(n.selected),l=a.getSelectedMapKey(e);i==="single"||i===!0?(o[l]=!0,O(o,function(s,u){o[u]=u===l})):o[l]=!o[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},t.type="visualMap.piecewise",t}(Ry);function $y(r){r.registerComponentModel(yP),r.registerComponentView(_P),Ny(r)}function SP(r){De(Oy),De($y)}var wP={label:{enabled:!0},decal:{show:!1}},Nv=ht(),xP={};function TP(r,t){var e=r.getModel("aria");if(!e.get("enabled"))return;var a=Fe(wP);rt(a.label,r.getLocaleModel().get("aria"),!1),rt(e.option,a,!1),n(),i();function n(){var u=e.getModel("decal"),d=u.get("show");if(d){var c=Pe();r.eachSeries(function(f){if(!f.isColorBySeries()){var p=c.get(f.type);p||(p={},c.set(f.type,p)),Nv(f).scope=p}}),r.eachRawSeries(function(f){if(r.isSeriesFiltered(f))return;if(Be(f.enableAriaDecal)){f.enableAriaDecal();return}var p=f.getData();if(f.isColorBySeries()){var S=Ps(f.ecModel,f.name,xP,r.getSeriesCount()),w=p.getVisual("decal");p.setVisual("decal",T(w,S))}else{var g=f.getRawData(),v={},y=Nv(f).scope;p.each(function(C){var k=p.getRawIndex(C);v[k]=C});var _=g.count();g.each(function(C){var k=v[C],A=g.getName(C)||C+"",I=Ps(f.ecModel,A,y,_),M=p.getItemVisual(k,"decal");p.setItemVisual(k,"decal",T(M,I))})}function T(C,k){var A=C?be(be({},k),C):k;return A.dirty=!0,A}})}}function i(){var u=t.getZr().dom;if(u){var d=r.getLocaleModel().get("aria"),c=e.getModel("label");if(c.option=Ne(c.option,d),!!c.get("enabled")){if(c.get("description")){u.setAttribute("aria-label",c.get("description"));return}var f=r.getSeriesCount(),p=c.get(["data","maxCount"])||10,g=c.get(["series","maxCount"])||10,v=Math.min(f,g),y;if(!(f<1)){var _=l();if(_){var S=c.get(["general","withTitle"]);y=o(S,{title:_})}else y=c.get(["general","withoutTitle"]);var w=[],T=f>1?c.get(["series","multiple","prefix"]):c.get(["series","single","prefix"]);y+=o(T,{seriesCount:f}),r.eachSeries(function(I,M){if(M<v){var D=void 0,L=I.get("name"),E=L?"withName":"withoutName";D=f>1?c.get(["series","multiple",E]):c.get(["series","single",E]),D=o(D,{seriesId:I.seriesIndex,seriesName:I.get("name"),seriesType:s(I.subType)});var R=I.getData();if(R.count()>p){var V=c.get(["data","partialData"]);D+=o(V,{displayCnt:p})}else D+=c.get(["data","allData"]);for(var z=c.get(["data","separator","middle"]),G=c.get(["data","separator","end"]),q=[],Z=0;Z<R.count();Z++)if(Z<p){var H=R.getName(Z),F=R.getValues(Z),re=c.get(["data",H?"withName":"withoutName"]);q.push(o(re,{name:H,value:F.join(z)}))}D+=q.join(z)+G,w.push(D)}});var C=c.getModel(["series","multiple","separator"]),k=C.get("middle"),A=C.get("end");y+=w.join(k)+A,u.setAttribute("aria-label",y)}}}}function o(u,d){if(!Re(u))return u;var c=u;return O(d,function(f,p){c=c.replace(new RegExp("\\{\\s*"+p+"\\s*\\}","g"),f)}),c}function l(){var u=r.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function s(u){var d=r.getLocaleModel().get(["series","typeNames"]);return d[u]||d.chart}}function CP(r){if(!(!r||!r.aria)){var t=r.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},O(["description","general","series","data"],function(e){t[e]!=null&&(t.label[e]=t[e])})}}function kP(r){r.registerPreprocessor(CP),r.registerVisual(r.PRIORITY.VISUAL.ARIA,TP)}var Ov={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},AP=function(){function r(t){var e=this._condVal=Re(t)?new RegExp(t):xb(t)?t:null;if(e==null){var a="";pt(a)}}return r.prototype.evaluate=function(t){var e=typeof t;return Re(e)?this._condVal.test(t):aa(e)?this._condVal.test(t+""):!1},r}(),IP=function(){function r(){}return r.prototype.evaluate=function(){return this.value},r}(),DP=function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},r}(),MP=function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},r}(),PP=function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r}(),LP=function(){function r(){}return r.prototype.evaluate=function(){for(var t=!!this.valueParser,e=this.getValue,a=e(this.valueGetterParam),n=t?this.valueParser(a):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(t?n:a))return!1;return!0},r}();function Pd(r,t){if(r===!0||r===!1){var e=new IP;return e.value=r,e}var a="";return zy(r)||pt(a),r.and?$v("and",r,t):r.or?$v("or",r,t):r.not?VP(r,t):RP(r,t)}function $v(r,t,e){var a=t[r],n="";ge(a)||pt(n),a.length||pt(n);var i=r==="and"?new DP:new MP;return i.children=ne(a,function(o){return Pd(o,e)}),i.children.length||pt(n),i}function VP(r,t){var e=r.not,a="";zy(e)||pt(a);var n=new PP;return n.child=Pd(e,t),n.child||pt(a),n}function RP(r,t){for(var e="",a=t.prepareGetValue(r),n=[],i=vt(r),o=r.parser,l=o?uh(o):null,s=0;s<i.length;s++){var u=i[s];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var d=le(Ov,u)?Ov[u]:u,c=r[u],f=l?l(c):c,p=wb(d,f)||d==="reg"&&new AP(f);p||pt(e),n.push(p)}}n.length||pt(e);var g=new LP;return g.valueGetterParam=a,g.valueParser=l,g.getValue=t.getValue,g.subCondList=n,g}function zy(r){return Nt(r)&&!Kg(r)}var EP=function(){function r(t,e){this._cond=Pd(t,e)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r}();function NP(r,t){return new EP(r,t)}var OP={type:"echarts:filter",transform:function(r){for(var t=r.upstream,e,a=NP(r.config,{valueGetterAttrMap:Pe({dimension:!0}),prepareGetValue:function(l){var s="",u=l.dimension;le(l,"dimension")||pt(s);var d=t.getDimensionInfo(u);return d||pt(s),{dimIdx:d.index}},getValue:function(l){return t.retrieveValueFromItem(e,l.dimIdx)}}),n=[],i=0,o=t.count();i<o;i++)e=t.getRawDataItem(i),a.evaluate()&&n.push(e);return{data:n}}},$P={type:"echarts:sort",transform:function(r){var t=r.upstream,e=r.config,a="",n=jt(e);n.length||pt(a);var i=[];O(n,function(d){var c=d.dimension,f=d.order,p=d.parser,g=d.incomparable;if(c==null&&pt(a),f!=="asc"&&f!=="desc"&&pt(a),g&&g!=="min"&&g!=="max"){var v="";pt(v)}if(f!=="asc"&&f!=="desc"){var y="";pt(y)}var _=t.getDimensionInfo(c);_||pt(a);var S=p?uh(p):null;p&&!S&&pt(a),i.push({dimIdx:_.index,parser:S,comparator:new Tb(f,g)})});var o=t.sourceFormat;o!==Xg&&o!==Cb&&pt(a);for(var l=[],s=0,u=t.count();s<u;s++)l.push(t.getRawDataItem(s));return l.sort(function(d,c){for(var f=0;f<i.length;f++){var p=i[f],g=t.retrieveValueFromItem(d,p.dimIdx),v=t.retrieveValueFromItem(c,p.dimIdx);p.parser&&(g=p.parser(g),v=p.parser(v));var y=p.comparator.evaluate(g,v);if(y!==0)return y}return 0}),{data:l}}};function zP(r){r.registerTransform(OP),r.registerTransform($P)}var BP=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dataset",e}return t.prototype.init=function(e,a,n){r.prototype.init.call(this,e,a,n),this._sourceManager=new kb(this),dc(this)},t.prototype.mergeOption=function(e,a){r.prototype.mergeOption.call(this,e,a),dc(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Ab},t}(zt),qP=function(r){W(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dataset",e}return t.type="dataset",t}(Ut);function GP(r){r.registerComponentModel(BP),r.registerComponentView(qP)}const FP={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},UP={class:"q-pa-xs"},HP={class:"q-pa-none"},WP={class:"q-pb-sm"},YP={class:"row q-col-gutter-sm"},jP={class:"row items-center no-wrap"},ZP={class:"q-ml-md"},XP={class:"text-subtitle2 text-grey-8"},KP={class:"text-h6 text-weight-bold"},QP={class:"row q-col-gutter-sm q-pb-sm"},JP={class:"col-md-6 col-12"},eL={class:"col-md-6 col-12"},tL={class:"row q-col-gutter-sm q-pb-sm"},aL={class:"col-md-6 col-12"},rL={class:"col-md-6 col-12"},zv="Dashboard",nL={__name:"Index",setup(r){De([dh,ch,fh,ph,vh,Dy,gh]);const t=B({summary:{total_santri:1500,active_santri:1450,total_sales:155e5,total_transactions:1250,total_wallet_balance:55e6,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),e=B(!1),a=B(Pt().month??"this_month"),n=B([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),i=()=>{oe.visit(route("admin.dashboard",{month:a.value}))},o=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],l=ve(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(d){let c=d[0].name+"<br/>";return d.forEach(function(f){c+=f.marker+" "+f.seriesName+": "+ae(f.value)+"<br/>"}),c}},xAxis:{type:"category",data:t.value.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:d=>ae(d),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:t.value.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:o[0]}}]})),s=ve(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(d){return d.name+"<br/>"+d.seriesName+": "+ae(d.value)+" ("+d.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:t.value.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:d=>o[d.dataIndex%o.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})),u=B([{label:"Total Pelanggan",value:ve(()=>t.value.summary.total_santri),icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Penjualan",value:ve(()=>ae(t.value.summary.total_sales)),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Saldo Dompet Pelanggan",value:ve(()=>ae(t.value.summary.total_wallet_balance)),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Transaksi",value:ve(()=>ae(t.value.summary.total_transactions)),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(d,c)=>{const f=ee("i-head"),p=ee("authenticated-layout");return $(),X(se,null,[h(f,{title:zv}),h(p,null,Jt({title:b(()=>[N(P(zv))]),"right-button":b(()=>[h(Y,{class:"q-ml-sm",icon:e.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",onClick:c[0]||(c[0]=g=>e.value=!e.value)},null,8,["icon"])]),default:b(()=>[x("div",UP,[x("div",HP,[x("div",WP,[c[2]||(c[2]=x("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"}," Statistik Ringkasan ",-1)),x("div",YP,[($(!0),X(se,null,Cr(u.value,(g,v)=>($(),X("div",{key:v,class:"col-12 col-md-3"},[h(Me,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:b(()=>[x("div",jP,[h(nn,{icon:g.icon,color:g.color,"text-color":g.bgColor},null,8,["icon","color","text-color"]),x("div",ZP,[x("div",XP,P(g.label),1),x("div",KP,P(g.value),1)])])]),_:2},1024)]))),128))])])]),x("div",QP,[x("div",JP,[h(Me,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:b(()=>[c[3]||(c[3]=x("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),h(m(co),{class:"chart",option:l.value,autoresize:""},null,8,["option"])]),_:1})]),x("div",eL,[h(Me,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:b(()=>[c[4]||(c[4]=x("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),h(m(co),{class:"chart",option:s.value,autoresize:""},null,8,["option"])]),_:1})])]),x("div",tL,[x("div",aL,[h(Me,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:b(()=>[c[5]||(c[5]=x("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),h(It,{separator:""},{default:b(()=>[($(!0),X(se,null,Cr(t.value.top_customers_sales,(g,v)=>($(),K(pe,{key:v},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(nn,{color:"primary","text-color":"white",size:"sm"},{default:b(()=>[N(P(v+1),1)]),_:2},1024)]),_:2},1024),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>[N(P(g.name),1)]),_:2},1024)]),_:2},1024),h(j,{side:""},{default:b(()=>[h(Le,{class:"text-primary"},{default:b(()=>[N(P(m(ae)(g.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),x("div",rL,[h(Me,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:b(()=>[c[6]||(c[6]=x("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),h(It,{separator:""},{default:b(()=>[($(!0),X(se,null,Cr(t.value.top_customers_topup,(g,v)=>($(),K(pe,{key:v},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(nn,{color:"green-7","text-color":"white",size:"sm"},{default:b(()=>[N(P(v+1),1)]),_:2},1024)]),_:2},1024),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>[N(P(g.name),1)]),_:2},1024)]),_:2},1024),h(j,{side:""},{default:b(()=>[h(Le,{class:"text-green-7"},{default:b(()=>[N(P(m(ae)(g.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])]),_:2},[e.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar"},{default:b(()=>[x("div",FP,[h(Ce,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:a.value,"onUpdate:modelValue":[c[1]||(c[1]=g=>a.value=g),i],options:n.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},iL=Nr(nL,[["__scopeId","data-v-856a3dcb"]]),oL=Object.freeze(Object.defineProperty({__proto__:null,default:iL},Symbol.toStringTag,{value:"Module"}));var Ia=_u.CMD;function rn(r,t){return Math.abs(r-t)<1e-5}function hu(r){var t=r.data,e=r.len(),a=[],n,i=0,o=0,l=0,s=0;function u(R,V){n&&n.length>2&&a.push(n),n=[R,V]}function d(R,V,z,G){rn(R,z)&&rn(V,G)||n.push(R,V,z,G,z,G)}function c(R,V,z,G,q,Z){var H=Math.abs(V-R),F=Math.tan(H/4)*4/3,re=V<R?-1:1,_e=Math.cos(R),te=Math.sin(R),he=Math.cos(V),Ie=Math.sin(V),ke=_e*q+z,Ee=te*Z+G,we=he*q+z,Ge=Ie*Z+G,ze=q*F*re,Ye=Z*F*re;n.push(ke-ze*te,Ee+Ye*_e,we+ze*Ie,Ge-Ye*he,we,Ge)}for(var f,p,g,v,y=0;y<e;){var _=t[y++],S=y===1;switch(S&&(i=t[y],o=t[y+1],l=i,s=o,(_===Ia.L||_===Ia.C||_===Ia.Q)&&(n=[l,s])),_){case Ia.M:i=l=t[y++],o=s=t[y++],u(l,s);break;case Ia.L:f=t[y++],p=t[y++],d(i,o,f,p),i=f,o=p;break;case Ia.C:n.push(t[y++],t[y++],t[y++],t[y++],i=t[y++],o=t[y++]);break;case Ia.Q:f=t[y++],p=t[y++],g=t[y++],v=t[y++],n.push(i+2/3*(f-i),o+2/3*(p-o),g+2/3*(f-g),v+2/3*(p-v),g,v),i=g,o=v;break;case Ia.A:var w=t[y++],T=t[y++],C=t[y++],k=t[y++],A=t[y++],I=t[y++]+A;y+=1;var M=!t[y++];f=Math.cos(A)*C+w,p=Math.sin(A)*k+T,S?(l=f,s=p,u(l,s)):d(i,o,f,p),i=Math.cos(I)*C+w,o=Math.sin(I)*k+T;for(var D=(M?-1:1)*Math.PI/2,L=A;M?L>I:L<I;L+=D){var E=M?Math.max(L+D,I):Math.min(L+D,I);c(L,E,w,T,C,k)}break;case Ia.R:l=i=t[y++],s=o=t[y++],f=l+t[y++],p=s+t[y++],u(f,s),d(f,s,f,p),d(f,p,l,p),d(l,p,l,s),d(l,s,f,s);break;case Ia.Z:n&&d(i,o,l,s),i=l,o=s;break}}return n&&n.length>2&&a.push(n),a}function mu(r,t,e,a,n,i,o,l,s,u){if(rn(r,e)&&rn(t,a)&&rn(n,o)&&rn(i,l)){s.push(o,l);return}var d=2/u,c=d*d,f=o-r,p=l-t,g=Math.sqrt(f*f+p*p);f/=g,p/=g;var v=e-r,y=a-t,_=n-o,S=i-l,w=v*v+y*y,T=_*_+S*S;if(w<c&&T<c){s.push(o,l);return}var C=f*v+p*y,k=-f*_-p*S,A=w-C*C,I=T-k*k;if(A<c&&C>=0&&I<c&&k>=0){s.push(o,l);return}var M=[],D=[];fo(r,e,n,o,.5,M),fo(t,a,i,l,.5,D),mu(M[0],D[0],M[1],D[1],M[2],D[2],M[3],D[3],s,u),mu(M[4],D[4],M[5],D[5],M[6],D[6],M[7],D[7],s,u)}function lL(r,t){var e=hu(r),a=[];t=t||1;for(var n=0;n<e.length;n++){var i=e[n],o=[],l=i[0],s=i[1];o.push(l,s);for(var u=2;u<i.length;){var d=i[u++],c=i[u++],f=i[u++],p=i[u++],g=i[u++],v=i[u++];mu(l,s,d,c,f,p,g,v,o,t),l=g,s=v}a.push(o)}return a}function By(r,t,e){var a=r[t],n=r[1-t],i=Math.abs(a/n),o=Math.ceil(Math.sqrt(i*e)),l=Math.floor(e/o);l===0&&(l=1,o=e);for(var s=[],u=0;u<o;u++)s.push(l);var d=o*l,c=e-d;if(c>0)for(var u=0;u<c;u++)s[u%o]+=1;return s}function Bv(r,t,e){for(var a=r.r0,n=r.r,i=r.startAngle,o=r.endAngle,l=Math.abs(o-i),s=l*n,u=n-a,d=s>Math.abs(u),c=By([s,u],d?0:1,t),f=(d?l:u)/c.length,p=0;p<c.length;p++)for(var g=(d?u:l)/c[p],v=0;v<c[p];v++){var y={};d?(y.startAngle=i+f*p,y.endAngle=i+f*(p+1),y.r0=a+g*v,y.r=a+g*(v+1)):(y.startAngle=i+g*v,y.endAngle=i+g*(v+1),y.r0=a+f*p,y.r=a+f*(p+1)),y.clockwise=r.clockwise,y.cx=r.cx,y.cy=r.cy,e.push(y)}}function sL(r,t,e){for(var a=r.width,n=r.height,i=a>n,o=By([a,n],i?0:1,t),l=i?"width":"height",s=i?"height":"width",u=i?"x":"y",d=i?"y":"x",c=r[l]/o.length,f=0;f<o.length;f++)for(var p=r[s]/o[f],g=0;g<o[f];g++){var v={};v[u]=f*c,v[d]=g*p,v[l]=c,v[s]=p,v.x+=r.x,v.y+=r.y,e.push(v)}}function qv(r,t,e,a){return r*a-e*t}function uL(r,t,e,a,n,i,o,l){var s=e-r,u=a-t,d=o-n,c=l-i,f=qv(d,c,s,u);if(Math.abs(f)<1e-6)return null;var p=r-n,g=t-i,v=qv(p,g,d,c)/f;return v<0||v>1?null:new $a(v*s+r,v*u+t)}function dL(r,t,e){var a=new $a;$a.sub(a,e,t),a.normalize();var n=new $a;$a.sub(n,r,t);var i=n.dot(a);return i}function Xr(r,t){var e=r[r.length-1];e&&e[0]===t[0]&&e[1]===t[1]||r.push(t)}function cL(r,t,e){for(var a=r.length,n=[],i=0;i<a;i++){var o=r[i],l=r[(i+1)%a],s=uL(o[0],o[1],l[0],l[1],t.x,t.y,e.x,e.y);s&&n.push({projPt:dL(s,t,e),pt:s,idx:i})}if(n.length<2)return[{points:r},{points:r}];n.sort(function(y,_){return y.projPt-_.projPt});var u=n[0],d=n[n.length-1];if(d.idx<u.idx){var c=u;u=d,d=c}for(var f=[u.pt.x,u.pt.y],p=[d.pt.x,d.pt.y],g=[f],v=[p],i=u.idx+1;i<=d.idx;i++)Xr(g,r[i].slice());Xr(g,p),Xr(g,f);for(var i=d.idx+1;i<=u.idx+a;i++)Xr(v,r[i%a].slice());return Xr(v,f),Xr(v,p),[{points:g},{points:v}]}function Gv(r){var t=r.points,e=[],a=[];Yo(t,e,a);var n=new st(e[0],e[1],a[0]-e[0],a[1]-e[1]),i=n.width,o=n.height,l=n.x,s=n.y,u=new $a,d=new $a;return i>o?(u.x=d.x=l+i/2,u.y=s,d.y=s+o):(u.y=d.y=s+o/2,u.x=l,d.x=l+i),cL(t,u,d)}function Do(r,t,e,a){if(e===1)a.push(t);else{var n=Math.floor(e/2),i=r(t);Do(r,i[0],n,a),Do(r,i[1],e-n,a)}return a}function fL(r,t){for(var e=[],a=0;a<t;a++)e.push(Vu(r));return e}function pL(r,t){t.setStyle(r.style),t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel}function vL(r){for(var t=[],e=0;e<r.length;)t.push([r[e++],r[e++]]);return t}function gL(r,t){var e=[],a=r.shape,n;switch(r.type){case"rect":sL(a,t,e),n=et;break;case"sector":Bv(a,t,e),n=Vr;break;case"circle":Bv({r0:0,r:a.r,startAngle:0,endAngle:Math.PI*2,cx:a.cx,cy:a.cy},t,e),n=Vr;break;default:var i=r.getComputedTransform(),o=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,l=ne(lL(r.getUpdatedPathProxy(),o),function(_){return vL(_)}),s=l.length;if(s===0)Do(Gv,{points:l[0]},t,e);else if(s===t)for(var u=0;u<s;u++)e.push({points:l[u]});else{var d=0,c=ne(l,function(_){var S=[],w=[];Yo(_,S,w);var T=(w[1]-S[1])*(w[0]-S[0]);return d+=T,{poly:_,area:T}});c.sort(function(_,S){return S.area-_.area});for(var f=t,u=0;u<s;u++){var p=c[u];if(f<=0)break;var g=u===s-1?f:Math.ceil(p.area/d*t);g<0||(Do(Gv,{points:p.poly},g,e),f-=g)}}n=ya;break}if(!n)return fL(r,t);for(var v=[],u=0;u<e.length;u++){var y=new n;y.setShape(e[u]),pL(r,y),v.push(y)}return v}function hL(r,t){var e=r.length,a=t.length;if(e===a)return[r,t];for(var n=[],i=[],o=e<a?r:t,l=Math.min(e,a),s=Math.abs(a-e)/6,u=(l-2)/6,d=Math.ceil(s/u)+1,c=[o[0],o[1]],f=s,p=2;p<l;){var g=o[p-2],v=o[p-1],y=o[p++],_=o[p++],S=o[p++],w=o[p++],T=o[p++],C=o[p++];if(f<=0){c.push(y,_,S,w,T,C);continue}for(var k=Math.min(f,d-1)+1,A=1;A<=k;A++){var I=A/k;fo(g,y,S,T,I,n),fo(v,_,w,C,I,i),g=n[3],v=i[3],c.push(n[1],i[1],n[2],i[2],g,v),y=n[5],_=i[5],S=n[6],w=i[6]}f-=k-1}return o===r?[c,t]:[r,c]}function Fv(r,t){for(var e=r.length,a=r[e-2],n=r[e-1],i=[],o=0;o<t.length;)i[o++]=a,i[o++]=n;return i}function mL(r,t){for(var e,a,n,i=[],o=[],l=0;l<Math.max(r.length,t.length);l++){var s=r[l],u=t[l],d=void 0,c=void 0;s?u?(e=hL(s,u),d=e[0],c=e[1],a=d,n=c):(c=Fv(n||s,s),d=s):(d=Fv(a||u,u),c=u),i.push(d),o.push(c)}return[i,o]}function Uv(r){for(var t=0,e=0,a=0,n=r.length,i=0,o=n-2;i<n;o=i,i+=2){var l=r[o],s=r[o+1],u=r[i],d=r[i+1],c=l*d-u*s;t+=c,e+=(l+u)*c,a+=(s+d)*c}return t===0?[r[0]||0,r[1]||0]:[e/t/3,a/t/3,t]}function yL(r,t,e,a){for(var n=(r.length-2)/6,i=1/0,o=0,l=r.length,s=l-2,u=0;u<n;u++){for(var d=u*6,c=0,f=0;f<l;f+=2){var p=f===0?d:(d+f-2)%s+2,g=r[p]-e[0],v=r[p+1]-e[1],y=t[f]-a[0],_=t[f+1]-a[1],S=y-g,w=_-v;c+=S*S+w*w}c<i&&(i=c,o=u)}return o}function bL(r){for(var t=[],e=r.length,a=0;a<e;a+=2)t[a]=r[e-a-2],t[a+1]=r[e-a-1];return t}function _L(r,t,e,a){for(var n=[],i,o=0;o<r.length;o++){var l=r[o],s=t[o],u=Uv(l),d=Uv(s);i==null&&(i=u[2]<0!=d[2]<0);var c=[],f=[],p=0,g=1/0,v=[],y=l.length;i&&(l=bL(l));for(var _=yL(l,s,u,d)*6,S=y-2,w=0;w<S;w+=2){var T=(_+w)%S+2;c[w+2]=l[T]-u[0],c[w+3]=l[T+1]-u[1]}c[0]=l[_]-u[0],c[1]=l[_+1]-u[1];for(var C=a/e,k=-a/2;k<=a/2;k+=C){for(var A=Math.sin(k),I=Math.cos(k),M=0,w=0;w<l.length;w+=2){var D=c[w],L=c[w+1],E=s[w]-d[0],R=s[w+1]-d[1],V=E*I-R*A,z=E*A+R*I;v[w]=V,v[w+1]=z;var G=V-D,q=z-L;M+=G*G+q*q}if(M<g){g=M,p=k;for(var Z=0;Z<v.length;Z++)f[Z]=v[Z]}}n.push({from:c,to:f,fromCp:u,toCp:d,rotation:-p})}return n}function Mo(r){return r.__isCombineMorphing}var qy="__mOriginal_";function Po(r,t,e){var a=qy+t,n=r[a]||r[t];r[a]||(r[a]=r[t]);var i=e.replace,o=e.after,l=e.before;r[t]=function(){var s=arguments,u;return l&&l.apply(this,s),i?u=i.apply(this,s):u=n.apply(this,s),o&&o.apply(this,s),u}}function Zn(r,t){var e=qy+t;r[e]&&(r[t]=r[e],r[e]=null)}function Hv(r,t){for(var e=0;e<r.length;e++)for(var a=r[e],n=0;n<a.length;){var i=a[n],o=a[n+1];a[n++]=t[0]*i+t[2]*o+t[4],a[n++]=t[1]*i+t[3]*o+t[5]}}function Gy(r,t){var e=r.getUpdatedPathProxy(),a=t.getUpdatedPathProxy(),n=mL(hu(e),hu(a)),i=n[0],o=n[1],l=r.getComputedTransform(),s=t.getComputedTransform();function u(){this.transform=null}l&&Hv(i,l),s&&Hv(o,s),Po(t,"updateTransform",{replace:u}),t.transform=null;var d=_L(i,o,10,Math.PI),c=[];Po(t,"buildPath",{replace:function(f){for(var p=t.__morphT,g=1-p,v=[],y=0;y<d.length;y++){var _=d[y],S=_.from,w=_.to,T=_.rotation*p,C=_.fromCp,k=_.toCp,A=Math.sin(T),I=Math.cos(T);Ib(v,C,k,p);for(var M=0;M<S.length;M+=2){var D=S[M],L=S[M+1],E=w[M],R=w[M+1],V=D*g+E*p,z=L*g+R*p;c[M]=V*I-z*A+v[0],c[M+1]=V*A+z*I+v[1]}var G=c[0],q=c[1];f.moveTo(G,q);for(var M=2;M<S.length;){var E=c[M++],R=c[M++],Z=c[M++],H=c[M++],F=c[M++],re=c[M++];G===E&&q===R&&Z===F&&H===re?f.lineTo(F,re):f.bezierCurveTo(E,R,Z,H,F,re),G=F,q=re}}}})}function Ld(r,t,e){if(!r||!t)return t;var a=e.done,n=e.during;Gy(r,t),t.__morphT=0;function i(){Zn(t,"buildPath"),Zn(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},Ne({during:function(o){t.dirtyShape(),n&&n(o)},done:function(){i(),a&&a()}},e)),t}function SL(r,t,e,a,n,i){var o=16;r=n===e?0:Math.round(32767*(r-e)/(n-e)),t=i===a?0:Math.round(32767*(t-a)/(i-a));for(var l=0,s,u=(1<<o)/2;u>0;u/=2){var d=0,c=0;(r&u)>0&&(d=1),(t&u)>0&&(c=1),l+=u*u*(3*d^c),c===0&&(d===1&&(r=u-1-r,t=u-1-t),s=r,r=t,t=s)}return l}function Lo(r){var t=1/0,e=1/0,a=-1/0,n=-1/0,i=ne(r,function(l){var s=l.getBoundingRect(),u=l.getComputedTransform(),d=s.x+s.width/2+(u?u[4]:0),c=s.y+s.height/2+(u?u[5]:0);return t=Math.min(d,t),e=Math.min(c,e),a=Math.max(d,a),n=Math.max(c,n),[d,c]}),o=ne(i,function(l,s){return{cp:l,z:SL(l[0],l[1],t,e,a,n),path:r[s]}});return o.sort(function(l,s){return l.z-s.z}).map(function(l){return l.path})}function Fy(r){return gL(r.path,r.count)}function yu(){return{fromIndividuals:[],toIndividuals:[],count:0}}function wL(r,t,e){var a=[];function n(C){for(var k=0;k<C.length;k++){var A=C[k];Mo(A)?n(A.childrenRef()):A instanceof Tt&&a.push(A)}}n(r);var i=a.length;if(!i)return yu();var o=e.dividePath||Fy,l=o({path:t,count:i});if(l.length!==i)return console.error("Invalid morphing: unmatched splitted path"),yu();a=Lo(a),l=Lo(l);for(var s=e.done,u=e.during,d=e.individualDelay,c=new tn,f=0;f<i;f++){var p=a[f],g=l[f];g.parent=t,g.copyTransform(c),d||Gy(p,g)}t.__isCombineMorphing=!0,t.childrenRef=function(){return l};function v(C){for(var k=0;k<l.length;k++)l[k].addSelfToZr(C)}Po(t,"addSelfToZr",{after:function(C){v(C)}}),Po(t,"removeSelfFromZr",{after:function(C){for(var k=0;k<l.length;k++)l[k].removeSelfFromZr(C)}});function y(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,Zn(t,"addSelfToZr"),Zn(t,"removeSelfFromZr")}var _=l.length;if(d)for(var S=_,w=function(){S--,S===0&&(y(),s&&s())},f=0;f<_;f++){var T=d?Ne({delay:(e.delay||0)+d(f,_,a[f],l[f]),done:w},e):e;Ld(a[f],l[f],T)}else t.__morphT=0,t.animateTo({__morphT:1},Ne({during:function(C){for(var k=0;k<_;k++){var A=l[k];A.__morphT=t.__morphT,A.dirtyShape()}u&&u(C)},done:function(){y();for(var C=0;C<r.length;C++)Zn(r[C],"updateTransform");s&&s()}},e));return t.__zr&&v(t.__zr),{fromIndividuals:a,toIndividuals:l,count:_}}function xL(r,t,e){var a=t.length,n=[],i=e.dividePath||Fy;function o(p){for(var g=0;g<p.length;g++){var v=p[g];Mo(v)?o(v.childrenRef()):v instanceof Tt&&n.push(v)}}if(Mo(r)){o(r.childrenRef());var l=n.length;if(l<a)for(var s=0,u=l;u<a;u++)n.push(Vu(n[s++%l]));n.length=a}else{n=i({path:r,count:a});for(var d=r.getComputedTransform(),u=0;u<n.length;u++)n[u].setLocalTransform(d);if(n.length!==a)return console.error("Invalid morphing: unmatched splitted path"),yu()}n=Lo(n),t=Lo(t);for(var c=e.individualDelay,u=0;u<a;u++){var f=c?Ne({delay:(e.delay||0)+c(u,a,n[u],t[u])},e):e;Ld(n[u],t[u],f)}return{fromIndividuals:n,toIndividuals:t,count:t.length}}function Wv(r){return ge(r[0])}function Yv(r,t){for(var e=[],a=r.length,n=0;n<a;n++)e.push({one:r[n],many:[]});for(var n=0;n<t.length;n++){var i=t[n].length,o=void 0;for(o=0;o<i;o++)e[o%a].many.push(t[n][o])}for(var l=0,n=a-1;n>=0;n--)if(!e[n].many.length){var s=e[l].many;if(s.length<=1)if(l)l=0;else return e;var i=s.length,u=Math.ceil(i/2);e[n].many=s.slice(u,i),e[l].many=s.slice(0,u),l++}return e}var TL={clone:function(r){for(var t=[],e=1-Math.pow(1-r.path.style.opacity,1/r.count),a=0;a<r.count;a++){var n=Vu(r.path);n.setStyle("opacity",e),t.push(n)}return t},split:null};function xs(r,t,e,a,n,i){if(!r.length||!t.length)return;var o=Ti("update",a,n);if(!(o&&o.duration>0))return;var l=a.getModel("universalTransition").get("delay"),s=Object.assign({setToFinal:!0},o),u,d;Wv(r)&&(u=r,d=t),Wv(t)&&(u=t,d=r);function c(_,S,w,T,C){var k=_.many,A=_.one;if(k.length===1&&!C){var I=S?k[0]:A,M=S?A:k[0];if(Mo(I))c({many:[I],one:M},!0,w,T,!0);else{var D=l?Ne({delay:l(w,T)},s):s;Ld(I,M,D),i(I,M,I,M,D)}}else for(var L=Ne({dividePath:TL[e],individualDelay:l&&function(q,Z,H,F){return l(q+w,T)}},s),E=S?wL(k,A,L):xL(A,k,L),R=E.fromIndividuals,V=E.toIndividuals,z=R.length,G=0;G<z;G++){var D=l?Ne({delay:l(G,z)},s):s;i(R[G],V[G],S?k[G]:_.one,S?_.one:k[G],D)}}for(var f=u?u===r:r.length>t.length,p=u?Yv(d,u):Yv(f?t:r,[f?r:t]),g=0,v=0;v<p.length;v++)g+=p[v].many.length;for(var y=0,v=0;v<p.length;v++)c(p[v],f,y,g),y+=p[v].many.length}function mr(r){if(!r)return[];if(ge(r)){for(var t=[],e=0;e<r.length;e++)t.push(mr(r[e]));return t}var a=[];return r.traverse(function(n){n instanceof Tt&&!n.disableMorphing&&!n.invisible&&!n.ignore&&a.push(n)}),a}var Uy=1e4,CL=0,jv=1,Zv=2,kL=ht();function AL(r,t){for(var e=r.dimensions,a=0;a<e.length;a++){var n=r.getDimensionInfo(e[a]);if(n&&n.otherDims[t]===0)return e[a]}}function IL(r,t,e){var a=r.getDimensionInfo(e),n=a&&a.ordinalMeta;if(a){var i=r.get(a.name,t);return n&&n.categories[i]||i+""}}function Xv(r,t,e,a){var n=a?"itemChildGroupId":"itemGroupId",i=AL(r,n);if(i){var o=IL(r,t,i);return o}var l=r.getRawDataItem(t),s=a?"childGroupId":"groupId";if(l&&l[s])return l[s]+"";if(!a)return e||r.getId(t)}function Kv(r){var t=[];return O(r,function(e){var a=e.data,n=e.dataGroupId;if(!(a.count()>Uy))for(var i=a.getIndices(),o=0;o<i.length;o++)t.push({data:a,groupId:Xv(a,o,n,!1),childGroupId:Xv(a,o,n,!0),divide:e.divide,dataIndex:o})}),t}function Ts(r,t,e){r.traverse(function(a){a instanceof Tt&&qt(a,{style:{opacity:0}},t,{dataIndex:e,isFrom:!0})})}function Cs(r){if(r.parent){var t=r.getComputedTransform();r.setLocalTransform(t),r.parent.remove(r)}}function Kr(r){r.stopAnimation(),r.isGroup&&r.traverse(function(t){t.stopAnimation()})}function DL(r,t,e){var a=Ti("update",e,t);a&&r.traverse(function(n){if(n instanceof Lr){var i=Db(n);i&&n.animateFrom({style:i},a)}})}function ML(r,t){var e=r.length;if(e!==t.length)return!1;for(var a=0;a<e;a++){var n=r[a],i=t[a];if(n.data.getId(n.dataIndex)!==i.data.getId(i.dataIndex))return!1}return!0}function Hy(r,t,e){var a=Kv(r),n=Kv(t);function i(w,T,C,k,A){(C||w)&&T.animateFrom({style:C&&C!==w?be(be({},C.style),w.style):w.style},A)}var o=!1,l=CL,s=Pe(),u=Pe();a.forEach(function(w){w.groupId&&s.set(w.groupId,!0),w.childGroupId&&u.set(w.childGroupId,!0)});for(var d=0;d<n.length;d++){var c=n[d].groupId;if(u.get(c)){l=jv;break}var f=n[d].childGroupId;if(f&&s.get(f)){l=Zv;break}}function p(w,T){return function(C){var k=C.data,A=C.dataIndex;return T?k.getId(A):w?l===jv?C.childGroupId:C.groupId:l===Zv?C.childGroupId:C.groupId}}var g=ML(a,n),v={};if(!g)for(var d=0;d<n.length;d++){var y=n[d],_=y.data.getItemGraphicEl(y.dataIndex);_&&(v[_.id]=!0)}function S(w,T){var C=a[T],k=n[w],A=k.data.hostModel,I=C.data.getItemGraphicEl(C.dataIndex),M=k.data.getItemGraphicEl(k.dataIndex);if(I===M){M&&DL(M,k.dataIndex,A);return}I&&v[I.id]||M&&(Kr(M),I?(Kr(I),Cs(I),o=!0,xs(mr(I),mr(M),k.divide,A,w,i)):Ts(M,A,w))}new rr(a,n,p(!0,g),p(!1,g),null,"multiple").update(S).updateManyToOne(function(w,T){var C=n[w],k=C.data,A=k.hostModel,I=k.getItemGraphicEl(C.dataIndex),M=bt(ne(T,function(D){return a[D].data.getItemGraphicEl(a[D].dataIndex)}),function(D){return D&&D!==I&&!v[D.id]});I&&(Kr(I),M.length?(O(M,function(D){Kr(D),Cs(D)}),o=!0,xs(mr(M),mr(I),C.divide,A,w,i)):Ts(I,A,C.dataIndex))}).updateOneToMany(function(w,T){var C=a[T],k=C.data.getItemGraphicEl(C.dataIndex);if(!(k&&v[k.id])){var A=bt(ne(w,function(M){return n[M].data.getItemGraphicEl(n[M].dataIndex)}),function(M){return M&&M!==k}),I=n[w[0]].data.hostModel;A.length&&(O(A,function(M){return Kr(M)}),k?(Kr(k),Cs(k),o=!0,xs(mr(k),mr(A),C.divide,I,w[0],i)):O(A,function(M){return Ts(M,I,w[0])}))}}).updateManyToMany(function(w,T){new rr(T,w,function(C){return a[C].data.getId(a[C].dataIndex)},function(C){return n[C].data.getId(n[C].dataIndex)}).update(function(C,k){S(w[C],T[k])}).execute()}).execute(),o&&O(t,function(w){var T=w.data,C=T.hostModel,k=C&&e.getViewOfSeriesModel(C),A=Ti("update",C,0);k&&C.isAnimationEnabled()&&A&&A.duration>0&&k.group.traverse(function(I){I instanceof Tt&&!I.animators.length&&I.animateFrom({style:{opacity:0}},A)})})}function Qv(r){var t=r.getModel("universalTransition").get("seriesKey");return t||r.id}function Jv(r){return ge(r)?r.sort().join(","):r}function ja(r){if(r.hostModel)return r.hostModel.getModel("universalTransition").get("divideShape")}function PL(r,t){var e=Pe(),a=Pe(),n=Pe();return O(r.oldSeries,function(i,o){var l=r.oldDataGroupIds[o],s=r.oldData[o],u=Qv(i),d=Jv(u);a.set(d,{dataGroupId:l,data:s}),ge(u)&&O(u,function(c){n.set(c,{key:d,dataGroupId:l,data:s})})}),O(t.updatedSeries,function(i){if(i.isUniversalTransitionEnabled()&&i.isAnimationEnabled()){var o=i.get("dataGroupId"),l=i.getData(),s=Qv(i),u=Jv(s),d=a.get(u);if(d)e.set(u,{oldSeries:[{dataGroupId:d.dataGroupId,divide:ja(d.data),data:d.data}],newSeries:[{dataGroupId:o,divide:ja(l),data:l}]});else if(ge(s)){var c=[];O(s,function(g){var v=a.get(g);v.data&&c.push({dataGroupId:v.dataGroupId,divide:ja(v.data),data:v.data})}),c.length&&e.set(u,{oldSeries:c,newSeries:[{dataGroupId:o,data:l,divide:ja(l)}]})}else{var f=n.get(s);if(f){var p=e.get(f.key);p||(p={oldSeries:[{dataGroupId:f.dataGroupId,data:f.data,divide:ja(f.data)}],newSeries:[]},e.set(f.key,p)),p.newSeries.push({dataGroupId:o,data:l,divide:ja(l)})}}}}),e}function eg(r,t){for(var e=0;e<r.length;e++){var a=t.seriesIndex!=null&&t.seriesIndex===r[e].seriesIndex||t.seriesId!=null&&t.seriesId===r[e].id;if(a)return e}}function LL(r,t,e,a){var n=[],i=[];O(jt(r.from),function(o){var l=eg(t.oldSeries,o);l>=0&&n.push({dataGroupId:t.oldDataGroupIds[l],data:t.oldData[l],divide:ja(t.oldData[l]),groupIdDim:o.dimension})}),O(jt(r.to),function(o){var l=eg(e.updatedSeries,o);if(l>=0){var s=e.updatedSeries[l].getData();i.push({dataGroupId:t.oldDataGroupIds[l],data:s,divide:ja(s),groupIdDim:o.dimension})}}),n.length>0&&i.length>0&&Hy(n,i,a)}function VL(r){r.registerUpdateLifecycle("series:beforeupdate",function(t,e,a){O(jt(a.seriesTransition),function(n){O(jt(n.to),function(i){for(var o=a.updatedSeries,l=0;l<o.length;l++)(i.seriesIndex!=null&&i.seriesIndex===o[l].seriesIndex||i.seriesId!=null&&i.seriesId===o[l].id)&&(o[l][ml]=!0)})})}),r.registerUpdateLifecycle("series:transition",function(t,e,a){var n=kL(e);if(n.oldSeries&&a.updatedSeries&&a.optionChanged){var i=a.seriesTransition;if(i)O(jt(i),function(p){LL(p,n,a,e)});else{var o=PL(n,a);O(o.keys(),function(p){var g=o.get(p);Hy(g.oldSeries,g.newSeries,e)})}O(a.updatedSeries,function(p){p[ml]&&(p[ml]=!1)})}for(var l=t.getSeries(),s=n.oldSeries=[],u=n.oldDataGroupIds=[],d=n.oldData=[],c=0;c<l.length;c++){var f=l[c].getData();f.count()<Uy&&(s.push(l[c]),u.push(l[c].get("dataGroupId")),d.push(f))}})}De([dh]);De([pw]);De([Pw,ch,fh,Ow,jw,Rx,s2,H2,pT,bT,IT,wC,YC,nk,_k,Tk,Rk,qk,Qk,nA,vA,KA]);De(gh);De(xI);De(Jh);De(NI);De($m);De(BI);De(ZI);De(ND);De(vh);De(Iu);De(JD);De(ph);De(uM);De(hM);De(wM);De(IM);De(Dy);De(tP);De(Py);De(Ly);De(SP);De(Oy);De($y);De(kP);De(zP);De(GP);De(VL);De(VS);const RL={class:"row q-col-gutter-sm"},EL={class:"col-lg-6 col-md-6 col-sm-12 col-xs-12"},NL={class:"col-lg-6 col-md-6 col-sm-12 col-xs-12"},OL={__name:"ChartCard",setup(r){const t=Ue(),e={tooltip:{show:!0},title:{text:"Servis Diterima vs Sukses vs Gagal",textStyle:{color:"#444"},left:"center"},legend:{top:"10%",data:[t.props.data.chart1_data.data[0].label,t.props.data.chart1_data.data[1].label,t.props.data.chart1_data.data[2].label]},grid:{containLabel:!0,left:"5px",bottom:"5px",right:"5px"},xAxis:{show:!0,type:"category",data:t.props.data.chart1_data.x_axis_label_data,axisLine:{lineStyle:{color:"#555",type:"dashed"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{show:!0,color:"#ccc",type:"dashed"}},axisLabel:{show:!0},boundaryGap:!0},yAxis:{show:!0,type:"value",axisLine:{lineStyle:{color:"#555",type:"dashed"}},axisLabel:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#ccc"}},axisTick:{show:!0,lineStyle:{show:!0,color:"#fff",type:"dashed"}}},series:[{name:t.props.data.chart1_data.data[0].label,type:"line",lineStyle:{color:"#007bff"},itemStyle:{color:"#007bff"},smooth:!0,data:t.props.data.chart1_data.data[0].data},{name:t.props.data.chart1_data.data[1].label,type:"line",lineStyle:{color:"#28a745"},itemStyle:{color:"#28a745"},smooth:!0,data:t.props.data.chart1_data.data[1].data},{name:t.props.data.chart1_data.data[2].label,type:"line",lineStyle:{color:"#dc3545"},itemStyle:{color:"#dc3545"},smooth:!0,data:t.props.data.chart1_data.data[2].data}],color:["white"]},a={tooltip:{show:!0},title:{text:"Pendapatan Servis",textStyle:{color:"#444"},left:"center"},legend:{top:"10%",data:[t.props.data.chart2_data.data[0].label]},grid:{containLabel:!0,left:"5px",bottom:"5px",right:"5px"},xAxis:{show:!0,type:"category",data:t.props.data.chart1_data.x_axis_label_data,axisLine:{lineStyle:{color:"#555",type:"dashed"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{show:!0,color:"#ccc",type:"dashed"}},axisLabel:{show:!0},boundaryGap:!0},yAxis:{show:!0,type:"value",axisLine:{lineStyle:{color:"#555",type:"dashed"}},axisLabel:{show:!0},splitLine:{lineStyle:{type:"dashed",color:"#ccc"}},axisTick:{show:!0,lineStyle:{show:!0,color:"#fff",type:"dashed"}}},series:[{name:t.props.data.chart2_data.data[0].label,type:"bar",itemStyle:{color:"#007bff"},smooth:!0,data:t.props.data.chart2_data.data[0].data}],color:["white"]};return(n,i)=>($(),X("div",RL,[x("div",EL,[h(Me,{square:"",class:"no-shadow",bordered:"",style:{"background-color":"#fff"}},{default:b(()=>[h(me,{class:"q-pa-none"},{default:b(()=>[h(m(co),{option:e,class:"q-mt-md",resizable:!0,autoresize:"",style:{height:"250px"}})]),_:1})]),_:1})]),x("div",NL,[h(Me,{class:"no-shadow",square:"",bordered:"",style:{"background-color":"#fff"}},{default:b(()=>[h(me,{class:"q-pa-none"},{default:b(()=>[h(m(co),{option:a,class:"q-mt-md",resizable:!0,autoresize:"",style:{height:"250px"}})]),_:1})]),_:1})])]))}},$L=Nr(OL,[["__scopeId","data-v-5c77cb08"]]),zL=Object.freeze(Object.defineProperty({__proto__:null,default:$L},Symbol.toStringTag,{value:"Module"})),BL={class:"row"},qL={class:"row q-col-gutter-sm"},GL={class:"col-sm-6 col-xs-12"},FL={class:"col-sm-6 col-xs-12"},UL={class:"col-md-3 col-sm-6 col-xs-12"},HL={class:"col-md-3 col-sm-6 col-xs-12"},WL={class:"col-md-3 col-sm-6 col-xs-12"},YL={class:"col-md-3 col-sm-6 col-xs-12"};const jL={__name:"SummaryCard",setup(r){Ue();const t=(e,a)=>{const i={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...a};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(i)),oe.visit(e,{data:i})};return(e,a)=>($(),X("div",BL,[h(Me,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:b(()=>[h(me,{class:"q-pa-none"},{default:b(()=>[x("div",qL,[x("div",GL,[h(pe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:a[0]||(a[0]=n=>e.$inertia.visit(e.route("admin.customer.index",{status:"active"})))},{default:b(()=>[h(j,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:b(()=>[h(U,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),h(j,{class:"q-pa-md q-ml-none text-white"},{default:b(()=>[h(Le,{class:"text-white text-h6 text-weight-bolder"},{default:b(()=>[N(P(e.$page.props.data.active_customer_count),1)]),_:1}),h(Le,null,{default:b(()=>a[5]||(a[5]=[N("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),x("div",FL,[h(pe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:a[1]||(a[1]=n=>e.$inertia.visit(e.route("admin.customer.index",{status:"active"})))},{default:b(()=>[h(j,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:b(()=>[h(U,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),h(j,{class:"q-pa-md q-ml-none text-white"},{default:b(()=>[h(Le,{class:"text-white text-h6 text-weight-bolder"},{default:b(()=>[N(P(e.$page.props.data.active_user_count),1)]),_:1}),h(Le,null,{default:b(()=>a[6]||(a[6]=[N("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),x("div",UL,[h(pe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:b(()=>[h(j,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:b(()=>[h(U,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),h(j,{class:"q-pa-md q-ml-none text-white"},{default:b(()=>[h(Le,{class:"text-white text-weight-bold"},{default:b(()=>[N(" Rp. "+P(m(ae)(e.$page.props.data.total_finance_account_balance)),1)]),_:1}),h(Le,null,{default:b(()=>a[7]||(a[7]=[N("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),x("div",HL,[h(pe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:b(()=>[h(j,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:b(()=>[h(U,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),h(j,{class:"q-pa-md q-ml-none text-white"},{default:b(()=>[h(Le,{class:"text-white text-weight-bold"},{default:b(()=>[N(" Rp. "+P(m(ae)(e.$page.props.data.total_customer_balance)),1)]),_:1}),h(Le,null,{default:b(()=>a[8]||(a[8]=[N("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),x("div",WL,[h(pe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:b(()=>[h(j,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:b(()=>[h(U,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),h(j,{class:"q-pa-md q-ml-none text-white"},{default:b(()=>[h(Le,{class:"text-white text-weight-bold"},{default:b(()=>[N(" Rp. "+P(m(ae)(e.$page.props.data.total_customer_debt)),1)]),_:1}),h(Le,null,{default:b(()=>a[9]||(a[9]=[N("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),x("div",YL,[h(pe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:b(()=>[h(j,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:b(()=>[h(U,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),h(j,{class:"q-pa-md q-ml-none text-white"},{default:b(()=>[h(Le,{class:"text-white text-weight-bold"},{default:b(()=>[N(" Rp. "+P(m(ae)(e.$page.props.data.total_customer_credit)),1)]),_:1}),h(Le,null,{default:b(()=>a[10]||(a[10]=[N("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),Q("",!0),Q("",!0),Q("",!0)])]),_:1})]),_:1})]))}},ZL=Object.freeze(Object.defineProperty({__proto__:null,default:jL},Symbol.toStringTag,{value:"Module"})),XL={class:"text-subtitle1 text-bold text-grey-9"},KL={class:"flex items-center justify-between"},QL={__name:"TopCard",props:{items:Array,title:String,route_url:String},setup(r){const t=r;return(e,a)=>{const n=ee("i-link");return $(),K(Me,{class:"no-shadow",square:"",bordered:""},{default:b(()=>[h(me,null,{default:b(()=>[x("div",XL,P(t.title),1),x("div",null,[($(!0),X(se,null,Cr(t.items,i=>($(),X("div",{key:i.id},[x("div",KL,[x("span",null,[h(n,{href:e.route(t.route_url,{id:i.id})},{default:b(()=>[N(P(i.name),1)]),_:2},1032,["href"])]),x("span",null,"Rp. "+P(m(ae)(i.total)),1)])]))),128))])]),_:1})]),_:1})}}},JL=Object.freeze(Object.defineProperty({__proto__:null,default:QL},Symbol.toStringTag,{value:"Module"})),eV={class:"q-gutter-sm"},tV={class:"q-gutter-sm"},aV={class:"col col-md-6 q-pa-xs"},rV={class:"row"},nV={class:"detail"},iV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},oV={class:"flex q-gutter-sm"},lV={class:""},tg="Rincian Akun",sV={__name:"Detail",setup(r){const t=Ue(),e=B("main"),a=B([]),n=B(!0),i=xt({...Pt()}),o=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),l=[{name:"id",label:"#",field:"id",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!0},{name:"quantity",label:"Jumlah",field:"quantity",align:"center",sortable:!0}];Je(()=>{s()});const s=(c=null)=>Lt({pagination:o,filter:i,props:c,rows:a,loading:n}),u=at(),d=ve(()=>u.screen.gt.sm?l:l.filter(c=>c.name==="id"));return(c,f)=>{const p=ee("i-head"),g=ee("authenticated-layout");return $(),X(se,null,[h(p,{title:tg}),h(g,null,{title:b(()=>[N(P(tg))]),"left-button":b(()=>[x("div",eV,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=v=>c.$inertia.get(c.route("admin.finance-account.index")))})])]),"right-button":b(()=>[x("div",tV,[h(Y,{icon:"edit",dense:"",color:"primary",onClick:f[1]||(f[1]=v=>m(oe).get(c.route("admin.finance-account.edit",{id:m(t).props.data.id})))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",aV,[x("div",rV,[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(Nu,{modelValue:e.value,"onUpdate:modelValue":f[2]||(f[2]=v=>e.value=v),align:"left"},{default:b(()=>[h(vn,{name:"main",label:"Info Akun"}),h(vn,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),h(Ou,{modelValue:e.value,"onUpdate:modelValue":f[4]||(f[4]=v=>e.value=v)},{default:b(()=>[h(gn,{name:"main"},{default:b(()=>[x("table",nV,[x("tbody",null,[x("tr",null,[f[5]||(f[5]=x("td",{style:{width:"150px"}},"Nama",-1)),f[6]||(f[6]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,P(m(t).props.data.name),1)]),x("tr",null,[f[7]||(f[7]=x("td",null,"Jenis",-1)),f[8]||(f[8]=x("td",null,":",-1)),x("td",null,P(c.$CONSTANTS.FINANCE_ACCOUNT_TYPES[m(t).props.data.type]),1)]),m(t).props.data.type=="bank"?($(),X(se,{key:0},[x("tr",null,[f[9]||(f[9]=x("td",null,"Bank",-1)),f[10]||(f[10]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.bank),1)]),x("tr",null,[f[11]||(f[11]=x("td",null,"No. Rek",-1)),f[12]||(f[12]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.number),1)]),x("tr",null,[f[13]||(f[13]=x("td",null,"Atas Nama",-1)),f[14]||(f[14]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.holder),1)])],64)):Q("",!0),x("tr",null,[f[15]||(f[15]=x("td",null,"Tampilkan di Wallet",-1)),f[16]||(f[16]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.has_wallet_access?"Ya":"Tidak"),1)]),x("tr",null,[f[17]||(f[17]=x("td",null,"Status",-1)),f[18]||(f[18]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.active?"Aktif":"Tidak Aktif"),1)]),x("tr",null,[f[19]||(f[19]=x("td",null,"Saldo",-1)),f[20]||(f[20]=x("td",null,":",-1)),x("td",null,"Rp. "+P(m(ae)(m(t).props.data.balance)),1)]),x("tr",null,[f[21]||(f[21]=x("td",null,"Catatan",-1)),f[22]||(f[22]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.notes),1)])])])]),_:1}),h(gn,{name:"history"},{default:b(()=>[h(it,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:o.value,"onUpdate:pagination":f[3]||(f[3]=v=>o.value=v),filter:i.search,loading:n.value,columns:d.value,rows:a.value,"rows-per-page-options":[10,25,50],onRequest:s,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:v,message:y,filter:_})=>[x("div",iV,[x("span",null,P(y)+" "+P(_?" with term "+_:""),1)])]),body:b(v=>[h(tt,{props:v},{default:b(()=>[h(J,{key:"id",props:v},{default:b(()=>[x("div",oV,[x("div",null,[x("b",null,"#"+P(v.row.id),1)]),x("div",null," - "+P(c.$dayjs(new Date(v.row.created_at)).format("DD/MM/YYYY hh:mm:ss")),1),x("div",null," - "+P(v.row.created_by?v.row.created_by.username:"--"),1)]),m(u).screen.lt.md?($(),X(se,{key:0},[x("div",lV,P(c.$CONSTANTS.STOCKMOVEMENT_REFTYPES[v.row.ref_type]),1),x("div",{class:Ze(v.row.quantity<0?"text-red-10":v.row.quantity>0?"text-green-10":"")},[h(U,{name:v.row.quantity<0?"arrow_downward":v.row.quantity>0?"arrow_upward":""},null,8,["name"]),N(" "+P(m(ae)(v.row.quantity)),1)],2)],64)):Q("",!0)]),_:2},1032,["props"]),h(J,{key:"type",props:v},{default:b(()=>[N(P(c.$CONSTANTS.STOCKMOVEMENT_REFTYPES[v.row.ref_type]),1)]),_:2},1032,["props"]),h(J,{key:"quantity",props:v},{default:b(()=>[x("div",{class:Ze(v.row.quantity<0?"text-red-10":v.row.quantity>0?"text-green-10":"")},[h(U,{name:v.row.quantity<0?"arrow_downward":v.row.quantity>0?"arrow_upward":""},null,8,["name"]),N(" "+P(m(ae)(v.row.quantity)),1)],2)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},uV=Object.freeze(Object.defineProperty({__proto__:null,default:sV},Symbol.toStringTag,{value:"Module"})),dV={class:"q-gutter-sm"},cV={class:"col col-md-6 q-pa-xs"},fV={style:{"margin-left":"-10px"}},pV={style:{"margin-left":"-10px"}},vV={__name:"Editor",setup(r){const t=Ue(),e=(t.props.data.id?"Edit":"Tambah")+" Akun / Kas",a=wt({id:t.props.data.id,name:t.props.data.name,type:t.props.data.type,bank:t.props.data.bank,number:t.props.data.number,holder:t.props.data.holder,balance:t.props.data.balance,active:!!t.props.data.active,has_wallet_access:!!t.props.data.has_wallet_access,notes:t.props.data.notes}),n=Et(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),i=()=>Mt({form:a,url:route("admin.finance-account.save")});return(o,l)=>{const s=ee("i-head"),u=ee("authenticated-layout");return $(),X(se,null,[h(s,{title:e}),h(u,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",dV,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:l[0]||(l[0]=d=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",cV,[h(Dt,{class:"row",onSubmit:ue(i,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":l[1]||(l[1]=d=>m(a).id=d)},null,512),[[ba,m(a).id]]),h(fe,{autofocus:"",modelValue:m(a).name,"onUpdate:modelValue":l[2]||(l[2]=d=>m(a).name=d),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!m(a).errors.name,disable:m(a).processing,"error-message":m(a).errors.name,rules:[d=>d&&d.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),h(Ce,{modelValue:m(a).type,"onUpdate:modelValue":l[3]||(l[3]=d=>m(a).type=d),label:"Jenis Akun",options:m(n),"map-options":"","emit-value":"",error:!!m(a).errors.type,disable:m(a).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),m(a).type=="bank"?($(),X(se,{key:0},[h(fe,{modelValue:m(a).bank,"onUpdate:modelValue":l[4]||(l[4]=d=>m(a).bank=d),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!m(a).errors.bank,disable:m(a).processing,"error-message":m(a).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),h(fe,{modelValue:m(a).number,"onUpdate:modelValue":l[5]||(l[5]=d=>m(a).number=d),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!m(a).errors.number,disable:m(a).processing,"error-message":m(a).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),h(fe,{modelValue:m(a).holder,"onUpdate:modelValue":l[6]||(l[6]=d=>m(a).holder=d),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!m(a).errors.holder,disable:m(a).processing,"error-message":m(a).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):Q("",!0),h(mt,{modelValue:m(a).balance,"onUpdate:modelValue":l[7]||(l[7]=d=>m(a).balance=d),label:"Saldo",lazyRules:"",disable:m(a).processing,"allow-negative":"true",error:!!m(a).errors.balance,errorMessage:m(a).errors.balance,rules:[]},null,8,["modelValue","disable","error","errorMessage"]),x("div",fV,[h(Xn,{class:"full-width q-pl-none",modelValue:m(a).has_wallet_access,"onUpdate:modelValue":l[8]||(l[8]=d=>m(a).has_wallet_access=d),disable:m(a).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),x("div",pV,[h(Xn,{class:"full-width q-pl-none",modelValue:m(a).active,"onUpdate:modelValue":l[9]||(l[9]=d=>m(a).active=d),disable:m(a).processing,label:"Aktif"},null,8,["modelValue","disable"])]),h(fe,{modelValue:m(a).notes,"onUpdate:modelValue":l[10]||(l[10]=d=>m(a).notes=d),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:m(a).processing,error:!!m(a).errors.notes,"error-message":m(a).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:m(a).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(a).processing,onClick:l[11]||(l[11]=d=>m(oe).get(o.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},gV=Object.freeze(Object.defineProperty({__proto__:null,default:vV},Symbol.toStringTag,{value:"Module"})),hV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},mV={class:"q-pa-xs"},yV={class:"q-my-sm text-subtitle"},bV={class:"text-bold text-grey-8"},_V={class:"full-width row flex-center text-grey-8 q-gutter-sm"},SV={key:2},wV={key:3},xV={key:4},TV={class:"flex justify-end"},ag="Akun Kas",CV={__name:"Index",setup(r){const t=Ue(),e=at(),a=B(!1),n=B([]),i=B(null),o=B(null),l=Qt(o,104),s=B(!0),u=xt({search:"",status:"active",type:"all",...Pt()}),d=t.props.totalBalance,c=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),f=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],p=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],g=[{value:"all",label:"Semua"},...Et(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];Je(()=>{y()});const v=T=>oa({message:`Hapus Akun ${T.name}?`,url:route("admin.finance-account.delete",T.id),fetchItemsCallback:y,loading:s}),y=(T=null)=>{Lt({pagination:c,filter:u,props:T,rows:n,url:route("admin.finance-account.data"),loading:s,tableRef:i})},_=()=>y(),S=T=>oe.get(route("admin.finance-account.detail",{id:T.id})),w=ve(()=>e.screen.gt.sm?f:f.filter(T=>T.name==="name"||T.name==="action"));return(T,C)=>{const k=ee("i-head"),A=ee("authenticated-layout");return $(),X(se,null,[h(k,{title:ag}),h(A,null,Jt({title:b(()=>[N(P(ag))]),"right-button":b(()=>[h(Y,{icon:a.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:C[0]||(C[0]=I=>a.value=!a.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:C[1]||(C[1]=I=>m(oe).get(T.route("admin.finance-account.add")))})]),default:b(()=>[x("div",mV,[x("div",yV,[C[7]||(C[7]=N(" Total Saldo Akun Aktif: ")),x("span",bV,"Rp. "+P(m(ae)(m(d))),1)]),h(it,{ref_key:"tableRef",ref:i,class:"full-height-table",style:ea({height:m(l)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":C[6]||(C[6]=I=>c.value=I),filter:u.search,loading:s.value,columns:w.value,rows:n.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:I,message:M,filter:D})=>[x("div",_V,[x("span",null,P(M)+" "+P(D?" with term "+D:""),1)])]),body:b(I=>[h(tt,{props:I,class:Ze([I.row.active?"":"bg-red-1","cursor-pointer"]),onClick:M=>S(I.row)},{default:b(()=>[h(J,{key:"name",props:I,class:"wrap-column"},{default:b(()=>[m(e).screen.lt.md?($(),K(ta,{key:1,icon:"wallet",text:I.row.name},null,8,["text"])):($(),X(se,{key:0},[N(P(I.row.name),1)],64)),I.row.type=="bank"?($(),X("div",SV,P(I.row.bank??"-")+" "+P(I.row.number??"-")+" an "+P(I.row.holder??"-"),1)):Q("",!0),I.row.notes?($(),X("div",wV,[h(U,{name:"notes"}),N(" "+P(I.row.notes),1)])):Q("",!0),m(e).screen.lt.md?($(),X("div",xV,[h(U,{name:"money"}),N(" Rp. "+P(m(ae)(I.row.balance)),1)])):Q("",!0)]),_:2},1032,["props"]),h(J,{key:"balance",props:I},{default:b(()=>[N(P(m(ae)(I.row.balance)),1)]),_:2},1032,["props"]),h(J,{key:"action",props:I},{default:b(()=>[x("div",TV,[h(Y,{disabled:!m(_a)(T.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:C[5]||(C[5]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{clickable:"",onClick:ue(M=>m(oe).get(T.route("admin.finance-account.duplicate",I.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"file_copy"})]),_:1}),h(j,{icon:"copy"},{default:b(()=>C[8]||(C[8]=[N(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{clickable:"",onClick:ue(M=>m(oe).get(T.route("admin.finance-account.edit",I.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"edit"})]),_:1}),h(j,{icon:"edit"},{default:b(()=>C[9]||(C[9]=[N("Edit")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{onClick:ue(M=>v(I.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>C[10]||(C[10]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[a.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:b(()=>[x("div",hV,[h(Ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[C[2]||(C[2]=I=>u.status=I),_],options:p,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),h(Ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:u.type,"onUpdate:modelValue":[C[3]||(C[3]=I=>u.type=I),_],options:g,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":C[4]||(C[4]=I=>u.search=I),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},kV=Object.freeze(Object.defineProperty({__proto__:null,default:CV},Symbol.toStringTag,{value:"Module"})),AV={class:"q-gutter-sm"},IV={class:"col col-md-6 q-pa-xs"},DV={__name:"Editor",setup(r){const t=Ue(),e=(t.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",a=t.props.accounts.map(l=>({label:l.name,value:l.id})),n=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],i=wt({id:t.props.data.id,account_id:t.props.data.account_id,to_account_id:t.props.data.to_account_id??null,type:t.props.data.type,datetime:Mb(t.props.data.datetime?t.props.data.datetime:new Date),notes:t.props.data.notes,amount:parseFloat(t.props.data.amount)}),o=()=>Mt({form:i,url:route("admin.finance-transaction.save")});return(l,s)=>{const u=ee("i-head"),d=ee("authenticated-layout");return $(),X(se,null,[h(u,{title:e}),h(d,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",AV,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=c=>l.$inertia.get(l.route("admin.finance-transaction.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",IV,[h(Dt,{class:"row",onSubmit:ue(o,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":s[1]||(s[1]=c=>m(i).id=c)},null,512),[[ba,m(i).id]]),h(Sn,{modelValue:m(i).datetime,"onUpdate:modelValue":s[2]||(s[2]=c=>m(i).datetime=c),label:"Waktu",error:!!m(i).errors.datetime,disable:m(i).processing,errorMessage:m(i).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),h(Ce,{autofocus:"",modelValue:m(i).type,"onUpdate:modelValue":s[3]||(s[3]=c=>m(i).type=c),label:"Jenis Transaksi",options:n,"map-options":"","emit-value":"",error:!!m(i).errors.type,disable:m(i).processing,errorMessage:m(i).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),h(Ce,{class:"custom-select",modelValue:m(i).account_id,"onUpdate:modelValue":s[4]||(s[4]=c=>m(i).account_id=c),label:m(i).type=="transfer"?"Akun Asal":"Akun",options:m(a),"map-options":"","emit-value":"",errorMessage:m(i).errors.account_id,error:!!m(i).errors.account_id,disable:m(i).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),m(i).type=="transfer"?($(),K(Ce,{key:0,class:"custom-select",modelValue:m(i).to_account_id,"onUpdate:modelValue":s[5]||(s[5]=c=>m(i).to_account_id=c),label:"Akun Tujuan",options:m(a),"map-options":"","emit-value":"",errorMessage:m(i).errors.to_account_id,error:!!m(i).errors.to_account_id,disable:m(i).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):Q("",!0),h(mt,{modelValue:m(i).amount,"onUpdate:modelValue":s[6]||(s[6]=c=>m(i).amount=c),label:"Jumlah",lazyRules:"",disable:m(i).processing,error:!!m(i).errors.amount,errorMessage:m(i).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),h(fe,{modelValue:m(i).notes,"onUpdate:modelValue":s[7]||(s[7]=c=>m(i).notes=c),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:m(i).processing,error:!!m(i).errors.notes,"error-message":m(i).errors.notes,rules:[c=>c&&c.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:m(i).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(i).processing,onClick:s[8]||(s[8]=c=>m(oe).get(l.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},MV=Object.freeze(Object.defineProperty({__proto__:null,default:DV},Symbol.toStringTag,{value:"Module"})),PV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},LV={class:"q-pa-xs"},VV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},RV={class:"text-grey-8"},EV={key:0},NV={key:0},OV={key:1},$V={class:"flex justify-end"},rg="Transaksi Kas",zV={__name:"Index",setup(r){const t=at(),e=B(!1),a=B([]),n=B(!0),i=B(null),o=B(null),l=Qt(o),s=Vo(),u=Ro(),d=[{label:"Semua Tahun",value:"all"},{label:`${s}`,value:s},...bn(s-2,s-1).reverse()],c=[{value:"all",label:"Semua Bulan"},..._n()],f=xt({search:"",category_id:"all",year:s,month:u,...Pt()}),p=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"action",align:"right"}];Je(()=>{y()});const v=w=>oa({message:`Hapus transaksi #-${w.id}?`,url:route("admin.finance-transaction.delete",w.id),fetchItemsCallback:y,loading:n}),y=(w=null)=>{Lt({pagination:p,filter:f,props:w,rows:a,url:route("admin.finance-transaction.data"),loading:n,tableRef:i})},_=()=>{y()},S=ve(()=>t.screen.gt.sm?g:g.filter(w=>w.name==="datetime"||w.name==="action"));return ot(()=>f.year,w=>{w===null&&(f.month=null)}),(w,T)=>{const C=ee("i-head"),k=ee("authenticated-layout");return $(),X(se,null,[h(C,{title:rg}),h(k,null,Jt({title:b(()=>[N(P(rg))]),"right-button":b(()=>[h(Y,{icon:e.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=A=>e.value=!e.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:T[1]||(T[1]=A=>m(oe).get(w.route("admin.finance-transaction.add")))})]),default:b(()=>[x("div",LV,[h(it,{ref_key:"tableRef",ref:i,style:ea({height:m(l)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:p.value,"onUpdate:pagination":T[6]||(T[6]=A=>p.value=A),filter:f.search,loading:n.value,columns:S.value,rows:a.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:A,message:I,filter:M})=>[x("div",VV,[x("span",null,P(I)+" "+P(M?" with term "+M:""),1)])]),body:b(A=>[h(tt,{props:A},{default:b(()=>[h(J,{key:"datetime",props:A,class:"wrap-column"},{default:b(()=>[x("div",null,[N(" #"+P(A.row.id)+" - ",1),h(U,{name:"calendar_today"}),N(" "+P(m(sa)(A.row.datetime))+" ",1),x("span",RV,"("+P(m(wr)(A.row.datetime))+")",1)]),h(Jo,null,{default:b(()=>[h(U,{name:"category"}),N(" "+P(A.row.type_label),1)]),_:2},1024),A.row.ref_type?($(),X("div",EV,[h(U,{name:"link"}),N(" "+P(A.row.ref_type_label)+" #"+P(A.row.ref_id),1)])):Q("",!0),m(t).screen.gt.sm?Q("",!0):($(),X(se,{key:1},[A.row.notes?($(),X("div",NV,[h(U,{name:"notes"}),N(" "+P(A.row.notes),1)])):Q("",!0),A.row.category?($(),X("div",OV,[h(U,{name:"category"}),N(" "+P(A.row.category.name),1)])):Q("",!0),x("div",null,[h(U,{name:"money"}),N(" Rp. "+P(m(tr)(A.row.amount)+m(ae)(A.row.amount)),1)])],64))]),_:2},1032,["props"]),h(J,{key:"account",props:A},{default:b(()=>{var I;return[N(P((I=A.row.account)==null?void 0:I.name),1)]}),_:2},1032,["props"]),h(J,{key:"notes",props:A},{default:b(()=>[N(P(A.row.notes),1)]),_:2},1032,["props"]),h(J,{key:"amount",props:A,style:{"text-align":"right"}},{default:b(()=>[N(P(m(tr)(A.row.amount)+m(ae)(A.row.amount)),1)]),_:2},1032,["props"]),h(J,{key:"action",props:A},{default:b(()=>[x("div",$V,[h(Y,{disabled:!m(_a)(w.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:T[5]||(T[5]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{onClick:ue(I=>v(A.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>T[7]||(T[7]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[e.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:b(()=>[x("div",PV,[h(Ce,{modelValue:f.year,"onUpdate:modelValue":[T[2]||(T[2]=A=>f.year=A),_],options:d,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),f.year!="all"?($(),K(Ce,{key:0,modelValue:f.month,"onUpdate:modelValue":[T[3]||(T[3]=A=>f.month=A),_],options:c,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:f.year===null},null,8,["modelValue","disable"])):Q("",!0),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":T[4]||(T[4]=A=>f.search=A),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},BV=Object.freeze(Object.defineProperty({__proto__:null,default:zV},Symbol.toStringTag,{value:"Module"})),qV={class:"q-gutter-sm"},GV={class:"col col-md-6 q-pa-xs"},FV={__name:"Editor",setup(r){const t=Ue(),e=(t.props.data.id?"Edit":"Tambah")+" Kategori Operasional",a=wt({id:t.props.data.id,name:t.props.data.name,description:t.props.data.description}),n=()=>Mt({form:a,url:route("admin.operational-cost-category.save")});return(i,o)=>{const l=ee("i-head"),s=ee("authenticated-layout");return $(),X(se,null,[h(l,{title:e}),h(s,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",qV,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=u=>i.$inertia.get(i.route("admin.operational-cost-category.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",GV,[h(Dt,{class:"row",onSubmit:ue(n,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":o[1]||(o[1]=u=>m(a).id=u)},null,512),[[ba,m(a).id]]),h(fe,{autofocus:"",modelValue:m(a).name,"onUpdate:modelValue":o[2]||(o[2]=u=>m(a).name=u),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!m(a).errors.name,disable:m(a).processing,"error-message":m(a).errors.name,rules:[u=>u&&u.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),h(fe,{modelValue:m(a).description,"onUpdate:modelValue":o[3]||(o[3]=u=>m(a).description=u),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:m(a).processing,error:!!m(a).errors.description,"error-message":m(a).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:m(a).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(a).processing,onClick:o[4]||(o[4]=u=>m(oe).get(i.route("admin.operational-cost-category.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},UV=Object.freeze(Object.defineProperty({__proto__:null,default:FV},Symbol.toStringTag,{value:"Module"})),HV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},WV={class:"q-pa-xs"},YV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},jV={key:0,class:"text-grey-8"},ZV={class:"flex justify-end"},ng="Kategori Biaya Operasional",XV={__name:"Index",setup(r){const t=at(),e=B(!1),a=B([]),n=B(!0),i=B(null),o=B(null),l=Qt(o),s=xt({search:"",...Pt()}),u=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),d=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];Je(()=>{f()});const c=g=>oa({message:`Hapus Kategori Biaya ${g.name}?`,url:route("admin.operational-cost-category.delete",g.id),fetchItemsCallback:f,loading:n}),f=(g=null)=>{Lt({pagination:u,filter:s,props:g,rows:a,url:route("admin.operational-cost-category.data"),loading:n,tableRef:i})},p=ve(()=>t.screen.gt.sm?d:d.filter(g=>g.name==="name"||g.name==="action"));return(g,v)=>{const y=ee("i-head"),_=ee("authenticated-layout");return $(),X(se,null,[h(y,{title:ng}),h(_,null,Jt({title:b(()=>[N(P(ng))]),"right-button":b(()=>[h(Y,{icon:e.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:v[0]||(v[0]=S=>e.value=!e.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:v[1]||(v[1]=S=>m(oe).get(g.route("admin.operational-cost-category.add")))})]),default:b(()=>[x("div",WV,[h(it,{ref_key:"tableRef",ref:i,class:"full-height-table",style:ea({height:m(l)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":v[4]||(v[4]=S=>u.value=S),filter:s.search,loading:n.value,columns:p.value,rows:a.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:S,message:w,filter:T})=>[x("div",YV,[x("span",null,P(w)+" "+P(T?" with term "+T:""),1)])]),body:b(S=>[h(tt,{props:S},{default:b(()=>[h(J,{key:"name",props:S,class:"wrap-column"},{default:b(()=>[N(P(S.row.name)+" ",1),m(t).screen.gt.sm?Q("",!0):($(),X(se,{key:0},[S.row.description?($(),X("div",jV,[h(U,{name:"description"}),N(" "+P(S.row.description),1)])):Q("",!0)],64))]),_:2},1032,["props"]),h(J,{key:"description",props:S,class:"wrap-column"},{default:b(()=>[N(P(S.row.description),1)]),_:2},1032,["props"]),h(J,{key:"action",props:S},{default:b(()=>[x("div",ZV,[h(Y,{disabled:!m(_a)(g.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:v[3]||(v[3]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{clickable:"",onClick:ue(w=>m(oe).get(g.route("admin.operational-cost-category.duplicate",S.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"file_copy"})]),_:1}),h(j,{icon:"copy"},{default:b(()=>v[5]||(v[5]=[N("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{clickable:"",onClick:ue(w=>m(oe).get(g.route("admin.operational-cost-category.edit",S.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"edit"})]),_:1}),h(j,{icon:"edit"},{default:b(()=>v[6]||(v[6]=[N("Edit")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{onClick:ue(w=>c(S.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>v[7]||(v[7]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[e.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:b(()=>[x("div",HV,[h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:s.search,"onUpdate:modelValue":v[2]||(v[2]=S=>s.search=S),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},KV=Object.freeze(Object.defineProperty({__proto__:null,default:XV},Symbol.toStringTag,{value:"Module"})),QV={class:"q-gutter-sm"},JV={class:"q-gutter-sm"},eR={class:"col col-md-6 q-pa-xs"},tR={class:"row"},aR={class:"detail"},rR={key:1,class:"text-grey-9"},nR={class:"detail"},ig="Rincian Teknisi",iR={__name:"Detail",setup(r){const t=Ue();return(e,a)=>{const n=ee("i-head"),i=ee("i-link"),o=ee("authenticated-layout");return $(),X(se,null,[h(n,{title:ig}),h(o,null,{title:b(()=>[N(P(ig))]),"left-button":b(()=>[x("div",QV,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:a[0]||(a[0]=l=>e.$inertia.get(e.route("admin.operational-cost.index")))})])]),"right-button":b(()=>[x("div",JV,[h(Y,{icon:"edit",dense:"",color:"primary",onClick:a[1]||(a[1]=l=>m(oe).get(e.route("admin.operational-cost.edit",{id:m(t).props.data.id})))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",eR,[x("div",tR,[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,null,{default:b(()=>[a[12]||(a[12]=x("div",{class:"text-subtitle1 text-bold text-grey-8"}," Profil Teknisi ",-1)),x("table",aR,[x("tbody",null,[x("tr",null,[a[2]||(a[2]=x("td",{style:{width:"125px"}},"Akun Pengguna",-1)),a[3]||(a[3]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,[m(t).props.data.user?($(),K(i,{key:0,href:e.route("admin.user.detail",{id:m(t).props.data.user.id})},{default:b(()=>[N(P(m(t).props.data.user.username),1)]),_:1},8,["href"])):($(),X("span",rR,"Tidak terhubung"))])]),x("tr",null,[a[4]||(a[4]=x("td",null,"Nama Teknisi",-1)),a[5]||(a[5]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.name),1)]),x("tr",null,[a[6]||(a[6]=x("td",null,"No. Telepon",-1)),a[7]||(a[7]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.phone),1)]),x("tr",null,[a[8]||(a[8]=x("td",null,"Email",-1)),a[9]||(a[9]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.email),1)]),x("tr",null,[a[10]||(a[10]=x("td",null,"Alamat",-1)),a[11]||(a[11]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.address),1)])])])]),_:1}),h(me,null,{default:b(()=>a[13]||(a[13]=[x("div",{class:"text-subtitle1 text-bold text-grey-8"}," Statistik Servis ",-1),x("table",{class:"detail"},[x("tbody",null,[x("tr",null,[x("td",{style:{width:"125px"}},"Servis Ditangani"),x("td",{style:{width:"1px"}},":"),x("td",null,"0")]),x("tr",null,[x("td",null,"Servis Sukses"),x("td",null,":"),x("td",null,"0")]),x("tr",null,[x("td",null,"Servis Gagal"),x("td",null,":"),x("td",null,"0")])])],-1)])),_:1}),h(me,null,{default:b(()=>[a[18]||(a[18]=x("div",{class:"text-subtitle1 text-bold text-grey-8"}," Informasi Ekstra ",-1)),x("table",nR,[x("tbody",null,[x("tr",null,[a[14]||(a[14]=x("td",{style:{width:"125px"}},"Dibuat",-1)),a[15]||(a[15]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,P(e.$dayjs(new Date(m(t).props.data.created_at)).format("DD MMMM YY HH:mm:ss")),1)]),x("tr",null,[a[16]||(a[16]=x("td",null,"Diperbarui",-1)),a[17]||(a[17]=x("td",null,":",-1)),x("td",null,P(e.$dayjs(new Date(m(t).props.data.updated_at)).format("DD MMMM YY HH:mm:ss")),1)])])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},oR=Object.freeze(Object.defineProperty({__proto__:null,default:iR},Symbol.toStringTag,{value:"Module"})),lR={class:"row items-center justify-end"},sR={__name:"DatePicker",props:{modelValue:{type:String,required:!0},label:{type:String,default:""},readonly:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},rules:{type:Array,default:[]},mask:{type:String,default:"####-##-##"}},emits:["update:modelValue"],setup(r,{emit:t}){const e=r,a=t,n=B("");ot(()=>e.modelValue,l=>{const[s,u]=l.split(" ");n.value=s||""});const i=B(e.modelValue),o=()=>{let l="";n.value&&(l=`${n.value} 00:00`),a("update:modelValue",l),i.value=l};return(l,s)=>($(),K(fe,{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=u=>i.value=u),label:e.label,readonly:e.readonly,disable:e.disable,error:e.error,rules:[...e.rules],"error-message":r.errorMessage,mask:e.mask},{append:b(()=>[h(U,{name:"event",class:"cursor-pointer"},{default:b(()=>[h(Pb,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(Lb,{modelValue:n.value,"onUpdate:modelValue":[s[0]||(s[0]=u=>n.value=u),o],mask:"YYYY-MM-DD"},{default:b(()=>[x("div",lR,[ie(h(Y,{label:"Close",color:"primary",flat:""},null,512),[[Ae]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label","readonly","disable","error","rules","error-message","mask"]))}},uR=Nr(sR,[["__scopeId","data-v-af4e8707"]]);function Wy(r,t=!1){const e=r.map(o=>({value:o.id,label:o.name})),a=t?[{value:"all",label:"Semua"},...e]:e,n=B([...a]);return{filteredCostCategories:n,filterCostCategory:(o,l)=>{const s=o.toLowerCase();l(()=>{n.value=a.filter(u=>u.label.toLowerCase().includes(s))})},costCategoryOptions:a}}const dR={class:"q-gutter-sm"},cR={class:"col col-md-6 q-pa-xs"},fR={__name:"Editor",setup(r){const t=Ue(),e=(t.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:a}=Wy(t.props.categories),n=B(a),i=B([...n.value]),o=wt({id:t.props.data.id,category_id:t.props.data.category_id,date:t.props.data.date,description:t.props.data.description,notes:t.props.data.notes,amount:parseFloat(t.props.data.amount)}),l=()=>Mt({form:o,url:route("admin.operational-cost.save")}),s=(u,d)=>{d(()=>{i.value=n.value.filter(c=>c.label.toLowerCase().includes(u.toLowerCase()))})};return(u,d)=>{const c=ee("i-head"),f=ee("authenticated-layout");return $(),X(se,null,[h(c,{title:e}),h(f,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",dR,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=p=>u.$inertia.get(u.route("admin.operational-cost.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",cR,[h(Dt,{class:"row",onSubmit:ue(l,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":d[1]||(d[1]=p=>m(o).id=p)},null,512),[[ba,m(o).id]]),h(Ce,{autofocus:"",modelValue:m(o).category_id,"onUpdate:modelValue":d[2]||(d[2]=p=>m(o).category_id=p),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:i.value,"map-options":"","emit-value":"",onFilter:s,error:!!m(o).errors.category_id,disable:m(o).processing,"hide-bottom-space":""},{"no-option":b(()=>[h(pe,null,{default:b(()=>[h(j,null,{default:b(()=>d[8]||(d[8]=[N("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),h(uR,{modelValue:m(o).date,"onUpdate:modelValue":d[3]||(d[3]=p=>m(o).date=p),label:"Tanggal",error:!!m(o).errors.date,disable:m(o).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),h(fe,{modelValue:m(o).description,"onUpdate:modelValue":d[4]||(d[4]=p=>m(o).description=p),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!m(o).errors.description,disable:m(o).processing,"error-message":m(o).errors.description,rules:[p=>p&&p.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),h(mt,{modelValue:m(o).amount,"onUpdate:modelValue":d[5]||(d[5]=p=>m(o).amount=p),label:"Jumlah",lazyRules:"",disable:m(o).processing,error:!!m(o).errors.amount,errorMessage:m(o).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),h(fe,{modelValue:m(o).notes,"onUpdate:modelValue":d[6]||(d[6]=p=>m(o).notes=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:m(o).processing,error:!!m(o).errors.notes,"error-message":m(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:m(o).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(o).processing,onClick:d[7]||(d[7]=p=>m(oe).get(u.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},pR=Object.freeze(Object.defineProperty({__proto__:null,default:fR},Symbol.toStringTag,{value:"Module"})),vR={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},gR={class:"q-pa-xs"},hR={class:"full-width row flex-center text-grey-8 q-gutter-sm"},mR={class:"flex items-center q-gutter-xs"},yR={key:0},bR={key:0},_R={class:"flex justify-end"},og="Biaya Operasional",SR={__name:"Index",setup(r){const t=Ue(),e=at(),a=B(!1),n=B(null),i=B(null),o=Qt(i),l=B([]),s=B(!0),u=new Date().getFullYear(),d=new Date().getMonth()+1,c=[{label:"Semua Tahun",value:null},{label:`${u}`,value:u},...bn(u-2,u-1).reverse()],f=[{value:null,label:"Semua Bulan"},..._n()],{costCategoryOptions:p}=Wy(t.props.categories),g=[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...p],v=xt({search:"",category_id:"all",year:u,month:d,...Pt()}),y=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"date",descending:!0}),_=[{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"action",align:"right"}];Je(()=>{w()});const S=k=>oa({message:`Hapus Biaya ${k.description}?`,url:route("admin.operational-cost.delete",k.id),fetchItemsCallback:w,loading:s}),w=(k=null)=>{Lt({pagination:y,filter:v,props:k,rows:l,url:route("admin.operational-cost.data"),loading:s,tableRef:n})},T=()=>{w()},C=ve(()=>e.screen.gt.sm?_:_.filter(k=>k.name==="date"||k.name==="action"));return ot(()=>v.year,k=>{k===null&&(v.month=null)}),(k,A)=>{const I=ee("i-head"),M=ee("authenticated-layout");return $(),X(se,null,[h(I,{title:og}),h(M,null,Jt({title:b(()=>[N(P(og))]),"right-button":b(()=>[h(Y,{icon:a.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=D=>a.value=!a.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:A[1]||(A[1]=D=>m(oe).get(k.route("admin.operational-cost.add")))})]),default:b(()=>[x("div",gR,[h(it,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:y.value,"onUpdate:pagination":A[7]||(A[7]=D=>y.value=D),filter:v.search,loading:s.value,columns:C.value,rows:l.value,"rows-per-page-options":[10,25,50],style:ea({height:m(o)}),onRequest:w,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:D,message:L,filter:E})=>[x("div",hR,[x("span",null,P(L)+" "+P(E?" with term "+E:""),1)])]),body:b(D=>[h(tt,{props:D},{default:b(()=>[h(J,{key:"date",props:D,class:"wrap-column"},{default:b(()=>[x("div",mR,[h(U,{name:"calendar_today"}),x("div",null,P(m(Ir)(D.row.date).format("DD/MM/YYYY")),1)]),m(e).screen.gt.sm?Q("",!0):($(),X(se,{key:0},[h(ta,{icon:"notes",text:D.row.notes},null,8,["text"]),D.row.category?($(),X("div",yR,[h(U,{name:"category"}),N(" "+P(D.row.category.name),1)])):Q("",!0),x("div",null,[h(U,{name:"paid"}),N(" Rp. "+P(m(ae)(D.row.amount)),1)])],64))]),_:2},1032,["props"]),h(J,{key:"description",props:D},{default:b(()=>[N(P(D.row.description)+" ",1),D.row.category?($(),X("div",bR,[h(U,{name:"category"}),N(" "+P(D.row.category.name),1)])):Q("",!0)]),_:2},1032,["props"]),h(J,{key:"amount",props:D,style:{"text-align":"right"}},{default:b(()=>[N(P(m(ae)(D.row.amount)),1)]),_:2},1032,["props"]),h(J,{key:"action",props:D},{default:b(()=>[x("div",_R,[h(Y,{disabled:!m(_a)(k.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:A[6]||(A[6]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{clickable:"",onClick:ue(L=>m(oe).get(k.route("admin.operational-cost.duplicate",D.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"file_copy"})]),_:1}),h(j,{icon:"copy"},{default:b(()=>A[8]||(A[8]=[N(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{clickable:"",onClick:ue(L=>m(oe).get(k.route("admin.operational-cost.edit",D.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"edit"})]),_:1}),h(j,{icon:"edit"},{default:b(()=>A[9]||(A[9]=[N("Edit")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{onClick:ue(L=>S(D.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>A[10]||(A[10]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[a.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:i},{default:b(()=>[x("div",vR,[h(Ce,{modelValue:v.year,"onUpdate:modelValue":[A[2]||(A[2]=D=>v.year=D),T],options:c,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h(Ce,{modelValue:v.month,"onUpdate:modelValue":[A[3]||(A[3]=D=>v.month=D),T],options:f,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:v.year===null},null,8,["modelValue","disable"]),h(Ce,{modelValue:v.category_id,"onUpdate:modelValue":[A[4]||(A[4]=D=>v.category_id=D),T],options:g,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:v.search,"onUpdate:modelValue":A[5]||(A[5]=D=>v.search=D),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},wR=Object.freeze(Object.defineProperty({__proto__:null,default:SR},Symbol.toStringTag,{value:"Module"})),xR={class:"q-gutter-sm"},TR={class:"col col-md-6 q-pa-sm"},CR={__name:"Editor",setup(r){const t=Ue(),e=(t.props.data.id?"Edit":"Tambah")+" Kategori Produk",a=wt({id:t.props.data.id,name:t.props.data.name,description:t.props.data.description}),n=()=>Mt({form:a,url:route("admin.product-category.save")});return(i,o)=>{const l=ee("i-head"),s=ee("authenticated-layout");return $(),X(se,null,[h(l,{title:e}),h(s,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",xR,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=u=>i.$inertia.get(i.route("admin.product-category.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",TR,[h(Dt,{class:"row",onSubmit:ue(n,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":o[1]||(o[1]=u=>m(a).id=u)},null,512),[[ba,m(a).id]]),h(fe,{autofocus:"",modelValue:m(a).name,"onUpdate:modelValue":o[2]||(o[2]=u=>m(a).name=u),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!m(a).errors.name,disable:m(a).processing,"error-message":m(a).errors.name,rules:[u=>u&&u.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),h(fe,{modelValue:m(a).description,"onUpdate:modelValue":o[3]||(o[3]=u=>m(a).description=u),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:m(a).processing,error:!!m(a).errors.description,"error-message":m(a).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:m(a).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(a).processing,onClick:o[4]||(o[4]=u=>m(oe).get(i.route("admin.product-category.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},kR=Object.freeze(Object.defineProperty({__proto__:null,default:CR},Symbol.toStringTag,{value:"Module"})),AR={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},IR={class:"q-pa-xs"},DR={class:"full-width row flex-center text-grey-8 q-gutter-sm"},MR={key:0,class:"text-grey-8"},PR={class:"flex justify-end"},lg="Kategori Produk",LR={__name:"Index",setup(r){const t=at(),e=B(!1),a=B([]),n=B(!0),i=B(null),o=B(null),l=Qt(o),s=xt({search:"",...Pt()}),u=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),d=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];Je(()=>{f()});const c=g=>oa({message:`Hapus Kategori ${g.name}?`,url:route("admin.product-category.delete",g.id),fetchItemsCallback:f,loading:n}),f=(g=null)=>{Lt({pagination:u,filter:s,props:g,rows:a,url:route("admin.product-category.data"),loading:n,tableRef:i})},p=ve(()=>t.screen.gt.sm?d:d.filter(g=>g.name==="name"||g.name==="action"));return(g,v)=>{const y=ee("i-head"),_=ee("authenticated-layout");return $(),X(se,null,[h(y,{title:lg}),h(_,null,Jt({title:b(()=>[N(P(lg))]),"right-button":b(()=>[h(Y,{icon:e.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:v[0]||(v[0]=S=>e.value=!e.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:v[1]||(v[1]=S=>m(oe).get(g.route("admin.product-category.add")))})]),default:b(()=>[x("div",IR,[h(it,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":v[4]||(v[4]=S=>u.value=S),filter:s.search,loading:n.value,columns:p.value,rows:a.value,"rows-per-page-options":[10,25,50],style:ea({height:m(l)}),onRequest:f,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:S,message:w,filter:T})=>[x("div",DR,[x("span",null,P(w)+" "+P(T?" with term "+T:""),1)])]),body:b(S=>[h(tt,{props:S},{default:b(()=>[h(J,{key:"name",props:S,class:"wrap-column"},{default:b(()=>[N(P(S.row.name)+" ",1),m(t).screen.gt.sm?Q("",!0):($(),X(se,{key:0},[S.row.description?($(),X("div",MR,[h(U,{name:"description"}),N(" "+P(S.row.description),1)])):Q("",!0)],64))]),_:2},1032,["props"]),h(J,{key:"description",props:S,class:"wrap-column"},{default:b(()=>[N(P(S.row.description),1)]),_:2},1032,["props"]),h(J,{key:"action",props:S},{default:b(()=>[x("div",PR,[h(Y,{disabled:!m(_a)(g.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:v[3]||(v[3]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{clickable:"",onClick:ue(w=>m(oe).get(g.route("admin.product-category.duplicate",S.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"file_copy"})]),_:1}),h(j,{icon:"copy"},{default:b(()=>v[5]||(v[5]=[N("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{clickable:"",onClick:ue(w=>m(oe).get(g.route("admin.product-category.edit",S.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"edit"})]),_:1}),h(j,{icon:"edit"},{default:b(()=>v[6]||(v[6]=[N("Edit")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{onClick:ue(w=>c(S.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>v[7]||(v[7]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[e.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:b(()=>[x("div",AR,[h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:s.search,"onUpdate:modelValue":v[2]||(v[2]=S=>s.search=S),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},VR=Object.freeze(Object.defineProperty({__proto__:null,default:LR},Symbol.toStringTag,{value:"Module"})),RR={class:"q-gutter-sm"},ER={class:"q-gutter-sm"},NR={class:"row justify-center"},OR={class:"col col-md-6 q-pa-xs"},$R={class:"row"},zR={class:"detail"},BR={key:0},qR={key:1},GR={class:"detail"},FR={class:"detail"},UR={key:0},HR={key:1},WR={class:"detail"},YR={class:"full-width row flex-center text-grey-8 q-gutter-sm"},jR={class:"flex q-gutter-sm"},ZR={class:""},XR={__name:"Detail",setup(r){const t=Ue(),e=`Rincian Produk #${t.props.data.id}`,a=B("main"),n=B([]),i=B(!0),o=xt({...Pt()}),l=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),s=[{name:"id",label:"#",field:"id",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!0},{name:"quantity",label:"Jumlah",field:"quantity",align:"center",sortable:!0}];Je(()=>{u()});const u=(f=null)=>Lt({pagination:l,filter:o,props:f,rows:n,url:route("admin.stock-movement.data",{product_id:t.props.data.id}),loading:i}),d=at(),c=ve(()=>d.screen.gt.sm?s:s.filter(f=>f.name==="id"));return(f,p)=>{const g=ee("i-head"),v=ee("i-link"),y=ee("authenticated-layout");return $(),X(se,null,[h(g,{title:e}),h(y,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",RR,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=_=>f.$inertia.get(f.route("admin.product.index")))})])]),"right-button":b(()=>[x("div",ER,[h(Y,{icon:"edit",dense:"",color:"primary",onClick:p[1]||(p[1]=_=>m(oe).get(f.route("admin.product.edit",{id:m(t).props.data.id})))})])]),default:b(()=>[x("div",NR,[x("div",OR,[x("div",$R,[h(Me,{square:"",flat:"",bordered:"",class:"q-card col"},{default:b(()=>[h(Nu,{modelValue:a.value,"onUpdate:modelValue":p[2]||(p[2]=_=>a.value=_),align:"left"},{default:b(()=>[h(vn,{name:"main",label:"Info Utama"}),h(vn,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),h(Ou,{modelValue:a.value,"onUpdate:modelValue":p[4]||(p[4]=_=>a.value=_)},{default:b(()=>[h(gn,{name:"main"},{default:b(()=>[p[45]||(p[45]=x("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Produk ",-1)),x("table",zR,[x("tbody",null,[x("tr",null,[p[5]||(p[5]=x("td",{style:{width:"120px"}},"ID",-1)),p[6]||(p[6]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,"# "+P(m(t).props.data.id),1)]),x("tr",null,[p[7]||(p[7]=x("td",null,"Nama Produk",-1)),p[8]||(p[8]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.name),1)]),x("tr",null,[p[9]||(p[9]=x("td",null,"Barcode",-1)),p[10]||(p[10]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.barcode),1)]),x("tr",null,[p[11]||(p[11]=x("td",null,"Jenis Produk",-1)),p[12]||(p[12]=x("td",null,":",-1)),x("td",null,P(f.$CONSTANTS.PRODUCT_TYPES[m(t).props.data.type]),1)]),x("tr",null,[p[13]||(p[13]=x("td",null,"Kategori",-1)),p[14]||(p[14]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.category?m(t).props.data.category.name:"--Tidak memiliki kategori--"),1)]),x("tr",null,[p[15]||(p[15]=x("td",null,"Supplier",-1)),p[16]||(p[16]=x("td",null,":",-1)),x("td",null,[m(t).props.data.supplier?($(),K(v,{key:0,href:f.route("admin.supplier.detail",{id:m(t).props.data.supplier.id})},{default:b(()=>[N(P("#"+m(t).props.data.supplier.id+" - "+m(t).props.data.supplier.name),1)]),_:1},8,["href"])):($(),X(se,{key:1},[N(P("--Tidak memiliki supplier--"))],64))])]),x("tr",null,[p[17]||(p[17]=x("td",null,"Status",-1)),p[18]||(p[18]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.active?"Aktif":"Tidak Aktif"),1)]),m(t).props.data.created_at?($(),X("tr",BR,[p[20]||(p[20]=x("td",null,"Dibuat Oleh",-1)),p[21]||(p[21]=x("td",null,":",-1)),x("td",null,[m(t).props.data.creator?($(),X(se,{key:0},[h(v,{href:f.route("admin.user.detail",{id:m(t).props.data.creator})},{default:b(()=>[N(P(m(t).props.data.creator.username),1)]),_:1},8,["href"]),p[19]||(p[19]=N(" - "))],64)):Q("",!0),N(" "+P(m(sa)(m(t).props.data.created_at)),1)])])):Q("",!0),m(t).props.data.updater?($(),X("tr",qR,[p[23]||(p[23]=x("td",null,"Diperbarui oleh",-1)),p[24]||(p[24]=x("td",null,":",-1)),x("td",null,[m(t).props.data.updater?($(),X(se,{key:0},[h(v,{href:f.route("admin.user.detail",{id:m(t).props.data.updater})},{default:b(()=>[N(P(m(t).props.data.updater.username),1)]),_:1},8,["href"]),p[22]||(p[22]=N(" - "))],64)):Q("",!0),N(" "+P(m(sa)(m(t).props.data.updated_at)),1)])])):Q("",!0)])]),p[46]||(p[46]=x("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),x("table",GR,[x("tbody",null,[x("tr",null,[p[25]||(p[25]=x("td",{style:{width:"120px"}},"Stok",-1)),p[26]||(p[26]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,P(m(ae)(m(t).props.data.stock))+" "+P(m(t).props.data.uom),1)]),x("tr",null,[p[27]||(p[27]=x("td",null,"Stok Minimum",-1)),p[28]||(p[28]=x("td",null,":",-1)),x("td",null,P(m(ae)(m(t).props.data.min_stock))+" "+P(m(t).props.data.uom),1)]),x("tr",null,[p[29]||(p[29]=x("td",null,"Stok Maksimum",-1)),p[30]||(p[30]=x("td",null,":",-1)),x("td",null,P(m(ae)(m(t).props.data.max_stock))+" "+P(m(t).props.data.uom),1)]),x("tr",null,[p[31]||(p[31]=x("td",null,"Barcode",-1)),p[32]||(p[32]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.barcode),1)])])]),p[47]||(p[47]=x("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Harga ",-1)),x("table",FR,[x("tbody",null,[x("tr",null,[p[33]||(p[33]=x("td",null,"Opsi Harga",-1)),p[34]||(p[34]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),f.$page.props.auth.user.role==f.$CONSTANTS.USER_ROLE_ADMIN?($(),X("tr",UR,[p[35]||(p[35]=x("td",{style:{width:"120px"}},"Harga Beli",-1)),p[36]||(p[36]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,"Rp. "+P(m(ae)(m(t).props.data.cost)),1)])):Q("",!0),x("tr",null,[p[37]||(p[37]=x("td",null,"Harga Jual",-1)),p[38]||(p[38]=x("td",null,":",-1)),x("td",null,"Rp. "+P(m(ae)(m(t).props.data.price)),1)]),f.$page.props.auth.user.role==f.$CONSTANTS.USER_ROLE_ADMIN?($(),X("tr",HR,[p[39]||(p[39]=x("td",null,"Margin",-1)),p[40]||(p[40]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.price>0?m(ae)((m(t).props.data.price-m(t).props.data.cost)/m(t).props.data.price*100,2):0)+" % ",1)])):Q("",!0)])]),p[48]||(p[48]=x("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),x("table",WR,[x("tbody",null,[x("tr",null,[p[41]||(p[41]=x("td",{style:{width:"120px"}},"Deskirpsi",-1)),p[42]||(p[42]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,P(m(t).props.data.description),1)]),x("tr",null,[p[43]||(p[43]=x("td",null,"Catatan",-1)),p[44]||(p[44]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.notes),1)])])])]),_:1}),h(gn,{name:"history"},{default:b(()=>[h(it,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:l.value,"onUpdate:pagination":p[3]||(p[3]=_=>l.value=_),filter:o.search,loading:i.value,columns:c.value,rows:n.value,"rows-per-page-options":[10,25,50],onRequest:u,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:_,message:S,filter:w})=>[x("div",YR,[x("span",null,P(S)+" "+P(w?" with term "+w:""),1)])]),body:b(_=>[h(tt,{props:_},{default:b(()=>[h(J,{key:"id",props:_},{default:b(()=>[x("div",jR,[x("div",null,[x("b",null,"#"+P(_.row.id),1)]),x("div",null," - "+P(f.$dayjs(new Date(_.row.created_at)).format("DD/MM/YYYY hh:mm:ss")),1),x("div",null," - "+P(_.row.created_by?_.row.created_by.username:"--"),1)]),m(d).screen.lt.md?($(),X(se,{key:0},[x("div",ZR,P(f.$CONSTANTS.STOCKMOVEMENT_REFTYPES[_.row.ref_type]),1),x("div",{class:Ze(_.row.quantity<0?"text-red-10":_.row.quantity>0?"text-green-10":"")},[h(U,{name:_.row.quantity<0?"arrow_downward":_.row.quantity>0?"arrow_upward":""},null,8,["name"]),N(" "+P(m(ae)(_.row.quantity)),1)],2)],64)):Q("",!0)]),_:2},1032,["props"]),h(J,{key:"type",props:_},{default:b(()=>[N(P(f.$CONSTANTS.STOCKMOVEMENT_REFTYPES[_.row.ref_type]),1)]),_:2},1032,["props"]),h(J,{key:"quantity",props:_},{default:b(()=>[x("div",{class:Ze(_.row.quantity<0?"text-red-10":_.row.quantity>0?"text-green-10":"")},[h(U,{name:_.row.quantity<0?"arrow_downward":_.row.quantity>0?"arrow_upward":""},null,8,["name"]),N(" "+P(m(ae)(_.row.quantity)),1)],2)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},KR=Object.freeze(Object.defineProperty({__proto__:null,default:XR},Symbol.toStringTag,{value:"Module"}));function Yy(r,t=!1){const e=r.map(o=>({value:o.id,label:o.name})),a=t?[{value:"all",label:"Semua"},...e]:e,n=B([...a]);return{filteredCategories:n,filterCategories:(o,l)=>{const s=o.toLowerCase();l(()=>{n.value=a.filter(u=>u.label.toLowerCase().includes(s))})},categories:a}}function Vd(r,t=!1){const e=r.map(o=>({value:o.id,label:"#"+o.id+" - "+o.name})),a=t?[{value:"all",label:"Semua"},...e]:e,n=B([...a]);return{filteredSuppliers:n,filterSupplierFn:(o,l)=>{l(()=>{n.value=a.filter(s=>s.label.toLowerCase().includes(o.toLowerCase()))})},suppliers:a}}const QR={style:{"margin-left":"-10px"}},bu={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r){return(t,e)=>($(),X("div",QR,[h(Xn,{class:"full-width q-pl-none","model-value":r.modelValue,"onUpdate:modelValue":e[0]||(e[0]=a=>t.$emit("update:modelValue",a)),disable:r.disable,label:r.label},null,8,["model-value","disable","label"])]))}},JR={class:"q-gutter-sm"},eE={class:"col col-md-6 q-pa-xs"},tE={__name:"Editor",setup(r){const t=Ue(),e=(t.props.data.id?"Edit":"Tambah")+" Produk",a=Et(window.CONSTANTS.PRODUCT_TYPES),n=wt({id:t.props.data.id,category_id:t.props.data.category_id,supplier_id:t.props.data.supplier_id,type:t.props.data.type,name:t.props.data.name,barcode:t.props.data.barcode,description:t.props.data.description,stock:parseFloat(t.props.data.stock),min_stock:parseFloat(t.props.data.min_stock),max_stock:parseFloat(t.props.data.max_stock),uom:t.props.data.uom,cost:parseFloat(t.props.data.cost),price:parseFloat(t.props.data.price),active:!!t.props.data.active,price_editable:!!t.props.data.price_editable,notes:t.props.data.notes}),i=()=>Mt({form:n,url:route("admin.product.save")}),{filteredCategories:o,filterCategories:l}=Yy(t.props.categories),{filteredSuppliers:s,filterSuppliers:u}=Vd(t.props.suppliers),d=ve(()=>n.price>0?(n.price-n.cost)/n.price*100:0);return(c,f)=>{const p=ee("i-head"),g=ee("authenticated-layout");return $(),X(se,null,[h(p,{title:e}),h(g,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",JR,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=v=>c.$inertia.get(c.route("admin.product.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",eE,[h(Dt,{class:"row",onSubmit:ue(i,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=v=>m(n).id=v)},null,512),[[ba,m(n).id]]),f[21]||(f[21]=x("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),h(Ce,{autofocus:"",modelValue:m(n).type,"onUpdate:modelValue":f[2]||(f[2]=v=>m(n).type=v),class:"custom-select",options:m(a),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["modelValue","options"]),h(fe,{modelValue:m(n).name,"onUpdate:modelValue":f[3]||(f[3]=v=>m(n).name=v),modelModifiers:{trim:!0},label:"Nama Produk","lazy-rules":"",error:!!m(n).errors.name,disable:m(n).processing,"error-message":m(n).errors.name,rules:[v=>v&&v.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),h(fe,{modelValue:m(n).description,"onUpdate:modelValue":f[4]||(f[4]=v=>m(n).description=v),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:m(n).processing,error:!!m(n).errors.description,"error-message":m(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),h(Ce,{modelValue:m(n).category_id,"onUpdate:modelValue":f[5]||(f[5]=v=>m(n).category_id=v),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:m(o),"map-options":"","emit-value":"",onFilter:m(l),"option-label":"label","option-value":"value",error:!!m(n).errors.category_id,disable:m(n).processing,"hide-bottom-space":""},{"no-option":b(()=>[h(pe,null,{default:b(()=>[h(j,null,{default:b(()=>f[19]||(f[19]=[N("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),h(Ce,{modelValue:m(n).supplier_id,"onUpdate:modelValue":f[6]||(f[6]=v=>m(n).supplier_id=v),label:"Supplier","use-input":"","input-debounce":"300",clearable:"",options:m(s),"map-options":"","emit-value":"",onFilter:m(u),"option-label":"label","option-value":"value",error:!!m(n).errors.supplier_id,disable:m(n).processing,"hide-bottom-space":""},{"no-option":b(()=>[h(pe,null,{default:b(()=>[h(j,null,{default:b(()=>f[20]||(f[20]=[N("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),h(bu,{modelValue:m(n).active,"onUpdate:modelValue":f[7]||(f[7]=v=>m(n).active=v),disable:m(n).processing,label:"Aktif"},null,8,["modelValue","disable"]),f[22]||(f[22]=x("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),h(fe,{modelValue:m(n).barcode,"onUpdate:modelValue":f[8]||(f[8]=v=>m(n).barcode=v),modelModifiers:{trim:!0},label:"Barcode","lazy-rules":"",error:!!m(n).errors.barcode,disable:m(n).processing,"error-message":m(n).errors.barcode,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),h(fe,{modelValue:m(n).uom,"onUpdate:modelValue":f[9]||(f[9]=v=>m(n).uom=v),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!m(n).errors.uom,disable:m(n).processing,"error-message":m(n).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),h(mt,{modelValue:m(n).stock,"onUpdate:modelValue":f[10]||(f[10]=v=>m(n).stock=v),label:"Stok",lazyRules:"",disable:m(n).processing,error:!!m(n).errors.stock,errorMessage:m(n).errors.stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),h(mt,{modelValue:m(n).min_stock,"onUpdate:modelValue":f[11]||(f[11]=v=>m(n).min_stock=v),label:"Stok Minimum",lazyRules:"",disable:m(n).processing,error:!!m(n).errors.min_stock,errorMessage:m(n).errors.min_stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),h(mt,{modelValue:m(n).max_stock,"onUpdate:modelValue":f[12]||(f[12]=v=>m(n).max_stock=v),label:"Stok Maksimum",lazyRules:"",disable:m(n).processing,error:!!m(n).errors.max_stock,errorMessage:m(n).errors.max_stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),f[23]||(f[23]=x("div",{class:"text-subtitle1 q-pt-lg"},"Info Harga",-1)),h(bu,{modelValue:m(n).price_editable,"onUpdate:modelValue":f[13]||(f[13]=v=>m(n).price_editable=v),disable:m(n).processing,label:"Harga bisa diubah saat penjualan"},null,8,["modelValue","disable"]),h(mt,{modelValue:m(n).cost,"onUpdate:modelValue":f[14]||(f[14]=v=>m(n).cost=v),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:m(n).processing,error:!!m(n).errors.cost,errorMessage:m(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),h(mt,{modelValue:m(n).price,"onUpdate:modelValue":f[15]||(f[15]=v=>m(n).price=v),label:"Harga Jual (Rp)",lazyRules:"",disable:m(n).processing,error:!!m(n).errors.max_stock,errorMessage:m(n).errors.price,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),h(mt,{modelValue:d.value,"onUpdate:modelValue":f[16]||(f[16]=v=>d.value=v),label:"Margin (%)",lazyRules:"",disable:m(n).processing,maxDecimals:2,"hide-bottom-space":""},null,8,["modelValue","disable"]),f[24]||(f[24]=x("div",{class:"text-subtitle1 q-pt-lg"},"Info Lainnya",-1)),h(fe,{modelValue:m(n).notes,"onUpdate:modelValue":f[17]||(f[17]=v=>m(n).notes=v),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:m(n).processing,error:!!m(n).errors.notes,"error-message":m(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:m(n).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(n).processing,onClick:f[18]||(f[18]=v=>m(oe).get(c.route("admin.product.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},aE=Object.freeze(Object.defineProperty({__proto__:null,default:tE},Symbol.toStringTag,{value:"Module"})),rE={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},nE={class:"q-pa-xs"},iE={class:"full-width row flex-center text-grey-8 q-gutter-sm"},oE={key:0,class:"text-grey-8"},lE={key:1,class:"text-grey-8"},sE={key:0},uE={key:1},dE={class:"flex justify-end"},sg="Produk",cE={__name:"Index",setup(r){const t=Ue(),e=B(null),a=B(null),n=Qt(a),i=B(!1),o=[{value:"all",label:"Semua"},...Et(window.CONSTANTS.PRODUCT_TYPES)],l=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],s=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],u=at(),d=B(!1),c=B([]),f=B(!0),p=xt({type:"all",category_id:"all",supplier_id:"all",status:"active",stock_status:"all",search:"",...Pt()}),g=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});let v=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price",label:"Harga",field:"price",align:"right"},{name:"action",align:"right"}];Je(()=>{const D=new URLSearchParams(window.location.search).get("page");D&&(g.value.page=parseInt(D)),_()});const y=M=>oa({message:`Hapus Produk ${M.name}?`,url:route("admin.product.delete",M.id),fetchItemsCallback:_,loading:f}),_=(M=null)=>{Lt({pagination:g,filter:p,props:M,rows:c,url:route("admin.product.data"),loading:f,tableRef:e})},S=()=>{_()},{filteredCategories:w,filterCategories:T}=Yy(t.props.categories,!0),{filteredSuppliers:C,filterSuppliers:k}=Vd(t.props.suppliers,!0),A=ve(()=>{let M=[...v];return i.value||M.splice(2,1),u.screen.gt.sm?M:M.filter(D=>D.name==="name"||D.name==="action")}),I=M=>{console.log(window.location.href),oe.get(route("admin.product.detail",M.row.id))};return(M,D)=>{const L=ee("i-head"),E=ee("authenticated-layout");return $(),X(se,null,[h(L,{title:sg}),h(E,null,Jt({title:b(()=>[N(P(sg))]),"right-button":b(()=>[M.$can("admin.product.add")?($(),K(Y,{key:0,class:"q-mr-sm",icon:i.value?"visibility":"visibility_off",label:"",dense:"",color:"grey",onClick:D[0]||(D[0]=R=>i.value=!i.value)},null,8,["icon"])):Q("",!0),h(Y,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[1]||(D[1]=R=>d.value=!d.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[2]||(D[2]=R=>m(oe).get(M.route("admin.product.add")))})]),default:b(()=>[x("div",nE,[h(it,{ref_key:"tableRef",ref:e,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:g.value,"onUpdate:pagination":D[10]||(D[10]=R=>g.value=R),filter:p.search,loading:f.value,columns:A.value,rows:c.value,"rows-per-page-options":[10,25,50],style:ea({height:m(n)}),onRequest:_,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:R,message:V,filter:z})=>[x("div",iE,[x("span",null,P(V)+" "+P(z?" with term "+z:""),1)])]),header:b(R=>[h(tt,{props:R},{default:b(()=>[h(po,{"auto-width":""}),($(!0),X(se,null,Cr(R.cols,V=>($(),K(po,{key:V.name,props:R},{default:b(()=>[N(P(V.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:b(R=>[h(tt,{props:R,class:Ze({inactive:!R.row.active})},{default:b(()=>[h(J,{"auto-width":""},{default:b(()=>[h(Y,{size:"xs",color:"grey",round:"",dense:"",onClick:ue(V=>R.expand=!R.expand,["prevent"]),icon:R.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),h(J,{key:"name",props:R,class:"wrap-column cursor-pointer",onClick:V=>I(R)},{default:b(()=>[N(P(R.row.name)+" ",1),R.row.category_id?($(),X("div",oE,[h(U,{name:"category"}),N(" "+P(R.row.category.name),1)])):Q("",!0),R.row.supplier_id?($(),X("div",lE,[h(U,{name:"local_shipping"}),N(" "+P(R.row.supplier.name),1)])):Q("",!0),m(u).screen.gt.sm?Q("",!0):($(),X(se,{key:2},[R.row.type=="stocked"?($(),X("div",sE,[h(U,{name:"cycle"}),N(" Stok: "+P(m(ae)(R.row.stock))+" "+P(R.row.uom),1)])):Q("",!0),i.value?($(),X("div",uE,[h(U,{name:"money"}),N(" Modal: Rp. "+P(m(ae)(R.row.cost)),1)])):Q("",!0),x("div",null,[h(U,{name:"sell"}),N(" Harga: Rp. "+P(m(ae)(R.row.price)),1)])],64))]),_:2},1032,["props","onClick"]),h(J,{key:"stock",props:R,class:Ze(["wrap-column",{"low-stock":R.row.type=="stocked"&&(Number(R.row.stock)==0||Number(R.row.stock)<Number(R.row.min_stock)),"over-stock":R.row.type=="stocked"&&Number(R.row.max_stock)&&Number(R.row.stock)>Number(R.row.max_stock)}])},{default:b(()=>[N(P(R.row.type=="stocked"?m(ae)(R.row.stock)+" "+R.row.uom:"-"),1)]),_:2},1032,["props","class"]),($(),K(J,{key:"cost",props:R,class:"wrap-column"},{default:b(()=>[N(P(m(ae)(R.row.cost)),1)]),_:2},1032,["props"])),h(J,{key:"price",props:R,class:"wrap-column"},{default:b(()=>[N(P(m(ae)(R.row.price)),1)]),_:2},1032,["props"]),h(J,{key:"action",props:R},{default:b(()=>[x("div",dE,[h(Y,{disabled:!m(_a)(M.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:D[9]||(D[9]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{clickable:"",onClick:ue(V=>m(oe).get(M.route("admin.product.duplicate",R.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"file_copy"})]),_:1}),h(j,{icon:"copy"},{default:b(()=>D[11]||(D[11]=[N("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{clickable:"",onClick:ue(V=>m(oe).get(M.route("admin.product.edit",R.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"edit"})]),_:1}),h(j,{icon:"edit"},{default:b(()=>D[12]||(D[12]=[N("Edit")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),M.$page.props.auth.user.role==M.$CONSTANTS.USER_ROLE_ADMIN?ie(($(),K(pe,{key:0,onClick:ue(V=>y(R.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>D[13]||(D[13]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]):Q("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props","class"]),ie(h(tt,{props:R},{default:b(()=>[h(J,{colspan:"100%"},{default:b(()=>[h(U,{name:"notes"}),N(" "+P(R.row.description),1)]),_:2},1024)]),_:2},1032,["props"]),[[hh,R.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:a},{default:b(()=>[x("div",rE,[h(Ce,{modelValue:p.type,"onUpdate:modelValue":[D[3]||(D[3]=R=>p.type=R),S],class:"custom-select col-xs-4 col-sm-2",options:o,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),h(Ce,{modelValue:p.status,"onUpdate:modelValue":[D[4]||(D[4]=R=>p.status=R),S],class:"custom-select col-xs-4 col-sm-2",options:l,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),h(Ce,{modelValue:p.stock_status,"onUpdate:modelValue":[D[5]||(D[5]=R=>p.stock_status=R),S],class:"custom-select col-xs-4 col-sm-2",options:s,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),h(Ce,{modelValue:p.category_id,"onUpdate:modelValue":[D[6]||(D[6]=R=>p.category_id=R),S],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:m(w),"map-options":"",dense:"","emit-value":"",onFilter:m(T),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),h(Ce,{modelValue:p.supplier_id,"onUpdate:modelValue":[D[7]||(D[7]=R=>p.supplier_id=R),S],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:m(C),"map-options":"",dense:"","emit-value":"",onFilter:m(k),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":D[8]||(D[8]=R=>p.search=R),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fE=Object.freeze(Object.defineProperty({__proto__:null,default:cE},Symbol.toStringTag,{value:"Module"})),jy={__name:"UpdatePasswordForm",setup(r){const t=B(!1),e=B(null),a=B(null),n=wt({current_password:"",password:"",password_confirmation:""}),i=()=>{n.clearErrors(),n.post(route("admin.profile.update-password"),{preserveScroll:!0,onSuccess:()=>n.reset(),onError:()=>{n.errors.password&&(n.reset("password","password_confirmation"),e.value.focus()),n.errors.current_password&&(n.reset("current_password"),a.value.focus())}})};return(o,l)=>($(),K(Dt,{class:"row",onSubmit:ue(i,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,null,{default:b(()=>[l[6]||(l[6]=x("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),l[7]||(l[7]=x("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),h(fe,{modelValue:m(n).current_password,"onUpdate:modelValue":l[1]||(l[1]=s=>m(n).current_password=s),type:t.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:m(n).processing,error:!!m(n).errors.current_password,"error-message":m(n).errors.current_password,rules:[s=>s&&s.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:b(()=>[h(Y,{dense:"",flat:"",round:"",onClick:l[0]||(l[0]=s=>t.value=!t.value)},{default:b(()=>[h(U,{name:t.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),h(fe,{modelValue:m(n).password,"onUpdate:modelValue":l[3]||(l[3]=s=>m(n).password=s),type:t.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:m(n).processing,error:!!m(n).errors.password,"error-message":m(n).errors.password,rules:[s=>s&&s.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:b(()=>[h(Y,{dense:"",flat:"",round:"",onClick:l[2]||(l[2]=s=>t.value=!t.value)},{default:b(()=>[h(U,{name:t.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),h(fe,{modelValue:m(n).password_confirmation,"onUpdate:modelValue":l[5]||(l[5]=s=>m(n).password_confirmation=s),type:t.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:m(n).processing,error:!!m(n).errors.password_confirmation,"error-message":m(n).errors.password_confirmation,rules:[s=>s&&s.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:b(()=>[h(Y,{dense:"",flat:"",round:"",onClick:l[4]||(l[4]=s=>t.value=!t.value)},{default:b(()=>[h(U,{name:t.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),h(me,null,{default:b(()=>[h(Y,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:m(n).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},pE=Object.freeze(Object.defineProperty({__proto__:null,default:jy},Symbol.toStringTag,{value:"Module"})),Zy={__name:"UpdateProfileInformationForm",setup(r){const e=Ue().props.auth.user,a=wt({name:e.name,username:e.username,role:window.CONSTANTS.USER_ROLES[e.role]}),n=()=>Mt({form:a,url:route("admin.profile.update")});return(i,o)=>($(),K(Dt,{class:"row",onSubmit:ue(n,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,null,{default:b(()=>[o[3]||(o[3]=x("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),o[4]||(o[4]=x("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),h(fe,{modelValue:m(a).username,"onUpdate:modelValue":o[0]||(o[0]=l=>m(a).username=l),label:"ID Pengguna",disable:m(a).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),h(fe,{modelValue:m(a).name,"onUpdate:modelValue":o[1]||(o[1]=l=>m(a).name=l),modelModifiers:{trim:!0},label:"Nama",disable:m(a).processing,error:!!m(a).errors.name,"error-message":m(a).errors.name,rules:[l=>l&&l.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),h(fe,{modelValue:m(a).role,"onUpdate:modelValue":o[2]||(o[2]=l=>m(a).role=l),label:"Hak Akses",disable:m(a).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),h(me,null,{default:b(()=>[h(Y,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:m(a).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},vE=Object.freeze(Object.defineProperty({__proto__:null,default:Zy},Symbol.toStringTag,{value:"Module"})),gE={class:"q-pa-xs"},hE={class:"row justify-center"},mE={class:"col col-lg-6"},ug="Profil Saya",yE={__name:"Edit",setup(r){return(t,e)=>{const a=ee("i-head"),n=ee("authenticated-layout");return $(),X(se,null,[h(a,{title:ug}),h(n,null,{title:b(()=>[N(P(ug))]),default:b(()=>[x("div",gE,[x("div",hE,[x("div",mE,[h(Zy,{class:"q-mb-md"}),h(jy)])])])]),_:1})],64)}}},bE=Object.freeze(Object.defineProperty({__proto__:null,default:yE},Symbol.toStringTag,{value:"Module"}));function _E(){const r=B(new Date);let t=null;const e=()=>{r.value=new Date};return Je(()=>{t=setInterval(e,1e3)}),Qo(()=>{t&&clearInterval(t)}),{currentDateTime:r}}const SE={class:"text-grey-8"},Xy={__name:"DigitalClock",setup(r){const{currentDateTime:t}=_E();return(e,a)=>($(),X("div",SE,P(m(sa)(m(t))),1))}},wE={class:"row q-col-gutter-md items-center q-px-md q-py-sm"},xE={class:"col-12 col-sm-6 col-md-4"},TE={class:"text-bold"},CE={key:0,class:"col-12 col-md-4 text-center"},kE={class:"text-h6 text-weight-bold text-grey-8"},AE={key:0,class:"text-subtitle2 text-weight-bold text-grey-8"},IE={key:1,class:"text-subtitle2 text-weight-bold text-grey-8"},DE={class:"text-weight-bold"},Ky={__name:"TransactionHeader",props:{user:{type:Object,required:!0},company:{type:Object,required:!0}},emits:["edit-supplier"],setup(r){return(t,e)=>($(),X("div",wE,[x("div",xE,[x("div",TE,[e[1]||(e[1]=N(" Info Supplier ")),h(Y,{icon:"edit",flat:"",rounded:"",dense:"",color:"grey",size:"sm",onClick:e[0]||(e[0]=a=>t.$emit("edit-supplier"))})]),e[2]||(e[2]=x("div",{class:"text-grey-8 text-italic"},"Supplier belum dipilih.",-1))]),t.$q.screen.gt.sm?($(),X("div",CE,[x("div",kE,P(r.company.name),1),r.company.address?($(),X("div",AE,P(r.company.address),1)):Q("",!0),r.company.phone?($(),X("div",IE,P(r.company.phone),1)):Q("",!0)])):Q("",!0),x("div",{class:Ze(["col-12 col-sm-6 col-md-4",t.$q.screen.gt.sm?"text-right":""])},[x("div",DE,P(r.user.username)+" - "+P(r.user.name),1),h(Xy)],2)]))}},ME=Object.freeze(Object.defineProperty({__proto__:null,default:Ky},Symbol.toStringTag,{value:"Module"})),PE={class:"text-weight-medium"},LE={class:"text-caption text-grey-6"},VE={class:"text-weight-medium"},RE={class:"text-weight-bold text-primary"},Qy={__name:"ItemsListTable",props:{items:{type:Array,required:!0},columns:{type:Array,required:!0}},emits:["update-quantity","remove-item"],setup(r){return(t,e)=>($(),K(it,{dense:"",rows:r.items,columns:r.columns,"row-key":"id",flat:"",square:"",bordered:"",class:"bg-grey-1 pos-table q-pa-none col","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48},{header:b(a=>[h(tt,{props:a,class:"bg-grey-4"},{default:b(()=>[($(!0),X(se,null,Cr(a.cols,n=>($(),K(po,{key:n.name,props:a,class:"text-weight-bold text-grey-8"},{default:b(()=>[N(P(n.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:b(a=>[h(tt,{props:a,class:"hover-highlight"},{default:b(()=>[h(J,{key:"name",props:a,class:"text-left"},{default:b(()=>[x("div",PE,P(a.row.name),1),x("div",LE," Barcode: "+P(a.row.barcode),1)]),_:2},1032,["props"]),h(J,{key:"price",props:a,class:"text-center"},{default:b(()=>[x("div",VE,[h(mt,{"model-value":a.row.price,dense:"",style:{width:"80px","text-align":"right"}},null,8,["model-value"])])]),_:2},1032,["props"]),h(J,{key:"quantity",props:a,class:"text-center"},{default:b(()=>[h(mt,{"model-value":a.row.quantity,dense:"",style:{width:"80px","text-align":"right"},"onUpdate:modelValue":n=>t.$emit("update-quantity",{id:a.row.id,value:n}),onKeyup:e[0]||(e[0]=ri(n=>n.target.blur(),["enter"]))},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["props"]),h(J,{key:"subtotal",props:a,class:"text-center"},{default:b(()=>[x("div",RE," Rp. "+P(m(ae)(a.row.price*a.row.quantity)),1)]),_:2},1032,["props"]),h(J,{key:"action",props:a,class:"text-center"},{default:b(()=>[h(Y,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:n=>t.$emit("remove-item",a.row)},{default:b(()=>[h(Vb,null,{default:b(()=>e[1]||(e[1]=[N("Hapus Item")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]))}},EE=Object.freeze(Object.defineProperty({__proto__:null,default:Qy},Symbol.toStringTag,{value:"Module"})),NE={class:"column"},OE={class:"row justify-end items-center q-gutter-sm"},$E={class:"text-h4 text-weight-bold text-primary"},zE={class:"text-caption text-grey-6 q-mt-xs text-right"},BE={class:"q-py-sm"},qE={class:"q-py-sm"},Jy={__name:"TransactionSummary",props:{subtotal:{type:Number,required:!0},itemCount:{type:Number,required:!0},barcode:{type:String,required:!0},isProcessing:{type:Boolean,default:!1},formProcessing:{type:Boolean,default:!1}},emits:["update:barcode","add-item","process-payment"],setup(r,{expose:t}){const e=B(null);Je(()=>{a()});const a=()=>{ni(()=>{e.value&&e.value.focus()})};return t({focusOnBarcodeInput:a}),(n,i)=>($(),X("div",NE,[x("div",OE,[i[3]||(i[3]=x("span",{class:"text-weight-bold text-grey-8"},"GRAND TOTAL: Rp.",-1)),x("span",$E,P(m(ae)(r.subtotal)),1)]),x("div",zE,P(r.itemCount)+" item(s) ",1),x("div",BE,[h(fe,{ref_key:"barcodeInputRef",ref:e,"model-value":r.barcode,"onUpdate:modelValue":i[0]||(i[0]=o=>n.$emit("update:barcode",o)),placeholder:"<Input Barcode>",outlined:"",square:"",class:"col bg-white",onKeyup:i[1]||(i[1]=ri(o=>n.$emit("add-item"),["enter"])),loading:r.isProcessing,clearable:"",autofocus:""},{prepend:b(()=>[h(U,{name:"qr_code_scanner"})]),_:1},8,["model-value","loading"])]),x("div",qE,[h(Y,{class:"full-width",label:"Bayar",color:"primary",icon:"payment",onClick:i[2]||(i[2]=o=>n.$emit("process-payment")),disable:r.itemCount===0,loading:r.formProcessing},null,8,["disable","loading"])])]))}},GE=Object.freeze(Object.defineProperty({__proto__:null,default:Jy},Symbol.toStringTag,{value:"Module"})),FE={class:"q-ml-sm"},e0={__name:"ConfirmDeleteDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,default:null}},emits:["update:modelValue","confirm"],setup(r){return(t,e)=>($(),K(qr,{"model-value":r.modelValue,"onUpdate:modelValue":e[1]||(e[1]=a=>t.$emit("update:modelValue",a)),persistent:""},{default:b(()=>[h(Me,null,{default:b(()=>[h(me,{class:"row items-center"},{default:b(()=>{var a;return[h(nn,{icon:"delete",color:"negative","text-color":"white"}),x("span",FE,'Hapus item "'+P((a=r.item)==null?void 0:a.name)+'"?',1)]}),_:1}),h(Or,{align:"right"},{default:b(()=>[ie(h(Y,{flat:"",label:"Batal",color:"primary"},null,512),[[Ae]]),ie(h(Y,{flat:"",label:"Hapus",color:"negative",onClick:e[0]||(e[0]=a=>t.$emit("confirm"))},null,512),[[Ae]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},UE=Object.freeze(Object.defineProperty({__proto__:null,default:e0},Symbol.toStringTag,{value:"Module"})),t0={__name:"SupplierEditorDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","save"],setup(r,{emit:t}){const e=t,a=B(""),n=B(""),i=()=>{e("save",{name:a.value,address:n.value})};return(o,l)=>($(),K(qr,{"model-value":r.modelValue,"onUpdate:modelValue":l[2]||(l[2]=s=>o.$emit("update:modelValue",s)),persistent:""},{default:b(()=>[h(Me,{style:{width:"400px"}},{default:b(()=>[h(me,{class:"q-py-none q-pt-lg"},{default:b(()=>l[3]||(l[3]=[x("div",{class:"text-bold text-grey-8"},"Edit Info Supplier",-1)])),_:1}),h(me,null,{default:b(()=>[h(fe,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s),label:"Nama Supplier"},null,8,["modelValue"]),h(fe,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=s=>n.value=s),label:"Alamat",type:"textarea",autogrow:"",counter:"",maxlength:"200",class:"q-mt-md"},null,8,["modelValue"])]),_:1}),h(Or,{align:"right"},{default:b(()=>[ie(h(Y,{flat:"",label:"Batal",color:"primary"},null,512),[[Ae]]),ie(h(Y,{flat:"",label:"Simpan",color:"primary",onClick:i},null,512),[[Ae]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},HE=Object.freeze(Object.defineProperty({__proto__:null,default:t0},Symbol.toStringTag,{value:"Module"})),WE={class:"q-gutter-sm"},YE={class:"row col **grow**"},jE={class:"col-12 q-pa-sm column"},ZE={class:"row"},XE={class:"col-xs-12 col-md-8 q-pa-sm"},KE={class:"col-md-4 col-xs-12 q-pa-sm"},QE={__name:"Editor",setup(r){const t=at(),e=Ue(),a=B(null),n=wt({id:null,formatted_id:"Diisi Otomatis",customer_name:"Pelanggan Umum",datetime:Ir().format("YYYY-MM-DD HH:mm:ss"),status:"pending",payment_status:"unpaid",items:[],subtotal:0,tax:0,total:0,notes:""}),i=B(""),o=B(!1),l=B(!1),s=B(null),u=B(!1),d=[{name:"name",required:!0,label:"Item Information",align:"left",field:"name",sortable:!1,style:"width: 300px"},{name:"price",label:"Harga",align:"center",field:"price",sortable:!1,style:"width: 120px"},{name:"quantity",label:"Quantity",align:"center",field:"quantity",sortable:!1,style:"width: 100px"},{name:"subtotal",label:"SubTotal",align:"center",sortable:!1,style:"width: 140px"},{name:"action",label:"Action",align:"center",sortable:!1,style:"width: 80px"}],c=ve(()=>{const _=n.items.reduce((S,w)=>S+w.price*w.quantity,0);return n.subtotal=_,n.total=_+n.tax,_}),f=async()=>{if(!i.value.trim()){t.notify({message:"Silakan masukkan barcode",color:"warning",position:"bottom"});return}let _=1,S=i.value.trim(),w=null;const T=S.split("*");if(T.length===3){const k=parseInt(T[0]),A=parseFloat(T[2]);!isNaN(k)&&k>0?_=k:t.notify({message:"Kuantitas tidak valid. Menggunakan default 1.",color:"warning",position:"bottom"}),!isNaN(A)&&A>=0?w=A:t.notify({message:"Harga tidak valid. Menggunakan harga produk default.",color:"warning",position:"bottom"}),S=T[1]}else if(T.length===2){const k=parseInt(T[0]);!isNaN(k)&&k>0?_=k:t.notify({message:"Kuantitas tidak valid. Menggunakan default 1.",color:"warning",position:"bottom"}),S=T[1]}const C=n.items.findIndex(k=>k.barcode===S);if(C!==-1)n.items[C].quantity+=_,t.notify({message:`Quantity ${n.items[C].name} bertambah ${_}`,color:"positive",position:"bottom"});else{o.value=!0;try{await new Promise(I=>setTimeout(I,300));const A={...{id:Date.now(),name:`Item ${S}`,barcode:S,price:w!==null?w:Math.floor(Math.random()*5e4)+1e4},quantity:_};n.items.push(A),t.notify({message:`${A.name} berhasil ditambahkan`,color:"positive",position:"bottom",icon:"add_shopping_cart"})}catch(k){console.error("Error fetching item:",k),t.notify({message:"Item tidak ditemukan atau gagal menambahkan item",color:"negative",position:"bottom"})}finally{o.value=!1}}i.value="",await ni(),a.value.focusOnBarcodeInput()},p=_=>{s.value=_,l.value=!0},g=()=>{if(s.value){const _=n.items.findIndex(S=>S.id===s.value.id);if(_!==-1){const S=n.items.splice(_,1)[0];t.notify({message:`${S.name} dihapus dari keranjang`,color:"info",position:"bottom",icon:"remove_shopping_cart"})}s.value=null}},v=(_,S)=>{const w=n.items.find(T=>T.id===_);w&&S>0&&(w.quantity=parseInt(S)||1)},y=()=>{if(n.items.length===0){t.notify({message:"Tidak ada item dalam keranjang",color:"warning",position:"bottom"});return}n.datetime=Ir().format("YYYY-MM-DD HH:mm:ss"),n.status="completed",n.payment_status="paid",Mt({form:n,url:route("admin.transaction.save")})};return(_,S)=>{const w=ee("i-head"),T=ee("authenticated-layout");return $(),X(se,null,[h(w,{title:"Order Pembelian"}),h(T,null,{title:b(()=>S[8]||(S[8]=[N("Order Pembelian")])),"left-button":b(()=>[x("div",WE,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:S[0]||(S[0]=C=>m(oe).get(_.route("admin.purchase-order.index")))})])]),default:b(()=>[h(gt,{class:"bg-grey-2 q-pa-sm column fit"},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"full-width col column"},{default:b(()=>[h(Ky,{user:m(e).props.auth.user,company:m(e).props.company,onEditSupplier:S[1]||(S[1]=C=>u.value=!0)},null,8,["user","company"]),x("div",YE,[x("div",jE,[h(Qy,{items:m(n).items,columns:d,onUpdateQuantity:S[2]||(S[2]=({id:C,value:k})=>v(C,k)),onRemoveItem:p},null,8,["items"])])]),x("div",ZE,[x("div",XE,[h(fe,{modelValue:m(n).notes,"onUpdate:modelValue":S[3]||(S[3]=C=>m(n).notes=C),type:"textarea",placeholder:"Tambahkan catatan transaksi...",square:"",outlined:"",class:"bg-white",rows:3,counter:"",maxlength:"200",error:!!m(n).errors.notes,"error-message":m(n).errors.notes,style:{"margin-bottom":"16px"},"hide-bottom-space":""},{prepend:b(()=>[h(U,{name:"note"})]),_:1},8,["modelValue","error","error-message"])]),x("div",KE,[h(Jy,{ref_key:"transactionSummaryRef",ref:a,barcode:i.value,"onUpdate:barcode":S[4]||(S[4]=C=>i.value=C),subtotal:c.value,"item-count":m(n).items.length,"is-processing":o.value,"form-processing":m(n).processing,onAddItem:S[5]||(S[5]=C=>f(i.value)),onProcessPayment:y},null,8,["barcode","subtotal","item-count","is-processing","form-processing"])])])]),_:1}),h(e0,{modelValue:l.value,"onUpdate:modelValue":S[6]||(S[6]=C=>l.value=C),item:s.value,onConfirm:g},null,8,["modelValue","item"]),h(t0,{modelValue:u.value,"onUpdate:modelValue":S[7]||(S[7]=C=>u.value=C)},null,8,["modelValue"])]),_:1})]),_:1})],64)}}},JE=Nr(QE,[["__scopeId","data-v-4d8fff94"]]),eN=Object.freeze(Object.defineProperty({__proto__:null,default:JE},Symbol.toStringTag,{value:"Module"})),tN={class:"col col-md-6 q-pa-xs"},aN={__name:"Editor_v1",setup(r){const t=Ue(),e=(t.props.data.id?"Edit":"Tambah")+" Order Pembelian",{filteredSuppliers:a,filterSupplierFn:n}=Vd(t.props.suppliers,!1),i=Et(window.CONSTANTS.PURCHASE_ORDER_STATUSES),o=Et(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES),l=Et(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES),s=wt({id:t.props.data.id,formatted_id:t.props.data.formatted_id??"Diisi Otomatis",supplier_id:t.props.data.supplier_id,datetime:Ir(t.props.data.datetime).format("YYYY-MM-DD HH:mm:ss"),status:t.props.data.status,payment_status:t.props.data.payment_status,delivery_status:t.props.data.delivery_status,total:parseFloat(t.props.data.total),total_paid:parseFloat(t.props.data.total_paid),notes:t.props.data.notes}),u=()=>Mt({form:s,url:route("admin.purchase-order.save")});return(d,c)=>{const f=ee("i-head"),p=ee("authenticated-layout");return $(),X(se,null,[h(f,{title:e}),h(p,null,{title:b(()=>[N(P(e))]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",tN,[h(Dt,{class:"row",onSubmit:ue(u,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":c[0]||(c[0]=g=>m(s).id=g)},null,512),[[ba,m(s).id]]),h(fe,{modelValue:m(s).formatted_id,"onUpdate:modelValue":c[1]||(c[1]=g=>m(s).formatted_id=g),modelModifiers:{trim:!0},label:"ID Order",readonly:"","hide-bottom-space":""},null,8,["modelValue"]),h(Sn,{modelValue:m(s).datetime,"onUpdate:modelValue":c[2]||(c[2]=g=>m(s).datetime=g),label:"Waktu",error:!!m(s).errors.datetime,disable:m(s).processing},null,8,["modelValue","error","disable"]),h(Ce,{modelValue:m(s).status,"onUpdate:modelValue":c[3]||(c[3]=g=>m(s).status=g),label:"Status Order",options:m(i),"map-options":"","emit-value":"",error:!!m(s).errors.status,disable:m(s).processing,errorMessage:m(s).errors.status,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","errorMessage"]),h(Ce,{modelValue:m(s).payment_status,"onUpdate:modelValue":c[4]||(c[4]=g=>m(s).payment_status=g),label:"Status Pembayaran",options:m(o),"map-options":"","emit-value":"",error:!!m(s).errors.payment_status,disable:m(s).processing,errorMessage:m(s).errors.payment_status,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","errorMessage"]),h(Ce,{modelValue:m(s).delivery_status,"onUpdate:modelValue":c[5]||(c[5]=g=>m(s).delivery_status=g),label:"Status Pengiriman",options:m(l),"map-options":"","emit-value":"",error:!!m(s).errors.delivery_status,disable:m(s).processing,errorMessage:m(s).errors.delivery_status,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","errorMessage"]),h(Ce,{modelValue:m(s).supplier_id,"onUpdate:modelValue":c[6]||(c[6]=g=>m(s).supplier_id=g),label:"Pemasok","use-input":"","input-debounce":"300",clearable:"",options:m(a),"map-options":"","emit-value":"",errorMessage:m(s).errors.supplier_id,onFilter:m(n),error:!!m(s).errors.supplier_id,disable:m(s).processing,"hide-bottom-space":""},{"no-option":b(()=>[h(pe,null,{default:b(()=>[h(j,null,{default:b(()=>c[9]||(c[9]=[N("Pemasok tidak ditemukan.")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),h(Y,{dense:"",icon:"add",type:"button",color:"primary",disable:m(s).processing,label:"Pemasok Baru"},null,8,["disable"]),h(fe,{modelValue:m(s).notes,"onUpdate:modelValue":c[7]||(c[7]=g=>m(s).notes=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:m(s).processing,error:!!m(s).errors.notes,"error-message":m(s).errors.notes,rules:[g=>g&&g.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"create",type:"submit",label:"Buat Order",color:"primary",disable:m(s).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(s).processing,onClick:c[8]||(c[8]=g=>m(oe).get(d.route("admin.purchase-order.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},rN=Object.freeze(Object.defineProperty({__proto__:null,default:aN},Symbol.toStringTag,{value:"Module"})),nN={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},iN={class:"q-pa-xs"},oN={class:"full-width row flex-center text-grey-8 q-gutter-sm"},lN={key:0},sN={key:0},uN={key:1},dN={class:"flex justify-end"},dg="Order Pembelian",cN={__name:"Index",setup(r){const t=at(),e=B(!1),a=B([]),n=B(!0),i=B(null),o=B(null),l=Qt(o),s=Vo(),u=Ro(),d=[{label:"Semua Tahun",value:"all"},{label:`${s}`,value:s},...bn(s-2,s-1).reverse()],c=[{value:"all",label:"Semua Bulan"},..._n()],f=xt({search:"",category_id:"all",year:s,month:u,...Pt()}),p=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"action",align:"right"}];Je(()=>{y()});const v=w=>oa({message:`Hapus transaksi #-${w.id}?`,url:route("admin.purchase-order.delete",w.id),fetchItemsCallback:y,loading:n}),y=(w=null)=>{Lt({pagination:p,filter:f,props:w,rows:a,url:route("admin.purchase-order.data"),loading:n,tableRef:i})},_=()=>{y()},S=ve(()=>t.screen.gt.sm?g:g.filter(w=>w.name==="datetime"||w.name==="action"));return ot(()=>f.year,w=>{w===null&&(f.month=null)}),(w,T)=>{const C=ee("i-head"),k=ee("authenticated-layout");return $(),X(se,null,[h(C,{title:dg}),h(k,null,Jt({title:b(()=>[N(P(dg))]),"right-button":b(()=>[h(Y,{icon:e.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=A=>e.value=!e.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:T[1]||(T[1]=A=>m(oe).get(w.route("admin.purchase-order.add")))})]),default:b(()=>[x("div",iN,[h(it,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:p.value,"onUpdate:pagination":T[6]||(T[6]=A=>p.value=A),filter:f.search,loading:n.value,columns:S.value,rows:a.value,"rows-per-page-options":[10,25,50],style:ea({height:m(l)}),onRequest:y,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:A,message:I,filter:M})=>[x("div",oN,[x("span",null,P(I)+" "+P(M?" with term "+M:""),1)])]),body:b(A=>[h(tt,{props:A},{default:b(()=>[h(J,{key:"datetime",props:A,class:"wrap-column"},{default:b(()=>[x("div",null,[N(" #"+P(A.row.id)+" - ",1),h(U,{name:"calendar_today"}),N(" "+P(A.row.datetime),1)]),h(Jo,null,{default:b(()=>[h(U,{name:"category"}),N(" "+P(A.row.type_label),1)]),_:2},1024),A.row.ref_type?($(),X("div",lN,[h(U,{name:"link"}),N(" "+P(A.row.ref_type_label)+" #"+P(A.row.ref_id),1)])):Q("",!0),m(t).screen.gt.sm?Q("",!0):($(),X(se,{key:1},[A.row.notes?($(),X("div",sN,[h(U,{name:"notes"}),N(" "+P(A.row.notes),1)])):Q("",!0),A.row.category?($(),X("div",uN,[h(U,{name:"category"}),N(" "+P(A.row.category.name),1)])):Q("",!0),x("div",null,[h(U,{name:"money"}),N(" Rp. "+P(m(tr)(A.row.amount)+m(ae)(A.row.amount)),1)])],64))]),_:2},1032,["props"]),h(J,{key:"account",props:A},{default:b(()=>{var I;return[N(P((I=A.row.account)==null?void 0:I.name),1)]}),_:2},1032,["props"]),h(J,{key:"notes",props:A},{default:b(()=>[N(P(A.row.notes),1)]),_:2},1032,["props"]),h(J,{key:"amount",props:A,style:{"text-align":"right"}},{default:b(()=>[N(P(m(tr)(A.row.amount)+m(ae)(A.row.amount)),1)]),_:2},1032,["props"]),h(J,{key:"action",props:A},{default:b(()=>[x("div",dN,[h(Y,{disabled:!m(_a)(w.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:T[5]||(T[5]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{onClick:ue(I=>v(A.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>T[7]||(T[7]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[e.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:b(()=>[x("div",nN,[h(Ce,{modelValue:f.year,"onUpdate:modelValue":[T[2]||(T[2]=A=>f.year=A),_],options:d,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h(Ce,{modelValue:f.month,"onUpdate:modelValue":[T[3]||(T[3]=A=>f.month=A),_],options:c,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:f.year===null},null,8,["modelValue","disable"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":T[4]||(T[4]=A=>f.search=A),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fN=Object.freeze(Object.defineProperty({__proto__:null,default:cN},Symbol.toStringTag,{value:"Module"})),pN={class:"q-gutter-sm"},vN={__name:"Detail",setup(r){const a=`Rincian ${Ue().props.data.formatted_id}`;return(n,i)=>{const o=ee("i-head"),l=ee("authenticated-layout");return $(),X(se,null,[h(o,{title:a}),h(l,null,{title:b(()=>[N(P(a))]),"left-button":b(()=>[x("div",pN,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=s=>n.$inertia.get(n.route("admin.sales-order.index")))})])]),_:1})],64)}}},gN=Object.freeze(Object.defineProperty({__proto__:null,default:vN},Symbol.toStringTag,{value:"Module"})),hN={class:"text-weight-medium"},mN={class:"text-caption text-grey-6"},yN={class:"column items-end"},bN={class:"text-caption text-grey-6 text-italic"},a0={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(r){const t=at(),e=Qt(null,t.screen.lt.sm?395:310),a=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(n,i)=>($(),K(it,{dense:"",rows:r.items,columns:a,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,style:ea({height:m(e)})},{header:b(o=>[h(tt,{props:o,class:"bg-grey-4"},{default:b(()=>[($(!0),X(se,null,Cr(o.cols,l=>($(),K(po,{key:l.name,props:o,class:"text-weight-bold text-grey-8"},{default:b(()=>[N(P(l.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:b(o=>[h(tt,{props:o,class:"hover-highlight"},{default:b(()=>[h(J,{key:"name",props:o,class:"text-left"},{default:b(()=>[x("div",hN,P(o.row.product_name),1),x("div",mN,P(o.row.product_barcode),1),o.row.notes?($(),K(ta,{key:0,text:o.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):Q("",!0)]),_:2},1032,["props"]),h(J,{key:"subtotal_price",props:o,class:"text-right"},{default:b(()=>[x("div",yN,[x("div",null,P(m(ae)(o.row.subtotal_price)),1),x("div",bN,P(m(ae)(o.row.quantity))+" x Rp. "+P(m(ae)(o.row.price)),1)])]),_:2},1032,["props"]),h(J,{key:"action",props:o,class:"text-right",style:{width:"5%"}},{default:b(()=>[h(Y,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:l=>n.$emit("edit-item",o.row),disable:r.isProcessing},null,8,["onClick","disable"]),h(Y,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:l=>n.$emit("remove-item",o.row),disable:r.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},_N=Object.freeze(Object.defineProperty({__proto__:null,default:a0},Symbol.toStringTag,{value:"Module"})),SN={key:0,class:"text-center q-mb-md text-grey-8"},wN={class:"text-subtitle2 text-weight-medium"},xN={class:"text-h5 text-center text-primary q-pb-md"},TN={class:"row q-col-gutter-sm justify-center"},CN={class:"col-12"},kN={class:"col-12"},AN={class:"text-center"},IN={key:0,class:"text-h6 text-negative text-weight-bold"},DN={key:1,class:"text-h6 text-green-8 text-weight-bold"},MN={key:2,class:"text-h6 text-positive text-weight-bold"},r0={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(r,{emit:t}){const e=r,a=t,n=B(0),i=B(0),o=B(null),l=ve(()=>n.value+i.value),s=ve(()=>e.total-l.value),u=ve(()=>!e.customer||i.value===0?!0:i.value<=e.customer.balance),d=()=>{if(!u.value)return;const p=n.value+i.value,g=p>e.total?p-e.total:0;a("accepted",{total:e.total,cash_amount:n.value,wallet_amount:i.value,remaining_debt:s.value>0?s.value:0,change:g})},c=()=>{ni(()=>{o.value&&(o.value.focus(),o.value.select())})};ot(n,p=>{p>=e.total&&(i.value=0),f(i.value)}),ot(i,p=>{f(p)});const f=p=>{const g=e.total-n.value;g<0||p>g&&(i.value=g)};return(p,g)=>($(),K(qr,{"model-value":r.modelValue,"onUpdate:modelValue":g[3]||(g[3]=v=>p.$emit("update:modelValue",v)),onBeforeShow:c},{default:b(()=>[h(Me,{style:{"min-width":"350px"}},{default:b(()=>[h(me,null,{default:b(()=>g[4]||(g[4]=[x("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),h(me,{class:"q-pt-none"},{default:b(()=>[r.customer?($(),X("div",SN,[x("div",wN,[N(" Username: "+P(r.customer.username)+" ",1),g[5]||(g[5]=x("br",null,null,-1)),N(" Nama: "+P(r.customer.name),1),g[6]||(g[6]=x("br",null,null,-1)),N(" Saldo: Rp. "+P(m(ae)(r.customer.balance)),1)])])):Q("",!0),x("div",xN," Total: Rp. "+P(m(ae)(r.total)),1),x("div",TN,[x("div",CN,[h(mt,{modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=v=>n.value=v),label:"Jumlah Tunai",disable:r.form.processing,outlined:!0,ref_key:"cashInputRef",ref:o},null,8,["modelValue","disable"])]),x("div",kN,[h(mt,{modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=v=>i.value=v),label:"Jumlah Dompet Pelanggan",disable:n.value>=r.total||r.form.processing,outlined:!0,error:!u.value,"error-message":"Jumlah melebihi saldo dompet!"},null,8,["modelValue","disable","error"])])]),x("div",AN,[s.value>0?($(),X("div",IN," Sisa Tagihan: Rp. "+P(m(ae)(s.value)),1)):s.value<0?($(),X("div",DN," Kembalian: Rp. "+P(m(ae)(Math.abs(s.value))),1)):($(),X("div",MN," Tagihan Terbayar "))])]),_:1}),h(Or,{align:"center"},{default:b(()=>[h(Y,{flat:"",label:"Batal",color:"grey",onClick:g[2]||(g[2]=v=>p.$emit("update:modelValue",!1))}),s.value>0?($(),K(Y,{key:0,label:s.value>0?"Catat Utang":"Bayar",color:s.value>0?"red":"positive",onClick:d,disable:r.form.processing||!u.value||s.value>0&&l.value===0,loading:r.form.processing},null,8,["label","color","disable","loading"])):($(),K(Y,{key:1,label:"Bayar",color:"positive",onClick:d,disable:r.form.processing||!u.value,loading:r.form.processing},null,8,["disable","loading"]))]),_:1})]),_:1})]),_:1},8,["model-value"]))}},PN=Object.freeze(Object.defineProperty({__proto__:null,default:r0},Symbol.toStringTag,{value:"Module"})),LN={class:"row items-center no-wrap"},VN={class:"col-auto"},RN={class:"full-width row flex-center text-grey-8 q-gutter-sm"},EN={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","product-selected"],setup(r,{emit:t}){const e=r,a=t,n=B(null),i=B([]),o=B(!0),l=xt({search:"",status:"active",...Pt()}),s=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),u=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"price",label:"Harga",field:"price",align:"right"}],d=ve(()=>u);Je(()=>{c()});const c=()=>{e.modelValue!==!1&&f()},f=(v=null)=>{o.value=!0,Lt({pagination:s,filter:l,props:v,rows:i,url:route("admin.product.data"),loading:o,tableRef:n})},p=()=>{c()},g=v=>{a("product-selected",v),setTimeout(()=>{a("update:modelValue",!1)},100)};return ot(()=>e.modelValue,(v,y)=>{y===!0&&v===!1&&(l.search=""),v===!0&&f()}),(v,y)=>($(),K(qr,{"model-value":r.modelValue,"onUpdate:modelValue":y[3]||(y[3]=_=>v.$emit("update:modelValue",_)),maximized:v.$q.screen.lt.sm},{default:b(()=>[h(Me,{class:"column fit"},{default:b(()=>[h(me,{class:"q-py-sm"},{default:b(()=>[x("div",LN,[y[4]||(y[4]=x("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),x("div",VN,[h(Y,{flat:"",round:"",size:"sm",icon:"close",onClick:y[0]||(y[0]=_=>v.$emit("update:modelValue",!1))})])])]),_:1}),h(me,{class:Ze(["q-py-sm",v.$q.screen.lt.sm?"q-px-xs":""])},{default:b(()=>[h(fe,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:l.search,"onUpdate:modelValue":[y[1]||(y[1]=_=>l.search=_),p],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["class"]),h(me,{class:Ze(["q-py-xs col",v.$q.screen.lt.sm?"q-px-xs":""])},{default:b(()=>[h(it,{ref_key:"tableRef",ref:n,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:s.value,"onUpdate:pagination":y[2]||(y[2]=_=>s.value=_),filter:l.search,loading:o.value,columns:d.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","virtual-scroll":!0,"rows-per-page-label":null},{"no-data":b(({icon:_,message:S,filter:w})=>[x("div",RN,[x("span",null,P(S),1)])]),body:b(_=>[h(tt,{tabindex:"0",props:_,class:Ze([{inactive:!_.row.active},"cursor-pointer"]),onClick:S=>g(_.row),onKeydown:[ri(ue(S=>g(_.row),["prevent","stop"]),["enter"]),ri(ue(S=>g(_.row),["prevent"]),["space"])]},{default:b(()=>[h(J,{key:"name",props:_,class:"wrap-column"},{default:b(()=>[h(ta,{text:_.row.name},null,8,["text"]),_.row.description?($(),K(ta,{key:0,text:_.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):Q("",!0)]),_:2},1032,["props"]),h(J,{key:"stock",props:_,class:"wrap-column text-right"},{default:b(()=>[N(P(_.row.type=="stocked"?m(ae)(_.row.stock)+" "+_.row.uom:"-"),1)]),_:2},1032,["props"]),h(J,{key:"price",props:_,class:"wrap-column text-right"},{default:b(()=>[N(" Rp. "+P(m(ae)(_.row.price)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1})]),_:1},8,["model-value","maximized"]))}},NN={class:"row items-center no-wrap"},ON={class:"col-auto"},n0={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(r,{expose:t,emit:e}){const a=r,n=e,i=()=>{n("save")},o=ve(()=>a.item.quantity*a.item.price),l=d=>{d.stopPropagation(),d.preventDefault()},s=d=>{a.modelValue&&(d.key==="Enter"?(i(),l(d)):d.key==="Escape"&&(n("update:modelValue",!1),l(d)))};return Je(()=>{window.addEventListener("keydown",s)}),Qo(()=>{window.removeEventListener("keydown",s)}),t({getCurrentItem:()=>a.item}),(d,c)=>($(),K(qr,{"model-value":r.modelValue,"onUpdate:modelValue":c[6]||(c[6]=f=>d.$emit("update:modelValue",f))},{default:b(()=>[h(Me,null,{default:b(()=>[h(me,{class:"q-py-sm"},{default:b(()=>[x("div",NN,[c[7]||(c[7]=x("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),x("div",ON,[h(Y,{flat:"",size:"sm",round:"",icon:"close",onClick:c[0]||(c[0]=f=>d.$emit("update:modelValue",!1))})])])]),_:1}),h(me,{class:"q-py-sm"},{default:b(()=>[h(fe,{modelValue:r.item.product_name,"onUpdate:modelValue":c[1]||(c[1]=f=>r.item.product_name=f),label:"Produk","hide-bottom-space":"",readonly:"",disable:r.isProcessing},null,8,["modelValue","disable"]),h(mt,{modelValue:r.item.quantity,"onUpdate:modelValue":c[2]||(c[2]=f=>r.item.quantity=f),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:r.isProcessing},null,8,["modelValue","disable"]),h(mt,{modelValue:r.item.price,"onUpdate:modelValue":c[3]||(c[3]=f=>r.item.price=f),label:"Harga",readonly:!r.item.price_editable,"hide-bottom-space":"",disable:r.isProcessing},null,8,["modelValue","readonly","disable"]),h(mt,{modelValue:o.value,"onUpdate:modelValue":c[4]||(c[4]=f=>o.value=f),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),h(fe,{modelValue:r.item.notes,"onUpdate:modelValue":c[5]||(c[5]=f=>r.item.notes=f),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),h(Or,{align:"right"},{default:b(()=>[ie(h(Y,{flat:"",label:"Batal",color:"primary",disable:r.isProcessing},null,8,["disable"]),[[Ae]]),ie(h(Y,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:r.isProcessing},null,8,["disable"]),[[Ae]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$N=Object.freeze(Object.defineProperty({__proto__:null,default:n0},Symbol.toStringTag,{value:"Module"})),zN={key:0,class:"q-select__selected-item"},BN={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null}},emits:["update:modelValue","customerSelected"],setup(r,{expose:t,emit:e}){const a=B(null),n=r,i=e,o=B([]);let l=null;const s=B(n.modelValue);Je(()=>{n.initialData&&(s.value=n.initialData)}),ot(s,c=>{i("update:modelValue",c),i("customerSelected",c)}),ot(()=>n.modelValue,c=>{s.value=c}),t({focus:()=>{a.value&&a.value.focus()}});const d=(c,f)=>{if(c.length<n.minLength){f(()=>{o.value=[]});return}l&&clearTimeout(l),l=setTimeout(()=>{Sr.get(`/web-api/customers?q=${c}`).then(p=>{f(()=>{o.value=p.data.data})}).catch(p=>{console.error("Gagal mengambil data pelanggan:",p),f(()=>{o.value=[]})})},500)};return(c,f)=>($(),K(Ce,{class:Ze(r.class),ref_key:"qSelectRef",ref:a,modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=p=>s.value=p),"use-input":"","input-debounce":"0",label:r.label,options:o.value,onFilter:d,clearable:"",error:r.error,behavior:"menu","error-message":r.errorMessage,disable:r.disable,"hide-bottom-space":"",outlined:r.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:b(p=>[h(pe,Rb(Eb(p.itemProps)),{default:b(()=>[h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>[N(P(p.opt.name),1)]),_:2},1024),h(Le,{caption:""},{default:b(()=>[h(U,{name:"person",size:"14px"}),N(" "+P(p.opt.username),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":b(p=>[p.opt?($(),X("div",zN,P(p.opt.name)+" ("+P(p.opt.username)+") ",1)):Q("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},qN={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(r,{emit:t}){return(e,a)=>($(),K(qr,{"model-value":r.modelValue,"onUpdate:modelValue":a[0]||(a[0]=n=>e.$emit("update:modelValue",n))},{default:b(()=>[h(Me,{style:{"min-width":"300px"}},{default:b(()=>[h(me,{class:"q-py-none q-pt-md"},{default:b(()=>a[1]||(a[1]=[x("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),h(me,null,{default:b(()=>a[2]||(a[2]=[x("table",{style:{width:"100%"},class:"info-table"},[x("thead",null,[x("tr",null,[x("th",null,"Shortcut"),x("th",null,"Aksi")])]),x("tbody",null,[x("tr",null,[x("td",null,"F1"),x("td",null,"Dialog Bantuan")]),x("tr",null,[x("td",null,"F2"),x("td",null,"Aktifkan Input Barcode")]),x("tr",null,[x("td",null,"F3"),x("td",null,"Pilih Pelanggan")]),x("tr",null,[x("td",null,"F4"),x("td",null,"Gabung / pisahkan item saat input")])])],-1)])),_:1}),h(Or,{align:"center"},{default:b(()=>[ie(h(Y,{dense:"",label:"Tutup"},null,512),[[Ae]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},i0=Nr(qN,[["__scopeId","data-v-ed1bbfe5"]]),GN=Object.freeze(Object.defineProperty({__proto__:null,default:i0},Symbol.toStringTag,{value:"Module"}));function FN(r){const t=B(!1),e=()=>{const i=r.value||document.documentElement;i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()},a=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},n=()=>{t.value?a():e()};return Nb(()=>{const i=()=>{t.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",i),document.addEventListener("webkitfullscreenchange",i),document.addEventListener("mozfullscreenchange",i),document.addEventListener("MSFullscreenChange",i),()=>{document.removeEventListener("fullscreenchange",i),document.removeEventListener("webkitfullscreenchange",i),document.removeEventListener("mozfullscreenchange",i),document.removeEventListener("MSFullscreenChange",i)}}),{isFullscreen:t,requestFullscreen:e,exitFullscreen:a,toggleFullscreen:n}}const UN={class:"row items-center no-wrap"},HN={class:"col text-subtite text-bold text-grey-8"},WN={class:"col-auto"},o0={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(r,{expose:t,emit:e}){const a=r,n=e,i=()=>{n("save")},o=u=>{u.stopPropagation(),u.preventDefault()},l=u=>{a.modelValue&&(u.key==="Enter"?(i(),o(u)):u.key==="Escape"&&(n("update:modelValue",!1),o(u)))};return Je(()=>{window.addEventListener("keydown",l)}),Qo(()=>{window.removeEventListener("keydown",l)}),t({getCurrentItem:()=>a.item}),(u,d)=>($(),K(qr,{"model-value":r.modelValue,"onUpdate:modelValue":d[4]||(d[4]=c=>u.$emit("update:modelValue",c))},{default:b(()=>[h(Me,null,{default:b(()=>[h(me,{class:"q-py-sm"},{default:b(()=>[x("div",UN,[x("div",HN," Edit "+P(r.data.formatted_id),1),x("div",WN,[h(Y,{flat:"",size:"sm",round:"",icon:"close",onClick:d[0]||(d[0]=c=>u.$emit("update:modelValue",!1))})])])]),_:1}),h(me,{class:"q-py-sm"},{default:b(()=>[h(Sn,{modelValue:r.data.datetime,"onUpdate:modelValue":d[1]||(d[1]=c=>r.data.datetime=c),label:"Waktu","hide-bottom-space":"",disable:r.isProcessing,autofocus:""},null,8,["modelValue","disable"]),h(fe,{modelValue:u.$CONSTANTS.SALES_ORDER_STATUSES[r.data.status],"onUpdate:modelValue":d[2]||(d[2]=c=>u.$CONSTANTS.SALES_ORDER_STATUSES[r.data.status]=c),label:"Status","hide-bottom-space":"",readonly:"",disable:r.isProcessing},null,8,["modelValue","disable"]),h(fe,{modelValue:r.data.notes,"onUpdate:modelValue":d[3]||(d[3]=c=>r.data.notes=c),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),h(Or,{align:"right"},{default:b(()=>[ie(h(Y,{flat:"",label:"Batal",color:"primary",disable:r.isProcessing},null,8,["disable"]),[[Ae]]),ie(h(Y,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:r.isProcessing},null,8,["disable"]),[[Ae]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},YN=Object.freeze(Object.defineProperty({__proto__:null,default:o0},Symbol.toStringTag,{value:"Module"})),jN={class:"q-gutter-sm"},ZN={class:"row items-center"},XN={class:"text-weight-bold"},KN={class:"row q-col-gutter-none full-width"},QN={class:"col-sm-6 col-12 col"},JN={class:"row full-width"},eO={class:"text-grey q-mt-xs q-ml-sm"},tO={class:"col-sm-6 col-12"},aO={class:"row q-ml-sm items-end"},rO={key:0,class:"col text-right q-mr-sm"},nO={class:"row col grow"},iO={class:"col-12 q-pa-sm column"},oO={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},lO={key:0,class:"col"},sO={class:"text-caption text-grey-6 q-mt-xs"},uO={key:0,class:"text-caption text-grey-8 q-mt-xs"},dO={class:"text-italic"},cO={key:1,class:"col"},fO={class:"q-pa-sm q-pb-none text-grey-8"},pO={class:"col"},vO={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},gO={class:"text-h4 text-weight-bold"},hO={class:"row q-px-sm q-py-sm"},mO={__name:"Editor",setup(r){const t=at(),e=Ue(),a=B(!0),n=B(null),i=B(null),o=B(null),l=B(!1),s=B(null),u=B(null),{isFullscreen:d,toggleFullscreen:c}=FN(u),f=e.props.company.name,p=B(e.props.data.customer),g=xt({id:e.props.data.id,formatted_id:e.props.data.formatted_id,customer_id:e.props.data.customer_id,datetime:e.props.data.datetime,status:e.props.data.status,payment_status:e.props.data.payment_status,delivery_status:e.props.data.delivery_status,notes:e.props.data.notes,items:e.props.data.details??[],total:0,total_paid:0}),v=B(""),y=B(!1),_=B(!1),S=B(!1),w=B(!1),T=B(!1),C=B(null),k=ve(()=>g.items.reduce((H,F)=>H+F.price*F.quantity,0)),A=()=>{var H;c(),d.value||(H=s==null?void 0:s.value)==null||H.hideDrawer()},I=H=>isNaN(H)||H<=0?(In("Kuantitas tidak valid.","top"),!1):!0,M=H=>isNaN(H)||H<0?(In("Harga tidak valid.","top"),!1):!0,D=H=>!H||H.length==0?(In("Barcode tidak valid.","top"),!1):!0,L=H=>{v.value.endsWith("*")?v.value+=H.name:v.value=H.name},E=async()=>{const H=v.value.trim();if(H.length===0){S.value=!0;return}const F=H.split("*");let re=1,_e="",te=null;if(F.length===1)_e=F[0];else if(F.length<=3)re=parseInt(F[0]),_e=F[1],F.length===3&&(te=parseFloat(F[2]));else{In("Input tidak valid.","top");return}if(_e.length===0){alert("di kedua"),S.value=!0;return}!D(_e)&&!I(re)&&!M(te)||(y.value=!0,await Sr.post(route("admin.sales-order.add-item"),{order_id:g.id,product_code:_e,qty:re,price:te,merge:a.value}).then(he=>{const Ie=he.data.data.item;let ke=-1;he.data.data.mergeItem&&(ke=g.items.findIndex(Ee=>Ee.id===Ie.id)),ke===-1?g.items.push(Ie):g.items[ke]=Ie,v.value="",te!==null&&te!==parseFloat(Ie.price)&&In("Harga tidak dapat diubah!","top")}).catch(he=>{var Ie,ke;Vi((ke=(Ie=he.response)==null?void 0:Ie.data)==null?void 0:ke.message,"top"),console.error("Gagal mengambil data produk:",he)}),y.value=!1,ni(()=>{var he;(he=n.value)==null||he.focus()}))},R=H=>{C.value=Object.create(H),w.value=!0},V=H=>{t.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${H.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{y.value=!0,Sr.post(route("admin.sales-order.remove-item"),{id:H.id}).then(()=>{const F=g.items.findIndex(re=>re.id===H.id);F!==-1&&(g.items.splice(F,1)[0],yl("Item telah dihapus","top"))}).catch(F=>{Vi("Gagal menghapus item","top"),console.error(F)}).finally(()=>{y.value=!1})})},z=()=>{y.value=!0;const H=i.value.getCurrentItem(),F={id:H.id,qty:H.quantity};H.price_editable&&(F.price=H.price),H.notes&&(F.notes=H.notes),Sr.post(route("admin.sales-order.update-item"),F).then(re=>{const _e=re.data.data,te=g.items.findIndex(he=>he.id===_e.id);te!==-1&&(g.items[te]=_e,yl("Item telah diperbarui","top"))}).catch(re=>{Vi("Gagal memperbarui item","top"),console.error(re)}).finally(()=>{y.value=!1})},G=H=>{if(g.items.length===0){yl("Item masih kosong","top");return}console.log(H)};Je(()=>{const H=F=>{F.key==="F1"?(F.preventDefault(),l.value=!0):F.key==="F2"?(F.preventDefault(),n.value.focus()):F.key==="F3"?(F.preventDefault(),o.value.focus()):F.key==="F4"?(F.preventDefault(),a.value=!a.value):F.key==="F10"?(F.preventDefault(),_.value=!0):F.key==="F11"&&(F.preventDefault(),A())};document.addEventListener("keydown",H),Qo(()=>{document.removeEventListener("keydown",H)}),ni(()=>{var F;(F=s==null?void 0:s.value)==null||F.hideDrawer()})});const q=H=>{p.value=H,g.customer_id=H==null?void 0:H.id,Z()},Z=()=>{y.value=!0;const H={id:g.id,customer_id:g.customer_id,datetime:g.datetime,notes:g.notes};Sr.post(route("admin.sales-order.update"),H).then(F=>{const re=F.data.data.id;g.customer_id=re.customer_id}).catch(F=>{Vi("Terdapat kesalahan saat menyimpan!","top"),console.error(F)}).finally(()=>{y.value=!1})};return(H,F)=>{const re=ee("i-head"),_e=ee("authenticated-layout");return $(),X(se,null,[h(re,{title:m(f)},null,8,["title"]),h(_e,{ref_key:"authLayoutRef",ref:s},{title:b(()=>[N(P(m(f)),1)]),"left-button":b(()=>[x("div",jN,[m(t).screen.gt.sm?($(),K(Y,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:F[0]||(F[0]=te=>m(oe).get(H.route("admin.sales-order.index")))})):Q("",!0)])]),"right-button":b(()=>[x("div",ZN,[m(t).screen.gt.sm?($(),X(se,{key:0},[x("div",XN,P(m(e).props.auth.user.username),1),F[19]||(F[19]=x("div",{class:"q-mx-sm"},"|",-1)),x("div",null,[h(Xy)])],64)):Q("",!0),h(Y,{class:"q-ml-sm",icon:m(d)?"fullscreen_exit":"fullscreen",dense:"",color:"grey-7",flat:"",rounded:"",onClick:F[1]||(F[1]=te=>A())},null,8,["icon"])])]),default:b(()=>[h(gt,{class:"bg-grey-2 q-pa-none column fit"},{default:b(()=>[h(Me,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:b(()=>[x("div",KN,[x("div",QN,[x("div",JN,[h(BN,{ref_key:"customerAutocompleteRef",ref:o,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:p.value,"onUpdate:modelValue":F[2]||(F[2]=te=>p.value=te),label:"Pelanggan",disable:y.value,onCustomerSelected:q,"min-length":1,outlined:""},null,8,["modelValue","disable"]),x("div",eO," Saldo: "+P(p.value?"Rp. "+m(ae)(p.value?p.value.balance:0):"Tidak tersedia"),1)])]),x("div",tO,[h(fe,{ref_key:"userInputRef",ref:n,modelValue:v.value,"onUpdate:modelValue":F[5]||(F[5]=te=>v.value=te),onKeyup:F[6]||(F[6]=ri(ue(te=>E(),["prevent"]),["enter"])),loading:y.value,disable:y.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:"",autofocus:""},{prepend:b(()=>[h(U,{name:"search",onClick:F[3]||(F[3]=te=>S.value=!0),class:"cursor-pointer"})]),append:b(()=>{var te;return[((te=v.value)==null?void 0:te.length)>0?($(),K(U,{key:0,name:"send",onClick:F[4]||(F[4]=he=>E()),class:"cursor-pointer q-ml-md"})):Q("",!0)]}),_:1},8,["modelValue","loading","disable"]),x("div",aO,[h(bu,{class:"col",modelValue:a.value,"onUpdate:modelValue":F[7]||(F[7]=te=>a.value=te),label:"Gabungkan item",disable:y.value},null,8,["modelValue","disable"]),m(t).screen.gt.sm?Q("",!0):($(),X("div",rO,[h(Y,{flat:"",icon:"edit",color:"grey",dense:"",rounded:"",size:"sm",title:"Edit Order Info",onClick:F[8]||(F[8]=te=>T.value=!0)})]))])])]),x("div",nO,[x("div",iO,[h(a0,{items:g.items,onUpdateQuantity:F[9]||(F[9]=({id:te,value:he})=>H.updateQuantity(te,he)),onRemoveItem:V,onEditItem:R,"is-processing":y.value},null,8,["items","is-processing"])])]),x("div",oO,[m(t).screen.gt.sm?($(),X("div",lO,[x("div",sO,P(g.items.length)+" item(s) ",1),g.notes?($(),X("div",uO,[F[20]||(F[20]=x("div",{class:"text-bold"},"Catatan:",-1)),x("div",dO,[h(ta,{text:g.notes},null,8,["text"])])])):Q("",!0)])):Q("",!0),m(t).screen.gt.sm?($(),X("div",cO,[x("div",fO,[x("div",null,[N(" #: "+P(g.formatted_id)+" ",1),h(Y,{icon:"edit",flat:"",size:"xs",dense:"",rounded:"",onClick:F[10]||(F[10]=te=>T.value=!0)})]),x("div",null,P(m(sa)(g.datetime)),1)])])):Q("",!0),x("div",pO,[x("div",vO,[F[22]||(F[22]=x("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),x("span",gO,[F[21]||(F[21]=x("sup",{style:{"font-size":"13px"}},"Rp.",-1)),N(" "+P(m(ae)(k.value)),1)])])])]),x("div",hO,[h(Y,{class:"full-width",label:"Bayar",color:"primary",icon:"payment",onClick:F[11]||(F[11]=te=>_.value=!0),disable:y.value||g.items.length===0,loading:y.value},null,8,["disable","loading"])])]),_:1}),h(n0,{ref_key:"itemEditorRef",ref:i,modelValue:w.value,"onUpdate:modelValue":F[12]||(F[12]=te=>w.value=te),item:C.value,onSave:F[13]||(F[13]=te=>z()),"is-processing":y.value},null,8,["modelValue","item","is-processing"]),h(r0,{modelValue:_.value,"onUpdate:modelValue":F[14]||(F[14]=te=>_.value=te),onAccepted:G,form:g,customer:p.value,total:k.value},null,8,["modelValue","form","customer","total"]),h(EN,{modelValue:S.value,"onUpdate:modelValue":F[15]||(F[15]=te=>S.value=te),onProductSelected:L},null,8,["modelValue"]),h(o0,{modelValue:T.value,"onUpdate:modelValue":F[16]||(F[16]=te=>T.value=te),data:g,onSave:F[17]||(F[17]=te=>Z()),"is-processing":y.value},null,8,["modelValue","data","is-processing"]),h(i0,{modelValue:l.value,"onUpdate:modelValue":F[18]||(F[18]=te=>l.value=te)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},yO=Object.freeze(Object.defineProperty({__proto__:null,default:mO},Symbol.toStringTag,{value:"Module"})),bO={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(r){const t=window.CONSTANTS.SALES_ORDER_STATUSES,e={draft:"orange",closed:"green",canceled:"red"};return(a,n)=>($(),K(Ru,{status:r.status,statuses:m(t),colors:e},null,8,["status","statuses"]))}},_O={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(r){const t=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,e={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(a,n)=>($(),K(Ru,{status:r.status,statuses:m(t),colors:e},null,8,["status","statuses"]))}},SO={__name:"SalesOrderDeliveryStatusChip",props:{status:{type:String,required:!0}},setup(r){const t=window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES,e={not_sent:"grey",sent:"orange",received:"green",failed:"red"};return(a,n)=>($(),K(Ru,{status:r.status,statuses:m(t),colors:e},null,8,["status","statuses"]))}},wO={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},xO={class:"q-pa-xs"},TO={class:"full-width row flex-center text-grey-8 q-gutter-sm"},CO={key:1},kO={class:"flex justify-end"},cg="Penjualan",AO={__name:"Index",setup(r){const t=at(),e=B(!1),a=B([]),n=B(!0),i=B(null),o=B(null),l=Qt(o),s=Vo(),u=Ro(),d=[{label:"Semua Tahun",value:"all"},{label:`${s}`,value:s},...bn(s-2,s-1).reverse()],c=[{value:"all",label:"Semua Bulan"},..._n()],f=[{value:"all",label:"Semua Status"},...Et(window.CONSTANTS.SALES_ORDER_STATUSES)],p=[{value:"all",label:"Semua Status"},...Et(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],g=[{value:"all",label:"Semua Status"},...Et(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],v=xt({search:"",year:s,month:u,status:"all",payment_status:"all",delivery_status:"all",...Pt()}),y=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),_=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"action",align:"right"}];Je(()=>{A()});const S=D=>{if(D.status=="draft"){w(D);return}T(D)},w=D=>{oe.get(route("admin.sales-order.edit",D.id))},T=D=>{oe.get(route("admin.sales-order.detail",D.id))},C=D=>{mh.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${D.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Sr.post(route("admin.sales-order.cancel",{id:D.id}),{id:D.id}).then(L=>{const E=L.data.data,R=a.value.findIndex(V=>V.id===E.id);if(R===-1){console.warn("Item tidak ditemukan di tabel.");return}a.value[R].status="dibatalkan",t.notify({message:L.data.message,position:"bottom"})}).catch(L=>{var R,V;const E=((V=(R=L.response)==null?void 0:R.data)==null?void 0:V.message)||"Terjadi kesalahan saat membatalkan transaksi.";t.notify({message:E,color:"warning",position:"bottom"}),console.error(L)})})},k=D=>oa({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${D.formatted_id}?`,url:route("admin.sales-order.delete",D.id),fetchItemsCallback:A,loading:n}),A=(D=null)=>{Lt({pagination:y,filter:v,props:D,rows:a,url:route("admin.sales-order.data"),loading:n,tableRef:i})},I=()=>{A()},M=ve(()=>t.screen.gt.sm?_:_.filter(D=>D.name==="id"||D.name==="action"));return ot(()=>v.year,D=>{D===null&&(v.month=null)}),(D,L)=>{const E=ee("i-head"),R=ee("authenticated-layout");return $(),X(se,null,[h(E,{title:cg}),h(R,null,Jt({title:b(()=>[N(P(cg))]),"right-button":b(()=>[h(Y,{icon:e.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:L[0]||(L[0]=V=>e.value=!e.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:L[1]||(L[1]=V=>m(oe).get(D.route("admin.sales-order.add")))})]),default:b(()=>[x("div",xO,[h(it,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:y.value,"onUpdate:pagination":L[13]||(L[13]=V=>y.value=V),filter:v.search,loading:n.value,columns:M.value,rows:a.value,"rows-per-page-options":[10,25,50],style:ea({height:m(l)}),onRequest:A,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:V,message:z,filter:G})=>[x("div",TO,[x("span",null,P(z)+" "+P(G?" with term "+G:""),1)])]),body:b(V=>[h(tt,{props:V,class:"cursor-pointer",onClick:ue(z=>S(V.row),["prevent"])},{default:b(()=>[h(J,{key:"id",props:V,class:"wrap-column"},{default:b(()=>[x("div",null,"# "+P(V.row.formatted_id),1),x("div",null,[h(U,{class:"inline-icon",name:"calendar_today"}),N(P(m(sa)(V.row.datetime)),1)]),m(t).screen.gt.sm?Q("",!0):($(),X(se,{key:0},[V.row.customer?($(),K(cc,{key:0,href:D.route("admin.customer.detail",{id:V.row.customer.id}),onClick:L[8]||(L[8]=ue(()=>{},["stop"]))},{default:b(()=>[N(P(V.row.customer.formatted_id)+" ",1),L[14]||(L[14]=x("br",null,null,-1)),N(" "+P(V.row.customer.name),1)]),_:2},1032,["href"])):Q("",!0),x("div",null,"Rp. "+P(m(ae)(V.row.total_price)),1),V.row.notes?($(),X("div",CO,[h(U,{name:"notes"}),N(" "+P(V.row.notes),1)])):Q("",!0)],64)),x("div",null,[h(bO,{status:V.row.status},null,8,["status"]),h(_O,{status:V.row.payment_status},null,8,["status"]),h(SO,{status:V.row.delivery_status},null,8,["status"])])]),_:2},1032,["props"]),h(J,{key:"customer_id",props:V,onClick:L[10]||(L[10]=ue(()=>{},["stop"]))},{default:b(()=>[V.row.customer?($(),K(cc,{key:0,href:D.route("admin.customer.detail",{id:V.row.customer.id}),onClick:L[9]||(L[9]=ue(()=>{},["stop"]))},{default:b(()=>[N(P(V.row.customer.formatted_id)+" ",1),L[15]||(L[15]=x("br",null,null,-1)),N(" "+P(V.row.customer.name),1)]),_:2},1032,["href"])):Q("",!0)]),_:2},1032,["props"]),h(J,{key:"total",props:V},{default:b(()=>[N(P(m(ae)(V.row.total_price)),1)]),_:2},1032,["props"]),h(J,{key:"action",props:V,onClick:L[12]||(L[12]=ue(()=>{},["stop"]))},{default:b(()=>[x("div",kO,[h(Y,{disabled:!m(_a)(D.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:L[11]||(L[11]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[V.row.status!="draft"?ie(($(),K(pe,{key:0,onClick:ue(z=>T(V.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"visibility"})]),_:1}),h(j,null,{default:b(()=>L[16]||(L[16]=[N(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]):Q("",!0),ie(($(),K(pe,{onClick:ue(z=>w(V.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"edit"})]),_:1}),h(j,null,{default:b(()=>[N(P(V.row.status=="draft"?"Edit":"Reopen"),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[Se],[Ae]]),V.row.status=="draft"?ie(($(),K(pe,{key:1,onClick:ue(z=>C(V.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"cancel"})]),_:1}),h(j,null,{default:b(()=>L[17]||(L[17]=[N(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]):Q("",!0),h(Sa),ie(($(),K(pe,{onClick:ue(z=>k(V.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>L[18]||(L[18]=[N(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[e.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:b(()=>[x("div",wO,[h(Ce,{modelValue:v.year,"onUpdate:modelValue":[L[2]||(L[2]=V=>v.year=V),I],options:d,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),v.year!="all"?($(),K(Ce,{key:0,modelValue:v.month,"onUpdate:modelValue":[L[3]||(L[3]=V=>v.month=V),I],options:c,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:v.year===null},null,8,["modelValue","disable"])):Q("",!0),h(Ce,{modelValue:v.status,"onUpdate:modelValue":[L[4]||(L[4]=V=>v.status=V),I],options:f,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h(Ce,{modelValue:v.payment_status,"onUpdate:modelValue":[L[5]||(L[5]=V=>v.payment_status=V),I],options:p,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h(Ce,{modelValue:v.delivery_status,"onUpdate:modelValue":[L[6]||(L[6]=V=>v.delivery_status=V),I],options:g,label:"Status Pengiriman",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:v.search,"onUpdate:modelValue":L[7]||(L[7]=V=>v.search=V),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},IO=Object.freeze(Object.defineProperty({__proto__:null,default:AO},Symbol.toStringTag,{value:"Module"})),DO={class:"q-gutter-sm"},MO={class:"col col-md-6 q-pa-xs"},PO={key:0},LO={class:"text-bold"},VO={key:0},RO={class:"text-caption text-grey-8"},EO={key:1},fg="Buat Penyesuaian Stok",NO={__name:"Create",setup(r){const e=Ue().props.products,a=B([]),n=wt({type:"stock_opname",datetime:Ir().format("YYYY-MM-DD HH:mm:ss"),notes:null,product_ids:[]}),i=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(d,c)=>ae(d)+" "+c.uom}],o=Et(window.CONSTANTS.STOCKADJUSTMENT_TYPES),l=()=>{n.product_ids=a.value.map(d=>d.id),Mt({form:n,url:route("admin.stock-adjustment.create")})},s=at(),u=ve(()=>s.screen.gt.sm?i:i.filter(d=>d.name==="name"));return(d,c)=>{const f=ee("i-head"),p=ee("authenticated-layout");return $(),X(se,null,[h(f,{title:fg}),h(p,null,{title:b(()=>[N(P(fg))]),"left-button":b(()=>[x("div",DO,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=g=>m(oe).get(d.route("admin.stock-adjustment.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",MO,[h(Dt,{class:"row",onSubmit:ue(l,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-sm"},{default:b(()=>[c[6]||(c[6]=x("div",{class:"text-subtitle2"},[x("b",null,"Info Penyesuaian Stok")],-1)),h(Sn,{modelValue:m(n).datetime,"onUpdate:modelValue":c[1]||(c[1]=g=>m(n).datetime=g),label:"Waktu",error:!!m(n).errors.datetime,disable:m(n).processing,"error-message":m(n).errors.datetime},null,8,["modelValue","error","disable","error-message"]),h(Ce,{modelValue:m(n).type,"onUpdate:modelValue":c[2]||(c[2]=g=>m(n).type=g),options:m(o),label:"Jenis Penyesuaian",class:"custom-select",error:!!m(n).errors.type,disable:m(n).processing,"map-options":"","emit-value":"","error-message":m(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),h(fe,{modelValue:m(n).notes,"onUpdate:modelValue":c[3]||(c[3]=g=>m(n).notes=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:m(n).processing,error:!!m(n).errors.notes,"error-message":m(n).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),h(me,null,{default:b(()=>[c[7]||(c[7]=x("div",{class:"text-subtitle2"},[x("b",null,"Pilih Produk")],-1)),h(it,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",columns:u.value,rows:m(e),"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:a.value,"onUpdate:selected":c[4]||(c[4]=g=>a.value=g)},{"body-cell-name":b(g=>[h(J,{props:g},{default:b(()=>[m(s).screen.lt.md?($(),X("div",PO,[x("div",LO,P(g.row.name),1),g.row.category?($(),X("div",VO,P(g.row.category.name),1)):Q("",!0),x("div",RO,P(m(ae)(g.row.stock))+" "+P(g.row.uom),1)])):($(),X("div",EO,P(g.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"play_arrow",type:"submit",label:"Lanjutkan",color:"primary",disable:m(n).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(n).processing,onClick:c[5]||(c[5]=g=>m(oe).get(d.route("admin.stock-adjustment.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},OO=Object.freeze(Object.defineProperty({__proto__:null,default:NO},Symbol.toStringTag,{value:"Module"})),$O={class:"q-gutter-sm"},zO={class:"row justify-center"},BO={class:"col col-lg-8 q-pa-sm"},qO={class:"row"},GO={class:"detail"},FO={key:0},UO={key:1},HO={class:"text-grey-9"},WO={__name:"Detail",setup(r){const t=Ue(),e=`Rincian Penyesuaian Stok #${t.props.data.id}`,a=t.props.details,n=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:l=>ae(l)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:l=>ae(l)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:l=>ae(l)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],i=at(),o=ve(()=>i.screen.gt.sm?n:n.filter(l=>l.name==="no"));return(l,s)=>{const u=ee("i-head"),d=ee("i-link"),c=ee("authenticated-layout");return $(),X(se,null,[h(u,{title:e}),h(c,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",$O,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:s[0]||(s[0]=f=>l.$inertia.get(l.route("admin.stock-adjustment.index")))})])]),default:b(()=>[x("div",zO,[x("div",BO,[x("div",qO,[h(Me,{square:"",flat:"",bordered:"",class:"q-card col"},{default:b(()=>[h(me,null,{default:b(()=>[s[21]||(s[21]=x("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),x("table",GO,[x("tbody",null,[x("tr",null,[s[1]||(s[1]=x("td",{style:{width:"120px"}},"ID",-1)),s[2]||(s[2]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,"# "+P(m(t).props.data.id),1)]),x("tr",null,[s[3]||(s[3]=x("td",null,"Jenis",-1)),s[4]||(s[4]=x("td",null,":",-1)),x("td",null,P(l.$CONSTANTS.STOCKADJUSTMENT_TYPES[m(t).props.data.type]),1)]),x("tr",null,[s[5]||(s[5]=x("td",null,"Status",-1)),s[6]||(s[6]=x("td",null,":",-1)),x("td",null,P(l.$CONSTANTS.STOCKADJUSTMENT_STATUSES[m(t).props.data.status]),1)]),x("tr",null,[s[7]||(s[7]=x("td",null,"Waktu",-1)),s[8]||(s[8]=x("td",null,":",-1)),x("td",null,P(l.$dayjs(m(t).props.data.datetime).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)]),m(t).props.data.created_at?($(),X("tr",FO,[s[10]||(s[10]=x("td",null,"Dibuat Oleh",-1)),s[11]||(s[11]=x("td",null,":",-1)),x("td",null,[m(t).props.data.created_by?($(),X(se,{key:0},[h(d,{href:l.route("admin.user.detail",{id:m(t).props.data.created_by})},{default:b(()=>[N(P(m(t).props.data.created_by.username)+" - "+P(m(t).props.data.created_by.name),1)]),_:1},8,["href"]),s[9]||(s[9]=N(" - "))],64)):Q("",!0),N(" "+P(l.$dayjs(new Date(m(t).props.data.created_at)).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)])])):Q("",!0),m(t).props.data.updated_at?($(),X("tr",UO,[s[13]||(s[13]=x("td",null,"Diperbarui oleh",-1)),s[14]||(s[14]=x("td",null,":",-1)),x("td",null,[m(t).props.data.updated_by?($(),X(se,{key:0},[h(d,{href:l.route("admin.user.detail",{id:m(t).props.data.updated_by})},{default:b(()=>[N(P(m(t).props.data.updated_by.username)+" - "+P(m(t).props.data.updated_by.name),1)]),_:1},8,["href"]),s[12]||(s[12]=N(" - "))],64)):Q("",!0),N(" "+P(l.$dayjs(new Date(m(t).props.data.updated_at)).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)])])):Q("",!0),x("tr",null,[s[15]||(s[15]=x("td",null,"Total Modal",-1)),s[16]||(s[16]=x("td",null,":",-1)),x("td",null,[x("div",{class:Ze(m(t).props.data.total_cost<0?"text-red-10":m(t).props.data.total_cost>0?"text-green-10":"")}," Rp. "+P(m(ae)(m(t).props.data.total_cost)),3)])]),x("tr",null,[s[17]||(s[17]=x("td",null,"Total Harga",-1)),s[18]||(s[18]=x("td",null,":",-1)),x("td",null,[x("div",{class:Ze(m(t).props.data.total_price<0?"text-red-10":m(t).props.data.total_price>0?"text-green-10":"")}," Rp. "+P(m(ae)(m(t).props.data.total_price)),3)])]),x("tr",null,[s[19]||(s[19]=x("td",null,"Catatan",-1)),s[20]||(s[20]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.notes),1)])])])]),_:1}),h(me,null,{default:b(()=>[s[26]||(s[26]=x("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),h(it,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",dense:"",columns:o.value,rows:m(a),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":b(f=>[h(J,{props:f},{default:b(()=>[m(i).screen.lt.md?($(),X(se,{key:1},[x("div",HO,[x("b",null,"#"+P(f.rowIndex+1),1),N(" - "+P(f.row.product_name),1)]),x("div",null,[N(" Stok Lama: "+P(m(ae)(f.row.old_quantity))+" "+P(f.row.uom),1),s[23]||(s[23]=x("br",null,null,-1)),N(" Stok Baru: "+P(m(ae)(f.row.new_quantity))+" "+P(f.row.uom),1),s[24]||(s[24]=x("br",null,null,-1)),x("div",{class:Ze(f.row.balance<0?"text-red-10":f.row.balance>0?"text-green-10":"")},[N(" Selisih: "+P((f.row.balance>0?"+":"")+m(ae)(f.row.balance))+" "+P(f.row.uom),1),s[22]||(s[22]=x("br",null,null,-1)),N(" (Rp. "+P(m(ae)(f.row.subtotal_cost))+" / Rp. "+P(m(ae)(f.row.subtotal_price))+") ",1)],2),s[25]||(s[25]=x("br",null,null,-1)),N(" "+P(f.row.notes),1)])],64)):($(),X(se,{key:0},[N(P(f.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-balance":b(f=>[h(J,{props:f},{default:b(()=>[x("div",{class:Ze(f.row.balance<0?"text-red-10":f.row.balance>0?"text-green-10":"")},P((f.row.balance>0?"+":"")+m(ae)(f.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":b(f=>[h(J,{props:f},{default:b(()=>[x("div",{class:Ze(f.row.balance<0?"text-red-10":f.row.balance>0?"text-green-10":"")},P(m(ae)(f.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":b(f=>[h(J,{props:f},{default:b(()=>[x("div",{class:Ze(f.row.balance<0?"text-red-10":f.row.balance>0?"text-green-10":"")},P(m(ae)(f.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},YO=Object.freeze(Object.defineProperty({__proto__:null,default:WO},Symbol.toStringTag,{value:"Module"})),jO={class:"q-gutter-sm"},ZO={class:"col col-md-6 q-pa-xs"},XO={class:"text-bold"},KO={key:0},QO={class:"text-caption text-grey-8"},pg="Penyesuaian Stok",JO={__name:"Editor",setup(r){const t=Ue(),e=wt({id:t.props.item.id,type:t.props.item.type,datetime:Ir(t.props.item.datetime).format("YYYY-MM-DD HH:mm:ss"),notes:t.props.item.notes,action:"save",details:[]}),a=Et(window.CONSTANTS.STOCKADJUSTMENT_TYPES),n=t.props.details,i=u=>{const d=()=>{e.action=u,e.details=n.map(c=>({id:c.id,new_quantity:c.new_quantity})),Mt({form:e,url:route("admin.stock-adjustment.save")})};u==="close"||u==="cancel"?mh.create({title:"Konfirmasi",message:"Aksi ini tidak dapat dibatalkan, apakah Anda yakin?",cancel:!0,persistent:!0}).onOk(()=>{d()}).onCancel(()=>{}):d()},o=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:u=>ae(u)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:u=>ae(u)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(u,d)=>ae(d.new_quantity-d.old_quantity)}],l=at(),s=ve(()=>l.screen.gt.sm?o:o.filter(u=>u.name==="product_name"||u.name==="new_quantity"));return(u,d)=>{const c=ee("i-head"),f=ee("authenticated-layout");return $(),X(se,null,[h(c,{title:pg}),h(f,null,{title:b(()=>[N(P(pg))]),"left-button":b(()=>[x("div",jO,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=p=>u.$inertia.get(u.route("admin.stock-adjustment.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",ZO,[h(Dt,{class:"row",onSubmit:ue(i,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,null,{default:b(()=>d[8]||(d[8]=[x("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":d[1]||(d[1]=p=>m(e).id=p)},null,512),[[ba,m(e).id]]),h(Sn,{modelValue:m(e).datetime,"onUpdate:modelValue":d[2]||(d[2]=p=>m(e).datetime=p),label:"Waktu",error:!!m(e).errors.datetime,disable:m(e).processing,"error-message":m(e).errors.datetime},null,8,["modelValue","error","disable","error-message"]),h(Ce,{modelValue:m(e).type,"onUpdate:modelValue":d[3]||(d[3]=p=>m(e).type=p),options:m(a),label:"Jenis Penyesuaian",class:"custom-select",error:!!m(e).errors.type,disable:m(e).processing,"map-options":"","emit-value":"","error-message":m(e).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),h(fe,{modelValue:m(e).notes,"onUpdate:modelValue":d[4]||(d[4]=p=>m(e).notes=p),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:m(e).processing,error:!!m(e).errors.notes,"error-message":m(e).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),h(me,null,{default:b(()=>[h(it,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",columns:s.value,rows:m(n),"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":b(p=>[h(J,{props:p},{default:b(()=>[x("div",XO,P(p.row.product_name),1),m(l).screen.lt.md?($(),X("div",KO,[x("div",QO,[N(" Tercatat: "+P(m(ae)(p.row.old_quantity))+" ",1),d[9]||(d[9]=x("br",null,null,-1)),N(" Selisih: "+P(m(ae)(p.row.new_quantity-p.row.old_quantity)),1)])])):Q("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":b(p=>[h(J,{props:p},{default:b(()=>[h(fe,{modelValue:p.row[p.col.name],"onUpdate:modelValue":g=>p.row[p.col.name]=g,modelModifiers:{number:!0},"input-class":"text-right",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",onClick:d[5]||(d[5]=p=>i("save")),label:"Simpan",color:"primary",disable:m(e).processing},null,8,["disable"]),h(Y,{icon:"done_all",onClick:d[6]||(d[6]=p=>i("close")),label:"Selesaikan",color:"green",disable:m(e).processing},null,8,["disable"]),h(Y,{icon:"close",onClick:d[7]||(d[7]=p=>i("cancel")),label:"Batalkan",color:"red",disable:m(e).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},e3=Object.freeze(Object.defineProperty({__proto__:null,default:JO},Symbol.toStringTag,{value:"Module"})),t3={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},a3={class:"q-pa-xs"},r3={class:"full-width row flex-center text-grey-8 q-gutter-sm"},n3={key:0,class:"flex q-gutter-xs"},i3={class:"flex q-col-gutter-xs"},o3={key:0},l3={key:1},s3={class:"flex justify-end"},vg="Penyesuaian Stok",u3={__name:"Index",setup(r){const t=B([]),e=B(!0),a=B(!1),n=B(null),i=B(null),o=Qt(i),l=xt({search:"",status:"all",type:"all",...Pt()}),s=[{value:"all",label:"Semua"},...Et(window.CONSTANTS.STOCKADJUSTMENT_STATUSES)],u=[{value:"all",label:"Semua"},...Et(window.CONSTANTS.STOCKADJUSTMENT_TYPES)],d=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),c=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];Je(()=>{p()});const f=S=>oa({message:`Hapus Transaksi #${S.id}?`,url:route("admin.stock-adjustment.delete",S.id),fetchItemsCallback:p,loading:e}),p=(S=null)=>Lt({pagination:d,filter:l,props:S,rows:t,url:route("admin.stock-adjustment.data"),loading:e,tableRef:n}),g=()=>{p()},v=S=>{S.status=="draft"?oe.get(route("admin.stock-adjustment.editor",S.id)):oe.get(route("admin.stock-adjustment.detail",S.id))},y=at(),_=ve(()=>y.screen.gt.sm?c:c.filter(S=>S.name==="id"||S.name==="action"));return(S,w)=>{const T=ee("i-head"),C=ee("authenticated-layout");return $(),X(se,null,[h(T,{title:vg}),h(C,null,Jt({"right-button":b(()=>[h(Y,{icon:a.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=k=>a.value=!a.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=k=>m(oe).get(S.route("admin.stock-adjustment.create")))})]),title:b(()=>[N(P(vg))]),default:b(()=>[x("div",a3,[h(it,{ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id","virtual-scroll":"",pagination:d.value,"onUpdate:pagination":w[6]||(w[6]=k=>d.value=k),filter:l.search,loading:e.value,columns:_.value,rows:t.value,"rows-per-page-options":[10,25,50],style:ea({height:m(o)}),onRequest:p,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:k,message:A,filter:I})=>[x("div",r3,[x("span",null,P(A)+" "+P(I?" with term "+I:""),1)])]),body:b(k=>[h(tt,{props:k,onClick:A=>v(k.row),class:"cursor-pointer"},{default:b(()=>[h(J,{key:"id",props:k},{default:b(()=>[m(y).screen.lt.md?($(),X(se,{key:1},[x("div",i3,[x("div",null,[x("b",null,"#"+P(k.row.id),1)]),x("div",null,[h(U,{name:"history"}),N(" "+P(S.$dayjs(new Date(k.row.datetime)).format("DD/MM/YYYY HH:mm")),1)]),h(Ob,{dense:"",size:"sm",color:k.row.status==="draft"?"orange":k.row.status==="closed"?"green":k.row.status==="canceled"?"red":"",icon:k.row.status==="draft"?"emergency":k.row.status==="closed"?"check":k.row.status==="canceled"?"close":""},{default:b(()=>[N(P(S.$CONSTANTS.STOCKADJUSTMENT_STATUSES[k.row.status]),1)]),_:2},1032,["color","icon"])]),x("div",null,[h(U,{name:"category"}),N(" "+P(S.$CONSTANTS.STOCKADJUSTMENT_TYPES[k.row.type]),1)]),k.row.created_by?($(),X("div",o3,[h(U,{name:"person"}),w[7]||(w[7]=N(" Dibuat: ")),x("b",null,P(k.row.created_by.username),1),h(U,{name:"history"}),N(" "+P(S.$dayjs(new Date(k.row.created_at)).format("DD/MM/YYYY HH:mm")),1)])):Q("",!0),k.row.updated_by?($(),X("div",l3,[h(U,{name:"person"}),w[8]||(w[8]=N(" Diperbarui: ")),x("b",null,P(k.row.updated_by.username),1),h(U,{name:"history"}),N(" "+P(S.$dayjs(new Date(k.row.updated_at)).format("DD/MM/YYYY HH:mm")),1)])):Q("",!0),x("div",{class:Ze(k.row.total_cost<0?"text-red-10":k.row.total_cost>0?"text-green-10":"")},[h(U,{name:"money"}),N(" Rp. "+P(m(ae)(k.row.total_cost))+" / Rp. "+P(m(ae)(k.row.total_price)),1)],2)],64)):($(),X("div",n3,[x("div",null,[x("b",null,"#"+P(k.row.id),1)])]))]),_:2},1032,["props"]),h(J,{key:"datetime",props:k},{default:b(()=>[N(P(S.$dayjs(new Date(k.row.datetime)).format("DD/MM/YYYY HH:mm")),1)]),_:2},1032,["props"]),h(J,{key:"status",props:k,class:"text-center"},{default:b(()=>[N(P(S.$CONSTANTS.STOCKADJUSTMENT_STATUSES[k.row.status]),1)]),_:2},1032,["props"]),h(J,{key:"type",props:k},{default:b(()=>[N(P(S.$CONSTANTS.STOCKADJUSTMENT_TYPES[k.row.type]),1)]),_:2},1032,["props"]),h(J,{key:"total_cost",props:k},{default:b(()=>[x("div",{class:Ze(k.row.total_cost<0?"text-red-10":k.row.total_cost>0?"text-green-10":"")},P(m(ae)(k.row.total_cost)),3)]),_:2},1032,["props"]),h(J,{key:"total_price",props:k},{default:b(()=>[x("div",{class:Ze(k.row.total_price<0?"text-red-10":k.row.total_price>0?"text-green-10":"")},P(m(ae)(k.row.total_price)),3)]),_:2},1032,["props"]),h(J,{key:"notes",props:k},{default:b(()=>[N(P(k.row.notes),1)]),_:2},1032,["props"]),h(J,{key:"action",props:k},{default:b(()=>[x("div",s3,[h(Y,{icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:w[5]||(w[5]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{onClick:ue(A=>f(k.row),["stop"]),clickable:"",disabled:!m(_a)(S.$CONSTANTS.USER_ROLE_ADMIN)},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>w[9]||(w[9]=[N("Hapus")])),_:1})]),_:2},1032,["onClick","disabled"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[a.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:i},{default:b(()=>[x("div",t3,[h(Ce,{modelValue:l.status,"onUpdate:modelValue":[w[2]||(w[2]=k=>l.status=k),g],options:s,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),h(Ce,{modelValue:l.type,"onUpdate:modelValue":[w[3]||(w[3]=k=>l.type=k),g],options:u,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:l.search,"onUpdate:modelValue":w[4]||(w[4]=k=>l.search=k),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},d3=Object.freeze(Object.defineProperty({__proto__:null,default:u3},Symbol.toStringTag,{value:"Module"})),c3={class:"q-gutter-sm"},f3={class:"q-gutter-sm"},p3={class:"col col-md-6 q-pa-xs"},v3={class:"row"},g3={class:"detail"},gg="Rincian Pemasok",h3={__name:"Detail",setup(r){const t=Ue();return(e,a)=>{const n=ee("i-head"),i=ee("authenticated-layout");return $(),X(se,null,[h(n,{title:gg}),h(i,null,{title:b(()=>[N(P(gg))]),"left-button":b(()=>[x("div",c3,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:a[0]||(a[0]=o=>m(oe).get(e.route("admin.supplier.index")))})])]),"right-button":b(()=>[x("div",f3,[h(Y,{icon:"edit",dense:"",color:"primary",onClick:a[1]||(a[1]=o=>m(oe).get(e.route("admin.supplier.edit",{id:m(t).props.data.id})))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",p3,[x("div",v3,[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,null,{default:b(()=>[a[14]||(a[14]=x("div",{class:"text-subtitle1 text-bold text-grey-8"}," Info Pemasok ",-1)),x("table",g3,[x("tbody",null,[x("tr",null,[a[2]||(a[2]=x("td",{style:{width:"70px"}},"Nama",-1)),a[3]||(a[3]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,P(m(t).props.data.name),1)]),x("tr",null,[a[4]||(a[4]=x("td",null,"Telepon",-1)),a[5]||(a[5]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.phone),1)]),x("tr",null,[a[6]||(a[6]=x("td",null,"Alamat",-1)),a[7]||(a[7]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.address),1)]),x("tr",null,[a[8]||(a[8]=x("td",null,"No. Rek",-1)),a[9]||(a[9]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.bank_account_number),1)]),x("tr",null,[a[10]||(a[10]=x("td",null,"Alamat Return",-1)),a[11]||(a[11]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.return_address),1)]),x("tr",null,[a[12]||(a[12]=x("td",null,"Status",-1)),a[13]||(a[13]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.active?"Aktif":"Tidak Aktif"),1)])])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},m3=Object.freeze(Object.defineProperty({__proto__:null,default:h3},Symbol.toStringTag,{value:"Module"})),y3={class:"q-gutter-sm"},b3={class:"col col-md-6 q-pa-xs"},_3={style:{"margin-left":"-10px"}},S3={__name:"Editor",setup(r){const t=Ue(),e=(t.props.data.id?"Edit":"Tambah")+" Pemasok",a=wt({id:t.props.data.id,name:t.props.data.name,phone:t.props.data.phone,address:t.props.data.address,bank_account_number:t.props.data.bank_account_number,return_address:t.props.data.return_address,active:!!t.props.data.active}),n=()=>Mt({form:a,url:route("admin.supplier.save")});return(i,o)=>{const l=ee("i-head"),s=ee("authenticated-layout");return $(),X(se,null,[h(l,{title:e}),h(s,null,{title:b(()=>[N(P(e))]),"left-button":b(()=>[x("div",y3,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=u=>m(oe).get(i.route("admin.supplier.index")))})])]),default:b(()=>[h(gt,{class:"row justify-center"},{default:b(()=>[x("div",b3,[h(Dt,{class:"row",onSubmit:ue(n,["prevent"]),onValidationError:m(Gt)},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,null,{default:b(()=>o[9]||(o[9]=[x("div",{class:"text-subtitle1"},"Info Supplier",-1)])),_:1}),h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":o[1]||(o[1]=u=>m(a).id=u)},null,512),[[ba,m(a).id]]),h(fe,{autofocus:"",modelValue:m(a).name,"onUpdate:modelValue":o[2]||(o[2]=u=>m(a).name=u),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!m(a).errors.name,disable:m(a).processing,"error-message":m(a).errors.name,rules:[u=>u&&u.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),h(fe,{modelValue:m(a).phone,"onUpdate:modelValue":o[3]||(o[3]=u=>m(a).phone=u),modelModifiers:{trim:!0},type:"text",label:"No HP","lazy-rules":"",disable:m(a).processing,error:!!m(a).errors.phone,"error-message":m(a).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),h(fe,{modelValue:m(a).address,"onUpdate:modelValue":o[4]||(o[4]=u=>m(a).address=u),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Alamat","lazy-rules":"",disable:m(a).processing,error:!!m(a).errors.address,"error-message":m(a).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),h(fe,{modelValue:m(a).bank_account_number,"onUpdate:modelValue":o[5]||(o[5]=u=>m(a).bank_account_number=u),modelModifiers:{trim:!0},type:"text",label:"No Rek","lazy-rules":"",disable:m(a).processing,error:!!m(a).errors.bank_account_number,"error-message":m(a).errors.bank_account_number,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),h(fe,{modelValue:m(a).return_address,"onUpdate:modelValue":o[6]||(o[6]=u=>m(a).return_address=u),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Alamat Return","lazy-rules":"",disable:m(a).processing,error:!!m(a).errors.return_address,"error-message":m(a).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),x("div",_3,[h(Xn,{class:"full-width q-pl-none",modelValue:m(a).active,"onUpdate:modelValue":o[7]||(o[7]=u=>m(a).active=u),disable:m(a).processing,label:"Aktif"},null,8,["modelValue","disable"])])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:m(a).processing},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",disable:m(a).processing,onClick:o[8]||(o[8]=u=>m(oe).get(i.route("admin.supplier.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},w3=Object.freeze(Object.defineProperty({__proto__:null,default:S3},Symbol.toStringTag,{value:"Module"})),x3={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},T3={class:"q-pa-xs"},C3={class:"full-width row flex-center text-grey-8 q-gutter-sm"},k3={class:"flex justify-end"},hg="Pemasok",A3={__name:"Index",setup(r){const t=at(),e=B(!1),a=B([]),n=B(!0),i=B(null),o=B(null),l=Qt(o),s=xt({search:"",status:"active",...Pt()}),u=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),d=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left",sortable:!0},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!0},{name:"bank_account_number",label:"No Rek",field:"bank_account_number",align:"left",sortable:!0},{name:"action",align:"right"}],c=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];Je(()=>{p()});const f=_=>oa({message:`Hapus pemasok ${_.name}?`,url:route("admin.supplier.delete",_.id),fetchItemsCallback:p,loading:n}),p=(_=null)=>{Lt({pagination:u,filter:s,props:_,rows:a,url:route("admin.supplier.data"),loading:n,tableRef:i})},g=()=>p(),v=_=>oe.get(route("admin.supplier.detail",{id:_.id})),y=ve(()=>t.screen.gt.sm?d:d.filter(_=>_.name==="name"||_.name==="action"));return(_,S)=>{const w=ee("i-head"),T=ee("authenticated-layout");return $(),X(se,null,[h(w,{title:hg}),h(T,null,Jt({title:b(()=>[N(P(hg))]),"right-button":b(()=>[h(Y,{icon:e.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:S[0]||(S[0]=C=>e.value=!e.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:S[1]||(S[1]=C=>m(oe).get(_.route("admin.supplier.add")))})]),default:b(()=>[x("div",T3,[h(it,{class:"full-height-table",ref_key:"tableRef",ref:i,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":S[5]||(S[5]=C=>u.value=C),filter:s.search,loading:n.value,columns:y.value,rows:a.value,"rows-per-page-options":[10,25,50],style:ea({height:m(l)}),onRequest:p,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:C,message:k,filter:A})=>[x("div",C3,[x("span",null,P(k)+" "+P(A?" with term "+A:""),1)])]),body:b(C=>[h(tt,{props:C,class:Ze([C.row.active?"":"bg-red-1","cursor-pointer"]),onClick:k=>v(C.row)},{default:b(()=>[h(J,{key:"name",props:C,class:"wrap-column"},{default:b(()=>[x("div",null,[m(t).screen.lt.md?($(),K(U,{key:0,name:"person"})):Q("",!0),N(" "+P(C.row.name),1)]),m(t).screen.lt.md?($(),X(se,{key:0},[x("div",null,[h(U,{name:"phone"}),N(" "+P(C.row.phone),1)]),x("div",null,[h(U,{name:"credit_card"}),N(" "+P(C.row.bank_account_number),1)]),x("div",null,[h(U,{name:"home_pin"}),N(" "+P(C.row.address),1)])],64)):Q("",!0)]),_:2},1032,["props"]),h(J,{key:"phone",props:C},{default:b(()=>[N(P(C.row.phone),1)]),_:2},1032,["props"]),h(J,{key:"address",props:C},{default:b(()=>[N(P(C.row.address),1)]),_:2},1032,["props"]),h(J,{key:"bank_account_number",props:C},{default:b(()=>[N(P(C.row.bank_account_number),1)]),_:2},1032,["props"]),h(J,{key:"action",props:C},{default:b(()=>[x("div",k3,[h(Y,{disabled:!m(_a)(_.$CONSTANTS.USER_ROLE_ADMIN),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:S[4]||(S[4]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{clickable:"",onClick:ue(k=>m(oe).get(_.route("admin.supplier.duplicate",C.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"file_copy"})]),_:1}),h(j,{icon:"copy"},{default:b(()=>S[6]||(S[6]=[N(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{clickable:"",onClick:ue(k=>m(oe).get(_.route("admin.supplier.edit",C.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"edit"})]),_:1}),h(j,{icon:"edit"},{default:b(()=>S[7]||(S[7]=[N("Edit")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{onClick:ue(k=>f(C.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>S[8]||(S[8]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[e.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:b(()=>[x("div",x3,[h(Ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:s.status,"onUpdate:modelValue":[S[2]||(S[2]=C=>s.status=C),g],options:c,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:s.search,"onUpdate:modelValue":S[3]||(S[3]=C=>s.search=C),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},I3=Object.freeze(Object.defineProperty({__proto__:null,default:A3},Symbol.toStringTag,{value:"Module"})),D3={class:"q-gutter-sm"},M3={class:"q-gutter-sm"},P3={class:"row justify-center"},L3={class:"col col-md-6 q-pa-xs"},V3={class:"row"},R3={class:"detail"},E3={key:0},mg="Rincian Pengguna",N3={__name:"Detail",setup(r){const t=Ue();return(e,a)=>{const n=ee("i-head"),i=ee("authenticated-layout");return $(),X(se,null,[h(n,{title:mg}),h(i,null,{title:b(()=>[N(P(mg))]),"left-button":b(()=>[x("div",D3,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:a[0]||(a[0]=o=>e.$inertia.get(e.route("admin.user.index")))})])]),"right-button":b(()=>[x("div",M3,[h(Y,{icon:"edit",dense:"",color:"primary",onClick:a[1]||(a[1]=o=>e.$inertia.get(e.route("admin.user.edit",{id:m(t).props.data.id})))})])]),default:b(()=>[x("div",P3,[x("div",L3,[x("div",V3,[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,null,{default:b(()=>[a[17]||(a[17]=x("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),x("table",R3,[x("tbody",null,[x("tr",null,[a[2]||(a[2]=x("td",{style:{width:"125px"}},"ID Pengguna",-1)),a[3]||(a[3]=x("td",{style:{width:"1px"}},":",-1)),x("td",null,P(m(t).props.data.username),1)]),x("tr",null,[a[4]||(a[4]=x("td",null,"Nama Pengguna",-1)),a[5]||(a[5]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.name),1)]),x("tr",null,[a[6]||(a[6]=x("td",null,"Hak Akses",-1)),a[7]||(a[7]=x("td",null,":",-1)),x("td",null,P(e.$CONSTANTS.USER_ROLES[m(t).props.data.role]),1)]),x("tr",null,[a[8]||(a[8]=x("td",null,"Dibuat",-1)),a[9]||(a[9]=x("td",null,":",-1)),x("td",null,P(e.$dayjs(m(t).props.data.created_at).format("DD MMMM YY HH:mm:ss")),1)]),x("tr",null,[a[10]||(a[10]=x("td",null,"Diperbarui",-1)),a[11]||(a[11]=x("td",null,":",-1)),x("td",null,P(e.$dayjs(m(t).props.data.updated_at).format("DD MMMM YY HH:mm:ss")),1)]),x("tr",null,[a[12]||(a[12]=x("td",null,"Terakhir login",-1)),a[13]||(a[13]=x("td",null,":",-1)),x("td",null,P(m(t).props.data.last_login_datetime?e.$dayjs(m(t).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),m(t).props.data.last_activity_datetime?($(),X("tr",E3,[a[15]||(a[15]=x("td",null,"Aktifitas Terakhir",-1)),a[16]||(a[16]=x("td",null,":",-1)),x("td",null,[N(P(e.$dayjs(m(t).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),a[14]||(a[14]=x("br",null,null,-1)),N(P(m(t).props.data.last_activity_description),1)])])):Q("",!0)])])]),_:1})]),_:1})])])])]),_:1})],64)}}},O3=Object.freeze(Object.defineProperty({__proto__:null,default:N3},Symbol.toStringTag,{value:"Module"}));function $3(r){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(r)}const z3={class:"q-gutter-sm"},B3={class:"row justify-center"},q3={class:"col col-md-6 q-pa-xs"},G3={__name:"Editor",setup(r){const t=Et(window.CONSTANTS.USER_ROLES),e=Ue(),a=e.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=wt({id:e.props.data.id,name:e.props.data.name,username:e.props.data.username,password:"",role:e.props.data.role?e.props.data.role:t[0].value,active:!!e.props.data.active}),i=()=>Mt({form:n,url:route("admin.user.save")});return(o,l)=>{const s=ee("i-head"),u=ee("authenticated-layout");return $(),X(se,null,[h(s,{title:m(a)},null,8,["title"]),h(u,null,{title:b(()=>[N(P(m(a)),1)]),"left-button":b(()=>[x("div",z3,[h(Y,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:l[0]||(l[0]=d=>o.$inertia.get(o.route("admin.user.index")))})])]),default:b(()=>[x("div",B3,[x("div",q3,[h(Dt,{class:"row",onSubmit:ue(i,["prevent"])},{default:b(()=>[h(Me,{square:"",flat:"",bordered:"",class:"col"},{default:b(()=>[h(me,{class:"q-pt-none"},{default:b(()=>[ie(x("input",{type:"hidden",name:"id","onUpdate:modelValue":l[1]||(l[1]=d=>m(n).id=d)},null,512),[[ba,m(n).id]]),h(fe,{modelValue:m(n).name,"onUpdate:modelValue":l[2]||(l[2]=d=>m(n).name=d),modelModifiers:{trim:!0},label:"Nama",error:!!m(n).errors.name,disable:m(n).processing,"error-message":m(n).errors.name,rules:[d=>d&&d.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),h(fe,{modelValue:m(n).username,"onUpdate:modelValue":l[3]||(l[3]=d=>m(n).username=d),modelModifiers:{trim:!0},type:"text",label:"ID Pengguna","lazy-rules":"",disable:m(n).processing,error:!!m(n).errors.username,"error-message":m(n).errors.username,rules:[d=>d&&d.length>0||"ID Pengguna harus diisi.",d=>m($3)(d)||"ID Pengguna tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),h(fe,{modelValue:m(n).password,"onUpdate:modelValue":l[4]||(l[4]=d=>m(n).password=d),type:"password",label:"Kata Sandi","lazy-rules":"",disable:m(n).processing,error:!!m(n).errors.password,"error-message":m(n).errors.password,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),h(Ce,{modelValue:m(n).role,"onUpdate:modelValue":l[5]||(l[5]=d=>m(n).role=d),label:"Hak Akses",options:m(t),"map-options":"","emit-value":"","lazy-rules":"",disable:m(n).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!m(n).errors.role,"error-message":m(n).errors.role,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),h(Eu,{modelValue:m(n).active,"onUpdate:modelValue":l[6]||(l[6]=d=>m(n).active=d),disable:m(n).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),h(me,{class:"q-gutter-sm"},{default:b(()=>[h(Y,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:m(n).processing,onClick:i},null,8,["disable"]),h(Y,{icon:"cancel",label:"Batal",class:"text-black",disable:m(n).processing,onClick:l[7]||(l[7]=d=>m(oe).get(o.route("admin.user.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},F3=Object.freeze(Object.defineProperty({__proto__:null,default:G3},Symbol.toStringTag,{value:"Module"})),U3={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},H3={class:"q-pa-xs"},W3={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Y3={class:"elipsis",style:{"max-width":"200px"}},j3={class:"flex justify-end"},yg="Pengguna",Z3={__name:"Index",setup(r){const t=[{value:"all",label:"Semua"},...Et(window.CONSTANTS.USER_ROLES)],e=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],a=Ue(),n=at(),i=a.props.auth.user,o=B([]),l=B(!0),s=B(!1),u=xt({role:"all",status:"active",search:""}),d=B({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),c=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];Je(()=>{p()});const f=()=>p(),p=(T=null)=>Lt({pagination:d,props:T,rows:o,loading:l,filter:u,url:route("admin.user.data"),tableRef:_}),g=T=>oa({url:route("admin.user.delete",T.id),message:`Hapus pengguna ${T.username}?`,fetchItemsCallback:p,loading:l}),v=ve(()=>n.screen.gt.sm?c:c.filter(T=>T.name==="username"||T.name==="action")),y=T=>oe.get(route("admin.user.detail",T.id)),_=B(null),S=B(null),w=Qt(S);return(T,C)=>{const k=ee("i-head"),A=ee("authenticated-layout");return $(),X(se,null,[h(k,{title:yg}),h(A,null,Jt({title:b(()=>[N(P(yg))]),"right-button":b(()=>[h(Y,{icon:s.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:C[0]||(C[0]=I=>s.value=!s.value)},null,8,["icon"]),h(Y,{icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:C[1]||(C[1]=I=>m(oe).get(T.route("admin.user.add")))})]),default:b(()=>[x("div",H3,[h(it,{ref_key:"tableRef",ref:_,class:"full-height-table",style:ea({height:m(w)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:d.value,"onUpdate:pagination":C[6]||(C[6]=I=>d.value=I),filter:u.search,loading:l.value,columns:v.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:b(()=>[h($t,{showing:"",color:"red"})]),"no-data":b(({icon:I,message:M,term:D})=>[x("div",W3,[x("span",null,P(M)+" "+P(D?" with term "+D:""),1)])]),body:b(I=>[h(tt,{props:I,class:Ze([I.row.active?"":"bg-red-1","cursor-pointer"]),onClick:M=>y(I.row)},{default:b(()=>[h(J,{key:"username",props:I},{default:b(()=>[x("div",null,P(I.row.username),1),m(n).screen.gt.sm?Q("",!0):($(),X(se,{key:0},[x("div",null,[h(U,{name:"person"}),N(" "+P(I.row.name),1)]),x("div",Y3,[h(U,{name:"group"}),x("span",null,P(T.$CONSTANTS.USER_ROLES[I.row.role]),1)])],64))]),_:2},1032,["props"]),h(J,{key:"name",props:I},{default:b(()=>[N(P(I.row.name),1)]),_:2},1032,["props"]),h(J,{key:"role",props:I,align:"center"},{default:b(()=>[x("span",null,P(T.$CONSTANTS.USER_ROLES[I.row.role]),1)]),_:2},1032,["props"]),h(J,{key:"action",props:I},{default:b(()=>[x("div",j3,[h(Y,{disable:I.row.id==m(i).id||I.row.username=="admin",icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:C[5]||(C[5]=ue(()=>{},["stop"]))},{default:b(()=>[h(ia,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:b(()=>[h(It,{style:{width:"200px"}},{default:b(()=>[ie(($(),K(pe,{clickable:"",onClick:ue(M=>m(oe).get(T.route("admin.user.duplicate",I.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"file_copy"})]),_:1}),h(j,{icon:"copy"},{default:b(()=>C[7]||(C[7]=[N(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{clickable:"",onClick:ue(M=>m(oe).get(T.route("admin.user.edit",I.row.id)),["stop"])},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"edit"})]),_:1}),h(j,{icon:"edit"},{default:b(()=>C[8]||(C[8]=[N("Edit")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]]),ie(($(),K(pe,{onClick:ue(M=>g(I.row),["stop"]),clickable:""},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"delete_forever"})]),_:1}),h(j,null,{default:b(()=>C[9]||(C[9]=[N("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[Se],[Ae]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[s.value?{name:"header",fn:b(()=>[h(Ft,{class:"filter-bar",ref_key:"filterToolbarRef",ref:S},{default:b(()=>[x("div",U3,[h(Ce,{modelValue:u.role,"onUpdate:modelValue":[C[2]||(C[2]=I=>u.role=I),f],class:"custom-select col-xs-12 col-sm-2",options:t,label:"Role",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),h(Ce,{modelValue:u.status,"onUpdate:modelValue":[C[3]||(C[3]=I=>u.status=I),f],class:"custom-select col-xs-12 col-sm-2",options:e,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),h(fe,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":C[4]||(C[4]=I=>u.search=I),placeholder:"Cari",clearable:""},{append:b(()=>[h(U,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},X3=Object.freeze(Object.defineProperty({__proto__:null,default:Z3},Symbol.toStringTag,{value:"Module"})),K3=$r({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(r,{slots:t,emit:e}){let a=!1,n,i,o=null,l=null,s,u;function d(){n&&n(),n=null,a=!1,o!==null&&(clearTimeout(o),o=null),l!==null&&(clearTimeout(l),l=null),i!==void 0&&i.removeEventListener("transitionend",s),s=null}function c(v,y,_){y!==void 0&&(v.style.height=`${y}px`),v.style.transition=`height ${r.duration}ms cubic-bezier(.25, .8, .50, 1)`,a=!0,n=_}function f(v,y){v.style.overflowY=null,v.style.height=null,v.style.transition=null,d(),y!==u&&e(y)}function p(v,y){let _=0;i=v,a===!0?(d(),_=v.offsetHeight===v.scrollHeight?0:void 0):(u="hide",v.style.overflowY="hidden"),c(v,_,y),o=setTimeout(()=>{o=null,v.style.height=`${v.scrollHeight}px`,s=S=>{l=null,(Object(S)!==S||S.target===v)&&f(v,"show")},v.addEventListener("transitionend",s),l=setTimeout(s,r.duration*1.1)},100)}function g(v,y){let _;i=v,a===!0?d():(u="show",v.style.overflowY="hidden",_=v.scrollHeight),c(v,_,y),o=setTimeout(()=>{o=null,v.style.height=0,s=S=>{l=null,(Object(S)!==S||S.target===v)&&f(v,"hide")},v.addEventListener("transitionend",s),l=setTimeout(s,r.duration*1.1)},100)}return Eo(()=>{a===!0&&d()}),()=>$e(Sg,{css:!1,appear:r.appear,onEnter:p,onLeave:g},t.default)}}),ur=$b({}),Q3=Object.keys(yh),dr=$r({name:"QExpansionItem",props:{...yh,...Bb,...wg,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...zb,"click","afterShow","afterHide"],setup(r,{slots:t,emit:e}){const{proxy:{$q:a}}=gi(),n=xg(r,a),i=B(r.modelValue!==null?r.modelValue:r.defaultOpened),o=B(null),l=qb(),{show:s,hide:u,toggle:d}=Gb({showing:i});let c,f;const p=ve(()=>`q-expansion-item q-item-type q-expansion-item--${i.value===!0?"expanded":"collapsed"} q-expansion-item--${r.popup===!0?"popup":"standard"}`),g=ve(()=>r.contentInsetLevel===void 0?null:{["padding"+(a.lang.rtl===!0?"Right":"Left")]:r.contentInsetLevel*56+"px"}),v=ve(()=>r.disable!==!0&&(r.href!==void 0||r.to!==void 0&&r.to!==null&&r.to!=="")),y=ve(()=>{const q={};return Q3.forEach(Z=>{q[Z]=r[Z]}),q}),_=ve(()=>v.value===!0||r.expandIconToggle!==!0),S=ve(()=>r.expandedIcon!==void 0&&i.value===!0?r.expandedIcon:r.expandIcon||a.iconSet.expansionItem[r.denseToggle===!0?"denseIcon":"icon"]),w=ve(()=>r.disable!==!0&&(v.value===!0||r.expandIconToggle===!0)),T=ve(()=>({expanded:i.value===!0,detailsId:l.value,toggle:d,show:s,hide:u})),C=ve(()=>{const q=r.toggleAriaLabel!==void 0?r.toggleAriaLabel:a.lang.label[i.value===!0?"collapse":"expand"](r.label);return{role:"button","aria-expanded":i.value===!0?"true":"false","aria-controls":l.value,"aria-label":q}});ot(()=>r.group,q=>{f!==void 0&&f(),q!==void 0&&L()});function k(q){v.value!==!0&&d(q),e("click",q)}function A(q){q.keyCode===13&&I(q,!0)}function I(q,Z){Z!==!0&&o.value!==null&&o.value.focus(),d(q),Wn(q)}function M(){e("afterShow")}function D(){e("afterHide")}function L(){c===void 0&&(c=Fb()),i.value===!0&&(ur[r.group]=c);const q=ot(i,H=>{H===!0?ur[r.group]=c:ur[r.group]===c&&delete ur[r.group]}),Z=ot(()=>ur[r.group],(H,F)=>{F===c&&H!==void 0&&H!==c&&u()});f=()=>{q(),Z(),ur[r.group]===c&&delete ur[r.group],f=void 0}}function E(){const q={class:[`q-focusable relative-position cursor-pointer${r.denseToggle===!0&&r.switchToggleSide===!0?" items-end":""}`,r.expandIconClass],side:r.switchToggleSide!==!0,avatar:r.switchToggleSide},Z=[$e(U,{class:"q-expansion-item__toggle-icon"+(r.expandedIcon===void 0&&i.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:S.value})];return w.value===!0&&(Object.assign(q,{tabindex:0,...C.value,onClick:I,onKeyup:A}),Z.unshift($e("div",{ref:o,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),$e(j,q,()=>Z)}function R(){let q;return t.header!==void 0?q=[].concat(t.header(T.value)):(q=[$e(j,()=>[$e(Le,{lines:r.labelLines},()=>r.label||""),r.caption?$e(Le,{lines:r.captionLines,caption:!0},()=>r.caption):null])],r.icon&&q[r.switchToggleSide===!0?"push":"unshift"]($e(j,{side:r.switchToggleSide===!0,avatar:r.switchToggleSide!==!0},()=>$e(U,{name:r.icon})))),r.disable!==!0&&r.hideExpandIcon!==!0&&q[r.switchToggleSide===!0?"unshift":"push"](E()),q}function V(){const q={ref:"item",style:r.headerStyle,class:r.headerClass,dark:n.value,disable:r.disable,dense:r.dense,insetLevel:r.headerInsetLevel};return _.value===!0&&(q.clickable=!0,q.onClick=k,Object.assign(q,v.value===!0?y.value:C.value)),$e(pe,q,R)}function z(){return ie($e("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:g.value,id:l.value},hi(t.default)),[[hh,i.value]])}function G(){const q=[V(),$e(K3,{duration:r.duration,onShow:M,onHide:D},z)];return r.expandSeparator===!0&&q.push($e(Sa,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:n.value}),$e(Sa,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:n.value})),q}return r.group!==void 0&&L(),Eo(()=>{f!==void 0&&f()}),()=>$e("div",{class:p.value},[$e("div",{class:"q-expansion-item__container relative-position"},G())])}}),J3={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},e$={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},t$={class:"text-bold"},a$={class:"text-grey-8 text-caption"},r$={class:"absolute-bottom text-grey-6 q-pa-md"},ks="amanah-pos.layout.left-drawer-open",n$={__name:"AuthenticatedLayout",setup(r,{expose:t}){const e=at(),a=Ue(),n=B(JSON.parse(localStorage.getItem(ks))),i=B(!1),o=()=>n.value=!n.value,l=()=>{n.value=!1};return ot(n,s=>{localStorage.setItem(ks,s)}),Je(()=>{n.value=JSON.parse(localStorage.getItem(ks)),e.screen.lt.md&&(n.value=!1)}),t({hideDrawer:l}),(s,u)=>($(),K(Xb,{view:"lHh LpR lFf"},{default:b(()=>[h(Ub,null,{default:b(()=>[h(Ft,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:b(()=>[n.value?Q("",!0):($(),K(Y,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:o},{default:b(()=>[h(U,{class:"material-symbols-outlined"},{default:b(()=>u[21]||(u[21]=[N("dock_to_right")])),_:1})]),_:1})),cr(s.$slots,"left-button",{},void 0,!0),h(Hb,{class:Ze({"q-ml-sm":n.value}),style:{"font-size":"18px"}},{default:b(()=>[cr(s.$slots,"title",{},()=>[N(P(s.$config.APP_NAME),1)],!0)]),_:3},8,["class"]),cr(s.$slots,"right-button",{},void 0,!0)]),_:3}),cr(s.$slots,"header",{},void 0,!0)]),_:3}),h(Wb,{breakpoint:768,modelValue:n.value,"onUpdate:modelValue":u[20]||(u[20]=d=>n.value=d),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:b(()=>[x("div",J3,[x("div",e$,[h(Yb,{modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=d=>i.value=d),class:Ze(["profile-btn text-bold",{"profile-btn-active":i.value}]),flat:"",label:m(a).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:b(()=>[h(It,{id:"profile-btn-popup",style:{color:"#444"}},{default:b(()=>[h(pe,null,{default:b(()=>[h(nn,{style:{"margin-left":"-15px"}},{default:b(()=>[h(U,{name:"person"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>[x("div",t$,P(m(a).props.auth.user.name),1),x("div",a$,P(s.$CONSTANTS.USER_ROLES[m(a).props.auth.user.role])+" @ "+P(m(a).props.company.name),1)]),_:1})]),_:1})]),_:1}),h(Sa),ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/settings/profile"),onClick:u[0]||(u[0]=d=>m(oe).get(s.route("admin.profile.edit")))},{default:b(()=>[h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>[h(U,{name:"manage_accounts",class:"q-mr-sm"}),u[22]||(u[22]=N(" Profil Saya"))]),_:1})]),_:1})]),_:1},8,["active"])),[[Ae],[Se]]),s.$can("admin.company-profile.edit")?ie(($(),K(pe,{key:0,class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/settings/company-profile"),onClick:u[1]||(u[1]=d=>m(oe).get(s.route("admin.company-profile.edit")))},{default:b(()=>[h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>[h(U,{name:"home_work",class:"q-mr-sm"}),u[23]||(u[23]=N(" Profil Perusahaan"))]),_:1})]),_:1})]),_:1},8,["active"])),[[Ae],[Se]]):Q("",!0),h(Sa),ie(($(),K(pe,{clickable:"",style:{color:"inherit"},href:s.route("admin.auth.logout")},{default:b(()=>[h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>[h(U,{name:"logout",class:"q-mr-sm"}),u[24]||(u[24]=N(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[Ae],[Se]])]),_:1})]),_:1},8,["modelValue","label","class"]),n.value?($(),K(Y,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:o},{default:b(()=>[h(U,{name:"dock_to_right"})]),_:1})):Q("",!0)])]),h(jb,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:b(()=>[h(It,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:b(()=>[ie(($(),K(pe,{clickable:"",active:s.$page.url.startsWith("/admin/dashboard"),onClick:u[3]||(u[3]=d=>m(oe).get(s.route("admin.dashboard")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"dashboard"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[25]||(u[25]=[N("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]),h(Sa),s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_ADMIN||s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_CASHIER?($(),K(dr,{key:0,icon:"storefront",label:"Penjualan","default-opened":s.$page.url.startsWith("/admin/sales-orders")||s.$page.url.startsWith("/admin/customers")},{default:b(()=>[ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/sales-orders"),onClick:u[4]||(u[4]=d=>m(oe).get(s.route("admin.sales-order.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"shopping_cart"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[26]||(u[26]=[N("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]),ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/customers"),onClick:u[5]||(u[5]=d=>m(oe).get(s.route("admin.customer.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"people"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[27]||(u[27]=[N("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]])]),_:1},8,["default-opened"])):Q("",!0),s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_ADMIN||s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_CASHIER?($(),K(dr,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":s.$page.url.startsWith("/admin/purchase-orders")||s.$page.url.startsWith("/admin/suppliers")},{default:b(()=>[ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/purchase-orders"),onClick:u[6]||(u[6]=d=>m(oe).get(s.route("admin.purchase-order.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"shopping_cart"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[28]||(u[28]=[N("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]),ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/suppliers"),onClick:u[7]||(u[7]=d=>m(oe).get(s.route("admin.supplier.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"people"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[29]||(u[29]=[N("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]])]),_:1},8,["default-opened"])):Q("",!0),s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_ADMIN||s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_CASHIER?($(),K(dr,{key:2,icon:"inventory_2",label:"Inventori","default-opened":s.$page.url.startsWith("/admin/products")||s.$page.url.startsWith("/admin/product-categories")||s.$page.url.startsWith("/admin/stock-adjustments")},{default:b(()=>[ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/stock-adjustments"),onClick:u[8]||(u[8]=d=>m(oe).get(s.route("admin.stock-adjustment.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"swap_vert"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[30]||(u[30]=[N("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]),ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/products"),onClick:u[9]||(u[9]=d=>m(oe).get(s.route("admin.product.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"box"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[31]||(u[31]=[N("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]),ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/product-categories"),onClick:u[10]||(u[10]=d=>m(oe).get(s.route("admin.product-category.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"category"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[32]||(u[32]=[N("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]])]),_:1},8,["default-opened"])):Q("",!0),h(Sa),s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_ADMIN?($(),K(dr,{key:3,icon:"wallet",label:"Wallet","default-opened":s.$page.url.startsWith("/admin/customer-wallet-transactions")||s.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:b(()=>[ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:u[11]||(u[11]=d=>m(oe).get(s.route("admin.customer-wallet-transaction-confirmation.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"add_task"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[33]||(u[33]=[N("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]),ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url=="/admin/customer-wallet-transactions",onClick:u[12]||(u[12]=d=>m(oe).get(s.route("admin.customer-wallet-transaction.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"moving"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[34]||(u[34]=[N("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]])]),_:1},8,["default-opened"])):Q("",!0),h(Sa),s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_ADMIN?($(),K(dr,{key:4,icon:"finance",label:"Keuangan","default-opened":s.$page.url.startsWith("/admin/finance-accounts")||s.$page.url.startsWith("/admin/finance-transactions")},{default:b(()=>[ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/finance-transactions"),onClick:u[13]||(u[13]=d=>m(oe).get(s.route("admin.finance-transaction.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"moving"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[35]||(u[35]=[N("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]),ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/finance-accounts"),onClick:u[14]||(u[14]=d=>m(oe).get(s.route("admin.finance-account.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"groups_2"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[36]||(u[36]=[N("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]])]),_:1},8,["default-opened"])):Q("",!0),s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_ADMIN?($(),K(dr,{key:5,icon:"paid",label:"Operasional","default-opened":s.$page.url.startsWith("/admin/operational-costs")||s.$page.url.startsWith("/admin/operational-cost-categories")},{default:b(()=>[ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/operational-costs"),onClick:u[15]||(u[15]=d=>m(oe).get(s.route("admin.operational-cost.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"request_quote"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[37]||(u[37]=[N("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]),ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/operational-cost-categories"),onClick:u[16]||(u[16]=d=>m(oe).get(s.route("admin.operational-cost-category.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"category"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[38]||(u[38]=[N("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]])]),_:1},8,["default-opened"])):Q("",!0),h(Sa),h(dr,{icon:"settings",label:"Pengaturan","default-opened":s.$page.url.startsWith("/admin/settings")},{default:b(()=>[s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_ADMIN?ie(($(),K(pe,{key:0,class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/settings/users"),onClick:u[17]||(u[17]=d=>m(oe).get(s.route("admin.user.index")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"group"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[39]||(u[39]=[N("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]):Q("",!0),ie(($(),K(pe,{class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/settings/profile"),onClick:u[18]||(u[18]=d=>m(oe).get(s.route("admin.profile.edit")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"manage_accounts"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[40]||(u[40]=[N("Profil Saya")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]),s.$page.props.auth.user.role==s.$CONSTANTS.USER_ROLE_ADMIN?ie(($(),K(pe,{key:1,class:"subnav",clickable:"",active:s.$page.url.startsWith("/admin/settings/company-profile"),onClick:u[19]||(u[19]=d=>m(oe).get(s.route("admin.company-profile.edit")))},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"apartment"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[41]||(u[41]=[N("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[Se]]):Q("",!0)]),_:1},8,["default-opened"]),h(Sa),ie(($(),K(pe,{clickable:"",style:{color:"inherit"},href:s.route("customer.auth.logout")},{default:b(()=>[h(j,{avatar:""},{default:b(()=>[h(U,{name:"logout"})]),_:1}),h(j,null,{default:b(()=>[h(Le,null,{default:b(()=>u[42]||(u[42]=[N("Logout")])),_:1})]),_:1})]),_:1},8,["href"])),[[Ae],[Se]]),x("div",r$," © 2025 - "+P(s.$config.APP_NAME+" v"+s.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),h(Zb,{class:"bg-grey-1"},{default:b(()=>[h(gt,null,{default:b(()=>[cr(s.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),cr(s.$slots,"footer",{},void 0,!0)]),_:3}))}},i$=Nr(n$,[["__scopeId","data-v-016f05cb"]]),o$={__name:"GuestLayout",setup(r){return(t,e)=>($(),K(Kb,null,{default:b(()=>[cr(t.$slots,"default")]),_:3}))}};Qb({layouts:{authenticated:i$,guest:o$},pagesGlob:Object.assign({"./pages/About.vue":r_,"./pages/_examples/Autocomplete1.vue":l_,"./pages/auth/Login.vue":p_,"./pages/company-profile/Edit.vue":b_,"./pages/company-profile/partials/CompanyInfoForm.vue":v_,"./pages/customer-wallet-transaction-confirmation/Index.vue":T_,"./pages/customer-wallet-transaction/Adjustment.vue":A_,"./pages/customer-wallet-transaction/Editor.vue":P_,"./pages/customer-wallet-transaction/Index.vue":$_,"./pages/customer/Detail.vue":fS,"./pages/customer/Editor.vue":hS,"./pages/customer/Index.vue":wS,"./pages/dashboard/Index.vue":oL,"./pages/dashboard/cards/ChartCard.vue":zL,"./pages/dashboard/cards/SummaryCard.vue":ZL,"./pages/dashboard/cards/TopCard.vue":JL,"./pages/finance-account/Detail.vue":uV,"./pages/finance-account/Editor.vue":gV,"./pages/finance-account/Index.vue":kV,"./pages/finance-transaction/Editor.vue":MV,"./pages/finance-transaction/Index.vue":BV,"./pages/operational-cost-category/Editor.vue":UV,"./pages/operational-cost-category/Index.vue":KV,"./pages/operational-cost/Detail.vue":oR,"./pages/operational-cost/Editor.vue":pR,"./pages/operational-cost/Index.vue":wR,"./pages/product-category/Editor.vue":kR,"./pages/product-category/Index.vue":VR,"./pages/product/Detail.vue":KR,"./pages/product/Editor.vue":aE,"./pages/product/Index.vue":fE,"./pages/profile/Edit.vue":bE,"./pages/profile/partials/UpdatePasswordForm.vue":pE,"./pages/profile/partials/UpdateProfileInformationForm.vue":vE,"./pages/purchase-order/Editor.vue":eN,"./pages/purchase-order/Editor_v1.vue":rN,"./pages/purchase-order/Index.vue":fN,"./pages/purchase-order/editor/ConfirmDeleteDialog.vue":UE,"./pages/purchase-order/editor/ItemsListTable.vue":EE,"./pages/purchase-order/editor/SupplierEditorDialog.vue":HE,"./pages/purchase-order/editor/TransactionHeader.vue":ME,"./pages/purchase-order/editor/TransactionSummary.vue":GE,"./pages/sales-order/Detail.vue":gN,"./pages/sales-order/Editor.vue":yO,"./pages/sales-order/Index.vue":IO,"./pages/sales-order/editor/HelpDialog.vue":GN,"./pages/sales-order/editor/ItemEditorDialog.vue":$N,"./pages/sales-order/editor/ItemsListTable.vue":_N,"./pages/sales-order/editor/OrderInfoDialog.vue":YN,"./pages/sales-order/editor/PaymentDialog.vue":PN,"./pages/stock-adjustment/Create.vue":OO,"./pages/stock-adjustment/Detail.vue":YO,"./pages/stock-adjustment/Editor.vue":e3,"./pages/stock-adjustment/Index.vue":d3,"./pages/supplier/Detail.vue":m3,"./pages/supplier/Editor.vue":w3,"./pages/supplier/Index.vue":I3,"./pages/user/Detail.vue":O3,"./pages/user/Editor.vue":F3,"./pages/user/Index.vue":X3})});
