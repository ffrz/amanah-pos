import{r as R,a as J,c as I,o as d,w as a,b as t,d as e,e as h,f as k,Q as ce,t as r,u as l,g as L,h as De,i as oa,T as Qe,j as Tn,k as pe,l as Ce,m as Je,n as G,p as st,q as ie,s as ae,v as b,x as Wt,y as S,z as re,A as N,B as tt,F as W,C as We,D as te,E as wt,G as $t,N as Y,H as Pn,I as Sa,J as lo,K as Ot,L as Z,M as Xt,O as he,R as se,P as qe,S as oo,U as Rn,V as On,W as Bt,X as It,Y as Va,Z as Ra,_ as Dn,$ as Ye,a0 as In,a1 as Un,a2 as jn,a3 as At,a4 as En,a5 as An,a6 as qa,a7 as Kt,a8 as Ca,a9 as Ha,aa as Mn,ab as da,ac as Ka,ad as Nn,ae as Ya,af as Bn,ag as no,ah as zn,ai as Fn,aj as Ln,ak as Ia,al as Ua,am as Hn,an as Et,ao as be,ap as Ue,aq as ze,ar as Fe,as as we,at as Pe,au as Q,av as xe,aw as rt,ax as Ke,ay as Ee,az as Qt,aA as Ve,aB as at,aC as Be,aD as Ge,aE as Le,aF as Te,aG as et,aH as je,aI as oe,aJ as z,aK as me,aL as ot,aM as Me,aN as na,aO as ma,aP as Re,aQ as Ne,aR as Xe,aS as Wa,aT as Rt,aU as ca,aV as ta,aW as ja,aX as sa,aY as xt,aZ as Kn,a_ as aa,a$ as Yn,b0 as Wn,b1 as so,b2 as Qn,b3 as Jn,b4 as Gn,b5 as Xn,b6 as Qa,b7 as Zn,b8 as es,b9 as ts,ba as as,bb as Jt,bc as Ie,bd as bt,be as ls,bf as Ja,bg as os,bh as ns,bi as ss,bj as rs,bk as is,bl as ds,bm as us,bn as ge,bo as ht,bp as ea,bq as la,br as ut,bs as ms,bt as cs,bu as ps,bv as fs,bw as gs,bx as bs,by as Ea,bz as vs,bA as qt,bB as gt,bC as Aa,bD as Oa,bE as ro,bF as lt,bG as Ft,bH as io,bI as Gt,bJ as uo,bK as _s,bL as vt,bM as pt,bN as ft,bO as St,bP as mo,bQ as co,bR as po,bS as fo,bT as pa,bU as Mt,bV as ys,bW as ks,bX as ws,bY as go,bZ as hs,b_ as $s,b$ as xs,c0 as Ga,c1 as Ss,c2 as Vs,c3 as qs,c4 as Cs,c5 as Ts,c6 as Ps,c7 as Rs,c8 as Os,c9 as Ds}from"./virtual_pwa-register-DJCmhMcD.js";const Is={class:"q-ma-md"},Us={key:0},js={__name:"Autocomplete1",setup(p){const s=R(null),u=R([]);let o=null;const i=(n,f)=>{if(n.length<2){f(()=>{u.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{De.get(`/web-api/customers?q=${n}`).then(v=>{const c=v.data.data.map(m=>({label:`${m.code} - ${m.name}`,value:m.id,data:m}));f(()=>{u.value=c})}).catch(v=>{console.error("Gagal mengambil data pelanggan:",v),f(()=>{u.value=[]})})})};return(n,f)=>{const v=J("guest-layout");return d(),I(v,null,{default:a(()=>[t("div",Is,[e(ce,{class:"full-width",modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=c=>s.value=c),"use-input":"",label:"Cari Pelanggan",options:u.value,onFilter:i,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),s.value?(d(),h("div",Us," Saldo: Rp. "+r(l(L)(s.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},Es=Object.freeze(Object.defineProperty({__proto__:null,default:js},Symbol.toStringTag,{value:"Module"})),As={style:{"margin-left":"-10px"}},fa={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(p,{emit:s}){const u=p,o=s;return(i,n)=>(d(),h("div",As,[e(oa,{class:"full-width q-pl-none","model-value":u.modelValue,disable:u.disable,label:u.label,"onUpdate:modelValue":n[0]||(n[0]=f=>o("update:modelValue",f))},null,8,["model-value","disable","label"])]))}};function Da(p){return p instanceof File||p instanceof Blob||p instanceof FileList&&p.length>0||p instanceof FormData&&Array.from(p.values()).some(s=>Da(s))||typeof p=="object"&&p!==null&&Object.values(p).some(s=>Da(s))}function Ms(p,s=null){const u=Qe(p,s);let o=f=>f,i=null;const n={transform:f=>v=>(o=v,f),submit:f=>(v,c,m={})=>{u.wasSuccessful=!1,u.recentlySuccessful=!1,u.clearErrors(),clearTimeout(i),m.onBefore&&m.onBefore(),u.processing=!0,m.onStart&&m.onStart();const g=o(u.data());axios[v](c,g,{headers:{"Content-Type":Da(g)?"multipart/form-data":"application/json"},onUploadProgress:_=>{u.progress=_,m.onProgress&&m.onProgress(_)}}).then(_=>{u.processing=!1,u.progress=null,u.clearErrors(),u.wasSuccessful=!0,u.recentlySuccessful=!0,i=setTimeout(()=>u.recentlySuccessful=!1,2e3),m.onSuccess&&m.onSuccess(_.data),u.defaults(Tn(u.data())),u.isDirty=!1}).catch(_=>{var y;u.processing=!1,u.progress=null,u.clearErrors(),((y=_.response)==null?void 0:y.status)===422&&Object.keys(_.response.data.errors).forEach($=>{u.setError($,_.response.data.errors[$][0])}),m.onError&&m.onError(_)}).finally(()=>{u.processing=!1,u.progress=null,m.onFinish&&m.onFinish()})}};return new Proxy(u,{get:(f,v,c)=>Object.keys(n).indexOf(v)<0?f[v]:n[v](c)})}const Ns={class:"column"},Bs={class:"row"},zs={class:"q-my-sm text-grey-7 text-subtitle1 text-bold"},Fs={class:"flex justify-center"},Ls={__name:"Login",setup(p){let s=Ms({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const u=pe();console.log(u.props.data);const o=()=>st({form:s,url:route("admin.auth.login"),onSuccess:()=>{s.processing=!0,window.location.href=route("admin.dashboard")}}),i=R(!1);return(n,f)=>{const v=J("i-head"),c=J("guest-layout");return d(),h(W,null,[e(v,{title:"Login"}),e(c,null,{default:a(()=>[e(Ce,{class:"row justify-center items-center"},{default:a(()=>[t("div",Ns,[t("div",Bs,[e(Je,{class:"q-gutter-md",onSubmit:G(o,["prevent"])},{default:a(()=>[e(ie,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:a(()=>[e(ae,{class:"text-center"},{default:a(()=>[t("div",zs,[b(" Login ke "+r(l(u).props.company.name)+" ",1),t("div",Fs,[e(Wt,{size:"100px",class:"q-my-none"},{default:a(()=>[e(S,{name:"badge",color:"grey"})]),_:1})])]),e(re,{modelValue:l(s).username,"onUpdate:modelValue":f[0]||(f[0]=m=>l(s).username=m),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!l(s).errors.username,autocomplete:"username","error-message":l(s).errors.username,disable:l(s).processing,rules:[m=>m&&m.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:a(()=>[e(S,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(re,{modelValue:l(s).password,"onUpdate:modelValue":f[2]||(f[2]=m=>l(s).password=m),type:i.value?"text":"password",label:"Kata Sandi",error:!!l(s).errors.password,autocomplete:"current-password","error-message":l(s).errors.password,"lazy-rules":"",disable:l(s).processing,rules:[m=>m&&m.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:a(()=>[e(N,{dense:"",flat:"",round:"",onClick:f[1]||(f[1]=m=>i.value=!i.value)},{default:a(()=>[e(S,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(fa,{class:"q-mt-sm",modelValue:l(s).remember,"onUpdate:modelValue":f[3]||(f[3]=m=>l(s).remember=m),disable:l(s).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(tt,null,{default:a(()=>[e(N,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:l(s).processing,loading:l(s).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Hs=Object.freeze(Object.defineProperty({__proto__:null,default:Ls},Symbol.toStringTag,{value:"Module"})),Ks={class:"q-gutter-sm"},Ys={class:"col col-md-6 q-pa-xs"},Ws={class:"detail q-mt-md"},Qs={key:0},Js={class:"text-bold"},Xa="Tutup Sesi Kasir",Gs={__name:"Close",setup(p){const s=pe(),u=Qe({closing_notes:s.props.data.closing_notes,closing_balance:parseFloat(s.props.data.closing_balance)}),o=()=>st({form:u,url:route("admin.cashier-session.close",{id:s.props.data.id})});return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),h(W,null,[e(f,{title:Xa}),e(v,null,{title:a(()=>[b(r(Xa))]),"left-button":a(()=>[t("div",Ks,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Ys,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:l(We)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":n[1]||(n[1]=c=>l(u).id=c)},null,512),[[wt,l(u).id]]),e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[t("table",Ws,[t("tbody",null,[t("tr",null,[n[4]||(n[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),n[5]||(n[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.id),1)]),t("tr",null,[n[6]||(n[6]=t("td",null,"Terminal",-1)),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"Kasir",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.user.username)+" - "+r(l(s).props.data.user.name),1)]),t("tr",null,[n[10]||(n[10]=t("td",null,"Saldo Awal",-1)),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,r(l($t)(l(s).props.data.opening_balance)),1)]),l(s).props.data.opening_notes?(d(),h("tr",Qs,[n[12]||(n[12]=t("td",null,"Catatan Buka",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.opening_notes),1)])):k("",!0),t("tr",null,[n[14]||(n[14]=t("td",null,"Total Penjualan",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,r(l($t)(l(s).props.data.total_sales)),1)]),t("tr",null,[n[16]||(n[16]=t("td",null,"Total Pemasukan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,r(l($t)(l(s).props.data.total_income)),1)]),t("tr",null,[n[18]||(n[18]=t("td",null,"Total Pengeluaran",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,r(l($t)(l(s).props.data.total_expense)),1)]),t("tr",null,[n[21]||(n[21]=t("td",null,"Saldo Akhir",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,[t("div",Js,r(l($t)(l(s).props.data.closing_balance)),1),n[20]||(n[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(re,{modelValue:l(u).closing_notes,"onUpdate:modelValue":n[2]||(n[2]=c=>l(u).closing_notes=c),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(u).processing,error:!!l(u).errors.closing_notes,"error-message":l(u).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:l(u).processing},null,8,["disable"]),e(N,{label:"Batal",icon:"cancel",disable:l(u).processing,onClick:n[3]||(n[3]=c=>l(Y).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Xs=Object.freeze(Object.defineProperty({__proto__:null,default:Gs},Symbol.toStringTag,{value:"Module"}));let Zs=0;const er=["click","keydown"],tr={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Zs++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ar(p,s,u,o){const i=Pn(lo,Sa);if(i===Sa)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Sa;const{proxy:n}=Ot(),f=R(null),v=R(null),c=R(null),m=Z(()=>p.disable===!0||p.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},p.ripple===!0?{}:p.ripple)),g=Z(()=>i.currentModel.value===p.name),_=Z(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(g.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(p.icon&&p.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(p.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(p.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),y=Z(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(p.contentClass!==void 0?` ${p.contentClass}`:"")),$=Z(()=>p.disable===!0||i.hasFocus.value===!0||g.value===!1&&i.hasActiveTab.value===!0?-1:p.tabindex||0);function V(U,P){var q;if(P!==!0&&(U==null?void 0:U.qAvoidFocus)!==!0&&((q=f.value)==null||q.focus()),p.disable!==!0){i.updateModel({name:p.name}),u("click",U);return}}function C(U){Rn(U,[13,32])?V(U,!0):On(U)!==!0&&U.keyCode>=35&&U.keyCode<=40&&U.altKey!==!0&&U.metaKey!==!0&&i.onKbdNavigate(U.keyCode,n.$el)===!0&&Bt(U),u("keydown",U)}function E(){const U=i.tabProps.value.narrowIndicator,P=[],q=qe("div",{ref:c,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});p.icon!==void 0&&P.push(qe(S,{class:"q-tab__icon",name:p.icon})),p.label!==void 0&&P.push(qe("div",{class:"q-tab__label"},p.label)),p.alert!==!1&&P.push(p.alertIcon!==void 0?qe(S,{class:"q-tab__alert-icon",color:p.alert!==!0?p.alert:void 0,name:p.alertIcon}):qe("div",{class:"q-tab__alert"+(p.alert!==!0?` text-${p.alert}`:"")})),U===!0&&P.push(q);const M=[qe("div",{class:"q-focus-helper",tabindex:-1,ref:f}),qe("div",{class:y.value},oo(s.default,P))];return U===!1&&M.push(q),M}const F={name:Z(()=>p.name),rootRef:v,tabIndicatorRef:c,routeData:o};Xt(()=>{i.unregisterTab(F)}),he(()=>{i.registerTab(F)});function T(U,P){const q={ref:v,class:_.value,tabindex:$.value,role:"tab","aria-selected":g.value===!0?"true":"false","aria-disabled":p.disable===!0?"true":void 0,onClick:V,onKeydown:C,...P};return te(qe(U,q,E()),[[se,m.value]])}return{renderTab:T,$tabs:i}}const it=It({name:"QTab",props:tr,emits:er,setup(p,{slots:s,emit:u}){const{renderTab:o}=ar(p,s,u);return()=>o("div")}});function lr(p,s,u){const o=u===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${p?` text-${p}`:""}`}const or=["left","center","right","justify"],Ct=It({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:p=>or.includes(p)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(p,{slots:s,emit:u}){const{proxy:o}=Ot(),{$q:i}=o,{registerTick:n}=Va(),{registerTick:f}=Va(),{registerTick:v}=Va(),{registerTimeout:c,removeTimeout:m}=Ra(),{registerTimeout:g,removeTimeout:_}=Ra(),y=R(null),$=R(null),V=R(p.modelValue),C=R(!1),E=R(!0),F=R(!1),T=R(!1),U=[],P=R(0),q=R(!1);let M=null,w=null,x;const j=Z(()=>({activeClass:p.activeClass,activeColor:p.activeColor,activeBgColor:p.activeBgColor,indicatorClass:lr(p.indicatorColor,p.switchIndicator,p.vertical),narrowIndicator:p.narrowIndicator,inlineLabel:p.inlineLabel,noCaps:p.noCaps})),D=Z(()=>{const ye=P.value,Se=V.value;for(let Ae=0;Ae<ye;Ae++)if(U[Ae].name.value===Se)return!0;return!1}),O=Z(()=>`q-tabs__content--align-${C.value===!0?"left":T.value===!0?"justify":p.align}`),A=Z(()=>`q-tabs row no-wrap items-center q-tabs--${C.value===!0?"":"not-"}scrollable q-tabs--${p.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${p.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${p.mobileArrows===!0?"":"out"}-arrows`+(p.dense===!0?" q-tabs--dense":"")+(p.shrink===!0?" col-shrink":"")+(p.stretch===!0?" self-stretch":"")),B=Z(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+O.value+(p.contentClass!==void 0?` ${p.contentClass}`:"")),ne=Z(()=>p.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),fe=Z(()=>p.vertical!==!0&&i.lang.rtl===!0),ve=Z(()=>Dn===!1&&fe.value===!0);Ye(fe,X),Ye(()=>p.modelValue,ye=>{ue({name:ye,setCurrent:!0,skipEmit:!0})}),Ye(()=>p.outsideArrows,Oe);function ue({name:ye,setCurrent:Se,skipEmit:Ae}){V.value!==ye&&(Ae!==!0&&p["onUpdate:modelValue"]!==void 0&&u("update:modelValue",ye),(Se===!0||p["onUpdate:modelValue"]===void 0)&&(ee(V.value,ye),V.value=ye))}function Oe(){n(()=>{y.value&&_e({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function _e(ye){if(ne.value===void 0||$.value===null)return;const Se=ye[ne.value.container],Ae=Math.min($.value[ne.value.scroll],Array.prototype.reduce.call($.value.children,(ct,Ze)=>ct+(Ze[ne.value.content]||0),0)),mt=Se>0&&Ae>Se;C.value=mt,mt===!0&&f(X),T.value=Se<parseInt(p.breakpoint,10)}function ee(ye,Se){const Ae=ye!=null&&ye!==""?U.find(ct=>ct.name.value===ye):null,mt=Se!=null&&Se!==""?U.find(ct=>ct.name.value===Se):null;if(ia===!0)ia=!1;else if(Ae&&mt){const ct=Ae.tabIndicatorRef.value,Ze=mt.tabIndicatorRef.value;M!==null&&(clearTimeout(M),M=null),ct.style.transition="none",ct.style.transform="none",Ze.style.transition="none",Ze.style.transform="none";const He=ct.getBoundingClientRect(),_t=Ze.getBoundingClientRect();Ze.style.transform=p.vertical===!0?`translate3d(0,${He.top-_t.top}px,0) scale3d(1,${_t.height?He.height/_t.height:1},1)`:`translate3d(${He.left-_t.left}px,0,0) scale3d(${_t.width?He.width/_t.width:1},1,1)`,v(()=>{M=setTimeout(()=>{M=null,Ze.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Ze.style.transform="none"},70)})}mt&&C.value===!0&&H(mt.rootRef.value)}function H(ye){const{left:Se,width:Ae,top:mt,height:ct}=$.value.getBoundingClientRect(),Ze=ye.getBoundingClientRect();let He=p.vertical===!0?Ze.top-mt:Ze.left-Se;if(He<0){$.value[p.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(He),X();return}He+=p.vertical===!0?Ze.height-ct:Ze.width-Ae,He>0&&($.value[p.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(He),X())}function X(){const ye=$.value;if(ye===null)return;const Se=ye.getBoundingClientRect(),Ae=p.vertical===!0?ye.scrollTop:Math.abs(ye.scrollLeft);fe.value===!0?(E.value=Math.ceil(Ae+Se.width)<ye.scrollWidth-1,F.value=Ae>0):(E.value=Ae>0,F.value=p.vertical===!0?Math.ceil(Ae+Se.height)<ye.scrollHeight:Math.ceil(Ae+Se.width)<ye.scrollWidth)}function le(ye){w!==null&&clearInterval(w),w=setInterval(()=>{yt(ye)===!0&&$e()},5)}function K(){le(ve.value===!0?Number.MAX_SAFE_INTEGER:0)}function de(){le(ve.value===!0?0:Number.MAX_SAFE_INTEGER)}function $e(){w!==null&&(clearInterval(w),w=null)}function ke(ye,Se){const Ae=Array.prototype.filter.call($.value.children,_t=>_t===Se||_t.matches&&_t.matches(".q-tab.q-focusable")===!0),mt=Ae.length;if(mt===0)return;if(ye===36)return H(Ae[0]),Ae[0].focus(),!0;if(ye===35)return H(Ae[mt-1]),Ae[mt-1].focus(),!0;const ct=ye===(p.vertical===!0?38:37),Ze=ye===(p.vertical===!0?40:39),He=ct===!0?-1:Ze===!0?1:void 0;if(He!==void 0){const _t=fe.value===!0?-1:1,Dt=Ae.indexOf(Se)+He*_t;return Dt>=0&&Dt<mt&&(H(Ae[Dt]),Ae[Dt].focus({preventScroll:!0})),!0}}const nt=Z(()=>ve.value===!0?{get:ye=>Math.abs(ye.scrollLeft),set:(ye,Se)=>{ye.scrollLeft=-Se}}:p.vertical===!0?{get:ye=>ye.scrollTop,set:(ye,Se)=>{ye.scrollTop=Se}}:{get:ye=>ye.scrollLeft,set:(ye,Se)=>{ye.scrollLeft=Se}});function yt(ye){const Se=$.value,{get:Ae,set:mt}=nt.value;let ct=!1,Ze=Ae(Se);const He=ye<Ze?-1:1;return Ze+=He*5,Ze<0?(ct=!0,Ze=0):(He===-1&&Ze<=ye||He===1&&Ze>=ye)&&(ct=!0,Ze=ye),mt(Se,Ze),X(),ct}function Vt(ye,Se){for(const Ae in ye)if(ye[Ae]!==Se[Ae])return!1;return!0}function ha(){let ye=null,Se={matchedLen:0,queryDiff:9999,hrefLen:0};const Ae=U.filter(He=>{var _t;return((_t=He.routeData)==null?void 0:_t.hasRouterLink.value)===!0}),{hash:mt,query:ct}=o.$route,Ze=Object.keys(ct).length;for(const He of Ae){const _t=He.routeData.exact.value===!0;if(He.routeData[_t===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Dt,query:$a,matched:qn,href:Cn}=He.routeData.resolvedLink.value,xa=Object.keys($a).length;if(_t===!0){if(Dt!==mt||xa!==Ze||Vt(ct,$a)===!1)continue;ye=He.name.value;break}if(Dt!==""&&Dt!==mt||xa!==0&&Vt($a,ct)===!1)continue;const jt={matchedLen:qn.length,queryDiff:Ze-xa,hrefLen:Cn.length-Dt.length};if(jt.matchedLen>Se.matchedLen){ye=He.name.value,Se=jt;continue}else if(jt.matchedLen!==Se.matchedLen)continue;if(jt.queryDiff<Se.queryDiff)ye=He.name.value,Se=jt;else if(jt.queryDiff!==Se.queryDiff)continue;jt.hrefLen>Se.hrefLen&&(ye=He.name.value,Se=jt)}if(ye===null&&U.some(He=>He.routeData===void 0&&He.name.value===V.value)===!0){ia=!1;return}ue({name:ye,setCurrent:!0})}function $n(ye){if(m(),q.value!==!0&&y.value!==null&&ye.target&&typeof ye.target.closest=="function"){const Se=ye.target.closest(".q-tab");Se&&y.value.contains(Se)===!0&&(q.value=!0,C.value===!0&&H(Se))}}function xn(){c(()=>{q.value=!1},30)}function Zt(){za.avoidRouteWatcher===!1?g(ha):_()}function Ba(){if(x===void 0){const ye=Ye(()=>o.$route.fullPath,Zt);x=()=>{ye(),x=void 0}}}function Sn(ye){U.push(ye),P.value++,Oe(),ye.routeData===void 0||o.$route===void 0?g(()=>{if(C.value===!0){const Se=V.value,Ae=Se!=null&&Se!==""?U.find(mt=>mt.name.value===Se):null;Ae&&H(Ae.rootRef.value)}}):(Ba(),ye.routeData.hasRouterLink.value===!0&&Zt())}function Vn(ye){U.splice(U.indexOf(ye),1),P.value--,Oe(),x!==void 0&&ye.routeData!==void 0&&(U.every(Se=>Se.routeData===void 0)===!0&&x(),Zt())}const za={currentModel:V,tabProps:j,hasFocus:q,hasActiveTab:D,registerTab:Sn,unregisterTab:Vn,verifyRouteModel:Zt,updateModel:ue,onKbdNavigate:ke,avoidRouteWatcher:!1};En(lo,za);function Fa(){M!==null&&clearTimeout(M),$e(),x==null||x()}let La,ia;return Xt(Fa),In(()=>{La=x!==void 0,Fa()}),Un(()=>{La===!0&&(Ba(),ia=!0,Zt()),Oe()}),()=>qe("div",{ref:y,class:A.value,role:"tablist",onFocusin:$n,onFocusout:xn},[qe(jn,{onResize:_e}),qe("div",{ref:$,class:B.value,onScroll:X},At(s.default)),qe(S,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(E.value===!0?"":" q-tabs__arrow--faded"),name:p.leftIcon||i.iconSet.tabs[p.vertical===!0?"up":"left"],onMousedownPassive:K,onTouchstartPassive:K,onMouseupPassive:$e,onMouseleavePassive:$e,onTouchendPassive:$e}),qe(S,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(F.value===!0?"":" q-tabs__arrow--faded"),name:p.rightIcon||i.iconSet.tabs[p.vertical===!0?"down":"right"],onMousedownPassive:de,onTouchstartPassive:de,onMouseupPassive:$e,onMouseleavePassive:$e,onTouchendPassive:$e})])}});function nr(p){const s=[.06,6,50];return typeof p=="string"&&p.length&&p.split(":").forEach((u,o)=>{const i=parseFloat(u);i&&(s[o]=i)}),s}const sr=An({name:"touch-swipe",beforeMount(p,{value:s,arg:u,modifiers:o}){if(o.mouse!==!0&&Kt.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",n={handler:s,sensitivity:nr(u),direction:Ha(o),noop:Mn,mouseStart(f){Ya(f,n)&&Bn(f)&&(da(n,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(f,!0))},touchStart(f){if(Ya(f,n)){const v=f.target;da(n,"temp",[[v,"touchmove","move","notPassiveCapture"],[v,"touchcancel","end","notPassiveCapture"],[v,"touchend","end","notPassiveCapture"]]),n.start(f)}},start(f,v){Kt.is.firefox===!0&&Ca(p,!0);const c=Ka(f);n.event={x:c.left,y:c.top,time:Date.now(),mouse:v===!0,dir:!1}},move(f){if(n.event===void 0)return;if(n.event.dir!==!1){Bt(f);return}const v=Date.now()-n.event.time;if(v===0)return;const c=Ka(f),m=c.left-n.event.x,g=Math.abs(m),_=c.top-n.event.y,y=Math.abs(_);if(n.event.mouse!==!0){if(g<n.sensitivity[1]&&y<n.sensitivity[1]){n.end(f);return}}else if(window.getSelection().toString()!==""){n.end(f);return}else if(g<n.sensitivity[2]&&y<n.sensitivity[2])return;const $=g/v,V=y/v;n.direction.vertical===!0&&g<y&&g<100&&V>n.sensitivity[0]&&(n.event.dir=_<0?"up":"down"),n.direction.horizontal===!0&&g>y&&y<100&&$>n.sensitivity[0]&&(n.event.dir=m<0?"left":"right"),n.direction.up===!0&&g<y&&_<0&&g<100&&V>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&g<y&&_>0&&g<100&&V>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&g>y&&m<0&&y<100&&$>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&g>y&&m>0&&y<100&&$>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Bt(f),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Nn(),n.styleCleanup=C=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const E=()=>{document.body.classList.remove("no-pointer-events--children")};C===!0?setTimeout(E,50):E()}),n.handler({evt:f,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:v,distance:{x:g,y}})):n.end(f)},end(f){var v;n.event!==void 0&&(qa(n,"temp"),Kt.is.firefox===!0&&Ca(p,!1),(v=n.styleCleanup)==null||v.call(n,!0),f!==void 0&&n.event.dir!==!1&&Bt(f),n.event=void 0)}};if(p.__qtouchswipe=n,o.mouse===!0){const f=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";da(n,"main",[[p,"mousedown","mouseStart",`passive${f}`]])}Kt.has.touch===!0&&da(n,"main",[[p,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[p,"touchmove","noop","notPassiveCapture"]])},updated(p,s){const u=p.__qtouchswipe;u!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&u.end(),u.handler=s.value),u.direction=Ha(s.modifiers))},beforeUnmount(p){var u;const s=p.__qtouchswipe;s!==void 0&&(qa(s,"main"),qa(s,"temp"),Kt.is.firefox===!0&&Ca(p,!1),(u=s.styleCleanup)==null||u.call(s),delete p.__qtouchswipe)}}),rr={name:{required:!0},disable:Boolean},Za={setup(p,{slots:s}){return()=>qe("div",{class:"q-panel scroll",role:"tabpanel"},At(s.default))}},ir={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},dr=["update:modelValue","beforeTransition","transition"];function ur(){const{props:p,emit:s,proxy:u}=Ot(),{getCache:o}=Fn(),{registerTimeout:i}=Ra();let n,f;const v=R(null),c={value:null};function m(ne){const fe=p.vertical===!0?"up":"left";x((u.$q.lang.rtl===!0?-1:1)*(ne.direction===fe?1:-1))}const g=Z(()=>[[sr,m,void 0,{horizontal:p.vertical!==!0,vertical:p.vertical,mouse:!0}]]),_=Z(()=>p.transitionPrev||`slide-${p.vertical===!0?"down":"right"}`),y=Z(()=>p.transitionNext||`slide-${p.vertical===!0?"up":"left"}`),$=Z(()=>`--q-transition-duration: ${p.transitionDuration}ms`),V=Z(()=>typeof p.modelValue=="string"||typeof p.modelValue=="number"?p.modelValue:String(p.modelValue)),C=Z(()=>({include:p.keepAliveInclude,exclude:p.keepAliveExclude,max:p.keepAliveMax})),E=Z(()=>p.keepAliveInclude!==void 0||p.keepAliveExclude!==void 0);Ye(()=>p.modelValue,(ne,fe)=>{const ve=P(ne)===!0?q(ne):-1;f!==!0&&w(ve===-1?0:ve<q(fe)?-1:1),c.value!==ve&&(c.value=ve,s("beforeTransition",ne,fe),i(()=>{s("transition",ne,fe)},p.transitionDuration))});function F(){x(1)}function T(){x(-1)}function U(ne){s("update:modelValue",ne)}function P(ne){return ne!=null&&ne!==""}function q(ne){return n.findIndex(fe=>fe.props.name===ne&&fe.props.disable!==""&&fe.props.disable!==!0)}function M(){return n.filter(ne=>ne.props.disable!==""&&ne.props.disable!==!0)}function w(ne){const fe=ne!==0&&p.animated===!0&&c.value!==-1?"q-transition--"+(ne===-1?_.value:y.value):null;v.value!==fe&&(v.value=fe)}function x(ne,fe=c.value){let ve=fe+ne;for(;ve!==-1&&ve<n.length;){const ue=n[ve];if(ue!==void 0&&ue.props.disable!==""&&ue.props.disable!==!0){w(ne),f=!0,s("update:modelValue",ue.props.name),setTimeout(()=>{f=!1});return}ve+=ne}p.infinite===!0&&n.length!==0&&fe!==-1&&fe!==n.length&&x(ne,ne===-1?n.length:-1)}function j(){const ne=q(p.modelValue);return c.value!==ne&&(c.value=ne),!0}function D(){const ne=P(p.modelValue)===!0&&j()&&n[c.value];return p.keepAlive===!0?[qe(Ln,C.value,[qe(E.value===!0?o(V.value,()=>({...Za,name:V.value})):Za,{key:V.value,style:$.value},()=>ne)])]:[qe("div",{class:"q-panel scroll",style:$.value,key:V.value,role:"tabpanel"},[ne])]}function O(){if(n.length!==0)return p.animated===!0?[qe(no,{name:v.value},D)]:D()}function A(ne){return n=zn(At(ne.default,[])).filter(fe=>fe.props!==null&&fe.props.slot===void 0&&P(fe.props.name)===!0),n.length}function B(){return n}return Object.assign(u,{next:F,previous:T,goTo:U}),{panelIndex:c,panelDirectives:g,updatePanelsList:A,updatePanelIndex:j,getPanelContent:O,getEnabledPanels:M,getPanels:B,isValidPanelName:P,keepAliveProps:C,needsUniqueKeepAliveWrapper:E,goToPanelByOffset:x,goToPanel:U,nextPanel:F,previousPanel:T}}const dt=It({name:"QTabPanel",props:rr,setup(p,{slots:s}){return()=>qe("div",{class:"q-tab-panel",role:"tabpanel"},At(s.default))}}),Tt=It({name:"QTabPanels",props:{...ir,...Ia},emits:dr,setup(p,{slots:s}){const u=Ot(),o=Ua(p,u.proxy.$q),{updatePanelsList:i,getPanelContent:n,panelDirectives:f}=ur(),v=Z(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(s),Hn("div",{class:v.value},n(),"pan",p.swipeable,()=>f.value))}}),mr={class:"detail"},cr={class:"detail with-currency"},pr={class:"text-right"},fr={key:0},gr={class:"detail with-currency"},br={class:"text-right"},vr={class:"detail with-currency"},_r={class:"text-right"},yr={class:"text-right"},kr={key:0},wr={class:"text-right"},hr={class:"detail with-currency"},$r={class:"text-right"},xr={key:0},Sr={key:0},Vr={colspan:"100%"},qr={class:"q-my-md"},Cr={class:"detail"},Tr={key:0},Pr={colspan:"100%"},Rr={key:1},Or={colspan:"100%"},bo={__name:"MainInfoTab",setup(p){const s=pe();return(u,o)=>{const i=J("my-link");return d(),h(W,null,[o[39]||(o[39]=t("div",{class:"text-bold text-grey-8"},"Info Sesi",-1)),t("table",mr,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",null,"Kode",-1)),o[2]||(o[2]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[e(i,{href:u.route("admin.user.detail",l(s).props.data.user.id)},{default:a(()=>[b(r(l(s).props.data.user.name)+" - "+r(l(s).props.data.user.username),1)]),_:1},8,["href"])])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.is_closed?"Selesai":"Aktif"),1)])])]),o[40]||(o[40]=t("div",{class:"q-mt-md text-grey-8 text-bold"},"Info Buka Sesi",-1)),t("table",cr,[t("tbody",null,[t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),o[11]||(o[11]=t("td",null,"Rp.",-1)),t("td",pr,r(l(L)(l(s).props.data.opening_balance)),1),o[12]||(o[12]=t("td",null,null,-1))]),l(s).props.data.opening_notes?(d(),h("tr",fr,[o[13]||(o[13]=t("td",null,"Catatan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.opening_notes),1)])):k("",!0)])]),o[41]||(o[41]=t("div",{class:"q-mt-md text-bold text-grey-8"},"Rincian Pendapatan & Kas",-1)),t("table",gr,[t("tbody",null,[t("tr",null,[o[15]||(o[15]=t("td",null,"Total Penjualan",-1)),o[16]||(o[16]=t("td",null,":",-1)),o[17]||(o[17]=t("td",null,"Rp.",-1)),t("td",br,r(l(L)(l(s).props.data.total_sales)),1),o[18]||(o[18]=t("td",null,null,-1))])])]),o[42]||(o[42]=t("div",{class:"q-mt-md text-bold text-grey-8"},"Rincian Kas",-1)),t("table",vr,[t("tbody",null,[t("tr",null,[o[19]||(o[19]=t("td",null,"Total Pemasukan",-1)),o[20]||(o[20]=t("td",null,":",-1)),o[21]||(o[21]=t("td",null,"Rp.",-1)),t("td",_r,r(l(L)(l(s).props.data.total_income)),1),o[22]||(o[22]=t("td",null,null,-1))]),t("tr",null,[o[23]||(o[23]=t("td",null,"Total Pengeluaran",-1)),o[24]||(o[24]=t("td",null,":",-1)),o[25]||(o[25]=t("td",null,"Rp.",-1)),t("td",yr,r(l(L)(l(s).props.data.total_expense)),1),o[26]||(o[26]=t("td",null,null,-1))]),l(s).props.data.is_closed?k("",!0):(d(),h("tr",kr,[o[27]||(o[27]=t("td",null,"Saldo Aktual",-1)),o[28]||(o[28]=t("td",null,":",-1)),o[29]||(o[29]=t("td",null,"Rp.",-1)),t("td",wr,r(l(L)(l(s).props.data.actual_balance)),1),o[30]||(o[30]=t("td",null,null,-1))]))])]),t("table",hr,[t("tbody",null,[l(s).props.data.is_closed?(d(),h(W,{key:0},[o[37]||(o[37]=t("div",{class:"q-mt-md text-bold text-grey-8"},"Info Tutup Sesi",-1)),t("tr",null,[o[31]||(o[31]=t("td",null,"Saldo Akhir",-1)),o[32]||(o[32]=t("td",null,":",-1)),o[33]||(o[33]=t("td",null,"Rp.",-1)),t("td",$r,r(l(L)(l(s).props.data.closing_balance)),1),o[34]||(o[34]=t("td",null,null,-1))]),l(s).props.data.closing_notes?(d(),h("tr",xr,[o[35]||(o[35]=t("td",null,"Catatan",-1)),o[36]||(o[36]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),u.$can("admin.cashier-session.close")?(d(),h(W,{key:1},[l(s).props.data.is_closed?k("",!0):(d(),h("tr",Sr,[t("td",Vr,[t("div",qr,[e(N,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=n=>u.$inertia.get(u.route("admin.cashier-session.close",{id:l(s).props.data.id})))},{default:a(()=>[...o[38]||(o[38]=[b(" Tutup Sesi Kasir ",-1)])]),_:1})])])]))],64)):k("",!0)])]),o[43]||(o[43]=t("div",{class:"q-mt-md text-bold text-grey-8"},"Info Rekaman",-1)),t("table",Cr,[t("tbody",null,[l(s).props.data.created_at?(d(),h("tr",Tr,[t("td",Pr," Dibuat "+r(l(Et)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(be)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),h("tr",Rr,[t("td",Or," Diperbarui "+r(l(Et)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(be)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])])],64)}}},Dr=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),Ir={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ur={class:"text-bold"},jr={key:0},Er={class:"text-bold"},Ar={key:1},Mr={key:0},Nr={key:0},Br={key:1},vo={__name:"SalesOrderTab",props:{data:Object},setup(p){const s=p,u=R([]),o=R(!0),i=Ue({...ze(),cashier_session_id:s.data.id,status:["closed","canceled"]}),n=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{v()});const v=(g=null)=>Fe({pagination:n,filter:i,props:g,rows:u,url:route("admin.sales-order.data"),loading:o}),c=we(),m=Z(()=>c.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),I(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:V})=>[t("div",Ir,[t("span",null,r($)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Pe,{props:y,class:"cursor-pointer",onClick:G($=>l(Y).get(g.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",Ur,[e(S,{class:"inline-icon",name:"tag"}),b(" "+r(y.row.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),b(" "+r(l(be)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),h(W,{key:0},[y.row.customer?(d(),h("div",jr,[e(S,{class:"inline-icon",name:"person"}),b(" "+r(y.row.customer_code)+" "+r(y.row.customer.name),1)])):k("",!0),t("div",Er,[e(S,{name:"money",class:"inline-icon"}),b(" Rp. "+r(l(L)(y.row.grand_total)),1)]),y.row.notes?(d(),h("div",Ar,[e(xe,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(rt,{color:y.row.status==="closed"?"green":"red"},{default:a(()=>[b(r(g.$CONSTANTS.SALES_ORDER_STATUSES[y.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"customer",props:y},{default:a(()=>[y.row.customer?(d(),h("div",Mr,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),b(" "+r(y.row.customer_code)+" - "+r(y.row.customer_name),1)]),y.row.customer_phone?(d(),h("div",Nr,[e(S,{name:"phone",class:"inline-icon"}),b(" "+r(y.row.customer_phone),1)])):k("",!0),y.row.customer_address?(d(),h("div",Br,[e(S,{name:"home_pin",class:"inline-icon"}),b(" "+r(y.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:y},{default:a(()=>[t("div",null,r(l(L)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(xe,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},zr=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),Fr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Lr={class:"text-bold"},Hr={class:"text-bold"},Kr={key:0},Yr={class:"q-mt-sm"},_o={__name:"FinanceTransactionTab",props:{data:Object},setup(p){var g;const s=p;console.log(s.data);const u=R([]),o=R(!0),i=Ue({...ze(),account_id:(g=s.data.cashier_terminal)==null?void 0:g.finance_account_id,from_datetime:Qt(s.data.opened_at),to_datetime:s.data.closed_at?Qt(s.data.closed_at):null}),n=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{v()});const v=(_=null)=>Fe({pagination:n,filter:i,props:_,rows:u,url:route("admin.finance-transaction.data"),loading:o}),c=we(),m=Z(()=>c.screen.gt.sm?f:f.filter(_=>_.name==="id"));return(_,y)=>(d(),I(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=$=>n.value=$),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:V,filter:C})=>[t("div",Fr,[t("span",null,r(V)+" "+r(C?" with term "+C:""),1)])]),body:a($=>[e(Pe,{props:$},{default:a(()=>[e(Q,{key:"id",props:$},{default:a(()=>[t("div",Lr,[e(S,{class:"inline-icon",name:"tag"}),b(" "+r($.row.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),b(" "+r(l(be)($.row.datetime)),1)]),l(c).screen.lt.md?(d(),h(W,{key:0},[t("div",Hr,[e(S,{name:"money",class:"inline-icon"}),b(" Rp. "+r(l(L)($.row.amount)),1)]),$.row.notes?(d(),h("div",Kr,[e(xe,{text:$.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",Yr,[e(rt,{color:$.row.amount>=0?"green":"red"},{default:a(()=>[b(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[$.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"amount",props:$},{default:a(()=>[t("span",{class:Ve($.row.amount<0?"text-red":"text-green")},r(l(L)($.row.amount)),3)]),_:2},1032,["props"]),e(Q,{key:"notes",props:$,class:"wrap-column"},{default:a(()=>[e(xe,{text:$.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Wr=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),Qr={class:"q-gutter-sm"},Jr={class:"col col-lg-6 q-pa-xs"},Gr={class:"row"},el="Rincian Sesi Kasir",Xr={__name:"Detail",setup(p){const s=pe(),u=Z(()=>s.props.data),o=R("main");return Ye(()=>s.props.tab,i=>{i&&(o.value=i)},{immediate:!0}),(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),h(W,null,[e(f,{title:el}),e(v,null,{title:a(()=>[b(r(el))]),"left-button":a(()=>[t("div",Qr,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Jr,[t("div",Gr,[e(ie,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:a(()=>[e(Ct,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=c=>o.value=c),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Ringkasan"}),e(it,{name:"sales",label:"Transaksi Penjualan"}),e(it,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=c=>o.value=c),animated:"",class:"q-pa-none"},{default:a(()=>[e(dt,{name:"main"},{default:a(()=>[e(bo,{data:u.value},null,8,["data"])]),_:1}),e(dt,{name:"sales",class:"q-pa-xs"},{default:a(()=>[e(vo,{data:u.value},null,8,["data"])]),_:1}),e(dt,{name:"finance",class:"q-pa-xs"},{default:a(()=>[e(_o,{data:u.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Zr=Object.freeze(Object.defineProperty({__proto__:null,default:Xr},Symbol.toStringTag,{value:"Module"}));function Ut(){return{protectClick:s=>(u,o)=>{const i=window.getSelection();if(i&&!i.isCollapsed){o.stopPropagation();return}s(u,o)}}}const ei={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ti={class:"q-pa-xs"},ai={class:"full-width row flex-center text-grey-8 q-gutter-sm"},li={class:"row items-center q-gutter-x-sm"},oi={class:"avatar"},ni={class:"col"},si={class:"row items-center no-wrap"},ri={class:"row items-center no-wrap"},ii={class:"row items-center q-gutter-x-sm"},di={class:"avatar"},ui={class:"col"},mi={class:"row items-center no-wrap"},ci={class:"flex justify-end"},tl="Sesi Kasir",pi={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Ue({search:"",status:"all",...ze()}),m=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];he(()=>{$()});const y=U=>ot({message:`Hapus Sesi: ${U.cashier_terminal.name} - ${U.user.username}?`,url:route("admin.cashier-session.delete",U.id),fetchItemsCallback:$,loading:i}),$=(U=null)=>{Fe({pagination:m,filter:c,props:U,rows:o,url:route("admin.cashier-session.data"),loading:i,tableRef:n})},V=()=>$(),C=U=>Y.get(route("admin.cashier-session.detail",{id:U.id})),{protectClick:E}=Ut(),F=E(C),T=Z(()=>s.screen.gt.sm?g:g.filter(U=>U.name==="id"||U.name==="action"));return(U,P)=>{const q=J("i-head"),M=J("authenticated-layout");return d(),h(W,null,[e(q,{title:tl}),e(M,null,Be({title:a(()=>[b(r(tl))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=w=>u.value=!u.value)},null,8,["icon"]),U.$can("admin.cashier-session.open")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=w=>l(Y).get(U.route("admin.cashier-session.open")))})):k("",!0)]),default:a(()=>[t("div",ti,[e(Ee,{class:"full-height-table",style:Le({height:l(v)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":P[5]||(P[5]=w=>m.value=w),filter:c.search,loading:i.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:w,message:x,filter:j})=>[t("div",ai,[t("span",null,r(x)+" "+r(j?" with term "+j:""),1)])]),body:a(w=>[e(Pe,{props:w,class:Ve(["cursor-pointer",w.row.is_closed?"":"bg-yellow-3"]),onClick:G(x=>l(F)(w.row,x),["stop"])},{default:a(()=>[e(Q,{key:"id",props:w,class:"wrap-column"},{default:a(()=>[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),b(" "+r(w.row.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"point_of_sale"}),b(" "+r(w.row.cashier_terminal.name),1)]),t("div",null,[e(S,{class:"inline-icon",name:"person"}),b(" "+r(w.row.user.username)+" - "+r(w.row.user.name),1)]),l(s).screen.lt.md?(d(),h(W,{key:0},[e(Te),t("div",li,[t("div",oi,[e(S,{name:"login",size:"25px",color:"grey-8"})]),t("div",ni,[t("div",si,[e(S,{name:"calendar_clock",size:"xs",class:"q-mr-xs"}),t("span",null,r(w.row.opened_at?l(be)(w.row.opened_at):"-"),1)]),t("div",ri,[e(S,{name:"money",size:"xs",class:"q-mr-xs"}),t("span",null,r(l($t)(w.row.opening_balance)),1)])])]),w.row.is_closed?(d(),h(W,{key:0},[e(Te),t("div",ii,[t("div",di,[e(S,{name:"logout",size:"25px",color:"grey-8"})]),t("div",ui,[t("div",mi,[e(S,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(w.row.closed_at?l(be)(w.row.closed_at):"-"),1)]),t("div",null,[e(S,{class:"inline-icon",name:"money"}),b(" "+r(l($t)(w.row.closing_balance)),1)])])])],64)):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"opening_info",props:w},{default:a(()=>[t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(w.row.opened_at?l(be)(w.row.opened_at):"-"),1)]),t("div",null,[e(S,{class:"inline-icon",name:"money"}),b(" "+r(l($t)(w.row.opening_balance)),1)]),w.row.opening_notes?(d(),I(xe,{key:0,text:w.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"closing_info",props:w},{default:a(()=>[t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(w.row.closed_at?l(be)(w.row.closed_at):"-"),1)]),t("div",null,[e(S,{class:"inline-icon",name:"money"}),b(" "+r(l($t)(w.row.closing_balance)),1)]),w.row.closing_notes?(d(),I(xe,{key:0,text:w.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"action",props:w},{default:a(()=>[t("div",ci,[U.$can("admin.cashier-session.close")||U.$can("admin.cashier-session.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[4]||(P[4]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[U.$can("admin.cashier-session.close")?te((d(),I(oe,{key:0,disable:w.row.is_closed,clickable:"",onClick:G(x=>l(Y).get(U.route("admin.cashier-session.close",w.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"logout"})]),_:1}),e(z,null,{default:a(()=>[...P[6]||(P[6]=[b("Tutup Sesi Kasir",-1)])]),_:1})]),_:1},8,["disable","onClick"])),[[se],[me]]):k("",!0),U.$can("admin.cashier-session.delete")&&!w.row.is_closed?te((d(),I(oe,{key:1,onClick:G(x=>y(w.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...P[7]||(P[7]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",ei,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[P[2]||(P[2]=w=>c.status=w),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":P[3]||(P[3]=w=>c.search=w),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fi=Object.freeze(Object.defineProperty({__proto__:null,default:pi},Symbol.toStringTag,{value:"Module"})),gi={class:"q-gutter-sm"},bi={class:"col col-md-6 q-pa-xs"},al="Buka Sesi Kasir",vi={__name:"Open",setup(p){const s=pe(),u=Qe({cashier_terminal_id:s.props.data.cashier_terminal_id,opening_balance:parseFloat(s.props.data.opening_balance),opening_notes:s.props.data.opening_notes}),o=[...s.props.cashier_terminals.map(n=>({value:n.id,label:n.name,balance:parseFloat(n.finance_account.balance)}))],i=()=>st({form:u,url:route("admin.cashier-session.open")});return Ye(()=>u.cashier_terminal_id,n=>{if(n){const f=o.find(v=>v.value===n);f&&(u.opening_balance=f.balance)}else u.opening_balance=0}),(n,f)=>{const v=J("i-head"),c=J("authenticated-layout");return d(),h(W,null,[e(v,{title:al}),e(c,null,{title:a(()=>[b(r(al))]),"left-button":a(()=>[t("div",gi,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=m=>n.$inertia.get(n.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",bi,[e(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:l(We)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=m=>l(u).id=m)},null,512),[[wt,l(u).id]]),e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(ce,{class:"custom-select",modelValue:l(u).cashier_terminal_id,"onUpdate:modelValue":f[2]||(f[2]=m=>l(u).cashier_terminal_id=m),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:l(u).errors.cashier_terminal_id,error:!!l(u).errors.cashier_terminal_id,disable:l(u).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Me,{modelValue:l(u).opening_balance,"onUpdate:modelValue":f[3]||(f[3]=m=>l(u).opening_balance=m),label:"Saldo Buka Sesi",lazyRules:"",disable:l(u).processing,error:!!l(u).errors.opening_balance,errorMessage:l(u).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),f[6]||(f[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(re,{modelValue:l(u).opening_notes,"onUpdate:modelValue":f[4]||(f[4]=m=>l(u).opening_notes=m),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(u).processing,error:!!l(u).errors.opening_notes,"error-message":l(u).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:l(u).processing},null,8,["disable"]),e(N,{label:"Batal",icon:"cancel",disable:l(u).processing,onClick:f[5]||(f[5]=m=>l(Y).get(n.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},_i=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"})),yi={class:"detail"},ki={colspan:"3"},wi={class:"text-bold text-grey-8"},hi={key:0},$i={colspan:"100%"},xi={key:1},Si={colspan:"100%"},yo={__name:"MainInfoTab",setup(p){const s=pe();return(u,o)=>(d(),h("table",yi,[t("tbody",null,[t("tr",null,[t("td",ki,[t("div",wi,[o[1]||(o[1]=b(" Info Terminal Kasir ",-1)),e(N,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=i=>u.$inertia.get(u.route("admin.cashier-terminal.edit",{id:l(s).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(l($t)(l(s).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),l(s).props.data.created_at?(d(),h("tr",hi,[t("td",$i," Dibuat "+r(l(Et)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(be)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),h("tr",xi,[t("td",Si," Diperbarui "+r(l(Et)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(be)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},Vi=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),qi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ko={__name:"SessionHistoryTab",setup(p){const s=pe(),u=R([]),o=R(!0),i=Ue({cashier_terminal_id:s.props.data.id,...ze()}),n=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];he(()=>{v()});const v=(g=null)=>Fe({pagination:n,filter:i,props:g,rows:u,url:route("admin.cashier-session.data"),loading:o}),c=we(),m=Z(()=>c.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),I(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:V})=>[t("div",qi,[t("span",null,r($)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Pe,{props:y,class:"cursor-pointer",onClick:G($=>l(Y).get(g.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y,class:"wrap-column"},{default:a(()=>[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),b(" Session ID: "+r(y.row.id),1)]),t("div",null,[e(S,{class:"inline-icon",name:"point_of_sale"}),b(" "+r(y.row.cashier_terminal.name),1)]),t("div",null,[e(S,{class:"inline-icon",name:"person"}),b(" "+r(y.row.user.username)+" - "+r(y.row.user.name),1)])]),_:2},1032,["props"]),e(Q,{key:"opening_info",props:y},{default:a(()=>[t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(y.row.opened_at?l(be)(y.row.opened_at):"-"),1)]),t("div",null,[e(S,{class:"inline-icon",name:"money"}),b(" "+r(l($t)(y.row.opening_balance)),1)]),y.row.opening_notes?(d(),I(xe,{key:0,text:y.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"closing_info",props:y},{default:a(()=>[t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(y.row.closed_at?l(be)(y.row.closed_at):"-"),1)]),t("div",null,[e(S,{class:"inline-icon",name:"money"}),b(" "+r(l($t)(y.row.closing_balance)),1)]),y.row.closing_notes?(d(),I(xe,{key:0,text:y.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ci=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),Ti={class:"q-gutter-sm"},Pi={class:"col col-lg-6 q-pa-xs"},Ri={class:"row"},ll="Rincian Terminal Kasir",Oi={__name:"Detail",setup(p){const s=R("main");return(u,o)=>{const i=J("i-head"),n=J("authenticated-layout");return d(),h(W,null,[e(i,{title:ll}),e(n,null,{title:a(()=>[b(r(ll))]),"left-button":a(()=>[t("div",Ti,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=f=>u.$inertia.get(u.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Pi,[t("div",Ri,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Ct,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=f=>s.value=f),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Info Utama"}),e(it,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=f=>s.value=f),animated:""},{default:a(()=>[e(dt,{name:"main"},{default:a(()=>[e(yo)]),_:1}),e(dt,{name:"session-history",class:"q-pa-xs"},{default:a(()=>[e(ko)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Di=Object.freeze(Object.defineProperty({__proto__:null,default:Oi},Symbol.toStringTag,{value:"Module"})),Ii={class:"q-gutter-sm"},Ui={class:"col col-md-6 q-pa-xs"},ji={key:0,class:"q-my-xs text-grey-8"},Ei={__name:"Editor",setup(p){const s=pe(),u=(s.props.data.id?"Edit":"Tambah")+" Terminal",o=Qe({id:s.props.data.id,name:s.props.data.name,finance_account_id:s.props.data.finance_account_id??"new",location:s.props.data.location,active:!!s.props.data.active,notes:s.props.data.notes}),i=[{value:"new",label:"Buat Baru (Otomatis)"},...s.props.finance_accounts.map(f=>({value:f.id,label:f.name}))],n=()=>st({form:o,url:route("admin.cashier-terminal.save")});return(f,v)=>{const c=J("i-head"),m=J("authenticated-layout");return d(),h(W,null,[e(c,{title:u}),e(m,null,{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",Ii,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=g=>f.$inertia.get(f.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Ui,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(We)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=g=>l(o).id=g)},null,512),[[wt,l(o).id]]),e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(re,{modelValue:l(o).name,"onUpdate:modelValue":v[2]||(v[2]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{class:"custom-select",modelValue:l(o).finance_account_id,"onUpdate:modelValue":v[3]||(v[3]=g=>l(o).finance_account_id=g),label:"Akun Kas",options:i,"map-options":"","emit-value":"",errorMessage:l(o).errors.finance_account_id,error:!!l(o).errors.finance_account_id,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),l(o).finance_account_id==="new"?(d(),h("div",ji,[v[8]||(v[8]=b(" Akun keuangan akan dibuat ",-1)),l(o).name?(d(),h(W,{key:0},[b(" dengan nama Kas "+r(l(o).name),1)],64)):k("",!0)])):k("",!0),e(re,{modelValue:l(o).location,"onUpdate:modelValue":v[4]||(v[4]=g=>l(o).location=g),modelModifiers:{trim:!0},label:"Lokasi",error:!!l(o).errors.location,disable:l(o).processing,"error-message":l(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(re,{modelValue:l(o).notes,"onUpdate:modelValue":v[5]||(v[5]=g=>l(o).notes=g),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(fa,{modelValue:l(o).active,"onUpdate:modelValue":v[6]||(v[6]=g=>l(o).active=g),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:l(o).processing},null,8,["disable"]),e(N,{label:"Batal",icon:"cancel",disable:l(o).processing,onClick:v[7]||(v[7]=g=>l(Y).get(f.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ai=Object.freeze(Object.defineProperty({__proto__:null,default:Ei},Symbol.toStringTag,{value:"Module"})),Mi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ni={class:"q-pa-xs"},Bi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zi={class:"flex justify-end"},ol="Terminal Kasir",Fi={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Ue({search:"",status:"active",...ze()}),m=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:s.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{$()});const y=U=>ot({message:`Hapus Terminal Kasir ${U.name}?`,url:route("admin.cashier-terminal.delete",U.id),fetchItemsCallback:$,loading:i}),$=(U=null)=>{Fe({pagination:m,filter:c,props:U,rows:o,url:route("admin.cashier-terminal.data"),loading:i,tableRef:n})},V=()=>$(),C=U=>Y.get(route("admin.cashier-terminal.detail",{id:U.id})),{protectClick:E}=Ut(),F=E(C),T=Z(()=>s.screen.gt.sm?g:g.filter(U=>U.name==="name"||U.name==="finance_account_id"||U.name==="action"));return(U,P)=>{const q=J("i-head"),M=J("authenticated-layout");return d(),h(W,null,[e(q,{title:ol}),e(M,null,Be({title:a(()=>[b(r(ol))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=w=>u.value=!u.value)},null,8,["icon"]),U.$can("admin.cashier-terminal.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=w=>l(Y).get(U.route("admin.cashier-terminal.add")))})):k("",!0)]),default:a(()=>[t("div",Ni,[e(Ee,{class:"full-height-table",style:Le({height:l(v)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":P[5]||(P[5]=w=>m.value=w),filter:c.search,loading:i.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:w,message:x,filter:j})=>[t("div",Bi,[t("span",null,r(x)+" "+r(j?" with term "+j:""),1)])]),body:a(w=>[e(Pe,{props:w,class:Ve([w.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(x=>l(F)(w.row,x),["stop"])},{default:a(()=>[e(Q,{key:"name",props:w,class:"wrap-column"},{default:a(()=>[t("div",null,[e(S,{name:"wallet"}),b(" "+r(w.row.name),1)]),t("div",null,[e(S,{name:"home_pin"}),b(" "+r(w.row.location),1)]),l(s).screen.lt.md?(d(),I(xe,{key:0,text:w.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:w},{default:a(()=>[t("div",null,[e(S,{name:"wallet"}),b(" "+r(w.row.finance_account.name),1)]),t("div",null,[e(S,{name:"money"}),b(" "+r(l($t)(w.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(Q,{key:"notes",props:w},{default:a(()=>[e(xe,{text:w.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:w},{default:a(()=>[t("div",zi,[U.$can("admin.cashier-terminal.edit")||U.$can("admin.cashier-terminal.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[4]||(P[4]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[U.$can("admin.cashier-terminal.edit")?te((d(),I(oe,{key:0,clickable:"",onClick:G(x=>l(Y).get(U.route("admin.cashier-terminal.edit",w.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...P[6]||(P[6]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),U.$can("admin.cashier-terminal.delete")?te((d(),I(oe,{key:1,onClick:G(x=>y(w.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...P[7]||(P[7]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Mi,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[P[2]||(P[2]=w=>c.status=w),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":P[3]||(P[3]=w=>c.search=w),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Li=Object.freeze(Object.defineProperty({__proto__:null,default:Fi},Symbol.toStringTag,{value:"Module"})),Hi={class:"q-gutter-sm"},Ki={class:"col col-md-6 q-pa-xs"},Yi={class:"row"},Wi={class:"detail"},Qi={key:0},Ji={key:1},Gi={key:0},Xi={key:1},Zi={colspan:"3",class:"bg-white"},nl="Rincian Konfirmasi Top Up",ed={__name:"Detail",setup(p){const s=pe(),u=()=>ma({message:`Setujui konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"accept"},onSuccess:()=>{Y.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}}),o=()=>ma({message:`Tolak konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"reject"},onSuccess:()=>{Y.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}});return(i,n)=>{const f=J("i-head"),v=J("i-link"),c=J("my-link"),m=J("authenticated-layout");return d(),h(W,null,[e(f,{title:nl}),e(m,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Hi,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=g=>i.$inertia.get(i.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":a(()=>[l(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:reject")?(d(),I(N,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:n[1]||(n[1]=g=>o()),class:"q-mr-sm"})):k("",!0),l(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:accept")?(d(),I(N,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:n[2]||(n[2]=g=>u())})):k("",!0)]),title:a(()=>[t("span",{class:"text-subtitle2"},r(nl))]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Ki,[t("div",Yi,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[n[24]||(n[24]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",Wi,[t("tbody",null,[t("tr",null,[n[3]||(n[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),n[4]||(n[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Waktu",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.datetime)),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Pelanggan",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),e(v,{href:i.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[b(r(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(d(),h("div",Qi,[e(S,{name:"phone",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(d(),h("div",Ji,[e(S,{name:"home_pin",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[n[11]||(n[11]=t("td",null,"Akun Tujuan",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[e(c,{href:i.route("admin.finance-account.detail",{id:l(s).props.data.finance_account.id})},{default:a(()=>[b(r(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),n[10]||(n[10]=t("br",null,null,-1)),l(s).props.data.finance_account.type==="bank"?(d(),h(W,{key:0},[b(" Rek "+r(l(s).props.data.finance_account.bank)+" an "+r(l(s).props.data.finance_account.holder)+" ",1),n[9]||(n[9]=t("br",null,null,-1)),b(" "+r(l(s).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[n[13]||(n[13]=t("td",null,"Jumlah",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(L)(l(s).props.data.amount)),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"Status",-1)),n[16]||(n[16]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[n[17]||(n[17]=t("td",null,"Catatan",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),h("tr",Gi,[n[19]||(n[19]=t("td",null,"Dibuat",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),h("tr",Xi,[n[21]||(n[21]=t("td",null,"Diperbarui",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),h(W,{key:2},[n[23]||(n[23]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Zi,[e(na,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:Le([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},td=Object.freeze(Object.defineProperty({__proto__:null,default:ed},Symbol.toStringTag,{value:"Module"})),ad={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ld={class:"q-pa-xs"},od={key:0},nd={class:"flex justify-end no-wrap"},sl="Konfirmasi Top Up Deposit",sd={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=R(null),m=R(!1),g=Re().startOf("month").toDate(),_=Re().endOf("month").toDate(),y=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],$=Ue({search:"",start_date:g,end_date:_,status:"all",...ze()}),V=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",field:"action",align:"center"}];he(()=>{E()});const E=(w=null)=>{const x={...$,start_date:Re($.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Re($.end_date).format("YYYY-MM-DD HH:mm:ss")};Fe({pagination:V,filter:x,props:w,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:i,tableRef:n})},F=()=>{E()},T=Z(()=>s.screen.gt.sm?C:C.filter(w=>["code","action"].includes(w.name))),U=w=>ma({message:`Setujui konfirmasi transaksi #${w.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:E,loading:i,data:{id:w.id,action:"accept"}}),P=w=>ma({message:`Tolak konfirmasi transaksi #${w.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:E,loading:i,data:{id:w.id,action:"reject"}}),q=w=>ot({message:`Hapus konfirmasi transaksi ${w.code}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",w.id),fetchItemsCallback:E,loading:i}),M=w=>{c.value=w,m.value=!0};return(w,x)=>{const j=J("i-head"),D=J("authenticated-layout");return d(),h(W,null,[e(j,{title:sl}),e(D,null,Be({title:a(()=>[b(r(sl))]),"right-button":a(()=>[e(N,{class:"q-ml-sm",icon:u.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:x[0]||(x[0]=O=>u.value=!u.value)},null,8,["icon"])]),default:a(()=>[t("div",ld,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Le({height:l(v)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":x[6]||(x[6]=O=>V.value=O),filter:$.search,loading:i.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:E,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),body:a(O=>[e(Pe,{props:O,class:"cursor-pointer",onClick:G(A=>l(Y).get(w.route("admin.customer-wallet-transaction-confirmation.detail",{id:O.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"code",props:O,class:"wrap-column"},{default:a(()=>[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),b(" "+r(O.row.code),1)]),l(s).screen.gt.sm?k("",!0):(d(),h("div",od,[e(S,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(be)(O.row.datetime)),1)])),l(s).screen.gt.sm?k("",!0):(d(),h(W,{key:1},[e(xe,{icon:"account_balance",text:O.row.finance_account.name},null,8,["text"]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),b(" "+r(O.row.customer.code)+" - "+r(O.row.customer.name),1)]),t("div",null,[e(S,{name:"money",class:"inline-icon"}),b(" Rp. "+r(l(L)(O.row.amount)),1)]),O.row.notes?(d(),I(xe,{key:0,icon:"notes",text:O.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Wa,{status:O.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(Q,{key:"datetime",props:O,class:"wrap-column"},{default:a(()=>[b(r(l(be)(O.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"customer_id",props:O},{default:a(()=>[e(xe,{text:O.row.customer.code+" - "+O.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:O},{default:a(()=>[b(r(O.row.finance_account.name),1),x[8]||(x[8]=t("br",null,null,-1)),b(" "+r(O.row.finance_account.bank)+" "+r(O.row.finance_account.number)+" an. "+r(O.row.finance_account.holder),1)]),_:2},1032,["props"]),e(Q,{key:"amount",props:O,style:{"text-align":"right"}},{default:a(()=>[b(r(l(L)(O.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"status",props:O,class:"text-center"},{default:a(()=>[e(Wa,{status:O.row.status},null,8,["status"])]),_:2},1032,["props"]),e(Q,{key:"notes",props:O,class:"word-wrap"},{default:a(()=>[e(xe,{icon:"notes",text:O.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:O,class:"text-center"},{default:a(()=>[t("div",nd,[e(N,{icon:"image",color:"primary",dense:"",flat:"",disable:O.row.image_path===null||O.row.image_path==="",onClick:G(A=>M(O.row.image_path),["stop"])},{default:a(()=>[O.row.image_path!=null?(d(),I(Rt,{key:0},{default:a(()=>[...x[9]||(x[9]=[b(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),w.$can("admin.customer-wallet-transaction-confirmation:accept")||w.$can("admin.customer-wallet-transaction-confirmation:deny")||w.$can("admin.customer-wallet-transaction-confirmation.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[5]||(x[5]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[w.$can("admin.customer-wallet-transaction-confirmation:accept")?te((d(),I(oe,{key:0,onClick:G(A=>U(O.row),["stop"]),clickable:"",disable:O.row.status!=="pending"},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"check"})]),_:1}),e(z,null,{default:a(()=>[...x[10]||(x[10]=[b("Setujui",-1)])]),_:1})]),_:1},8,["onClick","disable"])),[[se],[me]]):k("",!0),w.$can("admin.customer-wallet-transaction-confirmation:deny")?te((d(),I(oe,{key:1,onClick:G(A=>P(O.row),["stop"]),clickable:"",disable:O.row.status!=="pending"},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"cancel"})]),_:1}),e(z,null,{default:a(()=>[...x[11]||(x[11]=[b("Tolak",-1)])]),_:1})]),_:1},8,["onClick","disable"])),[[se],[me]]):k("",!0),e(Te),w.$can("admin.customer-wallet-transaction-confirmation.delete")?te((d(),I(oe,{key:2,onClick:G(A=>q(O.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...x[12]||(x[12]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(ca,{modelValue:m.value,"onUpdate:modelValue":x[7]||(x[7]=O=>m.value=O),imageUrl:`/${c.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",ad,[e(Xe,{modelValue:$.start_date,"onUpdate:modelValue":[x[1]||(x[1]=O=>$.start_date=O),F],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Xe,{modelValue:$.end_date,"onUpdate:modelValue":[x[2]||(x[2]=O=>$.end_date=O),F],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:$.status,"onUpdate:modelValue":[x[3]||(x[3]=O=>$.status=O),F],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":x[4]||(x[4]=O=>$.search=O),placeholder:"Cari...",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},rd=Object.freeze(Object.defineProperty({__proto__:null,default:sd},Symbol.toStringTag,{value:"Module"}));function wo(p,s=!1){const u=p.map(f=>({value:f.id,label:f.name+" ("+f.code+")"})),o=s?[{value:"all",label:"Semua"},...u]:u,i=R([...o]);return{filteredCustomers:i,filterCustomersFn:(f,v)=>{v(()=>{i.value=o.filter(c=>c.label.toLowerCase().includes(f.toLowerCase()))})},customers:o}}const id={class:"col col-md-6 q-pa-xs"},rl="Penyesuaian Saldo Deposit Pelanggan",dd={__name:"Adjustment",setup(p){const s=pe(),{filteredCustomers:u,filterCustomersFn:o}=wo(s.props.customers,!1),i=Qe({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),n=()=>i.amount=i.new_wallet_balance-i.old_wallet_balance;Ye(()=>i.customer_id,async c=>{if(!c){i.old_wallet_balance=0,i.new_wallet_balance=0,n();return}i.processing=!0;try{const m=await axios.get(route("admin.customer.wallet_balance",{id:c}));i.new_wallet_balance=i.old_wallet_balance=m.data.wallet_balance}catch(m){console.error("Gagal mengambil saldo:",m),i.old_wallet_balance=0,i.new_wallet_balance=0}i.processing=!1,n()});const f=Z(()=>i.new_wallet_balance-i.old_wallet_balance),v=()=>st({form:i,url:route("admin.customer-wallet-transaction.adjustment")});return(c,m)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),h(W,null,[e(g,{title:rl}),e(_,null,{title:a(()=>[b(r(rl))]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",id,[e(Je,{class:"row",onSubmit:G(v,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(ce,{class:"custom-select",modelValue:l(i).customer_id,"onUpdate:modelValue":m[0]||(m[0]=y=>l(i).customer_id=y),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(u),"map-options":"","emit-value":"",errorMessage:l(i).errors.customer_id,onFilter:l(o),error:!!l(i).errors.customer_id,disable:l(i).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(z,null,{default:a(()=>[...m[6]||(m[6]=[b("Pelanggan tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Me,{modelValue:l(i).old_wallet_balance,"onUpdate:modelValue":m[1]||(m[1]=y=>l(i).old_wallet_balance=y),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:l(i).processing,error:!!l(i).errors.old_wallet_balance,errorMessage:l(i).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Me,{modelValue:l(i).new_wallet_balance,"onUpdate:modelValue":m[2]||(m[2]=y=>l(i).new_wallet_balance=y),label:"Saldo Seharusnya",lazyRules:"",disable:l(i).processing,error:!!l(i).errors.new_wallet_balance,errorMessage:l(i).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Me,{modelValue:f.value,"onUpdate:modelValue":m[3]||(m[3]=y=>f.value=y),label:"Selisih",readonly:"",lazyRules:"",disable:l(i).processing},null,8,["modelValue","disable"]),e(re,{modelValue:l(i).notes,"onUpdate:modelValue":m[4]||(m[4]=y=>l(i).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.notes,"error-message":l(i).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing},null,8,["disable"]),e(N,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:m[5]||(m[5]=y=>l(Y).get(c.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ud=Object.freeze(Object.defineProperty({__proto__:null,default:dd},Symbol.toStringTag,{value:"Module"})),md={class:"q-gutter-sm"},cd={class:"col col-md-6 q-pa-xs"},pd={class:"row"},fd={class:"detail"},gd={key:0},bd={key:1},vd={key:0},_d={key:1},yd={colspan:"3",class:"bg-white"},il="Rincian Transaksi",kd={__name:"Detail",setup(p){const s=pe();return(u,o)=>{const i=J("i-head"),n=J("i-link"),f=J("authenticated-layout");return d(),h(W,null,[e(i,{title:il}),e(f,null,{"left-button":a(()=>[t("div",md,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>u.router.get(u.route("admin.customer-wallet-transaction.index")))})])]),title:a(()=>[b(r(il))]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",cd,[t("div",pd,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[o[18]||(o[18]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Deposit ",-1)),t("table",fd,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.datetime)),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Pelanggan",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),e(n,{href:u.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[b(""+r(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(d(),h("div",gd,[e(S,{name:"phone",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(d(),h("div",bd,[e(S,{name:"home_pin",class:"inline-icon"}),b(" "+r(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[l(s).props.data.type]),1)]),t("tr",null,[o[9]||(o[9]=t("td",null,"Jumlah",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",{class:Ve(l(s).props.data.amount>0?"text-positive":"text-negative")},r(l(ta)(l(s).props.data.amount))+"Rp. "+r(l(L)(Math.abs(l(s).props.data.amount))),3)]),t("tr",null,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),h("tr",vd,[o[13]||(o[13]=t("td",null,"Dibuat",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),h("tr",_d,[o[15]||(o[15]=t("td",null,"Diperbarui",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),h(W,{key:2},[o[17]||(o[17]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",yd,[e(na,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:Le([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},wd=Object.freeze(Object.defineProperty({__proto__:null,default:kd},Symbol.toStringTag,{value:"Module"})),hd={class:"q-gutter-sm"},$d={class:"col col-md-6 q-pa-xs"},xd={__name:"Editor",setup(p){var m;const s=pe(),u=(s.props.data.id?"Edit":"Catat")+" Transaksi Deposit Pelanggan",{filteredCustomers:o,filterCustomersFn:i}=wo(s.props.customers,!1),n=[{label:"Deposit / Uang Masuk (+)",value:"deposit"},{label:"Pengembalian / Uang Keluar (-)",value:"withdrawal"}],f=s.props.finance_accounts.map(g=>({label:g.name,value:g.id})),v=Qe({id:s.props.data.id,customer_id:s.props.data.customer_id,finance_account_id:s.props.data.finance_account_id,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((m=s.props.data)==null?void 0:m.image_path)??"",image:null}),c=()=>{sa(v,{datetime:"YYYY-MM-DD HH:mm:ss"}),st({form:v,url:route("admin.customer-wallet-transaction.save")})};return(g,_)=>{const y=J("i-head"),$=J("authenticated-layout");return d(),h(W,null,[e(y,{title:u}),e($,null,{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",hd,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=V=>g.$inertia.get(g.route("admin.customer-wallet-transaction.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",$d,[e(Je,{class:"row",onSubmit:G(c,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=V=>l(v).id=V)},null,512),[[wt,l(v).id]]),e(Xe,{autofocus:"",modelValue:l(v).datetime,"onUpdate:modelValue":_[2]||(_[2]=V=>l(v).datetime=V),label:"Tanggal",error:!!l(v).errors.datetime,disable:l(v).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ce,{class:"custom-select",modelValue:l(v).customer_id,"onUpdate:modelValue":_[3]||(_[3]=V=>l(v).customer_id=V),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(o),"map-options":"","emit-value":"",errorMessage:l(v).errors.customer_id,onFilter:l(i),error:!!l(v).errors.customer_id,disable:l(v).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(z,null,{default:a(()=>[..._[10]||(_[10]=[b("Pelanggan tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(ce,{modelValue:l(v).type,"onUpdate:modelValue":_[4]||(_[4]=V=>l(v).type=V),label:"Jenis Transaksi",options:n,"map-options":"","emit-value":"",error:!!l(v).errors.type,disable:l(v).processing,errorMessage:l(v).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{modelValue:l(v).finance_account_id,"onUpdate:modelValue":_[5]||(_[5]=V=>l(v).finance_account_id=V),label:l(v).type=="deposit"?"Kas Tujuan":"Kas Asal",options:l(f),"map-options":"","emit-value":"",error:!!l(v).errors.finance_account_id,disable:l(v).processing,errorMessage:l(v).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Me,{modelValue:l(v).amount,"onUpdate:modelValue":_[6]||(_[6]=V=>l(v).amount=V),label:"Jumlah",lazyRules:"",disable:l(v).processing,error:!!l(v).errors.amount,errorMessage:l(v).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(re,{modelValue:l(v).notes,"onUpdate:modelValue":_[7]||(_[7]=V=>l(v).notes=V),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(v).processing,error:!!l(v).errors.notes,"error-message":l(v).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ja,{modelValue:l(v).image,"onUpdate:modelValue":_[8]||(_[8]=V=>l(v).image=V),"initial-image-path":l(v).image_path,disabled:l(v).processing,error:!!l(v).errors.image||!!l(v).errors.image_path,"error-message":l(v).errors.image||l(v).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(v).processing},null,8,["disable"]),e(N,{icon:"cancel",label:"Batal",disable:l(v).processing,onClick:_[9]||(_[9]=V=>l(Y).get(g.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Sd=Object.freeze(Object.defineProperty({__proto__:null,default:xd},Symbol.toStringTag,{value:"Module"})),Vd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},qd={class:"q-pa-xs"},Cd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Td={key:0},Pd={key:0},Rd={class:"flex justify-end no-wrap"},dl="Transaksi Deposit Pelanggan",Od={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Re().startOf("month").toDate(),m=Re().endOf("month").toDate(),g=Ue({search:"",start_date:c,end_date:m,...ze()}),_=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),y=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{V()});const $=P=>ot({message:`Hapus transaksi #${P.code}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",P.id),fetchItemsCallback:V,loading:i}),V=(P=null)=>{console.log(g);const q={...g,start_date:Re(g.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Re(g.end_date).format("YYYY-MM-DD HH:mm:ss")};Fe({pagination:_,filter:q,props:P,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:i,tableRef:n})},C=()=>{V()},E=Z(()=>s.screen.gt.sm?y:y.filter(P=>P.name==="code"||P.name==="action")),F=R(null),T=R(!1),U=P=>{F.value=P,T.value=!0};return(P,q)=>{const M=J("i-head"),w=J("authenticated-layout");return d(),h(W,null,[e(M,{title:dl}),e(w,null,Be({title:a(()=>[b(r(dl))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:q[0]||(q[0]=x=>u.value=!u.value)},null,8,["icon"]),P.$can("admin.customer-wallet-transaction.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:q[1]||(q[1]=x=>l(Y).get(P.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",qd,[e(Ee,{ref_key:"tableRef",ref:n,style:Le({height:l(v)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":q[6]||(q[6]=x=>_.value=x),filter:g.search,loading:i.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:V,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:x,message:j,filter:D})=>[t("div",Cd,[t("span",null,r(j)+" "+r(D?" with term "+D:""),1)])]),body:a(x=>[e(Pe,{props:x,class:"cursor-pointer",onClick:G(j=>l(Y).get(P.route("admin.customer-wallet-transaction.detail",{id:x.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"code",props:x,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.gt.sm?k("",!0):(d(),I(S,{key:0,name:"tag",class:"inline-icon"})),b(" "+r(x.row.code),1)]),l(s).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(be)(x.row.datetime)),1)]),x.row.finance_account?(d(),h("div",Td,[e(S,{name:"wallet",class:"inline-icon"}),b(" "+r(x.row.finance_account?x.row.finance_account.name:"-"),1)])):k("",!0),e(xe,{icon:"person",text:x.row.customer.code+" - "+x.row.customer.name},null,8,["text"]),t("div",{class:Ve([x.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(S,{name:"money",class:"inline-icon"}),b(" "+r(l(ta)(x.row.amount))+"Rp. "+r(l(L)(Math.abs(x.row.amount))),1)],2),e(xe,{text:x.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(rt,null,{default:a(()=>[b(r(x.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(Q,{key:"datetime",props:x},{default:a(()=>[b(r(l(be)(x.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"customer_id",props:x},{default:a(()=>[e(xe,{text:x.row.customer.code+" - "+x.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:x},{default:a(()=>[x.row.finance_account?(d(),h("div",Pd,r(x.row.finance_account?x.row.finance_account.name:"-"),1)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"amount",props:x,style:{"text-align":"right"}},{default:a(()=>[b(r(l(xt)(x.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:x},{default:a(()=>[e(xe,{text:x.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:x},{default:a(()=>[t("div",Rd,[e(N,{icon:"image",color:"primary",dense:"",flat:"",disable:x.row.image_path===null||x.row.image_path==="",onClick:G(j=>U(x.row.image_path),["stop"])},{default:a(()=>[x.row.image_path!=null?(d(),I(Rt,{key:0},{default:a(()=>[...q[8]||(q[8]=[b(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),P.$can("admin.customer-wallet-transaction.delete")?(d(),I(N,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:q[5]||(q[5]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[P.$can("admin.customer-wallet-transaction.delete")?te((d(),I(oe,{key:0,onClick:G(j=>$(x.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...q[9]||(q[9]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ca,{modelValue:T.value,"onUpdate:modelValue":q[7]||(q[7]=x=>T.value=x),imageUrl:`/${F.value}`},null,8,["modelValue","imageUrl"])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Vd,[e(Xe,{modelValue:g.start_date,"onUpdate:modelValue":[q[2]||(q[2]=x=>g.start_date=x),C],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Xe,{modelValue:g.end_date,"onUpdate:modelValue":[q[3]||(q[3]=x=>g.end_date=x),C],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":q[4]||(q[4]=x=>g.search=x),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Dd=Object.freeze(Object.defineProperty({__proto__:null,default:Od},Symbol.toStringTag,{value:"Module"})),Id=["href"],Ud={key:1},Yt={__name:"WaLink",props:{phone:{type:String,required:!0},message:{type:String,default:""},display_text:{type:String,default:""}},setup(p){const s=p,u=Z(()=>Kn(s.phone,s.message)),o=Z(()=>s.display_text?s.display_text:s.phone&&u.value!=="#"?s.phone:"-"),i=Z(()=>s.phone&&u.value!=="#");return(n,f)=>i.value?(d(),h("a",{key:0,href:u.value,target:"_blank",rel:"noopener noreferrer"},[b(r(o.value)+" ",1),e(l(S),{name:"open_in_new",size:"xs",class:"q-ml-xs"})],8,Id)):(d(),h("span",Ud,r(o.value),1))}},jd={class:"detail"},Ed={class:"detail"},Ad={key:0},Md={key:1},Nd={class:"text-grey-8"},Bd={key:2},zd={class:"text-grey-8"},Fd={key:0,class:"q-pt-md"},ho={__name:"MainInfoTab",setup(p){const s=pe(),u=()=>{ot({message:`Hapus Pelanggan ${s.props.data.code}?`,url:route("admin.customer.delete",s.props.data.id),onSuccess:()=>{Y.get(route("admin.customer.index"))}})};return(o,i)=>(d(),h(W,null,[i[27]||(i[27]=t("div",{class:"text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",jd,[t("tbody",null,[t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Jenis",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.type_label),1)]),t("tr",null,[i[5]||(i[5]=t("td",null,"Nama",-1)),i[6]||(i[6]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[i[7]||(i[7]=t("td",null,"Default Harga",-1)),i[8]||(i[8]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.default_price_type_label),1)]),t("tr",null,[i[9]||(i[9]=t("td",null,"No. Telepon",-1)),i[10]||(i[10]=t("td",null,":",-1)),t("td",null,[e(Yt,{phone:l(s).props.data.phone},null,8,["phone"])])]),t("tr",null,[i[11]||(i[11]=t("td",null,"Alamat",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.address?l(s).props.data.address:"-"),1)]),t("tr",null,[i[13]||(i[13]=t("td",null,"Saldo Deposit",-1)),i[14]||(i[14]=t("td",null,":",-1)),t("td",{class:Ve(l(s).props.data.wallet_balance<0?"text-red":"text-green")}," Rp. "+r(l(xt)(l(s).props.data.wallet_balance)),3)]),t("tr",null,[t("td",null,r(l(s).props.data.balance>0?"Piutang":"Utang"),1),i[15]||(i[15]=t("td",null,":",-1)),t("td",{class:Ve(l(s).props.data.balance<0?"text-red":"text-green")}," Rp. "+r(l(xt)(l(s).props.data.balance)),3)]),t("tr",null,[i[16]||(i[16]=t("td",null,"Status",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),i[28]||(i[28]=t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun",-1)),t("table",Ed,[t("tbody",null,[l(s).props.data.created_at?(d(),h("tr",Ad,[i[18]||(i[18]=t("td",null,"Dibuat",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(l(Et)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(be)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(d(),h("tr",Md,[i[20]||(i[20]=t("td",null,"Diperbarui",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(l(Et)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(be)(l(s).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[i[22]||(i[22]=t("td",null,"Terakhir login",-1)),i[23]||(i[23]=t("td",null,":",-1)),t("td",null,[b(r(l(s).props.data.last_login_datetime?l(be)(l(s).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",Nd,"("+r(l(Et)(l(s).props.data.last_login_datetime))+")",1)])]),l(s).props.data.last_activity_datetime?(d(),h("tr",Bd,[i[25]||(i[25]=t("td",null,"Aktifitas Terakhir",-1)),i[26]||(i[26]=t("td",null,":",-1)),t("td",null,[b(r(l(be)(l(s).props.data.last_activity_datetime))+" ",1),t("span",zd,[b("("+r(l(Et)(l(s).props.data.last_activity_datetime))+")",1),i[24]||(i[24]=t("br",null,null,-1)),b(r(l(s).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(d(),h("div",Fd,[e(N,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>u())})])):k("",!0)],64))}},Ld=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),Hd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Kd={class:"text-bold"},$o={__name:"WalletHistoryTab",setup(p){const s=pe(),u=R([]),o=R(!0),i=Ue({customer_id:s.props.data.id,...ze()}),n=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];he(()=>{v()});const v=(g=null)=>Fe({pagination:n,filter:i,props:g,rows:u,url:route("admin.customer-wallet-transaction.data"),loading:o}),c=we(),m=Z(()=>c.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),I(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:V})=>[t("div",Hd,[t("span",null,r($)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Pe,{props:y,class:"cursor-pointer",onClick:G($=>l(Y).get(g.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",Kd,[e(S,{class:"inline-icon",name:"tag"}),b(" "+r(y.row.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(l(be)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),h(W,{key:0},[t("div",{class:Ve(["text-bold",y.row.amount<0?"text-red":"text-green"])},[e(S,{name:"money",class:"inline-icon"}),b(" "+r(l(aa)(y.row.amount)),1)],2),t("div",null,[e(xe,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(rt,{size:"xs",color:y.row.amount>0?"green":"red"},{default:a(()=>[e(S,{name:"category"}),b(" "+r(y.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(xe,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"amount",props:y},{default:a(()=>[t("div",{class:Ve(y.row.amount<0?"text-red-10":y.row.amount>0?"text-green-10":"")},r(l(xt)(y.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Yd=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),Wd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Qd={class:"text-bold"},Jd={key:0},Gd={key:1},xo={__name:"OrderHistoryTab",setup(p){const s=pe(),u=R([]),o=R(!0),i=Ue({customer_id:s.props.data.id,...ze()}),n=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{v()});const v=(g=null)=>Fe({pagination:n,filter:i,props:g,rows:u,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:s.props.data.id}}),loading:o}),c=we(),m=Z(()=>c.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),I(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:V})=>[t("div",Wd,[t("span",null,r($)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Pe,{props:y,class:"cursor-pointer",onClick:G($=>l(Y).get(g.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",Qd,[e(S,{class:"inline-icon",name:"tag"}),b(" "+r(y.row.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(l(be)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),h(W,{key:0},[t("div",null,[e(S,{name:"money",class:"inline-icon"}),b(" Total: Rp. "+r(l(L)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(d(),h("div",Jd,[e(S,{name:"money",class:"inline-icon"}),b(" Sisa Utang Rp. "+r(l(L)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(d(),h("div",Gd,[e(xe,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(rt,{color:y.row.status=="closed"?"green":"red"},{default:a(()=>[b(r(y.row.status_label),1)]),_:2},1032,["color"]),e(rt,{class:"q-ml-xs",color:y.row.payment_status=="fully_paid"?"green":"red"},{default:a(()=>[b(r(y.row.payment_status_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:y},{default:a(()=>[b(r(l(L)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"remaining_debt",props:y},{default:a(()=>[b(r(l(L)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(xe,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Xd=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),Zd={class:"q-gutter-sm"},eu={class:"q-gutter-sm"},tu={class:"col col-lg-6 q-pa-xs"},au={class:"row"},ul="Rincian Pelanggan",lu={__name:"Detail",setup(p){const s=pe(),u=R("main");return we(),(o,i)=>{const n=J("i-head"),f=J("authenticated-layout");return d(),h(W,null,[e(n,{title:ul}),e(f,null,{title:a(()=>[b(r(ul))]),"left-button":a(()=>[t("div",Zd,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":a(()=>[t("div",eu,[o.$can("admin.customer.edit")?(d(),I(N,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=v=>l(Y).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),I(N,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=v=>l(Y).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(d(),I(N,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=v=>l(Y).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",tu,[t("div",au,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Ct,{modelValue:u.value,"onUpdate:modelValue":i[4]||(i[4]=v=>u.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Info Utama"}),e(it,{name:"history",label:"Riwayat Deposit"}),e(it,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:u.value,"onUpdate:modelValue":i[5]||(i[5]=v=>u.value=v),animated:""},{default:a(()=>[e(dt,{name:"main"},{default:a(()=>[e(ho)]),_:1}),e(dt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e($o)]),_:1}),e(dt,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(xo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},ou=Object.freeze(Object.defineProperty({__proto__:null,default:lu},Symbol.toStringTag,{value:"Module"})),nu={class:"q-gutter-sm"},su={class:"col col-md-6 q-pa-xs"},ru={__name:"Editor",setup(p){const s=pe(),u=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,default_price_type:s.props.data.default_price_type,phone:s.props.data.phone,address:s.props.data.address,active:!!s.props.data.active,password:s.props.data.id?null:"12345",type:s.props.data.type}),i=R(!s.props.data.id),n=Ne(window.CONSTANTS.CUSTOMER_TYPES),f=Ne(window.CONSTANTS.PRODUCT_PRICE_TYPES),v=()=>st({form:o,url:route("admin.customer.save",{id:o.id})});return(c,m)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),h(W,null,[e(g,{title:u}),e(_,null,{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",nu,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>l(Y).get(c.route("admin.customer.index")))})])]),"right-button":a(()=>[e(N,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:m[1]||(m[1]=y=>v()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",su,[e(Je,{class:"row",onSubmit:G(v,["prevent"]),onValidationError:l(We)},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[2]||(m[2]=y=>l(o).id=y)},null,512),[[wt,l(o).id]]),e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(re,{modelValue:l(o).code,"onUpdate:modelValue":m[3]||(m[3]=y=>l(o).code=y),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[y=>y&&y.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(o).name,"onUpdate:modelValue":m[4]||(m[4]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:l(o).default_price_type,"onUpdate:modelValue":m[5]||(m[5]=y=>l(o).default_price_type=y),options:l(f),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!l(o).errors.default_price_type,"error-message":l(o).errors.default_price_type,disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":m[6]||(m[6]=y=>l(o).type=y),label:"Jenis Akun",options:l(n),"map-options":"","emit-value":"","lazy-rules":"",disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(o).errors.type,"error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(re,{modelValue:l(o).phone,"onUpdate:modelValue":m[7]||(m[7]=y=>l(o).phone=y),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:l(o).processing,error:!!l(o).errors.phone,"error-message":l(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).address,"onUpdate:modelValue":m[8]||(m[8]=y=>l(o).address=y),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(re,{autocomplete:"off","aria-autocomplete":"none",modelValue:l(o).password,"onUpdate:modelValue":m[10]||(m[10]=y=>l(o).password=y),label:l(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:l(o).processing,error:!!l(o).errors.password,"error-message":l(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:i.value?"text":"password"},{append:a(()=>[e(N,{dense:"",flat:"",round:"",onClick:m[9]||(m[9]=y=>i.value=!i.value)},{default:a(()=>[e(S,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(fa,{modelValue:l(o).active,"onUpdate:modelValue":m[11]||(m[11]=y=>l(o).active=y),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),m[12]||(m[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},iu=Object.freeze(Object.defineProperty({__proto__:null,default:ru},Symbol.toStringTag,{value:"Module"}));function Ht(p,s,u,o){const i=[];return p.forEach(n=>{o(n)===!0?i.push(n):s.push({failedPropValidation:u,file:n})}),i}function ua(p){p!=null&&p.dataTransfer&&(p.dataTransfer.dropEffect="copy"),Bt(p)}const du={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},uu=["rejected"];function mu({editable:p,dnd:s,getFileInput:u,addFilesToQueue:o}){const{props:i,emit:n,proxy:f}=Ot(),v=R(null),c=Z(()=>i.accept!==void 0?i.accept.split(",").map(T=>(T=T.trim(),T==="*"?"*/":(T.endsWith("/*")&&(T=T.slice(0,T.length-1)),T.toUpperCase()))):null),m=Z(()=>parseInt(i.maxFiles,10)),g=Z(()=>parseInt(i.maxTotalSize,10));function _(T){var U;if(p.value)if(T!==Object(T)&&(T={target:null}),((U=T.target)==null?void 0:U.matches('input[type="file"]'))===!0)T.clientX===0&&T.clientY===0&&Yn(T);else{const P=u();P!==T.target&&(P==null||P.click(T))}}function y(T){p.value&&T&&o(null,T)}function $(T,U,P,q){let M=Array.from(U||T.target.files);const w=[],x=()=>{w.length!==0&&n("rejected",w)};if(i.accept!==void 0&&c.value.indexOf("*/")===-1&&(M=Ht(M,w,"accept",j=>c.value.some(D=>j.type.toUpperCase().startsWith(D)||j.name.toUpperCase().endsWith(D))),M.length===0))return x();if(i.maxFileSize!==void 0){const j=parseInt(i.maxFileSize,10);if(M=Ht(M,w,"max-file-size",D=>D.size<=j),M.length===0)return x()}if(i.multiple!==!0&&M.length!==0&&(M=[M[0]]),M.forEach(j=>{j.__key=j.webkitRelativePath+j.lastModified+j.name+j.size}),q===!0){const j=P.map(D=>D.__key);M=Ht(M,w,"duplicate",D=>j.includes(D.__key)===!1)}if(M.length===0)return x();if(i.maxTotalSize!==void 0){let j=q===!0?P.reduce((D,O)=>D+O.size,0):0;if(M=Ht(M,w,"max-total-size",D=>(j+=D.size,j<=g.value)),M.length===0)return x()}if(typeof i.filter=="function"){const j=i.filter(M);M=Ht(M,w,"filter",D=>j.includes(D))}if(i.maxFiles!==void 0){let j=q===!0?P.length:0;if(M=Ht(M,w,"max-files",()=>(j++,j<=m.value)),M.length===0)return x()}if(x(),M.length!==0)return M}function V(T){ua(T),s.value!==!0&&(s.value=!0)}function C(T){Bt(T),(T.relatedTarget!==null||Kt.is.safari!==!0?T.relatedTarget!==v.value:document.elementsFromPoint(T.clientX,T.clientY).includes(v.value)===!1)===!0&&(s.value=!1)}function E(T){ua(T);const U=T.dataTransfer.files;U.length!==0&&o(null,U),s.value=!1}function F(T){if(s.value===!0)return qe("div",{ref:v,class:`q-${T}__dnd absolute-full`,onDragenter:ua,onDragover:ua,onDragleave:C,onDrop:E})}return Object.assign(f,{pickFiles:_,addFiles:y}),{pickFiles:_,addFiles:y,onDragover:V,onDragleave:C,processFiles:$,getDndNode:F,maxFilesNumber:m,maxTotalSizeNumber:g}}const So=It({name:"QFile",inheritAttrs:!1,props:{...Qn,...so,...du,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Wn,...uu],setup(p,{slots:s,emit:u,attrs:o}){const{proxy:i}=Ot(),n=Jn(),f=R(null),v=R(!1),c=Gn(p),{pickFiles:m,onDragover:g,onDragleave:_,processFiles:y,getDndNode:$}=mu({editable:n.editable,dnd:v,getFileInput:A,addFilesToQueue:B}),V=Xn(p),C=Z(()=>Object(p.modelValue)===p.modelValue?"length"in p.modelValue?Array.from(p.modelValue):[p.modelValue]:[]),E=Z(()=>Qa(C.value)),F=Z(()=>C.value.map(ue=>ue.name).join(", ")),T=Z(()=>Zn(C.value.reduce((ue,Oe)=>ue+Oe.size,0))),U=Z(()=>({totalSize:T.value,filesNumber:C.value.length,maxFiles:p.maxFiles})),P=Z(()=>({tabindex:-1,type:"file",title:"",accept:p.accept,capture:p.capture,name:c.value,...o,id:n.targetUid.value,disabled:n.editable.value!==!0})),q=Z(()=>"q-file q-field--auto-height"+(v.value===!0?" q-file--dnd":"")),M=Z(()=>p.multiple===!0&&p.append===!0);function w(ue){const Oe=C.value.slice();Oe.splice(ue,1),j(Oe)}function x(ue){const Oe=C.value.indexOf(ue);Oe!==-1&&w(Oe)}function j(ue){u("update:modelValue",p.multiple===!0?ue:ue[0])}function D(ue){ue.keyCode===13&&as(ue)}function O(ue){(ue.keyCode===13||ue.keyCode===32)&&m(ue)}function A(){return f.value}function B(ue,Oe){const _e=y(ue,Oe,C.value,M.value),ee=A();ee!=null&&(ee.value=""),_e!==void 0&&((p.multiple===!0?p.modelValue&&_e.every(H=>C.value.includes(H)):p.modelValue===_e[0])||j(M.value===!0?C.value.concat(_e):_e))}function ne(){return[qe("input",{class:[p.inputClass,"q-file__filler"],style:p.inputStyle})]}function fe(){if(s.file!==void 0)return C.value.length===0?ne():C.value.map((Oe,_e)=>s.file({index:_e,file:Oe,ref:this}));if(s.selected!==void 0)return C.value.length===0?ne():s.selected({files:C.value,ref:this});if(p.useChips===!0)return C.value.length===0?ne():C.value.map((Oe,_e)=>qe(Jt,{key:"file-"+_e,removable:n.editable.value,dense:!0,textColor:p.color,tabindex:p.tabindex,onRemove:()=>{w(_e)}},()=>qe("span",{class:"ellipsis",textContent:Oe.name})));const ue=p.displayValue!==void 0?p.displayValue:F.value;return ue.length!==0?[qe("div",{class:p.inputClass,style:p.inputStyle,textContent:ue})]:ne()}function ve(){const ue={ref:f,...P.value,...V.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:B};return p.multiple===!0&&(ue.multiple=!0),qe("input",ue)}return Object.assign(n,{fieldClass:q,emitValue:j,hasValue:E,inputRef:f,innerValue:C,floatingLabel:Z(()=>E.value===!0||Qa(p.displayValue)),computedCounter:Z(()=>{if(p.counterLabel!==void 0)return p.counterLabel(U.value);const ue=p.maxFiles;return`${C.value.length}${ue!==void 0?" / "+ue:""} (${T.value})`}),getControlChild:()=>$("file"),getControl:()=>{const ue={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:p.tabindex};return n.editable.value===!0&&Object.assign(ue,{onDragover:g,onDragleave:_,onKeydown:D,onKeyup:O}),qe("div",ue,[ve()].concat(fe()))}}),Object.assign(i,{removeAtIndex:w,removeFile:x,getNativeElement:()=>f.value}),es(i,"nativeEl",()=>f.value),ts(n)}}),Lt=It({name:"QBanner",props:{...Ia,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(p,{slots:s}){const{proxy:{$q:u}}=Ot(),o=Ua(p,u),i=Z(()=>"q-banner row items-center"+(p.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(p.rounded===!0?" rounded-borders":"")),n=Z(()=>`q-banner__actions row items-center justify-end col-${p.inlineActions===!0?"auto":"all"}`);return()=>{const f=[qe("div",{class:"q-banner__avatar col-auto row items-center self-start"},At(s.avatar)),qe("div",{class:"q-banner__content col text-body2"},At(s.default))],v=At(s.action);return v!==void 0&&f.push(qe("div",{class:n.value},v)),qe("div",{class:i.value+(p.inlineActions===!1&&v!==void 0?" q-banner--top-padding":""),role:"alert"},f)}}}),cu={class:"q-gutter-sm"},pu={class:"col col-md-6 q-pa-xs"},ml="Import Pelanggan",fu={__name:"Import",setup(p){const s=Qe({csv_file:null}),u=()=>{s.post(route("admin.customer.import"),{onSuccess:()=>{s.reset()},onError:()=>{We()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=J("i-head"),f=J("authenticated-layout");return d(),h(W,null,[e(n,{title:ml}),e(f,{"show-drawer-button":!0},{title:a(()=>[b(r(ml))]),"left-button":a(()=>[t("div",cu,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>l(Y).get(o.route("admin.customer.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",pu,[e(Je,{class:"row",onSubmit:G(u,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(So,{modelValue:l(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=v=>l(s).csv_file=v),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(N,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:i[2]||(i[2]=v=>l(Y).get(o.route("admin.customer.index")))},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),I(Lt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),I(Lt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},gu=Object.freeze(Object.defineProperty({__proto__:null,default:fu},Symbol.toStringTag,{value:"Module"})),bu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},vu={class:"q-pa-xs"},_u={class:"full-width row flex-center text-grey-8 q-gutter-sm"},yu={key:0},ku={key:2},wu={key:3},hu={class:"flex justify-end"},cl="Pelanggan",$u={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Ue({search:"",status:"active",...ze()}),m=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"code",label:s.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{$()});const y=U=>ot({message:`Hapus Pelanggan ${U.name}?`,url:route("admin.customer.delete",U.id),fetchItemsCallback:$,loading:i}),$=(U=null)=>{Fe({pagination:m,filter:c,props:U,rows:o,url:route("admin.customer.data"),loading:i,tableRef:n})},V=()=>$(),C=U=>Y.get(route("admin.customer.detail",{id:U.id})),{protectClick:E}=Ut(),F=E(C),T=Z(()=>s.screen.gt.sm?g:g.filter(U=>U.name==="code"||U.name==="action"));return(U,P)=>{const q=J("i-head"),M=J("authenticated-layout");return d(),h(W,null,[e(q,{title:cl}),e(M,null,Be({title:a(()=>[b(r(cl))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=w=>u.value=!u.value)},null,8,["icon"]),U.$can("admin.customer.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=w=>l(Y).get(U.route("admin.customer.add")))})):k("",!0),U.$can("admin.customer.import")?(d(),I(N,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[3]||(P[3]=G(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[U.$can("admin.customer.import")?te((d(),I(oe,{key:0,clickable:"",onClick:P[2]||(P[2]=G(w=>l(Y).get(U.route("admin.customer.import")),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"csv"})]),_:1}),e(z,null,{default:a(()=>[...P[8]||(P[8]=[b("Import",-1)])]),_:1})]),_:1})),[[se],[me]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",vu,[e(Ee,{class:"full-height-table",style:Le({height:l(v)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":P[7]||(P[7]=w=>m.value=w),filter:c.search,loading:i.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:$,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:w,message:x,filter:j})=>[t("div",_u,[t("span",null,r(x)+" "+r(j?" with term "+j:""),1)])]),body:a(w=>[e(Pe,{props:w,class:Ve([w.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(x=>l(F)(w.row,x),["stop"])},{default:a(()=>[e(Q,{key:"code",props:w,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),I(S,{key:0,name:"person"})):k("",!0),b(" "+r(w.row.code),1)]),l(s).screen.lt.md?(d(),h(W,{key:0},[t("div",null,[l(s).screen.lt.md?(d(),I(S,{key:0,name:"person"})):k("",!0),b(" "+r(w.row.name),1)]),w.row.phone?(d(),h("div",yu,[e(S,{name:"phone"}),b(" "+r(w.row.phone),1)])):k("",!0),w.row.address?(d(),I(xe,{key:1,text:w.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),w.row.wallet_balance!=0?(d(),h("div",ku,[e(S,{name:"wallet"}),b(" Wallet: Rp. "+r(l(L)(w.row.wallet_balance)),1)])):k("",!0),w.row.balance!=0?(d(),h("div",wu,[e(S,{name:"wallet"}),b(" Utang: Rp. "+r(l(L)(w.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"name",props:w},{default:a(()=>[b(r(w.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"wallet_balance",props:w},{default:a(()=>[b(r(l(L)(w.row.wallet_balance)),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:w},{default:a(()=>[b(r(l(L)(w.row.balance)),1)]),_:2},1032,["props"]),e(Q,{key:"phone",props:w},{default:a(()=>[b(r(w.row.phone),1)]),_:2},1032,["props"]),e(Q,{key:"address",props:w},{default:a(()=>[e(xe,{text:w.row.address},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:w},{default:a(()=>[t("div",hu,[U.$can("admin.customer.add")||U.$can("admin.customer.edit")||U.$can("admin.customer.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[6]||(P[6]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[U.$can("admin.customer.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(x=>l(Y).get(U.route("admin.customer.duplicate",w.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>[...P[9]||(P[9]=[b(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),U.$can("admin.customer.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(x=>l(Y).get(U.route("admin.customer.edit",w.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...P[10]||(P[10]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),U.$can("admin.customer.delete")?te((d(),I(oe,{key:2,onClick:G(x=>y(w.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...P[11]||(P[11]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",bu,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[P[4]||(P[4]=w=>c.status=w),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":P[5]||(P[5]=w=>c.search=w),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},xu=Object.freeze(Object.defineProperty({__proto__:null,default:$u},Symbol.toStringTag,{value:"Module"})),Su={class:"q-pb-sm"},Vu={class:"row q-col-gutter-sm"},qu={class:"row items-center no-wrap"},Cu={class:"q-ml-md"},Tu={class:"text-subtitle2 text-grey-8"},Pu={class:"text-h6 text-weight-bold"},Ru={class:"q-my-sm"},Ou={class:"row q-col-gutter-sm"},Du={class:"row items-center no-wrap"},Iu={class:"q-ml-md"},Uu={class:"text-subtitle2 text-grey-8"},ju={class:"text-h6 text-weight-bold"},Vo={__name:"ActualSummaryCard",setup(p){const s=pe(),u=Z(()=>[{label:"Pelanggan Aktif",value:s.props.data.total_active_customer,icon:"person_add",color:"blue-7",bgColor:"#e3f2fd"},{label:"Saldo Wallet / Deposit",value:L(s.props.data.total_customer_wallet_balance),icon:"savings",color:"green-7",bgColor:"#e8f5e9"},{label:"Saldo Utang / Piutang",value:L(s.props.data.total_customer_balance),icon:"account_balance",color:"red-8",bgColor:"#ffebee"},{label:"Supplier Aktif",value:s.props.data.total_active_supplier,icon:"local_shipping",color:"indigo-7",bgColor:"#e8eaf6"},{label:"Saldo Wallet / Deposit",value:L(s.props.data.total_supplier_wallet_balance),icon:"account_balance_wallet",color:"cyan-7",bgColor:"#e0f7fa"},{label:"Saldo Utang / Piutang",value:L(s.props.data.total_supplier_balance),icon:"credit_card",color:"red-8",bgColor:"#ffebee"}]),o=Z(()=>[{label:"Total Transaksi",value:L(s.props.data.total_sales_count),icon:"shopping_basket",color:"purple-8",bgColor:"#f3e5f5"},{label:"Total Penjualan",value:L(s.props.data.total_sales),icon:"trending_up",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Laba",value:L(s.props.data.total_sales_profit),icon:"attach_money",color:"teal-6",bgColor:"#e0f2f1"}]);return(i,n)=>(d(),h("div",Su,[t("div",null,[t("div",Vu,[(d(!0),h(W,null,Ie(u.value,(f,v)=>(d(),h("div",{key:v,class:"col-12 col-md-4"},[e(ie,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",qu,[e(Wt,{icon:f.icon,color:f.color,"text-color":f.bgColor},null,8,["icon","color","text-color"]),t("div",Cu,[t("div",Tu,r(f.label),1),t("div",Pu,r(f.value),1)])])]),_:2},1024)]))),128))])]),t("div",Ru,[t("div",Ou,[(d(!0),h(W,null,Ie(o.value,(f,v)=>(d(),h("div",{key:v,class:"col-12 col-md-4"},[e(ie,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",Du,[e(Wt,{icon:f.icon,color:f.color,"text-color":f.bgColor},null,8,["icon","color","text-color"]),t("div",Iu,[t("div",Uu,r(f.label),1),t("div",ju,r(f.value),1)])])]),_:2},1024)]))),128))])])]))}},Eu=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Au={class:"row q-col-gutter-sm q-pb-sm"},Mu={class:"col-md-6 col-12"},Nu={class:"col-md-6 col-12"},Bu={__name:"ChartCard",setup(p){ls([os,ns,ss,rs,is,ds,us]);const s=pe(),u=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=Z(()=>({title:{left:"center"},tooltip:{trigger:"axis",formatter:function(n){let f=n[0].name+"<br/>";return n.forEach(function(v){f+=v.marker+" "+v.seriesName+": "+L(v.value)+"<br/>"}),f}},xAxis:{type:"category",data:s.props.data.chart_data_1.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:n=>L(n),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:s.props.data.chart_data_1.data,itemStyle:{borderRadius:[5,5,0,0],color:u[0]}}]})),i=Z(()=>({title:{left:"center"},tooltip:{show:!1},legend:{show:!1},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:s.props.data.revenue_by_category,label:{show:!0,position:"outside",formatter:n=>{const f=L(n.value);return`${n.percent}% - ${n.name}
Rp. ${f}
`},fontSize:12,fontWeight:"bold",color:"#616161"},labelLine:{show:!0,length:10,length2:10},itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:n=>u[n.dataIndex%u.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(n,f)=>(d(),h("div",Au,[t("div",Mu,[e(ie,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[f[0]||(f[0]=t("div",{class:"text-subtitle1 q-pb-sm"},"Penjualan",-1)),e(l(Ja),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",Nu,[e(ie,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[f[1]||(f[1]=t("div",{class:"text-subtitle1 q-pb-sm"},"Distribusi Omzet",-1)),e(l(Ja),{class:"chart",option:i.value,autoresize:""},null,8,["option"])]),_:1})])]))}},qo=bt(Bu,[["__scopeId","data-v-aac9117e"]]),zu=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Fu={class:"row q-col-gutter-sm q-pb-sm"},Lu={class:"col-md-6 col-12"},Hu={key:1,class:"text-grey text-italic"},Ku={class:"col-md-6 col-12"},Yu={key:1,class:"text-grey text-italic"},Co={__name:"TopCard",setup(p){const s=pe();return(u,o)=>{const i=J("my-link");return d(),h("div",Fu,[t("div",Lu,[e(ie,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[o[0]||(o[0]=t("div",{class:"text-subtitle1 q-mb-sm"},"Top 5 Transaksi Pelanggan",-1)),l(s).props.data.top_customers_revenue.length>0?(d(),I(je,{key:0},{default:a(()=>[(d(!0),h(W,null,Ie(l(s).props.data.top_customers_revenue,(n,f)=>(d(),I(oe,{key:f},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(Wt,{color:"purple-"+(9-f),"text-color":"white",size:"sm"},{default:a(()=>[b(r(f+1),1)]),_:2},1032,["color"])]),_:2},1024),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[e(i,{href:u.route("admin.customer.detail",{id:n.customer_id}),class:"text-purple"},{default:a(()=>[b(r(n.customer_name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),e(z,{side:""},{default:a(()=>[e(ge,{class:"text-purple"},{default:a(()=>[b(r(l(L)(n.total_revenue)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),h("div",Hu,"Data tidak tersedia"))]),_:1})]),t("div",Ku,[e(ie,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[o[1]||(o[1]=t("div",{class:"text-subtitle1 q-mb-sm"},"Top 5 Saldo Wallet Pelanggan",-1)),l(s).props.data.top_customers_wallet.length>0?(d(),I(je,{key:0},{default:a(()=>[(d(!0),h(W,null,Ie(l(s).props.data.top_customers_wallet,(n,f)=>(d(),I(oe,{key:f},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(Wt,{color:"orange-"+(9-f),"text-color":"white",size:"sm"},{default:a(()=>[b(r(f+1),1)]),_:2},1032,["color"])]),_:2},1024),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[e(i,{href:u.route("admin.customer.detail",{id:n.id}),class:"text-orange-9"},{default:a(()=>[b(r(n.name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),e(z,{side:""},{default:a(()=>[e(ge,{class:"text-orange-9"},{default:a(()=>[b(r(l(L)(n.wallet_balance)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),h("div",Yu,"Data tidak tersedia"))]),_:1})])])}}},Wu=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),Qu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ju={class:"q-pa-xs"},Gu={class:"q-pa-none"},pl="Dashboard",Xu={__name:"Index",setup(p){pe();const s=R({top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}]}),u=R(!0),o=R(ze().period??"this_month"),i=R([{value:"today",label:"Hari Ini"},{value:"yesterday",label:"Kemarin"},{value:"this_week",label:"Minggu Ini"},{value:"last_week",label:"Minggu Lalu"},{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"Bulan Lalu"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"},{value:"this_year",label:"Tahun Ini"},{value:"prev_year",label:"Tahun Lalu"}]),n=()=>{Y.visit(route("admin.dashboard",{period:o.value}))},f=Z(()=>!(o.value=="today"||o.value=="yesterday"));return(v,c)=>{const m=J("i-head"),g=J("authenticated-layout");return d(),h(W,null,[e(m,{title:pl}),e(g,null,Be({title:a(()=>[b(r(pl))]),"right-button":a(()=>[e(N,{class:"q-ml-sm",icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:c[0]||(c[0]=_=>u.value=!u.value)},null,8,["icon"])]),default:a(()=>[t("div",Ju,[t("div",Gu,[e(Vo,{dashboardData:s.value},null,8,["dashboardData"])]),f.value?(d(),h(W,{key:0},[e(qo,{dashboardData:s.value},null,8,["dashboardData"]),e(Co,{dashboardData:s.value},null,8,["dashboardData"])],64)):k("",!0)])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar"},{default:a(()=>[t("div",Qu,[e(ce,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:o.value,"onUpdate:modelValue":[c[1]||(c[1]=_=>o.value=_),n],options:i.value,label:"Periode",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},Zu=Object.freeze(Object.defineProperty({__proto__:null,default:Xu},Symbol.toStringTag,{value:"Module"})),em={class:"row"},tm={class:"row q-col-gutter-sm"},am={class:"col-sm-6 col-xs-12"},lm={class:"col-sm-6 col-xs-12"},om={class:"col-md-3 col-sm-6 col-xs-12"},nm={class:"col-md-3 col-sm-6 col-xs-12"},sm={class:"col-md-3 col-sm-6 col-xs-12"},rm={class:"col-md-3 col-sm-6 col-xs-12"};const im={__name:"SummaryCard",setup(p){const s=pe(),u=(o,i)=>{const f={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...i};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(f)),Y.visit(o,{data:f})};return(o,i)=>(d(),h("div",em,[e(ie,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:a(()=>[e(ae,{class:"q-pa-none"},{default:a(()=>[t("div",tm,[t("div",am,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[0]||(i[0]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(z,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(S,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[b(r(l(s).props.data.active_customer_count),1)]),_:1}),e(ge,null,{default:a(()=>[...i[5]||(i[5]=[b("Pelanggan Aktif",-1)])]),_:1})]),_:1})]),_:1})]),t("div",lm,[e(oe,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[1]||(i[1]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(z,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(S,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[b(r(o.$page.props.data.active_user_count),1)]),_:1}),e(ge,null,{default:a(()=>[...i[6]||(i[6]=[b("Pengguna Aktif",-1)])]),_:1})]),_:1})]),_:1})]),t("div",om,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(z,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(l(L)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(ge,null,{default:a(()=>[...i[7]||(i[7]=[b("Total Saldo Koperasi",-1)])]),_:1})]),_:1})]),_:1})]),t("div",nm,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(z,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(l(L)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(ge,null,{default:a(()=>[...i[8]||(i[8]=[b("Total Saldo Pelanggan",-1)])]),_:1})]),_:1})]),_:1})]),t("div",sm,[e(oe,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(z,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(l(L)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(ge,null,{default:a(()=>[...i[9]||(i[9]=[b("Total Utang Pelanggan",-1)])]),_:1})]),_:1})]),_:1})]),t("div",rm,[e(oe,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(z,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(S,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(z,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(l(L)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(ge,null,{default:a(()=>[...i[10]||(i[10]=[b("Total Piutang Pelanggan",-1)])]),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},dm=Object.freeze(Object.defineProperty({__proto__:null,default:im},Symbol.toStringTag,{value:"Module"})),um={class:"detail"},mm={class:"detail"},To={__name:"MainInfoTab",setup(p){const s=pe();return(u,o)=>(d(),h(W,null,[o[22]||(o[22]=t("div",{class:"text-bold text-grey-8"},"Informasi Umum",-1)),t("table",um,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.FINANCE_ACCOUNT_TYPES[l(s).props.data.type]),1)]),l(s).props.data.type=="bank"?(d(),h(W,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(L)(l(s).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)])])]),o[23]||(o[23]=t("div",{class:"q-mt-md text-bold text-grey-8"},"Opsi Lanjutan",-1)),t("table",mm,[t("tbody",null,[t("tr",null,[o[16]||(o[16]=t("td",{style:{width:"170px"}},"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.has_wallet_access?"Ya":"Tidak"),1)])])])],64))}},cm=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),pm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},fm={class:"flex q-gutter-sm"},gm={key:0},Po={__name:"HistoryTab",setup(p){const s=pe(),u=we(),o=R(null),i=R([]),n=R(!0),f=Ue({...ze()}),v=at(null,117),c=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),m=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],g=Z(()=>u.screen.gt.sm?m:m.filter(y=>y.name==="code"));he(()=>{_()});const _=(y=null)=>Fe({pagination:c,filter:f,props:y,rows:i,url:route("admin.finance-transaction.data",{filter:{account_id:s.props.data.id}}),loading:n,tableRef:o});return(y,$)=>(d(),I(Ee,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:Le({height:l(v)}),color:"primary",class:"full-height-table","row-key":"id",pagination:c.value,"onUpdate:pagination":$[0]||($[0]=V=>c.value=V),filter:f.search,loading:n.value,columns:g.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({message:V,filter:C})=>[t("div",pm,[t("span",null,r(V)+" "+r(C?" with term "+C:""),1)])]),body:a(V=>[e(Pe,{props:V},{default:a(()=>[e(Q,{key:"code",props:V},{default:a(()=>[t("div",fm,[t("div",null,[l(u).screen.lt.md?(d(),I(S,{key:0,name:"tag",class:"inline-icon"})):k("",!0),b(" "+r(V.row.code),1)])]),l(u).screen.lt.md?(d(),h(W,{key:0},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(be)(V.row.datetime)),1)]),V.row.creator?(d(),h("div",gm,[e(S,{name:"person",class:"inline-icon"}),b(" "+r(V.row.creator.username),1)])):k("",!0),t("div",{class:Ve([V.row.amount>0?"text-green":"text-red","text-bold"])},[e(S,{class:"inline-icon",name:"money"}),b(" "+r(l(ta)(V.row.amount))+"Rp. "+r(l(L)(Math.abs(V.row.amount))),1)],2),t("div",null,[e(rt,{color:V.row.amount>0?"green":"red"},{default:a(()=>[b(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[V.row.type]),1)]),_:2},1032,["color"])]),e(xe,{text:V.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"datetime",props:V},{default:a(()=>[b(r(l(be)(V.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"type",props:V},{default:a(()=>[e(rt,{color:V.row.amount>0?"green":"red"},{default:a(()=>[b(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[V.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Q,{key:"amount",props:V,class:Ve(V.row.amount>0?"text-green":"text-red")},{default:a(()=>[b(r(l(ta)(V.row.amount)+l(L)(Math.abs(V.row.amount))),1)]),_:2},1032,["props","class"]),e(Q,{key:"notes",props:V},{default:a(()=>[e(xe,{text:V.row.notes,icon:y.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},bm=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),vm={class:"q-gutter-sm"},_m={class:"q-gutter-sm"},ym={class:"col q-pa-xs"},km={class:"row"},fl="Rincian Akun",wm={__name:"Detail",setup(p){const s=pe(),u=R("main");return(o,i)=>{const n=J("i-head"),f=J("authenticated-layout");return d(),h(W,null,[e(n,{title:fl}),e(f,null,{title:a(()=>[b(r(fl))]),"left-button":a(()=>[t("div",vm,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":a(()=>[t("div",_m,[o.$can("admin.finance-account.edit")?(d(),I(N,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=v=>l(Y).get(o.route("admin.finance-account.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",ym,[t("div",km,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Ct,{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=v=>u.value=v),dense:"","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Info Akun"}),e(it,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:u.value,"onUpdate:modelValue":i[3]||(i[3]=v=>u.value=v),animated:""},{default:a(()=>[e(dt,{name:"main"},{default:a(()=>[e(To)]),_:1}),e(dt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Po)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},hm=Object.freeze(Object.defineProperty({__proto__:null,default:wm},Symbol.toStringTag,{value:"Module"})),$m={style:{"margin-left":"-10px"}},Pt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(p){return(s,u)=>(d(),h("div",$m,[e(oa,{class:"full-width q-pl-none","model-value":p.modelValue,"onUpdate:modelValue":u[0]||(u[0]=o=>s.$emit("update:modelValue",o)),disable:p.disable,label:p.label},null,8,["model-value","disable","label"])]))}},xm={class:"q-gutter-sm"},Sm={class:"col col-md-6 q-pa-xs"},Vm={__name:"Editor",setup(p){const s=pe(),u=(s.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Qe({id:s.props.data.id,name:s.props.data.name,type:s.props.data.type,bank:s.props.data.bank,number:s.props.data.number,holder:s.props.data.holder,balance:parseFloat(s.props.data.balance),active:!!s.props.data.active,has_wallet_access:!!s.props.data.has_wallet_access,show_in_pos_payment:!!s.props.data.show_in_pos_payment,show_in_purchasing_payment:!!s.props.data.show_in_purchasing_payment,notes:s.props.data.notes}),i=Ne(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),n=()=>st({form:o,url:route("admin.finance-account.save")}),f=v=>{v==="cashier_cash"&&(o.show_in_pos_payment=!0)};return he(()=>{f(o.type)}),Ye(()=>o.type,v=>{f(v)}),(v,c)=>{const m=J("i-head"),g=J("authenticated-layout");return d(),h(W,null,[e(m,{title:u}),e(g,null,{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",xm,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=_=>v.$inertia.get(v.route("admin.finance-account.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Sm,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=_=>l(o).id=_)},null,512),[[wt,l(o).id]]),e(re,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":c[2]||(c[2]=_=>l(o).name=_),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":c[3]||(c[3]=_=>l(o).type=_),label:"Jenis Akun",options:l(i),"map-options":"","emit-value":"",error:!!l(o).errors.type,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),l(o).type=="bank"?(d(),h(W,{key:0},[e(re,{modelValue:l(o).bank,"onUpdate:modelValue":c[4]||(c[4]=_=>l(o).bank=_),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!l(o).errors.bank,disable:l(o).processing,"error-message":l(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(re,{modelValue:l(o).number,"onUpdate:modelValue":c[5]||(c[5]=_=>l(o).number=_),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!l(o).errors.number,disable:l(o).processing,"error-message":l(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(re,{modelValue:l(o).holder,"onUpdate:modelValue":c[6]||(c[6]=_=>l(o).holder=_),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!l(o).errors.holder,disable:l(o).processing,"error-message":l(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Me,{modelValue:l(o).balance,"onUpdate:modelValue":c[7]||(c[7]=_=>l(o).balance=_),label:"Saldo",lazyRules:"",disable:l(o).processing,"allow-negative":!0,error:!!l(o).errors.balance,errorMessage:l(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(re,{modelValue:l(o).notes,"onUpdate:modelValue":c[8]||(c[8]=_=>l(o).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Pt,{modelValue:l(o).active,"onUpdate:modelValue":c[9]||(c[9]=_=>l(o).active=_),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),c[14]||(c[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(Pt,{modelValue:l(o).show_in_pos_payment,"onUpdate:modelValue":c[10]||(c[10]=_=>l(o).show_in_pos_payment=_),disable:l(o).processing||l(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(Pt,{modelValue:l(o).show_in_purchasing_payment,"onUpdate:modelValue":c[11]||(c[11]=_=>l(o).show_in_purchasing_payment=_),disable:l(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(Pt,{modelValue:l(o).has_wallet_access,"onUpdate:modelValue":c[12]||(c[12]=_=>l(o).has_wallet_access=_),disable:l(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(N,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:c[13]||(c[13]=_=>l(Y).get(v.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},qm=Object.freeze(Object.defineProperty({__proto__:null,default:Vm},Symbol.toStringTag,{value:"Module"})),Cm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Tm={class:"q-pa-xs"},Pm={class:"q-my-sm text-subtitle"},Rm={class:"text-bold text-grey-8"},Om={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Dm={class:"text-bold text-grey-9"},Im={class:"text-grey-9"},Um={key:0},jm={key:1},Em={key:0},Am={class:"flex justify-end"},gl="Akun Kas",Mm={__name:"Index",setup(p){const s=pe(),u=we(),o=R(!1),i=R([]),n=R(null),f=R(null),v=at(f,117),c=R(!0),m=Ue({search:"",status:"active",type:"all",...ze()}),g=s.props.totalBalance,_=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),y=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],$=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],V=[{value:"all",label:"Semua"},...Ne(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];he(()=>{E()});const C=M=>ot({message:`Hapus Akun ${M.name}?`,url:route("admin.finance-account.delete",M.id),fetchItemsCallback:E,loading:c}),E=(M=null)=>{Fe({pagination:_,filter:m,props:M,rows:i,url:route("admin.finance-account.data"),loading:c,tableRef:n})},F=()=>E(),T=M=>Y.get(route("admin.finance-account.detail",{id:M.id})),{protectClick:U}=Ut(),P=U(T),q=Z(()=>u.screen.gt.sm?y:y.filter(M=>M.name==="name"||M.name==="action"));return(M,w)=>{const x=J("i-head"),j=J("authenticated-layout");return d(),h(W,null,[e(x,{title:gl}),e(j,null,Be({title:a(()=>[b(r(gl))]),"right-button":a(()=>[e(N,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=D=>o.value=!o.value)},null,8,["icon"]),M.$can("admin.finance-account.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=D=>l(Y).get(M.route("admin.finance-account.add")))})):k("",!0)]),default:a(()=>[t("div",Tm,[e(ie,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:a(()=>[t("div",Pm,[w[7]||(w[7]=b(" Total Saldo Akun Aktif: ",-1)),t("span",Rm,"Rp. "+r(l(L)(l(g))),1)])]),_:1}),e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Le({height:l(v)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":w[6]||(w[6]=D=>_.value=D),filter:m.search,loading:c.value,columns:q.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:E,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:D,message:O,filter:A})=>[t("div",Om,[t("span",null,r(O)+" "+r(A?" with term "+A:""),1)])]),body:a(D=>[e(Pe,{props:D,class:Ve([D.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(O=>l(P)(D.row,O),["stop"])},{default:a(()=>[e(Q,{key:"name",props:D,class:"wrap-column"},{default:a(()=>[t("div",Dm,r(D.row.name),1),t("div",Im,[D.row.type=="bank"?(d(),h("div",Um,[e(S,{name:"wallet",class:"inline-icon"}),b(" Rekening "+r(D.row.bank??"-")+" "+r(D.row.number??"-")+" a.n. "+r(D.row.holder??"-"),1)])):k("",!0),D.row.notes?(d(),h("div",jm,[e(S,{name:"notes"}),b(" "+r(D.row.notes),1)])):k("",!0)]),l(u).screen.lt.md?(d(),h("div",Em,[e(S,{name:"money",class:"inline-icon"}),b(" Rp. "+r(l(L)(D.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"type",props:D},{default:a(()=>[b(r(M.$CONSTANTS.FINANCE_ACCOUNT_TYPES[D.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:D},{default:a(()=>[b(r(l(L)(D.row.balance)),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:D},{default:a(()=>[t("div",Am,[M.$can("admin.finance-account.add")||M.$can("admin.finance-account.edit")||M.$can("admin.finance-account.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[5]||(w[5]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[M.$can("admin.finance-account.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(O=>l(Y).get(M.route("admin.finance-account.duplicate",D.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>[...w[8]||(w[8]=[b(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),M.$can("admin.finance-account.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(O=>l(Y).get(M.route("admin.finance-account.edit",D.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...w[9]||(w[9]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),M.$can("admin.finance-account.delete")?te((d(),I(oe,{key:2,onClick:G(O=>C(D.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...w[10]||(w[10]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Cm,[e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.type,"onUpdate:modelValue":[w[2]||(w[2]=D=>m.type=D),F],options:V,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:m.status,"onUpdate:modelValue":[w[3]||(w[3]=D=>m.status=D),F],options:$,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":w[4]||(w[4]=D=>m.search=D),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Nm=Object.freeze(Object.defineProperty({__proto__:null,default:Mm},Symbol.toStringTag,{value:"Module"})),Bm={class:"q-gutter-sm"},zm={class:"col col-md-6 q-pa-xs"},Fm={class:"row"},Lm={class:"detail"},Hm={key:0},Km={key:1},Ym={key:2},Wm={key:3},Qm={colspan:"3",class:"bg-white"},bl="Rincian Transaksi",Jm={__name:"Detail",setup(p){const s=pe();return(u,o)=>{const i=J("i-head"),n=J("i-link"),f=J("authenticated-layout");return d(),h(W,null,[e(i,{title:bl}),e(f,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Bm,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>u.$inertia.get(u.route("admin.finance-transaction.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},r(bl))]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",zm,[t("div",Fm,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",Lm,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.datetime)),1)]),l(s).props.data.account?(d(),h("tr",Hm,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[e(n,{href:u.route("admin.finance-account.detail",l(s).props.data.account.id)},{default:a(()=>[b(r(l(s).props.data.account.name),1)]),_:1},8,["href"]),l(s).props.data.account.type==="bank"?(d(),h(W,{key:0},[b(" Rek "+r(l(s).props.data.account.bank)+" an "+r(l(s).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),b(" "+r(l(s).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.type?(d(),h("tr",Km,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.FINANCE_TRANSACTION_TYPES[l(s).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(aa)(l(s).props.data.amount)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),h("tr",Ym,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),h("tr",Wm,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),h(W,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Qm,[e(na,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:Le([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Gm=Object.freeze(Object.defineProperty({__proto__:null,default:Jm},Symbol.toStringTag,{value:"Module"})),Xm={class:"q-gutter-sm"},Zm={class:"col col-md-6 q-pa-xs"},ec={__name:"Editor",setup(p){var v;const s=pe(),u=(s.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=s.props.accounts.map(c=>({label:c.name,value:c.id})),i=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],n=Qe({id:s.props.data.id,account_id:s.props.data.account_id,to_account_id:s.props.data.to_account_id??null,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((v=s.props.data)==null?void 0:v.image_path)??"",image:null}),f=()=>{sa(n,{datetime:"YYYY-MM-DD HH:mm:ss"}),st({form:n,url:route("admin.finance-transaction.save")})};return(c,m)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),h(W,null,[e(g,{title:u}),e(_,null,{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",Xm,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>c.$inertia.get(c.route("admin.finance-transaction.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Zm,[e(Je,{class:"row",onSubmit:G(f,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":m[1]||(m[1]=y=>l(n).id=y)},null,512),[[wt,l(n).id]]),e(Xe,{modelValue:l(n).datetime,"onUpdate:modelValue":m[2]||(m[2]=y=>l(n).datetime=y),label:"Waktu",error:!!l(n).errors.datetime,disable:l(n).processing,errorMessage:l(n).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":m[3]||(m[3]=y=>l(n).type=y),label:"Jenis Transaksi",options:i,"map-options":"","emit-value":"",error:!!l(n).errors.type,disable:l(n).processing,errorMessage:l(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{class:"custom-select",modelValue:l(n).account_id,"onUpdate:modelValue":m[4]||(m[4]=y=>l(n).account_id=y),label:l(n).type=="transfer"?"Akun Asal":"Akun",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.account_id,error:!!l(n).errors.account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),l(n).type=="transfer"?(d(),I(ce,{key:0,class:"custom-select",modelValue:l(n).to_account_id,"onUpdate:modelValue":m[5]||(m[5]=y=>l(n).to_account_id=y),label:"Akun Tujuan",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.to_account_id,error:!!l(n).errors.to_account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Me,{modelValue:l(n).amount,"onUpdate:modelValue":m[6]||(m[6]=y=>l(n).amount=y),label:"Jumlah",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.amount,errorMessage:l(n).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(re,{modelValue:l(n).notes,"onUpdate:modelValue":m[7]||(m[7]=y=>l(n).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(ja,{modelValue:l(n).image,"onUpdate:modelValue":m[8]||(m[8]=y=>l(n).image=y),"initial-image-path":l(n).image_path,disabled:l(n).processing,error:!!l(n).errors.image||!!l(n).errors.image_path,"error-message":l(n).errors.image||l(n).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(n).processing},null,8,["disable"]),e(N,{icon:"cancel",label:"Batal",disable:l(n).processing,onClick:m[9]||(m[9]=y=>l(Y).get(c.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},tc=Object.freeze(Object.defineProperty({__proto__:null,default:ec},Symbol.toStringTag,{value:"Module"})),ac={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},lc={class:"q-pa-xs"},oc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},nc={class:"text-grey-8"},sc={class:"text-bold text-grey-8"},rc={class:"flex justify-end no-wrap"},vl="Transaksi Kas",ic={__name:"Index",setup(p){const s=pe(),u=we(),o=R(!1),i=R([]),n=R(!0),f=R(null),v=R(null),c=at(v),m=Re().startOf("month").toDate(),g=Re().endOf("month").toDate(),_=[{label:"Semua",value:"all"},...s.props.accounts.map(w=>({label:w.name,value:w.id}))],y=[{value:"all",label:"Semua"},...Ne(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],$=Ue({search:"",type:"all",account_id:"all",start_date:m,end_date:g,...ze()}),V=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:u.screen.lt.md?"Item":"Kode",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{F()});const E=w=>ot({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${w.code}?`,url:route("admin.finance-transaction.delete",w.id),fetchItemsCallback:F,loading:n}),F=(w=null)=>{const x={...$,start_date:Re($.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Re($.end_date).format("YYYY-MM-DD HH:mm:ss")};Fe({pagination:V,filter:x,props:w,rows:i,url:route("admin.finance-transaction.data"),loading:n,tableRef:f})},T=()=>{F()},U=Z(()=>u.screen.gt.sm?C:C.filter(w=>w.name==="id"||w.name==="action")),P=R(null),q=R(!1),M=w=>{P.value=w,q.value=!0};return(w,x)=>{const j=J("i-head"),D=J("authenticated-layout");return d(),h(W,null,[e(j,{title:vl}),e(D,null,Be({title:a(()=>[b(r(vl))]),"right-button":a(()=>[e(N,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=O=>o.value=!o.value)},null,8,["icon"]),w.$can("admin.finance-transaction.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=O=>l(Y).get(w.route("admin.finance-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",lc,[e(Ee,{ref_key:"tableRef",ref:f,style:Le({height:l(c)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":x[8]||(x[8]=O=>V.value=O),filter:$.search,loading:n.value,columns:U.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:F,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:O,message:A,filter:B})=>[t("div",oc,[t("span",null,r(A)+" "+r(B?" with term "+B:""),1)])]),body:a(O=>[e(Pe,{props:O,class:"cursor-pointer",onClick:G(A=>l(Y).get(w.route("admin.finance-transaction.detail",{id:O.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:O},{default:a(()=>[t("div",null,[l(u).screen.lt.md?(d(),I(S,{key:0,class:"inline-icon",name:"tag"})):k("",!0),b(" "+r(O.row.code),1)]),l(u).screen.lt.md?(d(),h(W,{key:0},[t("div",nc,[e(S,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(l(be)(O.row.datetime)),1)]),t("div",sc,[e(S,{name:"wallet",class:"inline-icon"}),b(" "+r(O.row.account.name),1)]),t("div",{class:Ve(["text-bold",O.row.amount<0?"text-red":"text-green"])},[e(S,{name:"money",class:"inline-icon"}),b(" "+r(l(ta)(O.row.amount)+"Rp."+l(L)(Math.abs(O.row.amount))),1)],2),O.row.notes?(d(),I(xe,{key:0,icon:"notes",text:O.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(rt,{color:O.row.amount>0?"green":"red"},{default:a(()=>[b(r(O.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"datetime",props:O,class:"wrap-column"},{default:a(()=>[b(r(l(be)(O.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"account",props:O},{default:a(()=>{var A;return[b(r((A=O.row.account)==null?void 0:A.name),1)]}),_:2},1032,["props"]),e(Q,{key:"type",props:O},{default:a(()=>[b(r(w.$CONSTANTS.FINANCE_TRANSACTION_TYPES[O.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"amount",props:O,style:{"text-align":"right"}},{default:a(()=>[b(r(l(xt)(O.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:O,class:"wrap-column"},{default:a(()=>[b(r(O.row.notes),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:O},{default:a(()=>[t("div",rc,[e(N,{icon:"image",color:"primary",dense:"",flat:"",disable:O.row.image_path===null||O.row.image_path==="",onClick:G(A=>M(O.row.image_path),["stop"])},{default:a(()=>[O.row.image_path!=null?(d(),I(Rt,{key:0},{default:a(()=>[...x[10]||(x[10]=[b(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),w.$can("admin.finance-transaction.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[7]||(x[7]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[w.$can("admin.finance-transaction.delete")?te((d(),I(oe,{key:0,onClick:G(A=>E(O.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...x[11]||(x[11]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ca,{modelValue:q.value,"onUpdate:modelValue":x[9]||(x[9]=O=>q.value=O),imageUrl:`/${P.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:a(()=>[t("div",ac,[e(Xe,{modelValue:$.start_date,"onUpdate:modelValue":[x[2]||(x[2]=O=>$.start_date=O),T],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Xe,{modelValue:$.end_date,"onUpdate:modelValue":[x[3]||(x[3]=O=>$.end_date=O),T],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:$.type,"onUpdate:modelValue":[x[4]||(x[4]=O=>$.type=O),T],options:y,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:$.account_id,"onUpdate:modelValue":[x[5]||(x[5]=O=>$.account_id=O),T],label:"Akun",options:_,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":x[6]||(x[6]=O=>$.search=O),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},dc=Object.freeze(Object.defineProperty({__proto__:null,default:ic},Symbol.toStringTag,{value:"Module"}));function uc(){const p=R(new Date);let s=null;const u=()=>{p.value=new Date};return he(()=>{s=setInterval(u,1e3)}),ht(()=>{s&&clearInterval(s)}),{currentDateTime:p}}const mc={class:"text-grey-8 row items-center"},ga={__name:"DigitalClock",setup(p){const{currentDateTime:s}=uc();return(u,o)=>(d(),h("div",mc,[e(S,{name:"calendar_clock",class:"q-mr-sm"}),b(" "+r(l(be)(l(s))),1)]))}},cc={class:"q-pa-sm"},pc={class:"text-h6 q-my-md text-center"},fc={class:"row q-col-gutter-md q-mb-md"},gc={class:"col-xs-12 col-md-4"},bc={class:"col-xs-12 col-md-4"},vc={class:"col-xs-12 col-md-4"},_c={class:"row"},yc={class:"text-subtitle1 text-bold text-grey-9 q-mb-xs q-ml-md"},_l="Beranda",kc={__name:"Index",setup(p){const s=we(),u=pe(),o={reports:[{group:"Penjualan",items:[{label:"Laporan Penjualan",route:"admin.report.sales-order.index"},{label:"Laporan Daftar Pelanggan",route:"admin.report.customer.index"}]},{group:"Pembelian",items:[{label:"Laporan Pembelian",route:"admin.report.purchase-order.index"},{label:"Laporan Supplier",route:"admin.report.supplier.index"}]},{group:"Inventori",items:[{label:"Laporan Daftar Produk",route:"admin.report.product.index"},{label:"Laporan Daftar Stok",route:"admin.report.product-low-stock.index"}]},{group:"Keuangan",items:[{label:"Laporan Transaksi",route:"admin.report.index"},{label:"Laporan Akun",route:"admin.report.index"}]},{group:"Operasional",items:[{label:"Laporan Transaksi Biaya Operasional",route:"admin.report.operational-cost.index"}]}]};return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),h(W,null,[e(f,{title:_l}),e(v,null,{title:a(()=>[b(r(_l))]),"right-button":a(()=>[l(s).screen.gt.sm?(d(),I(ga,{key:0})):k("",!0)]),default:a(()=>[e(Ce,{class:"fit animated-background-container"},{default:a(()=>[t("div",cc,[t("div",pc,[b(" Selamat datang, "+r(l(u).props.auth.user.name)+". ",1),e(S,{name:"waving_hand",class:"waving-hand"})]),t("div",fc,[t("div",gc,[e(ie,{class:"full-height full-width",flat:""},{default:a(()=>[e(Ge,{class:"bg-green-3 text-grey-10"},{default:a(()=>[e(ea,null,{default:a(()=>[e(S,{name:"storefront",class:"q-mr-md"}),n[14]||(n[14]=b("Penjualan",-1))]),_:1})]),_:1}),e(je,null,{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:n[0]||(n[0]=c=>l(Y).get(i.route("admin.sales-order.index")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[15]||(n[15]=[b("Daftar Penjualan",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(oe,{clickable:"",onClick:n[1]||(n[1]=c=>l(Y).get(i.route("admin.sales-order.add")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[16]||(n[16]=[b("Penjualan Baru",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"add"})]),_:1})]),_:1})),[[se]]),e(Te),te((d(),I(oe,{clickable:"",onClick:n[2]||(n[2]=c=>l(Y).get(i.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[17]||(n[17]=[b("Konfirmasi Topup Deposit Pelanggan",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(oe,{clickable:"",onClick:n[3]||(n[3]=c=>l(Y).get(i.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[18]||(n[18]=[b("Transaksi Deposit Pelanggan",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),e(Te),te((d(),I(oe,{clickable:"",onClick:n[4]||(n[4]=c=>l(Y).get(i.route("admin.customer.index")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[19]||(n[19]=[b("Pelanggan",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(oe,{clickable:"",onClick:n[5]||(n[5]=c=>l(Y).get(i.route("admin.customer.add")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[20]||(n[20]=[b("Pelanggan Baru",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"add"})]),_:1})]),_:1})),[[se]])]),_:1})]),_:1})]),t("div",bc,[e(ie,{class:"full-height full-width",flat:""},{default:a(()=>[e(Ge,{class:"bg-light-blue-2 text-grey-10"},{default:a(()=>[e(ea,null,{default:a(()=>[e(S,{name:"inventory_2",class:"q-mr-md"}),n[21]||(n[21]=b("Inventori",-1))]),_:1})]),_:1}),e(je,null,{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:n[6]||(n[6]=c=>l(Y).get(i.route("admin.product.index")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[22]||(n[22]=[b("Produk",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(oe,{clickable:"",onClick:n[7]||(n[7]=c=>l(Y).get(i.route("admin.product.add")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[23]||(n[23]=[b("Produk Baru",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"add"})]),_:1})]),_:1})),[[se]]),e(Te),te((d(),I(oe,{clickable:"",onClick:n[8]||(n[8]=c=>l(Y).get(i.route("admin.stock-adjustment.index")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[24]||(n[24]=[b("Penyesuaian Stok",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),te((d(),I(oe,{clickable:"",onClick:n[9]||(n[9]=c=>l(Y).get(i.route("admin.stock-movement.index")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[25]||(n[25]=[b("Riwayat Stok",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right"})]),_:1})]),_:1})),[[se]])]),_:1})]),_:1})]),t("div",vc,[e(ie,{class:"full-height full-width",flat:""},{default:a(()=>[e(Ge,{class:"bg-deep-purple-2 text-grey-10"},{default:a(()=>[e(ea,null,{default:a(()=>[e(S,{name:"local_shipping",class:"q-mr-md"}),n[26]||(n[26]=b("Pembelian",-1))]),_:1})]),_:1}),e(je,null,{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:n[10]||(n[10]=c=>l(Y).get(i.route("admin.purchase-order.add")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[27]||(n[27]=[b("Pembelian Baru",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"add"})]),_:1})]),_:1})),[[se]]),te((d(),I(oe,{clickable:"",onClick:n[11]||(n[11]=c=>l(Y).get(i.route("admin.purchase-order.index")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[28]||(n[28]=[b("Pembelian",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),e(Te),te((d(),I(oe,{clickable:"",onClick:n[12]||(n[12]=c=>l(Y).get(i.route("admin.supplier.index")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[29]||(n[29]=[b("Supplier Baru",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"add"})]),_:1})]),_:1})),[[se]]),te((d(),I(oe,{clickable:"",onClick:n[13]||(n[13]=c=>l(Y).get(i.route("admin.supplier.index")))},{default:a(()=>[e(z,null,{default:a(()=>[...n[30]||(n[30]=[b("Supplier",-1)])]),_:1}),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right"})]),_:1})]),_:1})),[[se]])]),_:1})]),_:1})])]),e(ie,{class:"bg-orange-3 text-grey-10 full-width",flat:""},{default:a(()=>[e(Ge,null,{default:a(()=>[e(ea,null,{default:a(()=>[e(S,{name:"analytics",class:"q-mr-sm"}),n[31]||(n[31]=b(" Laporan",-1))]),_:1})]),_:1})]),_:1}),e(ie,{flat:"",class:"q-pa-md bg-grey-1 full-width"},{default:a(()=>[t("div",_c,[(d(!0),h(W,null,Ie(o.reports,c=>(d(),h("div",{key:c.group,class:"col-xs-12 col-sm-3 q-mb-md"},[t("div",yc,r(c.group),1),e(je,null,{default:a(()=>[(d(!0),h(W,null,Ie(c.items,m=>te((d(),I(oe,{key:m,clickable:"",onClick:g=>l(Y).get(i.route(m.route))},{default:a(()=>[e(z,null,{default:a(()=>[b(r(m.label),1)]),_:2},1024),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"])),[[se]])),128))]),_:2},1024)]))),128))])]),_:1})])]),_:1})]),_:1})],64)}}},wc=bt(kc,[["__scopeId","data-v-5f1c2b86"]]),hc=Object.freeze(Object.defineProperty({__proto__:null,default:wc},Symbol.toStringTag,{value:"Module"})),$c={class:"q-gutter-sm"},xc={class:"col col-md-6 q-pa-xs"},Sc={__name:"Editor",setup(p){const s=pe(),u=(s.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description}),i=()=>st({form:o,url:route("admin.operational-cost-category.save")});return(n,f)=>{const v=J("i-head"),c=J("authenticated-layout");return d(),h(W,null,[e(v,{title:u}),e(c,null,{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",$c,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=m=>l(Y).get(n.route("admin.operational-cost-category.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",xc,[e(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=m=>l(o).id=m)},null,512),[[wt,l(o).id]]),e(re,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":f[2]||(f[2]=m=>l(o).name=m),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[m=>m&&m.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(o).description,"onUpdate:modelValue":f[3]||(f[3]=m=>l(o).description=m),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(N,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:f[4]||(f[4]=m=>l(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Vc=Object.freeze(Object.defineProperty({__proto__:null,default:Sc},Symbol.toStringTag,{value:"Module"})),qc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Cc={class:"q-pa-xs"},Tc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Pc={key:0,class:"text-grey-8"},Rc={class:"flex justify-end"},yl="Kategori Biaya Operasional",Oc={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Ue({search:"",...ze()}),m=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{y()});const _=V=>ot({message:`Hapus Kategori Biaya ${V.name}?`,url:route("admin.operational-cost-category.delete",V.id),fetchItemsCallback:y,loading:i}),y=(V=null)=>{Fe({pagination:m,filter:c,props:V,rows:o,url:route("admin.operational-cost-category.data"),loading:i,tableRef:n})},$=Z(()=>s.screen.gt.sm?g:g.filter(V=>V.name==="name"||V.name==="action"));return(V,C)=>{const E=J("i-head"),F=J("authenticated-layout");return d(),h(W,null,[e(E,{title:yl}),e(F,null,Be({title:a(()=>[b(r(yl))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:C[0]||(C[0]=T=>u.value=!u.value)},null,8,["icon"]),V.$can("admin.operational-cost-category.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:C[1]||(C[1]=T=>l(Y).get(V.route("admin.operational-cost-category.add")))})):k("",!0)]),default:a(()=>[t("div",Cc,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Le({height:l(v)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":C[4]||(C[4]=T=>m.value=T),filter:c.search,loading:i.value,columns:$.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:T,message:U,filter:P})=>[t("div",Tc,[t("span",null,r(U)+" "+r(P?" with term "+P:""),1)])]),body:a(T=>[e(Pe,{props:T},{default:a(()=>[e(Q,{key:"name",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[T.row.description?(d(),h("div",Pc,[e(S,{name:"description"}),b(" "+r(T.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"description",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:T},{default:a(()=>[t("div",Rc,[V.$can("admin.operational-cost-category.add")||V.$can("admin.operational-cost-category.edit")||V.$can("admin.operational-cost-category.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:C[3]||(C[3]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[V.$can("admin.operational-cost-category.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(U=>l(Y).get(V.route("admin.operational-cost-category.duplicate",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>[...C[5]||(C[5]=[b("Duplikat",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),V.$can("admin.operational-cost-category.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(U=>l(Y).get(V.route("admin.operational-cost-category.edit",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...C[6]||(C[6]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),V.$can("admin.operational-cost-category.delete")?te((d(),I(oe,{key:2,onClick:G(U=>_(T.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...C[7]||(C[7]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",qc,[e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":C[2]||(C[2]=T=>c.search=T),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Dc=Object.freeze(Object.defineProperty({__proto__:null,default:Oc},Symbol.toStringTag,{value:"Module"})),Ic={class:"q-gutter-sm"},Uc={class:"col col-md-6 q-pa-xs"},jc={class:"row"},Ec={class:"detail"},Ac={key:0},Mc={key:1},Nc={key:2},Bc={key:3},zc={colspan:"3",class:"bg-white"},kl="Rincian Biaya Operasional",Fc={__name:"Detail",setup(p){const s=pe();return(u,o)=>{const i=J("i-head"),n=J("i-link"),f=J("authenticated-layout");return d(),h(W,null,[e(i,{title:kl}),e(f,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Ic,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=v=>u.$inertia.get(u.route("admin.operational-cost.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},r(kl))]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Uc,[t("div",jc,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[o[22]||(o[22]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",Ec,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(la)(l(s).props.data.date)),1)]),l(s).props.data.finance_account?(d(),h("tr",Ac,[o[7]||(o[7]=t("td",null,"Akun",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,[e(n,{href:u.route("admin.finance-account.detail",l(s).props.data.finance_account.id)},{default:a(()=>[b(r(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),l(s).props.data.finance_account.type==="bank"?(d(),h(W,{key:0},[o[5]||(o[5]=t("br",null,null,-1)),b(" Rek "+r(l(s).props.data.finance_account.bank)+" an "+r(l(s).props.data.finance_account.holder)+" ",1),o[6]||(o[6]=t("br",null,null,-1)),b(" "+r(l(s).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.category?(d(),h("tr",Mc,[o[9]||(o[9]=t("td",null,"Kategori",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.category.name),1)])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Deskripsi",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.description),1)]),t("tr",null,[o[13]||(o[13]=t("td",null,"Jumlah",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(L)(l(s).props.data.amount)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Catatan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(d(),h("tr",Nc,[o[17]||(o[17]=t("td",null,"Dibuat",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(d(),h("tr",Bc,[o[19]||(o[19]=t("td",null,"Diperbarui",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(d(),h(W,{key:4},[o[21]||(o[21]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",zc,[e(na,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:Le([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Lc=Object.freeze(Object.defineProperty({__proto__:null,default:Fc},Symbol.toStringTag,{value:"Module"})),Hc={class:"row items-center justify-end"},Kc={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(p,{emit:s}){const u=p,o=s,i=R(""),n=R(""),f=m=>{let g=!0;const _=u.minDate?ut.formatDate(u.minDate,"YYYY/MM/DD"):null,y=u.maxDate?ut.formatDate(u.maxDate,"YYYY/MM/DD"):null;return _&&(g=g&&ut.isBetweenDates(m,_,"2999/01/01",{inclusiveFrom:!0})),y&&(g=g&&ut.isBetweenDates(m,"1900/01/01",y,{inclusiveTo:!0})),g},v=Z(()=>[m=>!!m||"Tanggal harus diisi",m=>{const g=ut.extractDate(m,u.displayFormat);if(!g)return"Format tanggal tidak valid";g.setHours(0,0,0,0);const _=u.minDate?new Date(u.minDate):null;_&&_.setHours(0,0,0,0);const y=u.maxDate?new Date(u.maxDate):null;return y&&y.setHours(0,0,0,0),_&&g<_?`Tanggal tidak boleh kurang dari ${ut.formatDate(u.minDate,u.displayFormat)}`:y&&g>y?`Tanggal tidak boleh lebih dari ${ut.formatDate(u.maxDate,u.displayFormat)}`:(o("update:modelValue",g),!0)}]);Ye(()=>u.modelValue,m=>{m instanceof Date?(n.value=ut.formatDate(m,"YYYY/MM/DD"),i.value=ut.formatDate(m,u.displayFormat)):(n.value="",i.value="")},{immediate:!0});const c=m=>{const g=m!==null?new Date(m):null;o("update:modelValue",g),i.value=g?ut.formatDate(g,u.displayFormat):null};return(m,g)=>(d(),I(re,{modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=_=>i.value=_),label:u.label,readonly:u.readonly,disable:u.disable,error:u.error,"error-message":u.errorMessage,mask:u.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:v.value},{append:a(()=>[e(N,{icon:"event",disable:u.disable||u.readonly,flat:"",rounded:"",dense:""},{default:a(()=>[e(ms,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(cs,{modelValue:n.value,"onUpdate:modelValue":[g[0]||(g[0]=_=>n.value=_),c],options:f},{default:a(()=>[t("div",Hc,[te(e(N,{label:"Close",color:"primary",flat:""},null,512),[[me]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},ra=bt(Kc,[["__scopeId","data-v-b418ccfb"]]);function Ro(p,s=!1){const u=p.map(f=>({value:f.id,label:f.name})),o=s?[{value:"all",label:"Semua"},...u]:u,i=R([...o]);return{filteredCostCategories:i,filterCostCategory:(f,v)=>{const c=f.toLowerCase();v(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(c))})},costCategoryOptions:o}}const Yc={class:"q-gutter-sm"},Wc={class:"col col-md-6 q-pa-xs"},Qc={__name:"Editor",setup(p){var _;const s=pe(),u=(s.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=Ro(s.props.categories),i=s.props.finance_accounts.map(y=>({label:y.name,value:y.id})),n=R(o),f=R([...n.value]),v=Qe({id:s.props.data.id,finance_account_id:s.props.data.finance_account_id??null,category_id:s.props.data.category_id??null,date:new Date(s.props.data.date),description:s.props.data.description,notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((_=s.props.data)==null?void 0:_.image_path)??null,image:null}),c=()=>{sa(v,{date:"YYYY-MM-DD"}),st({form:v,url:route("admin.operational-cost.save")})},m=(y,$)=>{$(()=>{f.value=n.value.filter(V=>V.label.toLowerCase().includes(y.toLowerCase()))})},g=()=>{v.image_path=null};return(y,$)=>{const V=J("i-head"),C=J("authenticated-layout");return d(),h(W,null,[e(V,{title:u}),e(C,null,{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",Yc,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:$[0]||($[0]=E=>y.$inertia.get(y.route("admin.operational-cost.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Wc,[e(Je,{class:"row",onSubmit:G(c,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":$[1]||($[1]=E=>l(v).id=E)},null,512),[[wt,l(v).id]]),e(ce,{autofocus:"",modelValue:l(v).category_id,"onUpdate:modelValue":$[2]||($[2]=E=>l(v).category_id=E),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:f.value,"map-options":"","emit-value":"",onFilter:m,error:!!l(v).errors.category_id,disable:l(v).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(z,null,{default:a(()=>[...$[10]||($[10]=[b("Kategori tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(ra,{modelValue:l(v).date,"onUpdate:modelValue":$[3]||($[3]=E=>l(v).date=E),label:"Tanggal",error:!!l(v).errors.date,disable:l(v).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(re,{modelValue:l(v).description,"onUpdate:modelValue":$[4]||($[4]=E=>l(v).description=E),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!l(v).errors.description,disable:l(v).processing,"error-message":l(v).errors.description,rules:[E=>E&&E.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Me,{modelValue:l(v).amount,"onUpdate:modelValue":$[5]||($[5]=E=>l(v).amount=E),label:"Jumlah",lazyRules:"",disable:l(v).processing,error:!!l(v).errors.amount,errorMessage:l(v).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ce,{class:"custom-select",modelValue:l(v).finance_account_id,"onUpdate:modelValue":$[6]||($[6]=E=>l(v).finance_account_id=E),label:"Sumber Dana",options:l(i),"map-options":"","emit-value":"",clearable:"",errorMessage:l(v).errors.finance_account_id,error:!!l(v).errors.finance_account_id,disable:l(v).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(re,{modelValue:l(v).notes,"onUpdate:modelValue":$[7]||($[7]=E=>l(v).notes=E),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(v).processing,error:!!l(v).errors.notes,"error-message":l(v).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ja,{modelValue:l(v).image,"onUpdate:modelValue":$[8]||($[8]=E=>l(v).image=E),"initial-image-path":l(v).image_path,disabled:l(v).processing,error:!!l(v).errors.image||!!l(v).errors.image_path,"error-message":l(v).errors.image||l(v).errors.image_path,onImageCleared:g},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(v).processing},null,8,["disable"]),e(N,{icon:"cancel",label:"Batal",disable:l(v).processing,onClick:$[9]||($[9]=E=>l(Y).get(y.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Jc=Object.freeze(Object.defineProperty({__proto__:null,default:Qc},Symbol.toStringTag,{value:"Module"})),Gc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Xc={class:"q-pa-xs"},Zc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ep={key:0},tp={key:1},ap={key:0},lp={class:"flex justify-end no-wrap"},wl="Biaya Operasional",op={__name:"Index",setup(p){const s=pe(),u=we(),o=R(!1),i=R(null),n=R(null),f=at(n),v=R(null),c=R(!1),m=Re().startOf("month").toDate(),g=Re().endOf("month").toDate(),_=R([]),y=R(!0),{costCategoryOptions:$}=Ro(s.props.categories),V=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...$],{accountOptions:C}=ps(s.props.finance_accounts),E=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...C],F=Ue({search:"",finance_account_id:"all",category_id:"all",start_date:m,end_date:g,...ze()}),T=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),U=[{name:"code",label:u.screen.lt.md?"Item":"Kode",field:"code",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{q()});const P=j=>ot({message:`Hapus Biaya ${j.code}?`,url:route("admin.operational-cost.delete",j.id),fetchItemsCallback:q,loading:y}),q=(j=null)=>{const D={...F,start_date:Re(F.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Re(F.end_date).format("YYYY-MM-DD HH:mm:ss")};Fe({pagination:T,filter:D,props:j,rows:_,url:route("admin.operational-cost.data"),loading:y,tableRef:i})},M=()=>{q()},w=Z(()=>u.screen.gt.sm?U:U.filter(j=>j.name==="code"||j.name==="action")),x=j=>{v.value=j,c.value=!0};return(j,D)=>{const O=J("i-head"),A=J("authenticated-layout");return d(),h(W,null,[e(O,{title:wl}),e(A,null,Be({title:a(()=>[b(r(wl))]),"right-button":a(()=>[e(N,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=B=>o.value=!o.value)},null,8,["icon"]),j.$can("admin.operational-cost.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[1]||(D[1]=B=>l(Y).get(j.route("admin.operational-cost.add")))})):k("",!0)]),default:a(()=>[t("div",Xc,[e(Ee,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:T.value,"onUpdate:pagination":D[8]||(D[8]=B=>T.value=B),filter:F.search,loading:y.value,columns:w.value,rows:_.value,"rows-per-page-options":[10,25,50],style:Le({height:l(f)}),onRequest:q,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:B,message:ne,filter:fe})=>[t("div",Zc,[t("span",null,r(ne)+" "+r(fe?" with term "+fe:""),1)])]),body:a(B=>[e(Pe,{props:B,class:"cursor-pointer",onClick:G(ne=>l(Y).get(j.route("admin.operational-cost.detail",{id:B.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"code",props:B,class:"wrap-column"},{default:a(()=>[l(u).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[b(" Kode: ")],64)),b(" "+r(B.row.code)+" ",1),l(u).screen.gt.sm?k("",!0):(d(),h(W,{key:1},[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(la)(B.row.date)),1)]),B.row.finance_account?(d(),h("div",ep,[e(S,{name:"wallet",class:"inline-icon"}),b(" "+r(B.row.finance_account.name),1)])):k("",!0),B.row.category?(d(),h("div",tp,[e(S,{name:"category",class:"inline-icon"}),b(" "+r(B.row.category.name),1)])):k("",!0),e(xe,{icon:"description",text:B.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(S,{name:"money",class:"inline-icon"}),b(" Rp. "+r(l(L)(B.row.amount)),1)]),e(xe,{icon:"notes",text:B.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(Q,{key:"date",props:B,class:"wrap-column"},{default:a(()=>[b(r(l(la)(B.row.date)),1)]),_:2},1032,["props"]),e(Q,{key:"finance_account_id",props:B,class:"wrap-column"},{default:a(()=>[b(r(B.row.finance_account?B.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(Q,{key:"category_id",props:B},{default:a(()=>[B.row.category?(d(),h("div",ap,r(B.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"description",props:B},{default:a(()=>[e(xe,{text:B.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"amount",props:B},{default:a(()=>[b(r(l(L)(B.row.amount)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:B},{default:a(()=>[e(xe,{text:B.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:B},{default:a(()=>[t("div",lp,[e(N,{icon:"image",color:"primary",dense:"",flat:"",disable:B.row.image_path===null||B.row.image_path==="",onClick:G(ne=>x(B.row.image_path),["stop"])},{default:a(()=>[B.row.image_path!=null?(d(),I(Rt,{key:0},{default:a(()=>[...D[10]||(D[10]=[b(" Lihat Bukti ",-1)])]),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),j.$can("admin.operational-cost.add")||j.$can("admin.operational-cost.edit")||j.$can("admin.operational-cost.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[7]||(D[7]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[j.$can("admin.operational-cost.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(ne=>l(Y).get(j.route("admin.operational-cost.duplicate",B.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>[...D[11]||(D[11]=[b(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),j.$can("admin.operational-cost.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(ne=>l(Y).get(j.route("admin.operational-cost.edit",B.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...D[12]||(D[12]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),j.$can("admin.operational-cost.delete")?te((d(),I(oe,{key:2,onClick:G(ne=>P(B.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...D[13]||(D[13]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(ca,{modelValue:c.value,"onUpdate:modelValue":D[9]||(D[9]=B=>c.value=B),imageUrl:`/${v.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",Gc,[e(Xe,{modelValue:F.start_date,"onUpdate:modelValue":[D[2]||(D[2]=B=>F.start_date=B),M],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Xe,{modelValue:F.end_date,"onUpdate:modelValue":[D[3]||(D[3]=B=>F.end_date=B),M],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:F.category_id,"onUpdate:modelValue":[D[4]||(D[4]=B=>F.category_id=B),M],options:V,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:F.finance_account_id,"onUpdate:modelValue":[D[5]||(D[5]=B=>F.finance_account_id=B),M],options:E,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:F.search,"onUpdate:modelValue":D[6]||(D[6]=B=>F.search=B),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},np=Object.freeze(Object.defineProperty({__proto__:null,default:op},Symbol.toStringTag,{value:"Module"})),sp={class:"q-gutter-sm"},rp={class:"col col-md-6 q-pa-xs"},ip={__name:"Editor",setup(p){const s=we(),u=pe(),o=(u.props.data.id?"Edit":"Tambah")+" Kategori Produk",i=Qe({id:u.props.data.id,name:u.props.data.name,description:u.props.data.description}),n=()=>st({form:i,url:route("admin.product-category.save")});return(f,v)=>{const c=J("i-head"),m=J("authenticated-layout");return d(),h(W,null,[e(c,{title:o}),e(m,{"show-drawer-button":!l(s).screen.lt.md},Be({title:a(()=>[b(r(o))]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",rp,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=g=>l(i).id=g)},null,512),[[wt,l(i).id]]),e(re,{autofocus:"",modelValue:l(i).name,"onUpdate:modelValue":v[2]||(v[2]=g=>l(i).name=g),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(i).errors.name,disable:l(i).processing,"error-message":l(i).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(i).description,"onUpdate:modelValue":v[3]||(v[3]=g=>l(i).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.description,"error-message":l(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"]),e(N,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:v[4]||(v[4]=g=>l(i).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",sp,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=g=>l(Y).get(f.route("admin.product-category.index")))})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},dp=Object.freeze(Object.defineProperty({__proto__:null,default:ip},Symbol.toStringTag,{value:"Module"})),up={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},mp={class:"q-pa-xs"},cp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},pp={key:0,class:"text-grey-8"},fp={class:"flex justify-end"},hl="Kategori Produk",gp={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Ue({search:"",...ze()}),m=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{y()});const _=V=>ot({message:`Hapus Kategori ${V.name}?`,url:route("admin.product-category.delete",V.id),fetchItemsCallback:y,loading:i}),y=(V=null)=>{Fe({pagination:m,filter:c,props:V,rows:o,url:route("admin.product-category.data"),loading:i,tableRef:n})},$=Z(()=>s.screen.gt.sm?g:g.filter(V=>V.name==="name"||V.name==="action"));return(V,C)=>{const E=J("i-head"),F=J("authenticated-layout");return d(),h(W,null,[e(E,{title:hl}),e(F,null,Be({title:a(()=>[b(r(hl))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:C[0]||(C[0]=T=>u.value=!u.value)},null,8,["icon"]),V.$can("admin.product-category.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:C[1]||(C[1]=T=>l(Y).get(V.route("admin.product-category.add")))})):k("",!0)]),default:a(()=>[t("div",mp,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":C[4]||(C[4]=T=>m.value=T),filter:c.search,loading:i.value,columns:$.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Le({height:l(v)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:T,message:U,filter:P})=>[t("div",cp,[t("span",null,r(U)+" "+r(P?" with term "+P:""),1)])]),body:a(T=>[e(Pe,{props:T},{default:a(()=>[e(Q,{key:"name",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[T.row.description?(d(),h("div",pp,[e(S,{name:"description"}),b(" "+r(T.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"description",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:T},{default:a(()=>[t("div",fp,[V.$can("admin.product-category.add")||V.$can("admin.product-category.edit")||V.$can("admin.product-category.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:C[3]||(C[3]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[V.$can("admin.product-category.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(U=>l(Y).get(V.route("admin.product-category.duplicate",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>[...C[5]||(C[5]=[b("Duplikat",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),V.$can("admin.product-category.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(U=>l(Y).get(V.route("admin.product-category.edit",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...C[6]||(C[6]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),V.$can("admin.product-category.delete")?te((d(),I(oe,{key:2,onClick:G(U=>_(T.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...C[7]||(C[7]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",up,[e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":C[2]||(C[2]=T=>c.search=T),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},bp=Object.freeze(Object.defineProperty({__proto__:null,default:gp},Symbol.toStringTag,{value:"Module"})),vp={class:"detail"},_p={key:0},yp={key:1},kp={key:2},wp={class:"detail"},hp={class:"detail"},$p={key:0},xp={key:0},Sp={key:0},Vp={key:0},qp={class:"detail"},Cp={key:0,class:"q-pt-md"},Oo={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(p){const s=p;we();const u=i=>`${i>0?L((i-s.product.cost)/s.product.cost*100,2):0}%`,o=()=>{ot({message:`Hapus Produk ${s.product.name}?`,url:route("admin.product.delete",s.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(i,n)=>{const f=J("i-link");return d(),h("div",null,[n[39]||(n[39]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",vp,[t("tbody",null,[t("tr",null,[n[1]||(n[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),n[2]||(n[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(p.product.name),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"Deskirpsi",-1)),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,r(p.product.description),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Barcode",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(p.product.barcode),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Jenis Produk",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.PRODUCT_TYPES[p.product.type]),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Kategori",-1)),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,r(p.product.category?p.product.category.name:"--Tidak memiliki kategori--"),1)]),i.$can("admin.product:view-supplier")?(d(),h("tr",_p,[n[11]||(n[11]=t("td",null,"Supplier",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[p.product.supplier?(d(),I(f,{key:0,href:i.route("admin.supplier.detail",{id:p.product.supplier.id})},{default:a(()=>[b(r(p.product.supplier.name),1)]),_:1},8,["href"])):(d(),h(W,{key:1},[b(r("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[n[13]||(n[13]=t("td",null,"Status",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,r(p.product.active?"Aktif":"Tidak Aktif"),1)]),p.product.created_at?(d(),h("tr",yp,[n[16]||(n[16]=t("td",null,"Dibuat Oleh",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[p.product.creator?(d(),h(W,{key:0},[e(f,{href:i.route("admin.user.detail",{id:p.product.creator})},{default:a(()=>[b(r(p.product.creator.username),1)]),_:1},8,["href"]),n[15]||(n[15]=b(" - ",-1))],64)):k("",!0),b(" "+r(l(be)(p.product.created_at)),1)])])):k("",!0),p.product.updater?(d(),h("tr",kp,[n[19]||(n[19]=t("td",null,"Diperbarui oleh",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,[p.product.updater?(d(),h(W,{key:0},[e(f,{href:i.route("admin.user.detail",{id:p.product.updater})},{default:a(()=>[b(r(p.product.updater.username),1)]),_:1},8,["href"]),n[18]||(n[18]=b(" - ",-1))],64)):k("",!0),b(" "+r(l(be)(p.product.updated_at)),1)])])):k("",!0)])]),n[40]||(n[40]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",wp,[t("tbody",null,[t("tr",null,[n[21]||(n[21]=t("td",{style:{width:"120px"}},"Stok",-1)),n[22]||(n[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(L)(p.product.stock))+" "+r(p.product.uom),1)]),t("tr",null,[n[23]||(n[23]=t("td",null,"Stok Minimum",-1)),n[24]||(n[24]=t("td",null,":",-1)),t("td",null,r(l(L)(p.product.min_stock))+" "+r(p.product.uom),1)]),t("tr",null,[n[25]||(n[25]=t("td",null,"Barcode",-1)),n[26]||(n[26]=t("td",null,":",-1)),t("td",null,r(p.product.barcode),1)])])]),n[41]||(n[41]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",hp,[t("tbody",null,[t("tr",null,[n[27]||(n[27]=t("td",null,"Opsi Harga",-1)),n[28]||(n[28]=t("td",null,":",-1)),t("td",null,r(p.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),i.$can("admin.product:view-cost")?(d(),h("tr",$p,[n[29]||(n[29]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),n[30]||(n[30]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(l(L)(p.product.cost)),1)])):k("",!0),t("tr",null,[n[31]||(n[31]=t("td",null,"Harga Eceran",-1)),n[32]||(n[32]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+r(l(L)(p.product.price_1))+" ",1),i.$can("admin.product:view-cost")?(d(),h("span",xp," ("+r(u(p.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[n[33]||(n[33]=t("td",null,"Harga Partai",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+r(l(L)(p.product.price_2))+" ",1),i.$can("admin.product:view-cost")?(d(),h("span",Sp," ("+r(u(p.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[n[35]||(n[35]=t("td",null,"Harga Grosir",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,[b(" Rp. "+r(l(L)(p.product.price_3))+" ",1),i.$can("admin.product:view-cost")?(d(),h("span",Vp," ("+r(u(p.product.price_3))+") ",1)):k("",!0)])])])]),n[42]||(n[42]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",qp,[t("tbody",null,[t("tr",null,[n[37]||(n[37]=t("td",{style:{width:"120px"}},"Catatan",-1)),n[38]||(n[38]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(p.product.notes),1)])])]),i.$can("admin.product.delete")?(d(),h("div",Cp,[e(N,{icon:"delete",label:"Hapus",color:"negative",onClick:n[0]||(n[0]=v=>o())})])):k("",!0)])}}},Tp=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),Pp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Rp={key:0},Do={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(p){const s=p,u=we(),o=R([]),i=R(!0),n=Ue({...ze()}),f=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let v=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"quantity_before",label:"Stok Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Stok Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{c()});const c=(g=null)=>Fe({pagination:f,filter:n,props:g,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:s.productId}}),loading:i}),m=Z(()=>u.screen.lt.sm?v.filter(g=>g.name==="id"||g.name==="quantity"):v);return(g,_)=>(d(),I(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:f.value,"onUpdate:pagination":_[0]||(_[0]=y=>f.value=y),filter:n.search,loading:i.value,columns:m.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:c,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:V})=>[t("div",Pp,[t("span",null,r($)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Pe,{props:y},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),b(" "+r(y.row.code),1)]),t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(be)(y.row.created_at)),1)]),t("div",null,[e(rt,null,{default:a(()=>[b(r(g.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type]),1)]),_:2},1024)]),l(u).screen.lt.sm?(d(),h(W,{key:0},[t("div",{class:Ve(y.row.quantity>0?"text-positive":"text-negative")},[e(S,{class:"inline-icon",name:"compare_arrows"}),b(" "+r(l(L)(y.row.quantity_before))+" "+r(y.row.uom)+"  "+r(l(L)(y.row.quantity_after))+" "+r(y.row.uom),1)],2),e(xe,{text:y.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"created_at",props:y},{default:a(()=>[b(r(l(be)(y.row.created_at)),1)]),_:2},1032,["props"]),e(Q,{key:"type",props:y},{default:a(()=>[b(r(g.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type])+" ",1),y.row.ref?(d(),h("span",Rp,r(y.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"quantity_before",props:y},{default:a(()=>[b(r(l(L)(y.row.quantity_before)),1)]),_:2},1032,["props"]),e(Q,{key:"quantity",props:y,class:Ve(y.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[b(r(l(xt)(y.row.quantity))+" ",1),l(u).screen.lt.sm?(d(),h(W,{key:0},[b(r(y.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Q,{key:"quantity_after",props:y},{default:a(()=>[b(r(l(L)(y.row.quantity_after)),1)]),_:2},1032,["props"]),e(Q,{key:"uom",props:y},{default:a(()=>[b(r(y.row.uom),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y},{default:a(()=>[e(xe,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Op=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),Dp={class:"q-gutter-sm"},Ip={class:"q-gutter-sm"},Up={class:"row justify-center"},jp={class:"col col-lg-6 q-pa-xs"},Ep={class:"row"},Ap={__name:"Detail",setup(p){const s=pe(),u=`Rincian Produk #${s.props.data.id}`,o=R("main");return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),h(W,null,[e(f,{title:u}),e(v,{"show-drawer-button":!0},{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",Dp,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>l(Y).get(i.route("admin.product.index")))})])]),"right-button":a(()=>[t("div",Ip,[i.$can("admin.product.edit")?(d(),I(N,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[1]||(n[1]=c=>l(Y).get(i.route("admin.product.edit",{id:l(s).props.data.id}))),title:"Edit produk"})):k("",!0),i.$can("admin.product.add")?(d(),I(N,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[2]||(n[2]=c=>l(Y).get(i.route("admin.product.duplicate",{id:l(s).props.data.id}))),title:"Duplikat produk"})):k("",!0),i.$can("admin.product.add")?(d(),I(N,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:n[3]||(n[3]=c=>l(Y).get(i.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:a(()=>[t("div",Up,[t("div",jp,[t("div",Ep,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Ct,{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=c=>o.value=c),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Info Utama"}),e(it,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=c=>o.value=c),animated:""},{default:a(()=>[e(dt,{name:"main"},{default:a(()=>[e(Oo,{product:l(s).props.data},null,8,["product"])]),_:1}),e(dt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Do,{"product-id":l(s).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},Mp=Object.freeze(Object.defineProperty({__proto__:null,default:Ap},Symbol.toStringTag,{value:"Module"})),zt=It({name:"QBtnToggle",props:{...so,modelValue:{required:!0},options:{type:Array,required:!0,validator:p=>p.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(p,{slots:s,emit:u}){const o=Z(()=>p.options.find(y=>y.value===p.modelValue)!==void 0),i=Z(()=>({type:"hidden",name:p.name,value:p.modelValue})),n=bs(i),f=Z(()=>fs(p)),v=Z(()=>({rounded:p.rounded,dense:p.dense,...f.value})),c=Z(()=>p.options.map((y,$)=>{const{attrs:V,value:C,slot:E,...F}=y;return{slot:E,props:{key:$,"aria-pressed":C===p.modelValue?"true":"false",...V,...F,...v.value,disable:p.disable===!0||F.disable===!0,color:C===p.modelValue?g(F,"toggleColor"):g(F,"color"),textColor:C===p.modelValue?g(F,"toggleTextColor"):g(F,"textColor"),noCaps:g(F,"noCaps")===!0,noWrap:g(F,"noWrap")===!0,size:g(F,"size"),padding:g(F,"padding"),ripple:g(F,"ripple"),stack:g(F,"stack")===!0,stretch:g(F,"stretch")===!0,onClick(T){m(C,y,T)}}}}));function m(y,$,V){p.readonly!==!0&&(p.modelValue===y?p.clearable===!0&&(u("update:modelValue",null,null),u("clear")):u("update:modelValue",y,$),u("click",V))}function g(y,$){return y[$]===void 0?p[$]:y[$]}function _(){const y=c.value.map($=>qe(N,$.props,$.slot!==void 0?s[$.slot]:void 0));return p.name!==void 0&&p.disable!==!0&&o.value===!0&&n(y,"push"),oo(s.default,y)}return()=>qe(gs,{class:"q-btn-toggle",...f.value,rounded:p.rounded,stretch:p.stretch,glossy:p.glossy,spread:p.spread},_)}});function ba(p,s=!1){const u=p.map(f=>({value:f.id,label:f.name})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...u]:u,i=R([...o]);return{filteredCategories:i,filterCategories:(f,v)=>{const c=f.toLowerCase();v(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(c))})},categories:o}}function va(p,s=!1){const u=p.map(f=>({value:f.id,label:f.name+" ("+f.code+")"})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...u]:u,i=R([...o]);return{filteredSuppliers:i,filterSupplierFn:(f,v)=>{const c=f.toLowerCase();v(()=>{i.value=o.filter(m=>m.label.toLowerCase().includes(c))})},suppliers:o}}const Ta=Ea({__name:"PercentInput",props:{modelValue:{type:[Number,null],required:!1,default:0},label:{type:[String,void 0],required:!1,default:void 0},locale:{type:String,default:"id-ID"},outlined:{type:Boolean,default:!1},allowNegative:{type:Boolean,default:!1},maxDecimals:{type:Number,default:0},lazyRules:{type:[Boolean,String],default:!1},disable:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(p,{expose:s,emit:u}){const o=R(null),i=vs(),n=R(!1);s({focus:()=>{o.value&&o.value.focus()},select:()=>{var T;if((T=o.value)!=null&&T.$el){const U=o.value.$el.querySelector("input");U==null||U.select()}}});const f=p,v=u,c=R(""),m=T=>{const P=new Intl.NumberFormat(T).format(123456789e-2),q=P.includes(",")?",":".",M=P.replace(/\d/g,"").replace(q,"").charAt(0);return{decimalSeparator:q,thousandSeparator:M}},{decimalSeparator:g,thousandSeparator:_}=m(f.locale),y=T=>{if(T==null||isNaN(T)){if(f.maxDecimals>0)return"";T=0}return new Intl.NumberFormat(f.locale,{minimumFractionDigits:f.maxDecimals,maximumFractionDigits:f.maxDecimals}).format(T)};Ye(()=>f.modelValue,T=>{n.value||(c.value=y(T))},{immediate:!0});const $=T=>{const U=T.replace(/[^0-9.,-]+/g,"").replace(new RegExp(`\\${_}`,"g"),"").replace(new RegExp(`\\${g}`,"g"),".");if(U===""||U==="-")return null;const P=parseFloat(U);return isNaN(P)?null:parseFloat(P.toFixed(f.maxDecimals))},V=()=>{n.value=!0,$(c.value),gt(()=>{var T;(T=o.value)==null||T.select()})},C=T=>{c.value=T},E=()=>{n.value=!1;const T=$(c.value);v("update:modelValue",T),c.value=y(T)},F=T=>{const U=["Backspace","Delete","Tab","ArrowLeft","ArrowRight","Home","End","Shift"];T.ctrlKey||T.metaKey||T.key>="0"&&T.key<="9"||(T.key===g||T.key===_)&&!c.value.includes(g)||f.allowNegative&&T.key==="-"&&T.target.selectionStart===0||U.includes(T.key)||T.preventDefault()};return(T,U)=>(d(),I(l(re),{ref_key:"qInputRef",ref:o,"model-value":c.value,label:f.label,outlined:f.outlined,"onUpdate:modelValue":C,onBlur:E,onFocus:V,onKeydown:F,"lazy-rules":f.lazyRules,disable:f.disable,error:f.error,rules:f.rules,"error-message":f.errorMessage},Be({_:2},[l(i).prepend?{name:"prepend",fn:a(()=>[qt(T.$slots,"prepend")]),key:"0"}:void 0,l(i).append?{name:"append",fn:a(()=>[qt(T.$slots,"append")]),key:"1"}:void 0]),1032,["model-value","label","outlined","lazy-rules","disable","error","rules","error-message"]))}}),Np=Ea({__name:"BarcodeInput",props:{modelValue:{}},emits:["update:modelValue","scan-success"],setup(p,{emit:s}){const u=p,o=s,i=we(),n=R(u.modelValue);Ye(()=>u.modelValue,F=>{F!==n.value&&(n.value=F)});const f=F=>{n.value=F,o("update:modelValue",F)},v=R(null),c=R(!1),m=R(!1);let g=null,_=null,y=null;he(async()=>{if("BarcodeDetector"in window){c.value=!0;try{const F=await window.BarcodeDetector.getSupportedFormats();_=new BarcodeDetector({formats:F})}catch(F){console.warn("BarcodeDetector init error:",F),c.value=!1}}}),Xt(()=>C());function $(){if(!c.value){i.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}m.value?C():V()}async function V(){if(_)try{m.value=!0,g=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),v.value&&(v.value.srcObject=g),await new Promise(F=>setTimeout(F,300)),E()}catch(F){m.value=!1,i.notify({type:"negative",message:`Gagal akses kamera: ${F.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function C(){m.value=!1,y&&cancelAnimationFrame(y),g&&(g.getTracks().forEach(F=>F.stop()),g=null)}async function E(){var F;if(!(!v.value||!_||!m.value)){try{const T=await _.detect(v.value);if(T.length>0){const U=T[0].rawValue;n.value=U,o("update:modelValue",U),o("scan-success",U),(F=navigator.vibrate)==null||F.call(navigator,100),i.notify({type:"positive",message:`Barcode terdeteksi: ${U}`,timeout:1e3}),C();return}}catch(T){console.warn("Detection error:",T)}y=requestAnimationFrame(E)}}return(F,T)=>(d(),h("div",null,[e(re,Oa(F.$attrs,{"model-value":n.value,"onUpdate:modelValue":f,disable:m.value||F.$attrs.disable,loading:m.value||F.$attrs.loading}),Be({append:a(()=>[c.value&&!m.value&&!n.value?(d(),I(S,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:$},{default:a(()=>[e(Rt,null,{default:a(()=>[...T[1]||(T[1]=[b("Scan Barcode",-1)])]),_:1})]),_:1})):m.value?(d(),I(ro,{key:1,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0)]),_:2},[Ie(F.$slots,(U,P)=>({name:P,fn:a(q=>[P!=="append"?qt(F.$slots,P,Aa(Oa({key:0},q)),void 0,!0):k("",!0)])}))]),1040,["model-value","disable","loading"]),e(lt,{modelValue:m.value,"onUpdate:modelValue":T[0]||(T[0]=U=>m.value=U),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(ie,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(ae,{class:"text-center q-pb-none"},{default:a(()=>[...T[2]||(T[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])]),_:1}),e(ae,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:v,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(tt,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(N,{label:"Batal Scan",color:"negative",icon:"close",onClick:C})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Bp=bt(Np,[["__scopeId","data-v-affc3578"]]),zp={class:"q-gutter-sm"},Fp={class:"col col-md-6 q-pa-xs"},Lp={class:"row q-gutter-md"},Hp={class:"col"},Kp={class:"col"},Yp={class:"row q-gutter-md"},Wp={class:"q-mt-md full-width"},Qp={__name:"Editor",setup(p){const s=pe(),u=(s.props.data.id?"Edit":"Tambah")+" Produk",o=Ne(window.CONSTANTS.PRODUCT_TYPES),i=R(!1),n=Qe({id:s.props.data.id,category_id:s.props.data.category_id,supplier_id:s.props.data.supplier_id,type:s.props.data.type||"",name:s.props.data.name||"",description:s.props.data.description||"",stock:parseFloat(s.props.data.stock)||0,min_stock:parseFloat(s.props.data.min_stock)||0,max_stock:parseFloat(s.props.data.max_stock)||0,uom:s.props.data.uom||"",barcode:s.props.data.barcode||"",cost:parseFloat(s.props.data.cost)||0,price_1:parseFloat(s.props.data.price_1)||0,price_2:parseFloat(s.props.data.price_2)||0,price_3:parseFloat(s.props.data.price_3)||0,price_1_markup:parseFloat(s.props.data.price_1_markup),price_2_markup:parseFloat(s.props.data.price_2_markup),price_3_markup:parseFloat(s.props.data.price_3_markup),price_1_option:s.props.data.price_1_option??"price",price_2_option:s.props.data.price_2_option??"price",price_3_option:s.props.data.price_3_option??"price",active:!!s.props.data.active,price_editable:!!s.props.data.price_editable,notes:s.props.data.notes||""}),f=()=>st({form:n,url:route("admin.product.save")});function v(C){return s.props.data.id&&s.props.data.supplier&&(C.some(F=>F.id===s.props.data.supplier_id)||C.unshift(s.props.data.supplier)),C}const{filteredCategories:c,filterCategories:m}=ba(s.props.categories),{filteredSuppliers:g,filterSupplierFn:_}=va(v(s.props.suppliers)),y=(C,E)=>(C=parseFloat(C)||0,E=parseFloat(E)||0,E<=0?C>0?100:0:(C-E)/E*100),$=(C,E)=>{C=parseFloat(C)||0,E=parseFloat(E)||0;const F=C*(1+E/100);return Math.round(F)};Ye(()=>n.cost,C=>{i.value||(i.value=!0,n.price_1_option=="markup"?n.price_1=$(C,n.price_1_markup):n.price_1_markup=y(n.price_1,C),n.price_2_option=="markup"?n.price_2=$(C,n.price_2_markup):n.price_2_markup=y(n.price_2,C),n.price_3_option=="markup"?n.price_3=$(C,n.price_3_markup):n.price_3_markup=y(n.price_3,C),i.value=!1)},{immediate:!1});const V=C=>{const E=`price_${C}`,F=`price_${C}_markup`,T=`price_${C}_option`;Ye(()=>n[E],U=>{if(n[T]=="markup"||i.value)return;i.value=!0;const P=y(U,n.cost);n[F]=parseFloat(P.toFixed(2)),i.value=!1},{deep:!1}),Ye(()=>n[F],U=>{n[T]!="price"&&(i.value||(i.value=!0,n[E]=$(n.cost,U),i.value=!1))},{deep:!1})};for(let C=1;C<=3;C++)V(C);return he(()=>{for(let C=1;C<=3;C++)n[`price_${C}_markup`]=y(n[`price_${C}`],n.cost)}),(C,E)=>{const F=J("i-head"),T=J("authenticated-layout");return d(),h(W,null,[e(F,{title:u}),e(T,{"show-drawer-button":!0},{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",zp,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:E[0]||(E[0]=U=>l(Y).get(C.route("admin.product.index")))})])]),"right-button":a(()=>[e(N,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(n).processing,onClick:E[1]||(E[1]=U=>f()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Fp,[e(Je,{class:"row",onKeydown:E[25]||(E[25]=Ft(G(()=>{},["prevent"]),["enter"])),onSubmit:G(f,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":E[2]||(E[2]=U=>l(n).id=U)},null,512),[[wt,l(n).id]]),E[32]||(E[32]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(ce,{disabled:!!l(n).id,autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":E[3]||(E[3]=U=>l(n).type=U),class:"custom-select",options:l(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["disabled","modelValue","options"]),e(re,{modelValue:l(n).name,"onUpdate:modelValue":E[4]||(E[4]=U=>l(n).name=U),modelModifiers:{trim:!0},label:"Kode / Nama Produk","lazy-rules":"",error:!!l(n).errors.name,disable:l(n).processing,"error-message":l(n).errors.name,rules:[U=>U&&U.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(n).description,"onUpdate:modelValue":E[5]||(E[5]=U=>l(n).description=U),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi (Opsional)","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.description,"error-message":l(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(n).category_id,"onUpdate:modelValue":E[6]||(E[6]=U=>l(n).category_id=U),label:"Kategori (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(c),"map-options":"","emit-value":"",onFilter:l(m),"option-label":"label","option-value":"value",error:!!l(n).errors.category_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(z,null,{default:a(()=>[...E[26]||(E[26]=[b("Kategori tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),C.$can("admin.product:view-supplier")?(d(),I(ce,{key:0,modelValue:l(n).supplier_id,"onUpdate:modelValue":E[7]||(E[7]=U=>l(n).supplier_id=U),label:"Supplier Default (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(g),"map-options":"","emit-value":"",onFilter:l(_),"option-label":"label","option-value":"value",error:!!l(n).errors.supplier_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(z,null,{default:a(()=>[...E[27]||(E[27]=[b("Supplier tidak ditemukan",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(Pt,{class:"q-mt-md",modelValue:l(n).active,"onUpdate:modelValue":E[8]||(E[8]=U=>l(n).active=U),disable:l(n).processing,label:"Produk Aktif (Ditampilkan)"},null,8,["modelValue","disable"]),E[33]||(E[33]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",Lp,[t("div",Hp,[e(re,{modelValue:l(n).uom,"onUpdate:modelValue":E[9]||(E[9]=U=>l(n).uom=U),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!l(n).errors.uom,disable:l(n).processing,"error-message":l(n).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])]),t("div",Kp,[e(Bp,{modelValue:l(n).barcode,"onUpdate:modelValue":E[10]||(E[10]=U=>l(n).barcode=U),modelModifiers:{trim:!0},label:"Barcode"},null,8,["modelValue"])])]),t("div",Yp,[e(Me,{modelValue:l(n).stock,"onUpdate:modelValue":E[11]||(E[11]=U=>l(n).stock=U),label:"Stok Aktual",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.stock,errorMessage:l(n).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Me,{modelValue:l(n).min_stock,"onUpdate:modelValue":E[12]||(E[12]=U=>l(n).min_stock=U),label:"Stok Minimum",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.min_stock,errorMessage:l(n).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),E[34]||(E[34]=t("div",{class:"text-subtitle1 q-pt-lg"},"Harga & Modal",-1)),C.$can("admin.product:view-cost")?(d(),I(Me,{key:1,modelValue:l(n).cost,"onUpdate:modelValue":E[13]||(E[13]=U=>l(n).cost=U),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.cost,errorMessage:l(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("table",Wp,[E[31]||(E[31]=t("thead",{class:"text-grey-6"},[t("tr",null,[t("th",{style:{width:"25%"}},"Harga"),t("th",{style:{width:"25%"}},"Markup (%)"),t("th"),t("th",{style:{width:"25%"}},"Harga Jual (Rp)")])],-1)),t("tbody",null,[t("tr",null,[E[28]||(E[28]=t("td",{class:"no-wrap"},"Harga Eceran",-1)),t("td",null,[e(Ta,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_1_markup,"onUpdate:modelValue":E[14]||(E[14]=U=>l(n).price_1_markup=U),lazyRules:"",readonly:l(n).price_1_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_1_markup,errorMessage:l(n).errors.price_1_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(zt,{modelValue:l(n).price_1_option,"onUpdate:modelValue":E[15]||(E[15]=U=>l(n).price_1_option=U),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Me,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_1,"onUpdate:modelValue":E[16]||(E[16]=U=>l(n).price_1=U),lazyRules:"",disable:l(n).processing,readonly:l(n).price_1_option=="markup",error:!!l(n).errors.price_1,errorMessage:l(n).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])]),t("tr",null,[E[29]||(E[29]=t("td",{class:"no-wrap"},"Harga Partai",-1)),t("td",null,[e(Ta,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_2_markup,"onUpdate:modelValue":E[17]||(E[17]=U=>l(n).price_2_markup=U),lazyRules:"",readonly:l(n).price_2_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_2_markup,errorMessage:l(n).errors.price_2_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(zt,{modelValue:l(n).price_2_option,"onUpdate:modelValue":E[18]||(E[18]=U=>l(n).price_2_option=U),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Me,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_2,"onUpdate:modelValue":E[19]||(E[19]=U=>l(n).price_2=U),lazyRules:"",readonly:l(n).price_2_option=="markup",disable:l(n).processing,error:!!l(n).errors.price_2,errorMessage:l(n).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","readonly","disable","error","errorMessage"])])]),t("tr",null,[E[30]||(E[30]=t("td",{class:"no-wrap"},"Harga Grosir",-1)),t("td",null,[e(Ta,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_3_markup,"onUpdate:modelValue":E[20]||(E[20]=U=>l(n).price_3_markup=U),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option!="markup",error:!!l(n).errors.price_3_markup,errorMessage:l(n).errors.price_3_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","disable","readonly","error","errorMessage"])]),t("td",null,[e(zt,{modelValue:l(n).price_3_option,"onUpdate:modelValue":E[21]||(E[21]=U=>l(n).price_3_option=U),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Me,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_3,"onUpdate:modelValue":E[22]||(E[22]=U=>l(n).price_3=U),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option=="markup",error:!!l(n).errors.price_3,errorMessage:l(n).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])])])]),e(Pt,{class:"q-mt-sm",modelValue:l(n).price_editable,"onUpdate:modelValue":E[23]||(E[23]=U=>l(n).price_editable=U),disable:l(n).processing,label:"Harga dapat diubah saat penjualan"},null,8,["modelValue","disable"]),e(re,{modelValue:l(n).notes,"onUpdate:modelValue":E[24]||(E[24]=U=>l(n).notes=U),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Jp=Object.freeze(Object.defineProperty({__proto__:null,default:Qp},Symbol.toStringTag,{value:"Module"})),Gp={class:"q-gutter-sm"},Xp={class:"col col-md-6 q-pa-xs"},$l="Import Produk",Zp={__name:"Import",setup(p){const s=Qe({csv_file:null}),u=()=>{s.post(route("admin.product.import"),{onSuccess:()=>{s.reset()},onError:()=>{We()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=J("i-head"),f=J("authenticated-layout");return d(),h(W,null,[e(n,{title:$l}),e(f,{"show-drawer-button":!0},{title:a(()=>[b(r($l))]),"left-button":a(()=>[t("div",Gp,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>l(Y).get(o.route("admin.product.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Xp,[e(Je,{class:"row",onSubmit:G(u,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(So,{modelValue:l(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=v=>l(s).csv_file=v),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(N,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:i[2]||(i[2]=v=>l(Y).get(o.route("admin.product.index")))},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(d(),I(Lt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(d(),I(Lt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ef=Object.freeze(Object.defineProperty({__proto__:null,default:Zp},Symbol.toStringTag,{value:"Module"})),tf={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},af={class:"q-pa-xs"},lf={class:"full-width row flex-center text-grey-8 q-gutter-sm"},of={key:0},nf={key:1},sf={key:2},rf={key:3},df={class:"flex justify-end"},uf={key:0},mf={key:1},cf={key:0},xl="Produk",pf={__name:"Index",setup(p){const s=pe(),u=R(null),o=R(null),i=at(o),n=R(!1),f=[...Ne(window.CONSTANTS.PRODUCT_TYPES)],v=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],c=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],m=we(),g=R(!1),_=R([]),y=R(!0),$=Ue({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...ze()}),V=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let C=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"action",align:"right"}];he(()=>{const D=new URLSearchParams(window.location.search).get("page");D&&(V.value.page=parseInt(D)),F()});const E=j=>ot({message:`Hapus Produk ${j.name}?`,url:route("admin.product.delete",j.id),fetchItemsCallback:F,loading:y}),F=(j=null)=>{Fe({pagination:V,filter:$,props:j,rows:_,url:route("admin.product.data"),loading:y,tableRef:u})},T=()=>{F()},{filteredCategories:U,filterCategories:P}=ba(s.props.categories),{filteredSuppliers:q,filterSupplierFn:M}=va(s.props.suppliers),w=Z(()=>{let j=[...C];return n.value||j.splice(2,1),m.screen.gt.sm?j:j.filter(D=>D.name==="name"||D.name==="action")}),x=j=>{Y.get(route("admin.product.detail",j.row.id))};return(j,D)=>{const O=J("i-head"),A=J("authenticated-layout");return d(),h(W,null,[e(O,{title:xl}),e(A,null,Be({title:a(()=>[b(r(xl))]),"right-button":a(()=>[e(N,{icon:g.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=B=>g.value=!g.value)},null,8,["icon"]),j.$can("admin.product.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[1]||(D[1]=B=>l(Y).get(j.route("admin.product.add")))})):k("",!0),j.$can("admin.product.import")||j.$can("admin.product:view-cost")?(d(),I(N,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[5]||(D[5]=G(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[j.$can("admin.product.send-price-list")?te((d(),I(oe,{key:0,clickable:"",onClick:D[2]||(D[2]=G(B=>l(Y).get(j.route("admin.product.send-price-list")),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"send"})]),_:1}),e(z,null,{default:a(()=>[...D[14]||(D[14]=[b("Kirim Daftar Harga",-1)])]),_:1})]),_:1})),[[se],[me]]):k("",!0),j.$can("admin.product.import")?te((d(),I(oe,{key:1,clickable:"",onClick:D[3]||(D[3]=B=>n.value=!n.value)},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:n.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(z,null,{default:a(()=>[b(r(n.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[se],[me]]):k("",!0),j.$can("admin.product.import")?te((d(),I(oe,{key:2,clickable:"",onClick:D[4]||(D[4]=G(B=>l(Y).get(j.route("admin.product.import")),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"csv"})]),_:1}),e(z,null,{default:a(()=>[...D[15]||(D[15]=[b("Import",-1)])]),_:1})]),_:1})),[[se],[me]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",af,[e(Ee,{ref_key:"tableRef",ref:u,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":D[13]||(D[13]=B=>V.value=B),filter:$.search,loading:y.value,columns:w.value,rows:_.value,"rows-per-page-options":[10,25,50],style:Le({height:l(i)}),onRequest:F,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:B,message:ne,filter:fe})=>[t("div",lf,[t("span",null,r(ne)+" "+r(fe?" with term "+fe:""),1)])]),header:a(B=>[e(Pe,{props:B},{default:a(()=>[e(Gt,{"auto-width":""}),(d(!0),h(W,null,Ie(B.cols,ne=>(d(),I(Gt,{key:ne.name,props:B},{default:a(()=>[b(r(ne.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(B=>[e(Pe,{props:B,class:Ve([{inactive:!B.row.active},"cursor-pointer"]),onClick:ne=>x(B)},{default:a(()=>[e(Q,{"auto-width":""},{default:a(()=>[e(N,{size:"sm",flat:"",round:"",dense:"",onClick:G(ne=>B.expand=!B.expand,["stop"]),icon:B.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(Q,{key:"name",props:B,class:"wrap-column"},{default:a(()=>[b(r(B.row.name)+" ",1),l(m).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[B.row.type=="stocked"?(d(),h("div",of,[e(S,{name:"cycle"}),b(" Stok: "+r(l(L)(B.row.stock))+" "+r(B.row.uom),1)])):k("",!0),n.value?(d(),h("div",nf,[e(S,{name:"money"}),b(" Modal: Rp. "+r(l(L)(B.row.cost)),1)])):k("",!0),t("div",null,[e(S,{name:"sell"}),b(" Eceran: Rp. "+r(l(L)(B.row.price_1)),1)]),B.row.price_2!=0?(d(),h("div",sf,[e(S,{name:"sell"}),b(" Partai: Rp. "+r(l(L)(B.row.price_2)),1)])):k("",!0),B.row.price_3!=0?(d(),h("div",rf,[e(S,{name:"sell"}),b(" Grosir: Rp. "+r(l(L)(B.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"stock",props:B,class:Ve(["wrap-column",{"low-stock":B.row.type=="stocked"&&(Number(B.row.stock)==0||Number(B.row.stock)<Number(B.row.min_stock)),"over-stock":B.row.type=="stocked"&&Number(B.row.max_stock)&&Number(B.row.stock)>Number(B.row.max_stock)}])},{default:a(()=>[b(r(B.row.type=="stocked"?l(L)(B.row.stock)+" "+B.row.uom:"-"),1)]),_:2},1032,["props","class"]),(d(),I(Q,{key:"cost",props:B,class:"wrap-column"},{default:a(()=>[b(r(l(L)(B.row.cost)),1)]),_:2},1032,["props"])),e(Q,{key:"price_1",props:B,class:"wrap-column"},{default:a(()=>[b(r(l(L)(B.row.price_1)),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:B},{default:a(()=>[t("div",df,[j.$can("admin.product.add")||j.$can("admin.product.edit")||j.$can("admin.product.delete")?(d(),I(N,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:D[12]||(D[12]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"175px"}},{default:a(()=>[j.$can("admin.product.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(ne=>l(Y).get(j.route("admin.product.duplicate",B.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>[...D[16]||(D[16]=[b("Duplikat",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),j.$can("admin.product.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(ne=>l(Y).get(j.route("admin.product.edit",B.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...D[17]||(D[17]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),j.$can("admin.product.delete")?te((d(),I(oe,{key:2,onClick:G(ne=>E(B.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...D[18]||(D[18]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),te(e(Pe,{props:B},{default:a(()=>[e(Q,{colspan:"100%"},{default:a(()=>[B.row.barcode?(d(),h("div",uf,[e(S,{class:"inline-icon",name:"barcode"}),b(" Barcode: "+r(B.row.barcode),1)])):k("",!0),B.row.category_id?(d(),h("div",mf,[e(S,{name:"category",class:"inline-icon"}),b(" Kategori: "+r(B.row.category.name),1)])):k("",!0),j.$can("admin.product:view-supplier")?(d(),h(W,{key:2},[B.row.supplier_id?(d(),h("div",cf,[e(S,{name:"local_shipping",class:"inline-icon"}),b(" Supplier: "+r(B.row.supplier.name),1)])):k("",!0)],64)):k("",!0),B.row.description?(d(),I(xe,{key:3,text:B.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),B.row.notes?(d(),I(xe,{key:4,text:B.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[io,B.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[g.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:a(()=>[t("div",tf,[e(ce,{modelValue:$.type,"onUpdate:modelValue":[D[6]||(D[6]=B=>$.type=B),T],class:"custom-select col-xs-4 col-sm-2",options:f,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(ce,{modelValue:$.stock_status,"onUpdate:modelValue":[D[7]||(D[7]=B=>$.stock_status=B),T],class:"custom-select col-xs-4 col-sm-2",options:c,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:$.status,"onUpdate:modelValue":[D[8]||(D[8]=B=>$.status=B),T],class:"custom-select col-xs-4 col-sm-2",options:v,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:$.category_id,"onUpdate:modelValue":[D[9]||(D[9]=B=>$.category_id=B),T],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(U),"map-options":"",dense:"","emit-value":"",onFilter:l(P),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),j.$can("admin.product:view-supplier")?(d(),I(ce,{key:0,modelValue:$.supplier_id,"onUpdate:modelValue":[D[10]||(D[10]=B=>$.supplier_id=B),T],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(q),"map-options":"",dense:"","emit-value":"",onFilter:l(M),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":D[11]||(D[11]=B=>$.search=B),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ff=Object.freeze(Object.defineProperty({__proto__:null,default:pf},Symbol.toStringTag,{value:"Module"})),gf={class:"q-gutter-sm"},bf={class:"col col-md-8 q-pa-xs"},vf={class:"col-12 col-md-6"},_f={class:"col-12 col-md-6"},yf={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},kf={class:"q-gutter-sm"},Sl="Kirim Daftar Harga",wf={__name:"SendPriceList",setup(p){const s=pe(),u=R(""),o=R(null),i=Z(()=>{var M;const q=new Map;return(M=s.props.products)==null||M.forEach(w=>{q.set(w.id,w)}),q}),n=Z(()=>{var M;const q=new Map;return(M=s.props.customers)==null||M.filter(w=>w.phone&&w.phone.trim()!=="").forEach(w=>{q.set(w.id,w)}),q}),f=Z(()=>{var q;return((q=s.props.customers)==null?void 0:q.map(M=>({value:M.id,label:M.name})))||[]}),v=Z(()=>{var q;return((q=s.props.products)==null?void 0:q.map(M=>({value:M.id,label:`${M.name}`})))||[]}),c=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],m=R(v.value),g=R(f.value),_=Qe({price_types:[],products:[],customers:[]});_.transform(q=>({customers:q.customers.map(M=>M.value),message:u.value}));const y=q=>q?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(q):"Rp. 0",$=q=>{const M=c.find(w=>w.value===q);return M?M.label:q},V=()=>{if(o.value){const q=o.value.$el.querySelector("textarea");if(q){q.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(M){console.error("Gagal menyalin teks ke clipboard:",M)}}}},C=Z(()=>{var M,w;if(((M=_.products)==null?void 0:M.length)===0||((w=_.price_types)==null?void 0:w.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let q=`*DAFTAR HARGA TERBARU*
`;return q+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,q+=`------------------------------

`,(_.products||[]).forEach(x=>{const j=i.value.get(x.value);j&&(q+=`*${j.name}*
`,(_.price_types||[]).forEach(D=>{const O=$(D),A=j[D],B=j.uom||"pcs";A!=null&&A>0&&(q+=`- ${O}: *${y(A)}* / ${B}
`)}),q+=`
`)}),q+=`------------------------------
`,q+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",q});Ye(C,q=>{u.value=q},{immediate:!0});const E=Z(()=>(_.customers||[]).map(q=>n.value.get(q.value)).filter(q=>q&&q.phone)),F=q=>{const M=u.value;let w=q.startsWith("0")?"62"+q.substring(1):q;w=w.replace(/[^0-9]/g,"");const x=encodeURIComponent(M);return`https://wa.me/${w}?text=${x}`},T=(q,M)=>{if(q===""){M(()=>{m.value=v.value});return}M(()=>{const w=q.toLowerCase();m.value=v.value.filter(x=>x.label.toLowerCase().indexOf(w)>-1)})},U=(q,M)=>{if(q===""){M(()=>{g.value=f.value});return}M(()=>{const w=q.toLowerCase();g.value=f.value.filter(x=>x.label.toLowerCase().indexOf(w)>-1)})},P=()=>{var q,M,w;if(((q=_.price_types)==null?void 0:q.length)===0||((M=_.products)==null?void 0:M.length)===0||((w=_.customers)==null?void 0:w.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}_.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{We()},onFinish:()=>{_.clearErrors()}})};return(q,M)=>{const w=J("i-head"),x=J("authenticated-layout");return d(),h(W,null,[e(w,{title:Sl}),e(x,{"show-drawer-button":!0},{title:a(()=>[b(r(Sl))]),"left-button":a(()=>[t("div",gf,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:M[0]||(M[0]=j=>l(Y).get(q.route("admin.product.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",bf,[e(Je,{class:"row q-col-gutter-xs",onSubmit:G(P,["prevent"]),onValidationError:l(We)},{default:a(()=>[t("div",vf,[e(ie,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[M[10]||(M[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),M[11]||(M[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:l(_).products,"onUpdate:modelValue":M[1]||(M[1]=j=>l(_).products=j),options:m.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.products,"error-message":l(_).errors.products,loading:l(_).processing,"use-input":"",onFilter:T,onClear:M[2]||(M[2]=j=>l(_).products=[]),"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(z,{class:"text-grey"},{default:a(()=>[...M[8]||(M[8]=[b(" Tidak ada produk ditemukan ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:l(_).price_types,"onUpdate:modelValue":M[3]||(M[3]=j=>l(_).price_types=j),options:c,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.price_types,"error-message":l(_).errors.price_types,loading:l(_).processing,multiple:"","use-chips":"",clearable:"",onClear:M[4]||(M[4]=j=>l(_).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:l(_).customers,"onUpdate:modelValue":M[5]||(M[5]=j=>l(_).customers=j),options:g.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.customers,"error-message":l(_).errors.customers,loading:l(_).processing,"use-input":"",onFilter:U,onClear:M[6]||(M[6]=j=>l(_).customers=[]),"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(z,{class:"text-grey"},{default:a(()=>[...M[9]||(M[9]=[b(" Tidak ada pelanggan ditemukan ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>{var j,D,O;return[e(N,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:l(_).processing||((j=l(_).products)==null?void 0:j.length)===0||((D=l(_).customers)==null?void 0:D.length)===0||((O=l(_).price_types)==null?void 0:O.length)===0,loading:l(_).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",_f,[e(ie,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(ae,null,{default:a(()=>[t("div",yf,[M[12]||(M[12]=b(" Pratinjau Pesan (Teks Biasa) ",-1)),e(N,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:V,disable:u.value.length===0},null,8,["disable"])]),e(re,{modelValue:u.value,"onUpdate:modelValue":M[7]||(M[7]=j=>u.value=j),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),E.value.length>0?(d(),I(ae,{key:0,class:"q-pt-none"},{default:a(()=>[M[14]||(M[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",kf,[(d(!0),h(W,null,Ie(E.value,j=>(d(),I(N,{key:j.id,label:`Kirim ke ${j.name}`,href:F(j.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(l(_).products.length>0&&l(_).price_types.length>0)},{default:a(()=>[j.phone?k("",!0):(d(),I(Rt,{key:0},{default:a(()=>[...M[13]||(M[13]=[b(" Nomor telepon tidak tersedia ",-1)])]),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),M[15]||(M[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},hf=Object.freeze(Object.defineProperty({__proto__:null,default:wf},Symbol.toStringTag,{value:"Module"})),$f={class:"q-gutter-sm"},xf={class:"q-pa-xs"},Sf={class:"col-12"},Vf={class:"col-12"},qf={class:"q-gutter-xs"},Vl="Kirim Daftar Harga",Cf={__name:"SendPriceList2",setup(p){const s=pe(),u=R(""),o=Z(()=>{var q;const P=new Map;return(q=s.props.products)==null||q.forEach(M=>{P.set(M.id,M)}),P}),i=Z(()=>{var q;const P=new Map;return(q=s.props.customers)==null||q.forEach(M=>{P.set(M.id,M)}),P}),n=Z(()=>{var P;return((P=s.props.customers)==null?void 0:P.map(q=>({value:q.id,label:q.name})))||[]}),f=Z(()=>{var P;return((P=s.props.products)==null?void 0:P.map(q=>({value:q.id,label:`${q.name} (${q.sku||q.code||"ID: "+q.id})`})))||[]}),v=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],c=R(f.value),m=R(n.value),g=Qe({price_types:[],products:[],customers:[]});g.transform(P=>({...P,products:P.products.map(q=>q.value),customers:P.customers.map(q=>q.value)}));const _=P=>P?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(P):"Rp. 0",y=P=>{const q=v.find(M=>M.value===P);return q?q.label:P},$=Z(()=>{if(g.products.length===0||g.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let P=`Daftar Harga Terbaru
`;return P+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,P+=`------------------------------

`,g.products.forEach(q=>{const M=o.value.get(q.value);M&&(P+=`*${M.name}*
`,g.price_types.forEach(w=>{const x=y(w),j=M[w],D=M.unit||"pcs";j!=null&&j!=0&&(P+=`- ${x}: ${_(j)} / ${D}
`)}),P+=`
`)}),P+=`------------------------------
`,P+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",P});Ye($,P=>{u.value=P},{immediate:!0});const V=Z(()=>g.customers.map(P=>i.value.get(P.value)).filter(P=>P&&P.phone_number)),C=P=>{const q=u.value;let M=P.startsWith("0")?"62"+P.substring(1):P;M=M.replace(/[^0-9]/g,"");const w=encodeURIComponent(q);return`https://wa.me/${M}?text=${w}`},E=(P,q)=>{if(P===""){q(()=>{c.value=f.value});return}q(()=>{const M=P.toLowerCase();c.value=f.value.filter(w=>w.label.toLowerCase().indexOf(M)>-1)})},F=(P,q)=>{if(P===""){q(()=>{m.value=n.value});return}q(()=>{const M=P.toLowerCase();m.value=n.value.filter(w=>w.label.toLowerCase().indexOf(M)>-1)})},T=()=>{console.log("Scrolling to first error field...")},U=()=>{if(g.price_types.length===0||g.products.length===0||g.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}g.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{T()},onFinish:()=>{g.clearErrors()}})};return(P,q)=>{const M=J("i-head"),w=J("authenticated-layout");return d(),h(W,null,[e(M,{title:Vl}),e(w,{"show-drawer-button":!0},{title:a(()=>[b(r(Vl))]),"left-button":a(()=>[t("div",$f,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:q[0]||(q[0]=x=>P.router.get(P.route("admin.product.index")))})])]),default:a(()=>[t("div",xf,[e(Je,{class:"row q-col-gutter-md",onSubmit:G(U,["prevent"]),onValidationError:T},{default:a(()=>[t("div",Sf,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[q[8]||(q[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),q[9]||(q[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:l(g).products,"onUpdate:modelValue":q[1]||(q[1]=x=>l(g).products=x),options:c.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.products,"error-message":l(g).errors.products,loading:l(g).processing,"use-input":"",onFilter:E,"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(z,{class:"text-grey"},{default:a(()=>[...q[6]||(q[6]=[b(" Tidak ada produk ditemukan ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:l(g).price_types,"onUpdate:modelValue":q[2]||(q[2]=x=>l(g).price_types=x),options:v,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.price_types,"error-message":l(g).errors.price_types,loading:l(g).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:l(g).customers,"onUpdate:modelValue":q[3]||(q[3]=x=>l(g).customers=x),options:m.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.customers,"error-message":l(g).errors.customers,loading:l(g).processing,"use-input":"",onFilter:F,"input-debounce":"0"},{"no-option":a(()=>[e(oe,null,{default:a(()=>[e(z,{class:"text-grey"},{default:a(()=>[...q[7]||(q[7]=[b(" Tidak ada pelanggan ditemukan ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:l(g).processing||l(g).products.length===0||l(g).customers.length===0||l(g).price_types.length===0,loading:l(g).processing},null,8,["disable","loading"]),e(N,{icon:"cancel",label:"Batal",disable:l(g).processing,onClick:q[4]||(q[4]=x=>P.router.get(P.route("admin.product.index")))},null,8,["disable"])]),_:1}),P.$page.props.flash.success?(d(),I(Lt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[b(r(P.$page.props.flash.success),1)]),_:1})):k("",!0),P.$page.props.flash.error?(d(),I(Lt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[b(r(P.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",Vf,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[q[10]||(q[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(re,{modelValue:u.value,"onUpdate:modelValue":q[5]||(q[5]=x=>u.value=x),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),q[11]||(q[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),V.value.length>0?(d(),I(ae,{key:0},{default:a(()=>[q[13]||(q[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",qf,[(d(!0),h(W,null,Ie(V.value,x=>(d(),I(N,{key:x.id,label:`Kirim ke ${x.label}`,href:C(x.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:a(()=>[x.phone_number?k("",!0):(d(),I(Rt,{key:0},{default:a(()=>[...q[12]||(q[12]=[b(" Nomor telepon tidak tersedia ",-1)])]),_:1}))]),_:2},1032,["label","href"]))),128))]),q[14]||(q[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},Tf=Object.freeze(Object.defineProperty({__proto__:null,default:Cf},Symbol.toStringTag,{value:"Module"})),Pf={class:"q-gutter-sm"},Rf={class:"col col-md-6 q-pa-xs"},ql="Tambah Retur Pembelian",Of={__name:"Create",setup(p){const s=pe(),u=Qe({code:s.props.data.code}),o=()=>st({form:u,url:route("admin.purchase-order-return.add")});return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),h(W,null,[e(f,{title:ql}),e(v,null,{title:a(()=>[b(r(ql))]),"left-button":a(()=>[t("div",Pf,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.finance-account.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Rf,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(re,{autofocus:"",modelValue:l(u).code,"onUpdate:modelValue":n[1]||(n[1]=c=>l(u).code=c),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(u).errors.code,disable:l(u).processing,"error-message":l(u).errors.code,rules:[c=>c&&c.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(u).processing},null,8,["disable"]),e(N,{icon:"cancel",label:"Batal",disable:l(u).processing,onClick:n[2]||(n[2]=c=>l(Y).get(i.route("admin.purchase-order-return.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Df=Object.freeze(Object.defineProperty({__proto__:null,default:Of},Symbol.toStringTag,{value:"Module"})),If={class:"column"},Uf={class:"bg-grey-2 q-pa-xs"},jf={class:"text-subtitle1 text-bold text-grey-10"},Ef={class:"text-caption text-grey-8"},Af={class:"col-12 col-sm-6"},Mf={class:"full-width"},Nf={key:1},Bf={key:0},zf={key:1},Ff={class:"col-12 col-sm-6",align:"left"},Lf={class:"full-width"},Hf={class:"full-width",style:{"border-collapse":"collapse"}},Kf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Yf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Wf={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Qf={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Jf={key:0},Gf={class:"col-12 col-sm-6"},Xf={class:"text-body2 text-grey-7 text-italic"},Zf={class:"col-12 col-sm-6"},eg={class:"row justify-end q-gutter-y-xs"},tg={class:"col-12 row justify-between"},ag={class:"text-subtitle2 text-bold"},lg={class:"row justify-end q-gutter-y-xs"},og={class:"col-12 row justify-between"},ng={class:"text-subtitle2 text-bold"},Io={__name:"MainInfoTab",props:{data:Object},setup(p){const s=p;return(u,o)=>{const i=J("i-link"),n=J("my-link");return d(),h("div",If,[e(ae,{class:"q-pa-none"},{default:a(()=>[t("div",Uf,[t("div",jf," RETUR #"+r(s.data.code),1),t("div",Ef,r(l(be)(s.data.datetime)),1)])]),_:1}),e(Te),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",Af,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",Mf,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),I(i,{key:0,href:u.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>{var f;return[e(S,{class:"inline-icon",name:"person"}),b(" "+r(s.data.supplier_name)+" ("+r((f=s.data.supplier)==null?void 0:f.code)+") ",1)]}),_:1},8,["href"])):(d(),h("div",Nf,[e(S,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pemasok Umum ",-1))]))])]),s.data.supplier_phone?(d(),h("tr",Bf,[t("td",null,[e(S,{class:"inline-icon",name:"phone"}),b(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(d(),h("tr",zf,[t("td",null,[e(S,{class:"inline-icon",name:"home_pin"}),b(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",Ff,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Lf,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:u.route("admin.purchase-order.detail",{id:s.data.purchase_order_id})},{default:a(()=>[b(r(s.data.purchase_order_id?s.data.purchase_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(be)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("table",Hf,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),h(W,null,Ie(s.data.details,f=>(d(),h("tr",{key:f.id},[t("td",Kf,[e(i,{href:u.route("admin.product.detail",f.product_id)},{default:a(()=>[b(r(f.product_name),1)]),_:2},1032,["href"])]),t("td",Yf,r(l(L)(f.cost)),1),t("td",Wf,r(f.quantity),1),t("td",Qf,r(l(L)(f.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),h("tr",Jf,[...o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)])])]),_:1}),e(Te),e(ae,{class:"row",align:"left"},{default:a(()=>[t("div",Gf,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Xf,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Zf,[t("div",eg,[t("div",tg,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",ag,r(l(L)(s.data.grand_total)),1)])]),t("div",lg,[t("div",og,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",ng,r(l(L)(s.data.total_refunded)),1)])])])]),_:1})])}}},sg=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"})),rg={key:0,class:"text-center q-mb-md text-grey-8"},ig={class:"text-subtitle2 text-weight-medium"},dg={class:"text-h5 text-center text-primary q-pb-md"},ug={class:"text-center q-mt-md"},mg={key:0,class:"text-h6 text-negative text-weight-bold"},cg={key:1,class:"text-h6 text-positive text-weight-bold"},Uo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=pe(),n=R(!1),f=R({method:"transfer",amount:u.total,notes:null}),v=i.props.data.supplier,c=Z(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(V=>({label:V.name,value:V.id}))]),m=Z(()=>u.remaining_refund),g=Z(()=>{const V=f.value.amount||0;return V<=0?"Jumlah pembayaran harus lebih dari 0.":V>u.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=Z(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const V={id:f.value.method,amount:f.value.amount,notes:f.value.notes};o("accepted",V),n.value=!1},$=()=>{f.value.amount=u.total,f.value.method="cash",f.value.notes=null};return(V,C)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":C[4]||(C[4]=E=>V.$emit("update:modelValue",E)),onBeforeShow:$},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>[...C[5]||(C[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[l(v)?(d(),h("div",rg,[t("div",ig,[b(r(l(v).code)+" ",1),C[6]||(C[6]=t("br",null,null,-1)),b(" "+r(l(v).name)+" ",1),C[7]||(C[7]=t("br",null,null,-1))])])):k("",!0),t("div",dg," Total: Rp. "+r(l(L)(p.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":C[0]||(C[0]=E=>f.value.method=E),options:c.value,label:"Kas Tujuan",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Me,{modelValue:f.value.amount,"onUpdate:modelValue":C[1]||(C[1]=E=>f.value.amount=E),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:f.value.notes,"onUpdate:modelValue":C[2]||(C[2]=E=>f.value.notes=E),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",ug,[m.value>0?(d(),h("div",mg," Sisa Refund: Rp. "+r(l(L)(m.value)),1)):(d(),h("div",cg," Refund Lunas "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(N,{flat:"",label:"Batal",color:"grey",onClick:C[3]||(C[3]=E=>V.$emit("update:modelValue",!1))}),e(N,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},pg=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),fg={class:"column"},gg={class:"row"},bg={class:"full-width",style:{"border-collapse":"collapse"}},vg={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},_g={class:"row items-center q-gutter-x-sm"},yg={class:"text-weight-bold"},kg={class:"row items-center q-gutter-x-sm q-mt-xs"},wg={class:"text-caption text-grey-6"},hg={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},$g={class:"q-mt-xs"},xg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Sg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Vg={key:0},qg={class:"text-right q-pa-sm"},jo={__name:"RefundTab",props:{data:Object},setup(p){const s=p,u=we(),o=R(!1),i=()=>{o.value=!0},n=Z(()=>s.data.remaining_refund),f=async c=>{const m={order_id:s.data.id,...c};u.loading.show({message:"Memproses pembayaran..."});try{const g=await De.post(route("admin.purchase-order-return.add-refund"),m);u.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Y.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(g){let _="Gagal memproses refund.";g.response&&g.response.data&&g.response.data.message?_=g.response.data.message:g.message&&(_=g.message),u.notify({message:_,color:"negative",icon:"error"})}finally{u.loading.hide()}},v=c=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await De.post(route("admin.purchase-order-return.delete-refund",{id:c.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Y.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(m){let g="Gagal menghapus refund pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(c,m)=>{const g=J("my-link");return d(),h(W,null,[t("div",fg,[e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("div",gg,[c.$can("admin.purchase-order-return.add-refund")?(d(),I(N,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=G(_=>i(),["stop"]))})):k("",!0)]),t("table",bg,[m[5]||(m[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),h(W,null,Ie(s.data.payments,_=>(d(),h("tr",{key:_.id},[t("td",vg,[t("div",_g,[e(S,{name:"tag",size:"xs",color:"grey-7"}),t("span",yg,r(_.code),1)]),t("div",kg,[e(S,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",wg,r(l(be)(_.created_at)),1)]),(_.type==="transfer"||_.type==="cash")&&_.account?(d(),h("div",hg,[e(S,{name:"wallet",size:"xs",color:"grey-7"}),e(g,{href:c.route("admin.finance-account.detail",_.account.id),target:"_blank"},{default:a(()=>[b(r(_.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",$g,[e(rt,{label:c.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[_.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",xg,r(l(L)(_.amount)),1),t("td",Sg,[c.$can("admin.purchase-order-return.delete-refund")?(d(),I(N,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>v(_)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),h("tr",Vg,[...m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund (Rp.)",-1)),t("th",qg,r(l(L)(s.data.total_refunded)),1),m[4]||(m[4]=t("th",null,null,-1))])])])]),_:1})]),e(Uo,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=_=>o.value=_),total:n.value,supplier:s.data.supplier,onAccepted:f},null,8,["modelValue","total","supplier"])],64)}}},Cg=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),Tg={class:"q-gutter-sm"},Pg={class:"col col-lg-6 q-pa-xs",align:"center"},Cl="Retur Pembelian",Rg={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),u=pe(),o=u.props.data,i=R(s.get("preview")||!1),f=R(s.get("tab")||"main-info");he(()=>{gt(()=>{const c=s.get("print_size");c&&v(c)})});const v=c=>{window.open(route("admin.purchase-order-return.print",{id:u.props.data.id,size:c}),"_self")};return(c,m)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),h(W,null,[e(g,{title:Cl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Cl))])]),"left-button":a(()=>[t("div",Tg,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>l(Y).get(c.route("admin.purchase-order-return.index")))})])]),"right-button":a(()=>[e(N,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>v("58mm"))}),e(N,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=y=>v("a4"))}),i.value?k("",!0):(d(),I(N,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=y=>l(Y).get(c.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Ce,{class:"row justify-center print-visible"},{default:a(()=>[t("div",Pg,[e(ie,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(Ct,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(it,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(d(),I(it,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Te),e(Tt,{modelValue:f.value,"onUpdate:modelValue":m[5]||(m[5]=y=>f.value=y),animated:""},{default:a(()=>[e(dt,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(Io,{data:l(o)},null,8,["data"])]),_:1}),e(dt,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(jo,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Og=Object.freeze(Object.defineProperty({__proto__:null,default:Rg},Symbol.toStringTag,{value:"Module"})),Dg={class:"text-weight-medium wrap-column"},Ig={class:"text-caption text-grey-6 elipsis"},Ug={class:"column items-end"},jg={class:"text-caption text-grey-6 text-italic"},Eo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=we(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(Ee,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Le({height:l(u)})},{header:a(f=>[e(Pe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),h(W,null,Ie(f.cols,v=>(d(),I(Gt,{key:v.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Pe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left"},{default:a(()=>[t("div",Dg,r(f.row.product_name),1),t("div",Ig,r(f.row.product_barcode),1),f.row.notes?(d(),I(xe,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal",props:f,class:"text-right"},{default:a(()=>[t("div",Ug,[t("div",null,r(l(L)(f.row.subtotal_cost)),1),t("div",jg,r(l(L)(f.row.quantity))+" x Rp. "+r(l(L)(f.row.cost)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(N,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(N,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Eg=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Ag={class:"row items-center no-wrap"},Mg={class:"col-auto"},Ao={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=Z(()=>o.item.quantity*o.item.cost),v=_=>{_.stopPropagation(),_.preventDefault()},c=_=>{o.modelValue&&(_.key==="Enter"?(n(),v(_)):_.key==="Escape"&&(i("update:modelValue",!1),v(_)))};he(()=>{window.addEventListener("keydown",c)}),ht(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item});const g=()=>{};return(_,y)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":y[6]||(y[6]=$=>_.$emit("update:modelValue",$)),onBeforeShow:g},{default:a(()=>[e(ie,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Ag,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Mg,[e(N,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=$=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(re,{modelValue:p.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=$=>p.item.product_name=$),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=$=>p.item.quantity=$),label:`Kwantitas (${p.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","label","disable"]),e(Me,{modelValue:p.item.cost,"onUpdate:modelValue":y[3]||(y[3]=$=>p.item.cost=$),label:"Modal / Harga Beli (Rp)","hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=$=>f.value=$),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(re,{modelValue:p.item.notes,"onUpdate:modelValue":y[5]||(y[5]=$=>p.item.notes=$),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(N,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[me]]),e(N,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ng=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),Bg={key:0,class:"q-select__selected-item"},Mo={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(p,{expose:s,emit:u}){const o=R(null),i=p,n=u,f=R([]);let v=null;const c=R(i.modelValue);he(()=>{i.initialData&&(c.value=i.initialData)}),Ye(c,_=>{n("update:modelValue",_),n("supplierSelected",_)}),Ye(()=>i.modelValue,_=>{c.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const g=(_,y)=>{if(_.length<i.minLength){y(()=>{f.value=[]});return}v&&clearTimeout(v),v=setTimeout(()=>{De.get(`/web-api/suppliers?q=${_}`).then($=>{y(()=>{f.value=$.data.data})}).catch($=>{console.error("Gagal mengambil data pemasok:",$),y(()=>{f.value=[]})})},100)};return(_,y)=>(d(),I(ce,{class:Ve(p.class),ref_key:"qSelectRef",ref:o,modelValue:c.value,"onUpdate:modelValue":y[0]||(y[0]=$=>c.value=$),"use-input":"","input-debounce":"500",label:p.label,options:f.value,onFilter:g,clearable:"",error:p.error,behavior:"menu","error-message":p.errorMessage,disable:p.disable,"hide-bottom-space":"",outlined:p.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a($=>[e(oe,Aa(uo($.itemProps)),{default:a(()=>[e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[b(r($.opt.name)+" ("+r($.opt.code)+")",1)]),_:2},1024),$.opt.phone_1?(d(),I(ge,{key:0,class:"text-grey-8 q-ml-sm q-mt-xs"},{default:a(()=>[e(S,{name:"phone",class:"inline-icon"}),b(r($.opt.phone_1),1)]),_:2},1024)):k("",!0),$.opt.address?(d(),I(ge,{key:1,class:"text-grey-8 q-ml-sm"},{default:a(()=>[e(S,{name:"home_pin",class:"inline-icon"}),b(r($.opt.address),1)]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1040)]),"selected-item":a($=>[$.opt?(d(),h("div",Bg,r($.opt.name)+" ("+r($.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},zg={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(u,o)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>[...o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])]),_:1}),e(ae,null,{default:a(()=>[...o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])]),_:1}),e(tt,{align:"center"},{default:a(()=>[te(e(N,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},No=bt(zg,[["__scopeId","data-v-abc5074e"]]),Fg=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"}));function Ma(p){const s=R(!1),u=()=>{const n=p.value||document.documentElement;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},i=()=>{s.value?o():u()};return _s(()=>{const n=()=>{s.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("mozfullscreenchange",n),document.removeEventListener("MSFullscreenChange",n)}}),{isFullscreen:s,requestFullscreen:u,exitFullscreen:o,toggleFullscreen:i}}const Lg={class:"row items-center no-wrap"},Hg={class:"col text-subtite text-bold text-grey-8"},Kg={class:"col-auto"},Bo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=m=>{m.stopPropagation(),m.preventDefault()},v=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(i("update:modelValue",!1),f(m)))};return he(()=>{window.addEventListener("keydown",v)}),ht(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(ie,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Lg,[t("div",Hg," Edit "+r(p.data.code),1),t("div",Kg,[e(N,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(Xe,{modelValue:p.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(re,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(re,{modelValue:p.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(N,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[me]]),te(e(N,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Yg=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"})),Wg={class:"row items-center no-wrap"},Qg={class:"col-auto"},Jg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Gg={key:0},_a={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1},priceType:{type:String,require:!1,default:"price_1"}},emits:["update:modelValue","product-selected"],setup(p,{emit:s}){const u=we(),o=p,i=R(!1),n=R(o.showCost),f=s,v=R(null),c=R([]),m=R(!0),g=R(-1),_=Ue({search:"",status:"active",...ze()}),y=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});[...Ne(window.CONSTANTS.PRODUCT_PRICE_TYPES)];const $=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_1.replace("Harga ","H "),field:"price_1",align:"right"},{name:"price_2",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_2.replace("Harga ","H "),field:"price_2",align:"right"},{name:"price_3",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_3.replace("Harga ","H "),field:"price_3",align:"right"}],V=Z(()=>{if(i.value)return $;const q=$.filter(M=>M.name!=="cost");return u.screen.gt.sm?q:q.filter(M=>M.name==="name"||M.name==="stock")});he(()=>{E()});const C=()=>{if(v.value&&g.value!==-1){const q=(y.value.page-1)*y.value.rowsPerPage,M=g.value-q;gt(()=>{if(M>=0&&M<c.value.length&&v.value.scrollTo){const w=v.value.$el.querySelector(".selected-row");w&&w.scrollIntoView({behavior:"smooth",block:"nearest"})}})}},E=()=>{o.modelValue!==!1&&F()},F=(q=null)=>{m.value=!0;const M=g.value;Fe({pagination:y,filter:_,props:q,rows:c,url:route("admin.product.data"),loading:m,tableRef:v,onSuccess:()=>{c.value.length>0?((M===0||M===-1)&&(g.value=0),gt(()=>{C()})):g.value=-1}})},T=()=>{E()},U=q=>{f("product-selected",q),setTimeout(()=>{f("update:modelValue",!1)},100)},P=q=>{if(!o.modelValue){alert("none");return}const M=c.value.length;if(M===0)return;const w=(y.value.page-1)*y.value.rowsPerPage,x=w+M-1;if(q.key==="ArrowDown")q.preventDefault(),g.value<x?(g.value=g.value+1,C()):g.value===x&&P({key:"ArrowRight",preventDefault:()=>{}});else if(q.key==="ArrowUp")q.preventDefault(),g.value>w?(g.value=g.value-1,C()):g.value===w&&w>0&&P({key:"ArrowLeft",preventDefault:()=>{}});else if(q.key==="Enter"&&g.value!==-1){q.preventDefault(),q.preventDefault();const j=(y.value.page-1)*y.value.rowsPerPage,D=g.value-j;D>=0&&D<M?U(c.value[D]):console.warn("Kesalahan: selectedIndex global di luar batas halaman saat ini.")}else if(g.value!==-1){if(q.key==="ArrowRight"){q.preventDefault();const j=y.value.page+1;j<=Math.ceil(y.value.rowsNumber/y.value.rowsPerPage)&&(y.value.page=j,g.value=(j-1)*y.value.rowsPerPage,v.value.requestServerInteraction())}else if(q.key==="ArrowLeft"){q.preventDefault();const j=y.value.page-1;j>=1&&(y.value.page=j,g.value=(j-1)*y.value.rowsPerPage,v.value.requestServerInteraction())}}};return Ye(()=>o.modelValue,(q,M)=>{M===!0&&q===!1&&(_.search=""),q===!0&&F()}),(q,M)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":M[4]||(M[4]=w=>q.$emit("update:modelValue",w)),maximized:l(u).screen.lt.sm},{default:a(()=>[e(ie,{class:"column fit",tabindex:"0",onKeydown:P,ref:"cardRef"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Wg,[M[5]||(M[5]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",Qg,[e(N,{flat:"",round:"",size:"sm",icon:"close",onClick:M[0]||(M[0]=w=>q.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:Ve(["q-py-sm",l(u).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(re,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":[M[1]||(M[1]=w=>_.search=w),T],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"]),n.value?(d(),I(oa,{key:0,modelValue:i.value,"onUpdate:modelValue":M[2]||(M[2]=w=>i.value=w),label:"Tampilkan Modal",style:{"margin-left":"-10px"}},null,8,["modelValue"])):k("",!0)]),_:1},8,["class"]),e(ae,{class:Ve(["q-py-xs col",l(u).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(Ee,{ref_key:"tableRef",ref:v,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":M[3]||(M[3]=w=>y.value=w),filter:_.search,loading:m.value,columns:V.value,rows:c.value,"rows-per-page-options":[10,25,50],onRequest:F,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":a(({icon:w,message:x,filter:j})=>[t("div",Jg,[t("span",null,r(x),1)])]),body:a(w=>[e(Pe,{tabindex:"0",props:w,class:Ve([{inactive:["stocked","raw_materials"].includes(w.row.type)&&w.row.stock<=0,"selected-row":g.value===w.rowIndex},"cursor-pointer"]),onClick:x=>U(w.row),onKeydown:[Ft(G(x=>U(w.row),["prevent","stop"]),["enter"]),Ft(G(x=>U(w.row),["prevent"]),["space"])]},{default:a(()=>[e(Q,{key:"name",props:w,class:"wrap-column"},{default:a(()=>[e(xe,{text:w.row.name},null,8,["text"]),w.row.description?(d(),I(xe,{key:0,text:w.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),l(u).screen.lt.md?(d(),h(W,{key:1},[t("div",null," Stok: "+r(w.row.type=="stocked"?l(L)(w.row.stock)+" "+w.row.uom:"-"),1),i.value?(d(),h("div",Gg," Modal: Rp. "+r(l(L)(w.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+r(l(L)(w.row.price_1)),1),t("div",null,"Harga 2: Rp. "+r(l(L)(w.row.price_1)),1),t("div",null,"Harga 3: Rp. "+r(l(L)(w.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"stock",props:w,class:"text-right"},{default:a(()=>[b(r(w.row.type=="stocked"?l(L)(w.row.stock)+" "+w.row.uom:"-"),1)]),_:2},1032,["props"]),e(Q,{key:"cost",props:w,class:"wrap-column text-right"},{default:a(()=>[b(r(l(L)(w.row.cost)),1)]),_:2},1032,["props"]),e(Q,{key:"price_1",props:w,class:"wrap-column text-right"},{default:a(()=>[b(r(l(L)(w.row.price_1)),1)]),_:2},1032,["props"]),e(Q,{key:"price_2",props:w,class:"wrap-column text-right"},{default:a(()=>[b(r(l(L)(w.row.price_2)),1)]),_:2},1032,["props"]),e(Q,{key:"price_3",props:w,class:"wrap-column text-right"},{default:a(()=>[b(r(l(L)(w.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},Xg=Ea({__name:"BarcodeInputEditor",props:{modelValue:{}},emits:["update:modelValue","scan-success","send","search"],setup(p,{expose:s,emit:u}){const o=R(null);s({focus:()=>{o.value&&o.value.focus()},qInput:o});const n=p,f=u,v=we(),c=R(n.modelValue);Ye(()=>n.modelValue,w=>{w!==c.value&&(c.value=w)});const m=w=>{c.value=w,f("update:modelValue",w)},g=R(null),_=R(!1),y=R(!1);let $=null,V=null,C=null;he(async()=>{if("BarcodeDetector"in window){_.value=!0;try{const w=await window.BarcodeDetector.getSupportedFormats();V=new BarcodeDetector({formats:w})}catch(w){console.warn("BarcodeDetector init error:",w),_.value=!1}}}),Xt(()=>T());function E(){if(!_.value){v.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}y.value?T():F()}async function F(){if(V)try{y.value=!0,$=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),g.value&&(g.value.srcObject=$),await new Promise(w=>setTimeout(w,300)),q()}catch(w){y.value=!1,v.notify({type:"negative",message:`Gagal akses kamera: ${w.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function T(){y.value=!1,C&&cancelAnimationFrame(C),$&&($.getTracks().forEach(w=>w.stop()),$=null)}async function U(){f("search")}async function P(){f("send")}async function q(){var w;if(!(!g.value||!V||!y.value)){try{const x=await V.detect(g.value);if(x.length>0){const j=x[0].rawValue;c.value+=j,f("update:modelValue",c.value),f("scan-success",c.value),(w=navigator.vibrate)==null||w.call(navigator,100),v.notify({type:"positive",message:`Barcode terdeteksi: ${c.value}`,timeout:1e3}),T();return}}catch(x){console.warn("Detection error:",x)}C=requestAnimationFrame(q)}}const M=Z(()=>{var w;return _.value&&!y.value&&!c.value?!0:(w=c.value)!=null&&w.endsWith("*")?_.value:!1});return(w,x)=>(d(),h("div",null,[e(re,Oa({ref_key:"qInputInternalRef",ref:o},w.$attrs,{"model-value":c.value,"onUpdate:modelValue":m,disable:y.value||w.$attrs.disable,loading:y.value||w.$attrs.loading,clearable:c.value&&!c.value.endsWith("*")}),{prepend:a(()=>[e(S,{name:"search",onClick:U,class:"cursor-pointer"})]),append:a(()=>[M.value?(d(),I(S,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:E},{default:a(()=>[e(Rt,null,{default:a(()=>[...x[1]||(x[1]=[b("Scan Barcode",-1)])]),_:1})]),_:1})):k("",!0),M.value?y.value?(d(),I(ro,{key:2,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0):(d(),I(S,{key:1,name:"send",onClick:P,class:"cursor-pointer q-ml-md"}))]),_:1},16,["model-value","disable","loading","clearable"]),e(lt,{modelValue:y.value,"onUpdate:modelValue":x[0]||(x[0]=j=>y.value=j),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(ie,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(ae,{class:"text-center q-pb-none"},{default:a(()=>[...x[2]||(x[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])]),_:1}),e(ae,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:g,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(tt,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(N,{label:"Batal Scan",color:"negative",icon:"close",onClick:T})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),ya=bt(Xg,[["__scopeId","data-v-ca0e399d"]]),Zg={class:"row text-grey-9 q-pt-sm"},e1={key:0,class:"q-ml-sm"},t1={key:1,class:"q-ml-sm"},a1={key:2,class:"q-ml-sm text-grey-9"},l1={class:"row text-grey-9"},o1={key:1,class:"q-ml-sm"},n1={key:0},ka={__name:"PartyInfo",props:{party:{type:Object,required:!0},isValidWalletBalance:{type:Boolean,default:!0}},setup(p){const s=o=>o==null?"text-grey-9":o>0?"text-red":"text-green",u=o=>o==null?"Rp. 0":`Rp. ${L(o)}`;return(o,i)=>(d(),h("div",null,[t("div",Zg,[p.party.phone?(d(),h("div",e1,[e(S,{name:"phone",class:"inline-icon"}),b(" "+r(p.party.phone),1)])):k("",!0),p.party.phone_1?(d(),h("div",t1,[e(S,{name:"phone",class:"inline-icon"}),b(" "+r(p.party.phone_1),1)])):k("",!0),p.party.address?(d(),h("div",a1,[e(S,{name:"home_pin",class:"inline-icon"}),b(" "+r(p.party.address),1)])):k("",!0)]),t("div",l1,[p.party.wallet_balance?(d(),h("div",{key:0,class:Ve(["q-ml-sm",s(p.party.wallet_balance)])},[e(S,{name:"wallet",class:"inline-icon"}),b(" "+r(u(p.party.wallet_balance)),1)],2)):k("",!0),p.party.balance&&p.party.balance!=0?(d(),h("div",o1,[p.party.wallet_balance?(d(),h("span",n1,"")):k("",!0),i[0]||(i[0]=b("  ",-1)),t("span",{class:Ve(s(p.party.balance))},[e(S,{name:"balance",class:"inline-icon"}),b(" "+r(u(p.party.balance)),1)],2)])):k("",!0)])]))}},s1={class:"q-gutter-sm"},r1={class:"row items-center"},i1={class:"text-weight-bold"},d1={class:"row q-col-gutter-none full-width"},u1={class:"col-sm-6 col-12 col"},m1={class:"row full-width q-pa-sm"},c1={class:"col-sm-6 col-12"},p1={class:"row q-ml-sm items-end"},f1={class:"row col grow"},g1={class:"col-12 q-px-sm column"},b1={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},v1={key:0,class:"col"},_1={class:"text-caption text-grey-6 q-mt-xs"},y1={key:0,class:"text-caption text-grey-8 q-mt-xs"},k1={class:"text-italic"},w1={key:1,class:"col"},h1={class:"text-grey-8"},$1={class:"col"},x1={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},S1={class:"text-h4 text-weight-bold"},V1={class:"row q-px-sm q-col-gutter-sm q-py-xs"},q1={class:"col"},C1={__name:"Editor",setup(p){const s=we(),u=pe(),o=R(!0),i=R(null),n=R(null),f=R(null),v=R(!1),c=R(null),m=R(null),{isFullscreen:g,toggleFullscreen:_}=Ma(m),y="Retur #"+u.props.data.code,$=R(u.props.data.supplier),V=R(""),C=R(!1),E=R(!1),F=R(!1),T=R(!1),U=R(null),P=Ue({id:u.props.data.id,code:u.props.data.code,supplier_id:u.props.data.supplier_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),q=Z(()=>P.items.reduce((_e,ee)=>_e+ee.cost*ee.quantity,0)),M=()=>{var _e;_(),g.value||(_e=c==null?void 0:c.value)==null||_e.hideDrawer()},w=_e=>isNaN(_e)||_e<=0?(vt("Kuantitas tidak valid.","top"),!1):!0,x=_e=>isNaN(_e)||_e<0?(vt("Harga tidak valid.","top"),!1):!0,j=_e=>!_e||_e.length==0?(vt("Barcode tidak valid.","top"),!1):!0,D=_e=>{var ee;(ee=V.value)!=null&&ee.endsWith("*")?V.value+=_e.name:V.value=_e.name},O=async()=>{if(C.value)return;const _e=V.value.trim();if(_e.length===0){E.value=!0;return}const ee=_e.split("*");let H=1,X="",le=null;if(ee.length===1)X=ee[0];else if(ee.length<=3)H=parseInt(ee[0]),X=ee[1],ee.length===3&&(le=parseFloat(ee[2]));else{vt("Input tidak valid.","top");return}if(X.length===0){E.value=!0;return}!j(X)&&!w(H)&&!x(le)||(C.value=!0,await De.post(route("admin.purchase-order-return.add-item"),{order_id:P.id,product_code:X,qty:H,price:le,merge:o.value}).then(K=>{const de=K.data.data.item;let $e=-1;K.data.data.mergeItem&&($e=P.items.findIndex(ke=>ke.id===de.id)),$e===-1?P.items.push(de):P.items[$e]=de,V.value="",le!==null&&le!==parseFloat(de.price)&&vt("Harga tidak dapat diubah!","top")}).catch(K=>{var de,$e;pt(($e=(de=K.response)==null?void 0:de.data)==null?void 0:$e.message,"top"),console.error("Gagal mengambil data produk:",K)}),C.value=!1,gt(()=>{var K;(K=i.value)==null||K.focus()}))},A=_e=>{U.value=Object.create(_e),F.value=!0},B=_e=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${_e.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{C.value=!0,De.post(route("admin.purchase-order-return.remove-item"),{id:_e.id}).then(()=>{const ee=P.items.findIndex(H=>H.id===_e.id);ee!==-1&&(P.items.splice(ee,1)[0],ft("Item telah dihapus","top"))}).catch(ee=>{var H,X;pt(((X=(H=ee==null?void 0:ee.response)==null?void 0:H.data)==null?void 0:X.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(ee)}).finally(()=>{C.value=!1})})},ne=()=>{C.value=!0;const _e=n.value.getCurrentItem(),ee={id:_e.id,qty:_e.quantity,cost:_e.cost};_e.notes&&(ee.notes=_e.notes),De.post(route("admin.purchase-order-return.update-item"),ee).then(H=>{const X=H.data.data,le=P.items.findIndex(K=>K.id===X.id);le!==-1&&(P.items[le]=X,ft("Item telah diperbarui","top")),F.value=!1}).catch(H=>{var X,le;pt(((le=(X=H==null?void 0:H.response)==null?void 0:X.data)==null?void 0:le.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(H)}).finally(()=>{C.value=!1})};he(()=>{const _e=ee=>{v.value||F.value||E.value||T.value||(ee.key==="F1"?(ee.preventDefault(),v.value=!0):ee.key==="F2"?(ee.preventDefault(),f.value.focus()):ee.key==="F3"?(ee.preventDefault(),i.value.focus()):ee.key==="F4"?(ee.preventDefault(),o.value=!o.value):ee.key==="F10"||ee.ctrlKey&&ee.key==="Enter"?(ee.preventDefault(),ve()):ee.key==="F11"?(ee.preventDefault(),M()):(ee.key==="F5"||ee.key==="F6"||ee.key==="F7"||ee.key==="F12")&&ee.preventDefault())};document.addEventListener("keydown",_e),ht(()=>{document.removeEventListener("keydown",_e)}),gt(()=>{var ee;(ee=c==null?void 0:c.value)==null||ee.hideDrawer()})});const fe=async()=>{C.value=!0;const _e={id:P.id,supplier_id:P.supplier_id??null,datetime:Qt(P.datetime),notes:P.notes};await De.post(route("admin.purchase-order-return.update"),_e).then(ee=>{const H=ee.data.data.id;P.supplier_id=H.supplier_id}).catch(ee=>{var H,X;pt(((X=(H=ee==null?void 0:ee.response)==null?void 0:H.data)==null?void 0:X.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ee)}).finally(()=>{C.value=!1})},ve=_e=>{if(P.items.length===0){ft("Item masih kosong","top");return}St.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{C.value=!0,De.post(route("admin.purchase-order-return.close",{id:P.id})).then(ee=>{ft("Transaksi selesai"),Y.get(route("admin.purchase-order-return.detail",{id:P.id}))}).catch(ee=>{var H,X;pt((X=(H=ee.response)==null?void 0:H.data)==null?void 0:X.message),console.error(ee)}).finally(()=>{C.value=!1})})},ue=()=>{St.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.purchase-order-return.cancel",{id:P.id}),{id:P.id}).then(()=>{ft("Transaksi telah dibatalkan."),Y.visit(route("admin.purchase-order-return.detail",{id:P.id}))}).catch(_e=>{var H,X;const ee=((X=(H=_e.response)==null?void 0:H.data)==null?void 0:X.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:ee,color:"warning",position:"bottom"}),console.error(_e)})})},Oe=()=>{window.open(route("admin.purchase-order-return.detail",{id:P.id})+"?preview=1","_blank")};return Z(()=>$.value?$.value.wallet_balance>=q.value:!0),(_e,ee)=>{const H=J("i-head"),X=J("authenticated-layout");return d(),h(W,null,[e(H,{title:y}),e(X,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[b(r(y))]),"left-button":a(()=>[t("div",s1,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:ee[0]||(ee[0]=le=>l(Y).get(_e.route("admin.purchase-order-return.index")))})])]),"right-button":a(()=>[t("div",r1,[l(s).screen.gt.sm?(d(),h(W,{key:0},[t("div",i1,r(l(u).props.auth.user.username),1),ee[21]||(ee[21]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ga)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Ce,{class:"bg-grey-2 column fit"},{default:a(()=>[e(ie,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",d1,[t("div",u1,[t("div",m1,[e(Mo,{ref_key:"supplierAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:$.value,"onUpdate:modelValue":ee[2]||(ee[2]=le=>$.value=le),label:"Pemasok",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),$.value?(d(),I(ka,{key:0,party:$.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",c1,[e(ya,{ref_key:"userInputRef",ref:i,modelValue:V.value,"onUpdate:modelValue":ee[3]||(ee[3]=le=>V.value=le),onKeyup:ee[4]||(ee[4]=Ft(G(le=>O(),["prevent"]),["enter"])),onScanSuccess:ee[5]||(ee[5]=le=>O()),onSend:ee[6]||(ee[6]=le=>O()),onSearch:ee[7]||(ee[7]=le=>E.value=!0),loading:C.value,disable:C.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",p1,[e(Pt,{class:"col",modelValue:o.value,"onUpdate:modelValue":ee[8]||(ee[8]=le=>o.value=le),label:"Gabungkan item",disable:C.value},null,8,["modelValue","disable"])])])]),t("div",f1,[t("div",g1,[e(Eo,{items:P.items,onUpdateQuantity:ee[9]||(ee[9]=({id:le,value:K})=>_e.updateQuantity(le,K)),onRemoveItem:B,onEditItem:A,"is-processing":C.value},null,8,["items","is-processing"])])]),t("div",b1,[l(s).screen.gt.sm?(d(),h("div",v1,[t("div",_1,r(P.items.length)+" item(s) ",1),P.notes?(d(),h("div",y1,[ee[22]||(ee[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",k1,[e(xe,{text:P.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),h("div",w1,[t("div",h1,[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),b(r(l(u).props.data.purchase_order.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),b(r(l(be)(P.datetime)),1)])])])):k("",!0),t("div",$1,[t("div",x1,[ee[24]||(ee[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",S1,[ee[23]||(ee[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(l(L)(q.value)),1)])])])]),t("div",V1,[t("div",q1,[e(N,{class:"full-width",label:"Selesai",color:"primary",icon:"payment",onClick:ee[10]||(ee[10]=le=>ve()),disable:!_e.$can("admin.purchase-order-return.close")||C.value||P.items.length===0||P.status!=="draft",loading:C.value},null,8,["disable","loading"])]),t("div",null,[e(N,{icon:"more_vert",color:"grey",onClick:ee[14]||(ee[14]=G(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:ee[11]||(ee[11]=G(le=>T.value=!0,["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...ee[25]||(ee[25]=[b("Edit Rincian",-1)])]),_:1})]),_:1})),[[se],[me]]),te((d(),I(oe,{clickable:"",onClick:ee[12]||(ee[12]=G(le=>Oe(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"preview"})]),_:1}),e(z,null,{default:a(()=>[...ee[26]||(ee[26]=[b("Pratinjau",-1)])]),_:1})]),_:1})),[[se],[me]]),te((d(),I(oe,{clickable:"",onClick:ee[13]||(ee[13]=G(le=>ue(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:a(()=>[...ee[27]||(ee[27]=[b(" Batalkan ",-1)])]),_:1})]),_:1})),[[se],[me]]),e(Te)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Ao,{ref_key:"itemEditorRef",ref:n,modelValue:F.value,"onUpdate:modelValue":ee[15]||(ee[15]=le=>F.value=le),item:U.value,onSave:ee[16]||(ee[16]=le=>ne()),"is-processing":C.value},null,8,["modelValue","item","is-processing"]),e(_a,{modelValue:E.value,"onUpdate:modelValue":ee[17]||(ee[17]=le=>E.value=le),onProductSelected:D},null,8,["modelValue"]),e(Bo,{modelValue:T.value,"onUpdate:modelValue":ee[18]||(ee[18]=le=>T.value=le),data:P,onSave:ee[19]||(ee[19]=le=>fe()),"is-processing":C.value},null,8,["modelValue","data","is-processing"]),e(No,{modelValue:v.value,"onUpdate:modelValue":ee[20]||(ee[20]=le=>v.value=le)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},T1=Object.freeze(Object.defineProperty({__proto__:null,default:C1},Symbol.toStringTag,{value:"Module"})),P1={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},R1={class:"q-pa-xs"},O1={class:"full-width row flex-center text-grey-8 q-gutter-sm"},D1={key:0},I1={key:1},U1={key:2},j1={key:3},E1={key:0},A1={key:0},M1={key:1},N1={class:"flex justify-end"},Tl="Retur Pembelian",B1={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=mo();co(),[`${c}`,...po(c-2,c-1).reverse()],[...fo()];const m=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES)],g=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES)],_=Re().startOf("month").toDate(),y=Re().endOf("month").toDate(),$=Ue({search:"",status:"all",refund_status:"all",start_date:_,end_date:y,...ze()}),V=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{q()});const E=x=>{if(x.status=="draft"){F(x);return}T(x)},F=x=>{Y.get(route("admin.purchase-order-return.edit",x.id))},T=x=>{Y.get(route("admin.purchase-order-return.detail",x.id))},U=x=>{St.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${x.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.purchase-order-return.cancel",{id:x.id}),{id:x.id}).then(j=>{const D=j.data.data,O=o.value.findIndex(A=>A.id===D.id);if(O===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[O].status="canceled",s.notify({message:j.data.message,position:"bottom"})}).catch(j=>{var O,A;const D=((A=(O=j.response)==null?void 0:O.data)==null?void 0:A.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:D,color:"warning",position:"bottom"}),console.error(j)})})},P=x=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${x.code}?`,url:route("admin.purchase-order-return.delete",x.id),fetchItemsCallback:q,loading:i}),q=(x=null)=>{const j={...$,start_date:Re($.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Re($.end_date).format("YYYY-MM-DD HH:mm:ss")};Fe({pagination:V,filter:j,props:x,rows:o,url:route("admin.purchase-order-return.data"),loading:i,tableRef:n})},M=()=>{q()},w=Z(()=>s.screen.gt.sm?C:C.filter(x=>x.name==="code"||x.name==="action"));return(x,j)=>{const D=J("i-head"),O=J("authenticated-layout");return d(),h(W,null,[e(D,{title:Tl}),e(O,null,Be({title:a(()=>[b(r(Tl))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:j[0]||(j[0]=A=>u.value=!u.value)},null,8,["icon"]),x.$can("admin.purchase-order-return.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:j[1]||(j[1]=A=>l(Y).get(x.route("admin.purchase-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",R1,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":j[10]||(j[10]=A=>V.value=A),filter:$.search,loading:i.value,columns:w.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Le({height:l(v)}),onRequest:q,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:A,message:B,filter:ne})=>[t("div",O1,[t("span",null,r(B)+" "+r(ne?" with term "+ne:""),1)])]),body:a(A=>[e(Pe,{props:A,class:"cursor-pointer",onClick:G(B=>E(A.row),["prevent"])},{default:a(()=>[e(Q,{key:"code",props:A,class:"wrap-column"},{default:a(()=>{var B,ne,fe;return[t("div",null,[e(S,{name:"tag"}),b(" "+r(A.row.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),b(r(l(be)(A.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[A.row.cashier?(d(),h("div",D1,[e(S,{name:"person",class:"inline-icon"}),b(" Kasir: "+r((B=A.row.cashier)==null?void 0:B.username),1)])):k("",!0),A.row.cashier_session?(d(),h("div",I1,[e(S,{name:"point_of_sale",class:"inline-icon"}),b(" Terminal: "+r((fe=(ne=A.row.cashier_session)==null?void 0:ne.cashier_terminal)==null?void 0:fe.name),1)])):k("",!0),A.row.supplier?(d(),h("div",U1,[e(S,{name:"person",class:"inline-icon"}),e(pa,{href:x.route("admin.supplier.detail",{id:A.row.supplier.id}),onClick:j[7]||(j[7]=G(()=>{},["stop"]))},{default:a(()=>[b(" "+r(A.row.supplier.code)+" - "+r(A.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(l(L)(A.row.grand_total)),1),A.row.notes?(d(),h("div",j1,[e(S,{name:"notes"}),b(" "+r(A.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Mt,{status:A.row.status,statuses:x.$CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Mt,{status:A.row.refund_status,statuses:x.$CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"red",partially_refunded:"orange",fully_refunded:"green",no_refund:"black"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Q,{key:"supplier_id",props:A},{default:a(()=>[A.row.supplier?(d(),h("div",E1,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),b(" "+r(A.row.supplier_code)+" - "+r(A.row.supplier_name),1)]),A.row.supplier_phone?(d(),h("div",A1,[e(S,{name:"phone",class:"inline-icon"}),b(" "+r(A.row.supplier_phone),1)])):k("",!0),A.row.supplier_address?(d(),h("div",M1,[e(S,{name:"home_pin",class:"inline-icon"}),b(" "+r(A.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"total",props:A},{default:a(()=>[b(r(l(L)(A.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:A},{default:a(()=>[e(xe,{text:A.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:A,onClick:j[9]||(j[9]=G(()=>{},["stop"]))},{default:a(()=>[t("div",N1,[x.$can("admin.purchase-order-return.detail")||x.$can("admin.purchase-order-return.edit")||x.$can("admin.purchase-order-return.cancel")||x.$can("admin.purchase-order-return.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:j[8]||(j[8]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[A.row.status!="draft"&&x.$can("admin.purchase-order-return.detail")?te((d(),I(oe,{key:0,onClick:G(B=>T(A.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"visibility"})]),_:1}),e(z,null,{default:a(()=>[...j[11]||(j[11]=[b(" Lihat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),A.row.status=="draft"&&x.$can("admin.purchase-order-return.edit")?te((d(),I(oe,{key:1,onClick:G(B=>F(A.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...j[12]||(j[12]=[b(" Edit ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),A.row.status=="draft"&&x.$can("admin.purchase-order-return.cancel")?te((d(),I(oe,{key:2,onClick:G(B=>U(A.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"cancel"})]),_:1}),e(z,null,{default:a(()=>[...j[13]||(j[13]=[b(" Batalkan ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),e(Te),x.$can("admin.purchase-order-return.delete")?te((d(),I(oe,{key:3,onClick:G(B=>P(A.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...j[14]||(j[14]=[b(" Hapus ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",P1,[e(Xe,{modelValue:$.start_date,"onUpdate:modelValue":[j[2]||(j[2]=A=>$.start_date=A),M],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Xe,{modelValue:$.end_date,"onUpdate:modelValue":[j[3]||(j[3]=A=>$.end_date=A),M],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:$.status,"onUpdate:modelValue":[j[4]||(j[4]=A=>$.status=A),M],options:m,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:$.refund_status,"onUpdate:modelValue":[j[5]||(j[5]=A=>$.refund_status=A),M],options:g,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":j[6]||(j[6]=A=>$.search=A),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},z1=Object.freeze(Object.defineProperty({__proto__:null,default:B1},Symbol.toStringTag,{value:"Module"})),F1={key:0,class:"text-center q-mb-md text-grey-8"},L1={class:"text-subtitle2 text-weight-medium"},H1={class:"text-h5 text-center text-primary q-pb-md"},K1={class:"q-mb-md flex flex-center"},Y1={key:1},W1={class:"col-6"},Q1={class:"col-6"},J1={class:"row"},G1={class:"text-center q-mt-md"},X1={key:0,class:"text-h6 text-negative text-weight-bold"},Z1={key:1,class:"text-h6 text-green-8 text-weight-bold"},eb={key:2,class:"text-h6 text-positive text-weight-bold"},tb={key:2},ab={class:"text-h6 text-negative text-center"},lb={key:3},ob={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=pe(),n=R(!1),f=R("payment"),v=R(new Date),c=R(null),m=Ue([]),g=Z(()=>m.every(x=>x.id&&typeof x.amount=="number"&&x.amount>0)),_=Z(()=>i.props.accounts.map(x=>({label:x.name,value:x.id}))),y=Z(()=>m.reduce((x,j)=>x+(j.amount||0),0)),$=Z(()=>u.total-y.value),V=Z(()=>{if(!u.supplier)return!0;const x=m.find(D=>D.id==="wallet");return(x?x.amount:0)<=u.supplier.balance}),C=new Date,E=ut.addToDate(new Date,{days:30}),F=Z(()=>[x=>!!x||"Tanggal jatuh tempo harus diisi",x=>ut.isBetweenDates(x,C,E,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),T=Z(()=>{if(f.value==="debt")return!!u.supplier&&F.value.every(O=>O(v.value)===!0);const x=m.some(O=>(O.amount||0)>0),j=m.every(O=>(O.amount||0)>=0),D=$.value<=0;return g.value&&x&&j&&D}),U=()=>{m.length<3&&m.push({id:null,amount:0})},P=x=>{if(m.length>1){const j=m.findIndex(D=>D.id===x);j!==-1&&m.splice(j,1)}},q=x=>{f.value=x,v.value=new Date,m.splice(0,m.length),x==="payment"&&_.value.length>0&&(m.splice(0,m.length,{id:_.value[0].value,amount:u.total}),gt(()=>{c.value&&c.value.length>0&&(c.value[0].focus(),c.value[0].select())}))},M=()=>{if(!T.value)return;n.value=!0;let x={total:u.total,is_debt:f.value==="debt"};if(f.value==="debt")x.due_date=ut.formatDate(v.value,"YYYY-MM-DD"),x.payments=[];else{const j=y.value,D=j>u.total?j-u.total:0,O=$.value>0?$.value:0;x.payments=m,x.remaining_debt=O,x.change=D}o("accepted",x),n.value=!1},w=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}q("payment")};return(x,j)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":j[3]||(j[3]=D=>x.$emit("update:modelValue",D)),onBeforeShow:w},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>[...j[4]||(j[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[p.supplier?(d(),h("div",F1,[t("div",L1,[b(" Nama: "+r(p.supplier.name),1),j[5]||(j[5]=t("br",null,null,-1)),b(" Utang / Piutang: Rp. "+r(l(L)(p.supplier.balance)),1)])])):k("",!0),t("div",H1," Total: Rp. "+r(l(L)(p.total)),1),t("div",K1,[e(l(zt),{modelValue:f.value,"onUpdate:modelValue":[j[0]||(j[0]=D=>f.value=D),q],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="payment"?(d(),h("div",Y1,[(d(!0),h(W,null,Ie(m,(D,O)=>(d(),h("div",{key:O,class:"row q-col-gutter-sm q-mb-sm"},[t("div",W1,[e(l(ce),{modelValue:D.id,"onUpdate:modelValue":A=>D.id=A,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[A=>!!A||"Akun harus dipilih"],error:!D.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Q1,[e(Me,{modelValue:D.amount,"onUpdate:modelValue":A=>D.amount=A,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!V.value,"error-message":V.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:O===0?"firstPaymentInputRef":null},Be({_:2},[m.length>1?{name:"append",fn:a(()=>[e(S,{size:"xs",name:"close",class:"cursor-pointer",onClick:A=>P(O)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",J1,[e(N,{disable:!(m.length<3&&$.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:U,size:"sm"},null,8,["disable"])]),t("div",G1,[$.value>0?(d(),h("div",X1," Sisa Tagihan: Rp. "+r(l(L)($.value)),1)):$.value<0?(d(),h("div",Z1," Kembalian: Rp. "+r(l(L)(Math.abs($.value))),1)):(d(),h("div",eb," Tagihan Terbayar "))])])):f.value==="debt"&&p.supplier?(d(),h("div",tb,[e(ra,{outlined:"",modelValue:v.value,"onUpdate:modelValue":j[1]||(j[1]=D=>v.value=D),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(C),"max-date":l(E),rules:F.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",ab," Total Utang: Rp. "+r(l(L)(p.total)),1)])):f.value==="debt"&&!p.supplier?(d(),h("div",lb,[...j[6]||(j[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)])])):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(N,{flat:"",label:"Batal",color:"grey",onClick:j[2]||(j[2]=D=>x.$emit("update:modelValue",!1))}),e(N,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:M,disable:n.value||!T.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},nb=Object.freeze(Object.defineProperty({__proto__:null,default:ob},Symbol.toStringTag,{value:"Module"})),sb={key:0},rb={style:{float:"right"}},ib={key:1},db={style:{float:"right"}},ub={key:2},mb={style:{float:"right"}},cb={key:3},pb={style:{float:"right"}},fb={style:{float:"right"}},gb={class:"q-gutter-sm"},bb={class:"q-my-md"},vb={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const u=R(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>[...n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])]),_:1}),e(ae,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),h("tr",sb,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ",-1)),t("div",rb,r(l(L)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),h("tr",ib,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ",-1)),t("div",db,r(l(L)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),h("tr",ub,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ",-1)),t("div",mb,r(l(L)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),h("tr",cb,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ",-1)),t("span",pb,r(l(L)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ",-1)),t("div",fb,r(l(L)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",gb,[e(N,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(N,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",bb,[e(N,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},_b=bt(vb,[["__scopeId","data-v-f0591c00"]]),yb=Object.freeze(Object.defineProperty({__proto__:null,default:_b},Symbol.toStringTag,{value:"Module"})),kb={class:"column"},wb={class:"bg-grey-2 q-pa-xs"},hb={class:"text-subtitle1 text-bold text-grey-10"},$b={class:"col-12 col-sm-6"},xb={class:"full-width"},Sb={key:0},Vb={key:1},qb={key:0},Cb={key:1},Tb={class:"col-12 col-sm-6",align:"left"},Pb={class:"full-width"},Rb={key:0};const Ob={key:2},Db={class:"full-width",style:{"border-collapse":"collapse"}},Ib={class:"q-pa-sm"},Ub={class:"text-right q-pa-sm"},jb={class:"text-right q-pa-sm"},Eb={class:"text-right q-pa-sm"},Ab={key:0},Mb={class:"col-12 col-sm-6"},Nb={class:"text-body2 text-grey-7 text-italic"},Bb={class:"col-12 col-sm-6"},zb={class:"row justify-end q-gutter-y-xs"},Fb={class:"col-12 row justify-between"},Lb={class:"text-subtitle2 text-bold"},Hb={key:0,class:"row justify-end q-gutter-y-xs"},Kb={class:"col-12 row justify-between"},Yb={class:"text-subtitle2 text-bold"},Wb={key:1,class:"row justify-end q-gutter-y-xs"},Qb={class:"col-12 row justify-between"},Jb={class:"text-subtitle2 text-bold"},Gb={key:2,class:"row justify-end q-gutter-y-xs"},Xb={class:"col-12 row justify-between"},Zb={class:"text-subtitle2 text-bold"},zo={__name:"InvoiceTab",props:{data:Object},setup(p){const s=p;return(u,o)=>{const i=J("i-link");return d(),h("div",kb,[e(ae,{class:"q-pa-none"},{default:a(()=>[t("div",wb,[t("div",hb," Pembelian #"+r(s.data.code),1)])]),_:1}),e(Te),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",$b,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Supplier",-1)),t("table",xb,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(d(),h("div",Sb,[e(S,{class:"inline-icon",name:"person"}),e(i,{href:u.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>[b(r(s.data.supplier_name),1)]),_:1},8,["href"])])):(d(),h("div",Vb,[e(S,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pemasok Umum ",-1))]))])]),s.data.supplier_phone?(d(),h("tr",qb,[t("td",null,[e(S,{class:"inline-icon",name:"phone"}),e(Yt,{phone:s.data.supplier_phone},null,8,["phone"])])])):k("",!0),s.data.supplier_address?(d(),h("tr",Cb,[t("td",null,[e(S,{class:"inline-icon",name:"home_pin"}),(d(),h(W,{key:0},[b(r(s.data.supplier_address),1)],64))])])):k("",!0)])])]),t("div",Tb,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",Pb,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(be)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.$CONSTANTS.PURCHASE_ORDER_STATUSES[s.data.status]),1)]),s.data.status=="closed"?(d(),h("tr",Rb,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)])):k("",!0),k("",!0),s.data.due_date?(d(),h("tr",Ob,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(la)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("table",Db,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),h(W,null,Ie(s.data.details,n=>(d(),h("tr",{key:n.id},[t("td",Ib,[e(i,{href:u.route("admin.product.detail",{id:n.product_id})},{default:a(()=>[b(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",Ub,r(n.quantity),1),t("td",null,r(n.product_uom),1),t("td",jb,r(l(L)(n.cost)),1),t("td",Eb,r(l(L)(n.subtotal_cost)),1)]))),128)),s.data.details.length==0?(d(),h("tr",Ab,[...o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)])])]),_:1}),e(Te),e(ae,{class:"row",align:"left"},{default:a(()=>[t("div",Mb,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Nb,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Bb,[t("div",zb,[t("div",Fb,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Lb,r(l(L)(s.data.grand_total)),1)])]),s.data.status=="closed"&&s.data.total_return?(d(),h("div",Hb,[t("div",Kb,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",Yb,r(l(L)(s.data.total_return)),1)])])):k("",!0),s.data.status=="closed"&&s.data.total_paid?(d(),h("div",Wb,[t("div",Qb,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Dibayar (Rp)",-1)),t("div",Jb,r(l(L)(s.data.total_paid)),1)])])):k("",!0),s.data.status=="closed"&&s.data.balance!=0?(d(),h("div",Gb,[t("div",Xb,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",Zb,r(l(xt)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},ev=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),tv={key:0,class:"text-center q-mb-md text-grey-8"},av={class:"text-subtitle2 text-weight-medium"},lv={class:"text-h5 text-center text-primary q-pb-md"},ov={class:"text-center q-mt-md"},nv={key:0,class:"text-h6 text-negative text-weight-bold"},sv={key:1,class:"text-h6 text-green-8 text-weight-bold"},rv={key:2,class:"text-h6 text-positive text-weight-bold"},Fo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=pe(),n=R(!1),f=R({method:null,amount:u.total,notes:null}),v=i.props.data.supplier,c=Z(()=>[...i.props.accounts.map(C=>({label:C.type=="bank"?C.name+" - "+C.number:C.name,value:C.id}))]),m=Z(()=>u.total-(f.value.amount||0)),g=Z(()=>f.value.method&&typeof f.value.amount=="number"&&f.value.amount>0),_=Z(()=>f.value.method?(f.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),y=Z(()=>g.value&&_.value===null),$=()=>{if(!y.value)return;n.value=!0;const C={total_paid:f.value.amount,payments:[{id:f.value.method,amount:f.value.amount}],notes:f.value.notes,remaining_debt:Math.max(0,u.total-(f.value.amount||0))};o("accepted",C),n.value=!1},V=()=>{f.value.amount=u.total,f.value.method=null,f.value.notes=null};return(C,E)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":E[4]||(E[4]=F=>C.$emit("update:modelValue",F)),onBeforeShow:V},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>[...E[5]||(E[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[l(v)?(d(),h("div",tv,[t("div",av,[b(r(l(v).name)+" ",1),E[6]||(E[6]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(l(L)(l(v).balance)),1)])])):k("",!0),t("div",lv," Total: Rp. "+r(l(L)(p.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":E[0]||(E[0]=F=>f.value.method=F),options:c.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value,rules:[F=>!!F||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Me,{modelValue:f.value.amount,"onUpdate:modelValue":E[1]||(E[1]=F=>f.value.amount=F),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":_.value},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:f.value.notes,"onUpdate:modelValue":E[2]||(E[2]=F=>f.value.notes=F),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",ov,[m.value>0?(d(),h("div",nv," Sisa Tagihan: Rp. "+r(l(L)(m.value)),1)):m.value<0?(d(),h("div",sv," Kembalian: Rp. "+r(l(L)(Math.abs(m.value))),1)):(d(),h("div",rv," Tagihan Terbayar "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(N,{flat:"",label:"Batal",color:"grey",onClick:E[3]||(E[3]=F=>C.$emit("update:modelValue",!1))}),e(N,{label:"Bayar",color:"positive",onClick:$,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},iv=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),dv={class:"column"},uv={class:"row"},mv={class:"full-width",style:{"border-collapse":"collapse"}},cv={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},pv={class:"row items-center q-gutter-x-sm"},fv={class:"text-weight-bold"},gv={class:"row items-center q-gutter-x-sm q-mt-xs"},bv={class:"text-caption text-grey-6"},vv={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},_v={class:"q-mt-xs"},yv={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},kv={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},wv={key:0},hv={class:"text-right q-pa-sm"},Lo={__name:"PaymentTab",props:{data:Object},setup(p){const s=p,u=we(),o=R(!1),i=()=>{o.value=!0},n=async v=>{const c={order_id:s.data.id,payments:v.payments,notes:v.notes};u.loading.show({message:"Memproses pembayaran..."});try{const m=await De.post(route("admin.purchase-order.add-payment"),c);u.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Y.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(m){let g="Gagal memproses pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}},f=v=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await De.post(route("admin.purchase-order.delete-payment",{id:v.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Y.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(c){let m="Gagal menghapus pembayaran.";c.response&&c.response.data&&c.response.data.message?m=c.response.data.message:c.message&&(m=c.message),u.notify({message:m,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(v,c)=>{const m=J("i-link");return d(),h(W,null,[t("div",dv,[e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("div",uv,[v.$can("admin.purchase-order.add-payment")?(d(),I(N,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:c[0]||(c[0]=G(g=>i(),["stop"]))})):k("",!0)]),t("table",mv,[c[5]||(c[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),h(W,null,Ie(s.data.payments,g=>(d(),h("tr",{key:g.id},[t("td",cv,[t("div",pv,[e(S,{name:"tag",size:"xs",color:"grey-7"}),t("span",fv,r(g.code),1)]),t("div",gv,[e(S,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",bv,r(l(be)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),h("div",vv,[e(S,{name:"wallet",size:"xs",color:"grey-7"}),e(m,{class:"text-caption",href:v.route("admin.finance-account.detail",{id:g.account.id})},{default:a(()=>[b(r(g.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",_v,[e(rt,{label:v.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(rt,{label:g.amount<0?"Pembayaran":"Refund",color:g.amount<0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",yv,r(l(xt)(g.amount)),1),t("td",kv,[v.$can("admin.purchase-order.delete-payment")&&s.data.supplier_id&&g.amount<0?(d(),I(N,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),h("tr",wv,[...c[2]||(c[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",null,[c[3]||(c[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",hv,r(l(xt)(s.data.balance)),1),c[4]||(c[4]=t("td",null,null,-1))])])])]),_:1})]),e(Fo,{modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=g=>o.value=g),total:v.remainingPayment,customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},$v=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),xv={class:"q-gutter-sm"},Sv={class:"col col-lg-6 q-pa-xs",align:"center"},Pl="Rincian Pembelian",Vv={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),u=pe(),o=u.props.data,i=R(s.get("preview")||!1),f=R(s.get("tab")||"invoice"),v=()=>{window.print()};return(c,m)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),h(W,null,[e(g,{title:Pl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Pl))])]),"left-button":a(()=>[t("div",xv,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>i.value?l(Y).get(c.route("admin.purchase-order.edit",l(u).props.data.id)):l(Y).get(c.route("admin.purchase-order.index")))})])]),"right-button":a(()=>[e(N,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>v())}),i.value?k("",!0):(d(),I(N,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[2]||(m[2]=y=>l(Y).get(c.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Ce,{class:"row justify-center print-visible"},{default:a(()=>[t("div",Sv,[e(ie,{square:"",flat:"",bordered:"",class:Ve(["full-width",i.value?"draft-label":f.value!="invoice"?"":l(u).props.data.payment_status=="fully_paid"?"paid-label":"unpaid-label"]),style:{"max-width":"1024px"}},{default:a(()=>[e(Ct,{modelValue:f.value,"onUpdate:modelValue":m[3]||(m[3]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(it,{name:"invoice",label:"Rincian"}),i.value?k("",!0):(d(),I(it,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Te),e(Tt,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),animated:""},{default:a(()=>[e(dt,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(zo,{data:l(o)},null,8,["data"])]),_:1}),e(dt,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(Lo,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])])]),_:1})]),_:1})],64)}}},qv=Object.freeze(Object.defineProperty({__proto__:null,default:Vv},Symbol.toStringTag,{value:"Module"})),Cv={class:"text-weight-medium wrap-column"},Tv={class:"text-caption text-grey-6 elipsis"},Pv={class:"column items-end"},Rv={class:"text-caption text-grey-6 text-italic"},Ho={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=we(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(Ee,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Le({height:l(u)})},{header:a(f=>[e(Pe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),h(W,null,Ie(f.cols,v=>(d(),I(Gt,{key:v.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Pe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left"},{default:a(()=>[t("div",Cv,r(f.row.product_name),1),t("div",Tv,r(f.row.product_barcode),1),f.row.notes?(d(),I(xe,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal",props:f,class:"text-right"},{default:a(()=>[t("div",Pv,[t("div",null,r(l(L)(f.row.subtotal_cost)),1),t("div",Rv,r(l(L)(f.row.quantity))+" x Rp. "+r(l(L)(f.row.cost)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(N,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(N,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Ov=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),Dv={key:0,class:"text-center q-mb-md text-grey-8"},Iv={class:"text-subtitle2 text-weight-medium"},Uv={class:"text-h5 text-center text-primary q-pb-md"},jv={class:"q-mb-md flex flex-center"},Ev={key:1},Av={class:"col-6"},Mv={class:"col-6"},Nv={class:"row"},Bv={class:"text-center q-mt-md"},zv={key:0,class:"text-h6 text-negative text-weight-bold"},Fv={key:1,class:"text-h6 text-green-8 text-weight-bold"},Lv={key:2,class:"text-h6 text-positive text-weight-bold"},Hv={key:2},Kv={class:"text-h6 text-negative text-center"},Yv={key:3},Ko={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=pe(),n=R(!1),f=R("payment"),v=R(new Date),c=R(null),m=Ue([]),g=Z(()=>m.every(x=>x.id&&typeof x.amount=="number"&&x.amount>0)),_=Z(()=>i.props.accounts.map(x=>({label:x.name,value:x.id}))),y=Z(()=>m.reduce((x,j)=>x+(j.amount||0),0)),$=Z(()=>u.total-y.value),V=Z(()=>{if(!u.supplier)return!0;const x=m.find(j=>j.id==="wallet");return x?x.amount<=u.supplier.balance:!0}),C=new Date,E=ut.addToDate(new Date,{days:30}),F=Z(()=>[x=>!!x||"Tanggal jatuh tempo harus diisi",x=>ut.isBetweenDates(x,C,E,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),T=Z(()=>{if(f.value==="debt")return!!u.supplier&&F.value.every(O=>O(v.value)===!0);const x=m.some(O=>(O.amount||0)>0),j=m.every(O=>(O.amount||0)>=0),D=$.value<=0;return g.value&&x&&j&&D}),U=()=>{m.length<3&&m.push({id:null,amount:0})},P=x=>{if(m.length>1){const j=m.findIndex(D=>D.id===x);j!==-1&&m.splice(j,1)}},q=x=>{f.value=x,v.value=new Date,m.splice(0,m.length),x==="payment"&&_.value.length>0&&(m.splice(0,m.length,{id:_.value[0].value,amount:u.total}),gt(()=>{c.value&&c.value.length>0&&(c.value[0].focus(),c.value[0].select())}))},M=()=>{if(!T.value)return;n.value=!0;let x={total:u.total,is_debt:f.value==="debt"};if(f.value==="debt")x.due_date=ut.formatDate(v.value,"YYYY-MM-DD"),x.payments=[];else{const j=y.value,D=j>u.total?j-u.total:0,O=$.value>0?$.value:0;x.payments=m,x.remaining_debt=O,x.change=D}o("accepted",x),n.value=!1},w=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}q("payment")};return(x,j)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":j[3]||(j[3]=D=>x.$emit("update:modelValue",D)),onBeforeShow:w},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>[...j[4]||(j[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[p.supplier?(d(),h("div",Dv,[t("div",Iv,[b(" Nama: "+r(p.supplier.name),1),j[5]||(j[5]=t("br",null,null,-1)),b(" Utang / Piutang: Rp. "+r(l(L)(p.supplier.balance)),1)])])):k("",!0),t("div",Uv," Total: Rp. "+r(l(L)(p.total)),1),t("div",jv,[e(l(zt),{modelValue:f.value,"onUpdate:modelValue":[j[0]||(j[0]=D=>f.value=D),q],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="payment"?(d(),h("div",Ev,[(d(!0),h(W,null,Ie(m,(D,O)=>(d(),h("div",{key:O,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Av,[e(l(ce),{modelValue:D.id,"onUpdate:modelValue":A=>D.id=A,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[A=>!!A||"Akun harus dipilih"],error:!D.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Mv,[e(Me,{modelValue:D.amount,"onUpdate:modelValue":A=>D.amount=A,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!V.value,"error-message":V.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:O===0?"firstPaymentInputRef":null},Be({_:2},[m.length>1?{name:"append",fn:a(()=>[e(S,{size:"xs",name:"close",class:"cursor-pointer",onClick:A=>P(O)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Nv,[e(N,{disable:!(m.length<3&&$.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:U,size:"sm"},null,8,["disable"])]),t("div",Bv,[$.value>0?(d(),h("div",zv," Sisa Tagihan: Rp. "+r(l(L)($.value)),1)):$.value<0?(d(),h("div",Fv," Kembalian: Rp. "+r(l(L)(Math.abs($.value))),1)):(d(),h("div",Lv," Tagihan Terbayar "))])])):f.value==="debt"&&p.supplier?(d(),h("div",Hv,[e(ra,{outlined:"",modelValue:v.value,"onUpdate:modelValue":j[1]||(j[1]=D=>v.value=D),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(C),"max-date":l(E),rules:F.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Kv," Total Utang: Rp. "+r(l(L)(p.total)),1)])):f.value==="debt"&&!p.supplier?(d(),h("div",Yv,[...j[6]||(j[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)])])):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(N,{flat:"",label:"Batal",color:"grey",onClick:j[2]||(j[2]=D=>x.$emit("update:modelValue",!1))}),e(N,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:M,disable:n.value||!T.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Wv=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),Qv={class:"row items-center no-wrap"},Jv={class:"col-auto"},Yo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=Z(()=>o.item.quantity*o.item.cost),v=_=>{_.stopPropagation(),_.preventDefault()},c=_=>{o.modelValue&&(_.key==="Enter"?(n(),v(_)):_.key==="Escape"&&(i("update:modelValue",!1),v(_)))};he(()=>{window.addEventListener("keydown",c)}),ht(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item});const g=()=>{};return(_,y)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":y[6]||(y[6]=$=>_.$emit("update:modelValue",$)),onBeforeShow:g},{default:a(()=>[e(ie,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Qv,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Jv,[e(N,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=$=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(re,{modelValue:p.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=$=>p.item.product_name=$),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=$=>p.item.quantity=$),label:`Kwantitas (${p.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","label","disable"]),e(Me,{modelValue:p.item.cost,"onUpdate:modelValue":y[3]||(y[3]=$=>p.item.cost=$),label:"Modal / Harga Beli","hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=$=>f.value=$),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(re,{modelValue:p.item.notes,"onUpdate:modelValue":y[5]||(y[5]=$=>p.item.notes=$),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(N,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[me]]),te(e(N,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Gv=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),Xv={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(u,o)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>[...o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])]),_:1}),e(ae,null,{default:a(()=>[...o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])]),_:1}),e(tt,{align:"center"},{default:a(()=>[te(e(N,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Wo=bt(Xv,[["__scopeId","data-v-a7905738"]]),Zv=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),e_={class:"row items-center no-wrap"},t_={class:"col text-subtite text-bold text-grey-8"},a_={class:"col-auto"},Qo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=m=>{m.stopPropagation(),m.preventDefault()},v=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(i("update:modelValue",!1),f(m)))};return he(()=>{window.addEventListener("keydown",v)}),ht(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(ie,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",e_,[t("div",t_," Edit "+r(p.data.code),1),t("div",a_,[e(N,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(Xe,{modelValue:p.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(re,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(re,{modelValue:p.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(N,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[me]]),te(e(N,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},l_=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),o_={key:0},n_={style:{float:"right"}},s_={key:1},r_={style:{float:"right"}},i_={key:2},d_={style:{float:"right"}},u_={key:3},m_={style:{float:"right"}},c_={style:{float:"right"}},p_={class:"q-gutter-sm"},f_={class:"q-my-md"},g_={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const u=R(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>[...n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])]),_:1}),e(ae,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),h("tr",o_,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ",-1)),t("div",n_,r(l(L)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),h("tr",s_,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ",-1)),t("div",r_,r(l(L)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),h("tr",i_,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ",-1)),t("div",d_,r(l(L)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),h("tr",u_,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ",-1)),t("span",m_,r(l(L)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ",-1)),t("div",c_,r(l(L)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",p_,[e(N,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(N,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",f_,[e(N,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Jo=bt(g_,[["__scopeId","data-v-31d340fd"]]),b_=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),v_={class:"q-gutter-sm"},__={class:"row items-center"},y_={class:"text-weight-bold"},k_={class:"row q-col-gutter-none full-width"},w_={class:"col-sm-6 col-12 col q-pa-sm"},h_={class:"row full-width"},$_={class:"col-sm-6 col-12 q-pa-sm"},x_={class:"row q-ml-sm items-end"},S_={class:"row col grow"},V_={class:"col-12 q-px-sm column"},q_={class:"row items-start q-col-gutter-none q-px-sm"},C_={key:0,class:"col"},T_={class:"text-caption text-grey-6 q-mt-xs"},P_={key:0,class:"text-caption text-grey-8 q-mt-xs"},R_={class:"text-italic"},O_={key:1,class:"col"},D_={class:"text-grey-8"},I_={class:"col"},U_={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},j_={class:"text-h4 text-weight-bold"},E_={class:"row q-px-sm q-col-gutter-sm q-py-xs"},A_={class:"col"},M_={__name:"Editor",setup(p){const s=we(),u=pe(),o=R(!0),i=R(null),n=R(null),f=R(null),v=R(!1),c=R(null),m=R(null),{isFullscreen:g,toggleFullscreen:_}=Ma(m),y=u.props.data.code,$=R(u.props.data.supplier),V=R(null),C=R(""),E=R(!1),F=R(!1),T=R(!1),U=R(!1),P=R(!1),q=R(!1),M=R(null),w=Ue({id:u.props.data.id,code:u.props.data.code,supplier_id:u.props.data.supplier_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),x=Z(()=>w.items.reduce((le,K)=>le+K.cost*K.quantity,0)),j=()=>{var le;_(),g.value||(le=c==null?void 0:c.value)==null||le.hideDrawer()},D=le=>isNaN(le)||le<=0?(vt("Kuantitas tidak valid.","top"),!1):!0,O=le=>isNaN(le)||le<0?(vt("Harga tidak valid.","top"),!1):!0,A=le=>!le||le.length==0?(vt("Barcode tidak valid.","top"),!1):!0,B=le=>{var K;(K=C.value)!=null&&K.endsWith("*")?C.value+=le.name:C.value=le.name},ne=async()=>{if(E.value)return;const le=C.value.trim();if(le.length===0){T.value=!0;return}const K=le.split("*");let de=1,$e="",ke=null;if(K.length===1)$e=K[0];else if(K.length<=3)de=parseInt(K[0]),$e=K[1],K.length===3&&(ke=parseFloat(K[2]));else{vt("Input tidak valid.","top");return}if($e.length===0){T.value=!0;return}!A($e)&&!D(de)&&!O(ke)||(E.value=!0,await De.post(route("admin.purchase-order.add-item"),{order_id:w.id,product_code:$e,qty:de,cost:ke,merge:o.value}).then(nt=>{const yt=nt.data.data.item;let Vt=-1;nt.data.data.mergeItem&&(Vt=w.items.findIndex(ha=>ha.id===yt.id)),Vt===-1?w.items.push(yt):w.items[Vt]=yt,C.value="",ke!==null&&ke!==parseFloat(yt.cost)&&vt("Harga tidak dapat diubah!","top")}).catch(nt=>{var yt,Vt;pt((Vt=(yt=nt.response)==null?void 0:yt.data)==null?void 0:Vt.message,"top"),console.error("Gagal mengambil data produk:",nt)}),E.value=!1,gt(()=>{var nt;(nt=i.value)==null||nt.focus()}))},fe=le=>{M.value=Object.create(le),U.value=!0},ve=le=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${le.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{E.value=!0,De.post(route("admin.purchase-order.remove-item"),{id:le.id}).then(()=>{const K=w.items.findIndex(de=>de.id===le.id);K!==-1&&(w.items.splice(K,1)[0],ft("Item telah dihapus","top"))}).catch(K=>{var de,$e;pt((($e=(de=K==null?void 0:K.response)==null?void 0:de.data)==null?void 0:$e.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(K)}).finally(()=>{E.value=!1})})},ue=()=>{E.value=!0;const le=n.value.getCurrentItem(),K={id:le.id,qty:le.quantity,cost:le.cost};le.notes&&(K.notes=le.notes),De.post(route("admin.purchase-order.update-item"),K).then(de=>{const $e=de.data.data,ke=w.items.findIndex(nt=>nt.id===$e.id);ke!==-1&&(w.items[ke]=$e,ft("Item telah diperbarui","top"))}).catch(de=>{var $e,ke;pt(((ke=($e=de==null?void 0:de.response)==null?void 0:$e.data)==null?void 0:ke.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(de)}).finally(()=>{E.value=!1})};he(()=>{const le=K=>{var de;K.key==="F1"?(K.preventDefault(),v.value=!0):K.key==="F2"?(K.preventDefault(),f.value.focus()):K.key==="F3"?(K.preventDefault(),(de=i.value)==null||de.focus()):K.key==="F4"?(K.preventDefault(),o.value=!o.value):K.key==="F10"?(K.preventDefault(),F.value=!0):K.key==="F11"?(K.preventDefault(),j()):(K.key==="F5"||K.key==="F6"||K.key==="F7"||K.key==="F12")&&K.preventDefault()};document.addEventListener("keydown",le),ht(()=>{document.removeEventListener("keydown",le)}),gt(()=>{var K;(K=c==null?void 0:c.value)==null||K.hideDrawer()})});const Oe=async le=>{var K;$.value=le,w.supplier_id=le==null?void 0:le.id,await _e(),le!=null&&le.id?(K=i.value)==null||K.focus():f.value.focus()},_e=async()=>{E.value=!0;const le={id:w.id,supplier_id:w.supplier_id,datetime:Qt(w.datetime),notes:w.notes};await De.post(route("admin.purchase-order.update"),le).then(K=>{const de=K.data.data.id;w.supplier_id=de.supplier_id}).catch(K=>{var de,$e;pt((($e=(de=K==null?void 0:K.response)==null?void 0:de.data)==null?void 0:$e.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(K)}).finally(()=>{E.value=!1})},ee=le=>{if(w.items.length===0){ft("Item masih kosong","top");return}const K={id:w.id,...le};E.value=!0,De.post(route("admin.purchase-order.close"),K).then(de=>{ft("Transaksi selesai"),Y.visit(route("admin.purchase-order.detail",{id:w.id}))}).catch(de=>{var $e,ke;pt((ke=($e=de.response)==null?void 0:$e.data)==null?void 0:ke.message),console.error(de)}).finally(()=>{E.value=!1})},H=()=>{St.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${w.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.purchase-order.cancel",{id:w.id}),{id:w.id}).then(()=>{ft("Transaksi telah dibatalkan."),Y.visit(route("admin.purchase-order.detail",{id:w.id}))}).catch(le=>{var de,$e;const K=(($e=(de=le.response)==null?void 0:de.data)==null?void 0:$e.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:K,color:"warning",position:"bottom"}),console.error(le)})})},X=()=>{window.open(route("admin.purchase-order.detail",{id:w.id})+"?preview=1","_blank")};return(le,K)=>{const de=J("i-head"),$e=J("authenticated-layout");return d(),h(W,null,[e(de,{title:l(y)},null,8,["title"]),e($e,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[b(r(l(y)),1)]),"left-button":a(()=>[t("div",v_,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:K[0]||(K[0]=ke=>l(Y).get(le.route("admin.purchase-order.index")))})])]),"right-button":a(()=>[t("div",__,[l(s).screen.gt.sm?(d(),h(W,{key:0},[t("div",y_,r(l(u).props.auth.user.username),1),K[23]||(K[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ga)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Ce,{class:"bg-grey-2 column fit"},{default:a(()=>[e(ie,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",k_,[t("div",w_,[t("div",h_,[e(Mo,{ref_key:"supplierAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:$.value,"onUpdate:modelValue":K[2]||(K[2]=ke=>$.value=ke),label:"Pemasok",disable:E.value,onSupplierSelected:Oe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),$.value?(d(),I(ka,{key:0,party:$.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",$_,[e(ya,{ref_key:"userInputRef",ref:i,modelValue:C.value,"onUpdate:modelValue":K[3]||(K[3]=ke=>C.value=ke),onKeyup:K[4]||(K[4]=Ft(G(ke=>ne(),["prevent"]),["enter"])),onScanSuccess:K[5]||(K[5]=ke=>ne()),onSend:K[6]||(K[6]=ke=>ne()),onSearch:K[7]||(K[7]=ke=>T.value=!0),loading:E.value,disable:E.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",x_,[e(Pt,{class:"col",modelValue:o.value,"onUpdate:modelValue":K[8]||(K[8]=ke=>o.value=ke),label:"Gabungkan item",disable:E.value},null,8,["modelValue","disable"])])])]),t("div",S_,[t("div",V_,[e(Ho,{items:w.items,onUpdateQuantity:K[9]||(K[9]=({id:ke,value:nt})=>le.updateQuantity(ke,nt)),onRemoveItem:ve,onEditItem:fe,"is-processing":E.value},null,8,["items","is-processing"])])]),t("div",q_,[l(s).screen.gt.sm?(d(),h("div",C_,[t("div",T_,r(w.items.length)+" item(s) ",1),w.notes?(d(),h("div",P_,[K[24]||(K[24]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",R_,[e(xe,{text:w.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),h("div",O_,[t("div",D_,[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),b(r(w.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),b(r(l(be)(w.datetime)),1)])])])):k("",!0),t("div",I_,[t("div",U_,[K[26]||(K[26]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",j_,[K[25]||(K[25]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(l(L)(x.value)),1)])])])]),t("div",E_,[t("div",A_,[e(N,{class:"full-width",label:"Bayar",color:"primary",icon:"payment",onClick:K[10]||(K[10]=ke=>F.value=!0),disable:!le.$can("admin.purchase-order.close")||E.value||w.items.length===0||w.status!=="draft",loading:E.value},null,8,["disable","loading"])]),t("div",null,[e(N,{icon:"more_vert",color:"grey",onClick:K[14]||(K[14]=G(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:K[11]||(K[11]=G(ke=>P.value=!0,["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...K[27]||(K[27]=[b("Edit Rincian",-1)])]),_:1})]),_:1})),[[se],[me]]),te((d(),I(oe,{clickable:"",onClick:K[12]||(K[12]=G(ke=>X(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"preview"})]),_:1}),e(z,null,{default:a(()=>[...K[28]||(K[28]=[b("Pratinjau",-1)])]),_:1})]),_:1})),[[se],[me]]),te((d(),I(oe,{clickable:"",onClick:K[13]||(K[13]=G(ke=>H(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:a(()=>[...K[29]||(K[29]=[b(" Batalkan ",-1)])]),_:1})]),_:1})),[[se],[me]]),e(Te)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Yo,{ref_key:"itemEditorRef",ref:n,modelValue:U.value,"onUpdate:modelValue":K[15]||(K[15]=ke=>U.value=ke),item:M.value,onSave:K[16]||(K[16]=ke=>ue()),"is-processing":E.value},null,8,["modelValue","item","is-processing"]),e(Ko,{modelValue:F.value,"onUpdate:modelValue":K[17]||(K[17]=ke=>F.value=ke),onAccepted:ee,form:w,supplier:$.value,total:x.value,accounts:l(u).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(_a,{modelValue:T.value,"onUpdate:modelValue":K[18]||(K[18]=ke=>T.value=ke),"show-cost":!0,onProductSelected:B},null,8,["modelValue"]),e(Qo,{modelValue:P.value,"onUpdate:modelValue":K[19]||(K[19]=ke=>P.value=ke),data:w,onSave:K[20]||(K[20]=ke=>_e()),"is-processing":E.value},null,8,["modelValue","data","is-processing"]),e(Wo,{modelValue:v.value,"onUpdate:modelValue":K[21]||(K[21]=ke=>v.value=ke)},null,8,["modelValue"]),e(Jo,{modelValue:q.value,"onUpdate:modelValue":K[22]||(K[22]=ke=>q.value=ke),order:w,supplier:$.value,total:x.value,payment:V.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},N_=Object.freeze(Object.defineProperty({__proto__:null,default:M_},Symbol.toStringTag,{value:"Module"})),Go={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.PURCHASE_ORDER_STATUSES,u={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(d(),I(Mt,{status:p.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}},Xo={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,u={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(d(),I(Mt,{status:p.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}};const B_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},z_={class:"q-pa-xs"},F_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},L_={key:0},H_={key:1},K_={key:2},Y_={key:0},W_={key:0},Q_={key:1},J_={class:"flex justify-end"},Rl="Pembelian",G_={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=mo();co(),[`${c}`,...po(c-2,c-1).reverse()],[...fo()];const m=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],g=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],_=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],y=Re().startOf("month").toDate(),$=Re().endOf("month").toDate(),V=Ue({search:"",status:"all",payment_status:"all",delivery_status:"all",start_date:y,end_date:$,...ze()}),C=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),E=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp.)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{M()});const F=j=>{if(j.status=="draft"){T(j);return}U(j)},T=j=>{Y.get(route("admin.purchase-order.edit",j.id))},U=j=>{Y.get(route("admin.purchase-order.detail",j.id))},P=j=>{St.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${j.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.purchase-order.cancel",{id:j.id}),{id:j.id}).then(D=>{const O=D.data.data,A=o.value.findIndex(B=>B.id===O.id);if(A===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[A].status="canceled",s.notify({message:D.data.message,position:"bottom"})}).catch(D=>{var A,B;const O=((B=(A=D.response)==null?void 0:A.data)==null?void 0:B.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:O,color:"warning",position:"bottom"}),console.error(D)})})},q=j=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${j.code}?`,url:route("admin.purchase-order.delete",j.id),fetchItemsCallback:M,loading:i}),M=(j=null)=>{const D={...V,start_date:Re(V.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Re(V.end_date).format("YYYY-MM-DD HH:mm:ss")};Fe({pagination:C,filter:D,props:j,rows:o,url:route("admin.purchase-order.data"),loading:i,tableRef:n})},w=()=>{M()},x=Z(()=>s.screen.gt.sm?E:E.filter(j=>j.name==="id"||j.name==="action"));return(j,D)=>{const O=J("i-head"),A=J("authenticated-layout");return d(),h(W,null,[e(O,{title:Rl}),e(A,null,Be({title:a(()=>[b(r(Rl))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=B=>u.value=!u.value)},null,8,["icon"]),j.$can("admin.purchase-order.edit")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[1]||(D[1]=B=>l(Y).get(j.route("admin.purchase-order.add")))})):k("",!0)]),default:a(()=>[t("div",z_,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:C.value,"onUpdate:pagination":D[11]||(D[11]=B=>C.value=B),filter:V.search,loading:i.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Le({height:l(v)}),onRequest:M,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:B,message:ne,filter:fe})=>[t("div",F_,[t("span",null,r(ne)+" "+r(fe?" with term "+fe:""),1)])]),body:a(B=>[e(Pe,{props:B,class:"cursor-pointer",onClick:G(ne=>F(B.row),["prevent"])},{default:a(()=>[e(Q,{key:"id",props:B,class:"wrap-column"},{default:a(()=>[t("div",null,[e(S,{name:"tag"}),b(" "+r(B.row.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),b(r(l(be)(B.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[B.row.supplier?(d(),h("div",L_,[e(S,{name:"person",class:"inline-icon"}),e(pa,{href:j.route("admin.supplier.detail",{id:B.row.supplier.id}),onClick:D[8]||(D[8]=G(()=>{},["stop"]))},{default:a(()=>[b(" "+r(B.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Total: Rp. "+r(l(L)(B.row.grand_total)),1),B.row.balance!=0?(d(),h("div",H_," Saldo: Rp. "+r(l(xt)(B.row.balance)),1)):k("",!0),B.row.notes?(d(),h("div",K_,[e(S,{name:"notes"}),b(" "+r(B.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Go,{status:B.row.status},null,8,["status"]),B.row.status=="closed"?(d(),h(W,{key:0},[e(Xo,{status:B.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]),_:2},1032,["props"]),e(Q,{key:"supplier_id",props:B},{default:a(()=>[B.row.supplier?(d(),h("div",Y_,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),b(" "+r(B.row.supplier_name),1)]),B.row.supplier_phone?(d(),h("div",W_,[e(S,{name:"phone",class:"inline-icon"}),b(" "+r(B.row.supplier_phone),1)])):k("",!0),B.row.supplier_address?(d(),h("div",Q_,[e(S,{name:"home_pin",class:"inline-icon"}),b(" "+r(B.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:B},{default:a(()=>[b(r(l(L)(B.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:B},{default:a(()=>[b(r(l(xt)(B.row.balance)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:B},{default:a(()=>[e(xe,{text:B.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:B,onClick:D[10]||(D[10]=G(()=>{},["stop"]))},{default:a(()=>[t("div",J_,[j.$can("admin.purchase-order.detail")||j.$can("admin.purchase-order.edit")||j.$can("admin.purchase-order.cancel")||j.$can("admin.purchase-order.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[9]||(D[9]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[B.row.status!="draft"&&j.$can("admin.purchase-order.detail")?te((d(),I(oe,{key:0,onClick:G(ne=>U(B.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"visibility"})]),_:1}),e(z,null,{default:a(()=>[...D[12]||(D[12]=[b(" Lihat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),B.row.status=="draft"&&j.$can("admin.purchase-order.edit")?te((d(),I(oe,{key:1,onClick:G(ne=>T(B.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...D[13]||(D[13]=[b(" Edit ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),B.row.status=="draft"&&j.$can("admin.purchase-order.cancel")?te((d(),I(oe,{key:2,onClick:G(ne=>P(B.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"cancel"})]),_:1}),e(z,null,{default:a(()=>[...D[14]||(D[14]=[b(" Batalkan ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),e(Te),j.$can("admin.purchase-order.delete")?te((d(),I(oe,{key:3,onClick:G(ne=>q(B.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...D[15]||(D[15]=[b(" Hapus ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",B_,[e(Xe,{modelValue:V.start_date,"onUpdate:modelValue":[D[2]||(D[2]=B=>V.start_date=B),w],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Xe,{modelValue:V.end_date,"onUpdate:modelValue":[D[3]||(D[3]=B=>V.end_date=B),w],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:V.status,"onUpdate:modelValue":[D[4]||(D[4]=B=>V.status=B),w],options:m,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:V.payment_status,"onUpdate:modelValue":[D[5]||(D[5]=B=>V.payment_status=B),w],options:g,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:V.search,"onUpdate:modelValue":D[7]||(D[7]=B=>V.search=B),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},X_=Object.freeze(Object.defineProperty({__proto__:null,default:G_},Symbol.toStringTag,{value:"Module"})),Z_={class:"q-pa-xs"},ey={class:"row items-center full-width"},ty={class:"col text-left text-bold text-grey-9"},ay={key:1,class:"q-pa-md"},ly={class:"text-h6 text-primary q-mb-md"},Ol="Laporan",oy={__name:"Index",setup(p){we();const s=R("sales"),u=Z(()=>!0),o={sales:{label:"Penjualan",icon:"o_payments",reports:[{title:"Keuntungan Penjualan",subtitle:"Daftar penjualan berikut laba kotor",icon:"analytics",route:"admin.report.sales-order.gross-profit"}]},purchasing:{label:"Pembelian",icon:"o_shopping_cart",reports:[{title:"Rincian Pembelian",subtitle:"Daftar rincian pembelian",icon:"o_receipt_long",route:"admin.report.purchase-order.detail"}]},inventory:{label:"Inventori",icon:"inventory",reports:[{title:"Produk",subtitle:"Daftar produk",icon:"inventory",route:"admin.report.product.index"}]},customer:{label:"Pelanggan",icon:"o_groups",reports:[{title:"Daftar Pelanggan",subtitle:"Laporan daftar pelanggan",icon:"o_groups",route:"admin.report.customer.index"}]},supplier:{label:"Supplier",icon:"o_groups",reports:[{title:"Daftar Supplier",subtitle:"Laporan daftar supplier",icon:"o_groups",route:"admin.report.supplier.index"}]}},i=[{id:"sales",...o.sales},{id:"purchasing",...o.purchasing},{id:"inventory",...o.inventory},{id:"customer",...o.customer},{id:"supplier",...o.supplier}];return(n,f)=>{const v=J("i-head"),c=J("authenticated-layout");return d(),h(W,null,[e(v,{title:Ol}),e(c,null,{title:a(()=>[b(r(Ol))]),default:a(()=>[t("div",Z_,[e(ie,{flat:"",bordered:"",class:"report-container full-width"},{default:a(()=>[e(Ct,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=m=>s.value=m),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary","inline-label":"","mobile-arrows":"",align:"justify","switch-indicator":"",breakpoint:0},{default:a(()=>[(d(),h(W,null,Ie(i,m=>e(it,{key:m.id,name:m.id},{default:a(()=>[t("div",ey,[u.value?k("",!0):(d(),I(S,{key:0,name:m.icon,class:"q-mr-md"},null,8,["name"])),t("div",ty,r(m.label),1),m.count?(d(),I(rt,{key:1,color:"grey-5","text-color":"dark",rounded:"",label:m.count,class:"q-ml-sm"},null,8,["label"])):k("",!0)])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"]),e(Tt,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=m=>s.value=m),animated:"",class:"q-pa-none"},{default:a(()=>[(d(),h(W,null,Ie(i,m=>e(dt,{key:m.id,name:m.id,class:"q-pa-none"},{default:a(()=>[e(je,{separator:""},{default:a(()=>[m.reports&&m.reports.length>0?(d(!0),h(W,{key:0},Ie(m.reports,(g,_)=>te((d(),I(oe,{key:_,clickable:"",class:"q-py-md",onClick:G(y=>l(Y).get(n.route(g.route)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:g.icon,size:"28px",color:"grey"},null,8,["name"])]),_:2},1024),e(z,null,{default:a(()=>[e(ge,{class:"text-weight-bold text-dark"},{default:a(()=>[b(r(g.title),1)]),_:2},1024),e(ge,{caption:""},{default:a(()=>[b(r(g.subtitle),1)]),_:2},1024)]),_:2},1024),e(z,{side:""},{default:a(()=>[e(S,{name:"chevron_right",color:"grey"})]),_:1})]),_:2},1032,["onClick"])),[[se]])),128)):(d(),h("div",ay,[t("div",ly," Laporan "+r(m.label),1),f[2]||(f[2]=t("p",null," Saat ini tidak ada daftar laporan spesifik yang ditampilkan di kategori ini. ",-1))]))]),_:2},1024)]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})])]),_:1})],64)}}},ny=bt(oy,[["__scopeId","data-v-7d36fc05"]]),sy=Object.freeze(Object.defineProperty({__proto__:null,default:ny},Symbol.toStringTag,{value:"Module"})),ry=It({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(p,{slots:s,emit:u}){let o=!1,i,n,f=null,v=null,c,m;function g(){i==null||i(),i=null,o=!1,f!==null&&(clearTimeout(f),f=null),v!==null&&(clearTimeout(v),v=null),n==null||n.removeEventListener("transitionend",c),c=null}function _(C,E,F){E!==void 0&&(C.style.height=`${E}px`),C.style.transition=`height ${p.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,i=F}function y(C,E){C.style.overflowY=null,C.style.height=null,C.style.transition=null,g(),E!==m&&u(E)}function $(C,E){let F=0;n=C,o===!0?(g(),F=C.offsetHeight===C.scrollHeight?0:void 0):(m="hide",C.style.overflowY="hidden"),_(C,F,E),f=setTimeout(()=>{f=null,C.style.height=`${C.scrollHeight}px`,c=T=>{v=null,(Object(T)!==T||T.target===C)&&y(C,"show")},C.addEventListener("transitionend",c),v=setTimeout(c,p.duration*1.1)},100)}function V(C,E){let F;n=C,o===!0?g():(m="show",C.style.overflowY="hidden",F=C.scrollHeight),_(C,F,E),f=setTimeout(()=>{f=null,C.style.height=0,c=T=>{v=null,(Object(T)!==T||T.target===C)&&y(C,"hide")},C.addEventListener("transitionend",c),v=setTimeout(c,p.duration*1.1)},100)}return Xt(()=>{o===!0&&g()}),()=>qe(no,{css:!1,appear:p.appear,onEnter:$,onLeave:V},s.default)}}),Nt=ys({}),iy=Object.keys(go),kt=It({name:"QExpansionItem",props:{...go,...ws,...Ia,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ks,"click","afterShow","afterHide"],setup(p,{slots:s,emit:u}){const{proxy:{$q:o}}=Ot(),i=Ua(p,o),n=R(p.modelValue!==null?p.modelValue:p.defaultOpened),f=R(null),v=hs(),{show:c,hide:m,toggle:g}=$s({showing:n});let _,y;const $=Z(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${p.popup===!0?"popup":"standard"}`),V=Z(()=>p.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:p.contentInsetLevel*56+"px"}),C=Z(()=>p.disable!==!0&&(p.href!==void 0||p.to!==void 0&&p.to!==null&&p.to!=="")),E=Z(()=>{const ue={};return iy.forEach(Oe=>{ue[Oe]=p[Oe]}),ue}),F=Z(()=>C.value===!0||p.expandIconToggle!==!0),T=Z(()=>p.expandedIcon!==void 0&&n.value===!0?p.expandedIcon:p.expandIcon||o.iconSet.expansionItem[p.denseToggle===!0?"denseIcon":"icon"]),U=Z(()=>p.disable!==!0&&(C.value===!0||p.expandIconToggle===!0)),P=Z(()=>({expanded:n.value===!0,detailsId:v.value,toggle:g,show:c,hide:m})),q=Z(()=>{const ue=p.toggleAriaLabel!==void 0?p.toggleAriaLabel:o.lang.label[n.value===!0?"collapse":"expand"](p.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":v.value,"aria-label":ue}});Ye(()=>p.group,ue=>{y==null||y(),ue!==void 0&&O()});function M(ue){C.value!==!0&&g(ue),u("click",ue)}function w(ue){ue.keyCode===13&&x(ue,!0)}function x(ue,Oe){var _e;Oe!==!0&&ue.qAvoidFocus!==!0&&((_e=f.value)==null||_e.focus()),g(ue),Bt(ue)}function j(){u("afterShow")}function D(){u("afterHide")}function O(){_===void 0&&(_=xs()),n.value===!0&&(Nt[p.group]=_);const ue=Ye(n,_e=>{_e===!0?Nt[p.group]=_:Nt[p.group]===_&&delete Nt[p.group]}),Oe=Ye(()=>Nt[p.group],(_e,ee)=>{ee===_&&_e!==void 0&&_e!==_&&m()});y=()=>{ue(),Oe(),Nt[p.group]===_&&delete Nt[p.group],y=void 0}}function A(){const ue={class:[`q-focusable relative-position cursor-pointer${p.denseToggle===!0&&p.switchToggleSide===!0?" items-end":""}`,p.expandIconClass],side:p.switchToggleSide!==!0,avatar:p.switchToggleSide},Oe=[qe(S,{class:"q-expansion-item__toggle-icon"+(p.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:T.value})];return U.value===!0&&(Object.assign(ue,{tabindex:0,...q.value,onClick:x,onKeyup:w}),Oe.unshift(qe("div",{ref:f,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),qe(z,ue,()=>Oe)}function B(){let ue;return s.header!==void 0?ue=[].concat(s.header(P.value)):(ue=[qe(z,()=>[qe(ge,{lines:p.labelLines},()=>p.label||""),p.caption?qe(ge,{lines:p.captionLines,caption:!0},()=>p.caption):null])],p.icon&&ue[p.switchToggleSide===!0?"push":"unshift"](qe(z,{side:p.switchToggleSide===!0,avatar:p.switchToggleSide!==!0},()=>qe(S,{name:p.icon})))),p.disable!==!0&&p.hideExpandIcon!==!0&&ue[p.switchToggleSide===!0?"unshift":"push"](A()),ue}function ne(){const ue={ref:"item",style:p.headerStyle,class:p.headerClass,dark:i.value,disable:p.disable,dense:p.dense,insetLevel:p.headerInsetLevel};return F.value===!0&&(ue.clickable=!0,ue.onClick=M,Object.assign(ue,C.value===!0?E.value:q.value)),qe(oe,ue,B)}function fe(){return te(qe("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:V.value,id:v.value},At(s.default)),[[io,n.value]])}function ve(){const ue=[ne(),qe(ry,{duration:p.duration,onShow:j,onHide:D},fe)];return p.expandSeparator===!0&&ue.push(qe(Te,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),qe(Te,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),ue}return p.group!==void 0&&O(),Xt(()=>{y==null||y()}),()=>qe("div",{class:$.value},[qe("div",{class:"q-expansion-item__container relative-position"},ve())])}}),dy={class:"col col-md-8"},uy={class:"q-col-gutter-sm row"},my={class:"col-xs-12 col-md-7"},cy={class:"full-width bg-grey-2 text-subtitle2 text-bold text-grey-8 row items-center"},py={class:"text-subtitle2 text-bold text-grey-8 row items-center"},fy={class:"text-subtitle2 text-bold text-grey-8 row items-center"},gy={class:"text-subtitle2 text-bold text-grey-8 row items-center"},by={key:0,class:"row q-mt-md"},vy={class:"text-subtitle2 text-bold text-grey-8 row items-center"},_y={class:"col-xs-12 col-md-5"},yy={class:"q-my-sm"},ky={class:"q-my-sm"},wy={class:"q-my-sm"},hy={__name:"ReportGeneratorLayout",props:{templates:{type:Array,required:!1,default:()=>[]},primaryColumns:{type:Array,required:!0},optionalColumns:{type:Array,default:()=>[]},initialColumns:{type:Array,required:!0},initialFilter:{type:Object,default:()=>({})},initialSortOptions:{type:Array,default:()=>[]}},emits:["submit"],setup(p,{expose:s,emit:u}){const o=we(),i=p,n=[{value:null,label:"Disesuaikan"},...i.templates],f=Z(()=>[...i.primaryColumns,...i.optionalColumns]),v=Z(()=>i.primaryColumns.map(T=>T.value)),c=[{value:"auto",label:"Otomatis"},{value:"portrait",label:"Potret"},{value:"landscape",label:"Lansekap"}],m=()=>({template:null,columns:i.initialColumns,filter:JSON.parse(JSON.stringify(i.initialFilter)),sortOptions:JSON.parse(JSON.stringify(i.initialSortOptions)),orientation:"auto"}),g=R(m()),_=()=>{g.value=m(),o.notify({message:"Opsi laporan direset ke nilai awal.",timeout:1500})},y=({index:T,value:U})=>{if(v.value.includes(U)){const w=i.primaryColumns.find(x=>x.value===U);return o.notify({type:"negative",message:`Kolom (${w.label}) tidak boleh dihapus.`,timeout:2e3}),!1}const P=g.value.sortOptions.length;g.value.sortOptions=g.value.sortOptions.filter(w=>w.column!==U);const q=g.value.sortOptions.length;return P-q>0&&g.value.sortOptions.length===0&&C(),!0},$=T=>{if(g.value.columns.length===0){o.notify({type:"negative",message:"Kolom belum dipilih.",timeout:2e3});return}V("submit",{format:T,form:g.value})},V=u,C=()=>{const U=g.value.sortOptions.length,P=g.value.columns.length;if(U>=3){o.notify({type:"warning",message:"Maksimal hanya 3 opsi pengurutan yang diperbolehkan.",timeout:2e3});return}if(U>=P){o.notify({type:"warning",message:`Jumlah opsi pengurutan tidak boleh melebihi jumlah kolom yang dipilih (${P}).`,timeout:2500});return}const q=g.value.sortOptions.map(w=>w.column),M=f.value.find(w=>!q.includes(w.value));M?g.value.sortOptions.push({column:M.value,order:"asc"}):o.notify({type:"warning",message:"Tidak ada kolom unik yang tersedia untuk pengurutan.",timeout:2500})},E=T=>{g.value.sortOptions.splice(T,1)},F=Z(()=>T=>{const U=g.value.sortOptions.slice(0,T).map(P=>P.column);return U.push(...g.value.sortOptions.slice(T+1).map(P=>P.column)),f.value.filter(P=>{var M;const q=(M=g.value.sortOptions[T])==null?void 0:M.column;return P.value===q||!U.includes(P.value)})});return Ye(()=>g.value.template,(T,U)=>{if(T!==U&&T!==null){const P=i.templates.find(q=>q.value===T);g.value.columns=P.columns}else T===null&&(g.value.columns=i.initialColumns)}),Ye(()=>g.value.columns,(T,U)=>{U!=T&&g.value.template!=null}),s({form:g,submit:$,reset:_,columnOptions:f}),(T,U)=>(d(),I(Ce,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",dy,[t("div",uy,[t("div",my,[e(kt,{"default-opened":"",class:"full-width q-mb-sm bg-grey-2"},{header:a(()=>[t("div",cy,[e(S,{name:"analytics",size:"xs",class:"q-mr-sm"}),U[7]||(U[7]=b(" Jenis Laporan ",-1))])]),default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(ce,{label:"Pilih Laporan",modelValue:g.value.template,"onUpdate:modelValue":U[0]||(U[0]=P=>g.value.template=P),options:n,"map-options":"","emit-value":"","hide-bottom-space":""},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),e(kt,{"default-opened":"",class:"full-width q-mb-sm bg-grey-2"},{header:a(()=>[t("div",py,[e(S,{name:"data_table",size:"xs",class:"q-mr-sm"}),U[8]||(U[8]=b(" Kolom ",-1))])]),default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(ce,{label:"Pilih Kolom",modelValue:g.value.columns,"onUpdate:modelValue":U[1]||(U[1]=P=>g.value.columns=P),options:f.value,"map-options":"","emit-value":"",multiple:"",clearable:"","use-chips":"",onRemove:y,onClear:U[2]||(U[2]=P=>g.value.columns=p.initialColumns.slice()),rules:[P=>P&&P.length>0||"Pilih minimal satu kolom"],"hide-bottom-space":""},{"selected-item":a(P=>[e(Jt,{removable:!v.value.includes(P.opt.value),onRemove:q=>y(P.opt)&&P.removeAtIndex(P.index),dense:""},{default:a(()=>[b(r(P.opt.label),1)]),_:2},1032,["removable","onRemove"])]),_:1},8,["modelValue","options","rules"])])]),_:1})]),_:1})]),_:1}),e(kt,{class:"full-width q-mb-sm bg-grey-2"},{header:a(()=>[t("div",fy,[e(S,{name:"filter_alt",size:"xs",class:"q-mr-sm"}),U[9]||(U[9]=b(" Filter ",-1))])]),default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[qt(T.$slots,"filter",{form:g.value},void 0,!0)]),_:3})]),_:3})]),_:3}),e(kt,{class:"full-width q-mb-sm bg-grey-2"},{header:a(()=>[t("div",gy,[e(S,{name:"sort",size:"xs",class:"q-mr-sm"}),U[10]||(U[10]=b(" Urutkan ",-1))])]),default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[(d(!0),h(W,null,Ie(g.value.sortOptions,(P,q)=>(d(),h("div",{key:q,class:"row q-col-gutter-sm q-mb-sm items-center"},[e(ce,{modelValue:P.column,"onUpdate:modelValue":M=>P.column=M,class:"col-grow",style:{"min-width":"150px"},options:F.value(q),"map-options":"",dense:"","emit-value":"",label:q+1+" - Urut berdasarkan"},null,8,["modelValue","onUpdate:modelValue","options","label"]),e(N,{icon:P.order==="asc"?"arrow_upward":"arrow_downward",color:"grey-8",flat:"",round:"",dense:"",onClick:M=>P.order=P.order==="asc"?"desc":"asc",class:"q-ml-sm",size:"sm"},{default:a(()=>[e(Rt,null,{default:a(()=>[b(" Urutkan: "+r(P.order==="asc"?"Terkecil ke Terbesar":"Terbesar ke Terkecil"),1)]),_:2},1024)]),_:2},1032,["icon","onClick"]),g.value.sortOptions.length>1?(d(),I(N,{key:0,icon:"delete",color:"red",flat:"",round:"",dense:"",onClick:M=>E(q),class:"q-ml-xs",size:"sm"},{default:a(()=>[e(Rt,null,{default:a(()=>[...U[11]||(U[11]=[b("Hapus Opsi Urutan",-1)])]),_:1})]),_:1},8,["onClick"])):k("",!0)]))),128)),g.value.sortOptions.length<3&&g.value.sortOptions.length<g.value.columns.length?(d(),h("div",by,[e(N,{label:"Tambah Opsi Pengurutan",icon:"add",color:"blue-grey",flat:"",dense:"",size:"sm",onClick:C})])):k("",!0)]),_:1})]),_:1})]),_:1}),e(kt,{class:"full-width bg-grey-2"},{header:a(()=>[t("div",vy,[e(S,{name:"rotate_right",size:"xs",class:"q-mr-sm"}),U[12]||(U[12]=b(" Halaman ",-1))])]),default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(ce,{label:"Orientasi",modelValue:g.value.orientation,"onUpdate:modelValue":U[3]||(U[3]=P=>g.value.orientation=P),options:c,"map-options":"","emit-value":""},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),t("div",_y,[e(ie,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(ae,{class:"q-py-sm q-px-md"},{default:a(()=>[t("div",yy,[e(N,{label:"Cetak",class:"full-width",color:"primary",icon:"print",onClick:U[4]||(U[4]=P=>$("html"))})]),t("div",ky,[e(N,{label:"Unduh PDF",class:"full-width",color:"red",icon:"picture_as_pdf",onClick:U[5]||(U[5]=P=>$("pdf"))})]),t("div",wy,[e(N,{label:"Reset",class:"full-width",color:"grey",icon:"refresh",onClick:U[6]||(U[6]=P=>_())})])]),_:1})]),_:1})])])])]),_:3}))}},wa=bt(hy,[["__scopeId","data-v-43c95d20"]]),$y=Object.freeze(Object.defineProperty({__proto__:null,default:wa},Symbol.toStringTag,{value:"Module"})),Na={__name:"BackButton",props:{route:{type:String,default:"",required:!0}},setup(p){const s=p;return(u,o)=>(d(),I(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=i=>u.$inertia.get(s.route))}))}},xy={class:"q-gutter-sm"},Dl="Laporan Pelanggan",Sy={__name:"Index",setup(p){const s=we(),u=pe(),o=Ne(u.props.primary_columns),i=Ne(u.props.optional_columns),n=u.props.initial_columns,f=u.props.templates,v=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],c=[{value:"all",label:"Semua"},{value:"general",label:"Umum"},{value:"staff",label:"Staff"},{value:"category_1",label:"Kategori 1"},{value:"category_2",label:"Kategori 2"},{value:"category_3",label:"Kategori 3"}],m=[{value:"all",label:"Semua"},{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],g={status:"active",type:"all",default_price_type:"all"},_=[{column:"code",order:"asc"}],y=R(null),$=({format:V,form:C})=>{const E={...C,format:V};try{const F=route("admin.report.customer.generate",E);window.open(F,"_blank"),V!=="html"&&s.notify({type:"positive",message:`Laporan ${V.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(F){s.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",F)}};return(V,C)=>{const E=J("i-head"),F=J("authenticated-layout");return d(),h(W,null,[e(E,{title:Dl}),e(F,null,{title:a(()=>[b(r(Dl))]),"left-button":a(()=>[t("div",xy,[e(Na,{route:V.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>[...C[0]||(C[0]=[])]),default:a(()=>[e(wa,{ref_key:"reportGeneratorRef",ref:y,primaryColumns:l(o),optionalColumns:l(i),initialColumns:l(n),initialFilter:g,initialSortOptions:_,templates:l(f),onSubmit:$},{filter:a(({form:T})=>[e(ce,{label:"Status",modelValue:T.filter.status,"onUpdate:modelValue":U=>T.filter.status=U,options:v,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ce,{label:"Level Harga",modelValue:T.filter.default_price_type,"onUpdate:modelValue":U=>T.filter.default_price_type=U,options:m,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ce,{label:"Jenis Akun",modelValue:T.filter.type,"onUpdate:modelValue":U=>T.filter.type=U,options:c,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["primaryColumns","optionalColumns","initialColumns","templates"])]),_:1})],64)}}},Vy=Object.freeze(Object.defineProperty({__proto__:null,default:Sy},Symbol.toStringTag,{value:"Module"})),qy={class:"q-gutter-sm"},Il="Laporan Produk",Cy={__name:"Index",setup(p){const s=we(),u=pe(),o=Ne(u.props.primary_columns),i=Ne(u.props.optional_columns),n=u.props.initial_columns,f=u.props.templates,{filteredCategories:v,filterCategories:c}=ba(u.props.categories),{filteredSuppliers:m,filterSupplierFn:g}=va(u.props.suppliers),_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],y=Ne(window.CONSTANTS.PRODUCT_TYPES),$={status:"active",types:[],categories:[],suppliers:[]},V=[{column:"name",order:"asc"}],C=R(null),E=({format:F,form:T})=>{const U={...T,format:F};try{const P=route("admin.report.product.generate",U);window.open(P,"_blank"),F!=="html"&&s.notify({type:"positive",message:`Laporan ${F.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(P){s.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",P)}};return(F,T)=>{const U=J("i-head"),P=J("authenticated-layout");return d(),h(W,null,[e(U,{title:Il}),e(P,null,{title:a(()=>[b(r(Il))]),"left-button":a(()=>[t("div",qy,[e(Na,{route:F.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>[...T[0]||(T[0]=[])]),default:a(()=>[e(wa,{ref_key:"reportGeneratorRef",ref:C,primaryColumns:l(o),optionalColumns:l(i),initialColumns:l(n),initialFilter:$,initialSortOptions:V,templates:l(f),onSubmit:E},{filter:a(({form:q})=>[e(ce,{label:"Status",modelValue:q.filter.status,"onUpdate:modelValue":M=>q.filter.status=M,options:_,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ce,{label:"Jenis",modelValue:q.filter.types,"onUpdate:modelValue":M=>q.filter.types=M,options:l(y),"map-options":"","emit-value":"",multiple:"","use-chips":"",clearable:""},null,8,["modelValue","onUpdate:modelValue","options"]),e(ce,{label:"Kategori",modelValue:q.filter.categories,"onUpdate:modelValue":M=>q.filter.categories=M,options:l(v),onFilter:l(c),"map-options":"","emit-value":"","use-input":"",clearable:"",multiple:"","use-chips":""},null,8,["modelValue","onUpdate:modelValue","options","onFilter"]),e(ce,{label:"Supplier",modelValue:q.filter.suppliers,"onUpdate:modelValue":M=>q.filter.suppliers=M,options:l(m),onFilter:l(g),"map-options":"","emit-value":"","use-input":"",clearable:"",multiple:"","use-chips":""},null,8,["modelValue","onUpdate:modelValue","options","onFilter"])]),_:1},8,["primaryColumns","optionalColumns","initialColumns","templates"])]),_:1})],64)}}},Ty=Object.freeze(Object.defineProperty({__proto__:null,default:Cy},Symbol.toStringTag,{value:"Module"})),Py={class:"q-gutter-sm"},Ul="Laporan Supplier",Ry={__name:"Index",setup(p){const s=we(),u=pe(),o=Ne(u.props.primary_columns),i=Ne(u.props.optional_columns),n=u.props.initial_columns,f=u.props.templates,v=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],c={status:"active"},m=[{column:"code",order:"asc"}],g=R(null),_=({format:y,form:$})=>{const V={...$,format:y};try{const C=route("admin.report.supplier.generate",V);window.open(C,"_blank"),y!=="html"&&s.notify({type:"positive",message:`Laporan ${y.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(C){s.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",C)}};return(y,$)=>{const V=J("i-head"),C=J("authenticated-layout");return d(),h(W,null,[e(V,{title:Ul}),e(C,null,{title:a(()=>[b(r(Ul))]),"left-button":a(()=>[t("div",Py,[e(Na,{route:y.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>[...$[0]||($[0]=[])]),default:a(()=>[e(wa,{ref_key:"reportGeneratorRef",ref:g,primaryColumns:l(o),optionalColumns:l(i),initialColumns:l(n),initialFilter:c,initialSortOptions:m,templates:l(f),onSubmit:_},{filter:a(({form:E})=>[e(ce,{label:"Status",modelValue:E.filter.status,"onUpdate:modelValue":F=>E.filter.status=F,options:v,"map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["primaryColumns","optionalColumns","initialColumns","templates"])]),_:1})],64)}}},Oy=Object.freeze(Object.defineProperty({__proto__:null,default:Ry},Symbol.toStringTag,{value:"Module"})),Dy={class:"q-gutter-sm"},Iy={class:"col col-md-6 q-pa-xs"},jl="Tambah Retur Penjualan",Uy={__name:"Create",setup(p){const s=pe(),u=Qe({code:s.props.data.code}),o=()=>st({form:u,url:route("admin.sales-order-return.add")});return(i,n)=>{const f=J("i-head"),v=J("authenticated-layout");return d(),h(W,null,[e(f,{title:jl}),e(v,null,{title:a(()=>[b(r(jl))]),"left-button":a(()=>[t("div",Dy,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=c=>i.$inertia.get(i.route("admin.sales-order-return.index")))})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Iy,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[e(re,{autofocus:"",modelValue:l(u).code,"onUpdate:modelValue":n[1]||(n[1]=c=>l(u).code=c),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(u).errors.code,disable:l(u).processing,"error-message":l(u).errors.code,rules:[c=>c&&c.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(u).processing},null,8,["disable"]),e(N,{icon:"cancel",label:"Batal",disable:l(u).processing,onClick:n[2]||(n[2]=c=>l(Y).get(i.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},jy=Object.freeze(Object.defineProperty({__proto__:null,default:Uy},Symbol.toStringTag,{value:"Module"})),Ey={class:"column"},Ay={class:"bg-grey-2 q-pa-xs"},My={class:"text-subtitle1 text-bold text-grey-10"},Ny={class:"text-caption text-grey-8"},By={class:"col-12 col-sm-6"},zy={class:"full-width"},Fy={key:1},Ly={key:0},Hy={key:1},Ky={class:"col-12 col-sm-6",align:"left"},Yy={class:"full-width"},Wy={class:"full-width",style:{"border-collapse":"collapse"}},Qy={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Jy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Gy={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Xy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Zy={key:0},ek={class:"col-12 col-sm-6"},tk={class:"text-body2 text-grey-7 text-italic"},ak={class:"col-12 col-sm-6"},lk={class:"row justify-end q-gutter-y-xs"},ok={class:"col-12 row justify-between"},nk={class:"text-subtitle2 text-bold"},sk={class:"row justify-end q-gutter-y-xs"},rk={class:"col-12 row justify-between"},ik={class:"text-subtitle2 text-bold"},dk={class:"row justify-end q-gutter-y-xs"},uk={class:"col-12 row justify-between"},mk={class:"text-subtitle2 text-bold"},Zo={__name:"MainInfoTab",props:{data:Object},setup(p){const s=p;return(u,o)=>{const i=J("i-link"),n=J("my-link");return d(),h("div",Ey,[e(ae,{class:"q-pa-none"},{default:a(()=>{var f,v;return[t("div",Ay,[t("div",My," RETUR #"+r(s.data.code),1),t("div",Ny,[b(" Kasir: "+r((f=s.data.cashier)==null?void 0:f.username)+" - "+r((v=s.data.cashier)==null?void 0:v.name)+" | "+r(l(be)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),h(W,{key:0},[b(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]}),_:1}),e(Te),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",By,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",zy,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),I(i,{key:0,href:u.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[e(S,{class:"inline-icon",name:"person"}),b(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(d(),h("div",Fy,[e(S,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pelanggan Umum ",-1))]))])]),s.data.customer_phone?(d(),h("tr",Ly,[t("td",null,[e(S,{class:"inline-icon",name:"phone"}),b(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(d(),h("tr",Hy,[t("td",null,[e(S,{class:"inline-icon",name:"home_pin"}),b(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",Ky,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Yy,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:u.route("admin.sales-order.detail",{id:s.data.sales_order_id})},{default:a(()=>[b(r(s.data.sales_order_id?s.data.sales_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(be)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("table",Wy,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),h(W,null,Ie(s.data.details,f=>(d(),h("tr",{key:f.id},[t("td",Qy,[e(i,{href:u.route("admin.product.detail",f.product_id)},{default:a(()=>[b(r(f.product_name),1)]),_:2},1032,["href"])]),t("td",Jy,r(l(L)(f.price)),1),t("td",Gy,r(f.quantity),1),t("td",Xy,r(l(L)(f.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),h("tr",Zy,[...o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)])])]),_:1}),e(Te),e(ae,{class:"row",align:"left"},{default:a(()=>[t("div",ek,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",tk,r(s.data.notes?s.data.notes:"-"),1)]),t("div",ak,[t("div",lk,[t("div",ok,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",nk,r(l(L)(s.data.grand_total)),1)])]),t("div",sk,[t("div",rk,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",ik,r(l(L)(parseFloat(-s.data.total_refunded))),1)])]),t("div",dk,[t("div",uk,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",mk,r(l(L)(s.data.remaining_refund)),1)])])])]),_:1})])}}},ck=Object.freeze(Object.defineProperty({__proto__:null,default:Zo},Symbol.toStringTag,{value:"Module"})),pk={key:0,class:"text-center q-mb-md text-grey-8"},fk={class:"text-subtitle2 text-weight-medium"},gk={class:"text-h5 text-center text-primary q-pb-md"},bk={class:"text-center q-mt-md"},vk={key:0,class:"text-h6 text-negative text-weight-bold"},_k={key:1,class:"text-h6 text-positive text-weight-bold"},en={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=pe(),n=R(!1),f=R({method:"cash",amount:u.total,notes:null}),v=i.props.data.customer,c=Z(()=>[...v?[{label:"Refund ke Wallet",value:"wallet"}]:[],{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(V=>({label:V.name,value:V.id}))]),m=Z(()=>u.total-(f.value.amount||0)),g=Z(()=>{const V=f.value.amount||0;return V<=0?"Jumlah pembayaran harus lebih dari 0.":V>u.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=Z(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const V={id:f.value.method,amount:f.value.amount,notes:f.value.notes};o("accepted",V),n.value=!1},$=()=>{f.value.amount=u.total,f.value.method="cash",f.value.notes=null};return(V,C)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":C[4]||(C[4]=E=>V.$emit("update:modelValue",E)),onBeforeShow:$},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>[...C[5]||(C[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[l(v)?(d(),h("div",pk,[t("div",fk,[b(r(l(v).code)+" ",1),C[6]||(C[6]=t("br",null,null,-1)),b(" "+r(l(v).name)+" ",1),C[7]||(C[7]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(l(L)(l(v).wallet_balance)),1)])])):k("",!0),t("div",gk," Total: Rp. "+r(l(L)(p.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":C[0]||(C[0]=E=>f.value.method=E),options:c.value,label:f.value.method=="wallet"?"Tujuan":"Sumber Dana",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","label","disable"]),e(Me,{modelValue:f.value.amount,"onUpdate:modelValue":C[1]||(C[1]=E=>f.value.amount=E),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:f.value.notes,"onUpdate:modelValue":C[2]||(C[2]=E=>f.value.notes=E),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",bk,[m.value>0?(d(),h("div",vk," Sisa Refund: Rp. "+r(l(L)(m.value)),1)):(d(),h("div",_k," Refund Lunas "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(N,{flat:"",label:"Batal",color:"grey",onClick:C[3]||(C[3]=E=>V.$emit("update:modelValue",!1))}),e(N,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},yk=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),kk={class:"column"},wk={class:"row"},hk={class:"full-width",style:{"border-collapse":"collapse"}},$k={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},xk={class:"row items-center q-gutter-x-sm"},Sk={class:"text-weight-bold"},Vk={class:"row items-center q-gutter-x-sm q-mt-xs"},qk={class:"text-caption text-grey-6"},Ck={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},Tk={class:"text-caption text-grey-6"},Pk={class:"q-mt-xs"},Rk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Ok={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Dk={key:0},Ik={class:"text-right q-pa-sm"},tn={__name:"RefundTab",props:{data:Object},setup(p){const s=p,u=we(),o=R(!1),i=()=>{o.value=!0},n=Z(()=>s.data.remaining_refund),f=async c=>{const m={order_id:s.data.id,...c};u.loading.show({message:"Memproses pembayaran..."});try{const g=await De.post(route("admin.sales-order-return.add-refund"),m);u.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Y.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(g){let _="Gagal memproses refund.";g.response&&g.response.data&&g.response.data.message?_=g.response.data.message:g.message&&(_=g.message),u.notify({message:_,color:"negative",icon:"error"})}finally{u.loading.hide()}},v=c=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await De.post(route("admin.sales-order-return.delete-refund",{id:c.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Y.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(m){let g="Gagal menghapus refund pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(c,m)=>(d(),h(W,null,[t("div",kk,[e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("div",wk,[c.$can("admin.sales-order-return.add-refund")?(d(),I(N,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:m[0]||(m[0]=G(g=>i(),["stop"]))})):k("",!0)]),t("table",hk,[m[5]||(m[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),h(W,null,Ie(s.data.refunds,g=>(d(),h("tr",{key:g.id},[t("td",$k,[t("div",xk,[e(S,{name:"tag",size:"xs",color:"grey-7"}),t("span",Sk,r(g.code),1)]),t("div",Vk,[e(S,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",qk,r(l(be)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),h("div",Ck,[e(S,{name:"wallet",size:"xs",color:"grey-7"}),t("span",Tk,r(g.account.name),1)])):k("",!0),t("div",Pk,[e(rt,{label:c.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",Rk,r(l(L)(g.amount)),1),t("td",Ok,[c.$can("admin.sales-order-return.delete-refund")?(d(),I(N,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>v(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(d(),h("tr",Dk,[...m[2]||(m[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",null,[m[3]||(m[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund",-1)),t("th",Ik,r(l(L)(parseFloat(-s.data.total_refunded))),1),m[4]||(m[4]=t("th",null,null,-1))])])])]),_:1})]),e(en,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=g=>o.value=g),total:n.value,customer:s.data.customer,onAccepted:f},null,8,["modelValue","total","customer"])],64))}},Uk=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),jk={class:"q-gutter-sm"},Ek={class:"col col-lg-6 q-pa-xs",align:"center"},El="Retur Penjualan",Ak={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),u=pe(),o=u.props.data,i=R(s.get("preview")||!1),f=R(s.get("tab")||"main-info");he(()=>{gt(()=>{const c=s.get("print_size");c&&v(c)})});const v=c=>{window.open(route("admin.sales-order-return.print",{id:u.props.data.id,size:c}),"_self")};return(c,m)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),h(W,null,[e(g,{title:El}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(El))])]),"left-button":a(()=>[t("div",jk,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>l(Y).get(c.route("admin.sales-order-return.index")))})])]),"right-button":a(()=>[e(N,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>v("58mm"))}),e(N,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=y=>v("a4"))}),i.value?k("",!0):(d(),I(N,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=y=>l(Y).get(c.route("admin.sales-order.add")))}))]),default:a(()=>[e(Ce,{class:"row justify-center print-visible"},{default:a(()=>[t("div",Ek,[e(ie,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(Ct,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(it,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(d(),I(it,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Te),e(Tt,{modelValue:f.value,"onUpdate:modelValue":m[5]||(m[5]=y=>f.value=y),animated:""},{default:a(()=>[e(dt,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(Zo,{data:l(o)},null,8,["data"])]),_:1}),e(dt,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(tn,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},Mk=Object.freeze(Object.defineProperty({__proto__:null,default:Ak},Symbol.toStringTag,{value:"Module"})),Nk={class:"text-weight-medium"},Bk={class:"text-caption text-grey-6 elipsis"},zk={class:"column items-end"},Fk={class:"text-caption text-grey-6 text-italic"},an={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=we(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(Ee,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Le({height:l(u)})},{header:a(f=>[e(Pe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),h(W,null,Ie(f.cols,v=>(d(),I(Gt,{key:v.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Pe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left wrap-column"},{default:a(()=>[t("div",Nk,r(f.row.product_name),1),t("div",Bk,r(f.row.product_barcode),1),f.row.notes?(d(),I(xe,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal_price",props:f,class:"text-right"},{default:a(()=>[t("div",zk,[t("div",null,r(l(L)(f.row.subtotal_price)),1),t("div",Fk,r(l(L)(f.row.quantity))+" x Rp. "+r(l(L)(f.row.price)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(N,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(N,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Lk=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),Hk={class:"row items-center no-wrap"},Kk={class:"col-auto"},ln={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=Z(()=>o.item.quantity*o.item.price),v=g=>{g.stopPropagation(),g.preventDefault()},c=g=>{o.modelValue&&(g.key==="Enter"?(n(),i("update:modelValue",!1),v(g)):g.key==="Escape"&&(i("update:modelValue",!1),v(g)))};return he(()=>{window.addEventListener("keydown",c)}),ht(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item}),(g,_)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>g.$emit("update:modelValue",y))},{default:a(()=>[e(ie,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Hk,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Kk,[e(N,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>g.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(re,{modelValue:p.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=y=>p.item.product_name=y),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=y=>p.item.quantity=y),label:`Kwantitas (${p.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","label","disable"]),e(Me,{modelValue:p.item.price,"onUpdate:modelValue":_[3]||(_[3]=y=>p.item.price=y),label:"Harga","hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:f.value,"onUpdate:modelValue":_[4]||(_[4]=y=>f.value=y),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(re,{modelValue:p.item.notes,"onUpdate:modelValue":_[5]||(_[5]=y=>p.item.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(N,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[me]]),e(N,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Yk=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),Wk={key:0,class:"q-select__selected-item"},on={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(p,{expose:s,emit:u}){const o=R(null),i=p,n=u,f=R([]);let v=null;const c=R(i.modelValue);he(()=>{i.initialData&&(c.value=i.initialData)}),Ye(c,_=>{n("update:modelValue",_),n("customerSelected",_)}),Ye(()=>i.modelValue,_=>{c.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const g=(_,y)=>{if(_.length<i.minLength){y(()=>{f.value=[]});return}v&&clearTimeout(v),v=setTimeout(()=>{De.get(`/web-api/customers?q=${_}`).then($=>{y(()=>{f.value=$.data.data})}).catch($=>{console.error("Gagal mengambil data pelanggan:",$),y(()=>{f.value=[]})})},100)};return(_,y)=>(d(),I(ce,{class:Ve(p.class),ref_key:"qSelectRef",ref:o,modelValue:c.value,"onUpdate:modelValue":y[0]||(y[0]=$=>c.value=$),"use-input":"","input-debounce":"500",label:p.label,options:f.value,onFilter:g,clearable:"",error:p.error,behavior:"menu","error-message":p.errorMessage,disable:p.disable,"hide-bottom-space":"",outlined:p.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a($=>[e(oe,Aa(uo($.itemProps)),{default:a(()=>[e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[b(r($.opt.name)+" ("+r($.opt.code)+")",1)]),_:2},1024),$.opt.phone?(d(),I(ge,{key:0,class:"text-grey-8 q-ml-sm q-mt-xs"},{default:a(()=>[e(S,{name:"phone",class:"inline-icon"}),b(r($.opt.phone),1)]),_:2},1024)):k("",!0),$.opt.address?(d(),I(ge,{key:1,class:"text-grey-8 q-ml-sm"},{default:a(()=>[e(S,{name:"home_pin",class:"inline-icon"}),b(r($.opt.address),1)]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1040)]),"selected-item":a($=>[$.opt?(d(),h("div",Wk,r($.opt.name)+" ("+r($.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Qk={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(u,o)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>[...o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])]),_:1}),e(ae,null,{default:a(()=>[...o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])]),_:1}),e(tt,{align:"center"},{default:a(()=>[te(e(N,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},nn=bt(Qk,[["__scopeId","data-v-22783525"]]),Jk=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),Gk={class:"row items-center no-wrap"},Xk={class:"col text-subtite text-bold text-grey-8"},Zk={class:"col-auto"},sn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=m=>{m.stopPropagation(),m.preventDefault()},v=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(i("update:modelValue",!1),f(m)))};return he(()=>{window.addEventListener("keydown",v)}),ht(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(ie,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",Gk,[t("div",Xk," Edit "+r(p.data.code),1),t("div",Zk,[e(N,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(Xe,{modelValue:p.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(re,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(re,{modelValue:p.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(N,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[me]]),te(e(N,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ew=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"})),tw={class:"row items-center text-grey-8",style:{"line-height":"1em"}},aw={class:"row items-center q-pr-sm"},lw={key:0,class:"q-px-sm row items-center left-border"},ow={class:"q-pl-sm left-border"},nw={__name:"UserSessionInfo",setup(p){const s=pe();return(u,o)=>{var i,n;return d(),h("div",tw,[t("div",aw,[e(S,{name:"account_box",class:"q-mr-xs"}),b(" "+r(l(s).props.auth.user.username),1)]),l(s).props.data.cashier_session?(d(),h("div",lw,[e(S,{name:"point_of_sale",class:"q-mr-sm"}),b(" "+r((n=(i=l(s).props.data.cashier_session)==null?void 0:i.cashier_terminal)==null?void 0:n.name),1)])):k("",!0),t("div",ow,[e(ga)])])}}},rn=bt(nw,[["__scopeId","data-v-bfe220aa"]]),sw={class:"q-gutter-sm"},rw={class:"row q-col-gutter-none full-width"},iw={class:"col-sm-6 col-12 col q-pa-sm"},dw={class:"row full-width"},uw={class:"col-sm-6 col-12"},mw={class:"row q-ml-sm items-end"},cw={class:"row col grow"},pw={class:"col-12 q-px-sm column"},fw={class:"row items-start q-col-gutter-none q-px-sm"},gw={key:0,class:"col"},bw={class:"text-caption text-grey-6 q-mt-xs"},vw={key:0,class:"text-caption text-grey-8 q-mt-xs"},_w={class:"text-italic"},yw={key:1,class:"col"},kw={class:"text-grey-8"},ww={class:"col"},hw={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},$w={class:"text-h4 text-weight-bold"},xw={class:"row q-col-gutter-xs q-py-xs q-px-sm"},Sw={class:"col"},Vw={__name:"Editor",setup(p){const s=we(),u=pe(),o=R(!0),i=R(null),n=R(null),f=R(null),v=R(!1),c=R(null),m=R(null),{isFullscreen:g,toggleFullscreen:_}=Ma(m),y="Retur #"+u.props.data.code,$=R(u.props.data.customer),V=R(""),C=R(!1),E=R(!1),F=R(!1),T=R(!1),U=R(null),P=Ue({id:u.props.data.id,code:u.props.data.code,customer_id:u.props.data.customer_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),q=Z(()=>P.items.reduce((ee,H)=>ee+H.price*H.quantity,0)),M=()=>{var ee;_(),g.value||(ee=c==null?void 0:c.value)==null||ee.hideDrawer()},w=ee=>isNaN(ee)||ee<=0?(vt("Kuantitas tidak valid.","top"),!1):!0,x=ee=>isNaN(ee)||ee<0?(vt("Harga tidak valid.","top"),!1):!0,j=ee=>!ee||ee.length==0?(vt("Barcode tidak valid.","top"),!1):!0,D=ee=>{var H;(H=V.value)!=null&&H.endsWith("*")?V.value+=ee.name:V.value=ee.name},O=async()=>{if(C.value)return;const ee=V.value.trim();if(ee.length===0){E.value=!0;return}const H=ee.split("*");let X=1,le="",K=null;if(H.length===1)le=H[0];else if(H.length<=3)X=parseInt(H[0]),le=H[1],H.length===3&&(K=parseFloat(H[2]));else{vt("Input tidak valid.","top");return}if(le.length===0){E.value=!0;return}!j(le)&&!w(X)&&!x(K)||(C.value=!0,await De.post(route("admin.sales-order-return.add-item"),{order_id:P.id,product_code:le,qty:X,price:K,merge:o.value}).then(de=>{const $e=de.data.data.item;let ke=-1;de.data.data.mergeItem&&(ke=P.items.findIndex(nt=>nt.id===$e.id)),ke===-1?P.items.push($e):P.items[ke]=$e,V.value="",K!==null&&K!==parseFloat($e.price)&&vt("Harga tidak dapat diubah!","top")}).catch(de=>{var $e,ke;pt((ke=($e=de.response)==null?void 0:$e.data)==null?void 0:ke.message,"top"),console.error("Gagal mengambil data produk:",de)}),C.value=!1,gt(()=>{var de;(de=i.value)==null||de.focus()}))},A=ee=>{U.value=Object.create(ee),F.value=!0},B=ee=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ee.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{C.value=!0,De.post(route("admin.sales-order-return.remove-item"),{id:ee.id}).then(()=>{const H=P.items.findIndex(X=>X.id===ee.id);H!==-1&&(P.items.splice(H,1)[0],ft("Item telah dihapus","top"))}).catch(H=>{var X,le;pt(((le=(X=H==null?void 0:H.response)==null?void 0:X.data)==null?void 0:le.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(H)}).finally(()=>{C.value=!1})})},ne=()=>{C.value=!0;const ee=n.value.getCurrentItem(),H={id:ee.id,qty:ee.quantity,price:ee.price};ee.notes&&(H.notes=ee.notes),De.post(route("admin.sales-order-return.update-item"),H).then(X=>{const le=X.data.data,K=P.items.findIndex(de=>de.id===le.id);K!==-1&&(P.items[K]=le,ft("Item telah diperbarui","top")),F.value=!1}).catch(X=>{var le,K;pt(((K=(le=X==null?void 0:X.response)==null?void 0:le.data)==null?void 0:K.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(X)}).finally(()=>{C.value=!1})};he(()=>{const ee=H=>{v.value||F.value||E.value||T.value||(H.key==="F1"?(H.preventDefault(),v.value=!0):H.key==="F2"?(H.preventDefault(),f.value.focus()):H.key==="F3"?(H.preventDefault(),i.value.focus()):H.key==="F4"?(H.preventDefault(),o.value=!o.value):H.key==="F10"||H.ctrlKey&&H.key==="Enter"?(H.preventDefault(),ve()):H.key==="F11"?(H.preventDefault(),M()):(H.key==="F5"||H.key==="F6"||H.key==="F7"||H.key==="F12")&&H.preventDefault())};document.addEventListener("keydown",ee),ht(()=>{document.removeEventListener("keydown",ee)}),gt(()=>{var H;(H=c==null?void 0:c.value)==null||H.hideDrawer()})});const fe=async()=>{C.value=!0;const ee={id:P.id,customer_id:P.customer_id??null,datetime:Qt(P.datetime),notes:P.notes};await De.post(route("admin.sales-order-return.update"),ee).then(H=>{const X=H.data.data.id;P.customer_id=X.customer_id}).catch(H=>{var X,le;pt(((le=(X=H==null?void 0:H.response)==null?void 0:X.data)==null?void 0:le.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(H)}).finally(()=>{C.value=!1})},ve=ee=>{if(P.items.length===0){ft("Item masih kosong","top");return}St.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{C.value=!0,De.post(route("admin.sales-order-return.close",{id:P.id})).then(H=>{ft("Transaksi selesai"),Y.get(route("admin.sales-order-return.detail",{id:P.id}))}).catch(H=>{var X,le;pt((le=(X=H.response)==null?void 0:X.data)==null?void 0:le.message),console.error(H)}).finally(()=>{C.value=!1})})},ue=()=>{St.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.sales-order-return.cancel",{id:P.id}),{id:P.id}).then(()=>{ft("Transaksi telah dibatalkan."),Y.visit(route("admin.sales-order-return.detail",{id:P.id}))}).catch(ee=>{var X,le;const H=((le=(X=ee.response)==null?void 0:X.data)==null?void 0:le.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:H,color:"warning",position:"bottom"}),console.error(ee)})})},Oe=()=>{window.open(route("admin.sales-order-return.detail",{id:P.id})+"?preview=1","_blank")},_e=Z(()=>$.value?$.value.wallet_balance>=q.value:!0);return(ee,H)=>{const X=J("i-head"),le=J("authenticated-layout");return d(),h(W,null,[e(X,{title:y}),e(le,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[b(r(y))]),"left-button":a(()=>[t("div",sw,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:H[0]||(H[0]=K=>l(Y).get(ee.route("admin.sales-order-return.index")))})])]),"right-button":a(()=>[l(s).screen.gt.sm?(d(),I(rn,{key:0})):k("",!0)]),default:a(()=>[e(Ce,{class:"bg-grey-2 column fit"},{default:a(()=>[e(ie,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",rw,[t("div",iw,[t("div",dw,[e(on,{ref_key:"customerAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:$.value,"onUpdate:modelValue":H[1]||(H[1]=K=>$.value=K),label:"Pelanggan",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),$.value?(d(),I(ka,{key:0,party:$.value,"is-valid-wallet-balance":_e.value},null,8,["party","is-valid-wallet-balance"])):k("",!0)])]),t("div",uw,[e(ya,{ref_key:"userInputRef",ref:i,modelValue:V.value,"onUpdate:modelValue":H[2]||(H[2]=K=>V.value=K),onKeyup:H[3]||(H[3]=Ft(G(K=>O(),["prevent"]),["enter"])),onScanSuccess:H[4]||(H[4]=K=>O()),onSend:H[5]||(H[5]=K=>O()),onSearch:H[6]||(H[6]=K=>E.value=!0),loading:C.value,disable:C.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",mw,[e(Pt,{class:"col",modelValue:o.value,"onUpdate:modelValue":H[7]||(H[7]=K=>o.value=K),label:"Gabungkan item",disable:C.value},null,8,["modelValue","disable"])])])]),t("div",cw,[t("div",pw,[e(an,{items:P.items,onUpdateQuantity:H[8]||(H[8]=({id:K,value:de})=>ee.updateQuantity(K,de)),onRemoveItem:B,onEditItem:A,"is-processing":C.value},null,8,["items","is-processing"])])]),t("div",fw,[l(s).screen.gt.sm?(d(),h("div",gw,[t("div",bw,r(P.items.length)+" item(s) ",1),P.notes?(d(),h("div",vw,[H[20]||(H[20]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",_w,[e(xe,{text:P.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),h("div",yw,[t("div",kw,[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),b(r(l(u).props.data.sales_order.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),b(r(l(be)(P.datetime)),1)])])])):k("",!0),t("div",ww,[t("div",hw,[H[22]||(H[22]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",$w,[H[21]||(H[21]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(l(L)(q.value)),1)])])])]),t("div",xw,[t("div",Sw,[e(N,{class:"full-width",label:"Selesai",color:"primary",icon:"payment",onClick:H[9]||(H[9]=K=>ve()),disable:!ee.$can("admin.sales-order-return.close")||C.value||P.items.length===0||P.status!=="draft",loading:C.value},null,8,["disable","loading"])]),t("div",null,[e(N,{icon:"more_vert",color:"grey",onClick:H[13]||(H[13]=G(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:H[10]||(H[10]=G(K=>T.value=!0,["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...H[23]||(H[23]=[b("Edit Rincian",-1)])]),_:1})]),_:1})),[[se],[me]]),te((d(),I(oe,{clickable:"",onClick:H[11]||(H[11]=G(K=>Oe(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"preview"})]),_:1}),e(z,null,{default:a(()=>[...H[24]||(H[24]=[b("Pratinjau",-1)])]),_:1})]),_:1})),[[se],[me]]),te((d(),I(oe,{clickable:"",onClick:H[12]||(H[12]=G(K=>ue(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:a(()=>[...H[25]||(H[25]=[b(" Batalkan ",-1)])]),_:1})]),_:1})),[[se],[me]]),e(Te)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(ln,{ref_key:"itemEditorRef",ref:n,modelValue:F.value,"onUpdate:modelValue":H[14]||(H[14]=K=>F.value=K),item:U.value,onSave:H[15]||(H[15]=K=>ne()),"is-processing":C.value},null,8,["modelValue","item","is-processing"]),e(_a,{modelValue:E.value,"onUpdate:modelValue":H[16]||(H[16]=K=>E.value=K),onProductSelected:D},null,8,["modelValue"]),e(sn,{modelValue:T.value,"onUpdate:modelValue":H[17]||(H[17]=K=>T.value=K),data:P,onSave:H[18]||(H[18]=K=>fe()),"is-processing":C.value},null,8,["modelValue","data","is-processing"]),e(nn,{modelValue:v.value,"onUpdate:modelValue":H[19]||(H[19]=K=>v.value=K)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},qw=Object.freeze(Object.defineProperty({__proto__:null,default:Vw},Symbol.toStringTag,{value:"Module"})),Cw={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Tw={class:"q-pa-xs"},Pw={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Rw={key:0},Ow={key:1},Dw={key:2},Iw={key:3},Uw={key:0},jw={key:1},Ew={key:0},Aw={key:0},Mw={key:1},Nw={class:"flex justify-end"},Al="Retur Penjualan",Bw={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Re().startOf("month").toDate(),m=Re().endOf("month").toDate(),g=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.SALES_ORDER_RETURN_STATUSES)],_=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES)],y=Ue({search:"",status:"all",refund_status:"all",start_date:c,end_date:m,...ze()}),$=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),V=[{name:"code",label:"Info Order",field:"code",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{P()});const C=w=>{if(w.status=="draft"){E(w);return}F(w)},E=w=>{Y.get(route("admin.sales-order-return.edit",w.id))},F=w=>{Y.get(route("admin.sales-order-return.detail",w.id))},T=w=>{St.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${w.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.sales-order-return.cancel",{id:w.id}),{id:w.id}).then(x=>{const j=x.data.data,D=o.value.findIndex(O=>O.id===j.id);if(D===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[D].status="canceled",s.notify({message:x.data.message,position:"bottom"})}).catch(x=>{var D,O;const j=((O=(D=x.response)==null?void 0:D.data)==null?void 0:O.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:j,color:"warning",position:"bottom"}),console.error(x)})})},U=w=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${w.code}?`,url:route("admin.sales-order-return.delete",w.id),fetchItemsCallback:P,loading:i}),P=(w=null)=>{const x={...y,start_date:Re(y.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Re(y.end_date).format("YYYY-MM-DD HH:mm:ss")};Fe({pagination:$,filter:x,props:w,rows:o,url:route("admin.sales-order-return.data"),loading:i,tableRef:n})},q=()=>{P()},M=Z(()=>s.screen.gt.sm?V:V.filter(w=>w.name==="code"||w.name==="action"));return(w,x)=>{const j=J("i-head"),D=J("authenticated-layout");return d(),h(W,null,[e(j,{title:Al}),e(D,null,Be({title:a(()=>[b(r(Al))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=O=>u.value=!u.value)},null,8,["icon"]),w.$can("admin.sales-order-return.edit")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:x[1]||(x[1]=O=>l(Y).get(w.route("admin.sales-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",Tw,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:$.value,"onUpdate:pagination":x[10]||(x[10]=O=>$.value=O),filter:y.search,loading:i.value,columns:M.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Le({height:l(v)}),onRequest:P,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:O,message:A,filter:B})=>[t("div",Pw,[t("span",null,r(A)+" "+r(B?" with term "+B:""),1)])]),body:a(O=>[e(Pe,{props:O,class:"cursor-pointer",onClick:G(A=>C(O.row),["prevent"])},{default:a(()=>[e(Q,{key:"code",props:O,class:"wrap-column"},{default:a(()=>{var A,B,ne;return[t("div",null,[e(S,{name:"tag"}),b(" "+r(O.row.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),b(r(l(be)(O.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[O.row.cashier?(d(),h("div",Rw,[e(S,{name:"person",class:"inline-icon"}),b(" Kasir: "+r((A=O.row.cashier)==null?void 0:A.username),1)])):k("",!0),O.row.cashier_session?(d(),h("div",Ow,[e(S,{name:"point_of_sale",class:"inline-icon"}),b(" Terminal: "+r((ne=(B=O.row.cashier_session)==null?void 0:B.cashier_terminal)==null?void 0:ne.name),1)])):k("",!0),O.row.customer?(d(),h("div",Dw,[e(S,{name:"person",class:"inline-icon"}),e(pa,{href:w.route("admin.customer.detail",{id:O.row.customer.id}),onClick:x[7]||(x[7]=G(()=>{},["stop"]))},{default:a(()=>[b(" "+r(O.row.customer.code)+" - "+r(O.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(l(L)(O.row.grand_total)),1),O.row.notes?(d(),h("div",Iw,[e(S,{name:"notes"}),b(" "+r(O.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Mt,{status:O.row.status,statuses:w.$CONSTANTS.SALES_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Mt,{status:O.row.refund_status,statuses:w.$CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Q,{key:"cashier_id",props:O},{default:a(()=>{var A,B,ne;return[O.row.cashier?(d(),h("div",Uw,[e(S,{name:"person",class:"inline-icon"}),b(" "+r((A=O.row.cashier)==null?void 0:A.username),1)])):k("",!0),O.row.cashier_session?(d(),h("div",jw,[e(S,{name:"point_of_sale",class:"inline-icon"}),b(" "+r((ne=(B=O.row.cashier_session)==null?void 0:B.cashier_terminal)==null?void 0:ne.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Q,{key:"customer_id",props:O},{default:a(()=>[O.row.customer?(d(),h("div",Ew,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),b(" "+r(O.row.customer_code)+" - "+r(O.row.customer_name),1)]),O.row.customer_phone?(d(),h("div",Aw,[e(S,{name:"phone",class:"inline-icon"}),b(" "+r(O.row.customer_phone),1)])):k("",!0),O.row.customer_address?(d(),h("div",Mw,[e(S,{name:"home_pin",class:"inline-icon"}),b(" "+r(O.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"total",props:O},{default:a(()=>[b(r(l(L)(O.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:O},{default:a(()=>[e(xe,{text:O.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:O,onClick:x[9]||(x[9]=G(()=>{},["stop"]))},{default:a(()=>[t("div",Nw,[w.$can("admin.sales-order-return.detail")||w.$can("admin.sales-order-return.edit")||w.$can("admin.sales-order-return.cancel")||w.$can("admin.sales-order-return.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[8]||(x[8]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[O.row.status!="draft"&&w.$can("admin.sales-order-return.detail")?te((d(),I(oe,{key:0,onClick:G(A=>F(O.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"visibility"})]),_:1}),e(z,null,{default:a(()=>[...x[11]||(x[11]=[b(" Lihat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),O.row.status=="draft"&&w.$can("admin.sales-order-return.edit")?te((d(),I(oe,{key:1,onClick:G(A=>E(O.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...x[12]||(x[12]=[b(" Edit ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),O.row.status=="draft"&&w.$can("admin.sales-order-return.cancel")?te((d(),I(oe,{key:2,onClick:G(A=>T(O.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"cancel"})]),_:1}),e(z,null,{default:a(()=>[...x[13]||(x[13]=[b(" Batalkan ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),e(Te),w.$can("admin.sales-order-return.delete")?te((d(),I(oe,{key:3,onClick:G(A=>U(O.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...x[14]||(x[14]=[b(" Hapus ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Cw,[e(Xe,{modelValue:y.start_date,"onUpdate:modelValue":[x[2]||(x[2]=O=>y.start_date=O),q],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Xe,{modelValue:y.end_date,"onUpdate:modelValue":[x[3]||(x[3]=O=>y.end_date=O),q],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:y.status,"onUpdate:modelValue":[x[4]||(x[4]=O=>y.status=O),q],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:y.refund_status,"onUpdate:modelValue":[x[5]||(x[5]=O=>y.refund_status=O),q],options:_,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":x[6]||(x[6]=O=>y.search=O),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},zw=Object.freeze(Object.defineProperty({__proto__:null,default:Bw},Symbol.toStringTag,{value:"Module"})),Fw={key:0,class:"text-center q-mb-md text-grey-8"},Lw={class:"text-subtitle2 text-weight-medium"},Hw={class:"text-h5 text-center text-primary q-pb-md"},Kw={class:"q-mb-md flex flex-center"},Yw={key:1},Ww={class:"col-6"},Qw={class:"col-6"},Jw={class:"row"},Gw={class:"text-center q-mt-md"},Xw={key:0,class:"text-h6 text-negative text-weight-bold"},Zw={key:1,class:"text-h6 text-green-8 text-weight-bold"},e0={key:2,class:"text-h6 text-positive text-weight-bold"},t0={key:2},a0={class:"text-h6 text-negative text-center"},l0={key:3},o0={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=pe(),n=R(!1),f=R("cash"),v=R(new Date),c=R([]),m=R([]),g=Ue([{id:"cash",amount:0}]),_=i.props.settings.default_payment_mode,y=Z(()=>[{label:"Laci Kasir",value:"cash"},...u.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(D=>({label:D.name,value:D.id}))]),$=Z(()=>g.reduce((D,O)=>D+(O.amount||0),0)),V=Z(()=>u.total-$.value),C=Z(()=>{if(!u.customer)return!0;const D=g.find(A=>A.id==="wallet");return(D?D.amount:0)<=u.customer.wallet_balance}),E=new Date,F=ut.addToDate(new Date,{days:30}),T=Z(()=>[D=>!!D||"Tanggal jatuh tempo harus diisi",D=>ut.isBetweenDates(D,E,F,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),U=Z(()=>{if(f.value==="debt")return!!u.customer&&T.value.every(ne=>ne(v.value)===!0);const D=C.value,O=g.some(ne=>(ne.amount||0)>0),A=g.every(ne=>(ne.amount||0)>=0),B=V.value<=0;return D&&O&&A&&B}),P=()=>{if(g.length<3){const D=g.length;g.push({id:"cash",amount:0}),gt(()=>{const O=c.value[D];O&&(O.focus(),O.showPopup())})}},q=D=>{if(g.length>1){const O=g.findIndex(A=>A.id===D);O!==-1&&g.splice(O,1)}},M=(D,O="cash")=>{f.value=D,v.value=new Date,g.splice(0,g.length),D==="cash"&&(g.splice(0,g.length,{id:O,amount:u.total}),gt(()=>{m.value.length>0&&m.value[0]&&(m.value[0].focus(),m.value[0].select())}))},w=()=>{if(!U.value)return;n.value=!0;let D={total:u.total,is_debt:f.value==="debt"};if(f.value==="debt")D.due_date=ut.formatDate(v.value,"YYYY-MM-DD"),D.payments=[];else{const O=$.value,A=O>u.total?O-u.total:0,B=V.value>0?V.value:0;D.payments=g,D.remaining_debt=B,D.change=A}o("accepted",D),n.value=!1},x=()=>{M("cash",u.customer?_:"cash")};he(()=>{const D=O=>{u.modelValue&&O.ctrlKey&&O.key==="Enter"&&(O.preventDefault(),w())};document.addEventListener("keydown",D),ht(()=>{document.removeEventListener("keydown",D)})});const j=(D,O)=>{gt(()=>{m.value[O]&&(m.value[O].focus(),m.value[O].select())})};return(D,O)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":O[3]||(O[3]=A=>D.$emit("update:modelValue",A)),onBeforeShow:x},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>[...O[4]||(O[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[p.customer?(d(),h("div",Fw,[t("div",Lw,[b(" Username: "+r(p.customer.code)+" ",1),O[5]||(O[5]=t("br",null,null,-1)),b(" Nama: "+r(p.customer.name),1),O[6]||(O[6]=t("br",null,null,-1)),b(" Saldo: Rp. "+r(l(L)(p.customer.wallet_balance)),1)])])):k("",!0),t("div",Hw," Total: Rp. "+r(l(L)(p.total)),1),t("div",Kw,[e(l(zt),{modelValue:f.value,"onUpdate:modelValue":[O[0]||(O[0]=A=>f.value=A),M],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="cash"?(d(),h("div",Yw,[(d(!0),h(W,null,Ie(g,(A,B)=>(d(),h("div",{key:B,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Ww,[e(l(ce),{modelValue:A.id,"onUpdate:modelValue":[ne=>A.id=ne,ne=>j(ne,B)],options:y.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:ne=>c.value[B]=ne},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",Qw,[e(Me,{modelValue:A.amount,"onUpdate:modelValue":ne=>A.amount=ne,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:A.id==="wallet"&&!C.value,"error-message":A.id==="wallet"&&!C.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:ne=>m.value[B]=ne},Be({_:2},[g.length>1?{name:"append",fn:a(()=>[e(S,{size:"xs",name:"close",class:"cursor-pointer",onClick:ne=>q(A.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Jw,[e(N,{disable:!(g.length<3&&V.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:P,size:"sm"},null,8,["disable"])]),t("div",Gw,[V.value>0?(d(),h("div",Xw," Sisa Tagihan: Rp. "+r(l(L)(V.value)),1)):V.value<0?(d(),h("div",Zw," Kembalian: Rp. "+r(l(L)(Math.abs(V.value))),1)):(d(),h("div",e0," Tagihan Terbayar "))])])):f.value==="debt"&&p.customer?(d(),h("div",t0,[e(ra,{outlined:"",modelValue:v.value,"onUpdate:modelValue":O[1]||(O[1]=A=>v.value=A),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(E),"max-date":l(F),rules:T.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",a0," Total Utang: Rp. "+r(l(L)(p.total)),1)])):f.value==="debt"&&!p.customer?(d(),h("div",l0,[...O[7]||(O[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)])])):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(N,{flat:"",label:"Batal",color:"grey",onClick:O[2]||(O[2]=A=>D.$emit("update:modelValue",!1)),class:"col"}),e(N,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:w,disable:n.value||!U.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},n0=Object.freeze(Object.defineProperty({__proto__:null,default:o0},Symbol.toStringTag,{value:"Module"})),s0={key:0},r0={style:{float:"right"}},i0={key:1},d0={style:{float:"right"}},u0={key:2},m0={style:{float:"right"}},c0={key:3},p0={style:{float:"right"}},f0={style:{float:"right"}},g0={class:"q-gutter-sm"},b0={class:"q-my-md"},v0={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const u=R(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>[...n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])]),_:1}),e(ae,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),h("tr",s0,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ",-1)),t("div",r0,r(l(L)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),h("tr",i0,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ",-1)),t("div",d0,r(l(L)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),h("tr",u0,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ",-1)),t("div",m0,r(l(L)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),h("tr",c0,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ",-1)),t("span",p0,r(l(L)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ",-1)),t("div",f0,r(l(L)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",g0,[e(N,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(N,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",b0,[e(N,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},_0=bt(v0,[["__scopeId","data-v-a3bb29e0"]]),y0=Object.freeze(Object.defineProperty({__proto__:null,default:_0},Symbol.toStringTag,{value:"Module"})),k0={class:"column"},w0={class:"bg-grey-2 q-pa-xs"},h0={class:"text-subtitle1 text-bold text-grey-10"},$0={class:"text-caption text-grey-8"},x0={class:"col-12 col-sm-6"},S0={class:"full-width"},V0={key:1},q0={key:0},C0={key:1},T0={class:"col-12 col-sm-6",align:"left"},P0={class:"full-width"},R0={key:0};const O0={key:2},D0={class:"full-width",style:{"border-collapse":"collapse"}},I0={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},U0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},j0={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},E0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},A0={key:0},M0={class:"col-12 col-sm-6"},N0={class:"text-body2 text-grey-7 text-italic"},B0={class:"col-12 col-sm-6"},z0={class:"row justify-end q-gutter-y-xs"},F0={class:"col-12 row justify-between"},L0={class:"text-subtitle2 text-bold"},H0={key:0,class:"row justify-end q-gutter-y-xs"},K0={class:"col-12 row justify-between"},Y0={class:"text-subtitle2 text-bold"},W0={class:"row justify-end q-gutter-y-xs"},Q0={class:"col-12 row justify-between"},J0={class:"text-subtitle2 text-bold"},G0={key:1,class:"row justify-end q-gutter-y-xs"},X0={class:"col-12 row justify-between"},Z0={class:"text-subtitle2 text-bold"},e2={key:2,class:"row justify-end q-gutter-y-xs"},t2={class:"col-12 row justify-between"},a2={class:"text-subtitle2 text-bold"},dn={__name:"InvoiceTab",props:{data:Object},setup(p){const s=p;return(u,o)=>{const i=J("i-link");return d(),h("div",k0,[e(ae,{class:"q-pa-none"},{default:a(()=>[t("div",w0,[t("div",h0," INVOICE #"+r(s.data.code),1),t("div",$0,[b(" Kasir: "+r(s.data.cashier.username)+" - "+r(s.data.cashier.name)+" | "+r(l(be)(s.data.datetime))+" ",1),s.data.cashier_session?(d(),h(W,{key:0},[b(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Te),e(ae,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",x0,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",S0,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(d(),h(W,{key:0},[e(S,{class:"inline-icon",name:"person"}),e(i,{href:u.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[b(r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])],64)):(d(),h("div",V0,[e(S,{class:"inline-icon",name:"person"}),o[0]||(o[0]=b(" Pelanggan Umum ",-1))]))])]),s.data.customer_phone?(d(),h("tr",q0,[t("td",null,[e(S,{class:"inline-icon",name:"phone"}),e(Yt,{phone:s.data.customer_phone},null,8,["phone"])])])):k("",!0),s.data.customer_address?(d(),h("tr",C0,[t("td",null,[e(S,{class:"inline-icon",name:"home_pin"}),(d(),h(W,{key:0},[b(r(s.data.customer_address),1)],64))])])):k("",!0)])])]),t("div",T0,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",P0,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(be)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(u.$CONSTANTS.SALES_ORDER_STATUSES[s.data.status]),1)]),s.data.status=="closed"?(d(),h("tr",R0,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(u.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)])):k("",!0),k("",!0),s.data.due_date?(d(),h("tr",O0,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(la)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("table",D0,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(d(!0),h(W,null,Ie(s.data.details,n=>(d(),h("tr",{key:n.id},[t("td",I0,[e(i,{href:u.route("admin.product.detail",n.product_id)},{default:a(()=>[b(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",U0,r(l(L)(n.price)),1),t("td",j0,r(n.quantity),1),t("td",E0,r(l(L)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(d(),h("tr",A0,[...o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)])])]),_:1}),e(Te),e(ae,{class:"row",align:"left"},{default:a(()=>[t("div",M0,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",N0,r(s.data.notes?s.data.notes:"-"),1)]),t("div",B0,[s.data.status=="closed"&&s.data.change>0?(d(),h(W,{key:0},[t("div",z0,[t("div",F0,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Jumlah Bayar",-1)),t("div",L0,r(l(L)(parseInt(s.data.total_paid)+parseInt(s.data.change))),1)])]),s.data.status=="closed"?(d(),h("div",H0,[t("div",K0,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Kembalian",-1)),t("div",Y0,r(l(L)(s.data.change)),1)])])):k("",!0)],64)):k("",!0),t("div",W0,[t("div",Q0,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",J0,r(l(L)(s.data.grand_total)),1)])]),s.data.status=="closed"&&s.data.total_return!=0?(d(),h("div",G0,[t("div",X0,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",Z0,r(l(L)(s.data.total_return)),1)])])):k("",!0),s.data.status=="closed"&&s.data.balance!=0?(d(),h("div",e2,[t("div",t2,[o[20]||(o[20]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",a2,r(l(xt)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},l2=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"})),o2={key:0,class:"text-center q-mb-md text-grey-8"},n2={class:"text-subtitle2 text-weight-medium"},s2={class:"text-h5 text-center text-primary q-pb-md"},r2={class:"text-center q-mt-md"},i2={key:0,class:"text-h6 text-negative text-weight-bold"},d2={key:1,class:"text-h6 text-green-8 text-weight-bold"},u2={key:2,class:"text-h6 text-positive text-weight-bold"},un={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=pe(),n=R(!1),f=R({method:"cash",amount:u.total,notes:null}),v=i.props.data.customer,c=Z(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...v?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(V=>({label:V.name,value:V.id}))]),m=Z(()=>u.total-(f.value.amount||0)),g=Z(()=>{const V=f.value.amount||0;return u.total,V<=0?"Jumlah pembayaran harus lebih dari 0.":f.value.method==="wallet"&&v&&V>v.wallet_balance?"Saldo wallet tidak mencukupi.":null}),_=Z(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const V={total_paid:f.value.amount,payments:[{id:f.value.method,amount:f.value.amount}],notes:f.value.notes,change:Math.max(0,(f.value.amount||0)-u.total),remaining_debt:Math.max(0,u.total-(f.value.amount||0))};o("accepted",V),n.value=!1},$=()=>{f.value.amount=u.total,f.value.method="cash",f.value.notes=null};return(V,C)=>{const E=J("my-link");return d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":C[4]||(C[4]=F=>V.$emit("update:modelValue",F)),onBeforeShow:$},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>[...C[5]||(C[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[l(v)?(d(),h("div",o2,[t("div",n2,[t("div",null,[e(E,{href:V.route("admin.customer.detail",{id:l(v).id}),target:"_blank"},{default:a(()=>[b(r(l(v).code)+" - "+r(l(v).name),1)]),_:1},8,["href"])]),t("div",{class:Ve(l(v).wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(l(L)(l(v).wallet_balance)),3),t("div",{class:Ve(l(v).balance>0?"text-green":"text-red")},r(l(v).balance>0?"Piutang":"Utang")+": "+r(l(L)(l(v).balance)),3)])])):k("",!0),t("div",s2," Total: Rp. "+r(l(L)(p.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":C[0]||(C[0]=F=>f.value.method=F),options:c.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Me,{modelValue:f.value.amount,"onUpdate:modelValue":C[1]||(C[1]=F=>f.value.amount=F),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:f.value.notes,"onUpdate:modelValue":C[2]||(C[2]=F=>f.value.notes=F),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",r2,[m.value>0?(d(),h("div",i2," Sisa Tagihan: Rp. "+r(l(L)(m.value)),1)):m.value<0?(d(),h("div",d2," Kembalian: Rp. "+r(l(L)(Math.abs(m.value))),1)):(d(),h("div",u2," Tagihan Terbayar "))])]),_:1}),e(tt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(N,{flat:"",label:"Batal",color:"grey",onClick:C[3]||(C[3]=F=>V.$emit("update:modelValue",!1))}),e(N,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},m2=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"})),c2={class:"column"},p2={class:"row"},f2={class:"full-width",style:{"border-collapse":"collapse"}},g2={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},b2={class:"row items-center q-gutter-x-sm"},v2={class:"text-weight-bold"},_2={class:"row items-center q-gutter-x-sm q-mt-xs"},y2={class:"text-caption text-grey-6"},k2={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},w2={class:"q-mt-xs"},h2={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},$2={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},x2={key:0},S2={class:"text-right q-pa-sm"},mn={__name:"PaymentTab",props:{data:Object},setup(p){const s=p,u=we(),o=R(!1),i=()=>{o.value=!0},n=async v=>{const c={order_id:s.data.id,payments:v.payments,notes:v.notes};u.loading.show({message:"Memproses pembayaran..."});try{const m=await De.post(route("admin.sales-order.add-payment"),c);u.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,Y.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(m){let g="Gagal memproses pembayaran.";m.response&&m.response.data&&m.response.data.message?g=m.response.data.message:m.message&&(g=m.message),u.notify({message:g,color:"negative",icon:"error"})}finally{u.loading.hide()}},f=v=>{u.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{u.loading.show({message:"Menghapus pembayaran..."});try{await De.post(route("admin.sales-order.delete-payment",{id:v.id})),u.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),Y.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(c){let m="Gagal menghapus pembayaran.";c.response&&c.response.data&&c.response.data.message?m=c.response.data.message:c.message&&(m=c.message),u.notify({message:m,color:"negative",icon:"error"})}finally{u.loading.hide()}})};return(v,c)=>{const m=J("my-link");return d(),h(W,null,[t("div",c2,[e(Te),e(ae,{class:"q-pa-sm"},{default:a(()=>[t("div",p2,[v.$can("admin.sales-order.add-payment")?(d(),I(N,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:c[0]||(c[0]=G(g=>i(),["stop"]))})):k("",!0)]),t("table",f2,[c[5]||(c[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(d(!0),h(W,null,Ie(s.data.payments,g=>(d(),h("tr",{key:g.id},[t("td",g2,[t("div",b2,[e(S,{name:"tag",size:"xs",color:"grey-7"}),t("span",v2,r(g.code),1)]),t("div",_2,[e(S,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",y2,r(l(be)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(d(),h("div",k2,[e(S,{name:"wallet",size:"xs",color:"grey-7"}),e(m,{href:v.route("admin.finance-account.detail",{id:g.account.id})},{default:a(()=>[b(r(g.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",w2,[e(rt,{label:v.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(rt,{label:g.amount>0?"Pembayaran":"Refund",color:g.amount>0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",h2,r(l(L)(g.amount)),1),t("td",$2,[v.$can("admin.sales-order.delete-payment")&&s.data.customer_id&&g.amount>0?(d(),I(N,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(d(),h("tr",x2,[...c[2]||(c[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",null,[c[3]||(c[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",S2,r(l(L)(s.data.balance)),1),c[4]||(c[4]=t("td",null,null,-1))])])])]),_:1})]),e(un,{modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=g=>o.value=g),total:Math.abs(s.data.balance),customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},V2=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),q2={class:"q-gutter-sm"},C2={class:"col col-lg-6 q-pa-xs",align:"center"},Ml="Rincian Penjualan",T2={__name:"Detail",setup(p){const s=new URLSearchParams(window.location.search),u=pe(),o=u.props.data,i=R(s.get("preview")||!1),f=R(s.get("tab")||"invoice");he(()=>{gt(()=>{const c=s.get("print_size");c&&v(c)})});const v=c=>{window.open(route("admin.sales-order.print",{id:u.props.data.id,size:c}),"_self")};return(c,m)=>{const g=J("i-head"),_=J("authenticated-layout");return d(),h(W,null,[e(g,{title:Ml}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Ml))])]),"left-button":a(()=>[t("div",q2,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=y=>i.value?l(Y).get(c.route("admin.sales-order.edit",l(u).props.data.id)):l(Y).get(c.route("admin.sales-order.index")))})])]),"right-button":a(()=>[e(N,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:m[1]||(m[1]=y=>v("58mm"))}),e(N,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:m[2]||(m[2]=y=>v("a4"))}),i.value?k("",!0):(d(),I(N,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:m[3]||(m[3]=y=>l(Y).get(c.route("admin.sales-order.add")))}))]),default:a(()=>[e(Ce,{class:"row justify-center print-visible"},{default:a(()=>[t("div",C2,[e(ie,{square:"",flat:"",bordered:"",class:Ve(["full-width",i.value?"draft-label":f.value!="invoice"?"":l(u).props.data.payment_status=="fully_paid"?"paid-label":"unpaid-label"]),style:{"max-width":"1024px"}},{default:a(()=>[e(Ct,{modelValue:f.value,"onUpdate:modelValue":m[4]||(m[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(it,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(d(),I(it,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Te),e(Tt,{modelValue:f.value,"onUpdate:modelValue":m[5]||(m[5]=y=>f.value=y),animated:""},{default:a(()=>[e(dt,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(dn,{data:l(o)},null,8,["data"])]),_:1}),e(dt,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(mn,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])])]),_:1})]),_:1})],64)}}},P2=Object.freeze(Object.defineProperty({__proto__:null,default:T2},Symbol.toStringTag,{value:"Module"})),R2={class:"text-weight-medium"},O2={class:"text-caption text-grey-6 elipsis"},D2={class:"column items-end"},I2={class:"text-caption text-grey-6 text-italic"},cn={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(p){const s=we(),u=at(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(d(),I(Ee,{dense:"",rows:p.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Le({height:l(u)})},{header:a(f=>[e(Pe,{props:f,class:"bg-grey-4"},{default:a(()=>[(d(!0),h(W,null,Ie(f.cols,v=>(d(),I(Gt,{key:v.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[b(r(v.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Pe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Q,{key:"name",props:f,class:"text-left wrap-column"},{default:a(()=>[t("div",R2,r(f.row.product_name),1),t("div",O2,r(f.row.product_barcode),1),f.row.notes?(d(),I(xe,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"subtotal_price",props:f,class:"text-right"},{default:a(()=>[t("div",D2,[t("div",null,r(l(L)(f.row.subtotal_price)),1),t("div",I2,r(l(L)(f.row.quantity))+" "+r(f.row.product_uom)+" x Rp. "+r(l(L)(f.row.price)),1)])]),_:2},1032,["props"]),e(Q,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(N,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:v=>i.$emit("edit-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"]),e(N,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:v=>i.$emit("remove-item",f.row),disable:p.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},U2=Object.freeze(Object.defineProperty({__proto__:null,default:cn},Symbol.toStringTag,{value:"Module"})),j2={key:0,class:"text-center q-mb-md text-grey-8"},E2={class:"text-subtitle2 text-weight-medium"},A2={class:"text-h5 text-center text-primary q-pb-md"},M2={class:"q-mb-md flex flex-center"},N2={key:1},B2={class:"col-6"},z2={class:"col-6"},F2={class:"row"},L2={class:"text-center q-mt-md"},H2={key:0,class:"text-h6 text-negative text-weight-bold"},K2={key:1,class:"text-h6 text-green-8 text-weight-bold"},Y2={key:2,class:"text-h6 text-positive text-weight-bold"},W2={key:2},Q2={class:"text-h6 text-negative text-center"},J2={key:3},pn={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(p,{emit:s}){const u=p,o=s,i=pe(),n=R(!1),f=R("cash"),v=R(new Date),c=R(i.props.settings.after_payment_action??"print"),m=R([]),g=R([]),_=Ue([{id:"cash",amount:0}]),y=i.props.settings.default_payment_mode,$=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],V=Z(()=>[{label:"Laci Kasir",value:"cash"},...u.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(A=>({label:A.name,value:A.id}))]),C=Z(()=>_.reduce((A,B)=>A+(B.amount||0),0)),E=Z(()=>u.total-C.value),F=Z(()=>{if(!u.customer)return!0;const A=_.find(ne=>ne.id==="wallet");return(A?A.amount:0)<=u.customer.wallet_balance}),T=new Date,U=ut.addToDate(new Date,{days:30}),P=Z(()=>[A=>!!A||"Tanggal jatuh tempo harus diisi",A=>ut.isBetweenDates(A,T,U,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),q=Z(()=>{if(f.value==="debt")return!!u.customer&&P.value.every(ve=>ve(v.value)===!0);const A=F.value,B=_.some(ve=>(ve.amount||0)>0),ne=_.every(ve=>(ve.amount||0)>=0),fe=E.value<=0;return A&&B&&ne&&fe}),M=()=>{if(_.length<3){const A=_.length;_.push({id:"cash",amount:0}),gt(()=>{const B=m.value[A];B&&(B.focus(),B.showPopup())})}},w=A=>{if(_.length>1){const B=_.findIndex(ne=>ne.id===A);B!==-1&&_.splice(B,1)}},x=(A,B="cash")=>{f.value=A,v.value=new Date,_.splice(0,_.length),A==="cash"&&(_.splice(0,_.length,{id:B,amount:u.total}),gt(()=>{g.value.length>0&&g.value[0]&&(g.value[0].focus(),g.value[0].select())}))},j=()=>{if(!q.value)return;n.value=!0;let A={total:u.total,is_debt:f.value==="debt",after_payment_action:c.value};if(f.value==="debt")A.due_date=ut.formatDate(v.value,"YYYY-MM-DD"),A.payments=[];else{const B=C.value,ne=B>u.total?B-u.total:0,fe=E.value>0?E.value:0;A.payments=_,A.remaining_debt=fe,A.change=ne}o("accepted",A),n.value=!1},D=()=>{x("cash",u.customer?y:"cash")};he(()=>{const A=B=>{u.modelValue&&B.ctrlKey&&B.key==="Enter"&&(B.preventDefault(),j())};document.addEventListener("keydown",A),ht(()=>{document.removeEventListener("keydown",A)})});const O=(A,B)=>{gt(()=>{g.value[B]&&(g.value[B].focus(),g.value[B].select())})};return(A,B)=>{const ne=J("my-link");return d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":B[4]||(B[4]=fe=>A.$emit("update:modelValue",fe)),onBeforeShow:D},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,null,{default:a(()=>[...B[5]||(B[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[p.customer?(d(),h("div",j2,[t("div",E2,[t("div",null,[e(ne,{href:A.route("admin.customer.detail",{id:p.customer.id}),target:"_blank"},{default:a(()=>[b(r(p.customer.code)+" - "+r(p.customer.name),1)]),_:1},8,["href"])]),t("div",{class:Ve(p.customer.wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(l(L)(p.customer.wallet_balance)),3),t("div",{class:Ve(p.customer.balance>0?"text-green":"text-red")},r(p.customer.balance>0?"Piutang":"Utang")+": "+r(l(L)(p.customer.balance)),3)])])):k("",!0),t("div",A2," Total: Rp. "+r(l(L)(p.total)),1),t("div",M2,[e(l(zt),{modelValue:f.value,"onUpdate:modelValue":[B[0]||(B[0]=fe=>f.value=fe),x],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!p.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="cash"?(d(),h("div",N2,[(d(!0),h(W,null,Ie(_,(fe,ve)=>(d(),h("div",{key:ve,class:"row q-col-gutter-sm q-mb-sm"},[t("div",B2,[e(l(ce),{modelValue:fe.id,"onUpdate:modelValue":[ue=>fe.id=ue,ue=>O(ue,ve)],options:V.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:ue=>m.value[ve]=ue},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",z2,[e(Me,{modelValue:fe.amount,"onUpdate:modelValue":ue=>fe.amount=ue,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:fe.id==="wallet"&&!F.value,"error-message":fe.id==="wallet"&&!F.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:ue=>g.value[ve]=ue},Be({_:2},[_.length>1?{name:"append",fn:a(()=>[e(S,{size:"xs",name:"close",class:"cursor-pointer",onClick:ue=>w(fe.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",F2,[e(N,{disable:!(_.length<3&&E.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:M,size:"sm"},null,8,["disable"])]),t("div",L2,[E.value>0?(d(),h("div",H2," Sisa Tagihan: Rp. "+r(l(L)(E.value)),1)):E.value<0?(d(),h("div",K2," Kembalian: Rp. "+r(l(L)(Math.abs(E.value))),1)):(d(),h("div",Y2," Tagihan Terbayar "))])])):f.value==="debt"&&p.customer?(d(),h("div",W2,[e(ra,{outlined:"",modelValue:v.value,"onUpdate:modelValue":B[1]||(B[1]=fe=>v.value=fe),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(T),"max-date":l(U),rules:P.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Q2," Total Utang: Rp. "+r(l(L)(p.total)),1)])):f.value==="debt"&&!p.customer?(d(),h("div",J2,[...B[6]||(B[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)])])):k("",!0)]),_:1}),e(tt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(l(ce),{modelValue:c.value,"onUpdate:modelValue":B[2]||(B[2]=fe=>c.value=fe),options:$,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:n.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(N,{flat:"",label:"Batal",color:"grey",onClick:B[3]||(B[3]=fe=>A.$emit("update:modelValue",!1)),class:"col"}),e(N,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:j,disable:n.value||!q.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},G2=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),X2={class:"row items-center no-wrap"},Z2={class:"col-auto"},fn={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=Z(()=>o.item.quantity*o.item.price),v=g=>{g.stopPropagation(),g.preventDefault()},c=g=>{o.modelValue&&(g.key==="Enter"?(n(),i("update:modelValue",!1),v(g)):g.key==="Escape"&&(i("update:modelValue",!1),v(g)))};return he(()=>{window.addEventListener("keydown",c)}),ht(()=>{window.removeEventListener("keydown",c)}),s({getCurrentItem:()=>o.item}),(g,_)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>g.$emit("update:modelValue",y))},{default:a(()=>[e(ie,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",X2,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Z2,[e(N,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>g.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>{var y;return[e(re,{modelValue:p.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=$=>p.item.product_name=$),label:"Produk","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(Me,{modelValue:p.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=$=>p.item.quantity=$),label:`Kwantitas (${p.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:p.isProcessing},null,8,["modelValue","label","disable"]),e(Me,{modelValue:p.item.price,"onUpdate:modelValue":_[3]||(_[3]=$=>p.item.price=$),label:"Harga (Rp)",readonly:!((y=p.item.product)!=null&&y.price_editable),"hide-bottom-space":"",disable:p.isProcessing},null,8,["modelValue","readonly","disable"]),e(Me,{modelValue:f.value,"onUpdate:modelValue":_[4]||(_[4]=$=>f.value=$),label:"Subtotal (Rp)","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(re,{modelValue:p.item.notes,"onUpdate:modelValue":_[5]||(_[5]=$=>p.item.notes=$),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]}),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(N,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[me]]),te(e(N,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},eh=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"})),th={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(p,{emit:s}){return(u,o)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>u.$emit("update:modelValue",i))},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>[...o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])]),_:1}),e(ae,null,{default:a(()=>[...o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])]),_:1}),e(tt,{align:"center"},{default:a(()=>[te(e(N,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},gn=bt(th,[["__scopeId","data-v-92052544"]]),ah=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),lh={class:"row items-center no-wrap"},oh={class:"col text-subtite text-bold text-grey-8"},nh={class:"col-auto"},bn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(p,{expose:s,emit:u}){const o=p,i=u,n=()=>{i("save")},f=m=>{m.stopPropagation(),m.preventDefault()},v=m=>{o.modelValue&&(m.key==="Enter"?(n(),f(m)):m.key==="Escape"&&(i("update:modelValue",!1),f(m)))};return he(()=>{window.addEventListener("keydown",v)}),ht(()=>{window.removeEventListener("keydown",v)}),s({getCurrentItem:()=>o.item}),(m,g)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>m.$emit("update:modelValue",_))},{default:a(()=>[e(ie,null,{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",lh,[t("div",oh," Edit "+r(p.data.code),1),t("div",nh,[e(N,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>m.$emit("update:modelValue",!1))})])])]),_:1}),e(ae,{class:"q-py-sm"},{default:a(()=>[e(Xe,{modelValue:p.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>p.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:p.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(re,{modelValue:m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>m.$CONSTANTS.SALES_ORDER_STATUSES[p.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:p.isProcessing},null,8,["modelValue","disable"]),e(re,{modelValue:p.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>p.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(tt,{align:"right"},{default:a(()=>[te(e(N,{flat:"",label:"Batal",color:"primary",disable:p.isProcessing},null,8,["disable"]),[[me]]),te(e(N,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:p.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},sh=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"})),rh={key:0},ih={style:{float:"right"}},dh={key:1},uh={style:{float:"right"}},mh={key:2},ch={style:{float:"right"}},ph={key:3},fh={style:{float:"right"}},gh={style:{float:"right"}},bh={class:"q-gutter-sm"},vh={class:"q-my-md"},_h={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(p,{emit:s}){const u=R(null),o=()=>{var i;(i=u.value)==null||i.focus()};return(i,n)=>(d(),I(lt,{"model-value":p.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(ae,{class:"q-py-none q-pt-md"},{default:a(()=>[...n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])]),_:1}),e(ae,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(p.order.code),1)]),p.customer?(d(),h("tr",rh,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[b(r(p.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),b(r(p.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=b(" Rp. ",-1)),t("div",ih,r(l(L)(p.payment.total)),1)])]),p.payment.cash_amount?(d(),h("tr",dh,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=b(" Rp. ",-1)),t("div",uh,r(l(L)(p.payment.cash_amount)),1)])])):k("",!0),p.payment.wallet_amount?(d(),h("tr",mh,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=b(" Rp. ",-1)),t("div",ch,r(l(L)(p.payment.wallet_amount)),1)])])):k("",!0),p.payment.remaining_debt?(d(),h("tr",ph,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=b(" Rp. ",-1)),t("span",fh,r(l(L)(p.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=b(" Rp. ",-1)),t("div",gh,r(l(L)(p.payment.change)),1)])])])])]),_:1}),e(tt,{align:"center"},{default:a(()=>[t("div",bh,[e(N,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:u,color:"green"},null,512),e(N,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",vh,[e(N,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},vn=bt(_h,[["__scopeId","data-v-794fd35f"]]),yh=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"})),kh={class:"q-gutter-sm"},wh={class:"row q-col-gutter-none full-width"},hh={class:"col-sm-6 col-12 col q-pa-sm"},$h={class:"row full-width"},xh={class:"col-sm-6 col-12"},Sh={class:"row q-ml-sm items-end"},Vh={class:"row col grow"},qh={class:"col-12 q-px-sm column"},Ch={class:"row items-start q-col-gutter-none q-px-sm"},Th={key:0,class:"col"},Ph={class:"text-caption text-grey-6"},Rh={key:0,class:"text-caption text-grey-8 q-mt-xs"},Oh={class:"text-italic"},Dh={key:1,class:"col"},Ih={class:"text-grey-8"},Uh={class:"col"},jh={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Eh={class:"text-h4 text-weight-bold"},Ah={class:"row q-col-gutter-sm q-py-xs q-px-sm"},Mh={class:"col"},Nh={__name:"Editor",setup(p){const s=we(),u=pe(),o=R(!0),i=R(null),n=R(null),f=R(null),v=R(!1),c=R(null),m=u.props.data.code,g=R(u.props.data.customer),_=R(null),y=R(""),$=R(!1),V=R(!1),C=R(!1),E=R(!1),F=R(!1),T=R(!1),U=R(null),P=R("price_1"),q=Ue({id:u.props.data.id,code:u.props.data.code,customer_id:u.props.data.customer_id,datetime:new Date(u.props.data.datetime),status:u.props.data.status,payment_status:u.props.data.payment_status,delivery_status:u.props.data.delivery_status,notes:u.props.data.notes,items:u.props.data.details??[]}),M=Z(()=>q.items.reduce((H,X)=>H+X.price*X.quantity,0)),w=H=>isNaN(H)||H<=0?(vt("Kuantitas tidak valid.","top"),!1):!0,x=H=>isNaN(H)||H<0?(vt("Harga tidak valid.","top"),!1):!0,j=H=>!H||H.length==0?(vt("Barcode tidak valid.","top"),!1):!0,D=H=>{var X;(X=y.value)!=null&&X.endsWith("*")?y.value+=H.name:y.value=H.name},O=async()=>{var $e;if($.value)return;const H=($e=y.value)==null?void 0:$e.trim();if(H.length===0){C.value=!0;return}const X=H.split("*");let le=1,K="",de=null;if(X.length===1)K=X[0];else if(X.length<=3)le=parseInt(X[0]),K=X[1],X.length===3&&(de=parseFloat(X[2]));else{vt("Input tidak valid.","top");return}if(K.length===0){C.value=!0;return}!j(K)&&!w(le)&&!x(de)||($.value=!0,await De.post(route("admin.sales-order.add-item"),{order_id:q.id,product_code:K,qty:le,price:de,merge:o.value}).then(ke=>{const nt=ke.data.data.item;let yt=-1;ke.data.data.mergeItem&&(yt=q.items.findIndex(Vt=>Vt.id===nt.id)),yt===-1?q.items.push(nt):q.items[yt]=nt,y.value="",de!==null&&de!==parseFloat(nt.price)&&vt("Harga tidak dapat diubah!","top")}).catch(ke=>{var nt,yt;pt((yt=(nt=ke.response)==null?void 0:nt.data)==null?void 0:yt.message,"top"),console.error("Gagal mengambil data produk:",ke)}),$.value=!1,gt(()=>{var ke;(ke=i.value)==null||ke.focus()}))},A=H=>{U.value=Object.create(H),E.value=!0},B=H=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${H.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{$.value=!0,De.post(route("admin.sales-order.remove-item"),{id:H.id}).then(()=>{const X=q.items.findIndex(le=>le.id===H.id);X!==-1&&(q.items.splice(X,1)[0],ft("Item telah dihapus","top"))}).catch(X=>{var le,K;pt(((K=(le=X==null?void 0:X.response)==null?void 0:le.data)==null?void 0:K.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(X)}).finally(()=>{$.value=!1})})},ne=()=>{$.value=!0;const H=n.value.getCurrentItem(),X={id:H.id,qty:H.quantity};H.product.price_editable&&(X.price=H.price),H.notes&&(X.notes=H.notes),De.post(route("admin.sales-order.update-item"),X).then(le=>{const K=le.data.data,de=q.items.findIndex($e=>$e.id===K.id);de!==-1&&(q.items[de]=K,ft("Item telah diperbarui","top"))}).catch(le=>{var K,de;pt(((de=(K=le==null?void 0:le.response)==null?void 0:K.data)==null?void 0:de.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(le)}).finally(()=>{$.value=!1})};he(()=>{const H=X=>{V.value||v.value||E.value||C.value||F.value||(X.key==="F1"?(X.preventDefault(),v.value=!0):X.key==="F2"?(X.preventDefault(),f.value.focus()):X.key==="F3"?(X.preventDefault(),i.value.focus()):X.key==="F4"?(X.preventDefault(),o.value=!o.value):X.key==="F12"||X.ctrlKey&&X.key==="Enter"?(X.preventDefault(),ee.value&&(V.value=!0)):(X.key==="F5"||X.key==="F6"||X.key==="F7")&&X.preventDefault())};document.addEventListener("keydown",H),ht(()=>{document.removeEventListener("keydown",H)})});const fe=async H=>{g.value=H,q.customer_id=H==null?void 0:H.id,await ve(),H!=null&&H.id?(P.value=g.value.default_price_type??"price_1",i.value.focus()):(P.value="price_1",f.value.focus())},ve=async()=>{$.value=!0;const H={id:q.id,customer_id:q.customer_id??null,datetime:Qt(q.datetime),notes:q.notes};await De.post(route("admin.sales-order.update"),H).then(X=>{const le=X.data.data.id;q.customer_id=le.customer_id}).catch(X=>{var le,K;pt(((K=(le=X==null?void 0:X.response)==null?void 0:le.data)==null?void 0:K.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(X)}).finally(()=>{$.value=!1})},ue=H=>{if(q.items.length===0){ft("Item masih kosong","top");return}const X={id:q.id,...H};$.value=!0,De.post(route("admin.sales-order.close"),X).then(le=>{ft("Transaksi selesai"),X.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:q.id,size:u.props.settings.default_print_size}),"_self"):X.after_payment_action==="detail"?Y.get(route("admin.sales-order.detail",{id:q.id})):X.after_payment_action==="new-order"&&Y.get(route("admin.sales-order.add"))}).catch(le=>{var K,de;pt((de=(K=le.response)==null?void 0:K.data)==null?void 0:de.message),console.error(le)}).finally(()=>{$.value=!1})},Oe=()=>{St.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${q.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.sales-order.cancel",{id:q.id}),{id:q.id}).then(()=>{ft("Transaksi telah dibatalkan."),Y.visit(route("admin.sales-order.detail",{id:q.id}))}).catch(H=>{var le,K;const X=((K=(le=H.response)==null?void 0:le.data)==null?void 0:K.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:X,color:"warning",position:"bottom"}),console.error(H)})})},_e=()=>{window.open(route("admin.sales-order.detail",{id:q.id})+"?preview=1","_blank")};Z(()=>g.value?g.value.wallet_balance>=M.value:!0);const ee=Z(()=>Ot().appContext.config.globalProperties.$can("admin.sales-order.close")&&!$.value&&q.items.length!==0&&q.status==="draft");return(H,X)=>{const le=J("i-head"),K=J("authenticated-layout");return d(),h(W,null,[e(le,{title:l(m)},null,8,["title"]),e(K,{ref_key:"authLayoutRef",ref:c,"show-drawer-button":!0},{title:a(()=>[b(r(l(m)),1)]),"left-button":a(()=>[t("div",kh,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:X[0]||(X[0]=de=>l(Y).get(H.route("admin.sales-order.index")))})])]),"right-button":a(()=>[l(s).screen.gt.sm?(d(),I(rn,{key:0})):k("",!0)]),default:a(()=>[e(Ce,{class:"bg-grey-2 column fit"},{default:a(()=>[e(ie,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",wh,[t("div",hh,[t("div",$h,[e(on,{ref_key:"customerAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:g.value,"onUpdate:modelValue":X[1]||(X[1]=de=>g.value=de),label:"Pelanggan",disable:$.value,onCustomerSelected:fe,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),g.value?(d(),I(ka,{key:0,party:g.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",xh,[e(ya,{ref_key:"userInputRef",ref:i,modelValue:y.value,"onUpdate:modelValue":X[2]||(X[2]=de=>y.value=de),onKeyup:X[3]||(X[3]=Ft(G(de=>O(),["prevent"]),["enter"])),onScanSuccess:X[4]||(X[4]=de=>O()),onSend:X[5]||(X[5]=de=>O()),onSearch:X[6]||(X[6]=de=>C.value=!0),loading:$.value,disable:$.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",Sh,[e(Pt,{class:"col",modelValue:o.value,"onUpdate:modelValue":X[7]||(X[7]=de=>o.value=de),label:"Gabungkan item",disable:$.value},null,8,["modelValue","disable"])])])]),t("div",Vh,[t("div",qh,[e(cn,{items:q.items,onUpdateQuantity:X[8]||(X[8]=({id:de,value:$e})=>H.updateQuantity(de,$e)),onRemoveItem:B,onEditItem:A,"is-processing":$.value},null,8,["items","is-processing"])])]),t("div",Ch,[l(s).screen.gt.sm?(d(),h("div",Th,[t("div",Ph,r(q.items.length)+" item(s) ",1),q.notes?(d(),h("div",Rh,[X[22]||(X[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Oh,[e(xe,{text:q.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(d(),h("div",Dh,[t("div",Ih,[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),b(r(q.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),b(r(l(be)(q.datetime)),1)])])])):k("",!0),t("div",Uh,[t("div",jh,[X[24]||(X[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",Eh,[X[23]||(X[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(l(L)(M.value)),1)])])])]),t("div",Ah,[t("div",Mh,[e(N,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:X[9]||(X[9]=de=>V.value=!0),disable:!ee.value,loading:$.value},null,8,["disable","loading"])]),t("div",null,[e(N,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:X[13]||(X[13]=G(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:X[10]||(X[10]=G(de=>F.value=!0,["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...X[25]||(X[25]=[b("Edit Rincian",-1)])]),_:1})]),_:1})),[[se],[me]]),te((d(),I(oe,{clickable:"",onClick:X[11]||(X[11]=G(de=>_e(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"preview"})]),_:1}),e(z,null,{default:a(()=>[...X[26]||(X[26]=[b("Pratinjau",-1)])]),_:1})]),_:1})),[[se],[me]]),te((d(),I(oe,{clickable:"",onClick:X[12]||(X[12]=G(de=>Oe(),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"cancel",color:"negative"})]),_:1}),e(z,{class:"text-negative"},{default:a(()=>[...X[27]||(X[27]=[b(" Batalkan ",-1)])]),_:1})]),_:1})),[[se],[me]]),e(Te)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(fn,{ref_key:"itemEditorRef",ref:n,modelValue:E.value,"onUpdate:modelValue":X[14]||(X[14]=de=>E.value=de),item:U.value,onSave:X[15]||(X[15]=de=>ne()),"is-processing":$.value},null,8,["modelValue","item","is-processing"]),e(pn,{modelValue:V.value,"onUpdate:modelValue":X[16]||(X[16]=de=>V.value=de),onAccepted:ue,form:q,customer:g.value,total:M.value,accounts:l(u).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(_a,{modelValue:C.value,"onUpdate:modelValue":X[17]||(X[17]=de=>C.value=de),onProductSelected:D,priceType:P.value,"show-cost":H.$can("admin.product:view-cost")},null,8,["modelValue","priceType","show-cost"]),e(bn,{modelValue:F.value,"onUpdate:modelValue":X[18]||(X[18]=de=>F.value=de),data:q,onSave:X[19]||(X[19]=de=>ve()),"is-processing":$.value},null,8,["modelValue","data","is-processing"]),e(gn,{modelValue:v.value,"onUpdate:modelValue":X[20]||(X[20]=de=>v.value=de)},null,8,["modelValue"]),e(vn,{modelValue:T.value,"onUpdate:modelValue":X[21]||(X[21]=de=>T.value=de),order:q,customer:g.value,total:M.value,payment:_.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},Bh=Object.freeze(Object.defineProperty({__proto__:null,default:Nh},Symbol.toStringTag,{value:"Module"})),zh={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.SALES_ORDER_STATUSES,u={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(d(),I(Mt,{status:p.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}},Fh={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(p){const s=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,u={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(d(),I(Mt,{status:p.status,statuses:l(s),colors:u},null,8,["status","statuses"]))}};const Lh={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Hh={class:"q-pa-xs"},Kh={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Yh={key:0},Wh={key:1},Qh={key:2},Jh={key:4},Gh={key:0},Xh={key:1},Zh={key:0},e$={key:0},t$={key:1},a$={class:"flex justify-end"},Nl="Penjualan",l$={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Re().startOf("month").toDate(),m=Re().endOf("month").toDate(),g=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.SALES_ORDER_STATUSES)],_=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],y=[{value:"all",label:"Semua Status"},...Ne(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],$=Ue({search:"",status:"all",payment_status:"all",delivery_status:"all",start_date:c,end_date:m,...ze()}),V=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];he(()=>{q()});const E=x=>{if(x.status=="draft"){F(x);return}T(x)},F=x=>{Y.get(route("admin.sales-order.edit",x.id))},T=x=>{Y.get(route("admin.sales-order.detail",x.id))},U=x=>{St.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${x.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{De.post(route("admin.sales-order.cancel",{id:x.id}),{id:x.id}).then(j=>{const D=j.data.data,O=o.value.findIndex(A=>A.id===D.id);if(O===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[O].status="canceled",s.notify({message:j.data.message,position:"bottom"})}).catch(j=>{var O,A;const D=((A=(O=j.response)==null?void 0:O.data)==null?void 0:A.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:D,color:"warning",position:"bottom"}),console.error(j)})})},P=x=>ot({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${x.code}?`,url:route("admin.sales-order.delete",x.id),fetchItemsCallback:q,loading:i}),q=(x=null)=>{const j={...$,start_date:Re($.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Re($.end_date).format("YYYY-MM-DD HH:mm:ss")};Fe({pagination:V,filter:j,props:x,rows:o,url:route("admin.sales-order.data"),loading:i,tableRef:n})},M=()=>{q()},w=Z(()=>s.screen.gt.sm?C:C.filter(x=>x.name==="id"||x.name==="action"));return(x,j)=>{const D=J("i-head"),O=J("authenticated-layout");return d(),h(W,null,[e(D,{title:Nl}),e(O,null,Be({title:a(()=>[b(r(Nl))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:j[0]||(j[0]=A=>u.value=!u.value)},null,8,["icon"]),x.$can("admin.sales-order.edit")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:j[1]||(j[1]=A=>l(Y).get(x.route("admin.sales-order.add")))})):k("",!0)]),default:a(()=>[t("div",Hh,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":j[11]||(j[11]=A=>V.value=A),filter:$.search,loading:i.value,columns:w.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Le({height:l(v)}),onRequest:q,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:A,message:B,filter:ne})=>[t("div",Kh,[t("span",null,r(B)+" "+r(ne?" with term "+ne:""),1)])]),body:a(A=>[e(Pe,{props:A,class:"cursor-pointer",onClick:G(B=>E(A.row),["prevent"])},{default:a(()=>[e(Q,{key:"id",props:A,class:"wrap-column"},{default:a(()=>{var B,ne,fe;return[t("div",null,[e(S,{name:"tag"}),b(" "+r(A.row.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_today"}),b(r(l(be)(A.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[A.row.cashier?(d(),h("div",Yh,[e(S,{name:"person",class:"inline-icon"}),b(" Kasir: "+r((B=A.row.cashier)==null?void 0:B.username),1)])):k("",!0),A.row.cashier_session?(d(),h("div",Wh,[e(S,{name:"point_of_sale",class:"inline-icon"}),b(" Terminal: "+r((fe=(ne=A.row.cashier_session)==null?void 0:ne.cashier_terminal)==null?void 0:fe.name),1)])):k("",!0),A.row.customer?(d(),h("div",Qh,[e(S,{name:"person",class:"inline-icon"}),j[12]||(j[12]=b(" Pelanggan: ",-1)),e(pa,{href:x.route("admin.customer.detail",{id:A.row.customer.id}),onClick:j[8]||(j[8]=G(()=>{},["stop"]))},{default:a(()=>[b(" "+r(A.row.customer.code)+" - "+r(A.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,[e(S,{name:"wallet",class:"inline-icon"}),b(" Total: Rp. "+r(l(L)(A.row.grand_total)),1)]),A.row.balance!=0?(d(),h("div",{key:3,class:Ve(A.row.balance>0?"text-green":"text-red")},[e(S,{name:"balance",class:"inline-icon"}),b(" "+r(A.row.balance>0?"Piutang":"Utang")+": Rp. "+r(l(L)(A.row.balance)),1)],2)):k("",!0),A.row.notes?(d(),h("div",Jh,[e(S,{name:"notes"}),b(" "+r(A.row.notes),1)])):k("",!0)],64)),t("div",null,[e(zh,{status:A.row.status},null,8,["status"]),A.row.status=="closed"?(d(),h(W,{key:0},[e(Fh,{status:A.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]}),_:2},1032,["props"]),e(Q,{key:"cashier_id",props:A},{default:a(()=>{var B,ne,fe;return[A.row.cashier?(d(),h("div",Gh,[e(S,{name:"person",class:"inline-icon"}),b(" "+r((B=A.row.cashier)==null?void 0:B.username),1)])):k("",!0),A.row.cashier_session?(d(),h("div",Xh,[e(S,{name:"point_of_sale",class:"inline-icon"}),b(" "+r((fe=(ne=A.row.cashier_session)==null?void 0:ne.cashier_terminal)==null?void 0:fe.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Q,{key:"customer_id",props:A},{default:a(()=>[A.row.customer?(d(),h("div",Zh,[t("div",null,[e(S,{name:"person",class:"inline-icon"}),b(" "+r(A.row.customer_code)+" - "+r(A.row.customer_name),1)]),A.row.customer_phone?(d(),h("div",e$,[e(S,{name:"phone",class:"inline-icon"}),b(" "+r(A.row.customer_phone),1)])):k("",!0),A.row.customer_address?(d(),h("div",t$,[e(S,{name:"home_pin",class:"inline-icon"}),b(" "+r(A.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:A},{default:a(()=>[b(r(l(L)(A.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:A,class:Ve(A.row.balance>0?"text-green":"text-red")},{default:a(()=>[b(r(l(L)(A.row.balance)),1)]),_:2},1032,["props","class"]),e(Q,{key:"notes",props:A},{default:a(()=>[e(xe,{text:A.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Q,{key:"action",props:A,onClick:j[10]||(j[10]=G(()=>{},["stop"]))},{default:a(()=>[t("div",a$,[x.$can("admin.sales-order.detail")||x.$can("admin.sales-order.edit")||x.$can("admin.sales-order.cancel")||x.$can("admin.sales-order.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:j[9]||(j[9]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[A.row.status!="draft"&&x.$can("admin.sales-order.detail")?te((d(),I(oe,{key:0,onClick:G(B=>T(A.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"visibility"})]),_:1}),e(z,null,{default:a(()=>[...j[13]||(j[13]=[b(" Lihat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),A.row.status=="draft"&&x.$can("admin.sales-order.edit")?te((d(),I(oe,{key:1,onClick:G(B=>F(A.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...j[14]||(j[14]=[b(" Edit ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),A.row.status=="draft"&&x.$can("admin.sales-order.cancel")?te((d(),I(oe,{key:2,onClick:G(B=>U(A.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"cancel"})]),_:1}),e(z,null,{default:a(()=>[...j[15]||(j[15]=[b(" Batalkan ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),e(Te),x.$can("admin.sales-order.delete")?te((d(),I(oe,{key:3,onClick:G(B=>P(A.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...j[16]||(j[16]=[b(" Hapus ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Lh,[e(Xe,{modelValue:$.start_date,"onUpdate:modelValue":[j[2]||(j[2]=A=>$.start_date=A),M],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Xe,{modelValue:$.end_date,"onUpdate:modelValue":[j[3]||(j[3]=A=>$.end_date=A),M],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:$.status,"onUpdate:modelValue":[j[4]||(j[4]=A=>$.status=A),M],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:$.payment_status,"onUpdate:modelValue":[j[5]||(j[5]=A=>$.payment_status=A),M],options:_,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:$.search,"onUpdate:modelValue":j[7]||(j[7]=A=>$.search=A),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},o$=Object.freeze(Object.defineProperty({__proto__:null,default:l$},Symbol.toStringTag,{value:"Module"})),n$={},s$={class:"row"},r$={class:"q-mb-md text-h6"};function i$(p,s){const u=J("i-head"),o=J("authenticated-layout");return d(),h(W,null,[e(u,{title:"Informasi Sistem"}),e(o,null,{title:a(()=>[...s[0]||(s[0]=[b("Informasi Sistem",-1)])]),default:a(()=>[t("div",s$,[e(ie,{class:"col q-ma-xs",square:"",flat:"",bordered:""},{default:a(()=>[e(ae,null,{default:a(()=>[t("div",r$,"Tentang "+r(p.$config.APP_NAME),1),b(" Versi : "+r(p.$config.APP_VERSION_STR),1),s[1]||(s[1]=t("br",null,null,-1)),s[2]||(s[2]=b(" Dikembangkan oleh Shiftech Indonesia",-1)),s[3]||(s[3]=t("br",null,null,-1)),s[4]||(s[4]=b(" CV. Shift Karya Teknologi ",-1))]),_:1})]),_:1})])]),_:1})],64)}const d$=bt(n$,[["render",i$]]),u$=Object.freeze(Object.defineProperty({__proto__:null,default:d$},Symbol.toStringTag,{value:"Module"})),_n={__name:"CompanyInfoForm",setup(p){const s=R(),u=pe(),o=Qe({name:u.props.data.name,headline:u.props.data.headline,phone:u.props.data.phone,address:u.props.data.address,logo_path:u.props.data.logo_path,logo_image:null}),i=R(null),n=R("");he(()=>{o.logo_path&&(n.value=`/${o.logo_path}`)});function f(){i.value.click()}function v(g){const _=g.target.files[0];_&&(o.logo_image=_,n.value=URL.createObjectURL(_))}function c(){o.logo_image=null,o.logo_path=null,n.value=null,i.value.value=null}const m=()=>st({form:o,url:route("admin.company-profile.edit")});return(g,_)=>(d(),I(Je,{class:"row",onSubmit:G(m,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[_[8]||(_[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),_[9]||(_[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(re,{ref_key:"nameInputRef",ref:s,modelValue:l(o).name,"onUpdate:modelValue":_[0]||(_[0]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(re,{modelValue:l(o).headline,"onUpdate:modelValue":_[1]||(_[1]=y=>l(o).headline=y),modelModifiers:{trim:!0},label:"Headline",disable:l(o).processing,maxlength:"200","lazy-rules":"",error:!!l(o).errors.headline,"error-message":l(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).phone,"onUpdate:modelValue":_[2]||(_[2]=y=>l(o).phone=y),modelModifiers:{trim:!0},label:"No Telepon",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.phone,"error-message":l(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(re,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(o).address,"onUpdate:modelValue":_[3]||(_[3]=y=>l(o).address=y),modelModifiers:{trim:!0},label:"Alamat",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[_[7]||(_[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(N,{label:"Browse Logo",size:"sm",onClick:f,color:"secondary",icon:"add_a_photo",disable:l(o).processing},null,8,["disable"]),e(N,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:l(o).processing||!n.value,color:"red",onClick:c},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*",style:{display:"none"},onChange:v},null,544),t("div",null,[e(na,{src:n.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},Be({error:a(()=>[_[4]||(_[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[n.value?void 0:{name:"default",fn:a(()=>[_[5]||(_[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),_[6]||(_[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(ae,null,{default:a(()=>[e(N,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},m$=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"})),c$={class:"q-pa-xs"},p$={class:"row justify-center"},f$={class:"col col-md-6"},Bl="Profil Perusahaan",g$={__name:"Edit",setup(p){return(s,u)=>{const o=J("i-head"),i=J("authenticated-layout");return d(),h(W,null,[e(o,{title:Bl}),e(i,null,{title:a(()=>[b(r(Bl))]),default:a(()=>[t("div",c$,[t("div",p$,[t("div",f$,[e(_n)])])])]),_:1})],64)}}},b$=Object.freeze(Object.defineProperty({__proto__:null,default:g$},Symbol.toStringTag,{value:"Module"})),v$={class:"col-xs-12 col-md-8"},_$={class:"col-xs-12 col-sm-9"},y$={class:"col-xs-12 col-sm-3 text-right"},zl="Pengaturan Database & Utilitas",k$={__name:"Index",setup(p){const s=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:" **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:" **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:" **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(u,o)=>{const i=J("i-head"),n=J("authenticated-layout");return d(),h(W,null,[e(i,{title:zl}),e(n,null,{title:a(()=>[b(r(zl))]),default:a(()=>[e(Ce,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",v$,[e(ie,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ae,null,{default:a(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Lt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:a(()=>[e(S,{name:"warning",color:"red"})]),default:a(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=b(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. ",-1))]),_:1})]),_:1}),e(Te),e(ae,{class:"q-gutter-y-lg"},{default:a(()=>[(d(),h(W,null,Ie(s,f=>t("div",{key:f.name,class:"row items-center q-col-gutter-md"},[t("div",_$,[e(oe,{class:"q-pa-none"},{default:a(()=>[e(z,{avatar:"",class:"q-pr-md"},{default:a(()=>[e(S,{name:f.icon,color:f.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(z,{style:{"text-wrap":"initial"}},{default:a(()=>[e(ge,{class:"text-subtitle1 text-bold"},{default:a(()=>[b(r(f.name),1)]),_:2},1024),e(ge,{caption:"",class:"q-pb-sm"},{default:a(()=>[b(r(f.description),1)]),_:2},1024),e(ge,{class:"text-caption text-negative text-bold"},{default:a(()=>[b(r(f.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",y$,[e(N,{icon:f.icon,label:f.name.split(" ")[0],color:f.color,disable:f.disable,onClick:f.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},w$=Object.freeze(Object.defineProperty({__proto__:null,default:k$},Symbol.toStringTag,{value:"Module"})),h$={class:"q-pa-xs"},$$={class:"row justify-center"},x$={class:"col col-md-6"},S$={__name:"Edit",setup(p){const s=pe(),u=Qe({foot_note:s.props.data.foot_note,default_payment_mode:s.props.data.default_payment_mode,default_print_size:s.props.data.default_print_size,after_payment_action:s.props.data.after_payment_action}),o=()=>st({form:u,url:route("admin.pos-settings.edit")}),i=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],n=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],f=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(v,c)=>{const m=J("i-head"),g=J("authenticated-layout");return d(),h(W,null,[e(m,{title:"Pengaturan POS"}),e(g,null,{title:a(()=>[...c[4]||(c[4]=[b("Pengaturan POS",-1)])]),default:a(()=>[t("div",h$,[t("div",$$,[t("div",x$,[e(Je,{class:"row",onSubmit:G(o,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[c[5]||(c[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),c[6]||(c[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(ce,{modelValue:l(u).default_payment_mode,"onUpdate:modelValue":c[0]||(c[0]=_=>l(u).default_payment_mode=_),label:"Default Pembayaran",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:l(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(u).errors.default_payment_mode,"error-message":l(u).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(u).default_print_size,"onUpdate:modelValue":c[1]||(c[1]=_=>l(u).default_print_size=_),label:"Default Ukuran Cetak",options:n,"map-options":"","emit-value":"","lazy-rules":"",disable:l(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(u).errors.default_print_size,"error-message":l(u).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(u).after_payment_action,"onUpdate:modelValue":c[2]||(c[2]=_=>l(u).after_payment_action=_),label:"Aksi Setelah Pembayaran",options:f,"map-options":"","emit-value":"","lazy-rules":"",disable:l(u).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(u).errors.after_payment_action,"error-message":l(u).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(re,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(u).foot_note,"onUpdate:modelValue":c[3]||(c[3]=_=>l(u).foot_note=_),modelModifiers:{trim:!0},label:"Foot Note",disable:l(u).processing,"lazy-rules":"",error:!!l(u).errors.foot_note,"error-message":l(u).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,null,{default:a(()=>[e(N,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(u).processing,loading:l(u).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},V$=Object.freeze(Object.defineProperty({__proto__:null,default:S$},Symbol.toStringTag,{value:"Module"})),q$={class:"q-gutter-sm"},C$={class:"q-gutter-sm"},T$={class:"col col-md-6 q-pa-xs"},P$={class:"row"},R$={class:"detail-item"},O$={class:"detail-value"},D$={class:"detail-item"},I$={class:"detail-value"},U$={class:"detail-item"},j$={class:"detail-value"},E$={class:"detail-item"},A$={class:"detail-value"},M$={class:"detail-item"},N$={class:"detail-value"},B$={class:"detail-item"},z$={class:"detail-value"},F$={class:"detail-item"},L$={class:"detail-value"},H$={class:"detail-item"},K$={class:"detail-value user-agent-value"},Y$={class:"q-pt-md"},W$={class:"table-wrapper-scroll"},Q$={key:0,class:"table-metadata"},J$={key:0},G$={colspan:"100%"},X$={class:"text-mono json-pre-scroll"},Z$={key:1},ex={class:"metadata-label",style:{width:"100px"}},tx={class:"metadata-value"},ax={key:0,class:"text-mono json-pre-scroll"},lx={key:2},ox={colspan:"3"},nx={class:"table-metadata"},sx={class:"metadata-label"},rx={class:"metadata-value"},ix={class:"metadata-value"},dx={key:1,class:"text-grey-8 text-italic q-pa-sm"},Fl="Rincian Log Aktifitas",ux={__name:"Detail",setup(p){const s=pe(),u=()=>ot({message:`Hapus log aktifitas #${s.props.data.id}?`,url:route("admin.user-activity-log.delete",s.props.data.id),onSuccess:()=>{Y.get(route("admin.user-activity-log.index"))}});return(o,i)=>{const n=J("i-head"),f=J("i-link"),v=J("authenticated-layout");return d(),h(W,null,[e(n,{title:Fl}),e(v,{"show-drawer-button":!0},{title:a(()=>[b(r(Fl))]),"left-button":a(()=>[t("div",q$,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=c=>l(Y).get(o.route("admin.user-activity-log.index")))})])]),"right-button":a(()=>[t("div",C$,[e(N,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=c=>u())})])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",T$,[t("div",P$,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"detail-group"},{default:a(()=>[i[20]||(i[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",R$,[i[2]||(i[2]=t("div",{class:"detail-label"},"ID",-1)),i[3]||(i[3]=t("div",{class:"detail-separator"},":",-1)),t("div",O$,r(l(s).props.data.id),1)]),t("div",D$,[i[4]||(i[4]=t("div",{class:"detail-label"},"Waktu",-1)),i[5]||(i[5]=t("div",{class:"detail-separator"},":",-1)),t("div",I$,r(l(be)(l(s).props.data.logged_at)),1)]),t("div",U$,[i[6]||(i[6]=t("div",{class:"detail-label"},"Pengguna",-1)),i[7]||(i[7]=t("div",{class:"detail-separator"},":",-1)),t("div",j$,[e(f,{href:o.route("admin.user.detail",{id:l(s).props.data.user_id})},{default:a(()=>[b(r(l(s).props.data.username),1)]),_:1},8,["href"])])]),t("div",E$,[i[8]||(i[8]=t("div",{class:"detail-label"},"Kategori",-1)),i[9]||(i[9]=t("div",{class:"detail-separator"},":",-1)),t("div",A$,r(l(s).props.data.activity_category_label),1)]),t("div",M$,[i[10]||(i[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),i[11]||(i[11]=t("div",{class:"detail-separator"},":",-1)),t("div",N$,r(l(s).props.data.activity_name_label),1)]),t("div",B$,[i[12]||(i[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),i[13]||(i[13]=t("div",{class:"detail-separator"},":",-1)),t("div",z$,r(l(s).props.data.description),1)]),t("div",F$,[i[14]||(i[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),i[15]||(i[15]=t("div",{class:"detail-separator"},":",-1)),t("div",L$,r(l(s).props.data.ip_address),1)]),t("div",H$,[i[16]||(i[16]=t("div",{class:"detail-label"},"User Agent",-1)),i[17]||(i[17]=t("div",{class:"detail-separator"},":",-1)),t("div",K$,r(l(s).props.data.user_agent),1)]),t("div",Y$,[i[19]||(i[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",W$,[Object.keys(l(s).props.data.metadata).length>0?(d(),h("table",Q$,[t("tbody",null,[(d(!0),h(W,null,Ie(l(s).props.formatted_metadata,(c,m)=>(d(),h(W,{key:m},[c.type==="plain"?(d(),h("tr",J$,[t("td",G$,[t("pre",X$,r(c.value),1)])])):k("",!0),c.type==="simple"?(d(),h("tr",Z$,[t("td",ex,r(c.label),1),t("td",tx,[c.label=="Data Mentah (JSON)"?(d(),h("pre",ax,r(c.value),1)):(d(),h(W,{key:1},[b(r(c.value),1)],64))])])):k("",!0),c.type==="comparison"?(d(),h("tr",lx,[t("td",ox,[t("table",nx,[i[18]||(i[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(d(!0),h(W,null,Ie(c.value,(g,_)=>(d(),h("tr",{class:Ve(g.new_value!==g.old_value?"value-changed":"")},[t("td",sx,r(g.field),1),t("td",rx,r(g.old_value),1),t("td",ix,r(g.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(d(),h("div",dx," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},mx=bt(ux,[["__scopeId","data-v-a10644eb"]]),cx=Object.freeze(Object.defineProperty({__proto__:null,default:mx},Symbol.toStringTag,{value:"Module"})),px={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},fx={class:"q-pa-xs"},gx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},bx={key:0},vx={class:"flex justify-end"},Ll="Log Aktifitas Pengguna",_x={__name:"Index",setup(p){const s=pe(),u=we(),o=R(!1),i=R([]),n=R(!0),f=R(null),v=R(null),c=at(v),{protectClick:m}=Ut(),g=Ue({user_id:"all",activity_category:"all",activity_name:"all",search:"",...ze()}),_=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),y=[{value:"all",label:"Semua"},...s.props.users.map(O=>({value:O.id,label:O.username+" - "+O.name}))],$=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_categories).map(([O,A])=>({value:O,label:A}))],V=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_names).map(([O,A])=>({value:O,label:A}))],C=R($),E=R(V),F=(O,A)=>{if(O===""){A(()=>{C.value=$});return}A(()=>{const B=O.toLowerCase();C.value=$.filter(ne=>ne.label.toLowerCase().indexOf(B)>-1)})},T=(O,A)=>{if(O===""){A(()=>{E.value=V});return}A(()=>{const B=O.toLowerCase();E.value=V.filter(ne=>ne.label.toLowerCase().indexOf(B)>-1)})},U=[{name:"id",label:u.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{q()});const P=O=>ot({message:`Hapus log #${O.id}?`,url:route("admin.user-activity-log.delete",O.id),fetchItemsCallback:q,loading:n}),q=(O=null)=>{Fe({pagination:_,filter:g,props:O,rows:i,url:route("admin.user-activity-log.data"),loading:n,tableRef:f})},M=()=>q(),x=m(O=>Y.get(route("admin.user-activity-log.detail",{id:O.id}))),j=Z(()=>u.screen.gt.sm?U:U.filter(O=>O.name==="id"||O.name==="action")),D=()=>{St.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{ft("Seluruh log telah dibersihkan."),q()}).catch(O=>{var B,ne;const A=((ne=(B=O.response)==null?void 0:B.data)==null?void 0:ne.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";pt(A,"bottom"),console.error(O)})})};return(O,A)=>{const B=J("i-head"),ne=J("i-link"),fe=J("authenticated-layout");return d(),h(W,null,[e(B,{title:Ll}),e(fe,null,Be({title:a(()=>[b(r(Ll))]),"right-button":a(()=>[e(N,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=ve=>o.value=!o.value)},null,8,["icon"]),O.$can("admin.user-activity-log.clear")?(d(),I(N,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:D})):k("",!0)]),default:a(()=>[t("div",fx,[e(Ee,{class:"full-height-table",ref_key:"tableRef",ref:f,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":A[7]||(A[7]=ve=>_.value=ve),filter:g.search,loading:n.value,columns:j.value,rows:i.value,"rows-per-page-options":[10,25,50],style:Le({height:l(c)}),onRequest:q,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:ve,message:ue,filter:Oe})=>[t("div",gx,[t("span",null,r(ue)+" "+r(Oe?" with term "+Oe:""),1)])]),body:a(ve=>[e(Pe,{props:ve,class:"cursor-pointer",onClick:G(ue=>l(x)(ve.row,ue),["stop"])},{default:a(()=>[e(Q,{key:"id",props:ve},{default:a(()=>[t("div",null,[l(u).screen.lt.md?(d(),h(W,{key:0},[e(S,{name:"tag",class:"inline-icon"}),A[8]||(A[8]=b(" ID Aktifitas: ",-1))],64)):k("",!0),b(" "+r(ve.row.id),1)]),l(u).screen.lt.md?(d(),h("div",bx,[t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(be)(ve.row.logged_at)),1)]),t("div",null,[e(S,{name:"person",class:"inline-icon"}),e(ne,{onClick:A[5]||(A[5]=G(()=>{},["stop"])),href:O.route("admin.user.detail",{id:ve.row.user_id})},{default:a(()=>[b(r(ve.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(S,{name:"category",class:"inline-icon"}),b(" "+r(ve.row.activity_category_label)+" > "+r(ve.row.activity_name_label),1)]),t("div",null,[e(S,{name:"notes",class:"inline-icon"}),b(" "+r(ve.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"logged_at",props:ve},{default:a(()=>[b(r(l(be)(ve.row.logged_at)),1)]),_:2},1032,["props"]),e(Q,{key:"username",props:ve},{default:a(()=>[e(ne,{onClick:A[6]||(A[6]=G(()=>{},["stop"])),href:O.route("admin.user.detail",{id:ve.row.user_id})},{default:a(()=>[b(r(ve.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(Q,{key:"activity_category",props:ve},{default:a(()=>[b(r(ve.row.activity_category_label),1)]),_:2},1032,["props"]),e(Q,{key:"activity_name",props:ve},{default:a(()=>[b(r(ve.row.activity_name_label),1)]),_:2},1032,["props"]),e(Q,{key:"description",props:ve,class:"wrap-column"},{default:a(()=>[b(r(ve.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:ve},{default:a(()=>[t("div",vx,[O.$can("admin.user-role.delete")?(d(),I(N,{key:0,onClick:G(ue=>P(ve.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:v},{default:a(()=>[t("div",px,[e(ce,{modelValue:g.user_id,"onUpdate:modelValue":[A[1]||(A[1]=ve=>g.user_id=ve),M],class:"custom-select col-xs-12 col-sm-2",options:y,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:g.activity_category,"onUpdate:modelValue":[A[2]||(A[2]=ve=>g.activity_category=ve),M],class:"custom-select col-xs-12 col-sm-2",options:C.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:F,clearable:""},null,8,["modelValue","options"]),e(ce,{modelValue:g.activity_name,"onUpdate:modelValue":[A[3]||(A[3]=ve=>g.activity_name=ve),M],class:"custom-select col-xs-12 col-sm-2",options:E.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:T},null,8,["modelValue","options"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":A[4]||(A[4]=ve=>g.search=ve),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},yx=Object.freeze(Object.defineProperty({__proto__:null,default:_x},Symbol.toStringTag,{value:"Module"})),yn={__name:"UpdatePasswordForm",setup(p){const s=R(!1),u=R(null),o=R(null),i=Qe({current_password:"",password:"",password_confirmation:""}),n=()=>{i.clearErrors(),i.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>i.reset(),onError:()=>{i.errors.password&&(i.reset("password","password_confirmation"),u.value.focus()),i.errors.current_password&&(i.reset("current_password"),o.value.focus())}})};return(f,v)=>(d(),I(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[v[6]||(v[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),v[7]||(v[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(re,{modelValue:l(i).current_password,"onUpdate:modelValue":v[1]||(v[1]=c=>l(i).current_password=c),type:s.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.current_password,"error-message":l(i).errors.current_password,rules:[c=>c&&c.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(N,{dense:"",flat:"",round:"",onClick:v[0]||(v[0]=c=>s.value=!s.value)},{default:a(()=>[e(S,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(re,{modelValue:l(i).password,"onUpdate:modelValue":v[3]||(v[3]=c=>l(i).password=c),type:s.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.password,"error-message":l(i).errors.password,rules:[c=>c&&c.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(N,{dense:"",flat:"",round:"",onClick:v[2]||(v[2]=c=>s.value=!s.value)},{default:a(()=>[e(S,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(re,{modelValue:l(i).password_confirmation,"onUpdate:modelValue":v[5]||(v[5]=c=>l(i).password_confirmation=c),type:s.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.password_confirmation,"error-message":l(i).errors.password_confirmation,rules:[c=>c&&c.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(N,{dense:"",flat:"",round:"",onClick:v[4]||(v[4]=c=>s.value=!s.value)},{default:a(()=>[e(S,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(ae,null,{default:a(()=>[e(N,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},kx=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"})),kn={__name:"UpdateProfileInformationForm",setup(p){const u=pe().props.auth.user,o=Qe({name:u.name,username:u.username,type:window.CONSTANTS.USER_TYPES[u.type]}),i=()=>st({form:o,url:route("admin.user-profile.update")});return(n,f)=>(d(),I(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[f[3]||(f[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),f[4]||(f[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(re,{modelValue:l(o).username,"onUpdate:modelValue":f[0]||(f[0]=v=>l(o).username=v),label:"ID Pengguna",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(re,{modelValue:l(o).name,"onUpdate:modelValue":f[1]||(f[1]=v=>l(o).name=v),modelModifiers:{trim:!0},label:"Nama",disable:l(o).processing,error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[v=>v&&v.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(re,{modelValue:l(o).type,"onUpdate:modelValue":f[2]||(f[2]=v=>l(o).type=v),label:"Jenis Akun",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(ae,null,{default:a(()=>[e(N,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},wx=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"})),hx={class:"q-pa-xs"},$x={class:"row justify-center"},xx={class:"col col-md-6"},Hl="Pengaturan Pribadi",Sx={__name:"Edit",setup(p){return(s,u)=>{const o=J("i-head"),i=J("authenticated-layout");return d(),h(W,null,[e(o,{title:Hl}),e(i,null,{title:a(()=>[b(r(Hl))]),default:a(()=>[t("div",hx,[t("div",$x,[t("div",xx,[e(kn,{class:"q-mb-md"}),e(yn)])])])]),_:1})],64)}}},Vx=Object.freeze(Object.defineProperty({__proto__:null,default:Sx},Symbol.toStringTag,{value:"Module"})),qx={class:"q-gutter-sm"},Cx={class:"col col-md-8"},Tx={class:"q-col-gutter-xs row"},Px={class:"col-xs-12 col-md-5"},Rx={class:"row items-center"},Ox={class:"text-subtite1 text-bold q-mb-sm"},Dx={class:"text-body2"},Ix={class:"text-subtitle2 text-bold text-grey-8 q-my-sm"},Ux={key:0,class:"q-gutter-xs"},jx={key:1,class:"text-grey-8 text-italic"},Ex={class:"col-xs-12 col-md-7"},Ax={class:"row items-center"},Kl="Rincian Peran Pengguna",Mx={__name:"Detail",setup(p){const s=pe(),u=Z(()=>{const o={};return s.props.data.permissions&&s.props.data.permissions.forEach(i=>{const f=i.category.replace("Manajemen ","");o[f]||(o[f]=[]),o[f].push(i)}),o});return(o,i)=>{const n=J("i-head"),f=J("i-link"),v=J("authenticated-layout");return d(),h(W,null,[e(n,{title:Kl}),e(v,null,{title:a(()=>[b(r(Kl))]),"left-button":a(()=>[t("div",qx,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=c=>l(Y).get(o.route("admin.user-role.index")))})])]),"right-button":a(()=>[...i[1]||(i[1]=[])]),default:a(()=>[e(Ce,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",Cx,[t("div",Tx,[t("div",Px,[e(ie,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(ae,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",Rx,[e(S,{name:"assignment_ind",size:"sm",color:"grey-8",class:"q-mr-sm"}),i[2]||(i[2]=t("div",{class:"text-subtite1 text-bold text-grey-8"}," Info Peran ",-1))])]),_:1}),e(ae,null,{default:a(()=>[t("div",Ox,r(l(s).props.data.name),1),i[4]||(i[4]=t("div",{class:"text-subtitle2 text-grey-7"},"Deskripsi:",-1)),t("div",Dx,r(l(s).props.data.description||"Tidak ada deskripsi."),1),t("div",Ix,[e(S,{name:"group",class:"q-mr-xs"}),i[3]||(i[3]=b(" Pengguna Terdaftar ",-1))]),l(s).props.data.users.length>0?(d(),h("div",Ux,[(d(!0),h(W,null,Ie(l(s).props.data.users,c=>(d(),I(f,{key:c.id,href:o.route("admin.user.detail",{id:c.id}),style:{"text-decoration":"none"}},{default:a(()=>[e(Jt,{clickable:"","text-color":"primary",color:"grey-3"},{default:a(()=>[b(r(c.username),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])):(d(),h("div",jx," Belum ada akun pengguna yang terdaftar. "))]),_:1})]),_:1})]),t("div",Ex,[e(ie,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(ae,{class:"bg-grey-3 q-py-sm"},{default:a(()=>[t("div",Ax,[e(S,{name:"security",size:"sm",color:"grey-8",class:"q-mr-sm"}),i[5]||(i[5]=t("div",{class:"text-subtite1 text-grey-8 text-bold"}," Daftar Hak Akses ",-1))])]),_:1}),l(s).props.data.permissions.length>0?(d(),I(ae,{key:0,class:"q-pa-none"},{default:a(()=>[e(je,{bordered:"",separator:""},{default:a(()=>[(d(!0),h(W,null,Ie(u.value,(c,m)=>(d(),I(kt,{key:m,label:m,"header-class":"text-bold bg-grey-1 text-grey-7","default-opened":""},{default:a(()=>[e(ae,{class:"q-py-sm"},{default:a(()=>[t("div",null,[(d(!0),h(W,null,Ie(c,g=>(d(),I(Jt,{key:g.id,color:"grey-2","text-color":"grey-9",size:"sm"},{default:a(()=>[b(r(g.label),1)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})):(d(),I(ae,{key:1},{default:a(()=>[...i[6]||(i[6]=[t("div",{class:"text-grey-7 text-italic"}," Belum ada hak akses yang ditetapkan. ",-1)])]),_:1}))]),_:1})])])])]),_:1})]),_:1})],64)}}},Nx=bt(Mx,[["__scopeId","data-v-7dee658a"]]),Bx=Object.freeze(Object.defineProperty({__proto__:null,default:Nx},Symbol.toStringTag,{value:"Module"})),zx={class:"q-gutter-sm"},Fx={class:"col col-md-6 q-pa-xs"},Lx={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},Hx={__name:"Editor",setup(p){const s=pe(),u=(s.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=Qe({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description,permissions:s.props.data.permissions?s.props.data.permissions.map(f=>f.id):[]}),i=()=>st({form:o,url:route("admin.user-role.save")}),n=Z(()=>{const f={};return s.props.permissions&&s.props.permissions.forEach(v=>{const c=v.category;f[c]||(f[c]=[]),f[c].push(v)}),f});return(f,v)=>{const c=J("i-head"),m=J("authenticated-layout");return d(),h(W,null,[e(c,{title:u}),e(m,null,{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",zx,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=g=>l(Y).get(f.route("admin.user-role.index")))})])]),"right-button":a(()=>[e(N,{icon:"save",label:"Simpan",color:"primary",disable:l(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:G(i,["prevent"])},null,8,["disable"])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",Fx,[e(Je,{class:"row",onSubmit:G(i,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=g=>l(o).id=g)},null,512),[[wt,l(o).id]]),e(re,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":v[2]||(v[2]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(o).description,"onUpdate:modelValue":v[3]||(v[3]=g=>l(o).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(d(!0),h(W,null,Ie(n.value,(g,_)=>(d(),h("div",{key:_},[t("div",Lx,r(_),1),(d(!0),h(W,null,Ie(g,y=>(d(),h("div",{key:y.id},[e(oa,{class:"q-ma-none q-pa-none list-checkbox",modelValue:l(o).permissions,"onUpdate:modelValue":$=>l(o).permissions=$,val:y.id,label:y.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Kx=bt(Hx,[["__scopeId","data-v-8b35322b"]]),Yx=Object.freeze(Object.defineProperty({__proto__:null,default:Kx},Symbol.toStringTag,{value:"Module"})),Wx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Qx={class:"q-pa-xs"},Jx={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Gx={class:"flex justify-end"},Yl="Peran Pengguna",Xx={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Ue({search:"",...ze()}),m=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Peran",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];he(()=>{y()});const _=F=>ot({message:`Hapus role ${F.name}?`,url:route("admin.user-role.delete",F.id),fetchItemsCallback:y,loading:i}),y=(F=null)=>{Fe({pagination:m,filter:c,props:F,rows:o,url:route("admin.user-role.data"),loading:i,tableRef:n})},$=F=>Y.get(route("admin.user-role.detail",{id:F.id})),{protectClick:V}=Ut(),C=V($),E=Z(()=>s.screen.gt.sm?g:g.filter(F=>F.name==="name"||F.name==="action"));return(F,T)=>{const U=J("i-head"),P=J("authenticated-layout");return d(),h(W,null,[e(U,{title:Yl}),e(P,null,Be({title:a(()=>[b(r(Yl))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=q=>u.value=!u.value)},null,8,["icon"]),F.$can("admin.user-role.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:T[1]||(T[1]=q=>l(Y).get(F.route("admin.user-role.add")))})):k("",!0)]),default:a(()=>[t("div",Qx,[e(Ee,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":T[4]||(T[4]=q=>m.value=q),filter:c.search,loading:i.value,columns:E.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Le({height:l(v)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:M,filter:w})=>[t("div",Jx,[t("span",null,r(M)+" "+r(w?" with term "+w:""),1)])]),body:a(q=>[e(Pe,{props:q,class:"cursor-pointer",onClick:G(M=>l(C)(q.row,M),["stop"])},{default:a(()=>[e(Q,{key:"name",props:q,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),I(S,{key:0,name:"person"})):k("",!0),b(" "+r(q.row.name),1)])]),_:2},1032,["props"]),e(Q,{key:"description",props:q,class:"wrap-column"},{default:a(()=>[b(r(q.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:q},{default:a(()=>[t("div",Gx,[F.$can("admin.user-role.add")||F.$can("admin.user-role.edit")||F.$can("admin.user-role.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:T[3]||(T[3]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[F.$can("admin.user-role.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(M=>l(Y).get(F.route("admin.user-role.duplicate",q.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>[...T[5]||(T[5]=[b(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),F.$can("admin.user-role.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(M=>l(Y).get(F.route("admin.user-role.edit",q.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...T[6]||(T[6]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),F.$can("admin.user-role.delete")?te((d(),I(oe,{key:2,onClick:G(M=>_(q.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...T[7]||(T[7]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Wx,[e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":T[2]||(T[2]=q=>c.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Zx=Object.freeze(Object.defineProperty({__proto__:null,default:Xx},Symbol.toStringTag,{value:"Module"})),eS={class:"q-gutter-sm"},tS={class:"q-gutter-sm"},aS={class:"row justify-center"},lS={class:"col col-md-6 q-pa-xs"},oS={class:"row"},nS={class:"row items-center justify-between"},sS={class:"text-subtitle1 text-bold text-grey-9"},rS={class:"q-gutter-xs"},Wl="Rincian Pengguna",iS={__name:"Detail",setup(p){const s=pe(),u=Z(()=>s.props.data),o=Z(()=>u.value.active?"positive":"negative"),i=Z(()=>u.value.active?"Aktif":"Tidak Aktif");return(n,f)=>{const v=J("i-head"),c=J("i-link"),m=J("authenticated-layout");return d(),h(W,null,[e(v,{title:Wl}),e(m,{"show-drawer-button":!0},{title:a(()=>[b(r(Wl))]),"left-button":a(()=>[t("div",eS,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=g=>n.$inertia.get(n.route("admin.user.index")))})])]),"right-button":a(()=>[t("div",tS,[n.$can("admin.user.edit")&&l(s).props.data.id!=l(s).props.auth.user.id?(d(),I(N,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:f[1]||(f[1]=g=>n.$inertia.get(n.route("admin.user.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[t("div",aS,[t("div",lS,[t("div",oS,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",nS,[t("div",sS,[e(S,{name:"person",class:"q-mr-xs",size:"sm"}),f[2]||(f[2]=b(" Profil Pengguna ",-1))]),e(rt,{color:o.value,label:i.value,class:"q-pa-xs"},null,8,["color","label"])])]),_:1}),e(je,null,{default:a(()=>[e(oe,{class:"bg-white"},{default:a(()=>[e(z,null,{default:a(()=>[e(ge,{caption:""},{default:a(()=>[...f[3]||(f[3]=[b("Nama Pengguna",-1)])]),_:1}),e(ge,{class:"text-subtitle1 text-bold"},{default:a(()=>[b(r(u.value.name),1)]),_:1})]),_:1})]),_:1}),e(oe,null,{default:a(()=>[e(z,null,{default:a(()=>[e(ge,{caption:""},{default:a(()=>[...f[4]||(f[4]=[b("ID Pengguna",-1)])]),_:1}),e(ge,null,{default:a(()=>[b(r(u.value.username),1)]),_:1})]),_:1})]),_:1}),e(oe,null,{default:a(()=>[e(z,null,{default:a(()=>[e(ge,{caption:""},{default:a(()=>[...f[5]||(f[5]=[b("Jenis Akun",-1)])]),_:1}),e(ge,null,{default:a(()=>[b(r(n.$CONSTANTS.USER_TYPES[u.value.type]),1)]),_:1})]),_:1})]),_:1}),u.value.roles.length>0?(d(),I(oe,{key:0},{default:a(()=>[e(z,null,{default:a(()=>[e(ge,{caption:""},{default:a(()=>[...f[6]||(f[6]=[b("Peran Pengguna",-1)])]),_:1}),e(ge,null,{default:a(()=>[t("div",rS,[(d(!0),h(W,null,Ie(u.value.roles,g=>(d(),I(c,{key:g.id,href:n.route("admin.user-role.detail",{id:g.id}),style:{"text-decoration":"none"}},{default:a(()=>[e(Jt,{clickable:"",icon:"military_tech",size:"sm"},{default:a(()=>[b(r(g.name),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])]),_:1})]),_:1})]),_:1})):k("",!0),e(oe,null,{default:a(()=>[e(z,null,{default:a(()=>[e(ge,{caption:""},{default:a(()=>[...f[7]||(f[7]=[b("Informasi Rekaman",-1)])]),_:1}),u.value.created_at?(d(),I(ge,{key:0},{default:a(()=>{var g,_;return[b(" Dibuat "+r(l(be)(u.value.created_at))+" oleh ",1),t("span",null,r(((g=u.value.creator)==null?void 0:g.name)??"Sistem")+" ("+r(((_=u.value.creator)==null?void 0:_.username)??"system")+")",1)]}),_:1})):k("",!0),u.value.updated_at?(d(),I(ge,{key:1},{default:a(()=>[b(" Diperbarui "+r(l(be)(u.value.updated_at))+" ",1),u.value.updater?(d(),h(W,{key:0},[f[8]||(f[8]=b(" oleh ",-1)),t("span",null,r(u.value.updater.name)+" ("+r(u.value.updater.username)+")",1)],64)):k("",!0)]),_:1})):k("",!0)]),_:1})]),_:1}),e(oe,null,{default:a(()=>[e(z,null,{default:a(()=>[e(ge,{caption:""},{default:a(()=>[...f[9]||(f[9]=[b("Aktifitas",-1)])]),_:1}),e(ge,null,{default:a(()=>[e(S,{class:"inline-icon",name:"login"}),b(" "+r(u.value.last_login_datetime?"Terakhir login pada "+l(be)(u.value.last_login_datetime):"Belum pernah login"),1)]),_:1}),u.value.last_activity_datetime?(d(),I(ge,{key:0},{default:a(()=>[e(S,{class:"inline-icon",name:"calendar_today"}),b(" "+r(l(be)(u.value.last_activity_datetime))+" - "+r(u.value.last_activity_description),1)]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])])])]),_:1})],64)}}},dS=Object.freeze(Object.defineProperty({__proto__:null,default:iS},Symbol.toStringTag,{value:"Module"}));function uS(p){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(p)}const mS={class:"q-gutter-sm"},cS={class:"row justify-center"},pS={class:"col col-md-6 q-pa-xs"},fS={__name:"Editor",setup(p){const s=Ne(window.CONSTANTS.USER_TYPES),u=pe(),o=u.props.roles,i=u.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=R(!u.props.data.id),f=u.props.data.roles,v=Array.isArray(f)?f.map(g=>g.id):[],c=Qe({id:u.props.data.id,name:u.props.data.name,username:u.props.data.username,password:u.props.data.id?null:"12345",type:u.props.data.type?u.props.data.type:s[0].value,active:!!u.props.data.active,roles:v}),m=()=>st({form:c,url:route("admin.user.save")});return(g,_)=>{const y=J("i-head"),$=J("authenticated-layout");return d(),h(W,null,[e(y,{title:l(i)},null,8,["title"]),e($,{"show-drawer-button":!0},{title:a(()=>[b(r(l(i)),1)]),"left-button":a(()=>[t("div",mS,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=V=>l(Y).get(g.route("admin.user.index")))})])]),default:a(()=>[t("div",cS,[t("div",pS,[e(Je,{class:"row",onSubmit:G(m,["prevent"])},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=V=>l(c).id=V)},null,512),[[wt,l(c).id]]),e(re,{autofocus:"",modelValue:l(c).username,"onUpdate:modelValue":_[2]||(_[2]=V=>l(c).username=V),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:l(c).processing,error:!!l(c).errors.username,"error-message":l(c).errors.username,rules:[V=>V&&V.length>0||"Username harus diisi.",V=>l(uS)(V)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(re,{modelValue:l(c).name,"onUpdate:modelValue":_[3]||(_[3]=V=>l(c).name=V),modelModifiers:{trim:!0},label:"Nama",error:!!l(c).errors.name,disable:l(c).processing,"error-message":l(c).errors.name,rules:[V=>V&&V.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(c).password,"onUpdate:modelValue":_[5]||(_[5]=V=>l(c).password=V),label:"Kata Sandi","lazy-rules":"",disable:l(c).processing,error:!!l(c).errors.password,"error-message":l(c).errors.password,"hide-bottom-space":"",type:n.value?"text":"password"},{append:a(()=>[e(N,{dense:"",flat:"",round:"",onClick:_[4]||(_[4]=V=>n.value=!n.value)},{default:a(()=>[e(S,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","disable","error","error-message","type"]),e(ce,{modelValue:l(c).type,"onUpdate:modelValue":_[6]||(_[6]=V=>l(c).type=V),label:"Jenis Akun",options:l(s),"map-options":"","emit-value":"","lazy-rules":"",disable:l(c).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(c).errors.type,"error-message":l(c).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),l(c).type=="standard_user"?(d(),I(ce,{key:0,modelValue:l(c).roles,"onUpdate:modelValue":_[7]||(_[7]=V=>l(c).roles=V),label:"Peran",options:l(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:l(c).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(c).errors.roles||!!l(c).errors["roles.0"],"error-message":l(c).errors.roles||l(c).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(fa,{modelValue:l(c).active,"onUpdate:modelValue":_[8]||(_[8]=V=>l(c).active=V),disable:l(c).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(c).processing,onClick:m},null,8,["disable"]),e(N,{icon:"cancel",label:"Batal",class:"text-black",disable:l(c).processing,onClick:_[9]||(_[9]=V=>l(Y).get(g.route("admin.user.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},gS=Object.freeze(Object.defineProperty({__proto__:null,default:fS},Symbol.toStringTag,{value:"Module"})),bS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},vS={class:"q-pa-xs"},_S={class:"full-width row flex-center text-grey-8 q-gutter-sm"},yS={key:0},kS={class:"flex justify-end"},Ql="Pengguna",wS={__name:"Index",setup(p){const s=[{value:"all",label:"Semua"},...Ne(window.CONSTANTS.USER_TYPES)],u=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=pe(),i=we(),n=o.props.auth.user,f=R([]),v=R(!0),c=R(!1),m=Ue({type:"all",roles:[],status:"active",search:""}),g=o.props.roles.map(w=>({value:w.id,label:w.name})),_=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),y=[{name:"username",label:i.screen.gt.sm?"ID Pengguna":"Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];he(()=>{V()});const $=()=>V(),V=(w=null)=>Fe({pagination:_,props:w,rows:f,loading:v,filter:m,url:route("admin.user.data"),tableRef:P}),C=w=>ot({url:route("admin.user.delete",w.id),message:`Hapus pengguna ${w.username}?`,fetchItemsCallback:V,loading:v}),E=Z(()=>i.screen.gt.sm?y:y.filter(w=>w.name==="username"||w.name==="action")),F=w=>Y.get(route("admin.user.detail",w.id)),{protectClick:T}=Ut(),U=T(F),P=R(null),q=R(null),M=at(q);return(w,x)=>{const j=J("i-head"),D=J("authenticated-layout");return d(),h(W,null,[e(j,{title:Ql}),e(D,null,Be({title:a(()=>[b(r(Ql))]),"right-button":a(()=>[e(N,{icon:c.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:x[0]||(x[0]=O=>c.value=!c.value)},null,8,["icon"]),w.$can("admin.user.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:x[1]||(x[1]=O=>l(Y).get(w.route("admin.user.add")))})):k("",!0)]),default:a(()=>[t("div",vS,[e(Ee,{ref_key:"tableRef",ref:P,class:"full-height-table",style:Le({height:l(M)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":x[7]||(x[7]=O=>_.value=O),filter:m.search,loading:v.value,columns:E.value,rows:f.value,"rows-per-page-options":[10,25,50],onRequest:V,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:O,message:A,term:B})=>[t("div",_S,[t("span",null,r(A)+" "+r(B?" with term "+B:""),1)])]),body:a(O=>[e(Pe,{props:O,class:Ve([O.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(A=>l(U)(O.row,A),["stop"])},{default:a(()=>[e(Q,{key:"username",props:O},{default:a(()=>[t("div",null,[l(i).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[],64)),b(" "+r(O.row.username),1)]),l(i).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[t("div",null,r(O.row.name),1),e(rt,{color:O.row.type=="super_user"?"red":"primary"},{default:a(()=>[b(r(w.$CONSTANTS.USER_TYPES[O.row.type]),1)]),_:2},1032,["color"]),O.row.roles.length>0?(d(),h("div",yS,r(O.row.roles.map(A=>A.name).join(",")),1)):k("",!0)],64))]),_:2},1032,["props"]),e(Q,{key:"name",props:O},{default:a(()=>[b(r(O.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"role",props:O,align:"center"},{default:a(()=>[t("span",null,r(w.$CONSTANTS.USER_TYPES[O.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:O},{default:a(()=>[t("div",kS,[w.$can("admin.user.add")||w.$can("admin.user.edit")||w.$can("admin.user.delete")?(d(),I(N,{key:0,disable:O.row.id==l(n).id||O.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:x[6]||(x[6]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[w.$can("admin.user.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(A=>l(Y).get(w.route("admin.user.duplicate",O.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>[...x[8]||(x[8]=[b(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),w.$can("admin.user.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(A=>l(Y).get(w.route("admin.user.edit",O.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...x[9]||(x[9]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),w.$can("admin.user.delete")?te((d(),I(oe,{key:2,onClick:G(A=>C(O.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...x[10]||(x[10]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[c.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:q},{default:a(()=>[t("div",bS,[e(ce,{modelValue:m.type,"onUpdate:modelValue":[x[2]||(x[2]=O=>m.type=O),$],class:"custom-select col-xs-12 col-sm-2",options:s,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:m.status,"onUpdate:modelValue":[x[3]||(x[3]=O=>m.status=O),$],class:"custom-select col-xs-12 col-sm-2",options:u,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:m.roles,"onUpdate:modelValue":[x[4]||(x[4]=O=>m.roles=O),$],class:"custom-select col-xs-12 col-sm-2",options:l(g),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":x[5]||(x[5]=O=>m.search=O),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},hS=Object.freeze(Object.defineProperty({__proto__:null,default:wS},Symbol.toStringTag,{value:"Module"})),$S={class:"q-gutter-sm"},xS={class:"col col-lg-6 q-pa-xs"},SS={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},VS={class:"row q-col-gutter-sm q-mb-md"},qS={key:0},CS={class:"text-bold"},TS={key:0},PS={class:"text-caption text-grey-8"},RS={key:1},Jl="Buat Penyesuaian Stok",OS={__name:"Create",setup(p){const s=pe(),u=R(!1),o=s.props.products,{filteredCategories:i,filterCategories:n}=ba(s.props.categories),{filteredSuppliers:f,filterSupplierFn:v}=va(s.props.suppliers),c=R({search:null,category_id:null,supplier_id:null}),m=R([]),g=Qe({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),_=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(F,T)=>L(F)+" "+T.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],y=Ne(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),$=Z(()=>o.filter(F=>{let T=!0;if(u.value&&!m.value.find(U=>U.id===F.id))return!1;if(c.value.search){const U=c.value.search.toLowerCase();T=F.name.toLowerCase().includes(U)||F.description.toLowerCase().includes(U)||F.barcode&&F.barcode.toLowerCase().includes(U)}return T&&c.value.category_id&&(T=F.category_id===c.value.category_id),T&&c.value.supplier_id&&(T=F.supplier_id===c.value.supplier_id),T})),V=()=>{St.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{g.product_ids=m.value.map(F=>F.id),sa(g,{datetime:"YYYY-MM-DD HH:mm:ss"}),st({form:g,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},C=we(),E=Z(()=>C.screen.gt.sm?_:_.filter(F=>F.name==="name"));return(F,T)=>{const U=J("i-head"),P=J("authenticated-layout");return d(),h(W,null,[e(U,{title:Jl}),e(P,{"show-drawer-button":!0},{title:a(()=>[b(r(Jl))]),"left-button":a(()=>[t("div",$S,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:T[0]||(T[0]=q=>l(Y).get(F.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[e(N,{icon:"cancel",disable:l(g).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:T[1]||(T[1]=q=>l(Y).get(F.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(N,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:l(g).processing||m.value.length==0,class:"q-ml-sm",onClick:V},null,8,["disable"])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",xS,[e(Je,{class:"row",onSubmit:G(V,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-sm"},{default:a(()=>{var q,M,w;return[T[10]||(T[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Xe,{modelValue:l(g).datetime,"onUpdate:modelValue":T[2]||(T[2]=x=>l(g).datetime=x),label:"Waktu",error:!!l(g).errors.datetime,disable:l(g).processing,"error-message":l(g).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:l(g).type,"onUpdate:modelValue":T[3]||(T[3]=x=>l(g).type=x),options:l(y),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(g).errors.type,disable:l(g).processing,"map-options":"","emit-value":"","error-message":l(g).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(re,{modelValue:l(g).notes,"onUpdate:modelValue":T[4]||(T[4]=x=>l(g).notes=x),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(g).processing,error:!!l(g).errors.notes,"error-message":l(g).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),m.value.length===0||(q=l(s).props.errors)!=null&&q.product_ids?(d(),h("div",SS,[m.value.length===0?(d(),h(W,{key:0},[b(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(M=l(s).props.errors)!=null&&M.product_ids?(d(),h(W,{key:1},[b(r((w=l(s).props.errors)==null?void 0:w.product_ids),1)],64)):k("",!0)])):k("",!0),T[11]||(T[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",VS,[e(re,{modelValue:c.value.search,"onUpdate:modelValue":T[5]||(T[5]=x=>c.value.search=x),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(ce,{modelValue:c.value.category_id,"onUpdate:modelValue":T[6]||(T[6]=x=>c.value.category_id=x),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(i),"map-options":"",dense:"","emit-value":"",onFilter:l(n),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(ce,{modelValue:c.value.supplier_id,"onUpdate:modelValue":T[7]||(T[7]=x=>c.value.supplier_id=x),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(f),"map-options":"",dense:"","emit-value":"",onFilter:l(v),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:T[8]||(T[8]=x=>u.value=!u.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},r(u.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:E.value,rows:$.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:m.value,"onUpdate:selected":T[9]||(T[9]=x=>m.value=x)},{"body-cell-name":a(x=>[e(Q,{props:x},{default:a(()=>[l(C).screen.lt.md?(d(),h("div",qS,[t("div",CS,r(x.row.name),1),x.row.category?(d(),h("div",TS,r(x.row.category.name),1)):k("",!0),t("div",PS,r(l(L)(x.row.stock))+" "+r(x.row.uom),1)])):(d(),h("div",RS,r(x.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},DS=Object.freeze(Object.defineProperty({__proto__:null,default:OS},Symbol.toStringTag,{value:"Module"})),IS={class:"q-gutter-sm"},US={class:"q-gutter-sm"},jS={class:"row justify-center"},ES={class:"col col-lg-8 q-pa-sm"},AS={class:"row"},MS={class:"detail"},NS={key:0},BS={key:1},zS={class:"text-grey-9"},FS={__name:"Detail",setup(p){const s=pe(),u=`Rincian #${s.props.data.code}`,o=s.props.details,i=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:c=>L(c)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:c=>L(c)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:c=>L(c)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],n=we(),f=Z(()=>n.screen.gt.sm?i:i.filter(c=>c.name==="no")),v=()=>{window.open(route("admin.stock-adjustment.print",{id:s.props.data.id}),"_blank")};return(c,m)=>{const g=J("i-head"),_=J("i-link"),y=J("authenticated-layout");return d(),h(W,null,[e(g,{title:u}),e(y,{"show-drawer-button":!0},{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",IS,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[0]||(m[0]=$=>c.$inertia.get(c.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[t("div",US,[e(N,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:m[1]||(m[1]=$=>v())})])]),default:a(()=>[t("div",jS,[t("div",ES,[t("div",AS,[e(ie,{square:"",flat:"",bordered:"",class:"q-card col"},{default:a(()=>[e(ae,null,{default:a(()=>[m[22]||(m[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",MS,[t("tbody",null,[t("tr",null,[m[2]||(m[2]=t("td",{style:{width:"120px"}},"Kode",-1)),m[3]||(m[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+r(l(s).props.data.code),1)]),t("tr",null,[m[4]||(m[4]=t("td",null,"Jenis",-1)),m[5]||(m[5]=t("td",null,":",-1)),t("td",null,r(c.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[l(s).props.data.type]),1)]),t("tr",null,[m[6]||(m[6]=t("td",null,"Status",-1)),m[7]||(m[7]=t("td",null,":",-1)),t("td",null,r(c.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[m[8]||(m[8]=t("td",null,"Waktu",-1)),m[9]||(m[9]=t("td",null,":",-1)),t("td",null,r(l(be)(l(s).props.data.datetime)),1)]),l(s).props.data.created_at?(d(),h("tr",NS,[m[11]||(m[11]=t("td",null,"Dibuat Oleh",-1)),m[12]||(m[12]=t("td",null,":",-1)),t("td",null,[l(s).props.data.creator?(d(),h(W,{key:0},[e(_,{href:c.route("admin.user.detail",{id:l(s).props.data.creator})},{default:a(()=>[b(r(l(s).props.data.creator.username)+" - "+r(l(s).props.data.creator.name),1)]),_:1},8,["href"]),m[10]||(m[10]=b(" - ",-1))],64)):k("",!0),b(" "+r(l(be)(l(s).props.data.created_at)),1)])])):k("",!0),l(s).props.data.updater?(d(),h("tr",BS,[m[14]||(m[14]=t("td",null,"Diperbarui oleh",-1)),m[15]||(m[15]=t("td",null,":",-1)),t("td",null,[l(s).props.data.updater?(d(),h(W,{key:0},[e(_,{href:c.route("admin.user.detail",{id:l(s).props.data.updater})},{default:a(()=>[b(r(l(s).props.data.updater.username)+" - "+r(l(s).props.data.updater.name),1)]),_:1},8,["href"]),m[13]||(m[13]=b(" - ",-1))],64)):k("",!0),b(" "+r(l(be)(l(s).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[m[16]||(m[16]=t("td",null,"Total Modal",-1)),m[17]||(m[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:Ve(l(s).props.data.total_cost<0?"text-red-10":l(s).props.data.total_cost>0?"text-green-10":"")},r(l(aa)(l(s).props.data.total_cost)),3)])]),t("tr",null,[m[18]||(m[18]=t("td",null,"Total Harga",-1)),m[19]||(m[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:Ve(l(s).props.data.total_price<0?"text-red-10":l(s).props.data.total_price>0?"text-green-10":"")},r(l(aa)(l(s).props.data.total_price)),3)])]),t("tr",null,[m[20]||(m[20]=t("td",null,"Catatan",-1)),m[21]||(m[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)])])])]),_:1}),e(ae,null,{default:a(()=>[m[28]||(m[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Ee,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:f.value,rows:l(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":a($=>[e(Q,{props:$},{default:a(()=>[l(n).screen.lt.md?(d(),h(W,{key:1},[t("div",zS,[t("b",null,"#"+r($.rowIndex+1),1),m[23]||(m[23]=b(" - ",-1)),e(_,{href:c.route("admin.product.detail",{id:$.row.product_id})},{default:a(()=>[b(r($.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[b(" Stok Lama: "+r(l(L)($.row.old_quantity))+" "+r($.row.uom),1),m[25]||(m[25]=t("br",null,null,-1)),b(" Stok Baru: "+r(l(L)($.row.new_quantity))+" "+r($.row.uom),1),m[26]||(m[26]=t("br",null,null,-1)),t("div",{class:Ve($.row.balance<0?"text-red-10":$.row.balance>0?"text-green-10":"")},[b(" Selisih: "+r(($.row.balance>0?"+":"")+l(L)($.row.balance))+" "+r($.row.uom),1),m[24]||(m[24]=t("br",null,null,-1)),b(" (Rp. "+r(l(L)($.row.subtotal_cost))+" / Rp. "+r(l(L)($.row.subtotal_price))+") ",1)],2),m[27]||(m[27]=t("br",null,null,-1)),b(" "+r($.row.notes),1)])],64)):(d(),h(W,{key:0},[b(r($.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":a($=>[e(Q,{props:$},{default:a(()=>[e(_,{href:c.route("admin.product.detail",{id:$.row.product_id})},{default:a(()=>[b(r($.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":a($=>[e(Q,{props:$},{default:a(()=>[t("div",{class:Ve($.row.balance<0?"text-red-10":$.row.balance>0?"text-green-10":"")},r(($.row.balance>0?"+":"")+l(L)($.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":a($=>[e(Q,{props:$},{default:a(()=>[t("div",{class:Ve($.row.balance<0?"text-red-10":$.row.balance>0?"text-green-10":"")},r(l(L)($.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":a($=>[e(Q,{props:$},{default:a(()=>[t("div",{class:Ve($.row.balance<0?"text-red-10":$.row.balance>0?"text-green-10":"")},r(l(L)($.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},LS=Object.freeze(Object.defineProperty({__proto__:null,default:FS},Symbol.toStringTag,{value:"Module"})),HS={class:"q-gutter-sm"},KS={class:"col col-lg-6 q-pa-xs"},YS={class:"text-bold"},WS={key:0},QS={class:"text-caption text-grey-8"},Gl="Penyesuaian Stok",JS={__name:"Editor",setup(p){const s=we(),u=pe(),o=Qe({id:u.props.item.id,type:u.props.item.type,datetime:new Date(u.props.item.datetime),notes:u.props.item.notes,action:"save",details:[]}),i=Ne(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),n=R(u.props.details.map(g=>(typeof g.new_quantity=="string"&&(g.new_quantity=parseFloat(g.new_quantity)),g))),f=g=>{const _=()=>{o.action=g,o.details=n.value.map(y=>({id:y.id,new_quantity:y.new_quantity})),sa(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),st({form:o,url:route("admin.stock-adjustment.save")})};g==="close"||g==="cancel"?St.create({title:"Konfirmasi",message:g==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{_()}).onCancel(()=>{}):_()},v=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:g=>L(g)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:g=>L(g)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(g,_)=>L(_.new_quantity-_.old_quantity)}],c=Z(()=>s.screen.gt.sm?v:v.filter(g=>g.name==="product_name"||g.name==="new_quantity")),m=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(g,_)=>{const y=J("i-head"),$=J("authenticated-layout");return d(),h(W,null,[e(y,{title:Gl}),e($,{"show-drawer-button":!0},{title:a(()=>[b(r(Gl))]),"left-button":a(()=>[t("div",HS,[l(s).screen.gt.sm?(d(),I(N,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=V=>g.$inertia.get(g.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":a(()=>[e(N,{icon:"save",onClick:_[1]||(_[1]=V=>f("save")),disable:l(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(N,{icon:"check",onClick:_[2]||(_[2]=V=>f("close")),disable:l(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),g.$can("admin.product.import")||g.$can("admin.product:view-cost")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:_[5]||(_[5]=G(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",onClick:_[3]||(_[3]=V=>m())},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"print"})]),_:1}),e(z,null,{default:a(()=>[..._[10]||(_[10]=[b(" Cetak Kartu Stok",-1)])]),_:1})]),_:1})),[[se],[me]]),te((d(),I(oe,{clickable:"",onClick:_[4]||(_[4]=G(V=>f("cancel"),["stop"]))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"cancel",color:"red"})]),_:1}),e(z,{class:"text-red"},{default:a(()=>[..._[11]||(_[11]=[b("Batalkan",-1)])]),_:1})]),_:1})),[[se],[me]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",KS,[e(Je,{class:"row",onSubmit:G(f,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,null,{default:a(()=>[..._[12]||(_[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])]),_:1}),e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[6]||(_[6]=V=>l(o).id=V)},null,512),[[wt,l(o).id]]),e(Xe,{modelValue:l(o).datetime,"onUpdate:modelValue":_[7]||(_[7]=V=>l(o).datetime=V),label:"Waktu",error:!!l(o).errors.datetime,disable:l(o).processing,"error-message":l(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":_[8]||(_[8]=V=>l(o).type=V),options:l(i),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(o).errors.type,disable:l(o).processing,"map-options":"","emit-value":"","error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(re,{modelValue:l(o).notes,"onUpdate:modelValue":_[9]||(_[9]=V=>l(o).notes=V),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ae,{class:"q-pa-xs"},{default:a(()=>[e(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:c.value,rows:n.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":a(V=>[e(Q,{props:V},{default:a(()=>[t("div",YS,r(V.row.product_name),1),l(s).screen.lt.md?(d(),h("div",WS,[t("div",QS,[b(" Tercatat: "+r(l(L)(V.row.old_quantity))+" ",1),_[13]||(_[13]=t("br",null,null,-1)),b(" Selisih: "+r(l(L)(V.row.new_quantity-V.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":a(V=>[e(Q,{props:V,class:"text-center"},{default:a(()=>[e(Me,{modelValue:V.row[V.col.name],"onUpdate:modelValue":C=>V.row[V.col.name]=C,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},GS=Object.freeze(Object.defineProperty({__proto__:null,default:JS},Symbol.toStringTag,{value:"Module"}));function XS(){const p=Ot();if(!p)throw new Error("useCan must be called within a component setup function.");return s=>p.proxy.$can(s)}const ZS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},eV={class:"q-pa-xs"},tV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},aV={key:0,class:"flex q-gutter-xs"},lV={class:"flex q-col-gutter-xs"},oV={key:0},nV={key:1},sV={key:0},rV={class:"flex justify-end"},Xl="Penyesuaian Stok",iV={__name:"Index",setup(p){const s=R([]),u=R(!0),o=R(!1),i=R(null),n=R(null),f=at(n),v=Re().startOf("month").toDate(),c=Re().endOf("month").toDate(),m=Ue({search:"",start_date:v,end_date:c,status:"all",type:"all",...ze()}),g=[{value:"all",label:"Semua"},...Ne(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],_=[{value:"all",label:"Semua"},...Ne(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],y=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),$=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];he(()=>{C()});const V=M=>ot({message:`Hapus Penyesuaian Stok #${M.code}?`,url:route("admin.stock-adjustment.delete",M.id),fetchItemsCallback:C,loading:u}),C=(M=null)=>{const w={...m,start_date:Re(m.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Re(m.end_date).format("YYYY-MM-DD HH:mm:ss")};Fe({pagination:y,filter:w,props:M,rows:s,url:route("admin.stock-adjustment.data"),loading:u,tableRef:i})},E=()=>{C()},F=M=>{M.status=="draft"?Y.get(route("admin.stock-adjustment.editor",M.id)):Y.get(route("admin.stock-adjustment.detail",M.id))},{protectClick:T}=Ut(),U=T(F),P=we(),q=Z(()=>{let M=$;return XS()||(M=M.filter(w=>w.name!=="cost")),P.screen.gt.sm?M:M.filter(w=>w.name==="id"||w.name==="action")});return(M,w)=>{const x=J("i-head"),j=J("authenticated-layout");return d(),h(W,null,[e(x,{title:Xl}),e(j,null,Be({"right-button":a(()=>[e(N,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=D=>o.value=!o.value)},null,8,["icon"]),M.$can("admin.stock-adjustment.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=D=>l(Y).get(M.route("admin.stock-adjustment.create")))})):k("",!0)]),title:a(()=>[b(r(Xl))]),default:a(()=>[t("div",eV,[e(Ee,{ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:y.value,"onUpdate:pagination":w[8]||(w[8]=D=>y.value=D),filter:m.search,loading:u.value,columns:q.value,rows:s.value,"rows-per-page-options":[10,25,50],style:Le({height:l(f)}),onRequest:C,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:D,message:O,filter:A})=>[t("div",tV,[t("span",null,r(O)+" "+r(A?" with term "+A:""),1)])]),body:a(D=>[e(Pe,{props:D,onClick:G(O=>l(U)(D.row,O),["stop"]),class:"cursor-pointer"},{default:a(()=>[e(Q,{key:"id",props:D},{default:a(()=>[l(P).screen.lt.md?(d(),h(W,{key:1},[t("div",lV,[t("div",null,"#"+r(D.row.code),1),t("div",null,[e(S,{name:"history"}),b(" "+r(l(be)(D.row.datetime)),1)]),e(Jt,{dense:"",size:"sm",color:D.row.status==="draft"?"orange":D.row.status==="closed"?"green":D.row.status==="canceled"?"red":"",icon:D.row.status==="draft"?"emergency":D.row.status==="closed"?"check":D.row.status==="canceled"?"close":""},{default:a(()=>[b(r(M.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[D.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(S,{name:"category"}),b(" "+r(M.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[D.row.type]),1)]),D.row.created_by?(d(),h("div",oV,[e(S,{name:"person"}),w[9]||(w[9]=b(" Dibuat: ",-1)),t("b",null,r(D.row.created_by.username),1),e(S,{name:"history"}),b(" "+r(l(be)(D.row.created_at)),1)])):k("",!0),D.row.updated_by?(d(),h("div",nV,[e(S,{name:"person"}),w[10]||(w[10]=b(" Diperbarui: ",-1)),t("b",null,r(D.row.updated_by.username),1),e(S,{name:"history"}),b(" "+r(l(be)(D.row.updated_at)),1)])):k("",!0),t("div",{class:Ve(D.row.total_cost<0?"text-red-10":D.row.total_cost>0?"text-green-10":"")},[e(S,{name:"money"}),M.$can("admin.product:view-cost")?(d(),h("span",sV,"Rp. "+r(l(L)(D.row.total_cost))+" / ",1)):k("",!0),b(" Rp. "+r(l(L)(D.row.total_price)),1)],2)],64)):(d(),h("div",aV,"#"+r(D.row.code),1))]),_:2},1032,["props"]),e(Q,{key:"datetime",props:D},{default:a(()=>[b(r(l(be)(D.row.datetime)),1)]),_:2},1032,["props"]),e(Q,{key:"status",props:D,class:"text-center"},{default:a(()=>[b(r(M.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[D.row.status]),1)]),_:2},1032,["props"]),e(Q,{key:"type",props:D},{default:a(()=>[b(r(M.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[D.row.type]),1)]),_:2},1032,["props"]),e(Q,{key:"total_cost",props:D},{default:a(()=>[M.$can("admin.product:view-cost")?(d(),h("div",{key:0,class:Ve(D.row.total_cost<0?"text-red-10":D.row.total_cost>0?"text-green-10":"")},r(l(L)(D.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"total_price",props:D},{default:a(()=>[t("div",{class:Ve(D.row.total_price<0?"text-red-10":D.row.total_price>0?"text-green-10":"")},r(l(L)(D.row.total_price)),3)]),_:2},1032,["props"]),e(Q,{key:"notes",props:D},{default:a(()=>[b(r(D.row.notes),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:D},{default:a(()=>[t("div",rV,[M.$can("admin.stock-adjustment.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[7]||(w[7]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[M.$can("admin.stock-adjustment.delete")?te((d(),I(oe,{key:0,onClick:G(O=>V(D.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...w[11]||(w[11]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",ZS,[e(Xe,{modelValue:m.start_date,"onUpdate:modelValue":[w[2]||(w[2]=D=>m.start_date=D),E],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Xe,{modelValue:m.end_date,"onUpdate:modelValue":[w[3]||(w[3]=D=>m.end_date=D),E],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:m.status,"onUpdate:modelValue":[w[4]||(w[4]=D=>m.status=D),E],options:g,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:m.type,"onUpdate:modelValue":[w[5]||(w[5]=D=>m.type=D),E],options:_,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:m.search,"onUpdate:modelValue":w[6]||(w[6]=D=>m.search=D),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},dV=Object.freeze(Object.defineProperty({__proto__:null,default:iV},Symbol.toStringTag,{value:"Module"})),uV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},mV={class:"q-pa-xs"},cV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Zl="Riwayat Stok",pV={__name:"Index",setup(p){pe();const s=R(null),u=R(null),o=at(u),i=Re().startOf("month").toDate(),n=Re().endOf("month").toDate(),f=[{value:"all",label:"Semua"},...Ne(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],v=we(),c=R(!1),m=R([]),g=R(!0),_=Ue({type:"all",search:"",start_date:i,end_date:n,...ze()}),y=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let $=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{const T=new URLSearchParams(window.location.search).get("page");T&&(y.value.page=parseInt(T)),V()});const V=(F=null)=>{const T={..._,start_date:Re(_.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:Re(_.end_date).format("YYYY-MM-DD HH:mm:ss")};Fe({pagination:y,filter:T,props:F,rows:m,url:route("admin.stock-movement.data"),loading:g,tableRef:s})},C=()=>{V()},E=Z(()=>v.screen.lt.sm?$.filter(F=>F.name==="id"||F.name==="quantity"):$);return(F,T)=>{const U=J("i-head"),P=J("authenticated-layout");return d(),h(W,null,[e(U,{title:Zl}),e(P,null,Be({title:a(()=>[b(r(Zl))]),"right-button":a(()=>[e(N,{icon:c.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:T[0]||(T[0]=q=>c.value=!c.value)},null,8,["icon"])]),default:a(()=>[t("div",mV,[e(Ee,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":T[5]||(T[5]=q=>y.value=q),filter:_.search,loading:g.value,columns:E.value,rows:m.value,"rows-per-page-options":[10,25,50],style:Le({height:l(o)}),onRequest:V,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:M,filter:w})=>[t("div",cV,[t("span",null,r(M)+" "+r(w?" with term "+w:""),1)])]),body:a(q=>[e(Pe,{props:q},{default:a(()=>[e(Q,{key:"id",props:q},{default:a(()=>[t("div",null,[e(S,{class:"inline-icon",name:"tag"}),b(" "+r(q.row.code),1)]),t("div",null,[e(S,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(l(be)(q.row.created_at)),1)]),t("div",null,[e(rt,null,{default:a(()=>[b(r(F.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[q.row.ref_type]),1)]),_:2},1024)]),l(v).screen.lt.sm?(d(),h(W,{key:0},[t("div",null,[e(S,{name:"token",class:"inline-icon"}),b(" "+r(q.row.product.name),1)]),t("div",{class:Ve(q.row.quantity>0?"text-positive":"text-negative")},[e(S,{class:"inline-icon",name:"compare_arrows"}),b(" "+r(l(L)(q.row.quantity_before))+" "+r(q.row.uom)+"  "+r(l(L)(q.row.quantity_after))+" "+r(q.row.uom),1)],2),e(xe,{text:q.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"product",props:q},{default:a(()=>[b(r(q.row.product.name),1)]),_:2},1032,["props"]),e(Q,{key:"quantity_before",props:q},{default:a(()=>[b(r(l(L)(q.row.quantity_before)),1)]),_:2},1032,["props"]),e(Q,{key:"quantity",props:q,class:Ve(q.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[b(r(l(xt)(q.row.quantity))+" ",1),l(v).screen.lt.sm?(d(),h(W,{key:0},[b(r(q.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Q,{key:"quantity_after",props:q},{default:a(()=>[b(r(l(L)(q.row.quantity_after)),1)]),_:2},1032,["props"]),e(Q,{key:"uom",props:q},{default:a(()=>[b(r(q.row.uom),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:q},{default:a(()=>[e(xe,{text:q.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[c.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:u},{default:a(()=>[t("div",uV,[e(Xe,{modelValue:_.start_date,"onUpdate:modelValue":[T[1]||(T[1]=q=>_.start_date=q),C],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Xe,{modelValue:_.end_date,"onUpdate:modelValue":[T[2]||(T[2]=q=>_.end_date=q),C],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:_.ref_type,"onUpdate:modelValue":[T[3]||(T[3]=q=>_.ref_type=q),C],options:f,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":T[4]||(T[4]=q=>_.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fV=Object.freeze(Object.defineProperty({__proto__:null,default:pV},Symbol.toStringTag,{value:"Module"})),gV={class:"detail"},bV={key:0},vV={key:1},_V={key:2},yV={key:3},kV={key:4},wV={key:5},hV={key:6},$V={key:0,class:"q-pt-md"},wn={__name:"MainInfoTab",setup(p){const s=pe(),u=()=>{ot({message:`Hapus Pemasok ${s.props.data.name}?`,url:route("admin.supplier.delete",s.props.data.id),onSuccess:()=>{Y.get(route("admin.supplier.index"))}})};return(o,i)=>(d(),h(W,null,[t("table",gV,[t("tbody",null,[i[22]||(i[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Nama",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[t("td",null,r(l(s).props.data.balance<0?"Utang":"Utang / Piutang"),1),i[5]||(i[5]=t("td",null,":",-1)),t("td",{class:Ve(l(s).props.data.balance<0?"text-red":"text-green")},r(l(aa)(l(s).props.data.balance)),3)]),l(s).props.data.phone_1?(d(),h("tr",bV,[i[6]||(i[6]=t("td",null,"No Telepon",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,[e(Yt,{phone:l(s).props.data.phone_1},null,8,["phone"])])])):k("",!0),l(s).props.data.phone_2?(d(),h("tr",vV,[i[8]||(i[8]=t("td",null,"No Telepon 2",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,[e(Yt,{phone:l(s).props.data.phone_2},null,8,["phone"])])])):k("",!0),l(s).props.data.phone_3?(d(),h("tr",_V,[i[10]||(i[10]=t("td",null,"No Telepon 3",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,[e(Yt,{phone:l(s).props.data.phone_3},null,8,["phone"])])])):k("",!0),l(s).props.data.address?(d(),h("tr",yV,[i[12]||(i[12]=t("td",null,"Alamat",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.address),1)])):k("",!0),l(s).props.data.return_address?(d(),h("tr",kV,[i[14]||(i[14]=t("td",null,"Alamat Retur",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.return_address),1)])):k("",!0),l(s).props.data.bank_account_name_1||l(s).props.data.bank_account_number_1||l(s).props.data.bank_account_holder_1?(d(),h("tr",wV,[i[16]||(i[16]=t("td",null,"Rek 1",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank_account_name_1)+" "+r(l(s).props.data.bank_account_number_1)+" a.n. "+r(l(s).props.data.bank_account_holder_1),1)])):k("",!0),l(s).props.data.bank_account_name_2||l(s).props.data.bank_account_number_2||l(s).props.data.bank_account_holder_2?(d(),h("tr",hV,[i[18]||(i[18]=t("td",null,"Rek 2",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank_account_name_2)+" "+r(l(s).props.data.bank_account_number_2)+" a.n. "+r(l(s).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Status",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(d(),h("div",$V,[e(N,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>u())})])):k("",!0)],64))}},xV=Object.freeze(Object.defineProperty({__proto__:null,default:wn},Symbol.toStringTag,{value:"Module"})),SV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},VV={class:"text-bold"},qV={class:"text-bold"},CV={key:0,class:"text-bold"},TV={key:1},hn={__name:"OrderHistoryTab",setup(p){const s=pe(),u=R([]),o=R(!0),i=Ue({customer_id:s.props.data.id,...ze()}),n=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp.)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];he(()=>{v()});const v=(g=null)=>Fe({pagination:n,filter:i,props:g,rows:u,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:s.props.data.id}}),loading:o}),c=we(),m=Z(()=>c.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(d(),I(Ee,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:m.value,rows:u.value,"rows-per-page-options":[10,25,50],onRequest:v,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:$,filter:V})=>[t("div",SV,[t("span",null,r($)+" "+r(V?" with term "+V:""),1)])]),body:a(y=>[e(Pe,{props:y,class:"cursor-pointer",onClick:G($=>l(Y).get(g.route("admin.purchase-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Q,{key:"id",props:y},{default:a(()=>[t("div",VV,[e(S,{class:"inline-icon",name:"tag"}),b(" "+r(y.row.code),1)]),t("div",null,[e(S,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(l(be)(y.row.datetime)),1)]),l(c).screen.lt.md?(d(),h(W,{key:0},[t("div",qV,[e(S,{name:"money",class:"inline-icon"}),b(" Total: Rp. "+r(l(L)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(d(),h("div",CV,[e(S,{name:"money",class:"inline-icon"}),b(" Sisa Utang: Rp. "+r(l(L)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(d(),h("div",TV,[e(xe,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(Go,{status:y.row.status},null,8,["status"]),e(Xo,{status:y.row.payment_status},null,8,["status"])])]),_:2},1032,["props"]),e(Q,{key:"grand_total",props:y},{default:a(()=>[b(r(l(L)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Q,{key:"remaining_debt",props:y},{default:a(()=>[b(r(l(L)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Q,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(xe,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},PV=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"})),RV={class:"q-gutter-sm"},OV={class:"q-gutter-sm"},DV={class:"col col-lg-6 q-pa-xs"},IV={class:"row"},eo="Rincian Pemasok",UV={__name:"Detail",setup(p){const s=pe(),u=R("main");return we(),(o,i)=>{const n=J("i-head"),f=J("authenticated-layout");return d(),h(W,null,[e(n,{title:eo}),e(f,null,{title:a(()=>[b(r(eo))]),"left-button":a(()=>[t("div",RV,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=v=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":a(()=>[t("div",OV,[o.$can("admin.supplier.edit")?(d(),I(N,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=v=>l(Y).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),I(N,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=v=>l(Y).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(d(),I(N,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=v=>l(Y).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",DV,[t("div",IV,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Ct,{modelValue:u.value,"onUpdate:modelValue":i[4]||(i[4]=v=>u.value=v),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","switch-indicator":""},{default:a(()=>[e(it,{name:"main",label:"Info Utama"}),e(it,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Tt,{modelValue:u.value,"onUpdate:modelValue":i[5]||(i[5]=v=>u.value=v),animated:""},{default:a(()=>[e(dt,{name:"main"},{default:a(()=>[e(wn)]),_:1}),e(dt,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(hn)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},jV=Object.freeze(Object.defineProperty({__proto__:null,default:UV},Symbol.toStringTag,{value:"Module"})),EV={class:"q-gutter-sm"},AV={class:"col col-md-6 q-pa-xs"},MV={class:"row q-col-gutter-md"},NV={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},BV={key:2,class:"row q-col-gutter-md"},zV={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},FV={key:4,class:"row q-col-gutter-md"},LV={key:5,class:"row q-col-gutter-md"},HV={style:{"margin-left":"-10px"},class:"q-mt-md"},KV={class:"q-mt-sm"},YV={__name:"Editor",setup(p){const s=pe(),u=(s.props.data.id?"Edit":"Tambah")+" Pemasok",o=Qe({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,phone_1:s.props.data.phone_1,phone_2:s.props.data.phone_2,phone_3:s.props.data.phone_3,url_1:s.props.data.url_1,url_2:s.props.data.url_2,bank_account_name_1:s.props.data.bank_account_name_1,bank_account_holder_1:s.props.data.bank_account_holder_1,bank_account_number_1:s.props.data.bank_account_number_1,bank_account_name_2:s.props.data.bank_account_name_2,bank_account_holder_2:s.props.data.bank_account_holder_2,bank_account_number_2:s.props.data.bank_account_number_2,address:s.props.data.address,return_address:s.props.data.return_address,active:!!s.props.data.active}),i=R(!0),n=()=>st({form:o,url:route("admin.supplier.save")});return(f,v)=>{const c=J("i-head"),m=J("authenticated-layout");return d(),h(W,null,[e(c,{title:u}),e(m,{"show-drawer-button":!0},{title:a(()=>[b(r(u))]),"left-button":a(()=>[t("div",EV,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=g=>l(Y).get(f.route("admin.supplier.index")))})])]),"right-button":a(()=>[e(N,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:v[1]||(v[1]=g=>n()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",AV,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[2]||(v[2]=g=>l(o).id=g)},null,512),[[wt,l(o).id]]),e(re,{modelValue:l(o).code,"onUpdate:modelValue":v[3]||(v[3]=g=>l(o).code=g),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[g=>g&&g.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(o).name,"onUpdate:modelValue":v[4]||(v[4]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",MV,[e(re,{modelValue:l(o).phone_1,"onUpdate:modelValue":v[5]||(v[5]=g=>l(o).phone_1=g),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_1,"error-message":l(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(d(),I(re,{key:0,modelValue:l(o).phone_2,"onUpdate:modelValue":v[6]||(v[6]=g=>l(o).phone_2=g),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_2,"error-message":l(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(d(),I(re,{key:1,modelValue:l(o).phone_3,"onUpdate:modelValue":v[7]||(v[7]=g=>l(o).phone_3=g),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_3,"error-message":l(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(re,{modelValue:l(o).address,"onUpdate:modelValue":v[8]||(v[8]=g=>l(o).address=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(d(),I(re,{key:0,modelValue:l(o).return_address,"onUpdate:modelValue":v[9]||(v[9]=g=>l(o).return_address=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.return_address,"error-message":l(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(d(),h("div",NV," Rekening 1 ")),i.value?k("",!0):(d(),h("div",BV,[e(re,{modelValue:l(o).bank_account_name_1,"onUpdate:modelValue":v[10]||(v[10]=g=>l(o).bank_account_name_1=g),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_1,"error-message":l(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).bank_account_number_1,"onUpdate:modelValue":v[11]||(v[11]=g=>l(o).bank_account_number_1=g),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_1,"error-message":l(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).bank_account_holder_1,"onUpdate:modelValue":v[12]||(v[12]=g=>l(o).bank_account_holder_1=g),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_1,"error-message":l(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(d(),h("div",zV," Rekening 2 ")),i.value?k("",!0):(d(),h("div",FV,[e(re,{modelValue:l(o).bank_account_name_2,"onUpdate:modelValue":v[13]||(v[13]=g=>l(o).bank_account_name_2=g),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_2,"error-message":l(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).bank_account_number_2,"onUpdate:modelValue":v[14]||(v[14]=g=>l(o).bank_account_number_2=g),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_2,"error-message":l(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).bank_account_holder_2,"onUpdate:modelValue":v[15]||(v[15]=g=>l(o).bank_account_holder_2=g),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_2,"error-message":l(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(d(),h("div",LV,[e(re,{modelValue:l(o).url_1,"onUpdate:modelValue":v[16]||(v[16]=g=>l(o).url_1=g),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_1,"error-message":l(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).url_2,"onUpdate:modelValue":v[17]||(v[17]=g=>l(o).url_2=g),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_2,"error-message":l(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",HV,[e(oa,{class:"full-width q-pl-none",modelValue:l(o).active,"onUpdate:modelValue":v[18]||(v[18]=g=>l(o).active=g),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",KV,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:v[19]||(v[19]=G(g=>i.value=!i.value,["stop"]))},[e(S,{name:i.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),b(" "+r(i.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},WV=Object.freeze(Object.defineProperty({__proto__:null,default:YV},Symbol.toStringTag,{value:"Module"})),QV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},JV={class:"q-pa-xs"},GV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},XV={key:0},ZV={key:1},eq={class:"flex justify-end"},to="Pemasok",tq={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Ue({search:"",status:"active",...ze()}),m=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];he(()=>{$()});const y=U=>ot({message:`Hapus pemasok ${U.name}?`,url:route("admin.supplier.delete",U.id),fetchItemsCallback:$,loading:i}),$=(U=null)=>{Fe({pagination:m,filter:c,props:U,rows:o,url:route("admin.supplier.data"),loading:i,tableRef:n})},V=()=>$(),C=U=>Y.get(route("admin.supplier.detail",{id:U.id})),{protectClick:E}=Ut(),F=E(C),T=Z(()=>s.screen.gt.sm?g:g.filter(U=>U.name==="code"||U.name==="action"));return(U,P)=>{const q=J("i-head"),M=J("authenticated-layout");return d(),h(W,null,[e(q,{title:to}),e(M,null,Be({title:a(()=>[b(r(to))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=w=>u.value=!u.value)},null,8,["icon"]),U.$can("admin.supplier.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=w=>l(Y).get(U.route("admin.supplier.add")))})):k("",!0)]),default:a(()=>[t("div",JV,[e(Ee,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":P[5]||(P[5]=w=>m.value=w),filter:c.search,loading:i.value,columns:T.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Le({height:l(v)}),onRequest:$,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:w,message:x,filter:j})=>[t("div",GV,[t("span",null,r(x)+" "+r(j?" with term "+j:""),1)])]),body:a(w=>[e(Pe,{props:w,class:Ve([w.row.active?"":"bg-red-1","cursor-pointer"]),onClick:G(x=>l(F)(w.row,x),["stop"])},{default:a(()=>[e(Q,{key:"code",props:w,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(d(),I(S,{key:0,name:"person"})):k("",!0),b(" "+r(w.row.code)+" ",1),l(s).screen.lt.md?(d(),h(W,{key:1},[b(" - "+r(w.row.name),1)],64)):k("",!0)]),l(s).screen.lt.md?(d(),h(W,{key:0},[t("div",{class:Ve(w.row.balance<0?"text-negative":"text-positive")},[e(S,{name:"wallet"}),b(" "+r(l(L)(w.row.balance)),1)],2),w.row.phone_1?(d(),h("div",XV,[e(S,{name:"phone"}),b(" "+r(w.row.phone_1),1)])):k("",!0),w.row.address?(d(),h("div",ZV,[e(S,{name:"home_pin"}),b(" "+r(w.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Q,{key:"name",props:w,class:"wrap-column"},{default:a(()=>[b(r(w.row.name),1)]),_:2},1032,["props"]),e(Q,{key:"balance",props:w,class:"wrap-column"},{default:a(()=>[t("div",{class:Ve(w.row.balance<0?"text-negative":"text-positive")},r(l(L)(w.row.balance)),3)]),_:2},1032,["props"]),e(Q,{key:"phone_1",props:w},{default:a(()=>[b(r(w.row.phone_1),1)]),_:2},1032,["props"]),e(Q,{key:"address",props:w},{default:a(()=>[b(r(w.row.address),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:w},{default:a(()=>[t("div",eq,[U.$can("admin.supplier.add")||U.$can("admin.supplier.edit")||U.$can("admin.supplier.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[4]||(P[4]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[U.$can("admin.supplier.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(x=>l(Y).get(U.route("admin.supplier.duplicate",w.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>[...P[6]||(P[6]=[b(" Duplikat ",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),U.$can("admin.supplier.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(x=>l(Y).get(U.route("admin.supplier.edit",w.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...P[7]||(P[7]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),U.$can("admin.supplier.delete")?te((d(),I(oe,{key:2,onClick:G(x=>y(w.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...P[8]||(P[8]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",QV,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[P[2]||(P[2]=w=>c.status=w),V],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":P[3]||(P[3]=w=>c.search=w),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},aq=Object.freeze(Object.defineProperty({__proto__:null,default:tq},Symbol.toStringTag,{value:"Module"})),lq={class:"q-gutter-sm"},oq={class:"col col-md-6 q-pa-xs"},nq={class:"q-pt-md"},sq={key:0,class:"text-caption text-negative"},rq={class:"q-pt-md"},iq={key:0,class:"text-caption text-negative"},dq={__name:"Editor",setup(p){const s=we(),u=pe(),o=(u.props.data.id?"Edit":"Tambah")+" Skema Pajak",i=Qe({id:u.props.data.id,name:u.props.data.name,rate_percentage:u.props.data.rate_percentage??0,tax_authority:u.props.data.tax_authority,is_inclusive:u.props.data.is_inclusive??!1,active:u.props.data.active??!0,description:u.props.data.description}),n=()=>st({form:i,url:route("admin.tax-scheme.save")});return(f,v)=>{const c=J("i-head"),m=J("authenticated-layout");return d(),h(W,null,[e(c,{title:o}),e(m,{"show-drawer-button":!l(s).screen.lt.md},Be({title:a(()=>[b(r(o))]),default:a(()=>[e(Ce,{class:"row justify-center"},{default:a(()=>[t("div",oq,[e(Je,{class:"row",onSubmit:G(n,["prevent"]),onValidationError:l(We)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ae,{class:"q-pt-none"},{default:a(()=>[te(t("input",{type:"hidden",name:"id","onUpdate:modelValue":v[1]||(v[1]=g=>l(i).id=g)},null,512),[[wt,l(i).id]]),e(re,{autofocus:"",modelValue:l(i).name,"onUpdate:modelValue":v[2]||(v[2]=g=>l(i).name=g),modelModifiers:{trim:!0},label:"Nama Skema Pajak","lazy-rules":"",error:!!l(i).errors.name,disable:l(i).processing,"error-message":l(i).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(i).rate_percentage,"onUpdate:modelValue":v[3]||(v[3]=g=>l(i).rate_percentage=g),modelModifiers:{number:!0},label:"Tarif Persentase (%)",type:"number",suffix:"%",rules:[g=>g>=0||"Persentase tidak boleh negatif."],error:!!l(i).errors.rate_percentage,disable:l(i).processing,"error-message":l(i).errors.rate_percentage,"hide-bottom-space":""},null,8,["modelValue","rules","error","disable","error-message"]),e(re,{modelValue:l(i).tax_authority,"onUpdate:modelValue":v[4]||(v[4]=g=>l(i).tax_authority=g),modelModifiers:{trim:!0},label:"Otoritas Pajak (Opsional)",hint:"Contoh: DJP, Pemerintah Daerah",error:!!l(i).errors.tax_authority,disable:l(i).processing,"error-message":l(i).errors.tax_authority,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(re,{modelValue:l(i).description,"onUpdate:modelValue":v[5]||(v[5]=g=>l(i).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.description,"error-message":l(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",nq,[e(Ga,{modelValue:l(i).is_inclusive,"onUpdate:modelValue":v[6]||(v[6]=g=>l(i).is_inclusive=g),disable:l(i).processing,label:l(i).is_inclusive?"Harga Jual SUDAH termasuk Pajak":"Harga Jual BELUM termasuk Pajak",color:"primary"},null,8,["modelValue","disable","label"]),l(i).errors.is_inclusive?(d(),h("div",sq,r(l(i).errors.is_inclusive),1)):k("",!0)]),t("div",rq,[e(Ga,{modelValue:l(i).active,"onUpdate:modelValue":v[7]||(v[7]=g=>l(i).active=g),disable:l(i).processing,label:l(i).active?"Skema Aktif":"Skema Non-Aktif",color:"primary"},null,8,["modelValue","disable","label"]),l(i).errors.active?(d(),h("div",iq,r(l(i).errors.active),1)):k("",!0)])]),_:1}),e(ae,{class:"q-gutter-sm"},{default:a(()=>[e(N,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"]),e(N,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:v[8]||(v[8]=g=>l(Y).get(f.route("admin.tax-scheme.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",lq,[e(N,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:v[0]||(v[0]=g=>l(Y).get(f.route("admin.tax-scheme.index")))})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},uq=Object.freeze(Object.defineProperty({__proto__:null,default:dq},Symbol.toStringTag,{value:"Module"})),mq={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},cq={class:"q-pa-xs"},pq={class:"full-width row flex-center text-grey-8 q-gutter-sm"},fq={class:"text-weight-bold"},gq={class:"text-grey-8"},bq={class:"text-weight-medium"},vq={class:"text-weight-medium text-uppercase"},_q={key:0,class:"text-grey-8"},yq={key:1,class:"text-grey-8"},kq={class:"flex justify-end"},ao="Skema Pajak",wq={__name:"Index",setup(p){const s=we(),u=R(!1),o=R([]),i=R(!0),n=R(null),f=R(null),v=at(f),c=Ue({search:"",...ze()}),m=R({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"rate_percentage",label:"Tarif",field:"rate_percentage",align:"right",sortable:!0,format:V=>`${V}%`},{name:"is_inclusive",label:"Tipe Harga",field:"is_inclusive",align:"center",format:V=>V?"INCLUSIVE":"EXCLUSIVE",sortable:!0},{name:"tax_authority",label:"Otoritas",field:"tax_authority",align:"left",sortable:!0},{name:"active",label:"Status",field:"active",align:"center",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left"},{name:"action",align:"right"}];he(()=>{y()});const _=V=>ot({message:`Hapus Skema Pajak ${V.name}?`,url:route("admin.tax-scheme.delete",V.id),fetchItemsCallback:y,loading:i}),y=(V=null)=>{Fe({pagination:m,filter:c,props:V,rows:o,url:route("admin.tax-scheme.data"),loading:i,tableRef:n})},$=Z(()=>s.screen.gt.sm?g:g.filter(V=>V.name==="name"||V.name==="action"));return(V,C)=>{const E=J("i-head"),F=J("authenticated-layout");return d(),h(W,null,[e(E,{title:ao}),e(F,null,Be({title:a(()=>[b(r(ao))]),"right-button":a(()=>[e(N,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:C[0]||(C[0]=T=>u.value=!u.value)},null,8,["icon"]),V.$can("admin.tax-scheme.add")?(d(),I(N,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:C[1]||(C[1]=T=>l(Y).get(V.route("admin.tax-scheme.add")))})):k("",!0)]),default:a(()=>[t("div",cq,[e(Ee,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:m.value,"onUpdate:pagination":C[4]||(C[4]=T=>m.value=T),filter:c.search,loading:i.value,columns:$.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Le({height:l(v)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(Ke,{showing:"",color:"red"})]),"no-data":a(({icon:T,message:U,filter:P})=>[t("div",pq,[t("span",null,r(U)+" "+r(P?" with term "+P:""),1)])]),body:a(T=>[e(Pe,{props:T},{default:a(()=>[e(Q,{key:"name",props:T,class:"wrap-column"},{default:a(()=>[t("div",fq,r(T.row.name),1),l(s).screen.gt.sm?k("",!0):(d(),h(W,{key:0},[t("div",gq,[C[5]||(C[5]=b(" Tarif: ",-1)),t("span",bq,r(T.row.rate_percentage)+"%",1)]),t("div",null,[C[6]||(C[6]=b(" Tipe: ",-1)),t("span",vq,r(T.row.is_inclusive?"Inclusive":"Exclusive"),1)]),T.row.tax_authority?(d(),h("div",_q,[e(S,{name:"account_balance",size:"xs"}),b(" Otoritas: "+r(T.row.tax_authority),1)])):k("",!0),T.row.description?(d(),h("div",yq,[e(S,{name:"description",size:"xs"}),b(" "+r(T.row.description),1)])):k("",!0),e(rt,{color:T.row.active?"positive":"negative"},{default:a(()=>[b(r(T.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])],64))]),_:2},1032,["props"]),e(Q,{key:"rate_percentage",props:T,class:"text-right text-weight-bold"},{default:a(()=>[b(r(T.row.rate_percentage)+"% ",1)]),_:2},1032,["props"]),e(Q,{key:"is_inclusive",props:T,class:"text-center"},{default:a(()=>[e(rt,{color:T.row.is_inclusive?"green-7":"deep-orange-7","text-color":"white"},{default:a(()=>[b(r(T.row.is_inclusive?"INCLUSIVE":"EXCLUSIVE"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Q,{key:"tax_authority",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.tax_authority),1)]),_:2},1032,["props"]),e(Q,{key:"active",props:T,class:"text-center"},{default:a(()=>[e(rt,{color:T.row.active?"positive":"negative"},{default:a(()=>[b(r(T.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Q,{key:"description",props:T,class:"wrap-column"},{default:a(()=>[b(r(T.row.description),1)]),_:2},1032,["props"]),e(Q,{key:"action",props:T},{default:a(()=>[t("div",kq,[V.$can("admin.tax-scheme.add")||V.$can("admin.tax-scheme.edit")||V.$can("admin.tax-scheme.delete")?(d(),I(N,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:C[3]||(C[3]=G(()=>{},["stop"]))},{default:a(()=>[e(et,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(je,{style:{width:"200px"}},{default:a(()=>[V.$can("admin.tax-scheme.add")?te((d(),I(oe,{key:0,clickable:"",onClick:G(U=>l(Y).get(V.route("admin.tax-scheme.duplicate",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"file_copy"})]),_:1}),e(z,null,{default:a(()=>[...C[7]||(C[7]=[b("Duplikat",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),V.$can("admin.tax-scheme.edit")?te((d(),I(oe,{key:1,clickable:"",onClick:G(U=>l(Y).get(V.route("admin.tax-scheme.edit",T.row.id)),["stop"])},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"edit"})]),_:1}),e(z,null,{default:a(()=>[...C[8]||(C[8]=[b("Edit",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0),V.$can("admin.tax-scheme.delete")?te((d(),I(oe,{key:2,onClick:G(U=>_(T.row),["stop"]),clickable:""},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"delete_forever"})]),_:1}),e(z,null,{default:a(()=>[...C[9]||(C[9]=[b("Hapus",-1)])]),_:1})]),_:1},8,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Ge,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",mq,[e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":C[2]||(C[2]=T=>c.search=T),placeholder:"Cari",clearable:""},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},hq=Object.freeze(Object.defineProperty({__proto__:null,default:wq},Symbol.toStringTag,{value:"Module"})),$q={key:1,class:"q-ml-sm"},xq={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},Sq={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},Vq={class:"absolute-bottom text-grey-6 q-pa-md"},Pa="amanah-pos.layout.left-drawer-open",qq={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(p,{expose:s}){const u=we(),o=pe(),i=R(JSON.parse(localStorage.getItem(Pa))),n=R(!1),f=()=>i.value=!i.value,v=()=>{i.value=!1};return Ye(i,c=>{localStorage.setItem(Pa,c)}),he(()=>{i.value=JSON.parse(localStorage.getItem(Pa)),u.screen.lt.md&&(i.value=!1)}),s({hideDrawer:v}),(c,m)=>{const g=J("my-link");return d(),I(Ps,{view:"lHh LpR lFf"},{default:a(()=>[e(Ss,null,{default:a(()=>[e(Ge,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:a(()=>[p.showDrawerButton&&!i.value?(d(),I(N,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:f},{default:a(()=>[e(S,{class:"material-symbols-outlined"},{default:a(()=>[...m[36]||(m[36]=[b("dock_to_right",-1)])]),_:1})]),_:1})):k("",!0),l(u).screen.gt.sm?(d(),h("div",$q,[qt(c.$slots,"left-button",{},void 0,!0)])):k("",!0),e(ea,{style:{"font-size":"16px"}},{default:a(()=>[qt(c.$slots,"title",{},()=>[b(r(c.$config.APP_NAME),1)],!0)]),_:3}),qt(c.$slots,"right-button",{},void 0,!0)]),_:3}),qt(c.$slots,"header",{},void 0,!0)]),_:3}),e(Vs,{breakpoint:768,modelValue:i.value,"onUpdate:modelValue":m[35]||(m[35]=_=>i.value=_),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:a(()=>[t("div",xq,[t("div",Sq,[e(qs,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=_=>n.value=_),class:Ve(["profile-btn text-bold",{"profile-btn-active":n.value}]),flat:"",label:l(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:a(()=>[e(je,{id:"profile-btn-popup",style:{color:"#444"}},{default:a(()=>[e(oe,null,{default:a(()=>[e(Wt,{style:{"margin-left":"-15px"}},{default:a(()=>[e(S,{name:"person"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[e(g,{class:"text-bold text-grey-9",href:c.route("admin.user-profile.edit")},{default:a(()=>[b(r(l(o).props.auth.user.name),1)]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}),e(Te),te((d(),I(oe,{clickable:"",style:{color:"inherit"},href:c.route("admin.auth.logout")},{default:a(()=>[e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[e(S,{name:"logout",class:"q-mr-sm"}),m[37]||(m[37]=b(" Keluar",-1))]),_:1})]),_:1})]),_:1},8,["href"])),[[me],[se]])]),_:1})]),_:1},8,["modelValue","label","class"]),i.value?(d(),I(N,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:f},{default:a(()=>[e(S,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(Cs,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:a(()=>[e(je,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:a(()=>[te((d(),I(oe,{clickable:"",active:c.$page.url.startsWith("/admin/home"),onClick:m[1]||(m[1]=_=>l(Y).get(c.route("admin.home")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"home"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[38]||(m[38]=[b("Beranda",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]),c.$can("admin.dashboard")?te((d(),I(oe,{key:0,clickable:"",active:c.$page.url.startsWith("/admin/dashboard"),onClick:m[2]||(m[2]=_=>l(Y).get(c.route("admin.dashboard")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"dashboard"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[39]||(m[39]=[b("Dashboard",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),e(kt,{icon:"o_fast_forward",label:"Pintasan"},{default:a(()=>[c.$can("admin.sales-order.add")?te((d(),I(oe,{key:0,class:"subnav show-icon",clickable:"",onClick:m[3]||(m[3]=_=>l(Y).get(c.route("admin.sales-order.add")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"add_shopping_cart"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[40]||(m[40]=[b("Penjualan Baru ",-1)])]),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),c.$can("admin.purchase-order.add")?te((d(),I(oe,{key:1,class:"subnav show-icon",clickable:"",onClick:m[4]||(m[4]=_=>l(Y).get(c.route("admin.purchase-order.add")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"o_shopping_basket"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[41]||(m[41]=[b("Pembelian Baru ",-1)])]),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),e(Te),c.$can("admin.customer.add")?te((d(),I(oe,{key:2,class:"subnav show-icon",clickable:"",onClick:m[5]||(m[5]=_=>l(Y).get(c.route("admin.customer.add")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"person_add_alt"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[42]||(m[42]=[b("Pelanggan Baru ",-1)])]),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),c.$can("admin.supplier.add")?te((d(),I(oe,{key:3,class:"subnav show-icon",clickable:"",onClick:m[6]||(m[6]=_=>l(Y).get(c.route("admin.supplier.add")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"o_business_center"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[43]||(m[43]=[b("Supplier Baru ",-1)])]),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),e(Te),c.$can("admin.product.add")?te((d(),I(oe,{key:4,class:"subnav show-icon",clickable:"",onClick:m[7]||(m[7]=_=>l(Y).get(c.route("admin.product.add")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"o_inventory_2"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[44]||(m[44]=[b("Produk Baru ",-1)])]),_:1})]),_:1})]),_:1})),[[se]]):k("",!0)]),_:1}),c.$can("admin.sales-order.index")||c.$can("admin.customer.index")||c.$can("admin.sales-order-return.index")?(d(),I(kt,{key:1,icon:"storefront",label:"Penjualan","default-opened":c.$page.url.startsWith("/admin/sales-orders")||c.$page.url.startsWith("/admin/sales-order-returns")||c.$page.url.startsWith("/admin/customers")||c.$page.url.startsWith("/admin/customer-wallet-transactions")||c.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[c.$can("admin.sales-order.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/sales-orders"),onClick:m[8]||(m[8]=_=>l(Y).get(c.route("admin.sales-order.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"add_shopping_cart"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[45]||(m[45]=[b("Penjualan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.sales-order-return.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/sales-order-returns"),onClick:m[9]||(m[9]=_=>l(Y).get(c.route("admin.sales-order-return.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"remove_shopping_cart"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[46]||(m[46]=[b("Retur Penjualan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.customer.index")?te((d(),I(oe,{key:2,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/customers"),onClick:m[10]||(m[10]=_=>l(Y).get(c.route("admin.customer.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"people"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[47]||(m[47]=[b("Pelanggan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.customer-wallet-transaction-confirmation.index")||c.$can("admin.customer-wallet-transaction.index")?(d(),I(kt,{key:3,class:"subnav",icon:"wallet",label:"Deposit","default-opened":c.$page.url.startsWith("/admin/customer-wallet-transactions")||c.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[c.$can("admin.customer-wallet-transaction-confirmation.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:m[11]||(m[11]=_=>l(Y).get(c.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"add_task"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[48]||(m[48]=[b("Konfirmasi Deposit",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.customer-wallet-transaction.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:m[12]||(m[12]=_=>l(Y).get(c.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"moving"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[49]||(m[49]=[b("Transaksi Deposit",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.purchase-order.index")||c.$can("admin.supplier.index")||c.$can("admin.purchase-order-return.index")?(d(),I(kt,{key:2,icon:"local_shipping",label:"Pembelian","default-opened":c.$page.url.startsWith("/admin/purchase-orders")||c.$page.url.startsWith("/admin/purchase-order-returns")||c.$page.url.startsWith("/admin/suppliers")},{default:a(()=>[c.$can("admin.purchase-order.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/purchase-orders"),onClick:m[13]||(m[13]=_=>l(Y).get(c.route("admin.purchase-order.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"add_shopping_cart"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[50]||(m[50]=[b("Pembelian",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.purchase-order-return.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/purchase-order-returns"),onClick:m[14]||(m[14]=_=>l(Y).get(c.route("admin.purchase-order-return.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"remove_shopping_cart"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[51]||(m[51]=[b("Retur Pembelian",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.supplier.index")?te((d(),I(oe,{key:2,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/suppliers"),onClick:m[15]||(m[15]=_=>l(Y).get(c.route("admin.supplier.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"people"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[52]||(m[52]=[b("Supplier",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.product.index")||c.$can("admin.product-category.index")||c.$can("admin.stock-adjustment.index")||c.$can("admin.stock-movement.index")?(d(),I(kt,{key:3,icon:"inventory_2",label:"Inventori","default-opened":c.$page.url.startsWith("/admin/products")||c.$page.url.startsWith("/admin/product-categories")||c.$page.url.startsWith("/admin/stock-adjustments")||c.$page.url.startsWith("/admin/stock-movements")},{default:a(()=>[c.$can("admin.stock-adjustment.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/stock-adjustments"),onClick:m[16]||(m[16]=_=>l(Y).get(c.route("admin.stock-adjustment.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"swap_vert"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[53]||(m[53]=[b("Penyesuaian Stok",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.stock-movement.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/stock-movements"),onClick:m[17]||(m[17]=_=>l(Y).get(c.route("admin.stock-movement.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"timeline"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[54]||(m[54]=[b("Riwayat Stok",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.product.index")?te((d(),I(oe,{key:2,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/products"),onClick:m[18]||(m[18]=_=>l(Y).get(c.route("admin.product.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"box"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[55]||(m[55]=[b("Produk",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.product-category.index")?te((d(),I(oe,{key:3,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/product-categories"),onClick:m[19]||(m[19]=_=>l(Y).get(c.route("admin.product-category.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"category"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[56]||(m[56]=[b("Kategori Produk",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(kt,{icon:"business_center",label:"Back Office","default-opened":c.$page.url.startsWith("/admin/cashier-terminals")||c.$page.url.startsWith("/admin/cashier-sessions")||c.$page.url.startsWith("/admin/finance-accounts")||c.$page.url.startsWith("/admin/finance-transactions")||c.$page.url.startsWith("/admin/operational-costs")||c.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[c.$can("admin.cashier-session.index")||c.$can("admin.cashier-terminal.index")||c.$can("admin.finance-account.index")||c.$can("admin.finance-transaction.index")||c.$can("admin.operational-cost.index")||c.$can("admin.operational-cost-category.index")?(d(),I(kt,{key:0,class:"subnav show-icon",icon:"point_of_sale",label:"Kasir","default-opened":c.$page.url.startsWith("/admin/cashier-terminals")||c.$page.url.startsWith("/admin/cashier-session")},{default:a(()=>[c.$can("admin.cashier-session.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/cashier-sessions"),onClick:m[20]||(m[20]=_=>l(Y).get(c.route("admin.cashier-session.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"tv_signin"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[57]||(m[57]=[b("Sesi Kasir",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.cashier-terminal.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/cashier-terminals"),onClick:m[21]||(m[21]=_=>l(Y).get(c.route("admin.cashier-terminal.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"point_of_sale"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[58]||(m[58]=[b("Terminal Kasir",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.finance-transaction.index")||c.$can("admin.finance-account.index")?(d(),I(kt,{key:1,class:"subnav show-icon",icon:"finance",label:"Keuangan","default-opened":c.$page.url.startsWith("/admin/finance-accounts")||c.$page.url.startsWith("/admin/finance-transactions")},{default:a(()=>[c.$can("admin.finance-transaction.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/finance-transactions"),onClick:m[22]||(m[22]=_=>l(Y).get(c.route("admin.finance-transaction.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"moving"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[59]||(m[59]=[b("Transaksi",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.finance-account.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/finance-accounts"),onClick:m[23]||(m[23]=_=>l(Y).get(c.route("admin.finance-account.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"groups_2"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[60]||(m[60]=[b("Akun Kas",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),c.$can("admin.operational-cost.index")||c.$can("admin.operational-cost-category.index")?(d(),I(kt,{key:2,class:"subnav show-icon",icon:"paid",label:"Operasional","default-opened":c.$page.url.startsWith("/admin/operational-costs")||c.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[c.$can("admin.operational-cost.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/operational-costs"),onClick:m[24]||(m[24]=_=>l(Y).get(c.route("admin.operational-cost.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"request_quote"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[61]||(m[61]=[b("Biaya Operasional",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.operational-cost-category.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/operational-cost-categories"),onClick:m[25]||(m[25]=_=>l(Y).get(c.route("admin.operational-cost-category.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"category"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[62]||(m[62]=[b("Kategori",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"]),c.$can("admin.report.index")?te((d(),I(oe,{key:4,clickable:"",active:c.$page.url.startsWith("/admin/reports"),onClick:m[26]||(m[26]=_=>l(Y).get(c.route("admin.report.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"analytics"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[63]||(m[63]=[b("Laporan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),e(kt,{icon:"settings",label:"Pengaturan","default-opened":c.$page.url.startsWith("/admin/settings")},{default:a(()=>[c.$can("admin.user.index")?te((d(),I(oe,{key:0,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/users"),onClick:m[27]||(m[27]=_=>l(Y).get(c.route("admin.user.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"person"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[64]||(m[64]=[b("Pengguna",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.user-role.index")?te((d(),I(oe,{key:1,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/user-roles"),onClick:m[28]||(m[28]=_=>l(Y).get(c.route("admin.user-role.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"group"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[65]||(m[65]=[b("Peran Pengguna",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),k("",!0),c.$can("admin.pos-settings.edit")?te((d(),I(oe,{key:3,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/pos"),onClick:m[30]||(m[30]=_=>l(Y).get(c.route("admin.pos-settings.edit")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"point_of_sale"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[67]||(m[67]=[b("Point of Sales",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.company-profile.edit")?te((d(),I(oe,{key:4,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/company-profile"),onClick:m[31]||(m[31]=_=>l(Y).get(c.route("admin.company-profile.edit")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"apartment"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[68]||(m[68]=[b("Profil Perusahaan",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),c.$can("admin.user-activity-log.index")?te((d(),I(oe,{key:5,class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:m[32]||(m[32]=_=>l(Y).get(c.route("admin.user-activity-log.index")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"article"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[69]||(m[69]=[b("Log Aktivitas",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),k("",!0),te((d(),I(oe,{class:"subnav",clickable:"",active:c.$page.url.startsWith("/admin/settings/system-information"),onClick:m[34]||(m[34]=_=>l(Y).get(c.route("admin.settings.system-information")))},{default:a(()=>[e(z,{avatar:""},{default:a(()=>[e(S,{name:"info"})]),_:1}),e(z,null,{default:a(()=>[e(ge,null,{default:a(()=>[...m[71]||(m[71]=[b("Informasi Sistem",-1)])]),_:1})]),_:1})]),_:1},8,["active"])),[[se]])]),_:1},8,["default-opened"]),t("div",Vq,"  2025 - "+r(c.$config.APP_NAME+" v"+c.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ts,{class:"bg-grey-1"},{default:a(()=>[e(Ce,null,{default:a(()=>[qt(c.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),qt(c.$slots,"footer",{},void 0,!0)]),_:3})}}},Cq=bt(qq,[["__scopeId","data-v-19e26e9c"]]),Tq={__name:"GuestLayout",setup(p){return(s,u)=>(d(),I(Rs,null,{default:a(()=>[qt(s.$slots,"default")]),_:3}))}};Os({onRegistered(p){console.log("Admin Service Worker registered:",p)}});Ds({layouts:{authenticated:Cq,guest:Tq},pagesGlob:Object.assign({"./pages/_examples/Autocomplete1.vue":Es,"./pages/auth/Login.vue":Hs,"./pages/cashier-session/Close.vue":Xs,"./pages/cashier-session/Detail.vue":Zr,"./pages/cashier-session/Index.vue":fi,"./pages/cashier-session/Open.vue":_i,"./pages/cashier-session/detail/FinanceTransactionTab.vue":Wr,"./pages/cashier-session/detail/MainInfoTab.vue":Dr,"./pages/cashier-session/detail/SalesOrderTab.vue":zr,"./pages/cashier-terminal/Detail.vue":Di,"./pages/cashier-terminal/Editor.vue":Ai,"./pages/cashier-terminal/Index.vue":Li,"./pages/cashier-terminal/detail/MainInfoTab.vue":Vi,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":Ci,"./pages/customer-wallet-transaction-confirmation/Detail.vue":td,"./pages/customer-wallet-transaction-confirmation/Index.vue":rd,"./pages/customer-wallet-transaction/Adjustment.vue":ud,"./pages/customer-wallet-transaction/Detail.vue":wd,"./pages/customer-wallet-transaction/Editor.vue":Sd,"./pages/customer-wallet-transaction/Index.vue":Dd,"./pages/customer/Detail.vue":ou,"./pages/customer/Editor.vue":iu,"./pages/customer/Import.vue":gu,"./pages/customer/Index.vue":xu,"./pages/customer/detail/MainInfoTab.vue":Ld,"./pages/customer/detail/OrderHistoryTab.vue":Xd,"./pages/customer/detail/WalletHistoryTab.vue":Yd,"./pages/dashboard/Index.vue":Zu,"./pages/dashboard/cards/ActualSummaryCard.vue":Eu,"./pages/dashboard/cards/ChartCard.vue":zu,"./pages/dashboard/cards/SummaryCard.vue":dm,"./pages/dashboard/cards/TopCard.vue":Wu,"./pages/finance-account/Detail.vue":hm,"./pages/finance-account/Editor.vue":qm,"./pages/finance-account/Index.vue":Nm,"./pages/finance-account/detail/HistoryTab.vue":bm,"./pages/finance-account/detail/MainInfoTab.vue":cm,"./pages/finance-transaction/Detail.vue":Gm,"./pages/finance-transaction/Editor.vue":tc,"./pages/finance-transaction/Index.vue":dc,"./pages/home/Index.vue":hc,"./pages/operational-cost-category/Editor.vue":Vc,"./pages/operational-cost-category/Index.vue":Dc,"./pages/operational-cost/Detail.vue":Lc,"./pages/operational-cost/Editor.vue":Jc,"./pages/operational-cost/Index.vue":np,"./pages/product-category/Editor.vue":dp,"./pages/product-category/Index.vue":bp,"./pages/product/Detail.vue":Mp,"./pages/product/Editor.vue":Jp,"./pages/product/Import.vue":ef,"./pages/product/Index.vue":ff,"./pages/product/SendPriceList.vue":hf,"./pages/product/SendPriceList2.vue":Tf,"./pages/product/detail/MainInfoTab.vue":Tp,"./pages/product/detail/StockHistoryTab.vue":Op,"./pages/purchase-order-return/Create.vue":Df,"./pages/purchase-order-return/Detail.vue":Og,"./pages/purchase-order-return/Editor.vue":T1,"./pages/purchase-order-return/Index.vue":z1,"./pages/purchase-order-return/detail/MainInfoTab.vue":sg,"./pages/purchase-order-return/detail/PaymentDialog.vue":pg,"./pages/purchase-order-return/detail/RefundTab.vue":Cg,"./pages/purchase-order-return/editor/HelpDialog.vue":Fg,"./pages/purchase-order-return/editor/ItemEditorDialog.vue":Ng,"./pages/purchase-order-return/editor/ItemsListTable.vue":Eg,"./pages/purchase-order-return/editor/OrderInfoDialog.vue":Yg,"./pages/purchase-order-return/editor/PaymentDialog.vue":nb,"./pages/purchase-order-return/editor/SuccessDialog.vue":yb,"./pages/purchase-order/Detail.vue":qv,"./pages/purchase-order/Editor.vue":N_,"./pages/purchase-order/Index.vue":X_,"./pages/purchase-order/detail/InvoiceTab.vue":ev,"./pages/purchase-order/detail/PaymentDialog.vue":iv,"./pages/purchase-order/detail/PaymentTab.vue":$v,"./pages/purchase-order/editor/HelpDialog.vue":Zv,"./pages/purchase-order/editor/ItemEditorDialog.vue":Gv,"./pages/purchase-order/editor/ItemsListTable.vue":Ov,"./pages/purchase-order/editor/OrderInfoDialog.vue":l_,"./pages/purchase-order/editor/PaymentDialog.vue":Wv,"./pages/purchase-order/editor/SuccessDialog.vue":b_,"./pages/report/Index.vue":sy,"./pages/reports/ReportGeneratorLayout.vue":$y,"./pages/reports/customer/Index.vue":Vy,"./pages/reports/product/Index.vue":Ty,"./pages/reports/supplier/Index.vue":Oy,"./pages/sales-order-return/Create.vue":jy,"./pages/sales-order-return/Detail.vue":Mk,"./pages/sales-order-return/Editor.vue":qw,"./pages/sales-order-return/Index.vue":zw,"./pages/sales-order-return/detail/MainInfoTab.vue":ck,"./pages/sales-order-return/detail/PaymentDialog.vue":yk,"./pages/sales-order-return/detail/RefundTab.vue":Uk,"./pages/sales-order-return/editor/HelpDialog.vue":Jk,"./pages/sales-order-return/editor/ItemEditorDialog.vue":Yk,"./pages/sales-order-return/editor/ItemsListTable.vue":Lk,"./pages/sales-order-return/editor/OrderInfoDialog.vue":ew,"./pages/sales-order-return/editor/PaymentDialog.vue":n0,"./pages/sales-order-return/editor/SuccessDialog.vue":y0,"./pages/sales-order/Detail.vue":P2,"./pages/sales-order/Editor.vue":Bh,"./pages/sales-order/Index.vue":o$,"./pages/sales-order/detail/InvoiceTab.vue":l2,"./pages/sales-order/detail/PaymentDialog.vue":m2,"./pages/sales-order/detail/PaymentTab.vue":V2,"./pages/sales-order/editor/HelpDialog.vue":ah,"./pages/sales-order/editor/ItemEditorDialog.vue":eh,"./pages/sales-order/editor/ItemsListTable.vue":U2,"./pages/sales-order/editor/OrderInfoDialog.vue":sh,"./pages/sales-order/editor/PaymentDialog.vue":G2,"./pages/sales-order/editor/SuccessDialog.vue":yh,"./pages/settings/SystemInformation.vue":u$,"./pages/settings/company-profile/Edit.vue":b$,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":m$,"./pages/settings/database/Index.vue":w$,"./pages/settings/pos/Edit.vue":V$,"./pages/settings/user-activity-log/Detail.vue":cx,"./pages/settings/user-activity-log/Index.vue":yx,"./pages/settings/user-profile/Edit.vue":Vx,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":kx,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":wx,"./pages/settings/user-role/Detail.vue":Bx,"./pages/settings/user-role/Editor.vue":Yx,"./pages/settings/user-role/Index.vue":Zx,"./pages/settings/user/Detail.vue":dS,"./pages/settings/user/Editor.vue":gS,"./pages/settings/user/Index.vue":hS,"./pages/stock-adjustment/Create.vue":DS,"./pages/stock-adjustment/Detail.vue":LS,"./pages/stock-adjustment/Editor.vue":GS,"./pages/stock-adjustment/Index.vue":dV,"./pages/stock-movement/Index.vue":fV,"./pages/supplier/Detail.vue":jV,"./pages/supplier/Editor.vue":WV,"./pages/supplier/Index.vue":aq,"./pages/supplier/detail/MainInfoTab.vue":xV,"./pages/supplier/detail/OrderHistoryTab.vue":PV,"./pages/tax-scheme/Editor.vue":uq,"./pages/tax-scheme/Index.vue":hq})});
