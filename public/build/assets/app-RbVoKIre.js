import{r as T,a as W,c as U,o as u,w as a,b as t,d as e,e as h,f as k,Q as ce,t as r,u as l,g as L,h as Ue,i as ra,T as Je,j as Cn,k as fe,l as Te,m as Ge,n as Q,p as rt,q as de,s as ee,v,x as Xt,y as q,z as re,A as M,B as lt,F as H,C as Qe,D as ae,E as wt,G as yt,H as K,I as Tn,J as Ca,K as no,L as Dt,M as G,N as aa,O as xe,R as se,P as Ce,S as so,U as Pn,V as Rn,W as Ht,X as jt,Y as Ta,Z as Ia,_ as On,$ as tt,a0 as Dn,a1 as In,a2 as Un,a3 as Bt,a4 as jn,a5 as En,a6 as Pa,a7 as Jt,a8 as Ra,a9 as Ya,aa as An,ab as ca,ac as Wa,ad as Mn,ae as Qa,af as Nn,ag as ro,ah as Bn,ai as Fn,aj as zn,ak as Ea,al as Aa,am as Ln,an as Nt,ao as ve,ap as Ee,aq as He,ar as Ke,as as he,at as Oe,au as Y,av as Se,aw as it,ax as We,ay as Me,az as Zt,aA as qe,aB as Re,aC as ot,aD as ze,aE as Xe,aF as Ye,aG as at,aH as Ae,aI as le,aJ as F,aK as me,aL as st,aM as Be,aN as ia,aO as fa,aP as De,aQ as Fe,aR as Ze,aS as Ja,aT as Ot,aU as ga,aV as oa,aW as Ma,aX as da,aY as St,aZ as Hn,a_ as na,a$ as Kn,b0 as Yn,b1 as io,b2 as Wn,b3 as Qn,b4 as Jn,b5 as Gn,b6 as Ga,b7 as Xn,b8 as Zn,b9 as es,ba as ts,bb as ea,bc as je,bd as kt,be as as,bf as Xa,bg as ls,bh as os,bi as ns,bj as ss,bk as rs,bl as is,bm as ds,bn as be,bo as la,bp as sa,bq as mt,br as us,bs as ms,bt as cs,bu as ps,bv as fs,bw as gs,bx as Na,by as bs,bz as Ct,bA as bt,bB as Ba,bC as Ua,bD as uo,bE as nt,bF as Yt,bG as mo,bH as ta,bI as $t,bJ as co,bK as vs,bL as vt,bM as ft,bN as gt,bO as Vt,bP as po,bQ as fo,bR as go,bS as bo,bT as ba,bU as Ft,bV as _s,bW as ys,bX as ks,bY as vo,bZ as ws,b_ as hs,b$ as $s,c0 as Za,c1 as xs,c2 as Ss,c3 as Vs,c4 as qs,c5 as Cs,c6 as Ts,c7 as Ps,c8 as Rs,c9 as Os}from"./virtual_pwa-register-BNxYNVuv.js";const Ds={class:"q-ma-md"},Is={key:0},Us={__name:"Autocomplete1",setup(c){const s=T(null),m=T([]);let o=null;const i=(n,f)=>{if(n.length<2){f(()=>{m.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{Ue.get(`/web-api/customers?q=${n}`).then(b=>{const p=b.data.data.map(d=>({label:`${d.code} - ${d.name}`,value:d.id,data:d}));f(()=>{m.value=p})}).catch(b=>{console.error("Gagal mengambil data pelanggan:",b),f(()=>{m.value=[]})})})};return(n,f)=>{const b=W("guest-layout");return u(),U(b,null,{default:a(()=>[t("div",Ds,[e(ce,{class:"full-width",modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=p=>s.value=p),"use-input":"",label:"Cari Pelanggan",options:m.value,onFilter:i,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),s.value?(u(),h("div",Is," Saldo: Rp. "+r(l(L)(s.value.data.wallet_balance)),1)):k("",!0)])]),_:1})}}},js=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"})),Es={style:{"margin-left":"-10px"}},va={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(c,{emit:s}){const m=c,o=s;return(i,n)=>(u(),h("div",Es,[e(ra,{class:"full-width q-pl-none","model-value":m.modelValue,disable:m.disable,label:m.label,"onUpdate:modelValue":n[0]||(n[0]=f=>o("update:modelValue",f))},null,8,["model-value","disable","label"])]))}};function ja(c){return c instanceof File||c instanceof Blob||c instanceof FileList&&c.length>0||c instanceof FormData&&Array.from(c.values()).some(s=>ja(s))||typeof c=="object"&&c!==null&&Object.values(c).some(s=>ja(s))}function As(c,s=null){const m=Je(c,s);let o=f=>f,i=null;const n={transform:f=>b=>(o=b,f),submit:f=>(b,p,d={})=>{m.wasSuccessful=!1,m.recentlySuccessful=!1,m.clearErrors(),clearTimeout(i),d.onBefore&&d.onBefore(),m.processing=!0,d.onStart&&d.onStart();const g=o(m.data());axios[b](p,g,{headers:{"Content-Type":ja(g)?"multipart/form-data":"application/json"},onUploadProgress:_=>{m.progress=_,d.onProgress&&d.onProgress(_)}}).then(_=>{m.processing=!1,m.progress=null,m.clearErrors(),m.wasSuccessful=!0,m.recentlySuccessful=!0,i=setTimeout(()=>m.recentlySuccessful=!1,2e3),d.onSuccess&&d.onSuccess(_.data),m.defaults(Cn(m.data())),m.isDirty=!1}).catch(_=>{var y;m.processing=!1,m.progress=null,m.clearErrors(),((y=_.response)==null?void 0:y.status)===422&&Object.keys(_.response.data.errors).forEach(x=>{m.setError(x,_.response.data.errors[x][0])}),d.onError&&d.onError(_)}).finally(()=>{m.processing=!1,m.progress=null,d.onFinish&&d.onFinish()})}};return new Proxy(m,{get:(f,b,p)=>Object.keys(n).indexOf(b)<0?f[b]:n[b](p)})}const Ms={class:"column"},Ns={class:"row"},Bs={class:"q-my-sm text-grey-7 text-subtitle1 text-bold"},Fs={class:"flex justify-center"},zs={__name:"Login",setup(c){let s=As({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const m=fe();console.log(m.props.data);const o=()=>rt({form:s,url:route("admin.auth.login"),onSuccess:()=>{s.processing=!0,window.location.href=route("admin.dashboard")}}),i=T(!1);return(n,f)=>{const b=W("i-head"),p=W("guest-layout");return u(),h(H,null,[e(b,{title:"Login"}),e(p,null,{default:a(()=>[e(Te,{class:"row justify-center items-center"},{default:a(()=>[t("div",Ms,[t("div",Ns,[e(Ge,{class:"q-gutter-md",onSubmit:Q(o,["prevent"])},{default:a(()=>[e(de,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:a(()=>[e(ee,{class:"text-center"},{default:a(()=>[t("div",Bs,[v(" Login ke "+r(l(m).props.company.name)+" ",1),t("div",Fs,[e(Xt,{size:"100px",class:"q-my-none"},{default:a(()=>[e(q,{name:"badge",color:"grey"})]),_:1})])]),e(re,{modelValue:l(s).username,"onUpdate:modelValue":f[0]||(f[0]=d=>l(s).username=d),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!l(s).errors.username,autocomplete:"username","error-message":l(s).errors.username,disable:l(s).processing,rules:[d=>d&&d.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:a(()=>[e(q,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(re,{modelValue:l(s).password,"onUpdate:modelValue":f[2]||(f[2]=d=>l(s).password=d),type:i.value?"text":"password",label:"Kata Sandi",error:!!l(s).errors.password,autocomplete:"current-password","error-message":l(s).errors.password,"lazy-rules":"",disable:l(s).processing,rules:[d=>d&&d.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:a(()=>[e(M,{dense:"",flat:"",round:"",onClick:f[1]||(f[1]=d=>i.value=!i.value)},{default:a(()=>[e(q,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(va,{class:"q-mt-sm",modelValue:l(s).remember,"onUpdate:modelValue":f[3]||(f[3]=d=>l(s).remember=d),disable:l(s).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(lt,null,{default:a(()=>[e(M,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:l(s).processing,loading:l(s).loading,"data-test":"submit"},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Ls=Object.freeze(Object.defineProperty({__proto__:null,default:zs},Symbol.toStringTag,{value:"Module"})),Hs={class:"q-gutter-sm"},Ks={class:"col col-md-6 q-pa-xs"},Ys={class:"detail q-mt-md"},Ws={key:0},Qs={class:"text-bold"},el="Tutup Sesi Kasir",Js={__name:"Close",setup(c){const s=fe(),m=Je({closing_notes:s.props.data.closing_notes,closing_balance:parseFloat(s.props.data.closing_balance)}),o=()=>rt({form:m,url:route("admin.cashier-session.close",{id:s.props.data.id})});return(i,n)=>{const f=W("i-head"),b=W("authenticated-layout");return u(),h(H,null,[e(f,{title:el}),e(b,null,{title:a(()=>[v(r(el))]),"left-button":a(()=>[t("div",Hs,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ks,[e(Ge,{class:"row",onSubmit:Q(o,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":n[1]||(n[1]=p=>l(m).id=p)},null,512),[[wt,l(m).id]]),e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[t("table",Ys,[t("tbody",null,[t("tr",null,[n[4]||(n[4]=t("td",{style:{width:"130px"}},"Session ID",-1)),n[5]||(n[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.id),1)]),t("tr",null,[n[6]||(n[6]=t("td",null,"Terminal",-1)),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"Kasir",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.user.username)+" - "+r(l(s).props.data.user.name),1)]),t("tr",null,[n[10]||(n[10]=t("td",null,"Saldo Awal",-1)),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.opening_balance)),1)]),l(s).props.data.opening_notes?(u(),h("tr",Ws,[n[12]||(n[12]=t("td",null,"Catatan Buka",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.opening_notes),1)])):k("",!0),t("tr",null,[n[14]||(n[14]=t("td",null,"Total Penjualan",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.total_sales)),1)]),t("tr",null,[n[16]||(n[16]=t("td",null,"Total Pemasukan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.total_income)),1)]),t("tr",null,[n[18]||(n[18]=t("td",null,"Total Pengeluaran",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.total_expense)),1)]),t("tr",null,[n[21]||(n[21]=t("td",null,"Saldo Akhir",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,[t("div",Qs,r(l(yt)(l(s).props.data.closing_balance)),1),n[20]||(n[20]=t("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(re,{modelValue:l(m).closing_notes,"onUpdate:modelValue":n[2]||(n[2]=p=>l(m).closing_notes=p),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(m).processing,error:!!l(m).errors.closing_notes,"error-message":l(m).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:l(m).processing},null,8,["disable"]),e(M,{label:"Batal",icon:"cancel",disable:l(m).processing,onClick:n[3]||(n[3]=p=>l(K).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Gs=Object.freeze(Object.defineProperty({__proto__:null,default:Js},Symbol.toStringTag,{value:"Module"}));let Xs=0;const Zs=["click","keydown"],er={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Xs++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function tr(c,s,m,o){const i=Tn(no,Ca);if(i===Ca)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ca;const{proxy:n}=Dt(),f=T(null),b=T(null),p=T(null),d=G(()=>c.disable===!0||c.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},c.ripple===!0?{}:c.ripple)),g=G(()=>i.currentModel.value===c.name),_=G(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(g.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(c.icon&&c.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(c.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(c.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),y=G(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(c.contentClass!==void 0?` ${c.contentClass}`:"")),x=G(()=>c.disable===!0||i.hasFocus.value===!0||g.value===!1&&i.hasActiveTab.value===!0?-1:c.tabindex||0);function S(E,I){if(I!==!0&&f.value!==null&&f.value.focus(),c.disable!==!0){i.updateModel({name:c.name}),m("click",E);return}}function C(E){Pn(E,[13,32])?S(E,!0):Rn(E)!==!0&&E.keyCode>=35&&E.keyCode<=40&&E.altKey!==!0&&E.metaKey!==!0&&i.onKbdNavigate(E.keyCode,n.$el)===!0&&Ht(E),m("keydown",E)}function j(){const E=i.tabProps.value.narrowIndicator,I=[],O=Ce("div",{ref:p,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});c.icon!==void 0&&I.push(Ce(q,{class:"q-tab__icon",name:c.icon})),c.label!==void 0&&I.push(Ce("div",{class:"q-tab__label"},c.label)),c.alert!==!1&&I.push(c.alertIcon!==void 0?Ce(q,{class:"q-tab__alert-icon",color:c.alert!==!0?c.alert:void 0,name:c.alertIcon}):Ce("div",{class:"q-tab__alert"+(c.alert!==!0?` text-${c.alert}`:"")})),E===!0&&I.push(O);const B=[Ce("div",{class:"q-focus-helper",tabindex:-1,ref:f}),Ce("div",{class:y.value},so(s.default,I))];return E===!1&&B.push(O),B}const z={name:G(()=>c.name),rootRef:b,tabIndicatorRef:p,routeData:o};aa(()=>{i.unregisterTab(z)}),xe(()=>{i.registerTab(z)});function V(E,I){const O={ref:b,class:_.value,tabindex:x.value,role:"tab","aria-selected":g.value===!0?"true":"false","aria-disabled":c.disable===!0?"true":void 0,onClick:S,onKeydown:C,...I};return ae(Ce(E,O,j()),[[se,d.value]])}return{renderTab:V,$tabs:i}}const dt=jt({name:"QTab",props:er,emits:Zs,setup(c,{slots:s,emit:m}){const{renderTab:o}=tr(c,s,m);return()=>o("div")}});function ar(c,s,m){const o=m===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${c?` text-${c}`:""}`}const lr=["left","center","right","justify"],Tt=jt({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:c=>lr.includes(c)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(c,{slots:s,emit:m}){const{proxy:o}=Dt(),{$q:i}=o,{registerTick:n}=Ta(),{registerTick:f}=Ta(),{registerTick:b}=Ta(),{registerTimeout:p,removeTimeout:d}=Ia(),{registerTimeout:g,removeTimeout:_}=Ia(),y=T(null),x=T(null),S=T(c.modelValue),C=T(!1),j=T(!0),z=T(!1),V=T(!1),E=[],I=T(0),O=T(!1);let B=null,w=null,$;const D=G(()=>({activeClass:c.activeClass,activeColor:c.activeColor,activeBgColor:c.activeBgColor,indicatorClass:ar(c.indicatorColor,c.switchIndicator,c.vertical),narrowIndicator:c.narrowIndicator,inlineLabel:c.inlineLabel,noCaps:c.noCaps})),R=G(()=>{const ye=I.value,Ve=S.value;for(let Ne=0;Ne<ye;Ne++)if(E[Ne].name.value===Ve)return!0;return!1}),P=G(()=>`q-tabs__content--align-${C.value===!0?"left":V.value===!0?"justify":c.align}`),A=G(()=>`q-tabs row no-wrap items-center q-tabs--${C.value===!0?"":"not-"}scrollable q-tabs--${c.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${c.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${c.mobileArrows===!0?"":"out"}-arrows`+(c.dense===!0?" q-tabs--dense":"")+(c.shrink===!0?" col-shrink":"")+(c.stretch===!0?" self-stretch":"")),N=G(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+P.value+(c.contentClass!==void 0?` ${c.contentClass}`:"")),oe=G(()=>c.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),ge=G(()=>c.vertical!==!0&&i.lang.rtl===!0),_e=G(()=>On===!1&&ge.value===!0);tt(ge,we),tt(()=>c.modelValue,ye=>{ue({name:ye,setCurrent:!0,skipEmit:!0})}),tt(()=>c.outsideArrows,Ie);function ue({name:ye,setCurrent:Ve,skipEmit:Ne}){S.value!==ye&&(Ne!==!0&&c["onUpdate:modelValue"]!==void 0&&m("update:modelValue",ye),(Ve===!0||c["onUpdate:modelValue"]===void 0)&&(X(S.value,ye),S.value=ye))}function Ie(){n(()=>{ke({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function ke(ye){if(oe.value===void 0||x.value===null)return;const Ve=ye[oe.value.container],Ne=Math.min(x.value[oe.value.scroll],Array.prototype.reduce.call(x.value.children,(pt,et)=>pt+(et[oe.value.content]||0),0)),ct=Ve>0&&Ne>Ve;C.value=ct,ct===!0&&f(we),V.value=Ve<parseInt(c.breakpoint,10)}function X(ye,Ve){const Ne=ye!=null&&ye!==""?E.find(pt=>pt.name.value===ye):null,ct=Ve!=null&&Ve!==""?E.find(pt=>pt.name.value===Ve):null;if(ma===!0)ma=!1;else if(Ne&&ct){const pt=Ne.tabIndicatorRef.value,et=ct.tabIndicatorRef.value;B!==null&&(clearTimeout(B),B=null),pt.style.transition="none",pt.style.transform="none",et.style.transition="none",et.style.transform="none";const Le=pt.getBoundingClientRect(),ht=et.getBoundingClientRect();et.style.transform=c.vertical===!0?`translate3d(0,${Le.top-ht.top}px,0) scale3d(1,${ht.height?Le.height/ht.height:1},1)`:`translate3d(${Le.left-ht.left}px,0,0) scale3d(${ht.width?Le.width/ht.width:1},1,1)`,b(()=>{B=setTimeout(()=>{B=null,et.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",et.style.transform="none"},70)})}ct&&C.value===!0&&te(ct.rootRef.value)}function te(ye){const{left:Ve,width:Ne,top:ct,height:pt}=x.value.getBoundingClientRect(),et=ye.getBoundingClientRect();let Le=c.vertical===!0?et.top-ct:et.left-Ve;if(Le<0){x.value[c.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Le),we();return}Le+=c.vertical===!0?et.height-pt:et.width-Ne,Le>0&&(x.value[c.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Le),we())}function we(){const ye=x.value;if(ye===null)return;const Ve=ye.getBoundingClientRect(),Ne=c.vertical===!0?ye.scrollTop:Math.abs(ye.scrollLeft);ge.value===!0?(j.value=Math.ceil(Ne+Ve.width)<ye.scrollWidth-1,z.value=Ne>0):(j.value=Ne>0,z.value=c.vertical===!0?Math.ceil(Ne+Ve.height)<ye.scrollHeight:Math.ceil(Ne+Ve.width)<ye.scrollWidth)}function ne(ye){w!==null&&clearInterval(w),w=setInterval(()=>{$e(ye)===!0&&Z()},5)}function J(){ne(_e.value===!0?Number.MAX_SAFE_INTEGER:0)}function ie(){ne(_e.value===!0?0:Number.MAX_SAFE_INTEGER)}function Z(){w!==null&&(clearInterval(w),w=null)}function pe(ye,Ve){const Ne=Array.prototype.filter.call(x.value.children,ht=>ht===Ve||ht.matches&&ht.matches(".q-tab.q-focusable")===!0),ct=Ne.length;if(ct===0)return;if(ye===36)return te(Ne[0]),Ne[0].focus(),!0;if(ye===35)return te(Ne[ct-1]),Ne[ct-1].focus(),!0;const pt=ye===(c.vertical===!0?38:37),et=ye===(c.vertical===!0?40:39),Le=pt===!0?-1:et===!0?1:void 0;if(Le!==void 0){const ht=ge.value===!0?-1:1,Ut=Ne.indexOf(Ve)+Le*ht;return Ut>=0&&Ut<ct&&(te(Ne[Ut]),Ne[Ut].focus({preventScroll:!0})),!0}}const Pe=G(()=>_e.value===!0?{get:ye=>Math.abs(ye.scrollLeft),set:(ye,Ve)=>{ye.scrollLeft=-Ve}}:c.vertical===!0?{get:ye=>ye.scrollTop,set:(ye,Ve)=>{ye.scrollTop=Ve}}:{get:ye=>ye.scrollLeft,set:(ye,Ve)=>{ye.scrollLeft=Ve}});function $e(ye){const Ve=x.value,{get:Ne,set:ct}=Pe.value;let pt=!1,et=Ne(Ve);const Le=ye<et?-1:1;return et+=Le*5,et<0?(pt=!0,et=0):(Le===-1&&et<=ye||Le===1&&et>=ye)&&(pt=!0,et=ye),ct(Ve,et),we(),pt}function _t(ye,Ve){for(const Ne in ye)if(ye[Ne]!==Ve[Ne])return!1;return!0}function xt(){let ye=null,Ve={matchedLen:0,queryDiff:9999,hrefLen:0};const Ne=E.filter(Le=>Le.routeData!==void 0&&Le.routeData.hasRouterLink.value===!0),{hash:ct,query:pt}=o.$route,et=Object.keys(pt).length;for(const Le of Ne){const ht=Le.routeData.exact.value===!0;if(Le.routeData[ht===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ut,query:Va,matched:Vn,href:qn}=Le.routeData.resolvedLink.value,qa=Object.keys(Va).length;if(ht===!0){if(Ut!==ct||qa!==et||_t(pt,Va)===!1)continue;ye=Le.name.value;break}if(Ut!==""&&Ut!==ct||qa!==0&&_t(Va,pt)===!1)continue;const Mt={matchedLen:Vn.length,queryDiff:et-qa,hrefLen:qn.length-Ut.length};if(Mt.matchedLen>Ve.matchedLen){ye=Le.name.value,Ve=Mt;continue}else if(Mt.matchedLen!==Ve.matchedLen)continue;if(Mt.queryDiff<Ve.queryDiff)ye=Le.name.value,Ve=Mt;else if(Mt.queryDiff!==Ve.queryDiff)continue;Mt.hrefLen>Ve.hrefLen&&(ye=Le.name.value,Ve=Mt)}if(ye===null&&E.some(Le=>Le.routeData===void 0&&Le.name.value===S.value)===!0){ma=!1;return}ue({name:ye,setCurrent:!0})}function It(ye){if(d(),O.value!==!0&&y.value!==null&&ye.target&&typeof ye.target.closest=="function"){const Ve=ye.target.closest(".q-tab");Ve&&y.value.contains(Ve)===!0&&(O.value=!0,C.value===!0&&te(Ve))}}function At(){p(()=>{O.value=!1},30)}function zt(){La.avoidRouteWatcher===!1?g(xt):_()}function za(){if($===void 0){const ye=tt(()=>o.$route.fullPath,zt);$=()=>{ye(),$=void 0}}}function xn(ye){E.push(ye),I.value++,Ie(),ye.routeData===void 0||o.$route===void 0?g(()=>{if(C.value===!0){const Ve=S.value,Ne=Ve!=null&&Ve!==""?E.find(ct=>ct.name.value===Ve):null;Ne&&te(Ne.rootRef.value)}}):(za(),ye.routeData.hasRouterLink.value===!0&&zt())}function Sn(ye){E.splice(E.indexOf(ye),1),I.value--,Ie(),$!==void 0&&ye.routeData!==void 0&&(E.every(Ve=>Ve.routeData===void 0)===!0&&$(),zt())}const La={currentModel:S,tabProps:D,hasFocus:O,hasActiveTab:R,registerTab:xn,unregisterTab:Sn,verifyRouteModel:zt,updateModel:ue,onKbdNavigate:pe,avoidRouteWatcher:!1};jn(no,La);function Ha(){B!==null&&clearTimeout(B),Z(),$!==void 0&&$()}let Ka,ma;return aa(Ha),Dn(()=>{Ka=$!==void 0,Ha()}),In(()=>{Ka===!0&&(za(),ma=!0,zt()),Ie()}),()=>Ce("div",{ref:y,class:A.value,role:"tablist",onFocusin:It,onFocusout:At},[Ce(Un,{onResize:ke}),Ce("div",{ref:x,class:N.value,onScroll:we},Bt(s.default)),Ce(q,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(j.value===!0?"":" q-tabs__arrow--faded"),name:c.leftIcon||i.iconSet.tabs[c.vertical===!0?"up":"left"],onMousedownPassive:J,onTouchstartPassive:J,onMouseupPassive:Z,onMouseleavePassive:Z,onTouchendPassive:Z}),Ce(q,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(z.value===!0?"":" q-tabs__arrow--faded"),name:c.rightIcon||i.iconSet.tabs[c.vertical===!0?"down":"right"],onMousedownPassive:ie,onTouchstartPassive:ie,onMouseupPassive:Z,onMouseleavePassive:Z,onTouchendPassive:Z})])}});function or(c){const s=[.06,6,50];return typeof c=="string"&&c.length&&c.split(":").forEach((m,o)=>{const i=parseFloat(m);i&&(s[o]=i)}),s}const nr=En({name:"touch-swipe",beforeMount(c,{value:s,arg:m,modifiers:o}){if(o.mouse!==!0&&Jt.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",n={handler:s,sensitivity:or(m),direction:Ya(o),noop:An,mouseStart(f){Qa(f,n)&&Nn(f)&&(ca(n,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(f,!0))},touchStart(f){if(Qa(f,n)){const b=f.target;ca(n,"temp",[[b,"touchmove","move","notPassiveCapture"],[b,"touchcancel","end","notPassiveCapture"],[b,"touchend","end","notPassiveCapture"]]),n.start(f)}},start(f,b){Jt.is.firefox===!0&&Ra(c,!0);const p=Wa(f);n.event={x:p.left,y:p.top,time:Date.now(),mouse:b===!0,dir:!1}},move(f){if(n.event===void 0)return;if(n.event.dir!==!1){Ht(f);return}const b=Date.now()-n.event.time;if(b===0)return;const p=Wa(f),d=p.left-n.event.x,g=Math.abs(d),_=p.top-n.event.y,y=Math.abs(_);if(n.event.mouse!==!0){if(g<n.sensitivity[1]&&y<n.sensitivity[1]){n.end(f);return}}else if(window.getSelection().toString()!==""){n.end(f);return}else if(g<n.sensitivity[2]&&y<n.sensitivity[2])return;const x=g/b,S=y/b;n.direction.vertical===!0&&g<y&&g<100&&S>n.sensitivity[0]&&(n.event.dir=_<0?"up":"down"),n.direction.horizontal===!0&&g>y&&y<100&&x>n.sensitivity[0]&&(n.event.dir=d<0?"left":"right"),n.direction.up===!0&&g<y&&_<0&&g<100&&S>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&g<y&&_>0&&g<100&&S>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&g>y&&d<0&&y<100&&x>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&g>y&&d>0&&y<100&&x>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Ht(f),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Mn(),n.styleCleanup=C=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const j=()=>{document.body.classList.remove("no-pointer-events--children")};C===!0?setTimeout(j,50):j()}),n.handler({evt:f,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:b,distance:{x:g,y}})):n.end(f)},end(f){n.event!==void 0&&(Pa(n,"temp"),Jt.is.firefox===!0&&Ra(c,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),f!==void 0&&n.event.dir!==!1&&Ht(f),n.event=void 0)}};if(c.__qtouchswipe=n,o.mouse===!0){const f=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ca(n,"main",[[c,"mousedown","mouseStart",`passive${f}`]])}Jt.has.touch===!0&&ca(n,"main",[[c,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[c,"touchmove","noop","notPassiveCapture"]])},updated(c,s){const m=c.__qtouchswipe;m!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&m.end(),m.handler=s.value),m.direction=Ya(s.modifiers))},beforeUnmount(c){const s=c.__qtouchswipe;s!==void 0&&(Pa(s,"main"),Pa(s,"temp"),Jt.is.firefox===!0&&Ra(c,!1),s.styleCleanup!==void 0&&s.styleCleanup(),delete c.__qtouchswipe)}}),sr={name:{required:!0},disable:Boolean},tl={setup(c,{slots:s}){return()=>Ce("div",{class:"q-panel scroll",role:"tabpanel"},Bt(s.default))}},rr={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},ir=["update:modelValue","beforeTransition","transition"];function dr(){const{props:c,emit:s,proxy:m}=Dt(),{getCache:o}=Fn(),{registerTimeout:i}=Ia();let n,f;const b=T(null),p=T(null);function d(oe){const ge=c.vertical===!0?"up":"left";$((m.$q.lang.rtl===!0?-1:1)*(oe.direction===ge?1:-1))}const g=G(()=>[[nr,d,void 0,{horizontal:c.vertical!==!0,vertical:c.vertical,mouse:!0}]]),_=G(()=>c.transitionPrev||`slide-${c.vertical===!0?"down":"right"}`),y=G(()=>c.transitionNext||`slide-${c.vertical===!0?"up":"left"}`),x=G(()=>`--q-transition-duration: ${c.transitionDuration}ms`),S=G(()=>typeof c.modelValue=="string"||typeof c.modelValue=="number"?c.modelValue:String(c.modelValue)),C=G(()=>({include:c.keepAliveInclude,exclude:c.keepAliveExclude,max:c.keepAliveMax})),j=G(()=>c.keepAliveInclude!==void 0||c.keepAliveExclude!==void 0);tt(()=>c.modelValue,(oe,ge)=>{const _e=I(oe)===!0?O(oe):-1;f!==!0&&w(_e===-1?0:_e<O(ge)?-1:1),b.value!==_e&&(b.value=_e,s("beforeTransition",oe,ge),i(()=>{s("transition",oe,ge)},c.transitionDuration))});function z(){$(1)}function V(){$(-1)}function E(oe){s("update:modelValue",oe)}function I(oe){return oe!=null&&oe!==""}function O(oe){return n.findIndex(ge=>ge.props.name===oe&&ge.props.disable!==""&&ge.props.disable!==!0)}function B(){return n.filter(oe=>oe.props.disable!==""&&oe.props.disable!==!0)}function w(oe){const ge=oe!==0&&c.animated===!0&&b.value!==-1?"q-transition--"+(oe===-1?_.value:y.value):null;p.value!==ge&&(p.value=ge)}function $(oe,ge=b.value){let _e=ge+oe;for(;_e!==-1&&_e<n.length;){const ue=n[_e];if(ue!==void 0&&ue.props.disable!==""&&ue.props.disable!==!0){w(oe),f=!0,s("update:modelValue",ue.props.name),setTimeout(()=>{f=!1});return}_e+=oe}c.infinite===!0&&n.length!==0&&ge!==-1&&ge!==n.length&&$(oe,oe===-1?n.length:-1)}function D(){const oe=O(c.modelValue);return b.value!==oe&&(b.value=oe),!0}function R(){const oe=I(c.modelValue)===!0&&D()&&n[b.value];return c.keepAlive===!0?[Ce(zn,C.value,[Ce(j.value===!0?o(S.value,()=>({...tl,name:S.value})):tl,{key:S.value,style:x.value},()=>oe)])]:[Ce("div",{class:"q-panel scroll",style:x.value,key:S.value,role:"tabpanel"},[oe])]}function P(){if(n.length!==0)return c.animated===!0?[Ce(ro,{name:p.value},R)]:R()}function A(oe){return n=Bn(Bt(oe.default,[])).filter(ge=>ge.props!==null&&ge.props.slot===void 0&&I(ge.props.name)===!0),n.length}function N(){return n}return Object.assign(m,{next:z,previous:V,goTo:E}),{panelIndex:b,panelDirectives:g,updatePanelsList:A,updatePanelIndex:D,getPanelContent:P,getEnabledPanels:B,getPanels:N,isValidPanelName:I,keepAliveProps:C,needsUniqueKeepAliveWrapper:j,goToPanelByOffset:$,goToPanel:E,nextPanel:z,previousPanel:V}}const ut=jt({name:"QTabPanel",props:sr,setup(c,{slots:s}){return()=>Ce("div",{class:"q-tab-panel",role:"tabpanel"},Bt(s.default))}}),Pt=jt({name:"QTabPanels",props:{...rr,...Ea},emits:ir,setup(c,{slots:s}){const m=Dt(),o=Aa(c,m.proxy.$q),{updatePanelsList:i,getPanelContent:n,panelDirectives:f}=dr(),b=G(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(s),Ln("div",{class:b.value},n(),"pan",c.swipeable,()=>f.value))}}),ur={class:"detail"},mr={key:0},cr={key:1},pr={key:0},fr={key:0},gr={colspan:"100%"},br={class:"q-my-md"},vr={key:4},_r={colspan:"100%"},yr={key:5},kr={colspan:"100%"},_o={__name:"MainInfoTab",setup(c){const s=fe();return(m,o)=>(u(),h("table",ur,[t("tbody",null,[o[27]||(o[27]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.id),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Terminal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.cashier_terminal.name),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Kasir",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.user.username)+" - "+r(l(s).props.data.user.name),1)]),t("tr",null,[o[7]||(o[7]=t("td",null,"Status",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),t("tr",null,[o[9]||(o[9]=t("td",null,"Saldo Awal",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.opening_balance)),1)]),l(s).props.data.opening_notes?(u(),h("tr",mr,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.opening_notes),1)])):k("",!0),o[29]||(o[29]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),t("tr",null,[o[13]||(o[13]=t("td",null,"Total Penjualan",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.total_sales)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.total_income)),1)]),t("tr",null,[o[17]||(o[17]=t("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.total_expense)),1)]),l(s).props.data.is_closed?k("",!0):(u(),h("tr",cr,[o[19]||(o[19]=t("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.actual_balance)),1)])),l(s).props.data.is_closed?(u(),h(H,{key:2},[o[25]||(o[25]=t("tr",null,[t("td",{colspan:"100%"},[t("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),t("tr",null,[o[21]||(o[21]=t("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.closing_balance)),1)]),l(s).props.data.closing_notes?(u(),h("tr",pr,[o[23]||(o[23]=t("td",null,"Catatan",-1)),o[24]||(o[24]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.closing_notes),1)])):k("",!0)],64)):k("",!0),m.$can("admin.cashier-session.close")?(u(),h(H,{key:3},[l(s).props.data.is_closed?k("",!0):(u(),h("tr",fr,[t("td",gr,[t("div",br,[e(M,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=i=>m.$inertia.get(m.route("admin.cashier-session.close",{id:l(s).props.data.id})))},{default:a(()=>o[26]||(o[26]=[v(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):k("",!0),o[30]||(o[30]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),l(s).props.data.created_at?(u(),h("tr",vr,[t("td",_r," Dibuat "+r(l(Nt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(u(),h("tr",yr,[t("td",kr," Diperbarui "+r(l(Nt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},wr=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),hr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},$r={class:"text-bold"},xr={key:0},Sr={class:"text-bold"},Vr={key:1},qr={key:0},Cr={key:0},Tr={key:1},yo={__name:"SalesOrderTab",props:{data:Object},setup(c){const s=c,m=T([]),o=T(!0),i=Ee({...He(),cashier_session_id:s.data.id,status:["closed","canceled"]}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{b()});const b=(g=null)=>Ke({pagination:n,filter:i,props:g,rows:m,url:route("admin.sales-order.data"),loading:o}),p=he(),d=G(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(u(),U(Me,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:x,filter:S})=>[t("div",hr,[t("span",null,r(x)+" "+r(S?" with term "+S:""),1)])]),body:a(y=>[e(Oe,{props:y,class:"cursor-pointer",onClick:Q(x=>l(K).get(g.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",$r,[e(q,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(p).screen.lt.md?(u(),h(H,{key:0},[y.row.customer?(u(),h("div",xr,[e(q,{class:"inline-icon",name:"person"}),v(" "+r(y.row.customer_code)+" "+r(y.row.customer.name),1)])):k("",!0),t("div",Sr,[e(q,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(L)(y.row.grand_total)),1)]),y.row.notes?(u(),h("div",Vr,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(it,{color:y.row.status==="closed"?"green":"red"},{default:a(()=>[v(r(g.$CONSTANTS.SALES_ORDER_STATUSES[y.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"customer",props:y},{default:a(()=>[y.row.customer?(u(),h("div",qr,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),v(" "+r(y.row.customer_code)+" - "+r(y.row.customer_name),1)]),y.row.customer_phone?(u(),h("div",Cr,[e(q,{name:"phone",class:"inline-icon"}),v(" "+r(y.row.customer_phone),1)])):k("",!0),y.row.customer_address?(u(),h("div",Tr,[e(q,{name:"home_pin",class:"inline-icon"}),v(" "+r(y.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:y},{default:a(()=>[t("div",null,r(l(L)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Pr=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),Rr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Or={class:"text-bold"},Dr={class:"text-bold"},Ir={key:0},Ur={class:"q-mt-sm"},ko={__name:"FinanceTransactionTab",props:{data:Object},setup(c){var g;const s=c;console.log(s.data);const m=T([]),o=T(!0),i=Ee({...He(),account_id:(g=s.data.cashier_terminal)==null?void 0:g.finance_account_id,from_datetime:Zt(s.data.opened_at),to_datetime:s.data.closed_at?Zt(s.data.closed_at):null}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{b()});const b=(_=null)=>Ke({pagination:n,filter:i,props:_,rows:m,url:route("admin.finance-transaction.data"),loading:o}),p=he(),d=G(()=>p.screen.gt.sm?f:f.filter(_=>_.name==="id"));return(_,y)=>(u(),U(Me,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":y[0]||(y[0]=x=>n.value=x),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:x,message:S,filter:C})=>[t("div",Rr,[t("span",null,r(S)+" "+r(C?" with term "+C:""),1)])]),body:a(x=>[e(Oe,{props:x},{default:a(()=>[e(Y,{key:"id",props:x},{default:a(()=>[t("div",Or,[e(q,{class:"inline-icon",name:"tag"}),v(" "+r(x.row.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),v(" "+r(l(ve)(x.row.datetime)),1)]),l(p).screen.lt.md?(u(),h(H,{key:0},[t("div",Dr,[e(q,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(L)(x.row.amount)),1)]),x.row.notes?(u(),h("div",Ir,[e(Se,{text:x.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",Ur,[e(it,{color:x.row.amount>=0?"green":"red"},{default:a(()=>[v(r(_.$CONSTANTS.FINANCE_TRANSACTION_TYPES[x.row.type]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"amount",props:x},{default:a(()=>[t("span",{class:qe(x.row.amount<0?"text-red":"text-green")},r(l(L)(x.row.amount)),3)]),_:2},1032,["props"]),e(Y,{key:"notes",props:x,class:"wrap-column"},{default:a(()=>[e(Se,{text:x.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},jr=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),Er={class:"q-gutter-sm"},Ar={class:"col col-lg-6 q-pa-xs"},Mr={class:"row"},al="Rincian Sesi Kasir",Nr={__name:"Detail",setup(c){const s=fe(),m=G(()=>s.props.data),o=T("main");return tt(()=>s.props.tab,i=>{i&&(o.value=i)},{immediate:!0}),(i,n)=>{const f=W("i-head"),b=W("authenticated-layout");return u(),h(H,null,[e(f,{title:al}),e(b,null,{title:a(()=>[v(r(al))]),"left-button":a(()=>[t("div",Er,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ar,[t("div",Mr,[e(de,{square:"",flat:"",bordered:"",class:"col q-pa-none"},{default:a(()=>[e(Tt,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Ringkasan"}),e(dt,{name:"sales",label:"Transaksi Penjualan"}),e(dt,{name:"finance",label:"Transaksi Keuangan"})]),_:1},8,["modelValue"]),e(Re),e(Pt,{modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=p=>o.value=p),animated:"",class:"q-pa-none"},{default:a(()=>[e(ut,{name:"main"},{default:a(()=>[e(_o,{data:m.value},null,8,["data"])]),_:1}),e(ut,{name:"sales",class:"q-pa-xs"},{default:a(()=>[e(yo,{data:m.value},null,8,["data"])]),_:1}),e(ut,{name:"finance",class:"q-pa-xs"},{default:a(()=>[e(ko,{data:m.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Br=Object.freeze(Object.defineProperty({__proto__:null,default:Nr},Symbol.toStringTag,{value:"Module"}));function Et(){return{protectClick:s=>(m,o)=>{const i=window.getSelection();if(i&&!i.isCollapsed){o.stopPropagation();return}s(m,o)}}}const Fr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},zr={class:"q-pa-xs"},Lr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Hr={class:"row items-center q-gutter-x-sm"},Kr={class:"avatar"},Yr={class:"col"},Wr={class:"row items-center no-wrap"},Qr={class:"row items-center no-wrap"},Jr={class:"row items-center q-gutter-x-sm"},Gr={class:"avatar"},Xr={class:"col"},Zr={class:"row items-center no-wrap"},ei={class:"flex justify-end"},ll="Sesi Kasir",ti={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=Ee({search:"",status:"all",...He()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];xe(()=>{x()});const y=E=>st({message:`Hapus Sesi: ${E.cashier_terminal.name} - ${E.user.username}?`,url:route("admin.cashier-session.delete",E.id),fetchItemsCallback:x,loading:i}),x=(E=null)=>{Ke({pagination:d,filter:p,props:E,rows:o,url:route("admin.cashier-session.data"),loading:i,tableRef:n})},S=()=>x(),C=E=>K.get(route("admin.cashier-session.detail",{id:E.id})),{protectClick:j}=Et(),z=j(C),V=G(()=>s.screen.gt.sm?g:g.filter(E=>E.name==="id"||E.name==="action"));return(E,I)=>{const O=W("i-head"),B=W("authenticated-layout");return u(),h(H,null,[e(O,{title:ll}),e(B,null,ze({title:a(()=>[v(r(ll))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=w=>m.value=!m.value)},null,8,["icon"]),E.$can("admin.cashier-session.open")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=w=>l(K).get(E.route("admin.cashier-session.open")))})):k("",!0)]),default:a(()=>[t("div",zr,[e(Me,{class:"full-height-table",style:Ye({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":I[5]||(I[5]=w=>d.value=w),filter:p.search,loading:i.value,columns:V.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:w,message:$,filter:D})=>[t("div",Lr,[t("span",null,r($)+" "+r(D?" with term "+D:""),1)])]),body:a(w=>[e(Oe,{props:w,class:qe(["cursor-pointer",w.row.is_closed?"":"bg-yellow-3"]),onClick:Q($=>l(z)(w.row,$),["stop"])},{default:a(()=>[e(Y,{key:"id",props:w,class:"wrap-column"},{default:a(()=>[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),v(" ID: "+r(w.row.id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(w.row.cashier_terminal.name),1)]),t("div",null,[e(q,{class:"inline-icon",name:"person"}),v(" "+r(w.row.user.username)+" - "+r(w.row.user.name),1)]),l(s).screen.lt.md?(u(),h(H,{key:0},[e(Re),t("div",Hr,[t("div",Kr,[e(q,{name:"login",size:"25px",color:"grey-8"})]),t("div",Yr,[t("div",Wr,[e(q,{name:"calendar_clock",size:"xs",class:"q-mr-xs"}),t("span",null,r(w.row.opened_at?l(ve)(w.row.opened_at):"-"),1)]),t("div",Qr,[e(q,{name:"money",size:"xs",class:"q-mr-xs"}),t("span",null,r(l(yt)(w.row.opening_balance)),1)])])]),w.row.is_closed?(u(),h(H,{key:0},[e(Re),t("div",Jr,[t("div",Gr,[e(q,{name:"logout",size:"25px",color:"grey-8"})]),t("div",Xr,[t("div",Zr,[e(q,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(w.row.closed_at?l(ve)(w.row.closed_at):"-"),1)]),t("div",null,[e(q,{class:"inline-icon",name:"money"}),v(" "+r(l(yt)(w.row.closing_balance)),1)])])])],64)):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"opening_info",props:w},{default:a(()=>[t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(w.row.opened_at?l(ve)(w.row.opened_at):"-"),1)]),t("div",null,[e(q,{class:"inline-icon",name:"money"}),v(" "+r(l(yt)(w.row.opening_balance)),1)]),w.row.opening_notes?(u(),U(Se,{key:0,text:w.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"closing_info",props:w},{default:a(()=>[t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(w.row.closed_at?l(ve)(w.row.closed_at):"-"),1)]),t("div",null,[e(q,{class:"inline-icon",name:"money"}),v(" "+r(l(yt)(w.row.closing_balance)),1)]),w.row.closing_notes?(u(),U(Se,{key:0,text:w.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"action",props:w},{default:a(()=>[t("div",ei,[E.$can("admin.cashier-session.close")||E.$can("admin.cashier-session.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[4]||(I[4]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[E.$can("admin.cashier-session.close")?ae((u(),U(le,{key:0,disable:w.row.is_closed,clickable:"",onClick:Q($=>l(K).get(E.route("admin.cashier-session.close",w.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"logout"})]),_:1}),e(F,null,{default:a(()=>I[6]||(I[6]=[v("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[se],[me]]):k("",!0),E.$can("admin.cashier-session.delete")&&!w.row.is_closed?ae((u(),U(le,{key:1,onClick:Q($=>y(w.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>I[7]||(I[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Fr,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[2]||(I[2]=w=>p.status=w),S],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[3]||(I[3]=w=>p.search=w),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ai=Object.freeze(Object.defineProperty({__proto__:null,default:ti},Symbol.toStringTag,{value:"Module"})),li={class:"q-gutter-sm"},oi={class:"col col-md-6 q-pa-xs"},ol="Buka Sesi Kasir",ni={__name:"Open",setup(c){const s=fe(),m=Je({cashier_terminal_id:s.props.data.cashier_terminal_id,opening_balance:parseFloat(s.props.data.opening_balance),opening_notes:s.props.data.opening_notes}),o=[...s.props.cashier_terminals.map(n=>({value:n.id,label:n.name,balance:parseFloat(n.finance_account.balance)}))],i=()=>rt({form:m,url:route("admin.cashier-session.open")});return tt(()=>m.cashier_terminal_id,n=>{if(n){const f=o.find(b=>b.value===n);f&&(m.opening_balance=f.balance)}else m.opening_balance=0}),(n,f)=>{const b=W("i-head"),p=W("authenticated-layout");return u(),h(H,null,[e(b,{title:ol}),e(p,null,{title:a(()=>[v(r(ol))]),"left-button":a(()=>[t("div",li,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=d=>n.$inertia.get(n.route("admin.cashier-session.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",oi,[e(Ge,{class:"row",onSubmit:Q(i,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=d=>l(m).id=d)},null,512),[[wt,l(m).id]]),e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[e(ce,{class:"custom-select",modelValue:l(m).cashier_terminal_id,"onUpdate:modelValue":f[2]||(f[2]=d=>l(m).cashier_terminal_id=d),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:l(m).errors.cashier_terminal_id,error:!!l(m).errors.cashier_terminal_id,disable:l(m).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Be,{modelValue:l(m).opening_balance,"onUpdate:modelValue":f[3]||(f[3]=d=>l(m).opening_balance=d),label:"Saldo Buka Sesi",lazyRules:"",disable:l(m).processing,error:!!l(m).errors.opening_balance,errorMessage:l(m).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),f[6]||(f[6]=t("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(re,{modelValue:l(m).opening_notes,"onUpdate:modelValue":f[4]||(f[4]=d=>l(m).opening_notes=d),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(m).processing,error:!!l(m).errors.opening_notes,"error-message":l(m).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:l(m).processing},null,8,["disable"]),e(M,{label:"Batal",icon:"cancel",disable:l(m).processing,onClick:f[5]||(f[5]=d=>l(K).get(n.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},si=Object.freeze(Object.defineProperty({__proto__:null,default:ni},Symbol.toStringTag,{value:"Module"})),ri={class:"detail"},ii={colspan:"3"},di={class:"text-bold text-grey-8"},ui={key:0},mi={colspan:"100%"},ci={key:1},pi={colspan:"100%"},wo={__name:"MainInfoTab",setup(c){const s=fe();return(m,o)=>(u(),h("table",ri,[t("tbody",null,[t("tr",null,[t("td",ii,[t("div",di,[o[1]||(o[1]=v(" Info Terminal Kasir ")),e(M,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=i=>m.$inertia.get(m.route("admin.cashier-terminal.edit",{id:l(s).props.data.id})))})])])]),t("tr",null,[o[2]||(o[2]=t("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[4]||(o[4]=t("td",null,"Lokasi",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.location),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.finance_account.name),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Saldo",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(l(yt)(l(s).props.data.finance_account.balance)),1)]),t("tr",null,[o[10]||(o[10]=t("td",null,"Catatan",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),l(s).props.data.created_at?(u(),h("tr",ui,[t("td",mi," Dibuat "+r(l(Nt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(u(),h("tr",ci,[t("td",pi," Diperbarui "+r(l(Nt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0)])]))}},fi=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),gi={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ho={__name:"SessionHistoryTab",setup(c){const s=fe(),m=T([]),o=T(!0),i=Ee({cashier_terminal_id:s.props.data.id,...He()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"}];xe(()=>{b()});const b=(g=null)=>Ke({pagination:n,filter:i,props:g,rows:m,url:route("admin.cashier-session.data"),loading:o}),p=he(),d=G(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(u(),U(Me,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:x,filter:S})=>[t("div",gi,[t("span",null,r(x)+" "+r(S?" with term "+S:""),1)])]),body:a(y=>[e(Oe,{props:y,class:"cursor-pointer",onClick:Q(x=>l(K).get(g.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y,class:"wrap-column"},{default:a(()=>[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),v(" Session ID: "+r(y.row.id),1)]),t("div",null,[e(q,{class:"inline-icon",name:"point_of_sale"}),v(" "+r(y.row.cashier_terminal.name),1)]),t("div",null,[e(q,{class:"inline-icon",name:"person"}),v(" "+r(y.row.user.username)+" - "+r(y.row.user.name),1)])]),_:2},1032,["props"]),e(Y,{key:"opening_info",props:y},{default:a(()=>[t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(y.row.opened_at?l(ve)(y.row.opened_at):"-"),1)]),t("div",null,[e(q,{class:"inline-icon",name:"money"}),v(" "+r(l(yt)(y.row.opening_balance)),1)]),y.row.opening_notes?(u(),U(Se,{key:0,text:y.row.opening_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"closing_info",props:y},{default:a(()=>[t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(y.row.closed_at?l(ve)(y.row.closed_at):"-"),1)]),t("div",null,[e(q,{class:"inline-icon",name:"money"}),v(" "+r(l(yt)(y.row.closing_balance)),1)]),y.row.closing_notes?(u(),U(Se,{key:0,text:y.row.closing_notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},bi=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),vi={class:"q-gutter-sm"},_i={class:"col col-lg-6 q-pa-xs"},yi={class:"row"},nl="Rincian Terminal Kasir",ki={__name:"Detail",setup(c){const s=T("main");return(m,o)=>{const i=W("i-head"),n=W("authenticated-layout");return u(),h(H,null,[e(i,{title:nl}),e(n,null,{title:a(()=>[v(r(nl))]),"left-button":a(()=>[t("div",vi,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=f=>m.$inertia.get(m.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",_i,[t("div",yi,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Tt,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=f=>s.value=f),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(Pt,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=f=>s.value=f),animated:""},{default:a(()=>[e(ut,{name:"main"},{default:a(()=>[e(wo)]),_:1}),e(ut,{name:"session-history",class:"q-pa-xs"},{default:a(()=>[e(ho)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},wi=Object.freeze(Object.defineProperty({__proto__:null,default:ki},Symbol.toStringTag,{value:"Module"})),hi={class:"q-gutter-sm"},$i={class:"col col-md-6 q-pa-xs"},xi={key:0,class:"q-my-xs text-grey-8"},Si={__name:"Editor",setup(c){const s=fe(),m=(s.props.data.id?"Edit":"Tambah")+" Terminal",o=Je({id:s.props.data.id,name:s.props.data.name,finance_account_id:s.props.data.finance_account_id??"new",location:s.props.data.location,active:!!s.props.data.active,notes:s.props.data.notes}),i=[{value:"new",label:"Buat Baru (Otomatis)"},...s.props.finance_accounts.map(f=>({value:f.id,label:f.name}))],n=()=>rt({form:o,url:route("admin.cashier-terminal.save")});return(f,b)=>{const p=W("i-head"),d=W("authenticated-layout");return u(),h(H,null,[e(p,{title:m}),e(d,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",hi,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>f.$inertia.get(f.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",$i,[e(Ge,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(o).id=g)},null,512),[[wt,l(o).id]]),e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[e(re,{modelValue:l(o).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{class:"custom-select",modelValue:l(o).finance_account_id,"onUpdate:modelValue":b[3]||(b[3]=g=>l(o).finance_account_id=g),label:"Akun Kas",options:i,"map-options":"","emit-value":"",errorMessage:l(o).errors.finance_account_id,error:!!l(o).errors.finance_account_id,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),l(o).finance_account_id==="new"?(u(),h("div",xi,[b[8]||(b[8]=v(" Akun keuangan akan dibuat ")),l(o).name?(u(),h(H,{key:0},[v(" dengan nama Kas "+r(l(o).name),1)],64)):k("",!0)])):k("",!0),e(re,{modelValue:l(o).location,"onUpdate:modelValue":b[4]||(b[4]=g=>l(o).location=g),modelModifiers:{trim:!0},label:"Lokasi",error:!!l(o).errors.location,disable:l(o).processing,"error-message":l(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(re,{modelValue:l(o).notes,"onUpdate:modelValue":b[5]||(b[5]=g=>l(o).notes=g),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(va,{modelValue:l(o).active,"onUpdate:modelValue":b[6]||(b[6]=g=>l(o).active=g),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:l(o).processing},null,8,["disable"]),e(M,{label:"Batal",icon:"cancel",disable:l(o).processing,onClick:b[7]||(b[7]=g=>l(K).get(f.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Vi=Object.freeze(Object.defineProperty({__proto__:null,default:Si},Symbol.toStringTag,{value:"Module"})),qi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ci={class:"q-pa-xs"},Ti={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Pi={class:"flex justify-end"},sl="Terminal Kasir",Ri={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=Ee({search:"",status:"active",...He()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:s.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];xe(()=>{x()});const y=E=>st({message:`Hapus Terminal Kasir ${E.name}?`,url:route("admin.cashier-terminal.delete",E.id),fetchItemsCallback:x,loading:i}),x=(E=null)=>{Ke({pagination:d,filter:p,props:E,rows:o,url:route("admin.cashier-terminal.data"),loading:i,tableRef:n})},S=()=>x(),C=E=>K.get(route("admin.cashier-terminal.detail",{id:E.id})),{protectClick:j}=Et(),z=j(C),V=G(()=>s.screen.gt.sm?g:g.filter(E=>E.name==="name"||E.name==="finance_account_id"||E.name==="action"));return(E,I)=>{const O=W("i-head"),B=W("authenticated-layout");return u(),h(H,null,[e(O,{title:sl}),e(B,null,ze({title:a(()=>[v(r(sl))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=w=>m.value=!m.value)},null,8,["icon"]),E.$can("admin.cashier-terminal.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=w=>l(K).get(E.route("admin.cashier-terminal.add")))})):k("",!0)]),default:a(()=>[t("div",Ci,[e(Me,{class:"full-height-table",style:Ye({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":I[5]||(I[5]=w=>d.value=w),filter:p.search,loading:i.value,columns:V.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:w,message:$,filter:D})=>[t("div",Ti,[t("span",null,r($)+" "+r(D?" with term "+D:""),1)])]),body:a(w=>[e(Oe,{props:w,class:qe([w.row.active?"":"bg-red-1","cursor-pointer"]),onClick:Q($=>l(z)(w.row,$),["stop"])},{default:a(()=>[e(Y,{key:"name",props:w,class:"wrap-column"},{default:a(()=>[t("div",null,[e(q,{name:"wallet"}),v(" "+r(w.row.name),1)]),t("div",null,[e(q,{name:"home_pin"}),v(" "+r(w.row.location),1)]),l(s).screen.lt.md?(u(),U(Se,{key:0,text:w.row.notes,icon:"notes"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:w},{default:a(()=>[t("div",null,[e(q,{name:"wallet"}),v(" "+r(w.row.finance_account.name),1)]),t("div",null,[e(q,{name:"money"}),v(" "+r(l(yt)(w.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(Y,{key:"notes",props:w},{default:a(()=>[e(Se,{text:w.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:w},{default:a(()=>[t("div",Pi,[E.$can("admin.cashier-terminal.edit")||E.$can("admin.cashier-terminal.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[4]||(I[4]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[E.$can("admin.cashier-terminal.edit")?ae((u(),U(le,{key:0,clickable:"",onClick:Q($=>l(K).get(E.route("admin.cashier-terminal.edit",w.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>I[6]||(I[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),E.$can("admin.cashier-terminal.delete")?ae((u(),U(le,{key:1,onClick:Q($=>y(w.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>I[7]||(I[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",qi,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[2]||(I[2]=w=>p.status=w),S],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[3]||(I[3]=w=>p.search=w),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Oi=Object.freeze(Object.defineProperty({__proto__:null,default:Ri},Symbol.toStringTag,{value:"Module"})),Di={class:"q-gutter-sm"},Ii={class:"col col-md-6 q-pa-xs"},Ui={class:"row"},ji={class:"detail"},Ei={key:0},Ai={key:1},Mi={key:0},Ni={key:1},Bi={colspan:"3",class:"bg-white"},rl="Rincian Konfirmasi Top Up",Fi={__name:"Detail",setup(c){const s=fe(),m=()=>fa({message:`Setujui konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"accept"},onSuccess:()=>{K.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}}),o=()=>fa({message:`Tolak konfirmasi transaksi #${s.props.data.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save",s.props.data.id),data:{id:s.props.data.id,action:"reject"},onSuccess:()=>{K.get(route("admin.customer-wallet-transaction-confirmation.detail",s.props.data.id))}});return(i,n)=>{const f=W("i-head"),b=W("i-link"),p=W("my-link"),d=W("authenticated-layout");return u(),h(H,null,[e(f,{title:rl}),e(d,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Di,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=g=>i.$inertia.get(i.route("admin.customer-wallet-transaction-confirmation.index")))})])]),"right-button":a(()=>[l(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:reject")?(u(),U(M,{key:0,icon:"cancel",flat:"",dense:"",color:"negative",rounded:"",onClick:n[1]||(n[1]=g=>o()),class:"q-mr-sm"})):k("",!0),l(s).props.data.status=="pending"&&i.$can("admin.customer-wallet-transaction-confirmation:accept")?(u(),U(M,{key:1,icon:"check",dense:"",color:"positive",rounded:"",onClick:n[2]||(n[2]=g=>m())})):k("",!0)]),title:a(()=>[t("span",{class:"text-subtitle2"},r(rl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ii,[t("div",Ui,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,null,{default:a(()=>[n[24]||(n[24]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),t("table",ji,[t("tbody",null,[t("tr",null,[n[3]||(n[3]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),n[4]||(n[4]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Waktu",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Pelanggan",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),e(b,{href:i.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[v(r(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(q,{name:"person",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(u(),h("div",Ei,[e(q,{name:"phone",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(u(),h("div",Ai,[e(q,{name:"home_pin",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[n[11]||(n[11]=t("td",null,"Akun Tujuan",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[e(p,{href:i.route("admin.finance-account.detail",{id:l(s).props.data.finance_account.id})},{default:a(()=>[v(r(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),n[10]||(n[10]=t("br",null,null,-1)),l(s).props.data.finance_account.type==="bank"?(u(),h(H,{key:0},[v(" Rek "+r(l(s).props.data.finance_account.bank)+" an "+r(l(s).props.data.finance_account.holder)+" ",1),n[9]||(n[9]=t("br",null,null,-1)),v(" "+r(l(s).props.data.finance_account.number),1)],64)):k("",!0)])]),t("tr",null,[n[13]||(n[13]=t("td",null,"Jumlah",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(L)(l(s).props.data.amount)),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"Status",-1)),n[16]||(n[16]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[n[17]||(n[17]=t("td",null,"Catatan",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(u(),h("tr",Mi,[n[19]||(n[19]=t("td",null,"Dibuat",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(u(),h("tr",Ni,[n[21]||(n[21]=t("td",null,"Diperbarui",-1)),n[22]||(n[22]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(u(),h(H,{key:2},[n[23]||(n[23]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",Bi,[e(ia,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:Ye([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},zi=Object.freeze(Object.defineProperty({__proto__:null,default:Fi},Symbol.toStringTag,{value:"Module"})),Li={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Hi={class:"q-pa-xs"},Ki={key:0},Yi={class:"flex justify-end no-wrap"},il="Konfirmasi Top Up Deposit",Wi={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=T(null),d=T(!1),g=De().startOf("month").toDate(),_=De().endOf("month").toDate(),y=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],x=Ee({search:"",start_date:g,end_date:_,status:"all",...He()}),S=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",field:"action",align:"center"}];xe(()=>{j()});const j=(w=null)=>{const $={...x,start_date:De(x.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:De(x.end_date).format("YYYY-MM-DD HH:mm:ss")};Ke({pagination:S,filter:$,props:w,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:i,tableRef:n})},z=()=>{j()},V=G(()=>s.screen.gt.sm?C:C.filter(w=>["code","action"].includes(w.name))),E=w=>fa({message:`Setujui konfirmasi transaksi #${w.code}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:j,loading:i,data:{id:w.id,action:"accept"}}),I=w=>fa({message:`Tolak konfirmasi transaksi #${w.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save"),fetchItemsCallback:j,loading:i,data:{id:w.id,action:"reject"}}),O=w=>st({message:`Hapus konfirmasi transaksi ${w.code}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",w.id),fetchItemsCallback:j,loading:i}),B=w=>{p.value=w,d.value=!0};return(w,$)=>{const D=W("i-head"),R=W("authenticated-layout");return u(),h(H,null,[e(D,{title:il}),e(R,null,ze({title:a(()=>[v(r(il))]),"right-button":a(()=>[e(M,{class:"q-ml-sm",icon:m.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:$[0]||($[0]=P=>m.value=!m.value)},null,8,["icon"])]),default:a(()=>[t("div",Hi,[e(Me,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Ye({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:S.value,"onUpdate:pagination":$[6]||($[6]=P=>S.value=P),filter:x.search,loading:i.value,columns:V.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:j,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),body:a(P=>[e(Oe,{props:P,class:"cursor-pointer",onClick:Q(A=>l(K).get(w.route("admin.customer-wallet-transaction-confirmation.detail",{id:P.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"code",props:P,class:"wrap-column"},{default:a(()=>[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),v(" "+r(P.row.code),1)]),l(s).screen.gt.sm?k("",!0):(u(),h("div",Ki,[e(q,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(P.row.datetime)),1)])),l(s).screen.gt.sm?k("",!0):(u(),h(H,{key:1},[e(Se,{icon:"account_balance",text:P.row.finance_account.name},null,8,["text"]),t("div",null,[e(q,{name:"person",class:"inline-icon"}),v(" "+r(P.row.customer.code)+" - "+r(P.row.customer.name),1)]),t("div",null,[e(q,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(L)(P.row.amount)),1)]),P.row.notes?(u(),U(Se,{key:0,icon:"notes",text:P.row.notes},null,8,["text"])):k("",!0),t("div",null,[e(Ja,{status:P.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(Y,{key:"datetime",props:P,class:"wrap-column"},{default:a(()=>[v(r(l(ve)(P.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"customer_id",props:P},{default:a(()=>[e(Se,{text:P.row.customer.code+" - "+P.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:P},{default:a(()=>[v(r(P.row.finance_account.name),1),$[8]||($[8]=t("br",null,null,-1)),v(" "+r(P.row.finance_account.bank)+" "+r(P.row.finance_account.number)+" an. "+r(P.row.finance_account.holder),1)]),_:2},1032,["props"]),e(Y,{key:"amount",props:P,style:{"text-align":"right"}},{default:a(()=>[v(r(l(L)(P.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"status",props:P,class:"text-center"},{default:a(()=>[e(Ja,{status:P.row.status},null,8,["status"])]),_:2},1032,["props"]),e(Y,{key:"notes",props:P,class:"word-wrap"},{default:a(()=>[e(Se,{icon:"notes",text:P.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:P,class:"text-center"},{default:a(()=>[t("div",Yi,[e(M,{icon:"image",color:"primary",dense:"",flat:"",disable:P.row.image_path===null||P.row.image_path==="",onClick:Q(A=>B(P.row.image_path),["stop"])},{default:a(()=>[P.row.image_path!=null?(u(),U(Ot,{key:0},{default:a(()=>$[9]||($[9]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),w.$can("admin.customer-wallet-transaction-confirmation:accept")||w.$can("admin.customer-wallet-transaction-confirmation:deny")||w.$can("admin.customer-wallet-transaction-confirmation.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[w.$can("admin.customer-wallet-transaction-confirmation:accept")?ae((u(),U(le,{key:0,onClick:Q(A=>E(P.row),["stop"]),clickable:"",disable:P.row.status!=="pending"},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"check"})]),_:1}),e(F,null,{default:a(()=>$[10]||($[10]=[v("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[se],[me]]):k("",!0),w.$can("admin.customer-wallet-transaction-confirmation:deny")?ae((u(),U(le,{key:1,onClick:Q(A=>I(P.row),["stop"]),clickable:"",disable:P.row.status!=="pending"},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"cancel"})]),_:1}),e(F,null,{default:a(()=>$[11]||($[11]=[v("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[se],[me]]):k("",!0),e(Re),w.$can("admin.customer-wallet-transaction-confirmation.delete")?ae((u(),U(le,{key:2,onClick:Q(A=>O(P.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>$[12]||($[12]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(ga,{modelValue:d.value,"onUpdate:modelValue":$[7]||($[7]=P=>d.value=P),imageUrl:`/${p.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Li,[e(Ze,{modelValue:x.start_date,"onUpdate:modelValue":[$[1]||($[1]=P=>x.start_date=P),z],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Ze,{modelValue:x.end_date,"onUpdate:modelValue":[$[2]||($[2]=P=>x.end_date=P),z],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:x.status,"onUpdate:modelValue":[$[3]||($[3]=P=>x.status=P),z],options:y,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":$[4]||($[4]=P=>x.search=P),placeholder:"Cari...",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Qi=Object.freeze(Object.defineProperty({__proto__:null,default:Wi},Symbol.toStringTag,{value:"Module"}));function $o(c,s=!1){const m=c.map(f=>({value:f.id,label:f.name+" ("+f.code+")"})),o=s?[{value:"all",label:"Semua"},...m]:m,i=T([...o]);return{filteredCustomers:i,filterCustomersFn:(f,b)=>{b(()=>{i.value=o.filter(p=>p.label.toLowerCase().includes(f.toLowerCase()))})},customers:o}}const Ji={class:"col col-md-6 q-pa-xs"},dl="Penyesuaian Saldo Deposit Pelanggan",Gi={__name:"Adjustment",setup(c){const s=fe(),{filteredCustomers:m,filterCustomersFn:o}=$o(s.props.customers,!1),i=Je({customer_id:null,old_wallet_balance:0,new_wallet_balance:0,notes:""}),n=()=>i.amount=i.new_wallet_balance-i.old_wallet_balance;tt(()=>i.customer_id,async p=>{if(!p){i.old_wallet_balance=0,i.new_wallet_balance=0,n();return}i.processing=!0;try{const d=await axios.get(route("admin.customer.wallet_balance",{id:p}));i.new_wallet_balance=i.old_wallet_balance=d.data.wallet_balance}catch(d){console.error("Gagal mengambil saldo:",d),i.old_wallet_balance=0,i.new_wallet_balance=0}i.processing=!1,n()});const f=G(()=>i.new_wallet_balance-i.old_wallet_balance),b=()=>rt({form:i,url:route("admin.customer-wallet-transaction.adjustment")});return(p,d)=>{const g=W("i-head"),_=W("authenticated-layout");return u(),h(H,null,[e(g,{title:dl}),e(_,null,{title:a(()=>[v(r(dl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ji,[e(Ge,{class:"row",onSubmit:Q(b,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[e(ce,{class:"custom-select",modelValue:l(i).customer_id,"onUpdate:modelValue":d[0]||(d[0]=y=>l(i).customer_id=y),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(m),"map-options":"","emit-value":"",errorMessage:l(i).errors.customer_id,onFilter:l(o),error:!!l(i).errors.customer_id,disable:l(i).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(F,null,{default:a(()=>d[6]||(d[6]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Be,{modelValue:l(i).old_wallet_balance,"onUpdate:modelValue":d[1]||(d[1]=y=>l(i).old_wallet_balance=y),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:l(i).processing,error:!!l(i).errors.old_wallet_balance,errorMessage:l(i).errors.old_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Be,{modelValue:l(i).new_wallet_balance,"onUpdate:modelValue":d[2]||(d[2]=y=>l(i).new_wallet_balance=y),label:"Saldo Seharusnya",lazyRules:"",disable:l(i).processing,error:!!l(i).errors.new_wallet_balance,errorMessage:l(i).errors.new_wallet_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Be,{modelValue:f.value,"onUpdate:modelValue":d[3]||(d[3]=y=>f.value=y),label:"Selisih",readonly:"",lazyRules:"",disable:l(i).processing},null,8,["modelValue","disable"]),e(re,{modelValue:l(i).notes,"onUpdate:modelValue":d[4]||(d[4]=y=>l(i).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.notes,"error-message":l(i).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing},null,8,["disable"]),e(M,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:d[5]||(d[5]=y=>l(K).get(p.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Xi=Object.freeze(Object.defineProperty({__proto__:null,default:Gi},Symbol.toStringTag,{value:"Module"})),Zi={class:"q-gutter-sm"},ed={class:"col col-md-6 q-pa-xs"},td={class:"row"},ad={class:"detail"},ld={key:0},od={key:1},nd={key:0},sd={key:1},rd={colspan:"3",class:"bg-white"},ul="Rincian Transaksi",id={__name:"Detail",setup(c){const s=fe();return(m,o)=>{const i=W("i-head"),n=W("i-link"),f=W("authenticated-layout");return u(),h(H,null,[e(i,{title:ul}),e(f,null,{"left-button":a(()=>[t("div",Zi,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.router.get(m.route("admin.customer-wallet-transaction.index")))})])]),title:a(()=>[v(r(ul))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",ed,[t("div",td,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,null,{default:a(()=>[o[18]||(o[18]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Deposit ",-1)),t("table",ad,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Waktu",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),t("tr",null,[o[5]||(o[5]=t("td",null,"Pelanggan",-1)),o[6]||(o[6]=t("td",null,":",-1)),t("td",null,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),e(n,{href:m.route("admin.customer.detail",{id:l(s).props.data.customer_id})},{default:a(()=>[v(""+r(l(s).props.data.customer.code),1)]),_:1},8,["href"])]),t("div",null,[e(q,{name:"person",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.name),1)]),l(s).props.data.customer.phone?(u(),h("div",ld,[e(q,{name:"phone",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.phone),1)])):k("",!0),l(s).props.data.customer.address?(u(),h("div",od,[e(q,{name:"home_pin",class:"inline-icon"}),v(" "+r(l(s).props.data.customer.address),1)])):k("",!0)])]),t("tr",null,[o[7]||(o[7]=t("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[l(s).props.data.type]),1)]),t("tr",null,[o[9]||(o[9]=t("td",null,"Jumlah",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",{class:qe(l(s).props.data.amount>0?"text-positive":"text-negative")},r(l(oa)(l(s).props.data.amount))+"Rp. "+r(l(L)(Math.abs(l(s).props.data.amount))),3)]),t("tr",null,[o[11]||(o[11]=t("td",null,"Catatan",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(u(),h("tr",nd,[o[13]||(o[13]=t("td",null,"Dibuat",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(u(),h("tr",sd,[o[15]||(o[15]=t("td",null,"Diperbarui",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(u(),h(H,{key:2},[o[17]||(o[17]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",rd,[e(ia,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:Ye([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},dd=Object.freeze(Object.defineProperty({__proto__:null,default:id},Symbol.toStringTag,{value:"Module"})),ud={class:"q-gutter-sm"},md={class:"col col-md-6 q-pa-xs"},cd={__name:"Editor",setup(c){var d;const s=fe(),m=(s.props.data.id?"Edit":"Catat")+" Transaksi Deposit Pelanggan",{filteredCustomers:o,filterCustomersFn:i}=$o(s.props.customers,!1),n=[{label:"Deposit / Uang Masuk (+)",value:"deposit"},{label:"Pengembalian / Uang Keluar (-)",value:"withdrawal"}],f=s.props.finance_accounts.map(g=>({label:g.name,value:g.id})),b=Je({id:s.props.data.id,customer_id:s.props.data.customer_id,finance_account_id:s.props.data.finance_account_id,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((d=s.props.data)==null?void 0:d.image_path)??"",image:null}),p=()=>{da(b,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:b,url:route("admin.customer-wallet-transaction.save")})};return(g,_)=>{const y=W("i-head"),x=W("authenticated-layout");return u(),h(H,null,[e(y,{title:m}),e(x,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",ud,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=S=>g.$inertia.get(g.route("admin.customer-wallet-transaction.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",md,[e(Ge,{class:"row",onSubmit:Q(p,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=S=>l(b).id=S)},null,512),[[wt,l(b).id]]),e(Ze,{autofocus:"",modelValue:l(b).datetime,"onUpdate:modelValue":_[2]||(_[2]=S=>l(b).datetime=S),label:"Tanggal",error:!!l(b).errors.datetime,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(ce,{class:"custom-select",modelValue:l(b).customer_id,"onUpdate:modelValue":_[3]||(_[3]=S=>l(b).customer_id=S),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:l(o),"map-options":"","emit-value":"",errorMessage:l(b).errors.customer_id,onFilter:l(i),error:!!l(b).errors.customer_id,disable:l(b).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(F,null,{default:a(()=>_[10]||(_[10]=[v("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(ce,{modelValue:l(b).type,"onUpdate:modelValue":_[4]||(_[4]=S=>l(b).type=S),label:"Jenis Transaksi",options:n,"map-options":"","emit-value":"",error:!!l(b).errors.type,disable:l(b).processing,errorMessage:l(b).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{modelValue:l(b).finance_account_id,"onUpdate:modelValue":_[5]||(_[5]=S=>l(b).finance_account_id=S),label:l(b).type=="deposit"?"Kas Tujuan":"Kas Asal",options:l(f),"map-options":"","emit-value":"",error:!!l(b).errors.finance_account_id,disable:l(b).processing,errorMessage:l(b).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Be,{modelValue:l(b).amount,"onUpdate:modelValue":_[6]||(_[6]=S=>l(b).amount=S),label:"Jumlah",lazyRules:"",disable:l(b).processing,error:!!l(b).errors.amount,errorMessage:l(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(re,{modelValue:l(b).notes,"onUpdate:modelValue":_[7]||(_[7]=S=>l(b).notes=S),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(b).processing,error:!!l(b).errors.notes,"error-message":l(b).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Ma,{modelValue:l(b).image,"onUpdate:modelValue":_[8]||(_[8]=S=>l(b).image=S),"initial-image-path":l(b).image_path,disabled:l(b).processing,error:!!l(b).errors.image||!!l(b).errors.image_path,"error-message":l(b).errors.image||l(b).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(b).processing},null,8,["disable"]),e(M,{icon:"cancel",label:"Batal",disable:l(b).processing,onClick:_[9]||(_[9]=S=>l(K).get(g.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},pd=Object.freeze(Object.defineProperty({__proto__:null,default:cd},Symbol.toStringTag,{value:"Module"})),fd={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},gd={class:"q-pa-xs"},bd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},vd={key:0},_d={key:0},yd={class:"flex justify-end no-wrap"},ml="Transaksi Deposit Pelanggan",kd={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=De().startOf("month").toDate(),d=De().endOf("month").toDate(),g=Ee({search:"",start_date:p,end_date:d,...He()}),_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),y=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{S()});const x=I=>st({message:`Hapus transaksi #${I.code}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",I.id),fetchItemsCallback:S,loading:i}),S=(I=null)=>{console.log(g);const O={...g,start_date:De(g.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:De(g.end_date).format("YYYY-MM-DD HH:mm:ss")};Ke({pagination:_,filter:O,props:I,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:i,tableRef:n})},C=()=>{S()},j=G(()=>s.screen.gt.sm?y:y.filter(I=>I.name==="code"||I.name==="action")),z=T(null),V=T(!1),E=I=>{z.value=I,V.value=!0};return(I,O)=>{const B=W("i-head"),w=W("authenticated-layout");return u(),h(H,null,[e(B,{title:ml}),e(w,null,ze({title:a(()=>[v(r(ml))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=$=>m.value=!m.value)},null,8,["icon"]),I.$can("admin.customer-wallet-transaction.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=$=>l(K).get(I.route("admin.customer-wallet-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",gd,[e(Me,{ref_key:"tableRef",ref:n,style:Ye({height:l(b)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":O[6]||(O[6]=$=>_.value=$),filter:g.search,loading:i.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:D,filter:R})=>[t("div",bd,[t("span",null,r(D)+" "+r(R?" with term "+R:""),1)])]),body:a($=>[e(Oe,{props:$,class:"cursor-pointer",onClick:Q(D=>l(K).get(I.route("admin.customer-wallet-transaction.detail",{id:$.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"code",props:$,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.gt.sm?k("",!0):(u(),U(q,{key:0,name:"tag",class:"inline-icon"})),v(" "+r($.row.code),1)]),l(s).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)($.row.datetime)),1)]),$.row.finance_account?(u(),h("div",vd,[e(q,{name:"wallet",class:"inline-icon"}),v(" "+r($.row.finance_account?$.row.finance_account.name:"-"),1)])):k("",!0),e(Se,{icon:"person",text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"]),t("div",{class:qe([$.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(q,{name:"money",class:"inline-icon"}),v(" "+r(l(oa)($.row.amount))+"Rp. "+r(l(L)(Math.abs($.row.amount))),1)],2),e(Se,{text:$.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),t("div",null,[e(it,null,{default:a(()=>[v(r($.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(Y,{key:"datetime",props:$},{default:a(()=>[v(r(l(ve)($.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"customer_id",props:$},{default:a(()=>[e(Se,{text:$.row.customer.code+" - "+$.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:$},{default:a(()=>[$.row.finance_account?(u(),h("div",_d,r($.row.finance_account?$.row.finance_account.name:"-"),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"amount",props:$,style:{"text-align":"right"}},{default:a(()=>[v(r(l(St)($.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:$},{default:a(()=>[e(Se,{text:$.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:$},{default:a(()=>[t("div",yd,[e(M,{icon:"image",color:"primary",dense:"",flat:"",disable:$.row.image_path===null||$.row.image_path==="",onClick:Q(D=>E($.row.image_path),["stop"])},{default:a(()=>[$.row.image_path!=null?(u(),U(Ot,{key:0},{default:a(()=>O[8]||(O[8]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),I.$can("admin.customer-wallet-transaction.delete")?(u(),U(M,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:O[5]||(O[5]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[I.$can("admin.customer-wallet-transaction.delete")?ae((u(),U(le,{key:0,onClick:Q(D=>x($.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>O[9]||(O[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ga,{modelValue:V.value,"onUpdate:modelValue":O[7]||(O[7]=$=>V.value=$),imageUrl:`/${z.value}`},null,8,["modelValue","imageUrl"])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",fd,[e(Ze,{modelValue:g.start_date,"onUpdate:modelValue":[O[2]||(O[2]=$=>g.start_date=$),C],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Ze,{modelValue:g.end_date,"onUpdate:modelValue":[O[3]||(O[3]=$=>g.end_date=$),C],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":O[4]||(O[4]=$=>g.search=$),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},wd=Object.freeze(Object.defineProperty({__proto__:null,default:kd},Symbol.toStringTag,{value:"Module"})),hd=["href"],$d={key:1},Gt={__name:"WaLink",props:{phone:{type:String,required:!0},message:{type:String,default:""},display_text:{type:String,default:""}},setup(c){const s=c,m=G(()=>Hn(s.phone,s.message)),o=G(()=>s.display_text?s.display_text:s.phone&&m.value!=="#"?s.phone:"-"),i=G(()=>s.phone&&m.value!=="#");return(n,f)=>i.value?(u(),h("a",{key:0,href:m.value,target:"_blank",rel:"noopener noreferrer"},[v(r(o.value)+" ",1),e(l(q),{name:"open_in_new",size:"xs",class:"q-ml-xs"})],8,hd)):(u(),h("span",$d,r(o.value),1))}},xd={class:"detail"},Sd={class:"detail"},Vd={key:0},qd={key:1},Cd={class:"text-grey-8"},Td={key:2},Pd={class:"text-grey-8"},Rd={key:0,class:"q-pt-md"},xo={__name:"MainInfoTab",setup(c){const s=fe(),m=()=>{st({message:`Hapus Pelanggan ${s.props.data.code}?`,url:route("admin.customer.delete",s.props.data.id),onSuccess:()=>{K.get(route("admin.customer.index"))}})};return(o,i)=>(u(),h(H,null,[i[27]||(i[27]=t("div",{class:"text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",xd,[t("tbody",null,[t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Jenis",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.type_label),1)]),t("tr",null,[i[5]||(i[5]=t("td",null,"Nama",-1)),i[6]||(i[6]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[i[7]||(i[7]=t("td",null,"Default Harga",-1)),i[8]||(i[8]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.default_price_type_label),1)]),t("tr",null,[i[9]||(i[9]=t("td",null,"No. Telepon",-1)),i[10]||(i[10]=t("td",null,":",-1)),t("td",null,[e(Gt,{phone:l(s).props.data.phone},null,8,["phone"])])]),t("tr",null,[i[11]||(i[11]=t("td",null,"Alamat",-1)),i[12]||(i[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.address?l(s).props.data.address:"-"),1)]),t("tr",null,[i[13]||(i[13]=t("td",null,"Saldo Deposit",-1)),i[14]||(i[14]=t("td",null,":",-1)),t("td",{class:qe(l(s).props.data.wallet_balance<0?"text-red":"text-green")}," Rp. "+r(l(St)(l(s).props.data.wallet_balance)),3)]),t("tr",null,[t("td",null,r(l(s).props.data.balance>0?"Piutang":"Utang"),1),i[15]||(i[15]=t("td",null,":",-1)),t("td",{class:qe(l(s).props.data.balance<0?"text-red":"text-green")}," Rp. "+r(l(St)(l(s).props.data.balance)),3)]),t("tr",null,[i[16]||(i[16]=t("td",null,"Status",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),i[28]||(i[28]=t("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun",-1)),t("table",Sd,[t("tbody",null,[l(s).props.data.created_at?(u(),h("tr",Vd,[i[18]||(i[18]=t("td",null,"Dibuat",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(l(Nt)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name)+" ("+r(l(ve)(l(s).props.data.created_at))+") ",1)])):k("",!0),l(s).props.data.updated_at?(u(),h("tr",qd,[i[20]||(i[20]=t("td",null,"Diperbarui",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(l(Nt)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name)+" ("+r(l(ve)(l(s).props.data.updated_at))+") ",1)])):k("",!0),t("tr",null,[i[22]||(i[22]=t("td",null,"Terakhir login",-1)),i[23]||(i[23]=t("td",null,":",-1)),t("td",null,[v(r(l(s).props.data.last_login_datetime?l(ve)(l(s).props.data.last_login_datetime):"Belum pernah login")+" ",1),t("span",Cd,"("+r(l(Nt)(l(s).props.data.last_login_datetime))+")",1)])]),l(s).props.data.last_activity_datetime?(u(),h("tr",Td,[i[25]||(i[25]=t("td",null,"Aktifitas Terakhir",-1)),i[26]||(i[26]=t("td",null,":",-1)),t("td",null,[v(r(l(ve)(l(s).props.data.last_activity_datetime))+" ",1),t("span",Pd,[v("("+r(l(Nt)(l(s).props.data.last_activity_datetime))+")",1),i[24]||(i[24]=t("br",null,null,-1)),v(r(l(s).props.data.last_activity_description),1)])])])):k("",!0)])]),o.$can("admin.customer.delete")?(u(),h("div",Rd,[e(M,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>m())})])):k("",!0)],64))}},Od=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),Dd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Id={class:"text-bold"},So={__name:"WalletHistoryTab",setup(c){const s=fe(),m=T([]),o=T(!0),i=Ee({customer_id:s.props.data.id,...He()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];xe(()=>{b()});const b=(g=null)=>Ke({pagination:n,filter:i,props:g,rows:m,url:route("admin.customer-wallet-transaction.data"),loading:o}),p=he(),d=G(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(u(),U(Me,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:x,filter:S})=>[t("div",Dd,[t("span",null,r(x)+" "+r(S?" with term "+S:""),1)])]),body:a(y=>[e(Oe,{props:y,class:"cursor-pointer",onClick:Q(x=>l(K).get(g.route("admin.customer-wallet-transaction.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",Id,[e(q,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(p).screen.lt.md?(u(),h(H,{key:0},[t("div",{class:qe(["text-bold",y.row.amount<0?"text-red":"text-green"])},[e(q,{name:"money",class:"inline-icon"}),v(" "+r(l(na)(y.row.amount)),1)],2),t("div",null,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):k("",!0),t("div",null,[e(it,{size:"xs",color:y.row.amount>0?"green":"red"},{default:a(()=>[e(q,{name:"category"}),v(" "+r(y.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:y},{default:a(()=>[t("div",{class:qe(y.row.amount<0?"text-red-10":y.row.amount>0?"text-green-10":"")},r(l(St)(y.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ud=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),jd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ed={class:"text-bold"},Ad={key:0},Md={key:1},Vo={__name:"OrderHistoryTab",setup(c){const s=fe(),m=T([]),o=T(!0),i=Ee({customer_id:s.props.data.id,...He()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{b()});const b=(g=null)=>Ke({pagination:n,filter:i,props:g,rows:m,url:route("admin.sales-order.data",{filter:{status:["closed","canceled"],customer_id:s.props.data.id}}),loading:o}),p=he(),d=G(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(u(),U(Me,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:x,filter:S})=>[t("div",jd,[t("span",null,r(x)+" "+r(S?" with term "+S:""),1)])]),body:a(y=>[e(Oe,{props:y,class:"cursor-pointer",onClick:Q(x=>l(K).get(g.route("admin.sales-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",Ed,[e(q,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(p).screen.lt.md?(u(),h(H,{key:0},[t("div",null,[e(q,{name:"money",class:"inline-icon"}),v(" Total: Rp. "+r(l(L)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(u(),h("div",Ad,[e(q,{name:"money",class:"inline-icon"}),v(" Sisa Utang Rp. "+r(l(L)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(u(),h("div",Md,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(it,{color:y.row.status=="closed"?"green":"red"},{default:a(()=>[v(r(y.row.status_label),1)]),_:2},1032,["color"]),e(it,{class:"q-ml-xs",color:y.row.payment_status=="fully_paid"?"green":"red"},{default:a(()=>[v(r(y.row.payment_status_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:y},{default:a(()=>[v(r(l(L)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"remaining_debt",props:y},{default:a(()=>[v(r(l(L)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Nd=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Bd={class:"q-gutter-sm"},Fd={class:"q-gutter-sm"},zd={class:"col col-lg-6 q-pa-xs"},Ld={class:"row"},cl="Rincian Pelanggan",Hd={__name:"Detail",setup(c){const s=fe(),m=T("main");return he(),(o,i)=>{const n=W("i-head"),f=W("authenticated-layout");return u(),h(H,null,[e(n,{title:cl}),e(f,null,{title:a(()=>[v(r(cl))]),"left-button":a(()=>[t("div",Bd,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.customer.index")))})])]),"right-button":a(()=>[t("div",Fd,[o.$can("admin.customer.edit")?(u(),U(M,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>l(K).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Edit Pelanggan"})):k("",!0),o.$can("admin.customer.add")?(u(),U(M,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>l(K).get(o.route("admin.customer.edit",{id:l(s).props.data.id}))),title:"Duplikat pelanggan"})):k("",!0),o.$can("admin.customer.add")?(u(),U(M,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>l(K).get(o.route("admin.customer.add"))),title:"Tambah pelanggan baru"})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",zd,[t("div",Ld,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Tt,{modelValue:m.value,"onUpdate:modelValue":i[4]||(i[4]=b=>m.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"history",label:"Riwayat Deposit"}),e(dt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Pt,{modelValue:m.value,"onUpdate:modelValue":i[5]||(i[5]=b=>m.value=b),animated:""},{default:a(()=>[e(ut,{name:"main"},{default:a(()=>[e(xo)]),_:1}),e(ut,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(So)]),_:1}),e(ut,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(Vo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Kd=Object.freeze(Object.defineProperty({__proto__:null,default:Hd},Symbol.toStringTag,{value:"Module"})),Yd={class:"q-gutter-sm"},Wd={class:"col col-md-6 q-pa-xs"},Qd={__name:"Editor",setup(c){const s=fe(),m=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Je({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,default_price_type:s.props.data.default_price_type,phone:s.props.data.phone,address:s.props.data.address,active:!!s.props.data.active,password:s.props.data.id?null:"12345",type:s.props.data.type}),i=T(!s.props.data.id),n=Fe(window.CONSTANTS.CUSTOMER_TYPES),f=Fe(window.CONSTANTS.PRODUCT_PRICE_TYPES),b=()=>rt({form:o,url:route("admin.customer.save",{id:o.id})});return(p,d)=>{const g=W("i-head"),_=W("authenticated-layout");return u(),h(H,null,[e(g,{title:m}),e(_,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",Yd,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=y=>l(K).get(p.route("admin.customer.index")))})])]),"right-button":a(()=>[e(M,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:d[1]||(d[1]=y=>b()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Wd,[e(Ge,{class:"row",onSubmit:Q(b,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":d[2]||(d[2]=y=>l(o).id=y)},null,512),[[wt,l(o).id]]),e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[e(re,{modelValue:l(o).code,"onUpdate:modelValue":d[3]||(d[3]=y=>l(o).code=y),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[y=>y&&y.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(o).name,"onUpdate:modelValue":d[4]||(d[4]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:l(o).default_price_type,"onUpdate:modelValue":d[5]||(d[5]=y=>l(o).default_price_type=y),options:l(f),label:"Tipe Harga","map-options":"","emit-value":"","hide-bottom-space":"",error:!!l(o).errors.default_price_type,"error-message":l(o).errors.default_price_type,disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up"},null,8,["modelValue","options","error","error-message","disable"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":d[6]||(d[6]=y=>l(o).type=y),label:"Jenis Akun",options:l(n),"map-options":"","emit-value":"","lazy-rules":"",disable:l(o).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(o).errors.type,"error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(re,{modelValue:l(o).phone,"onUpdate:modelValue":d[7]||(d[7]=y=>l(o).phone=y),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:l(o).processing,error:!!l(o).errors.phone,"error-message":l(o).errors.phone,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).address,"onUpdate:modelValue":d[8]||(d[8]=y=>l(o).address=y),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(re,{autocomplete:"off","aria-autocomplete":"none",modelValue:l(o).password,"onUpdate:modelValue":d[10]||(d[10]=y=>l(o).password=y),label:l(o).id?"Kata Sandi (Isi jika ingin mengganti)":"Kata Sandi Baru (Wajib diisi)",disable:l(o).processing,error:!!l(o).errors.password,"error-message":l(o).errors.password,"lazy-rules":"","hide-bottom-space":"",type:i.value?"text":"password"},{append:a(()=>[e(M,{dense:"",flat:"",round:"",onClick:d[9]||(d[9]=y=>i.value=!i.value)},{default:a(()=>[e(q,{name:i.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","label","disable","error","error-message","type"]),e(va,{modelValue:l(o).active,"onUpdate:modelValue":d[11]||(d[11]=y=>l(o).active=y),label:"Aktif",disable:l(o).processing},null,8,["modelValue","disable"])]),_:1})]),_:1}),d[12]||(d[12]=t("input",{type:"submit",style:{display:"none"}},null,-1))]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Jd=Object.freeze(Object.defineProperty({__proto__:null,default:Qd},Symbol.toStringTag,{value:"Module"}));function Qt(c,s,m,o){const i=[];return c.forEach(n=>{o(n)===!0?i.push(n):s.push({failedPropValidation:m,file:n})}),i}function pa(c){c&&c.dataTransfer&&(c.dataTransfer.dropEffect="copy"),Ht(c)}const Gd={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Xd=["rejected"];function Zd({editable:c,dnd:s,getFileInput:m,addFilesToQueue:o}){const{props:i,emit:n,proxy:f}=Dt(),b=T(null),p=G(()=>i.accept!==void 0?i.accept.split(",").map(V=>(V=V.trim(),V==="*"?"*/":(V.endsWith("/*")&&(V=V.slice(0,V.length-1)),V.toUpperCase()))):null),d=G(()=>parseInt(i.maxFiles,10)),g=G(()=>parseInt(i.maxTotalSize,10));function _(V){if(c.value)if(V!==Object(V)&&(V={target:null}),V.target!==null&&V.target.matches('input[type="file"]')===!0)V.clientX===0&&V.clientY===0&&Kn(V);else{const E=m();E&&E!==V.target&&E.click(V)}}function y(V){c.value&&V&&o(null,V)}function x(V,E,I,O){let B=Array.from(E||V.target.files);const w=[],$=()=>{w.length!==0&&n("rejected",w)};if(i.accept!==void 0&&p.value.indexOf("*/")===-1&&(B=Qt(B,w,"accept",D=>p.value.some(R=>D.type.toUpperCase().startsWith(R)||D.name.toUpperCase().endsWith(R))),B.length===0))return $();if(i.maxFileSize!==void 0){const D=parseInt(i.maxFileSize,10);if(B=Qt(B,w,"max-file-size",R=>R.size<=D),B.length===0)return $()}if(i.multiple!==!0&&B.length!==0&&(B=[B[0]]),B.forEach(D=>{D.__key=D.webkitRelativePath+D.lastModified+D.name+D.size}),O===!0){const D=I.map(R=>R.__key);B=Qt(B,w,"duplicate",R=>D.includes(R.__key)===!1)}if(B.length===0)return $();if(i.maxTotalSize!==void 0){let D=O===!0?I.reduce((R,P)=>R+P.size,0):0;if(B=Qt(B,w,"max-total-size",R=>(D+=R.size,D<=g.value)),B.length===0)return $()}if(typeof i.filter=="function"){const D=i.filter(B);B=Qt(B,w,"filter",R=>D.includes(R))}if(i.maxFiles!==void 0){let D=O===!0?I.length:0;if(B=Qt(B,w,"max-files",()=>(D++,D<=d.value)),B.length===0)return $()}if($(),B.length!==0)return B}function S(V){pa(V),s.value!==!0&&(s.value=!0)}function C(V){Ht(V),(V.relatedTarget!==null||Jt.is.safari!==!0?V.relatedTarget!==b.value:document.elementsFromPoint(V.clientX,V.clientY).includes(b.value)===!1)===!0&&(s.value=!1)}function j(V){pa(V);const E=V.dataTransfer.files;E.length!==0&&o(null,E),s.value=!1}function z(V){if(s.value===!0)return Ce("div",{ref:b,class:`q-${V}__dnd absolute-full`,onDragenter:pa,onDragover:pa,onDragleave:C,onDrop:j})}return Object.assign(f,{pickFiles:_,addFiles:y}),{pickFiles:_,addFiles:y,onDragover:S,onDragleave:C,processFiles:x,getDndNode:z,maxFilesNumber:d,maxTotalSizeNumber:g}}const qo=jt({name:"QFile",inheritAttrs:!1,props:{...Wn,...io,...Gd,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Yn,...Xd],setup(c,{slots:s,emit:m,attrs:o}){const{proxy:i}=Dt(),n=Qn(),f=T(null),b=T(!1),p=Jn(c),{pickFiles:d,onDragover:g,onDragleave:_,processFiles:y,getDndNode:x}=Zd({editable:n.editable,dnd:b,getFileInput:A,addFilesToQueue:N}),S=Gn(c),C=G(()=>Object(c.modelValue)===c.modelValue?"length"in c.modelValue?Array.from(c.modelValue):[c.modelValue]:[]),j=G(()=>Ga(C.value)),z=G(()=>C.value.map(ue=>ue.name).join(", ")),V=G(()=>Xn(C.value.reduce((ue,Ie)=>ue+Ie.size,0))),E=G(()=>({totalSize:V.value,filesNumber:C.value.length,maxFiles:c.maxFiles})),I=G(()=>({tabindex:-1,type:"file",title:"",accept:c.accept,capture:c.capture,name:p.value,...o,id:n.targetUid.value,disabled:n.editable.value!==!0})),O=G(()=>"q-file q-field--auto-height"+(b.value===!0?" q-file--dnd":"")),B=G(()=>c.multiple===!0&&c.append===!0);function w(ue){const Ie=C.value.slice();Ie.splice(ue,1),D(Ie)}function $(ue){const Ie=C.value.indexOf(ue);Ie!==-1&&w(Ie)}function D(ue){m("update:modelValue",c.multiple===!0?ue:ue[0])}function R(ue){ue.keyCode===13&&ts(ue)}function P(ue){(ue.keyCode===13||ue.keyCode===32)&&d(ue)}function A(){return f.value}function N(ue,Ie){const ke=y(ue,Ie,C.value,B.value),X=A();X!=null&&(X.value=""),ke!==void 0&&((c.multiple===!0?c.modelValue&&ke.every(te=>C.value.includes(te)):c.modelValue===ke[0])||D(B.value===!0?C.value.concat(ke):ke))}function oe(){return[Ce("input",{class:[c.inputClass,"q-file__filler"],style:c.inputStyle})]}function ge(){if(s.file!==void 0)return C.value.length===0?oe():C.value.map((Ie,ke)=>s.file({index:ke,file:Ie,ref:this}));if(s.selected!==void 0)return C.value.length===0?oe():s.selected({files:C.value,ref:this});if(c.useChips===!0)return C.value.length===0?oe():C.value.map((Ie,ke)=>Ce(ea,{key:"file-"+ke,removable:n.editable.value,dense:!0,textColor:c.color,tabindex:c.tabindex,onRemove:()=>{w(ke)}},()=>Ce("span",{class:"ellipsis",textContent:Ie.name})));const ue=c.displayValue!==void 0?c.displayValue:z.value;return ue.length!==0?[Ce("div",{class:c.inputClass,style:c.inputStyle,textContent:ue})]:oe()}function _e(){const ue={ref:f,...I.value,...S.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:N};return c.multiple===!0&&(ue.multiple=!0),Ce("input",ue)}return Object.assign(n,{fieldClass:O,emitValue:D,hasValue:j,inputRef:f,innerValue:C,floatingLabel:G(()=>j.value===!0||Ga(c.displayValue)),computedCounter:G(()=>{if(c.counterLabel!==void 0)return c.counterLabel(E.value);const ue=c.maxFiles;return`${C.value.length}${ue!==void 0?" / "+ue:""} (${V.value})`}),getControlChild:()=>x("file"),getControl:()=>{const ue={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:c.tabindex};return n.editable.value===!0&&Object.assign(ue,{onDragover:g,onDragleave:_,onKeydown:R,onKeyup:P}),Ce("div",ue,[_e()].concat(ge()))}}),Object.assign(i,{removeAtIndex:w,removeFile:$,getNativeElement:()=>f.value}),Zn(i,"nativeEl",()=>f.value),es(n)}}),Wt=jt({name:"QBanner",props:{...Ea,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(c,{slots:s}){const{proxy:{$q:m}}=Dt(),o=Aa(c,m),i=G(()=>"q-banner row items-center"+(c.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(c.rounded===!0?" rounded-borders":"")),n=G(()=>`q-banner__actions row items-center justify-end col-${c.inlineActions===!0?"auto":"all"}`);return()=>{const f=[Ce("div",{class:"q-banner__avatar col-auto row items-center self-start"},Bt(s.avatar)),Ce("div",{class:"q-banner__content col text-body2"},Bt(s.default))],b=Bt(s.action);return b!==void 0&&f.push(Ce("div",{class:n.value},b)),Ce("div",{class:i.value+(c.inlineActions===!1&&b!==void 0?" q-banner--top-padding":""),role:"alert"},f)}}}),eu={class:"q-gutter-sm"},tu={class:"col col-md-6 q-pa-xs"},pl="Import Pelanggan",au={__name:"Import",setup(c){const s=Je({csv_file:null}),m=()=>{s.post(route("admin.customer.import"),{onSuccess:()=>{s.reset()},onError:()=>{Qe()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=W("i-head"),f=W("authenticated-layout");return u(),h(H,null,[e(n,{title:pl}),e(f,{"show-drawer-button":!0},{title:a(()=>[v(r(pl))]),"left-button":a(()=>[t("div",eu,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>l(K).get(o.route("admin.customer.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",tu,[e(Ge,{class:"row",onSubmit:Q(m,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(qo,{modelValue:l(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>l(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(M,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:i[2]||(i[2]=b=>l(K).get(o.route("admin.customer.index")))},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(u(),U(Wt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(u(),U(Wt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},lu=Object.freeze(Object.defineProperty({__proto__:null,default:au},Symbol.toStringTag,{value:"Module"})),ou={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},nu={class:"q-pa-xs"},su={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ru={key:0},iu={key:2},du={key:3},uu={class:"flex justify-end"},fl="Pelanggan",mu={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=Ee({search:"",status:"active",...He()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"code",label:s.screen.lt.md?"Pelanggan":"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"wallet_balance",label:"Wallet (Rp)",field:"wallet_balance",align:"right",sortable:!0},{name:"balance",label:"Utang / Piutang(Rp)",field:"balance",align:"right",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];xe(()=>{x()});const y=E=>st({message:`Hapus Pelanggan ${E.name}?`,url:route("admin.customer.delete",E.id),fetchItemsCallback:x,loading:i}),x=(E=null)=>{Ke({pagination:d,filter:p,props:E,rows:o,url:route("admin.customer.data"),loading:i,tableRef:n})},S=()=>x(),C=E=>K.get(route("admin.customer.detail",{id:E.id})),{protectClick:j}=Et(),z=j(C),V=G(()=>s.screen.gt.sm?g:g.filter(E=>E.name==="code"||E.name==="action"));return(E,I)=>{const O=W("i-head"),B=W("authenticated-layout");return u(),h(H,null,[e(O,{title:fl}),e(B,null,ze({title:a(()=>[v(r(fl))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=w=>m.value=!m.value)},null,8,["icon"]),E.$can("admin.customer.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=w=>l(K).get(E.route("admin.customer.add")))})):k("",!0),E.$can("admin.customer.import")?(u(),U(M,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[3]||(I[3]=Q(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[E.$can("admin.customer.import")?ae((u(),U(le,{key:0,clickable:"",onClick:I[2]||(I[2]=Q(w=>l(K).get(E.route("admin.customer.import")),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"csv"})]),_:1}),e(F,null,{default:a(()=>I[8]||(I[8]=[v("Import")])),_:1})]),_:1})),[[se],[me]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",nu,[e(Me,{class:"full-height-table",style:Ye({height:l(b)}),ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":I[7]||(I[7]=w=>d.value=w),filter:p.search,loading:i.value,columns:V.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:w,message:$,filter:D})=>[t("div",su,[t("span",null,r($)+" "+r(D?" with term "+D:""),1)])]),body:a(w=>[e(Oe,{props:w,class:qe([w.row.active?"":"bg-red-1","cursor-pointer"]),onClick:Q($=>l(z)(w.row,$),["stop"])},{default:a(()=>[e(Y,{key:"code",props:w,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(u(),U(q,{key:0,name:"person"})):k("",!0),v(" "+r(w.row.code),1)]),l(s).screen.lt.md?(u(),h(H,{key:0},[t("div",null,[l(s).screen.lt.md?(u(),U(q,{key:0,name:"person"})):k("",!0),v(" "+r(w.row.name),1)]),w.row.phone?(u(),h("div",ru,[e(q,{name:"phone"}),v(" "+r(w.row.phone),1)])):k("",!0),w.row.address?(u(),U(Se,{key:1,text:w.row.address,icon:"home_pin"},null,8,["text"])):k("",!0),w.row.wallet_balance!=0?(u(),h("div",iu,[e(q,{name:"wallet"}),v(" Wallet: Rp. "+r(l(L)(w.row.wallet_balance)),1)])):k("",!0),w.row.balance!=0?(u(),h("div",du,[e(q,{name:"wallet"}),v(" Utang: Rp. "+r(l(L)(w.row.balance)),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"name",props:w},{default:a(()=>[v(r(w.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"wallet_balance",props:w},{default:a(()=>[v(r(l(L)(w.row.wallet_balance)),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:w},{default:a(()=>[v(r(l(L)(w.row.balance)),1)]),_:2},1032,["props"]),e(Y,{key:"phone",props:w},{default:a(()=>[v(r(w.row.phone),1)]),_:2},1032,["props"]),e(Y,{key:"address",props:w},{default:a(()=>[e(Se,{text:w.row.address},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:w},{default:a(()=>[t("div",uu,[E.$can("admin.customer.add")||E.$can("admin.customer.edit")||E.$can("admin.customer.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[6]||(I[6]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[E.$can("admin.customer.add")?ae((u(),U(le,{key:0,clickable:"",onClick:Q($=>l(K).get(E.route("admin.customer.duplicate",w.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"file_copy"})]),_:1}),e(F,null,{default:a(()=>I[9]||(I[9]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),E.$can("admin.customer.edit")?ae((u(),U(le,{key:1,clickable:"",onClick:Q($=>l(K).get(E.route("admin.customer.edit",w.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>I[10]||(I[10]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),E.$can("admin.customer.delete")?ae((u(),U(le,{key:2,onClick:Q($=>y(w.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>I[11]||(I[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",ou,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[4]||(I[4]=w=>p.status=w),S],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[5]||(I[5]=w=>p.search=w),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},cu=Object.freeze(Object.defineProperty({__proto__:null,default:mu},Symbol.toStringTag,{value:"Module"})),pu={class:"q-pb-sm"},fu={class:"row q-col-gutter-sm"},gu={class:"row items-center no-wrap"},bu={class:"q-ml-md"},vu={class:"text-subtitle2 text-grey-8"},_u={class:"text-h6 text-weight-bold"},yu={class:"q-my-sm"},ku={class:"row q-col-gutter-sm"},wu={class:"row items-center no-wrap"},hu={class:"q-ml-md"},$u={class:"text-subtitle2 text-grey-8"},xu={class:"text-h6 text-weight-bold"},Co={__name:"ActualSummaryCard",setup(c){const s=fe(),m=G(()=>[{label:"Pelanggan Aktif",value:s.props.data.total_active_customer,icon:"person_add",color:"blue-7",bgColor:"#e3f2fd"},{label:"Saldo Wallet / Deposit",value:L(s.props.data.total_customer_wallet_balance),icon:"savings",color:"green-7",bgColor:"#e8f5e9"},{label:"Saldo Utang / Piutang",value:L(s.props.data.total_customer_balance),icon:"account_balance",color:"red-8",bgColor:"#ffebee"},{label:"Supplier Aktif",value:s.props.data.total_active_supplier,icon:"local_shipping",color:"indigo-7",bgColor:"#e8eaf6"},{label:"Saldo Wallet / Deposit",value:L(s.props.data.total_supplier_wallet_balance),icon:"account_balance_wallet",color:"cyan-7",bgColor:"#e0f7fa"},{label:"Saldo Utang / Piutang",value:L(s.props.data.total_supplier_balance),icon:"credit_card",color:"red-8",bgColor:"#ffebee"}]),o=G(()=>[{label:"Total Transaksi",value:L(s.props.data.total_sales_count),icon:"shopping_basket",color:"purple-8",bgColor:"#f3e5f5"},{label:"Total Penjualan",value:L(s.props.data.total_sales),icon:"trending_up",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Laba",value:L(s.props.data.total_sales_profit),icon:"attach_money",color:"teal-6",bgColor:"#e0f2f1"}]);return(i,n)=>(u(),h("div",pu,[t("div",null,[t("div",fu,[(u(!0),h(H,null,je(m.value,(f,b)=>(u(),h("div",{key:b,class:"col-12 col-md-4"},[e(de,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",gu,[e(Xt,{icon:f.icon,color:f.color,"text-color":f.bgColor},null,8,["icon","color","text-color"]),t("div",bu,[t("div",vu,r(f.label),1),t("div",_u,r(f.value),1)])])]),_:2},1024)]))),128))])]),t("div",yu,[t("div",ku,[(u(!0),h(H,null,je(o.value,(f,b)=>(u(),h("div",{key:b,class:"col-12 col-md-4"},[e(de,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[t("div",wu,[e(Xt,{icon:f.icon,color:f.color,"text-color":f.bgColor},null,8,["icon","color","text-color"]),t("div",hu,[t("div",$u,r(f.label),1),t("div",xu,r(f.value),1)])])]),_:2},1024)]))),128))])])]))}},Su=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),Vu={class:"row q-col-gutter-sm q-pb-sm"},qu={class:"col-md-6 col-12"},Cu={class:"col-md-6 col-12"},Tu={__name:"ChartCard",setup(c){as([ls,os,ns,ss,rs,is,ds]);const s=fe(),m=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=G(()=>({title:{left:"center"},tooltip:{trigger:"axis",formatter:function(n){let f=n[0].name+"<br/>";return n.forEach(function(b){f+=b.marker+" "+b.seriesName+": "+L(b.value)+"<br/>"}),f}},xAxis:{type:"category",data:s.props.data.chart_data_1.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:n=>L(n),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:s.props.data.chart_data_1.data,itemStyle:{borderRadius:[5,5,0,0],color:m[0]}}]})),i=G(()=>({title:{left:"center"},tooltip:{show:!1},legend:{show:!1},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:s.props.data.revenue_by_category,label:{show:!0,position:"outside",formatter:n=>{const f=L(n.value);return`${n.percent}% - ${n.name}
Rp. ${f}
`},fontSize:12,fontWeight:"bold",color:"#616161"},labelLine:{show:!0,length:10,length2:10},itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:n=>m[n.dataIndex%m.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(n,f)=>(u(),h("div",Vu,[t("div",qu,[e(de,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[f[0]||(f[0]=t("div",{class:"text-subtitle1 q-pb-sm"},"Penjualan",-1)),e(l(Xa),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),t("div",Cu,[e(de,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[f[1]||(f[1]=t("div",{class:"text-subtitle1 q-pb-sm"},"Distribusi Omzet",-1)),e(l(Xa),{class:"chart",option:i.value,autoresize:""},null,8,["option"])]),_:1})])]))}},To=kt(Tu,[["__scopeId","data-v-aac9117e"]]),Pu=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),Ru={class:"row q-col-gutter-sm q-pb-sm"},Ou={class:"col-md-6 col-12"},Du={key:1,class:"text-grey text-italic"},Iu={class:"col-md-6 col-12"},Uu={key:1,class:"text-grey text-italic"},Po={__name:"TopCard",setup(c){const s=fe();return(m,o)=>{const i=W("my-link");return u(),h("div",Ru,[t("div",Ou,[e(de,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[o[0]||(o[0]=t("div",{class:"text-subtitle1 q-mb-sm"},"Top 5 Transaksi Pelanggan",-1)),l(s).props.data.top_customers_revenue.length>0?(u(),U(Ae,{key:0},{default:a(()=>[(u(!0),h(H,null,je(l(s).props.data.top_customers_revenue,(n,f)=>(u(),U(le,{key:f},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(Xt,{color:"purple-"+(9-f),"text-color":"white",size:"sm"},{default:a(()=>[v(r(f+1),1)]),_:2},1032,["color"])]),_:2},1024),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>[e(i,{href:m.route("admin.customer.detail",{id:n.customer_id}),class:"text-purple"},{default:a(()=>[v(r(n.customer_name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),e(F,{side:""},{default:a(()=>[e(be,{class:"text-purple"},{default:a(()=>[v(r(l(L)(n.total_revenue)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(u(),h("div",Du,"Data tidak tersedia"))]),_:1})]),t("div",Iu,[e(de,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[o[1]||(o[1]=t("div",{class:"text-subtitle1 q-mb-sm"},"Top 5 Saldo Wallet Pelanggan",-1)),l(s).props.data.top_customers_wallet.length>0?(u(),U(Ae,{key:0},{default:a(()=>[(u(!0),h(H,null,je(l(s).props.data.top_customers_wallet,(n,f)=>(u(),U(le,{key:f},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(Xt,{color:"orange-"+(9-f),"text-color":"white",size:"sm"},{default:a(()=>[v(r(f+1),1)]),_:2},1032,["color"])]),_:2},1024),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>[e(i,{href:m.route("admin.customer.detail",{id:n.id}),class:"text-orange-9"},{default:a(()=>[v(r(n.name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),e(F,{side:""},{default:a(()=>[e(be,{class:"text-orange-9"},{default:a(()=>[v(r(l(L)(n.wallet_balance)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(u(),h("div",Uu,"Data tidak tersedia"))]),_:1})])])}}},ju=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Eu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Au={class:"q-pa-xs"},Mu={class:"q-pa-none"},gl="Dashboard",Nu={__name:"Index",setup(c){fe();const s=T({top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}]}),m=T(!0),o=T(He().period??"this_month"),i=T([{value:"today",label:"Hari Ini"},{value:"yesterday",label:"Kemarin"},{value:"this_week",label:"Minggu Ini"},{value:"last_week",label:"Minggu Lalu"},{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"Bulan Lalu"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"},{value:"this_year",label:"Tahun Ini"},{value:"prev_year",label:"Tahun Lalu"}]),n=()=>{K.visit(route("admin.dashboard",{period:o.value}))},f=G(()=>!(o.value=="today"||o.value=="yesterday"));return(b,p)=>{const d=W("i-head"),g=W("authenticated-layout");return u(),h(H,null,[e(d,{title:gl}),e(g,null,ze({title:a(()=>[v(r(gl))]),"right-button":a(()=>[e(M,{class:"q-ml-sm",icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:p[0]||(p[0]=_=>m.value=!m.value)},null,8,["icon"])]),default:a(()=>[t("div",Au,[t("div",Mu,[e(Co,{dashboardData:s.value},null,8,["dashboardData"])]),f.value?(u(),h(H,{key:0},[e(To,{dashboardData:s.value},null,8,["dashboardData"]),e(Po,{dashboardData:s.value},null,8,["dashboardData"])],64)):k("",!0)])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar"},{default:a(()=>[t("div",Eu,[e(ce,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:o.value,"onUpdate:modelValue":[p[1]||(p[1]=_=>o.value=_),n],options:i.value,label:"Periode",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},Bu=Object.freeze(Object.defineProperty({__proto__:null,default:Nu},Symbol.toStringTag,{value:"Module"})),Fu={class:"row"},zu={class:"row q-col-gutter-sm"},Lu={class:"col-sm-6 col-xs-12"},Hu={class:"col-sm-6 col-xs-12"},Ku={class:"col-md-3 col-sm-6 col-xs-12"},Yu={class:"col-md-3 col-sm-6 col-xs-12"},Wu={class:"col-md-3 col-sm-6 col-xs-12"},Qu={class:"col-md-3 col-sm-6 col-xs-12"};const Ju={__name:"SummaryCard",setup(c){const s=fe(),m=(o,i)=>{const f={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...i};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(f)),K.visit(o,{data:f})};return(o,i)=>(u(),h("div",Fu,[e(de,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:a(()=>[e(ee,{class:"q-pa-none"},{default:a(()=>[t("div",zu,[t("div",Lu,[e(le,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[0]||(i[0]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(F,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(q,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[v(r(l(s).props.data.active_customer_count),1)]),_:1}),e(be,null,{default:a(()=>i[5]||(i[5]=[v("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),t("div",Hu,[e(le,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:i[1]||(i[1]=n=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(F,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(q,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[v(r(o.$page.props.data.active_user_count),1)]),_:1}),e(be,null,{default:a(()=>i[6]||(i[6]=[v("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),t("div",Ku,[e(le,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(F,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(q,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(L)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(be,null,{default:a(()=>i[7]||(i[7]=[v("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),t("div",Yu,[e(le,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(F,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(q,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(L)(o.$page.props.data.total_customer_wallet_balance)),1)]),_:1}),e(be,null,{default:a(()=>i[8]||(i[8]=[v("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",Wu,[e(le,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(F,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(q,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(L)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(be,null,{default:a(()=>i[9]||(i[9]=[v("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),t("div",Qu,[e(le,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(F,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(q,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(F,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(be,{class:"text-white text-weight-bold"},{default:a(()=>[v(" Rp. "+r(l(L)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(be,null,{default:a(()=>i[10]||(i[10]=[v("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),k("",!0),k("",!0),k("",!0)])]),_:1})]),_:1})]))}},Gu=Object.freeze(Object.defineProperty({__proto__:null,default:Ju},Symbol.toStringTag,{value:"Module"})),Xu={class:"detail"},Ro={__name:"MainInfoTab",setup(c){const s=fe();return(m,o)=>(u(),h("table",Xu,[t("tbody",null,[t("tr",null,[o[0]||(o[0]=t("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[o[2]||(o[2]=t("td",null,"Jenis",-1)),o[3]||(o[3]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.FINANCE_ACCOUNT_TYPES[l(s).props.data.type]),1)]),l(s).props.data.type=="bank"?(u(),h(H,{key:0},[t("tr",null,[o[4]||(o[4]=t("td",null,"Bank",-1)),o[5]||(o[5]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank),1)]),t("tr",null,[o[6]||(o[6]=t("td",null,"No. Rek",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.number),1)]),t("tr",null,[o[8]||(o[8]=t("td",null,"Atas Nama",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.holder),1)])],64)):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Saldo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(L)(l(s).props.data.balance)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Status",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),t("tr",null,[o[14]||(o[14]=t("td",null,"Catatan",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),o[22]||(o[22]=t("tr",null,[t("td",{colspan:"3",class:"text-bold text-grey-9"},[t("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),t("tr",null,[o[16]||(o[16]=t("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),t("tr",null,[o[18]||(o[18]=t("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),t("tr",null,[o[20]||(o[20]=t("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},Zu=Object.freeze(Object.defineProperty({__proto__:null,default:Ro},Symbol.toStringTag,{value:"Module"})),em={class:"full-width row flex-center text-grey-8 q-gutter-sm"},tm={class:"flex q-gutter-sm"},am={key:0},Oo={__name:"HistoryTab",setup(c){const s=fe(),m=he(),o=T(null),i=T([]),n=T(!0),f=Ee({...He()}),b=ot(null,117),p=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),d=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],g=G(()=>m.screen.gt.sm?d:d.filter(y=>y.name==="code"));xe(()=>{_()});const _=(y=null)=>Ke({pagination:p,filter:f,props:y,rows:i,url:route("admin.finance-transaction.data",{filter:{account_id:s.props.data.id}}),loading:n,tableRef:o});return(y,x)=>(u(),U(Me,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:Ye({height:l(b)}),color:"primary",class:"full-height-table","row-key":"id",pagination:p.value,"onUpdate:pagination":x[0]||(x[0]=S=>p.value=S),filter:f.search,loading:n.value,columns:g.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:_,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({message:S,filter:C})=>[t("div",em,[t("span",null,r(S)+" "+r(C?" with term "+C:""),1)])]),body:a(S=>[e(Oe,{props:S},{default:a(()=>[e(Y,{key:"code",props:S},{default:a(()=>[t("div",tm,[t("div",null,[l(m).screen.lt.md?(u(),U(q,{key:0,name:"tag",class:"inline-icon"})):k("",!0),v(" "+r(S.row.code),1)])]),l(m).screen.lt.md?(u(),h(H,{key:0},[t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(S.row.datetime)),1)]),S.row.creator?(u(),h("div",am,[e(q,{name:"person",class:"inline-icon"}),v(" "+r(S.row.creator.username),1)])):k("",!0),t("div",{class:qe([S.row.amount>0?"text-green":"text-red","text-bold"])},[e(q,{class:"inline-icon",name:"money"}),v(" "+r(l(oa)(S.row.amount))+"Rp. "+r(l(L)(Math.abs(S.row.amount))),1)],2),t("div",null,[e(it,{color:S.row.amount>0?"green":"red"},{default:a(()=>[v(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["color"])]),e(Se,{text:S.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"datetime",props:S},{default:a(()=>[v(r(l(ve)(S.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:S},{default:a(()=>[e(it,{color:S.row.amount>0?"green":"red"},{default:a(()=>[v(r(y.$CONSTANTS.FINANCE_TRANSACTION_TYPES[S.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:S,class:qe(S.row.amount>0?"text-green":"text-red")},{default:a(()=>[v(r(l(oa)(S.row.amount)+l(L)(Math.abs(S.row.amount))),1)]),_:2},1032,["props","class"]),e(Y,{key:"notes",props:S},{default:a(()=>[e(Se,{text:S.row.notes,icon:y.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},lm=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),om={class:"q-gutter-sm"},nm={class:"q-gutter-sm"},sm={class:"col q-pa-xs"},rm={class:"row"},bl="Rincian Akun",im={__name:"Detail",setup(c){const s=fe(),m=T("main");return(o,i)=>{const n=W("i-head"),f=W("authenticated-layout");return u(),h(H,null,[e(n,{title:bl}),e(f,null,{title:a(()=>[v(r(bl))]),"left-button":a(()=>[t("div",om,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":a(()=>[t("div",nm,[o.$can("admin.finance-account.edit")?(u(),U(M,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>l(K).get(o.route("admin.finance-account.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",sm,[t("div",rm,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Tt,{modelValue:m.value,"onUpdate:modelValue":i[2]||(i[2]=b=>m.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Info Akun"}),e(dt,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(Pt,{modelValue:m.value,"onUpdate:modelValue":i[3]||(i[3]=b=>m.value=b),animated:""},{default:a(()=>[e(ut,{name:"main"},{default:a(()=>[e(Ro)]),_:1}),e(ut,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Oo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},dm=Object.freeze(Object.defineProperty({__proto__:null,default:im},Symbol.toStringTag,{value:"Module"})),um={style:{"margin-left":"-10px"}},Rt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c){return(s,m)=>(u(),h("div",um,[e(ra,{class:"full-width q-pl-none","model-value":c.modelValue,"onUpdate:modelValue":m[0]||(m[0]=o=>s.$emit("update:modelValue",o)),disable:c.disable,label:c.label},null,8,["model-value","disable","label"])]))}},mm={class:"q-gutter-sm"},cm={class:"col col-md-6 q-pa-xs"},pm={__name:"Editor",setup(c){const s=fe(),m=(s.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Je({id:s.props.data.id,name:s.props.data.name,type:s.props.data.type,bank:s.props.data.bank,number:s.props.data.number,holder:s.props.data.holder,balance:parseFloat(s.props.data.balance),active:!!s.props.data.active,has_wallet_access:!!s.props.data.has_wallet_access,show_in_pos_payment:!!s.props.data.show_in_pos_payment,show_in_purchasing_payment:!!s.props.data.show_in_purchasing_payment,notes:s.props.data.notes}),i=Fe(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),n=()=>rt({form:o,url:route("admin.finance-account.save")}),f=b=>{b==="cashier_cash"&&(o.show_in_pos_payment=!0)};return xe(()=>{f(o.type)}),tt(()=>o.type,b=>{f(b)}),(b,p)=>{const d=W("i-head"),g=W("authenticated-layout");return u(),h(H,null,[e(d,{title:m}),e(g,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",mm,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=_=>b.$inertia.get(b.route("admin.finance-account.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",cm,[e(Ge,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=_=>l(o).id=_)},null,512),[[wt,l(o).id]]),e(re,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":p[2]||(p[2]=_=>l(o).name=_),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":p[3]||(p[3]=_=>l(o).type=_),label:"Jenis Akun",options:l(i),"map-options":"","emit-value":"",error:!!l(o).errors.type,disable:l(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),l(o).type=="bank"?(u(),h(H,{key:0},[e(re,{modelValue:l(o).bank,"onUpdate:modelValue":p[4]||(p[4]=_=>l(o).bank=_),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!l(o).errors.bank,disable:l(o).processing,"error-message":l(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(re,{modelValue:l(o).number,"onUpdate:modelValue":p[5]||(p[5]=_=>l(o).number=_),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!l(o).errors.number,disable:l(o).processing,"error-message":l(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(re,{modelValue:l(o).holder,"onUpdate:modelValue":p[6]||(p[6]=_=>l(o).holder=_),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!l(o).errors.holder,disable:l(o).processing,"error-message":l(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):k("",!0),e(Be,{modelValue:l(o).balance,"onUpdate:modelValue":p[7]||(p[7]=_=>l(o).balance=_),label:"Saldo",lazyRules:"",disable:l(o).processing,"allow-negative":!0,error:!!l(o).errors.balance,errorMessage:l(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(re,{modelValue:l(o).notes,"onUpdate:modelValue":p[8]||(p[8]=_=>l(o).notes=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Rt,{modelValue:l(o).active,"onUpdate:modelValue":p[9]||(p[9]=_=>l(o).active=_),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),p[14]||(p[14]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(Rt,{modelValue:l(o).show_in_pos_payment,"onUpdate:modelValue":p[10]||(p[10]=_=>l(o).show_in_pos_payment=_),disable:l(o).processing||l(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(Rt,{modelValue:l(o).show_in_purchasing_payment,"onUpdate:modelValue":p[11]||(p[11]=_=>l(o).show_in_purchasing_payment=_),disable:l(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(Rt,{modelValue:l(o).has_wallet_access,"onUpdate:modelValue":p[12]||(p[12]=_=>l(o).has_wallet_access=_),disable:l(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(M,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:p[13]||(p[13]=_=>l(K).get(b.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},fm=Object.freeze(Object.defineProperty({__proto__:null,default:pm},Symbol.toStringTag,{value:"Module"})),gm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},bm={class:"q-pa-xs"},vm={class:"q-my-sm text-subtitle"},_m={class:"text-bold text-grey-8"},ym={class:"full-width row flex-center text-grey-8 q-gutter-sm"},km={class:"text-bold text-grey-9"},wm={class:"text-grey-9"},hm={key:0},$m={key:1},xm={key:0},Sm={class:"flex justify-end"},vl="Akun Kas",Vm={__name:"Index",setup(c){const s=fe(),m=he(),o=T(!1),i=T([]),n=T(null),f=T(null),b=ot(f,117),p=T(!0),d=Ee({search:"",status:"active",type:"all",...He()}),g=s.props.totalBalance,_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),y=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],x=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],S=[{value:"all",label:"Semua"},...Fe(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];xe(()=>{j()});const C=B=>st({message:`Hapus Akun ${B.name}?`,url:route("admin.finance-account.delete",B.id),fetchItemsCallback:j,loading:p}),j=(B=null)=>{Ke({pagination:_,filter:d,props:B,rows:i,url:route("admin.finance-account.data"),loading:p,tableRef:n})},z=()=>j(),V=B=>K.get(route("admin.finance-account.detail",{id:B.id})),{protectClick:E}=Et(),I=E(V),O=G(()=>m.screen.gt.sm?y:y.filter(B=>B.name==="name"||B.name==="action"));return(B,w)=>{const $=W("i-head"),D=W("authenticated-layout");return u(),h(H,null,[e($,{title:vl}),e(D,null,ze({title:a(()=>[v(r(vl))]),"right-button":a(()=>[e(M,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=R=>o.value=!o.value)},null,8,["icon"]),B.$can("admin.finance-account.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=R=>l(K).get(B.route("admin.finance-account.add")))})):k("",!0)]),default:a(()=>[t("div",bm,[e(de,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:a(()=>[t("div",vm,[w[7]||(w[7]=v(" Total Saldo Akun Aktif: ")),t("span",_m,"Rp. "+r(l(L)(l(g))),1)])]),_:1}),e(Me,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Ye({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":w[6]||(w[6]=R=>_.value=R),filter:d.search,loading:p.value,columns:O.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:j,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:R,message:P,filter:A})=>[t("div",ym,[t("span",null,r(P)+" "+r(A?" with term "+A:""),1)])]),body:a(R=>[e(Oe,{props:R,class:qe([R.row.active?"":"bg-red-1","cursor-pointer"]),onClick:Q(P=>l(I)(R.row,P),["stop"])},{default:a(()=>[e(Y,{key:"name",props:R,class:"wrap-column"},{default:a(()=>[t("div",km,r(R.row.name),1),t("div",wm,[R.row.type=="bank"?(u(),h("div",hm,[e(q,{name:"wallet",class:"inline-icon"}),v(" Rekening "+r(R.row.bank??"-")+" "+r(R.row.number??"-")+" a.n. "+r(R.row.holder??"-"),1)])):k("",!0),R.row.notes?(u(),h("div",$m,[e(q,{name:"notes"}),v(" "+r(R.row.notes),1)])):k("",!0)]),l(m).screen.lt.md?(u(),h("div",xm,[e(q,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(L)(R.row.balance)),1)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"type",props:R},{default:a(()=>[v(r(B.$CONSTANTS.FINANCE_ACCOUNT_TYPES[R.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:R},{default:a(()=>[v(r(l(L)(R.row.balance)),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:R},{default:a(()=>[t("div",Sm,[B.$can("admin.finance-account.add")||B.$can("admin.finance-account.edit")||B.$can("admin.finance-account.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[5]||(w[5]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[B.$can("admin.finance-account.add")?ae((u(),U(le,{key:0,clickable:"",onClick:Q(P=>l(K).get(B.route("admin.finance-account.duplicate",R.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"file_copy"})]),_:1}),e(F,null,{default:a(()=>w[8]||(w[8]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),B.$can("admin.finance-account.edit")?ae((u(),U(le,{key:1,clickable:"",onClick:Q(P=>l(K).get(B.route("admin.finance-account.edit",R.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>w[9]||(w[9]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),B.$can("admin.finance-account.delete")?ae((u(),U(le,{key:2,onClick:Q(P=>C(R.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>w[10]||(w[10]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",gm,[e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:d.type,"onUpdate:modelValue":[w[2]||(w[2]=R=>d.type=R),z],options:S,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:d.status,"onUpdate:modelValue":[w[3]||(w[3]=R=>d.status=R),z],options:x,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:d.search,"onUpdate:modelValue":w[4]||(w[4]=R=>d.search=R),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},qm=Object.freeze(Object.defineProperty({__proto__:null,default:Vm},Symbol.toStringTag,{value:"Module"})),Cm={class:"q-gutter-sm"},Tm={class:"col col-md-6 q-pa-xs"},Pm={class:"row"},Rm={class:"detail"},Om={key:0},Dm={key:1},Im={key:2},Um={key:3},jm={colspan:"3",class:"bg-white"},_l="Rincian Transaksi",Em={__name:"Detail",setup(c){const s=fe();return(m,o)=>{const i=W("i-head"),n=W("i-link"),f=W("authenticated-layout");return u(),h(H,null,[e(i,{title:_l}),e(f,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",Cm,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.$inertia.get(m.route("admin.finance-transaction.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},r(_l))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Tm,[t("div",Pm,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,null,{default:a(()=>[o[19]||(o[19]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),t("table",Rm,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),l(s).props.data.account?(u(),h("tr",Om,[o[6]||(o[6]=t("td",null,"Akun",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,[e(n,{href:m.route("admin.finance-account.detail",l(s).props.data.account.id)},{default:a(()=>[v(r(l(s).props.data.account.name),1)]),_:1},8,["href"]),l(s).props.data.account.type==="bank"?(u(),h(H,{key:0},[v(" Rek "+r(l(s).props.data.account.bank)+" an "+r(l(s).props.data.account.holder)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),v(" "+r(l(s).props.data.account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.type?(u(),h("tr",Dm,[o[8]||(o[8]=t("td",null,"Jenis",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.FINANCE_TRANSACTION_TYPES[l(s).props.data.type]),1)])):k("",!0),t("tr",null,[o[10]||(o[10]=t("td",null,"Jumlah",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(na)(l(s).props.data.amount)),1)]),t("tr",null,[o[12]||(o[12]=t("td",null,"Catatan",-1)),o[13]||(o[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(u(),h("tr",Im,[o[14]||(o[14]=t("td",null,"Dibuat",-1)),o[15]||(o[15]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(u(),h("tr",Um,[o[16]||(o[16]=t("td",null,"Diperbarui",-1)),o[17]||(o[17]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(u(),h(H,{key:4},[o[18]||(o[18]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",jm,[e(ia,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:Ye([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Am=Object.freeze(Object.defineProperty({__proto__:null,default:Em},Symbol.toStringTag,{value:"Module"})),Mm={class:"q-gutter-sm"},Nm={class:"col col-md-6 q-pa-xs"},Bm={__name:"Editor",setup(c){var b;const s=fe(),m=(s.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=s.props.accounts.map(p=>({label:p.name,value:p.id})),i=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],n=Je({id:s.props.data.id,account_id:s.props.data.account_id,to_account_id:s.props.data.to_account_id??null,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((b=s.props.data)==null?void 0:b.image_path)??"",image:null}),f=()=>{da(n,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:n,url:route("admin.finance-transaction.save")})};return(p,d)=>{const g=W("i-head"),_=W("authenticated-layout");return u(),h(H,null,[e(g,{title:m}),e(_,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",Mm,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=y=>p.$inertia.get(p.route("admin.finance-transaction.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Nm,[e(Ge,{class:"row",onSubmit:Q(f,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":d[1]||(d[1]=y=>l(n).id=y)},null,512),[[wt,l(n).id]]),e(Ze,{modelValue:l(n).datetime,"onUpdate:modelValue":d[2]||(d[2]=y=>l(n).datetime=y),label:"Waktu",error:!!l(n).errors.datetime,disable:l(n).processing,errorMessage:l(n).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":d[3]||(d[3]=y=>l(n).type=y),label:"Jenis Transaksi",options:i,"map-options":"","emit-value":"",error:!!l(n).errors.type,disable:l(n).processing,errorMessage:l(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(ce,{class:"custom-select",modelValue:l(n).account_id,"onUpdate:modelValue":d[4]||(d[4]=y=>l(n).account_id=y),label:l(n).type=="transfer"?"Akun Asal":"Akun",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.account_id,error:!!l(n).errors.account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),l(n).type=="transfer"?(u(),U(ce,{key:0,class:"custom-select",modelValue:l(n).to_account_id,"onUpdate:modelValue":d[5]||(d[5]=y=>l(n).to_account_id=y),label:"Akun Tujuan",options:l(o),"map-options":"","emit-value":"",errorMessage:l(n).errors.to_account_id,error:!!l(n).errors.to_account_id,disable:l(n).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):k("",!0),e(Be,{modelValue:l(n).amount,"onUpdate:modelValue":d[6]||(d[6]=y=>l(n).amount=y),label:"Jumlah",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.amount,errorMessage:l(n).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(re,{modelValue:l(n).notes,"onUpdate:modelValue":d[7]||(d[7]=y=>l(n).notes=y),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,rules:[y=>y&&y.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(Ma,{modelValue:l(n).image,"onUpdate:modelValue":d[8]||(d[8]=y=>l(n).image=y),"initial-image-path":l(n).image_path,disabled:l(n).processing,error:!!l(n).errors.image||!!l(n).errors.image_path,"error-message":l(n).errors.image||l(n).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(n).processing},null,8,["disable"]),e(M,{icon:"cancel",label:"Batal",disable:l(n).processing,onClick:d[9]||(d[9]=y=>l(K).get(p.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Fm=Object.freeze(Object.defineProperty({__proto__:null,default:Bm},Symbol.toStringTag,{value:"Module"})),zm={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Lm={class:"q-pa-xs"},Hm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Km={class:"text-grey-8"},Ym={class:"text-bold text-grey-8"},Wm={class:"flex justify-end no-wrap"},yl="Transaksi Kas",Qm={__name:"Index",setup(c){const s=fe(),m=he(),o=T(!1),i=T([]),n=T(!0),f=T(null),b=T(null),p=ot(b),d=De().startOf("month").toDate(),g=De().endOf("month").toDate(),_=[{label:"Semua",value:"all"},...s.props.accounts.map(w=>({label:w.name,value:w.id}))],y=[{value:"all",label:"Semua"},...Fe(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],x=Ee({search:"",type:"all",account_id:"all",start_date:d,end_date:g,...He()}),S=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:m.screen.lt.md?"Item":"Kode",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{z()});const j=w=>st({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${w.code}?`,url:route("admin.finance-transaction.delete",w.id),fetchItemsCallback:z,loading:n}),z=(w=null)=>{const $={...x,start_date:De(x.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:De(x.end_date).format("YYYY-MM-DD HH:mm:ss")};Ke({pagination:S,filter:$,props:w,rows:i,url:route("admin.finance-transaction.data"),loading:n,tableRef:f})},V=()=>{z()},E=G(()=>m.screen.gt.sm?C:C.filter(w=>w.name==="id"||w.name==="action")),I=T(null),O=T(!1),B=w=>{I.value=w,O.value=!0};return(w,$)=>{const D=W("i-head"),R=W("authenticated-layout");return u(),h(H,null,[e(D,{title:yl}),e(R,null,ze({title:a(()=>[v(r(yl))]),"right-button":a(()=>[e(M,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=P=>o.value=!o.value)},null,8,["icon"]),w.$can("admin.finance-transaction.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=P=>l(K).get(w.route("admin.finance-transaction.add")))})):k("",!0)]),default:a(()=>[t("div",Lm,[e(Me,{ref_key:"tableRef",ref:f,style:Ye({height:l(p)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:S.value,"onUpdate:pagination":$[8]||($[8]=P=>S.value=P),filter:x.search,loading:n.value,columns:E.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:z,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:P,message:A,filter:N})=>[t("div",Hm,[t("span",null,r(A)+" "+r(N?" with term "+N:""),1)])]),body:a(P=>[e(Oe,{props:P,class:"cursor-pointer",onClick:Q(A=>l(K).get(w.route("admin.finance-transaction.detail",{id:P.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:P},{default:a(()=>[t("div",null,[l(m).screen.lt.md?(u(),U(q,{key:0,class:"inline-icon",name:"tag"})):k("",!0),v(" "+r(P.row.code),1)]),l(m).screen.lt.md?(u(),h(H,{key:0},[t("div",Km,[e(q,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(P.row.datetime)),1)]),t("div",Ym,[e(q,{name:"wallet",class:"inline-icon"}),v(" "+r(P.row.account.name),1)]),t("div",{class:qe(["text-bold",P.row.amount<0?"text-red":"text-green"])},[e(q,{name:"money",class:"inline-icon"}),v(" "+r(l(oa)(P.row.amount)+"Rp."+l(L)(Math.abs(P.row.amount))),1)],2),P.row.notes?(u(),U(Se,{key:0,icon:"notes",text:P.row.notes,class:"text-grey-8"},null,8,["text"])):k("",!0),e(it,{color:P.row.amount>0?"green":"red"},{default:a(()=>[v(r(P.row.type_label),1)]),_:2},1032,["color"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"datetime",props:P,class:"wrap-column"},{default:a(()=>[v(r(l(ve)(P.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"account",props:P},{default:a(()=>{var A;return[v(r((A=P.row.account)==null?void 0:A.name),1)]}),_:2},1032,["props"]),e(Y,{key:"type",props:P},{default:a(()=>[v(r(w.$CONSTANTS.FINANCE_TRANSACTION_TYPES[P.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"amount",props:P,style:{"text-align":"right"}},{default:a(()=>[v(r(l(St)(P.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:P,class:"wrap-column"},{default:a(()=>[v(r(P.row.notes),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:P},{default:a(()=>[t("div",Wm,[e(M,{icon:"image",color:"primary",dense:"",flat:"",disable:P.row.image_path===null||P.row.image_path==="",onClick:Q(A=>B(P.row.image_path),["stop"])},{default:a(()=>[P.row.image_path!=null?(u(),U(Ot,{key:0},{default:a(()=>$[10]||($[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),w.$can("admin.finance-transaction.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[7]||($[7]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[w.$can("admin.finance-transaction.delete")?ae((u(),U(le,{key:0,onClick:Q(A=>j(P.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>$[11]||($[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(ga,{modelValue:O.value,"onUpdate:modelValue":$[9]||($[9]=P=>O.value=P),imageUrl:`/${I.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:a(()=>[t("div",zm,[e(Ze,{modelValue:x.start_date,"onUpdate:modelValue":[$[2]||($[2]=P=>x.start_date=P),V],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Ze,{modelValue:x.end_date,"onUpdate:modelValue":[$[3]||($[3]=P=>x.end_date=P),V],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:x.type,"onUpdate:modelValue":[$[4]||($[4]=P=>x.type=P),V],options:y,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:x.account_id,"onUpdate:modelValue":[$[5]||($[5]=P=>x.account_id=P),V],label:"Akun",options:_,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":$[6]||($[6]=P=>x.search=P),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Jm=Object.freeze(Object.defineProperty({__proto__:null,default:Qm},Symbol.toStringTag,{value:"Module"})),Gm={class:"q-pa-sm animated-background-container"},Xm={class:"text-h6 q-mb-lg"},Zm={class:"row q-col-gutter-md q-mb-md"},ec={class:"col-xs-12 col-md-4"},tc={class:"col-xs-12 col-md-4"},ac={class:"col-xs-12 col-md-4"},lc={class:"row"},oc={class:"text-subtitle1 text-bold text-grey-9 q-mb-xs q-ml-md"},kl="Beranda",nc={__name:"Index",setup(c){const s=fe(),m={reports:[{group:"Pembelian",items:[{label:"Laporan Pembelian 1",route:"admin.report.index"},{label:"Laporan Pembelian 2",route:"admin.report.index"}]},{group:"Penjualan",items:[{label:"Laporan Penjualan 1",route:"admin.report.index"},{label:"Laporan Penjualan 2",route:"admin.report.index"}]},{group:"Keuangan",items:[{label:"Laporan Keuangan 1",route:"admin.report.index"},{label:"Laporan Keuangan 2",route:"admin.report.index"}]}]};return(o,i)=>{const n=W("i-head"),f=W("authenticated-layout");return u(),h(H,null,[e(n,{title:kl}),e(f,null,{title:a(()=>[v(r(kl))]),"right-button":a(()=>i[9]||(i[9]=[])),default:a(()=>[t("div",Gm,[t("div",Xm,[v(" Selamat datang, "+r(l(s).props.auth.user.name)+". ",1),e(q,{name:"waving_hand",class:"waving-hand"})]),t("div",Zm,[t("div",ec,[e(de,{class:"full-height full-width",flat:""},{default:a(()=>[e(Xe,{class:"bg-deep-purple-2 text-grey-10"},{default:a(()=>[e(la,null,{default:a(()=>[e(q,{name:"local_shipping",class:"q-mr-md"}),i[10]||(i[10]=v("Pembelian"))]),_:1})]),_:1}),e(Ae,null,{default:a(()=>[ae((u(),U(le,{clickable:"",onClick:i[0]||(i[0]=b=>l(K).get(o.route("admin.purchase-order.index")))},{default:a(()=>[e(F,null,{default:a(()=>i[11]||(i[11]=[v("Pembelian")])),_:1}),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),e(Re),ae((u(),U(le,{clickable:"",onClick:i[1]||(i[1]=b=>l(K).get(o.route("admin.supplier.index")))},{default:a(()=>[e(F,null,{default:a(()=>i[12]||(i[12]=[v("Supplier")])),_:1}),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right"})]),_:1})]),_:1})),[[se]])]),_:1})]),_:1})]),t("div",tc,[e(de,{class:"full-height full-width",flat:""},{default:a(()=>[e(Xe,{class:"bg-light-blue-2 text-grey-10"},{default:a(()=>[e(la,null,{default:a(()=>[e(q,{name:"inventory_2",class:"q-mr-md"}),i[13]||(i[13]=v("Inventori"))]),_:1})]),_:1}),e(Ae,null,{default:a(()=>[ae((u(),U(le,{clickable:"",onClick:i[2]||(i[2]=b=>l(K).get(o.route("admin.product.index")))},{default:a(()=>[e(F,null,{default:a(()=>i[14]||(i[14]=[v("Produk")])),_:1}),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),e(Re),ae((u(),U(le,{clickable:"",onClick:i[3]||(i[3]=b=>l(K).get(o.route("admin.stock-adjustment.index")))},{default:a(()=>[e(F,null,{default:a(()=>i[15]||(i[15]=[v("Penyesuaian Stok")])),_:1}),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),ae((u(),U(le,{clickable:"",onClick:i[4]||(i[4]=b=>l(K).get(o.route("admin.stock-movement.index")))},{default:a(()=>[e(F,null,{default:a(()=>i[16]||(i[16]=[v("Riwayat Stok")])),_:1}),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right"})]),_:1})]),_:1})),[[se]])]),_:1})]),_:1})]),t("div",ac,[e(de,{class:"full-height full-width",flat:""},{default:a(()=>[e(Xe,{class:"bg-green-3 text-grey-10"},{default:a(()=>[e(la,null,{default:a(()=>[e(q,{name:"storefront",class:"q-mr-md"}),i[17]||(i[17]=v("Penjualan"))]),_:1})]),_:1}),e(Ae,null,{default:a(()=>[ae((u(),U(le,{clickable:"",onClick:i[5]||(i[5]=b=>l(K).get(o.route("admin.sales-order.index")))},{default:a(()=>[e(F,null,{default:a(()=>i[18]||(i[18]=[v("Penjualan")])),_:1}),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),e(Re),ae((u(),U(le,{clickable:"",onClick:i[6]||(i[6]=b=>l(K).get(o.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(F,null,{default:a(()=>i[19]||(i[19]=[v("Konfirmasi Topup Wallet")])),_:1}),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),ae((u(),U(le,{clickable:"",onClick:i[7]||(i[7]=b=>l(K).get(o.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(F,null,{default:a(()=>i[20]||(i[20]=[v("Transaksi Wallet")])),_:1}),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right"})]),_:1})]),_:1})),[[se]]),e(Re),ae((u(),U(le,{clickable:"",onClick:i[8]||(i[8]=b=>l(K).get(o.route("admin.customer.index")))},{default:a(()=>[e(F,null,{default:a(()=>i[21]||(i[21]=[v("Pelanggan")])),_:1}),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right"})]),_:1})]),_:1})),[[se]])]),_:1})]),_:1})])]),e(de,{class:"bg-orange-3 text-grey-10 full-width",flat:""},{default:a(()=>[e(Xe,null,{default:a(()=>[e(la,null,{default:a(()=>[e(q,{name:"analytics",class:"q-mr-sm"}),i[22]||(i[22]=v(" Laporan"))]),_:1})]),_:1})]),_:1}),e(de,{flat:"",class:"q-pa-md bg-grey-1 full-width"},{default:a(()=>[t("div",lc,[(u(!0),h(H,null,je(m.reports,b=>(u(),h("div",{key:b.group,class:"col-xs-12 col-sm-4 q-mb-md"},[t("div",oc,r(b.group),1),e(Ae,null,{default:a(()=>[(u(!0),h(H,null,je(b.items,p=>ae((u(),U(le,{key:p,clickable:"",onClick:d=>l(K).get(o.route(p.route))},{default:a(()=>[e(F,null,{default:a(()=>[v(r(p.label),1)]),_:2},1024),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"])),[[se]])),128))]),_:2},1024)]))),128))])]),_:1})])]),_:1})],64)}}},sc=kt(nc,[["__scopeId","data-v-8a5e0c68"]]),rc=Object.freeze(Object.defineProperty({__proto__:null,default:sc},Symbol.toStringTag,{value:"Module"})),ic={class:"q-gutter-sm"},dc={class:"col col-md-6 q-pa-xs"},uc={__name:"Editor",setup(c){const s=fe(),m=(s.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Je({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description}),i=()=>rt({form:o,url:route("admin.operational-cost-category.save")});return(n,f)=>{const b=W("i-head"),p=W("authenticated-layout");return u(),h(H,null,[e(b,{title:m}),e(p,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",ic,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=d=>l(K).get(n.route("admin.operational-cost-category.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",dc,[e(Ge,{class:"row",onSubmit:Q(i,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=d=>l(o).id=d)},null,512),[[wt,l(o).id]]),e(re,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":f[2]||(f[2]=d=>l(o).name=d),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[d=>d&&d.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(o).description,"onUpdate:modelValue":f[3]||(f[3]=d=>l(o).description=d),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(o).processing},null,8,["disable"]),e(M,{icon:"cancel",label:"Batal",disable:l(o).processing,onClick:f[4]||(f[4]=d=>l(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},mc=Object.freeze(Object.defineProperty({__proto__:null,default:uc},Symbol.toStringTag,{value:"Module"})),cc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},pc={class:"q-pa-xs"},fc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},gc={key:0,class:"text-grey-8"},bc={class:"flex justify-end"},wl="Kategori Biaya Operasional",vc={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=Ee({search:"",...He()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];xe(()=>{y()});const _=S=>st({message:`Hapus Kategori Biaya ${S.name}?`,url:route("admin.operational-cost-category.delete",S.id),fetchItemsCallback:y,loading:i}),y=(S=null)=>{Ke({pagination:d,filter:p,props:S,rows:o,url:route("admin.operational-cost-category.data"),loading:i,tableRef:n})},x=G(()=>s.screen.gt.sm?g:g.filter(S=>S.name==="name"||S.name==="action"));return(S,C)=>{const j=W("i-head"),z=W("authenticated-layout");return u(),h(H,null,[e(j,{title:wl}),e(z,null,ze({title:a(()=>[v(r(wl))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:C[0]||(C[0]=V=>m.value=!m.value)},null,8,["icon"]),S.$can("admin.operational-cost-category.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:C[1]||(C[1]=V=>l(K).get(S.route("admin.operational-cost-category.add")))})):k("",!0)]),default:a(()=>[t("div",pc,[e(Me,{ref_key:"tableRef",ref:n,class:"full-height-table",style:Ye({height:l(b)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":C[4]||(C[4]=V=>d.value=V),filter:p.search,loading:i.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:V,message:E,filter:I})=>[t("div",fc,[t("span",null,r(E)+" "+r(I?" with term "+I:""),1)])]),body:a(V=>[e(Oe,{props:V},{default:a(()=>[e(Y,{key:"name",props:V,class:"wrap-column"},{default:a(()=>[v(r(V.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[V.row.description?(u(),h("div",gc,[e(q,{name:"description"}),v(" "+r(V.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"description",props:V,class:"wrap-column"},{default:a(()=>[v(r(V.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:V},{default:a(()=>[t("div",bc,[S.$can("admin.operational-cost-category.add")||S.$can("admin.operational-cost-category.edit")||S.$can("admin.operational-cost-category.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:C[3]||(C[3]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[S.$can("admin.operational-cost-category.add")?ae((u(),U(le,{key:0,clickable:"",onClick:Q(E=>l(K).get(S.route("admin.operational-cost-category.duplicate",V.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"file_copy"})]),_:1}),e(F,null,{default:a(()=>C[5]||(C[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),S.$can("admin.operational-cost-category.edit")?ae((u(),U(le,{key:1,clickable:"",onClick:Q(E=>l(K).get(S.route("admin.operational-cost-category.edit",V.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>C[6]||(C[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),S.$can("admin.operational-cost-category.delete")?ae((u(),U(le,{key:2,onClick:Q(E=>_(V.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>C[7]||(C[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",cc,[e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":C[2]||(C[2]=V=>p.search=V),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},_c=Object.freeze(Object.defineProperty({__proto__:null,default:vc},Symbol.toStringTag,{value:"Module"})),yc={class:"q-gutter-sm"},kc={class:"col col-md-6 q-pa-xs"},wc={class:"row"},hc={class:"detail"},$c={key:0},xc={key:1},Sc={key:2},Vc={key:3},qc={colspan:"3",class:"bg-white"},hl="Rincian Biaya Operasional",Cc={__name:"Detail",setup(c){const s=fe();return(m,o)=>{const i=W("i-head"),n=W("i-link"),f=W("authenticated-layout");return u(),h(H,null,[e(i,{title:hl}),e(f,{"show-drawer-button":!0},{"left-button":a(()=>[t("div",yc,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=b=>m.$inertia.get(m.route("admin.operational-cost.index")))})])]),title:a(()=>[t("span",{class:"text-subtitle2"},r(hl))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",kc,[t("div",wc,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,null,{default:a(()=>[o[22]||(o[22]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),t("table",hc,[t("tbody",null,[t("tr",null,[o[1]||(o[1]=t("td",{style:{width:"110px"}},"Kode",-1)),o[2]||(o[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[o[3]||(o[3]=t("td",null,"Tanggal",-1)),o[4]||(o[4]=t("td",null,":",-1)),t("td",null,r(l(sa)(l(s).props.data.date)),1)]),l(s).props.data.finance_account?(u(),h("tr",$c,[o[7]||(o[7]=t("td",null,"Akun",-1)),o[8]||(o[8]=t("td",null,":",-1)),t("td",null,[e(n,{href:m.route("admin.finance-account.detail",l(s).props.data.finance_account.id)},{default:a(()=>[v(r(l(s).props.data.finance_account.name),1)]),_:1},8,["href"]),l(s).props.data.finance_account.type==="bank"?(u(),h(H,{key:0},[o[5]||(o[5]=t("br",null,null,-1)),v(" Rek "+r(l(s).props.data.finance_account.bank)+" an "+r(l(s).props.data.finance_account.holder)+" ",1),o[6]||(o[6]=t("br",null,null,-1)),v(" "+r(l(s).props.data.finance_account.number),1)],64)):k("",!0)])])):k("",!0),l(s).props.data.category?(u(),h("tr",xc,[o[9]||(o[9]=t("td",null,"Kategori",-1)),o[10]||(o[10]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.category.name),1)])):k("",!0),t("tr",null,[o[11]||(o[11]=t("td",null,"Deskripsi",-1)),o[12]||(o[12]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.description),1)]),t("tr",null,[o[13]||(o[13]=t("td",null,"Jumlah",-1)),o[14]||(o[14]=t("td",null,":",-1)),t("td",null,"Rp. "+r(l(L)(l(s).props.data.amount)),1)]),t("tr",null,[o[15]||(o[15]=t("td",null,"Catatan",-1)),o[16]||(o[16]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)]),l(s).props.data.creator?(u(),h("tr",Sc,[o[17]||(o[17]=t("td",null,"Dibuat",-1)),o[18]||(o[18]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.created_at))+" oleh "+r(l(s).props.data.creator.name),1)])):k("",!0),l(s).props.data.updater?(u(),h("tr",Vc,[o[19]||(o[19]=t("td",null,"Diperbarui",-1)),o[20]||(o[20]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.updated_at))+" oleh "+r(l(s).props.data.updater.name),1)])):k("",!0),l(s).props.data.image_path?(u(),h(H,{key:4},[o[21]||(o[21]=t("tr",null,[t("td",null,"Lampiran"),t("td",null,":"),t("td")],-1)),t("tr",null,[t("td",qc,[e(ia,{src:`/${l(s).props.data.image_path}`,class:"q-mt-none",style:Ye([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):k("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Tc=Object.freeze(Object.defineProperty({__proto__:null,default:Cc},Symbol.toStringTag,{value:"Module"})),Pc={class:"row items-center justify-end"},Rc={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(c,{emit:s}){const m=c,o=s,i=T(""),n=T(""),f=d=>{let g=!0;const _=m.minDate?mt.formatDate(m.minDate,"YYYY/MM/DD"):null,y=m.maxDate?mt.formatDate(m.maxDate,"YYYY/MM/DD"):null;return _&&(g=g&&mt.isBetweenDates(d,_,"2999/01/01",{inclusiveFrom:!0})),y&&(g=g&&mt.isBetweenDates(d,"1900/01/01",y,{inclusiveTo:!0})),g},b=G(()=>[d=>!!d||"Tanggal harus diisi",d=>{const g=mt.extractDate(d,m.displayFormat);if(!g)return"Format tanggal tidak valid";g.setHours(0,0,0,0);const _=m.minDate?new Date(m.minDate):null;_&&_.setHours(0,0,0,0);const y=m.maxDate?new Date(m.maxDate):null;return y&&y.setHours(0,0,0,0),_&&g<_?`Tanggal tidak boleh kurang dari ${mt.formatDate(m.minDate,m.displayFormat)}`:y&&g>y?`Tanggal tidak boleh lebih dari ${mt.formatDate(m.maxDate,m.displayFormat)}`:(o("update:modelValue",g),!0)}]);tt(()=>m.modelValue,d=>{d instanceof Date?(n.value=mt.formatDate(d,"YYYY/MM/DD"),i.value=mt.formatDate(d,m.displayFormat)):(n.value="",i.value="")},{immediate:!0});const p=d=>{const g=d!==null?new Date(d):null;o("update:modelValue",g),i.value=g?mt.formatDate(g,m.displayFormat):null};return(d,g)=>(u(),U(re,{modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=_=>i.value=_),label:m.label,readonly:m.readonly,disable:m.disable,error:m.error,"error-message":m.errorMessage,mask:m.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:b.value},{append:a(()=>[e(M,{icon:"event",disable:m.disable||m.readonly,flat:"",rounded:"",dense:""},{default:a(()=>[e(us,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(ms,{modelValue:n.value,"onUpdate:modelValue":[g[0]||(g[0]=_=>n.value=_),p],options:f},{default:a(()=>[t("div",Pc,[ae(e(M,{label:"Close",color:"primary",flat:""},null,512),[[me]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},ua=kt(Rc,[["__scopeId","data-v-b418ccfb"]]);function Do(c,s=!1){const m=c.map(f=>({value:f.id,label:f.name})),o=s?[{value:"all",label:"Semua"},...m]:m,i=T([...o]);return{filteredCostCategories:i,filterCostCategory:(f,b)=>{const p=f.toLowerCase();b(()=>{i.value=o.filter(d=>d.label.toLowerCase().includes(p))})},costCategoryOptions:o}}const Oc={class:"q-gutter-sm"},Dc={class:"col col-md-6 q-pa-xs"},Ic={__name:"Editor",setup(c){var _;const s=fe(),m=(s.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=Do(s.props.categories),i=s.props.finance_accounts.map(y=>({label:y.name,value:y.id})),n=T(o),f=T([...n.value]),b=Je({id:s.props.data.id,finance_account_id:s.props.data.finance_account_id??null,category_id:s.props.data.category_id??null,date:new Date(s.props.data.date),description:s.props.data.description,notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((_=s.props.data)==null?void 0:_.image_path)??null,image:null}),p=()=>{da(b,{date:"YYYY-MM-DD"}),rt({form:b,url:route("admin.operational-cost.save")})},d=(y,x)=>{x(()=>{f.value=n.value.filter(S=>S.label.toLowerCase().includes(y.toLowerCase()))})},g=()=>{b.image_path=null};return(y,x)=>{const S=W("i-head"),C=W("authenticated-layout");return u(),h(H,null,[e(S,{title:m}),e(C,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",Oc,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:x[0]||(x[0]=j=>y.$inertia.get(y.route("admin.operational-cost.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Dc,[e(Ge,{class:"row",onSubmit:Q(p,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":x[1]||(x[1]=j=>l(b).id=j)},null,512),[[wt,l(b).id]]),e(ce,{autofocus:"",modelValue:l(b).category_id,"onUpdate:modelValue":x[2]||(x[2]=j=>l(b).category_id=j),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:f.value,"map-options":"","emit-value":"",onFilter:d,error:!!l(b).errors.category_id,disable:l(b).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(F,null,{default:a(()=>x[10]||(x[10]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(ua,{modelValue:l(b).date,"onUpdate:modelValue":x[3]||(x[3]=j=>l(b).date=j),label:"Tanggal",error:!!l(b).errors.date,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(re,{modelValue:l(b).description,"onUpdate:modelValue":x[4]||(x[4]=j=>l(b).description=j),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!l(b).errors.description,disable:l(b).processing,"error-message":l(b).errors.description,rules:[j=>j&&j.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Be,{modelValue:l(b).amount,"onUpdate:modelValue":x[5]||(x[5]=j=>l(b).amount=j),label:"Jumlah",lazyRules:"",disable:l(b).processing,error:!!l(b).errors.amount,errorMessage:l(b).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(ce,{class:"custom-select",modelValue:l(b).finance_account_id,"onUpdate:modelValue":x[6]||(x[6]=j=>l(b).finance_account_id=j),label:"Sumber Dana",options:l(i),"map-options":"","emit-value":"",clearable:"",errorMessage:l(b).errors.finance_account_id,error:!!l(b).errors.finance_account_id,disable:l(b).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(re,{modelValue:l(b).notes,"onUpdate:modelValue":x[7]||(x[7]=j=>l(b).notes=j),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(b).processing,error:!!l(b).errors.notes,"error-message":l(b).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(Ma,{modelValue:l(b).image,"onUpdate:modelValue":x[8]||(x[8]=j=>l(b).image=j),"initial-image-path":l(b).image_path,disabled:l(b).processing,error:!!l(b).errors.image||!!l(b).errors.image_path,"error-message":l(b).errors.image||l(b).errors.image_path,onImageCleared:g},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(b).processing},null,8,["disable"]),e(M,{icon:"cancel",label:"Batal",disable:l(b).processing,onClick:x[9]||(x[9]=j=>l(K).get(y.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Uc=Object.freeze(Object.defineProperty({__proto__:null,default:Ic},Symbol.toStringTag,{value:"Module"})),jc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ec={class:"q-pa-xs"},Ac={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Mc={key:0},Nc={key:1},Bc={key:0},Fc={class:"flex justify-end no-wrap"},$l="Biaya Operasional",zc={__name:"Index",setup(c){const s=fe(),m=he(),o=T(!1),i=T(null),n=T(null),f=ot(n),b=T(null),p=T(!1),d=De().startOf("month").toDate(),g=De().endOf("month").toDate(),_=T([]),y=T(!0),{costCategoryOptions:x}=Do(s.props.categories),S=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...x],{accountOptions:C}=cs(s.props.finance_accounts),j=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...C],z=Ee({search:"",finance_account_id:"all",category_id:"all",start_date:d,end_date:g,...He()}),V=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),E=[{name:"code",label:m.screen.lt.md?"Item":"Kode",field:"code",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun",field:"finance_account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{O()});const I=D=>st({message:`Hapus Biaya ${D.code}?`,url:route("admin.operational-cost.delete",D.id),fetchItemsCallback:O,loading:y}),O=(D=null)=>{const R={...z,start_date:De(z.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:De(z.end_date).format("YYYY-MM-DD HH:mm:ss")};Ke({pagination:V,filter:R,props:D,rows:_,url:route("admin.operational-cost.data"),loading:y,tableRef:i})},B=()=>{O()},w=G(()=>m.screen.gt.sm?E:E.filter(D=>D.name==="code"||D.name==="action")),$=D=>{b.value=D,p.value=!0};return(D,R)=>{const P=W("i-head"),A=W("authenticated-layout");return u(),h(H,null,[e(P,{title:$l}),e(A,null,ze({title:a(()=>[v(r($l))]),"right-button":a(()=>[e(M,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=N=>o.value=!o.value)},null,8,["icon"]),D.$can("admin.operational-cost.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=N=>l(K).get(D.route("admin.operational-cost.add")))})):k("",!0)]),default:a(()=>[t("div",Ec,[e(Me,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:V.value,"onUpdate:pagination":R[8]||(R[8]=N=>V.value=N),filter:z.search,loading:y.value,columns:w.value,rows:_.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(f)}),onRequest:O,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:N,message:oe,filter:ge})=>[t("div",Ac,[t("span",null,r(oe)+" "+r(ge?" with term "+ge:""),1)])]),body:a(N=>[e(Oe,{props:N,class:"cursor-pointer",onClick:Q(oe=>l(K).get(D.route("admin.operational-cost.detail",{id:N.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"code",props:N,class:"wrap-column"},{default:a(()=>[l(m).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[v(" Kode: ")],64)),v(" "+r(N.row.code)+" ",1),l(m).screen.gt.sm?k("",!0):(u(),h(H,{key:1},[t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(sa)(N.row.date)),1)]),N.row.finance_account?(u(),h("div",Mc,[e(q,{name:"wallet",class:"inline-icon"}),v(" "+r(N.row.finance_account.name),1)])):k("",!0),N.row.category?(u(),h("div",Nc,[e(q,{name:"category",class:"inline-icon"}),v(" "+r(N.row.category.name),1)])):k("",!0),e(Se,{icon:"description",text:N.row.description,class:"inline-icon"},null,8,["text"]),t("div",null,[e(q,{name:"money",class:"inline-icon"}),v(" Rp. "+r(l(L)(N.row.amount)),1)]),e(Se,{icon:"notes",text:N.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(Y,{key:"date",props:N,class:"wrap-column"},{default:a(()=>[v(r(l(sa)(N.row.date)),1)]),_:2},1032,["props"]),e(Y,{key:"finance_account_id",props:N,class:"wrap-column"},{default:a(()=>[v(r(N.row.finance_account?N.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(Y,{key:"category_id",props:N},{default:a(()=>[N.row.category?(u(),h("div",Bc,r(N.row.category.name),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"description",props:N},{default:a(()=>[e(Se,{text:N.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"amount",props:N},{default:a(()=>[v(r(l(L)(N.row.amount)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:N},{default:a(()=>[e(Se,{text:N.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:N},{default:a(()=>[t("div",Fc,[e(M,{icon:"image",color:"primary",dense:"",flat:"",disable:N.row.image_path===null||N.row.image_path==="",onClick:Q(oe=>$(N.row.image_path),["stop"])},{default:a(()=>[N.row.image_path!=null?(u(),U(Ot,{key:0},{default:a(()=>R[10]||(R[10]=[v(" Lihat Bukti ")])),_:1})):k("",!0)]),_:2},1032,["disable","onClick"]),D.$can("admin.operational-cost.add")||D.$can("admin.operational-cost.edit")||D.$can("admin.operational-cost.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[7]||(R[7]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[D.$can("admin.operational-cost.add")?ae((u(),U(le,{key:0,clickable:"",onClick:Q(oe=>l(K).get(D.route("admin.operational-cost.duplicate",N.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"file_copy"})]),_:1}),e(F,null,{default:a(()=>R[11]||(R[11]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),D.$can("admin.operational-cost.edit")?ae((u(),U(le,{key:1,clickable:"",onClick:Q(oe=>l(K).get(D.route("admin.operational-cost.edit",N.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>R[12]||(R[12]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),D.$can("admin.operational-cost.delete")?ae((u(),U(le,{key:2,onClick:Q(oe=>I(N.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>R[13]||(R[13]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(ga,{modelValue:p.value,"onUpdate:modelValue":R[9]||(R[9]=N=>p.value=N),imageUrl:`/${b.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",jc,[e(Ze,{modelValue:z.start_date,"onUpdate:modelValue":[R[2]||(R[2]=N=>z.start_date=N),B],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Ze,{modelValue:z.end_date,"onUpdate:modelValue":[R[3]||(R[3]=N=>z.end_date=N),B],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:z.category_id,"onUpdate:modelValue":[R[4]||(R[4]=N=>z.category_id=N),B],options:S,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:z.finance_account_id,"onUpdate:modelValue":[R[5]||(R[5]=N=>z.finance_account_id=N),B],options:j,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:z.search,"onUpdate:modelValue":R[6]||(R[6]=N=>z.search=N),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Lc=Object.freeze(Object.defineProperty({__proto__:null,default:zc},Symbol.toStringTag,{value:"Module"})),Hc={class:"q-gutter-sm"},Kc={class:"col col-md-6 q-pa-xs"},Yc={__name:"Editor",setup(c){const s=he(),m=fe(),o=(m.props.data.id?"Edit":"Tambah")+" Kategori Produk",i=Je({id:m.props.data.id,name:m.props.data.name,description:m.props.data.description}),n=()=>rt({form:i,url:route("admin.product-category.save")});return(f,b)=>{const p=W("i-head"),d=W("authenticated-layout");return u(),h(H,null,[e(p,{title:o}),e(d,{"show-drawer-button":!l(s).screen.lt.md},ze({title:a(()=>[v(r(o))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Kc,[e(Ge,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(i).id=g)},null,512),[[wt,l(i).id]]),e(re,{autofocus:"",modelValue:l(i).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(i).name=g),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!l(i).errors.name,disable:l(i).processing,"error-message":l(i).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(i).description,"onUpdate:modelValue":b[3]||(b[3]=g=>l(i).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.description,"error-message":l(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"]),e(M,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:b[4]||(b[4]=g=>l(i).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",Hc,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>l(K).get(f.route("admin.product-category.index")))})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},Wc=Object.freeze(Object.defineProperty({__proto__:null,default:Yc},Symbol.toStringTag,{value:"Module"})),Qc={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Jc={class:"q-pa-xs"},Gc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Xc={key:0,class:"text-grey-8"},Zc={class:"flex justify-end"},xl="Kategori Produk",ep={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=Ee({search:"",...He()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];xe(()=>{y()});const _=S=>st({message:`Hapus Kategori ${S.name}?`,url:route("admin.product-category.delete",S.id),fetchItemsCallback:y,loading:i}),y=(S=null)=>{Ke({pagination:d,filter:p,props:S,rows:o,url:route("admin.product-category.data"),loading:i,tableRef:n})},x=G(()=>s.screen.gt.sm?g:g.filter(S=>S.name==="name"||S.name==="action"));return(S,C)=>{const j=W("i-head"),z=W("authenticated-layout");return u(),h(H,null,[e(j,{title:xl}),e(z,null,ze({title:a(()=>[v(r(xl))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:C[0]||(C[0]=V=>m.value=!m.value)},null,8,["icon"]),S.$can("admin.product-category.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:C[1]||(C[1]=V=>l(K).get(S.route("admin.product-category.add")))})):k("",!0)]),default:a(()=>[t("div",Jc,[e(Me,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":C[4]||(C[4]=V=>d.value=V),filter:p.search,loading:i.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:V,message:E,filter:I})=>[t("div",Gc,[t("span",null,r(E)+" "+r(I?" with term "+I:""),1)])]),body:a(V=>[e(Oe,{props:V},{default:a(()=>[e(Y,{key:"name",props:V,class:"wrap-column"},{default:a(()=>[v(r(V.row.name)+" ",1),l(s).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[V.row.description?(u(),h("div",Xc,[e(q,{name:"description"}),v(" "+r(V.row.description),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"description",props:V,class:"wrap-column"},{default:a(()=>[v(r(V.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:V},{default:a(()=>[t("div",Zc,[S.$can("admin.product-category.add")||S.$can("admin.product-category.edit")||S.$can("admin.product-category.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:C[3]||(C[3]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[S.$can("admin.product-category.add")?ae((u(),U(le,{key:0,clickable:"",onClick:Q(E=>l(K).get(S.route("admin.product-category.duplicate",V.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"file_copy"})]),_:1}),e(F,null,{default:a(()=>C[5]||(C[5]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),S.$can("admin.product-category.edit")?ae((u(),U(le,{key:1,clickable:"",onClick:Q(E=>l(K).get(S.route("admin.product-category.edit",V.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>C[6]||(C[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),S.$can("admin.product-category.delete")?ae((u(),U(le,{key:2,onClick:Q(E=>_(V.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>C[7]||(C[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Qc,[e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":C[2]||(C[2]=V=>p.search=V),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},tp=Object.freeze(Object.defineProperty({__proto__:null,default:ep},Symbol.toStringTag,{value:"Module"})),ap={class:"detail"},lp={key:0},op={key:1},np={key:2},sp={class:"detail"},rp={class:"detail"},ip={key:0},dp={key:0},up={key:0},mp={key:0},cp={class:"detail"},pp={key:0,class:"q-pt-md"},Io={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(c){const s=c;he();const m=i=>`${i>0?L((i-s.product.cost)/s.product.cost*100,2):0}%`,o=()=>{st({message:`Hapus Produk ${s.product.name}?`,url:route("admin.product.delete",s.product.id),onSuccess:()=>{router.get(route("admin.product.index"))}})};return(i,n)=>{const f=W("i-link");return u(),h("div",null,[n[39]||(n[39]=t("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),t("table",ap,[t("tbody",null,[t("tr",null,[n[1]||(n[1]=t("td",{style:{width:"120px"}},"Kode / Nama",-1)),n[2]||(n[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(c.product.name),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"Deskirpsi",-1)),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,r(c.product.description),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Barcode",-1)),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,r(c.product.barcode),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Jenis Produk",-1)),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,r(i.$CONSTANTS.PRODUCT_TYPES[c.product.type]),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Kategori",-1)),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,r(c.product.category?c.product.category.name:"--Tidak memiliki kategori--"),1)]),i.$can("admin.product:view-supplier")?(u(),h("tr",lp,[n[11]||(n[11]=t("td",null,"Supplier",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[c.product.supplier?(u(),U(f,{key:0,href:i.route("admin.supplier.detail",{id:c.product.supplier.id})},{default:a(()=>[v(r(c.product.supplier.name),1)]),_:1},8,["href"])):(u(),h(H,{key:1},[v(r("--Tidak memiliki supplier--"))],64))])])):k("",!0),t("tr",null,[n[13]||(n[13]=t("td",null,"Status",-1)),n[14]||(n[14]=t("td",null,":",-1)),t("td",null,r(c.product.active?"Aktif":"Tidak Aktif"),1)]),c.product.created_at?(u(),h("tr",op,[n[16]||(n[16]=t("td",null,"Dibuat Oleh",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[c.product.creator?(u(),h(H,{key:0},[e(f,{href:i.route("admin.user.detail",{id:c.product.creator})},{default:a(()=>[v(r(c.product.creator.username),1)]),_:1},8,["href"]),n[15]||(n[15]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(c.product.created_at)),1)])])):k("",!0),c.product.updater?(u(),h("tr",np,[n[19]||(n[19]=t("td",null,"Diperbarui oleh",-1)),n[20]||(n[20]=t("td",null,":",-1)),t("td",null,[c.product.updater?(u(),h(H,{key:0},[e(f,{href:i.route("admin.user.detail",{id:c.product.updater})},{default:a(()=>[v(r(c.product.updater.username),1)]),_:1},8,["href"]),n[18]||(n[18]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(c.product.updated_at)),1)])])):k("",!0)])]),n[40]||(n[40]=t("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),t("table",sp,[t("tbody",null,[t("tr",null,[n[21]||(n[21]=t("td",{style:{width:"120px"}},"Stok",-1)),n[22]||(n[22]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(L)(c.product.stock))+" "+r(c.product.uom),1)]),t("tr",null,[n[23]||(n[23]=t("td",null,"Stok Minimum",-1)),n[24]||(n[24]=t("td",null,":",-1)),t("td",null,r(l(L)(c.product.min_stock))+" "+r(c.product.uom),1)]),t("tr",null,[n[25]||(n[25]=t("td",null,"Barcode",-1)),n[26]||(n[26]=t("td",null,":",-1)),t("td",null,r(c.product.barcode),1)])])]),n[41]||(n[41]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),t("table",rp,[t("tbody",null,[t("tr",null,[n[27]||(n[27]=t("td",null,"Opsi Harga",-1)),n[28]||(n[28]=t("td",null,":",-1)),t("td",null,r(c.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),i.$can("admin.product:view-cost")?(u(),h("tr",ip,[n[29]||(n[29]=t("td",{style:{width:"120px"}},"Harga Beli",-1)),n[30]||(n[30]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"Rp. "+r(l(L)(c.product.cost)),1)])):k("",!0),t("tr",null,[n[31]||(n[31]=t("td",null,"Harga Eceran",-1)),n[32]||(n[32]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(l(L)(c.product.price_1))+" ",1),i.$can("admin.product:view-cost")?(u(),h("span",dp," ("+r(m(c.product.price_1))+") ",1)):k("",!0)])]),t("tr",null,[n[33]||(n[33]=t("td",null,"Harga Partai",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(l(L)(c.product.price_2))+" ",1),i.$can("admin.product:view-cost")?(u(),h("span",up," ("+r(m(c.product.price_2))+") ",1)):k("",!0)])]),t("tr",null,[n[35]||(n[35]=t("td",null,"Harga Grosir",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,[v(" Rp. "+r(l(L)(c.product.price_3))+" ",1),i.$can("admin.product:view-cost")?(u(),h("span",mp," ("+r(m(c.product.price_3))+") ",1)):k("",!0)])])])]),n[42]||(n[42]=t("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),t("table",cp,[t("tbody",null,[t("tr",null,[n[37]||(n[37]=t("td",{style:{width:"120px"}},"Catatan",-1)),n[38]||(n[38]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(c.product.notes),1)])])]),i.$can("admin.product.delete")?(u(),h("div",pp,[e(M,{icon:"delete",label:"Hapus",color:"negative",onClick:n[0]||(n[0]=b=>o())})])):k("",!0)])}}},fp=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"})),gp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},bp={key:0},Uo={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(c){const s=c,m=he(),o=T([]),i=T(!0),n=Ee({...He()}),f=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let b=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"quantity_before",label:"Stok Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Stok Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{p()});const p=(g=null)=>Ke({pagination:f,filter:n,props:g,rows:o,url:route("admin.stock-movement.data",{filter:{product_id:s.productId}}),loading:i}),d=G(()=>m.screen.lt.sm?b.filter(g=>g.name==="id"||g.name==="quantity"):b);return(g,_)=>(u(),U(Me,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:f.value,"onUpdate:pagination":_[0]||(_[0]=y=>f.value=y),filter:n.search,loading:i.value,columns:d.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:p,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:x,filter:S})=>[t("div",gp,[t("span",null,r(x)+" "+r(S?" with term "+S:""),1)])]),body:a(y=>[e(Oe,{props:y},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(y.row.created_at)),1)]),t("div",null,[e(it,null,{default:a(()=>[v(r(g.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type]),1)]),_:2},1024)]),l(m).screen.lt.sm?(u(),h(H,{key:0},[t("div",{class:qe(y.row.quantity>0?"text-positive":"text-negative")},[e(q,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(l(L)(y.row.quantity_before))+" "+r(y.row.uom)+"  "+r(l(L)(y.row.quantity_after))+" "+r(y.row.uom),1)],2),e(Se,{text:y.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"created_at",props:y},{default:a(()=>[v(r(l(ve)(y.row.created_at)),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:y},{default:a(()=>[v(r(g.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[y.row.ref_type])+" ",1),y.row.ref?(u(),h("span",bp,r(y.row.ref),1)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"quantity_before",props:y},{default:a(()=>[v(r(l(L)(y.row.quantity_before)),1)]),_:2},1032,["props"]),e(Y,{key:"quantity",props:y,class:qe(y.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[v(r(l(St)(y.row.quantity))+" ",1),l(m).screen.lt.sm?(u(),h(H,{key:0},[v(r(y.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Y,{key:"quantity_after",props:y},{default:a(()=>[v(r(l(L)(y.row.quantity_after)),1)]),_:2},1032,["props"]),e(Y,{key:"uom",props:y},{default:a(()=>[v(r(y.row.uom),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},vp=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),_p={class:"q-gutter-sm"},yp={class:"q-gutter-sm"},kp={class:"row justify-center"},wp={class:"col col-lg-6 q-pa-xs"},hp={class:"row"},$p={__name:"Detail",setup(c){const s=fe(),m=`Rincian Produk #${s.props.data.id}`,o=T("main");return(i,n)=>{const f=W("i-head"),b=W("authenticated-layout");return u(),h(H,null,[e(f,{title:m}),e(b,{"show-drawer-button":!0},{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",_p,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>l(K).get(i.route("admin.product.index")))})])]),"right-button":a(()=>[t("div",yp,[i.$can("admin.product.edit")?(u(),U(M,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[1]||(n[1]=p=>l(K).get(i.route("admin.product.edit",{id:l(s).props.data.id}))),title:"Edit produk"})):k("",!0),i.$can("admin.product.add")?(u(),U(M,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[2]||(n[2]=p=>l(K).get(i.route("admin.product.duplicate",{id:l(s).props.data.id}))),title:"Duplikat produk"})):k("",!0),i.$can("admin.product.add")?(u(),U(M,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:n[3]||(n[3]=p=>l(K).get(i.route("admin.product.add"))),title:"Tambah produk baru"})):k("",!0)])]),default:a(()=>[t("div",kp,[t("div",wp,[t("div",hp,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Tt,{modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=p=>o.value=p),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(Pt,{modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=p=>o.value=p),animated:""},{default:a(()=>[e(ut,{name:"main"},{default:a(()=>[e(Io,{product:l(s).props.data},null,8,["product"])]),_:1}),e(ut,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Uo,{"product-id":l(s).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},xp=Object.freeze(Object.defineProperty({__proto__:null,default:$p},Symbol.toStringTag,{value:"Module"})),Kt=jt({name:"QBtnToggle",props:{...io,modelValue:{required:!0},options:{type:Array,required:!0,validator:c=>c.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(c,{slots:s,emit:m}){const o=G(()=>c.options.find(y=>y.value===c.modelValue)!==void 0),i=G(()=>({type:"hidden",name:c.name,value:c.modelValue})),n=gs(i),f=G(()=>ps(c)),b=G(()=>({rounded:c.rounded,dense:c.dense,...f.value})),p=G(()=>c.options.map((y,x)=>{const{attrs:S,value:C,slot:j,...z}=y;return{slot:j,props:{key:x,"aria-pressed":C===c.modelValue?"true":"false",...S,...z,...b.value,disable:c.disable===!0||z.disable===!0,color:C===c.modelValue?g(z,"toggleColor"):g(z,"color"),textColor:C===c.modelValue?g(z,"toggleTextColor"):g(z,"textColor"),noCaps:g(z,"noCaps")===!0,noWrap:g(z,"noWrap")===!0,size:g(z,"size"),padding:g(z,"padding"),ripple:g(z,"ripple"),stack:g(z,"stack")===!0,stretch:g(z,"stretch")===!0,onClick(V){d(C,y,V)}}}}));function d(y,x,S){c.readonly!==!0&&(c.modelValue===y?c.clearable===!0&&(m("update:modelValue",null,null),m("clear")):m("update:modelValue",y,x),m("click",S))}function g(y,x){return y[x]===void 0?c[x]:y[x]}function _(){const y=p.value.map(x=>Ce(M,x.props,x.slot!==void 0?s[x.slot]:void 0));return c.name!==void 0&&c.disable!==!0&&o.value===!0&&n(y,"push"),so(s.default,y)}return()=>Ce(fs,{class:"q-btn-toggle",...f.value,rounded:c.rounded,stretch:c.stretch,glossy:c.glossy,spread:c.spread},_)}});function _a(c,s=!1){const m=c.map(f=>({value:f.id,label:f.name})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Kategori"},...m]:m,i=T([...o]);return{filteredCategories:i,filterCategories:(f,b)=>{const p=f.toLowerCase();b(()=>{i.value=o.filter(d=>d.label.toLowerCase().includes(p))})},categories:o}}function ya(c,s=!1){const m=c.map(f=>({value:f.id,label:f.name+" ("+f.code+")"})),o=s?[{value:"all",label:"Semua"},{value:"null",label:"Tanpa Supplier"},...m]:m,i=T([...o]);return{filteredSuppliers:i,filterSupplierFn:(f,b)=>{const p=f.toLowerCase();b(()=>{i.value=o.filter(d=>d.label.toLowerCase().includes(p))})},suppliers:o}}const Oa=Na({__name:"PercentInput",props:{modelValue:{type:[Number,null],required:!1,default:0},label:{type:[String,void 0],required:!1,default:void 0},locale:{type:String,default:"id-ID"},outlined:{type:Boolean,default:!1},allowNegative:{type:Boolean,default:!1},maxDecimals:{type:Number,default:0},lazyRules:{type:[Boolean,String],default:!1},disable:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(c,{expose:s,emit:m}){const o=T(null),i=bs(),n=T(!1);s({focus:()=>{o.value&&o.value.focus()},select:()=>{var V;if((V=o.value)!=null&&V.$el){const E=o.value.$el.querySelector("input");E==null||E.select()}}});const f=c,b=m,p=T(""),d=V=>{const I=new Intl.NumberFormat(V).format(123456789e-2),O=I.includes(",")?",":".",B=I.replace(/\d/g,"").replace(O,"").charAt(0);return{decimalSeparator:O,thousandSeparator:B}},{decimalSeparator:g,thousandSeparator:_}=d(f.locale),y=V=>{if(V==null||isNaN(V)){if(f.maxDecimals>0)return"";V=0}return new Intl.NumberFormat(f.locale,{minimumFractionDigits:f.maxDecimals,maximumFractionDigits:f.maxDecimals}).format(V)};tt(()=>f.modelValue,V=>{n.value||(p.value=y(V))},{immediate:!0});const x=V=>{const E=V.replace(/[^0-9.,-]+/g,"").replace(new RegExp(`\\${_}`,"g"),"").replace(new RegExp(`\\${g}`,"g"),".");if(E===""||E==="-")return null;const I=parseFloat(E);return isNaN(I)?null:parseFloat(I.toFixed(f.maxDecimals))},S=()=>{n.value=!0,x(p.value),bt(()=>{var V;(V=o.value)==null||V.select()})},C=V=>{p.value=V},j=()=>{n.value=!1;const V=x(p.value);b("update:modelValue",V),p.value=y(V)},z=V=>{const E=["Backspace","Delete","Tab","ArrowLeft","ArrowRight","Home","End","Shift"];V.ctrlKey||V.metaKey||V.key>="0"&&V.key<="9"||(V.key===g||V.key===_)&&!p.value.includes(g)||f.allowNegative&&V.key==="-"&&V.target.selectionStart===0||E.includes(V.key)||V.preventDefault()};return(V,E)=>(u(),U(l(re),{ref_key:"qInputRef",ref:o,"model-value":p.value,label:f.label,outlined:f.outlined,"onUpdate:modelValue":C,onBlur:j,onFocus:S,onKeydown:z,"lazy-rules":f.lazyRules,disable:f.disable,error:f.error,rules:f.rules,"error-message":f.errorMessage},ze({_:2},[l(i).prepend?{name:"prepend",fn:a(()=>[Ct(V.$slots,"prepend")]),key:"0"}:void 0,l(i).append?{name:"append",fn:a(()=>[Ct(V.$slots,"append")]),key:"1"}:void 0]),1032,["model-value","label","outlined","lazy-rules","disable","error","rules","error-message"]))}}),Sp=Na({__name:"BarcodeInput",props:{modelValue:{}},emits:["update:modelValue","scan-success"],setup(c,{emit:s}){const m=c,o=s,i=he(),n=T(m.modelValue);tt(()=>m.modelValue,z=>{z!==n.value&&(n.value=z)});const f=z=>{n.value=z,o("update:modelValue",z)},b=T(null),p=T(!1),d=T(!1);let g=null,_=null,y=null;xe(async()=>{if("BarcodeDetector"in window){p.value=!0;try{const z=await window.BarcodeDetector.getSupportedFormats();_=new BarcodeDetector({formats:z})}catch(z){console.warn("BarcodeDetector init error:",z),p.value=!1}}}),aa(()=>C());function x(){if(!p.value){i.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}d.value?C():S()}async function S(){if(_)try{d.value=!0,g=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),b.value&&(b.value.srcObject=g),await new Promise(z=>setTimeout(z,300)),j()}catch(z){d.value=!1,i.notify({type:"negative",message:`Gagal akses kamera: ${z.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function C(){d.value=!1,y&&cancelAnimationFrame(y),g&&(g.getTracks().forEach(z=>z.stop()),g=null)}async function j(){var z;if(!(!b.value||!_||!d.value)){try{const V=await _.detect(b.value);if(V.length>0){const E=V[0].rawValue;n.value=E,o("update:modelValue",E),o("scan-success",E),(z=navigator.vibrate)==null||z.call(navigator,100),i.notify({type:"positive",message:`Barcode terdeteksi: ${E}`,timeout:1e3}),C();return}}catch(V){console.warn("Detection error:",V)}y=requestAnimationFrame(j)}}return(z,V)=>(u(),h("div",null,[e(re,Ua(z.$attrs,{"model-value":n.value,"onUpdate:modelValue":f,disable:d.value||z.$attrs.disable,loading:d.value||z.$attrs.loading}),ze({append:a(()=>[p.value&&!d.value&&!n.value?(u(),U(q,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:x},{default:a(()=>[e(Ot,null,{default:a(()=>V[1]||(V[1]=[v("Scan Barcode")])),_:1})]),_:1})):d.value?(u(),U(uo,{key:1,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0)]),_:2},[je(z.$slots,(E,I)=>({name:I,fn:a(O=>[I!=="append"?Ct(z.$slots,I,Ba(Ua({key:0},O)),void 0,!0):k("",!0)])}))]),1040,["model-value","disable","loading"]),e(nt,{modelValue:d.value,"onUpdate:modelValue":V[0]||(V[0]=E=>d.value=E),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(de,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(ee,{class:"text-center q-pb-none"},{default:a(()=>V[2]||(V[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(ee,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:b,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(lt,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(M,{label:"Batal Scan",color:"negative",icon:"close",onClick:C})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Vp=kt(Sp,[["__scopeId","data-v-38d5a1a0"]]),qp={class:"q-gutter-sm"},Cp={class:"col col-md-6 q-pa-xs"},Tp={class:"row q-gutter-md"},Pp={class:"col"},Rp={class:"col"},Op={class:"row q-gutter-md"},Dp={class:"q-mt-md full-width"},Ip={__name:"Editor",setup(c){const s=fe(),m=(s.props.data.id?"Edit":"Tambah")+" Produk",o=Fe(window.CONSTANTS.PRODUCT_TYPES),i=T(!1),n=Je({id:s.props.data.id,category_id:s.props.data.category_id,supplier_id:s.props.data.supplier_id,type:s.props.data.type||"",name:s.props.data.name||"",description:s.props.data.description||"",stock:parseFloat(s.props.data.stock)||0,min_stock:parseFloat(s.props.data.min_stock)||0,max_stock:parseFloat(s.props.data.max_stock)||0,uom:s.props.data.uom||"",barcode:s.props.data.barcode||"",cost:parseFloat(s.props.data.cost)||0,price_1:parseFloat(s.props.data.price_1)||0,price_2:parseFloat(s.props.data.price_2)||0,price_3:parseFloat(s.props.data.price_3)||0,price_1_markup:parseFloat(s.props.data.price_1_markup),price_2_markup:parseFloat(s.props.data.price_2_markup),price_3_markup:parseFloat(s.props.data.price_3_markup),price_1_option:s.props.data.price_1_option??"price",price_2_option:s.props.data.price_2_option??"price",price_3_option:s.props.data.price_3_option??"price",active:!!s.props.data.active,price_editable:!!s.props.data.price_editable,notes:s.props.data.notes||""}),f=()=>rt({form:n,url:route("admin.product.save")});function b(C){return s.props.data.id&&s.props.data.supplier&&(C.some(z=>z.id===s.props.data.supplier_id)||C.unshift(s.props.data.supplier)),C}const{filteredCategories:p,filterCategories:d}=_a(s.props.categories),{filteredSuppliers:g,filterSupplierFn:_}=ya(b(s.props.suppliers)),y=(C,j)=>(C=parseFloat(C)||0,j=parseFloat(j)||0,j<=0?C>0?100:0:(C-j)/j*100),x=(C,j)=>{C=parseFloat(C)||0,j=parseFloat(j)||0;const z=C*(1+j/100);return Math.round(z)};tt(()=>n.cost,C=>{i.value||(i.value=!0,n.price_1_option=="markup"?n.price_1=x(C,n.price_1_markup):n.price_1_markup=y(n.price_1,C),n.price_2_option=="markup"?n.price_2=x(C,n.price_2_markup):n.price_2_markup=y(n.price_2,C),n.price_3_option=="markup"?n.price_3=x(C,n.price_3_markup):n.price_3_markup=y(n.price_3,C),i.value=!1)},{immediate:!1});const S=C=>{const j=`price_${C}`,z=`price_${C}_markup`,V=`price_${C}_option`;tt(()=>n[j],E=>{if(n[V]=="markup"||i.value)return;i.value=!0;const I=y(E,n.cost);n[z]=parseFloat(I.toFixed(2)),i.value=!1},{deep:!1}),tt(()=>n[z],E=>{n[V]!="price"&&(i.value||(i.value=!0,n[j]=x(n.cost,E),i.value=!1))},{deep:!1})};for(let C=1;C<=3;C++)S(C);return xe(()=>{for(let C=1;C<=3;C++)n[`price_${C}_markup`]=y(n[`price_${C}`],n.cost)}),(C,j)=>{const z=W("i-head"),V=W("authenticated-layout");return u(),h(H,null,[e(z,{title:m}),e(V,{"show-drawer-button":!0},{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",qp,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:j[0]||(j[0]=E=>l(K).get(C.route("admin.product.index")))})])]),"right-button":a(()=>[e(M,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(n).processing,onClick:j[1]||(j[1]=E=>f()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Cp,[e(Ge,{class:"row",onKeydown:j[25]||(j[25]=Yt(Q(()=>{},["prevent"]),["enter"])),onSubmit:Q(f,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":j[2]||(j[2]=E=>l(n).id=E)},null,512),[[wt,l(n).id]]),j[32]||(j[32]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(ce,{disabled:!!l(n).id,autofocus:"",modelValue:l(n).type,"onUpdate:modelValue":j[3]||(j[3]=E=>l(n).type=E),class:"custom-select",options:l(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["disabled","modelValue","options"]),e(re,{modelValue:l(n).name,"onUpdate:modelValue":j[4]||(j[4]=E=>l(n).name=E),modelModifiers:{trim:!0},label:"Kode / Nama Produk","lazy-rules":"",error:!!l(n).errors.name,disable:l(n).processing,"error-message":l(n).errors.name,rules:[E=>E&&E.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(n).description,"onUpdate:modelValue":j[5]||(j[5]=E=>l(n).description=E),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi (Opsional)","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.description,"error-message":l(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(n).category_id,"onUpdate:modelValue":j[6]||(j[6]=E=>l(n).category_id=E),label:"Kategori (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(p),"map-options":"","emit-value":"",onFilter:l(d),"option-label":"label","option-value":"value",error:!!l(n).errors.category_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(F,null,{default:a(()=>j[26]||(j[26]=[v("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),C.$can("admin.product:view-supplier")?(u(),U(ce,{key:0,modelValue:l(n).supplier_id,"onUpdate:modelValue":j[7]||(j[7]=E=>l(n).supplier_id=E),label:"Supplier Default (Opsional)","use-input":"","input-debounce":"300",clearable:"",options:l(g),"map-options":"","emit-value":"",onFilter:l(_),"option-label":"label","option-value":"value",error:!!l(n).errors.supplier_id,disable:l(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(F,null,{default:a(()=>j[27]||(j[27]=[v("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):k("",!0),e(Rt,{class:"q-mt-md",modelValue:l(n).active,"onUpdate:modelValue":j[8]||(j[8]=E=>l(n).active=E),disable:l(n).processing,label:"Produk Aktif (Ditampilkan)"},null,8,["modelValue","disable"]),j[33]||(j[33]=t("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),t("div",Tp,[t("div",Pp,[e(re,{modelValue:l(n).uom,"onUpdate:modelValue":j[9]||(j[9]=E=>l(n).uom=E),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!l(n).errors.uom,disable:l(n).processing,"error-message":l(n).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])]),t("div",Rp,[e(Vp,{modelValue:l(n).barcode,"onUpdate:modelValue":j[10]||(j[10]=E=>l(n).barcode=E),modelModifiers:{trim:!0},label:"Barcode"},null,8,["modelValue"])])]),t("div",Op,[e(Be,{modelValue:l(n).stock,"onUpdate:modelValue":j[11]||(j[11]=E=>l(n).stock=E),label:"Stok Aktual",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.stock,errorMessage:l(n).errors.stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"]),e(Be,{modelValue:l(n).min_stock,"onUpdate:modelValue":j[12]||(j[12]=E=>l(n).min_stock=E),label:"Stok Minimum",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.min_stock,errorMessage:l(n).errors.min_stock,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","errorMessage"])]),j[34]||(j[34]=t("div",{class:"text-subtitle1 q-pt-lg"},"Harga & Modal",-1)),C.$can("admin.product:view-cost")?(u(),U(Be,{key:1,modelValue:l(n).cost,"onUpdate:modelValue":j[13]||(j[13]=E=>l(n).cost=E),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:l(n).processing,error:!!l(n).errors.cost,errorMessage:l(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):k("",!0),t("table",Dp,[j[31]||(j[31]=t("thead",{class:"text-grey-6"},[t("tr",null,[t("th",{style:{width:"25%"}},"Harga"),t("th",{style:{width:"25%"}},"Markup (%)"),t("th"),t("th",{style:{width:"25%"}},"Harga Jual (Rp)")])],-1)),t("tbody",null,[t("tr",null,[j[28]||(j[28]=t("td",{class:"no-wrap"},"Harga Eceran",-1)),t("td",null,[e(Oa,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_1_markup,"onUpdate:modelValue":j[14]||(j[14]=E=>l(n).price_1_markup=E),lazyRules:"",readonly:l(n).price_1_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_1_markup,errorMessage:l(n).errors.price_1_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Kt,{modelValue:l(n).price_1_option,"onUpdate:modelValue":j[15]||(j[15]=E=>l(n).price_1_option=E),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Be,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_1,"onUpdate:modelValue":j[16]||(j[16]=E=>l(n).price_1=E),lazyRules:"",disable:l(n).processing,readonly:l(n).price_1_option=="markup",error:!!l(n).errors.price_1,errorMessage:l(n).errors.price_1,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])]),t("tr",null,[j[29]||(j[29]=t("td",{class:"no-wrap"},"Harga Partai",-1)),t("td",null,[e(Oa,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_2_markup,"onUpdate:modelValue":j[17]||(j[17]=E=>l(n).price_2_markup=E),lazyRules:"",readonly:l(n).price_2_option!="markup",disable:l(n).processing,error:!!l(n).errors.price_2_markup,errorMessage:l(n).errors.price_2_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","readonly","disable","error","errorMessage"])]),t("td",null,[e(Kt,{modelValue:l(n).price_2_option,"onUpdate:modelValue":j[18]||(j[18]=E=>l(n).price_2_option=E),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Be,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_2,"onUpdate:modelValue":j[19]||(j[19]=E=>l(n).price_2=E),lazyRules:"",readonly:l(n).price_2_option=="markup",disable:l(n).processing,error:!!l(n).errors.price_2,errorMessage:l(n).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","readonly","disable","error","errorMessage"])])]),t("tr",null,[j[30]||(j[30]=t("td",{class:"no-wrap"},"Harga Grosir",-1)),t("td",null,[e(Oa,{class:"col-3",filled:"",dense:"",modelValue:l(n).price_3_markup,"onUpdate:modelValue":j[20]||(j[20]=E=>l(n).price_3_markup=E),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option!="markup",error:!!l(n).errors.price_3_markup,errorMessage:l(n).errors.price_3_markup,"hide-bottom-space":"","max-decimals":2},null,8,["modelValue","disable","readonly","error","errorMessage"])]),t("td",null,[e(Kt,{modelValue:l(n).price_3_option,"onUpdate:modelValue":j[21]||(j[21]=E=>l(n).price_3_option=E),dense:"",spread:"",class:"col-3","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"%",value:"markup"},{label:"Rp",value:"price"}]},null,8,["modelValue"])]),t("td",null,[e(Be,{filled:"",class:"col-3",dense:"",modelValue:l(n).price_3,"onUpdate:modelValue":j[22]||(j[22]=E=>l(n).price_3=E),lazyRules:"",disable:l(n).processing,readonly:l(n).price_3_option=="markup",error:!!l(n).errors.price_3,errorMessage:l(n).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","readonly","error","errorMessage"])])])])]),e(Rt,{class:"q-mt-sm",modelValue:l(n).price_editable,"onUpdate:modelValue":j[23]||(j[23]=E=>l(n).price_editable=E),disable:l(n).processing,label:"Harga dapat diubah saat penjualan"},null,8,["modelValue","disable"]),e(re,{modelValue:l(n).notes,"onUpdate:modelValue":j[24]||(j[24]=E=>l(n).notes=E),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(n).processing,error:!!l(n).errors.notes,"error-message":l(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Up=Object.freeze(Object.defineProperty({__proto__:null,default:Ip},Symbol.toStringTag,{value:"Module"})),jp={class:"q-gutter-sm"},Ep={class:"col col-md-6 q-pa-xs"},Sl="Import Produk",Ap={__name:"Import",setup(c){const s=Je({csv_file:null}),m=()=>{s.post(route("admin.product.import"),{onSuccess:()=>{s.reset()},onError:()=>{Qe()},onFinish:()=>{s.clearErrors()}})};return(o,i)=>{const n=W("i-head"),f=W("authenticated-layout");return u(),h(H,null,[e(n,{title:Sl}),e(f,{"show-drawer-button":!0},{title:a(()=>[v(r(Sl))]),"left-button":a(()=>[t("div",jp,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>l(K).get(o.route("admin.product.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Ep,[e(Ge,{class:"row",onSubmit:Q(m,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[i[3]||(i[3]=t("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),i[4]||(i[4]=t("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(qo,{modelValue:l(s).csv_file,"onUpdate:modelValue":i[1]||(i[1]=b=>l(s).csv_file=b),accept:".csv",label:"Pilih file CSV",error:!!l(s).errors.csv_file,"error-message":l(s).errors.csv_file,disable:l(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:l(s).processing||!l(s).csv_file,loading:l(s).processing},null,8,["disable","loading"]),e(M,{icon:"cancel",label:"Batal",disable:l(s).processing,onClick:i[2]||(i[2]=b=>l(K).get(o.route("admin.product.index")))},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(u(),U(Wt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.success),1)]),_:1})):k("",!0),o.$page.props.flash.error?(u(),U(Wt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(r(o.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Mp=Object.freeze(Object.defineProperty({__proto__:null,default:Ap},Symbol.toStringTag,{value:"Module"})),Np={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Bp={class:"q-pa-xs"},Fp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zp={key:0},Lp={key:1},Hp={key:2},Kp={key:3},Yp={class:"flex justify-end"},Wp={key:0},Qp={key:1},Jp={key:0},Vl="Produk",Gp={__name:"Index",setup(c){const s=fe(),m=T(null),o=T(null),i=ot(o),n=T(!1),f=[...Fe(window.CONSTANTS.PRODUCT_TYPES)],b=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],p=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],d=he(),g=T(!1),_=T([]),y=T(!0),x=Ee({type:[],category_id:[],supplier_id:[],status:"all",stock_status:"all",search:"",...He()}),S=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let C=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price_1",label:"Harga Eceran",field:"price_1",align:"right"},{name:"action",align:"right"}];xe(()=>{const R=new URLSearchParams(window.location.search).get("page");R&&(S.value.page=parseInt(R)),z()});const j=D=>st({message:`Hapus Produk ${D.name}?`,url:route("admin.product.delete",D.id),fetchItemsCallback:z,loading:y}),z=(D=null)=>{Ke({pagination:S,filter:x,props:D,rows:_,url:route("admin.product.data"),loading:y,tableRef:m})},V=()=>{z()},{filteredCategories:E,filterCategories:I}=_a(s.props.categories),{filteredSuppliers:O,filterSupplierFn:B}=ya(s.props.suppliers),w=G(()=>{let D=[...C];return n.value||D.splice(2,1),d.screen.gt.sm?D:D.filter(R=>R.name==="name"||R.name==="action")}),$=D=>{K.get(route("admin.product.detail",D.row.id))};return(D,R)=>{const P=W("i-head"),A=W("authenticated-layout");return u(),h(H,null,[e(P,{title:Vl}),e(A,null,ze({title:a(()=>[v(r(Vl))]),"right-button":a(()=>[e(M,{icon:g.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=N=>g.value=!g.value)},null,8,["icon"]),D.$can("admin.product.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=N=>l(K).get(D.route("admin.product.add")))})):k("",!0),D.$can("admin.product.import")||D.$can("admin.product:view-cost")?(u(),U(M,{key:1,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[5]||(R[5]=Q(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[D.$can("admin.product.send-price-list")?ae((u(),U(le,{key:0,clickable:"",onClick:R[2]||(R[2]=Q(N=>l(K).get(D.route("admin.product.send-price-list")),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"send"})]),_:1}),e(F,null,{default:a(()=>R[14]||(R[14]=[v("Kirim Daftar Harga")])),_:1})]),_:1})),[[se],[me]]):k("",!0),D.$can("admin.product.import")?ae((u(),U(le,{key:1,clickable:"",onClick:R[3]||(R[3]=N=>n.value=!n.value)},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:n.value?"visibility":"visibility_off"},null,8,["name"])]),_:1}),e(F,null,{default:a(()=>[v(r(n.value?"Sembunyikan":"Tampilkan")+" Modal",1)]),_:1})]),_:1})),[[se],[me]]):k("",!0),D.$can("admin.product.import")?ae((u(),U(le,{key:2,clickable:"",onClick:R[4]||(R[4]=Q(N=>l(K).get(D.route("admin.product.import")),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"csv"})]),_:1}),e(F,null,{default:a(()=>R[15]||(R[15]=[v("Import")])),_:1})]),_:1})),[[se],[me]]):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[t("div",Bp,[e(Me,{ref_key:"tableRef",ref:m,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:S.value,"onUpdate:pagination":R[13]||(R[13]=N=>S.value=N),filter:x.search,loading:y.value,columns:w.value,rows:_.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(i)}),onRequest:z,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:N,message:oe,filter:ge})=>[t("div",Fp,[t("span",null,r(oe)+" "+r(ge?" with term "+ge:""),1)])]),header:a(N=>[e(Oe,{props:N},{default:a(()=>[e(ta,{"auto-width":""}),(u(!0),h(H,null,je(N.cols,oe=>(u(),U(ta,{key:oe.name,props:N},{default:a(()=>[v(r(oe.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(N=>[e(Oe,{props:N,class:qe([{inactive:!N.row.active},"cursor-pointer"]),onClick:oe=>$(N)},{default:a(()=>[e(Y,{"auto-width":""},{default:a(()=>[e(M,{size:"sm",flat:"",round:"",dense:"",onClick:Q(oe=>N.expand=!N.expand,["stop"]),icon:N.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(Y,{key:"name",props:N,class:"wrap-column"},{default:a(()=>[v(r(N.row.name)+" ",1),l(d).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[N.row.type=="stocked"?(u(),h("div",zp,[e(q,{name:"cycle"}),v(" Stok: "+r(l(L)(N.row.stock))+" "+r(N.row.uom),1)])):k("",!0),n.value?(u(),h("div",Lp,[e(q,{name:"money"}),v(" Modal: Rp. "+r(l(L)(N.row.cost)),1)])):k("",!0),t("div",null,[e(q,{name:"sell"}),v(" Eceran: Rp. "+r(l(L)(N.row.price_1)),1)]),N.row.price_2!=0?(u(),h("div",Hp,[e(q,{name:"sell"}),v(" Partai: Rp. "+r(l(L)(N.row.price_2)),1)])):k("",!0),N.row.price_3!=0?(u(),h("div",Kp,[e(q,{name:"sell"}),v(" Grosir: Rp. "+r(l(L)(N.row.price_3)),1)])):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"stock",props:N,class:qe(["wrap-column",{"low-stock":N.row.type=="stocked"&&(Number(N.row.stock)==0||Number(N.row.stock)<Number(N.row.min_stock)),"over-stock":N.row.type=="stocked"&&Number(N.row.max_stock)&&Number(N.row.stock)>Number(N.row.max_stock)}])},{default:a(()=>[v(r(N.row.type=="stocked"?l(L)(N.row.stock)+" "+N.row.uom:"-"),1)]),_:2},1032,["props","class"]),(u(),U(Y,{key:"cost",props:N,class:"wrap-column"},{default:a(()=>[v(r(l(L)(N.row.cost)),1)]),_:2},1032,["props"])),e(Y,{key:"price_1",props:N,class:"wrap-column"},{default:a(()=>[v(r(l(L)(N.row.price_1)),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:N},{default:a(()=>[t("div",Yp,[D.$can("admin.product.add")||D.$can("admin.product.edit")||D.$can("admin.product.delete")?(u(),U(M,{key:0,icon:"more_vert",rounded:"",dense:"",flat:"",onClick:R[12]||(R[12]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"175px"}},{default:a(()=>[D.$can("admin.product.add")?ae((u(),U(le,{key:0,clickable:"",onClick:Q(oe=>l(K).get(D.route("admin.product.duplicate",N.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"file_copy"})]),_:1}),e(F,null,{default:a(()=>R[16]||(R[16]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),D.$can("admin.product.edit")?ae((u(),U(le,{key:1,clickable:"",onClick:Q(oe=>l(K).get(D.route("admin.product.edit",N.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>R[17]||(R[17]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),D.$can("admin.product.delete")?ae((u(),U(le,{key:2,onClick:Q(oe=>j(N.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>R[18]||(R[18]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"]),ae(e(Oe,{props:N},{default:a(()=>[e(Y,{colspan:"100%"},{default:a(()=>[N.row.barcode?(u(),h("div",Wp,[e(q,{class:"inline-icon",name:"barcode"}),v(" Barcode: "+r(N.row.barcode),1)])):k("",!0),N.row.category_id?(u(),h("div",Qp,[e(q,{name:"category",class:"inline-icon"}),v(" Kategori: "+r(N.row.category.name),1)])):k("",!0),D.$can("admin.product:view-supplier")?(u(),h(H,{key:2},[N.row.supplier_id?(u(),h("div",Jp,[e(q,{name:"local_shipping",class:"inline-icon"}),v(" Supplier: "+r(N.row.supplier.name),1)])):k("",!0)],64)):k("",!0),N.row.description?(u(),U(Se,{key:3,text:N.row.description,icon:"notes","max-length":200},null,8,["text"])):k("",!0),N.row.notes?(u(),U(Se,{key:4,text:N.row.notes,icon:"notes","max-length":200},null,8,["text"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"]),[[mo,N.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[g.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:a(()=>[t("div",Np,[e(ce,{modelValue:x.type,"onUpdate:modelValue":[R[6]||(R[6]=N=>x.type=N),V],class:"custom-select col-xs-4 col-sm-2",options:f,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:"",multiple:"","use-chips":""},null,8,["modelValue"]),e(ce,{modelValue:x.stock_status,"onUpdate:modelValue":[R[7]||(R[7]=N=>x.stock_status=N),V],class:"custom-select col-xs-4 col-sm-2",options:p,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:x.status,"onUpdate:modelValue":[R[8]||(R[8]=N=>x.status=N),V],class:"custom-select col-xs-4 col-sm-2",options:b,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:x.category_id,"onUpdate:modelValue":[R[9]||(R[9]=N=>x.category_id=N),V],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(E),"map-options":"",dense:"","emit-value":"",onFilter:l(I),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"]),D.$can("admin.product:view-supplier")?(u(),U(ce,{key:0,modelValue:x.supplier_id,"onUpdate:modelValue":[R[10]||(R[10]=N=>x.supplier_id=N),V],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(O),"map-options":"",dense:"","emit-value":"",onFilter:l(B),style:{"min-width":"150px"},multiple:"","use-chips":""},null,8,["modelValue","options","onFilter"])):k("",!0),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":R[11]||(R[11]=N=>x.search=N),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Xp=Object.freeze(Object.defineProperty({__proto__:null,default:Gp},Symbol.toStringTag,{value:"Module"})),Zp={class:"q-gutter-sm"},ef={class:"col col-md-8 q-pa-xs"},tf={class:"col-12 col-md-6"},af={class:"col-12 col-md-6"},lf={class:"text-subtitle1 q-mb-sm flex items-center justify-between"},of={class:"q-gutter-sm"},ql="Kirim Daftar Harga",nf={__name:"SendPriceList",setup(c){const s=fe(),m=T(""),o=T(null),i=G(()=>{var B;const O=new Map;return(B=s.props.products)==null||B.forEach(w=>{O.set(w.id,w)}),O}),n=G(()=>{var B;const O=new Map;return(B=s.props.customers)==null||B.filter(w=>w.phone&&w.phone.trim()!=="").forEach(w=>{O.set(w.id,w)}),O}),f=G(()=>{var O;return((O=s.props.customers)==null?void 0:O.map(B=>({value:B.id,label:B.name})))||[]}),b=G(()=>{var O;return((O=s.props.products)==null?void 0:O.map(B=>({value:B.id,label:`${B.name}`})))||[]}),p=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],d=T(b.value),g=T(f.value),_=Je({price_types:[],products:[],customers:[]});_.transform(O=>({customers:O.customers.map(B=>B.value),message:m.value}));const y=O=>O?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(O):"Rp. 0",x=O=>{const B=p.find(w=>w.value===O);return B?B.label:O},S=()=>{if(o.value){const O=o.value.$el.querySelector("textarea");if(O){O.select();try{document.execCommand("copy"),console.log("Teks berhasil disalin!")}catch(B){console.error("Gagal menyalin teks ke clipboard:",B)}}}},C=G(()=>{var B,w;if(((B=_.products)==null?void 0:B.length)===0||((w=_.price_types)==null?void 0:w.length)===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let O=`*DAFTAR HARGA TERBARU*
`;return O+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,O+=`------------------------------

`,(_.products||[]).forEach($=>{const D=i.value.get($.value);D&&(O+=`*${D.name}*
`,(_.price_types||[]).forEach(R=>{const P=x(R),A=D[R],N=D.uom||"pcs";A!=null&&A>0&&(O+=`- ${P}: *${y(A)}* / ${N}
`)}),O+=`
`)}),O+=`------------------------------
`,O+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",O});tt(C,O=>{m.value=O},{immediate:!0});const j=G(()=>(_.customers||[]).map(O=>n.value.get(O.value)).filter(O=>O&&O.phone)),z=O=>{const B=m.value;let w=O.startsWith("0")?"62"+O.substring(1):O;w=w.replace(/[^0-9]/g,"");const $=encodeURIComponent(B);return`https://wa.me/${w}?text=${$}`},V=(O,B)=>{if(O===""){B(()=>{d.value=b.value});return}B(()=>{const w=O.toLowerCase();d.value=b.value.filter($=>$.label.toLowerCase().indexOf(w)>-1)})},E=(O,B)=>{if(O===""){B(()=>{g.value=f.value});return}B(()=>{const w=O.toLowerCase();g.value=f.value.filter($=>$.label.toLowerCase().indexOf(w)>-1)})},I=()=>{var O,B,w;if(((O=_.price_types)==null?void 0:O.length)===0||((B=_.products)==null?void 0:B.length)===0||((w=_.customers)==null?void 0:w.length)===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}_.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{Qe()},onFinish:()=>{_.clearErrors()}})};return(O,B)=>{const w=W("i-head"),$=W("authenticated-layout");return u(),h(H,null,[e(w,{title:ql}),e($,{"show-drawer-button":!0},{title:a(()=>[v(r(ql))]),"left-button":a(()=>[t("div",Zp,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:B[0]||(B[0]=D=>l(K).get(O.route("admin.product.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",ef,[e(Ge,{class:"row q-col-gutter-xs",onSubmit:Q(I,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[t("div",tf,[e(de,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[B[10]||(B[10]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),B[11]||(B[11]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:l(_).products,"onUpdate:modelValue":B[1]||(B[1]=D=>l(_).products=D),options:d.value,label:"Pilih Produk",hint:"Ketik nama produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.products,"error-message":l(_).errors.products,loading:l(_).processing,"use-input":"",onFilter:V,onClear:B[2]||(B[2]=D=>l(_).products=[]),"input-debounce":"0"},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(F,{class:"text-grey"},{default:a(()=>B[8]||(B[8]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:l(_).price_types,"onUpdate:modelValue":B[3]||(B[3]=D=>l(_).price_types=D),options:p,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.price_types,"error-message":l(_).errors.price_types,loading:l(_).processing,multiple:"","use-chips":"",clearable:"",onClear:B[4]||(B[4]=D=>l(_).price_types=[])},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:l(_).customers,"onUpdate:modelValue":B[5]||(B[5]=D=>l(_).customers=D),options:g.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(_).errors.customers,"error-message":l(_).errors.customers,loading:l(_).processing,"use-input":"",onFilter:E,onClear:B[6]||(B[6]=D=>l(_).customers=[]),"input-debounce":"0"},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(F,{class:"text-grey"},{default:a(()=>B[9]||(B[9]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>{var D,R,P;return[e(M,{icon:"send",type:"submit",label:"Kirim via WA Gateway",color:"primary",disable:l(_).processing||((D=l(_).products)==null?void 0:D.length)===0||((R=l(_).customers)==null?void 0:R.length)===0||((P=l(_).price_types)==null?void 0:P.length)===0,loading:l(_).processing},null,8,["disable","loading"])]}),_:1})]),_:1})]),t("div",af,[e(de,{square:"",flat:"",bordered:"",class:"col full-width"},{default:a(()=>[e(ee,null,{default:a(()=>[t("div",lf,[B[12]||(B[12]=v(" Pratinjau Pesan (Teks Biasa) ")),e(M,{label:"Salin & Pilih Semua",icon:"content_copy",color:"grey-7",size:"sm",flat:"",dense:"",onClick:S,disable:m.value.length===0},null,8,["disable"])]),e(re,{modelValue:m.value,"onUpdate:modelValue":B[7]||(B[7]=D=>m.value=D),ref_key:"messageInputRef",ref:o,type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"])]),_:1}),j.value.length>0?(u(),U(ee,{key:0,class:"q-pt-none"},{default:a(()=>[B[14]||(B[14]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",of,[(u(!0),h(H,null,je(j.value,D=>(u(),U(M,{key:D.id,label:`Kirim ke ${D.name}`,href:z(D.phone),target:"_blank",icon:"lab la-whatsapp",color:"green-8",class:"full-width",disable:!(l(_).products.length>0&&l(_).price_types.length>0)},{default:a(()=>[D.phone?k("",!0):(u(),U(Ot,{key:0},{default:a(()=>B[13]||(B[13]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href","disable"]))),128))]),B[15]||(B[15]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},sf=Object.freeze(Object.defineProperty({__proto__:null,default:nf},Symbol.toStringTag,{value:"Module"})),rf={class:"q-gutter-sm"},df={class:"q-pa-xs"},uf={class:"col-12"},mf={class:"col-12"},cf={class:"q-gutter-xs"},Cl="Kirim Daftar Harga",pf={__name:"SendPriceList2",setup(c){const s=fe(),m=T(""),o=G(()=>{var O;const I=new Map;return(O=s.props.products)==null||O.forEach(B=>{I.set(B.id,B)}),I}),i=G(()=>{var O;const I=new Map;return(O=s.props.customers)==null||O.forEach(B=>{I.set(B.id,B)}),I}),n=G(()=>{var I;return((I=s.props.customers)==null?void 0:I.map(O=>({value:O.id,label:O.name})))||[]}),f=G(()=>{var I;return((I=s.props.products)==null?void 0:I.map(O=>({value:O.id,label:`${O.name} (${O.sku||O.code||"ID: "+O.id})`})))||[]}),b=[{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],p=T(f.value),d=T(n.value),g=Je({price_types:[],products:[],customers:[]});g.transform(I=>({...I,products:I.products.map(O=>O.value),customers:I.customers.map(O=>O.value)}));const _=I=>I?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(I):"Rp. 0",y=I=>{const O=b.find(B=>B.value===I);return O?O.label:I},x=G(()=>{if(g.products.length===0||g.price_types.length===0)return"Silakan pilih Produk dan Jenis Harga untuk membuat daftar harga.";let I=`Daftar Harga Terbaru
`;return I+=`Tanggal: ${new Date().toLocaleDateString("id-ID")}
`,I+=`------------------------------

`,g.products.forEach(O=>{const B=o.value.get(O.value);B&&(I+=`*${B.name}*
`,g.price_types.forEach(w=>{const $=y(w),D=B[w],R=B.unit||"pcs";D!=null&&D!=0&&(I+=`- ${$}: ${_(D)} / ${R}
`)}),I+=`
`)}),I+=`------------------------------
`,I+="Terima kasih atas perhatiannya. Harga dapat berubah sewaktu-waktu tanpa pemberitahuan.",I});tt(x,I=>{m.value=I},{immediate:!0});const S=G(()=>g.customers.map(I=>i.value.get(I.value)).filter(I=>I&&I.phone_number)),C=I=>{const O=m.value;let B=I.startsWith("0")?"62"+I.substring(1):I;B=B.replace(/[^0-9]/g,"");const w=encodeURIComponent(O);return`https://wa.me/${B}?text=${w}`},j=(I,O)=>{if(I===""){O(()=>{p.value=f.value});return}O(()=>{const B=I.toLowerCase();p.value=f.value.filter(w=>w.label.toLowerCase().indexOf(B)>-1)})},z=(I,O)=>{if(I===""){O(()=>{d.value=n.value});return}O(()=>{const B=I.toLowerCase();d.value=n.value.filter(w=>w.label.toLowerCase().indexOf(B)>-1)})},V=()=>{console.log("Scrolling to first error field...")},E=()=>{if(g.price_types.length===0||g.products.length===0||g.customers.length===0){console.error("Harap lengkapi Produk, Pelanggan, dan Jenis Harga.");return}g.post(route("admin.product.send-price-list"),{onSuccess:()=>{},onError:()=>{V()},onFinish:()=>{g.clearErrors()}})};return(I,O)=>{const B=W("i-head"),w=W("authenticated-layout");return u(),h(H,null,[e(B,{title:Cl}),e(w,{"show-drawer-button":!0},{title:a(()=>[v(r(Cl))]),"left-button":a(()=>[t("div",rf,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:O[0]||(O[0]=$=>I.router.get(I.route("admin.product.index")))})])]),default:a(()=>[t("div",df,[e(Ge,{class:"row q-col-gutter-md",onSubmit:Q(E,["prevent"]),onValidationError:V},{default:a(()=>[t("div",uf,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[O[8]||(O[8]=t("div",{class:"text-subtitle1 q-pt-md q-pb-sm"}," Pilih Data Kiriman ",-1)),O[9]||(O[9]=t("div",{class:"text-caption text-grey-7 q-pb-lg"}," Pilih produk, jenis harga, dan pelanggan tujuan. ",-1)),e(ce,{modelValue:l(g).products,"onUpdate:modelValue":O[1]||(O[1]=$=>l(g).products=$),options:p.value,label:"Pilih Produk",hint:"Ketik nama atau SKU produk untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.products,"error-message":l(g).errors.products,loading:l(g).processing,"use-input":"",onFilter:j,"input-debounce":"0"},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(F,{class:"text-grey"},{default:a(()=>O[6]||(O[6]=[v(" Tidak ada produk ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"]),e(ce,{modelValue:l(g).price_types,"onUpdate:modelValue":O[2]||(O[2]=$=>l(g).price_types=$),options:b,label:"Pilih Jenis Harga",hint:"Pilih satu atau lebih jenis harga","emit-value":"","map-options":"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.price_types,"error-message":l(g).errors.price_types,loading:l(g).processing,multiple:"","use-chips":"",clearable:""},null,8,["modelValue","error","error-message","loading"]),e(ce,{modelValue:l(g).customers,"onUpdate:modelValue":O[3]||(O[3]=$=>l(g).customers=$),options:d.value,label:"Pilih Pelanggan Tujuan",hint:"Ketik nama pelanggan untuk mencari",multiple:"","use-chips":"",clearable:"",outlined:"",dense:"",class:"q-mb-md",error:!!l(g).errors.customers,"error-message":l(g).errors.customers,loading:l(g).processing,"use-input":"",onFilter:z,"input-debounce":"0"},{"no-option":a(()=>[e(le,null,{default:a(()=>[e(F,{class:"text-grey"},{default:a(()=>O[7]||(O[7]=[v(" Tidak ada pelanggan ditemukan ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","error-message","loading"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"send",type:"submit",label:"Kirim ke Backend",color:"primary",disable:l(g).processing||l(g).products.length===0||l(g).customers.length===0||l(g).price_types.length===0,loading:l(g).processing},null,8,["disable","loading"]),e(M,{icon:"cancel",label:"Batal",disable:l(g).processing,onClick:O[4]||(O[4]=$=>I.router.get(I.route("admin.product.index")))},null,8,["disable"])]),_:1}),I.$page.props.flash.success?(u(),U(Wt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[v(r(I.$page.props.flash.success),1)]),_:1})):k("",!0),I.$page.props.flash.error?(u(),U(Wt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[v(r(I.$page.props.flash.error),1)]),_:1})):k("",!0)]),_:1})]),t("div",mf,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,null,{default:a(()=>[O[10]||(O[10]=t("div",{class:"text-subtitle1 q-mb-sm"}," Pratinjau Pesan (Teks Biasa) ",-1)),e(re,{modelValue:m.value,"onUpdate:modelValue":O[5]||(O[5]=$=>m.value=$),type:"textarea",label:"Pesan Daftar Harga",autogrow:"",outlined:"",dense:"",rows:10},null,8,["modelValue"]),O[11]||(O[11]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Anda dapat mengedit teks di atas sebelum dikirim melalui WhatsApp. ",-1))]),_:1}),S.value.length>0?(u(),U(ee,{key:0},{default:a(()=>[O[13]||(O[13]=t("div",{class:"text-subtitle2 q-mb-sm"}," Kirim ke Pelanggan (via WA) ",-1)),t("div",cf,[(u(!0),h(H,null,je(S.value,$=>(u(),U(M,{key:$.id,label:`Kirim ke ${$.label}`,href:C($.phone_number),target:"_blank",icon:"lab la-whatsapp",color:"green-8",dense:""},{default:a(()=>[$.phone_number?k("",!0):(u(),U(Ot,{key:0},{default:a(()=>O[12]||(O[12]=[v(" Nomor telepon tidak tersedia ")])),_:1}))]),_:2},1032,["label","href"]))),128))]),O[14]||(O[14]=t("div",{class:"text-caption text-grey-7 q-mt-sm"}," Link WhatsApp akan terbuka di tab baru. ",-1))]),_:1})):k("",!0)]),_:1})])]),_:1})])]),_:1})],64)}}},ff=Object.freeze(Object.defineProperty({__proto__:null,default:pf},Symbol.toStringTag,{value:"Module"})),gf={class:"q-gutter-sm"},bf={class:"col col-md-6 q-pa-xs"},Tl="Tambah Retur Pembelian",vf={__name:"Create",setup(c){const s=fe(),m=Je({code:s.props.data.code}),o=()=>rt({form:m,url:route("admin.purchase-order-return.add")});return(i,n)=>{const f=W("i-head"),b=W("authenticated-layout");return u(),h(H,null,[e(f,{title:Tl}),e(b,null,{title:a(()=>[v(r(Tl))]),"left-button":a(()=>[t("div",gf,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.finance-account.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",bf,[e(Ge,{class:"row",onSubmit:Q(o,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[e(re,{autofocus:"",modelValue:l(m).code,"onUpdate:modelValue":n[1]||(n[1]=p=>l(m).code=p),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(m).errors.code,disable:l(m).processing,"error-message":l(m).errors.code,rules:[p=>p&&p.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(m).processing},null,8,["disable"]),e(M,{icon:"cancel",label:"Batal",disable:l(m).processing,onClick:n[2]||(n[2]=p=>l(K).get(i.route("admin.purchase-order-return.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},_f=Object.freeze(Object.defineProperty({__proto__:null,default:vf},Symbol.toStringTag,{value:"Module"})),yf={class:"column"},kf={class:"bg-grey-2 q-pa-xs"},wf={class:"text-subtitle1 text-bold text-grey-10"},hf={class:"text-caption text-grey-8"},$f={class:"col-12 col-sm-6"},xf={class:"full-width"},Sf={key:1},Vf={key:0},qf={key:1},Cf={class:"col-12 col-sm-6",align:"left"},Tf={class:"full-width"},Pf={class:"full-width",style:{"border-collapse":"collapse"}},Rf={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Of={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Df={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},If={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Uf={key:0},jf={class:"col-12 col-sm-6"},Ef={class:"text-body2 text-grey-7 text-italic"},Af={class:"col-12 col-sm-6"},Mf={class:"row justify-end q-gutter-y-xs"},Nf={class:"col-12 row justify-between"},Bf={class:"text-subtitle2 text-bold"},Ff={class:"row justify-end q-gutter-y-xs"},zf={class:"col-12 row justify-between"},Lf={class:"text-subtitle2 text-bold"},jo={__name:"MainInfoTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=W("i-link"),n=W("my-link");return u(),h("div",yf,[e(ee,{class:"q-pa-none"},{default:a(()=>[t("div",kf,[t("div",wf," RETUR #"+r(s.data.code),1),t("div",hf,r(l(ve)(s.data.datetime)),1)])]),_:1}),e(Re),e(ee,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",$f,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pemasok",-1)),t("table",xf,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(u(),U(i,{key:0,href:m.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>{var f;return[e(q,{class:"inline-icon",name:"person"}),v(" "+r(s.data.supplier_name)+" ("+r((f=s.data.supplier)==null?void 0:f.code)+") ",1)]}),_:1},8,["href"])):(u(),h("div",Sf,[e(q,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(u(),h("tr",Vf,[t("td",null,[e(q,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.supplier_phone),1)])])):k("",!0),s.data.supplier_address?(u(),h("tr",qf,[t("td",null,[e(q,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.supplier_address),1)])])):k("",!0)])])]),t("div",Cf,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Tf,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:m.route("admin.purchase-order.detail",{id:s.data.purchase_order_id})},{default:a(()=>[v(r(s.data.purchase_order_id?s.data.purchase_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Re),e(ee,{class:"q-pa-sm"},{default:a(()=>[t("table",Pf,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(u(!0),h(H,null,je(s.data.details,f=>(u(),h("tr",{key:f.id},[t("td",Rf,[e(i,{href:m.route("admin.product.detail",f.product_id)},{default:a(()=>[v(r(f.product_name),1)]),_:2},1032,["href"])]),t("td",Of,r(l(L)(f.cost)),1),t("td",Df,r(f.quantity),1),t("td",If,r(l(L)(f.subtotal_cost)),1)]))),128)),s.data.details.length==0?(u(),h("tr",Uf,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Re),e(ee,{class:"row",align:"left"},{default:a(()=>[t("div",jf,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Ef,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Af,[t("div",Mf,[t("div",Nf,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Bf,r(l(L)(s.data.grand_total)),1)])]),t("div",Ff,[t("div",zf,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",Lf,r(l(L)(s.data.total_refunded)),1)])])])]),_:1})])}}},Hf=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),Kf={key:0,class:"text-center q-mb-md text-grey-8"},Yf={class:"text-subtitle2 text-weight-medium"},Wf={class:"text-h5 text-center text-primary q-pb-md"},Qf={class:"text-center q-mt-md"},Jf={key:0,class:"text-h6 text-negative text-weight-bold"},Gf={key:1,class:"text-h6 text-positive text-weight-bold"},Eo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=fe(),n=T(!1),f=T({method:"transfer",amount:m.total,notes:null}),b=i.props.data.supplier,p=G(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(S=>({label:S.name,value:S.id}))]),d=G(()=>m.remaining_refund),g=G(()=>{const S=f.value.amount||0;return S<=0?"Jumlah pembayaran harus lebih dari 0.":S>m.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=G(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const S={id:f.value.method,amount:f.value.amount,notes:f.value.notes};o("accepted",S),n.value=!1},x=()=>{f.value.amount=m.total,f.value.method="cash",f.value.notes=null};return(S,C)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":C[4]||(C[4]=j=>S.$emit("update:modelValue",j)),onBeforeShow:x},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,null,{default:a(()=>C[5]||(C[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(ee,{class:"q-pt-none"},{default:a(()=>[l(b)?(u(),h("div",Kf,[t("div",Yf,[v(r(l(b).code)+" ",1),C[6]||(C[6]=t("br",null,null,-1)),v(" "+r(l(b).name)+" ",1),C[7]||(C[7]=t("br",null,null,-1))])])):k("",!0),t("div",Wf," Total: Rp. "+r(l(L)(c.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":C[0]||(C[0]=j=>f.value.method=j),options:p.value,label:"Kas Tujuan",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Be,{modelValue:f.value.amount,"onUpdate:modelValue":C[1]||(C[1]=j=>f.value.amount=j),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:f.value.notes,"onUpdate:modelValue":C[2]||(C[2]=j=>f.value.notes=j),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Qf,[d.value>0?(u(),h("div",Jf," Sisa Refund: Rp. "+r(l(L)(d.value)),1)):(u(),h("div",Gf," Refund Lunas "))])]),_:1}),e(lt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(M,{flat:"",label:"Batal",color:"grey",onClick:C[3]||(C[3]=j=>S.$emit("update:modelValue",!1))}),e(M,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Xf=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"})),Zf={class:"column"},eg={class:"row"},tg={class:"full-width",style:{"border-collapse":"collapse"}},ag={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},lg={class:"row items-center q-gutter-x-sm"},og={class:"text-weight-bold"},ng={class:"row items-center q-gutter-x-sm q-mt-xs"},sg={class:"text-caption text-grey-6"},rg={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},ig={class:"q-mt-xs"},dg={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ug={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},mg={key:0},cg={class:"text-right q-pa-sm"},Ao={__name:"RefundTab",props:{data:Object},setup(c){const s=c,m=he(),o=T(!1),i=()=>{o.value=!0},n=G(()=>s.data.remaining_refund),f=async p=>{const d={order_id:s.data.id,...p};m.loading.show({message:"Memproses pembayaran..."});try{const g=await Ue.post(route("admin.purchase-order-return.add-refund"),d);m.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,K.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(g){let _="Gagal memproses refund.";g.response&&g.response.data&&g.response.data.message?_=g.response.data.message:g.message&&(_=g.message),m.notify({message:_,color:"negative",icon:"error"})}finally{m.loading.hide()}},b=p=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Ue.post(route("admin.purchase-order-return.delete-refund",{id:p.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),K.visit(route("admin.purchase-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(d){let g="Gagal menghapus refund pembayaran.";d.response&&d.response.data&&d.response.data.message?g=d.response.data.message:d.message&&(g=d.message),m.notify({message:g,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(p,d)=>{const g=W("my-link");return u(),h(H,null,[t("div",Zf,[e(Re),e(ee,{class:"q-pa-sm"},{default:a(()=>[t("div",eg,[p.$can("admin.purchase-order-return.add-refund")?(u(),U(M,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:d[0]||(d[0]=Q(_=>i(),["stop"]))})):k("",!0)]),t("table",tg,[d[5]||(d[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(u(!0),h(H,null,je(s.data.payments,_=>(u(),h("tr",{key:_.id},[t("td",ag,[t("div",lg,[e(q,{name:"tag",size:"xs",color:"grey-7"}),t("span",og,r(_.code),1)]),t("div",ng,[e(q,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",sg,r(l(ve)(_.created_at)),1)]),(_.type==="transfer"||_.type==="cash")&&_.account?(u(),h("div",rg,[e(q,{name:"wallet",size:"xs",color:"grey-7"}),e(g,{href:p.route("admin.finance-account.detail",_.account.id),target:"_blank"},{default:a(()=>[v(r(_.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",ig,[e(it,{label:p.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[_.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",dg,r(l(L)(_.amount)),1),t("td",ug,[p.$can("admin.purchase-order-return.delete-refund")?(u(),U(M,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:y=>b(_)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(u(),h("tr",mg,d[2]||(d[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[d[3]||(d[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund (Rp.)",-1)),t("th",cg,r(l(L)(s.data.total_refunded)),1),d[4]||(d[4]=t("th",null,null,-1))])])])]),_:1})]),e(Eo,{modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=_=>o.value=_),total:n.value,supplier:s.data.supplier,onAccepted:f},null,8,["modelValue","total","supplier"])],64)}}},pg=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),fg={class:"q-gutter-sm"},gg={class:"col col-lg-6 q-pa-xs",align:"center"},Pl="Retur Pembelian",bg={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=fe(),o=m.props.data,i=T(s.get("preview")||!1),f=T(s.get("tab")||"main-info");xe(()=>{bt(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.purchase-order-return.print",{id:m.props.data.id,size:p}),"_self")};return(p,d)=>{const g=W("i-head"),_=W("authenticated-layout");return u(),h(H,null,[e(g,{title:Pl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Pl))])]),"left-button":a(()=>[t("div",fg,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=y=>l(K).get(p.route("admin.purchase-order-return.index")))})])]),"right-button":a(()=>[e(M,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:d[1]||(d[1]=y=>b("58mm"))}),e(M,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:d[2]||(d[2]=y=>b("a4"))}),i.value?k("",!0):(u(),U(M,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:d[3]||(d[3]=y=>l(K).get(p.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",gg,[e(de,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(Tt,{modelValue:f.value,"onUpdate:modelValue":d[4]||(d[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(u(),U(dt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Re),e(Pt,{modelValue:f.value,"onUpdate:modelValue":d[5]||(d[5]=y=>f.value=y),animated:""},{default:a(()=>[e(ut,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(jo,{data:l(o)},null,8,["data"])]),_:1}),e(ut,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(Ao,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},vg=Object.freeze(Object.defineProperty({__proto__:null,default:bg},Symbol.toStringTag,{value:"Module"})),_g={class:"text-weight-medium wrap-column"},yg={class:"text-caption text-grey-6 elipsis"},kg={class:"column items-end"},wg={class:"text-caption text-grey-6 text-italic"},Mo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=he(),m=ot(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(u(),U(Me,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ye({height:l(m)})},{header:a(f=>[e(Oe,{props:f,class:"bg-grey-4"},{default:a(()=>[(u(!0),h(H,null,je(f.cols,b=>(u(),U(ta,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Oe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:f,class:"text-left"},{default:a(()=>[t("div",_g,r(f.row.product_name),1),t("div",yg,r(f.row.product_barcode),1),f.row.notes?(u(),U(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal",props:f,class:"text-right"},{default:a(()=>[t("div",kg,[t("div",null,r(l(L)(f.row.subtotal_cost)),1),t("div",wg,r(l(L)(f.row.quantity))+" x Rp. "+r(l(L)(f.row.cost)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(M,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(M,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},hg=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),$g={class:"row items-center no-wrap"},xg={class:"col-auto"},No={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=G(()=>o.item.quantity*o.item.cost),b=_=>{_.stopPropagation(),_.preventDefault()},p=_=>{o.modelValue&&(_.key==="Enter"?(n(),b(_)):_.key==="Escape"&&(i("update:modelValue",!1),b(_)))};xe(()=>{window.addEventListener("keydown",p)}),$t(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item});const g=()=>{};return(_,y)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":y[6]||(y[6]=x=>_.$emit("update:modelValue",x)),onBeforeShow:g},{default:a(()=>[e(de,null,{default:a(()=>[e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",$g,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",xg,[e(M,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=x=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[e(re,{modelValue:c.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=x=>c.item.product_name=x),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Be,{modelValue:c.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=x=>c.item.quantity=x),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Be,{modelValue:c.item.cost,"onUpdate:modelValue":y[3]||(y[3]=x=>c.item.cost=x),label:"Modal / Harga Beli (Rp)","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Be,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=x=>f.value=x),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(re,{modelValue:c.item.notes,"onUpdate:modelValue":y[5]||(y[5]=x=>c.item.notes=x),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(lt,{align:"right"},{default:a(()=>[ae(e(M,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),e(M,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Sg=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"}));function Vg(){const c=T(new Date);let s=null;const m=()=>{c.value=new Date};return xe(()=>{s=setInterval(m,1e3)}),$t(()=>{s&&clearInterval(s)}),{currentDateTime:c}}const qg={class:"text-grey-8"},ka={__name:"DigitalClock",setup(c){const{currentDateTime:s}=Vg();return(m,o)=>(u(),h("div",qg,r(l(ve)(l(s))),1))}},Cg={key:0,class:"q-select__selected-item"},Bo={__name:"SupplierAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pemasok"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","supplierSelected"],setup(c,{expose:s,emit:m}){const o=T(null),i=c,n=m,f=T([]);let b=null;const p=T(i.modelValue);xe(()=>{i.initialData&&(p.value=i.initialData)}),tt(p,_=>{n("update:modelValue",_),n("supplierSelected",_)}),tt(()=>i.modelValue,_=>{p.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const g=(_,y)=>{if(_.length<i.minLength){y(()=>{f.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Ue.get(`/web-api/suppliers?q=${_}`).then(x=>{y(()=>{f.value=x.data.data})}).catch(x=>{console.error("Gagal mengambil data pemasok:",x),y(()=>{f.value=[]})})},100)};return(_,y)=>(u(),U(ce,{class:qe(c.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=x=>p.value=x),"use-input":"","input-debounce":"500",label:c.label,options:f.value,onFilter:g,clearable:"",error:c.error,behavior:"menu","error-message":c.errorMessage,disable:c.disable,"hide-bottom-space":"",outlined:c.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a(x=>[e(le,Ba(co(x.itemProps)),{default:a(()=>[e(F,null,{default:a(()=>[e(be,null,{default:a(()=>[v(r(x.opt.name)+" ("+r(x.opt.code)+")",1)]),_:2},1024),x.opt.phone_1?(u(),U(be,{key:0,class:"text-grey-8 q-ml-sm q-mt-xs"},{default:a(()=>[e(q,{name:"phone",class:"inline-icon"}),v(r(x.opt.phone_1),1)]),_:2},1024)):k("",!0),x.opt.address?(u(),U(be,{key:1,class:"text-grey-8 q-ml-sm"},{default:a(()=>[e(q,{name:"home_pin",class:"inline-icon"}),v(r(x.opt.address),1)]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1040)]),"selected-item":a(x=>[x.opt?(u(),h("div",Cg,r(x.opt.name)+" ("+r(x.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Tg={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ee,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(lt,{align:"center"},{default:a(()=>[ae(e(M,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Fo=kt(Tg,[["__scopeId","data-v-abc5074e"]]),Pg=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"}));function wa(c){const s=T(!1),m=()=>{const n=c.value||document.documentElement;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},i=()=>{s.value?o():m()};return vs(()=>{const n=()=>{s.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("mozfullscreenchange",n),document.removeEventListener("MSFullscreenChange",n)}}),{isFullscreen:s,requestFullscreen:m,exitFullscreen:o,toggleFullscreen:i}}const Rg={class:"row items-center no-wrap"},Og={class:"col text-subtite text-bold text-grey-8"},Dg={class:"col-auto"},zo={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=d=>{d.stopPropagation(),d.preventDefault()},b=d=>{o.modelValue&&(d.key==="Enter"?(n(),f(d)):d.key==="Escape"&&(i("update:modelValue",!1),f(d)))};return xe(()=>{window.addEventListener("keydown",b)}),$t(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(d,g)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>d.$emit("update:modelValue",_))},{default:a(()=>[e(de,null,{default:a(()=>[e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",Rg,[t("div",Og," Edit "+r(c.data.code),1),t("div",Dg,[e(M,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>d.$emit("update:modelValue",!1))})])])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[e(Ze,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(re,{modelValue:d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(re,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(lt,{align:"right"},{default:a(()=>[ae(e(M,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),ae(e(M,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ig=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"})),Ug={class:"row items-center no-wrap"},jg={class:"col-auto"},Eg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ag={key:0},ha={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0},showCost:{type:Boolean,require:!1,default:!1},priceType:{type:String,require:!1,default:"price_1"}},emits:["update:modelValue","product-selected"],setup(c,{emit:s}){const m=he(),o=c,i=T(!1),n=T(o.showCost),f=s,b=T(null),p=T([]),d=T(!0),g=T(-1),_=Ee({search:"",status:"active",...He()}),y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});[...Fe(window.CONSTANTS.PRODUCT_PRICE_TYPES)];const x=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal (Rp)",field:"cost",align:"right"},{name:"price_1",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_1.replace("Harga ","H "),field:"price_1",align:"right"},{name:"price_2",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_2.replace("Harga ","H "),field:"price_2",align:"right"},{name:"price_3",label:window.CONSTANTS.PRODUCT_PRICE_TYPES.price_3.replace("Harga ","H "),field:"price_3",align:"right"}],S=G(()=>{if(i.value)return x;const O=x.filter(B=>B.name!=="cost");return m.screen.gt.sm?O:O.filter(B=>B.name==="name"||B.name==="stock")});xe(()=>{j()});const C=()=>{if(b.value&&g.value!==-1){const O=(y.value.page-1)*y.value.rowsPerPage,B=g.value-O;bt(()=>{if(B>=0&&B<p.value.length&&b.value.scrollTo){const w=b.value.$el.querySelector(".selected-row");w&&w.scrollIntoView({behavior:"smooth",block:"nearest"})}})}},j=()=>{o.modelValue!==!1&&z()},z=(O=null)=>{d.value=!0;const B=g.value;Ke({pagination:y,filter:_,props:O,rows:p,url:route("admin.product.data"),loading:d,tableRef:b,onSuccess:()=>{p.value.length>0?((B===0||B===-1)&&(g.value=0),bt(()=>{C()})):g.value=-1}})},V=()=>{j()},E=O=>{f("product-selected",O),setTimeout(()=>{f("update:modelValue",!1)},100)},I=O=>{if(!o.modelValue){alert("none");return}const B=p.value.length;if(B===0)return;const w=(y.value.page-1)*y.value.rowsPerPage,$=w+B-1;if(O.key==="ArrowDown")O.preventDefault(),g.value<$?(g.value=g.value+1,C()):g.value===$&&I({key:"ArrowRight",preventDefault:()=>{}});else if(O.key==="ArrowUp")O.preventDefault(),g.value>w?(g.value=g.value-1,C()):g.value===w&&w>0&&I({key:"ArrowLeft",preventDefault:()=>{}});else if(O.key==="Enter"&&g.value!==-1){O.preventDefault(),O.preventDefault();const D=(y.value.page-1)*y.value.rowsPerPage,R=g.value-D;R>=0&&R<B?E(p.value[R]):console.warn("Kesalahan: selectedIndex global di luar batas halaman saat ini.")}else if(g.value!==-1){if(O.key==="ArrowRight"){O.preventDefault();const D=y.value.page+1;D<=Math.ceil(y.value.rowsNumber/y.value.rowsPerPage)&&(y.value.page=D,g.value=(D-1)*y.value.rowsPerPage,b.value.requestServerInteraction())}else if(O.key==="ArrowLeft"){O.preventDefault();const D=y.value.page-1;D>=1&&(y.value.page=D,g.value=(D-1)*y.value.rowsPerPage,b.value.requestServerInteraction())}}};return tt(()=>o.modelValue,(O,B)=>{B===!0&&O===!1&&(_.search=""),O===!0&&z()}),(O,B)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":B[4]||(B[4]=w=>O.$emit("update:modelValue",w)),maximized:l(m).screen.lt.sm},{default:a(()=>[e(de,{class:"column fit",tabindex:"0",onKeydown:I,ref:"cardRef"},{default:a(()=>[e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",Ug,[B[5]||(B[5]=t("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),t("div",jg,[e(M,{flat:"",round:"",size:"sm",icon:"close",onClick:B[0]||(B[0]=w=>O.$emit("update:modelValue",!1))})])])]),_:1}),e(ee,{class:qe(["q-py-sm",l(m).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(re,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":[B[1]||(B[1]=w=>_.search=w),V],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"]),n.value?(u(),U(ra,{key:0,modelValue:i.value,"onUpdate:modelValue":B[2]||(B[2]=w=>i.value=w),label:"Tampilkan Modal",style:{"margin-left":"-10px"}},null,8,["modelValue"])):k("",!0)]),_:1},8,["class"]),e(ee,{class:qe(["q-py-xs col",l(m).screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(Me,{ref_key:"tableRef",ref:b,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":B[3]||(B[3]=w=>y.value=w),filter:_.search,loading:d.value,columns:S.value,rows:p.value,"rows-per-page-options":[10,25,50],onRequest:z,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","rows-per-page-label":null},{"no-data":a(({icon:w,message:$,filter:D})=>[t("div",Eg,[t("span",null,r($),1)])]),body:a(w=>[e(Oe,{tabindex:"0",props:w,class:qe([{inactive:["stocked","raw_materials"].includes(w.row.type)&&w.row.stock<=0,"selected-row":g.value===w.rowIndex},"cursor-pointer"]),onClick:$=>E(w.row),onKeydown:[Yt(Q($=>E(w.row),["prevent","stop"]),["enter"]),Yt(Q($=>E(w.row),["prevent"]),["space"])]},{default:a(()=>[e(Y,{key:"name",props:w,class:"wrap-column"},{default:a(()=>[e(Se,{text:w.row.name},null,8,["text"]),w.row.description?(u(),U(Se,{key:0,text:w.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):k("",!0),l(m).screen.lt.md?(u(),h(H,{key:1},[t("div",null," Stok: "+r(w.row.type=="stocked"?l(L)(w.row.stock)+" "+w.row.uom:"-"),1),i.value?(u(),h("div",Ag," Modal: Rp. "+r(l(L)(w.row.cost)),1)):k("",!0),t("div",null,"Harga 1: Rp. "+r(l(L)(w.row.price_1)),1),t("div",null,"Harga 2: Rp. "+r(l(L)(w.row.price_1)),1),t("div",null,"Harga 3: Rp. "+r(l(L)(w.row.price_1)),1)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"stock",props:w,class:"text-right"},{default:a(()=>[v(r(w.row.type=="stocked"?l(L)(w.row.stock)+" "+w.row.uom:"-"),1)]),_:2},1032,["props"]),e(Y,{key:"cost",props:w,class:"wrap-column text-right"},{default:a(()=>[v(r(l(L)(w.row.cost)),1)]),_:2},1032,["props"]),e(Y,{key:"price_1",props:w,class:"wrap-column text-right"},{default:a(()=>[v(r(l(L)(w.row.price_1)),1)]),_:2},1032,["props"]),e(Y,{key:"price_2",props:w,class:"wrap-column text-right"},{default:a(()=>[v(r(l(L)(w.row.price_2)),1)]),_:2},1032,["props"]),e(Y,{key:"price_3",props:w,class:"wrap-column text-right"},{default:a(()=>[v(r(l(L)(w.row.price_3)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1},512)]),_:1},8,["model-value","maximized"]))}},Mg=Na({__name:"BarcodeInputEditor",props:{modelValue:{}},emits:["update:modelValue","scan-success","send","search"],setup(c,{expose:s,emit:m}){const o=T(null);s({focus:()=>{o.value&&o.value.focus()},qInput:o});const n=c,f=m,b=he(),p=T(n.modelValue);tt(()=>n.modelValue,w=>{w!==p.value&&(p.value=w)});const d=w=>{p.value=w,f("update:modelValue",w)},g=T(null),_=T(!1),y=T(!1);let x=null,S=null,C=null;xe(async()=>{if("BarcodeDetector"in window){_.value=!0;try{const w=await window.BarcodeDetector.getSupportedFormats();S=new BarcodeDetector({formats:w})}catch(w){console.warn("BarcodeDetector init error:",w),_.value=!1}}}),aa(()=>V());function j(){if(!_.value){b.notify({type:"warning",message:"Barcode Detector API tidak didukung browser ini."});return}y.value?V():z()}async function z(){if(S)try{y.value=!0,x=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),g.value&&(g.value.srcObject=x),await new Promise(w=>setTimeout(w,300)),O()}catch(w){y.value=!1,b.notify({type:"negative",message:`Gagal akses kamera: ${w.name==="NotAllowedError"?"Izin ditolak":"Error lainnya"}.`,actions:[{icon:"close",color:"white"}]})}}function V(){y.value=!1,C&&cancelAnimationFrame(C),x&&(x.getTracks().forEach(w=>w.stop()),x=null)}async function E(){f("search")}async function I(){f("send")}async function O(){var w;if(!(!g.value||!S||!y.value)){try{const $=await S.detect(g.value);if($.length>0){const D=$[0].rawValue;p.value+=D,f("update:modelValue",p.value),f("scan-success",p.value),(w=navigator.vibrate)==null||w.call(navigator,100),b.notify({type:"positive",message:`Barcode terdeteksi: ${p.value}`,timeout:1e3}),V();return}}catch($){console.warn("Detection error:",$)}C=requestAnimationFrame(O)}}const B=G(()=>{var w;return _.value&&!y.value&&!p.value?!0:(w=p.value)!=null&&w.endsWith("*")?_.value:!1});return(w,$)=>(u(),h("div",null,[e(re,Ua({ref_key:"qInputInternalRef",ref:o},w.$attrs,{"model-value":p.value,"onUpdate:modelValue":d,disable:y.value||w.$attrs.disable,loading:y.value||w.$attrs.loading,clearable:p.value&&!p.value.endsWith("*")}),{prepend:a(()=>[e(q,{name:"search",onClick:E,class:"cursor-pointer"})]),append:a(()=>[B.value?(u(),U(q,{key:0,name:"o_qr_code_scanner",class:"cursor-pointer q-mr-sm",color:"primary",onClick:j},{default:a(()=>[e(Ot,null,{default:a(()=>$[1]||($[1]=[v("Scan Barcode")])),_:1})]),_:1})):k("",!0),B.value?y.value?(u(),U(uo,{key:2,color:"primary",size:"1.5em",class:"q-mr-sm"})):k("",!0):(u(),U(q,{key:1,name:"send",onClick:I,class:"cursor-pointer q-ml-md"}))]),_:1},16,["model-value","disable","loading","clearable"]),e(nt,{modelValue:y.value,"onUpdate:modelValue":$[0]||($[0]=D=>y.value=D),persistent:"",maximized:"","transition-show":"fade","transition-hide":"fade"},{default:a(()=>[e(de,{class:"bg-black text-white flex column items-center justify-center full-height"},{default:a(()=>[e(ee,{class:"text-center q-pb-none"},{default:a(()=>$[2]||($[2]=[t("div",{class:"text-h6"},"Arahkan Kamera ke Barcode",-1)])),_:1}),e(ee,{class:"flex flex-center full-width q-pa-none"},{default:a(()=>[t("video",{ref_key:"videoRef",ref:g,autoplay:"",playsinline:"",class:"video-scanner"},null,512)]),_:1}),e(lt,{align:"center",class:"q-pt-lg"},{default:a(()=>[e(M,{label:"Batal Scan",color:"negative",icon:"close",onClick:V})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),$a=kt(Mg,[["__scopeId","data-v-f929c752"]]),Ng={class:"row text-grey-9 q-pt-sm"},Bg={key:0,class:"q-ml-sm"},Fg={key:1,class:"q-ml-sm"},zg={key:2,class:"q-ml-sm text-grey-9"},Lg={class:"row text-grey-9"},Hg={key:1,class:"q-ml-sm"},Kg={key:0},xa={__name:"PartyInfo",props:{party:{type:Object,required:!0},isValidWalletBalance:{type:Boolean,default:!0}},setup(c){const s=o=>o==null?"text-grey-9":o>0?"text-red":"text-green",m=o=>o==null?"Rp. 0":`Rp. ${L(o)}`;return(o,i)=>(u(),h("div",null,[t("div",Ng,[c.party.phone?(u(),h("div",Bg,[e(q,{name:"phone",class:"inline-icon"}),v(" "+r(c.party.phone),1)])):k("",!0),c.party.phone_1?(u(),h("div",Fg,[e(q,{name:"phone",class:"inline-icon"}),v(" "+r(c.party.phone_1),1)])):k("",!0),c.party.address?(u(),h("div",zg,[e(q,{name:"home_pin",class:"inline-icon"}),v(" "+r(c.party.address),1)])):k("",!0)]),t("div",Lg,[c.party.wallet_balance?(u(),h("div",{key:0,class:qe(["q-ml-sm",s(c.party.wallet_balance)])},[e(q,{name:"wallet",class:"inline-icon"}),v(" "+r(m(c.party.wallet_balance)),1)],2)):k("",!0),c.party.balance&&c.party.balance!=0?(u(),h("div",Hg,[c.party.wallet_balance?(u(),h("span",Kg,"")):k("",!0),i[0]||(i[0]=v("  ")),t("span",{class:qe(s(c.party.balance))},[e(q,{name:"balance",class:"inline-icon"}),v(" "+r(m(c.party.balance)),1)],2)])):k("",!0)])]))}},Yg={class:"q-gutter-sm"},Wg={class:"row items-center"},Qg={class:"text-weight-bold"},Jg={class:"row q-col-gutter-none full-width"},Gg={class:"col-sm-6 col-12 col"},Xg={class:"row full-width q-pa-sm"},Zg={class:"col-sm-6 col-12"},e1={class:"row q-ml-sm items-end"},t1={class:"row col grow"},a1={class:"col-12 q-px-sm column"},l1={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},o1={key:0,class:"col"},n1={class:"text-caption text-grey-6 q-mt-xs"},s1={key:0,class:"text-caption text-grey-8 q-mt-xs"},r1={class:"text-italic"},i1={key:1,class:"col"},d1={class:"text-grey-8"},u1={class:"col"},m1={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},c1={class:"text-h4 text-weight-bold"},p1={class:"row q-px-sm q-col-gutter-sm q-py-xs"},f1={class:"col"},g1={__name:"Editor",setup(c){const s=he(),m=fe(),o=T(!0),i=T(null),n=T(null),f=T(null),b=T(!1),p=T(null),d=T(null),{isFullscreen:g,toggleFullscreen:_}=wa(d),y="Retur #"+m.props.data.code,x=T(m.props.data.supplier),S=T(""),C=T(!1),j=T(!1),z=T(!1),V=T(!1),E=T(null),I=Ee({id:m.props.data.id,code:m.props.data.code,supplier_id:m.props.data.supplier_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),O=G(()=>I.items.reduce((ke,X)=>ke+X.cost*X.quantity,0)),B=()=>{var ke;_(),g.value||(ke=p==null?void 0:p.value)==null||ke.hideDrawer()},w=ke=>isNaN(ke)||ke<=0?(vt("Kuantitas tidak valid.","top"),!1):!0,$=ke=>isNaN(ke)||ke<0?(vt("Harga tidak valid.","top"),!1):!0,D=ke=>!ke||ke.length==0?(vt("Barcode tidak valid.","top"),!1):!0,R=ke=>{var X;(X=S.value)!=null&&X.endsWith("*")?S.value+=ke.name:S.value=ke.name},P=async()=>{if(C.value)return;const ke=S.value.trim();if(ke.length===0){j.value=!0;return}const X=ke.split("*");let te=1,we="",ne=null;if(X.length===1)we=X[0];else if(X.length<=3)te=parseInt(X[0]),we=X[1],X.length===3&&(ne=parseFloat(X[2]));else{vt("Input tidak valid.","top");return}if(we.length===0){j.value=!0;return}!D(we)&&!w(te)&&!$(ne)||(C.value=!0,await Ue.post(route("admin.purchase-order-return.add-item"),{order_id:I.id,product_code:we,qty:te,price:ne,merge:o.value}).then(J=>{const ie=J.data.data.item;let Z=-1;J.data.data.mergeItem&&(Z=I.items.findIndex(pe=>pe.id===ie.id)),Z===-1?I.items.push(ie):I.items[Z]=ie,S.value="",ne!==null&&ne!==parseFloat(ie.price)&&vt("Harga tidak dapat diubah!","top")}).catch(J=>{var ie,Z;ft((Z=(ie=J.response)==null?void 0:ie.data)==null?void 0:Z.message,"top"),console.error("Gagal mengambil data produk:",J)}),C.value=!1,bt(()=>{var J;(J=i.value)==null||J.focus()}))},A=ke=>{E.value=Object.create(ke),z.value=!0},N=ke=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ke.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{C.value=!0,Ue.post(route("admin.purchase-order-return.remove-item"),{id:ke.id}).then(()=>{const X=I.items.findIndex(te=>te.id===ke.id);X!==-1&&(I.items.splice(X,1)[0],gt("Item telah dihapus","top"))}).catch(X=>{var te,we;ft(((we=(te=X==null?void 0:X.response)==null?void 0:te.data)==null?void 0:we.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(X)}).finally(()=>{C.value=!1})})},oe=()=>{C.value=!0;const ke=n.value.getCurrentItem(),X={id:ke.id,qty:ke.quantity,cost:ke.cost};ke.notes&&(X.notes=ke.notes),Ue.post(route("admin.purchase-order-return.update-item"),X).then(te=>{const we=te.data.data,ne=I.items.findIndex(J=>J.id===we.id);ne!==-1&&(I.items[ne]=we,gt("Item telah diperbarui","top")),z.value=!1}).catch(te=>{var we,ne;ft(((ne=(we=te==null?void 0:te.response)==null?void 0:we.data)==null?void 0:ne.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(te)}).finally(()=>{C.value=!1})};xe(()=>{const ke=X=>{b.value||z.value||j.value||V.value||(X.key==="F1"?(X.preventDefault(),b.value=!0):X.key==="F2"?(X.preventDefault(),f.value.focus()):X.key==="F3"?(X.preventDefault(),i.value.focus()):X.key==="F4"?(X.preventDefault(),o.value=!o.value):X.key==="F10"||X.ctrlKey&&X.key==="Enter"?(X.preventDefault(),_e()):X.key==="F11"?(X.preventDefault(),B()):(X.key==="F5"||X.key==="F6"||X.key==="F7"||X.key==="F12")&&X.preventDefault())};document.addEventListener("keydown",ke),$t(()=>{document.removeEventListener("keydown",ke)}),bt(()=>{var X;(X=p==null?void 0:p.value)==null||X.hideDrawer()})});const ge=async()=>{C.value=!0;const ke={id:I.id,supplier_id:I.supplier_id??null,datetime:Zt(I.datetime),notes:I.notes};await Ue.post(route("admin.purchase-order-return.update"),ke).then(X=>{const te=X.data.data.id;I.supplier_id=te.supplier_id}).catch(X=>{var te,we;ft(((we=(te=X==null?void 0:X.response)==null?void 0:te.data)==null?void 0:we.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(X)}).finally(()=>{C.value=!1})},_e=ke=>{if(I.items.length===0){gt("Item masih kosong","top");return}Vt.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{C.value=!0,Ue.post(route("admin.purchase-order-return.close",{id:I.id})).then(X=>{gt("Transaksi selesai"),K.get(route("admin.purchase-order-return.detail",{id:I.id}))}).catch(X=>{var te,we;ft((we=(te=X.response)==null?void 0:te.data)==null?void 0:we.message),console.error(X)}).finally(()=>{C.value=!1})})},ue=()=>{Vt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.purchase-order-return.cancel",{id:I.id}),{id:I.id}).then(()=>{gt("Transaksi telah dibatalkan."),K.visit(route("admin.purchase-order-return.detail",{id:I.id}))}).catch(ke=>{var te,we;const X=((we=(te=ke.response)==null?void 0:te.data)==null?void 0:we.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:X,color:"warning",position:"bottom"}),console.error(ke)})})},Ie=()=>{window.open(route("admin.purchase-order-return.detail",{id:I.id})+"?preview=1","_blank")};return G(()=>x.value?x.value.wallet_balance>=O.value:!0),(ke,X)=>{const te=W("i-head"),we=W("authenticated-layout");return u(),h(H,null,[e(te,{title:y}),e(we,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[v(r(y))]),"left-button":a(()=>[t("div",Yg,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:X[0]||(X[0]=ne=>l(K).get(ke.route("admin.purchase-order-return.index")))})])]),"right-button":a(()=>[t("div",Wg,[l(s).screen.gt.sm?(u(),h(H,{key:0},[t("div",Qg,r(l(m).props.auth.user.username),1),X[21]||(X[21]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ka)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 column fit"},{default:a(()=>[e(de,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",Jg,[t("div",Gg,[t("div",Xg,[e(Bo,{ref_key:"supplierAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:x.value,"onUpdate:modelValue":X[2]||(X[2]=ne=>x.value=ne),label:"Pemasok",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),x.value?(u(),U(xa,{key:0,party:x.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",Zg,[e($a,{ref_key:"userInputRef",ref:i,modelValue:S.value,"onUpdate:modelValue":X[3]||(X[3]=ne=>S.value=ne),onKeyup:X[4]||(X[4]=Yt(Q(ne=>P(),["prevent"]),["enter"])),onScanSuccess:X[5]||(X[5]=ne=>P()),onSend:X[6]||(X[6]=ne=>P()),onSearch:X[7]||(X[7]=ne=>j.value=!0),loading:C.value,disable:C.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",e1,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":X[8]||(X[8]=ne=>o.value=ne),label:"Gabungkan item",disable:C.value},null,8,["modelValue","disable"])])])]),t("div",t1,[t("div",a1,[e(Mo,{items:I.items,onUpdateQuantity:X[9]||(X[9]=({id:ne,value:J})=>ke.updateQuantity(ne,J)),onRemoveItem:N,onEditItem:A,"is-processing":C.value},null,8,["items","is-processing"])])]),t("div",l1,[l(s).screen.gt.sm?(u(),h("div",o1,[t("div",n1,r(I.items.length)+" item(s) ",1),I.notes?(u(),h("div",s1,[X[22]||(X[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",r1,[e(Se,{text:I.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(u(),h("div",i1,[t("div",d1,[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),v(r(l(m).props.data.purchase_order.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(I.datetime)),1)])])])):k("",!0),t("div",u1,[t("div",m1,[X[24]||(X[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",c1,[X[23]||(X[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(L)(O.value)),1)])])])]),t("div",p1,[t("div",f1,[e(M,{class:"full-width",label:"Selesai",color:"primary",icon:"payment",onClick:X[10]||(X[10]=ne=>_e()),disable:!ke.$can("admin.purchase-order-return.close")||C.value||I.items.length===0||I.status!=="draft",loading:C.value},null,8,["disable","loading"])]),t("div",null,[e(M,{icon:"more_vert",color:"grey",onClick:X[14]||(X[14]=Q(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[ae((u(),U(le,{clickable:"",onClick:X[11]||(X[11]=Q(ne=>V.value=!0,["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>X[25]||(X[25]=[v("Edit Rincian")])),_:1})]),_:1})),[[se],[me]]),ae((u(),U(le,{clickable:"",onClick:X[12]||(X[12]=Q(ne=>Ie(),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"preview"})]),_:1}),e(F,null,{default:a(()=>X[26]||(X[26]=[v("Pratinjau")])),_:1})]),_:1})),[[se],[me]]),ae((u(),U(le,{clickable:"",onClick:X[13]||(X[13]=Q(ne=>ue(),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:a(()=>X[27]||(X[27]=[v(" Batalkan ")])),_:1})]),_:1})),[[se],[me]]),e(Re)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(No,{ref_key:"itemEditorRef",ref:n,modelValue:z.value,"onUpdate:modelValue":X[15]||(X[15]=ne=>z.value=ne),item:E.value,onSave:X[16]||(X[16]=ne=>oe()),"is-processing":C.value},null,8,["modelValue","item","is-processing"]),e(ha,{modelValue:j.value,"onUpdate:modelValue":X[17]||(X[17]=ne=>j.value=ne),onProductSelected:R},null,8,["modelValue"]),e(zo,{modelValue:V.value,"onUpdate:modelValue":X[18]||(X[18]=ne=>V.value=ne),data:I,onSave:X[19]||(X[19]=ne=>ge()),"is-processing":C.value},null,8,["modelValue","data","is-processing"]),e(Fo,{modelValue:b.value,"onUpdate:modelValue":X[20]||(X[20]=ne=>b.value=ne)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},b1=Object.freeze(Object.defineProperty({__proto__:null,default:g1},Symbol.toStringTag,{value:"Module"})),v1={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},_1={class:"q-pa-xs"},y1={class:"full-width row flex-center text-grey-8 q-gutter-sm"},k1={key:0},w1={key:1},h1={key:2},$1={key:3},x1={key:0},S1={key:0},V1={key:1},q1={class:"flex justify-end"},Rl="Retur Pembelian",C1={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=po();fo(),[`${p}`,...go(p-2,p-1).reverse()],[...bo()];const d=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES)],g=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES)],_=De().startOf("month").toDate(),y=De().endOf("month").toDate(),x=Ee({search:"",status:"all",refund_status:"all",start_date:_,end_date:y,...He()}),S=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{O()});const j=$=>{if($.status=="draft"){z($);return}V($)},z=$=>{K.get(route("admin.purchase-order-return.edit",$.id))},V=$=>{K.get(route("admin.purchase-order-return.detail",$.id))},E=$=>{Vt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.purchase-order-return.cancel",{id:$.id}),{id:$.id}).then(D=>{const R=D.data.data,P=o.value.findIndex(A=>A.id===R.id);if(P===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[P].status="canceled",s.notify({message:D.data.message,position:"bottom"})}).catch(D=>{var P,A;const R=((A=(P=D.response)==null?void 0:P.data)==null?void 0:A.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:R,color:"warning",position:"bottom"}),console.error(D)})})},I=$=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.purchase-order-return.delete",$.id),fetchItemsCallback:O,loading:i}),O=($=null)=>{const D={...x,start_date:De(x.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:De(x.end_date).format("YYYY-MM-DD HH:mm:ss")};Ke({pagination:S,filter:D,props:$,rows:o,url:route("admin.purchase-order-return.data"),loading:i,tableRef:n})},B=()=>{O()},w=G(()=>s.screen.gt.sm?C:C.filter($=>$.name==="code"||$.name==="action"));return($,D)=>{const R=W("i-head"),P=W("authenticated-layout");return u(),h(H,null,[e(R,{title:Rl}),e(P,null,ze({title:a(()=>[v(r(Rl))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=A=>m.value=!m.value)},null,8,["icon"]),$.$can("admin.purchase-order-return.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[1]||(D[1]=A=>l(K).get($.route("admin.purchase-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",_1,[e(Me,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:S.value,"onUpdate:pagination":D[10]||(D[10]=A=>S.value=A),filter:x.search,loading:i.value,columns:w.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(b)}),onRequest:O,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:A,message:N,filter:oe})=>[t("div",y1,[t("span",null,r(N)+" "+r(oe?" with term "+oe:""),1)])]),body:a(A=>[e(Oe,{props:A,class:"cursor-pointer",onClick:Q(N=>j(A.row),["prevent"])},{default:a(()=>[e(Y,{key:"code",props:A,class:"wrap-column"},{default:a(()=>{var N,oe,ge;return[t("div",null,[e(q,{name:"tag"}),v(" "+r(A.row.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(A.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[A.row.cashier?(u(),h("div",k1,[e(q,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((N=A.row.cashier)==null?void 0:N.username),1)])):k("",!0),A.row.cashier_session?(u(),h("div",w1,[e(q,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((ge=(oe=A.row.cashier_session)==null?void 0:oe.cashier_terminal)==null?void 0:ge.name),1)])):k("",!0),A.row.supplier?(u(),h("div",h1,[e(q,{name:"person",class:"inline-icon"}),e(ba,{href:$.route("admin.supplier.detail",{id:A.row.supplier.id}),onClick:D[7]||(D[7]=Q(()=>{},["stop"]))},{default:a(()=>[v(" "+r(A.row.supplier.code)+" - "+r(A.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(l(L)(A.row.grand_total)),1),A.row.notes?(u(),h("div",$1,[e(q,{name:"notes"}),v(" "+r(A.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Ft,{status:A.row.status,statuses:$.$CONSTANTS.PURCHASE_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Ft,{status:A.row.refund_status,statuses:$.$CONSTANTS.PURCHASE_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"red",partially_refunded:"orange",fully_refunded:"green",no_refund:"black"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Y,{key:"supplier_id",props:A},{default:a(()=>[A.row.supplier?(u(),h("div",x1,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),v(" "+r(A.row.supplier_code)+" - "+r(A.row.supplier_name),1)]),A.row.supplier_phone?(u(),h("div",S1,[e(q,{name:"phone",class:"inline-icon"}),v(" "+r(A.row.supplier_phone),1)])):k("",!0),A.row.supplier_address?(u(),h("div",V1,[e(q,{name:"home_pin",class:"inline-icon"}),v(" "+r(A.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total",props:A},{default:a(()=>[v(r(l(L)(A.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:A},{default:a(()=>[e(Se,{text:A.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:A,onClick:D[9]||(D[9]=Q(()=>{},["stop"]))},{default:a(()=>[t("div",q1,[$.$can("admin.purchase-order-return.detail")||$.$can("admin.purchase-order-return.edit")||$.$can("admin.purchase-order-return.cancel")||$.$can("admin.purchase-order-return.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[8]||(D[8]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[A.row.status!="draft"&&$.$can("admin.purchase-order-return.detail")?ae((u(),U(le,{key:0,onClick:Q(N=>V(A.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"visibility"})]),_:1}),e(F,null,{default:a(()=>D[11]||(D[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),A.row.status=="draft"&&$.$can("admin.purchase-order-return.edit")?ae((u(),U(le,{key:1,onClick:Q(N=>z(A.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>D[12]||(D[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),A.row.status=="draft"&&$.$can("admin.purchase-order-return.cancel")?ae((u(),U(le,{key:2,onClick:Q(N=>E(A.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"cancel"})]),_:1}),e(F,null,{default:a(()=>D[13]||(D[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),e(Re),$.$can("admin.purchase-order-return.delete")?ae((u(),U(le,{key:3,onClick:Q(N=>I(A.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>D[14]||(D[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",v1,[e(Ze,{modelValue:x.start_date,"onUpdate:modelValue":[D[2]||(D[2]=A=>x.start_date=A),B],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Ze,{modelValue:x.end_date,"onUpdate:modelValue":[D[3]||(D[3]=A=>x.end_date=A),B],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:x.status,"onUpdate:modelValue":[D[4]||(D[4]=A=>x.status=A),B],options:d,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:x.refund_status,"onUpdate:modelValue":[D[5]||(D[5]=A=>x.refund_status=A),B],options:g,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":D[6]||(D[6]=A=>x.search=A),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},T1=Object.freeze(Object.defineProperty({__proto__:null,default:C1},Symbol.toStringTag,{value:"Module"})),P1={key:0,class:"text-center q-mb-md text-grey-8"},R1={class:"text-subtitle2 text-weight-medium"},O1={class:"text-h5 text-center text-primary q-pb-md"},D1={class:"q-mb-md flex flex-center"},I1={key:1},U1={class:"col-6"},j1={class:"col-6"},E1={class:"row"},A1={class:"text-center q-mt-md"},M1={key:0,class:"text-h6 text-negative text-weight-bold"},N1={key:1,class:"text-h6 text-green-8 text-weight-bold"},B1={key:2,class:"text-h6 text-positive text-weight-bold"},F1={key:2},z1={class:"text-h6 text-negative text-center"},L1={key:3},H1={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=fe(),n=T(!1),f=T("payment"),b=T(new Date),p=T(null),d=Ee([]),g=G(()=>d.every($=>$.id&&typeof $.amount=="number"&&$.amount>0)),_=G(()=>i.props.accounts.map($=>({label:$.name,value:$.id}))),y=G(()=>d.reduce(($,D)=>$+(D.amount||0),0)),x=G(()=>m.total-y.value),S=G(()=>{if(!m.supplier)return!0;const $=d.find(R=>R.id==="wallet");return($?$.amount:0)<=m.supplier.balance}),C=new Date,j=mt.addToDate(new Date,{days:30}),z=G(()=>[$=>!!$||"Tanggal jatuh tempo harus diisi",$=>mt.isBetweenDates($,C,j,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),V=G(()=>{if(f.value==="debt")return!!m.supplier&&z.value.every(P=>P(b.value)===!0);const $=d.some(P=>(P.amount||0)>0),D=d.every(P=>(P.amount||0)>=0),R=x.value<=0;return g.value&&$&&D&&R}),E=()=>{d.length<3&&d.push({id:null,amount:0})},I=$=>{if(d.length>1){const D=d.findIndex(R=>R.id===$);D!==-1&&d.splice(D,1)}},O=$=>{f.value=$,b.value=new Date,d.splice(0,d.length),$==="payment"&&_.value.length>0&&(d.splice(0,d.length,{id:_.value[0].value,amount:m.total}),bt(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},B=()=>{if(!V.value)return;n.value=!0;let $={total:m.total,is_debt:f.value==="debt"};if(f.value==="debt")$.due_date=mt.formatDate(b.value,"YYYY-MM-DD"),$.payments=[];else{const D=y.value,R=D>m.total?D-m.total:0,P=x.value>0?x.value:0;$.payments=d,$.remaining_debt=P,$.change=R}o("accepted",$),n.value=!1},w=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}O("payment")};return($,D)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":D[3]||(D[3]=R=>$.$emit("update:modelValue",R)),onBeforeShow:w},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,null,{default:a(()=>D[4]||(D[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ee,{class:"q-pt-none"},{default:a(()=>[c.supplier?(u(),h("div",P1,[t("div",R1,[v(" Nama: "+r(c.supplier.name),1),D[5]||(D[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(l(L)(c.supplier.balance)),1)])])):k("",!0),t("div",O1," Total: Rp. "+r(l(L)(c.total)),1),t("div",D1,[e(l(Kt),{modelValue:f.value,"onUpdate:modelValue":[D[0]||(D[0]=R=>f.value=R),O],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="payment"?(u(),h("div",I1,[(u(!0),h(H,null,je(d,(R,P)=>(u(),h("div",{key:P,class:"row q-col-gutter-sm q-mb-sm"},[t("div",U1,[e(l(ce),{modelValue:R.id,"onUpdate:modelValue":A=>R.id=A,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[A=>!!A||"Akun harus dipilih"],error:!R.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",j1,[e(Be,{modelValue:R.amount,"onUpdate:modelValue":A=>R.amount=A,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!S.value,"error-message":S.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:P===0?"firstPaymentInputRef":null},ze({_:2},[d.length>1?{name:"append",fn:a(()=>[e(q,{size:"xs",name:"close",class:"cursor-pointer",onClick:A=>I(P)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",E1,[e(M,{disable:!(d.length<3&&x.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:E,size:"sm"},null,8,["disable"])]),t("div",A1,[x.value>0?(u(),h("div",M1," Sisa Tagihan: Rp. "+r(l(L)(x.value)),1)):x.value<0?(u(),h("div",N1," Kembalian: Rp. "+r(l(L)(Math.abs(x.value))),1)):(u(),h("div",B1," Tagihan Terbayar "))])])):f.value==="debt"&&c.supplier?(u(),h("div",F1,[e(ua,{outlined:"",modelValue:b.value,"onUpdate:modelValue":D[1]||(D[1]=R=>b.value=R),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(C),"max-date":l(j),rules:z.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",z1," Total Utang: Rp. "+r(l(L)(c.total)),1)])):f.value==="debt"&&!c.supplier?(u(),h("div",L1,D[6]||(D[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(lt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(M,{flat:"",label:"Batal",color:"grey",onClick:D[2]||(D[2]=R=>$.$emit("update:modelValue",!1))}),e(M,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:B,disable:n.value||!V.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},K1=Object.freeze(Object.defineProperty({__proto__:null,default:H1},Symbol.toStringTag,{value:"Module"})),Y1={key:0},W1={style:{float:"right"}},Q1={key:1},J1={style:{float:"right"}},G1={key:2},X1={style:{float:"right"}},Z1={key:3},eb={style:{float:"right"}},tb={style:{float:"right"}},ab={class:"q-gutter-sm"},lb={class:"q-my-md"},ob={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ee,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(u(),h("tr",Y1,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",W1,r(l(L)(c.payment.total)),1)])]),c.payment.cash_amount?(u(),h("tr",Q1,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",J1,r(l(L)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(u(),h("tr",G1,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",X1,r(l(L)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(u(),h("tr",Z1,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",eb,r(l(L)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",tb,r(l(L)(c.payment.change)),1)])])])])]),_:1}),e(lt,{align:"center"},{default:a(()=>[t("div",ab,[e(M,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(M,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",lb,[e(M,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},nb=kt(ob,[["__scopeId","data-v-f0591c00"]]),sb=Object.freeze(Object.defineProperty({__proto__:null,default:nb},Symbol.toStringTag,{value:"Module"})),rb={class:"column"},ib={class:"bg-grey-2 q-pa-xs"},db={class:"text-subtitle1 text-bold text-grey-10"},ub={class:"col-12 col-sm-6"},mb={class:"full-width"},cb={key:0},pb={key:1},fb={key:0},gb={key:1},bb={class:"col-12 col-sm-6",align:"left"},vb={class:"full-width"},_b={key:0};const yb={key:2},kb={class:"full-width",style:{"border-collapse":"collapse"}},wb={class:"q-pa-sm"},hb={class:"text-right q-pa-sm"},$b={class:"text-right q-pa-sm"},xb={class:"text-right q-pa-sm"},Sb={key:0},Vb={class:"col-12 col-sm-6"},qb={class:"text-body2 text-grey-7 text-italic"},Cb={class:"col-12 col-sm-6"},Tb={class:"row justify-end q-gutter-y-xs"},Pb={class:"col-12 row justify-between"},Rb={class:"text-subtitle2 text-bold"},Ob={key:0,class:"row justify-end q-gutter-y-xs"},Db={class:"col-12 row justify-between"},Ib={class:"text-subtitle2 text-bold"},Ub={key:1,class:"row justify-end q-gutter-y-xs"},jb={class:"col-12 row justify-between"},Eb={class:"text-subtitle2 text-bold"},Ab={key:2,class:"row justify-end q-gutter-y-xs"},Mb={class:"col-12 row justify-between"},Nb={class:"text-subtitle2 text-bold"},Lo={__name:"InvoiceTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=W("i-link");return u(),h("div",rb,[e(ee,{class:"q-pa-none"},{default:a(()=>[t("div",ib,[t("div",db," Pembelian #"+r(s.data.code),1)])]),_:1}),e(Re),e(ee,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",ub,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Supplier",-1)),t("table",mb,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.supplier?(u(),h("div",cb,[e(q,{class:"inline-icon",name:"person"}),e(i,{href:m.route("admin.supplier.detail",{id:s.data.supplier_id})},{default:a(()=>[v(r(s.data.supplier_name),1)]),_:1},8,["href"])])):(u(),h("div",pb,[e(q,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pemasok Umum "))]))])]),s.data.supplier_phone?(u(),h("tr",fb,[t("td",null,[e(q,{class:"inline-icon",name:"phone"}),e(Gt,{phone:s.data.supplier_phone},null,8,["phone"])])])):k("",!0),s.data.supplier_address?(u(),h("tr",gb,[t("td",null,[e(q,{class:"inline-icon",name:"home_pin"}),(u(),h(H,{key:0},[v(r(s.data.supplier_address),1)],64))])])):k("",!0)])])]),t("div",bb,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",vb,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.$CONSTANTS.PURCHASE_ORDER_STATUSES[s.data.status]),1)]),s.data.status=="closed"?(u(),h("tr",_b,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)])):k("",!0),k("",!0),s.data.due_date?(u(),h("tr",yb,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(sa)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Re),e(ee,{class:"q-pa-sm"},{default:a(()=>[t("table",kb,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{colspan:"2",class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Qty "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga Beli (Rp) "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(u(!0),h(H,null,je(s.data.details,n=>(u(),h("tr",{key:n.id},[t("td",wb,[e(i,{href:m.route("admin.product.detail",{id:n.product_id})},{default:a(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",hb,r(n.quantity),1),t("td",null,r(n.product_uom),1),t("td",$b,r(l(L)(n.cost)),1),t("td",xb,r(l(L)(n.subtotal_cost)),1)]))),128)),s.data.details.length==0?(u(),h("tr",Sb,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Re),e(ee,{class:"row",align:"left"},{default:a(()=>[t("div",Vb,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",qb,r(s.data.notes?s.data.notes:"-"),1)]),t("div",Cb,[t("div",Tb,[t("div",Pb,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Rb,r(l(L)(s.data.grand_total)),1)])]),s.data.status=="closed"&&s.data.total_return?(u(),h("div",Ob,[t("div",Db,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",Ib,r(l(L)(s.data.total_return)),1)])])):k("",!0),s.data.status=="closed"&&s.data.total_paid?(u(),h("div",Ub,[t("div",jb,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Dibayar (Rp)",-1)),t("div",Eb,r(l(L)(s.data.total_paid)),1)])])):k("",!0),s.data.status=="closed"&&s.data.balance!=0?(u(),h("div",Ab,[t("div",Mb,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",Nb,r(l(St)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},Bb=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),Fb={key:0,class:"text-center q-mb-md text-grey-8"},zb={class:"text-subtitle2 text-weight-medium"},Lb={class:"text-h5 text-center text-primary q-pb-md"},Hb={class:"text-center q-mt-md"},Kb={key:0,class:"text-h6 text-negative text-weight-bold"},Yb={key:1,class:"text-h6 text-green-8 text-weight-bold"},Wb={key:2,class:"text-h6 text-positive text-weight-bold"},Ho={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=fe(),n=T(!1),f=T({method:null,amount:m.total,notes:null}),b=i.props.data.supplier,p=G(()=>[...i.props.accounts.map(C=>({label:C.type=="bank"?C.name+" - "+C.number:C.name,value:C.id}))]),d=G(()=>m.total-(f.value.amount||0)),g=G(()=>f.value.method&&typeof f.value.amount=="number"&&f.value.amount>0),_=G(()=>f.value.method?(f.value.amount||0)<=0?"Jumlah pembayaran harus lebih dari 0.":null:"Metode pembayaran harus dipilih."),y=G(()=>g.value&&_.value===null),x=()=>{if(!y.value)return;n.value=!0;const C={total_paid:f.value.amount,payments:[{id:f.value.method,amount:f.value.amount}],notes:f.value.notes,remaining_debt:Math.max(0,m.total-(f.value.amount||0))};o("accepted",C),n.value=!1},S=()=>{f.value.amount=m.total,f.value.method=null,f.value.notes=null};return(C,j)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":j[4]||(j[4]=z=>C.$emit("update:modelValue",z)),onBeforeShow:S},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,null,{default:a(()=>j[5]||(j[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ee,{class:"q-pt-none"},{default:a(()=>[l(b)?(u(),h("div",Fb,[t("div",zb,[v(r(l(b).name)+" ",1),j[6]||(j[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(l(L)(l(b).balance)),1)])])):k("",!0),t("div",Lb," Total: Rp. "+r(l(L)(c.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":j[0]||(j[0]=z=>f.value.method=z),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value,rules:[z=>!!z||"Pilih metode pembayaran."]},null,8,["modelValue","options","disable","rules"]),e(Be,{modelValue:f.value.amount,"onUpdate:modelValue":j[1]||(j[1]=z=>f.value.amount=z),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!y.value,"error-message":_.value},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:f.value.notes,"onUpdate:modelValue":j[2]||(j[2]=z=>f.value.notes=z),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Hb,[d.value>0?(u(),h("div",Kb," Sisa Tagihan: Rp. "+r(l(L)(d.value)),1)):d.value<0?(u(),h("div",Yb," Kembalian: Rp. "+r(l(L)(Math.abs(d.value))),1)):(u(),h("div",Wb," Tagihan Terbayar "))])]),_:1}),e(lt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(M,{flat:"",label:"Batal",color:"grey",onClick:j[3]||(j[3]=z=>C.$emit("update:modelValue",!1))}),e(M,{label:"Bayar",color:"positive",onClick:x,disable:n.value||!y.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Qb=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),Jb={class:"column"},Gb={class:"row"},Xb={class:"full-width",style:{"border-collapse":"collapse"}},Zb={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ev={class:"row items-center q-gutter-x-sm"},tv={class:"text-weight-bold"},av={class:"row items-center q-gutter-x-sm q-mt-xs"},lv={class:"text-caption text-grey-6"},ov={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},nv={class:"q-mt-xs"},sv={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},rv={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},iv={key:0},dv={class:"text-right q-pa-sm"},Ko={__name:"PaymentTab",props:{data:Object},setup(c){const s=c,m=he(),o=T(!1),i=()=>{o.value=!0},n=async b=>{const p={order_id:s.data.id,payments:b.payments,notes:b.notes};m.loading.show({message:"Memproses pembayaran..."});try{const d=await Ue.post(route("admin.purchase-order.add-payment"),p);m.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,K.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(d){let g="Gagal memproses pembayaran.";d.response&&d.response.data&&d.response.data.message?g=d.response.data.message:d.message&&(g=d.message),m.notify({message:g,color:"negative",icon:"error"})}finally{m.loading.hide()}},f=b=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Ue.post(route("admin.purchase-order.delete-payment",{id:b.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),K.visit(route("admin.purchase-order.detail",{id:s.data.id})+"?tab=payment")}catch(p){let d="Gagal menghapus pembayaran.";p.response&&p.response.data&&p.response.data.message?d=p.response.data.message:p.message&&(d=p.message),m.notify({message:d,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(b,p)=>{const d=W("i-link");return u(),h(H,null,[t("div",Jb,[e(Re),e(ee,{class:"q-pa-sm"},{default:a(()=>[t("div",Gb,[b.$can("admin.purchase-order.add-payment")?(u(),U(M,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:p[0]||(p[0]=Q(g=>i(),["stop"]))})):k("",!0)]),t("table",Xb,[p[5]||(p[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(u(!0),h(H,null,je(s.data.payments,g=>(u(),h("tr",{key:g.id},[t("td",Zb,[t("div",ev,[e(q,{name:"tag",size:"xs",color:"grey-7"}),t("span",tv,r(g.code),1)]),t("div",av,[e(q,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",lv,r(l(ve)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(u(),h("div",ov,[e(q,{name:"wallet",size:"xs",color:"grey-7"}),e(d,{class:"text-caption",href:b.route("admin.finance-account.detail",{id:g.account.id})},{default:a(()=>[v(r(g.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",nv,[e(it,{label:b.$CONSTANTS.PURCHASE_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(it,{label:g.amount<0?"Pembayaran":"Refund",color:g.amount<0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",sv,r(l(St)(g.amount)),1),t("td",rv,[b.$can("admin.purchase-order.delete-payment")&&s.data.supplier_id&&g.amount<0?(u(),U(M,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(u(),h("tr",iv,p[2]||(p[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[p[3]||(p[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",dv,r(l(St)(s.data.balance)),1),p[4]||(p[4]=t("td",null,null,-1))])])])]),_:1})]),e(Ho,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=g=>o.value=g),total:b.remainingPayment,customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},uv=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),mv={class:"q-gutter-sm"},cv={class:"col col-lg-6 q-pa-xs",align:"center"},Ol="Rincian Pembelian",pv={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=fe(),o=m.props.data,i=T(s.get("preview")||!1),f=T(s.get("tab")||"invoice"),b=()=>{window.print()};return(p,d)=>{const g=W("i-head"),_=W("authenticated-layout");return u(),h(H,null,[e(g,{title:Ol}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Ol))])]),"left-button":a(()=>[t("div",mv,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=y=>i.value?l(K).get(p.route("admin.purchase-order.edit",l(m).props.data.id)):l(K).get(p.route("admin.purchase-order.index")))})])]),"right-button":a(()=>[e(M,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:d[1]||(d[1]=y=>b())}),i.value?k("",!0):(u(),U(M,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:d[2]||(d[2]=y=>l(K).get(p.route("admin.purchase-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",cv,[e(de,{square:"",flat:"",bordered:"",class:qe(["full-width",i.value?"draft-label":f.value!="invoice"?"":l(m).props.data.payment_status=="fully_paid"?"paid-label":"unpaid-label"]),style:{"max-width":"1024px"}},{default:a(()=>[e(Tt,{modelValue:f.value,"onUpdate:modelValue":d[3]||(d[3]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"invoice",label:"Rincian"}),i.value?k("",!0):(u(),U(dt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Re),e(Pt,{modelValue:f.value,"onUpdate:modelValue":d[4]||(d[4]=y=>f.value=y),animated:""},{default:a(()=>[e(ut,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(Lo,{data:l(o)},null,8,["data"])]),_:1}),e(ut,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(Ko,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])])]),_:1})]),_:1})],64)}}},fv=Object.freeze(Object.defineProperty({__proto__:null,default:pv},Symbol.toStringTag,{value:"Module"})),gv={class:"text-weight-medium wrap-column"},bv={class:"text-caption text-grey-6 elipsis"},vv={class:"column items-end"},_v={class:"text-caption text-grey-6 text-italic"},Yo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=he(),m=ot(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(u(),U(Me,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ye({height:l(m)})},{header:a(f=>[e(Oe,{props:f,class:"bg-grey-4"},{default:a(()=>[(u(!0),h(H,null,je(f.cols,b=>(u(),U(ta,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Oe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:f,class:"text-left"},{default:a(()=>[t("div",gv,r(f.row.product_name),1),t("div",bv,r(f.row.product_barcode),1),f.row.notes?(u(),U(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal",props:f,class:"text-right"},{default:a(()=>[t("div",vv,[t("div",null,r(l(L)(f.row.subtotal_cost)),1),t("div",_v,r(l(L)(f.row.quantity))+" x Rp. "+r(l(L)(f.row.cost)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(M,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(M,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},yv=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),kv={key:0,class:"text-center q-mb-md text-grey-8"},wv={class:"text-subtitle2 text-weight-medium"},hv={class:"text-h5 text-center text-primary q-pb-md"},$v={class:"q-mb-md flex flex-center"},xv={key:1},Sv={class:"col-6"},Vv={class:"col-6"},qv={class:"row"},Cv={class:"text-center q-mt-md"},Tv={key:0,class:"text-h6 text-negative text-weight-bold"},Pv={key:1,class:"text-h6 text-green-8 text-weight-bold"},Rv={key:2,class:"text-h6 text-positive text-weight-bold"},Ov={key:2},Dv={class:"text-h6 text-negative text-center"},Iv={key:3},Wo={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},supplier:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=fe(),n=T(!1),f=T("payment"),b=T(new Date),p=T(null),d=Ee([]),g=G(()=>d.every($=>$.id&&typeof $.amount=="number"&&$.amount>0)),_=G(()=>i.props.accounts.map($=>({label:$.name,value:$.id}))),y=G(()=>d.reduce(($,D)=>$+(D.amount||0),0)),x=G(()=>m.total-y.value),S=G(()=>{if(!m.supplier)return!0;const $=d.find(D=>D.id==="wallet");return $?$.amount<=m.supplier.balance:!0}),C=new Date,j=mt.addToDate(new Date,{days:30}),z=G(()=>[$=>!!$||"Tanggal jatuh tempo harus diisi",$=>mt.isBetweenDates($,C,j,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),V=G(()=>{if(f.value==="debt")return!!m.supplier&&z.value.every(P=>P(b.value)===!0);const $=d.some(P=>(P.amount||0)>0),D=d.every(P=>(P.amount||0)>=0),R=x.value<=0;return g.value&&$&&D&&R}),E=()=>{d.length<3&&d.push({id:null,amount:0})},I=$=>{if(d.length>1){const D=d.findIndex(R=>R.id===$);D!==-1&&d.splice(D,1)}},O=$=>{f.value=$,b.value=new Date,d.splice(0,d.length),$==="payment"&&_.value.length>0&&(d.splice(0,d.length,{id:_.value[0].value,amount:m.total}),bt(()=>{p.value&&p.value.length>0&&(p.value[0].focus(),p.value[0].select())}))},B=()=>{if(!V.value)return;n.value=!0;let $={total:m.total,is_debt:f.value==="debt"};if(f.value==="debt")$.due_date=mt.formatDate(b.value,"YYYY-MM-DD"),$.payments=[];else{const D=y.value,R=D>m.total?D-m.total:0,P=x.value>0?x.value:0;$.payments=d,$.remaining_debt=P,$.change=R}o("accepted",$),n.value=!1},w=()=>{if(_.value.length===0){console.log("Tidak ada akun yang dapat digunakan untuk pembayaran!");return}O("payment")};return($,D)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":D[3]||(D[3]=R=>$.$emit("update:modelValue",R)),onBeforeShow:w},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,null,{default:a(()=>D[4]||(D[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ee,{class:"q-pt-none"},{default:a(()=>[c.supplier?(u(),h("div",kv,[t("div",wv,[v(" Nama: "+r(c.supplier.name),1),D[5]||(D[5]=t("br",null,null,-1)),v(" Utang / Piutang: Rp. "+r(l(L)(c.supplier.balance)),1)])])):k("",!0),t("div",hv," Total: Rp. "+r(l(L)(c.total)),1),t("div",$v,[e(l(Kt),{modelValue:f.value,"onUpdate:modelValue":[D[0]||(D[0]=R=>f.value=R),O],options:[{label:"Pembayaran",value:"payment",slot:"payment",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.supplier,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="payment"?(u(),h("div",xv,[(u(!0),h(H,null,je(d,(R,P)=>(u(),h("div",{key:P,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Sv,[e(l(ce),{modelValue:R.id,"onUpdate:modelValue":A=>R.id=A,options:_.value,label:"Akun",outlined:!0,"emit-value":"","map-options":"",dense:"",disable:n.value,"hide-bottom-space":"",rules:[A=>!!A||"Akun harus dipilih"],error:!R.id,"error-message":"Akun tidak valid",class:"custom-select"},null,8,["modelValue","onUpdate:modelValue","options","disable","rules","error"])]),t("div",Vv,[e(Be,{modelValue:R.amount,"onUpdate:modelValue":A=>R.amount=A,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:!S.value,"error-message":S.value?"":"Jumlah Tidak valid!","hide-bottom-space":"",ref_for:!0,ref:P===0?"firstPaymentInputRef":null},ze({_:2},[d.length>1?{name:"append",fn:a(()=>[e(q,{size:"xs",name:"close",class:"cursor-pointer",onClick:A=>I(P)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",qv,[e(M,{disable:!(d.length<3&&x.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:E,size:"sm"},null,8,["disable"])]),t("div",Cv,[x.value>0?(u(),h("div",Tv," Sisa Tagihan: Rp. "+r(l(L)(x.value)),1)):x.value<0?(u(),h("div",Pv," Kembalian: Rp. "+r(l(L)(Math.abs(x.value))),1)):(u(),h("div",Rv," Tagihan Terbayar "))])])):f.value==="debt"&&c.supplier?(u(),h("div",Ov,[e(ua,{outlined:"",modelValue:b.value,"onUpdate:modelValue":D[1]||(D[1]=R=>b.value=R),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(C),"max-date":l(j),rules:z.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",Dv," Total Utang: Rp. "+r(l(L)(c.total)),1)])):f.value==="debt"&&!c.supplier?(u(),h("div",Iv,D[6]||(D[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(lt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(M,{flat:"",label:"Batal",color:"grey",onClick:D[2]||(D[2]=R=>$.$emit("update:modelValue",!1))}),e(M,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:B,disable:n.value||!V.value,loading:n.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Uv=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),jv={class:"row items-center no-wrap"},Ev={class:"col-auto"},Qo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=G(()=>o.item.quantity*o.item.cost),b=_=>{_.stopPropagation(),_.preventDefault()},p=_=>{o.modelValue&&(_.key==="Enter"?(n(),b(_)):_.key==="Escape"&&(i("update:modelValue",!1),b(_)))};xe(()=>{window.addEventListener("keydown",p)}),$t(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item});const g=()=>{};return(_,y)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":y[6]||(y[6]=x=>_.$emit("update:modelValue",x)),onBeforeShow:g},{default:a(()=>[e(de,null,{default:a(()=>[e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",jv,[y[7]||(y[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Ev,[e(M,{flat:"",size:"sm",round:"",icon:"close",onClick:y[0]||(y[0]=x=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[e(re,{modelValue:c.item.product_name,"onUpdate:modelValue":y[1]||(y[1]=x=>c.item.product_name=x),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Be,{modelValue:c.item.quantity,"onUpdate:modelValue":y[2]||(y[2]=x=>c.item.quantity=x),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Be,{modelValue:c.item.cost,"onUpdate:modelValue":y[3]||(y[3]=x=>c.item.cost=x),label:"Modal / Harga Beli","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Be,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=x=>f.value=x),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(re,{modelValue:c.item.notes,"onUpdate:modelValue":y[5]||(y[5]=x=>c.item.notes=x),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(lt,{align:"right"},{default:a(()=>[ae(e(M,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),ae(e(M,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Av=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),Mv={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ee,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10"),t("td",null,"Pembayaran")])])],-1)])),_:1}),e(lt,{align:"center"},{default:a(()=>[ae(e(M,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Jo=kt(Mv,[["__scopeId","data-v-a7905738"]]),Nv=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),Bv={class:"row items-center no-wrap"},Fv={class:"col text-subtite text-bold text-grey-8"},zv={class:"col-auto"},Go={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=d=>{d.stopPropagation(),d.preventDefault()},b=d=>{o.modelValue&&(d.key==="Enter"?(n(),f(d)):d.key==="Escape"&&(i("update:modelValue",!1),f(d)))};return xe(()=>{window.addEventListener("keydown",b)}),$t(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(d,g)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>d.$emit("update:modelValue",_))},{default:a(()=>[e(de,null,{default:a(()=>[e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",Bv,[t("div",Fv," Edit "+r(c.data.code),1),t("div",zv,[e(M,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>d.$emit("update:modelValue",!1))})])])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[e(Ze,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(re,{modelValue:d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(re,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(lt,{align:"right"},{default:a(()=>[ae(e(M,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),ae(e(M,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Lv=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"})),Hv={key:0},Kv={style:{float:"right"}},Yv={key:1},Wv={style:{float:"right"}},Qv={key:2},Jv={style:{float:"right"}},Gv={key:3},Xv={style:{float:"right"}},Zv={style:{float:"right"}},e_={class:"q-gutter-sm"},t_={class:"q-my-md"},a_={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ee,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(u(),h("tr",Hv,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Kv,r(l(L)(c.payment.total)),1)])]),c.payment.cash_amount?(u(),h("tr",Yv,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",Wv,r(l(L)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(u(),h("tr",Qv,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",Jv,r(l(L)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(u(),h("tr",Gv,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Xv,r(l(L)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Zv,r(l(L)(c.payment.change)),1)])])])])]),_:1}),e(lt,{align:"center"},{default:a(()=>[t("div",e_,[e(M,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(M,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",t_,[e(M,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Xo=kt(a_,[["__scopeId","data-v-31d340fd"]]),l_=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),o_={class:"q-gutter-sm"},n_={class:"row items-center"},s_={class:"text-weight-bold"},r_={class:"row q-col-gutter-none full-width"},i_={class:"col-sm-6 col-12 col q-pa-sm"},d_={class:"row full-width"},u_={class:"col-sm-6 col-12 q-pa-sm"},m_={class:"row q-ml-sm items-end"},c_={class:"row col grow"},p_={class:"col-12 q-px-sm column"},f_={class:"row items-start q-col-gutter-none q-px-sm"},g_={key:0,class:"col"},b_={class:"text-caption text-grey-6 q-mt-xs"},v_={key:0,class:"text-caption text-grey-8 q-mt-xs"},__={class:"text-italic"},y_={key:1,class:"col"},k_={class:"text-grey-8"},w_={class:"col"},h_={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},$_={class:"text-h4 text-weight-bold"},x_={class:"row q-px-sm q-col-gutter-sm q-py-xs"},S_={class:"col"},V_={__name:"Editor",setup(c){const s=he(),m=fe(),o=T(!0),i=T(null),n=T(null),f=T(null),b=T(!1),p=T(null),d=T(null),{isFullscreen:g,toggleFullscreen:_}=wa(d),y=m.props.data.code,x=T(m.props.data.supplier),S=T(null),C=T(""),j=T(!1),z=T(!1),V=T(!1),E=T(!1),I=T(!1),O=T(!1),B=T(null),w=Ee({id:m.props.data.id,code:m.props.data.code,supplier_id:m.props.data.supplier_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),$=G(()=>w.items.reduce((ne,J)=>ne+J.cost*J.quantity,0)),D=()=>{var ne;_(),g.value||(ne=p==null?void 0:p.value)==null||ne.hideDrawer()},R=ne=>isNaN(ne)||ne<=0?(vt("Kuantitas tidak valid.","top"),!1):!0,P=ne=>isNaN(ne)||ne<0?(vt("Harga tidak valid.","top"),!1):!0,A=ne=>!ne||ne.length==0?(vt("Barcode tidak valid.","top"),!1):!0,N=ne=>{var J;(J=C.value)!=null&&J.endsWith("*")?C.value+=ne.name:C.value=ne.name},oe=async()=>{if(j.value)return;const ne=C.value.trim();if(ne.length===0){V.value=!0;return}const J=ne.split("*");let ie=1,Z="",pe=null;if(J.length===1)Z=J[0];else if(J.length<=3)ie=parseInt(J[0]),Z=J[1],J.length===3&&(pe=parseFloat(J[2]));else{vt("Input tidak valid.","top");return}if(Z.length===0){V.value=!0;return}!A(Z)&&!R(ie)&&!P(pe)||(j.value=!0,await Ue.post(route("admin.purchase-order.add-item"),{order_id:w.id,product_code:Z,qty:ie,cost:pe,merge:o.value}).then(Pe=>{const $e=Pe.data.data.item;let _t=-1;Pe.data.data.mergeItem&&(_t=w.items.findIndex(xt=>xt.id===$e.id)),_t===-1?w.items.push($e):w.items[_t]=$e,C.value="",pe!==null&&pe!==parseFloat($e.cost)&&vt("Harga tidak dapat diubah!","top")}).catch(Pe=>{var $e,_t;ft((_t=($e=Pe.response)==null?void 0:$e.data)==null?void 0:_t.message,"top"),console.error("Gagal mengambil data produk:",Pe)}),j.value=!1,bt(()=>{var Pe;(Pe=i.value)==null||Pe.focus()}))},ge=ne=>{B.value=Object.create(ne),E.value=!0},_e=ne=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ne.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{j.value=!0,Ue.post(route("admin.purchase-order.remove-item"),{id:ne.id}).then(()=>{const J=w.items.findIndex(ie=>ie.id===ne.id);J!==-1&&(w.items.splice(J,1)[0],gt("Item telah dihapus","top"))}).catch(J=>{var ie,Z;ft(((Z=(ie=J==null?void 0:J.response)==null?void 0:ie.data)==null?void 0:Z.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(J)}).finally(()=>{j.value=!1})})},ue=()=>{j.value=!0;const ne=n.value.getCurrentItem(),J={id:ne.id,qty:ne.quantity,cost:ne.cost};ne.notes&&(J.notes=ne.notes),Ue.post(route("admin.purchase-order.update-item"),J).then(ie=>{const Z=ie.data.data,pe=w.items.findIndex(Pe=>Pe.id===Z.id);pe!==-1&&(w.items[pe]=Z,gt("Item telah diperbarui","top"))}).catch(ie=>{var Z,pe;ft(((pe=(Z=ie==null?void 0:ie.response)==null?void 0:Z.data)==null?void 0:pe.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(ie)}).finally(()=>{j.value=!1})};xe(()=>{const ne=J=>{var ie;J.key==="F1"?(J.preventDefault(),b.value=!0):J.key==="F2"?(J.preventDefault(),f.value.focus()):J.key==="F3"?(J.preventDefault(),(ie=i.value)==null||ie.focus()):J.key==="F4"?(J.preventDefault(),o.value=!o.value):J.key==="F10"?(J.preventDefault(),z.value=!0):J.key==="F11"?(J.preventDefault(),D()):(J.key==="F5"||J.key==="F6"||J.key==="F7"||J.key==="F12")&&J.preventDefault()};document.addEventListener("keydown",ne),$t(()=>{document.removeEventListener("keydown",ne)}),bt(()=>{var J;(J=p==null?void 0:p.value)==null||J.hideDrawer()})});const Ie=async ne=>{var J;x.value=ne,w.supplier_id=ne==null?void 0:ne.id,await ke(),ne!=null&&ne.id?(J=i.value)==null||J.focus():f.value.focus()},ke=async()=>{j.value=!0;const ne={id:w.id,supplier_id:w.supplier_id,datetime:Zt(w.datetime),notes:w.notes};await Ue.post(route("admin.purchase-order.update"),ne).then(J=>{const ie=J.data.data.id;w.supplier_id=ie.supplier_id}).catch(J=>{var ie,Z;ft(((Z=(ie=J==null?void 0:J.response)==null?void 0:ie.data)==null?void 0:Z.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(J)}).finally(()=>{j.value=!1})},X=ne=>{if(w.items.length===0){gt("Item masih kosong","top");return}const J={id:w.id,...ne};j.value=!0,Ue.post(route("admin.purchase-order.close"),J).then(ie=>{gt("Transaksi selesai"),K.visit(route("admin.purchase-order.detail",{id:w.id}))}).catch(ie=>{var Z,pe;ft((pe=(Z=ie.response)==null?void 0:Z.data)==null?void 0:pe.message),console.error(ie)}).finally(()=>{j.value=!1})},te=()=>{Vt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${w.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.purchase-order.cancel",{id:w.id}),{id:w.id}).then(()=>{gt("Transaksi telah dibatalkan."),K.visit(route("admin.purchase-order.detail",{id:w.id}))}).catch(ne=>{var ie,Z;const J=((Z=(ie=ne.response)==null?void 0:ie.data)==null?void 0:Z.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:J,color:"warning",position:"bottom"}),console.error(ne)})})},we=()=>{window.open(route("admin.purchase-order.detail",{id:w.id})+"?preview=1","_blank")};return(ne,J)=>{const ie=W("i-head"),Z=W("authenticated-layout");return u(),h(H,null,[e(ie,{title:l(y)},null,8,["title"]),e(Z,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[v(r(l(y)),1)]),"left-button":a(()=>[t("div",o_,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:J[0]||(J[0]=pe=>l(K).get(ne.route("admin.purchase-order.index")))})])]),"right-button":a(()=>[t("div",n_,[l(s).screen.gt.sm?(u(),h(H,{key:0},[t("div",s_,r(l(m).props.auth.user.username),1),J[23]||(J[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ka)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 column fit"},{default:a(()=>[e(de,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",r_,[t("div",i_,[t("div",d_,[e(Bo,{ref_key:"supplierAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:x.value,"onUpdate:modelValue":J[2]||(J[2]=pe=>x.value=pe),label:"Pemasok",disable:j.value,onSupplierSelected:Ie,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),x.value?(u(),U(xa,{key:0,party:x.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",u_,[e($a,{ref_key:"userInputRef",ref:i,modelValue:C.value,"onUpdate:modelValue":J[3]||(J[3]=pe=>C.value=pe),onKeyup:J[4]||(J[4]=Yt(Q(pe=>oe(),["prevent"]),["enter"])),onScanSuccess:J[5]||(J[5]=pe=>oe()),onSend:J[6]||(J[6]=pe=>oe()),onSearch:J[7]||(J[7]=pe=>V.value=!0),loading:j.value,disable:j.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",m_,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":J[8]||(J[8]=pe=>o.value=pe),label:"Gabungkan item",disable:j.value},null,8,["modelValue","disable"])])])]),t("div",c_,[t("div",p_,[e(Yo,{items:w.items,onUpdateQuantity:J[9]||(J[9]=({id:pe,value:Pe})=>ne.updateQuantity(pe,Pe)),onRemoveItem:_e,onEditItem:ge,"is-processing":j.value},null,8,["items","is-processing"])])]),t("div",f_,[l(s).screen.gt.sm?(u(),h("div",g_,[t("div",b_,r(w.items.length)+" item(s) ",1),w.notes?(u(),h("div",v_,[J[24]||(J[24]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",__,[e(Se,{text:w.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(u(),h("div",y_,[t("div",k_,[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),v(r(w.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(w.datetime)),1)])])])):k("",!0),t("div",w_,[t("div",h_,[J[26]||(J[26]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",$_,[J[25]||(J[25]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(L)($.value)),1)])])])]),t("div",x_,[t("div",S_,[e(M,{class:"full-width",label:"Bayar",color:"primary",icon:"payment",onClick:J[10]||(J[10]=pe=>z.value=!0),disable:!ne.$can("admin.purchase-order.close")||j.value||w.items.length===0||w.status!=="draft",loading:j.value},null,8,["disable","loading"])]),t("div",null,[e(M,{icon:"more_vert",color:"grey",onClick:J[14]||(J[14]=Q(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[ae((u(),U(le,{clickable:"",onClick:J[11]||(J[11]=Q(pe=>I.value=!0,["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>J[27]||(J[27]=[v("Edit Rincian")])),_:1})]),_:1})),[[se],[me]]),ae((u(),U(le,{clickable:"",onClick:J[12]||(J[12]=Q(pe=>we(),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"preview"})]),_:1}),e(F,null,{default:a(()=>J[28]||(J[28]=[v("Pratinjau")])),_:1})]),_:1})),[[se],[me]]),ae((u(),U(le,{clickable:"",onClick:J[13]||(J[13]=Q(pe=>te(),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:a(()=>J[29]||(J[29]=[v(" Batalkan ")])),_:1})]),_:1})),[[se],[me]]),e(Re)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Qo,{ref_key:"itemEditorRef",ref:n,modelValue:E.value,"onUpdate:modelValue":J[15]||(J[15]=pe=>E.value=pe),item:B.value,onSave:J[16]||(J[16]=pe=>ue()),"is-processing":j.value},null,8,["modelValue","item","is-processing"]),e(Wo,{modelValue:z.value,"onUpdate:modelValue":J[17]||(J[17]=pe=>z.value=pe),onAccepted:X,form:w,supplier:x.value,total:$.value,accounts:l(m).props.accounts},null,8,["modelValue","form","supplier","total","accounts"]),e(ha,{modelValue:V.value,"onUpdate:modelValue":J[18]||(J[18]=pe=>V.value=pe),"show-cost":!0,onProductSelected:N},null,8,["modelValue"]),e(Go,{modelValue:I.value,"onUpdate:modelValue":J[19]||(J[19]=pe=>I.value=pe),data:w,onSave:J[20]||(J[20]=pe=>ke()),"is-processing":j.value},null,8,["modelValue","data","is-processing"]),e(Jo,{modelValue:b.value,"onUpdate:modelValue":J[21]||(J[21]=pe=>b.value=pe)},null,8,["modelValue"]),e(Xo,{modelValue:O.value,"onUpdate:modelValue":J[22]||(J[22]=pe=>O.value=pe),order:w,supplier:x.value,total:$.value,payment:S.value},null,8,["modelValue","order","supplier","total","payment"])]),_:1})]),_:1},512)],64)}}},q_=Object.freeze(Object.defineProperty({__proto__:null,default:V_},Symbol.toStringTag,{value:"Module"})),Zo={__name:"PurchaseOrderStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.PURCHASE_ORDER_STATUSES,m={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(u(),U(Ft,{status:c.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}},en={__name:"PurchaseOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES,m={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(u(),U(Ft,{status:c.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}};const C_={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},T_={class:"q-pa-xs"},P_={class:"full-width row flex-center text-grey-8 q-gutter-sm"},R_={key:0},O_={key:1},D_={key:2},I_={key:0},U_={key:0},j_={key:1},E_={class:"flex justify-end"},Dl="Pembelian",A_={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=po();fo(),[`${p}`,...go(p-2,p-1).reverse()],[...bo()];const d=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.PURCHASE_ORDER_STATUSES)],g=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES)],_=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES)],y=De().startOf("month").toDate(),x=De().endOf("month").toDate(),S=Ee({search:"",status:"all",payment_status:"all",delivery_status:"all",start_date:y,end_date:x,...He()}),C=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),j=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"supplier_id",label:"Pemasok",field:"supplier_id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp.)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{B()});const z=D=>{if(D.status=="draft"){V(D);return}E(D)},V=D=>{K.get(route("admin.purchase-order.edit",D.id))},E=D=>{K.get(route("admin.purchase-order.detail",D.id))},I=D=>{Vt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${D.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.purchase-order.cancel",{id:D.id}),{id:D.id}).then(R=>{const P=R.data.data,A=o.value.findIndex(N=>N.id===P.id);if(A===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[A].status="canceled",s.notify({message:R.data.message,position:"bottom"})}).catch(R=>{var A,N;const P=((N=(A=R.response)==null?void 0:A.data)==null?void 0:N.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:P,color:"warning",position:"bottom"}),console.error(R)})})},O=D=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${D.code}?`,url:route("admin.purchase-order.delete",D.id),fetchItemsCallback:B,loading:i}),B=(D=null)=>{const R={...S,start_date:De(S.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:De(S.end_date).format("YYYY-MM-DD HH:mm:ss")};Ke({pagination:C,filter:R,props:D,rows:o,url:route("admin.purchase-order.data"),loading:i,tableRef:n})},w=()=>{B()},$=G(()=>s.screen.gt.sm?j:j.filter(D=>D.name==="id"||D.name==="action"));return(D,R)=>{const P=W("i-head"),A=W("authenticated-layout");return u(),h(H,null,[e(P,{title:Dl}),e(A,null,ze({title:a(()=>[v(r(Dl))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:R[0]||(R[0]=N=>m.value=!m.value)},null,8,["icon"]),D.$can("admin.purchase-order.edit")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:R[1]||(R[1]=N=>l(K).get(D.route("admin.purchase-order.add")))})):k("",!0)]),default:a(()=>[t("div",T_,[e(Me,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:C.value,"onUpdate:pagination":R[11]||(R[11]=N=>C.value=N),filter:S.search,loading:i.value,columns:$.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(b)}),onRequest:B,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:N,message:oe,filter:ge})=>[t("div",P_,[t("span",null,r(oe)+" "+r(ge?" with term "+ge:""),1)])]),body:a(N=>[e(Oe,{props:N,class:"cursor-pointer",onClick:Q(oe=>z(N.row),["prevent"])},{default:a(()=>[e(Y,{key:"id",props:N,class:"wrap-column"},{default:a(()=>[t("div",null,[e(q,{name:"tag"}),v(" "+r(N.row.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(N.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[N.row.supplier?(u(),h("div",R_,[e(q,{name:"person",class:"inline-icon"}),e(ba,{href:D.route("admin.supplier.detail",{id:N.row.supplier.id}),onClick:R[8]||(R[8]=Q(()=>{},["stop"]))},{default:a(()=>[v(" "+r(N.row.supplier.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Total: Rp. "+r(l(L)(N.row.grand_total)),1),N.row.balance!=0?(u(),h("div",O_," Saldo: Rp. "+r(l(St)(N.row.balance)),1)):k("",!0),N.row.notes?(u(),h("div",D_,[e(q,{name:"notes"}),v(" "+r(N.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Zo,{status:N.row.status},null,8,["status"]),N.row.status=="closed"?(u(),h(H,{key:0},[e(en,{status:N.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]),_:2},1032,["props"]),e(Y,{key:"supplier_id",props:N},{default:a(()=>[N.row.supplier?(u(),h("div",I_,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),v(" "+r(N.row.supplier_name),1)]),N.row.supplier_phone?(u(),h("div",U_,[e(q,{name:"phone",class:"inline-icon"}),v(" "+r(N.row.supplier_phone),1)])):k("",!0),N.row.supplier_address?(u(),h("div",j_,[e(q,{name:"home_pin",class:"inline-icon"}),v(" "+r(N.row.supplier_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:N},{default:a(()=>[v(r(l(L)(N.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:N},{default:a(()=>[v(r(l(St)(N.row.balance)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:N},{default:a(()=>[e(Se,{text:N.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:N,onClick:R[10]||(R[10]=Q(()=>{},["stop"]))},{default:a(()=>[t("div",E_,[D.$can("admin.purchase-order.detail")||D.$can("admin.purchase-order.edit")||D.$can("admin.purchase-order.cancel")||D.$can("admin.purchase-order.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:R[9]||(R[9]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[N.row.status!="draft"&&D.$can("admin.purchase-order.detail")?ae((u(),U(le,{key:0,onClick:Q(oe=>E(N.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"visibility"})]),_:1}),e(F,null,{default:a(()=>R[12]||(R[12]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),N.row.status=="draft"&&D.$can("admin.purchase-order.edit")?ae((u(),U(le,{key:1,onClick:Q(oe=>V(N.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>R[13]||(R[13]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),N.row.status=="draft"&&D.$can("admin.purchase-order.cancel")?ae((u(),U(le,{key:2,onClick:Q(oe=>I(N.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"cancel"})]),_:1}),e(F,null,{default:a(()=>R[14]||(R[14]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),e(Re),D.$can("admin.purchase-order.delete")?ae((u(),U(le,{key:3,onClick:Q(oe=>O(N.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>R[15]||(R[15]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",C_,[e(Ze,{modelValue:S.start_date,"onUpdate:modelValue":[R[2]||(R[2]=N=>S.start_date=N),w],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Ze,{modelValue:S.end_date,"onUpdate:modelValue":[R[3]||(R[3]=N=>S.end_date=N),w],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:S.status,"onUpdate:modelValue":[R[4]||(R[4]=N=>S.status=N),w],options:d,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:S.payment_status,"onUpdate:modelValue":[R[5]||(R[5]=N=>S.payment_status=N),w],options:g,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:S.search,"onUpdate:modelValue":R[7]||(R[7]=N=>S.search=N),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},M_=Object.freeze(Object.defineProperty({__proto__:null,default:A_},Symbol.toStringTag,{value:"Module"})),N_={class:"q-pa-xs"},B_={class:"row items-center full-width"},F_={class:"col text-left text-bold text-grey-9"},z_={key:1,class:"q-pa-md"},L_={class:"text-h6 text-primary q-mb-md"},Il="Laporan",H_={__name:"Index",setup(c){he();const s=T("sales"),m=G(()=>!0),o={sales:{label:"Penjualan",icon:"o_payments",reports:[{title:"Keuntungan Penjualan",subtitle:"Daftar penjualan berikut laba kotor",icon:"analytics",route:"admin.report.sales-order.gross-profit"}]},purchasing:{label:"Pembelian",icon:"o_shopping_cart",reports:[{title:"Rincian Pembelian",subtitle:"Daftar rincian pembelian",icon:"o_receipt_long",route:"admin.report.purchase-order.detail"}]},inventory:{label:"Inventori",icon:"inventory",reports:[{title:"Produk",subtitle:"Daftar produk",icon:"inventory",route:"admin.report.product.index"}]},customer:{label:"Pelanggan",icon:"o_groups",reports:[{title:"Daftar Pelanggan",subtitle:"Laporan daftar pelanggan",icon:"o_groups",route:"admin.report.customer.index"}]},supplier:{label:"Supplier",icon:"o_groups",reports:[{title:"Daftar Supplier",subtitle:"Laporan daftar supplier",icon:"o_groups",route:"admin.report.supplier.index"}]}},i=[{id:"sales",...o.sales},{id:"purchasing",...o.purchasing},{id:"inventory",...o.inventory},{id:"customer",...o.customer},{id:"supplier",...o.supplier}];return(n,f)=>{const b=W("i-head"),p=W("authenticated-layout");return u(),h(H,null,[e(b,{title:Il}),e(p,null,{title:a(()=>[v(r(Il))]),default:a(()=>[t("div",N_,[e(de,{flat:"",bordered:"",class:"report-container full-width"},{default:a(()=>[e(Tt,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=d=>s.value=d),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary","inline-label":"","mobile-arrows":"",align:"justify",ign:"left","switch-indicator":"",breakpoint:0},{default:a(()=>[(u(),h(H,null,je(i,d=>e(dt,{key:d.id,name:d.id},{default:a(()=>[t("div",B_,[m.value?k("",!0):(u(),U(q,{key:0,name:d.icon,class:"q-mr-md"},null,8,["name"])),t("div",F_,r(d.label),1),d.count?(u(),U(it,{key:1,color:"grey-5","text-color":"dark",rounded:"",label:d.count,class:"q-ml-sm"},null,8,["label"])):k("",!0)])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"]),e(Pt,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=d=>s.value=d),animated:"",class:"q-pa-none"},{default:a(()=>[(u(),h(H,null,je(i,d=>e(ut,{key:d.id,name:d.id,class:"q-pa-none"},{default:a(()=>[e(Ae,{separator:""},{default:a(()=>[d.reports&&d.reports.length>0?(u(!0),h(H,{key:0},je(d.reports,(g,_)=>ae((u(),U(le,{key:_,clickable:"",class:"q-py-md",onClick:Q(y=>l(K).get(n.route(g.route)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:g.icon,size:"28px",color:"grey"},null,8,["name"])]),_:2},1024),e(F,null,{default:a(()=>[e(be,{class:"text-weight-bold text-dark"},{default:a(()=>[v(r(g.title),1)]),_:2},1024),e(be,{caption:""},{default:a(()=>[v(r(g.subtitle),1)]),_:2},1024)]),_:2},1024),e(F,{side:""},{default:a(()=>[e(q,{name:"chevron_right",color:"grey"})]),_:1})]),_:2},1032,["onClick"])),[[se]])),128)):(u(),h("div",z_,[t("div",L_," Laporan "+r(d.label),1),f[2]||(f[2]=t("p",null," Saat ini tidak ada daftar laporan spesifik yang ditampilkan di kategori ini. ",-1))]))]),_:2},1024)]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})])]),_:1})],64)}}},K_=kt(H_,[["__scopeId","data-v-fd964b5f"]]),Y_=Object.freeze(Object.defineProperty({__proto__:null,default:K_},Symbol.toStringTag,{value:"Module"})),W_={class:"col col-md-8"},Q_={class:"q-col-gutter-sm row"},J_={class:"col-xs-12 col-md-7"},G_={class:"text-subtitle2 text-bold text-grey-8"},X_={class:"text-subtitle2 text-bold text-grey-8"},Z_={class:"text-subtitle2 text-bold text-grey-8"},ey={key:0,class:"row q-mt-md"},ty={class:"text-subtitle2 text-bold text-grey-8"},ay={class:"col-xs-12 col-md-5"},ly={class:"q-my-sm"},oy={class:"q-my-sm"},ny={class:"q-my-sm"},Sa={__name:"ReportGeneratorLayout",props:{primaryColumns:{type:Array,required:!0},optionalColumns:{type:Array,default:()=>[]},initialColumns:{type:Array,required:!0},initialFilter:{type:Object,default:()=>({})},initialSortOptions:{type:Array,default:()=>[]}},emits:["submit"],setup(c,{expose:s,emit:m}){const o=he(),i=c,n=G(()=>[...i.primaryColumns,...i.optionalColumns]),f=G(()=>i.primaryColumns.map(z=>z.value)),b=[{value:"auto",label:"Otomatis"},{value:"portrait",label:"Potret"},{value:"landscape",label:"Lansekap"}],p=()=>({columns:i.initialColumns,filter:JSON.parse(JSON.stringify(i.initialFilter)),sortOptions:JSON.parse(JSON.stringify(i.initialSortOptions)),orientation:"auto"}),d=T(p()),g=()=>{d.value=p(),o.notify({message:"Opsi laporan direset ke nilai awal.",timeout:1500})},_=({index:z,value:V})=>{if(f.value.includes(V)){const B=i.primaryColumns.find(w=>w.value===V);return o.notify({type:"negative",message:`Kolom (${B.label}) tidak boleh dihapus.`,timeout:2e3}),!1}const E=d.value.sortOptions.length;d.value.sortOptions=d.value.sortOptions.filter(B=>B.column!==V);const I=d.value.sortOptions.length;return E-I>0&&d.value.sortOptions.length===0&&S(),!0},y=z=>{if(d.value.columns.length===0){o.notify({type:"negative",message:"Kolom belum dipilih.",timeout:2e3});return}x("submit",{format:z,form:d.value})},x=m,S=()=>{const V=d.value.sortOptions.length,E=d.value.columns.length;if(V>=3){o.notify({type:"warning",message:"Maksimal hanya 3 opsi pengurutan yang diperbolehkan.",timeout:2e3});return}if(V>=E){o.notify({type:"warning",message:`Jumlah opsi pengurutan tidak boleh melebihi jumlah kolom yang dipilih (${E}).`,timeout:2500});return}const I=d.value.sortOptions.map(B=>B.column),O=n.value.find(B=>!I.includes(B.value));O?d.value.sortOptions.push({column:O.value,order:"asc"}):o.notify({type:"warning",message:"Tidak ada kolom unik yang tersedia untuk pengurutan.",timeout:2500})},C=z=>{d.value.sortOptions.splice(z,1)},j=G(()=>z=>{const V=d.value.sortOptions.slice(0,z).map(E=>E.column);return V.push(...d.value.sortOptions.slice(z+1).map(E=>E.column)),n.value.filter(E=>{var O;const I=(O=d.value.sortOptions[z])==null?void 0:O.column;return E.value===I||!V.includes(E.value)})});return s({form:d,submit:y,reset:g,columnOptions:n}),(z,V)=>(u(),U(Te,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",W_,[t("div",Q_,[t("div",J_,[e(de,{square:"",flat:"",bordered:"",class:"full-width q-mb-sm"},{default:a(()=>[e(ee,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",G_,[e(q,{name:"data_table",size:"xs",class:"q-mr-sm"}),V[6]||(V[6]=v(" Kolom "))])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(ce,{label:"Pilih Kolom",modelValue:d.value.columns,"onUpdate:modelValue":V[0]||(V[0]=E=>d.value.columns=E),options:n.value,"map-options":"","emit-value":"",multiple:"",clearable:"","use-chips":"",onRemove:_,onClear:V[1]||(V[1]=E=>d.value.columns=f.value.slice()),rules:[E=>E&&E.length>0||"Pilih minimal satu kolom"],"hide-bottom-space":""},{"selected-item":a(E=>[e(ea,{removable:!f.value.includes(E.opt.value),onRemove:I=>_(E.opt)&&E.removeAtIndex(E.index),dense:""},{default:a(()=>[v(r(E.opt.label),1)]),_:2},1032,["removable","onRemove"])]),_:1},8,["modelValue","options","rules"])])]),_:1})]),_:1}),e(de,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ee,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",X_,[e(q,{name:"filter_alt",size:"xs",class:"q-mr-sm"}),V[7]||(V[7]=v(" Filter "))])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[Ct(z.$slots,"filter",{form:d.value})]),_:3})]),_:3}),e(de,{square:"",flat:"",bordered:"",class:"full-width q-mt-sm"},{default:a(()=>[e(ee,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",Z_,[e(q,{name:"sort",size:"xs",class:"q-mr-sm"}),V[8]||(V[8]=v(" Urutkan "))])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[(u(!0),h(H,null,je(d.value.sortOptions,(E,I)=>(u(),h("div",{key:I,class:"row q-col-gutter-sm q-mb-sm items-center"},[e(ce,{modelValue:E.column,"onUpdate:modelValue":O=>E.column=O,class:"col-grow",style:{"min-width":"150px"},options:j.value(I),"map-options":"",dense:"","emit-value":"",label:I+1+" - Urut berdasarkan"},null,8,["modelValue","onUpdate:modelValue","options","label"]),e(M,{icon:E.order==="asc"?"arrow_upward":"arrow_downward",color:"grey-8",flat:"",round:"",dense:"",onClick:O=>E.order=E.order==="asc"?"desc":"asc",class:"q-ml-sm",size:"sm"},{default:a(()=>[e(Ot,null,{default:a(()=>[v(" Urutkan: "+r(E.order==="asc"?"Terkecil ke Terbesar":"Terbesar ke Terkecil"),1)]),_:2},1024)]),_:2},1032,["icon","onClick"]),d.value.sortOptions.length>1?(u(),U(M,{key:0,icon:"delete",color:"red",flat:"",round:"",dense:"",onClick:O=>C(I),class:"q-ml-xs",size:"sm"},{default:a(()=>[e(Ot,null,{default:a(()=>V[9]||(V[9]=[v("Hapus Opsi Urutan")])),_:1})]),_:2},1032,["onClick"])):k("",!0)]))),128)),d.value.sortOptions.length<3&&d.value.sortOptions.length<d.value.columns.length?(u(),h("div",ey,[e(M,{label:"Tambah Opsi Pengurutan",icon:"add",color:"blue-grey",flat:"",dense:"",size:"sm",onClick:S})])):k("",!0)]),_:1})]),_:1}),e(de,{square:"",flat:"",bordered:"",class:"full-width q-mt-sm"},{default:a(()=>[e(ee,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",ty,[e(q,{name:"rotate_right",size:"xs",class:"q-mr-sm"}),V[10]||(V[10]=v(" Halaman "))])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",null,[e(ce,{label:"Orientasi",modelValue:d.value.orientation,"onUpdate:modelValue":V[2]||(V[2]=E=>d.value.orientation=E),options:b,"map-options":"","emit-value":""},null,8,["modelValue"])])]),_:1})]),_:1})]),t("div",ay,[e(de,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(ee,{class:"q-py-sm q-px-md"},{default:a(()=>[t("div",ly,[e(M,{label:"Cetak",class:"full-width",color:"primary",icon:"print",onClick:V[3]||(V[3]=E=>y("html"))})]),t("div",oy,[e(M,{label:"Unduh PDF",class:"full-width",color:"red",icon:"picture_as_pdf",onClick:V[4]||(V[4]=E=>y("pdf"))})]),t("div",ny,[e(M,{label:"Reset",class:"full-width",color:"grey",icon:"refresh",onClick:V[5]||(V[5]=E=>g())})])]),_:1})]),_:1})])])])]),_:3}))}},sy=Object.freeze(Object.defineProperty({__proto__:null,default:Sa},Symbol.toStringTag,{value:"Module"})),Fa={__name:"BackButton",props:{route:{type:String,default:"",required:!0}},setup(c){const s=c;return(m,o)=>(u(),U(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=i=>m.$inertia.get(s.route))}))}},ry={class:"q-gutter-sm"},Ul="Laporan Pelanggan",iy={__name:"Index",setup(c){const s=he(),m=fe(),o=Fe(m.props.primary_columns),i=Fe(m.props.optional_columns),n=m.props.initial_columns;console.log(m.props);const f=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],b=[{value:"all",label:"Semua"},{value:"general",label:"Umum"},{value:"staff",label:"Staff"},{value:"category_1",label:"Kategori 1"},{value:"category_2",label:"Kategori 2"},{value:"category_3",label:"Kategori 3"}],p=[{value:"all",label:"Semua"},{value:"price_1",label:"Harga Eceran"},{value:"price_2",label:"Harga Partai"},{value:"price_3",label:"Harga Grosir"}],d={status:"active",type:"all",default_price_type:"all"},g=[{column:"code",order:"asc"}],_=T(null),y=({format:x,form:S})=>{const C={...S,format:x};try{const j=route("admin.report.customer.generate",C);window.open(j,"_blank"),x!=="html"&&s.notify({type:"positive",message:`Laporan ${x.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(j){s.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",j)}};return(x,S)=>{const C=W("i-head"),j=W("authenticated-layout");return u(),h(H,null,[e(C,{title:Ul}),e(j,null,{title:a(()=>[v(r(Ul))]),"left-button":a(()=>[t("div",ry,[e(Fa,{route:x.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>S[0]||(S[0]=[])),default:a(()=>[e(Sa,{ref_key:"reportGeneratorRef",ref:_,primaryColumns:l(o),optionalColumns:l(i),initialColumns:l(n),initialFilter:d,initialSortOptions:g,onSubmit:y},{filter:a(({form:z})=>[e(ce,{label:"Status",modelValue:z.filter.status,"onUpdate:modelValue":V=>z.filter.status=V,options:f,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ce,{label:"Level Harga",modelValue:z.filter.default_price_type,"onUpdate:modelValue":V=>z.filter.default_price_type=V,options:p,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ce,{label:"Jenis Akun",modelValue:z.filter.type,"onUpdate:modelValue":V=>z.filter.type=V,options:b,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["primaryColumns","optionalColumns","initialColumns"])]),_:1})],64)}}},dy=Object.freeze(Object.defineProperty({__proto__:null,default:iy},Symbol.toStringTag,{value:"Module"})),uy={class:"q-gutter-sm"},jl="Laporan Produk",my={__name:"Index",setup(c){const s=he(),m=fe(),o=Fe(m.props.primary_columns),i=Fe(m.props.optional_columns),n=m.props.initial_columns,{filteredCategories:f,filterCategories:b}=_a(m.props.categories),{filteredSuppliers:p,filterSupplierFn:d}=ya(m.props.suppliers),g=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],_=Fe(window.CONSTANTS.PRODUCT_TYPES),y={status:"active",types:[],categories:[],suppliers:[]},x=[{column:"name",order:"asc"}],S=T(null),C=({format:j,form:z})=>{const V={...z,format:j};try{const E=route("admin.report.product.generate",V);window.open(E,"_blank"),j!=="html"&&s.notify({type:"positive",message:`Laporan ${j.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(E){s.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",E)}};return(j,z)=>{const V=W("i-head"),E=W("authenticated-layout");return u(),h(H,null,[e(V,{title:jl}),e(E,null,{title:a(()=>[v(r(jl))]),"left-button":a(()=>[t("div",uy,[e(Fa,{route:j.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>z[0]||(z[0]=[])),default:a(()=>[e(Sa,{ref_key:"reportGeneratorRef",ref:S,primaryColumns:l(o),optionalColumns:l(i),initialColumns:l(n),initialFilter:y,initialSortOptions:x,onSubmit:C},{filter:a(({form:I})=>[e(ce,{label:"Status",modelValue:I.filter.status,"onUpdate:modelValue":O=>I.filter.status=O,options:g,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"]),e(ce,{label:"Jenis",modelValue:I.filter.types,"onUpdate:modelValue":O=>I.filter.types=O,options:l(_),"map-options":"","emit-value":"",multiple:"","use-chips":"",clearable:""},null,8,["modelValue","onUpdate:modelValue","options"]),e(ce,{label:"Kategori",modelValue:I.filter.categories,"onUpdate:modelValue":O=>I.filter.categories=O,options:l(f),onFilter:l(b),"map-options":"","emit-value":"","use-input":"",clearable:"",multiple:"","use-chips":""},null,8,["modelValue","onUpdate:modelValue","options","onFilter"]),e(ce,{label:"Supplier",modelValue:I.filter.suppliers,"onUpdate:modelValue":O=>I.filter.suppliers=O,options:l(p),onFilter:l(d),"map-options":"","emit-value":"","use-input":"",clearable:"",multiple:"","use-chips":""},null,8,["modelValue","onUpdate:modelValue","options","onFilter"])]),_:1},8,["primaryColumns","optionalColumns","initialColumns"])]),_:1})],64)}}},cy=Object.freeze(Object.defineProperty({__proto__:null,default:my},Symbol.toStringTag,{value:"Module"})),py={class:"q-gutter-sm"},El="Laporan Supplier",fy={__name:"Index",setup(c){const s=he(),m=fe(),o=Fe(m.props.primary_columns),i=Fe(m.props.optional_columns),n=m.props.initial_columns,f=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],b={status:"active"},p=[{column:"code",order:"asc"}],d=T(null),g=({format:_,form:y})=>{const x={...y,format:_};try{const S=route("admin.report.supplier.generate",x);window.open(S,"_blank"),_!=="html"&&s.notify({type:"positive",message:`Laporan ${_.toUpperCase()} sedang diunduh.`,timeout:2e3})}catch(S){s.notify({type:"negative",message:"Gagal menghasilkan URL laporan. [ROUTE ERROR]",timeout:5e3}),console.error("Route error:",S)}};return(_,y)=>{const x=W("i-head"),S=W("authenticated-layout");return u(),h(H,null,[e(x,{title:El}),e(S,null,{title:a(()=>[v(r(El))]),"left-button":a(()=>[t("div",py,[e(Fa,{route:_.route("admin.report.index")},null,8,["route"])])]),"right-button":a(()=>y[0]||(y[0]=[])),default:a(()=>[e(Sa,{ref_key:"reportGeneratorRef",ref:d,primaryColumns:l(o),optionalColumns:l(i),initialColumns:l(n),initialFilter:b,initialSortOptions:p,onSubmit:g},{filter:a(({form:C})=>[e(ce,{label:"Status",modelValue:C.filter.status,"onUpdate:modelValue":j=>C.filter.status=j,options:f,"map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["primaryColumns","optionalColumns","initialColumns"])]),_:1})],64)}}},gy=Object.freeze(Object.defineProperty({__proto__:null,default:fy},Symbol.toStringTag,{value:"Module"})),by={class:"q-gutter-sm"},vy={class:"col col-md-6 q-pa-xs"},Al="Tambah Retur Penjualan",_y={__name:"Create",setup(c){const s=fe(),m=Je({code:s.props.data.code}),o=()=>rt({form:m,url:route("admin.sales-order-return.add")});return(i,n)=>{const f=W("i-head"),b=W("authenticated-layout");return u(),h(H,null,[e(f,{title:Al}),e(b,null,{title:a(()=>[v(r(Al))]),"left-button":a(()=>[t("div",by,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=p=>i.$inertia.get(i.route("admin.sales-order-return.index")))})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",vy,[e(Ge,{class:"row",onSubmit:Q(o,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[e(re,{autofocus:"",modelValue:l(m).code,"onUpdate:modelValue":n[1]||(n[1]=p=>l(m).code=p),modelModifiers:{trim:!0},label:"Kode Transaksi","lazy-rules":"",error:!!l(m).errors.code,disable:l(m).processing,"error-message":l(m).errors.code,rules:[p=>p&&p.length>0||"Kode Order harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"send",type:"submit",label:"Lanjutkan",color:"primary",disable:l(m).processing},null,8,["disable"]),e(M,{icon:"cancel",label:"Batal",disable:l(m).processing,onClick:n[2]||(n[2]=p=>l(K).get(i.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},yy=Object.freeze(Object.defineProperty({__proto__:null,default:_y},Symbol.toStringTag,{value:"Module"})),ky={class:"column"},wy={class:"bg-grey-2 q-pa-xs"},hy={class:"text-subtitle1 text-bold text-grey-10"},$y={class:"text-caption text-grey-8"},xy={class:"col-12 col-sm-6"},Sy={class:"full-width"},Vy={key:1},qy={key:0},Cy={key:1},Ty={class:"col-12 col-sm-6",align:"left"},Py={class:"full-width"},Ry={class:"full-width",style:{"border-collapse":"collapse"}},Oy={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Dy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Iy={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},Uy={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},jy={key:0},Ey={class:"col-12 col-sm-6"},Ay={class:"text-body2 text-grey-7 text-italic"},My={class:"col-12 col-sm-6"},Ny={class:"row justify-end q-gutter-y-xs"},By={class:"col-12 row justify-between"},Fy={class:"text-subtitle2 text-bold"},zy={class:"row justify-end q-gutter-y-xs"},Ly={class:"col-12 row justify-between"},Hy={class:"text-subtitle2 text-bold"},Ky={class:"row justify-end q-gutter-y-xs"},Yy={class:"col-12 row justify-between"},Wy={class:"text-subtitle2 text-bold"},tn={__name:"MainInfoTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=W("i-link"),n=W("my-link");return u(),h("div",ky,[e(ee,{class:"q-pa-none"},{default:a(()=>{var f,b;return[t("div",wy,[t("div",hy," RETUR #"+r(s.data.code),1),t("div",$y,[v(" Kasir: "+r((f=s.data.cashier)==null?void 0:f.username)+" - "+r((b=s.data.cashier)==null?void 0:b.name)+" | "+r(l(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(u(),h(H,{key:0},[v(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]}),_:1}),e(Re),e(ee,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",xy,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",Sy,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(u(),U(i,{key:0,href:m.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[e(q,{class:"inline-icon",name:"person"}),v(" "+r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])):(u(),h("div",Vy,[e(q,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(u(),h("tr",qy,[t("td",null,[e(q,{class:"inline-icon",name:"phone"}),v(" "+r(s.data.customer_phone),1)])])):k("",!0),s.data.customer_address?(u(),h("tr",Cy,[t("td",null,[e(q,{class:"inline-icon",name:"home_pin"}),v(" "+r(s.data.customer_address),1)])])):k("",!0)])])]),t("div",Ty,[o[10]||(o[10]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Retur",-1)),t("table",Py,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Order",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,[e(n,{href:m.route("admin.sales-order.detail",{id:s.data.sales_order_id})},{default:a(()=>[v(r(s.data.sales_order_id?s.data.sales_order.code:""),1)]),_:1},8,["href"])])]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Retur",-1)),o[7]||(o[7]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(s.data.status_label),1)]),t("tr",null,[o[8]||(o[8]=t("td",{class:"text-grey-7"},"Status Refund",-1)),o[9]||(o[9]=t("td",null,":",-1)),t("td",null,r(s.data.refund_status_label),1)])])])])]),_:1}),e(Re),e(ee,{class:"q-pa-sm"},{default:a(()=>[t("table",Ry,[o[12]||(o[12]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(u(!0),h(H,null,je(s.data.details,f=>(u(),h("tr",{key:f.id},[t("td",Oy,[e(i,{href:m.route("admin.product.detail",f.product_id)},{default:a(()=>[v(r(f.product_name),1)]),_:2},1032,["href"])]),t("td",Dy,r(l(L)(f.price)),1),t("td",Iy,r(f.quantity),1),t("td",Uy,r(l(L)(f.subtotal_price)),1)]))),128)),s.data.details.length==0?(u(),h("tr",jy,o[11]||(o[11]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Re),e(ee,{class:"row",align:"left"},{default:a(()=>[t("div",Ey,[o[13]||(o[13]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",Ay,r(s.data.notes?s.data.notes:"-"),1)]),t("div",My,[t("div",Ny,[t("div",By,[o[14]||(o[14]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",Fy,r(l(L)(s.data.grand_total)),1)])]),t("div",zy,[t("div",Ly,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Refund (Rp)",-1)),t("div",Hy,r(l(L)(parseFloat(-s.data.total_refunded))),1)])]),t("div",Ky,[t("div",Yy,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",Wy,r(l(L)(s.data.remaining_refund)),1)])])])]),_:1})])}}},Qy=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"})),Jy={key:0,class:"text-center q-mb-md text-grey-8"},Gy={class:"text-subtitle2 text-weight-medium"},Xy={class:"text-h5 text-center text-primary q-pb-md"},Zy={class:"text-center q-mt-md"},ek={key:0,class:"text-h6 text-negative text-weight-bold"},tk={key:1,class:"text-h6 text-positive text-weight-bold"},an={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=fe(),n=T(!1),f=T({method:"cash",amount:m.total,notes:null}),b=i.props.data.customer,p=G(()=>[...b?[{label:"Refund ke Wallet",value:"wallet"}]:[],{label:"Tunai (Laci Kasir)",value:"cash"},...i.props.accounts.map(S=>({label:S.name,value:S.id}))]),d=G(()=>m.total-(f.value.amount||0)),g=G(()=>{const S=f.value.amount||0;return S<=0?"Jumlah pembayaran harus lebih dari 0.":S>m.total?"Jumlah pembayaran melebihi jumlah transaksi":null}),_=G(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const S={id:f.value.method,amount:f.value.amount,notes:f.value.notes};o("accepted",S),n.value=!1},x=()=>{f.value.amount=m.total,f.value.method="cash",f.value.notes=null};return(S,C)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":C[4]||(C[4]=j=>S.$emit("update:modelValue",j)),onBeforeShow:x},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,null,{default:a(()=>C[5]||(C[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Pengembalian Dana ",-1)])),_:1}),e(ee,{class:"q-pt-none"},{default:a(()=>[l(b)?(u(),h("div",Jy,[t("div",Gy,[v(r(l(b).code)+" ",1),C[6]||(C[6]=t("br",null,null,-1)),v(" "+r(l(b).name)+" ",1),C[7]||(C[7]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(l(L)(l(b).wallet_balance)),1)])])):k("",!0),t("div",Xy," Total: Rp. "+r(l(L)(c.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":C[0]||(C[0]=j=>f.value.method=j),options:p.value,label:f.value.method=="wallet"?"Tujuan":"Sumber Dana",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","label","disable"]),e(Be,{modelValue:f.value.amount,"onUpdate:modelValue":C[1]||(C[1]=j=>f.value.amount=j),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:f.value.notes,"onUpdate:modelValue":C[2]||(C[2]=j=>f.value.notes=j),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",Zy,[d.value>0?(u(),h("div",ek," Sisa Refund: Rp. "+r(l(L)(d.value)),1)):(u(),h("div",tk," Refund Lunas "))])]),_:1}),e(lt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(M,{flat:"",label:"Batal",color:"grey",onClick:C[3]||(C[3]=j=>S.$emit("update:modelValue",!1))}),e(M,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ak=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),lk={class:"column"},ok={class:"row"},nk={class:"full-width",style:{"border-collapse":"collapse"}},sk={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},rk={class:"row items-center q-gutter-x-sm"},ik={class:"text-weight-bold"},dk={class:"row items-center q-gutter-x-sm q-mt-xs"},uk={class:"text-caption text-grey-6"},mk={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},ck={class:"text-caption text-grey-6"},pk={class:"q-mt-xs"},fk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},gk={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},bk={key:0},vk={class:"text-right q-pa-sm"},ln={__name:"RefundTab",props:{data:Object},setup(c){const s=c,m=he(),o=T(!1),i=()=>{o.value=!0},n=G(()=>s.data.remaining_refund),f=async p=>{const d={order_id:s.data.id,...p};m.loading.show({message:"Memproses pembayaran..."});try{const g=await Ue.post(route("admin.sales-order-return.add-refund"),d);m.notify({message:"Refund Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,K.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(g){let _="Gagal memproses refund.";g.response&&g.response.data&&g.response.data.message?_=g.response.data.message:g.message&&(_=g.message),m.notify({message:_,color:"negative",icon:"error"})}finally{m.loading.hide()}},b=p=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus refund pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Ue.post(route("admin.sales-order-return.delete-refund",{id:p.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),K.visit(route("admin.sales-order-return.detail",{id:s.data.id})+"?tab=refund")}catch(d){let g="Gagal menghapus refund pembayaran.";d.response&&d.response.data&&d.response.data.message?g=d.response.data.message:d.message&&(g=d.message),m.notify({message:g,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(p,d)=>(u(),h(H,null,[t("div",lk,[e(Re),e(ee,{class:"q-pa-sm"},{default:a(()=>[t("div",ok,[p.$can("admin.sales-order-return.add-refund")?(u(),U(M,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:d[0]||(d[0]=Q(g=>i(),["stop"]))})):k("",!0)]),t("table",nk,[d[5]||(d[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(u(!0),h(H,null,je(s.data.refunds,g=>(u(),h("tr",{key:g.id},[t("td",sk,[t("div",rk,[e(q,{name:"tag",size:"xs",color:"grey-7"}),t("span",ik,r(g.code),1)]),t("div",dk,[e(q,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",uk,r(l(ve)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(u(),h("div",mk,[e(q,{name:"wallet",size:"xs",color:"grey-7"}),t("span",ck,r(g.account.name),1)])):k("",!0),t("div",pk,[e(it,{label:p.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"])])]),t("td",fk,r(l(L)(g.amount)),1),t("td",gk,[p.$can("admin.sales-order-return.delete-refund")?(u(),U(M,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>b(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.refunds.length==0?(u(),h("tr",bk,d[2]||(d[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[d[3]||(d[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Total Refund",-1)),t("th",vk,r(l(L)(parseFloat(-s.data.total_refunded))),1),d[4]||(d[4]=t("th",null,null,-1))])])])]),_:1})]),e(an,{modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=g=>o.value=g),total:n.value,customer:s.data.customer,onAccepted:f},null,8,["modelValue","total","customer"])],64))}},_k=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),yk={class:"q-gutter-sm"},kk={class:"col col-lg-6 q-pa-xs",align:"center"},Ml="Retur Penjualan",wk={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=fe(),o=m.props.data,i=T(s.get("preview")||!1),f=T(s.get("tab")||"main-info");xe(()=>{bt(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.sales-order-return.print",{id:m.props.data.id,size:p}),"_self")};return(p,d)=>{const g=W("i-head"),_=W("authenticated-layout");return u(),h(H,null,[e(g,{title:Ml}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Ml))])]),"left-button":a(()=>[t("div",yk,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=y=>l(K).get(p.route("admin.sales-order-return.index")))})])]),"right-button":a(()=>[e(M,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:d[1]||(d[1]=y=>b("58mm"))}),e(M,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:d[2]||(d[2]=y=>b("a4"))}),i.value?k("",!0):(u(),U(M,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:d[3]||(d[3]=y=>l(K).get(p.route("admin.sales-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",kk,[e(de,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(Tt,{modelValue:f.value,"onUpdate:modelValue":d[4]||(d[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main-info",label:"Info Retur"}),i.value?k("",!0):(u(),U(dt,{key:0,name:"refund",label:"Refund Pembayaran"}))]),_:1},8,["modelValue"]),e(Re),e(Pt,{modelValue:f.value,"onUpdate:modelValue":d[5]||(d[5]=y=>f.value=y),animated:""},{default:a(()=>[e(ut,{name:"main-info",class:"q-pa-none"},{default:a(()=>[e(tn,{data:l(o)},null,8,["data"])]),_:1}),e(ut,{name:"refund",class:"q-pa-none"},{default:a(()=>[e(ln,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)}}},hk=Object.freeze(Object.defineProperty({__proto__:null,default:wk},Symbol.toStringTag,{value:"Module"})),$k={class:"text-weight-medium"},xk={class:"text-caption text-grey-6 elipsis"},Sk={class:"column items-end"},Vk={class:"text-caption text-grey-6 text-italic"},on={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=he(),m=ot(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(u(),U(Me,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ye({height:l(m)})},{header:a(f=>[e(Oe,{props:f,class:"bg-grey-4"},{default:a(()=>[(u(!0),h(H,null,je(f.cols,b=>(u(),U(ta,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Oe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:f,class:"text-left wrap-column"},{default:a(()=>[t("div",$k,r(f.row.product_name),1),t("div",xk,r(f.row.product_barcode),1),f.row.notes?(u(),U(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal_price",props:f,class:"text-right"},{default:a(()=>[t("div",Sk,[t("div",null,r(l(L)(f.row.subtotal_price)),1),t("div",Vk,r(l(L)(f.row.quantity))+" x Rp. "+r(l(L)(f.row.price)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(M,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(M,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},qk=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"})),Ck={class:"row items-center no-wrap"},Tk={class:"col-auto"},nn={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=G(()=>o.item.quantity*o.item.price),b=g=>{g.stopPropagation(),g.preventDefault()},p=g=>{o.modelValue&&(g.key==="Enter"?(n(),i("update:modelValue",!1),b(g)):g.key==="Escape"&&(i("update:modelValue",!1),b(g)))};return xe(()=>{window.addEventListener("keydown",p)}),$t(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item}),(g,_)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>g.$emit("update:modelValue",y))},{default:a(()=>[e(de,null,{default:a(()=>[e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",Ck,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",Tk,[e(M,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>g.$emit("update:modelValue",!1))})])])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[e(re,{modelValue:c.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=y=>c.item.product_name=y),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Be,{modelValue:c.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=y=>c.item.quantity=y),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Be,{modelValue:c.item.price,"onUpdate:modelValue":_[3]||(_[3]=y=>c.item.price=y),label:"Harga","hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Be,{modelValue:f.value,"onUpdate:modelValue":_[4]||(_[4]=y=>f.value=y),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(re,{modelValue:c.item.notes,"onUpdate:modelValue":_[5]||(_[5]=y=>c.item.notes=y),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(lt,{align:"right"},{default:a(()=>[ae(e(M,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),e(M,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Pk=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),Rk={key:0,class:"q-select__selected-item"},sn={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(c,{expose:s,emit:m}){const o=T(null),i=c,n=m,f=T([]);let b=null;const p=T(i.modelValue);xe(()=>{i.initialData&&(p.value=i.initialData)}),tt(p,_=>{n("update:modelValue",_),n("customerSelected",_)}),tt(()=>i.modelValue,_=>{p.value=_}),s({focus:()=>{o.value&&o.value.focus()}});const g=(_,y)=>{if(_.length<i.minLength){y(()=>{f.value=[]});return}b&&clearTimeout(b),b=setTimeout(()=>{Ue.get(`/web-api/customers?q=${_}`).then(x=>{y(()=>{f.value=x.data.data})}).catch(x=>{console.error("Gagal mengambil data pelanggan:",x),y(()=>{f.value=[]})})},100)};return(_,y)=>(u(),U(ce,{class:qe(c.class),ref_key:"qSelectRef",ref:o,modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=x=>p.value=x),"use-input":"","input-debounce":"500",label:c.label,options:f.value,onFilter:g,clearable:"",error:c.error,behavior:"menu","error-message":c.errorMessage,disable:c.disable,"hide-bottom-space":"",outlined:c.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a(x=>[e(le,Ba(co(x.itemProps)),{default:a(()=>[e(F,null,{default:a(()=>[e(be,null,{default:a(()=>[v(r(x.opt.name)+" ("+r(x.opt.code)+")",1)]),_:2},1024),x.opt.phone?(u(),U(be,{key:0,class:"text-grey-8 q-ml-sm q-mt-xs"},{default:a(()=>[e(q,{name:"phone",class:"inline-icon"}),v(r(x.opt.phone),1)]),_:2},1024)):k("",!0),x.opt.address?(u(),U(be,{key:1,class:"text-grey-8 q-ml-sm"},{default:a(()=>[e(q,{name:"home_pin",class:"inline-icon"}),v(r(x.opt.address),1)]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1040)]),"selected-item":a(x=>[x.opt?(u(),h("div",Rk,r(x.opt.name)+" ("+r(x.opt.code)+") ",1)):k("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},Ok={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ee,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(lt,{align:"center"},{default:a(()=>[ae(e(M,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},rn=kt(Ok,[["__scopeId","data-v-22783525"]]),Dk=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"})),Ik={class:"row items-center no-wrap"},Uk={class:"col text-subtite text-bold text-grey-8"},jk={class:"col-auto"},dn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=d=>{d.stopPropagation(),d.preventDefault()},b=d=>{o.modelValue&&(d.key==="Enter"?(n(),f(d)):d.key==="Escape"&&(i("update:modelValue",!1),f(d)))};return xe(()=>{window.addEventListener("keydown",b)}),$t(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(d,g)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>d.$emit("update:modelValue",_))},{default:a(()=>[e(de,null,{default:a(()=>[e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",Ik,[t("div",Uk," Edit "+r(c.data.code),1),t("div",jk,[e(M,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>d.$emit("update:modelValue",!1))})])])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[e(Ze,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(re,{modelValue:d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(re,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(lt,{align:"right"},{default:a(()=>[ae(e(M,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),ae(e(M,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ek=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"})),Ak={class:"q-gutter-sm"},Mk={class:"row items-center"},Nk={class:"text-weight-bold"},Bk={class:"row q-col-gutter-none full-width"},Fk={class:"col-sm-6 col-12 col q-pa-sm"},zk={class:"row full-width"},Lk={class:"col-sm-6 col-12"},Hk={class:"row q-ml-sm items-end"},Kk={class:"row col grow"},Yk={class:"col-12 q-px-sm column"},Wk={class:"row items-start q-col-gutter-none q-px-sm"},Qk={key:0,class:"col"},Jk={class:"text-caption text-grey-6 q-mt-xs"},Gk={key:0,class:"text-caption text-grey-8 q-mt-xs"},Xk={class:"text-italic"},Zk={key:1,class:"col"},ew={class:"text-grey-8"},tw={class:"col"},aw={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},lw={class:"text-h4 text-weight-bold"},ow={class:"row q-col-gutter-xs q-py-xs q-px-sm"},nw={class:"col"},sw={__name:"Editor",setup(c){const s=he(),m=fe(),o=T(!0),i=T(null),n=T(null),f=T(null),b=T(!1),p=T(null),d=T(null),{isFullscreen:g,toggleFullscreen:_}=wa(d),y="Retur #"+m.props.data.code,x=T(m.props.data.customer),S=T(""),C=T(!1),j=T(!1),z=T(!1),V=T(!1),E=T(null),I=Ee({id:m.props.data.id,code:m.props.data.code,customer_id:m.props.data.customer_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),O=G(()=>I.items.reduce((X,te)=>X+te.price*te.quantity,0)),B=()=>{var X;_(),g.value||(X=p==null?void 0:p.value)==null||X.hideDrawer()},w=X=>isNaN(X)||X<=0?(vt("Kuantitas tidak valid.","top"),!1):!0,$=X=>isNaN(X)||X<0?(vt("Harga tidak valid.","top"),!1):!0,D=X=>!X||X.length==0?(vt("Barcode tidak valid.","top"),!1):!0,R=X=>{var te;(te=S.value)!=null&&te.endsWith("*")?S.value+=X.name:S.value=X.name},P=async()=>{if(C.value)return;const X=S.value.trim();if(X.length===0){j.value=!0;return}const te=X.split("*");let we=1,ne="",J=null;if(te.length===1)ne=te[0];else if(te.length<=3)we=parseInt(te[0]),ne=te[1],te.length===3&&(J=parseFloat(te[2]));else{vt("Input tidak valid.","top");return}if(ne.length===0){j.value=!0;return}!D(ne)&&!w(we)&&!$(J)||(C.value=!0,await Ue.post(route("admin.sales-order-return.add-item"),{order_id:I.id,product_code:ne,qty:we,price:J,merge:o.value}).then(ie=>{const Z=ie.data.data.item;let pe=-1;ie.data.data.mergeItem&&(pe=I.items.findIndex(Pe=>Pe.id===Z.id)),pe===-1?I.items.push(Z):I.items[pe]=Z,S.value="",J!==null&&J!==parseFloat(Z.price)&&vt("Harga tidak dapat diubah!","top")}).catch(ie=>{var Z,pe;ft((pe=(Z=ie.response)==null?void 0:Z.data)==null?void 0:pe.message,"top"),console.error("Gagal mengambil data produk:",ie)}),C.value=!1,bt(()=>{var ie;(ie=i.value)==null||ie.focus()}))},A=X=>{E.value=Object.create(X),z.value=!0},N=X=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${X.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{C.value=!0,Ue.post(route("admin.sales-order-return.remove-item"),{id:X.id}).then(()=>{const te=I.items.findIndex(we=>we.id===X.id);te!==-1&&(I.items.splice(te,1)[0],gt("Item telah dihapus","top"))}).catch(te=>{var we,ne;ft(((ne=(we=te==null?void 0:te.response)==null?void 0:we.data)==null?void 0:ne.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(te)}).finally(()=>{C.value=!1})})},oe=()=>{C.value=!0;const X=n.value.getCurrentItem(),te={id:X.id,qty:X.quantity,price:X.price};X.notes&&(te.notes=X.notes),Ue.post(route("admin.sales-order-return.update-item"),te).then(we=>{const ne=we.data.data,J=I.items.findIndex(ie=>ie.id===ne.id);J!==-1&&(I.items[J]=ne,gt("Item telah diperbarui","top")),z.value=!1}).catch(we=>{var ne,J;ft(((J=(ne=we==null?void 0:we.response)==null?void 0:ne.data)==null?void 0:J.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(we)}).finally(()=>{C.value=!1})};xe(()=>{const X=te=>{b.value||z.value||j.value||V.value||(te.key==="F1"?(te.preventDefault(),b.value=!0):te.key==="F2"?(te.preventDefault(),f.value.focus()):te.key==="F3"?(te.preventDefault(),i.value.focus()):te.key==="F4"?(te.preventDefault(),o.value=!o.value):te.key==="F10"||te.ctrlKey&&te.key==="Enter"?(te.preventDefault(),_e()):te.key==="F11"?(te.preventDefault(),B()):(te.key==="F5"||te.key==="F6"||te.key==="F7"||te.key==="F12")&&te.preventDefault())};document.addEventListener("keydown",X),$t(()=>{document.removeEventListener("keydown",X)}),bt(()=>{var te;(te=p==null?void 0:p.value)==null||te.hideDrawer()})});const ge=async()=>{C.value=!0;const X={id:I.id,customer_id:I.customer_id??null,datetime:Zt(I.datetime),notes:I.notes};await Ue.post(route("admin.sales-order-return.update"),X).then(te=>{const we=te.data.data.id;I.customer_id=we.customer_id}).catch(te=>{var we,ne;ft(((ne=(we=te==null?void 0:te.response)==null?void 0:we.data)==null?void 0:ne.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(te)}).finally(()=>{C.value=!1})},_e=X=>{if(I.items.length===0){gt("Item masih kosong","top");return}Vt.create({title:"Konfirmasi Selesai",icon:"question",message:`Selesaikan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{C.value=!0,Ue.post(route("admin.sales-order-return.close",{id:I.id})).then(te=>{gt("Transaksi selesai"),K.get(route("admin.sales-order-return.detail",{id:I.id}))}).catch(te=>{var we,ne;ft((ne=(we=te.response)==null?void 0:we.data)==null?void 0:ne.message),console.error(te)}).finally(()=>{C.value=!1})})},ue=()=>{Vt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${I.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.sales-order-return.cancel",{id:I.id}),{id:I.id}).then(()=>{gt("Transaksi telah dibatalkan."),K.visit(route("admin.sales-order-return.detail",{id:I.id}))}).catch(X=>{var we,ne;const te=((ne=(we=X.response)==null?void 0:we.data)==null?void 0:ne.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:te,color:"warning",position:"bottom"}),console.error(X)})})},Ie=()=>{window.open(route("admin.sales-order-return.detail",{id:I.id})+"?preview=1","_blank")},ke=G(()=>x.value?x.value.wallet_balance>=O.value:!0);return(X,te)=>{const we=W("i-head"),ne=W("authenticated-layout");return u(),h(H,null,[e(we,{title:y}),e(ne,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[v(r(y))]),"left-button":a(()=>[t("div",Ak,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:te[0]||(te[0]=J=>l(K).get(X.route("admin.sales-order-return.index")))})])]),"right-button":a(()=>[t("div",Mk,[l(s).screen.gt.sm?(u(),h(H,{key:0},[t("div",Nk,r(l(m).props.auth.user.username),1),te[21]||(te[21]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ka)])],64)):k("",!0),k("",!0)])]),default:a(()=>[e(Te,{class:"bg-grey-2 column fit"},{default:a(()=>[e(de,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",Bk,[t("div",Fk,[t("div",zk,[e(sn,{ref_key:"customerAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:x.value,"onUpdate:modelValue":te[2]||(te[2]=J=>x.value=J),label:"Pelanggan",disable:"","min-length":1,outlined:"",autofocus:""},null,8,["modelValue"]),x.value?(u(),U(xa,{key:0,party:x.value,"is-valid-wallet-balance":ke.value},null,8,["party","is-valid-wallet-balance"])):k("",!0)])]),t("div",Lk,[e($a,{ref_key:"userInputRef",ref:i,modelValue:S.value,"onUpdate:modelValue":te[3]||(te[3]=J=>S.value=J),onKeyup:te[4]||(te[4]=Yt(Q(J=>P(),["prevent"]),["enter"])),onScanSuccess:te[5]||(te[5]=J=>P()),onSend:te[6]||(te[6]=J=>P()),onSearch:te[7]||(te[7]=J=>j.value=!0),loading:C.value,disable:C.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",Hk,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":te[8]||(te[8]=J=>o.value=J),label:"Gabungkan item",disable:C.value},null,8,["modelValue","disable"])])])]),t("div",Kk,[t("div",Yk,[e(on,{items:I.items,onUpdateQuantity:te[9]||(te[9]=({id:J,value:ie})=>X.updateQuantity(J,ie)),onRemoveItem:N,onEditItem:A,"is-processing":C.value},null,8,["items","is-processing"])])]),t("div",Wk,[l(s).screen.gt.sm?(u(),h("div",Qk,[t("div",Jk,r(I.items.length)+" item(s) ",1),I.notes?(u(),h("div",Gk,[te[22]||(te[22]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",Xk,[e(Se,{text:I.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(u(),h("div",Zk,[t("div",ew,[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),v(r(l(m).props.data.sales_order.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(I.datetime)),1)])])])):k("",!0),t("div",tw,[t("div",aw,[te[24]||(te[24]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",lw,[te[23]||(te[23]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(L)(O.value)),1)])])])]),t("div",ow,[t("div",nw,[e(M,{class:"full-width",label:"Selesai",color:"primary",icon:"payment",onClick:te[10]||(te[10]=J=>_e()),disable:!X.$can("admin.sales-order-return.close")||C.value||I.items.length===0||I.status!=="draft",loading:C.value},null,8,["disable","loading"])]),t("div",null,[e(M,{icon:"more_vert",color:"grey",onClick:te[14]||(te[14]=Q(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[ae((u(),U(le,{clickable:"",onClick:te[11]||(te[11]=Q(J=>V.value=!0,["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>te[25]||(te[25]=[v("Edit Rincian")])),_:1})]),_:1})),[[se],[me]]),ae((u(),U(le,{clickable:"",onClick:te[12]||(te[12]=Q(J=>Ie(),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"preview"})]),_:1}),e(F,null,{default:a(()=>te[26]||(te[26]=[v("Pratinjau")])),_:1})]),_:1})),[[se],[me]]),ae((u(),U(le,{clickable:"",onClick:te[13]||(te[13]=Q(J=>ue(),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:a(()=>te[27]||(te[27]=[v(" Batalkan ")])),_:1})]),_:1})),[[se],[me]]),e(Re)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(nn,{ref_key:"itemEditorRef",ref:n,modelValue:z.value,"onUpdate:modelValue":te[15]||(te[15]=J=>z.value=J),item:E.value,onSave:te[16]||(te[16]=J=>oe()),"is-processing":C.value},null,8,["modelValue","item","is-processing"]),e(ha,{modelValue:j.value,"onUpdate:modelValue":te[17]||(te[17]=J=>j.value=J),onProductSelected:R},null,8,["modelValue"]),e(dn,{modelValue:V.value,"onUpdate:modelValue":te[18]||(te[18]=J=>V.value=J),data:I,onSave:te[19]||(te[19]=J=>ge()),"is-processing":C.value},null,8,["modelValue","data","is-processing"]),e(rn,{modelValue:b.value,"onUpdate:modelValue":te[20]||(te[20]=J=>b.value=J)},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}}},rw=Object.freeze(Object.defineProperty({__proto__:null,default:sw},Symbol.toStringTag,{value:"Module"})),iw={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},dw={class:"q-pa-xs"},uw={class:"full-width row flex-center text-grey-8 q-gutter-sm"},mw={key:0},cw={key:1},pw={key:2},fw={key:3},gw={key:0},bw={key:1},vw={key:0},_w={key:0},yw={key:1},kw={class:"flex justify-end"},Nl="Retur Penjualan",ww={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=De().startOf("month").toDate(),d=De().endOf("month").toDate(),g=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.SALES_ORDER_RETURN_STATUSES)],_=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES)],y=Ee({search:"",status:"all",refund_status:"all",start_date:p,end_date:d,...He()}),x=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),S=[{name:"code",label:"Info Order",field:"code",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{I()});const C=w=>{if(w.status=="draft"){j(w);return}z(w)},j=w=>{K.get(route("admin.sales-order-return.edit",w.id))},z=w=>{K.get(route("admin.sales-order-return.detail",w.id))},V=w=>{Vt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${w.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.sales-order-return.cancel",{id:w.id}),{id:w.id}).then($=>{const D=$.data.data,R=o.value.findIndex(P=>P.id===D.id);if(R===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[R].status="canceled",s.notify({message:$.data.message,position:"bottom"})}).catch($=>{var R,P;const D=((P=(R=$.response)==null?void 0:R.data)==null?void 0:P.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:D,color:"warning",position:"bottom"}),console.error($)})})},E=w=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${w.code}?`,url:route("admin.sales-order-return.delete",w.id),fetchItemsCallback:I,loading:i}),I=(w=null)=>{const $={...y,start_date:De(y.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:De(y.end_date).format("YYYY-MM-DD HH:mm:ss")};Ke({pagination:x,filter:$,props:w,rows:o,url:route("admin.sales-order-return.data"),loading:i,tableRef:n})},O=()=>{I()},B=G(()=>s.screen.gt.sm?S:S.filter(w=>w.name==="code"||w.name==="action"));return(w,$)=>{const D=W("i-head"),R=W("authenticated-layout");return u(),h(H,null,[e(D,{title:Nl}),e(R,null,ze({title:a(()=>[v(r(Nl))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=P=>m.value=!m.value)},null,8,["icon"]),w.$can("admin.sales-order-return.edit")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=P=>l(K).get(w.route("admin.sales-order-return.add")))})):k("",!0)]),default:a(()=>[t("div",dw,[e(Me,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:x.value,"onUpdate:pagination":$[10]||($[10]=P=>x.value=P),filter:y.search,loading:i.value,columns:B.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(b)}),onRequest:I,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:P,message:A,filter:N})=>[t("div",uw,[t("span",null,r(A)+" "+r(N?" with term "+N:""),1)])]),body:a(P=>[e(Oe,{props:P,class:"cursor-pointer",onClick:Q(A=>C(P.row),["prevent"])},{default:a(()=>[e(Y,{key:"code",props:P,class:"wrap-column"},{default:a(()=>{var A,N,oe;return[t("div",null,[e(q,{name:"tag"}),v(" "+r(P.row.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(P.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[P.row.cashier?(u(),h("div",mw,[e(q,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((A=P.row.cashier)==null?void 0:A.username),1)])):k("",!0),P.row.cashier_session?(u(),h("div",cw,[e(q,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((oe=(N=P.row.cashier_session)==null?void 0:N.cashier_terminal)==null?void 0:oe.name),1)])):k("",!0),P.row.customer?(u(),h("div",pw,[e(q,{name:"person",class:"inline-icon"}),e(ba,{href:w.route("admin.customer.detail",{id:P.row.customer.id}),onClick:$[7]||($[7]=Q(()=>{},["stop"]))},{default:a(()=>[v(" "+r(P.row.customer.code)+" - "+r(P.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,"Rp. "+r(l(L)(P.row.grand_total)),1),P.row.notes?(u(),h("div",fw,[e(q,{name:"notes"}),v(" "+r(P.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Ft,{status:P.row.status,statuses:w.$CONSTANTS.SALES_ORDER_RETURN_STATUSES,colors:{draft:"orange",closed:"green",canceled:"red"}},null,8,["status","statuses"]),e(Ft,{status:P.row.refund_status,statuses:w.$CONSTANTS.SALES_ORDER_RETURN_REFUND_STATUSES,colors:{pending:"grey",partially_refunded:"orange",fully_refunded:"green",no_refund:"red"}},null,8,["status","statuses"])])]}),_:2},1032,["props"]),e(Y,{key:"cashier_id",props:P},{default:a(()=>{var A,N,oe;return[P.row.cashier?(u(),h("div",gw,[e(q,{name:"person",class:"inline-icon"}),v(" "+r((A=P.row.cashier)==null?void 0:A.username),1)])):k("",!0),P.row.cashier_session?(u(),h("div",bw,[e(q,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((oe=(N=P.row.cashier_session)==null?void 0:N.cashier_terminal)==null?void 0:oe.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Y,{key:"customer_id",props:P},{default:a(()=>[P.row.customer?(u(),h("div",vw,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),v(" "+r(P.row.customer_code)+" - "+r(P.row.customer_name),1)]),P.row.customer_phone?(u(),h("div",_w,[e(q,{name:"phone",class:"inline-icon"}),v(" "+r(P.row.customer_phone),1)])):k("",!0),P.row.customer_address?(u(),h("div",yw,[e(q,{name:"home_pin",class:"inline-icon"}),v(" "+r(P.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total",props:P},{default:a(()=>[v(r(l(L)(P.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:P},{default:a(()=>[e(Se,{text:P.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:P,onClick:$[9]||($[9]=Q(()=>{},["stop"]))},{default:a(()=>[t("div",kw,[w.$can("admin.sales-order-return.detail")||w.$can("admin.sales-order-return.edit")||w.$can("admin.sales-order-return.cancel")||w.$can("admin.sales-order-return.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[8]||($[8]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[P.row.status!="draft"&&w.$can("admin.sales-order-return.detail")?ae((u(),U(le,{key:0,onClick:Q(A=>z(P.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"visibility"})]),_:1}),e(F,null,{default:a(()=>$[11]||($[11]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),P.row.status=="draft"&&w.$can("admin.sales-order-return.edit")?ae((u(),U(le,{key:1,onClick:Q(A=>j(P.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>$[12]||($[12]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),P.row.status=="draft"&&w.$can("admin.sales-order-return.cancel")?ae((u(),U(le,{key:2,onClick:Q(A=>V(P.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"cancel"})]),_:1}),e(F,null,{default:a(()=>$[13]||($[13]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),e(Re),w.$can("admin.sales-order-return.delete")?ae((u(),U(le,{key:3,onClick:Q(A=>E(P.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>$[14]||($[14]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",iw,[e(Ze,{modelValue:y.start_date,"onUpdate:modelValue":[$[2]||($[2]=P=>y.start_date=P),O],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Ze,{modelValue:y.end_date,"onUpdate:modelValue":[$[3]||($[3]=P=>y.end_date=P),O],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:y.status,"onUpdate:modelValue":[$[4]||($[4]=P=>y.status=P),O],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:y.refund_status,"onUpdate:modelValue":[$[5]||($[5]=P=>y.refund_status=P),O],options:_,label:"Status Refund",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:y.search,"onUpdate:modelValue":$[6]||($[6]=P=>y.search=P),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},hw=Object.freeze(Object.defineProperty({__proto__:null,default:ww},Symbol.toStringTag,{value:"Module"})),$w={key:0,class:"text-center q-mb-md text-grey-8"},xw={class:"text-subtitle2 text-weight-medium"},Sw={class:"text-h5 text-center text-primary q-pb-md"},Vw={class:"q-mb-md flex flex-center"},qw={key:1},Cw={class:"col-6"},Tw={class:"col-6"},Pw={class:"row"},Rw={class:"text-center q-mt-md"},Ow={key:0,class:"text-h6 text-negative text-weight-bold"},Dw={key:1,class:"text-h6 text-green-8 text-weight-bold"},Iw={key:2,class:"text-h6 text-positive text-weight-bold"},Uw={key:2},jw={class:"text-h6 text-negative text-center"},Ew={key:3},Aw={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=fe(),n=T(!1),f=T("cash"),b=T(new Date),p=T([]),d=T([]),g=Ee([{id:"cash",amount:0}]),_=i.props.settings.default_payment_mode,y=G(()=>[{label:"Laci Kasir",value:"cash"},...m.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(R=>({label:R.name,value:R.id}))]),x=G(()=>g.reduce((R,P)=>R+(P.amount||0),0)),S=G(()=>m.total-x.value),C=G(()=>{if(!m.customer)return!0;const R=g.find(A=>A.id==="wallet");return(R?R.amount:0)<=m.customer.wallet_balance}),j=new Date,z=mt.addToDate(new Date,{days:30}),V=G(()=>[R=>!!R||"Tanggal jatuh tempo harus diisi",R=>mt.isBetweenDates(R,j,z,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),E=G(()=>{if(f.value==="debt")return!!m.customer&&V.value.every(oe=>oe(b.value)===!0);const R=C.value,P=g.some(oe=>(oe.amount||0)>0),A=g.every(oe=>(oe.amount||0)>=0),N=S.value<=0;return R&&P&&A&&N}),I=()=>{if(g.length<3){const R=g.length;g.push({id:"cash",amount:0}),bt(()=>{const P=p.value[R];P&&(P.focus(),P.showPopup())})}},O=R=>{if(g.length>1){const P=g.findIndex(A=>A.id===R);P!==-1&&g.splice(P,1)}},B=(R,P="cash")=>{f.value=R,b.value=new Date,g.splice(0,g.length),R==="cash"&&(g.splice(0,g.length,{id:P,amount:m.total}),bt(()=>{d.value.length>0&&d.value[0]&&(d.value[0].focus(),d.value[0].select())}))},w=()=>{if(!E.value)return;n.value=!0;let R={total:m.total,is_debt:f.value==="debt"};if(f.value==="debt")R.due_date=mt.formatDate(b.value,"YYYY-MM-DD"),R.payments=[];else{const P=x.value,A=P>m.total?P-m.total:0,N=S.value>0?S.value:0;R.payments=g,R.remaining_debt=N,R.change=A}o("accepted",R),n.value=!1},$=()=>{B("cash",m.customer?_:"cash")};xe(()=>{const R=P=>{m.modelValue&&P.ctrlKey&&P.key==="Enter"&&(P.preventDefault(),w())};document.addEventListener("keydown",R),$t(()=>{document.removeEventListener("keydown",R)})});const D=(R,P)=>{bt(()=>{d.value[P]&&(d.value[P].focus(),d.value[P].select())})};return(R,P)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":P[3]||(P[3]=A=>R.$emit("update:modelValue",A)),onBeforeShow:$},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,null,{default:a(()=>P[4]||(P[4]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ee,{class:"q-pt-none"},{default:a(()=>[c.customer?(u(),h("div",$w,[t("div",xw,[v(" Username: "+r(c.customer.code)+" ",1),P[5]||(P[5]=t("br",null,null,-1)),v(" Nama: "+r(c.customer.name),1),P[6]||(P[6]=t("br",null,null,-1)),v(" Saldo: Rp. "+r(l(L)(c.customer.wallet_balance)),1)])])):k("",!0),t("div",Sw," Total: Rp. "+r(l(L)(c.total)),1),t("div",Vw,[e(l(Kt),{modelValue:f.value,"onUpdate:modelValue":[P[0]||(P[0]=A=>f.value=A),B],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="cash"?(u(),h("div",qw,[(u(!0),h(H,null,je(g,(A,N)=>(u(),h("div",{key:N,class:"row q-col-gutter-sm q-mb-sm"},[t("div",Cw,[e(l(ce),{modelValue:A.id,"onUpdate:modelValue":[oe=>A.id=oe,oe=>D(oe,N)],options:y.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:oe=>p.value[N]=oe},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",Tw,[e(Be,{modelValue:A.amount,"onUpdate:modelValue":oe=>A.amount=oe,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:A.id==="wallet"&&!C.value,"error-message":A.id==="wallet"&&!C.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:oe=>d.value[N]=oe},ze({_:2},[g.length>1?{name:"append",fn:a(()=>[e(q,{size:"xs",name:"close",class:"cursor-pointer",onClick:oe=>O(A.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",Pw,[e(M,{disable:!(g.length<3&&S.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:I,size:"sm"},null,8,["disable"])]),t("div",Rw,[S.value>0?(u(),h("div",Ow," Sisa Tagihan: Rp. "+r(l(L)(S.value)),1)):S.value<0?(u(),h("div",Dw," Kembalian: Rp. "+r(l(L)(Math.abs(S.value))),1)):(u(),h("div",Iw," Tagihan Terbayar "))])])):f.value==="debt"&&c.customer?(u(),h("div",Uw,[e(ua,{outlined:"",modelValue:b.value,"onUpdate:modelValue":P[1]||(P[1]=A=>b.value=A),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(j),"max-date":l(z),rules:V.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",jw," Total Utang: Rp. "+r(l(L)(c.total)),1)])):f.value==="debt"&&!c.customer?(u(),h("div",Ew,P[7]||(P[7]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(lt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(M,{flat:"",label:"Batal",color:"grey",onClick:P[2]||(P[2]=A=>R.$emit("update:modelValue",!1)),class:"col"}),e(M,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:w,disable:n.value||!E.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Mw=Object.freeze(Object.defineProperty({__proto__:null,default:Aw},Symbol.toStringTag,{value:"Module"})),Nw={key:0},Bw={style:{float:"right"}},Fw={key:1},zw={style:{float:"right"}},Lw={key:2},Hw={style:{float:"right"}},Kw={key:3},Yw={style:{float:"right"}},Ww={style:{float:"right"}},Qw={class:"q-gutter-sm"},Jw={class:"q-my-md"},Gw={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ee,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(u(),h("tr",Nw,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",Bw,r(l(L)(c.payment.total)),1)])]),c.payment.cash_amount?(u(),h("tr",Fw,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",zw,r(l(L)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(u(),h("tr",Lw,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",Hw,r(l(L)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(u(),h("tr",Kw,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",Yw,r(l(L)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Ww,r(l(L)(c.payment.change)),1)])])])])]),_:1}),e(lt,{align:"center"},{default:a(()=>[t("div",Qw,[e(M,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(M,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",Jw,[e(M,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Xw=kt(Gw,[["__scopeId","data-v-a3bb29e0"]]),Zw=Object.freeze(Object.defineProperty({__proto__:null,default:Xw},Symbol.toStringTag,{value:"Module"})),e0={class:"column"},t0={class:"bg-grey-2 q-pa-xs"},a0={class:"text-subtitle1 text-bold text-grey-10"},l0={class:"text-caption text-grey-8"},o0={class:"col-12 col-sm-6"},n0={class:"full-width"},s0={key:1},r0={key:0},i0={key:1},d0={class:"col-12 col-sm-6",align:"left"},u0={class:"full-width"},m0={key:0};const c0={key:2},p0={class:"full-width",style:{"border-collapse":"collapse"}},f0={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},g0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},b0={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},v0={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},_0={key:0},y0={class:"col-12 col-sm-6"},k0={class:"text-body2 text-grey-7 text-italic"},w0={class:"col-12 col-sm-6"},h0={class:"row justify-end q-gutter-y-xs"},$0={class:"col-12 row justify-between"},x0={class:"text-subtitle2 text-bold"},S0={key:0,class:"row justify-end q-gutter-y-xs"},V0={class:"col-12 row justify-between"},q0={class:"text-subtitle2 text-bold"},C0={class:"row justify-end q-gutter-y-xs"},T0={class:"col-12 row justify-between"},P0={class:"text-subtitle2 text-bold"},R0={key:1,class:"row justify-end q-gutter-y-xs"},O0={class:"col-12 row justify-between"},D0={class:"text-subtitle2 text-bold"},I0={key:2,class:"row justify-end q-gutter-y-xs"},U0={class:"col-12 row justify-between"},j0={class:"text-subtitle2 text-bold"},un={__name:"InvoiceTab",props:{data:Object},setup(c){const s=c;return(m,o)=>{const i=W("i-link");return u(),h("div",e0,[e(ee,{class:"q-pa-none"},{default:a(()=>[t("div",t0,[t("div",a0," INVOICE #"+r(s.data.code),1),t("div",l0,[v(" Kasir: "+r(s.data.cashier.username)+" - "+r(s.data.cashier.name)+" | "+r(l(ve)(s.data.datetime))+" ",1),s.data.cashier_session?(u(),h(H,{key:0},[v(" | Session ID: "+r(s.data.cashier_session.id)+" | Terminal: "+r(s.data.cashier_session.cashier_terminal.name),1)],64)):k("",!0)])])]),_:1}),e(Re),e(ee,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>[t("div",o0,[o[1]||(o[1]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Pelanggan",-1)),t("table",n0,[t("tbody",null,[t("tr",null,[t("td",null,[s.data.customer?(u(),h(H,{key:0},[e(q,{class:"inline-icon",name:"person"}),e(i,{href:m.route("admin.customer.detail",{id:s.data.customer_id})},{default:a(()=>[v(r(s.data.customer_name)+" ("+r(s.data.customer_code)+") ",1)]),_:1},8,["href"])],64)):(u(),h("div",s0,[e(q,{class:"inline-icon",name:"person"}),o[0]||(o[0]=v(" Pelanggan Umum "))]))])]),s.data.customer_phone?(u(),h("tr",r0,[t("td",null,[e(q,{class:"inline-icon",name:"phone"}),e(Gt,{phone:s.data.customer_phone},null,8,["phone"])])])):k("",!0),s.data.customer_address?(u(),h("tr",i0,[t("td",null,[e(q,{class:"inline-icon",name:"home_pin"}),(u(),h(H,{key:0},[v(r(s.data.customer_address),1)],64))])])):k("",!0)])])]),t("div",d0,[o[12]||(o[12]=t("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),t("table",u0,[t("tbody",null,[t("tr",null,[o[2]||(o[2]=t("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),o[3]||(o[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(ve)(s.data.datetime)),1)]),t("tr",null,[o[4]||(o[4]=t("td",{class:"text-grey-7"},"Status Order",-1)),o[5]||(o[5]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(m.$CONSTANTS.SALES_ORDER_STATUSES[s.data.status]),1)]),s.data.status=="closed"?(u(),h("tr",m0,[o[6]||(o[6]=t("td",{class:"text-grey-7"},"Status Pembayaran",-1)),o[7]||(o[7]=t("td",null,":",-1)),t("td",null,r(m.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[s.data.payment_status]),1)])):k("",!0),k("",!0),s.data.due_date?(u(),h("tr",c0,[o[10]||(o[10]=t("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),o[11]||(o[11]=t("td",null,":",-1)),t("td",null,r(l(sa)(s.data.due_date)),1)])):k("",!0)])])])]),_:1}),e(Re),e(ee,{class:"q-pa-sm"},{default:a(()=>[t("table",p0,[o[14]||(o[14]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),t("tbody",null,[(u(!0),h(H,null,je(s.data.details,n=>(u(),h("tr",{key:n.id},[t("td",f0,[e(i,{href:m.route("admin.product.detail",n.product_id)},{default:a(()=>[v(r(n.product_name),1)]),_:2},1032,["href"])]),t("td",g0,r(l(L)(n.price)),1),t("td",b0,r(n.quantity),1),t("td",v0,r(l(L)(n.subtotal_price)),1)]))),128)),s.data.details.length==0?(u(),h("tr",_0,o[13]||(o[13]=[t("td",{colspan:"4",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)])])]),_:1}),e(Re),e(ee,{class:"row",align:"left"},{default:a(()=>[t("div",y0,[o[15]||(o[15]=t("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"},"Catatan:",-1)),t("div",k0,r(s.data.notes?s.data.notes:"-"),1)]),t("div",w0,[s.data.status=="closed"&&s.data.change>0?(u(),h(H,{key:0},[t("div",h0,[t("div",$0,[o[16]||(o[16]=t("div",{class:"text-subtitle2 text-grey-7"},"Jumlah Bayar",-1)),t("div",x0,r(l(L)(parseInt(s.data.total_paid)+parseInt(s.data.change))),1)])]),s.data.status=="closed"?(u(),h("div",S0,[t("div",V0,[o[17]||(o[17]=t("div",{class:"text-subtitle2 text-grey-7"},"Kembalian",-1)),t("div",q0,r(l(L)(s.data.change)),1)])])):k("",!0)],64)):k("",!0),t("div",C0,[t("div",T0,[o[18]||(o[18]=t("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),t("div",P0,r(l(L)(s.data.grand_total)),1)])]),s.data.status=="closed"&&s.data.total_return!=0?(u(),h("div",R0,[t("div",O0,[o[19]||(o[19]=t("div",{class:"text-subtitle2 text-grey-7"},"Total Retur (Rp)",-1)),t("div",D0,r(l(L)(s.data.total_return)),1)])])):k("",!0),s.data.status=="closed"&&s.data.balance!=0?(u(),h("div",I0,[t("div",U0,[o[20]||(o[20]=t("div",{class:"text-subtitle2 text-grey-7"},"Saldo (Rp)",-1)),t("div",j0,r(l(St)(s.data.balance)),1)])])):k("",!0)])]),_:1})])}}},E0=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"})),A0={key:0,class:"text-center q-mb-md text-grey-8"},M0={class:"text-subtitle2 text-weight-medium"},N0={class:"text-h5 text-center text-primary q-pb-md"},B0={class:"text-center q-mt-md"},F0={key:0,class:"text-h6 text-negative text-weight-bold"},z0={key:1,class:"text-h6 text-green-8 text-weight-bold"},L0={key:2,class:"text-h6 text-positive text-weight-bold"},mn={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=fe(),n=T(!1),f=T({method:"cash",amount:m.total,notes:null}),b=i.props.data.customer,p=G(()=>[{label:"Tunai (Laci Kasir)",value:"cash"},...b?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(S=>({label:S.name,value:S.id}))]),d=G(()=>m.total-(f.value.amount||0)),g=G(()=>{const S=f.value.amount||0;return m.total,S<=0?"Jumlah pembayaran harus lebih dari 0.":f.value.method==="wallet"&&b&&S>b.wallet_balance?"Saldo wallet tidak mencukupi.":null}),_=G(()=>g.value===null),y=()=>{if(!_.value)return;n.value=!0;const S={total_paid:f.value.amount,payments:[{id:f.value.method,amount:f.value.amount}],notes:f.value.notes,change:Math.max(0,(f.value.amount||0)-m.total),remaining_debt:Math.max(0,m.total-(f.value.amount||0))};o("accepted",S),n.value=!1},x=()=>{f.value.amount=m.total,f.value.method="cash",f.value.notes=null};return(S,C)=>{const j=W("my-link");return u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":C[4]||(C[4]=z=>S.$emit("update:modelValue",z)),onBeforeShow:x},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,null,{default:a(()=>C[5]||(C[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ee,{class:"q-pt-none"},{default:a(()=>[l(b)?(u(),h("div",A0,[t("div",M0,[t("div",null,[e(j,{href:S.route("admin.customer.detail",{id:l(b).id}),target:"_blank"},{default:a(()=>[v(r(l(b).code)+" - "+r(l(b).name),1)]),_:1},8,["href"])]),t("div",{class:qe(l(b).wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(l(L)(l(b).wallet_balance)),3),t("div",{class:qe(l(b).balance>0?"text-green":"text-red")},r(l(b).balance>0?"Piutang":"Utang")+": "+r(l(L)(l(b).balance)),3)])])):k("",!0),t("div",N0," Total: Rp. "+r(l(L)(c.total)),1),e(l(ce),{modelValue:f.value.method,"onUpdate:modelValue":C[0]||(C[0]=z=>f.value.method=z),options:p.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"q-mb-md",disable:n.value},null,8,["modelValue","options","disable"]),e(Be,{modelValue:f.value.amount,"onUpdate:modelValue":C[1]||(C[1]=z=>f.value.amount=z),label:"Jumlah Uang",outlined:!0,dense:"",disable:n.value,class:"q-mb-md",error:!_.value,"error-message":g.value},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:f.value.notes,"onUpdate:modelValue":C[2]||(C[2]=z=>f.value.notes=z),label:"Catatan",outlined:!0,type:"textarea",rows:"2",disable:n.value,class:"q-mb-md"},null,8,["modelValue","disable"]),t("div",B0,[d.value>0?(u(),h("div",F0," Sisa Tagihan: Rp. "+r(l(L)(d.value)),1)):d.value<0?(u(),h("div",z0," Kembalian: Rp. "+r(l(L)(Math.abs(d.value))),1)):(u(),h("div",L0," Tagihan Terbayar "))])]),_:1}),e(lt,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(M,{flat:"",label:"Batal",color:"grey",onClick:C[3]||(C[3]=z=>S.$emit("update:modelValue",!1))}),e(M,{label:"Bayar",color:"positive",onClick:y,disable:n.value||!_.value,loading:n.value},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},H0=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),K0={class:"column"},Y0={class:"row"},W0={class:"full-width",style:{"border-collapse":"collapse"}},Q0={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},J0={class:"row items-center q-gutter-x-sm"},G0={class:"text-weight-bold"},X0={class:"row items-center q-gutter-x-sm q-mt-xs"},Z0={class:"text-caption text-grey-6"},e2={key:0,class:"row items-center q-gutter-x-sm q-mt-xs"},t2={class:"q-mt-xs"},a2={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},l2={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},o2={key:0},n2={class:"text-right q-pa-sm"},cn={__name:"PaymentTab",props:{data:Object},setup(c){const s=c,m=he(),o=T(!1),i=()=>{o.value=!0},n=async b=>{const p={order_id:s.data.id,payments:b.payments,notes:b.notes};m.loading.show({message:"Memproses pembayaran..."});try{const d=await Ue.post(route("admin.sales-order.add-payment"),p);m.notify({message:"Pembayaran berhasil diproses!",color:"positive",icon:"check_circle"}),o.value=!1,K.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(d){let g="Gagal memproses pembayaran.";d.response&&d.response.data&&d.response.data.message?g=d.response.data.message:d.message&&(g=d.message),m.notify({message:g,color:"negative",icon:"error"})}finally{m.loading.hide()}},f=b=>{m.dialog({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus pembayaran ini?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({message:"Menghapus pembayaran..."});try{await Ue.post(route("admin.sales-order.delete-payment",{id:b.id})),m.notify({message:"Pembayaran berhasil dihapus!",color:"positive",icon:"check_circle"}),K.visit(route("admin.sales-order.detail",{id:s.data.id})+"?tab=payment")}catch(p){let d="Gagal menghapus pembayaran.";p.response&&p.response.data&&p.response.data.message?d=p.response.data.message:p.message&&(d=p.message),m.notify({message:d,color:"negative",icon:"error"})}finally{m.loading.hide()}})};return(b,p)=>{const d=W("my-link");return u(),h(H,null,[t("div",K0,[e(Re),e(ee,{class:"q-pa-sm"},{default:a(()=>[t("div",Y0,[b.$can("admin.sales-order.add-payment")?(u(),U(M,{key:0,label:"Tambah",color:"primary",icon:"add",dense:"",class:"custom-dense",size:"sm",onClick:p[0]||(p[0]=Q(g=>i(),["stop"]))})):k("",!0)]),t("table",W0,[p[5]||(p[5]=t("thead",{class:"text-grey-8"},[t("tr",null,[t("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Detail Transaksi "),t("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) "),t("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}})])],-1)),t("tbody",null,[(u(!0),h(H,null,je(s.data.payments,g=>(u(),h("tr",{key:g.id},[t("td",Q0,[t("div",J0,[e(q,{name:"tag",size:"xs",color:"grey-7"}),t("span",G0,r(g.code),1)]),t("div",X0,[e(q,{name:"calendar_today",size:"xs",color:"grey-7"}),t("span",Z0,r(l(ve)(g.created_at)),1)]),(g.type==="transfer"||g.type==="cash")&&g.account?(u(),h("div",e2,[e(q,{name:"wallet",size:"xs",color:"grey-7"}),e(d,{href:b.route("admin.finance-account.detail",{id:g.account.id})},{default:a(()=>[v(r(g.account.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",t2,[e(it,{label:b.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[g.type],color:"secondary",class:"q-py-xs"},null,8,["label"]),e(it,{label:g.amount>0?"Pembayaran":"Refund",color:g.amount>0?"green":"red",class:"q-py-xs q-ml-sm"},null,8,["label","color"])])]),t("td",a2,r(l(L)(g.amount)),1),t("td",l2,[b.$can("admin.sales-order.delete-payment")&&s.data.customer_id&&g.amount>0?(u(),U(M,{key:0,icon:"delete",color:"negative",dense:"",flat:"",rounded:"",size:"sm",onClick:_=>f(g)},null,8,["onClick"])):k("",!0)])]))),128)),s.data.payments.length==0?(u(),h("tr",o2,p[2]||(p[2]=[t("td",{colspan:"100%",class:"text-center text-grey"},"Belum ada item",-1)]))):k("",!0)]),t("tfoot",null,[t("tr",null,[p[3]||(p[3]=t("th",{class:"text-right q-pa-sm",colspan:"1"},"Saldo",-1)),t("th",n2,r(l(L)(s.data.balance)),1),p[4]||(p[4]=t("td",null,null,-1))])])])]),_:1})]),e(mn,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=g=>o.value=g),total:Math.abs(s.data.balance),customer:s.data.customer,onAccepted:n},null,8,["modelValue","total","customer"])],64)}}},s2=Object.freeze(Object.defineProperty({__proto__:null,default:cn},Symbol.toStringTag,{value:"Module"})),r2={class:"q-gutter-sm"},i2={class:"col col-lg-6 q-pa-xs",align:"center"},Bl="Rincian Penjualan",d2={__name:"Detail",setup(c){const s=new URLSearchParams(window.location.search),m=fe(),o=m.props.data,i=T(s.get("preview")||!1),f=T(s.get("tab")||"invoice");xe(()=>{bt(()=>{const p=s.get("print_size");p&&b(p)})});const b=p=>{window.open(route("admin.sales-order.print",{id:m.props.data.id,size:p}),"_self")};return(p,d)=>{const g=W("i-head"),_=W("authenticated-layout");return u(),h(H,null,[e(g,{title:Bl}),e(_,{"show-drawer-button":!0},{title:a(()=>[t("div",{class:"row items-center q-gutter-x-sm"},[t("span",null,r(Bl))])]),"left-button":a(()=>[t("div",r2,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=y=>i.value?l(K).get(p.route("admin.sales-order.edit",l(m).props.data.id)):l(K).get(p.route("admin.sales-order.index")))})])]),"right-button":a(()=>[e(M,{icon:"receipt",dense:"",color:"primary",flat:"",rounded:"",onClick:d[1]||(d[1]=y=>b("58mm"))}),e(M,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:d[2]||(d[2]=y=>b("a4"))}),i.value?k("",!0):(u(),U(M,{key:0,class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:d[3]||(d[3]=y=>l(K).get(p.route("admin.sales-order.add")))}))]),default:a(()=>[e(Te,{class:"row justify-center print-visible"},{default:a(()=>[t("div",i2,[e(de,{square:"",flat:"",bordered:"",class:qe(["full-width",i.value?"draft-label":f.value!="invoice"?"":l(m).props.data.payment_status=="fully_paid"?"paid-label":"unpaid-label"]),style:{"max-width":"1024px"}},{default:a(()=>[e(Tt,{modelValue:f.value,"onUpdate:modelValue":d[4]||(d[4]=y=>f.value=y),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"invoice",label:"Invoice"}),i.value?k("",!0):(u(),U(dt,{key:0,name:"payment",label:"Pembayaran"}))]),_:1},8,["modelValue"]),e(Re),e(Pt,{modelValue:f.value,"onUpdate:modelValue":d[5]||(d[5]=y=>f.value=y),animated:""},{default:a(()=>[e(ut,{name:"invoice",class:"q-pa-none"},{default:a(()=>[e(un,{data:l(o)},null,8,["data"])]),_:1}),e(ut,{name:"payment",class:"q-pa-none"},{default:a(()=>[e(cn,{data:l(o)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])])]),_:1})]),_:1})],64)}}},u2=Object.freeze(Object.defineProperty({__proto__:null,default:d2},Symbol.toStringTag,{value:"Module"})),m2={class:"text-weight-medium"},c2={class:"text-caption text-grey-6 elipsis"},p2={class:"column items-end"},f2={class:"text-caption text-grey-6 text-italic"},pn={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(c){const s=he(),m=ot(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(i,n)=>(u(),U(Me,{dense:"",rows:c.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item",style:Ye({height:l(m)})},{header:a(f=>[e(Oe,{props:f,class:"bg-grey-4"},{default:a(()=>[(u(!0),h(H,null,je(f.cols,b=>(u(),U(ta,{key:b.name,props:f,class:"text-weight-bold text-grey-8"},{default:a(()=>[v(r(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(f=>[e(Oe,{props:f,class:"hover-highlight"},{default:a(()=>[e(Y,{key:"name",props:f,class:"text-left wrap-column"},{default:a(()=>[t("div",m2,r(f.row.product_name),1),t("div",c2,r(f.row.product_barcode),1),f.row.notes?(u(),U(Se,{key:0,text:f.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"subtotal_price",props:f,class:"text-right"},{default:a(()=>[t("div",p2,[t("div",null,r(l(L)(f.row.subtotal_price)),1),t("div",f2,r(l(L)(f.row.quantity))+" "+r(f.row.product_uom)+" x Rp. "+r(l(L)(f.row.price)),1)])]),_:2},1032,["props"]),e(Y,{key:"action",props:f,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(M,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:b=>i.$emit("edit-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"]),e(M,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:b=>i.$emit("remove-item",f.row),disable:c.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},g2=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),b2={key:0,class:"text-center q-mb-md text-grey-8"},v2={class:"text-subtitle2 text-weight-medium"},_2={class:"text-h5 text-center text-primary q-pb-md"},y2={class:"q-mb-md flex flex-center"},k2={key:1},w2={class:"col-6"},h2={class:"col-6"},$2={class:"row"},x2={class:"text-center q-mt-md"},S2={key:0,class:"text-h6 text-negative text-weight-bold"},V2={key:1,class:"text-h6 text-green-8 text-weight-bold"},q2={key:2,class:"text-h6 text-positive text-weight-bold"},C2={key:2},T2={class:"text-h6 text-negative text-center"},P2={key:3},fn={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(c,{emit:s}){const m=c,o=s,i=fe(),n=T(!1),f=T("cash"),b=T(new Date),p=T(i.props.settings.after_payment_action??"print"),d=T([]),g=T([]),_=Ee([{id:"cash",amount:0}]),y=i.props.settings.default_payment_mode,x=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian"},{value:"new-order",label:"Penjualan Baru"}],S=G(()=>[{label:"Laci Kasir",value:"cash"},...m.customer?[{label:"Wallet",value:"wallet"}]:[],...i.props.accounts.map(A=>({label:A.name,value:A.id}))]),C=G(()=>_.reduce((A,N)=>A+(N.amount||0),0)),j=G(()=>m.total-C.value),z=G(()=>{if(!m.customer)return!0;const A=_.find(oe=>oe.id==="wallet");return(A?A.amount:0)<=m.customer.wallet_balance}),V=new Date,E=mt.addToDate(new Date,{days:30}),I=G(()=>[A=>!!A||"Tanggal jatuh tempo harus diisi",A=>mt.isBetweenDates(A,V,E,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),O=G(()=>{if(f.value==="debt")return!!m.customer&&I.value.every(_e=>_e(b.value)===!0);const A=z.value,N=_.some(_e=>(_e.amount||0)>0),oe=_.every(_e=>(_e.amount||0)>=0),ge=j.value<=0;return A&&N&&oe&&ge}),B=()=>{if(_.length<3){const A=_.length;_.push({id:"cash",amount:0}),bt(()=>{const N=d.value[A];N&&(N.focus(),N.showPopup())})}},w=A=>{if(_.length>1){const N=_.findIndex(oe=>oe.id===A);N!==-1&&_.splice(N,1)}},$=(A,N="cash")=>{f.value=A,b.value=new Date,_.splice(0,_.length),A==="cash"&&(_.splice(0,_.length,{id:N,amount:m.total}),bt(()=>{g.value.length>0&&g.value[0]&&(g.value[0].focus(),g.value[0].select())}))},D=()=>{if(!O.value)return;n.value=!0;let A={total:m.total,is_debt:f.value==="debt",after_payment_action:p.value};if(f.value==="debt")A.due_date=mt.formatDate(b.value,"YYYY-MM-DD"),A.payments=[];else{const N=C.value,oe=N>m.total?N-m.total:0,ge=j.value>0?j.value:0;A.payments=_,A.remaining_debt=ge,A.change=oe}o("accepted",A),n.value=!1},R=()=>{$("cash",m.customer?y:"cash")};xe(()=>{const A=N=>{m.modelValue&&N.ctrlKey&&N.key==="Enter"&&(N.preventDefault(),D())};document.addEventListener("keydown",A),$t(()=>{document.removeEventListener("keydown",A)})});const P=(A,N)=>{bt(()=>{g.value[N]&&(g.value[N].focus(),g.value[N].select())})};return(A,N)=>{const oe=W("my-link");return u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":N[4]||(N[4]=ge=>A.$emit("update:modelValue",ge)),onBeforeShow:R},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,null,{default:a(()=>N[5]||(N[5]=[t("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(ee,{class:"q-pt-none"},{default:a(()=>[c.customer?(u(),h("div",b2,[t("div",v2,[t("div",null,[e(oe,{href:A.route("admin.customer.detail",{id:c.customer.id}),target:"_blank"},{default:a(()=>[v(r(c.customer.code)+" - "+r(c.customer.name),1)]),_:1},8,["href"])]),t("div",{class:qe(c.customer.wallet_balance>0?"text-green":"text-red")}," Saldo Wallet: Rp. "+r(l(L)(c.customer.wallet_balance)),3),t("div",{class:qe(c.customer.balance>0?"text-green":"text-red")},r(c.customer.balance>0?"Piutang":"Utang")+": "+r(l(L)(c.customer.balance)),3)])])):k("",!0),t("div",_2," Total: Rp. "+r(l(L)(c.total)),1),t("div",y2,[e(l(Kt),{modelValue:f.value,"onUpdate:modelValue":[N[0]||(N[0]=ge=>f.value=ge),$],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!c.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),f.value==="cash"?(u(),h("div",k2,[(u(!0),h(H,null,je(_,(ge,_e)=>(u(),h("div",{key:_e,class:"row q-col-gutter-sm q-mb-sm"},[t("div",w2,[e(l(ce),{modelValue:ge.id,"onUpdate:modelValue":[ue=>ge.id=ue,ue=>P(ue,_e)],options:S.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:n.value,"hide-bottom-space":"",ref_for:!0,ref:ue=>d.value[_e]=ue},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),t("div",h2,[e(Be,{modelValue:ge.amount,"onUpdate:modelValue":ue=>ge.amount=ue,label:"Jumlah",outlined:!0,dense:"",disable:n.value,error:ge.id==="wallet"&&!z.value,"error-message":ge.id==="wallet"&&!z.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:ue=>g.value[_e]=ue},ze({_:2},[_.length>1?{name:"append",fn:a(()=>[e(q,{size:"xs",name:"close",class:"cursor-pointer",onClick:ue=>w(ge.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),t("div",$2,[e(M,{disable:!(_.length<3&&j.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:B,size:"sm"},null,8,["disable"])]),t("div",x2,[j.value>0?(u(),h("div",S2," Sisa Tagihan: Rp. "+r(l(L)(j.value)),1)):j.value<0?(u(),h("div",V2," Kembalian: Rp. "+r(l(L)(Math.abs(j.value))),1)):(u(),h("div",q2," Tagihan Terbayar "))])])):f.value==="debt"&&c.customer?(u(),h("div",C2,[e(ua,{outlined:"",modelValue:b.value,"onUpdate:modelValue":N[1]||(N[1]=ge=>b.value=ge),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":l(V),"max-date":l(E),rules:I.value},null,8,["modelValue","min-date","max-date","rules"]),t("div",T2," Total Utang: Rp. "+r(l(L)(c.total)),1)])):f.value==="debt"&&!c.customer?(u(),h("div",P2,N[6]||(N[6]=[t("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):k("",!0)]),_:1}),e(lt,{align:"center",class:"q-mb-sm row q-gutter-xs q-pa-md"},{default:a(()=>[e(l(ce),{modelValue:p.value,"onUpdate:modelValue":N[2]||(N[2]=ge=>p.value=ge),options:x,label:"Aksi setelah bayar",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select col",disable:n.value,"hide-bottom-space":""},null,8,["modelValue","disable"]),e(M,{flat:"",label:"Batal",color:"grey",onClick:N[3]||(N[3]=ge=>A.$emit("update:modelValue",!1)),class:"col"}),e(M,{label:f.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:D,disable:n.value||!O.value,loading:n.value,class:"col"},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},R2=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"})),O2={class:"row items-center no-wrap"},D2={class:"col-auto"},gn={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=G(()=>o.item.quantity*o.item.price),b=g=>{g.stopPropagation(),g.preventDefault()},p=g=>{o.modelValue&&(g.key==="Enter"?(n(),i("update:modelValue",!1),b(g)):g.key==="Escape"&&(i("update:modelValue",!1),b(g)))};return xe(()=>{window.addEventListener("keydown",p)}),$t(()=>{window.removeEventListener("keydown",p)}),s({getCurrentItem:()=>o.item}),(g,_)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":_[6]||(_[6]=y=>g.$emit("update:modelValue",y))},{default:a(()=>[e(de,null,{default:a(()=>[e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",O2,[_[7]||(_[7]=t("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),t("div",D2,[e(M,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=y=>g.$emit("update:modelValue",!1))})])])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>{var y;return[e(re,{modelValue:c.item.product_name,"onUpdate:modelValue":_[1]||(_[1]=x=>c.item.product_name=x),label:"Produk","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(Be,{modelValue:c.item.quantity,"onUpdate:modelValue":_[2]||(_[2]=x=>c.item.quantity=x),label:`Kwantitas (${c.item.product_uom})`,"hide-bottom-space":"",autofocus:"",disable:c.isProcessing},null,8,["modelValue","label","disable"]),e(Be,{modelValue:c.item.price,"onUpdate:modelValue":_[3]||(_[3]=x=>c.item.price=x),label:"Harga (Rp)",readonly:!((y=c.item.product)!=null&&y.price_editable),"hide-bottom-space":"",disable:c.isProcessing},null,8,["modelValue","readonly","disable"]),e(Be,{modelValue:f.value,"onUpdate:modelValue":_[4]||(_[4]=x=>f.value=x),label:"Subtotal (Rp)","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(re,{modelValue:c.item.notes,"onUpdate:modelValue":_[5]||(_[5]=x=>c.item.notes=x),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]}),_:1}),e(lt,{align:"right"},{default:a(()=>[ae(e(M,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),ae(e(M,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},I2=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),U2={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(c,{emit:s}){return(m,o)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":o[0]||(o[0]=i=>m.$emit("update:modelValue",i))},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[t("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(ee,null,{default:a(()=>o[2]||(o[2]=[t("table",{style:{width:"100%"},class:"info-table"},[t("thead",null,[t("tr",null,[t("th",null,"Shortcut"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",null,"F1"),t("td",null,"Dialog Bantuan")]),t("tr",null,[t("td",null,"F2"),t("td",null,"Pilih Pelanggan")]),t("tr",null,[t("td",null,"F3"),t("td",null,"Aktifkan Input Barcode<")]),t("tr",null,[t("td",null,"F4"),t("td",null,"Gabung / pisahkan item saat input")]),t("tr",null,[t("td",null,"F10 / Ctrl+Enter"),t("td",null,"Bayar / Selesai")])])],-1)])),_:1}),e(lt,{align:"center"},{default:a(()=>[ae(e(M,{dense:"",label:"Tutup"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},bn=kt(U2,[["__scopeId","data-v-92052544"]]),j2=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"})),E2={class:"row items-center no-wrap"},A2={class:"col text-subtite text-bold text-grey-8"},M2={class:"col-auto"},vn={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(c,{expose:s,emit:m}){const o=c,i=m,n=()=>{i("save")},f=d=>{d.stopPropagation(),d.preventDefault()},b=d=>{o.modelValue&&(d.key==="Enter"?(n(),f(d)):d.key==="Escape"&&(i("update:modelValue",!1),f(d)))};return xe(()=>{window.addEventListener("keydown",b)}),$t(()=>{window.removeEventListener("keydown",b)}),s({getCurrentItem:()=>o.item}),(d,g)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":g[4]||(g[4]=_=>d.$emit("update:modelValue",_))},{default:a(()=>[e(de,null,{default:a(()=>[e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",E2,[t("div",A2," Edit "+r(c.data.code),1),t("div",M2,[e(M,{flat:"",size:"sm",round:"",icon:"close",onClick:g[0]||(g[0]=_=>d.$emit("update:modelValue",!1))})])])]),_:1}),e(ee,{class:"q-py-sm"},{default:a(()=>[e(Ze,{modelValue:c.data.datetime,"onUpdate:modelValue":g[1]||(g[1]=_=>c.data.datetime=_),label:"Waktu","hide-bottom-space":"",disable:c.isProcessing,readonly:"",autofocus:""},null,8,["modelValue","disable"]),e(re,{modelValue:d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status],"onUpdate:modelValue":g[2]||(g[2]=_=>d.$CONSTANTS.SALES_ORDER_STATUSES[c.data.status]=_),label:"Status","hide-bottom-space":"",readonly:"",disable:c.isProcessing},null,8,["modelValue","disable"]),e(re,{modelValue:c.data.notes,"onUpdate:modelValue":g[3]||(g[3]=_=>c.data.notes=_),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(lt,{align:"right"},{default:a(()=>[ae(e(M,{flat:"",label:"Batal",color:"primary",disable:c.isProcessing},null,8,["disable"]),[[me]]),ae(e(M,{flat:"",label:"Simpan",color:"primary",onClick:n,disable:c.isProcessing},null,8,["disable"]),[[me]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},N2=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"})),B2={key:0},F2={style:{float:"right"}},z2={key:1},L2={style:{float:"right"}},H2={key:2},K2={style:{float:"right"}},Y2={key:3},W2={style:{float:"right"}},Q2={style:{float:"right"}},J2={class:"q-gutter-sm"},G2={class:"q-my-md"},X2={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const m=T(null),o=()=>{var i;(i=m.value)==null||i.focus()};return(i,n)=>(u(),U(nt,{"model-value":c.modelValue,"onUpdate:modelValue":n[0]||(n[0]=f=>i.$emit("update:modelValue",f)),onBeforeShow:o,persistent:""},{default:a(()=>[e(de,{style:{"min-width":"300px"}},{default:a(()=>[e(ee,{class:"q-py-none q-pt-md"},{default:a(()=>n[1]||(n[1]=[t("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(ee,{align:"center"},{default:a(()=>[n[22]||(n[22]=t("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),t("table",null,[t("tbody",null,[t("tr",null,[n[2]||(n[2]=t("td",null,"ID",-1)),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,r(c.order.code),1)]),c.customer?(u(),h("tr",B2,[n[5]||(n[5]=t("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),n[6]||(n[6]=t("td",{style:{"vertical-align":"top"}},":",-1)),t("td",null,[v(r(c.customer.name)+" ",1),n[4]||(n[4]=t("br",null,null,-1)),v(r(c.customer.code),1)])])):k("",!0),t("tr",null,[n[8]||(n[8]=t("td",null,"Total",-1)),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,[n[7]||(n[7]=v(" Rp. ")),t("div",F2,r(l(L)(c.payment.total)),1)])]),c.payment.cash_amount?(u(),h("tr",z2,[n[11]||(n[11]=t("td",null,"Tunai",-1)),n[12]||(n[12]=t("td",null,":",-1)),t("td",null,[n[10]||(n[10]=v(" Rp. ")),t("div",L2,r(l(L)(c.payment.cash_amount)),1)])])):k("",!0),c.payment.wallet_amount?(u(),h("tr",H2,[n[14]||(n[14]=t("td",null,"Wallet",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,[n[13]||(n[13]=v(" Rp. ")),t("div",K2,r(l(L)(c.payment.wallet_amount)),1)])])):k("",!0),c.payment.remaining_debt?(u(),h("tr",Y2,[n[17]||(n[17]=t("td",null,"Piutang",-1)),n[18]||(n[18]=t("td",null,":",-1)),t("td",null,[n[16]||(n[16]=v(" Rp. ")),t("span",W2,r(l(L)(c.payment.remaining_debt)),1)])])):k("",!0),t("tr",null,[n[20]||(n[20]=t("td",null,"Kembalian",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[n[19]||(n[19]=v(" Rp. ")),t("div",Q2,r(l(L)(c.payment.change)),1)])])])])]),_:1}),e(lt,{align:"center"},{default:a(()=>[t("div",J2,[e(M,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:m,color:"green"},null,512),e(M,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),t("div",G2,[e(M,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},_n=kt(X2,[["__scopeId","data-v-794fd35f"]]),Z2=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"})),eh={class:"q-gutter-sm"},th={class:"row items-center"},ah={class:"text-weight-bold"},lh={class:"text-weight-bold"},oh={class:"row q-col-gutter-none full-width"},nh={class:"col-sm-6 col-12 col q-pa-sm"},sh={class:"row full-width"},rh={class:"col-sm-6 col-12"},ih={class:"row q-ml-sm items-end"},dh={class:"row col grow"},uh={class:"col-12 q-px-sm column"},mh={class:"row items-start q-col-gutter-none q-px-sm"},ch={key:0,class:"col"},ph={class:"text-caption text-grey-6"},fh={key:0,class:"text-caption text-grey-8 q-mt-xs"},gh={class:"text-italic"},bh={key:1,class:"col"},vh={class:"text-grey-8"},_h={class:"col"},yh={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},kh={class:"text-h4 text-weight-bold"},wh={class:"row q-col-gutter-sm q-py-xs q-px-sm"},hh={class:"col"},$h={__name:"Editor",setup(c){const s=he(),m=fe(),o=T(!0),i=T(null),n=T(null),f=T(null),b=T(!1),p=T(null),d=T(null),{isFullscreen:g,toggleFullscreen:_}=wa(d),y=m.props.data.code,x=T(m.props.data.customer),S=T(null),C=T(""),j=T(!1),z=T(!1),V=T(!1),E=T(!1),I=T(!1),O=T(!1),B=T(null),w=T("price_1"),$=Ee({id:m.props.data.id,code:m.props.data.code,customer_id:m.props.data.customer_id,datetime:new Date(m.props.data.datetime),status:m.props.data.status,payment_status:m.props.data.payment_status,delivery_status:m.props.data.delivery_status,notes:m.props.data.notes,items:m.props.data.details??[]}),D=G(()=>$.items.reduce((ie,Z)=>ie+Z.price*Z.quantity,0)),R=()=>{_()},P=ie=>isNaN(ie)||ie<=0?(vt("Kuantitas tidak valid.","top"),!1):!0,A=ie=>isNaN(ie)||ie<0?(vt("Harga tidak valid.","top"),!1):!0,N=ie=>!ie||ie.length==0?(vt("Barcode tidak valid.","top"),!1):!0,oe=ie=>{var Z;(Z=C.value)!=null&&Z.endsWith("*")?C.value+=ie.name:C.value=ie.name},ge=async()=>{var _t;if(j.value)return;const ie=(_t=C.value)==null?void 0:_t.trim();if(ie.length===0){V.value=!0;return}const Z=ie.split("*");let pe=1,Pe="",$e=null;if(Z.length===1)Pe=Z[0];else if(Z.length<=3)pe=parseInt(Z[0]),Pe=Z[1],Z.length===3&&($e=parseFloat(Z[2]));else{vt("Input tidak valid.","top");return}if(Pe.length===0){V.value=!0;return}!N(Pe)&&!P(pe)&&!A($e)||(j.value=!0,await Ue.post(route("admin.sales-order.add-item"),{order_id:$.id,product_code:Pe,qty:pe,price:$e,merge:o.value}).then(xt=>{const It=xt.data.data.item;let At=-1;xt.data.data.mergeItem&&(At=$.items.findIndex(zt=>zt.id===It.id)),At===-1?$.items.push(It):$.items[At]=It,C.value="",$e!==null&&$e!==parseFloat(It.price)&&vt("Harga tidak dapat diubah!","top")}).catch(xt=>{var It,At;ft((At=(It=xt.response)==null?void 0:It.data)==null?void 0:At.message,"top"),console.error("Gagal mengambil data produk:",xt)}),j.value=!1,bt(()=>{var xt;(xt=i.value)==null||xt.focus()}))},_e=ie=>{B.value=Object.create(ie),E.value=!0},ue=ie=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ie.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{j.value=!0,Ue.post(route("admin.sales-order.remove-item"),{id:ie.id}).then(()=>{const Z=$.items.findIndex(pe=>pe.id===ie.id);Z!==-1&&($.items.splice(Z,1)[0],gt("Item telah dihapus","top"))}).catch(Z=>{var pe,Pe;ft(((Pe=(pe=Z==null?void 0:Z.response)==null?void 0:pe.data)==null?void 0:Pe.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(Z)}).finally(()=>{j.value=!1})})},Ie=()=>{j.value=!0;const ie=n.value.getCurrentItem(),Z={id:ie.id,qty:ie.quantity};ie.product.price_editable&&(Z.price=ie.price),ie.notes&&(Z.notes=ie.notes),Ue.post(route("admin.sales-order.update-item"),Z).then(pe=>{const Pe=pe.data.data,$e=$.items.findIndex(_t=>_t.id===Pe.id);$e!==-1&&($.items[$e]=Pe,gt("Item telah diperbarui","top"))}).catch(pe=>{var Pe,$e;ft((($e=(Pe=pe==null?void 0:pe.response)==null?void 0:Pe.data)==null?void 0:$e.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(pe)}).finally(()=>{j.value=!1})};xe(()=>{const ie=Z=>{z.value||b.value||E.value||V.value||I.value||(Z.key==="F1"?(Z.preventDefault(),b.value=!0):Z.key==="F2"?(Z.preventDefault(),f.value.focus()):Z.key==="F3"?(Z.preventDefault(),i.value.focus()):Z.key==="F4"?(Z.preventDefault(),o.value=!o.value):Z.key==="F10"||Z.ctrlKey&&Z.key==="Enter"?(Z.preventDefault(),J.value&&(z.value=!0)):Z.key==="F11"?(Z.preventDefault(),R()):(Z.key==="F5"||Z.key==="F6"||Z.key==="F7"||Z.key==="F12")&&Z.preventDefault())};document.addEventListener("keydown",ie),$t(()=>{document.removeEventListener("keydown",ie)})});const ke=async ie=>{x.value=ie,$.customer_id=ie==null?void 0:ie.id,await X(),ie!=null&&ie.id?(w.value=x.value.default_price_type??"price_1",i.value.focus()):(w.value="price_1",f.value.focus())},X=async()=>{j.value=!0;const ie={id:$.id,customer_id:$.customer_id??null,datetime:Zt($.datetime),notes:$.notes};await Ue.post(route("admin.sales-order.update"),ie).then(Z=>{const pe=Z.data.data.id;$.customer_id=pe.customer_id}).catch(Z=>{var pe,Pe;ft(((Pe=(pe=Z==null?void 0:Z.response)==null?void 0:pe.data)==null?void 0:Pe.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Z)}).finally(()=>{j.value=!1})},te=ie=>{if($.items.length===0){gt("Item masih kosong","top");return}const Z={id:$.id,...ie};j.value=!0,Ue.post(route("admin.sales-order.close"),Z).then(pe=>{gt("Transaksi selesai"),Z.after_payment_action==="print"?window.open(route("admin.sales-order.print",{id:$.id,size:m.props.settings.default_print_size}),"_self"):Z.after_payment_action==="detail"?K.get(route("admin.sales-order.detail",{id:$.id})):Z.after_payment_action==="new-order"&&K.get(route("admin.sales-order.add"))}).catch(pe=>{var Pe,$e;ft(($e=(Pe=pe.response)==null?void 0:Pe.data)==null?void 0:$e.message),console.error(pe)}).finally(()=>{j.value=!1})},we=()=>{Vt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.sales-order.cancel",{id:$.id}),{id:$.id}).then(()=>{gt("Transaksi telah dibatalkan."),K.visit(route("admin.sales-order.detail",{id:$.id}))}).catch(ie=>{var pe,Pe;const Z=((Pe=(pe=ie.response)==null?void 0:pe.data)==null?void 0:Pe.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:Z,color:"warning",position:"bottom"}),console.error(ie)})})},ne=()=>{window.open(route("admin.sales-order.detail",{id:$.id})+"?preview=1","_blank")};G(()=>x.value?x.value.wallet_balance>=D.value:!0);const J=G(()=>Dt().appContext.config.globalProperties.$can("admin.sales-order.close")&&!j.value&&$.items.length!==0&&$.status==="draft");return(ie,Z)=>{const pe=W("i-head"),Pe=W("authenticated-layout");return u(),h(H,null,[e(pe,{title:l(y)},null,8,["title"]),e(Pe,{ref_key:"authLayoutRef",ref:p,"show-drawer-button":!0},{title:a(()=>[v(r(l(y)),1)]),"left-button":a(()=>[t("div",eh,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:Z[0]||(Z[0]=$e=>l(K).get(ie.route("admin.sales-order.index")))})])]),"right-button":a(()=>{var $e,_t;return[t("div",th,[l(s).screen.gt.sm?(u(),h(H,{key:0},[t("div",ah,r(l(m).props.auth.user.username),1),Z[23]||(Z[23]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",lh,r((_t=($e=l(m).props.data.cashier_session)==null?void 0:$e.cashier_terminal)==null?void 0:_t.name),1),Z[24]||(Z[24]=t("div",{class:"q-mx-sm"},"|",-1)),t("div",null,[e(ka)])],64)):k("",!0),k("",!0)])]}),default:a(()=>[e(Te,{class:"bg-grey-2 column fit"},{default:a(()=>[e(de,{square:"",flat:"",class:"full-width col column"},{default:a(()=>[t("div",oh,[t("div",nh,[t("div",sh,[e(sn,{ref_key:"customerAutocompleteRef",ref:f,class:"custom-select full-width col col-12 bg-white",modelValue:x.value,"onUpdate:modelValue":Z[2]||(Z[2]=$e=>x.value=$e),label:"Pelanggan",disable:j.value,onCustomerSelected:ke,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),x.value?(u(),U(xa,{key:0,party:x.value,"is-valid-wallet-balance":!0},null,8,["party"])):k("",!0)])]),t("div",rh,[e($a,{ref_key:"userInputRef",ref:i,modelValue:C.value,"onUpdate:modelValue":Z[3]||(Z[3]=$e=>C.value=$e),onKeyup:Z[4]||(Z[4]=Yt(Q($e=>ge(),["prevent"]),["enter"])),onScanSuccess:Z[5]||(Z[5]=$e=>ge()),onSend:Z[6]||(Z[6]=$e=>ge()),onSearch:Z[7]||(Z[7]=$e=>V.value=!0),loading:j.value,disable:j.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-xs bg-white",outlined:"",clearable:""},null,8,["modelValue","loading","disable"]),t("div",ih,[e(Rt,{class:"col",modelValue:o.value,"onUpdate:modelValue":Z[8]||(Z[8]=$e=>o.value=$e),label:"Gabungkan item",disable:j.value},null,8,["modelValue","disable"])])])]),t("div",dh,[t("div",uh,[e(pn,{items:$.items,onUpdateQuantity:Z[9]||(Z[9]=({id:$e,value:_t})=>ie.updateQuantity($e,_t)),onRemoveItem:ue,onEditItem:_e,"is-processing":j.value},null,8,["items","is-processing"])])]),t("div",mh,[l(s).screen.gt.sm?(u(),h("div",ch,[t("div",ph,r($.items.length)+" item(s) ",1),$.notes?(u(),h("div",fh,[Z[25]||(Z[25]=t("div",{class:"text-bold"},"Catatan:",-1)),t("div",gh,[e(Se,{text:$.notes},null,8,["text"])])])):k("",!0)])):k("",!0),l(s).screen.gt.sm?(u(),h("div",bh,[t("div",vh,[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),v(r($.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)($.datetime)),1)])])])):k("",!0),t("div",_h,[t("div",yh,[Z[27]||(Z[27]=t("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),t("span",kh,[Z[26]||(Z[26]=t("sup",{style:{"font-size":"13px"}},"Rp.",-1)),v(" "+r(l(L)(D.value)),1)])])])]),t("div",wh,[t("div",hh,[e(M,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:Z[10]||(Z[10]=$e=>z.value=!0),disable:!J.value,loading:j.value},null,8,["disable","loading"])]),t("div",null,[e(M,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:Z[14]||(Z[14]=Q(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[ae((u(),U(le,{clickable:"",onClick:Z[11]||(Z[11]=Q($e=>I.value=!0,["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>Z[28]||(Z[28]=[v("Edit Rincian")])),_:1})]),_:1})),[[se],[me]]),ae((u(),U(le,{clickable:"",onClick:Z[12]||(Z[12]=Q($e=>ne(),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"preview"})]),_:1}),e(F,null,{default:a(()=>Z[29]||(Z[29]=[v("Pratinjau")])),_:1})]),_:1})),[[se],[me]]),ae((u(),U(le,{clickable:"",onClick:Z[13]||(Z[13]=Q($e=>we(),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"cancel",color:"negative"})]),_:1}),e(F,{class:"text-negative"},{default:a(()=>Z[30]||(Z[30]=[v(" Batalkan ")])),_:1})]),_:1})),[[se],[me]]),e(Re)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(gn,{ref_key:"itemEditorRef",ref:n,modelValue:E.value,"onUpdate:modelValue":Z[15]||(Z[15]=$e=>E.value=$e),item:B.value,onSave:Z[16]||(Z[16]=$e=>Ie()),"is-processing":j.value},null,8,["modelValue","item","is-processing"]),e(fn,{modelValue:z.value,"onUpdate:modelValue":Z[17]||(Z[17]=$e=>z.value=$e),onAccepted:te,form:$,customer:x.value,total:D.value,accounts:l(m).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(ha,{modelValue:V.value,"onUpdate:modelValue":Z[18]||(Z[18]=$e=>V.value=$e),onProductSelected:oe,priceType:w.value,"show-cost":ie.$can("admin.product:view-cost")},null,8,["modelValue","priceType","show-cost"]),e(vn,{modelValue:I.value,"onUpdate:modelValue":Z[19]||(Z[19]=$e=>I.value=$e),data:$,onSave:Z[20]||(Z[20]=$e=>X()),"is-processing":j.value},null,8,["modelValue","data","is-processing"]),e(bn,{modelValue:b.value,"onUpdate:modelValue":Z[21]||(Z[21]=$e=>b.value=$e)},null,8,["modelValue"]),e(_n,{modelValue:O.value,"onUpdate:modelValue":Z[22]||(Z[22]=$e=>O.value=$e),order:$,customer:x.value,total:D.value,payment:S.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},xh=Object.freeze(Object.defineProperty({__proto__:null,default:$h},Symbol.toStringTag,{value:"Module"})),Sh={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.SALES_ORDER_STATUSES,m={draft:"orange",closed:"green",canceled:"red"};return(o,i)=>(u(),U(Ft,{status:c.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}},Vh={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(c){const s=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,m={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,i)=>(u(),U(Ft,{status:c.status,statuses:l(s),colors:m},null,8,["status","statuses"]))}};const qh={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ch={class:"q-pa-xs"},Th={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ph={key:0},Rh={key:1},Oh={key:2},Dh={key:4},Ih={key:0},Uh={key:1},jh={key:0},Eh={key:0},Ah={key:1},Mh={class:"flex justify-end"},Fl="Penjualan",Nh={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=De().startOf("month").toDate(),d=De().endOf("month").toDate(),g=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.SALES_ORDER_STATUSES)],_=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],y=[{value:"all",label:"Semua Status"},...Fe(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],x=Ee({search:"",status:"all",payment_status:"all",delivery_status:"all",start_date:p,end_date:d,...He()}),S=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"cashier_id",label:"Kasir",field:"cashier_id",align:"left"},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"grand_total",label:"Total (Rp)",field:"grand_total",align:"right"},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];xe(()=>{O()});const j=$=>{if($.status=="draft"){z($);return}V($)},z=$=>{K.get(route("admin.sales-order.edit",$.id))},V=$=>{K.get(route("admin.sales-order.detail",$.id))},E=$=>{Vt.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${$.code}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{Ue.post(route("admin.sales-order.cancel",{id:$.id}),{id:$.id}).then(D=>{const R=D.data.data,P=o.value.findIndex(A=>A.id===R.id);if(P===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[P].status="canceled",s.notify({message:D.data.message,position:"bottom"})}).catch(D=>{var P,A;const R=((A=(P=D.response)==null?void 0:P.data)==null?void 0:A.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:R,color:"warning",position:"bottom"}),console.error(D)})})},I=$=>st({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${$.code}?`,url:route("admin.sales-order.delete",$.id),fetchItemsCallback:O,loading:i}),O=($=null)=>{const D={...x,start_date:De(x.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:De(x.end_date).format("YYYY-MM-DD HH:mm:ss")};Ke({pagination:S,filter:D,props:$,rows:o,url:route("admin.sales-order.data"),loading:i,tableRef:n})},B=()=>{O()},w=G(()=>s.screen.gt.sm?C:C.filter($=>$.name==="id"||$.name==="action"));return($,D)=>{const R=W("i-head"),P=W("authenticated-layout");return u(),h(H,null,[e(R,{title:Fl}),e(P,null,ze({title:a(()=>[v(r(Fl))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:D[0]||(D[0]=A=>m.value=!m.value)},null,8,["icon"]),$.$can("admin.sales-order.edit")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:D[1]||(D[1]=A=>l(K).get($.route("admin.sales-order.add")))})):k("",!0)]),default:a(()=>[t("div",Ch,[e(Me,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:S.value,"onUpdate:pagination":D[11]||(D[11]=A=>S.value=A),filter:x.search,loading:i.value,columns:w.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(b)}),onRequest:O,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:A,message:N,filter:oe})=>[t("div",Th,[t("span",null,r(N)+" "+r(oe?" with term "+oe:""),1)])]),body:a(A=>[e(Oe,{props:A,class:"cursor-pointer",onClick:Q(N=>j(A.row),["prevent"])},{default:a(()=>[e(Y,{key:"id",props:A,class:"wrap-column"},{default:a(()=>{var N,oe,ge;return[t("div",null,[e(q,{name:"tag"}),v(" "+r(A.row.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_today"}),v(r(l(ve)(A.row.datetime)),1)]),l(s).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[A.row.cashier?(u(),h("div",Ph,[e(q,{name:"person",class:"inline-icon"}),v(" Kasir: "+r((N=A.row.cashier)==null?void 0:N.username),1)])):k("",!0),A.row.cashier_session?(u(),h("div",Rh,[e(q,{name:"point_of_sale",class:"inline-icon"}),v(" Terminal: "+r((ge=(oe=A.row.cashier_session)==null?void 0:oe.cashier_terminal)==null?void 0:ge.name),1)])):k("",!0),A.row.customer?(u(),h("div",Oh,[e(q,{name:"person",class:"inline-icon"}),D[12]||(D[12]=v(" Pelanggan: ")),e(ba,{href:$.route("admin.customer.detail",{id:A.row.customer.id}),onClick:D[8]||(D[8]=Q(()=>{},["stop"]))},{default:a(()=>[v(" "+r(A.row.customer.code)+" - "+r(A.row.customer.name),1)]),_:2},1032,["href"])])):k("",!0),t("div",null,[e(q,{name:"wallet",class:"inline-icon"}),v(" Total: Rp. "+r(l(L)(A.row.grand_total)),1)]),A.row.balance!=0?(u(),h("div",{key:3,class:qe(A.row.balance>0?"text-green":"text-red")},[e(q,{name:"balance",class:"inline-icon"}),v(" "+r(A.row.balance>0?"Piutang":"Utang")+": Rp. "+r(l(L)(A.row.balance)),1)],2)):k("",!0),A.row.notes?(u(),h("div",Dh,[e(q,{name:"notes"}),v(" "+r(A.row.notes),1)])):k("",!0)],64)),t("div",null,[e(Sh,{status:A.row.status},null,8,["status"]),A.row.status=="closed"?(u(),h(H,{key:0},[e(Vh,{status:A.row.payment_status},null,8,["status"]),k("",!0)],64)):k("",!0)])]}),_:2},1032,["props"]),e(Y,{key:"cashier_id",props:A},{default:a(()=>{var N,oe,ge;return[A.row.cashier?(u(),h("div",Ih,[e(q,{name:"person",class:"inline-icon"}),v(" "+r((N=A.row.cashier)==null?void 0:N.username),1)])):k("",!0),A.row.cashier_session?(u(),h("div",Uh,[e(q,{name:"point_of_sale",class:"inline-icon"}),v(" "+r((ge=(oe=A.row.cashier_session)==null?void 0:oe.cashier_terminal)==null?void 0:ge.name),1)])):k("",!0)]}),_:2},1032,["props"]),e(Y,{key:"customer_id",props:A},{default:a(()=>[A.row.customer?(u(),h("div",jh,[t("div",null,[e(q,{name:"person",class:"inline-icon"}),v(" "+r(A.row.customer_code)+" - "+r(A.row.customer_name),1)]),A.row.customer_phone?(u(),h("div",Eh,[e(q,{name:"phone",class:"inline-icon"}),v(" "+r(A.row.customer_phone),1)])):k("",!0),A.row.customer_address?(u(),h("div",Ah,[e(q,{name:"home_pin",class:"inline-icon"}),v(" "+r(A.row.customer_address),1)])):k("",!0)])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:A},{default:a(()=>[v(r(l(L)(A.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:A,class:qe(A.row.balance>0?"text-green":"text-red")},{default:a(()=>[v(r(l(L)(A.row.balance)),1)]),_:2},1032,["props","class"]),e(Y,{key:"notes",props:A},{default:a(()=>[e(Se,{text:A.row.notes,icon:"notes"},null,8,["text"])]),_:2},1032,["props"]),e(Y,{key:"action",props:A,onClick:D[10]||(D[10]=Q(()=>{},["stop"]))},{default:a(()=>[t("div",Mh,[$.$can("admin.sales-order.detail")||$.$can("admin.sales-order.edit")||$.$can("admin.sales-order.cancel")||$.$can("admin.sales-order.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:D[9]||(D[9]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[A.row.status!="draft"&&$.$can("admin.sales-order.detail")?ae((u(),U(le,{key:0,onClick:Q(N=>V(A.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"visibility"})]),_:1}),e(F,null,{default:a(()=>D[13]||(D[13]=[v(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),A.row.status=="draft"&&$.$can("admin.sales-order.edit")?ae((u(),U(le,{key:1,onClick:Q(N=>z(A.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>D[14]||(D[14]=[v(" Edit ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),A.row.status=="draft"&&$.$can("admin.sales-order.cancel")?ae((u(),U(le,{key:2,onClick:Q(N=>E(A.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"cancel"})]),_:1}),e(F,null,{default:a(()=>D[15]||(D[15]=[v(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),e(Re),$.$can("admin.sales-order.delete")?ae((u(),U(le,{key:3,onClick:Q(N=>I(A.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>D[16]||(D[16]=[v(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",qh,[e(Ze,{modelValue:x.start_date,"onUpdate:modelValue":[D[2]||(D[2]=A=>x.start_date=A),B],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Ze,{modelValue:x.end_date,"onUpdate:modelValue":[D[3]||(D[3]=A=>x.end_date=A),B],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:x.status,"onUpdate:modelValue":[D[4]||(D[4]=A=>x.status=A),B],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(ce,{modelValue:x.payment_status,"onUpdate:modelValue":[D[5]||(D[5]=A=>x.payment_status=A),B],options:_,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k("",!0),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":D[7]||(D[7]=A=>x.search=A),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Bh=Object.freeze(Object.defineProperty({__proto__:null,default:Nh},Symbol.toStringTag,{value:"Module"})),Fh={},zh={class:"row"},Lh={class:"q-mb-md text-h6"};function Hh(c,s){const m=W("i-head"),o=W("authenticated-layout");return u(),h(H,null,[e(m,{title:"Informasi Sistem"}),e(o,null,{title:a(()=>s[0]||(s[0]=[v("Informasi Sistem")])),default:a(()=>[t("div",zh,[e(de,{class:"col q-ma-xs",square:"",flat:"",bordered:""},{default:a(()=>[e(ee,null,{default:a(()=>[t("div",Lh,"Tentang "+r(c.$config.APP_NAME),1),v(" Versi : "+r(c.$config.APP_VERSION_STR),1),s[1]||(s[1]=t("br",null,null,-1)),s[2]||(s[2]=v(" Dikembangkan oleh Shiftech Indonesia")),s[3]||(s[3]=t("br",null,null,-1)),s[4]||(s[4]=v(" CV. Shift Karya Teknologi "))]),_:1})]),_:1})])]),_:1})],64)}const Kh=kt(Fh,[["render",Hh]]),Yh=Object.freeze(Object.defineProperty({__proto__:null,default:Kh},Symbol.toStringTag,{value:"Module"})),yn={__name:"CompanyInfoForm",setup(c){const s=T(),m=fe(),o=Je({name:m.props.data.name,headline:m.props.data.headline,phone:m.props.data.phone,address:m.props.data.address,logo_path:m.props.data.logo_path,logo_image:null}),i=T(null),n=T("");xe(()=>{o.logo_path&&(n.value=`/${o.logo_path}`)});function f(){i.value.click()}function b(g){const _=g.target.files[0];_&&(o.logo_image=_,n.value=URL.createObjectURL(_))}function p(){o.logo_image=null,o.logo_path=null,n.value=null,i.value.value=null}const d=()=>rt({form:o,url:route("admin.company-profile.edit")});return(g,_)=>(u(),U(Ge,{class:"row",onSubmit:Q(d,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(ee,null,{default:a(()=>[_[8]||(_[8]=t("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),_[9]||(_[9]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(re,{ref_key:"nameInputRef",ref:s,modelValue:l(o).name,"onUpdate:modelValue":_[0]||(_[0]=y=>l(o).name=y),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[y=>y&&y.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(re,{modelValue:l(o).headline,"onUpdate:modelValue":_[1]||(_[1]=y=>l(o).headline=y),modelModifiers:{trim:!0},label:"Headline",disable:l(o).processing,maxlength:"200","lazy-rules":"",error:!!l(o).errors.headline,"error-message":l(o).errors.headline,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).phone,"onUpdate:modelValue":_[2]||(_[2]=y=>l(o).phone=y),modelModifiers:{trim:!0},label:"No Telepon",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.phone,"error-message":l(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(re,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(o).address,"onUpdate:modelValue":_[3]||(_[3]=y=>l(o).address=y),modelModifiers:{trim:!0},label:"Alamat",disable:l(o).processing,"lazy-rules":"",error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",null,[_[7]||(_[7]=t("div",{class:"text-subtitle1 q-my-sm"},"Logo:",-1)),e(M,{label:"Browse Logo",size:"sm",onClick:f,color:"secondary",icon:"add_a_photo",disable:l(o).processing},null,8,["disable"]),e(M,{class:"q-ml-sm",size:"sm",icon:"close",label:"Buang",disable:l(o).processing||!n.value,color:"red",onClick:p},null,8,["disable"]),t("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*",style:{display:"none"},onChange:b},null,544),t("div",null,[e(ia,{src:n.value,class:"q-mt-md",ratio:1,"spinner-color":"white",style:{width:"240px",border:"1px solid #ddd"}},ze({error:a(()=>[_[4]||(_[4]=t("div",{class:"text-negative text-center q-pa-md"}," Gambar tidak tersedia ",-1))]),_:2},[n.value?void 0:{name:"default",fn:a(()=>[_[5]||(_[5]=t("div",{class:"absolute-full text-subtitle2 flex flex-center"}," Logo belum diset ",-1))]),key:"0"}]),1032,["src"]),_[6]||(_[6]=t("p",{class:"q-my-sm text-grey-9"}," Logo akan di resize ke ukuran 240px x 240px ",-1))])])]),_:1}),e(ee,null,{default:a(()=>[e(M,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Wh=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"})),Qh={class:"q-pa-xs"},Jh={class:"row justify-center"},Gh={class:"col col-md-6"},zl="Profil Perusahaan",Xh={__name:"Edit",setup(c){return(s,m)=>{const o=W("i-head"),i=W("authenticated-layout");return u(),h(H,null,[e(o,{title:zl}),e(i,null,{title:a(()=>[v(r(zl))]),default:a(()=>[t("div",Qh,[t("div",Jh,[t("div",Gh,[e(yn)])])])]),_:1})],64)}}},Zh=Object.freeze(Object.defineProperty({__proto__:null,default:Xh},Symbol.toStringTag,{value:"Module"})),e$={class:"col-xs-12 col-md-8"},t$={class:"col-xs-12 col-sm-9"},a$={class:"col-xs-12 col-sm-3 text-right"},Ll="Pengaturan Database & Utilitas",l$={__name:"Index",setup(c){const s=[{name:"Akses Log Operasi Database",icon:"insights",color:"primary",description:"Melihat riwayat operasi database untuk mendiagnosis masalah, melacak aktifitas pengguna, dan memantau *error* aplikasi. Log ini penting untuk *troubleshooting*.",action:()=>console.log("Aksi: Lihat Log Sistem"),disable:!0},{name:"Buat Salinan Cadangan (Backup)",icon:"cloud_download",color:"positive",description:"Membuat salinan cadangan (*backup*) lengkap dari seluruh database saat ini dan mengunduh data ke perangkat lokal.",warning:"Pastikan proses backup berjalan sepenuhnya sebelum menutup halaman. Waktu pemrosesan tergantung ukuran database Anda.",action:()=>console.log("Aksi: Mulai Backup"),disable:!0},{name:"Pulihkan Database (Restore)",icon:"cloud_upload",color:"negative",description:"Memulihkan database ke kondisi terakhir dari file cadangan (*backup*). Semua data setelah waktu backup akan hilang permanen.",warning:" **Peringatan Kritis:** Tindakan ini akan **menghapus semua data saat ini** dan digantikan oleh data dari file backup. Lakukan dengan sangat hati-hati.",action:()=>console.log("Aksi: Mulai Restore"),disable:!0},{name:"Reset Database Transaksional",icon:"data_thresholding",color:"deep-orange-10",description:"Mengosongkan semua tabel data transaksional (penjualan, stok, pembelian, transaksi keuangan, operasional, dll.). Data master seperti pelanggan, pemasok, produk, dan akun pengguna **tidak akan dihapus**.",warning:" **Hati-hati:** Semua riwayat transaksi dan operasional akan **hilang permanen**. Data master aman, tetapi relasi data akan terputus.",action:()=>console.log("Aksi: Mulai Reset Transaksional"),disable:!0},{name:"Reset Database Total",icon:"delete_forever",color:"red-10",description:"Mengosongkan semua tabel data termasuk data master (pelanggan, produk, pemasok, dll.), dan mengembalikan database ke kondisi awal instalasi. Hanya menyisakan konfigurasi sistem.",warning:" **Tindakan Penghapusan Data Total:** Semua data (transaksi dan master) akan **hilang permanen**. Gunakan hanya untuk tujuan testing atau reset menyeluruh.",action:()=>console.log("Aksi: Mulai Reset Total"),disable:!0}];return(m,o)=>{const i=W("i-head"),n=W("authenticated-layout");return u(),h(H,null,[e(i,{title:Ll}),e(n,null,{title:a(()=>[v(r(Ll))]),default:a(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",e$,[e(de,{square:"",flat:"",bordered:"",class:"full-width"},{default:a(()=>[e(ee,null,{default:a(()=>[o[2]||(o[2]=t("div",{class:"text-subtitle1 text-bold text-grey-8"}," Pengaturan Database & Utilitas ",-1)),e(Wt,{dense:"",rounded:"",class:"bg-yellow-4 text-dark q-mt-sm"},{avatar:a(()=>[e(q,{name:"warning",color:"red"})]),default:a(()=>[o[0]||(o[0]=t("span",{class:"text-bold"},"PERINGATAN!",-1)),o[1]||(o[1]=v(" Bagian ini berisi alat-alat sensitif yang dapat memengaruhi ketersediaan dan integritas data Anda. Gunakan dengan penuh tanggung jawab. "))]),_:1})]),_:1}),e(Re),e(ee,{class:"q-gutter-y-lg"},{default:a(()=>[(u(),h(H,null,je(s,f=>t("div",{key:f.name,class:"row items-center q-col-gutter-md"},[t("div",t$,[e(le,{class:"q-pa-none"},{default:a(()=>[e(F,{avatar:"",class:"q-pr-md"},{default:a(()=>[e(q,{name:f.icon,color:f.color,size:"lg"},null,8,["name","color"])]),_:2},1024),e(F,{style:{"text-wrap":"initial"}},{default:a(()=>[e(be,{class:"text-subtitle1 text-bold"},{default:a(()=>[v(r(f.name),1)]),_:2},1024),e(be,{caption:"",class:"q-pb-sm"},{default:a(()=>[v(r(f.description),1)]),_:2},1024),e(be,{class:"text-caption text-negative text-bold"},{default:a(()=>[v(r(f.warning),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),t("div",a$,[e(M,{icon:f.icon,label:f.name.split(" ")[0],color:f.color,disable:f.disable,onClick:f.action,class:"full-width"},null,8,["icon","label","color","disable","onClick"])])])),64))]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},o$=Object.freeze(Object.defineProperty({__proto__:null,default:l$},Symbol.toStringTag,{value:"Module"})),n$={class:"q-pa-xs"},s$={class:"row justify-center"},r$={class:"col col-md-6"},i$={__name:"Edit",setup(c){const s=fe(),m=Je({foot_note:s.props.data.foot_note,default_payment_mode:s.props.data.default_payment_mode,default_print_size:s.props.data.default_print_size,after_payment_action:s.props.data.after_payment_action}),o=()=>rt({form:m,url:route("admin.pos-settings.edit")}),i=[{value:"cash",label:"Tunai"},{value:"wallet",label:"Wallet"}],n=[{value:"58mm",label:"Struk 58mm"},{value:"a4",label:"Nota A4"}],f=[{value:"print",label:"Cetak"},{value:"detail",label:"Rincian Order"},{value:"new-order",label:"Order Baru"}];return(b,p)=>{const d=W("i-head"),g=W("authenticated-layout");return u(),h(H,null,[e(d,{title:"Pengaturan POS"}),e(g,null,{title:a(()=>p[4]||(p[4]=[v("Pengaturan POS")])),default:a(()=>[t("div",n$,[t("div",s$,[t("div",r$,[e(Ge,{class:"row",onSubmit:Q(o,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(ee,null,{default:a(()=>[p[5]||(p[5]=t("div",{class:"text-subtitle1 q-my-xs"}," Pengaturan POS (Point of Sales) ",-1)),p[6]||(p[6]=t("p",{class:"text-caption text-grey-9"},"Perbarui pengaturan POS.",-1)),e(ce,{modelValue:l(m).default_payment_mode,"onUpdate:modelValue":p[0]||(p[0]=_=>l(m).default_payment_mode=_),label:"Default Pembayaran",options:i,"map-options":"","emit-value":"","lazy-rules":"",disable:l(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(m).errors.default_payment_mode,"error-message":l(m).errors.default_payment_mode,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(m).default_print_size,"onUpdate:modelValue":p[1]||(p[1]=_=>l(m).default_print_size=_),label:"Default Ukuran Cetak",options:n,"map-options":"","emit-value":"","lazy-rules":"",disable:l(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(m).errors.default_print_size,"error-message":l(m).errors.default_print_size,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(ce,{modelValue:l(m).after_payment_action,"onUpdate:modelValue":p[2]||(p[2]=_=>l(m).after_payment_action=_),label:"Aksi Setelah Pembayaran",options:f,"map-options":"","emit-value":"","lazy-rules":"",disable:l(m).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(m).errors.after_payment_action,"error-message":l(m).errors.after_payment_action,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(re,{type:"textarea",counter:"",autogrow:"",maxlength:"500",modelValue:l(m).foot_note,"onUpdate:modelValue":p[3]||(p[3]=_=>l(m).foot_note=_),modelModifiers:{trim:!0},label:"Foot Note",disable:l(m).processing,"lazy-rules":"",error:!!l(m).errors.foot_note,"error-message":l(m).errors.foot_note,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ee,null,{default:a(()=>[e(M,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:l(m).processing,loading:l(m).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])])])]),_:1})],64)}}},d$=Object.freeze(Object.defineProperty({__proto__:null,default:i$},Symbol.toStringTag,{value:"Module"})),u$={class:"q-gutter-sm"},m$={class:"q-gutter-sm"},c$={class:"col col-md-6 q-pa-xs"},p$={class:"row"},f$={class:"detail-item"},g$={class:"detail-value"},b$={class:"detail-item"},v$={class:"detail-value"},_$={class:"detail-item"},y$={class:"detail-value"},k$={class:"detail-item"},w$={class:"detail-value"},h$={class:"detail-item"},$$={class:"detail-value"},x$={class:"detail-item"},S$={class:"detail-value"},V$={class:"detail-item"},q$={class:"detail-value"},C$={class:"detail-item"},T$={class:"detail-value user-agent-value"},P$={class:"q-pt-md"},R$={class:"table-wrapper-scroll"},O$={key:0,class:"table-metadata"},D$={key:0},I$={colspan:"100%"},U$={class:"text-mono json-pre-scroll"},j$={key:1},E$={class:"metadata-label",style:{width:"100px"}},A$={class:"metadata-value"},M$={key:0,class:"text-mono json-pre-scroll"},N$={key:2},B$={colspan:"3"},F$={class:"table-metadata"},z$={class:"metadata-label"},L$={class:"metadata-value"},H$={class:"metadata-value"},K$={key:1,class:"text-grey-8 text-italic q-pa-sm"},Hl="Rincian Log Aktifitas",Y$={__name:"Detail",setup(c){const s=fe(),m=()=>st({message:`Hapus log aktifitas #${s.props.data.id}?`,url:route("admin.user-activity-log.delete",s.props.data.id),onSuccess:()=>{K.get(route("admin.user-activity-log.index"))}});return(o,i)=>{const n=W("i-head"),f=W("i-link"),b=W("authenticated-layout");return u(),h(H,null,[e(n,{title:Hl}),e(b,{"show-drawer-button":!0},{title:a(()=>[v(r(Hl))]),"left-button":a(()=>[t("div",u$,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=p=>l(K).get(o.route("admin.user-activity-log.index")))})])]),"right-button":a(()=>[t("div",m$,[e(M,{icon:"delete",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:i[1]||(i[1]=p=>m())})])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",c$,[t("div",p$,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"detail-group"},{default:a(()=>[i[20]||(i[20]=t("div",{class:"text-subtitle1 text-bold text-grey-8 q-mb-sm"}," Info Log Aktifitas Pengguna ",-1)),t("div",f$,[i[2]||(i[2]=t("div",{class:"detail-label"},"ID",-1)),i[3]||(i[3]=t("div",{class:"detail-separator"},":",-1)),t("div",g$,r(l(s).props.data.id),1)]),t("div",b$,[i[4]||(i[4]=t("div",{class:"detail-label"},"Waktu",-1)),i[5]||(i[5]=t("div",{class:"detail-separator"},":",-1)),t("div",v$,r(l(ve)(l(s).props.data.logged_at)),1)]),t("div",_$,[i[6]||(i[6]=t("div",{class:"detail-label"},"Pengguna",-1)),i[7]||(i[7]=t("div",{class:"detail-separator"},":",-1)),t("div",y$,[e(f,{href:o.route("admin.user.detail",{id:l(s).props.data.user_id})},{default:a(()=>[v(r(l(s).props.data.username),1)]),_:1},8,["href"])])]),t("div",k$,[i[8]||(i[8]=t("div",{class:"detail-label"},"Kategori",-1)),i[9]||(i[9]=t("div",{class:"detail-separator"},":",-1)),t("div",w$,r(l(s).props.data.activity_category_label),1)]),t("div",h$,[i[10]||(i[10]=t("div",{class:"detail-label"},"Aktifitas",-1)),i[11]||(i[11]=t("div",{class:"detail-separator"},":",-1)),t("div",$$,r(l(s).props.data.activity_name_label),1)]),t("div",x$,[i[12]||(i[12]=t("div",{class:"detail-label"},"Deskripsi",-1)),i[13]||(i[13]=t("div",{class:"detail-separator"},":",-1)),t("div",S$,r(l(s).props.data.description),1)]),t("div",V$,[i[14]||(i[14]=t("div",{class:"detail-label"},"Alamat IP",-1)),i[15]||(i[15]=t("div",{class:"detail-separator"},":",-1)),t("div",q$,r(l(s).props.data.ip_address),1)]),t("div",C$,[i[16]||(i[16]=t("div",{class:"detail-label"},"User Agent",-1)),i[17]||(i[17]=t("div",{class:"detail-separator"},":",-1)),t("div",T$,r(l(s).props.data.user_agent),1)]),t("div",P$,[i[19]||(i[19]=t("div",{class:"q-my-sm text-bold text-grey-8"},"Meta Data:",-1)),t("div",R$,[Object.keys(l(s).props.data.metadata).length>0?(u(),h("table",O$,[t("tbody",null,[(u(!0),h(H,null,je(l(s).props.formatted_metadata,(p,d)=>(u(),h(H,{key:d},[p.type==="plain"?(u(),h("tr",D$,[t("td",I$,[t("pre",U$,r(p.value),1)])])):k("",!0),p.type==="simple"?(u(),h("tr",j$,[t("td",E$,r(p.label),1),t("td",A$,[p.label=="Data Mentah (JSON)"?(u(),h("pre",M$,r(p.value),1)):(u(),h(H,{key:1},[v(r(p.value),1)],64))])])):k("",!0),p.type==="comparison"?(u(),h("tr",N$,[t("td",B$,[t("table",F$,[i[18]||(i[18]=t("thead",null,[t("tr",null,[t("td",{class:"metadata-header",style:{width:"100px"}}," Bidang "),t("td",{class:"metadata-header"},"Nilai Lama"),t("td",{class:"metadata-header"},"Nilai Baru")])],-1)),t("tbody",null,[(u(!0),h(H,null,je(p.value,(g,_)=>(u(),h("tr",{class:qe(g.new_value!==g.old_value?"value-changed":"")},[t("td",z$,r(g.field),1),t("td",L$,r(g.old_value),1),t("td",H$,r(g.new_value),1)],2))),256))])])])])):k("",!0)],64))),128))])])):(u(),h("div",K$," Tidak tersedia "))])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},W$=kt(Y$,[["__scopeId","data-v-a10644eb"]]),Q$=Object.freeze(Object.defineProperty({__proto__:null,default:W$},Symbol.toStringTag,{value:"Module"})),J$={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},G$={class:"q-pa-xs"},X$={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Z$={key:0},ex={class:"flex justify-end"},Kl="Log Aktifitas Pengguna",tx={__name:"Index",setup(c){const s=fe(),m=he(),o=T(!1),i=T([]),n=T(!0),f=T(null),b=T(null),p=ot(b),{protectClick:d}=Et(),g=Ee({user_id:"all",activity_category:"all",activity_name:"all",search:"",...He()}),_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),y=[{value:"all",label:"Semua"},...s.props.users.map(P=>({value:P.id,label:P.username+" - "+P.name}))],x=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_categories).map(([P,A])=>({value:P,label:A}))],S=[{value:"all",label:"Semua"},...Object.entries(s.props.activity_names).map(([P,A])=>({value:P,label:A}))],C=T(x),j=T(S),z=(P,A)=>{if(P===""){A(()=>{C.value=x});return}A(()=>{const N=P.toLowerCase();C.value=x.filter(oe=>oe.label.toLowerCase().indexOf(N)>-1)})},V=(P,A)=>{if(P===""){A(()=>{j.value=S});return}A(()=>{const N=P.toLowerCase();j.value=S.filter(oe=>oe.label.toLowerCase().indexOf(N)>-1)})},E=[{name:"id",label:m.screen.lt.md?"Log Item":"ID",field:"id",align:"left",sortable:!0},{name:"logged_at",label:"Waktu",field:"logged_at",align:"left",sortable:!0},{name:"username",label:"Pengguna",field:"username",align:"left",sortable:!0},{name:"activity_category",label:"Kategori Aktifitas",field:"activity_category",align:"left",sortable:!0},{name:"activity_name",label:"Nama Aktifitas",field:"activity_name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];xe(()=>{O()});const I=P=>st({message:`Hapus log #${P.id}?`,url:route("admin.user-activity-log.delete",P.id),fetchItemsCallback:O,loading:n}),O=(P=null)=>{Ke({pagination:_,filter:g,props:P,rows:i,url:route("admin.user-activity-log.data"),loading:n,tableRef:f})},B=()=>O(),$=d(P=>K.get(route("admin.user-activity-log.detail",{id:P.id}))),D=G(()=>m.screen.gt.sm?E:E.filter(P=>P.name==="id"||P.name==="action")),R=()=>{Vt.create({title:"PERINGATAN: Hapus Permanen Log",message:"Anda yakin ingin menghapus SELURUH log aktivitas pengguna? Aksi ini tidak dapat dibatalkan dan akan menghapus semua rekaman riwayat.",focus:"cancel",cancel:!0,persistent:!0,ok:{label:"YA, HAPUS SEKARANG",color:"negative"},cancel:{label:"Batal"}}).onOk(()=>{axios.post(route("admin.user-activity-log.clear")).then(()=>{gt("Seluruh log telah dibersihkan."),O()}).catch(P=>{var N,oe;const A=((oe=(N=P.response)==null?void 0:N.data)==null?void 0:oe.message)||"Terjadi kesalahan saat membersihkan log aktifitas pengguna.";ft(A,"bottom"),console.error(P)})})};return(P,A)=>{const N=W("i-head"),oe=W("i-link"),ge=W("authenticated-layout");return u(),h(H,null,[e(N,{title:Kl}),e(ge,null,ze({title:a(()=>[v(r(Kl))]),"right-button":a(()=>[e(M,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=_e=>o.value=!o.value)},null,8,["icon"]),P.$can("admin.user-activity-log.clear")?(u(),U(M,{key:0,icon:"delete_sweep",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"negative",onClick:R})):k("",!0)]),default:a(()=>[t("div",G$,[e(Me,{class:"full-height-table",ref_key:"tableRef",ref:f,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":A[7]||(A[7]=_e=>_.value=_e),filter:g.search,loading:n.value,columns:D.value,rows:i.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(p)}),onRequest:O,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:_e,message:ue,filter:Ie})=>[t("div",X$,[t("span",null,r(ue)+" "+r(Ie?" with term "+Ie:""),1)])]),body:a(_e=>[e(Oe,{props:_e,class:"cursor-pointer",onClick:Q(ue=>l($)(_e.row,ue),["stop"])},{default:a(()=>[e(Y,{key:"id",props:_e},{default:a(()=>[t("div",null,[l(m).screen.lt.md?(u(),h(H,{key:0},[e(q,{name:"tag",class:"inline-icon"}),A[8]||(A[8]=v(" ID Aktifitas: "))],64)):k("",!0),v(" "+r(_e.row.id),1)]),l(m).screen.lt.md?(u(),h("div",Z$,[t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(_e.row.logged_at)),1)]),t("div",null,[e(q,{name:"person",class:"inline-icon"}),e(oe,{onClick:A[5]||(A[5]=Q(()=>{},["stop"])),href:P.route("admin.user.detail",{id:_e.row.user_id})},{default:a(()=>[v(r(_e.row.username),1)]),_:2},1032,["href"])]),t("div",null,[e(q,{name:"category",class:"inline-icon"}),v(" "+r(_e.row.activity_category_label)+" > "+r(_e.row.activity_name_label),1)]),t("div",null,[e(q,{name:"notes",class:"inline-icon"}),v(" "+r(_e.row.description),1)])])):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"logged_at",props:_e},{default:a(()=>[v(r(l(ve)(_e.row.logged_at)),1)]),_:2},1032,["props"]),e(Y,{key:"username",props:_e},{default:a(()=>[e(oe,{onClick:A[6]||(A[6]=Q(()=>{},["stop"])),href:P.route("admin.user.detail",{id:_e.row.user_id})},{default:a(()=>[v(r(_e.row.username),1)]),_:2},1032,["href"])]),_:2},1032,["props"]),e(Y,{key:"activity_category",props:_e},{default:a(()=>[v(r(_e.row.activity_category_label),1)]),_:2},1032,["props"]),e(Y,{key:"activity_name",props:_e},{default:a(()=>[v(r(_e.row.activity_name_label),1)]),_:2},1032,["props"]),e(Y,{key:"description",props:_e,class:"wrap-column"},{default:a(()=>[v(r(_e.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:_e},{default:a(()=>[t("div",ex,[P.$can("admin.user-role.delete")?(u(),U(M,{key:0,onClick:Q(ue=>I(_e.row),["stop"]),icon:"delete_forever",flat:"",color:"red",dense:"",size:"sm",rounded:""},null,8,["onClick"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:b},{default:a(()=>[t("div",J$,[e(ce,{modelValue:g.user_id,"onUpdate:modelValue":[A[1]||(A[1]=_e=>g.user_id=_e),B],class:"custom-select col-xs-12 col-sm-2",options:y,label:"Pengguna",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:g.activity_category,"onUpdate:modelValue":[A[2]||(A[2]=_e=>g.activity_category=_e),B],class:"custom-select col-xs-12 col-sm-2",options:C.value,label:"Kategori",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",onFilter:z,clearable:""},null,8,["modelValue","options"]),e(ce,{modelValue:g.activity_name,"onUpdate:modelValue":[A[3]||(A[3]=_e=>g.activity_name=_e),B],class:"custom-select col-xs-12 col-sm-2",options:j.value,label:"Aktifitas",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-input":"",clearable:"",onFilter:V},null,8,["modelValue","options"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":A[4]||(A[4]=_e=>g.search=_e),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ax=Object.freeze(Object.defineProperty({__proto__:null,default:tx},Symbol.toStringTag,{value:"Module"})),kn={__name:"UpdatePasswordForm",setup(c){const s=T(!1),m=T(null),o=T(null),i=Je({current_password:"",password:"",password_confirmation:""}),n=()=>{i.clearErrors(),i.post(route("admin.user-profile.update-password"),{preserveScroll:!0,onSuccess:()=>i.reset(),onError:()=>{i.errors.password&&(i.reset("password","password_confirmation"),m.value.focus()),i.errors.current_password&&(i.reset("current_password"),o.value.focus())}})};return(f,b)=>(u(),U(Ge,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,null,{default:a(()=>[b[6]||(b[6]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),b[7]||(b[7]=t("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(re,{modelValue:l(i).current_password,"onUpdate:modelValue":b[1]||(b[1]=p=>l(i).current_password=p),type:s.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.current_password,"error-message":l(i).errors.current_password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(M,{dense:"",flat:"",round:"",onClick:b[0]||(b[0]=p=>s.value=!s.value)},{default:a(()=>[e(q,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(re,{modelValue:l(i).password,"onUpdate:modelValue":b[3]||(b[3]=p=>l(i).password=p),type:s.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.password,"error-message":l(i).errors.password,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(M,{dense:"",flat:"",round:"",onClick:b[2]||(b[2]=p=>s.value=!s.value)},{default:a(()=>[e(q,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(re,{modelValue:l(i).password_confirmation,"onUpdate:modelValue":b[5]||(b[5]=p=>l(i).password_confirmation=p),type:s.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:l(i).processing,error:!!l(i).errors.password_confirmation,"error-message":l(i).errors.password_confirmation,rules:[p=>p&&p.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(M,{dense:"",flat:"",round:"",onClick:b[4]||(b[4]=p=>s.value=!s.value)},{default:a(()=>[e(q,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(ee,null,{default:a(()=>[e(M,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},lx=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"})),wn={__name:"UpdateProfileInformationForm",setup(c){const m=fe().props.auth.user,o=Je({name:m.name,username:m.username,type:window.CONSTANTS.USER_TYPES[m.type]}),i=()=>rt({form:o,url:route("admin.user-profile.update")});return(n,f)=>(u(),U(Ge,{class:"row",onSubmit:Q(i,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,null,{default:a(()=>[f[3]||(f[3]=t("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),f[4]||(f[4]=t("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(re,{modelValue:l(o).username,"onUpdate:modelValue":f[0]||(f[0]=b=>l(o).username=b),label:"ID Pengguna",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(re,{modelValue:l(o).name,"onUpdate:modelValue":f[1]||(f[1]=b=>l(o).name=b),modelModifiers:{trim:!0},label:"Nama",disable:l(o).processing,error:!!l(o).errors.name,"error-message":l(o).errors.name,rules:[b=>b&&b.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(re,{modelValue:l(o).type,"onUpdate:modelValue":f[2]||(f[2]=b=>l(o).type=b),label:"Jenis Akun",disable:l(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(ee,null,{default:a(()=>[e(M,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:l(o).processing,loading:l(o).processing},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},ox=Object.freeze(Object.defineProperty({__proto__:null,default:wn},Symbol.toStringTag,{value:"Module"})),nx={class:"q-pa-xs"},sx={class:"row justify-center"},rx={class:"col col-md-6"},Yl="Pengaturan Pribadi",ix={__name:"Edit",setup(c){return(s,m)=>{const o=W("i-head"),i=W("authenticated-layout");return u(),h(H,null,[e(o,{title:Yl}),e(i,null,{title:a(()=>[v(r(Yl))]),default:a(()=>[t("div",nx,[t("div",sx,[t("div",rx,[e(wn,{class:"q-mb-md"}),e(kn)])])])]),_:1})],64)}}},dx=Object.freeze(Object.defineProperty({__proto__:null,default:ix},Symbol.toStringTag,{value:"Module"})),ux=jt({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(c,{slots:s,emit:m}){let o=!1,i,n,f=null,b=null,p,d;function g(){i&&i(),i=null,o=!1,f!==null&&(clearTimeout(f),f=null),b!==null&&(clearTimeout(b),b=null),n!==void 0&&n.removeEventListener("transitionend",p),p=null}function _(C,j,z){j!==void 0&&(C.style.height=`${j}px`),C.style.transition=`height ${c.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,i=z}function y(C,j){C.style.overflowY=null,C.style.height=null,C.style.transition=null,g(),j!==d&&m(j)}function x(C,j){let z=0;n=C,o===!0?(g(),z=C.offsetHeight===C.scrollHeight?0:void 0):(d="hide",C.style.overflowY="hidden"),_(C,z,j),f=setTimeout(()=>{f=null,C.style.height=`${C.scrollHeight}px`,p=V=>{b=null,(Object(V)!==V||V.target===C)&&y(C,"show")},C.addEventListener("transitionend",p),b=setTimeout(p,c.duration*1.1)},100)}function S(C,j){let z;n=C,o===!0?g():(d="show",C.style.overflowY="hidden",z=C.scrollHeight),_(C,z,j),f=setTimeout(()=>{f=null,C.style.height=0,p=V=>{b=null,(Object(V)!==V||V.target===C)&&y(C,"hide")},C.addEventListener("transitionend",p),b=setTimeout(p,c.duration*1.1)},100)}return aa(()=>{o===!0&&g()}),()=>Ce(ro,{css:!1,appear:c.appear,onEnter:x,onLeave:S},s.default)}}),Lt=_s({}),mx=Object.keys(vo),qt=jt({name:"QExpansionItem",props:{...vo,...ks,...Ea,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ys,"click","afterShow","afterHide"],setup(c,{slots:s,emit:m}){const{proxy:{$q:o}}=Dt(),i=Aa(c,o),n=T(c.modelValue!==null?c.modelValue:c.defaultOpened),f=T(null),b=ws(),{show:p,hide:d,toggle:g}=hs({showing:n});let _,y;const x=G(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${c.popup===!0?"popup":"standard"}`),S=G(()=>c.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:c.contentInsetLevel*56+"px"}),C=G(()=>c.disable!==!0&&(c.href!==void 0||c.to!==void 0&&c.to!==null&&c.to!=="")),j=G(()=>{const ue={};return mx.forEach(Ie=>{ue[Ie]=c[Ie]}),ue}),z=G(()=>C.value===!0||c.expandIconToggle!==!0),V=G(()=>c.expandedIcon!==void 0&&n.value===!0?c.expandedIcon:c.expandIcon||o.iconSet.expansionItem[c.denseToggle===!0?"denseIcon":"icon"]),E=G(()=>c.disable!==!0&&(C.value===!0||c.expandIconToggle===!0)),I=G(()=>({expanded:n.value===!0,detailsId:b.value,toggle:g,show:p,hide:d})),O=G(()=>{const ue=c.toggleAriaLabel!==void 0?c.toggleAriaLabel:o.lang.label[n.value===!0?"collapse":"expand"](c.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":b.value,"aria-label":ue}});tt(()=>c.group,ue=>{y!==void 0&&y(),ue!==void 0&&P()});function B(ue){C.value!==!0&&g(ue),m("click",ue)}function w(ue){ue.keyCode===13&&$(ue,!0)}function $(ue,Ie){Ie!==!0&&f.value!==null&&f.value.focus(),g(ue),Ht(ue)}function D(){m("afterShow")}function R(){m("afterHide")}function P(){_===void 0&&(_=$s()),n.value===!0&&(Lt[c.group]=_);const ue=tt(n,ke=>{ke===!0?Lt[c.group]=_:Lt[c.group]===_&&delete Lt[c.group]}),Ie=tt(()=>Lt[c.group],(ke,X)=>{X===_&&ke!==void 0&&ke!==_&&d()});y=()=>{ue(),Ie(),Lt[c.group]===_&&delete Lt[c.group],y=void 0}}function A(){const ue={class:[`q-focusable relative-position cursor-pointer${c.denseToggle===!0&&c.switchToggleSide===!0?" items-end":""}`,c.expandIconClass],side:c.switchToggleSide!==!0,avatar:c.switchToggleSide},Ie=[Ce(q,{class:"q-expansion-item__toggle-icon"+(c.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:V.value})];return E.value===!0&&(Object.assign(ue,{tabindex:0,...O.value,onClick:$,onKeyup:w}),Ie.unshift(Ce("div",{ref:f,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),Ce(F,ue,()=>Ie)}function N(){let ue;return s.header!==void 0?ue=[].concat(s.header(I.value)):(ue=[Ce(F,()=>[Ce(be,{lines:c.labelLines},()=>c.label||""),c.caption?Ce(be,{lines:c.captionLines,caption:!0},()=>c.caption):null])],c.icon&&ue[c.switchToggleSide===!0?"push":"unshift"](Ce(F,{side:c.switchToggleSide===!0,avatar:c.switchToggleSide!==!0},()=>Ce(q,{name:c.icon})))),c.disable!==!0&&c.hideExpandIcon!==!0&&ue[c.switchToggleSide===!0?"unshift":"push"](A()),ue}function oe(){const ue={ref:"item",style:c.headerStyle,class:c.headerClass,dark:i.value,disable:c.disable,dense:c.dense,insetLevel:c.headerInsetLevel};return z.value===!0&&(ue.clickable=!0,ue.onClick=B,Object.assign(ue,C.value===!0?j.value:O.value)),Ce(le,ue,N)}function ge(){return ae(Ce("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:S.value,id:b.value},Bt(s.default)),[[mo,n.value]])}function _e(){const ue=[oe(),Ce(ux,{duration:c.duration,onShow:D,onHide:R},ge)];return c.expandSeparator===!0&&ue.push(Ce(Re,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:i.value}),Ce(Re,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:i.value})),ue}return c.group!==void 0&&P(),aa(()=>{y!==void 0&&y()}),()=>Ce("div",{class:x.value},[Ce("div",{class:"q-expansion-item__container relative-position"},_e())])}}),cx={class:"q-gutter-sm"},px={class:"col col-md-8"},fx={class:"q-col-gutter-xs row"},gx={class:"col-xs-12 col-md-5"},bx={class:"row items-center"},vx={class:"text-subtite1 text-bold q-mb-sm"},_x={class:"text-body2"},yx={class:"text-subtitle2 text-bold text-grey-8 q-my-sm"},kx={key:0,class:"q-gutter-xs"},wx={key:1,class:"text-grey-8 text-italic"},hx={class:"col-xs-12 col-md-7"},$x={class:"row items-center"},Wl="Rincian Peran Pengguna",xx={__name:"Detail",setup(c){const s=fe(),m=G(()=>{const o={};return s.props.data.permissions&&s.props.data.permissions.forEach(i=>{const f=i.category.replace("Manajemen ","");o[f]||(o[f]=[]),o[f].push(i)}),o});return(o,i)=>{const n=W("i-head"),f=W("i-link"),b=W("authenticated-layout");return u(),h(H,null,[e(n,{title:Wl}),e(b,null,{title:a(()=>[v(r(Wl))]),"left-button":a(()=>[t("div",cx,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=p=>l(K).get(o.route("admin.user-role.index")))})])]),"right-button":a(()=>i[1]||(i[1]=[])),default:a(()=>[e(Te,{class:"row justify-center q-pa-xs"},{default:a(()=>[t("div",px,[t("div",fx,[t("div",gx,[e(de,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(ee,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",bx,[e(q,{name:"assignment_ind",size:"sm",color:"grey-8",class:"q-mr-sm"}),i[2]||(i[2]=t("div",{class:"text-subtite1 text-bold text-grey-8"}," Info Peran ",-1))])]),_:1}),e(ee,null,{default:a(()=>[t("div",vx,r(l(s).props.data.name),1),i[4]||(i[4]=t("div",{class:"text-subtitle2 text-grey-7"},"Deskripsi:",-1)),t("div",_x,r(l(s).props.data.description||"Tidak ada deskripsi."),1),t("div",yx,[e(q,{name:"group",class:"q-mr-xs"}),i[3]||(i[3]=v(" Pengguna Terdaftar "))]),l(s).props.data.users.length>0?(u(),h("div",kx,[(u(!0),h(H,null,je(l(s).props.data.users,p=>(u(),U(f,{key:p.id,href:o.route("admin.user.detail",{id:p.id}),style:{"text-decoration":"none"}},{default:a(()=>[e(ea,{clickable:"","text-color":"primary",color:"grey-3"},{default:a(()=>[v(r(p.username),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])):(u(),h("div",wx," Belum ada akun pengguna yang terdaftar. "))]),_:1})]),_:1})]),t("div",hx,[e(de,{square:"",flat:"",bordered:"",class:"full-height full-width"},{default:a(()=>[e(ee,{class:"bg-grey-3 q-py-sm"},{default:a(()=>[t("div",$x,[e(q,{name:"security",size:"sm",color:"grey-8",class:"q-mr-sm"}),i[5]||(i[5]=t("div",{class:"text-subtite1 text-grey-8 text-bold"}," Daftar Hak Akses ",-1))])]),_:1}),l(s).props.data.permissions.length>0?(u(),U(ee,{key:0,class:"q-pa-none"},{default:a(()=>[e(Ae,{bordered:"",separator:""},{default:a(()=>[(u(!0),h(H,null,je(m.value,(p,d)=>(u(),U(qt,{key:d,label:d,"header-class":"text-bold bg-grey-1 text-grey-7","default-opened":""},{default:a(()=>[e(ee,{class:"q-py-sm"},{default:a(()=>[t("div",null,[(u(!0),h(H,null,je(p,g=>(u(),U(ea,{key:g.id,color:"grey-2","text-color":"grey-9",size:"sm"},{default:a(()=>[v(r(g.label),1)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})):(u(),U(ee,{key:1},{default:a(()=>i[6]||(i[6]=[t("div",{class:"text-grey-7 text-italic"}," Belum ada hak akses yang ditetapkan. ",-1)])),_:1}))]),_:1})])])])]),_:1})]),_:1})],64)}}},Sx=kt(xx,[["__scopeId","data-v-7dee658a"]]),Vx=Object.freeze(Object.defineProperty({__proto__:null,default:Sx},Symbol.toStringTag,{value:"Module"})),qx={class:"q-gutter-sm"},Cx={class:"col col-md-6 q-pa-xs"},Tx={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},Px={__name:"Editor",setup(c){const s=fe(),m=(s.props.data.id?"Edit":"Tambah")+" Peran Pengguna",o=Je({id:s.props.data.id??null,name:s.props.data.name,description:s.props.data.description,permissions:s.props.data.permissions?s.props.data.permissions.map(f=>f.id):[]}),i=()=>rt({form:o,url:route("admin.user-role.save")}),n=G(()=>{const f={};return s.props.permissions&&s.props.permissions.forEach(b=>{const p=b.category;f[p]||(f[p]=[]),f[p].push(b)}),f});return(f,b)=>{const p=W("i-head"),d=W("authenticated-layout");return u(),h(H,null,[e(p,{title:m}),e(d,null,{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",qx,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>l(K).get(f.route("admin.user-role.index")))})])]),"right-button":a(()=>[e(M,{icon:"save",label:"Simpan",color:"primary",disable:l(o).processing,size:"sm",dense:"",class:"custom-dense",onClick:Q(i,["prevent"])},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",Cx,[e(Ge,{class:"row",onSubmit:Q(i,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(o).id=g)},null,512),[[wt,l(o).id]]),e(re,{autofocus:"",modelValue:l(o).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(o).description,"onUpdate:modelValue":b[3]||(b[3]=g=>l(o).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.description,"error-message":l(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(u(!0),h(H,null,je(n.value,(g,_)=>(u(),h("div",{key:_},[t("div",Tx,r(_),1),(u(!0),h(H,null,je(g,y=>(u(),h("div",{key:y.id},[e(ra,{class:"q-ma-none q-pa-none list-checkbox",modelValue:l(o).permissions,"onUpdate:modelValue":x=>l(o).permissions=x,val:y.id,label:y.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Rx=kt(Px,[["__scopeId","data-v-8b35322b"]]),Ox=Object.freeze(Object.defineProperty({__proto__:null,default:Rx},Symbol.toStringTag,{value:"Module"})),Dx={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ix={class:"q-pa-xs"},Ux={class:"full-width row flex-center text-grey-8 q-gutter-sm"},jx={class:"flex justify-end"},Ql="Peran Pengguna",Ex={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=Ee({search:"",...He()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama Peran",field:"name",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"action",align:"right"}];xe(()=>{y()});const _=z=>st({message:`Hapus role ${z.name}?`,url:route("admin.user-role.delete",z.id),fetchItemsCallback:y,loading:i}),y=(z=null)=>{Ke({pagination:d,filter:p,props:z,rows:o,url:route("admin.user-role.data"),loading:i,tableRef:n})},x=z=>K.get(route("admin.user-role.detail",{id:z.id})),{protectClick:S}=Et(),C=S(x),j=G(()=>s.screen.gt.sm?g:g.filter(z=>z.name==="name"||z.name==="action"));return(z,V)=>{const E=W("i-head"),I=W("authenticated-layout");return u(),h(H,null,[e(E,{title:Ql}),e(I,null,ze({title:a(()=>[v(r(Ql))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:V[0]||(V[0]=O=>m.value=!m.value)},null,8,["icon"]),z.$can("admin.user-role.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:V[1]||(V[1]=O=>l(K).get(z.route("admin.user-role.add")))})):k("",!0)]),default:a(()=>[t("div",Ix,[e(Me,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":V[4]||(V[4]=O=>d.value=O),filter:p.search,loading:i.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:O,message:B,filter:w})=>[t("div",Ux,[t("span",null,r(B)+" "+r(w?" with term "+w:""),1)])]),body:a(O=>[e(Oe,{props:O,class:"cursor-pointer",onClick:Q(B=>l(C)(O.row,B),["stop"])},{default:a(()=>[e(Y,{key:"name",props:O,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(u(),U(q,{key:0,name:"person"})):k("",!0),v(" "+r(O.row.name),1)])]),_:2},1032,["props"]),e(Y,{key:"description",props:O,class:"wrap-column"},{default:a(()=>[v(r(O.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:O},{default:a(()=>[t("div",jx,[z.$can("admin.user-role.add")||z.$can("admin.user-role.edit")||z.$can("admin.user-role.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:V[3]||(V[3]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[z.$can("admin.user-role.add")?ae((u(),U(le,{key:0,clickable:"",onClick:Q(B=>l(K).get(z.route("admin.user-role.duplicate",O.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"file_copy"})]),_:1}),e(F,null,{default:a(()=>V[5]||(V[5]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),z.$can("admin.user-role.edit")?ae((u(),U(le,{key:1,clickable:"",onClick:Q(B=>l(K).get(z.route("admin.user-role.edit",O.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>V[6]||(V[6]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),z.$can("admin.user-role.delete")?ae((u(),U(le,{key:2,onClick:Q(B=>_(O.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>V[7]||(V[7]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",Dx,[e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":V[2]||(V[2]=O=>p.search=O),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ax=Object.freeze(Object.defineProperty({__proto__:null,default:Ex},Symbol.toStringTag,{value:"Module"})),Mx={class:"q-gutter-sm"},Nx={class:"q-gutter-sm"},Bx={class:"row justify-center"},Fx={class:"col col-md-6 q-pa-xs"},zx={class:"row"},Lx={class:"row items-center justify-between"},Hx={class:"text-subtitle1 text-bold text-grey-9"},Kx={class:"q-gutter-xs"},Yx={class:"text-bold"},Wx={class:"text-bold"},Jl="Rincian Pengguna",Qx={__name:"Detail",setup(c){const s=fe(),m=G(()=>s.props.data),o=G(()=>m.value.active?"positive":"negative"),i=G(()=>m.value.active?"Aktif":"Tidak Aktif");return(n,f)=>{const b=W("i-head"),p=W("i-link"),d=W("authenticated-layout");return u(),h(H,null,[e(b,{title:Jl}),e(d,{"show-drawer-button":!0},{title:a(()=>[v(r(Jl))]),"left-button":a(()=>[t("div",Mx,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=g=>n.$inertia.get(n.route("admin.user.index")))})])]),"right-button":a(()=>[t("div",Nx,[n.$can("admin.user.edit")&&l(s).props.data.id!=l(s).props.auth.user.id?(u(),U(M,{key:0,icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:f[1]||(f[1]=g=>n.$inertia.get(n.route("admin.user.edit",{id:l(s).props.data.id})))})):k("",!0)])]),default:a(()=>[t("div",Bx,[t("div",Fx,[t("div",zx,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"bg-grey-2 q-py-sm"},{default:a(()=>[t("div",Lx,[t("div",Hx,[e(q,{name:"person",class:"q-mr-xs",size:"sm"}),f[2]||(f[2]=v(" Profil Pengguna "))]),e(it,{color:o.value,label:i.value,class:"q-pa-xs"},null,8,["color","label"])])]),_:1}),e(Ae,null,{default:a(()=>[e(le,{class:"bg-white"},{default:a(()=>[e(F,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[3]||(f[3]=[v("Nama Pengguna")])),_:1}),e(be,{class:"text-subtitle1 text-bold"},{default:a(()=>[v(r(m.value.name),1)]),_:1})]),_:1})]),_:1}),e(le,null,{default:a(()=>[e(F,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[4]||(f[4]=[v("ID Pengguna")])),_:1}),e(be,null,{default:a(()=>[v(r(m.value.username),1)]),_:1})]),_:1})]),_:1}),e(le,null,{default:a(()=>[e(F,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[5]||(f[5]=[v("Jenis Akun")])),_:1}),e(be,null,{default:a(()=>[v(r(n.$CONSTANTS.USER_TYPES[m.value.type]),1)]),_:1})]),_:1})]),_:1}),m.value.roles.length>0?(u(),U(le,{key:0},{default:a(()=>[e(F,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[6]||(f[6]=[v("Peran Pengguna")])),_:1}),e(be,null,{default:a(()=>[t("div",Kx,[(u(!0),h(H,null,je(m.value.roles,g=>(u(),U(p,{key:g.id,href:n.route("admin.user-role.detail",{id:g.id}),style:{"text-decoration":"none"}},{default:a(()=>[e(ea,{clickable:"",color:"indigo-1","text-color":"indigo-10",icon:"military_tech",size:"sm"},{default:a(()=>[v(r(g.name),1)]),_:2},1024)]),_:2},1032,["href"]))),128))])]),_:1})]),_:1})]),_:1})):k("",!0),e(le,null,{default:a(()=>[e(F,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[7]||(f[7]=[v("Dibuat")])),_:1}),e(be,null,{default:a(()=>{var g,_;return[v(r(l(ve)(m.value.created_at))+" oleh ",1),t("span",Yx,r(((g=m.value.creator)==null?void 0:g.name)??"Sistem")+" ("+r(((_=m.value.creator)==null?void 0:_.username)??"system")+")",1)]}),_:1})]),_:1})]),_:1}),m.value.updated_at?(u(),U(le,{key:1},{default:a(()=>[e(F,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[8]||(f[8]=[v("Diperbarui")])),_:1}),e(be,null,{default:a(()=>[v(r(l(ve)(m.value.updated_at))+" ",1),m.value.updater?(u(),h(H,{key:0},[f[9]||(f[9]=v(" oleh ")),t("span",Wx,r(m.value.updater.name)+" ("+r(m.value.updater.username)+")",1)],64)):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0),e(le,null,{default:a(()=>[e(F,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[10]||(f[10]=[v("Terakhir Login")])),_:1}),e(be,{class:"text-bold"},{default:a(()=>[v(r(m.value.last_login_datetime?n.$dayjs(m.value.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),_:1})]),_:1})]),_:1}),m.value.last_activity_datetime?(u(),U(le,{key:2,class:"q-mb-md"},{default:a(()=>[e(F,null,{default:a(()=>[e(be,{caption:""},{default:a(()=>f[11]||(f[11]=[v("Aktifitas Terakhir")])),_:1}),e(be,{class:"text-bold"},{default:a(()=>[v(r(n.$dayjs(m.value.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" "+r(m.value.last_activity_description),1)]),_:1})]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})])])])]),_:1})],64)}}},Jx=Object.freeze(Object.defineProperty({__proto__:null,default:Qx},Symbol.toStringTag,{value:"Module"}));function Gx(c){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(c)}const Xx={class:"q-gutter-sm"},Zx={class:"row justify-center"},eS={class:"col col-md-6 q-pa-xs"},tS={__name:"Editor",setup(c){const s=Fe(window.CONSTANTS.USER_TYPES),m=fe(),o=m.props.roles,i=m.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=T(!m.props.data.id),f=m.props.data.roles,b=Array.isArray(f)?f.map(g=>g.id):[],p=Je({id:m.props.data.id,name:m.props.data.name,username:m.props.data.username,password:m.props.data.id?null:"12345",type:m.props.data.type?m.props.data.type:s[0].value,active:!!m.props.data.active,roles:b}),d=()=>rt({form:p,url:route("admin.user.save")});return(g,_)=>{const y=W("i-head"),x=W("authenticated-layout");return u(),h(H,null,[e(y,{title:l(i)},null,8,["title"]),e(x,{"show-drawer-button":!0},{title:a(()=>[v(r(l(i)),1)]),"left-button":a(()=>[t("div",Xx,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=S=>l(K).get(g.route("admin.user.index")))})])]),default:a(()=>[t("div",Zx,[t("div",eS,[e(Ge,{class:"row",onSubmit:Q(d,["prevent"])},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=S=>l(p).id=S)},null,512),[[wt,l(p).id]]),e(re,{autofocus:"",modelValue:l(p).username,"onUpdate:modelValue":_[2]||(_[2]=S=>l(p).username=S),modelModifiers:{trim:!0},type:"text",label:"Username","lazy-rules":"",disable:l(p).processing,error:!!l(p).errors.username,"error-message":l(p).errors.username,rules:[S=>S&&S.length>0||"Username harus diisi.",S=>l(Gx)(S)||"Username tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(re,{modelValue:l(p).name,"onUpdate:modelValue":_[3]||(_[3]=S=>l(p).name=S),modelModifiers:{trim:!0},label:"Nama",error:!!l(p).errors.name,disable:l(p).processing,"error-message":l(p).errors.name,rules:[S=>S&&S.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(p).password,"onUpdate:modelValue":_[5]||(_[5]=S=>l(p).password=S),label:"Kata Sandi","lazy-rules":"",disable:l(p).processing,error:!!l(p).errors.password,"error-message":l(p).errors.password,"hide-bottom-space":"",type:n.value?"text":"password"},{append:a(()=>[e(M,{dense:"",flat:"",round:"",onClick:_[4]||(_[4]=S=>n.value=!n.value)},{default:a(()=>[e(q,{name:n.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","disable","error","error-message","type"]),e(ce,{modelValue:l(p).type,"onUpdate:modelValue":_[6]||(_[6]=S=>l(p).type=S),label:"Jenis Akun",options:l(s),"map-options":"","emit-value":"","lazy-rules":"",disable:l(p).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(p).errors.type,"error-message":l(p).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),l(p).type=="standard_user"?(u(),U(ce,{key:0,modelValue:l(p).roles,"onUpdate:modelValue":_[7]||(_[7]=S=>l(p).roles=S),label:"Peran",options:l(o),"option-value":"id","option-label":"name","map-options":"","emit-value":"",multiple:"","lazy-rules":"","use-chips":"",disable:l(p).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!l(p).errors.roles||!!l(p).errors["roles.0"],"error-message":l(p).errors.roles||l(p).errors["roles.0"],"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"])):k("",!0),e(va,{modelValue:l(p).active,"onUpdate:modelValue":_[8]||(_[8]=S=>l(p).active=S),disable:l(p).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(p).processing,onClick:d},null,8,["disable"]),e(M,{icon:"cancel",label:"Batal",class:"text-black",disable:l(p).processing,onClick:_[9]||(_[9]=S=>l(K).get(g.route("admin.user.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},aS=Object.freeze(Object.defineProperty({__proto__:null,default:tS},Symbol.toStringTag,{value:"Module"})),lS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},oS={class:"q-pa-xs"},nS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},sS={key:0},rS={class:"flex justify-end"},Gl="Pengguna",iS={__name:"Index",setup(c){const s=[{value:"all",label:"Semua"},...Fe(window.CONSTANTS.USER_TYPES)],m=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=fe(),i=he(),n=o.props.auth.user,f=T([]),b=T(!0),p=T(!1),d=Ee({type:"all",roles:[],status:"active",search:""}),g=o.props.roles.map(w=>({value:w.id,label:w.name})),_=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),y=[{name:"username",label:i.screen.gt.sm?"ID Pengguna":"Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];xe(()=>{S()});const x=()=>S(),S=(w=null)=>Ke({pagination:_,props:w,rows:f,loading:b,filter:d,url:route("admin.user.data"),tableRef:I}),C=w=>st({url:route("admin.user.delete",w.id),message:`Hapus pengguna ${w.username}?`,fetchItemsCallback:S,loading:b}),j=G(()=>i.screen.gt.sm?y:y.filter(w=>w.name==="username"||w.name==="action")),z=w=>K.get(route("admin.user.detail",w.id)),{protectClick:V}=Et(),E=V(z),I=T(null),O=T(null),B=ot(O);return(w,$)=>{const D=W("i-head"),R=W("authenticated-layout");return u(),h(H,null,[e(D,{title:Gl}),e(R,null,ze({title:a(()=>[v(r(Gl))]),"right-button":a(()=>[e(M,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=P=>p.value=!p.value)},null,8,["icon"]),w.$can("admin.user.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:$[1]||($[1]=P=>l(K).get(w.route("admin.user.add")))})):k("",!0)]),default:a(()=>[t("div",oS,[e(Me,{ref_key:"tableRef",ref:I,class:"full-height-table",style:Ye({height:l(B)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:_.value,"onUpdate:pagination":$[7]||($[7]=P=>_.value=P),filter:d.search,loading:b.value,columns:j.value,rows:f.value,"rows-per-page-options":[10,25,50],onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:P,message:A,term:N})=>[t("div",nS,[t("span",null,r(A)+" "+r(N?" with term "+N:""),1)])]),body:a(P=>[e(Oe,{props:P,class:qe([P.row.active?"":"bg-red-1","cursor-pointer"]),onClick:Q(A=>l(E)(P.row,A),["stop"])},{default:a(()=>[e(Y,{key:"username",props:P},{default:a(()=>[t("div",null,[l(i).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[],64)),v(" "+r(P.row.username),1)]),l(i).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[t("div",null,r(P.row.name),1),e(it,{color:P.row.type=="super_user"?"red":"primary"},{default:a(()=>[v(r(w.$CONSTANTS.USER_TYPES[P.row.type]),1)]),_:2},1032,["color"]),P.row.roles.length>0?(u(),h("div",sS,r(P.row.roles.map(A=>A.name).join(",")),1)):k("",!0)],64))]),_:2},1032,["props"]),e(Y,{key:"name",props:P},{default:a(()=>[v(r(P.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"role",props:P,align:"center"},{default:a(()=>[t("span",null,r(w.$CONSTANTS.USER_TYPES[P.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:P},{default:a(()=>[t("div",rS,[w.$can("admin.user.add")||w.$can("admin.user.edit")||w.$can("admin.user.delete")?(u(),U(M,{key:0,disable:P.row.id==l(n).id||P.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[6]||($[6]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[w.$can("admin.user.add")?ae((u(),U(le,{key:0,clickable:"",onClick:Q(A=>l(K).get(w.route("admin.user.duplicate",P.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"file_copy"})]),_:1}),e(F,null,{default:a(()=>$[8]||($[8]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),w.$can("admin.user.edit")?ae((u(),U(le,{key:1,clickable:"",onClick:Q(A=>l(K).get(w.route("admin.user.edit",P.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>$[9]||($[9]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),w.$can("admin.user.delete")?ae((u(),U(le,{key:2,onClick:Q(A=>C(P.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>$[10]||($[10]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[p.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:O},{default:a(()=>[t("div",lS,[e(ce,{modelValue:d.type,"onUpdate:modelValue":[$[2]||($[2]=P=>d.type=P),x],class:"custom-select col-xs-12 col-sm-2",options:s,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:d.status,"onUpdate:modelValue":[$[3]||($[3]=P=>d.status=P),x],class:"custom-select col-xs-12 col-sm-2",options:m,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(ce,{modelValue:d.roles,"onUpdate:modelValue":[$[4]||($[4]=P=>d.roles=P),x],class:"custom-select col-xs-12 col-sm-2",options:l(g),label:"Peran",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"},"use-chips":"",multiple:"",clearable:""},null,8,["modelValue","options"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:d.search,"onUpdate:modelValue":$[5]||($[5]=P=>d.search=P),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},dS=Object.freeze(Object.defineProperty({__proto__:null,default:iS},Symbol.toStringTag,{value:"Module"})),uS={class:"q-gutter-sm"},mS={class:"col col-lg-6 q-pa-xs"},cS={key:0,class:"bg-red-1 text-red-10 q-my-sm text-center q-py-sm",style:{border:"1px solid #eb8a8a"}},pS={class:"row q-col-gutter-sm q-mb-md"},fS={key:0},gS={class:"text-bold"},bS={key:0},vS={class:"text-caption text-grey-8"},_S={key:1},Xl="Buat Penyesuaian Stok",yS={__name:"Create",setup(c){const s=fe(),m=T(!1),o=s.props.products,{filteredCategories:i,filterCategories:n}=_a(s.props.categories),{filteredSuppliers:f,filterSupplierFn:b}=ya(s.props.suppliers),p=T({search:null,category_id:null,supplier_id:null}),d=T([]),g=Je({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),_=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(z,V)=>L(z)+" "+V.uom},{name:"category",label:"Kategori",field:"category.name",align:"left"},{name:"supplier",label:"Supplier",field:"supplier.name",align:"left"},{name:"type",label:"Jenis",field:"product_type",align:"left"}],y=Fe(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),x=G(()=>o.filter(z=>{let V=!0;if(m.value&&!d.value.find(E=>E.id===z.id))return!1;if(p.value.search){const E=p.value.search.toLowerCase();V=z.name.toLowerCase().includes(E)||z.description.toLowerCase().includes(E)||z.barcode&&z.barcode.toLowerCase().includes(E)}return V&&p.value.category_id&&(V=z.category_id===p.value.category_id),V&&p.value.supplier_id&&(V=z.supplier_id===p.value.supplier_id),V})),S=()=>{Vt.create({title:"Konfirmasi",message:"Apakah Anda yakin sudah memilih produk dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{g.product_ids=d.value.map(z=>z.id),da(g,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:g,url:route("admin.stock-adjustment.create")})}).onCancel(()=>{})},C=he(),j=G(()=>C.screen.gt.sm?_:_.filter(z=>z.name==="name"));return(z,V)=>{const E=W("i-head"),I=W("authenticated-layout");return u(),h(H,null,[e(E,{title:Xl}),e(I,{"show-drawer-button":!0},{title:a(()=>[v(r(Xl))]),"left-button":a(()=>[t("div",uS,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:V[0]||(V[0]=O=>l(K).get(z.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[e(M,{icon:"cancel",disable:l(g).processing,dense:"",flat:"",color:"negative",rounded:"",onClick:V[1]||(V[1]=O=>l(K).get(z.route("admin.stock-adjustment.index")))},null,8,["disable"]),e(M,{icon:"check",type:"submit",color:"primary",dense:"",rounded:"",disable:l(g).processing||d.value.length==0,class:"q-ml-sm",onClick:S},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",mS,[e(Ge,{class:"row",onSubmit:Q(S,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-sm"},{default:a(()=>{var O,B,w;return[V[10]||(V[10]=t("div",{class:"text-subtitle2"},[t("b",null,"Info Penyesuaian Stok")],-1)),e(Ze,{modelValue:l(g).datetime,"onUpdate:modelValue":V[2]||(V[2]=$=>l(g).datetime=$),label:"Waktu",error:!!l(g).errors.datetime,disable:l(g).processing,"error-message":l(g).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:l(g).type,"onUpdate:modelValue":V[3]||(V[3]=$=>l(g).type=$),options:l(y),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(g).errors.type,disable:l(g).processing,"map-options":"","emit-value":"","error-message":l(g).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(re,{modelValue:l(g).notes,"onUpdate:modelValue":V[4]||(V[4]=$=>l(g).notes=$),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(g).processing,error:!!l(g).errors.notes,"error-message":l(g).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),d.value.length===0||(O=l(s).props.errors)!=null&&O.product_ids?(u(),h("div",cS,[d.value.length===0?(u(),h(H,{key:0},[v(" Silahkan pilih produk yang akan disertakan ke dalam penyesuaian stok. ")],64)):(B=l(s).props.errors)!=null&&B.product_ids?(u(),h(H,{key:1},[v(r((w=l(s).props.errors)==null?void 0:w.product_ids),1)],64)):k("",!0)])):k("",!0),V[11]||(V[11]=t("div",{class:"text-subtitle2"},[t("b",null,"Pilih Produk")],-1)),t("div",pS,[e(re,{modelValue:p.value.search,"onUpdate:modelValue":V[5]||(V[5]=$=>p.value.search=$),label:"Cari Produk",dense:"",outlined:"",class:"col-12 col-sm-4",clearable:""},null,8,["modelValue"]),e(ce,{modelValue:p.value.category_id,"onUpdate:modelValue":V[6]||(V[6]=$=>p.value.category_id=$),label:"Kategori",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(i),"map-options":"",dense:"","emit-value":"",onFilter:l(n),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),e(ce,{modelValue:p.value.supplier_id,"onUpdate:modelValue":V[7]||(V[7]=$=>p.value.supplier_id=$),label:"Pemasok",class:"custom-select col-xs-12 col-md-4",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:l(f),"map-options":"",dense:"","emit-value":"",onFilter:l(b),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])]),t("div",{onClick:V[8]||(V[8]=$=>m.value=!m.value),class:"col-12 col-sm-3 q-mt-xs q-mb-xs text-grey-8 q-my-sm cursor-pointer"},r(m.value?"Tampilkan Semua":"Tampilkan hanya yang Dipilih"),1),e(Me,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:j.value,rows:x.value,"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:d.value,"onUpdate:selected":V[9]||(V[9]=$=>d.value=$)},{"body-cell-name":a($=>[e(Y,{props:$},{default:a(()=>[l(C).screen.lt.md?(u(),h("div",fS,[t("div",gS,r($.row.name),1),$.row.category?(u(),h("div",bS,r($.row.category.name),1)):k("",!0),t("div",vS,r(l(L)($.row.stock))+" "+r($.row.uom),1)])):(u(),h("div",_S,r($.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]}),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},kS=Object.freeze(Object.defineProperty({__proto__:null,default:yS},Symbol.toStringTag,{value:"Module"})),wS={class:"q-gutter-sm"},hS={class:"q-gutter-sm"},$S={class:"row justify-center"},xS={class:"col col-lg-8 q-pa-sm"},SS={class:"row"},VS={class:"detail"},qS={key:0},CS={key:1},TS={class:"text-grey-9"},PS={__name:"Detail",setup(c){const s=fe(),m=`Rincian #${s.props.data.code}`,o=s.props.details,i=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:p=>L(p)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:p=>L(p)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:p=>L(p)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],n=he(),f=G(()=>n.screen.gt.sm?i:i.filter(p=>p.name==="no")),b=()=>{window.open(route("admin.stock-adjustment.print",{id:s.props.data.id}),"_blank")};return(p,d)=>{const g=W("i-head"),_=W("i-link"),y=W("authenticated-layout");return u(),h(H,null,[e(g,{title:m}),e(y,{"show-drawer-button":!0},{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",wS,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=x=>p.$inertia.get(p.route("admin.stock-adjustment.index")))})])]),"right-button":a(()=>[t("div",hS,[e(M,{icon:"print",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[1]||(d[1]=x=>b())})])]),default:a(()=>[t("div",$S,[t("div",xS,[t("div",SS,[e(de,{square:"",flat:"",bordered:"",class:"q-card col"},{default:a(()=>[e(ee,null,{default:a(()=>[d[22]||(d[22]=t("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),t("table",VS,[t("tbody",null,[t("tr",null,[d[2]||(d[2]=t("td",{style:{width:"120px"}},"Kode",-1)),d[3]||(d[3]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,"#"+r(l(s).props.data.code),1)]),t("tr",null,[d[4]||(d[4]=t("td",null,"Jenis",-1)),d[5]||(d[5]=t("td",null,":",-1)),t("td",null,r(p.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[l(s).props.data.type]),1)]),t("tr",null,[d[6]||(d[6]=t("td",null,"Status",-1)),d[7]||(d[7]=t("td",null,":",-1)),t("td",null,r(p.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[l(s).props.data.status]),1)]),t("tr",null,[d[8]||(d[8]=t("td",null,"Waktu",-1)),d[9]||(d[9]=t("td",null,":",-1)),t("td",null,r(l(ve)(l(s).props.data.datetime)),1)]),l(s).props.data.created_at?(u(),h("tr",qS,[d[11]||(d[11]=t("td",null,"Dibuat Oleh",-1)),d[12]||(d[12]=t("td",null,":",-1)),t("td",null,[l(s).props.data.creator?(u(),h(H,{key:0},[e(_,{href:p.route("admin.user.detail",{id:l(s).props.data.creator})},{default:a(()=>[v(r(l(s).props.data.creator.username)+" - "+r(l(s).props.data.creator.name),1)]),_:1},8,["href"]),d[10]||(d[10]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(l(s).props.data.created_at)),1)])])):k("",!0),l(s).props.data.updater?(u(),h("tr",CS,[d[14]||(d[14]=t("td",null,"Diperbarui oleh",-1)),d[15]||(d[15]=t("td",null,":",-1)),t("td",null,[l(s).props.data.updater?(u(),h(H,{key:0},[e(_,{href:p.route("admin.user.detail",{id:l(s).props.data.updater})},{default:a(()=>[v(r(l(s).props.data.updater.username)+" - "+r(l(s).props.data.updater.name),1)]),_:1},8,["href"]),d[13]||(d[13]=v(" - "))],64)):k("",!0),v(" "+r(l(ve)(l(s).props.data.updated_at)),1)])])):k("",!0),t("tr",null,[d[16]||(d[16]=t("td",null,"Total Modal",-1)),d[17]||(d[17]=t("td",null,":",-1)),t("td",null,[t("div",{class:qe(l(s).props.data.total_cost<0?"text-red-10":l(s).props.data.total_cost>0?"text-green-10":"")},r(l(na)(l(s).props.data.total_cost)),3)])]),t("tr",null,[d[18]||(d[18]=t("td",null,"Total Harga",-1)),d[19]||(d[19]=t("td",null,":",-1)),t("td",null,[t("div",{class:qe(l(s).props.data.total_price<0?"text-red-10":l(s).props.data.total_price>0?"text-green-10":"")},r(l(na)(l(s).props.data.total_price)),3)])]),t("tr",null,[d[20]||(d[20]=t("td",null,"Catatan",-1)),d[21]||(d[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.notes),1)])])])]),_:1}),e(ee,null,{default:a(()=>[d[28]||(d[28]=t("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Me,{flat:"",bordered:"",square:"",color:"primary","row-key":"id",dense:"",columns:f.value,rows:l(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":a(x=>[e(Y,{props:x},{default:a(()=>[l(n).screen.lt.md?(u(),h(H,{key:1},[t("div",TS,[t("b",null,"#"+r(x.rowIndex+1),1),d[23]||(d[23]=v(" - ")),e(_,{href:p.route("admin.product.detail",{id:x.row.product_id})},{default:a(()=>[v(r(x.row.product_name),1)]),_:2},1032,["href"])]),t("div",null,[v(" Stok Lama: "+r(l(L)(x.row.old_quantity))+" "+r(x.row.uom),1),d[25]||(d[25]=t("br",null,null,-1)),v(" Stok Baru: "+r(l(L)(x.row.new_quantity))+" "+r(x.row.uom),1),d[26]||(d[26]=t("br",null,null,-1)),t("div",{class:qe(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},[v(" Selisih: "+r((x.row.balance>0?"+":"")+l(L)(x.row.balance))+" "+r(x.row.uom),1),d[24]||(d[24]=t("br",null,null,-1)),v(" (Rp. "+r(l(L)(x.row.subtotal_cost))+" / Rp. "+r(l(L)(x.row.subtotal_price))+") ",1)],2),d[27]||(d[27]=t("br",null,null,-1)),v(" "+r(x.row.notes),1)])],64)):(u(),h(H,{key:0},[v(r(x.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-product_name":a(x=>[e(Y,{props:x},{default:a(()=>[e(_,{href:p.route("admin.product.detail",{id:x.row.product_id})},{default:a(()=>[v(r(x.row.product_name),1)]),_:2},1032,["href"])]),_:2},1032,["props"])]),"body-cell-balance":a(x=>[e(Y,{props:x},{default:a(()=>[t("div",{class:qe(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},r((x.row.balance>0?"+":"")+l(L)(x.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":a(x=>[e(Y,{props:x},{default:a(()=>[t("div",{class:qe(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},r(l(L)(x.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":a(x=>[e(Y,{props:x},{default:a(()=>[t("div",{class:qe(x.row.balance<0?"text-red-10":x.row.balance>0?"text-green-10":"")},r(l(L)(x.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},RS=Object.freeze(Object.defineProperty({__proto__:null,default:PS},Symbol.toStringTag,{value:"Module"})),OS={class:"q-gutter-sm"},DS={class:"col col-lg-6 q-pa-xs"},IS={class:"text-bold"},US={key:0},jS={class:"text-caption text-grey-8"},Zl="Penyesuaian Stok",ES={__name:"Editor",setup(c){const s=he(),m=fe(),o=Je({id:m.props.item.id,type:m.props.item.type,datetime:new Date(m.props.item.datetime),notes:m.props.item.notes,action:"save",details:[]}),i=Fe(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),n=T(m.props.details.map(g=>(typeof g.new_quantity=="string"&&(g.new_quantity=parseFloat(g.new_quantity)),g))),f=g=>{const _=()=>{o.action=g,o.details=n.value.map(y=>({id:y.id,new_quantity:y.new_quantity})),da(o,{datetime:"YYYY-MM-DD HH:mm:ss"}),rt({form:o,url:route("admin.stock-adjustment.save")})};g==="close"||g==="cancel"?Vt.create({title:"Konfirmasi",message:g==="cancel"?"Apakah Anda yakin akan membatalkan seluruh stok opname sesi ini?":"Apakah Anda yakin data stok opname sudah diinput dengan benar?",cancel:!0,persistent:!0}).onOk(()=>{_()}).onCancel(()=>{}):_()},b=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:g=>L(g)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:g=>L(g)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(g,_)=>L(_.new_quantity-_.old_quantity)}],p=G(()=>s.screen.gt.sm?b:b.filter(g=>g.name==="product_name"||g.name==="new_quantity")),d=()=>{window.open(route("admin.stock-adjustment.print-stock-card",{id:o.id}),"_blank")};return(g,_)=>{const y=W("i-head"),x=W("authenticated-layout");return u(),h(H,null,[e(y,{title:Zl}),e(x,{"show-drawer-button":!0},{title:a(()=>[v(r(Zl))]),"left-button":a(()=>[t("div",OS,[l(s).screen.gt.sm?(u(),U(M,{key:0,icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=S=>g.$inertia.get(g.route("admin.stock-adjustment.index")))})):k("",!0)])]),"right-button":a(()=>[e(M,{icon:"save",onClick:_[1]||(_[1]=S=>f("save")),disable:l(o).processing,flat:"",dense:"",rounded:"",color:"grey-8"},null,8,["disable"]),e(M,{icon:"check",onClick:_[2]||(_[2]=S=>f("close")),disable:l(o).processing,dense:"",rounded:"",class:"q-ml-xs",color:"primary"},null,8,["disable"]),g.$can("admin.product.import")||g.$can("admin.product:view-cost")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:_[5]||(_[5]=Q(()=>{},["stop"])),class:"q-ml-xs",color:"grey-8"},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[ae((u(),U(le,{clickable:"",onClick:_[3]||(_[3]=S=>d())},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"print"})]),_:1}),e(F,null,{default:a(()=>_[10]||(_[10]=[v(" Cetak Kartu Stok")])),_:1})]),_:1})),[[se],[me]]),ae((u(),U(le,{clickable:"",onClick:_[4]||(_[4]=Q(S=>f("cancel"),["stop"]))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"cancel",color:"red"})]),_:1}),e(F,{class:"text-red"},{default:a(()=>_[11]||(_[11]=[v("Batalkan")])),_:1})]),_:1})),[[se],[me]])]),_:1})]),_:1})]),_:1})):k("",!0)]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",DS,[e(Ge,{class:"row",onSubmit:Q(f,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,null,{default:a(()=>_[12]||(_[12]=[t("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":_[6]||(_[6]=S=>l(o).id=S)},null,512),[[wt,l(o).id]]),e(Ze,{modelValue:l(o).datetime,"onUpdate:modelValue":_[7]||(_[7]=S=>l(o).datetime=S),label:"Waktu",error:!!l(o).errors.datetime,disable:l(o).processing,"error-message":l(o).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(ce,{modelValue:l(o).type,"onUpdate:modelValue":_[8]||(_[8]=S=>l(o).type=S),options:l(i),label:"Jenis Penyesuaian",class:"custom-select",error:!!l(o).errors.type,disable:l(o).processing,"map-options":"","emit-value":"","error-message":l(o).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(re,{modelValue:l(o).notes,"onUpdate:modelValue":_[9]||(_[9]=S=>l(o).notes=S),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.notes,"error-message":l(o).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(ee,{class:"q-pa-xs"},{default:a(()=>[e(Me,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id",columns:p.value,rows:n.value,"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":a(S=>[e(Y,{props:S},{default:a(()=>[t("div",IS,r(S.row.product_name),1),l(s).screen.lt.md?(u(),h("div",US,[t("div",jS,[v(" Tercatat: "+r(l(L)(S.row.old_quantity))+" ",1),_[13]||(_[13]=t("br",null,null,-1)),v(" Selisih: "+r(l(L)(S.row.new_quantity-S.row.old_quantity)),1)])])):k("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":a(S=>[e(Y,{props:S,class:"text-center"},{default:a(()=>[e(Be,{modelValue:S.row[S.col.name],"onUpdate:modelValue":C=>S.row[S.col.name]=C,"input-class":"text-right full-width","hide-bottom-space":"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},AS=Object.freeze(Object.defineProperty({__proto__:null,default:ES},Symbol.toStringTag,{value:"Module"}));function MS(){const c=Dt();if(!c)throw new Error("useCan must be called within a component setup function.");return s=>c.proxy.$can(s)}const NS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},BS={class:"q-pa-xs"},FS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},zS={key:0,class:"flex q-gutter-xs"},LS={class:"flex q-col-gutter-xs"},HS={key:0},KS={key:1},YS={key:0},WS={class:"flex justify-end"},eo="Penyesuaian Stok",QS={__name:"Index",setup(c){const s=T([]),m=T(!0),o=T(!1),i=T(null),n=T(null),f=ot(n),b=De().startOf("month").toDate(),p=De().endOf("month").toDate(),d=Ee({search:"",start_date:b,end_date:p,status:"all",type:"all",...He()}),g=[{value:"all",label:"Semua"},...Fe(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],_=[{value:"all",label:"Semua"},...Fe(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),x=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];xe(()=>{C()});const S=B=>st({message:`Hapus Penyesuaian Stok #${B.code}?`,url:route("admin.stock-adjustment.delete",B.id),fetchItemsCallback:C,loading:m}),C=(B=null)=>{const w={...d,start_date:De(d.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:De(d.end_date).format("YYYY-MM-DD HH:mm:ss")};Ke({pagination:y,filter:w,props:B,rows:s,url:route("admin.stock-adjustment.data"),loading:m,tableRef:i})},j=()=>{C()},z=B=>{B.status=="draft"?K.get(route("admin.stock-adjustment.editor",B.id)):K.get(route("admin.stock-adjustment.detail",B.id))},{protectClick:V}=Et(),E=V(z),I=he(),O=G(()=>{let B=x;return MS()||(B=B.filter(w=>w.name!=="cost")),I.screen.gt.sm?B:B.filter(w=>w.name==="id"||w.name==="action")});return(B,w)=>{const $=W("i-head"),D=W("authenticated-layout");return u(),h(H,null,[e($,{title:eo}),e(D,null,ze({"right-button":a(()=>[e(M,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:w[0]||(w[0]=R=>o.value=!o.value)},null,8,["icon"]),B.$can("admin.stock-adjustment.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:w[1]||(w[1]=R=>l(K).get(B.route("admin.stock-adjustment.create")))})):k("",!0)]),title:a(()=>[v(r(eo))]),default:a(()=>[t("div",BS,[e(Me,{ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id",pagination:y.value,"onUpdate:pagination":w[8]||(w[8]=R=>y.value=R),filter:d.search,loading:m.value,columns:O.value,rows:s.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(f)}),onRequest:C,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:R,message:P,filter:A})=>[t("div",FS,[t("span",null,r(P)+" "+r(A?" with term "+A:""),1)])]),body:a(R=>[e(Oe,{props:R,onClick:Q(P=>l(E)(R.row,P),["stop"]),class:"cursor-pointer"},{default:a(()=>[e(Y,{key:"id",props:R},{default:a(()=>[l(I).screen.lt.md?(u(),h(H,{key:1},[t("div",LS,[t("div",null,"#"+r(R.row.code),1),t("div",null,[e(q,{name:"history"}),v(" "+r(l(ve)(R.row.datetime)),1)]),e(ea,{dense:"",size:"sm",color:R.row.status==="draft"?"orange":R.row.status==="closed"?"green":R.row.status==="canceled"?"red":"",icon:R.row.status==="draft"?"emergency":R.row.status==="closed"?"check":R.row.status==="canceled"?"close":""},{default:a(()=>[v(r(B.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[R.row.status]),1)]),_:2},1032,["color","icon"])]),t("div",null,[e(q,{name:"category"}),v(" "+r(B.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[R.row.type]),1)]),R.row.created_by?(u(),h("div",HS,[e(q,{name:"person"}),w[9]||(w[9]=v(" Dibuat: ")),t("b",null,r(R.row.created_by.username),1),e(q,{name:"history"}),v(" "+r(l(ve)(R.row.created_at)),1)])):k("",!0),R.row.updated_by?(u(),h("div",KS,[e(q,{name:"person"}),w[10]||(w[10]=v(" Diperbarui: ")),t("b",null,r(R.row.updated_by.username),1),e(q,{name:"history"}),v(" "+r(l(ve)(R.row.updated_at)),1)])):k("",!0),t("div",{class:qe(R.row.total_cost<0?"text-red-10":R.row.total_cost>0?"text-green-10":"")},[e(q,{name:"money"}),B.$can("admin.product:view-cost")?(u(),h("span",YS,"Rp. "+r(l(L)(R.row.total_cost))+" / ",1)):k("",!0),v(" Rp. "+r(l(L)(R.row.total_price)),1)],2)],64)):(u(),h("div",zS,"#"+r(R.row.code),1))]),_:2},1032,["props"]),e(Y,{key:"datetime",props:R},{default:a(()=>[v(r(l(ve)(R.row.datetime)),1)]),_:2},1032,["props"]),e(Y,{key:"status",props:R,class:"text-center"},{default:a(()=>[v(r(B.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[R.row.status]),1)]),_:2},1032,["props"]),e(Y,{key:"type",props:R},{default:a(()=>[v(r(B.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[R.row.type]),1)]),_:2},1032,["props"]),e(Y,{key:"total_cost",props:R},{default:a(()=>[B.$can("admin.product:view-cost")?(u(),h("div",{key:0,class:qe(R.row.total_cost<0?"text-red-10":R.row.total_cost>0?"text-green-10":"")},r(l(L)(R.row.total_cost)),3)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"total_price",props:R},{default:a(()=>[t("div",{class:qe(R.row.total_price<0?"text-red-10":R.row.total_price>0?"text-green-10":"")},r(l(L)(R.row.total_price)),3)]),_:2},1032,["props"]),e(Y,{key:"notes",props:R},{default:a(()=>[v(r(R.row.notes),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:R},{default:a(()=>[t("div",WS,[B.$can("admin.stock-adjustment.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:w[7]||(w[7]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[B.$can("admin.stock-adjustment.delete")?ae((u(),U(le,{key:0,onClick:Q(P=>S(R.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>w[11]||(w[11]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:n},{default:a(()=>[t("div",NS,[e(Ze,{modelValue:d.start_date,"onUpdate:modelValue":[w[2]||(w[2]=R=>d.start_date=R),j],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Ze,{modelValue:d.end_date,"onUpdate:modelValue":[w[3]||(w[3]=R=>d.end_date=R),j],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:d.status,"onUpdate:modelValue":[w[4]||(w[4]=R=>d.status=R),j],options:g,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(ce,{modelValue:d.type,"onUpdate:modelValue":[w[5]||(w[5]=R=>d.type=R),j],options:_,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:d.search,"onUpdate:modelValue":w[6]||(w[6]=R=>d.search=R),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},JS=Object.freeze(Object.defineProperty({__proto__:null,default:QS},Symbol.toStringTag,{value:"Module"})),GS={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},XS={class:"q-pa-xs"},ZS={class:"full-width row flex-center text-grey-8 q-gutter-sm"},to="Riwayat Stok",eV={__name:"Index",setup(c){fe();const s=T(null),m=T(null),o=ot(m),i=De().startOf("month").toDate(),n=De().endOf("month").toDate(),f=[{value:"all",label:"Semua"},...Fe(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],b=he(),p=T(!1),d=T([]),g=T(!0),_=Ee({type:"all",search:"",start_date:i,end_date:n,...He()}),y=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0});let x=[{name:"id",label:"Item",field:"id",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Awal",field:"quantity_before",align:"right"},{name:"quantity",label:"+/-",field:"quantity",align:"right"},{name:"quantity_after",label:"Akhir",field:"quantity_after",align:"right"},{name:"uom",label:"Satuan",field:"uom",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{const V=new URLSearchParams(window.location.search).get("page");V&&(y.value.page=parseInt(V)),S()});const S=(z=null)=>{const V={..._,start_date:De(_.start_date).format("YYYY-MM-DD HH:mm:ss"),end_date:De(_.end_date).format("YYYY-MM-DD HH:mm:ss")};Ke({pagination:y,filter:V,props:z,rows:d,url:route("admin.stock-movement.data"),loading:g,tableRef:s})},C=()=>{S()},j=G(()=>b.screen.lt.sm?x.filter(z=>z.name==="id"||z.name==="quantity"):x);return(z,V)=>{const E=W("i-head"),I=W("authenticated-layout");return u(),h(H,null,[e(E,{title:to}),e(I,null,ze({title:a(()=>[v(r(to))]),"right-button":a(()=>[e(M,{icon:p.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:V[0]||(V[0]=O=>p.value=!p.value)},null,8,["icon"])]),default:a(()=>[t("div",XS,[e(Me,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:y.value,"onUpdate:pagination":V[5]||(V[5]=O=>y.value=O),filter:_.search,loading:g.value,columns:j.value,rows:d.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(o)}),onRequest:S,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:O,message:B,filter:w})=>[t("div",ZS,[t("span",null,r(B)+" "+r(w?" with term "+w:""),1)])]),body:a(O=>[e(Oe,{props:O},{default:a(()=>[e(Y,{key:"id",props:O},{default:a(()=>[t("div",null,[e(q,{class:"inline-icon",name:"tag"}),v(" "+r(O.row.code),1)]),t("div",null,[e(q,{name:"calendar_clock",class:"inline-icon"}),v(" "+r(l(ve)(O.row.created_at)),1)]),t("div",null,[e(it,null,{default:a(()=>[v(r(z.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[O.row.ref_type]),1)]),_:2},1024)]),l(b).screen.lt.sm?(u(),h(H,{key:0},[t("div",null,[e(q,{name:"token",class:"inline-icon"}),v(" "+r(O.row.product.name),1)]),t("div",{class:qe(O.row.quantity>0?"text-positive":"text-negative")},[e(q,{class:"inline-icon",name:"compare_arrows"}),v(" "+r(l(L)(O.row.quantity_before))+" "+r(O.row.uom)+"  "+r(l(L)(O.row.quantity_after))+" "+r(O.row.uom),1)],2),e(Se,{text:O.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"product",props:O},{default:a(()=>[v(r(O.row.product.name),1)]),_:2},1032,["props"]),e(Y,{key:"quantity_before",props:O},{default:a(()=>[v(r(l(L)(O.row.quantity_before)),1)]),_:2},1032,["props"]),e(Y,{key:"quantity",props:O,class:qe(O.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[v(r(l(St)(O.row.quantity))+" ",1),l(b).screen.lt.sm?(u(),h(H,{key:0},[v(r(O.row.uom),1)],64)):k("",!0)]),_:2},1032,["props","class"]),e(Y,{key:"quantity_after",props:O},{default:a(()=>[v(r(l(L)(O.row.quantity_after)),1)]),_:2},1032,["props"]),e(Y,{key:"uom",props:O},{default:a(()=>[v(r(O.row.uom),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:O},{default:a(()=>[e(Se,{text:O.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[p.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:m},{default:a(()=>[t("div",GS,[e(Ze,{modelValue:_.start_date,"onUpdate:modelValue":[V[1]||(V[1]=O=>_.start_date=O),C],label:"Mulai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(Ze,{modelValue:_.end_date,"onUpdate:modelValue":[V[2]||(V[2]=O=>_.end_date=O),C],label:"Sampai Tanggal",dense:"",outlined:"",class:"col-xs-6 col-sm-2","hide-bottom-space":"","date-only":""},null,8,["modelValue"]),e(ce,{modelValue:_.ref_type,"onUpdate:modelValue":[V[3]||(V[3]=O=>_.ref_type=O),C],options:f,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:_.search,"onUpdate:modelValue":V[4]||(V[4]=O=>_.search=O),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},tV=Object.freeze(Object.defineProperty({__proto__:null,default:eV},Symbol.toStringTag,{value:"Module"})),aV={class:"detail"},lV={key:0},oV={key:1},nV={key:2},sV={key:3},rV={key:4},iV={key:5},dV={key:6},uV={key:0,class:"q-pt-md"},hn={__name:"MainInfoTab",setup(c){const s=fe(),m=()=>{st({message:`Hapus Pemasok ${s.props.data.name}?`,url:route("admin.supplier.delete",s.props.data.id),onSuccess:()=>{K.get(route("admin.supplier.index"))}})};return(o,i)=>(u(),h(H,null,[t("table",aV,[t("tbody",null,[i[22]||(i[22]=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-bold text-grey-8"},"Info Pemasok")])],-1)),t("tr",null,[i[1]||(i[1]=t("td",{style:{width:"120px"}},"Kode",-1)),i[2]||(i[2]=t("td",{style:{width:"1px"}},":",-1)),t("td",null,r(l(s).props.data.code),1)]),t("tr",null,[i[3]||(i[3]=t("td",null,"Nama",-1)),i[4]||(i[4]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.name),1)]),t("tr",null,[t("td",null,r(l(s).props.data.balance<0?"Utang":"Utang / Piutang"),1),i[5]||(i[5]=t("td",null,":",-1)),t("td",{class:qe(l(s).props.data.balance<0?"text-red":"text-green")},r(l(na)(l(s).props.data.balance)),3)]),l(s).props.data.phone_1?(u(),h("tr",lV,[i[6]||(i[6]=t("td",null,"No Telepon",-1)),i[7]||(i[7]=t("td",null,":",-1)),t("td",null,[e(Gt,{phone:l(s).props.data.phone_1},null,8,["phone"])])])):k("",!0),l(s).props.data.phone_2?(u(),h("tr",oV,[i[8]||(i[8]=t("td",null,"No Telepon 2",-1)),i[9]||(i[9]=t("td",null,":",-1)),t("td",null,[e(Gt,{phone:l(s).props.data.phone_2},null,8,["phone"])])])):k("",!0),l(s).props.data.phone_3?(u(),h("tr",nV,[i[10]||(i[10]=t("td",null,"No Telepon 3",-1)),i[11]||(i[11]=t("td",null,":",-1)),t("td",null,[e(Gt,{phone:l(s).props.data.phone_3},null,8,["phone"])])])):k("",!0),l(s).props.data.address?(u(),h("tr",sV,[i[12]||(i[12]=t("td",null,"Alamat",-1)),i[13]||(i[13]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.address),1)])):k("",!0),l(s).props.data.return_address?(u(),h("tr",rV,[i[14]||(i[14]=t("td",null,"Alamat Retur",-1)),i[15]||(i[15]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.return_address),1)])):k("",!0),l(s).props.data.bank_account_name_1||l(s).props.data.bank_account_number_1||l(s).props.data.bank_account_holder_1?(u(),h("tr",iV,[i[16]||(i[16]=t("td",null,"Rek 1",-1)),i[17]||(i[17]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank_account_name_1)+" "+r(l(s).props.data.bank_account_number_1)+" a.n. "+r(l(s).props.data.bank_account_holder_1),1)])):k("",!0),l(s).props.data.bank_account_name_2||l(s).props.data.bank_account_number_2||l(s).props.data.bank_account_holder_2?(u(),h("tr",dV,[i[18]||(i[18]=t("td",null,"Rek 2",-1)),i[19]||(i[19]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.bank_account_name_2)+" "+r(l(s).props.data.bank_account_number_2)+" a.n. "+r(l(s).props.data.bank_account_holder_2),1)])):k("",!0),t("tr",null,[i[20]||(i[20]=t("td",null,"Status",-1)),i[21]||(i[21]=t("td",null,":",-1)),t("td",null,r(l(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])]),o.$can("admin.supplier.delete")?(u(),h("div",uV,[e(M,{icon:"delete",label:"Hapus",color:"negative",onClick:i[0]||(i[0]=n=>m())})])):k("",!0)],64))}},mV=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"})),cV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},pV={class:"text-bold"},fV={class:"text-bold"},gV={key:0,class:"text-bold"},bV={key:1},$n={__name:"OrderHistoryTab",setup(c){const s=fe(),m=T([]),o=T(!0),i=Ee({customer_id:s.props.data.id,...He()}),n=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),f=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total (Rp.)",field:"grand_total",align:"right"},{name:"remaining_debt",label:"Sisa Utang (Rp.)",field:"remaining_debt",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];xe(()=>{b()});const b=(g=null)=>Ke({pagination:n,filter:i,props:g,rows:m,url:route("admin.purchase-order.data",{filter:{status:["closed","canceled"],supplier_id:s.props.data.id}}),loading:o}),p=he(),d=G(()=>p.screen.gt.sm?f:f.filter(g=>g.name==="id"));return(g,_)=>(u(),U(Me,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id",pagination:n.value,"onUpdate:pagination":_[0]||(_[0]=y=>n.value=y),filter:i.search,loading:o.value,columns:d.value,rows:m.value,"rows-per-page-options":[10,25,50],onRequest:b,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:x,filter:S})=>[t("div",cV,[t("span",null,r(x)+" "+r(S?" with term "+S:""),1)])]),body:a(y=>[e(Oe,{props:y,class:"cursor-pointer",onClick:Q(x=>l(K).get(g.route("admin.purchase-order.detail",{id:y.row.id})),["stop"])},{default:a(()=>[e(Y,{key:"id",props:y},{default:a(()=>[t("div",pV,[e(q,{class:"inline-icon",name:"tag"}),v(" "+r(y.row.code),1)]),t("div",null,[e(q,{class:"inline-icon",name:"calendar_clock"}),v(" "+r(l(ve)(y.row.datetime)),1)]),l(p).screen.lt.md?(u(),h(H,{key:0},[t("div",fV,[e(q,{name:"money",class:"inline-icon"}),v(" Total: Rp. "+r(l(L)(y.row.grand_total)),1)]),y.row.remaining_debt>0?(u(),h("div",gV,[e(q,{name:"money",class:"inline-icon"}),v(" Sisa Utang: Rp. "+r(l(L)(y.row.remaining_debt)),1)])):k("",!0),y.row.notes?(u(),h("div",bV,[e(Se,{text:y.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):k("",!0)],64)):k("",!0),t("div",null,[e(Zo,{status:y.row.status},null,8,["status"]),e(en,{status:y.row.payment_status},null,8,["status"])])]),_:2},1032,["props"]),e(Y,{key:"grand_total",props:y},{default:a(()=>[v(r(l(L)(y.row.grand_total)),1)]),_:2},1032,["props"]),e(Y,{key:"remaining_debt",props:y},{default:a(()=>[v(r(l(L)(y.row.remaining_debt)),1)]),_:2},1032,["props"]),e(Y,{key:"notes",props:y,class:"wrap-column"},{default:a(()=>[e(Se,{text:y.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},vV=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"})),_V={class:"q-gutter-sm"},yV={class:"q-gutter-sm"},kV={class:"col col-lg-6 q-pa-xs"},wV={class:"row"},ao="Rincian Pemasok",hV={__name:"Detail",setup(c){const s=fe(),m=T("main");return he(),(o,i)=>{const n=W("i-head"),f=W("authenticated-layout");return u(),h(H,null,[e(n,{title:ao}),e(f,null,{title:a(()=>[v(r(ao))]),"left-button":a(()=>[t("div",_V,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=b=>o.$inertia.get(o.route("admin.supplier.index")))})])]),"right-button":a(()=>[t("div",yV,[o.$can("admin.supplier.edit")?(u(),U(M,{key:0,icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=b=>l(K).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Edit pemasok"})):k("",!0),o.$can("admin.supplier.add")?(u(),U(M,{key:1,icon:"content_copy",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[2]||(i[2]=b=>l(K).get(o.route("admin.supplier.edit",{id:l(s).props.data.id}))),title:"Duplikat pemasok"})):k("",!0),o.$can("admin.supplier.add")?(u(),U(M,{key:2,icon:"add",size:"sm",dense:"",rounded:"",color:"primary",onClick:i[3]||(i[3]=b=>l(K).get(o.route("admin.supplier.add"))),title:"Tambah pemasok baru"})):k("",!0)])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",kV,[t("div",wV,[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(Tt,{modelValue:m.value,"onUpdate:modelValue":i[4]||(i[4]=b=>m.value=b),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(dt,{name:"main",label:"Info Utama"}),e(dt,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(Pt,{modelValue:m.value,"onUpdate:modelValue":i[5]||(i[5]=b=>m.value=b),animated:""},{default:a(()=>[e(ut,{name:"main"},{default:a(()=>[e(hn)]),_:1}),e(ut,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e($n)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},$V=Object.freeze(Object.defineProperty({__proto__:null,default:hV},Symbol.toStringTag,{value:"Module"})),xV={class:"q-gutter-sm"},SV={class:"col col-md-6 q-pa-xs"},VV={class:"row q-col-gutter-md"},qV={key:1,class:"text-subtitle2 q-mt-md text-grey-8"},CV={key:2,class:"row q-col-gutter-md"},TV={key:3,class:"text-subtitle2 q-mt-md text-grey-8"},PV={key:4,class:"row q-col-gutter-md"},RV={key:5,class:"row q-col-gutter-md"},OV={style:{"margin-left":"-10px"},class:"q-mt-md"},DV={class:"q-mt-sm"},IV={__name:"Editor",setup(c){const s=fe(),m=(s.props.data.id?"Edit":"Tambah")+" Pemasok",o=Je({id:s.props.data.id,code:s.props.data.code,name:s.props.data.name,phone_1:s.props.data.phone_1,phone_2:s.props.data.phone_2,phone_3:s.props.data.phone_3,url_1:s.props.data.url_1,url_2:s.props.data.url_2,bank_account_name_1:s.props.data.bank_account_name_1,bank_account_holder_1:s.props.data.bank_account_holder_1,bank_account_number_1:s.props.data.bank_account_number_1,bank_account_name_2:s.props.data.bank_account_name_2,bank_account_holder_2:s.props.data.bank_account_holder_2,bank_account_number_2:s.props.data.bank_account_number_2,address:s.props.data.address,return_address:s.props.data.return_address,active:!!s.props.data.active}),i=T(!0),n=()=>rt({form:o,url:route("admin.supplier.save")});return(f,b)=>{const p=W("i-head"),d=W("authenticated-layout");return u(),h(H,null,[e(p,{title:m}),e(d,{"show-drawer-button":!0},{title:a(()=>[v(r(m))]),"left-button":a(()=>[t("div",xV,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>l(K).get(f.route("admin.supplier.index")))})])]),"right-button":a(()=>[e(M,{class:"q-ml-xs",type:"submit",icon:"check",rounded:"",dense:"",color:"primary",disable:l(o).processing,onClick:b[1]||(b[1]=g=>n()),title:"Simpan"},null,8,["disable"])]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",SV,[e(Ge,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[2]||(b[2]=g=>l(o).id=g)},null,512),[[wt,l(o).id]]),e(re,{modelValue:l(o).code,"onUpdate:modelValue":b[3]||(b[3]=g=>l(o).code=g),modelModifiers:{trim:!0},label:"Kode Pelanggan",error:!!l(o).errors.code,disable:l(o).processing,"error-message":l(o).errors.code,rules:[g=>g&&g.length>0||"Kode harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(o).name,"onUpdate:modelValue":b[4]||(b[4]=g=>l(o).name=g),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!l(o).errors.name,disable:l(o).processing,"error-message":l(o).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),t("div",VV,[e(re,{modelValue:l(o).phone_1,"onUpdate:modelValue":b[5]||(b[5]=g=>l(o).phone_1=g),modelModifiers:{trim:!0},type:"text",label:"No Telp","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_1,"error-message":l(o).errors.phone_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(u(),U(re,{key:0,modelValue:l(o).phone_2,"onUpdate:modelValue":b[6]||(b[6]=g=>l(o).phone_2=g),modelModifiers:{trim:!0},type:"text",label:"No Telp 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_2,"error-message":l(o).errors.phone_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(u(),U(re,{key:1,modelValue:l(o).phone_3,"onUpdate:modelValue":b[7]||(b[7]=g=>l(o).phone_3=g),modelModifiers:{trim:!0},type:"text",label:"No Telp 3","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.phone_3,"error-message":l(o).errors.phone_3,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]))]),e(re,{modelValue:l(o).address,"onUpdate:modelValue":b[8]||(b[8]=g=>l(o).address=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.address,"error-message":l(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),i.value?k("",!0):(u(),U(re,{key:0,modelValue:l(o).return_address,"onUpdate:modelValue":b[9]||(b[9]=g=>l(o).return_address=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"500",label:"Alamat Retur","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.return_address,"error-message":l(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])),i.value?k("",!0):(u(),h("div",qV," Rekening 1 ")),i.value?k("",!0):(u(),h("div",CV,[e(re,{modelValue:l(o).bank_account_name_1,"onUpdate:modelValue":b[10]||(b[10]=g=>l(o).bank_account_name_1=g),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_1,"error-message":l(o).errors.bank_account_name_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).bank_account_number_1,"onUpdate:modelValue":b[11]||(b[11]=g=>l(o).bank_account_number_1=g),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_1,"error-message":l(o).errors.bank_account_number_1,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).bank_account_holder_1,"onUpdate:modelValue":b[12]||(b[12]=g=>l(o).bank_account_holder_1=g),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_1,"error-message":l(o).errors.bank_account_holder_1,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(u(),h("div",TV," Rekening 2 ")),i.value?k("",!0):(u(),h("div",PV,[e(re,{modelValue:l(o).bank_account_name_2,"onUpdate:modelValue":b[13]||(b[13]=g=>l(o).bank_account_name_2=g),modelModifiers:{trim:!0},type:"text",label:"Nama Bank","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_name_2,"error-message":l(o).errors.bank_account_name_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).bank_account_number_2,"onUpdate:modelValue":b[14]||(b[14]=g=>l(o).bank_account_number_2=g),modelModifiers:{trim:!0},type:"text",label:"Nomor Rekening","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_number_2,"error-message":l(o).errors.bank_account_number_2,"hide-bottom-space":"",class:"col-3"},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).bank_account_holder_2,"onUpdate:modelValue":b[15]||(b[15]=g=>l(o).bank_account_holder_2=g),modelModifiers:{trim:!0},type:"text",label:"Atas Nama","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.bank_account_holder_2,"error-message":l(o).errors.bank_account_holder_2,"hide-bottom-space":"",class:"col-6"},null,8,["modelValue","disable","error","error-message"])])),i.value?k("",!0):(u(),h("div",RV,[e(re,{modelValue:l(o).url_1,"onUpdate:modelValue":b[16]||(b[16]=g=>l(o).url_1=g),modelModifiers:{trim:!0},type:"text",label:"URL 1","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_1,"error-message":l(o).errors.url_1,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"]),e(re,{modelValue:l(o).url_2,"onUpdate:modelValue":b[17]||(b[17]=g=>l(o).url_2=g),modelModifiers:{trim:!0},type:"text",label:"URL 2","lazy-rules":"",disable:l(o).processing,error:!!l(o).errors.url_2,"error-message":l(o).errors.url_2,"hide-bottom-space":"",class:"col"},null,8,["modelValue","disable","error","error-message"])])),t("div",OV,[e(ra,{class:"full-width q-pl-none",modelValue:l(o).active,"onUpdate:modelValue":b[18]||(b[18]=g=>l(o).active=g),disable:l(o).processing,label:"Aktif"},null,8,["modelValue","disable"])]),t("div",DV,[t("div",{class:"cursor-pointer text-grey-8",clickable:"",onClick:b[19]||(b[19]=Q(g=>i.value=!i.value,["stop"]))},[e(q,{name:i.value?"stat_minus_1":"stat_1",class:"inline-icon"},null,8,["name"]),v(" "+r(i.value?"Lebih lengkap":"Lebih ringkas"),1)])])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},UV=Object.freeze(Object.defineProperty({__proto__:null,default:IV},Symbol.toStringTag,{value:"Module"})),jV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},EV={class:"q-pa-xs"},AV={class:"full-width row flex-center text-grey-8 q-gutter-sm"},MV={key:0},NV={key:1},BV={class:"flex justify-end"},lo="Pemasok",FV={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=Ee({search:"",status:"active",...He()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),g=[{name:"code",label:"Kode",field:"code",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Utang / Piutang (Rp)",field:"balance",align:"right",sortable:!0},{name:"phone_1",label:"No HP",field:"phone_1",align:"left",sortable:!1},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!1},{name:"action",align:"right"}],_=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];xe(()=>{x()});const y=E=>st({message:`Hapus pemasok ${E.name}?`,url:route("admin.supplier.delete",E.id),fetchItemsCallback:x,loading:i}),x=(E=null)=>{Ke({pagination:d,filter:p,props:E,rows:o,url:route("admin.supplier.data"),loading:i,tableRef:n})},S=()=>x(),C=E=>K.get(route("admin.supplier.detail",{id:E.id})),{protectClick:j}=Et(),z=j(C),V=G(()=>s.screen.gt.sm?g:g.filter(E=>E.name==="code"||E.name==="action"));return(E,I)=>{const O=W("i-head"),B=W("authenticated-layout");return u(),h(H,null,[e(O,{title:lo}),e(B,null,ze({title:a(()=>[v(r(lo))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=w=>m.value=!m.value)},null,8,["icon"]),E.$can("admin.supplier.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=w=>l(K).get(E.route("admin.supplier.add")))})):k("",!0)]),default:a(()=>[t("div",EV,[e(Me,{class:"full-height-table",ref_key:"tableRef",ref:n,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":I[5]||(I[5]=w=>d.value=w),filter:p.search,loading:i.value,columns:V.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(b)}),onRequest:x,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:w,message:$,filter:D})=>[t("div",AV,[t("span",null,r($)+" "+r(D?" with term "+D:""),1)])]),body:a(w=>[e(Oe,{props:w,class:qe([w.row.active?"":"bg-red-1","cursor-pointer"]),onClick:Q($=>l(z)(w.row,$),["stop"])},{default:a(()=>[e(Y,{key:"code",props:w,class:"wrap-column"},{default:a(()=>[t("div",null,[l(s).screen.lt.md?(u(),U(q,{key:0,name:"person"})):k("",!0),v(" "+r(w.row.code)+" ",1),l(s).screen.lt.md?(u(),h(H,{key:1},[v(" - "+r(w.row.name),1)],64)):k("",!0)]),l(s).screen.lt.md?(u(),h(H,{key:0},[t("div",{class:qe(w.row.balance<0?"text-negative":"text-positive")},[e(q,{name:"wallet"}),v(" "+r(l(L)(w.row.balance)),1)],2),w.row.phone_1?(u(),h("div",MV,[e(q,{name:"phone"}),v(" "+r(w.row.phone_1),1)])):k("",!0),w.row.address?(u(),h("div",NV,[e(q,{name:"home_pin"}),v(" "+r(w.row.address),1)])):k("",!0)],64)):k("",!0)]),_:2},1032,["props"]),e(Y,{key:"name",props:w,class:"wrap-column"},{default:a(()=>[v(r(w.row.name),1)]),_:2},1032,["props"]),e(Y,{key:"balance",props:w,class:"wrap-column"},{default:a(()=>[t("div",{class:qe(w.row.balance<0?"text-negative":"text-positive")},r(l(L)(w.row.balance)),3)]),_:2},1032,["props"]),e(Y,{key:"phone_1",props:w},{default:a(()=>[v(r(w.row.phone_1),1)]),_:2},1032,["props"]),e(Y,{key:"address",props:w},{default:a(()=>[v(r(w.row.address),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:w},{default:a(()=>[t("div",BV,[E.$can("admin.supplier.add")||E.$can("admin.supplier.edit")||E.$can("admin.supplier.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:I[4]||(I[4]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[E.$can("admin.supplier.add")?ae((u(),U(le,{key:0,clickable:"",onClick:Q($=>l(K).get(E.route("admin.supplier.duplicate",w.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"file_copy"})]),_:1}),e(F,null,{default:a(()=>I[6]||(I[6]=[v(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),E.$can("admin.supplier.edit")?ae((u(),U(le,{key:1,clickable:"",onClick:Q($=>l(K).get(E.route("admin.supplier.edit",w.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>I[7]||(I[7]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),E.$can("admin.supplier.delete")?ae((u(),U(le,{key:2,onClick:Q($=>y(w.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>I[8]||(I[8]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",jV,[e(ce,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:p.status,"onUpdate:modelValue":[I[2]||(I[2]=w=>p.status=w),S],options:_,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":I[3]||(I[3]=w=>p.search=w),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},zV=Object.freeze(Object.defineProperty({__proto__:null,default:FV},Symbol.toStringTag,{value:"Module"})),LV={class:"q-gutter-sm"},HV={class:"col col-md-6 q-pa-xs"},KV={class:"q-pt-md"},YV={key:0,class:"text-caption text-negative"},WV={class:"q-pt-md"},QV={key:0,class:"text-caption text-negative"},JV={__name:"Editor",setup(c){const s=he(),m=fe(),o=(m.props.data.id?"Edit":"Tambah")+" Skema Pajak",i=Je({id:m.props.data.id,name:m.props.data.name,rate_percentage:m.props.data.rate_percentage??0,tax_authority:m.props.data.tax_authority,is_inclusive:m.props.data.is_inclusive??!1,active:m.props.data.active??!0,description:m.props.data.description}),n=()=>rt({form:i,url:route("admin.tax-scheme.save")});return(f,b)=>{const p=W("i-head"),d=W("authenticated-layout");return u(),h(H,null,[e(p,{title:o}),e(d,{"show-drawer-button":!l(s).screen.lt.md},ze({title:a(()=>[v(r(o))]),default:a(()=>[e(Te,{class:"row justify-center"},{default:a(()=>[t("div",HV,[e(Ge,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:l(Qe)},{default:a(()=>[e(de,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ee,{class:"q-pt-none"},{default:a(()=>[ae(t("input",{type:"hidden",name:"id","onUpdate:modelValue":b[1]||(b[1]=g=>l(i).id=g)},null,512),[[wt,l(i).id]]),e(re,{autofocus:"",modelValue:l(i).name,"onUpdate:modelValue":b[2]||(b[2]=g=>l(i).name=g),modelModifiers:{trim:!0},label:"Nama Skema Pajak","lazy-rules":"",error:!!l(i).errors.name,disable:l(i).processing,"error-message":l(i).errors.name,rules:[g=>g&&g.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(re,{modelValue:l(i).rate_percentage,"onUpdate:modelValue":b[3]||(b[3]=g=>l(i).rate_percentage=g),modelModifiers:{number:!0},label:"Tarif Persentase (%)",type:"number",suffix:"%",rules:[g=>g>=0||"Persentase tidak boleh negatif."],error:!!l(i).errors.rate_percentage,disable:l(i).processing,"error-message":l(i).errors.rate_percentage,"hide-bottom-space":""},null,8,["modelValue","rules","error","disable","error-message"]),e(re,{modelValue:l(i).tax_authority,"onUpdate:modelValue":b[4]||(b[4]=g=>l(i).tax_authority=g),modelModifiers:{trim:!0},label:"Otoritas Pajak (Opsional)",hint:"Contoh: DJP, Pemerintah Daerah",error:!!l(i).errors.tax_authority,disable:l(i).processing,"error-message":l(i).errors.tax_authority,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(re,{modelValue:l(i).description,"onUpdate:modelValue":b[5]||(b[5]=g=>l(i).description=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:l(i).processing,error:!!l(i).errors.description,"error-message":l(i).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),t("div",KV,[e(Za,{modelValue:l(i).is_inclusive,"onUpdate:modelValue":b[6]||(b[6]=g=>l(i).is_inclusive=g),disable:l(i).processing,label:l(i).is_inclusive?"Harga Jual SUDAH termasuk Pajak":"Harga Jual BELUM termasuk Pajak",color:"primary"},null,8,["modelValue","disable","label"]),l(i).errors.is_inclusive?(u(),h("div",YV,r(l(i).errors.is_inclusive),1)):k("",!0)]),t("div",WV,[e(Za,{modelValue:l(i).active,"onUpdate:modelValue":b[7]||(b[7]=g=>l(i).active=g),disable:l(i).processing,label:l(i).active?"Skema Aktif":"Skema Non-Aktif",color:"primary"},null,8,["modelValue","disable","label"]),l(i).errors.active?(u(),h("div",QV,r(l(i).errors.active),1)):k("",!0)])]),_:1}),e(ee,{class:"q-gutter-sm"},{default:a(()=>[e(M,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:l(i).processing,loading:l(i).processing},null,8,["disable","loading"]),e(M,{icon:"cancel",label:"Batal",disable:l(i).processing,onClick:b[8]||(b[8]=g=>l(K).get(f.route("admin.tax-scheme.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[l(s).screen.lt.md?{name:"left-button",fn:a(()=>[t("div",LV,[e(M,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:b[0]||(b[0]=g=>l(K).get(f.route("admin.tax-scheme.index")))})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},GV=Object.freeze(Object.defineProperty({__proto__:null,default:JV},Symbol.toStringTag,{value:"Module"})),XV={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ZV={class:"q-pa-xs"},eq={class:"full-width row flex-center text-grey-8 q-gutter-sm"},tq={class:"text-weight-bold"},aq={class:"text-grey-8"},lq={class:"text-weight-medium"},oq={class:"text-weight-medium text-uppercase"},nq={key:0,class:"text-grey-8"},sq={key:1,class:"text-grey-8"},rq={class:"flex justify-end"},oo="Skema Pajak",iq={__name:"Index",setup(c){const s=he(),m=T(!1),o=T([]),i=T(!0),n=T(null),f=T(null),b=ot(f),p=Ee({search:"",...He()}),d=T({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"rate_percentage",label:"Tarif",field:"rate_percentage",align:"right",sortable:!0,format:S=>`${S}%`},{name:"is_inclusive",label:"Tipe Harga",field:"is_inclusive",align:"center",format:S=>S?"INCLUSIVE":"EXCLUSIVE",sortable:!0},{name:"tax_authority",label:"Otoritas",field:"tax_authority",align:"left",sortable:!0},{name:"active",label:"Status",field:"active",align:"center",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left"},{name:"action",align:"right"}];xe(()=>{y()});const _=S=>st({message:`Hapus Skema Pajak ${S.name}?`,url:route("admin.tax-scheme.delete",S.id),fetchItemsCallback:y,loading:i}),y=(S=null)=>{Ke({pagination:d,filter:p,props:S,rows:o,url:route("admin.tax-scheme.data"),loading:i,tableRef:n})},x=G(()=>s.screen.gt.sm?g:g.filter(S=>S.name==="name"||S.name==="action"));return(S,C)=>{const j=W("i-head"),z=W("authenticated-layout");return u(),h(H,null,[e(j,{title:oo}),e(z,null,ze({title:a(()=>[v(r(oo))]),"right-button":a(()=>[e(M,{icon:m.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:C[0]||(C[0]=V=>m.value=!m.value)},null,8,["icon"]),S.$can("admin.tax-scheme.add")?(u(),U(M,{key:0,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:C[1]||(C[1]=V=>l(K).get(S.route("admin.tax-scheme.add")))})):k("",!0)]),default:a(()=>[t("div",ZV,[e(Me,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id",pagination:d.value,"onUpdate:pagination":C[4]||(C[4]=V=>d.value=V),filter:p.search,loading:i.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ye({height:l(b)}),onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(We,{showing:"",color:"red"})]),"no-data":a(({icon:V,message:E,filter:I})=>[t("div",eq,[t("span",null,r(E)+" "+r(I?" with term "+I:""),1)])]),body:a(V=>[e(Oe,{props:V},{default:a(()=>[e(Y,{key:"name",props:V,class:"wrap-column"},{default:a(()=>[t("div",tq,r(V.row.name),1),l(s).screen.gt.sm?k("",!0):(u(),h(H,{key:0},[t("div",aq,[C[5]||(C[5]=v(" Tarif: ")),t("span",lq,r(V.row.rate_percentage)+"%",1)]),t("div",null,[C[6]||(C[6]=v(" Tipe: ")),t("span",oq,r(V.row.is_inclusive?"Inclusive":"Exclusive"),1)]),V.row.tax_authority?(u(),h("div",nq,[e(q,{name:"account_balance",size:"xs"}),v(" Otoritas: "+r(V.row.tax_authority),1)])):k("",!0),V.row.description?(u(),h("div",sq,[e(q,{name:"description",size:"xs"}),v(" "+r(V.row.description),1)])):k("",!0),e(it,{color:V.row.active?"positive":"negative"},{default:a(()=>[v(r(V.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])],64))]),_:2},1032,["props"]),e(Y,{key:"rate_percentage",props:V,class:"text-right text-weight-bold"},{default:a(()=>[v(r(V.row.rate_percentage)+"% ",1)]),_:2},1032,["props"]),e(Y,{key:"is_inclusive",props:V,class:"text-center"},{default:a(()=>[e(it,{color:V.row.is_inclusive?"green-7":"deep-orange-7","text-color":"white"},{default:a(()=>[v(r(V.row.is_inclusive?"INCLUSIVE":"EXCLUSIVE"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Y,{key:"tax_authority",props:V,class:"wrap-column"},{default:a(()=>[v(r(V.row.tax_authority),1)]),_:2},1032,["props"]),e(Y,{key:"active",props:V,class:"text-center"},{default:a(()=>[e(it,{color:V.row.active?"positive":"negative"},{default:a(()=>[v(r(V.row.active?"Aktif":"Non-Aktif"),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(Y,{key:"description",props:V,class:"wrap-column"},{default:a(()=>[v(r(V.row.description),1)]),_:2},1032,["props"]),e(Y,{key:"action",props:V},{default:a(()=>[t("div",rq,[S.$can("admin.tax-scheme.add")||S.$can("admin.tax-scheme.edit")||S.$can("admin.tax-scheme.delete")?(u(),U(M,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:C[3]||(C[3]=Q(()=>{},["stop"]))},{default:a(()=>[e(at,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ae,{style:{width:"200px"}},{default:a(()=>[S.$can("admin.tax-scheme.add")?ae((u(),U(le,{key:0,clickable:"",onClick:Q(E=>l(K).get(S.route("admin.tax-scheme.duplicate",V.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"file_copy"})]),_:1}),e(F,null,{default:a(()=>C[7]||(C[7]=[v("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),S.$can("admin.tax-scheme.edit")?ae((u(),U(le,{key:1,clickable:"",onClick:Q(E=>l(K).get(S.route("admin.tax-scheme.edit",V.row.id)),["stop"])},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"edit"})]),_:1}),e(F,null,{default:a(()=>C[8]||(C[8]=[v("Edit")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0),S.$can("admin.tax-scheme.delete")?ae((u(),U(le,{key:2,onClick:Q(E=>_(V.row),["stop"]),clickable:""},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"delete_forever"})]),_:1}),e(F,null,{default:a(()=>C[9]||(C[9]=[v("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[se],[me]]):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):k("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[m.value?{name:"header",fn:a(()=>[e(Xe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[t("div",XV,[e(re,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:p.search,"onUpdate:modelValue":C[2]||(C[2]=V=>p.search=V),placeholder:"Cari",clearable:""},{append:a(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},dq=Object.freeze(Object.defineProperty({__proto__:null,default:iq},Symbol.toStringTag,{value:"Module"})),uq={key:1,class:"q-ml-sm"},mq={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},cq={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},pq={class:"absolute-bottom text-grey-6 q-pa-md"},Da="amanah-pos.layout.left-drawer-open",fq={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(c,{expose:s}){const m=he(),o=fe(),i=T(JSON.parse(localStorage.getItem(Da))),n=T(!1),f=()=>i.value=!i.value,b=()=>{i.value=!1};return tt(i,p=>{localStorage.setItem(Da,p)}),xe(()=>{i.value=JSON.parse(localStorage.getItem(Da)),m.screen.lt.md&&(i.value=!1)}),s({hideDrawer:b}),(p,d)=>{const g=W("my-link");return u(),U(Ts,{view:"lHh LpR lFf"},{default:a(()=>[e(xs,null,{default:a(()=>[e(Xe,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:a(()=>[c.showDrawerButton&&!i.value?(u(),U(M,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:f},{default:a(()=>[e(q,{class:"material-symbols-outlined"},{default:a(()=>d[36]||(d[36]=[v("dock_to_right")])),_:1})]),_:1})):k("",!0),l(m).screen.gt.sm?(u(),h("div",uq,[Ct(p.$slots,"left-button",{},void 0,!0)])):k("",!0),e(la,{style:{"font-size":"16px"}},{default:a(()=>[Ct(p.$slots,"title",{},()=>[v(r(p.$config.APP_NAME),1)],!0)]),_:3}),Ct(p.$slots,"right-button",{},void 0,!0)]),_:3}),Ct(p.$slots,"header",{},void 0,!0)]),_:3}),e(Ss,{breakpoint:768,modelValue:i.value,"onUpdate:modelValue":d[35]||(d[35]=_=>i.value=_),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:a(()=>[t("div",mq,[t("div",cq,[e(Vs,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=_=>n.value=_),class:qe(["profile-btn text-bold",{"profile-btn-active":n.value}]),flat:"",label:l(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:a(()=>[e(Ae,{id:"profile-btn-popup",style:{color:"#444"}},{default:a(()=>[e(le,null,{default:a(()=>[e(Xt,{style:{"margin-left":"-15px"}},{default:a(()=>[e(q,{name:"person"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>[e(g,{class:"text-bold text-grey-9",href:p.route("admin.user-profile.edit")},{default:a(()=>[v(r(l(o).props.auth.user.name),1)]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}),e(Re),ae((u(),U(le,{clickable:"",style:{color:"inherit"},href:p.route("admin.auth.logout")},{default:a(()=>[e(F,null,{default:a(()=>[e(be,null,{default:a(()=>[e(q,{name:"logout",class:"q-mr-sm"}),d[37]||(d[37]=v(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[me],[se]])]),_:1})]),_:1},8,["modelValue","label","class"]),i.value?(u(),U(M,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:f},{default:a(()=>[e(q,{name:"dock_to_right"})]),_:1})):k("",!0)])]),e(qs,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:a(()=>[e(Ae,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:a(()=>[ae((u(),U(le,{clickable:"",active:p.$page.url.startsWith("/admin/home"),onClick:d[1]||(d[1]=_=>l(K).get(p.route("admin.home")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"home"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[38]||(d[38]=[v("Beranda")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]),p.$can("admin.dashboard")?ae((u(),U(le,{key:0,clickable:"",active:p.$page.url.startsWith("/admin/dashboard"),onClick:d[2]||(d[2]=_=>l(K).get(p.route("admin.dashboard")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"dashboard"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[39]||(d[39]=[v("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),e(qt,{icon:"o_fast_forward",label:"Pintasan"},{default:a(()=>[p.$can("admin.sales-order.add")?ae((u(),U(le,{key:0,class:"subnav show-icon",clickable:"",onClick:d[3]||(d[3]=_=>l(K).get(p.route("admin.sales-order.add")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"add_shopping_cart"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[40]||(d[40]=[v("Penjualan Baru ")])),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),p.$can("admin.purchase-order.add")?ae((u(),U(le,{key:1,class:"subnav show-icon",clickable:"",onClick:d[4]||(d[4]=_=>l(K).get(p.route("admin.purchase-order.add")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"o_shopping_basket"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[41]||(d[41]=[v("Pembelian Baru ")])),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),e(Re),p.$can("admin.customer.add")?ae((u(),U(le,{key:2,class:"subnav show-icon",clickable:"",onClick:d[5]||(d[5]=_=>l(K).get(p.route("admin.customer.add")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"person_add_alt"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[42]||(d[42]=[v("Pelanggan Baru ")])),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),p.$can("admin.supplier.add")?ae((u(),U(le,{key:3,class:"subnav show-icon",clickable:"",onClick:d[6]||(d[6]=_=>l(K).get(p.route("admin.supplier.add")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"o_business_center"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[43]||(d[43]=[v("Pemasok Baru ")])),_:1})]),_:1})]),_:1})),[[se]]):k("",!0),e(Re),p.$can("admin.product.add")?ae((u(),U(le,{key:4,class:"subnav show-icon",clickable:"",onClick:d[7]||(d[7]=_=>l(K).get(p.route("admin.product.add")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"o_inventory_2"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[44]||(d[44]=[v("Produk Baru ")])),_:1})]),_:1})]),_:1})),[[se]]):k("",!0)]),_:1}),p.$can("admin.sales-order.index")||p.$can("admin.customer.index")||p.$can("admin.sales-order-return.index")?(u(),U(qt,{key:1,icon:"storefront",label:"Penjualan","default-opened":p.$page.url.startsWith("/admin/sales-orders")||p.$page.url.startsWith("/admin/sales-order-returns")||p.$page.url.startsWith("/admin/customers")||p.$page.url.startsWith("/admin/customer-wallet-transactions")||p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[p.$can("admin.sales-order.index")?ae((u(),U(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-orders"),onClick:d[8]||(d[8]=_=>l(K).get(p.route("admin.sales-order.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"add_shopping_cart"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[45]||(d[45]=[v("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.sales-order-return.index")?ae((u(),U(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/sales-order-returns"),onClick:d[9]||(d[9]=_=>l(K).get(p.route("admin.sales-order-return.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"remove_shopping_cart"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[46]||(d[46]=[v("Retur Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.customer.index")?ae((u(),U(le,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customers"),onClick:d[10]||(d[10]=_=>l(K).get(p.route("admin.customer.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"people"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[47]||(d[47]=[v("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.customer-wallet-transaction-confirmation.index")||p.$can("admin.customer-wallet-transaction.index")?(u(),U(qt,{key:3,class:"subnav",icon:"wallet",label:"Deposit","default-opened":p.$page.url.startsWith("/admin/customer-wallet-transactions")||p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[p.$can("admin.customer-wallet-transaction-confirmation.index")?ae((u(),U(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:d[11]||(d[11]=_=>l(K).get(p.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"add_task"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[48]||(d[48]=[v("Konfirmasi Deposit")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.customer-wallet-transaction.index")?ae((u(),U(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:d[12]||(d[12]=_=>l(K).get(p.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"moving"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[49]||(d[49]=[v("Transaksi Deposit")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.purchase-order.index")||p.$can("admin.supplier.index")||p.$can("admin.purchase-order-return.index")?(u(),U(qt,{key:2,icon:"local_shipping",label:"Pembelian","default-opened":p.$page.url.startsWith("/admin/purchase-orders")||p.$page.url.startsWith("/admin/purchase-order-returns")||p.$page.url.startsWith("/admin/suppliers")},{default:a(()=>[p.$can("admin.purchase-order.index")?ae((u(),U(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-orders"),onClick:d[13]||(d[13]=_=>l(K).get(p.route("admin.purchase-order.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"add_shopping_cart"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[50]||(d[50]=[v("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.purchase-order-return.index")?ae((u(),U(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/purchase-order-returns"),onClick:d[14]||(d[14]=_=>l(K).get(p.route("admin.purchase-order-return.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"remove_shopping_cart"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[51]||(d[51]=[v("Retur Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.supplier.index")?ae((u(),U(le,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/suppliers"),onClick:d[15]||(d[15]=_=>l(K).get(p.route("admin.supplier.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"people"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[52]||(d[52]=[v("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.product.index")||p.$can("admin.product-category.index")||p.$can("admin.stock-adjustment.index")||p.$can("admin.stock-movement.index")?(u(),U(qt,{key:3,icon:"inventory_2",label:"Inventori","default-opened":p.$page.url.startsWith("/admin/products")||p.$page.url.startsWith("/admin/product-categories")||p.$page.url.startsWith("/admin/stock-adjustments")||p.$page.url.startsWith("/admin/stock-movements")},{default:a(()=>[p.$can("admin.stock-adjustment.index")?ae((u(),U(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-adjustments"),onClick:d[16]||(d[16]=_=>l(K).get(p.route("admin.stock-adjustment.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"swap_vert"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[53]||(d[53]=[v("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.stock-movement.index")?ae((u(),U(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/stock-movements"),onClick:d[17]||(d[17]=_=>l(K).get(p.route("admin.stock-movement.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"timeline"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[54]||(d[54]=[v("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.product.index")?ae((u(),U(le,{key:2,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/products"),onClick:d[18]||(d[18]=_=>l(K).get(p.route("admin.product.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"box"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[55]||(d[55]=[v("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.product-category.index")?ae((u(),U(le,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/product-categories"),onClick:d[19]||(d[19]=_=>l(K).get(p.route("admin.product-category.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"category"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[56]||(d[56]=[v("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),e(qt,{icon:"business_center",label:"Back Office","default-opened":p.$page.url.startsWith("/admin/cashier-terminals")||p.$page.url.startsWith("/admin/cashier-sessions")||p.$page.url.startsWith("/admin/finance-accounts")||p.$page.url.startsWith("/admin/finance-transactions")||p.$page.url.startsWith("/admin/operational-costs")||p.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[p.$can("admin.cashier-session.index")||p.$can("admin.cashier-terminal.index")||p.$can("admin.finance-account.index")||p.$can("admin.finance-transaction.index")||p.$can("admin.operational-cost.index")||p.$can("admin.operational-cost-category.index")?(u(),U(qt,{key:0,class:"subnav show-icon",icon:"point_of_sale",label:"Kasir","default-opened":p.$page.url.startsWith("/admin/cashier-terminals")||p.$page.url.startsWith("/admin/cashier-session")},{default:a(()=>[p.$can("admin.cashier-session.index")?ae((u(),U(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-sessions"),onClick:d[20]||(d[20]=_=>l(K).get(p.route("admin.cashier-session.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"tv_signin"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[57]||(d[57]=[v("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.cashier-terminal.index")?ae((u(),U(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/cashier-terminals"),onClick:d[21]||(d[21]=_=>l(K).get(p.route("admin.cashier-terminal.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"point_of_sale"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[58]||(d[58]=[v("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.finance-transaction.index")||p.$can("admin.finance-account.index")?(u(),U(qt,{key:1,class:"subnav show-icon",icon:"finance",label:"Keuangan","default-opened":p.$page.url.startsWith("/admin/finance-accounts")||p.$page.url.startsWith("/admin/finance-transactions")},{default:a(()=>[p.$can("admin.finance-transaction.index")?ae((u(),U(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-transactions"),onClick:d[22]||(d[22]=_=>l(K).get(p.route("admin.finance-transaction.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"moving"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[59]||(d[59]=[v("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.finance-account.index")?ae((u(),U(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/finance-accounts"),onClick:d[23]||(d[23]=_=>l(K).get(p.route("admin.finance-account.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"groups_2"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[60]||(d[60]=[v("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0),p.$can("admin.operational-cost.index")||p.$can("admin.operational-cost-category.index")?(u(),U(qt,{key:2,class:"subnav show-icon",icon:"paid",label:"Operasional","default-opened":p.$page.url.startsWith("/admin/operational-costs")||p.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[p.$can("admin.operational-cost.index")?ae((u(),U(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-costs"),onClick:d[24]||(d[24]=_=>l(K).get(p.route("admin.operational-cost.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"request_quote"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[61]||(d[61]=[v("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.operational-cost-category.index")?ae((u(),U(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/operational-cost-categories"),onClick:d[25]||(d[25]=_=>l(K).get(p.route("admin.operational-cost-category.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"category"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[62]||(d[62]=[v("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0)]),_:1},8,["default-opened"])):k("",!0)]),_:1},8,["default-opened"]),p.$can("admin.report.index")?ae((u(),U(le,{key:4,clickable:"",active:p.$page.url.startsWith("/admin/reports"),onClick:d[26]||(d[26]=_=>l(K).get(p.route("admin.report.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"analytics"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[63]||(d[63]=[v("Laporan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),e(qt,{icon:"settings",label:"Pengaturan","default-opened":p.$page.url.startsWith("/admin/settings")},{default:a(()=>[p.$can("admin.user.index")?ae((u(),U(le,{key:0,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/users"),onClick:d[27]||(d[27]=_=>l(K).get(p.route("admin.user.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"person"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[64]||(d[64]=[v("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.user-role.index")?ae((u(),U(le,{key:1,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-roles"),onClick:d[28]||(d[28]=_=>l(K).get(p.route("admin.user-role.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"group"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[65]||(d[65]=[v("Peran Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),k("",!0),p.$can("admin.pos-settings.edit")?ae((u(),U(le,{key:3,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/pos"),onClick:d[30]||(d[30]=_=>l(K).get(p.route("admin.pos-settings.edit")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"point_of_sale"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[67]||(d[67]=[v("Point of Sales")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.company-profile.edit")?ae((u(),U(le,{key:4,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/company-profile"),onClick:d[31]||(d[31]=_=>l(K).get(p.route("admin.company-profile.edit")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"apartment"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[68]||(d[68]=[v("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),p.$can("admin.user-activity-log.index")?ae((u(),U(le,{key:5,class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/user-activity-log"),onClick:d[32]||(d[32]=_=>l(K).get(p.route("admin.user-activity-log.index")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"article"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[69]||(d[69]=[v("Log Aktivitas")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]]):k("",!0),k("",!0),ae((u(),U(le,{class:"subnav",clickable:"",active:p.$page.url.startsWith("/admin/settings/system-information"),onClick:d[34]||(d[34]=_=>l(K).get(p.route("admin.settings.system-information")))},{default:a(()=>[e(F,{avatar:""},{default:a(()=>[e(q,{name:"info"})]),_:1}),e(F,null,{default:a(()=>[e(be,null,{default:a(()=>d[71]||(d[71]=[v("Informasi Sistem")])),_:1})]),_:1})]),_:1},8,["active"])),[[se]])]),_:1},8,["default-opened"]),t("div",pq,"  2025 - "+r(p.$config.APP_NAME+" v"+p.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Cs,{class:"bg-grey-1"},{default:a(()=>[e(Te,null,{default:a(()=>[Ct(p.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),Ct(p.$slots,"footer",{},void 0,!0)]),_:3})}}},gq=kt(fq,[["__scopeId","data-v-c083d9c9"]]),bq={__name:"GuestLayout",setup(c){return(s,m)=>(u(),U(Ps,null,{default:a(()=>[Ct(s.$slots,"default")]),_:3}))}};Rs({onRegistered(c){console.log("Admin Service Worker registered:",c)}});Os({layouts:{authenticated:gq,guest:bq},pagesGlob:Object.assign({"./pages/_examples/Autocomplete1.vue":js,"./pages/auth/Login.vue":Ls,"./pages/cashier-session/Close.vue":Gs,"./pages/cashier-session/Detail.vue":Br,"./pages/cashier-session/Index.vue":ai,"./pages/cashier-session/Open.vue":si,"./pages/cashier-session/detail/FinanceTransactionTab.vue":jr,"./pages/cashier-session/detail/MainInfoTab.vue":wr,"./pages/cashier-session/detail/SalesOrderTab.vue":Pr,"./pages/cashier-terminal/Detail.vue":wi,"./pages/cashier-terminal/Editor.vue":Vi,"./pages/cashier-terminal/Index.vue":Oi,"./pages/cashier-terminal/detail/MainInfoTab.vue":fi,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":bi,"./pages/customer-wallet-transaction-confirmation/Detail.vue":zi,"./pages/customer-wallet-transaction-confirmation/Index.vue":Qi,"./pages/customer-wallet-transaction/Adjustment.vue":Xi,"./pages/customer-wallet-transaction/Detail.vue":dd,"./pages/customer-wallet-transaction/Editor.vue":pd,"./pages/customer-wallet-transaction/Index.vue":wd,"./pages/customer/Detail.vue":Kd,"./pages/customer/Editor.vue":Jd,"./pages/customer/Import.vue":lu,"./pages/customer/Index.vue":cu,"./pages/customer/detail/MainInfoTab.vue":Od,"./pages/customer/detail/OrderHistoryTab.vue":Nd,"./pages/customer/detail/WalletHistoryTab.vue":Ud,"./pages/dashboard/Index.vue":Bu,"./pages/dashboard/cards/ActualSummaryCard.vue":Su,"./pages/dashboard/cards/ChartCard.vue":Pu,"./pages/dashboard/cards/SummaryCard.vue":Gu,"./pages/dashboard/cards/TopCard.vue":ju,"./pages/finance-account/Detail.vue":dm,"./pages/finance-account/Editor.vue":fm,"./pages/finance-account/Index.vue":qm,"./pages/finance-account/detail/HistoryTab.vue":lm,"./pages/finance-account/detail/MainInfoTab.vue":Zu,"./pages/finance-transaction/Detail.vue":Am,"./pages/finance-transaction/Editor.vue":Fm,"./pages/finance-transaction/Index.vue":Jm,"./pages/home/Index.vue":rc,"./pages/operational-cost-category/Editor.vue":mc,"./pages/operational-cost-category/Index.vue":_c,"./pages/operational-cost/Detail.vue":Tc,"./pages/operational-cost/Editor.vue":Uc,"./pages/operational-cost/Index.vue":Lc,"./pages/product-category/Editor.vue":Wc,"./pages/product-category/Index.vue":tp,"./pages/product/Detail.vue":xp,"./pages/product/Editor.vue":Up,"./pages/product/Import.vue":Mp,"./pages/product/Index.vue":Xp,"./pages/product/SendPriceList.vue":sf,"./pages/product/SendPriceList2.vue":ff,"./pages/product/detail/MainInfoTab.vue":fp,"./pages/product/detail/StockHistoryTab.vue":vp,"./pages/purchase-order-return/Create.vue":_f,"./pages/purchase-order-return/Detail.vue":vg,"./pages/purchase-order-return/Editor.vue":b1,"./pages/purchase-order-return/Index.vue":T1,"./pages/purchase-order-return/detail/MainInfoTab.vue":Hf,"./pages/purchase-order-return/detail/PaymentDialog.vue":Xf,"./pages/purchase-order-return/detail/RefundTab.vue":pg,"./pages/purchase-order-return/editor/HelpDialog.vue":Pg,"./pages/purchase-order-return/editor/ItemEditorDialog.vue":Sg,"./pages/purchase-order-return/editor/ItemsListTable.vue":hg,"./pages/purchase-order-return/editor/OrderInfoDialog.vue":Ig,"./pages/purchase-order-return/editor/PaymentDialog.vue":K1,"./pages/purchase-order-return/editor/SuccessDialog.vue":sb,"./pages/purchase-order/Detail.vue":fv,"./pages/purchase-order/Editor.vue":q_,"./pages/purchase-order/Index.vue":M_,"./pages/purchase-order/detail/InvoiceTab.vue":Bb,"./pages/purchase-order/detail/PaymentDialog.vue":Qb,"./pages/purchase-order/detail/PaymentTab.vue":uv,"./pages/purchase-order/editor/HelpDialog.vue":Nv,"./pages/purchase-order/editor/ItemEditorDialog.vue":Av,"./pages/purchase-order/editor/ItemsListTable.vue":yv,"./pages/purchase-order/editor/OrderInfoDialog.vue":Lv,"./pages/purchase-order/editor/PaymentDialog.vue":Uv,"./pages/purchase-order/editor/SuccessDialog.vue":l_,"./pages/report/Index.vue":Y_,"./pages/reports/ReportGeneratorLayout.vue":sy,"./pages/reports/customer/Index.vue":dy,"./pages/reports/product/Index.vue":cy,"./pages/reports/supplier/Index.vue":gy,"./pages/sales-order-return/Create.vue":yy,"./pages/sales-order-return/Detail.vue":hk,"./pages/sales-order-return/Editor.vue":rw,"./pages/sales-order-return/Index.vue":hw,"./pages/sales-order-return/detail/MainInfoTab.vue":Qy,"./pages/sales-order-return/detail/PaymentDialog.vue":ak,"./pages/sales-order-return/detail/RefundTab.vue":_k,"./pages/sales-order-return/editor/HelpDialog.vue":Dk,"./pages/sales-order-return/editor/ItemEditorDialog.vue":Pk,"./pages/sales-order-return/editor/ItemsListTable.vue":qk,"./pages/sales-order-return/editor/OrderInfoDialog.vue":Ek,"./pages/sales-order-return/editor/PaymentDialog.vue":Mw,"./pages/sales-order-return/editor/SuccessDialog.vue":Zw,"./pages/sales-order/Detail.vue":u2,"./pages/sales-order/Editor.vue":xh,"./pages/sales-order/Index.vue":Bh,"./pages/sales-order/detail/InvoiceTab.vue":E0,"./pages/sales-order/detail/PaymentDialog.vue":H0,"./pages/sales-order/detail/PaymentTab.vue":s2,"./pages/sales-order/editor/HelpDialog.vue":j2,"./pages/sales-order/editor/ItemEditorDialog.vue":I2,"./pages/sales-order/editor/ItemsListTable.vue":g2,"./pages/sales-order/editor/OrderInfoDialog.vue":N2,"./pages/sales-order/editor/PaymentDialog.vue":R2,"./pages/sales-order/editor/SuccessDialog.vue":Z2,"./pages/settings/SystemInformation.vue":Yh,"./pages/settings/company-profile/Edit.vue":Zh,"./pages/settings/company-profile/partials/CompanyInfoForm.vue":Wh,"./pages/settings/database/Index.vue":o$,"./pages/settings/pos/Edit.vue":d$,"./pages/settings/user-activity-log/Detail.vue":Q$,"./pages/settings/user-activity-log/Index.vue":ax,"./pages/settings/user-profile/Edit.vue":dx,"./pages/settings/user-profile/partials/UpdatePasswordForm.vue":lx,"./pages/settings/user-profile/partials/UpdateProfileInformationForm.vue":ox,"./pages/settings/user-role/Detail.vue":Vx,"./pages/settings/user-role/Editor.vue":Ox,"./pages/settings/user-role/Index.vue":Ax,"./pages/settings/user/Detail.vue":Jx,"./pages/settings/user/Editor.vue":aS,"./pages/settings/user/Index.vue":dS,"./pages/stock-adjustment/Create.vue":kS,"./pages/stock-adjustment/Detail.vue":RS,"./pages/stock-adjustment/Editor.vue":AS,"./pages/stock-adjustment/Index.vue":JS,"./pages/stock-movement/Index.vue":tV,"./pages/supplier/Detail.vue":$V,"./pages/supplier/Editor.vue":UV,"./pages/supplier/Index.vue":zV,"./pages/supplier/detail/MainInfoTab.vue":mV,"./pages/supplier/detail/OrderHistoryTab.vue":vV,"./pages/tax-scheme/Editor.vue":GV,"./pages/tax-scheme/Index.vue":dq})});
