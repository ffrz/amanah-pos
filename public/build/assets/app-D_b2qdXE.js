import{_ as ft,r as H,c as h,o as v,a as e,w as a,b as l,Q as ie,d as te,e as b,F as L,f as S,g as N,h as T,i as se,t as r,u as t,j as K,k as mt,l as Gt,T as Oe,m as ke,n as Re,p as Q,q as Fe,s as Rt,v as V,x as le,y as R,z as ht,A as ce,B as De,C as J,D as Xe,E as tt,G as W,H as yt,I as be,J as he,K as Ke,L as Ie,M as Ue,N as $e,O as Me,P as X,R as Ye,S as Qe,U as Te,V as Ae,W as qe,X as _e,Y as F,Z as we,$ as Je,a0 as Ee,a1 as ee,a2 as M,a3 as ne,a4 as re,a5 as Ge,a6 as je,a7 as Be,a8 as Ne,a9 as go,aa as dl,ab as wa,ac as $t,ad as Xt,ae as fe,af as ka,ag as bo,ah as vo,ai as Ct,aj as gt,ak as ul,al as fl,am as _o,an as yo,ao as wo,ap as ko,aq as wt,ar as ho,as as $o,at as ml,au as Dt,av as cl,aw as Vl,ax as xo,ay as Yt,az as ql,aA as So,aB as Cl,aC as Vo,aD as ha,aE as qo,aF as Co,aG as To,aH as vl,aI as _l,aJ as Po,aK as $a,aL as st,aM as Zt,aN as el,aO as Bt,aP as Ft,aQ as Pt,aR as It,aS as We,aT as Tl,aU as zt,aV as Pl,aW as ot,aX as tl,aY as kt,aZ as Ut,a_ as yl,a$ as Ht,b0 as Io,b1 as Oo,b2 as xa,b3 as Do,b4 as Ro,b5 as Uo,b6 as Mo,b7 as Il,b8 as Ao,b9 as Eo,ba as jo,bb as No,bc as Sa,bd as lt,be as Bo,bf as Ol,bg as Fo,bh as zo,bi as Ho,bj as Lo,bk as Yo,bl as Ko,bm as Qo,bn as ge,bo as Qt,bp as at,bq as Wo,br as Jo,bs as Go,bt as Va,bu as Wt,bv as ll,bw as Nt,bx as Tt,by as xt,bz as gl,bA as Xo,bB as Zo,bC as en,bD as tn,bE as ln,bF as an,bG as At,bH as Et,bI as jt,bJ as wl,bK as on,bL as qa,bM as nn,bN as sn,bO as rn,bP as dn,bQ as un,bR as Ca,bS as mn,bT as cn,bU as pn,bV as Vt,bW as fn,bX as gn,bY as bn,bZ as vn,b_ as _n,b$ as yn,c0 as wn,c1 as kn,c2 as hn}from"./BaseGuestLayout-CzLjt6o3.js";const $n={},xn={class:"row"};function Sn(m,s){const d=H("i-head"),o=H("authenticated-layout");return v(),h(L,null,[e(d,{title:"About"}),e(o,null,{title:a(()=>s[0]||(s[0]=[b("About")])),default:a(()=>[l("div",xn,[e(ie,{class:"col q-pa-md q-ma-md",square:"",flat:"",bordered:""},{default:a(()=>[e(te,null,{default:a(()=>s[1]||(s[1]=[l("div",{class:"q-mb-md text-h4"},"About",-1),l("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Autem soluta, accusamus placeat eius eligendi perferendis quisquam veritatis iste debitis laboriosam facere et aliquam quos beatae illo distinctio rerum eos! Expedita, voluptatem. Aut nihil deleniti magni fuga eius labore aliquam nulla quod ullam sunt amet eum asperiores, harum unde eligendi tempore sapiente. Placeat sed, dignissimos voluptatum perspiciatis saepe aspernatur, maxime est, ipsam quas nobis cumque sunt labore molestias? Amet in sed ullam recusandae, nostrum dicta facilis blanditiis incidunt quae commodi soluta id impedit vel fugit illo, molestias reiciendis, provident nam molestiae! Ipsam, hic. Facere aut quisquam praesentium enim illum, pariatur nam.",-1),l("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque, cum nulla. Ut eligendi tenetur aliquam cum mollitia repellat voluptas, fugiat doloremque sunt commodi enim excepturi distinctio id sapiente incidunt ipsam asperiores cupiditate, labore libero! Ad facere magni cumque perspiciatis, adipisci possimus pariatur quo nobis minus, est enim similique quaerat vel asperiores ipsam harum et, totam fugit.",-1),l("p",null,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Suscipit aspernatur maxime consectetur, consequatur excepturi facilis praesentium rem placeat sapiente, maiores doloribus modi voluptate. Unde autem dolor officiis numquam incidunt quasi aspernatur nam dolores ratione quidem recusandae, nulla qui provident molestias odit nemo praesentium quas voluptatem aliquid perferendis, iste veritatis vitae. Dolor, eligendi quidem distinctio asperiores doloremque culpa corporis quibusdam earum ex laudantium iure officia ullam nostrum maxime voluptatum laboriosam impedit labore illum. Culpa, veniam dolor odio ad eius nisi, aspernatur quia veritatis blanditiis repellat id minima deserunt beatae?",-1)])),_:1})]),_:1})])]),_:1})],64)}const Vn=ft($n,[["render",Sn]]),qn=Object.freeze(Object.defineProperty({__proto__:null,default:Vn},Symbol.toStringTag,{value:"Module"})),Cn={class:"q-ma-md"},Tn={key:0},Pn={__name:"Autocomplete1",setup(m){const s=S(null),d=S([]);let o=null;const n=(i,p)=>{if(i.length<2){p(()=>{d.value=[]});return}o&&clearTimeout(o),o=setTimeout(()=>{mt.get(`/web-api/customers?q=${i}`).then(f=>{const u=f.data.data.map(c=>({label:`${c.username} - ${c.name}`,value:c.id,data:c}));p(()=>{d.value=u})}).catch(f=>{console.error("Gagal mengambil data pelanggan:",f),p(()=>{d.value=[]})})})};return(i,p)=>{const f=H("guest-layout");return v(),N(f,null,{default:a(()=>[l("div",Cn,[e(se,{class:"full-width",modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=u=>s.value=u),"use-input":"",label:"Cari Pelanggan",options:d.value,onFilter:n,hint:"Ketik minimal 2 karakter untuk mencari",clearable:""},null,8,["modelValue","options"]),s.value?(v(),h("div",Tn," Saldo: Rp. "+r(t(K)(s.value.data.balance)),1)):T("",!0)])]),_:1})}}},In=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"})),On={style:{"margin-left":"-10px"}},al={__name:"StandardCheckBox",props:{modelValue:{type:Boolean,required:!0},disable:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(m,{emit:s}){const d=m,o=s;return(n,i)=>(v(),h("div",On,[e(Gt,{class:"full-width q-pl-none","model-value":d.modelValue,disable:d.disable,label:d.label,"onUpdate:modelValue":i[0]||(i[0]=p=>o("update:modelValue",p))},null,8,["model-value","disable","label"])]))}},Dn={class:"column"},Rn={class:"row"},Un={class:"flex justify-center"},Mn={__name:"Login",setup(m){let s=Oe({username:window.CONFIG.APP_DEMO?"admin":"",password:window.CONFIG.APP_DEMO?"12345":"",remember:!0});const d=()=>Fe({form:s,url:route("admin.auth.login")}),o=S(!1);return(n,i)=>{const p=H("i-head"),f=H("guest-layout");return v(),h(L,null,[e(p,{title:"Login"}),e(f,null,{default:a(()=>[e(ke,{class:"row justify-center items-center"},{default:a(()=>[l("div",Dn,[l("div",Rn,[e(Re,{class:"q-gutter-md",onSubmit:Q(d,["prevent"])},{default:a(()=>[e(ie,{square:"",bordered:"",flat:"",class:"q-pa-md"},{default:a(()=>[e(te,{class:"text-center"},{default:a(()=>[l("div",Un,[e(Rt,{size:"80px"},{default:a(()=>[e(V,{name:"badge",color:"primary"})]),_:1})]),i[4]||(i[4]=l("h6",{class:"q-my-sm text-primary"},"Login Staff",-1))]),_:1}),e(te,null,{default:a(()=>[e(le,{modelValue:t(s).username,"onUpdate:modelValue":i[0]||(i[0]=u=>t(s).username=u),modelModifiers:{trim:!0},label:"Username","lazy-rules":"",error:!!t(s).errors.username,autocomplete:"username","error-message":t(s).errors.username,disable:t(s).processing,rules:[u=>u&&u.length>0||"Masukkan Username"],"hide-bottom-space":"","data-test":"username"},{append:a(()=>[e(V,{name:"person"})]),_:1},8,["modelValue","error","error-message","disable","rules"]),e(le,{modelValue:t(s).password,"onUpdate:modelValue":i[2]||(i[2]=u=>t(s).password=u),type:o.value?"text":"password",label:"Kata Sandi",error:!!t(s).errors.password,autocomplete:"current-password","error-message":t(s).errors.password,"lazy-rules":"",disable:t(s).processing,rules:[u=>u&&u.length>0||"Masukkan kata sandi"],"hide-bottom-space":"","data-test":"password"},{append:a(()=>[e(R,{dense:"",flat:"",round:"",onClick:i[1]||(i[1]=u=>o.value=!o.value)},{default:a(()=>[e(V,{name:o.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","error","error-message","disable","rules"]),e(al,{class:"q-mt-sm",modelValue:t(s).remember,"onUpdate:modelValue":i[3]||(i[3]=u=>t(s).remember=u),disable:t(s).processing,label:"Ingat saya di perangkat ini"},null,8,["modelValue","disable"])]),_:1}),e(ht,null,{default:a(()=>[e(R,{icon:"login",type:"submit",color:"primary",class:"full-width",label:"Login",disable:t(s).processing,"data-test":"submit"},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},An=Object.freeze(Object.defineProperty({__proto__:null,default:Mn},Symbol.toStringTag,{value:"Module"})),En={class:"q-gutter-sm"},jn={class:"col col-md-6 q-pa-xs"},Nn={class:"detail q-mt-md"},Bn={key:0},Fn={class:"text-bold"},Dl="Tutup Sesi Kasir",zn={__name:"Close",setup(m){const s=ce(),d=Oe({closing_notes:s.props.data.closing_notes,closing_balance:parseFloat(s.props.data.closing_balance)}),o=()=>Fe({form:d,url:route("admin.cashier-session.close",{id:s.props.data.id})});return(n,i)=>{const p=H("i-head"),f=H("authenticated-layout");return v(),h(L,null,[e(p,{title:Dl}),e(f,null,{title:a(()=>[b(r(Dl))]),"left-button":a(()=>[l("div",En,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=u=>n.$inertia.get(n.route("admin.cashier-session.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",jn,[e(Re,{class:"row",onSubmit:Q(o,["prevent"]),onValidationError:t(De)},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":i[1]||(i[1]=u=>t(d).id=u)},null,512),[[Xe,t(d).id]]),e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[l("table",Nn,[l("tbody",null,[l("tr",null,[i[4]||(i[4]=l("td",{style:{width:"130px"}},"Session ID",-1)),i[5]||(i[5]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.id),1)]),l("tr",null,[i[6]||(i[6]=l("td",null,"Terminal",-1)),i[7]||(i[7]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.cashier_terminal.name),1)]),l("tr",null,[i[8]||(i[8]=l("td",null,"Kasir",-1)),i[9]||(i[9]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.user.username)+" - "+r(t(s).props.data.user.name),1)]),l("tr",null,[i[10]||(i[10]=l("td",null,"Saldo Awal",-1)),i[11]||(i[11]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.opening_balance)),1)]),t(s).props.data.opening_notes?(v(),h("tr",Bn,[i[12]||(i[12]=l("td",null,"Catatan Buka",-1)),i[13]||(i[13]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.opening_notes),1)])):T("",!0),l("tr",null,[i[14]||(i[14]=l("td",null,"Total Penjualan",-1)),i[15]||(i[15]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.total_sales)),1)]),l("tr",null,[i[16]||(i[16]=l("td",null,"Total Pemasukan",-1)),i[17]||(i[17]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.total_income)),1)]),l("tr",null,[i[18]||(i[18]=l("td",null,"Total Pengeluaran",-1)),i[19]||(i[19]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.total_expense)),1)]),l("tr",null,[i[21]||(i[21]=l("td",null,"Saldo Akhir",-1)),i[22]||(i[22]=l("td",null,":",-1)),l("td",null,[l("div",Fn,r(t(tt)(t(s).props.data.closing_balance)),1),i[20]||(i[20]=l("div",{class:"text-red"}," Pastikan saldo akhir sesuai dengan jumlah uang di laci! ",-1))])])])]),e(le,{modelValue:t(d).closing_notes,"onUpdate:modelValue":i[2]||(i[2]=u=>t(d).closing_notes=u),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:t(d).processing,error:!!t(d).errors.closing_notes,"error-message":t(d).errors.closing_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{type:"submit",label:"Tutup",icon:"logout",color:"primary",disable:t(d).processing},null,8,["disable"]),e(R,{label:"Batal",icon:"cancel",disable:t(d).processing,onClick:i[3]||(i[3]=u=>t(W).get(n.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Hn=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"})),Ln={class:"detail"},Yn={key:0},Kn={key:1},Qn={key:0},Wn={key:0},Jn={colspan:"100%"},Gn={class:"q-my-md"},Xn={key:4},Zn={colspan:"100%"},es={key:5},ts={colspan:"100%"},Ta={__name:"MainInfoTab",setup(m){const s=ce();return(d,o)=>(v(),h("table",Ln,[l("tbody",null,[o[27]||(o[27]=l("tr",null,[l("td",{colspan:"3"},[l("div",{class:"text-bold text-grey-8"},"Info Sesi")])],-1)),l("tr",null,[o[1]||(o[1]=l("td",{style:{width:"130px"}},"Session ID",-1)),o[2]||(o[2]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.id),1)]),l("tr",null,[o[3]||(o[3]=l("td",null,"Terminal",-1)),o[4]||(o[4]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.cashier_terminal.name),1)]),l("tr",null,[o[5]||(o[5]=l("td",null,"Kasir",-1)),o[6]||(o[6]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.user.username)+" - "+r(t(s).props.data.user.name),1)]),l("tr",null,[o[7]||(o[7]=l("td",null,"Status",-1)),o[8]||(o[8]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.is_closed?"Ditutup":"Aktif"),1)]),o[28]||(o[28]=l("tr",null,[l("td",{colspan:"100%"},[l("div",{class:"q-mt-sm text-grey-8"},"Info Buka Sesi")])],-1)),l("tr",null,[o[9]||(o[9]=l("td",null,"Saldo Awal",-1)),o[10]||(o[10]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.opening_balance)),1)]),t(s).props.data.opening_notes?(v(),h("tr",Yn,[o[11]||(o[11]=l("td",null,"Catatan",-1)),o[12]||(o[12]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.opening_notes),1)])):T("",!0),o[29]||(o[29]=l("tr",null,[l("td",{colspan:"100%"},[l("div",{class:"q-mt-sm text-grey-8"},"Rincian Pendapatan & Kas")])],-1)),l("tr",null,[o[13]||(o[13]=l("td",null,"Total Penjualan",-1)),o[14]||(o[14]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.total_sales)),1)]),l("tr",null,[o[15]||(o[15]=l("td",null,"Total Pemasukan",-1)),o[16]||(o[16]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.total_income)),1)]),l("tr",null,[o[17]||(o[17]=l("td",null,"Total Pengeluaran",-1)),o[18]||(o[18]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.total_expense)),1)]),t(s).props.data.is_closed?T("",!0):(v(),h("tr",Kn,[o[19]||(o[19]=l("td",null,"Saldo Aktual",-1)),o[20]||(o[20]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.opening_balance+(t(s).props.data.total_income-t(s).props.data.total_expense))),1)])),t(s).props.data.is_closed?(v(),h(L,{key:2},[o[25]||(o[25]=l("tr",null,[l("td",{colspan:"100%"},[l("div",{class:"q-mt-sm text-grey-8"},"Info Tutup Sesi")])],-1)),l("tr",null,[o[21]||(o[21]=l("td",null,"Saldo Akhir",-1)),o[22]||(o[22]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.closing_balance)),1)]),t(s).props.data.closing_notes?(v(),h("tr",Qn,[o[23]||(o[23]=l("td",null,"Catatan",-1)),o[24]||(o[24]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.closing_notes),1)])):T("",!0)],64)):T("",!0),d.$can("admin.cashier-session.close")?(v(),h(L,{key:3},[t(s).props.data.is_closed?T("",!0):(v(),h("tr",Wn,[l("td",Jn,[l("div",Gn,[e(R,{class:"full-width",color:"accent",icon:"logout",onClick:o[0]||(o[0]=n=>d.$inertia.get(d.route("admin.cashier-session.close",{id:t(s).props.data.id})))},{default:a(()=>o[26]||(o[26]=[b(" Tutup Sesi Kasir ")])),_:1})])])]))],64)):T("",!0),o[30]||(o[30]=l("tr",null,[l("td",{colspan:"3"},[l("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),t(s).props.data.created_at?(v(),h("tr",Xn,[l("td",Zn," Dibuat "+r(t(yt)(t(s).props.data.created_at))+" oleh "+r(t(s).props.data.creator.name)+" ("+r(t(be)(t(s).props.data.created_at))+") ",1)])):T("",!0),t(s).props.data.updated_at?(v(),h("tr",es,[l("td",ts," Diperbarui "+r(t(yt)(t(s).props.data.updated_at))+" oleh "+r(t(s).props.data.updater.name)+" ("+r(t(be)(t(s).props.data.updated_at))+") ",1)])):T("",!0)])]))}},ls=Object.freeze(Object.defineProperty({__proto__:null,default:Ta},Symbol.toStringTag,{value:"Module"})),as={class:"q-gutter-sm"},os={class:"col col-md-6 q-pa-xs"},ns={class:"row"},Rl="Rincian Sesi Kasir",ss={__name:"Detail",setup(m){return S("main"),(s,d)=>{const o=H("i-head"),n=H("authenticated-layout");return v(),h(L,null,[e(o,{title:Rl}),e(n,null,{title:a(()=>[b(r(Rl))]),"left-button":a(()=>[l("div",as,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:d[0]||(d[0]=i=>s.$inertia.get(s.route("admin.cashier-session.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",os,[l("div",ns,[e(ie,{square:"",flat:"",bordered:"",class:"col q-pa-sm q-pt-md"},{default:a(()=>[e(Ta)]),_:1})])])]),_:1})]),_:1})],64)}}},rs=Object.freeze(Object.defineProperty({__proto__:null,default:ss},Symbol.toStringTag,{value:"Module"})),is={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ds={class:"q-pa-xs"},us={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ms={class:"flex justify-end"},Ul="Sesi Kasir",cs={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=Ie({search:"",status:"all",...Ue()}),c=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),_=[{name:"id",label:"Sesi",field:"id",align:"left",sortable:!0},{name:"opening_info",label:"Buka Sesi",field:"opening_info",sortable:!1,align:"left"},{name:"closing_info",label:"Tutup Sesi",field:"closing_info",sortable:!1,align:"left"},{name:"action",align:"right"}],w=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"closed",label:"Selesai"}];$e(()=>{x()});const g=D=>Ge({message:`Hapus Sesi: ${D.cashier_terminal.name} - ${D.user.username}?`,url:route("admin.cashier-session.delete",D.id),fetchItemsCallback:x,loading:n}),x=(D=null)=>{Me({pagination:c,filter:u,props:D,rows:o,url:route("admin.cashier-session.data"),loading:n,tableRef:i})},C=()=>x(),k=D=>W.get(route("admin.cashier-session.detail",{id:D.id})),A=X(()=>s.screen.gt.sm?_:_.filter(D=>D.name==="id"||D.name==="action"));return(D,y)=>{const O=H("i-head"),B=H("authenticated-layout");return v(),h(L,null,[e(O,{title:Ul}),e(B,null,Ye({title:a(()=>[b(r(Ul))]),"right-button":a(()=>[e(R,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:y[0]||(y[0]=$=>d.value=!d.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:y[1]||(y[1]=$=>t(W).get(D.route("admin.cashier-session.open")))})]),default:a(()=>[l("div",ds,[e(Te,{class:"full-height-table",style:Ae({height:t(f)}),ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":y[5]||(y[5]=$=>c.value=$),filter:u.search,loading:n.value,columns:A.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:q,filter:I})=>[l("div",us,[l("span",null,r(q)+" "+r(I?" with term "+I:""),1)])]),body:a($=>[e(qe,{props:$,class:_e(["cursor-pointer",$.row.is_closed?"":"bg-yellow-3"]),onClick:q=>k($.row)},{default:a(()=>[e(F,{key:"id",props:$,class:"wrap-column"},{default:a(()=>[l("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(" SessionID: "+r($.row.id),1)]),l("div",null,[e(V,{class:"inline-icon",name:"point_of_sale"}),b(" "+r($.row.cashier_terminal.name),1)]),l("div",null,[e(V,{class:"inline-icon",name:"person"}),b(" "+r($.row.user.username)+" - "+r($.row.user.name),1)])]),_:2},1032,["props"]),e(F,{key:"opening_info",props:$},{default:a(()=>[l("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r($.row.opened_at?t(be)($.row.opened_at):"-"),1)]),l("div",null,[e(V,{class:"inline-icon",name:"money"}),b(" "+r(t(tt)($.row.opening_balance)),1)]),$.row.opening_notes?(v(),N(we,{key:0,text:$.row.opening_notes,icon:"notes"},null,8,["text"])):T("",!0)]),_:2},1032,["props"]),e(F,{key:"closing_info",props:$},{default:a(()=>[l("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r($.row.closed_at?t(be)($.row.closed_at):"-"),1)]),l("div",null,[e(V,{class:"inline-icon",name:"money"}),b(" "+r(t(tt)($.row.closing_balance)),1)]),$.row.closing_notes?(v(),N(we,{key:0,text:$.row.closing_notes,icon:"notes"},null,8,["text"])):T("",!0)]),_:2},1032,["props"]),e(F,{key:"action",props:$},{default:a(()=>[l("div",ms,[e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:y[4]||(y[4]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[D.$can("admin.cashier-session.close")?J((v(),N(ee,{key:0,disable:$.row.is_closed,clickable:"",onClick:Q(q=>t(W).get(D.route("admin.cashier-session.close",$.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"logout"})]),_:1}),e(M,{icon:"logout"},{default:a(()=>y[6]||(y[6]=[b("Tutup Sesi Kasir")])),_:1})]),_:2},1032,["disable","onClick"])),[[ne],[re]]):T("",!0),D.$can("admin.cashier-session.delete")?J((v(),N(ee,{key:1,onClick:Q(q=>g($.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>y[7]||(y[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]):T("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",is,[e(se,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[y[2]||(y[2]=$=>u.status=$),C],options:w,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":y[3]||(y[3]=$=>u.search=$),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},ps=Object.freeze(Object.defineProperty({__proto__:null,default:cs},Symbol.toStringTag,{value:"Module"})),fs={class:"q-gutter-sm"},gs={class:"col col-md-6 q-pa-xs"},Ml="Buka Sesi Kasir",bs={__name:"Open",setup(m){const s=ce(),d=Oe({cashier_terminal_id:s.props.data.cashier_terminal_id,opening_balance:parseFloat(s.props.data.opening_balance),opening_notes:s.props.data.opening_notes}),o=[...s.props.cashier_terminals.map(i=>({value:i.id,label:i.name,balance:parseFloat(i.finance_account.balance)}))],n=()=>Fe({form:d,url:route("admin.cashier-session.open")});return Be(()=>d.cashier_terminal_id,i=>{if(i){const p=o.find(f=>f.value===i);p&&(d.opening_balance=p.balance)}else d.opening_balance=0}),(i,p)=>{const f=H("i-head"),u=H("authenticated-layout");return v(),h(L,null,[e(f,{title:Ml}),e(u,null,{title:a(()=>[b(r(Ml))]),"left-button":a(()=>[l("div",fs,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=c=>i.$inertia.get(i.route("admin.cashier-session.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",gs,[e(Re,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:t(De)},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=c=>t(d).id=c)},null,512),[[Xe,t(d).id]]),e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(se,{class:"custom-select",modelValue:t(d).cashier_terminal_id,"onUpdate:modelValue":p[2]||(p[2]=c=>t(d).cashier_terminal_id=c),label:"Terminal Kasir",options:o,"map-options":"","emit-value":"",errorMessage:t(d).errors.cashier_terminal_id,error:!!t(d).errors.cashier_terminal_id,disable:t(d).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),e(Ne,{modelValue:t(d).opening_balance,"onUpdate:modelValue":p[3]||(p[3]=c=>t(d).opening_balance=c),label:"Saldo Buka Sesi",lazyRules:"",disable:t(d).processing,error:!!t(d).errors.opening_balance,errorMessage:t(d).errors.opening_balance,rules:[],readonly:"","hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),p[6]||(p[6]=l("div",{class:"q-my-sm text-red"}," Pastikan saldo awal sesuai dengan jumlah uang di laci! ",-1)),e(le,{modelValue:t(d).opening_notes,"onUpdate:modelValue":p[4]||(p[4]=c=>t(d).opening_notes=c),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:t(d).processing,error:!!t(d).errors.opening_notes,"error-message":t(d).errors.opening_notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{type:"submit",label:"Buka Sesi",icon:"login",color:"primary",disable:t(d).processing},null,8,["disable"]),e(R,{label:"Batal",icon:"cancel",disable:t(d).processing,onClick:p[5]||(p[5]=c=>t(W).get(i.route("admin.cashier-session.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},vs=Object.freeze(Object.defineProperty({__proto__:null,default:bs},Symbol.toStringTag,{value:"Module"}));let _s=0;const ys=["click","keydown"],ws={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${_s++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ks(m,s,d,o){const n=go(wa,dl);if(n===dl)return console.error("QTab/QRouteTab component needs to be child of QTabs"),dl;const{proxy:i}=$t(),p=S(null),f=S(null),u=S(null),c=X(()=>m.disable===!0||m.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},m.ripple===!0?{}:m.ripple)),_=X(()=>n.currentModel.value===m.name),w=X(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(_.value===!0?" q-tab--active"+(n.tabProps.value.activeClass?" "+n.tabProps.value.activeClass:"")+(n.tabProps.value.activeColor?` text-${n.tabProps.value.activeColor}`:"")+(n.tabProps.value.activeBgColor?` bg-${n.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(m.icon&&m.label&&n.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(m.noCaps===!0||n.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(m.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),g=X(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(n.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(m.contentClass!==void 0?` ${m.contentClass}`:"")),x=X(()=>m.disable===!0||n.hasFocus.value===!0||_.value===!1&&n.hasActiveTab.value===!0?-1:m.tabindex||0);function C(O,B){if(B!==!0&&p.value!==null&&p.value.focus(),m.disable!==!0){n.updateModel({name:m.name}),d("click",O);return}}function k(O){bo(O,[13,32])?C(O,!0):vo(O)!==!0&&O.keyCode>=35&&O.keyCode<=40&&O.altKey!==!0&&O.metaKey!==!0&&n.onKbdNavigate(O.keyCode,i.$el)===!0&&Ct(O),d("keydown",O)}function A(){const O=n.tabProps.value.narrowIndicator,B=[],$=fe("div",{ref:u,class:["q-tab__indicator",n.tabProps.value.indicatorClass]});m.icon!==void 0&&B.push(fe(V,{class:"q-tab__icon",name:m.icon})),m.label!==void 0&&B.push(fe("div",{class:"q-tab__label"},m.label)),m.alert!==!1&&B.push(m.alertIcon!==void 0?fe(V,{class:"q-tab__alert-icon",color:m.alert!==!0?m.alert:void 0,name:m.alertIcon}):fe("div",{class:"q-tab__alert"+(m.alert!==!0?` text-${m.alert}`:"")})),O===!0&&B.push($);const q=[fe("div",{class:"q-focus-helper",tabindex:-1,ref:p}),fe("div",{class:g.value},ka(s.default,B))];return O===!1&&q.push($),q}const D={name:X(()=>m.name),rootRef:f,tabIndicatorRef:u,routeData:o};Xt(()=>{n.unregisterTab(D)}),$e(()=>{n.registerTab(D)});function y(O,B){const $={ref:f,class:w.value,tabindex:x.value,role:"tab","aria-selected":_.value===!0?"true":"false","aria-disabled":m.disable===!0?"true":void 0,onClick:C,onKeydown:k,...B};return J(fe(O,$,A()),[[ne,c.value]])}return{renderTab:y,$tabs:n}}const ct=gt({name:"QTab",props:ws,emits:ys,setup(m,{slots:s,emit:d}){const{renderTab:o}=ks(m,s,d);return()=>o("div")}});function hs(m,s,d){const o=d===!0?["left","right"]:["top","bottom"];return`absolute-${s===!0?o[0]:o[1]}${m?` text-${m}`:""}`}const $s=["left","center","right","justify"],ol=gt({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:m=>$s.includes(m)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(m,{slots:s,emit:d}){const{proxy:o}=$t(),{$q:n}=o,{registerTick:i}=ul(),{registerTick:p}=ul(),{registerTick:f}=ul(),{registerTimeout:u,removeTimeout:c}=fl(),{registerTimeout:_,removeTimeout:w}=fl(),g=S(null),x=S(null),C=S(m.modelValue),k=S(!1),A=S(!0),D=S(!1),y=S(!1),O=[],B=S(0),$=S(!1);let q=null,I=null,E;const j=X(()=>({activeClass:m.activeClass,activeColor:m.activeColor,activeBgColor:m.activeBgColor,indicatorClass:hs(m.indicatorColor,m.switchIndicator,m.vertical),narrowIndicator:m.narrowIndicator,inlineLabel:m.inlineLabel,noCaps:m.noCaps})),P=X(()=>{const oe=B.value,me=C.value;for(let ve=0;ve<oe;ve++)if(O[ve].name.value===me)return!0;return!1}),Z=X(()=>`q-tabs__content--align-${k.value===!0?"left":y.value===!0?"justify":m.align}`),de=X(()=>`q-tabs row no-wrap items-center q-tabs--${k.value===!0?"":"not-"}scrollable q-tabs--${m.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${m.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${m.mobileArrows===!0?"":"out"}-arrows`+(m.dense===!0?" q-tabs--dense":"")+(m.shrink===!0?" col-shrink":"")+(m.stretch===!0?" self-stretch":"")),U=X(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Z.value+(m.contentClass!==void 0?` ${m.contentClass}`:"")),z=X(()=>m.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),G=X(()=>m.vertical!==!0&&n.lang.rtl===!0),Ce=X(()=>_o===!1&&G.value===!0);Be(G,bt),Be(()=>m.modelValue,oe=>{ae({name:oe,setCurrent:!0,skipEmit:!0})}),Be(()=>m.outsideArrows,Ve);function ae({name:oe,setCurrent:me,skipEmit:ve}){C.value!==oe&&(ve!==!0&&m["onUpdate:modelValue"]!==void 0&&d("update:modelValue",oe),(me===!0||m["onUpdate:modelValue"]===void 0)&&(rt(C.value,oe),C.value=oe))}function Ve(){i(()=>{ze({width:g.value.offsetWidth,height:g.value.offsetHeight})})}function ze(oe){if(z.value===void 0||x.value===null)return;const me=oe[z.value.container],ve=Math.min(x.value[z.value.scroll],Array.prototype.reduce.call(x.value.children,(Le,Pe)=>Le+(Pe[z.value.content]||0),0)),He=me>0&&ve>me;k.value=He,He===!0&&p(bt),y.value=me<parseInt(m.breakpoint,10)}function rt(oe,me){const ve=oe!=null&&oe!==""?O.find(Le=>Le.name.value===oe):null,He=me!=null&&me!==""?O.find(Le=>Le.name.value===me):null;if(Lt===!0)Lt=!1;else if(ve&&He){const Le=ve.tabIndicatorRef.value,Pe=He.tabIndicatorRef.value;q!==null&&(clearTimeout(q),q=null),Le.style.transition="none",Le.style.transform="none",Pe.style.transition="none",Pe.style.transform="none";const Se=Le.getBoundingClientRect(),et=Pe.getBoundingClientRect();Pe.style.transform=m.vertical===!0?`translate3d(0,${Se.top-et.top}px,0) scale3d(1,${et.height?Se.height/et.height:1},1)`:`translate3d(${Se.left-et.left}px,0,0) scale3d(${et.width?Se.width/et.width:1},1,1)`,f(()=>{q=setTimeout(()=>{q=null,Pe.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Pe.style.transform="none"},70)})}He&&k.value===!0&&nt(He.rootRef.value)}function nt(oe){const{left:me,width:ve,top:He,height:Le}=x.value.getBoundingClientRect(),Pe=oe.getBoundingClientRect();let Se=m.vertical===!0?Pe.top-He:Pe.left-me;if(Se<0){x.value[m.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Se),bt();return}Se+=m.vertical===!0?Pe.height-Le:Pe.width-ve,Se>0&&(x.value[m.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Se),bt())}function bt(){const oe=x.value;if(oe===null)return;const me=oe.getBoundingClientRect(),ve=m.vertical===!0?oe.scrollTop:Math.abs(oe.scrollLeft);G.value===!0?(A.value=Math.ceil(ve+me.width)<oe.scrollWidth-1,D.value=ve>0):(A.value=ve>0,D.value=m.vertical===!0?Math.ceil(ve+me.height)<oe.scrollHeight:Math.ceil(ve+me.width)<oe.scrollWidth)}function ue(oe){I!==null&&clearInterval(I),I=setInterval(()=>{it(oe)===!0&&ye()},5)}function Y(){ue(Ce.value===!0?Number.MAX_SAFE_INTEGER:0)}function xe(){ue(Ce.value===!0?0:Number.MAX_SAFE_INTEGER)}function ye(){I!==null&&(clearInterval(I),I=null)}function pe(oe,me){const ve=Array.prototype.filter.call(x.value.children,et=>et===me||et.matches&&et.matches(".q-tab.q-focusable")===!0),He=ve.length;if(He===0)return;if(oe===36)return nt(ve[0]),ve[0].focus(),!0;if(oe===35)return nt(ve[He-1]),ve[He-1].focus(),!0;const Le=oe===(m.vertical===!0?38:37),Pe=oe===(m.vertical===!0?40:39),Se=Le===!0?-1:Pe===!0?1:void 0;if(Se!==void 0){const et=G.value===!0?-1:1,ut=ve.indexOf(me)+Se*et;return ut>=0&&ut<He&&(nt(ve[ut]),ve[ut].focus({preventScroll:!0})),!0}}const Ze=X(()=>Ce.value===!0?{get:oe=>Math.abs(oe.scrollLeft),set:(oe,me)=>{oe.scrollLeft=-me}}:m.vertical===!0?{get:oe=>oe.scrollTop,set:(oe,me)=>{oe.scrollTop=me}}:{get:oe=>oe.scrollLeft,set:(oe,me)=>{oe.scrollLeft=me}});function it(oe){const me=x.value,{get:ve,set:He}=Ze.value;let Le=!1,Pe=ve(me);const Se=oe<Pe?-1:1;return Pe+=Se*5,Pe<0?(Le=!0,Pe=0):(Se===-1&&Pe<=oe||Se===1&&Pe>=oe)&&(Le=!0,Pe=oe),He(me,Pe),bt(),Le}function dt(oe,me){for(const ve in oe)if(oe[ve]!==me[ve])return!1;return!0}function sl(){let oe=null,me={matchedLen:0,queryDiff:9999,hrefLen:0};const ve=O.filter(Se=>Se.routeData!==void 0&&Se.routeData.hasRouterLink.value===!0),{hash:He,query:Le}=o.$route,Pe=Object.keys(Le).length;for(const Se of ve){const et=Se.routeData.exact.value===!0;if(Se.routeData[et===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:ut,query:rl,matched:po,href:fo}=Se.routeData.resolvedLink.value,il=Object.keys(rl).length;if(et===!0){if(ut!==He||il!==Pe||dt(Le,rl)===!1)continue;oe=Se.name.value;break}if(ut!==""&&ut!==He||il!==0&&dt(rl,Le)===!1)continue;const vt={matchedLen:po.length,queryDiff:Pe-il,hrefLen:fo.length-ut.length};if(vt.matchedLen>me.matchedLen){oe=Se.name.value,me=vt;continue}else if(vt.matchedLen!==me.matchedLen)continue;if(vt.queryDiff<me.queryDiff)oe=Se.name.value,me=vt;else if(vt.queryDiff!==me.queryDiff)continue;vt.hrefLen>me.hrefLen&&(oe=Se.name.value,me=vt)}if(oe===null&&O.some(Se=>Se.routeData===void 0&&Se.name.value===C.value)===!0){Lt=!1;return}ae({name:oe,setCurrent:!0})}function io(oe){if(c(),$.value!==!0&&g.value!==null&&oe.target&&typeof oe.target.closest=="function"){const me=oe.target.closest(".q-tab");me&&g.value.contains(me)===!0&&($.value=!0,k.value===!0&&nt(me))}}function uo(){u(()=>{$.value=!1},30)}function Mt(){$l.avoidRouteWatcher===!1?_(sl):w()}function hl(){if(E===void 0){const oe=Be(()=>o.$route.fullPath,Mt);E=()=>{oe(),E=void 0}}}function mo(oe){O.push(oe),B.value++,Ve(),oe.routeData===void 0||o.$route===void 0?_(()=>{if(k.value===!0){const me=C.value,ve=me!=null&&me!==""?O.find(He=>He.name.value===me):null;ve&&nt(ve.rootRef.value)}}):(hl(),oe.routeData.hasRouterLink.value===!0&&Mt())}function co(oe){O.splice(O.indexOf(oe),1),B.value--,Ve(),E!==void 0&&oe.routeData!==void 0&&(O.every(me=>me.routeData===void 0)===!0&&E(),Mt())}const $l={currentModel:C,tabProps:j,hasFocus:$,hasActiveTab:P,registerTab:mo,unregisterTab:co,verifyRouteModel:Mt,updateModel:ae,onKbdNavigate:pe,avoidRouteWatcher:!1};ho(wa,$l);function xl(){q!==null&&clearTimeout(q),ye(),E!==void 0&&E()}let Sl,Lt;return Xt(xl),yo(()=>{Sl=E!==void 0,xl()}),wo(()=>{Sl===!0&&(hl(),Lt=!0,Mt()),Ve()}),()=>fe("div",{ref:g,class:de.value,role:"tablist",onFocusin:io,onFocusout:uo},[fe(ko,{onResize:ze}),fe("div",{ref:x,class:U.value,onScroll:bt},wt(s.default)),fe(V,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(A.value===!0?"":" q-tabs__arrow--faded"),name:m.leftIcon||n.iconSet.tabs[m.vertical===!0?"up":"left"],onMousedownPassive:Y,onTouchstartPassive:Y,onMouseupPassive:ye,onMouseleavePassive:ye,onTouchendPassive:ye}),fe(V,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(D.value===!0?"":" q-tabs__arrow--faded"),name:m.rightIcon||n.iconSet.tabs[m.vertical===!0?"down":"right"],onMousedownPassive:xe,onTouchstartPassive:xe,onMouseupPassive:ye,onMouseleavePassive:ye,onTouchendPassive:ye})])}});function xs(m){const s=[.06,6,50];return typeof m=="string"&&m.length&&m.split(":").forEach((d,o)=>{const n=parseFloat(d);n&&(s[o]=n)}),s}const Ss=$o({name:"touch-swipe",beforeMount(m,{value:s,arg:d,modifiers:o}){if(o.mouse!==!0&&Dt.has.touch!==!0)return;const n=o.mouseCapture===!0?"Capture":"",i={handler:s,sensitivity:xs(d),direction:Vl(o),noop:xo,mouseStart(p){Cl(p,i)&&Vo(p)&&(Yt(i,"temp",[[document,"mousemove","move",`notPassive${n}`],[document,"mouseup","end","notPassiveCapture"]]),i.start(p,!0))},touchStart(p){if(Cl(p,i)){const f=p.target;Yt(i,"temp",[[f,"touchmove","move","notPassiveCapture"],[f,"touchcancel","end","notPassiveCapture"],[f,"touchend","end","notPassiveCapture"]]),i.start(p)}},start(p,f){Dt.is.firefox===!0&&cl(m,!0);const u=ql(p);i.event={x:u.left,y:u.top,time:Date.now(),mouse:f===!0,dir:!1}},move(p){if(i.event===void 0)return;if(i.event.dir!==!1){Ct(p);return}const f=Date.now()-i.event.time;if(f===0)return;const u=ql(p),c=u.left-i.event.x,_=Math.abs(c),w=u.top-i.event.y,g=Math.abs(w);if(i.event.mouse!==!0){if(_<i.sensitivity[1]&&g<i.sensitivity[1]){i.end(p);return}}else if(window.getSelection().toString()!==""){i.end(p);return}else if(_<i.sensitivity[2]&&g<i.sensitivity[2])return;const x=_/f,C=g/f;i.direction.vertical===!0&&_<g&&_<100&&C>i.sensitivity[0]&&(i.event.dir=w<0?"up":"down"),i.direction.horizontal===!0&&_>g&&g<100&&x>i.sensitivity[0]&&(i.event.dir=c<0?"left":"right"),i.direction.up===!0&&_<g&&w<0&&_<100&&C>i.sensitivity[0]&&(i.event.dir="up"),i.direction.down===!0&&_<g&&w>0&&_<100&&C>i.sensitivity[0]&&(i.event.dir="down"),i.direction.left===!0&&_>g&&c<0&&g<100&&x>i.sensitivity[0]&&(i.event.dir="left"),i.direction.right===!0&&_>g&&c>0&&g<100&&x>i.sensitivity[0]&&(i.event.dir="right"),i.event.dir!==!1?(Ct(p),i.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),So(),i.styleCleanup=k=>{i.styleCleanup=void 0,document.body.classList.remove("non-selectable");const A=()=>{document.body.classList.remove("no-pointer-events--children")};k===!0?setTimeout(A,50):A()}),i.handler({evt:p,touch:i.event.mouse!==!0,mouse:i.event.mouse,direction:i.event.dir,duration:f,distance:{x:_,y:g}})):i.end(p)},end(p){i.event!==void 0&&(ml(i,"temp"),Dt.is.firefox===!0&&cl(m,!1),i.styleCleanup!==void 0&&i.styleCleanup(!0),p!==void 0&&i.event.dir!==!1&&Ct(p),i.event=void 0)}};if(m.__qtouchswipe=i,o.mouse===!0){const p=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";Yt(i,"main",[[m,"mousedown","mouseStart",`passive${p}`]])}Dt.has.touch===!0&&Yt(i,"main",[[m,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[m,"touchmove","noop","notPassiveCapture"]])},updated(m,s){const d=m.__qtouchswipe;d!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&d.end(),d.handler=s.value),d.direction=Vl(s.modifiers))},beforeUnmount(m){const s=m.__qtouchswipe;s!==void 0&&(ml(s,"main"),ml(s,"temp"),Dt.is.firefox===!0&&cl(m,!1),s.styleCleanup!==void 0&&s.styleCleanup(),delete m.__qtouchswipe)}}),Vs={name:{required:!0},disable:Boolean},Al={setup(m,{slots:s}){return()=>fe("div",{class:"q-panel scroll",role:"tabpanel"},wt(s.default))}},qs={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Cs=["update:modelValue","beforeTransition","transition"];function Ts(){const{props:m,emit:s,proxy:d}=$t(),{getCache:o}=Co(),{registerTimeout:n}=fl();let i,p;const f=S(null),u=S(null);function c(z){const G=m.vertical===!0?"up":"left";E((d.$q.lang.rtl===!0?-1:1)*(z.direction===G?1:-1))}const _=X(()=>[[Ss,c,void 0,{horizontal:m.vertical!==!0,vertical:m.vertical,mouse:!0}]]),w=X(()=>m.transitionPrev||`slide-${m.vertical===!0?"down":"right"}`),g=X(()=>m.transitionNext||`slide-${m.vertical===!0?"up":"left"}`),x=X(()=>`--q-transition-duration: ${m.transitionDuration}ms`),C=X(()=>typeof m.modelValue=="string"||typeof m.modelValue=="number"?m.modelValue:String(m.modelValue)),k=X(()=>({include:m.keepAliveInclude,exclude:m.keepAliveExclude,max:m.keepAliveMax})),A=X(()=>m.keepAliveInclude!==void 0||m.keepAliveExclude!==void 0);Be(()=>m.modelValue,(z,G)=>{const Ce=B(z)===!0?$(z):-1;p!==!0&&I(Ce===-1?0:Ce<$(G)?-1:1),f.value!==Ce&&(f.value=Ce,s("beforeTransition",z,G),n(()=>{s("transition",z,G)},m.transitionDuration))});function D(){E(1)}function y(){E(-1)}function O(z){s("update:modelValue",z)}function B(z){return z!=null&&z!==""}function $(z){return i.findIndex(G=>G.props.name===z&&G.props.disable!==""&&G.props.disable!==!0)}function q(){return i.filter(z=>z.props.disable!==""&&z.props.disable!==!0)}function I(z){const G=z!==0&&m.animated===!0&&f.value!==-1?"q-transition--"+(z===-1?w.value:g.value):null;u.value!==G&&(u.value=G)}function E(z,G=f.value){let Ce=G+z;for(;Ce!==-1&&Ce<i.length;){const ae=i[Ce];if(ae!==void 0&&ae.props.disable!==""&&ae.props.disable!==!0){I(z),p=!0,s("update:modelValue",ae.props.name),setTimeout(()=>{p=!1});return}Ce+=z}m.infinite===!0&&i.length!==0&&G!==-1&&G!==i.length&&E(z,z===-1?i.length:-1)}function j(){const z=$(m.modelValue);return f.value!==z&&(f.value=z),!0}function P(){const z=B(m.modelValue)===!0&&j()&&i[f.value];return m.keepAlive===!0?[fe(To,k.value,[fe(A.value===!0?o(C.value,()=>({...Al,name:C.value})):Al,{key:C.value,style:x.value},()=>z)])]:[fe("div",{class:"q-panel scroll",style:x.value,key:C.value,role:"tabpanel"},[z])]}function Z(){if(i.length!==0)return m.animated===!0?[fe(ha,{name:u.value},P)]:P()}function de(z){return i=qo(wt(z.default,[])).filter(G=>G.props!==null&&G.props.slot===void 0&&B(G.props.name)===!0),i.length}function U(){return i}return Object.assign(d,{next:D,previous:y,goTo:O}),{panelIndex:f,panelDirectives:_,updatePanelsList:de,updatePanelIndex:j,getPanelContent:Z,getEnabledPanels:q,getPanels:U,isValidPanelName:B,keepAliveProps:k,needsUniqueKeepAliveWrapper:A,goToPanelByOffset:E,goToPanel:O,nextPanel:D,previousPanel:y}}const pt=gt({name:"QTabPanel",props:Vs,setup(m,{slots:s}){return()=>fe("div",{class:"q-tab-panel",role:"tabpanel"},wt(s.default))}}),nl=gt({name:"QTabPanels",props:{...qs,...vl},emits:Cs,setup(m,{slots:s}){const d=$t(),o=_l(m,d.proxy.$q),{updatePanelsList:n,getPanelContent:i,panelDirectives:p}=Ts(),f=X(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(n(s),Po("div",{class:f.value},i(),"pan",m.swipeable,()=>p.value))}}),Ps={class:"detail"},Is={colspan:"3"},Os={class:"text-bold text-grey-8"},Ds={key:0},Rs={colspan:"100%"},Us={key:1},Ms={colspan:"100%"},Pa={__name:"MainInfoTab",setup(m){const s=ce();return(d,o)=>(v(),h("table",Ps,[l("tbody",null,[l("tr",null,[l("td",Is,[l("div",Os,[o[1]||(o[1]=b(" Info Terminal Kasir ")),e(R,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=n=>d.$inertia.get(d.route("admin.cashier-terminal.edit",{id:t(s).props.data.id})))})])])]),l("tr",null,[o[2]||(o[2]=l("td",{style:{width:"120px"}},"Nama",-1)),o[3]||(o[3]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.name),1)]),l("tr",null,[o[4]||(o[4]=l("td",null,"Lokasi",-1)),o[5]||(o[5]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.location),1)]),l("tr",null,[o[6]||(o[6]=l("td",null,"Akun Keuangan",-1)),o[7]||(o[7]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.finance_account.name),1)]),l("tr",null,[o[8]||(o[8]=l("td",null,"Saldo",-1)),o[9]||(o[9]=l("td",null,":",-1)),l("td",null,r(t(tt)(t(s).props.data.finance_account.balance)),1)]),l("tr",null,[o[10]||(o[10]=l("td",null,"Catatan",-1)),o[11]||(o[11]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.notes),1)]),l("tr",null,[o[12]||(o[12]=l("td",null,"Status",-1)),o[13]||(o[13]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[14]||(o[14]=l("tr",null,[l("td",{colspan:"3"},[l("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Rekaman")])],-1)),t(s).props.data.created_at?(v(),h("tr",Ds,[l("td",Rs," Dibuat "+r(t(yt)(t(s).props.data.created_at))+" oleh "+r(t(s).props.data.creator.name)+" ("+r(t(be)(t(s).props.data.created_at))+") ",1)])):T("",!0),t(s).props.data.updated_at?(v(),h("tr",Us,[l("td",Ms," Diperbarui "+r(t(yt)(t(s).props.data.updated_at))+" oleh "+r(t(s).props.data.updater.name)+" ("+r(t(be)(t(s).props.data.updated_at))+") ",1)])):T("",!0)])]))}},As=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"})),Es={class:"full-width row flex-center text-grey-8 q-gutter-sm"},js={class:"text-bold"},Ia={__name:"SessionHistoryTab",setup(m){const s=ce(),d=S([]),o=S(!0),n=Ie({customer_id:s.props.data.id,...Ue()}),i=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),p=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];$e(()=>{f()});const f=(_=null)=>Me({pagination:i,filter:n,props:_,rows:d,url:route("admin.customer-wallet-transaction.data"),loading:o}),u=he(),c=X(()=>u.screen.gt.sm?p:p.filter(_=>_.name==="id"));return(_,w)=>(v(),N(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:i.value,"onUpdate:pagination":w[0]||(w[0]=g=>i.value=g),filter:n.search,loading:o.value,columns:c.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:g,message:x,filter:C})=>[l("div",Es,[l("span",null,r(x)+" "+r(C?" with term "+C:""),1)])]),body:a(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:Q(x=>t(W).get(_.route("admin.customer-wallet-transaction.detail",{id:g.row.id})),["stop"])},{default:a(()=>[e(F,{key:"id",props:g},{default:a(()=>[l("div",js,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(g.row.formatted_id),1)]),l("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(t(be)(g.row.datetime)),1)]),t(u).screen.lt.md?(v(),h(L,{key:0},[l("div",{class:_e(["text-bold",g.row.amount<0?"text-red":"text-green"])},[e(V,{name:"money",class:"inline-icon"}),b(" "+r(t($a)(g.row.amount)),1)],2),l("div",null,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):T("",!0),l("div",null,[e(st,{size:"xs",color:g.row.amount>0?"green":"red"},{default:a(()=>[e(V,{name:"category"}),b(" "+r(g.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(F,{key:"notes",props:g,class:"wrap-column"},{default:a(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(F,{key:"amount",props:g},{default:a(()=>[l("div",{class:_e(g.row.amount<0?"text-red-10":g.row.amount>0?"text-green-10":"")},r(t(Zt)(g.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},Ns=Object.freeze(Object.defineProperty({__proto__:null,default:Ia},Symbol.toStringTag,{value:"Module"})),Bs={class:"q-gutter-sm"},Fs={class:"col col-lg-6 q-pa-xs"},zs={class:"row"},El="Rincian Terminal Kasir",Hs={__name:"Detail",setup(m){const s=S("main");return(d,o)=>{const n=H("i-head"),i=H("authenticated-layout");return v(),h(L,null,[e(n,{title:El}),e(i,null,{title:a(()=>[b(r(El))]),"left-button":a(()=>[l("div",Bs,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=p=>d.$inertia.get(d.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Fs,[l("div",zs,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ol,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=p=>s.value=p),align:"left"},{default:a(()=>[e(ct,{name:"main",label:"Info Utama"}),e(ct,{name:"session-history",label:"Riwayat Sesi Kasir"})]),_:1},8,["modelValue"]),e(nl,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=p=>s.value=p)},{default:a(()=>[e(pt,{name:"main"},{default:a(()=>[e(Pa)]),_:1}),e(pt,{name:"session-history",class:"q-pa-xs"},{default:a(()=>[e(Ia)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Ls=Object.freeze(Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"})),Ys={class:"q-gutter-sm"},Ks={class:"col col-md-6 q-pa-xs"},Qs={key:0,class:"q-my-xs text-grey-8"},Ws={__name:"Editor",setup(m){const s=ce(),d=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Oe({id:s.props.data.id,name:s.props.data.name,finance_account_id:s.props.data.finance_account_id??"new",location:s.props.data.location,active:!!s.props.data.active,notes:s.props.data.notes}),n=[{value:"new",label:"Buat Baru (Otomatis)"},...s.props.finance_accounts.map(p=>({value:p.id,label:p.name}))],i=()=>Fe({form:o,url:route("admin.cashier-terminal.save")});return(p,f)=>{const u=H("i-head"),c=H("authenticated-layout");return v(),h(L,null,[e(u,{title:d}),e(c,null,{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",Ys,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=_=>p.$inertia.get(p.route("admin.cashier-terminal.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Ks,[e(Re,{class:"row",onSubmit:Q(i,["prevent"]),onValidationError:t(De)},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=_=>t(o).id=_)},null,512),[[Xe,t(o).id]]),e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(le,{modelValue:t(o).name,"onUpdate:modelValue":f[2]||(f[2]=_=>t(o).name=_),modelModifiers:{trim:!0},label:"Nama",error:!!t(o).errors.name,disable:t(o).processing,"error-message":t(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{class:"custom-select",modelValue:t(o).finance_account_id,"onUpdate:modelValue":f[3]||(f[3]=_=>t(o).finance_account_id=_),label:"Akun Kas",options:n,"map-options":"","emit-value":"",errorMessage:t(o).errors.finance_account_id,error:!!t(o).errors.finance_account_id,disable:t(o).processing,"hide-bottom-space":""},null,8,["modelValue","errorMessage","error","disable"]),t(o).finance_account_id==="new"?(v(),h("div",Qs,[f[8]||(f[8]=b(" Akun keuangan akan dibuat ")),t(o).name?(v(),h(L,{key:0},[b(" dengan nama Kas "+r(t(o).name),1)],64)):T("",!0)])):T("",!0),e(le,{modelValue:t(o).location,"onUpdate:modelValue":f[4]||(f[4]=_=>t(o).location=_),modelModifiers:{trim:!0},label:"Lokasi",error:!!t(o).errors.location,disable:t(o).processing,"error-message":t(o).errors.location,rules:[],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(le,{modelValue:t(o).notes,"onUpdate:modelValue":f[5]||(f[5]=_=>t(o).notes=_),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Catatan",disable:t(o).processing,error:!!t(o).errors.notes,"error-message":t(o).errors.notes,rules:[],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(al,{modelValue:t(o).active,"onUpdate:modelValue":f[6]||(f[6]=_=>t(o).active=_),label:"Aktif",disable:t(o).processing},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:t(o).processing},null,8,["disable"]),e(R,{label:"Batal",icon:"cancel",disable:t(o).processing,onClick:f[7]||(f[7]=_=>t(W).get(p.route("admin.cashier-terminal.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Js=Object.freeze(Object.defineProperty({__proto__:null,default:Ws},Symbol.toStringTag,{value:"Module"})),Gs={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Xs={class:"q-pa-xs"},Zs={class:"full-width row flex-center text-grey-8 q-gutter-sm"},er={class:"flex justify-end"},jl="Terminal Kasir",tr={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=Ie({search:"",status:"active",...Ue()}),c=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"name",label:s.screen.lt.md?"Item":"Nama",field:"name",align:"left",sortable:!0},{name:"finance_account_id",label:"Akun Kas",field:"finance_account_id",sortable:!1,align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}],w=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];$e(()=>{x()});const g=D=>Ge({message:`Hapus Terminal Kasir ${D.name}?`,url:route("admin.cashier-terminal.delete",D.id),fetchItemsCallback:x,loading:n}),x=(D=null)=>{Me({pagination:c,filter:u,props:D,rows:o,url:route("admin.cashier-terminal.data"),loading:n,tableRef:i})},C=()=>x(),k=D=>W.get(route("admin.cashier-terminal.detail",{id:D.id})),A=X(()=>s.screen.gt.sm?_:_.filter(D=>D.name==="name"||D.name==="finance_account_id"||D.name==="action"));return(D,y)=>{const O=H("i-head"),B=H("authenticated-layout");return v(),h(L,null,[e(O,{title:jl}),e(B,null,Ye({title:a(()=>[b(r(jl))]),"right-button":a(()=>[e(R,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:y[0]||(y[0]=$=>d.value=!d.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:y[1]||(y[1]=$=>t(W).get(D.route("admin.cashier-terminal.add")))})]),default:a(()=>[l("div",Xs,[e(Te,{class:"full-height-table",style:Ae({height:t(f)}),ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":y[5]||(y[5]=$=>c.value=$),filter:u.search,loading:n.value,columns:A.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:q,filter:I})=>[l("div",Zs,[l("span",null,r(q)+" "+r(I?" with term "+I:""),1)])]),body:a($=>[e(qe,{props:$,class:_e([$.row.active?"":"bg-red-1","cursor-pointer"]),onClick:q=>k($.row)},{default:a(()=>[e(F,{key:"name",props:$,class:"wrap-column"},{default:a(()=>[l("div",null,[e(V,{name:"wallet"}),b(" "+r($.row.name),1)]),l("div",null,[e(V,{name:"home_pin"}),b(" "+r($.row.location),1)]),t(s).screen.lt.md?(v(),N(we,{key:0,text:$.row.notes,icon:"notes"},null,8,["text"])):T("",!0)]),_:2},1032,["props"]),e(F,{key:"finance_account_id",props:$},{default:a(()=>[l("div",null,[e(V,{name:"wallet"}),b(" "+r($.row.finance_account.name),1)]),l("div",null,[e(V,{name:"money"}),b(" "+r(t(tt)($.row.finance_account.balance)),1)])]),_:2},1032,["props"]),e(F,{key:"notes",props:$},{default:a(()=>[e(we,{text:$.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(F,{key:"action",props:$},{default:a(()=>[l("div",er,[e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:y[4]||(y[4]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",onClick:Q(q=>t(W).get(D.route("admin.cashier-terminal.edit",$.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,{icon:"edit"},{default:a(()=>y[6]||(y[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{onClick:Q(q=>g($.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>y[7]||(y[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",Gs,[e(se,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[y[2]||(y[2]=$=>u.status=$),C],options:w,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":y[3]||(y[3]=$=>u.search=$),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},lr=Object.freeze(Object.defineProperty({__proto__:null,default:tr},Symbol.toStringTag,{value:"Module"})),Oa={__name:"CompanyInfoForm",setup(m){const s=S(),d=ce(),o=Oe({name:d.props.data.name,phone:d.props.data.phone,address:d.props.data.address}),n=()=>Fe({form:o,url:route("admin.company-profile.update")});return(i,p)=>(v(),N(Re,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{flat:"",bordered:"",square:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[p[3]||(p[3]=l("div",{class:"text-subtitle1 q-my-xs"},"Profil Perusahaan",-1)),p[4]||(p[4]=l("p",{class:"text-caption text-grey-9"},"Perbarui profil perusahaan.",-1)),e(le,{ref_key:"nameInputRef",ref:s,modelValue:t(o).name,"onUpdate:modelValue":p[0]||(p[0]=f=>t(o).name=f),modelModifiers:{trim:!0},label:"Nama Perusahaan",disable:t(o).processing,"lazy-rules":"",error:!!t(o).errors.name,"error-message":t(o).errors.name,rules:[f=>f&&f.length>0||"Nama perusahaan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(le,{modelValue:t(o).phone,"onUpdate:modelValue":p[1]||(p[1]=f=>t(o).phone=f),modelModifiers:{trim:!0},label:"No Telepon",disable:t(o).processing,"lazy-rules":"",error:!!t(o).errors.phone,"error-message":t(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(le,{type:"textarea",counter:"",autogrow:"",maxlength:"200",modelValue:t(o).address,"onUpdate:modelValue":p[2]||(p[2]=f=>t(o).address=f),modelModifiers:{trim:!0},label:"Alamat",disable:t(o).processing,"lazy-rules":"",error:!!t(o).errors.address,"error-message":t(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,null,{default:a(()=>[e(R,{icon:"save",type:"submit",color:"primary",label:"Simpan",disable:t(o).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},ar=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"})),or={class:"q-pa-xs"},nr={class:"row justify-center"},sr={class:"col col-md-6"},Nl="Profil Perusahaan",rr={__name:"Edit",setup(m){return(s,d)=>{const o=H("i-head"),n=H("authenticated-layout");return v(),h(L,null,[e(o,{title:Nl}),e(n,null,{title:a(()=>[b(r(Nl))]),default:a(()=>[l("div",or,[l("div",nr,[l("div",sr,[e(Oa)])])])]),_:1})],64)}}},ir=Object.freeze(Object.defineProperty({__proto__:null,default:rr},Symbol.toStringTag,{value:"Module"})),dr={class:"q-gutter-sm"},ur={class:"col col-md-6 q-pa-xs"},mr={class:"row"},cr={class:"detail"},pr={key:0},fr={key:1},gr={key:0},br={key:1},vr={colspan:"3",class:"bg-white"},Bl="Rincian Konfirmasi Top Up",_r={__name:"Detail",setup(m){const s=ce();return(d,o)=>{const n=H("i-head"),i=H("my-link"),p=H("authenticated-layout");return v(),h(L,null,[e(n,{title:Bl}),e(p,{"show-drawer-button":!1},{"left-button":a(()=>[l("div",dr,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=f=>d.$inertia.get(d.route("admin.customer-wallet-transaction-confirmation.index")))})])]),title:a(()=>[l("span",{class:"text-subtitle2"},r(Bl))]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",ur,[l("div",mr,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[22]||(o[22]=l("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Konfirmasi ",-1)),l("table",cr,[l("tbody",null,[l("tr",null,[o[1]||(o[1]=l("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.formatted_id),1)]),l("tr",null,[o[3]||(o[3]=l("td",null,"Waktu",-1)),o[4]||(o[4]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.datetime)),1)]),l("tr",null,[o[5]||(o[5]=l("td",null,"Pelanggan",-1)),o[6]||(o[6]=l("td",null,":",-1)),l("td",null,[l("div",null,[e(V,{name:"person",class:"inline-icon"}),e(i,{href:d.route("admin.customer.detail",{id:t(s).props.data.customer.id})},{default:a(()=>[b(" "+r(t(s).props.data.customer.username),1)]),_:1},8,["href"])]),l("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(t(s).props.data.customer.name),1)]),t(s).props.data.customer.phone?(v(),h("div",pr,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(t(s).props.data.customer.phone),1)])):T("",!0),t(s).props.data.customer.address?(v(),h("div",fr,[e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(t(s).props.data.customer.address),1)])):T("",!0)])]),l("tr",null,[o[9]||(o[9]=l("td",null,"Akun Tujuan",-1)),o[10]||(o[10]=l("td",null,":",-1)),l("td",null,[e(i,{href:d.route("admin.finance-account.detail",{id:t(s).props.data.finance_account.id})},{default:a(()=>[b(r(t(s).props.data.finance_account.name),1)]),_:1},8,["href"]),o[8]||(o[8]=l("br",null,null,-1)),t(s).props.data.finance_account.type==="bank"?(v(),h(L,{key:0},[b(" Rek "+r(t(s).props.data.finance_account.bank)+" an "+r(t(s).props.data.finance_account.holder)+" ",1),o[7]||(o[7]=l("br",null,null,-1)),b(" "+r(t(s).props.data.finance_account.number),1)],64)):T("",!0)])]),l("tr",null,[o[11]||(o[11]=l("td",null,"Jumlah",-1)),o[12]||(o[12]=l("td",null,":",-1)),l("td",null,"Rp. "+r(t(K)(t(s).props.data.amount)),1)]),l("tr",null,[o[13]||(o[13]=l("td",null,"Status",-1)),o[14]||(o[14]=l("td",null,":",-1)),l("td",null,r(d.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES[t(s).props.data.status]),1)]),l("tr",null,[o[15]||(o[15]=l("td",null,"Catatan",-1)),o[16]||(o[16]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.notes),1)]),t(s).props.data.creator?(v(),h("tr",gr,[o[17]||(o[17]=l("td",null,"Dibuat",-1)),o[18]||(o[18]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.created_at))+" oleh "+r(t(s).props.data.creator.name),1)])):T("",!0),t(s).props.data.updater?(v(),h("tr",br,[o[19]||(o[19]=l("td",null,"Diperbarui",-1)),o[20]||(o[20]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.updated_at))+" oleh "+r(t(s).props.data.updater.name),1)])):T("",!0),t(s).props.data.image_path?(v(),h(L,{key:2},[o[21]||(o[21]=l("tr",null,[l("td",null,"Lampiran"),l("td",null,":"),l("td")],-1)),l("tr",null,[l("td",vr,[e(el,{src:`/${t(s).props.data.image_path}`,class:"q-mt-none",style:Ae([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):T("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},yr=Object.freeze(Object.defineProperty({__proto__:null,default:_r},Symbol.toStringTag,{value:"Module"})),wr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},kr={class:"q-pa-xs"},hr={class:"flex justify-end no-wrap"},Fl="Konfirmasi Top Up Wallet",$r={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=S(null),c=S(!1),_=Bt(),w=Ft(),g=[{label:"Semua Tahun",value:"all"},...Pt(_-2,_).reverse()],x=[{value:"all",label:"Semua Bulan"},...It()],C=[{value:"all",label:"Semua Status"},...We(window.CONSTANTS.CUSTOMER_WALLET_TRANSACTION_CONFIRMATION_STATUSES)],k=Ie({search:"",year:_,month:w,status:"all",...Ue()}),A=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!1}),D=[{name:"datetime",label:"Tanggal",field:"datetime",align:"left",sortable:!0},{name:"finance_account_id",label:"Bank Tujuan",field:"finance_account_id",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"status",label:"Status",field:"status",align:"center"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",label:"Aksi",field:"action",align:"center"}];$e(()=>{y()});const y=(j=null)=>{Me({pagination:A,filter:k,props:j,rows:o,url:route("admin.customer-wallet-transaction-confirmation.data"),loading:n,tableRef:i})},O=()=>{y()},B=X(()=>s.screen.gt.sm?D:D.filter(j=>["datetime","action"].includes(j.name)));Be(()=>k.year,j=>{j===null&&(k.month=null)});const $=j=>Pl({message:`Setujui konfirmasi transaksi #${j.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",j.id),fetchItemsCallback:y,loading:n,data:{id:j.id,action:"accept"}}),q=j=>Pl({message:`Tolak konfirmasi transaksi #${j.id}?`,url:route("admin.customer-wallet-transaction-confirmation.save",j.id),fetchItemsCallback:y,loading:n,data:{id:j.id,action:"reject"}}),I=j=>Ge({message:`Hapus konfirmasi transaksi ${j.formatted_id}?`,url:route("admin.customer-wallet-transaction-confirmation.delete",j.id),fetchItemsCallback:y,loading:n}),E=j=>{u.value=j,c.value=!0};return(j,P)=>{const Z=H("i-head"),de=H("authenticated-layout");return v(),h(L,null,[e(Z,{title:Fl}),e(de,null,Ye({title:a(()=>[b(r(Fl))]),"right-button":a(()=>[e(R,{class:"q-ml-sm",icon:d.value?"filter_alt_off":"filter_alt",color:"grey",flat:"",rounded:"",dense:"",onClick:P[0]||(P[0]=U=>d.value=!d.value)},null,8,["icon"])]),default:a(()=>[l("div",kr,[e(Te,{ref_key:"tableRef",ref:i,class:"full-height-table",style:Ae({height:t(f)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:A.value,"onUpdate:pagination":P[6]||(P[6]=U=>A.value=U),filter:k.search,loading:n.value,columns:B.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:y,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),body:a(U=>[e(qe,{props:U,class:"cursor-pointer",onClick:Q(z=>t(W).get(j.route("admin.customer-wallet-transaction-confirmation.detail",{id:U.row.id})),["stop"])},{default:a(()=>[e(F,{key:"datetime",props:U,class:"wrap-column"},{default:a(()=>[l("div",null,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(U.row.formatted_id),1)]),l("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(t(be)(U.row.datetime)),1)]),t(s).screen.gt.sm?T("",!0):(v(),h(L,{key:0},[e(we,{icon:"account_balance",text:U.row.finance_account.name},null,8,["text"]),l("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(U.row.customer.username)+" - "+r(U.row.customer.name),1)]),l("div",null,[e(V,{name:"money",class:"inline-icon"}),b(" Rp. "+r(t(K)(U.row.amount)),1)]),U.row.notes?(v(),N(we,{key:0,icon:"notes",text:U.row.notes},null,8,["text"])):T("",!0),l("div",null,[e(Tl,{status:U.row.status},null,8,["status"])])],64))]),_:2},1032,["props"]),e(F,{key:"finance_account_id",props:U},{default:a(()=>[b(r(U.row.finance_account.name),1),P[8]||(P[8]=l("br",null,null,-1)),b(" "+r(U.row.finance_account.bank)+" "+r(U.row.finance_account.number)+" an. "+r(U.row.finance_account.holder),1)]),_:2},1032,["props"]),e(F,{key:"amount",props:U,style:{"text-align":"right"}},{default:a(()=>[b(r(t(K)(U.row.amount)),1)]),_:2},1032,["props"]),e(F,{key:"status",props:U,class:"text-center"},{default:a(()=>[e(Tl,{status:U.row.status},null,8,["status"])]),_:2},1032,["props"]),e(F,{key:"notes",props:U,class:"word-wrap"},{default:a(()=>[e(we,{icon:"notes",text:U.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(F,{key:"action",props:U,class:"text-center"},{default:a(()=>[l("div",hr,[e(R,{icon:"image",color:"primary",dense:"",flat:"",disable:U.row.image_path===null||U.row.image_path==="",onClick:Q(z=>E(U.row.image_path),["stop"])},{default:a(()=>[U.row.image_path!=null?(v(),N(zt,{key:0},{default:a(()=>P[9]||(P[9]=[b(" Lihat Bukti ")])),_:1})):T("",!0)]),_:2},1032,["disable","onClick"]),e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[5]||(P[5]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{onClick:Q(z=>$(U.row),["stop"]),clickable:"",disable:U.row.status!=="pending"},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"check"})]),_:1}),e(M,null,{default:a(()=>P[10]||(P[10]=[b("Setujui")])),_:1})]),_:2},1032,["onClick","disable"])),[[ne],[re]]),J((v(),N(ee,{onClick:Q(z=>q(U.row),["stop"]),clickable:"",disable:U.row.status!=="pending"},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"cancel"})]),_:1}),e(M,null,{default:a(()=>P[11]||(P[11]=[b("Tolak")])),_:1})]),_:2},1032,["onClick","disable"])),[[ne],[re]]),e(ot),J((v(),N(ee,{onClick:Q(z=>I(U.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>P[12]||(P[12]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]),e(tl,{modelValue:c.value,"onUpdate:modelValue":P[7]||(P[7]=U=>c.value=U),imageUrl:`/${u.value}`},null,8,["modelValue","imageUrl"])])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",wr,[e(se,{modelValue:k.year,"onUpdate:modelValue":[P[1]||(P[1]=U=>k.year=U),O],options:g,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k.year!=="all"?(v(),N(se,{key:0,modelValue:k.month,"onUpdate:modelValue":[P[2]||(P[2]=U=>k.month=U),O],options:x,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:k.year===null},null,8,["modelValue","disable"])):T("",!0),e(se,{modelValue:k.status,"onUpdate:modelValue":[P[3]||(P[3]=U=>k.status=U),O],options:C,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:k.search,"onUpdate:modelValue":P[4]||(P[4]=U=>k.search=U),placeholder:"Cari...",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},xr=Object.freeze(Object.defineProperty({__proto__:null,default:$r},Symbol.toStringTag,{value:"Module"}));function Da(m,s=!1){const d=m.map(p=>({value:p.id,label:p.username+" - "+p.name})),o=s?[{value:"all",label:"Semua"},...d]:d,n=S([...o]);return{filteredCustomers:n,filterCustomersFn:(p,f)=>{f(()=>{n.value=o.filter(u=>u.label.toLowerCase().includes(p.toLowerCase()))})},customers:o}}const Sr={class:"col col-md-6 q-pa-xs"},zl="Penyesuaian Saldo Dompet Pelanggan",Vr={__name:"Adjustment",setup(m){const s=ce(),{filteredCustomers:d,filterCustomersFn:o}=Da(s.props.customers,!1),n=Oe({customer_id:null,old_balance:0,new_balance:0,notes:""}),i=()=>n.amount=n.new_balance-n.old_balance;Be(()=>n.customer_id,async u=>{if(!u){n.old_balance=0,n.new_balance=0,i();return}n.processing=!0;try{const c=await axios.get(route("admin.customer.balance",{id:u}));n.new_balance=n.old_balance=c.data.balance}catch(c){console.error("Gagal mengambil saldo:",c),n.old_balance=0,n.new_balance=0}n.processing=!1,i()});const p=X(()=>n.new_balance-n.old_balance),f=()=>Fe({form:n,url:route("admin.customer-wallet-transaction.adjustment")});return(u,c)=>{const _=H("i-head"),w=H("authenticated-layout");return v(),h(L,null,[e(_,{title:zl}),e(w,null,{title:a(()=>[b(r(zl))]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Sr,[e(Re,{class:"row",onSubmit:Q(f,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(se,{class:"custom-select",modelValue:t(n).customer_id,"onUpdate:modelValue":c[0]||(c[0]=g=>t(n).customer_id=g),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:t(d),"map-options":"","emit-value":"",errorMessage:t(n).errors.customer_id,onFilter:t(o),error:!!t(n).errors.customer_id,disable:t(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ee,null,{default:a(()=>[e(M,null,{default:a(()=>c[6]||(c[6]=[b("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(Ne,{modelValue:t(n).old_balance,"onUpdate:modelValue":c[1]||(c[1]=g=>t(n).old_balance=g),label:"Saldo Tercatat",readonly:"",lazyRules:"",disable:t(n).processing,error:!!t(n).errors.balance,errorMessage:t(n).errors.balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ne,{modelValue:t(n).new_balance,"onUpdate:modelValue":c[2]||(c[2]=g=>t(n).new_balance=g),label:"Saldo Seharusnya",lazyRules:"",disable:t(n).processing,error:!!t(n).errors.new_balance,errorMessage:t(n).errors.new_balance},null,8,["modelValue","disable","error","errorMessage"]),e(Ne,{modelValue:p.value,"onUpdate:modelValue":c[3]||(c[3]=g=>p.value=g),label:"Selisih",readonly:"",lazyRules:"",disable:t(n).processing},null,8,["modelValue","disable"]),e(le,{modelValue:t(n).notes,"onUpdate:modelValue":c[4]||(c[4]=g=>t(n).notes=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:t(n).processing,error:!!t(n).errors.notes,"error-message":t(n).errors.notes,rules:[g=>g&&g.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(n).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(n).processing,onClick:c[5]||(c[5]=g=>t(W).get(u.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},qr=Object.freeze(Object.defineProperty({__proto__:null,default:Vr},Symbol.toStringTag,{value:"Module"})),Cr={class:"q-gutter-sm"},Tr={class:"col col-md-6 q-pa-xs"},Pr={class:"row"},Ir={class:"detail"},Or={key:0},Dr={key:1},Rr={key:0},Ur={key:1},Mr={colspan:"3",class:"bg-white"},Hl="Rincian Transaksi",Ar={__name:"Detail",setup(m){const s=ce();return(d,o)=>{const n=H("i-head"),i=H("authenticated-layout");return v(),h(L,null,[e(n,{title:Hl}),e(i,null,{"left-button":a(()=>[l("div",Cr,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=p=>d.$goBack())})])]),title:a(()=>[b(r(Hl))]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Tr,[l("div",Pr,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[18]||(o[18]=l("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Wallet ",-1)),l("table",Ir,[l("tbody",null,[l("tr",null,[o[1]||(o[1]=l("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.formatted_id),1)]),l("tr",null,[o[3]||(o[3]=l("td",null,"Waktu",-1)),o[4]||(o[4]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.datetime)),1)]),l("tr",null,[o[5]||(o[5]=l("td",null,"Pelanggan",-1)),o[6]||(o[6]=l("td",null,":",-1)),l("td",null,[l("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(t(s).props.data.customer.username),1)]),l("div",null,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(t(s).props.data.customer.name),1)]),t(s).props.data.customer.phone?(v(),h("div",Or,[e(V,{name:"phone",class:"inline-icon"}),b(" "+r(t(s).props.data.customer.phone),1)])):T("",!0),t(s).props.data.customer.address?(v(),h("div",Dr,[e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(t(s).props.data.customer.address),1)])):T("",!0)])]),l("tr",null,[o[7]||(o[7]=l("td",null,"Jenis Transaksi",-1)),o[8]||(o[8]=l("td",null,":",-1)),l("td",null,r(d.$CONSTANTS.CUSTOMER_WALLET_TRANSACTION_TYPES[t(s).props.data.type]),1)]),l("tr",null,[o[9]||(o[9]=l("td",null,"Jumlah",-1)),o[10]||(o[10]=l("td",null,":",-1)),l("td",{class:_e(t(s).props.data.amount>0?"text-positive":"text-negative")},r(t(kt)(t(s).props.data.amount))+"Rp. "+r(t(K)(Math.abs(t(s).props.data.amount))),3)]),l("tr",null,[o[11]||(o[11]=l("td",null,"Catatan",-1)),o[12]||(o[12]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.notes),1)]),t(s).props.data.creator?(v(),h("tr",Rr,[o[13]||(o[13]=l("td",null,"Dibuat",-1)),o[14]||(o[14]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.created_at))+" oleh "+r(t(s).props.data.creator.name),1)])):T("",!0),t(s).props.data.updater?(v(),h("tr",Ur,[o[15]||(o[15]=l("td",null,"Diperbarui",-1)),o[16]||(o[16]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.updated_at))+" oleh "+r(t(s).props.data.updater.name),1)])):T("",!0),t(s).props.data.image_path?(v(),h(L,{key:2},[o[17]||(o[17]=l("tr",null,[l("td",null,"Lampiran"),l("td",null,":"),l("td")],-1)),l("tr",null,[l("td",Mr,[e(el,{src:`/${t(s).props.data.image_path}`,class:"q-mt-none",style:Ae([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):T("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Er=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"})),jr={class:"q-gutter-sm"},Nr={class:"col col-md-6 q-pa-xs"},Br={__name:"Editor",setup(m){var c;const s=ce(),d=(s.props.data.id?"Edit":"Catat")+" Transaksi Dompet Pelanggan",{filteredCustomers:o,filterCustomersFn:n}=Da(s.props.customers,!1),i=[{label:"Deposit (+)",value:"deposit"},{label:"Penarikan (-)",value:"withdrawal"}],p=s.props.finance_accounts.map(_=>({label:_.name,value:_.id})),f=Oe({id:s.props.data.id,customer_id:s.props.data.customer_id,finance_account_id:s.props.data.finance_account_id,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((c=s.props.data)==null?void 0:c.image_path)??"",image:null}),u=()=>{Ht(f,{datetime:"YYYY-MM-DD HH:mm:ss"}),Fe({form:f,url:route("admin.customer-wallet-transaction.save")})};return(_,w)=>{const g=H("i-head"),x=H("authenticated-layout");return v(),h(L,null,[e(g,{title:d}),e(x,null,{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",jr,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:w[0]||(w[0]=C=>_.$inertia.get(_.route("admin.customer-wallet-transaction.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Nr,[e(Re,{class:"row",onSubmit:Q(u,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":w[1]||(w[1]=C=>t(f).id=C)},null,512),[[Xe,t(f).id]]),e(Ut,{autofocus:"",modelValue:t(f).datetime,"onUpdate:modelValue":w[2]||(w[2]=C=>t(f).datetime=C),label:"Tanggal",error:!!t(f).errors.datetime,disable:t(f).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(se,{class:"custom-select",modelValue:t(f).customer_id,"onUpdate:modelValue":w[3]||(w[3]=C=>t(f).customer_id=C),label:"Pelanggan","use-input":"","input-debounce":"300",clearable:"",options:t(o),"map-options":"","emit-value":"",errorMessage:t(f).errors.customer_id,onFilter:t(n),error:!!t(f).errors.customer_id,disable:t(f).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ee,null,{default:a(()=>[e(M,null,{default:a(()=>w[10]||(w[10]=[b("Pelanggan tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(se,{modelValue:t(f).type,"onUpdate:modelValue":w[4]||(w[4]=C=>t(f).type=C),label:"Jenis",options:i,"map-options":"","emit-value":"",error:!!t(f).errors.type,disable:t(f).processing,errorMessage:t(f).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(se,{modelValue:t(f).finance_account_id,"onUpdate:modelValue":w[5]||(w[5]=C=>t(f).finance_account_id=C),label:t(f).type=="deposit"?"Kas Tujuan":"Kas Asal",options:t(p),"map-options":"","emit-value":"",error:!!t(f).errors.finance_account_id,disable:t(f).processing,errorMessage:t(f).errors.finance_account_id,"hide-bottom-space":""},null,8,["modelValue","label","options","error","disable","errorMessage"]),e(Ne,{modelValue:t(f).amount,"onUpdate:modelValue":w[6]||(w[6]=C=>t(f).amount=C),label:"Jumlah",lazyRules:"",disable:t(f).processing,error:!!t(f).errors.amount,errorMessage:t(f).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(le,{modelValue:t(f).notes,"onUpdate:modelValue":w[7]||(w[7]=C=>t(f).notes=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:t(f).processing,error:!!t(f).errors.notes,"error-message":t(f).errors.notes,rules:[C=>C&&C.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(yl,{modelValue:t(f).image,"onUpdate:modelValue":w[8]||(w[8]=C=>t(f).image=C),"initial-image-path":t(f).image_path,disabled:t(f).processing,error:!!t(f).errors.image||!!t(f).errors.image_path,"error-message":t(f).errors.image||t(f).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(f).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(f).processing,onClick:w[9]||(w[9]=C=>t(W).get(_.route("admin.customer-wallet-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Fr=Object.freeze(Object.defineProperty({__proto__:null,default:Br},Symbol.toStringTag,{value:"Module"})),zr={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Hr={class:"q-pa-xs"},Lr={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Yr={key:0},Kr={class:"flex justify-end no-wrap"},Ll="Transaksi Dompet Pelanggan",Qr={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=new Date().getFullYear(),c=new Date().getMonth()+1,_=[{label:"Semua Tahun",value:"all"},{label:`${u}`,value:u},...Pt(u-2,u-1).reverse()],w=[{value:"all",label:"Semua Bulan"},...It()],g=Ie({search:"",year:u,month:c,...Ue()}),x=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"datetime",descending:!0}),C=[{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"customer",label:"Pelanggan",field:"customer",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"action",align:"right"}];$e(()=>{A()});const k=q=>Ge({message:`Hapus transaksi #${q.formatted_id}? Seluruh akun terkait akan di refund dan rekaman akan dihapus.`,url:route("admin.customer-wallet-transaction.delete",q.id),fetchItemsCallback:A,loading:n}),A=(q=null)=>{Me({pagination:x,filter:g,props:q,rows:o,url:route("admin.customer-wallet-transaction.data"),loading:n,tableRef:i})},D=()=>{A()},y=X(()=>s.screen.gt.sm?C:C.filter(q=>q.name==="datetime"||q.name==="action"));Be(()=>g.year,q=>{q===null&&(g.month=null)});const O=S(null),B=S(!1),$=q=>{O.value=q,B.value=!0};return(q,I)=>{const E=H("i-head"),j=H("authenticated-layout");return v(),h(L,null,[e(E,{title:Ll}),e(j,null,Ye({title:a(()=>[b(r(Ll))]),"right-button":a(()=>[e(R,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:I[0]||(I[0]=P=>d.value=!d.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:I[1]||(I[1]=P=>t(W).get(q.route("admin.customer-wallet-transaction.add")))})]),default:a(()=>[l("div",Hr,[e(Te,{ref_key:"tableRef",ref:i,style:Ae({height:t(f)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:x.value,"onUpdate:pagination":I[6]||(I[6]=P=>x.value=P),filter:g.search,loading:n.value,columns:y.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:A,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:P,message:Z,filter:de})=>[l("div",Lr,[l("span",null,r(Z)+" "+r(de?" with term "+de:""),1)])]),body:a(P=>[e(qe,{props:P,class:"cursor-pointer",onClick:Q(Z=>t(W).get(q.route("admin.customer-wallet-transaction.detail",{id:P.row.id})),["stop"])},{default:a(()=>[e(F,{key:"datetime",props:P,class:"wrap-column"},{default:a(()=>[l("div",null,[e(V,{name:"tag",class:"inline-icon"}),b(" "+r(P.row.formatted_id),1)]),l("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(t(be)(P.row.datetime)),1)]),P.row.finance_account?(v(),h("div",Yr,[e(V,{name:"wallet",class:"inline-icon"}),b(" "+r(P.row.finance_account?P.row.finance_account.name:"-"),1)])):T("",!0),t(s).screen.gt.sm?T("",!0):(v(),h(L,{key:1},[e(we,{icon:"person",text:P.row.customer.username+" - "+P.row.customer.name},null,8,["text"]),l("div",{class:_e([P.row.amount>0?"text-positive":"text-negative","text-bold"])},[e(V,{name:"money",class:"inline-icon"}),b(" "+r(t(kt)(P.row.amount))+"Rp. "+r(t(K)(Math.abs(P.row.amount))),1)],2),e(we,{text:P.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"]),l("div",null,[e(st,null,{default:a(()=>[b(r(P.row.type_label),1)]),_:2},1024)])],64))]),_:2},1032,["props"]),e(F,{key:"customer",props:P},{default:a(()=>[e(we,{text:P.row.customer.username+" - "+P.row.customer.name},null,8,["text"])]),_:2},1032,["props"]),e(F,{key:"notes",props:P},{default:a(()=>[e(we,{text:P.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(F,{key:"amount",props:P,style:{"text-align":"right"}},{default:a(()=>[b(r(t(Zt)(P.row.amount)),1)]),_:2},1032,["props"]),e(F,{key:"action",props:P},{default:a(()=>[l("div",Kr,[e(R,{icon:"image",color:"primary",dense:"",flat:"",disable:P.row.image_path===null||P.row.image_path==="",onClick:Q(Z=>$(P.row.image_path),["stop"])},{default:a(()=>[P.row.image_path!=null?(v(),N(zt,{key:0},{default:a(()=>I[8]||(I[8]=[b(" Lihat Bukti ")])),_:1})):T("",!0)]),_:2},1032,["disable","onClick"]),e(R,{icon:"more_vert",rounded:"",dense:"",flat:"",onClick:I[5]||(I[5]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{onClick:Q(Z=>k(P.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>I[9]||(I[9]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(tl,{modelValue:B.value,"onUpdate:modelValue":I[7]||(I[7]=P=>B.value=P),imageUrl:`/${O.value}`},null,8,["modelValue","imageUrl"])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",zr,[e(se,{modelValue:g.year,"onUpdate:modelValue":[I[2]||(I[2]=P=>g.year=P),D],options:_,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{modelValue:g.month,"onUpdate:modelValue":[I[3]||(I[3]=P=>g.month=P),D],options:w,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:g.year===null},null,8,["modelValue","disable"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":I[4]||(I[4]=P=>g.search=P),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wr=Object.freeze(Object.defineProperty({__proto__:null,default:Qr},Symbol.toStringTag,{value:"Module"})),Jr={class:"detail"},Gr={colspan:"3"},Xr={class:"text-bold text-grey-8"},Zr={key:0},ei={class:"text-grey-8"},ti={key:1},li={class:"text-grey-8"},ai={class:"text-grey-8"},oi={key:2},ni={class:"text-grey-8"},Ra={__name:"MainInfoTab",setup(m){const s=ce();return(d,o)=>(v(),h("table",Jr,[l("tbody",null,[l("tr",null,[l("td",Gr,[l("div",Xr,[o[1]||(o[1]=b(" Info Pelanggan ")),e(R,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",class:"q-ml-sm",color:"grey",onClick:o[0]||(o[0]=n=>d.$inertia.get(d.route("admin.customer.edit",{id:t(s).props.data.id})))})])])]),l("tr",null,[o[2]||(o[2]=l("td",{style:{width:"120px"}},"Username",-1)),o[3]||(o[3]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.username),1)]),l("tr",null,[o[4]||(o[4]=l("td",null,"Jenis",-1)),o[5]||(o[5]=l("td",null,":",-1)),l("td",null,r(d.$CONSTANTS.CUSTOMER_TYPES[t(s).props.data.type]),1)]),l("tr",null,[o[6]||(o[6]=l("td",null,"Nama",-1)),o[7]||(o[7]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.name),1)]),l("tr",null,[o[8]||(o[8]=l("td",null,"No. Telepon",-1)),o[9]||(o[9]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.phone),1)]),l("tr",null,[o[10]||(o[10]=l("td",null,"Alamat",-1)),o[11]||(o[11]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.address),1)]),l("tr",null,[o[12]||(o[12]=l("td",null,"Saldo Wallet",-1)),o[13]||(o[13]=l("td",null,":",-1)),l("td",null,"Rp. "+r(t(K)(t(s).props.data.balance)),1)]),l("tr",null,[o[14]||(o[14]=l("td",null,"Status",-1)),o[15]||(o[15]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),o[25]||(o[25]=l("tr",null,[l("td",{colspan:"3"},[l("div",{class:"text-bold text-grey-8 q-mt-md"},"Info Akun")])],-1)),t(s).props.data.created_at?(v(),h("tr",Zr,[o[16]||(o[16]=l("td",null,"Dibuat",-1)),o[17]||(o[17]=l("td",null,":",-1)),l("td",null,[b(r(t(be)(t(s).props.data.created_at))+" ",1),l("span",ei,"("+r(t(yt)(t(s).props.data.created_at))+")",1)])])):T("",!0),t(s).props.data.updated_at?(v(),h("tr",ti,[o[18]||(o[18]=l("td",null,"Diperbarui",-1)),o[19]||(o[19]=l("td",null,":",-1)),l("td",null,[b(r(t(be)(t(s).props.data.updated_at))+" ",1),l("span",li,"("+r(t(yt)(t(s).props.data.updated_at))+")",1)])])):T("",!0),l("tr",null,[o[20]||(o[20]=l("td",null,"Terakhir login",-1)),o[21]||(o[21]=l("td",null,":",-1)),l("td",null,[b(r(t(s).props.data.last_login_datetime?t(be)(t(s).props.data.last_login_datetime):"Belum pernah login")+" ",1),l("span",ai,"("+r(t(yt)(t(s).props.data.last_login_datetime))+")",1)])]),t(s).props.data.last_activity_datetime?(v(),h("tr",oi,[o[23]||(o[23]=l("td",null,"Aktifitas Terakhir",-1)),o[24]||(o[24]=l("td",null,":",-1)),l("td",null,[b(r(t(be)(t(s).props.data.last_activity_datetime))+" ",1),l("span",ni,[b("("+r(t(yt)(t(s).props.data.last_activity_datetime))+")",1),o[22]||(o[22]=l("br",null,null,-1)),b(r(t(s).props.data.last_activity_description),1)])])])):T("",!0)])]))}},si=Object.freeze(Object.defineProperty({__proto__:null,default:Ra},Symbol.toStringTag,{value:"Module"})),ri={class:"full-width row flex-center text-grey-8 q-gutter-sm"},ii={class:"text-bold"},Ua={__name:"WalletHistoryTab",setup(m){const s=ce(),d=S([]),o=S(!0),n=Ie({customer_id:s.props.data.id,...Ue()}),i=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),p=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah",field:"amount",align:"right"}];$e(()=>{f()});const f=(_=null)=>Me({pagination:i,filter:n,props:_,rows:d,url:route("admin.customer-wallet-transaction.data"),loading:o}),u=he(),c=X(()=>u.screen.gt.sm?p:p.filter(_=>_.name==="id"));return(_,w)=>(v(),N(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:i.value,"onUpdate:pagination":w[0]||(w[0]=g=>i.value=g),filter:n.search,loading:o.value,columns:c.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:g,message:x,filter:C})=>[l("div",ri,[l("span",null,r(x)+" "+r(C?" with term "+C:""),1)])]),body:a(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:Q(x=>t(W).get(_.route("admin.customer-wallet-transaction.detail",{id:g.row.id})),["stop"])},{default:a(()=>[e(F,{key:"id",props:g},{default:a(()=>[l("div",ii,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(g.row.formatted_id),1)]),l("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(t(be)(g.row.datetime)),1)]),t(u).screen.lt.md?(v(),h(L,{key:0},[l("div",{class:_e(["text-bold",g.row.amount<0?"text-red":"text-green"])},[e(V,{name:"money",class:"inline-icon"}),b(" "+r(t($a)(g.row.amount)),1)],2),l("div",null,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])],64)):T("",!0),l("div",null,[e(st,{size:"xs",color:g.row.amount>0?"green":"red"},{default:a(()=>[e(V,{name:"category"}),b(" "+r(g.row.type_label),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(F,{key:"notes",props:g,class:"wrap-column"},{default:a(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"]),e(F,{key:"amount",props:g},{default:a(()=>[l("div",{class:_e(g.row.amount<0?"text-red-10":g.row.amount>0?"text-green-10":"")},r(t(Zt)(g.row.amount)),3)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},di=Object.freeze(Object.defineProperty({__proto__:null,default:Ua},Symbol.toStringTag,{value:"Module"})),ui={class:"full-width row flex-center text-grey-8 q-gutter-sm"},mi={class:"text-bold"},ci={class:"text-bold"},pi={key:0},Ma={__name:"OrderHistoryTab",setup(m){const s=ce(),d=S([]),o=S(!0),n=Ie({customer_id:s.props.data.id,...Ue()}),i=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),p=[{name:"id",label:"Trx",field:"id",align:"left"},{name:"grand_total",label:"Total",field:"grand_total",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{f()});const f=(_=null)=>Me({pagination:i,filter:n,props:_,rows:d,url:route("admin.sales-order.data",{customer_id:s.props.data.id,filter:{status:["closed","canceled"]}}),loading:o}),u=he(),c=X(()=>u.screen.gt.sm?p:p.filter(_=>_.name==="id"));return(_,w)=>(v(),N(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:i.value,"onUpdate:pagination":w[0]||(w[0]=g=>i.value=g),filter:n.search,loading:o.value,columns:c.value,rows:d.value,"rows-per-page-options":[10,25,50],onRequest:f,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:g,message:x,filter:C})=>[l("div",ui,[l("span",null,r(x)+" "+r(C?" with term "+C:""),1)])]),body:a(g=>[e(qe,{props:g,class:"cursor-pointer",onClick:Q(x=>t(W).get(_.route("admin.sales-order.detail",{id:g.row.id})),["stop"])},{default:a(()=>[e(F,{key:"id",props:g},{default:a(()=>[l("div",mi,[e(V,{class:"inline-icon",name:"tag"}),b(" "+r(g.row.formatted_id),1)]),l("div",null,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(t(be)(g.row.datetime)),1)]),t(u).screen.lt.md?(v(),h(L,{key:0},[l("div",ci,[e(V,{name:"money",class:"inline-icon"}),b(" Rp. "+r(t(K)(g.row.grand_total)),1)]),g.row.notes?(v(),h("div",pi,[e(we,{text:g.row.notes,class:"text-grey-8",icon:"notes"},null,8,["text"])])):T("",!0)],64)):T("",!0),l("div",null,[e(st,{color:g.row.status=="closed"?"green":"red"},{default:a(()=>[b(r(_.$CONSTANTS.SALES_ORDER_STATUSES[g.row.status]),1)]),_:2},1032,["color"])])]),_:2},1032,["props"]),e(F,{key:"grand_total",props:g},{default:a(()=>[l("div",null,r(t(K)(g.row.grand_total)),1)]),_:2},1032,["props"]),e(F,{key:"notes",props:g,class:"wrap-column"},{default:a(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},fi=Object.freeze(Object.defineProperty({__proto__:null,default:Ma},Symbol.toStringTag,{value:"Module"})),gi={class:"q-gutter-sm"},bi={class:"col col-lg-6 q-pa-xs"},vi={class:"row"},Yl="Rincian Pelanggan",_i={__name:"Detail",setup(m){ce();const s=S("main");return he(),(d,o)=>{const n=H("i-head"),i=H("authenticated-layout");return v(),h(L,null,[e(n,{title:Yl}),e(i,null,{title:a(()=>[b(r(Yl))]),"left-button":a(()=>[l("div",gi,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=p=>d.$inertia.get(d.route("admin.customer.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",bi,[l("div",vi,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ol,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=p=>s.value=p),align:"left"},{default:a(()=>[e(ct,{name:"main",label:"Info Utama"}),e(ct,{name:"history",label:"Riwayat Wallet"}),e(ct,{name:"order-history",label:"Riwayat Order"})]),_:1},8,["modelValue"]),e(nl,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=p=>s.value=p)},{default:a(()=>[e(pt,{name:"main"},{default:a(()=>[e(Ra)]),_:1}),e(pt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Ua)]),_:1}),e(pt,{name:"order-history",class:"q-pa-xs"},{default:a(()=>[e(Ma)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},yi=Object.freeze(Object.defineProperty({__proto__:null,default:_i},Symbol.toStringTag,{value:"Module"})),wi={class:"q-gutter-sm"},ki={class:"col col-md-6 q-pa-xs"},hi={__name:"Editor",setup(m){const s=ce(),d=(s.props.data.id?"Edit":"Tambah")+" Pelanggan",o=Oe({id:s.props.data.id,username:s.props.data.username,name:s.props.data.name,phone:s.props.data.phone,address:s.props.data.address,active:!!s.props.data.active,password:s.props.data.password}),n=()=>Fe({form:o,url:route("admin.customer.save")});return(i,p)=>{const f=H("i-head"),u=H("authenticated-layout");return v(),h(L,null,[e(f,{title:d}),e(u,null,{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",wi,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=c=>i.$inertia.get(i.route("admin.customer.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",ki,[e(Re,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:t(De)},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=c=>t(o).id=c)},null,512),[[Xe,t(o).id]]),e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[e(le,{modelValue:t(o).username,"onUpdate:modelValue":p[2]||(p[2]=c=>t(o).username=c),modelModifiers:{trim:!0},label:"Username",error:!!t(o).errors.username,disable:t(o).processing,"error-message":t(o).errors.username,rules:[c=>c&&c.length>0||"Username harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(le,{modelValue:t(o).name,"onUpdate:modelValue":p[3]||(p[3]=c=>t(o).name=c),modelModifiers:{trim:!0},label:"Nama Pelanggan",error:!!t(o).errors.name,disable:t(o).processing,"error-message":t(o).errors.name,rules:[c=>c&&c.length>0||"Nama harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(le,{modelValue:t(o).phone,"onUpdate:modelValue":p[4]||(p[4]=c=>t(o).phone=c),modelModifiers:{trim:!0},type:"text",label:"No HP",disable:t(o).processing,error:!!t(o).errors.phone,"error-message":t(o).errors.phone,rules:[c=>c&&c.length>0||"No HP harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(le,{modelValue:t(o).address,"onUpdate:modelValue":p[5]||(p[5]=c=>t(o).address=c),modelModifiers:{trim:!0},type:"textarea",maxlength:"200",label:"Alamat",disable:t(o).processing,error:!!t(o).errors.address,"error-message":t(o).errors.address,rules:[c=>c&&c.length>0||"Alamat harus diisi."],autogrow:"",counter:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(le,{modelValue:t(o).password,"onUpdate:modelValue":p[6]||(p[6]=c=>t(o).password=c),type:"password",label:t(o).id?"Kata Sandi Baru (Wajib diisi)":"Kata Sandi (Isi jika ingin mengganti)",disable:t(o).processing,error:!!t(o).errors.password,"error-message":t(o).errors.password,"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","label","disable","error","error-message"]),e(al,{modelValue:t(o).active,"onUpdate:modelValue":p[7]||(p[7]=c=>t(o).active=c),label:"Aktif",disable:t(o).processing},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{type:"submit",label:"Simpan",icon:"save",color:"primary",disable:t(o).processing},null,8,["disable"]),e(R,{label:"Batal",icon:"cancel",disable:t(o).processing,onClick:p[8]||(p[8]=c=>t(W).get(i.route("admin.customer.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},$i=Object.freeze(Object.defineProperty({__proto__:null,default:hi},Symbol.toStringTag,{value:"Module"}));function Ot(m,s,d,o){const n=[];return m.forEach(i=>{o(i)===!0?n.push(i):s.push({failedPropValidation:d,file:i})}),n}function Kt(m){m&&m.dataTransfer&&(m.dataTransfer.dropEffect="copy"),Ct(m)}const xi={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Si=["rejected"];function Vi({editable:m,dnd:s,getFileInput:d,addFilesToQueue:o}){const{props:n,emit:i,proxy:p}=$t(),f=S(null),u=X(()=>n.accept!==void 0?n.accept.split(",").map(y=>(y=y.trim(),y==="*"?"*/":(y.endsWith("/*")&&(y=y.slice(0,y.length-1)),y.toUpperCase()))):null),c=X(()=>parseInt(n.maxFiles,10)),_=X(()=>parseInt(n.maxTotalSize,10));function w(y){if(m.value)if(y!==Object(y)&&(y={target:null}),y.target!==null&&y.target.matches('input[type="file"]')===!0)y.clientX===0&&y.clientY===0&&Io(y);else{const O=d();O&&O!==y.target&&O.click(y)}}function g(y){m.value&&y&&o(null,y)}function x(y,O,B,$){let q=Array.from(O||y.target.files);const I=[],E=()=>{I.length!==0&&i("rejected",I)};if(n.accept!==void 0&&u.value.indexOf("*/")===-1&&(q=Ot(q,I,"accept",j=>u.value.some(P=>j.type.toUpperCase().startsWith(P)||j.name.toUpperCase().endsWith(P))),q.length===0))return E();if(n.maxFileSize!==void 0){const j=parseInt(n.maxFileSize,10);if(q=Ot(q,I,"max-file-size",P=>P.size<=j),q.length===0)return E()}if(n.multiple!==!0&&q.length!==0&&(q=[q[0]]),q.forEach(j=>{j.__key=j.webkitRelativePath+j.lastModified+j.name+j.size}),$===!0){const j=B.map(P=>P.__key);q=Ot(q,I,"duplicate",P=>j.includes(P.__key)===!1)}if(q.length===0)return E();if(n.maxTotalSize!==void 0){let j=$===!0?B.reduce((P,Z)=>P+Z.size,0):0;if(q=Ot(q,I,"max-total-size",P=>(j+=P.size,j<=_.value)),q.length===0)return E()}if(typeof n.filter=="function"){const j=n.filter(q);q=Ot(q,I,"filter",P=>j.includes(P))}if(n.maxFiles!==void 0){let j=$===!0?B.length:0;if(q=Ot(q,I,"max-files",()=>(j++,j<=c.value)),q.length===0)return E()}if(E(),q.length!==0)return q}function C(y){Kt(y),s.value!==!0&&(s.value=!0)}function k(y){Ct(y),(y.relatedTarget!==null||Dt.is.safari!==!0?y.relatedTarget!==f.value:document.elementsFromPoint(y.clientX,y.clientY).includes(f.value)===!1)===!0&&(s.value=!1)}function A(y){Kt(y);const O=y.dataTransfer.files;O.length!==0&&o(null,O),s.value=!1}function D(y){if(s.value===!0)return fe("div",{ref:f,class:`q-${y}__dnd absolute-full`,onDragenter:Kt,onDragover:Kt,onDragleave:k,onDrop:A})}return Object.assign(p,{pickFiles:w,addFiles:g}),{pickFiles:w,addFiles:g,onDragover:C,onDragleave:k,processFiles:x,getDndNode:D,maxFilesNumber:c,maxTotalSizeNumber:_}}const Aa=gt({name:"QFile",inheritAttrs:!1,props:{...Do,...xa,...xi,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Oo,...Si],setup(m,{slots:s,emit:d,attrs:o}){const{proxy:n}=$t(),i=Ro(),p=S(null),f=S(!1),u=Uo(m),{pickFiles:c,onDragover:_,onDragleave:w,processFiles:g,getDndNode:x}=Vi({editable:i.editable,dnd:f,getFileInput:de,addFilesToQueue:U}),C=Mo(m),k=X(()=>Object(m.modelValue)===m.modelValue?"length"in m.modelValue?Array.from(m.modelValue):[m.modelValue]:[]),A=X(()=>Il(k.value)),D=X(()=>k.value.map(ae=>ae.name).join(", ")),y=X(()=>Ao(k.value.reduce((ae,Ve)=>ae+Ve.size,0))),O=X(()=>({totalSize:y.value,filesNumber:k.value.length,maxFiles:m.maxFiles})),B=X(()=>({tabindex:-1,type:"file",title:"",accept:m.accept,capture:m.capture,name:u.value,...o,id:i.targetUid.value,disabled:i.editable.value!==!0})),$=X(()=>"q-file q-field--auto-height"+(f.value===!0?" q-file--dnd":"")),q=X(()=>m.multiple===!0&&m.append===!0);function I(ae){const Ve=k.value.slice();Ve.splice(ae,1),j(Ve)}function E(ae){const Ve=k.value.indexOf(ae);Ve!==-1&&I(Ve)}function j(ae){d("update:modelValue",m.multiple===!0?ae:ae[0])}function P(ae){ae.keyCode===13&&No(ae)}function Z(ae){(ae.keyCode===13||ae.keyCode===32)&&c(ae)}function de(){return p.value}function U(ae,Ve){const ze=g(ae,Ve,k.value,q.value),rt=de();rt!=null&&(rt.value=""),ze!==void 0&&((m.multiple===!0?m.modelValue&&ze.every(nt=>k.value.includes(nt)):m.modelValue===ze[0])||j(q.value===!0?k.value.concat(ze):ze))}function z(){return[fe("input",{class:[m.inputClass,"q-file__filler"],style:m.inputStyle})]}function G(){if(s.file!==void 0)return k.value.length===0?z():k.value.map((Ve,ze)=>s.file({index:ze,file:Ve,ref:this}));if(s.selected!==void 0)return k.value.length===0?z():s.selected({files:k.value,ref:this});if(m.useChips===!0)return k.value.length===0?z():k.value.map((Ve,ze)=>fe(Sa,{key:"file-"+ze,removable:i.editable.value,dense:!0,textColor:m.color,tabindex:m.tabindex,onRemove:()=>{I(ze)}},()=>fe("span",{class:"ellipsis",textContent:Ve.name})));const ae=m.displayValue!==void 0?m.displayValue:D.value;return ae.length!==0?[fe("div",{class:m.inputClass,style:m.inputStyle,textContent:ae})]:z()}function Ce(){const ae={ref:p,...B.value,...C.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:U};return m.multiple===!0&&(ae.multiple=!0),fe("input",ae)}return Object.assign(i,{fieldClass:$,emitValue:j,hasValue:A,inputRef:p,innerValue:k,floatingLabel:X(()=>A.value===!0||Il(m.displayValue)),computedCounter:X(()=>{if(m.counterLabel!==void 0)return m.counterLabel(O.value);const ae=m.maxFiles;return`${k.value.length}${ae!==void 0?" / "+ae:""} (${y.value})`}),getControlChild:()=>x("file"),getControl:()=>{const ae={ref:i.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:m.tabindex};return i.editable.value===!0&&Object.assign(ae,{onDragover:_,onDragleave:w,onKeydown:P,onKeyup:Z}),fe("div",ae,[Ce()].concat(G()))}}),Object.assign(n,{removeAtIndex:I,removeFile:E,getNativeElement:()=>p.value}),Eo(n,"nativeEl",()=>p.value),jo(i)}}),Jt=gt({name:"QBanner",props:{...vl,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(m,{slots:s}){const{proxy:{$q:d}}=$t(),o=_l(m,d),n=X(()=>"q-banner row items-center"+(m.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(m.rounded===!0?" rounded-borders":"")),i=X(()=>`q-banner__actions row items-center justify-end col-${m.inlineActions===!0?"auto":"all"}`);return()=>{const p=[fe("div",{class:"q-banner__avatar col-auto row items-center self-start"},wt(s.avatar)),fe("div",{class:"q-banner__content col text-body2"},wt(s.default))],f=wt(s.action);return f!==void 0&&p.push(fe("div",{class:i.value},f)),fe("div",{class:n.value+(m.inlineActions===!1&&f!==void 0?" q-banner--top-padding":""),role:"alert"},p)}}}),qi={class:"q-gutter-sm"},Ci={class:"col col-md-6 q-pa-xs"},Kl="Import Pelanggan",Ti={__name:"Import",setup(m){const s=Oe({csv_file:null}),d=()=>{s.post(route("admin.customer.import"),{onSuccess:()=>{s.reset()},onError:()=>{De()},onFinish:()=>{s.clearErrors()}})};return(o,n)=>{const i=H("i-head"),p=H("authenticated-layout");return v(),h(L,null,[e(i,{title:Kl}),e(p,{"show-drawer-button":!1},{title:a(()=>[b(r(Kl))]),"left-button":a(()=>[l("div",qi,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>o.$goBack())})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Ci,[e(Re,{class:"row",onSubmit:Q(d,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[n[3]||(n[3]=l("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),n[4]||(n[4]=l("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data pelanggan. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(Aa,{modelValue:t(s).csv_file,"onUpdate:modelValue":n[1]||(n[1]=f=>t(s).csv_file=f),accept:".csv",label:"Pilih file CSV",error:!!t(s).errors.csv_file,"error-message":t(s).errors.csv_file,disable:t(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:t(s).processing||!t(s).csv_file,loading:t(s).processing},null,8,["disable","loading"]),e(R,{icon:"cancel",label:"Batal",disable:t(s).processing,onClick:n[2]||(n[2]=f=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(v(),N(Jt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.success),1)]),_:1})):T("",!0),o.$page.props.flash.error?(v(),N(Jt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.error),1)]),_:1})):T("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Pi=Object.freeze(Object.defineProperty({__proto__:null,default:Ti},Symbol.toStringTag,{value:"Module"})),Ii={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Oi={class:"q-pa-xs"},Di={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ri={class:"flex justify-end"},Ql="Pelanggan",Ui={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=Ie({search:"",status:"active",...Ue()}),c=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"username",label:s.screen.lt.md?"Pelanggan":"Kode",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right"},{name:"phone",label:"No HP",field:"phone",align:"left"},{name:"address",label:"Alamat",field:"address",align:"left"},{name:"action",align:"right"}],w=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];$e(()=>{x()});const g=D=>Ge({message:`Hapus Pelanggan ${D.name}?`,url:route("admin.customer.delete",D.id),fetchItemsCallback:x,loading:n}),x=(D=null)=>{Me({pagination:c,filter:u,props:D,rows:o,url:route("admin.customer.data"),loading:n,tableRef:i})},C=()=>x(),k=D=>W.get(route("admin.customer.detail",{id:D.id})),A=X(()=>s.screen.gt.sm?_:_.filter(D=>D.name==="username"||D.name==="action"));return(D,y)=>{const O=H("i-head"),B=H("authenticated-layout");return v(),h(L,null,[e(O,{title:Ql}),e(B,null,Ye({title:a(()=>[b(r(Ql))]),"right-button":a(()=>[e(R,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:y[0]||(y[0]=$=>d.value=!d.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:y[1]||(y[1]=$=>t(W).get(D.route("admin.customer.add")))}),e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:y[3]||(y[3]=Q(()=>{},["stop"])),class:"q-ml-sm"},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",onClick:y[2]||(y[2]=Q($=>t(W).get(D.route("admin.customer.import")),["stop"]))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"csv"})]),_:1}),e(M,null,{default:a(()=>y[8]||(y[8]=[b("Import")])),_:1})]),_:1})),[[ne],[re]])]),_:1})]),_:1})]),_:1})]),default:a(()=>[l("div",Oi,[e(Te,{class:"full-height-table",style:Ae({height:t(f)}),ref_key:"tableRef",ref:i,flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":y[7]||(y[7]=$=>c.value=$),filter:u.search,loading:n.value,columns:A.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:q,filter:I})=>[l("div",Di,[l("span",null,r(q)+" "+r(I?" with term "+I:""),1)])]),body:a($=>[e(qe,{props:$,class:_e([$.row.active?"":"bg-red-1","cursor-pointer"]),onClick:q=>k($.row)},{default:a(()=>[e(F,{key:"username",props:$,class:"wrap-column"},{default:a(()=>[l("div",null,[t(s).screen.lt.md?(v(),N(V,{key:0,name:"person"})):T("",!0),b(" "+r($.row.username),1)]),t(s).screen.lt.md?(v(),h(L,{key:0},[l("div",null,[t(s).screen.lt.md?(v(),N(V,{key:0,name:"person"})):T("",!0),b(" "+r($.row.name),1)]),l("div",null,[e(V,{name:"phone"}),b(" "+r($.row.phone),1)]),e(we,{text:$.row.address,icon:"home_pin"},null,8,["text"]),l("div",null,[e(V,{name:"wallet"}),b(" Rp. "+r(t(K)($.row.balance)),1)])],64)):T("",!0)]),_:2},1032,["props"]),e(F,{key:"name",props:$},{default:a(()=>[b(r($.row.name),1)]),_:2},1032,["props"]),e(F,{key:"balance",props:$},{default:a(()=>[b(r(t(K)($.row.balance)),1)]),_:2},1032,["props"]),e(F,{key:"phone",props:$},{default:a(()=>[b(r($.row.phone),1)]),_:2},1032,["props"]),e(F,{key:"address",props:$},{default:a(()=>[e(we,{text:$.row.address},null,8,["text"])]),_:2},1032,["props"]),e(F,{key:"action",props:$},{default:a(()=>[l("div",Ri,[e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:y[6]||(y[6]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",onClick:Q(q=>t(W).get(D.route("admin.customer.edit",$.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,{icon:"edit"},{default:a(()=>y[9]||(y[9]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{onClick:Q(q=>g($.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>y[10]||(y[10]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",Ii,[e(se,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[y[4]||(y[4]=$=>u.status=$),C],options:w,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":y[5]||(y[5]=$=>u.search=$),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Mi=Object.freeze(Object.defineProperty({__proto__:null,default:Ui},Symbol.toStringTag,{value:"Module"})),Ai={class:"q-pb-sm"},Ei={class:"row q-col-gutter-sm"},ji={class:"row items-center no-wrap"},Ni={class:"q-ml-md"},Bi={class:"text-subtitle2 text-grey-8"},Fi={class:"text-h6 text-weight-bold"},Ea={__name:"ActualSummaryCard",props:{dashboardData:{type:Object,required:!0}},setup(m){const s=m,d=X(()=>[{label:"Total Pelanggan Aktif",value:s.dashboardData.summary.total_active_customer,icon:"groups",color:"primary",bgColor:"#e3f2fd"},{label:"Total Saldo Wallet",value:K(s.dashboardData.summary.total_wallet_balance),icon:"account_balance_wallet",color:"orange-9",bgColor:"#fff3e0"},{label:"Total Penjualan",value:K(s.dashboardData.summary.total_sales),icon:"shopping_cart",color:"green-7",bgColor:"#e8f5e9"},{label:"Total Transaksi",value:K(s.dashboardData.summary.total_transactions),icon:"swap_horiz",color:"purple-8",bgColor:"#f3e5f5"}]);return(o,n)=>(v(),h("div",Ai,[n[0]||(n[0]=l("div",{class:"text-h6 text-bold text-grey-8 q-mb-sm"},"Ringkasan Statistik",-1)),l("div",Ei,[(v(!0),h(L,null,lt(d.value,(i,p)=>(v(),h("div",{key:p,class:"col-12 col-md-6"},[e(ie,{square:"",bordered:"",flat:"",class:"q-pa-md",style:{width:"100%"}},{default:a(()=>[l("div",ji,[e(Rt,{icon:i.icon,color:i.color,"text-color":i.bgColor},null,8,["icon","color","text-color"]),l("div",Ni,[l("div",Bi,r(i.label),1),l("div",Fi,r(i.value),1)])])]),_:2},1024)]))),128))])]))}},zi=Object.freeze(Object.defineProperty({__proto__:null,default:Ea},Symbol.toStringTag,{value:"Module"})),Hi={class:"row q-col-gutter-sm q-pb-sm"},Li={class:"col-md-6 col-12"},Yi={class:"col-md-6 col-12"},Ki={__name:"ChartCard",props:{dashboardData:{type:Object,required:!0}},setup(m){Bo([Fo,zo,Ho,Lo,Yo,Ko,Qo]);const s=m,d=["#82B1FF","#4DB6AC","#FFB74D","#9575CD"],o=X(()=>({title:{text:"Penjualan Bulanan",left:"center"},tooltip:{trigger:"axis",formatter:function(i){let p=i[0].name+"<br/>";return i.forEach(function(f){p+=f.marker+" "+f.seriesName+": "+K(f.value)+"<br/>"}),p}},xAxis:{type:"category",data:s.dashboardData.monthly_sales.labels,axisLabel:{color:"#616161"}},yAxis:{type:"value",axisLabel:{formatter:i=>K(i),color:"#616161"}},series:[{name:"Penjualan",type:"bar",data:s.dashboardData.monthly_sales.data,itemStyle:{borderRadius:[5,5,0,0],color:d[0]}}]})),n=X(()=>({title:{text:"Distribusi Jenis Transaksi",left:"center"},tooltip:{trigger:"item",formatter:function(i){return i.name+"<br/>"+i.seriesName+": "+K(i.value)+" ("+i.percent+"%)"}},legend:{orient:"vertical",left:"left",textStyle:{color:"#616161"}},series:[{name:"Jumlah Transaksi",type:"pie",radius:["40%","70%"],data:s.dashboardData.transaction_type_distribution,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2,color:i=>d[i.dataIndex%d.length]},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}));return(i,p)=>(v(),h("div",Hi,[l("div",Li,[e(ie,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[p[0]||(p[0]=l("div",{class:"text-h6 q-pb-sm"},"Penjualan Bulanan",-1)),e(t(Ol),{class:"chart",option:o.value,autoresize:""},null,8,["option"])]),_:1})]),l("div",Yi,[e(ie,{square:"",bordered:"",flat:"",class:"full-width q-pa-md"},{default:a(()=>[p[1]||(p[1]=l("div",{class:"text-h6 q-pb-sm"},"Distribusi Transaksi",-1)),e(t(Ol),{class:"chart",option:n.value,autoresize:""},null,8,["option"])]),_:1})])]))}},ja=ft(Ki,[["__scopeId","data-v-b9cdf915"]]),Qi=Object.freeze(Object.defineProperty({__proto__:null,default:ja},Symbol.toStringTag,{value:"Module"})),Wi={class:"row q-col-gutter-sm q-pb-sm"},Ji={class:"col-md-6 col-12"},Gi={class:"col-md-6 col-12"},Na={__name:"TopCard",props:{dashboardData:{type:Object,required:!0}},setup(m){return(s,d)=>(v(),h("div",Wi,[l("div",Ji,[e(ie,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[d[0]||(d[0]=l("div",{class:"text-h6 q-mb-sm"},"Top 5 Pembelian Pelanggan",-1)),e(Ee,{separator:""},{default:a(()=>[(v(!0),h(L,null,lt(m.dashboardData.top_customers_sales,(o,n)=>(v(),N(ee,{key:n},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(Rt,{color:"primary","text-color":"white",size:"sm"},{default:a(()=>[b(r(n+1),1)]),_:2},1024)]),_:2},1024),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>[b(r(o.name),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:a(()=>[e(ge,{class:"text-primary"},{default:a(()=>[b(r(t(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l("div",Gi,[e(ie,{square:"",bordered:"",flat:"",class:"full-width full-height q-pa-md"},{default:a(()=>[d[1]||(d[1]=l("div",{class:"text-h6 q-mb-sm"},"Top 5 Top Up Pelanggan",-1)),e(Ee,{separator:""},{default:a(()=>[(v(!0),h(L,null,lt(m.dashboardData.top_customers_topup,(o,n)=>(v(),N(ee,{key:n},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(Rt,{color:"green-7","text-color":"white",size:"sm"},{default:a(()=>[b(r(n+1),1)]),_:2},1024)]),_:2},1024),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>[b(r(o.name),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:a(()=>[e(ge,{class:"text-green-7"},{default:a(()=>[b(r(t(K)(o.value)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]))}},Xi=Object.freeze(Object.defineProperty({__proto__:null,default:Na},Symbol.toStringTag,{value:"Module"})),Zi={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ed={class:"q-pa-xs"},td={class:"q-pa-none"},Wl="Dashboard",ld={__name:"Index",setup(m){const s=ce(),d=S({summary:{total_active_customer:s.props.data.active_customer_count,total_sales:155e5,total_transactions:1250,total_wallet_balance:s.props.data.total_customer_balance,total_topup:75e6,total_purchase:85e6,total_withdrawal:65e6},top_customers_sales:[{name:"Wildan Medina",value:1822e3},{name:"Syafiq",value:1754500},{name:"Umar",value:1534e3},{name:"Fauzan",value:1212e3},{name:"Rizky",value:981500}],top_customers_topup:[{name:"Abdullah",value:175e4},{name:"Abdurrahman",value:15e5},{name:"Zayd",value:125e4},{name:"Syafiq",value:8e5},{name:"Umar",value:65e4}],monthly_sales:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],data:[14123e3,21344e3,15155e3,17128e3,12557e3,12723e3]},transaction_type_distribution:[{value:500,name:"Deposit"},{value:350,name:"Purchase"},{value:200,name:"Withdrawal"},{value:200,name:"Refund"}]}),o=S(!1),n=S(Ue().month??"this_month"),i=S([{value:"this_month",label:"Bulan Ini"},{value:"prev_month",label:"1 Bulan Sebelumnya"},{value:"prev_2month",label:"2 Bulan Sebelumnya"},{value:"prev_3month",label:"3 Bulan Sebelumnya"}]),p=()=>{W.visit(route("admin.dashboard",{month:n.value}))};return(f,u)=>{const c=H("i-head"),_=H("authenticated-layout");return v(),h(L,null,[e(c,{title:Wl}),e(_,null,Ye({title:a(()=>[b(r(Wl))]),"right-button":a(()=>[e(R,{class:"q-ml-sm",icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:u[0]||(u[0]=w=>o.value=!o.value)},null,8,["icon"])]),default:a(()=>[l("div",ed,[l("div",td,[e(Ea,{dashboardData:d.value},null,8,["dashboardData"])]),e(ja,{dashboardData:d.value},null,8,["dashboardData"]),e(Na,{dashboardData:d.value},null,8,["dashboardData"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar"},{default:a(()=>[l("div",Zi,[e(se,{class:"custom-select col-12",style:{"min-width":"150px"},modelValue:n.value,"onUpdate:modelValue":[u[1]||(u[1]=w=>n.value=w),p],options:i.value,label:"Bulan",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"])])]),_:1})]),key:"0"}:void 0]),1024)],64)}}},ad=Object.freeze(Object.defineProperty({__proto__:null,default:ld},Symbol.toStringTag,{value:"Module"})),od={class:"row"},nd={class:"row q-col-gutter-sm"},sd={class:"col-sm-6 col-xs-12"},rd={class:"col-sm-6 col-xs-12"},id={class:"col-md-3 col-sm-6 col-xs-12"},dd={class:"col-md-3 col-sm-6 col-xs-12"},ud={class:"col-md-3 col-sm-6 col-xs-12"},md={class:"col-md-3 col-sm-6 col-xs-12"};const cd={__name:"SummaryCard",setup(m){const s=ce(),d=(o,n)=>{const p={...{order_status:"all",service_status:"all",repair_status:"all",payment_status:"all",search:""},...n};localStorage.setItem("fixsync.service-orders.filter",JSON.stringify(p)),W.visit(o,{data:p})};return(o,n)=>(v(),h("div",od,[e(ie,{class:"bg-transparent no-shadow no-border col",bordered:""},{default:a(()=>[e(te,{class:"q-pa-none"},{default:a(()=>[l("div",nd,[l("div",sd,[e(ee,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:n[0]||(n[0]=i=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(M,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[b(r(t(s).props.data.active_customer_count),1)]),_:1}),e(ge,null,{default:a(()=>n[5]||(n[5]=[b("Pelanggan Aktif")])),_:1})]),_:1})]),_:1})]),l("div",rd,[e(ee,{style:"background-color: #008cff",class:"q-pa-none",clickable:"",onClick:n[1]||(n[1]=i=>o.$inertia.visit(o.route("admin.customer.index",{status:"active"})))},{default:a(()=>[e(M,{side:"",style:"background-color: #007bff",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"groups_2",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-h6 text-weight-bolder"},{default:a(()=>[b(r(o.$page.props.data.active_user_count),1)]),_:1}),e(ge,null,{default:a(()=>n[6]||(n[6]=[b("Pengguna Aktif")])),_:1})]),_:1})]),_:1})]),l("div",id,[e(ee,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(M,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(t(K)(o.$page.props.data.total_finance_account_balance)),1)]),_:1}),e(ge,null,{default:a(()=>n[7]||(n[7]=[b("Total Saldo Koperasi")])),_:1})]),_:1})]),_:1})]),l("div",dd,[e(ee,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(M,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(t(K)(o.$page.props.data.total_customer_balance)),1)]),_:1}),e(ge,null,{default:a(()=>n[8]||(n[8]=[b("Total Saldo Pelanggan")])),_:1})]),_:1})]),_:1})]),l("div",ud,[e(ee,{style:"background-color: #fd8e24",class:"q-pa-none"},{default:a(()=>[e(M,{side:"",style:"background-color: #fd7e14",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(t(K)(o.$page.props.data.total_customer_debt)),1)]),_:1}),e(ge,null,{default:a(()=>n[9]||(n[9]=[b("Total Utang Pelanggan")])),_:1})]),_:1})]),_:1})]),l("div",md,[e(ee,{style:"background-color: #dc3545",class:"q-pa-none"},{default:a(()=>[e(M,{side:"",style:"background-color: #cc2535",class:"q-pa-lg q-mr-none text-white"},{default:a(()=>[e(V,{class:"material-filled",name:"paid",color:"white",size:"24px"})]),_:1}),e(M,{class:"q-pa-md q-ml-none text-white"},{default:a(()=>[e(ge,{class:"text-white text-weight-bold"},{default:a(()=>[b(" Rp. "+r(t(K)(o.$page.props.data.total_customer_credit)),1)]),_:1}),e(ge,null,{default:a(()=>n[10]||(n[10]=[b("Total Piutang Pelanggan")])),_:1})]),_:1})]),_:1})]),T("",!0),T("",!0),T("",!0)])]),_:1})]),_:1})]))}},pd=Object.freeze(Object.defineProperty({__proto__:null,default:cd},Symbol.toStringTag,{value:"Module"})),fd={class:"detail"},Ba={__name:"MainInfoTab",setup(m){const s=ce();return(d,o)=>(v(),h("table",fd,[l("tbody",null,[l("tr",null,[o[0]||(o[0]=l("td",{style:{width:"170px"}},"Nama",-1)),o[1]||(o[1]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.name),1)]),l("tr",null,[o[2]||(o[2]=l("td",null,"Jenis",-1)),o[3]||(o[3]=l("td",null,":",-1)),l("td",null,r(d.$CONSTANTS.FINANCE_ACCOUNT_TYPES[t(s).props.data.type]),1)]),t(s).props.data.type=="bank"?(v(),h(L,{key:0},[l("tr",null,[o[4]||(o[4]=l("td",null,"Bank",-1)),o[5]||(o[5]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.bank),1)]),l("tr",null,[o[6]||(o[6]=l("td",null,"No. Rek",-1)),o[7]||(o[7]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.number),1)]),l("tr",null,[o[8]||(o[8]=l("td",null,"Atas Nama",-1)),o[9]||(o[9]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.holder),1)])],64)):T("",!0),l("tr",null,[o[10]||(o[10]=l("td",null,"Saldo",-1)),o[11]||(o[11]=l("td",null,":",-1)),l("td",null,"Rp. "+r(t(K)(t(s).props.data.balance)),1)]),l("tr",null,[o[12]||(o[12]=l("td",null,"Status",-1)),o[13]||(o[13]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.active?"Aktif":"Tidak Aktif"),1)]),l("tr",null,[o[14]||(o[14]=l("td",null,"Catatan",-1)),o[15]||(o[15]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.notes),1)]),o[22]||(o[22]=l("tr",null,[l("td",{colspan:"3",class:"text-bold text-grey-9"},[l("div",{class:"q-mt-sm"},"Opsi Lanjutan")])],-1)),l("tr",null,[o[16]||(o[16]=l("td",null,"Tampilkan di Penjualan",-1)),o[17]||(o[17]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.show_in_pos_payment?"Ya":"Tidak"),1)]),l("tr",null,[o[18]||(o[18]=l("td",null,"Tampilkan di Pembelian",-1)),o[19]||(o[19]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.show_in_purchasing?"Ya":"Tidak"),1)]),l("tr",null,[o[20]||(o[20]=l("td",null,"Tampilkan di Wallet",-1)),o[21]||(o[21]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.has_wallet_access?"Ya":"Tidak"),1)])])]))}},gd=Object.freeze(Object.defineProperty({__proto__:null,default:Ba},Symbol.toStringTag,{value:"Module"})),bd={class:"full-width row flex-center text-grey-8 q-gutter-sm"},vd={class:"flex q-gutter-sm"},_d={key:0},Fa={__name:"HistoryTab",setup(m){const s=ce(),d=he(),o=S(null),n=S([]),i=S(!0),p=Ie({...Ue()}),f=Ke(null,117),u=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),c=[{name:"id",label:"ID",field:"id",align:"left"},{name:"datetime",label:"Waktu",field:"datetime",align:"left"},{name:"type",label:"Jenis Trx",field:"type",align:"center"},{name:"amount",label:"Jumlah",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],_=X(()=>d.screen.gt.sm?c:c.filter(g=>g.name==="id"));$e(()=>{w()});const w=(g=null)=>Me({pagination:u,filter:p,props:g,rows:n,url:route("admin.finance-transaction.data",{filter:{account_id:s.props.data.id}}),loading:i,tableRef:o});return(g,x)=>(v(),N(Te,{ref_key:"tableRef",ref:o,flat:"",bordered:"",square:"",style:Ae({height:t(f)}),color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":x[0]||(x[0]=C=>u.value=C),filter:p.search,loading:i.value,columns:_.value,rows:n.value,"rows-per-page-options":[10,25,50],onRequest:w,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({message:C,filter:k})=>[l("div",bd,[l("span",null,r(C)+" "+r(k?" with term "+k:""),1)])]),body:a(C=>[e(qe,{props:C},{default:a(()=>[e(F,{key:"id",props:C},{default:a(()=>[l("div",vd,[l("div",null,[t(d).screen.lt.md?(v(),N(V,{key:0,name:"tag",class:"inline-icon"})):T("",!0),b(" "+r(C.row.formatted_id),1)])]),t(d).screen.lt.md?(v(),h(L,{key:0},[l("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(t(be)(C.row.datetime)),1)]),C.row.creator?(v(),h("div",_d,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(C.row.creator.username),1)])):T("",!0),l("div",{class:_e([C.row.amount>0?"text-green":"text-red","text-bold"])},[e(V,{class:"inline-icon",name:"money"}),b(" "+r(t(kt)(C.row.amount))+"Rp. "+r(t(K)(Math.abs(C.row.amount))),1)],2),l("div",null,[e(st,{color:C.row.amount>0?"green":"red"},{default:a(()=>[b(r(g.$CONSTANTS.FINANCE_TRANSACTION_TYPES[C.row.type]),1)]),_:2},1032,["color"])]),e(we,{text:C.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):T("",!0)]),_:2},1032,["props"]),e(F,{key:"datetime",props:C},{default:a(()=>[b(r(t(be)(C.row.datetime)),1)]),_:2},1032,["props"]),e(F,{key:"type",props:C},{default:a(()=>[e(st,{color:C.row.amount>0?"green":"red"},{default:a(()=>[b(r(g.$CONSTANTS.FINANCE_TRANSACTION_TYPES[C.row.type]),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),e(F,{key:"amount",props:C,class:_e(C.row.amount>0?"text-green":"text-red")},{default:a(()=>[b(r(t(kt)(C.row.amount)+t(K)(Math.abs(C.row.amount))),1)]),_:2},1032,["props","class"]),e(F,{key:"notes",props:C},{default:a(()=>[e(we,{text:C.row.notes,icon:g.notes},null,8,["text","icon"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"]))}},yd=Object.freeze(Object.defineProperty({__proto__:null,default:Fa},Symbol.toStringTag,{value:"Module"})),wd={class:"q-gutter-sm"},kd={class:"q-gutter-sm"},hd={class:"col q-pa-xs"},$d={class:"row"},Jl="Rincian Akun",xd={__name:"Detail",setup(m){const s=ce(),d=S("main");return(o,n)=>{const i=H("i-head"),p=H("authenticated-layout");return v(),h(L,null,[e(i,{title:Jl}),e(p,null,{title:a(()=>[b(r(Jl))]),"left-button":a(()=>[l("div",wd,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>o.$inertia.get(o.route("admin.finance-account.index")))})])]),"right-button":a(()=>[l("div",kd,[e(R,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:n[1]||(n[1]=f=>t(W).get(o.route("admin.finance-account.edit",{id:t(s).props.data.id})))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",hd,[l("div",$d,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(ol,{modelValue:d.value,"onUpdate:modelValue":n[2]||(n[2]=f=>d.value=f),align:"left"},{default:a(()=>[e(ct,{name:"main",label:"Info Akun"}),e(ct,{name:"history",label:"Riwayat Transaksi"})]),_:1},8,["modelValue"]),e(nl,{modelValue:d.value,"onUpdate:modelValue":n[3]||(n[3]=f=>d.value=f)},{default:a(()=>[e(pt,{name:"main"},{default:a(()=>[e(Ba)]),_:1}),e(pt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Fa)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1})],64)}}},Sd=Object.freeze(Object.defineProperty({__proto__:null,default:xd},Symbol.toStringTag,{value:"Module"})),Vd={style:{"margin-left":"-10px"}},qt={__name:"CheckBox",props:{modelValue:{type:[Boolean,Array],default:!1},label:{type:String,default:""},disable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(m){return(s,d)=>(v(),h("div",Vd,[e(Gt,{class:"full-width q-pl-none","model-value":m.modelValue,"onUpdate:modelValue":d[0]||(d[0]=o=>s.$emit("update:modelValue",o)),disable:m.disable,label:m.label},null,8,["model-value","disable","label"])]))}},qd={class:"q-gutter-sm"},Cd={class:"col col-md-6 q-pa-xs"},Td={__name:"Editor",setup(m){const s=ce(),d=(s.props.data.id?"Edit":"Tambah")+" Akun / Kas",o=Oe({id:s.props.data.id,name:s.props.data.name,type:s.props.data.type,bank:s.props.data.bank,number:s.props.data.number,holder:s.props.data.holder,balance:parseFloat(s.props.data.balance),active:!!s.props.data.active,has_wallet_access:!!s.props.data.has_wallet_access,show_in_pos_payment:!!s.props.data.show_in_pos_payment,show_in_purchasing_payment:!!s.props.data.show_in_purchasing_payment,notes:s.props.data.notes}),n=We(window.CONSTANTS.FINANCE_ACCOUNT_TYPES),i=()=>Fe({form:o,url:route("admin.finance-account.save")}),p=f=>{f==="cashier_cash"&&(o.show_in_pos_payment=!0)};return $e(()=>{p(o.type)}),Be(()=>o.type,f=>{p(f)}),(f,u)=>{const c=H("i-head"),_=H("authenticated-layout");return v(),h(L,null,[e(c,{title:d}),e(_,null,{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",qd,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=w=>f.$inertia.get(f.route("admin.finance-account.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Cd,[e(Re,{class:"row",onSubmit:Q(i,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":u[1]||(u[1]=w=>t(o).id=w)},null,512),[[Xe,t(o).id]]),e(le,{autofocus:"",modelValue:t(o).name,"onUpdate:modelValue":u[2]||(u[2]=w=>t(o).name=w),modelModifiers:{trim:!0},label:"Nama Akun","lazy-rules":"",error:!!t(o).errors.name,disable:t(o).processing,"error-message":t(o).errors.name,rules:[w=>w&&w.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(se,{modelValue:t(o).type,"onUpdate:modelValue":u[3]||(u[3]=w=>t(o).type=w),label:"Jenis Akun",options:t(n),"map-options":"","emit-value":"",error:!!t(o).errors.type,disable:t(o).processing,"hide-bottom-space":""},null,8,["modelValue","options","error","disable"]),t(o).type=="bank"?(v(),h(L,{key:0},[e(le,{modelValue:t(o).bank,"onUpdate:modelValue":u[4]||(u[4]=w=>t(o).bank=w),modelModifiers:{trim:!0},label:"Nama Bank","lazy-rules":"",error:!!t(o).errors.bank,disable:t(o).processing,"error-message":t(o).errors.bank,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(le,{modelValue:t(o).number,"onUpdate:modelValue":u[5]||(u[5]=w=>t(o).number=w),modelModifiers:{trim:!0},label:"Nomor Rekening","lazy-rules":"",error:!!t(o).errors.number,disable:t(o).processing,"error-message":t(o).errors.number,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(le,{modelValue:t(o).holder,"onUpdate:modelValue":u[6]||(u[6]=w=>t(o).holder=w),modelModifiers:{trim:!0},label:"Pemilik Rekening","lazy-rules":"",error:!!t(o).errors.holder,disable:t(o).processing,"error-message":t(o).errors.holder,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"])],64)):T("",!0),e(Ne,{modelValue:t(o).balance,"onUpdate:modelValue":u[7]||(u[7]=w=>t(o).balance=w),label:"Saldo",lazyRules:"",disable:t(o).processing,"allow-negative":!0,error:!!t(o).errors.balance,errorMessage:t(o).errors.balance,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(le,{modelValue:t(o).notes,"onUpdate:modelValue":u[8]||(u[8]=w=>t(o).notes=w),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:t(o).processing,error:!!t(o).errors.notes,"error-message":t(o).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(qt,{modelValue:t(o).active,"onUpdate:modelValue":u[9]||(u[9]=w=>t(o).active=w),disable:t(o).processing,label:"Aktif"},null,8,["modelValue","disable"]),u[14]||(u[14]=l("div",{class:"text-subtitle2 text-bold text-grey-8 q-pt-md"}," Opsi Lanjutan ",-1)),e(qt,{modelValue:t(o).show_in_pos_payment,"onUpdate:modelValue":u[10]||(u[10]=w=>t(o).show_in_pos_payment=w),disable:t(o).processing||t(o).type=="cashier_cash",label:"Tampilkan di Pembayaran Penjualan"},null,8,["modelValue","disable"]),e(qt,{modelValue:t(o).show_in_purchasing_payment,"onUpdate:modelValue":u[11]||(u[11]=w=>t(o).show_in_purchasing_payment=w),disable:t(o).processing,label:"Tampilkan di Pembayaran Pembelian"},null,8,["modelValue","disable"]),e(qt,{modelValue:t(o).has_wallet_access,"onUpdate:modelValue":u[12]||(u[12]=w=>t(o).has_wallet_access=w),disable:t(o).processing,label:"Tampilkan di Konfirmasi Topup Wallet"},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(o).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(o).processing,onClick:u[13]||(u[13]=w=>t(W).get(f.route("admin.finance-account.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Pd=Object.freeze(Object.defineProperty({__proto__:null,default:Td},Symbol.toStringTag,{value:"Module"})),Id={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Od={class:"q-pa-xs"},Dd={class:"q-my-sm text-subtitle"},Rd={class:"text-bold text-grey-8"},Ud={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Md={class:"text-bold text-grey-9"},Ad={class:"text-grey-9"},Ed={key:0},jd={key:1},Nd={key:0},Bd={class:"flex justify-end"},Gl="Akun Kas",Fd={__name:"Index",setup(m){const s=ce(),d=he(),o=S(!1),n=S([]),i=S(null),p=S(null),f=Ke(p,117),u=S(!0),c=Ie({search:"",status:"active",type:"all",...Ue()}),_=s.props.totalBalance,w=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),g=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"type",label:"Jenis Akun",field:"type",align:"left",sortable:!0},{name:"balance",label:"Saldo (Rp)",field:"balance",align:"right",sortable:!0},{name:"action",align:"right"}],x=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],C=[{value:"all",label:"Semua"},...We(window.CONSTANTS.FINANCE_ACCOUNT_TYPES)];$e(()=>{A()});const k=B=>Ge({message:`Hapus Akun ${B.name}?`,url:route("admin.finance-account.delete",B.id),fetchItemsCallback:A,loading:u}),A=(B=null)=>{Me({pagination:w,filter:c,props:B,rows:n,url:route("admin.finance-account.data"),loading:u,tableRef:i})},D=()=>A(),y=B=>W.get(route("admin.finance-account.detail",{id:B.id})),O=X(()=>d.screen.gt.sm?g:g.filter(B=>B.name==="name"||B.name==="action"));return(B,$)=>{const q=H("i-head"),I=H("authenticated-layout");return v(),h(L,null,[e(q,{title:Gl}),e(I,null,Ye({title:a(()=>[b(r(Gl))]),"right-button":a(()=>[e(R,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=E=>o.value=!o.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:$[1]||($[1]=E=>t(W).get(B.route("admin.finance-account.add")))})]),default:a(()=>[l("div",Od,[e(ie,{class:"full-width q-pa-sm q-mb-xs",flat:"",bordered:"",square:""},{default:a(()=>[l("div",Dd,[$[7]||($[7]=b(" Total Saldo Akun Aktif: ")),l("span",Rd,"Rp. "+r(t(K)(t(_))),1)])]),_:1}),e(Te,{ref_key:"tableRef",ref:i,class:"full-height-table",style:Ae({height:t(f)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:w.value,"onUpdate:pagination":$[6]||($[6]=E=>w.value=E),filter:c.search,loading:u.value,columns:O.value,rows:n.value,"rows-per-page-options":[10,25,50],onRequest:A,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:E,message:j,filter:P})=>[l("div",Ud,[l("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(E=>[e(qe,{props:E,class:_e([E.row.active?"":"bg-red-1","cursor-pointer"]),onClick:j=>y(E.row)},{default:a(()=>[e(F,{key:"name",props:E,class:"wrap-column"},{default:a(()=>[l("div",Md,r(E.row.name),1),l("div",Ad,[E.row.type=="bank"?(v(),h("div",Ed,[e(V,{name:"wallet",class:"inline-icon"}),b(" Rekening "+r(E.row.bank??"-")+" "+r(E.row.number??"-")+" a.n. "+r(E.row.holder??"-"),1)])):T("",!0),E.row.notes?(v(),h("div",jd,[e(V,{name:"notes"}),b(" "+r(E.row.notes),1)])):T("",!0)]),t(d).screen.lt.md?(v(),h("div",Nd,[e(V,{name:"money",class:"inline-icon"}),b(" Rp. "+r(t(K)(E.row.balance)),1)])):T("",!0)]),_:2},1032,["props"]),e(F,{key:"type",props:E},{default:a(()=>[b(r(B.$CONSTANTS.FINANCE_ACCOUNT_TYPES[E.row.type]),1)]),_:2},1032,["props"]),e(F,{key:"balance",props:E},{default:a(()=>[b(r(t(K)(E.row.balance)),1)]),_:2},1032,["props"]),e(F,{key:"action",props:E},{default:a(()=>[l("div",Bd,[e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",onClick:Q(j=>t(W).get(B.route("admin.finance-account.duplicate",E.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(M,{icon:"copy"},{default:a(()=>$[8]||($[8]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{clickable:"",onClick:Q(j=>t(W).get(B.route("admin.finance-account.edit",E.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,{icon:"edit"},{default:a(()=>$[9]||($[9]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{onClick:Q(j=>k(E.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>$[10]||($[10]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",Id,[e(se,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:c.type,"onUpdate:modelValue":[$[2]||($[2]=E=>c.type=E),D],options:C,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{class:"custom-select col-xs-6 col-sm-2",style:{"min-width":"150px"},modelValue:c.status,"onUpdate:modelValue":[$[3]||($[3]=E=>c.status=E),D],options:x,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":$[4]||($[4]=E=>c.search=E),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},zd=Object.freeze(Object.defineProperty({__proto__:null,default:Fd},Symbol.toStringTag,{value:"Module"})),Hd={class:"q-gutter-sm"},Ld={class:"col col-md-6 q-pa-xs"},Yd={class:"row"},Kd={class:"detail"},Qd={key:0},Wd={key:1},Jd={key:2},Gd={key:3},Xd={colspan:"3",class:"bg-white"},Xl="Rincian Transaksi",Zd={__name:"Detail",setup(m){const s=ce();return(d,o)=>{const n=H("i-head"),i=H("authenticated-layout");return v(),h(L,null,[e(n,{title:Xl}),e(i,{"show-drawer-button":!1},{"left-button":a(()=>[l("div",Hd,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=p=>d.$inertia.get(d.route("admin.finance-transaction.index")))})])]),title:a(()=>[l("span",{class:"text-subtitle2"},r(Xl))]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Ld,[l("div",Yd,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[19]||(o[19]=l("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Transaksi Keuangan ",-1)),l("table",Kd,[l("tbody",null,[l("tr",null,[o[1]||(o[1]=l("td",{style:{width:"110px"}},"Kode Trx",-1)),o[2]||(o[2]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.formatted_id),1)]),l("tr",null,[o[3]||(o[3]=l("td",null,"Tanggal",-1)),o[4]||(o[4]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.datetime)),1)]),t(s).props.data.account?(v(),h("tr",Qd,[o[6]||(o[6]=l("td",null,"Akun",-1)),o[7]||(o[7]=l("td",null,":",-1)),l("td",null,[b(r(t(s).props.data.account.name)+" ",1),t(s).props.data.account.type==="bank"?(v(),h(L,{key:0},[b(" Rek "+r(t(s).props.data.account.bank)+" an "+r(t(s).props.data.account.holder)+" ",1),o[5]||(o[5]=l("br",null,null,-1)),b(" "+r(t(s).props.data.account.number),1)],64)):T("",!0)])])):T("",!0),t(s).props.data.type?(v(),h("tr",Wd,[o[8]||(o[8]=l("td",null,"Jenis",-1)),o[9]||(o[9]=l("td",null,":",-1)),l("td",null,r(d.$CONSTANTS.FINANCE_TRANSACTION_TYPES[t(s).props.data.type]),1)])):T("",!0),l("tr",null,[o[10]||(o[10]=l("td",null,"Jumlah",-1)),o[11]||(o[11]=l("td",null,":",-1)),l("td",null,r(t(kt)(t(s).props.data.amount))+" Rp. "+r(t(K)(Math.abs(t(s).props.data.amount))),1)]),l("tr",null,[o[12]||(o[12]=l("td",null,"Catatan",-1)),o[13]||(o[13]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.notes),1)]),t(s).props.data.creator?(v(),h("tr",Jd,[o[14]||(o[14]=l("td",null,"Dibuat",-1)),o[15]||(o[15]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.created_at))+" oleh "+r(t(s).props.data.creator.name),1)])):T("",!0),t(s).props.data.updater?(v(),h("tr",Gd,[o[16]||(o[16]=l("td",null,"Diperbarui",-1)),o[17]||(o[17]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.updated_at))+" oleh "+r(t(s).props.data.updater.name),1)])):T("",!0),t(s).props.data.image_path?(v(),h(L,{key:4},[o[18]||(o[18]=l("tr",null,[l("td",null,"Lampiran"),l("td",null,":"),l("td")],-1)),l("tr",null,[l("td",Xd,[e(el,{src:`/${t(s).props.data.image_path}`,class:"q-mt-none",style:Ae([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):T("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},eu=Object.freeze(Object.defineProperty({__proto__:null,default:Zd},Symbol.toStringTag,{value:"Module"})),tu={class:"q-gutter-sm"},lu={class:"col col-md-6 q-pa-xs"},au={__name:"Editor",setup(m){var f;const s=ce(),d=(s.props.data.id?"Edit":"Catat")+" Transaksi Keuangan",o=s.props.accounts.map(u=>({label:u.name,value:u.id})),n=[{label:"Pemasukan (+)",value:"income"},{label:"Pengeluaran (-)",value:"expense"},{label:"Transfer",value:"transfer"}],i=Oe({id:s.props.data.id,account_id:s.props.data.account_id,to_account_id:s.props.data.to_account_id??null,type:s.props.data.type,datetime:new Date(s.props.data.datetime),notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((f=s.props.data)==null?void 0:f.image_path)??"",image:null}),p=()=>{Ht(i,{datetime:"YYYY-MM-DD HH:mm:ss"}),Fe({form:i,url:route("admin.finance-transaction.save")})};return(u,c)=>{const _=H("i-head"),w=H("authenticated-layout");return v(),h(L,null,[e(_,{title:d}),e(w,null,{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",tu,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:c[0]||(c[0]=g=>u.$inertia.get(u.route("admin.finance-transaction.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",lu,[e(Re,{class:"row",onSubmit:Q(p,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":c[1]||(c[1]=g=>t(i).id=g)},null,512),[[Xe,t(i).id]]),e(Ut,{modelValue:t(i).datetime,"onUpdate:modelValue":c[2]||(c[2]=g=>t(i).datetime=g),label:"Waktu",error:!!t(i).errors.datetime,disable:t(i).processing,errorMessage:t(i).errors.datetime,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(se,{autofocus:"",modelValue:t(i).type,"onUpdate:modelValue":c[3]||(c[3]=g=>t(i).type=g),label:"Jenis Transaksi",options:n,"map-options":"","emit-value":"",error:!!t(i).errors.type,disable:t(i).processing,errorMessage:t(i).errors.type,"hide-bottom-space":""},null,8,["modelValue","error","disable","errorMessage"]),e(se,{class:"custom-select",modelValue:t(i).account_id,"onUpdate:modelValue":c[4]||(c[4]=g=>t(i).account_id=g),label:t(i).type=="transfer"?"Akun Asal":"Akun",options:t(o),"map-options":"","emit-value":"",errorMessage:t(i).errors.account_id,error:!!t(i).errors.account_id,disable:t(i).processing,"hide-bottom-space":""},null,8,["modelValue","label","options","errorMessage","error","disable"]),t(i).type=="transfer"?(v(),N(se,{key:0,class:"custom-select",modelValue:t(i).to_account_id,"onUpdate:modelValue":c[5]||(c[5]=g=>t(i).to_account_id=g),label:"Akun Tujuan",options:t(o),"map-options":"","emit-value":"",errorMessage:t(i).errors.to_account_id,error:!!t(i).errors.to_account_id,disable:t(i).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"])):T("",!0),e(Ne,{modelValue:t(i).amount,"onUpdate:modelValue":c[6]||(c[6]=g=>t(i).amount=g),label:"Jumlah",lazyRules:"",disable:t(i).processing,error:!!t(i).errors.amount,errorMessage:t(i).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(le,{modelValue:t(i).notes,"onUpdate:modelValue":c[7]||(c[7]=g=>t(i).notes=g),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:t(i).processing,error:!!t(i).errors.notes,"error-message":t(i).errors.notes,rules:[g=>g&&g.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(yl,{modelValue:t(i).image,"onUpdate:modelValue":c[8]||(c[8]=g=>t(i).image=g),"initial-image-path":t(i).image_path,disabled:t(i).processing,error:!!t(i).errors.image||!!t(i).errors.image_path,"error-message":t(i).errors.image||t(i).errors.image_path},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(i).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(i).processing,onClick:c[9]||(c[9]=g=>t(W).get(u.route("admin.finance-transaction.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ou=Object.freeze(Object.defineProperty({__proto__:null,default:au},Symbol.toStringTag,{value:"Module"})),nu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},su={class:"q-pa-xs"},ru={class:"full-width row flex-center text-grey-8 q-gutter-sm"},iu={class:"text-grey-8"},du={class:"text-bold text-grey-8"},uu={class:"flex justify-end no-wrap"},Zl="Transaksi Kas",mu={__name:"Index",setup(m){const s=ce(),d=he(),o=S(!1),n=S([]),i=S(!0),p=S(null),f=S(null),u=Ke(f),c=Bt(),_=Ft(),w=[{label:"Semua",value:"all"},...s.props.accounts.map(j=>({label:j.name,value:j.id}))],g=[{label:"Semua Tahun",value:"all"},{label:`${c}`,value:c},...Pt(c-2,c-1).reverse()],x=[{value:"all",label:"Semua Bulan"},...It()],C=[{value:"all",label:"Semua"},...We(window.CONSTANTS.FINANCE_TRANSACTION_TYPES)],k=Ie({search:"",type:"all",account_id:"all",year:c,month:_,...Ue()}),A=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),D=[{name:"id",label:d.screen.lt.md?"Item":"Kode Trx",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{O()});const y=j=>Ge({message:`Penghapusan transaksi keuangan bisa mengakibatkan data yang saling berkaitan di modul lain tidak konsisten. Anda setuju untuk menghapus transaksi ${j.formatted_id}?`,url:route("admin.finance-transaction.delete",j.id),fetchItemsCallback:O,loading:i}),O=(j=null)=>{Me({pagination:A,filter:k,props:j,rows:n,url:route("admin.finance-transaction.data"),loading:i,tableRef:p})},B=()=>{O()},$=X(()=>d.screen.gt.sm?D:D.filter(j=>j.name==="id"||j.name==="action"));Be(()=>k.year,j=>{j===null&&(k.month=null)});const q=S(null),I=S(!1),E=j=>{q.value=j,I.value=!0};return(j,P)=>{const Z=H("i-head"),de=H("authenticated-layout");return v(),h(L,null,[e(Z,{title:Zl}),e(de,null,Ye({title:a(()=>[b(r(Zl))]),"right-button":a(()=>[e(R,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[0]||(P[0]=U=>o.value=!o.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[1]||(P[1]=U=>t(W).get(j.route("admin.finance-transaction.add")))})]),default:a(()=>[l("div",su,[e(Te,{ref_key:"tableRef",ref:p,style:Ae({height:t(u)}),class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:A.value,"onUpdate:pagination":P[8]||(P[8]=U=>A.value=U),filter:k.search,loading:i.value,columns:$.value,rows:n.value,"rows-per-page-options":[10,25,50],onRequest:O,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:U,message:z,filter:G})=>[l("div",ru,[l("span",null,r(z)+" "+r(G?" with term "+G:""),1)])]),body:a(U=>[e(qe,{props:U,class:"cursor-pointer",onClick:Q(z=>t(W).get(j.route("admin.finance-transaction.detail",{id:U.row.id})),["stop"])},{default:a(()=>[e(F,{key:"id",props:U},{default:a(()=>[l("div",null,[t(d).screen.lt.md?(v(),N(V,{key:0,class:"inline-icon",name:"tag"})):T("",!0),b(" "+r(U.row.formatted_id),1)]),t(d).screen.lt.md?(v(),h(L,{key:0},[l("div",iu,[e(V,{class:"inline-icon",name:"calendar_clock"}),b(" "+r(t(be)(U.row.datetime)),1)]),l("div",du,[e(V,{name:"wallet",class:"inline-icon"}),b(" "+r(U.row.account.name),1)]),l("div",{class:_e(["text-bold",U.row.amount<0?"text-red":"text-green"])},[e(V,{name:"money",class:"inline-icon"}),b(" "+r(t(kt)(U.row.amount)+"Rp."+t(K)(Math.abs(U.row.amount))),1)],2),U.row.notes?(v(),N(we,{key:0,icon:"notes",text:U.row.notes,class:"text-grey-8"},null,8,["text"])):T("",!0),e(st,{color:U.row.amount>0?"green":"red"},{default:a(()=>[b(r(U.row.type_label),1)]),_:2},1032,["color"])],64)):T("",!0)]),_:2},1032,["props"]),e(F,{key:"datetime",props:U,class:"wrap-column"},{default:a(()=>[b(r(t(be)(U.row.datetime)),1)]),_:2},1032,["props"]),e(F,{key:"account",props:U},{default:a(()=>{var z;return[b(r((z=U.row.account)==null?void 0:z.name),1)]}),_:2},1032,["props"]),e(F,{key:"type",props:U},{default:a(()=>[b(r(j.$CONSTANTS.FINANCE_TRANSACTION_TYPES[U.row.type]),1)]),_:2},1032,["props"]),e(F,{key:"amount",props:U,style:{"text-align":"right"}},{default:a(()=>[b(r(t(Zt)(U.row.amount)),1)]),_:2},1032,["props"]),e(F,{key:"notes",props:U,class:"wrap-column"},{default:a(()=>[b(r(U.row.notes),1)]),_:2},1032,["props"]),e(F,{key:"action",props:U},{default:a(()=>[l("div",uu,[e(R,{icon:"image",color:"primary",dense:"",flat:"",disable:U.row.image_path===null||U.row.image_path==="",onClick:Q(z=>E(U.row.image_path),["stop"])},{default:a(()=>[U.row.image_path!=null?(v(),N(zt,{key:0},{default:a(()=>P[10]||(P[10]=[b(" Lihat Bukti ")])),_:1})):T("",!0)]),_:2},1032,["disable","onClick"]),e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:P[7]||(P[7]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{onClick:Q(z=>y(U.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>P[11]||(P[11]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])]),e(tl,{modelValue:I.value,"onUpdate:modelValue":P[9]||(P[9]=U=>I.value=U),imageUrl:`/${q.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:f},{default:a(()=>[l("div",nu,[e(se,{modelValue:k.year,"onUpdate:modelValue":[P[2]||(P[2]=U=>k.year=U),B],options:g,label:"Tahun",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k.year!="all"?(v(),N(se,{key:0,modelValue:k.month,"onUpdate:modelValue":[P[3]||(P[3]=U=>k.month=U),B],options:x,label:"Bulan",dense:"",outlined:"",class:"custom-select col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:k.year===null},null,8,["modelValue","disable"])):T("",!0),e(se,{modelValue:k.type,"onUpdate:modelValue":[P[4]||(P[4]=U=>k.type=U),B],options:C,label:"Jenis",dense:"",class:"custom-select col-xs-6 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{modelValue:k.account_id,"onUpdate:modelValue":[P[5]||(P[5]=U=>k.account_id=U),B],label:"Akun",options:w,"map-options":"","emit-value":"",class:"custom-select col-xs-6 col-sm-2",outlined:"",dense:""},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:k.search,"onUpdate:modelValue":P[6]||(P[6]=U=>k.search=U),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},cu=Object.freeze(Object.defineProperty({__proto__:null,default:mu},Symbol.toStringTag,{value:"Module"})),pu={class:"q-gutter-sm"},fu={class:"col col-md-6 q-pa-xs"},gu={__name:"Editor",setup(m){const s=ce(),d=(s.props.data.id?"Edit":"Tambah")+" Kategori Operasional",o=Oe({id:s.props.data.id,name:s.props.data.name,description:s.props.data.description}),n=()=>Fe({form:o,url:route("admin.operational-cost-category.save")});return(i,p)=>{const f=H("i-head"),u=H("authenticated-layout");return v(),h(L,null,[e(f,{title:d}),e(u,null,{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",pu,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=c=>i.$goBack())})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",fu,[e(Re,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=c=>t(o).id=c)},null,512),[[Xe,t(o).id]]),e(le,{autofocus:"",modelValue:t(o).name,"onUpdate:modelValue":p[2]||(p[2]=c=>t(o).name=c),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!t(o).errors.name,disable:t(o).processing,"error-message":t(o).errors.name,rules:[c=>c&&c.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(le,{modelValue:t(o).description,"onUpdate:modelValue":p[3]||(p[3]=c=>t(o).description=c),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:t(o).processing,error:!!t(o).errors.description,"error-message":t(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(o).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(o).processing,onClick:p[4]||(p[4]=c=>t(o).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},bu=Object.freeze(Object.defineProperty({__proto__:null,default:gu},Symbol.toStringTag,{value:"Module"})),vu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},_u={class:"q-pa-xs"},yu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},wu={key:0,class:"text-grey-8"},ku={class:"flex justify-end"},ea="Kategori Biaya Operasional",hu={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=Ie({search:"",...Ue()}),c=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];$e(()=>{g()});const w=C=>Ge({message:`Hapus Kategori Biaya ${C.name}?`,url:route("admin.operational-cost-category.delete",C.id),fetchItemsCallback:g,loading:n}),g=(C=null)=>{Me({pagination:c,filter:u,props:C,rows:o,url:route("admin.operational-cost-category.data"),loading:n,tableRef:i})},x=X(()=>s.screen.gt.sm?_:_.filter(C=>C.name==="name"||C.name==="action"));return(C,k)=>{const A=H("i-head"),D=H("authenticated-layout");return v(),h(L,null,[e(A,{title:ea}),e(D,null,Ye({title:a(()=>[b(r(ea))]),"right-button":a(()=>[e(R,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:k[0]||(k[0]=y=>d.value=!d.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:k[1]||(k[1]=y=>t(W).get(C.route("admin.operational-cost-category.add")))})]),default:a(()=>[l("div",_u,[e(Te,{ref_key:"tableRef",ref:i,class:"full-height-table",style:Ae({height:t(f)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":k[4]||(k[4]=y=>c.value=y),filter:u.search,loading:n.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:O,filter:B})=>[l("div",yu,[l("span",null,r(O)+" "+r(B?" with term "+B:""),1)])]),body:a(y=>[e(qe,{props:y},{default:a(()=>[e(F,{key:"name",props:y,class:"wrap-column"},{default:a(()=>[b(r(y.row.name)+" ",1),t(s).screen.gt.sm?T("",!0):(v(),h(L,{key:0},[y.row.description?(v(),h("div",wu,[e(V,{name:"description"}),b(" "+r(y.row.description),1)])):T("",!0)],64))]),_:2},1032,["props"]),e(F,{key:"description",props:y,class:"wrap-column"},{default:a(()=>[b(r(y.row.description),1)]),_:2},1032,["props"]),e(F,{key:"action",props:y},{default:a(()=>[l("div",ku,[e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:k[3]||(k[3]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",onClick:Q(O=>t(W).get(C.route("admin.operational-cost-category.duplicate",y.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(M,{icon:"copy"},{default:a(()=>k[5]||(k[5]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{clickable:"",onClick:Q(O=>t(W).get(C.route("admin.operational-cost-category.edit",y.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,{icon:"edit"},{default:a(()=>k[6]||(k[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{onClick:Q(O=>w(y.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>k[7]||(k[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",vu,[e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":k[2]||(k[2]=y=>u.search=y),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},$u=Object.freeze(Object.defineProperty({__proto__:null,default:hu},Symbol.toStringTag,{value:"Module"})),xu={class:"q-gutter-sm"},Su={class:"col col-md-6 q-pa-xs"},Vu={class:"row"},qu={class:"detail"},Cu={key:0},Tu={key:1},Pu={key:2},Iu={key:3},Ou={colspan:"3",class:"bg-white"},ta="Rincian Biaya Operasional",Du={__name:"Detail",setup(m){const s=ce();return(d,o)=>{const n=H("i-head"),i=H("authenticated-layout");return v(),h(L,null,[e(n,{title:ta}),e(i,{"show-drawer-button":!1},{"left-button":a(()=>[l("div",xu,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=p=>d.$inertia.get(d.route("admin.operational-cost.index")))})])]),title:a(()=>[l("span",{class:"text-subtitle2"},r(ta))]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Su,[l("div",Vu,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[21]||(o[21]=l("div",{class:"text-subtitle1 text-bold text-grey-8"}," Rincian Biaya Operasional ",-1)),l("table",qu,[l("tbody",null,[l("tr",null,[o[1]||(o[1]=l("td",{style:{width:"110px"}},"ID",-1)),o[2]||(o[2]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.id),1)]),l("tr",null,[o[3]||(o[3]=l("td",null,"Tanggal",-1)),o[4]||(o[4]=l("td",null,":",-1)),l("td",null,r(t(Qt)(t(s).props.data.date)),1)]),t(s).props.data.finance_account?(v(),h("tr",Cu,[o[6]||(o[6]=l("td",null,"Akun",-1)),o[7]||(o[7]=l("td",null,":",-1)),l("td",null,[b(r(t(s).props.data.finance_account.name)+" ",1),t(s).props.data.finance_account.type==="bank"?(v(),h(L,{key:0},[b(" Rek "+r(t(s).props.data.finance_account.bank)+" an "+r(t(s).props.data.finance_account.holder)+" ",1),o[5]||(o[5]=l("br",null,null,-1)),b(" "+r(t(s).props.data.finance_account.number),1)],64)):T("",!0)])])):T("",!0),t(s).props.data.category?(v(),h("tr",Tu,[o[8]||(o[8]=l("td",null,"Kategori",-1)),o[9]||(o[9]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.category.name),1)])):T("",!0),l("tr",null,[o[10]||(o[10]=l("td",null,"Deskripsi",-1)),o[11]||(o[11]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.description),1)]),l("tr",null,[o[12]||(o[12]=l("td",null,"Jumlah",-1)),o[13]||(o[13]=l("td",null,":",-1)),l("td",null,"Rp. "+r(t(K)(t(s).props.data.amount)),1)]),l("tr",null,[o[14]||(o[14]=l("td",null,"Catatan",-1)),o[15]||(o[15]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.notes),1)]),t(s).props.data.creator?(v(),h("tr",Pu,[o[16]||(o[16]=l("td",null,"Dibuat",-1)),o[17]||(o[17]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.created_at))+" oleh "+r(t(s).props.data.creator.name),1)])):T("",!0),t(s).props.data.updater?(v(),h("tr",Iu,[o[18]||(o[18]=l("td",null,"Diperbarui",-1)),o[19]||(o[19]=l("td",null,":",-1)),l("td",null,r(t(be)(t(s).props.data.updated_at))+" oleh "+r(t(s).props.data.updater.name),1)])):T("",!0),t(s).props.data.image_path?(v(),h(L,{key:4},[o[20]||(o[20]=l("tr",null,[l("td",null,"Lampiran"),l("td",null,":"),l("td")],-1)),l("tr",null,[l("td",Ou,[e(el,{src:`/${t(s).props.data.image_path}`,class:"q-mt-none",style:Ae([{"max-width":"500px"},{border:"1px solid #ddd"}])},null,8,["src"])])])],64)):T("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Ru=Object.freeze(Object.defineProperty({__proto__:null,default:Du},Symbol.toStringTag,{value:"Module"})),Uu={class:"row items-center justify-end"},Mu={__name:"DatePicker",props:{modelValue:{type:[Date,null],required:!1,default:null},label:String,readonly:Boolean,disable:Boolean,error:Boolean,errorMessage:String,rules:{type:Array,default:()=>[]},minDate:{type:[Date,null],default:null},maxDate:{type:[Date,null],default:null},displayFormat:{type:String,default:"DD/MM/YYYY"}},emits:["update:modelValue"],setup(m,{emit:s}){const d=m,o=s,n=S(""),i=S(""),p=c=>{let _=!0;const w=d.minDate?at.formatDate(d.minDate,"YYYY/MM/DD"):null,g=d.maxDate?at.formatDate(d.maxDate,"YYYY/MM/DD"):null;return w&&(_=_&&at.isBetweenDates(c,w,"2999/01/01",{inclusiveFrom:!0})),g&&(_=_&&at.isBetweenDates(c,"1900/01/01",g,{inclusiveTo:!0})),_},f=X(()=>[c=>!!c||"Tanggal harus diisi",c=>{const _=at.extractDate(c,d.displayFormat);if(!_)return"Format tanggal tidak valid";_.setHours(0,0,0,0);const w=d.minDate?new Date(d.minDate):null;w&&w.setHours(0,0,0,0);const g=d.maxDate?new Date(d.maxDate):null;return g&&g.setHours(0,0,0,0),w&&_<w?`Tanggal tidak boleh kurang dari ${at.formatDate(d.minDate,d.displayFormat)}`:g&&_>g?`Tanggal tidak boleh lebih dari ${at.formatDate(d.maxDate,d.displayFormat)}`:(o("update:modelValue",_),!0)}]);Be(()=>d.modelValue,c=>{c instanceof Date?(i.value=at.formatDate(c,"YYYY/MM/DD"),n.value=at.formatDate(c,d.displayFormat)):(i.value="",n.value="")},{immediate:!0});const u=c=>{const _=c!==null?new Date(c):null;o("update:modelValue",_),n.value=_?at.formatDate(_,d.displayFormat):null};return(c,_)=>(v(),N(le,{modelValue:n.value,"onUpdate:modelValue":_[1]||(_[1]=w=>n.value=w),label:d.label,readonly:d.readonly,disable:d.disable,error:d.error,"error-message":d.errorMessage,mask:d.displayFormat.replaceAll("D","#").replaceAll("M","#").replaceAll("Y","#"),rules:f.value},{append:a(()=>[e(V,{name:"event",class:"cursor-pointer"},{default:a(()=>[e(Wo,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Jo,{modelValue:i.value,"onUpdate:modelValue":[_[0]||(_[0]=w=>i.value=w),u],options:p},{default:a(()=>[l("div",Uu,[J(e(R,{label:"Close",color:"primary",flat:""},null,512),[[re]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label","readonly","disable","error","error-message","mask","rules"]))}},za=ft(Mu,[["__scopeId","data-v-38faf9a9"]]);function Ha(m,s=!1){const d=m.map(p=>({value:p.id,label:p.name})),o=s?[{value:"all",label:"Semua"},...d]:d,n=S([...o]);return{filteredCostCategories:n,filterCostCategory:(p,f)=>{const u=p.toLowerCase();f(()=>{n.value=o.filter(c=>c.label.toLowerCase().includes(u))})},costCategoryOptions:o}}const Au={class:"q-gutter-sm"},Eu={class:"col col-md-6 q-pa-xs"},ju={__name:"Editor",setup(m){var w;const s=ce(),d=(s.props.data.id?"Edit":"Tambah")+" Biaya Operasional",{costCategoryOptions:o}=Ha(s.props.categories),n=s.props.finance_accounts.map(g=>({label:g.name,value:g.id})),i=S(o),p=S([...i.value]),f=Oe({id:s.props.data.id,finance_account_id:s.props.data.finance_account_id??null,category_id:s.props.data.category_id??null,date:new Date(s.props.data.date),description:s.props.data.description,notes:s.props.data.notes,amount:parseFloat(s.props.data.amount),image_path:((w=s.props.data)==null?void 0:w.image_path)??null,image:null}),u=()=>{Ht(f,{date:"YYYY-MM-DD"}),Fe({form:f,url:route("admin.operational-cost.save")})},c=(g,x)=>{x(()=>{p.value=i.value.filter(C=>C.label.toLowerCase().includes(g.toLowerCase()))})},_=()=>{f.image_path=null};return(g,x)=>{const C=H("i-head"),k=H("authenticated-layout");return v(),h(L,null,[e(C,{title:d}),e(k,null,{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",Au,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:x[0]||(x[0]=A=>g.$inertia.get(g.route("admin.operational-cost.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Eu,[e(Re,{class:"row",onSubmit:Q(u,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":x[1]||(x[1]=A=>t(f).id=A)},null,512),[[Xe,t(f).id]]),e(se,{autofocus:"",modelValue:t(f).category_id,"onUpdate:modelValue":x[2]||(x[2]=A=>t(f).category_id=A),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:p.value,"map-options":"","emit-value":"",onFilter:c,error:!!t(f).errors.category_id,disable:t(f).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ee,null,{default:a(()=>[e(M,null,{default:a(()=>x[10]||(x[10]=[b("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","disable"]),e(za,{modelValue:t(f).date,"onUpdate:modelValue":x[3]||(x[3]=A=>t(f).date=A),label:"Tanggal",error:!!t(f).errors.date,disable:t(f).processing,"hide-bottom-space":""},null,8,["modelValue","error","disable"]),e(le,{modelValue:t(f).description,"onUpdate:modelValue":x[4]||(x[4]=A=>t(f).description=A),modelModifiers:{trim:!0},label:"Deskripsi","lazy-rules":"",error:!!t(f).errors.description,disable:t(f).processing,"error-message":t(f).errors.description,rules:[A=>A&&A.length>0||"Deskripsi harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(Ne,{modelValue:t(f).amount,"onUpdate:modelValue":x[5]||(x[5]=A=>t(f).amount=A),label:"Jumlah",lazyRules:"",disable:t(f).processing,error:!!t(f).errors.amount,errorMessage:t(f).errors.amount,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(se,{class:"custom-select",modelValue:t(f).finance_account_id,"onUpdate:modelValue":x[6]||(x[6]=A=>t(f).finance_account_id=A),label:"Sumber Dana",options:t(n),"map-options":"","emit-value":"",clearable:"",errorMessage:t(f).errors.finance_account_id,error:!!t(f).errors.finance_account_id,disable:t(f).processing,"hide-bottom-space":""},null,8,["modelValue","options","errorMessage","error","disable"]),e(le,{modelValue:t(f).notes,"onUpdate:modelValue":x[7]||(x[7]=A=>t(f).notes=A),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:t(f).processing,error:!!t(f).errors.notes,"error-message":t(f).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(yl,{modelValue:t(f).image,"onUpdate:modelValue":x[8]||(x[8]=A=>t(f).image=A),"initial-image-path":t(f).image_path,disabled:t(f).processing,error:!!t(f).errors.image||!!t(f).errors.image_path,"error-message":t(f).errors.image||t(f).errors.image_path,onImageCleared:_},null,8,["modelValue","initial-image-path","disabled","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(f).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(f).processing,onClick:x[9]||(x[9]=A=>t(W).get(g.route("admin.operational-cost.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Nu=Object.freeze(Object.defineProperty({__proto__:null,default:ju},Symbol.toStringTag,{value:"Module"})),Bu={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Fu={class:"q-pa-xs"},zu={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Hu={key:0},Lu={key:1},Yu={key:0},Ku={class:"flex justify-end no-wrap"},la="Biaya Operasional",Qu={__name:"Index",setup(m){const s=ce(),d=he(),o=S(!1),n=S(null),i=S(null),p=Ke(i),f=S(null),u=S(!1),c=S([]),_=S(!0),w=new Date().getFullYear(),g=new Date().getMonth()+1,x=[{label:"Semua Tahun",value:null},{label:`${w}`,value:w},...Pt(w-2,w-1).reverse()],C=[{value:null,label:"Semua Bulan"},...It()],{costCategoryOptions:k}=Ha(s.props.categories),A=[{value:"all",label:"Semua"},{value:null,label:"Tanpa Kategori"},...k],{accountOptions:D}=Go(s.props.finance_accounts),y=[{value:"all",label:"Semua"},{value:null,label:"Tidak Diset"},...D],O=Ie({search:"",category_id:"all",year:w,month:g,...Ue()}),B=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),$=[{name:"id",label:d.screen.lt.md?"Item":"ID",field:"id",align:"left",sortable:!0},{name:"date",label:"Tanggal",field:"date",align:"left",sortable:!0},{name:"account_id",label:"Akun",field:"account_id",align:"left",sortable:!0},{name:"category_id",label:"Kategori",field:"category_id",align:"left",sortable:!0},{name:"description",label:"Deskripsi",field:"description",align:"left",sortable:!0},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right",sortable:!0},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"action",align:"right"}];$e(()=>{I()});const q=Z=>Ge({message:`Hapus Biaya ${Z.description}?`,url:route("admin.operational-cost.delete",Z.id),fetchItemsCallback:I,loading:_}),I=(Z=null)=>{Me({pagination:B,filter:O,props:Z,rows:c,url:route("admin.operational-cost.data"),loading:_,tableRef:n})},E=()=>{I()},j=X(()=>d.screen.gt.sm?$:$.filter(Z=>Z.name==="id"||Z.name==="action"));Be(()=>O.year,Z=>{Z===null&&(O.month=null)});const P=Z=>{f.value=Z,u.value=!0};return(Z,de)=>{const U=H("i-head"),z=H("authenticated-layout");return v(),h(L,null,[e(U,{title:la}),e(z,null,Ye({title:a(()=>[b(r(la))]),"right-button":a(()=>[e(R,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:de[0]||(de[0]=G=>o.value=!o.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:de[1]||(de[1]=G=>t(W).get(Z.route("admin.operational-cost.add")))})]),default:a(()=>[l("div",Fu,[e(Te,{ref_key:"tableRef",ref:n,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:B.value,"onUpdate:pagination":de[8]||(de[8]=G=>B.value=G),filter:O.search,loading:_.value,columns:j.value,rows:c.value,"rows-per-page-options":[10,25,50],style:Ae({height:t(p)}),onRequest:I,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:G,message:Ce,filter:ae})=>[l("div",zu,[l("span",null,r(Ce)+" "+r(ae?" with term "+ae:""),1)])]),body:a(G=>[e(qe,{props:G,class:"cursor-pointer",onClick:Q(Ce=>t(W).get(Z.route("admin.operational-cost.detail",{id:G.row.id})),["stop"])},{default:a(()=>[e(F,{key:"id",props:G,class:"wrap-column"},{default:a(()=>[t(d).screen.gt.sm?T("",!0):(v(),h(L,{key:0},[b(" ID: ")],64)),b(" "+r(G.row.id)+" ",1),t(d).screen.gt.sm?T("",!0):(v(),h(L,{key:1},[l("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(t(Qt)(G.row.date)),1)]),G.row.finance_account?(v(),h("div",Hu,[e(V,{name:"wallet",class:"inline-icon"}),b(" "+r(G.row.finance_account.name),1)])):T("",!0),G.row.category?(v(),h("div",Lu,[e(V,{name:"category",class:"inline-icon"}),b(" "+r(G.row.category.name),1)])):T("",!0),e(we,{icon:"description",text:G.row.description,class:"inline-icon"},null,8,["text"]),l("div",null,[e(V,{name:"money",class:"inline-icon"}),b(" Rp. "+r(t(K)(G.row.amount)),1)]),e(we,{icon:"notes",text:G.row.notes,class:"inline-icon text-grey-9"},null,8,["text"])],64))]),_:2},1032,["props"]),e(F,{key:"date",props:G,class:"wrap-column"},{default:a(()=>[b(r(t(Qt)(G.row.date)),1)]),_:2},1032,["props"]),e(F,{key:"account_id",props:G,class:"wrap-column"},{default:a(()=>[b(r(G.row.finance_account?G.row.finance_account.name:""),1)]),_:2},1032,["props"]),e(F,{key:"category_id",props:G},{default:a(()=>[G.row.category?(v(),h("div",Yu,r(G.row.category.name),1)):T("",!0)]),_:2},1032,["props"]),e(F,{key:"description",props:G},{default:a(()=>[e(we,{text:G.row.description,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(F,{key:"amount",props:G},{default:a(()=>[b(r(t(K)(G.row.amount)),1)]),_:2},1032,["props"]),e(F,{key:"notes",props:G},{default:a(()=>[e(we,{text:G.row.notes,"max-length":50},null,8,["text"])]),_:2},1032,["props"]),e(F,{key:"action",props:G},{default:a(()=>[l("div",Ku,[e(R,{icon:"image",color:"primary",dense:"",flat:"",disable:G.row.image_path===null||G.row.image_path==="",onClick:Q(Ce=>P(G.row.image_path),["stop"])},{default:a(()=>[G.row.image_path!=null?(v(),N(zt,{key:0},{default:a(()=>de[10]||(de[10]=[b(" Lihat Bukti ")])),_:1})):T("",!0)]),_:2},1032,["disable","onClick"]),e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:de[7]||(de[7]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",onClick:Q(Ce=>t(W).get(Z.route("admin.operational-cost.duplicate",G.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(M,{icon:"copy"},{default:a(()=>de[11]||(de[11]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{clickable:"",onClick:Q(Ce=>t(W).get(Z.route("admin.operational-cost.edit",G.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,{icon:"edit"},{default:a(()=>de[12]||(de[12]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{onClick:Q(Ce=>q(G.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>de[13]||(de[13]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])]),e(tl,{modelValue:u.value,"onUpdate:modelValue":de[9]||(de[9]=G=>u.value=G),imageUrl:`/${f.value}`},null,8,["modelValue","imageUrl"])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:i},{default:a(()=>[l("div",Bu,[e(se,{modelValue:O.year,"onUpdate:modelValue":[de[2]||(de[2]=G=>O.year=G),E],options:x,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{modelValue:O.month,"onUpdate:modelValue":[de[3]||(de[3]=G=>O.month=G),E],options:C,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:O.year===null},null,8,["modelValue","disable"]),e(se,{modelValue:O.category_id,"onUpdate:modelValue":[de[4]||(de[4]=G=>O.category_id=G),E],options:A,label:"Kategori",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{modelValue:O.finance_account_id,"onUpdate:modelValue":[de[5]||(de[5]=G=>O.finance_account_id=G),E],options:y,label:"Akun Kas",dense:"",class:"custom-select col-xs-12 col-sm-3","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:O.search,"onUpdate:modelValue":de[6]||(de[6]=G=>O.search=G),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wu=Object.freeze(Object.defineProperty({__proto__:null,default:Qu},Symbol.toStringTag,{value:"Module"})),Ju={class:"q-gutter-sm"},Gu={class:"col col-md-6 q-pa-xs"},Xu={__name:"Editor",setup(m){const s=he(),d=ce(),o=(d.props.data.id?"Edit":"Tambah")+" Kategori Produk",n=Oe({id:d.props.data.id,name:d.props.data.name,description:d.props.data.description}),i=()=>Fe({form:n,url:route("admin.product-category.save")});return(p,f)=>{const u=H("i-head"),c=H("authenticated-layout");return v(),h(L,null,[e(u,{title:o}),e(c,{"show-drawer-button":!t(s).screen.lt.md},Ye({title:a(()=>[b(r(o))]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Gu,[e(Re,{class:"row",onSubmit:Q(i,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=_=>t(n).id=_)},null,512),[[Xe,t(n).id]]),e(le,{autofocus:"",modelValue:t(n).name,"onUpdate:modelValue":f[2]||(f[2]=_=>t(n).name=_),modelModifiers:{trim:!0},label:"Nama Kategori","lazy-rules":"",error:!!t(n).errors.name,disable:t(n).processing,"error-message":t(n).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(le,{modelValue:t(n).description,"onUpdate:modelValue":f[3]||(f[3]=_=>t(n).description=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:t(n).processing,error:!!t(n).errors.description,"error-message":t(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(n).processing,loading:t(n).processing},null,8,["disable","loading"]),e(R,{icon:"cancel",label:"Batal",disable:t(n).processing,onClick:f[4]||(f[4]=_=>t(n).reset())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:2},[t(s).screen.lt.md?{name:"left-button",fn:a(()=>[l("div",Ju,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=_=>p.$goBack())})])]),key:"0"}:void 0]),1032,["show-drawer-button"])],64)}}},Zu=Object.freeze(Object.defineProperty({__proto__:null,default:Xu},Symbol.toStringTag,{value:"Module"})),em={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},tm={class:"q-pa-xs"},lm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},am={key:0,class:"text-grey-8"},om={class:"flex justify-end"},aa="Kategori Produk",nm={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=Ie({search:"",...Ue()}),c=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"name",label:"Nama Kategori",field:"name",align:"left",sortable:!0},{name:"description",label:"Catatan",field:"description",align:"left"},{name:"action",align:"right"}];$e(()=>{g()});const w=C=>Ge({message:`Hapus Kategori ${C.name}?`,url:route("admin.product-category.delete",C.id),fetchItemsCallback:g,loading:n}),g=(C=null)=>{Me({pagination:c,filter:u,props:C,rows:o,url:route("admin.product-category.data"),loading:n,tableRef:i})},x=X(()=>s.screen.gt.sm?_:_.filter(C=>C.name==="name"||C.name==="action"));return(C,k)=>{const A=H("i-head"),D=H("authenticated-layout");return v(),h(L,null,[e(A,{title:aa}),e(D,null,Ye({title:a(()=>[b(r(aa))]),"right-button":a(()=>[e(R,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:k[0]||(k[0]=y=>d.value=!d.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:k[1]||(k[1]=y=>t(W).get(C.route("admin.product-category.add")))})]),default:a(()=>[l("div",tm,[e(Te,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":k[4]||(k[4]=y=>c.value=y),filter:u.search,loading:n.value,columns:x.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ae({height:t(f)}),onRequest:g,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:y,message:O,filter:B})=>[l("div",lm,[l("span",null,r(O)+" "+r(B?" with term "+B:""),1)])]),body:a(y=>[e(qe,{props:y},{default:a(()=>[e(F,{key:"name",props:y,class:"wrap-column"},{default:a(()=>[b(r(y.row.name)+" ",1),t(s).screen.gt.sm?T("",!0):(v(),h(L,{key:0},[y.row.description?(v(),h("div",am,[e(V,{name:"description"}),b(" "+r(y.row.description),1)])):T("",!0)],64))]),_:2},1032,["props"]),e(F,{key:"description",props:y,class:"wrap-column"},{default:a(()=>[b(r(y.row.description),1)]),_:2},1032,["props"]),e(F,{key:"action",props:y},{default:a(()=>[l("div",om,[e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:k[3]||(k[3]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",onClick:Q(O=>t(W).get(C.route("admin.product-category.duplicate",y.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(M,{icon:"copy"},{default:a(()=>k[5]||(k[5]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{clickable:"",onClick:Q(O=>t(W).get(C.route("admin.product-category.edit",y.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,{icon:"edit"},{default:a(()=>k[6]||(k[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{onClick:Q(O=>w(y.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>k[7]||(k[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",em,[e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":k[2]||(k[2]=y=>u.search=y),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},sm=Object.freeze(Object.defineProperty({__proto__:null,default:nm},Symbol.toStringTag,{value:"Module"})),rm={class:"detail"},im={key:0},dm={key:1},um={key:2},mm={class:"detail"},cm={class:"detail"},pm={key:0},fm={key:0},gm={key:0},bm={key:0},vm={class:"detail"},La={__name:"MainInfoTab",props:{product:{type:Object,required:!0}},setup(m){const s=m;he();const d=o=>`${o>0?K((o-s.product.cost)/o*100,2):0}%`;return(o,n)=>{const i=H("i-link");return v(),h("div",null,[n[42]||(n[42]=l("div",{class:"text-subtitle1 text-bold text-grey-9"},"Info Produk",-1)),l("table",rm,[l("tbody",null,[l("tr",null,[n[0]||(n[0]=l("td",{style:{width:"120px"}},"ID",-1)),n[1]||(n[1]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,"# "+r(m.product.id),1)]),l("tr",null,[n[2]||(n[2]=l("td",null,"Nama Produk",-1)),n[3]||(n[3]=l("td",null,":",-1)),l("td",null,r(m.product.name),1)]),l("tr",null,[n[4]||(n[4]=l("td",null,"Barcode",-1)),n[5]||(n[5]=l("td",null,":",-1)),l("td",null,r(m.product.barcode),1)]),l("tr",null,[n[6]||(n[6]=l("td",null,"Jenis Produk",-1)),n[7]||(n[7]=l("td",null,":",-1)),l("td",null,r(o.$CONSTANTS.PRODUCT_TYPES[m.product.type]),1)]),l("tr",null,[n[8]||(n[8]=l("td",null,"Kategori",-1)),n[9]||(n[9]=l("td",null,":",-1)),l("td",null,r(m.product.category?m.product.category.name:"--Tidak memiliki kategori--"),1)]),o.$can("admin.product:view-supplier")?(v(),h("tr",im,[n[10]||(n[10]=l("td",null,"Supplier",-1)),n[11]||(n[11]=l("td",null,":",-1)),l("td",null,[m.product.supplier?(v(),N(i,{key:0,href:o.route("admin.supplier.detail",{id:m.product.supplier.id})},{default:a(()=>[b(r("#"+m.product.supplier.id+" - "+m.product.supplier.name),1)]),_:1},8,["href"])):(v(),h(L,{key:1},[b(r("--Tidak memiliki supplier--"))],64))])])):T("",!0),l("tr",null,[n[12]||(n[12]=l("td",null,"Status",-1)),n[13]||(n[13]=l("td",null,":",-1)),l("td",null,r(m.product.active?"Aktif":"Tidak Aktif"),1)]),m.product.created_at?(v(),h("tr",dm,[n[15]||(n[15]=l("td",null,"Dibuat Oleh",-1)),n[16]||(n[16]=l("td",null,":",-1)),l("td",null,[m.product.creator?(v(),h(L,{key:0},[e(i,{href:o.route("admin.user.detail",{id:m.product.creator})},{default:a(()=>[b(r(m.product.creator.username),1)]),_:1},8,["href"]),n[14]||(n[14]=b(" - "))],64)):T("",!0),b(" "+r(t(be)(m.product.created_at)),1)])])):T("",!0),m.product.updater?(v(),h("tr",um,[n[18]||(n[18]=l("td",null,"Diperbarui oleh",-1)),n[19]||(n[19]=l("td",null,":",-1)),l("td",null,[m.product.updater?(v(),h(L,{key:0},[e(i,{href:o.route("admin.user.detail",{id:m.product.updater})},{default:a(()=>[b(r(m.product.updater.username),1)]),_:1},8,["href"]),n[17]||(n[17]=b(" - "))],64)):T("",!0),b(" "+r(t(be)(m.product.updated_at)),1)])])):T("",!0)])]),n[43]||(n[43]=l("div",{class:"text-subtitle1 q-pt-lg text-bold text-grey-9"}," Info Inventori ",-1)),l("table",mm,[l("tbody",null,[l("tr",null,[n[20]||(n[20]=l("td",{style:{width:"120px"}},"Stok",-1)),n[21]||(n[21]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(K)(m.product.stock))+" "+r(m.product.uom),1)]),l("tr",null,[n[22]||(n[22]=l("td",null,"Stok Minimum",-1)),n[23]||(n[23]=l("td",null,":",-1)),l("td",null,r(t(K)(m.product.min_stock))+" "+r(m.product.uom),1)]),l("tr",null,[n[24]||(n[24]=l("td",null,"Stok Maksimum",-1)),n[25]||(n[25]=l("td",null,":",-1)),l("td",null,r(t(K)(m.product.max_stock))+" "+r(m.product.uom),1)]),l("tr",null,[n[26]||(n[26]=l("td",null,"Barcode",-1)),n[27]||(n[27]=l("td",null,":",-1)),l("td",null,r(m.product.barcode),1)])])]),n[44]||(n[44]=l("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"},"Info Harga",-1)),l("table",cm,[l("tbody",null,[l("tr",null,[n[28]||(n[28]=l("td",null,"Opsi Harga",-1)),n[29]||(n[29]=l("td",null,":",-1)),l("td",null,r(m.product.price_editable?"Dapat":"Tidak dapat")+" diubah saat penjualan. ",1)]),o.$can("admin.product:view-cost")?(v(),h("tr",pm,[n[30]||(n[30]=l("td",{style:{width:"120px"}},"Harga Beli",-1)),n[31]||(n[31]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,"Rp. "+r(t(K)(m.product.cost)),1)])):T("",!0),l("tr",null,[n[32]||(n[32]=l("td",null,"Harga Eceran",-1)),n[33]||(n[33]=l("td",null,":",-1)),l("td",null,[b(" Rp. "+r(t(K)(m.product.price))+" ",1),o.$can("admin.product:view-cost")?(v(),h("span",fm," ("+r(d(m.product.price))+") ",1)):T("",!0)])]),l("tr",null,[n[34]||(n[34]=l("td",null,"Harga Partai",-1)),n[35]||(n[35]=l("td",null,":",-1)),l("td",null,[b(" Rp. "+r(t(K)(m.product.price_2))+" ",1),o.$can("admin.product:view-cost")?(v(),h("span",gm," ("+r(d(m.product.price_2))+") ",1)):T("",!0)])]),l("tr",null,[n[36]||(n[36]=l("td",null,"Harga Grosir",-1)),n[37]||(n[37]=l("td",null,":",-1)),l("td",null,[b(" Rp. "+r(t(K)(m.product.price_3))+" ",1),o.$can("admin.product:view-cost")?(v(),h("span",bm," ("+r(d(m.product.price_3))+") ",1)):T("",!0)])])])]),n[45]||(n[45]=l("div",{class:"text-subtitle1 q-pt-md text-bold text-grey-9"}," Info Deskripsi & Catatan ",-1)),l("table",vm,[l("tbody",null,[l("tr",null,[n[38]||(n[38]=l("td",{style:{width:"120px"}},"Deskirpsi",-1)),n[39]||(n[39]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(m.product.description),1)]),l("tr",null,[n[40]||(n[40]=l("td",null,"Catatan",-1)),n[41]||(n[41]=l("td",null,":",-1)),l("td",null,r(m.product.notes),1)])])])])}}},_m=Object.freeze(Object.defineProperty({__proto__:null,default:La},Symbol.toStringTag,{value:"Module"})),ym={class:"full-width row flex-center text-grey-8 q-gutter-sm"},wm={key:0},Ya={__name:"StockHistoryTab",props:{productId:{type:[String,Number],required:!0}},setup(m){const s=m,d=he(),o=S([]),n=S(!0),i=Ie({...Ue()}),p=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let f=[{name:"id",label:d.screen.lt.sm?"Item":"#",field:"id",align:"left",sortable:!0},{name:"created_at",label:"Waktu",field:"created_at",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"quantity_before",label:"Qty Awal",field:"quantity_before",align:"right"},{name:"quantity_after",label:"Qty Akhir",field:"quantity_after",align:"right"},{name:"quantity",label:"Selisih",field:"quantity",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{u()});const u=(_=null)=>Me({pagination:p,filter:i,props:_,rows:o,url:route("admin.stock-movement.data",{product_id:s.productId}),loading:n}),c=X(()=>d.screen.gt.sm?f:f.filter(_=>_.name==="id"||_.name==="quantity"));return(_,w)=>(v(),N(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table full-height-table2","row-key":"id","virtual-scroll":"",pagination:p.value,"onUpdate:pagination":w[0]||(w[0]=g=>p.value=g),filter:i.search,loading:n.value,columns:c.value,rows:o.value,"rows-per-page-options":[10,25,50],onRequest:u,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:g,message:x,filter:C})=>[l("div",ym,[l("span",null,r(x)+" "+r(C?" with term "+C:""),1)])]),body:a(g=>[e(qe,{props:g},{default:a(()=>[e(F,{key:"id",props:g},{default:a(()=>[l("div",null,[t(d).screen.lt.sm?(v(),h(L,{key:0},[l("div",null,[e(st,null,{default:a(()=>[b(r(_.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[g.row.ref_type]),1)]),_:2},1024)]),e(V,{class:"inline-icon",name:"tag"})],64)):T("",!0),b(" "+r(g.row.formatted_id),1)]),t(d).screen.lt.sm?(v(),h(L,{key:0},[l("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(t(be)(g.row.created_at)),1)]),l("div",{class:_e(g.row.quantity>0?"text-positive":"text-negative")},[e(V,{class:"inline-icon",name:"compare_arrows"}),b(" "+r(t(K)(g.row.quantity_before))+" "+r(g.row.uom)+" → "+r(t(K)(g.row.quantity_after))+" "+r(g.row.uom),1)],2),e(we,{text:g.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):T("",!0)]),_:2},1032,["props"]),e(F,{key:"created_at",props:g},{default:a(()=>[b(r(t(be)(g.row.created_at)),1)]),_:2},1032,["props"]),e(F,{key:"type",props:g},{default:a(()=>[b(r(_.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[g.row.ref_type])+" ",1),g.row.ref?(v(),h("span",wm,r(g.row.ref),1)):T("",!0)]),_:2},1032,["props"]),e(F,{key:"quantity_before",props:g},{default:a(()=>[b(r(t(K)(g.row.quantity_before))+" "+r(g.row.uom),1)]),_:2},1032,["props"]),e(F,{key:"quantity_after",props:g},{default:a(()=>[b(r(t(K)(g.row.quantity_after))+" "+r(g.row.uom),1)]),_:2},1032,["props"]),e(F,{key:"quantity",props:g,class:_e(g.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[b(r(t(K)(g.row.quantity))+" "+r(g.row.uom),1)]),_:2},1032,["props","class"]),e(F,{key:"notes",props:g},{default:a(()=>[e(we,{text:g.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows"]))}},km=Object.freeze(Object.defineProperty({__proto__:null,default:Ya},Symbol.toStringTag,{value:"Module"})),hm={class:"q-gutter-sm"},$m={class:"q-gutter-sm"},xm={class:"row justify-center"},Sm={class:"col col-lg-6 q-pa-xs"},Vm={class:"row"},qm={__name:"Detail",setup(m){const s=ce(),d=`Rincian Produk #${s.props.data.id}`,o=S("main");return(n,i)=>{const p=H("i-head"),f=H("authenticated-layout");return v(),h(L,null,[e(p,{title:d}),e(f,{"show-drawer-button":!1},{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",hm,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:i[0]||(i[0]=u=>n.$goBack())})])]),"right-button":a(()=>[l("div",$m,[e(R,{icon:"edit",size:"sm",dense:"",flat:"",rounded:"",color:"grey",onClick:i[1]||(i[1]=u=>t(W).get(n.route("admin.product.edit",{id:t(s).props.data.id})))})])]),default:a(()=>[l("div",xm,[l("div",Sm,[l("div",Vm,[e(ie,{square:"",flat:"",bordered:"",class:"q-card col"},{default:a(()=>[e(ol,{modelValue:o.value,"onUpdate:modelValue":i[2]||(i[2]=u=>o.value=u),align:"left"},{default:a(()=>[e(ct,{name:"main",label:"Info Utama"}),e(ct,{name:"history",label:"Riwayat Stok"})]),_:1},8,["modelValue"]),e(nl,{modelValue:o.value,"onUpdate:modelValue":i[3]||(i[3]=u=>o.value=u)},{default:a(()=>[e(pt,{name:"main"},{default:a(()=>[e(La,{product:t(s).props.data},null,8,["product"])]),_:1}),e(pt,{name:"history",class:"q-pa-xs"},{default:a(()=>[e(Ya,{"product-id":t(s).props.data.id},null,8,["product-id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])]),_:1})],64)}}},Cm=Object.freeze(Object.defineProperty({__proto__:null,default:qm},Symbol.toStringTag,{value:"Module"}));function Ka(m,s=!1){const d=m.map(p=>({value:p.id,label:p.name})),o=s?[{value:"all",label:"Semua"},...d]:d,n=S([...o]);return{filteredCategories:n,filterCategories:(p,f)=>{const u=p.toLowerCase();f(()=>{n.value=o.filter(c=>c.label.toLowerCase().includes(u))})},categories:o}}function kl(m,s=!1){const d=m.map(p=>({value:p.id,label:"#"+p.id+" - "+p.name})),o=s?[{value:"all",label:"Semua"},...d]:d,n=S([...o]);return{filteredSuppliers:n,filterSupplierFn:(p,f)=>{f(()=>{n.value=o.filter(u=>u.label.toLowerCase().includes(p.toLowerCase()))})},suppliers:o}}const Tm={class:"q-gutter-sm"},Pm={class:"col col-md-6 q-pa-xs"},Im={__name:"Editor",setup(m){const s=ce(),d=(s.props.data.id?"Edit":"Tambah")+" Produk",o=We(window.CONSTANTS.PRODUCT_TYPES),n=Oe({id:s.props.data.id,category_id:s.props.data.category_id,supplier_id:s.props.data.supplier_id,type:s.props.data.type||"",name:s.props.data.name||"",barcode:s.props.data.barcode||"",description:s.props.data.description||"",stock:parseFloat(s.props.data.stock)||0,min_stock:parseFloat(s.props.data.min_stock)||0,max_stock:parseFloat(s.props.data.max_stock)||0,uom:s.props.data.uom||"",cost:parseFloat(s.props.data.cost)||0,price:parseFloat(s.props.data.price)||0,price_2:parseFloat(s.props.data.price_2)||0,price_3:parseFloat(s.props.data.price_3)||0,active:!!s.props.data.active,price_editable:!!s.props.data.price_editable,notes:s.props.data.notes||""}),i=()=>Fe({form:n,url:route("admin.product.save")}),{filteredCategories:p,filterCategories:f}=Ka(s.props.categories),{filteredSuppliers:u,filterSuppliers:c}=kl(s.props.suppliers),_=X(()=>n.price>0?(n.price-n.cost)/n.price*100:0);return(w,g)=>{const x=H("i-head"),C=H("authenticated-layout");return v(),h(L,null,[e(x,{title:d}),e(C,{"show-drawer-button":!1},{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",Tm,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:g[0]||(g[0]=k=>w.$goBack())})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Pm,[e(Re,{class:"row",onSubmit:Q(i,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":g[1]||(g[1]=k=>t(n).id=k)},null,512),[[Xe,t(n).id]]),g[23]||(g[23]=l("div",{class:"text-subtitle1 q-pt-lg"},"Info Utama",-1)),e(se,{autofocus:"",modelValue:t(n).type,"onUpdate:modelValue":g[2]||(g[2]=k=>t(n).type=k),class:"custom-select",options:t(o),label:"Jenis","map-options":"","emit-value":"","hide-bottom-space":""},null,8,["modelValue","options"]),e(le,{modelValue:t(n).name,"onUpdate:modelValue":g[3]||(g[3]=k=>t(n).name=k),modelModifiers:{trim:!0},label:"Nama Produk","lazy-rules":"",error:!!t(n).errors.name,disable:t(n).processing,"error-message":t(n).errors.name,rules:[k=>k&&k.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(le,{modelValue:t(n).description,"onUpdate:modelValue":g[4]||(g[4]=k=>t(n).description=k),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:t(n).processing,error:!!t(n).errors.description,"error-message":t(n).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:t(n).category_id,"onUpdate:modelValue":g[5]||(g[5]=k=>t(n).category_id=k),label:"Kategori","use-input":"","input-debounce":"300",clearable:"",options:t(p),"map-options":"","emit-value":"",onFilter:t(f),"option-label":"label","option-value":"value",error:!!t(n).errors.category_id,disable:t(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ee,null,{default:a(()=>[e(M,null,{default:a(()=>g[21]||(g[21]=[b("Kategori tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"]),w.$can("admin.product:view-supplier")?(v(),N(se,{key:0,modelValue:t(n).supplier_id,"onUpdate:modelValue":g[6]||(g[6]=k=>t(n).supplier_id=k),label:"Supplier","use-input":"","input-debounce":"300",clearable:"",options:t(u),"map-options":"","emit-value":"",onFilter:t(c),"option-label":"label","option-value":"value",error:!!t(n).errors.supplier_id,disable:t(n).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ee,null,{default:a(()=>[e(M,null,{default:a(()=>g[22]||(g[22]=[b("Supplier tidak ditemukan")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","error","disable"])):T("",!0),e(qt,{modelValue:t(n).active,"onUpdate:modelValue":g[7]||(g[7]=k=>t(n).active=k),disable:t(n).processing,label:"Aktif"},null,8,["modelValue","disable"]),g[24]||(g[24]=l("div",{class:"text-subtitle1 q-pt-lg"},"Info Inventori",-1)),e(le,{modelValue:t(n).barcode,"onUpdate:modelValue":g[8]||(g[8]=k=>t(n).barcode=k),modelModifiers:{trim:!0},label:"Barcode","lazy-rules":"",error:!!t(n).errors.barcode,disable:t(n).processing,"error-message":t(n).errors.barcode,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(le,{modelValue:t(n).uom,"onUpdate:modelValue":g[9]||(g[9]=k=>t(n).uom=k),modelModifiers:{trim:!0},label:"Satuan","lazy-rules":"",error:!!t(n).errors.uom,disable:t(n).processing,"error-message":t(n).errors.uom,"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message"]),e(Ne,{modelValue:t(n).stock,"onUpdate:modelValue":g[10]||(g[10]=k=>t(n).stock=k),label:"Stok",lazyRules:"",disable:t(n).processing,error:!!t(n).errors.stock,errorMessage:t(n).errors.stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Ne,{modelValue:t(n).min_stock,"onUpdate:modelValue":g[11]||(g[11]=k=>t(n).min_stock=k),label:"Stok Minimum",lazyRules:"",disable:t(n).processing,error:!!t(n).errors.min_stock,errorMessage:t(n).errors.min_stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Ne,{modelValue:t(n).max_stock,"onUpdate:modelValue":g[12]||(g[12]=k=>t(n).max_stock=k),label:"Stok Maksimum",lazyRules:"",disable:t(n).processing,error:!!t(n).errors.max_stock,errorMessage:t(n).errors.max_stock,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),g[25]||(g[25]=l("div",{class:"text-subtitle1 q-pt-lg"},"Info Harga",-1)),e(qt,{modelValue:t(n).price_editable,"onUpdate:modelValue":g[13]||(g[13]=k=>t(n).price_editable=k),disable:t(n).processing,label:"Harga bisa diubah saat penjualan"},null,8,["modelValue","disable"]),w.$can("admin.product:view-cost")?(v(),N(Ne,{key:1,modelValue:t(n).cost,"onUpdate:modelValue":g[14]||(g[14]=k=>t(n).cost=k),label:"Modal / Harga Beli (Rp)",lazyRules:"",disable:t(n).processing,error:!!t(n).errors.cost,errorMessage:t(n).errors.cost,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"])):T("",!0),e(Ne,{modelValue:t(n).price,"onUpdate:modelValue":g[15]||(g[15]=k=>t(n).price=k),label:"Harga Eceran (Rp)",lazyRules:"",disable:t(n).processing,error:!!t(n).errors.price,errorMessage:t(n).errors.price,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Ne,{modelValue:t(n).price_2,"onUpdate:modelValue":g[16]||(g[16]=k=>t(n).price_2=k),label:"Harga Partai (Rp)",lazyRules:"",disable:t(n).processing,error:!!t(n).errors.price_2,errorMessage:t(n).errors.price_2,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),e(Ne,{modelValue:t(n).price_3,"onUpdate:modelValue":g[17]||(g[17]=k=>t(n).price_3=k),label:"Harga Grosir (Rp)",lazyRules:"",disable:t(n).processing,error:!!t(n).errors.price_3,errorMessage:t(n).errors.price_3,"hide-bottom-space":""},null,8,["modelValue","disable","error","errorMessage"]),w.$can("admin.product:view-cost")?(v(),N(Ne,{key:2,modelValue:_.value,"onUpdate:modelValue":g[18]||(g[18]=k=>_.value=k),label:"Margin (%)",lazyRules:"",disable:t(n).processing,maxDecimals:2,"hide-bottom-space":""},null,8,["modelValue","disable"])):T("",!0),g[26]||(g[26]=l("div",{class:"text-subtitle1 q-pt-lg"},"Info Lainnya",-1)),e(le,{modelValue:t(n).notes,"onUpdate:modelValue":g[19]||(g[19]=k=>t(n).notes=k),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:t(n).processing,error:!!t(n).errors.notes,"error-message":t(n).errors.notes,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(n).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(n).processing,onClick:g[20]||(g[20]=k=>w.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Om=Object.freeze(Object.defineProperty({__proto__:null,default:Im},Symbol.toStringTag,{value:"Module"})),Dm={class:"q-gutter-sm"},Rm={class:"col col-md-6 q-pa-xs"},oa="Import Produk",Um={__name:"Import",setup(m){const s=Oe({csv_file:null}),d=()=>{s.post(route("admin.product.import"),{onSuccess:()=>{s.reset()},onError:()=>{De()},onFinish:()=>{s.clearErrors()}})};return(o,n)=>{const i=H("i-head"),p=H("authenticated-layout");return v(),h(L,null,[e(i,{title:oa}),e(p,{"show-drawer-button":!1},{title:a(()=>[b(r(oa))]),"left-button":a(()=>[l("div",Dm,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>o.$goBack())})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Rm,[e(Re,{class:"row",onSubmit:Q(d,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[n[3]||(n[3]=l("div",{class:"text-subtitle1 q-pt-lg"},"Unggah File Impor",-1)),n[4]||(n[4]=l("div",{class:"text-caption text-grey"}," Unggah file CSV untuk mengimpor data produk. Pastikan format kolom sesuai dengan template yang disediakan. ",-1)),e(Aa,{modelValue:t(s).csv_file,"onUpdate:modelValue":n[1]||(n[1]=f=>t(s).csv_file=f),accept:".csv",label:"Pilih file CSV",error:!!t(s).errors.csv_file,"error-message":t(s).errors.csv_file,disable:t(s).processing,"hide-bottom-space":"",class:"q-mt-md"},null,8,["modelValue","error","error-message","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"upload",type:"submit",label:"Import Data",color:"primary",disable:t(s).processing||!t(s).csv_file,loading:t(s).processing},null,8,["disable","loading"]),e(R,{icon:"cancel",label:"Batal",disable:t(s).processing,onClick:n[2]||(n[2]=f=>o.$goBack())},null,8,["disable"])]),_:1}),o.$page.props.flash.success?(v(),N(Jt,{key:0,class:"bg-positive text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.success),1)]),_:1})):T("",!0),o.$page.props.flash.error?(v(),N(Jt,{key:1,class:"bg-negative text-white q-mt-md"},{default:a(()=>[b(r(o.$page.props.flash.error),1)]),_:1})):T("",!0)]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Mm=Object.freeze(Object.defineProperty({__proto__:null,default:Um},Symbol.toStringTag,{value:"Module"})),Am={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Em={class:"q-pa-xs"},jm={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Nm={key:0,class:"text-grey-8"},Bm={key:0,class:"text-grey-8"},Fm={key:0},zm={key:1},Hm={class:"flex justify-end"},na="Produk",Lm={__name:"Index",setup(m){const s=ce(),d=S(null),o=S(null),n=Ke(o),i=S(!1),p=[{value:"all",label:"Semua"},...We(window.CONSTANTS.PRODUCT_TYPES)],f=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],u=[{value:"all",label:"Semua"},{value:"ready",label:"Tersedia"},{value:"out",label:"Kosong"},{value:"low",label:"Stok Rendah"},{value:"over",label:"Stok Berlebih"}],c=he(),_=S(!1),w=S([]),g=S(!0),x=Ie({type:"all",category_id:"all",supplier_id:"all",status:"active",stock_status:"all",search:"",...Ue()}),C=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1});let k=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"cost",label:"Modal",field:"cost",align:"right"},{name:"price",label:"Harga",field:"price",align:"right"},{name:"action",align:"right"}];$e(()=>{const P=new URLSearchParams(window.location.search).get("page");P&&(C.value.page=parseInt(P)),D()});const A=j=>Ge({message:`Hapus Produk ${j.name}?`,url:route("admin.product.delete",j.id),fetchItemsCallback:D,loading:g}),D=(j=null)=>{Me({pagination:C,filter:x,props:j,rows:w,url:route("admin.product.data"),loading:g,tableRef:d})},y=()=>{D()},{filteredCategories:O,filterCategories:B}=Ka(s.props.categories,!0),{filteredSuppliers:$,filterSuppliers:q}=kl(s.props.suppliers,!0),I=X(()=>{let j=[...k];return i.value||j.splice(2,1),c.screen.gt.sm?j:j.filter(P=>P.name==="name"||P.name==="action")}),E=j=>{console.log(window.location.href),W.get(route("admin.product.detail",j.row.id))};return(j,P)=>{const Z=H("i-head"),de=H("authenticated-layout");return v(),h(L,null,[e(Z,{title:na}),e(de,null,Ye({title:a(()=>[b(r(na))]),"right-button":a(()=>[j.$can("admin.product.import")?(v(),N(R,{key:0,icon:"move_to_inbox",dense:"",rounded:"",flat:"",class:"q-ml-sm",color:"orange",onClick:P[0]||(P[0]=U=>t(W).get(j.route("admin.product.import")))})):T("",!0),j.$can("admin.product:view-cost")?(v(),N(R,{key:1,class:"q-mr-sm",icon:i.value?"visibility":"visibility_off",label:"",dense:"",rounded:"",flat:"",color:"grey",onClick:P[1]||(P[1]=U=>i.value=!i.value)},null,8,["icon"])):T("",!0),e(R,{icon:_.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:P[2]||(P[2]=U=>_.value=!_.value)},null,8,["icon"]),j.$can("admin.product.add")?(v(),N(R,{key:2,icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:P[3]||(P[3]=U=>t(W).get(j.route("admin.product.add")))})):T("",!0)]),default:a(()=>[l("div",Em,[e(Te,{ref_key:"tableRef",ref:d,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:C.value,"onUpdate:pagination":P[11]||(P[11]=U=>C.value=U),filter:x.search,loading:g.value,columns:I.value,rows:w.value,"rows-per-page-options":[10,25,50],style:Ae({height:t(n)}),onRequest:D,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:U,message:z,filter:G})=>[l("div",jm,[l("span",null,r(z)+" "+r(G?" with term "+G:""),1)])]),header:a(U=>[e(qe,{props:U},{default:a(()=>[e(Wt,{"auto-width":""}),(v(!0),h(L,null,lt(U.cols,z=>(v(),N(Wt,{key:z.name,props:U},{default:a(()=>[b(r(z.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(U=>[e(qe,{props:U,class:_e({inactive:!U.row.active})},{default:a(()=>[e(F,{"auto-width":""},{default:a(()=>[e(R,{size:"xs",color:"grey",round:"",dense:"",onClick:Q(z=>U.expand=!U.expand,["prevent"]),icon:U.expand?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(F,{key:"name",props:U,class:"wrap-column cursor-pointer",onClick:z=>E(U)},{default:a(()=>[b(r(U.row.name)+" ",1),U.row.category_id?(v(),h("div",Nm,[e(V,{name:"category"}),b(" "+r(U.row.category.name),1)])):T("",!0),j.$can("admin.product:view-supplier")?(v(),h(L,{key:1},[U.row.supplier_id?(v(),h("div",Bm,[e(V,{name:"local_shipping"}),b(" "+r(U.row.supplier.name),1)])):T("",!0)],64)):T("",!0),t(c).screen.gt.sm?T("",!0):(v(),h(L,{key:2},[U.row.type=="stocked"?(v(),h("div",Fm,[e(V,{name:"cycle"}),b(" Stok: "+r(t(K)(U.row.stock))+" "+r(U.row.uom),1)])):T("",!0),i.value?(v(),h("div",zm,[e(V,{name:"money"}),b(" Modal: Rp. "+r(t(K)(U.row.cost)),1)])):T("",!0),l("div",null,[e(V,{name:"sell"}),b(" Harga: Rp. "+r(t(K)(U.row.price)),1)])],64))]),_:2},1032,["props","onClick"]),e(F,{key:"stock",props:U,class:_e(["wrap-column",{"low-stock":U.row.type=="stocked"&&(Number(U.row.stock)==0||Number(U.row.stock)<Number(U.row.min_stock)),"over-stock":U.row.type=="stocked"&&Number(U.row.max_stock)&&Number(U.row.stock)>Number(U.row.max_stock)}])},{default:a(()=>[b(r(U.row.type=="stocked"?t(K)(U.row.stock)+" "+U.row.uom:"-"),1)]),_:2},1032,["props","class"]),(v(),N(F,{key:"cost",props:U,class:"wrap-column"},{default:a(()=>[b(r(t(K)(U.row.cost)),1)]),_:2},1032,["props"])),e(F,{key:"price",props:U,class:"wrap-column"},{default:a(()=>[b(r(t(K)(U.row.price)),1)]),_:2},1032,["props"]),e(F,{key:"action",props:U},{default:a(()=>[l("div",Hm,[e(R,{disabled:!(j.$can("admin.product.add")||j.$can("admin.product.edit")||j.$can("admin.product.delete")),icon:"more_vert",dense:"",flat:"",style:{height:"40px",width:"30px"},onClick:P[10]||(P[10]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[j.$can("admin.product.add")?J((v(),N(ee,{key:0,clickable:"",onClick:Q(z=>t(W).get(j.route("admin.product.duplicate",U.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(M,{icon:"copy"},{default:a(()=>P[12]||(P[12]=[b("Duplikat")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]):T("",!0),j.$can("admin.product.edit")?J((v(),N(ee,{key:1,clickable:"",onClick:Q(z=>t(W).get(j.route("admin.product.edit",U.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,{icon:"edit"},{default:a(()=>P[13]||(P[13]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]):T("",!0),j.$can("admin.product.delete")?J((v(),N(ee,{key:2,onClick:Q(z=>A(U.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>P[14]||(P[14]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]):T("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disabled"])])]),_:2},1032,["props"])]),_:2},1032,["props","class"]),J(e(qe,{props:U},{default:a(()=>[e(F,{colspan:"100%"},{default:a(()=>[e(V,{name:"notes"}),b(" "+r(U.row.description),1)]),_:2},1024)]),_:2},1032,["props"]),[[Va,U.expand]])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[_.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:o},{default:a(()=>[l("div",Am,[e(se,{modelValue:x.type,"onUpdate:modelValue":[P[4]||(P[4]=U=>x.type=U),y],class:"custom-select col-xs-4 col-sm-2",options:p,label:"Jenis",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{modelValue:x.status,"onUpdate:modelValue":[P[5]||(P[5]=U=>x.status=U),y],class:"custom-select col-xs-4 col-sm-2",options:f,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{modelValue:x.stock_status,"onUpdate:modelValue":[P[6]||(P[6]=U=>x.stock_status=U),y],class:"custom-select col-xs-4 col-sm-2",options:u,label:"Status Stok",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{modelValue:x.category_id,"onUpdate:modelValue":[P[7]||(P[7]=U=>x.category_id=U),y],label:"Kategori",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:t(O),"map-options":"",dense:"","emit-value":"",onFilter:t(B),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"]),j.$can("admin.product:view-supplier")?(v(),N(se,{key:0,modelValue:x.supplier_id,"onUpdate:modelValue":[P[8]||(P[8]=U=>x.supplier_id=U),y],label:"Pemasok",class:"custom-select col-xs-12 col-sm-2",outlined:"","use-input":"","input-debounce":"300",clearable:"",options:t($),"map-options":"",dense:"","emit-value":"",onFilter:t(q),style:{"min-width":"150px"}},null,8,["modelValue","options","onFilter"])):T("",!0),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:x.search,"onUpdate:modelValue":P[9]||(P[9]=U=>x.search=U),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Ym=Object.freeze(Object.defineProperty({__proto__:null,default:Lm},Symbol.toStringTag,{value:"Module"})),Qa={__name:"UpdatePasswordForm",setup(m){const s=S(!1),d=S(null),o=S(null),n=Oe({current_password:"",password:"",password_confirmation:""}),i=()=>{n.clearErrors(),n.post(route("admin.profile.update-password"),{preserveScroll:!0,onSuccess:()=>n.reset(),onError:()=>{n.errors.password&&(n.reset("password","password_confirmation"),d.value.focus()),n.errors.current_password&&(n.reset("current_password"),o.value.focus())}})};return(p,f)=>(v(),N(Re,{class:"row",onSubmit:Q(i,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[f[6]||(f[6]=l("div",{class:"text-h6 q-my-xs text-subtitle1"},"Perbarui Kata Sandi",-1)),f[7]||(f[7]=l("p",{class:"text-caption text-grey-9"}," Pastikan akun anda menggunakan kata sandi yang kuat agar akun tetap aman. ",-1)),e(le,{modelValue:t(n).current_password,"onUpdate:modelValue":f[1]||(f[1]=u=>t(n).current_password=u),type:s.value?"text":"password",label:"Kata Sandi Sekarang",autocomplete:"off",disable:t(n).processing,error:!!t(n).errors.current_password,"error-message":t(n).errors.current_password,rules:[u=>u&&u.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(R,{dense:"",flat:"",round:"",onClick:f[0]||(f[0]=u=>s.value=!s.value)},{default:a(()=>[e(V,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(le,{modelValue:t(n).password,"onUpdate:modelValue":f[3]||(f[3]=u=>t(n).password=u),type:s.value?"text":"password",label:"Kata Sandi Baru",autocomplete:"off",disable:t(n).processing,error:!!t(n).errors.password,"error-message":t(n).errors.password,rules:[u=>u&&u.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(R,{dense:"",flat:"",round:"",onClick:f[2]||(f[2]=u=>s.value=!s.value)},{default:a(()=>[e(V,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"]),e(le,{modelValue:t(n).password_confirmation,"onUpdate:modelValue":f[5]||(f[5]=u=>t(n).password_confirmation=u),type:s.value?"text":"password",label:"Konfirmasi Kata Sandi",autocomplete:"off",disable:t(n).processing,error:!!t(n).errors.password_confirmation,"error-message":t(n).errors.password_confirmation,rules:[u=>u&&u.length>0||"Kata sandi harus diisi."],"lazy-rules":"","hide-bottom-space":""},{append:a(()=>[e(R,{dense:"",flat:"",round:"",onClick:f[4]||(f[4]=u=>s.value=!s.value)},{default:a(()=>[e(V,{name:s.value?"key_off":"key"},null,8,["name"])]),_:1})]),_:1},8,["modelValue","type","disable","error","error-message","rules"])]),_:1}),e(te,null,{default:a(()=>[e(R,{type:"submit",label:"Perbarui Kata Sandi",color:"primary",icon:"save",disable:t(n).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Km=Object.freeze(Object.defineProperty({__proto__:null,default:Qa},Symbol.toStringTag,{value:"Module"})),Wa={__name:"UpdateProfileInformationForm",setup(m){const d=ce().props.auth.user,o=Oe({name:d.name,username:d.username,type:window.CONSTANTS.USER_TYPES[d.type]}),n=()=>Fe({form:o,url:route("admin.profile.update")});return(i,p)=>(v(),N(Re,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[p[3]||(p[3]=l("div",{class:"text-h6 q-my-xs text-subtitle1"},"Profil Saya",-1)),p[4]||(p[4]=l("p",{class:"text-caption text-grey-9"},"Perbarui profil anda.",-1)),e(le,{modelValue:t(o).username,"onUpdate:modelValue":p[0]||(p[0]=f=>t(o).username=f),label:"ID Pengguna",disable:t(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"]),e(le,{modelValue:t(o).name,"onUpdate:modelValue":p[1]||(p[1]=f=>t(o).name=f),modelModifiers:{trim:!0},label:"Nama",disable:t(o).processing,error:!!t(o).errors.name,"error-message":t(o).errors.name,rules:[f=>f&&f.length>0||"Name harus diisi."],"lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(le,{modelValue:t(o).type,"onUpdate:modelValue":p[2]||(p[2]=f=>t(o).type=f),label:"Jenis Akun",disable:t(o).processing,readonly:"","hide-bottom-space":""},null,8,["modelValue","disable"])]),_:1}),e(te,null,{default:a(()=>[e(R,{type:"submit",label:"Perbarui Profil Saya",icon:"save",color:"primary",disable:t(o).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"]))}},Qm=Object.freeze(Object.defineProperty({__proto__:null,default:Wa},Symbol.toStringTag,{value:"Module"})),Wm={class:"q-pa-xs"},Jm={class:"row justify-center"},Gm={class:"col col-md-6"},sa="Profil Saya",Xm={__name:"Edit",setup(m){return(s,d)=>{const o=H("i-head"),n=H("authenticated-layout");return v(),h(L,null,[e(o,{title:sa}),e(n,null,{title:a(()=>[b(r(sa))]),default:a(()=>[l("div",Wm,[l("div",Jm,[l("div",Gm,[e(Wa,{class:"q-mb-md"}),e(Qa)])])])]),_:1})],64)}}},Zm=Object.freeze(Object.defineProperty({__proto__:null,default:Xm},Symbol.toStringTag,{value:"Module"}));function ec(){const m=S(new Date);let s=null;const d=()=>{m.value=new Date};return $e(()=>{s=setInterval(d,1e3)}),ll(()=>{s&&clearInterval(s)}),{currentDateTime:m}}const tc={class:"text-grey-8"},Ja={__name:"DigitalClock",setup(m){const{currentDateTime:s}=ec();return(d,o)=>(v(),h("div",tc,r(t(be)(t(s))),1))}},lc={class:"row q-col-gutter-md items-center q-px-md q-py-sm"},ac={class:"col-12 col-sm-6 col-md-4"},oc={class:"text-bold"},nc={key:0,class:"col-12 col-md-4 text-center"},sc={class:"text-h6 text-weight-bold text-grey-8"},rc={key:0,class:"text-subtitle2 text-weight-bold text-grey-8"},ic={key:1,class:"text-subtitle2 text-weight-bold text-grey-8"},dc={class:"text-weight-bold"},Ga={__name:"TransactionHeader",props:{user:{type:Object,required:!0},company:{type:Object,required:!0}},emits:["edit-supplier"],setup(m){return(s,d)=>(v(),h("div",lc,[l("div",ac,[l("div",oc,[d[1]||(d[1]=b(" Info Supplier ")),e(R,{icon:"edit",flat:"",rounded:"",dense:"",color:"grey",size:"sm",onClick:d[0]||(d[0]=o=>s.$emit("edit-supplier"))})]),d[2]||(d[2]=l("div",{class:"text-grey-8 text-italic"},"Supplier belum dipilih.",-1))]),s.$q.screen.gt.sm?(v(),h("div",nc,[l("div",sc,r(m.company.name),1),m.company.address?(v(),h("div",rc,r(m.company.address),1)):T("",!0),m.company.phone?(v(),h("div",ic,r(m.company.phone),1)):T("",!0)])):T("",!0),l("div",{class:_e(["col-12 col-sm-6 col-md-4",s.$q.screen.gt.sm?"text-right":""])},[l("div",dc,r(m.user.username)+" - "+r(m.user.name),1),e(Ja)],2)]))}},uc=Object.freeze(Object.defineProperty({__proto__:null,default:Ga},Symbol.toStringTag,{value:"Module"})),mc={class:"text-weight-medium"},cc={class:"text-caption text-grey-6"},pc={class:"text-weight-medium"},fc={class:"text-weight-bold text-primary"},Xa={__name:"ItemsListTable",props:{items:{type:Array,required:!0},columns:{type:Array,required:!0}},emits:["update-quantity","remove-item"],setup(m){return(s,d)=>(v(),N(Te,{dense:"",rows:m.items,columns:m.columns,"row-key":"id",flat:"",square:"",bordered:"",class:"bg-grey-1 pos-table q-pa-none col","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48},{header:a(o=>[e(qe,{props:o,class:"bg-grey-4"},{default:a(()=>[(v(!0),h(L,null,lt(o.cols,n=>(v(),N(Wt,{key:n.name,props:o,class:"text-weight-bold text-grey-8"},{default:a(()=>[b(r(n.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(o=>[e(qe,{props:o,class:"hover-highlight"},{default:a(()=>[e(F,{key:"name",props:o,class:"text-left"},{default:a(()=>[l("div",mc,r(o.row.name),1),l("div",cc," Barcode: "+r(o.row.barcode),1)]),_:2},1032,["props"]),e(F,{key:"price",props:o,class:"text-center"},{default:a(()=>[l("div",pc,[e(Ne,{"model-value":o.row.price,dense:"",style:{width:"80px","text-align":"right"}},null,8,["model-value"])])]),_:2},1032,["props"]),e(F,{key:"quantity",props:o,class:"text-center"},{default:a(()=>[e(Ne,{"model-value":o.row.quantity,dense:"",style:{width:"80px","text-align":"right"},"onUpdate:modelValue":n=>s.$emit("update-quantity",{id:o.row.id,value:n}),onKeyup:d[0]||(d[0]=Nt(n=>n.target.blur(),["enter"]))},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["props"]),e(F,{key:"subtotal",props:o,class:"text-center"},{default:a(()=>[l("div",fc," Rp. "+r(t(K)(o.row.price*o.row.quantity)),1)]),_:2},1032,["props"]),e(F,{key:"action",props:o,class:"text-center"},{default:a(()=>[e(R,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:n=>s.$emit("remove-item",o.row)},{default:a(()=>[e(zt,null,{default:a(()=>d[1]||(d[1]=[b("Hapus Item")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]))}},gc=Object.freeze(Object.defineProperty({__proto__:null,default:Xa},Symbol.toStringTag,{value:"Module"})),bc={class:"column"},vc={class:"row justify-end items-center q-gutter-sm"},_c={class:"text-h4 text-weight-bold text-primary"},yc={class:"text-caption text-grey-6 q-mt-xs text-right"},wc={class:"q-py-sm"},kc={class:"q-py-sm"},Za={__name:"TransactionSummary",props:{subtotal:{type:Number,required:!0},itemCount:{type:Number,required:!0},barcode:{type:String,required:!0},isProcessing:{type:Boolean,default:!1},formProcessing:{type:Boolean,default:!1}},emits:["update:barcode","add-item","process-payment"],setup(m,{expose:s}){const d=S(null);$e(()=>{o()});const o=()=>{Tt(()=>{d.value&&d.value.focus()})};return s({focusOnBarcodeInput:o}),(n,i)=>(v(),h("div",bc,[l("div",vc,[i[3]||(i[3]=l("span",{class:"text-weight-bold text-grey-8"},"GRAND TOTAL: Rp.",-1)),l("span",_c,r(t(K)(m.subtotal)),1)]),l("div",yc,r(m.itemCount)+" item(s) ",1),l("div",wc,[e(le,{ref_key:"barcodeInputRef",ref:d,"model-value":m.barcode,"onUpdate:modelValue":i[0]||(i[0]=p=>n.$emit("update:barcode",p)),placeholder:"<Input Barcode>",outlined:"",square:"",class:"col bg-white",onKeyup:i[1]||(i[1]=Nt(p=>n.$emit("add-item"),["enter"])),loading:m.isProcessing,clearable:"",autofocus:""},{prepend:a(()=>[e(V,{name:"qr_code_scanner"})]),_:1},8,["model-value","loading"])]),l("div",kc,[e(R,{class:"full-width",label:"Bayar",color:"primary",icon:"payment",onClick:i[2]||(i[2]=p=>n.$emit("process-payment")),disable:m.itemCount===0,loading:m.formProcessing},null,8,["disable","loading"])])]))}},hc=Object.freeze(Object.defineProperty({__proto__:null,default:Za},Symbol.toStringTag,{value:"Module"})),$c={class:"q-ml-sm"},eo={__name:"ConfirmDeleteDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,default:null}},emits:["update:modelValue","confirm"],setup(m){return(s,d)=>(v(),N(xt,{"model-value":m.modelValue,"onUpdate:modelValue":d[1]||(d[1]=o=>s.$emit("update:modelValue",o)),persistent:""},{default:a(()=>[e(ie,null,{default:a(()=>[e(te,{class:"row items-center"},{default:a(()=>{var o;return[e(Rt,{icon:"delete",color:"negative","text-color":"white"}),l("span",$c,'Hapus item "'+r((o=m.item)==null?void 0:o.name)+'"?',1)]}),_:1}),e(ht,{align:"right"},{default:a(()=>[J(e(R,{flat:"",label:"Batal",color:"primary"},null,512),[[re]]),J(e(R,{flat:"",label:"Hapus",color:"negative",onClick:d[0]||(d[0]=o=>s.$emit("confirm"))},null,512),[[re]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},xc=Object.freeze(Object.defineProperty({__proto__:null,default:eo},Symbol.toStringTag,{value:"Module"})),to={__name:"SupplierEditorDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","save"],setup(m,{emit:s}){const d=s,o=S(""),n=S(""),i=()=>{d("save",{name:o.value,address:n.value})};return(p,f)=>(v(),N(xt,{"model-value":m.modelValue,"onUpdate:modelValue":f[2]||(f[2]=u=>p.$emit("update:modelValue",u)),persistent:""},{default:a(()=>[e(ie,{style:{width:"400px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-lg"},{default:a(()=>f[3]||(f[3]=[l("div",{class:"text-bold text-grey-8"},"Edit Info Supplier",-1)])),_:1}),e(te,null,{default:a(()=>[e(le,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=u=>o.value=u),label:"Nama Supplier"},null,8,["modelValue"]),e(le,{modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=u=>n.value=u),label:"Alamat",type:"textarea",autogrow:"",counter:"",maxlength:"200",class:"q-mt-md"},null,8,["modelValue"])]),_:1}),e(ht,{align:"right"},{default:a(()=>[J(e(R,{flat:"",label:"Batal",color:"primary"},null,512),[[re]]),J(e(R,{flat:"",label:"Simpan",color:"primary",onClick:i},null,512),[[re]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Sc=Object.freeze(Object.defineProperty({__proto__:null,default:to},Symbol.toStringTag,{value:"Module"})),Vc={class:"q-gutter-sm"},qc={class:"row col **grow**"},Cc={class:"col-12 q-pa-sm column"},Tc={class:"row"},Pc={class:"col-xs-12 col-md-8 q-pa-sm"},Ic={class:"col-md-4 col-xs-12 q-pa-sm"},Oc={__name:"Editor",setup(m){const s=he(),d=ce(),o=S(null),n=Oe({id:null,formatted_id:"Diisi Otomatis",customer_name:"Pelanggan Umum",datetime:gl().format("YYYY-MM-DD HH:mm:ss"),status:"pending",payment_status:"unpaid",items:[],subtotal:0,tax:0,total:0,notes:""}),i=S(""),p=S(!1),f=S(!1),u=S(null),c=S(!1),_=[{name:"name",required:!0,label:"Item Information",align:"left",field:"name",sortable:!1,style:"width: 300px"},{name:"price",label:"Harga",align:"center",field:"price",sortable:!1,style:"width: 120px"},{name:"quantity",label:"Quantity",align:"center",field:"quantity",sortable:!1,style:"width: 100px"},{name:"subtotal",label:"SubTotal",align:"center",sortable:!1,style:"width: 140px"},{name:"action",label:"Action",align:"center",sortable:!1,style:"width: 80px"}],w=X(()=>{const D=n.items.reduce((y,O)=>y+O.price*O.quantity,0);return n.subtotal=D,n.total=D+n.tax,D}),g=async()=>{if(!i.value.trim()){s.notify({message:"Silakan masukkan barcode",color:"warning",position:"bottom"});return}let D=1,y=i.value.trim(),O=null;const B=y.split("*");if(B.length===3){const q=parseInt(B[0]),I=parseFloat(B[2]);!isNaN(q)&&q>0?D=q:s.notify({message:"Kuantitas tidak valid. Menggunakan default 1.",color:"warning",position:"bottom"}),!isNaN(I)&&I>=0?O=I:s.notify({message:"Harga tidak valid. Menggunakan harga produk default.",color:"warning",position:"bottom"}),y=B[1]}else if(B.length===2){const q=parseInt(B[0]);!isNaN(q)&&q>0?D=q:s.notify({message:"Kuantitas tidak valid. Menggunakan default 1.",color:"warning",position:"bottom"}),y=B[1]}const $=n.items.findIndex(q=>q.barcode===y);if($!==-1)n.items[$].quantity+=D,s.notify({message:`Quantity ${n.items[$].name} bertambah ${D}`,color:"positive",position:"bottom"});else{p.value=!0;try{await new Promise(E=>setTimeout(E,300));const I={...{id:Date.now(),name:`Item ${y}`,barcode:y,price:O!==null?O:Math.floor(Math.random()*5e4)+1e4},quantity:D};n.items.push(I),s.notify({message:`${I.name} berhasil ditambahkan`,color:"positive",position:"bottom",icon:"add_shopping_cart"})}catch(q){console.error("Error fetching item:",q),s.notify({message:"Item tidak ditemukan atau gagal menambahkan item",color:"negative",position:"bottom"})}finally{p.value=!1}}i.value="",await Tt(),o.value.focusOnBarcodeInput()},x=D=>{u.value=D,f.value=!0},C=()=>{if(u.value){const D=n.items.findIndex(y=>y.id===u.value.id);if(D!==-1){const y=n.items.splice(D,1)[0];s.notify({message:`${y.name} dihapus dari keranjang`,color:"info",position:"bottom",icon:"remove_shopping_cart"})}u.value=null}},k=(D,y)=>{const O=n.items.find(B=>B.id===D);O&&y>0&&(O.quantity=parseInt(y)||1)},A=()=>{if(n.items.length===0){s.notify({message:"Tidak ada item dalam keranjang",color:"warning",position:"bottom"});return}n.datetime=gl().format("YYYY-MM-DD HH:mm:ss"),n.status="completed",n.payment_status="paid",Fe({form:n,url:route("admin.transaction.save"),onSuccess:()=>{s.notify({message:"Transaksi berhasil disimpan",color:"positive",position:"bottom",icon:"check_circle"}),n.reset(),n.items=[]}})};return(D,y)=>{const O=H("i-head"),B=H("authenticated-layout");return v(),h(L,null,[e(O,{title:"Order Pembelian"}),e(B,null,{title:a(()=>y[8]||(y[8]=[b("Order Pembelian")])),"left-button":a(()=>[l("div",Vc,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:y[0]||(y[0]=$=>t(W).get(D.route("admin.purchase-order.index")))})])]),default:a(()=>[e(ke,{class:"bg-grey-2 q-pa-sm column fit"},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"full-width col column"},{default:a(()=>[e(Ga,{user:t(d).props.auth.user,company:t(d).props.company,onEditSupplier:y[1]||(y[1]=$=>c.value=!0)},null,8,["user","company"]),l("div",qc,[l("div",Cc,[e(Xa,{items:t(n).items,columns:_,onUpdateQuantity:y[2]||(y[2]=({id:$,value:q})=>k($,q)),onRemoveItem:x},null,8,["items"])])]),l("div",Tc,[l("div",Pc,[e(le,{modelValue:t(n).notes,"onUpdate:modelValue":y[3]||(y[3]=$=>t(n).notes=$),type:"textarea",placeholder:"Tambahkan catatan transaksi...",square:"",outlined:"",class:"bg-white",rows:3,counter:"",maxlength:"200",error:!!t(n).errors.notes,"error-message":t(n).errors.notes,style:{"margin-bottom":"16px"},"hide-bottom-space":""},{prepend:a(()=>[e(V,{name:"note"})]),_:1},8,["modelValue","error","error-message"])]),l("div",Ic,[e(Za,{ref_key:"transactionSummaryRef",ref:o,barcode:i.value,"onUpdate:barcode":y[4]||(y[4]=$=>i.value=$),subtotal:w.value,"item-count":t(n).items.length,"is-processing":p.value,"form-processing":t(n).processing,onAddItem:y[5]||(y[5]=$=>g(i.value)),onProcessPayment:A},null,8,["barcode","subtotal","item-count","is-processing","form-processing"])])])]),_:1}),e(eo,{modelValue:f.value,"onUpdate:modelValue":y[6]||(y[6]=$=>f.value=$),item:u.value,onConfirm:C},null,8,["modelValue","item"]),e(to,{modelValue:c.value,"onUpdate:modelValue":y[7]||(y[7]=$=>c.value=$)},null,8,["modelValue"])]),_:1})]),_:1})],64)}}},Dc=ft(Oc,[["__scopeId","data-v-4d8fff94"]]),Rc=Object.freeze(Object.defineProperty({__proto__:null,default:Dc},Symbol.toStringTag,{value:"Module"})),Uc={class:"col col-md-6 q-pa-xs"},Mc={__name:"Editor_v1",setup(m){const s=ce(),d=(s.props.data.id?"Edit":"Tambah")+" Order Pembelian",{filteredSuppliers:o,filterSupplierFn:n}=kl(s.props.suppliers,!1),i=We(window.CONSTANTS.PURCHASE_ORDER_STATUSES),p=We(window.CONSTANTS.PURCHASE_ORDER_PAYMENT_STATUSES),f=We(window.CONSTANTS.PURCHASE_ORDER_DELIVERY_STATUSES),u=Oe({id:s.props.data.id,formatted_id:s.props.data.formatted_id??"Diisi Otomatis",supplier_id:s.props.data.supplier_id,datetime:gl(s.props.data.datetime).format("YYYY-MM-DD HH:mm:ss"),status:s.props.data.status,payment_status:s.props.data.payment_status,delivery_status:s.props.data.delivery_status,total:parseFloat(s.props.data.total),total_paid:parseFloat(s.props.data.total_paid),notes:s.props.data.notes}),c=()=>Fe({form:u,url:route("admin.purchase-order.save")});return(_,w)=>{const g=H("i-head"),x=H("authenticated-layout");return v(),h(L,null,[e(g,{title:d}),e(x,null,{title:a(()=>[b(r(d))]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Uc,[e(Re,{class:"row",onSubmit:Q(c,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":w[0]||(w[0]=C=>t(u).id=C)},null,512),[[Xe,t(u).id]]),e(le,{modelValue:t(u).formatted_id,"onUpdate:modelValue":w[1]||(w[1]=C=>t(u).formatted_id=C),modelModifiers:{trim:!0},label:"ID Order",readonly:"","hide-bottom-space":""},null,8,["modelValue"]),e(Ut,{modelValue:t(u).datetime,"onUpdate:modelValue":w[2]||(w[2]=C=>t(u).datetime=C),label:"Waktu",error:!!t(u).errors.datetime,disable:t(u).processing},null,8,["modelValue","error","disable"]),e(se,{modelValue:t(u).status,"onUpdate:modelValue":w[3]||(w[3]=C=>t(u).status=C),label:"Status Order",options:t(i),"map-options":"","emit-value":"",error:!!t(u).errors.status,disable:t(u).processing,errorMessage:t(u).errors.status,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","errorMessage"]),e(se,{modelValue:t(u).payment_status,"onUpdate:modelValue":w[4]||(w[4]=C=>t(u).payment_status=C),label:"Status Pembayaran",options:t(p),"map-options":"","emit-value":"",error:!!t(u).errors.payment_status,disable:t(u).processing,errorMessage:t(u).errors.payment_status,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","errorMessage"]),e(se,{modelValue:t(u).delivery_status,"onUpdate:modelValue":w[5]||(w[5]=C=>t(u).delivery_status=C),label:"Status Pengiriman",options:t(f),"map-options":"","emit-value":"",error:!!t(u).errors.delivery_status,disable:t(u).processing,errorMessage:t(u).errors.delivery_status,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","errorMessage"]),e(se,{modelValue:t(u).supplier_id,"onUpdate:modelValue":w[6]||(w[6]=C=>t(u).supplier_id=C),label:"Pemasok","use-input":"","input-debounce":"300",clearable:"",options:t(o),"map-options":"","emit-value":"",errorMessage:t(u).errors.supplier_id,onFilter:t(n),error:!!t(u).errors.supplier_id,disable:t(u).processing,"hide-bottom-space":""},{"no-option":a(()=>[e(ee,null,{default:a(()=>[e(M,null,{default:a(()=>w[9]||(w[9]=[b("Pemasok tidak ditemukan.")])),_:1})]),_:1})]),_:1},8,["modelValue","options","errorMessage","onFilter","error","disable"]),e(R,{dense:"",icon:"add",type:"button",color:"primary",disable:t(u).processing,label:"Pemasok Baru"},null,8,["disable"]),e(le,{modelValue:t(u).notes,"onUpdate:modelValue":w[7]||(w[7]=C=>t(u).notes=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:t(u).processing,error:!!t(u).errors.notes,"error-message":t(u).errors.notes,rules:[C=>C&&C.length>0||"Catatan harus diisi."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"create",type:"submit",label:"Buat Order",color:"primary",disable:t(u).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(u).processing,onClick:w[8]||(w[8]=C=>t(W).get(_.route("admin.purchase-order.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ac=Object.freeze(Object.defineProperty({__proto__:null,default:Mc},Symbol.toStringTag,{value:"Module"})),Ec={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},jc={class:"q-pa-xs"},Nc={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Bc={key:0},Fc={key:0},zc={key:1},Hc={class:"flex justify-end"},ra="Order Pembelian",Lc={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=Bt(),c=Ft(),_=[{label:"Semua Tahun",value:"all"},{label:`${u}`,value:u},...Pt(u-2,u-1).reverse()],w=[{value:"all",label:"Semua Bulan"},...It()],g=Ie({search:"",category_id:"all",year:u,month:c,...Ue()}),x=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),C=[{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"account",label:"Akun",field:"account",align:"left"},{name:"notes",label:"Catatan",field:"notes",align:"left"},{name:"amount",label:"Jumlah (Rp.)",field:"amount",align:"right"},{name:"action",align:"right"}];$e(()=>{A()});const k=O=>Ge({message:`Hapus transaksi #-${O.id}?`,url:route("admin.purchase-order.delete",O.id),fetchItemsCallback:A,loading:n}),A=(O=null)=>{Me({pagination:x,filter:g,props:O,rows:o,url:route("admin.purchase-order.data"),loading:n,tableRef:i})},D=()=>{A()},y=X(()=>s.screen.gt.sm?C:C.filter(O=>O.name==="datetime"||O.name==="action"));return Be(()=>g.year,O=>{O===null&&(g.month=null)}),(O,B)=>{const $=H("i-head"),q=H("authenticated-layout");return v(),h(L,null,[e($,{title:ra}),e(q,null,Ye({title:a(()=>[b(r(ra))]),"right-button":a(()=>[e(R,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:B[0]||(B[0]=I=>d.value=!d.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:B[1]||(B[1]=I=>t(W).get(O.route("admin.purchase-order.add")))})]),default:a(()=>[l("div",jc,[e(Te,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:x.value,"onUpdate:pagination":B[6]||(B[6]=I=>x.value=I),filter:g.search,loading:n.value,columns:y.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ae({height:t(f)}),onRequest:A,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:I,message:E,filter:j})=>[l("div",Nc,[l("span",null,r(E)+" "+r(j?" with term "+j:""),1)])]),body:a(I=>[e(qe,{props:I},{default:a(()=>[e(F,{key:"datetime",props:I,class:"wrap-column"},{default:a(()=>[l("div",null,[b(" #"+r(I.row.id)+" - ",1),e(V,{name:"calendar_today"}),b(" "+r(I.row.datetime),1)]),e(st,null,{default:a(()=>[e(V,{name:"category"}),b(" "+r(I.row.type_label),1)]),_:2},1024),I.row.ref_type?(v(),h("div",Bc,[e(V,{name:"link"}),b(" "+r(I.row.ref_type_label)+" #"+r(I.row.ref_id),1)])):T("",!0),t(s).screen.gt.sm?T("",!0):(v(),h(L,{key:1},[I.row.notes?(v(),h("div",Fc,[e(V,{name:"notes"}),b(" "+r(I.row.notes),1)])):T("",!0),I.row.category?(v(),h("div",zc,[e(V,{name:"category"}),b(" "+r(I.row.category.name),1)])):T("",!0),l("div",null,[e(V,{name:"money"}),b(" Rp. "+r(t(kt)(I.row.amount)+t(K)(I.row.amount)),1)])],64))]),_:2},1032,["props"]),e(F,{key:"account",props:I},{default:a(()=>{var E;return[b(r((E=I.row.account)==null?void 0:E.name),1)]}),_:2},1032,["props"]),e(F,{key:"notes",props:I},{default:a(()=>[b(r(I.row.notes),1)]),_:2},1032,["props"]),e(F,{key:"amount",props:I,style:{"text-align":"right"}},{default:a(()=>[b(r(t(kt)(I.row.amount)+t(K)(I.row.amount)),1)]),_:2},1032,["props"]),e(F,{key:"action",props:I},{default:a(()=>[l("div",Hc,[e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:B[5]||(B[5]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{onClick:Q(E=>k(I.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>B[7]||(B[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",Ec,[e(se,{modelValue:g.year,"onUpdate:modelValue":[B[2]||(B[2]=I=>g.year=I),D],options:_,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{modelValue:g.month,"onUpdate:modelValue":[B[3]||(B[3]=I=>g.month=I),D],options:w,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:g.year===null},null,8,["modelValue","disable"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":B[4]||(B[4]=I=>g.search=I),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Yc=Object.freeze(Object.defineProperty({__proto__:null,default:Lc},Symbol.toStringTag,{value:"Module"})),Kc={class:"q-gutter-sm"},Qc={class:"col col-lg-6 q-pa-xs",align:"center"},Wc={class:"bg-blue-4 q-pa-xs"},Jc={class:"text-subtitle1 text-bold text-grey-10"},Gc={class:"text-caption text-grey-8"},Xc={class:"col-12 col-sm-6"},Zc={class:"full-width"},ep={class:"text-bold"},tp={class:"col-12 col-sm-6",align:"left"},lp={class:"full-width"};const ap={key:1},op={class:"full-width",style:{"border-collapse":"collapse"}},np={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},sp={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},rp={class:"text-center q-pa-sm",style:{"border-bottom":"1px solid #eee"}},ip={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},dp={key:0},up={class:"col-12 col-sm-6"},mp={class:"text-body2 text-grey-7 text-italic"},cp={class:"col-12 col-sm-6"},pp={class:"row justify-end q-gutter-y-xs"},fp={class:"col-12 row justify-between"},gp={class:"text-subtitle2 text-bold"},bp={class:"full-width",style:{"border-collapse":"collapse"}},vp={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},_p={class:"q-pa-sm",style:{"border-bottom":"1px solid #eee"}},yp={class:"text-left q-pa-sm",style:{"border-bottom":"1px solid #eee"}},wp={class:"text-right q-pa-sm",style:{"border-bottom":"1px solid #eee"}},kp={key:0},hp={class:"text-right q-pa-sm"},$p={class:"text-right q-pa-sm"},ia="Rincian Penjualan",xp={__name:"Detail",setup(m){const d=ce().props.data,o=d.grand_total-d.total_paid,n=()=>{window.print()};return(i,p)=>{const f=H("i-head"),u=H("authenticated-layout");return v(),h(L,null,[e(f,{title:ia}),e(u,{"show-drawer-button":!0},{title:a(()=>[l("div",{class:"row items-center q-gutter-x-sm"},[l("span",null,r(ia))])]),"left-button":a(()=>[l("div",Kc,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=c=>t(W).get(i.route("admin.sales-order.index")))})])]),"right-button":a(()=>[e(R,{icon:"print",dense:"",color:"primary",flat:"",rounded:"",onClick:p[1]||(p[1]=c=>n())}),e(R,{class:"q-ml-sm",icon:"add",dense:"",color:"primary",rounded:"",onClick:p[2]||(p[2]=c=>t(W).get(i.route("admin.sales-order.add")))})]),default:a(()=>[e(ke,{class:"row justify-center print-visible"},{default:a(()=>[l("div",Qc,[e(ie,{square:"",flat:"",bordered:"",class:"full-width",style:{"max-width":"1024px"}},{default:a(()=>[e(te,{class:"q-pa-none"},{default:a(()=>[l("div",Wc,[l("div",Jc," INVOICE #"+r(t(d).formatted_id),1),l("div",Gc,[b(" Kasir: "+r(t(d).cashier.username)+" - "+r(t(d).cashier.name)+" | "+r(t(be)(t(d).datetime))+" ",1),t(d).cashier_session?(v(),h(L,{key:0},[b(" | Session ID: "+r(t(d).cashier_session.id)+" | Terminal: "+r(t(d).cashier_session.cashier_terminal.name),1)],64)):T("",!0)])])]),_:1}),e(ot),e(te,{class:"row q-col-gutter-sm q-pa-sm",align:"left"},{default:a(()=>{var c,_,w;return[l("div",Xc,[p[3]||(p[3]=l("div",{class:"text-subtitle2 text-bold text-grey-8"}," Info Pelanggan ",-1)),l("table",Zc,[l("tbody",null,[l("tr",null,[l("td",ep,r(((c=t(d).customer)==null?void 0:c.name)||"-"),1)]),l("tr",null,[l("td",null,r(((_=t(d).customer)==null?void 0:_.address)||"-"),1)]),l("tr",null,[l("td",null,r(((w=t(d).customer)==null?void 0:w.phone_number)||"-"),1)])])])]),l("div",tp,[p[14]||(p[14]=l("div",{class:"text-subtitle2 text-bold text-grey-8"},"Info Order",-1)),l("table",lp,[l("tbody",null,[l("tr",null,[p[4]||(p[4]=l("td",{class:"text-grey-7",style:{width:"130px"}},"Waktu",-1)),p[5]||(p[5]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(be)(t(d).datetime)),1)]),l("tr",null,[p[6]||(p[6]=l("td",{class:"text-grey-7"},"Status Order",-1)),p[7]||(p[7]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(i.$CONSTANTS.SALES_ORDER_STATUSES[t(d).status]),1)]),l("tr",null,[p[8]||(p[8]=l("td",{class:"text-grey-7"},"Status Pembayaran",-1)),p[9]||(p[9]=l("td",null,":",-1)),l("td",null,r(i.$CONSTANTS.SALES_ORDER_PAYMENT_STATUSES[t(d).payment_status]),1)]),T("",!0),t(d).due_date?(v(),h("tr",ap,[p[12]||(p[12]=l("td",{class:"text-grey-7"},"Jatuh Tempo",-1)),p[13]||(p[13]=l("td",null,":",-1)),l("td",null,r(t(Qt)(t(d).due_date)),1)])):T("",!0)])])])]}),_:1}),e(ot),e(te,{class:"q-pa-sm"},{default:a(()=>[l("table",op,[p[16]||(p[16]=l("thead",{class:"text-grey-8"},[l("tr",null,[l("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Item "),l("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Harga (Rp) "),l("th",{class:"text-center q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah "),l("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Total (Rp) ")])],-1)),l("tbody",null,[(v(!0),h(L,null,lt(t(d).details,c=>(v(),h("tr",{key:c.id},[l("td",np,r(c.product_name),1),l("td",sp,r(t(K)(c.price)),1),l("td",rp,r(c.quantity),1),l("td",ip,r(t(K)(c.subtotal_price)),1)]))),128)),t(d).details.length==0?(v(),h("tr",dp,p[15]||(p[15]=[l("td",{colspan:"4",class:"text-center text-grey"}," Belum ada item ",-1)]))):T("",!0)])])]),_:1}),e(ot),e(te,{class:"row",align:"left"},{default:a(()=>[l("div",up,[p[17]||(p[17]=l("div",{class:"text-subtitle2 text-bold text-grey-8 q-mb-xs"}," Catatan: ",-1)),l("div",mp,r(t(d).notes?t(d).notes:"-"),1)]),l("div",cp,[l("div",pp,[l("div",fp,[p[18]||(p[18]=l("div",{class:"text-subtitle2 text-grey-7"},"Grand Total (Rp)",-1)),l("div",gp,r(t(K)(t(d).grand_total)),1)])])])]),_:1})]),_:1}),e(ie,{square:"",flat:"",bordered:"",class:"full-width q-mt-sm",style:{"max-width":"1024px"}},{default:a(()=>[e(te,{class:"q-pa-none"},{default:a(()=>p[19]||(p[19]=[l("div",{class:"bg-yellow-4 q-pa-xs"},[l("div",{class:"text-subtitle1 text-bold text-grey-8"},"PEMBAYARAN")],-1)])),_:1}),e(ot),e(te,{class:"q-pa-sm"},{default:a(()=>[l("table",bp,[p[23]||(p[23]=l("thead",{class:"text-grey-8"},[l("tr",null,[l("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," ID "),l("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Waktu "),l("th",{class:"text-left q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jenis "),l("th",{class:"text-right q-pa-sm",style:{"border-bottom":"2px solid #ddd"}}," Jumlah (Rp) ")])],-1)),l("tbody",null,[(v(!0),h(L,null,lt(t(d).payments,c=>(v(),h("tr",{key:c.id},[l("td",vp,r(c.id),1),l("td",_p,r(t(be)(c.created_at)),1),l("td",yp,r(i.$CONSTANTS.SALES_ORDER_PAYMENT_TYPES[c.type]),1),l("td",wp,r(t(K)(c.amount)),1)]))),128)),t(d).payments.length==0?(v(),h("tr",kp,p[20]||(p[20]=[l("td",{colspan:"100%",class:"text-center text-grey"}," Belum ada item ",-1)]))):T("",!0)]),l("tfoot",null,[l("tr",null,[p[21]||(p[21]=l("th",{class:"text-right q-pa-sm",colspan:"3"},"Total Dibayar",-1)),l("th",hp,r(t(K)(t(d).total_paid)),1)]),l("tr",null,[p[22]||(p[22]=l("th",{class:"text-right q-pa-sm",colspan:"3"},"Sisa Tagihan",-1)),l("th",$p,r(t(K)(o)),1)])])])]),_:1})]),_:1})])]),_:1})]),_:1})],64)}}},Sp=ft(xp,[["__scopeId","data-v-94dcbd24"]]),Vp=Object.freeze(Object.defineProperty({__proto__:null,default:Sp},Symbol.toStringTag,{value:"Module"})),qp={class:"text-weight-medium"},Cp={class:"text-caption text-grey-6"},Tp={class:"column items-end"},Pp={class:"text-caption text-grey-6 text-italic"},lo={__name:"ItemsListTable",props:{items:{type:Array,required:!0},isProcessing:{type:Boolean,default:!1}},emits:["update-quantity","remove-item","edit-item"],setup(m){const s=he(),d=Ke(null,s.screen.lt.sm?395:310),o=[{name:"name",required:!0,label:"Item",align:"left",field:"name",sortable:!1},{name:"subtotal_price",label:"Sub Total (Rp.)",align:"right",sortable:!1},{name:"action",label:"",align:"right",sortable:!1}];return(n,i)=>(v(),N(Te,{dense:"",rows:m.items,columns:o,"row-key":"id",flat:"",square:"",bordered:"",class:"full-height-table","rows-per-page-options":[0],"hide-pagination":"","no-data-label":"Belum ada item","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,style:Ae({height:t(d)})},{header:a(p=>[e(qe,{props:p,class:"bg-grey-4"},{default:a(()=>[(v(!0),h(L,null,lt(p.cols,f=>(v(),N(Wt,{key:f.name,props:p,class:"text-weight-bold text-grey-8"},{default:a(()=>[b(r(f.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(p=>[e(qe,{props:p,class:"hover-highlight"},{default:a(()=>[e(F,{key:"name",props:p,class:"text-left"},{default:a(()=>[l("div",qp,r(p.row.product_name),1),l("div",Cp,r(p.row.product_barcode),1),p.row.notes?(v(),N(we,{key:0,text:p.row.notes,icon:"notes",class:"text-grey-6"},null,8,["text"])):T("",!0)]),_:2},1032,["props"]),e(F,{key:"subtotal_price",props:p,class:"text-right"},{default:a(()=>[l("div",Tp,[l("div",null,r(t(K)(p.row.subtotal_price)),1),l("div",Pp,r(t(K)(p.row.quantity))+" x Rp. "+r(t(K)(p.row.price)),1)])]),_:2},1032,["props"]),e(F,{key:"action",props:p,class:"text-right",style:{width:"5%"}},{default:a(()=>[e(R,{icon:"edit",color:"grey",flat:"",round:"",size:"sm",onClick:f=>n.$emit("edit-item",p.row),disable:m.isProcessing},null,8,["onClick","disable"]),e(R,{icon:"delete",color:"negative",flat:"",round:"",size:"sm",onClick:f=>n.$emit("remove-item",p.row),disable:m.isProcessing},null,8,["onClick","disable"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","style"]))}},Ip=Object.freeze(Object.defineProperty({__proto__:null,default:lo},Symbol.toStringTag,{value:"Module"})),Op=gt({name:"QBtnToggle",props:{...xa,modelValue:{required:!0},options:{type:Array,required:!0,validator:m=>m.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(m,{slots:s,emit:d}){const o=X(()=>m.options.find(g=>g.value===m.modelValue)!==void 0),n=X(()=>({type:"hidden",name:m.name,value:m.modelValue})),i=en(n),p=X(()=>Xo(m)),f=X(()=>({rounded:m.rounded,dense:m.dense,...p.value})),u=X(()=>m.options.map((g,x)=>{const{attrs:C,value:k,slot:A,...D}=g;return{slot:A,props:{key:x,"aria-pressed":k===m.modelValue?"true":"false",...C,...D,...f.value,disable:m.disable===!0||D.disable===!0,color:k===m.modelValue?_(D,"toggleColor"):_(D,"color"),textColor:k===m.modelValue?_(D,"toggleTextColor"):_(D,"textColor"),noCaps:_(D,"noCaps")===!0,noWrap:_(D,"noWrap")===!0,size:_(D,"size"),padding:_(D,"padding"),ripple:_(D,"ripple"),stack:_(D,"stack")===!0,stretch:_(D,"stretch")===!0,onClick(y){c(k,g,y)}}}}));function c(g,x,C){m.readonly!==!0&&(m.modelValue===g?m.clearable===!0&&(d("update:modelValue",null,null),d("clear")):d("update:modelValue",g,x),d("click",C))}function _(g,x){return g[x]===void 0?m[x]:g[x]}function w(){const g=u.value.map(x=>fe(R,x.props,x.slot!==void 0?s[x.slot]:void 0));return m.name!==void 0&&m.disable!==!0&&o.value===!0&&i(g,"push"),ka(s.default,g)}return()=>fe(Zo,{class:"q-btn-toggle",...p.value,rounded:m.rounded,stretch:m.stretch,glossy:m.glossy,spread:m.spread},w)}}),Dp={key:0,class:"text-center q-mb-md text-grey-8"},Rp={class:"text-subtitle2 text-weight-medium"},Up={class:"text-h5 text-center text-primary q-pb-md"},Mp={class:"q-mb-md flex flex-center"},Ap={key:1},Ep={class:"col-6"},jp={class:"col-6"},Np={class:"row"},Bp={class:"text-center q-mt-md"},Fp={key:0,class:"text-h6 text-negative text-weight-bold"},zp={key:1,class:"text-h6 text-green-8 text-weight-bold"},Hp={key:2,class:"text-h6 text-positive text-weight-bold"},Lp={key:2},Yp={class:"text-h6 text-negative text-center"},Kp={key:3},ao={__name:"PaymentDialog",props:{modelValue:{type:Boolean,required:!0},form:{type:Object,required:!0},customer:{type:Object,required:!1},total:{type:Number,required:!0}},emits:["update:modelValue","accepted"],setup(m,{emit:s}){const d=m,o=s,n=ce(),i=S(!1),p=S("cash"),f=S(new Date),u=S(null),c=Ie([{id:"cash",amount:0}]),_=X(()=>[{label:"Tunai",value:"cash"},...d.customer?[{label:"Wallet",value:"wallet"}]:[],...n.props.accounts.map(I=>({label:I.name+" - "+I.number,value:I.id}))]),w=X(()=>c.reduce((I,E)=>I+(E.amount||0),0)),g=X(()=>d.total-w.value),x=X(()=>{if(!d.customer)return!0;const I=c.find(j=>j.id==="wallet");return(I?I.amount:0)<=d.customer.balance}),C=new Date,k=at.addToDate(new Date,{days:30}),A=X(()=>[I=>!!I||"Tanggal jatuh tempo harus diisi",I=>at.isBetweenDates(I,C,k,{inclusiveFrom:!0,inclusiveTo:!0})?!0:"Tanggal tidak boleh kurang dari hari ini dan lebih dari 30 hari dari sekarang."]),D=X(()=>{if(p.value==="debt")return!!d.customer&&A.value.every(Z=>Z(f.value)===!0);const I=x.value,E=c.some(Z=>(Z.amount||0)>0),j=c.every(Z=>(Z.amount||0)>=0),P=g.value<=0;return I&&E&&j&&P}),y=()=>{c.length<3&&c.push({id:"cash",amount:0})},O=I=>{if(c.length>1){const E=c.findIndex(j=>j.id===I);E!==-1&&c.splice(E,1)}},B=I=>{p.value=I,f.value=new Date,c.splice(0,c.length),I==="cash"&&(c.splice(0,c.length,{id:"cash",amount:d.total}),Tt(()=>{u.value&&u.value.length>0&&(u.value[0].focus(),u.value[0].select())}))},$=()=>{if(!D.value)return;i.value=!0;let I={total:d.total,is_debt:p.value==="debt"};if(p.value==="debt")I.due_date=at.formatDate(f.value,"YYYY-MM-DD"),I.payments=[];else{const E=w.value,j=E>d.total?E-d.total:0,P=g.value>0?g.value:0;I.payments=c,I.remaining_debt=P,I.change=j}o("accepted",I),i.value=!1},q=()=>{B("cash"),Tt(()=>{})};return(I,E)=>(v(),N(xt,{"model-value":m.modelValue,"onUpdate:modelValue":E[3]||(E[3]=j=>I.$emit("update:modelValue",j)),onBeforeShow:q},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(te,null,{default:a(()=>E[4]||(E[4]=[l("div",{class:"text-subtitle1 text-bold text-center"}," Rincian Pembayaran ",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[m.customer?(v(),h("div",Dp,[l("div",Rp,[b(" Username: "+r(m.customer.username)+" ",1),E[5]||(E[5]=l("br",null,null,-1)),b(" Nama: "+r(m.customer.name),1),E[6]||(E[6]=l("br",null,null,-1)),b(" Saldo: Rp. "+r(t(K)(m.customer.balance)),1)])])):T("",!0),l("div",Up," Total: Rp. "+r(t(K)(m.total)),1),l("div",Mp,[e(t(Op),{modelValue:p.value,"onUpdate:modelValue":[E[0]||(E[0]=j=>p.value=j),B],options:[{label:"Tunai",value:"cash",slot:"cash",color:"green"},{label:"Tempo",value:"debt",slot:"debt",disable:!m.customer,color:"red"}],flat:"",spread:"",class:"bg-grey-2"},null,8,["modelValue","options"])]),p.value==="cash"?(v(),h("div",Ap,[(v(!0),h(L,null,lt(c,(j,P)=>(v(),h("div",{key:j.id,class:"row q-col-gutter-sm q-mb-sm"},[l("div",Ep,[e(t(se),{modelValue:j.id,"onUpdate:modelValue":Z=>j.id=Z,options:_.value,label:"Metode Pembayaran",outlined:!0,"emit-value":"","map-options":"",dense:"",class:"custom-select",disable:i.value,"hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue","options","disable"])]),l("div",jp,[e(Ne,{modelValue:j.amount,"onUpdate:modelValue":Z=>j.amount=Z,label:"Jumlah",outlined:!0,dense:"",disable:i.value,error:j.id==="wallet"&&!x.value,"error-message":j.id==="wallet"&&!x.value?"Saldo tidak cukup!":"","hide-bottom-space":"",ref_for:!0,ref:P===0?"firstPaymentInputRef":null},Ye({_:2},[c.length>1?{name:"append",fn:a(()=>[e(V,{size:"xs",name:"close",class:"cursor-pointer",onClick:Z=>O(j.id)},null,8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","disable","error","error-message"])])]))),128)),l("div",Np,[e(R,{disable:!(c.length<3&&g.value>0),flat:"",dense:"",icon:"add",label:"Tambah Pembayaran",onClick:y,size:"sm"},null,8,["disable"])]),l("div",Bp,[g.value>0?(v(),h("div",Fp," Sisa Tagihan: Rp. "+r(t(K)(g.value)),1)):g.value<0?(v(),h("div",zp," Kembalian: Rp. "+r(t(K)(Math.abs(g.value))),1)):(v(),h("div",Hp," Tagihan Terbayar "))])])):p.value==="debt"&&m.customer?(v(),h("div",Lp,[e(za,{outlined:"",modelValue:f.value,"onUpdate:modelValue":E[1]||(E[1]=j=>f.value=j),label:"Tanggal Jatuh Tempo",hint:"Pilih tanggal jatuh tempo pembayaran utang",class:"q-mb-md","min-date":t(C),"max-date":t(k),rules:A.value},null,8,["modelValue","min-date","max-date","rules"]),l("div",Yp," Total Utang: Rp. "+r(t(K)(m.total)),1)])):p.value==="debt"&&!m.customer?(v(),h("div",Kp,E[7]||(E[7]=[l("div",{class:"text-center text-negative text-h6"}," Tidak dapat mencatat utang tanpa memilih pelanggan. ",-1)]))):T("",!0)]),_:1}),e(ht,{align:"center",class:"q-mb-sm"},{default:a(()=>[e(R,{flat:"",label:"Batal",color:"grey",onClick:E[2]||(E[2]=j=>I.$emit("update:modelValue",!1))}),e(R,{label:p.value==="debt"?"Catat Utang":"Bayar",color:"positive",onClick:$,disable:i.value||!D.value,loading:i.value},null,8,["label","disable","loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Qp=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"})),Wp={class:"row items-center no-wrap"},Jp={class:"col-auto"},Gp={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Xp={__name:"ProductBrowserDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","product-selected"],setup(m,{emit:s}){const d=m,o=s,n=S(null),i=S([]),p=S(!0),f=Ie({search:"",status:"active",...Ue()}),u=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),c=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"right"},{name:"price",label:"Harga",field:"price",align:"right"}],_=X(()=>c);$e(()=>{w()});const w=()=>{d.modelValue!==!1&&g()},g=(k=null)=>{p.value=!0,Me({pagination:u,filter:f,props:k,rows:i,url:route("admin.product.data"),loading:p,tableRef:n})},x=()=>{w()},C=k=>{o("product-selected",k),setTimeout(()=>{o("update:modelValue",!1)},100)};return Be(()=>d.modelValue,(k,A)=>{A===!0&&k===!1&&(f.search=""),k===!0&&g()}),(k,A)=>(v(),N(xt,{"model-value":m.modelValue,"onUpdate:modelValue":A[3]||(A[3]=D=>k.$emit("update:modelValue",D)),maximized:k.$q.screen.lt.sm},{default:a(()=>[e(ie,{class:"column fit"},{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[l("div",Wp,[A[4]||(A[4]=l("div",{class:"col text-subtitle text-grey-8 text-bold"},"Cari Produk",-1)),l("div",Jp,[e(R,{flat:"",round:"",size:"sm",icon:"close",onClick:A[0]||(A[0]=D=>k.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:_e(["q-py-sm",k.$q.screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(le,{autofocus:"",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":[A[1]||(A[1]=D=>f.search=D),x],placeholder:"Cari produk berdasarkan nama atau barcode",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["class"]),e(te,{class:_e(["q-py-xs col",k.$q.screen.lt.sm?"q-px-xs":""])},{default:a(()=>[e(Te,{ref_key:"tableRef",ref:n,flat:"",class:"fit full-height-table",square:"",bordered:"",dense:"",color:"primary","row-key":"id",pagination:u.value,"onUpdate:pagination":A[2]||(A[2]=D=>u.value=D),filter:f.search,loading:p.value,columns:_.value,rows:i.value,"rows-per-page-options":[10,25,50],onRequest:g,"binary-state-sort":"","no-data-label":"Tidak ada produk ditemukan","virtual-scroll":!0,"rows-per-page-label":null},{"no-data":a(({icon:D,message:y,filter:O})=>[l("div",Gp,[l("span",null,r(y),1)])]),body:a(D=>[e(qe,{tabindex:"0",props:D,class:_e([{inactive:!D.row.active},"cursor-pointer"]),onClick:y=>C(D.row),onKeydown:[Nt(Q(y=>C(D.row),["prevent","stop"]),["enter"]),Nt(Q(y=>C(D.row),["prevent"]),["space"])]},{default:a(()=>[e(F,{key:"name",props:D,class:"wrap-column"},{default:a(()=>[e(we,{text:D.row.name},null,8,["text"]),D.row.description?(v(),N(we,{key:0,text:D.row.description,"max-length":50,class:"text-grey-6"},null,8,["text"])):T("",!0)]),_:2},1032,["props"]),e(F,{key:"stock",props:D,class:"wrap-column text-right"},{default:a(()=>[b(r(D.row.type=="stocked"?t(K)(D.row.stock)+" "+D.row.uom:"-"),1)]),_:2},1032,["props"]),e(F,{key:"price",props:D,class:"wrap-column text-right"},{default:a(()=>[b(" Rp. "+r(t(K)(D.row.price)),1)]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick","onKeydown"])]),_:1},8,["pagination","filter","loading","columns","rows"])]),_:1},8,["class"])]),_:1})]),_:1},8,["model-value","maximized"]))}},Zp={class:"row items-center no-wrap"},ef={class:"col-auto"},oo={__name:"ItemEditorDialog",props:{modelValue:{type:Boolean,required:!0},item:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:s,emit:d}){const o=m,n=d,i=()=>{n("save")},p=X(()=>o.item.quantity*o.item.price),f=_=>{_.stopPropagation(),_.preventDefault()},u=_=>{o.modelValue&&(_.key==="Enter"?(i(),f(_)):_.key==="Escape"&&(n("update:modelValue",!1),f(_)))};return $e(()=>{window.addEventListener("keydown",u)}),ll(()=>{window.removeEventListener("keydown",u)}),s({getCurrentItem:()=>o.item}),(_,w)=>(v(),N(xt,{"model-value":m.modelValue,"onUpdate:modelValue":w[6]||(w[6]=g=>_.$emit("update:modelValue",g))},{default:a(()=>[e(ie,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[l("div",Zp,[w[7]||(w[7]=l("div",{class:"col text-subtite text-bold text-grey-8"},"Edit Item",-1)),l("div",ef,[e(R,{flat:"",size:"sm",round:"",icon:"close",onClick:w[0]||(w[0]=g=>_.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(le,{modelValue:m.item.product_name,"onUpdate:modelValue":w[1]||(w[1]=g=>m.item.product_name=g),label:"Produk","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ne,{modelValue:m.item.quantity,"onUpdate:modelValue":w[2]||(w[2]=g=>m.item.quantity=g),label:"Kwantitas","hide-bottom-space":"",autofocus:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(Ne,{modelValue:m.item.price,"onUpdate:modelValue":w[3]||(w[3]=g=>m.item.price=g),label:"Harga",readonly:!m.item.price_editable,"hide-bottom-space":"",disable:m.isProcessing},null,8,["modelValue","readonly","disable"]),e(Ne,{modelValue:p.value,"onUpdate:modelValue":w[4]||(w[4]=g=>p.value=g),label:"Subtotal","hide-bottom-space":"",readonly:""},null,8,["modelValue"]),e(le,{modelValue:m.item.notes,"onUpdate:modelValue":w[5]||(w[5]=g=>m.item.notes=g),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(ht,{align:"right"},{default:a(()=>[J(e(R,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[re]]),J(e(R,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:m.isProcessing},null,8,["disable"]),[[re]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},tf=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),lf={key:0,class:"q-select__selected-item"},af={__name:"CustomerAutocomplete",props:{modelValue:{type:[Object],default:null},class:{type:String,default:""},label:{type:String,default:"Cari Pelanggan"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},disable:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},minLength:{type:Number,default:0},initialData:{type:Object,default:null,required:!1}},emits:["update:modelValue","customerSelected"],setup(m,{expose:s,emit:d}){const o=S(null),n=m,i=d,p=S([]);let f=null;const u=S(n.modelValue);$e(()=>{n.initialData&&(u.value=n.initialData)}),Be(u,w=>{i("update:modelValue",w),i("customerSelected",w)}),Be(()=>n.modelValue,w=>{u.value=w}),s({focus:()=>{o.value&&o.value.focus()}});const _=(w,g)=>{if(w.length<n.minLength){g(()=>{p.value=[]});return}f&&clearTimeout(f),f=setTimeout(()=>{mt.get(`/web-api/customers?q=${w}`).then(x=>{g(()=>{p.value=x.data.data})}).catch(x=>{console.error("Gagal mengambil data pelanggan:",x),g(()=>{p.value=[]})})},500)};return(w,g)=>(v(),N(se,{class:_e(m.class),ref_key:"qSelectRef",ref:o,modelValue:u.value,"onUpdate:modelValue":g[0]||(g[0]=x=>u.value=x),"use-input":"","input-debounce":"0",label:m.label,options:p.value,onFilter:_,clearable:"",error:m.error,behavior:"menu","error-message":m.errorMessage,disable:m.disable,"hide-bottom-space":"",outlined:m.outlined,style:{"min-width":"150px !important"},"option-value":"id","option-label":"name"},{option:a(x=>[e(ee,tn(ln(x.itemProps)),{default:a(()=>[e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>[b(r(x.opt.name),1)]),_:2},1024),e(ge,{caption:""},{default:a(()=>[e(V,{name:"person",size:"14px"}),b(" "+r(x.opt.username),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":a(x=>[x.opt?(v(),h("div",lf,r(x.opt.name)+" ("+r(x.opt.username)+") ",1)):T("",!0)]),_:1},8,["class","modelValue","label","options","error","error-message","disable","outlined"]))}},of={__name:"HelpDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(m,{emit:s}){return(d,o)=>(v(),N(xt,{"model-value":m.modelValue,"onUpdate:modelValue":o[0]||(o[0]=n=>d.$emit("update:modelValue",n))},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>o[1]||(o[1]=[l("div",{class:"text-bold text-grey-8"},"Bantuan",-1)])),_:1}),e(te,null,{default:a(()=>o[2]||(o[2]=[l("table",{style:{width:"100%"},class:"info-table"},[l("thead",null,[l("tr",null,[l("th",null,"Shortcut"),l("th",null,"Aksi")])]),l("tbody",null,[l("tr",null,[l("td",null,"F1"),l("td",null,"Dialog Bantuan")]),l("tr",null,[l("td",null,"F2"),l("td",null,"Aktifkan Input Barcode")]),l("tr",null,[l("td",null,"F3"),l("td",null,"Pilih Pelanggan")]),l("tr",null,[l("td",null,"F4"),l("td",null,"Gabung / pisahkan item saat input")])])],-1)])),_:1}),e(ht,{align:"center"},{default:a(()=>[J(e(R,{dense:"",label:"Tutup"},null,512),[[re]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},no=ft(of,[["__scopeId","data-v-ed1bbfe5"]]),nf=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"}));function sf(m){const s=S(!1),d=()=>{const i=m.value||document.documentElement;i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()},o=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},n=()=>{s.value?o():d()};return an(()=>{const i=()=>{s.value=!!document.fullscreenElement};return document.addEventListener("fullscreenchange",i),document.addEventListener("webkitfullscreenchange",i),document.addEventListener("mozfullscreenchange",i),document.addEventListener("MSFullscreenChange",i),()=>{document.removeEventListener("fullscreenchange",i),document.removeEventListener("webkitfullscreenchange",i),document.removeEventListener("mozfullscreenchange",i),document.removeEventListener("MSFullscreenChange",i)}}),{isFullscreen:s,requestFullscreen:d,exitFullscreen:o,toggleFullscreen:n}}const rf={class:"row items-center no-wrap"},df={class:"col text-subtite text-bold text-grey-8"},uf={class:"col-auto"},so={__name:"OrderInfoDialog",props:{modelValue:{type:Boolean,required:!0},data:{type:Object,required:!1},isProcessing:{type:Boolean,required:!1}},emits:["update:modelValue","save"],setup(m,{expose:s,emit:d}){const o=m,n=d,i=()=>{n("save")},p=c=>{c.stopPropagation(),c.preventDefault()},f=c=>{o.modelValue&&(c.key==="Enter"?(i(),p(c)):c.key==="Escape"&&(n("update:modelValue",!1),p(c)))};return $e(()=>{window.addEventListener("keydown",f)}),ll(()=>{window.removeEventListener("keydown",f)}),s({getCurrentItem:()=>o.item}),(c,_)=>(v(),N(xt,{"model-value":m.modelValue,"onUpdate:modelValue":_[4]||(_[4]=w=>c.$emit("update:modelValue",w))},{default:a(()=>[e(ie,null,{default:a(()=>[e(te,{class:"q-py-sm"},{default:a(()=>[l("div",rf,[l("div",df," Edit "+r(m.data.formatted_id),1),l("div",uf,[e(R,{flat:"",size:"sm",round:"",icon:"close",onClick:_[0]||(_[0]=w=>c.$emit("update:modelValue",!1))})])])]),_:1}),e(te,{class:"q-py-sm"},{default:a(()=>[e(Ut,{modelValue:m.data.datetime,"onUpdate:modelValue":_[1]||(_[1]=w=>m.data.datetime=w),label:"Waktu","hide-bottom-space":"",disable:m.isProcessing,autofocus:""},null,8,["modelValue","disable"]),e(le,{modelValue:c.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status],"onUpdate:modelValue":_[2]||(_[2]=w=>c.$CONSTANTS.SALES_ORDER_STATUSES[m.data.status]=w),label:"Status","hide-bottom-space":"",readonly:"",disable:m.isProcessing},null,8,["modelValue","disable"]),e(le,{modelValue:m.data.notes,"onUpdate:modelValue":_[3]||(_[3]=w=>m.data.notes=w),label:"Catatan",autogrow:"",type:"textarea",counter:"",maxlength:"50","hide-bottom-space":"",clearable:""},null,8,["modelValue"])]),_:1}),e(ht,{align:"right"},{default:a(()=>[J(e(R,{flat:"",label:"Batal",color:"primary",disable:m.isProcessing},null,8,["disable"]),[[re]]),J(e(R,{flat:"",label:"Simpan",color:"primary",onClick:i,disable:m.isProcessing},null,8,["disable"]),[[re]])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},mf=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"})),cf={key:0},pf={style:{float:"right"}},ff={key:1},gf={style:{float:"right"}},bf={key:2},vf={style:{float:"right"}},_f={key:3},yf={style:{float:"right"}},wf={style:{float:"right"}},kf={class:"q-gutter-sm"},hf={class:"q-my-md"},$f={__name:"SuccessDialog",props:{modelValue:{type:Boolean,required:!0},order:{type:Object,required:!0},total:{type:Number,required:!0},customer:{type:[Object],required:!1},payment:{type:[Object],required:!1}},emits:["update:modelValue"],setup(m,{emit:s}){const d=S(null),o=()=>{var n;(n=d.value)==null||n.focus()};return(n,i)=>(v(),N(xt,{"model-value":m.modelValue,"onUpdate:modelValue":i[0]||(i[0]=p=>n.$emit("update:modelValue",p)),onBeforeShow:o,persistent:""},{default:a(()=>[e(ie,{style:{"min-width":"300px"}},{default:a(()=>[e(te,{class:"q-py-none q-pt-md"},{default:a(()=>i[1]||(i[1]=[l("div",{class:"text-bold text-grey-8 text-h6",align:"center"},"Sukses",-1)])),_:1}),e(te,{align:"center"},{default:a(()=>[i[22]||(i[22]=l("div",{class:"q-mb-md"},"Transaksi Berhasil",-1)),l("table",null,[l("tbody",null,[l("tr",null,[i[2]||(i[2]=l("td",null,"ID",-1)),i[3]||(i[3]=l("td",null,":",-1)),l("td",null,r(m.order.formatted_id),1)]),m.customer?(v(),h("tr",cf,[i[5]||(i[5]=l("td",{style:{"vertical-align":"top"}},"Pelanggan",-1)),i[6]||(i[6]=l("td",{style:{"vertical-align":"top"}},":",-1)),l("td",null,[b(r(m.customer.name)+" ",1),i[4]||(i[4]=l("br",null,null,-1)),b(r(m.customer.username),1)])])):T("",!0),l("tr",null,[i[8]||(i[8]=l("td",null,"Total",-1)),i[9]||(i[9]=l("td",null,":",-1)),l("td",null,[i[7]||(i[7]=b(" Rp. ")),l("div",pf,r(t(K)(m.payment.total)),1)])]),m.payment.cash_amount?(v(),h("tr",ff,[i[11]||(i[11]=l("td",null,"Tunai",-1)),i[12]||(i[12]=l("td",null,":",-1)),l("td",null,[i[10]||(i[10]=b(" Rp. ")),l("div",gf,r(t(K)(m.payment.cash_amount)),1)])])):T("",!0),m.payment.wallet_amount?(v(),h("tr",bf,[i[14]||(i[14]=l("td",null,"Wallet",-1)),i[15]||(i[15]=l("td",null,":",-1)),l("td",null,[i[13]||(i[13]=b(" Rp. ")),l("div",vf,r(t(K)(m.payment.wallet_amount)),1)])])):T("",!0),m.payment.remaining_debt?(v(),h("tr",_f,[i[17]||(i[17]=l("td",null,"Piutang",-1)),i[18]||(i[18]=l("td",null,":",-1)),l("td",null,[i[16]||(i[16]=b(" Rp. ")),l("span",yf,r(t(K)(m.payment.remaining_debt)),1)])])):T("",!0),l("tr",null,[i[20]||(i[20]=l("td",null,"Kembalian",-1)),i[21]||(i[21]=l("td",null,":",-1)),l("td",null,[i[19]||(i[19]=b(" Rp. ")),l("div",wf,r(t(K)(m.payment.change)),1)])])])])]),_:1}),e(ht,{align:"center"},{default:a(()=>[l("div",kf,[e(R,{autofocus:"",label:"Cetak Struk",icon:"print",ref_key:"printButtonRef",ref:d,color:"green"},null,512),e(R,{label:"Transaksi Baru",icon:"edit",color:"primary"})]),l("div",hf,[e(R,{label:"Kembali ke daftar transaksi",icon:"arrow_back"})])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ro=ft($f,[["__scopeId","data-v-79f1f7a4"]]),xf=Object.freeze(Object.defineProperty({__proto__:null,default:ro},Symbol.toStringTag,{value:"Module"})),Sf={class:"q-gutter-sm"},Vf={class:"row items-center"},qf={class:"text-weight-bold"},Cf={class:"row q-col-gutter-none full-width"},Tf={class:"col-sm-6 col-12 col"},Pf={class:"row full-width"},If={class:"text-grey q-mt-xs q-ml-sm"},Of={class:"col-sm-6 col-12"},Df={class:"row q-ml-sm items-end"},Rf={class:"row col grow"},Uf={class:"col-12 q-pa-sm column"},Mf={class:"row items-start q-col-gutter-none q-px-sm",style:{"max-height":"80px"}},Af={key:0,class:"col"},Ef={class:"text-caption text-grey-6 q-mt-xs"},jf={key:0,class:"text-caption text-grey-8 q-mt-xs"},Nf={class:"text-italic"},Bf={key:1,class:"col"},Ff={class:"q-pa-sm q-pb-none text-grey-8"},zf={class:"col"},Hf={class:"row no-wrap items-start justify-between",style:{background:"#eee",padding:"10px",border:"1px solid #ddd"}},Lf={class:"text-h4 text-weight-bold"},Yf={class:"row q-px-sm q-pb-none q-py-sm q-col-gutter-sm"},Kf={class:"col q-py-sm"},Qf={class:"q-py-sm"},Wf={__name:"Editor",setup(m){const s=he(),d=ce(),o=S(!0),n=S(null),i=S(null),p=S(null),f=S(!1),u=S(null),c=S(null),{isFullscreen:_,toggleFullscreen:w}=sf(c),g=d.props.data.formatted_id,x=S(d.props.data.customer),C=S(null),k=S(""),A=S(!1),D=S(!1),y=S(!1),O=S(!1),B=S(!1),$=S(!1),q=S(null),I=Ie({id:d.props.data.id,formatted_id:d.props.data.formatted_id,customer_id:d.props.data.customer_id,datetime:new Date(d.props.data.datetime),status:d.props.data.status,payment_status:d.props.data.payment_status,delivery_status:d.props.data.delivery_status,notes:d.props.data.notes,items:d.props.data.details??[]}),E=X(()=>I.items.reduce((ue,Y)=>ue+Y.price*Y.quantity,0)),j=()=>{var ue;w(),_.value||(ue=u==null?void 0:u.value)==null||ue.hideDrawer()},P=ue=>isNaN(ue)||ue<=0?(At("Kuantitas tidak valid.","top"),!1):!0,Z=ue=>isNaN(ue)||ue<0?(At("Harga tidak valid.","top"),!1):!0,de=ue=>!ue||ue.length==0?(At("Barcode tidak valid.","top"),!1):!0,U=ue=>{k.value.endsWith("*")?k.value+=ue.name:k.value=ue.name},z=async()=>{const ue=k.value.trim();if(ue.length===0){y.value=!0;return}const Y=ue.split("*");let xe=1,ye="",pe=null;if(Y.length===1)ye=Y[0];else if(Y.length<=3)xe=parseInt(Y[0]),ye=Y[1],Y.length===3&&(pe=parseFloat(Y[2]));else{At("Input tidak valid.","top");return}if(ye.length===0){y.value=!0;return}!de(ye)&&!P(xe)&&!Z(pe)||(A.value=!0,await mt.post(route("admin.sales-order.add-item"),{order_id:I.id,product_code:ye,qty:xe,price:pe,merge:o.value}).then(Ze=>{const it=Ze.data.data.item;let dt=-1;Ze.data.data.mergeItem&&(dt=I.items.findIndex(sl=>sl.id===it.id)),dt===-1?I.items.push(it):I.items[dt]=it,k.value="",pe!==null&&pe!==parseFloat(it.price)&&At("Harga tidak dapat diubah!","top")}).catch(Ze=>{var it,dt;Et((dt=(it=Ze.response)==null?void 0:it.data)==null?void 0:dt.message,"top"),console.error("Gagal mengambil data produk:",Ze)}),A.value=!1,Tt(()=>{var Ze;(Ze=n.value)==null||Ze.focus()}))},G=ue=>{q.value=Object.create(ue),O.value=!0},Ce=ue=>{s.dialog({title:"Hapus Item",message:`Apakah Anda yakin akan menghapus item ${ue.product_name}?`,cancel:{label:"Batal",color:"grey"},ok:{label:"Hapus",color:"negative"},persistent:!0}).onOk(()=>{A.value=!0,mt.post(route("admin.sales-order.remove-item"),{id:ue.id}).then(()=>{const Y=I.items.findIndex(xe=>xe.id===ue.id);Y!==-1&&(I.items.splice(Y,1)[0],jt("Item telah dihapus","top"))}).catch(Y=>{var xe,ye;Et(((ye=(xe=Y==null?void 0:Y.response)==null?void 0:xe.data)==null?void 0:ye.message)??"Terdapat kesalahan saat menghapus item!","top"),console.error(Y)}).finally(()=>{A.value=!1})})},ae=()=>{A.value=!0;const ue=i.value.getCurrentItem(),Y={id:ue.id,qty:ue.quantity};ue.price_editable&&(Y.price=ue.price),ue.notes&&(Y.notes=ue.notes),mt.post(route("admin.sales-order.update-item"),Y).then(xe=>{const ye=xe.data.data,pe=I.items.findIndex(Ze=>Ze.id===ye.id);pe!==-1&&(I.items[pe]=ye,jt("Item telah diperbarui","top"))}).catch(xe=>{var ye,pe;Et(((pe=(ye=xe==null?void 0:xe.response)==null?void 0:ye.data)==null?void 0:pe.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(xe)}).finally(()=>{A.value=!1})};$e(()=>{const ue=Y=>{Y.key==="F1"?(Y.preventDefault(),f.value=!0):Y.key==="F2"?(Y.preventDefault(),n.value.focus()):Y.key==="F3"?(Y.preventDefault(),p.value.focus()):Y.key==="F4"?(Y.preventDefault(),o.value=!o.value):Y.key==="F10"?(Y.preventDefault(),D.value=!0):Y.key==="F11"&&(Y.preventDefault(),j())};document.addEventListener("keydown",ue),ll(()=>{document.removeEventListener("keydown",ue)}),Tt(()=>{var Y;(Y=u==null?void 0:u.value)==null||Y.hideDrawer()})});const Ve=ue=>{x.value=ue,I.customer_id=ue==null?void 0:ue.id,ze(),Tt(()=>{var Y;(Y=n.value)==null||Y.focus()})},ze=()=>{A.value=!0;const ue={id:I.id,customer_id:I.customer_id,datetime:on(I.datetime),notes:I.notes};mt.post(route("admin.sales-order.update"),ue).then(Y=>{const xe=Y.data.data.id;I.customer_id=xe.customer_id}).catch(Y=>{var xe,ye;Et(((ye=(xe=Y==null?void 0:Y.response)==null?void 0:xe.data)==null?void 0:ye.message)??"Terdapat kesalahan saat menyimpan!","top"),console.error(Y)}).finally(()=>{A.value=!1})},rt=ue=>{if(I.items.length===0){jt("Item masih kosong","top");return}const Y={id:I.id,...ue};console.log(ue),A.value=!0,mt.post(route("admin.sales-order.close"),Y).then(xe=>{jt("Transaksi selesai"),W.visit(route("admin.sales-order.detail",{id:I.id}))}).catch(xe=>{var ye,pe;Et((pe=(ye=xe.response)==null?void 0:ye.data)==null?void 0:pe.message),console.error(xe)}).finally(()=>{A.value=!1})},nt=()=>{wl.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${I.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{mt.post(route("admin.sales-order.cancel",{id:I.id}),{id:I.id}).then(()=>{jt("Transaksi telah dibatalkan."),W.visit(route("admin.sales-order.detail",{id:I.id}))}).catch(ue=>{var xe,ye;const Y=((ye=(xe=ue.response)==null?void 0:xe.data)==null?void 0:ye.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:Y,color:"warning",position:"bottom"}),console.error(ue)})})},bt=()=>{W.visit(route("admin.sales-order.detail",{id:I.id}),{target:"_blank"})};return(ue,Y)=>{const xe=H("i-head"),ye=H("authenticated-layout");return v(),h(L,null,[e(xe,{title:t(g)},null,8,["title"]),e(ye,{ref_key:"authLayoutRef",ref:u,"show-drawer-button":!0},{title:a(()=>[b(r(t(g)),1)]),"left-button":a(()=>[l("div",Sf,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:Y[0]||(Y[0]=pe=>t(W).get(ue.route("admin.sales-order.index")))})])]),"right-button":a(()=>[l("div",Vf,[t(s).screen.gt.sm?(v(),h(L,{key:0},[l("div",qf,r(t(d).props.auth.user.username),1),Y[22]||(Y[22]=l("div",{class:"q-mx-sm"},"|",-1)),l("div",null,[e(Ja)])],64)):T("",!0),T("",!0)])]),default:a(()=>[e(ke,{class:"bg-grey-2 q-pa-none column fit"},{default:a(()=>[e(ie,{square:"",flat:"",class:"full-width col column q-pb-none"},{default:a(()=>[l("div",Cf,[l("div",Tf,[l("div",Pf,[e(af,{ref_key:"customerAutocompleteRef",ref:p,class:"custom-select full-width col col-12 bg-white q-pa-sm",modelValue:x.value,"onUpdate:modelValue":Y[2]||(Y[2]=pe=>x.value=pe),label:"Pelanggan",disable:A.value,onCustomerSelected:Ve,"min-length":1,outlined:"",autofocus:""},null,8,["modelValue","disable"]),l("div",If," Saldo: "+r(x.value?"Rp. "+t(K)(x.value?x.value.balance:0):"Tidak tersedia"),1)])]),l("div",Of,[e(le,{ref_key:"userInputRef",ref:n,modelValue:k.value,"onUpdate:modelValue":Y[5]||(Y[5]=pe=>k.value=pe),onKeyup:Y[6]||(Y[6]=Nt(Q(pe=>z(),["prevent"]),["enter"])),loading:A.value,disable:A.value,placeholder:"Qty * Kode / Barcode * Harga",class:"col col-12 q-pa-sm bg-white",outlined:"",clearable:""},{prepend:a(()=>[e(V,{name:"search",onClick:Y[3]||(Y[3]=pe=>y.value=!0),class:"cursor-pointer"})]),append:a(()=>{var pe;return[((pe=k.value)==null?void 0:pe.length)>0?(v(),N(V,{key:0,name:"send",onClick:Y[4]||(Y[4]=Ze=>z()),class:"cursor-pointer q-ml-md"})):T("",!0)]}),_:1},8,["modelValue","loading","disable"]),l("div",Df,[e(qt,{class:"col",modelValue:o.value,"onUpdate:modelValue":Y[7]||(Y[7]=pe=>o.value=pe),label:"Gabungkan item",disable:A.value},null,8,["modelValue","disable"])])])]),l("div",Rf,[l("div",Uf,[e(lo,{items:I.items,onUpdateQuantity:Y[8]||(Y[8]=({id:pe,value:Ze})=>ue.updateQuantity(pe,Ze)),onRemoveItem:Ce,onEditItem:G,"is-processing":A.value},null,8,["items","is-processing"])])]),l("div",Mf,[t(s).screen.gt.sm?(v(),h("div",Af,[l("div",Ef,r(I.items.length)+" item(s) ",1),I.notes?(v(),h("div",jf,[Y[23]||(Y[23]=l("div",{class:"text-bold"},"Catatan:",-1)),l("div",Nf,[e(we,{text:I.notes},null,8,["text"])])])):T("",!0)])):T("",!0),t(s).screen.gt.sm?(v(),h("div",Bf,[l("div",Ff,[l("div",null,"#: "+r(I.formatted_id),1),l("div",null,r(t(be)(I.datetime)),1)])])):T("",!0),l("div",zf,[l("div",Hf,[Y[25]||(Y[25]=l("span",{class:"text-grey-8 text-subtitle-2 text-bold"},"TOTAL",-1)),l("span",Lf,[Y[24]||(Y[24]=l("sup",{style:{"font-size":"13px"}},"Rp.",-1)),b(" "+r(t(K)(E.value)),1)])])])]),l("div",Yf,[l("div",Kf,[e(R,{class:"full-width q-py-none",label:"Bayar",color:"primary",icon:"payment",onClick:Y[9]||(Y[9]=pe=>D.value=!0),disable:A.value||I.items.length===0||I.status!=="draft",loading:A.value},null,8,["disable","loading"])]),l("div",Qf,[e(R,{class:"q-py-none",icon:"more_vert",color:"grey",onClick:Y[13]||(Y[13]=Q(()=>{},["stop"])),style:{width:"10px"}},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",onClick:Y[10]||(Y[10]=Q(pe=>B.value=!0,["stop"]))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,null,{default:a(()=>Y[26]||(Y[26]=[b("Edit Rincian")])),_:1})]),_:1})),[[ne],[re]]),J((v(),N(ee,{clickable:"",onClick:Y[11]||(Y[11]=Q(pe=>bt(),["stop"]))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"preview"})]),_:1}),e(M,null,{default:a(()=>Y[27]||(Y[27]=[b("Pratinjau")])),_:1})]),_:1})),[[ne],[re]]),J((v(),N(ee,{clickable:"",onClick:Y[12]||(Y[12]=Q(pe=>nt(),["stop"]))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"cancel",color:"negative"})]),_:1}),e(M,{class:"text-negative"},{default:a(()=>Y[28]||(Y[28]=[b(" Batalkan ")])),_:1})]),_:1})),[[ne],[re]]),e(ot)]),_:1})]),_:1})]),_:1})])])]),_:1}),e(oo,{ref_key:"itemEditorRef",ref:i,modelValue:O.value,"onUpdate:modelValue":Y[14]||(Y[14]=pe=>O.value=pe),item:q.value,onSave:Y[15]||(Y[15]=pe=>ae()),"is-processing":A.value},null,8,["modelValue","item","is-processing"]),e(ao,{modelValue:D.value,"onUpdate:modelValue":Y[16]||(Y[16]=pe=>D.value=pe),onAccepted:rt,form:I,customer:x.value,total:E.value,accounts:t(d).props.accounts},null,8,["modelValue","form","customer","total","accounts"]),e(Xp,{modelValue:y.value,"onUpdate:modelValue":Y[17]||(Y[17]=pe=>y.value=pe),onProductSelected:U},null,8,["modelValue"]),e(so,{modelValue:B.value,"onUpdate:modelValue":Y[18]||(Y[18]=pe=>B.value=pe),data:I,onSave:Y[19]||(Y[19]=pe=>ze()),"is-processing":A.value},null,8,["modelValue","data","is-processing"]),e(no,{modelValue:f.value,"onUpdate:modelValue":Y[20]||(Y[20]=pe=>f.value=pe)},null,8,["modelValue"]),e(ro,{modelValue:$.value,"onUpdate:modelValue":Y[21]||(Y[21]=pe=>$.value=pe),order:I,customer:x.value,total:E.value,payment:C.value},null,8,["modelValue","order","customer","total","payment"])]),_:1})]),_:1},512)],64)}}},Jf=Object.freeze(Object.defineProperty({__proto__:null,default:Wf},Symbol.toStringTag,{value:"Module"})),Gf={__name:"SalesOrderStatusChip",props:{status:{type:String,required:!0}},setup(m){const s=window.CONSTANTS.SALES_ORDER_STATUSES,d={draft:"orange",closed:"green",canceled:"red"};return(o,n)=>(v(),N(qa,{status:m.status,statuses:t(s),colors:d},null,8,["status","statuses"]))}},Xf={__name:"SalesOrderPaymentStatusChip",props:{status:{type:String,required:!0}},setup(m){const s=window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES,d={unpaid:"red",fully_paid:"green",partially_paid:"orange",refunded:"black"};return(o,n)=>(v(),N(qa,{status:m.status,statuses:t(s),colors:d},null,8,["status","statuses"]))}};const Zf={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},eg={class:"q-pa-xs"},tg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},lg={key:0},ag={key:1},og={key:0},ng={class:"flex justify-end"},da="Penjualan",sg={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=Bt(),c=Ft(),_=[{label:"Semua Tahun",value:"all"},{label:`${u}`,value:u},...Pt(u-2,u-1).reverse()],w=[{value:"all",label:"Semua Bulan"},...It()],g=[{value:"all",label:"Semua Status"},...We(window.CONSTANTS.SALES_ORDER_STATUSES)],x=[{value:"all",label:"Semua Status"},...We(window.CONSTANTS.SALES_ORDER_PAYMENT_STATUSES)],C=[{value:"all",label:"Semua Status"},...We(window.CONSTANTS.SALES_ORDER_DELIVERY_STATUSES)],k=Ie({search:"",year:u,month:c,status:"all",payment_status:"all",delivery_status:"all",...Ue()}),A=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),D=[{name:"id",label:"Info Order",field:"id",align:"left",sortable:!0},{name:"customer_id",label:"Pelanggan",field:"customer_id",align:"left"},{name:"total",label:"Total",field:"total",align:"right"},{name:"action",align:"right"}];$e(()=>{I()});const y=P=>{if(P.status=="draft"){O(P);return}B(P)},O=P=>{W.get(route("admin.sales-order.edit",P.id))},B=P=>{W.get(route("admin.sales-order.detail",P.id))},$=P=>{wl.create({title:"Konfirmasi Pembatalan",icon:"question",message:`Batalkan transaksi #${P.formatted_id}?`,focus:"cancel",cancel:!0,persistent:!0}).onOk(()=>{mt.post(route("admin.sales-order.cancel",{id:P.id}),{id:P.id}).then(Z=>{const de=Z.data.data,U=o.value.findIndex(z=>z.id===de.id);if(U===-1){console.warn("Item tidak ditemukan di tabel.");return}o.value[U].status="canceled",s.notify({message:Z.data.message,position:"bottom"})}).catch(Z=>{var U,z;const de=((z=(U=Z.response)==null?void 0:U.data)==null?void 0:z.message)||"Terjadi kesalahan saat membatalkan transaksi.";s.notify({message:de,color:"warning",position:"bottom"}),console.error(Z)})})},q=P=>Ge({title:"Konfirmasi Penghapusan",message:`Hapus transaksi #${P.formatted_id}?`,url:route("admin.sales-order.delete",P.id),fetchItemsCallback:I,loading:n}),I=(P=null)=>{Me({pagination:A,filter:k,props:P,rows:o,url:route("admin.sales-order.data"),loading:n,tableRef:i})},E=()=>{I()},j=X(()=>s.screen.gt.sm?D:D.filter(P=>P.name==="id"||P.name==="action"));return Be(()=>k.year,P=>{P===null&&(k.month=null)}),(P,Z)=>{const de=H("i-head"),U=H("authenticated-layout");return v(),h(L,null,[e(de,{title:da}),e(U,null,Ye({title:a(()=>[b(r(da))]),"right-button":a(()=>[e(R,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:Z[0]||(Z[0]=z=>d.value=!d.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:Z[1]||(Z[1]=z=>t(W).get(P.route("admin.sales-order.add")))})]),default:a(()=>[l("div",eg,[e(Te,{ref_key:"tableRef",ref:i,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:A.value,"onUpdate:pagination":Z[11]||(Z[11]=z=>A.value=z),filter:k.search,loading:n.value,columns:j.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ae({height:t(f)}),onRequest:I,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:z,message:G,filter:Ce})=>[l("div",tg,[l("span",null,r(G)+" "+r(Ce?" with term "+Ce:""),1)])]),body:a(z=>[e(qe,{props:z,class:"cursor-pointer",onClick:Q(G=>y(z.row),["prevent"])},{default:a(()=>[e(F,{key:"id",props:z,class:"wrap-column"},{default:a(()=>[l("div",null,[e(V,{name:"tag"}),b(" "+r(z.row.formatted_id),1)]),l("div",null,[e(V,{class:"inline-icon",name:"calendar_today"}),b(r(t(be)(z.row.datetime)),1)]),t(s).screen.gt.sm?T("",!0):(v(),h(L,{key:0},[z.row.customer?(v(),h("div",lg,[e(V,{name:"person"}),e(nn,{href:P.route("admin.customer.detail",{id:z.row.customer.id}),onClick:Z[8]||(Z[8]=Q(()=>{},["stop"]))},{default:a(()=>[b(r(z.row.customer.username)+" - "+r(z.row.customer.name),1)]),_:2},1032,["href"])])):T("",!0),l("div",null,"Rp. "+r(t(K)(z.row.grand_total)),1),z.row.notes?(v(),h("div",ag,[e(V,{name:"notes"}),b(" "+r(z.row.notes),1)])):T("",!0)],64)),l("div",null,[e(Gf,{status:z.row.status},null,8,["status"]),e(Xf,{status:z.row.payment_status},null,8,["status"]),T("",!0)])]),_:2},1032,["props"]),e(F,{key:"customer_id",props:z},{default:a(()=>[z.row.customer?(v(),h("div",og,[e(V,{name:"person",class:"inline-icon"}),b(" "+r(z.row.customer_username)+" - "+r(z.row.customer_name)+" ",1),Z[12]||(Z[12]=l("br",null,null,-1)),e(V,{name:"phone",class:"inline-icon"}),b(" "+r(z.row.customer_phone)+" ",1),Z[13]||(Z[13]=l("br",null,null,-1)),e(V,{name:"home_pin",class:"inline-icon"}),b(" "+r(z.row.customer_address),1)])):T("",!0)]),_:2},1032,["props"]),e(F,{key:"total",props:z},{default:a(()=>[b(r(t(K)(z.row.grand_total)),1)]),_:2},1032,["props"]),e(F,{key:"action",props:z,onClick:Z[10]||(Z[10]=Q(()=>{},["stop"]))},{default:a(()=>[l("div",ng,[e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:Z[9]||(Z[9]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[z.row.status!="draft"?J((v(),N(ee,{key:0,onClick:Q(G=>B(z.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"visibility"})]),_:1}),e(M,null,{default:a(()=>Z[14]||(Z[14]=[b(" Lihat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]):T("",!0),J((v(),N(ee,{onClick:Q(G=>O(z.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,null,{default:a(()=>[b(r(z.row.status=="draft"?"Edit":"Reopen"),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[ne],[re]]),z.row.status=="draft"?J((v(),N(ee,{key:1,onClick:Q(G=>$(z.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"cancel"})]),_:1}),e(M,null,{default:a(()=>Z[15]||(Z[15]=[b(" Batalkan ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]):T("",!0),e(ot),J((v(),N(ee,{onClick:Q(G=>q(z.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>Z[16]||(Z[16]=[b(" Hapus ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",Zf,[e(se,{modelValue:k.year,"onUpdate:modelValue":[Z[2]||(Z[2]=z=>k.year=z),E],options:_,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),k.year!="all"?(v(),N(se,{key:0,modelValue:k.month,"onUpdate:modelValue":[Z[3]||(Z[3]=z=>k.month=z),E],options:w,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:k.year===null},null,8,["modelValue","disable"])):T("",!0),e(se,{modelValue:k.status,"onUpdate:modelValue":[Z[4]||(Z[4]=z=>k.status=z),E],options:g,label:"Status",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(se,{modelValue:k.payment_status,"onUpdate:modelValue":[Z[5]||(Z[5]=z=>k.payment_status=z),E],options:x,label:"Status Pembayaran",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),T("",!0),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:k.search,"onUpdate:modelValue":Z[7]||(Z[7]=z=>k.search=z),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},rg=Object.freeze(Object.defineProperty({__proto__:null,default:sg},Symbol.toStringTag,{value:"Module"})),ig={class:"q-gutter-sm"},dg={class:"col col-md-6 q-pa-xs"},ug={key:0},mg={class:"text-bold"},cg={key:0},pg={class:"text-caption text-grey-8"},fg={key:1},ua="Buat Penyesuaian Stok",gg={__name:"Create",setup(m){const d=ce().props.products,o=S([]),n=Oe({type:"stock_opname",datetime:new Date,notes:null,product_ids:[]}),i=[{name:"name",label:"Nama Produk",field:"name",align:"left",sortable:!0},{name:"stock",label:"Stok",field:"stock",align:"center",sortable:!1,format:(_,w)=>K(_)+" "+w.uom}],p=We(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),f=()=>{n.product_ids=o.value.map(_=>_.id),Ht(n,{datetime:"YYYY-MM-DD HH:mm:ss"}),Fe({form:n,url:route("admin.stock-adjustment.create")})},u=he(),c=X(()=>u.screen.gt.sm?i:i.filter(_=>_.name==="name"));return(_,w)=>{const g=H("i-head"),x=H("authenticated-layout");return v(),h(L,null,[e(g,{title:ua}),e(x,{"show-drawer-button":!1},{title:a(()=>[b(r(ua))]),"left-button":a(()=>[l("div",ig,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:w[0]||(w[0]=C=>t(W).get(_.route("admin.stock-adjustment.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",dg,[e(Re,{class:"row",onSubmit:Q(f,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-sm"},{default:a(()=>[w[6]||(w[6]=l("div",{class:"text-subtitle2"},[l("b",null,"Info Penyesuaian Stok")],-1)),e(Ut,{modelValue:t(n).datetime,"onUpdate:modelValue":w[1]||(w[1]=C=>t(n).datetime=C),label:"Waktu",error:!!t(n).errors.datetime,disable:t(n).processing,"error-message":t(n).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:t(n).type,"onUpdate:modelValue":w[2]||(w[2]=C=>t(n).type=C),options:t(p),label:"Jenis Penyesuaian",class:"custom-select",error:!!t(n).errors.type,disable:t(n).processing,"map-options":"","emit-value":"","error-message":t(n).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(le,{modelValue:t(n).notes,"onUpdate:modelValue":w[3]||(w[3]=C=>t(n).notes=C),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:t(n).processing,error:!!t(n).errors.notes,"error-message":t(n).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,null,{default:a(()=>[w[7]||(w[7]=l("div",{class:"text-subtitle2"},[l("b",null,"Pilih Produk")],-1)),e(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",columns:c.value,rows:t(d),"binary-state-sort":"","hide-pagination":!0,dense:"","rows-per-page-options":[0],selection:"multiple",selected:o.value,"onUpdate:selected":w[4]||(w[4]=C=>o.value=C)},{"body-cell-name":a(C=>[e(F,{props:C},{default:a(()=>[t(u).screen.lt.md?(v(),h("div",ug,[l("div",mg,r(C.row.name),1),C.row.category?(v(),h("div",cg,r(C.row.category.name),1)):T("",!0),l("div",pg,r(t(K)(C.row.stock))+" "+r(C.row.uom),1)])):(v(),h("div",fg,r(C.row.name),1))]),_:2},1032,["props"])]),_:1},8,["columns","rows","selected"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"play_arrow",type:"submit",label:"Lanjutkan",color:"primary",disable:t(n).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(n).processing,onClick:w[5]||(w[5]=C=>t(W).get(_.route("admin.stock-adjustment.index")))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},bg=Object.freeze(Object.defineProperty({__proto__:null,default:gg},Symbol.toStringTag,{value:"Module"})),vg={class:"q-gutter-sm"},_g={class:"row justify-center"},yg={class:"col col-lg-8 q-pa-sm"},wg={class:"row"},kg={class:"detail"},hg={key:0},$g={key:1},xg={class:"text-grey-9"},Sg={__name:"Detail",setup(m){const s=ce(),d=`Rincian Penyesuaian Stok #${s.props.data.id}`,o=s.props.details,n=[{name:"no",label:"#",field:"no",align:"left"},{name:"product_name",label:"Nama Produk",field:"product_name",align:"left"},{name:"uom",label:"Satuan",field:"uom",align:"left"},{name:"old_quantity",label:"Stok Lama",field:"old_quantity",align:"right",format:f=>K(f)},{name:"new_quantity",label:"Stok Baru",field:"new_quantity",align:"right",format:f=>K(f)},{name:"balance",label:"Selisih Stok",field:"balance",align:"right",format:f=>K(f)},{name:"cost_balance",label:"Selisih Modal",field:"cost_balance",align:"right"},{name:"price_balance",label:"Selisih Harga",field:"price_balance",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}],i=he(),p=X(()=>i.screen.gt.sm?n:n.filter(f=>f.name==="no"));return(f,u)=>{const c=H("i-head"),_=H("i-link"),w=H("authenticated-layout");return v(),h(L,null,[e(c,{title:d}),e(w,{"show-drawer-button":!1},{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",vg,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:u[0]||(u[0]=g=>f.$inertia.get(f.route("admin.stock-adjustment.index")))})])]),default:a(()=>[l("div",_g,[l("div",yg,[l("div",wg,[e(ie,{square:"",flat:"",bordered:"",class:"q-card col"},{default:a(()=>[e(te,null,{default:a(()=>[u[21]||(u[21]=l("div",{class:"text-subtitle1 text-bold text-grey-9"}," Info Penyesuaian Stok ",-1)),l("table",kg,[l("tbody",null,[l("tr",null,[u[1]||(u[1]=l("td",{style:{width:"120px"}},"ID",-1)),u[2]||(u[2]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,"# "+r(t(s).props.data.id),1)]),l("tr",null,[u[3]||(u[3]=l("td",null,"Jenis",-1)),u[4]||(u[4]=l("td",null,":",-1)),l("td",null,r(f.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[t(s).props.data.type]),1)]),l("tr",null,[u[5]||(u[5]=l("td",null,"Status",-1)),u[6]||(u[6]=l("td",null,":",-1)),l("td",null,r(f.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[t(s).props.data.status]),1)]),l("tr",null,[u[7]||(u[7]=l("td",null,"Waktu",-1)),u[8]||(u[8]=l("td",null,":",-1)),l("td",null,r(f.$dayjs(t(s).props.data.datetime).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)]),t(s).props.data.created_at?(v(),h("tr",hg,[u[10]||(u[10]=l("td",null,"Dibuat Oleh",-1)),u[11]||(u[11]=l("td",null,":",-1)),l("td",null,[t(s).props.data.created_by?(v(),h(L,{key:0},[e(_,{href:f.route("admin.user.detail",{id:t(s).props.data.created_by})},{default:a(()=>[b(r(t(s).props.data.created_by.username)+" - "+r(t(s).props.data.created_by.name),1)]),_:1},8,["href"]),u[9]||(u[9]=b(" - "))],64)):T("",!0),b(" "+r(f.$dayjs(new Date(t(s).props.data.created_at)).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)])])):T("",!0),t(s).props.data.updated_at?(v(),h("tr",$g,[u[13]||(u[13]=l("td",null,"Diperbarui oleh",-1)),u[14]||(u[14]=l("td",null,":",-1)),l("td",null,[t(s).props.data.updated_by?(v(),h(L,{key:0},[e(_,{href:f.route("admin.user.detail",{id:t(s).props.data.updated_by})},{default:a(()=>[b(r(t(s).props.data.updated_by.username)+" - "+r(t(s).props.data.updated_by.name),1)]),_:1},8,["href"]),u[12]||(u[12]=b(" - "))],64)):T("",!0),b(" "+r(f.$dayjs(new Date(t(s).props.data.updated_at)).format("dddd, D MMMM YYYY pukul HH:mm:ss")),1)])])):T("",!0),l("tr",null,[u[15]||(u[15]=l("td",null,"Total Modal",-1)),u[16]||(u[16]=l("td",null,":",-1)),l("td",null,[l("div",{class:_e(t(s).props.data.total_cost<0?"text-red-10":t(s).props.data.total_cost>0?"text-green-10":"")}," Rp. "+r(t(K)(t(s).props.data.total_cost)),3)])]),l("tr",null,[u[17]||(u[17]=l("td",null,"Total Harga",-1)),u[18]||(u[18]=l("td",null,":",-1)),l("td",null,[l("div",{class:_e(t(s).props.data.total_price<0?"text-red-10":t(s).props.data.total_price>0?"text-green-10":"")}," Rp. "+r(t(K)(t(s).props.data.total_price)),3)])]),l("tr",null,[u[19]||(u[19]=l("td",null,"Catatan",-1)),u[20]||(u[20]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.notes),1)])])])]),_:1}),e(te,null,{default:a(()=>[u[26]||(u[26]=l("div",{class:"text-subtitle1 text-bold text-grey-9 q-pt-md"}," Rincian ",-1)),e(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",dense:"",columns:p.value,rows:t(o),"hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-no":a(g=>[e(F,{props:g},{default:a(()=>[t(i).screen.lt.md?(v(),h(L,{key:1},[l("div",xg,[l("b",null,"#"+r(g.rowIndex+1),1),b(" - "+r(g.row.product_name),1)]),l("div",null,[b(" Stok Lama: "+r(t(K)(g.row.old_quantity))+" "+r(g.row.uom),1),u[23]||(u[23]=l("br",null,null,-1)),b(" Stok Baru: "+r(t(K)(g.row.new_quantity))+" "+r(g.row.uom),1),u[24]||(u[24]=l("br",null,null,-1)),l("div",{class:_e(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},[b(" Selisih: "+r((g.row.balance>0?"+":"")+t(K)(g.row.balance))+" "+r(g.row.uom),1),u[22]||(u[22]=l("br",null,null,-1)),b(" (Rp. "+r(t(K)(g.row.subtotal_cost))+" / Rp. "+r(t(K)(g.row.subtotal_price))+") ",1)],2),u[25]||(u[25]=l("br",null,null,-1)),b(" "+r(g.row.notes),1)])],64)):(v(),h(L,{key:0},[b(r(g.rowIndex+1),1)],64))]),_:2},1032,["props"])]),"body-cell-balance":a(g=>[e(F,{props:g},{default:a(()=>[l("div",{class:_e(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},r((g.row.balance>0?"+":"")+t(K)(g.row.balance)),3)]),_:2},1032,["props"])]),"body-cell-cost_balance":a(g=>[e(F,{props:g},{default:a(()=>[l("div",{class:_e(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},r(t(K)(g.row.subtotal_cost)),3)]),_:2},1032,["props"])]),"body-cell-price_balance":a(g=>[e(F,{props:g},{default:a(()=>[l("div",{class:_e(g.row.balance<0?"text-red-10":g.row.balance>0?"text-green-10":"")},r(t(K)(g.row.subtotal_price)),3)]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1})]),_:1})])])])]),_:1})],64)}}},Vg=Object.freeze(Object.defineProperty({__proto__:null,default:Sg},Symbol.toStringTag,{value:"Module"})),qg={class:"q-gutter-sm"},Cg={class:"col col-md-6 q-pa-xs"},Tg={class:"text-bold"},Pg={key:0},Ig={class:"text-caption text-grey-8"},ma="Penyesuaian Stok",Og={__name:"Editor",setup(m){const s=ce(),d=Oe({id:s.props.item.id,type:s.props.item.type,datetime:new Date(s.props.item.datetime),notes:s.props.item.notes,action:"save",details:[]}),o=We(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES),n=s.props.details,i=c=>{const _=()=>{d.action=c,d.details=n.map(w=>({id:w.id,new_quantity:w.new_quantity})),Ht(d,{datetime:"YYYY-MM-DD HH:mm:ss"}),Fe({form:d,url:route("admin.stock-adjustment.save")})};c==="close"||c==="cancel"?wl.create({title:"Konfirmasi",message:"Aksi ini tidak dapat dibatalkan, apakah Anda yakin?",cancel:!0,persistent:!0}).onOk(()=>{_()}).onCancel(()=>{}):_()},p=[{name:"product_name",label:"Nama Produk",field:"product_name",align:"left",sortable:!0},{name:"uom",label:"Satuan",field:"uom",align:"center"},{name:"old_quantity",label:"Tercatat",field:"old_quantity",align:"right",format:c=>K(c)},{name:"new_quantity",label:"Aktual",field:"new_quantity",align:"right",format:c=>K(c)},{name:"balance",label:"Selisih",field:"balance",align:"right",format:(c,_)=>K(_.new_quantity-_.old_quantity)}],f=he(),u=X(()=>f.screen.gt.sm?p:p.filter(c=>c.name==="product_name"||c.name==="new_quantity"));return(c,_)=>{const w=H("i-head"),g=H("authenticated-layout");return v(),h(L,null,[e(w,{title:ma}),e(g,{"show-drawer-button":!1},{title:a(()=>[b(r(ma))]),"left-button":a(()=>[l("div",qg,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:_[0]||(_[0]=x=>c.$inertia.get(c.route("admin.stock-adjustment.index")))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Cg,[e(Re,{class:"row",onSubmit:Q(i,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>_[8]||(_[8]=[l("div",{class:"text-subtitle1"},"Info Penyesuaian",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":_[1]||(_[1]=x=>t(d).id=x)},null,512),[[Xe,t(d).id]]),e(Ut,{modelValue:t(d).datetime,"onUpdate:modelValue":_[2]||(_[2]=x=>t(d).datetime=x),label:"Waktu",error:!!t(d).errors.datetime,disable:t(d).processing,"error-message":t(d).errors.datetime},null,8,["modelValue","error","disable","error-message"]),e(se,{modelValue:t(d).type,"onUpdate:modelValue":_[3]||(_[3]=x=>t(d).type=x),options:t(o),label:"Jenis Penyesuaian",class:"custom-select",error:!!t(d).errors.type,disable:t(d).processing,"map-options":"","emit-value":"","error-message":t(d).errors.type,"hide-bottom-space":""},null,8,["modelValue","options","error","disable","error-message"]),e(le,{modelValue:t(d).notes,"onUpdate:modelValue":_[4]||(_[4]=x=>t(d).notes=x),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Catatan","lazy-rules":"",disable:t(d).processing,error:!!t(d).errors.notes,"error-message":t(d).errors.notes,rules:[],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"])]),_:1}),e(te,null,{default:a(()=>[e(Te,{flat:"",bordered:"",square:"",color:"primary",class:"full-height-table","row-key":"id","virtual-scroll":"",columns:u.value,rows:t(n),"binary-state-sort":"","hide-pagination":!0,"rows-per-page-options":[0]},{"body-cell-product_name":a(x=>[e(F,{props:x},{default:a(()=>[l("div",Tg,r(x.row.product_name),1),t(f).screen.lt.md?(v(),h("div",Pg,[l("div",Ig,[b(" Tercatat: "+r(t(K)(x.row.old_quantity))+" ",1),_[9]||(_[9]=l("br",null,null,-1)),b(" Selisih: "+r(t(K)(x.row.new_quantity-x.row.old_quantity)),1)])])):T("",!0)]),_:2},1032,["props"])]),"body-cell-new_quantity":a(x=>[e(F,{props:x},{default:a(()=>[e(le,{modelValue:x.row[x.col.name],"onUpdate:modelValue":C=>x.row[x.col.name]=C,modelModifiers:{number:!0},"input-class":"text-right",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["columns","rows"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",onClick:_[5]||(_[5]=x=>i("save")),label:"Simpan",color:"primary",disable:t(d).processing},null,8,["disable"]),e(R,{icon:"done_all",onClick:_[6]||(_[6]=x=>i("close")),label:"Selesaikan",color:"green",disable:t(d).processing},null,8,["disable"]),e(R,{icon:"close",onClick:_[7]||(_[7]=x=>i("cancel")),label:"Batalkan",color:"red",disable:t(d).processing},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Dg=Object.freeze(Object.defineProperty({__proto__:null,default:Og},Symbol.toStringTag,{value:"Module"})),Rg={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Ug={class:"q-pa-xs"},Mg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Ag={key:0,class:"flex q-gutter-xs"},Eg={class:"flex q-col-gutter-xs"},jg={key:0},Ng={key:1},Bg={class:"flex justify-end"},ca="Penyesuaian Stok",Fg={__name:"Index",setup(m){const s=S([]),d=S(!0),o=S(!1),n=S(null),i=S(null),p=Ke(i),f=Ie({search:"",status:"all",type:"all",...Ue()}),u=[{value:"all",label:"Semua"},...We(window.CONSTANTS.STOCK_ADJUSTMENT_STATUSES)],c=[{value:"all",label:"Semua"},...We(window.CONSTANTS.STOCK_ADJUSTMENT_TYPES)],_=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!0}),w=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"datetime",label:"Waktu",field:"datetime",align:"left",sortable:!0},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"center",sortable:!1},{name:"total_cost",label:"Total Modal",field:"total_cost",align:"right",sortable:!1},{name:"total_price",label:"Total Harga",field:"total_price",align:"right",sortable:!1},{name:"notes",label:"Notes",field:"notes",align:"left",sortable:!1},{name:"action",align:"right"}];$e(()=>{x()});const g=y=>Ge({message:`Hapus Transaksi #${y.id}?`,url:route("admin.stock-adjustment.delete",y.id),fetchItemsCallback:x,loading:d}),x=(y=null)=>Me({pagination:_,filter:f,props:y,rows:s,url:route("admin.stock-adjustment.data"),loading:d,tableRef:n}),C=()=>{x()},k=y=>{y.status=="draft"?W.get(route("admin.stock-adjustment.editor",y.id)):W.get(route("admin.stock-adjustment.detail",y.id))},A=he(),D=X(()=>A.screen.gt.sm?w:w.filter(y=>y.name==="id"||y.name==="action"));return(y,O)=>{const B=H("i-head"),$=H("authenticated-layout");return v(),h(L,null,[e(B,{title:ca}),e($,null,Ye({"right-button":a(()=>[e(R,{icon:o.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=q=>o.value=!o.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:O[1]||(O[1]=q=>t(W).get(y.route("admin.stock-adjustment.create")))})]),title:a(()=>[b(r(ca))]),default:a(()=>[l("div",Ug,[e(Te,{ref_key:"tableRef",ref:n,flat:"",bordered:"",square:"",color:"primary",class:"full-height-table stock-adjustment-list","row-key":"id","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":O[6]||(O[6]=q=>_.value=q),filter:f.search,loading:d.value,columns:D.value,rows:s.value,"rows-per-page-options":[10,25,50],style:Ae({height:t(p)}),onRequest:x,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:I,filter:E})=>[l("div",Mg,[l("span",null,r(I)+" "+r(E?" with term "+E:""),1)])]),body:a(q=>[e(qe,{props:q,onClick:I=>k(q.row),class:"cursor-pointer"},{default:a(()=>[e(F,{key:"id",props:q},{default:a(()=>[t(A).screen.lt.md?(v(),h(L,{key:1},[l("div",Eg,[l("div",null,"#"+r(q.row.formatted_id),1),l("div",null,[e(V,{name:"history"}),b(" "+r(y.$dayjs(new Date(q.row.datetime)).format("DD/MM/YYYY HH:mm")),1)]),e(Sa,{dense:"",size:"sm",color:q.row.status==="draft"?"orange":q.row.status==="closed"?"green":q.row.status==="canceled"?"red":"",icon:q.row.status==="draft"?"emergency":q.row.status==="closed"?"check":q.row.status==="canceled"?"close":""},{default:a(()=>[b(r(y.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[q.row.status]),1)]),_:2},1032,["color","icon"])]),l("div",null,[e(V,{name:"category"}),b(" "+r(y.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[q.row.type]),1)]),q.row.created_by?(v(),h("div",jg,[e(V,{name:"person"}),O[7]||(O[7]=b(" Dibuat: ")),l("b",null,r(q.row.created_by.username),1),e(V,{name:"history"}),b(" "+r(y.$dayjs(new Date(q.row.created_at)).format("DD/MM/YYYY HH:mm")),1)])):T("",!0),q.row.updated_by?(v(),h("div",Ng,[e(V,{name:"person"}),O[8]||(O[8]=b(" Diperbarui: ")),l("b",null,r(q.row.updated_by.username),1),e(V,{name:"history"}),b(" "+r(y.$dayjs(new Date(q.row.updated_at)).format("DD/MM/YYYY HH:mm")),1)])):T("",!0),l("div",{class:_e(q.row.total_cost<0?"text-red-10":q.row.total_cost>0?"text-green-10":"")},[e(V,{name:"money"}),b(" Rp. "+r(t(K)(q.row.total_cost))+" / Rp. "+r(t(K)(q.row.total_price)),1)],2)],64)):(v(),h("div",Ag," #"+r(q.row.formatted_id),1))]),_:2},1032,["props"]),e(F,{key:"datetime",props:q},{default:a(()=>[b(r(y.$dayjs(new Date(q.row.datetime)).format("DD/MM/YYYY HH:mm")),1)]),_:2},1032,["props"]),e(F,{key:"status",props:q,class:"text-center"},{default:a(()=>[b(r(y.$CONSTANTS.STOCK_ADJUSTMENT_STATUSES[q.row.status]),1)]),_:2},1032,["props"]),e(F,{key:"type",props:q},{default:a(()=>[b(r(y.$CONSTANTS.STOCK_ADJUSTMENT_TYPES[q.row.type]),1)]),_:2},1032,["props"]),e(F,{key:"total_cost",props:q},{default:a(()=>[l("div",{class:_e(q.row.total_cost<0?"text-red-10":q.row.total_cost>0?"text-green-10":"")},r(t(K)(q.row.total_cost)),3)]),_:2},1032,["props"]),e(F,{key:"total_price",props:q},{default:a(()=>[l("div",{class:_e(q.row.total_price<0?"text-red-10":q.row.total_price>0?"text-green-10":"")},r(t(K)(q.row.total_price)),3)]),_:2},1032,["props"]),e(F,{key:"notes",props:q},{default:a(()=>[b(r(q.row.notes),1)]),_:2},1032,["props"]),e(F,{key:"action",props:q},{default:a(()=>[l("div",Bg,[e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:O[5]||(O[5]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{onClick:Q(I=>g(q.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>O[9]||(O[9]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[o.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:i},{default:a(()=>[l("div",Rg,[e(se,{modelValue:f.status,"onUpdate:modelValue":[O[2]||(O[2]=q=>f.status=q),C],options:u,label:"Status",dense:"","map-options":"",class:"custom-select col-xs-12 col-sm-2","emit-value":"",outlined:""},null,8,["modelValue"]),e(se,{modelValue:f.type,"onUpdate:modelValue":[O[3]||(O[3]=q=>f.type=q),C],options:c,label:"Jenis",dense:"",class:"custom-select col-xs-12 col-sm-2","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:f.search,"onUpdate:modelValue":O[4]||(O[4]=q=>f.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},zg=Object.freeze(Object.defineProperty({__proto__:null,default:Fg},Symbol.toStringTag,{value:"Module"})),Hg={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Lg={class:"q-pa-xs"},Yg={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Kg={key:0},pa="Riwayat Stok",Qg={__name:"Index",setup(m){ce();const s=S(null),d=S(null),o=Ke(d),n=Bt();Ft();const i=[{label:"Semua Tahun",value:"all"},{label:`${n}`,value:n},...Pt(n-2,n-1).reverse()],p=[{value:"all",label:"Semua Bulan"},...It()],f=[{value:"all",label:"Semua"},...We(window.CONSTANTS.STOCK_MOVEMENT_REF_TYPES)],u=he(),c=S(!1),_=S([]),w=S(!0),g=Ie({type:"all",search:"",...Ue()}),x=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"created_at",descending:!0});let C=[{name:"id",label:u.screen.lt.sm?"Item":"#",field:"id",align:"left",sortable:!0},{name:"created_at",label:"Waktu",field:"created_at",align:"left",sortable:!0},{name:"type",label:"Jenis",field:"type",align:"left",sortable:!0},{name:"product",label:"Produk",field:"product",align:"left"},{name:"quantity_before",label:"Qty Awal",field:"quantity_before",align:"right"},{name:"quantity_after",label:"Qty Akhir",field:"quantity_after",align:"right"},{name:"quantity",label:"Selisih",field:"quantity",align:"right"},{name:"notes",label:"Catatan",field:"notes",align:"left"}];$e(()=>{const O=new URLSearchParams(window.location.search).get("page");O&&(x.value.page=parseInt(O)),k()});const k=(y=null)=>{Me({pagination:x,filter:g,props:y,rows:_,url:route("admin.stock-movement.data"),loading:w,tableRef:s})},A=()=>{k()},D=X(()=>{let y=[...C];return u.screen.gt.sm?y:y.filter(O=>O.name==="id"||O.name==="quantity")});return(y,O)=>{const B=H("i-head"),$=H("authenticated-layout");return v(),h(L,null,[e(B,{title:pa}),e($,null,Ye({title:a(()=>[b(r(pa))]),"right-button":a(()=>[e(R,{icon:c.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:O[0]||(O[0]=q=>c.value=!c.value)},null,8,["icon"])]),default:a(()=>[l("div",Lg,[e(Te,{ref_key:"tableRef",ref:s,class:"full-height-table",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:x.value,"onUpdate:pagination":O[5]||(O[5]=q=>x.value=q),filter:g.search,loading:w.value,columns:D.value,rows:_.value,"rows-per-page-options":[10,25,50],style:Ae({height:t(o)}),onRequest:k,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:q,message:I,filter:E})=>[l("div",Yg,[l("span",null,r(I)+" "+r(E?" with term "+E:""),1)])]),body:a(q=>[e(qe,{props:q},{default:a(()=>[e(F,{key:"id",props:q},{default:a(()=>[l("div",null,[t(u).screen.lt.sm?(v(),h(L,{key:0},[l("div",null,[e(st,null,{default:a(()=>[b(r(y.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[q.row.ref_type]),1)]),_:2},1024)]),e(V,{class:"inline-icon",name:"tag"})],64)):T("",!0),b(" "+r(q.row.formatted_id),1)]),t(u).screen.lt.sm?(v(),h(L,{key:0},[l("div",null,[e(V,{name:"calendar_clock",class:"inline-icon"}),b(" "+r(t(be)(q.row.created_at)),1)]),l("div",null,[e(V,{name:"token",class:"inline-icon"}),b(" "+r(q.row.product.name),1)]),l("div",{class:_e(q.row.quantity>0?"text-positive":"text-negative")},[e(V,{class:"inline-icon",name:"compare_arrows"}),b(" "+r(t(K)(q.row.quantity_before))+" "+r(q.row.uom)+" → "+r(t(K)(q.row.quantity_after))+" "+r(q.row.uom),1)],2),e(we,{text:q.row.notes,icon:"notes",class:"text-grey-8"},null,8,["text"])],64)):T("",!0)]),_:2},1032,["props"]),e(F,{key:"created_at",props:q},{default:a(()=>[b(r(t(be)(q.row.created_at)),1)]),_:2},1032,["props"]),e(F,{key:"type",props:q},{default:a(()=>[b(r(y.$CONSTANTS.STOCK_MOVEMENT_REF_TYPES[q.row.ref_type])+" ",1),q.row.ref?(v(),h("span",Kg,r(q.row.ref),1)):T("",!0)]),_:2},1032,["props"]),e(F,{key:"product",props:q},{default:a(()=>[b(r(q.row.product.name),1)]),_:2},1032,["props"]),e(F,{key:"quantity_before",props:q},{default:a(()=>[b(r(t(K)(q.row.quantity_before))+" "+r(q.row.uom),1)]),_:2},1032,["props"]),e(F,{key:"quantity_after",props:q},{default:a(()=>[b(r(t(K)(q.row.quantity_after))+" "+r(q.row.uom),1)]),_:2},1032,["props"]),e(F,{key:"quantity",props:q,class:_e(q.row.quantity>0?"text-positive":"text-negative")},{default:a(()=>[b(r(t(K)(q.row.quantity))+" "+r(q.row.uom),1)]),_:2},1032,["props","class"]),e(F,{key:"notes",props:q},{default:a(()=>[e(we,{text:q.row.notes},null,8,["text"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[c.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:d},{default:a(()=>[l("div",Hg,[e(se,{modelValue:g.year,"onUpdate:modelValue":[O[1]||(O[1]=q=>g.year=q),A],options:i,label:"Tahun",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),g.year!="all"?(v(),N(se,{key:0,modelValue:g.month,"onUpdate:modelValue":[O[2]||(O[2]=q=>g.month=q),A],options:p,label:"Bulan",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":"",disable:g.year===null},null,8,["modelValue","disable"])):T("",!0),e(se,{modelValue:g.ref_type,"onUpdate:modelValue":[O[3]||(O[3]=q=>g.ref_type=q),A],options:f,label:"Jenis",dense:"",outlined:"",class:"col-xs-6 col-sm-2","emit-value":"","map-options":""},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:g.search,"onUpdate:modelValue":O[4]||(O[4]=q=>g.search=q),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Wg=Object.freeze(Object.defineProperty({__proto__:null,default:Qg},Symbol.toStringTag,{value:"Module"})),Jg={class:"q-gutter-sm"},Gg={class:"q-gutter-sm"},Xg={class:"col col-md-6 q-pa-xs"},Zg={class:"row"},eb={class:"detail"},fa="Rincian Pemasok",tb={__name:"Detail",setup(m){const s=ce();return(d,o)=>{const n=H("i-head"),i=H("authenticated-layout");return v(),h(L,null,[e(n,{title:fa}),e(i,{"show-drawer-button":!1},{title:a(()=>[b(r(fa))]),"left-button":a(()=>[l("div",Jg,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=p=>d.$goBack())})])]),"right-button":a(()=>[l("div",Gg,[e(R,{icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:o[1]||(o[1]=p=>t(W).get(d.route("admin.supplier.edit",{id:t(s).props.data.id})))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Xg,[l("div",Zg,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[14]||(o[14]=l("div",{class:"text-subtitle1 text-bold text-grey-8"}," Info Pemasok ",-1)),l("table",eb,[l("tbody",null,[l("tr",null,[o[2]||(o[2]=l("td",{style:{width:"70px"}},"Nama",-1)),o[3]||(o[3]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.name),1)]),l("tr",null,[o[4]||(o[4]=l("td",null,"Telepon",-1)),o[5]||(o[5]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.phone),1)]),l("tr",null,[o[6]||(o[6]=l("td",null,"Alamat",-1)),o[7]||(o[7]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.address),1)]),l("tr",null,[o[8]||(o[8]=l("td",null,"No. Rek",-1)),o[9]||(o[9]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.bank_account_number),1)]),l("tr",null,[o[10]||(o[10]=l("td",null,"Alamat Retur",-1)),o[11]||(o[11]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.return_address),1)]),l("tr",null,[o[12]||(o[12]=l("td",null,"Status",-1)),o[13]||(o[13]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.active?"Aktif":"Tidak Aktif"),1)])])])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},lb=Object.freeze(Object.defineProperty({__proto__:null,default:tb},Symbol.toStringTag,{value:"Module"}));function bl(m){return m instanceof File||m instanceof Blob||m instanceof FileList&&m.length>0||m instanceof FormData&&Array.from(m.values()).some(s=>bl(s))||typeof m=="object"&&m!==null&&Object.values(m).some(s=>bl(s))}function ab(m,s=null){const d=Oe(m,s);let o=p=>p,n=null;const i={transform:p=>f=>(o=f,p),submit:p=>(f,u,c={})=>{d.wasSuccessful=!1,d.recentlySuccessful=!1,d.clearErrors(),clearTimeout(n),c.onBefore&&c.onBefore(),d.processing=!0,c.onStart&&c.onStart();const _=o(d.data());axios[f](u,_,{headers:{"Content-Type":bl(_)?"multipart/form-data":"application/json"},onUploadProgress:w=>{d.progress=w,c.onProgress&&c.onProgress(w)}}).then(w=>{d.processing=!1,d.progress=null,d.clearErrors(),d.wasSuccessful=!0,d.recentlySuccessful=!0,n=setTimeout(()=>d.recentlySuccessful=!1,2e3),c.onSuccess&&c.onSuccess(w.data),d.defaults(sn(d.data())),d.isDirty=!1}).catch(w=>{var g;d.processing=!1,d.progress=null,d.clearErrors(),((g=w.response)==null?void 0:g.status)===422&&Object.keys(w.response.data.errors).forEach(x=>{d.setError(x,w.response.data.errors[x][0])}),c.onError&&c.onError(w)}).finally(()=>{d.processing=!1,d.progress=null,c.onFinish&&c.onFinish()})}};return new Proxy(d,{get:(p,f,u)=>Object.keys(i).indexOf(f)<0?p[f]:i[f](u)})}const ob={class:"q-gutter-sm"},nb={class:"col col-md-6 q-pa-xs"},sb={style:{"margin-left":"-10px"}},rb={__name:"Editor",setup(m){const s=ce(),d=(s.props.data.id?"Edit":"Tambah")+" Pemasok",o=ab({id:s.props.data.id,name:s.props.data.name,phone:s.props.data.phone,address:s.props.data.address,bank_account_number:s.props.data.bank_account_number,return_address:s.props.data.return_address,active:!!s.props.data.active}),n=()=>Fe({form:o,url:route("admin.supplier.save")});return(i,p)=>{const f=H("i-head"),u=H("authenticated-layout");return v(),h(L,null,[e(f,{title:d}),e(u,{"show-drawer-button":!1},{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",ob,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:p[0]||(p[0]=c=>i.$goBack())})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",nb,[e(Re,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>p[9]||(p[9]=[l("div",{class:"text-subtitle1"},"Info Supplier",-1)])),_:1}),e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":p[1]||(p[1]=c=>t(o).id=c)},null,512),[[Xe,t(o).id]]),e(le,{autofocus:"",modelValue:t(o).name,"onUpdate:modelValue":p[2]||(p[2]=c=>t(o).name=c),modelModifiers:{trim:!0},label:"Nama","lazy-rules":"",error:!!t(o).errors.name,disable:t(o).processing,"error-message":t(o).errors.name,rules:[c=>c&&c.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(le,{modelValue:t(o).phone,"onUpdate:modelValue":p[3]||(p[3]=c=>t(o).phone=c),modelModifiers:{trim:!0},type:"text",label:"No HP","lazy-rules":"",disable:t(o).processing,error:!!t(o).errors.phone,"error-message":t(o).errors.phone,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(le,{modelValue:t(o).address,"onUpdate:modelValue":p[4]||(p[4]=c=>t(o).address=c),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Alamat","lazy-rules":"",disable:t(o).processing,error:!!t(o).errors.address,"error-message":t(o).errors.address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(le,{modelValue:t(o).bank_account_number,"onUpdate:modelValue":p[5]||(p[5]=c=>t(o).bank_account_number=c),modelModifiers:{trim:!0},type:"text",label:"No Rek","lazy-rules":"",disable:t(o).processing,error:!!t(o).errors.bank_account_number,"error-message":t(o).errors.bank_account_number,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(le,{modelValue:t(o).return_address,"onUpdate:modelValue":p[6]||(p[6]=c=>t(o).return_address=c),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Alamat Return","lazy-rules":"",disable:t(o).processing,error:!!t(o).errors.return_address,"error-message":t(o).errors.return_address,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),l("div",sb,[e(Gt,{class:"full-width q-pl-none",modelValue:t(o).active,"onUpdate:modelValue":p[7]||(p[7]=c=>t(o).active=c),disable:t(o).processing,label:"Aktif"},null,8,["modelValue","disable"])])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(o).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(o).processing,onClick:p[8]||(p[8]=c=>i.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},ib=Object.freeze(Object.defineProperty({__proto__:null,default:rb},Symbol.toStringTag,{value:"Module"})),db={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},ub={class:"q-pa-xs"},mb={class:"full-width row flex-center text-grey-8 q-gutter-sm"},cb={class:"flex justify-end"},ga="Pemasok",pb={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=Ie({search:"",status:"active",...Ue()}),c=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"phone",label:"No HP",field:"phone",align:"left",sortable:!0},{name:"address",label:"Alamat",field:"address",align:"left",sortable:!0},{name:"bank_account_number",label:"No Rek",field:"bank_account_number",align:"left",sortable:!0},{name:"action",align:"right"}],w=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}];$e(()=>{x()});const g=D=>Ge({message:`Hapus pemasok ${D.name}?`,url:route("admin.supplier.delete",D.id),fetchItemsCallback:x,loading:n}),x=(D=null)=>{Me({pagination:c,filter:u,props:D,rows:o,url:route("admin.supplier.data"),loading:n,tableRef:i})},C=()=>x(),k=D=>W.get(route("admin.supplier.detail",{id:D.id})),A=X(()=>s.screen.gt.sm?_:_.filter(D=>D.name==="name"||D.name==="action"));return(D,y)=>{const O=H("i-head"),B=H("authenticated-layout");return v(),h(L,null,[e(O,{title:ga}),e(B,null,Ye({title:a(()=>[b(r(ga))]),"right-button":a(()=>[e(R,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:y[0]||(y[0]=$=>d.value=!d.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:y[1]||(y[1]=$=>t(W).get(D.route("admin.supplier.add")))})]),default:a(()=>[l("div",ub,[e(Te,{class:"full-height-table",ref_key:"tableRef",ref:i,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":y[5]||(y[5]=$=>c.value=$),filter:u.search,loading:n.value,columns:A.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ae({height:t(f)}),onRequest:x,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:$,message:q,filter:I})=>[l("div",mb,[l("span",null,r(q)+" "+r(I?" with term "+I:""),1)])]),body:a($=>[e(qe,{props:$,class:_e([$.row.active?"":"bg-red-1","cursor-pointer"]),onClick:q=>k($.row)},{default:a(()=>[e(F,{key:"name",props:$,class:"wrap-column"},{default:a(()=>[l("div",null,[t(s).screen.lt.md?(v(),N(V,{key:0,name:"person"})):T("",!0),b(" "+r($.row.name),1)]),t(s).screen.lt.md?(v(),h(L,{key:0},[l("div",null,[e(V,{name:"phone"}),b(" "+r($.row.phone),1)]),l("div",null,[e(V,{name:"credit_card"}),b(" "+r($.row.bank_account_number),1)]),l("div",null,[e(V,{name:"home_pin"}),b(" "+r($.row.address),1)])],64)):T("",!0)]),_:2},1032,["props"]),e(F,{key:"phone",props:$},{default:a(()=>[b(r($.row.phone),1)]),_:2},1032,["props"]),e(F,{key:"address",props:$},{default:a(()=>[b(r($.row.address),1)]),_:2},1032,["props"]),e(F,{key:"bank_account_number",props:$},{default:a(()=>[b(r($.row.bank_account_number),1)]),_:2},1032,["props"]),e(F,{key:"action",props:$},{default:a(()=>[l("div",cb,[e(R,{icon:"more_vert",dense:"",flat:"",rounded:"",onClick:y[4]||(y[4]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",onClick:Q(q=>t(W).get(D.route("admin.supplier.duplicate",$.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(M,{icon:"copy"},{default:a(()=>y[6]||(y[6]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{clickable:"",onClick:Q(q=>t(W).get(D.route("admin.supplier.edit",$.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,{icon:"edit"},{default:a(()=>y[7]||(y[7]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{onClick:Q(q=>g($.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>y[8]||(y[8]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",db,[e(se,{class:"custom-select col-xs-12 col-sm-2",style:{"min-width":"150px"},modelValue:u.status,"onUpdate:modelValue":[y[2]||(y[2]=$=>u.status=$),C],options:w,label:"Status",dense:"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":y[3]||(y[3]=$=>u.search=$),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},fb=Object.freeze(Object.defineProperty({__proto__:null,default:pb},Symbol.toStringTag,{value:"Module"})),gb={class:"q-gutter-sm"},bb={class:"q-gutter-sm"},vb={class:"col col-md-6 q-pa-xs"},_b={class:"row"},yb={class:"detail"},wb={key:0},kb={key:1,class:"text-grey-8 text-italic"},hb={key:2},$b={class:"text-subtitle2 text-bold text-grey-8 q-mt-xs"},xb={key:3,class:"text-grey-8 text-italic"},ba="Rincian Role Pengguna",Sb={__name:"Detail",setup(m){const s=ce(),d=X(()=>{const o={};return s.props.data.permissions&&s.props.data.permissions.forEach(n=>{const i=n.category;o[i]||(o[i]=[]),o[i].push(n)}),o});return(o,n)=>{const i=H("i-head"),p=H("authenticated-layout");return v(),h(L,null,[e(i,{title:ba}),e(p,{"show-drawer-button":!1},{title:a(()=>[b(r(ba))]),"left-button":a(()=>[l("div",gb,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:n[0]||(n[0]=f=>o.$goBack())})])]),"right-button":a(()=>[l("div",bb,[e(R,{icon:"edit",dense:"",color:"grey",size:"sm",rounded:"",flat:"",onClick:n[1]||(n[1]=f=>t(W).get(o.route("admin.user-role.edit",{id:t(s).props.data.id})))})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",vb,[l("div",_b,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[n[6]||(n[6]=l("div",{class:"text-subtitle1 text-bold text-grey-8"},"Info Role",-1)),l("table",yb,[l("tbody",null,[l("tr",null,[n[2]||(n[2]=l("td",{style:{width:"100px"}},"Nama Role",-1)),n[3]||(n[3]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.name),1)]),l("tr",null,[n[4]||(n[4]=l("td",null,"Deskripsi",-1)),n[5]||(n[5]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.description),1)])])]),n[7]||(n[7]=l("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Pengguna ",-1)),t(s).props.data.users.length>0?(v(),h("div",wb,[(v(!0),h(L,null,lt(t(s).props.data.users,f=>(v(),h("div",null," ● "+r(f.username)+" - "+r(f.name),1))),256))])):(v(),h("div",kb," Belum ada akun pengguna yang terdaftar. ")),n[8]||(n[8]=l("div",{class:"text-subtitle1 text-bold text-grey-8 q-mt-md"}," Daftar Hak Akses ",-1)),t(s).props.data.permissions.length>0?(v(),h("div",hb,[(v(!0),h(L,null,lt(d.value,(f,u)=>(v(),h("div",{key:u},[l("div",$b,r(u),1),(v(!0),h(L,null,lt(f,c=>(v(),h("div",{key:c.id}," ● "+r(c.label),1))),128))]))),128))])):(v(),h("div",xb," Belum ada hak akses yang ditetapkan. "))]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}}},Vb=Object.freeze(Object.defineProperty({__proto__:null,default:Sb},Symbol.toStringTag,{value:"Module"})),qb={class:"q-gutter-sm"},Cb={class:"col col-md-6 q-pa-xs"},Tb={class:"text-subtitle2 text-bold text-grey-8 q-mt-md q-mb-sm"},Pb={__name:"Editor",setup(m){const s=ce(),d=(s.props.data.id?"Edit":"Tambah")+" Role",o=Oe({id:s.props.data.id,name:s.props.data.name,description:s.props.data.description,permissions:s.props.data.permissions?s.props.data.permissions.map(p=>p.id):[]}),n=()=>Fe({form:o,url:route("admin.user-role.save")}),i=X(()=>{const p={};return s.props.permissions&&s.props.permissions.forEach(f=>{const u=f.category;p[u]||(p[u]=[]),p[u].push(f)}),p});return(p,f)=>{const u=H("i-head"),c=H("authenticated-layout");return v(),h(L,null,[e(u,{title:d}),e(c,{"show-drawer-button":!1},{title:a(()=>[b(r(d))]),"left-button":a(()=>[l("div",qb,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=_=>p.$goBack())})])]),default:a(()=>[e(ke,{class:"row justify-center"},{default:a(()=>[l("div",Cb,[e(Re,{class:"row",onSubmit:Q(n,["prevent"]),onValidationError:t(De)},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=_=>t(o).id=_)},null,512),[[Xe,t(o).id]]),e(le,{autofocus:"",modelValue:t(o).name,"onUpdate:modelValue":f[2]||(f[2]=_=>t(o).name=_),modelModifiers:{trim:!0},label:"Nama Role","lazy-rules":"",error:!!t(o).errors.name,disable:t(o).processing,"error-message":t(o).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],"hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(le,{modelValue:t(o).description,"onUpdate:modelValue":f[3]||(f[3]=_=>t(o).description=_),modelModifiers:{trim:!0},type:"textarea",autogrow:"",counter:"",maxlength:"200",label:"Deskripsi","lazy-rules":"",disable:t(o).processing,error:!!t(o).errors.description,"error-message":t(o).errors.description,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),(v(!0),h(L,null,lt(i.value,(_,w)=>(v(),h("div",{key:w},[l("div",Tb,r(w),1),(v(!0),h(L,null,lt(_,g=>(v(),h("div",{key:g.id},[e(Gt,{class:"q-ma-none q-pa-none list-checkbox",modelValue:t(o).permissions,"onUpdate:modelValue":x=>t(o).permissions=x,val:g.id,label:g.label,color:"primary"},null,8,["modelValue","onUpdate:modelValue","val","label"])]))),128))]))),128))]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(o).processing},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",disable:t(o).processing,onClick:f[4]||(f[4]=_=>p.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onValidationError"])])]),_:1})]),_:1})],64)}}},Ib=ft(Pb,[["__scopeId","data-v-0fca32fe"]]),Ob=Object.freeze(Object.defineProperty({__proto__:null,default:Ib},Symbol.toStringTag,{value:"Module"})),Db={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},Rb={class:"q-pa-xs"},Ub={class:"full-width row flex-center text-grey-8 q-gutter-sm"},Mb={class:"flex justify-end"},va="Role Pengguna",Ab={__name:"Index",setup(m){const s=he(),d=S(!1),o=S([]),n=S(!0),i=S(null),p=S(null),f=Ke(p),u=Ie({search:"",...Ue()}),c=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"name",descending:!1}),_=[{name:"name",label:"Nama Role",field:"name",align:"left",sortable:!0},{name:"action",align:"right"}];$e(()=>{g()});const w=k=>Ge({message:`Hapus role ${k.name}?`,url:route("admin.user-role.delete",k.id),fetchItemsCallback:g,loading:n}),g=(k=null)=>{Me({pagination:c,filter:u,props:k,rows:o,url:route("admin.user-role.data"),loading:n,tableRef:i})},x=k=>W.get(route("admin.user-role.detail",{id:k.id})),C=X(()=>s.screen.gt.sm?_:_.filter(k=>k.name==="name"||k.name==="action"));return(k,A)=>{const D=H("i-head"),y=H("authenticated-layout");return v(),h(L,null,[e(D,{title:va}),e(y,null,Ye({title:a(()=>[b(r(va))]),"right-button":a(()=>[e(R,{icon:d.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:A[0]||(A[0]=O=>d.value=!d.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",class:"q-ml-sm",color:"primary",onClick:A[1]||(A[1]=O=>t(W).get(k.route("admin.user-role.add")))})]),default:a(()=>[l("div",Rb,[e(Te,{class:"full-height-table",ref_key:"tableRef",ref:i,s:"",flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:c.value,"onUpdate:pagination":A[4]||(A[4]=O=>c.value=O),filter:u.search,loading:n.value,columns:C.value,rows:o.value,"rows-per-page-options":[10,25,50],style:Ae({height:t(f)}),onRequest:g,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:O,message:B,filter:$})=>[l("div",Ub,[l("span",null,r(B)+" "+r($?" with term "+$:""),1)])]),body:a(O=>[e(qe,{props:O,class:"cursor-pointer",onClick:B=>x(O.row)},{default:a(()=>[e(F,{key:"name",props:O,class:"wrap-column"},{default:a(()=>[l("div",null,[t(s).screen.lt.md?(v(),N(V,{key:0,name:"person"})):T("",!0),b(" "+r(O.row.name),1)])]),_:2},1032,["props"]),e(F,{key:"action",props:O},{default:a(()=>[l("div",Mb,[k.$can("admin.user-role.add")||k.$can("admin.user-role.edit")||k.$can("admin.user-role.delete")?(v(),N(R,{key:0,icon:"more_vert",dense:"",flat:"",rounded:"",onClick:A[3]||(A[3]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[k.$can("admin.user-role.add")?J((v(),N(ee,{key:0,clickable:"",onClick:Q(B=>t(W).get(k.route("admin.user-role.duplicate",O.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(M,{icon:"copy"},{default:a(()=>A[5]||(A[5]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]):T("",!0),k.$can("admin.user-role.edit")?J((v(),N(ee,{key:1,clickable:"",onClick:Q(B=>t(W).get(k.route("admin.user-role.edit",O.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,{icon:"edit"},{default:a(()=>A[6]||(A[6]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]):T("",!0),k.$can("admin.user-role.delete")?J((v(),N(ee,{key:2,onClick:Q(B=>w(O.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>A[7]||(A[7]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]):T("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):T("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["pagination","filter","loading","columns","rows","style"])])]),_:2},[d.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:p},{default:a(()=>[l("div",Db,[e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:u.search,"onUpdate:modelValue":A[2]||(A[2]=O=>u.search=O),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},Eb=Object.freeze(Object.defineProperty({__proto__:null,default:Ab},Symbol.toStringTag,{value:"Module"})),jb={class:"q-gutter-sm"},Nb={class:"q-gutter-sm"},Bb={class:"row justify-center"},Fb={class:"col col-md-6 q-pa-xs"},zb={class:"row"},Hb={class:"detail"},Lb={key:0},_a="Rincian Pengguna",Yb={__name:"Detail",setup(m){const s=ce();return(d,o)=>{const n=H("i-head"),i=H("authenticated-layout");return v(),h(L,null,[e(n,{title:_a}),e(i,{"show-drawer-button":!1},{title:a(()=>[b(r(_a))]),"left-button":a(()=>[l("div",jb,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:o[0]||(o[0]=p=>d.$inertia.get(d.route("admin.user.index")))})])]),"right-button":a(()=>[l("div",Nb,[e(R,{icon:"edit",dense:"",rounded:"",flat:"",size:"sm",color:"grey",onClick:o[1]||(o[1]=p=>d.$inertia.get(d.route("admin.user.edit",{id:t(s).props.data.id})))})])]),default:a(()=>[l("div",Bb,[l("div",Fb,[l("div",zb,[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,null,{default:a(()=>[o[19]||(o[19]=l("div",{class:"text-subtitle1 text-bold text-grey-9"}," Profil Pengguna ",-1)),l("table",Hb,[l("tbody",null,[l("tr",null,[o[2]||(o[2]=l("td",{style:{width:"125px"}},"ID Pengguna",-1)),o[3]||(o[3]=l("td",{style:{width:"1px"}},":",-1)),l("td",null,r(t(s).props.data.username),1)]),l("tr",null,[o[4]||(o[4]=l("td",null,"Nama Pengguna",-1)),o[5]||(o[5]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.name),1)]),l("tr",null,[o[6]||(o[6]=l("td",null,"Hak Akses",-1)),o[7]||(o[7]=l("td",null,":",-1)),l("td",null,r(d.$CONSTANTS.USER_TYPES[t(s).props.data.type]),1)]),l("tr",null,[o[8]||(o[8]=l("td",null,"Akun Kas Kasir",-1)),o[9]||(o[9]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.cashier_account_id?t(s).props.data.cashier_account.name:"-"),1)]),l("tr",null,[o[10]||(o[10]=l("td",null,"Dibuat",-1)),o[11]||(o[11]=l("td",null,":",-1)),l("td",null,r(d.$dayjs(t(s).props.data.created_at).format("DD MMMM YY HH:mm:ss")),1)]),l("tr",null,[o[12]||(o[12]=l("td",null,"Diperbarui",-1)),o[13]||(o[13]=l("td",null,":",-1)),l("td",null,r(d.$dayjs(t(s).props.data.updated_at).format("DD MMMM YY HH:mm:ss")),1)]),l("tr",null,[o[14]||(o[14]=l("td",null,"Terakhir login",-1)),o[15]||(o[15]=l("td",null,":",-1)),l("td",null,r(t(s).props.data.last_login_datetime?d.$dayjs(t(s).props.data.last_login_datetime).format("DD MMMM YYYY HH:mm:ss"):"Belum pernah login"),1)]),t(s).props.data.last_activity_datetime?(v(),h("tr",Lb,[o[17]||(o[17]=l("td",null,"Aktifitas Terakhir",-1)),o[18]||(o[18]=l("td",null,":",-1)),l("td",null,[b(r(d.$dayjs(t(s).props.data.last_activity_datetime).format("DD MMMM YYYY HH:mm:ss"))+" ",1),o[16]||(o[16]=l("br",null,null,-1)),b(r(t(s).props.data.last_activity_description),1)])])):T("",!0)])])]),_:1})]),_:1})])])])]),_:1})],64)}}},Kb=Object.freeze(Object.defineProperty({__proto__:null,default:Yb},Symbol.toStringTag,{value:"Module"}));function Qb(m){return new RegExp("^(?=.{3,16}$)(?![_-])(?!.*[_-]{2})[a-zA-Z0-9_-]+(?<![_-])$").test(m)}const Wb={class:"q-gutter-sm"},Jb={class:"row justify-center"},Gb={class:"col col-md-6 q-pa-xs"},Xb={__name:"Editor",setup(m){const s=We(window.CONSTANTS.USER_TYPES),d=ce(),o=d.props.data.id?"Edit Pengguna":"Tambah Pengguna",n=Oe({id:d.props.data.id,name:d.props.data.name,username:d.props.data.username,password:"",type:d.props.data.type?d.props.data.type:s[0].value,active:!!d.props.data.active}),i=()=>Fe({form:n,url:route("admin.user.save")});return(p,f)=>{const u=H("i-head"),c=H("authenticated-layout");return v(),h(L,null,[e(u,{title:t(o)},null,8,["title"]),e(c,{"show-drawer-button":!1},{title:a(()=>[b(r(t(o)),1)]),"left-button":a(()=>[l("div",Wb,[e(R,{icon:"arrow_back",dense:"",color:"grey-7",flat:"",rounded:"",onClick:f[0]||(f[0]=_=>p.$goBack())})])]),default:a(()=>[l("div",Jb,[l("div",Gb,[e(Re,{class:"row",onSubmit:Q(i,["prevent"])},{default:a(()=>[e(ie,{square:"",flat:"",bordered:"",class:"col"},{default:a(()=>[e(te,{class:"q-pt-none"},{default:a(()=>[J(l("input",{type:"hidden",name:"id","onUpdate:modelValue":f[1]||(f[1]=_=>t(n).id=_)},null,512),[[Xe,t(n).id]]),e(le,{modelValue:t(n).name,"onUpdate:modelValue":f[2]||(f[2]=_=>t(n).name=_),modelModifiers:{trim:!0},label:"Nama",error:!!t(n).errors.name,disable:t(n).processing,"error-message":t(n).errors.name,rules:[_=>_&&_.length>0||"Nama harus diisi."],autofocus:"","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","error","disable","error-message","rules"]),e(le,{modelValue:t(n).username,"onUpdate:modelValue":f[3]||(f[3]=_=>t(n).username=_),modelModifiers:{trim:!0},type:"text",label:"ID Pengguna","lazy-rules":"",disable:t(n).processing,error:!!t(n).errors.username,"error-message":t(n).errors.username,rules:[_=>_&&_.length>0||"ID Pengguna harus diisi.",_=>t(Qb)(_)||"ID Pengguna tidak valid."],"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message","rules"]),e(le,{modelValue:t(n).password,"onUpdate:modelValue":f[4]||(f[4]=_=>t(n).password=_),type:"password",label:"Kata Sandi","lazy-rules":"",disable:t(n).processing,error:!!t(n).errors.password,"error-message":t(n).errors.password,"hide-bottom-space":""},null,8,["modelValue","disable","error","error-message"]),e(se,{modelValue:t(n).role,"onUpdate:modelValue":f[5]||(f[5]=_=>t(n).role=_),label:"Hak Akses",options:t(s),"map-options":"","emit-value":"","lazy-rules":"",disable:t(n).processing,"transition-show":"jump-up","transition-hide":"jump-up",error:!!t(n).errors.role,"error-message":t(n).errors.role,"hide-bottom-space":""},null,8,["modelValue","options","disable","error","error-message"]),e(al,{modelValue:t(n).active,"onUpdate:modelValue":f[6]||(f[6]=_=>t(n).active=_),disable:t(n).processing,label:"Aktif"},null,8,["modelValue","disable"])]),_:1}),e(te,{class:"q-gutter-sm"},{default:a(()=>[e(R,{icon:"save",type:"submit",label:"Simpan",color:"primary",disable:t(n).processing,onClick:i},null,8,["disable"]),e(R,{icon:"cancel",label:"Batal",class:"text-black",disable:t(n).processing,onClick:f[7]||(f[7]=_=>p.$goBack())},null,8,["disable"])]),_:1})]),_:1})]),_:1})])])]),_:1})],64)}}},Zb=Object.freeze(Object.defineProperty({__proto__:null,default:Xb},Symbol.toStringTag,{value:"Module"})),e1={class:"row q-col-gutter-xs items-center q-pa-sm full-width"},t1={class:"q-pa-xs"},l1={class:"full-width row flex-center text-grey-8 q-gutter-sm"},a1={class:"elipsis",style:{"max-width":"200px"}},o1={class:"flex justify-end"},ya="Pengguna",n1={__name:"Index",setup(m){const s=[{value:"all",label:"Semua"},...We(window.CONSTANTS.USER_TYPES)],d=[{value:"all",label:"Semua"},{value:"active",label:"Aktif"},{value:"inactive",label:"Tidak Aktif"}],o=ce(),n=he(),i=o.props.auth.user,p=S([]),f=S(!0),u=S(!1),c=Ie({role:"all",status:"active",search:""}),_=S({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"username",descending:!1}),w=[{name:"username",label:"ID Pengguna",field:"username",align:"left",sortable:!0},{name:"name",label:"Nama",field:"name",align:"left",sortable:!0},{name:"role",label:"Hak Akses",field:"role",align:"center",sortable:!0},{name:"action",align:"right"}];$e(()=>{x()});const g=()=>x(),x=(B=null)=>Me({pagination:_,props:B,rows:p,loading:f,filter:c,url:route("admin.user.data"),tableRef:D}),C=B=>Ge({url:route("admin.user.delete",B.id),message:`Hapus pengguna ${B.username}?`,fetchItemsCallback:x,loading:f}),k=X(()=>n.screen.gt.sm?w:w.filter(B=>B.name==="username"||B.name==="action")),A=B=>W.get(route("admin.user.detail",B.id)),D=S(null),y=S(null),O=Ke(y);return(B,$)=>{const q=H("i-head"),I=H("authenticated-layout");return v(),h(L,null,[e(q,{title:ya}),e(I,null,Ye({title:a(()=>[b(r(ya))]),"right-button":a(()=>[e(R,{icon:u.value?"filter_alt_off":"filter_alt",color:"grey",dense:"",rounded:"",flat:"",onClick:$[0]||($[0]=E=>u.value=!u.value)},null,8,["icon"]),e(R,{icon:"add",dense:"",rounded:"",color:"primary",class:"q-ml-sm",onClick:$[1]||($[1]=E=>t(W).get(B.route("admin.user.add")))})]),default:a(()=>[l("div",t1,[e(Te,{ref_key:"tableRef",ref:D,class:"full-height-table",style:Ae({height:t(O)}),flat:"",bordered:"",square:"",color:"primary","row-key":"id","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":$[6]||($[6]=E=>_.value=E),filter:c.search,loading:f.value,columns:k.value,rows:p.value,"rows-per-page-options":[10,25,50],onRequest:x,"binary-state-sort":""},{loading:a(()=>[e(je,{showing:"",color:"red"})]),"no-data":a(({icon:E,message:j,term:P})=>[l("div",l1,[l("span",null,r(j)+" "+r(P?" with term "+P:""),1)])]),body:a(E=>[e(qe,{props:E,class:_e([E.row.active?"":"bg-red-1","cursor-pointer"]),onClick:j=>A(E.row)},{default:a(()=>[e(F,{key:"username",props:E},{default:a(()=>[l("div",null,r(E.row.username),1),t(n).screen.gt.sm?T("",!0):(v(),h(L,{key:0},[l("div",null,[e(V,{name:"person"}),b(" "+r(E.row.name),1)]),l("div",a1,[e(V,{name:"group"}),l("span",null,r(B.$CONSTANTS.USER_TYPES[E.row.type]),1)])],64))]),_:2},1032,["props"]),e(F,{key:"name",props:E},{default:a(()=>[b(r(E.row.name),1)]),_:2},1032,["props"]),e(F,{key:"role",props:E,align:"center"},{default:a(()=>[l("span",null,r(B.$CONSTANTS.USER_TYPES[E.row.type]),1)]),_:2},1032,["props"]),e(F,{key:"action",props:E},{default:a(()=>[l("div",o1,[e(R,{disable:E.row.id==t(i).id||E.row.username=="admin",icon:"more_vert",dense:"",flat:"",rounded:"",onClick:$[5]||($[5]=Q(()=>{},["stop"]))},{default:a(()=>[e(Je,{anchor:"bottom right",self:"top right","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ee,{style:{width:"200px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",onClick:Q(j=>t(W).get(B.route("admin.user.duplicate",E.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"file_copy"})]),_:1}),e(M,{icon:"copy"},{default:a(()=>$[7]||($[7]=[b(" Duplikat ")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{clickable:"",onClick:Q(j=>t(W).get(B.route("admin.user.edit",E.row.id)),["stop"])},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"edit"})]),_:1}),e(M,{icon:"edit"},{default:a(()=>$[8]||($[8]=[b("Edit")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]]),J((v(),N(ee,{onClick:Q(j=>C(E.row),["stop"]),clickable:""},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"delete_forever"})]),_:1}),e(M,null,{default:a(()=>$[9]||($[9]=[b("Hapus")])),_:1})]),_:2},1032,["onClick"])),[[ne],[re]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])])]),_:2},1032,["props"])]),_:2},1032,["props","class","onClick"])]),_:1},8,["style","pagination","filter","loading","columns","rows"])])]),_:2},[u.value?{name:"header",fn:a(()=>[e(Qe,{class:"filter-bar",ref_key:"filterToolbarRef",ref:y},{default:a(()=>[l("div",e1,[e(se,{modelValue:c.type,"onUpdate:modelValue":[$[2]||($[2]=E=>c.type=E),g],class:"custom-select col-xs-12 col-sm-2",options:s,label:"Jenis Akun",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(se,{modelValue:c.status,"onUpdate:modelValue":[$[3]||($[3]=E=>c.status=E),g],class:"custom-select col-xs-12 col-sm-2",options:d,label:"Status",dense:"","map-options":"","emit-value":"",outlined:"",style:{"min-width":"150px"}},null,8,["modelValue"]),e(le,{class:"col",outlined:"",dense:"",debounce:"300",modelValue:c.search,"onUpdate:modelValue":$[4]||($[4]=E=>c.search=E),placeholder:"Cari",clearable:""},{append:a(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1},512)]),key:"0"}:void 0]),1024)],64)}}},s1=Object.freeze(Object.defineProperty({__proto__:null,default:n1},Symbol.toStringTag,{value:"Module"})),r1=gt({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(m,{slots:s,emit:d}){let o=!1,n,i,p=null,f=null,u,c;function _(){n&&n(),n=null,o=!1,p!==null&&(clearTimeout(p),p=null),f!==null&&(clearTimeout(f),f=null),i!==void 0&&i.removeEventListener("transitionend",u),u=null}function w(k,A,D){A!==void 0&&(k.style.height=`${A}px`),k.style.transition=`height ${m.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,n=D}function g(k,A){k.style.overflowY=null,k.style.height=null,k.style.transition=null,_(),A!==c&&d(A)}function x(k,A){let D=0;i=k,o===!0?(_(),D=k.offsetHeight===k.scrollHeight?0:void 0):(c="hide",k.style.overflowY="hidden"),w(k,D,A),p=setTimeout(()=>{p=null,k.style.height=`${k.scrollHeight}px`,u=y=>{f=null,(Object(y)!==y||y.target===k)&&g(k,"show")},k.addEventListener("transitionend",u),f=setTimeout(u,m.duration*1.1)},100)}function C(k,A){let D;i=k,o===!0?_():(c="show",k.style.overflowY="hidden",D=k.scrollHeight),w(k,D,A),p=setTimeout(()=>{p=null,k.style.height=0,u=y=>{f=null,(Object(y)!==y||y.target===k)&&g(k,"hide")},k.addEventListener("transitionend",u),f=setTimeout(u,m.duration*1.1)},100)}return Xt(()=>{o===!0&&_()}),()=>fe(ha,{css:!1,appear:m.appear,onEnter:x,onLeave:C},s.default)}}),St=rn({}),i1=Object.keys(Ca),_t=gt({name:"QExpansionItem",props:{...Ca,...un,...vl,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...dn,"click","afterShow","afterHide"],setup(m,{slots:s,emit:d}){const{proxy:{$q:o}}=$t(),n=_l(m,o),i=S(m.modelValue!==null?m.modelValue:m.defaultOpened),p=S(null),f=mn(),{show:u,hide:c,toggle:_}=cn({showing:i});let w,g;const x=X(()=>`q-expansion-item q-item-type q-expansion-item--${i.value===!0?"expanded":"collapsed"} q-expansion-item--${m.popup===!0?"popup":"standard"}`),C=X(()=>m.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:m.contentInsetLevel*56+"px"}),k=X(()=>m.disable!==!0&&(m.href!==void 0||m.to!==void 0&&m.to!==null&&m.to!=="")),A=X(()=>{const ae={};return i1.forEach(Ve=>{ae[Ve]=m[Ve]}),ae}),D=X(()=>k.value===!0||m.expandIconToggle!==!0),y=X(()=>m.expandedIcon!==void 0&&i.value===!0?m.expandedIcon:m.expandIcon||o.iconSet.expansionItem[m.denseToggle===!0?"denseIcon":"icon"]),O=X(()=>m.disable!==!0&&(k.value===!0||m.expandIconToggle===!0)),B=X(()=>({expanded:i.value===!0,detailsId:f.value,toggle:_,show:u,hide:c})),$=X(()=>{const ae=m.toggleAriaLabel!==void 0?m.toggleAriaLabel:o.lang.label[i.value===!0?"collapse":"expand"](m.label);return{role:"button","aria-expanded":i.value===!0?"true":"false","aria-controls":f.value,"aria-label":ae}});Be(()=>m.group,ae=>{g!==void 0&&g(),ae!==void 0&&Z()});function q(ae){k.value!==!0&&_(ae),d("click",ae)}function I(ae){ae.keyCode===13&&E(ae,!0)}function E(ae,Ve){Ve!==!0&&p.value!==null&&p.value.focus(),_(ae),Ct(ae)}function j(){d("afterShow")}function P(){d("afterHide")}function Z(){w===void 0&&(w=pn()),i.value===!0&&(St[m.group]=w);const ae=Be(i,ze=>{ze===!0?St[m.group]=w:St[m.group]===w&&delete St[m.group]}),Ve=Be(()=>St[m.group],(ze,rt)=>{rt===w&&ze!==void 0&&ze!==w&&c()});g=()=>{ae(),Ve(),St[m.group]===w&&delete St[m.group],g=void 0}}function de(){const ae={class:[`q-focusable relative-position cursor-pointer${m.denseToggle===!0&&m.switchToggleSide===!0?" items-end":""}`,m.expandIconClass],side:m.switchToggleSide!==!0,avatar:m.switchToggleSide},Ve=[fe(V,{class:"q-expansion-item__toggle-icon"+(m.expandedIcon===void 0&&i.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:y.value})];return O.value===!0&&(Object.assign(ae,{tabindex:0,...$.value,onClick:E,onKeyup:I}),Ve.unshift(fe("div",{ref:p,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),fe(M,ae,()=>Ve)}function U(){let ae;return s.header!==void 0?ae=[].concat(s.header(B.value)):(ae=[fe(M,()=>[fe(ge,{lines:m.labelLines},()=>m.label||""),m.caption?fe(ge,{lines:m.captionLines,caption:!0},()=>m.caption):null])],m.icon&&ae[m.switchToggleSide===!0?"push":"unshift"](fe(M,{side:m.switchToggleSide===!0,avatar:m.switchToggleSide!==!0},()=>fe(V,{name:m.icon})))),m.disable!==!0&&m.hideExpandIcon!==!0&&ae[m.switchToggleSide===!0?"unshift":"push"](de()),ae}function z(){const ae={ref:"item",style:m.headerStyle,class:m.headerClass,dark:n.value,disable:m.disable,dense:m.dense,insetLevel:m.headerInsetLevel};return D.value===!0&&(ae.clickable=!0,ae.onClick=q,Object.assign(ae,k.value===!0?A.value:$.value)),fe(ee,ae,U)}function G(){return J(fe("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:C.value,id:f.value},wt(s.default)),[[Va,i.value]])}function Ce(){const ae=[z(),fe(r1,{duration:m.duration,onShow:j,onHide:P},G)];return m.expandSeparator===!0&&ae.push(fe(ot,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:n.value}),fe(ot,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:n.value})),ae}return m.group!==void 0&&Z(),Xt(()=>{g!==void 0&&g()}),()=>fe("div",{class:x.value},[fe("div",{class:"q-expansion-item__container relative-position"},Ce())])}}),d1={class:"absolute-top",style:{height:"50px","border-bottom":"1px solid #ddd","align-items":"center","justify-content":"center"}},u1={style:{width:"100%",padding:"8px",display:"flex","justify-content":"space-between"}},m1={class:"text-bold"},c1={class:"text-grey-8 text-caption"},p1={class:"absolute-bottom text-grey-6 q-pa-md"},pl="amanah-pos.layout.left-drawer-open",f1={__name:"AuthenticatedLayout",props:{showDrawerButton:{type:Boolean,default:!0}},setup(m,{expose:s}){const d=he(),o=ce(),n=S(JSON.parse(localStorage.getItem(pl))),i=S(!1),p=()=>n.value=!n.value,f=()=>{n.value=!1};return Be(n,u=>{localStorage.setItem(pl,u)}),$e(()=>{n.value=JSON.parse(localStorage.getItem(pl)),d.screen.lt.md&&(n.value=!1)}),s({hideDrawer:f}),(u,c)=>(v(),N(wn,{view:"lHh LpR lFf"},{default:a(()=>[e(fn,null,{default:a(()=>[e(Qe,{class:"bg-grey-1 text-black toolbar-scrolled"},{default:a(()=>[m.showDrawerButton&&!n.value?(v(),N(R,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:p},{default:a(()=>[e(V,{class:"material-symbols-outlined"},{default:a(()=>c[25]||(c[25]=[b("dock_to_right")])),_:1})]),_:1})):T("",!0),Vt(u.$slots,"left-button",{},void 0,!0),e(gn,{style:{"font-size":"16px"}},{default:a(()=>[Vt(u.$slots,"title",{},()=>[b(r(u.$config.APP_NAME),1)],!0)]),_:3}),Vt(u.$slots,"right-button",{},void 0,!0)]),_:3}),Vt(u.$slots,"header",{},void 0,!0)]),_:3}),e(bn,{breakpoint:768,modelValue:n.value,"onUpdate:modelValue":c[24]||(c[24]=_=>n.value=_),bordered:"",class:"bg-grey-2",style:{color:"#444"}},{default:a(()=>[l("div",d1,[l("div",u1,[e(vn,{modelValue:i.value,"onUpdate:modelValue":c[2]||(c[2]=_=>i.value=_),class:_e(["profile-btn text-bold",{"profile-btn-active":i.value}]),flat:"",label:t(o).props.company.name,style:{"justify-content":"space-between","flex-grow":"1",overflow:"hidden"}},{default:a(()=>[e(Ee,{id:"profile-btn-popup",style:{color:"#444"}},{default:a(()=>[e(ee,null,{default:a(()=>[e(Rt,{style:{"margin-left":"-15px"}},{default:a(()=>[e(V,{name:"person"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>[l("div",m1,r(t(o).props.auth.user.name),1),l("div",c1,[b(r(u.$CONSTANTS.USER_TYPES[t(o).props.auth.user.type])+" ",1),c[26]||(c[26]=l("br",null,null,-1)),b(" "+r(t(o).props.company.name),1)])]),_:1})]),_:1})]),_:1}),e(ot),J((v(),N(ee,{class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/profile"),onClick:c[0]||(c[0]=_=>t(W).get(u.route("admin.profile.edit")))},{default:a(()=>[e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>[e(V,{name:"manage_accounts",class:"q-mr-sm"}),c[27]||(c[27]=b(" Profil Saya"))]),_:1})]),_:1})]),_:1},8,["active"])),[[re],[ne]]),u.$can("admin.company-profile.edit")?J((v(),N(ee,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/company-profile"),onClick:c[1]||(c[1]=_=>t(W).get(u.route("admin.company-profile.edit")))},{default:a(()=>[e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>[e(V,{name:"home_work",class:"q-mr-sm"}),c[28]||(c[28]=b(" Profil Perusahaan"))]),_:1})]),_:1})]),_:1},8,["active"])),[[re],[ne]]):T("",!0),e(ot),J((v(),N(ee,{clickable:"",style:{color:"inherit"},href:u.route("admin.auth.logout")},{default:a(()=>[e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>[e(V,{name:"logout",class:"q-mr-sm"}),c[29]||(c[29]=b(" Keluar"))]),_:1})]),_:1})]),_:1},8,["href"])),[[re],[ne]])]),_:1})]),_:1},8,["modelValue","label","class"]),n.value?(v(),N(R,{key:0,flat:"",dense:"","aria-label":"Menu",onClick:p},{default:a(()=>[e(V,{name:"dock_to_right"})]),_:1})):T("",!0)])]),e(_n,{style:{height:"calc(100% - 50px)","margin-top":"50px"}},{default:a(()=>[e(Ee,{id:"main-nav",style:{"margin-bottom":"50px"}},{default:a(()=>[J((v(),N(ee,{clickable:"",active:u.$page.url.startsWith("/admin/dashboard"),onClick:c[3]||(c[3]=_=>t(W).get(u.route("admin.dashboard")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"dashboard"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[30]||(c[30]=[b("Dashboard")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]),u.$can("admin.sales-order.index")||u.$can("admin.customer.index")?(v(),N(_t,{key:0,icon:"storefront",label:"Penjualan","default-opened":u.$page.url.startsWith("/admin/sales-orders")||u.$page.url.startsWith("/admin/customers")},{default:a(()=>[u.$can("admin.sales-order.index")?J((v(),N(ee,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/sales-orders"),onClick:c[4]||(c[4]=_=>t(W).get(u.route("admin.sales-order.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"shopping_cart"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[31]||(c[31]=[b("Penjualan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),u.$can("admin.customer.index")?J((v(),N(ee,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/customers"),onClick:c[5]||(c[5]=_=>t(W).get(u.route("admin.customer.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"people"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[32]||(c[32]=[b("Pelanggan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0)]),_:1},8,["default-opened"])):T("",!0),u.$can("admin.purchase-order.index")||u.$can("admin.supplier.index")?(v(),N(_t,{key:1,icon:"local_shipping",label:"Pembelian","default-opened":u.$page.url.startsWith("/admin/purchase-orders")||u.$page.url.startsWith("/admin/suppliers")},{default:a(()=>[u.$can("admin.purchase-order.index")?J((v(),N(ee,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/purchase-orders"),onClick:c[6]||(c[6]=_=>t(W).get(u.route("admin.purchase-order.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"shopping_cart"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[33]||(c[33]=[b("Pembelian")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),u.$can("admin.supplier.index")?J((v(),N(ee,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/suppliers"),onClick:c[7]||(c[7]=_=>t(W).get(u.route("admin.supplier.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"people"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[34]||(c[34]=[b("Pemasok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0)]),_:1},8,["default-opened"])):T("",!0),u.$can("admin.product.index")||u.$can("admin.product-category.index")||u.$can("admin.stock-adjustment.index")||u.$can("admin.stock-movement.index")?(v(),N(_t,{key:2,icon:"inventory_2",label:"Inventori","default-opened":u.$page.url.startsWith("/admin/products")||u.$page.url.startsWith("/admin/product-categories")||u.$page.url.startsWith("/admin/stock-adjustments")||u.$page.url.startsWith("/admin/stock-movements")},{default:a(()=>[u.$can("admin.stock-adjustment.index")?J((v(),N(ee,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/stock-adjustments"),onClick:c[8]||(c[8]=_=>t(W).get(u.route("admin.stock-adjustment.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"swap_vert"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[35]||(c[35]=[b("Penyesuaian Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),u.$can("admin.stock-movement.index")?J((v(),N(ee,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/stock-movements"),onClick:c[9]||(c[9]=_=>t(W).get(u.route("admin.stock-movement.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"timeline"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[36]||(c[36]=[b("Riwayat Stok")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),u.$can("admin.product.index")?J((v(),N(ee,{key:2,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/products"),onClick:c[10]||(c[10]=_=>t(W).get(u.route("admin.product.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"box"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[37]||(c[37]=[b("Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),u.$can("admin.product-category.index")?J((v(),N(ee,{key:3,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/product-categories"),onClick:c[11]||(c[11]=_=>t(W).get(u.route("admin.product-category.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"category"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[38]||(c[38]=[b("Kategori Produk")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0)]),_:1},8,["default-opened"])):T("",!0),u.$can("admin.cashier-session.index")||u.$can("admin.cashier-terminal.index")?(v(),N(_t,{key:3,icon:"point_of_sale",label:"Kasir","default-opened":u.$page.url.startsWith("/admin/cashier-terminals")||u.$page.url.startsWith("/admin/cashier-session")},{default:a(()=>[u.$can("admin.cashier-session.index")?J((v(),N(ee,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/cashier-sessions"),onClick:c[12]||(c[12]=_=>t(W).get(u.route("admin.cashier-session.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"tv_signin"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[39]||(c[39]=[b("Sesi Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),u.$can("admin.cashier-terminal.index")?J((v(),N(ee,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/cashier-terminals"),onClick:c[13]||(c[13]=_=>t(W).get(u.route("admin.cashier-terminal.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"point_of_sale"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[40]||(c[40]=[b("Terminal Kasir")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0)]),_:1},8,["default-opened"])):T("",!0),u.$can("admin.customer-wallet-transaction-confirmation.index")||u.$can("admin.customer-wallet-transaction.index")?(v(),N(_t,{key:4,icon:"wallet",label:"Wallet","default-opened":u.$page.url.startsWith("/admin/customer-wallet-transactions")||u.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations")},{default:a(()=>[u.$can("admin.customer-wallet-transaction-confirmation.index")?J((v(),N(ee,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/customer-wallet-transaction-confirmations"),onClick:c[14]||(c[14]=_=>t(W).get(u.route("admin.customer-wallet-transaction-confirmation.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"add_task"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[41]||(c[41]=[b("Konfirmasi Top Up")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),u.$can("admin.customer-wallet-transaction.index")?J((v(),N(ee,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/customer-wallet-transactions"),onClick:c[15]||(c[15]=_=>t(W).get(u.route("admin.customer-wallet-transaction.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"moving"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[42]||(c[42]=[b("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0)]),_:1},8,["default-opened"])):T("",!0),u.$can("admin.finance-transaction.index")||u.$can("admin.finance-account.index")?(v(),N(_t,{key:5,icon:"finance",label:"Keuangan","default-opened":u.$page.url.startsWith("/admin/finance-accounts")||u.$page.url.startsWith("/admin/finance-transactions")},{default:a(()=>[u.$can("admin.finance-transaction.index")?J((v(),N(ee,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/finance-transactions"),onClick:c[16]||(c[16]=_=>t(W).get(u.route("admin.finance-transaction.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"moving"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[43]||(c[43]=[b("Transaksi")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),u.$can("admin.finance-account.index")?J((v(),N(ee,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/finance-accounts"),onClick:c[17]||(c[17]=_=>t(W).get(u.route("admin.finance-account.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"groups_2"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[44]||(c[44]=[b("Akun Kas")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0)]),_:1},8,["default-opened"])):T("",!0),u.$can("admin.operational-cost.index")||u.$can("admin.operational-cost-category.index")?(v(),N(_t,{key:6,icon:"paid",label:"Operasional","default-opened":u.$page.url.startsWith("/admin/operational-costs")||u.$page.url.startsWith("/admin/operational-cost-categories")},{default:a(()=>[u.$can("admin.operational-cost.index")?J((v(),N(ee,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/operational-costs"),onClick:c[18]||(c[18]=_=>t(W).get(u.route("admin.operational-cost.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"request_quote"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[45]||(c[45]=[b("Biaya Operasional")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),u.$can("admin.operational-cost-category.index")?J((v(),N(ee,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/operational-cost-categories"),onClick:c[19]||(c[19]=_=>t(W).get(u.route("admin.operational-cost-category.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"category"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[46]||(c[46]=[b("Kategori")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0)]),_:1},8,["default-opened"])):T("",!0),e(_t,{icon:"settings",label:"Pengaturan","default-opened":u.$page.url.startsWith("/admin/settings")},{default:a(()=>[u.$can("admin.user.index")?J((v(),N(ee,{key:0,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/users"),onClick:c[20]||(c[20]=_=>t(W).get(u.route("admin.user.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"person"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[47]||(c[47]=[b("Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),u.$can("admin.user-role.index")?J((v(),N(ee,{key:1,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/user-roles"),onClick:c[21]||(c[21]=_=>t(W).get(u.route("admin.user-role.index")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"group"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[48]||(c[48]=[b("Role Pengguna")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0),J((v(),N(ee,{class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/profile"),onClick:c[22]||(c[22]=_=>t(W).get(u.route("admin.profile.edit")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"manage_accounts"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[49]||(c[49]=[b("Profil Saya")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]),u.$can("admin.company-profile.edit")?J((v(),N(ee,{key:2,class:"subnav",clickable:"",active:u.$page.url.startsWith("/admin/settings/company-profile"),onClick:c[23]||(c[23]=_=>t(W).get(u.route("admin.company-profile.edit")))},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"apartment"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[50]||(c[50]=[b("Profil Perusahaan")])),_:1})]),_:1})]),_:1},8,["active"])),[[ne]]):T("",!0)]),_:1},8,["default-opened"]),J((v(),N(ee,{clickable:"",style:{color:"inherit"},href:u.route("admin.auth.logout")},{default:a(()=>[e(M,{avatar:""},{default:a(()=>[e(V,{name:"logout"})]),_:1}),e(M,null,{default:a(()=>[e(ge,null,{default:a(()=>c[51]||(c[51]=[b("Logout")])),_:1})]),_:1})]),_:1},8,["href"])),[[re],[ne]]),l("div",p1," © 2025 - "+r(u.$config.APP_NAME+" v"+u.$config.APP_VERSION_STR),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(yn,{class:"bg-grey-1"},{default:a(()=>[e(ke,null,{default:a(()=>[Vt(u.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),Vt(u.$slots,"footer",{},void 0,!0)]),_:3}))}},g1=ft(f1,[["__scopeId","data-v-64c3429f"]]),b1={__name:"GuestLayout",setup(m){return(s,d)=>(v(),N(kn,null,{default:a(()=>[Vt(s.$slots,"default")]),_:3}))}};hn({layouts:{authenticated:g1,guest:b1},pagesGlob:Object.assign({"./pages/About.vue":qn,"./pages/_examples/Autocomplete1.vue":In,"./pages/auth/Login.vue":An,"./pages/cashier-session/Close.vue":Hn,"./pages/cashier-session/Detail.vue":rs,"./pages/cashier-session/Index.vue":ps,"./pages/cashier-session/Open.vue":vs,"./pages/cashier-session/detail/MainInfoTab.vue":ls,"./pages/cashier-terminal/Detail.vue":Ls,"./pages/cashier-terminal/Editor.vue":Js,"./pages/cashier-terminal/Index.vue":lr,"./pages/cashier-terminal/detail/MainInfoTab.vue":As,"./pages/cashier-terminal/detail/SessionHistoryTab.vue":Ns,"./pages/company-profile/Edit.vue":ir,"./pages/company-profile/partials/CompanyInfoForm.vue":ar,"./pages/customer-wallet-transaction-confirmation/Detail.vue":yr,"./pages/customer-wallet-transaction-confirmation/Index.vue":xr,"./pages/customer-wallet-transaction/Adjustment.vue":qr,"./pages/customer-wallet-transaction/Detail.vue":Er,"./pages/customer-wallet-transaction/Editor.vue":Fr,"./pages/customer-wallet-transaction/Index.vue":Wr,"./pages/customer/Detail.vue":yi,"./pages/customer/Editor.vue":$i,"./pages/customer/Import.vue":Pi,"./pages/customer/Index.vue":Mi,"./pages/customer/detail/MainInfoTab.vue":si,"./pages/customer/detail/OrderHistoryTab.vue":fi,"./pages/customer/detail/WalletHistoryTab.vue":di,"./pages/dashboard/Index.vue":ad,"./pages/dashboard/cards/ActualSummaryCard.vue":zi,"./pages/dashboard/cards/ChartCard.vue":Qi,"./pages/dashboard/cards/SummaryCard.vue":pd,"./pages/dashboard/cards/TopCard.vue":Xi,"./pages/finance-account/Detail.vue":Sd,"./pages/finance-account/Editor.vue":Pd,"./pages/finance-account/Index.vue":zd,"./pages/finance-account/detail/HistoryTab.vue":yd,"./pages/finance-account/detail/MainInfoTab.vue":gd,"./pages/finance-transaction/Detail.vue":eu,"./pages/finance-transaction/Editor.vue":ou,"./pages/finance-transaction/Index.vue":cu,"./pages/operational-cost-category/Editor.vue":bu,"./pages/operational-cost-category/Index.vue":$u,"./pages/operational-cost/Detail.vue":Ru,"./pages/operational-cost/Editor.vue":Nu,"./pages/operational-cost/Index.vue":Wu,"./pages/product-category/Editor.vue":Zu,"./pages/product-category/Index.vue":sm,"./pages/product/Detail.vue":Cm,"./pages/product/Editor.vue":Om,"./pages/product/Import.vue":Mm,"./pages/product/Index.vue":Ym,"./pages/product/detail/MainInfoTab.vue":_m,"./pages/product/detail/StockHistoryTab.vue":km,"./pages/profile/Edit.vue":Zm,"./pages/profile/partials/UpdatePasswordForm.vue":Km,"./pages/profile/partials/UpdateProfileInformationForm.vue":Qm,"./pages/purchase-order/Editor.vue":Rc,"./pages/purchase-order/Editor_v1.vue":Ac,"./pages/purchase-order/Index.vue":Yc,"./pages/purchase-order/editor/ConfirmDeleteDialog.vue":xc,"./pages/purchase-order/editor/ItemsListTable.vue":gc,"./pages/purchase-order/editor/SupplierEditorDialog.vue":Sc,"./pages/purchase-order/editor/TransactionHeader.vue":uc,"./pages/purchase-order/editor/TransactionSummary.vue":hc,"./pages/sales-order/Detail.vue":Vp,"./pages/sales-order/Editor.vue":Jf,"./pages/sales-order/Index.vue":rg,"./pages/sales-order/editor/HelpDialog.vue":nf,"./pages/sales-order/editor/ItemEditorDialog.vue":tf,"./pages/sales-order/editor/ItemsListTable.vue":Ip,"./pages/sales-order/editor/OrderInfoDialog.vue":mf,"./pages/sales-order/editor/PaymentDialog.vue":Qp,"./pages/sales-order/editor/SuccessDialog.vue":xf,"./pages/stock-adjustment/Create.vue":bg,"./pages/stock-adjustment/Detail.vue":Vg,"./pages/stock-adjustment/Editor.vue":Dg,"./pages/stock-adjustment/Index.vue":zg,"./pages/stock-movement/Index.vue":Wg,"./pages/supplier/Detail.vue":lb,"./pages/supplier/Editor.vue":ib,"./pages/supplier/Index.vue":fb,"./pages/user-role/Detail.vue":Vb,"./pages/user-role/Editor.vue":Ob,"./pages/user-role/Index.vue":Eb,"./pages/user/Detail.vue":Kb,"./pages/user/Editor.vue":Zb,"./pages/user/Index.vue":s1})});
